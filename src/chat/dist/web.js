"use strict";var XT=Object.create;var ga=Object.defineProperty;var _0=Object.getOwnPropertyDescriptor;var YT=Object.getOwnPropertyNames;var ZT=Object.getPrototypeOf,e_=Object.prototype.hasOwnProperty;var Ae=(n,e)=>()=>(n&&(e=n(n=0)),e);var ve=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Vt=(n,e)=>{for(var t in e)ga(n,t,{get:e[t],enumerable:!0})},k0=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of YT(e))!e_.call(n,i)&&i!==t&&ga(n,i,{get:()=>e[i],enumerable:!(r=_0(e,i))||r.enumerable});return n};var Te=(n,e,t)=>(t=n!=null?XT(ZT(n)):{},k0(e||!n||!n.__esModule?ga(t,"default",{value:n,enumerable:!0}):t,n)),Ar=n=>k0(ga({},"__esModule",{value:!0}),n),E=(n,e,t,r)=>{for(var i=r>1?void 0:r?_0(e,t):e,o=n.length-1,s;o>=0;o--)(s=n[o])&&(i=(r?s(e,t,i):s(i))||i);return r&&i&&ga(e,t,i),i},v=(n,e)=>(t,r)=>e(t,r,n);function Ro(n,e){let t=Object.create(null);for(let r of n){let i=e(r),o=t[i];o||(o=t[i]=[]),o.push(r)}return t}var E0,S0,C0,va=Ae(()=>{"use strict";C0=class{constructor(e,t){this.toKey=t;this._map=new Map;this[E0]="SetWithKey";for(let r of e)this.add(r)}get size(){return this._map.size}add(e){let t=this.toKey(e);return this._map.set(t,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,t){this._map.forEach(r=>e.call(t,r,r,this))}[(S0=Symbol.iterator,E0=Symbol.toStringTag,S0)](){return this.values()}}});var Wp={};Vt(Wp,{BugIndicatingError:()=>G,CancellationError:()=>Ne,ErrorHandler:()=>Hu,ErrorNoTelemetry:()=>Ci,ExpectedError:()=>$p,NotImplementedError:()=>Vp,NotSupportedError:()=>qp,PendingMigrationError:()=>Up,ReadonlyError:()=>Bp,canceled:()=>u_,canceledName:()=>xa,errorHandler:()=>ya,getErrorMessage:()=>l_,illegalArgument:()=>Ku,illegalState:()=>Ju,isCancellationError:()=>Ta,isSigPipeError:()=>s_,onBugIndicatingError:()=>Lr,onUnexpectedError:()=>at,onUnexpectedExternalError:()=>a_,setUnexpectedErrorHandler:()=>o_,transformErrorForSerialization:()=>R0,transformErrorFromSerialization:()=>D0});function o_(n){ya.setUnexpectedErrorHandler(n)}function s_(n){if(!n||typeof n!="object")return!1;let e=n;return e.code==="EPIPE"&&e.syscall?.toUpperCase()==="WRITE"}function Lr(n){ya.onUnexpectedError(n)}function at(n){Ta(n)||ya.onUnexpectedError(n)}function a_(n){Ta(n)||ya.onUnexpectedExternalError(n)}function R0(n){if(n instanceof Error){let{name:e,message:t,cause:r}=n,i=n.stacktrace||n.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:Ci.isErrorNoTelemetry(n),cause:r?R0(r):void 0,code:n.code}}return n}function D0(n){let e;return n.noTelemetry?e=new Ci:(e=new Error,e.name=n.name),e.message=n.message,e.stack=n.stack,n.code&&(e.code=n.code),n.cause&&(e.cause=D0(n.cause)),e}function Ta(n){return n instanceof Ne?!0:n instanceof Error&&n.name===xa&&n.message===xa}function u_(){let n=new Error(xa);return n.name=n.message,n}function Ku(n){return n?new Error(`Illegal argument: ${n}`):new Error("Illegal argument")}function Ju(n){return n?new Error(`Illegal state: ${n}`):new Error("Illegal state")}function l_(n){return n?n.message?n.message:n.stack?n.stack.split(`
`)[0]:String(n):"Error"}var Hu,ya,xa,Ne,Up,Bp,Vp,qp,$p,Ci,G,we=Ae(()=>{"use strict";Hu=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Ci.isErrorNoTelemetry(e)?new Ci(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},ya=new Hu;xa="Canceled";Ne=class extends Error{constructor(){super(xa),this.name=this.message}},Up=class n extends Error{static{this._name="PendingMigrationError"}static is(e){return e instanceof n||e instanceof Error&&e.name===n._name}constructor(e){super(e),this.name=n._name}};Bp=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}};Vp=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},qp=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},$p=class extends Error{constructor(){super(...arguments);this.isExpected=!0}},Ci=class n extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof n)return e;let t=new n;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},G=class n extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,n.prototype)}}});var jp=Ae(()=>{"use strict";});var L0={};Vt(L0,{MonotonousArray:()=>Gp,findFirstIdxMonotonous:()=>d_,findFirstIdxMonotonousOrArrLen:()=>Si,findFirstMax:()=>P0,findFirstMin:()=>f_,findFirstMonotonous:()=>c_,findLast:()=>Ei,findLastIdx:()=>A0,findLastIdxMonotonous:()=>Or,findLastMax:()=>p_,findLastMonotonous:()=>Qu,findMaxIdx:()=>m_,mapFindFirst:()=>h_});function Ei(n,e,t=n.length-1){let r=A0(n,e,t);if(r!==-1)return n[r]}function A0(n,e,t=n.length-1){for(let r=t;r>=0;r--){let i=n[r];if(e(i))return r}return-1}function Qu(n,e){let t=Or(n,e);return t===-1?void 0:n[t]}function Or(n,e,t=0,r=n.length){let i=t,o=r;for(;i<o;){let s=Math.floor((i+o)/2);e(n[s])?i=s+1:o=s}return i-1}function c_(n,e){let t=Si(n,e);return t===n.length?void 0:n[t]}function Si(n,e,t=0,r=n.length){let i=t,o=r;for(;i<o;){let s=Math.floor((i+o)/2);e(n[s])?o=s:i=s+1}return i}function d_(n,e,t=0,r=n.length){let i=Si(n,e,t,r);return i===n.length?-1:i}function P0(n,e){if(n.length===0)return;let t=n[0];for(let r=1;r<n.length;r++){let i=n[r];e(i,t)>0&&(t=i)}return t}function p_(n,e){if(n.length===0)return;let t=n[0];for(let r=1;r<n.length;r++){let i=n[r];e(i,t)>=0&&(t=i)}return t}function f_(n,e){return P0(n,(t,r)=>-e(t,r))}function m_(n,e){if(n.length===0)return-1;let t=0;for(let r=1;r<n.length;r++){let i=n[r];e(i,n[t])>0&&(t=r)}return t}function h_(n,e){for(let t of n){let r=e(t);if(r!==void 0)return r}}var Gp,Nr=Ae(()=>{"use strict";Gp=class n{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{this.assertInvariants=!1}findLastMonotonous(e){if(n.assertInvariants){if(this._prevFindLastPredicate){for(let r of this._array)if(this._prevFindLastPredicate(r)&&!e(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let t=Or(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}}});function Do(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function*N0(n,e){let t,r;for(let i of n)r!==void 0&&e(r,i)?t.push(i):(t&&(yield t),t=[i]),r=i;t&&(yield t)}function Ri(n){return n.filter(e=>!!e)}function F0(n,e=t=>t){let t=new Set;return n.filter(r=>{let i=e(r);return t.has(i)?!1:(t.add(i),!0)})}function M0(n){let e=new Set;return t=>{let r=n(t);return e.has(r)?!1:(e.add(r),!0)}}function Fr(n,e){return(t,r)=>e(n(t),n(r))}function B0(n,e){return n.reduce((t,r)=>t+e(r),0)}var U0,Ao,O0,wt=Ae(()=>{"use strict";Nr();we();(a=>{function n(u){return u<0}a.isLessThan=n;function e(u){return u<=0}a.isLessThanOrEqual=e;function t(u){return u>0}a.isGreaterThan=t;function r(u){return u===0}a.isNeitherLessOrGreaterThan=r,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(U0||={});Ao=(n,e)=>n-e,O0=class n{constructor(e){this.iterate=e}static{this.empty=new n(e=>{})}forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new n(t=>this.iterate(r=>e(r)?t(r):!0))}map(e){return new n(t=>this.iterate(r=>t(e(r))))}some(e){let t=!1;return this.iterate(r=>(t=e(r),!t)),t}findFirst(e){let t;return this.iterate(r=>e(r)?(t=r,!1):!0),t}findLast(e){let t;return this.iterate(r=>(e(r)&&(t=r),!0)),t}findLastMaxBy(e){let t,r=!0;return this.iterate(i=>((r||U0.isGreaterThan(e(i,t)))&&(r=!1,t=i),!0)),t}}});function b_(n){return Array.isArray(n)}var zp,V0,hn,q0,Xu,$0,Hp,Kp,en,Yu,gn=Ae(()=>{"use strict";zp=class{constructor(e,t){this.uri=e;this.value=t}};hn=class n{constructor(e,t){this[V0]="ResourceMap";if(e instanceof n)this.map=new Map(e.map),this.toKey=t??n.defaultToKey;else if(b_(e)){this.map=new Map,this.toKey=t??n.defaultToKey;for(let[r,i]of e)this.set(r,i)}else this.map=new Map,this.toKey=e??n.defaultToKey}static{this.defaultToKey=e=>e.toString()}set(e,t){return this.map.set(this.toKey(e),new zp(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[r,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(V0=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},Xu=class{constructor(e,t){this[q0]="ResourceSet";!e||typeof e=="function"?this._map=new hn(e):(this._map=new hn(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((r,i)=>e.call(t,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(q0=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},Hp=class{constructor(){this[$0]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let r=this._map.get(e);if(r)return t!==0&&this.touch(r,t),r.value}set(e,t,r=0){let i=this._map.get(e);if(i)i.value=t,r!==0&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[($0=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.previous,r--;this._tail=t,this._size=r,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}},Kp=class extends Hp{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},en=class extends Kp{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}},Yu=class{constructor(){this.map=new Map}add(e,t){let r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(t)}delete(e,t){let r=this.map.get(e);r&&(r.delete(t),r.size===0&&this.map.delete(e))}forEach(e,t){let r=this.map.get(e);r&&r.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}}});function Zu(n,e="Unreachable"){throw new Error(e)}function _a(n,e="unexpected state"){if(!n)throw typeof e=="string"?new G(`Assertion Failed: ${e}`):e}function Nn(n){if(!n()){debugger;n(),at(new G("Assertion Failed"))}}function el(n,e){let t=0;for(;t<n.length-1;){let r=n[t],i=n[t+1];if(!e(r,i))return!1;t++}return!0}var Fn=Ae(()=>{"use strict";we();});function tl(n){return typeof n=="string"}function Mr(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function W0(n){return!!n&&typeof n[Symbol.iterator]=="function"}function v_(n){return typeof n>"u"}function Mn(n){return!Jp(n)}function Jp(n){return v_(n)||n===null}function j0(n,e){if(!n)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}var qt=Ae(()=>{"use strict";Fn();});var $t,Po=Ae(()=>{"use strict";qt();(A=>{function n(k){return!!k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}A.is=n;let e=Object.freeze([]);function t(){return e}A.empty=t;function*r(k){yield k}A.single=r;function i(k){return n(k)?k:r(k)}A.wrap=i;function o(k){return k||e}A.from=o;function*s(k){for(let O=k.length-1;O>=0;O--)yield k[O]}A.reverse=s;function a(k){return!k||k[Symbol.iterator]().next().done===!0}A.isEmpty=a;function u(k){return k[Symbol.iterator]().next().value}A.first=u;function l(k,O){let Y=0;for(let le of k)if(O(le,Y++))return!0;return!1}A.some=l;function p(k,O){let Y=0;for(let le of k)if(!O(le,Y++))return!1;return!0}A.every=p;function d(k,O){for(let Y of k)if(O(Y))return Y}A.find=d;function*f(k,O){for(let Y of k)O(Y)&&(yield Y)}A.filter=f;function*h(k,O){let Y=0;for(let le of k)yield O(le,Y++)}A.map=h;function*m(k,O){let Y=0;for(let le of k)yield*O(le,Y++)}A.flatMap=m;function*g(...k){for(let O of k)W0(O)?yield*O:yield O}A.concat=g;function x(k,O,Y){let le=Y;for(let Be of k)le=O(le,Be);return le}A.reduce=x;function I(k){let O=0;for(let Y of k)O++;return O}A.length=I;function*T(k,O,Y=k.length){for(O<-k.length&&(O=0),O<0&&(O+=k.length),Y<0?Y+=k.length:Y>k.length&&(Y=k.length);O<Y;O++)yield k[O]}A.slice=T;function b(k,O=Number.POSITIVE_INFINITY){let Y=[];if(O===0)return[Y,k];let le=k[Symbol.iterator]();for(let Be=0;Be<O;Be++){let tr=le.next();if(tr.done)return[Y,A.empty()];Y.push(tr.value)}return[Y,{[Symbol.iterator](){return le}}]}A.consume=b;async function y(k){let O=[];for await(let Y of k)O.push(Y);return O}A.asyncToArray=y;async function S(k){let O=[];for await(let Y of k)O=O.concat(Y);return O}A.asyncToArrayFlat=S})($t||={})});function __(n){Lo=n}function Oo(n){return Lo?.trackDisposable(n),n}function No(n){Lo?.markAsDisposed(n)}function Qp(n,e){Lo?.setParent(n,e)}function k_(n,e){if(Lo)for(let t of n)Lo.setParent(t,e)}function Fo(n){return typeof n=="object"&&n!==null&&typeof n.dispose=="function"&&n.dispose.length===0}function nl(n){if($t.is(n)){let e=[];for(let t of n)if(t)try{t.dispose()}catch(r){e.push(r)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(n)?[]:n}else if(n)return n.dispose(),n}function z0(...n){let e=Ct(()=>nl(n));return k_(n,e),e}function Ct(n){return new Xp(n)}var T_,Lo,G0,Xp,de,K,pe=Ae(()=>{"use strict";wt();va();gn();jp();Po();we();T_=!1,Lo=null,G0=class n{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let t=this.livingDisposables.get(e);return t||(t={parent:null,source:null,isSingleton:!1,value:e,idx:n.idx++},this.livingDisposables.set(e,t)),t}trackDisposable(e){let t=this.getDisposableData(e);t.source||(t.source=new Error().stack)}setParent(e,t){let r=this.getDisposableData(e);r.parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){let r=t.get(e);if(r)return r;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,r])=>r.source!==null&&!this.getRootParent(r,e).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(e=10,t){let r;if(t)r=t;else{let u=new Map,l=[...this.livingDisposables.values()].filter(d=>d.source!==null&&!this.getRootParent(d,u).isSingleton);if(l.length===0)return;let p=new Set(l.map(d=>d.value));if(r=l.filter(d=>!(d.parent&&p.has(d.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function i(u){function l(d,f){for(;d.length>0&&f.some(h=>typeof h=="string"?h===d[0]:d[0].match(h));)d.shift()}let p=u.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return l(p,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),p.reverse()}let o=new Yu;for(let u of r){let l=i(u);for(let p=0;p<=l.length;p++)o.add(l.slice(0,p).join(`
`),u)}r.sort(Fr(u=>u.idx,Ao));let s="",a=0;for(let u of r.slice(0,e)){a++;let l=i(u),p=[];for(let d=0;d<l.length;d++){let f=l[d];f=`(shared with ${o.get(l.slice(0,d+1).join(`
`)).size}/${r.length} leaks) at ${f}`;let m=o.get(l.slice(0,d).join(`
`)),g=Ro([...m].map(x=>i(x)[d]),x=>x);delete g[l[d]];for(let[x,I]of Object.entries(g))I&&p.unshift(`    - stacktraces of ${I.length} other leaks continue with ${x}`);p.unshift(f)}s+=`


==================== Leaking disposable ${a}/${r.length}: ${u.value.constructor.name} ====================
${p.join(`
`)}
============================================================

`}return r.length>e&&(s+=`


... and ${r.length-e} more leaking disposables

`),{leaks:r,details:s}}};if(T_){let n="__is_disposable_tracked__";__(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[n]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==K.None)try{e[n]=!0}catch{}}markAsDisposed(e){if(e&&e!==K.None)try{e[n]=!0}catch{}}markAsSingleton(e){}})}Xp=class{constructor(e){this._isDisposed=!1,this._fn=e,Oo(this)}dispose(){if(!this._isDisposed){if(!this._fn)throw new Error("Unbound disposable context: Need to use an arrow function to preserve the value of this");this._isDisposed=!0,No(this),this._fn()}}};de=class n{constructor(){this._toDispose=new Set;this._isDisposed=!1;Oo(this)}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(No(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{nl(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e||e===K.None)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Qp(e,this),this._isDisposed?n.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Qp(e,null))}assertNotDisposed(){this._isDisposed&&at(new G("Object disposed"))}},K=class{constructor(){this._store=new de;Oo(this),Qp(this._store,this)}static{this.None=Object.freeze({dispose(){}})}dispose(){No(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}});var Pe,nr,ka=Ae(()=>{"use strict";Pe=class n{static{this.Undefined=new n(void 0)}constructor(e){this.element=e,this.next=n.Undefined,this.prev=n.Undefined}},nr=class{constructor(){this._first=Pe.Undefined;this._last=Pe.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===Pe.Undefined}clear(){let e=this._first;for(;e!==Pe.Undefined;){let t=e.next;e.prev=Pe.Undefined,e.next=Pe.Undefined,e=t}this._first=Pe.Undefined,this._last=Pe.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let r=new Pe(e);if(this._first===Pe.Undefined)this._first=r,this._last=r;else if(t){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}shift(){if(this._first!==Pe.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Pe.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Pe.Undefined&&e.next!==Pe.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Pe.Undefined&&e.next===Pe.Undefined?(this._first=Pe.Undefined,this._last=Pe.Undefined):e.next===Pe.Undefined?(this._last=this._last.prev,this._last.next=Pe.Undefined):e.prev===Pe.Undefined&&(this._first=this._first.next,this._first.prev=Pe.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Pe.Undefined;)yield e.element,e=e.next}}});var I_,Et,Mo=Ae(()=>{"use strict";I_=globalThis.performance.now.bind(globalThis.performance),Et=class n{static create(e){return new n(e)}constructor(e){this._now=e===!1?Date.now:I_,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}});var H0,C_,Ur,Yp,K0,Zp,Ia,ef,tf,E_,Uo,S_,R_,se,nf,Wt=Ae(()=>{"use strict";va();we();jp();pe();ka();Mo();H0=!1,C_=!1;(It=>{It.None=()=>K.None;function e(R){if(C_){let{onDidAddListener:C}=R,M=Ia.create(),P=0;R.onDidAddListener=()=>{++P===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),M.print()),C?.()}}}function t(R,C){return h(R,()=>{},0,void 0,!0,void 0,C)}It.defer=t;function r(R){return(C,M=null,P)=>{let $=!1,ee;return ee=R(fe=>{if(!$)return ee?ee.dispose():$=!0,C.call(M,fe)},null,P),$&&ee.dispose(),ee}}It.once=r;function i(R,C){return It.once(It.filter(R,C))}It.onceIf=i;function o(R,C,M){return d((P,$=null,ee)=>R(fe=>P.call($,C(fe)),null,ee),M)}It.map=o;function s(R,C,M){return d((P,$=null,ee)=>R(fe=>{C(fe),P.call($,fe)},null,ee),M)}It.forEach=s;function a(R,C,M){return d((P,$=null,ee)=>R(fe=>C(fe)&&P.call($,fe),null,ee),M)}It.filter=a;function u(R){return R}It.signal=u;function l(...R){return(C,M=null,P)=>{let $=z0(...R.map(ee=>ee(fe=>C.call(M,fe))));return f($,P)}}It.any=l;function p(R,C,M,P){let $=M;return o(R,ee=>($=C($,ee),$),P)}It.reduce=p;function d(R,C){let M,P={onWillAddFirstListener(){M=R($.fire,$)},onDidRemoveLastListener(){M?.dispose()}};C||e(P);let $=new se(P);return C?.add($),$.event}function f(R,C){return C instanceof Array?C.push(R):C&&C.add(R),R}function h(R,C,M=100,P=!1,$=!1,ee,fe){let Ke,st,Q,Eo=0,wi,Gu={leakWarningThreshold:ee,onWillAddFirstListener(){Ke=R(Rp=>{Eo++,st=C(st,Rp),P&&!Q&&(So.fire(st),st=void 0),wi=()=>{let X=st;st=void 0,Q=void 0,(!P||Eo>1)&&So.fire(X),Eo=0},typeof M=="number"?(Q&&clearTimeout(Q),Q=setTimeout(wi,M)):Q===void 0&&(Q=null,queueMicrotask(wi))})},onWillRemoveListener(){$&&Eo>0&&wi?.()},onDidRemoveLastListener(){wi=void 0,Ke.dispose()}};fe||e(Gu);let So=new se(Gu);return fe?.add(So),So.event}It.debounce=h;function m(R,C=0,M){return It.debounce(R,(P,$)=>P?(P.push($),P):[$],C,void 0,!0,void 0,M)}It.accumulate=m;function g(R,C=(P,$)=>P===$,M){let P=!0,$;return a(R,ee=>{let fe=P||!C(ee,$);return P=!1,$=ee,fe},M)}It.latch=g;function x(R,C,M){return[It.filter(R,C,M),It.filter(R,P=>!C(P),M)]}It.split=x;function I(R,C=!1,M=[],P){let $=M.slice(),ee=R(st=>{$?$.push(st):Ke.fire(st)});P&&P.add(ee);let fe=()=>{$?.forEach(st=>Ke.fire(st)),$=null},Ke=new se({onWillAddFirstListener(){ee||(ee=R(st=>Ke.fire(st)),P&&P.add(ee))},onDidAddFirstListener(){$&&(C?setTimeout(fe):fe())},onDidRemoveLastListener(){ee&&ee.dispose(),ee=null}});return P&&P.add(Ke),Ke.event}It.buffer=I;function T(R,C){return(P,$,ee)=>{let fe=C(new y);return R(function(Ke){let st=fe.evaluate(Ke);st!==b&&P.call($,st)},void 0,ee)}}It.chain=T;let b=Symbol("HaltChainable");class y{constructor(){this.steps=[]}map(C){return this.steps.push(C),this}forEach(C){return this.steps.push(M=>(C(M),M)),this}filter(C){return this.steps.push(M=>C(M)?M:b),this}reduce(C,M){let P=M;return this.steps.push($=>(P=C(P,$),P)),this}latch(C=(M,P)=>M===P){let M=!0,P;return this.steps.push($=>{let ee=M||!C($,P);return M=!1,P=$,ee?$:b}),this}evaluate(C){for(let M of this.steps)if(C=M(C),C===b)break;return C}}function S(R,C,M=P=>P){let P=(...Ke)=>fe.fire(M(...Ke)),$=()=>R.on(C,P),ee=()=>R.removeListener(C,P),fe=new se({onWillAddFirstListener:$,onDidRemoveLastListener:ee});return fe.event}It.fromNodeEventEmitter=S;function A(R,C,M=P=>P){let P=(...Ke)=>fe.fire(M(...Ke)),$=()=>R.addEventListener(C,P),ee=()=>R.removeEventListener(C,P),fe=new se({onWillAddFirstListener:$,onDidRemoveLastListener:ee});return fe.event}It.fromDOMEventEmitter=A;function k(R,C){let M,P=new Promise(($,ee)=>{let fe=r(R)($,null,C);M=()=>fe.dispose()});return P.cancel=M,P}It.toPromise=k;function O(R,C){return R(M=>C.fire(M))}It.forward=O;function Y(R,C,M){return C(M),R(P=>C(P))}It.runAndSubscribe=Y;class le{constructor(C,M){this._observable=C;this._counter=0;this._hasChanged=!1;let P={onWillAddFirstListener:()=>{C.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{C.removeObserver(this)}};M||e(P),this.emitter=new se(P),M&&M.add(this.emitter)}beginUpdate(C){this._counter++}handlePossibleChange(C){}handleChange(C,M){this._hasChanged=!0}endUpdate(C){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function Be(R,C){return new le(R,C).emitter.event}It.fromObservable=Be;function tr(R){return(C,M,P)=>{let $=0,ee=!1,fe={beginUpdate(){$++},endUpdate(){$--,$===0&&(R.reportChanges(),ee&&(ee=!1,C.call(M)))},handlePossibleChange(){},handleChange(){ee=!0}};R.addObserver(fe),R.reportChanges();let Ke={dispose(){R.removeObserver(fe)}};return P instanceof de?P.add(Ke):Array.isArray(P)&&P.push(Ke),Ke}}It.fromObservableLight=tr})(Ur||={});Yp=class n{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${n._idPool++}`,n.all.add(this)}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new Et,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},K0=-1,Zp=class n{constructor(e,t,r=(n._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=t;this.name=r;this._warnCountdown=0}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,t){let r=this.threshold;if(r<=0||t<r)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=r*.5;let[o,s]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${s}):`;console.warn(a),console.warn(o);let u=new ef(a,o);this._errorHandler(u)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[r,i]of this._stacks)(!e||t<i)&&(e=[r,i],t=i);return e}},Ia=class n{constructor(e){this.value=e}static create(){let e=new Error;return new n(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},ef=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},tf=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},E_=0,Uo=class{constructor(e){this.value=e;this.id=E_++}},S_=2,R_=(n,e)=>{if(n instanceof Uo)e(n);else for(let t=0;t<n.length;t++){let r=n[t];r&&e(r)}},se=class{constructor(e){this._size=0;this._options=e,this._leakageMon=K0>0||this._options?.leakWarningThreshold?new Zp(e?.onListenerError??at,this._options?.leakWarningThreshold??K0):void 0,this._perfMon=this._options?._profName?new Yp(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(H0){let e=this._listeners;queueMicrotask(()=>{R_(e,t=>t.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,t,r)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let u=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(u);let l=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],p=new tf(`${u}. HINT: Stack shows most frequent listener (${l[1]}-times)`,l[0]);return(this._options?.onListenerError||at)(p),K.None}if(this._disposed)return K.None;t&&(e=e.bind(t));let i=new Uo(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=Ia.create(),o=this._leakageMon.check(i.stack,this._size+1)),H0&&(i.stack=s??Ia.create()),this._listeners?this._listeners instanceof Uo?(this._deliveryQueue??=new nf,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let a=Ct(()=>{o?.(),this._removeListener(i)});return r instanceof de?r.add(a):Array.isArray(r)&&r.push(a),a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,r=t.indexOf(e);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[r]=void 0;let i=this._deliveryQueue.current===this;if(this._size*S_<=t.length){let o=0;for(let s=0;s<t.length;s++)t[s]?t[o++]=t[s]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=o}}_deliver(e,t){if(!e)return;let r=this._options?.onListenerError||at;if(!r){e.value(t);return}try{e.value(t)}catch(i){r(i)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof Uo)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}},nf=class{constructor(){this.i=-1;this.end=0}enqueue(e,t,r){this.i=0,this.end=r,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}});function Di(n){let e=new Br;return n.add({dispose(){e.cancel()}}),e.token}var J0,rr,Bo,Br,Ai=Ae(()=>{"use strict";Wt();pe();J0=Object.freeze(function(n,e){let t=setTimeout(n.bind(e),0);return{dispose(){clearTimeout(t)}}});(r=>{function n(i){return i===r.None||i===r.Cancelled||i instanceof Bo?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}r.isCancellationToken=n,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ur.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:J0})})(rr||={});Bo=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?J0:(this._emitter||(this._emitter=new se),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Br=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Bo),this._token}cancel(){this._token?this._token instanceof Bo&&this._token.cancel():this._token=rr.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Bo&&this._token.dispose():this._token=rr.None}}});var Vr=Ae(()=>{"use strict";});function l1(n){return n}var pl,fl,lf=Ae(()=>{"use strict";Ai();pl=class{constructor(e,t){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=l1):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},fl=class{constructor(e,t){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=l1):(this._fn=t,this._computeKey=e.getCacheKey)}get cachedValues(){return this._map}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let r=this._fn(e);return this._map.set(e,r),this._map2.set(t,r),r}}});var At,Oi=Ae(()=>{"use strict";At=class{constructor(e){this.executor=e;this._state=0}get hasValue(){return this._state===2}get value(){if(this._state===0){this._state=1;try{this._value=this.executor()}catch(e){this._error=e}finally{this._state=2}}else if(this._state===1)throw new Error("Cannot read the value of a lazy that is being initialized");if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}});function Ni(n){return n<0?0:n>4294967295?4294967295:n|0}var ml=Ae(()=>{"use strict";});var xf={};Vt(xf,{AmbiguousCharacters:()=>pf,CodePointIterator:()=>Wo,Ellipsis:()=>vf,GraphemeBreakType:()=>y1,GraphemeIterator:()=>jo,InvisibleCharacters:()=>ff,UNUSUAL_LINE_TERMINATORS:()=>g1,UTF8_BOM_CHARACTER:()=>Uk,charCount:()=>Ik,commonPrefixLength:()=>Fi,commonSuffixLength:()=>Mi,compare:()=>bf,compareIgnoreCase:()=>xk,compareSubstring:()=>p1,compareSubstringIgnoreCase:()=>gl,computeCodePoint:()=>Pa,containsRTL:()=>Ck,containsUnusualLineTerminators:()=>Rk,containsUppercaseCharacter:()=>qk,convertSimple2RegExpPattern:()=>ck,count:()=>sk,createRegExp:()=>dk,equalsIgnoreCase:()=>ur,escape:()=>ok,escapeRegExpCharacters:()=>zo,firstNonWhitespaceIndex:()=>d1,forAnsiStringParts:()=>Nk,format:()=>tk,format2:()=>rk,fuzzyContains:()=>Vk,getCharContainingOffset:()=>kk,getGraphemeBreakType:()=>Gk,getIndentationLength:()=>bk,getLeadingWhitespace:()=>hk,getLeftDeleteOffset:()=>Hk,getNLines:()=>Wk,getNextCodePoint:()=>f1,htmlAttributeEncodeValue:()=>ik,indexOfPattern:()=>mk,isAsciiDigit:()=>yk,isBasicASCII:()=>Sk,isEmojiImprecise:()=>b1,isFalsyOrWhitespace:()=>mf,isFullWidthCharacter:()=>Dk,isHighSurrogate:()=>Aa,isLowSurrogate:()=>Ui,isLowerAsciiLetter:()=>df,isUpperAsciiLetter:()=>Tk,joinStrings:()=>fk,lastNonWhitespaceIndex:()=>gk,lcut:()=>Ak,ltrim:()=>hl,multibyteAwareBtoa:()=>Yk,nextCharLength:()=>m1,noBreakWhitespace:()=>Qk,prevCharLength:()=>h1,regExpLeadsToEndlessLoop:()=>pk,removeAnsiEscapeCodes:()=>La,removeAnsiEscapeCodesFromPrompt:()=>Mk,replaceAsync:()=>vk,rtrim:()=>hf,singleLetterHash:()=>jk,splitLines:()=>Gt,splitLinesIncludeSeparators:()=>gf,startsWithIgnoreCase:()=>bl,startsWithUTF8BOM:()=>x1,stripUTF8BOM:()=>Bk,trim:()=>lk,truncate:()=>ak,truncateMiddle:()=>uk,uppercaseFirstLetter:()=>$k});function mf(n){return!n||typeof n!="string"?!0:n.trim().length===0}function tk(n,...e){return e.length===0?n:n.replace(ek,function(t,r){let i=parseInt(r,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function rk(n,e){return Object.keys(e).length===0?n:n.replace(nk,(t,r)=>e[r]??t)}function ik(n){return n.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function ok(n){return n.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function zo(n){return n.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function sk(n,e){let t=0,r=n.indexOf(e);for(;r!==-1;)t++,r=n.indexOf(e,r+e.length);return t}function ak(n,e,t=vf){return n.length<=e?n:`${n.substr(0,e)}${t}`}function uk(n,e,t=vf){if(n.length<=e)return n;let r=Math.ceil(e/2)-t.length/2,i=Math.floor(e/2)-t.length/2;return`${n.substr(0,r)}${t}${n.substr(n.length-i)}`}function lk(n,e=" "){let t=hl(n,e);return hf(t,e)}function hl(n,e){if(!n||!e)return n;let t=e.length;if(t===0||n.length===0)return n;let r=0;for(;n.indexOf(e,r)===r;)r=r+t;return n.substring(r)}function hf(n,e){if(!n||!e)return n;let t=e.length,r=n.length;if(t===0||r===0)return n;let i=r,o=-1;for(;o=n.lastIndexOf(e,i-1),!(o===-1||o+t!==i);){if(o===0)return"";i=o}return n.substring(0,i)}function ck(n){return n.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function dk(n,e,t={}){if(!n)throw new Error("Cannot create regex from empty string");e||(n=zo(n)),t.wholeWord&&(/\B/.test(n.charAt(0))||(n="\\b"+n),/\B/.test(n.charAt(n.length-1))||(n=n+"\\b"));let r="";return t.global&&(r+="g"),t.matchCase||(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),new RegExp(n,r)}function pk(n){return n.source==="^"||n.source==="^$"||n.source==="$"||n.source==="^\\s*$"?!1:!!(n.exec("")&&n.lastIndex===0)}function fk(n,e){return n.filter(t=>t!=null&&t!==!1).join(e)}function Gt(n){return n.split(/\r\n|\r|\n/)}function gf(n){let e=[],t=n.split(/(\r\n|\r|\n)/);for(let r=0;r<Math.ceil(t.length/2);r++)e.push(t[2*r]+(t[2*r+1]??""));return e}function mk(n,e){let t=e.exec(n);return t?t.index:-1}function d1(n){for(let e=0,t=n.length;e<t;e++){let r=n.charCodeAt(e);if(r!==32&&r!==9)return e}return-1}function hk(n,e=0,t=n.length){for(let r=e;r<t;r++){let i=n.charCodeAt(r);if(i!==32&&i!==9)return n.substring(e,r)}return n.substring(e,t)}function gk(n,e=n.length-1){for(let t=e;t>=0;t--){let r=n.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function bk(n){let e=d1(n);return e===-1?n.length:e}function vk(n,e,t){let r=[],i=0;for(let o of n.matchAll(e)){if(r.push(n.slice(i,o.index)),o.index===void 0)throw new Error("match.index should be defined");i=o.index+o[0].length,r.push(t(o[0],...o.slice(1),o.index,n,o.groups))}return r.push(n.slice(i)),Promise.all(r).then(o=>o.join(""))}function bf(n,e){return n<e?-1:n>e?1:0}function p1(n,e,t=0,r=n.length,i=0,o=e.length){for(;t<r&&i<o;t++,i++){let u=n.charCodeAt(t),l=e.charCodeAt(i);if(u<l)return-1;if(u>l)return 1}let s=r-t,a=o-i;return s<a?-1:s>a?1:0}function xk(n,e){return gl(n,e,0,n.length,0,e.length)}function gl(n,e,t=0,r=n.length,i=0,o=e.length){for(;t<r&&i<o;t++,i++){let u=n.charCodeAt(t),l=e.charCodeAt(i);if(u===l)continue;if(u>=128||l>=128)return p1(n.toLowerCase(),e.toLowerCase(),t,r,i,o);df(u)&&(u-=32),df(l)&&(l-=32);let p=u-l;if(p!==0)return p}let s=r-t,a=o-i;return s<a?-1:s>a?1:0}function yk(n){return n>=48&&n<=57}function df(n){return n>=97&&n<=122}function Tk(n){return n>=65&&n<=90}function ur(n,e){return n.length===e.length&&gl(n,e)===0}function bl(n,e){let t=e.length;return e.length>n.length?!1:gl(n,e,0,t)===0}function Fi(n,e){let t=Math.min(n.length,e.length),r;for(r=0;r<t;r++)if(n.charCodeAt(r)!==e.charCodeAt(r))return r;return t}function Mi(n,e){let t=Math.min(n.length,e.length),r,i=n.length-1,o=e.length-1;for(r=0;r<t;r++)if(n.charCodeAt(i-r)!==e.charCodeAt(o-r))return r;return t}function Aa(n){return 55296<=n&&n<=56319}function Ui(n){return 56320<=n&&n<=57343}function Pa(n,e){return(n-55296<<10)+(e-56320)+65536}function f1(n,e,t){let r=n.charCodeAt(t);if(Aa(r)&&t+1<e){let i=n.charCodeAt(t+1);if(Ui(i))return Pa(r,i)}return r}function _k(n,e){let t=n.charCodeAt(e-1);if(Ui(t)&&e>1){let r=n.charCodeAt(e-2);if(Aa(r))return Pa(r,t)}return t}function m1(n,e){return new jo(n,e).nextGraphemeLength()}function h1(n,e){return new jo(n,e).prevGraphemeLength()}function kk(n,e){e>0&&Ui(n.charCodeAt(e))&&e--;let t=e+m1(n,e);return[t-h1(n,t),t]}function Ik(n){let e=new jo(n),t=0;for(;!e.eol();)t++,e.nextGraphemeLength();return t}function wk(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Ck(n){return cf||(cf=wk()),cf.test(n)}function Sk(n){return Ek.test(n)}function Rk(n){return g1.test(n)}function Dk(n){return n>=11904&&n<=55215||n>=63744&&n<=64255||n>=65281&&n<=65374}function b1(n){return n>=127462&&n<=127487||n===8986||n===8987||n===9200||n===9203||n>=9728&&n<=10175||n===11088||n===11093||n>=127744&&n<=128591||n>=128640&&n<=128764||n>=128992&&n<=129008||n>=129280&&n<=129535||n>=129648&&n<=129782}function Ak(n,e,t=""){let r=n.trimStart();if(r.length<e)return r;let i=/\b/g,o=0;for(;i.test(r)&&!(r.length-i.lastIndex<e);)o=i.lastIndex,i.lastIndex+=1;return o===0?r:t+r.substring(o).trimStart()}function*Nk(n){let e=0;for(let t of n.matchAll(v1))e!==t.index&&(yield{isCode:!1,str:n.substring(e,t.index)}),yield{isCode:!0,str:t[0]},e=t.index+t[0].length;e!==n.length&&(yield{isCode:!1,str:n.substring(e)})}function La(n){return n&&(n=n.replace(v1,"")),n}function Mk(n){return La(n).replace(Fk,"")}function x1(n){return!!(n&&n.length>0&&n.charCodeAt(0)===65279)}function Bk(n){return x1(n)?n.substr(1):n}function Vk(n,e){if(!n||!e||n.length<e.length)return!1;let t=e.length,r=n.toLowerCase(),i=0,o=-1;for(;i<t;){let s=r.indexOf(e[i],o+1);if(s<0)return!1;o=s,i++}return!0}function qk(n,e=!1){return n?(e&&(n=n.replace(/\\./g,"")),n.toLowerCase()!==n):!1}function $k(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Wk(n,e=1){if(e===0)return"";let t=-1;do t=n.indexOf(`
`,t+1),e--;while(e>0&&t>=0);return t===-1?n:(n[t-1]==="\r"&&t--,n.substr(0,t))}function jk(n){let e=26;return n=n%(2*e),n<e?String.fromCharCode(97+n):String.fromCharCode(65+n-e)}function Gk(n){return Da.getInstance().getGraphemeBreakType(n)}function c1(n,e){return n===0?e!==5&&e!==7:n===2&&e===3?!1:n===4||n===2||n===3||e===4||e===2||e===3?!0:!(n===8&&(e===8||e===9||e===11||e===12)||(n===11||n===9)&&(e===9||e===10)||(n===12||n===10)&&e===10||e===5||e===13||e===7||n===1||n===13&&e===14||n===6&&e===6)}function zk(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function Hk(n,e){if(n===0)return 0;let t=Kk(n,e);if(t!==void 0)return t;let r=new Wo(e,n);return r.prevCodePoint(),r.offset}function Kk(n,e){let t=new Wo(e,n),r=t.prevCodePoint();for(;Jk(r)||r===65039||r===8419;){if(t.offset===0)return;r=t.prevCodePoint()}if(!b1(r))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}function Jk(n){return 127995<=n&&n<=127999}function Xk(n){let e=new Uint16Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charCodeAt(i);let t="",r=new Uint8Array(e.buffer);for(let i=0;i<r.length;i++)t+=String.fromCharCode(r[i]);return t}function Yk(n){return btoa(Xk(n))}var ek,nk,Wo,jo,cf,Ek,g1,Pk,Lk,Ok,v1,Fk,Uk,y1,Da,Qk,pf,ff,vf,Je=Ae(()=>{"use strict";lf();Vr();Oi();ml();ek=/{(\d+)}/g;nk=/{([^}]+)}/g;Wo=class{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=_k(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=f1(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},jo=class{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Wo(e,t)}nextGraphemeLength(){let e=Da.getInstance(),t=this._iterator,r=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let o=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(c1(i,s)){t.setOffset(o);break}i=s}return t.offset-r}prevGraphemeLength(){let e=Da.getInstance(),t=this._iterator,r=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let o=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(c1(s,i)){t.setOffset(o);break}i=s}return r-t.offset}eol(){return this._iterator.eol()}};Ek=/^[\t\n\r\x20-\x7E]*$/;g1=/[\u2028\u2029]/;Pk=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,Lk=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,Ok=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,v1=new RegExp("(?:"+[Pk.source,Lk.source,Ok.source].join("|")+")","g");Fk=/\\\[.*?\\\]/g;Uk=String.fromCharCode(65279);y1=(g=>(g[g.Other=0]="Other",g[g.Prepend=1]="Prepend",g[g.CR=2]="CR",g[g.LF=3]="LF",g[g.Control=4]="Control",g[g.Extend=5]="Extend",g[g.Regional_Indicator=6]="Regional_Indicator",g[g.SpacingMark=7]="SpacingMark",g[g.L=8]="L",g[g.V=9]="V",g[g.T=10]="T",g[g.LV=11]="LV",g[g.LVT=12]="LVT",g[g.ZWJ=13]="ZWJ",g[g.Extended_Pictographic=14]="Extended_Pictographic",g))(y1||{}),Da=class n{static{this._INSTANCE=null}static getInstance(){return n._INSTANCE||(n._INSTANCE=new n),n._INSTANCE}constructor(){this._data=zk()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,r=t.length/3,i=1;for(;i<=r;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};Qk="\xA0",pf=class n{constructor(e){this.confusableDictionary=e}static{this.ambiguousCharacterData=new At(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.cache=new pl({getCacheKey:JSON.stringify},e=>{function t(p){let d=new Map;for(let f=0;f<p.length;f+=2)d.set(p[f],p[f+1]);return d}function r(p,d){let f=new Map(p);for(let[h,m]of d)f.set(h,m);return f}function i(p,d){if(!p)return d;let f=new Map;for(let[h,m]of p)d.has(h)&&f.set(h,m);return f}let o=this.ambiguousCharacterData.value,s=e.filter(p=>!p.startsWith("_")&&p in o);s.length===0&&(s=["_default"]);let a;for(let p of s){let d=t(o[p]);a=i(a,d)}let u=t(o._common),l=r(u,a);return new n(l)})}static getInstance(e){return n.cache.get(Array.from(e))}static{this._locales=new At(()=>Object.keys(n.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return n._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},ff=class n{static getRawData(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this._data=void 0}static getData(){return this._data||(this._data=new Set([...Object.values(n.getRawData())].flat())),this._data}static isInvisibleCharacter(e){return n.getData().has(e)}static containsInvisibleCharacter(e){for(let t=0;t<e.length;t++){let r=e.codePointAt(t);if(typeof r=="number"&&(n.isInvisibleCharacter(r)||r===32))return!0}return!1}static get codePoints(){return n.getData()}},vf="\u2026"});var M1=ve((w7,yI)=>{yI.exports={name:"puku-editor",displayName:"Puku Editor",description:"AI-powered code editor with GLM model support via Z.AI",version:"0.43.1",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",completionsCoreVersion:"1.378.1799",internalLargeStorageAriaKey:"ec712b3202c5462fb6877acae7f1f9d7-c19ad55e-3e3c-4f99-984b-827f6d95bd9e-6917",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"prod",publisher:"GitHub",homepage:"https://github.com/features/copilot?editor=vscode",license:"SEE LICENSE IN LICENSE.txt",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-chat"},bugs:{url:"https://github.com/microsoft/vscode/issues"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/copilot.png",pricing:"Trial",engines:{vscode:"^1.107.0",npm:">=9.0.0",node:">=22.14.0"},categories:["AI","Chat","Programming Languages","Machine Learning"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"%puku.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%puku.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%puku.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%puku.badge.twitter%"}],activationEvents:["onStartupFinished","onLanguageModelChat:copilot","onUri","onFileSystem:ccreq","onFileSystem:ccsettings"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["extensionsAny","newSymbolNamesProvider","interactive","codeActionAI","activeComment","commentReveal","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","documentFiltersExclusive","embeddings","findTextInFiles","findTextInFiles2","findFiles2@2","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","mappedEditsProvider","aiRelatedInformation","aiSettingsSearch","chatParticipantAdditions","chatEditing","defaultChatParticipant@4","contribSourceControlInputBoxMenu","authLearnMore","testObserver","aiTextSearchProvider@2","chatParticipantPrivate@11","chatProvider@4","contribDebugCreateConfiguration","chatReferenceDiagnostic","textSearchProvider2","chatReferenceBinaryData","languageModelSystem","languageModelCapabilities","inlineCompletionsAdditions","chatStatusItem","taskProblemMatcherStatus","contribLanguageModelToolSets","textDocumentChangeReason","resolvers","taskExecutionTerminal","dataChannels","languageModelThinkingPart","chatSessionsProvider@3","devDeviceId","contribEditorContentMenu"],contributes:{authenticationProviders:[{id:"puku",label:"Puku"}],languageModelTools:[{name:"puku_searchCodebase",toolReferenceName:"codebase",displayName:"%puku.tools.searchCodebase.name%",icon:"$(folder)",userDescription:"%puku.codebase.tool.description%",modelDescription:"Run a natural language search for relevant code or documentation comments from the user's current workspace. Returns relevant code snippets from the user's current workspace if it is large, or the full contents of the workspace if it is small.",tags:["codesearch","vscode_codesearch"],inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to search the codebase for. Should contain all relevant context. Should ideally be text that might appear in the codebase, such as function names, variable names, or comments."}},required:["query"]}},{name:"puku_searchWorkspaceSymbols",toolReferenceName:"symbols",displayName:"%puku.tools.searchWorkspaceSymbols.name%",icon:"$(symbol)",userDescription:"%puku.workspaceSymbols.tool.description%",modelDescription:"Search the user's workspace for code symbols using language services. Use this tool when the user is looking for a specific symbol in their workspace.",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{symbolName:{type:"string",description:"The symbol to search for, such as a function name, class name, or variable name."}},required:["symbolName"]}},{name:"puku_listCodeUsages",toolReferenceName:"usages",displayName:"%puku.tools.listCodeUsages.name%",icon:"$(references)",canBeReferencedInPrompt:!0,userDescription:"%puku.listCodeUsages.tool.description%",modelDescription:`Request to list all usages (references, definitions, implementations etc) of a function, class, method, variable etc. Use this tool when 
1. Looking for a sample implementation of an interface or class
2. Checking how a function is used throughout the codebase.
3. Including and updating all usages when changing a function, method, or constructor`,tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{symbolName:{type:"string",description:"The name of the symbol, such as a function name, class name, method name, variable name, etc."},filePaths:{type:"array",description:"One or more file paths which likely contain the definition of the symbol. For instance the file which declares a class or function. This is optional but will speed up the invocation of this tool and improve the quality of its output.",items:{type:"string"}}},required:["symbolName"]}},{name:"puku_getVSCodeAPI",toolReferenceName:"vscodeAPI",displayName:"%puku.tools.getVSCodeAPI.name%",icon:"$(references)",userDescription:"%puku.vscode.tool.description%",modelDescription:`Get comprehensive VS Code API documentation and references for extension development. This tool provides authoritative documentation for VS Code's extensive API surface, including proposed APIs, contribution points, and best practices. Use this tool for understanding complex VS Code API interactions.

When to use this tool:
- User asks about specific VS Code APIs, interfaces, or extension capabilities
- Need documentation for VS Code extension contribution points (commands, views, settings, etc.)
- Questions about proposed APIs and their usage patterns
- Understanding VS Code extension lifecycle, activation events, and packaging
- Best practices for VS Code extension development architecture
- API examples and code patterns for extension features
- Troubleshooting extension-specific issues or API limitations

When NOT to use this tool:
- Creating simple standalone files or scripts unrelated to VS Code extensions
- General programming questions not specific to VS Code extension development
- Questions about using VS Code as an editor (user-facing features)
- Non-extension related development tasks
- File creation or editing that doesn't involve VS Code extension APIs

CRITICAL usage guidelines:
1. Always include specific API names, interfaces, or concepts in your query
2. Mention the extension feature you're trying to implement
3. Include context about proposed vs stable APIs when relevant
4. Reference specific contribution points when asking about extension manifest
5. Be specific about the VS Code version or API version when known

Scope: This tool is for EXTENSION DEVELOPMENT ONLY - building tools that extend VS Code itself, not for general file creation or non-extension programming tasks.`,inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to search vscode documentation for. Should contain all relevant context."}},required:["query"]},tags:[],canBeReferencedInPrompt:!0},{name:"puku_findFiles",toolReferenceName:"fileSearch",displayName:"%puku.tools.findFiles.name%",modelDescription:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{query:{type:"string",description:"Search for files with names or paths matching this glob pattern."},maxResults:{type:"number",description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}},required:["query"]}},{name:"puku_findTextInFiles",toolReferenceName:"textSearch",displayName:"%puku.tools.findTextInFiles.name%",modelDescription:"Do a fast text search in the workspace. Use this tool when you want to search with an exact string or regex. If you are not sure what words will appear in the workspace, prefer using regex patterns with alternation (|) or character classes to search for multiple potential words at once instead of making separate searches. For example, use 'function|method|procedure' to look for all of those words at once. Use includePattern to search within files matching a specific pattern, or in a specific file, using a relative path. Use this tool when you want to see an overview of a particular file, instead of using read_file many times to look for code within a file.",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{query:{type:"string",description:"The pattern to search for in files in the workspace. Use regex with alternation (e.g., 'word1|word2|word3') or character classes to find multiple potential words in a single search. Be sure to set the isRegexp property properly to declare whether it's a regex or plain text pattern. Is case-insensitive."},isRegexp:{type:"boolean",description:"Whether the pattern is a regex."},includePattern:{type:"string",description:'Search files matching this glob pattern. Will be applied to the relative path of files within the workspace. To search recursively inside a folder, use a proper glob pattern like "src/folder/**". Do not use | in includePattern.'},maxResults:{type:"number",description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}},required:["query","isRegexp"]}},{name:"puku_applyPatch",displayName:"%puku.tools.applyPatch.name%",toolReferenceName:"applyPatch",userDescription:"%puku.tools.applyPatch.description%",modelDescription:`Edit text files. Do not use this tool to edit Jupyter notebooks. \`apply_patch\` allows you to execute a diff/patch against a text file, but the format of the diff specification is unique to this task, so pay careful attention to these instructions. To use the \`apply_patch\` command, you should pass a message of the following structure as "input":

*** Begin Patch
[YOUR_PATCH]
*** End Patch

Where [YOUR_PATCH] is the actual content of your patch, specified in the following V4A diff format.

*** [ACTION] File: [/absolute/path/to/file] -> ACTION can be one of Add, Update, or Delete.
An example of a message that you might pass as "input" to this function, in order to apply a patch, is shown below.

*** Begin Patch
*** Update File: /Users/someone/pygorithm/searching/binary_search.py
@@class BaseClass
@@    def search():
-        pass
+        raise NotImplementedError()

@@class Subclass
@@    def search():
-        pass
+        raise NotImplementedError()

*** End Patch
Do not use line numbers in this diff format.`,inputSchema:{type:"object",properties:{input:{type:"string",description:"The edit patch to apply."},explanation:{type:"string",description:"A short description of what the tool call is aiming to achieve."}},required:["input","explanation"]}},{name:"puku_readFile",toolReferenceName:"readFile",displayName:"%puku.tools.readFile.name%",modelDescription:`Read the contents of a file.

You must specify the line range you're interested in. Line numbers are 1-indexed. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content. Prefer reading larger ranges over doing many small reads.`,tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{filePath:{description:"The absolute path of the file to read.",type:"string"},startLine:{type:"number",description:"The line number to start reading from, 1-based."},endLine:{type:"number",description:"The inclusive line number to end reading at, 1-based."}},required:["filePath","startLine","endLine"]}},{name:"puku_listDirectory",toolReferenceName:"listDirectory",displayName:"%puku.tools.listDirectory.name%",modelDescription:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{path:{type:"string",description:"The absolute path to the directory to list."}},required:["path"]}},{name:"puku_getErrors",displayName:"%puku.tools.getErrors.name%",toolReferenceName:"problems",canBeReferencedInPrompt:!0,icon:"$(error)",userDescription:"%puku.tools.errors.description%",modelDescription:"Get any compile or lint errors in a specific file or across all files. If the user mentions errors or problems in a file, they may be referring to these. Use the tool to see the same errors that the user is seeing. If the user asks you to analyze all errors, or does not specify a file, use this tool to gather errors for all files. Also use this tool after editing a file to validate the change.",tags:[],inputSchema:{type:"object",properties:{filePaths:{description:"The absolute paths to the files or folders to check for errors. Omit 'filePaths' when retrieving all errors.",type:"array",items:{type:"string"}}}}},{name:"puku_readProjectStructure",displayName:"%puku.tools.readProjectStructure.name%",modelDescription:"Get a file tree representation of the workspace.",tags:[]},{name:"puku_getChangedFiles",displayName:"%puku.tools.getChangedFiles.name%",toolReferenceName:"changes",icon:"$(diff)",canBeReferencedInPrompt:!0,userDescription:"%puku.tools.changes.description%",modelDescription:"Get git diffs of current file changes in a git repository. Don't forget that you can use run_in_terminal to run git commands in a terminal as well.",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{repositoryPath:{type:"string",description:"The absolute path to the git repository to look for changes in. If not provided, the active git repository will be used."},sourceControlState:{type:"array",items:{type:"string",enum:["staged","unstaged","merge-conflicts"]},description:"The kinds of git state to filter by. Allowed values are: 'staged', 'unstaged', and 'merge-conflicts'. If not provided, all states will be included."}}}},{name:"puku_testFailure",toolReferenceName:"testFailure",displayName:"%puku.tools.testFailure.name%",icon:"$(beaker)",userDescription:"%puku.testFailure.tool.description%",modelDescription:"Includes test failure information in the prompt.",inputSchema:{},tags:["vscode_editing_with_tests","enable_other_tool_copilot_readFile","enable_other_tool_copilot_listDirectory","enable_other_tool_copilot_findFiles","enable_other_tool_copilot_runTests"],canBeReferencedInPrompt:!0},{name:"puku_updateUserPreferences",toolReferenceName:"updateUserPreferences",displayName:"%puku.tools.updateUserPreferences.name%",modelDescription:"Update the user's preferences file with new information about the user and their coding preferences, based on the current chat history.",canBeReferencedInPrompt:!0,tags:[],inputSchema:{type:"object",properties:{facts:{type:"array",items:{type:"string"},description:"An array of new user preferences to remember."}},required:["facts"]},when:"config.puku.chat.enableUserPreferences"},{name:"puku_createNewWorkspace",displayName:"%puku.tools.createNewWorkspace.name%",toolReferenceName:"newWorkspace",icon:"$(new-folder)",userDescription:"%puku.tools.createNewWorkspace.userDescription%",when:"config.puku.chat.newWorkspaceCreation.enabled",modelDescription:`Get comprehensive setup steps to help the user create complete project structures in a VS Code workspace. This tool is designed for full project initialization and scaffolding, not for creating individual files.

When to use this tool:
- User wants to create a new complete project from scratch
- Setting up entire project frameworks (TypeScript projects, React apps, Node.js servers, etc.)
- Initializing Model Context Protocol (MCP) servers with full structure
- Creating VS Code extensions with proper scaffolding
- Setting up Next.js, Vite, or other framework-based projects
- User asks for "new project", "create a workspace", "set up a [framework] project"
- Need to establish complete development environment with dependencies, config files, and folder structure

When NOT to use this tool:
- Creating single files or small code snippets
- Adding individual files to existing projects
- Making modifications to existing codebases
- User asks to "create a file" or "add a component"
- Simple code examples or demonstrations
- Debugging or fixing existing code

This tool provides complete project setup including:
- Folder structure creation
- Package.json and dependency management
- Configuration files (tsconfig, eslint, etc.)
- Initial boilerplate code
- Development environment setup
- Build and run instructions

Use other file creation tools for individual files within existing projects.`,inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to use to generate the new workspace. This should be a clear and concise description of the workspace the user wants to create."}},required:["query"]},tags:["enable_other_tool_install_extension","enable_other_tool_get_project_setup_info"]},{name:"puku_getProjectSetupInfo",displayName:"%puku.tools.getProjectSetupInfo.name%",when:"config.puku.chat.newWorkspaceCreation.enabled",toolReferenceName:"getProjectSetupInfo",modelDescription:"Do not call this tool without first calling the tool to create a workspace. This tool provides a project setup information for a Visual Studio Code workspace based on a project type and programming language.",inputSchema:{type:"object",properties:{projectType:{type:"string",description:"The type of project to create. Supported values are: 'python-script', 'python-project', 'mcp-server', 'model-context-protocol-server', 'vscode-extension', 'next-js', 'vite' and 'other'"}},required:["projectType"]},tags:[]},{name:"puku_installExtension",displayName:"Install Extension in VS Code",when:"config.puku.chat.newWorkspaceCreation.enabled",toolReferenceName:"installExtension",modelDescription:"Install an extension in VS Code. Use this tool to install an extension in Visual Studio Code as part of a new workspace creation process only.",inputSchema:{type:"object",properties:{id:{type:"string",description:"The ID of the extension to install. This should be in the format <publisher>.<extension>."},name:{type:"string",description:"The name of the extension to install. This should be a clear and concise description of the extension."}},required:["id","name"]},tags:[]},{name:"puku_runVscodeCommand",displayName:"Run VS Code Command",when:"config.puku.chat.newWorkspaceCreation.enabled",toolReferenceName:"runVscodeCommand",modelDescription:"Run a command in VS Code. Use this tool to run a command in Visual Studio Code as part of a new workspace creation process only.",inputSchema:{type:"object",properties:{commandId:{type:"string",description:"The ID of the command to execute. This should be in the format <command>."},name:{type:"string",description:"The name of the command to execute. This should be a clear and concise description of the command."},args:{type:"array",description:"The arguments to pass to the command. This should be an array of strings.",items:{type:"string"}}},required:["commandId","name"]},tags:[]},{name:"puku_createNewJupyterNotebook",displayName:"Create New Jupyter Notebook",icon:"$(notebook)",toolReferenceName:"newJupyterNotebook",modelDescription:"Generates a new Jupyter Notebook (.ipynb) in VS Code. Jupyter Notebooks are interactive documents commonly used for data exploration, analysis, visualization, and combining code with narrative text. Prefer creating plain Python files or similar unless a user explicitly requests creating a new Jupyter Notebook or already has a Jupyter Notebook opened or exists in the workspace.",userDescription:"%puku.tools.newJupyterNotebook.description%",inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to use to generate the jupyter notebook. This should be a clear and concise description of the notebook the user wants to create."}},required:["query"]},tags:[]},{name:"puku_insertEdit",toolReferenceName:"insertEdit",displayName:"%puku.tools.insertEdit.name%",modelDescription:`Insert new code into an existing file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,tags:[],inputSchema:{type:"object",properties:{explanation:{type:"string",description:"A short explanation of the edit being made."},filePath:{type:"string",description:"An absolute path to the file to edit."},code:{type:"string",description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}},required:["explanation","filePath","code"]}},{name:"puku_createFile",toolReferenceName:"createFile",displayName:"%puku.tools.createFile.name%",userDescription:"%puku.tools.createFile.description%",modelDescription:"This is a tool for creating a new file in the workspace. The file will be created with the specified content. The directory will be created if it does not already exist. Never use this tool to edit a file that already exists.",tags:[],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"The absolute path to the file to create."},content:{type:"string",description:"The content to write to the file."}},required:["filePath","content"]}},{name:"puku_createDirectory",toolReferenceName:"createDirectory",displayName:"%puku.tools.createDirectory.name%",userDescription:"%puku.tools.createDirectory.description%",modelDescription:"Create a new directory structure in the workspace. Will recursively create all directories in the path, like mkdir -p. You do not need to use this tool before using create_file, that tool will automatically create the needed directories.",tags:[],inputSchema:{type:"object",properties:{dirPath:{type:"string",description:"The absolute path to the directory to create."}},required:["dirPath"]}},{name:"puku_openSimpleBrowser",displayName:"%puku.tools.openSimpleBrowser.name%",modelDescription:"Preview a website or open a URL in the editor's Simple Browser. Useful for quickly viewing locally hosted websites, demos, or resources without leaving the coding environment.",userDescription:"%puku.tools.openSimpleBrowser.description%",toolReferenceName:"openSimpleBrowser",canBeReferencedInPrompt:!0,tags:[],inputSchema:{type:"object",properties:{url:{type:"string",description:"The website URL to preview or open in the Simple Browser inside the editor. Must be either an http or https URL"}},required:["url"]}},{name:"puku_replaceString",toolReferenceName:"replaceString",displayName:"%puku.tools.replaceString.name%",modelDescription:"This is a tool for making edits in an existing file in the workspace. For moving or renaming files, use run in terminal tool with the 'mv' command instead. For larger edits, split them into smaller edits and call the edit tool multiple times to ensure accuracy. Before editing, always ensure you have the context to understand the file's contents and context. To edit a file, provide: 1) filePath (absolute path), 2) oldString (MUST be the exact literal text to replace including all whitespace, indentation, newlines, and surrounding code etc), and 3) newString (MUST be the exact literal text to replace \\`oldString\\` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic.). Each use of this tool replaces exactly ONE occurrence of oldString.\n\nCRITICAL for \\`oldString\\`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail. Never use 'Lines 123-456 omitted' from summarized documents or ...existing code... comments in the oldString or newString.",when:"!config.puku.chat.disableReplaceTool",inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the file to edit."},oldString:{type:"string",description:"The exact literal text to replace, preferably unescaped. For single replacements (default), include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. For multiple replacements, specify expected_replacements parameter. If this string is not the exact literal text (i.e. you escaped it) or does not match exactly, the tool will fail."},newString:{type:"string",description:"The exact literal text to replace `old_string` with, preferably unescaped. Provide the EXACT text. Ensure the resulting code is correct and idiomatic."}},required:["filePath","oldString","newString"]}},{name:"puku_multiReplaceString",toolReferenceName:"multiReplaceString",displayName:"%puku.tools.multiReplaceString.name%",modelDescription:"This tool allows you to apply multiple replace_string_in_file operations in a single call, which is more efficient than calling replace_string_in_file multiple times. It takes an array of replacement operations and applies them sequentially. Each replacement operation has the same parameters as replace_string_in_file: filePath, oldString, newString, and explanation. This tool is ideal when you need to make multiple edits across different files or multiple edits in the same file. The tool will provide a summary of successful and failed operations.",when:"!config.puku.chat.disableReplaceTool",inputSchema:{type:"object",properties:{explanation:{type:"string",description:"A brief explanation of what the multi-replace operation will accomplish."},replacements:{type:"array",description:"An array of replacement operations to apply sequentially.",items:{type:"object",properties:{explanation:{type:"string",description:"A brief explanation of this specific replacement operation."},filePath:{type:"string",description:"An absolute path to the file to edit."},oldString:{type:"string",description:"The exact literal text to replace, preferably unescaped. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string is not the exact literal text or does not match exactly, this replacement will fail."},newString:{type:"string",description:"The exact literal text to replace `oldString` with, preferably unescaped. Provide the EXACT text. Ensure the resulting code is correct and idiomatic."}},required:["explanation","filePath","oldString","newString"]},minItems:1}},required:["explanation","replacements"]}},{name:"puku_editNotebook",toolReferenceName:"editNotebook",displayName:"%puku.tools.editNotebook.name%",modelDescription:`This is a tool for editing an existing Notebook file in the workspace. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the notebooks.
When updating the content of an existing cell, ensure newCode preserves whitespace and indentation exactly and does NOT include any code markers such as (...existing code...).`,tags:["enable_other_tool_copilot_getNotebookSummary"],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file to edit, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1."},cellId:{type:"string",description:"Id of the cell that needs to be deleted or edited. Use the value `TOP`, `BOTTOM` when inserting a cell at the top or bottom of the notebook, else provide the id of the cell after which a new cell is to be inserted. Remember, if a cellId is provided and editType=insert, then a cell will be inserted after the cell with the provided cellId."},newCode:{anyOf:[{type:"string",description:"The code for the new or existing cell to be edited. Code should not be wrapped within <VSCode.Cell> tags. Do NOT include code markers such as (...existing code...) to indicate existing code."},{type:"array",items:{type:"string",description:"The code for the new or existing cell to be edited. Code should not be wrapped within <VSCode.Cell> tags"}}]},language:{type:"string",description:"The language of the cell. `markdown`, `python`, `javascript`, `julia`, etc."},editType:{type:"string",enum:["insert","delete","edit"],description:"The operation peformed on the cell, whether `insert`, `delete` or `edit`.\nUse the `editType` field to specify the operation: `insert` to add a new cell, `edit` to modify an existing cell's content, and `delete` to remove a cell."}},required:["filePath","editType","cellId"]}},{name:"puku_runNotebookCell",displayName:"%puku.tools.runNotebookCell.name%",toolReferenceName:"runCell",icon:"$(play)",modelDescription:"This is a tool for running a code cell in a notebook file directly in the notebook editor. The output from the execution will be returned. Code cells should be run as they are added or edited when working through a problem to bring the kernel state up to date and ensure the code executes successfully. Code cells are ready to run and don't require any pre-processing. If asked to run the first cell in a notebook, you should run the first code cell since markdown cells cannot be executed. NOTE: Avoid executing Markdown cells or providing Markdown cell IDs, as Markdown cells cannot be  executed.",userDescription:"%puku.tools.runNotebookCell.description%",tags:["enable_other_tool_copilot_getNotebookSummary"],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file with the cell to run, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1.ipynb"},reason:{type:"string",description:"An optional explanation of why the cell is being run. This will be shown to the user before the tool is run and is not necessary if it's self-explanatory."},cellId:{type:"string",description:"The ID for the code cell to execute. Avoid providing markdown cell IDs as nothing will be executed."},continueOnError:{type:"boolean",description:"Whether or not execution should continue for remaining cells if an error is encountered. Default to false unless instructed otherwise."}},required:["filePath","cellId"]}},{name:"puku_getNotebookSummary",toolReferenceName:"getNotebookSummary",displayName:"Get the structure of a notebook",modelDescription:"This is a tool returns the list of the Notebook cells along with the id, cell types, line ranges, language, execution information and output mime types for each cell. This is useful to get Cell Ids when executing a notebook or determine what cells have been executed and what order, or what cells have outputs. If required to read contents of a cell use this to determine the line range of a cells, and then use read_file tool to read a specific line range. Requery this tool if the contents of the notebook change.",tags:[],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file with the cell to run, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1.ipynb"}},required:["filePath"]}},{name:"puku_readNotebookCellOutput",displayName:"%puku.tools.getNotebookCellOutput.name%",toolReferenceName:"readNotebookCellOutput",icon:"$(notebook-render-output)",modelDescription:"This tool will retrieve the output for a notebook cell from its most recent execution or restored from disk. The cell may have output even when it has not been run in the current kernel session. This tool has a higher token limit for output length than the runNotebookCell tool.",userDescription:"%puku.tools.getNotebookCellOutput.description%",when:"userHasOpenedNotebook",tags:[],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file with the cell to run, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1.ipynb"},cellId:{type:"string",description:"The ID of the cell for which output should be retrieved."}},required:["filePath","cellId"]}},{name:"puku_fetchWebPage",displayName:"%puku.tools.fetchWebPage.name%",toolReferenceName:"fetch",when:"!isWeb",canBeReferencedInPrompt:!0,icon:"$(globe)",userDescription:"%puku.tools.fetchWebPage.description%",modelDescription:"Fetches the main content from a web page. This tool is useful for summarizing or analyzing the content of a webpage. You should use this tool when you think the user is looking for information from a specific webpage.",tags:[],inputSchema:{type:"object",properties:{urls:{type:"array",items:{type:"string"},description:"An array of URLs to fetch content from."},query:{type:"string",description:"The query to search for in the web page's content. This should be a clear and concise description of the content you want to find."}},required:["urls","query"]}},{name:"puku_findTestFiles",displayName:"%puku.tools.findTestFiles.name%",icon:"$(beaker)",canBeReferencedInPrompt:!1,toolReferenceName:"findTestFiles",userDescription:"%puku.tools.findTestFiles.description%",modelDescription:"For a source code file, find the file that contains the tests. For a test file find the file that contains the code under test.",tags:[],inputSchema:{type:"object",properties:{filePaths:{type:"array",items:{type:"string"}}},required:["filePaths"]}},{name:"puku_getDocInfo",displayName:"%puku.tools.getDocInfo.name%",icon:"$(beaker)",canBeReferencedInPrompt:!1,toolReferenceName:"docInfo",userDescription:"%puku.tools.getDocInfo.description%",modelDescription:"Find information about how to document it a symbol like a class or function. This tool is useful for generating documentation comments for code symbols. You should use this tool when you think the user is looking for information about how to document a specific code symbol.",tags:[],inputSchema:{type:"object",properties:{filePaths:{type:"array",items:{type:"string"},description:"The file paths for which documentation information is needed."}},required:["filePaths"]}},{name:"puku_getSearchResults",toolReferenceName:"searchResults",displayName:"%puku.tools.searchResults.name%",icon:"$(search)",userDescription:"%puku.tools.searchResults.description%",modelDescription:"The results from the search view"},{name:"puku_githubRepo",toolReferenceName:"githubRepo",displayName:"%puku.tools.githubRepo.name%",modelDescription:"Searches a GitHub repository for relevant source code snippets. Only use this tool if the user is very clearly asking for code snippets from a specific GitHub repository. Do not use this tool for Github repos that the user has open in their workspace.",userDescription:"%puku.tools.githubRepo.userDescription%",icon:"$(repo)",canBeReferencedInPrompt:!0,inputSchema:{type:"object",properties:{repo:{type:"string",description:"The name of the Github repository to search for code in. Should must be formatted as '<owner>/<repo>'."},query:{type:"string",description:"The query to search for repo. Should contain all relevant context."}},required:["repo","query"]}},{name:"puku_toolReplay",modelDescription:"Replays a tool call from a previous chat session.",displayName:"tool replay",when:"false",inputSchema:{type:"object",properties:{toolCallId:{type:"string",description:"the id of the tool original tool call"},toolName:{type:"string",description:"the name of the tool being replayed"},toolCallArgs:{type:"object",description:"the arguments of the tool call"}}}},{name:"puku_memory",toolReferenceName:"memory",displayName:"%puku.tools.memory.name%",userDescription:"%puku.tools.memory.description%",modelDescription:"Manage persistent memory across conversations. This tool allows you to create, view, update, and delete memory files that persist between chat sessions. Use this to remember important information about the user, their preferences, project context, or anything that should be recalled in future conversations. Available commands: view (list/read memories), create (new memory file), str_replace (edit content), insert (add content), delete (remove memory), rename (change filename).",icon:"$(database)",when:"config.puku.chat.tools.memory.enabled",canBeReferencedInPrompt:!0,tags:[],inputSchema:{type:"object",properties:{command:{type:"string",enum:["view","create","str_replace","insert","delete","rename"],description:`The memory operation to perform:
- view: Show directory contents or file contents (optional line ranges)
- create: Create or overwrite a file
- str_replace: Replace text in a file
- insert: Insert text at a specific line
- delete: Delete a file or directory
- rename: Rename or move a file or directory`},path:{type:"string",description:`Path to the memory file or directory. Must start with /memories.
- For view: /memories or /memories/file.md
- For create/str_replace/insert/delete: /memories/file.md
- Not used for rename (use old_path/new_path instead)`},view_range:{type:"array",items:{type:"number"},minItems:2,maxItems:2,description:"[view only] Optional line range [start, end] to view specific lines. Example: [1, 10]"},file_text:{type:"string",description:"[create only] Content to write to the file. Required for create command."},old_str:{type:"string",description:"[str_replace only] The exact literal text to find and replace. Must be unique in the file. Required for str_replace command."},new_str:{type:"string",description:"[str_replace only] The exact literal text to replace old_str with. Can be empty string. Required for str_replace command."},insert_line:{type:"number",description:"[insert only] Line number at which to insert text (0-indexed, 0 = before first line). Required for insert command."},insert_text:{type:"string",description:"[insert only] Text to insert at the specified line. Required for insert command."},old_path:{type:"string",description:"[rename only] Current path of the file or directory. Must start with /memories. Required for rename command."},new_path:{type:"string",description:"[rename only] New path for the file or directory. Must start with /memories. Required for rename command."}},required:["command"]}},{name:"puku_editFiles",modelDescription:"This is a placeholder tool, do not use",userDescription:"Edit files",icon:"$(pencil)",displayName:"Edit Files",toolReferenceName:"editFiles"}],languageModelToolSets:[{name:"edit",description:"%puku.toolSet.editing.description%",icon:"$(pencil)",tools:["createFile","createDirectory","editNotebook","newJupyterNotebook","editFiles"]},{name:"runNotebooks",description:"%puku.toolSet.runNotebook.description%",icon:"$(notebook)",tools:["runCell","getNotebookSummary","readNotebookCellOutput"]},{name:"search",description:"%puku.toolSet.search.description%",icon:"$(search)",tools:["fileSearch","textSearch","listDirectory","readFile","codebase","searchResults"]},{name:"new",description:"%puku.toolSet.new.description%",icon:"$(new-folder)",tools:["newWorkspace","runVscodeCommand","getProjectSetupInfo","installExtension"]}],chatParticipants:[{id:"puku.default",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%puku.description%",isDefault:!0,locations:["panel"],modes:["ask"],disambiguation:[{category:"generate_code_sample",description:"The user wants to generate code snippets without referencing the contents of the current workspace. This category does not include generating entire projects.",examples:["Write an example of computing a SHA256 hash."]},{category:"add_feature_to_file",description:"The user wants to change code in a file that is provided in their request, without referencing the contents of the current workspace. This category does not include generating entire projects.",examples:["Add a refresh button to the table widget."]},{category:"question_about_specific_files",description:"The user has a question about a specific file or code snippet that they have provided as part of their query, and the question does not require additional workspace context to answer.",examples:["What does this file do?"]}]},{id:"puku.editingSession",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%puku.edits.description%",isDefault:!0,locations:["panel"],modes:["edit"],when:"!config.chat.edits2.enabled"},{id:"puku.editingSessionEditor",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%puku.edits.description%",isDefault:!0,when:"config.inlineChat.enableV2",locations:["editor"]},{id:"puku.editingSession2",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%puku.edits.description%",isDefault:!0,locations:["panel"],modes:["edit"],when:"config.chat.edits2.enabled"},{id:"puku.editsAgent",name:"agent",fullName:"GitHub Copilot",description:"%puku.agent.description%",locations:["panel"],modes:["agent"],isEngine:!0,isDefault:!0,isAgent:!0,when:"config.chat.agent.enabled",commands:[{name:"list"},{name:"error",description:"Make a model request which will result in an error",when:"puku.chat.debug"}]},{id:"puku.editor",name:"Copilot",fullName:"GitHub Copilot",description:"%puku.description%",isDefault:!0,locations:["editor"],when:"!config.inlineChat.enableV2",disambiguation:[{category:"unknown",description:"Intent of this command is unclear or is not related to information technologies",examples:["Add a dog to this comment."]}],commands:[{name:"generate",description:"%puku.workspace.generate.description%",disambiguation:[{category:"generate",description:"Generate new code",examples:["Add a function that returns the sum of two numbers"]}]},{name:"edit",description:"%puku.workspace.edit.inline.description%",disambiguation:[{category:"edit",description:"Make changes to existing code",examples:["Change this method to use async/await"]}]},{name:"doc",description:"%puku.workspace.doc.description%",disambiguation:[{category:"doc",description:"Add documentation comment for this symbol",examples:["Add jsdoc to this method"]}]},{name:"fix",description:"%puku.workspace.fix.description%",disambiguation:[{category:"fix",description:"Propose a fix for the problems in the selected code",examples:["There is a problem in this code. Rewrite the code to show it with the bug fixed."]}]},{name:"explain",description:"%puku.workspace.explain.description%",disambiguation:[{category:"explain",description:"Explain how the code in your active editor works",examples:["Write an explanation for the code above as paragraphs of text."]}]},{name:"review",description:"%puku.workspace.review.description%",when:"puku.advanced.review.intent"},{name:"tests",description:"%puku.workspace.tests.description%",disambiguation:[{category:"tests",description:"Generate unit tests for the selected code. The user does not want to fix their existing tests.",examples:["Write a set of detailed unit test functions for the code above."]}]}]},{id:"puku.notebook",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%puku.description%",isDefault:!0,locations:["notebook"],when:"!config.inlineChat.notebookAgent",commands:[{name:"fix",description:"%puku.workspace.fix.description%"},{name:"explain",description:"%puku.workspace.explain.description%"}]},{id:"puku.notebookEditorAgent",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%puku.description%",isDefault:!0,locations:["notebook"],when:"config.inlineChat.notebookAgent",commands:[{name:"fix",description:"%puku.workspace.fix.description%"},{name:"explain",description:"%puku.workspace.explain.description%"}]},{id:"puku.workspace",name:"workspace",fullName:"Workspace",description:"%puku.workspace.description%",when:"!puku.interactiveSession.disabled",sampleRequest:"%puku.workspace.sampleRequest%",locations:["panel"],disambiguation:[{category:"workspace_project_questions",description:"The user wants to learn about or update the code or files in their current workspace. Questions in this category may be about understanding what the whole workspace does or locating the implementation of some code. This does not include generating or updating tests.",examples:["What does this project do?"]},{category:"find_code_in_workspace",description:"The user wants to locate the implementation of some functionality in their current workspace.",examples:["Where is the tree widget implemented?"]},{category:"generate_with_workspace_context",description:"The user wants to generate code based on multiple files in the workspace and did not specify which files to reference.",examples:["Create a README for this project."]}],commands:[{name:"explain",description:"%puku.workspace.explain.description%"},{name:"review",description:"%puku.workspace.review.description%",when:"puku.advanced.review.intent"},{name:"tests",description:"%puku.workspace.tests.description%",disambiguation:[{category:"create_tests",description:"The user wants to generate unit tests.",examples:["Generate tests for my selection using pytest."]}]},{name:"fix",description:"%puku.workspace.fix.description%",sampleRequest:"%puku.workspace.fix.sampleRequest%"},{name:"new",description:"%puku.workspace.new.description%",sampleRequest:"%puku.workspace.new.sampleRequest%",isSticky:!0,disambiguation:[{category:"create_new_workspace_or_extension",description:"The user wants to create a complete Visual Studio Code workspace from scratch, such as a new application or a Visual Studio Code extension. Use this category only if the question relates to generating or creating new workspaces in Visual Studio Code. Do not use this category for updating existing code or generating sample code snippets",examples:["Scaffold a Node server.","Create a sample project which uses the fileSystemProvider API.","react application"]}]},{name:"newNotebook",description:"%puku.workspace.newNotebook.description%",sampleRequest:"%puku.workspace.newNotebook.sampleRequest%",disambiguation:[{category:"create_jupyter_notebook",description:"The user wants to create a new Jupyter notebook in Visual Studio Code.",examples:["Create a notebook to analyze this CSV file."]}]},{name:"semanticSearch",description:"%puku.workspace.semanticSearch.description%",sampleRequest:"%puku.workspace.semanticSearch.sampleRequest%",when:"config.puku.semanticSearch.enabled"},{name:"setupTests",description:"%puku.vscode.setupTests.description%",sampleRequest:"%puku.vscode.setupTests.sampleRequest%",when:"config.puku.chat.setupTests.enabled",disambiguation:[{category:"set_up_tests",description:"The user wants to configure project test setup, framework, or test runner. The user does not want to fix their existing tests.",examples:["Set up tests for this project."]}]}]},{id:"puku.vscode",name:"vscode",fullName:"VS Code",description:"%puku.vscode.description%",when:"!puku.interactiveSession.disabled",sampleRequest:"%puku.vscode.sampleRequest%",locations:["panel"],disambiguation:[{category:"vscode_configuration_questions",description:"The user wants to learn about, use, or configure the Visual Studio Code. Use this category if the users question is specifically about commands, settings, keybindings, extensions and other features available in Visual Studio Code. Do not use this category to answer questions about generating code or creating new projects including Visual Studio Code extensions.",examples:["Switch to light mode.","Keyboard shortcut to toggle terminal visibility.","Settings to enable minimap.","Whats new in the latest release?"]},{category:"configure_python_environment",description:"The user wants to set up their Python environment.",examples:["Create a virtual environment for my project."]}],commands:[{name:"search",description:"%puku.vscode.search.description%",sampleRequest:"%puku.vscode.search.sampleRequest%"}]},{id:"puku.terminal",name:"terminal",fullName:"Terminal",description:"%puku.terminal.description%",when:"!puku.interactiveSession.disabled",sampleRequest:"%puku.terminal.sampleRequest%",isDefault:!0,locations:["terminal"],commands:[{name:"explain",description:"%puku.terminal.explain.description%",sampleRequest:"%puku.terminal.explain.sampleRequest%"}]},{id:"puku.terminalPanel",name:"terminal",fullName:"Terminal",description:"%puku.terminalPanel.description%",when:"!puku.interactiveSession.disabled",sampleRequest:"%puku.terminal.sampleRequest%",locations:["panel"],commands:[{name:"explain",description:"%puku.terminal.explain.description%",sampleRequest:"%puku.terminal.explain.sampleRequest%",disambiguation:[{category:"terminal_state_questions",description:"The user wants to learn about specific state such as the selection, command, or failed command in the integrated terminal in Visual Studio Code.",examples:["Why did the latest terminal command fail?"]}]}]},{id:"puku.chatReplay",name:"chatReplay",fullName:"Chat Replay",when:"debugType == 'vscode-chat-replay'",locations:["panel"]},{id:"claude-code",name:"claude-code",fullName:"Claude Code",locations:["panel"]}],languageModelChatProviders:[{vendor:"copilot",displayName:"Copilot"},{vendor:"azure",displayName:"Azure",managementCommand:"puku.chat.manageBYOK"},{vendor:"anthropic",displayName:"Anthropic",managementCommand:"puku.chat.manageBYOK"},{vendor:"xai",displayName:"xAI",managementCommand:"puku.chat.manageBYOK"},{vendor:"ollama",displayName:"Ollama"},{vendor:"openai",displayName:"OpenAI",managementCommand:"puku.chat.manageBYOK"},{vendor:"gemini",displayName:"Google",managementCommand:"puku.chat.manageBYOK"},{vendor:"groq",displayName:"Groq",managementCommand:"puku.chat.manageBYOK"},{vendor:"openrouter",displayName:"OpenRouter",managementCommand:"puku.chat.manageBYOK"},{vendor:"customoai",when:"productQualityType != 'stable'",displayName:"OpenAI Compatible",managementCommand:"puku.chat.manageBYOK"}],interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!puku.interactiveSession.disabled"}],viewsWelcome:[{view:"debug",when:"puku-chat.activated",contents:"%puku.viewsWelcome.debug%"},{view:"codex-placeholder",when:"true",contents:"%puku.viewsWelcome.codexPlaceholder%"},{view:"workbench.view.chat.sessions.openai-codex",contents:"%puku.viewsWelcome.codexWelcomeView%"},{view:"copilot-agents-placeholder",when:"true",contents:"%puku.viewsWelcome.agentsPlaceholder%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"puku.auth.missingPermissiveSession",contents:"%puku.viewsWelcome.noPermissiveToken.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"workspaceFolderCount == 0",contents:"%puku.viewsWelcome.noFolder.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"git.state == initialized && gitOpenRepositoryCount == 0 && workspaceFolderCount > 0 && git.parentRepositoryCount == 0",contents:"%puku.viewsWelcome.noRepo.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"git.state == initialized && workspaceFolderCount > 0 && (git.parentRepositoryCount > 0 || gitOpenRepositoryCount > 0) && !github:hasGitHubRemotes",contents:"%puku.viewsWelcome.noGitHub.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"puku.chat.cloudSessionsEmpty",contents:"%puku.viewsWelcome.cloudSessionsEmpty.contents%"},{view:"workbench.view.chat.sessions.copilotcli",when:"puku.chat.cliSessionsEmpty",contents:"%puku.viewsWelcome.cliSessionsEmpty.contents%"}],chatViewsWelcome:[{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.signIn%",when:"!puku-chat.activated && !puku.offline && !puku.interactiveSession.individual.expired && !puku.interactiveSession.enterprise.disabled && !puku.interactiveSession.contactSupport && !puku.interactiveSession.chatDisabled && !puku.interactiveSession.switchToReleaseChannel"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.individual.expired%",when:"puku.interactiveSession.individual.expired"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.enterprise%",when:"puku.interactiveSession.enterprise.disabled"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.offline%",when:"puku.offline"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.contactSupport%",when:"puku.interactiveSession.contactSupport"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.chatDisabled%",when:"puku.interactiveSession.chatDisabled"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%puku.viewsWelcome.switchToReleaseChannel%",when:"puku.interactiveSession.switchToReleaseChannel"}],commands:[{command:"puku.chat.triggerPermissiveSignIn",title:"%puku.command.triggerPermissiveSignIn%"},{command:"puku.claude.sessions.refresh",title:"%puku.command.refreshClaudeCodeSessions%",icon:"$(refresh)",category:"Claude Code"},{command:"puku.cli.sessions.refresh",title:"%puku.command.refreshAgentSessions%",icon:"$(refresh)",category:"Copilot CLI"},{command:"puku.cli.sessions.delete",title:"%puku.command.deleteAgentSession%",icon:"$(close)",category:"Copilot CLI"},{command:"puku.cli.sessions.resumeInTerminal",title:"%puku.command.cli.sessions.resumeInTerminal%",icon:"$(terminal)",category:"Copilot CLI"},{command:"puku.cli.sessions.newTerminalSession",title:"%puku.cli.sessions.newTerminalSession%",icon:"$(terminal)",category:"Copilot CLI"},{command:"puku.chat.replay",title:"Start Chat Replay",icon:"$(debug-line-by-line)",enablement:"resourceFilename === 'benchRun.chatReplay.json' && !inDebugMode"},{command:"puku.chat.replay.enableWorkspaceEditTracing",title:"%puku.command.enableEditTracing%",category:"Developer",enablement:"!puku.chat.replay.workspaceEditTracing"},{command:"puku.chat.replay.disableWorkspaceEditTracing",title:"%puku.command.disableEditTracing%",category:"Developer",enablement:"puku.chat.replay.workspaceEditTracing"},{command:"puku.chat.explain",title:"%puku.command.explainThis%",enablement:"!puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.explain.palette",title:"%puku.command.explainThis%",enablement:"!puku.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"puku.chat.review",title:"%puku.command.reviewAndComment%",enablement:"config.puku.chat.reviewSelection.enabled && !puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.review.apply",title:"%puku.command.applyReviewSuggestion%",icon:"$(sparkle)",enablement:"commentThread =~ /hasSuggestion/",category:"Chat"},{command:"puku.chat.review.applyAndNext",title:"%puku.command.applyReviewSuggestionAndNext%",icon:"$(sparkle)",enablement:"commentThread =~ /hasSuggestion/",category:"Chat"},{command:"puku.chat.review.discard",title:"%puku.command.discardReviewSuggestion%",icon:"$(close)",category:"Chat"},{command:"puku.chat.review.discardAndNext",title:"%puku.command.discardReviewSuggestionAndNext%",icon:"$(close)",category:"Chat"},{command:"puku.chat.review.discardAll",title:"%puku.command.discardAllReviewSuggestion%",icon:"$(close-all)",category:"Chat"},{command:"puku.chat.review.stagedChanges",title:"%puku.command.reviewStagedChanges%",icon:"$(code-review)",enablement:"puku.chat.reviewDiff.enabled && !puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.review.unstagedChanges",title:"%puku.command.reviewUnstagedChanges%",icon:"$(code-review)",enablement:"puku.chat.reviewDiff.enabled && !puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.review.changes",title:"%puku.command.reviewChanges%",icon:"$(code-review)",enablement:"puku.chat.reviewDiff.enabled && !puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.review.stagedFileChange",title:"%puku.command.reviewFileChange%",icon:"$(code-review)",enablement:"puku.chat.reviewDiff.enabled && !puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.review.unstagedFileChange",title:"%puku.command.reviewFileChange%",icon:"$(code-review)",enablement:"puku.chat.reviewDiff.enabled && !puku.interactiveSession.disabled",category:"Chat"},{command:"puku.chat.review.previous",title:"%puku.command.gotoPreviousReviewSuggestion%",icon:"$(arrow-up)",category:"Chat"},{command:"puku.chat.review.next",title:"%puku.command.gotoNextReviewSuggestion%",icon:"$(arrow-down)",category:"Chat"},{command:"puku.chat.review.continueInInlineChat",title:"%puku.command.continueReviewInInlineChat%",icon:"$(comment-discussion)",category:"Chat"},{command:"puku.chat.review.continueInChat",title:"%puku.command.continueReviewInChat%",icon:"$(comment-discussion)",category:"Chat"},{command:"puku.chat.review.markHelpful",title:"%puku.command.helpfulReviewSuggestion%",icon:"$(thumbsup)",enablement:"!(commentThread =~ /markedAsHelpful/)",category:"Chat"},{command:"puku.chat.openUserPreferences",title:"%puku.command.openUserPreferences%",category:"Chat",enablement:"config.puku.chat.enableUserPreferences"},{command:"puku.chat.tools.memory.openFolder",title:"%puku.command.openMemoryFolder%",category:"Chat",enablement:"config.puku.chat.tools.memory.enabled"},{command:"puku.chat.review.markUnhelpful",title:"%puku.command.unhelpfulReviewSuggestion%",icon:"$(thumbsdown)",enablement:"!(commentThread =~ /markedAsUnhelpful/)",category:"Chat"},{command:"puku.chat.generate",title:"%puku.command.generateThis%",icon:"$(sparkle)",enablement:"!puku.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"puku.chat.generateDocs",title:"%puku.command.generateDocs%",enablement:"!puku.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"puku.chat.generateTests",title:"%puku.command.generateTests%",enablement:"!puku.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"puku.chat.fix",title:"%puku.command.fixThis%",enablement:"!puku.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"puku.interactiveSession.feedback",title:"%puku.command.sendChatFeedback%",enablement:"puku-chat.activated && !puku.interactiveSession.disabled",icon:"$(feedback)",category:"Chat"},{command:"puku.debug.workbenchState",title:"%puku.command.logWorkbenchState%",category:"Developer"},{command:"puku.debug.showChatLogView",title:"%puku.command.showChatLogView%",category:"Developer"},{command:"puku.debug.showOutputChannel",title:"%puku.command.showOutputChannel%",category:"Developer"},{command:"puku.debug.showContextInspectorView",title:"%puku.command.showContextInspectorView%",icon:"$(inspect)",category:"Developer"},{command:"puku.debug.resetVirtualToolGroups",title:"%puku.command.resetVirtualToolGroups%",icon:"$(inspect)",category:"Developer"},{command:"puku.terminal.explainTerminalLastCommand",title:"%puku.command.explainTerminalLastCommand%",category:"Chat"},{command:"puku.git.generateCommitMessage",title:"%puku.git.generateCommitMessage%",icon:"$(sparkle)",enablement:"!puku.interactiveSession.disabled",category:"Chat"},{command:"puku.git.resolveMergeConflicts",title:"%puku.git.resolveMergeConflicts%",icon:"$(chat-sparkle)",enablement:"!puku.interactiveSession.disabled",category:"Chat"},{command:"puku.devcontainer.generateDevContainerConfig",title:"%puku.devcontainer.generateDevContainerConfig%",category:"Chat"},{command:"puku.tests.fixTestFailure",icon:"$(sparkle)",title:"%puku.command.fixTestFailure%",category:"Chat"},{command:"puku.tests.fixTestFailure.fromInline",icon:"$(sparkle)",title:"%puku.command.fixTestFailure%"},{command:"puku.chat.attachFile",title:"%puku.chat.attachFile%",category:"Chat"},{command:"puku.chat.attachSelection",title:"%puku.chat.attachSelection%",icon:"$(comment-discussion)",category:"Chat"},{command:"puku.debug.collectDiagnostics",title:"%puku.command.collectDiagnostics%",category:"Developer"},{command:"puku.debug.inlineEdit.clearCache",title:"%puku.command.inlineEdit.clearCache%",category:"Developer"},{command:"puku.debug.inlineEdit.reportNotebookNESIssue",title:"%puku.command.inlineEdit.reportNotebookNESIssue%",enablement:"config.puku.chat.advanced.notebook.alternativeNESFormat.enabled || puku.chat.enableEnhancedNotebookNES",category:"Developer"},{command:"puku.debug.generateSTest",title:"%puku.command.generateSTest%",enablement:"puku.debugReportFeedback",category:"Developer"},{command:"puku.open.walkthrough",title:"%puku.command.openWalkthrough%",category:"Chat"},{command:"puku.debug.generateInlineEditTests",title:"Generate Inline Edit Tests",category:"Chat",enablement:"resourceScheme == 'ccreq'"},{command:"puku.buildLocalWorkspaceIndex",title:"%puku.command.buildLocalWorkspaceIndex%",category:"Chat",enablement:"puku-chat.activated"},{command:"puku.buildRemoteWorkspaceIndex",title:"%puku.command.buildRemoteWorkspaceIndex%",category:"Chat",enablement:"puku-chat.activated"},{command:"puku.report",title:"Report Issue",category:"Chat"},{command:"puku.chat.rerunWithCopilotDebug",title:"%puku.command.rerunWithCopilotDebug%",category:"Chat"},{command:"puku.chat.startCopilotDebugCommand",title:"Start Copilot Debug"},{command:"puku.chat.clearTemporalContext",title:"Clear Temporal Context",category:"Developer"},{command:"puku.search.markHelpful",title:"Helpful",icon:"$(thumbsup)",enablement:"!puku.search.feedback.sent"},{command:"puku.search.markUnhelpful",title:"Unhelpful",icon:"$(thumbsdown)",enablement:"!puku.search.feedback.sent"},{command:"puku.search.feedback",title:"Feedback",icon:"$(feedback)",enablement:"!puku.search.feedback.sent"},{command:"puku.chat.debug.showElements",title:"Show Rendered Elements"},{command:"puku.chat.debug.hideElements",title:"Hide Rendered Elements"},{command:"puku.chat.debug.showTools",title:"Show Tools"},{command:"puku.chat.debug.hideTools",title:"Hide Tools"},{command:"puku.chat.debug.showNesRequests",title:"Show NES Requests"},{command:"puku.chat.debug.hideNesRequests",title:"Hide NES Requests"},{command:"puku.chat.debug.showRawRequestBody",title:"Show Raw Request Body"},{command:"puku.chat.debug.exportLogItem",title:"Export as...",icon:"$(export)"},{command:"puku.chat.debug.exportPromptArchive",title:"Export All as Archive...",icon:"$(archive)"},{command:"puku.chat.debug.exportPromptLogsAsJson",title:"Export All as JSON...",icon:"$(export)"},{command:"puku.chat.debug.exportAllPromptLogsAsJson",title:"Export All Prompt Logs as JSON...",icon:"$(export)"},{command:"puku.chat.showAsChatSession",title:"Show as chat session",icon:"$(chat-sparkle)"},{command:"puku.debug.collectWorkspaceIndexDiagnostics",title:"%puku.command.collectWorkspaceIndexDiagnostics%",category:"Developer"},{command:"puku.chat.mcp.setup.check",title:"MCP Check: is supported"},{command:"puku.chat.mcp.setup.validatePackage",title:"MCP Check: validate package"},{command:"puku.chat.mcp.setup.flow",title:"MCP Check: do prompts"},{command:"puku.chat.generateAltText",title:"Generate/Refine Alt Text"},{command:"puku.chat.notebook.enableFollowCellExecution",title:"Enable Follow Cell Execution from Chat",shortTitle:"Follow",icon:"$(pinned)"},{command:"puku.chat.notebook.disableFollowCellExecution",title:"Disable Follow Cell Execution from Chat",shortTitle:"Unfollow",icon:"$(pinned-dirty)"},{command:"puku.chat.manageBYOK",title:"Manage Bring Your Own Key Vendor",enablement:"false"},{command:"puku.chat.manageBYOKAPIKey",title:"Manage Bring Your Own Key API Key",enablement:"false"},{command:"puku.cloud.sessions.refresh",title:"%puku.command.refreshAgentSessions%",icon:"$(refresh)"},{command:"puku.cloud.sessions.openInBrowser",title:"%puku.command.openCopilotAgentSessionsInBrowser%",icon:"$(link-external)"},{command:"puku.cloud.sessions.proxy.closeChatSessionPullRequest",title:"%puku.command.closeChatSessionPullRequest.title%"},{command:"puku.chat.openSuggestionsPanel",title:"Open Completions Panel",enablement:"puku.extensionUnification.activated && !isWeb",category:"GitHub Copilot"},{command:"puku.chat.toggleStatusMenu",title:"Open Status Menu",enablement:"puku.extensionUnification.activated",category:"GitHub Copilot"},{command:"puku.chat.completions.disable",title:"Disable Inline Suggestions",enablement:"puku.extensionUnification.activated && puku.activated && config.editor.inlineSuggest.enabled && puku.completions.enabled",category:"GitHub Copilot"},{command:"puku.chat.completions.enable",title:"Enable Inline Suggestions",enablement:"puku.extensionUnification.activated && puku.activated && !(config.editor.inlineSuggest.enabled && puku.completions.enabled)",category:"GitHub Copilot"},{command:"puku.chat.completions.toggle",title:"Toggle (Enable/Disable) Inline Suggestions",enablement:"puku.extensionUnification.activated && puku.activated",category:"GitHub Copilot"},{command:"puku.chat.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"puku.extensionUnification.activated && !isWeb"},{command:"puku.chat.applyCopilotCLIAgentSessionChanges",title:"%puku.command.applyCopilotCLIAgentSessionChanges%",icon:"$(git-stash-pop)",category:"GitHub Copilot"}],configuration:[{title:"GitHub Copilot Chat",id:"stable",properties:{"puku.chat.codeGeneration.useInstructionFiles":{type:"boolean",default:!0,markdownDescription:"%puku.config.codeGeneration.useInstructionFiles%"},"puku.editor.enableCodeActions":{type:"boolean",default:!0,description:"%puku.config.enableCodeActions%"},"puku.renameSuggestions.triggerAutomatically":{type:"boolean",default:!0,description:"%puku.config.renameSuggestions.triggerAutomatically%"},"puku.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%puku.config.localeOverride%"},"puku.chat.terminalChatLocation":{type:"string",default:"chatView",markdownDescription:"%puku.config.terminalChatLocation%",markdownEnumDescriptions:["%puku.config.terminalChatLocation.chatView%","%puku.config.terminalChatLocation.quickChat%","%puku.config.terminalChatLocation.terminal%"],enum:["chatView","quickChat","terminal"]},"puku.chat.scopeSelection":{type:"boolean",default:!1,markdownDescription:"%puku.config.scopeSelection%"},"puku.chat.useProjectTemplates":{type:"boolean",default:!0,markdownDescription:"%puku.config.useProjectTemplates%"},"puku.nextEditSuggestions.enabled":{type:"boolean",default:!1,tags:["nextEditSuggestions","onExp"],markdownDescription:"%puku.nextEditSuggestions.enabled%",scope:"language-overridable"},"puku.nextEditSuggestions.fixes":{type:"boolean",default:!0,tags:["nextEditSuggestions","onExp"],markdownDescription:"%puku.nextEditSuggestions.fixes%",scope:"language-overridable"},"puku.nextEditSuggestions.allowWhitespaceOnlyChanges":{type:"boolean",default:!0,tags:["nextEditSuggestions","onExp"],markdownDescription:"%puku.nextEditSuggestions.allowWhitespaceOnlyChanges%",scope:"language-overridable"},"puku.chat.agent.autoFix":{type:"boolean",default:!0,description:"%puku.config.autoFix%",tags:["onExp"]},"puku.chat.customInstructionsInSystemMessage":{type:"boolean",default:!0,description:"%puku.config.customInstructionsInSystemMessage%"},"puku.chat.agent.currentEditorContext.enabled":{type:"boolean",default:!0,description:"%puku.config.agent.currentEditorContext.enabled%"},"puku.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"},"puku.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'}}},{id:"preview",properties:{"puku.chat.reviewAgent.enabled":{type:"boolean",default:!0,description:"%puku.config.reviewAgent.enabled%",tags:["preview"]},"puku.chat.reviewSelection.enabled":{type:"boolean",default:!0,description:"%puku.config.reviewSelection.enabled%",tags:["preview"]},"puku.chat.reviewSelection.instructions":{type:"array",items:{oneOf:[{type:"object",markdownDescription:"%puku.config.reviewSelection.instruction.file%",properties:{file:{type:"string",examples:[".copilot-review-instructions.md"]},language:{type:"string"}},examples:[{file:".copilot-review-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%puku.config.reviewSelection.instruction.text%",properties:{text:{type:"string",examples:["Use underscore for field names."]},language:{type:"string"}},required:["text"],examples:[{text:"Use underscore for field names."},{text:"Resolve all TODO tasks."}]}]},default:[],markdownDescription:"%puku.config.reviewSelection.instructions%",examples:[[{file:".copilot-review-instructions.md"},{text:"Resolve all TODO tasks."}]],tags:["preview"]},"puku.chat.copilotDebugCommand.enabled":{type:"boolean",default:!0,tags:["preview"],description:"%puku.chat.copilotDebugCommand.enabled%"},"puku.chat.codesearch.enabled":{type:"boolean",default:!1,tags:["preview"],markdownDescription:"%puku.config.codesearch.enabled%"},"puku.chat.byok.ollamaEndpoint":{type:"string",default:"http://localhost:11434",tags:["preview"],markdownDescription:"%puku.config.byok.ollamaEndpoint%"}}},{id:"experimental",properties:{"puku.chat.imageUpload.enabled":{type:"boolean",default:!0,tags:["experimental","onExp"],markdownDescription:"%puku.config.imageUpload.enabled%"},"puku.chat.edits.suggestRelatedFilesFromGitHistory":{type:"boolean",default:!0,tags:["experimental"],markdownDescription:"%puku.config.edits.suggestRelatedFilesFromGitHistory%"},"puku.chat.edits.suggestRelatedFilesForTests":{type:"boolean",default:!0,tags:["experimental"],markdownDescription:"%puku.chat.edits.suggestRelatedFilesForTests%"},"puku.chat.codeGeneration.instructions":{markdownDeprecationMessage:"%puku.config.codeGeneration.instructions.deprecated%",type:"array",items:{oneOf:[{type:"object",markdownDescription:"%puku.config.codeGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-codeGeneration-instructions.md"]},language:{type:"string"}},examples:[{file:".copilot-codeGeneration-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%puku.config.codeGeneration.instruction.text%",properties:{text:{type:"string",examples:["Use underscore for field names."]},language:{type:"string"}},required:["text"],examples:[{text:"Use underscore for field names."},{text:"Always add a comment: 'Generated by Copilot'."}]}]},default:[],markdownDescription:"%puku.config.codeGeneration.instructions%",examples:[[{file:".copilot-codeGeneration-instructions.md"},{text:"Always add a comment: 'Generated by Copilot'."}]],tags:["experimental"]},"puku.chat.testGeneration.instructions":{markdownDeprecationMessage:"%puku.config.testGeneration.instructions.deprecated%",type:"array",items:{oneOf:[{type:"object",markdownDescription:"%puku.config.experimental.testGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-test-instructions.md"]},language:{type:"string"}},examples:[{file:".copilot-test-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%puku.config.experimental.testGeneration.instruction.text%",properties:{text:{type:"string",examples:["Use suite and test instead of describe and it."]},language:{type:"string"}},required:["text"],examples:[{text:"Always try uniting related tests in a suite."}]}]},default:[],markdownDescription:"%puku.config.testGeneration.instructions%",examples:[[{file:".copilot-test-instructions.md"},{text:"Always try uniting related tests in a suite."}]],tags:["experimental"]},"puku.chat.commitMessageGeneration.instructions":{type:"array",items:{oneOf:[{type:"object",markdownDescription:"%puku.config.commitMessageGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-commit-message-instructions.md"]}},examples:[{file:".copilot-commit-message-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%puku.config.commitMessageGeneration.instruction.text%",properties:{text:{type:"string",examples:["Use conventional commit message format."]}},required:["text"],examples:[{text:"Use conventional commit message format."}]}]},default:[],markdownDescription:"%puku.config.commitMessageGeneration.instructions%",examples:[[{file:".copilot-commit-message-instructions.md"},{text:"Use conventional commit message format."}]],tags:["experimental"]},"puku.chat.pullRequestDescriptionGeneration.instructions":{type:"array",items:{oneOf:[{type:"object",markdownDescription:"%puku.config.pullRequestDescriptionGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-pull-request-description-instructions.md"]}},examples:[{file:".copilot-pull-request-description-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%puku.config.pullRequestDescriptionGeneration.instruction.text%",properties:{text:{type:"string",examples:["Include every commit message in the pull request description."]}},required:["text"],examples:[{text:"Include every commit message in the pull request description."}]}]},default:[],markdownDescription:"%puku.config.pullRequestDescriptionGeneration.instructions%",examples:[[{file:".copilot-pull-request-description-instructions.md"},{text:"Use conventional commit message format."}]],tags:["experimental"]},"puku.chat.generateTests.codeLens":{type:"boolean",default:!1,description:"%puku.config.generateTests.codeLens%",tags:["experimental"]},"puku.chat.setupTests.enabled":{type:"boolean",default:!0,markdownDescription:"%puku.config.setupTests.enabled%",tags:["experimental"]},"puku.chat.languageContext.typescript.enabled":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%puku.chat.languageContext.typescript.enabled%"},"puku.chat.languageContext.typescript.items":{type:"string",enum:["minimal","double","fillHalf","fill"],default:"minimal",scope:"resource",tags:["experimental","onExP"],markdownDescription:"%puku.chat.languageContext.typescript.items%"},"puku.chat.languageContext.typescript.includeDocumentation":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%puku.chat.languageContext.typescript.includeDocumentation%"},"puku.chat.languageContext.typescript.cacheTimeout":{type:"number",default:500,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%puku.chat.languageContext.typescript.cacheTimeout%"},"puku.chat.languageContext.fix.typescript.enabled":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%puku.chat.languageContext.fix.typescript.enabled%"},"puku.chat.languageContext.inline.typescript.enabled":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%puku.chat.languageContext.inline.typescript.enabled%"},"puku.chat.newWorkspaceCreation.enabled":{type:"boolean",default:!0,tags:["experimental"],description:"%puku.config.newWorkspaceCreation.enabled%"},"puku.chat.newWorkspace.useContext7":{type:"boolean",default:!1,tags:["experimental"],markdownDescription:"%puku.config.newWorkspace.useContext7%"},"puku.chat.notebook.followCellExecution.enabled":{type:"boolean",default:!1,tags:["experimental"],description:"%puku.config.notebook.followCellExecution%"},"puku.chat.notebook.enhancedNextEditSuggestions.enabled":{type:"boolean",default:!1,tags:["experimental","onExp"],description:"%puku.config.notebook.enhancedNextEditSuggestions%"},"puku.chat.summarizeAgentConversationHistory.enabled":{type:"boolean",default:!0,tags:["experimental"],description:"%puku.config.summarizeAgentConversationHistory.enabled%"},"puku.chat.virtualTools.threshold":{type:"number",minimum:0,maximum:128,default:128,tags:["experimental"],markdownDescription:"%puku.config.virtualTools.threshold%"},"puku.chat.azureModels":{type:"object",default:{},tags:["experimental"],additionalProperties:{type:"object",properties:{name:{type:"string",description:"Display name of the Azure model"},url:{type:"string",markdownDescription:"URL endpoint for the Azure model.\n\n**Important:** Base URLs default to Chat Completions API. Explicit API paths including `/responses` or `/chat/completions` are respected. Both behaviors are independent of the `#puku.chat.useResponsesApi#` setting."},toolCalling:{type:"boolean",description:"Whether the model supports tool calling"},vision:{type:"boolean",description:"Whether the model supports vision capabilities"},maxInputTokens:{type:"number",description:"Maximum number of input tokens supported by the model"},maxOutputTokens:{type:"number",description:"Maximum number of output tokens supported by the model"},thinking:{type:"boolean",default:!1,description:"Whether the model supports thinking capabilities"},requestHeaders:{type:"object",description:"Additional HTTP headers to include with requests to this model. These reserved headers are not allowed and ignored if present: forbidden request headers (https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_request_header), forwarding headers ('forwarded', 'x-forwarded-for', 'x-forwarded-host', 'x-forwarded-proto'), and others ('api-key', 'authorization', 'content-type', 'openai-intent', 'x-github-api-version', 'x-initiator', 'x-interaction-id', 'x-interaction-type', 'x-onbehalf-extension-id', 'x-request-id', 'x-vscode-user-agent-library-version'). Pattern-based forbidden headers ('proxy-*', 'sec-*', 'x-http-method*' with forbidden methods) are also blocked.",additionalProperties:{type:"string"}}},required:["name","url","toolCalling","vision","maxInputTokens","maxOutputTokens"],additionalProperties:!1},markdownDescription:"Configure custom Azure OpenAI models. Each key should be a unique model ID, and the value should be an object with model configuration including name, url, toolCalling, vision, maxInputTokens, and maxOutputTokens properties."},"puku.chat.customOAIModels":{type:"object",default:{},tags:["experimental"],additionalProperties:{type:"object",properties:{name:{type:"string",description:"Display name of the custom OpenAI model"},url:{type:"string",markdownDescription:"URL endpoint for the custom OpenAI-compatible model.\n\n**Important:** Base URLs default to Chat Completions API. Explicit API paths including `/responses` or `/chat/completions` are respected. Both behaviors are independent of the `#puku.chat.useResponsesApi#` setting."},toolCalling:{type:"boolean",description:"Whether the model supports tool calling"},vision:{type:"boolean",description:"Whether the model supports vision capabilities"},maxInputTokens:{type:"number",description:"Maximum number of input tokens supported by the model"},maxOutputTokens:{type:"number",description:"Maximum number of output tokens supported by the model"},requiresAPIKey:{type:"boolean",description:"Whether the model requires an API key for authentication",default:!0},editTools:{type:"array",description:`List of edit tools supported by the model. If this is not configured, the editor will try multiple edit tools and pick the best one.

- 'find-replace': Find and replace text in a document.
- 'multi-find-replace': Find and replace text in a document.
- 'apply-patch': A file-oriented diff format used by some OpenAI models
- 'code-rewrite': A general but slower editing tool that allows the model to rewrite and code snippet and provide only the replacement to the editor.`,items:{type:"string",enum:["find-replace","multi-find-replace","apply-patch","code-rewrite"]}},thinking:{type:"boolean",default:!1,description:"Whether the model supports thinking capabilities"},requestHeaders:{type:"object",description:"Additional HTTP headers to include with requests to this model. These reserved headers are not allowed and ignored if present: forbidden request headers (https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_request_header), forwarding headers ('forwarded', 'x-forwarded-for', 'x-forwarded-host', 'x-forwarded-proto'), and others ('api-key', 'authorization', 'content-type', 'openai-intent', 'x-github-api-version', 'x-initiator', 'x-interaction-id', 'x-interaction-type', 'x-onbehalf-extension-id', 'x-request-id', 'x-vscode-user-agent-library-version'). Pattern-based forbidden headers ('proxy-*', 'sec-*', 'x-http-method*' with forbidden methods) are also blocked.",additionalProperties:{type:"string"}}},required:["name","url","toolCalling","vision","maxInputTokens","maxOutputTokens","requiresAPIKey"],additionalProperties:!1},markdownDescription:"Configure custom OpenAI-compatible models. Each key should be a unique model ID, and the value should be an object with model configuration including name, url, toolCalling, vision, maxInputTokens, and maxOutputTokens properties."},"puku.chat.alternateGptPrompt.enabled":{type:"boolean",default:!1,tags:["experimental"],description:"%puku.config.alternateGptPrompt.enabled%"},"puku.chat.useResponsesApi":{type:"boolean",default:!0,markdownDescription:"%puku.config.useResponsesApi%",tags:["experimental","onExp"]},"puku.chat.responsesApiReasoningEffort":{type:"string",default:"default",markdownDescription:"%puku.config.responsesApiReasoningEffort%",tags:["experimental","onExp"],enum:["low","medium","high","default"]},"puku.chat.responsesApiReasoningSummary":{type:"string",default:"detailed",markdownDescription:"%puku.config.responsesApiReasoningSummary%",tags:["experimental","onExp"],enum:["off","detailed"]},"puku.chat.anthropic.thinking.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.anthropic.thinking.enabled%",tags:["experimental","onExp"]},"puku.chat.anthropic.thinking.maxTokens":{type:["number","null"],default:null,markdownDescription:"%puku.config.anthropic.thinking.maxTokens%",minimum:1024,maximum:32e3,tags:["experimental","onExp"]},"puku.chat.anthropic.tools.websearch.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.anthropic.tools.websearch.enabled%",tags:["experimental","onExp"]},"puku.chat.anthropic.tools.websearch.maxUses":{type:"number",default:5,markdownDescription:"%puku.config.anthropic.tools.websearch.maxUses%",minimum:1,maximum:20,tags:["experimental"]},"puku.chat.anthropic.tools.websearch.allowedDomains":{type:"array",default:[],markdownDescription:"%puku.config.anthropic.tools.websearch.allowedDomains%",items:{type:"string"},tags:["experimental"]},"puku.chat.anthropic.tools.websearch.blockedDomains":{type:"array",default:[],markdownDescription:"%puku.config.anthropic.tools.websearch.blockedDomains%",items:{type:"string"},tags:["experimental"]},"puku.chat.anthropic.tools.websearch.userLocation":{type:["object","null"],default:null,markdownDescription:"%puku.config.anthropic.tools.websearch.userLocation%",properties:{city:{type:"string",description:"City name (e.g., 'San Francisco')"},region:{type:"string",description:"State or region (e.g., 'California')"},country:{type:"string",description:"ISO country code (e.g., 'US')"},timezone:{type:"string",description:"IANA timezone identifier (e.g., 'America/Los_Angeles')"}},tags:["experimental"]},"puku.chat.tools.memory.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.tools.memory.enabled%",tags:["experimental","onExp"]},"puku.chat.completionsFetcher":{type:["string","null"],markdownDescription:"%puku.config.completionsFetcher%",tags:["experimental","onExp"],enum:["electron-fetch","node-fetch"]},"puku.chat.nesFetcher":{type:["string","null"],markdownDescription:"%puku.config.nesFetcher%",tags:["experimental","onExp"],enum:["electron-fetch","node-fetch"]}}},{id:"advanced",properties:{"puku.chat.debug.overrideChatEngine":{type:["string","null"],markdownDescription:"%puku.config.debug.overrideChatEngine%",tags:["advanced","experimental"]},"puku.chat.projectLabels.expanded":{type:"boolean",default:!1,markdownDescription:"%puku.config.projectLabels.expanded%",tags:["advanced","experimental","onExp"]},"puku.chat.projectLabels.chat":{type:"boolean",default:!1,markdownDescription:"%puku.config.projectLabels.chat%",tags:["advanced","experimental","onExp"]},"puku.chat.projectLabels.inline":{type:"boolean",default:!1,markdownDescription:"%puku.config.projectLabels.inline%",tags:["advanced","experimental","onExp"]},"puku.chat.workspace.maxLocalIndexSize":{type:"number",default:1e5,markdownDescription:"%puku.config.workspace.maxLocalIndexSize%",tags:["advanced","experimental","onExp"]},"puku.chat.workspace.enableFullWorkspace":{type:"boolean",default:!0,markdownDescription:"%puku.config.workspace.enableFullWorkspace%",tags:["advanced","experimental","onExp"]},"puku.chat.workspace.enableCodeSearch":{type:"boolean",default:!0,markdownDescription:"%puku.config.workspace.enableCodeSearch%",tags:["advanced","experimental","onExp"]},"puku.chat.workspace.enableEmbeddingsSearch":{type:"boolean",default:!0,markdownDescription:"%puku.config.workspace.enableEmbeddingsSearch%",tags:["advanced","experimental","onExp"]},"puku.chat.workspace.preferredEmbeddingsModel":{type:"string",default:"",markdownDescription:"%puku.config.workspace.preferredEmbeddingsModel%",tags:["advanced","experimental","onExp"]},"puku.chat.workspace.prototypeAdoCodeSearchEndpointOverride":{type:"string",default:"",markdownDescription:"%puku.config.workspace.prototypeAdoCodeSearchEndpointOverride%",tags:["advanced","experimental"]},"puku.chat.feedback.onChange":{type:"boolean",default:!1,markdownDescription:"%puku.config.feedback.onChange%",tags:["advanced","experimental"]},"puku.chat.review.intent":{type:"boolean",default:!1,markdownDescription:"%puku.config.review.intent%",tags:["advanced","experimental"]},"puku.chat.notebook.summaryExperimentEnabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.notebook.summaryExperimentEnabled%",tags:["advanced","experimental"]},"puku.chat.notebook.variableFilteringEnabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.notebook.variableFilteringEnabled%",tags:["advanced","experimental"]},"puku.chat.notebook.alternativeFormat":{type:"string",default:"xml",enum:["xml","markdown"],markdownDescription:"%puku.config.notebook.alternativeFormat%",tags:["advanced","experimental","onExp"]},"puku.chat.notebook.alternativeNESFormat.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.notebook.alternativeNESFormat.enabled%",tags:["advanced","experimental","onExp"]},"puku.chat.debugTerminalCommandPatterns":{type:"array",default:[],items:{type:"string"},markdownDescription:"%puku.config.debugTerminalCommandPatterns%",tags:["advanced","experimental"]},"puku.chat.editSourceTracking.showDecorations":{type:"boolean",default:!1,markdownDescription:"%puku.config.editSourceTracking.showDecorations%",tags:["advanced","experimental"]},"puku.chat.editSourceTracking.showStatusBar":{type:"boolean",default:!1,markdownDescription:"%puku.config.editSourceTracking.showStatusBar%",tags:["advanced","experimental"]},"puku.chat.localWorkspaceRecording.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.localWorkspaceRecording.enabled%",tags:["advanced","experimental"]},"puku.chat.editRecording.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.editRecording.enabled%",tags:["advanced","experimental"]},"puku.chat.temporalContext.maxAge":{type:"number",default:100,markdownDescription:"%puku.config.temporalContext.maxAge%",tags:["advanced","experimental","onExp"]},"puku.chat.temporalContext.preferSameLang":{type:"boolean",default:!1,markdownDescription:"%puku.config.temporalContext.preferSameLang%",tags:["advanced","experimental","onExp"]},"puku.chat.codesearch.agent.enabled":{type:"boolean",default:!0,markdownDescription:"%puku.config.codesearch.agent.enabled%",tags:["advanced","experimental"]},"puku.chat.agent.temperature":{type:["number","null"],markdownDescription:"%puku.config.agent.temperature%",tags:["advanced","experimental"]},"puku.chat.instantApply.shortContextModelName":{type:"string",default:"gpt-4o-instant-apply-full-ft-v66-short",markdownDescription:"%puku.config.instantApply.shortContextModelName%",tags:["advanced","experimental","onExp"]},"puku.chat.instantApply.shortContextLimit":{type:"number",default:8e3,markdownDescription:"%puku.config.instantApply.shortContextLimit%",tags:["advanced","experimental","onExp"]},"puku.chat.enableUserPreferences":{type:"boolean",default:!1,markdownDescription:"%puku.config.enableUserPreferences%",tags:["advanced","experimental"]},"puku.chat.summarizeAgentConversationHistoryThreshold":{type:["number","null"],markdownDescription:"%puku.config.summarizeAgentConversationHistoryThreshold%",tags:["advanced","experimental"]},"puku.chat.agentHistorySummarizationMode":{type:["string","null"],markdownDescription:"%puku.config.agentHistorySummarizationMode%",tags:["advanced","experimental"]},"puku.chat.agentHistorySummarizationWithPromptCache":{type:"boolean",default:!1,markdownDescription:"%puku.config.agentHistorySummarizationWithPromptCache%",tags:["advanced","experimental","onExp"]},"puku.chat.agentHistorySummarizationForceGpt41":{type:"boolean",default:!1,markdownDescription:"%puku.config.agentHistorySummarizationForceGpt41%",tags:["advanced","experimental","onExp"]},"puku.chat.useResponsesApiTruncation":{type:"boolean",default:!1,markdownDescription:"%puku.config.useResponsesApiTruncation%",tags:["advanced","experimental"]},"puku.chat.omitBaseAgentInstructions":{type:"boolean",default:!1,markdownDescription:"%puku.config.omitBaseAgentInstructions%",tags:["advanced","experimental"]},"puku.chat.promptFileContextProvider.enabled":{type:"boolean",default:!0,markdownDescription:"%puku.config.promptFileContextProvider.enabled%",tags:["advanced","experimental","onExp"]},"puku.chat.tools.defaultToolsGrouped":{type:"boolean",default:!1,markdownDescription:"%puku.config.tools.defaultToolsGrouped%",tags:["advanced","experimental","onExp"]},"puku.chat.virtualTools.embeddingRanking":{type:"boolean",default:!1,markdownDescription:"%puku.config.virtualTools.embeddingRanking%",tags:["advanced","experimental","onExp"]},"puku.chat.multiReplaceStringGrok.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.multiReplaceStringGrok.enabled%",tags:["advanced","experimental","onExp"]},"puku.chat.claudeCode.enabled":{type:["boolean","string"],default:!1,markdownDescription:"%puku.config.claudeCode.enabled%",tags:["advanced","experimental"]},"puku.chat.claudeCode.debug":{type:"boolean",default:!1,markdownDescription:"%puku.config.claudeCode.debug%",tags:["advanced","experimental"]},"puku.chat.copilotCLI.enabled":{type:"boolean",default:!0,markdownDescription:"%puku.config.copilotCLI.enabled%",tags:["advanced","experimental"]},"puku.chat.gpt5AlternativePatch":{type:"boolean",default:!1,markdownDescription:"%puku.config.gpt5AlternativePatch%",tags:["advanced","experimental","onExp"]},"puku.chat.inlineEdits.triggerOnEditorChangeAfterSeconds":{type:["number","null"],markdownDescription:"%puku.config.inlineEdits.triggerOnEditorChangeAfterSeconds%",tags:["advanced","experimental","onExp"]},"puku.chat.inlineEdits.nextCursorPrediction.displayLine":{type:"boolean",default:!0,markdownDescription:"%puku.config.inlineEdits.nextCursorPrediction.displayLine%",tags:["advanced","experimental","onExp"]},"puku.chat.inlineEdits.nextCursorPrediction.currentFileMaxTokens":{type:"number",default:2e3,markdownDescription:"%puku.config.inlineEdits.nextCursorPrediction.currentFileMaxTokens%",tags:["advanced","experimental","onExp"]},"puku.chat.suggestRelatedFilesFromGitHistory.useEmbeddings":{type:"boolean",default:!1,markdownDescription:"%puku.config.suggestRelatedFilesFromGitHistory.useEmbeddings%",tags:["advanced","experimental"]},"puku.chat.cli.isolation.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.cli.isolation.enabled%",tags:["advanced","experimental"]},"puku.chat.cli.mcp.enabled":{type:"boolean",default:!1,markdownDescription:"%puku.config.cli.mcp.enabled%",tags:["advanced","experimental"]}}}],submenus:[{id:"copilot/reviewComment/additionalActions/applyAndNext",label:"%puku.submenu.reviewComment.applyAndNext.label%"},{id:"copilot/reviewComment/additionalActions/discardAndNext",label:"%puku.submenu.reviewComment.discardAndNext.label%"},{id:"copilot/reviewComment/additionalActions/discard",label:"%puku.submenu.reviewComment.discard.label%"},{id:"puku.chat.debug.filter",label:"Filter",icon:"$(filter)"},{id:"puku.chat.debug.exportAllPromptLogsAsJson",label:"Export All Logs as JSON",icon:"$(file-export)"}],menus:{"editor/title":[{command:"puku.debug.generateInlineEditTests",when:"resourceScheme == 'ccreq'"},{command:"puku.chat.notebook.enableFollowCellExecution",when:"config.puku.chat.notebook.followCellExecution.enabled && !puku.notebookFollowInSessionEnabled && puku.notebookAgentModeUsage && !config.notebook.globalToolbar",group:"navigation@10"},{command:"puku.chat.notebook.disableFollowCellExecution",when:"config.puku.chat.notebook.followCellExecution.enabled && puku.notebookFollowInSessionEnabled && puku.notebookAgentModeUsage && !config.notebook.globalToolbar",group:"navigation@10"},{command:"puku.chat.replay",group:"navigation@9",when:"resourceFilename === 'benchRun.chatReplay.json'"},{command:"puku.chat.showAsChatSession",group:"navigation@9",when:"resourceFilename === 'benchRun.chatReplay.json' || resourceFilename === 'chat-export-logs.json'"},{command:"puku.chat.applyCopilotCLIAgentSessionChanges",group:"navigation@1",when:"resourceScheme == copilotcli-worktree-changes"}],"explorer/context":[{command:"puku.chat.showAsChatSession",when:"resourceFilename === 'benchRun.chatReplay.json' || resourceFilename === 'chat-export-logs.json'",group:"2_copilot@1"}],"editor/context":[{command:"puku.chat.explain",when:"!puku.interactiveSession.disabled",group:"1_chat@4"}],"editor/context/chat":[{command:"puku.chat.fix",when:"!puku.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"puku.chat.review",when:"config.puku.chat.reviewSelection.enabled && !puku.interactiveSession.disabled && resourceScheme != 'vscode-chat-code-block'",group:"copilotAction@2"},{command:"puku.chat.generateDocs",when:"!puku.interactiveSession.disabled && !editorReadonly",group:"copilotGenerate@1"},{command:"puku.chat.generateTests",when:"!puku.interactiveSession.disabled && !editorReadonly",group:"copilotGenerate@2"}],"testing/item/result":[{command:"puku.tests.fixTestFailure.fromInline",when:"testResultState == failed && !testResultOutdated",group:"inline@2"}],"testing/item/context":[{command:"puku.tests.fixTestFailure.fromInline",when:"testResultState == failed && !testResultOutdated",group:"inline@2"}],commandPalette:[{command:"puku.chat.triggerPermissiveSignIn",when:"false"},{command:"puku.interactiveSession.feedback",when:"puku-chat.activated && !puku.interactiveSession.disabled"},{command:"puku.debug.workbenchState",when:"true"},{command:"puku.chat.rerunWithCopilotDebug",when:"false"},{command:"puku.chat.startCopilotDebugCommand",when:"false"},{command:"puku.git.generateCommitMessage",when:"false"},{command:"puku.git.resolveMergeConflicts",when:"false"},{command:"puku.chat.explain",when:"false"},{command:"puku.chat.review",when:"!puku.interactiveSession.disabled"},{command:"puku.chat.review.apply",when:"false"},{command:"puku.chat.review.applyAndNext",when:"false"},{command:"puku.chat.review.discard",when:"false"},{command:"puku.chat.review.discardAndNext",when:"false"},{command:"puku.chat.review.discardAll",when:"false"},{command:"puku.chat.review.stagedChanges",when:"false"},{command:"puku.chat.review.unstagedChanges",when:"false"},{command:"puku.chat.review.changes",when:"false"},{command:"puku.chat.review.stagedFileChange",when:"false"},{command:"puku.chat.review.unstagedFileChange",when:"false"},{command:"puku.chat.review.previous",when:"false"},{command:"puku.chat.review.next",when:"false"},{command:"puku.chat.review.continueInInlineChat",when:"false"},{command:"puku.chat.review.continueInChat",when:"false"},{command:"puku.chat.review.markHelpful",when:"false"},{command:"puku.chat.review.markUnhelpful",when:"false"},{command:"puku.devcontainer.generateDevContainerConfig",when:"false"},{command:"puku.tests.fixTestFailure",when:"false"},{command:"puku.tests.fixTestFailure.fromInline",when:"false"},{command:"puku.search.markHelpful",when:"false"},{command:"puku.search.markUnhelpful",when:"false"},{command:"puku.search.feedback",when:"false"},{command:"puku.chat.debug.showElements",when:"false"},{command:"puku.chat.debug.hideElements",when:"false"},{command:"puku.chat.debug.showTools",when:"false"},{command:"puku.chat.debug.hideTools",when:"false"},{command:"puku.chat.debug.showNesRequests",when:"false"},{command:"puku.chat.debug.hideNesRequests",when:"false"},{command:"puku.chat.debug.exportLogItem",when:"false"},{command:"puku.chat.debug.exportPromptArchive",when:"false"},{command:"puku.chat.debug.exportPromptLogsAsJson",when:"false"},{command:"puku.chat.debug.exportAllPromptLogsAsJson",when:"false"},{command:"puku.chat.mcp.setup.check",when:"false"},{command:"puku.chat.mcp.setup.validatePackage",when:"false"},{command:"puku.chat.mcp.setup.flow",when:"false"},{command:"puku.chat.debug.showRawRequestBody",when:"false"},{command:"puku.debug.showOutputChannel",when:"false"},{command:"puku.cli.sessions.delete",when:"false"},{command:"puku.cli.sessions.refresh",when:"false"},{command:"puku.cli.sessions.resumeInTerminal",when:"false"},{command:"puku.cli.sessions.newTerminalSession",when:"false"},{command:"puku.cloud.sessions.refresh",when:"false"},{command:"puku.cloud.sessions.openInBrowser",when:"false"},{command:"puku.cloud.sessions.proxy.closeChatSessionPullRequest",when:"false"},{command:"puku.chat.applyCopilotCLIAgentSessionChanges",when:"false"},{command:"puku.chat.showAsChatSession",when:"false"}],"view/title":[{command:"puku.claude.sessions.refresh",when:"view == workbench.view.chat.sessions.claude-code",group:"navigation@1"},{command:"puku.cli.sessions.refresh",when:"view == workbench.view.chat.sessions.copilotcli",group:"navigation@1"},{submenu:"puku.chat.debug.filter",when:"view == copilot-chat",group:"navigation"},{command:"puku.chat.debug.exportAllPromptLogsAsJson",when:"view == copilot-chat",group:"export@1"},{command:"puku.debug.showOutputChannel",when:"view == copilot-chat",group:"3_show@1"},{command:"puku.debug.showChatLogView",when:"view == workbench.panel.chat.view.copilot",group:"3_show"},{command:"puku.cloud.sessions.refresh",when:"view == workbench.view.chat.sessions.copilot-cloud-agent",group:"navigation@1"}],"view/item/context":[{command:"puku.chat.debug.showRawRequestBody",when:"view == copilot-chat && viewItem == request",group:"export@0"},{command:"puku.chat.debug.exportLogItem",when:"view == copilot-chat && (viewItem == toolcall || viewItem == request)",group:"export@1"},{command:"puku.chat.debug.exportPromptArchive",when:"view == copilot-chat && viewItem == chatprompt",group:"export@2"},{command:"puku.chat.debug.exportPromptLogsAsJson",when:"view == copilot-chat && viewItem == chatprompt",group:"export@3"}],"searchPanel/aiResults/commands":[{command:"puku.search.markHelpful",group:"inline@0",when:"aiResultsTitle && aiResultsRequested"},{command:"puku.search.markUnhelpful",group:"inline@1",when:"aiResultsTitle && aiResultsRequested"},{command:"puku.search.feedback",group:"inline@2",when:"aiResultsTitle && aiResultsRequested && puku.debugReportFeedback"}],"comments/comment/title":[{command:"puku.chat.review.markHelpful",group:"inline@0",when:"commentController == github-copilot-review"},{command:"puku.chat.review.markUnhelpful",group:"inline@1",when:"commentController == github-copilot-review"}],"commentsView/commentThread/context":[{command:"puku.chat.review.apply",group:"context@1",when:"commentController == github-copilot-review"},{command:"puku.chat.review.discard",group:"context@2",when:"commentController == github-copilot-review"},{command:"puku.chat.review.discardAll",group:"context@3",when:"commentController == github-copilot-review"}],"comments/commentThread/additionalActions":[{submenu:"copilot/reviewComment/additionalActions/applyAndNext",group:"inline@1",when:"commentController == github-copilot-review && puku.chat.review.numberOfComments > 1"},{command:"puku.chat.review.apply",group:"inline@1",when:"commentController == github-copilot-review && puku.chat.review.numberOfComments == 1"},{submenu:"copilot/reviewComment/additionalActions/discardAndNext",group:"inline@2",when:"commentController == github-copilot-review && puku.chat.review.numberOfComments > 1"},{submenu:"copilot/reviewComment/additionalActions/discard",group:"inline@2",when:"commentController == github-copilot-review && puku.chat.review.numberOfComments == 1"}],"copilot/reviewComment/additionalActions/applyAndNext":[{command:"puku.chat.review.applyAndNext",group:"inline@1",when:"commentController == github-copilot-review"},{command:"puku.chat.review.apply",group:"inline@2",when:"commentController == github-copilot-review"}],"copilot/reviewComment/additionalActions/discardAndNext":[{command:"puku.chat.review.discardAndNext",group:"inline@1",when:"commentController == github-copilot-review"},{command:"puku.chat.review.discard",group:"inline@2",when:"commentController == github-copilot-review"},{command:"puku.chat.review.continueInInlineChat",group:"inline@3",when:"commentController == github-copilot-review"}],"copilot/reviewComment/additionalActions/discard":[{command:"puku.chat.review.discard",group:"inline@2",when:"commentController == github-copilot-review"},{command:"puku.chat.review.continueInInlineChat",group:"inline@3",when:"commentController == github-copilot-review"}],"comments/commentThread/title":[{command:"puku.chat.review.previous",group:"inline@1",when:"commentController == github-copilot-review"},{command:"puku.chat.review.next",group:"inline@2",when:"commentController == github-copilot-review"},{command:"puku.chat.review.continueInChat",group:"inline@3",when:"commentController == github-copilot-review"},{command:"puku.chat.review.discardAll",group:"inline@4",when:"commentController == github-copilot-review"}],"scm/title":[{command:"puku.chat.review.changes",group:"navigation",when:"config.puku.chat.reviewAgent.enabled && puku.chat.reviewDiff.enabled && scmProvider == git && scmProviderRootUri in puku.chat.reviewDiff.enabledRootUris"}],"scm/resourceGroup/context":[{command:"puku.chat.review.stagedChanges",when:"config.puku.chat.reviewAgent.enabled && puku.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == index",group:"inline@-3"},{command:"puku.chat.review.unstagedChanges",when:"config.puku.chat.reviewAgent.enabled && puku.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == workingTree",group:"inline@-3"}],"scm/resourceState/context":[{command:"puku.git.resolveMergeConflicts",when:"scmProvider == git && scmResourceGroup == merge && git.activeResourceHasMergeConflicts",group:"z_chat@1"},{command:"puku.chat.review.stagedFileChange",group:"3_copilot",when:"config.puku.chat.reviewAgent.enabled && puku.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == index"},{command:"puku.chat.review.unstagedFileChange",group:"3_copilot",when:"config.puku.chat.reviewAgent.enabled && puku.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == workingTree"}],"scm/inputBox":[{command:"puku.git.generateCommitMessage",when:"scmProvider == git"}],"testing/message/context":[{command:"puku.tests.fixTestFailure",when:"testing.testItemHasUri",group:"inline@1"}],"issue/reporter":[{command:"puku.report"}],"puku.chat.debug.filter":[{command:"puku.chat.debug.showElements",when:"puku.chat.debug.elementsHidden",group:"commands@0"},{command:"puku.chat.debug.hideElements",when:"!puku.chat.debug.elementsHidden",group:"commands@0"},{command:"puku.chat.debug.showTools",when:"puku.chat.debug.toolsHidden",group:"commands@1"},{command:"puku.chat.debug.hideTools",when:"!puku.chat.debug.toolsHidden",group:"commands@1"},{command:"puku.chat.debug.showNesRequests",when:"puku.chat.debug.nesRequestsHidden",group:"commands@2"},{command:"puku.chat.debug.hideNesRequests",when:"!puku.chat.debug.nesRequestsHidden",group:"commands@2"}],"notebook/toolbar":[{command:"puku.chat.notebook.enableFollowCellExecution",when:"config.puku.chat.notebook.followCellExecution.enabled && !puku.notebookFollowInSessionEnabled && puku.notebookAgentModeUsage && config.notebook.globalToolbar",group:"navigation/execute@15"},{command:"puku.chat.notebook.disableFollowCellExecution",when:"config.puku.chat.notebook.followCellExecution.enabled && puku.notebookFollowInSessionEnabled && puku.notebookAgentModeUsage && config.notebook.globalToolbar",group:"navigation/execute@15"}],"editor/content":[{command:"puku.git.resolveMergeConflicts",group:"z_chat@1",when:"config.git.enabled && !git.missing && !isInDiffEditor && !isMergeEditor && resource in git.mergeChanges && git.activeResourceHasMergeConflicts"}],"chat/chatSessions":[{command:"puku.cli.sessions.resumeInTerminal",when:"chatSessionType == copilotcli",group:"inline@1"},{command:"puku.cli.sessions.delete",when:"chatSessionType == copilotcli",group:"inline@2"},{command:"puku.cli.sessions.newTerminalSession",when:"view == workbench.view.chat.sessions.copilotcli",group:"submenu"},{command:"puku.cli.sessions.refresh",when:"view == workbench.view.chat.sessions.copilotcli",group:"navigation@1"},{command:"puku.cloud.sessions.openInBrowser",when:"chatSessionType == copilot-cloud-agent",group:"navigation@10"},{command:"puku.cloud.sessions.proxy.closeChatSessionPullRequest",when:"chatSessionType == copilot-cloud-agent",group:"context"},{command:"puku.cli.sessions.delete",when:"chatSessionType == copilotcli && config.chat.agentSessionsViewLocation == 'single-view'",group:"context"}]},icons:{"copilot-logo":{description:"%puku.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%puku.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%puku.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"},{id:"copilot-chat.generateCommitMessage",commandLineMatcher:"git add .+",commandExitResult:"success",kind:"explain",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0}},{id:"copilot-chat.terminalToDebugging",commandLineMatcher:".+",kind:"explain",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:"",offset:0}},{id:"copilot-chat.terminalToDebuggingSuccess",commandLineMatcher:".+",kind:"explain",commandExitResult:"success",outputMatcher:{anchor:"bottom",length:1,lineMatcher:"",offset:0}}],languages:[{id:"ignore",filenamePatterns:[".pukuignore"],aliases:[]},{id:"markdown",extensions:[".copilotmd"]}],views:{"copilot-chat":[{id:"copilot-chat",name:"Chat Debug",icon:"assets/debug-icon.svg",when:"puku.chat.showLogView"}],"context-inspector":[{id:"context-inspector",name:"Language Context Inspector",icon:"$(inspect)",when:"puku.chat.showContextInspectorView"}],agentSessions:[{id:"codex-placeholder",name:"OpenAI Codex",when:"puku.chat.codex.showPlaceholder",icon:"$(file)"},{id:"copilot-agents-placeholder",name:"GitHub Copilot Agents",when:"chatEntitlementSignedOut || !chatIsEnabled",icon:"$(copilot)"}]},viewsContainers:{activitybar:[{id:"copilot-chat",title:"Chat Debug",icon:"assets/debug-icon.svg"},{id:"context-inspector",title:"Language Context Inspector",icon:"$(inspect)"}]},configurationDefaults:{"workbench.editorAssociations":{"*.copilotmd":"vscode.markdown.preview.editor"}},keybindings:[{command:"puku.chat.rerunWithCopilotDebug",key:"ctrl+alt+.",mac:"cmd+alt+.",when:"puku-chat.activated && terminalShellIntegrationEnabled && terminalFocus && !terminalAltBufferActive"}],walkthroughs:[{id:"copilotWelcome",title:"%puku.walkthrough.title%",description:"%puku.walkthrough.description%",when:"!isWeb",steps:[{id:"copilot.setup.signIn",title:"%puku.walkthrough.setup.signIn.title%",description:"%puku.walkthrough.setup.signIn.description%",when:"chatEntitlementSignedOut && !view.workbench.panel.chat.view.copilot.visible && !puku-chat.activated && !puku.offline && !puku.interactiveSession.individual.disabled && !puku.interactiveSession.individual.expired && !puku.interactiveSession.enterprise.disabled && !puku.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%puku.walkthrough.panelChat.media.altText%"}},{id:"copilot.setup.signInNoAction",title:"%puku.walkthrough.setup.signIn.title%",description:"%puku.walkthrough.setup.noAction.description%",when:"chatEntitlementSignedOut && view.workbench.panel.chat.view.copilot.visible && !puku-chat.activated && !puku.offline && !puku.interactiveSession.individual.disabled && !puku.interactiveSession.individual.expired && !puku.interactiveSession.enterprise.disabled && !puku.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%puku.walkthrough.panelChat.media.altText%"}},{id:"copilot.setup.signUp",title:"%puku.walkthrough.setup.signUp.title%",description:"%puku.walkthrough.setup.signUp.description%",when:"chatPlanCanSignUp && !view.workbench.panel.chat.view.copilot.visible && !puku-chat.activated && !puku.offline && (puku.interactiveSession.individual.disabled || puku.interactiveSession.individual.expired) && !puku.interactiveSession.enterprise.disabled && !puku.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%puku.walkthrough.panelChat.media.altText%"}},{id:"copilot.setup.signUpNoAction",title:"%puku.walkthrough.setup.signUp.title%",description:"%puku.walkthrough.setup.noAction.description%",when:"chatPlanCanSignUp && view.workbench.panel.chat.view.copilot.visible && !puku-chat.activated && !puku.offline && (puku.interactiveSession.individual.disabled || puku.interactiveSession.individual.expired) && !puku.interactiveSession.enterprise.disabled && !puku.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%puku.walkthrough.panelChat.media.altText%"}},{id:"copilot.panelChat",title:"%puku.walkthrough.panelChat.title%",description:"%puku.walkthrough.panelChat.description%",when:"!chatEntitlementSignedOut || chatIsEnabled ",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%puku.walkthrough.panelChat.media.altText%"}},{id:"copilot.edits",title:"%puku.walkthrough.edits.title%",description:"%puku.walkthrough.edits.description%",when:"!chatEntitlementSignedOut || chatIsEnabled ",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits-hclight.mp4"},altText:"%puku.walkthrough.edits.media.altText%"}},{id:"copilot.firstSuggest",title:"%puku.walkthrough.firstSuggest.title%",description:"%puku.walkthrough.firstSuggest.description%",when:"!chatEntitlementSignedOut || chatIsEnabled ",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text-hclight.mp4"},altText:"%puku.walkthrough.firstSuggest.media.altText%"}},{id:"copilot.inlineChatNotMac",title:"%puku.walkthrough.inlineChatNotMac.title%",description:"%puku.walkthrough.inlineChatNotMac.description%",when:"!isMac && (!chatEntitlementSignedOut || chatIsEnabled )",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hclight.mp4"},altText:"%puku.walkthrough.inlineChatNotMac.media.altText%"}},{id:"copilot.inlineChatMac",title:"%puku.walkthrough.inlineChatMac.title%",description:"%puku.walkthrough.inlineChatMac.description%",when:"isMac && (!chatEntitlementSignedOut || chatIsEnabled )",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hclight.mp4"},altText:"%puku.walkthrough.inlineChatMac.media.altText%"}},{id:"copilot.sparkle",title:"%puku.walkthrough.sparkle.title%",description:"%puku.walkthrough.sparkle.description%",when:"!chatEntitlementSignedOut || chatIsEnabled",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit-hclight.mp4"},altText:"%puku.walkthrough.sparkle.media.altText%"}}]}],jsonValidation:[{fileMatch:"settings.json",url:"ccsettings://root/schema.json"}],typescriptServerPlugins:[{name:"@vscode/copilot-typescript-server-plugin",enableForWorkspaceTypeScriptVersions:!0}],chatSessions:[{type:"claude-code",name:"claude",displayName:"Claude Code CLI Agent",icon:"$(sparkle)",welcomeTitle:"Claude Code Agent",welcomeMessage:"Run local background tasks",inputPlaceholder:"Describe your task, type `#` for adding context",order:3,description:"The Claude Code Agent works on your local machine",when:"config.puku.chat.advanced.claudeCode.enabled",capabilities:{supportsFileAttachments:!0},commands:[{name:"init",description:"Initialize a new CLAUDE.md file with codebase documentation"},{name:"compact",description:"Clear conversation history but keep a summary in context. Optional: /compact [instructions for summarization]"},{name:"pr-comments",description:"Get comments from a GitHub pull request"},{name:"review",description:"Review a pull request"},{name:"security-review",description:"Complete a security review of the pending changes on the current branch"}]},{type:"copilotcli",name:"cli",displayName:"GitHub Copilot CLI Agent",icon:"$(copilot)",welcomeTitle:"GitHub Copilot CLI Agent",welcomeMessage:"Run local background tasks",inputPlaceholder:"Describe your task, type `#` for adding context",order:2,description:"The GitHub Copilot CLI Agent works on your local machine",capabilities:{supportsFileAttachments:!0,supportsProblemAttachments:!0,supportsToolAttachments:!1},commands:[{name:"delegate",description:"Delegate chat session to cloud agent and create associated PR"}]},{type:"copilot-cloud-agent",alternativeIds:["copilot-swe-agent"],name:"cloud",displayName:"GitHub Copilot Cloud Agent",icon:{light:"assets/copilot-cloud.svg",dark:"assets/copilot-cloud-dark.svg"},welcomeTitle:"GitHub Copilot Cloud Agent",welcomeMessage:"Delegate tasks to the cloud",inputPlaceholder:"Describe your task, type `#` for adding context",order:1,description:"Delegate tasks to the GitHub Copilot Cloud Agent. The agent works asynchronously in the cloud to implement changes, iterates via chat, and can create or update pull requests as needed.",capabilities:{supportsFileAttachments:!0}}],debuggers:[{type:"vscode-chat-replay",label:"vscode-chat-replay",languages:["json"],when:"resourceFilename === 'benchRun.chatReplay.json'",configurationAttributes:{launch:{properties:{program:{type:"string",description:"Chat replay file to debug (parse for headers)",default:"${file}"},stopOnEntry:{type:"boolean",default:!0,description:"Break immediately to step through manually."}},required:["program"]}}}],chatAgents:[{name:"Plan",path:"./assets/agents/Plan.agent.md",description:"Researches a task to create multi-step plans"}],chatPromptFiles:[{name:"savePrompt",path:"./assets/prompts/savePrompt.prompt.md",description:"Generalize the current discussion into a reusable prompt and save it as a file"}]},extensionPack:["GitHub.copilot"],prettier:{useTabs:!0,tabWidth:4,singleQuote:!0},overrides:{"@aminya/node-gyp-build":"npm:node-gyp-build@4.8.1",string_decoder:"npm:string_decoder@1.2.0","node-gyp":"npm:node-gyp@10.3.1"},isPreRelease:!1}});var ie,fr=Ae(()=>{"use strict";we();ie=class n{constructor(e,t){this.start=e;this.endExclusive=t;if(e>t)throw new G(`Invalid range: ${this.toString()}`)}static fromTo(e,t){return new n(e,t)}static addRange(e,t){let r=0;for(;r<t.length&&t[r].endExclusive<e.start;)r++;let i=r;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(r===i)t.splice(r,0,e);else{let o=Math.min(e.start,t[r].start),s=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(r,i-r,new n(o,s))}}static tryCreate(e,t){if(!(e>t))return new n(e,t)}static ofLength(e){return new n(0,e)}static ofStartAndLength(e,t){return new n(e,e+t)}static emptyAt(e){return new n(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new n(this.start+e,this.endExclusive+e)}deltaStart(e){return new n(this.start+e,this.endExclusive)}deltaEnd(e){return new n(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new n(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);if(t<=r)return new n(t,r)}intersectionLength(e){let t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,r-t)}intersects(e){let t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return t<r}intersectsOrTouches(e){let t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return t<=r}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new G(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new G(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let r=this.start;r<this.endExclusive;r++)t.push(e(r));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new G(`Invalid join: ${this.toString()} and ${e.toString()}`);return new n(this.start,e.endExclusive)}}});var yb={};Vt(yb,{Position:()=>ae});var ae,qn=Ae(()=>{"use strict";ae=class n{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new n(e,t)}delta(e=0,t=0){return this.with(Math.max(1,this.lineNumber+e),Math.max(1,this.column+t))}equals(e){return n.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return n.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return n.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let r=e.lineNumber|0,i=t.lineNumber|0;if(r===i){let o=e.column|0,s=t.column|0;return o-s}return r-i}clone(){return new n(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new n(e.lineNumber,e.column)}static isIPosition(e){return!!e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}});var Tb={};Vt(Tb,{Range:()=>q});var q,Ht=Ae(()=>{"use strict";qn();q=class n{constructor(e,t,r,i){e>r||e===r&&t>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i)}isEmpty(){return n.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return n.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return n.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return n.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return n.plusRange(this,e)}static plusRange(e,t){let r,i,o,s;return t.startLineNumber<e.startLineNumber?(r=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(r=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new n(r,i,o,s)}intersectRanges(e){return n.intersectRanges(this,e)}static intersectRanges(e,t){let r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,u=t.startColumn,l=t.endLineNumber,p=t.endColumn;return r<a?(r=a,i=u):r===a&&(i=Math.max(i,u)),o>l?(o=l,s=p):o===l&&(s=Math.min(s,p)),r>o||r===o&&i>s?null:new n(r,i,o,s)}equalsRange(e){return n.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return n.getEndPosition(this)}static getEndPosition(e){return new ae(e.endLineNumber,e.endColumn)}getStartPosition(){return n.getStartPosition(this)}static getStartPosition(e){return new ae(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new n(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new n(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return n.collapseToStart(this)}static collapseToStart(e){return new n(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return n.collapseToEnd(this)}static collapseToEnd(e){return new n(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new n(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,t=e){return new n(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new n(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return!!e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static areOnlyIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber-1||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn-1||t.endLineNumber<e.startLineNumber-1||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn-1)}static compareRangesUsingStarts(e,t){if(e&&t){let o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){let a=e.startColumn|0,u=t.startColumn|0;if(a===u){let l=e.endLineNumber|0,p=t.endLineNumber|0;if(l===p){let d=e.endColumn|0,f=t.endColumn|0;return d-f}return l-p}return a-u}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}});var lt,Wl,jl=Ae(()=>{"use strict";we();fr();Ht();Nr();wt();lt=class n{static ofLength(e,t){return new n(e,e+t)}static fromRange(e){return new n(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new n(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=Fr(e=>e.startLineNumber,Ao)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new n(e.startLineNumber,t.startLineNumber),new n(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new n(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new n(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new Wl(e[0].slice());for(let r=1;r<e.length;r++)t=t.getUnion(new Wl(e[r].slice()));return t.ranges}static join(e){if(e.length===0)throw new G("lineRanges cannot be empty");let t=e[0].startLineNumber,r=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),r=Math.max(r,e[i].endLineNumberExclusive);return new n(t,r)}static deserialize(e){return new n(e[0],e[1])}constructor(e,t){if(e>t)throw new G(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new n(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new n(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new n(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),r=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=r)return new n(t,r)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new q(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new q(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)t.push(e(r));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new ie(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,t){return new n(this.startLineNumber-e,this.endLineNumberExclusive+t)}},Wl=class n{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=Si(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),r=Or(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===r)this._normalizedRanges.splice(t,0,e);else if(t===r-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let i=this._normalizedRanges[t].join(this._normalizedRanges[r-1]).join(e);this._normalizedRanges.splice(t,r-t,i)}}contains(e){let t=Qu(this._normalizedRanges,r=>r.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=Qu(this._normalizedRanges,r=>r.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let t=[],r=0,i=0,o=null;for(;r<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(r<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[r],u=e._normalizedRanges[i];a.startLineNumber<u.startLineNumber?(s=a,r++):(s=u,i++)}else r<this._normalizedRanges.length?(s=this._normalizedRanges[r],r++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new lt(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(o),o=s)}return o!==null&&t.push(o),new n(t)}subtractFrom(e){let t=Si(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),r=Or(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===r)return new n([e]);let i=[],o=e.startLineNumber;for(let s=t;s<r;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new lt(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new lt(o,e.endLineNumberExclusive)),new n(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],r=0,i=0;for(;r<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[r],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?r++:i++}return new n(t)}getWithDelta(e){return new n(this._normalizedRanges.map(t=>t.delta(e)))}}});var _b={};Vt(_b,{TextLength:()=>nt});var nt,Hi=Ae(()=>{"use strict";jl();qn();Ht();nt=class n{constructor(e,t){this.lineCount=e;this.columnCount=t}static{this.zero=new n(0,0)}static lengthDiffNonNegative(e,t){return t.isLessThan(e)?n.zero:e.lineCount===t.lineCount?new n(0,t.columnCount-e.columnCount):new n(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new n(0,t.column-e.column):new n(t.lineNumber-e.lineNumber,t.column-1)}static fromPosition(e){return new n(e.lineNumber-1,e.column-1)}static ofRange(e){return n.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,r=0;for(let i of e)i===`
`?(t++,r=0):r++;return new n(t,r)}static ofSubstr(e,t){return n.ofText(t.substring(e))}static sum(e,t){return e.reduce((r,i)=>r.add(t(i)),n.zero)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new n(this.lineCount,this.columnCount+e.columnCount):new n(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new q(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new q(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new q(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return lt.ofLength(1,this.lineCount+1)}addToPosition(e){return this.lineCount===0?new ae(e.lineNumber,e.column+this.columnCount):new ae(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return q.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}}});var Bv=ve(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.Permutation=V.CallbackIterable=V.ArrayQueue=V.booleanComparator=V.numberComparator=V.CompareResult=void 0;V.tail=fw;V.equals=mw;V.removeFastWithoutKeepingOrder=hw;V.binarySearch=gw;V.binarySearch2=Lv;V.quickSelect=Em;V.groupBy=bw;V.groupAdjacentBy=vw;V.forEachAdjacent=xw;V.forEachWithNeighbors=yw;V.concatArrays=Tw;V.sortedDiff=Ov;V.delta=_w;V.top=kw;V.topAsync=Iw;V.coalesce=ww;V.coalesceInPlace=Cw;V.move=Ew;V.isFalsyOrEmpty=Sw;V.isNonEmptyArray=Rw;V.distinct=Dw;V.uniqueFilter=Aw;V.commonPrefixLength=Pw;V.range=Lw;V.index=Ow;V.insert=Nw;V.remove=Fv;V.arrayInsert=Fw;V.shuffle=Mw;V.pushToStart=Uw;V.pushToEnd=Bw;V.pushMany=Vw;V.mapArrayOrNot=qw;V.asArray=$w;V.getRandomElement=Ww;V.insertInto=Mv;V.splice=jw;V.compareBy=Gw;V.tieBreakComparators=zw;V.reverseOrder=Jw;V.compareUndefinedSmallest=Qw;V.findAsync=Xw;V.sum=Yw;V.sumBy=Zw;var dw=(Nr(),Ar(L0)),pw=(we(),Ar(Wp));function fw(n){if(n.length===0)throw new Error("Invalid tail call");return[n.slice(0,n.length-1),n[n.length-1]]}function mw(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function hw(n,e){let t=n.length-1;e<t&&(n[e]=n[t]),n.pop()}function gw(n,e,t){return Lv(n.length,r=>t(n[r],e))}function Lv(n,e){let t=0,r=n-1;for(;t<=r;){let i=(t+r)/2|0,o=e(i);if(o<0)t=i+1;else if(o>0)r=i-1;else return i}return-(t+1)}function Em(n,e,t){if(n=n|0,n>=e.length)throw new TypeError("invalid index");let r=e[Math.floor(e.length*Math.random())],i=[],o=[],s=[];for(let a of e){let u=t(a,r);u<0?i.push(a):u>0?o.push(a):s.push(a)}return n<i.length?Em(n,i,t):n<i.length+s.length?s[0]:Em(n-(i.length+s.length),o,t)}function bw(n,e){let t=[],r;for(let i of n.slice(0).sort(e))!r||e(r[0],i)!==0?(r=[i],t.push(r)):r.push(i);return t}function*vw(n,e){let t,r;for(let i of n)r!==void 0&&e(r,i)?t.push(i):(t&&(yield t),t=[i]),r=i;t&&(yield t)}function xw(n,e){for(let t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function yw(n,e){for(let t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function Tw(...n){return[].concat(...n)}function Ov(n,e,t){let r=[];function i(a,u,l){if(u===0&&l.length===0)return;let p=r[r.length-1];p&&p.start+p.deleteCount===a?(p.deleteCount+=u,p.toInsert.push(...l)):r.push({start:a,deleteCount:u,toInsert:l})}let o=0,s=0;for(;;){if(o===n.length){i(o,0,e.slice(s));break}if(s===e.length){i(o,n.length-o,[]);break}let a=n[o],u=e[s],l=t(a,u);l===0?(o+=1,s+=1):l<0?(i(o,1,[]),o+=1):l>0&&(i(o,0,[u]),s+=1)}return r}function _w(n,e,t){let r=Ov(n,e,t),i=[],o=[];for(let s of r)i.push(...n.slice(s.start,s.start+s.deleteCount)),o.push(...s.toInsert);return{removed:i,added:o}}function kw(n,e,t){if(t===0)return[];let r=n.slice(0,t).sort(e);return Nv(n,e,r,t,n.length),r}function Iw(n,e,t,r,i){return t===0?Promise.resolve([]):new Promise((o,s)=>{(async()=>{let a=n.length,u=n.slice(0,t).sort(e);for(let l=t,p=Math.min(t+r,a);l<a;l=p,p=Math.min(p+r,a)){if(l>t&&await new Promise(d=>setTimeout(d)),i&&i.isCancellationRequested)throw new pw.CancellationError;Nv(n,e,u,l,p)}return u})().then(o,s)})}function Nv(n,e,t,r,i){for(let o=t.length;r<i;r++){let s=n[r];if(e(s,t[o-1])<0){t.pop();let a=(0,dw.findFirstIdxMonotonousOrArrLen)(t,u=>e(s,u)<0);t.splice(a,0,s)}}}function ww(n){return n.filter(e=>!!e)}function Cw(n){let e=0;for(let t=0;t<n.length;t++)n[t]&&(n[e]=n[t],e+=1);n.length=e}function Ew(n,e,t){n.splice(t,0,n.splice(e,1)[0])}function Sw(n){return!Array.isArray(n)||n.length===0}function Rw(n){return Array.isArray(n)&&n.length>0}function Dw(n,e=t=>t){let t=new Set;return n.filter(r=>{let i=e(r);return t.has(i)?!1:(t.add(i),!0)})}function Aw(n){let e=new Set;return t=>{let r=n(t);return e.has(r)?!1:(e.add(r),!0)}}function Pw(n,e,t=(r,i)=>r===i){let r=0;for(let i=0,o=Math.min(n.length,e.length);i<o&&t(n[i],e[i]);i++)r++;return r}function Lw(n,e){let t=typeof e=="number"?n:0;typeof e=="number"?t=n:(t=0,e=n);let r=[];if(t<=e)for(let i=t;i<e;i++)r.push(i);else for(let i=t;i>e;i--)r.push(i);return r}function Ow(n,e,t){return n.reduce((r,i)=>(r[e(i)]=t?t(i):i,r),Object.create(null))}function Nw(n,e){return n.push(e),()=>Fv(n,e)}function Fv(n,e){let t=n.indexOf(e);if(t>-1)return n.splice(t,1),e}function Fw(n,e,t){let r=n.slice(0,e),i=n.slice(e);return r.concat(t,i)}function Mw(n,e){let t;if(typeof e=="number"){let r=e;t=()=>{let i=Math.sin(r++)*179426549;return i-Math.floor(i)}}else t=Math.random;for(let r=n.length-1;r>0;r-=1){let i=Math.floor(t()*(r+1)),o=n[r];n[r]=n[i],n[i]=o}}function Uw(n,e){let t=n.indexOf(e);t>-1&&(n.splice(t,1),n.unshift(e))}function Bw(n,e){let t=n.indexOf(e);t>-1&&(n.splice(t,1),n.push(e))}function Vw(n,e){for(let t of e)n.push(t)}function qw(n,e){return Array.isArray(n)?n.map(e):e(n)}function $w(n){return Array.isArray(n)?n:[n]}function Ww(n){return n[Math.floor(Math.random()*n.length)]}function Mv(n,e,t){let r=Uv(n,e),i=n.length,o=t.length;n.length=i+o;for(let s=i-1;s>=r;s--)n[s+o]=n[s];for(let s=0;s<o;s++)n[s+r]=t[s]}function jw(n,e,t,r){let i=Uv(n,e),o=n.splice(i,t);return o===void 0&&(o=[]),Mv(n,i,r),o}function Uv(n,e){return e<0?Math.max(e+n.length,0):Math.min(e,n.length)}var ni;(function(n){function e(o){return o<0}n.isLessThan=e;function t(o){return o<=0}n.isLessThanOrEqual=t;function r(o){return o>0}n.isGreaterThan=r;function i(o){return o===0}n.isNeitherLessOrGreaterThan=i,n.greaterThan=1,n.lessThan=-1,n.neitherLessOrGreaterThan=0})(ni||(V.CompareResult=ni={}));function Gw(n,e){return(t,r)=>e(n(t),n(r))}function zw(...n){return(e,t)=>{for(let r of n){let i=r(e,t);if(!ni.isNeitherLessOrGreaterThan(i))return i}return ni.neitherLessOrGreaterThan}}var Hw=(n,e)=>n-e;V.numberComparator=Hw;var Kw=(n,e)=>(0,V.numberComparator)(n?1:0,e?1:0);V.booleanComparator=Kw;function Jw(n){return(e,t)=>-n(e,t)}function Qw(n){return(e,t)=>e===void 0?t===void 0?ni.neitherLessOrGreaterThan:ni.lessThan:t===void 0?ni.greaterThan:n(e,t)}var Sm=class{constructor(e){this.firstIdx=0,this.items=e,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let r=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,r}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let r=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,r}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}};V.ArrayQueue=Sm;var Rm=class n{static{this.empty=new n(e=>{})}constructor(e){this.iterate=e}forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new n(t=>this.iterate(r=>e(r)?t(r):!0))}map(e){return new n(t=>this.iterate(r=>t(e(r))))}some(e){let t=!1;return this.iterate(r=>(t=e(r),!t)),t}findFirst(e){let t;return this.iterate(r=>e(r)?(t=r,!1):!0),t}findLast(e){let t;return this.iterate(r=>(e(r)&&(t=r),!0)),t}findLastMaxBy(e){let t,r=!0;return this.iterate(i=>((r||ni.isGreaterThan(e(i,t)))&&(r=!1,t=i),!0)),t}};V.CallbackIterable=Rm;var Dm=class n{constructor(e){this._indexMap=e}static createSortPermutation(e,t){let r=Array.from(e.keys()).sort((i,o)=>t(e[i],e[o]));return new n(r)}apply(e){return e.map((t,r)=>e[this._indexMap[r]])}inverse(){let e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new n(e)}};V.Permutation=Dm;async function Xw(n,e){return(await Promise.all(n.map(async(r,i)=>({element:r,ok:await e(r,i)})))).find(r=>r.ok)?.element}function Yw(n){return n.reduce((e,t)=>e+t,0)}function Zw(n,e){return n.reduce((t,r)=>t+e(r),0)}});var $v=ve(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.lengthZero=void 0;Ie.lengthDiff=nC;Ie.lengthIsZero=rC;Ie.toLength=eo;Ie.lengthToObj=iC;Ie.lengthGetLineCount=oC;Ie.lengthGetColumnCountIfZeroLineCount=sC;Ie.lengthAdd=qv;Ie.sumLengths=aC;Ie.lengthEquals=uC;Ie.lengthDiffNonNegative=lC;Ie.lengthLessThan=cC;Ie.lengthLessThanEqual=dC;Ie.lengthGreaterThanEqual=pC;Ie.lengthToPosition=fC;Ie.positionToLength=mC;Ie.lengthsToRange=hC;Ie.lengthOfRange=gC;Ie.lengthCompare=bC;Ie.lengthOfString=vC;Ie.lengthOfStringObj=xC;Ie.lengthHash=yC;Ie.lengthMax=TC;var Vv=(Je(),Ar(xf)),eC=(qn(),Ar(yb)),tC=(Ht(),Ar(Tb)),Oc=(Hi(),Ar(_b));function nC(n,e,t,r){return n!==t?eo(t-n,r):eo(0,r-e)}Ie.lengthZero=0;function rC(n){return n===0}var bt=2**26;function eo(n,e){return n*bt+e}function iC(n){let e=n,t=Math.floor(e/bt),r=e-t*bt;return new Oc.TextLength(t,r)}function oC(n){return Math.floor(n/bt)}function sC(n){return n}function qv(n,e){let t=n+e;return e>=bt&&(t=t-n%bt),t}function aC(n,e){return n.reduce((t,r)=>qv(t,e(r)),Ie.lengthZero)}function uC(n,e){return n===e}function lC(n,e){let t=n,r=e;if(r-t<=0)return Ie.lengthZero;let o=Math.floor(t/bt),s=Math.floor(r/bt),a=r-s*bt;if(o===s){let u=t-o*bt;return eo(0,a-u)}else return eo(s-o,a)}function cC(n,e){return n<e}function dC(n,e){return n<=e}function pC(n,e){return n>=e}function fC(n){let e=n,t=Math.floor(e/bt),r=e-t*bt;return new eC.Position(t+1,r+1)}function mC(n){return eo(n.lineNumber-1,n.column-1)}function hC(n,e){let t=n,r=Math.floor(t/bt),i=t-r*bt,o=e,s=Math.floor(o/bt),a=o-s*bt;return new tC.Range(r+1,i+1,s+1,a+1)}function gC(n){return n.startLineNumber===n.endLineNumber?new Oc.TextLength(0,n.endColumn-n.startColumn):new Oc.TextLength(n.endLineNumber-n.startLineNumber,n.endColumn-1)}function bC(n,e){return n-e}function vC(n){let e=(0,Vv.splitLines)(n);return eo(e.length-1,e[e.length-1].length)}function xC(n){let e=(0,Vv.splitLines)(n);return new Oc.TextLength(e.length-1,e[e.length-1].length)}function yC(n){return n}function TC(n,e){return n>e?n:e}});var jv={};Vt(jv,{lengthAdd:()=>Wv,lengthCompare:()=>NC,lengthDiff:()=>_C,lengthDiffNonNegative:()=>SC,lengthEquals:()=>EC,lengthGetColumnCountIfZeroLineCount:()=>wC,lengthGetLineCount:()=>IC,lengthGreaterThanEqual:()=>AC,lengthHash:()=>UC,lengthIsZero:()=>kC,lengthLessThan:()=>RC,lengthLessThanEqual:()=>DC,lengthMax:()=>BC,lengthOfRange:()=>OC,lengthOfString:()=>FC,lengthOfStringObj:()=>MC,lengthToObj:()=>to,lengthToPosition:()=>PC,lengthZero:()=>Am,lengthsToRange:()=>Pm,positionToLength:()=>LC,sumLengths:()=>CC,toLength:()=>In});function _C(n,e,t,r){return n!==t?In(t-n,r):In(0,r-e)}function kC(n){return n===0}function In(n,e){return n*vt+e}function to(n){let e=n,t=Math.floor(e/vt),r=e-t*vt;return new nt(t,r)}function IC(n){return Math.floor(n/vt)}function wC(n){return n}function Wv(n,e){let t=n+e;return e>=vt&&(t=t-n%vt),t}function CC(n,e){return n.reduce((t,r)=>Wv(t,e(r)),Am)}function EC(n,e){return n===e}function SC(n,e){let t=n,r=e;if(r-t<=0)return Am;let o=Math.floor(t/vt),s=Math.floor(r/vt),a=r-s*vt;if(o===s){let u=t-o*vt;return In(0,a-u)}else return In(s-o,a)}function RC(n,e){return n<e}function DC(n,e){return n<=e}function AC(n,e){return n>=e}function PC(n){let e=n,t=Math.floor(e/vt),r=e-t*vt;return new ae(t+1,r+1)}function LC(n){return In(n.lineNumber-1,n.column-1)}function Pm(n,e){let t=n,r=Math.floor(t/vt),i=t-r*vt,o=e,s=Math.floor(o/vt),a=o-s*vt;return new q(r+1,i+1,s+1,a+1)}function OC(n){return n.startLineNumber===n.endLineNumber?new nt(0,n.endColumn-n.startColumn):new nt(n.endLineNumber-n.startLineNumber,n.endColumn-1)}function NC(n,e){return n-e}function FC(n){let e=Gt(n);return In(e.length-1,e[e.length-1].length)}function MC(n){let e=Gt(n);return new nt(e.length-1,e[e.length-1].length)}function UC(n){return n}function BC(n,e){return n>e?n:e}var Am,vt,Nc=Ae(()=>{"use strict";Je();qn();Ht();Hi();Am=0;vt=2**26});var Gv=ve(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.TextEditInfo=void 0;var Lm=(Nc(),Ar(jv)),Om=class{constructor(e,t,r){this.startOffset=e,this.endOffset=t,this.newLength=r}toString(){return`[${(0,Lm.lengthToObj)(this.startOffset)}...${(0,Lm.lengthToObj)(this.endOffset)}) -> ${(0,Lm.lengthToObj)(this.newLength)}`}};Fc.TextEditInfo=Om});var nx=ve(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.assertNever=KC;function KC(n,e=`unexpected value ${n}`){throw new Error(`Unreachable: ${e}`)}});var pu=ve(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.ChatCompletionContentPartOpaque=yr.ChatCompletionContentPartKind=yr.ChatRole=void 0;var JC=nx(),zc;(function(n){n[n.System=0]="System",n[n.User=1]="User",n[n.Assistant=2]="Assistant",n[n.Tool=3]="Tool"})(zc||(yr.ChatRole=zc={}));(function(n){function e(t){switch(t){case n.System:return"system";case n.User:return"user";case n.Assistant:return"assistant";case n.Tool:return"tool";default:(0,JC.assertNever)(t,`unknown chat role ${t}}`)}}n.display=e})(zc||(yr.ChatRole=zc={}));var rx;(function(n){n[n.Image=0]="Image",n[n.Text=1]="Text",n[n.Opaque=2]="Opaque",n[n.CacheBreakpoint=3]="CacheBreakpoint"})(rx||(yr.ChatCompletionContentPartKind=rx={}));var ix;(function(n){function e(t,r){return!t.scope||(t.scope&r)!==0}n.usableIn=e})(ix||(yr.ChatCompletionContentPartOpaque=ix={}))});var Bm=ve(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.BaseTokensPerName=zn.BaseTokensPerMessage=zn.BaseTokensPerCompletion=zn.ChatRole=void 0;var ox;(function(n){n.System="system",n.User="user",n.Assistant="assistant",n.Function="function",n.Tool="tool"})(ox||(zn.ChatRole=ox={}));zn.BaseTokensPerCompletion=3;zn.BaseTokensPerMessage=3;zn.BaseTokensPerName=1});var lx=ve(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.toOpenAiChatMessage=ux;Kc.toOpenAIChatMessages=XC;var Tr=pu(),Hc=Bm(),QC=oi();function sx(n){return n.filter(e=>e.type===Tr.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}function ax(n){let e=n.map(t=>{if(t.type===Tr.ChatCompletionContentPartKind.Text)return{type:"text",text:t.text};if(t.type===Tr.ChatCompletionContentPartKind.Image)return{image_url:t.imageUrl,type:"image_url"};if(t.type===Tr.ChatCompletionContentPartKind.Opaque&&Tr.ChatCompletionContentPartOpaque.usableIn(t,QC.OutputMode.OpenAI))return t.value}).filter(t=>!!t);return e.every(t=>t.type==="text")?e.map(t=>t.text).join(""):e}function ux(n){switch(n.role){case Tr.ChatRole.System:return{role:Hc.ChatRole.System,content:sx(n.content),name:n.name};case Tr.ChatRole.User:return{role:Hc.ChatRole.User,content:ax(n.content),name:n.name};case Tr.ChatRole.Assistant:return{role:Hc.ChatRole.Assistant,content:sx(n.content),name:n.name,tool_calls:n.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case Tr.ChatRole.Tool:return{role:Hc.ChatRole.Tool,content:ax(n.content),tool_call_id:n.toolCallId};default:return}}function XC(n){return n.map(ux).filter(e=>!!e)}});var dx=ve(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.toVsCodeChatMessage=cx;Xc.toVsCodeChatMessages=YC;var Qc=pu();function Jc(n){return n.filter(e=>e.type===Qc.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}var si;function cx(n){switch(si??=require("vscode"),n.role){case Qc.ChatRole.Assistant:let e=si.LanguageModelChatMessage.Assistant(Jc(n.content),n.name);return n.toolCalls&&(e.content=[new si.LanguageModelTextPart(Jc(n.content)),...n.toolCalls.map(t=>{let r;try{r=JSON.parse(t.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+t.id)}return new si.LanguageModelToolCallPart(t.id,t.function.name,r)})]),e;case Qc.ChatRole.User:return si.LanguageModelChatMessage.User(Jc(n.content),n.name);case Qc.ChatRole.Tool:{let t=si.LanguageModelChatMessage.User("");return t.content=[new si.LanguageModelToolResultPart(n.toolCallId,[new si.LanguageModelTextPart(Jc(n.content))])],t}default:return}}function YC(n){return n.map(cx).filter(e=>!!e)}});var oi=ve(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.OutputMode=wn.Raw=wn.OpenAI=void 0;wn.toMode=Vm;wn.toVSCode=ZC;wn.toOpenAI=eE;var px=lx(),fx=dx();wn.OpenAI=Bm();wn.Raw=pu();var so;(function(n){n[n.Raw=1]="Raw",n[n.OpenAI=2]="OpenAI",n[n.VSCode=4]="VSCode"})(so||(wn.OutputMode=so={}));function Vm(n,e){switch(n){case so.Raw:return e;case so.VSCode:return e instanceof Array?(0,fx.toVsCodeChatMessages)(e):(0,fx.toVsCodeChatMessage)(e);case so.OpenAI:return e instanceof Array?(0,px.toOpenAIChatMessages)(e):(0,px.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${n}`)}}function ZC(n){return Vm(so.VSCode,n)}function eE(n){return Vm(so.OpenAI,n)}});var qm=ve(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.jsonRetainedProps=void 0;fu.forEachNode=mx;fu.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function mx(n,e){if(e(n),n.type===1)for(let t of n.children)mx(t,e)}});var hx=ve($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.once=tE;function tE(n){let e,t=!1,r=((...i)=>(t||(e=n(...i),t=!0),e));return r.clear=()=>{t=!1},r}});var zm=ve(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.BudgetExceededError=xt.MaterializedChatMessageImage=xt.MaterializedChatMessageBreakpoint=xt.MaterializedChatMessageOpaque=xt.MaterializedChatMessage=xt.MaterializedChatMessageTextChunk=xt.GenericMaterializedContainer=void 0;var ws=hx(),Ft=oi(),_r=class n{parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,t,r,i,o,s,a){if(this.parent=e,this.id=t,this.name=r,this.priority=i,this.metadata=s,this.flags=a,this.children=o(this),a&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[u,l]=this.children;l.isEmpty?this.children=[u]:this.children=[l]}}has(e){return!!(this.flags&e)}async tokenCount(e){let t=0;return await Promise.all(this.children.map(async r=>{let i=ui(r)?await r.tokenCount(e):await r.upperBoundTokenCount(e);t+=i})),t}async upperBoundTokenCount(e){let t=0;return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);t+=i})),t}replaceNode(e,t){return Ix(e,this.children,t)}allMetadata(){return kx(this)}findById(e){return Gm(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)nE(e),e instanceof n?yield*e.toChatMessages():!e.isEmpty&&e instanceof En&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let t=0;return await Promise.all(this.children.map(async r=>{if(r instanceof En||r instanceof n){let i=await r.baseMessageTokenCount(e);t+=i}})),t}removeLowestPriorityChild(){let e=[];return jm(this,e),e}};xt.GenericMaterializedContainer=_r;var mu=class{parent;text;priority;metadata;lineBreakBefore;constructor(e,t,r,i=[],o){this.parent=e,this.text=t,this.priority=r,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,ws.once)(async e=>await e.tokenLength({type:Ft.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};xt.MaterializedChatMessageTextChunk=mu;var En=class{parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,t,r,i,o,s,a,u,l){this.parent=e,this.id=t,this.role=r,this.name=i,this.toolCalls=o,this.toolCallId=s,this.priority=a,this.metadata=u,this.children=l(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,t){let r=Ix(e,this.children,t);return r&&this.onChunksChange(),r}removeLowestPriorityChild(){let e=[];return jm(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Gm(e,this)}_tokenCount=(0,ws.once)(async e=>{let t=this.toChatMessage();return e.countMessageTokens((0,Ft.toMode)(e.mode,t))});_upperBound=(0,ws.once)(async e=>{let t=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);t+=i})),t});baseMessageTokenCount=(0,ws.once)(e=>{let t=this.toChatMessage();return t.content=t.content.map(r=>r.type===Ft.Raw.ChatCompletionContentPartKind.Text?{...r,text:""}:r.type===Ft.Raw.ChatCompletionContentPartKind.Image?void 0:r).filter(r=>!!r),e.countMessageTokens((0,Ft.toMode)(e.mode,t))});_text=(0,ws.once)(()=>{let e=[];for(let{content:t,isTextSibling:r}of Tx(this)){if(t instanceof ao||t instanceof ai){e.push(t);continue}if(t instanceof Cn){e.at(-1)instanceof Cn?e[e.length-1]=t:e.push(t);continue}if(t.lineBreakBefore===1||t.lineBreakBefore===2&&!r){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=t.text:e.push(t.text)}return e});toChatMessage(){let e=this.text.map(t=>{if(typeof t=="string")return{type:Ft.Raw.ChatCompletionContentPartKind.Text,text:t};if(t instanceof ao)return{type:Ft.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:wx(t.src),detail:t.detail}};if(t instanceof ai)return{type:Ft.Raw.ChatCompletionContentPartKind.Opaque,value:t.value};if(t instanceof Cn)return t.part;throw new Error("Unexpected element type")});if(this.role===Ft.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===Ft.Raw.ChatRole.Assistant){let t={role:this.role,content:e};return this.name&&(t.name=this.name),this.toolCalls?.length&&(t.toolCalls=this.toolCalls.map(r=>({function:r.function,id:r.id,type:r.type}))),t}else return this.role===Ft.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===Ft.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};xt.MaterializedChatMessage=En;var ai=class{parent;part;priority;metadata=[];get value(){return this.part.value}constructor(e,t,r=Number.MAX_SAFE_INTEGER){this.parent=e,this.part=t,this.priority=r}upperBoundTokenCount(e){return this.part.tokenUsage&&Ft.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};xt.MaterializedChatMessageOpaque=ai;var Cn=class{parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,t){this.parent=e,this.part=t}upperBoundTokenCount(e){return 0}isEmpty=!1};xt.MaterializedChatMessageBreakpoint=Cn;var ao=class{parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,t,r,i,o=[],s,a){this.parent=e,this.id=t,this.src=r,this.priority=i,this.metadata=o,this.lineBreakBefore=s,this.detail=a}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,ws.once)(async e=>e.tokenLength({type:Ft.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:wx(this.src),detail:this.detail}}));isEmpty=!1};xt.MaterializedChatMessageImage=ao;function ui(n){return n instanceof _r||n instanceof En}function yx(n){return n instanceof mu||n instanceof ao||n instanceof ai||n instanceof Cn}function nE(n){if(!ui(n))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${n.text}"`)}function*Tx(n,e=!1){for(let t of n.children)t instanceof mu?(yield{content:t,isTextSibling:e},e=!0):t instanceof ao||t instanceof ai||t instanceof Cn?yield{content:t,isTextSibling:!1}:t instanceof ai?yield{content:t,isTextSibling:!0}:(t&&(yield*Tx(t,e)),e=!1)}function rE(n,e){let t;function r(i,o){if(yx(i))(!t||i.priority<t.node.priority)&&(t={chain:o.slice(),node:i});else{o.push(i);for(let s of i.children)r(s,o);o.pop()}}if(r(n,[]),!t)throw new Error("No lowest priority node found");hu(t.node,e)}var gx=new WeakMap;function _x(n){let e=gx.get(n);if(e!==void 0)return e;let t=!1;return n instanceof Cn?t=!0:n instanceof En?t=n.children.some(r=>r instanceof Cn):n instanceof _r&&(t=n.children.some(_x)),gx.set(n,t),t}function iE(n){if(n instanceof En)return!0;for(let e=n.parent;e;e=e.parent)if(e instanceof En)return!1;return!0}function jm(n,e){let t;if(n instanceof _r&&n.has(1)){rE(n,e);return}let r=iE(n),i=n.children.map((o,s)=>({chain:[n],index:s}));for(let o=0;o<i.length;o++){let{chain:s,index:a}=i[o],u=s[s.length-1].children[a];if(!(r&&_x(u)&&(t=void 0,u instanceof Cn))){if(u instanceof _r&&u.has(4)&&u.children.length){let l=[...s,u];i.splice(o+1,0,...u.children.map((p,d)=>({chain:l,index:d})))}else if(!t||u.priority<t.value.priority)t={chain:s,index:a,value:u};else if(u.priority===t.value.priority){t.lowestNested??=bx(t.value);let l=bx(u);l<t.lowestNested&&(t={chain:s,index:a,value:u,lowestNested:l})}}}if(!t)throw new Yc(n);yx(t.value)||t.value instanceof _r&&t.value.has(2)||ui(t.value)&&!t.value.children.length?hu(t.value,e):jm(t.value,e)}var Yc=class extends Error{metadata;messages;constructor(e){let t=[e];for(;t[0].parent;)t.unshift(t[0].parent);let r=t.map(i=>i instanceof En?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${r.join(" -> ")})`)}};xt.BudgetExceededError=Yc;function bx(n){if(!ui(n))return-1;let e=Number.MAX_SAFE_INTEGER;for(let t of n.children)e=Math.min(e,t.priority);return e}function*kx(n){yield*n.metadata;for(let e of n.children)ui(e)?yield*kx(e):yield*e.metadata}function Ix(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];if(ui(i)){if(i.id===n){let s=e[r];return t.parent=i.parent,e[r]=t,s}let o=i.replaceNode(n,t);if(o)return o}}}function*vx(n){let e=[n];for(;e.length>0;){let t=e.pop();yield t,ui(t)&&e.push(...t.children)}}function oE(n){let e=n;for(;e.parent;)e=e.parent;return e}function xx(n){return n instanceof _r&&n.keepWithId!==void 0}var Wm=new Set;function sE(n,e){let t=new Set;for(let r of vx(n))xx(r)&&!Wm.has(r.keepWithId)&&t.add(r.keepWithId);if(t.size===0)return!1;for(let r of t)Wm.add(r);try{let r=oE(n);for(let i of vx(r))xx(i)&&t.has(i.keepWithId)?hu(i,e):i instanceof En&&i.toolCalls&&(i.toolCalls=aE(i.toolCalls,o=>!(o.keepWith&&t.has(o.keepWith.id))),i.isEmpty&&hu(i,e))}finally{for(let r of t)Wm.delete(r)}}function Gm(n,e){if(e.id===n)return e;for(let t of e.children)if(ui(t)){let r=Gm(n,t);if(r)return r}}function hu(n,e){let t=n.parent;if(!t)return;let r=t.children.indexOf(n);r!==-1&&(t.children.splice(r,1),e.push(n),sE(n,e),t.isEmpty?hu(t,e):t.onChunksChange())}function wx(n){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let t of Object.keys(e))if(n.startsWith(t))return`data:${e[t]};base64,${n}`;return n}function aE(n,e){for(let t=0;t<n.length;t++){if(e(n[t]))continue;let r=n.slice(0,t);for(let i=t+1;i<n.length;i++)e(n[i])&&r.push(n[i]);return r}return n}});var Ex=ve(()=>{"use strict";function uE(n,e,...t){return{ctor:n,props:e,children:t.flat()}}function Cx(){throw new Error("This should not be invoked!")}Cx.isFragment=!0;globalThis.vscpp=uE;globalThis.vscppf=Cx});var Km=ve(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.PromptElement=void 0;Ex();var Hm=class{props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};Zc.PromptElement=Hm});var ih=ve(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.LogicalWrapper=ce.IfEmpty=ce.AbstractKeepWith=ce.TokenLimit=ce.Expandable=ce.Chunk=ce.LegacyPrioritization=ce.ToolResult=ce.PrioritizedList=ce.Image=ce.TextChunk=ce.ToolMessage=ce.AssistantMessage=ce.UserMessage=ce.SystemMessage=ce.BaseChatMessage=void 0;ce.isChatMessagePromptElement=lE;ce.useKeepWith=fE;var bu=vu(),cn=Km();function lE(n){return n instanceof ed||n instanceof td||n instanceof nd}var uo=class extends cn.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};ce.BaseChatMessage=uo;var ed=class extends uo{constructor(e){e.role=bu.Raw.ChatRole.System,super(e)}};ce.SystemMessage=ed;var td=class extends uo{constructor(e){e.role=bu.Raw.ChatRole.User,super(e)}};ce.UserMessage=td;var nd=class extends uo{constructor(e){e.role=bu.Raw.ChatRole.Assistant,super(e)}};ce.AssistantMessage=nd;var cE=/\s+/g,Jm=class extends uo{constructor(e){e.role=bu.Raw.ChatRole.Tool,super(e)}};ce.ToolMessage=Jm;var rd=class extends cn.PromptElement{async prepare(e,t,r){let i=this.props.breakOnWhitespace?cE:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",s=[];for(let u of this.props.children||[])if(u&&typeof u=="object"){if(typeof u.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");u.ctor==="br"?o+=`
`:s.push(u)}else u!=null&&(o+=u);let a=await dE(e,i,o,r);return vscpp(vscppf,null,s,a)}render(e){return e}};ce.TextChunk=rd;async function dE(n,e,t,r){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<t.length;){let s;typeof e=="string"?s=t.indexOf(e,o===-1?0:o+e.length):s=e.exec(t)?.index??-1,s===-1&&(s=t.length);let a=i+t.slice(Math.max(0,o),s);if(await n.countTokens({type:bu.Raw.ChatCompletionContentPartKind.Text,text:a},r)>n.tokenBudget)return i;i=a,o=s}return i}var Qm=class extends cn.PromptElement{constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};ce.Image=Qm;var Xm=class extends cn.PromptElement{render(){let{children:e,priority:t=0,descending:r}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let s=r?t-o:t-e.length+o;return typeof i!="object"?vscpp(rd,{priority:s},i):(i.props??={},i.props.priority=s,i)}))}};ce.PrioritizedList=Xm;var Ym=class extends cn.PromptElement{render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};ce.ToolResult=Ym;var Zm=class extends cn.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};ce.LegacyPrioritization=Zm;var eh=class extends cn.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};ce.Chunk=eh;var th=class extends cn.PromptElement{async render(e,t){return vscpp(vscppf,null,await this.props.value(t))}};ce.Expandable=th;var nh=class extends cn.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};ce.TokenLimit=nh;var id=class extends cn.PromptElement{};ce.AbstractKeepWith=id;var pE=0;function fE(){let n=pE++;return class extends id{static id=n;id=n;render(){return vscpp(vscppf,null,this.props.children)}}}var rh=class extends cn.PromptElement{render(){return vscpp(vscppf,null,vscpp(gu,null,this.props.alt),vscpp(gu,{flexGrow:1},this.props.children))}};ce.IfEmpty=rh;var gu=class extends cn.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};ce.LogicalWrapper=gu});var Rx=ve(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.localize=mE;xu.localize2=hE;xu.getConfiguredDefaultLocale=gE;function Sx(n,e){let t;return e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,function(r,i){let o=i[0];return typeof e[o]<"u"?e[o]:r}),t}function mE(n,e,...t){return Sx(e,t)}function hE(n,e,...t){let r=Sx(e,t);return{original:r,value:r}}function gE(n){}});var uh=ve(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.isAndroid=D.isEdge=D.isSafari=D.isFirefox=D.isChrome=D.OS=D.setTimeout0=D.setTimeout0IsFaster=D.translationsConfigFile=D.platformLocale=D.locale=D.Language=D.language=D.userAgent=D.platform=D.isCI=D.isMobile=D.isIOS=D.webWorkerOrigin=D.isWebWorker=D.isWeb=D.isElectron=D.isNative=D.isLinuxSnap=D.isLinux=D.isMacintosh=D.isWindows=D.LANGUAGE_DEFAULT=void 0;D.PlatformToString=vE;D.isLittleEndian=xE;D.isBigSurOrNewer=yE;var Dx=Rx();D.LANGUAGE_DEFAULT="en";var _u=!1,ku=!1,Tu=!1,Ox=!1,Nx=!1,sh=!1,Fx=!1,ah=!1,Mx=!1,Ux=!1,yu,od=D.LANGUAGE_DEFAULT,oh=D.LANGUAGE_DEFAULT,Bx,kr,Ir=globalThis,Jt;typeof Ir.vscode<"u"&&typeof Ir.vscode.process<"u"?Jt=Ir.vscode.process:typeof process<"u"&&(Jt=process);var Vx=typeof Jt?.versions?.electron=="string",bE=Vx&&Jt?.type==="renderer";if(typeof Jt=="object"){_u=Jt.platform==="win32",ku=Jt.platform==="darwin",Tu=Jt.platform==="linux",Ox=Tu&&!!Jt.env.SNAP&&!!Jt.env.SNAP_REVISION,Fx=Vx,Mx=!!Jt.env.CI||!!Jt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,yu=D.LANGUAGE_DEFAULT,od=D.LANGUAGE_DEFAULT;let n=Jt.env.VSCODE_NLS_CONFIG;if(n)try{let e=JSON.parse(n),t=e.availableLanguages["*"];yu=e.locale,oh=e.osLocale,od=t||D.LANGUAGE_DEFAULT,Bx=e._translationsConfigFile}catch{}Nx=!0}else typeof navigator=="object"&&!bE?(kr=navigator.userAgent,_u=kr.indexOf("Windows")>=0,ku=kr.indexOf("Macintosh")>=0,ah=(kr.indexOf("Macintosh")>=0||kr.indexOf("iPad")>=0||kr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Tu=kr.indexOf("Linux")>=0,Ux=kr?.indexOf("Mobi")>=0,sh=!0,yu=Dx.getConfiguredDefaultLocale(Dx.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||D.LANGUAGE_DEFAULT,od=yu,oh=navigator.language):console.error("Unable to resolve platform.");function vE(n){switch(n){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var sd=0;ku?sd=1:_u?sd=3:Tu&&(sd=2);D.isWindows=_u;D.isMacintosh=ku;D.isLinux=Tu;D.isLinuxSnap=Ox;D.isNative=Nx;D.isElectron=Fx;D.isWeb=sh;D.isWebWorker=sh&&typeof Ir.importScripts=="function";D.webWorkerOrigin=D.isWebWorker?Ir.origin:void 0;D.isIOS=ah;D.isMobile=Ux;D.isCI=Mx;D.platform=sd;D.userAgent=kr;D.language=od;var Ax;(function(n){function e(){return D.language}n.value=e;function t(){return D.language.length===2?D.language==="en":D.language.length>=3?D.language[0]==="e"&&D.language[1]==="n"&&D.language[2]==="-":!1}n.isDefaultVariant=t;function r(){return D.language==="en"}n.isDefault=r})(Ax||(D.Language=Ax={}));D.locale=yu;D.platformLocale=oh;D.translationsConfigFile=Bx;D.setTimeout0IsFaster=typeof Ir.postMessage=="function"&&!Ir.importScripts;D.setTimeout0=(()=>{if(D.setTimeout0IsFaster){let n=[];Ir.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let r=0,i=n.length;r<i;r++){let o=n[r];if(o.id===t.data.vscodeScheduleAsyncWork){n.splice(r,1),o.callback();return}}});let e=0;return t=>{let r=++e;n.push({id:r,callback:t}),Ir.postMessage({vscodeScheduleAsyncWork:r},"*")}}return n=>setTimeout(n)})();D.OS=ku||ah?2:_u?1:3;var Px=!0,Lx=!1;function xE(){if(!Lx){Lx=!0;let n=new Uint8Array(2);n[0]=1,n[1]=2,Px=new Uint16Array(n.buffer)[0]===513}return Px}D.isChrome=!!(D.userAgent&&D.userAgent.indexOf("Chrome")>=0);D.isFirefox=!!(D.userAgent&&D.userAgent.indexOf("Firefox")>=0);D.isSafari=!!(!D.isChrome&&D.userAgent&&D.userAgent.indexOf("Safari")>=0);D.isEdge=!!(D.userAgent&&D.userAgent.indexOf("Edg/")>=0);D.isAndroid=!!(D.userAgent&&D.userAgent.indexOf("Android")>=0);function yE(n){return parseFloat(n)>=20}});var $x=ve(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.arch=Hn.platform=Hn.env=Hn.cwd=void 0;var qx=uh(),lo,lh=globalThis.vscode;if(typeof lh<"u"&&typeof lh.process<"u"){let n=lh.process;lo={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"?lo={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:lo={get platform(){return qx.isWindows?"win32":qx.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};Hn.cwd=lo.cwd;Hn.env=lo.env;Hn.platform=lo.platform;Hn.arch=lo.arch});var jx=ve(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.delimiter=F.sep=F.toNamespacedPath=F.parse=F.format=F.extname=F.basename=F.dirname=F.relative=F.resolve=F.join=F.isAbsolute=F.normalize=F.posix=F.win32=void 0;var Cs=$x(),TE=65,_E=97,kE=90,IE=122,di=46,ct=47,Mt=92,li=58,wE=63,ad=class extends Error{code;constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${i} of type ${t}`;s+=`. Received type ${typeof r}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function CE(n,e){if(n===null||typeof n!="object")throw new ad(e,"Object",n)}function je(n,e){if(typeof n!="string")throw new ad(e,"string",n)}var Ut=Cs.platform==="win32";function ne(n){return n===ct||n===Mt}function ch(n){return n===ct}function ci(n){return n>=TE&&n<=kE||n>=_E&&n<=IE}function ud(n,e,t,r){let i="",o=0,s=-1,a=0,u=0;for(let l=0;l<=n.length;++l){if(l<n.length)u=n.charCodeAt(l);else{if(r(u))break;u=ct}if(r(u)){if(!(s===l-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==di||i.charCodeAt(i.length-2)!==di){if(i.length>2){let p=i.lastIndexOf(t);p===-1?(i="",o=0):(i=i.slice(0,p),o=i.length-1-i.lastIndexOf(t)),s=l,a=0;continue}else if(i.length!==0){i="",o=0,s=l,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${n.slice(s+1,l)}`:i=n.slice(s+1,l),o=l-s-1;s=l,a=0}else u===di&&a!==-1?++a:a=-1}return i}function Wx(n,e){CE(e,"pathObject");let t=e.dir||e.root,r=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${r}`:`${t}${n}${r}`:r}F.win32={resolve(...n){let e="",t="",r=!1;for(let i=n.length-1;i>=-1;i--){let o;if(i>=0){if(o=n[i],je(o,"path"),o.length===0)continue}else e.length===0?o=Cs.cwd():(o=Cs.env[`=${e}`]||Cs.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Mt)&&(o=`${e}\\`));let s=o.length,a=0,u="",l=!1,p=o.charCodeAt(0);if(s===1)ne(p)&&(a=1,l=!0);else if(ne(p))if(l=!0,ne(o.charCodeAt(1))){let d=2,f=d;for(;d<s&&!ne(o.charCodeAt(d));)d++;if(d<s&&d!==f){let h=o.slice(f,d);for(f=d;d<s&&ne(o.charCodeAt(d));)d++;if(d<s&&d!==f){for(f=d;d<s&&!ne(o.charCodeAt(d));)d++;(d===s||d!==f)&&(u=`\\\\${h}\\${o.slice(f,d)}`,a=d)}}}else a=1;else ci(p)&&o.charCodeAt(1)===li&&(u=o.slice(0,2),a=2,s>2&&ne(o.charCodeAt(2))&&(l=!0,a=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(r){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,r=l,l&&e.length>0)break}return t=ud(t,!r,"\\",ne),r?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){je(n,"path");let e=n.length;if(e===0)return".";let t=0,r,i=!1,o=n.charCodeAt(0);if(e===1)return ch(o)?"\\":n;if(ne(o))if(i=!0,ne(n.charCodeAt(1))){let a=2,u=a;for(;a<e&&!ne(n.charCodeAt(a));)a++;if(a<e&&a!==u){let l=n.slice(u,a);for(u=a;a<e&&ne(n.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!ne(n.charCodeAt(a));)a++;if(a===e)return`\\\\${l}\\${n.slice(u)}\\`;a!==u&&(r=`\\\\${l}\\${n.slice(u,a)}`,t=a)}}}else t=1;else ci(o)&&n.charCodeAt(1)===li&&(r=n.slice(0,2),t=2,e>2&&ne(n.charCodeAt(2))&&(i=!0,t=3));let s=t<e?ud(n.slice(t),!i,"\\",ne):"";return s.length===0&&!i&&(s="."),s.length>0&&ne(n.charCodeAt(e-1))&&(s+="\\"),r===void 0?i?`\\${s}`:s:i?`${r}\\${s}`:`${r}${s}`},isAbsolute(n){je(n,"path");let e=n.length;if(e===0)return!1;let t=n.charCodeAt(0);return ne(t)||e>2&&ci(t)&&n.charCodeAt(1)===li&&ne(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let o=0;o<n.length;++o){let s=n[o];je(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof t=="string"&&ne(t.charCodeAt(0))){++i;let o=t.length;o>1&&ne(t.charCodeAt(1))&&(++i,o>2&&(ne(t.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&ne(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return F.win32.normalize(e)},relative(n,e){if(je(n,"from"),je(e,"to"),n===e)return"";let t=F.win32.resolve(n),r=F.win32.resolve(e);if(t===r||(n=t.toLowerCase(),e=r.toLowerCase(),n===e))return"";let i=0;for(;i<n.length&&n.charCodeAt(i)===Mt;)i++;let o=n.length;for(;o-1>i&&n.charCodeAt(o-1)===Mt;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===Mt;)a++;let u=e.length;for(;u-1>a&&e.charCodeAt(u-1)===Mt;)u--;let l=u-a,p=s<l?s:l,d=-1,f=0;for(;f<p;f++){let m=n.charCodeAt(i+f);if(m!==e.charCodeAt(a+f))break;m===Mt&&(d=f)}if(f!==p){if(d===-1)return r}else{if(l>p){if(e.charCodeAt(a+f)===Mt)return r.slice(a+f+1);if(f===2)return r.slice(a+f)}s>p&&(n.charCodeAt(i+f)===Mt?d=f:f===2&&(d=3)),d===-1&&(d=0)}let h="";for(f=i+d+1;f<=o;++f)(f===o||n.charCodeAt(f)===Mt)&&(h+=h.length===0?"..":"\\..");return a+=d,h.length>0?`${h}${r.slice(a,u)}`:(r.charCodeAt(a)===Mt&&++a,r.slice(a,u))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;let e=F.win32.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===Mt){if(e.charCodeAt(1)===Mt){let t=e.charCodeAt(2);if(t!==wE&&t!==di)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ci(e.charCodeAt(0))&&e.charCodeAt(1)===li&&e.charCodeAt(2)===Mt)return`\\\\?\\${e}`;return n},dirname(n){je(n,"path");let e=n.length;if(e===0)return".";let t=-1,r=0,i=n.charCodeAt(0);if(e===1)return ne(i)?n:".";if(ne(i)){if(t=r=1,ne(n.charCodeAt(1))){let a=2,u=a;for(;a<e&&!ne(n.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&ne(n.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!ne(n.charCodeAt(a));)a++;if(a===e)return n;a!==u&&(t=r=a+1)}}}}else ci(i)&&n.charCodeAt(1)===li&&(t=e>2&&ne(n.charCodeAt(2))?3:2,r=t);let o=-1,s=!0;for(let a=e-1;a>=r;--a)if(ne(n.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return n.slice(0,o)},basename(n,e){e!==void 0&&je(e,"ext"),je(n,"path");let t=0,r=-1,i=!0,o;if(n.length>=2&&ci(n.charCodeAt(0))&&n.charCodeAt(1)===li&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let s=e.length-1,a=-1;for(o=n.length-1;o>=t;--o){let u=n.charCodeAt(o);if(ne(u)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}for(o=n.length-1;o>=t;--o)if(ne(n.charCodeAt(o))){if(!i){t=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":n.slice(t,r)},extname(n){je(n,"path");let e=0,t=-1,r=0,i=-1,o=!0,s=0;n.length>=2&&n.charCodeAt(1)===li&&ci(n.charCodeAt(0))&&(e=r=2);for(let a=n.length-1;a>=e;--a){let u=n.charCodeAt(a);if(ne(u)){if(!o){r=a+1;break}continue}i===-1&&(o=!1,i=a+1),u===di?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===r+1?"":n.slice(t,i)},format:Wx.bind(null,"\\"),parse(n){je(n,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;let t=n.length,r=0,i=n.charCodeAt(0);if(t===1)return ne(i)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(ne(i)){if(r=1,ne(n.charCodeAt(1))){let d=2,f=d;for(;d<t&&!ne(n.charCodeAt(d));)d++;if(d<t&&d!==f){for(f=d;d<t&&ne(n.charCodeAt(d));)d++;if(d<t&&d!==f){for(f=d;d<t&&!ne(n.charCodeAt(d));)d++;d===t?r=d:d!==f&&(r=d+1)}}}}else if(ci(i)&&n.charCodeAt(1)===li){if(t<=2)return e.root=e.dir=n,e;if(r=2,ne(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;r=3}}r>0&&(e.root=n.slice(0,r));let o=-1,s=r,a=-1,u=!0,l=n.length-1,p=0;for(;l>=r;--l){if(i=n.charCodeAt(l),ne(i)){if(!u){s=l+1;break}continue}a===-1&&(u=!1,a=l+1),i===di?o===-1?o=l:p!==1&&(p=1):o!==-1&&(p=-1)}return a!==-1&&(o===-1||p===0||p===1&&o===a-1&&o===s+1?e.base=e.name=n.slice(s,a):(e.name=n.slice(s,o),e.base=n.slice(s,a),e.ext=n.slice(o,a))),s>0&&s!==r?e.dir=n.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var EE=(()=>{if(Ut){let n=/\\/g;return()=>{let e=Cs.cwd().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>Cs.cwd()})();F.posix={resolve(...n){let e="",t=!1;for(let r=n.length-1;r>=-1&&!t;r--){let i=r>=0?n[r]:EE();je(i,"path"),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===ct)}return e=ud(e,!t,"/",ch),t?`/${e}`:e.length>0?e:"."},normalize(n){if(je(n,"path"),n.length===0)return".";let e=n.charCodeAt(0)===ct,t=n.charCodeAt(n.length-1)===ct;return n=ud(n,!e,"/",ch),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return je(n,"path"),n.length>0&&n.charCodeAt(0)===ct},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){let r=n[t];je(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":F.posix.normalize(e)},relative(n,e){if(je(n,"from"),je(e,"to"),n===e||(n=F.posix.resolve(n),e=F.posix.resolve(e),n===e))return"";let t=1,r=n.length,i=r-t,o=1,s=e.length-o,a=i<s?i:s,u=-1,l=0;for(;l<a;l++){let d=n.charCodeAt(t+l);if(d!==e.charCodeAt(o+l))break;d===ct&&(u=l)}if(l===a)if(s>a){if(e.charCodeAt(o+l)===ct)return e.slice(o+l+1);if(l===0)return e.slice(o+l)}else i>a&&(n.charCodeAt(t+l)===ct?u=l:l===0&&(u=0));let p="";for(l=t+u+1;l<=r;++l)(l===r||n.charCodeAt(l)===ct)&&(p+=p.length===0?"..":"/..");return`${p}${e.slice(o+u)}`},toNamespacedPath(n){return n},dirname(n){if(je(n,"path"),n.length===0)return".";let e=n.charCodeAt(0)===ct,t=-1,r=!0;for(let i=n.length-1;i>=1;--i)if(n.charCodeAt(i)===ct){if(!r){t=i;break}}else r=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&je(e,"ext"),je(n,"path");let t=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let s=e.length-1,a=-1;for(o=n.length-1;o>=0;--o){let u=n.charCodeAt(o);if(u===ct){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===ct){if(!i){t=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":n.slice(t,r)},extname(n){je(n,"path");let e=-1,t=0,r=-1,i=!0,o=0;for(let s=n.length-1;s>=0;--s){let a=n.charCodeAt(s);if(a===ct){if(!i){t=s+1;break}continue}r===-1&&(i=!1,r=s+1),a===di?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===t+1?"":n.slice(e,r)},format:Wx.bind(null,"/"),parse(n){je(n,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;let t=n.charCodeAt(0)===ct,r;t?(e.root="/",r=1):r=0;let i=-1,o=0,s=-1,a=!0,u=n.length-1,l=0;for(;u>=r;--u){let p=n.charCodeAt(u);if(p===ct){if(!a){o=u+1;break}continue}s===-1&&(a=!1,s=u+1),p===di?i===-1?i=u:l!==1&&(l=1):i!==-1&&(l=-1)}if(s!==-1){let p=o===0&&t?1:o;i===-1||l===0||l===1&&i===s-1&&i===o+1?e.base=e.name=n.slice(p,s):(e.name=n.slice(p,i),e.base=n.slice(p,s),e.ext=n.slice(i,s))}return o>0?e.dir=n.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};F.posix.win32=F.win32.win32=F.win32;F.posix.posix=F.win32.posix=F.posix;F.normalize=Ut?F.win32.normalize:F.posix.normalize;F.isAbsolute=Ut?F.win32.isAbsolute:F.posix.isAbsolute;F.join=Ut?F.win32.join:F.posix.join;F.resolve=Ut?F.win32.resolve:F.posix.resolve;F.relative=Ut?F.win32.relative:F.posix.relative;F.dirname=Ut?F.win32.dirname:F.posix.dirname;F.basename=Ut?F.win32.basename:F.posix.basename;F.extname=Ut?F.win32.extname:F.posix.extname;F.format=Ut?F.win32.format:F.posix.format;F.parse=Ut?F.win32.parse:F.posix.parse;F.toNamespacedPath=Ut?F.win32.toNamespacedPath:F.posix.toNamespacedPath;F.sep=Ut?F.win32.sep:F.posix.sep;F.delimiter=Ut?F.win32.delimiter:F.posix.delimiter});var Xx=ve(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.URI=void 0;Es.isUriComponents=NE;Es.uriToFsPath=pd;var Gx=jx(),cd=uh(),SE=/^\w[\w\d+.-]*$/,RE=/^\//,DE=/^\/\//;function AE(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!SE.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!RE.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(DE.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function PE(n,e){return!n&&!e?"file":n}function LE(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==Sn&&(e=Sn+e):e=Sn;break}return e}var Ee="",Sn="/",OE=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,dd=class n{static isUri(e){return e instanceof n?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,r,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Ee,this.authority=e.authority||Ee,this.path=e.path||Ee,this.query=e.query||Ee,this.fragment=e.fragment||Ee):(this.scheme=PE(e,s),this.authority=t||Ee,this.path=LE(this.scheme,r||Ee),this.query=i||Ee,this.fragment=o||Ee,AE(this,s))}get fsPath(){return pd(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:i,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=Ee),r===void 0?r=this.authority:r===null&&(r=Ee),i===void 0?i=this.path:i===null&&(i=Ee),o===void 0?o=this.query:o===null&&(o=Ee),s===void 0?s=this.fragment:s===null&&(s=Ee),t===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new pi(t,r,i,o,s)}static parse(e,t=!1){let r=OE.exec(e);return r?new pi(r[2]||Ee,ld(r[4]||Ee),ld(r[5]||Ee),ld(r[7]||Ee),ld(r[9]||Ee),t):new pi(Ee,Ee,Ee,Ee,Ee)}static file(e){let t=Ee;if(cd.isWindows&&(e=e.replace(/\\/g,Sn)),e[0]===Sn&&e[1]===Sn){let r=e.indexOf(Sn,2);r===-1?(t=e.substring(2),e=Sn):(t=e.substring(2,r),e=e.substring(r)||Sn)}return new pi("file",t,e,Ee,Ee)}static from(e,t){return new pi(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return cd.isWindows&&e.scheme==="file"?r=n.file(Gx.win32.join(pd(e,!0),...t)).path:r=Gx.posix.join(e.path,...t),e.with({path:r})}toString(e=!1){return dh(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof n)return e;{let t=new pi(e);return t._formatted=e.external??null,t._fsPath=e._sep===Kx?e.fsPath??null:null,t}}else return e}};Es.URI=dd;function NE(n){return!n||typeof n!="object"?!1:typeof n.scheme=="string"&&(typeof n.authority=="string"||typeof n.authority>"u")&&(typeof n.path=="string"||typeof n.path>"u")&&(typeof n.query=="string"||typeof n.query>"u")&&(typeof n.fragment=="string"||typeof n.fragment>"u")}var Kx=cd.isWindows?1:void 0,pi=class extends dd{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=pd(this,!1)),this._fsPath}toString(e=!1){return e?dh(this,!0):(this._formatted||(this._formatted=dh(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Kx),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Jx={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function zx(n,e,t){let r,i=-1;for(let o=0;o<n.length;o++){let s=n.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)i!==-1&&(r+=encodeURIComponent(n.substring(i,o)),i=-1),r!==void 0&&(r+=n.charAt(o));else{r===void 0&&(r=n.substr(0,o));let a=Jx[s];a!==void 0?(i!==-1&&(r+=encodeURIComponent(n.substring(i,o)),i=-1),r+=a):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(n.substring(i))),r!==void 0?r:n}function FE(n){let e;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r===35||r===63?(e===void 0&&(e=n.substr(0,t)),e+=Jx[r]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function pd(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,cd.isWindows&&(t=t.replace(/\//g,"\\")),t}function dh(n,e){let t=e?FE:zx,r="",{scheme:i,authority:o,path:s,query:a,fragment:u}=n;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=Sn,r+=Sn),o){let l=o.indexOf("@");if(l!==-1){let p=o.substr(0,l);o=o.substr(l+1),l=p.lastIndexOf(":"),l===-1?r+=t(p,!1,!1):(r+=t(p.substr(0,l),!1,!1),r+=":",r+=t(p.substr(l+1),!1,!0)),r+="@"}o=o.toLowerCase(),l=o.lastIndexOf(":"),l===-1?r+=t(o,!1,!0):(r+=t(o.substr(0,l),!1,!0),r+=o.substr(l))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let l=s.charCodeAt(1);l>=65&&l<=90&&(s=`/${String.fromCharCode(l+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let l=s.charCodeAt(0);l>=65&&l<=90&&(s=`${String.fromCharCode(l+32)}:${s.substr(2)}`)}r+=t(s,!0,!1)}return a&&(r+="?",r+=t(a,!1,!1)),u&&(r+="#",r+=e?u:zx(u,!1,!1)),r}function Qx(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+Qx(n.substr(3)):n}}var Hx=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ld(n){return n.match(Hx)?n.replace(Hx,e=>Qx(e)):n}});var mh=ve(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.PromptReference=fi.ChatResponseReferencePartStatusKind=fi.PromptMetadata=void 0;var Iu=Xx(),ph=class{_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};fi.PromptMetadata=ph;var Yx;(function(n){n[n.Complete=1]="Complete",n[n.Partial=2]="Partial",n[n.Omitted=3]="Omitted"})(Yx||(fi.ChatResponseReferencePartStatusKind=Yx={}));var fh=class n{anchor;iconPath;options;static fromJSON(e){let t=r=>"scheme"in r?Iu.URI.from(r):{uri:Iu.URI.from(r.uri),range:r.range};return new n("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&t(e.anchor.value)}:t(e.anchor),e.iconPath&&("scheme"in e.iconPath?Iu.URI.from(e.iconPath):"light"in e.iconPath?{light:Iu.URI.from(e.iconPath.light),dark:Iu.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,t,r){this.anchor=e,this.iconPath=t,this.options=r}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};fi.PromptReference=fh});var kh=ve(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.PromptRenderer=Ss.MetadataMap=void 0;var ME=qm(),po=zm(),fo=oi(),ze=ih(),_h=mh(),fd;(function(n){n.empty={get:()=>{},getAll:()=>[]},n.from=e=>({get:t=>e.find(r=>r instanceof t),getAll:t=>e.filter(r=>r instanceof t)})})(fd||(Ss.MetadataMap=fd={}));var gh=class{_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new gd(null,0);_tokenLimits=[];tracer=void 0;constructor(e,t,r,i){this._endpoint=e,this._ctor=t,this._props=r,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,t,r,i){let o=new Map;for(let[u,l]of t.entries()){if(Array.isArray(l.children)&&(l.props=l.props??{},l.props.children=l.children),!l.ctor){let m=ny(l.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${m}`)}let p=this.createElement(l),d;p instanceof ze.TokenLimit&&(d=l.props.max,this._tokenLimits.push({limit:d,id:l.node.id})),l.node.setObj(p);let f=l.props.flexGrow??1/0,h=o.get(f);h||(h=[],o.set(f,h)),h.push({element:l,promptElementInstance:p,tokenLimit:d})}if(o.size===0)return;let s=[...o.entries()].sort(([u],[l])=>l-u).map(([u,l])=>l),a=u=>{let l=0;for(let p=u+1;p<s.length;p++)for(let{element:d}of s[p]){if(!d.props.flexReserve)continue;let f=typeof d.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(d.props.flexReserve.slice(1))):d.props.flexReserve;l+=f}return e.consume(l),l};for(let[u,l]of s.entries()){let p=a(u),d=0;for(let{element:x}of l)d+=x.props.flexBasis??1;let f=0,h=l.map(x=>{if(x.tokenLimit===void 0)return!1;let I=x.element.props.flexBasis??1,T=I/d;return Math.floor(e.remainingTokenBudget*T)<x.tokenLimit?!1:(d-=I,f+=x.tokenLimit,!0)}),m=l.map((x,I)=>{let T=(x.element.props.flexBasis??1)/d;return{tokenBudget:h[I]?x.tokenLimit:Math.floor((e.remainingTokenBudget-f)*T),endpoint:e.endpoint,countTokens:(b,y)=>this._tokenizer.tokenLength(typeof b=="string"?{type:fo.Raw.ChatCompletionContentPartKind.Text,text:b}:b,y)}});e.consume(-p),this.tracer?.addRenderEpoch?.({inNode:l[0].element.node.parent?.id,flexValue:l[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:p,elements:l.map((x,I)=>({id:x.element.node.id,tokenBudget:m[I].tokenBudget}))}),await Promise.all(l.map(async({element:x,promptElementInstance:I},T)=>{let b=await ey(x,()=>I.prepare?.(m[T],r,i));x.node.setState(b)}));let g=await Promise.all(l.map(async({element:x,promptElementInstance:I},T)=>{let b=m[T];return await ey(x,()=>I.render(x.node.getState(),b,r,i))}));for(let[x,{element:I,promptElementInstance:T}]of l.entries()){let b=m[x],y=g[x];if(!y)continue;let S=await this._processPromptRenderPiece(new co(b.tokenBudget,this._endpoint),I,T,y,r,i);T instanceof ze.Expandable&&this._growables.push({initialConsume:S,elem:I.node}),e.consume(S)}}}async _processPromptRenderPiece(e,t,r,i,o,s){let a=ty(i),u=new co(e.tokenBudget,this._endpoint),{tokensConsumed:l}=await UE(this._tokenizer,t,r,a);return u.consume(l),await this._handlePromptChildren(t,a,u,o,s),u.consumed}async renderElementJSON(e){return await this._processPromptPieces(new co(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,t){let r=await this.renderRaw(e,t);return{...r,messages:(0,fo.toMode)(this._tokenizer.mode,r.messages)}}async renderRaw(e,t){await this._processPromptPieces(new co(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,t);let{container:r,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,t);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:r,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:f=>this._getFinalElementTree(f,void 0).then(h=>({...h,budget:f}))});let s=[...r.toChatMessages()],a=await r.tokenCount(this._tokenizer),u=[...r.allMetadata()],l=new Set,p=u.map(f=>{if(!(f instanceof Kn))return;let h=f.reference,m="variableName"in h.anchor;if(m&&!l.has(h.anchor.variableName))return l.add(h.anchor.variableName),h;if(!m)return h}).filter(bd),d=i.map(f=>{if(!(f instanceof Kn)||u.includes(f))return;let h=f.reference,m="variableName"in h.anchor;if(m&&!l.has(h.anchor.variableName))return l.add(h.anchor.variableName),h;if(!m)return h}).filter(bd);return{metadata:fd.from(u),messages:s,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:a,references:p,omittedReferences:d}}async _getFinalElementTree(e,t){let r=this._root.materialize(),i=[...r.toChatMessages()],o=[...r.allMetadata()],s=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let u=s.length-1;u>=0;u--){let l=s[u];if(l.limit>e)continue;let p=r.findById(l.id);if(!p)continue;let d=await p.tokenCount(this._tokenizer);if(!(d<l.limit&&!await this._grow(p,d,l.limit,t)))try{let f=await p.tokenCount(this._tokenizer);for(;f>l.limit;){let h=await p.baseMessageTokenCount(this._tokenizer);do for(let m of p.removeLowestPriorityChild()){a++;let g=m.upperBoundTokenCount(this._tokenizer);f-=(typeof g=="number"?g:await g)*1.25}while(f-h>l.limit);f=await p.tokenCount(this._tokenizer)}}catch(f){throw f instanceof po.BudgetExceededError&&(f.metadata=fd.from([...r.allMetadata()]),f.messages=i),f}}return{container:r,allMetadata:o,removed:a}}async _grow(e,t,r,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let s=o.elem.getObj();if(!(s instanceof ze.Expandable))throw new Error("unreachable: expected growable");let a=new gd(null,0,o.elem.id),u=new co(r-t+o.initialConsume,this._endpoint),l=await this._processPromptRenderPiece(u,{node:a,ctor:this._ctor,props:{},children:[],path:[this._ctor]},s,await s.render(void 0,{tokenBudget:u.tokenBudget,endpoint:this._endpoint,countTokens:(f,h)=>this._tokenizer.tokenLength(typeof f=="string"?{type:fo.Raw.ChatCompletionContentPartKind.Text,text:f}:f,h)}),void 0,i),p=a.materialize();if(!e.replaceNode(o.elem.id,p))throw new Error("unreachable: could not find old element to replace");if(t-=o.initialConsume,t+=l,t>=r)break}return!0}_handlePromptChildren(e,t,r,i,o){if(e.ctor===ze.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,t);return}let s=[];for(let a of t){if(a.kind==="literal"){e.node.appendStringChild(a.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(a.kind==="intrinsic"){this._handleIntrinsic(e.node,a.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...a.props},md(a.children));continue}let u=e.node.createChild();s.push({node:u,ctor:a.ctor,props:a.props,children:a.children,path:[...e.path,a.ctor]})}return this._processPromptPieces(r,s,i,o)}_handleIntrinsic(e,t,r,i,o){switch(t){case"meta":return this._handleIntrinsicMeta(e,r,i);case"br":return this._handleIntrinsicLineBreak(e,r,i,r.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,r,i);case"references":return this._handleIntrinsicReferences(e,r,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,r,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,r.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,r,i,o);case"opaque":return this._handleIntrinsicOpaque(e,r,o)}throw new Error(`Unknown intrinsic element ${t}!`)}_handleIntrinsicCacheBreakpoint(e,t,r,i){if(r.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(t,i)}_handleIntrinsicMeta(e,t,r){if(r.length>0)throw new Error("<meta /> must not have children!");t.local?e.addMetadata(t.value):this._root.addMetadata(t.value)}_handleIntrinsicLineBreak(e,t,r,i,o){if(r.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicOpaque(e,t,r){e.appendOpaque(t.value,t.tokenUsage,t.priority,r)}_handleIntrinsicElementJSON(e,t){let r=e.appendPieceJSON(t.node);if(this.tracer?.includeInEpoch)for(let i of r.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,t,r){if(r.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...t.value)}_handleIntrinsicReferences(e,t,r){if(r.length>0)throw new Error("<reference /> must not have children!");for(let i of t.value)e.addMetadata(new Kn(i))}_handleIntrinsicIgnoredFiles(e,t,r){if(r.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...t.value)}_handleExtrinsicTextChunkChildren(e,t,r,i){let o=[],s=[];for(let a of i){if(a.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(a.kind==="literal"&&o.push(a.value),a.kind==="intrinsic")if(a.name==="br")o.push(`
`);else if(a.name==="references")for(let u of a.props.value)s.push(new Kn(u));else this._handleIntrinsic(e,a.name,a.props,md(a.children),t.childIndex)}e.appendStringChild(o.join(""),r?.priority??Number.MAX_SAFE_INTEGER,s,t.childIndex,!0)}};Ss.PromptRenderer=gh;async function UE(n,e,t,r){let i=0;if((0,ze.isChatMessagePromptElement)(t)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await n.countMessageTokens((0,fo.toMode)(n.mode,o))}for(let o of r)o.kind==="literal"&&(i+=await n.tokenLength({type:fo.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}function ty(n,e=[]){return typeof n>"u"||typeof n=="boolean"?[]:(typeof n=="string"||typeof n=="number"?e.push(new xh(String(n))):BE(n)?md(n.children,e):VE(n)?md(n,e):typeof n.ctor=="string"?e.push(new bh(n.ctor,n.props,n.children)):e.push(new vh(n.ctor,n.props,n.children)),e)}function md(n,e=[]){for(let t of n)ty(t,e);return e}var bh=class{name;props;children;kind="intrinsic";constructor(e,t,r){this.name=e,this.props=t,this.children=r}},vh=class{ctor;props;children;kind="extrinsic";constructor(e,t,r){this.ctor=e,this.props=t,this.children=r}},xh=class{value;priority;kind="literal";constructor(e,t){this.value=e,this.priority=t}},hd=class n{parent;childIndex;value;tokenUsage;priority;static fromJSON(e,t,r){return new n(e,t,r.value,r.tokenUsage,r.priority)}kind=2;constructor(e,t,r,i,o){this.parent=e,this.childIndex=t,this.value=r,this.tokenUsage=i,this.priority=o}materialize(e){return new po.MaterializedChatMessageOpaque(e,{type:fo.Raw.ChatCompletionContentPartKind.Opaque,value:this.value,tokenUsage:this.tokenUsage},this.priority)}toJSON(){return{type:3,value:this.value,tokenUsage:this.tokenUsage,priority:this.priority}}},co=class{tokenBudget;endpoint;_consumed=0;constructor(e,t){this.tokenBudget=e,this.endpoint=t}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},gd=class n{parent;childIndex;id;static _nextId=0;static fromJSON(e,t,r){let i=new n(null,e);switch(i._metadata=t.references?.map(o=>new Kn(_h.PromptReference.fromJSON(o)))??[],i._children=t.children.map((o,s)=>{switch(o.type){case 1:return n.fromJSON(s,o,r);case 2:return wu.fromJSON(i,s,o);case 3:return hd.fromJSON(i,s,o);default:}}).filter(bd),t.ctor){case 1:i._objFlags=t.flags??0,i._obj=new ze.BaseChatMessage(t.props);break;case 2:{if(t.keepWithId!==void 0){let o=r.get(t.keepWithId);o||(o=(0,ze.useKeepWith)(),r.set(t.keepWithId,o)),i._obj=new o(t.props||{})}else i._obj=new ze.LogicalWrapper(t.props||{});i._objFlags=t.flags??0;break}case 3:i._obj=new ze.Image(t.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,t,r=n._nextId++){this.parent=e,this.childIndex=t,this.id=r}setObj(e){this._obj=e,this._obj instanceof ze.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof ze.Chunk&&(this._objFlags|=2),this._obj instanceof ze.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new n(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let t=n.fromJSON(this._children.length,e,new Map);return this._children.push(t),t}appendStringChild(e,t,r,i=this._children.length,o=!1){this._children.push(new wu(this,i,e,t,r,o))}appendLineBreak(e,t=this._children.length){this._children.push(new wu(this,t,`
`,e))}appendOpaque(e,t,r,i=this._children.length){this._children.push(new hd(this,i,e,t,r))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((t,r)=>t.childIndex-r.childIndex).map(t=>t.toJSON()).filter(bd),props:{},references:this._metadata.filter(t=>t instanceof Kn).map(t=>t.reference.toJSON())};if(this._obj&&(e.props=hh(this._obj.props,ME.jsonRetainedProps)),this._obj instanceof ze.BaseChatMessage)e.ctor=1,Object.assign(e.props,hh(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof ze.Image)return{...e,ctor:3,props:{...e.props,...hh(this._obj.props,["src","detail"])}};this._obj instanceof ze.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((t,r)=>t.childIndex-r.childIndex),this._obj instanceof ze.Image)return new po.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof ze.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new po.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof ze.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof ze.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,t=>this._children.map(r=>r.materialize(t)))}else{let t=new po.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),r=>this._children.map(i=>i.materialize(r)),this._metadata,this._objFlags);return this._obj instanceof ze.AbstractKeepWith&&(t.keepWithId=this._obj.id),t}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,t=this._children.length){if(!(this._obj instanceof ze.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new yh({type:fo.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},t))}*elements(){yield this;for(let e of this._children)e instanceof n&&(yield*e.elements())}},yh=class{part;childIndex;constructor(e,t){this.part=e,this.childIndex=t}toJSON(){}materialize(e){return new po.MaterializedChatMessageBreakpoint(e,this.part)}},wu=class n{parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,t,r){return new n(e,t,r.text,r.priority,r.references?.map(i=>new Kn(_h.PromptReference.fromJSON(i))),r.lineBreakBefore)}kind=2;constructor(e,t,r,i,o,s=!1){this.parent=e,this.childIndex=t,this.text=r,this.priority=i,this.metadata=o,this.lineBreakBefore=s}materialize(e){let t=this.lineBreakBefore?1:this.childIndex===0?2:0;return new po.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],t)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof Kn).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function BE(n){return(typeof n.ctor=="function"&&n.ctor.isFragment)??!1}function bd(n){return n!==void 0}var Th=class extends _h.PromptMetadata{},Kn=class extends Th{reference;constructor(e){super(),this.reference=e}};function VE(n){return!!n&&typeof n[Symbol.iterator]=="function"}function hh(n,e){let t={};for(let r of e)n.hasOwnProperty(r)&&(t[r]=n[r]);return t}function ny(n){return n.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}var Zx=new WeakSet;async function ey(n,e){try{return await e()}catch(t){throw t instanceof Error&&!Zx.has(t)&&t.constructor.name!=="CancellationError"&&(Zx.add(t),t.message+=` (at tsx element ${ny(n.path)})`),t}}});var ry=ve(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.VSCodeTokenizer=void 0;var Ih=oi(),wh=class{countTokens;mode=Ih.OutputMode.VSCode;constructor(e,t){if(this.countTokens=e,t!==Ih.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,t){return e.type===Ih.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,t):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};vd.VSCodeTokenizer=wh});var iy=ve(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.tracerCss=Rs.tracerSrc=void 0;Rs.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&(131072&_.__u)==0&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&(131072&u.__u)==0)return n;if(o>(u!=null&&(131072&u.__u)==0?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';Rs.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var ly=ve(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.HTMLTracer=void 0;var oy=iy(),mo=zm(),qE=oi(),Ch=class{traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return Eh.create({epochs:this.epochs,traceData:ay(this.traceData)})}serveRouter(e){return new xd({baseAddress:e,epochs:this.epochs,traceData:ay(this.traceData)})}};yd.HTMLTracer=Ch;var xd=class{opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,t){let r=e,i=t,o=new URL(r.url||"/","http://localhost"),s=`/${this.serverToken}`;switch(o.pathname){case s:case`${s}/`:this.onRoot(o,r,i);break;case`${s}/regen`:this.onRegen(o,r,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:t}=this.opts;return`<body>
			<style>${oy.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(t)};
				const DEFAULT_MODEL = ${JSON.stringify(await sy(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${oy.tracerSrc}
			<\/script>
		</body>`}async onRegen(e,t,r){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),s=await i.renderTree(o),a=await sy(i.tokenizer,s),u=JSON.stringify(a);r.setHeader("Content-Type","application/json"),r.setHeader("Content-Length",Buffer.byteLength(u)),r.end(u)}onRoot(e,t,r){this.getHTML().then(i=>{r.setHeader("Content-Type","text/html"),r.setHeader("Content-Length",Buffer.byteLength(i)),r.end(i)})}},Eh=class n extends xd{server;static async create(e){let{createServer:t}=await Promise.resolve().then(()=>require("http")),r=t((s,a)=>{try{o.route(s,a)||(a.statusCode=404,a.end("Not Found"))}catch(u){a.statusCode=500,a.end(String(u))}}),i=await new Promise((s,a)=>{r.listen(0,"127.0.0.1",()=>s(r.address().port)).on("error",a)}),o=new n({...e,baseAddress:`http://127.0.0.1:${i}`},r);return o}constructor(e,t){super(e),this.server=t}dispose(){this.server.closeAllConnections(),this.server.close()}};async function sy(n,e){return{container:await uy(n,e.container,!1),removed:e.removed,budget:e.budget}}async function uy(n,e,t){let r={metadata:e.metadata.map(WE),priority:e.priority};if(e instanceof mo.MaterializedChatMessageTextChunk)return{...r,type:2,value:e.text,tokens:await e.upperBoundTokenCount(n)};if(e instanceof mo.MaterializedChatMessageImage)return{...r,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(n)};if(e instanceof mo.MaterializedChatMessageOpaque||e instanceof mo.MaterializedChatMessageBreakpoint)return;{let i={...r,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>uy(n,o,t||e instanceof mo.MaterializedChatMessage)))).filter(o=>!!o),tokens:t?await e.upperBoundTokenCount(n):await e.tokenCount(n)};if(e instanceof mo.GenericMaterializedContainer)return{...i,type:0};if(e instanceof mo.MaterializedChatMessage){let o=e.text.filter(s=>typeof s=="string").join("").trim();return{...i,type:1,role:qE.Raw.ChatRole.display(e.role),text:o}}}$E(e)}function $E(n){throw new Error("unreachable")}function WE(n){return{name:n.constructor.name,value:JSON.stringify(n)}}var ay=n=>{if(n===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return n}});var dy=ve(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0})});var fy=ve(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0})});var hy=ve(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0})});var vu=ve(Le=>{"use strict";var jE=Le&&Le.__createBinding||(Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]})),ho=Le&&Le.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&jE(e,n,t)};Object.defineProperty(Le,"__esModule",{value:!0});Le.contentType=Le.PromptRenderer=Le.MetadataMap=Le.PromptElement=Le.JSONTree=void 0;Le.renderPrompt=HE;Le.renderElementJSON=KE;var Sh=oi(),gy=kh(),GE=ry();ho(ly(),Le);Le.JSONTree=qm();ho(oi(),Le);ho(ih(),Le);ho(mh(),Le);ho(dy(),Le);ho(fy(),Le);ho(hy(),Le);var zE=Km();Object.defineProperty(Le,"PromptElement",{enumerable:!0,get:function(){return zE.PromptElement}});var by=kh();Object.defineProperty(Le,"MetadataMap",{enumerable:!0,get:function(){return by.MetadataMap}});Object.defineProperty(Le,"PromptRenderer",{enumerable:!0,get:function(){return by.PromptRenderer}});async function HE(n,e,t,r,i,o,s=Sh.OutputMode.VSCode){let a="countTokens"in r?new GE.VSCodeTokenizer((d,f)=>r.countTokens(d,f),s):r,u=new gy.PromptRenderer(t,n,e,a),l=await u.render(i,o),p=u.getUsedContext();return{...l,usedContext:p}}Le.contentType="application/vnd.codechat.prompt+json.1";function KE(n,e,t,r){return new gy.PromptRenderer({modelMaxPromptTokens:t?.tokenBudget??Number.MAX_SAFE_INTEGER},n,e,{mode:Sh.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,s){return o.type===Sh.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(t?.countTokens(o.text,s)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(r)}});var W3={};Vt(W3,{activate:()=>$3});module.exports=Ar(W3);async function t_(n){if(n.protocol==="http:"||n.protocol==="https:")return await(await fetch(n)).text();throw new Error("Unsupported protocol")}function n_(n){throw new Error("Unsupported in browser")}var ba;function w0(n){if("contents"in n){typeof n.contents=="string"?ba=JSON.parse(n.contents):ba=n.contents;return}if("fsPath"in n){let e=n_(n.fsPath),t=JSON.parse(e);ba=I0(t)?t.contents.bundle:t;return}if(n.uri){let e=n.uri;return typeof n.uri=="string"&&(e=new URL(n.uri)),new Promise((t,r)=>{t_(e).then(i=>{try{let o=JSON.parse(i);ba=I0(o)?o.contents.bundle:o,t()}catch(o){r(o)}}).catch(i=>{r(i)})})}}function Pr(...n){let e=n[0],t,r,i;if(typeof e=="string")t=e,r=e,n.splice(0,1),i=!n||typeof n[0]!="object"?n:n[0];else if(e instanceof Array){let s=n.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let u=1;u<e.length;u++)a+=`{${u-1}}`+e[u];return Pr(a,...s)}else r=e.message,t=r,e.comment&&e.comment.length>0&&(t+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=ba?.[t];return o?typeof o=="string"?zu(o,i):o.comment?zu(o.message,i):zu(r,i):zu(r,i)}var r_=/{([^}]+)}/g;function zu(n,e){return Object.keys(e).length===0?n:n.replace(r_,(t,r)=>e[r]??t)}function I0(n){return typeof n?.contents?.bundle=="object"&&typeof n?.version=="string"}var zt=require("vscode");var mn;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function r(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=r})(mn||={});var _e=_("instantiationService");function i_(n,e,t){e[mn.DI_TARGET]===e?e[mn.DI_DEPENDENCIES].push({id:n,index:t}):(e[mn.DI_DEPENDENCIES]=[{id:n,index:t}],e[mn.DI_TARGET]=e)}function _(n){if(mn.serviceIds.has(n))return mn.serviceIds.get(n);let e=function(t,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i_(e,t,i)};return e.toString=()=>n,mn.serviceIds.set(n,e),e}Ai();we();Wt();pe();Vr();Vr();function wa(){return globalThis._VSCODE_NLS_LANGUAGE}var U8=wa()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;var Vo="en",sl=!1,al=!1,Ca=!1,P_=!1,X0=!1,rf=!1,L_=!1,O_=!1,N_=!1,F_=!1,rl,il=Vo,Q0=Vo,M_,ir,or=globalThis,St;typeof or.vscode<"u"&&typeof or.vscode.process<"u"?St=or.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(St=process);var Y0=typeof St?.versions?.electron=="string",U_=Y0&&St?.type==="renderer";if(typeof St=="object"){sl=St.platform==="win32",al=St.platform==="darwin",Ca=St.platform==="linux",P_=Ca&&!!St.env.SNAP&&!!St.env.SNAP_REVISION,L_=Y0,N_=!!St.env.CI||!!St.env.BUILD_ARTIFACTSTAGINGDIRECTORY||!!St.env.GITHUB_WORKSPACE,rl=Vo,il=Vo;let n=St.env.VSCODE_NLS_CONFIG;if(n)try{let e=JSON.parse(n);rl=e.userLocale,Q0=e.osLocale,il=e.resolvedLanguage||Vo,M_=e.languagePack?.translationsConfigFile}catch{}X0=!0}else typeof navigator=="object"&&!U_?(ir=navigator.userAgent,sl=ir.indexOf("Windows")>=0,al=ir.indexOf("Macintosh")>=0,O_=(ir.indexOf("Macintosh")>=0||ir.indexOf("iPad")>=0||ir.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Ca=ir.indexOf("Linux")>=0,F_=ir?.indexOf("Mobi")>=0,rf=!0,il=wa()||Vo,rl=navigator.language.toLowerCase(),Q0=rl):console.error("Unable to resolve platform.");var ol=0;al?ol=1:sl?ol=3:Ca&&(ol=2);var jt=sl,Z0=al,ul=Ca;var e1=X0;var t1=rf,B_=rf&&typeof or.importScripts=="function",n1=B_?or.origin:void 0;var r1=ol,Un=ir,qr=il,V_;(r=>{function n(){return qr}r.value=n;function e(){return qr.length===2?qr==="en":qr.length>=3?qr[0]==="e"&&qr[1]==="n"&&qr[2]==="-":!1}r.isDefaultVariant=e;function t(){return qr==="en"}r.isDefault=t})(V_||={});var q_=typeof or.postMessage=="function"&&!or.importScripts,i1=(()=>{if(q_){let n=[];or.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let r=0,i=n.length;r<i;r++){let o=n[r];if(o.id===t.data.vscodeScheduleAsyncWork){n.splice(r,1),o.callback();return}}});let e=0;return t=>{let r=++e;n.push({id:r,callback:t}),or.postMessage({vscodeScheduleAsyncWork:r},"*")}}return n=>setTimeout(n)})();var $_=!!(Un&&Un.indexOf("Chrome")>=0),V8=!!(Un&&Un.indexOf("Firefox")>=0),q8=!!(!$_&&Un&&Un.indexOf("Safari")>=0),$8=!!(Un&&Un.indexOf("Edg/")>=0),W8=!!(Un&&Un.indexOf("Android")>=0);var Pi,of=globalThis.vscode;if(typeof of<"u"&&typeof of.process<"u"){let n=of.process;Pi={get platform(){return n.platform},get arch(){return n.arch},get env(){return n.env},cwd(){return n.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Pi={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Pi={get platform(){return jt?"win32":Z0?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Ea=Pi.cwd,tn=Pi.env,ll=Pi.platform,z8=Pi.arch;var G_=65,z_=97,H_=90,K_=122,Li=46,ut=47,Rt=92,sr=58,J_=63,cl=class extends Error{constructor(e,t,r){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${i} of type ${t}`;s+=`. Received type ${typeof r}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function Q_(n,e){if(n===null||typeof n!="object")throw new cl(e,"Object",n)}function Ve(n,e){if(typeof n!="string")throw new cl(e,"string",n)}var Dt=ll==="win32";function te(n){return n===ut||n===Rt}function sf(n){return n===ut}function ar(n){return n>=G_&&n<=H_||n>=z_&&n<=K_}function dl(n,e,t,r){let i="",o=0,s=-1,a=0,u=0;for(let l=0;l<=n.length;++l){if(l<n.length)u=n.charCodeAt(l);else{if(r(u))break;u=ut}if(r(u)){if(!(s===l-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Li||i.charCodeAt(i.length-2)!==Li){if(i.length>2){let p=i.lastIndexOf(t);p===-1?(i="",o=0):(i=i.slice(0,p),o=i.length-1-i.lastIndexOf(t)),s=l,a=0;continue}else if(i.length!==0){i="",o=0,s=l,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${n.slice(s+1,l)}`:i=n.slice(s+1,l),o=l-s-1;s=l,a=0}else u===Li&&a!==-1?++a:a=-1}return i}function X_(n){return n?`${n[0]==="."?"":"."}${n}`:""}function o1(n,e){Q_(e,"pathObject");let t=e.dir||e.root,r=e.base||`${e.name||""}${X_(e.ext)}`;return t?t===e.root?`${t}${r}`:`${t}${n}${r}`:r}var qe={resolve(...n){let e="",t="",r=!1;for(let i=n.length-1;i>=-1;i--){let o;if(i>=0){if(o=n[i],Ve(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=Ea():(o=tn[`=${e}`]||Ea(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Rt)&&(o=`${e}\\`));let s=o.length,a=0,u="",l=!1,p=o.charCodeAt(0);if(s===1)te(p)&&(a=1,l=!0);else if(te(p))if(l=!0,te(o.charCodeAt(1))){let d=2,f=d;for(;d<s&&!te(o.charCodeAt(d));)d++;if(d<s&&d!==f){let h=o.slice(f,d);for(f=d;d<s&&te(o.charCodeAt(d));)d++;if(d<s&&d!==f){for(f=d;d<s&&!te(o.charCodeAt(d));)d++;(d===s||d!==f)&&(u=`\\\\${h}\\${o.slice(f,d)}`,a=d)}}}else a=1;else ar(p)&&o.charCodeAt(1)===sr&&(u=o.slice(0,2),a=2,s>2&&te(o.charCodeAt(2))&&(l=!0,a=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(r){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,r=l,l&&e.length>0)break}return t=dl(t,!r,"\\",te),r?`${e}\\${t}`:`${e}${t}`||"."},normalize(n){Ve(n,"path");let e=n.length;if(e===0)return".";let t=0,r,i=!1,o=n.charCodeAt(0);if(e===1)return sf(o)?"\\":n;if(te(o))if(i=!0,te(n.charCodeAt(1))){let a=2,u=a;for(;a<e&&!te(n.charCodeAt(a));)a++;if(a<e&&a!==u){let l=n.slice(u,a);for(u=a;a<e&&te(n.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!te(n.charCodeAt(a));)a++;if(a===e)return`\\\\${l}\\${n.slice(u)}\\`;a!==u&&(r=`\\\\${l}\\${n.slice(u,a)}`,t=a)}}}else t=1;else ar(o)&&n.charCodeAt(1)===sr&&(r=n.slice(0,2),t=2,e>2&&te(n.charCodeAt(2))&&(i=!0,t=3));let s=t<e?dl(n.slice(t),!i,"\\",te):"";if(s.length===0&&!i&&(s="."),s.length>0&&te(n.charCodeAt(e-1))&&(s+="\\"),!i&&r===void 0&&n.includes(":")){if(s.length>=2&&ar(s.charCodeAt(0))&&s.charCodeAt(1)===sr)return`.\\${s}`;let a=n.indexOf(":");do if(a===e-1||te(n.charCodeAt(a+1)))return`.\\${s}`;while((a=n.indexOf(":",a+1))!==-1)}return r===void 0?i?`\\${s}`:s:i?`${r}\\${s}`:`${r}${s}`},isAbsolute(n){Ve(n,"path");let e=n.length;if(e===0)return!1;let t=n.charCodeAt(0);return te(t)||e>2&&ar(t)&&n.charCodeAt(1)===sr&&te(n.charCodeAt(2))},join(...n){if(n.length===0)return".";let e,t;for(let o=0;o<n.length;++o){let s=n[o];Ve(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof t=="string"&&te(t.charCodeAt(0))){++i;let o=t.length;o>1&&te(t.charCodeAt(1))&&(++i,o>2&&(te(t.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&te(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return qe.normalize(e)},relative(n,e){if(Ve(n,"from"),Ve(e,"to"),n===e)return"";let t=qe.resolve(n),r=qe.resolve(e);if(t===r||(n=t.toLowerCase(),e=r.toLowerCase(),n===e))return"";if(t.length!==n.length||r.length!==e.length){let m=t.split("\\"),g=r.split("\\");m[m.length-1]===""&&m.pop(),g[g.length-1]===""&&g.pop();let x=m.length,I=g.length,T=x<I?x:I,b;for(b=0;b<T&&m[b].toLowerCase()===g[b].toLowerCase();b++);return b===0?r:b===T?I>T?g.slice(b).join("\\"):x>T?"..\\".repeat(x-1-b)+"..":"":"..\\".repeat(x-b)+g.slice(b).join("\\")}let i=0;for(;i<n.length&&n.charCodeAt(i)===Rt;)i++;let o=n.length;for(;o-1>i&&n.charCodeAt(o-1)===Rt;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===Rt;)a++;let u=e.length;for(;u-1>a&&e.charCodeAt(u-1)===Rt;)u--;let l=u-a,p=s<l?s:l,d=-1,f=0;for(;f<p;f++){let m=n.charCodeAt(i+f);if(m!==e.charCodeAt(a+f))break;m===Rt&&(d=f)}if(f!==p){if(d===-1)return r}else{if(l>p){if(e.charCodeAt(a+f)===Rt)return r.slice(a+f+1);if(f===2)return r.slice(a+f)}s>p&&(n.charCodeAt(i+f)===Rt?d=f:f===2&&(d=3)),d===-1&&(d=0)}let h="";for(f=i+d+1;f<=o;++f)(f===o||n.charCodeAt(f)===Rt)&&(h+=h.length===0?"..":"\\..");return a+=d,h.length>0?`${h}${r.slice(a,u)}`:(r.charCodeAt(a)===Rt&&++a,r.slice(a,u))},toNamespacedPath(n){if(typeof n!="string"||n.length===0)return n;let e=qe.resolve(n);if(e.length<=2)return n;if(e.charCodeAt(0)===Rt){if(e.charCodeAt(1)===Rt){let t=e.charCodeAt(2);if(t!==J_&&t!==Li)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ar(e.charCodeAt(0))&&e.charCodeAt(1)===sr&&e.charCodeAt(2)===Rt)return`\\\\?\\${e}`;return e},dirname(n){Ve(n,"path");let e=n.length;if(e===0)return".";let t=-1,r=0,i=n.charCodeAt(0);if(e===1)return te(i)?n:".";if(te(i)){if(t=r=1,te(n.charCodeAt(1))){let a=2,u=a;for(;a<e&&!te(n.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&te(n.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!te(n.charCodeAt(a));)a++;if(a===e)return n;a!==u&&(t=r=a+1)}}}}else ar(i)&&n.charCodeAt(1)===sr&&(t=e>2&&te(n.charCodeAt(2))?3:2,r=t);let o=-1,s=!0;for(let a=e-1;a>=r;--a)if(te(n.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return n.slice(0,o)},basename(n,e){e!==void 0&&Ve(e,"suffix"),Ve(n,"path");let t=0,r=-1,i=!0,o;if(n.length>=2&&ar(n.charCodeAt(0))&&n.charCodeAt(1)===sr&&(t=2),e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let s=e.length-1,a=-1;for(o=n.length-1;o>=t;--o){let u=n.charCodeAt(o);if(te(u)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}for(o=n.length-1;o>=t;--o)if(te(n.charCodeAt(o))){if(!i){t=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":n.slice(t,r)},extname(n){Ve(n,"path");let e=0,t=-1,r=0,i=-1,o=!0,s=0;n.length>=2&&n.charCodeAt(1)===sr&&ar(n.charCodeAt(0))&&(e=r=2);for(let a=n.length-1;a>=e;--a){let u=n.charCodeAt(a);if(te(u)){if(!o){r=a+1;break}continue}i===-1&&(o=!1,i=a+1),u===Li?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===r+1?"":n.slice(t,i)},format:o1.bind(null,"\\"),parse(n){Ve(n,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;let t=n.length,r=0,i=n.charCodeAt(0);if(t===1)return te(i)?(e.root=e.dir=n,e):(e.base=e.name=n,e);if(te(i)){if(r=1,te(n.charCodeAt(1))){let d=2,f=d;for(;d<t&&!te(n.charCodeAt(d));)d++;if(d<t&&d!==f){for(f=d;d<t&&te(n.charCodeAt(d));)d++;if(d<t&&d!==f){for(f=d;d<t&&!te(n.charCodeAt(d));)d++;d===t?r=d:d!==f&&(r=d+1)}}}}else if(ar(i)&&n.charCodeAt(1)===sr){if(t<=2)return e.root=e.dir=n,e;if(r=2,te(n.charCodeAt(2))){if(t===3)return e.root=e.dir=n,e;r=3}}r>0&&(e.root=n.slice(0,r));let o=-1,s=r,a=-1,u=!0,l=n.length-1,p=0;for(;l>=r;--l){if(i=n.charCodeAt(l),te(i)){if(!u){s=l+1;break}continue}a===-1&&(u=!1,a=l+1),i===Li?o===-1?o=l:p!==1&&(p=1):o!==-1&&(p=-1)}return a!==-1&&(o===-1||p===0||p===1&&o===a-1&&o===s+1?e.base=e.name=n.slice(s,a):(e.name=n.slice(s,o),e.base=n.slice(s,a),e.ext=n.slice(o,a))),s>0&&s!==r?e.dir=n.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Y_=(()=>{if(Dt){let n=/\\/g;return()=>{let e=Ea().replace(n,"/");return e.slice(e.indexOf("/"))}}return()=>Ea()})(),re={resolve(...n){let e="",t=!1;for(let r=n.length-1;r>=0&&!t;r--){let i=n[r];Ve(i,`paths[${r}]`),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===ut)}if(!t){let r=Y_();e=`${r}/${e}`,t=r.charCodeAt(0)===ut}return e=dl(e,!t,"/",sf),t?`/${e}`:e.length>0?e:"."},normalize(n){if(Ve(n,"path"),n.length===0)return".";let e=n.charCodeAt(0)===ut,t=n.charCodeAt(n.length-1)===ut;return n=dl(n,!e,"/",sf),n.length===0?e?"/":t?"./":".":(t&&(n+="/"),e?`/${n}`:n)},isAbsolute(n){return Ve(n,"path"),n.length>0&&n.charCodeAt(0)===ut},join(...n){if(n.length===0)return".";let e=[];for(let t=0;t<n.length;++t){let r=n[t];Ve(r,"path"),r.length>0&&e.push(r)}return e.length===0?".":re.normalize(e.join("/"))},relative(n,e){if(Ve(n,"from"),Ve(e,"to"),n===e||(n=re.resolve(n),e=re.resolve(e),n===e))return"";let t=1,r=n.length,i=r-t,o=1,s=e.length-o,a=i<s?i:s,u=-1,l=0;for(;l<a;l++){let d=n.charCodeAt(t+l);if(d!==e.charCodeAt(o+l))break;d===ut&&(u=l)}if(l===a)if(s>a){if(e.charCodeAt(o+l)===ut)return e.slice(o+l+1);if(l===0)return e.slice(o+l)}else i>a&&(n.charCodeAt(t+l)===ut?u=l:l===0&&(u=0));let p="";for(l=t+u+1;l<=r;++l)(l===r||n.charCodeAt(l)===ut)&&(p+=p.length===0?"..":"/..");return`${p}${e.slice(o+u)}`},toNamespacedPath(n){return n},dirname(n){if(Ve(n,"path"),n.length===0)return".";let e=n.charCodeAt(0)===ut,t=-1,r=!0;for(let i=n.length-1;i>=1;--i)if(n.charCodeAt(i)===ut){if(!r){t=i;break}}else r=!1;return t===-1?e?"/":".":e&&t===1?"//":n.slice(0,t)},basename(n,e){e!==void 0&&Ve(e,"suffix"),Ve(n,"path");let t=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e===n)return"";let s=e.length-1,a=-1;for(o=n.length-1;o>=0;--o){let u=n.charCodeAt(o);if(u===ut){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}for(o=n.length-1;o>=0;--o)if(n.charCodeAt(o)===ut){if(!i){t=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":n.slice(t,r)},extname(n){Ve(n,"path");let e=-1,t=0,r=-1,i=!0,o=0;for(let s=n.length-1;s>=0;--s){let a=n[s];if(a==="/"){if(!i){t=s+1;break}continue}r===-1&&(i=!1,r=s+1),a==="."?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===t+1?"":n.slice(e,r)},format:o1.bind(null,"/"),parse(n){Ve(n,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;let t=n.charCodeAt(0)===ut,r;t?(e.root="/",r=1):r=0;let i=-1,o=0,s=-1,a=!0,u=n.length-1,l=0;for(;u>=r;--u){let p=n.charCodeAt(u);if(p===ut){if(!a){o=u+1;break}continue}s===-1&&(a=!1,s=u+1),p===Li?i===-1?i=u:l!==1&&(l=1):i!==-1&&(l=-1)}if(s!==-1){let p=o===0&&t?1:o;i===-1||l===0||l===1&&i===s-1&&i===o+1?e.base=e.name=n.slice(p,s):(e.name=n.slice(p,i),e.base=n.slice(p,s),e.ext=n.slice(i,s))}return o>0?e.dir=n.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};re.win32=qe.win32=qe;re.posix=qe.posix=re;var af=Dt?qe.normalize:re.normalize,uf=Dt?qe.isAbsolute:re.isAbsolute,Sa=Dt?qe.join:re.join,s1=Dt?qe.resolve:re.resolve,a1=Dt?qe.relative:re.relative,qo=Dt?qe.dirname:re.dirname,bn=Dt?qe.basename:re.basename,u1=Dt?qe.extname:re.extname,H8=Dt?qe.format:re.format,K8=Dt?qe.parse:re.parse,J8=Dt?qe.toNamespacedPath:re.toNamespacedPath,vn=Dt?qe.sep:re.sep,Ra=Dt?qe.delimiter:re.delimiter;Je();qt();function $r(n){return n===47||n===92}function yf(n){return n.replace(/[\\/]/g,re.sep)}function _1(n){return n.indexOf("/")===-1&&(n=yf(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}function Tf(n,e=re.sep){if(!n)return"";let t=n.length,r=n.charCodeAt(0);if($r(r)){if($r(n.charCodeAt(1))&&!$r(n.charCodeAt(2))){let o=3,s=o;for(;o<t&&!$r(n.charCodeAt(o));o++);if(s!==o&&!$r(n.charCodeAt(o+1))){for(o+=1;o<t;o++)if($r(n.charCodeAt(o)))return n.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(k1(r)&&n.charCodeAt(1)===58)return $r(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let i=n.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if($r(n.charCodeAt(i)))return n.slice(0,i+1)}return""}function Oa(n,e,t,r=vn){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(t){if(!bl(n,e))return!1;if(e.length===n.length)return!0;let o=e.length;return e.charAt(e.length-1)===r&&o--,n.charAt(o)===r}return e.charAt(e.length-1)!==r&&(e+=r),n.indexOf(e)===0}function k1(n){return n>=65&&n<=90||n>=97&&n<=122}function I1(n,e=jt){return e?k1(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}we();Je();Vr();var eI=/^\w[\w\d+.-]*$/,tI=/^\//,nI=/^\/\//;function rI(n,e){if(!n.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${n.authority}", path: "${n.path}", query: "${n.query}", fragment: "${n.fragment}"}`);if(n.scheme&&!eI.test(n.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(n.path){if(n.authority){if(!tI.test(n.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(nI.test(n.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function iI(n,e){return!n&&!e?"file":n}function oI(n,e){switch(n){case"https":case"http":case"file":e?e[0]!==xn&&(e=xn+e):e=xn;break}return e}var Ce="",xn="/",sI=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,W=class n{static isUri(e){return e instanceof n?!0:!e||typeof e!="object"?!1:typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function"}constructor(e,t,r,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Ce,this.authority=e.authority||Ce,this.path=e.path||Ce,this.query=e.query||Ce,this.fragment=e.fragment||Ce):(this.scheme=iI(e,s),this.authority=t||Ce,this.path=oI(this.scheme,r||Ce),this.query=i||Ce,this.fragment=o||Ce,rI(this,s))}get fsPath(){return Na(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:i,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=Ce),r===void 0?r=this.authority:r===null&&(r=Ce),i===void 0?i=this.path:i===null&&(i=Ce),o===void 0?o=this.query:o===null&&(o=Ce),s===void 0?s=this.fragment:s===null&&(s=Ce),t===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new Wr(t,r,i,o,s)}static parse(e,t=!1){let r=sI.exec(e);return r?new Wr(r[2]||Ce,vl(r[4]||Ce),vl(r[5]||Ce),vl(r[7]||Ce),vl(r[9]||Ce),t):new Wr(Ce,Ce,Ce,Ce,Ce)}static file(e){let t=Ce;if(jt&&(e=e.replace(/\\/g,xn)),e[0]===xn&&e[1]===xn){let r=e.indexOf(xn,2);r===-1?(t=e.substring(2),e=xn):(t=e.substring(2,r),e=e.substring(r)||xn)}return new Wr("file",t,e,Ce,Ce)}static from(e,t){return new Wr(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return jt&&e.scheme==="file"?r=n.file(qe.join(Na(e,!0),...t)).path:r=re.join(e.path,...t),e.with({path:r})}toString(e=!1){return _f(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof n)return e;{let t=new Wr(e);return t._formatted=e.external??null,t._fsPath=e._sep===E1?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var E1=jt?1:void 0,Wr=class extends W{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Na(this,!1)),this._fsPath}toString(t=!1){return t?_f(this,!0):(this._formatted||(this._formatted=_f(this,!1)),this._formatted)}toJSON(){let t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=E1),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}},S1={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function w1(n,e,t){let r,i=-1;for(let o=0;o<n.length;o++){let s=n.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)i!==-1&&(r+=encodeURIComponent(n.substring(i,o)),i=-1),r!==void 0&&(r+=n.charAt(o));else{r===void 0&&(r=n.substr(0,o));let a=S1[s];a!==void 0?(i!==-1&&(r+=encodeURIComponent(n.substring(i,o)),i=-1),r+=a):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(n.substring(i))),r!==void 0?r:n}function aI(n){let e;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r===35||r===63?(e===void 0&&(e=n.substr(0,t)),e+=S1[r]):e!==void 0&&(e+=n[t])}return e!==void 0?e:n}function Na(n,e){let t;return n.authority&&n.path.length>1&&n.scheme==="file"?t=`//${n.authority}${n.path}`:n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?e?t=n.path.substr(1):t=n.path[1].toLowerCase()+n.path.substr(2):t=n.path,jt&&(t=t.replace(/\//g,"\\")),t}function _f(n,e){let t=e?aI:w1,r="",{scheme:i,authority:o,path:s,query:a,fragment:u}=n;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=xn,r+=xn),o){let l=o.indexOf("@");if(l!==-1){let p=o.substr(0,l);o=o.substr(l+1),l=p.lastIndexOf(":"),l===-1?r+=t(p,!1,!1):(r+=t(p.substr(0,l),!1,!1),r+=":",r+=t(p.substr(l+1),!1,!0)),r+="@"}o=o.toLowerCase(),l=o.lastIndexOf(":"),l===-1?r+=t(o,!1,!0):(r+=t(o.substr(0,l),!1,!0),r+=o.substr(l))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let l=s.charCodeAt(1);l>=65&&l<=90&&(s=`/${String.fromCharCode(l+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let l=s.charCodeAt(0);l>=65&&l<=90&&(s=`${String.fromCharCode(l+32)}:${s.substr(2)}`)}r+=t(s,!0,!1)}return a&&(r+="?",r+=t(a,!1,!1)),u&&(r+="#",r+=e?u:w1(u,!1,!1)),r}function R1(n){try{return decodeURIComponent(n)}catch{return n.length>3?n.substr(0,3)+R1(n.substr(3)):n}}var C1=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function vl(n){return n.match(C1)?n.replace(C1,e=>R1(e)):n}var ke;(X=>(X.inMemory="inmemory",X.vscode="vscode",X.internal="private",X.walkThrough="walkThrough",X.walkThroughSnippet="walkThroughSnippet",X.http="http",X.https="https",X.file="file",X.mailto="mailto",X.untitled="untitled",X.data="data",X.command="command",X.vscodeRemote="vscode-remote",X.vscodeRemoteResource="vscode-remote-resource",X.vscodeManagedRemoteResource="vscode-managed-remote-resource",X.vscodeUserData="vscode-userdata",X.vscodeCustomEditor="vscode-custom-editor",X.vscodeNotebookCell="vscode-notebook-cell",X.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",X.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",X.vscodeNotebookCellOutput="vscode-notebook-cell-output",X.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",X.vscodeNotebookMetadata="vscode-notebook-metadata",X.vscodeInteractiveInput="vscode-interactive-input",X.vscodeSettings="vscode-settings",X.vscodeWorkspaceTrust="vscode-workspace-trust",X.vscodeTerminal="vscode-terminal",X.vscodeChatCodeBlock="vscode-chat-code-block",X.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",X.vscodeChatEditor="vscode-chat-editor",X.vscodeChatInput="chatSessionInput",X.vscodeChatSession="vscode-chat-session",X.webviewPanel="webview-panel",X.vscodeWebview="vscode-webview",X.extension="extension",X.vscodeFileResource="vscode-file",X.tmp="tmp",X.vsls="vsls",X.vscodeSourceControl="vscode-scm",X.commentsInput="comment",X.codeSetting="code-setting",X.outputChannel="output",X.accessibleView="accessible-view",X.chatEditingSnapshotScheme="chat-editing-snapshot-text-model",X.chatEditingModel="chat-editing-text-model"))(ke||={});var uI="tkn",kf=class{constructor(){this._hosts=Object.create(null);this._ports=Object.create(null);this._connectionTokens=Object.create(null);this._preferredWebSchema="http";this._delegate=null;this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=re.join(t??"/",cI(e))}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return re.join(this._serverRootPath,ke.vscodeRemoteResource)}set(e,t,r){this._hosts[e]=t,this._ports[e]=r}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return at(a),e}let t=e.authority,r=this._hosts[t];r&&r.indexOf(":")!==-1&&r.indexOf("[")===-1&&(r=`[${r}]`);let i=this._ports[t],o=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${uI}=${encodeURIComponent(o)}`),W.from({scheme:t1?this._preferredWebSchema:ke.vscodeRemoteResource,authority:`${r}:${i}`,path:this._remoteResourcesPath,query:s})}},lI=new kf;function cI(n){return`${n.quality??"oss"}-${n.commit??"dev"}`}var dI="vscode-app",If=class n{static{this.FALLBACK_AUTHORITY=dI}asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===ke.vscodeRemote?lI.rewrite(e):e.scheme===ke.file&&(e1||n1===`${ke.vscodeFileResource}://${n.FALLBACK_AUTHORITY}`)?e.with({scheme:ke.vscodeFileResource,authority:e.authority||n.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===ke.vscodeFileResource?e.with({scheme:ke.file,authority:e.authority!==n.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e){if(W.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let t=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(t))return W.joinPath(W.parse(t,!0),e);let r=Sa(t,e);return W.file(r)}throw new Error("Cannot determine URI for module id!")}},v9=new If,x9=Object.freeze({"Cache-Control":"no-cache, no-store"}),y9=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),pI;(o=>{let n=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(n.get("3"));let t="vscode-coi";function r(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:W.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let u=a?.get(t);if(u)return n.get(u)}o.getHeadersFromQuery=r;function i(s,a,u){if(!globalThis.crossOriginIsolated)return;let l=a&&u?"3":u?"2":"1";s instanceof URLSearchParams?s.set(t,l):s[t]=l}o.addSearchParam=i})(pI||={});Je();function lr(n){return Na(n,!0)}var Fa=class{constructor(e){this._ignorePathCasing=e}compare(e,t,r=!1){return e===t?0:bf(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===ke.file)return Oa(lr(e),lr(t),this._ignorePathCasing(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(D1(e.authority,t.authority))return Oa(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return W.joinPath(e,...t)}basenameOrAuthority(e){return fI(e)||e.authority}basename(e){return re.basename(e.path)}extname(e){return re.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===ke.file?t=W.file(qo(lr(e))).path:(t=re.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===ke.file?t=W.file(af(lr(e))).path:t=re.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!D1(e.authority,t.authority))return;if(e.scheme===ke.file){let o=a1(lr(e),lr(t));return jt?yf(o):o}let r=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(r.length,i.length);o<s&&!(r.charCodeAt(o)!==i.charCodeAt(o)&&r.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);r=i.substr(0,o)+r.substr(o)}return re.relative(r,i)}resolvePath(e,t){if(e.scheme===ke.file){let r=W.file(s1(lr(e),t));return e.with({authority:r.authority,path:r.path})}return t=_1(t),e.with({path:re.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ur(e,t)}hasTrailingPathSeparator(e,t=vn){if(e.scheme===ke.file){let r=lr(e);return r.length>Tf(r).length&&r[r.length-1]===t}else{let r=e.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=vn){return A1(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=vn){let r=!1;if(e.scheme===ke.file){let i=lr(e);r=i!==void 0&&i.length===Tf(i).length&&i[i.length-1]===t}else{t="/";let i=e.path;r=i.length===1&&i.charCodeAt(i.length-1)===47}return!r&&!A1(e,t)?e.with({path:e.path+"/"}):e}},me=new Fa(()=>!1),P1=new Fa(n=>n.scheme===ke.file?!ul:!0),E9=new Fa(n=>!0),Ma=me.isEqual.bind(me),S9=me.isEqualOrParent.bind(me),R9=me.getComparisonKey.bind(me),D9=me.basenameOrAuthority.bind(me),fI=me.basename.bind(me),L1=me.extname.bind(me),O1=me.dirname.bind(me),Ua=me.joinPath.bind(me),A9=me.normalizePath.bind(me),N1=me.relativePath.bind(me),P9=me.resolvePath.bind(me),L9=me.isAbsolutePath.bind(me),D1=me.isEqualAuthority.bind(me),A1=me.hasTrailingPathSeparator.bind(me),O9=me.removeTrailingPathSeparator.bind(me),N9=me.addTrailingPathSeparator.bind(me);var mI;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(p=>{let[d,f]=p.split(":");d&&f&&a.set(d,f)});let l=s.path.substring(0,s.path.indexOf(";"));return l&&a.set(o.META_DATA_MIME,l),a}o.parseMetaData=i})(mI||={});var hI=Symbol("MicrotaskDelay");Oi();function wl(n){return!!n&&typeof n.then=="function"}function gI(n){let e=new Br,t=n(e.token),r=!1,i=new Promise((o,s)=>{let a=e.token.onCancellationRequested(()=>{r=!0,a.dispose(),s(new Ne)});Promise.resolve(t).then(u=>{a.dispose(),e.dispose(),r?Fo(u)&&u.dispose():o(u)},u=>{a.dispose(),e.dispose(),s(u)})});return new class{cancel(){e.cancel(),e.dispose()}then(o,s){return i.then(o,s)}catch(o){return this.then(void 0,o)}finally(o){return i.finally(o)}}}function Cl(n,e){return new Promise((t,r)=>{let i=e.onCancellationRequested(()=>{i.dispose(),r(new Ne)});n.then(t,r).finally(()=>i.dispose())})}function Bi(n,e){return e?new Promise((t,r)=>{let i=setTimeout(()=>{o.dispose(),t()},n),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),r(new Ne)})}):gI(t=>Bi(n,t))}var yl=class{constructor(e){this._size=0;this._isDisposed=!1;this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new se}whenIdle(){return this.size>0?Ur.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((t,r)=>{this.outstandingPromises.push({factory:e,c:t,e:r}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}};var Tl=class{constructor(e,t){this._isDisposed=!1;this._token=void 0,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==void 0&&(clearTimeout(this._token),this._token=void 0)}cancelAndSet(e,t){if(this._isDisposed)throw new G("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=void 0,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new G("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===void 0&&(this._token=setTimeout(()=>{this._token=void 0,e()},t))}};var _l=class{constructor(e,t){this.timeoutToken=void 0,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=void 0)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=void 0,this.runner&&this.doRun()}doRun(){this.runner?.()}};var bI,xl;(function(){let n=globalThis;typeof n.requestIdleCallback!="function"||typeof n.cancelIdleCallback!="function"?xl=(e,t,r)=>{i1(()=>{if(i)return;let o=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,o-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:xl=(e,t,r)=>{let i=e.requestIdleCallback(t,typeof r=="number"?{timeout:r}:void 0),o=!1;return{dispose(){o||(o=!0,e.cancelIdleCallback(i))}}},bI=(e,t)=>xl(globalThis,e,t)})();var wf=class{constructor(e,t){this._didRun=!1;this._executor=()=>{try{this._value=t()}catch(r){this._error=r}finally{this._didRun=!0}},this._handle=xl(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},kl=class extends wf{constructor(e){super(globalThis,e)}};var Bn=class n{static fromPromise(e){let t=new n;return t.settleWith(e),t}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return this.isSettled?Promise.resolve():new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}settleWith(e){return e.then(t=>this.complete(t),t=>this.error(t))}cancel(){return this.error(new Ne)}},vI;(t=>{async function n(r){let i,o=await Promise.all(r.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}t.settled=n;function e(r){return new Promise(async(i,o)=>{try{await r(i,o)}catch(s){o(s)}})}t.withAsyncBody=e})(vI||={});var cr=class n{static fromArray(e){return new n(t=>{t.emitMany(e)})}static fromPromise(e){return new n(async t=>{t.emitMany(await e)})}static fromPromisesResolveOrder(e){return new n(async t=>{await Promise.all(e.map(async r=>t.emitOne(await r)))})}static merge(e){return new n(async t=>{await Promise.all(e.map(async r=>{for await(let i of r)t.emitOne(i)}))})}static{this.EMPTY=n.fromArray([])}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new se,queueMicrotask(async()=>{let r={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(r)),this.resolve()}catch(i){this.reject(i)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Ur.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new n(async r=>{for await(let i of e)r.emitOne(t(i))})}map(e){return n.map(this,e)}static filter(e,t){return new n(async r=>{for await(let i of e)t(i)&&r.emitOne(i)})}filter(e){return n.filter(this,e)}static coalesce(e){return n.filter(e,t=>!!t)}coalesce(){return n.coalesce(this)}static async toPromise(e){let t=[];for await(let r of e)t.push(r);return t}toPromise(){return n.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var Il=class{constructor(e){this._deferred=new Bn;this._asyncIterable=new cr(i=>{if(t){i.reject(t);return}return r&&i.emitMany(r),this._errorFn=o=>i.reject(o),this._emitOneFn=o=>i.emitOne(o),this._emitManyFn=o=>i.emitMany(o),this._deferred.p},e);let t,r;this._errorFn=i=>{t||(t=i)},this._emitOneFn=i=>{r||(r=[]),r.push(i)},this._emitManyFn=i=>{r?i.forEach(o=>r.push(o)):r=i.slice()}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitOneFn(e)}emitMany(e){this._emitManyFn(e)}};var Cf=class{constructor(){this._unsatisfiedConsumers=[];this._unconsumedValues=[]}get hasFinalValue(){return!!this._finalValue}produce(e){if(this._ensureNoFinalValue(),this._unsatisfiedConsumers.length>0){let t=this._unsatisfiedConsumers.shift();this._resolveOrRejectDeferred(t,e)}else this._unconsumedValues.push(e)}produceFinal(e){this._ensureNoFinalValue(),this._finalValue=e;for(let t of this._unsatisfiedConsumers)this._resolveOrRejectDeferred(t,e);this._unsatisfiedConsumers.length=0}_ensureNoFinalValue(){if(this._finalValue)throw new G("ProducerConsumer: cannot produce after final value has been set")}_resolveOrRejectDeferred(e,t){t.ok?e.complete(t.value):e.error(t.error)}consume(){if(this._unconsumedValues.length>0||this._finalValue){let e=this._unconsumedValues.length>0?this._unconsumedValues.shift():this._finalValue;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}else{let e=new Bn;return this._unsatisfiedConsumers.push(e),e.p}}},F1=class n{constructor(e,t){this._onReturn=t;this._producerConsumer=new Cf;this._iterator={next:()=>this._producerConsumer.consume(),return:()=>(this._onReturn?.(),Promise.resolve({done:!0,value:void 0})),throw:async e=>(this._finishError(e),{done:!0,value:void 0})};queueMicrotask(async()=>{let r=e({emitOne:i=>this._producerConsumer.produce({ok:!0,value:{done:!1,value:i}}),emitMany:i=>{for(let o of i)this._producerConsumer.produce({ok:!0,value:{done:!1,value:o}})},reject:i=>this._finishError(i)});if(!this._producerConsumer.hasFinalValue)try{await r,this._finishOk()}catch(i){this._finishError(i)}})}static fromArray(e){return new n(t=>{t.emitMany(e)})}static fromPromise(e){return new n(async t=>{t.emitMany(await e)})}static fromPromisesResolveOrder(e){return new n(async t=>{await Promise.all(e.map(async r=>t.emitOne(await r)))})}static merge(e){return new n(async t=>{await Promise.all(e.map(async r=>{for await(let i of r)t.emitOne(i)}))})}static{this.EMPTY=n.fromArray([])}static map(e,t){return new n(async r=>{for await(let i of e)r.emitOne(t(i))})}map(e){return n.map(this,e)}static coalesce(e){return n.filter(e,t=>!!t)}coalesce(){return n.coalesce(this)}static filter(e,t){return new n(async r=>{for await(let i of e)t(i)&&r.emitOne(i)})}filter(e){return n.filter(this,e)}_finishOk(){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!0,value:{done:!0,value:void 0}})}_finishError(e){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!1,error:e})}[Symbol.asyncIterator](){return this._iterator}};var X9=Symbol("AsyncReaderEndOfStream");we();pe();var z=class{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=r}};var Ef=class{constructor(e,t){this.key=e;this.data=t;this.incoming=new Map;this.outgoing=new Map}},Ba=class{constructor(e){this._hashFn=e;this._nodes=new Map}roots(){let e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){let r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){let t=this._hashFn(e);this._nodes.delete(t);for(let r of this._nodes.values())r.outgoing.delete(t),r.incoming.delete(t)}lookupOrInsertNode(e){let t=this._hashFn(e),r=this._nodes.get(t);return r||(r=new Ef(t,e),this._nodes.set(t,r)),r}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,r]of this._nodes)e.push(`${t}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){let r=new Set([e]),i=this._findCycle(t,r);if(i)return i}}_findCycle(e,t){for(let[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);let o=this._findCycle(i,t);if(o)return o;t.delete(r)}}};var Vi=class{constructor(...e){this._entries=new Map;for(let[t,r]of e)this.set(t,r)}set(e,t){let r=this._entries.get(e);return this._entries.set(e,t),r}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};ka();var xI=!1,El=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},Sl=class n{constructor(e=new Vi,t=!1,r,i=xI){this._services=e;this._strict=t;this._parent=r;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(_e,this),this._globalGraph=i?r?._globalGraph??new Ba(o=>o):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,nl(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)Fo(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();let r=this,i=new class extends n{dispose(){r._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),t?.add(i),i}invokeFunction(e,...t){this._throwIfDisposed();let r=Va.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s=>{if(i)throw Ju("service accessor is only valid during the invocation of its target method");let a=this._getOrCreateServiceInstance(s,r);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a},getIfExists:s=>{if(i)throw Ju("service accessor is only valid during the invocation of its target method");return this._getOrCreateServiceInstance(s,r)}},...t)}finally{i=!0,r.stop()}}createInstance(e,...t){this._throwIfDisposed();let r,i;return e instanceof z?(r=Va.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),r)):(r=Va.traceCreation(this._enableTracing,e),i=this._createInstance(e,t,r)),r.stop(),i}_createInstance(e,t=[],r){let i=mn.getServiceDependencies(e).sort((a,u)=>a.index-u.index),o=[];for(let a of i){let u=this._getOrCreateServiceInstance(a.id,r);u||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(u)}let s=i.length>0?i[0].index:t.length;if(t.length!==s){console.trace(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let a=s-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,s)}return Reflect.construct(e,t.concat(o))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof z)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let r=this._getServiceInstanceOrDescriptor(e);return r instanceof z?this._safeCreateAndCacheServiceInstance(e,r,t.branch(e,!0)):(t.branch(e,!1),r)}_safeCreateAndCacheServiceInstance(e,t,r){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,r)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,r){let i=new Ba(u=>u.id.toString()),o=0,s=[{id:e,desc:t,_trace:r}],a=new Set;for(;s.length;){let u=s.pop();if(!a.has(String(u.id))){if(a.add(String(u.id)),i.lookupOrInsertNode(u),o++>1e3)throw new El(i);for(let l of mn.getServiceDependencies(u.desc.ctor)){let p=this._getServiceInstanceOrDescriptor(l.id);if(p||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(u.id),String(l.id)),p instanceof z){let d={id:l.id,desc:p,_trace:u._trace.branch(l.id,!0)};i.insertEdge(u,d),s.push(d)}}}}for(;;){let u=i.roots();if(u.length===0){if(!i.isEmpty())throw new El(i);break}for(let{data:l}of u){if(this._getServiceInstanceOrDescriptor(l.id)instanceof z){let d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setCreatedServiceInstance(l.id,d)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,r=[],i,o){if(this._services.get(e)instanceof z)return this._createServiceInstance(e,t,r,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,r,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,r=[],i,o,s){if(i){let a=new n(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);let u=new Map,l=new kl(()=>{let p=a._createInstance(t,r,o);for(let[d,f]of u){let h=p[d];if(typeof h=="function")for(let m of f)m.disposable=h.apply(p,m.listener)}return u.clear(),s.add(p),p});return new Proxy(Object.create(null),{get(p,d){if(!l.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let m=u.get(d);return m||(m=new nr,u.set(d,m)),(x,I,T)=>{if(l.isInitialized)return l.value[d](x,I,T);{let b={listener:[x,I,T],disposable:void 0},y=m.push(b);return Ct(()=>{y(),b.disposable?.dispose()})}}}if(d in p)return p[d];let f=l.value,h=f[d];return typeof h!="function"||(h=h.bind(f),p[d]=h),h},set(p,d,f){return l.value[d]=f,!0},getPrototypeOf(p){return t.prototype}})}else{let a=this._createInstance(t,r,o);return s.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}};var Va=class n{constructor(e,t){this.type=e;this.name=t;this._start=Date.now();this._dep=[]}static{this.all=new Set}static{this._None=new class extends n{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,t){return e?new n(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):n._None}static traceCreation(e,t){return e?new n(1,t.name):n._None}static{this._totals=0}branch(e,t){let r=new n(3,e.toString());return this._dep.push([e,t,r]),r}stop(){let e=Date.now()-this._start;n._totals+=e;let t=!1;function r(o,s){let a=[],u=new Array(o+1).join("	");for(let[l,p,d]of s._dep)if(p&&d){t=!0,a.push(`${u}CREATES -> ${l}`);let f=r(o+1,d);f&&a.push(f)}else a.push(`${u}uses -> ${l}`);return a.join(`
`)}let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${n._totals.toFixed(2)}ms)`];(e>2||t)&&n.all.add(i.join(`
`))}};var Rl=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new Vi(...e):e??new Vi}define(e,t){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,t)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new Sl(this._collection,!0)}};var ht=M1(),Ho=ht.buildType!=="dev",qa=ht.isPreRelease||!Ho,C7=ht.engines.vscode;var $a=class{constructor(e,t){this.name=e;this.version=t}format(){return`${this.name}/${this.version}`}},Qe=_("IEnvService"),A7=_("INativeEnvService");var qi=tn.IS_SCENARIO_AUTOMATION==="1";var O7=Pr(`

**Note:** Some files were excluded from the context due to content exclusion rules (.pukuignore).`),Dl=_("IIgnoreService"),U1=class n{static{this.Instance=new n}dispose(){}get isEnabled(){return!1}get isRegexExclusionsEnabled(){return!1}async init(){}async isPukuIgnored(e){return!1}async asMinimatchPattern(){}};Wt();var gt=_("IExperimentationService");var V1=require("vscode");var Al=_("ILanguageContextProviderService");var B1=_("IScopeSelector");var Ko=class{constructor(e){this.contextProviderService=e}registerContextProvider(e){return this.contextProviderService.registerContextProvider(e)}};Ko=E([v(0,Al)],Ko);var $i=class{constructor(e,t){this._scopeSelector=e;this._languageContextProviderService=t}static{this.version=1}async selectScope(e,t){if(e??=V1.window.activeTextEditor,!!e)return this._scopeSelector.selectEnclosingScope(e,t)}getContextProviderAPI(e){return new Ko(this._languageContextProviderService)}};$i=E([v(0,B1),v(1,Al)],$i);pe();var Z=_("ILogService"),q1=(s=>(s[s.Off=0]="Off",s[s.Trace=1]="Trace",s[s.Debug=2]="Debug",s[s.Info=3]="Info",s[s.Warning=4]="Warning",s[s.Error=5]="Error",s))(q1||{});var Pl=class extends K{constructor(e){super(),this.logger=new Sf(e)}trace(e){this.logger.trace(e)}debug(e){this.logger.debug(e)}info(e){this.logger.info(e)}warn(e){this.logger.warn(e)}error(e,t){this.logger.error(e,t)}show(e){this.logger.show(e)}},Sf=class{constructor(e){this._logTargets=e}_logIt(e,t){Rf.addLog(q1[e],t),this._logTargets.forEach(r=>r.logIt(e,t))}trace(e){this._logIt(1,e)}debug(e){this._logIt(2,e)}info(e){this._logIt(3,e)}warn(e){this._logIt(4,e)}error(e,t){this._logIt(5,TI(e)+(t?`: ${t}`:""))}show(e){this._logTargets.forEach(t=>t.show?.(e))}};function TI(n){let e=new Set;function t(r,i){if(!r||!["object","string"].includes(typeof r)||e.has(r))return"";e.add(r);let s=(typeof r=="string"?r:r.stack||r.message||r.code||r.toString?.()||"").toString?.()||"";return[s?`${s.split(`
`).map(a=>`${i}${a}`).join(`
`)}
`:"",t(r.cause,i+"  "),...Array.isArray(r.errors)?r.errors.map(a=>t(a,i+"  ")):[]].join("")}return t(n,"").trim()}var Rf=class{static{this._logs=[]}static{this._requestIds=[]}static{this.MAX_LOGS=50}static extractRequestIdFromMessage(e){let t=e.match(/request done: requestId: \[([0-9a-fA-F-]+)\] model deployment ID: \[/);if(t){let r=t[1];if(!this._requestIds.includes(r))return r}}static addLog(e,t){this._logs.length>=this.MAX_LOGS&&this._logs.shift(),this._logs.push(`${e}: ${t}`),this._requestIds.length>=this.MAX_LOGS&&this._requestIds.shift();let r=this.extractRequestIdFromMessage(t);r&&this._requestIds.push(r)}static getLogs(){return this._logs}static getRequestIds(){return this._requestIds}};pe();Mo();function Ll(n){return{create(e){return e.get(_e).createInstance(n)}}}var Jo=class extends K{constructor(t,r,i){super();this.allActivationBlockers=[];for(let o of t){let s;try{if(s=i.invokeFunction(o.create),Fo(s)&&this._register(s),s?.activationBlocker){let a=Et.create(),u=s.id||"UNKNOWN";this.allActivationBlockers.push(s.activationBlocker.finally(()=>{r.info(`activationBlocker from '${u}' took for ${Math.round(a.elapsed())}ms`)}))}}catch(a){r.error(a,"Error while loading contribution")}}}async waitForActivationBlockers(){await Promise.allSettled(this.allActivationBlockers)}};Jo=E([v(1,Z),v(2,_e)],Jo);async function $1(n){let e=n.context;if(e.extensionMode===zt.ExtensionMode.Test&&!n.forceActivation&&!qi)return e;let t=!(zt.env.appName.includes("Insiders")||zt.env.appName.includes("Exploration")||zt.env.appName.includes("OSS")),r="puku.interactiveSession.switchToReleaseChannel";if(e.extension.packageJSON.isPreRelease&&t)return zt.commands.executeCommand("setContext",r,!0),e;zt.commands.executeCommand("setContext",r,void 0),zt.l10n.bundle&&w0({contents:zt.l10n.bundle}),Ho||n.configureDevPackages?.();let i=_I(n);return await i.invokeFunction(async o=>{await o.get(gt).hasTreatments();let a=i.createInstance(Jo,n.contributions);e.subscriptions.push(a),await a.waitForActivationBlockers()}),zt.ExtensionMode.Test===e.extensionMode&&!qi?i:{getAPI(o){if(o>$i.version)throw new Error("Invalid Copilot Chat extension API version. Please upgrade Copilot Chat.");return i.createInstance($i)}}}function _I(n){let e=new Rl;n.registerServices(e,n.context);let t=e.seal();return n.context.subscriptions.push(t),t.invokeFunction(r=>{r.get(Dl).init()}),t}we();Wt();Oi();we();pe();var Wa=typeof Buffer<"u",II=new At(()=>new Uint8Array(256)),Df,Af,Xe=class n{static alloc(e){return Wa?new n(Buffer.allocUnsafe(e)):new n(new Uint8Array(e))}static wrap(e){return Wa&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new n(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&Wa?new n(Buffer.from(e)):(Df||(Df=new TextEncoder),new n(Df.encode(e)))}static fromByteArray(e){let t=n.alloc(e.length);for(let r=0,i=e.length;r<i;r++)t.buffer[r]=e[r];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let o=0,s=e.length;o<s;o++)t+=e[o].byteLength}let r=n.alloc(t),i=0;for(let o=0,s=e.length;o<s;o++){let a=e[o];r.set(a,i),i+=a.byteLength}return r}static isNativeBuffer(e){return Wa&&Buffer.isBuffer(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=n.alloc(this.byteLength);return e.set(this),e}toString(){return Wa?this.buffer.toString():(Af||(Af=new TextDecoder),Af.decode(this.buffer))}slice(e,t){return new n(this.buffer.subarray(e,t))}set(e,t){if(e instanceof n)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return CI(this.buffer,e)}writeUInt32BE(e,t){EI(this.buffer,e,t)}readUInt32LE(e){return SI(this.buffer,e)}writeUInt32LE(e,t){RI(this.buffer,e,t)}readUInt8(e){return DI(this.buffer,e)}writeUInt8(e,t){AI(this.buffer,e,t)}indexOf(e,t=0){return wI(this.buffer,e instanceof n?e.buffer:e,t)}equals(e){return this===e?!0:this.byteLength!==e.byteLength?!1:this.buffer.every((t,r)=>t===e.buffer[r])}};function wI(n,e,t=0){let r=e.byteLength,i=n.byteLength;if(r===0)return 0;if(r===1)return n.indexOf(e[0]);if(r>i-t)return-1;let o=II.value;o.fill(e.length);for(let l=0;l<e.length;l++)o[e[l]]=e.length-l-1;let s=t+e.length-1,a=s,u=-1;for(;s<i;)if(n[s]===e[a]){if(a===0){u=s;break}s--,a--}else s+=Math.max(e.length-a,o[n[s]]),a=e.length-1;return u}function CI(n,e){return n[e]*2**24+n[e+1]*2**16+n[e+2]*2**8+n[e+3]}function EI(n,e,t){n[t+3]=e,e=e>>>8,n[t+2]=e,e=e>>>8,n[t+1]=e,e=e>>>8,n[t]=e}function SI(n,e){return n[e+0]<<0>>>0|n[e+1]<<8>>>0|n[e+2]<<16>>>0|n[e+3]<<24>>>0}function RI(n,e,t){n[t+0]=e&255,e=e>>>8,n[t+1]=e&255,e=e>>>8,n[t+2]=e&255,e=e>>>8,n[t+3]=e&255}function DI(n,e){return n[e]}function AI(n,e,t){n[t]=e}function Pf(n){let e=0,t=0,r=0,i=new Uint8Array(Math.floor(n.length/4*3)),o=a=>{switch(t){case 3:i[r++]=e|a,t=0;break;case 2:i[r++]=e|a>>>2,e=a<<6,t=3;break;case 1:i[r++]=e|a>>>4,e=a<<4,t=2;break;default:e=a<<2,t=1}};for(let a=0;a<n.length;a++){let u=n.charCodeAt(a);if(u>=65&&u<=90)o(u-65);else if(u>=97&&u<=122)o(u-97+26);else if(u>=48&&u<=57)o(u-48+52);else if(u===43||u===45)o(62);else if(u===47||u===95)o(63);else{if(u===61)break;throw new SyntaxError(`Unexpected base64 character ${n[a]}`)}}let s=r;for(;t>0;)o(0);return Xe.wrap(i).slice(0,s)}var PI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function G1({buffer:n},e=!0,t=!1){let r=t?LI:PI,i="",o=n.byteLength%3,s=0;for(;s<n.byteLength-o;s+=3){let a=n[s+0],u=n[s+1],l=n[s+2];i+=r[a>>>2],i+=r[(a<<4|u>>>4)&63],i+=r[(u<<2|l>>>6)&63],i+=r[l&63]}if(o===1){let a=n[s+0];i+=r[a>>>2],i+=r[a<<4&63],e&&(i+="==")}else if(o===2){let a=n[s+0],u=n[s+1];i+=r[a>>>2],i+=r[(a<<4|u>>>4)&63],i+=r[u<<2&63],e&&(i+="=")}return i}var W1="0123456789abcdef";function Ol({buffer:n}){let e="";for(let t=0;t<n.length;t++){let r=n[t];e+=W1[r>>>4],e+=W1[r&15]}return e}function z1(n){if(n.length%2!==0)throw new SyntaxError("Hex string must have an even length");let e=new Uint8Array(n.length>>1);for(let t=0;t<n.length;)e[t>>1]=j1(n,t++)<<4|j1(n,t++);return Xe.wrap(e)}function j1(n,e){let t=n.charCodeAt(e);if(t>=48&&t<=57)return t-48;if(t>=97&&t<=102)return t-87;if(t>=65&&t<=70)return t-55;throw new SyntaxError(`Invalid hex character at position ${e}`)}Je();function Lf(n,e,t=32){let r=t-e,i=~((1<<r)-1);return(n<<e|(i&n)>>>r)>>>0}function ja(n,e=32){return n instanceof ArrayBuffer?Ol(Xe.wrap(new Uint8Array(n))):(n>>>0).toString(16).padStart(e/4,"0")}var Vn=class n{constructor(){this._h0=1732584193;this._h1=4023233417;this._h2=2562383102;this._h3=271733878;this._h4=3285377520;this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}static{this._bigBlock32=new DataView(new ArrayBuffer(320))}update(e){let t=e.length;if(t===0)return;let r=this._buff,i=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let u=s;if(Aa(s))if(a+1<t){let l=e.charCodeAt(a+1);Ui(l)?(a++,u=Pa(s,l)):u=65533}else{o=s;break}else Ui(s)&&(u=65533);if(i=this._push(r,i,u),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,r){return r<128?e[t++]=r:r<2048?(e[t++]=192|(r&1984)>>>6,e[t++]=128|(r&63)>>>0):r<65536?(e[t++]=224|(r&61440)>>>12,e[t++]=128|(r&4032)>>>6,e[t++]=128|(r&63)>>>0):(e[t++]=240|(r&1835008)>>>18,e[t++]=128|(r&258048)>>>12,e[t++]=128|(r&4032)>>>6,e[t++]=128|(r&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),ja(this._h0)+ja(this._h1)+ja(this._h2)+ja(this._h3)+ja(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=n._bigBlock32,t=this._buffDV;for(let d=0;d<64;d+=4)e.setUint32(d,t.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,Lf(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let r=this._h0,i=this._h1,o=this._h2,s=this._h3,a=this._h4,u,l,p;for(let d=0;d<80;d++)d<20?(u=i&o|~i&s,l=1518500249):d<40?(u=i^o^s,l=1859775393):d<60?(u=i&o|i&s|o&s,l=2400959708):(u=i^o^s,l=3395469782),p=Lf(r,5)+u+a+l+e.getUint32(d*4,!1)&4294967295,a=s,s=o,o=Lf(i,30),i=r,r=p;this._h0=this._h0+r&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};pe();qt();var OI=Object.prototype.hasOwnProperty;function Nf(n,e){return Of(n,e,new Set)}function Of(n,e,t){if(Jp(n))return n;let r=e(n);if(typeof r<"u")return r;if(Array.isArray(n)){let i=[];for(let o of n)i.push(Of(o,e,t));return i}if(Mr(n)){if(t.has(n))throw new Error("Cannot clone recursive data-structure");t.add(n);let i={};for(let o in n)OI.call(n,o)&&(i[o]=Of(n[o],e,t));return t.delete(n),i}return n}function jr(n,e){if(n===e)return!0;if(n==null||e===null||e===void 0||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;let t,r;if(Array.isArray(n)){if(n.length!==e.length)return!1;for(t=0;t<n.length;t++)if(!jr(n[t],e[t]))return!1}else{let i=[];for(r in n)i.push(r);i.sort();let o=[];for(r in e)o.push(r);if(o.sort(),!jr(i,o))return!1;for(t=0;t<i.length;t++)if(!jr(n[i[t]],e[i[t]]))return!1}return!0}function H1(n,e){let t={};for(let[r,i]of Object.entries(n))t[r]=e(i,r);return t}var Ye=class{constructor(e,t,r){this.owner=e;this.debugNameSource=t;this.referenceFn=r}getDebugName(e){return X1(e,this)}},K1=new Map,Ff=new WeakMap;function X1(n,e){let t=Ff.get(n);if(t)return t;let r=FI(n,e);if(r){let i=K1.get(r)??0;i++,K1.set(r,i);let o=i===1?r:`${r}#${i}`;return Ff.set(n,o),o}}function FI(n,e){let t=Ff.get(n);if(t)return t;let r=e.owner?UI(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return r+i}else return r+o;let s=e.referenceFn;if(s!==void 0&&(i=Ga(s),i!==void 0))return r+i;if(e.owner!==void 0){let a=MI(e.owner,n);if(a!==void 0)return r+a}}function MI(n,e){for(let t in n)if(n[t]===e)return t}var J1=new Map,Q1=new WeakMap;function UI(n){let e=Q1.get(n);if(e)return e;let t=Mf(n)??"Object",r=J1.get(t)??0;r++,J1.set(t,r);let i=r===1?t:`${t}#${r}`;return Q1.set(n,i),i}function Mf(n){let e=n.constructor;if(e)return e.name==="Object"?void 0:e.name}function Ga(n){let e=n.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(r?r[1]:void 0)?.trim()}Fn();wt();var nn=(n,e)=>n===e;we();Wt();pe();function Uf(n){let e=new Error("BugIndicatingErrorRecovery: "+n);at(e),console.error("recovered from an error that indicates a bug",e)}var Wi;function za(n){Wi?Wi instanceof Nl?Wi.loggers.push(n):Wi=new Nl([Wi,n]):Wi=n}function Se(){return Wi}var Bf;function Y1(n){Bf=n}function Z1(n){Bf&&Bf(n)}var Nl=class{constructor(e){this.loggers=e}handleObservableCreated(e,t){for(let r of this.loggers)r.handleObservableCreated(e,t)}handleOnListenerCountChanged(e,t){for(let r of this.loggers)r.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(let r of this.loggers)r.handleObservableUpdated(e,t)}handleAutorunCreated(e,t){for(let r of this.loggers)r.handleAutorunCreated(e,t)}handleAutorunDisposed(e){for(let t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,r){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,t,r)}handleAutorunStarted(e){for(let t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(let t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,r){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,t,r)}handleDerivedCleared(e){for(let t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(let t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(let t of this.loggers)t.handleEndTransaction(e)}};function Gr(n,e){let t=new ji(n,e);try{n(t)}finally{t.finish()}}function Vf(n,e,t){n?e(n):Gr(e,t)}var ji=class{constructor(e,t){this._fn=e;this._getDebugName=t;this._updatingObservers=[];Se()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():Ga(this._fn)}updateObserver(e,t){if(!this._updatingObservers){Uf("Transaction already finished!"),Gr(r=>{r.updateObserver(e,t)});return}this._updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this._updatingObservers;if(!e){Uf("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){let{observer:r,observable:i}=e[t];r.endUpdate(i)}this._updatingObservers=null,Se()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this._updatingObservers}};var $e;(r=>{let n=!1;function e(){n=!0}r.enable=e;function t(){if(!n)return;let i=Error,o=i.stackTraceLimit;i.stackTraceLimit=3;let s=new Error().stack;return i.stackTraceLimit=o,qf.fromStack(s,2)}r.ofCaller=t})($e||={});var qf=class n{constructor(e,t,r,i){this.fileName=e;this.line=t;this.column=r;this.id=i}static fromStack(e,t){let r=e.split(`
`),i=BI(r[t+1]);if(i)return new n(i.fileName,i.line,i.column,i.id)}};function BI(n){let e=n.match(/\((.*):(\d+):(\d+)\)/);if(e)return{fileName:e[1],line:parseInt(e[2]),column:parseInt(e[3]),id:n};let t=n.match(/at ([^\(\)]*):(\d+):(\d+)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:n}}var $f;function eb(n){$f=n}var tb;function nb(n){tb=n}var rb;function ib(n){rb=n}var ob;function sb(n){ob=n}var Fl=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t,r=$e.ofCaller()){let i=t===void 0?void 0:e,o=t===void 0?e:t;return $f({owner:i,debugName:()=>{let s=Ga(o);if(s!==void 0)return s;let u=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(o.toString());if(u)return`${this.debugName}.${u[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:o},s=>o(this.read(s),s),r)}flatten(){return $f({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(tb(this,t)),this}keepObserved(e){return e.add(rb(this)),this}get debugValue(){return this.get()}debugGetDependencyGraph(){return ob(this)}},rn=class extends Fl{constructor(t){super();this._observers=new Set;Se()?.handleObservableCreated(this,t)}addObserver(t){let r=this._observers.size;this._observers.add(t),r===0&&this.onFirstObserverAdded(),r!==this._observers.size&&Se()?.handleOnListenerCountChanged(this,this._observers.size)}removeObserver(t){let r=this._observers.delete(t);r&&this._observers.size===0&&this.onLastObserverRemoved(),r&&Se()?.handleOnListenerCountChanged(this,this._observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let t=!!Se();return Z1(this),t||Se()?.handleObservableCreated(this,$e.ofCaller()),this}debugGetObservers(){return this._observers}};function Qo(n,e,t=$e.ofCaller()){let r;return typeof n=="string"?r=new Ye(void 0,n,void 0):r=new Ye(n,void 0,void 0),new dr(r,e,nn,t)}var dr=class extends rn{constructor(t,r,i,o){super(o);this._debugNameData=t;this._equalityComparator=i;this._value=r,Se()?.handleObservableUpdated(this,{hadValue:!1,newValue:r,change:void 0,didChange:!0,oldValue:void 0})}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(t,r,i){if(i===void 0&&this._equalityComparator(this._value,t))return;let o;r||(r=o=new ji(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(t),Se()?.handleObservableUpdated(this,{oldValue:s,newValue:t,change:i,didChange:!0,hadValue:!0});for(let a of this._observers)r.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(t){this._value=t}debugGetState(){return{value:this._value}}debugSetValue(t){this._value=t}};function VI(n){switch(n){case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}var pr=class{constructor(e,t,r,i){this._debugNameData=e;this._runFn=t;this._changeTracker=r;this._state=2;this._updateCount=0;this._disposed=!1;this._dependencies=new Set;this._dependenciesToBeRemoved=new Set;this._isRunning=!1;this._store=void 0;this._delayedStore=void 0;this._changeSummary=this._changeTracker?.createChangeSummary(void 0),Se()?.handleAutorunCreated(this,i),this._run(),Oo(this)}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){if(!this._disposed){this._disposed=!0;for(let e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&this._store.dispose(),this._delayedStore!==void 0&&this._delayedStore.dispose(),Se()?.handleAutorunDisposed(this),No(this)}}_run(){let e=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=e,this._state=3;try{if(!this._disposed){Se()?.handleAutorunStarted(this);let t=this._changeSummary,r=this._delayedStore;r!==void 0&&(this._delayedStore=void 0);try{this._isRunning=!0,this._changeTracker&&(this._changeTracker.beforeUpdate?.(this,t),this._changeSummary=this._changeTracker.createChangeSummary(t)),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._runFn(this,t)}catch(i){Lr(i)}finally{this._isRunning=!1,r!==void 0&&r.dispose()}}}finally{this._disposed||Se()?.handleAutorunFinished(this);for(let t of this._dependenciesToBeRemoved)t.removeObserver(this);this._dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this._state===3&&(this._state=1),this._updateCount++}endUpdate(e){try{if(this._updateCount===1)do{if(this._state===1){this._state=3;for(let t of this._dependencies)if(t.reportChanges(),this._state===2)break}this._state!==3&&this._run()}while(this._state!==3)}finally{this._updateCount--}Nn(()=>this._updateCount>=0)}handlePossibleChange(e){this._state===3&&this._isDependency(e)&&(this._state=1)}handleChange(e,t){if(this._isDependency(e)){Se()?.handleAutorunDependencyChanged(this,e,t);try{(this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:t,didChange:i=>i===e},this._changeSummary):!0)&&(this._state=2)}catch(r){Lr(r)}}}_isDependency(e){return this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)}_ensureNoRunning(){if(!this._isRunning)throw new G("The reader object cannot be used outside its compute function!")}readObservable(e){if(this._ensureNoRunning(),this._disposed)return e.get();e.addObserver(this);let t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}get store(){if(this._ensureNoRunning(),this._disposed)throw new G("Cannot access store after dispose");return this._store===void 0&&(this._store=new de),this._store}get delayedStore(){if(this._ensureNoRunning(),this._disposed)throw new G("Cannot access store after dispose");return this._delayedStore===void 0&&(this._delayedStore=new de),this._delayedStore}debugGetState(){return{isRunning:this._isRunning,updateCount:this._updateCount,dependencies:this._dependencies,state:this._state,stateStr:VI(this._state)}}debugRerun(){this._isRunning?this._state=2:this._run()}};function zr(n,e=$e.ofCaller()){return new pr(new Ye(void 0,void 0,n),n,void 0,e)}function qI(n){switch(n){case 0:return"initial";case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}var Ze=class extends rn{constructor(t,r,i,o=void 0,s,a){super(a);this._debugNameData=t;this._computeFn=r;this._changeTracker=i;this._handleLastObserverRemoved=o;this._equalityComparator=s;this._state=0;this._value=void 0;this._updateCount=0;this._dependencies=new Set;this._dependenciesToBeRemoved=new Set;this._changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._didReportChange=!1;this._isInBeforeUpdate=!1;this._isReaderValid=!1;this._store=void 0;this._delayedStore=void 0;this._removedObserverToCallEndUpdateOn=null;this._changeSummary=this._changeTracker?.createChangeSummary(void 0)}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this._state=0,this._value=void 0,Se()?.handleDerivedCleared(this);for(let t of this._dependencies)t.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._delayedStore!==void 0&&(this._delayedStore.dispose(),this._delayedStore=void 0),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this._observers.size===0){let r;try{this._isReaderValid=!0;let i;this._changeTracker&&(i=this._changeTracker.createChangeSummary(void 0),this._changeTracker.beforeUpdate?.(this,i)),r=this._computeFn(this,i)}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),r}else{do{if(this._state===1){for(let r of this._dependencies)if(r.reportChanges(),this._state===2)break}this._state===1&&(this._state=3),this._state!==3&&this._recompute()}while(this._state!==3);return this._value}}_recompute(){let t=!1;this._isComputing=!0,this._didReportChange=!1;let r=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=r;try{let i=this._changeSummary;this._isReaderValid=!0,this._changeTracker&&(this._isInBeforeUpdate=!0,this._changeTracker.beforeUpdate?.(this,i),this._isInBeforeUpdate=!1,this._changeSummary=this._changeTracker?.createChangeSummary(i));let o=this._state!==0,s=this._value;this._state=3;let a=this._delayedStore;a!==void 0&&(this._delayedStore=void 0);try{this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._value=this._computeFn(this,i)}finally{this._isReaderValid=!1;for(let u of this._dependenciesToBeRemoved)u.removeObserver(this);this._dependenciesToBeRemoved.clear(),a!==void 0&&a.dispose()}t=this._didReportChange||o&&!this._equalityComparator(s,this._value),Se()?.handleObservableUpdated(this,{oldValue:s,newValue:this._value,change:void 0,didChange:t,hadValue:o})}catch(i){Lr(i)}if(this._isComputing=!1,!this._didReportChange&&t)for(let i of this._observers)i.handleChange(this,void 0);else this._didReportChange=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){if(this._isUpdating)throw new G("Cyclic deriveds are not supported yet!");this._updateCount++,this._isUpdating=!0;try{let r=this._updateCount===1;if(this._state===3&&(this._state=1,!r))for(let i of this._observers)i.handlePossibleChange(this);if(r)for(let i of this._observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(t){if(this._updateCount--,this._updateCount===0){let r=[...this._observers];for(let i of r)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Nn(()=>this._updateCount>=0)}handlePossibleChange(t){if(this._state===3&&this._dependencies.has(t)&&!this._dependenciesToBeRemoved.has(t)){this._state=1;for(let r of this._observers)r.handlePossibleChange(this)}}handleChange(t,r){if(this._dependencies.has(t)&&!this._dependenciesToBeRemoved.has(t)||this._isInBeforeUpdate){Se()?.handleDerivedDependencyChanged(this,t,r);let i=!1;try{i=this._changeTracker?this._changeTracker.handleChange({changedObservable:t,change:r,didChange:s=>s===t},this._changeSummary):!0}catch(s){Lr(s)}let o=this._state===3;if(i&&(this._state===1||o)&&(this._state=2,o))for(let s of this._observers)s.handlePossibleChange(this)}}_ensureReaderValid(){if(!this._isReaderValid)throw new G("The reader object cannot be used outside its compute function!")}readObservable(t){this._ensureReaderValid(),t.addObserver(this);let r=t.get();return this._dependencies.add(t),this._dependenciesToBeRemoved.delete(t),r}reportChange(t){this._ensureReaderValid(),this._didReportChange=!0;for(let r of this._observers)r.handleChange(this,t)}get store(){return this._ensureReaderValid(),this._store===void 0&&(this._store=new de),this._store}get delayedStore(){return this._ensureReaderValid(),this._delayedStore===void 0&&(this._delayedStore=new de),this._delayedStore}addObserver(t){let r=!this._observers.has(t)&&this._updateCount>0;super.addObserver(t),r&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(t)?this._removedObserverToCallEndUpdateOn.delete(t):t.beginUpdate(this))}removeObserver(t){this._observers.has(t)&&this._updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(t)),super.removeObserver(t)}debugGetState(){return{state:this._state,stateStr:qI(this._state),updateCount:this._updateCount,isComputing:this._isComputing,dependencies:this._dependencies,value:this._value}}debugSetValue(t){this._value=t}debugRecompute(){this._isComputing?this._state=2:this._recompute()}setValue(t,r,i){this._value=t;let o=this._observers;r.updateObserver(this,this);for(let s of o)s.handleChange(this,i)}};function Ha(n,e,t=$e.ofCaller()){return e!==void 0?new Ze(new Ye(n,void 0,e),e,void 0,void 0,nn,t):new Ze(new Ye(void 0,void 0,n),n,void 0,void 0,nn,t)}function Wf(n,e,t=$e.ofCaller()){return new Ze(new Ye(n.owner,n.debugName,n.debugReferenceFn),e,void 0,n.onLastObserverRemoved,n.equalsFn??nn,t)}eb(Wf);we();Ai();function Xo(n,e,t,r){return e||(e=i=>i!=null),new Promise((i,o)=>{let s=!0,a=!1,u=n.map(p=>({isFinished:e(p),error:t?t(p):!1,state:p})),l=zr(p=>{let{isFinished:d,error:f,state:h}=u.read(p);(d||f)&&(s?a=!0:l.dispose(),f?o(f===!0?h:f):i(h))});if(r){let p=r.onCancellationRequested(()=>{l.dispose(),p.dispose(),o(new Ne)});if(r.isCancellationRequested){l.dispose(),p.dispose(),o(new Ne);return}}s=!1,a&&l.dispose()})}function on(...n){let e,t,r,i;return n.length===2?[t,r]=n:[e,t,r,i]=n,new Pt(new Ye(e,void 0,r),t,r,()=>Pt.globalTransaction,nn,i??$e.ofCaller())}function jf(n,e,t,r=$e.ofCaller()){return new Pt(new Ye(n.owner,n.debugName,n.debugReferenceFn??t),e,t,()=>Pt.globalTransaction,n.equalsFn??nn,r)}var Pt=class extends rn{constructor(t,r,i,o,s,a){super(a);this._debugNameData=t;this.event=r;this._getValue=i;this._getTransaction=o;this._equalityComparator=s;this._hasValue=!1;this.handleEvent=t=>{let r=this._getValue(t),i=this._value,o=!this._hasValue||!this._equalityComparator(i,r),s=!1;o&&(this._value=r,this._hasValue&&(s=!0,Vf(this._getTransaction(),a=>{Se()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this._hasValue});for(let u of this._observers)a.updateObserver(u,this),u.handleChange(this,void 0)},()=>{let a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")})),this._hasValue=!0),s||Se()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this._hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this._subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this._subscription.dispose(),this._subscription=void 0,this._hasValue=!1,this._value=void 0}get(){return this._subscription?(this._hasValue||this.handleEvent(void 0),this._value):this._getValue(void 0)}debugSetValue(t){this._value=t}debugGetState(){return{value:this._value,hasValue:this._hasValue}}};(t=>{t.Observer=Pt;function e(r,i){let o=!1;Pt.globalTransaction===void 0&&(Pt.globalTransaction=r,o=!0);try{i()}finally{o&&(Pt.globalTransaction=void 0)}}t.batchEventsGlobally=e})(on||={});function ab(n){let e=new Ml(!1,void 0);return n.addObserver(e),Ct(()=>{n.removeObserver(e)})}ib(ab);function ub(n,e){let t=new Ml(!0,e);n.addObserver(t);try{t.beginUpdate(n)}finally{t.endUpdate(n)}return Ct(()=>{n.removeObserver(t)})}nb(ub);var Ml=class{constructor(e,t){this._forceRecompute=e;this._handleValue=t;this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter===1&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges()),this._counter--}handlePossibleChange(e){}handleChange(e,t){}};function Ul(n,e,t=$e.ofCaller()){return new Gf(typeof n=="string"?n:new Ye(n,void 0,void 0),e,t)}var Gf=class extends rn{constructor(t,r,i){super(i);this.event=r;this.handleEvent=()=>{Gr(t=>{for(let r of this._observers)t.updateObserver(r,this),r.handleChange(this,void 0)},()=>this.debugName)};this.debugName=typeof t=="string"?t:t.getDebugName(this)??"Observable Signal From Event"}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}};var Bl;function cb(n){Bl||(Bl=new Ka,za(Bl)),Bl.addFilteredObj(n)}var Ka=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return zI([Yo(JI("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Yo(" "),sn(an(e.oldValue,70),{color:"red",strikeThrough:!0}),Yo(" "),sn(an(e.newValue,60),{color:"green"})]:[Yo(" (unchanged)")]:[Yo(" "),sn(an(e.newValue,60),{color:"green"}),Yo(" (initial)")]}handleObservableCreated(e){if(e instanceof Ze){let t=e;if(this.changedObservablesSets.set(t,new Set),!1){let i=[];t.__debugUpdating=i;let o=t.beginUpdate;t.beginUpdate=a=>(i.push(a),o.apply(t,[a]));let s=t.endUpdate;t.endUpdate=a=>{let u=i.indexOf(a);return u===-1&&console.error("endUpdate called without beginUpdate",t.debugName,a.debugName),i.splice(u,1),s.apply(t,[a])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this._isIncluded(e)){if(e instanceof Ze){this._handleDerivedRecomputed(e,t);return}console.log(...this.textToConsoleArgs([Zo("observable value changed"),sn(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}}formatChanges(e){if(e.size!==0)return sn(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,r){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this._isIncluded(e))return;let r=this.changedObservablesSets.get(e);r&&(console.log(...this.textToConsoleArgs([Zo("derived recomputed"),sn(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Zo("derived cleared"),sn(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Zo("observable from event triggered"),sn(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,r){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(t)}handleAutorunStarted(e){let t=this.changedObservablesSets.get(e);t&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Zo("autorun"),sn(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Zo("transaction"),sn(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function zI(n){let e=new Array,t=[],r="";function i(s){if("length"in s)for(let a of s)a&&i(a);else"text"in s?(r+=`%c${s.text}`,e.push(s.style),s.data&&t.push(...s.data)):"data"in s&&t.push(...s.data)}i(n);let o=[r,...e];return o.push(...t),o}function Yo(n){return sn(n,{color:"black"})}function Zo(n){return sn(QI(`${n}: `,10),{color:"black",bold:!0})}function sn(n,e={color:"black"}){function t(i){return Object.entries(i).reduce((o,[s,a])=>`${o}${s}:${a};`,"")}let r={color:e.color};return e.strikeThrough&&(r["text-decoration"]="line-through"),e.bold&&(r["font-weight"]="bold"),{text:n,style:t(r)}}function an(n,e){switch(typeof n){case"number":return""+n;case"string":return n.length+2<=e?`"${n}"`:`"${n.substr(0,e-7)}"+...`;case"boolean":return n?"true":"false";case"undefined":return"undefined";case"object":return n===null?"null":Array.isArray(n)?HI(n,e):KI(n,e);case"symbol":return n.toString();case"function":return`[[Function${n.name?" "+n.name:""}]]`;default:return""+n}}function HI(n,e){let t="[ ",r=!0;for(let i of n){if(r||(t+=", "),t.length-5>e){t+="...";break}r=!1,t+=`${an(i,e-t.length)}`}return t+=" ]",t}function KI(n,e){if(typeof n.toString=="function"&&n.toString!==Object.prototype.toString){let o=n.toString();return o.length<=e?o:o.substring(0,e-3)+"..."}let t=Mf(n),r=t?t+"(":"{ ",i=!0;for(let[o,s]of Object.entries(n)){if(i||(r+=", "),r.length-5>e){r+="...";break}i=!1,r+=`${o}: ${an(s,e-r.length)}`}return r+=t?")":" }",r}function JI(n,e){let t="";for(let r=1;r<=e;r++)t+=n;return t}function QI(n,e){for(;n.length<e;)n+=" ";return n}var Vl=class n{constructor(e,t){this._channelFactory=e;this._getHandler=t;this._channel=this._channelFactory({handleNotification:o=>{let s=o,a=this._getHandler().notifications[s[0]];if(!a)throw new Error(`Unknown notification "${s[0]}"!`);a(...s[1])},handleRequest:o=>{let s=o;try{return{type:"result",value:this._getHandler().requests[s[0]](...s[1])}}catch(a){return{type:"error",value:a}}}});let r=new Proxy({},{get:(o,s)=>async(...a)=>{let u=await this._channel.sendRequest([s,a]);if(u.type==="error")throw u.value;return u.value}}),i=new Proxy({},{get:(o,s)=>(...a)=>{this._channel.sendNotification([s,a])}});this.api={notifications:i,requests:r}}static createHost(e,t){return new n(e,t)}static createClient(e,t){return new n(e,t)}};function db(n,e){let t=globalThis,r=[],i,{channel:o,handler:s}=XI({sendNotification:u=>{i?i.sendNotification(u):r.push(u)}}),a;return(t.$$debugValueEditor_debugChannels??(t.$$debugValueEditor_debugChannels={}))[n]=u=>{a=e(),i=u;for(let l of r)u.sendNotification(l);return r=[],s},Vl.createClient(o,()=>{if(!a)throw new Error("Not supported");return a})}function XI(n){let e;return{channel:r=>(e=r,{sendNotification:i=>{n.sendNotification(i)},sendRequest:i=>{throw new Error("not supported")}}),handler:{handleRequest:r=>r.type==="notification"?e?.handleNotification(r.data):e?.handleRequest(r.data)}}}var ql=class{constructor(){this._timeout=void 0}throttle(e,t){this._timeout===void 0&&(this._timeout=setTimeout(()=>{this._timeout=void 0,e()},t))}dispose(){this._timeout!==void 0&&clearTimeout(this._timeout)}};function zf(n,e){for(let t in e)n[t]&&typeof n[t]=="object"&&e[t]&&typeof e[t]=="object"?zf(n[t],e[t]):n[t]=e[t]}function Hf(n,e){for(let t in e)e[t]===null?delete n[t]:n[t]&&typeof n[t]=="object"&&e[t]&&typeof e[t]=="object"?Hf(n[t],e[t]):n[t]=e[t]}qt();we();var $l=class n{constructor(){this._declarationId=0;this._instanceId=0;this._declarations=new Map;this._instanceInfos=new WeakMap;this._aliveInstances=new Map;this._activeTransactions=new Set;this._channel=db("observableDevTools",()=>({notifications:{setDeclarationIdFilter:e=>{},logObservableValue:e=>{console.log("logObservableValue",e)},flushUpdates:()=>{this._flushUpdates()},resetUpdates:()=>{this._pendingChanges=null,this._channel.api.notifications.handleChange(this._fullState,!0)}},requests:{getDeclarations:()=>{let e={};for(let t of this._declarations.values())e[t.id]=t;return{decls:e}},getSummarizedInstances:()=>null,getObservableValueInfo:e=>({observers:[...this._aliveInstances.get(e).debugGetObservers()].map(r=>this._formatObserver(r)).filter(Mn)}),getDerivedInfo:e=>{let t=this._aliveInstances.get(e);return{dependencies:[...t.debugGetState().dependencies].map(r=>this._formatObservable(r)).filter(Mn),observers:[...t.debugGetObservers()].map(r=>this._formatObserver(r)).filter(Mn)}},getAutorunInfo:e=>({dependencies:[...this._aliveInstances.get(e).debugGetState().dependencies].map(r=>this._formatObservable(r)).filter(Mn)}),getTransactionState:()=>this.getTransactionState(),setValue:(e,t)=>{let r=this._aliveInstances.get(e);if(r instanceof Ze)r.debugSetValue(t);else if(r instanceof dr)r.debugSetValue(t);else if(r instanceof Pt)r.debugSetValue(t);else throw new G("Observable is not supported");let i=[...r.debugGetObservers()];for(let o of i)o.beginUpdate(r);for(let o of i)o.handleChange(r,void 0);for(let o of i)o.endUpdate(r)},getValue:e=>{let t=this._aliveInstances.get(e);if(t instanceof Ze)return an(t.debugGetState().value,200);if(t instanceof dr)return an(t.debugGetState().value,200)},logValue:e=>{let t=this._aliveInstances.get(e);if(t&&"get"in t)console.log("Logged Value:",t.get());else throw new G("Observable is not supported")},rerun:e=>{let t=this._aliveInstances.get(e);if(t instanceof Ze)t.debugRecompute();else if(t instanceof pr)t.debugRerun();else throw new G("Observable is not supported")}}}));this._pendingChanges=null;this._changeThrottler=new ql;this._fullState={};this._flushUpdates=()=>{this._pendingChanges!==null&&(this._channel.api.notifications.handleChange(this._pendingChanges,!1),this._pendingChanges=null)};$e.enable()}static{this._instance=void 0}static getInstance(){return n._instance===void 0&&(n._instance=new n),n._instance}getTransactionState(){let e=[],t=[...this._activeTransactions];if(t.length===0)return;let r=t.flatMap(o=>o.debugGetUpdatingObservers()??[]).map(o=>o.observer),i=new Set;for(;r.length>0;){let o=r.shift();if(i.has(o))continue;i.add(o);let s=this._getInfo(o,a=>{i.has(a)||r.push(a)});s&&e.push(s)}return{names:t.map(o=>o.getDebugName()??"tx"),affected:e}}_getObservableInfo(e){let t=this._instanceInfos.get(e);if(!t){at(new G("No info found"));return}return t}_getAutorunInfo(e){let t=this._instanceInfos.get(e);if(!t){at(new G("No info found"));return}return t}_getInfo(e,t){if(e instanceof Ze){let r=[...e.debugGetObservers()];for(let u of r)t(u);let i=this._getObservableInfo(e);if(!i)return;let o=e.debugGetState(),s={name:e.debugName,instanceId:i.instanceId,updateCount:o.updateCount},a=[...i.changedObservables].map(u=>this._instanceInfos.get(u)?.instanceId).filter(Mn);if(o.isComputing)return{...s,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(o.state){case 0:return{...s,type:"observable/derived",state:"noValue"};case 3:return{...s,type:"observable/derived",state:"upToDate"};case 2:return{...s,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...s,type:"observable/derived",state:"possiblyStale"}}}else if(e instanceof pr){let r=this._getAutorunInfo(e);if(!r)return;let i={name:e.debugName,instanceId:r.instanceId,updateCount:r.updateCount},o=[...r.changedObservables].map(s=>this._instanceInfos.get(s).instanceId);if(e.debugGetState().isRunning)return{...i,type:"autorun",state:"updating",changedDependencies:o};switch(e.debugGetState().state){case 3:return{...i,type:"autorun",state:"upToDate"};case 2:return{...i,type:"autorun",state:"stale",changedDependencies:o};case 1:return{...i,type:"autorun",state:"possiblyStale"}}}}_formatObservable(e){let t=this._getObservableInfo(e);if(t)return{name:e.debugName,instanceId:t.instanceId}}_formatObserver(e){if(e instanceof Ze)return{name:e.toString(),instanceId:this._getObservableInfo(e)?.instanceId};let t=this._getAutorunInfo(e);if(t)return{name:e.toString(),instanceId:t.instanceId}}_handleChange(e){Hf(this._fullState,e),this._pendingChanges===null?this._pendingChanges=e:zf(this._pendingChanges,e),this._changeThrottler.throttle(this._flushUpdates,10)}_getDeclarationId(e,t){if(!t)return-1;let r=this._declarations.get(t.id);return r===void 0&&(r={id:this._declarationId++,type:e,url:t.fileName,line:t.line,column:t.column},this._declarations.set(t.id,r),this._handleChange({decls:{[r.id]:r}})),r.id}handleObservableCreated(e,t){let i={declarationId:this._getDeclarationId("observable/value",t),instanceId:this._instanceId++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,i)}handleOnListenerCountChanged(e,t){let r=this._getObservableInfo(e);if(r){if(r.listenerCount===0&&t>0){let i=e instanceof Ze?"observable/derived":"observable/value";this._aliveInstances.set(r.instanceId,e),this._handleChange({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,formattedValue:r.lastValue,type:i,name:e.debugName}}})}else r.listenerCount>0&&t===0&&(this._handleChange({instances:{[r.instanceId]:null}}),this._aliveInstances.delete(r.instanceId));r.listenerCount=t}}handleObservableUpdated(e,t){if(e instanceof Ze){this._handleDerivedRecomputed(e,t);return}let r=this._getObservableInfo(e);r&&t.didChange&&(r.lastValue=an(t.newValue,30),r.listenerCount>0&&this._handleChange({instances:{[r.instanceId]:{formattedValue:r.lastValue}}}))}handleAutorunCreated(e,t){let i={declarationId:this._getDeclarationId("autorun",t),instanceId:this._instanceId++,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,i),this._aliveInstances.set(i.instanceId,e),i&&this._handleChange({instances:{[i.instanceId]:{instanceId:i.instanceId,declarationId:i.declarationId,runCount:0,type:"autorun",name:e.debugName}}})}handleAutorunDisposed(e){let t=this._getAutorunInfo(e);t&&(this._handleChange({instances:{[t.instanceId]:null}}),this._instanceInfos.delete(e),this._aliveInstances.delete(t.instanceId))}handleAutorunDependencyChanged(e,t,r){let i=this._getAutorunInfo(e);i&&i.changedObservables.add(t)}handleAutorunStarted(e){}handleAutorunFinished(e){let t=this._getAutorunInfo(e);t&&(t.changedObservables.clear(),t.updateCount++,this._handleChange({instances:{[t.instanceId]:{runCount:t.updateCount}}}))}handleDerivedDependencyChanged(e,t,r){let i=this._getObservableInfo(e);i&&i.changedObservables.add(t)}_handleDerivedRecomputed(e,t){let r=this._getObservableInfo(e);if(!r)return;let i=an(t.newValue,30);r.updateCount++,r.changedObservables.clear(),r.lastValue=i,r.listenerCount>0&&this._handleChange({instances:{[r.instanceId]:{formattedValue:i,recomputationCount:r.updateCount}}})}handleDerivedCleared(e){let t=this._getObservableInfo(e);t&&(t.lastValue=void 0,t.changedObservables.clear(),t.listenerCount>0&&this._handleChange({instances:{[t.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(e){this._activeTransactions.add(e)}handleEndTransaction(e){this._activeTransactions.delete(e)}};function pb(n,e){let t=e?.debugNamePostProcessor??(o=>o),r=Kf.from(n,t);return r?fb(r,0,new Set).trim():""}function fb(n,e,t){let r="		".repeat(e),i=[];if(t.has(n.sourceObj))return i.push(`${r}* ${n.type} ${n.name} (already listed)`),i.join(`
`);if(t.add(n.sourceObj),i.push(`${r}* ${n.type} ${n.name}:`),i.push(`${r}  value: ${an(n.value,50)}`),i.push(`${r}  state: ${n.state}`),n.dependencies.length>0){i.push(`${r}  dependencies:`);for(let s of n.dependencies)i.push(fb(s,e+1,t))}return i.join(`
`)}var Kf=class n{constructor(e,t,r,i,o,s){this.sourceObj=e;this.name=t;this.type=r;this.value=i;this.state=o;this.dependencies=s}static from(e,t){if(e instanceof pr){let r=e.debugGetState();return new n(e,t(e.debugName),"autorun",void 0,r.stateStr,Array.from(r.dependencies).map(i=>n.from(i,t)||n.unknown(i)))}else if(e instanceof Ze){let r=e.debugGetState();return new n(e,t(e.debugName),"derived",r.value,r.stateStr,Array.from(r.dependencies).map(i=>n.from(i,t)||n.unknown(i)))}else if(e instanceof dr){let r=e.debugGetState();return new n(e,t(e.debugName),"observableValue",r.value,"upToDate",[])}else if(e instanceof Pt){let r=e.debugGetState();return new n(e,t(e.debugName),"fromEvent",r.value,r.hasValue?"upToDate":"initial",[])}}static unknown(e){return new n(e,"(unknown)","unknown",void 0,"unknown",[])}};sb(pb);Y1(cb);var e4=!1;e4&&za(new Ka);tn&&tn.VSCODE_DEV_DEBUG_OBSERVABLES&&za($l.getInstance());qt();Fn();var Gi=class{constructor(e){this.type=e}validate(e){return typeof e!==this.type?{content:void 0,error:{message:`Expected ${this.type}, but got ${typeof e}`}}:{content:e,error:void 0}}toSchema(){return{type:this.type}}},t4=new Gi("string");function zi(){return t4}var mO=new Gi("number");var n4=new Gi("boolean");function Hr(){return n4}var hO=new Gi("object");var r4=new Gi("undefined");function mb(){return r4}function Jf(n){return{validate(e){return e===void 0?{content:void 0,error:{message:"Required field is missing"}}:n.validate(e)},toSchema(){return n.toSchema()},isRequired(){return!0}}}function hb(n){return{validate(e){if(typeof e!="object"||e===null)return{content:void 0,error:{message:"Expected object"}};let t={};for(let r in n){let i=n[r],o=e[r],s=i.isRequired?.()??!1;if(s&&o===void 0)return{content:void 0,error:{message:`Required field '${r}' is missing`}};if(!s&&o===void 0)continue;let{content:a,error:u}=i.validate(o);if(u)return{content:void 0,error:{message:`Error in property '${r}': ${u.message}`}};t[r]=a}return{content:t,error:void 0}},toSchema(){let e=[],t={};for(let[i,o]of Object.entries(n))t[i]=o.toSchema(),o.isRequired?.()&&e.push(i);return{type:"object",properties:t,...e.length>0?{required:e}:{}}}}}function gb(...n){return{validate(e){let t;for(let r of n){let{content:i,error:o}=r.validate(e);if(!o)return{content:i,error:void 0};t=o}return{content:void 0,error:t}},toSchema(){return{oneOf:n.map(e=>e.toSchema())}}}}function bb(...n){return{validate(e){return n.indexOf(e)===-1?{content:void 0,error:{message:`Expected one of: ${n.join(", ")}`}}:{content:e,error:void 0}},toSchema(){return{enum:n}}}}var Qf=(o=>(o.UnifiedModel="xtabUnifiedModel",o.Codexv21NesUnified="codexv21nesUnified",o.Nes41Miniv3="nes41miniv3",o.SimplifiedSystemPrompt="simplifiedSystemPrompt",o.Xtab275="xtab275",o))(Qf||{}),Xf=(r=>(r.CodeBlock="codeBlock",r.UnifiedWithXml="unifiedWithXml",r.EditWindowOnly="editWindowOnly",r))(Xf||{});(e=>{function n(t){switch(t){case"xtabUnifiedModel":case"codexv21nesUnified":case"nes41miniv3":return"unifiedWithXml";case"xtab275":return"editWindowOnly";case"simplifiedSystemPrompt":case void 0:return"codeBlock";default:Zu(t)}}e.fromPromptingStrategy=n})(Xf||={});var Tt={promptingStrategy:void 0,currentFile:{maxTokens:2e3,includeTags:!0,prioritizeAboveCursor:!1},pagedClipping:{pageSize:10},recentlyViewedDocuments:{nDocuments:5,maxTokens:2e3,includeViewedFiles:!1},languageContext:{enabled:!1,maxTokens:2e3},diffHistory:{nEntries:25,maxTokens:1e3,onlyForDocsInPrompt:!1,useRelativePaths:!1},includePostScript:!0},vb={prompt:!0,instructions:!0,chatagent:!0},xb=hb({modelName:Jf(zi()),promptingStrategy:gb(bb(...Object.values(Qf)),mb()),includeTagsInCurrentFile:Jf(Hr())});we();wt();Fn();Je();jl();Je();fr();Fn();Je();qn();Ht();Hi();Nr();fr();qn();Ht();var Gl=class{getOffsetRange(e){return new ie(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getRange(e){return q.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getStringEdit(e){let t=e.replacements.map(r=>this.getStringReplacement(r));return new mr.deps.StringEdit(t)}getStringReplacement(e){return new mr.deps.StringReplacement(this.getOffsetRange(e.range),e.text)}getTextReplacement(e){return new mr.deps.TextReplacement(this.getRange(e.replaceRange),e.newText)}getTextEdit(e){let t=e.replacements.map(r=>this.getTextReplacement(r));return new mr.deps.TextEdit(t)}},mr=class{static{this._deps=void 0}static get deps(){if(!this._deps)throw new Error("Dependencies not set. Call _setDependencies first.");return this._deps}};function kb(n){mr._deps=n}var es=class extends Gl{constructor(t){super();this.text=t;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<t.length;r++)t.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&t.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(t.length)}getOffset(t){let r=this._validatePosition(t);return this.lineStartOffsetByLineIdx[r.lineNumber-1]+r.column-1}_validatePosition(t){if(t.lineNumber<1)return new ae(1,1);let r=this.textLength.lineCount+1;if(t.lineNumber>r){let o=this.getLineLength(r);return new ae(r,o+1)}if(t.column<1)return new ae(t.lineNumber,1);let i=this.getLineLength(t.lineNumber);return t.column-1>i?new ae(t.lineNumber,i+1):t}getPosition(t){let r=Or(this.lineStartOffsetByLineIdx,s=>s<=t),i=r+1,o=t-this.lineStartOffsetByLineIdx[r]+1;return new ae(i,o)}getTextLength(t){return mr.deps.TextLength.ofRange(this.getRange(t))}get textLength(){let t=this.lineStartOffsetByLineIdx.length-1;return new mr.deps.TextLength(t,this.text.length-this.lineStartOffsetByLineIdx[t])}getLineLength(t){return this.lineEndOffsetByLineIdx[t-1]-this.lineStartOffsetByLineIdx[t-1]}};var Yf=class{constructor(){this._transformer=void 0}get endPositionExclusive(){return this.length.addToPosition(new ae(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getValueOfOffsetRange(e){return this.getValueOfRange(this.getTransformer().getRange(e))}getLineLength(e){return this.getValueOfRange(new q(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new es(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new q(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Gt(e)}getLinesOfRange(e){return e.mapToLineArray(t=>this.getLineAt(t))}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var hr=class extends Yf{constructor(t){super();this.value=t;this._t=new es(this.value)}getValueOfRange(t){return this._t.getOffsetRange(t).substring(this.value)}get length(){return this._t.textLength}getTransformer(){return this._t}};wt();we();fr();var Ja=class{constructor(e){this.replacements=e;let t=-1;for(let r of e){if(!(r.replaceRange.start>=t))throw new G(`Edits must be disjoint and sorted. Found ${r} after ${t}`);t=r.replaceRange.endExclusive}}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let t=0;t<this.replacements.length;t++)if(!this.replacements[t].equals(e.replacements[t]))return!1;return!0}toString(){return`[${this.replacements.map(t=>t.toString()).join(", ")}]`}normalize(){let e=[],t;for(let r of this.replacements)if(!(r.getNewLength()===0&&r.replaceRange.length===0)){if(t&&t.replaceRange.endExclusive===r.replaceRange.start){let i=t.tryJoinTouching(r);if(i){t=i;continue}}t&&e.push(t),t=r}return t&&e.push(t),this._createNew(e)}compose(e){let t=this.normalize(),r=e.normalize();if(t.isEmpty())return r;if(r.isEmpty())return t;let i=[...t.replacements],o=[],s=0;for(let a of r.replacements){for(;;){let d=i[0];if(!d||d.replaceRange.start+s+d.getNewLength()>=a.replaceRange.start)break;i.shift(),o.push(d),s+=d.getNewLength()-d.replaceRange.length}let u=s,l,p;for(;;){let d=i[0];if(!d||d.replaceRange.start+s>a.replaceRange.endExclusive)break;l||(l=d),p=d,i.shift(),s+=d.getNewLength()-d.replaceRange.length}if(!l)o.push(a.delta(-s));else{let d=Math.min(l.replaceRange.start,a.replaceRange.start-u),f=a.replaceRange.start-(l.replaceRange.start+u);if(f>0){let x=l.slice(ie.emptyAt(d),new ie(0,f));o.push(x)}if(!p)throw new G("Invariant violation: lastIntersecting is undefined");let h=p.replaceRange.endExclusive+s-a.replaceRange.endExclusive;if(h>0){let x=p.slice(ie.ofStartAndLength(p.replaceRange.endExclusive,0),new ie(p.getNewLength()-h,p.getNewLength()));i.unshift(x),s-=x.getNewLength()-x.replaceRange.length}let m=new ie(d,a.replaceRange.endExclusive-s),g=a.slice(m,new ie(0,a.getNewLength()));o.push(g)}}for(;;){let a=i.shift();if(!a)break;o.push(a)}return this._createNew(o).normalize()}decomposeSplit(e){let t=[],r=[],i=0;for(let o of this.replacements)e(o)?(t.push(o),i+=o.getNewLength()-o.replaceRange.length):r.push(o.slice(o.replaceRange.delta(i),new ie(0,o.getNewLength())));return{e1:this._createNew(t),e2:this._createNew(r)}}getNewRanges(){let e=[],t=0;for(let r of this.replacements)e.push(ie.ofStartAndLength(r.replaceRange.start+t,r.getNewLength())),t+=r.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return B0(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let t=0;for(let r of this.replacements)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return r.replaceRange.start+t;t+=r.getNewLength()-r.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new ie(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let r of this.replacements){let i=r.getNewLength();if(r.replaceRange.start<=e-t){if(e-t<r.replaceRange.start+i)return r.replaceRange.start;t+=i-r.replaceRange.length}else break}return e-t}applyToOffsetOrUndefined(e){let t=0;for(let r of this.replacements)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return;t+=r.getNewLength()-r.replaceRange.length}else break;return e+t}applyToOffsetRangeOrUndefined(e){let t=this.applyToOffsetOrUndefined(e.start);if(t===void 0)return;let r=this.applyToOffsetOrUndefined(e.endExclusive);if(r!==void 0)return new ie(t,r)}},zl=class{constructor(e){this.replaceRange=e}delta(e){return this.slice(this.replaceRange.delta(e),new ie(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new ie(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},Ib=class n extends Ja{static{this.empty=new n([])}static create(e){return new n(e)}static single(e){return new n([e])}_createNew(e){return new n(e)}};var ns=class extends Ja{get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let t=e[0];for(let r=1;r<e.length;r++)t=t.compose(e[r]);return t}static trySwap(e,t){let r=e.inverseOnSlice((s,a)=>" ".repeat(a-s)),i=t.tryRebase(r);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let t=[],r=0;for(let i of this.replacements)t.push(e.substring(r,i.replaceRange.start)),t.push(i.newText),r=i.replaceRange.endExclusive;return t.push(e.substring(r)),t.join("")}inverseOnSlice(e){let t=[],r=0;for(let i of this.replacements)t.push(Re.replace(ie.ofStartAndLength(i.replaceRange.start+r,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),r+=i.newText.length-i.replaceRange.length;return new oe(t)}inverse(e){return this.inverseOnSlice((t,r)=>e.substring(t,r))}rebaseSkipConflicting(e){return this._tryRebase(e,!1)}tryRebase(e){return this._tryRebase(e,!0)}_tryRebase(e,t){let r=[],i=0,o=0,s=0;for(;o<this.replacements.length||i<e.replacements.length;){let a=e.replacements[i],u=this.replacements[o];if(u)if(!a)r.push(new Re(u.replaceRange.delta(s),u.newText)),o++;else if(u.replaceRange.intersectsOrTouches(a.replaceRange)){if(o++,t)return}else u.replaceRange.start<a.replaceRange.start?(r.push(new Re(u.replaceRange.delta(s),u.newText)),o++):(i++,s+=a.newText.length-a.replaceRange.length);else break}return new oe(r)}toJson(){return this.replacements.map(e=>e.toJson())}isNeutralOn(e){return this.replacements.every(t=>t.isNeutralOn(e))}removeCommonSuffixPrefix(e){let t=[];for(let r of this.replacements){let i=r.removeCommonSuffixPrefix(e);i.isEmpty||t.push(i)}return new oe(t)}normalizeEOL(e){return new oe(this.replacements.map(t=>t.normalizeEOL(e)))}normalizeOnSource(e){let t=this.apply(e),i=Re.replace(ie.ofLength(e.length),t).removeCommonSuffixAndPrefix(e);return i.isEmpty?oe.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(t=>t.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new hr(this.apply(e.value))}mapData(e){return new Zf(this.replacements.map(t=>new ts(t.replaceRange,t.newText,e(t))))}},Hl=class extends zl{constructor(t,r){super(t);this.newText=r}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(t){return t.substring(0,this.replaceRange.start)+this.newText+t.substring(this.replaceRange.endExclusive)}isNeutralOn(t){return this.newText===t.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(t){let r=t.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=Fi(r,this.newText),o=Math.min(r.length-i,this.newText.length-i,Mi(r,this.newText)),s=new ie(this.replaceRange.start+i,this.replaceRange.endExclusive-o),a=this.newText.substring(i,this.newText.length-o);return new Re(s,a)}normalizeEOL(t){let r=this.newText.replace(/\r\n|\n/g,t);return new Re(this.replaceRange,r)}removeCommonSuffixAndPrefix(t){return this.removeCommonSuffix(t).removeCommonPrefix(t)}removeCommonPrefix(t){let r=this.replaceRange.substring(t),i=Fi(r,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new ie(i,this.newText.length))}removeCommonSuffix(t){let r=this.replaceRange.substring(t),i=Mi(r,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new ie(0,this.newText.length-i))}toEdit(){return new oe([this])}toJson(){return{txt:this.newText,pos:this.replaceRange.start,len:this.replaceRange.length}}},oe=class n extends ns{static{this.empty=new n([])}static create(e){return new n(e)}static single(e){return new n([e])}static replace(e,t){return new n([new Re(e,t)])}static insert(e,t){return new n([new Re(ie.emptyAt(e),t)])}static delete(e){return new n([new Re(e,"")])}static fromJson(e){return new n(e.map(Re.fromJson))}static compose(e){if(e.length===0)return n.empty;let t=e[0];for(let r=1;r<e.length;r++)t=t.compose(e[r]);return t}static composeSequentialReplacements(e){let t=n.empty,r=[];for(let i of e){let o=r.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?r.push(i):(t=t.compose(n.create(r.reverse())),r=[i])}return t=t.compose(n.create(r.reverse())),t}constructor(e){super(e)}_createNew(e){return new n(e)}},Re=class n extends Hl{static insert(e,t){return new n(ie.emptyAt(e),t)}static replace(e,t){return new n(e,t)}static delete(e){return new n(e,"")}static fromJson(e){return new n(ie.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new n(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,t){return new n(e,t?t.substring(this.newText):this.newText)}};var Zf=class n extends ns{static{this.empty=new n([])}static create(e){return new n(e)}static single(e){return new n([e])}static replace(e,t,r){return new n([new ts(e,t,r)])}static insert(e,t,r){return new n([new ts(ie.emptyAt(e),t,r)])}static delete(e,t){return new n([new ts(e,"",t)])}static compose(e){if(e.length===0)return n.empty;let t=e[0];for(let r=1;r<e.length;r++)t=t.compose(e[r]);return t}constructor(e){super(e)}_createNew(e){return new n(e)}toStringEdit(e){let t=[];for(let r of this.replacements)(!e||e(r))&&t.push(new Re(r.replaceRange,r.newText));return new oe(t)}},ts=class n extends Hl{constructor(t,r,i){super(t,r);this.data=i}static insert(t,r,i){return new n(ie.emptyAt(t),r,i)}static replace(t,r,i){return new n(t,r,i)}static delete(t,r){return new n(t,"",r)}equals(t){return this.replaceRange.equals(t.replaceRange)&&this.newText===t.newText&&this.data===t.data}tryJoinTouching(t){let r=this.data.join(t.data);if(r!==void 0)return new n(this.replaceRange.joinRightTouching(t.replaceRange),this.newText+t.newText,r)}slice(t,r){return new n(t,r?r.substring(this.newText):this.newText,this.data)}};qn();Ht();wt();Fn();we();Je();qn();Ht();Hi();var gr=class n{constructor(e){this.replacements=e;Nn(()=>el(e,(t,r)=>t.range.getEndPosition().isBeforeOrEqual(r.range.getStartPosition())))}static fromStringEdit(e,t){let r=e.replacements.map(i=>ft.fromStringReplacement(i,t));return new n(r)}static replace(e,t){return new n([new ft(e,t)])}static delete(e){return new n([new ft(e,"")])}static insert(e,t){return new n([new ft(q.fromPositions(e,e),t)])}static fromParallelReplacementsUnsorted(e){let t=e.slice().sort(Fr(r=>r.range,q.compareRangesUsingStarts));return new n(t)}normalize(){let e=[];for(let t of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(t.range.getStartPosition())){let r=e[e.length-1];e[e.length-1]=new ft(r.range.plusRange(t.range),r.text+t.text)}else t.isEmpty||e.push(t);return new n(e)}mapPosition(e){let t=0,r=0,i=0;for(let o of this.replacements){let s=o.range.getStartPosition();if(e.isBeforeOrEqual(s))break;let a=o.range.getEndPosition(),u=nt.ofText(o.text);if(e.isBefore(a)){let l=new ae(s.lineNumber+t,s.column+(s.lineNumber+t===r?i:0)),p=u.addToPosition(l);return Kl(l,p)}s.lineNumber+t!==r&&(i=0),t+=u.lineCount-(o.range.endLineNumber-o.range.startLineNumber),u.lineCount===0?a.lineNumber!==s.lineNumber?i+=u.columnCount-(a.column-1):i+=u.columnCount-(a.column-s.column):i=u.columnCount,r=a.lineNumber+t}return new ae(e.lineNumber+t,e.column+(e.lineNumber+t===r?i:0))}mapRange(e){function t(s){return s instanceof ae?s:s.getStartPosition()}function r(s){return s instanceof ae?s:s.getEndPosition()}let i=t(this.mapPosition(e.getStartPosition())),o=r(this.mapPosition(e.getEndPosition()));return Kl(i,o)}inverseMapPosition(e,t){return this.inverse(t).mapPosition(e)}inverseMapRange(e,t){return this.inverse(t).mapRange(e)}apply(e){let t="",r=new ae(1,1);for(let o of this.replacements){let s=o.range,a=s.getStartPosition(),u=s.getEndPosition(),l=Kl(r,a);l.isEmpty()||(t+=e.getValueOfRange(l)),t+=o.text,r=u}let i=Kl(r,e.endPositionExclusive);return i.isEmpty()||(t+=e.getValueOfRange(i)),t}applyToString(e){let t=new hr(e);return this.apply(t)}inverse(e){let t=this.getNewRanges();return new n(this.replacements.map((r,i)=>new ft(t[i],e.getValueOfRange(r.range))))}getNewRanges(){let e=[],t=0,r=0,i=0;for(let o of this.replacements){let s=nt.ofText(o.text),a=ae.lift({lineNumber:o.range.startLineNumber+r,column:o.range.startColumn+(o.range.startLineNumber===t?i:0)}),u=s.createRange(a);e.push(u),r=u.endLineNumber-o.range.endLineNumber,i=u.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new G;if(this.replacements.length===1)return this.replacements[0];let t=this.replacements[0].range.getStartPosition(),r=this.replacements[this.replacements.length-1].range.getEndPosition(),i="";for(let o=0;o<this.replacements.length;o++){let s=this.replacements[o];if(i+=s.text,o<this.replacements.length-1){let a=this.replacements[o+1],u=q.fromPositions(s.range.getEndPosition(),a.range.getStartPosition()),l=e.getValueOfRange(u);i+=l}}return new ft(q.fromPositions(t,r),i)}equals(e){return Do(this.replacements,e.replacements,(t,r)=>t.equals(r))}toString(e){return e===void 0?this.replacements.map(t=>t.toString()).join(`
`):typeof e=="string"?this.toString(new hr(e)):this.replacements.length===0?"":this.replacements.map(t=>{let i=e.getValueOfRange(t.range),o=q.fromPositions(new ae(Math.max(1,t.range.startLineNumber-1),1),t.range.getStartPosition()),s=e.getValueOfRange(o);s.length>10&&(s="..."+s.substring(s.length-10));let a=q.fromPositions(t.range.getEndPosition(),new ae(t.range.endLineNumber+1,1)),u=e.getValueOfRange(a);u.length>10&&(u=u.substring(0,10)+"...");let l=i;if(l.length>10){let d=Math.floor(5);l=l.substring(0,d)+"..."+l.substring(l.length-d)}let p=t.text;if(p.length>10){let d=Math.floor(5);p=p.substring(0,d)+"..."+p.substring(p.length-d)}return l.length===0?`${s}\u2770${p}\u2771${u}`:`${s}\u2770${l}\u21A6${p}\u2771${u}`}).join(`
`)}},ft=class n{constructor(e,t){this.range=e;this.text=t}static joinReplacements(e,t){if(e.length===0)throw new G;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let s=0;s<e.length;s++){let a=e[s];if(o+=a.text,s<e.length-1){let u=e[s+1],l=q.fromPositions(a.range.getEndPosition(),u.range.getStartPosition()),p=t.getValueOfRange(l);o+=p}}return new n(q.fromPositions(r,i),o)}static fromStringReplacement(e,t){return new n(t.getTransformer().getRange(e.replaceRange),e.newText)}static delete(e){return new n(e,"")}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new gr([this])}equals(e){return n.equals(this,e)}extendToCoverRange(e,t){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=t.getValueOfRange(q.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=t.getValueOfRange(q.fromPositions(this.range.getEndPosition(),r.getEndPosition())),s=i+this.text+o;return new n(r,s)}extendToFullLine(e){let t=new q(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(t,e)}removeCommonPrefixAndSuffix(e){return this.removeCommonPrefix(e).removeCommonSuffix(e)}removeCommonPrefix(e){let t=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=Fi(t,r),o=nt.ofText(t.substring(0,i)).addToPosition(this.range.getStartPosition()),s=r.substring(i),a=q.fromPositions(o,this.range.getEndPosition());return new n(a,s)}removeCommonSuffix(e){let t=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=Mi(t,r),o=nt.ofText(t.substring(0,t.length-i)).addToPosition(this.range.getStartPosition()),s=r.substring(0,r.length-i),a=q.fromPositions(this.range.getStartPosition(),o);return new n(a,s)}isEffectiveDeletion(e){let t=this.text.replaceAll(`\r
`,`
`),r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=Fi(t,r);t=t.substring(i),r=r.substring(i);let o=Mi(t,r);return t=t.substring(0,t.length-o),r=r.substring(0,r.length-o),t===""}toString(){let e=this.range.getStartPosition(),t=this.range.getEndPosition();return`(${e.lineNumber},${e.column} -> ${t.lineNumber},${t.column}): "${this.text}"`}};function Kl(n,e){if(n.lineNumber===e.lineNumber&&n.column===Number.MAX_SAFE_INTEGER)return q.fromPositions(e,e);if(!n.isBeforeOrEqual(e))throw new G("start must be before end");return new q(n.lineNumber,n.column,e.lineNumber,e.column)}var Kr=class n{constructor(e){this.replacements=e;_a(el(e,(t,r)=>t.lineRange.endLineNumberExclusive<=r.lineRange.startLineNumber))}static{this.empty=new n([])}static deserialize(e){return new n(e.map(t=>yn.deserialize(t)))}static fromStringEdit(e,t){let r=gr.fromStringEdit(e,t);return n.fromTextEdit(r,t)}static fromTextEdit(e,t){let r=e.replacements,i=[],o=[];for(let s=0;s<r.length;s++){let a=r[s],u=s+1<r.length?r[s+1]:void 0;if(o.push(a),u&&u.range.startLineNumber===a.range.endLineNumber)continue;let l=ft.joinReplacements(o,t);o.length=0;let p=yn.fromSingleTextEdit(l,t);i.push(p)}return new n(i)}static createFromUnsorted(e){let t=e.slice();return t.sort(Fr(r=>r.lineRange.startLineNumber,Ao)),new n(t)}isEmpty(){return this.replacements.length===0}toEdit(e){let t=[];for(let r of this.replacements){let i=r.toSingleEdit(e);t.push(i)}return new oe(t)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],t=0;for(let r of this.replacements)e.push(lt.ofLength(r.lineRange.startLineNumber+t,r.newLines.length)),t+=r.newLines.length-r.lineRange.length;return e}mapLineNumber(e){let t=0;for(let r of this.replacements){if(r.lineRange.endLineNumberExclusive>e)break;t+=r.newLines.length-r.lineRange.length}return e+t}mapLineRange(e){return new lt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,t){return this.inverse(t).mapLineRange(e)}touches(e){return this.replacements.some(t=>e.replacements.some(r=>t.lineRange.intersect(r.lineRange)))}rebase(e){return new n(this.replacements.map(t=>new yn(e.mapLineRange(t.lineRange),t.newLines)))}humanReadablePatch(e){let t=[];function r(a,u,l,p){let d=l==="unmodified"?" ":l==="deleted"?"-":"+";p===void 0&&(p="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let f=a===-1?"   ":a.toString().padStart(3," "),h=u===-1?"   ":u.toString().padStart(3," ");t.push(`${d} ${f} ${h} ${p}`)}function i(){t.push("---")}let o=0,s=!0;for(let a of N0(this.replacements,(u,l)=>u.lineRange.distanceToRange(l.lineRange)<=5)){s?s=!1:i();let u=a[0].lineRange.startLineNumber-2;for(let l of a){for(let f=Math.max(1,u);f<l.lineRange.startLineNumber;f++)r(f,f+o,"unmodified",e[f-1]);let p=l.lineRange,d=l.newLines;for(let f of p.mapToLineArray(h=>h)){let h=e[f-1];r(f,-1,"deleted",h)}for(let f=0;f<d.length;f++){let h=d[f];r(-1,p.startLineNumber+o+f,"added",h)}u=p.endLineNumberExclusive,o+=l.newLines.length-l.lineRange.length}for(let l=u;l<=Math.min(u+2,e.length);l++)r(l,l+o,"unmodified",e[l-1])}return t.join(`
`)}apply(e){let t=[],r=0;for(let i of this.replacements){for(;r<i.lineRange.startLineNumber-1;)t.push(e[r]),r++;for(let o of i.newLines)t.push(o);r=i.lineRange.endLineNumberExclusive-1}for(;r<e.length;)t.push(e[r]),r++;return t}inverse(e){let t=this.getNewLineRanges();return new n(this.replacements.map((r,i)=>new yn(t[i],e.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1))))}},yn=class n{constructor(e,t){this.lineRange=e;this.newLines=t}static deserialize(e){return new n(lt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,t){let r=Gt(e.text),i=e.range.startLineNumber,o=t.getValueOfRange(q.fromPositions(new ae(e.range.startLineNumber,1),e.range.getStartPosition()));r[0]=o+r[0];let s=e.range.endLineNumber+1,a=t.getTransformer().getLineLength(e.range.endLineNumber)+1,u=t.getValueOfRange(q.fromPositions(e.range.getEndPosition(),new ae(e.range.endLineNumber,a)));r[r.length-1]=r[r.length-1]+u;let l=e.range.startColumn===t.getTransformer().getLineLength(e.range.startLineNumber)+1,p=e.range.endColumn===1;return l&&r[0].length===o.length&&(i++,r.shift()),r.length>0&&i<s&&p&&r[r.length-1].length===u.length&&(s--,r.pop()),new n(new lt(i,s),r)}toSingleTextEdit(e){if(this.newLines.length===0){let t=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===t.lineCount+2){let r;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,s=e.getTransformer().getLineLength(o)+1;r=new ae(o,s)}else r=new ae(1,1);let i=t.addToPosition(new ae(1,1));return new ft(q.fromPositions(r,i),"")}else return new ft(new q(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let t,r,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(t=o-1,r=e.getTransformer().getLineLength(t)+1,i=this.newLines.map(s=>`
`+s).join("")):(t=o,r=1,i=this.newLines.map(s=>s+`
`).join("")),new ft(q.fromPositions(new ae(t,r)),i)}else{let t=this.lineRange.endLineNumberExclusive-1,r=e.getTransformer().getLineLength(t)+1,i=new q(this.lineRange.startLineNumber,1,t,r),o=this.newLines.join(`
`);return new ft(i,o)}}toSingleEdit(e){let t=this.toSingleTextEdit(e),r=e.getTransformer().getOffsetRange(t.range);return new Re(r,t.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let t=this.lineRange.startLineNumber,r=this.lineRange.endLineNumberExclusive,i=0;for(;t<r&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(t);)t++,i++;let o=0;for(;t<r&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(r-1);)r--,o++;return i===0&&o===0?this:new n(new lt(t,r),this.newLines.slice(i,this.newLines.length-o))}toLineEdit(){return new Kr([this])}},o4;(e=>{function n(t){return Array.isArray(t)&&t.length===3&&typeof t[0]=="number"&&typeof t[1]=="number"&&Array.isArray(t[2])&&t[2].every(r=>typeof r=="string")}e.is=n})(o4||={});jl();var Jl;(i=>{i.DEFAULT_DIFF_PARAMS={emitFastCursorLineChange:!1,nSignificantLinesToConverge:2,nLinesToConverge:3};async function*e(o,s,a,u){let l=new em;for(let[h,m]of o.entries())l.add(m,h);let p=0,d=-1,f={k:"aligned"};for await(let h of s){if(++d,p>=o.length){switch(f.k){case"aligned":{f={k:"diverged",startLineIdx:p,newLines:[h]};break}case"diverged":f.newLines.push(h)}continue}if(f.k==="aligned"){if(o[p]===h){++p;continue}f={k:"diverged",startLineIdx:p,newLines:[]}}f.newLines.push(h);let m=r(o,a,l,f,p,u);m&&(yield m.singleLineEdit,p=m.convergenceEndIdx,f={k:"aligned"})}switch(f.k){case"diverged":{let h=new lt(f.startLineIdx+1,o.length+1);yield new yn(h,f.newLines);break}case"aligned":{if(p<o.length){let h=new lt(p+1,o.length+1);yield new yn(h,[])}break}}}i.diff=e;function t(o){return!!o.match(/[a-zA-Z1-9]+/)}function r(o,s,a,u,l,p){if(u.newLines.length===0)throw Ku("Cannot check for convergence without new lines");let d=u.newLines.length-1,f=a.get(u.newLines[d]).map(le=>[le,le]);if(f.length===0){if(!p.emitFastCursorLineChange||l!==s||u.newLines.length>1)return;let le=[l,l+1],Be=new lt(le[0]+1,le[1]+1);return{singleLineEdit:new yn(Be,u.newLines),convergenceEndIdx:l+1}}if(u.newLines.length<p.nSignificantLinesToConverge)return;let h=1,m=t(u.newLines[d])?1:0;--d;let g,x=f[0];for(h>0&&x[0]-u.startLineIdx===u.newLines.length-1&&(g="found_significant_matches");d>=0&&(f=f.map(([le,Be])=>[le,Be-1]),f=f.filter(([le,Be])=>Be>=0&&l<=Be),f=f.filter(([le,Be])=>o[Be]===u.newLines[d]),f.length!==0);--d)if(++h,t(u.newLines[d])&&++m,m===p.nSignificantLinesToConverge&&(g="found_significant_matches",x=f[0]),h===p.nLinesToConverge){g="found_matches",x=f[0];break}if(!g)return;let I=x[1],T=x[0],b=T-I+1,y=I-u.startLineIdx,S=u.newLines.slice(0,u.newLines.length-b),A=S.length;if(y-A>1&&A>0)return;let k=[u.startLineIdx,I],O=new lt(k[0]+1,k[1]+1);return{singleLineEdit:new yn(O,S),convergenceEndIdx:T+1}}})(Jl||={});var em=class{constructor(){this.map=new Map}add(e,t){let r=this.map.get(e);r?r.push(t):this.map.set(e,[t])}get(e){return this.map.get(e)||[]}};var Lt="puku",et=_("IConfigurationService"),Xl=class n extends K{constructor(t){super();this._onDidChangeConfiguration=this._register(new se);this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;this._isInternal=!1;this._isTeamMember=!1;this._teamMemberUsername=void 0;this.observables=new Map;t&&this._register(t.onDidStoreUpdate(()=>{let r=!!t.copilotToken?.isVscodeTeamMember;this._setUserInfo({isInternal:!!t.copilotToken?.isInternal,isTeamMember:r,teamMemberUsername:r?t.copilotToken?.username:void 0})}))}getConfigMixedWithDefaults(t){if(t.options?.valueIgnoredForExternals&&!this._isInternal)return this.getDefaultValue(t);let r=this.getConfig(t);return r===void 0?this.getDefaultValue(t):Mr(r)&&Mr(t.defaultValue)?{...t.defaultValue,...r}:r}getDefaultValue(t){return un.isDefaultValueWithTeamAndInternalValue(t.defaultValue)?this._isUsingTeamDefault(t)?t.defaultValue.teamDefaultValue:this._isInternal?t.defaultValue.internalDefaultValue:t.defaultValue.defaultValue:un.isDefaultValueWithTeamValue(t.defaultValue)?this._isUsingTeamDefault(t)?t.defaultValue.teamDefaultValue:t.defaultValue.defaultValue:t.defaultValue}_setUserInfo(t){this._isInternal===t.isInternal&&this._isTeamMember===t.isTeamMember&&this._teamMemberUsername===t.teamMemberUsername||(this._isInternal=t.isInternal,this._isTeamMember=t.isTeamMember,this._teamMemberUsername=t.teamMemberUsername,this._onDidChangeConfiguration.fire({affectsConfiguration:()=>!0}))}updateExperimentBasedConfiguration(t){t.length!==0&&this._onDidChangeConfiguration.fire({affectsConfiguration:()=>!0})}getConfigObservable(t){return this._getObservable_$show2FramesUp(t,()=>this.getConfig(t))}getExperimentBasedConfigObservable(t,r){return this._getObservable_$show2FramesUp(t,()=>this.getExperimentBasedConfig(t,r))}_getObservable_$show2FramesUp(t,r){let i=this.observables.get(t.id);return i||(i=jf({debugName:()=>`Configuration Key "${t.id}"`},o=>this._register(this.onDidChangeConfiguration(s=>{s.affectsConfiguration(t.fullyQualifiedId)&&o(s)})),r),this.observables.set(t.id,i)),i}_isUsingTeamDefault(t){if(!this._isTeamMember||!un.isDefaultValueWithTeamAndInternalValue(t.defaultValue)&&!un.isDefaultValueWithTeamValue(t.defaultValue))return!1;let r=t.defaultValue.teamDefaultValueRollout;if(r===void 0||r>=1)return!0;let i=`${t.fullyQualifiedId};${this._teamMemberUsername}`;return n._extractHashValue(i)<r}static _extractHashValue(t){let r=new Vn;r.update(t);let i=r.digest().substring(0,8);return parseInt(i,16)/4294967295}isConfigured(t,r){let i=this.inspectConfig(t,r);return i?.globalValue!==void 0||i?.globalLanguageValue!==void 0||i?.workspaceFolderValue!==void 0||i?.workspaceFolderLanguageValue!==void 0||i?.workspaceValue!==void 0||i?.workspaceLanguageValue!==void 0}},un;(t=>{function n(r){return Mr(r)&&"defaultValue"in r&&"teamDefaultValue"in r}t.isDefaultValueWithTeamValue=n;function e(r){return t.isDefaultValueWithTeamValue(r)&&"internalDefaultValue"in r}t.isDefaultValueWithTeamAndInternalValue=e})(un||={});var U={internal:!0,valueIgnoredForExternals:!0},Ql;function s4(){if(!Ql){Ql=new Map;let e=ht.contributes.configuration.map(r=>r.properties),t=Object.assign({},...e);for(let r in t)Ql.set(r,t[r].default)}return Ql}function rm(n,e,t){let r=`${Lt}.${n}`,i=t?.oldKey?`${Lt}.${t.oldKey}`:void 0,o=s4(),s=o.has(r),a=o.get(r);if(s){let l=un.isDefaultValueWithTeamAndInternalValue(e)||un.isDefaultValueWithTeamValue(e)?e.defaultValue:e;if(!jr(l,a))throw new G(`The default value for setting ${n} is different in packageJson and in code`)}if(s&&t?.internal)throw new G(`The setting ${n} is public, it therefore cannot be marked internal!`);if(s&&t?.valueIgnoredForExternals)throw new G(`The setting ${n} is public, it therefore cannot be restricted to internal!`);if(un.isDefaultValueWithTeamAndInternalValue(e)||un.isDefaultValueWithTeamValue(e)){let l=e?.teamDefaultValueRollout;if(l!==void 0&&(l<0||l>1))throw new G(`The rollout ratio for setting ${n} is invalid`)}let u=r.startsWith("puku.advanced.")?r.substring(14):void 0;return{id:n,oldId:t?.oldKey,isPublic:s,fullyQualifiedId:r,fullyQualifiedOldId:i,advancedSubKey:u,defaultValue:e,options:t}}var tm=class{constructor(){this.configs=new Map}registerConfig(e){this.configs.set(e.fullyQualifiedId,e)}},rs=new tm,nm=class{constructor(){this.migrations=[];this._onDidRegisterConfigurationMigrations=new se;this.onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event}registerConfigurationMigrations(e){this.migrations.push(...e),this._onDidRegisterConfigurationMigrations.fire(e)}},a4=new nm;function $n(n,e,t,r){let i={...rm(n,t,r),configType:0,validator:e};return rs.registerConfig(i),i}function j(n,e,t){let r={...rm(n,e,t),configType:0};return rs.registerConfig(r),r}function L(n,e,t,r){let i={...rm(n,e,t),configType:1,experimentName:r?.experimentName};if(i.advancedSubKey)throw new G("Shared settings cannot be experiment based");return rs.registerConfig(i),i}function wb(n,e){a4.registerConfigurationMigrations([{key:`${Lt}.${e}`,migrateFn:async t=>[[`${Lt}.${n}`,{value:t}],[`${Lt}.${e}`,{value:void 0}]]}])}function Fe(n,e,t,r){return wb(e,n),j(e,t,{...r,oldKey:n})}function Me(n,e,t,r,i){return wb(e,n),L(e,t,{...r,oldKey:n},i)}var br=128;var xe;(B=>{let n;(On=>(On.DebugOverrideProxyUrl=j("advanced.debug.overrideProxyUrl",void 0),On.DebugOverrideCAPIUrl=j("advanced.debug.overrideCapiUrl",void 0),On.DebugUseNodeFetchFetcher=j("advanced.debug.useNodeFetchFetcher",!0),On.DebugUseNodeFetcher=j("advanced.debug.useNodeFetcher",!1),On.DebugUseElectronFetcher=j("advanced.debug.useElectronFetcher",!0),On.AuthProvider=j("advanced.authProvider","github"),On.AuthPermissions=j("advanced.authPermissions","default")))(n=B.Shared||={});let e;(J=>(J.DebugOverrideChatEngine=Fe("chat.advanced.debug.overrideChatEngine","chat.debug.overrideChatEngine",void 0),J.WorkspacePrototypeAdoCodeSearchEndpointOverride=Fe("chat.advanced.workspace.prototypeAdoCodeSearchEndpointOverride","chat.workspace.prototypeAdoCodeSearchEndpointOverride",""),J.FeedbackOnChange=Fe("chat.advanced.feedback.onChange","chat.feedback.onChange",!1),J.ReviewIntent=Fe("chat.advanced.review.intent","chat.review.intent",!1),J.NotebookSummaryExperimentEnabled=Fe("chat.advanced.notebook.summaryExperimentEnabled","chat.notebook.summaryExperimentEnabled",!1),J.NotebookVariableFilteringEnabled=Fe("chat.advanced.notebook.variableFilteringEnabled","chat.notebook.variableFilteringEnabled",!1),J.TerminalToDebuggerPatterns=Fe("chat.advanced.debugTerminalCommandPatterns","chat.debugTerminalCommandPatterns",[]),J.WorkspaceRecordingEnabled=Fe("chat.advanced.localWorkspaceRecording.enabled","chat.localWorkspaceRecording.enabled",!1),J.EditRecordingEnabled=Fe("chat.advanced.editRecording.enabled","chat.editRecording.enabled",!1),J.CodeSearchAgentEnabled=Fe("chat.advanced.codesearch.agent.enabled","chat.codesearch.agent.enabled",!0),J.AgentTemperature=Fe("chat.advanced.agent.temperature","chat.agent.temperature",void 0),J.EnableUserPreferences=Fe("chat.advanced.enableUserPreferences","chat.enableUserPreferences",!1),J.SummarizeAgentConversationHistoryThreshold=Fe("chat.advanced.summarizeAgentConversationHistoryThreshold","chat.summarizeAgentConversationHistoryThreshold",void 0),J.AgentHistorySummarizationMode=Fe("chat.advanced.agentHistorySummarizationMode","chat.agentHistorySummarizationMode",void 0),J.UseResponsesApiTruncation=Fe("chat.advanced.useResponsesApiTruncation","chat.useResponsesApiTruncation",!1),J.OmitBaseAgentInstructions=Fe("chat.advanced.omitBaseAgentInstructions","chat.omitBaseAgentInstructions",!1),J.ClaudeCodeDebugEnabled=Fe("chat.advanced.claudeCode.debug","chat.claudeCode.debug",!1),J.CopilotCLIEnabled=Fe("chat.advanced.copilotCLI.enabled","chat.copilotCLI.enabled",!0),J.GitHistoryRelatedFilesUsingEmbeddings=Fe("chat.advanced.suggestRelatedFilesFromGitHistory.useEmbeddings","chat.suggestRelatedFilesFromGitHistory.useEmbeddings",!1),J.CLIIsolationEnabled=Fe("chat.advanced.cli.isolation.enabled","chat.cli.isolation.enabled",!1),J.CLIMCPServerEnabled=Fe("chat.advanced.cli.mcp.enabled","chat.cli.mcp.enabled",!1),J.EditSourceTrackingShowDecorations=Fe("chat.advanced.editSourceTracking.showDecorations","chat.editSourceTracking.showDecorations",!1),J.EditSourceTrackingShowStatusBar=Fe("chat.advanced.editSourceTracking.showStatusBar","chat.editSourceTracking.showStatusBar",!1),J.EnableClaudeCodeAgent=Fe("chat.advanced.claudeCode.enabled","chat.claudeCode.enabled",!1)))(e=B.AdvancedExperimental||={});let t;(J=>(J.ProjectLabelsExpanded=Me("chat.advanced.projectLabels.expanded","chat.projectLabels.expanded",!1),J.ProjectLabelsChat=Me("chat.advanced.projectLabels.chat","chat.projectLabels.chat",!1),J.ProjectLabelsInline=Me("chat.advanced.projectLabels.inline","chat.projectLabels.inline",!1),J.WorkspaceMaxLocalIndexSize=Me("chat.advanced.workspace.maxLocalIndexSize","chat.workspace.maxLocalIndexSize",1e5),J.WorkspaceEnableFullWorkspace=Me("chat.advanced.workspace.enableFullWorkspace","chat.workspace.enableFullWorkspace",!0),J.WorkspaceEnableCodeSearch=Me("chat.advanced.workspace.enableCodeSearch","chat.workspace.enableCodeSearch",!0),J.WorkspaceEnableEmbeddingsSearch=Me("chat.advanced.workspace.enableEmbeddingsSearch","chat.workspace.enableEmbeddingsSearch",!0),J.WorkspacePreferredEmbeddingsModel=Me("chat.advanced.workspace.preferredEmbeddingsModel","chat.workspace.preferredEmbeddingsModel",""),J.NotebookAlternativeDocumentFormat=Me("chat.advanced.notebook.alternativeFormat","chat.notebook.alternativeFormat","xml"),J.UseAlternativeNESNotebookFormat=Me("chat.advanced.notebook.alternativeNESFormat.enabled","chat.notebook.alternativeNESFormat.enabled",!1),J.TemporalContextMaxAge=Me("chat.advanced.temporalContext.maxAge","chat.temporalContext.maxAge",100),J.TemporalContextPreferSameLang=Me("chat.advanced.temporalContext.preferSameLang","chat.temporalContext.preferSameLang",!1),J.InstantApplyShortModelName=Me("chat.advanced.instantApply.shortContextModelName","chat.instantApply.shortContextModelName","gpt-4o-instant-apply-full-ft-v66-short"),J.InstantApplyShortContextLimit=Me("chat.advanced.instantApply.shortContextLimit","chat.instantApply.shortContextLimit",8e3),J.AgentHistorySummarizationWithPromptCache=Me("chat.advanced.agentHistorySummarizationWithPromptCache","chat.agentHistorySummarizationWithPromptCache",!1),J.AgentHistorySummarizationForceGpt41=Me("chat.advanced.agentHistorySummarizationForceGpt41","chat.agentHistorySummarizationForceGpt41",!1),J.PromptFileContext=Me("chat.advanced.promptFileContextProvider.enabled","chat.promptFileContextProvider.enabled",!0),J.DefaultToolsGrouped=Me("chat.advanced.tools.defaultToolsGrouped","chat.tools.defaultToolsGrouped",!1),J.Gpt5AlternativePatch=Me("chat.advanced.gpt5AlternativePatch","chat.gpt5AlternativePatch",!1),J.InlineEditsTriggerOnEditorChangeAfterSeconds=Me("chat.advanced.inlineEdits.triggerOnEditorChangeAfterSeconds","chat.inlineEdits.triggerOnEditorChangeAfterSeconds",{defaultValue:void 0,teamDefaultValue:10}),J.InlineEditsNextCursorPredictionDisplayLine=Me("chat.advanced.inlineEdits.nextCursorPrediction.displayLine","chat.inlineEdits.nextCursorPrediction.displayLine",!0),J.InlineEditsNextCursorPredictionCurrentFileMaxTokens=Me("chat.advanced.inlineEdits.nextCursorPrediction.currentFileMaxTokens","chat.inlineEdits.nextCursorPrediction.currentFileMaxTokens",Tt.currentFile.maxTokens),J.VirtualToolEmbeddingRanking=Me("chat.advanced.virtualTools.embeddingRanking","chat.virtualTools.embeddingRanking",!1),J.MultiReplaceStringGrok=Me("chat.advanced.multiReplaceStringGrok.enabled","chat.multiReplaceStringGrok.enabled",!1)))(t=B.AdvancedExperimentalExperiments||={});let r;(N=>(N.DebugOverrideChatMaxTokenNum=j("chat.advanced.debug.overrideChatMaxTokenNum",0,U),N.DebugReportFeedback=j("chat.advanced.debug.reportFeedback",{defaultValue:!1,teamDefaultValue:!0},U),N.DebugCollectFetcherTelemetry=L("chat.advanced.debug.collectFetcherTelemetry",!0,U),N.DebugExpUseNodeFetchFetcher=L("chat.advanced.debug.useNodeFetchFetcher",void 0,U),N.DebugExpUseNodeFetcher=L("chat.advanced.debug.useNodeFetcher",void 0,U),N.DebugExpUseElectronFetcher=L("chat.advanced.debug.useElectronFetcher",void 0,U),N.RequestLoggerMaxEntries=j("chat.advanced.debug.requestLogger.maxEntries",100),N.InlineEditsIgnoreCompletionsDisablement=$n("chat.advanced.inlineEdits.ignoreCompletionsDisablement",Hr(),!1,U),N.InlineEditsAsyncCompletions=L("chat.advanced.inlineEdits.asyncCompletions",!0,U),N.InlineEditsDebounceUseCoreRequestTime=L("chat.advanced.inlineEdits.debounceUseCoreRequestTime",!1,U),N.InlineEditsYieldToCopilot=L("chat.advanced.inlineEdits.yieldToCopilot",!1,U),N.InlineEditsExcludedProviders=L("chat.advanced.inlineEdits.excludedProviders",void 0,U),N.InlineEditsEnableCompletionsProvider=L("chat.advanced.inlineEdits.completionsProvider.enabled",!1,U),N.InlineEditsEnableGhCompletionsProvider=L("chat.advanced.inlineEdits.githubCompletionsProvider.enabled",!1,U),N.InlineEditsCompletionsUrl=L("chat.advanced.inlineEdits.completionsProvider.url",void 0,U),N.InlineEditsLogContextRecorderEnabled=j("chat.advanced.inlineEdits.logContextRecorder.enabled",!1,U),N.InlineEditsDebounce=L("chat.advanced.inlineEdits.debounce",200,U),N.InlineEditsCacheDelay=L("chat.advanced.inlineEdits.cacheDelay",300,U),N.InlineEditsSubsequentCacheDelay=L("chat.advanced.inlineEdits.subsequentCacheDelay",0,U),N.InlineEditsRebasedCacheDelay=L("chat.advanced.inlineEdits.rebasedCacheDelay",void 0,U),N.InlineEditsBackoffDebounceEnabled=L("chat.advanced.inlineEdits.backoffDebounceEnabled",!0,U),N.InlineEditsExtraDebounceEndOfLine=L("chat.advanced.inlineEdits.extraDebounceEndOfLine",0,U),N.InlineEditsDebounceOnSelectionChange=L("chat.advanced.inlineEdits.debounceOnSelectionChange",void 0,U),N.InlineEditsProviderId=L("chat.advanced.inlineEdits.providerId",void 0,U),N.InlineEditsHideInternalInterface=$n("chat.advanced.inlineEdits.hideInternalInterface",Hr(),!1,U),N.InlineEditsLogCancelledRequests=$n("chat.advanced.inlineEdits.logCancelledRequests",Hr(),!1,U),N.InlineEditsUnification=L("chat.advanced.inlineEdits.unification",!1,U),N.InlineEditsNextCursorPredictionEnabled=L("chat.advanced.inlineEdits.nextCursorPrediction.enabled",{defaultValue:void 0,teamDefaultValue:"onlyWithEdit"},U),N.InlineEditsNextCursorPredictionModelName=L("chat.advanced.inlineEdits.nextCursorPrediction.modelName",{defaultValue:void 0,teamDefaultValue:"xtab-cursor-jump-1104"},U),N.InlineEditsNextCursorPredictionUrl=$n("chat.advanced.inlineEdits.nextCursorPrediction.url",zi(),void 0,U),N.InlineEditsNextCursorPredictionApiKey=$n("chat.advanced.inlineEdits.nextCursorPrediction.apiKey",zi(),void 0,U),N.InlineEditsXtabProviderUrl=$n("chat.advanced.inlineEdits.xtabProvider.url",zi(),void 0,U),N.InlineEditsXtabProviderApiKey=$n("chat.advanced.inlineEdits.xtabProvider.apiKey",zi(),void 0,U),N.InlineEditsXtabProviderModelConfiguration=$n("chat.advanced.inlineEdits.xtabProvider.modelConfiguration",xb,{defaultValue:void 0,teamDefaultValue:{modelName:"puku-nes-codestral",promptingStrategy:"xtab275",includeTagsInCurrentFile:!1}},U),N.InlineEditsXtabProviderModelConfigurationString=L("chat.advanced.inlineEdits.xtabProvider.modelConfigurationString",void 0,U),N.InlineEditsXtabProviderDefaultModelConfigurationString=L("chat.advanced.inlineEdits.xtabProvider.defaultModelConfigurationString",void 0,U),N.InlineEditsInlineCompletionsEnabled=$n("chat.advanced.inlineEdits.inlineCompletions.enabled",Hr(),!0,U),N.InlineEditsXtabProviderUsePrediction=$n("chat.advanced.inlineEdits.xtabProvider.usePrediction",Hr(),!0,U),N.InlineEditsXtabProviderUseVaryingLinesAbove=L("chat.advanced.inlineEdits.xtabProvider.useVaryingLinesAbove",void 0,U),N.InlineEditsXtabProviderNLinesAbove=L("chat.advanced.inlineEdits.xtabProvider.nLinesAbove",void 0,U),N.InlineEditsXtabProviderNLinesBelow=L("chat.advanced.inlineEdits.xtabProvider.nLinesBelow",void 0,U),N.InlineEditsXtabProviderRetryWithNMoreLinesBelow=L("chat.advanced.inlineEdits.xtabProvider.retryWithNMoreLinesBelow",void 0,U),N.InlineEditsAutoExpandEditWindowLines=L("chat.advanced.inlineEdits.autoExpandEditWindowLines",void 0,U),N.InlineEditsXtabNRecentlyViewedDocuments=L("chat.advanced.inlineEdits.xtabProvider.nRecentlyViewedDocuments",Tt.recentlyViewedDocuments.nDocuments,U),N.InlineEditsXtabRecentlyViewedDocumentsMaxTokens=L("chat.advanced.inlineEdits.xtabProvider.recentlyViewedDocuments.maxTokens",Tt.recentlyViewedDocuments.maxTokens,U),N.InlineEditsXtabDiffNEntries=L("chat.advanced.inlineEdits.xtabProvider.diffNEntries",Tt.diffHistory.nEntries,U),N.InlineEditsXtabDiffMaxTokens=L("chat.advanced.inlineEdits.xtabProvider.diffMaxTokens",Tt.diffHistory.maxTokens,U),N.InlineEditsXtabProviderEmitFastCursorLineChange=L("chat.advanced.inlineEdits.xtabProvider.emitFastCursorLineChange",!0,U),N.InlineEditsXtabIncludeViewedFiles=L("chat.advanced.inlineEdits.xtabProvider.includeViewedFiles",Tt.recentlyViewedDocuments.includeViewedFiles,U),N.InlineEditsXtabPageSize=L("chat.advanced.inlineEdits.xtabProvider.pageSize",Tt.pagedClipping.pageSize,U),N.InlineEditsXtabEditWindowMaxTokens=L("chat.advanced.inlineEdits.xtabProvider.editWindowMaxTokens",void 0,U),N.InlineEditsXtabIncludeTagsInCurrentFile=L("chat.advanced.inlineEdits.xtabProvider.includeTagsInCurrentFile",Tt.currentFile.includeTags,U),N.InlineEditsXtabCurrentFileMaxTokens=L("chat.advanced.inlineEdits.xtabProvider.currentFileMaxTokens",Tt.currentFile.maxTokens,U),N.InlineEditsXtabPrioritizeAboveCursor=L("chat.advanced.inlineEdits.xtabProvider.currentFile.prioritizeAboveCursor",Tt.currentFile.prioritizeAboveCursor,U),N.InlineEditsXtabDiffOnlyForDocsInPrompt=L("chat.advanced.inlineEdits.xtabProvider.diffOnlyForDocsInPrompt",Tt.diffHistory.onlyForDocsInPrompt,U),N.InlineEditsXtabDiffUseRelativePaths=L("chat.advanced.inlineEdits.xtabProvider.diffUseRelativePaths",Tt.diffHistory.useRelativePaths,U),N.InlineEditsXtabNNonSignificantLinesToConverge=L("chat.advanced.inlineEdits.xtabProvider.nNonSignificantLinesToConverge",Jl.DEFAULT_DIFF_PARAMS.nLinesToConverge,U),N.InlineEditsXtabNSignificantLinesToConverge=L("chat.advanced.inlineEdits.xtabProvider.nSignificantLinesToConverge",Jl.DEFAULT_DIFF_PARAMS.nSignificantLinesToConverge,U),N.InlineEditsXtabLanguageContextEnabled=L("chat.advanced.inlineEdits.xtabProvider.languageContext.enabled",Tt.languageContext.enabled,U),N.InlineEditsXtabLanguageContextEnabledLanguages=j("chat.advanced.inlineEdits.xtabProvider.languageContext.enabledLanguages",vb,U),N.InlineEditsXtabLanguageContextMaxTokens=L("chat.advanced.inlineEdits.xtabProvider.languageContext.maxTokens",Tt.languageContext.maxTokens,U),N.InlineEditsXtabMaxMergeConflictLines=L("chat.advanced.inlineEdits.xtabProvider.maxMergeConflictLines",void 0,U),N.InlineEditsXtabOnlyMergeConflictLines=L("chat.advanced.inlineEdits.xtabProvider.onlyMergeConflictLines",!1,U),N.InlineEditsUndoInsertionFiltering=L("chat.advanced.inlineEdits.undoInsertionFiltering","v1",U),N.InlineEditsDiagnosticsExplorationEnabled=j("chat.advanced.inlineEdits.inlineEditsDiagnosticsExplorationEnabled",!1,U),N.InternalWelcomeHintEnabled=j("chat.advanced.welcomePageHint.enabled",{defaultValue:!1,internalDefaultValue:!0,teamDefaultValue:!0},U),N.InlineChatUseCodeMapper=j("chat.advanced.inlineChat.useCodeMapper",!1,U),N.InstantApplyModelName=L("chat.advanced.instantApply.modelName","gpt-4o-instant-apply-full-ft-v66",U),N.VerifyTextDocumentChanges=L("chat.advanced.inlineEdits.verifyTextDocumentChanges",!1,U),N.DiagnosticsContextProvider=L("chat.advanced.inlineEdits.diagnosticsContextProvider.enabled",!0),N.EnableReadFileV2=L("chat.advanced.enableReadFileV2",qa),N.AskAgent=L("chat.advanced.enableAskAgent",{defaultValue:!1,teamDefaultValue:!0,internalDefaultValue:!0})))(r=B.Internal||={}),B.Enable=j("enable",{"*":!0,plaintext:!1,markdown:!1,scminput:!1}),B.selectedCompletionsModel=j("selectedCompletionModel",""),B.UseResponsesApi=L("chat.useResponsesApi",!0),B.ResponsesApiReasoningEffort=L("chat.responsesApiReasoningEffort","default"),B.ResponsesApiReasoningSummary=L("chat.responsesApiReasoningSummary","detailed"),B.EnableChatImageUpload=L("chat.imageUpload.enabled",!0),B.AnthropicThinkingEnabled=L("chat.anthropic.thinking.enabled",!1),B.MaxAnthropicThinkingTokens=j("chat.anthropic.thinking.maxTokens",null),B.AnthropicWebSearchToolEnabled=L("chat.anthropic.tools.websearch.enabled",!1),B.AnthropicWebSearchMaxUses=j("chat.anthropic.tools.websearch.maxUses",5),B.AnthropicWebSearchAllowedDomains=j("chat.anthropic.tools.websearch.allowedDomains",[]),B.AnthropicWebSearchBlockedDomains=j("chat.anthropic.tools.websearch.blockedDomains",[]),B.AnthropicWebSearchUserLocation=j("chat.anthropic.tools.websearch.userLocation",null),B.MemoryToolEnabled=L("chat.tools.memory.enabled",!1),B.CodeGenerationInstructions=j("chat.codeGeneration.instructions",[]),B.TestGenerationInstructions=j("chat.testGeneration.instructions",[]),B.CommitMessageGenerationInstructions=j("chat.commitMessageGeneration.instructions",[]),B.PullRequestDescriptionGenerationInstructions=j("chat.pullRequestDescriptionGeneration.instructions",[]),B.GenerateTestsCodeLens=j("chat.generateTests.codeLens",!1),B.SetupTests=j("chat.setupTests.enabled",!0),B.TypeScriptLanguageContext=L("chat.languageContext.typescript.enabled",!1),B.TypeScriptLanguageContextMode=L("chat.languageContext.typescript.items","minimal"),B.TypeScriptLanguageContextIncludeDocumentation=L("chat.languageContext.typescript.includeDocumentation",!1),B.TypeScriptLanguageContextCacheTimeout=L("chat.languageContext.typescript.cacheTimeout",500),B.TypeScriptLanguageContextFix=L("chat.languageContext.fix.typescript.enabled",!1),B.TypeScriptLanguageContextInline=L("chat.languageContext.inline.typescript.enabled",!1),B.UseInstructionFiles=j("chat.codeGeneration.useInstructionFiles",!0),B.ReviewAgent=j("chat.reviewAgent.enabled",!0),B.CodeFeedback=j("chat.reviewSelection.enabled",!0),B.CodeFeedbackInstructions=j("chat.reviewSelection.instructions",[]),B.UseProjectTemplates=j("chat.useProjectTemplates",!0),B.ExplainScopeSelection=j("chat.scopeSelection",!1),B.EnableCodeActions=j("editor.enableCodeActions",!0),B.LocaleOverride=j("chat.localeOverride","auto"),B.TerminalChatLocation=j("chat.terminalChatLocation","chatView"),B.AutomaticRenameSuggestions=j("renameSuggestions.triggerAutomatically",!0),B.GitHistoryRelatedFilesProvider=j("chat.edits.suggestRelatedFilesFromGitHistory",!0),B.Test2SrcRelatedFilesProvider=j("chat.edits.suggestRelatedFilesForTests",!0),B.TerminalToDebuggerEnabled=j("chat.copilotDebugCommand.enabled",!0),B.CodeSearchAgentEnabled=j("chat.codesearch.enabled",!1),B.InlineEditsEnabled=L("nextEditSuggestions.enabled",{defaultValue:!1,teamDefaultValue:!0}),B.InlineEditsEnableDiagnosticsProvider=L("nextEditSuggestions.fixes",{defaultValue:!0,teamDefaultValue:!0}),B.InlineEditsAllowWhitespaceOnlyChanges=L("nextEditSuggestions.allowWhitespaceOnlyChanges",!0),B.NewWorkspaceCreationAgentEnabled=j("chat.newWorkspaceCreation.enabled",!0),B.NewWorkspaceUseContext7=j("chat.newWorkspace.useContext7",!1),B.SummarizeAgentConversationHistory=j("chat.summarizeAgentConversationHistory.enabled",!0),B.VirtualToolThreshold=L("chat.virtualTools.threshold",br),B.CurrentEditorAgentContext=j("chat.agent.currentEditorContext.enabled",!0),B.PukuAIEndpoint=j("pukuai.endpoint","https://api.puku.sh"),B.PukuAIModel=j("pukuai.model","puku-ai"),B.OllamaEndpoint=j("chat.byok.ollamaEndpoint","http://localhost:11434"),B.AzureModels=j("chat.azureModels",{}),B.CustomOAIModels=j("chat.customOAIModels",{}),B.AutoFixDiagnostics=L("chat.agent.autoFix",!0),B.NotebookFollowCellExecution=j("chat.notebook.followCellExecution.enabled",!1),B.UseAlternativeNESNotebookFormat=L("chat.notebook.enhancedNextEditSuggestions.enabled",!1),B.CustomInstructionsInSystemMessage=j("chat.customInstructionsInSystemMessage",!0),B.EnableAlternateGptPrompt=L("chat.alternateGptPrompt.enabled",!1),B.CompletionsFetcher=L("chat.completionsFetcher",void 0),B.NextEditSuggestionsFetcher=L("chat.nesFetcher",void 0)})(xe||={});Wt();pe();var Jr=_("ICopilotTokenStore"),Yl=class extends K{constructor(){super(...arguments);this._onDidStoreUpdate=this._register(new se);this.onDidStoreUpdate=this._onDidStoreUpdate.event}get copilotToken(){return this._copilotToken}set copilotToken(t){let r=this._copilotToken?.token;this._copilotToken=t,r!==t?.token&&this._onDidStoreUpdate.fire()}};var YN=_("ITelemetryUserConfig"),Zl=class{constructor(e,t,r){this._tokenStore=r;this.trackingId=e,this.optedIn=t??!1,this.setupUpdateOnToken()}setupUpdateOnToken(){this._tokenStore.onDidStoreUpdate(()=>{let e=this._tokenStore.copilotToken;if(!e)return;let t=e.getTokenValue("rt")==="1",r=e.getTokenValue("tid");r!==void 0&&(this.trackingId=r,this.organizationsList=e.organizationList.toString(),this.optedIn=t)})}};Zl=E([v(2,Jr)],Zl);var ge=_("ITelemetryService");var Qa=8192,u4=50;function Cb(n){let e={...n};for(let t in n){let r=n[t],i=r?.length??0;if(i>Qa){let o=0,s=0;for(;i>0&&s<u4;){s+=1;let a=t;s>1&&(a=t+"_"+(s<10?"0":"")+s);let u=o+Qa;i<Qa&&(u=o+i),e[a]=r.slice(o,u),i-=Qa,o+=Qa}}}return e}var is=class{constructor(e,t,r){let i=t.getConfig(xe.Enable),o="*"in i?i["*"]:!0,s=t.isConfigured(xe.Enable),a=t.getExperimentBasedConfig(xe.InlineEditsEnabled,r),u=t.isConfigured(xe.InlineEditsEnabled);e.sendMSFTTelemetryEvent("nesStatusOnActivation",{},{isCompletionsEnabled:ec(o),isCompletionsUserConfigured:ec(s),isNesEnabled:ec(a),isNesUserConfigured:ec(u)})}};is=E([v(0,ge),v(1,et),v(2,gt)],is);function ec(n){return n?1:0}var im={};Vt(im,{create:()=>l4});var Ki=require("vscode");pe();function l4(n){let e=new de;return e.add(c4(n)),e}function c4(n){return Ki.Disposable.from(Ki.commands.registerCommand("puku.chat.attachFile",()=>Ki.commands.executeCommand("workbench.action.chat.attachFile")),Ki.commands.registerCommand("puku.chat.attachSelection",()=>Ki.commands.executeCommand("workbench.action.chat.attachSelection")))}var os=class{constructor(e){this.telemetryService=e;e.sendGHTelemetryEvent("extension.activate")}dispose(){this.telemetryService.sendGHTelemetryEvent("extension.deactivate")}};os=E([v(0,ge)],os);var Sb=require("vscode");Je();var Qr=_("IGitService");function Eb(n){for(let e of d4(n))if(e){let t=m4(e);if(t)return{id:t,remoteUrl:e}}}function d4(n){let e=new Set;if(n.remoteFetchUrls?.length===1)return e.add(n.remoteFetchUrls[0]),e;let t=n.remotes.findIndex(i=>i===n.upstreamRemote);if(t!==-1){let i=n.remoteFetchUrls?.[t];i&&e.add(i)}let r=n.remotes.findIndex(i=>i==="origin");if(r!==-1){let i=n.remoteFetchUrls?.[r];i&&e.add(i)}for(let i of n.remoteFetchUrls??[])i&&e.add(i);return e}function p4(n){n=n.trim();try{if(/^[\w\d\-]+@/i.test(n)){let a=n.split(":");if(a.length!==2)return;n="ssh://"+a[0]+"/"+a[1]}let e=W.parse(n),t=e.authority,r=e.path;if(!(ur(e.scheme,"ssh")||ur(e.scheme,"https")||ur(e.scheme,"http")))return;let i=t.split("@");if(i.length>2)return;let o=i.at(-1);return o?{host:o.toLowerCase().replace(/:\d+$/,"").replace(/^[\w\-]+-/,"").replace(/-[\w\-]+$/,""),path:r}:void 0}catch{return}}var om=class n{constructor(e,t){this.org=e;this.repo=t;this.type="github"}static parse(e){let t=e.split("/");if(t.length===2)return new n(t[0],t[1])}toString(){return f4(this)}};function f4(n){return`${n.org}/${n.repo}`.toLowerCase()}function m4(n){let e=p4(n);if(!e||!["github.com","ghe.com"].find(o=>e.host===o||e.host.endsWith("."+o)))return;let i=e.path.match(/^\/?([^/]+)\/([^/]+?)(\/|\.git\/?)?$/i);return i?new om(i[1],i[2]):void 0}pe();var ss=class extends K{constructor(t,r){super();this._telemetryService=t;this._gitService=r;let i=Sb.env.getDataChannel("editTelemetry");this._register(i.onDidReceiveData(o=>{let s=this._gitService.activeRepository.get(),a=s?Eb(s)?.id:void 0,u=h4(o.data.data,a),{properties:l,measurements:p}=g4(u);this._telemetryService.sendGHTelemetryEvent("vscode."+o.data.eventName,l,p)}))}};ss=E([v(0,ge),v(1,Qr)],ss);function h4(n,e){return e&&(n.githubOrg=e.org,n.githubRepo=e.repo),n}function g4(n){let e={},t={};for(let[r,i]of Object.entries(n))typeof i=="number"?t[r]=i:typeof i=="boolean"?t[r]=i?1:0:e[r]=i;return{properties:e,measurements:t}}var b4=[Ll(os),Ll(is),Ll(ss),im],Rb=b4;var Db=[...Rb];var Sp=require("vscode");var Ab=_("IAuthenticationChatUpgradeService"),tc=class{async shouldRequestPermissiveSessionUpgrade(){return!1}async showPermissiveSessionModal(e){return!1}};var Pb=_("IBlockedExtensionService"),nc=class{constructor(){this.blockedExtensions=new Map}reportBlockedExtension(e,t){this.blockedExtensions.has(e)&&clearTimeout(this.blockedExtensions.get(e));let r=setTimeout(()=>{this.blockedExtensions.delete(e)},t*1e3);this.blockedExtensions.set(e,r)}isExtensionBlocked(e){return this.blockedExtensions.has(e)}};var Lb=_("IChatQuotaService");pe();Wt();pe();var Ob=_("ICopilotTokenManager");var ln=_("IAuthenticationService"),rc=class extends K{constructor(t,r,i,o){super();this._logService=t;this._tokenStore=r;this._tokenManager=i;this._configurationService=o;this._onDidAuthenticationChange=this._register(new se);this.onDidAuthenticationChange=this._onDidAuthenticationChange.event;this._onDidAccessTokenChange=this._register(new se);this.onDidAccessTokenChange=this._onDidAccessTokenChange.event;this._onDidAdoAuthenticationChange=this._register(new se);this.onDidAdoAuthenticationChange=this._onDidAdoAuthenticationChange.event;this._isMinimalMode=Ha(t=>this._configurationService.getConfigObservable(xe.Shared.AuthPermissions).read(t)==="minimal");this._register(i.onDidCopilotTokenRefresh(()=>{this._logService.debug("Handling CopilotToken refresh."),this._handleAuthChangeEvent()}))}get isMinimalMode(){return this._isMinimalMode.get()}get anyGitHubSession(){}get permissiveGitHubSession(){}get anyAdoSession(){return this._anyAdoSession}get copilotToken(){return this._tokenStore.copilotToken}async getCopilotToken(t){try{let r=await this._tokenManager.getCopilotToken(t);return this._tokenStore.copilotToken=r,this._copilotTokenError=void 0,r}catch(r){if(this._tokenStore.copilotToken=void 0,r instanceof Error&&r.name==="PukuLoginRequired")throw this._logService.debug("PukuLoginRequired error caught - auth flow will handle sign-in"),r;let i=this._copilotTokenError;throw this._copilotTokenError=r,i&&r&&i.message!==r.message&&this._onDidAuthenticationChange.fire(),r}}resetCopilotToken(t){this._tokenStore.copilotToken=void 0,this._tokenManager.resetCopilotToken(t)}async _handleAuthChangeEvent(){let t=this._anyAdoSession,r=this._tokenStore.copilotToken,i=this._copilotTokenError,o=await Promise.allSettled([this.getAnyAdoSession({silent:!0})]);for(let s of o)s.status==="rejected"&&this._logService.error(`Error getting a session: ${s.reason}`);t?.accessToken!==this._anyAdoSession?.accessToken&&(this._logService.debug(`Ado auth state changed, firing event. Had token before: ${!!t?.accessToken}. Has token now: ${!!this._anyAdoSession?.accessToken}.`),this._onDidAdoAuthenticationChange.fire());try{await this.getCopilotToken()}catch{}(r?.token!==this._tokenStore.copilotToken?.token||i?.message!==this._copilotTokenError?.message)&&(this._logService.debug("Puku token state changed, firing event."),this._onDidAuthenticationChange.fire()),this._logService.debug("Finished handling auth change event.")}};rc=E([v(0,Z),v(1,Jr),v(2,Ob),v(3,et)],rc);var as=class extends K{constructor(t){super();this._authService=t;this._register(this._authService.onDidAuthenticationChange(()=>{this.processUserInfoQuotaSnapshot(this._authService.copilotToken?.quotaInfo)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled&&!this._quotaInfo.unlimited:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(t){let r=this._authService.copilotToken?.isFreeUser?t.get("x-quota-snapshot-chat"):t.get("x-quota-snapshot-premium_models")||t.get("x-quota-snapshot-premium_interactions");if(r)try{let i=new URLSearchParams(r),o=parseInt(i.get("ent")||"0",10),s=parseFloat(i.get("ov")||"0.0"),a=i.get("ovPerm")==="true",u=parseFloat(i.get("rem")||"0.0"),l=i.get("rst"),p;l?p=new Date(l):(p=new Date,p.setMonth(p.getMonth()+1));let d=Math.max(0,o*(1-u/100));this._quotaInfo={quota:o,unlimited:o===-1,used:d,overageUsed:s,overageEnabled:a,resetDate:p}}catch(i){console.error("Failed to parse quota header",i)}}processUserInfoQuotaSnapshot(t){!t||!t.quota_snapshots||!t.quota_reset_date||(this._quotaInfo={unlimited:t.quota_snapshots.premium_interactions.unlimited,overageEnabled:t.quota_snapshots.premium_interactions.overage_permitted,overageUsed:t.quota_snapshots.premium_interactions.overage_count,quota:t.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(t.quota_reset_date),used:Math.max(0,t.quota_snapshots.premium_interactions.entitlement*(1-t.quota_snapshots.premium_interactions.percent_remaining/100))})}};as=E([v(0,ln)],as);var ic=_("IChatSessionService");var Nb=_("ConversationOptions");var Xr=(function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let n=new Uint8Array(16),e=[];for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(n),n[6]=n[6]&15|64,n[8]=n[8]&63|128;let r=0,i="";return i+=e[n[r++]],i+=e[n[r++]],i+=e[n[r++]],i+=e[n[r++]],i+="-",i+=e[n[r++]],i+=e[n[r++]],i+="-",i+=e[n[r++]],i+=e[n[r++]],i+="-",i+=e[n[r++]],i+=e[n[r++]],i+="-",i+=e[n[r++]],i+=e[n[r++]],i+=e[n[r++]],i+=e[n[r++]],i+=e[n[r++]],i+=e[n[r++]],i}})();var Fb=_("IInteractionService"),oc=class{constructor(){this._interactionId=Xr()}startInteraction(){this._interactionId=Xr()}get interactionId(){return this._interactionId}};var Mb=Te(require("vscode")),sc=class{get onDidDisposeChatSession(){return Mb.chat.onDidDisposeChatSession}};var Ub=_("IRunCommandExecutionService");var Bb=Te(require("vscode"));pe();var us=class extends K{constructor(t){super();this.telemetryService=t}async executeCommand(t,...r){try{let i=Bb.commands.executeCommand(t,...r);return this.telemetryService.sendMSFTTelemetryEvent("automaticCommandExecutedSucceeded",{command:t,args:r?.join(",")}),i}catch(i){this.telemetryService.sendMSFTTelemetryEvent("automaticCommandExecutedFailed",{command:t,args:r?.join(","),e:i})}}};us=E([v(0,ge)],us);var Ot=Te(require("vscode"));wt();function Vb(n){return typeof n=="string"?n:JSON.stringify(n)}var ls=class extends Xl{constructor(e){super(e),this.config=Ot.workspace.getConfiguration(Lt),Ot.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(Lt)&&(this.config=Ot.workspace.getConfiguration(Lt)),this._onDidChangeConfiguration.fire({affectsConfiguration:(r,i)=>{if(t.affectsConfiguration(r,i))return!0;let o=rs.configs.get(r)?.fullyQualifiedOldId;return!!(o&&t.affectsConfiguration(o,i))}})})}getConfig(e,t){if(e.options?.valueIgnoredForExternals&&!this._isInternal)return this.getDefaultValue(e);let r=t===void 0?this.config:Ot.workspace.getConfiguration(Lt,t),i;if(e.advancedSubKey){let s=r.get(e.id);s!==void 0?i=s:i=r.get("advanced")?.[e.advancedSubKey]}else{let s=un.isDefaultValueWithTeamAndInternalValue(e.defaultValue)||un.isDefaultValueWithTeamValue(e.defaultValue),a=this._isInternal||this._isTeamMember;e.isPublic&&s&&a?this.isConfigured(e,t)&&(i=r.get(e.id)??(e.oldId?r.get(e.oldId):void 0)):e.oldId&&e.oldId.startsWith("chat.advanced")?this.isConfigured(e,t)&&(i=r.get(e.id)??(e.oldId?r.get(e.oldId):void 0)):i=r.get(e.id)??(e.oldId?r.get(e.oldId):void 0)}if(i===void 0)return this.getDefaultValue(e);if(!e.validator)return i;let o=e.validator.validate(i);return o.error?(console.error(`Could not read "${e.fullyQualifiedId}": ${o.error.message}`),this.getDefaultValue(e)):o.content}inspectConfig(e,t){if(e.options?.valueIgnoredForExternals&&!this._isInternal)return{defaultValue:this.getDefaultValue(e)};let r=t===void 0?this.config:Ot.workspace.getConfiguration(Lt,t),i=r.inspect(e.id);if(!e.oldId)return i;let o=r.inspect(e.oldId),s=F0([...i?.languageIds??[],...o?.languageIds??[]]);return{defaultValue:i?.defaultValue??o?.defaultValue,globalValue:i?.globalValue??o?.globalValue,workspaceValue:i?.workspaceValue??o?.workspaceValue,workspaceFolderValue:i?.workspaceFolderValue??o?.workspaceFolderValue,defaultLanguageValue:i?.defaultLanguageValue??o?.defaultLanguageValue,globalLanguageValue:i?.globalLanguageValue??o?.globalLanguageValue,workspaceLanguageValue:i?.workspaceLanguageValue??o?.workspaceLanguageValue,workspaceFolderLanguageValue:i?.workspaceFolderLanguageValue??o?.workspaceFolderLanguageValue,languageIds:s.length?s:void 0}}getNonExtensionConfig(e){return Ot.workspace.getConfiguration().get(e)}_getTargetFromInspect(e){let t;return e?e.workspaceFolderValue!==void 0?t=Ot.ConfigurationTarget.WorkspaceFolder:e.workspaceValue!==void 0?t=Ot.ConfigurationTarget.Workspace:t=Ot.ConfigurationTarget.Global:t=Ot.ConfigurationTarget.Global,t}setConfig(e,t){if(e.advancedSubKey){let r=this.config.inspect(e.id);if(r?.globalValue!==void 0||r?.workspaceFolderValue!==void 0||r?.workspaceValue!==void 0)throw new Error(`Cannot write to "${e.fullyQualifiedId}". Please update the setting manually to ${JSON.stringify(t)}.`);let o=this.config.get("advanced");return o?o[e.advancedSubKey]=t:o={[e.advancedSubKey]:t},this.config.update("advanced",o,this._getTargetFromInspect(this.config.inspect("advanced")))}return this.config.update(e.id,t,this._getTargetFromInspect(this.config.inspect(e.id)))}getExperimentBasedConfig(e,t,r){let i=this._getUserConfiguredValueForExperimentBasedConfig(e,r);if(i!==void 0)return i;if(e.experimentName){let a=t.getTreatmentVariable(e.experimentName);if(a!==void 0)return a}let o=t.getTreatmentVariable(`copilotchat.config.${e.id}`);if(o!==void 0)return o;let s=t.getTreatmentVariable(`config.${e.fullyQualifiedId}`);if(s!==void 0)return s;if(e.fullyQualifiedOldId){let a=t.getTreatmentVariable(`copilotchat.config.${e.oldId}`);if(a!==void 0)return a;let u=t.getTreatmentVariable(`config.${e.fullyQualifiedOldId}`);if(u!==void 0)return u}return this.getDefaultValue(e)}_getUserConfiguredValueForExperimentBasedConfig(e,t){if(e.options?.valueIgnoredForExternals&&!this._isInternal)return;let r=t===void 0?this.config:Ot.workspace.getConfiguration(Lt,t);if(this.isConfigured(e,t))return r.get(e.id)??(e.oldId?r.get(e.oldId):void 0)}dumpConfig(){let e={};try{let r=ht.contributes.configuration.map(o=>o.properties),i=Object.assign({},...r);for(let o in i){let a=o.replace(`${Lt}.`,"").split(".").reduce((u,l)=>u[l],this.config);typeof a=="object"&&a!==null?Object.keys(a).filter(u=>u!=="secret_key").forEach(u=>e[`${o}.${u}`]=Vb(a[u])):e[o]=Vb(a)}}catch(t){console.error(`Failed to retrieve configuration properties ${t}`)}return e}updateExperimentBasedConfiguration(e){e.length!==0&&(this.config=Ot.workspace.getConfiguration(Lt),this._onDidChangeConfiguration.fire({affectsConfiguration:(t,r)=>{if(e.some(o=>o.startsWith(`config.${t}`)))return!0;let i=rs.configs.get(t)?.fullyQualifiedOldId;return!!(i&&e.some(o=>o.startsWith(`config.${i}`)))}}))}};ls=E([v(0,Jr)],ls);wt();Vr();gn();Je();var ac="**",qb="/",uc="[/\\\\]",lc="[^/\\\\]",v4=/\//g;function $b(n,e){switch(n){case 0:return"";case 1:return`${lc}*?`;default:return`(?:${uc}|${lc}+${uc}${e?`|${uc}${lc}+`:""})*?`}}function Wb(n,e){if(!n)return[];let t=[],r=!1,i=!1,o="";for(let s of n){switch(s){case e:if(!r&&!i){t.push(o),o="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=s}return o&&t.push(o),t}function Kb(n){if(!n)return"";let e="",t=Wb(n,qb);if(t.every(r=>r===ac))e=".*";else{let r=!1;t.forEach((i,o)=>{if(i===ac){if(r)return;e+=$b(2,o===t.length-1)}else{let s=!1,a="",u=!1,l="";for(let p of i){if(p!=="}"&&s){a+=p;continue}if(u&&(p!=="]"||!l)){let d;p==="-"?d=p:(p==="^"||p==="!")&&!l?d="^":p===qb?d="":d=zo(p),l+=d;continue}switch(p){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{let f=`(?:${Wb(a,",").map(h=>Kb(h)).join("|")})`;e+=f,s=!1,a="";break}case"]":{e+="["+l+"]",u=!1,l="";break}case"?":e+=lc;continue;case"*":e+=$b(1);continue;default:e+=zo(p)}}o<t.length-1&&(t[o+1]!==ac||o+2<t.length)&&(e+=uc)}r=i===ac})}return e}var x4=/^\*\*\/\*\.[\w\.-]+$/,y4=/^\*\*\/([\w\.-]+)\/?$/,T4=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,_4=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,k4=/^\*\*((\/[\w\.-]+)+)\/?$/,I4=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,jb=new en(1e4),Gb=function(){return!1},Wn=function(){return null};function am(n,e){if(!n)return Wn;let t;typeof n!="string"?t=n.pattern:t=n,t=t.trim();let r=`${t}_${!!e.trimForExclusions}`,i=jb.get(r);if(i)return zb(i,n);let o;return x4.test(t)?i=w4(t.substr(4),t):(o=y4.exec(sm(t,e)))?i=C4(o[1],t):(e.trimForExclusions?_4:T4).test(t)?i=E4(t,e):(o=k4.exec(sm(t,e)))?i=Hb(o[1].substr(1),t,!0):(o=I4.exec(sm(t,e)))?i=Hb(o[1],t,!1):i=S4(t),jb.set(r,i),zb(i,n)}function zb(n,e){if(typeof e=="string")return n;let t=function(r,i){return Oa(r,e.base,!ul)?n(hl(r.substr(e.base.length),vn),i):null};return t.allBasenames=n.allBasenames,t.allPaths=n.allPaths,t.basenames=n.basenames,t.patterns=n.patterns,t}function sm(n,e){return e.trimForExclusions&&n.endsWith("/**")?n.substr(0,n.length-2):n}function w4(n,e){return function(t,r){return typeof t=="string"&&t.endsWith(n)?e:null}}function C4(n,e){let t=`/${n}`,r=`\\${n}`,i=function(s,a){return typeof s!="string"?null:a?a===n?e:null:s===n||s.endsWith(t)||s.endsWith(r)?e:null},o=[n];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function E4(n,e){let t=Jb(n.slice(1,-1).split(",").map(a=>am(a,e)).filter(a=>a!==Wn),n),r=t.length;if(!r)return Wn;if(r===1)return t[0];let i=function(a,u){for(let l=0,p=t.length;l<p;l++)if(t[l](a,u))return n;return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function Hb(n,e,t){let r=vn===re.sep,i=r?n:n.replace(v4,vn),o=vn+i,s=re.sep+n,a;return t?a=function(u,l){return typeof u=="string"&&(u===i||u.endsWith(o)||!r&&(u===n||u.endsWith(s)))?e:null}:a=function(u,l){return typeof u=="string"&&(u===i||!r&&u===n)?e:null},a.allPaths=[(t?"*/":"./")+n],a}function S4(n){try{let e=new RegExp(`^${Kb(n)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?n:null}}catch{return Wn}}function vr(n,e,t){return!n||typeof e!="string"?!1:R4(n)(e,void 0,t)}function R4(n,e={}){if(!n)return Gb;if(typeof n=="string"||D4(n)){let t=am(n,e);if(t===Wn)return Gb;let r=function(i,o){return!!t(i,o)};return t.allBasenames&&(r.allBasenames=t.allBasenames),t.allPaths&&(r.allPaths=t.allPaths),r}return A4(n,e)}function D4(n){let e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function A4(n,e){let t=Jb(Object.getOwnPropertyNames(n).map(a=>P4(a,n[a],e)).filter(a=>a!==Wn)),r=t.length;if(!r)return Wn;if(!t.some(a=>!!a.requiresSiblings)){if(r===1)return t[0];let a=function(p,d){let f;for(let h=0,m=t.length;h<m;h++){let g=t[h](p,d);if(typeof g=="string")return g;wl(g)&&(f||(f=[]),f.push(g))}return f?(async()=>{for(let h of f){let m=await h;if(typeof m=="string")return m}return null})():null},u=t.find(p=>!!p.allBasenames);u&&(a.allBasenames=u.allBasenames);let l=t.reduce((p,d)=>d.allPaths?p.concat(d.allPaths):p,[]);return l.length&&(a.allPaths=l),a}let i=function(a,u,l){let p,d;for(let f=0,h=t.length;f<h;f++){let m=t[f];m.requiresSiblings&&l&&(u||(u=bn(a)),p||(p=u.substr(0,u.length-u1(a).length)));let g=m(a,u,p,l);if(typeof g=="string")return g;wl(g)&&(d||(d=[]),d.push(g))}return d?(async()=>{for(let f of d){let h=await f;if(typeof h=="string")return h}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function P4(n,e,t){if(e===!1)return Wn;let r=am(n,t);if(r===Wn)return Wn;if(typeof e=="boolean")return r;if(e){let i=e.when;if(typeof i=="string"){let o=(s,a,u,l)=>{if(!l||!r(s,a))return null;let p=i.replace("$(basename)",()=>u),d=l(p);return wl(d)?d.then(f=>f?n:null):d?n:null};return o.requiresSiblings=!0,o}}return r}function Jb(n,e){let t=n.filter(a=>!!a.basenames);if(t.length<2)return n;let r=t.reduce((a,u)=>{let l=u.basenames;return l?a.concat(l):a},[]),i;if(e){i=[];for(let a=0,u=r.length;a<u;a++)i.push(e)}else i=t.reduce((a,u)=>{let l=u.patterns;return l?a.concat(l):a},[]);let o=function(a,u){if(typeof a!="string")return null;if(!u){let p;for(p=a.length;p>0;p--){let d=a.charCodeAt(p-1);if(d===47||d===92)break}u=a.substr(p)}let l=r.indexOf(u);return l!==-1?i[l]:null};o.basenames=r,o.patterns=i,o.allBasenames=r;let s=n.filter(a=>!a.basenames);return s.push(o),s}pe();gn();qt();var w=Te(require("vscode")),_t=w.Position,We=w.Range,Qb=w.Selection;var Yr=w.TextEdit;var Xa=w.Uri;var Ji=w.EndOfLine;var Xb=w.LanguageModelToolResult;var Yb=w.LanguageModelTextPart;var um=w.LanguageModelToolMCPSource,lm=w.LanguageModelToolExtensionSource;var he=w.NotebookCellKind,cm=w.NotebookRange,Qi=w.NotebookEdit,cs=w.NotebookCellData;var Zb=w.FileType;var LM={t:w.l10n.t};var cc=_("IExtensionsService");var Ya=class{constructor(e,t){this.prev=null;this.next=null;this.key=e,this.value=t}},dc=class{constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new Ya("",null),this._tail=new Ya("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let t=e.prev,r=e.next;t.next=r,r.prev=t}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let t=this._cache.get(e);if(t)return this._removeNode(t),this._cache.delete(e),t.value}get(e){let t=this._cache.get(e);if(t)return this._moveToHead(t),t.value}keys(){let e=[],t=this._head.next;for(;t!==this._tail;)e.push(t.key),t=t.next;return e}getValues(){let e=[],t=this._head.next;for(;t!==this._tail;)e.push(t.value),t=t.next;return e}put(e,t){let r=this._cache.get(e);if(r)r.value=t,this._moveToHead(r);else if(r=new Ya(e,t),this._cache.set(e,r),this._addNode(r),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}entries(){let e=[],t=this._head.next;for(;t!==this._tail;)e.push([t.key,t.value]),t=t.next;return e}};var Nt=_("IFileSystemService"),ev=new class{constructor(){this._cache=null}enable(){this._cache=new dc(10)}async readJSON(n,e){if(!this._cache)return this._readJSON(n,e);let t=this._cache.get(e.toString());if(t!==void 0)return t;let r=await this._readJSON(n,e);return this._cache.put(e.toString(),r),r}async _readJSON(n,e){let t=await n.readFile(e,!0);return JSON.parse(t.toString())}},dm=1024*1024*5;async function tv(n,e,t){let r=await n.stat(e);if(r.size>dm)if(t){let i=`[FileSystemService] ${e.toString()} is a LARGE file (${Math.round(r.size/1048576)}MB > ${Math.round(dm/1048576)}MB)`;console.warn(i)}else{let i=`[FileSystemService] ${e.toString()} EXCEEDS max file size. FAILED to read ${Math.round(r.size/1048576)}MB > ${Math.round(dm/1048576)}MB`;throw new Error(i)}}var fc=_("IPromptPathRepresentationService"),pc=class{isWindows(){return jt}getFilePath(e){return e.scheme===ke.file||e.scheme===ke.vscodeRemote?e.fsPath:e.toString()}resolveFilePath(e,t=ke.file){let r=e.startsWith("/"),i=this.isWindows()&&(I1(e)||e.startsWith("\\"));if(r||i){if(i){let s=e.startsWith("\\\\");e=e.replace(/\\+/g,"\\"),s&&(e="\\"+e)}let o=W.file(e);return t===ke.file?o:W.from({scheme:t,path:o.path})}if(/\w[\w\d+.-]*:\S/.test(e))try{return W.parse(e)}catch{return}}getExampleFilePath(e){return this.isWindows()?this.getFilePath(W.parse(`file:///C:${e}`)):this.getFilePath(W.parse(`file://${e}`))}};function Xi(n,e){return e.find(t=>Ma(t.uri,n)||t.uri.path===n.path||nv(n,t))}function nv(n,e){if(n.scheme===ke.vscodeNotebookCell||n.scheme===ke.vscodeNotebookCellOutput){let t=e.getCells().findIndex(r=>Ma(r.document.uri,n)||r.document.uri.fragment===n.fragment&&r.document.uri.path===n.path);if(t!==-1)return e.getCells()[t]}}function pm(n){return n.path.endsWith(".ipynb")}function O4(n){let e=n;return typeof e=="object"&&e!==null&&(typeof e.include=="string"||F4(e.include))}function N4(n){let e=n;return typeof e=="object"&&e!==null&&typeof e.filenamePattern=="string"}function F4(n){let e=n;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function rv(n){let e=n;return!!e&&!!e.type&&!!e.displayName&&!!e.selector}function iv(n){let e=[];for(let[t,r]of Object.entries(n))r&&e.push({filenamePattern:t,viewType:r});return e}function M4(n,e){if(typeof e=="string"&&vr(e.toLowerCase(),bn(n.fsPath).toLowerCase()))return!0;if(O4(e)){let t=e.include,r=e.exclude;if(!t)return!1;if(vr(t,bn(n.fsPath).toLowerCase()))return!(r&&vr(r,bn(n.fsPath).toLowerCase()))}return N4(e)&&vr(e.filenamePattern,bn(n.fsPath).toLowerCase())?!(e.excludeFileNamePattern&&vr(e.excludeFileNamePattern,bn(n.fsPath).toLowerCase())):!1}function U4(n,e){let t=[];for(let r of e)r.filenamePattern&&vr(r.filenamePattern.toLowerCase(),bn(n.fsPath).toLowerCase())&&t.push({filenamePattern:r.filenamePattern,viewType:r.viewType});return t}function ov(n,e,t,r){if(Xi(n,e))return!0;let i=t.filter(s=>s.selector.some(a=>M4(n,a)));if(i.length===0)return!1;let o=U4(n,r);for(let s of o)if(i.some(a=>a.type===s.viewType))return!0;return!!i.some(s=>(s.priority??"default")==="default")}qt();async function Za(n){if(!n)return;let e=await crypto.subtle.importKey("raw",new TextEncoder().encode(n),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),t=Math.floor(Date.now()/1e3).toString(),i=new TextEncoder().encode(t),o=await crypto.subtle.sign("HMAC",e,i),a=Array.from(new Uint8Array(o)).map(u=>u.toString(16).padStart(2,"0")).join("");return`${t}.${a}`}function sv(n){return n.family.startsWith("gpt")&&!n.family.includes("gpt-4o")||n.family==="o4-mini"}function mc(n,e=!1){let t=n.length,r=0,i="",o=0,s=16,a=0,u=0,l=0,p=0,d=0;function f(b,y){let S=0,A=0;for(;S<b||!y;){let k=n.charCodeAt(r);if(k>=48&&k<=57)A=A*16+k-48;else if(k>=65&&k<=70)A=A*16+k-65+10;else if(k>=97&&k<=102)A=A*16+k-97+10;else break;r++,S++}return S<b&&(A=-1),A}function h(b){r=b,i="",o=0,s=16,d=0}function m(){let b=r;if(n.charCodeAt(r)===48)r++;else for(r++;r<n.length&&ds(n.charCodeAt(r));)r++;if(r<n.length&&n.charCodeAt(r)===46)if(r++,r<n.length&&ds(n.charCodeAt(r)))for(r++;r<n.length&&ds(n.charCodeAt(r));)r++;else return d=3,n.substring(b,r);let y=r;if(r<n.length&&(n.charCodeAt(r)===69||n.charCodeAt(r)===101))if(r++,(r<n.length&&n.charCodeAt(r)===43||n.charCodeAt(r)===45)&&r++,r<n.length&&ds(n.charCodeAt(r))){for(r++;r<n.length&&ds(n.charCodeAt(r));)r++;y=r}else d=3;return n.substring(b,y)}function g(){let b="",y=r;for(;;){if(r>=t){b+=n.substring(y,r),d=2;break}let S=n.charCodeAt(r);if(S===34){b+=n.substring(y,r),r++;break}if(S===92){if(b+=n.substring(y,r),r++,r>=t){d=2;break}switch(n.charCodeAt(r++)){case 34:b+='"';break;case 92:b+="\\";break;case 47:b+="/";break;case 98:b+="\b";break;case 102:b+="\f";break;case 110:b+=`
`;break;case 114:b+="\r";break;case 116:b+="	";break;case 117:let k=f(4,!0);k>=0?b+=String.fromCharCode(k):d=4;break;default:d=5}y=r;continue}if(S>=0&&S<=31)if(eu(S)){b+=n.substring(y,r),d=2;break}else d=6;r++}return b}function x(){if(i="",d=0,o=r,u=a,p=l,r>=t)return o=t,s=17;let b=n.charCodeAt(r);if(fm(b)){do r++,i+=String.fromCharCode(b),b=n.charCodeAt(r);while(fm(b));return s=15}if(eu(b))return r++,i+=String.fromCharCode(b),b===13&&n.charCodeAt(r)===10&&(r++,i+=`
`),a++,l=r,s=14;switch(b){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=g(),s=10;case 47:let y=r-1;if(n.charCodeAt(r+1)===47){for(r+=2;r<t&&!eu(n.charCodeAt(r));)r++;return i=n.substring(y,r),s=12}if(n.charCodeAt(r+1)===42){r+=2;let S=t-1,A=!1;for(;r<S;){let k=n.charCodeAt(r);if(k===42&&n.charCodeAt(r+1)===47){r+=2,A=!0;break}r++,eu(k)&&(k===13&&n.charCodeAt(r)===10&&r++,a++,l=r)}return A||(r++,d=1),i=n.substring(y,r),s=13}return i+=String.fromCharCode(b),r++,s=16;case 45:if(i+=String.fromCharCode(b),r++,r===t||!ds(n.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),s=11;default:for(;r<t&&I(b);)r++,b=n.charCodeAt(r);if(o!==r){switch(i=n.substring(o,r),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(b),r++,s=16}}function I(b){if(fm(b)||eu(b))return!1;switch(b){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function T(){let b;do b=x();while(b>=12&&b<=15);return b}return{setPosition:h,getPosition:()=>r,scan:e?T:x,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>r-o,getTokenStartLine:()=>u,getTokenStartCharacter:()=>o-p,getTokenError:()=>d}}function fm(n){return n===32||n===9}function eu(n){return n===10||n===13}function ds(n){return n>=48&&n<=57}var av;(function(n){n[n.lineFeed=10]="lineFeed",n[n.carriageReturn=13]="carriageReturn",n[n.space=32]="space",n[n._0=48]="_0",n[n._1=49]="_1",n[n._2=50]="_2",n[n._3=51]="_3",n[n._4=52]="_4",n[n._5=53]="_5",n[n._6=54]="_6",n[n._7=55]="_7",n[n._8=56]="_8",n[n._9=57]="_9",n[n.a=97]="a",n[n.b=98]="b",n[n.c=99]="c",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.g=103]="g",n[n.h=104]="h",n[n.i=105]="i",n[n.j=106]="j",n[n.k=107]="k",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.p=112]="p",n[n.q=113]="q",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.v=118]="v",n[n.w=119]="w",n[n.x=120]="x",n[n.y=121]="y",n[n.z=122]="z",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.asterisk=42]="asterisk",n[n.backslash=92]="backslash",n[n.closeBrace=125]="closeBrace",n[n.closeBracket=93]="closeBracket",n[n.colon=58]="colon",n[n.comma=44]="comma",n[n.dot=46]="dot",n[n.doubleQuote=34]="doubleQuote",n[n.minus=45]="minus",n[n.openBrace=123]="openBrace",n[n.openBracket=91]="openBracket",n[n.plus=43]="plus",n[n.slash=47]="slash",n[n.formFeed=12]="formFeed",n[n.tab=9]="tab"})(av||(av={}));var V4=new Array(20).fill(0).map((n,e)=>" ".repeat(e)),ps=200,q4={" ":{"\n":new Array(ps).fill(0).map((n,e)=>`
`+" ".repeat(e)),"\r":new Array(ps).fill(0).map((n,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(ps).fill(0).map((n,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(ps).fill(0).map((n,e)=>`
`+"	".repeat(e)),"\r":new Array(ps).fill(0).map((n,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(ps).fill(0).map((n,e)=>`\r
`+"	".repeat(e))}};var tu;(function(n){n.DEFAULT={allowTrailingComma:!1}})(tu||(tu={}));function uv(n,e=[],t=tu.DEFAULT){let r=null,i=[],o=[];function s(u){Array.isArray(i)?i.push(u):r!==null&&(i[r]=u)}return hc(n,{onObjectBegin:()=>{let u={};s(u),o.push(i),i=u,r=null},onObjectProperty:u=>{r=u},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let u=[];s(u),o.push(i),i=u,r=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(u,l,p)=>{e.push({error:u,offset:l,length:p})}},t),i[0]}function mm(n,e=[],t=tu.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(u){r.type==="property"&&(r.length=u-r.offset,r=r.parent)}function o(u){return r.children.push(u),u}hc(n,{onObjectBegin:u=>{r=o({type:"object",offset:u,length:-1,parent:r,children:[]})},onObjectProperty:(u,l,p)=>{r=o({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:u,offset:l,length:p,parent:r})},onObjectEnd:(u,l)=>{i(u+l),r.length=u+l-r.offset,r=r.parent,i(u+l)},onArrayBegin:(u,l)=>{r=o({type:"array",offset:u,length:-1,parent:r,children:[]})},onArrayEnd:(u,l)=>{r.length=u+l-r.offset,r=r.parent,i(u+l)},onLiteralValue:(u,l,p)=>{o({type:W4(u),offset:l,length:p,parent:r,value:u}),i(l+p)},onSeparator:(u,l,p)=>{r.type==="property"&&(u===":"?r.colonOffset=l:u===","&&i(l))},onError:(u,l,p)=>{e.push({error:u,offset:l,length:p})}},t);let a=r.children[0];return a&&delete a.parent,a}function hm(n,e){if(!n)return;let t=n;for(let r of e)if(typeof r=="string"){if(t.type!=="object"||!Array.isArray(t.children))return;let i=!1;for(let o of t.children)if(Array.isArray(o.children)&&o.children[0].value===r&&o.children.length===2){t=o.children[1],i=!0;break}if(!i)return}else{let i=r;if(t.type!=="array"||i<0||!Array.isArray(t.children)||i>=t.children.length)return;t=t.children[i]}return t}function hc(n,e,t=tu.DEFAULT){let r=mc(n,!1),i=[],o=0;function s(R){return R?()=>o===0&&R(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(R){return R?C=>o===0&&R(C,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function u(R){return R?C=>o===0&&R(C,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice()):()=>!0}function l(R){return R?()=>{o>0?o++:R(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>i.slice())===!1&&(o=1)}:()=>!0}function p(R){return R?()=>{o>0&&o--,o===0&&R(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let d=l(e.onObjectBegin),f=u(e.onObjectProperty),h=p(e.onObjectEnd),m=l(e.onArrayBegin),g=p(e.onArrayEnd),x=u(e.onLiteralValue),I=a(e.onSeparator),T=s(e.onComment),b=a(e.onError),y=t&&t.disallowComments,S=t&&t.allowTrailingComma;function A(){for(;;){let R=r.scan();switch(r.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:y||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(R){case 12:case 13:y?k(10):T();break;case 16:k(1);break;case 15:case 14:break;default:return R}}}function k(R,C=[],M=[]){if(b(R),C.length+M.length>0){let P=r.getToken();for(;P!==17;){if(C.indexOf(P)!==-1){A();break}else if(M.indexOf(P)!==-1)break;P=A()}}}function O(R){let C=r.getTokenValue();return R?x(C):(f(C),i.push(C)),A(),!0}function Y(){switch(r.getToken()){case 11:let R=r.getTokenValue(),C=Number(R);isNaN(C)&&(k(2),C=0),x(C);break;case 7:x(null);break;case 8:x(!0);break;case 9:x(!1);break;default:return!1}return A(),!0}function le(){return r.getToken()!==10?(k(3,[],[2,5]),!1):(O(!1),r.getToken()===6?(I(":"),A(),It()||k(4,[],[2,5])):k(5,[],[2,5]),i.pop(),!0)}function Be(){d(),A();let R=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(R||k(4,[],[]),I(","),A(),r.getToken()===2&&S)break}else R&&k(6,[],[]);le()||k(4,[],[2,5]),R=!0}return h(),r.getToken()!==2?k(7,[2],[]):A(),!0}function tr(){m(),A();let R=!0,C=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(C||k(4,[],[]),I(","),A(),r.getToken()===4&&S)break}else C&&k(6,[],[]);R?(i.push(0),R=!1):i[i.length-1]++,It()||k(4,[],[4,5]),C=!0}return g(),R||i.pop(),r.getToken()!==4?k(8,[4],[]):A(),!0}function It(){switch(r.getToken()){case 3:return tr();case 1:return Be();case 10:return O(!0);default:return Y()}}return A(),r.getToken()===17?t.allowEmptyContent?!0:(k(4,[],[]),!1):It()?(r.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}function W4(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(n){if(Array.isArray(n))return"array"}else return"null";return"object"}default:return"null"}}var lv;(function(n){n[n.None=0]="None",n[n.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=2]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",n[n.InvalidUnicode=4]="InvalidUnicode",n[n.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",n[n.InvalidCharacter=6]="InvalidCharacter"})(lv||(lv={}));var cv;(function(n){n[n.OpenBraceToken=1]="OpenBraceToken",n[n.CloseBraceToken=2]="CloseBraceToken",n[n.OpenBracketToken=3]="OpenBracketToken",n[n.CloseBracketToken=4]="CloseBracketToken",n[n.CommaToken=5]="CommaToken",n[n.ColonToken=6]="ColonToken",n[n.NullKeyword=7]="NullKeyword",n[n.TrueKeyword=8]="TrueKeyword",n[n.FalseKeyword=9]="FalseKeyword",n[n.StringLiteral=10]="StringLiteral",n[n.NumericLiteral=11]="NumericLiteral",n[n.LineCommentTrivia=12]="LineCommentTrivia",n[n.BlockCommentTrivia=13]="BlockCommentTrivia",n[n.LineBreakTrivia=14]="LineBreakTrivia",n[n.Trivia=15]="Trivia",n[n.Unknown=16]="Unknown",n[n.EOF=17]="EOF"})(cv||(cv={}));var gm=uv,pv=mm,fv=hm;var gc=hc;var dv;(function(n){n[n.InvalidSymbol=1]="InvalidSymbol",n[n.InvalidNumberFormat=2]="InvalidNumberFormat",n[n.PropertyNameExpected=3]="PropertyNameExpected",n[n.ValueExpected=4]="ValueExpected",n[n.ColonExpected=5]="ColonExpected",n[n.CommaExpected=6]="CommaExpected",n[n.CloseBraceExpected=7]="CloseBraceExpected",n[n.CloseBracketExpected=8]="CloseBracketExpected",n[n.EndOfFileExpected=9]="EndOfFileExpected",n[n.InvalidCommentToken=10]="InvalidCommentToken",n[n.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=12]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",n[n.InvalidUnicode=14]="InvalidUnicode",n[n.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",n[n.InvalidCharacter=16]="InvalidCharacter"})(dv||(dv={}));var Zr=class{constructor(e){this.kind=e}};Po();pe();ka();var H4="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function K4(n=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of H4)n.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var nu=K4();function J4(n){let e=nu;if(n&&n instanceof RegExp)if(n.global)e=n;else{let t="g";n.ignoreCase&&(t+="i"),n.multiline&&(t+="m"),n.unicode&&(t+="u"),e=new RegExp(n.source,t)}return e.lastIndex=0,e}var mv=new nr;mv.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function ru(n,e,t,r,i){if(e=J4(e),i||(i=$t.first(mv)),t.length>i.maxLen){let l=n-i.maxLen/2;return l<0?l=0:r+=l,t=t.substring(l,n+i.maxLen/2),ru(n,e,t,r,i)}let o=Date.now(),s=n-1-r,a=-1,u=null;for(let l=1;!(Date.now()-o>=i.timeBudget);l++){let p=s-i.windowSize*l;e.lastIndex=Math.max(0,p);let d=Q4(e,t,s,a);if(!d&&u||(u=d,p<=0))break;a=p}if(u){let l={word:u[0],startColumn:r+1+u.index,endColumn:r+1+u.index+u[0].length};return e.lastIndex=0,l}return null}function Q4(n,e,t,r){let i;for(;i=n.exec(e);){let o=i.index||0;if(o<=t&&n.lastIndex>=t)return i;if(r>0&&o>r)return null}return null}Je();fr();wt();ml();var bc=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,t){e=Ni(e);let r=this.values,i=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(r.length+o),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Ni(e),t=Ni(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Ni(e),t=Ni(t);let r=this.values,i=this.prefixSum;if(e>=r.length)return!1;let o=r.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(r.length-t),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Ni(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let r=t;r<=e;r++)this.prefixSum[r]=this.prefixSum[r-1]+this.values[r];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,r=this.values.length-1,i=0,o=0,s=0;for(;t<=r;)if(i=t+(r-t)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)r=i-1;else if(e>=o)t=i+1;else break;return new vm(i,e-s)}};var vm=class{constructor(e,t){this.index=e;this.remainder=t;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=t}};var fs=class{constructor(e){this._lines=Gt(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let t=new Uint32Array(this._lines.length);for(let r=0;r<this._lines.length;r++)t[r]=this._lines[r].length+this._eol.length;this._lineStarts=new bc(t)}getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{replacements:t}=e;for(let r=t.length-1;r>=0;r--){let i=t[r],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,t){if(t.length===0)return;let r=Gt(t);if(r.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]+this._lines[e.line].substring(e.character));return}r[r.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]);let i=new Uint32Array(r.length-1);for(let o=1;o<r.length;o++)this._lines.splice(e.line+1+o-1,0,r[o]),i[o-1]=r[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,t){this._lines[e]=t,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let t=this._lineStarts.getIndexOf(e),r=this._lines[t.index].length;return new _t(t.index,Math.min(t.remainder,r))}toRange(e){return new We(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new ie(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let t=e.map(r=>new Yr(this.validateRange(r.range),r.newText));return new oe(t.map(r=>new Re(this.toOffsetRange(r.range),r.newText)))}toTextEdits(e){return e.replacements.map(t=>new Yr(this.toRange(t.replaceRange),t.newText))}validatePosition(e){if(!(e instanceof _t))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this._lines.length)t=this._lines.length-1,r=this._lines[t].length,i=!0;else{let o=this._lines[t].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new _t(t,r):e}validateRange(e){return new We(this.validatePosition(e.start),this.validatePosition(e.end))}};qt();var vc=class n{constructor(e,t,r,i,o,s){this._transformer=null;this._lines=null;this.document=e,this.uri=t,this._text=r,this.languageId=i,this.eol=o,this.version=s}static create(e){return new n(e,e.uri,e.getText(),e.languageId,e.eol,e.version)}static fromNewText(e,t){return new n(t instanceof n?t.document:t,t.uri,e,t.languageId,t.eol,t.version+1)}static fromJSON(e,t){return new n(e,W.from(t.uri),t._text,t.languageId,t.eol,t.version)}get transformer(){return this._transformer||(this._transformer=new fs(this._text)),this._transformer}get fileName(){return this.uri.fsPath}get isUntitled(){return this.uri.scheme==="untitled"}get lineCount(){return this.lines.length}get lines(){return this._lines||(this._lines=this._text.split(/\r\n|\r|\n/g)),this._lines}lineAt(e){let t;if(e instanceof _t)t=e.line;else if(typeof e=="number")t=e;else throw new Error("Invalid argument");if(t<0||t>=this.lines.length)throw new Error("Illegal value for `line`");return new iu(t,this.lines[t],t===this.lines.length-1)}offsetAt(e){return this.version===this.document.version?this.document.offsetAt(e):(e=this.validatePosition(e),this.transformer.getOffset(e))}positionAt(e){return this.version===this.document.version?this.document.positionAt(e):(e=Math.floor(e),e=Math.max(0,e),this.transformer.getPosition(e))}getText(e){return e?this._getTextInRange(e):this._text}_getTextInRange(e){if(this.version===this.document.version)return this.document.getText(e);let t=this.validateRange(e);if(t.isEmpty)return"";let r=this.transformer.toOffsetRange(t);return this._text.substring(r.start,r.endExclusive)}getWordRangeAtPosition(e){let t=this.validatePosition(e),r=ru(t.character+1,nu,this.lines[t.line],0);if(r)return new We(t.line,r.startColumn-1,t.line,r.endColumn-1)}validateRange(e){let t=this.validatePosition(e.start),r=this.validatePosition(e.end);return t===e.start&&r===e.end?e:new We(t.line,t.character,r.line,r.character)}validatePosition(e){if(this._text.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.lines.length)t=this.lines.length-1,r=this.lines[t].length,i=!0;else{let o=this.lines[t].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new _t(t,r):e}toJSON(){return{uri:this.uri.toJSON(),languageId:this.languageId,version:this.version,eol:this.eol,_text:this._text}}},iu=class{constructor(e,t,r){this._line=e,this._text=t,this._isLastLine=r}get lineNumber(){return this._line}get text(){return this._text}get range(){return new We(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new We(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}};var ei=class{constructor(e,t){this._text=e;this.notebook=t;this._transformer=null;this._lines=null}get transformer(){return this._transformer||(this._transformer=new fs(this._text)),this._transformer}getText(e){return e?this._getTextInRange(e):this._text}_getTextInRange(e){let t=this.validateRange(e);if(t.isEmpty)return"";let r=this.transformer.toOffsetRange(t);return this._text.substring(r.start,r.endExclusive)}positionToOffset(e){return e=this.validatePosition(e),this.transformer.getOffset(e)}getWordRangeAtPosition(e){let t=this.validatePosition(e),r=ru(t.character+1,nu,this.lines[t.line],0);if(r)return new We(t.line,r.startColumn-1,t.line,r.endColumn-1)}get lines(){return this._lines||(this._lines=this._text.split(/\r\n|\r|\n/g)),this._lines}get lineCount(){return this.lines.length}lineAt(e){let t;if(e instanceof _t)t=e.line;else if(typeof e=="number")t=e;else throw new Error("Invalid argument");if(t<0||t>=this.lines.length)throw new Error("Illegal value for `line`");return new iu(t,this.lines[t],t===this.lines.length-1)}offsetAt(e){return this.transformer.getOffset(e)}positionAt(e){return e=Math.floor(e),e=Math.max(0,e),this.transformer.getPosition(e)}validateRange(e){let t=this.validatePosition(e.start),r=this.validatePosition(e.end);return t===e.start&&r===e.end?e:new We(t.line,t.character,r.line,r.character)}validatePosition(e){if(this._text.length===0)return e.with(0,0);let{line:t,character:r}=e,i=!1;if(t<0)t=0,r=0,i=!0;else if(t>=this.lines.length)t=this.lines.length-1,r=this.lines[t].length,i=!0;else{let o=this.lines[t].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new _t(t,r):e}};function kt(n){return W.isUri(n)}Je();var ms=class{constructor(e){this.__lineOfTextBrand=void 0;this.value=e.replace(/\r$/,"")}},ye=`
`;function Tn(n){let e=n.kind===he.Code?"code":"markdown",t=Yi(n),r=Y4(n.document);return{cell_type:e,id:t,language:n.document.languageId,source:r,index:n.index}}function jn(n){let e=new Map;return n.getCells().forEach(t=>{e.set(Yi(t),t)}),e}var gv=new WeakMap,bv=8,X4="#VSC-",eB=new RegExp(`(\\s+|^|\\b|\\W)(#VSC-[a-f0-9]{${bv}})\\b`,"gi");function Yi(n){let e=gv.get(n);if(e)return e;let t=new Vn;return t.update(n.document.uri.toString()),e=`${X4}${t.digest().substring(0,bv)}`,gv.set(n,e),e}function Y4(n){return n.lineCount===0?[]:new Array(n.lineCount).fill("").map((e,t)=>n.lineAt(t).text)}function Gn(n){let e=n.getCells().find(t=>t.kind===he.Code);if(e)return e.document.languageId;if(n.notebookType==="jupyter-notebook")return n.metadata?.language_info?.name||n.metadata?.kernelspec?.language||"python"}var vv=4;var xc=class extends ei{fromCellPosition(e,t){let r=Yi(e),i=this.getText(),o="                ",s=`"id": "${r}",`,a=i.indexOf('"source": [',i.indexOf(s)),u=this.positionAt(a).line+1,l=e.document.getText(new We(t.line,0,t.line,t.character)),p=`${o}${JSON.stringify(l).slice(0,-1)}`,d=t.line+u;return new _t(d,p.length)}toCellPosition(e){throw new Error("Method not implemented.")}},yc=class extends Zr{constructor(){super("json")}stripCellMarkers(e){return e}parseAlternateContent(e,t,r){return this.parseAlternateContentImpl(e,t,r)}getAlternativeDocumentFromText(e,t){return new xc(e,t)}getAlternativeDocument(e,t){let i={cells:e.getCells().filter(s=>t?s.kind!==he.Markup:!0).map(s=>{let a=Tn(s),u=Z4(s.document);return{cell_type:a.cell_type,id:a.id,metadata:{language:a.language},source:u}})},o=JSON.stringify(i,void 0,vv);return new xc(o,e)}getSummaryOfStructure(e,t,r){let i=["{",'    "cells: ['],o=`// ${r}`;return e.getCells().forEach(s=>{if(t.includes(s)){let a=Tn(s);a.source.length&&a.source[0].trim().length?a.source=[a.source[0],o]:a.source.length&&a.source.some(l=>l.trim().length)?a.source=[o,a.source.filter(l=>l.trim().length)[0],o]:a.source=[o];let u=JSON.stringify(a,void 0,vv).split(/\r?\n/).map(l=>`    ${l}`);i.push(...u),i.push(",")}else(!i.length||i[i.length-1]!==o)&&i.push(o)}),i.push("    ]"),i.push("}"),i.join(ye)}parseAlternateContentImpl(e,t,r){return new cr(async i=>{let o=W.isUri(e)?new Map:jn(e),s=new Set,a="",u=-1,l={index:-1,startOffset:-1,endOffset:-1,kind:he.Code,source:[]},p=W.isUri(e)?"python":Gn(e),d=h=>{l.language=l.language||p,l.id&&o.get(l.id)?.document.languageId===l.language?s.has(l.id)?l.id="":s.add(l.id):l.id="";let m=o.get(l.id);l.uri=m?.document.uri,l.kind=m?.kind||(l.language==="markdown"?he.Markup:he.Code),i.emitOne({index:l.index,type:"start",kind:l.kind,language:l.language,uri:l.uri,id:l.id}),l.source.forEach(g=>i.emitOne({index:l.index,type:"line",line:g})),i.emitOne({index:l.index,type:"end"})},f=0;for await(let h of t){if(r.isCancellationRequested)break;let m=h.value;a+=m,gc(a,{onObjectEnd(g,x,I,T){f=g},onLiteralValue:(g,x,I,T,b,y)=>{if(u>=x)return;let S=y();if(S.length<2||S.shift()!=="cells")return;let A=S.shift();if(typeof A!="number")return;let k=S.shift();if(u=x,l.index!==-1&&l.index!==A&&(d(x),l.startOffset=x,l.id=void 0,l.kind=he.Code,l.source=[],l.uri=void 0,l.language=void 0),l.index=A,k==="cell_type")l.kind=g==="code"?he.Code:he.Markup,l.kind===he.Markup&&(l.language="markdown");else if(k==="id")l.id=g;else if(k==="metadata"&&S[0]==="id")l.id=g;else if(k==="metadata"&&S[0]==="language")l.language=g,l.language==="markdown"&&(l.kind=he.Markup);else if(k==="source"&&S.length&&typeof S[0]=="number"){S[0]===0&&(l.startOffset=x);let O=typeof g=="string"?g:`${g||""}`;O.endsWith(`
`)&&(O=O.substr(0,O.length-1)),l.source.push(O)}}})}l.index!==-1&&d(f)})}};function Z4(n){if(n.lineCount===0)return[];if(n.lineCount===1)return[n.lineAt(0).text];let e=n.lineCount;return new Array(e).fill("").map((t,r)=>n.lineAt(r).text)}var ew=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"<!--",end:"-->"},alternativeLineComments:[{start:"[]: #"}],aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),ym=new Map(Object.entries(ew).map(([n,e])=>[n,{languageId:n,...e}]));function Zi(n){return xm(typeof n=="string"?n:typeof n>"u"?"plaintext":n.languageId)}function xm(n){return ym.get(n.toLowerCase())??{languageId:n,lineComment:{start:"//"}}}Nr();function Tv(n,e){let t=n.id?`[id=${n.id}] `:"";return`${e}%% vscode.cell ${t}[language=${n.language}]`}function kc(n){return n.toLowerCase().includes("vscode.cell")}var Tc=class extends ei{constructor(t,r,i){super(t,i);this.cellOffsetMap=r}fromCellPosition(t,r){let i=Tn(t),o=su(this.notebook),s=Tv(i,o),a=t.document.eol===Ji.LF?1:2,u=ou(this.notebook),l=this.getText(),p=t.document.offsetAt(r),d=t.kind===he.Markup?u[0].length+a:0,f=l.indexOf(s)+s.length+a+d+p;return this.positionAt(f)}toCellPosition(t){let r=this.offsetAt(t),i=Ei(this.cellOffsetMap,s=>s.sourceOffset<=r);if(!i)return;let o=i.cell.document.positionAt(r-i.sourceOffset);return{cell:i.cell,position:o}}},_c=class extends Zr{constructor(){super("text")}stripCellMarkers(e){let t=e.split(ye);return t.length&&kc(t[0])?(t.shift(),t.join(ye)):e}getSummaryOfStructure(e,t,r){let i=ou(e),o=su(e),s=`${o} ${r}`,a=[];return e.getCells().forEach(u=>{if(t.includes(u)){let l=Tn(u);l.source.length&&l.source[0].trim().length?l.source=[l.source[0],s]:l.source.length&&l.source.some(p=>p.trim().length)?l.source=[s,l.source.filter(p=>p.trim().length)[0],s]:l.source=[s],a.push(xv(l,o,i).content)}else(!a.length||a[a.length-1]!==s)&&a.push(s)}),a.join(ye)}async*parseAlternateContent(e,t,r){let i=!kt(e),o=i?jn(e):new Map,s=!1,a=!1,u=!1,l=!1,p=-1,d=su(i?e:void 0),f=ou(i?e:void 0),h=i?Zi(Gn(e)).languageId:void 0,m=new Set;for await(let g of t){if(r.isCancellationRequested)break;let x=g.value,I=x.startsWith(`${d}%% [`)&&x.trimEnd().endsWith("]"),T=x.startsWith(`${d}%% vscode.cell`),b=T||I?yv(x,h):void 0;if((T||I)&&b?.language){u&&(u=!1);let y={index:-1,uri:void 0,language:void 0,kind:he.Code,emitted:!1,type:"start"};y.index=p+=1,y.emitted=!1,b.id&&o.get(b.id)?.document.languageId===b.language?m.has(b.id)?b.id="":m.add(b.id):b.id="";let S=o.get(b.id);y.id=b.id,y.language=b.language,y.uri=S?.document.uri,y.kind=S?.kind||(y.language==="markdown"?he.Markup:he.Code),s=y.language==="markdown",a=!1,l&&(yield{index:p-1,type:"end"}),l=!0,yield y;continue}l&&(s?a?x===f[1]?(a=!1,u=!0):yield{index:p,line:x,type:"line"}:x===f[0]?a=!0:yield{index:p,line:x,type:"line"}:yield{index:p,line:x,type:"line"})}l&&(yield{index:p,type:"end"})}getAlternativeDocumentFromText(e,t){let r=ou(t),i=su(t),o=jn(t),s=[],a=e.split(ye),u=0;for(let l=0;l<a.length;l++){let p=a[l],d=p.startsWith(`${i}%% [`)&&p.trimEnd().endsWith("]");if(p.startsWith(`${i}%% vscode.cell`)||d){let h=yv(p,void 0);if(h){let m=o.get(h.id)||t.getCells().find(g=>g.document.languageId===h.language&&!s.some(x=>x.cell===g));if(m){let g=u,x=ye.length,I=h.language==="markdown",T=g+p.length+x+(I?r[0].length+x:0);s.push({offset:g,sourceOffset:T,cell:m})}}}u+=p.length+ye.length}return new Tc(e,s,t)}getAlternativeDocument(e,t){let r=e.getCells().filter(l=>t?l.kind!==he.Markup:!0).map(l=>Tn(l)),i=ou(e),o=su(e),s=r.map(l=>({...xv(l,o,i),cell:e.cellAt(l.index)})),a=s.map(l=>l.content).join(ye),u=s.map(l=>{let p=a.indexOf(l.content),d=p+l.prefix.length;return{offset:p,sourceOffset:d,cell:e.cellAt(l.cell.index)}});return new Tc(a,u,e)}};function xv(n,e,t){let r=Tv(n,e),i=n.source.join(ye),o=n.language==="markdown"?`${r}${ye}${t[0]}${ye}`:`${r}${ye}`;return{content:n.language==="markdown"?`${o}${i}${ye}${t[1]}`:`${o}${i}`,prefix:o}}function ou(n){return n?Zi(Gn(n)).blockComment??["```","```"]:['"""','"""']}function su(n){return n&&Zi(Gn(n)).lineComment.start||"#"}function yv(n,e){let t=n.match(/\[id=(.+?)\]/),r=n.match(/\[language=(.+?)\]/);return r?{id:t?t[1].trim():"",language:r[1].trim()}:kc(n)&&typeof e=="string"?{id:t?t[1].trim():"",language:e}:void 0}Nr();var au="<VSCode.Cell ",Ic="<VSCode.Cell>",ti="</VSCode.Cell>";function tw(n){return`${au}id="${n}" `}function Tm(n){return`${tw(n.id)}language="${n.language}">`}function kv(n){return n.includes(au)||n.includes(ti)||n.includes(Ic)}var wc=class extends ei{constructor(t,r,i){super(t,i);this.cellOffsetMap=r}fromCellPosition(t,r){let i=Tn(t),o=Tm(i),s=t.document.eol===Ji.LF?1:2,a=this.getText(),u=t.document.offsetAt(r),l=a.indexOf(o)+o.length+s+u;return this.positionAt(l)}toCellPosition(t){let r=this.offsetAt(t),i=Ei(this.cellOffsetMap,s=>s.offset<=r);if(!i)return;let o=i.cell.document.positionAt(r-i.offset);return{cell:i.cell,position:o}}},Cc=class extends Zr{constructor(){super("xml")}stripCellMarkers(e){let t=e.split(ye);return t.length&&(t[0].startsWith(au)||t[0].startsWith(Ic))&&t.shift(),t.length&&t[t.length-1].trim().endsWith(ti)&&(t[t.length-1]=t[t.length-1].substring(0,t[t.length-1].lastIndexOf(ti))),t.join(ye)}getSummaryOfStructure(e,t,r){let i=[],o=`// ${r}`;return e.getCells().forEach(s=>{if(t.includes(s)){let a=Tn(s);i.push(Tm(a)),a.source.length&&a.source[0].trim().length?(i.push(a.source[0]),i.push(o)):a.source.length&&a.source.some(u=>u.trim().length)?a.source=[o,a.source.filter(u=>u.trim().length)[0],o]:i.push(o),i.push(ti)}else(!i.length||i[i.length-1]!==o)&&i.push(o)}),i.join(ye)}async*parseAlternateContent(e,t,r){let i=!kt(e),o=i?jn(e):new Map,s=-1,a=!1,u=new Set,l=!1,p,d=i?Zi(Gn(e)).languageId:void 0;for await(let f of t){if(r.isCancellationRequested)break;let h=f.value;if((h.startsWith(au)||h.startsWith(Ic))&&(s<0||a||l&&p)){!a&&l&&p&&(p.line=p.line.substring(0,p.line.lastIndexOf(ti)),yield p,yield{type:"end",index:p.index}),l=!1,p=void 0,s+=1,a=!1;let m={type:"start",index:s,uri:void 0,language:void 0,kind:he.Code},g=_v(h,d);g.id&&o.get(g.id)?.document.languageId===g.language?u.has(g.id)?g.id="":u.add(g.id):g.id="";let x=o.get(g.id)?.document.languageId===g.language?o.get(g.id):void 0;m.id=g.id,m.language=g.language,m.uri=x?.document.uri,m.kind=x?.kind||(m.language==="markdown"?he.Markup:he.Code),yield m}else h.startsWith(ti)?(l&&p&&(yield p),a=!0,l=!1,p=void 0,yield{type:"end",index:s}):s>=0&&(l&&p&&(yield p,p=void 0),l=h.endsWith(ti),l?p={type:"line",index:s,line:h}:yield{type:"line",index:s,line:h})}}getAlternativeDocumentFromText(e,t){let r=jn(t),i=[],o=e.split(ye),s=0;for(let a=0;a<o.length;a++){let u=o[a];if(u.startsWith(au)||u.startsWith(Ic)){let l=_v(u,void 0),p=r.get(l.id)||t.getCells().find(d=>d.document.languageId===l.language&&!i.some(f=>f.cell===d));if(p){let d=ye.length,f=s+u.length+d;i.push({offset:f,cell:p})}}s+=u.length+ye.length}return new wc(e,i,t)}getAlternativeDocument(e,t){let i=e.getCells().filter(a=>t?a.kind!==he.Markup:!0).map(a=>Tn(a)).map(a=>{let l=`${Tm(a)}${ye}`;return{content:`${l}${a.source.join(ye)}${ye}${ti}`,prefix:l,cell:e.cellAt(a.index)}}),o=i.map(a=>a.content).join(ye),s=i.map(a=>({offset:o.indexOf(a.content)+a.prefix.length,cell:a.cell}));return new wc(o,s,e)}};function _v(n,e){let t=n.match(/id="([^"]+)"/),r=n.match(/language="([^"]+)"/);if(!r){if(kv(n)&&typeof e=="string")return{id:t?t[1].trim():"",language:e};throw new Error(`Invalid cell part in ${n}`)}return{id:t?t[1].trim():"",language:r[1].trim()}}function Ec(n){switch(n){case"xml":return new Cc;case"text":return new _c;case"json":return new yc;default:throw new Error(`Unsupported kind '${n}'`)}}var gs=_("IAlternativeNotebookContentService"),hs=class{constructor(e,t){this.configurationService=e;this.experimentationService=t}getFormat(e){return e&&sv(e)?"json":this.configurationService.getExperimentBasedConfig(xe.AdvancedExperimentalExperiments.NotebookAlternativeDocumentFormat,this.experimentationService)}create(e){return Ec(e)}};hs=E([v(0,et),v(1,gt)],hs);var Sc=class n{constructor(e,t,r,i,o){this.alternativeFormat=i;this._alternativeDocument=o;this.type="notebook";this.document=e,this.uri=t,this.version=r,this.languageId=i==="text"?Gn(e)||"python":i}static create(e,t){let r=e.uri,i=e.version,o=Ec(t).getAlternativeDocument(e);return new n(e,r,i,t,o)}static fromNewText(e,t){let r=Ec(t.alternativeFormat).getAlternativeDocumentFromText(e,t.document);return new n(t.document,t.uri,t.version,t.alternativeFormat,r)}static fromJSON(e,t){return n.create(e,t.alternativeFormat)}getText(e){return this._alternativeDocument.getText(e)}getSelection(){return new Qb(0,0,this.lineCount,0)}getWholeRange(){return new We(0,0,this.lineCount,0)}get lines(){return this._alternativeDocument.lines}get lineCount(){return this._alternativeDocument.lineCount}lineAt(e){let t;if(e instanceof _t)t=e.line;else if(typeof e=="number")t=e;else throw new Error("Invalid argument");if(t<0||t>=this.lines.length)throw new Error("Illegal value for `line`");return this._alternativeDocument.lineAt(t)}offsetAt(e){return this._alternativeDocument.offsetAt(e)}positionAt(e){return this._alternativeDocument.positionAt(e)}validateRange(e){return this._alternativeDocument.validateRange(e)}validatePosition(e){return this._alternativeDocument.validatePosition(e)}toJSON(){return{type:"notebook",uri:this.uri.toJSON(),languageId:this.languageId,version:this.version,_text:this._alternativeDocument.getText(),alternativeFormat:this.alternativeFormat}}};pe();Wt();var rt=_("IWorkspaceService"),Rc=class{asRelativePath(e,t){let r,i="";if(typeof e=="string"?(r=W.file(e),i=e):typeof e<"u"&&(r=e,i=e.fsPath),!r)return i;let o=this.getWorkspaceFolder(r);if(!o)return i;typeof t>"u"&&(t=this.getWorkspaceFolders().length>1);let s=N1(o,r);return t&&(s=`${this.getWorkspaceFolderName(o)}/${s}`),s}async openTextDocumentAndSnapshot(e){let t=await this.openTextDocument(e);return vc.create(t)}async openNotebookDocumentAndSnapshot(e,t){let r=Xi(e,this.notebookDocuments)||await this.openNotebookDocument(e);return Sc.create(r,t)}getWorkspaceFolder(e){return this.getWorkspaceFolders().find(t=>P1.isEqualOrParent(e,t))}};function Iv(n,e){let t=n.getWorkspaceFolder(e);return t?re.relative(t.path,e.path):e.path}var wv=_("ICustomInstructionsService");function nw(n){return typeof n=="object"&&n!==null?typeof n.file=="string"&&(n.language===void 0||typeof n.language=="string"):!1}function rw(n){return typeof n=="object"&&n!==null?typeof n.text=="string"&&(n.language===void 0||typeof n.language=="string"):!1}var iw=".instructions.md",ow="chat.instructionsFilesLocations",sw=".github/copilot-instructions.md",bs=class extends K{constructor(t,r,i,o,s,a,u){super();this.configurationService=t;this.envService=r;this.workspaceService=i;this.fileSystemService=o;this.promptPathRepresentationService=s;this.logService=a;this.extensionService=u;this._register(this.extensionService.onDidChange(()=>{this._contributedInstructions=void 0}))}async fetchInstructionsFromFile(t){return await this.readInstructionsFromFile(t)}async getAgentInstructions(){let t=[];if(this.configurationService.getConfig(xe.UseInstructionFiles))for(let r of this.workspaceService.getWorkspaceFolders())try{let i=Ua(r,sw);(await this.fileSystemService.stat(i)).type===Zb.File&&t.push(i)}catch{}return t}async fetchInstructionsFromSetting(t){let r=[],i=[],o=new Set,s=this.configurationService.inspectConfig(t);s&&await this.collectInstructionsFromSettings([s.workspaceFolderValue,s.workspaceValue,s.globalValue],o,i,r);let a=Xa.from({scheme:this.envService.uriScheme,authority:"settings",path:`/${t.fullyQualifiedId}`});return i.length>0&&r.push({kind:1,content:i,reference:a}),r}async collectInstructionsFromSettings(t,r,i,o){let s=new Set;for(let a of t)if(Array.isArray(a))for(let u of a)nw(u)&&!r.has(u.file)&&(r.add(u.file),await this._collectInstructionsFromFile(u.file,u.language,o)),rw(u)&&!s.has(u.text)&&(s.add(u.text),i.push({instruction:u.text,languageId:u.language}))}async _collectInstructionsFromFile(t,r,i){this.logService.debug(`Collect instructions from file: ${t}`);let o=this.workspaceService.getWorkspaceFolders().map(async s=>{let a=Xa.joinPath(s,t),u=await this.readInstructionsFromFile(a);u&&i.push(u)});await Promise.all(o)}async readInstructionsFromFile(t,r){try{let i=await this.fileSystemService.readFile(t),s=new TextDecoder().decode(i).trim();if(!s){this.logService.debug(`Instructions file is empty: ${t.toString()}`);return}return{kind:0,content:[{instruction:s,languageId:r}],reference:t}}catch{this.logService.debug(`Instructions file not found: ${t.toString()}`);return}}isExternalInstructionsFile(t){if(!t.path.endsWith(iw))return!1;if(t.scheme===ke.vscodeUserData||this.getInstructionURLFromExtensionPoint().has(t))return!0;if(t.scheme!==ke.file)return!1;let r=this.promptPathRepresentationService.getFilePath(t),i=qo(r),o=this.configurationService.getNonExtensionConfig(ow);if(Mr(o))for(let s in o){let a=s.trim();if(o[s]===!0&&uf(a)){let l=a.endsWith("/")||a.endsWith("*")?i:a;if(vr(l,a))return!0}}return!0}getInstructionURLFromExtensionPoint(){if(!this._contributedInstructions){let t=new Xu;for(let r of this.extensionService.all){let i=r.packageJSON.contributes?.chatInstructions;if(Array.isArray(i)){for(let o of i)if(o.path){let s=Ua(r.extensionUri,o.path);t.add(s)}}}this._contributedInstructions=t}return this._contributedInstructions}};bs=E([v(0,et),v(1,Qe),v(2,rt),v(3,Nt),v(4,fc),v(5,Z),v(6,cc)],bs);var Cv=_("IDebugOutputService");pe();var Im=require("vscode"),Ev=[];function Sv(){return Ev.join(`
`)}function aw(n,e){n.push(uw(e)),n.length>40&&n.shift()}var _m=class{constructor(e){this.session=e}onWillStartSession(){}onWillReceiveMessage(e){}onDidSendMessage(e){if(Im.debug.activeDebugSession!==this.session)return;let t=this.extractOutput(e);t&&aw(Ev,t)}extractOutput(e){if(e.event==="output"&&(e.body.category==="stdout"||e.body.category==="stderr"))return e.body.output}onWillStopSession(){}onError(e){}onExit(e,t){}};function uw(n){let e=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g;return n&&(n=n.replace(e,"")),n}function Rv(){return[Im.debug.registerDebugAdapterTrackerFactory("*",new km)]}var km=class{createDebugAdapterTracker(e){return new _m(e)}};var Dc=class extends K{constructor(){super();for(let e of Rv())this._register(e)}get consoleOutput(){return Sv()}};var Dv=_("IDialogService");var wm=Te(require("vscode")),Ac=class{showQuickPick(e,t,r){return wm.window.showQuickPick(e,t,r)}showOpenDialog(e){return wm.window.showOpenDialog(e).then(t=>t)}};Vr();fr();var vs=_("IDiffService");fr();Vr();qn();var _n=class{get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let t=0;for(;t<e.length;){let r=e.charCodeAt(t);t++,(r===13||r===10)&&(r===13&&t<e.length&&e.charCodeAt(t)===10&&t++,this._lineStartOffsets.push(t))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let t=1;for(;t<this._lineStartOffsets.length&&!(this._lineStartOffsets[t]>e);t++);let r=e-this._lineStartOffsets[t-1];return new ae(t,r+1)}startOffsetOfLineContaining(e){let t=1;for(;t<this._lineStartOffsets.length&&!(this._lineStartOffsets[t]>e);t++);return this._lineStartOffsets[t-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function Pc(n,e,t,r=5e3){let i=await t.computeDiff(n,e,{maxComputationTimeMs:r,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new _n(n),s=new _n(e),a=[];for(let u of i.changes)for(let l of u.innerChanges??[]){let p=s.positionToOffset(l.modifiedRange.getStartPosition()),d=s.positionToOffset(l.modifiedRange.getEndPosition()),f=e.substring(p,d),h=o.positionToOffset(l.originalRange.getStartPosition()),m=o.positionToOffset(l.originalRange.getEndPosition()),g=new ie(h,m);a.push(new Re(g,f))}return new oe(a)}function uu(n){let e=n.map(r=>new Re(ie.ofStartAndLength(r.rangeOffset,r.rangeLength),r.text));return e.reverse(),new oe(e)}var xs=class{constructor(e,t){this.initialText=e;this._diffService=t;this._document=new Cm(e)}addEdits(e){this._document.applyTextEdits(e)}getText(){return this._document.getValue()}async getEdits(){let e=this.getText();return await Pc(this.initialText,e,this._diffService)}};xs=E([v(1,vs)],xs);var Cm=class{constructor(e=""){this._converter=void 0;this._value="";this._value=e}getValue(){return this._value}applyTextEdits(e){let t=new oe(e.map(r=>{let i=this.positionToOffset(r.range.start),o=this.positionToOffset(r.range.end);return new Re(new ie(i,o),r.newText)}));this.applyOffsetEdit(t)}applyOffsetEdit(e){this._value=e.apply(this._value),this._converter=void 0}positionToOffset(e){this._converter||(this._converter=new _n(this._value));let t=e.line;if(t<0)return 0;if(t>=this._converter.lines)return this._value.length;let r=e.character,i=this._converter.lineOffset(t+1);if(r<=0)return i;let o;if(t+1<this._converter.lines)if(o=this._converter.lineOffset(t+2),o>i){let s=this._value.charCodeAt(o-1);(s===13||s===10)&&o--,s===10&&o>i&&this._value.charCodeAt(o-1)===13&&o--}else o=i;else o=this._value.length;return r>o-i?o:i+r}};we();pe();var ys=class extends K{constructor(t,r,i,o){super();this._baseText=t;this._document=r;this._workspaceService=i;this._diffService=o;this._baseDocumentText=this._document.getText();this._editsOnTop=oe.empty;this._register(this._workspaceService.onDidChangeTextDocument(s=>{if(s.document.uri.toString()!==this._document.uri.toString())return;let a=uu(s.contentChanges);this._editsOnTop=this._editsOnTop.compose(a)}))}async compute(){let t=await Pc(this._baseText,this._baseDocumentText,this._diffService);return{document:this._document,baseText:this._baseText,getEditsSinceInitial:()=>{if(this._store.isDisposed)throw new G("EditComputer has been disposed");return t.compose(this._editsOnTop)}}}};ys=E([v(2,rt),v(3,vs)],ys);var Lc=class extends K{constructor(t,r){super();this.textDocument=t;this._workspaceService=r;this._edits=oe.empty;this.initialTextVersion=this.textDocument.version;this._register(this._workspaceService.onDidChangeTextDocument(i=>{if(i.document.uri.toString()===this.textDocument.uri.toString()){let o=uu(i.contentChanges);this._edits=this._edits.compose(o)}}))}getEdits(){if(this._store.isDisposed)throw new G("DocumentEditRecorder has been disposed");return this._edits}};Lc=E([v(1,rt)],Lc);pe();pe();qt();Fn();we();fr();function Av(n){return n.replacements.map(e=>lw(e))}function lw(n){return[n.replaceRange.start,n.replaceRange.endExclusive,n.newText]}function Pv(n){return new oe(n.map(e=>cw(e)))}function cw(n){return new Re(new ie(n[0],n[1]),n[2])}Hi();kb({StringEdit:oe,StringReplacement:Re,TextReplacement:ft,TextEdit:gr,TextLength:nt});var Ts=class n{constructor(e,t){this.base=e;this.edit=t}static fromEdit(e){let t=Kr.fromStringEdit(e.edit,e.base);return new n(e.base,t)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new kn(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=r=>!r.lineRange.isEmpty||r.newLines.length>0,t=this.edit.replacements.map(r=>r.removeCommonSuffixPrefixLines(this.base)).filter(r=>e(r));return new n(this.base,new Kr(t))}};var kn=class n{constructor(e,t){this.base=e;this.edit=t}static toLineEdit(e){return Kr.fromStringEdit(e.edit,e.base)}getEditedState(){return this.edit.applyOnText(this.base)}rebase(e){return Nn(()=>null.base.equals(e.applyOnText(this.base))),Nn(()=>null.edit.applyOnText(null.base).equals(this.edit.applyOnText(e.applyOnText(this.base)))),null}toString(){return Ts.fromEdit(this).toString()}normalize(){return new n(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}};var lu=class n{constructor(e,t){this._editType=e;this.edits=t}static single(e){return new n(oe,[e])}compose(){let e=new this._editType([]);for(let t of this.edits)e=e.compose(t);return e}add(e){return new n(this._editType,[...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let t=e,r=[];for(let i of this.edits){let o=ns.trySwap(t,i);if(!o)return;r.push(o.e1),t=o.e2}return{edits:new n(oe,r),editLast:t}}serialize(){return this.edits.map(e=>Av(e))}static deserialize(e){return new n(oe,e.map(t=>Pv(t)))}toHumanReadablePatch(e){let t=e,r=[];for(let i of this.edits){let o=kn.toLineEdit(new kn(t,i));r.push(o.humanReadablePatch(t.getLines())),t=i.applyOnText(t)}return r.join(`
---
`)}};Ht();Hi();var Hv=Te(Bv()),De=Te($v()),Kv=Te(Gv());function Jv(n,e){if(n.length===0)return e;if(e.length===0)return n;let t=new Hv.ArrayQueue(zv(n)),r=zv(e);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function o(l){if(l===void 0){let d=t.takeWhile(f=>!0)||[];return i&&d.unshift(i),d}let p=[];for(;i&&!(0,De.lengthIsZero)(l);){let[d,f]=i.splitAt(l);p.push(d),l=(0,De.lengthDiffNonNegative)(d.lengthAfter,l),i=f??t.dequeue()}return(0,De.lengthIsZero)(l)||p.push(new cu(!1,l,l)),p}let s=[];function a(l,p,d){if(s.length>0&&(0,De.lengthEquals)(s[s.length-1].endOffset,l)){let f=s[s.length-1];s[s.length-1]=new Kv.TextEditInfo(f.startOffset,p,(0,De.lengthAdd)(f.newLength,d))}else s.push({startOffset:l,endOffset:p,newLength:d})}let u=De.lengthZero;for(let l of r){let p=o(l.lengthBefore);if(l.modified){let d=(0,De.sumLengths)(p,h=>h.lengthBefore),f=(0,De.lengthAdd)(u,d);a(u,f,l.lengthAfter),u=f}else for(let d of p){let f=u;u=(0,De.lengthAdd)(u,d.lengthBefore),d.modified&&a(f,u,d.lengthAfter)}}return s}var cu=class n{constructor(e,t,r){this.modified=e;this.lengthBefore=t;this.lengthAfter=r}splitAt(e){let t=(0,De.lengthDiffNonNegative)(e,this.lengthAfter);return(0,De.lengthEquals)(t,De.lengthZero)?[this,void 0]:this.modified?[new n(this.modified,this.lengthBefore,e),new n(this.modified,De.lengthZero,t)]:[new n(this.modified,e,e),new n(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${(0,De.lengthToObj)(this.lengthBefore)} -> ${(0,De.lengthToObj)(this.lengthAfter)}`}};function zv(n){let e=[],t=De.lengthZero;for(let r of n){let i=(0,De.lengthDiffNonNegative)(t,r.startOffset);(0,De.lengthIsZero)(i)||e.push(new cu(!1,i,i));let o=(0,De.lengthDiffNonNegative)(r.startOffset,r.endOffset);e.push(new cu(!0,o,r.newLength)),t=r.endOffset}return e}Nc();Nc();var Mc=class{constructor(e,t,r){this.startOffset=e;this.endOffset=t;this.newLength=r}toString(){return`[${to(this.startOffset)}...${to(this.endOffset)}) -> ${to(this.newLength)}`}};var du=class n{constructor(e){this.edits=e}static{this.empty=new n([])}static fromTextEdit(e){let t=e.replacements.map(r=>new Uc(r.range,nt.ofText(r.text)));return new n(t)}static _fromTextEditInfo(e){let t=e.map(r=>{let i=to(r.newLength);return new Uc(Pm(r.startOffset,r.endOffset),new nt(i.lineCount,i.columnCount))});return new n(t)}_toTextEditInfo(){return this.edits.map(e=>new Mc(In(e.range.startLineNumber-1,e.range.startColumn-1),In(e.range.endLineNumber-1,e.range.endColumn-1),In(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let t=this._toTextEditInfo(),r=e._toTextEditInfo(),i=Jv(t,r);return n._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return q.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Uc=class{constructor(e,t){this.range=e;this.newLength=t}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};qt();var Qv=Object.create(null);function c(n,e){if(tl(e)){let t=Qv[e];if(t===void 0)throw new Error(`${n} references an unknown codicon: ${e}`);e=t}return Qv[n]=e,{id:n}}var Xv={add:c("add",6e4),plus:c("plus",6e4),gistNew:c("gist-new",6e4),repoCreate:c("repo-create",6e4),lightbulb:c("lightbulb",60001),lightBulb:c("light-bulb",60001),repo:c("repo",60002),repoDelete:c("repo-delete",60002),gistFork:c("gist-fork",60003),repoForked:c("repo-forked",60003),gitPullRequest:c("git-pull-request",60004),gitPullRequestAbandoned:c("git-pull-request-abandoned",60004),recordKeys:c("record-keys",60005),keyboard:c("keyboard",60005),tag:c("tag",60006),gitPullRequestLabel:c("git-pull-request-label",60006),tagAdd:c("tag-add",60006),tagRemove:c("tag-remove",60006),person:c("person",60007),personFollow:c("person-follow",60007),personOutline:c("person-outline",60007),personFilled:c("person-filled",60007),gitBranch:c("git-branch",60008),gitBranchCreate:c("git-branch-create",60008),gitBranchDelete:c("git-branch-delete",60008),sourceControl:c("source-control",60008),mirror:c("mirror",60009),mirrorPublic:c("mirror-public",60009),star:c("star",60010),starAdd:c("star-add",60010),starDelete:c("star-delete",60010),starEmpty:c("star-empty",60010),comment:c("comment",60011),commentAdd:c("comment-add",60011),alert:c("alert",60012),warning:c("warning",60012),search:c("search",60013),searchSave:c("search-save",60013),logOut:c("log-out",60014),signOut:c("sign-out",60014),logIn:c("log-in",60015),signIn:c("sign-in",60015),eye:c("eye",60016),eyeUnwatch:c("eye-unwatch",60016),eyeWatch:c("eye-watch",60016),circleFilled:c("circle-filled",60017),primitiveDot:c("primitive-dot",60017),closeDirty:c("close-dirty",60017),debugBreakpoint:c("debug-breakpoint",60017),debugBreakpointDisabled:c("debug-breakpoint-disabled",60017),debugHint:c("debug-hint",60017),terminalDecorationSuccess:c("terminal-decoration-success",60017),primitiveSquare:c("primitive-square",60018),edit:c("edit",60019),pencil:c("pencil",60019),info:c("info",60020),issueOpened:c("issue-opened",60020),gistPrivate:c("gist-private",60021),gitForkPrivate:c("git-fork-private",60021),lock:c("lock",60021),mirrorPrivate:c("mirror-private",60021),close:c("close",60022),removeClose:c("remove-close",60022),x:c("x",60022),repoSync:c("repo-sync",60023),sync:c("sync",60023),clone:c("clone",60024),desktopDownload:c("desktop-download",60024),beaker:c("beaker",60025),microscope:c("microscope",60025),vm:c("vm",60026),deviceDesktop:c("device-desktop",60026),file:c("file",60027),more:c("more",60028),ellipsis:c("ellipsis",60028),kebabHorizontal:c("kebab-horizontal",60028),mailReply:c("mail-reply",60029),reply:c("reply",60029),organization:c("organization",60030),organizationFilled:c("organization-filled",60030),organizationOutline:c("organization-outline",60030),newFile:c("new-file",60031),fileAdd:c("file-add",60031),newFolder:c("new-folder",60032),fileDirectoryCreate:c("file-directory-create",60032),trash:c("trash",60033),trashcan:c("trashcan",60033),history:c("history",60034),clock:c("clock",60034),folder:c("folder",60035),fileDirectory:c("file-directory",60035),symbolFolder:c("symbol-folder",60035),logoGithub:c("logo-github",60036),markGithub:c("mark-github",60036),github:c("github",60036),terminal:c("terminal",60037),console:c("console",60037),repl:c("repl",60037),zap:c("zap",60038),symbolEvent:c("symbol-event",60038),error:c("error",60039),stop:c("stop",60039),variable:c("variable",60040),symbolVariable:c("symbol-variable",60040),array:c("array",60042),symbolArray:c("symbol-array",60042),symbolModule:c("symbol-module",60043),symbolPackage:c("symbol-package",60043),symbolNamespace:c("symbol-namespace",60043),symbolObject:c("symbol-object",60043),symbolMethod:c("symbol-method",60044),symbolFunction:c("symbol-function",60044),symbolConstructor:c("symbol-constructor",60044),symbolBoolean:c("symbol-boolean",60047),symbolNull:c("symbol-null",60047),symbolNumeric:c("symbol-numeric",60048),symbolNumber:c("symbol-number",60048),symbolStructure:c("symbol-structure",60049),symbolStruct:c("symbol-struct",60049),symbolParameter:c("symbol-parameter",60050),symbolTypeParameter:c("symbol-type-parameter",60050),symbolKey:c("symbol-key",60051),symbolText:c("symbol-text",60051),symbolReference:c("symbol-reference",60052),goToFile:c("go-to-file",60052),symbolEnum:c("symbol-enum",60053),symbolValue:c("symbol-value",60053),symbolRuler:c("symbol-ruler",60054),symbolUnit:c("symbol-unit",60054),activateBreakpoints:c("activate-breakpoints",60055),archive:c("archive",60056),arrowBoth:c("arrow-both",60057),arrowDown:c("arrow-down",60058),arrowLeft:c("arrow-left",60059),arrowRight:c("arrow-right",60060),arrowSmallDown:c("arrow-small-down",60061),arrowSmallLeft:c("arrow-small-left",60062),arrowSmallRight:c("arrow-small-right",60063),arrowSmallUp:c("arrow-small-up",60064),arrowUp:c("arrow-up",60065),bell:c("bell",60066),bold:c("bold",60067),book:c("book",60068),bookmark:c("bookmark",60069),debugBreakpointConditionalUnverified:c("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:c("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:c("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:c("debug-breakpoint-data-unverified",60072),debugBreakpointData:c("debug-breakpoint-data",60073),debugBreakpointDataDisabled:c("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:c("debug-breakpoint-log-unverified",60074),debugBreakpointLog:c("debug-breakpoint-log",60075),debugBreakpointLogDisabled:c("debug-breakpoint-log-disabled",60075),briefcase:c("briefcase",60076),broadcast:c("broadcast",60077),browser:c("browser",60078),bug:c("bug",60079),calendar:c("calendar",60080),caseSensitive:c("case-sensitive",60081),check:c("check",60082),checklist:c("checklist",60083),chevronDown:c("chevron-down",60084),chevronLeft:c("chevron-left",60085),chevronRight:c("chevron-right",60086),chevronUp:c("chevron-up",60087),chromeClose:c("chrome-close",60088),chromeMaximize:c("chrome-maximize",60089),chromeMinimize:c("chrome-minimize",60090),chromeRestore:c("chrome-restore",60091),circleOutline:c("circle-outline",60092),circle:c("circle",60092),debugBreakpointUnverified:c("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:c("terminal-decoration-incomplete",60092),circleSlash:c("circle-slash",60093),circuitBoard:c("circuit-board",60094),clearAll:c("clear-all",60095),clippy:c("clippy",60096),closeAll:c("close-all",60097),cloudDownload:c("cloud-download",60098),cloudUpload:c("cloud-upload",60099),code:c("code",60100),collapseAll:c("collapse-all",60101),colorMode:c("color-mode",60102),commentDiscussion:c("comment-discussion",60103),creditCard:c("credit-card",60105),dash:c("dash",60108),dashboard:c("dashboard",60109),database:c("database",60110),debugContinue:c("debug-continue",60111),debugDisconnect:c("debug-disconnect",60112),debugPause:c("debug-pause",60113),debugRestart:c("debug-restart",60114),debugStart:c("debug-start",60115),debugStepInto:c("debug-step-into",60116),debugStepOut:c("debug-step-out",60117),debugStepOver:c("debug-step-over",60118),debugStop:c("debug-stop",60119),debug:c("debug",60120),deviceCameraVideo:c("device-camera-video",60121),deviceCamera:c("device-camera",60122),deviceMobile:c("device-mobile",60123),diffAdded:c("diff-added",60124),diffIgnored:c("diff-ignored",60125),diffModified:c("diff-modified",60126),diffRemoved:c("diff-removed",60127),diffRenamed:c("diff-renamed",60128),diff:c("diff",60129),diffSidebyside:c("diff-sidebyside",60129),discard:c("discard",60130),editorLayout:c("editor-layout",60131),emptyWindow:c("empty-window",60132),exclude:c("exclude",60133),extensions:c("extensions",60134),eyeClosed:c("eye-closed",60135),fileBinary:c("file-binary",60136),fileCode:c("file-code",60137),fileMedia:c("file-media",60138),filePdf:c("file-pdf",60139),fileSubmodule:c("file-submodule",60140),fileSymlinkDirectory:c("file-symlink-directory",60141),fileSymlinkFile:c("file-symlink-file",60142),fileZip:c("file-zip",60143),files:c("files",60144),filter:c("filter",60145),flame:c("flame",60146),foldDown:c("fold-down",60147),foldUp:c("fold-up",60148),fold:c("fold",60149),folderActive:c("folder-active",60150),folderOpened:c("folder-opened",60151),gear:c("gear",60152),gift:c("gift",60153),gistSecret:c("gist-secret",60154),gist:c("gist",60155),gitCommit:c("git-commit",60156),gitCompare:c("git-compare",60157),compareChanges:c("compare-changes",60157),gitMerge:c("git-merge",60158),githubAction:c("github-action",60159),githubAlt:c("github-alt",60160),globe:c("globe",60161),grabber:c("grabber",60162),graph:c("graph",60163),gripper:c("gripper",60164),heart:c("heart",60165),home:c("home",60166),horizontalRule:c("horizontal-rule",60167),hubot:c("hubot",60168),inbox:c("inbox",60169),issueReopened:c("issue-reopened",60171),issues:c("issues",60172),italic:c("italic",60173),jersey:c("jersey",60174),json:c("json",60175),kebabVertical:c("kebab-vertical",60176),key:c("key",60177),law:c("law",60178),lightbulbAutofix:c("lightbulb-autofix",60179),linkExternal:c("link-external",60180),link:c("link",60181),listOrdered:c("list-ordered",60182),listUnordered:c("list-unordered",60183),liveShare:c("live-share",60184),loading:c("loading",60185),location:c("location",60186),mailRead:c("mail-read",60187),mail:c("mail",60188),markdown:c("markdown",60189),megaphone:c("megaphone",60190),mention:c("mention",60191),milestone:c("milestone",60192),gitPullRequestMilestone:c("git-pull-request-milestone",60192),mortarBoard:c("mortar-board",60193),move:c("move",60194),multipleWindows:c("multiple-windows",60195),mute:c("mute",60196),noNewline:c("no-newline",60197),note:c("note",60198),octoface:c("octoface",60199),openPreview:c("open-preview",60200),package:c("package",60201),paintcan:c("paintcan",60202),pin:c("pin",60203),play:c("play",60204),run:c("run",60204),plug:c("plug",60205),preserveCase:c("preserve-case",60206),preview:c("preview",60207),project:c("project",60208),pulse:c("pulse",60209),question:c("question",60210),quote:c("quote",60211),radioTower:c("radio-tower",60212),reactions:c("reactions",60213),references:c("references",60214),refresh:c("refresh",60215),regex:c("regex",60216),remoteExplorer:c("remote-explorer",60217),remote:c("remote",60218),remove:c("remove",60219),replaceAll:c("replace-all",60220),replace:c("replace",60221),repoClone:c("repo-clone",60222),repoForcePush:c("repo-force-push",60223),repoPull:c("repo-pull",60224),repoPush:c("repo-push",60225),report:c("report",60226),requestChanges:c("request-changes",60227),rocket:c("rocket",60228),rootFolderOpened:c("root-folder-opened",60229),rootFolder:c("root-folder",60230),rss:c("rss",60231),ruby:c("ruby",60232),saveAll:c("save-all",60233),saveAs:c("save-as",60234),save:c("save",60235),screenFull:c("screen-full",60236),screenNormal:c("screen-normal",60237),searchStop:c("search-stop",60238),server:c("server",60240),settingsGear:c("settings-gear",60241),settings:c("settings",60242),shield:c("shield",60243),smiley:c("smiley",60244),sortPrecedence:c("sort-precedence",60245),splitHorizontal:c("split-horizontal",60246),splitVertical:c("split-vertical",60247),squirrel:c("squirrel",60248),starFull:c("star-full",60249),starHalf:c("star-half",60250),symbolClass:c("symbol-class",60251),symbolColor:c("symbol-color",60252),symbolConstant:c("symbol-constant",60253),symbolEnumMember:c("symbol-enum-member",60254),symbolField:c("symbol-field",60255),symbolFile:c("symbol-file",60256),symbolInterface:c("symbol-interface",60257),symbolKeyword:c("symbol-keyword",60258),symbolMisc:c("symbol-misc",60259),symbolOperator:c("symbol-operator",60260),symbolProperty:c("symbol-property",60261),wrench:c("wrench",60261),wrenchSubaction:c("wrench-subaction",60261),symbolSnippet:c("symbol-snippet",60262),tasklist:c("tasklist",60263),telescope:c("telescope",60264),textSize:c("text-size",60265),threeBars:c("three-bars",60266),thumbsdown:c("thumbsdown",60267),thumbsup:c("thumbsup",60268),tools:c("tools",60269),triangleDown:c("triangle-down",60270),triangleLeft:c("triangle-left",60271),triangleRight:c("triangle-right",60272),triangleUp:c("triangle-up",60273),twitter:c("twitter",60274),unfold:c("unfold",60275),unlock:c("unlock",60276),unmute:c("unmute",60277),unverified:c("unverified",60278),verified:c("verified",60279),versions:c("versions",60280),vmActive:c("vm-active",60281),vmOutline:c("vm-outline",60282),vmRunning:c("vm-running",60283),watch:c("watch",60284),whitespace:c("whitespace",60285),wholeWord:c("whole-word",60286),window:c("window",60287),wordWrap:c("word-wrap",60288),zoomIn:c("zoom-in",60289),zoomOut:c("zoom-out",60290),listFilter:c("list-filter",60291),listFlat:c("list-flat",60292),listSelection:c("list-selection",60293),selection:c("selection",60293),listTree:c("list-tree",60294),debugBreakpointFunctionUnverified:c("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:c("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:c("debug-breakpoint-function-disabled",60296),debugStackframeActive:c("debug-stackframe-active",60297),circleSmallFilled:c("circle-small-filled",60298),debugStackframeDot:c("debug-stackframe-dot",60298),terminalDecorationMark:c("terminal-decoration-mark",60298),debugStackframe:c("debug-stackframe",60299),debugStackframeFocused:c("debug-stackframe-focused",60299),debugBreakpointUnsupported:c("debug-breakpoint-unsupported",60300),symbolString:c("symbol-string",60301),debugReverseContinue:c("debug-reverse-continue",60302),debugStepBack:c("debug-step-back",60303),debugRestartFrame:c("debug-restart-frame",60304),debugAlt:c("debug-alt",60305),callIncoming:c("call-incoming",60306),callOutgoing:c("call-outgoing",60307),menu:c("menu",60308),expandAll:c("expand-all",60309),feedback:c("feedback",60310),gitPullRequestReviewer:c("git-pull-request-reviewer",60310),groupByRefType:c("group-by-ref-type",60311),ungroupByRefType:c("ungroup-by-ref-type",60312),account:c("account",60313),gitPullRequestAssignee:c("git-pull-request-assignee",60313),bellDot:c("bell-dot",60314),debugConsole:c("debug-console",60315),library:c("library",60316),output:c("output",60317),runAll:c("run-all",60318),syncIgnored:c("sync-ignored",60319),pinned:c("pinned",60320),githubInverted:c("github-inverted",60321),serverProcess:c("server-process",60322),serverEnvironment:c("server-environment",60323),pass:c("pass",60324),issueClosed:c("issue-closed",60324),stopCircle:c("stop-circle",60325),playCircle:c("play-circle",60326),record:c("record",60327),debugAltSmall:c("debug-alt-small",60328),vmConnect:c("vm-connect",60329),cloud:c("cloud",60330),merge:c("merge",60331),export:c("export",60332),graphLeft:c("graph-left",60333),magnet:c("magnet",60334),notebook:c("notebook",60335),redo:c("redo",60336),checkAll:c("check-all",60337),pinnedDirty:c("pinned-dirty",60338),passFilled:c("pass-filled",60339),circleLargeFilled:c("circle-large-filled",60340),circleLarge:c("circle-large",60341),circleLargeOutline:c("circle-large-outline",60341),combine:c("combine",60342),gather:c("gather",60342),table:c("table",60343),variableGroup:c("variable-group",60344),typeHierarchy:c("type-hierarchy",60345),typeHierarchySub:c("type-hierarchy-sub",60346),typeHierarchySuper:c("type-hierarchy-super",60347),gitPullRequestCreate:c("git-pull-request-create",60348),runAbove:c("run-above",60349),runBelow:c("run-below",60350),notebookTemplate:c("notebook-template",60351),debugRerun:c("debug-rerun",60352),workspaceTrusted:c("workspace-trusted",60353),workspaceUntrusted:c("workspace-untrusted",60354),workspaceUnknown:c("workspace-unknown",60355),terminalCmd:c("terminal-cmd",60356),terminalDebian:c("terminal-debian",60357),terminalLinux:c("terminal-linux",60358),terminalPowershell:c("terminal-powershell",60359),terminalTmux:c("terminal-tmux",60360),terminalUbuntu:c("terminal-ubuntu",60361),terminalBash:c("terminal-bash",60362),arrowSwap:c("arrow-swap",60363),copy:c("copy",60364),personAdd:c("person-add",60365),filterFilled:c("filter-filled",60366),wand:c("wand",60367),debugLineByLine:c("debug-line-by-line",60368),inspect:c("inspect",60369),layers:c("layers",60370),layersDot:c("layers-dot",60371),layersActive:c("layers-active",60372),compass:c("compass",60373),compassDot:c("compass-dot",60374),compassActive:c("compass-active",60375),azure:c("azure",60376),issueDraft:c("issue-draft",60377),gitPullRequestClosed:c("git-pull-request-closed",60378),gitPullRequestDraft:c("git-pull-request-draft",60379),debugAll:c("debug-all",60380),debugCoverage:c("debug-coverage",60381),runErrors:c("run-errors",60382),folderLibrary:c("folder-library",60383),debugContinueSmall:c("debug-continue-small",60384),beakerStop:c("beaker-stop",60385),graphLine:c("graph-line",60386),graphScatter:c("graph-scatter",60387),pieChart:c("pie-chart",60388),bracket:c("bracket",60175),bracketDot:c("bracket-dot",60389),bracketError:c("bracket-error",60390),lockSmall:c("lock-small",60391),azureDevops:c("azure-devops",60392),verifiedFilled:c("verified-filled",60393),newline:c("newline",60394),layout:c("layout",60395),layoutActivitybarLeft:c("layout-activitybar-left",60396),layoutActivitybarRight:c("layout-activitybar-right",60397),layoutPanelLeft:c("layout-panel-left",60398),layoutPanelCenter:c("layout-panel-center",60399),layoutPanelJustify:c("layout-panel-justify",60400),layoutPanelRight:c("layout-panel-right",60401),layoutPanel:c("layout-panel",60402),layoutSidebarLeft:c("layout-sidebar-left",60403),layoutSidebarRight:c("layout-sidebar-right",60404),layoutStatusbar:c("layout-statusbar",60405),layoutMenubar:c("layout-menubar",60406),layoutCentered:c("layout-centered",60407),target:c("target",60408),indent:c("indent",60409),recordSmall:c("record-small",60410),errorSmall:c("error-small",60411),terminalDecorationError:c("terminal-decoration-error",60411),arrowCircleDown:c("arrow-circle-down",60412),arrowCircleLeft:c("arrow-circle-left",60413),arrowCircleRight:c("arrow-circle-right",60414),arrowCircleUp:c("arrow-circle-up",60415),layoutSidebarRightOff:c("layout-sidebar-right-off",60416),layoutPanelOff:c("layout-panel-off",60417),layoutSidebarLeftOff:c("layout-sidebar-left-off",60418),blank:c("blank",60419),heartFilled:c("heart-filled",60420),map:c("map",60421),mapHorizontal:c("map-horizontal",60421),foldHorizontal:c("fold-horizontal",60421),mapFilled:c("map-filled",60422),mapHorizontalFilled:c("map-horizontal-filled",60422),foldHorizontalFilled:c("fold-horizontal-filled",60422),circleSmall:c("circle-small",60423),bellSlash:c("bell-slash",60424),bellSlashDot:c("bell-slash-dot",60425),commentUnresolved:c("comment-unresolved",60426),gitPullRequestGoToChanges:c("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:c("git-pull-request-new-changes",60428),searchFuzzy:c("search-fuzzy",60429),commentDraft:c("comment-draft",60430),send:c("send",60431),sparkle:c("sparkle",60432),insert:c("insert",60433),mic:c("mic",60434),thumbsdownFilled:c("thumbsdown-filled",60435),thumbsupFilled:c("thumbsup-filled",60436),coffee:c("coffee",60437),snake:c("snake",60438),game:c("game",60439),vr:c("vr",60440),chip:c("chip",60441),piano:c("piano",60442),music:c("music",60443),micFilled:c("mic-filled",60444),repoFetch:c("repo-fetch",60445),copilot:c("copilot",60446),lightbulbSparkle:c("lightbulb-sparkle",60447),robot:c("robot",60448),sparkleFilled:c("sparkle-filled",60449),diffSingle:c("diff-single",60450),diffMultiple:c("diff-multiple",60451),surroundWith:c("surround-with",60452),share:c("share",60453),gitStash:c("git-stash",60454),gitStashApply:c("git-stash-apply",60455),gitStashPop:c("git-stash-pop",60456),vscode:c("vscode",60457),vscodeInsiders:c("vscode-insiders",60458),codeOss:c("code-oss",60459),runCoverage:c("run-coverage",60460),runAllCoverage:c("run-all-coverage",60461),coverage:c("coverage",60462),githubProject:c("github-project",60463),mapVertical:c("map-vertical",60464),foldVertical:c("fold-vertical",60464),mapVerticalFilled:c("map-vertical-filled",60465),foldVerticalFilled:c("fold-vertical-filled",60465),goToSearch:c("go-to-search",60466),percentage:c("percentage",60467),sortPercentage:c("sort-percentage",60467),attach:c("attach",60468),goToEditingSession:c("go-to-editing-session",60469),editSession:c("edit-session",60470),codeReview:c("code-review",60471),copilotWarning:c("copilot-warning",60472),python:c("python",60473),copilotLarge:c("copilot-large",60474),copilotWarningLarge:c("copilot-warning-large",60475),keyboardTab:c("keyboard-tab",60476),copilotBlocked:c("copilot-blocked",60477),copilotNotConnected:c("copilot-not-connected",60478),flag:c("flag",60479),lightbulbEmpty:c("lightbulb-empty",60480),symbolMethodArrow:c("symbol-method-arrow",60481),copilotUnavailable:c("copilot-unavailable",60482),repoPinned:c("repo-pinned",60483),keyboardTabAbove:c("keyboard-tab-above",60484),keyboardTabBelow:c("keyboard-tab-below",60485),gitPullRequestDone:c("git-pull-request-done",60486),mcp:c("mcp",60487),extensionsLarge:c("extensions-large",60488),layoutPanelDock:c("layout-panel-dock",60489),layoutSidebarLeftDock:c("layout-sidebar-left-dock",60490),layoutSidebarRightDock:c("layout-sidebar-right-dock",60491),copilotInProgress:c("copilot-in-progress",60492),copilotError:c("copilot-error",60493),copilotSuccess:c("copilot-success",60494),chatSparkle:c("chat-sparkle",60495),searchSparkle:c("search-sparkle",60496),editSparkle:c("edit-sparkle",60497),copilotSnooze:c("copilot-snooze",60498),sendToRemoteAgent:c("send-to-remote-agent",60499),commentDiscussionSparkle:c("comment-discussion-sparkle",60500),chatSparkleWarning:c("chat-sparkle-warning",60501),chatSparkleError:c("chat-sparkle-error",60502),collection:c("collection",60503),newCollection:c("new-collection",60504),thinking:c("thinking",60505),build:c("build",60506),commentDiscussionQuote:c("comment-discussion-quote",60507),cursor:c("cursor",60508),eraser:c("eraser",60509),fileText:c("file-text",60510),gitLens:c("git-lens",60511),quotes:c("quotes",60512),rename:c("rename",60513),runWithDeps:c("run-with-deps",60514),debugConnected:c("debug-connected",60515),strikethrough:c("strikethrough",60516),openInProduct:c("open-in-product",60517),indexZero:c("index-zero",60518)};var VC={dialogError:c("dialog-error","error"),dialogWarning:c("dialog-warning","warning"),dialogInfo:c("dialog-info","info"),dialogClose:c("dialog-close","close"),treeItemExpanded:c("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:c("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:c("tree-filter-on-type-off","list-selection"),treeFilterClear:c("tree-filter-clear","close"),treeItemLoading:c("tree-item-loading","loading"),menuSelection:c("menu-selection","check"),menuSubmenu:c("menu-submenu","chevron-right"),menuBarMore:c("menubar-more","more"),scrollbarButtonLeft:c("scrollbar-button-left","triangle-left"),scrollbarButtonRight:c("scrollbar-button-right","triangle-right"),scrollbarButtonUp:c("scrollbar-button-up","triangle-up"),scrollbarButtonDown:c("scrollbar-button-down","triangle-down"),toolBarMore:c("toolbar-more","more"),quickInputBack:c("quick-input-back","arrow-left"),dropDownButton:c("drop-down-button",60084),symbolCustomColor:c("symbol-customcolor",60252),exportIcon:c("export",60332),workspaceUnspecified:c("workspace-unspecified",60355),newLine:c("newline",60394),thumbsDownFilled:c("thumbsdown-filled",60435),thumbsUpFilled:c("thumbsup-filled",60436),gitFetch:c("git-fetch",60445),lightbulbSparkleAutofix:c("lightbulb-sparkle-autofix",60447),debugBreakpointPending:c("debug-breakpoint-pending",60377)},Bc={...Xv,...VC};var Yv;(e=>{function n(t){return!!t&&typeof t=="object"&&typeof t.id=="string"}e.isThemeColor=n})(Yv||={});var no;(I=>{I.iconNameSegment="[A-Za-z0-9]+",I.iconNameExpression="[A-Za-z0-9-]+",I.iconModifierExpression="~[A-Za-z]+",I.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${I.iconNameExpression})(${I.iconModifierExpression})?$`);function o(T){let b=i.exec(T.id);if(!b)return o(Bc.error);let[,y,S]=b,A=["codicon","codicon-"+y];return S&&A.push("codicon-modifier-"+S.substring(1)),A}I.asClassNameArray=o;function s(T){return o(T).join(" ")}I.asClassName=s;function a(T){return"."+o(T).join(".")}I.asCSSSelector=a;function u(T){return!!T&&typeof T=="object"&&typeof T.id=="string"&&(typeof T.color>"u"||Yv.isThemeColor(T.color))}I.isThemeIcon=u;let l=new RegExp(`^\\$\\((${I.iconNameExpression}(?:${I.iconModifierExpression})?)\\)$`);function p(T){let b=l.exec(T);if(!b)return;let[,y]=b;return{id:y}}I.fromString=p;function d(T){return{id:T}}I.fromId=d;function f(T,b){let y=T.id,S=y.lastIndexOf("~");return S!==-1&&(y=y.substring(0,S)),b&&(y=`${y}~${b}`),{id:y}}I.modify=f;function h(T){let b=T.id.lastIndexOf("~");if(b!==-1)return T.id.substring(b+1)}I.getModifier=h;function m(T,b){return T.id===b.id&&T.color?.id===b.color?.id}I.isEqual=m;function g(T){return T?.id===Bc.file.id}I.isFile=g;function x(T){return T?.id===Bc.folder.id}I.isFolder=x})(no||={});var Zv=-1;function Vc(){return Zv!==-1?Zv:Date.now()}var qC;(o=>(o.circleSlash={themeIcon:no.fromId("circle-slash"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M8 1a7 7 0 1 1-7 7a7.01 7.01 0 0 1 7-7M2 8c0 1.418.504 2.79 1.423 3.87l8.447-8.447A5.993 5.993 0 0 0 2 8m12 0c0-1.418-.504-2.79-1.423-3.87L4.13 12.577A5.993 5.993 0 0 0 14 8"/></svg>'},o.error={themeIcon:no.fromId("error"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M8.6 1c1.6.1 3.1.9 4.2 2c1.3 1.4 2 3.1 2 5.1c0 1.6-.6 3.1-1.6 4.4c-1 1.2-2.4 2.1-4 2.4s-3.2.1-4.6-.7s-2.5-2-3.1-3.5S.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1m.5 12.9c1.3-.3 2.5-1 3.4-2.1c.8-1.1 1.3-2.4 1.2-3.8c0-1.6-.6-3.2-1.7-4.3c-1-1-2.2-1.6-3.6-1.7c-1.3-.1-2.7.2-3.8 1S2.7 4.9 2.3 6.3c-.4 1.3-.4 2.7.2 4q.9 1.95 2.7 3c1.2.7 2.6.9 3.9.6M7.9 7.5L10.3 5l.7.7l-2.4 2.5l2.4 2.5l-.7.7l-2.4-2.5l-2.4 2.5l-.7-.7l2.4-2.5l-2.4-2.5l.7-.7z" clip-rule="evenodd"/></svg>'},o.skipped={themeIcon:no.fromId("testing-skipped-icon"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M14.25 5.75v-4h-1.5v2.542c-1.145-1.359-2.911-2.209-4.84-2.209c-3.177 0-5.92 2.307-6.16 5.398l-.02.269h1.501l.022-.226c.212-2.195 2.202-3.94 4.656-3.94c1.736 0 3.244.875 4.05 2.166h-2.83v1.5h4.163l.962-.975V5.75zM8 14a2 2 0 1 0 0-4a2 2 0 0 0 0 4" clip-rule="evenodd"/></svg>'},o.lightbulbFull={themeIcon:no.fromId("refactor-preview-view-icon"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M11.67 8.658a3.7 3.7 0 0 0-.781 1.114a3.3 3.3 0 0 0-.268 1.329v1.6a1.3 1.3 0 0 1-.794 1.197a1.3 1.3 0 0 1-.509.102H7.712a1.3 1.3 0 0 1-.922-.379a1.3 1.3 0 0 1-.38-.92v-1.6q0-.718-.274-1.329a3.6 3.6 0 0 0-.776-1.114a4.7 4.7 0 0 1-1.006-1.437A4.2 4.2 0 0 1 4 5.5a4.43 4.43 0 0 1 .616-2.27q.296-.504.705-.914a4.6 4.6 0 0 1 .911-.702q.508-.294 1.084-.454a4.5 4.5 0 0 1 1.2-.16a4.5 4.5 0 0 1 2.276.614a4.5 4.5 0 0 1 1.622 1.616a4.44 4.44 0 0 1 .616 2.27q0 .926-.353 1.721a4.7 4.7 0 0 1-1.006 1.437zM9.623 10.5H7.409v2.201q-.001.12.09.212a.3.3 0 0 0 .213.09h1.606a.3.3 0 0 0 .213-.09a.3.3 0 0 0 .09-.212V10.5z" clip-rule="evenodd"/></svg>'},o.database={themeIcon:no.fromId("database"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M13 3.5C13 2.119 10.761 1 8 1S3 2.119 3 3.5c0 .04.02.077.024.117H3v8.872l.056.357C3.336 14.056 5.429 15 8 15s4.664-.944 4.944-2.154l.056-.357V3.617h-.024c.004-.04.024-.077.024-.117M8 2.032c2.442 0 4 .964 4 1.468s-1.558 1.468-4 1.468S4 4 4 3.5s1.558-1.468 4-1.468m4 10.458l-.03.131C11.855 13.116 10.431 14 8 14s-3.855-.884-3.97-1.379L4 12.49v-7.5A7.4 7.4 0 0 0 8 6a7.4 7.4 0 0 0 4-1.014z"/></svg>'}))(qC||={});Fn();var qc=class{constructor(e,t,r,i,o){this.docId=e;this.languageId=t;this.base=r;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new kn(this.base,this.lastEdits.compose())}};var ex=class n{constructor(e,t,r,i){this.docId=e;this.languageId=r;this._edits=[];this._isUserDocument=!1;this._baseValue=new hr(t),this._currentValue=this._baseValue,this.handleSelection(i)}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,t){if(e.isEmpty())return;this._currentValue=e.applyOnText(this._currentValue);let r=gr.fromStringEdit(e,this._currentValue),i=du.fromTextEdit(r);if(t){this._baseValue=this._currentValue,this._edits=[];return}function o(a){return ro(a.replacements,u=>u.newText.length)}let s=this._edits.at(-1);s&&o(s.edit)<200&&$C(e,s.edit)?(s.edit=s.edit.compose(e),s.textLengthEdit=s.textLengthEdit.compose(i),s.instant=Vc(),s.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:Vc()})}getRecentEdit(e){if(!this._isUserDocument)return;let{editCount:t}=this._applyStaleEdits(e),r=new lu(oe,this._edits.map(i=>i.edit));return{history:new qc(this.docId,this.languageId,this._baseValue,r,this._selection),editCount:t}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e){let t=this._currentValue,r=oe.empty,i=du.empty,o,s=0,a=oe.empty;for(o=this._edits.length-1;o>=0;o--){let u=this._edits[o];if(Vc()-u.instant>600*1e3)break;let l=u.textLengthEdit.compose(i),p=l.getRange();if(j0(p,"we only compose non-empty Edits"),p.endLineNumber-p.startLineNumber>100)break;let d=ro(u.textLengthEdit.edits,b=>b.range.endLineNumber-b.range.startLineNumber+b.newLength.lineCount);if(d>n.MAX_EDITED_LINES_PER_EDIT||ro(u.edit.replacements,b=>b.newText.length)>n.MAX_EDITED_CHARS_PER_EDIT||ro(u.edit.replacements,b=>b.replaceRange.length)>n.MAX_EDITED_CHARS_PER_EDIT)break;if(o===this._edits.length-1)a=u.edit;else{let b=oe.trySwap(u.edit,a);if(b)a=b.e1;else{if(d>=2)break;a=u.edit.compose(a)}}t=u.edit.inverse(t.value).applyOnText(t);let g=u.edit.compose(r),x=kn.toLineEdit(new kn(t,g)),T=new Ts(t,x).removeCommonSuffixPrefixLines().edit.replacements.length;if(T>e)break;s=T,r=g,i=l}for(let u=0;u<=o;u++){let l=this._edits[u];this._baseValue=l.edit.applyOnText(this._baseValue)}return this._edits=this._edits.slice(o+1),{editCount:s}}toString(){return new lu(oe,this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function ro(n,e){let t=0;for(let r of n)t+=e(r);return t}function $C(n,e){let t=e.getNewRanges();return n.replacements.every(r=>WC(r.replaceRange,t))}function WC(n,e){return e.some(t=>n.start===t.endExclusive||n.endExclusive===t.start)}var $c=class{constructor(e,t){this.originalText=e;this._trackedEdit=t;let r=t.removeCommonSuffixPrefix(e);this._updatedTrackedEdit=r.mapData(()=>new Wc(!0))}handleEdits(e){let t=e.mapData(o=>new Wc(!1)),i=this._updatedTrackedEdit.compose(t).decomposeSplit(o=>!o.data.isTrackedEdit).e2;this._updatedTrackedEdit=i}getAcceptedRestrainedCharactersCount(){return ro(this._updatedTrackedEdit.replacements,t=>t.getNewLength())}getOriginalCharacterCount(){return ro(this._trackedEdit.replacements,e=>e.getNewLength())}getDebugState(){return{edits:this._updatedTrackedEdit.replacements.map(e=>({range:e.replaceRange.toString(),newText:e.newText,isTrackedEdit:e.data.isTrackedEdit}))}}},Wc=class{constructor(e){this.isTrackedEdit=e}join(e){if(this.isTrackedEdit===e.isTrackedEdit)return this}};var jc=class{constructor(e,t){this.originalText=e;this._combinedEditsSinceStart=oe.empty;this._text=t.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=t}handleEdits(e){let t=e.apply(this._text),r=this._combinedEditsSinceStart.compose(e);r=r.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=r,this._text=t}computeTrackedEditsSurvivalScore(){let e=0,t=0,r=0,i=0,o=this._originalEdits.getNewRanges(),s=jC(o,this._combinedEditsSinceStart);for(let a=0;a<o.length;a++){let u=this._originalEdits.replacements[a],l=this.originalText.substring(u.replaceRange.start,u.replaceRange.endExclusive),p=u.newText,d=s[a],f=this._text.substring(d.start,d.endExclusive),h=Nm(f,p),m=Nm(p,l),g=Nm(f,l);if(m!==1){let T=1-Math.max(g-m,0)/(1-m);r+=u.replaceRange.length*T,i+=u.replaceRange.length}let x=u.newText.length*h,I=u.newText.length;e+=x,t+=I}return{fourGram:t===0?1:e/t,noRevert:i===0?1:r/i}}};function Nm(n,e){if(n.length<4||e.length<4)return n===e?1:0;let r=new Map;for(let a=0;a<=n.length-4;a++){let u=n.substring(a,a+4),l=r.get(u)||0;r.set(u,l+1)}for(let a=0;a<=e.length-4;a++){let u=e.substring(a,a+4),l=r.get(u)||0;r.set(u,l-1)}let i=n.length-4+1+e.length-4+1,o=0;for(let a of r.values())o+=Math.abs(a);return(i-o)/i}function jC(n,e){n=n.slice();let t=[],r=0;for(let i of e.replacements){for(;;){let s=n[0];if(!s||s.endExclusive>=i.replaceRange.start)break;n.shift(),t.push(s.delta(r))}let o=[];for(;;){let s=n[0];if(!s||!s.intersectsOrTouches(i.replaceRange))break;n.shift(),o.push(s)}for(let s=o.length-1;s>=0;s--){let a=o[s],u=a.intersect(i.replaceRange).length;a=a.deltaEnd(-u+(s===0?i.newText.length:0));let l=a.start-i.replaceRange.start;l>0&&(a=a.delta(-l)),s!==0&&(a=a.delta(i.newText.length)),a=a.delta(-(i.newText.length-i.replaceRange.length)),n.unshift(a)}r+=i.newText.length-i.replaceRange.length}for(;;){let i=n[0];if(!i)break;n.shift(),t.push(i.delta(r))}return t}var _s=class{constructor(e,t,r,i,o,s,a,u,l){this._document=e;this._documentTextBeforeMarkedEdits=t;this._markedEdits=r;this._options=o;this._sendTelemetryEvent=s;this._gitService=u;this._telemetryService=l;this._store=new de;this._editSurvivalTracker=new jc(this._documentTextBeforeMarkedEdits,this._markedEdits);this._arcTracker=this._options.includeArc===!0?new $c(this._documentTextBeforeMarkedEdits,this._markedEdits):void 0;this._store.add(a.onDidChangeTextDocument(p=>{if(p.document!==this._document)return;let d=uu(p.contentChanges);this._editSurvivalTracker.handleEdits(d),this._arcTracker?.handleEdits(d)})),this._editSurvivalTracker.handleEdits(i),this._arcTracker?.handleEdits(i),this._initialBranchName=this._gitService.activeRepository.get()?.headBranchName,this._reportAfter(30*1e3),this._reportAfter(120*1e3),this._reportAfter(300*1e3),this._reportAfter(600*1e3),this._reportAfter(900*1e3,()=>{this._store.dispose()})}_getCurrentBranchName(){return this._gitService.activeRepository.get()?.headBranchName}_reportAfter(e,t){let r=new Tl(()=>{this._report(e),r.dispose(),t&&t()},e);this._store.add(r)}_report(e){let t=this._editSurvivalTracker.computeTrackedEditsSurvivalScore(),i=this._getCurrentBranchName()!==this._initialBranchName;this._sendTelemetryEvent({telemetryService:this._telemetryService,fourGram:t.fourGram,noRevert:t.noRevert,timeDelayMs:e,didBranchChange:i,currentFileContent:this._document.getText(),arc:this._arcTracker?.getAcceptedRestrainedCharactersCount()})}cancel(){this._store.dispose()}};_s=E([v(6,rt),v(7,Qr),v(8,ge)],_s);var tx=_("IEditSurvivalTrackerService");var ks=class{constructor(e,t){this._instantiationService=e;this._logService=t}initialize(e){let t=this._instantiationService.createInstance(xs,e.getText()),r;return{collectAIEdits:i=>{try{t.addEdits(Array.isArray(i)?i:[i])}catch(o){this._logService.error("[EditSurvivalTrackerService] Error while collecting edits",o)}},startReporter:i=>{let o=this._instantiationService.createInstance(ys,t.getText(),e);(async()=>{try{let[s,a]=await Promise.all([t.getEdits(),o.compute()]),u=a.getEditsSinceInitial();r=this._instantiationService.createInstance(_s,e,t.initialText,s,u,{},i)}finally{o.dispose()}})()},cancel:()=>{r?.cancel()}}}};ks=E([v(0,_e),v(1,Z)],ks);var be=class n{constructor(e){this.id=e}static{this.text3small_512=new n("text-embedding-3-small-512")}static{this.metis_1024_I16_Binary=new n("metis-1024-I16-Binary")}static{this.codestralEmbed=new n("mistralai/codestral-embed-2505")}toString(){return this.id}equals(e){return this.id===e.id}};var GC=Object.freeze({[be.text3small_512.id]:{model:"text-embedding-3-small",dimensions:512,quantization:{query:"float32",document:"float32"}},[be.metis_1024_I16_Binary.id]:{model:"metis-I16-Binary",dimensions:1024,quantization:{query:"float16",document:"binary"}},[be.codestralEmbed.id]:{model:"text-embedding-3-small",dimensions:1024,quantization:{query:"float32",document:"float32"}}});function io(n){return GC[n.id]}var xr=_("IEmbeddingsComputer");function zC(n,e){n.length!==e.length&&console.warn("Embeddings do not have same length for computing dot product");let t=0,r=Math.min(n.length,e.length);for(let i=0;i<r;i++)t+=n[i]*e[i];return t}function Fm(n,e){if(!n.type.equals(e.type))throw new Error(`Embeddings must be of the same type to compute similarity. Got: ${n.type.id} and ${e.type.id}`);return{embeddingType:n.type,value:zC(e.value,n.value)}}function Is(n,e,t,r){let i=r?.minDistance??0,o=e.map(([s,a])=>({distance:Fm(a,n),value:s})).filter(s=>s.distance.value>i).sort((s,a)=>a.distance.value-s.distance.value).slice(0,t).map(s=>({distance:s.distance,value:s.value}));if(o.length&&typeof r?.maxSpread=="number"){let s=o.at(0).distance.value*(1-r.maxSpread);return o.filter(u=>u.distance.value>=s)}return o}var oo=class n{static{this.joiner=" <- "}constructor(...e){this.value=e.join(n.joiner)}toString(){return this.value}toAscii(){return this.value.replace(/[\u{0080}-\u{FFFF}]/gu,"")}add(...e){return new n(...e,this.value)}},ri=class n{constructor(e,t){e instanceof oo?this.callTracker=e:this.callTracker=typeof e=="string"?new oo(e):new oo(...e),this.correlationId=t||Xr()}addCaller(...e){return new n(this.callTracker.add(...e),this.correlationId)}};wt();Oi();pe();ka();Je();Ht();var ii=_("ICAPIClientService");we();Mo();async function HC(n,e){let t=new Et;try{let r=await n();return e(t.elapsed(),"success",r),r}catch(r){throw e(t.elapsed(),Ta(r)?"cancelled":"failed",void 0),r}}async function Gc(n,e,t,r){return HC(()=>(n.trace(`${e} started`),t()),(i,o,s)=>{n.trace(`${e} ${o}. Elapsed ${i}`),r?.(i,o,s)})}var Kt=_("IFetcherService");we();var Rh=Te(vu()),QE=Te(pu());var JE=Te(vu());var vy;(r=>(r.CacheControl="cache_control",r.StatefulMarker="stateful_marker",r.ThinkingData="thinking"))(vy||={});var XE=30*1e3;function YE(n,e,t,r,i,o,s,a,u,l,p,d){let f=typeof i=="string"||"type"in i?{modelMaxPromptTokens:0,urlOrRequestMetadata:i,family:"",tokenizer:"o200k_base",acquireTokenizer:()=>{throw new Error("Method not implemented.")},name:"",version:""}:i,h={Authorization:`Bearer ${o}`,"X-Request-Id":a,"X-Interaction-Type":s,"OpenAI-Intent":s,"X-GitHub-Api-Version":"2025-05-01",...l,...f.getExtraHeaders?f.getExtraHeaders():{}};f.interceptBody&&f.interceptBody(u),console.log(`networkRequest: body.tools count after interceptBody: ${u?.tools?.length??0}`);let m=f.getEndpointFetchOptions?.(),g={method:r,headers:h,json:u,timeout:XE,useFetcher:d,suppressIntegrationId:m?.suppressIntegrationId};if(p){let x=n.makeAbortController();p.onCancellationRequested(()=>{e.sendGHTelemetryEvent("networking.cancelRequest",{headerRequestId:a}),x.abort()}),g.signal=x.signal}return typeof f.urlOrRequestMetadata=="string"?n.fetch(f.urlOrRequestMetadata,g).catch(I=>{if(ZE(I))return e.sendGHTelemetryEvent("networking.disconnectAll"),n.disconnectAll().then(()=>n.fetch(f.urlOrRequestMetadata,g));throw n.isAbortError(I)?new Ne:I}):t.makeRequest(g,f.urlOrRequestMetadata)}function ZE(n){return["ECONNRESET","ETIMEDOUT","ERR_NETWORK_CHANGED","ERR_HTTP2_INVALID_SESSION","ERR_HTTP2_STREAM_CANCEL","ERR_HTTP2_GOAWAY_SESSION","ERR_HTTP2_PROTOCOL_ERROR"].includes(n?.code)}function Cu(n,e,t,r,i,o,s,a,u,l,p,d){return YE(n,e,t,"POST",r,i,s,a,u,l,p,d)}var xy=_("headerContributors"),Td=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let t=this.contributors.indexOf(e);t!==-1&&this.contributors.splice(t,1)}contributeHeaders(e){for(let t of this.contributors)t.contributeHeaderValues(e)}size(){return this.contributors.length}};Je();function Dh(n){let e=Gt(n);return e.length>=3&&e[0].startsWith("File: ")&&e[1].startsWith("```")&&e.at(-1)?.startsWith("```")?e.slice(2,-1).join(`
`):n}var mi=class extends K{constructor(t){super();this._maxAttempts=3;this.targetQuota=80;this.requestQueue=new nr;this._numberInFlightRequests=0;this._lastSendTime=Date.now();this._isPumping=!1;this._maxParallelChunksRequests=t.getTreatmentVariable("workspace.embeddingIndex.maxParallelChunksRequests")??8}static{this._abuseLimit=1e3/40}enqueue(t,r){let i=new Bn;return r.onCancellationRequested(()=>i.cancel()),this.requestQueue.push({task:t,attempt:0,deferred:i,token:r}),this.pump(),i.p}async pump(){if(!this._isPumping)try{for(this._isPumping=!0;!this.requestQueue.isEmpty();){this._rateLimitTimeout&&(await this._rateLimitTimeout,this._rateLimitTimeout=void 0);let t=Date.now()-this._lastSendTime;if(t<mi._abuseLimit&&await Bi(mi._abuseLimit-t),this._numberInFlightRequests>=this._maxParallelChunksRequests){await Bi(10);continue}if(this._latestRateLimitHint){let o=Date.now();if(o<this._latestRateLimitHint.resetAt&&this._latestRateLimitHint.remaining-this._numberInFlightRequests<=0){let s=this._latestRateLimitHint.resetAt-o;await Bi(Math.min(s,2e3))}}if(this._latestQuotaUsed&&this._latestQuotaUsed.quota>this.targetQuota){let o=Date.now(),s=this._latestQuotaUsed.quota-this.targetQuota,a=o-this._latestQuotaUsed.timestamp,u=2500,l=1e3,p=s/(100-this.targetQuota);p*=Math.max(1-a/u,0);let d=p*l;d>0&&await Bi(Math.min(d,l))}let r=this.requestQueue.shift();if(r.token.isCancellationRequested){r.deferred.cancel();continue}this._numberInFlightRequests++,this._lastSendTime=Date.now(),r.task(r.attempt).then(o=>{if(this.updateQuotasFromResponse(o),r.token.isCancellationRequested){r.deferred.cancel();return}if(o.ok){r.deferred.complete(o);return}if(r.attempt<this._maxAttempts&&(o.status===429||o.status===403||o.status===408)){let s=this.getRequestRetryDelay(o);s>0&&(this._rateLimitTimeout=Bi(s*1e3)),this.requestQueue.unshift({task:r.task,attempt:r.attempt+1,deferred:r.deferred,token:r.token}),this.pump();return}r.deferred.complete(o)}).catch(o=>{r.deferred.error(o)}).finally(()=>{this._numberInFlightRequests--})}}finally{this._isPumping=!1}}updateQuotasFromResponse(t){let r=Date.now();try{let i=t.headers.get("x-ratelimit-remaining"),o=t.headers.get("x-ratelimit-reset");i&&o&&(this._latestRateLimitHint={timestamp:r,remaining:parseFloat(i),resetAt:parseFloat(o)*1e3});let s=t.headers.get("x-github-total-quota-used");s&&(this._latestQuotaUsed?this._latestQuotaUsed={timestamp:r,quota:parseFloat(s)}:this._latestQuotaUsed={timestamp:r,quota:parseFloat(s)})}catch(i){console.error("Error parsing rate limit headers",i)}}getRequestRetryDelay(t){try{let r=t.headers.get("retry-after");if(r){let i=parseFloat(r);if(!isNaN(i))return i}}catch{}try{let r=t.headers.get("x-ratelimit-reset");if(r){let i=parseFloat(r);if(!isNaN(i)){let o=Math.floor(Date.now()/1e3);return i-o}}}catch{}return t.status===408?.25:2}};mi=E([v(0,gt)],mi);var _d=class extends K{constructor(t,r,i,o,s,a,u){super();this._capiClientService=r;this._envService=i;this._fetcherService=o;this._logService=s;this._telemetryService=a;this._workspaceService=u;this._requestHmac=new At(()=>Za(tn.HMAC_SECRET));this._requestLimiter=this._register(t.createInstance(mi))}computeChunks(t,r,i,o,s,a,u,l){return this.doComputeChunksAndEmbeddings(t,r,i,o,{qos:s,computeEmbeddings:!1},a,u,l)}async computeChunksAndEmbeddings(t,r,i,o,s,a,u,l){return await this.doComputeChunksAndEmbeddings(t,r,i,o,{qos:s,computeEmbeddings:!0},a,u,l)}async doComputeChunksAndEmbeddings(t,r,i,o,s,a,u,l){let p=await Cl(i.getText(),l);if(mf(p))return[];try{let d=await Cl(this._requestHmac.value,l),f=async g=>Gc(this._logService,`ChunksEndpointEmbeddingComputer.fetchChunksRequest(${i.uri}, attempt=${g})`,()=>Cu(this._fetcherService,this._telemetryService,this._capiClientService,{type:"Chunks"},t,d,"copilot-panel","",{embed:s.computeEmbeddings,qos:s.qos,content:p,path:Iv(this._workspaceService,i.uri),local_hashes:a?Array.from(a.keys()):[],language_id:i.githubLanguageId,embedding_model:r.id},Ah(u,this._envService),l));o.recomputedFileCount++,o.sentContentTextLength+=p.length;let h=await Cl(this._requestLimiter.enqueue(f,l),l);if(!h.ok){this._logService.debug(`Error chunking '${i.uri}'. Status: ${h.status}. Status Text: ${h.statusText}.`),this._telemetryService.sendMSFTTelemetryEvent("workspaceChunkEmbeddingsIndex.computeChunksAndEmbeddings.error",{source:u.toString()},{responseStatus:h.status});return}let m=await h.json();return m.chunks.length?Ri(m.chunks.map(g=>{let x=new q(g.line_range.start,0,g.line_range.end,0),I=a?.get(g.hash);if(I)return{chunk:{file:i.uri,text:Dh(I.chunk.text),rawText:void 0,range:x,isFullFile:I.chunk.isFullFile},chunkHash:g.hash,embedding:I.embedding};if(typeof g.text!="string")return;let T;if(g.embedding?.embedding){let b=new be(m.embedding_model);if(!b.equals(r))throw new Error(`Unexpected embedding model. Got: ${b}. Expected: ${r}`);T={type:b,value:g.embedding.embedding}}if(!(s.computeEmbeddings&&!T))return{chunk:{file:i.uri,text:Dh(g.text),rawText:void 0,range:x,isFullFile:!1},chunkHash:g.hash,embedding:T}})):[]}catch(d){this._logService.error(d);return}}};_d=E([v(0,_e),v(1,ii),v(2,Qe),v(3,Kt),v(4,Z),v(5,ge),v(6,rt)],_d);function Ah(n,e){let t=e.getEditorInfo(),r=t.version.match(/^(?<version>.+?)(\-(?<subName>\w+?))?$/);return{"X-Client-Application":r&&r.groups?.subName?`${t.name}-${r.groups.subName}/${r.groups.version}`:t.format(),"X-Client-Source":e.getEditorPluginInfo().format(),"X-Client-Feature":n.toAscii().slice(0,1e3)}}var Ds=_("IEndpointProvider");var As=class{constructor(e,t,r,i,o,s,a){this._authService=e;this._capiClientService=t;this._envService=r;this._fetcherService=i;this._logService=o;this._telemetryService=s;this._endpointProvider=a;this.batchSize=100}async computeEmbeddings(e,t,r,i,o){return Gc(this._logService,"RemoteEmbeddingsComputer::computeEmbeddings",async()=>{if((await this._authService.getCopilotToken()).isNoAuthUser)return await this.computeCAPIEmbeddings(t,r,o)??{type:e,values:[]};let a=(await this._authService.getAnyGitHubSession({silent:!0}))?.accessToken;if(!a)throw new Error("No authentication token available");let u=[];for(let l=0;l<t.length;l+=this.batchSize){let p=t.slice(l,l+this.batchSize);if(!p.length)break;let d={inputs:p,input_type:r?.inputType??"document",embedding_model:e.id},f=await Cu(this._fetcherService,this._telemetryService,this._capiClientService,{type:"DotcomEmbeddings"},a,await Za(tn.HMAC_SECRET),"copilot-panel",Xr(),d,Ah(i?.callTracker??new oo,this._envService),o);if(!f.ok)throw this._telemetryService.sendMSFTTelemetryEvent("remoteEmbeddingsComputer.computeEmbeddings.error",{source:i?.callTracker.toString(),correlationId:i?.correlationId,embeddingType:e.id},{totalInputLength:t.length,batchInputLength:p.length,statusCode:f.status}),new Error(`Error fetching embeddings: ${f.status}`);let h=await f.json(),m=new be(h.embedding_model);if(!m.equals(e))throw new Error(`Unexpected embedding model. Got: ${m}. Expected: ${e}`);if(p.length!==h.embeddings.length)throw new Error(`Mismatched embedding result count. Expected: ${p.length}. Got: ${h.embeddings.length}`);u.push(...h.embeddings.map(g=>({type:m,value:g.embedding})))}return{type:e,values:u}})}async computeCAPIEmbeddings(e,t,r){let i=io(be.text3small_512);if(!i)throw new Error(`Embeddings type info not found: ${be.text3small_512}`);let o=await this._endpointProvider.getEmbeddingsEndpoint("text3small"),s=o.maxBatchSize,a=o.modelMaxPromptTokens-1;return this.fetchResponseWithBatches(i,o,e,r,a,s)}async fetchResponseWithBatches(e,t,r,i,o,s,a=1){for(let d of r)if(await t.acquireTokenizer().tokenLength(d)>o)return;let u=[],l=[],p=new yl(a);try{for(let d=0;d<r.length;d+=s){let f=r.slice(d,d+s);l.push(p.queue(async()=>{if(i?.isCancellationRequested)return;let h=await this.rawEmbeddingsFetchWithTelemetry(e,t,Xr(),f,i);if(h.type==="failed")throw new Error("Embeddings request failed "+h.reason);return h}))}u=(await Promise.all(l)).flatMap(d=>d?.embeddings??[])}catch{return}finally{p.dispose()}if(!i?.isCancellationRequested&&u.length!==0)return{type:be.text3small_512,values:u.map(d=>({type:be.text3small_512,value:d}))}}async rawEmbeddingsFetchWithTelemetry(e,t,r,i,o){let s=Date.now(),a=await this.rawEmbeddingsFetch(e,t,r,i,o);if(a.type==="failed")return this._telemetryService.sendMSFTTelemetryErrorEvent("embedding.error",{type:a.type,reason:a.reason}),a;let u=t.acquireTokenizer(),p=(await Promise.all(i.map(d=>u.tokenLength(d)))).reduce((d,f)=>d+f,0);return this._telemetryService.sendMSFTTelemetryEvent("embedding.success",{},{batchSize:i.length,inputTokenCount:p,timeToComplete:Date.now()-s}),a}async rawEmbeddingsFetch(e,t,r,i,o){try{let s=await this._authService.getCopilotToken(),a={input:i,model:e.model,dimensions:e.dimensions};t.interceptBody?.(a);let u=await Cu(this._fetcherService,this._telemetryService,this._capiClientService,t,s.token,await Za(tn.HMAC_SECRET),"copilot-panel",r,a,void 0,o),l=u.status===200?await u.json():await u.text();return u.status===200&&l.data?{type:"success",embeddings:l.data.map(p=>p.embedding)}:{type:"failed",reason:l.error}}catch(s){let a=s?.message??"Unknown error";return a.match(/Unexpected.*JSON/i)&&(a="timeout"),{type:"failed",reason:a}}}};As=E([v(0,ln),v(1,ii),v(2,Qe),v(3,Kt),v(4,Z),v(5,ge),v(6,Ds)],As);function wr(n){let e=n.split(".");return`${e[0]}.${e[1]}`}var go=_("IWorkbenchService");var Ge=_("IVSCodeExtensionContext");function eS(n){switch(io(n)?.model){case"metis-I16-Binary":return"metis-1024-I16-Binary";case"text-embedding-3-small":default:return"text-3-small"}}var Ps=class{constructor(e,t,r,i,o){this.cacheType=e;this.cacheKey=t;this.cacheVersion=r;this.fileSystemService=i;this.extensionContext=o;this.cacheVersionKey=`${t}-version`}get cacheStorageUri(){return this.cacheType===2?this.extensionContext.storageUri:this.extensionContext.globalStorageUri}get cacheVersionMementoStorage(){return this.cacheType===2?this.extensionContext.workspaceState:this.extensionContext.globalState}async updateCache(e){if(!this.cacheStorageUri||e===void 0||!this.fileSystemService.isWritableFileSystem(this.cacheStorageUri.scheme))return;try{await this.fileSystemService.stat(this.cacheStorageUri)}catch(r){r.code==="ENOENT"&&await this.fileSystemService.createDirectory(this.cacheStorageUri)}await this.cacheVersionMementoStorage.update(this.cacheVersionKey,this.cacheVersion);let t=W.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await this.fileSystemService.writeFile(t,Xe.fromString(JSON.stringify(e)).buffer)}catch{e!==void 0&&console.error(`Failed to write embeddings cache to ${t}`)}}async getCache(){if(!(!this.cacheStorageUri||this.cacheVersionMementoStorage.get(this.cacheVersionKey)!==this.cacheVersion))try{let t=await ev.readJSON(this.fileSystemService,W.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`));return this.isEmbeddingCacheEntriesType(t)?this.constructExposedCache(t):t}catch{return}}async clearCache(){if(!this.cacheStorageUri)return;this.cacheVersionMementoStorage.get(this.cacheKey)&&await this.cacheVersionMementoStorage.update(this.cacheKey,void 0);let t=W.joinPath(this.cacheStorageUri,`${this.cacheKey}.json`);try{await this.fileSystemService.stat(this.cacheStorageUri),await this.fileSystemService.delete(t,{useTrash:!1})}catch(r){if(r.code==="ENOENT")throw new Error(`Cache file ${t} does not exist`)}}isEmbeddingCacheEntriesType(e){return e.core!==void 0&&e.extensions!==void 0}constructExposedCache(e){let t={...e.core};for(let r in e.extensions){let i=e.extensions[r];for(let o in i)t[o]=i[o]}return t}};Ps=E([v(3,Nt),v(4,Ge)],Ps);var Cr=class{constructor(e,t,r,i,o){this.cacheKey=t;this.cacheVersion=r;this.embeddingType=i;this._embeddingsCache=o.createInstance(Ps,e,t,r)}async getCache(){let e=await this._embeddingsCache.getCache();if(e===void 0)throw new Error(`Failed to get cache for ${this.cacheKey}, version ${this.cacheVersion}`);return e}clearCache(){return this._embeddingsCache.clearCache()}};Cr=E([v(4,_e)],Cr);var dn=class{constructor(e,t,r,i,o,s,a){this.cacheVersion=r;this.embeddingType=i;this.remoteCacheType=o;this.fetcherService=s;this.embeddingsCache=a.createInstance(Ps,e,t,r),this.remoteCacheVersionKey=`${t}-version-remote`}async clearCache(){await this.embeddingsCache.clearCache()}async getRemoteContainer(){return eS(this.embeddingType)}async getRemoteCacheURL(){if(!this._remoteCacheURL){let e=await this.getRemoteContainer();this._remoteCacheURL=dn.calculateRemoteCDNURL(e,this.remoteCacheType,this.cacheVersion)}return this._remoteCacheURL}async getRemoteCacheLatestUpdateURL(){if(!this._remoteCacheLatestUpdateURL){let e=await this.getRemoteContainer();this._remoteCacheLatestUpdateURL=dn.calculateRemoteCDNLatestURL(e,this.remoteCacheType,this.cacheVersion)}return this._remoteCacheLatestUpdateURL}async fetchRemoteCache(){if(this._remoteCacheEntries)return this._remoteCacheEntries;let e=await this.getRemoteCacheURL();try{let t=await this.getRemoteCacheURL(),r=await this.fetcherService.fetch(t,{method:"GET"});if(r.ok)return this._remoteCacheEntries=await r.json(),this._remoteCacheEntries;console.error(`Failed to fetch remote embeddings cache from ${t}`),console.error(`Response status: ${r.status}, status text: ${r.statusText}`);return}catch(t){console.error(`Failed to fetch remote embeddings cache from ${e}`),console.error(t);return}}async fetchRemoteCacheLatest(){let e=await this.getRemoteCacheLatestUpdateURL();try{let t=await this.fetcherService.fetch(e,{method:"GET"});if(t.ok)return t.text();console.error(`Failed to fetch remote embeddings cache from ${e}`),console.error(`Response status: ${t.status}, status text: ${t.statusText}`);return}catch(t){console.error(`Failed to fetch remote embeddings cache from ${e}`),console.error(t);return}}async getCache(){let e=await this.fetchRemoteCacheLatest(),t=await this.embeddingsCache.getCache();if(t&&e===this.embeddingsCache.cacheVersionMementoStorage.get(this.remoteCacheVersionKey))return t;let r=await this.fetchRemoteCache();return r===void 0?t:(await this.embeddingsCache.clearCache(),await this.embeddingsCache.cacheVersionMementoStorage.update(this.remoteCacheVersionKey,e),await this.embeddingsCache.updateCache(r),r)}static calculateRemoteCDNURL(e,t,r){return`https://embeddings.vscode-cdn.net/${e}/v${r}/${t}/core.json`}static calculateRemoteCDNLatestURL(e,t,r){return`https://embeddings.vscode-cdn.net/${e}/v${r}/${t}/latest.txt`}};dn=E([v(5,Kt),v(6,_e)],dn);var Rn=class extends dn{constructor(t,r,i,o,s,a,u,l){super(t,r,i,o,s,a,l);this.workbenchService=u}async getBaseExtensionCDNURL(){if(!this._baseExtensionCDNURL){let t=await this.getRemoteContainer();this._baseExtensionCDNURL=Rn.calculateBaseRemoteExtensionCDNURL(t,this.remoteCacheType,this.cacheVersion)}return this._baseExtensionCDNURL}constructExposedCache(){if(!this._remoteExtensionCache)return;let t={...this._remoteExtensionCache.core};for(let r in this._remoteExtensionCache.extensions){let i=this._remoteExtensionCache.extensions[r];for(let o in i)t[o]=i[o]}return t}async fetchRemoteExtensionCache(t){let i=`${await this.getBaseExtensionCDNURL()}/${t}.json`;try{let o=await this.fetcherService.fetch(i,{method:"GET"});if(o.ok)return await o.json();if(o.status===404)return{};console.error(`Failed to fetch remote embeddings cache from ${i}`),console.error(`Response status: ${o.status}, status text: ${o.statusText}`);return}catch(o){console.error(`Failed to fetch remote embeddings cache from ${i}`),console.error(o);return}}async getCache(){let t=await super.getCache();if(t===void 0)return;let r={core:{},extensions:{}};t&&Rn.isEmbeddingsCacheEntriesWithExtensions(t)?r=t:r={core:t,extensions:{}};let i=Rn.getInstalledExtensionIds(this.workbenchService),o=!1;for(let a in r.extensions)i.includes(a)||(delete r.extensions[a],o=!0);let s=i.filter(a=>!(a in r.extensions)||r.extensions[a]===void 0);for(let a of s){let u=await this.fetchRemoteExtensionCache(a);u&&(r.extensions[a]=u)}return this._remoteExtensionCache=r,(s.length>0||o)&&(await this.embeddingsCache.clearCache(),await this.embeddingsCache.updateCache(r)),this.constructExposedCache()}static isEmbeddingsCacheEntriesWithExtensions(t){return"core"in t&&"extensions"in t}static getInstalledExtensionIds(t){return t.getAllExtensions().filter(r=>!r.id.startsWith("vscode")).map(r=>r.id)}static calculateBaseRemoteExtensionCDNURL(t,r,i){return`https://embeddings.vscode-cdn.net/${t}/v${i}/${r}`}};Rn=E([v(5,Kt),v(6,go),v(7,_e)],Rn);var kd=class{constructor(e,t,r,i,o,s){this.embeddingType=t;this.cacheKey=r;this._embeddingsCache=i;this.embeddingsComputer=o;this.logService=s;this._isIndexLoaded=!1;this._items=new Map}get isIndexLoaded(){return this._isIndexLoaded}set isIndexLoaded(e){this._isIndexLoaded=e}async rebuildCache(){return await this._embeddingsCache.clearCache(),this._items.clear(),this.calculateEmbeddings()}nClosestValues(e,t){return Is(e,Array.from(this._items.values()).filter(r=>r.embedding).map(r=>[r,{value:r.embedding,type:this.embeddingType}]),t).map(r=>r.value)}hasItem(e){return this._items.has(e)}getItem(e){return this._items.get(e)}async calculateEmbeddings(){return this._calculationPromise?this._calculationPromise:(this._calculationPromise=this._calculateEmbeddings(),this._calculationPromise.then(()=>this._calculationPromise=void 0))}async _calculateEmbeddings(){let e=Date.now(),t=await this.getLatestItems(),r=await this._embeddingsCache.getCache(),i=new Map;for(let o of t){let s=o,a=this._items.get(o.key),u=o.key;a?.embedding?s=a:r&&r[u]&&(s={...o,...r[u]}),i.set(u,s)}this._items=i,this.logService.debug(`Embeddings for ${this.cacheKey} calculated in ${Date.now()-e}ms`),this.isIndexLoaded=!0}};function tS(n){let e=`Setting Id: ${n.key}
`;if(e+=`Type: ${n.type}
`,e+=`Description: ${n.description??n.markdownDescription??""}
`,n.enum){e+=`Possible values:
`;for(let t=0;t<n.enum.length;t++)e+=` - ${n.enum[t]} - ${n.enumDescriptions?.[t]??""}
`}return e+=`
`,e}var Id=class extends kd{constructor(t,r,i,o,s,a,u,l){super(t,r,i,s,o,u);this.relatedInformationConfig=a;this._logService=u;this.telemetryService=l;this.isIndexLoaded=!1}async provideRelatedInformation(t,r){let i=Date.now();if(!this.isIndexLoaded)return this.calculateEmbeddings(),this._logService.debug(`Related Information: Index not loaded yet triggering background calculation, returning ${Date.now()-i}ms`),[];if(r.isCancellationRequested)return this._logService.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`),[];let o=Date.now(),s=await this.embeddingsComputer.computeEmbeddings(be.text3small_512,[t],{},new ri("RelatedInformationProviderEmbeddingsIndex::provideRelatedInformation"),r);if(this._logService.debug(`Related Information: Remote similarly request took ${Date.now()-o}ms`),r.isCancellationRequested)return this._logService.debug(`Related Information: Request cancelled or no embeddings computed, returning ${Date.now()-i}ms`),[];let a=[];for(let l of this._items.values()){if(r.isCancellationRequested){this._logService.debug(`Related Information: Request cancelled, returning ${Date.now()-i}ms`);break}if(l.embedding){let p=Fm(s.values[0],{value:l.embedding,type:be.text3small_512}).value;p>this.relatedInformationConfig.threshold&&a.push(this.toRelatedInformation(l,p))}}return this.logService.debug(`Related Information: Successfully Calculated, returning ${Date.now()-i}ms`),this.relatedInformationConfig.type===4&&this.telemetryService.sendInternalMSFTTelemetryEvent("relatedInformationSettings",{query:t}),a.sort((l,p)=>p.weight-l.weight).slice(0,this.relatedInformationConfig.maxResults)}},Eu=class extends Id{constructor(t,r,i,o,s){super("CommandIdIndex",be.text3small_512,"commandEmbeddings",r,t,{type:2,threshold:0,maxResults:100},i,o);this.workbenchService=s}async getLatestItems(){let t=await this.workbenchService.getAllCommands();return t.push({label:"Extensions: Search the marketplace for extensions",command:"workbench.extensions.search",keybinding:"Not set"}),t.push({label:"Extensions: Install extension from marketplace",command:"workbench.extensions.installExtension",keybinding:"Not set"}),t.map(r=>({key:r.command,label:r.label.replace("View: Toggle","View: Toggle or Show or Hide"),originalLabel:r.label,keybinding:r.keybinding??"Not set"}))}getEmbeddingQueryString(t){return`${t.label} - ${t.key}`}toRelatedInformation(t,r){return{type:2,weight:r,command:t.key}}};Eu=E([v(1,xr),v(2,Z),v(3,ge),v(4,go)],Eu);var Su=class extends Id{constructor(t,r,i,o,s){super("SettingsIndex",be.text3small_512,"settingEmbeddings",r,t,{type:4,threshold:0,maxResults:100},i,o);this.workbenchService=s}async getLatestItems(){let t=await this.workbenchService.getAllSettings(),r=[];for(let i of Object.keys(t)){let o=t[i];o.deprecationMessage||o.markdownDeprecationMessage||r.push({...o,key:i})}return r}getEmbeddingQueryString(t){return tS(t)}toRelatedInformation(t,r){return{type:4,weight:r,setting:t.key}}};Su=E([v(1,xr),v(2,Z),v(3,ge),v(4,go)],Su);var _y=_("ICombinedEmbeddingIndex"),Ls=class{constructor(e=!0,t,r){let i=e?t.createInstance(Rn,1,"settingEmbeddings",wr(r.getEditorInfo().version),be.text3small_512,"settings"):t.createInstance(Cr,1,"settingEmbeddings","1.98",be.text3small_512),o=e?t.createInstance(Rn,1,"commandEmbeddings",wr(r.getEditorInfo().version),be.text3small_512,"commands"):t.createInstance(Cr,1,"commandEmbeddings","1.98",be.text3small_512);this.settingsIndex=t.createInstance(Su,i),this.commandIdIndex=t.createInstance(Eu,o)}async loadIndexes(){await Promise.all([this.commandIdIndex.isIndexLoaded?Promise.resolve():this.commandIdIndex.calculateEmbeddings(),this.settingsIndex.isIndexLoaded?Promise.resolve():this.settingsIndex.calculateEmbeddings()])}async nClosestValues(e,t){return await this.loadIndexes(),{commands:this.commandIdIndex.nClosestValues(e,t),settings:this.settingsIndex.nClosestValues(e,t)}}hasSetting(e){return this.settingsIndex.hasItem(e)}hasCommand(e){return this.commandIdIndex.hasItem(e)}getSetting(e){return this.settingsIndex.getItem(e)}getCommand(e){return this.commandIdIndex.getItem(e)}};Ls=E([v(1,_e),v(2,Qe)],Ls);var it=Te(require("vscode"));var wd=class{get extensionId(){return`${ht.publisher}.${ht.name}`.toLowerCase()}get sessionId(){return it.env.sessionId}get machineId(){return it.env.machineId}get devDeviceId(){return it.env.devDeviceId}get vscodeVersion(){return it.version}get remoteName(){return it.env.remoteName}get uiKind(){switch(it.env.uiKind){case it.UIKind.Desktop:return"desktop";case it.UIKind.Web:return"web"}}get isActive(){return it.window.state.active}get OS(){switch(r1){case 3:return"Windows";case 1:return"Mac";case 2:return"Linux";default:return"Linux"}}get language(){return it.env.language}get uriScheme(){return it.env.uriScheme}get appRoot(){return it.env.appRoot}get shell(){return it.env.shell}isProduction(){return Ho}isPreRelease(){return qa}isSimulation(){return!1}getBuildType(){return ht.buildType}getVersion(){return ht.version}getBuild(){return ht.build}getName(){return ht.name}getEditorInfo(){return new $a("vscode",it.version)}getEditorPluginInfo(){return new $a("copilot-chat",ht.version)}openExternal(e){return new Promise((t,r)=>it.env.openExternal(e).then(t,r))}};var Ru=Te(require("vscode")),Cd=class{get all(){return Ru.extensions.all}get allAcrossExtensionHosts(){return Ru.extensions.allAcrossExtensionHosts}get onDidChange(){return Ru.extensions.onDidChange}get getExtension(){return Ru.extensions.getExtension}};var Dn=Te(require("vscode"));var Ed=class{async stat(e){return Dn.workspace.fs.stat(e)}async readDirectory(e){return Dn.workspace.fs.readDirectory(e)}async createDirectory(e){return Dn.workspace.fs.createDirectory(e)}async readFile(e,t){return await tv(this,e,t),Dn.workspace.fs.readFile(e)}async writeFile(e,t){return Dn.workspace.fs.writeFile(e,t)}async delete(e,t){return Dn.workspace.fs.delete(e,t)}async rename(e,t,r){return Dn.workspace.fs.rename(e,t,r)}async copy(e,t,r){return Dn.workspace.fs.copy(e,t,r)}isWritableFileSystem(e){return!!Dn.workspace.fs.isWritableFileSystem(e)}createFileSystemWatcher(e){return Dn.workspace.createFileSystemWatcher(e)}};var Os=_("IGitExtensionService");var hi=Te(require("vscode"));var Ns=class{constructor(e){this._logService=e;this._onDidChange=new hi.EventEmitter;this.onDidChange=this._onDidChange.event;this._extensionEnablement=void 0;this._disposables=[];this._logService.info("[GitExtensionServiceImpl] Initializing Git extension service."),this._disposables.push(...this._initializeExtensionApi())}getExtensionApi(){return this._api}get extensionAvailable(){return this._extensionEnablement===void 0?!!hi.extensions.getExtension("vscode.git"):this._extensionEnablement}_initializeExtensionApi(){let e=[],t=hi.extensions.getExtension("vscode.git"),r=async()=>{let i;try{i=await t.activate(),this._logService.info("[GitExtensionServiceImpl] Successfully activated the vscode.git extension.")}catch(s){this._logService.error(s,"[GitExtensionServiceImpl] Failed to activate the vscode.git extension.");return}let o=s=>{this._logService.info(`[GitExtensionServiceImpl] Enablement state of the vscode.git extension: ${s}.`),this._extensionEnablement=s,s?(this._api=i.getAPI(1),this._onDidChange.fire({enabled:!0}),this._logService.info("[GitExtensionServiceImpl] Successfully registered Git commit message provider.")):(this._api=void 0,this._onDidChange.fire({enabled:!1}))};e.push(i.onDidChangeEnablement(o)),o(i.enabled)};if(t)r();else{this._logService.info("[GitExtensionServiceImpl] vscode.git extension is not yet activated.");let i=hi.extensions.onDidChange(()=>{!t&&hi.extensions.getExtension("vscode.git")&&(t=hi.extensions.getExtension("vscode.git"),r(),i.dispose())})}return e}};Ns=E([v(0,Z)],Ns);var gi=Te(require("vscode")),Iy=require("vscode");we();var Sd=class{constructor(e,t){this._fn=e;this._waitingTimeMs=t;this._queue=[];this._timeout=null}request(e){this._timeout===null&&(this._timeout=setTimeout(()=>this._flush(),this._waitingTimeMs));let t=new Bn;return this._queue.push({arg:e,promise:t}),t.p}async _flush(){let e=this._queue;this._queue=[],this._timeout=null;let t=e.map(i=>i.arg),r;try{r=await this._fn(t)}catch(i){for(let o of e)o.promise.error(i);return}for(let[i,o]of r.entries())e[i].promise.complete(o)}};wt();lf();Ai();Wt();pe();var Ph=class n{static{this._lineSeparator=/\r?\n/}static{this._propertyRegex=/^\s*(\w+)\s*=\s*"?([^"]+)"?$/}static{this._sectionRegex=/^\s*\[\s*([^\]]+?)\s*(\"[^"]+\")*\]\s*$/}static parse(e){let t={sections:[]},r={name:"DEFAULT",properties:{}},i=o=>{o&&t.sections.push(o)};for(let o of e.split(n._lineSeparator)){let s=o.match(n._sectionRegex);if(s?.length===3){i(r),r={name:s[1],subSectionName:s[2]?.replaceAll('"',""),properties:{}};continue}let a=o.match(n._propertyRegex);a?.length===3&&!Object.keys(r.properties).includes(a[1])&&(r.properties[a[1]]=a[2])}return i(r),t.sections}};function ky(n){let e=[];for(let t of Ph.parse(n).filter(r=>r.name==="remote"))t.subSectionName&&e.push({name:t.subSectionName,fetchUrl:t.properties.url,pushUrl:t.properties.pushurl??t.properties.url,isReadOnly:!1});return e}function Fs(n,e,t={}){let r={path:n.fsPath,ref:e};t.submoduleOf&&(r.submoduleOf=t.submoduleOf);let i=n.path;return t.replaceFileExtension?i=`${i}.git`:t.submoduleOf&&(i=`${i}.diff`),n.with({scheme:t.scheme??"git",path:i,query:JSON.stringify(r)})}var Qt=class extends K{constructor(t,r){super();this.gitExtensionService=t;this.logService=r;this.activeRepository=Qo(this,void 0);this._onDidOpenRepository=new se;this.onDidOpenRepository=this._onDidOpenRepository.event;this._onDidCloseRepository=new se;this.onDidCloseRepository=this._onDidCloseRepository.event;this._onDidFinishInitialRepositoryDiscovery=new se;this.onDidFinishInitialization=this._onDidFinishInitialRepositoryDiscovery.event;this._isInitialized=Qo(this,!1);this._register(this._onDidOpenRepository),this._register(this._onDidCloseRepository),this._register(this._onDidFinishInitialRepositoryDiscovery);let i=this.gitExtensionService.getExtensionApi();i?this.registerGitAPIListeners(i):this._register(this.gitExtensionService.onDidChange(o=>{if(o.enabled){let s=this.gitExtensionService.getExtensionApi();if(s){this.registerGitAPIListeners(s);return}}this._onDidFinishInitialRepositoryDiscovery.fire()}))}registerGitAPIListeners(t){this._register(t.onDidOpenRepository(i=>this.doOpenRepository(i))),this._register(t.onDidCloseRepository(i=>this.doCloseRepository(i)));for(let i of t.repositories)this.doOpenRepository(i);let r=on(this,t.onDidChangeState,()=>t.state);this._register(zr(async i=>{r.read(i)==="initialized"&&(await Promise.all(t.repositories.map(s=>{let a=on(this,s.state.onDidChange,()=>s.state.HEAD);return Xo(a,u=>u!==void 0,void 0,Di(this._store))})),this._isInitialized.set(!0,void 0),this._onDidFinishInitialRepositoryDiscovery.fire(),this.logService.trace(`[GitServiceImpl] Initial repository discovery finished: ${this.repositories.length} repositories found.`))}))}get isInitialized(){return this._isInitialized.get()}async getRepository(t){let r=this.gitExtensionService.getExtensionApi();if(!r)return;t instanceof gi.Uri||(t=gi.Uri.parse(t.toString()));let i=r.getRepository(t);if(i)return await this.waitForRepositoryState(i),Qt.repoToRepoContext(i);if(i=await r.openRepository(t),!!i)return await this.waitForRepositoryState(i),Qt.repoToRepoContext(i)}async getRepositoryFetchUrls(t){this.logService.trace(`[GitServiceImpl][getRepositoryFetchUrls] URI: ${t.toString()}`);let r=this.gitExtensionService.getExtensionApi();if(!r)return;let i=r.getRepository(t);if(i){await this.waitForRepositoryState(i);let o={rootUri:i.rootUri,remoteFetchUrls:i.state.remotes.map(s=>s.fetchUrl)};return this.logService.trace(`[GitServiceImpl][getRepositoryFetchUrls] Remotes (open repository): ${JSON.stringify(o)}`),o}try{(await gi.workspace.fs.stat(t)).type!==gi.FileType.Directory&&(t=W.file(qo(t.fsPath)));let s=await r.getRepositoryRoot(t);if(!s){this.logService.trace("[GitServiceImpl][getRepositoryFetchUrls] No repository root found");return}this.logService.trace(`[GitServiceImpl][getRepositoryFetchUrls] Repository root: ${s.toString()}`);let a=await gi.workspace.fs.readFile(W.file(Sa(s.fsPath,".git","config"))),u={rootUri:s,remoteFetchUrls:ky(a.toString()).map(l=>l.fetchUrl)};return this.logService.trace(`[GitServiceImpl][getRepositoryFetchUrls] Remotes (.git/config): ${JSON.stringify(u)}`),u}catch(o){this.logService.error(`[GitServiceImpl][getRepositoryFetchUrls] Failed to read remotes from .git/config: ${o.message}`);return}}async add(t,r){await this.gitExtensionService.getExtensionApi()?.getRepository(t)?.add(r)}async log(t,r){let i=this.gitExtensionService.getExtensionApi();if(!i)return;let o=i.getRepository(t);if(o)return o.log(r)}async diffBetween(t,r,i){return this.gitExtensionService.getExtensionApi()?.getRepository(t)?.diffBetween(r,i)}async diffWith(t,r){return this.gitExtensionService.getExtensionApi()?.getRepository(t)?.diffWith(r)}async diffIndexWithHEADShortStats(t){let i=this.gitExtensionService.getExtensionApi()?.getRepository(t);if(i?.diffIndexWithHEADShortStats)return await i?.diffIndexWithHEADShortStats()}async fetch(t,r,i,o){return this.gitExtensionService.getExtensionApi()?.getRepository(t)?.fetch(r,i,o)}async getMergeBase(t,r,i){return this.gitExtensionService.getExtensionApi()?.getRepository(t)?.getMergeBase(r,i)}async initialize(){this._isInitialized.get()||await Xo(this._isInitialized,t=>t,void 0,Di(this._store))}async doOpenRepository(t){this.logService.trace(`[GitServiceImpl][doOpenRepository] Repository: ${t.rootUri.toString()}`);let r=on(this,t.state.onDidChange,()=>t.state.HEAD);await Xo(r,a=>a!==void 0,void 0,Di(this._store)),this.logService.trace(`[GitServiceImpl][doOpenRepository] Repository initialized: ${JSON.stringify(r.get())}`);let i=on(this,t.ui.onDidChange,()=>t.ui.selected),o=Ul(this,t.state.onDidChange);this._register(zr(a=>{o.read(a);let u=i.read(a);if(this.activeRepository.get()&&!u)return;let p=Qt.repoToRepoContext(t);this.logService.trace(`[GitServiceImpl][doOpenRepository] Active repository: ${JSON.stringify(p)}`),this.activeRepository.set(p,void 0)}));let s=Qt.repoToRepoContext(t);s&&this._onDidOpenRepository.fire(s)}doCloseRepository(t){this.logService.trace(`[GitServiceImpl][doCloseRepository] Repository: ${t.rootUri.toString()}`);let r=Qt.repoToRepoContext(t);r&&this._onDidCloseRepository.fire(r)}async waitForRepositoryState(t){if(t.state.HEAD)return;let r=on(this,t.state.onDidChange,()=>t.state.HEAD);await Xo(r,i=>i!==void 0,void 0,Di(this._store))}static repoToRepoContext(t){if(t)return new Lh(t)}get repositories(){let t=this.gitExtensionService.getExtensionApi();return t?Ri(t.repositories.filter(r=>r.state.HEAD!==void 0).map(r=>Qt.repoToRepoContext(r))):[]}};Qt=E([v(0,Os),v(1,Z)],Qt);var Lh=class{constructor(e){this._repo=e;this.rootUri=this._repo.rootUri;this.headBranchName=this._repo.state.HEAD?.name;this.headCommitHash=this._repo.state.HEAD?.commit;this.upstreamBranchName=this._repo.state.HEAD?.upstream?.name;this.upstreamRemote=this._repo.state.HEAD?.upstream?.remote;this.isRebasing=this._repo.state.rebaseCommit!==null;this.remotes=this._repo.state.remotes.map(e=>e.name);this.remoteFetchUrls=this._repo.state.remotes.map(e=>e.fetchUrl);this.changes={mergeChanges:this._repo.state.mergeChanges,indexChanges:this._repo.state.indexChanges,workingTree:this._repo.state.workingTreeChanges,untrackedChanges:this._repo.state.untrackedChanges};this._onDidChangeSignal=Ul(this,this._repo.state.onDidChange);this.headBranchNameObs=this._onDidChangeSignal.map(()=>this._repo.state.HEAD?.name);this.headCommitHashObs=this._onDidChangeSignal.map(()=>this._repo.state.HEAD?.commit);this.upstreamBranchNameObs=this._onDidChangeSignal.map(()=>this._repo.state.HEAD?.upstream?.name);this.upstreamRemoteObs=this._onDidChangeSignal.map(()=>this._repo.state.HEAD?.upstream?.remote);this.isRebasingObs=this._onDidChangeSignal.map(()=>this._repo.state.rebaseCommit!==null);this._checkIsIgnored=new Sd(async e=>{let t=await this._repo.checkIgnore(e);return e.map(r=>t.has(r))},1e3);this._isIgnored=new fl(async e=>{let t=Iy.Uri.parse(e).fsPath;return await this._checkIsIgnored.request(t)})}isIgnored(e){return this._isIgnored.get(e.toString())}};async function Xt(n,e,t,r,i,o,s,a,u,l="json",p,d=!1){let f={Accept:"application/vnd.github+json"};s&&(f.Authorization=`Bearer ${s}`),u&&(f["X-GitHub-Api-Version"]=u),p&&(f["User-Agent"]=p);let h=await n.fetch(`${r}/${i}`,{method:o,headers:f,body:a?JSON.stringify(a):void 0});if(!h.ok)return e.error(`[GitHubAPI] ${o} ${r}/${i} - Status: ${h?.status}`),d?{status:h.status}:void 0;try{let m=l==="json"?await h.json():await h.text(),g=Number(h.headers.get("x-ratelimit-remaining")),x=`[RateLimit] REST rate limit remaining: ${g}, ${i}`;return g<1e3?(e.warn(x),t.sendMSFTTelemetryEvent("githubAPI.approachingRateLimit",{rateLimit:g.toString()})):e.debug(x),m}catch{return}}async function Oh(n,e,t,r,i,o,s){let a={Accept:"application/vnd.github+json","Content-Type":"application/json"};o&&(a.Authorization=`Bearer ${o}`);let u=JSON.stringify({query:i,variables:s}),l=await n.fetch(`${r}/graphql`,{method:"POST",headers:a,body:u});if(l.ok)try{let p=await l.json(),d=Number(l.headers.get("x-ratelimit-remaining")),f=`[RateLimit] GraphQL rate limit remaining: ${d}, query: ${i}`;return d<1e3?(e.warn(f),t.sendMSFTTelemetryEvent("githubAPI.approachingRateLimit",{rateLimit:d.toString()})):e.debug(f),p}catch{return}}async function wy(n,e,t,r,i,o,s=20){let a=`
		query FetchCopilotAgentPullRequests($searchQuery: String!, $first: Int!, $after: String) {
			search(query: $searchQuery, type: ISSUE, first: $first, after: $after) {
				nodes {
					... on PullRequest {
						number
						id
						fullDatabaseId
						headRefOid
						baseRefOid
						title
						state
						url
						createdAt
						updatedAt
						additions
						deletions
						files {
							totalCount
						}
						author {
							login
						}
						repository {
							owner {
								login
							}
							name
						}
						body
					}
				}
				pageInfo {
					hasNextPage
					endCursor
				}
				issueCount
			}
		}
	`;e.debug(`[FolderRepositoryManager+0] Fetch pull request category ${o}`);let l=await Oh(n,e,t,r,a,i,{searchQuery:o,first:s});return l?l.data.search.nodes:[]}async function Cy(n,e,t,r,i,o){let s=`
		query GetPullRequestGlobal($globalId: ID!) {
			node(id: $globalId) {
				... on PullRequest {
					number
					id
					fullDatabaseId
					headRefOid
					baseRefOid
					title
					state
					url
					createdAt
					updatedAt
					additions
					deletions
					files {
						totalCount
					}
					author {
						login
					}
					repository {
						owner {
							login
						}
						name
					}
					body
				}
			}
		}
	`;return e.debug(`[GitHubAPI] Fetch pull request by global ID ${o}`),(await Oh(n,e,t,r,s,i,{globalId:o}))?.data?.node}async function Ey(n,e,t,r,i,o,s){let a=`
		mutation AddPullRequestComment($pullRequestId: ID!, $body: String!) {
			addComment(input: {subjectId: $pullRequestId, body: $body}) {
				commentEdge {
					node {
						id
						body
						createdAt
						author {
							login
						}
						url
					}
				}
			}
		}
	`;return e.debug(`[GitHubAPI] Adding comment to pull request ${o}`),(await Oh(n,e,t,r,a,i,{pullRequestId:o,body:s}))?.data?.addComment?.commentEdge?.node||null}async function Sy(n,e,t,r,i,o,s,a){e.debug(`[GitHubAPI] Closing pull request ${o}/${s}#${a}`);let u=await Xt(n,e,t,r,`repos/${o}/${s}/pulls/${a}`,"POST",i,{state:"closed"},"2022-11-28"),l=u?.state==="closed";return l?e.debug(`[GitHubAPI] Successfully closed pull request ${o}/${s}#${a}`):e.error(`[GitHubAPI] Failed to close pull request ${o}/${s}#${a}. Its state is ${u?.state}`),l}async function Ry(n,e,t,r,i,o){let s=!1,a=[],u=20,l=1;do{let p=await n.fetch(`${t}/${r}?page_size=${u}&page_number=${l}&resource_state=draft,open&repo_nwo=${i}`,{headers:{Authorization:`Bearer ${o}`,Accept:"application/json"}});if(!p.ok)return e.error(`[GitHubAPI] Failed to fetch sessions: ${p.status} ${p.statusText}`),a;let d=await p.json();a.push(...d.sessions),s=d.sessions.length===u,l++}while(s);return a}var sH=_("IGithubRepositoryService"),Dy=_("IOctoKitService");var Ms=class{constructor(e,t,r,i){this._capiClientService=e;this._fetcherService=t;this._logService=r;this._telemetryService=i}async getCurrentAuthedUserWithToken(e){return this._makeGHAPIRequest("user","GET",e)}async getTeamMembershipWithToken(e,t,r){return this._makeGHAPIRequest(`teams/${e}/memberships/${r}`,"GET",t)}async _makeGHAPIRequest(e,t,r,i){return Xt(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,e,t,r,i,"2022-11-28")}async getCopilotPullRequestForUserWithToken(e,t,r,i){let o=`repo:${e}/${t} is:open author:copilot-swe-agent[bot] involves:${r}`;return wy(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,i,o)}async getCopilotSessionsForPRWithToken(e,t){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/sessions/resource/pull/${e}`,"GET",t)}async getSessionLogsWithToken(e,t){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/sessions/${e}/logs`,"GET",t,void 0,void 0,"text")}async getSessionInfoWithToken(e,t){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/sessions/${e}`,"GET",t,void 0,void 0,"text")}async postCopilotAgentJobWithToken(e,t,r,i,o,s){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/swe/${r}/jobs/${e}/${t}`,"POST",s,o,void 0,void 0,i,!0)}async getJobByJobIdWithToken(e,t,r,i,o){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/swe/v1/jobs/${e}/${t}/${r}`,"GET",o,void 0,void 0,void 0,i)}async getJobBySessionIdWithToken(e,t,r,i,o){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/swe/v1/jobs/${e}/${t}/session/${r}`,"GET",o,void 0,void 0,void 0,i)}async addPullRequestCommentWithToken(e,t,r){return Ey(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,r,e,t)}async getAllOpenSessionsWithToken(e,t){return Ry(this._fetcherService,this._logService,"https://api.githubcopilot.com","agents/sessions",e,t)}async getPullRequestFromSessionWithToken(e,t){return Cy(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,t,e)}async getCustomAgentsWithToken(e,t,r){return Xt(this._fetcherService,this._logService,this._telemetryService,"https://api.githubcopilot.com",`agents/swe/custom-agents/${e}/${t}?exclude_invalid_config=true`,"GET",r,void 0,void 0,"json","vscode-copilot-chat")}async getPullRequestFilesWithToken(e,t,r,i){return await Xt(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,`repos/${e}/${t}/pulls/${r}/files`,"GET",i,void 0,"2022-11-28")||[]}async closePullRequestWithToken(e,t,r,i){return Sy(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,i,e,t,r)}async getFileContentWithToken(e,t,r,i,o){let s=`repos/${e}/${t}/contents/${i}?ref=${encodeURIComponent(r)}`,a=await Xt(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,s,"GET",o,void 0);if(!a||Array.isArray(a))throw new Error("Unable to fetch file content");let u=a;if(u.content&&u.encoding==="base64")return Pf(u.content.replace(/\n/g,"")).toString();if(u.sha){let l=await this.getBlobContentWithToken(e,t,u.sha,o);if(l)return l}return this._logService.error(`Failed to get file content for ${e}/${t}/${i} at ref ${r}`),""}async getBlobContentWithToken(e,t,r,i){let o=`repos/${e}/${t}/git/blobs/${r}`,s=await Xt(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,o,"GET",i,void 0,"2022-11-28");if(!s||Array.isArray(s))return;let a=s;if(a.content&&a.encoding==="base64")return Pf(a.content.replace(/\n/g,"")).toString()}};var Rd=class extends Ms{async getCurrentAuthedUserWithToken(e){return{avatar_url:"",login:"NullUser",name:"Null User"}}async getTeamMembershipWithToken(e,t,r){}async _makeGHAPIRequest(e,t,r,i){}};var Us=class extends Ms{constructor(t,r,i,o,s){super(r,i,o,s);this._authService=t}async getCurrentAuthedUser(){let t=(await this._authService.getAnyGitHubSession())?.accessToken;if(t)return await this.getCurrentAuthedUserWithToken(t)}async getCopilotPullRequestsForUser(t,r){let i=await this._authService.getPermissiveGitHubSession({createIfNone:!0});return i?.accessToken?await this.getCopilotPullRequestForUserWithToken(t,r,i.account.label,i.accessToken):[]}async getCopilotSessionsForPR(t){let r=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!r)return[];let i=await this.getCopilotSessionsForPRWithToken(t,r),{sessions:o}=i;return o}async getSessionLogs(t){let r=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;return r?await this.getSessionLogsWithToken(t,r):""}async getSessionInfo(t){let r=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!r)throw new Error("No authentication token available");let i=await this.getSessionInfoWithToken(t,r);return typeof i=="string"?JSON.parse(i):i}async postCopilotAgentJob(t,r,i,o){let s=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!s)throw new Error("No authentication token available");return this.postCopilotAgentJobWithToken(t,r,i,"vscode-copilot-chat",o,s)}async getJobByJobId(t,r,i,o){let s=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!s)throw new Error("No authentication token available");return this.getJobByJobIdWithToken(t,r,i,o,s)}async getJobBySessionId(t,r,i,o){let s=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!s)throw new Error("No authentication token available");return this.getJobBySessionIdWithToken(t,r,i,o,s)}async addPullRequestComment(t,r){let i=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!i)throw new Error("No authentication token available");return this.addPullRequestCommentWithToken(t,r,i)}async getAllOpenSessions(t){let r=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;return r?this.getAllOpenSessionsWithToken(t,r):[]}async getPullRequestFromGlobalId(t){let r=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!r)throw new Error("No authentication token available");return this.getPullRequestFromSessionWithToken(t,r)}async getCustomAgents(t,r){let i=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!i)return[];let{agents:o}=await this.getCustomAgentsWithToken(t,r,i);return Array.isArray(o)?o:[]}async getPullRequestFiles(t,r,i){let o=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;return o?this.getPullRequestFilesWithToken(t,r,i,o):[]}async closePullRequest(t,r,i){let o=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;return o?this.closePullRequestWithToken(t,r,i,o):!1}async getFileContent(t,r,i,o){let s=(await this._authService.getPermissiveGitHubSession({createIfNone:!0}))?.accessToken;if(!s)throw new Error("No GitHub authentication available");return this.getFileContentWithToken(t,r,i,o,s)}};Us=E([v(0,ln),v(1,ii),v(2,Kt),v(3,Z),v(4,ge)],Us);var Ay=_("IInteractiveSessionService");var Py=require("vscode"),Dd=class{transferActiveChat(e){Py.interactive.transferActiveChat(e)}};var Pd=_("ILanguageDiagnosticService"),Ad=class{waitForNewDiagnostics(e,t,r=5e3){let i,o,s;return new Promise(a=>{i=t.onCancellationRequested(()=>a([])),s=setTimeout(()=>a(this.getDiagnostics(e)),r),o=this.onDidChangeDiagnostics(u=>{for(let l of u.uris)if(Ma(l,e)){a(this.getDiagnostics(e));break}})}).finally(()=>{i.dispose(),o.dispose(),clearTimeout(s)})}};var Ly=_("ILanguageFeaturesService");var Ld=Te(require("vscode"));var Od=class n extends Ad{constructor(){super(...arguments);this.onDidChangeDiagnostics=Ld.languages.onDidChangeDiagnostics}static{this.ignoredSchemes=new Set(["git","chat-editing-snapshot-text-model","chat-editing-text-model"])}getDiagnostics(t){return Ld.languages.getDiagnostics(t)}getAllDiagnostics(){return Ld.languages.getDiagnostics().filter(([t])=>!n.ignoredSchemes.has(t.scheme))}};var bi=Te(require("vscode")),Nd=class{constructor(){}async getDefinitions(e,t){return await bi.commands.executeCommand("vscode.executeDefinitionProvider",e,t)}async getImplementations(e,t){return await bi.commands.executeCommand("vscode.executeImplementationProvider",e,t)}async getReferences(e,t){return await bi.commands.executeCommand("vscode.executeReferenceProvider",e,t)}async getWorkspaceSymbols(e){return await bi.commands.executeCommand("vscode.executeWorkspaceSymbolProvider",e)}async getDocumentSymbols(e){return await bi.commands.executeCommand("vscode.executeDocumentSymbolProvider",e)}getDiagnostics(e){return bi.languages.getDiagnostics(e)}};var vi=require("vscode"),nS,rS="GitHub Copilot Chat",Fd=class{constructor(e){this._outputChannel=vi.window.createOutputChannel(rS,{log:!0});nS=this._outputChannel,e.subscriptions.push(this._outputChannel)}logIt(e,t,...r){switch(e){case vi.LogLevel.Trace:this._outputChannel.trace(t);break;case vi.LogLevel.Debug:this._outputChannel.debug(t);break;case vi.LogLevel.Info:this._outputChannel.info(t);break;case vi.LogLevel.Warning:this._outputChannel.warn(t);break;case vi.LogLevel.Error:this._outputChannel.error(t);break}}show(e){this._outputChannel.show(e)}};var Oy=_("IEditLogService"),Bs=class{constructor(e,t,r,i){this._vscodeExtensionContext=e;this._fileSystemService=t;this._configurationService=r;this._logService=i;this.LOG_DIR=W.joinPath(this._vscodeExtensionContext.globalStorageUri,"editRecordings");this._edits=new Map}_isEnabled(){return this._configurationService.getConfig(xe.AdvancedExperimental.EditRecordingEnabled)}logEditChatRequest(e,t,r){if(!this._isEnabled())return;let i=this._edits.get(e)??{prompt:t,response:r,edits:[]};i.prompt=t,i.response=r,this._edits.set(e,i)}logSpeculationRequest(e,t,r,i,o){if(!this._isEnabled())return;let s=this._edits.get(e)??{prompt:[],response:"",edits:[]};s.edits.push({uri:t.toString(),prompt:r,originalContent:i,editedContent:o}),this._edits.set(e,s)}async getEditLog(e){if(this._isEnabled())try{let t=await this._fileSystemService.readFile(W.joinPath(this.LOG_DIR,`${e}.json`));return JSON.parse(t.toString()).edits.map(i=>({prompt:i.prompt,response:i.editedContent}))}catch{}}async markCompleted(e,t){if(!this._isEnabled())return;let r=this._edits.get(e);if(r){if(r.edits.length){let i=W.joinPath(this.LOG_DIR,`${e}.json`);this._logService.debug(`Edit recording: ${i.toString()}`),await this._fileSystemService.writeFile(i,Xe.fromString(JSON.stringify(r,void 0,4)).buffer)}this._edits.delete(e)}}};Bs=E([v(0,Ge),v(1,Nt),v(2,et),v(3,Z)],Bs);pe();gn();var Md=_("INotebookService");var Ny=_("IMultiFileEditInternalTelemetryService"),Vs=class extends K{constructor(t,r,i,o,s,a){super();this.telemetryService=t;this.workspaceService=r;this.notebookService=i;this.logService=o;this.alternativeNotebookContent=s;this.chatSessionService=a;this.editedFiles=new hn;this.editedDocuments=new Map;this._register(this.chatSessionService.onDidDisposeChatSession(u=>{this.editedDocuments.delete(u)}))}storeEditPrompt(t,r){this.logService.debug(`Storing edit prompt for ${t.uri.toString()} with request ID ${r.chatRequestId}`);let i=this.editedFiles.get(t.uri)??new Map,o=i.get(r.chatRequestId)??[];if(o.push({...t,...r}),i.set(r.chatRequestId,o),this.editedFiles.set(t.uri,i),t.document&&r.chatSessionId){let s=this.editedDocuments.get(r.chatSessionId);s||(s=new hn,this.editedDocuments.set(r.chatSessionId,s)),s.set(t.uri,t.document)}}async sendEditPromptAndResult(t,r,i){let o=this.editedFiles.get(r);if(!o)return;if(o.size>1){this.logService.debug(`Skipping telemetry for ${r.toString()} with request ID ${t.chatRequestId} due to multiple edit turns`),this.editedFiles.delete(r);return}let s=o.get(t.chatRequestId);if(s){if(s.length>1){this.logService.debug(`Skipping telemetry for ${r.toString()} with request ID ${t.chatRequestId} due to multiple edits in one turn`),this.editedFiles.delete(r);return}try{let a=s[0],u,l;if(a.chatSessionId){let d=this.editedDocuments.get(a.chatSessionId)?.get(r);d&&"getText"in d&&(u=d.languageId,l=d.getText())}if(!l&&!u)if(this.notebookService.hasSupportedNotebooks(r)){let d=await this.workspaceService.openNotebookDocumentAndSnapshot(r,this.alternativeNotebookContent.getFormat(void 0));u??=d.languageId,l??=d.getText()}else{let d=await this.workspaceService.openTextDocument(r);u=d.languageId,l=d.getText()}this.telemetryService.sendInternalMSFTTelemetryEvent("multiFileEditQuality",{requestId:t.chatRequestId,speculationRequestId:a.speculationRequestId,isAgent:String(a.isAgent),outcome:i,prompt:a.prompt,languageId:u,file:l,mapper:a.mapper},{isNotebook:this.notebookService.hasSupportedNotebooks(r)?1:0});let p=Cb({headerRequestId:a.speculationRequestId,providerId:a.mapper,languageId:u,messageText:a.prompt,suggestion:i,completionTextJson:l,conversationId:a.chatSessionId,messageId:a.chatRequestId});this.telemetryService.sendEnhancedGHTelemetryEvent("fastApply/editOutcome",p),this.logService.debug(`Sent telemetry for ${r.toString()} with request ID ${a.chatRequestId}, SD request ID ${a.speculationRequestId}, and outcome ${i}`)}catch(a){this.logService.error("Error sending multi-file edit telemetry",JSON.stringify(a))}finally{this.editedFiles.delete(r)}}}};Vs=E([v(0,ge),v(1,rt),v(2,Md),v(3,Z),v(4,gs),v(5,ic)],Vs);ml();function Fy(n,e,t){let r=[],i=0,o=0;for(let s=0;s<t.length;s++){let a=t[s];for(let l=0;l<a.original.startLineNumber-1-i;l++)r.push({originalCellIndex:i+l,modifiedCellIndex:o+l,type:"unchanged"});let u=iS(n,e,a);r.push(...u),i=a.original.startLineNumber-1+a.original.length,o=a.modified.startLineNumber-1+a.modified.length}for(let s=i;s<n.length;s++)r.push({originalCellIndex:s,modifiedCellIndex:s-i+o,type:"unchanged"});return r}function iS(n,e,t){let r=[],i=Math.min(t.original.length,t.modified.length);for(let o=0;o<i;o++){let s=n[t.original.startLineNumber-1+o],a=e[t.modified.startLineNumber-1+o];s!==a?(r.push({originalCellIndex:t.original.startLineNumber-1+o,type:"delete"}),r.push({modifiedCellIndex:t.modified.startLineNumber-1+o,type:"insert"})):r.push({originalCellIndex:t.original.startLineNumber-1+o,modifiedCellIndex:t.modified.startLineNumber-1+o,type:"unchanged"})}for(let o=i;o<t.original.length;o++)r.push({originalCellIndex:t.original.startLineNumber-1+o,type:"delete"});for(let o=i;o<t.modified.length;o++)r.push({modifiedCellIndex:t.modified.startLineNumber-1+o,type:"insert"});return r}var Uy=_("IAlternativeNotebookContentEditGenerator"),qs=class{constructor(e,t,r,i){this.alternativeContentService=e;this.diffService=t;this.logger=r;this.telemetryService=i}getFormat(e){let t=e.trim().substring(0,1);return t==="{"?"json":t==="<"?"xml":"text"}getEOLForNewCell(e,t){let r=kt(e)?void 0:e.getCells().find(i=>i.kind===t)?.document.eol??void 0;return r?r===Ji.LF?`
`:`\r
`:ye}async*generateNotebookEdits(e,t,r,i){t=typeof t=="string"?oS(t):t;let o=new Bn;t=aS(t,o);let s=(await o.p).value,a=this.getFormat(s),u=[];t=My(t,u);let l=kt(e)||e.cellCount===0,p=!1,d=!1;for await(let f of this.generateNotebookEditsImpl(e,t,a,i))p=p||!Array.isArray(f),Array.isArray(f)&&(d=!0),yield f;if((l||!kt(e))&&!p&&a==="text"&&u.length&&!kc(s)){let f=kt(e)?e:e.uri;if(pm(f)){let h=this.getEOLForNewCell(e,he.Code),m=new cs(he.Code,u.join(h),"python");yield Qi.insertCells(0,[m]),this.logger.info(`No new cells were emitted for ${f.toString()}. Emitting a new cell with the contents of the code.`)}else this.logger.warn(`No new cells were emitted for ${f.toString()}`)}(async()=>{let f=await Promise.resolve(r?.model).catch(()=>{});this.telemetryService.sendMSFTTelemetryEvent("notebook.editGeneration",{requestId:r?.requestId,requestSource:r?.source,model:f,inputFormat:a},{isEmptyNotebook:l?1:0,isNotebookOrUri:kt(e)?0:1,isJupyterNotebookUri:pm(kt(e)?e:e.uri)?1:0,isEditEmitted:p?1:0,isCellTextEditEmitted:d?1:0,sourceLength:u.length})})()}async*generateNotebookEditsImpl(e,t,r,i){let o=this.alternativeContentService.create(r),s=kt(e)||e.cellCount===0,a=!kt(e),u=a?jn(e):new Map,l={index:-1,lines:[],language:"markdown",ended:!1},p=new WeakSet;function d(b){let y=new Vn;return y.update(b.index.toString()),y.digest().substring(0,8)}let f=[],h=kt(e)?[]:e.getCells().map(b=>({id:Yi(b),uri:b.document.uri})),m=[];t=My(t,m);let g=!1;for await(let b of o.parseAlternateContent(e,t,i)){if(i.isCancellationRequested)break;if(b.type==="start"){let y={index:b.index,language:b.language||"markdown",lines:[],cell:b.id?u.get(b.id):void 0};f.push(y),l.ended=!1,l.insertEdit=void 0,l.index=y.index,l.lines=y.lines,l.language=y.language,l.cell=y.cell,l.cell&&p.add(l.cell)}else if(b.type==="end"){l.ended=!0;let y=l.cell?.document;if(!l.insertEdit&&!l.cell&&!l.lines.length){let S=new cs(l.language==="markdown"?he.Markup:he.Code,"",l.language);yield Qi.insertCells(l.index,[S]),g=!0,h.splice(l.index,0,{id:d(l)})}else if(l.insertEdit&&!l.cell){let S=!s&&a&&l.index<e.cellCount?e.cellAt(l.index):void 0;if(S&&S.document.getText()===l.insertEdit.newCells[0].value){p.add(S),f[f.length-1].cell=S;let A=S.document;for(let k=0;k<A.lineCount;k++){let O=A.lineAt(k);yield[A.uri,[new Yr(new We(k,0,k,1073741824),O.text)]],g=!0}}else yield l.insertEdit,g=!0,h.splice(l.index,0,{id:d(l)})}else if(l.lines.length&&y&&l.lines.length<y.lineCount){let S=new We(l.lines.length-1,l.lines.slice(-1)[0].length,y.lineCount-1,y.lineAt(y.lineCount-1).text.length);yield[y.uri,[new Yr(S,"")]]}}else if(b.type==="line"&&!l.ended)if(l.lines.push(b.line),l.cell){if(l.lines.length>l.cell.document.lineCount){let y=new We(l.lines.length-1,0,l.lines.length-1,0),A=`${l.cell.document.eol===Ji.LF?`
`:`\r
`}${b.line}`;yield[l.cell.document.uri,[new Yr(y,A)]]}else{let y=l.lines.length-1;yield[l.cell.document.uri,[new Yr(new We(y,0,y,1073741824),b.line)]]}g=!0}else if(l.insertEdit){let y=this.getEOLForNewCell(e,l.insertEdit.newCells[0].kind);l.insertEdit.newCells[0].value=l.lines.join(y)}else{let y=new cs(l.language==="markdown"?he.Markup:he.Code,b.line,l.language);l.insertEdit=Qi.insertCells(l.index,[y])}}if(s||!a)return;if(!g&&m.length){this.logger.warn(`No edits generated for notebook ${e.uri.toString()}. This is likely due to an invalid format. Expected format: ${r}. Provided content as follows:

${m.join(`
`)}`);return}let x=f.map(b=>b.cell?Yi(b.cell):d(b));for(let b of h.filter(y=>y.uri&&!x.includes(y.id)).reverse())if(u.get(b.id)){let S=h.indexOf(b);yield Qi.deleteCells(new cm(S,S+1)),h.splice(S,1)}let I=await this.diffService.computeDiff(h.map(b=>b.id).join(ye),x.join(ye),{computeMoves:!1,ignoreTrimWhitespace:!0,maxComputationTimeMs:5e3}),T=Fy(h.map(b=>b.id),x,I.changes);if(!T.every(b=>b.type==="unchanged")){for(let b of T.filter(y=>y.type==="delete").reverse())yield Qi.deleteCells(new cm(b.originalCellIndex,b.originalCellIndex+1));for(let b of T.filter(y=>y.type==="insert")){let y=f[b.modifiedCellIndex],S=y.language==="markdown"?he.Markup:he.Code,A=this.getEOLForNewCell(e,S),k=y.lines.join(A),O=new cs(S,k,y.language);yield Qi.insertCells(y.index,[O])}}}};qs=E([v(0,gs),v(1,vs),v(2,Z),v(3,ge)],qs);function oS(n){let e=new Il;return e.emitOne(n),e.resolve(),sS(e.asyncIterable)}function sS(n){return new cr(async e=>{let t="";for await(let r of n){t+=r;do{let i=t.indexOf(`
`);if(i===-1)break;let o=t.substring(0,i);t=t.substring(i+1),e.emitOne(new ms(o))}while(!0)}t.length>0&&e.emitOne(new ms(t))})}function aS(n,e){return new cr(async t=>{for await(let r of n)!e.isSettled&&r.value.trim().length&&e.complete(r),t.emitOne(r);e.isSettled||e.complete(new ms(""))})}function My(n,e){return new cr(async t=>{for await(let r of n)e.push(r.value),t.emitOne(r)})}var By=_("INotebookSummaryTracker");var yt=require("vscode");var Vy=require("vscode");Wt();var Ud=class{constructor(){this._onDidChangeNotebookCellExecutionStateEmitter=new se;this.onDidChangeNotebookCellExecutionState=this._onDidChangeNotebookCellExecutionStateEmitter.event;this._disposables=[];this._cellExecution=new WeakMap;this._disposables.push(Vy.workspace.onDidChangeNotebookDocument(e=>{for(let t of e.cellChanges)t.executionSummary&&(t.executionSummary.success===void 0?this._cellExecution.has(t.cell)||(this._cellExecution.set(t.cell,!0),this._onDidChangeNotebookCellExecutionStateEmitter.fire({cell:t.cell,state:2})):(this._cellExecution.delete(t.cell),this._onDidChangeNotebookCellExecutionStateEmitter.fire({cell:t.cell,state:1})))}))}dispose(){this._disposables.forEach(e=>e.dispose())}};var uS="puku.notebookAgentModeUsage",$s=class{constructor(e,t,r,i){this._configurationService=e;this._experimentationService=t;this._workspaceService=r;this._logger=i;this._cellExecution=new Map;this._cellSymbols=new WeakMap;this._executionService=new Ud;this._disposables=[];this._isVariableFilteringEnabled=!1;this._notebookEditorContribInitFlag=!1;this._notebookEditorContributions=[];this.followExecutionState=!1;this._isVariableFilteringEnabled=this._experimentationService.getTreatmentVariable("copilotchat.notebookVariableFiltering")||this._configurationService.getConfig(xe.AdvancedExperimental.NotebookVariableFilteringEnabled),this._registerExecutionListener()}get isVariableFilteringEnabled(){return this._isVariableFilteringEnabled}_hasJupyterExtension(){return yt.extensions.getExtension("ms-toolsai.jupyter")?.isActive}trackAgentUsage(){yt.commands.executeCommand("setContext",uS,!0)}setFollowState(e){this.followExecutionState=e}getFollowState(){return this.followExecutionState}async getVariables(e){if(!this._hasJupyterExtension())try{let t=await yt.commands.executeCommand("vscode.executeNotebookVariableProvider",e);if(t&&Array.isArray(t)){let r=t.map(this._convertResult);return this._filterVariables(e,r)}return[]}catch(t){return this._logger.error(`Failed to get notebook variables (vscode.executeNotebookVariableProvider) for ${e.toString()}: ${t}`),[]}try{let t=await yt.commands.executeCommand("jupyter.listVariables",e);if(t&&Array.isArray(t)){let r=t.map(this._convertResult);return this._filterVariables(e,r)}return[]}catch(t){return this._logger.error(`Failed to get notebook variables (jupyter.listVariables) for ${e.toString()}: ${t}`),[]}}_convertResult(e){return"variable"in e?e:{variable:e,hasNamedChildren:!1,indexedChildrenCount:0}}_filterVariables(e,t){if(!this.isVariableFilteringEnabled)return t;let r=new Set;return Xi(e,yt.workspace.notebookDocuments)?.getCells().forEach(i=>{let o=this._cellSymbols.get(i);o&&o.forEach(s=>r.add(s.name))}),t.filter(i=>r.has(i.variable.name))}async getPipPackages(e){if(!this._hasJupyterExtension())return[];try{return await yt.commands.executeCommand("jupyter.listPipPackages",e)}catch(t){return this._logger.error(`Failed to get pip packages (jupyter.listPipPackages) for ${e.toString()}: ${t}`),[]}}setVariables(e,t){}populateNotebookEditorContributions(){let e=[],t=yt.extensions.all;for(let r of t){let i=r.packageJSON.contributes?.notebooks;Array.isArray(i)&&e.push(...i)}for(let r of e)rv(r)&&this._notebookEditorContributions.push(r)}hasSupportedNotebooks(e){this._notebookEditorContribInitFlag||(this.populateNotebookEditorContributions(),this._notebookEditorContribInitFlag=!0);let t=this._configurationService.getNonExtensionConfig("workbench.editorAssociations"),r=iv(t??{});return ov(e,this._workspaceService.notebookDocuments,this._notebookEditorContributions,r)}_registerExecutionListener(){this._disposables.push(this._executionService.onDidChangeNotebookCellExecutionState(e=>{let t=e.cell,i=t.notebook.uri.toString(),o=this._cellExecution.get(i);o||(o=[],this._cellExecution.set(i,o));let s=o.findIndex(a=>a.cell===t);s!==-1&&o.splice(s,1),o.push({cell:t,executionCount:t.executionSummary?.executionOrder})})),this._disposables.push(yt.workspace.onDidChangeNotebookDocument(e=>{if(this.isVariableFilteringEnabled){for(let t of e.cellChanges)t.executionSummary&&t.executionSummary.success&&yt.commands.executeCommand("vscode.executeDocumentSymbolProvider",t.cell.document.uri).then(i=>{this._cellSymbols.set(t.cell,i||[])}),t.document&&this._cellSymbols.delete(t.cell);for(let t of e.contentChanges)t.removedCells.forEach(r=>{this._cellSymbols.delete(r)})}}))}getCellExecutions(e){return this._cellExecution.get(e.toString())?.map(t=>t.cell)||[]}async runCells(e,t,r){await yt.commands.executeCommand("notebook.cell.execute",{ranges:[t],document:e,autoReveal:r})}async ensureKernelSelected(e){yt.window.visibleNotebookEditors.find(t=>t.notebook.uri.toString()===e.toString())&&await yt.commands.executeCommand("notebook.selectKernel",{notebookUri:e,skipIfAlreadySelected:!0})}dispose(){this._disposables.forEach(e=>e.dispose())}};$s=E([v(0,et),v(1,gt),v(2,rt),v(3,Z)],$s);pe();var Ws=class extends de{constructor(t,r){super();this.workspaceService=t;this.trackedNotebooks=new WeakSet;this.notebooksWithChanges=new WeakSet;r.subscriptions.push(this),this.add(this.workspaceService.onDidChangeNotebookDocument(i=>{this.trackedNotebooks.has(i.notebook)&&(i.contentChanges.length&&this.notebooksWithChanges.add(i.notebook),i.cellChanges.some(o=>o.executionSummary)&&this.notebooksWithChanges.add(i.notebook))}))}trackNotebook(t){this.trackedNotebooks.add(t)}clearState(t){this.notebooksWithChanges.delete(t)}listNotebooksWithChanges(){return this.workspaceService.notebookDocuments.filter(t=>this.notebooksWithChanges.has(t))}};Ws=E([v(0,rt),v(1,Ge)],Ws);Ai();var Bd=class{showInformationMessage(e,t,...r){return Promise.resolve(void 0)}showWarningMessage(e,...t){return Promise.resolve(void 0)}showQuotaExceededDialog(e){return Promise.resolve()}withProgress(e,t){return Promise.resolve(t({report:()=>{}},rr.None))}},Vd=_("INotificationService");var bo=require("vscode"),qd=class{async showInformationMessage(e,t,...r){return typeof t=="object"&&t!==null&&!Array.isArray(t)?bo.window.showInformationMessage(e,t,...r):bo.window.showInformationMessage(e,t,...r)}async withProgress(e,t){return bo.window.withProgress(e,t)}async showWarningMessage(e,...t){return bo.window.showWarningMessage(e,...t)}async showQuotaExceededDialog(e){return bo.commands.executeCommand(e.isNoAuthUser?"workbench.action.chat.triggerSetup":"workbench.action.chat.openQuotaExceededDialog")}};var qy=_("IUrlOpener"),$d=class{constructor(){this.openedUrls=[]}open(e){this.openedUrls.push(e)}};var jd=Te(require("vscode")),Wd=class{async open(e){await jd.commands.executeCommand("vscode.open",jd.Uri.parse(e))}};var $y=_("IProjectTemplatesIndex"),js=class{constructor(e=!0,t,r){this._isIndexLoaded=!1;let i=wr(t.getEditorInfo().version);this.embeddingsCache=e?r.createInstance(dn,1,"projectTemplateEmbeddings",i,be.text3small_512,"project-templates"):r.createInstance(Cr,1,"projectTemplateEmbeddings",i,be.text3small_512)}async updateIndex(){this._isIndexLoaded||(this._isIndexLoaded=!0,this._embeddings=await this.embeddingsCache.getCache())}async nClosestValues(e,t){return await this.updateIndex(),this._embeddings?Is(e,this._embeddings.filter(r=>r.embedding).map(r=>[`${r.key} `,{type:this.embeddingsCache.embeddingType,value:r.embedding}]),t).map(r=>r.value):[]}};js=E([v(1,Qe),v(2,_e)],js);Po();Je();function zy(n,e=[],t={}){let r=n.length===0?[]:n.split(/\r\n|\n/);return new Fh(r,e,t).parse()}function Du(n,e){return{line:n,character:e}}function pn(n,e,t){return{type:"string",value:n,start:e,end:t}}function lS(n,e,t){return{type:"number",value:n,start:e,end:t}}function Wy(n,e,t){return{type:"boolean",value:n,start:e,end:t}}function cS(n,e){return{type:"null",value:null,start:n,end:e}}function jy(n,e,t){return{type:"object",start:e,end:t,properties:n}}function Gy(n,e,t){return{type:"array",start:e,end:t,items:n}}function Hy(n){return n===" "||n==="	"}function dS(n){return/^-?\d*\.?\d+$/.test(n)}var Nh=class{constructor(e){this.currentLine=0;this.currentChar=0;this.lines=e}getCurrentPosition(){return Du(this.currentLine,this.currentChar)}getCurrentLineNumber(){return this.currentLine}getCurrentCharNumber(){return this.currentChar}getCurrentLineText(){return this.currentLine<this.lines.length?this.lines[this.currentLine]:""}savePosition(){return{line:this.currentLine,char:this.currentChar}}restorePosition(e){this.currentLine=e.line,this.currentChar=e.char}isAtEnd(){return this.currentLine>=this.lines.length}getCurrentChar(){return this.isAtEnd()||this.currentChar>=this.lines[this.currentLine].length?"":this.lines[this.currentLine][this.currentChar]}peek(e=1){let t=this.currentChar+e;return this.currentLine>=this.lines.length||t>=this.lines[this.currentLine].length?"":this.lines[this.currentLine][t]}advance(){let e=this.getCurrentChar();return this.currentChar>=this.lines[this.currentLine].length&&this.currentLine<this.lines.length-1?(this.currentLine++,this.currentChar=0):this.currentChar++,e}advanceLine(){this.currentLine++,this.currentChar=0}skipWhitespace(){for(;!this.isAtEnd()&&this.currentChar<this.lines[this.currentLine].length&&Hy(this.getCurrentChar());)this.advance()}skipToEndOfLine(){this.currentChar=this.lines[this.currentLine].length}getIndentation(){if(this.isAtEnd())return 0;let e=0;for(let t=0;t<this.lines[this.currentLine].length;t++)if(this.lines[this.currentLine][t]===" ")e++;else if(this.lines[this.currentLine][t]==="	")e+=4;else break;return e}moveToNextNonEmptyLine(){for(;this.currentLine<this.lines.length;){if(this.currentChar<this.lines[this.currentLine].length){let e=this.lines[this.currentLine].substring(this.currentChar).trim();if(e.length>0&&!e.startsWith("#")){this.skipWhitespace();return}}if(this.currentLine++,this.currentChar=0,this.currentLine<this.lines.length){let e=this.lines[this.currentLine].trim();if(e.length>0&&!e.startsWith("#")){this.skipWhitespace();return}}}}},Fh=class{constructor(e,t,r){this.flowLevel=0;this.lexer=new Nh(e),this.errors=t,this.options=r}addError(e,t,r,i){this.errors.push({message:e,code:t,start:r,end:i})}parseValue(e){if(this.lexer.skipWhitespace(),this.lexer.isAtEnd()){let r=this.lexer.getCurrentPosition();return pn("",r,r)}let t=this.lexer.getCurrentChar();return t==='"'||t==="'"?this.parseQuotedString(t):t==="["?this.parseInlineArray():t==="{"?this.parseInlineObject():this.parseUnquotedValue()}parseQuotedString(e){let t=this.lexer.getCurrentPosition();this.lexer.advance();let r="";for(;!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!==""&&this.lexer.getCurrentChar()!==e;)r+=this.lexer.advance();this.lexer.getCurrentChar()===e&&this.lexer.advance();let i=this.lexer.getCurrentPosition();return pn(r,t,i)}parseUnquotedValue(){let e=this.lexer.getCurrentPosition(),t="",r=e,i=l=>l==="#"||this.flowLevel>0&&(l===","||l==="]"||l==="}"),o=this.lexer.getCurrentChar();if(o==='"'||o==="'")for(t+=this.lexer.advance(),r=this.lexer.getCurrentPosition();!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!=="";){let l=this.lexer.getCurrentChar();if(l===o||i(l))break;t+=this.lexer.advance(),r=this.lexer.getCurrentPosition()}else for(;!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!=="";){let l=this.lexer.getCurrentChar();if(i(l))break;t+=this.lexer.advance(),r=this.lexer.getCurrentPosition()}let s=t.trimEnd(),a=t.length-s.length;a&&(r=Du(e.line,r.character-a));let u=o==='"'||o==="'"?s.substring(1):s;return this.createValueNode(u,e,r)}createValueNode(e,t,r){if(e==="")return pn("",t,t);if(e==="true")return Wy(!0,t,r);if(e==="false")return Wy(!1,t,r);if(e==="null"||e==="~")return cS(t,r);let i=Number(e);return!isNaN(i)&&isFinite(i)&&dS(e)?lS(i,t,r):pn(e,t,r)}parseInlineArray(){let e=this.lexer.getCurrentPosition();this.lexer.advance(),this.flowLevel++;let t=[];for(;!this.lexer.isAtEnd();){if(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="]"){this.lexer.advance();break}if(this.lexer.getCurrentChar()===""){this.lexer.advanceLine();continue}if(this.lexer.getCurrentChar()==="#"){this.lexer.skipToEndOfLine(),this.lexer.advanceLine();continue}let i=this.lexer.savePosition(),o=this.parseValue();o.type==="string"&&o.value===""&&o.start.line===o.end.line&&o.start.character===o.end.character||t.push(o);let s=this.lexer.savePosition();if(i.line===s.line&&i.char===s.char)if(!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!=="")this.lexer.advance();else break;this.lexer.skipWhitespace(),this.lexer.getCurrentChar()===","&&this.lexer.advance()}let r=this.lexer.getCurrentPosition();return this.flowLevel--,Gy(t,e,r)}parseInlineObject(){let e=this.lexer.getCurrentPosition();this.lexer.advance(),this.flowLevel++;let t=[];for(;!this.lexer.isAtEnd();){if(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="}"){this.lexer.advance();break}if(this.lexer.getCurrentChar()==="#"){this.lexer.skipToEndOfLine(),this.lexer.advanceLine();continue}let i=this.lexer.savePosition(),o=this.lexer.getCurrentPosition(),s="";if(this.lexer.getCurrentChar()==='"'||this.lexer.getCurrentChar()==="'"){let d=this.lexer.getCurrentChar();for(this.lexer.advance();!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!==""&&this.lexer.getCurrentChar()!==d;)s+=this.lexer.advance();this.lexer.getCurrentChar()===d&&this.lexer.advance()}else for(;!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!==""&&this.lexer.getCurrentChar()!==":";)s+=this.lexer.advance();s=s.trim();let a=this.lexer.getCurrentPosition(),u=pn(s,o,a);this.lexer.skipWhitespace(),this.lexer.getCurrentChar()===":"&&this.lexer.advance(),this.lexer.skipWhitespace();let l=this.parseValue();t.push({key:u,value:l});let p=this.lexer.savePosition();if(i.line===p.line&&i.char===p.char)if(!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!=="")this.lexer.advance();else break;this.lexer.skipWhitespace(),this.lexer.getCurrentChar()===","&&this.lexer.advance()}let r=this.lexer.getCurrentPosition();return this.flowLevel--,jy(t,e,r)}parseBlockArray(e){let t=this.lexer.getCurrentPosition(),r=[];for(;!this.lexer.isAtEnd()&&(this.lexer.moveToNextNonEmptyLine(),!this.lexer.isAtEnd());){let o=this.lexer.getIndentation();if(o<e)break;if(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="-"){this.lexer.advance(),this.lexer.skipWhitespace();let s=this.lexer.getCurrentPosition();if(this.lexer.getCurrentChar()===""||this.lexer.getCurrentChar()==="#")if(this.lexer.advanceLine(),this.lexer.isAtEnd())r.push(pn("",s,s));else{let a=this.lexer.getIndentation();if(a>o)if(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="-"){let u=this.parseBlockArray(a);r.push(u)}else{let u=this.lexer.getCurrentLineText(),l=this.lexer.getCurrentCharNumber(),p=u.substring(l);if(p.includes(":")&&!p.trim().startsWith("#")){let d=this.parseBlockObject(a,this.lexer.getCurrentCharNumber());r.push(d)}else r.push(pn("",s,s))}else r.push(pn("",s,s))}else{let a=this.lexer.getCurrentLineText(),u=this.lexer.getCurrentCharNumber();if(a.substring(u).includes(":")){let d=this.parseBlockObject(s.character,s.character);r.push(d)}else{let d=this.parseValue();for(r.push(d);!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!==""&&this.lexer.getCurrentChar()!=="#";)this.lexer.advance();this.lexer.advanceLine()}}}else break}let i=t;return r.length>0?i=r[r.length-1].end:i=Du(t.line,t.character+1),Gy(r,t,i)}parseBlockObject(e,t){let r=this.lexer.getCurrentPosition(),i=[],o=new Set,s=t!==void 0,a=!0;for(;!this.lexer.isAtEnd()&&((!a||!s)&&this.lexer.moveToNextNonEmptyLine(),a=!1,!this.lexer.isAtEnd());){let l=this.lexer.getIndentation();if(s){if(this.lexer.skipWhitespace(),this.lexer.getCurrentCharNumber()<t)break}else{if(l<e)break;if(l>e){let x=Du(this.lexer.getCurrentLineNumber(),0),I=Du(this.lexer.getCurrentLineNumber(),this.lexer.getCurrentLineText().length);this.addError("Unexpected indentation","indentation",x,I),this.lexer.skipWhitespace()}else this.lexer.skipWhitespace()}let p=this.lexer.getCurrentPosition(),d="";for(;!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!==""&&this.lexer.getCurrentChar()!==":";)d+=this.lexer.advance();d=d.trim();let f=this.lexer.getCurrentPosition(),h=pn(d,p,f);!this.options.allowDuplicateKeys&&o.has(d)&&this.addError(`Duplicate key '${d}'`,"duplicateKey",p,f),o.add(d),this.lexer.getCurrentChar()===":"&&this.lexer.advance(),this.lexer.skipWhitespace();let m,g=this.lexer.getCurrentPosition();if(this.lexer.getCurrentChar()===""||this.lexer.getCurrentChar()==="#")if(this.lexer.advanceLine(),this.lexer.isAtEnd())m=pn("",g,g);else{let x=this.lexer.getIndentation();if(x>l)if(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="-")m=this.parseBlockArray(x);else{let I=this.lexer.getCurrentLineText(),T=this.lexer.getCurrentCharNumber(),b=I.substring(T);b.includes(":")&&!b.trim().startsWith("#")?m=this.parseBlockObject(x):m=this.parseValue()}else!s&&x===l?(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="-"?m=this.parseBlockArray(l):m=pn("",g,g)):m=pn("",g,g)}else{for(m=this.parseValue();!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()!==""&&this.lexer.getCurrentChar()!=="#"&&Hy(this.lexer.getCurrentChar());)this.lexer.advance();this.lexer.getCurrentChar()==="#"&&this.lexer.skipToEndOfLine(),!this.lexer.isAtEnd()&&this.lexer.getCurrentChar()===""&&this.lexer.advanceLine()}i.push({key:h,value:m})}let u=r;return i.length>0&&(u=i[i.length-1].value.end),jy(i,r,u)}parse(){if(!this.lexer.isAtEnd()&&(this.lexer.moveToNextNonEmptyLine(),!this.lexer.isAtEnd()))if(this.lexer.skipWhitespace(),this.lexer.getCurrentChar()==="-"){let e=this.lexer.peek();return e===" "||e==="	"||e===""||e==="#"?this.parseBlockArray(0):this.parseValue()}else{if(this.lexer.getCurrentChar()==="[")return this.parseInlineArray();if(this.lexer.getCurrentChar()==="{")return this.parseInlineObject();{let e=this.lexer.getCurrentLineText(),t=this.lexer.getCurrentCharNumber(),r=e.substring(t),i=!1,o=!1,s="";for(let a=0;a<r.length;a++){let u=r[a];if(!o&&(u==='"'||u==="'"))o=!0,s=u;else if(o&&u===s)o=!1,s="";else if(!o&&u===":"){i=!0;break}else if(!o&&u==="#")break}return i?this.parseBlockObject(0):this.parseValue()}}}};Ht();var pS=/^[\p{L}\d_\-\.]+$/u,Gd=class{constructor(){}parse(e,t){let r=gf(t);if(r.length===0)return new zd(e,void 0,void 0);let i,o,s=0;if(r[0].match(/^---[\s\r\n]*$/)){let a=r.findIndex((l,p)=>p>0&&l.match(/^---[\s\r\n]*$/));a===-1?(a=r.length,s=r.length):s=a+1;let u=new q(2,1,a+1,1);i=new Mh(u,r)}if(s<r.length){let a=new q(s+1,1,r.length+1,1);o=new Uh(a,r,e)}return new zd(e,i,o)}},zd=class{constructor(e,t,r){this.uri=e;this.header=t;this.body=r}},An;(f=>(f.name="name",f.description="description",f.agent="agent",f.mode="mode",f.model="model",f.applyTo="applyTo",f.tools="tools",f.handOffs="handoffs",f.advancedOptions="advancedOptions",f.argumentHint="argument-hint",f.excludeAgent="excludeAgent",f.target="target"))(An||={});var fS;(e=>e.mcpServers="mcp-servers")(fS||={});var Mh=class{constructor(e,t){this.range=e;this.linesWithEOL=t}get _parsedHeader(){if(this._parsed===void 0){let e=[],t=this.linesWithEOL.slice(this.range.startLineNumber-1,this.range.endLineNumber-1).join(""),r=zy(t,e),i=[],o=e.map(s=>({message:s.message,range:this.asRange(s),code:s.code}));if(r)if(r.type!=="object")o.push({message:"Invalid header, expecting <key: value> pairs",range:this.range,code:"INVALID_YAML"});else for(let s of r.properties)i.push({key:s.key.value,range:this.asRange({start:s.key.start,end:s.value.end}),value:this.asValue(s.value)});this._parsed={node:r,attributes:i,errors:o}}return this._parsed}asRange({start:e,end:t}){return new q(this.range.startLineNumber+e.line,e.character+1,this.range.startLineNumber+t.line,t.character+1)}asValue(e){switch(e.type){case"string":return{type:"string",value:e.value,range:this.asRange(e)};case"number":return{type:"number",value:e.value,range:this.asRange(e)};case"boolean":return{type:"boolean",value:e.value,range:this.asRange(e)};case"null":return{type:"null",value:e.value,range:this.asRange(e)};case"array":return{type:"array",items:e.items.map(t=>this.asValue(t)),range:this.asRange(e)};case"object":return{type:"object",properties:e.properties.map(r=>({key:this.asValue(r.key),value:this.asValue(r.value)})),range:this.asRange(e)}}}get attributes(){return this._parsedHeader.attributes}getAttribute(e){return this._parsedHeader.attributes.find(t=>t.key===e)}get errors(){return this._parsedHeader.errors}getStringAttribute(e){let t=this._parsedHeader.attributes.find(r=>r.key===e);if(t?.value.type==="string")return t.value.value}get name(){let e=this.getStringAttribute(An.name);if(e&&pS.test(e))return e}get description(){return this.getStringAttribute(An.description)}get agent(){return this.getStringAttribute(An.agent)??this.getStringAttribute(An.mode)}get model(){return this.getStringAttribute(An.model)}get applyTo(){return this.getStringAttribute(An.applyTo)}get argumentHint(){return this.getStringAttribute(An.argumentHint)}get target(){return this.getStringAttribute(An.target)}get tools(){let e=this._parsedHeader.attributes.find(t=>t.key===An.tools);if(e){if(e.value.type==="array"){let t=[];for(let r of e.value.items)r.type==="string"&&r.value&&t.push(r.value);return t}else if(e.value.type==="object"){let t=[],r=({key:i,value:o})=>{o.type==="boolean"?t.push(i.value):o.type==="object"&&o.properties.forEach(r)};return e.value.properties.forEach(r),t}}}get handOffs(){let e=this._parsedHeader.attributes.find(t=>t.key===An.handOffs);if(e&&e.value.type==="array"){let t=[];for(let r of e.value.items)if(r.type==="object"){let i,o,s,a;for(let u of r.properties)u.key.value==="agent"&&u.value.type==="string"?i=u.value.value:u.key.value==="label"&&u.value.type==="string"?o=u.value.value:u.key.value==="prompt"&&u.value.type==="string"?s=u.value.value:u.key.value==="send"&&u.value.type==="boolean"&&(a=u.value.value);i&&o&&s!==void 0&&t.push({agent:i,label:o,prompt:s,send:a})}return t}}},Uh=class{constructor(e,t,r){this.range=e;this.linesWithEOL=t;this.uri=r}get fileReferences(){return this.getParsedBody().fileReferences}get variableReferences(){return this.getParsedBody().variableReferences}get offset(){return this.getParsedBody().bodyOffset}getParsedBody(){if(this._parsed===void 0){let e=[],t=[],r=[],i=$t.reduce($t.slice(this.linesWithEOL,0,this.range.startLineNumber-1),(o,s)=>s.length+o,0);for(let o=this.range.startLineNumber-1,s=i;o<this.range.endLineNumber-1;o++){let a=this.linesWithEOL[o],u=a.matchAll(/\[(.*?)\]\((.+?)\)/g);for(let d of u){let f=d.index+d[0].length-1,h=d.index+d[0].length-d[2].length-1,m=new q(o+1,h+1,o+1,f+1);t.push({content:d[2],range:m,isMarkdownLink:!0}),e.push(new q(o+1,d.index+1,o+1,d.index+d[0].length+1))}let l=/#file:(?<filePath>[^\s#]+)|#tool:(?<toolName>[\w_\-\.\/]+)/gi,p=a.matchAll(l);for(let d of p){let f=d[0],h=new q(o+1,d.index+1,o+1,d.index+f.length+1);if(e.some(T=>q.areIntersectingOrTouching(T,h)))continue;let m=d.groups?.filePath||d.groups?.toolName;if(!m)continue;let g=d.index+f.length-m.length,x=d.index+f.length,I=new q(o+1,g+1,o+1,x+1);d.groups?.filePath?t.push({content:d.groups?.filePath,range:I,isMarkdownLink:!1}):d.groups?.toolName&&r.push({name:d.groups?.toolName,range:I,offset:s+d.index})}s+=a.length}this._parsed={fileReferences:t.sort((o,s)=>q.compareRangesUsingStarts(o.range,s.range)),variableReferences:r,bodyOffset:i}}return this._parsed}getContent(){return this.linesWithEOL.slice(this.range.startLineNumber-1,this.range.endLineNumber-1).join("")}resolveFilePath(e){try{if(e.startsWith("/"))return this.uri.with({path:e});if(e.match(/^[a-zA-Z]+:\//))return W.parse(e);{let t=O1(this.uri);return Ua(t,e)}}catch{return}}};var Ky=_("IPromptsService"),mS;(r=>(r.prompt="prompt",r.instructions="instructions",r.agent="chatagent"))(mS||={});we();var Gs=class{constructor(e){this.fileService=e}async parseFile(e,t){let r=await this.fileService.readFile(e);if(t.isCancellationRequested)throw new Ne;let i=new TextDecoder().decode(r);return new Gd().parse(e,i)}};Gs=E([v(0,Nt)],Gs);var Jy=_("releaseNotesService");var xi=class{constructor(e,t){this.envService=e;this.fetcherService=t}static{this.BASE_URL="https://code.visualstudio.com/raw"}async fetchLatestReleaseNotes(){let e=this.getUrl();return e?await(await this.fetcherService.fetch(e,{method:"GET"})).text():void 0}async fetchReleaseNotesForVersion(e){let t=this.getUrl(e);return t?await(await this.fetcherService.fetch(t,{method:"GET"})).text():void 0}getUrl(e){let t=e&&e.trim().length>0?e.trim():this.envService.getEditorInfo().version,r,i;if(/^\d+\.\d+(?:\.\d+)?$/.test(t)){let o=wr(t),s=/^(\d+)\.(\d+)$/.exec(o);if(!s)return;r=s[1],i=s[2]}else return;return`${xi.BASE_URL}/v${r}_${i}.md`}};xi=E([v(0,Qe),v(1,Kt)],xi);var Hd=require("vscode");var Jd=_("IRemoteRepositoriesService"),Kd=class{async loadWorkspaceContents(e){return await(await this.getApi()).loadWorkspaceContents?.(e)??!1}getApi(){return this.getRemoteExtension().activate()}getRemoteExtension(){if(this._remoteHub!==void 0)return this._remoteHub;if(this._remoteHub=Hd.extensions.getExtension("ms-vscode.remote-repositories")??Hd.extensions.getExtension("GitHub.remoteHub")??Hd.extensions.getExtension("GitHub.remoteHub-insiders"),this._remoteHub===void 0)throw new Error("No Remote repository extension found.");return this._remoteHub}};var Qy=_("IReviewService");var Oe=Te(require("vscode")),zs=require("vscode");pe();var Xy="puku.chat.reviewDiff.enabled",hS="puku.chat.reviewDiff.enabledRootUris",Bh="puku.chat.review.numberOfComments",Hs=class{constructor(e,t,r,i){this._configurationService=e;this._authenticationService=t;this._contextService=r;this._gitExtensionService=i;this._disposables=new de;this._repositoryDisposables=new de;this._commentController=Oe.comments.createCommentController("github-copilot-review","Code Review");this._comments=[];this._disposables.add(Oe.workspace.onDidChangeConfiguration(o=>{o.affectsConfiguration(xe.CodeFeedback.fullyQualifiedId)&&Oe.commands.executeCommand("setContext",xe.CodeFeedback.fullyQualifiedId,this.isCodeFeedbackEnabled()),(o.affectsConfiguration("puku.advanced")||o.affectsConfiguration("puku.advanced.review.intent"))&&Oe.commands.executeCommand("setContext",xe.AdvancedExperimental.ReviewIntent.fullyQualifiedId,this.isIntentEnabled())})),this._disposables.add(this._authenticationService.onDidAuthenticationChange(()=>{Oe.commands.executeCommand("setContext",Xy,this.isReviewDiffEnabled())})),this._disposables.add(this._repositoryDisposables),this._disposables.add(this._gitExtensionService.onDidChange(()=>{this.updateRepositoryListeners()})),this.updateRepositoryListeners(),this.updateContextValues(),Oe.commands.executeCommand("setContext",Bh,0)}updateRepositoryListeners(){this._repositoryDisposables.clear();let e=this._gitExtensionService.getExtensionApi();e&&(this._repositoryDisposables.add(e.onDidOpenRepository(()=>{this.updateRepositoryListeners()})),this._repositoryDisposables.add(e.onDidCloseRepository(()=>{this.updateRepositoryListeners()})),e.repositories.forEach(t=>{this._repositoryDisposables.add(t.state.onDidChange(()=>{this.updateReviewDiffReposContext()}))})),this.updateReviewDiffReposContext()}updateReviewDiffReposContext(){let e=this.getRepositoriesWithUncommitedChanges(),t=e.map(r=>r.toString()).sort().join(",");t!==this._reviewDiffReposString&&(this._reviewDiffReposString=t,Oe.commands.executeCommand("setContext",hS,e))}getRepositoriesWithUncommitedChanges(){return this._gitExtensionService.getExtensionApi()?.repositories.filter(({state:t})=>t.workingTreeChanges.length||t.indexChanges.length||t.untrackedChanges.length||t.mergeChanges.length).map(t=>t.rootUri)||[]}updateContextValues(){Oe.commands.executeCommand("setContext",xe.CodeFeedback.fullyQualifiedId,this.isCodeFeedbackEnabled()),Oe.commands.executeCommand("setContext",Xy,this.isReviewDiffEnabled()),Oe.commands.executeCommand("setContext",xe.AdvancedExperimental.ReviewIntent.fullyQualifiedId,this.isIntentEnabled())}isCodeFeedbackEnabled(){let e=this._configurationService.inspectConfig(xe.CodeFeedback);return e?.workspaceFolderValue??e?.workspaceValue??e?.globalValue??this._configurationService.getDefaultValue(xe.CodeFeedback)}isReviewDiffEnabled(){return this._configurationService.getConfig(xe.ReviewAgent)&&this._authenticationService.copilotToken?.isCopilotCodeReviewEnabled||!1}isIntentEnabled(){return this._configurationService.getConfig(xe.AdvancedExperimental.ReviewIntent)}getDiagnosticCollection(){return this._diagnosticCollection||this._disposables.add(this._diagnosticCollection=Oe.languages.createDiagnosticCollection("puku.chat.review"))}getReviewComments(){return this._comments.map(({comment:e})=>e)}addReviewComments(e){for(let t of e){let r=this._commentController.createCommentThread(t.uri,t.range,this.createUIComments(t));r.contextValue="hasNoSuggestion",r.canReply=!1,this._comments.find(i=>i.comment.uri.toString()===t.uri.toString())||(r.collapsibleState=Oe.CommentThreadCollapsibleState.Expanded),this._comments.push({comment:t,thread:r}),this.updateThreadLabels(),this._comments.length===1&&(Oe.commands.executeCommand("puku.chat.review.next"),this._monitorActiveThread=setInterval(()=>{let i=this._commentController.activeCommentThread,o=i&&this._comments.find(s=>s.thread.label===i.label)?.thread;o!==this._activeThread&&(this._activeThread=o,o&&Oe.commands.executeCommand("puku.chat.review.current",o))},500))}Oe.commands.executeCommand("setContext",Bh,this._comments.length)}updateReviewComment(e){let t=this.findCommentThread(e);t&&(t.comments=this.createUIComments(e))}createUIComments(e){let r=e.suggestion?"edits"in e.suggestion?e.suggestion.edits.length?`

***
${zs.l10n.t("Suggested change:")}${e.suggestion.edits.map(o=>`
\`\`\`diff
${gS(o)}
\`\`\``).join("")}
***`:`

${zs.l10n.t("No change found to suggest.")}`:`

${zs.l10n.t("Looking up change to suggest...")}`:"";return[{body:typeof e.body=="string"?`${e.body}${r}`:new Oe.MarkdownString(`${e.body.value}${r}`),mode:Oe.CommentMode.Preview,author:{name:zs.l10n.t("Code Review"),iconPath:W.joinPath(this._contextService.extensionUri,"assets","copilot.png")}}]}collapseReviewComment(e){let t=this._comments.find(o=>o.comment===e);if(!t)return;let r=t.thread;r.dispose();let i=this._commentController.createCommentThread(e.uri,e.range,r.comments);i.contextValue=r.contextValue,i.canReply=!1,i.label=r.label,t.thread=i}removeReviewComments(e){for(let t of e){let r=this._comments.findIndex(i=>i.comment===t);r!==-1&&(this._comments[r].thread.dispose(),this._comments.splice(r,1))}this.updateThreadLabels(),this._comments.length===0&&this._monitorActiveThread&&(clearInterval(this._monitorActiveThread),this._monitorActiveThread=void 0),Oe.commands.executeCommand("setContext",Bh,this._comments.length)}updateThreadLabels(){this._comments.forEach((e,t)=>{e.thread.label=zs.l10n.t("Comment {0} of {1}",t+1,this._comments.length)})}findReviewComment(e){return this._comments.find(r=>r.thread===e||r.thread.comments[0]===e)?.comment}findCommentThread(e){return this._comments.find(r=>r.comment===e)?.thread}dispose(){this._disposables.dispose()}};Hs=E([v(0,et),v(1,ln),v(2,Ge),v(3,Os)],Hs);function gS(n){let e=n.oldText.split(/\r?\n/),t=n.newText.split(/\r?\n/);for(;e.length&&t.length&&e[0]===t[0];)e.shift(),t.shift();for(;e.length&&t.length&&e[e.length-1]===t[t.length-1];)e.pop(),t.pop();return`${e.map(r=>`- ${r}`).join(`
`)}
${t.map(r=>`+ ${r}`).join(`
`)}`}var Yy=_("ISimulationTestContext"),Qd=class{constructor(){this.isInSimulationTests=!1}async writeFile(e,t,r){return""}};var Zy=_("ISnippyService");Ai();var Au=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Xd=65;function bS(n){let e=0,t;Au.lastIndex=0;do if(t=Au.exec(n),t&&(e+=1),e>=Xd)break;while(t);return e}function vS(n,e){let t=0,r;Au.lastIndex=0;do if(r=Au.exec(n),r&&(t+=1,t>=e))return Au.lastIndex;while(r);return n.length}function e2(n,e){let t=n.split("").reverse().join(""),r=vS(t,e);return t.length-r}function Vh(n){return bS(n)>=Xd}we();var Ks;(r=>{function n(i){return new qh(i)}r.ok=n;function e(i){return new $h(i)}r.error=e;function t(i){return r.error(new Error(i))}r.fromString=t})(Ks||={});var qh=class n{constructor(e){this.val=e}map(e){return new n(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},$h=class{constructor(e){this.err=e}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};var t2;(e=>{function n(t){return typeof t=="object"&&t!==null&&typeof t.matched_source=="string"&&typeof t.occurrences=="string"&&typeof t.capped=="boolean"&&typeof t.cursor=="string"&&typeof t.github_url=="string"}e.is=n})(t2||={});var Wh;(e=>{function n(t){return typeof t=="object"&&t!==null&&typeof t.kind=="string"&&typeof t.reason=="string"&&typeof t.code=="number"&&typeof t.msg=="string"}e.is=n})(Wh||={});var n2;(e=>{function n(t){return typeof t=="object"&&t!==null&&"snippets"in t&&Array.isArray(t.snippets)&&t.snippets.every(t2.is)}e.is=n})(n2||={});var jh;(e=>{function n(t){if(Wh.is(t))return Ks.error(t);if(n2.is(t))return Ks.ok(t)}e.to=n})(jh||={});var r2;(e=>{function n(t){return typeof t=="object"&&t!==null&&typeof t.commit_id=="string"&&typeof t.license=="string"&&typeof t.nwo=="string"&&typeof t.path=="string"&&typeof t.url=="string"}e.is=n})(r2||={});var i2;(e=>{function n(t){return typeof t=="object"&&t!==null&&typeof t.has_next_page=="boolean"&&typeof t.cursor=="string"}e.is=n})(i2||={});var o2;(e=>{function n(t){return typeof t=="object"&&t!==null&&typeof t.count=="object"&&Object.values(t.count).every(r=>typeof r=="string")}e.is=n})(o2||={});var s2;(e=>{function n(t){return typeof t=="object"&&t!==null&&"file_matches"in t&&Array.isArray(t.file_matches)&&t.file_matches.every(r2.is)&&"page_info"in t&&i2.is(t.page_info)&&"license_stats"in t&&o2.is(t.license_stats)}e.is=n})(s2||={});var Gh;(e=>{function n(t){if(Wh.is(t))return Ks.error(t);if(s2.is(t))return Ks.ok(t)}e.to=n})(Gh||={});var Js=class{constructor(e,t,r){this.fetcherService=e;this.capiClientService=t;this.authService=r}async fetchMatch(e,t){let r={source:e};return this.fetch({type:"SnippyMatch"},r,jh.to,t)}async fetchFilesForMatch(e,t){let r={cursor:e};return this.fetch({type:"SnippyFlesForMatch"},r,Gh.to,t)}async fetch(e,t,r,i){let o=this.fetcherService.makeAbortController(),s=i.onCancellationRequested(()=>{o.abort()}),a=o.signal,l={method:"POST",headers:await this.getHeaders(),json:t,signal:a},p;try{p=await this.capiClientService.makeRequest(l,e)}catch(f){throw this.fetcherService.isAbortError(f)?new Ne:f}finally{s.dispose()}if(p.status!==200)throw new Error(`Failed with status ${p.status} and body: ${await p.text()}`);let d=await p.json();return r(d)}async getHeaders(){return{authorization:`Bearer ${(await this.authService.getCopilotToken()).token}`}}};Js=E([v(0,Kt),v(1,ii),v(2,ln)],Js);var Bt=class{constructor(e,t,r,i){this.notificationService=e;this.context=t;this.logService=r;this.envService=i}static{this.matchCodeMessage="We found a reference to public code in a recent suggestion. To learn more about public code references, review the [documentation](https://aka.ms/github-copilot-match-public-code)."}static{this.MatchAction="View Reference"}static{this.SettingAction="Change Setting"}static{this.CodeReferenceKey="copilot.chat.codeReference.notified"}notify(){if(this.context.globalState.get(Bt.CodeReferenceKey))return;let t=[Bt.MatchAction,Bt.SettingAction];this.notificationService.showInformationMessage(Bt.matchCodeMessage,...t).then(r=>{switch(r){case Bt.MatchAction:{this.logService.show(!0);break}case Bt.SettingAction:{this.envService.openExternal(W.parse("https://aka.ms/github-copilot-settings"));break}case void 0:break}}),this.context.globalState.update(Bt.CodeReferenceKey,!0)}};Bt=E([v(0,Vd),v(1,Ge),v(2,Z),v(3,Qe)],Bt);var Qs=class{constructor(e,t){this.instantiationService=e;this.logService=t;this.notifier=this.instantiationService.createInstance(Bt),this.fetcher=this.instantiationService.createInstance(Js)}async handlePostInsertion(e,t,r){let i=this.computeSourceToCheck(t,r);if(!i)return;let o;try{o=await this.fetcher.fetchMatch(i.source,rr.None)}catch{console.warn("[Snippy] Service unavailable, skipping match check");return}if(!o)throw new Error(`Failed to parse match response: ${o}`);if(o.isError())throw new Error(`Failed to match: ${o.err}`);if(o.val.snippets.length===0)return;let{snippets:s}=o.val,a=s.map(async p=>{let d=await this.fetcher.fetchFilesForMatch(p.cursor,rr.None);if(!d||d.isError())return;let{file_matches:f,license_stats:h}=d.val;return{match:p,files:f,licenseStats:h}});this.notifier.notify();let l=(await Promise.all(a)).filter(p=>!!p);if(l.length!==0)for(let p of l){let d=new Set(Object.keys(p.licenseStats?.count??{}));d.delete("NOASSERTION")&&d.add("unknown");let f=Array.from(d).sort(),h=`[Ln ${i.startPosition.lineNumber}, Col ${i.startPosition.column}]`,m=`${p.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`;this.logService.info(["[CODE REFERENCING]",e,`Similar code with ${TS(f.length,"license type")}`,`[${f.join(", ")}]`,`${p.match.github_url.replace(/,\s*$/,"")}&editor=vscode`,h,m].join(" "))}}computeSourceToCheck(e,t){if(t.newText==="")return;let r=oe.single(t),o=r.getNewRanges().reduce((d,f)=>d.join(f)),s=r.applyOnText(e),a=o.start,u=s.value.substring(o.start,o.endExclusive);if(!Vh(u)){let d=s.value.slice(0,o.start),f=e2(d,Xd);a=f,u=s.value.slice(f,o.start+t.newText.length)}if(!Vh(u))return;let p=s.getTransformer().getPosition(a);return{source:u,startPosition:p}}};Qs=E([v(0,_e),v(1,Z)],Qs);var TS=(n,e,t="s")=>`${n} ${e}${n!==1?t:""}`;var a2=_("ISurveyService");var Yd=Te(require("vscode")),Pu=require("vscode");var _S="https://aka.ms/vscode-gh-copilot",u2="survey.usage",l2="survey.nextSurveyDate",zh=336*60*60*1e3,kS=7,IS=90,wS=180*1e3,CS=300*1e3,ES=2,SS=2,RS=20,DS=1,Xs=class{constructor(e,t,r,i,o){this.telemetryService=e;this.vscodeExtensionContext=t;this.envService=r;this.experimentationService=i;this.authenticationService=o;this.debounceTimeout=null;this.lastSource=null;this.lastLanguageId=null;this.surveyUri=Xa.parse(_S),this.sessionSeed=Math.random(),setTimeout(async()=>{await this.updateUsageData(!1),await this.checkInactiveUserHeuristic()&&this.promptSurvey("churn")},CS)}async signalUsage(e,t){await this.updateUsageData(!0),this.lastSource=e,t&&(this.lastLanguageId=t),this.debounceTimeout||(this.debounceTimeout=setTimeout(async()=>{await this.checkEligibility()&&this.promptSurvey("usage"),this.debounceTimeout=null},wS))}async checkInactiveUserHeuristic(){let e=await this.getUsageData(),t=await this.getNextSurveyDate(),r=Date.now(),i=e.activeDays.length,o=e.firstActive>0&&e.firstActive<r-zh,s=!t||t<r;if(i===0&&o&&s){let l=this.experimentationService.getTreatmentVariable("copilotchat.feedback.sessionProbability.inactive")??DS;return this.sessionSeed<l/100}return!1}async checkEligibility(){let e=await this.getUsageData(),t=await this.getNextSurveyDate(),r=Date.now(),i=e.activeDays.length,o=e.firstActive<r-zh,s=!t||t<r;if(i>=ES&&o&&s){let l=this.experimentationService.getTreatmentVariable("copilotchat.feedback.sessionProbability")??SS;if(this.sessionSeed<l/100){let p=this.experimentationService.getTreatmentVariable("copilotchat.feedback.notificationProbability")??RS;return Math.random()<p/100}}return!1}async getUsageData(){let e=this.vscodeExtensionContext.globalState.get(u2);return e||{firstActive:0,activeDays:[]}}async getNextSurveyDate(){return this.vscodeExtensionContext.globalState.get(l2)??null}async updateUsageData(e){let t=await this.getUsageData(),r=Date.now();if(e){t.firstActive||(t.firstActive=r);let i=new Date().setHours(0,0,0,0);t.activeDays.includes(i)||t.activeDays.push(i)}t.activeDays=t.activeDays.filter(i=>i>=r-zh),await this.vscodeExtensionContext.globalState.update(u2,t)}async updateNextSurveyDate(e){await this.vscodeExtensionContext.globalState.update(l2,Date.now()+e*24*60*60*1e3)}async promptSurvey(e){let t=await this.getUsageData(),r=this.lastSource||"",i=this.lastLanguageId||"",o=Math.floor((Date.now()-t.firstActive)/(1e3*60*60*24));this.telemetryService.sendMSFTTelemetryEvent("survey.show",{source:r,language:i,surveyType:e},{activeDays:t.activeDays.length,firstActive:o}),await this.updateNextSurveyDate(IS);let s=Pu.l10n.t("Give Feedback"),a=Pu.l10n.t("Later"),u=Pu.l10n.t("Skip");Yd.window.showInformationMessage(Pu.l10n.t("Got a minute? Help us make GitHub Copilot better."),s,a,u).then(async l=>{let p=l===s,d=l===a;if(this.telemetryService.sendMSFTTelemetryEvent("survey.action",{source:r,language:i,selection:p?"accepted":d?"postponed":"skipped",surveyType:e}),p){let f=await this.authenticationService.getCopilotToken(),h={m:this.envService.machineId,s:this.envService.sessionId,k:f.sku??"",d:t.activeDays.length.toString(),f:o.toString(),v:this.envService.getVersion(),l:i,src:r,type:e},m=this.surveyUri.with({query:new URLSearchParams(h).toString()});Yd.env.openExternal(m)}else d&&await this.updateNextSurveyDate(kS)})}};Xs=E([v(0,ge),v(1,Ge),v(2,Qe),v(3,gt),v(4,ln)],Xs);var c2=_("ITabsAndEditorsService");var ot=Te(require("vscode"));Wt();pe();gn();var Zd=class{constructor(){this._store=new de;this._tabGroupsUseInfo=new Map;this._tabClock=0;this.onDidChangeActiveTextEditor=ot.window.onDidChangeActiveTextEditor;this._onDidChangeTabs=this._store.add(new se);this.onDidChangeTabs=this._onDidChangeTabs.event;let e=()=>this._tabGroupsUseInfo.set(ot.window.tabGroups.activeTabGroup,this._tabClock++);e(),this._store.add(ot.window.tabGroups.onDidChangeTabGroups(t=>{t.closed.forEach(r=>this._tabGroupsUseInfo.delete(r)),e()})),this._store.add(ot.window.tabGroups.onDidChangeTabs(t=>{this._onDidChangeTabs.fire({changed:t.changed.map(r=>this._asTabInfo(r)),closed:t.closed.map(r=>this._asTabInfo(r)),opened:t.opened.map(r=>this._asTabInfo(r))})}))}dispose(){this._store.dispose()}get activeTextEditor(){let e=ot.window.activeTextEditor;if(e&&e.document.uri.scheme!=="output")return e;let t=new hn;ot.window.visibleTextEditors.forEach(i=>t.set(i.document.uri,i));let r=[...this._tabGroupsUseInfo];r.sort((i,o)=>o[1]-i[1]);for(let[i]of r)if(i.activeTab){let o=this._asTabInfo(i.activeTab);if(o.uri&&t.has(o.uri))return t.get(o.uri)}}get visibleTextEditors(){return ot.window.visibleTextEditors}get activeNotebookEditor(){return ot.window.activeNotebookEditor}get visibleNotebookEditors(){return ot.window.visibleNotebookEditors}get tabs(){return ot.window.tabGroups.all.flatMap(e=>e.tabs).map(this._asTabInfo,this)}_asTabInfo(e){let t;return e.input instanceof ot.TabInputText||e.input instanceof ot.TabInputNotebook?t=e.input.uri:(e.input instanceof ot.TabInputTextDiff||e.input instanceof ot.TabInputNotebookDiff)&&(t=e.input.modified),{tab:e,uri:t}}};var d2=_("ITasksService");var He=Te(require("vscode"));we();pe();Ht();var Ys=class extends de{constructor(t,r,i,o){super();this.workspaceService=t;this.fileSystemService=r;this.languageDiagnosticsService=i;this.logService=o;this.latestTerminalForTaskDefinition=new Map;this.add(He.tasks.onDidStartTask(s=>{let a=s.execution.terminal;if(!a)return;this.latestTerminalForTaskDefinition.set(s.execution.task.definition,a);let u=He.window.onDidCloseTerminal(p=>{p===a&&this.latestTerminalForTaskDefinition.has(s.execution.task.definition)&&(this.latestTerminalForTaskDefinition.delete(s.execution.task.definition),u.dispose())});this.add(u);let l=He.tasks.onDidEndTask(p=>{p.execution.task.definition===s.execution.task.definition&&(u.dispose(),l.dispose())});this.add(l)}))}getTasksFromConfig(t){return He.workspace.getConfiguration("tasks",t).get("tasks")||[]}matchesTask(t,r){return t.type===r.type&&t.label===r.label}hasTask(t,r){return this.getTasksFromConfig(t).some(o=>this.matchesTask(o,r))}getTerminalForTask(t){for(let[r,i]of this.latestTerminalForTaskDefinition.entries()){if(r.id&&this._getTaskId(t)===r.id||t.type===r.type&&(r.label||r.script||r.command)&&(!r.label||t.label===r.label)&&(!r.script||t.script===r.script)&&(!r.command||t.command===r.command))return i;this.logService.debug(`getTerminalForTask: no terminal found for task definition: ${JSON.stringify(t)} matching ${JSON.stringify(r)}`),this.logService.debug(`getTerminalForTask: current stored terminals: ${[...this.latestTerminalForTaskDefinition.values()].map(o=>o.name).join(", ")}`)}}_getTaskId(t){if(!(!t.type||t.command===void 0&&t.script===void 0))return t.type+","+(t.command??t.script)+","}async getTaskConfigPosition(t,r){let i=this.getTasksFromConfig(t).findIndex(p=>this.matchesTask(p,r));if(i===-1)return;let o=W.joinPath(t,".vscode","tasks.json"),s;try{let p=await this.fileSystemService.readFile(o);s=new TextDecoder().decode(p)}catch{return}let a=pv(s);if(!a)return;let u=fv(a,["tasks",i]);if(!u)return;let l=new _n(s);return{uri:o,range:q.fromPositions(l.offsetToPosition(u.offset),l.offsetToPosition(u.offset+u.length))}}async ensureTask(t,r,i){let o=this.getTasksFromConfig(t);if(o.some(a=>this.matchesTask(a,r)))return;await He.workspace.getConfiguration("tasks",t).update("tasks",i?[r]:[...o,r],He.ConfigurationTarget.WorkspaceFolder)}isTaskActive(t){let r=He.tasks.taskExecutions;for(let i of r)if(i.task.definition.type===t.type&&i.task.name===t.label)return!0;return!1}getTasks(t){return t?this.getTasksFromConfig(t):this.workspaceService.getWorkspaceFolders().map(r=>[r,this.getTasksFromConfig(r)]).filter(([,r])=>r.length>0)}async getBestMatchingContributedTask(t){let r=await He.tasks.fetchTasks({type:t?.type}),i,o=-1;return r.forEach(s=>{let a=0;for(let[u,l]of Object.entries(s.definition)){if(!jr(t[u],l))return;a++}a>o&&(i=s,o=a)}),i}async executeTask(t,r,i){let o=new de;try{let s=await this.getBestMatchingContributedTask(t);if(r.isCancellationRequested)throw new Ne;return await new Promise(a=>{let u;o.add(He.tasks.onDidEndTaskProcess(f=>{f.execution.task===s&&(u=f.exitCode)})),o.add(He.tasks.onDidEndTask(f=>{f.execution.task===s&&a(u!==void 0&&u!==0?{status:"error",error:new Error(`Task exited with code ${u}`)}:{status:"finished"})}));let l=!1,p;function d(){a({status:"error",error:new Ne}),!l&&p&&p.terminate()}if(t.isBackground||o.add(r.onCancellationRequested(d)),s){let f=He.tasks.taskExecutions.find(h=>jr(h.task.definition,s.definition));l=!!f,Promise.resolve(f||He.tasks.executeTask(s)).then(h=>{if(p=h,r.isCancellationRequested)d();else if(s.isBackground){let m=!1;o.add(He.tasks.onDidEndTaskProblemMatchers(async g=>{if(m=!0,g.execution.task===s)if(g.hasErrors){let x=[];i&&(x=this.languageDiagnosticsService.getAllDiagnostics().map(I=>I[0]+" "+I[1].map(T=>T.message).join(", "))),a({status:"error",error:new Error("Task exited with errors in the following files: "+x.join(", "))})}else a({status:"finished"})})),setTimeout(()=>{m||a({status:"started"})},s?.isBackground&&s.problemMatchers.length?1e4:0)}else a({status:"started"})},h=>a({status:"error",error:h}))}else He.commands.executeCommand("workbench.action.tasks.runTask",t.label||t),o.add(He.tasks.onDidStartTask(f=>{s=f.execution.task,a({status:"started"})})),o.add(He.tasks.onDidEndTask(f=>{f.execution.task.name===t.label&&a(u!==void 0&&u!==0?{status:"error",error:new Error(`Task exited with code ${u}`)}:{status:"finished"})}))})}finally{o.dispose()}}};Ys=E([v(0,rt),v(1,Nt),v(2,Pd),v(3,Z)],Ys);Wt();pe();var f2=_("ITerminalService");var p2=class n extends K{constructor(){super(...arguments);this._onDidWriteTerminalData=this._register(new se);this.onDidWriteTerminalData=this._onDidWriteTerminalData.event;this._onDidChangeTerminalShellIntegration=this._register(new se);this.onDidChangeTerminalShellIntegration=this._onDidChangeTerminalShellIntegration.event;this._onDidEndTerminalShellExecution=this._register(new se);this.onDidEndTerminalShellExecution=this._onDidEndTerminalShellExecution.event;this._onDidCloseTerminal=this._register(new se);this.onDidCloseTerminal=this._onDidCloseTerminal.event}static{this.Instance=new n}get terminalBuffer(){return""}get terminalLastCommand(){}get terminalSelection(){return""}get terminalShellType(){return""}async getCwdForSession(t){return Promise.resolve(void 0)}async getCopilotTerminals(t){return Promise.resolve([])}getTerminalsWithSessionInfo(){throw new Error("Method not implemented.")}getToolTerminalForSession(t){throw new Error("Method not implemented.")}async associateTerminalWithSession(t,r,i){Promise.resolve()}createTerminal(t,r,i){return{}}get terminals(){return[]}getBufferForTerminal(t,r){return""}getBufferWithPid(t,r){return Promise.resolve("")}getLastCommandForTerminal(t){}contributePath(t,r,i,o){}removePathContribution(t){}};var vo=require("vscode");wt();pe();var Pn=require("vscode");Je();var Lu=new Map,ep=new Map;function h2(){let n=Pn.window.activeTerminal;return n===void 0?"":Lu.get(n)?.join("")||""}function g2(n,e=16e3){if(!n)return"";let t=Lu.get(n);if(!t)return"";let r=t.join(""),i=Math.max(0,r.length-e);return r.slice(i)}function b2(n){return ep.get(n)?.at(-1)}function v2(){let n=Pn.window.activeTerminal;if(n!==void 0)return ep.get(n)?.at(-1)}function x2(){try{return Pn.window.activeTerminal?.selection??""}catch{return""}}var Ou;function y2(){let n=Pn.window.activeTerminal;if(n?.state.shell)return n.state.shell;if(n&&"shellPath"in n.creationOptions){let e=n.creationOptions.shellPath;if(e){let t,r=bn(e);if(r==="bash.exe")t="Git Bash";else{let i=r.replace(/\..+/,"");switch(i){case"pwsh":case"powershell":t="powershell";break;case"":break;default:t=i}}if(t)return Ou=t,t}}return Ou||(ll==="win32"?"powershell":"bash")}function m2(n,e){n.push(e),n.length>40&&n.shift()}function T2(){return[Pn.window.onDidChangeTerminalState(n=>{if(Pn.window.activeTerminal&&n.processId===Pn.window.activeTerminal.processId){let e=n.state.shell;e&&e!==Ou&&(Ou=e)}}),Pn.window.onDidWriteTerminalData(n=>{let e=Lu.get(n.terminal);e||(e=[],Lu.set(n.terminal,e)),m2(e,La(n.data))}),Pn.window.onDidExecuteTerminalCommand(n=>{let e=ep.get(n.terminal);e||(e=[],ep.set(n.terminal,e)),m2(e,n)}),Pn.window.onDidCloseTerminal(n=>{Lu.delete(n)})]}var Zs=class extends K{constructor(t){super();this.context=t;this.pathContributions=new Map;this.context.environmentVariableCollection.delete("GH_TOKEN");for(let r of T2())this._register(r)}get terminals(){return vo.window.terminals}get onDidChangeTerminalShellIntegration(){return vo.window.onDidChangeTerminalShellIntegration}get onDidEndTerminalShellExecution(){return vo.window.onDidEndTerminalShellExecution}get onDidCloseTerminal(){return vo.window.onDidCloseTerminal}get onDidWriteTerminalData(){return vo.window.onDidWriteTerminalData}createTerminal(t,r,i){return vo.window.createTerminal(t,r,i)}getBufferForTerminal(t,r){return g2(t,r)}async getBufferWithPid(t,r){let i;for(let o of this.terminals)if(await o.processId===t){i=o;break}return i?this.getBufferForTerminal(i,r):""}getLastCommandForTerminal(t){return b2(t)}get terminalBuffer(){return h2()}get terminalLastCommand(){return v2()}get terminalSelection(){return x2()}get terminalShellType(){return y2()}contributePath(t,r,i,o=!1){this.pathContributions.set(t,{path:r,description:i,prepend:o}),this.updateEnvironmentPath()}removePathContribution(t){this.pathContributions.delete(t),this.updateEnvironmentPath()}updateEnvironmentPath(){let t="PATH";if(this.context.environmentVariableCollection.delete(t),this.pathContributions.size===0)return;let r=Ri(Array.from(this.pathContributions.values()).map(l=>l.description&&typeof l.description=="string"?l.description:void 0).filter(l=>l)),i="";r.length===1?i=r[0]:r.length>1&&(i=`${r.slice(0,-1).join(", ")} ${Pr("and")} ${r[r.length-1]}`);let o=Ri(Array.from(this.pathContributions.values()).map(l=>l.description&&typeof l.description!="string"?`\`${l.description.command}\``:void 0).filter(l=>l)),s="";if(o.length===1)s=Pr("Enables use of {0} command in the terminal",o[0]);else if(o.length>1){let l=`${o.slice(0,-1).join(", ")} ${Pr("and")} ${o[o.length-1]}`;s=Pr("Enables use of {0} commands in the terminal",l)}let a=[i,s].filter(l=>l).join(" and ");this.context.environmentVariableCollection.description=a||"Enables additional commands in the terminal.";let u=Array.from(this.pathContributions.values()).map(l=>l.path);if(Array.from(this.pathContributions.values()).some(l=>l.prepend)){let l=u.join(Ra)+Ra;this.context.environmentVariableCollection.prepend(t,l)}else{let l=Ra+u.join(Ra);this.context.environmentVariableCollection.append(t,l)}}};Zs=E([v(0,Ge)],Zs);var _2=_("ITestProvider");var tt=Te(require("vscode"));Nr();Po();pe();gn();var tp=class extends K{constructor(){super();this.resultsDocs=new hn;this._register(tt.tests.onDidChangeTestResults(()=>this.setHasFailureContextKey())),this.setHasFailureContextKey()}setHasFailureContextKey(){tt.commands.executeCommand("setContext","puku.chat.fixTestFailures.hasFailure",!!$t.first(this.getAllFailures()))}get onDidChangeResults(){return tt.tests.onDidChangeTestResults}get lastResultsFrom(){return tt.tests.testResults.find(t=>t.completedAt&&t.results.length)?.completedAt}getAllFailures(){let t=tt.tests.testResults.find(r=>r.results.length);return t?this.dfsFailures(t.results):$t.empty()}getLastFailureFor(t){let r=[];for(let i=t;i;i=i.parent)r.push(i.id);r.reverse();for(let i of tt.tests.testResults)for(let o of i.results){let s=o;for(let u of r)if(s=s.children.find(l=>l.id===u),!s)break;let a=s?.taskStates.find(u=>u.state===tt.TestResultState.Failed||u.state===tt.TestResultState.Errored);if(a&&s)return{snapshot:s,task:a}}}getFailureAtPosition(t,r){let i=tt.tests.testResults.find(a=>a.results.length);if(this.resultsDocsAreForTestRun!==i&&this.makeResultsDocs(i),!i)return;let o=this.resultsDocs.get(t)||[],s=Ei(o,a=>!!a.range&&a.range.start.line<=r.line);if(s){for(let a of s.taskStates)if(a.state===tt.TestResultState.Failed||a.state===tt.TestResultState.Errored)return{snapshot:s,task:a}}}async hasAnyTests(){return!!(await tt.commands.executeCommand("vscode.testing.getControllersWithTests")).length}async hasTestsInUri(t){try{return!!(await tt.commands.executeCommand("vscode.testing.getTestsInFile",t)).length}catch{return!1}}*dfsFailures(t){for(let r of t){yield*this.dfsFailures(r.children);for(let i of r.taskStates)(i.state===tt.TestResultState.Failed||i.state===tt.TestResultState.Errored)&&(yield{snapshot:r,task:i})}}makeResultsDocs(t){if(this.resultsDocs.clear(),this.resultsDocsAreForTestRun=t,!t)return;let r=[t.results];for(;r.length;)for(let o of r.pop()){if(r.push(o.children),!o.uri)continue;let s=this.resultsDocs.get(o.uri);s?s.push(o):this.resultsDocs.set(o.uri,[o])}let i=new tt.Range(0,0,0,0);for(let o of this.resultsDocs.values())o.sort((s,a)=>(s.range||i).start.compareTo((a.range||i).start)||AS(s.taskStates,a.taskStates))}},AS=(n,e)=>{let t=0,r=0;for(let i of n)t=Math.max(t,i.state);for(let i of e)r=Math.max(r,i.state);return t-r};var Nu=Te(require("vscode")),np=class{getAllExtensions(){return Nu.extensions.all}async getAllCommands(e){return Nu.commands.executeCommand("_getAllCommands",e)}async getAllSettings(){return Nu.commands.executeCommand("_getAllSettings")}};var Ue=require("vscode");function k2(n){return n.scheme==="vscode-vfs"&&n.authority.startsWith("github")}var ea=class extends Rc{constructor(t,r){super();this._logService=t;this._remoteRepositoriesService=r;this.onDidOpenTextDocument=Ue.workspace.onDidOpenTextDocument;this.onDidChangeTextDocument=Ue.workspace.onDidChangeTextDocument;this.onDidOpenNotebookDocument=Ue.workspace.onDidOpenNotebookDocument;this.onDidCloseNotebookDocument=Ue.workspace.onDidCloseNotebookDocument;this.onDidCloseTextDocument=Ue.workspace.onDidCloseTextDocument;this.onDidChangeWorkspaceFolders=Ue.workspace.onDidChangeWorkspaceFolders;this.onDidChangeNotebookDocument=Ue.workspace.onDidChangeNotebookDocument;this.onDidChangeTextEditorSelection=Ue.window.onDidChangeTextEditorSelection}get textDocuments(){return Ue.workspace.textDocuments}async openTextDocument(t){return await Ue.workspace.openTextDocument(t)}get fs(){return Ue.workspace.fs}async showTextDocument(t){await Ue.window.showTextDocument(t)}async openNotebookDocument(t,r){return typeof t=="string"?await Ue.workspace.openNotebookDocument(t,r):Xi(t,Ue.workspace.notebookDocuments)||await Ue.workspace.openNotebookDocument(t)}get notebookDocuments(){return Ue.workspace.notebookDocuments}getWorkspaceFolders(){return Ue.workspace.workspaceFolders?.map(t=>t.uri)??[]}getWorkspaceFolderName(t){let r=Ue.workspace.getWorkspaceFolder(t);return r?r.name:""}asRelativePath(t,r){return Ue.workspace.asRelativePath(t,r)}applyEdit(t){return Ue.workspace.applyEdit(t)}ensureWorkspaceIsFullyLoaded(){return this._fullyLoadedPromise??=(async()=>{for(let t of this.getWorkspaceFolders())if(k2(t)){this._logService.debug(`Preloading virtual workspace contents for ${t}`);try{let r=await this._remoteRepositoriesService.loadWorkspaceContents(t);this._logService.info(`loading virtual workspace contents resulted in ${r} for: ${t}`)}catch(r){this._logService.error(`Error loading virtual workspace contents for ${t}: ${r}`)}}})(),this._fullyLoadedPromise}async showWorkspaceFolderPicker(){if(this.getWorkspaceFolders())return Ue.window.showWorkspaceFolderPick()}};ea=E([v(0,Z),v(1,Jd)],ea);var I2=_("IMergeConflictService");var rp=Te(require("vscode"));pe();var Jn=Te(require("vscode")),Hh="<<<<<<<",w2="|||||||",PS="=======",Kh=">>>>>>>",Fu=class n{static scanDocument(e){let t=null,r=[];for(let i=0;i<e.lineCount;i++){let o=e.lineAt(i);if(!(!o||o.isEmptyOrWhitespace)){if(o.text.startsWith(Hh)){if(t!==null){t=null;break}t={startHeader:o,commonAncestors:[]}}else if(t&&!t.splitter&&o.text.startsWith(w2))t.commonAncestors.push(o);else if(t&&!t.splitter&&o.text===PS)t.splitter=o;else if(t&&o.text.startsWith(Kh)){t.endFooter=o;let s=n.scanItemToMergeConflictDescriptor(e,t);s!==null&&r.push(s),t=null}}}return r.filter(Boolean)}static containsConflict(e){if(!e)return!1;let t=e.getText();return t.includes(Hh)&&t.includes(Kh)}static scanItemToMergeConflictDescriptor(e,t){if(!t.startHeader||!t.splitter||!t.endFooter)return null;let r=t.commonAncestors[0]||t.splitter;return{current:{header:t.startHeader.range,decoratorContent:new Jn.Range(t.startHeader.rangeIncludingLineBreak.end,n.shiftBackOneCharacter(e,r.range.start,t.startHeader.rangeIncludingLineBreak.end)),content:new Jn.Range(t.startHeader.rangeIncludingLineBreak.end,r.range.start),name:t.startHeader.text.substring(Hh.length+1)},commonAncestors:t.commonAncestors.map((i,o,s)=>{let a=s[o+1]||t.splitter;return{header:i.range,decoratorContent:new Jn.Range(i.rangeIncludingLineBreak.end,n.shiftBackOneCharacter(e,a.range.start,i.rangeIncludingLineBreak.end)),content:new Jn.Range(i.rangeIncludingLineBreak.end,a.range.start),name:i.text.substring(w2.length+1)}}),splitter:t.splitter.range,incoming:{header:t.endFooter.range,decoratorContent:new Jn.Range(t.splitter.rangeIncludingLineBreak.end,n.shiftBackOneCharacter(e,t.endFooter.range.start,t.splitter.rangeIncludingLineBreak.end)),content:new Jn.Range(t.splitter.rangeIncludingLineBreak.end,t.endFooter.range.start),name:t.endFooter.text.substring(Kh.length+1)},range:new Jn.Range(t.startHeader.range.start,t.endFooter.rangeIncludingLineBreak.end)}}static shiftBackOneCharacter(e,t,r){if(t.isEqual(r))return t;let i=t.line,o=t.character-1;return o<0&&(i--,o=e.lineAt(i).range.end.character),new Jn.Position(i,o)}};var ta=class extends K{constructor(t,r){super();this.gitService=t;this.ignoreService=r}async resolveMergeConflicts(t,r){if(r?.isCancellationRequested)return;let i=[],o=[],s=[];for(let a of t){if(await this.ignoreService.isPukuIgnored(a,r))continue;let u=await rp.workspace.openTextDocument(a);if(!Fu.containsConflict(u))continue;let l=Fu.scanDocument(u);if(l.length===0)continue;i.push(a);let p=l[0].current.name,d=l[0].incoming.name,f=await this.gitService.getMergeBase(a,p,d);f&&(o.push({uri:Fs(a,f),historyItemId:f}),s.push({start:{uri:Fs(a,f),historyItemId:f},end:{uri:Fs(a,p),historyItemId:p}}),s.push({start:{uri:Fs(a,f),historyItemId:f},end:{uri:Fs(a,d),historyItemId:d}}))}r?.isCancellationRequested||i.length>0&&await rp.commands.executeCommand("workbench.action.chat.open",{mode:"agent",attachFiles:i,attachHistoryItemChanges:o,attachHistoryItemChangeRanges:s,query:"Resolve all merge conflicts"})}};ta=E([v(0,Qr),v(1,Dl)],ta);var C2=_("ILaunchConfigService");var Yt=Te(require("vscode"));var ip=class{async add(e,t){let r=Yt.workspace.getConfiguration("launch",e),i=r.get("configurations");t.configurations.length&&await r.update("configurations",[...t.configurations,...i||[]],Yt.ConfigurationTarget.WorkspaceFolder);let o=r.get("inputs");t.inputs?.length&&await r.update("inputs",[...t.inputs,...o||[]],Yt.ConfigurationTarget.WorkspaceFolder)}async show(e,t){let r=W.joinPath(e,".vscode","launch.json"),i;try{i=await Yt.workspace.openTextDocument(r)}catch{return}let o;if(t)try{let s=i.getText(),a=[],u=!1;gc(s,{onObjectBegin(l){a.push(l)},onObjectEnd(l,p){let d=a.pop();if(u){u=!1;let f=new _n(s),h=f.offsetToPosition(d),m=f.offsetToPosition(l+p);o=new Yt.Range(h.lineNumber-1,h.column-1,m.lineNumber-1,m.column-1)}},onLiteralValue(l,p,d,f,h,m){if(l===t){let g=m();g[g.length-1]==="name"&&(u=!0)}}})}catch{}await Yt.window.showTextDocument(i,{selection:o})}async launch(e){let t="configurations"in e&&e.configurations.length?e.configurations[0]:e;t&&await Yt.debug.startDebugging(void 0,t)}async resolveConfigurationInputs(e,t,r){r||(r={isGenerating:()=>{},ensureTask:()=>Promise.resolve(!0),prompt:async(s,a)=>await Yt.window.showInputBox({prompt:s,value:a,ignoreFocusOut:!0})});let i=new Map;for(let s of e.inputs||[]){let a=`\${input:${s.id}}`,u=await r.prompt(s.description,t?.get(a));if(u===void 0)return;i.set(a,u)}return{config:Nf(e.configurations[0],s=>{if(typeof s=="string"){for(let[a,u]of i)s=s.replaceAll(a,u);return s}}),inputs:i}}};gn();qt();var op=(H=>(H.ApplyPatch="apply_patch",H.Codebase="semantic_search",H.VSCodeAPI="get_vscode_api",H.TestFailure="test_failure",H.RunTests="run_tests",H.FindFiles="file_search",H.FindTextInFiles="grep_search",H.ReadFile="read_file",H.ListDirectory="list_dir",H.GetErrors="get_errors",H.GetScmChanges="get_changed_files",H.UpdateUserPreferences="update_user_preferences",H.ReadProjectStructure="read_project_structure",H.CreateNewWorkspace="create_new_workspace",H.CreateNewJupyterNotebook="create_new_jupyter_notebook",H.SearchWorkspaceSymbols="search_workspace_symbols",H.Usages="list_code_usages",H.EditFile="insert_edit_into_file",H.CreateFile="create_file",H.ReplaceString="replace_string_in_file",H.MultiReplaceString="multi_replace_string_in_file",H.EditNotebook="edit_notebook_file",H.RunNotebookCell="run_notebook_cell",H.GetNotebookSummary="puku_getNotebookSummary",H.ReadCellOutput="read_notebook_cell_output",H.InstallExtension="install_extension",H.FetchWebPage="fetch_webpage",H.Memory="memory",H.FindTestFiles="test_search",H.GetProjectSetupInfo="get_project_setup_info",H.SearchViewResults="get_search_view_results",H.DocInfo="get_doc_info",H.GithubRepo="github_repo",H.SimpleBrowser="open_simple_browser",H.CreateDirectory="create_directory",H.RunVscodeCmd="run_vscode_command",H.CoreManageTodoList="manage_todo_list",H.CoreRunInTerminal="run_in_terminal",H.CoreGetTerminalOutput="get_terminal_output",H.CoreTerminalSelection="terminal_selection",H.CoreTerminalLastCommand="terminal_last_command",H.CoreCreateAndRunTask="create_and_run_task",H.CoreRunTask="run_task",H.CoreGetTaskOutput="get_task_output",H.CoreRunTest="runTests",H.ToolReplay="tool_replay",H.EditFilesPlaceholder="edit_files",H.CoreRunSubagent="runSubagent",H.CoreConfirmationTool="vscode_get_confirmation",H.CoreTerminalConfirmationTool="vscode_get_terminal_confirmation",H))(op||{}),E2=(Q=>(Q.ApplyPatch="puku_applyPatch",Q.Codebase="puku_searchCodebase",Q.SearchWorkspaceSymbols="puku_searchWorkspaceSymbols",Q.Usages="puku_listCodeUsages",Q.UpdateUserPreferences="puku_updateUserPreferences",Q.VSCodeAPI="puku_getVSCodeAPI",Q.TestFailure="puku_testFailure",Q.RunTests="puku_runTests1",Q.FindFiles="puku_findFiles",Q.FindTextInFiles="puku_findTextInFiles",Q.ReadFile="puku_readFile",Q.ListDirectory="puku_listDirectory",Q.GetErrors="puku_getErrors",Q.DocInfo="puku_getDocInfo",Q.GetScmChanges="puku_getChangedFiles",Q.ReadProjectStructure="puku_readProjectStructure",Q.CreateNewWorkspace="puku_createNewWorkspace",Q.CreateNewJupyterNotebook="puku_createNewJupyterNotebook",Q.EditFile="puku_insertEdit",Q.CreateFile="puku_createFile",Q.ReplaceString="puku_replaceString",Q.MultiReplaceString="puku_multiReplaceString",Q.EditNotebook="puku_editNotebook",Q.RunNotebookCell="puku_runNotebookCell",Q.GetNotebookSummary="puku_getNotebookSummary",Q.ReadCellOutput="puku_readNotebookCellOutput",Q.InstallExtension="puku_installExtension",Q.FetchWebPage="puku_fetchWebPage",Q.Memory="puku_memory",Q.FindTestFiles="puku_findTestFiles",Q.GetProjectSetupInfo="puku_getProjectSetupInfo",Q.SearchViewResults="puku_getSearchResults",Q.GithubRepo="puku_githubRepo",Q.CreateAndRunTask="puku_createAndRunTask",Q.SimpleBrowser="puku_openSimpleBrowser",Q.CreateDirectory="puku_createDirectory",Q.RunVscodeCmd="puku_runVscodeCommand",Q.ToolReplay="puku_toolReplay",Q.EditFilesPlaceholder="puku_editFiles",Q))(E2||{}),Jh={"find-replace":"replace_string_in_file","multi-find-replace":"multi_replace_string_in_file","apply-patch":"apply_patch","code-rewrite":"insert_edit_into_file"},LS=new Map,OS=new Map;for(let[n,e]of Object.entries(E2)){let t=op[n];t&&(LS.set(t,e),OS.set(e,t))}var xo={semantic_search:"Core",grep_search:"Core",read_file:"Core",create_file:"Core",apply_patch:"Core",replace_string_in_file:"Core",insert_edit_into_file:"Core",run_in_terminal:"Core",list_dir:"Core",get_terminal_output:"Core",manage_todo_list:"Core",multi_replace_string_in_file:"Core",file_search:"Core",create_directory:"Core",read_project_structure:"Core",runSubagent:"Core",memory:"Core",run_task:"Core",get_task_output:"Core",edit_files:"Core",create_new_jupyter_notebook:"Jupyter Notebook Tools",edit_notebook_file:"Jupyter Notebook Tools",run_notebook_cell:"Jupyter Notebook Tools",puku_getNotebookSummary:"Jupyter Notebook Tools",read_notebook_cell_output:"Jupyter Notebook Tools",fetch_webpage:"Web Interaction",open_simple_browser:"Web Interaction",github_repo:"Web Interaction",search_workspace_symbols:"VS Code Interaction",list_code_usages:"VS Code Interaction",get_errors:"VS Code Interaction",get_vscode_api:"VS Code Interaction",get_changed_files:"VS Code Interaction",create_new_workspace:"VS Code Interaction",install_extension:"VS Code Interaction",get_project_setup_info:"VS Code Interaction",create_and_run_task:"VS Code Interaction",run_vscode_command:"VS Code Interaction",get_search_view_results:"VS Code Interaction",terminal_selection:"VS Code Interaction",terminal_last_command:"VS Code Interaction",run_tests:"Testing",test_failure:"Testing",test_search:"Testing",runTests:"Testing",get_doc_info:"Redundant but Specific",update_user_preferences:"VS Code Interaction",tool_replay:"Redundant but Specific",vscode_get_confirmation:"VS Code Interaction",vscode_get_terminal_confirmation:"VS Code Interaction"};function S2(n){let e=[];for(let[t,r]of Object.entries(xo))r===n&&e.push(t);return e}function NS(n,e){if(e===0)return 0;let t=Math.min(e,100),r=0;for(let i=0;i<t;i++)n>>BigInt(i)&1n&&r++;return r/t}function yi(n,e){return Math.min(n.tools[e]?.attempts||0,100)}function na(n,e){let t=n.tools[e];return t?NS(t.successBitset,t.attempts):0}var Qh={0:{allowedTools:["insert_edit_into_file","replace_string_in_file"],transitions:{2:n=>yi(n,"replace_string_in_file")>66.66666666666666&&na(n,"replace_string_in_file")>.8,3:n=>yi(n,"replace_string_in_file")>66.66666666666666&&na(n,"replace_string_in_file")<.3,1:n=>{let e=yi(n,"insert_edit_into_file"),t=yi(n,"replace_string_in_file");return e>66.66666666666666&&e/(e+t)>.7}}},1:{allowedTools:["replace_string_in_file"],transitions:{2:n=>yi(n,"replace_string_in_file")>66.66666666666666&&na(n,"replace_string_in_file")>.8,3:n=>yi(n,"replace_string_in_file")>66.66666666666666&&na(n,"replace_string_in_file")<.3}},2:{allowedTools:["replace_string_in_file","multi_replace_string_in_file"],transitions:{5:n=>yi(n,"multi_replace_string_in_file")>66.66666666666666&&na(n,"multi_replace_string_in_file")>.7,4:n=>yi(n,"multi_replace_string_in_file")>66.66666666666666&&na(n,"multi_replace_string_in_file")<.4}},3:{allowedTools:["insert_edit_into_file"]},4:{allowedTools:["replace_string_in_file"]},5:{allowedTools:["replace_string_in_file","multi_replace_string_in_file"]}};var R2="editToolLearning_cache";function D2(n,e){return H1(n,(t,r)=>e(t,r))}var A2=_("IEditToolLearningService");function FS(n,e){let t=(1n<<BigInt(100))-1n;return(n<<1n|e)&t}var ra=class{constructor(e,t,r){this._context=e;this._endpointProvider=t;this._telemetryService=r}async getPreferredEditTool(e){let t=await this._endpointProvider.getChatEndpoint(e);return this.getPreferredEndpointEditTool(t)}getPreferredEndpointEditTool(e){if(!e.isExtensionContributed)return;let t=e.supportedEditTools?.map(o=>Jh.hasOwnProperty(o)?Jh[o]:void 0).filter(Mn);if(t?.length)return t;let r=this._getHardcodedPreferences(e.name);if(r)return r;let i=this._getModelLearningData(e.model);return this._computePreferences(i)}async didMakeEdit(e,t,r){let i=await this._endpointProvider.getChatEndpoint(e);if(!i.isExtensionContributed||this._getHardcodedPreferences(i.family))return;let o=this._getModelLearningData(e.id);this._recordEdit(e.id,o,t,r),await this._saveModelLearningData(e.id,o)}_getHardcodedPreferences(e){let t=e.toLowerCase();if(t.includes("gpt")||t.includes("openai"))return["apply_patch"];if(t.includes("sonnet"))return["replace_string_in_file","multi_replace_string_in_file"]}_computePreferences(e){return Qh[e.state].allowedTools}_checkStateTransitions(e,t){let r=Qh[t.state];if(!r.transitions)return t.state;for(let[i,o]of Object.entries(r.transitions)){if(!o(t))continue;let s=Number(i);return this._telemetryService.sendMSFTTelemetryEvent("editToolLearning.transition",{modelId:e},{state:s}),s}return t.state}_recordEdit(e,t,r,i){let o=i?1n:0n,s=t.tools[r]??={successBitset:0n,attempts:0};s.successBitset=FS(s.successBitset,o),s.attempts++;let a=this._checkStateTransitions(e,t);a!==t.state&&(t.state=a,t.tools={})}_getCache(){return this._cache||(this._cache=this._loadCacheFromStorage()),this._cache}_loadCacheFromStorage(){let e=new en(50),t=this._context.globalState.get(R2);if(!t?.entries)return e;for(let[r,i]of t.entries){let o={state:i.state,tools:D2(i.tools,s=>({successBitset:BigInt(s.successBitset),attempts:s.attempts}))};e.set(r,o)}return e}async _saveCacheToStorage(){if(!this._cache)return;let e=Array.from(this._cache.entries(),([t,r])=>{let i={state:r.state,tools:D2(r.tools,o=>({successBitset:"0x"+o.successBitset.toString(16),attempts:o.attempts}))};return[t,i]});await this._context.globalState.update(R2,{entries:e})}async _saveModelLearningData(e,t){this._getCache().set(e,t),await this._saveCacheToStorage()}_getModelLearningData(e){let t=this._getCache(),r=t.get(e);return r||(r={state:0,tools:{}},t.set(e,r)),r}};ra=E([v(0,Ge),v(1,Ds),v(2,ge)],ra);var sp=class{constructor(e){this.nodes=[];this.clusters=[];this.nodeToClusterId=new Map;this.clusterCounter=0;this.normalizedEmbeddings=new Map;this.lastUsedThreshold=.9;this.options={eps:.9,minClusterSize:2,...e}}addNode(e){if(this.nodes.push(e),this.normalizedEmbeddings.set(e,this.normalizeVector(e.embedding.value)),this.cachedSimilarities=void 0,this.clusters.length>0){let t=this.options.insertThreshold??this.lastUsedThreshold,r=this.findBestClusterForNode(e,t);if(r){this.addNodeToCluster(e,r);return}}this.createSingletonCluster(e)}addNodes(e,t=!0){if(e.length!==0){for(let r of e)this.nodes.push(r);if(this.cachedSimilarities=void 0,t)this.recluster();else for(let r of e)this.createSingletonCluster(r)}}removeNode(e){let t=this.nodes.indexOf(e);if(t===-1)return!1;this.nodes.splice(t,1),this.normalizedEmbeddings.delete(e),this.cachedSimilarities=void 0;let r=this.nodeToClusterId.get(e);return r&&(this.nodeToClusterId.delete(e),this.removeNodeFromCluster(e,r)),!0}recluster(){if(this.nodes.length===0){this.clusters=[],this.nodeToClusterId.clear();return}this.clusters=[],this.nodeToClusterId.clear();let e=this.runSimilarityBasedClustering(this.options.eps,this.options.minClusterSize);this.createClustersFromAssignments(e)}getClusters(){return this.clusters}getClusterForNode(e){let t=this.nodeToClusterId.get(e);return t?this.clusters.find(r=>r.id===t):void 0}computeEpsFromPercentile(e){if(this.nodes.length<2)return .9;let t=this.getSimilarities();if(t.length===0)return .9;let r=Math.floor(e/100*t.length),i=t[Math.min(r,t.length-1)];return this.lastUsedThreshold=i,i}runSimilarityBasedClustering(e,t){let r=new Array(this.nodes.length).fill(-1),i=new Array(this.nodes.length).fill(!1),o=0,s=this.findClusterSeeds(e,t);for(let a of s){if(i[a])continue;let u=this.buildClusterAroundSeed(a,e,i);if(u.length>=t){for(let l of u)r[l]=o,i[l]=!0;o++}}return r}findClusterSeeds(e,t){let r=[],i=new Array(this.nodes.length).fill(0);for(let o=0;o<this.nodes.length;o++)for(let s=o+1;s<this.nodes.length;s++)this.cachedCosineSimilarity(this.nodes[o],this.nodes[s])>=e&&(i[o]++,i[s]++);for(let o=0;o<this.nodes.length;o++)i[o]>=t-1&&r.push(o);return r.sort((o,s)=>i[s]-i[o]),r}buildClusterAroundSeed(e,t,r){let i=[e];for(let o=0;o<this.nodes.length;o++){if(o===e||r[o])continue;this.cachedCosineSimilarity(this.nodes[e],this.nodes[o])>=t&&i.push(o)}return i}createClustersFromAssignments(e){let t=new Map,r=[];for(let i=0;i<e.length;i++){let o=e[i],s=this.nodes[i];o===-1?r.push(s):(t.has(o)||t.set(o,[]),t.get(o).push(s))}for(let[,i]of t)if(i.length>=this.options.minClusterSize)this.createCluster(i);else for(let o of i)this.createSingletonCluster(o);for(let i of r)this.createSingletonCluster(i)}findBestClusterForNode(e,t){let r,i=-1;for(let o of this.clusters){let s=this.dotProduct(this.getNormalizedEmbedding(e),o.centroid);s>=t&&s>i&&(i=s,r=o)}return r}addNodeToCluster(e,t){let r=[...t.nodes,e],i=this.computeCentroid(r.map(a=>a.embedding.value)),o={...t,nodes:r,centroid:i},s=this.clusters.indexOf(t);this.clusters[s]=o,this.nodeToClusterId.set(e,t.id)}removeNodeFromCluster(e,t){let r=this.clusters.findIndex(s=>s.id===t);if(r===-1)return;let i=this.clusters[r],o=i.nodes.filter(s=>s!==e);if(o.length===0)this.clusters.splice(r,1);else{let s=this.computeCentroid(o.map(u=>u.embedding.value)),a={...i,nodes:o,centroid:s};this.clusters[r]=a;for(let u of o)this.nodeToClusterId.set(u,t)}}createCluster(e){let t=`cluster_${this.clusterCounter++}`,r=this.computeCentroid(e.map(o=>o.embedding.value)),i={id:t,nodes:e,centroid:r};this.clusters.push(i);for(let o of e)this.nodeToClusterId.set(o,t)}createSingletonCluster(e){this.createCluster([e])}computeCentroid(e){if(e.length===0)return[];if(e.length===1)return[...e[0]];let t=e[0].length,r=new Array(t).fill(0);for(let i of e)for(let o=0;o<t;o++)r[o]+=i[o];for(let i=0;i<t;i++)r[i]/=e.length;return this.normalizeVector(r)}getSimilarities(){if(this.cachedSimilarities)return this.cachedSimilarities;let e=[];for(let t=0;t<this.nodes.length;t++)for(let r=t+1;r<this.nodes.length;r++){let i=this.cachedCosineSimilarity(this.nodes[t],this.nodes[r]);e.push(i)}return e.sort((t,r)=>t-r),this.cachedSimilarities=e,this.cachedSimilarities}tuneThresholdForTargetClusters(e,t=.7,r=.99,i=.02,o=2/3,s=.2){if(this.nodes.length===0)return{percentile:90,clusterCount:0,threshold:.9};let a=Math.floor(e*o),u=Math.max(1,Math.floor(e*s)),l=r,p=1,d=!1,f=t,h=r;for(;h-f>i;){let x=(f+h)/2,I=this.countClustersForThreshold(x,this.options.minClusterSize);if(I<=e){let T=!1;!d&&I>=a?(d=!0,T=I>p):d?T=I>=p+u:T=I>p,T&&(l=x,p=I),f=x+i}else h=x-i}let m=this.getSimilarities(),g=90;if(m.length>0){let x=m.findIndex(I=>I>=l);x>=0&&(g=Math.round(x/m.length*100))}return{percentile:g,clusterCount:p,threshold:l}}applyPercentileAndRecluster(e){let t=this.computeEpsFromPercentile(e),r=this.options.eps;this.options.eps=t;try{this.recluster()}finally{this.options.eps=r}}countClustersForThreshold(e,t){if(this.nodes.length===0)return 0;let r=this.runSimilarityBasedClustering(e,t),i=new Set;for(let l of r)l!==-1&&i.add(l);let o=new Map,s=0;for(let l of r)l===-1?s++:o.set(l,(o.get(l)||0)+1);let a=0,u=s;for(let[,l]of o)l>=t?a++:u+=l;return a+u}getNormalizedEmbedding(e){let t=this.normalizedEmbeddings.get(e);return t||(t=this.normalizeVector(e.embedding.value),this.normalizedEmbeddings.set(e,t)),t}cachedCosineSimilarity(e,t){let r=this.getNormalizedEmbedding(e),i=this.getNormalizedEmbedding(t);return this.dotProduct(r,i)}dotProduct(e,t){let r=0,i=Math.min(e.length,t.length),o=0;for(;o<i-3;o+=4)r+=e[o]*t[o]+e[o+1]*t[o+1]+e[o+2]*t[o+2]+e[o+3]*t[o+3];for(;o<i;o++)r+=e[o]*t[o];return r}normalizeVector(e){let t=Math.sqrt(e.reduce((r,i)=>r+i*i,0));return t===0?e.slice():e.map(r=>r/t)}};Oi();Mo();qt();var Xh=be.text3small_512,ia=class{constructor(e,t,r){this._logService=e;let i=wr(r.getEditorInfo().version);this.cache=t.createInstance(dn,1,"toolEmbeddings",i,Xh,"tools")}get embeddingType(){return this.cache.embeddingType}async initialize(){this.embeddingsMap=await this._loadEmbeddings()}get(e){return this.embeddingsMap?.get(e.name)}set(){}async _loadEmbeddings(){try{let e=await this.cache.getCache(),t=new Map;if(e)for(let[r,i]of Object.entries(e)){if(i===void 0){this._logService.warn(`Tool embedding missing for key: ${r}`);continue}t.set(r,{type:this.embeddingType,value:i.embedding})}return t}catch(e){return this._logService.error("Failed to load pre-computed tool embeddings",e),new Map}}};ia=E([v(0,Z),v(1,_e),v(2,Qe)],ia);function P2(n){if(io(n.type)?.quantization.document==="binary"){if(n.value.length%8!==0)throw new Error(`Embedding value length must be a multiple of 8 for ${n.type.id}, got ${n.value.length}`);let r=new Uint8Array(n.value.length/8);for(let i=0;i<n.value.length;i+=8){let o=0;for(let s=0;s<8;s++)o|=(n.value[i+s]>=0?1:0)<<s;r[i/8]=o}return r}let t=Float32Array.from(n.value);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function L2(n,e){if(io(n)?.quantization.document==="binary"&&!(n.equals(be.metis_1024_I16_Binary)&&e.length>=1024)){let i=new Array(e.length*8);for(let o=0;o<e.length;o++){let s=e[o];for(let a=0;a<8;a++)i[o*8+a]=(s&1<<a)>0?.03125:-.03125}return{type:n,value:i}}let r=new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);return{type:n,value:Array.from(r)}}function Mu(n,e){let t=0,r=0,i;do i=n.readUInt8(e+r),t|=(i&127)<<r*7,r++;while(i&128);return{value:t,consumed:r}}function Uu(n){if(n!==(n|0))throw new Error(`${n} is not an int32.`);let e=[];do{let t=n&127;n>>>=7,n!==0&&(t|=128),e.push(t)}while(n!==0);return Xe.fromByteArray(e)}pe();gn();var MS="toolEmbeddingsCache.bin",O2=1,N2=20,oa=class extends K{constructor(t,r,i){super();this._fileSystemService=r;this._lru=new en(1e3);this._toolHashes=new WeakMap;this._storageScheduler=this._register(new _l(()=>this.save(),5e3));this._embeddingType=t,this._storageUri=W.joinPath(i.globalStorageUri,MS)}async initialize(){try{let t=Xe.wrap(await this._fileSystemService.readFile(this._storageUri,!0)),r=0,i=Mu(t,r);if(r+=i.consumed,i.value!==O2)return;let o=Mu(t,r);r+=o.consumed;let s=o.value,a=t.slice(r,r+s);r+=s;let u=new TextDecoder().decode(a.buffer);if(!new be(u).equals(this._embeddingType))return;let p=Mu(t,r);r+=p.consumed;let d=p.value;for(let f=0;f<d;f++){let h=t.slice(r,r+N2);r+=N2;let m=Ol(h),g=Mu(t,r);r+=g.consumed;let x=g.value,I=t.slice(r,r+x);r+=x;let T=L2(this._embeddingType,new Uint8Array(I.buffer));this._lru.set(m,T)}}catch{}}get(t){return this._lru.get(this._getKey(t))}set(t,r){let i=this._getKey(t);this._lru.set(i,r),this._storageScheduler.schedule()}_getKey(t){let r=this._toolHashes.get(t);if(!r){let i=new Vn;i.update(t.name),i.update("\0"),i.update(t.description),r=i.digest(),this._toolHashes.set(t,r)}return r}async save(){if(this._storageScheduler.cancel(),!this._lru.size)return;let t=this._lru.toJSON(),r=[];r.push(Uu(O2));let i=new TextEncoder().encode(this._embeddingType.id);r.push(Uu(i.length)),r.push(Xe.wrap(i)),r.push(Uu(t.length));for(let[s,a]of t){let u=z1(s);r.push(Xe.wrap(u.buffer));let l=P2(a);r.push(Uu(l.length)),r.push(Xe.wrap(l))}let o=Xe.concat(r);await this._fileSystemService.writeFile(this._storageUri,o.buffer)}};oa=E([v(1,Nt),v(2,Ge)],oa);var F2=br/2,M2=20;var U2=br*3/4,_Z=br/8,yo=2,US=10,B2=br-US-30;var Yh=16;var ap=_("IToolEmbeddingsComputer"),sa=class{constructor(e,t,r){this._embeddingsComputer=e;this._logService=t;this.embeddingsStore=new Map;this._initialized=new At(()=>this.ensureInitialized());let{caches:i,embeddingType:o}=this.getCaches(r);this._caches=i,this._embeddingType=o}getCaches(e){let t=e.createInstance(ia),r=t.embeddingType;return{embeddingType:r,caches:[t,e.createInstance(oa,r)]}}async retrieveSimilarEmbeddingsForAvailableTools(e,t,r,i){if(await this._initialized.value,i.isCancellationRequested)return[];let o=await this.getAvailableToolEmbeddings(t,i);if(o.length===0)return[];let a=this.rankEmbeddings(e,o,r).map(u=>u.value);return this._logService.trace(`[virtual-tools] Matched ${JSON.stringify(a)} against the query.`),a}rankEmbeddings(e,t,r){return Is(e,t,r)}async ensureInitialized(){await Promise.all(this._caches.map(e=>e.initialize()))}computeMissingEmbeddings(e,t){if(t.isCancellationRequested||e.length===0)return;let r=this.computeEmbeddingsForTools(e,t).catch(i=>{this._logService.error("Failed to compute embeddings for tools",i)});for(let i of e){let o=r.then(async s=>{let a=s?.find(([u])=>u===i.name)?.[1];if(a===void 0)this.embeddingsStore.delete(i.name);else for(let u of this._caches)u.set(i,a);return a});this.embeddingsStore.set(i.name,o)}}async computeEmbeddingsForTools(e,t){if(t.isCancellationRequested)return;let r=e.map(s=>s.name+`

`+s.description),i=new Et,o=await this._embeddingsComputer.computeEmbeddings(this._embeddingType,r,{},new ri("ToolEmbeddingsComputer::computeEmbeddingsForTools"),t);if(this._logService.trace(`[virtual-tools] Computed embeddings for ${r.length} tools in ${i.elapsed()}ms`),!(o?.values.length===0||o?.values.length!==r.length))return r.map((s,a)=>[e[a].name,o.values[a]])}async getAvailableToolEmbeddings(e,t){let r=new Map(e.map(s=>{for(let a of this._caches){let u=a.get(s);if(u)return[s.name,u]}}).filter(Mn)),i=e.filter(s=>!this.embeddingsStore.has(s.name)&&!r.has(s.name));this.computeMissingEmbeddings(i,t);let o=[];for(let{name:s}of e){if(t.isCancellationRequested)return o;let a=r.get(s);if(a){o.push([s,a]);continue}let u=await this.embeddingsStore.get(s);u&&o.push([s,u])}return o}async computeToolGroupings(e,t,r){if(await this._initialized.value,r.isCancellationRequested||e.length===0)return[];let i=await this.getAvailableToolEmbeddings(e,r);if(i.length===0)return this._logService.trace("[virtual-tools] No embeddings available for tools, returning empty groups"),[];let o=[],s=new Map(e.map(m=>[m.name,m]));for(let[m,g]of i){let x=s.get(m);x&&o.push({value:x,embedding:g})}if(o.length===0)return this._logService.trace("[virtual-tools] No valid nodes created for clustering"),[];let a=new sp;a.addNodes(o);let u=Math.min(t,Math.ceil(o.length/4));if(u>=o.length)return this._logService.trace(`[virtual-tools] Target clusters (${u}) >= tool count (${o.length}), returning individual tools`),e.map(m=>[m]);let l=a.tuneThresholdForTargetClusters(u);this._logService.trace(`[virtual-tools] Tuned clustering: ${l.clusterCount} clusters with threshold ${l.threshold} (percentile ${l.percentile})`),a.applyPercentileAndRecluster(l.percentile);let p=a.getClusters(),d=[],f=[];for(let m of p){let g=m.nodes.map(x=>x.value);g.length>=yo?d.push(g):f.push(...g)}if(d.length+f.length<=t)for(let m of f)d.push([m]);else{let m=t-d.length;for(let g=0;g<Math.min(f.length,m);g++)d.push([f[g]]);f.length>m&&this._logService.warn(`[virtual-tools] Had to drop ${f.length-m} tools due to limit constraints`)}return this._logService.trace(`[virtual-tools] Created ${d.length} groups from ${e.length} tools`),d}};sa=E([v(0,xr),v(1,Z),v(2,_e)],sa);gn();wt();Po();var Qn="activate_",Bu=Qn+"embeddings",mt=class n{constructor(e,t,r,i,o=[]){this.name=e;this.description=t;this.lastUsedOnTurn=r;this.metadata=i;this.contents=o;this.isExpanded=!1;if(!e.startsWith(Qn))throw new Error(`Virtual tool name must start with '${Qn}'`)}cloneWithNewName(e){let t=new n(e,this.description,this.lastUsedOnTurn,{...this.metadata},this.contents);return t.isExpanded=this.isExpanded,t}copyStateFrom(e){this.isExpanded=e.isExpanded,this.metadata.wasExpandedByDefault=e.metadata.wasExpandedByDefault,this.metadata.canBeCollapsed=e.metadata.canBeCollapsed,this.metadata.wasEmbeddingsMatched=e.metadata.wasEmbeddingsMatched,this.lastUsedOnTurn=e.lastUsedOnTurn}find(e){if(this.name===e)return{tool:this,path:[]};for(let t of this.contents)if(t instanceof n){let r=t.find(e);if(r)return r.path.unshift(this),r}else if(t.name===e)return{tool:t,path:[this]}}getLowestExpandedTool(){let e;for(let t of this.all())t instanceof n&&t.isExpanded&&(!e||t.lastUsedOnTurn<e.lastUsedOnTurn)&&(e=t);return e}*all(){yield this;for(let e of this.contents)e instanceof n?yield*e.all():yield e}*tools(){if(!this.isExpanded){yield{name:this.name,description:this.description,inputSchema:void 0,source:void 0,tags:[]};return}for(let e of this.contents)e instanceof n?yield*e.tools():yield e}};va();Mo();Fn();va();var BS="builtin",VS=`Call this tool when you need access to a new category of tools. The category of tools is described as follows:

`,qS=`

Be sure to call this tool if you need a capability related to the above.`;function $S(n){switch(n){case"Jupyter Notebook Tools":return"Call tools from this group when you need to work with Jupyter notebooks - creating, editing, running cells, and managing notebook operations.";case"Web Interaction":return"Call tools from this group when you need to interact with web content, browse websites, or access external resources.";case"VS Code Interaction":return"Call tools from this group when you need to interact with the VS Code workspace and access VS Code features.";case"Testing":return"Call tools from this group when you need to run tests, analyze test failures, and manage test workflows.";case"Redundant but Specific":return`These tools have overlapping functionalities but are highly specialized for certain tasks. Tools: ${S2(n).join(", ")}`;case"Core":return"Core tools that should always be available without grouping.";default:return Zu(n)}}var To=class{constructor(){}createBuiltInToolGroups(e){if(e.length<=yo)return e;let t=e.filter(u=>!xo.hasOwnProperty(u.name)),r=e.filter(u=>xo.hasOwnProperty(u.name)),i=r.filter(u=>xo[u.name]!=="Core"),o=r.filter(u=>xo[u.name]==="Core"),s=Ro(i,u=>xo[u.name]);return[...Object.entries(s).flatMap(([u,l])=>l.length<yo?l:new mt(Qn+u.toLowerCase().replace(/\s+/g,"_"),VS+$S(u)+qS,0,{possiblePrefix:"builtin_",wasExpandedByDefault:!1,canBeCollapsed:!0},l)),...o,...t]}static get BUILT_IN_GROUP_KEY(){return BS}};var Dr=Te(vu());var up=(u=>(u[u.Panel=1]="Panel",u[u.Terminal=2]="Terminal",u[u.Notebook=3]="Notebook",u[u.Editor=4]="Editor",u[u.EditingSession=5]="EditingSession",u[u.Other=6]="Other",u[u.Agent=7]="Agent",u[u.ResponsesProxy=8]="ResponsesProxy",u))(up||{});(t=>{function n(r){switch(r){case 4:return"conversationInline";case 1:return"conversationPanel";case 5:return"editingSession";case 7:return"editingSessionAgent";default:return"none"}}t.toString=n;function e(r){switch(r){case 4:case 3:return"inline";case 1:return"panel";case 5:return"editingSession";default:return"none"}}t.toStringShorter=e})(up||={});var ug={};Vt(ug,{arrayReplaceAt:()=>ag,assign:()=>la,escapeHtml:()=>Sr,escapeRE:()=>w5,fromCodePoint:()=>$u,has:()=>m5,isMdAsciiPunct:()=>Io,isPunctChar:()=>ko,isSpace:()=>ue,isString:()=>yp,isValidEntityCode:()=>Tp,isWhiteSpace:()=>_o,lib:()=>C5,normalizeReference:()=>wo,unescapeAll:()=>Er,unescapeMd:()=>x5});var fp={};Vt(fp,{decode:()=>Vu,encode:()=>dp,format:()=>aa,parse:()=>qu});var V2={};function WS(n){let e=V2[n];if(e)return e;e=V2[n]=[];for(let t=0;t<128;t++){let r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function lp(n,e){typeof e!="string"&&(e=lp.defaultChars);let t=WS(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let o=0,s=r.length;o<s;o+=3){let a=parseInt(r.slice(o+1,o+3),16);if(a<128){i+=t[a];continue}if((a&224)===192&&o+3<s){let u=parseInt(r.slice(o+4,o+6),16);if((u&192)===128){let l=a<<6&1984|u&63;l<128?i+="\uFFFD\uFFFD":i+=String.fromCharCode(l),o+=3;continue}}if((a&240)===224&&o+6<s){let u=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16);if((u&192)===128&&(l&192)===128){let p=a<<12&61440|u<<6&4032|l&63;p<2048||p>=55296&&p<=57343?i+="\uFFFD\uFFFD\uFFFD":i+=String.fromCharCode(p),o+=6;continue}}if((a&248)===240&&o+9<s){let u=parseInt(r.slice(o+4,o+6),16),l=parseInt(r.slice(o+7,o+9),16),p=parseInt(r.slice(o+10,o+12),16);if((u&192)===128&&(l&192)===128&&(p&192)===128){let d=a<<18&1835008|u<<12&258048|l<<6&4032|p&63;d<65536||d>1114111?i+="\uFFFD\uFFFD\uFFFD\uFFFD":(d-=65536,i+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),o+=9;continue}}i+="\uFFFD"}return i})}lp.defaultChars=";/?:@&=+$,#";lp.componentChars="";var Vu=lp;var q2={};function jS(n){let e=q2[n];if(e)return e;e=q2[n]=[];for(let t=0;t<128;t++){let r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function cp(n,e,t){typeof e!="string"&&(t=e,e=cp.defaultChars),typeof t>"u"&&(t=!0);let r=jS(e),i="";for(let o=0,s=n.length;o<s;o++){let a=n.charCodeAt(o);if(t&&a===37&&o+2<s&&/^[0-9a-f]{2}$/i.test(n.slice(o+1,o+3))){i+=n.slice(o,o+3),o+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s){let u=n.charCodeAt(o+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(n[o]+n[o+1]),o++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[o])}return i}cp.defaultChars=";/?:@&=+$,-_.!~*'()#";cp.componentChars="-_.!~*'()";var dp=cp;function aa(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function pp(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var GS=/^([a-z0-9.+-]+:)/i,zS=/:[0-9]*$/,HS=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,KS=["<",">",'"',"`"," ","\r",`
`,"	"],JS=["{","}","|","\\","^","`"].concat(KS),QS=["'"].concat(JS),$2=["%","/","?",";","#"].concat(QS),W2=["/","?","#"],XS=255,j2=/^[+a-z0-9A-Z_-]{0,63}$/,YS=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,G2={javascript:!0,"javascript:":!0},z2={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ZS(n,e){if(n&&n instanceof pp)return n;let t=new pp;return t.parse(n,e),t}pp.prototype.parse=function(n,e){let t,r,i,o=n;if(o=o.trim(),!e&&n.split("#").length===1){let l=HS.exec(o);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}let s=GS.exec(o);if(s&&(s=s[0],t=s.toLowerCase(),this.protocol=s,o=o.substr(s.length)),(e||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=o.substr(0,2)==="//",i&&!(s&&G2[s])&&(o=o.substr(2),this.slashes=!0)),!G2[s]&&(i||s&&!z2[s])){let l=-1;for(let m=0;m<W2.length;m++)r=o.indexOf(W2[m]),r!==-1&&(l===-1||r<l)&&(l=r);let p,d;l===-1?d=o.lastIndexOf("@"):d=o.lastIndexOf("@",l),d!==-1&&(p=o.slice(0,d),o=o.slice(d+1),this.auth=p),l=-1;for(let m=0;m<$2.length;m++)r=o.indexOf($2[m]),r!==-1&&(l===-1||r<l)&&(l=r);l===-1&&(l=o.length),o[l-1]===":"&&l--;let f=o.slice(0,l);o=o.slice(l),this.parseHost(f),this.hostname=this.hostname||"";let h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){let m=this.hostname.split(/\./);for(let g=0,x=m.length;g<x;g++){let I=m[g];if(I&&!I.match(j2)){let T="";for(let b=0,y=I.length;b<y;b++)I.charCodeAt(b)>127?T+="x":T+=I[b];if(!T.match(j2)){let b=m.slice(0,g),y=m.slice(g+1),S=I.match(YS);S&&(b.push(S[1]),y.unshift(S[2])),y.length&&(o=y.join(".")+o),this.hostname=b.join(".");break}}}}this.hostname.length>XS&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let a=o.indexOf("#");a!==-1&&(this.hash=o.substr(a),o=o.slice(0,a));let u=o.indexOf("?");return u!==-1&&(this.search=o.substr(u),o=o.slice(0,u)),o&&(this.pathname=o),z2[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};pp.prototype.parseHost=function(n){let e=zS.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};var qu=ZS;var eg={};Vt(eg,{Any:()=>mp,Cc:()=>hp,Cf:()=>H2,P:()=>ua,S:()=>gp,Z:()=>bp});var mp=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;var hp=/[\0-\x1F\x7F-\x9F]/;var H2=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/;var ua=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;var gp=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/;var bp=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/;var K2=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(n=>n.charCodeAt(0)));var J2=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(n=>n.charCodeAt(0)));var tg,e5=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ng=(tg=String.fromCodePoint)!==null&&tg!==void 0?tg:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function rg(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=e5.get(n))!==null&&e!==void 0?e:n}var pt;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(pt||(pt={}));var t5=32,Ti;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Ti||(Ti={}));function ig(n){return n>=pt.ZERO&&n<=pt.NINE}function n5(n){return n>=pt.UPPER_A&&n<=pt.UPPER_F||n>=pt.LOWER_A&&n<=pt.LOWER_F}function r5(n){return n>=pt.UPPER_A&&n<=pt.UPPER_Z||n>=pt.LOWER_A&&n<=pt.LOWER_Z||ig(n)}function i5(n){return n===pt.EQUALS||r5(n)}var dt;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(dt||(dt={}));var Xn;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Xn||(Xn={}));var vp=class{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=dt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Xn.Strict}startEntity(e){this.decodeMode=e,this.state=dt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case dt.EntityStart:return e.charCodeAt(t)===pt.NUM?(this.state=dt.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=dt.NamedEntity,this.stateNamedEntity(e,t));case dt.NumericStart:return this.stateNumericStart(e,t);case dt.NumericDecimal:return this.stateNumericDecimal(e,t);case dt.NumericHex:return this.stateNumericHex(e,t);case dt.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|t5)===pt.LOWER_X?(this.state=dt.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=dt.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){let o=r-t;this.result=this.result*Math.pow(i,o)+parseInt(e.substr(t,o),i),this.consumed+=o}}stateNumericHex(e,t){let r=t;for(;t<e.length;){let i=e.charCodeAt(t);if(ig(i)||n5(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){let r=t;for(;t<e.length;){let i=e.charCodeAt(t);if(ig(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===pt.SEMI)this.consumed+=1;else if(this.decodeMode===Xn.Strict)return 0;return this.emitCodePoint(rg(this.result),this.consumed),this.errors&&(e!==pt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){let{decodeTree:r}=this,i=r[this.treeIndex],o=(i&Ti.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){let s=e.charCodeAt(t);if(this.treeIndex=o5(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Xn.Attribute&&(o===0||i5(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Ti.VALUE_LENGTH)>>14,o!==0){if(s===pt.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Xn.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;let{result:t,decodeTree:r}=this,i=(r[t]&Ti.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){let{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~Ti.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case dt.NamedEntity:return this.result!==0&&(this.decodeMode!==Xn.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case dt.NumericDecimal:return this.emitNumericEntity(0,2);case dt.NumericHex:return this.emitNumericEntity(0,3);case dt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case dt.EntityStart:return 0}}};function Q2(n){let e="",t=new vp(n,r=>e+=ng(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(s,a),t.startEntity(o);let l=t.write(i,a+1);if(l<0){s=a+t.end();break}s=a+l,a=l===0?s+1:s}let u=e+i.slice(s);return e="",u}}function o5(n,e,t,r){let i=(e&Ti.BRANCH_LENGTH)>>7,o=e&Ti.JUMP_TABLE;if(i===0)return o!==0&&r===o?t:-1;if(o){let u=r-o;return u<0||u>=i?-1:n[t+u]-1}let s=t,a=s+i-1;for(;s<=a;){let u=s+a>>>1,l=n[u];if(l<r)s=u+1;else if(l>r)a=u-1;else return n[u+i]}return-1}var s5=Q2(K2),Aee=Q2(J2);function _i(n,e=Xn.Legacy){return s5(n,e)}function xp(n){for(let e=1;e<n.length;e++)n[e][0]+=n[e-1][0]+1;return n}var a5=new Map(xp([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(xp([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(xp([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(xp([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var u5=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),l5=String.prototype.codePointAt!=null?(n,e)=>n.codePointAt(e):(n,e)=>(n.charCodeAt(e)&64512)===55296?(n.charCodeAt(e)-55296)*1024+n.charCodeAt(e+1)-56320+65536:n.charCodeAt(e);function og(n,e){return function(r){let i,o=0,s="";for(;i=n.exec(r);)o!==i.index&&(s+=r.substring(o,i.index)),s+=e.get(i[0].charCodeAt(0)),o=i.index+1;return s+r.substring(o)}}var X2=og(/[&<>'"]/g,u5),Y2=og(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Z2=og(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var eT;(function(n){n[n.XML=0]="XML",n[n.HTML=1]="HTML"})(eT||(eT={}));var tT;(function(n){n[n.UTF8=0]="UTF8",n[n.ASCII=1]="ASCII",n[n.Extensive=2]="Extensive",n[n.Attribute=3]="Attribute",n[n.Text=4]="Text"})(tT||(tT={}));function p5(n){return Object.prototype.toString.call(n)}function yp(n){return p5(n)==="[object String]"}var f5=Object.prototype.hasOwnProperty;function m5(n,e){return f5.call(n,e)}function la(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function ag(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function Tp(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function $u(n){if(n>65535){n-=65536;let e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}var iT=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,h5=/&([a-z#][a-z0-9]{1,31});/gi,g5=new RegExp(iT.source+"|"+h5.source,"gi"),b5=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function v5(n,e){if(e.charCodeAt(0)===35&&b5.test(e)){let r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return Tp(r)?$u(r):n}let t=_i(n);return t!==n?t:n}function x5(n){return n.indexOf("\\")<0?n:n.replace(iT,"$1")}function Er(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(g5,function(e,t,r){return t||v5(e,r)})}var y5=/[&<>"]/,T5=/[&<>"]/g,_5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function k5(n){return _5[n]}function Sr(n){return y5.test(n)?n.replace(T5,k5):n}var I5=/[.?*+^$[\]\\(){}|-]/g;function w5(n){return n.replace(I5,"\\$&")}function ue(n){switch(n){case 9:case 32:return!0}return!1}function _o(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ko(n){return ua.test(n)||gp.test(n)}function Io(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function wo(n){return n=n.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(n=n.replace(//g,"\xDF")),n.toLowerCase().toUpperCase()}var C5={mdurl:fp,ucmicro:eg};var pg={};Vt(pg,{parseLinkDestination:()=>cg,parseLinkLabel:()=>lg,parseLinkTitle:()=>dg});function lg(n,e,t){let r,i,o,s,a=n.posMax,u=n.pos;for(n.pos=e+1,r=1;n.pos<a;){if(o=n.src.charCodeAt(n.pos),o===93&&(r--,r===0)){i=!0;break}if(s=n.pos,n.md.inline.skipToken(n),o===91){if(s===n.pos-1)r++;else if(t)return n.pos=u,-1}}let l=-1;return i&&(l=n.pos),n.pos=u,l}function cg(n,e,t){let r,i=e,o={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return o;if(r===62)return o.pos=i+1,o.str=Er(n.slice(e+1,i)),o.ok=!0,o;if(r===92&&i+1<t){i+=2;continue}i++}return o}let s=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(s++,s>32))return o;if(r===41){if(s===0)break;s--}i++}return e===i||s!==0||(o.str=Er(n.slice(e,i)),o.pos=i,o.ok=!0),o}function dg(n,e,t,r){let i,o=e,s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(o>=t)return s;let a=n.charCodeAt(o);if(a!==34&&a!==39&&a!==40)return s;e++,o++,a===40&&(a=41),s.marker=a}for(;o<t;){if(i=n.charCodeAt(o),i===s.marker)return s.pos=o+1,s.str+=Er(n.slice(e,o)),s.ok=!0,s;if(i===40&&s.marker===41)return s;i===92&&o+1<t&&o++,o++}return s.can_continue=!0,s.str+=Er(n.slice(e,o)),s}var Yn={};Yn.code_inline=function(n,e,t,r,i){let o=n[e];return"<code"+i.renderAttrs(o)+">"+Sr(o.content)+"</code>"};Yn.code_block=function(n,e,t,r,i){let o=n[e];return"<pre"+i.renderAttrs(o)+"><code>"+Sr(n[e].content)+`</code></pre>
`};Yn.fence=function(n,e,t,r,i){let o=n[e],s=o.info?Er(o.info).trim():"",a="",u="";if(s){let p=s.split(/(\s+)/g);a=p[0],u=p.slice(2).join("")}let l;if(t.highlight?l=t.highlight(o.content,a,u)||Sr(o.content):l=Sr(o.content),l.indexOf("<pre")===0)return l+`
`;if(s){let p=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[];p<0?d.push(["class",t.langPrefix+a]):(d[p]=d[p].slice(),d[p][1]+=" "+t.langPrefix+a);let f={attrs:d};return`<pre><code${i.renderAttrs(f)}>${l}</code></pre>
`}return`<pre><code${i.renderAttrs(o)}>${l}</code></pre>
`};Yn.image=function(n,e,t,r,i){let o=n[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,t,r),i.renderToken(n,e,t)};Yn.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Yn.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Yn.text=function(n,e){return Sr(n[e].content)};Yn.html_block=function(n,e){return n[e].content};Yn.html_inline=function(n,e){return n[e].content};function ca(){this.rules=la({},Yn)}ca.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+Sr(e.attrs[t][0])+'="'+Sr(e.attrs[t][1])+'"';return i};ca.prototype.renderToken=function(e,t,r){let i=e[t],o="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(o+=`
`),o+=(i.nesting===-1?"</":"<")+i.tag,o+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(o+=" /");let s=!1;if(i.block&&(s=!0,i.nesting===1&&t+1<e.length)){let a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(s=!1)}return o+=s?`>
`:">",o};ca.prototype.renderInline=function(n,e,t){let r="",i=this.rules;for(let o=0,s=n.length;o<s;o++){let a=n[o].type;typeof i[a]<"u"?r+=i[a](n,o,e,t,this):r+=this.renderToken(n,o,e)}return r};ca.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,o=n.length;i<o;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break;default:}return r};ca.prototype.render=function(n,e,t){let r="",i=this.rules;for(let o=0,s=n.length;o<s;o++){let a=n[o].type;a==="inline"?r+=this.renderInline(n[o].children,e,t):typeof i[a]<"u"?r+=i[a](n,o,e,t,this):r+=this.renderToken(n,o,e,t)}return r};var oT=ca;function Ln(){this.__rules__=[],this.__cache__=null}Ln.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};Ln.prototype.__compile__=function(){let n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};Ln.prototype.at=function(n,e,t){let r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Ln.prototype.before=function(n,e,t,r){let i=this.__find__(n),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Ln.prototype.after=function(n,e,t,r){let i=this.__find__(n),o=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Ln.prototype.push=function(n,e,t){let r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Ln.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);let t=[];return n.forEach(function(r){let i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};Ln.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};Ln.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);let t=[];return n.forEach(function(r){let i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};Ln.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};var Co=Ln;function da(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}da.prototype.attrIndex=function(e){if(!this.attrs)return-1;let t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};da.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};da.prototype.attrSet=function(e,t){let r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};da.prototype.attrGet=function(e){let t=this.attrIndex(e),r=null;return t>=0&&(r=this.attrs[t][1]),r};da.prototype.attrJoin=function(e,t){let r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};var Rr=da;function sT(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}sT.prototype.Token=Rr;var aT=sT;var E5=/\r\n?|\n/g,S5=/\0/g;function fg(n){let e;e=n.src.replace(E5,`
`),e=e.replace(S5,"\uFFFD"),n.src=e}function mg(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function hg(n){let e=n.tokens;for(let t=0,r=e.length;t<r;t++){let i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function R5(n){return/^<a[>\s]/i.test(n)}function D5(n){return/^<\/a\s*>/i.test(n)}function gg(n){let e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,o=0;for(let s=i.length-1;s>=0;s--){let a=i[s];if(a.type==="link_close"){for(s--;i[s].level!==a.level&&i[s].type!=="link_open";)s--;continue}if(a.type==="html_inline"&&(R5(a.content)&&o>0&&o--,D5(a.content)&&o++),!(o>0)&&a.type==="text"&&n.md.linkify.test(a.content)){let u=a.content,l=n.md.linkify.match(u),p=[],d=a.level,f=0;l.length>0&&l[0].index===0&&s>0&&i[s-1].type==="text_special"&&(l=l.slice(1));for(let h=0;h<l.length;h++){let m=l[h].url,g=n.md.normalizeLink(m);if(!n.md.validateLink(g))continue;let x=l[h].text;l[h].schema?l[h].schema==="mailto:"&&!/^mailto:/i.test(x)?x=n.md.normalizeLinkText("mailto:"+x).replace(/^mailto:/,""):x=n.md.normalizeLinkText(x):x=n.md.normalizeLinkText("http://"+x).replace(/^http:\/\//,"");let I=l[h].index;if(I>f){let S=new n.Token("text","",0);S.content=u.slice(f,I),S.level=d,p.push(S)}let T=new n.Token("link_open","a",1);T.attrs=[["href",g]],T.level=d++,T.markup="linkify",T.info="auto",p.push(T);let b=new n.Token("text","",0);b.content=x,b.level=d,p.push(b);let y=new n.Token("link_close","a",-1);y.level=--d,y.markup="linkify",y.info="auto",p.push(y),f=l[h].lastIndex}if(f<u.length){let h=new n.Token("text","",0);h.content=u.slice(f),h.level=d,p.push(h)}e[t].children=i=ag(i,s,p)}}}}var uT=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,A5=/\((c|tm|r)\)/i,P5=/\((c|tm|r)\)/ig,L5={c:"\xA9",r:"\xAE",tm:"\u2122"};function O5(n,e){return L5[e.toLowerCase()]}function N5(n){let e=0;for(let t=n.length-1;t>=0;t--){let r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace(P5,O5)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function F5(n){let e=0;for(let t=n.length-1;t>=0;t--){let r=n[t];r.type==="text"&&!e&&uT.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function bg(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(A5.test(n.tokens[e].content)&&N5(n.tokens[e].children),uT.test(n.tokens[e].content)&&F5(n.tokens[e].children))}var M5=/['"]/,lT=/['"]/g,cT="\u2019";function _p(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function U5(n,e){let t,r=[];for(let i=0;i<n.length;i++){let o=n[i],s=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=s);t--);if(r.length=t+1,o.type!=="text")continue;let a=o.content,u=0,l=a.length;e:for(;u<l;){lT.lastIndex=u;let p=lT.exec(a);if(!p)break;let d=!0,f=!0;u=p.index+1;let h=p[0]==="'",m=32;if(p.index-1>=0)m=a.charCodeAt(p.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){m=n[t].content.charCodeAt(n[t].content.length-1);break}let g=32;if(u<l)g=a.charCodeAt(u);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){g=n[t].content.charCodeAt(0);break}let x=Io(m)||ko(String.fromCharCode(m)),I=Io(g)||ko(String.fromCharCode(g)),T=_o(m),b=_o(g);if(b?d=!1:I&&(T||x||(d=!1)),T?f=!1:x&&(b||I||(f=!1)),g===34&&p[0]==='"'&&m>=48&&m<=57&&(f=d=!1),d&&f&&(d=x,f=I),!d&&!f){h&&(o.content=_p(o.content,p.index,cT));continue}if(f)for(t=r.length-1;t>=0;t--){let y=r[t];if(r[t].level<s)break;if(y.single===h&&r[t].level===s){y=r[t];let S,A;h?(S=e.md.options.quotes[2],A=e.md.options.quotes[3]):(S=e.md.options.quotes[0],A=e.md.options.quotes[1]),o.content=_p(o.content,p.index,A),n[y.token].content=_p(n[y.token].content,y.pos,S),u+=A.length-1,y.token===i&&(u+=S.length-1),a=o.content,l=a.length,r.length=t;continue e}}d?r.push({token:i,pos:p.index,single:h,level:s}):f&&h&&(o.content=_p(o.content,p.index,cT))}}}function vg(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!M5.test(n.tokens[e].content)||U5(n.tokens[e].children,n)}function xg(n){let e,t,r=n.tokens,i=r.length;for(let o=0;o<i;o++){if(r[o].type!=="inline")continue;let s=r[o].children,a=s.length;for(e=0;e<a;e++)s[e].type==="text_special"&&(s[e].type="text");for(e=t=0;e<a;e++)s[e].type==="text"&&e+1<a&&s[e+1].type==="text"?s[e+1].content=s[e].content+s[e+1].content:(e!==t&&(s[t]=s[e]),t++);e!==t&&(s.length=t)}}var yg=[["normalize",fg],["block",mg],["inline",hg],["linkify",gg],["replacements",bg],["smartquotes",vg],["text_join",xg]];function Tg(){this.ruler=new Co;for(let n=0;n<yg.length;n++)this.ruler.push(yg[n][0],yg[n][1])}Tg.prototype.process=function(n){let e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};Tg.prototype.State=aT;var dT=Tg;function Zn(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let i=this.src;for(let o=0,s=0,a=0,u=0,l=i.length,p=!1;s<l;s++){let d=i.charCodeAt(s);if(!p)if(ue(d)){a++,d===9?u+=4-u%4:u++;continue}else p=!0;(d===10||s===l-1)&&(d!==10&&s++,this.bMarks.push(o),this.eMarks.push(s),this.tShift.push(a),this.sCount.push(u),this.bsCount.push(0),p=!1,a=0,u=0,o=s+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Zn.prototype.push=function(n,e,t){let r=new Rr(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};Zn.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Zn.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Zn.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){let r=this.src.charCodeAt(e);if(!ue(r))break}return e};Zn.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!ue(this.src.charCodeAt(--e)))return e+1;return e};Zn.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};Zn.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Zn.prototype.getLines=function(e,t,r,i){if(e>=t)return"";let o=new Array(t-e);for(let s=0,a=e;a<t;a++,s++){let u=0,l=this.bMarks[a],p=l,d;for(a+1<t||i?d=this.eMarks[a]+1:d=this.eMarks[a];p<d&&u<r;){let f=this.src.charCodeAt(p);if(ue(f))f===9?u+=4-(u+this.bsCount[a])%4:u++;else if(p-l<this.tShift[a])u++;else break;p++}u>r?o[s]=new Array(u-r+1).join(" ")+this.src.slice(p,d):o[s]=this.src.slice(p,d)}return o.join("")};Zn.prototype.Token=Rr;var pT=Zn;var B5=65536;function _g(n,e){let t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function fT(n){let e=[],t=n.length,r=0,i=n.charCodeAt(r),o=!1,s=0,a="";for(;r<t;)i===124&&(o?(a+=n.substring(s,r-1),s=r):(e.push(a+n.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=n.charCodeAt(r);return e.push(a+n.substring(s)),e}function kg(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let o=n.bMarks[i]+n.tShift[i];if(o>=n.eMarks[i])return!1;let s=n.src.charCodeAt(o++);if(s!==124&&s!==45&&s!==58||o>=n.eMarks[i])return!1;let a=n.src.charCodeAt(o++);if(a!==124&&a!==45&&a!==58&&!ue(a)||s===45&&ue(a))return!1;for(;o<n.eMarks[i];){let y=n.src.charCodeAt(o);if(y!==124&&y!==45&&y!==58&&!ue(y))return!1;o++}let u=_g(n,e+1),l=u.split("|"),p=[];for(let y=0;y<l.length;y++){let S=l[y].trim();if(!S){if(y===0||y===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(S))return!1;S.charCodeAt(S.length-1)===58?p.push(S.charCodeAt(0)===58?"center":"right"):S.charCodeAt(0)===58?p.push("left"):p.push("")}if(u=_g(n,e).trim(),u.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;l=fT(u),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop();let d=l.length;if(d===0||d!==p.length)return!1;if(r)return!0;let f=n.parentType;n.parentType="table";let h=n.md.block.ruler.getRules("blockquote"),m=n.push("table_open","table",1),g=[e,0];m.map=g;let x=n.push("thead_open","thead",1);x.map=[e,e+1];let I=n.push("tr_open","tr",1);I.map=[e,e+1];for(let y=0;y<l.length;y++){let S=n.push("th_open","th",1);p[y]&&(S.attrs=[["style","text-align:"+p[y]]]);let A=n.push("inline","",0);A.content=l[y].trim(),A.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let T,b=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let y=!1;for(let A=0,k=h.length;A<k;A++)if(h[A](n,i,t,!0)){y=!0;break}if(y||(u=_g(n,i).trim(),!u)||n.sCount[i]-n.blkIndent>=4||(l=fT(u),l.length&&l[0]===""&&l.shift(),l.length&&l[l.length-1]===""&&l.pop(),b+=d-l.length,b>B5))break;if(i===e+2){let A=n.push("tbody_open","tbody",1);A.map=T=[e+2,0]}let S=n.push("tr_open","tr",1);S.map=[i,i+1];for(let A=0;A<d;A++){let k=n.push("td_open","td",1);p[A]&&(k.attrs=[["style","text-align:"+p[A]]]);let O=n.push("inline","",0);O.content=l[A]?l[A].trim():"",O.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return T&&(n.push("tbody_close","tbody",-1),T[1]=i),n.push("table_close","table",-1),g[1]=i,n.parentType=f,n.line=i,!0}function Ig(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;let o=n.push("code_block","code",0);return o.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,o.map=[e,n.line],!0}function wg(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>o)return!1;let s=n.src.charCodeAt(i);if(s!==126&&s!==96)return!1;let a=i;i=n.skipChars(i,s);let u=i-a;if(u<3)return!1;let l=n.src.slice(a,i),p=n.src.slice(i,o);if(s===96&&p.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let d=e,f=!1;for(;d++,!(d>=t||(i=a=n.bMarks[d]+n.tShift[d],o=n.eMarks[d],i<o&&n.sCount[d]<n.blkIndent));)if(n.src.charCodeAt(i)===s&&!(n.sCount[d]-n.blkIndent>=4)&&(i=n.skipChars(i,s),!(i-a<u)&&(i=n.skipSpaces(i),!(i<o)))){f=!0;break}u=n.sCount[e],n.line=d+(f?1:0);let h=n.push("fence","code",0);return h.info=p,h.content=n.getLines(e+1,d,u,!0),h.markup=l,h.map=[e,n.line],!0}function Cg(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],s=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;let a=[],u=[],l=[],p=[],d=n.md.block.ruler.getRules("blockquote"),f=n.parentType;n.parentType="blockquote";let h=!1,m;for(m=e;m<t;m++){let b=n.sCount[m]<n.blkIndent;if(i=n.bMarks[m]+n.tShift[m],o=n.eMarks[m],i>=o)break;if(n.src.charCodeAt(i++)===62&&!b){let S=n.sCount[m]+1,A,k;n.src.charCodeAt(i)===32?(i++,S++,k=!1,A=!0):n.src.charCodeAt(i)===9?(A=!0,(n.bsCount[m]+S)%4===3?(i++,S++,k=!1):k=!0):A=!1;let O=S;for(a.push(n.bMarks[m]),n.bMarks[m]=i;i<o;){let Y=n.src.charCodeAt(i);if(ue(Y))Y===9?O+=4-(O+n.bsCount[m]+(k?1:0))%4:O++;else break;i++}h=i>=o,u.push(n.bsCount[m]),n.bsCount[m]=n.sCount[m]+1+(A?1:0),l.push(n.sCount[m]),n.sCount[m]=O-S,p.push(n.tShift[m]),n.tShift[m]=i-n.bMarks[m];continue}if(h)break;let y=!1;for(let S=0,A=d.length;S<A;S++)if(d[S](n,m,t,!0)){y=!0;break}if(y){n.lineMax=m,n.blkIndent!==0&&(a.push(n.bMarks[m]),u.push(n.bsCount[m]),p.push(n.tShift[m]),l.push(n.sCount[m]),n.sCount[m]-=n.blkIndent);break}a.push(n.bMarks[m]),u.push(n.bsCount[m]),p.push(n.tShift[m]),l.push(n.sCount[m]),n.sCount[m]=-1}let g=n.blkIndent;n.blkIndent=0;let x=n.push("blockquote_open","blockquote",1);x.markup=">";let I=[e,0];x.map=I,n.md.block.tokenize(n,e,m);let T=n.push("blockquote_close","blockquote",-1);T.markup=">",n.lineMax=s,n.parentType=f,I[1]=n.line;for(let b=0;b<p.length;b++)n.bMarks[b+e]=a[b],n.tShift[b+e]=p[b],n.sCount[b+e]=l[b],n.bsCount[b+e]=u[b];return n.blkIndent=g,!0}function Eg(n,e,t,r){let i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.bMarks[e]+n.tShift[e],s=n.src.charCodeAt(o++);if(s!==42&&s!==45&&s!==95)return!1;let a=1;for(;o<i;){let l=n.src.charCodeAt(o++);if(l!==s&&!ue(l))return!1;l===s&&a++}if(a<3)return!1;if(r)return!0;n.line=e+1;let u=n.push("hr","hr",0);return u.map=[e,n.line],u.markup=Array(a+1).join(String.fromCharCode(s)),!0}function mT(n,e){let t=n.eMarks[e],r=n.bMarks[e]+n.tShift[e],i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){let o=n.src.charCodeAt(r);if(!ue(o))return-1}return r}function hT(n,e){let t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e],i=t;if(i+1>=r)return-1;let o=n.src.charCodeAt(i++);if(o<48||o>57)return-1;for(;;){if(i>=r)return-1;if(o=n.src.charCodeAt(i++),o>=48&&o<=57){if(i-t>=10)return-1;continue}if(o===41||o===46)break;return-1}return i<r&&(o=n.src.charCodeAt(i),!ue(o))?-1:i}function V5(n,e){let t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function Sg(n,e,t,r){let i,o,s,a,u=e,l=!0;if(n.sCount[u]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[u]-n.listIndent>=4&&n.sCount[u]<n.blkIndent)return!1;let p=!1;r&&n.parentType==="paragraph"&&n.sCount[u]>=n.blkIndent&&(p=!0);let d,f,h;if((h=hT(n,u))>=0){if(d=!0,s=n.bMarks[u]+n.tShift[u],f=Number(n.src.slice(s,h-1)),p&&f!==1)return!1}else if((h=mT(n,u))>=0)d=!1;else return!1;if(p&&n.skipSpaces(h)>=n.eMarks[u])return!1;if(r)return!0;let m=n.src.charCodeAt(h-1),g=n.tokens.length;d?(a=n.push("ordered_list_open","ol",1),f!==1&&(a.attrs=[["start",f]])):a=n.push("bullet_list_open","ul",1);let x=[u,0];a.map=x,a.markup=String.fromCharCode(m);let I=!1,T=n.md.block.ruler.getRules("list"),b=n.parentType;for(n.parentType="list";u<t;){o=h,i=n.eMarks[u];let y=n.sCount[u]+h-(n.bMarks[u]+n.tShift[u]),S=y;for(;o<i;){let C=n.src.charCodeAt(o);if(C===9)S+=4-(S+n.bsCount[u])%4;else if(C===32)S++;else break;o++}let A=o,k;A>=i?k=1:k=S-y,k>4&&(k=1);let O=y+k;a=n.push("list_item_open","li",1),a.markup=String.fromCharCode(m);let Y=[u,0];a.map=Y,d&&(a.info=n.src.slice(s,h-1));let le=n.tight,Be=n.tShift[u],tr=n.sCount[u],It=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=O,n.tight=!0,n.tShift[u]=A-n.bMarks[u],n.sCount[u]=S,A>=i&&n.isEmpty(u+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,u,t,!0),(!n.tight||I)&&(l=!1),I=n.line-u>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=It,n.tShift[u]=Be,n.sCount[u]=tr,n.tight=le,a=n.push("list_item_close","li",-1),a.markup=String.fromCharCode(m),u=n.line,Y[1]=u,u>=t||n.sCount[u]<n.blkIndent||n.sCount[u]-n.blkIndent>=4)break;let R=!1;for(let C=0,M=T.length;C<M;C++)if(T[C](n,u,t,!0)){R=!0;break}if(R)break;if(d){if(h=hT(n,u),h<0)break;s=n.bMarks[u]+n.tShift[u]}else if(h=mT(n,u),h<0)break;if(m!==n.src.charCodeAt(h-1))break}return d?a=n.push("ordered_list_close","ol",-1):a=n.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(m),x[1]=u,n.line=u,n.parentType=b,l&&V5(n,g),!0}function Rg(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],s=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function a(T){let b=n.lineMax;if(T>=b||n.isEmpty(T))return null;let y=!1;if(n.sCount[T]-n.blkIndent>3&&(y=!0),n.sCount[T]<0&&(y=!0),!y){let k=n.md.block.ruler.getRules("reference"),O=n.parentType;n.parentType="reference";let Y=!1;for(let le=0,Be=k.length;le<Be;le++)if(k[le](n,T,b,!0)){Y=!0;break}if(n.parentType=O,Y)return null}let S=n.bMarks[T]+n.tShift[T],A=n.eMarks[T];return n.src.slice(S,A+1)}let u=n.src.slice(i,o+1);o=u.length;let l=-1;for(i=1;i<o;i++){let T=u.charCodeAt(i);if(T===91)return!1;if(T===93){l=i;break}else if(T===10){let b=a(s);b!==null&&(u+=b,o=u.length,s++)}else if(T===92&&(i++,i<o&&u.charCodeAt(i)===10)){let b=a(s);b!==null&&(u+=b,o=u.length,s++)}}if(l<0||u.charCodeAt(l+1)!==58)return!1;for(i=l+2;i<o;i++){let T=u.charCodeAt(i);if(T===10){let b=a(s);b!==null&&(u+=b,o=u.length,s++)}else if(!ue(T))break}let p=n.md.helpers.parseLinkDestination(u,i,o);if(!p.ok)return!1;let d=n.md.normalizeLink(p.str);if(!n.md.validateLink(d))return!1;i=p.pos;let f=i,h=s,m=i;for(;i<o;i++){let T=u.charCodeAt(i);if(T===10){let b=a(s);b!==null&&(u+=b,o=u.length,s++)}else if(!ue(T))break}let g=n.md.helpers.parseLinkTitle(u,i,o);for(;g.can_continue;){let T=a(s);if(T===null)break;u+=T,i=o,o=u.length,s++,g=n.md.helpers.parseLinkTitle(u,i,o,g)}let x;for(i<o&&m!==i&&g.ok?(x=g.str,i=g.pos):(x="",i=f,s=h);i<o;){let T=u.charCodeAt(i);if(!ue(T))break;i++}if(i<o&&u.charCodeAt(i)!==10&&x)for(x="",i=f,s=h;i<o;){let T=u.charCodeAt(i);if(!ue(T))break;i++}if(i<o&&u.charCodeAt(i)!==10)return!1;let I=wo(u.slice(1,l));return I?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[I]>"u"&&(n.env.references[I]={title:x,href:d}),n.line=s),!0):!1}var gT=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];var q5="[a-zA-Z_:][a-zA-Z0-9:._-]*",$5="[^\"'=<>`\\x00-\\x20]+",W5="'[^']*'",j5='"[^"]*"',G5="(?:"+$5+"|"+W5+"|"+j5+")",z5="(?:\\s+"+q5+"(?:\\s*=\\s*"+G5+")?)",bT="<[A-Za-z][A-Za-z0-9\\-]*"+z5+"*\\s*\\/?>",vT="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",H5="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",K5="<[?][\\s\\S]*?[?]>",J5="<![A-Za-z][^>]*>",Q5="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",xT=new RegExp("^(?:"+bT+"|"+vT+"|"+H5+"|"+K5+"|"+J5+"|"+Q5+")"),yT=new RegExp("^(?:"+bT+"|"+vT+")");var pa=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+gT.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yT.source+"\\s*$"),/^$/,!1]];function Dg(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let s=n.src.slice(i,o),a=0;for(;a<pa.length&&!pa[a][0].test(s);a++);if(a===pa.length)return!1;if(r)return pa[a][2];let u=e+1;if(!pa[a][1].test(s)){for(;u<t&&!(n.sCount[u]<n.blkIndent);u++)if(i=n.bMarks[u]+n.tShift[u],o=n.eMarks[u],s=n.src.slice(i,o),pa[a][1].test(s)){s.length!==0&&u++;break}}n.line=u;let l=n.push("html_block","",0);return l.map=[e,u],l.content=n.getLines(e,u,n.blkIndent,!0),!0}function Ag(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],o=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let s=n.src.charCodeAt(i);if(s!==35||i>=o)return!1;let a=1;for(s=n.src.charCodeAt(++i);s===35&&i<o&&a<=6;)a++,s=n.src.charCodeAt(++i);if(a>6||i<o&&!ue(s))return!1;if(r)return!0;o=n.skipSpacesBack(o,i);let u=n.skipCharsBack(o,35,i);u>i&&ue(n.src.charCodeAt(u-1))&&(o=u),n.line=e+1;let l=n.push("heading_open","h"+String(a),1);l.markup="########".slice(0,a),l.map=[e,n.line];let p=n.push("inline","",0);p.content=n.src.slice(i,o).trim(),p.map=[e,n.line],p.children=[];let d=n.push("heading_close","h"+String(a),-1);return d.markup="########".slice(0,a),!0}function Pg(n,e,t){let r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;let i=n.parentType;n.parentType="paragraph";let o=0,s,a=e+1;for(;a<t&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3)continue;if(n.sCount[a]>=n.blkIndent){let h=n.bMarks[a]+n.tShift[a],m=n.eMarks[a];if(h<m&&(s=n.src.charCodeAt(h),(s===45||s===61)&&(h=n.skipChars(h,s),h=n.skipSpaces(h),h>=m))){o=s===61?1:2;break}}if(n.sCount[a]<0)continue;let f=!1;for(let h=0,m=r.length;h<m;h++)if(r[h](n,a,t,!0)){f=!0;break}if(f)break}if(!o)return!1;let u=n.getLines(e,a,n.blkIndent,!1).trim();n.line=a+1;let l=n.push("heading_open","h"+String(o),1);l.markup=String.fromCharCode(s),l.map=[e,n.line];let p=n.push("inline","",0);p.content=u,p.map=[e,n.line-1],p.children=[];let d=n.push("heading_close","h"+String(o),-1);return d.markup=String.fromCharCode(s),n.parentType=i,!0}function Lg(n,e,t){let r=n.md.block.ruler.getRules("paragraph"),i=n.parentType,o=e+1;for(n.parentType="paragraph";o<t&&!n.isEmpty(o);o++){if(n.sCount[o]-n.blkIndent>3||n.sCount[o]<0)continue;let l=!1;for(let p=0,d=r.length;p<d;p++)if(r[p](n,o,t,!0)){l=!0;break}if(l)break}let s=n.getLines(e,o,n.blkIndent,!1).trim();n.line=o;let a=n.push("paragraph_open","p",1);a.map=[e,n.line];let u=n.push("inline","",0);return u.content=s,u.map=[e,n.line],u.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}var kp=[["table",kg,["paragraph","reference"]],["code",Ig],["fence",wg,["paragraph","reference","blockquote","list"]],["blockquote",Cg,["paragraph","reference","blockquote","list"]],["hr",Eg,["paragraph","reference","blockquote","list"]],["list",Sg,["paragraph","reference","blockquote"]],["reference",Rg],["html_block",Dg,["paragraph","reference","blockquote"]],["heading",Ag,["paragraph","reference","blockquote"]],["lheading",Pg],["paragraph",Lg]];function Ip(){this.ruler=new Co;for(let n=0;n<kp.length;n++)this.ruler.push(kp[n][0],kp[n][1],{alt:(kp[n][2]||[]).slice()})}Ip.prototype.tokenize=function(n,e,t){let r=this.ruler.getRules(""),i=r.length,o=n.md.options.maxNesting,s=e,a=!1;for(;s<t&&(n.line=s=n.skipEmptyLines(s),!(s>=t||n.sCount[s]<n.blkIndent));){if(n.level>=o){n.line=t;break}let u=n.line,l=!1;for(let p=0;p<i;p++)if(l=r[p](n,s,t,!1),l){if(u>=n.line)throw new Error("block rule didn't increment state.line");break}if(!l)throw new Error("none of the block rules matched");n.tight=!a,n.isEmpty(n.line-1)&&(a=!0),s=n.line,s<t&&n.isEmpty(s)&&(a=!0,s++,n.line=s)}};Ip.prototype.parse=function(n,e,t,r){if(!n)return;let i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};Ip.prototype.State=pT;var TT=Ip;function Wu(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Wu.prototype.pushPending=function(){let n=new Rr("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};Wu.prototype.push=function(n,e,t){this.pending&&this.pushPending();let r=new Rr(n,e,t),i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};Wu.prototype.scanDelims=function(n,e){let t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32,o=n;for(;o<t&&this.src.charCodeAt(o)===r;)o++;let s=o-n,a=o<t?this.src.charCodeAt(o):32,u=Io(i)||ko(String.fromCharCode(i)),l=Io(a)||ko(String.fromCharCode(a)),p=_o(i),d=_o(a),f=!d&&(!l||p||u),h=!p&&(!u||d||l);return{can_open:f&&(e||!h||u),can_close:h&&(e||!f||l),length:s}};Wu.prototype.Token=Rr;var _T=Wu;function X5(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Og(n,e){let t=n.pos;for(;t<n.posMax&&!X5(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}var Y5=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Ng(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;let t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;let i=n.pending.match(Y5);if(!i)return!1;let o=i[1],s=n.md.linkify.matchAtStart(n.src.slice(t-o.length));if(!s)return!1;let a=s.url;if(a.length<=o.length)return!1;a=a.replace(/\*+$/,"");let u=n.md.normalizeLink(a);if(!n.md.validateLink(u))return!1;if(!e){n.pending=n.pending.slice(0,-o.length);let l=n.push("link_open","a",1);l.attrs=[["href",u]],l.markup="linkify",l.info="auto";let p=n.push("text","",0);p.content=n.md.normalizeLinkText(a);let d=n.push("link_close","a",-1);d.markup="linkify",d.info="auto"}return n.pos+=a.length-o.length,!0}function Fg(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;let r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let o=r-1;for(;o>=1&&n.pending.charCodeAt(o-1)===32;)o--;n.pending=n.pending.slice(0,o),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&ue(n.src.charCodeAt(t));)t++;return n.pos=t,!0}var Mg=[];for(let n=0;n<256;n++)Mg.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){Mg[n.charCodeAt(0)]=1});function Ug(n,e){let t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!ue(i));)t++;return n.pos=t,!0}let o=n.src[t];if(i>=55296&&i<=56319&&t+1<r){let a=n.src.charCodeAt(t+1);a>=56320&&a<=57343&&(o+=n.src[t+1],t++)}let s="\\"+o;if(!e){let a=n.push("text_special","",0);i<256&&Mg[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"}return n.pos=t+1,!0}function Bg(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;let i=t;t++;let o=n.posMax;for(;t<o&&n.src.charCodeAt(t)===96;)t++;let s=n.src.slice(i,t),a=s.length;if(n.backticksScanned&&(n.backticks[a]||0)<=i)return e||(n.pending+=s),n.pos+=a,!0;let u=t,l;for(;(l=n.src.indexOf("`",u))!==-1;){for(u=l+1;u<o&&n.src.charCodeAt(u)===96;)u++;let p=u-l;if(p===a){if(!e){let d=n.push("code_inline","code",0);d.markup=s,d.content=n.src.slice(t,l).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=u,!0}n.backticks[p]=l}return n.backticksScanned=!0,e||(n.pending+=s),n.pos+=a,!0}function Z5(n,e){let t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;let i=n.scanDelims(n.pos,!0),o=i.length,s=String.fromCharCode(r);if(o<2)return!1;let a;o%2&&(a=n.push("text","",0),a.content=s,o--);for(let u=0;u<o;u+=2)a=n.push("text","",0),a.content=s+s,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function kT(n,e){let t,r=[],i=e.length;for(let o=0;o<i;o++){let s=e[o];if(s.marker!==126||s.end===-1)continue;let a=e[s.end];t=n.tokens[s.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[a.token-1].type==="text"&&n.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){let o=r.pop(),s=o+1;for(;s<n.tokens.length&&n.tokens[s].type==="s_close";)s++;s--,o!==s&&(t=n.tokens[s],n.tokens[s]=n.tokens[o],n.tokens[o]=t)}}function e3(n){let e=n.tokens_meta,t=n.tokens_meta.length;kT(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&kT(n,e[r].delimiters)}var Vg={tokenize:Z5,postProcess:e3};function t3(n,e){let t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;let i=n.scanDelims(n.pos,r===42);for(let o=0;o<i.length;o++){let s=n.push("text","",0);s.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function IT(n,e){let t=e.length;for(let r=t-1;r>=0;r--){let i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;let o=e[i.end],s=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===o.token+1,a=String.fromCharCode(i.marker),u=n.tokens[i.token];u.type=s?"strong_open":"em_open",u.tag=s?"strong":"em",u.nesting=1,u.markup=s?a+a:a,u.content="";let l=n.tokens[o.token];l.type=s?"strong_close":"em_close",l.tag=s?"strong":"em",l.nesting=-1,l.markup=s?a+a:a,l.content="",s&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function n3(n){let e=n.tokens_meta,t=n.tokens_meta.length;IT(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&IT(n,e[r].delimiters)}var qg={tokenize:t3,postProcess:n3};function $g(n,e){let t,r,i,o,s="",a="",u=n.pos,l=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;let p=n.pos,d=n.posMax,f=n.pos+1,h=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(h<0)return!1;let m=h+1;if(m<d&&n.src.charCodeAt(m)===40){for(l=!1,m++;m<d&&(t=n.src.charCodeAt(m),!(!ue(t)&&t!==10));m++);if(m>=d)return!1;if(u=m,i=n.md.helpers.parseLinkDestination(n.src,m,n.posMax),i.ok){for(s=n.md.normalizeLink(i.str),n.md.validateLink(s)?m=i.pos:s="",u=m;m<d&&(t=n.src.charCodeAt(m),!(!ue(t)&&t!==10));m++);if(i=n.md.helpers.parseLinkTitle(n.src,m,n.posMax),m<d&&u!==m&&i.ok)for(a=i.str,m=i.pos;m<d&&(t=n.src.charCodeAt(m),!(!ue(t)&&t!==10));m++);}(m>=d||n.src.charCodeAt(m)!==41)&&(l=!0),m++}if(l){if(typeof n.env.references>"u")return!1;if(m<d&&n.src.charCodeAt(m)===91?(u=m+1,m=n.md.helpers.parseLinkLabel(n,m),m>=0?r=n.src.slice(u,m++):m=h+1):m=h+1,r||(r=n.src.slice(f,h)),o=n.env.references[wo(r)],!o)return n.pos=p,!1;s=o.href,a=o.title}if(!e){n.pos=f,n.posMax=h;let g=n.push("link_open","a",1),x=[["href",s]];g.attrs=x,a&&x.push(["title",a]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=m,n.posMax=d,!0}function Wg(n,e){let t,r,i,o,s,a,u,l,p="",d=n.pos,f=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;let h=n.pos+2,m=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(m<0)return!1;if(o=m+1,o<f&&n.src.charCodeAt(o)===40){for(o++;o<f&&(t=n.src.charCodeAt(o),!(!ue(t)&&t!==10));o++);if(o>=f)return!1;for(l=o,a=n.md.helpers.parseLinkDestination(n.src,o,n.posMax),a.ok&&(p=n.md.normalizeLink(a.str),n.md.validateLink(p)?o=a.pos:p=""),l=o;o<f&&(t=n.src.charCodeAt(o),!(!ue(t)&&t!==10));o++);if(a=n.md.helpers.parseLinkTitle(n.src,o,n.posMax),o<f&&l!==o&&a.ok)for(u=a.str,o=a.pos;o<f&&(t=n.src.charCodeAt(o),!(!ue(t)&&t!==10));o++);else u="";if(o>=f||n.src.charCodeAt(o)!==41)return n.pos=d,!1;o++}else{if(typeof n.env.references>"u")return!1;if(o<f&&n.src.charCodeAt(o)===91?(l=o+1,o=n.md.helpers.parseLinkLabel(n,o),o>=0?i=n.src.slice(l,o++):o=m+1):o=m+1,i||(i=n.src.slice(h,m)),s=n.env.references[wo(i)],!s)return n.pos=d,!1;p=s.href,u=s.title}if(!e){r=n.src.slice(h,m);let g=[];n.md.inline.parse(r,n.md,n.env,g);let x=n.push("image","img",0),I=[["src",p],["alt",""]];x.attrs=I,x.children=g,x.content=r,u&&I.push(["title",u])}return n.pos=o,n.posMax=f,!0}var r3=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,i3=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function jg(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;let r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;let s=n.src.charCodeAt(t);if(s===60)return!1;if(s===62)break}let o=n.src.slice(r+1,t);if(i3.test(o)){let s=n.md.normalizeLink(o);if(!n.md.validateLink(s))return!1;if(!e){let a=n.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let u=n.push("text","",0);u.content=n.md.normalizeLinkText(o);let l=n.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return n.pos+=o.length+2,!0}if(r3.test(o)){let s=n.md.normalizeLink("mailto:"+o);if(!n.md.validateLink(s))return!1;if(!e){let a=n.push("link_open","a",1);a.attrs=[["href",s]],a.markup="autolink",a.info="auto";let u=n.push("text","",0);u.content=n.md.normalizeLinkText(o);let l=n.push("link_close","a",-1);l.markup="autolink",l.info="auto"}return n.pos+=o.length+2,!0}return!1}function o3(n){return/^<a[>\s]/i.test(n)}function s3(n){return/^<\/a\s*>/i.test(n)}function a3(n){let e=n|32;return e>=97&&e<=122}function Gg(n,e){if(!n.md.options.html)return!1;let t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;let i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!a3(i))return!1;let o=n.src.slice(r).match(xT);if(!o)return!1;if(!e){let s=n.push("html_inline","",0);s.content=o[0],o3(s.content)&&n.linkLevel++,s3(s.content)&&n.linkLevel--}return n.pos+=o[0].length,!0}var u3=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,l3=/^&([a-z][a-z0-9]{1,31});/i;function zg(n,e){let t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){let o=n.src.slice(t).match(u3);if(o){if(!e){let s=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),a=n.push("text_special","",0);a.content=Tp(s)?$u(s):$u(65533),a.markup=o[0],a.info="entity"}return n.pos+=o[0].length,!0}}else{let o=n.src.slice(t).match(l3);if(o){let s=_i(o[0]);if(s!==o[0]){if(!e){let a=n.push("text_special","",0);a.content=s,a.markup=o[0],a.info="entity"}return n.pos+=o[0].length,!0}}}return!1}function wT(n){let e={},t=n.length;if(!t)return;let r=0,i=-2,o=[];for(let s=0;s<t;s++){let a=n[s];if(o.push(0),(n[r].marker!==a.marker||i!==a.token-1)&&(r=s),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);let u=e[a.marker][(a.open?3:0)+a.length%3],l=r-o[r]-1,p=l;for(;l>u;l-=o[l]+1){let d=n[l];if(d.marker===a.marker&&d.open&&d.end<0){let f=!1;if((d.close||a.open)&&(d.length+a.length)%3===0&&(d.length%3!==0||a.length%3!==0)&&(f=!0),!f){let h=l>0&&!n[l-1].open?o[l-1]+1:0;o[s]=s-l+h,o[l]=h,a.open=!1,d.end=s,d.close=!1,p=-1,i=-2;break}}}p!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=p)}}function Hg(n){let e=n.tokens_meta,t=n.tokens_meta.length;wT(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&wT(e[r].delimiters)}function Kg(n){let e,t,r=0,i=n.tokens,o=n.tokens.length;for(e=t=0;e<o;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<o&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}var Jg=[["text",Og],["linkify",Ng],["newline",Fg],["escape",Ug],["backticks",Bg],["strikethrough",Vg.tokenize],["emphasis",qg.tokenize],["link",$g],["image",Wg],["autolink",jg],["html_inline",Gg],["entity",zg]],Qg=[["balance_pairs",Hg],["strikethrough",Vg.postProcess],["emphasis",qg.postProcess],["fragments_join",Kg]];function ju(){this.ruler=new Co;for(let n=0;n<Jg.length;n++)this.ruler.push(Jg[n][0],Jg[n][1]);this.ruler2=new Co;for(let n=0;n<Qg.length;n++)this.ruler2.push(Qg[n][0],Qg[n][1])}ju.prototype.skipToken=function(n){let e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,o=n.cache;if(typeof o[e]<"u"){n.pos=o[e];return}let s=!1;if(n.level<i){for(let a=0;a<r;a++)if(n.level++,s=t[a](n,!0),n.level--,s){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;s||n.pos++,o[e]=n.pos};ju.prototype.tokenize=function(n){let e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){let o=n.pos,s=!1;if(n.level<i){for(let a=0;a<t;a++)if(s=e[a](n,!1),s){if(o>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};ju.prototype.parse=function(n,e,t,r){let i=new this.State(n,e,t,r);this.tokenize(i);let o=this.ruler2.getRules(""),s=o.length;for(let a=0;a<s;a++)o[a](i)};ju.prototype.State=_T;var CT=ju;function ET(n){let e={};n=n||{},e.src_Any=mp.source,e.src_Cc=hp.source,e.src_Z=bp.source,e.src_P=ua.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");let t="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Xg(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function Cp(n){return Object.prototype.toString.call(n)}function c3(n){return Cp(n)==="[object String]"}function d3(n){return Cp(n)==="[object Object]"}function p3(n){return Cp(n)==="[object RegExp]"}function ST(n){return Cp(n)==="[object Function]"}function f3(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var DT={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function m3(n){return Object.keys(n||{}).reduce(function(e,t){return e||DT.hasOwnProperty(t)},!1)}var h3={"http:":{validate:function(n,e,t){let r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){let r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){let r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},g3="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",b3="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function v3(n){n.__index__=-1,n.__text_cache__=""}function x3(n){return function(e,t){let r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function RT(){return function(n,e){e.normalize(n)}}function wp(n){let e=n.re=ET(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(g3),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");let i=[];n.__compiled__={};function o(a,u){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+u)}Object.keys(n.__schemas__).forEach(function(a){let u=n.__schemas__[a];if(u===null)return;let l={validate:null,link:null};if(n.__compiled__[a]=l,d3(u)){p3(u.validate)?l.validate=x3(u.validate):ST(u.validate)?l.validate=u.validate:o(a,u),ST(u.normalize)?l.normalize=u.normalize:u.normalize?o(a,u):l.normalize=RT();return}if(c3(u)){i.push(a);return}o(a,u)}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:RT()};let s=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(f3).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),v3(n)}function y3(n,e){let t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function Yg(n,e){let t=new y3(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function Zt(n,e){if(!(this instanceof Zt))return new Zt(n,e);e||m3(n)&&(e=n,n={}),this.__opts__=Xg({},DT,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Xg({},h3,n),this.__compiled__={},this.__tlds__=b3,this.__tlds_replaced__=!1,this.re={},wp(this)}Zt.prototype.add=function(e,t){return this.__schemas__[e]=t,wp(this),this};Zt.prototype.set=function(e){return this.__opts__=Xg(this.__opts__,e),this};Zt.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,o,s,a,u,l,p;if(this.re.schema_test.test(e)){for(u=this.re.schema_search,u.lastIndex=0;(t=u.exec(e))!==null;)if(o=this.testSchemaAt(e,t[2],u.lastIndex),o){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(p=e.indexOf("@"),p>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};Zt.prototype.pretest=function(e){return this.re.pretest.test(e)};Zt.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};Zt.prototype.match=function(e){let t=[],r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(Yg(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(Yg(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};Zt.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let t=this.re.schema_at_start.exec(e);if(!t)return null;let r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,Yg(this,0)):null};Zt.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,o){return r!==o[i-1]}).reverse(),wp(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,wp(this),this)};Zt.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Zt.prototype.onCompile=function(){};var AT=Zt;var T3=/^xn--/,_3=/[^\0-\x7F]/,k3=/[\x2E\u3002\uFF0E\uFF61]/g,I3={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Zg=35,er=Math.floor,e0=String.fromCharCode;function ki(n){throw new RangeError(I3[n])}function w3(n,e){let t=[],r=n.length;for(;r--;)t[r]=e(n[r]);return t}function LT(n,e){let t=n.split("@"),r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(k3,".");let i=n.split("."),o=w3(i,e).join(".");return r+o}function OT(n){let e=[],t=0,r=n.length;for(;t<r;){let i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){let o=n.charCodeAt(t++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}var C3=n=>String.fromCodePoint(...n),E3=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:36},PT=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},NT=function(n,e,t){let r=0;for(n=t?er(n/700):n>>1,n+=er(n/e);n>Zg*26>>1;r+=36)n=er(n/Zg);return er(r+(Zg+1)*n/(n+38))},FT=function(n){let e=[],t=n.length,r=0,i=128,o=72,s=n.lastIndexOf("-");s<0&&(s=0);for(let a=0;a<s;++a)n.charCodeAt(a)>=128&&ki("not-basic"),e.push(n.charCodeAt(a));for(let a=s>0?s+1:0;a<t;){let u=r;for(let p=1,d=36;;d+=36){a>=t&&ki("invalid-input");let f=E3(n.charCodeAt(a++));f>=36&&ki("invalid-input"),f>er((2147483647-r)/p)&&ki("overflow"),r+=f*p;let h=d<=o?1:d>=o+26?26:d-o;if(f<h)break;let m=36-h;p>er(2147483647/m)&&ki("overflow"),p*=m}let l=e.length+1;o=NT(r-u,l,u==0),er(r/l)>2147483647-i&&ki("overflow"),i+=er(r/l),r%=l,e.splice(r++,0,i)}return String.fromCodePoint(...e)},MT=function(n){let e=[];n=OT(n);let t=n.length,r=128,i=0,o=72;for(let u of n)u<128&&e.push(e0(u));let s=e.length,a=s;for(s&&e.push("-");a<t;){let u=2147483647;for(let p of n)p>=r&&p<u&&(u=p);let l=a+1;u-r>er((2147483647-i)/l)&&ki("overflow"),i+=(u-r)*l,r=u;for(let p of n)if(p<r&&++i>2147483647&&ki("overflow"),p===r){let d=i;for(let f=36;;f+=36){let h=f<=o?1:f>=o+26?26:f-o;if(d<h)break;let m=d-h,g=36-h;e.push(e0(PT(h+m%g,0))),d=er(m/g)}e.push(e0(PT(d,0))),o=NT(i,l,a===s),i=0,++a}++i,++r}return e.join("")},S3=function(n){return LT(n,function(e){return T3.test(e)?FT(e.slice(4).toLowerCase()):e})},R3=function(n){return LT(n,function(e){return _3.test(e)?"xn--"+MT(e):e})},D3={version:"2.3.1",ucs2:{decode:OT,encode:C3},decode:FT,encode:MT,toASCII:R3,toUnicode:S3};var t0=D3;var UT={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}};var BT={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}};var VT={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}};var A3={default:UT,zero:BT,commonmark:VT},P3=/^(vbscript|javascript|file|data):/,L3=/^data:image\/(gif|png|jpeg|webp);/;function O3(n){let e=n.trim().toLowerCase();return P3.test(e)?L3.test(e):!0}var qT=["http:","https:","mailto:"];function N3(n){let e=qu(n,!0);if(e.hostname&&(!e.protocol||qT.indexOf(e.protocol)>=0))try{e.hostname=t0.toASCII(e.hostname)}catch{}return dp(aa(e))}function F3(n){let e=qu(n,!0);if(e.hostname&&(!e.protocol||qT.indexOf(e.protocol)>=0))try{e.hostname=t0.toUnicode(e.hostname)}catch{}return Vu(aa(e),Vu.defaultChars+"%")}function fn(n,e){if(!(this instanceof fn))return new fn(n,e);e||yp(n)||(e=n||{},n="default"),this.inline=new CT,this.block=new TT,this.core=new dT,this.renderer=new oT,this.linkify=new AT,this.validateLink=O3,this.normalizeLink=N3,this.normalizeLinkText=F3,this.utils=ug,this.helpers=la({},pg),this.options={},this.configure(n),e&&this.set(e)}fn.prototype.set=function(n){return la(this.options,n),this};fn.prototype.configure=function(n){let e=this;if(yp(n)){let t=n;if(n=A3[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};fn.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));let r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};fn.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));let r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};fn.prototype.use=function(n){let e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};fn.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");let t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};fn.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};fn.prototype.parseInline=function(n,e){let t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};fn.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};var n0=fn;Oi();Je();var wre=new At(()=>{let n=new Map;return ym.forEach((e,t)=>{e.markdownLanguageIds?e.markdownLanguageIds.forEach(r=>{n.set(r,t)}):n.set(t,t)}),n});function $T(n){let e=[],r=new n0().parse(n,{});for(let i of WT(r))i.map&&i.type==="fence"&&e.push({startMarkup:i.markup,code:i.content.replace(/\n$/,""),language:i.info.trim(),startLine:i.map[0],endLine:i.map[1]});return e}function*WT(n){for(let e of n)e.children&&(yield*WT(e.children)),yield e}function M3(n){return n.replace(/[^a-zA-Z0-9_]/g,"_").toLowerCase()}async function jT(n,e,t){let r=[];for(let i=0;i<e.length;i+=Yh){let o=e.slice(i,i+Yh),s=U3(n,o,t);r.push(s.catch(()=>o.map(()=>{})))}return(await Promise.all(r)).flat()}async function U3(n,e,t){let i=await new Dr.PromptRenderer(n,i0,{toolGroups:e},n.acquireTokenizer()).render(void 0,t),o=await B3(n,i,t),s=Array.from({length:e.length},()=>{});if(!o||!Array.isArray(o))return s;for(let a of o){let u=Number(a.groupIndex)-1;!isNaN(u)&&e[u]&&typeof a.groupName=="string"&&typeof a.summary=="string"&&(s[u]={name:M3(a.groupName),summary:a.summary,tools:e[u]})}return s}var r0=class extends Dr.PromptElement{render(){let{tool:e}=this.props;return vscpp(vscppf,null,`<tool name=${JSON.stringify(e.name)}>${e.description}</tool>`,vscpp("br",null))}},i0=class extends Dr.PromptElement{render(){return vscpp(vscppf,null,vscpp(Dr.SystemMessage,null,"Context: You are given multiple groups of tools that have been clustered together based on semantic similarity. Your task is to provide a descriptive name and summary for each group that accurately reflects the common functionality and purpose of the tools within that group.",vscpp("br",null),vscpp("br",null),"For each group, analyze the tools and determine what they have in common, what domain or functionality they serve, and how they might be used together. Create a concise but descriptive name and a comprehensive summary for each group.",vscpp("br",null)),vscpp(Dr.UserMessage,null,"You will be given ",this.props.toolGroups.length," groups of tools. For each group, provide a name and summary that describes the group's purpose and capabilities.",vscpp("br",null),vscpp("br",null),this.props.toolGroups.map((e,t)=>{let r=t+1;return vscpp(vscppf,null,`<group index="${r}">`,vscpp("br",null),e.map(i=>vscpp(r0,{tool:i})),"</group>",vscpp("br",null))}),vscpp("br",null),"Your response must follow the JSON schema:",vscpp("br",null),vscpp("br",null),"```",vscpp("br",null),JSON.stringify({type:"array",items:{type:"object",required:["groupIndex","groupName","summary"],properties:{groupIndex:{type:"integer",description:'The index of the group as provided above (e.g., "1", "2", etc.)',example:1},groupName:{type:"string",description:"A short, descriptive name for the group. It may only contain the characters a-z, A-Z, 0-9, and underscores.",example:"file_management_tools"},summary:{type:"string",description:"A comprehensive summary of the group capabilities, including what the tools do and how they can be used together. This may be up to five paragraphs long, be careful not to leave out important details.",example:"These tools provide comprehensive file management capabilities including reading, writing, searching, and organizing files and directories."}}}},null,2),vscpp("br",null),"```",vscpp("br",null),vscpp("br",null),"Provide descriptions for the groups presented above. You must include the exact groupIndex as shown in the input. You must generate a description for every group and each groupName must be unique.",vscpp("br",null)))}};async function B3(n,e,t){let r=await n.makeChatRequest("summarizeVirtualTools",e.messages,void 0,t,6);if(r.type!=="success")return;for(let o of $T(r.value))try{return gm(o.code)}catch{}let i=r.value.indexOf("{");return gm(r.value.slice(i))||void 0}var GT=_("IToolGroupingService"),Ep=_("IToolGroupingCache");var V3="copilot-fast",zT=`Call this tool when you need access to a new category of tools. The category of tools is described as follows:

`,HT=`

Be sure to call this tool if you need a capability related to the above.`,Ii=class{constructor(e,t,r,i,o,s,a,u,l){this._endpointProvider=e;this._cache=t;this._telemetryService=r;this._logService=i;this.embeddingsComputer=o;this._configurationService=s;this._expService=a;this._toolEmbeddingsComputer=u;this.builtInToolGroupHandler=new To}shouldTriggerBuiltInGrouping(e){let t=this._configurationService.getExperimentBasedConfig(xe.AdvancedExperimentalExperiments.DefaultToolsGrouped,this._expService);return e.length>M2&&t}async addGroups(e,t,r,i){if(!this.shouldTriggerBuiltInGrouping(r)&&r.length<F2){t.contents=r;return}let s=Ro(r,m=>m.source instanceof lm?"ext_"+m.source.id:m.source instanceof um?"mcp_"+m.source.label:To.BUILT_IN_GROUP_KEY),a=new Map;for(let m of t.all())m instanceof mt&&a.set(m.name,m);let u=new Et,l=this._getPredictedTools(e,r,i).then(m=>({tools:m,durationMs:u.elapsed()})),p=s[To.BUILT_IN_GROUP_KEY]||[],d=Object.entries(s).filter(([m])=>m!==To.BUILT_IN_GROUP_KEY),f=[];if(this.shouldTriggerBuiltInGrouping(p)){let m=this.builtInToolGroupHandler.createBuiltInToolGroups(p);f.push(...m)}else f.push(...p);if(d.length>0){let m=f.length,g=B2-m,x=this._allocateSlots(d,g),I=await Promise.all([...d].map(async([T,b])=>{let y=x.get(T)||0;return y>0?await this._processToolset(b,y,i):[]}));f.push(...I.flat())}if(this._cache.flush(),t.contents=Ii.deduplicateGroups(f),d.length>0){let m=d.reduce((x,[,I])=>x+I.length,0),g=f.filter(x=>x instanceof mt).length;this._telemetryService.sendMSFTTelemetryEvent("virtualTools.perToolsetGenerate",{},{toolsetsProcessed:d.length,toolsBefore:m,groupsAfter:g,builtinTools:p.length})}for(let m of t.all())if(m instanceof mt){let g=a.get(m.name);g&&m.copyStateFrom(g)}await this._addEmbeddingMatchedTools(t,l)}async recomputeEmbeddingRankings(e,t,r){let i=new Et,o=[...t.all()].filter(a=>!(a instanceof mt)),s=this._getPredictedTools(e,o,r).then(a=>({tools:a,durationMs:i.elapsed()}));await this._addEmbeddingMatchedTools(t,s)}_addPredictedToolsGroup(e,t){let r=new mt(Bu,"Tools with high predicted relevancy for this query",1/0,{wasEmbeddingsMatched:!0,wasExpandedByDefault:!0,canBeCollapsed:!1});r.isExpanded=!0;for(let o of t)r.contents.push(o);let i=e.contents.findIndex(o=>o.name===Bu);i>=0?e.contents[i]=r:e.contents.push(r)}async _addEmbeddingMatchedTools(e,t){let r=new Et,i,o;try{let{tools:s,durationMs:a}=await t;o=a,this._addPredictedToolsGroup(e,s)}catch(s){i=s}finally{this._telemetryService.sendMSFTTelemetryEvent("virtualTools.expandEmbedding",{error:i?i.message:void 0},{blockingMs:r.elapsed(),computeMs:o,hadError:i?1:0})}}static deduplicateGroups(e){let t=new Set,r=[];for(let i of e){let o=i.name,s=1;for(;t.has(o);)s++,o=`${i.name}_${s}`;if(i instanceof mt&&o!==i.name){let a=i.cloneWithNewName(o);t.add(o),r.push(a)}else t.add(o),r.push(i)}return r}_allocateSlots(e,t){let r=new Map;if(e.length>=t){for(let s=0;s<e.length;s++)r.set(e[s][0],s<t?1:0);return r}let i=e.reduce((s,[,a])=>s+a.length,0),o=t-e.length;for(let[s]of e)r.set(s,1);if(o>0){let s=e.map(([a,u])=>({toolsetKey:a,proportion:u.length/i,toolCount:u.length}));s.sort((a,u)=>u.proportion-a.proportion);for(let{toolsetKey:a,proportion:u}of s){let l=Math.round(u*o),p=Math.min(l,o);r.set(a,r.get(a)+p),o-=p}for(;o>0;)for(let{toolsetKey:a}of s){if(o<=0)break;r.set(a,r.get(a)+1),o--}}return r}async _processToolset(e,t,r){if(t>=e.length)return e;if(t===1){let o=(await this._generateBulkGroupDescriptions([e],r)).groups[0];return[new mt(Qn+o.name,zT+o.summary+HT,0,{},o.tools)]}return await this._generateEmbeddingBasedGroups(e,t,r)}async _getPredictedTools(e,t,r){if(!e)return[];let i=await this.embeddingsComputer.computeEmbeddings(Xh,[e],{},new ri("VirtualToolGrouper::_getPredictedTools"),r);if(!i||i.values.length===0)return[];let o=i.values[0],s=t.filter(p=>p.source instanceof lm||p.source instanceof um),a=await this._toolEmbeddingsComputer.retrieveSimilarEmbeddingsForAvailableTools(o,s,10,r);if(!a)return[];let u=new Map(t.map(p=>[p.name,p]));return a.map(p=>u.get(p)).filter(p=>p!==void 0)}async _generateEmbeddingBasedGroups(e,t,r){if(e.length<=yo)return[];let i=[];try{i=await this._toolEmbeddingsComputer.computeToolGroupings(e,t,r),this._logService.trace(`[virtual-tools] Embedding-based grouping created ${i.length} groups from ${e.length} tools`)}catch(u){throw this._logService.error(`Failed to create embedding-based groups: ${u}`),u}let o=i.filter(u=>u.length===1).map(u=>u[0]),s=i.filter(u=>u.length>1),a=await this._generateBulkGroupDescriptions(s,r);return this._logService.trace(`[virtual-tools] Embedding-based grouping created ${a.groups.length} groups from ${e.length} tools`),a.groups.map(u=>new mt(Qn+u.name,zT+u.summary+HT,0,{},u.tools)).concat(o)}async _generateBulkGroupDescriptions(e,t){let r=await Promise.all(e.map(l=>this._cache.getDescription(l))),i=[],o=[];for(let l of r)l.category?o.push(l.category):i.push(l);let s=await this._endpointProvider.getChatEndpoint(V3),a=await jT(s,i.map(l=>l.tools),t),u=0;for(let l=0;l<a.length;l++){let p=a[l],d=i[l];p?(d.update(p),o.push(p)):(u++,o.push({name:`group_${l}`,summary:`Contains the tools: ${d.tools.map(f=>f.name).join(", ")}`,tools:d.tools}))}return{groups:o,missed:u}}};Ii=E([v(0,Ds),v(1,Ep),v(2,ge),v(3,Z),v(4,xr),v(5,et),v(6,gt),v(7,ap),v(8,_e)],Ii);function KT(n,e){return e.getExperimentBasedConfigObservable(xe.VirtualToolThreshold,n).map(t=>{let r=t??br;return r<=0?1/0:r})}var fa=class{constructor(e,t,r){this._tools=e;this._instantiationService=t;this._telemetryService=r;this._root=new mt(Qn,"",1/0,{wasExpandedByDefault:!0});this._grouper=this._instantiationService.createInstance(Ii);this._didToolsChange=!0;this._turnNo=0;this._trimOnNextCompute=!1;this._root.isExpanded=!0}get tools(){return this._tools}set tools(e){Do(this._tools,e,(t,r)=>t.name===r.name)||(this._tools=e,this._didToolsChange=!0)}didCall(e,t){let r=this._root.find(t);if(!r)return;let{path:i,tool:o}=r;for(let s of i)s.lastUsedOnTurn=this._turnNo;if(i.length>1&&this._telemetryService.sendMSFTTelemetryEvent("virtualTools.called",{callName:o.name},{turnNo:e,isVirtual:o instanceof mt?1:0,depth:i.length-1,preExpanded:i.every(s=>s.metadata.wasExpandedByDefault)?1:0,wasEmbedding:i.some(s=>s.name===Bu)?1:0,totalTools:this._tools.length}),o instanceof mt)return o.isExpanded=!0,new Xb([new Yb(`Tools activated: ${[...o.tools()].map(s=>s.name).join(", ")}`)])}getContainerFor(e){let r=this._root.find(e)?.path.at(-1);return r===this._root?void 0:r}didTakeTurn(){this._turnNo++}didInvalidateCache(){this._trimOnNextCompute=!0}ensureExpanded(e){this._expandOnNext??=new Set,this._expandOnNext.add(e)}async compute(e,t){return await this._doCompute(e,t),[...this._root.tools()].filter(M0(r=>r.name))}async computeAll(e,t){return await this._doCompute(e,t),this._root.contents}async _doCompute(e,t){if(this._didToolsChange&&(await this._grouper.addGroups(e,this._root,this._tools.slice(),t),this._didToolsChange=!1),this._expandOnNext){for(let i of this._expandOnNext)this._root.find(i)?.path.forEach(o=>{o.isExpanded=!0,o.lastUsedOnTurn=this._turnNo});this._expandOnNext=void 0}let r=br;for(this._trimOnNextCompute&&(await this._grouper.recomputeEmbeddingRankings(e,this._root,t),r=U2,this._trimOnNextCompute=!1),this._root.lastUsedOnTurn=1/0;$t.length(this._root.tools())>r;){let i=this._root.getLowestExpandedTool();if(!i||!isFinite(i.lastUsedOnTurn))break;if(i.metadata.canBeCollapsed===!1){i.lastUsedOnTurn=1/0;continue}i.isExpanded=!1,i.metadata.wasExpandedByDefault=!1}this._trimOnNextCompute=!1}};fa=E([v(1,_e),v(2,ge)],fa);var ma=class{constructor(e,t,r){this._instantiationService=e;this._groups=new en(3);this.threshold=KT(r,t)}create(e,t){let r=this._groups.get(e);if(r)return r.tools=t,r;let i=this._instantiationService.createInstance(fa,t);return this._groups.set(e,i),i}};ma=E([v(0,_e),v(1,et),v(2,gt)],ma);gn();var q3=128,o0="virtToolGroupCache",ha=class{constructor(e){this._extContext=e;this._value=new en(q3);this._changed=!1;let t=e.globalState.get(o0);if(t?.version===2)try{t.lru.forEach(([r,i])=>this._value.set(r,i))}catch{}}async clear(){this._changed=!1,this._value.clear(),await this._extContext.globalState.update(o0,void 0)}async flush(){if(!this._changed)return Promise.resolve();this._changed=!1;let e={version:2,lru:this._value.toJSON()};await this._extContext.globalState.update(o0,e)}async getDescription(e){let t=await this.getKey(e),r=this._value.get(t);return{category:r?this.hydrate(e,r):void 0,tools:e,update:i=>{this._changed=!0,this._value.set(t,{summary:i.summary,name:i.name})}}}hydrate(e,t){return{summary:t.summary,name:t.name,tools:e}}async getKey(e){let t=e.map(i=>i.name+"\0"+i.description).sort().join(","),r=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(t));return G1(Xe.wrap(new Uint8Array(r)))}};ha=E([v(0,Ge)],ha);function JT(n,e){let t=e.extensionMode===Sp.ExtensionMode.Test;n.define(Fb,new z(oc)),n.define(Jr,new Yl),n.define(Cv,new Dc),n.define(Dv,new Ac),n.define(Qe,new wd),n.define(Nt,new Ed),n.define(xy,new Td),n.define(Md,new z($s)),n.define(By,new z(Ws)),n.define(gs,new z(hs)),n.define(Uy,new z(qs)),n.define(Jd,new Kd),n.define(c2,new Zd),n.define(f2,new z(Zs)),n.define(_2,new z(tp)),n.define(qy,t&&!qi?new $d:new Wd),n.define(Vd,t&&!qi?new Bd:new qd),n.define(Ge,e),n.define(go,new np),n.define(Nb,{_serviceBrand:void 0,maxResponseTokens:void 0,temperature:.1,topP:1,rejectionMessage:Sp.l10n.t("Sorry, but I can only assist with programming related questions.")}),n.define(ic,new z(sc)),n.define(et,new z(ls)),n.define(Z,new z(Pl,[[new Fd(e)]])),n.define(Lb,new z(as)),n.define(d2,new z(Ys)),n.define(Os,new z(Ns)),n.define(Qr,new z(Qt)),n.define(Dy,qi?new z(Rd):new z(Us)),n.define(Qy,new z(Hs)),n.define(Pd,new z(Od)),n.define(Ly,new z(Nd)),n.define(Ub,new z(us)),n.define(Yy,new z(Qd)),n.define(rt,new z(ea)),n.define(cc,new z(Cd)),n.define(_y,new z(Ls,[!0])),n.define($y,new z(js,[!0])),n.define(Pb,new z(nc)),n.define(Oy,new z(Bs)),n.define(Ny,new z(Vs)),n.define(wv,new z(bs)),n.define(C2,new z(ip)),n.define(a2,new z(Xs)),n.define(tx,new z(ks)),n.define(fc,new z(pc)),n.define(Ky,new z(Gs)),n.define(Jy,new z(xi)),n.define(Zy,new z(Qs)),n.define(Ay,new Dd),n.define(Ab,new z(tc)),n.define(xr,new z(As)),n.define(GT,new z(ma)),n.define(ap,new z(sa)),n.define(Ep,new z(ha)),n.define(I2,new z(ta)),n.define(A2,new z(ra))}function QT(n,e){JT(n,e)}function $3(n,e){return $1({context:n,registerServices:QT,contributions:Db,forceActivation:e})}
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)
*/
