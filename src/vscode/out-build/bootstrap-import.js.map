{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/bootstrap-import.ts","bootstrap-import.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,wEAAwE;AACxE,wEAAwE;AACxE,wEAAwE;AACxE,uEAAuE;AACvE,wEAAwE;AACxE,wEAAwE;AAExE,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,UAAU,CAAC;AACxD,OAAO,EAAE,QAAQ,EAAE,MAAM,SAAS,CAAC;AACnC,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;AAEjC,gEAAgE;AAEhE,MAAM,eAAe,GAA2B,EAAE,CAAC;AAEnD,MAAM,CAAC,KAAK,UAAU,UAAU,CAAC,UAAkB;IAClD,oBAAoB;IAEpB,MAAM,qBAAqB,GAAG,aAAa,CAAC,IAAI,GAAG,CAAC,iBAAiB,EAAE,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACnG,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,QAAQ,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;IAEvF,KAAK,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC;QAC/D,IAAI,CAAC;YACJ,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,mBAAmB,IAAI,eAAe,CAAC,CAAC;YACjF,IAAI,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAEjE,IAAI,CAAC,IAAI,EAAE,CAAC;gBACX,IAAI,GAAG,UAAU,CAAC;YACnB,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC3B,IAAI,IAAI,KAAK,CAAC;YACf,CAAC;YACD,MAAM,QAAQ,GAAG,IAAI,CAAC,qBAAqB,EAAE,mBAAmB,IAAI,IAAI,IAAI,EAAE,CAAC,CAAC;YAChF,eAAe,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;QAEtD,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACd,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACpB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACpB,CAAC;IACF,CAAC;IAED,OAAO,CAAC,GAAG,CAAC,+DAA+D,UAAU,EAAE,CAAC,CAAC;AAC1F,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,OAAO,CAAC,SAA0B,EAAE,OAAgB,EAAE,WAAsD;IAEjI,MAAM,YAAY,GAAG,eAAe,CAAC,SAAS,CAAC,CAAC;IAChD,IAAI,YAAY,KAAK,SAAS,EAAE,CAAC;QAChC,OAAO;YACN,MAAM,EAAE,UAAU;YAClB,YAAY,EAAE,IAAI;YAClB,GAAG,EAAE,YAAY;SACjB,CAAC;IACH,CAAC;IAED,0DAA0D;IAC1D,qEAAqE;IACrE,OAAO,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;AACxC,CAAC","file":"bootstrap-import.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// *********************************************************************\n// *                                                                   *\n// *  We need this to redirect to node_modules from the remote-folder. *\n// *  This ONLY applies when running out of source.                   *\n// *                                                                   *\n// *********************************************************************\n\nimport { fileURLToPath, pathToFileURL } from 'node:url';\nimport { promises } from 'node:fs';\nimport { join } from 'node:path';\n\n// SEE https://nodejs.org/docs/latest/api/module.html#initialize\n\nconst _specifierToUrl: Record<string, string> = {};\n\nexport async function initialize(injectPath: string): Promise<void> {\n\t// populate mappings\n\n\tconst injectPackageJSONPath = fileURLToPath(new URL('../package.json', pathToFileURL(injectPath)));\n\tconst packageJSON = JSON.parse(String(await promises.readFile(injectPackageJSONPath)));\n\n\tfor (const [name] of Object.entries(packageJSON.dependencies)) {\n\t\ttry {\n\t\t\tconst path = join(injectPackageJSONPath, `../node_modules/${name}/package.json`);\n\t\t\tlet { main } = JSON.parse(String(await promises.readFile(path)));\n\n\t\t\tif (!main) {\n\t\t\t\tmain = 'index.js';\n\t\t\t}\n\t\t\tif (!main.endsWith('.js')) {\n\t\t\t\tmain += '.js';\n\t\t\t}\n\t\t\tconst mainPath = join(injectPackageJSONPath, `../node_modules/${name}/${main}`);\n\t\t\t_specifierToUrl[name] = pathToFileURL(mainPath).href;\n\n\t\t} catch (err) {\n\t\t\tconsole.error(name);\n\t\t\tconsole.error(err);\n\t\t}\n\t}\n\n\tconsole.log(`[bootstrap-import] Initialized node_modules redirector for: ${injectPath}`);\n}\n\nexport async function resolve(specifier: string | number, context: unknown, nextResolve: (arg0: unknown, arg1: unknown) => unknown) {\n\n\tconst newSpecifier = _specifierToUrl[specifier];\n\tif (newSpecifier !== undefined) {\n\t\treturn {\n\t\t\tformat: 'commonjs',\n\t\t\tshortCircuit: true,\n\t\t\turl: newSpecifier\n\t\t};\n\t}\n\n\t// Defer to the next hook in the chain, which would be the\n\t// Node.js default resolve if this is the last user-specified loader.\n\treturn nextResolve(specifier, context);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// *********************************************************************\n// *                                                                   *\n// *  We need this to redirect to node_modules from the remote-folder. *\n// *  This ONLY applies when running out of source.                   *\n// *                                                                   *\n// *********************************************************************\n\nimport { fileURLToPath, pathToFileURL } from 'node:url';\nimport { promises } from 'node:fs';\nimport { join } from 'node:path';\n\n// SEE https://nodejs.org/docs/latest/api/module.html#initialize\n\nconst _specifierToUrl: Record<string, string> = {};\n\nexport async function initialize(injectPath: string): Promise<void> {\n\t// populate mappings\n\n\tconst injectPackageJSONPath = fileURLToPath(new URL('../package.json', pathToFileURL(injectPath)));\n\tconst packageJSON = JSON.parse(String(await promises.readFile(injectPackageJSONPath)));\n\n\tfor (const [name] of Object.entries(packageJSON.dependencies)) {\n\t\ttry {\n\t\t\tconst path = join(injectPackageJSONPath, `../node_modules/${name}/package.json`);\n\t\t\tlet { main } = JSON.parse(String(await promises.readFile(path)));\n\n\t\t\tif (!main) {\n\t\t\t\tmain = 'index.js';\n\t\t\t}\n\t\t\tif (!main.endsWith('.js')) {\n\t\t\t\tmain += '.js';\n\t\t\t}\n\t\t\tconst mainPath = join(injectPackageJSONPath, `../node_modules/${name}/${main}`);\n\t\t\t_specifierToUrl[name] = pathToFileURL(mainPath).href;\n\n\t\t} catch (err) {\n\t\t\tconsole.error(name);\n\t\t\tconsole.error(err);\n\t\t}\n\t}\n\n\tconsole.log(`[bootstrap-import] Initialized node_modules redirector for: ${injectPath}`);\n}\n\nexport async function resolve(specifier: string | number, context: unknown, nextResolve: (arg0: unknown, arg1: unknown) => unknown) {\n\n\tconst newSpecifier = _specifierToUrl[specifier];\n\tif (newSpecifier !== undefined) {\n\t\treturn {\n\t\t\tformat: 'commonjs',\n\t\t\tshortCircuit: true,\n\t\t\turl: newSpecifier\n\t\t};\n\t}\n\n\t// Defer to the next hook in the chain, which would be the\n\t// Node.js default resolve if this is the last user-specified loader.\n\treturn nextResolve(specifier, context);\n}\n"]}