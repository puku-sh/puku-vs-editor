{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/main.ts","main.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,KAAK,IAAI,MAAM,WAAW,CAAC;AAClC,OAAO,KAAK,EAAE,MAAM,aAAa,CAAC;AAClC,OAAO,KAAK,EAAE,MAAM,SAAS,CAAC;AAC9B,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAC;AAC9C,OAAO,EAAE,iBAAiB,EAAE,MAAM,qBAAqB,CAAC;AACxD,OAAO,EAAE,YAAY,EAAE,MAAM,oBAAoB,CAAC;AAClD,OAAO,EAAE,GAAG,EAAE,QAAQ,EAAE,aAAa,EAAE,IAAI,EAAE,cAAc,EAAE,MAAM,UAAU,CAAC;AAC9E,OAAO,QAAQ,MAAM,UAAU,CAAC;AAChC,OAAO,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAC9C,OAAO,EAAE,KAAK,EAAE,MAAM,2BAA2B,CAAC;AAClD,OAAO,EAAE,eAAe,EAAE,MAAM,gDAAgD,CAAC;AACjF,OAAO,KAAK,IAAI,MAAM,iCAAiC,CAAC;AACxD,OAAO,EAAE,uBAAuB,EAAE,MAAM,uBAAuB,CAAC;AAChE,OAAO,EAAE,UAAU,EAAE,qBAAqB,EAAE,MAAM,uBAAuB,CAAC;AAI1E,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAE/B,IAAI,CAAC,IAAI,CAAC,yBAAyB,EAAE;IACpC,2DAA2D;IAC3D,8DAA8D;IAC9D,mDAAmD;IACnD,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,CAAC;CAC7C,CAAC,CAAC;AACH,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;AAEpC,0BAA0B;AAC1B,MAAM,QAAQ,GAAG,iBAAiB,CAAC,OAAO,CAAC,CAAC;AAE5C,MAAM,IAAI,GAAG,YAAY,EAAE,CAAC;AAC5B,0CAA0C;AAC1C,MAAM,UAAU,GAAG,gCAAgC,CAAC,IAAI,CAAC,CAAC;AAC1D,iCAAiC;AACjC,4CAA4C;AAC5C,8DAA8D;AAC9D,0DAA0D;AAC1D,IAAI,IAAI,CAAC,SAAS,CAAC;IAClB,CAAC,IAAI,CAAC,0BAA0B,CAAC;IACjC,CAAC,UAAU,CAAC,0BAA0B,CAAC,EAAE,CAAC;IAC1C,GAAG,CAAC,aAAa,EAAE,CAAC;AACrB,CAAC;KAAM,IAAI,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,YAAY,CAAC;IACjD,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,qBAAqB,CAAC,EAAE,CAAC;IACpD,qDAAqD;IACrD,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,qBAAqB,CAAC,CAAC;AACrD,CAAC;KAAM,CAAC;IACP,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;IAC3C,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,qBAAqB,CAAC,CAAC;AACrD,CAAC;AAED,6CAA6C;AAC7C,MAAM,YAAY,GAAG,eAAe,CAAC,IAAI,EAAE,OAAO,CAAC,SAAS,IAAI,cAAc,CAAC,CAAC;AAChF,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,EAAE,CAAC;IAClC,MAAM,eAAe,GAAG,UAAU,CAAC,YAAY,CAAC,CAAC;IACjD,IAAI,eAAe,EAAE,CAAC;QACrB,qBAAqB,CAAC,eAAe,CAAC,CAAC,CAAC,2CAA2C;IACpF,CAAC;AACF,CAAC;AACD,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;AAEtC,0BAA0B;AAC1B,MAAM,aAAa,GAAG,gBAAgB,EAAE,CAAC;AAEzC,2EAA2E;AAC3E,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AAE9B,2BAA2B;AAC3B,IAAI,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;AACzC,wEAAwE;AACxE,wEAAwE;AACxE,EAAE;AACF,0CAA0C;AAC1C,4DAA4D;AAC5D,+DAA+D;AAC/D,EAAE;AACF,8CAA8C;AAC9C,IAAI,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,EAAE,CAAC;IAClH,sBAAsB,EAAE,CAAC;AAC1B,CAAC;AACD,IAAI,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;AAExC,6DAA6D;AAC7D,0DAA0D;AAC1D,6CAA6C;AAC7C,qDAAqD;AACrD,IAAI,QAAQ,CAAC,UAAU,EAAE,CAAC;IACzB,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC,CAAC;AACrD,CAAC;AAED,0CAA0C;AAC1C,QAAQ,CAAC,2BAA2B,CAAC;IACpC;QACC,MAAM,EAAE,gBAAgB;QACxB,UAAU,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE;KAClI;IACD;QACC,MAAM,EAAE,aAAa;QACrB,UAAU,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE;KACvG;CACD,CAAC,CAAC;AAEH,uBAAuB;AACvB,iBAAiB,EAAE,CAAC;AAEpB;;;;GAIG;AACH,IAAI,uBAAuB,GAA2C,SAAS,CAAC;AAEhF,kEAAkE;AAClE,6DAA6D;AAC7D,uDAAuD;AACvD,iEAAiE;AACjE,MAAM,QAAQ,GAAG,eAAe,CAAC,CAAC,GAAG,CAAC,2BAA2B,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;AACjG,MAAM,UAAU,GAAG,oBAAoB,CAAC,UAAU,CAAC,CAAC;AACpD,IAAI,UAAU,EAAE,CAAC;IAChB,uBAAuB,GAAG,uBAAuB,CAAC;QACjD,UAAU;QACV,QAAQ;QACR,MAAM,EAAE,OAAO,CAAC,MAAM;QACtB,YAAY;QACZ,eAAe,EAAE,MAAM,CAAC,IAAI,CAAC,OAAO;KACpC,CAAC,CAAC;AACJ,CAAC;AAED,6CAA6C;AAC7C,4DAA4D;AAC5D,oDAAoD;AACpD,qDAAqD;AACrD,6CAA6C;AAC7C,+CAA+C;AAC/C,iDAAiD;AAEjD,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,EAAE,CAAC;IAClE,MAAM,cAAc,GAAG,CAAC,CAAC,UAAU,IAAI,UAAU,KAAK,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC;IACtF,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;AACtD,CAAC;AAED,2BAA2B;AAC3B,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE;IACjB,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;QACnB,IAAI,YAAuE,CAAC;QAC5E,IAAI,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC;YAChC,MAAM,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YACzE,gBAAgB,CAAC,IAAI,CAAC,kCAAkC,EAAE,gDAAgD,CAAC,CAAC;YAC5G,YAAY,GAAG;gBACd,mBAAmB,EAAE,gBAAgB;gBACrC,mBAAmB,EAAE,CAAC,GAAG,CAAC;gBAC1B,kBAAkB,EAAE;oBACnB,kBAAkB,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;oBACzC,QAAQ,EAAE;wBACT;4BACC,IAAI,EAAE,mBAAmB;4BACzB,IAAI,EAAE,UAAU;4BAChB,yBAAyB,EAAE,KAAK;yBAChC;wBACD;4BACC,IAAI,EAAE,mBAAmB;4BACzB,IAAI,EAAE,OAAO;4BACb,yBAAyB,EAAE,IAAI;yBAC/B;qBACD;iBACD;aACD,CAAC;QACH,CAAC;aAAM,CAAC;YACP,YAAY,GAAG;gBACd,cAAc,EAAE,IAAI,CAAC,uBAAuB,CAAC,IAAI,GAAG;gBACpD,YAAY,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,mCAAmC;aAC1E,CAAC;QACH,CAAC;QAED,cAAc,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;IACtE,CAAC;SAAM,CAAC;QACP,OAAO,EAAE,CAAC;IACX,CAAC;AACF,CAAC,CAAC,CAAC;AAEH,KAAK,UAAU,OAAO;IACrB,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAE/B,IAAI,CAAC;QACJ,MAAM,CAAC,EAAE,SAAS,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;YACvC,iBAAiB,CAAC,aAAa,CAAC;YAChC,uBAAuB,EAAE;SACzB,CAAC,CAAC;QAEH,MAAM,OAAO,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;IACzC,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QAChB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACtB,CAAC;AACF,CAAC;AAED;;GAEG;AACH,KAAK,UAAU,OAAO,CAAC,aAAiC,EAAE,SAA4B;IACrF,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IAC7D,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,GAAG,aAAa,IAAI,EAAE,CAAC;IAE5D,gBAAgB;IAChB,MAAM,YAAY,EAAE,CAAC;IAErB,YAAY;IACZ,MAAM,MAAM,CAAC,iCAAiC,CAAC,CAAC;IAChD,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;AACpC,CAAC;AAED,SAAS,gCAAgC,CAAC,OAAyB;IAClE,MAAM,2BAA2B,GAAG;QAEnC,kCAAkC;QAClC,+BAA+B;QAE/B,wCAAwC;QACxC,qBAAqB;QAErB,8CAA8C;QAC9C,kBAAkB;QAElB,8EAA8E;QAC9E,mBAAmB;QAEnB,uBAAuB;KACvB,CAAC;IAEF,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,EAAE,CAAC;QAElC,qDAAqD;QACrD,2BAA2B,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;QAEjE,iDAAiD;QACjD,2BAA2B,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACpD,CAAC;IAED,MAAM,+BAA+B,GAAG;QAEvC,mGAAmG;QACnG,qBAAqB;QAErB,4GAA4G;QAC5G,WAAW;QAEX,uCAAuC;QACvC,4BAA4B;QAE5B,qHAAqH;QACrH,6BAA6B;KAC7B,CAAC;IAEF,mBAAmB;IACnB,MAAM,UAAU,GAAG,kBAAkB,EAAE,CAAC;IAExC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;QACzC,MAAM,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;QAEtC,oCAAoC;QACpC,IAAI,2BAA2B,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;YACzD,IAAI,SAAS,KAAK,IAAI,IAAI,SAAS,KAAK,MAAM,EAAE,CAAC;gBAChD,IAAI,OAAO,KAAK,+BAA+B,EAAE,CAAC;oBACjD,GAAG,CAAC,2BAA2B,EAAE,CAAC,CAAC,gCAAgC;gBACpE,CAAC;qBAAM,CAAC;oBACP,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;gBACvC,CAAC;YACF,CAAC;iBAAM,IAAI,OAAO,SAAS,KAAK,QAAQ,IAAI,SAAS,EAAE,CAAC;gBACvD,IAAI,OAAO,KAAK,gBAAgB,EAAE,CAAC;oBAClC,iBAAiB;oBACjB,yDAAyD;oBACzD,IAAI,iBAAiB,GAAG,SAAS,CAAC;oBAClC,IAAI,SAAS,KAAK,OAAO,IAAI,SAAS,KAAK,eAAe,EAAE,CAAC;wBAC5D,iBAAiB,GAAG,iBAAiB,CAAC;oBACvC,CAAC;oBACD,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAAC;gBAC1D,CAAC;qBAAM,CAAC;oBACP,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;gBAClD,CAAC;YACF,CAAC;QACF,CAAC;QAED,4CAA4C;aACvC,IAAI,+BAA+B,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;YAClE,QAAQ,OAAO,EAAE,CAAC;gBACjB,KAAK,qBAAqB;oBACzB,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;wBAC9B,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,OAAO,EAAE,KAAK,QAAQ,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAE,CAAC,CAAC,CAAC;oBACzG,CAAC;yBAAM,CAAC;wBACP,OAAO,CAAC,KAAK,CAAC,6FAA6F,CAAC,CAAC;oBAC9G,CAAC;oBACD,MAAM;gBAEP,KAAK,WAAW;oBACf,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE,CAAC;wBACnC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;oBACvC,CAAC;yBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;wBACrC,KAAK,MAAM,KAAK,IAAI,SAAS,EAAE,CAAC;4BAC/B,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;wBACnC,CAAC;oBACF,CAAC;oBACD,MAAM;gBAEP,KAAK,4BAA4B;oBAChC,IAAI,SAAS,EAAE,CAAC;wBACf,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;oBACnD,CAAC;oBACD,MAAM;gBAEP,KAAK,6BAA6B;oBACjC,IAAI,SAAS,EAAE,CAAC;wBACf,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;oBACpD,CAAC;oBACD,MAAM;YACR,CAAC;QACF,CAAC;IACF,CAAC,CAAC,CAAC;IAEH,mDAAmD;IACnD,iJAAiJ;IACjJ,6JAA6J;IAC7J,gFAAgF;IAChF,gFAAgF;IAChF,MAAM,gBAAgB,GACrB,2JAA2J,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,iBAAiB,CAAC,EAAE,CAAC;IAChN,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,iBAAiB,EAAE,gBAAgB,CAAC,CAAC;IAElE,oDAAoD;IACpD,iKAAiK;IACjK,MAAM,iBAAiB,GACtB,+BAA+B,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,kBAAkB,CAAC,EAAE,CAAC;IACrF,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,CAAC;IAEpE,+BAA+B;IAC/B,wJAAwJ;IACxJ,mJAAmJ;IACnJ,MAAM,sBAAsB,GAC3B,mDAAmD,GAAG,CAAC,WAAW,CAAC,cAAc,CAAC,wBAAwB,CAAC,EAAE,CAAC;IAC/G,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,wBAAwB,EAAE,sBAAsB,CAAC,CAAC;IAE/E,mBAAmB;IACnB,MAAM,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;IACpC,IAAI,OAAO,EAAE,CAAC;QACb,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IACnD,CAAC;IAED,2DAA2D;IAC3D,+DAA+D;IAC/D,8FAA8F;IAC9F,GAAG,CAAC,WAAW,CAAC,YAAY,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;IAEjE,OAAO,UAAU,CAAC;AACnB,CAAC;AAmBD,SAAS,kBAAkB;IAE1B,oEAAoE;IACpE,MAAM,cAAc,GAAG,iBAAiB,EAAE,CAAC;IAC3C,IAAI,UAAU,GAA4B,SAAS,CAAC;IACpD,IAAI,CAAC;QACJ,UAAU,GAAG,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;IAChE,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QAChB,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE,CAAC;YACtC,2BAA2B,CAAC,cAAc,CAAC,CAAC;QAC7C,CAAC;aAAM,CAAC;YACP,OAAO,CAAC,IAAI,CAAC,kDAAkD,cAAc,+BAA+B,KAAK,GAAG,CAAC,CAAC;QACvH,CAAC;IACF,CAAC;IAED,sBAAsB;IACtB,IAAI,CAAC,UAAU,EAAE,CAAC;QACjB,UAAU,GAAG,EAAE,CAAC;IACjB,CAAC;IAED,OAAO,UAAU,CAAC;AACnB,CAAC;AAED,SAAS,2BAA2B,CAAC,cAAsB;IAC1D,IAAI,CAAC;QAEJ,mCAAmC;QACnC,MAAM,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;QAC3D,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,qBAAqB,CAAC,EAAE,CAAC;YAC3C,EAAE,CAAC,SAAS,CAAC,qBAAqB,CAAC,CAAC;QACrC,CAAC;QAED,uBAAuB;QACvB,MAAM,wBAAwB,GAAG;YAChC,4FAA4F;YAC5F,2FAA2F;YAC3F,sBAAsB;YACtB,IAAI;YACJ,0DAA0D;YAC1D,IAAI;YACJ,4DAA4D;YAC5D,GAAG;YACH,uEAAuE;YACvE,uEAAuE;YACvE,2CAA2C;YAC3C,GAAG;SACH,CAAC;QAEF,gDAAgD;QAChD,EAAE,CAAC,aAAa,CAAC,cAAc,EAAE,wBAAwB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvE,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QAChB,OAAO,CAAC,KAAK,CAAC,oDAAoD,cAAc,+BAA+B,KAAK,GAAG,CAAC,CAAC;IAC1H,CAAC;AACF,CAAC;AAED,SAAS,iBAAiB;IACzB,MAAM,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;IACtD,IAAI,cAAc,EAAE,CAAC;QACpB,OAAO,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;IAC/C,CAAC;IAED,IAAI,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;IAC5C,IAAI,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC;QAC/B,cAAc,GAAG,GAAG,cAAc,MAAM,CAAC;IAC1C,CAAC;IAED,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,EAAE,cAAe,EAAE,WAAW,CAAC,CAAC;AAC9D,CAAC;AAED,SAAS,sBAAsB;IAC9B,IAAI,sBAAsB,GAAG,IAAI,CAAC,0BAA0B,CAAC,CAAC;IAC9D,IAAI,SAAS,GAAG,EAAE,CAAC;IACnB,IAAI,sBAAsB,EAAE,CAAC;QAC5B,sBAAsB,GAAG,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAEhE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,EAAE,CAAC;YAC9C,OAAO,CAAC,KAAK,CAAC,aAAa,sBAAsB,8DAA8D,CAAC,CAAC;YACjH,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACb,CAAC;QAED,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,sBAAsB,CAAC,EAAE,CAAC;YAC5C,IAAI,CAAC;gBACJ,EAAE,CAAC,SAAS,CAAC,sBAAsB,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;YAC3D,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBAChB,OAAO,CAAC,KAAK,CAAC,aAAa,sBAAsB,yFAAyF,CAAC,CAAC;gBAC5I,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACb,CAAC;QACF,CAAC;QAED,mEAAmE;QACnE,oDAAoD;QACpD,OAAO,CAAC,GAAG,CAAC,kFAAkF,sBAAsB,GAAG,CAAC,CAAC;QACzH,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,sBAAsB,CAAC,CAAC;IACnD,CAAC;IAED,8DAA8D;SACzD,CAAC;QACL,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;QACpC,IAAI,SAAS,EAAE,CAAC;YACf,MAAM,SAAS,GAAG,CAAC,OAAO,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC;YACjD,MAAM,OAAO,GAAG,CAAC,OAAO,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC;YAC/C,MAAM,QAAQ,GAAG,CAAC,OAAO,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC;YACjD,MAAM,eAAe,GAAG,UAAU,CAAC,mBAAmB,CAAC,CAAC;YACxD,MAAM,WAAW,GAAG,iEAAiE,CAAC;YACtF,IAAI,eAAe,IAAI,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,EAAE,CAAC;gBAC1D,IAAI,SAAS,EAAE,CAAC;oBACf,QAAQ,OAAO,CAAC,IAAI,EAAE,CAAC;wBACtB,KAAK,KAAK;4BACT,SAAS,GAAG,SAAS,CAAC,WAAW,CAAC,CAAC;4BACnC,MAAM;wBACP,KAAK,OAAO;4BACX,SAAS,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC;4BACrC,MAAM;oBACR,CAAC;gBACF,CAAC;qBAAM,IAAI,QAAQ,EAAE,CAAC;oBACrB,IAAI,OAAO,CAAC,sBAAsB,EAAE,CAAC;wBACpC,SAAS,GAAG,SAAS,CAAC,kBAAkB,CAAC,CAAC;oBAC3C,CAAC;yBAAM,CAAC;wBACP,QAAQ,OAAO,CAAC,IAAI,EAAE,CAAC;4BACtB,KAAK,KAAK;gCACT,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC;gCAChC,MAAM;4BACP,KAAK,OAAO;gCACX,SAAS,GAAG,SAAS,CAAC,cAAc,CAAC,CAAC;gCACtC,MAAM;wBACR,CAAC;oBACF,CAAC;gBACF,CAAC;qBAAM,IAAI,OAAO,EAAE,CAAC;oBACpB,SAAS,GAAG,SAAS,CAAC,WAAW,CAAC,CAAC;gBACpC,CAAC;gBACD,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,OAAO,EAAE,eAAe,EAAE,OAAO,EAAE,eAAe,EAAE,OAAO,EAAE,eAAe,CAAC,CAAC;gBAC3G,kFAAkF;gBAClF,sDAAsD;gBACtD,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;gBAC1B,MAAM,oBAAoB,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBAChD,IAAI,oBAAoB,KAAK,CAAC,CAAC,EAAE,CAAC;oBACjC,IAAI,CAAC,IAAI,CAAC,qBAAqB,EAAE,eAAe,CAAC,CAAC;gBACnD,CAAC;qBAAM,CAAC;oBACP,2DAA2D;oBAC3D,qDAAqD;oBACrD,oCAAoC;oBACpC,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,EAAE,qBAAqB,EAAE,eAAe,CAAC,CAAC;gBAC9E,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAED,yCAAyC;IACzC,MAAM,WAAW,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC;IACjH,MAAM,WAAW,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,WAAW,CAAC;IAC3G,MAAM,cAAc,GAAG,OAAO,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,SAAS,IAAI,CAAC,sBAAsB,CAAC,CAAC;IACnG,aAAa,CAAC,KAAK,CAAC;QACnB,WAAW;QACX,WAAW,EAAE,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,WAAW,MAAM,CAAC,CAAC,CAAC,WAAW;QAC3E,SAAS;QACT,cAAc;QACd,QAAQ,EAAE,IAAI;QACd,wBAAwB,EAAE,IAAI;KAC9B,CAAC,CAAC;AACJ,CAAC;AAED,SAAS,UAAU,CAAC,OAAyB;IAC5C,MAAM,OAAO,GAAa,EAAE,CAAC;IAE7B,iEAAiE;IACjE,IAAI,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC;QACzB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;IACnC,CAAC;IAED,IAAI,OAAO,CAAC,QAAQ,KAAK,OAAO,EAAE,CAAC;QAClC,gDAAgD;QAChD,oDAAoD;QACpD,oGAAoG;QACpG,qCAAqC;QACrC,kDAAkD;QAClD,2CAA2C;QAC3C,kDAAkD;QAClD,mBAAmB;QACnB,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;IAC3C,CAAC;IAED,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACtD,CAAC;AAED,SAAS,YAAY;IACpB,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE;QAC7B,MAAM,EAAE;YACP,eAAe;YACf,QAAQ;YACR,UAAU;YACV,0BAA0B;SAC1B;QACD,OAAO,EAAE;YACR,0BAA0B;SAC1B;QACD,OAAO,EAAE;YACR,SAAS,EAAE,IAAI;SACf;QACD,KAAK,EAAE;YACN,YAAY,EAAE,SAAS;SACvB;KACD,CAAC,CAAC;AACJ,CAAC;AAED,SAAS,iBAAiB;IAEzB;;;OAGG;IACH,MAAM,YAAY,GAAa,EAAE,CAAC;IACjC,UAA0C,CAAC,YAAY,GAAG,YAAY,CAAC;IACxE,GAAG,CAAC,EAAE,CAAC,WAAW,EAAE,UAAU,KAAK,EAAE,IAAI;QACxC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;IAEH;;OAEG;IACH,MAAM,QAAQ,GAAa,EAAE,CAAC;IAC9B,MAAM,SAAS,GACd,UAAU,KAAqC,EAAE,GAAW;QAC3D,KAAK,CAAC,cAAc,EAAE,CAAC;QAEvB,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACpB,CAAC,CAAC;IAEH,GAAG,CAAC,EAAE,CAAC,uBAAuB,EAAE;QAC/B,GAAG,CAAC,EAAE,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEF,UAA+C,CAAC,WAAW,GAAG;QAC9D,GAAG,CAAC,cAAc,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QAE1C,OAAO,QAAQ,CAAC;IACjB,CAAC,CAAC;AACH,CAAC;AAED,SAAS,gBAAgB;IAExB,mCAAmC;IACnC,IAAI,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,EAAE,CAAC;QAClD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,yBAAyB;IACzB,IAAI,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,CAAC;QAC/B,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,oBAAoB;IACpB,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;IAC9B,IAAI,CAAC,MAAM,EAAE,CAAC;QACb,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,OAAO,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,YAAY,EAAE,MAAM,CAAC,CAAC;AACtD,CAAC;AAED,KAAK,UAAU,iBAAiB,CAAC,GAAuB;IACvD,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;QAC7B,IAAI,CAAC;YACJ,MAAM,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;YAElD,OAAO,GAAG,CAAC;QACZ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,SAAS;QACV,CAAC;IACF,CAAC;IAED,OAAO,SAAS,CAAC;AAClB,CAAC;AAED,qBAAqB;AAErB,SAAS,eAAe,CAAC,SAAiB;IACzC,IAAI,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;QAChC,MAAM,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEvC,sDAAsD;QACtD,uDAAuD;QACvD,6DAA6D;QAC7D,uEAAuE;QACvE,iEAAiE;QACjE,qDAAqD;QACrD,oDAAoD;QACpD,qDAAqD;QACrD,gDAAgD;QAChD,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;YACjD,OAAO,OAAO,CAAC;QAChB,CAAC;QAED,OAAO,OAAO,CAAC;IAChB,CAAC;IAED,OAAO,SAAS,CAAC;AAClB,CAAC;AAED;;GAEG;AACH,KAAK,UAAU,uBAAuB;IAErC,gDAAgD;IAChD,qCAAqC;IACrC,yCAAyC;IAEzC,MAAM,gBAAgB,GAAG,uBAAuB,CAAC,CAAC,CAAC,MAAM,uBAAuB,CAAC,CAAC,CAAC,SAAS,CAAC;IAC7F,IAAI,gBAAgB,EAAE,CAAC;QACtB,OAAO,gBAAgB,CAAC;IACzB,CAAC;IAED,gDAAgD;IAChD,4CAA4C;IAE5C,IAAI,UAAU,GAAG,GAAG,CAAC,SAAS,EAAE,CAAC;IACjC,IAAI,CAAC,UAAU,EAAE,CAAC;QACjB,OAAO;YACN,UAAU,EAAE,IAAI;YAChB,QAAQ;YACR,gBAAgB,EAAE,IAAI;YACtB,mBAAmB,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,mBAAmB,CAAC;YAExE,iFAAiF;YACjF,MAAM,EAAE,IAAI;YACZ,kBAAkB,EAAE,EAAE;SACtB,CAAC;IACH,CAAC;IAED,gEAAgE;IAChE,UAAU,GAAG,eAAe,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;IAEvD,OAAO,uBAAuB,CAAC;QAC9B,UAAU;QACV,QAAQ;QACR,MAAM,EAAE,OAAO,CAAC,MAAM;QACtB,YAAY;QACZ,eAAe,EAAE,MAAM,CAAC,IAAI,CAAC,OAAO;KACpC,CAAC,CAAC;AACJ,CAAC;AAED;;;;;GAKG;AACH,SAAS,oBAAoB,CAAC,UAAuB;IACpD,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9B,IAAI,MAAM,EAAE,CAAC;QACZ,OAAO,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,2CAA2C;IACzE,CAAC;IAED,OAAO,OAAO,UAAU,EAAE,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;AAC7F,CAAC;AAED,YAAY","file":"main.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'node:path';\nimport * as fs from 'original-fs';\nimport * as os from 'node:os';\nimport { performance } from 'node:perf_hooks';\nimport { configurePortable } from './bootstrap-node.js';\nimport { bootstrapESM } from './bootstrap-esm.js';\nimport { app, protocol, crashReporter, Menu, contentTracing } from 'electron';\nimport minimist from 'minimist';\nimport { product } from './bootstrap-meta.js';\nimport { parse } from './vs/base/common/jsonc.js';\nimport { getUserDataPath } from './vs/platform/environment/node/userDataPath.js';\nimport * as perf from './vs/base/common/performance.js';\nimport { resolveNLSConfiguration } from './vs/base/node/nls.js';\nimport { getUNCHost, addUNCHostToAllowlist } from './vs/base/node/unc.js';\nimport { INLSConfiguration } from './vs/nls.js';\nimport { NativeParsedArgs } from './vs/platform/environment/common/argv.js';\n\nperf.mark('code/didStartMain');\n\nperf.mark('code/willLoadMainBundle', {\n\t// When built, the main bundle is a single JS file with all\n\t// dependencies inlined. As such, we mark `willLoadMainBundle`\n\t// as the start of the main bundle loading process.\n\tstartTime: Math.floor(performance.timeOrigin)\n});\nperf.mark('code/didLoadMainBundle');\n\n// Enable portable support\nconst portable = configurePortable(product);\n\nconst args = parseCLIArgs();\n// Configure static command line arguments\nconst argvConfig = configureCommandlineSwitchesSync(args);\n// Enable sandbox globally unless\n// 1) disabled via command line using either\n//    `--no-sandbox` or `--disable-chromium-sandbox` argument.\n// 2) argv.json contains `disable-chromium-sandbox: true`.\nif (args['sandbox'] &&\n\t!args['disable-chromium-sandbox'] &&\n\t!argvConfig['disable-chromium-sandbox']) {\n\tapp.enableSandbox();\n} else if (app.commandLine.hasSwitch('no-sandbox') &&\n\t!app.commandLine.hasSwitch('disable-gpu-sandbox')) {\n\t// Disable GPU sandbox whenever --no-sandbox is used.\n\tapp.commandLine.appendSwitch('disable-gpu-sandbox');\n} else {\n\tapp.commandLine.appendSwitch('no-sandbox');\n\tapp.commandLine.appendSwitch('disable-gpu-sandbox');\n}\n\n// Set userData path before app 'ready' event\nconst userDataPath = getUserDataPath(args, product.nameShort ?? 'code-oss-dev');\nif (process.platform === 'win32') {\n\tconst userDataUNCHost = getUNCHost(userDataPath);\n\tif (userDataUNCHost) {\n\t\taddUNCHostToAllowlist(userDataUNCHost); // enables to use UNC paths in userDataPath\n\t}\n}\napp.setPath('userData', userDataPath);\n\n// Resolve code cache path\nconst codeCachePath = getCodeCachePath();\n\n// Disable default menu (https://github.com/electron/electron/issues/35512)\nMenu.setApplicationMenu(null);\n\n// Configure crash reporter\nperf.mark('code/willStartCrashReporter');\n// If a crash-reporter-directory is specified we store the crash reports\n// in the specified directory and don't upload them to the crash server.\n//\n// Appcenter crash reporting is enabled if\n// * enable-crash-reporter runtime argument is set to 'true'\n// * --disable-crash-reporter command line parameter is not set\n//\n// Disable crash reporting in all other cases.\nif (args['crash-reporter-directory'] || (argvConfig['enable-crash-reporter'] && !args['disable-crash-reporter'])) {\n\tconfigureCrashReporter();\n}\nperf.mark('code/didStartCrashReporter');\n\n// Set logs path before app 'ready' event if running portable\n// to ensure that no 'logs' folder is created on disk at a\n// location outside of the portable directory\n// (https://github.com/microsoft/vscode/issues/56651)\nif (portable.isPortable) {\n\tapp.setAppLogsPath(path.join(userDataPath, 'logs'));\n}\n\n// Register custom schemes with privileges\nprotocol.registerSchemesAsPrivileged([\n\t{\n\t\tscheme: 'vscode-webview',\n\t\tprivileges: { standard: true, secure: true, supportFetchAPI: true, corsEnabled: true, allowServiceWorkers: true, codeCache: true }\n\t},\n\t{\n\t\tscheme: 'vscode-file',\n\t\tprivileges: { secure: true, standard: true, supportFetchAPI: true, corsEnabled: true, codeCache: true }\n\t}\n]);\n\n// Global app listeners\nregisterListeners();\n\n/**\n * We can resolve the NLS configuration early if it is defined\n * in argv.json before `app.ready` event. Otherwise we can only\n * resolve NLS after `app.ready` event to resolve the OS locale.\n */\nlet nlsConfigurationPromise: Promise<INLSConfiguration> | undefined = undefined;\n\n// Use the most preferred OS language for language recommendation.\n// The API might return an empty array on Linux, such as when\n// the 'C' locale is the user's only configured locale.\n// No matter the OS, if the array is empty, default back to 'en'.\nconst osLocale = processZhLocale((app.getPreferredSystemLanguages()?.[0] ?? 'en').toLowerCase());\nconst userLocale = getUserDefinedLocale(argvConfig);\nif (userLocale) {\n\tnlsConfigurationPromise = resolveNLSConfiguration({\n\t\tuserLocale,\n\t\tosLocale,\n\t\tcommit: product.commit,\n\t\tuserDataPath,\n\t\tnlsMetadataPath: import.meta.dirname\n\t});\n}\n\n// Pass in the locale to Electron so that the\n// Windows Control Overlay is rendered correctly on Windows.\n// For now, don't pass in the locale on macOS due to\n// https://github.com/microsoft/vscode/issues/167543.\n// If the locale is `qps-ploc`, the Microsoft\n// Pseudo Language Language Pack is being used.\n// In that case, use `en` as the Electron locale.\n\nif (process.platform === 'win32' || process.platform === 'linux') {\n\tconst electronLocale = (!userLocale || userLocale === 'qps-ploc') ? 'en' : userLocale;\n\tapp.commandLine.appendSwitch('lang', electronLocale);\n}\n\n// Load our code once ready\napp.once('ready', function () {\n\tif (args['trace']) {\n\t\tlet traceOptions: Electron.TraceConfig | Electron.TraceCategoriesAndOptions;\n\t\tif (args['trace-memory-infra']) {\n\t\t\tconst customCategories = args['trace-category-filter']?.split(',') || [];\n\t\t\tcustomCategories.push('disabled-by-default-memory-infra', 'disabled-by-default-memory-infra.v8.code_stats');\n\t\t\ttraceOptions = {\n\t\t\t\tincluded_categories: customCategories,\n\t\t\t\texcluded_categories: ['*'],\n\t\t\t\tmemory_dump_config: {\n\t\t\t\t\tallowed_dump_modes: ['light', 'detailed'],\n\t\t\t\t\ttriggers: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'periodic_interval',\n\t\t\t\t\t\t\tmode: 'detailed',\n\t\t\t\t\t\t\tmin_time_between_dumps_ms: 10000\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'periodic_interval',\n\t\t\t\t\t\t\tmode: 'light',\n\t\t\t\t\t\t\tmin_time_between_dumps_ms: 1000\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\ttraceOptions = {\n\t\t\t\tcategoryFilter: args['trace-category-filter'] || '*',\n\t\t\t\ttraceOptions: args['trace-options'] || 'record-until-full,enable-sampling'\n\t\t\t};\n\t\t}\n\n\t\tcontentTracing.startRecording(traceOptions).finally(() => onReady());\n\t} else {\n\t\tonReady();\n\t}\n});\n\nasync function onReady() {\n\tperf.mark('code/mainAppReady');\n\n\ttry {\n\t\tconst [, nlsConfig] = await Promise.all([\n\t\t\tmkdirpIgnoreError(codeCachePath),\n\t\t\tresolveNlsConfiguration()\n\t\t]);\n\n\t\tawait startup(codeCachePath, nlsConfig);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}\n\n/**\n * Main startup routine\n */\nasync function startup(codeCachePath: string | undefined, nlsConfig: INLSConfiguration): Promise<void> {\n\tprocess.env['VSCODE_NLS_CONFIG'] = JSON.stringify(nlsConfig);\n\tprocess.env['VSCODE_CODE_CACHE_PATH'] = codeCachePath || '';\n\n\t// Bootstrap ESM\n\tawait bootstrapESM();\n\n\t// Load Main\n\tawait import('./vs/code/electron-main/main.js');\n\tperf.mark('code/didRunMainBundle');\n}\n\nfunction configureCommandlineSwitchesSync(cliArgs: NativeParsedArgs) {\n\tconst SUPPORTED_ELECTRON_SWITCHES = [\n\n\t\t// alias from us for --disable-gpu\n\t\t'disable-hardware-acceleration',\n\n\t\t// override for the color profile to use\n\t\t'force-color-profile',\n\n\t\t// disable LCD font rendering, a Chromium flag\n\t\t'disable-lcd-text',\n\n\t\t// bypass any specified proxy for the given semi-colon-separated list of hosts\n\t\t'proxy-bypass-list',\n\n\t\t'remote-debugging-port'\n\t];\n\n\tif (process.platform === 'linux') {\n\n\t\t// Force enable screen readers on Linux via this flag\n\t\tSUPPORTED_ELECTRON_SWITCHES.push('force-renderer-accessibility');\n\n\t\t// override which password-store is used on Linux\n\t\tSUPPORTED_ELECTRON_SWITCHES.push('password-store');\n\t}\n\n\tconst SUPPORTED_MAIN_PROCESS_SWITCHES = [\n\n\t\t// Persistently enable proposed api via argv.json: https://github.com/microsoft/vscode/issues/99775\n\t\t'enable-proposed-api',\n\n\t\t// Log level to use. Default is 'info'. Allowed values are 'error', 'warn', 'info', 'debug', 'trace', 'off'.\n\t\t'log-level',\n\n\t\t// Use an in-memory storage for secrets\n\t\t'use-inmemory-secretstorage',\n\n\t\t// Enables display tracking to restore maximized windows under RDP: https://github.com/electron/electron/issues/47016\n\t\t'enable-rdp-display-tracking',\n\t];\n\n\t// Read argv config\n\tconst argvConfig = readArgvConfigSync();\n\n\tObject.keys(argvConfig).forEach(argvKey => {\n\t\tconst argvValue = argvConfig[argvKey];\n\n\t\t// Append Electron flags to Electron\n\t\tif (SUPPORTED_ELECTRON_SWITCHES.indexOf(argvKey) !== -1) {\n\t\t\tif (argvValue === true || argvValue === 'true') {\n\t\t\t\tif (argvKey === 'disable-hardware-acceleration') {\n\t\t\t\t\tapp.disableHardwareAcceleration(); // needs to be called explicitly\n\t\t\t\t} else {\n\t\t\t\t\tapp.commandLine.appendSwitch(argvKey);\n\t\t\t\t}\n\t\t\t} else if (typeof argvValue === 'string' && argvValue) {\n\t\t\t\tif (argvKey === 'password-store') {\n\t\t\t\t\t// Password store\n\t\t\t\t\t// TODO@TylerLeonhardt: Remove this migration in 3 months\n\t\t\t\t\tlet migratedArgvValue = argvValue;\n\t\t\t\t\tif (argvValue === 'gnome' || argvValue === 'gnome-keyring') {\n\t\t\t\t\t\tmigratedArgvValue = 'gnome-libsecret';\n\t\t\t\t\t}\n\t\t\t\t\tapp.commandLine.appendSwitch(argvKey, migratedArgvValue);\n\t\t\t\t} else {\n\t\t\t\t\tapp.commandLine.appendSwitch(argvKey, argvValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Append main process flags to process.argv\n\t\telse if (SUPPORTED_MAIN_PROCESS_SWITCHES.indexOf(argvKey) !== -1) {\n\t\t\tswitch (argvKey) {\n\t\t\t\tcase 'enable-proposed-api':\n\t\t\t\t\tif (Array.isArray(argvValue)) {\n\t\t\t\t\t\targvValue.forEach(id => id && typeof id === 'string' && process.argv.push('--enable-proposed-api', id));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(`Unexpected value for \\`enable-proposed-api\\` in argv.json. Expected array of extension ids.`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'log-level':\n\t\t\t\t\tif (typeof argvValue === 'string') {\n\t\t\t\t\t\tprocess.argv.push('--log', argvValue);\n\t\t\t\t\t} else if (Array.isArray(argvValue)) {\n\t\t\t\t\t\tfor (const value of argvValue) {\n\t\t\t\t\t\t\tprocess.argv.push('--log', value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'use-inmemory-secretstorage':\n\t\t\t\t\tif (argvValue) {\n\t\t\t\t\t\tprocess.argv.push('--use-inmemory-secretstorage');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'enable-rdp-display-tracking':\n\t\t\t\t\tif (argvValue) {\n\t\t\t\t\t\tprocess.argv.push('--enable-rdp-display-tracking');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\t// Following features are enabled from the runtime:\n\t// `NetAdapterMaxBufSizeFeature` - Specify the max buffer size for NetToMojoPendingBuffer, refs https://github.com/microsoft/vscode/issues/268800\n\t// `DocumentPolicyIncludeJSCallStacksInCrashReports` - https://www.electronjs.org/docs/latest/api/web-frame-main#framecollectjavascriptcallstack-experimental\n\t// `EarlyEstablishGpuChannel` - Refs https://issues.chromium.org/issues/40208065\n\t// `EstablishGpuChannelAsync` - Refs https://issues.chromium.org/issues/40208065\n\tconst featuresToEnable =\n\t\t`NetAdapterMaxBufSizeFeature:NetAdapterMaxBufSize/8192,DocumentPolicyIncludeJSCallStacksInCrashReports,EarlyEstablishGpuChannel,EstablishGpuChannelAsync,${app.commandLine.getSwitchValue('enable-features')}`;\n\tapp.commandLine.appendSwitch('enable-features', featuresToEnable);\n\n\t// Following features are disabled from the runtime:\n\t// `CalculateNativeWinOcclusion` - Disable native window occlusion tracker (https://groups.google.com/a/chromium.org/g/embedder-dev/c/ZF3uHHyWLKw/m/VDN2hDXMAAAJ)\n\tconst featuresToDisable =\n\t\t`CalculateNativeWinOcclusion,${app.commandLine.getSwitchValue('disable-features')}`;\n\tapp.commandLine.appendSwitch('disable-features', featuresToDisable);\n\n\t// Blink features to configure.\n\t// `FontMatchingCTMigration` - Siwtch font matching on macOS to Appkit (Refs https://github.com/microsoft/vscode/issues/224496#issuecomment-2270418470).\n\t// `StandardizedBrowserZoom` - Disable zoom adjustment for bounding box (https://github.com/microsoft/vscode/issues/232750#issuecomment-2459495394)\n\tconst blinkFeaturesToDisable =\n\t\t`FontMatchingCTMigration,StandardizedBrowserZoom,${app.commandLine.getSwitchValue('disable-blink-features')}`;\n\tapp.commandLine.appendSwitch('disable-blink-features', blinkFeaturesToDisable);\n\n\t// Support JS Flags\n\tconst jsFlags = getJSFlags(cliArgs);\n\tif (jsFlags) {\n\t\tapp.commandLine.appendSwitch('js-flags', jsFlags);\n\t}\n\n\t// Use portal version 4 that supports current_folder option\n\t// to address https://github.com/microsoft/vscode/issues/213780\n\t// Runtime sets the default version to 3, refs https://github.com/electron/electron/pull/44426\n\tapp.commandLine.appendSwitch('xdg-portal-required-version', '4');\n\n\treturn argvConfig;\n}\n\ninterface IArgvConfig {\n\t[key: string]: string | string[] | boolean | undefined;\n\treadonly locale?: string;\n\treadonly 'disable-lcd-text'?: boolean;\n\treadonly 'proxy-bypass-list'?: string;\n\treadonly 'disable-hardware-acceleration'?: boolean;\n\treadonly 'force-color-profile'?: string;\n\treadonly 'enable-crash-reporter'?: boolean;\n\treadonly 'crash-reporter-id'?: string;\n\treadonly 'enable-proposed-api'?: string[];\n\treadonly 'log-level'?: string | string[];\n\treadonly 'disable-chromium-sandbox'?: boolean;\n\treadonly 'use-inmemory-secretstorage'?: boolean;\n\treadonly 'enable-rdp-display-tracking'?: boolean;\n\treadonly 'remote-debugging-port'?: string;\n}\n\nfunction readArgvConfigSync(): IArgvConfig {\n\n\t// Read or create the argv.json config file sync before app('ready')\n\tconst argvConfigPath = getArgvConfigPath();\n\tlet argvConfig: IArgvConfig | undefined = undefined;\n\ttry {\n\t\targvConfig = parse(fs.readFileSync(argvConfigPath).toString());\n\t} catch (error) {\n\t\tif (error && error.code === 'ENOENT') {\n\t\t\tcreateDefaultArgvConfigSync(argvConfigPath);\n\t\t} else {\n\t\t\tconsole.warn(`Unable to read argv.json configuration file in ${argvConfigPath}, falling back to defaults (${error})`);\n\t\t}\n\t}\n\n\t// Fallback to default\n\tif (!argvConfig) {\n\t\targvConfig = {};\n\t}\n\n\treturn argvConfig;\n}\n\nfunction createDefaultArgvConfigSync(argvConfigPath: string): void {\n\ttry {\n\n\t\t// Ensure argv config parent exists\n\t\tconst argvConfigPathDirname = path.dirname(argvConfigPath);\n\t\tif (!fs.existsSync(argvConfigPathDirname)) {\n\t\t\tfs.mkdirSync(argvConfigPathDirname);\n\t\t}\n\n\t\t// Default argv content\n\t\tconst defaultArgvConfigContent = [\n\t\t\t'// This configuration file allows you to pass permanent command line arguments to VS Code.',\n\t\t\t'// Only a subset of arguments is currently supported to reduce the likelihood of breaking',\n\t\t\t'// the installation.',\n\t\t\t'//',\n\t\t\t'// PLEASE DO NOT CHANGE WITHOUT UNDERSTANDING THE IMPACT',\n\t\t\t'//',\n\t\t\t'// NOTE: Changing this file requires a restart of VS Code.',\n\t\t\t'{',\n\t\t\t'\t// Use software rendering instead of hardware accelerated rendering.',\n\t\t\t'\t// This can help in cases where you see rendering issues in VS Code.',\n\t\t\t'\t// \"disable-hardware-acceleration\": true',\n\t\t\t'}'\n\t\t];\n\n\t\t// Create initial argv.json with default content\n\t\tfs.writeFileSync(argvConfigPath, defaultArgvConfigContent.join('\\n'));\n\t} catch (error) {\n\t\tconsole.error(`Unable to create argv.json configuration file in ${argvConfigPath}, falling back to defaults (${error})`);\n\t}\n}\n\nfunction getArgvConfigPath(): string {\n\tconst vscodePortable = process.env['VSCODE_PORTABLE'];\n\tif (vscodePortable) {\n\t\treturn path.join(vscodePortable, 'argv.json');\n\t}\n\n\tlet dataFolderName = product.dataFolderName;\n\tif (process.env['VSCODE_DEV']) {\n\t\tdataFolderName = `${dataFolderName}-dev`;\n\t}\n\n\treturn path.join(os.homedir(), dataFolderName!, 'argv.json');\n}\n\nfunction configureCrashReporter(): void {\n\tlet crashReporterDirectory = args['crash-reporter-directory'];\n\tlet submitURL = '';\n\tif (crashReporterDirectory) {\n\t\tcrashReporterDirectory = path.normalize(crashReporterDirectory);\n\n\t\tif (!path.isAbsolute(crashReporterDirectory)) {\n\t\t\tconsole.error(`The path '${crashReporterDirectory}' specified for --crash-reporter-directory must be absolute.`);\n\t\t\tapp.exit(1);\n\t\t}\n\n\t\tif (!fs.existsSync(crashReporterDirectory)) {\n\t\t\ttry {\n\t\t\t\tfs.mkdirSync(crashReporterDirectory, { recursive: true });\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`The path '${crashReporterDirectory}' specified for --crash-reporter-directory does not seem to exist or cannot be created.`);\n\t\t\t\tapp.exit(1);\n\t\t\t}\n\t\t}\n\n\t\t// Crashes are stored in the crashDumps directory by default, so we\n\t\t// need to change that directory to the provided one\n\t\tconsole.log(`Found --crash-reporter-directory argument. Setting crashDumps directory to be '${crashReporterDirectory}'`);\n\t\tapp.setPath('crashDumps', crashReporterDirectory);\n\t}\n\n\t// Otherwise we configure the crash reporter from product.json\n\telse {\n\t\tconst appCenter = product.appCenter;\n\t\tif (appCenter) {\n\t\t\tconst isWindows = (process.platform === 'win32');\n\t\t\tconst isLinux = (process.platform === 'linux');\n\t\t\tconst isDarwin = (process.platform === 'darwin');\n\t\t\tconst crashReporterId = argvConfig['crash-reporter-id'];\n\t\t\tconst uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n\t\t\tif (crashReporterId && uuidPattern.test(crashReporterId)) {\n\t\t\t\tif (isWindows) {\n\t\t\t\t\tswitch (process.arch) {\n\t\t\t\t\t\tcase 'x64':\n\t\t\t\t\t\t\tsubmitURL = appCenter['win32-x64'];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'arm64':\n\t\t\t\t\t\t\tsubmitURL = appCenter['win32-arm64'];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (isDarwin) {\n\t\t\t\t\tif (product.darwinUniversalAssetId) {\n\t\t\t\t\t\tsubmitURL = appCenter['darwin-universal'];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch (process.arch) {\n\t\t\t\t\t\t\tcase 'x64':\n\t\t\t\t\t\t\t\tsubmitURL = appCenter['darwin'];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'arm64':\n\t\t\t\t\t\t\t\tsubmitURL = appCenter['darwin-arm64'];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (isLinux) {\n\t\t\t\t\tsubmitURL = appCenter['linux-x64'];\n\t\t\t\t}\n\t\t\t\tsubmitURL = submitURL.concat('&uid=', crashReporterId, '&iid=', crashReporterId, '&sid=', crashReporterId);\n\t\t\t\t// Send the id for child node process that are explicitly starting crash reporter.\n\t\t\t\t// For vscode this is ExtensionHost process currently.\n\t\t\t\tconst argv = process.argv;\n\t\t\t\tconst endOfArgsMarkerIndex = argv.indexOf('--');\n\t\t\t\tif (endOfArgsMarkerIndex === -1) {\n\t\t\t\t\targv.push('--crash-reporter-id', crashReporterId);\n\t\t\t\t} else {\n\t\t\t\t\t// if the we have an argument \"--\" (end of argument marker)\n\t\t\t\t\t// we cannot add arguments at the end. rather, we add\n\t\t\t\t\t// arguments before the \"--\" marker.\n\t\t\t\t\targv.splice(endOfArgsMarkerIndex, 0, '--crash-reporter-id', crashReporterId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Start crash reporter for all processes\n\tconst productName = (product.crashReporter ? product.crashReporter.productName : undefined) || product.nameShort;\n\tconst companyName = (product.crashReporter ? product.crashReporter.companyName : undefined) || 'Microsoft';\n\tconst uploadToServer = Boolean(!process.env['VSCODE_DEV'] && submitURL && !crashReporterDirectory);\n\tcrashReporter.start({\n\t\tcompanyName,\n\t\tproductName: process.env['VSCODE_DEV'] ? `${productName} Dev` : productName,\n\t\tsubmitURL,\n\t\tuploadToServer,\n\t\tcompress: true,\n\t\tignoreSystemCrashHandler: true\n\t});\n}\n\nfunction getJSFlags(cliArgs: NativeParsedArgs): string | null {\n\tconst jsFlags: string[] = [];\n\n\t// Add any existing JS flags we already got from the command line\n\tif (cliArgs['js-flags']) {\n\t\tjsFlags.push(cliArgs['js-flags']);\n\t}\n\n\tif (process.platform === 'linux') {\n\t\t// Fix cppgc crash on Linux with 16KB page size.\n\t\t// Refs https://issues.chromium.org/issues/378017037\n\t\t// The fix from https://github.com/electron/electron/commit/6c5b2ef55e08dc0bede02384747549c1eadac0eb\n\t\t// only affects non-renderer process.\n\t\t// The following will ensure that the flag will be\n\t\t// applied to the renderer process as well.\n\t\t// TODO(deepak1556): Remove this once we update to\n\t\t// Chromium >= 134.\n\t\tjsFlags.push('--nodecommit_pooled_pages');\n\t}\n\n\treturn jsFlags.length > 0 ? jsFlags.join(' ') : null;\n}\n\nfunction parseCLIArgs(): NativeParsedArgs {\n\treturn minimist(process.argv, {\n\t\tstring: [\n\t\t\t'user-data-dir',\n\t\t\t'locale',\n\t\t\t'js-flags',\n\t\t\t'crash-reporter-directory'\n\t\t],\n\t\tboolean: [\n\t\t\t'disable-chromium-sandbox',\n\t\t],\n\t\tdefault: {\n\t\t\t'sandbox': true\n\t\t},\n\t\talias: {\n\t\t\t'no-sandbox': 'sandbox'\n\t\t}\n\t});\n}\n\nfunction registerListeners(): void {\n\n\t/**\n\t * macOS: when someone drops a file to the not-yet running VSCode, the open-file event fires even before\n\t * the app-ready event. We listen very early for open-file and remember this upon startup as path to open.\n\t */\n\tconst macOpenFiles: string[] = [];\n\t(globalThis as { macOpenFiles?: string[] }).macOpenFiles = macOpenFiles;\n\tapp.on('open-file', function (event, path) {\n\t\tmacOpenFiles.push(path);\n\t});\n\n\t/**\n\t * macOS: react to open-url requests.\n\t */\n\tconst openUrls: string[] = [];\n\tconst onOpenUrl =\n\t\tfunction (event: { preventDefault: () => void }, url: string) {\n\t\t\tevent.preventDefault();\n\n\t\t\topenUrls.push(url);\n\t\t};\n\n\tapp.on('will-finish-launching', function () {\n\t\tapp.on('open-url', onOpenUrl);\n\t});\n\n\t(globalThis as { getOpenUrls?: () => string[] }).getOpenUrls = function () {\n\t\tapp.removeListener('open-url', onOpenUrl);\n\n\t\treturn openUrls;\n\t};\n}\n\nfunction getCodeCachePath(): string | undefined {\n\n\t// explicitly disabled via CLI args\n\tif (process.argv.indexOf('--no-cached-data') > 0) {\n\t\treturn undefined;\n\t}\n\n\t// running out of sources\n\tif (process.env['VSCODE_DEV']) {\n\t\treturn undefined;\n\t}\n\n\t// require commit id\n\tconst commit = product.commit;\n\tif (!commit) {\n\t\treturn undefined;\n\t}\n\n\treturn path.join(userDataPath, 'CachedData', commit);\n}\n\nasync function mkdirpIgnoreError(dir: string | undefined): Promise<string | undefined> {\n\tif (typeof dir === 'string') {\n\t\ttry {\n\t\t\tawait fs.promises.mkdir(dir, { recursive: true });\n\n\t\t\treturn dir;\n\t\t} catch (error) {\n\t\t\t// ignore\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n//#region NLS Support\n\nfunction processZhLocale(appLocale: string): string {\n\tif (appLocale.startsWith('zh')) {\n\t\tconst region = appLocale.split('-')[1];\n\n\t\t// On Windows and macOS, Chinese languages returned by\n\t\t// app.getPreferredSystemLanguages() start with zh-hans\n\t\t// for Simplified Chinese or zh-hant for Traditional Chinese,\n\t\t// so we can easily determine whether to use Simplified or Traditional.\n\t\t// However, on Linux, Chinese languages returned by that same API\n\t\t// are of the form zh-XY, where XY is a country code.\n\t\t// For China (CN), Singapore (SG), and Malaysia (MY)\n\t\t// country codes, assume they use Simplified Chinese.\n\t\t// For other cases, assume they use Traditional.\n\t\tif (['hans', 'cn', 'sg', 'my'].includes(region)) {\n\t\t\treturn 'zh-cn';\n\t\t}\n\n\t\treturn 'zh-tw';\n\t}\n\n\treturn appLocale;\n}\n\n/**\n * Resolve the NLS configuration\n */\nasync function resolveNlsConfiguration(): Promise<INLSConfiguration> {\n\n\t// First, we need to test a user defined locale.\n\t// If it fails we try the app locale.\n\t// If that fails we fall back to English.\n\n\tconst nlsConfiguration = nlsConfigurationPromise ? await nlsConfigurationPromise : undefined;\n\tif (nlsConfiguration) {\n\t\treturn nlsConfiguration;\n\t}\n\n\t// Try to use the app locale which is only valid\n\t// after the app ready event has been fired.\n\n\tlet userLocale = app.getLocale();\n\tif (!userLocale) {\n\t\treturn {\n\t\t\tuserLocale: 'en',\n\t\t\tosLocale,\n\t\t\tresolvedLanguage: 'en',\n\t\t\tdefaultMessagesFile: path.join(import.meta.dirname, 'nls.messages.json'),\n\n\t\t\t// NLS: below 2 are a relic from old times only used by vscode-nls and deprecated\n\t\t\tlocale: 'en',\n\t\t\tavailableLanguages: {}\n\t\t};\n\t}\n\n\t// See above the comment about the loader and case sensitiveness\n\tuserLocale = processZhLocale(userLocale.toLowerCase());\n\n\treturn resolveNLSConfiguration({\n\t\tuserLocale,\n\t\tosLocale,\n\t\tcommit: product.commit,\n\t\tuserDataPath,\n\t\tnlsMetadataPath: import.meta.dirname\n\t});\n}\n\n/**\n * Language tags are case insensitive however an ESM loader is case sensitive\n * To make this work on case preserving & insensitive FS we do the following:\n * the language bundles have lower case language tags and we always lower case\n * the locale we receive from the user or OS.\n */\nfunction getUserDefinedLocale(argvConfig: IArgvConfig): string | undefined {\n\tconst locale = args['locale'];\n\tif (locale) {\n\t\treturn locale.toLowerCase(); // a directly provided --locale always wins\n\t}\n\n\treturn typeof argvConfig?.locale === 'string' ? argvConfig.locale.toLowerCase() : undefined;\n}\n\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'node:path';\nimport * as fs from 'original-fs';\nimport * as os from 'node:os';\nimport { performance } from 'node:perf_hooks';\nimport { configurePortable } from './bootstrap-node.js';\nimport { bootstrapESM } from './bootstrap-esm.js';\nimport { app, protocol, crashReporter, Menu, contentTracing } from 'electron';\nimport minimist from 'minimist';\nimport { product } from './bootstrap-meta.js';\nimport { parse } from './vs/base/common/jsonc.js';\nimport { getUserDataPath } from './vs/platform/environment/node/userDataPath.js';\nimport * as perf from './vs/base/common/performance.js';\nimport { resolveNLSConfiguration } from './vs/base/node/nls.js';\nimport { getUNCHost, addUNCHostToAllowlist } from './vs/base/node/unc.js';\nimport { INLSConfiguration } from './vs/nls.js';\nimport { NativeParsedArgs } from './vs/platform/environment/common/argv.js';\n\nperf.mark('code/didStartMain');\n\nperf.mark('code/willLoadMainBundle', {\n\t// When built, the main bundle is a single JS file with all\n\t// dependencies inlined. As such, we mark `willLoadMainBundle`\n\t// as the start of the main bundle loading process.\n\tstartTime: Math.floor(performance.timeOrigin)\n});\nperf.mark('code/didLoadMainBundle');\n\n// Enable portable support\nconst portable = configurePortable(product);\n\nconst args = parseCLIArgs();\n// Configure static command line arguments\nconst argvConfig = configureCommandlineSwitchesSync(args);\n// Enable sandbox globally unless\n// 1) disabled via command line using either\n//    `--no-sandbox` or `--disable-chromium-sandbox` argument.\n// 2) argv.json contains `disable-chromium-sandbox: true`.\nif (args['sandbox'] &&\n\t!args['disable-chromium-sandbox'] &&\n\t!argvConfig['disable-chromium-sandbox']) {\n\tapp.enableSandbox();\n} else if (app.commandLine.hasSwitch('no-sandbox') &&\n\t!app.commandLine.hasSwitch('disable-gpu-sandbox')) {\n\t// Disable GPU sandbox whenever --no-sandbox is used.\n\tapp.commandLine.appendSwitch('disable-gpu-sandbox');\n} else {\n\tapp.commandLine.appendSwitch('no-sandbox');\n\tapp.commandLine.appendSwitch('disable-gpu-sandbox');\n}\n\n// Set userData path before app 'ready' event\nconst userDataPath = getUserDataPath(args, product.nameShort ?? 'code-oss-dev');\nif (process.platform === 'win32') {\n\tconst userDataUNCHost = getUNCHost(userDataPath);\n\tif (userDataUNCHost) {\n\t\taddUNCHostToAllowlist(userDataUNCHost); // enables to use UNC paths in userDataPath\n\t}\n}\napp.setPath('userData', userDataPath);\n\n// Resolve code cache path\nconst codeCachePath = getCodeCachePath();\n\n// Disable default menu (https://github.com/electron/electron/issues/35512)\nMenu.setApplicationMenu(null);\n\n// Configure crash reporter\nperf.mark('code/willStartCrashReporter');\n// If a crash-reporter-directory is specified we store the crash reports\n// in the specified directory and don't upload them to the crash server.\n//\n// Appcenter crash reporting is enabled if\n// * enable-crash-reporter runtime argument is set to 'true'\n// * --disable-crash-reporter command line parameter is not set\n//\n// Disable crash reporting in all other cases.\nif (args['crash-reporter-directory'] || (argvConfig['enable-crash-reporter'] && !args['disable-crash-reporter'])) {\n\tconfigureCrashReporter();\n}\nperf.mark('code/didStartCrashReporter');\n\n// Set logs path before app 'ready' event if running portable\n// to ensure that no 'logs' folder is created on disk at a\n// location outside of the portable directory\n// (https://github.com/microsoft/vscode/issues/56651)\nif (portable.isPortable) {\n\tapp.setAppLogsPath(path.join(userDataPath, 'logs'));\n}\n\n// Register custom schemes with privileges\nprotocol.registerSchemesAsPrivileged([\n\t{\n\t\tscheme: 'vscode-webview',\n\t\tprivileges: { standard: true, secure: true, supportFetchAPI: true, corsEnabled: true, allowServiceWorkers: true, codeCache: true }\n\t},\n\t{\n\t\tscheme: 'vscode-file',\n\t\tprivileges: { secure: true, standard: true, supportFetchAPI: true, corsEnabled: true, codeCache: true }\n\t}\n]);\n\n// Global app listeners\nregisterListeners();\n\n/**\n * We can resolve the NLS configuration early if it is defined\n * in argv.json before `app.ready` event. Otherwise we can only\n * resolve NLS after `app.ready` event to resolve the OS locale.\n */\nlet nlsConfigurationPromise: Promise<INLSConfiguration> | undefined = undefined;\n\n// Use the most preferred OS language for language recommendation.\n// The API might return an empty array on Linux, such as when\n// the 'C' locale is the user's only configured locale.\n// No matter the OS, if the array is empty, default back to 'en'.\nconst osLocale = processZhLocale((app.getPreferredSystemLanguages()?.[0] ?? 'en').toLowerCase());\nconst userLocale = getUserDefinedLocale(argvConfig);\nif (userLocale) {\n\tnlsConfigurationPromise = resolveNLSConfiguration({\n\t\tuserLocale,\n\t\tosLocale,\n\t\tcommit: product.commit,\n\t\tuserDataPath,\n\t\tnlsMetadataPath: import.meta.dirname\n\t});\n}\n\n// Pass in the locale to Electron so that the\n// Windows Control Overlay is rendered correctly on Windows.\n// For now, don't pass in the locale on macOS due to\n// https://github.com/microsoft/vscode/issues/167543.\n// If the locale is `qps-ploc`, the Microsoft\n// Pseudo Language Language Pack is being used.\n// In that case, use `en` as the Electron locale.\n\nif (process.platform === 'win32' || process.platform === 'linux') {\n\tconst electronLocale = (!userLocale || userLocale === 'qps-ploc') ? 'en' : userLocale;\n\tapp.commandLine.appendSwitch('lang', electronLocale);\n}\n\n// Load our code once ready\napp.once('ready', function () {\n\tif (args['trace']) {\n\t\tlet traceOptions: Electron.TraceConfig | Electron.TraceCategoriesAndOptions;\n\t\tif (args['trace-memory-infra']) {\n\t\t\tconst customCategories = args['trace-category-filter']?.split(',') || [];\n\t\t\tcustomCategories.push('disabled-by-default-memory-infra', 'disabled-by-default-memory-infra.v8.code_stats');\n\t\t\ttraceOptions = {\n\t\t\t\tincluded_categories: customCategories,\n\t\t\t\texcluded_categories: ['*'],\n\t\t\t\tmemory_dump_config: {\n\t\t\t\t\tallowed_dump_modes: ['light', 'detailed'],\n\t\t\t\t\ttriggers: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'periodic_interval',\n\t\t\t\t\t\t\tmode: 'detailed',\n\t\t\t\t\t\t\tmin_time_between_dumps_ms: 10000\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'periodic_interval',\n\t\t\t\t\t\t\tmode: 'light',\n\t\t\t\t\t\t\tmin_time_between_dumps_ms: 1000\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\ttraceOptions = {\n\t\t\t\tcategoryFilter: args['trace-category-filter'] || '*',\n\t\t\t\ttraceOptions: args['trace-options'] || 'record-until-full,enable-sampling'\n\t\t\t};\n\t\t}\n\n\t\tcontentTracing.startRecording(traceOptions).finally(() => onReady());\n\t} else {\n\t\tonReady();\n\t}\n});\n\nasync function onReady() {\n\tperf.mark('code/mainAppReady');\n\n\ttry {\n\t\tconst [, nlsConfig] = await Promise.all([\n\t\t\tmkdirpIgnoreError(codeCachePath),\n\t\t\tresolveNlsConfiguration()\n\t\t]);\n\n\t\tawait startup(codeCachePath, nlsConfig);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}\n\n/**\n * Main startup routine\n */\nasync function startup(codeCachePath: string | undefined, nlsConfig: INLSConfiguration): Promise<void> {\n\tprocess.env['VSCODE_NLS_CONFIG'] = JSON.stringify(nlsConfig);\n\tprocess.env['VSCODE_CODE_CACHE_PATH'] = codeCachePath || '';\n\n\t// Bootstrap ESM\n\tawait bootstrapESM();\n\n\t// Load Main\n\tawait import('./vs/code/electron-main/main.js');\n\tperf.mark('code/didRunMainBundle');\n}\n\nfunction configureCommandlineSwitchesSync(cliArgs: NativeParsedArgs) {\n\tconst SUPPORTED_ELECTRON_SWITCHES = [\n\n\t\t// alias from us for --disable-gpu\n\t\t'disable-hardware-acceleration',\n\n\t\t// override for the color profile to use\n\t\t'force-color-profile',\n\n\t\t// disable LCD font rendering, a Chromium flag\n\t\t'disable-lcd-text',\n\n\t\t// bypass any specified proxy for the given semi-colon-separated list of hosts\n\t\t'proxy-bypass-list',\n\n\t\t'remote-debugging-port'\n\t];\n\n\tif (process.platform === 'linux') {\n\n\t\t// Force enable screen readers on Linux via this flag\n\t\tSUPPORTED_ELECTRON_SWITCHES.push('force-renderer-accessibility');\n\n\t\t// override which password-store is used on Linux\n\t\tSUPPORTED_ELECTRON_SWITCHES.push('password-store');\n\t}\n\n\tconst SUPPORTED_MAIN_PROCESS_SWITCHES = [\n\n\t\t// Persistently enable proposed api via argv.json: https://github.com/microsoft/vscode/issues/99775\n\t\t'enable-proposed-api',\n\n\t\t// Log level to use. Default is 'info'. Allowed values are 'error', 'warn', 'info', 'debug', 'trace', 'off'.\n\t\t'log-level',\n\n\t\t// Use an in-memory storage for secrets\n\t\t'use-inmemory-secretstorage',\n\n\t\t// Enables display tracking to restore maximized windows under RDP: https://github.com/electron/electron/issues/47016\n\t\t'enable-rdp-display-tracking',\n\t];\n\n\t// Read argv config\n\tconst argvConfig = readArgvConfigSync();\n\n\tObject.keys(argvConfig).forEach(argvKey => {\n\t\tconst argvValue = argvConfig[argvKey];\n\n\t\t// Append Electron flags to Electron\n\t\tif (SUPPORTED_ELECTRON_SWITCHES.indexOf(argvKey) !== -1) {\n\t\t\tif (argvValue === true || argvValue === 'true') {\n\t\t\t\tif (argvKey === 'disable-hardware-acceleration') {\n\t\t\t\t\tapp.disableHardwareAcceleration(); // needs to be called explicitly\n\t\t\t\t} else {\n\t\t\t\t\tapp.commandLine.appendSwitch(argvKey);\n\t\t\t\t}\n\t\t\t} else if (typeof argvValue === 'string' && argvValue) {\n\t\t\t\tif (argvKey === 'password-store') {\n\t\t\t\t\t// Password store\n\t\t\t\t\t// TODO@TylerLeonhardt: Remove this migration in 3 months\n\t\t\t\t\tlet migratedArgvValue = argvValue;\n\t\t\t\t\tif (argvValue === 'gnome' || argvValue === 'gnome-keyring') {\n\t\t\t\t\t\tmigratedArgvValue = 'gnome-libsecret';\n\t\t\t\t\t}\n\t\t\t\t\tapp.commandLine.appendSwitch(argvKey, migratedArgvValue);\n\t\t\t\t} else {\n\t\t\t\t\tapp.commandLine.appendSwitch(argvKey, argvValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Append main process flags to process.argv\n\t\telse if (SUPPORTED_MAIN_PROCESS_SWITCHES.indexOf(argvKey) !== -1) {\n\t\t\tswitch (argvKey) {\n\t\t\t\tcase 'enable-proposed-api':\n\t\t\t\t\tif (Array.isArray(argvValue)) {\n\t\t\t\t\t\targvValue.forEach(id => id && typeof id === 'string' && process.argv.push('--enable-proposed-api', id));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(`Unexpected value for \\`enable-proposed-api\\` in argv.json. Expected array of extension ids.`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'log-level':\n\t\t\t\t\tif (typeof argvValue === 'string') {\n\t\t\t\t\t\tprocess.argv.push('--log', argvValue);\n\t\t\t\t\t} else if (Array.isArray(argvValue)) {\n\t\t\t\t\t\tfor (const value of argvValue) {\n\t\t\t\t\t\t\tprocess.argv.push('--log', value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'use-inmemory-secretstorage':\n\t\t\t\t\tif (argvValue) {\n\t\t\t\t\t\tprocess.argv.push('--use-inmemory-secretstorage');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'enable-rdp-display-tracking':\n\t\t\t\t\tif (argvValue) {\n\t\t\t\t\t\tprocess.argv.push('--enable-rdp-display-tracking');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\t// Following features are enabled from the runtime:\n\t// `NetAdapterMaxBufSizeFeature` - Specify the max buffer size for NetToMojoPendingBuffer, refs https://github.com/microsoft/vscode/issues/268800\n\t// `DocumentPolicyIncludeJSCallStacksInCrashReports` - https://www.electronjs.org/docs/latest/api/web-frame-main#framecollectjavascriptcallstack-experimental\n\t// `EarlyEstablishGpuChannel` - Refs https://issues.chromium.org/issues/40208065\n\t// `EstablishGpuChannelAsync` - Refs https://issues.chromium.org/issues/40208065\n\tconst featuresToEnable =\n\t\t`NetAdapterMaxBufSizeFeature:NetAdapterMaxBufSize/8192,DocumentPolicyIncludeJSCallStacksInCrashReports,EarlyEstablishGpuChannel,EstablishGpuChannelAsync,${app.commandLine.getSwitchValue('enable-features')}`;\n\tapp.commandLine.appendSwitch('enable-features', featuresToEnable);\n\n\t// Following features are disabled from the runtime:\n\t// `CalculateNativeWinOcclusion` - Disable native window occlusion tracker (https://groups.google.com/a/chromium.org/g/embedder-dev/c/ZF3uHHyWLKw/m/VDN2hDXMAAAJ)\n\tconst featuresToDisable =\n\t\t`CalculateNativeWinOcclusion,${app.commandLine.getSwitchValue('disable-features')}`;\n\tapp.commandLine.appendSwitch('disable-features', featuresToDisable);\n\n\t// Blink features to configure.\n\t// `FontMatchingCTMigration` - Siwtch font matching on macOS to Appkit (Refs https://github.com/microsoft/vscode/issues/224496#issuecomment-2270418470).\n\t// `StandardizedBrowserZoom` - Disable zoom adjustment for bounding box (https://github.com/microsoft/vscode/issues/232750#issuecomment-2459495394)\n\tconst blinkFeaturesToDisable =\n\t\t`FontMatchingCTMigration,StandardizedBrowserZoom,${app.commandLine.getSwitchValue('disable-blink-features')}`;\n\tapp.commandLine.appendSwitch('disable-blink-features', blinkFeaturesToDisable);\n\n\t// Support JS Flags\n\tconst jsFlags = getJSFlags(cliArgs);\n\tif (jsFlags) {\n\t\tapp.commandLine.appendSwitch('js-flags', jsFlags);\n\t}\n\n\t// Use portal version 4 that supports current_folder option\n\t// to address https://github.com/microsoft/vscode/issues/213780\n\t// Runtime sets the default version to 3, refs https://github.com/electron/electron/pull/44426\n\tapp.commandLine.appendSwitch('xdg-portal-required-version', '4');\n\n\treturn argvConfig;\n}\n\ninterface IArgvConfig {\n\t[key: string]: string | string[] | boolean | undefined;\n\treadonly locale?: string;\n\treadonly 'disable-lcd-text'?: boolean;\n\treadonly 'proxy-bypass-list'?: string;\n\treadonly 'disable-hardware-acceleration'?: boolean;\n\treadonly 'force-color-profile'?: string;\n\treadonly 'enable-crash-reporter'?: boolean;\n\treadonly 'crash-reporter-id'?: string;\n\treadonly 'enable-proposed-api'?: string[];\n\treadonly 'log-level'?: string | string[];\n\treadonly 'disable-chromium-sandbox'?: boolean;\n\treadonly 'use-inmemory-secretstorage'?: boolean;\n\treadonly 'enable-rdp-display-tracking'?: boolean;\n\treadonly 'remote-debugging-port'?: string;\n}\n\nfunction readArgvConfigSync(): IArgvConfig {\n\n\t// Read or create the argv.json config file sync before app('ready')\n\tconst argvConfigPath = getArgvConfigPath();\n\tlet argvConfig: IArgvConfig | undefined = undefined;\n\ttry {\n\t\targvConfig = parse(fs.readFileSync(argvConfigPath).toString());\n\t} catch (error) {\n\t\tif (error && error.code === 'ENOENT') {\n\t\t\tcreateDefaultArgvConfigSync(argvConfigPath);\n\t\t} else {\n\t\t\tconsole.warn(`Unable to read argv.json configuration file in ${argvConfigPath}, falling back to defaults (${error})`);\n\t\t}\n\t}\n\n\t// Fallback to default\n\tif (!argvConfig) {\n\t\targvConfig = {};\n\t}\n\n\treturn argvConfig;\n}\n\nfunction createDefaultArgvConfigSync(argvConfigPath: string): void {\n\ttry {\n\n\t\t// Ensure argv config parent exists\n\t\tconst argvConfigPathDirname = path.dirname(argvConfigPath);\n\t\tif (!fs.existsSync(argvConfigPathDirname)) {\n\t\t\tfs.mkdirSync(argvConfigPathDirname);\n\t\t}\n\n\t\t// Default argv content\n\t\tconst defaultArgvConfigContent = [\n\t\t\t'// This configuration file allows you to pass permanent command line arguments to VS Code.',\n\t\t\t'// Only a subset of arguments is currently supported to reduce the likelihood of breaking',\n\t\t\t'// the installation.',\n\t\t\t'//',\n\t\t\t'// PLEASE DO NOT CHANGE WITHOUT UNDERSTANDING THE IMPACT',\n\t\t\t'//',\n\t\t\t'// NOTE: Changing this file requires a restart of VS Code.',\n\t\t\t'{',\n\t\t\t'\t// Use software rendering instead of hardware accelerated rendering.',\n\t\t\t'\t// This can help in cases where you see rendering issues in VS Code.',\n\t\t\t'\t// \"disable-hardware-acceleration\": true',\n\t\t\t'}'\n\t\t];\n\n\t\t// Create initial argv.json with default content\n\t\tfs.writeFileSync(argvConfigPath, defaultArgvConfigContent.join('\\n'));\n\t} catch (error) {\n\t\tconsole.error(`Unable to create argv.json configuration file in ${argvConfigPath}, falling back to defaults (${error})`);\n\t}\n}\n\nfunction getArgvConfigPath(): string {\n\tconst vscodePortable = process.env['VSCODE_PORTABLE'];\n\tif (vscodePortable) {\n\t\treturn path.join(vscodePortable, 'argv.json');\n\t}\n\n\tlet dataFolderName = product.dataFolderName;\n\tif (process.env['VSCODE_DEV']) {\n\t\tdataFolderName = `${dataFolderName}-dev`;\n\t}\n\n\treturn path.join(os.homedir(), dataFolderName!, 'argv.json');\n}\n\nfunction configureCrashReporter(): void {\n\tlet crashReporterDirectory = args['crash-reporter-directory'];\n\tlet submitURL = '';\n\tif (crashReporterDirectory) {\n\t\tcrashReporterDirectory = path.normalize(crashReporterDirectory);\n\n\t\tif (!path.isAbsolute(crashReporterDirectory)) {\n\t\t\tconsole.error(`The path '${crashReporterDirectory}' specified for --crash-reporter-directory must be absolute.`);\n\t\t\tapp.exit(1);\n\t\t}\n\n\t\tif (!fs.existsSync(crashReporterDirectory)) {\n\t\t\ttry {\n\t\t\t\tfs.mkdirSync(crashReporterDirectory, { recursive: true });\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(`The path '${crashReporterDirectory}' specified for --crash-reporter-directory does not seem to exist or cannot be created.`);\n\t\t\t\tapp.exit(1);\n\t\t\t}\n\t\t}\n\n\t\t// Crashes are stored in the crashDumps directory by default, so we\n\t\t// need to change that directory to the provided one\n\t\tconsole.log(`Found --crash-reporter-directory argument. Setting crashDumps directory to be '${crashReporterDirectory}'`);\n\t\tapp.setPath('crashDumps', crashReporterDirectory);\n\t}\n\n\t// Otherwise we configure the crash reporter from product.json\n\telse {\n\t\tconst appCenter = product.appCenter;\n\t\tif (appCenter) {\n\t\t\tconst isWindows = (process.platform === 'win32');\n\t\t\tconst isLinux = (process.platform === 'linux');\n\t\t\tconst isDarwin = (process.platform === 'darwin');\n\t\t\tconst crashReporterId = argvConfig['crash-reporter-id'];\n\t\t\tconst uuidPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n\t\t\tif (crashReporterId && uuidPattern.test(crashReporterId)) {\n\t\t\t\tif (isWindows) {\n\t\t\t\t\tswitch (process.arch) {\n\t\t\t\t\t\tcase 'x64':\n\t\t\t\t\t\t\tsubmitURL = appCenter['win32-x64'];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'arm64':\n\t\t\t\t\t\t\tsubmitURL = appCenter['win32-arm64'];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else if (isDarwin) {\n\t\t\t\t\tif (product.darwinUniversalAssetId) {\n\t\t\t\t\t\tsubmitURL = appCenter['darwin-universal'];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch (process.arch) {\n\t\t\t\t\t\t\tcase 'x64':\n\t\t\t\t\t\t\t\tsubmitURL = appCenter['darwin'];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'arm64':\n\t\t\t\t\t\t\t\tsubmitURL = appCenter['darwin-arm64'];\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (isLinux) {\n\t\t\t\t\tsubmitURL = appCenter['linux-x64'];\n\t\t\t\t}\n\t\t\t\tsubmitURL = submitURL.concat('&uid=', crashReporterId, '&iid=', crashReporterId, '&sid=', crashReporterId);\n\t\t\t\t// Send the id for child node process that are explicitly starting crash reporter.\n\t\t\t\t// For vscode this is ExtensionHost process currently.\n\t\t\t\tconst argv = process.argv;\n\t\t\t\tconst endOfArgsMarkerIndex = argv.indexOf('--');\n\t\t\t\tif (endOfArgsMarkerIndex === -1) {\n\t\t\t\t\targv.push('--crash-reporter-id', crashReporterId);\n\t\t\t\t} else {\n\t\t\t\t\t// if the we have an argument \"--\" (end of argument marker)\n\t\t\t\t\t// we cannot add arguments at the end. rather, we add\n\t\t\t\t\t// arguments before the \"--\" marker.\n\t\t\t\t\targv.splice(endOfArgsMarkerIndex, 0, '--crash-reporter-id', crashReporterId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Start crash reporter for all processes\n\tconst productName = (product.crashReporter ? product.crashReporter.productName : undefined) || product.nameShort;\n\tconst companyName = (product.crashReporter ? product.crashReporter.companyName : undefined) || 'Microsoft';\n\tconst uploadToServer = Boolean(!process.env['VSCODE_DEV'] && submitURL && !crashReporterDirectory);\n\tcrashReporter.start({\n\t\tcompanyName,\n\t\tproductName: process.env['VSCODE_DEV'] ? `${productName} Dev` : productName,\n\t\tsubmitURL,\n\t\tuploadToServer,\n\t\tcompress: true,\n\t\tignoreSystemCrashHandler: true\n\t});\n}\n\nfunction getJSFlags(cliArgs: NativeParsedArgs): string | null {\n\tconst jsFlags: string[] = [];\n\n\t// Add any existing JS flags we already got from the command line\n\tif (cliArgs['js-flags']) {\n\t\tjsFlags.push(cliArgs['js-flags']);\n\t}\n\n\tif (process.platform === 'linux') {\n\t\t// Fix cppgc crash on Linux with 16KB page size.\n\t\t// Refs https://issues.chromium.org/issues/378017037\n\t\t// The fix from https://github.com/electron/electron/commit/6c5b2ef55e08dc0bede02384747549c1eadac0eb\n\t\t// only affects non-renderer process.\n\t\t// The following will ensure that the flag will be\n\t\t// applied to the renderer process as well.\n\t\t// TODO(deepak1556): Remove this once we update to\n\t\t// Chromium >= 134.\n\t\tjsFlags.push('--nodecommit_pooled_pages');\n\t}\n\n\treturn jsFlags.length > 0 ? jsFlags.join(' ') : null;\n}\n\nfunction parseCLIArgs(): NativeParsedArgs {\n\treturn minimist(process.argv, {\n\t\tstring: [\n\t\t\t'user-data-dir',\n\t\t\t'locale',\n\t\t\t'js-flags',\n\t\t\t'crash-reporter-directory'\n\t\t],\n\t\tboolean: [\n\t\t\t'disable-chromium-sandbox',\n\t\t],\n\t\tdefault: {\n\t\t\t'sandbox': true\n\t\t},\n\t\talias: {\n\t\t\t'no-sandbox': 'sandbox'\n\t\t}\n\t});\n}\n\nfunction registerListeners(): void {\n\n\t/**\n\t * macOS: when someone drops a file to the not-yet running VSCode, the open-file event fires even before\n\t * the app-ready event. We listen very early for open-file and remember this upon startup as path to open.\n\t */\n\tconst macOpenFiles: string[] = [];\n\t(globalThis as { macOpenFiles?: string[] }).macOpenFiles = macOpenFiles;\n\tapp.on('open-file', function (event, path) {\n\t\tmacOpenFiles.push(path);\n\t});\n\n\t/**\n\t * macOS: react to open-url requests.\n\t */\n\tconst openUrls: string[] = [];\n\tconst onOpenUrl =\n\t\tfunction (event: { preventDefault: () => void }, url: string) {\n\t\t\tevent.preventDefault();\n\n\t\t\topenUrls.push(url);\n\t\t};\n\n\tapp.on('will-finish-launching', function () {\n\t\tapp.on('open-url', onOpenUrl);\n\t});\n\n\t(globalThis as { getOpenUrls?: () => string[] }).getOpenUrls = function () {\n\t\tapp.removeListener('open-url', onOpenUrl);\n\n\t\treturn openUrls;\n\t};\n}\n\nfunction getCodeCachePath(): string | undefined {\n\n\t// explicitly disabled via CLI args\n\tif (process.argv.indexOf('--no-cached-data') > 0) {\n\t\treturn undefined;\n\t}\n\n\t// running out of sources\n\tif (process.env['VSCODE_DEV']) {\n\t\treturn undefined;\n\t}\n\n\t// require commit id\n\tconst commit = product.commit;\n\tif (!commit) {\n\t\treturn undefined;\n\t}\n\n\treturn path.join(userDataPath, 'CachedData', commit);\n}\n\nasync function mkdirpIgnoreError(dir: string | undefined): Promise<string | undefined> {\n\tif (typeof dir === 'string') {\n\t\ttry {\n\t\t\tawait fs.promises.mkdir(dir, { recursive: true });\n\n\t\t\treturn dir;\n\t\t} catch (error) {\n\t\t\t// ignore\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n//#region NLS Support\n\nfunction processZhLocale(appLocale: string): string {\n\tif (appLocale.startsWith('zh')) {\n\t\tconst region = appLocale.split('-')[1];\n\n\t\t// On Windows and macOS, Chinese languages returned by\n\t\t// app.getPreferredSystemLanguages() start with zh-hans\n\t\t// for Simplified Chinese or zh-hant for Traditional Chinese,\n\t\t// so we can easily determine whether to use Simplified or Traditional.\n\t\t// However, on Linux, Chinese languages returned by that same API\n\t\t// are of the form zh-XY, where XY is a country code.\n\t\t// For China (CN), Singapore (SG), and Malaysia (MY)\n\t\t// country codes, assume they use Simplified Chinese.\n\t\t// For other cases, assume they use Traditional.\n\t\tif (['hans', 'cn', 'sg', 'my'].includes(region)) {\n\t\t\treturn 'zh-cn';\n\t\t}\n\n\t\treturn 'zh-tw';\n\t}\n\n\treturn appLocale;\n}\n\n/**\n * Resolve the NLS configuration\n */\nasync function resolveNlsConfiguration(): Promise<INLSConfiguration> {\n\n\t// First, we need to test a user defined locale.\n\t// If it fails we try the app locale.\n\t// If that fails we fall back to English.\n\n\tconst nlsConfiguration = nlsConfigurationPromise ? await nlsConfigurationPromise : undefined;\n\tif (nlsConfiguration) {\n\t\treturn nlsConfiguration;\n\t}\n\n\t// Try to use the app locale which is only valid\n\t// after the app ready event has been fired.\n\n\tlet userLocale = app.getLocale();\n\tif (!userLocale) {\n\t\treturn {\n\t\t\tuserLocale: 'en',\n\t\t\tosLocale,\n\t\t\tresolvedLanguage: 'en',\n\t\t\tdefaultMessagesFile: path.join(import.meta.dirname, 'nls.messages.json'),\n\n\t\t\t// NLS: below 2 are a relic from old times only used by vscode-nls and deprecated\n\t\t\tlocale: 'en',\n\t\t\tavailableLanguages: {}\n\t\t};\n\t}\n\n\t// See above the comment about the loader and case sensitiveness\n\tuserLocale = processZhLocale(userLocale.toLowerCase());\n\n\treturn resolveNLSConfiguration({\n\t\tuserLocale,\n\t\tosLocale,\n\t\tcommit: product.commit,\n\t\tuserDataPath,\n\t\tnlsMetadataPath: import.meta.dirname\n\t});\n}\n\n/**\n * Language tags are case insensitive however an ESM loader is case sensitive\n * To make this work on case preserving & insensitive FS we do the following:\n * the language bundles have lower case language tags and we always lower case\n * the locale we receive from the user or OS.\n */\nfunction getUserDefinedLocale(argvConfig: IArgvConfig): string | undefined {\n\tconst locale = args['locale'];\n\tif (locale) {\n\t\treturn locale.toLowerCase(); // a directly provided --locale always wins\n\t}\n\n\treturn typeof argvConfig?.locale === 'string' ? argvConfig.locale.toLowerCase() : undefined;\n}\n\n//#endregion\n"]}