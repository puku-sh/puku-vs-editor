{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/window/common/window.ts","vs/platform/window/common/window.ts"],"names":[],"mappings":"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","file":"window.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { IStringDictionary } from '../../../base/common/collections.js';\nimport { PerformanceMark } from '../../../base/common/performance.js';\nimport { isMacintosh, isNative, isWeb } from '../../../base/common/platform.js';\nimport { URI, UriComponents, UriDto } from '../../../base/common/uri.js';\nimport { ISandboxConfiguration } from '../../../base/parts/sandbox/common/sandboxTypes.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IEditorOptions } from '../../editor/common/editor.js';\nimport { NativeParsedArgs } from '../../environment/common/argv.js';\nimport { FileType } from '../../files/common/files.js';\nimport { ILoggerResource, LogLevel } from '../../log/common/log.js';\nimport { PolicyDefinition, PolicyValue } from '../../policy/common/policy.js';\nimport { IPartsSplash } from '../../theme/common/themeService.js';\nimport { IUserDataProfile } from '../../userDataProfile/common/userDataProfile.js';\nimport { IAnyWorkspaceIdentifier, ISingleFolderWorkspaceIdentifier, IWorkspaceIdentifier } from '../../workspace/common/workspace.js';\n\nexport const WindowMinimumSize = {\n\tWIDTH: 400,\n\tWIDTH_WITH_VERTICAL_PANEL: 600,\n\tHEIGHT: 270\n};\n\nexport interface IPoint {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface IRectangle extends IPoint {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface IBaseOpenWindowsOptions {\n\n\t/**\n\t * Whether to reuse the window or open a new one.\n\t */\n\treadonly forceReuseWindow?: boolean;\n\n\t/**\n\t * The remote authority to use when windows are opened with either\n\t * - no workspace (empty window)\n\t * - a workspace that is neither `file://` nor `vscode-remote://`\n\t * Use 'null' for a local window.\n\t * If not set, defaults to the remote authority of the current window.\n\t */\n\treadonly remoteAuthority?: string | null;\n\n\treadonly forceProfile?: string;\n\treadonly forceTempProfile?: boolean;\n}\n\nexport interface IOpenWindowOptions extends IBaseOpenWindowsOptions {\n\treadonly forceNewWindow?: boolean;\n\treadonly preferNewWindow?: boolean;\n\n\treadonly noRecentEntry?: boolean;\n\n\treadonly addMode?: boolean;\n\treadonly removeMode?: boolean;\n\n\treadonly diffMode?: boolean;\n\treadonly mergeMode?: boolean;\n\treadonly gotoLineMode?: boolean;\n\n\treadonly waitMarkerFileURI?: URI;\n}\n\nexport interface IAddRemoveFoldersRequest {\n\treadonly foldersToAdd: UriComponents[];\n\treadonly foldersToRemove: UriComponents[];\n}\n\ninterface IOpenedWindow {\n\treadonly id: number;\n\treadonly title: string;\n\treadonly filename?: string;\n}\n\nexport interface IOpenedMainWindow extends IOpenedWindow {\n\treadonly workspace?: IAnyWorkspaceIdentifier;\n\treadonly dirty: boolean;\n}\n\nexport interface IOpenedAuxiliaryWindow extends IOpenedWindow {\n\treadonly parentId: number;\n}\n\nexport function isOpenedAuxiliaryWindow(candidate: IOpenedMainWindow | IOpenedAuxiliaryWindow): candidate is IOpenedAuxiliaryWindow {\n\treturn typeof (candidate as IOpenedAuxiliaryWindow).parentId === 'number';\n}\n\nexport interface IOpenEmptyWindowOptions extends IBaseOpenWindowsOptions { }\n\nexport type IWindowOpenable = IWorkspaceToOpen | IFolderToOpen | IFileToOpen;\n\nexport interface IBaseWindowOpenable {\n\tlabel?: string;\n}\n\nexport interface IWorkspaceToOpen extends IBaseWindowOpenable {\n\treadonly workspaceUri: URI;\n}\n\nexport interface IFolderToOpen extends IBaseWindowOpenable {\n\treadonly folderUri: URI;\n}\n\nexport interface IFileToOpen extends IBaseWindowOpenable {\n\treadonly fileUri: URI;\n}\n\nexport function isWorkspaceToOpen(uriToOpen: IWindowOpenable): uriToOpen is IWorkspaceToOpen {\n\treturn !!(uriToOpen as IWorkspaceToOpen).workspaceUri;\n}\n\nexport function isFolderToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFolderToOpen {\n\treturn !!(uriToOpen as IFolderToOpen).folderUri;\n}\n\nexport function isFileToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFileToOpen {\n\treturn !!(uriToOpen as IFileToOpen).fileUri;\n}\n\nexport const enum MenuSettings {\n\tMenuStyle = 'window.menuStyle',\n\tMenuBarVisibility = 'window.menuBarVisibility'\n}\n\nexport const enum MenuStyleConfiguration {\n\tCUSTOM = 'custom',\n\tNATIVE = 'native',\n\tINHERIT = 'inherit',\n}\n\nexport function hasNativeContextMenu(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\tif (isWeb) {\n\t\treturn false;\n\t}\n\n\tconst nativeTitle = hasNativeTitlebar(configurationService, titleBarStyle);\n\tconst windowConfigurations = configurationService.getValue<IWindowSettings | undefined>('window');\n\n\tif (windowConfigurations?.menuStyle === MenuStyleConfiguration.NATIVE) {\n\t\t// Do not support native menu with custom title bar\n\t\tif (!isMacintosh && !nativeTitle) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tif (windowConfigurations?.menuStyle === MenuStyleConfiguration.CUSTOM) {\n\t\treturn false;\n\t}\n\n\treturn nativeTitle; // Default to inherit from title bar style\n}\n\nexport function hasNativeMenu(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\tif (isWeb) {\n\t\treturn false;\n\t}\n\n\tif (isMacintosh) {\n\t\treturn true;\n\t}\n\n\treturn hasNativeContextMenu(configurationService, titleBarStyle);\n}\n\nexport type MenuBarVisibility = 'classic' | 'visible' | 'toggle' | 'hidden' | 'compact';\n\nexport function getMenuBarVisibility(configurationService: IConfigurationService): MenuBarVisibility {\n\tconst menuBarVisibility = configurationService.getValue<MenuBarVisibility | 'default'>(MenuSettings.MenuBarVisibility);\n\n\tif (menuBarVisibility === 'default' || (menuBarVisibility === 'compact' && hasNativeMenu(configurationService)) || (isMacintosh && isNative)) {\n\t\treturn 'classic';\n\t} else {\n\t\treturn menuBarVisibility;\n\t}\n}\n\nexport interface IWindowsConfiguration {\n\treadonly window: IWindowSettings;\n}\n\nexport interface IWindowSettings {\n\treadonly openFilesInNewWindow: 'on' | 'off' | 'default';\n\treadonly openFoldersInNewWindow: 'on' | 'off' | 'default';\n\treadonly openWithoutArgumentsInNewWindow: 'on' | 'off';\n\treadonly restoreWindows: 'preserve' | 'all' | 'folders' | 'one' | 'none';\n\treadonly restoreFullscreen: boolean;\n\treadonly zoomLevel: number;\n\treadonly titleBarStyle: TitlebarStyle;\n\treadonly controlsStyle: WindowControlsStyle;\n\treadonly menuStyle: MenuStyleConfiguration;\n\treadonly autoDetectHighContrast: boolean;\n\treadonly autoDetectColorScheme: boolean;\n\treadonly menuBarVisibility: MenuBarVisibility;\n\treadonly newWindowDimensions: 'default' | 'inherit' | 'offset' | 'maximized' | 'fullscreen';\n\treadonly nativeTabs: boolean;\n\treadonly nativeFullScreen: boolean;\n\treadonly enableMenuBarMnemonics: boolean;\n\treadonly closeWhenEmpty: boolean;\n\treadonly clickThroughInactive: boolean;\n\treadonly newWindowProfile: string;\n\treadonly density: IDensitySettings;\n\treadonly border: 'off' | 'default' | 'system' | string /* color in RGB or other formats */;\n}\n\nexport interface IDensitySettings {\n\treadonly editorTabHeight: 'default' | 'compact';\n}\n\nexport const enum TitleBarSetting {\n\tTITLE_BAR_STYLE = 'window.titleBarStyle',\n\tCUSTOM_TITLE_BAR_VISIBILITY = 'window.customTitleBarVisibility',\n}\n\nexport const enum TitlebarStyle {\n\tNATIVE = 'native',\n\tCUSTOM = 'custom',\n}\n\nexport const enum WindowControlsStyle {\n\tNATIVE = 'native',\n\tCUSTOM = 'custom',\n\tHIDDEN = 'hidden'\n}\n\nexport const enum CustomTitleBarVisibility {\n\tAUTO = 'auto',\n\tWINDOWED = 'windowed',\n\tNEVER = 'never',\n}\n\nexport function hasCustomTitlebar(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\t// Returns if it possible to have a custom title bar in the curren session\n\t// Does not imply that the title bar is visible\n\treturn true;\n}\n\nexport function hasNativeTitlebar(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\tif (!titleBarStyle) {\n\t\ttitleBarStyle = getTitleBarStyle(configurationService);\n\t}\n\n\treturn titleBarStyle === TitlebarStyle.NATIVE;\n}\n\nexport function getTitleBarStyle(configurationService: IConfigurationService): TitlebarStyle {\n\tif (isWeb) {\n\t\treturn TitlebarStyle.CUSTOM;\n\t}\n\n\tconst configuration = configurationService.getValue<IWindowSettings | undefined>('window');\n\tif (configuration) {\n\t\tconst useNativeTabs = isMacintosh && configuration.nativeTabs === true;\n\t\tif (useNativeTabs) {\n\t\t\treturn TitlebarStyle.NATIVE; // native tabs on sierra do not work with custom title style\n\t\t}\n\n\t\tconst useSimpleFullScreen = isMacintosh && configuration.nativeFullScreen === false;\n\t\tif (useSimpleFullScreen) {\n\t\t\treturn TitlebarStyle.NATIVE; // simple fullscreen does not work well with custom title style (https://github.com/microsoft/vscode/issues/63291)\n\t\t}\n\n\t\tconst style = configuration.titleBarStyle;\n\t\tif (style === TitlebarStyle.NATIVE || style === TitlebarStyle.CUSTOM) {\n\t\t\treturn style;\n\t\t}\n\t}\n\n\treturn TitlebarStyle.CUSTOM; // default to custom on all OS\n}\n\nexport function getWindowControlsStyle(configurationService: IConfigurationService): WindowControlsStyle {\n\tif (isWeb || isMacintosh || getTitleBarStyle(configurationService) === TitlebarStyle.NATIVE) {\n\t\treturn WindowControlsStyle.NATIVE; // only supported on Windows/Linux desktop with custom titlebar\n\t}\n\n\tconst configuration = configurationService.getValue<IWindowSettings | undefined>('window');\n\tconst style = configuration?.controlsStyle;\n\tif (style === WindowControlsStyle.CUSTOM || style === WindowControlsStyle.HIDDEN) {\n\t\treturn style;\n\t}\n\n\treturn WindowControlsStyle.NATIVE; // default to native on all OS\n}\n\nexport const DEFAULT_CUSTOM_TITLEBAR_HEIGHT = 35; // includes space for command center\n\nexport function useWindowControlsOverlay(configurationService: IConfigurationService): boolean {\n\tif (isWeb) {\n\t\treturn false; // only supported on desktop instances\n\t}\n\n\tif (hasNativeTitlebar(configurationService)) {\n\t\treturn false; // only supported when title bar is custom\n\t}\n\n\tif (!isMacintosh) {\n\t\tconst setting = getWindowControlsStyle(configurationService);\n\t\tif (setting === WindowControlsStyle.CUSTOM || setting === WindowControlsStyle.HIDDEN) {\n\t\t\treturn false; // explicitly disabled by choice\n\t\t}\n\t}\n\n\treturn true; // default\n}\n\nexport function useNativeFullScreen(configurationService: IConfigurationService): boolean {\n\tconst windowConfig = configurationService.getValue<IWindowSettings | undefined>('window');\n\tif (!windowConfig || typeof windowConfig.nativeFullScreen !== 'boolean') {\n\t\treturn true; // default\n\t}\n\n\tif (windowConfig.nativeTabs) {\n\t\treturn true; // https://github.com/electron/electron/issues/16142\n\t}\n\n\treturn windowConfig.nativeFullScreen !== false;\n}\n\n\nexport interface IPath<T = IEditorOptions> extends IPathData<T> {\n\n\t/**\n\t * The file path to open within the instance\n\t */\n\tfileUri?: URI;\n}\n\nexport interface IPathData<T = IEditorOptions> {\n\n\t/**\n\t * The file path to open within the instance\n\t */\n\treadonly fileUri?: UriComponents;\n\n\t/**\n\t * Optional editor options to apply in the file\n\t */\n\treadonly options?: T;\n\n\t/**\n\t * A hint that the file exists. if true, the\n\t * file exists, if false it does not. with\n\t * `undefined` the state is unknown.\n\t */\n\treadonly exists?: boolean;\n\n\t/**\n\t * A hint about the file type of this path.\n\t * with `undefined` the type is unknown.\n\t */\n\treadonly type?: FileType;\n\n\t/**\n\t * Specifies if the file should be only be opened\n\t * if it exists.\n\t */\n\treadonly openOnlyIfExists?: boolean;\n}\n\nexport interface IPathsToWaitFor extends IPathsToWaitForData {\n\tpaths: IPath[];\n\twaitMarkerFileUri: URI;\n}\n\ninterface IPathsToWaitForData {\n\treadonly paths: IPathData[];\n\treadonly waitMarkerFileUri: UriComponents;\n}\n\nexport interface IOpenFileRequest {\n\treadonly filesToOpenOrCreate?: IPathData[];\n\treadonly filesToDiff?: IPathData[];\n\treadonly filesToMerge?: IPathData[];\n}\n\n/**\n * Additional context for the request on native only.\n */\nexport interface INativeOpenFileRequest extends IOpenFileRequest {\n\treadonly termProgram?: string;\n\treadonly filesToWait?: IPathsToWaitForData;\n}\n\nexport interface INativeRunActionInWindowRequest {\n\treadonly id: string;\n\treadonly from: 'menu' | 'touchbar' | 'mouse';\n\treadonly args?: unknown[];\n}\n\nexport interface INativeRunKeybindingInWindowRequest {\n\treadonly userSettingsLabel: string;\n}\n\nexport interface IColorScheme {\n\treadonly dark: boolean;\n\treadonly highContrast: boolean;\n}\n\nexport interface IWindowConfiguration {\n\tremoteAuthority?: string;\n\n\tfilesToOpenOrCreate?: IPath[];\n\tfilesToDiff?: IPath[];\n\tfilesToMerge?: IPath[];\n}\n\nexport interface IOSConfiguration {\n\treadonly release: string;\n\treadonly hostname: string;\n\treadonly arch: string;\n}\n\nexport interface INativeWindowConfiguration extends IWindowConfiguration, NativeParsedArgs, ISandboxConfiguration {\n\tmainPid: number;\n\thandle?: VSBuffer;\n\n\tmachineId: string;\n\tsqmId: string;\n\tdevDeviceId: string;\n\n\texecPath: string;\n\tbackupPath?: string;\n\n\tprofiles: {\n\t\thome: UriComponents;\n\t\tall: readonly UriDto<IUserDataProfile>[];\n\t\tprofile: UriDto<IUserDataProfile>;\n\t};\n\n\thomeDir: string;\n\ttmpDir: string;\n\tuserDataDir: string;\n\n\tpartsSplash?: IPartsSplash;\n\n\tworkspace?: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier;\n\n\tisInitialStartup?: boolean;\n\tlogLevel: LogLevel;\n\tloggers: UriDto<ILoggerResource>[];\n\n\tfullscreen?: boolean;\n\tmaximized?: boolean;\n\taccessibilitySupport?: boolean;\n\tcolorScheme: IColorScheme;\n\tautoDetectHighContrast?: boolean;\n\tautoDetectColorScheme?: boolean;\n\tisCustomZoomLevel?: boolean;\n\n\tperfMarks: PerformanceMark[];\n\n\tfilesToWait?: IPathsToWaitFor;\n\n\tos: IOSConfiguration;\n\tpoliciesData?: IStringDictionary<{ definition: PolicyDefinition; value: PolicyValue }>;\n}\n\n/**\n * According to Electron docs: `scale := 1.2 ^ level`.\n * https://github.com/electron/electron/blob/master/docs/api/web-contents.md#contentssetzoomlevellevel\n */\nexport function zoomLevelToZoomFactor(zoomLevel = 0): number {\n\treturn 1.2 ** zoomLevel;\n}\n\nexport const DEFAULT_EMPTY_WINDOW_SIZE = { width: 1200, height: 800 } as const;\nexport const DEFAULT_WORKSPACE_WINDOW_SIZE = { width: 1440, height: 900 } as const;\nexport const DEFAULT_AUX_WINDOW_SIZE = { width: 1024, height: 768 } as const;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { IStringDictionary } from '../../../base/common/collections.js';\nimport { PerformanceMark } from '../../../base/common/performance.js';\nimport { isMacintosh, isNative, isWeb } from '../../../base/common/platform.js';\nimport { URI, UriComponents, UriDto } from '../../../base/common/uri.js';\nimport { ISandboxConfiguration } from '../../../base/parts/sandbox/common/sandboxTypes.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IEditorOptions } from '../../editor/common/editor.js';\nimport { NativeParsedArgs } from '../../environment/common/argv.js';\nimport { FileType } from '../../files/common/files.js';\nimport { ILoggerResource, LogLevel } from '../../log/common/log.js';\nimport { PolicyDefinition, PolicyValue } from '../../policy/common/policy.js';\nimport { IPartsSplash } from '../../theme/common/themeService.js';\nimport { IUserDataProfile } from '../../userDataProfile/common/userDataProfile.js';\nimport { IAnyWorkspaceIdentifier, ISingleFolderWorkspaceIdentifier, IWorkspaceIdentifier } from '../../workspace/common/workspace.js';\n\nexport const WindowMinimumSize = {\n\tWIDTH: 400,\n\tWIDTH_WITH_VERTICAL_PANEL: 600,\n\tHEIGHT: 270\n};\n\nexport interface IPoint {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface IRectangle extends IPoint {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface IBaseOpenWindowsOptions {\n\n\t/**\n\t * Whether to reuse the window or open a new one.\n\t */\n\treadonly forceReuseWindow?: boolean;\n\n\t/**\n\t * The remote authority to use when windows are opened with either\n\t * - no workspace (empty window)\n\t * - a workspace that is neither `file://` nor `vscode-remote://`\n\t * Use 'null' for a local window.\n\t * If not set, defaults to the remote authority of the current window.\n\t */\n\treadonly remoteAuthority?: string | null;\n\n\treadonly forceProfile?: string;\n\treadonly forceTempProfile?: boolean;\n}\n\nexport interface IOpenWindowOptions extends IBaseOpenWindowsOptions {\n\treadonly forceNewWindow?: boolean;\n\treadonly preferNewWindow?: boolean;\n\n\treadonly noRecentEntry?: boolean;\n\n\treadonly addMode?: boolean;\n\treadonly removeMode?: boolean;\n\n\treadonly diffMode?: boolean;\n\treadonly mergeMode?: boolean;\n\treadonly gotoLineMode?: boolean;\n\n\treadonly waitMarkerFileURI?: URI;\n}\n\nexport interface IAddRemoveFoldersRequest {\n\treadonly foldersToAdd: UriComponents[];\n\treadonly foldersToRemove: UriComponents[];\n}\n\ninterface IOpenedWindow {\n\treadonly id: number;\n\treadonly title: string;\n\treadonly filename?: string;\n}\n\nexport interface IOpenedMainWindow extends IOpenedWindow {\n\treadonly workspace?: IAnyWorkspaceIdentifier;\n\treadonly dirty: boolean;\n}\n\nexport interface IOpenedAuxiliaryWindow extends IOpenedWindow {\n\treadonly parentId: number;\n}\n\nexport function isOpenedAuxiliaryWindow(candidate: IOpenedMainWindow | IOpenedAuxiliaryWindow): candidate is IOpenedAuxiliaryWindow {\n\treturn typeof (candidate as IOpenedAuxiliaryWindow).parentId === 'number';\n}\n\nexport interface IOpenEmptyWindowOptions extends IBaseOpenWindowsOptions { }\n\nexport type IWindowOpenable = IWorkspaceToOpen | IFolderToOpen | IFileToOpen;\n\nexport interface IBaseWindowOpenable {\n\tlabel?: string;\n}\n\nexport interface IWorkspaceToOpen extends IBaseWindowOpenable {\n\treadonly workspaceUri: URI;\n}\n\nexport interface IFolderToOpen extends IBaseWindowOpenable {\n\treadonly folderUri: URI;\n}\n\nexport interface IFileToOpen extends IBaseWindowOpenable {\n\treadonly fileUri: URI;\n}\n\nexport function isWorkspaceToOpen(uriToOpen: IWindowOpenable): uriToOpen is IWorkspaceToOpen {\n\treturn !!(uriToOpen as IWorkspaceToOpen).workspaceUri;\n}\n\nexport function isFolderToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFolderToOpen {\n\treturn !!(uriToOpen as IFolderToOpen).folderUri;\n}\n\nexport function isFileToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFileToOpen {\n\treturn !!(uriToOpen as IFileToOpen).fileUri;\n}\n\nexport const enum MenuSettings {\n\tMenuStyle = 'window.menuStyle',\n\tMenuBarVisibility = 'window.menuBarVisibility'\n}\n\nexport const enum MenuStyleConfiguration {\n\tCUSTOM = 'custom',\n\tNATIVE = 'native',\n\tINHERIT = 'inherit',\n}\n\nexport function hasNativeContextMenu(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\tif (isWeb) {\n\t\treturn false;\n\t}\n\n\tconst nativeTitle = hasNativeTitlebar(configurationService, titleBarStyle);\n\tconst windowConfigurations = configurationService.getValue<IWindowSettings | undefined>('window');\n\n\tif (windowConfigurations?.menuStyle === MenuStyleConfiguration.NATIVE) {\n\t\t// Do not support native menu with custom title bar\n\t\tif (!isMacintosh && !nativeTitle) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tif (windowConfigurations?.menuStyle === MenuStyleConfiguration.CUSTOM) {\n\t\treturn false;\n\t}\n\n\treturn nativeTitle; // Default to inherit from title bar style\n}\n\nexport function hasNativeMenu(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\tif (isWeb) {\n\t\treturn false;\n\t}\n\n\tif (isMacintosh) {\n\t\treturn true;\n\t}\n\n\treturn hasNativeContextMenu(configurationService, titleBarStyle);\n}\n\nexport type MenuBarVisibility = 'classic' | 'visible' | 'toggle' | 'hidden' | 'compact';\n\nexport function getMenuBarVisibility(configurationService: IConfigurationService): MenuBarVisibility {\n\tconst menuBarVisibility = configurationService.getValue<MenuBarVisibility | 'default'>(MenuSettings.MenuBarVisibility);\n\n\tif (menuBarVisibility === 'default' || (menuBarVisibility === 'compact' && hasNativeMenu(configurationService)) || (isMacintosh && isNative)) {\n\t\treturn 'classic';\n\t} else {\n\t\treturn menuBarVisibility;\n\t}\n}\n\nexport interface IWindowsConfiguration {\n\treadonly window: IWindowSettings;\n}\n\nexport interface IWindowSettings {\n\treadonly openFilesInNewWindow: 'on' | 'off' | 'default';\n\treadonly openFoldersInNewWindow: 'on' | 'off' | 'default';\n\treadonly openWithoutArgumentsInNewWindow: 'on' | 'off';\n\treadonly restoreWindows: 'preserve' | 'all' | 'folders' | 'one' | 'none';\n\treadonly restoreFullscreen: boolean;\n\treadonly zoomLevel: number;\n\treadonly titleBarStyle: TitlebarStyle;\n\treadonly controlsStyle: WindowControlsStyle;\n\treadonly menuStyle: MenuStyleConfiguration;\n\treadonly autoDetectHighContrast: boolean;\n\treadonly autoDetectColorScheme: boolean;\n\treadonly menuBarVisibility: MenuBarVisibility;\n\treadonly newWindowDimensions: 'default' | 'inherit' | 'offset' | 'maximized' | 'fullscreen';\n\treadonly nativeTabs: boolean;\n\treadonly nativeFullScreen: boolean;\n\treadonly enableMenuBarMnemonics: boolean;\n\treadonly closeWhenEmpty: boolean;\n\treadonly clickThroughInactive: boolean;\n\treadonly newWindowProfile: string;\n\treadonly density: IDensitySettings;\n\treadonly border: 'off' | 'default' | 'system' | string /* color in RGB or other formats */;\n}\n\nexport interface IDensitySettings {\n\treadonly editorTabHeight: 'default' | 'compact';\n}\n\nexport const enum TitleBarSetting {\n\tTITLE_BAR_STYLE = 'window.titleBarStyle',\n\tCUSTOM_TITLE_BAR_VISIBILITY = 'window.customTitleBarVisibility',\n}\n\nexport const enum TitlebarStyle {\n\tNATIVE = 'native',\n\tCUSTOM = 'custom',\n}\n\nexport const enum WindowControlsStyle {\n\tNATIVE = 'native',\n\tCUSTOM = 'custom',\n\tHIDDEN = 'hidden'\n}\n\nexport const enum CustomTitleBarVisibility {\n\tAUTO = 'auto',\n\tWINDOWED = 'windowed',\n\tNEVER = 'never',\n}\n\nexport function hasCustomTitlebar(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\t// Returns if it possible to have a custom title bar in the curren session\n\t// Does not imply that the title bar is visible\n\treturn true;\n}\n\nexport function hasNativeTitlebar(configurationService: IConfigurationService, titleBarStyle?: TitlebarStyle): boolean {\n\tif (!titleBarStyle) {\n\t\ttitleBarStyle = getTitleBarStyle(configurationService);\n\t}\n\n\treturn titleBarStyle === TitlebarStyle.NATIVE;\n}\n\nexport function getTitleBarStyle(configurationService: IConfigurationService): TitlebarStyle {\n\tif (isWeb) {\n\t\treturn TitlebarStyle.CUSTOM;\n\t}\n\n\tconst configuration = configurationService.getValue<IWindowSettings | undefined>('window');\n\tif (configuration) {\n\t\tconst useNativeTabs = isMacintosh && configuration.nativeTabs === true;\n\t\tif (useNativeTabs) {\n\t\t\treturn TitlebarStyle.NATIVE; // native tabs on sierra do not work with custom title style\n\t\t}\n\n\t\tconst useSimpleFullScreen = isMacintosh && configuration.nativeFullScreen === false;\n\t\tif (useSimpleFullScreen) {\n\t\t\treturn TitlebarStyle.NATIVE; // simple fullscreen does not work well with custom title style (https://github.com/microsoft/vscode/issues/63291)\n\t\t}\n\n\t\tconst style = configuration.titleBarStyle;\n\t\tif (style === TitlebarStyle.NATIVE || style === TitlebarStyle.CUSTOM) {\n\t\t\treturn style;\n\t\t}\n\t}\n\n\treturn TitlebarStyle.CUSTOM; // default to custom on all OS\n}\n\nexport function getWindowControlsStyle(configurationService: IConfigurationService): WindowControlsStyle {\n\tif (isWeb || isMacintosh || getTitleBarStyle(configurationService) === TitlebarStyle.NATIVE) {\n\t\treturn WindowControlsStyle.NATIVE; // only supported on Windows/Linux desktop with custom titlebar\n\t}\n\n\tconst configuration = configurationService.getValue<IWindowSettings | undefined>('window');\n\tconst style = configuration?.controlsStyle;\n\tif (style === WindowControlsStyle.CUSTOM || style === WindowControlsStyle.HIDDEN) {\n\t\treturn style;\n\t}\n\n\treturn WindowControlsStyle.NATIVE; // default to native on all OS\n}\n\nexport const DEFAULT_CUSTOM_TITLEBAR_HEIGHT = 35; // includes space for command center\n\nexport function useWindowControlsOverlay(configurationService: IConfigurationService): boolean {\n\tif (isWeb) {\n\t\treturn false; // only supported on desktop instances\n\t}\n\n\tif (hasNativeTitlebar(configurationService)) {\n\t\treturn false; // only supported when title bar is custom\n\t}\n\n\tif (!isMacintosh) {\n\t\tconst setting = getWindowControlsStyle(configurationService);\n\t\tif (setting === WindowControlsStyle.CUSTOM || setting === WindowControlsStyle.HIDDEN) {\n\t\t\treturn false; // explicitly disabled by choice\n\t\t}\n\t}\n\n\treturn true; // default\n}\n\nexport function useNativeFullScreen(configurationService: IConfigurationService): boolean {\n\tconst windowConfig = configurationService.getValue<IWindowSettings | undefined>('window');\n\tif (!windowConfig || typeof windowConfig.nativeFullScreen !== 'boolean') {\n\t\treturn true; // default\n\t}\n\n\tif (windowConfig.nativeTabs) {\n\t\treturn true; // https://github.com/electron/electron/issues/16142\n\t}\n\n\treturn windowConfig.nativeFullScreen !== false;\n}\n\n\nexport interface IPath<T = IEditorOptions> extends IPathData<T> {\n\n\t/**\n\t * The file path to open within the instance\n\t */\n\tfileUri?: URI;\n}\n\nexport interface IPathData<T = IEditorOptions> {\n\n\t/**\n\t * The file path to open within the instance\n\t */\n\treadonly fileUri?: UriComponents;\n\n\t/**\n\t * Optional editor options to apply in the file\n\t */\n\treadonly options?: T;\n\n\t/**\n\t * A hint that the file exists. if true, the\n\t * file exists, if false it does not. with\n\t * `undefined` the state is unknown.\n\t */\n\treadonly exists?: boolean;\n\n\t/**\n\t * A hint about the file type of this path.\n\t * with `undefined` the type is unknown.\n\t */\n\treadonly type?: FileType;\n\n\t/**\n\t * Specifies if the file should be only be opened\n\t * if it exists.\n\t */\n\treadonly openOnlyIfExists?: boolean;\n}\n\nexport interface IPathsToWaitFor extends IPathsToWaitForData {\n\tpaths: IPath[];\n\twaitMarkerFileUri: URI;\n}\n\ninterface IPathsToWaitForData {\n\treadonly paths: IPathData[];\n\treadonly waitMarkerFileUri: UriComponents;\n}\n\nexport interface IOpenFileRequest {\n\treadonly filesToOpenOrCreate?: IPathData[];\n\treadonly filesToDiff?: IPathData[];\n\treadonly filesToMerge?: IPathData[];\n}\n\n/**\n * Additional context for the request on native only.\n */\nexport interface INativeOpenFileRequest extends IOpenFileRequest {\n\treadonly termProgram?: string;\n\treadonly filesToWait?: IPathsToWaitForData;\n}\n\nexport interface INativeRunActionInWindowRequest {\n\treadonly id: string;\n\treadonly from: 'menu' | 'touchbar' | 'mouse';\n\treadonly args?: unknown[];\n}\n\nexport interface INativeRunKeybindingInWindowRequest {\n\treadonly userSettingsLabel: string;\n}\n\nexport interface IColorScheme {\n\treadonly dark: boolean;\n\treadonly highContrast: boolean;\n}\n\nexport interface IWindowConfiguration {\n\tremoteAuthority?: string;\n\n\tfilesToOpenOrCreate?: IPath[];\n\tfilesToDiff?: IPath[];\n\tfilesToMerge?: IPath[];\n}\n\nexport interface IOSConfiguration {\n\treadonly release: string;\n\treadonly hostname: string;\n\treadonly arch: string;\n}\n\nexport interface INativeWindowConfiguration extends IWindowConfiguration, NativeParsedArgs, ISandboxConfiguration {\n\tmainPid: number;\n\thandle?: VSBuffer;\n\n\tmachineId: string;\n\tsqmId: string;\n\tdevDeviceId: string;\n\n\texecPath: string;\n\tbackupPath?: string;\n\n\tprofiles: {\n\t\thome: UriComponents;\n\t\tall: readonly UriDto<IUserDataProfile>[];\n\t\tprofile: UriDto<IUserDataProfile>;\n\t};\n\n\thomeDir: string;\n\ttmpDir: string;\n\tuserDataDir: string;\n\n\tpartsSplash?: IPartsSplash;\n\n\tworkspace?: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier;\n\n\tisInitialStartup?: boolean;\n\tlogLevel: LogLevel;\n\tloggers: UriDto<ILoggerResource>[];\n\n\tfullscreen?: boolean;\n\tmaximized?: boolean;\n\taccessibilitySupport?: boolean;\n\tcolorScheme: IColorScheme;\n\tautoDetectHighContrast?: boolean;\n\tautoDetectColorScheme?: boolean;\n\tisCustomZoomLevel?: boolean;\n\n\tperfMarks: PerformanceMark[];\n\n\tfilesToWait?: IPathsToWaitFor;\n\n\tos: IOSConfiguration;\n\tpoliciesData?: IStringDictionary<{ definition: PolicyDefinition; value: PolicyValue }>;\n}\n\n/**\n * According to Electron docs: `scale := 1.2 ^ level`.\n * https://github.com/electron/electron/blob/master/docs/api/web-contents.md#contentssetzoomlevellevel\n */\nexport function zoomLevelToZoomFactor(zoomLevel = 0): number {\n\treturn 1.2 ** zoomLevel;\n}\n\nexport const DEFAULT_EMPTY_WINDOW_SIZE = { width: 1200, height: 800 } as const;\nexport const DEFAULT_WORKSPACE_WINDOW_SIZE = { width: 1440, height: 900 } as const;\nexport const DEFAULT_AUX_WINDOW_SIZE = { width: 1024, height: 768 } as const;\n"]}