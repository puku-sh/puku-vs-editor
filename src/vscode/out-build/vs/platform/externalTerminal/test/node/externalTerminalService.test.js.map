{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/externalTerminal/test/node/externalTerminalService.test.ts","vs/platform/externalTerminal/test/node/externalTerminalService.test.ts"],"names":[],"mappings":"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","file":"externalTerminalService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual, strictEqual } from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { DEFAULT_TERMINAL_OSX, IExternalTerminalConfiguration } from '../../common/externalTerminal.js';\nimport { LinuxExternalTerminalService, MacExternalTerminalService, WindowsExternalTerminalService } from '../../node/externalTerminalService.js';\n\nconst mockConfig = Object.freeze<IExternalTerminalConfiguration>({\n\tterminal: {\n\t\texplorerKind: 'external',\n\t\texternal: {\n\t\t\twindowsExec: 'testWindowsShell',\n\t\t\tosxExec: 'testOSXShell',\n\t\t\tlinuxExec: 'testLinuxShell'\n\t\t}\n\t}\n});\n\nsuite('ExternalTerminalService', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest(`WinTerminalService - uses terminal from configuration`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(command, testShell, 'shell should equal expected');\n\t\t\t\tstrictEqual(args[args.length - 1], mockConfig.terminal.external.windowsExec);\n\t\t\t\tstrictEqual(opts.cwd, testCwd);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - uses default terminal when configuration.terminal.external.windowsExec is undefined`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(args[args.length - 1], WindowsExternalTerminalService.getDefaultTerminalWindows());\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tmockConfig.terminal.external.windowsExec = undefined;\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - cwd is correct regardless of case`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'c:/foo';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(opts.cwd, 'C:/foo', 'cwd should be uppercase regardless of the case that\\'s passed in');\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - cmder should be spawned differently`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'c:/foo';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tdeepStrictEqual(args, ['C:/foo']);\n\t\t\t\tstrictEqual(opts, undefined);\n\t\t\t\tdone();\n\t\t\t\treturn { on: (evt: any) => evt };\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\t{ windowsExec: 'cmder' },\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - windows terminal should open workspace directory`, done => {\n\t\tconst testShell = 'wt';\n\t\tconst testCwd = 'c:/foo';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(opts.cwd, 'C:/foo');\n\t\t\t\tdone();\n\t\t\t\treturn { on: (evt: any) => evt };\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`MacTerminalService - uses terminal from configuration`, done => {\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(args[1], mockConfig.terminal.external.osxExec);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new MacExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`MacTerminalService - uses default terminal when configuration.terminal.external.osxExec is undefined`, done => {\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(args[1], DEFAULT_TERMINAL_OSX);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new MacExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\t{ osxExec: undefined },\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`LinuxTerminalService - uses terminal from configuration`, done => {\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(command, mockConfig.terminal.external.linuxExec);\n\t\t\t\tstrictEqual(opts.cwd, testCwd);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new LinuxExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`LinuxTerminalService - uses default terminal when configuration.terminal.external.linuxExec is undefined`, done => {\n\t\tLinuxExternalTerminalService.getDefaultTerminalLinuxReady().then(defaultTerminalLinux => {\n\t\t\tconst testCwd = 'path/to/workspace';\n\t\t\tconst mockSpawner: any = {\n\t\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\t\tstrictEqual(command, defaultTerminalLinux);\n\t\t\t\t\tdone();\n\t\t\t\t\treturn {\n\t\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t\tmockConfig.terminal.external.linuxExec = undefined;\n\t\t\tconst testService = new LinuxExternalTerminalService();\n\t\t\ttestService.spawnTerminal(\n\t\t\t\tmockSpawner,\n\t\t\t\tmockConfig.terminal.external,\n\t\t\t\ttestCwd\n\t\t\t);\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual, strictEqual } from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { DEFAULT_TERMINAL_OSX, IExternalTerminalConfiguration } from '../../common/externalTerminal.js';\nimport { LinuxExternalTerminalService, MacExternalTerminalService, WindowsExternalTerminalService } from '../../node/externalTerminalService.js';\n\nconst mockConfig = Object.freeze<IExternalTerminalConfiguration>({\n\tterminal: {\n\t\texplorerKind: 'external',\n\t\texternal: {\n\t\t\twindowsExec: 'testWindowsShell',\n\t\t\tosxExec: 'testOSXShell',\n\t\t\tlinuxExec: 'testLinuxShell'\n\t\t}\n\t}\n});\n\nsuite('ExternalTerminalService', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest(`WinTerminalService - uses terminal from configuration`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(command, testShell, 'shell should equal expected');\n\t\t\t\tstrictEqual(args[args.length - 1], mockConfig.terminal.external.windowsExec);\n\t\t\t\tstrictEqual(opts.cwd, testCwd);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - uses default terminal when configuration.terminal.external.windowsExec is undefined`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(args[args.length - 1], WindowsExternalTerminalService.getDefaultTerminalWindows());\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tmockConfig.terminal.external.windowsExec = undefined;\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - cwd is correct regardless of case`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'c:/foo';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(opts.cwd, 'C:/foo', 'cwd should be uppercase regardless of the case that\\'s passed in');\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - cmder should be spawned differently`, done => {\n\t\tconst testShell = 'cmd';\n\t\tconst testCwd = 'c:/foo';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tdeepStrictEqual(args, ['C:/foo']);\n\t\t\t\tstrictEqual(opts, undefined);\n\t\t\t\tdone();\n\t\t\t\treturn { on: (evt: any) => evt };\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\t{ windowsExec: 'cmder' },\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`WinTerminalService - windows terminal should open workspace directory`, done => {\n\t\tconst testShell = 'wt';\n\t\tconst testCwd = 'c:/foo';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(opts.cwd, 'C:/foo');\n\t\t\t\tdone();\n\t\t\t\treturn { on: (evt: any) => evt };\n\t\t\t}\n\t\t};\n\t\tconst testService = new WindowsExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestShell,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`MacTerminalService - uses terminal from configuration`, done => {\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(args[1], mockConfig.terminal.external.osxExec);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new MacExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`MacTerminalService - uses default terminal when configuration.terminal.external.osxExec is undefined`, done => {\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(args[1], DEFAULT_TERMINAL_OSX);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new MacExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\t{ osxExec: undefined },\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`LinuxTerminalService - uses terminal from configuration`, done => {\n\t\tconst testCwd = 'path/to/workspace';\n\t\tconst mockSpawner: any = {\n\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\tstrictEqual(command, mockConfig.terminal.external.linuxExec);\n\t\t\t\tstrictEqual(opts.cwd, testCwd);\n\t\t\t\tdone();\n\t\t\t\treturn {\n\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst testService = new LinuxExternalTerminalService();\n\t\ttestService.spawnTerminal(\n\t\t\tmockSpawner,\n\t\t\tmockConfig.terminal.external,\n\t\t\ttestCwd\n\t\t);\n\t});\n\n\ttest(`LinuxTerminalService - uses default terminal when configuration.terminal.external.linuxExec is undefined`, done => {\n\t\tLinuxExternalTerminalService.getDefaultTerminalLinuxReady().then(defaultTerminalLinux => {\n\t\t\tconst testCwd = 'path/to/workspace';\n\t\t\tconst mockSpawner: any = {\n\t\t\t\tspawn: (command: any, args: any, opts: any) => {\n\t\t\t\t\tstrictEqual(command, defaultTerminalLinux);\n\t\t\t\t\tdone();\n\t\t\t\t\treturn {\n\t\t\t\t\t\ton: (evt: any) => evt\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t\tmockConfig.terminal.external.linuxExec = undefined;\n\t\t\tconst testService = new LinuxExternalTerminalService();\n\t\t\ttestService.spawnTerminal(\n\t\t\t\tmockSpawner,\n\t\t\t\tmockConfig.terminal.external,\n\t\t\t\ttestCwd\n\t\t\t);\n\t\t});\n\t});\n});\n"]}