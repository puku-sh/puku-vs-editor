{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/environment/test/node/nativeModules.integrationTest.ts","vs/platform/environment/test/node/nativeModules.integrationTest.ts"],"names":[],"mappings":"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","file":"nativeModules.integrationTest.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { isMacintosh, isWindows } from '../../../../base/common/platform.js';\nimport { flakySuite } from '../../../../base/test/common/testUtils.js';\n\nfunction testErrorMessage(module: string): string {\n\treturn `Unable to load \"${module}\" dependency. It was probably not compiled for the right operating system architecture or had missing build tools.`;\n}\n\nflakySuite('Native Modules (all platforms)', () => {\n\n\t(isMacintosh ? test.skip : test)('kerberos', async () => { // Somehow fails on macOS ARM?\n\t\tconst { default: kerberos } = await import('kerberos');\n\t\tassert.ok(typeof kerberos.initializeClient === 'function', testErrorMessage('kerberos'));\n\t});\n\n\ttest('yauzl', async () => {\n\t\tconst { default: yauzl } = await import('yauzl');\n\t\tassert.ok(typeof yauzl.ZipFile === 'function', testErrorMessage('yauzl'));\n\t});\n\n\ttest('yazl', async () => {\n\t\tconst { default: yazl } = await import('yazl');\n\t\tassert.ok(typeof yazl.ZipFile === 'function', testErrorMessage('yazl'));\n\t});\n\n\ttest('v8-inspect-profiler', async () => {\n\t\tconst { default: profiler } = await import('v8-inspect-profiler');\n\t\tassert.ok(typeof profiler.startProfiling === 'function', testErrorMessage('v8-inspect-profiler'));\n\t});\n\n\ttest('native-is-elevated', async () => {\n\t\tconst { default: isElevated } = await import('native-is-elevated');\n\t\tassert.ok(typeof isElevated === 'function', testErrorMessage('native-is-elevated '));\n\n\t\tconst result = isElevated();\n\t\tassert.ok(typeof result === 'boolean', testErrorMessage('native-is-elevated'));\n\t});\n\n\ttest('native-keymap', async () => {\n\t\tconst keyMap = await import('native-keymap');\n\t\tassert.ok(typeof keyMap.onDidChangeKeyboardLayout === 'function', testErrorMessage('native-keymap'));\n\t\tassert.ok(typeof keyMap.getCurrentKeyboardLayout === 'function', testErrorMessage('native-keymap'));\n\n\t\tconst result = keyMap.getCurrentKeyboardLayout();\n\t\tassert.ok(result, testErrorMessage('native-keymap'));\n\t});\n\n\ttest('native-watchdog', async () => {\n\t\tconst watchDog = await import('native-watchdog');\n\t\tassert.ok(typeof watchDog.start === 'function', testErrorMessage('native-watchdog'));\n\t});\n\n\ttest('@vscode/sudo-prompt', async () => {\n\t\tconst prompt = await import('@vscode/sudo-prompt');\n\t\tassert.ok(typeof prompt.exec === 'function', testErrorMessage('@vscode/sudo-prompt'));\n\t});\n\n\ttest('@vscode/policy-watcher', async () => {\n\t\tconst watcher = await import('@vscode/policy-watcher');\n\t\tassert.ok(typeof watcher.createWatcher === 'function', testErrorMessage('@vscode/policy-watcher'));\n\t});\n\n\ttest('node-pty', async () => {\n\t\tconst nodePty = await import('node-pty');\n\t\tassert.ok(typeof nodePty.spawn === 'function', testErrorMessage('node-pty'));\n\t});\n\n\ttest('@vscode/spdlog', async () => {\n\t\tconst spdlog = await import('@vscode/spdlog');\n\t\tassert.ok(typeof spdlog.createRotatingLogger === 'function', testErrorMessage('@vscode/spdlog'));\n\t\tassert.ok(typeof spdlog.version === 'number', testErrorMessage('@vscode/spdlog'));\n\t});\n\n\ttest('@parcel/watcher', async () => {\n\t\tconst parcelWatcher = await import('@parcel/watcher');\n\t\tassert.ok(typeof parcelWatcher.subscribe === 'function', testErrorMessage('@parcel/watcher'));\n\t});\n\n\ttest('@vscode/deviceid', async () => {\n\t\tconst deviceIdPackage = await import('@vscode/deviceid');\n\t\tassert.ok(typeof deviceIdPackage.getDeviceId === 'function', testErrorMessage('@vscode/deviceid'));\n\t});\n\n\ttest('@vscode/ripgrep', async () => {\n\t\tconst ripgrep = await import('@vscode/ripgrep');\n\t\tassert.ok(typeof ripgrep.rgPath === 'string', testErrorMessage('@vscode/ripgrep'));\n\t});\n\n\ttest('vscode-regexpp', async () => {\n\t\tconst regexpp = await import('vscode-regexpp');\n\t\tassert.ok(typeof regexpp.RegExpParser === 'function', testErrorMessage('vscode-regexpp'));\n\t});\n\n\ttest('@vscode/sqlite3', async () => {\n\t\tconst { default: sqlite3 } = await import('@vscode/sqlite3');\n\t\tassert.ok(typeof sqlite3.Database === 'function', testErrorMessage('@vscode/sqlite3'));\n\t});\n\n\ttest('http-proxy-agent', async () => {\n\t\tconst { default: mod } = await import('http-proxy-agent');\n\t\tassert.ok(typeof mod.HttpProxyAgent === 'function', testErrorMessage('http-proxy-agent'));\n\t});\n\n\ttest('https-proxy-agent', async () => {\n\t\tconst { default: mod } = await import('https-proxy-agent');\n\t\tassert.ok(typeof mod.HttpsProxyAgent === 'function', testErrorMessage('https-proxy-agent'));\n\t});\n\n\ttest('@vscode/proxy-agent', async () => {\n\t\tconst proxyAgent = await import('@vscode/proxy-agent');\n\t\t// This call will load `@vscode/proxy-agent` which is a native module that we want to test on Windows\n\t\tconst windowsCerts = await proxyAgent.loadSystemCertificates({\n\t\t\tloadSystemCertificatesFromNode: () => undefined,\n\t\t\tlog: {\n\t\t\t\ttrace: () => { },\n\t\t\t\tdebug: () => { },\n\t\t\t\tinfo: () => { },\n\t\t\t\twarn: () => { },\n\t\t\t\terror: () => { }\n\t\t\t}\n\t\t});\n\t\tassert.ok(windowsCerts.length > 0, testErrorMessage('@vscode/proxy-agent'));\n\t});\n});\n\n(!isWindows ? suite.skip : suite)('Native Modules (Windows)', () => {\n\n\ttest('@vscode/windows-mutex', async () => {\n\t\tconst mutex = await import('@vscode/windows-mutex');\n\t\tassert.ok(mutex && typeof mutex.isActive === 'function', testErrorMessage('@vscode/windows-mutex'));\n\t\tassert.ok(typeof mutex.isActive === 'function', testErrorMessage('@vscode/windows-mutex'));\n\t\tassert.ok(typeof mutex.Mutex === 'function', testErrorMessage('@vscode/windows-mutex'));\n\t});\n\n\ttest('windows-foreground-love', async () => {\n\t\tconst foregroundLove = await import('windows-foreground-love');\n\t\tassert.ok(typeof foregroundLove.allowSetForegroundWindow === 'function', testErrorMessage('windows-foreground-love'));\n\n\t\tconst result = foregroundLove.allowSetForegroundWindow(process.pid);\n\t\tassert.ok(typeof result === 'boolean', testErrorMessage('windows-foreground-love'));\n\t});\n\n\ttest('@vscode/windows-process-tree', async () => {\n\t\tconst processTree = await import('@vscode/windows-process-tree');\n\t\tassert.ok(typeof processTree.getProcessTree === 'function', testErrorMessage('@vscode/windows-process-tree'));\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tprocessTree.getProcessTree(process.pid, tree => {\n\t\t\t\tif (tree) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(testErrorMessage('@vscode/windows-process-tree')));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('@vscode/windows-registry', async () => {\n\t\tconst windowsRegistry = await import('@vscode/windows-registry');\n\t\tassert.ok(typeof windowsRegistry.GetStringRegKey === 'function', testErrorMessage('@vscode/windows-registry'));\n\n\t\tconst result = windowsRegistry.GetStringRegKey('HKEY_LOCAL_MACHINE', 'SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion', 'EditionID');\n\t\tassert.ok(typeof result === 'string' || typeof result === 'undefined', testErrorMessage('@vscode/windows-registry'));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { isMacintosh, isWindows } from '../../../../base/common/platform.js';\nimport { flakySuite } from '../../../../base/test/common/testUtils.js';\n\nfunction testErrorMessage(module: string): string {\n\treturn `Unable to load \"${module}\" dependency. It was probably not compiled for the right operating system architecture or had missing build tools.`;\n}\n\nflakySuite('Native Modules (all platforms)', () => {\n\n\t(isMacintosh ? test.skip : test)('kerberos', async () => { // Somehow fails on macOS ARM?\n\t\tconst { default: kerberos } = await import('kerberos');\n\t\tassert.ok(typeof kerberos.initializeClient === 'function', testErrorMessage('kerberos'));\n\t});\n\n\ttest('yauzl', async () => {\n\t\tconst { default: yauzl } = await import('yauzl');\n\t\tassert.ok(typeof yauzl.ZipFile === 'function', testErrorMessage('yauzl'));\n\t});\n\n\ttest('yazl', async () => {\n\t\tconst { default: yazl } = await import('yazl');\n\t\tassert.ok(typeof yazl.ZipFile === 'function', testErrorMessage('yazl'));\n\t});\n\n\ttest('v8-inspect-profiler', async () => {\n\t\tconst { default: profiler } = await import('v8-inspect-profiler');\n\t\tassert.ok(typeof profiler.startProfiling === 'function', testErrorMessage('v8-inspect-profiler'));\n\t});\n\n\ttest('native-is-elevated', async () => {\n\t\tconst { default: isElevated } = await import('native-is-elevated');\n\t\tassert.ok(typeof isElevated === 'function', testErrorMessage('native-is-elevated '));\n\n\t\tconst result = isElevated();\n\t\tassert.ok(typeof result === 'boolean', testErrorMessage('native-is-elevated'));\n\t});\n\n\ttest('native-keymap', async () => {\n\t\tconst keyMap = await import('native-keymap');\n\t\tassert.ok(typeof keyMap.onDidChangeKeyboardLayout === 'function', testErrorMessage('native-keymap'));\n\t\tassert.ok(typeof keyMap.getCurrentKeyboardLayout === 'function', testErrorMessage('native-keymap'));\n\n\t\tconst result = keyMap.getCurrentKeyboardLayout();\n\t\tassert.ok(result, testErrorMessage('native-keymap'));\n\t});\n\n\ttest('native-watchdog', async () => {\n\t\tconst watchDog = await import('native-watchdog');\n\t\tassert.ok(typeof watchDog.start === 'function', testErrorMessage('native-watchdog'));\n\t});\n\n\ttest('@vscode/sudo-prompt', async () => {\n\t\tconst prompt = await import('@vscode/sudo-prompt');\n\t\tassert.ok(typeof prompt.exec === 'function', testErrorMessage('@vscode/sudo-prompt'));\n\t});\n\n\ttest('@vscode/policy-watcher', async () => {\n\t\tconst watcher = await import('@vscode/policy-watcher');\n\t\tassert.ok(typeof watcher.createWatcher === 'function', testErrorMessage('@vscode/policy-watcher'));\n\t});\n\n\ttest('node-pty', async () => {\n\t\tconst nodePty = await import('node-pty');\n\t\tassert.ok(typeof nodePty.spawn === 'function', testErrorMessage('node-pty'));\n\t});\n\n\ttest('@vscode/spdlog', async () => {\n\t\tconst spdlog = await import('@vscode/spdlog');\n\t\tassert.ok(typeof spdlog.createRotatingLogger === 'function', testErrorMessage('@vscode/spdlog'));\n\t\tassert.ok(typeof spdlog.version === 'number', testErrorMessage('@vscode/spdlog'));\n\t});\n\n\ttest('@parcel/watcher', async () => {\n\t\tconst parcelWatcher = await import('@parcel/watcher');\n\t\tassert.ok(typeof parcelWatcher.subscribe === 'function', testErrorMessage('@parcel/watcher'));\n\t});\n\n\ttest('@vscode/deviceid', async () => {\n\t\tconst deviceIdPackage = await import('@vscode/deviceid');\n\t\tassert.ok(typeof deviceIdPackage.getDeviceId === 'function', testErrorMessage('@vscode/deviceid'));\n\t});\n\n\ttest('@vscode/ripgrep', async () => {\n\t\tconst ripgrep = await import('@vscode/ripgrep');\n\t\tassert.ok(typeof ripgrep.rgPath === 'string', testErrorMessage('@vscode/ripgrep'));\n\t});\n\n\ttest('vscode-regexpp', async () => {\n\t\tconst regexpp = await import('vscode-regexpp');\n\t\tassert.ok(typeof regexpp.RegExpParser === 'function', testErrorMessage('vscode-regexpp'));\n\t});\n\n\ttest('@vscode/sqlite3', async () => {\n\t\tconst { default: sqlite3 } = await import('@vscode/sqlite3');\n\t\tassert.ok(typeof sqlite3.Database === 'function', testErrorMessage('@vscode/sqlite3'));\n\t});\n\n\ttest('http-proxy-agent', async () => {\n\t\tconst { default: mod } = await import('http-proxy-agent');\n\t\tassert.ok(typeof mod.HttpProxyAgent === 'function', testErrorMessage('http-proxy-agent'));\n\t});\n\n\ttest('https-proxy-agent', async () => {\n\t\tconst { default: mod } = await import('https-proxy-agent');\n\t\tassert.ok(typeof mod.HttpsProxyAgent === 'function', testErrorMessage('https-proxy-agent'));\n\t});\n\n\ttest('@vscode/proxy-agent', async () => {\n\t\tconst proxyAgent = await import('@vscode/proxy-agent');\n\t\t// This call will load `@vscode/proxy-agent` which is a native module that we want to test on Windows\n\t\tconst windowsCerts = await proxyAgent.loadSystemCertificates({\n\t\t\tloadSystemCertificatesFromNode: () => undefined,\n\t\t\tlog: {\n\t\t\t\ttrace: () => { },\n\t\t\t\tdebug: () => { },\n\t\t\t\tinfo: () => { },\n\t\t\t\twarn: () => { },\n\t\t\t\terror: () => { }\n\t\t\t}\n\t\t});\n\t\tassert.ok(windowsCerts.length > 0, testErrorMessage('@vscode/proxy-agent'));\n\t});\n});\n\n(!isWindows ? suite.skip : suite)('Native Modules (Windows)', () => {\n\n\ttest('@vscode/windows-mutex', async () => {\n\t\tconst mutex = await import('@vscode/windows-mutex');\n\t\tassert.ok(mutex && typeof mutex.isActive === 'function', testErrorMessage('@vscode/windows-mutex'));\n\t\tassert.ok(typeof mutex.isActive === 'function', testErrorMessage('@vscode/windows-mutex'));\n\t\tassert.ok(typeof mutex.Mutex === 'function', testErrorMessage('@vscode/windows-mutex'));\n\t});\n\n\ttest('windows-foreground-love', async () => {\n\t\tconst foregroundLove = await import('windows-foreground-love');\n\t\tassert.ok(typeof foregroundLove.allowSetForegroundWindow === 'function', testErrorMessage('windows-foreground-love'));\n\n\t\tconst result = foregroundLove.allowSetForegroundWindow(process.pid);\n\t\tassert.ok(typeof result === 'boolean', testErrorMessage('windows-foreground-love'));\n\t});\n\n\ttest('@vscode/windows-process-tree', async () => {\n\t\tconst processTree = await import('@vscode/windows-process-tree');\n\t\tassert.ok(typeof processTree.getProcessTree === 'function', testErrorMessage('@vscode/windows-process-tree'));\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tprocessTree.getProcessTree(process.pid, tree => {\n\t\t\t\tif (tree) {\n\t\t\t\t\tresolve();\n\t\t\t\t} else {\n\t\t\t\t\treject(new Error(testErrorMessage('@vscode/windows-process-tree')));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('@vscode/windows-registry', async () => {\n\t\tconst windowsRegistry = await import('@vscode/windows-registry');\n\t\tassert.ok(typeof windowsRegistry.GetStringRegKey === 'function', testErrorMessage('@vscode/windows-registry'));\n\n\t\tconst result = windowsRegistry.GetStringRegKey('HKEY_LOCAL_MACHINE', 'SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion', 'EditionID');\n\t\tassert.ok(typeof result === 'string' || typeof result === 'undefined', testErrorMessage('@vscode/windows-registry'));\n\t});\n});\n"]}