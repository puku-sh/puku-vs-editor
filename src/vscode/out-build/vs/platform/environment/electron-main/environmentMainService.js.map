{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/environment/electron-main/environmentMainService.ts","vs/platform/environment/electron-main/environmentMainService.ts"],"names":[],"mappings":"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","file":"environmentMainService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { memoize } from '../../../base/common/decorators.js';\nimport { join } from '../../../base/common/path.js';\nimport { isLinux } from '../../../base/common/platform.js';\nimport { createStaticIPCHandle } from '../../../base/parts/ipc/node/ipc.net.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../common/environment.js';\nimport { NativeEnvironmentService } from '../node/environmentService.js';\nimport { refineServiceDecorator } from '../../instantiation/common/instantiation.js';\n\nexport const IEnvironmentMainService = refineServiceDecorator<IEnvironmentService, IEnvironmentMainService>(IEnvironmentService);\n\n/**\n * A subclass of the `INativeEnvironmentService` to be used only in electron-main\n * environments.\n */\nexport interface IEnvironmentMainService extends INativeEnvironmentService {\n\n\t// --- backup paths\n\treadonly backupHome: string;\n\n\t// --- V8 code caching\n\treadonly codeCachePath: string | undefined;\n\treadonly useCodeCache: boolean;\n\n\t// --- IPC\n\treadonly mainIPCHandle: string;\n\treadonly mainLockfile: string;\n\n\t// --- config\n\treadonly disableUpdates: boolean;\n\n\t// TODO@deepak1556 temporary until a real fix lands upstream\n\treadonly enableRDPDisplayTracking: boolean;\n\n\tunsetSnapExportedVariables(): void;\n\trestoreSnapExportedVariables(): void;\n}\n\nexport class EnvironmentMainService extends NativeEnvironmentService implements IEnvironmentMainService {\n\n\tprivate _snapEnv: Record<string, string> = {};\n\n\t@memoize\n\tget backupHome(): string { return join(this.userDataPath, 'Backups'); }\n\n\t@memoize\n\tget mainIPCHandle(): string { return createStaticIPCHandle(this.userDataPath, 'main', this.productService.version); }\n\n\t@memoize\n\tget mainLockfile(): string { return join(this.userDataPath, 'code.lock'); }\n\n\t@memoize\n\tget disableUpdates(): boolean { return !!this.args['disable-updates']; }\n\n\t@memoize\n\tget crossOriginIsolated(): boolean { return !!this.args['enable-coi']; }\n\n\t@memoize\n\tget enableRDPDisplayTracking(): boolean { return !!this.args['enable-rdp-display-tracking']; }\n\n\t@memoize\n\tget codeCachePath(): string | undefined { return process.env['VSCODE_CODE_CACHE_PATH'] || undefined; }\n\n\t@memoize\n\tget useCodeCache(): boolean { return !!this.codeCachePath; }\n\n\tunsetSnapExportedVariables() {\n\t\tif (!isLinux) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const key in process.env) {\n\t\t\tif (key.endsWith('_VSCODE_SNAP_ORIG')) {\n\t\t\t\tconst originalKey = key.slice(0, -17); // Remove the _VSCODE_SNAP_ORIG suffix\n\t\t\t\tif (this._snapEnv[originalKey]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// Preserve the original value in case the snap env is re-entered\n\t\t\t\tif (process.env[originalKey]) {\n\t\t\t\t\tthis._snapEnv[originalKey] = process.env[originalKey]!;\n\t\t\t\t}\n\t\t\t\t// Copy the original value from before entering the snap env if available,\n\t\t\t\t// if not delete the env variable.\n\t\t\t\tif (process.env[key]) {\n\t\t\t\t\tprocess.env[originalKey] = process.env[key];\n\t\t\t\t} else {\n\t\t\t\t\tdelete process.env[originalKey];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trestoreSnapExportedVariables() {\n\t\tif (!isLinux) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const key in this._snapEnv) {\n\t\t\tprocess.env[key] = this._snapEnv[key];\n\t\t\tdelete this._snapEnv[key];\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { memoize } from '../../../base/common/decorators.js';\nimport { join } from '../../../base/common/path.js';\nimport { isLinux } from '../../../base/common/platform.js';\nimport { createStaticIPCHandle } from '../../../base/parts/ipc/node/ipc.net.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../common/environment.js';\nimport { NativeEnvironmentService } from '../node/environmentService.js';\nimport { refineServiceDecorator } from '../../instantiation/common/instantiation.js';\n\nexport const IEnvironmentMainService = refineServiceDecorator<IEnvironmentService, IEnvironmentMainService>(IEnvironmentService);\n\n/**\n * A subclass of the `INativeEnvironmentService` to be used only in electron-main\n * environments.\n */\nexport interface IEnvironmentMainService extends INativeEnvironmentService {\n\n\t// --- backup paths\n\treadonly backupHome: string;\n\n\t// --- V8 code caching\n\treadonly codeCachePath: string | undefined;\n\treadonly useCodeCache: boolean;\n\n\t// --- IPC\n\treadonly mainIPCHandle: string;\n\treadonly mainLockfile: string;\n\n\t// --- config\n\treadonly disableUpdates: boolean;\n\n\t// TODO@deepak1556 temporary until a real fix lands upstream\n\treadonly enableRDPDisplayTracking: boolean;\n\n\tunsetSnapExportedVariables(): void;\n\trestoreSnapExportedVariables(): void;\n}\n\nexport class EnvironmentMainService extends NativeEnvironmentService implements IEnvironmentMainService {\n\n\tprivate _snapEnv: Record<string, string> = {};\n\n\t@memoize\n\tget backupHome(): string { return join(this.userDataPath, 'Backups'); }\n\n\t@memoize\n\tget mainIPCHandle(): string { return createStaticIPCHandle(this.userDataPath, 'main', this.productService.version); }\n\n\t@memoize\n\tget mainLockfile(): string { return join(this.userDataPath, 'code.lock'); }\n\n\t@memoize\n\tget disableUpdates(): boolean { return !!this.args['disable-updates']; }\n\n\t@memoize\n\tget crossOriginIsolated(): boolean { return !!this.args['enable-coi']; }\n\n\t@memoize\n\tget enableRDPDisplayTracking(): boolean { return !!this.args['enable-rdp-display-tracking']; }\n\n\t@memoize\n\tget codeCachePath(): string | undefined { return process.env['VSCODE_CODE_CACHE_PATH'] || undefined; }\n\n\t@memoize\n\tget useCodeCache(): boolean { return !!this.codeCachePath; }\n\n\tunsetSnapExportedVariables() {\n\t\tif (!isLinux) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const key in process.env) {\n\t\t\tif (key.endsWith('_VSCODE_SNAP_ORIG')) {\n\t\t\t\tconst originalKey = key.slice(0, -17); // Remove the _VSCODE_SNAP_ORIG suffix\n\t\t\t\tif (this._snapEnv[originalKey]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// Preserve the original value in case the snap env is re-entered\n\t\t\t\tif (process.env[originalKey]) {\n\t\t\t\t\tthis._snapEnv[originalKey] = process.env[originalKey]!;\n\t\t\t\t}\n\t\t\t\t// Copy the original value from before entering the snap env if available,\n\t\t\t\t// if not delete the env variable.\n\t\t\t\tif (process.env[key]) {\n\t\t\t\t\tprocess.env[originalKey] = process.env[key];\n\t\t\t\t} else {\n\t\t\t\t\tdelete process.env[originalKey];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trestoreSnapExportedVariables() {\n\t\tif (!isLinux) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const key in this._snapEnv) {\n\t\t\tprocess.env[key] = this._snapEnv[key];\n\t\t\tdelete this._snapEnv[key];\n\t\t}\n\t}\n}\n"]}