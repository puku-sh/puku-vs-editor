{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/environment/node/userDataPath.ts","vs/platform/environment/node/userDataPath.ts"],"names":[],"mappings":"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","file":"userDataPath.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { homedir } from 'os';\nimport { NativeParsedArgs } from '../common/argv.js';\n\n// This file used to be a pure JS file and was always\n// importing `path` from node.js even though we ship\n// our own version of the library and prefer to use\n// that.\n// However, resolution of user-data-path is critical\n// and while our version of `path` is a copy of node.js\n// one, you never know. As such, preserve the use of\n// the built-in `path` lib for the time being.\n// eslint-disable-next-line local/code-import-patterns\nimport { resolve, isAbsolute, join } from 'path';\n\nconst cwd = process.env['VSCODE_CWD'] || process.cwd();\n\n/**\n * Returns the user data path to use with some rules:\n * - respect portable mode\n * - respect VSCODE_APPDATA environment variable\n * - respect --user-data-dir CLI argument\n */\nexport function getUserDataPath(cliArgs: NativeParsedArgs, productName: string): string {\n\tconst userDataPath = doGetUserDataPath(cliArgs, productName);\n\tconst pathsToResolve = [userDataPath];\n\n\t// If the user-data-path is not absolute, make\n\t// sure to resolve it against the passed in\n\t// current working directory. We cannot use the\n\t// node.js `path.resolve()` logic because it will\n\t// not pick up our `VSCODE_CWD` environment variable\n\t// (https://github.com/microsoft/vscode/issues/120269)\n\tif (!isAbsolute(userDataPath)) {\n\t\tpathsToResolve.unshift(cwd);\n\t}\n\n\treturn resolve(...pathsToResolve);\n}\n\nfunction doGetUserDataPath(cliArgs: NativeParsedArgs, productName: string): string {\n\n\t// 0. Running out of sources has a fixed productName\n\tif (process.env['VSCODE_DEV']) {\n\t\tproductName = 'code-oss-dev';\n\t}\n\n\t// 1. Support portable mode\n\tconst portablePath = process.env['VSCODE_PORTABLE'];\n\tif (portablePath) {\n\t\treturn join(portablePath, 'user-data');\n\t}\n\n\t// 2. Support global VSCODE_APPDATA environment variable\n\tlet appDataPath = process.env['VSCODE_APPDATA'];\n\tif (appDataPath) {\n\t\treturn join(appDataPath, productName);\n\t}\n\n\t// With Electron>=13 --user-data-dir switch will be propagated to\n\t// all processes https://github.com/electron/electron/blob/1897b14af36a02e9aa7e4d814159303441548251/shell/browser/electron_browser_client.cc#L546-L553\n\t// Check VSCODE_PORTABLE and VSCODE_APPDATA before this case to get correct values.\n\t// 3. Support explicit --user-data-dir\n\tconst cliPath = cliArgs['user-data-dir'];\n\tif (cliPath) {\n\t\treturn cliPath;\n\t}\n\n\t// 4. Otherwise check per platform\n\tswitch (process.platform) {\n\t\tcase 'win32':\n\t\t\tappDataPath = process.env['APPDATA'];\n\t\t\tif (!appDataPath) {\n\t\t\t\tconst userProfile = process.env['USERPROFILE'];\n\t\t\t\tif (typeof userProfile !== 'string') {\n\t\t\t\t\tthrow new Error('Windows: Unexpected undefined %USERPROFILE% environment variable');\n\t\t\t\t}\n\n\t\t\t\tappDataPath = join(userProfile, 'AppData', 'Roaming');\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'darwin':\n\t\t\tappDataPath = join(homedir(), 'Library', 'Application Support');\n\t\t\tbreak;\n\t\tcase 'linux':\n\t\t\tappDataPath = process.env['XDG_CONFIG_HOME'] || join(homedir(), '.config');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Platform not supported');\n\t}\n\n\treturn join(appDataPath, productName);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { homedir } from 'os';\nimport { NativeParsedArgs } from '../common/argv.js';\n\n// This file used to be a pure JS file and was always\n// importing `path` from node.js even though we ship\n// our own version of the library and prefer to use\n// that.\n// However, resolution of user-data-path is critical\n// and while our version of `path` is a copy of node.js\n// one, you never know. As such, preserve the use of\n// the built-in `path` lib for the time being.\n// eslint-disable-next-line local/code-import-patterns\nimport { resolve, isAbsolute, join } from 'path';\n\nconst cwd = process.env['VSCODE_CWD'] || process.cwd();\n\n/**\n * Returns the user data path to use with some rules:\n * - respect portable mode\n * - respect VSCODE_APPDATA environment variable\n * - respect --user-data-dir CLI argument\n */\nexport function getUserDataPath(cliArgs: NativeParsedArgs, productName: string): string {\n\tconst userDataPath = doGetUserDataPath(cliArgs, productName);\n\tconst pathsToResolve = [userDataPath];\n\n\t// If the user-data-path is not absolute, make\n\t// sure to resolve it against the passed in\n\t// current working directory. We cannot use the\n\t// node.js `path.resolve()` logic because it will\n\t// not pick up our `VSCODE_CWD` environment variable\n\t// (https://github.com/microsoft/vscode/issues/120269)\n\tif (!isAbsolute(userDataPath)) {\n\t\tpathsToResolve.unshift(cwd);\n\t}\n\n\treturn resolve(...pathsToResolve);\n}\n\nfunction doGetUserDataPath(cliArgs: NativeParsedArgs, productName: string): string {\n\n\t// 0. Running out of sources has a fixed productName\n\tif (process.env['VSCODE_DEV']) {\n\t\tproductName = 'code-oss-dev';\n\t}\n\n\t// 1. Support portable mode\n\tconst portablePath = process.env['VSCODE_PORTABLE'];\n\tif (portablePath) {\n\t\treturn join(portablePath, 'user-data');\n\t}\n\n\t// 2. Support global VSCODE_APPDATA environment variable\n\tlet appDataPath = process.env['VSCODE_APPDATA'];\n\tif (appDataPath) {\n\t\treturn join(appDataPath, productName);\n\t}\n\n\t// With Electron>=13 --user-data-dir switch will be propagated to\n\t// all processes https://github.com/electron/electron/blob/1897b14af36a02e9aa7e4d814159303441548251/shell/browser/electron_browser_client.cc#L546-L553\n\t// Check VSCODE_PORTABLE and VSCODE_APPDATA before this case to get correct values.\n\t// 3. Support explicit --user-data-dir\n\tconst cliPath = cliArgs['user-data-dir'];\n\tif (cliPath) {\n\t\treturn cliPath;\n\t}\n\n\t// 4. Otherwise check per platform\n\tswitch (process.platform) {\n\t\tcase 'win32':\n\t\t\tappDataPath = process.env['APPDATA'];\n\t\t\tif (!appDataPath) {\n\t\t\t\tconst userProfile = process.env['USERPROFILE'];\n\t\t\t\tif (typeof userProfile !== 'string') {\n\t\t\t\t\tthrow new Error('Windows: Unexpected undefined %USERPROFILE% environment variable');\n\t\t\t\t}\n\n\t\t\t\tappDataPath = join(userProfile, 'AppData', 'Roaming');\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'darwin':\n\t\t\tappDataPath = join(homedir(), 'Library', 'Application Support');\n\t\t\tbreak;\n\t\tcase 'linux':\n\t\t\tappDataPath = process.env['XDG_CONFIG_HOME'] || join(homedir(), '.config');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Platform not supported');\n\t}\n\n\treturn join(appDataPath, productName);\n}\n"]}