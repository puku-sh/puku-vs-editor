{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/files/test/common/watcher.test.ts","vs/platform/files/test/common/watcher.test.ts"],"names":[],"mappings":"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","file":"watcher.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isLinux, isWindows } from '../../../../base/common/platform.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { FileChangeFilter, FileChangesEvent, FileChangeType, IFileChange } from '../../common/files.js';\nimport { coalesceEvents, reviveFileChanges, parseWatcherPatterns, isFiltered } from '../../common/watcher.js';\n\nclass TestFileWatcher extends Disposable {\n\tprivate readonly _onDidFilesChange: Emitter<{ raw: IFileChange[]; event: FileChangesEvent }>;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._onDidFilesChange = this._register(new Emitter<{ raw: IFileChange[]; event: FileChangesEvent }>());\n\t}\n\n\tget onDidFilesChange(): Event<{ raw: IFileChange[]; event: FileChangesEvent }> {\n\t\treturn this._onDidFilesChange.event;\n\t}\n\n\treport(changes: IFileChange[]): void {\n\t\tthis.onRawFileEvents(changes);\n\t}\n\n\tprivate onRawFileEvents(events: IFileChange[]): void {\n\n\t\t// Coalesce\n\t\tconst coalescedEvents = coalesceEvents(events);\n\n\t\t// Emit through event emitter\n\t\tif (coalescedEvents.length > 0) {\n\t\t\tthis._onDidFilesChange.fire({ raw: reviveFileChanges(coalescedEvents), event: this.toFileChangesEvent(coalescedEvents) });\n\t\t}\n\t}\n\n\tprivate toFileChangesEvent(changes: IFileChange[]): FileChangesEvent {\n\t\treturn new FileChangesEvent(reviveFileChanges(changes), !isLinux);\n\t}\n}\n\nenum Path {\n\tUNIX,\n\tWINDOWS,\n\tUNC\n}\n\nsuite('Watcher', () => {\n\n\t(isWindows ? test.skip : test)('parseWatcherPatterns - posix', () => {\n\t\tconst path = '/users/data/src';\n\t\tlet parsedPattern = parseWatcherPatterns(path, ['*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['/users/data/src/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['/users/data/src/bar/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), true);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['**/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), true);\n\t});\n\n\t(!isWindows ? test.skip : test)('parseWatcherPatterns - windows', () => {\n\t\tconst path = 'c:\\\\users\\\\data\\\\src';\n\t\tlet parsedPattern = parseWatcherPatterns(path, ['*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar/foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['c:\\\\users\\\\data\\\\src\\\\*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar\\\\foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['c:\\\\users\\\\data\\\\src\\\\bar/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar\\\\foo.js'), true);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['**/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar\\\\foo.js'), true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n\nsuite('Watcher Events Normalizer', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('simple add/update/delete', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst added = URI.file('/users/data/src/added.txt');\n\t\tconst updated = URI.file('/users/data/src/updated.txt');\n\t\tconst deleted = URI.file('/users/data/src/deleted.txt');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: added, type: FileChangeType.ADDED },\n\t\t\t{ resource: updated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: deleted, type: FileChangeType.DELETED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 3);\n\t\t\tassert.ok(event.contains(added, FileChangeType.ADDED));\n\t\t\tassert.ok(event.contains(updated, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(deleted, FileChangeType.DELETED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\t(isWindows ? [Path.WINDOWS, Path.UNC] : [Path.UNIX]).forEach(path => {\n\t\ttest(`delete only reported for top level folder (${path})`, done => {\n\t\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\t\tconst deletedFolderA = URI.file(path === Path.UNIX ? '/users/data/src/todelete1' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete1' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete1');\n\t\t\tconst deletedFolderB = URI.file(path === Path.UNIX ? '/users/data/src/todelete2' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2');\n\t\t\tconst deletedFolderBF1 = URI.file(path === Path.UNIX ? '/users/data/src/todelete2/file.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2\\\\file.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2\\\\file.txt');\n\t\t\tconst deletedFolderBF2 = URI.file(path === Path.UNIX ? '/users/data/src/todelete2/more/test.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2\\\\more\\\\test.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2\\\\more\\\\test.txt');\n\t\t\tconst deletedFolderBF3 = URI.file(path === Path.UNIX ? '/users/data/src/todelete2/super/bar/foo.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2\\\\super\\\\bar\\\\foo.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2\\\\super\\\\bar\\\\foo.txt');\n\t\t\tconst deletedFileA = URI.file(path === Path.UNIX ? '/users/data/src/deleteme.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\deleteme.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\deleteme.txt');\n\n\t\t\tconst addedFile = URI.file(path === Path.UNIX ? '/users/data/src/added.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\added.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\added.txt');\n\t\t\tconst updatedFile = URI.file(path === Path.UNIX ? '/users/data/src/updated.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\updated.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\updated.txt');\n\n\t\t\tconst raw: IFileChange[] = [\n\t\t\t\t{ resource: deletedFolderA, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderB, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderBF1, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderBF2, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderBF3, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFileA, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: addedFile, type: FileChangeType.ADDED },\n\t\t\t\t{ resource: updatedFile, type: FileChangeType.UPDATED }\n\t\t\t];\n\n\t\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\t\tassert.ok(event);\n\t\t\t\tassert.strictEqual(raw.length, 5);\n\n\t\t\t\tassert.ok(event.contains(deletedFolderA, FileChangeType.DELETED));\n\t\t\t\tassert.ok(event.contains(deletedFolderB, FileChangeType.DELETED));\n\t\t\t\tassert.ok(event.contains(deletedFileA, FileChangeType.DELETED));\n\t\t\t\tassert.ok(event.contains(addedFile, FileChangeType.ADDED));\n\t\t\t\tassert.ok(event.contains(updatedFile, FileChangeType.UPDATED));\n\n\t\t\t\tdone();\n\t\t\t}));\n\n\t\t\twatch.report(raw);\n\t\t});\n\t});\n\n\ttest('event coalescer: ignore CREATE followed by DELETE', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst created = URI.file('/users/data/src/related');\n\t\tconst deleted = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: created, type: FileChangeType.ADDED },\n\t\t\t{ resource: deleted, type: FileChangeType.DELETED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 1);\n\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: flatten DELETE followed by CREATE into CHANGE', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst deleted = URI.file('/users/data/src/related');\n\t\tconst created = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: deleted, type: FileChangeType.DELETED },\n\t\t\t{ resource: created, type: FileChangeType.ADDED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tassert.ok(event.contains(deleted, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: ignore UPDATE when CREATE received', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst created = URI.file('/users/data/src/related');\n\t\tconst updated = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: created, type: FileChangeType.ADDED },\n\t\t\t{ resource: updated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tassert.ok(event.contains(created, FileChangeType.ADDED));\n\t\t\tassert.ok(!event.contains(created, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: apply DELETE', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst updated = URI.file('/users/data/src/related');\n\t\tconst updated2 = URI.file('/users/data/src/related');\n\t\tconst deleted = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: updated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: updated2, type: FileChangeType.UPDATED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: updated, type: FileChangeType.DELETED }\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tassert.ok(event.contains(deleted, FileChangeType.DELETED));\n\t\t\tassert.ok(!event.contains(updated, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: track case renames', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst oldPath = URI.file('/users/data/src/added');\n\t\tconst newPath = URI.file('/users/data/src/ADDED');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: newPath, type: FileChangeType.ADDED },\n\t\t\t{ resource: oldPath, type: FileChangeType.DELETED }\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tfor (const r of raw) {\n\t\t\t\tif (isEqual(r.resource, oldPath)) {\n\t\t\t\t\tassert.strictEqual(r.type, FileChangeType.DELETED);\n\t\t\t\t} else if (isEqual(r.resource, newPath)) {\n\t\t\t\t\tassert.strictEqual(r.type, FileChangeType.ADDED);\n\t\t\t\t} else {\n\t\t\t\t\tassert.fail();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event type filter', () => {\n\t\tconst resource = URI.file('/users/data/src/related');\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, undefined), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, undefined), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, undefined), false);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.UPDATED), true);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.UPDATED | FileChangeFilter.DELETED), true);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.ADDED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.ADDED | FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.ADDED | FileChangeFilter.UPDATED | FileChangeFilter.DELETED), false);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.UPDATED), true);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.UPDATED | FileChangeFilter.ADDED), true);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.DELETED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.ADDED | FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.ADDED), true);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.DELETED | FileChangeFilter.ADDED), true);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.ADDED | FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isLinux, isWindows } from '../../../../base/common/platform.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { FileChangeFilter, FileChangesEvent, FileChangeType, IFileChange } from '../../common/files.js';\nimport { coalesceEvents, reviveFileChanges, parseWatcherPatterns, isFiltered } from '../../common/watcher.js';\n\nclass TestFileWatcher extends Disposable {\n\tprivate readonly _onDidFilesChange: Emitter<{ raw: IFileChange[]; event: FileChangesEvent }>;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._onDidFilesChange = this._register(new Emitter<{ raw: IFileChange[]; event: FileChangesEvent }>());\n\t}\n\n\tget onDidFilesChange(): Event<{ raw: IFileChange[]; event: FileChangesEvent }> {\n\t\treturn this._onDidFilesChange.event;\n\t}\n\n\treport(changes: IFileChange[]): void {\n\t\tthis.onRawFileEvents(changes);\n\t}\n\n\tprivate onRawFileEvents(events: IFileChange[]): void {\n\n\t\t// Coalesce\n\t\tconst coalescedEvents = coalesceEvents(events);\n\n\t\t// Emit through event emitter\n\t\tif (coalescedEvents.length > 0) {\n\t\t\tthis._onDidFilesChange.fire({ raw: reviveFileChanges(coalescedEvents), event: this.toFileChangesEvent(coalescedEvents) });\n\t\t}\n\t}\n\n\tprivate toFileChangesEvent(changes: IFileChange[]): FileChangesEvent {\n\t\treturn new FileChangesEvent(reviveFileChanges(changes), !isLinux);\n\t}\n}\n\nenum Path {\n\tUNIX,\n\tWINDOWS,\n\tUNC\n}\n\nsuite('Watcher', () => {\n\n\t(isWindows ? test.skip : test)('parseWatcherPatterns - posix', () => {\n\t\tconst path = '/users/data/src';\n\t\tlet parsedPattern = parseWatcherPatterns(path, ['*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['/users/data/src/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['/users/data/src/bar/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), true);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['**/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('/users/data/src/bar/foo.js'), true);\n\t});\n\n\t(!isWindows ? test.skip : test)('parseWatcherPatterns - windows', () => {\n\t\tconst path = 'c:\\\\users\\\\data\\\\src';\n\t\tlet parsedPattern = parseWatcherPatterns(path, ['*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar/foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['c:\\\\users\\\\data\\\\src\\\\*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar\\\\foo.js'), false);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['c:\\\\users\\\\data\\\\src\\\\bar/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar\\\\foo.js'), true);\n\n\t\tparsedPattern = parseWatcherPatterns(path, ['**/*.js'])[0];\n\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.js'), true);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\foo.ts'), false);\n\t\tassert.strictEqual(parsedPattern('c:\\\\users\\\\data\\\\src\\\\bar\\\\foo.js'), true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n\nsuite('Watcher Events Normalizer', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('simple add/update/delete', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst added = URI.file('/users/data/src/added.txt');\n\t\tconst updated = URI.file('/users/data/src/updated.txt');\n\t\tconst deleted = URI.file('/users/data/src/deleted.txt');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: added, type: FileChangeType.ADDED },\n\t\t\t{ resource: updated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: deleted, type: FileChangeType.DELETED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 3);\n\t\t\tassert.ok(event.contains(added, FileChangeType.ADDED));\n\t\t\tassert.ok(event.contains(updated, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(deleted, FileChangeType.DELETED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\t(isWindows ? [Path.WINDOWS, Path.UNC] : [Path.UNIX]).forEach(path => {\n\t\ttest(`delete only reported for top level folder (${path})`, done => {\n\t\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\t\tconst deletedFolderA = URI.file(path === Path.UNIX ? '/users/data/src/todelete1' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete1' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete1');\n\t\t\tconst deletedFolderB = URI.file(path === Path.UNIX ? '/users/data/src/todelete2' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2');\n\t\t\tconst deletedFolderBF1 = URI.file(path === Path.UNIX ? '/users/data/src/todelete2/file.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2\\\\file.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2\\\\file.txt');\n\t\t\tconst deletedFolderBF2 = URI.file(path === Path.UNIX ? '/users/data/src/todelete2/more/test.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2\\\\more\\\\test.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2\\\\more\\\\test.txt');\n\t\t\tconst deletedFolderBF3 = URI.file(path === Path.UNIX ? '/users/data/src/todelete2/super/bar/foo.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\todelete2\\\\super\\\\bar\\\\foo.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\todelete2\\\\super\\\\bar\\\\foo.txt');\n\t\t\tconst deletedFileA = URI.file(path === Path.UNIX ? '/users/data/src/deleteme.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\deleteme.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\deleteme.txt');\n\n\t\t\tconst addedFile = URI.file(path === Path.UNIX ? '/users/data/src/added.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\added.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\added.txt');\n\t\t\tconst updatedFile = URI.file(path === Path.UNIX ? '/users/data/src/updated.txt' : path === Path.WINDOWS ? 'C:\\\\users\\\\data\\\\src\\\\updated.txt' : '\\\\\\\\localhost\\\\users\\\\data\\\\src\\\\updated.txt');\n\n\t\t\tconst raw: IFileChange[] = [\n\t\t\t\t{ resource: deletedFolderA, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderB, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderBF1, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderBF2, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFolderBF3, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: deletedFileA, type: FileChangeType.DELETED },\n\t\t\t\t{ resource: addedFile, type: FileChangeType.ADDED },\n\t\t\t\t{ resource: updatedFile, type: FileChangeType.UPDATED }\n\t\t\t];\n\n\t\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\t\tassert.ok(event);\n\t\t\t\tassert.strictEqual(raw.length, 5);\n\n\t\t\t\tassert.ok(event.contains(deletedFolderA, FileChangeType.DELETED));\n\t\t\t\tassert.ok(event.contains(deletedFolderB, FileChangeType.DELETED));\n\t\t\t\tassert.ok(event.contains(deletedFileA, FileChangeType.DELETED));\n\t\t\t\tassert.ok(event.contains(addedFile, FileChangeType.ADDED));\n\t\t\t\tassert.ok(event.contains(updatedFile, FileChangeType.UPDATED));\n\n\t\t\t\tdone();\n\t\t\t}));\n\n\t\t\twatch.report(raw);\n\t\t});\n\t});\n\n\ttest('event coalescer: ignore CREATE followed by DELETE', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst created = URI.file('/users/data/src/related');\n\t\tconst deleted = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: created, type: FileChangeType.ADDED },\n\t\t\t{ resource: deleted, type: FileChangeType.DELETED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 1);\n\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: flatten DELETE followed by CREATE into CHANGE', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst deleted = URI.file('/users/data/src/related');\n\t\tconst created = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: deleted, type: FileChangeType.DELETED },\n\t\t\t{ resource: created, type: FileChangeType.ADDED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tassert.ok(event.contains(deleted, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: ignore UPDATE when CREATE received', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst created = URI.file('/users/data/src/related');\n\t\tconst updated = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: created, type: FileChangeType.ADDED },\n\t\t\t{ resource: updated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tassert.ok(event.contains(created, FileChangeType.ADDED));\n\t\t\tassert.ok(!event.contains(created, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: apply DELETE', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst updated = URI.file('/users/data/src/related');\n\t\tconst updated2 = URI.file('/users/data/src/related');\n\t\tconst deleted = URI.file('/users/data/src/related');\n\t\tconst unrelated = URI.file('/users/data/src/unrelated');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: updated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: updated2, type: FileChangeType.UPDATED },\n\t\t\t{ resource: unrelated, type: FileChangeType.UPDATED },\n\t\t\t{ resource: updated, type: FileChangeType.DELETED }\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tassert.ok(event.contains(deleted, FileChangeType.DELETED));\n\t\t\tassert.ok(!event.contains(updated, FileChangeType.UPDATED));\n\t\t\tassert.ok(event.contains(unrelated, FileChangeType.UPDATED));\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event coalescer: track case renames', done => {\n\t\tconst watch = disposables.add(new TestFileWatcher());\n\n\t\tconst oldPath = URI.file('/users/data/src/added');\n\t\tconst newPath = URI.file('/users/data/src/ADDED');\n\n\t\tconst raw: IFileChange[] = [\n\t\t\t{ resource: newPath, type: FileChangeType.ADDED },\n\t\t\t{ resource: oldPath, type: FileChangeType.DELETED }\n\t\t];\n\n\t\tdisposables.add(watch.onDidFilesChange(({ event, raw }) => {\n\t\t\tassert.ok(event);\n\t\t\tassert.strictEqual(raw.length, 2);\n\n\t\t\tfor (const r of raw) {\n\t\t\t\tif (isEqual(r.resource, oldPath)) {\n\t\t\t\t\tassert.strictEqual(r.type, FileChangeType.DELETED);\n\t\t\t\t} else if (isEqual(r.resource, newPath)) {\n\t\t\t\t\tassert.strictEqual(r.type, FileChangeType.ADDED);\n\t\t\t\t} else {\n\t\t\t\t\tassert.fail();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdone();\n\t\t}));\n\n\t\twatch.report(raw);\n\t});\n\n\ttest('event type filter', () => {\n\t\tconst resource = URI.file('/users/data/src/related');\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, undefined), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, undefined), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, undefined), false);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.UPDATED), true);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.UPDATED | FileChangeFilter.DELETED), true);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.ADDED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.ADDED | FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.ADDED }, FileChangeFilter.ADDED | FileChangeFilter.UPDATED | FileChangeFilter.DELETED), false);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.UPDATED), true);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.UPDATED | FileChangeFilter.ADDED), true);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.DELETED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.DELETED }, FileChangeFilter.ADDED | FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.ADDED), true);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.DELETED | FileChangeFilter.ADDED), true);\n\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\t\tassert.strictEqual(isFiltered({ resource, type: FileChangeType.UPDATED }, FileChangeFilter.ADDED | FileChangeFilter.DELETED | FileChangeFilter.UPDATED), false);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}