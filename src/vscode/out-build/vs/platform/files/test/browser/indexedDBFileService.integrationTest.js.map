{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/files/test/browser/indexedDBFileService.integrationTest.ts","vs/platform/files/test/browser/indexedDBFileService.integrationTest.ts"],"names":[],"mappings":"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","file":"indexedDBFileService.integrationTest.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IndexedDB } from '../../../../base/browser/indexedDB.js';\nimport { bufferToReadable, bufferToStream, VSBuffer, VSBufferReadable, VSBufferReadableStream } from '../../../../base/common/buffer.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { basename, joinPath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { flakySuite } from '../../../../base/test/common/testUtils.js';\nimport { IndexedDBFileSystemProvider } from '../../browser/indexedDBFileSystemProvider.js';\nimport { FileOperation, FileOperationError, FileOperationEvent, FileOperationResult, FileSystemProviderError, FileSystemProviderErrorCode, FileType } from '../../common/files.js';\nimport { FileService } from '../../common/fileService.js';\nimport { NullLogService } from '../../../log/common/log.js';\n\nflakySuite('IndexedDBFileSystemProvider', function () {\n\n\tlet service: FileService;\n\tlet userdataFileProvider: IndexedDBFileSystemProvider;\n\tconst testDir = '/';\n\n\tconst userdataURIFromPaths = (paths: readonly string[]) => joinPath(URI.from({ scheme: Schemas.vscodeUserData, path: testDir }), ...paths);\n\n\tconst disposables = new DisposableStore();\n\n\tconst initFixtures = async () => {\n\t\tawait Promise.all(\n\t\t\t[['fixtures', 'resolver', 'examples'],\n\t\t\t['fixtures', 'resolver', 'other', 'deep'],\n\t\t\t['fixtures', 'service', 'deep'],\n\t\t\t['batched']]\n\t\t\t\t.map(path => userdataURIFromPaths(path))\n\t\t\t\t.map(uri => service.createFolder(uri)));\n\t\tawait Promise.all(\n\t\t\t([\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'company.js'], 'class company {}'],\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'conway.js'], 'export function conway() {}'],\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'employee.js'], 'export const employee = \"jax\"'],\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'small.js'], ''],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'company.js'], 'class company {}'],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'conway.js'], 'export function conway() {}'],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'employee.js'], 'export const employee = \"jax\"'],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'small.js'], ''],\n\t\t\t\t[['fixtures', 'resolver', 'index.html'], '<p>p</p>'],\n\t\t\t\t[['fixtures', 'resolver', 'site.css'], '.p {color: red;}'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'company.js'], 'class company {}'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'conway.js'], 'export function conway() {}'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'employee.js'], 'export const employee = \"jax\"'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'small.js'], ''],\n\t\t\t\t[['fixtures', 'service', 'binary.txt'], '<p>p</p>'],\n\t\t\t] as const)\n\t\t\t\t.map(([path, contents]) => [userdataURIFromPaths(path), contents] as const)\n\t\t\t\t.map(([uri, contents]) => service.createFile(uri, VSBuffer.fromString(contents)))\n\t\t);\n\t};\n\n\tconst reload = async () => {\n\t\tconst logService = new NullLogService();\n\n\t\tservice = new FileService(logService);\n\t\tdisposables.add(service);\n\n\t\tconst indexedDB = await IndexedDB.create('vscode-web-db-test', 1, ['vscode-userdata-store', 'vscode-logs-store']);\n\n\t\tuserdataFileProvider = new IndexedDBFileSystemProvider(Schemas.vscodeUserData, indexedDB, 'vscode-userdata-store', true);\n\t\tdisposables.add(service.registerProvider(Schemas.vscodeUserData, userdataFileProvider));\n\t\tdisposables.add(userdataFileProvider);\n\t};\n\n\tsetup(async function () {\n\t\tthis.timeout(15000);\n\t\tawait reload();\n\t});\n\n\tteardown(async () => {\n\t\tawait userdataFileProvider.reset();\n\t\tdisposables.clear();\n\t});\n\n\ttest('root is always present', async () => {\n\t\tassert.strictEqual((await userdataFileProvider.stat(userdataURIFromPaths([]))).type, FileType.Directory);\n\t\tawait userdataFileProvider.delete(userdataURIFromPaths([]), { recursive: true, useTrash: false, atomic: false });\n\t\tassert.strictEqual((await userdataFileProvider.stat(userdataURIFromPaths([]))).type, FileType.Directory);\n\t});\n\n\ttest('createFolder', async () => {\n\t\tlet event: FileOperationEvent | undefined;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst newFolderResource = joinPath(parent.resource, 'newFolder');\n\n\t\tassert.strictEqual((await userdataFileProvider.readdir(parent.resource)).length, 0);\n\t\tconst newFolder = await service.createFolder(newFolderResource);\n\t\tassert.strictEqual(newFolder.name, 'newFolder');\n\t\tassert.strictEqual((await userdataFileProvider.readdir(parent.resource)).length, 1);\n\t\tassert.strictEqual((await userdataFileProvider.stat(newFolderResource)).type, FileType.Directory);\n\n\t\tassert.ok(event);\n\t\tassert.strictEqual(event.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event.operation, FileOperation.CREATE);\n\t\tassert.strictEqual(event.target!.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event.target!.isDirectory, true);\n\t});\n\n\ttest('createFolder: creating multiple folders at once', async () => {\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst multiFolderPaths = ['a', 'couple', 'of', 'folders'];\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst newFolderResource = joinPath(parent.resource, ...multiFolderPaths);\n\n\t\tconst newFolder = await service.createFolder(newFolderResource);\n\n\t\tconst lastFolderName = multiFolderPaths[multiFolderPaths.length - 1];\n\t\tassert.strictEqual(newFolder.name, lastFolderName);\n\t\tassert.strictEqual((await userdataFileProvider.stat(newFolderResource)).type, FileType.Directory);\n\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event!.operation, FileOperation.CREATE);\n\t\tassert.strictEqual(event!.target!.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event!.target!.isDirectory, true);\n\t});\n\n\ttest('exists', async () => {\n\t\tlet exists = await service.exists(userdataURIFromPaths([]));\n\t\tassert.strictEqual(exists, true);\n\n\t\texists = await service.exists(userdataURIFromPaths(['hello']));\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('resolve - file', async () => {\n\t\tawait initFixtures();\n\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'resolver', 'index.html']);\n\t\tconst resolved = await service.resolve(resource);\n\n\t\tassert.strictEqual(resolved.name, 'index.html');\n\t\tassert.strictEqual(resolved.isFile, true);\n\t\tassert.strictEqual(resolved.isDirectory, false);\n\t\tassert.strictEqual(resolved.isSymbolicLink, false);\n\t\tassert.strictEqual(resolved.resource.toString(), resource.toString());\n\t\tassert.strictEqual(resolved.children, undefined);\n\t\tassert.ok(resolved.size! > 0);\n\t});\n\n\ttest('resolve - directory', async () => {\n\t\tawait initFixtures();\n\n\t\tconst testsElements = ['examples', 'other', 'index.html', 'site.css'];\n\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'resolver']);\n\t\tconst result = await service.resolve(resource);\n\n\t\tassert.ok(result);\n\t\tassert.strictEqual(result.resource.toString(), resource.toString());\n\t\tassert.strictEqual(result.name, 'resolver');\n\t\tassert.ok(result.children);\n\t\tassert.ok(result.children.length > 0);\n\t\tassert.ok(result.isDirectory);\n\t\tassert.strictEqual(result.children.length, testsElements.length);\n\n\t\tassert.ok(result.children.every(entry => {\n\t\t\treturn testsElements.some(name => {\n\t\t\t\treturn basename(entry.resource) === name;\n\t\t\t});\n\t\t}));\n\n\t\tresult.children.forEach(value => {\n\t\t\tassert.ok(basename(value.resource));\n\t\t\tif (['examples', 'other'].indexOf(basename(value.resource)) >= 0) {\n\t\t\t\tassert.ok(value.isDirectory);\n\t\t\t\tassert.strictEqual(value.mtime, undefined);\n\t\t\t\tassert.strictEqual(value.ctime, undefined);\n\t\t\t} else if (basename(value.resource) === 'index.html') {\n\t\t\t\tassert.ok(!value.isDirectory);\n\t\t\t\tassert.ok(!value.children);\n\t\t\t\tassert.strictEqual(value.mtime, undefined);\n\t\t\t\tassert.strictEqual(value.ctime, undefined);\n\t\t\t} else if (basename(value.resource) === 'site.css') {\n\t\t\t\tassert.ok(!value.isDirectory);\n\t\t\t\tassert.ok(!value.children);\n\t\t\t\tassert.strictEqual(value.mtime, undefined);\n\t\t\t\tassert.strictEqual(value.ctime, undefined);\n\t\t\t} else {\n\t\t\t\tassert.fail('Unexpected value ' + basename(value.resource));\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('createFile', async () => {\n\t\treturn assertCreateFile(contents => VSBuffer.fromString(contents));\n\t});\n\n\ttest('createFile (readable)', async () => {\n\t\treturn assertCreateFile(contents => bufferToReadable(VSBuffer.fromString(contents)));\n\t});\n\n\ttest('createFile (stream)', async () => {\n\t\treturn assertCreateFile(contents => bufferToStream(VSBuffer.fromString(contents)));\n\t});\n\n\tasync function assertCreateFile(converter: (content: string) => VSBuffer | VSBufferReadable | VSBufferReadableStream): Promise<void> {\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst contents = 'Hello World';\n\t\tconst resource = userdataURIFromPaths(['test.txt']);\n\n\t\tassert.strictEqual(await service.canCreateFile(resource), true);\n\t\tconst fileStat = await service.createFile(resource, converter(contents));\n\t\tassert.strictEqual(fileStat.name, 'test.txt');\n\t\tassert.strictEqual((await userdataFileProvider.stat(fileStat.resource)).type, FileType.File);\n\t\tassert.strictEqual(new TextDecoder().decode(await userdataFileProvider.readFile(fileStat.resource)), contents);\n\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.path, resource.path);\n\t\tassert.strictEqual(event!.operation, FileOperation.CREATE);\n\t\tassert.strictEqual(event!.target!.resource.path, resource.path);\n\t}\n\n\tconst fileCreateBatchTester = (size: number, name: string) => {\n\t\tconst batch = Array.from({ length: size }).map((_, i) => ({ contents: `Hello${i}`, resource: userdataURIFromPaths(['batched', name, `Hello${i}.txt`]) }));\n\t\tlet creationPromises: Promise<any> | undefined = undefined;\n\t\treturn {\n\t\t\tasync create() {\n\t\t\t\treturn creationPromises = Promise.all(batch.map(entry => userdataFileProvider.writeFile(entry.resource, VSBuffer.fromString(entry.contents).buffer, { create: true, overwrite: true, unlock: false, atomic: false })));\n\t\t\t},\n\t\t\tasync assertContentsCorrect() {\n\t\t\t\tif (!creationPromises) { throw Error('read called before create'); }\n\t\t\t\tawait creationPromises;\n\t\t\t\tawait Promise.all(batch.map(async (entry, i) => {\n\t\t\t\t\tassert.strictEqual((await userdataFileProvider.stat(entry.resource)).type, FileType.File);\n\t\t\t\t\tassert.strictEqual(new TextDecoder().decode(await userdataFileProvider.readFile(entry.resource)), entry.contents);\n\t\t\t\t}));\n\t\t\t}\n\t\t};\n\t};\n\n\ttest('createFile - batch', async () => {\n\t\tconst tester = fileCreateBatchTester(20, 'batch');\n\t\tawait tester.create();\n\t\tawait tester.assertContentsCorrect();\n\t});\n\n\ttest('createFile - batch (mixed parallel/sequential)', async () => {\n\t\tconst batch1 = fileCreateBatchTester(1, 'batch1');\n\t\tconst batch2 = fileCreateBatchTester(20, 'batch2');\n\t\tconst batch3 = fileCreateBatchTester(1, 'batch3');\n\t\tconst batch4 = fileCreateBatchTester(20, 'batch4');\n\n\t\tbatch1.create();\n\t\tbatch2.create();\n\t\tawait Promise.all([batch1.assertContentsCorrect(), batch2.assertContentsCorrect()]);\n\t\tbatch3.create();\n\t\tbatch4.create();\n\t\tawait Promise.all([batch3.assertContentsCorrect(), batch4.assertContentsCorrect()]);\n\t\tawait Promise.all([batch1.assertContentsCorrect(), batch2.assertContentsCorrect()]);\n\t});\n\n\ttest('rename not existing resource', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\n\t\ttry {\n\t\t\tawait service.move(sourceFile, targetFile, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileSystemProviderError>error).code, FileSystemProviderErrorCode.FileNotFound);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename to an existing file without overwrite', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.writeFile(sourceFile, VSBuffer.fromString('This is source file'));\n\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\t\tawait service.writeFile(targetFile, VSBuffer.fromString('This is target file'));\n\n\t\ttry {\n\t\t\tawait service.move(sourceFile, targetFile, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename folder to an existing folder without overwrite', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tawait service.createFolder(sourceFolder);\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.createFolder(targetFolder);\n\n\t\ttry {\n\t\t\tawait service.move(sourceFolder, targetFolder, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with cannot overwrite error');\n\t});\n\n\ttest('rename file to a folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.writeFile(sourceFile, VSBuffer.fromString('This is source file'));\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.createFolder(targetFolder);\n\n\t\ttry {\n\t\t\tawait service.move(sourceFile, targetFolder, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename folder to a file', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.createFolder(sourceFolder);\n\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\t\tawait service.writeFile(targetFile, VSBuffer.fromString('This is target file'));\n\n\t\ttry {\n\t\t\tawait service.move(sourceFolder, targetFile, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename file', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.writeFile(sourceFile, VSBuffer.fromString('This is source file'));\n\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\t\tawait service.move(sourceFile, targetFile, false);\n\n\t\tconst content = await service.readFile(targetFile);\n\t\tassert.strictEqual(await service.exists(sourceFile), false);\n\t\tassert.strictEqual(content.value.toString(), 'This is source file');\n\t});\n\n\ttest('rename to an existing file with overwrite', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\n\t\tawait Promise.all([\n\t\t\tservice.writeFile(sourceFile, VSBuffer.fromString('This is source file')),\n\t\t\tservice.writeFile(targetFile, VSBuffer.fromString('This is target file'))\n\t\t]);\n\n\t\tawait service.move(sourceFile, targetFile, true);\n\n\t\tconst content = await service.readFile(targetFile);\n\t\tassert.strictEqual(await service.exists(sourceFile), false);\n\t\tassert.strictEqual(content.value.toString(), 'This is source file');\n\t});\n\n\ttest('rename folder to a new folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tawait service.createFolder(sourceFolder);\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.move(sourceFolder, targetFolder, false);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t});\n\n\ttest('rename folder to an existing folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tawait service.createFolder(sourceFolder);\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.createFolder(targetFolder);\n\n\t\tawait service.move(sourceFolder, targetFolder, true);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t});\n\n\ttest('rename a folder that has multiple files and folders', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tconst sourceFile1 = joinPath(sourceFolder, 'folder1', 'file1');\n\t\tconst sourceFile2 = joinPath(sourceFolder, 'folder2', 'file1');\n\t\tconst sourceEmptyFolder = joinPath(sourceFolder, 'folder3');\n\n\t\tawait Promise.all([\n\t\t\tservice.writeFile(sourceFile1, VSBuffer.fromString('Source File 1')),\n\t\t\tservice.writeFile(sourceFile2, VSBuffer.fromString('Source File 2')),\n\t\t\tservice.createFolder(sourceEmptyFolder)\n\t\t]);\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tconst targetFile1 = joinPath(targetFolder, 'folder1', 'file1');\n\t\tconst targetFile2 = joinPath(targetFolder, 'folder2', 'file1');\n\t\tconst targetEmptyFolder = joinPath(targetFolder, 'folder3');\n\n\t\tawait service.move(sourceFolder, targetFolder, false);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t\tassert.strictEqual((await service.readFile(targetFile1)).value.toString(), 'Source File 1');\n\t\tassert.strictEqual((await service.readFile(targetFile2)).value.toString(), 'Source File 2');\n\t\tassert.deepStrictEqual(await service.exists(targetEmptyFolder), true);\n\t});\n\n\ttest('rename a folder to another folder that has some files', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tconst sourceFile1 = joinPath(sourceFolder, 'folder1', 'file1');\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tconst targetFile1 = joinPath(targetFolder, 'folder1', 'file1');\n\t\tconst targetFile2 = joinPath(targetFolder, 'folder1', 'file2');\n\t\tconst targetFile3 = joinPath(targetFolder, 'folder2', 'file1');\n\n\t\tawait Promise.all([\n\t\t\tservice.writeFile(sourceFile1, VSBuffer.fromString('Source File 1')),\n\t\t\tservice.writeFile(targetFile2, VSBuffer.fromString('Target File 2')),\n\t\t\tservice.writeFile(targetFile3, VSBuffer.fromString('Target File 3'))\n\t\t]);\n\n\t\tawait service.move(sourceFolder, targetFolder, true);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t\tassert.strictEqual((await service.readFile(targetFile1)).value.toString(), 'Source File 1');\n\t\tassert.strictEqual(await service.exists(targetFile2), false);\n\t\tassert.strictEqual(await service.exists(targetFile3), false);\n\t});\n\n\ttest('deleteFile', async () => {\n\t\tawait initFixtures();\n\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst anotherResource = userdataURIFromPaths(['fixtures', 'service', 'deep', 'company.js']);\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'service', 'deep', 'conway.js']);\n\t\tconst source = await service.resolve(resource);\n\n\t\tassert.strictEqual(await service.canDelete(source.resource, { useTrash: false }), true);\n\t\tawait service.del(source.resource, { useTrash: false });\n\n\t\tassert.strictEqual(await service.exists(source.resource), false);\n\t\tassert.strictEqual(await service.exists(anotherResource), true);\n\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.path, resource.path);\n\t\tassert.strictEqual(event!.operation, FileOperation.DELETE);\n\n\t\t{\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait service.del(source.resource, { useTrash: false });\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.strictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_NOT_FOUND);\n\t\t}\n\t\tawait reload();\n\t\t{\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait service.del(source.resource, { useTrash: false });\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.strictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_NOT_FOUND);\n\t\t}\n\t});\n\n\ttest('deleteFolder (recursive)', async () => {\n\t\tawait initFixtures();\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'service', 'deep']);\n\t\tconst subResource1 = userdataURIFromPaths(['fixtures', 'service', 'deep', 'company.js']);\n\t\tconst subResource2 = userdataURIFromPaths(['fixtures', 'service', 'deep', 'conway.js']);\n\t\tassert.strictEqual(await service.exists(subResource1), true);\n\t\tassert.strictEqual(await service.exists(subResource2), true);\n\n\t\tconst source = await service.resolve(resource);\n\n\t\tassert.strictEqual(await service.canDelete(source.resource, { recursive: true, useTrash: false }), true);\n\t\tawait service.del(source.resource, { recursive: true, useTrash: false });\n\n\t\tassert.strictEqual(await service.exists(source.resource), false);\n\t\tassert.strictEqual(await service.exists(subResource1), false);\n\t\tassert.strictEqual(await service.exists(subResource2), false);\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.fsPath, resource.fsPath);\n\t\tassert.strictEqual(event!.operation, FileOperation.DELETE);\n\t});\n\n\ttest('deleteFolder (non recursive)', async () => {\n\t\tawait initFixtures();\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'service', 'deep']);\n\t\tconst source = await service.resolve(resource);\n\n\t\tassert.ok((await service.canDelete(source.resource)) instanceof Error);\n\n\t\tlet error;\n\t\ttry {\n\t\t\tawait service.del(source.resource);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\t\tassert.ok(error);\n\t});\n\n\ttest('delete empty folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst folder = joinPath(parent.resource, 'folder');\n\t\tawait service.createFolder(folder);\n\n\t\tawait service.del(folder);\n\n\t\tassert.deepStrictEqual(await service.exists(folder), false);\n\t});\n\n\ttest('delete empty folder with reccursive', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst folder = joinPath(parent.resource, 'folder');\n\t\tawait service.createFolder(folder);\n\n\t\tawait service.del(folder, { recursive: true });\n\n\t\tassert.deepStrictEqual(await service.exists(folder), false);\n\t});\n\n\ttest('deleteFolder with folders and files (recursive)', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tconst file1 = joinPath(targetFolder, 'folder1', 'file1');\n\t\tawait service.createFile(file1);\n\t\tconst file2 = joinPath(targetFolder, 'folder2', 'file1');\n\t\tawait service.createFile(file2);\n\t\tconst emptyFolder = joinPath(targetFolder, 'folder3');\n\t\tawait service.createFolder(emptyFolder);\n\n\t\tawait service.del(targetFolder, { recursive: true });\n\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(joinPath(targetFolder, 'folder1')), false);\n\t\tassert.deepStrictEqual(await service.exists(joinPath(targetFolder, 'folder2')), false);\n\t\tassert.deepStrictEqual(await service.exists(file1), false);\n\t\tassert.deepStrictEqual(await service.exists(file2), false);\n\t\tassert.deepStrictEqual(await service.exists(emptyFolder), false);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IndexedDB } from '../../../../base/browser/indexedDB.js';\nimport { bufferToReadable, bufferToStream, VSBuffer, VSBufferReadable, VSBufferReadableStream } from '../../../../base/common/buffer.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { basename, joinPath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { flakySuite } from '../../../../base/test/common/testUtils.js';\nimport { IndexedDBFileSystemProvider } from '../../browser/indexedDBFileSystemProvider.js';\nimport { FileOperation, FileOperationError, FileOperationEvent, FileOperationResult, FileSystemProviderError, FileSystemProviderErrorCode, FileType } from '../../common/files.js';\nimport { FileService } from '../../common/fileService.js';\nimport { NullLogService } from '../../../log/common/log.js';\n\nflakySuite('IndexedDBFileSystemProvider', function () {\n\n\tlet service: FileService;\n\tlet userdataFileProvider: IndexedDBFileSystemProvider;\n\tconst testDir = '/';\n\n\tconst userdataURIFromPaths = (paths: readonly string[]) => joinPath(URI.from({ scheme: Schemas.vscodeUserData, path: testDir }), ...paths);\n\n\tconst disposables = new DisposableStore();\n\n\tconst initFixtures = async () => {\n\t\tawait Promise.all(\n\t\t\t[['fixtures', 'resolver', 'examples'],\n\t\t\t['fixtures', 'resolver', 'other', 'deep'],\n\t\t\t['fixtures', 'service', 'deep'],\n\t\t\t['batched']]\n\t\t\t\t.map(path => userdataURIFromPaths(path))\n\t\t\t\t.map(uri => service.createFolder(uri)));\n\t\tawait Promise.all(\n\t\t\t([\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'company.js'], 'class company {}'],\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'conway.js'], 'export function conway() {}'],\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'employee.js'], 'export const employee = \"jax\"'],\n\t\t\t\t[['fixtures', 'resolver', 'examples', 'small.js'], ''],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'company.js'], 'class company {}'],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'conway.js'], 'export function conway() {}'],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'employee.js'], 'export const employee = \"jax\"'],\n\t\t\t\t[['fixtures', 'resolver', 'other', 'deep', 'small.js'], ''],\n\t\t\t\t[['fixtures', 'resolver', 'index.html'], '<p>p</p>'],\n\t\t\t\t[['fixtures', 'resolver', 'site.css'], '.p {color: red;}'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'company.js'], 'class company {}'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'conway.js'], 'export function conway() {}'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'employee.js'], 'export const employee = \"jax\"'],\n\t\t\t\t[['fixtures', 'service', 'deep', 'small.js'], ''],\n\t\t\t\t[['fixtures', 'service', 'binary.txt'], '<p>p</p>'],\n\t\t\t] as const)\n\t\t\t\t.map(([path, contents]) => [userdataURIFromPaths(path), contents] as const)\n\t\t\t\t.map(([uri, contents]) => service.createFile(uri, VSBuffer.fromString(contents)))\n\t\t);\n\t};\n\n\tconst reload = async () => {\n\t\tconst logService = new NullLogService();\n\n\t\tservice = new FileService(logService);\n\t\tdisposables.add(service);\n\n\t\tconst indexedDB = await IndexedDB.create('vscode-web-db-test', 1, ['vscode-userdata-store', 'vscode-logs-store']);\n\n\t\tuserdataFileProvider = new IndexedDBFileSystemProvider(Schemas.vscodeUserData, indexedDB, 'vscode-userdata-store', true);\n\t\tdisposables.add(service.registerProvider(Schemas.vscodeUserData, userdataFileProvider));\n\t\tdisposables.add(userdataFileProvider);\n\t};\n\n\tsetup(async function () {\n\t\tthis.timeout(15000);\n\t\tawait reload();\n\t});\n\n\tteardown(async () => {\n\t\tawait userdataFileProvider.reset();\n\t\tdisposables.clear();\n\t});\n\n\ttest('root is always present', async () => {\n\t\tassert.strictEqual((await userdataFileProvider.stat(userdataURIFromPaths([]))).type, FileType.Directory);\n\t\tawait userdataFileProvider.delete(userdataURIFromPaths([]), { recursive: true, useTrash: false, atomic: false });\n\t\tassert.strictEqual((await userdataFileProvider.stat(userdataURIFromPaths([]))).type, FileType.Directory);\n\t});\n\n\ttest('createFolder', async () => {\n\t\tlet event: FileOperationEvent | undefined;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst newFolderResource = joinPath(parent.resource, 'newFolder');\n\n\t\tassert.strictEqual((await userdataFileProvider.readdir(parent.resource)).length, 0);\n\t\tconst newFolder = await service.createFolder(newFolderResource);\n\t\tassert.strictEqual(newFolder.name, 'newFolder');\n\t\tassert.strictEqual((await userdataFileProvider.readdir(parent.resource)).length, 1);\n\t\tassert.strictEqual((await userdataFileProvider.stat(newFolderResource)).type, FileType.Directory);\n\n\t\tassert.ok(event);\n\t\tassert.strictEqual(event.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event.operation, FileOperation.CREATE);\n\t\tassert.strictEqual(event.target!.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event.target!.isDirectory, true);\n\t});\n\n\ttest('createFolder: creating multiple folders at once', async () => {\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst multiFolderPaths = ['a', 'couple', 'of', 'folders'];\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst newFolderResource = joinPath(parent.resource, ...multiFolderPaths);\n\n\t\tconst newFolder = await service.createFolder(newFolderResource);\n\n\t\tconst lastFolderName = multiFolderPaths[multiFolderPaths.length - 1];\n\t\tassert.strictEqual(newFolder.name, lastFolderName);\n\t\tassert.strictEqual((await userdataFileProvider.stat(newFolderResource)).type, FileType.Directory);\n\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event!.operation, FileOperation.CREATE);\n\t\tassert.strictEqual(event!.target!.resource.path, newFolderResource.path);\n\t\tassert.strictEqual(event!.target!.isDirectory, true);\n\t});\n\n\ttest('exists', async () => {\n\t\tlet exists = await service.exists(userdataURIFromPaths([]));\n\t\tassert.strictEqual(exists, true);\n\n\t\texists = await service.exists(userdataURIFromPaths(['hello']));\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('resolve - file', async () => {\n\t\tawait initFixtures();\n\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'resolver', 'index.html']);\n\t\tconst resolved = await service.resolve(resource);\n\n\t\tassert.strictEqual(resolved.name, 'index.html');\n\t\tassert.strictEqual(resolved.isFile, true);\n\t\tassert.strictEqual(resolved.isDirectory, false);\n\t\tassert.strictEqual(resolved.isSymbolicLink, false);\n\t\tassert.strictEqual(resolved.resource.toString(), resource.toString());\n\t\tassert.strictEqual(resolved.children, undefined);\n\t\tassert.ok(resolved.size! > 0);\n\t});\n\n\ttest('resolve - directory', async () => {\n\t\tawait initFixtures();\n\n\t\tconst testsElements = ['examples', 'other', 'index.html', 'site.css'];\n\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'resolver']);\n\t\tconst result = await service.resolve(resource);\n\n\t\tassert.ok(result);\n\t\tassert.strictEqual(result.resource.toString(), resource.toString());\n\t\tassert.strictEqual(result.name, 'resolver');\n\t\tassert.ok(result.children);\n\t\tassert.ok(result.children.length > 0);\n\t\tassert.ok(result.isDirectory);\n\t\tassert.strictEqual(result.children.length, testsElements.length);\n\n\t\tassert.ok(result.children.every(entry => {\n\t\t\treturn testsElements.some(name => {\n\t\t\t\treturn basename(entry.resource) === name;\n\t\t\t});\n\t\t}));\n\n\t\tresult.children.forEach(value => {\n\t\t\tassert.ok(basename(value.resource));\n\t\t\tif (['examples', 'other'].indexOf(basename(value.resource)) >= 0) {\n\t\t\t\tassert.ok(value.isDirectory);\n\t\t\t\tassert.strictEqual(value.mtime, undefined);\n\t\t\t\tassert.strictEqual(value.ctime, undefined);\n\t\t\t} else if (basename(value.resource) === 'index.html') {\n\t\t\t\tassert.ok(!value.isDirectory);\n\t\t\t\tassert.ok(!value.children);\n\t\t\t\tassert.strictEqual(value.mtime, undefined);\n\t\t\t\tassert.strictEqual(value.ctime, undefined);\n\t\t\t} else if (basename(value.resource) === 'site.css') {\n\t\t\t\tassert.ok(!value.isDirectory);\n\t\t\t\tassert.ok(!value.children);\n\t\t\t\tassert.strictEqual(value.mtime, undefined);\n\t\t\t\tassert.strictEqual(value.ctime, undefined);\n\t\t\t} else {\n\t\t\t\tassert.fail('Unexpected value ' + basename(value.resource));\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('createFile', async () => {\n\t\treturn assertCreateFile(contents => VSBuffer.fromString(contents));\n\t});\n\n\ttest('createFile (readable)', async () => {\n\t\treturn assertCreateFile(contents => bufferToReadable(VSBuffer.fromString(contents)));\n\t});\n\n\ttest('createFile (stream)', async () => {\n\t\treturn assertCreateFile(contents => bufferToStream(VSBuffer.fromString(contents)));\n\t});\n\n\tasync function assertCreateFile(converter: (content: string) => VSBuffer | VSBufferReadable | VSBufferReadableStream): Promise<void> {\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst contents = 'Hello World';\n\t\tconst resource = userdataURIFromPaths(['test.txt']);\n\n\t\tassert.strictEqual(await service.canCreateFile(resource), true);\n\t\tconst fileStat = await service.createFile(resource, converter(contents));\n\t\tassert.strictEqual(fileStat.name, 'test.txt');\n\t\tassert.strictEqual((await userdataFileProvider.stat(fileStat.resource)).type, FileType.File);\n\t\tassert.strictEqual(new TextDecoder().decode(await userdataFileProvider.readFile(fileStat.resource)), contents);\n\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.path, resource.path);\n\t\tassert.strictEqual(event!.operation, FileOperation.CREATE);\n\t\tassert.strictEqual(event!.target!.resource.path, resource.path);\n\t}\n\n\tconst fileCreateBatchTester = (size: number, name: string) => {\n\t\tconst batch = Array.from({ length: size }).map((_, i) => ({ contents: `Hello${i}`, resource: userdataURIFromPaths(['batched', name, `Hello${i}.txt`]) }));\n\t\tlet creationPromises: Promise<any> | undefined = undefined;\n\t\treturn {\n\t\t\tasync create() {\n\t\t\t\treturn creationPromises = Promise.all(batch.map(entry => userdataFileProvider.writeFile(entry.resource, VSBuffer.fromString(entry.contents).buffer, { create: true, overwrite: true, unlock: false, atomic: false })));\n\t\t\t},\n\t\t\tasync assertContentsCorrect() {\n\t\t\t\tif (!creationPromises) { throw Error('read called before create'); }\n\t\t\t\tawait creationPromises;\n\t\t\t\tawait Promise.all(batch.map(async (entry, i) => {\n\t\t\t\t\tassert.strictEqual((await userdataFileProvider.stat(entry.resource)).type, FileType.File);\n\t\t\t\t\tassert.strictEqual(new TextDecoder().decode(await userdataFileProvider.readFile(entry.resource)), entry.contents);\n\t\t\t\t}));\n\t\t\t}\n\t\t};\n\t};\n\n\ttest('createFile - batch', async () => {\n\t\tconst tester = fileCreateBatchTester(20, 'batch');\n\t\tawait tester.create();\n\t\tawait tester.assertContentsCorrect();\n\t});\n\n\ttest('createFile - batch (mixed parallel/sequential)', async () => {\n\t\tconst batch1 = fileCreateBatchTester(1, 'batch1');\n\t\tconst batch2 = fileCreateBatchTester(20, 'batch2');\n\t\tconst batch3 = fileCreateBatchTester(1, 'batch3');\n\t\tconst batch4 = fileCreateBatchTester(20, 'batch4');\n\n\t\tbatch1.create();\n\t\tbatch2.create();\n\t\tawait Promise.all([batch1.assertContentsCorrect(), batch2.assertContentsCorrect()]);\n\t\tbatch3.create();\n\t\tbatch4.create();\n\t\tawait Promise.all([batch3.assertContentsCorrect(), batch4.assertContentsCorrect()]);\n\t\tawait Promise.all([batch1.assertContentsCorrect(), batch2.assertContentsCorrect()]);\n\t});\n\n\ttest('rename not existing resource', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\n\t\ttry {\n\t\t\tawait service.move(sourceFile, targetFile, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileSystemProviderError>error).code, FileSystemProviderErrorCode.FileNotFound);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename to an existing file without overwrite', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.writeFile(sourceFile, VSBuffer.fromString('This is source file'));\n\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\t\tawait service.writeFile(targetFile, VSBuffer.fromString('This is target file'));\n\n\t\ttry {\n\t\t\tawait service.move(sourceFile, targetFile, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename folder to an existing folder without overwrite', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tawait service.createFolder(sourceFolder);\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.createFolder(targetFolder);\n\n\t\ttry {\n\t\t\tawait service.move(sourceFolder, targetFolder, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with cannot overwrite error');\n\t});\n\n\ttest('rename file to a folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.writeFile(sourceFile, VSBuffer.fromString('This is source file'));\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.createFolder(targetFolder);\n\n\t\ttry {\n\t\t\tawait service.move(sourceFile, targetFolder, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename folder to a file', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.createFolder(sourceFolder);\n\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\t\tawait service.writeFile(targetFile, VSBuffer.fromString('This is target file'));\n\n\t\ttry {\n\t\t\tawait service.move(sourceFolder, targetFile, false);\n\t\t} catch (error) {\n\t\t\tassert.deepStrictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_MOVE_CONFLICT);\n\t\t\treturn;\n\t\t}\n\n\t\tassert.fail('This should fail with error');\n\t});\n\n\ttest('rename file', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tawait service.writeFile(sourceFile, VSBuffer.fromString('This is source file'));\n\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\t\tawait service.move(sourceFile, targetFile, false);\n\n\t\tconst content = await service.readFile(targetFile);\n\t\tassert.strictEqual(await service.exists(sourceFile), false);\n\t\tassert.strictEqual(content.value.toString(), 'This is source file');\n\t});\n\n\ttest('rename to an existing file with overwrite', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFile = joinPath(parent.resource, 'sourceFile');\n\t\tconst targetFile = joinPath(parent.resource, 'targetFile');\n\n\t\tawait Promise.all([\n\t\t\tservice.writeFile(sourceFile, VSBuffer.fromString('This is source file')),\n\t\t\tservice.writeFile(targetFile, VSBuffer.fromString('This is target file'))\n\t\t]);\n\n\t\tawait service.move(sourceFile, targetFile, true);\n\n\t\tconst content = await service.readFile(targetFile);\n\t\tassert.strictEqual(await service.exists(sourceFile), false);\n\t\tassert.strictEqual(content.value.toString(), 'This is source file');\n\t});\n\n\ttest('rename folder to a new folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tawait service.createFolder(sourceFolder);\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.move(sourceFolder, targetFolder, false);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t});\n\n\ttest('rename folder to an existing folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tawait service.createFolder(sourceFolder);\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tawait service.createFolder(targetFolder);\n\n\t\tawait service.move(sourceFolder, targetFolder, true);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t});\n\n\ttest('rename a folder that has multiple files and folders', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tconst sourceFile1 = joinPath(sourceFolder, 'folder1', 'file1');\n\t\tconst sourceFile2 = joinPath(sourceFolder, 'folder2', 'file1');\n\t\tconst sourceEmptyFolder = joinPath(sourceFolder, 'folder3');\n\n\t\tawait Promise.all([\n\t\t\tservice.writeFile(sourceFile1, VSBuffer.fromString('Source File 1')),\n\t\t\tservice.writeFile(sourceFile2, VSBuffer.fromString('Source File 2')),\n\t\t\tservice.createFolder(sourceEmptyFolder)\n\t\t]);\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tconst targetFile1 = joinPath(targetFolder, 'folder1', 'file1');\n\t\tconst targetFile2 = joinPath(targetFolder, 'folder2', 'file1');\n\t\tconst targetEmptyFolder = joinPath(targetFolder, 'folder3');\n\n\t\tawait service.move(sourceFolder, targetFolder, false);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t\tassert.strictEqual((await service.readFile(targetFile1)).value.toString(), 'Source File 1');\n\t\tassert.strictEqual((await service.readFile(targetFile2)).value.toString(), 'Source File 2');\n\t\tassert.deepStrictEqual(await service.exists(targetEmptyFolder), true);\n\t});\n\n\ttest('rename a folder to another folder that has some files', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\n\t\tconst sourceFolder = joinPath(parent.resource, 'sourceFolder');\n\t\tconst sourceFile1 = joinPath(sourceFolder, 'folder1', 'file1');\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tconst targetFile1 = joinPath(targetFolder, 'folder1', 'file1');\n\t\tconst targetFile2 = joinPath(targetFolder, 'folder1', 'file2');\n\t\tconst targetFile3 = joinPath(targetFolder, 'folder2', 'file1');\n\n\t\tawait Promise.all([\n\t\t\tservice.writeFile(sourceFile1, VSBuffer.fromString('Source File 1')),\n\t\t\tservice.writeFile(targetFile2, VSBuffer.fromString('Target File 2')),\n\t\t\tservice.writeFile(targetFile3, VSBuffer.fromString('Target File 3'))\n\t\t]);\n\n\t\tawait service.move(sourceFolder, targetFolder, true);\n\n\t\tassert.deepStrictEqual(await service.exists(sourceFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), true);\n\t\tassert.strictEqual((await service.readFile(targetFile1)).value.toString(), 'Source File 1');\n\t\tassert.strictEqual(await service.exists(targetFile2), false);\n\t\tassert.strictEqual(await service.exists(targetFile3), false);\n\t});\n\n\ttest('deleteFile', async () => {\n\t\tawait initFixtures();\n\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst anotherResource = userdataURIFromPaths(['fixtures', 'service', 'deep', 'company.js']);\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'service', 'deep', 'conway.js']);\n\t\tconst source = await service.resolve(resource);\n\n\t\tassert.strictEqual(await service.canDelete(source.resource, { useTrash: false }), true);\n\t\tawait service.del(source.resource, { useTrash: false });\n\n\t\tassert.strictEqual(await service.exists(source.resource), false);\n\t\tassert.strictEqual(await service.exists(anotherResource), true);\n\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.path, resource.path);\n\t\tassert.strictEqual(event!.operation, FileOperation.DELETE);\n\n\t\t{\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait service.del(source.resource, { useTrash: false });\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.strictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_NOT_FOUND);\n\t\t}\n\t\tawait reload();\n\t\t{\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait service.del(source.resource, { useTrash: false });\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.strictEqual((<FileOperationError>error).fileOperationResult, FileOperationResult.FILE_NOT_FOUND);\n\t\t}\n\t});\n\n\ttest('deleteFolder (recursive)', async () => {\n\t\tawait initFixtures();\n\t\tlet event: FileOperationEvent;\n\t\tdisposables.add(service.onDidRunOperation(e => event = e));\n\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'service', 'deep']);\n\t\tconst subResource1 = userdataURIFromPaths(['fixtures', 'service', 'deep', 'company.js']);\n\t\tconst subResource2 = userdataURIFromPaths(['fixtures', 'service', 'deep', 'conway.js']);\n\t\tassert.strictEqual(await service.exists(subResource1), true);\n\t\tassert.strictEqual(await service.exists(subResource2), true);\n\n\t\tconst source = await service.resolve(resource);\n\n\t\tassert.strictEqual(await service.canDelete(source.resource, { recursive: true, useTrash: false }), true);\n\t\tawait service.del(source.resource, { recursive: true, useTrash: false });\n\n\t\tassert.strictEqual(await service.exists(source.resource), false);\n\t\tassert.strictEqual(await service.exists(subResource1), false);\n\t\tassert.strictEqual(await service.exists(subResource2), false);\n\t\tassert.ok(event!);\n\t\tassert.strictEqual(event!.resource.fsPath, resource.fsPath);\n\t\tassert.strictEqual(event!.operation, FileOperation.DELETE);\n\t});\n\n\ttest('deleteFolder (non recursive)', async () => {\n\t\tawait initFixtures();\n\t\tconst resource = userdataURIFromPaths(['fixtures', 'service', 'deep']);\n\t\tconst source = await service.resolve(resource);\n\n\t\tassert.ok((await service.canDelete(source.resource)) instanceof Error);\n\n\t\tlet error;\n\t\ttry {\n\t\t\tawait service.del(source.resource);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\t\tassert.ok(error);\n\t});\n\n\ttest('delete empty folder', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst folder = joinPath(parent.resource, 'folder');\n\t\tawait service.createFolder(folder);\n\n\t\tawait service.del(folder);\n\n\t\tassert.deepStrictEqual(await service.exists(folder), false);\n\t});\n\n\ttest('delete empty folder with reccursive', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\t\tconst folder = joinPath(parent.resource, 'folder');\n\t\tawait service.createFolder(folder);\n\n\t\tawait service.del(folder, { recursive: true });\n\n\t\tassert.deepStrictEqual(await service.exists(folder), false);\n\t});\n\n\ttest('deleteFolder with folders and files (recursive)', async () => {\n\t\tconst parent = await service.resolve(userdataURIFromPaths([]));\n\n\t\tconst targetFolder = joinPath(parent.resource, 'targetFolder');\n\t\tconst file1 = joinPath(targetFolder, 'folder1', 'file1');\n\t\tawait service.createFile(file1);\n\t\tconst file2 = joinPath(targetFolder, 'folder2', 'file1');\n\t\tawait service.createFile(file2);\n\t\tconst emptyFolder = joinPath(targetFolder, 'folder3');\n\t\tawait service.createFolder(emptyFolder);\n\n\t\tawait service.del(targetFolder, { recursive: true });\n\n\t\tassert.deepStrictEqual(await service.exists(targetFolder), false);\n\t\tassert.deepStrictEqual(await service.exists(joinPath(targetFolder, 'folder1')), false);\n\t\tassert.deepStrictEqual(await service.exists(joinPath(targetFolder, 'folder2')), false);\n\t\tassert.deepStrictEqual(await service.exists(file1), false);\n\t\tassert.deepStrictEqual(await service.exists(file2), false);\n\t\tassert.deepStrictEqual(await service.exists(emptyFolder), false);\n\t});\n});\n"]}