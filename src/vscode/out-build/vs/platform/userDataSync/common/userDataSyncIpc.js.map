{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/userDataSync/common/userDataSyncIpc.ts","vs/platform/userDataSync/common/userDataSyncIpc.ts"],"names":[],"mappings":"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","file":"userDataSyncIpc.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IChannel, IServerChannel } from '../../../base/parts/ipc/common/ipc.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IProductService } from '../../product/common/productService.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IUserDataSyncStore, IUserDataSyncStoreManagementService, UserDataSyncStoreType } from './userDataSync.js';\nimport { IUserDataSyncAccount, IUserDataSyncAccountService } from './userDataSyncAccount.js';\nimport { AbstractUserDataSyncStoreManagementService } from './userDataSyncStoreService.js';\n\nexport class UserDataSyncAccountServiceChannel implements IServerChannel {\n\tconstructor(private readonly service: IUserDataSyncAccountService) { }\n\n\tlisten(_: unknown, event: string): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onDidChangeAccount': return this.service.onDidChangeAccount;\n\t\t\tcase 'onTokenFailed': return this.service.onTokenFailed;\n\t\t}\n\t\tthrow new Error(`[UserDataSyncAccountServiceChannel] Event not found: ${event}`);\n\t}\n\n\tcall(context: any, command: string, args?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase '_getInitialData': return Promise.resolve(this.service.account);\n\t\t\tcase 'updateAccount': return this.service.updateAccount(args);\n\t\t}\n\t\tthrow new Error('Invalid call');\n\t}\n}\n\nexport class UserDataSyncAccountServiceChannelClient extends Disposable implements IUserDataSyncAccountService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _account: IUserDataSyncAccount | undefined;\n\tget account(): IUserDataSyncAccount | undefined { return this._account; }\n\n\tget onTokenFailed(): Event<boolean> { return this.channel.listen<boolean>('onTokenFailed'); }\n\n\tprivate _onDidChangeAccount = this._register(new Emitter<IUserDataSyncAccount | undefined>());\n\treadonly onDidChangeAccount = this._onDidChangeAccount.event;\n\n\tconstructor(private readonly channel: IChannel) {\n\t\tsuper();\n\t\tthis.channel.call<IUserDataSyncAccount | undefined>('_getInitialData').then(account => {\n\t\t\tthis._account = account;\n\t\t\tthis._register(this.channel.listen<IUserDataSyncAccount | undefined>('onDidChangeAccount')(account => {\n\t\t\t\tthis._account = account;\n\t\t\t\tthis._onDidChangeAccount.fire(account);\n\t\t\t}));\n\t\t});\n\t}\n\n\tupdateAccount(account: IUserDataSyncAccount | undefined): Promise<undefined> {\n\t\treturn this.channel.call('updateAccount', account);\n\t}\n\n}\n\nexport class UserDataSyncStoreManagementServiceChannel implements IServerChannel {\n\tconstructor(private readonly service: IUserDataSyncStoreManagementService) { }\n\n\tlisten(_: unknown, event: string): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onDidChangeUserDataSyncStore': return this.service.onDidChangeUserDataSyncStore;\n\t\t}\n\t\tthrow new Error(`[UserDataSyncStoreManagementServiceChannel] Event not found: ${event}`);\n\t}\n\n\tcall(context: any, command: string, args?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase 'switch': return this.service.switch(args[0]);\n\t\t\tcase 'getPreviousUserDataSyncStore': return this.service.getPreviousUserDataSyncStore();\n\t\t}\n\t\tthrow new Error('Invalid call');\n\t}\n}\n\nexport class UserDataSyncStoreManagementServiceChannelClient extends AbstractUserDataSyncStoreManagementService implements IUserDataSyncStoreManagementService {\n\n\tconstructor(\n\t\tprivate readonly channel: IChannel,\n\t\t@IProductService productService: IProductService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService storageService: IStorageService,\n\t) {\n\t\tsuper(productService, configurationService, storageService);\n\t\tthis._register(this.channel.listen<void>('onDidChangeUserDataSyncStore')(() => this.updateUserDataSyncStore()));\n\t}\n\n\tasync switch(type: UserDataSyncStoreType): Promise<void> {\n\t\treturn this.channel.call('switch', [type]);\n\t}\n\n\tasync getPreviousUserDataSyncStore(): Promise<IUserDataSyncStore> {\n\t\tconst userDataSyncStore = await this.channel.call<IUserDataSyncStore>('getPreviousUserDataSyncStore');\n\t\treturn this.revive(userDataSyncStore);\n\t}\n\n\tprivate revive(userDataSyncStore: IUserDataSyncStore): IUserDataSyncStore {\n\t\treturn {\n\t\t\turl: URI.revive(userDataSyncStore.url),\n\t\t\ttype: userDataSyncStore.type,\n\t\t\tdefaultUrl: URI.revive(userDataSyncStore.defaultUrl),\n\t\t\tinsidersUrl: URI.revive(userDataSyncStore.insidersUrl),\n\t\t\tstableUrl: URI.revive(userDataSyncStore.stableUrl),\n\t\t\tcanSwitch: userDataSyncStore.canSwitch,\n\t\t\tauthenticationProviders: userDataSyncStore.authenticationProviders,\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IChannel, IServerChannel } from '../../../base/parts/ipc/common/ipc.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IProductService } from '../../product/common/productService.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IUserDataSyncStore, IUserDataSyncStoreManagementService, UserDataSyncStoreType } from './userDataSync.js';\nimport { IUserDataSyncAccount, IUserDataSyncAccountService } from './userDataSyncAccount.js';\nimport { AbstractUserDataSyncStoreManagementService } from './userDataSyncStoreService.js';\n\nexport class UserDataSyncAccountServiceChannel implements IServerChannel {\n\tconstructor(private readonly service: IUserDataSyncAccountService) { }\n\n\tlisten(_: unknown, event: string): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onDidChangeAccount': return this.service.onDidChangeAccount;\n\t\t\tcase 'onTokenFailed': return this.service.onTokenFailed;\n\t\t}\n\t\tthrow new Error(`[UserDataSyncAccountServiceChannel] Event not found: ${event}`);\n\t}\n\n\tcall(context: any, command: string, args?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase '_getInitialData': return Promise.resolve(this.service.account);\n\t\t\tcase 'updateAccount': return this.service.updateAccount(args);\n\t\t}\n\t\tthrow new Error('Invalid call');\n\t}\n}\n\nexport class UserDataSyncAccountServiceChannelClient extends Disposable implements IUserDataSyncAccountService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _account: IUserDataSyncAccount | undefined;\n\tget account(): IUserDataSyncAccount | undefined { return this._account; }\n\n\tget onTokenFailed(): Event<boolean> { return this.channel.listen<boolean>('onTokenFailed'); }\n\n\tprivate _onDidChangeAccount = this._register(new Emitter<IUserDataSyncAccount | undefined>());\n\treadonly onDidChangeAccount = this._onDidChangeAccount.event;\n\n\tconstructor(private readonly channel: IChannel) {\n\t\tsuper();\n\t\tthis.channel.call<IUserDataSyncAccount | undefined>('_getInitialData').then(account => {\n\t\t\tthis._account = account;\n\t\t\tthis._register(this.channel.listen<IUserDataSyncAccount | undefined>('onDidChangeAccount')(account => {\n\t\t\t\tthis._account = account;\n\t\t\t\tthis._onDidChangeAccount.fire(account);\n\t\t\t}));\n\t\t});\n\t}\n\n\tupdateAccount(account: IUserDataSyncAccount | undefined): Promise<undefined> {\n\t\treturn this.channel.call('updateAccount', account);\n\t}\n\n}\n\nexport class UserDataSyncStoreManagementServiceChannel implements IServerChannel {\n\tconstructor(private readonly service: IUserDataSyncStoreManagementService) { }\n\n\tlisten(_: unknown, event: string): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onDidChangeUserDataSyncStore': return this.service.onDidChangeUserDataSyncStore;\n\t\t}\n\t\tthrow new Error(`[UserDataSyncStoreManagementServiceChannel] Event not found: ${event}`);\n\t}\n\n\tcall(context: any, command: string, args?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase 'switch': return this.service.switch(args[0]);\n\t\t\tcase 'getPreviousUserDataSyncStore': return this.service.getPreviousUserDataSyncStore();\n\t\t}\n\t\tthrow new Error('Invalid call');\n\t}\n}\n\nexport class UserDataSyncStoreManagementServiceChannelClient extends AbstractUserDataSyncStoreManagementService implements IUserDataSyncStoreManagementService {\n\n\tconstructor(\n\t\tprivate readonly channel: IChannel,\n\t\t@IProductService productService: IProductService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService storageService: IStorageService,\n\t) {\n\t\tsuper(productService, configurationService, storageService);\n\t\tthis._register(this.channel.listen<void>('onDidChangeUserDataSyncStore')(() => this.updateUserDataSyncStore()));\n\t}\n\n\tasync switch(type: UserDataSyncStoreType): Promise<void> {\n\t\treturn this.channel.call('switch', [type]);\n\t}\n\n\tasync getPreviousUserDataSyncStore(): Promise<IUserDataSyncStore> {\n\t\tconst userDataSyncStore = await this.channel.call<IUserDataSyncStore>('getPreviousUserDataSyncStore');\n\t\treturn this.revive(userDataSyncStore);\n\t}\n\n\tprivate revive(userDataSyncStore: IUserDataSyncStore): IUserDataSyncStore {\n\t\treturn {\n\t\t\turl: URI.revive(userDataSyncStore.url),\n\t\t\ttype: userDataSyncStore.type,\n\t\t\tdefaultUrl: URI.revive(userDataSyncStore.defaultUrl),\n\t\t\tinsidersUrl: URI.revive(userDataSyncStore.insidersUrl),\n\t\t\tstableUrl: URI.revive(userDataSyncStore.stableUrl),\n\t\t\tcanSwitch: userDataSyncStore.canSwitch,\n\t\t\tauthenticationProviders: userDataSyncStore.authenticationProviders,\n\t\t};\n\t}\n}\n"]}