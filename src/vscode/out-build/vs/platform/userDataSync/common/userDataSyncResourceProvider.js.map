{"version":3,"sources":["vs/platform/userDataSync/common/userDataSyncResourceProvider.ts"],"names":[],"mappings":"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","file":"userDataSyncResourceProvider.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IExtUri } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { getServiceMachineId } from '../../externalServices/common/serviceMachineId.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IUriIdentityService } from '../../uriIdentity/common/uriIdentity.js';\nimport { ISyncData, ISyncResourceHandle, IUserData, IUserDataSyncLocalStoreService, IUserDataSyncLogService, IUserDataSyncStoreService, SyncResource, UserDataSyncError, UserDataSyncErrorCode, USER_DATA_SYNC_SCHEME, IUserDataSyncResourceProviderService, ISyncUserDataProfile, CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM, IUserDataSyncResource } from './userDataSync.js';\nimport { IUserDataProfile, IUserDataProfilesService } from '../../userDataProfile/common/userDataProfile.js';\nimport { isSyncData } from './abstractSynchronizer.js';\nimport { parseSnippets } from './snippetsSync.js';\nimport { parseSettingsSyncContent } from './settingsSync.js';\nimport { getKeybindingsContentFromSyncContent } from './keybindingsSync.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { getTasksContentFromSyncContent } from './tasksSync.js';\nimport { getMcpContentFromSyncContent } from './mcpSync.js';\nimport { LocalExtensionsProvider, parseExtensions, stringify as stringifyExtensions } from './extensionsSync.js';\nimport { LocalGlobalStateProvider, stringify as stringifyGlobalState } from './globalStateSync.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { parseUserDataProfilesManifest, stringifyLocalProfiles } from './userDataProfilesManifestSync.js';\nimport { toFormattedString } from '../../../base/common/jsonFormatter.js';\nimport { trim } from '../../../base/common/strings.js';\nimport { IMachinesData, IUserDataSyncMachine } from './userDataSyncMachines.js';\nimport { parsePrompts } from './promptsSync/promptsSync.js';\n\ninterface ISyncResourceUriInfo {\n\treadonly remote: boolean;\n\treadonly syncResource: SyncResource;\n\treadonly profile: string;\n\treadonly collection: string | undefined;\n\treadonly ref: string | undefined;\n\treadonly node: string | undefined;\n\treadonly location: URI | undefined;\n}\n\nexport class UserDataSyncResourceProviderService implements IUserDataSyncResourceProviderService {\n\n\t_serviceBrand: undefined;\n\n\tprivate static readonly NOT_EXISTING_RESOURCE = 'not-existing-resource';\n\tprivate static readonly REMOTE_BACKUP_AUTHORITY = 'remote-backup';\n\tprivate static readonly LOCAL_BACKUP_AUTHORITY = 'local-backup';\n\n\tprivate readonly extUri: IExtUri;\n\n\tconstructor(\n\t\t@IUserDataSyncStoreService private readonly userDataSyncStoreService: IUserDataSyncStoreService,\n\t\t@IUserDataSyncLocalStoreService private readonly userDataSyncLocalStoreService: IUserDataSyncLocalStoreService,\n\t\t@IUserDataSyncLogService protected readonly logService: IUserDataSyncLogService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tthis.extUri = uriIdentityService.extUri;\n\t}\n\n\tasync getRemoteSyncedProfiles(): Promise<ISyncUserDataProfile[]> {\n\t\tconst userData = await this.userDataSyncStoreService.readResource(SyncResource.Profiles, null, undefined);\n\t\tif (userData.content) {\n\t\t\tconst syncData = this.parseSyncData(userData.content, SyncResource.Profiles);\n\t\t\treturn parseUserDataProfilesManifest(syncData);\n\t\t}\n\t\treturn [];\n\t}\n\n\tasync getLocalSyncedProfiles(location?: URI): Promise<ISyncUserDataProfile[]> {\n\t\tconst refs = await this.userDataSyncLocalStoreService.getAllResourceRefs(SyncResource.Profiles, undefined, location);\n\t\tif (refs.length) {\n\t\t\tconst content = await this.userDataSyncLocalStoreService.resolveResourceContent(SyncResource.Profiles, refs[0].ref, undefined, location);\n\t\t\tif (content) {\n\t\t\t\tconst syncData = this.parseSyncData(content, SyncResource.Profiles);\n\t\t\t\treturn parseUserDataProfilesManifest(syncData);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tasync getLocalSyncedMachines(location?: URI): Promise<IUserDataSyncMachine[]> {\n\t\tconst refs = await this.userDataSyncLocalStoreService.getAllResourceRefs('machines', undefined, location);\n\t\tif (refs.length) {\n\t\t\tconst content = await this.userDataSyncLocalStoreService.resolveResourceContent('machines', refs[0].ref, undefined, location);\n\t\t\tif (content) {\n\t\t\t\tconst machinesData: IMachinesData = JSON.parse(content);\n\t\t\t\treturn machinesData.machines.map(m => ({ ...m, isCurrent: false }));\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tasync getRemoteSyncResourceHandles(syncResource: SyncResource, profile?: ISyncUserDataProfile): Promise<ISyncResourceHandle[]> {\n\t\tconst handles = await this.userDataSyncStoreService.getAllResourceRefs(syncResource, profile?.collection);\n\t\treturn handles.map(({ created, ref }) => ({\n\t\t\tcreated,\n\t\t\turi: this.toUri({\n\t\t\t\tremote: true,\n\t\t\t\tsyncResource,\n\t\t\t\tprofile: profile?.id ?? this.userDataProfilesService.defaultProfile.id,\n\t\t\t\tlocation: undefined,\n\t\t\t\tcollection: profile?.collection,\n\t\t\t\tref,\n\t\t\t\tnode: undefined,\n\t\t\t})\n\t\t}));\n\t}\n\n\tasync getLocalSyncResourceHandles(syncResource: SyncResource, profile?: ISyncUserDataProfile, location?: URI): Promise<ISyncResourceHandle[]> {\n\t\tconst handles = await this.userDataSyncLocalStoreService.getAllResourceRefs(syncResource, profile?.collection, location);\n\t\treturn handles.map(({ created, ref }) => ({\n\t\t\tcreated,\n\t\t\turi: this.toUri({\n\t\t\t\tremote: false,\n\t\t\t\tsyncResource,\n\t\t\t\tprofile: profile?.id ?? this.userDataProfilesService.defaultProfile.id,\n\t\t\t\tcollection: profile?.collection,\n\t\t\t\tref,\n\t\t\t\tnode: undefined,\n\t\t\t\tlocation,\n\t\t\t})\n\t\t}));\n\t}\n\n\tresolveUserDataSyncResource({ uri }: ISyncResourceHandle): IUserDataSyncResource | undefined {\n\t\tconst resolved = this.resolveUri(uri);\n\t\tconst profile = resolved ? this.userDataProfilesService.profiles.find(p => p.id === resolved.profile) : undefined;\n\t\treturn resolved && profile ? { profile, syncResource: resolved?.syncResource } : undefined;\n\t}\n\n\tasync getAssociatedResources({ uri }: ISyncResourceHandle): Promise<{ resource: URI; comparableResource: URI }[]> {\n\t\tconst resolved = this.resolveUri(uri);\n\t\tif (!resolved) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst profile = this.userDataProfilesService.profiles.find(p => p.id === resolved.profile);\n\t\tswitch (resolved.syncResource) {\n\t\t\tcase SyncResource.Settings: return this.getSettingsAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Keybindings: return this.getKeybindingsAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Tasks: return this.getTasksAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Mcp: return this.getMcpAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Snippets: return this.getSnippetsAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Prompts: return this.getPromptsAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.GlobalState: return this.getGlobalStateAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Extensions: return this.getExtensionsAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.Profiles: return this.getProfilesAssociatedResources(uri, profile);\n\t\t\tcase SyncResource.WorkspaceState: return [];\n\t\t}\n\t}\n\n\tasync getMachineId({ uri }: ISyncResourceHandle): Promise<string | undefined> {\n\t\tconst resolved = this.resolveUri(uri);\n\t\tif (!resolved) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (resolved.remote) {\n\t\t\tif (resolved.ref) {\n\t\t\t\tconst { content } = await this.getUserData(resolved.syncResource, resolved.ref, resolved.collection);\n\t\t\t\tif (content) {\n\t\t\t\t\tconst syncData = this.parseSyncData(content, resolved.syncResource);\n\t\t\t\t\treturn syncData?.machineId;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (resolved.location) {\n\t\t\tif (resolved.ref) {\n\t\t\t\tconst content = await this.userDataSyncLocalStoreService.resolveResourceContent(resolved.syncResource, resolved.ref, resolved.collection, resolved.location);\n\t\t\t\tif (content) {\n\t\t\t\t\tconst syncData = this.parseSyncData(content, resolved.syncResource);\n\t\t\t\t\treturn syncData?.machineId;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn getServiceMachineId(this.environmentService, this.fileService, this.storageService);\n\t}\n\n\tasync resolveContent(uri: URI): Promise<string | null> {\n\t\tconst resolved = this.resolveUri(uri);\n\t\tif (!resolved) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (resolved.node === UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (resolved.ref) {\n\t\t\tconst content = await this.getContentFromStore(resolved.remote, resolved.syncResource, resolved.collection, resolved.ref, resolved.location);\n\t\t\tif (resolved.node && content) {\n\t\t\t\treturn this.resolveNodeContent(resolved.syncResource, content, resolved.node);\n\t\t\t}\n\t\t\treturn content;\n\t\t}\n\n\t\tif (!resolved.remote && !resolved.node) {\n\t\t\treturn this.resolveLatestContent(resolved.syncResource, resolved.profile);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate async getContentFromStore(remote: boolean, syncResource: SyncResource, collection: string | undefined, ref: string, location?: URI): Promise<string | null> {\n\t\tif (remote) {\n\t\t\tconst { content } = await this.getUserData(syncResource, ref, collection);\n\t\t\treturn content;\n\t\t}\n\t\treturn this.userDataSyncLocalStoreService.resolveResourceContent(syncResource, ref, collection, location);\n\t}\n\n\tprivate resolveNodeContent(syncResource: SyncResource, content: string, node: string): string | null {\n\t\tconst syncData = this.parseSyncData(content, syncResource);\n\t\tswitch (syncResource) {\n\t\t\tcase SyncResource.Settings: return this.resolveSettingsNodeContent(syncData, node);\n\t\t\tcase SyncResource.Keybindings: return this.resolveKeybindingsNodeContent(syncData, node);\n\t\t\tcase SyncResource.Tasks: return this.resolveTasksNodeContent(syncData, node);\n\t\t\tcase SyncResource.Mcp: return this.resolveMcpNodeContent(syncData, node);\n\t\t\tcase SyncResource.Snippets: return this.resolveSnippetsNodeContent(syncData, node);\n\t\t\tcase SyncResource.Prompts: return this.resolvePromptsNodeContent(syncData, node);\n\t\t\tcase SyncResource.GlobalState: return this.resolveGlobalStateNodeContent(syncData, node);\n\t\t\tcase SyncResource.Extensions: return this.resolveExtensionsNodeContent(syncData, node);\n\t\t\tcase SyncResource.Profiles: return this.resolveProfileNodeContent(syncData, node);\n\t\t\tcase SyncResource.WorkspaceState: return null;\n\t\t}\n\t}\n\n\tprivate async resolveLatestContent(syncResource: SyncResource, profileId: string): Promise<string | null> {\n\t\tconst profile = this.userDataProfilesService.profiles.find(p => p.id === profileId);\n\t\tif (!profile) {\n\t\t\treturn null;\n\t\t}\n\t\tswitch (syncResource) {\n\t\t\tcase SyncResource.GlobalState: return this.resolveLatestGlobalStateContent(profile);\n\t\t\tcase SyncResource.Extensions: return this.resolveLatestExtensionsContent(profile);\n\t\t\tcase SyncResource.Profiles: return this.resolveLatestProfilesContent(profile);\n\t\t\tcase SyncResource.Settings: return null;\n\t\t\tcase SyncResource.Keybindings: return null;\n\t\t\tcase SyncResource.Tasks: return null;\n\t\t\tcase SyncResource.Mcp: return null;\n\t\t\tcase SyncResource.Snippets: return null;\n\t\t\tcase SyncResource.Prompts: return null;\n\t\t\tcase SyncResource.WorkspaceState: return null;\n\t\t}\n\t}\n\n\tprivate getSettingsAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'settings.json');\n\t\tconst comparableResource = profile ? profile.settingsResource : this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveSettingsNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'settings.json':\n\t\t\t\treturn parseSettingsSyncContent(syncData.content).settings;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate getKeybindingsAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'keybindings.json');\n\t\tconst comparableResource = profile ? profile.keybindingsResource : this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveKeybindingsNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'keybindings.json':\n\t\t\t\treturn getKeybindingsContentFromSyncContent(syncData.content, !!this.configurationService.getValue(CONFIG_SYNC_KEYBINDINGS_PER_PLATFORM), this.logService);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate getTasksAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'tasks.json');\n\t\tconst comparableResource = profile ? profile.tasksResource : this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveTasksNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'tasks.json':\n\t\t\t\treturn getTasksContentFromSyncContent(syncData.content, this.logService);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate async getSnippetsAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): Promise<{ resource: URI; comparableResource: URI }[]> {\n\t\tconst content = await this.resolveContent(uri);\n\t\tif (content) {\n\t\t\tconst syncData = this.parseSyncData(content, SyncResource.Snippets);\n\t\t\tif (syncData) {\n\t\t\t\tconst snippets = parseSnippets(syncData);\n\t\t\t\tconst result = [];\n\t\t\t\tfor (const snippet of Object.keys(snippets)) {\n\t\t\t\t\tconst resource = this.extUri.joinPath(uri, snippet);\n\t\t\t\t\tconst comparableResource = profile ? this.extUri.joinPath(profile.snippetsHome, snippet) : this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\t\t\t\tresult.push({ resource, comparableResource });\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate resolveSnippetsNodeContent(syncData: ISyncData, node: string): string | null {\n\t\treturn parseSnippets(syncData)[node] || null;\n\t}\n\n\tprivate async getPromptsAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): Promise<{ resource: URI; comparableResource: URI }[]> {\n\t\tconst content = await this.resolveContent(uri);\n\t\tif (content) {\n\t\t\tconst syncData = this.parseSyncData(content, SyncResource.Prompts);\n\t\t\tif (syncData) {\n\t\t\t\tconst prompts = parsePrompts(syncData);\n\t\t\t\tconst result = [];\n\t\t\t\tfor (const prompt of Object.keys(prompts)) {\n\t\t\t\t\tconst resource = this.extUri.joinPath(uri, prompt);\n\t\t\t\t\tconst comparableResource = (profile)\n\t\t\t\t\t\t? this.extUri.joinPath(profile.promptsHome, prompt)\n\t\t\t\t\t\t: this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\t\t\t\tresult.push({ resource, comparableResource });\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate resolvePromptsNodeContent(syncData: ISyncData, node: string): string | null {\n\t\treturn parsePrompts(syncData)[node] || null;\n\t}\n\n\tprivate getExtensionsAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'extensions.json');\n\t\tconst comparableResource = profile\n\t\t\t? this.toUri({\n\t\t\t\tremote: false,\n\t\t\t\tsyncResource: SyncResource.Extensions,\n\t\t\t\tprofile: profile.id,\n\t\t\t\tlocation: undefined,\n\t\t\t\tcollection: undefined,\n\t\t\t\tref: undefined,\n\t\t\t\tnode: undefined,\n\t\t\t})\n\t\t\t: this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveExtensionsNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'extensions.json':\n\t\t\t\treturn stringifyExtensions(parseExtensions(syncData), true);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate async resolveLatestExtensionsContent(profile: IUserDataProfile): Promise<string | null> {\n\t\tconst { localExtensions } = await this.instantiationService.createInstance(LocalExtensionsProvider).getLocalExtensions(profile);\n\t\treturn stringifyExtensions(localExtensions, true);\n\t}\n\n\tprivate getGlobalStateAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'globalState.json');\n\t\tconst comparableResource = profile\n\t\t\t? this.toUri({\n\t\t\t\tremote: false,\n\t\t\t\tsyncResource: SyncResource.GlobalState,\n\t\t\t\tprofile: profile.id,\n\t\t\t\tlocation: undefined,\n\t\t\t\tcollection: undefined,\n\t\t\t\tref: undefined,\n\t\t\t\tnode: undefined,\n\t\t\t})\n\t\t\t: this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveGlobalStateNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'globalState.json':\n\t\t\t\treturn stringifyGlobalState(JSON.parse(syncData.content), true);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate async resolveLatestGlobalStateContent(profile: IUserDataProfile): Promise<string | null> {\n\t\tconst localGlobalState = await this.instantiationService.createInstance(LocalGlobalStateProvider).getLocalGlobalState(profile);\n\t\treturn stringifyGlobalState(localGlobalState, true);\n\t}\n\n\tprivate getProfilesAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'profiles.json');\n\t\tconst comparableResource = this.toUri({\n\t\t\tremote: false,\n\t\t\tsyncResource: SyncResource.Profiles,\n\t\t\tprofile: this.userDataProfilesService.defaultProfile.id,\n\t\t\tlocation: undefined,\n\t\t\tcollection: undefined,\n\t\t\tref: undefined,\n\t\t\tnode: undefined,\n\t\t});\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveProfileNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'profiles.json':\n\t\t\t\treturn toFormattedString(JSON.parse(syncData.content), {});\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate async resolveLatestProfilesContent(profile: IUserDataProfile): Promise<string | null> {\n\t\treturn stringifyLocalProfiles(this.userDataProfilesService.profiles.filter(p => !p.isDefault && !p.isTransient), true);\n\t}\n\n\tprivate toUri(syncResourceUriInfo: ISyncResourceUriInfo): URI {\n\t\tconst authority = syncResourceUriInfo.remote ? UserDataSyncResourceProviderService.REMOTE_BACKUP_AUTHORITY : UserDataSyncResourceProviderService.LOCAL_BACKUP_AUTHORITY;\n\t\tconst paths = [];\n\t\tif (syncResourceUriInfo.location) {\n\t\t\tpaths.push(`scheme:${syncResourceUriInfo.location.scheme}`);\n\t\t\tpaths.push(`authority:${syncResourceUriInfo.location.authority}`);\n\t\t\tpaths.push(trim(syncResourceUriInfo.location.path, '/'));\n\t\t}\n\t\tpaths.push(`syncResource:${syncResourceUriInfo.syncResource}`);\n\t\tpaths.push(`profile:${syncResourceUriInfo.profile}`);\n\t\tif (syncResourceUriInfo.collection) {\n\t\t\tpaths.push(`collection:${syncResourceUriInfo.collection}`);\n\t\t}\n\t\tif (syncResourceUriInfo.ref) {\n\t\t\tpaths.push(`ref:${syncResourceUriInfo.ref}`);\n\t\t}\n\t\tif (syncResourceUriInfo.node) {\n\t\t\tpaths.push(syncResourceUriInfo.node);\n\t\t}\n\t\treturn this.extUri.joinPath(URI.from({ scheme: USER_DATA_SYNC_SCHEME, authority, path: `/`, query: syncResourceUriInfo.location?.query, fragment: syncResourceUriInfo.location?.fragment }), ...paths);\n\t}\n\n\tprivate resolveUri(uri: URI): ISyncResourceUriInfo | undefined {\n\t\tif (uri.scheme !== USER_DATA_SYNC_SCHEME) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst paths: string[] = [];\n\t\twhile (uri.path !== '/') {\n\t\t\tpaths.unshift(this.extUri.basename(uri));\n\t\t\turi = this.extUri.dirname(uri);\n\t\t}\n\t\tif (paths.length < 2) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst remote = uri.authority === UserDataSyncResourceProviderService.REMOTE_BACKUP_AUTHORITY;\n\t\tlet scheme: string | undefined;\n\t\tlet authority: string | undefined;\n\t\tconst locationPaths: string[] = [];\n\t\tlet syncResource: SyncResource | undefined;\n\t\tlet profile: string | undefined;\n\t\tlet collection: string | undefined;\n\t\tlet ref: string | undefined;\n\t\tlet node: string | undefined;\n\t\twhile (paths.length) {\n\t\t\tconst path = paths.shift()!;\n\t\t\tif (path.startsWith('scheme:')) {\n\t\t\t\tscheme = path.substring('scheme:'.length);\n\t\t\t} else if (path.startsWith('authority:')) {\n\t\t\t\tauthority = path.substring('authority:'.length);\n\t\t\t} else if (path.startsWith('syncResource:')) {\n\t\t\t\tsyncResource = path.substring('syncResource:'.length) as SyncResource;\n\t\t\t} else if (path.startsWith('profile:')) {\n\t\t\t\tprofile = path.substring('profile:'.length);\n\t\t\t} else if (path.startsWith('collection:')) {\n\t\t\t\tcollection = path.substring('collection:'.length);\n\t\t\t} else if (path.startsWith('ref:')) {\n\t\t\t\tref = path.substring('ref:'.length);\n\t\t\t} else if (!syncResource) {\n\t\t\t\tlocationPaths.push(path);\n\t\t\t} else {\n\t\t\t\tnode = path;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tremote,\n\t\t\tsyncResource: syncResource!,\n\t\t\tprofile: profile!,\n\t\t\tcollection,\n\t\t\tref,\n\t\t\tnode,\n\t\t\tlocation: scheme && authority !== undefined ? this.extUri.joinPath(URI.from({ scheme, authority, query: uri.query, fragment: uri.fragment, path: '/' }), ...locationPaths) : undefined\n\t\t};\n\t}\n\n\tprivate parseSyncData(content: string, syncResource: SyncResource): ISyncData {\n\t\ttry {\n\t\t\tconst syncData: ISyncData = JSON.parse(content);\n\t\t\tif (isSyncData(syncData)) {\n\t\t\t\treturn syncData;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\t\t}\n\t\tthrow new UserDataSyncError(localize('incompatible sync data', \"Cannot parse sync data as it is not compatible with the current version.\"), UserDataSyncErrorCode.IncompatibleRemoteContent, syncResource);\n\t}\n\n\tprivate async getUserData(syncResource: SyncResource, ref: string, collection?: string): Promise<IUserData> {\n\t\tconst content = await this.userDataSyncStoreService.resolveResourceContent(syncResource, ref, collection);\n\t\treturn { ref, content };\n\t}\n\n\tprivate getMcpAssociatedResources(uri: URI, profile: IUserDataProfile | undefined): { resource: URI; comparableResource: URI }[] {\n\t\tconst resource = this.extUri.joinPath(uri, 'mcp.json');\n\t\tconst comparableResource = profile ? profile.mcpResource : this.extUri.joinPath(uri, UserDataSyncResourceProviderService.NOT_EXISTING_RESOURCE);\n\t\treturn [{ resource, comparableResource }];\n\t}\n\n\tprivate resolveMcpNodeContent(syncData: ISyncData, node: string): string | null {\n\t\tswitch (node) {\n\t\t\tcase 'mcp.json':\n\t\t\t\treturn getMcpContentFromSyncContent(syncData.content, this.logService);\n\t\t}\n\t\treturn null;\n\t}\n\n}\n"]}