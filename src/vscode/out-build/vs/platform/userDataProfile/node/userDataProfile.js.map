{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/userDataProfile/node/userDataProfile.ts","vs/platform/userDataProfile/node/userDataProfile.ts"],"names":[],"mappings":"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","file":"userDataProfile.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriDto } from '../../../base/common/uri.js';\nimport { INativeEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IStateReadService, IStateService } from '../../state/node/state.js';\nimport { IUriIdentityService } from '../../uriIdentity/common/uriIdentity.js';\nimport { IUserDataProfilesService, UserDataProfilesService as BaseUserDataProfilesService, StoredUserDataProfile, StoredProfileAssociations } from '../common/userDataProfile.js';\nimport { isString } from '../../../base/common/types.js';\nimport { SaveStrategy, StateService } from '../../state/node/stateService.js';\n\ntype StoredUserDataProfileState = StoredUserDataProfile & { location: URI | string };\n\nexport class UserDataProfilesReadonlyService extends BaseUserDataProfilesService implements IUserDataProfilesService {\n\n\tconstructor(\n\t\t@IStateReadService private readonly stateReadonlyService: IStateReadService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@INativeEnvironmentService private readonly nativeEnvironmentService: INativeEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(nativeEnvironmentService, fileService, uriIdentityService, logService);\n\t}\n\n\tprotected override getStoredProfiles(): StoredUserDataProfile[] {\n\t\tconst storedProfilesState = this.stateReadonlyService.getItem<UriDto<StoredUserDataProfileState>[]>(UserDataProfilesReadonlyService.PROFILES_KEY, []);\n\t\treturn storedProfilesState.map(p => ({ ...p, location: isString(p.location) ? this.uriIdentityService.extUri.joinPath(this.profilesHome, p.location) : URI.revive(p.location) }));\n\t}\n\n\tprotected override getStoredProfileAssociations(): StoredProfileAssociations {\n\t\treturn this.stateReadonlyService.getItem<StoredProfileAssociations>(UserDataProfilesReadonlyService.PROFILE_ASSOCIATIONS_KEY, {});\n\t}\n\n\tprotected override getDefaultProfileExtensionsLocation(): URI {\n\t\treturn this.uriIdentityService.extUri.joinPath(URI.file(this.nativeEnvironmentService.extensionsPath).with({ scheme: this.profilesHome.scheme }), 'extensions.json');\n\t}\n\n}\n\nexport class UserDataProfilesService extends UserDataProfilesReadonlyService implements IUserDataProfilesService {\n\n\tconstructor(\n\t\t@IStateService protected readonly stateService: IStateService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@INativeEnvironmentService environmentService: INativeEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(stateService, uriIdentityService, environmentService, fileService, logService);\n\t}\n\n\tprotected override saveStoredProfiles(storedProfiles: StoredUserDataProfile[]): void {\n\t\tif (storedProfiles.length) {\n\t\t\tthis.stateService.setItem(UserDataProfilesService.PROFILES_KEY, storedProfiles.map(profile => ({ ...profile, location: this.uriIdentityService.extUri.basename(profile.location) })));\n\t\t} else {\n\t\t\tthis.stateService.removeItem(UserDataProfilesService.PROFILES_KEY);\n\t\t}\n\t}\n\n\tprotected override saveStoredProfileAssociations(storedProfileAssociations: StoredProfileAssociations): void {\n\t\tif (storedProfileAssociations.emptyWindows || storedProfileAssociations.workspaces) {\n\t\t\tthis.stateService.setItem(UserDataProfilesService.PROFILE_ASSOCIATIONS_KEY, storedProfileAssociations);\n\t\t} else {\n\t\t\tthis.stateService.removeItem(UserDataProfilesService.PROFILE_ASSOCIATIONS_KEY);\n\t\t}\n\t}\n}\n\nexport class ServerUserDataProfilesService extends UserDataProfilesService implements IUserDataProfilesService {\n\n\tconstructor(\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@INativeEnvironmentService environmentService: INativeEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(new StateService(SaveStrategy.IMMEDIATE, environmentService, logService, fileService), uriIdentityService, environmentService, fileService, logService);\n\t}\n\n\toverride async init(): Promise<void> {\n\t\tawait (this.stateService as StateService).init();\n\t\treturn super.init();\n\t}\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriDto } from '../../../base/common/uri.js';\nimport { INativeEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IStateReadService, IStateService } from '../../state/node/state.js';\nimport { IUriIdentityService } from '../../uriIdentity/common/uriIdentity.js';\nimport { IUserDataProfilesService, UserDataProfilesService as BaseUserDataProfilesService, StoredUserDataProfile, StoredProfileAssociations } from '../common/userDataProfile.js';\nimport { isString } from '../../../base/common/types.js';\nimport { SaveStrategy, StateService } from '../../state/node/stateService.js';\n\ntype StoredUserDataProfileState = StoredUserDataProfile & { location: URI | string };\n\nexport class UserDataProfilesReadonlyService extends BaseUserDataProfilesService implements IUserDataProfilesService {\n\n\tconstructor(\n\t\t@IStateReadService private readonly stateReadonlyService: IStateReadService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@INativeEnvironmentService private readonly nativeEnvironmentService: INativeEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(nativeEnvironmentService, fileService, uriIdentityService, logService);\n\t}\n\n\tprotected override getStoredProfiles(): StoredUserDataProfile[] {\n\t\tconst storedProfilesState = this.stateReadonlyService.getItem<UriDto<StoredUserDataProfileState>[]>(UserDataProfilesReadonlyService.PROFILES_KEY, []);\n\t\treturn storedProfilesState.map(p => ({ ...p, location: isString(p.location) ? this.uriIdentityService.extUri.joinPath(this.profilesHome, p.location) : URI.revive(p.location) }));\n\t}\n\n\tprotected override getStoredProfileAssociations(): StoredProfileAssociations {\n\t\treturn this.stateReadonlyService.getItem<StoredProfileAssociations>(UserDataProfilesReadonlyService.PROFILE_ASSOCIATIONS_KEY, {});\n\t}\n\n\tprotected override getDefaultProfileExtensionsLocation(): URI {\n\t\treturn this.uriIdentityService.extUri.joinPath(URI.file(this.nativeEnvironmentService.extensionsPath).with({ scheme: this.profilesHome.scheme }), 'extensions.json');\n\t}\n\n}\n\nexport class UserDataProfilesService extends UserDataProfilesReadonlyService implements IUserDataProfilesService {\n\n\tconstructor(\n\t\t@IStateService protected readonly stateService: IStateService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@INativeEnvironmentService environmentService: INativeEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(stateService, uriIdentityService, environmentService, fileService, logService);\n\t}\n\n\tprotected override saveStoredProfiles(storedProfiles: StoredUserDataProfile[]): void {\n\t\tif (storedProfiles.length) {\n\t\t\tthis.stateService.setItem(UserDataProfilesService.PROFILES_KEY, storedProfiles.map(profile => ({ ...profile, location: this.uriIdentityService.extUri.basename(profile.location) })));\n\t\t} else {\n\t\t\tthis.stateService.removeItem(UserDataProfilesService.PROFILES_KEY);\n\t\t}\n\t}\n\n\tprotected override saveStoredProfileAssociations(storedProfileAssociations: StoredProfileAssociations): void {\n\t\tif (storedProfileAssociations.emptyWindows || storedProfileAssociations.workspaces) {\n\t\t\tthis.stateService.setItem(UserDataProfilesService.PROFILE_ASSOCIATIONS_KEY, storedProfileAssociations);\n\t\t} else {\n\t\t\tthis.stateService.removeItem(UserDataProfilesService.PROFILE_ASSOCIATIONS_KEY);\n\t\t}\n\t}\n}\n\nexport class ServerUserDataProfilesService extends UserDataProfilesService implements IUserDataProfilesService {\n\n\tconstructor(\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@INativeEnvironmentService environmentService: INativeEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(new StateService(SaveStrategy.IMMEDIATE, environmentService, logService, fileService), uriIdentityService, environmentService, fileService, logService);\n\t}\n\n\toverride async init(): Promise<void> {\n\t\tawait (this.stateService as StateService).init();\n\t\treturn super.init();\n\t}\n\n}\n"]}