{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/contextkey/test/common/contextkey.test.ts","vs/platform/contextkey/test/common/contextkey.test.ts"],"names":[],"mappings":"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","file":"contextkey.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { isLinux, isMacintosh, isWindows } from '../../../../base/common/platform.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ContextKeyExpr, ContextKeyExpression, implies } from '../../common/contextkey.js';\n\nfunction createContext(ctx: any) {\n\treturn {\n\t\tgetValue: (key: string) => {\n\t\t\treturn ctx[key];\n\t\t}\n\t};\n}\n\nsuite('ContextKeyExpr', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('ContextKeyExpr.equals', () => {\n\t\tconst a = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('a1'),\n\t\t\tContextKeyExpr.and(ContextKeyExpr.has('and.a')),\n\t\t\tContextKeyExpr.has('a2'),\n\t\t\tContextKeyExpr.regex('d3', /d.*/),\n\t\t\tContextKeyExpr.regex('d4', /\\*\\*3*/),\n\t\t\tContextKeyExpr.equals('b1', 'bb1'),\n\t\t\tContextKeyExpr.equals('b2', 'bb2'),\n\t\t\tContextKeyExpr.notEquals('c1', 'cc1'),\n\t\t\tContextKeyExpr.notEquals('c2', 'cc2'),\n\t\t\tContextKeyExpr.not('d1'),\n\t\t\tContextKeyExpr.not('d2')\n\t\t)!;\n\t\tconst b = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.equals('b2', 'bb2'),\n\t\t\tContextKeyExpr.notEquals('c1', 'cc1'),\n\t\t\tContextKeyExpr.not('d1'),\n\t\t\tContextKeyExpr.regex('d4', /\\*\\*3*/),\n\t\t\tContextKeyExpr.notEquals('c2', 'cc2'),\n\t\t\tContextKeyExpr.has('a2'),\n\t\t\tContextKeyExpr.equals('b1', 'bb1'),\n\t\t\tContextKeyExpr.regex('d3', /d.*/),\n\t\t\tContextKeyExpr.has('a1'),\n\t\t\tContextKeyExpr.and(ContextKeyExpr.equals('and.a', true)),\n\t\t\tContextKeyExpr.not('d2')\n\t\t)!;\n\t\tassert(a.equals(b), 'expressions should be equal');\n\t});\n\n\ttest('issue #134942: Equals in comparator expressions', () => {\n\t\tfunction testEquals(expr: ContextKeyExpression | undefined, str: string): void {\n\t\t\tconst deserialized = ContextKeyExpr.deserialize(str);\n\t\t\tassert.ok(expr);\n\t\t\tassert.ok(deserialized);\n\t\t\tassert.strictEqual(expr.equals(deserialized), true, str);\n\t\t}\n\t\ttestEquals(ContextKeyExpr.greater('value', 0), 'value > 0');\n\t\ttestEquals(ContextKeyExpr.greaterEquals('value', 0), 'value >= 0');\n\t\ttestEquals(ContextKeyExpr.smaller('value', 0), 'value < 0');\n\t\ttestEquals(ContextKeyExpr.smallerEquals('value', 0), 'value <= 0');\n\t});\n\n\ttest('normalize', () => {\n\t\tconst key1IsTrue = ContextKeyExpr.equals('key1', true);\n\t\tconst key1IsNotFalse = ContextKeyExpr.notEquals('key1', false);\n\t\tconst key1IsFalse = ContextKeyExpr.equals('key1', false);\n\t\tconst key1IsNotTrue = ContextKeyExpr.notEquals('key1', true);\n\n\t\tassert.ok(key1IsTrue.equals(ContextKeyExpr.has('key1')));\n\t\tassert.ok(key1IsNotFalse.equals(ContextKeyExpr.has('key1')));\n\t\tassert.ok(key1IsFalse.equals(ContextKeyExpr.not('key1')));\n\t\tassert.ok(key1IsNotTrue.equals(ContextKeyExpr.not('key1')));\n\t});\n\n\ttest('evaluate', () => {\n\t\tconst context = createContext({\n\t\t\t'a': true,\n\t\t\t'b': false,\n\t\t\t'c': '5',\n\t\t\t'd': 'd'\n\t\t});\n\t\tfunction testExpression(expr: string, expected: boolean): void {\n\t\t\t// console.log(expr + ' ' + expected);\n\t\t\tconst rules = ContextKeyExpr.deserialize(expr);\n\t\t\tassert.strictEqual(rules!.evaluate(context), expected, expr);\n\t\t}\n\t\tfunction testBatch(expr: string, value: any): void {\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\ttestExpression(expr, !!value);\n\t\t\ttestExpression(expr + ' == true', !!value);\n\t\t\ttestExpression(expr + ' != true', !value);\n\t\t\ttestExpression(expr + ' == false', !value);\n\t\t\ttestExpression(expr + ' != false', !!value);\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\ttestExpression(expr + ' == 5', value == <any>'5');\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\ttestExpression(expr + ' != 5', value != <any>'5');\n\t\t\ttestExpression('!' + expr, !value);\n\t\t\ttestExpression(expr + ' =~ /d.*/', /d.*/.test(value));\n\t\t\ttestExpression(expr + ' =~ /D/i', /D/i.test(value));\n\t\t\t/* eslint-enable eqeqeq */\n\t\t}\n\n\t\ttestBatch('a', true);\n\t\ttestBatch('b', false);\n\t\ttestBatch('c', '5');\n\t\ttestBatch('d', 'd');\n\t\ttestBatch('z', undefined);\n\n\t\ttestExpression('true', true);\n\t\ttestExpression('false', false);\n\t\ttestExpression('a && !b', true && !false);\n\t\ttestExpression('a && b', true && false);\n\t\ttestExpression('a && !b && c == 5', true && !false && '5' === '5');\n\t\ttestExpression('d =~ /e.*/', false);\n\n\t\t// precedence test: false && true || true === true because && is evaluated first\n\t\ttestExpression('b && a || a', true);\n\n\t\ttestExpression('a || b', true);\n\t\ttestExpression('b || b', false);\n\t\ttestExpression('b && a || a && b', false);\n\t});\n\n\ttest('negate', () => {\n\t\tfunction testNegate(expr: string, expected: string): void {\n\t\t\tconst actual = ContextKeyExpr.deserialize(expr)!.negate().serialize();\n\t\t\tassert.strictEqual(actual, expected);\n\t\t}\n\t\ttestNegate('true', 'false');\n\t\ttestNegate('false', 'true');\n\t\ttestNegate('a', '!a');\n\t\ttestNegate('a && b || c', '!a && !c || !b && !c');\n\t\ttestNegate('a && b || c || d', '!a && !c && !d || !b && !c && !d');\n\t\ttestNegate('!a && !b || !c && !d', 'a && c || a && d || b && c || b && d');\n\t\ttestNegate('!a && !b || !c && !d || !e && !f', 'a && c && e || a && c && f || a && d && e || a && d && f || b && c && e || b && c && f || b && d && e || b && d && f');\n\t});\n\n\ttest('false, true', () => {\n\t\tfunction testNormalize(expr: string, expected: string): void {\n\t\t\tconst actual = ContextKeyExpr.deserialize(expr)!.serialize();\n\t\t\tassert.strictEqual(actual, expected);\n\t\t}\n\t\ttestNormalize('true', 'true');\n\t\ttestNormalize('!true', 'false');\n\t\ttestNormalize('false', 'false');\n\t\ttestNormalize('!false', 'true');\n\t\ttestNormalize('a && true', 'a');\n\t\ttestNormalize('a && false', 'false');\n\t\ttestNormalize('a || true', 'true');\n\t\ttestNormalize('a || false', 'a');\n\t\ttestNormalize('isMac', isMacintosh ? 'true' : 'false');\n\t\ttestNormalize('isLinux', isLinux ? 'true' : 'false');\n\t\ttestNormalize('isWindows', isWindows ? 'true' : 'false');\n\t});\n\n\ttest('issue #101015: distribute OR', () => {\n\t\tfunction t(expr1: string, expr2: string, expected: string | undefined): void {\n\t\t\tconst e1 = ContextKeyExpr.deserialize(expr1);\n\t\t\tconst e2 = ContextKeyExpr.deserialize(expr2);\n\t\t\tconst actual = ContextKeyExpr.and(e1, e2)?.serialize();\n\t\t\tassert.strictEqual(actual, expected);\n\t\t}\n\t\tt('a', 'b', 'a && b');\n\t\tt('a || b', 'c', 'a && c || b && c');\n\t\tt('a || b', 'c || d', 'a && c || a && d || b && c || b && d');\n\t\tt('a || b', 'c && d', 'a && c && d || b && c && d');\n\t\tt('a || b', 'c && d || e', 'a && e || b && e || a && c && d || b && c && d');\n\t});\n\n\ttest('ContextKeyInExpr', () => {\n\t\tconst ainb = ContextKeyExpr.deserialize('a in b')!;\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': [3, 2, 1] })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': [1, 2, 3] })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': [1, 2] })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3 })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': null })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': ['x'] })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': ['y'] })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': {} })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': { 'x': false } })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': { 'x': true } })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'prototype', 'b': {} })), false);\n\t});\n\n\ttest('ContextKeyNotInExpr', () => {\n\t\tconst aNotInB = ContextKeyExpr.deserialize('a not in b')!;\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': [3, 2, 1] })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': [1, 2, 3] })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': [1, 2] })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3 })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': null })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': ['x'] })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': ['y'] })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': {} })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': { 'x': false } })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': { 'x': true } })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'prototype', 'b': {} })), true);\n\t});\n\n\ttest('issue #106524: distributing AND should normalize', () => {\n\t\tconst actual = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.or(\n\t\t\t\tContextKeyExpr.has('a'),\n\t\t\t\tContextKeyExpr.has('b')\n\t\t\t),\n\t\t\tContextKeyExpr.has('c')\n\t\t);\n\t\tconst expected = ContextKeyExpr.or(\n\t\t\tContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has('a'),\n\t\t\t\tContextKeyExpr.has('c')\n\t\t\t),\n\t\t\tContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has('b'),\n\t\t\t\tContextKeyExpr.has('c')\n\t\t\t)\n\t\t);\n\t\tassert.strictEqual(actual!.equals(expected!), true);\n\t});\n\n\ttest('issue #129625: Removes duplicated terms in OR expressions', () => {\n\t\tconst expr = ContextKeyExpr.or(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.has('B'),\n\t\t\tContextKeyExpr.has('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'A || B');\n\t});\n\n\ttest('Resolves true constant OR expressions', () => {\n\t\tconst expr = ContextKeyExpr.or(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.not('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'true');\n\t});\n\n\ttest('Resolves false constant AND expressions', () => {\n\t\tconst expr = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.not('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'false');\n\t});\n\n\ttest('issue #129625: Removes duplicated terms in AND expressions', () => {\n\t\tconst expr = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.has('B'),\n\t\t\tContextKeyExpr.has('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'A && B');\n\t});\n\n\ttest('issue #129625: Remove duplicated terms when negating', () => {\n\t\tconst expr = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.or(\n\t\t\t\tContextKeyExpr.has('B1'),\n\t\t\t\tContextKeyExpr.has('B2'),\n\t\t\t)\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'A && B1 || A && B2');\n\t\tassert.strictEqual(expr.negate()!.serialize(), '!A || !A && !B1 || !A && !B2 || !B1 && !B2');\n\t\tassert.strictEqual(expr.negate()!.negate()!.serialize(), 'A && B1 || A && B2');\n\t\tassert.strictEqual(expr.negate()!.negate()!.negate()!.serialize(), '!A || !A && !B1 || !A && !B2 || !B1 && !B2');\n\t});\n\n\ttest('issue #129625: remove redundant terms in OR expressions', () => {\n\t\tfunction strImplies(p0: string, q0: string): boolean {\n\t\t\tconst p = ContextKeyExpr.deserialize(p0)!;\n\t\t\tconst q = ContextKeyExpr.deserialize(q0)!;\n\t\t\treturn implies(p, q);\n\t\t}\n\t\tassert.strictEqual(strImplies('a && b', 'a'), true);\n\t\tassert.strictEqual(strImplies('a', 'a && b'), false);\n\t});\n\n\ttest('implies', () => {\n\t\tfunction strImplies(p0: string, q0: string): boolean {\n\t\t\tconst p = ContextKeyExpr.deserialize(p0)!;\n\t\t\tconst q = ContextKeyExpr.deserialize(q0)!;\n\t\t\treturn implies(p, q);\n\t\t}\n\t\tassert.strictEqual(strImplies('a', 'a'), true);\n\t\tassert.strictEqual(strImplies('a', 'a || b'), true);\n\t\tassert.strictEqual(strImplies('a', 'a && b'), false);\n\t\tassert.strictEqual(strImplies('a', 'a && b || a && c'), false);\n\t\tassert.strictEqual(strImplies('a && b', 'a'), true);\n\t\tassert.strictEqual(strImplies('a && b', 'b'), true);\n\t\tassert.strictEqual(strImplies('a && b', 'a && b || c'), true);\n\t\tassert.strictEqual(strImplies('a || b', 'a || c'), false);\n\t\tassert.strictEqual(strImplies('a || b', 'a || b'), true);\n\t\tassert.strictEqual(strImplies('a && b', 'a && b'), true);\n\t\tassert.strictEqual(strImplies('a || b', 'a || b || c'), true);\n\t\tassert.strictEqual(strImplies('c && a && b', 'c && a'), true);\n\t});\n\n\ttest('Greater, GreaterEquals, Smaller, SmallerEquals evaluate', () => {\n\t\tfunction checkEvaluate(expr: string, ctx: any, expected: any): void {\n\t\t\tconst _expr = ContextKeyExpr.deserialize(expr)!;\n\t\t\tassert.strictEqual(_expr.evaluate(createContext(ctx)), expected);\n\t\t}\n\n\t\tcheckEvaluate('a > 1', {}, false);\n\t\tcheckEvaluate('a > 1', { a: 0 }, false);\n\t\tcheckEvaluate('a > 1', { a: 1 }, false);\n\t\tcheckEvaluate('a > 1', { a: 2 }, true);\n\t\tcheckEvaluate('a > 1', { a: '0' }, false);\n\t\tcheckEvaluate('a > 1', { a: '1' }, false);\n\t\tcheckEvaluate('a > 1', { a: '2' }, true);\n\t\tcheckEvaluate('a > 1', { a: 'a' }, false);\n\n\t\tcheckEvaluate('a > 10', { a: 2 }, false);\n\t\tcheckEvaluate('a > 10', { a: 11 }, true);\n\t\tcheckEvaluate('a > 10', { a: '11' }, true);\n\t\tcheckEvaluate('a > 10', { a: '2' }, false);\n\t\tcheckEvaluate('a > 10', { a: '11' }, true);\n\n\t\tcheckEvaluate('a > 1.1', { a: 1 }, false);\n\t\tcheckEvaluate('a > 1.1', { a: 2 }, true);\n\t\tcheckEvaluate('a > 1.1', { a: 11 }, true);\n\t\tcheckEvaluate('a > 1.1', { a: '1.1' }, false);\n\t\tcheckEvaluate('a > 1.1', { a: '2' }, true);\n\t\tcheckEvaluate('a > 1.1', { a: '11' }, true);\n\n\t\tcheckEvaluate('a > b', { a: 'b' }, false);\n\t\tcheckEvaluate('a > b', { a: 'c' }, false);\n\t\tcheckEvaluate('a > b', { a: 1000 }, false);\n\n\t\tcheckEvaluate('a >= 2', { a: '1' }, false);\n\t\tcheckEvaluate('a >= 2', { a: '2' }, true);\n\t\tcheckEvaluate('a >= 2', { a: '3' }, true);\n\n\t\tcheckEvaluate('a < 2', { a: '1' }, true);\n\t\tcheckEvaluate('a < 2', { a: '2' }, false);\n\t\tcheckEvaluate('a < 2', { a: '3' }, false);\n\n\t\tcheckEvaluate('a <= 2', { a: '1' }, true);\n\t\tcheckEvaluate('a <= 2', { a: '2' }, true);\n\t\tcheckEvaluate('a <= 2', { a: '3' }, false);\n\t});\n\n\ttest('Greater, GreaterEquals, Smaller, SmallerEquals negate', () => {\n\t\tfunction checkNegate(expr: string, expected: string): void {\n\t\t\tconst a = ContextKeyExpr.deserialize(expr)!;\n\t\t\tconst b = a.negate();\n\t\t\tassert.strictEqual(b.serialize(), expected);\n\t\t}\n\n\t\tcheckNegate('a > 1', 'a <= 1');\n\t\tcheckNegate('a > 1.1', 'a <= 1.1');\n\t\tcheckNegate('a > b', 'a <= b');\n\n\t\tcheckNegate('a >= 1', 'a < 1');\n\t\tcheckNegate('a >= 1.1', 'a < 1.1');\n\t\tcheckNegate('a >= b', 'a < b');\n\n\t\tcheckNegate('a < 1', 'a >= 1');\n\t\tcheckNegate('a < 1.1', 'a >= 1.1');\n\t\tcheckNegate('a < b', 'a >= b');\n\n\t\tcheckNegate('a <= 1', 'a > 1');\n\t\tcheckNegate('a <= 1.1', 'a > 1.1');\n\t\tcheckNegate('a <= b', 'a > b');\n\t});\n\n\ttest('issue #111899: context keys can use `<` or `>` ', () => {\n\t\tconst actual = ContextKeyExpr.deserialize('editorTextFocus && vim.active && vim.use<C-r>')!;\n\t\tassert.ok(actual.equals(\n\t\t\tContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has('editorTextFocus'),\n\t\t\t\tContextKeyExpr.has('vim.active'),\n\t\t\t\tContextKeyExpr.has('vim.use<C-r>'),\n\t\t\t)!\n\t\t));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { isLinux, isMacintosh, isWindows } from '../../../../base/common/platform.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ContextKeyExpr, ContextKeyExpression, implies } from '../../common/contextkey.js';\n\nfunction createContext(ctx: any) {\n\treturn {\n\t\tgetValue: (key: string) => {\n\t\t\treturn ctx[key];\n\t\t}\n\t};\n}\n\nsuite('ContextKeyExpr', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('ContextKeyExpr.equals', () => {\n\t\tconst a = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('a1'),\n\t\t\tContextKeyExpr.and(ContextKeyExpr.has('and.a')),\n\t\t\tContextKeyExpr.has('a2'),\n\t\t\tContextKeyExpr.regex('d3', /d.*/),\n\t\t\tContextKeyExpr.regex('d4', /\\*\\*3*/),\n\t\t\tContextKeyExpr.equals('b1', 'bb1'),\n\t\t\tContextKeyExpr.equals('b2', 'bb2'),\n\t\t\tContextKeyExpr.notEquals('c1', 'cc1'),\n\t\t\tContextKeyExpr.notEquals('c2', 'cc2'),\n\t\t\tContextKeyExpr.not('d1'),\n\t\t\tContextKeyExpr.not('d2')\n\t\t)!;\n\t\tconst b = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.equals('b2', 'bb2'),\n\t\t\tContextKeyExpr.notEquals('c1', 'cc1'),\n\t\t\tContextKeyExpr.not('d1'),\n\t\t\tContextKeyExpr.regex('d4', /\\*\\*3*/),\n\t\t\tContextKeyExpr.notEquals('c2', 'cc2'),\n\t\t\tContextKeyExpr.has('a2'),\n\t\t\tContextKeyExpr.equals('b1', 'bb1'),\n\t\t\tContextKeyExpr.regex('d3', /d.*/),\n\t\t\tContextKeyExpr.has('a1'),\n\t\t\tContextKeyExpr.and(ContextKeyExpr.equals('and.a', true)),\n\t\t\tContextKeyExpr.not('d2')\n\t\t)!;\n\t\tassert(a.equals(b), 'expressions should be equal');\n\t});\n\n\ttest('issue #134942: Equals in comparator expressions', () => {\n\t\tfunction testEquals(expr: ContextKeyExpression | undefined, str: string): void {\n\t\t\tconst deserialized = ContextKeyExpr.deserialize(str);\n\t\t\tassert.ok(expr);\n\t\t\tassert.ok(deserialized);\n\t\t\tassert.strictEqual(expr.equals(deserialized), true, str);\n\t\t}\n\t\ttestEquals(ContextKeyExpr.greater('value', 0), 'value > 0');\n\t\ttestEquals(ContextKeyExpr.greaterEquals('value', 0), 'value >= 0');\n\t\ttestEquals(ContextKeyExpr.smaller('value', 0), 'value < 0');\n\t\ttestEquals(ContextKeyExpr.smallerEquals('value', 0), 'value <= 0');\n\t});\n\n\ttest('normalize', () => {\n\t\tconst key1IsTrue = ContextKeyExpr.equals('key1', true);\n\t\tconst key1IsNotFalse = ContextKeyExpr.notEquals('key1', false);\n\t\tconst key1IsFalse = ContextKeyExpr.equals('key1', false);\n\t\tconst key1IsNotTrue = ContextKeyExpr.notEquals('key1', true);\n\n\t\tassert.ok(key1IsTrue.equals(ContextKeyExpr.has('key1')));\n\t\tassert.ok(key1IsNotFalse.equals(ContextKeyExpr.has('key1')));\n\t\tassert.ok(key1IsFalse.equals(ContextKeyExpr.not('key1')));\n\t\tassert.ok(key1IsNotTrue.equals(ContextKeyExpr.not('key1')));\n\t});\n\n\ttest('evaluate', () => {\n\t\tconst context = createContext({\n\t\t\t'a': true,\n\t\t\t'b': false,\n\t\t\t'c': '5',\n\t\t\t'd': 'd'\n\t\t});\n\t\tfunction testExpression(expr: string, expected: boolean): void {\n\t\t\t// console.log(expr + ' ' + expected);\n\t\t\tconst rules = ContextKeyExpr.deserialize(expr);\n\t\t\tassert.strictEqual(rules!.evaluate(context), expected, expr);\n\t\t}\n\t\tfunction testBatch(expr: string, value: any): void {\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\ttestExpression(expr, !!value);\n\t\t\ttestExpression(expr + ' == true', !!value);\n\t\t\ttestExpression(expr + ' != true', !value);\n\t\t\ttestExpression(expr + ' == false', !value);\n\t\t\ttestExpression(expr + ' != false', !!value);\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\ttestExpression(expr + ' == 5', value == <any>'5');\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\ttestExpression(expr + ' != 5', value != <any>'5');\n\t\t\ttestExpression('!' + expr, !value);\n\t\t\ttestExpression(expr + ' =~ /d.*/', /d.*/.test(value));\n\t\t\ttestExpression(expr + ' =~ /D/i', /D/i.test(value));\n\t\t\t/* eslint-enable eqeqeq */\n\t\t}\n\n\t\ttestBatch('a', true);\n\t\ttestBatch('b', false);\n\t\ttestBatch('c', '5');\n\t\ttestBatch('d', 'd');\n\t\ttestBatch('z', undefined);\n\n\t\ttestExpression('true', true);\n\t\ttestExpression('false', false);\n\t\ttestExpression('a && !b', true && !false);\n\t\ttestExpression('a && b', true && false);\n\t\ttestExpression('a && !b && c == 5', true && !false && '5' === '5');\n\t\ttestExpression('d =~ /e.*/', false);\n\n\t\t// precedence test: false && true || true === true because && is evaluated first\n\t\ttestExpression('b && a || a', true);\n\n\t\ttestExpression('a || b', true);\n\t\ttestExpression('b || b', false);\n\t\ttestExpression('b && a || a && b', false);\n\t});\n\n\ttest('negate', () => {\n\t\tfunction testNegate(expr: string, expected: string): void {\n\t\t\tconst actual = ContextKeyExpr.deserialize(expr)!.negate().serialize();\n\t\t\tassert.strictEqual(actual, expected);\n\t\t}\n\t\ttestNegate('true', 'false');\n\t\ttestNegate('false', 'true');\n\t\ttestNegate('a', '!a');\n\t\ttestNegate('a && b || c', '!a && !c || !b && !c');\n\t\ttestNegate('a && b || c || d', '!a && !c && !d || !b && !c && !d');\n\t\ttestNegate('!a && !b || !c && !d', 'a && c || a && d || b && c || b && d');\n\t\ttestNegate('!a && !b || !c && !d || !e && !f', 'a && c && e || a && c && f || a && d && e || a && d && f || b && c && e || b && c && f || b && d && e || b && d && f');\n\t});\n\n\ttest('false, true', () => {\n\t\tfunction testNormalize(expr: string, expected: string): void {\n\t\t\tconst actual = ContextKeyExpr.deserialize(expr)!.serialize();\n\t\t\tassert.strictEqual(actual, expected);\n\t\t}\n\t\ttestNormalize('true', 'true');\n\t\ttestNormalize('!true', 'false');\n\t\ttestNormalize('false', 'false');\n\t\ttestNormalize('!false', 'true');\n\t\ttestNormalize('a && true', 'a');\n\t\ttestNormalize('a && false', 'false');\n\t\ttestNormalize('a || true', 'true');\n\t\ttestNormalize('a || false', 'a');\n\t\ttestNormalize('isMac', isMacintosh ? 'true' : 'false');\n\t\ttestNormalize('isLinux', isLinux ? 'true' : 'false');\n\t\ttestNormalize('isWindows', isWindows ? 'true' : 'false');\n\t});\n\n\ttest('issue #101015: distribute OR', () => {\n\t\tfunction t(expr1: string, expr2: string, expected: string | undefined): void {\n\t\t\tconst e1 = ContextKeyExpr.deserialize(expr1);\n\t\t\tconst e2 = ContextKeyExpr.deserialize(expr2);\n\t\t\tconst actual = ContextKeyExpr.and(e1, e2)?.serialize();\n\t\t\tassert.strictEqual(actual, expected);\n\t\t}\n\t\tt('a', 'b', 'a && b');\n\t\tt('a || b', 'c', 'a && c || b && c');\n\t\tt('a || b', 'c || d', 'a && c || a && d || b && c || b && d');\n\t\tt('a || b', 'c && d', 'a && c && d || b && c && d');\n\t\tt('a || b', 'c && d || e', 'a && e || b && e || a && c && d || b && c && d');\n\t});\n\n\ttest('ContextKeyInExpr', () => {\n\t\tconst ainb = ContextKeyExpr.deserialize('a in b')!;\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': [3, 2, 1] })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': [1, 2, 3] })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': [1, 2] })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3 })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 3, 'b': null })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': ['x'] })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': ['y'] })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': {} })), false);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': { 'x': false } })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'x', 'b': { 'x': true } })), true);\n\t\tassert.strictEqual(ainb.evaluate(createContext({ 'a': 'prototype', 'b': {} })), false);\n\t});\n\n\ttest('ContextKeyNotInExpr', () => {\n\t\tconst aNotInB = ContextKeyExpr.deserialize('a not in b')!;\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': [3, 2, 1] })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': [1, 2, 3] })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': [1, 2] })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3 })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 3, 'b': null })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': ['x'] })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': ['y'] })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': {} })), true);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': { 'x': false } })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'x', 'b': { 'x': true } })), false);\n\t\tassert.strictEqual(aNotInB.evaluate(createContext({ 'a': 'prototype', 'b': {} })), true);\n\t});\n\n\ttest('issue #106524: distributing AND should normalize', () => {\n\t\tconst actual = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.or(\n\t\t\t\tContextKeyExpr.has('a'),\n\t\t\t\tContextKeyExpr.has('b')\n\t\t\t),\n\t\t\tContextKeyExpr.has('c')\n\t\t);\n\t\tconst expected = ContextKeyExpr.or(\n\t\t\tContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has('a'),\n\t\t\t\tContextKeyExpr.has('c')\n\t\t\t),\n\t\t\tContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has('b'),\n\t\t\t\tContextKeyExpr.has('c')\n\t\t\t)\n\t\t);\n\t\tassert.strictEqual(actual!.equals(expected!), true);\n\t});\n\n\ttest('issue #129625: Removes duplicated terms in OR expressions', () => {\n\t\tconst expr = ContextKeyExpr.or(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.has('B'),\n\t\t\tContextKeyExpr.has('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'A || B');\n\t});\n\n\ttest('Resolves true constant OR expressions', () => {\n\t\tconst expr = ContextKeyExpr.or(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.not('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'true');\n\t});\n\n\ttest('Resolves false constant AND expressions', () => {\n\t\tconst expr = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.not('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'false');\n\t});\n\n\ttest('issue #129625: Removes duplicated terms in AND expressions', () => {\n\t\tconst expr = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.has('B'),\n\t\t\tContextKeyExpr.has('A')\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'A && B');\n\t});\n\n\ttest('issue #129625: Remove duplicated terms when negating', () => {\n\t\tconst expr = ContextKeyExpr.and(\n\t\t\tContextKeyExpr.has('A'),\n\t\t\tContextKeyExpr.or(\n\t\t\t\tContextKeyExpr.has('B1'),\n\t\t\t\tContextKeyExpr.has('B2'),\n\t\t\t)\n\t\t)!;\n\t\tassert.strictEqual(expr.serialize(), 'A && B1 || A && B2');\n\t\tassert.strictEqual(expr.negate()!.serialize(), '!A || !A && !B1 || !A && !B2 || !B1 && !B2');\n\t\tassert.strictEqual(expr.negate()!.negate()!.serialize(), 'A && B1 || A && B2');\n\t\tassert.strictEqual(expr.negate()!.negate()!.negate()!.serialize(), '!A || !A && !B1 || !A && !B2 || !B1 && !B2');\n\t});\n\n\ttest('issue #129625: remove redundant terms in OR expressions', () => {\n\t\tfunction strImplies(p0: string, q0: string): boolean {\n\t\t\tconst p = ContextKeyExpr.deserialize(p0)!;\n\t\t\tconst q = ContextKeyExpr.deserialize(q0)!;\n\t\t\treturn implies(p, q);\n\t\t}\n\t\tassert.strictEqual(strImplies('a && b', 'a'), true);\n\t\tassert.strictEqual(strImplies('a', 'a && b'), false);\n\t});\n\n\ttest('implies', () => {\n\t\tfunction strImplies(p0: string, q0: string): boolean {\n\t\t\tconst p = ContextKeyExpr.deserialize(p0)!;\n\t\t\tconst q = ContextKeyExpr.deserialize(q0)!;\n\t\t\treturn implies(p, q);\n\t\t}\n\t\tassert.strictEqual(strImplies('a', 'a'), true);\n\t\tassert.strictEqual(strImplies('a', 'a || b'), true);\n\t\tassert.strictEqual(strImplies('a', 'a && b'), false);\n\t\tassert.strictEqual(strImplies('a', 'a && b || a && c'), false);\n\t\tassert.strictEqual(strImplies('a && b', 'a'), true);\n\t\tassert.strictEqual(strImplies('a && b', 'b'), true);\n\t\tassert.strictEqual(strImplies('a && b', 'a && b || c'), true);\n\t\tassert.strictEqual(strImplies('a || b', 'a || c'), false);\n\t\tassert.strictEqual(strImplies('a || b', 'a || b'), true);\n\t\tassert.strictEqual(strImplies('a && b', 'a && b'), true);\n\t\tassert.strictEqual(strImplies('a || b', 'a || b || c'), true);\n\t\tassert.strictEqual(strImplies('c && a && b', 'c && a'), true);\n\t});\n\n\ttest('Greater, GreaterEquals, Smaller, SmallerEquals evaluate', () => {\n\t\tfunction checkEvaluate(expr: string, ctx: any, expected: any): void {\n\t\t\tconst _expr = ContextKeyExpr.deserialize(expr)!;\n\t\t\tassert.strictEqual(_expr.evaluate(createContext(ctx)), expected);\n\t\t}\n\n\t\tcheckEvaluate('a > 1', {}, false);\n\t\tcheckEvaluate('a > 1', { a: 0 }, false);\n\t\tcheckEvaluate('a > 1', { a: 1 }, false);\n\t\tcheckEvaluate('a > 1', { a: 2 }, true);\n\t\tcheckEvaluate('a > 1', { a: '0' }, false);\n\t\tcheckEvaluate('a > 1', { a: '1' }, false);\n\t\tcheckEvaluate('a > 1', { a: '2' }, true);\n\t\tcheckEvaluate('a > 1', { a: 'a' }, false);\n\n\t\tcheckEvaluate('a > 10', { a: 2 }, false);\n\t\tcheckEvaluate('a > 10', { a: 11 }, true);\n\t\tcheckEvaluate('a > 10', { a: '11' }, true);\n\t\tcheckEvaluate('a > 10', { a: '2' }, false);\n\t\tcheckEvaluate('a > 10', { a: '11' }, true);\n\n\t\tcheckEvaluate('a > 1.1', { a: 1 }, false);\n\t\tcheckEvaluate('a > 1.1', { a: 2 }, true);\n\t\tcheckEvaluate('a > 1.1', { a: 11 }, true);\n\t\tcheckEvaluate('a > 1.1', { a: '1.1' }, false);\n\t\tcheckEvaluate('a > 1.1', { a: '2' }, true);\n\t\tcheckEvaluate('a > 1.1', { a: '11' }, true);\n\n\t\tcheckEvaluate('a > b', { a: 'b' }, false);\n\t\tcheckEvaluate('a > b', { a: 'c' }, false);\n\t\tcheckEvaluate('a > b', { a: 1000 }, false);\n\n\t\tcheckEvaluate('a >= 2', { a: '1' }, false);\n\t\tcheckEvaluate('a >= 2', { a: '2' }, true);\n\t\tcheckEvaluate('a >= 2', { a: '3' }, true);\n\n\t\tcheckEvaluate('a < 2', { a: '1' }, true);\n\t\tcheckEvaluate('a < 2', { a: '2' }, false);\n\t\tcheckEvaluate('a < 2', { a: '3' }, false);\n\n\t\tcheckEvaluate('a <= 2', { a: '1' }, true);\n\t\tcheckEvaluate('a <= 2', { a: '2' }, true);\n\t\tcheckEvaluate('a <= 2', { a: '3' }, false);\n\t});\n\n\ttest('Greater, GreaterEquals, Smaller, SmallerEquals negate', () => {\n\t\tfunction checkNegate(expr: string, expected: string): void {\n\t\t\tconst a = ContextKeyExpr.deserialize(expr)!;\n\t\t\tconst b = a.negate();\n\t\t\tassert.strictEqual(b.serialize(), expected);\n\t\t}\n\n\t\tcheckNegate('a > 1', 'a <= 1');\n\t\tcheckNegate('a > 1.1', 'a <= 1.1');\n\t\tcheckNegate('a > b', 'a <= b');\n\n\t\tcheckNegate('a >= 1', 'a < 1');\n\t\tcheckNegate('a >= 1.1', 'a < 1.1');\n\t\tcheckNegate('a >= b', 'a < b');\n\n\t\tcheckNegate('a < 1', 'a >= 1');\n\t\tcheckNegate('a < 1.1', 'a >= 1.1');\n\t\tcheckNegate('a < b', 'a >= b');\n\n\t\tcheckNegate('a <= 1', 'a > 1');\n\t\tcheckNegate('a <= 1.1', 'a > 1.1');\n\t\tcheckNegate('a <= b', 'a > b');\n\t});\n\n\ttest('issue #111899: context keys can use `<` or `>` ', () => {\n\t\tconst actual = ContextKeyExpr.deserialize('editorTextFocus && vim.active && vim.use<C-r>')!;\n\t\tassert.ok(actual.equals(\n\t\t\tContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has('editorTextFocus'),\n\t\t\t\tContextKeyExpr.has('vim.active'),\n\t\t\t\tContextKeyExpr.has('vim.use<C-r>'),\n\t\t\t)!\n\t\t));\n\t});\n});\n"]}