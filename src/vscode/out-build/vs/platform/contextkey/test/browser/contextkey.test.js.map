{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/contextkey/test/browser/contextkey.test.ts","vs/platform/contextkey/test/browser/contextkey.test.ts"],"names":[],"mappings":"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","file":"contextkey.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { mock } from '../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IConfigurationService } from '../../../configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../configuration/test/common/testConfigurationService.js';\nimport { ContextKeyService, setContext } from '../../browser/contextKeyService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../common/contextkey.js';\nimport { ServiceCollection } from '../../../instantiation/common/serviceCollection.js';\nimport { TestInstantiationService } from '../../../instantiation/test/common/instantiationServiceMock.js';\nimport { ITelemetryService } from '../../../telemetry/common/telemetry.js';\n\nsuite('ContextKeyService', () => {\n\tconst testDisposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('updateParent', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst parent1 = testDisposables.add(root.createScoped(document.createElement('div')));\n\t\tconst parent2 = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\tconst child = testDisposables.add(parent1.createScoped(document.createElement('div')));\n\t\tparent1.createKey('testA', 1);\n\t\tparent1.createKey('testB', 2);\n\t\tparent1.createKey('testD', 0);\n\n\t\tparent2.createKey('testA', 3);\n\t\tparent2.createKey('testC', 4);\n\t\tparent2.createKey('testD', 0);\n\n\t\tlet complete: () => void;\n\t\tlet reject: (err: Error) => void;\n\t\tconst p = new Promise<void>((_complete, _reject) => {\n\t\t\tcomplete = _complete;\n\t\t\treject = _reject;\n\t\t});\n\t\ttestDisposables.add(child.onDidChangeContext(e => {\n\t\t\ttry {\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testA'])), 'testA changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testB'])), 'testB changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testC'])), 'testC changed');\n\t\t\t\tassert.ok(!e.affectsSome(new Set(['testD'])), 'testD did not change');\n\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testA'), 3);\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testB'), undefined);\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testC'), 4);\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testD'), 0);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcomplete();\n\t\t}));\n\n\t\tchild.updateParent(parent2);\n\n\t\treturn p;\n\t});\n\n\ttest('updateParent to same service', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst parent1 = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\tconst child = testDisposables.add(parent1.createScoped(document.createElement('div')));\n\t\tparent1.createKey('testA', 1);\n\t\tparent1.createKey('testB', 2);\n\t\tparent1.createKey('testD', 0);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(child.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\tchild.updateParent(parent1);\n\n\t\tassert.strictEqual(eventFired, false);\n\t});\n\n\ttest('issue #147732: URIs as context values', () => {\n\t\tconst configurationService: IConfigurationService = new TestConfigurationService();\n\t\tconst contextKeyService: IContextKeyService = testDisposables.add(new ContextKeyService(configurationService));\n\t\tconst instantiationService = testDisposables.add(new TestInstantiationService(new ServiceCollection(\n\t\t\t[IConfigurationService, configurationService],\n\t\t\t[IContextKeyService, contextKeyService],\n\t\t\t[ITelemetryService, new class extends mock<ITelemetryService>() {\n\t\t\t\toverride async publicLog2() {\n\t\t\t\t\t//\n\t\t\t\t}\n\t\t\t}]\n\t\t)));\n\n\t\tconst uri = URI.parse('test://abc');\n\t\tcontextKeyService.createKey<string>('notebookCellResource', undefined).set(uri.toString());\n\t\tinstantiationService.invokeFunction(setContext, 'jupyter.runByLineCells', JSON.parse(JSON.stringify([uri])));\n\n\t\tconst expr = ContextKeyExpr.in('notebookCellResource', 'jupyter.runByLineCells');\n\t\tassert.deepStrictEqual(contextKeyService.contextMatchesRules(expr), true);\n\t});\n\n\ttest('suppress update event from parent when one key is overridden by child', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst child = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\troot.createKey('testA', 1);\n\t\tchild.createKey('testA', 4);\n\n\t\tlet fired = false;\n\t\tconst event = testDisposables.add(child.onDidChangeContext(e => fired = true));\n\t\troot.setContext('testA', 10);\n\t\tassert.strictEqual(fired, false, 'Should not fire event when overridden key is updated in parent');\n\t\tevent.dispose();\n\t});\n\n\ttest('suppress update event from parent when all keys are overridden by child', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst child = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\troot.createKey('testA', 1);\n\t\troot.createKey('testB', 2);\n\t\troot.createKey('testC', 3);\n\n\t\tchild.createKey('testA', 4);\n\t\tchild.createKey('testB', 5);\n\t\tchild.createKey('testD', 6);\n\n\t\tlet fired = false;\n\t\tconst event = testDisposables.add(child.onDidChangeContext(e => fired = true));\n\t\troot.bufferChangeEvents(() => {\n\t\t\troot.setContext('testA', 10);\n\t\t\troot.setContext('testB', 20);\n\t\t\troot.setContext('testD', 30);\n\t\t});\n\n\t\tassert.strictEqual(fired, false, 'Should not fire event when overridden key is updated in parent');\n\t\tevent.dispose();\n\t});\n\n\ttest('pass through update event from parent when one key is not overridden by child', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst child = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\troot.createKey('testA', 1);\n\t\troot.createKey('testB', 2);\n\t\troot.createKey('testC', 3);\n\n\t\tchild.createKey('testA', 4);\n\t\tchild.createKey('testB', 5);\n\t\tchild.createKey('testD', 6);\n\n\t\tconst def = new DeferredPromise();\n\t\ttestDisposables.add(child.onDidChangeContext(e => {\n\t\t\ttry {\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testA'])), 'testA changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testB'])), 'testB changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testC'])), 'testC changed');\n\t\t\t} catch (err) {\n\t\t\t\tdef.error(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdef.complete(undefined);\n\t\t}));\n\n\t\troot.bufferChangeEvents(() => {\n\t\t\troot.setContext('testA', 10);\n\t\t\troot.setContext('testB', 20);\n\t\t\troot.setContext('testC', 30);\n\t\t});\n\n\t\treturn def.p;\n\t});\n\n\ttest('setting identical array values should not fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<string[]>('testArray', ['a', 'b', 'c']);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same array content (different reference)\n\t\tkey.set(['a', 'b', 'c']);\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical array');\n\t});\n\n\ttest('setting different array values should fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<string[]>('testArray', ['a', 'b', 'c']);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set a different array\n\t\tkey.set(['a', 'b', 'd']);\n\n\t\tassert.strictEqual(eventFired, true, 'Should fire event when setting different array');\n\t});\n\n\ttest('setting identical complex object should not fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst initialValue = { foo: 'bar', count: 42 };\n\t\tconst key = root.createKey<Record<string, string | number>>('testObject', initialValue);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same object content (different reference)\n\t\tkey.set({ foo: 'bar', count: 42 });\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical object');\n\t});\n\n\ttest('setting different complex object should fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst initialValue = { foo: 'bar', count: 42 };\n\t\tconst key = root.createKey<Record<string, string | number>>('testObject', initialValue);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set a different object\n\t\tkey.set({ foo: 'bar', count: 43 });\n\n\t\tassert.strictEqual(eventFired, true, 'Should fire event when setting different object');\n\t});\n\n\ttest('setting empty arrays should not fire change event when identical', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<string[]>('testArray', []);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set another empty array\n\t\tkey.set([]);\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical empty array');\n\t});\n\n\ttest('setting nested arrays should handle deep equality', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst initialValue = ['a:b', 'c:d'];\n\t\tconst key = root.createKey<string[]>('testComplexArray', initialValue);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same array content with colon-separated values\n\t\tkey.set(['a:b', 'c:d']);\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical array with complex values');\n\t});\n\n\ttest('setting same primitive values should not fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey('testString', 'hello');\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same string value\n\t\tkey.set('hello');\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical string');\n\t});\n\n\ttest('setting different primitive values should fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<number>('testNumber', 42);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set a different number value\n\t\tkey.set(43);\n\n\t\tassert.strictEqual(eventFired, true, 'Should fire event when setting different number');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { mock } from '../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IConfigurationService } from '../../../configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../configuration/test/common/testConfigurationService.js';\nimport { ContextKeyService, setContext } from '../../browser/contextKeyService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../common/contextkey.js';\nimport { ServiceCollection } from '../../../instantiation/common/serviceCollection.js';\nimport { TestInstantiationService } from '../../../instantiation/test/common/instantiationServiceMock.js';\nimport { ITelemetryService } from '../../../telemetry/common/telemetry.js';\n\nsuite('ContextKeyService', () => {\n\tconst testDisposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('updateParent', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst parent1 = testDisposables.add(root.createScoped(document.createElement('div')));\n\t\tconst parent2 = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\tconst child = testDisposables.add(parent1.createScoped(document.createElement('div')));\n\t\tparent1.createKey('testA', 1);\n\t\tparent1.createKey('testB', 2);\n\t\tparent1.createKey('testD', 0);\n\n\t\tparent2.createKey('testA', 3);\n\t\tparent2.createKey('testC', 4);\n\t\tparent2.createKey('testD', 0);\n\n\t\tlet complete: () => void;\n\t\tlet reject: (err: Error) => void;\n\t\tconst p = new Promise<void>((_complete, _reject) => {\n\t\t\tcomplete = _complete;\n\t\t\treject = _reject;\n\t\t});\n\t\ttestDisposables.add(child.onDidChangeContext(e => {\n\t\t\ttry {\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testA'])), 'testA changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testB'])), 'testB changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testC'])), 'testC changed');\n\t\t\t\tassert.ok(!e.affectsSome(new Set(['testD'])), 'testD did not change');\n\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testA'), 3);\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testB'), undefined);\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testC'), 4);\n\t\t\t\tassert.strictEqual(child.getContextKeyValue('testD'), 0);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcomplete();\n\t\t}));\n\n\t\tchild.updateParent(parent2);\n\n\t\treturn p;\n\t});\n\n\ttest('updateParent to same service', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst parent1 = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\tconst child = testDisposables.add(parent1.createScoped(document.createElement('div')));\n\t\tparent1.createKey('testA', 1);\n\t\tparent1.createKey('testB', 2);\n\t\tparent1.createKey('testD', 0);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(child.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\tchild.updateParent(parent1);\n\n\t\tassert.strictEqual(eventFired, false);\n\t});\n\n\ttest('issue #147732: URIs as context values', () => {\n\t\tconst configurationService: IConfigurationService = new TestConfigurationService();\n\t\tconst contextKeyService: IContextKeyService = testDisposables.add(new ContextKeyService(configurationService));\n\t\tconst instantiationService = testDisposables.add(new TestInstantiationService(new ServiceCollection(\n\t\t\t[IConfigurationService, configurationService],\n\t\t\t[IContextKeyService, contextKeyService],\n\t\t\t[ITelemetryService, new class extends mock<ITelemetryService>() {\n\t\t\t\toverride async publicLog2() {\n\t\t\t\t\t//\n\t\t\t\t}\n\t\t\t}]\n\t\t)));\n\n\t\tconst uri = URI.parse('test://abc');\n\t\tcontextKeyService.createKey<string>('notebookCellResource', undefined).set(uri.toString());\n\t\tinstantiationService.invokeFunction(setContext, 'jupyter.runByLineCells', JSON.parse(JSON.stringify([uri])));\n\n\t\tconst expr = ContextKeyExpr.in('notebookCellResource', 'jupyter.runByLineCells');\n\t\tassert.deepStrictEqual(contextKeyService.contextMatchesRules(expr), true);\n\t});\n\n\ttest('suppress update event from parent when one key is overridden by child', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst child = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\troot.createKey('testA', 1);\n\t\tchild.createKey('testA', 4);\n\n\t\tlet fired = false;\n\t\tconst event = testDisposables.add(child.onDidChangeContext(e => fired = true));\n\t\troot.setContext('testA', 10);\n\t\tassert.strictEqual(fired, false, 'Should not fire event when overridden key is updated in parent');\n\t\tevent.dispose();\n\t});\n\n\ttest('suppress update event from parent when all keys are overridden by child', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst child = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\troot.createKey('testA', 1);\n\t\troot.createKey('testB', 2);\n\t\troot.createKey('testC', 3);\n\n\t\tchild.createKey('testA', 4);\n\t\tchild.createKey('testB', 5);\n\t\tchild.createKey('testD', 6);\n\n\t\tlet fired = false;\n\t\tconst event = testDisposables.add(child.onDidChangeContext(e => fired = true));\n\t\troot.bufferChangeEvents(() => {\n\t\t\troot.setContext('testA', 10);\n\t\t\troot.setContext('testB', 20);\n\t\t\troot.setContext('testD', 30);\n\t\t});\n\n\t\tassert.strictEqual(fired, false, 'Should not fire event when overridden key is updated in parent');\n\t\tevent.dispose();\n\t});\n\n\ttest('pass through update event from parent when one key is not overridden by child', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst child = testDisposables.add(root.createScoped(document.createElement('div')));\n\n\t\troot.createKey('testA', 1);\n\t\troot.createKey('testB', 2);\n\t\troot.createKey('testC', 3);\n\n\t\tchild.createKey('testA', 4);\n\t\tchild.createKey('testB', 5);\n\t\tchild.createKey('testD', 6);\n\n\t\tconst def = new DeferredPromise();\n\t\ttestDisposables.add(child.onDidChangeContext(e => {\n\t\t\ttry {\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testA'])), 'testA changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testB'])), 'testB changed');\n\t\t\t\tassert.ok(e.affectsSome(new Set(['testC'])), 'testC changed');\n\t\t\t} catch (err) {\n\t\t\t\tdef.error(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdef.complete(undefined);\n\t\t}));\n\n\t\troot.bufferChangeEvents(() => {\n\t\t\troot.setContext('testA', 10);\n\t\t\troot.setContext('testB', 20);\n\t\t\troot.setContext('testC', 30);\n\t\t});\n\n\t\treturn def.p;\n\t});\n\n\ttest('setting identical array values should not fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<string[]>('testArray', ['a', 'b', 'c']);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same array content (different reference)\n\t\tkey.set(['a', 'b', 'c']);\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical array');\n\t});\n\n\ttest('setting different array values should fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<string[]>('testArray', ['a', 'b', 'c']);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set a different array\n\t\tkey.set(['a', 'b', 'd']);\n\n\t\tassert.strictEqual(eventFired, true, 'Should fire event when setting different array');\n\t});\n\n\ttest('setting identical complex object should not fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst initialValue = { foo: 'bar', count: 42 };\n\t\tconst key = root.createKey<Record<string, string | number>>('testObject', initialValue);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same object content (different reference)\n\t\tkey.set({ foo: 'bar', count: 42 });\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical object');\n\t});\n\n\ttest('setting different complex object should fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst initialValue = { foo: 'bar', count: 42 };\n\t\tconst key = root.createKey<Record<string, string | number>>('testObject', initialValue);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set a different object\n\t\tkey.set({ foo: 'bar', count: 43 });\n\n\t\tassert.strictEqual(eventFired, true, 'Should fire event when setting different object');\n\t});\n\n\ttest('setting empty arrays should not fire change event when identical', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<string[]>('testArray', []);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set another empty array\n\t\tkey.set([]);\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical empty array');\n\t});\n\n\ttest('setting nested arrays should handle deep equality', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst initialValue = ['a:b', 'c:d'];\n\t\tconst key = root.createKey<string[]>('testComplexArray', initialValue);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same array content with colon-separated values\n\t\tkey.set(['a:b', 'c:d']);\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical array with complex values');\n\t});\n\n\ttest('setting same primitive values should not fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey('testString', 'hello');\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set the same string value\n\t\tkey.set('hello');\n\n\t\tassert.strictEqual(eventFired, false, 'Should not fire event when setting identical string');\n\t});\n\n\ttest('setting different primitive values should fire change event', () => {\n\t\tconst root = testDisposables.add(new ContextKeyService(new TestConfigurationService()));\n\t\tconst key = root.createKey<number>('testNumber', 42);\n\n\t\tlet eventFired = false;\n\t\ttestDisposables.add(root.onDidChangeContext(e => {\n\t\t\teventFired = true;\n\t\t}));\n\n\t\t// Set a different number value\n\t\tkey.set(43);\n\n\t\tassert.strictEqual(eventFired, true, 'Should fire event when setting different number');\n\t});\n});\n"]}