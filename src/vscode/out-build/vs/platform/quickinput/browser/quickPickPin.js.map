{"version":3,"sources":["vs/platform/quickinput/browser/quickPickPin.ts"],"names":[],"mappings":"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","file":"quickPickPin.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { localize } from '../../../nls.js';\nimport { IQuickPick, IQuickPickItem, QuickPickItem } from '../common/quickInput.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../storage/common/storage.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { DisposableStore, IDisposable } from '../../../base/common/lifecycle.js';\n\nconst pinButtonClass = ThemeIcon.asClassName(Codicon.pin);\nconst pinnedButtonClass = ThemeIcon.asClassName(Codicon.pinned);\nconst buttonClasses = [pinButtonClass, pinnedButtonClass];\n/**\n * Initially, adds pin buttons to all @param quickPick items.\n * When pinned, a copy of the item will be moved to the end of the pinned list and any duplicate within the pinned list will\n * be removed if @param filterDupliates has been provided. Pin and pinned button events trigger updates to the underlying storage.\n * Shows the quickpick once formatted.\n */\nexport function showWithPinnedItems(storageService: IStorageService, storageKey: string, quickPick: IQuickPick<IQuickPickItem, { useSeparators: true }>, filterDuplicates?: boolean): IDisposable {\n\tconst itemsWithoutPinned = quickPick.items;\n\tlet itemsWithPinned = _formatPinnedItems(storageKey, quickPick, storageService, undefined, filterDuplicates);\n\tconst disposables = new DisposableStore();\n\tdisposables.add(quickPick.onDidTriggerItemButton(async buttonEvent => {\n\t\tconst expectedButton = buttonEvent.button.iconClass && buttonClasses.includes(buttonEvent.button.iconClass);\n\t\tif (expectedButton) {\n\t\t\tquickPick.items = itemsWithoutPinned;\n\t\t\titemsWithPinned = _formatPinnedItems(storageKey, quickPick, storageService, buttonEvent.item, filterDuplicates);\n\t\t\tquickPick.items = quickPick.value ? itemsWithoutPinned : itemsWithPinned;\n\t\t}\n\t}));\n\tdisposables.add(quickPick.onDidChangeValue(async value => {\n\t\tif (quickPick.items === itemsWithPinned && value) {\n\t\t\tquickPick.items = itemsWithoutPinned;\n\t\t} else if (quickPick.items === itemsWithoutPinned && !value) {\n\t\t\tquickPick.items = itemsWithPinned;\n\t\t}\n\t}));\n\n\tquickPick.items = quickPick.value ? itemsWithoutPinned : itemsWithPinned;\n\tquickPick.show();\n\treturn disposables;\n}\n\nfunction _formatPinnedItems(storageKey: string, quickPick: IQuickPick<IQuickPickItem, { useSeparators: true }>, storageService: IStorageService, changedItem?: IQuickPickItem, filterDuplicates?: boolean): QuickPickItem[] {\n\tconst formattedItems: QuickPickItem[] = [];\n\tlet pinnedItems;\n\tif (changedItem) {\n\t\tpinnedItems = updatePinnedItems(storageKey, changedItem, storageService);\n\t} else {\n\t\tpinnedItems = getPinnedItems(storageKey, storageService);\n\t}\n\tif (pinnedItems.length) {\n\t\tformattedItems.push({ type: 'separator', label: localize(\"terminal.commands.pinned\", 'pinned') });\n\t}\n\tconst pinnedIds = new Set();\n\tfor (const itemToFind of pinnedItems) {\n\t\tconst itemToPin = quickPick.items.find(item => itemsMatch(item, itemToFind));\n\t\tif (itemToPin) {\n\t\t\tconst pinnedItemId = getItemIdentifier(itemToPin);\n\t\t\tconst pinnedItem: IQuickPickItem = { ...(itemToPin as IQuickPickItem) };\n\t\t\tif (!filterDuplicates || !pinnedIds.has(pinnedItemId)) {\n\t\t\t\tpinnedIds.add(pinnedItemId);\n\t\t\t\tupdateButtons(pinnedItem, false);\n\t\t\t\tformattedItems.push(pinnedItem);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const item of quickPick.items) {\n\t\tupdateButtons(item, true);\n\t\tformattedItems.push(item);\n\t}\n\treturn formattedItems;\n}\n\nfunction getItemIdentifier(item: QuickPickItem): string {\n\treturn item.type === 'separator' ? '' : item.id || `${item.label}${item.description}${item.detail}`;\n}\n\nfunction updateButtons(item: QuickPickItem, removePin: boolean): void {\n\tif (item.type === 'separator') {\n\t\treturn;\n\t}\n\n\t// remove button classes before adding the new one\n\tconst newButtons = item.buttons?.filter(button => button.iconClass && !buttonClasses.includes(button.iconClass)) ?? [];\n\tnewButtons.unshift({\n\t\ticonClass: removePin ? pinButtonClass : pinnedButtonClass,\n\t\ttooltip: removePin ? localize('pinCommand', \"Pin command\") : localize('pinnedCommand', \"Pinned command\"),\n\t\talwaysVisible: false\n\t});\n\titem.buttons = newButtons;\n}\n\nfunction itemsMatch(itemA: QuickPickItem, itemB: QuickPickItem): boolean {\n\treturn getItemIdentifier(itemA) === getItemIdentifier(itemB);\n}\n\nfunction updatePinnedItems(storageKey: string, changedItem: IQuickPickItem, storageService: IStorageService): IQuickPickItem[] {\n\tconst removePin = changedItem.buttons?.find(b => b.iconClass === pinnedButtonClass);\n\tlet items = getPinnedItems(storageKey, storageService);\n\tif (removePin) {\n\t\titems = items.filter(item => getItemIdentifier(item) !== getItemIdentifier(changedItem));\n\t} else {\n\t\titems.push(changedItem);\n\t}\n\tstorageService.store(storageKey, JSON.stringify(items.map(formatPinnedItemForStorage)), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\treturn items;\n}\n\nfunction getPinnedItems(storageKey: string, storageService: IStorageService): IQuickPickItem[] {\n\tconst items = storageService.get(storageKey, StorageScope.WORKSPACE);\n\treturn items ? JSON.parse(items) : [];\n}\n\nfunction formatPinnedItemForStorage(item: IQuickPickItem): IQuickPickItem {\n\treturn {\n\t\tlabel: item.label,\n\t\tdescription: item.description,\n\t\tdetail: item.detail,\n\t};\n}\n"]}