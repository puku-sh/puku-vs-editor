{"version":3,"sources":["vs/platform/quickinput/browser/tree/quickTree.ts"],"names":[],"mappings":"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","file":"quickTree.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { autorun, IReader, observableValue } from '../../../../base/common/observable.js';\nimport { setTimeout0 } from '../../../../base/common/platform.js';\nimport { localize } from '../../../../nls.js';\nimport { IQuickTree, IQuickTreeItem, IQuickTreeItemButtonEvent, QuickInputType, QuickPickFocus } from '../../common/quickInput.js';\nimport { QuickInput, QuickInputUI, Visibilities } from '../quickInput.js';\nimport { getParentNodeState } from './quickInputTree.js';\n\n// Contains the API\n\nexport class QuickTree<T extends IQuickTreeItem> extends QuickInput implements IQuickTree<T> {\n\tprivate static readonly DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\n\n\treadonly type = QuickInputType.QuickTree;\n\n\tprivate readonly _value = observableValue('value', '');\n\tprivate readonly _ariaLabel = observableValue<string | undefined>('ariaLabel', undefined);\n\tprivate readonly _placeholder = observableValue<string | undefined>('placeholder', undefined);\n\tprivate readonly _matchOnDescription = observableValue('matchOnDescription', false);\n\tprivate readonly _matchOnLabel = observableValue('matchOnLabel', true);\n\tprivate readonly _sortByLabel = observableValue('sortByLabel', true);\n\tprivate readonly _activeItems = observableValue<readonly T[]>('activeItems', []);\n\tprivate readonly _itemTree = observableValue<ReadonlyArray<T>>('itemTree', []);\n\n\treadonly onDidChangeValue = Event.fromObservable(this._value, this._store);\n\treadonly onDidChangeActive = Event.fromObservable(this._activeItems, this._store);\n\n\tprivate readonly _onDidChangeCheckedLeafItems = this._register(new Emitter<T[]>());\n\treadonly onDidChangeCheckedLeafItems: Event<T[]> = this._onDidChangeCheckedLeafItems.event;\n\n\tprivate readonly _onDidChangeCheckboxState = this._register(new Emitter<T>());\n\treadonly onDidChangeCheckboxState: Event<T> = this._onDidChangeCheckboxState.event;\n\n\treadonly onDidAccept: Event<void>;\n\n\tconstructor(ui: QuickInputUI) {\n\t\tsuper(ui);\n\t\tthis.onDidAccept = ui.onDidAccept;\n\t\tthis._registerAutoruns();\n\t\tthis._register(ui.tree.onDidChangeCheckedLeafItems(e => this._onDidChangeCheckedLeafItems.fire(e as T[])));\n\t\tthis._register(ui.tree.onDidChangeCheckboxState(e => this._onDidChangeCheckboxState.fire(e.item as T)));\n\t\t// Sync active items with tree focus changes\n\t\tthis._register(ui.tree.tree.onDidChangeFocus(e => {\n\t\t\tthis._activeItems.set(ui.tree.getActiveItems() as T[], undefined);\n\t\t}));\n\t}\n\n\tget value(): string { return this._value.get(); }\n\tset value(value: string) { this._value.set(value, undefined); }\n\n\tget ariaLabel(): string | undefined { return this._ariaLabel.get(); }\n\tset ariaLabel(ariaLabel: string | undefined) { this._ariaLabel.set(ariaLabel, undefined); }\n\n\tget placeholder(): string | undefined { return this._placeholder.get(); }\n\tset placeholder(placeholder: string | undefined) { this._placeholder.set(placeholder, undefined); }\n\n\tget matchOnDescription(): boolean { return this._matchOnDescription.get(); }\n\tset matchOnDescription(matchOnDescription: boolean) { this._matchOnDescription.set(matchOnDescription, undefined); }\n\n\tget matchOnLabel(): boolean { return this._matchOnLabel.get(); }\n\tset matchOnLabel(matchOnLabel: boolean) { this._matchOnLabel.set(matchOnLabel, undefined); }\n\n\tget sortByLabel(): boolean { return this._sortByLabel.get(); }\n\tset sortByLabel(sortByLabel: boolean) { this._sortByLabel.set(sortByLabel, undefined); }\n\n\tget activeItems(): readonly T[] { return this._activeItems.get(); }\n\tset activeItems(activeItems: readonly T[]) { this._activeItems.set(activeItems, undefined); }\n\n\tget itemTree(): ReadonlyArray<Readonly<T>> { return this._itemTree.get(); }\n\n\tget onDidTriggerItemButton(): Event<IQuickTreeItemButtonEvent<T>> {\n\t\t// Is there a cleaner way to avoid the `as` cast here?\n\t\treturn this.ui.tree.onDidTriggerButton as Event<IQuickTreeItemButtonEvent<T>>;\n\t}\n\n\t// TODO: Fix the any casting\n\t// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any\n\tget checkedLeafItems(): readonly T[] { return this.ui.tree.getCheckedLeafItems() as any as readonly T[]; }\n\n\tsetItemTree(itemTree: T[]): void {\n\t\tthis._itemTree.set(itemTree, undefined);\n\t}\n\n\tgetParent(element: T): T | undefined {\n\t\treturn this.ui.tree.tree.getParentElement(element) as T ?? undefined;\n\t}\n\n\tsetCheckboxState(element: T, checked: boolean | 'mixed'): void {\n\t\tthis.ui.tree.check(element, checked);\n\t}\n\texpand(element: T): void {\n\t\tthis.ui.tree.tree.expand(element);\n\t}\n\tcollapse(element: T): void {\n\t\tthis.ui.tree.tree.collapse(element);\n\t}\n\tisCollapsed(element: T): boolean {\n\t\treturn this.ui.tree.tree.isCollapsed(element);\n\t}\n\tfocusOnInput(): void {\n\t\tthis.ui.inputBox.setFocus();\n\t}\n\n\toverride show() {\n\t\tif (!this.visible) {\n\t\t\tconst visibilities: Visibilities = {\n\t\t\t\ttitle: !!this.title || !!this.step || !!this.titleButtons.length,\n\t\t\t\tdescription: !!this.description,\n\t\t\t\tcheckAll: true,\n\t\t\t\tcheckBox: true,\n\t\t\t\tinputBox: true,\n\t\t\t\tprogressBar: true,\n\t\t\t\tvisibleCount: true,\n\t\t\t\tcount: true,\n\t\t\t\tok: true,\n\t\t\t\tlist: false,\n\t\t\t\ttree: true,\n\t\t\t\tmessage: !!this.validationMessage,\n\t\t\t\tcustomButton: false\n\t\t\t};\n\t\t\tthis.ui.setVisibilities(visibilities);\n\t\t\tthis.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\n\t\t\t\tthis._value.set(value, undefined);\n\t\t\t}));\n\t\t\tthis.visibleDisposables.add(this.ui.tree.onDidChangeCheckboxState((e) => {\n\t\t\t\tconst checkAllState = getParentNodeState([...this.ui.tree.tree.getNode().children]);\n\t\t\t\tif (this.ui.checkAll.checked !== checkAllState) {\n\t\t\t\t\tthis.ui.checkAll.checked = checkAllState;\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.visibleDisposables.add(this.ui.checkAll.onChange(_e => {\n\t\t\t\tconst checked = this.ui.checkAll.checked;\n\t\t\t\tthis.ui.tree.checkAll(checked);\n\t\t\t}));\n\t\t\tthis.visibleDisposables.add(this.ui.tree.onDidChangeCheckedLeafItems(e => {\n\t\t\t\tthis.ui.count.setCount(e.length);\n\t\t\t}));\n\t\t}\n\t\tsuper.show(); // TODO: Why have show() bubble up while update() trickles down?\n\n\t\t// Initial state\n\t\t// TODO@TylerLeonhardt: Without this setTimeout, the screen reader will not read out\n\t\t// the final count of checked items correctly. Investigate a better way\n\t\t// to do this. ref https://github.com/microsoft/vscode/issues/258617\n\t\tsetTimeout0(() => this.ui.count.setCount(this.ui.tree.getCheckedLeafItems().length));\n\t\tconst checkAllState = getParentNodeState([...this.ui.tree.tree.getNode().children]);\n\t\tif (this.ui.checkAll.checked !== checkAllState) {\n\t\t\tthis.ui.checkAll.checked = checkAllState;\n\t\t}\n\t}\n\n\tprotected override update() {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst visibilities: Visibilities = {\n\t\t\ttitle: !!this.title || !!this.step || !!this.titleButtons.length,\n\t\t\tdescription: !!this.description,\n\t\t\tcheckAll: true,\n\t\t\tcheckBox: true,\n\t\t\tinputBox: true,\n\t\t\tprogressBar: true,\n\t\t\tvisibleCount: true,\n\t\t\tcount: true,\n\t\t\tok: true,\n\t\t\ttree: true,\n\t\t\tmessage: !!this.validationMessage\n\t\t};\n\t\tthis.ui.setVisibilities(visibilities);\n\t\tsuper.update();\n\t}\n\n\t_registerListeners(): void {\n\n\t}\n\n\t// TODO: Move to using autoruns instead of update function\n\t_registerAutoruns(): void {\n\t\tthis.registerVisibleAutorun(reader => {\n\t\t\tconst value = this._value.read(reader);\n\t\t\tthis.ui.inputBox.value = value;\n\t\t\tthis.ui.tree.filter(value);\n\t\t});\n\t\tthis.registerVisibleAutorun(reader => {\n\t\t\tlet ariaLabel = this._ariaLabel.read(reader);\n\t\t\tif (!ariaLabel) {\n\t\t\t\tariaLabel = this.placeholder || QuickTree.DEFAULT_ARIA_LABEL;\n\t\t\t\t// If we have a title, include it in the aria label.\n\t\t\t\tif (this.title) {\n\t\t\t\t\tariaLabel += ` - ${this.title}`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.ui.list.ariaLabel !== ariaLabel) {\n\t\t\t\tthis.ui.list.ariaLabel = ariaLabel ?? null;\n\t\t\t}\n\t\t\tif (this.ui.inputBox.ariaLabel !== ariaLabel) {\n\t\t\t\tthis.ui.inputBox.ariaLabel = ariaLabel ?? 'input';\n\t\t\t}\n\t\t});\n\t\tthis.registerVisibleAutorun(reader => {\n\t\t\tconst placeholder = this._placeholder.read(reader);\n\t\t\tif (this.ui.inputBox.placeholder !== placeholder) {\n\t\t\t\tthis.ui.inputBox.placeholder = placeholder ?? '';\n\t\t\t}\n\t\t});\n\t\tthis.registerVisibleAutorun((reader) => {\n\t\t\tconst matchOnLabel = this._matchOnLabel.read(reader);\n\t\t\tconst matchOnDescription = this._matchOnDescription.read(reader);\n\t\t\tthis.ui.tree.updateFilterOptions({ matchOnLabel, matchOnDescription });\n\t\t});\n\t\tthis.registerVisibleAutorun((reader) => {\n\t\t\tconst sortByLabel = this._sortByLabel.read(reader);\n\t\t\tthis.ui.tree.sortByLabel = sortByLabel;\n\t\t});\n\t\tthis.registerVisibleAutorun((reader) => {\n\t\t\tconst itemTree = this._itemTree.read(reader);\n\t\t\tthis.ui.tree.setTreeData(itemTree);\n\t\t});\n\t}\n\n\tregisterVisibleAutorun(fn: (reader: IReader) => void): void {\n\t\tthis._register(autorun((reader) => {\n\t\t\tif (this._visible.read(reader)) {\n\t\t\t\tfn(reader);\n\t\t\t}\n\t\t}));\n\t}\n\n\tfocus(focus: QuickPickFocus): void {\n\t\tthis.ui.tree.focus(focus);\n\t\t// To allow things like space to check/uncheck items\n\t\tthis.ui.tree.tree.domFocus();\n\t}\n\n\t/**\n\t * Programmatically accepts an item. Used internally for keyboard navigation.\n\t * @param inBackground Whether you are accepting an item in the background and keeping the picker open.\n\t */\n\taccept(_inBackground?: boolean): void {\n\t\t// No-op for now since we expect only multi-select quick trees which don't need\n\t\t// the speed of accept.\n\t}\n}\n"]}