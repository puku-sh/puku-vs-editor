{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/log/electron-main/loggerService.ts","vs/platform/log/electron-main/loggerService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,WAAW,EAAE,MAAM,6BAA6B,CAAC;AAE1D,OAAO,EAAE,KAAK,EAAE,MAAM,+BAA+B,CAAC;AACtD,OAAO,EAAE,sBAAsB,EAAE,MAAM,6CAA6C,CAAC;AACrF,OAAO,EAAmE,cAAc,EAAY,UAAU,EAAE,MAAM,kBAAkB,CAAC;AACzI,OAAO,EAAE,aAAa,EAAE,MAAM,0BAA0B,CAAC;AAEzD,MAAM,CAAC,MAAM,kBAAkB,GAAG,sBAAsB,CAAqC,cAAc,CAAC,CAAC;AAsB7G,MAAM,OAAO,iBAAkB,SAAQ,aAAa;IAApD;;QAEkB,4BAAuB,GAAG,IAAI,WAAW,EAAU,CAAC;IAwEtE,CAAC;IAtES,YAAY,CAAC,YAA0B,EAAE,OAAwB,EAAE,QAAiB;QAC5F,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC5B,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,EAAE,QAAQ,CAAC,CAAC;QAC3E,CAAC;QACD,IAAI,CAAC;YACJ,OAAO,KAAK,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QAClD,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC;YACnE,MAAM,KAAK,CAAC;QACb,CAAC;IACF,CAAC;IAEQ,cAAc,CAAC,QAAyB,EAAE,QAAiB;QACnE,IAAI,QAAQ,KAAK,SAAS,EAAE,CAAC;YAC5B,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC/D,CAAC;QACD,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAChC,CAAC;IAEQ,gBAAgB,CAAC,QAAa;QACtC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAC9C,KAAK,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC;IAED,gBAAgB;QACf,MAAM,SAAS,GAAsB,EAAE,CAAC;QACxC,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,oBAAoB,EAAE,EAAE,CAAC;YACrD,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC;gBAC1D,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC1B,CAAC;QACF,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,2BAA2B,CAAC,QAAgB;QAC3C,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,EAAE,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;IAC5H,CAAC;IAED,6BAA6B,CAAC,QAAgB;QAC7C,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;IACtH,CAAC;IAED,0BAA0B,CAAC,QAAgB;QAC1C,OAAO,KAAK,CAAC,MAAM,CAClB,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,EAAE;YACtC,MAAM,CAAC,GAAG;gBACT,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,cAAc,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAChH,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,cAAc,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;aACpH,CAAC;YACF,OAAO,CAAC,CAAC;QACV,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACvD,CAAC;IAED,iBAAiB,CAAC,QAAgB;QACjC,KAAK,MAAM,CAAC,QAAQ,EAAE,cAAc,CAAC,IAAI,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACvE,IAAI,cAAc,KAAK,QAAQ,EAAE,CAAC;gBACjC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YACjC,CAAC;QACF,CAAC;IACF,CAAC;IAEO,0BAA0B,CAAC,QAAa,EAAE,QAA4B;QAC7E,MAAM,cAAc,GAAG,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAClE,OAAO,cAAc,KAAK,SAAS,IAAI,cAAc,KAAK,QAAQ,CAAC;IACpE,CAAC;IAEQ,OAAO;QACf,KAAK,CAAC,OAAO,EAAE,CAAC;QAChB,IAAI,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC;IACtC,CAAC;CACD","file":"loggerService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Event } from '../../../base/common/event.js';\nimport { refineServiceDecorator } from '../../instantiation/common/instantiation.js';\nimport { DidChangeLoggersEvent, ILogger, ILoggerOptions, ILoggerResource, ILoggerService, LogLevel, isLogLevel } from '../common/log.js';\nimport { LoggerService } from '../node/loggerService.js';\n\nexport const ILoggerMainService = refineServiceDecorator<ILoggerService, ILoggerMainService>(ILoggerService);\n\nexport interface ILoggerMainService extends ILoggerService {\n\n\tgetOnDidChangeLogLevelEvent(windowId: number): Event<LogLevel | [URI, LogLevel]>;\n\n\tgetOnDidChangeVisibilityEvent(windowId: number): Event<[URI, boolean]>;\n\n\tgetOnDidChangeLoggersEvent(windowId: number): Event<DidChangeLoggersEvent>;\n\n\tcreateLogger(resource: URI, options?: ILoggerOptions, windowId?: number): ILogger;\n\n\tcreateLogger(id: string, options?: Omit<ILoggerOptions, 'id'>, windowId?: number): ILogger;\n\n\tregisterLogger(resource: ILoggerResource, windowId?: number): void;\n\n\tgetGlobalLoggers(): ILoggerResource[];\n\n\tderegisterLoggers(windowId: number): void;\n\n}\n\nexport class LoggerMainService extends LoggerService implements ILoggerMainService {\n\n\tprivate readonly loggerResourcesByWindow = new ResourceMap<number>();\n\n\toverride createLogger(idOrResource: URI | string, options?: ILoggerOptions, windowId?: number): ILogger {\n\t\tif (windowId !== undefined) {\n\t\t\tthis.loggerResourcesByWindow.set(this.toResource(idOrResource), windowId);\n\t\t}\n\t\ttry {\n\t\t\treturn super.createLogger(idOrResource, options);\n\t\t} catch (error) {\n\t\t\tthis.loggerResourcesByWindow.delete(this.toResource(idOrResource));\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\toverride registerLogger(resource: ILoggerResource, windowId?: number): void {\n\t\tif (windowId !== undefined) {\n\t\t\tthis.loggerResourcesByWindow.set(resource.resource, windowId);\n\t\t}\n\t\tsuper.registerLogger(resource);\n\t}\n\n\toverride deregisterLogger(resource: URI): void {\n\t\tthis.loggerResourcesByWindow.delete(resource);\n\t\tsuper.deregisterLogger(resource);\n\t}\n\n\tgetGlobalLoggers(): ILoggerResource[] {\n\t\tconst resources: ILoggerResource[] = [];\n\t\tfor (const resource of super.getRegisteredLoggers()) {\n\t\t\tif (!this.loggerResourcesByWindow.has(resource.resource)) {\n\t\t\t\tresources.push(resource);\n\t\t\t}\n\t\t}\n\t\treturn resources;\n\t}\n\n\tgetOnDidChangeLogLevelEvent(windowId: number): Event<LogLevel | [URI, LogLevel]> {\n\t\treturn Event.filter(this.onDidChangeLogLevel, arg => isLogLevel(arg) || this.isInterestedLoggerResource(arg[0], windowId));\n\t}\n\n\tgetOnDidChangeVisibilityEvent(windowId: number): Event<[URI, boolean]> {\n\t\treturn Event.filter(this.onDidChangeVisibility, ([resource]) => this.isInterestedLoggerResource(resource, windowId));\n\t}\n\n\tgetOnDidChangeLoggersEvent(windowId: number): Event<DidChangeLoggersEvent> {\n\t\treturn Event.filter(\n\t\t\tEvent.map(this.onDidChangeLoggers, e => {\n\t\t\t\tconst r = {\n\t\t\t\t\tadded: [...e.added].filter(loggerResource => this.isInterestedLoggerResource(loggerResource.resource, windowId)),\n\t\t\t\t\tremoved: [...e.removed].filter(loggerResource => this.isInterestedLoggerResource(loggerResource.resource, windowId)),\n\t\t\t\t};\n\t\t\t\treturn r;\n\t\t\t}), e => e.added.length > 0 || e.removed.length > 0);\n\t}\n\n\tderegisterLoggers(windowId: number): void {\n\t\tfor (const [resource, resourceWindow] of this.loggerResourcesByWindow) {\n\t\t\tif (resourceWindow === windowId) {\n\t\t\t\tthis.deregisterLogger(resource);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate isInterestedLoggerResource(resource: URI, windowId: number | undefined): boolean {\n\t\tconst loggerWindowId = this.loggerResourcesByWindow.get(resource);\n\t\treturn loggerWindowId === undefined || loggerWindowId === windowId;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.loggerResourcesByWindow.clear();\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Event } from '../../../base/common/event.js';\nimport { refineServiceDecorator } from '../../instantiation/common/instantiation.js';\nimport { DidChangeLoggersEvent, ILogger, ILoggerOptions, ILoggerResource, ILoggerService, LogLevel, isLogLevel } from '../common/log.js';\nimport { LoggerService } from '../node/loggerService.js';\n\nexport const ILoggerMainService = refineServiceDecorator<ILoggerService, ILoggerMainService>(ILoggerService);\n\nexport interface ILoggerMainService extends ILoggerService {\n\n\tgetOnDidChangeLogLevelEvent(windowId: number): Event<LogLevel | [URI, LogLevel]>;\n\n\tgetOnDidChangeVisibilityEvent(windowId: number): Event<[URI, boolean]>;\n\n\tgetOnDidChangeLoggersEvent(windowId: number): Event<DidChangeLoggersEvent>;\n\n\tcreateLogger(resource: URI, options?: ILoggerOptions, windowId?: number): ILogger;\n\n\tcreateLogger(id: string, options?: Omit<ILoggerOptions, 'id'>, windowId?: number): ILogger;\n\n\tregisterLogger(resource: ILoggerResource, windowId?: number): void;\n\n\tgetGlobalLoggers(): ILoggerResource[];\n\n\tderegisterLoggers(windowId: number): void;\n\n}\n\nexport class LoggerMainService extends LoggerService implements ILoggerMainService {\n\n\tprivate readonly loggerResourcesByWindow = new ResourceMap<number>();\n\n\toverride createLogger(idOrResource: URI | string, options?: ILoggerOptions, windowId?: number): ILogger {\n\t\tif (windowId !== undefined) {\n\t\t\tthis.loggerResourcesByWindow.set(this.toResource(idOrResource), windowId);\n\t\t}\n\t\ttry {\n\t\t\treturn super.createLogger(idOrResource, options);\n\t\t} catch (error) {\n\t\t\tthis.loggerResourcesByWindow.delete(this.toResource(idOrResource));\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\toverride registerLogger(resource: ILoggerResource, windowId?: number): void {\n\t\tif (windowId !== undefined) {\n\t\t\tthis.loggerResourcesByWindow.set(resource.resource, windowId);\n\t\t}\n\t\tsuper.registerLogger(resource);\n\t}\n\n\toverride deregisterLogger(resource: URI): void {\n\t\tthis.loggerResourcesByWindow.delete(resource);\n\t\tsuper.deregisterLogger(resource);\n\t}\n\n\tgetGlobalLoggers(): ILoggerResource[] {\n\t\tconst resources: ILoggerResource[] = [];\n\t\tfor (const resource of super.getRegisteredLoggers()) {\n\t\t\tif (!this.loggerResourcesByWindow.has(resource.resource)) {\n\t\t\t\tresources.push(resource);\n\t\t\t}\n\t\t}\n\t\treturn resources;\n\t}\n\n\tgetOnDidChangeLogLevelEvent(windowId: number): Event<LogLevel | [URI, LogLevel]> {\n\t\treturn Event.filter(this.onDidChangeLogLevel, arg => isLogLevel(arg) || this.isInterestedLoggerResource(arg[0], windowId));\n\t}\n\n\tgetOnDidChangeVisibilityEvent(windowId: number): Event<[URI, boolean]> {\n\t\treturn Event.filter(this.onDidChangeVisibility, ([resource]) => this.isInterestedLoggerResource(resource, windowId));\n\t}\n\n\tgetOnDidChangeLoggersEvent(windowId: number): Event<DidChangeLoggersEvent> {\n\t\treturn Event.filter(\n\t\t\tEvent.map(this.onDidChangeLoggers, e => {\n\t\t\t\tconst r = {\n\t\t\t\t\tadded: [...e.added].filter(loggerResource => this.isInterestedLoggerResource(loggerResource.resource, windowId)),\n\t\t\t\t\tremoved: [...e.removed].filter(loggerResource => this.isInterestedLoggerResource(loggerResource.resource, windowId)),\n\t\t\t\t};\n\t\t\t\treturn r;\n\t\t\t}), e => e.added.length > 0 || e.removed.length > 0);\n\t}\n\n\tderegisterLoggers(windowId: number): void {\n\t\tfor (const [resource, resourceWindow] of this.loggerResourcesByWindow) {\n\t\t\tif (resourceWindow === windowId) {\n\t\t\t\tthis.deregisterLogger(resource);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate isInterestedLoggerResource(resource: URI, windowId: number | undefined): boolean {\n\t\tconst loggerWindowId = this.loggerResourcesByWindow.get(resource);\n\t\treturn loggerWindowId === undefined || loggerWindowId === windowId;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.loggerResourcesByWindow.clear();\n\t}\n}\n\n"]}