{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/log/browser/log.ts","vs/platform/log/browser/log.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,UAAU,EAAE,MAAM,iCAAiC,CAAC;AAC7D,OAAO,EAAE,YAAY,EAAE,MAAM,mCAAmC,CAAC;AAIjE,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAW,QAAQ,EAAE,MAAM,kBAAkB,CAAC;AAYvF;;;;GAIG;AACH,MAAM,CAAC,KAAK,UAAU,OAAO,CAAC,WAAyB,EAAE,kBAAuC;IAC/F,MAAM,MAAM,GAAe,EAAE,CAAC;IAE9B,MAAM,SAAS,CAAC,WAAW,EAAE,MAAM,EAAE,kBAAkB,CAAC,QAAQ,EAAE,kBAAkB,CAAC,QAAQ,CAAC,CAAC;IAE/F,OAAO,MAAM,CAAC;AACf,CAAC;AAED,KAAK,UAAU,SAAS,CAAC,WAAyB,EAAE,IAAgB,EAAE,SAAc,EAAE,QAAa;IAClG,MAAM,IAAI,GAAG,MAAM,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAElD,KAAK,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,EAAE,CAAC;QAC7D,IAAI,WAAW,EAAE,CAAC;YACjB,MAAM,SAAS,CAAC,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACxD,CAAC;aAAM,CAAC;YACP,MAAM,QAAQ,GAAG,CAAC,MAAM,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;YACzE,IAAI,QAAQ,EAAE,CAAC;gBACd,MAAM,IAAI,GAAG,YAAY,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;gBAC9C,IAAI,IAAI,EAAE,CAAC;oBACV,IAAI,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;gBAC7C,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;AACF,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAe;IACxC,QAAQ,KAAK,EAAE,CAAC;QACf,KAAK,QAAQ,CAAC,KAAK,CAAC,CAAC,OAAO,OAAO,CAAC;QACpC,KAAK,QAAQ,CAAC,KAAK,CAAC,CAAC,OAAO,OAAO,CAAC;QACpC,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,MAAM,CAAC;QAClC,KAAK,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,MAAM,CAAC;QACrC,KAAK,QAAQ,CAAC,KAAK,CAAC,CAAC,OAAO,OAAO,CAAC;IACrC,CAAC;IACD,OAAO,MAAM,CAAC;AACf,CAAC;AAED;;;;GAIG;AACH,MAAM,OAAO,4BAA6B,SAAQ,aAAa;IAI9D,YAAY,WAAqB,iBAAiB;QACjD,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;IAC3F,CAAC;IAEO,UAAU,CAAC,IAAY,EAAE,IAAW;QAC3C,MAAM,eAAe,GAAG,UAAyC,CAAC;QAClE,IAAI,OAAO,eAAe,CAAC,iBAAiB,KAAK,UAAU,EAAE,CAAC;YAC7D,IAAI,CAAC;gBACJ,eAAe,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/C,CAAC;YAAC,OAAO,GAAG,EAAE,CAAC;gBACd,6DAA6D;gBAC7D,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,GAAG,CAAC,CAAC;YAC7D,CAAC;QACF,CAAC;IACF,CAAC;CACD","file":"log.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { relativePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { AdapterLogger, DEFAULT_LOG_LEVEL, ILogger, LogLevel } from '../common/log.js';\n\nexport interface IAutomatedWindow {\n\tcodeAutomationLog(type: string, args: any[]): void;\n\tcodeAutomationExit(code: number, logs: Array<ILogFile>): void;\n}\n\nexport interface ILogFile {\n\treadonly relativePath: string;\n\treadonly contents: string;\n}\n\n/**\n * Only used in browser contexts where the log files are not stored on disk\n * but in IndexedDB. A method to get all logs with their contents so that\n * CI automation can persist them.\n */\nexport async function getLogs(fileService: IFileService, environmentService: IEnvironmentService): Promise<ILogFile[]> {\n\tconst result: ILogFile[] = [];\n\n\tawait doGetLogs(fileService, result, environmentService.logsHome, environmentService.logsHome);\n\n\treturn result;\n}\n\nasync function doGetLogs(fileService: IFileService, logs: ILogFile[], curFolder: URI, logsHome: URI): Promise<void> {\n\tconst stat = await fileService.resolve(curFolder);\n\n\tfor (const { resource, isDirectory } of stat.children || []) {\n\t\tif (isDirectory) {\n\t\t\tawait doGetLogs(fileService, logs, resource, logsHome);\n\t\t} else {\n\t\t\tconst contents = (await fileService.readFile(resource)).value.toString();\n\t\t\tif (contents) {\n\t\t\t\tconst path = relativePath(logsHome, resource);\n\t\t\t\tif (path) {\n\t\t\t\t\tlogs.push({ relativePath: path, contents });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction logLevelToString(level: LogLevel): string {\n\tswitch (level) {\n\t\tcase LogLevel.Trace: return 'trace';\n\t\tcase LogLevel.Debug: return 'debug';\n\t\tcase LogLevel.Info: return 'info';\n\t\tcase LogLevel.Warning: return 'warn';\n\t\tcase LogLevel.Error: return 'error';\n\t}\n\treturn 'info';\n}\n\n/**\n * A logger that is used when VSCode is running in the web with\n * an automation such as playwright. We expect a global codeAutomationLog\n * to be defined that we can use to log to.\n */\nexport class ConsoleLogInAutomationLogger extends AdapterLogger implements ILogger {\n\n\tdeclare codeAutomationLog: any;\n\n\tconstructor(logLevel: LogLevel = DEFAULT_LOG_LEVEL) {\n\t\tsuper({ log: (level, args) => this.consoleLog(logLevelToString(level), args) }, logLevel);\n\t}\n\n\tprivate consoleLog(type: string, args: any[]): void {\n\t\tconst automatedWindow = mainWindow as unknown as IAutomatedWindow;\n\t\tif (typeof automatedWindow.codeAutomationLog === 'function') {\n\t\t\ttry {\n\t\t\t\tautomatedWindow.codeAutomationLog(type, args);\n\t\t\t} catch (err) {\n\t\t\t\t// see https://github.com/microsoft/vscode-test-web/issues/69\n\t\t\t\tconsole.error('Problems writing to codeAutomationLog', err);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { relativePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { AdapterLogger, DEFAULT_LOG_LEVEL, ILogger, LogLevel } from '../common/log.js';\n\nexport interface IAutomatedWindow {\n\tcodeAutomationLog(type: string, args: any[]): void;\n\tcodeAutomationExit(code: number, logs: Array<ILogFile>): void;\n}\n\nexport interface ILogFile {\n\treadonly relativePath: string;\n\treadonly contents: string;\n}\n\n/**\n * Only used in browser contexts where the log files are not stored on disk\n * but in IndexedDB. A method to get all logs with their contents so that\n * CI automation can persist them.\n */\nexport async function getLogs(fileService: IFileService, environmentService: IEnvironmentService): Promise<ILogFile[]> {\n\tconst result: ILogFile[] = [];\n\n\tawait doGetLogs(fileService, result, environmentService.logsHome, environmentService.logsHome);\n\n\treturn result;\n}\n\nasync function doGetLogs(fileService: IFileService, logs: ILogFile[], curFolder: URI, logsHome: URI): Promise<void> {\n\tconst stat = await fileService.resolve(curFolder);\n\n\tfor (const { resource, isDirectory } of stat.children || []) {\n\t\tif (isDirectory) {\n\t\t\tawait doGetLogs(fileService, logs, resource, logsHome);\n\t\t} else {\n\t\t\tconst contents = (await fileService.readFile(resource)).value.toString();\n\t\t\tif (contents) {\n\t\t\t\tconst path = relativePath(logsHome, resource);\n\t\t\t\tif (path) {\n\t\t\t\t\tlogs.push({ relativePath: path, contents });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction logLevelToString(level: LogLevel): string {\n\tswitch (level) {\n\t\tcase LogLevel.Trace: return 'trace';\n\t\tcase LogLevel.Debug: return 'debug';\n\t\tcase LogLevel.Info: return 'info';\n\t\tcase LogLevel.Warning: return 'warn';\n\t\tcase LogLevel.Error: return 'error';\n\t}\n\treturn 'info';\n}\n\n/**\n * A logger that is used when VSCode is running in the web with\n * an automation such as playwright. We expect a global codeAutomationLog\n * to be defined that we can use to log to.\n */\nexport class ConsoleLogInAutomationLogger extends AdapterLogger implements ILogger {\n\n\tdeclare codeAutomationLog: any;\n\n\tconstructor(logLevel: LogLevel = DEFAULT_LOG_LEVEL) {\n\t\tsuper({ log: (level, args) => this.consoleLog(logLevelToString(level), args) }, logLevel);\n\t}\n\n\tprivate consoleLog(type: string, args: any[]): void {\n\t\tconst automatedWindow = mainWindow as unknown as IAutomatedWindow;\n\t\tif (typeof automatedWindow.codeAutomationLog === 'function') {\n\t\t\ttry {\n\t\t\t\tautomatedWindow.codeAutomationLog(type, args);\n\t\t\t} catch (err) {\n\t\t\t\t// see https://github.com/microsoft/vscode-test-web/issues/69\n\t\t\t\tconsole.error('Problems writing to codeAutomationLog', err);\n\t\t\t}\n\t\t}\n\t}\n}\n"]}