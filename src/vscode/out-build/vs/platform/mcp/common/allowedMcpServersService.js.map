{"version":3,"sources":["vs/platform/mcp/common/allowedMcpServersService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAC/D,OAAO,KAAK,GAAG,MAAM,iBAAiB,CAAC;AACvC,OAAO,EAAE,gBAAgB,EAAmB,cAAc,EAAE,MAAM,qCAAqC,CAAC;AACxG,OAAO,EAAE,qBAAqB,EAAE,MAAM,6CAA6C,CAAC;AACpF,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;AACxD,OAAO,EAAwF,eAAe,EAAkB,MAAM,oBAAoB,CAAC;AAEpJ,IAAM,wBAAwB,GAA9B,MAAM,wBAAyB,SAAQ,UAAU;IAOvD,YACwB,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QAFgC,yBAAoB,GAApB,oBAAoB,CAAuB;QAJ5E,kCAA6B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QACnE,iCAA4B,GAAG,IAAI,CAAC,6BAA6B,CAAC,KAAK,CAAC;QAMhF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;YACrE,IAAI,CAAC,CAAC,oBAAoB,CAAC,eAAe,CAAC,EAAE,CAAC;gBAC7C,IAAI,CAAC,6BAA6B,CAAC,IAAI,EAAE,CAAC;YAC3C,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,SAAS,CAAC,SAAsE;QAC/E,IAAI,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,eAAe,CAAC,qCAAwB,EAAE,CAAC;YACjF,OAAO,IAAI,CAAC;QACb,CAAC;QAED,MAAM,mBAAmB,GAAG,gBAAgB,CAAC,+BAA+B,EAAE,EAAE,KAAK,EAAE,OAAO,eAAe,EAAE,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC;QAC9H,OAAO,IAAI,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,IAA6B,EAAE,IAA+F,EAAE,mBAAmB,CAAC,CAAC,CAAC;IAC9L,CAAC;CACD,CAAA;AA1BY,wBAAwB;IAQlC,WAAA,qBAAqB,CAAA;GARX,wBAAwB,CA0BpC","file":"allowedMcpServersService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as nls from '../../../nls.js';\nimport { createCommandUri, IMarkdownString, MarkdownString } from '../../../base/common/htmlContent.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { IAllowedMcpServersService, IGalleryMcpServer, IInstallableMcpServer, ILocalMcpServer, mcpAccessConfig, McpAccessValue } from './mcpManagement.js';\n\nexport class AllowedMcpServersService extends Disposable implements IAllowedMcpServersService {\n\n\t_serviceBrand: undefined;\n\n\tprivate _onDidChangeAllowedMcpServers = this._register(new Emitter<void>());\n\treadonly onDidChangeAllowedMcpServers = this._onDidChangeAllowedMcpServers.event;\n\n\tconstructor(\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(mcpAccessConfig)) {\n\t\t\t\tthis._onDidChangeAllowedMcpServers.fire();\n\t\t\t}\n\t\t}));\n\t}\n\n\tisAllowed(mcpServer: IGalleryMcpServer | ILocalMcpServer | IInstallableMcpServer): true | IMarkdownString {\n\t\tif (this.configurationService.getValue(mcpAccessConfig) !== McpAccessValue.None) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst settingsCommandLink = createCommandUri('workbench.action.openSettings', { query: `@id:${mcpAccessConfig}` }).toString();\n\t\treturn new MarkdownString(nls.localize('mcp servers are not allowed', \"Model Context Protocol servers are disabled in the Editor. Please check your [settings]({0}).\", settingsCommandLink));\n\t}\n}\n"]}