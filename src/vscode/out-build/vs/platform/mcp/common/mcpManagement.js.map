{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/mcp/common/mcpManagement.ts","vs/platform/mcp/common/mcpManagement.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAQhG,OAAO,EAAE,eAAe,EAAE,MAAM,6CAA6C,CAAC;AA6D9E,MAAM,CAAN,IAAkB,YAOjB;AAPD,WAAkB,YAAY;IAC7B,4BAAY,CAAA;IACZ,+BAAe,CAAA;IACf,8BAAc,CAAA;IACd,+BAAe,CAAA;IACf,6BAAa,CAAA;IACb,iCAAiB,CAAA;AAClB,CAAC,EAPiB,YAAY,KAAZ,YAAY,QAO7B;AAED,MAAM,CAAN,IAAkB,aAIjB;AAJD,WAAkB,aAAa;IAC9B,gCAAe,CAAA;IACf,oDAAmC,CAAA;IACnC,4BAAW,CAAA;AACZ,CAAC,EAJiB,aAAa,KAAb,aAAa,QAI9B;AAsCD,MAAM,CAAN,IAAkB,sBAGjB;AAHD,WAAkB,sBAAsB;IACvC,2CAAiB,CAAA;IACjB,mDAAyB,CAAA;AAC1B,CAAC,EAHiB,sBAAsB,KAAtB,sBAAsB,QAGvC;AAuCD,MAAM,CAAC,MAAM,kBAAkB,GAAG,eAAe,CAAqB,oBAAoB,CAAC,CAAC;AAwD5F,MAAM,CAAC,MAAM,qBAAqB,GAAG,eAAe,CAAwB,uBAAuB,CAAC,CAAC;AAkBrG,MAAM,CAAC,MAAM,yBAAyB,GAAG,eAAe,CAA4B,2BAA2B,CAAC,CAAC;AAQjH,MAAM,CAAC,MAAM,eAAe,GAAG,iBAAiB,CAAC;AACjD,MAAM,CAAC,MAAM,0BAA0B,GAAG,6BAA6B,CAAC;AACxE,MAAM,CAAC,MAAM,iCAAiC,GAAG,0BAA0B,CAAC;AAC5E,MAAM,CAAC,MAAM,kBAAkB,GAAG,oBAAoB,CAAC;AAQvD,MAAM,CAAN,IAAkB,iBAIjB;AAJD,WAAkB,iBAAiB;IAClC,oCAAe,CAAA;IACf,wCAAmB,CAAA;IACnB,sDAAiC,CAAA;AAClC,CAAC,EAJiB,iBAAiB,KAAjB,iBAAiB,QAIlC;AAED,MAAM,CAAN,IAAkB,cAIjB;AAJD,WAAkB,cAAc;IAC/B,+BAAa,CAAA;IACb,uCAAqB,CAAA;IACrB,6BAAW,CAAA;AACZ,CAAC,EAJiB,cAAc,KAAd,cAAc,QAI/B","file":"mcpManagement.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IIterativePager } from '../../../base/common/paging.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { SortBy, SortOrder } from '../../extensionManagement/common/extensionManagement.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { IMcpServerConfiguration, IMcpServerVariable } from './mcpPlatformTypes.js';\n\nexport type InstallSource = 'gallery' | 'local';\n\nexport interface ILocalMcpServer {\n\treadonly name: string;\n\treadonly config: IMcpServerConfiguration;\n\treadonly version?: string;\n\treadonly mcpResource: URI;\n\treadonly location?: URI;\n\treadonly displayName?: string;\n\treadonly description?: string;\n\treadonly galleryUrl?: string;\n\treadonly galleryId?: string;\n\treadonly repositoryUrl?: string;\n\treadonly readmeUrl?: URI;\n\treadonly publisher?: string;\n\treadonly publisherDisplayName?: string;\n\treadonly icon?: {\n\t\treadonly dark: string;\n\t\treadonly light: string;\n\t};\n\treadonly codicon?: string;\n\treadonly manifest?: IGalleryMcpServerConfiguration;\n\treadonly source: InstallSource;\n}\n\nexport interface IMcpServerInput {\n\treadonly description?: string;\n\treadonly isRequired?: boolean;\n\treadonly format?: 'string' | 'number' | 'boolean' | 'filepath';\n\treadonly value?: string;\n\treadonly isSecret?: boolean;\n\treadonly default?: string;\n\treadonly choices?: readonly string[];\n}\n\nexport interface IMcpServerVariableInput extends IMcpServerInput {\n\treadonly variables?: Record<string, IMcpServerInput>;\n}\n\nexport interface IMcpServerPositionalArgument extends IMcpServerVariableInput {\n\treadonly type: 'positional';\n\treadonly valueHint?: string;\n\treadonly isRepeated?: boolean;\n}\n\nexport interface IMcpServerNamedArgument extends IMcpServerVariableInput {\n\treadonly type: 'named';\n\treadonly name: string;\n\treadonly isRepeated?: boolean;\n}\n\nexport interface IMcpServerKeyValueInput extends IMcpServerVariableInput {\n\treadonly name: string;\n\treadonly value?: string;\n}\n\nexport type IMcpServerArgument = IMcpServerPositionalArgument | IMcpServerNamedArgument;\n\nexport const enum RegistryType {\n\tNODE = 'npm',\n\tPYTHON = 'pypi',\n\tDOCKER = 'oci',\n\tNUGET = 'nuget',\n\tMCPB = 'mcpb',\n\tREMOTE = 'remote'\n}\n\nexport const enum TransportType {\n\tSTDIO = 'stdio',\n\tSTREAMABLE_HTTP = 'streamable-http',\n\tSSE = 'sse'\n}\n\nexport interface StdioTransport {\n\treadonly type: TransportType.STDIO;\n}\n\nexport interface StreamableHttpTransport {\n\treadonly type: TransportType.STREAMABLE_HTTP;\n\treadonly url: string;\n\treadonly headers?: ReadonlyArray<IMcpServerKeyValueInput>;\n}\n\nexport interface SseTransport {\n\treadonly type: TransportType.SSE;\n\treadonly url: string;\n\treadonly headers?: ReadonlyArray<IMcpServerKeyValueInput>;\n}\n\nexport type Transport = StdioTransport | StreamableHttpTransport | SseTransport;\n\nexport interface IMcpServerPackage {\n\treadonly registryType: RegistryType;\n\treadonly identifier: string;\n\treadonly transport: Transport;\n\treadonly version?: string;\n\treadonly registryBaseUrl?: string;\n\treadonly fileSha256?: string;\n\treadonly packageArguments?: readonly IMcpServerArgument[];\n\treadonly runtimeHint?: string;\n\treadonly runtimeArguments?: readonly IMcpServerArgument[];\n\treadonly environmentVariables?: ReadonlyArray<IMcpServerKeyValueInput>;\n}\n\nexport interface IGalleryMcpServerConfiguration {\n\treadonly packages?: readonly IMcpServerPackage[];\n\treadonly remotes?: ReadonlyArray<SseTransport | StreamableHttpTransport>;\n}\n\nexport const enum GalleryMcpServerStatus {\n\tActive = 'active',\n\tDeprecated = 'deprecated'\n}\n\nexport interface IGalleryMcpServer {\n\treadonly name: string;\n\treadonly displayName: string;\n\treadonly description: string;\n\treadonly version: string;\n\treadonly isLatest: boolean;\n\treadonly status: GalleryMcpServerStatus;\n\treadonly id?: string;\n\treadonly galleryUrl?: string;\n\treadonly webUrl?: string;\n\treadonly codicon?: string;\n\treadonly icon?: {\n\t\treadonly dark: string;\n\t\treadonly light: string;\n\t};\n\treadonly lastUpdated?: number;\n\treadonly publishDate?: number;\n\treadonly repositoryUrl?: string;\n\treadonly configuration: IGalleryMcpServerConfiguration;\n\treadonly readmeUrl?: string;\n\treadonly readme?: string;\n\treadonly publisher: string;\n\treadonly publisherDisplayName?: string;\n\treadonly publisherUrl?: string;\n\treadonly publisherDomain?: { link: string; verified: boolean };\n\treadonly ratingCount?: number;\n\treadonly topics?: readonly string[];\n\treadonly license?: string;\n\treadonly starsCount?: number;\n}\n\nexport interface IQueryOptions {\n\ttext?: string;\n\tsortBy?: SortBy;\n\tsortOrder?: SortOrder;\n}\n\nexport const IMcpGalleryService = createDecorator<IMcpGalleryService>('IMcpGalleryService');\nexport interface IMcpGalleryService {\n\treadonly _serviceBrand: undefined;\n\tisEnabled(): boolean;\n\tquery(options?: IQueryOptions, token?: CancellationToken): Promise<IIterativePager<IGalleryMcpServer>>;\n\tgetMcpServersFromGallery(infos: { name: string; id?: string }[]): Promise<IGalleryMcpServer[]>;\n\tgetMcpServer(url: string): Promise<IGalleryMcpServer | undefined>;\n\tgetReadme(extension: IGalleryMcpServer, token: CancellationToken): Promise<string>;\n}\n\nexport interface InstallMcpServerEvent {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n\treadonly source?: IGalleryMcpServer;\n}\n\nexport interface InstallMcpServerResult {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n\treadonly source?: IGalleryMcpServer;\n\treadonly local?: ILocalMcpServer;\n\treadonly error?: Error;\n}\n\nexport interface UninstallMcpServerEvent {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n}\n\nexport interface DidUninstallMcpServerEvent {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n\treadonly error?: string;\n}\n\nexport type InstallOptions = {\n\tpackageType?: RegistryType;\n\tmcpResource?: URI;\n};\n\nexport type UninstallOptions = {\n\tmcpResource?: URI;\n};\n\nexport interface IInstallableMcpServer {\n\treadonly name: string;\n\treadonly config: IMcpServerConfiguration;\n\treadonly inputs?: IMcpServerVariable[];\n}\n\nexport type McpServerConfiguration = Omit<IInstallableMcpServer, 'name'>;\nexport interface McpServerConfigurationParseResult {\n\treadonly mcpServerConfiguration: McpServerConfiguration;\n\treadonly notices: string[];\n}\n\nexport const IMcpManagementService = createDecorator<IMcpManagementService>('IMcpManagementService');\nexport interface IMcpManagementService {\n\treadonly _serviceBrand: undefined;\n\treadonly onInstallMcpServer: Event<InstallMcpServerEvent>;\n\treadonly onDidInstallMcpServers: Event<readonly InstallMcpServerResult[]>;\n\treadonly onDidUpdateMcpServers: Event<readonly InstallMcpServerResult[]>;\n\treadonly onUninstallMcpServer: Event<UninstallMcpServerEvent>;\n\treadonly onDidUninstallMcpServer: Event<DidUninstallMcpServerEvent>;\n\tgetInstalled(mcpResource?: URI): Promise<ILocalMcpServer[]>;\n\tcanInstall(server: IGalleryMcpServer | IInstallableMcpServer): true | IMarkdownString;\n\tinstall(server: IInstallableMcpServer, options?: InstallOptions): Promise<ILocalMcpServer>;\n\tinstallFromGallery(server: IGalleryMcpServer, options?: InstallOptions): Promise<ILocalMcpServer>;\n\tupdateMetadata(local: ILocalMcpServer, server: IGalleryMcpServer, profileLocation?: URI): Promise<ILocalMcpServer>;\n\tuninstall(server: ILocalMcpServer, options?: UninstallOptions): Promise<void>;\n\n\tgetMcpServerConfigurationFromManifest(manifest: IGalleryMcpServerConfiguration, packageType: RegistryType): McpServerConfigurationParseResult;\n}\n\nexport const IAllowedMcpServersService = createDecorator<IAllowedMcpServersService>('IAllowedMcpServersService');\nexport interface IAllowedMcpServersService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeAllowedMcpServers: Event<void>;\n\tisAllowed(mcpServer: IGalleryMcpServer | ILocalMcpServer | IInstallableMcpServer): true | IMarkdownString;\n}\n\nexport const mcpAccessConfig = 'chat.mcp.access';\nexport const mcpGalleryServiceUrlConfig = 'chat.mcp.gallery.serviceUrl';\nexport const mcpGalleryServiceEnablementConfig = 'chat.mcp.gallery.enabled';\nexport const mcpAutoStartConfig = 'chat.mcp.autostart';\n\nexport interface IMcpGalleryConfig {\n\treadonly serviceUrl?: string;\n\treadonly enabled?: boolean;\n\treadonly version?: string;\n}\n\nexport const enum McpAutoStartValue {\n\tNever = 'never',\n\tOnlyNew = 'onlyNew',\n\tNewAndOutdated = 'newAndOutdated',\n}\n\nexport const enum McpAccessValue {\n\tNone = 'none',\n\tRegistry = 'registry',\n\tAll = 'all',\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IIterativePager } from '../../../base/common/paging.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { SortBy, SortOrder } from '../../extensionManagement/common/extensionManagement.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { IMcpServerConfiguration, IMcpServerVariable } from './mcpPlatformTypes.js';\n\nexport type InstallSource = 'gallery' | 'local';\n\nexport interface ILocalMcpServer {\n\treadonly name: string;\n\treadonly config: IMcpServerConfiguration;\n\treadonly version?: string;\n\treadonly mcpResource: URI;\n\treadonly location?: URI;\n\treadonly displayName?: string;\n\treadonly description?: string;\n\treadonly galleryUrl?: string;\n\treadonly galleryId?: string;\n\treadonly repositoryUrl?: string;\n\treadonly readmeUrl?: URI;\n\treadonly publisher?: string;\n\treadonly publisherDisplayName?: string;\n\treadonly icon?: {\n\t\treadonly dark: string;\n\t\treadonly light: string;\n\t};\n\treadonly codicon?: string;\n\treadonly manifest?: IGalleryMcpServerConfiguration;\n\treadonly source: InstallSource;\n}\n\nexport interface IMcpServerInput {\n\treadonly description?: string;\n\treadonly isRequired?: boolean;\n\treadonly format?: 'string' | 'number' | 'boolean' | 'filepath';\n\treadonly value?: string;\n\treadonly isSecret?: boolean;\n\treadonly default?: string;\n\treadonly choices?: readonly string[];\n}\n\nexport interface IMcpServerVariableInput extends IMcpServerInput {\n\treadonly variables?: Record<string, IMcpServerInput>;\n}\n\nexport interface IMcpServerPositionalArgument extends IMcpServerVariableInput {\n\treadonly type: 'positional';\n\treadonly valueHint?: string;\n\treadonly isRepeated?: boolean;\n}\n\nexport interface IMcpServerNamedArgument extends IMcpServerVariableInput {\n\treadonly type: 'named';\n\treadonly name: string;\n\treadonly isRepeated?: boolean;\n}\n\nexport interface IMcpServerKeyValueInput extends IMcpServerVariableInput {\n\treadonly name: string;\n\treadonly value?: string;\n}\n\nexport type IMcpServerArgument = IMcpServerPositionalArgument | IMcpServerNamedArgument;\n\nexport const enum RegistryType {\n\tNODE = 'npm',\n\tPYTHON = 'pypi',\n\tDOCKER = 'oci',\n\tNUGET = 'nuget',\n\tMCPB = 'mcpb',\n\tREMOTE = 'remote'\n}\n\nexport const enum TransportType {\n\tSTDIO = 'stdio',\n\tSTREAMABLE_HTTP = 'streamable-http',\n\tSSE = 'sse'\n}\n\nexport interface StdioTransport {\n\treadonly type: TransportType.STDIO;\n}\n\nexport interface StreamableHttpTransport {\n\treadonly type: TransportType.STREAMABLE_HTTP;\n\treadonly url: string;\n\treadonly headers?: ReadonlyArray<IMcpServerKeyValueInput>;\n}\n\nexport interface SseTransport {\n\treadonly type: TransportType.SSE;\n\treadonly url: string;\n\treadonly headers?: ReadonlyArray<IMcpServerKeyValueInput>;\n}\n\nexport type Transport = StdioTransport | StreamableHttpTransport | SseTransport;\n\nexport interface IMcpServerPackage {\n\treadonly registryType: RegistryType;\n\treadonly identifier: string;\n\treadonly transport: Transport;\n\treadonly version?: string;\n\treadonly registryBaseUrl?: string;\n\treadonly fileSha256?: string;\n\treadonly packageArguments?: readonly IMcpServerArgument[];\n\treadonly runtimeHint?: string;\n\treadonly runtimeArguments?: readonly IMcpServerArgument[];\n\treadonly environmentVariables?: ReadonlyArray<IMcpServerKeyValueInput>;\n}\n\nexport interface IGalleryMcpServerConfiguration {\n\treadonly packages?: readonly IMcpServerPackage[];\n\treadonly remotes?: ReadonlyArray<SseTransport | StreamableHttpTransport>;\n}\n\nexport const enum GalleryMcpServerStatus {\n\tActive = 'active',\n\tDeprecated = 'deprecated'\n}\n\nexport interface IGalleryMcpServer {\n\treadonly name: string;\n\treadonly displayName: string;\n\treadonly description: string;\n\treadonly version: string;\n\treadonly isLatest: boolean;\n\treadonly status: GalleryMcpServerStatus;\n\treadonly id?: string;\n\treadonly galleryUrl?: string;\n\treadonly webUrl?: string;\n\treadonly codicon?: string;\n\treadonly icon?: {\n\t\treadonly dark: string;\n\t\treadonly light: string;\n\t};\n\treadonly lastUpdated?: number;\n\treadonly publishDate?: number;\n\treadonly repositoryUrl?: string;\n\treadonly configuration: IGalleryMcpServerConfiguration;\n\treadonly readmeUrl?: string;\n\treadonly readme?: string;\n\treadonly publisher: string;\n\treadonly publisherDisplayName?: string;\n\treadonly publisherUrl?: string;\n\treadonly publisherDomain?: { link: string; verified: boolean };\n\treadonly ratingCount?: number;\n\treadonly topics?: readonly string[];\n\treadonly license?: string;\n\treadonly starsCount?: number;\n}\n\nexport interface IQueryOptions {\n\ttext?: string;\n\tsortBy?: SortBy;\n\tsortOrder?: SortOrder;\n}\n\nexport const IMcpGalleryService = createDecorator<IMcpGalleryService>('IMcpGalleryService');\nexport interface IMcpGalleryService {\n\treadonly _serviceBrand: undefined;\n\tisEnabled(): boolean;\n\tquery(options?: IQueryOptions, token?: CancellationToken): Promise<IIterativePager<IGalleryMcpServer>>;\n\tgetMcpServersFromGallery(infos: { name: string; id?: string }[]): Promise<IGalleryMcpServer[]>;\n\tgetMcpServer(url: string): Promise<IGalleryMcpServer | undefined>;\n\tgetReadme(extension: IGalleryMcpServer, token: CancellationToken): Promise<string>;\n}\n\nexport interface InstallMcpServerEvent {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n\treadonly source?: IGalleryMcpServer;\n}\n\nexport interface InstallMcpServerResult {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n\treadonly source?: IGalleryMcpServer;\n\treadonly local?: ILocalMcpServer;\n\treadonly error?: Error;\n}\n\nexport interface UninstallMcpServerEvent {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n}\n\nexport interface DidUninstallMcpServerEvent {\n\treadonly name: string;\n\treadonly mcpResource: URI;\n\treadonly error?: string;\n}\n\nexport type InstallOptions = {\n\tpackageType?: RegistryType;\n\tmcpResource?: URI;\n};\n\nexport type UninstallOptions = {\n\tmcpResource?: URI;\n};\n\nexport interface IInstallableMcpServer {\n\treadonly name: string;\n\treadonly config: IMcpServerConfiguration;\n\treadonly inputs?: IMcpServerVariable[];\n}\n\nexport type McpServerConfiguration = Omit<IInstallableMcpServer, 'name'>;\nexport interface McpServerConfigurationParseResult {\n\treadonly mcpServerConfiguration: McpServerConfiguration;\n\treadonly notices: string[];\n}\n\nexport const IMcpManagementService = createDecorator<IMcpManagementService>('IMcpManagementService');\nexport interface IMcpManagementService {\n\treadonly _serviceBrand: undefined;\n\treadonly onInstallMcpServer: Event<InstallMcpServerEvent>;\n\treadonly onDidInstallMcpServers: Event<readonly InstallMcpServerResult[]>;\n\treadonly onDidUpdateMcpServers: Event<readonly InstallMcpServerResult[]>;\n\treadonly onUninstallMcpServer: Event<UninstallMcpServerEvent>;\n\treadonly onDidUninstallMcpServer: Event<DidUninstallMcpServerEvent>;\n\tgetInstalled(mcpResource?: URI): Promise<ILocalMcpServer[]>;\n\tcanInstall(server: IGalleryMcpServer | IInstallableMcpServer): true | IMarkdownString;\n\tinstall(server: IInstallableMcpServer, options?: InstallOptions): Promise<ILocalMcpServer>;\n\tinstallFromGallery(server: IGalleryMcpServer, options?: InstallOptions): Promise<ILocalMcpServer>;\n\tupdateMetadata(local: ILocalMcpServer, server: IGalleryMcpServer, profileLocation?: URI): Promise<ILocalMcpServer>;\n\tuninstall(server: ILocalMcpServer, options?: UninstallOptions): Promise<void>;\n\n\tgetMcpServerConfigurationFromManifest(manifest: IGalleryMcpServerConfiguration, packageType: RegistryType): McpServerConfigurationParseResult;\n}\n\nexport const IAllowedMcpServersService = createDecorator<IAllowedMcpServersService>('IAllowedMcpServersService');\nexport interface IAllowedMcpServersService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeAllowedMcpServers: Event<void>;\n\tisAllowed(mcpServer: IGalleryMcpServer | ILocalMcpServer | IInstallableMcpServer): true | IMarkdownString;\n}\n\nexport const mcpAccessConfig = 'chat.mcp.access';\nexport const mcpGalleryServiceUrlConfig = 'chat.mcp.gallery.serviceUrl';\nexport const mcpGalleryServiceEnablementConfig = 'chat.mcp.gallery.enabled';\nexport const mcpAutoStartConfig = 'chat.mcp.autostart';\n\nexport interface IMcpGalleryConfig {\n\treadonly serviceUrl?: string;\n\treadonly enabled?: boolean;\n\treadonly version?: string;\n}\n\nexport const enum McpAutoStartValue {\n\tNever = 'never',\n\tOnlyNew = 'onlyNew',\n\tNewAndOutdated = 'newAndOutdated',\n}\n\nexport const enum McpAccessValue {\n\tNone = 'none',\n\tRegistry = 'registry',\n\tAll = 'all',\n}\n"]}