{"version":3,"sources":["vs/platform/mcp/common/mcpGalleryService.ts"],"names":[],"mappings":"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","file":"mcpGalleryService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { format2, uppercaseFirstLetter } from '../../../base/common/strings.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { asJson, asText, IRequestService } from '../../request/common/request.js';\nimport { GalleryMcpServerStatus, IGalleryMcpServer, IMcpGalleryService, IMcpServerArgument, IMcpServerInput, IMcpServerKeyValueInput, IMcpServerPackage, IQueryOptions, RegistryType, SseTransport, StreamableHttpTransport, Transport, TransportType } from './mcpManagement.js';\nimport { IMcpGalleryManifestService, McpGalleryManifestStatus, getMcpGalleryManifestResourceUri, McpGalleryResourceType, IMcpGalleryManifest } from './mcpGalleryManifest.js';\nimport { IIterativePager, IIterativePage } from '../../../base/common/paging.js';\nimport { CancellationError } from '../../../base/common/errors.js';\nimport { isObject, isString } from '../../../base/common/types.js';\n\ninterface IMcpRegistryInfo {\n\treadonly isLatest?: boolean;\n\treadonly publishedAt?: string;\n\treadonly updatedAt?: string;\n}\n\ninterface IGitHubInfo {\n\treadonly name: string;\n\treadonly nameWithOwner: string;\n\treadonly displayName?: string;\n\treadonly isInOrganization?: boolean;\n\treadonly license?: string;\n\treadonly opengraphImageUrl?: string;\n\treadonly ownerAvatarUrl?: string;\n\treadonly preferredImage?: string;\n\treadonly primaryLanguage?: string;\n\treadonly primaryLanguageColor?: string;\n\treadonly pushedAt?: string;\n\treadonly readme?: string;\n\treadonly stargazerCount?: number;\n\treadonly topics?: readonly string[];\n\treadonly usesCustomOpengraphImage?: boolean;\n}\n\ninterface IAzureAPICenterInfo {\n\treadonly 'x-ms-icon'?: string;\n}\n\ninterface IRawGalleryMcpServersMetadata {\n\treadonly count: number;\n\treadonly nextCursor?: string;\n}\n\ninterface IRawGalleryMcpServersResult {\n\treadonly metadata: IRawGalleryMcpServersMetadata;\n\treadonly servers: readonly IRawGalleryMcpServer[];\n}\n\ninterface IGalleryMcpServersResult {\n\treadonly metadata: IRawGalleryMcpServersMetadata;\n\treadonly servers: IGalleryMcpServer[];\n}\n\ninterface IRawGalleryMcpServer {\n\treadonly name: string;\n\treadonly description: string;\n\treadonly version: string;\n\treadonly id?: string;\n\treadonly title?: string;\n\treadonly repository?: {\n\t\treadonly source: string;\n\t\treadonly url: string;\n\t\treadonly id?: string;\n\t};\n\treadonly readme?: string;\n\treadonly icons?: readonly IRawGalleryMcpServerIcon[];\n\treadonly status?: GalleryMcpServerStatus;\n\treadonly websiteUrl?: string;\n\treadonly createdAt?: string;\n\treadonly updatedAt?: string;\n\treadonly packages?: readonly IMcpServerPackage[];\n\treadonly remotes?: ReadonlyArray<SseTransport | StreamableHttpTransport>;\n\treadonly registryInfo?: IMcpRegistryInfo;\n\treadonly githubInfo?: IGitHubInfo;\n\treadonly apicInfo?: IAzureAPICenterInfo;\n}\n\ninterface IGalleryMcpServerDataSerializer {\n\ttoRawGalleryMcpServerResult(input: unknown): IRawGalleryMcpServersResult | undefined;\n\ttoRawGalleryMcpServer(input: unknown): IRawGalleryMcpServer | undefined;\n}\n\ninterface IRawGalleryMcpServerIcon {\n\treadonly src: string;\n\treadonly theme?: IconTheme;\n\treadonly sizes?: string[];\n\treadonly mimeType?: IconMimeType;\n}\n\nconst enum IconMimeType {\n\tPNG = 'image/png',\n\tJPEG = 'image/jpeg',\n\tJPG = 'image/jpg',\n\tSVG = 'image/svg+xml',\n\tWEBP = 'image/webp',\n}\n\nconst enum IconTheme {\n\tLIGHT = 'light',\n\tDARK = 'dark',\n}\n\nnamespace McpServerSchemaVersion_v2025_07_09 {\n\n\texport const VERSION = 'v0-2025-07-09';\n\texport const SCHEMA = `https://static.modelcontextprotocol.io/schemas/2025-07-09/server.schema.json`;\n\n\tinterface RawGalleryMcpServerInput {\n\t\treadonly description?: string;\n\t\treadonly is_required?: boolean;\n\t\treadonly format?: 'string' | 'number' | 'boolean' | 'filepath';\n\t\treadonly value?: string;\n\t\treadonly is_secret?: boolean;\n\t\treadonly default?: string;\n\t\treadonly choices?: readonly string[];\n\t}\n\n\tinterface RawGalleryMcpServerVariableInput extends RawGalleryMcpServerInput {\n\t\treadonly variables?: Record<string, RawGalleryMcpServerInput>;\n\t}\n\n\tinterface RawGalleryMcpServerPositionalArgument extends RawGalleryMcpServerVariableInput {\n\t\treadonly type: 'positional';\n\t\treadonly value_hint?: string;\n\t\treadonly is_repeated?: boolean;\n\t}\n\n\tinterface RawGalleryMcpServerNamedArgument extends RawGalleryMcpServerVariableInput {\n\t\treadonly type: 'named';\n\t\treadonly name: string;\n\t\treadonly is_repeated?: boolean;\n\t}\n\n\tinterface RawGalleryMcpServerKeyValueInput extends RawGalleryMcpServerVariableInput {\n\t\treadonly name: string;\n\t\treadonly value?: string;\n\t}\n\n\ttype RawGalleryMcpServerArgument = RawGalleryMcpServerPositionalArgument | RawGalleryMcpServerNamedArgument;\n\n\tinterface McpServerDeprecatedRemote {\n\t\treadonly transport_type?: 'streamable' | 'sse';\n\t\treadonly transport?: 'streamable' | 'sse';\n\t\treadonly url: string;\n\t\treadonly headers?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t}\n\n\ttype RawGalleryMcpServerRemotes = ReadonlyArray<SseTransport | StreamableHttpTransport | McpServerDeprecatedRemote>;\n\n\ttype RawGalleryTransport = StdioTransport | StreamableHttpTransport | SseTransport;\n\n\tinterface StdioTransport {\n\t\treadonly type: 'stdio';\n\t}\n\n\tinterface StreamableHttpTransport {\n\t\treadonly type: 'streamable-http' | 'sse';\n\t\treadonly url: string;\n\t\treadonly headers?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t}\n\n\tinterface SseTransport {\n\t\treadonly type: 'sse';\n\t\treadonly url: string;\n\t\treadonly headers?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t}\n\n\tinterface RawGalleryMcpServerPackage {\n\t\treadonly registry_name: string;\n\t\treadonly name: string;\n\t\treadonly registry_type: 'npm' | 'pypi' | 'docker-hub' | 'nuget' | 'remote' | 'mcpb';\n\t\treadonly registry_base_url?: string;\n\t\treadonly identifier: string;\n\t\treadonly version: string;\n\t\treadonly file_sha256?: string;\n\t\treadonly transport?: RawGalleryTransport;\n\t\treadonly package_arguments?: readonly RawGalleryMcpServerArgument[];\n\t\treadonly runtime_hint?: string;\n\t\treadonly runtime_arguments?: readonly RawGalleryMcpServerArgument[];\n\t\treadonly environment_variables?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t}\n\n\tinterface RawGalleryMcpServer {\n\t\treadonly $schema: string;\n\t\treadonly name: string;\n\t\treadonly description: string;\n\t\treadonly status?: 'active' | 'deprecated';\n\t\treadonly repository?: {\n\t\t\treadonly source: string;\n\t\t\treadonly url: string;\n\t\t\treadonly id?: string;\n\t\t\treadonly readme?: string;\n\t\t};\n\t\treadonly version: string;\n\t\treadonly website_url?: string;\n\t\treadonly created_at: string;\n\t\treadonly updated_at: string;\n\t\treadonly packages?: readonly RawGalleryMcpServerPackage[];\n\t\treadonly remotes?: RawGalleryMcpServerRemotes;\n\t\treadonly _meta: {\n\t\t\treadonly 'io.modelcontextprotocol.registry/official': {\n\t\t\t\treadonly id: string;\n\t\t\t\treadonly is_latest: boolean;\n\t\t\t\treadonly published_at: string;\n\t\t\t\treadonly updated_at: string;\n\t\t\t\treadonly release_date?: string;\n\t\t\t};\n\t\t\treadonly 'io.modelcontextprotocol.registry/publisher-provided'?: Record<string, unknown>;\n\t\t};\n\t}\n\n\tinterface RawGalleryMcpServersResult {\n\t\treadonly metadata: {\n\t\t\treadonly count: number;\n\t\t\treadonly next_cursor?: string;\n\t\t};\n\t\treadonly servers: readonly RawGalleryMcpServer[];\n\t}\n\n\tinterface RawGitHubInfo {\n\t\treadonly name: string;\n\t\treadonly name_with_owner: string;\n\t\treadonly display_name?: string;\n\t\treadonly is_in_organization?: boolean;\n\t\treadonly license?: string;\n\t\treadonly opengraph_image_url?: string;\n\t\treadonly owner_avatar_url?: string;\n\t\treadonly primary_language?: string;\n\t\treadonly primary_language_color?: string;\n\t\treadonly pushed_at?: string;\n\t\treadonly stargazer_count?: number;\n\t\treadonly topics?: readonly string[];\n\t\treadonly uses_custom_opengraph_image?: boolean;\n\t}\n\n\tclass Serializer implements IGalleryMcpServerDataSerializer {\n\n\t\tpublic toRawGalleryMcpServerResult(input: unknown): IRawGalleryMcpServersResult | undefined {\n\t\t\tif (!input || typeof input !== 'object' || !Array.isArray((input as RawGalleryMcpServersResult).servers)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst from = <RawGalleryMcpServersResult>input;\n\n\t\t\tconst servers: IRawGalleryMcpServer[] = [];\n\t\t\tfor (const server of from.servers) {\n\t\t\t\tconst rawServer = this.toRawGalleryMcpServer(server);\n\t\t\t\tif (!rawServer) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\tservers.push(rawServer);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmetadata: {\n\t\t\t\t\tcount: from.metadata.count ?? 0,\n\t\t\t\t\tnextCursor: from.metadata?.next_cursor\n\t\t\t\t},\n\t\t\t\tservers\n\t\t\t};\n\t\t}\n\n\t\tpublic toRawGalleryMcpServer(input: unknown): IRawGalleryMcpServer | undefined {\n\t\t\tif (!input || typeof input !== 'object') {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst from = <RawGalleryMcpServer>input;\n\n\t\t\tif (\n\t\t\t\t(!from.name || !isString(from.name))\n\t\t\t\t|| (!from.description || !isString(from.description))\n\t\t\t\t|| (!from.version || !isString(from.version))\n\t\t\t) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (from.$schema && from.$schema !== McpServerSchemaVersion_v2025_07_09.SCHEMA) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst registryInfo = from._meta?.['io.modelcontextprotocol.registry/official'];\n\n\t\t\tfunction convertServerInput(input: RawGalleryMcpServerInput): IMcpServerInput {\n\t\t\t\treturn {\n\t\t\t\t\t...input,\n\t\t\t\t\tisRequired: input.is_required,\n\t\t\t\t\tisSecret: input.is_secret,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction convertVariables(variables: Record<string, RawGalleryMcpServerInput>): Record<string, IMcpServerInput> {\n\t\t\t\tconst result: Record<string, IMcpServerInput> = {};\n\t\t\t\tfor (const [key, value] of Object.entries(variables)) {\n\t\t\t\t\tresult[key] = convertServerInput(value);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tfunction convertServerArgument(arg: RawGalleryMcpServerArgument): IMcpServerArgument {\n\t\t\t\tif (arg.type === 'positional') {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...arg,\n\t\t\t\t\t\tvalueHint: arg.value_hint,\n\t\t\t\t\t\tisRepeated: arg.is_repeated,\n\t\t\t\t\t\tisRequired: arg.is_required,\n\t\t\t\t\t\tisSecret: arg.is_secret,\n\t\t\t\t\t\tvariables: arg.variables ? convertVariables(arg.variables) : undefined,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\t...arg,\n\t\t\t\t\tisRepeated: arg.is_repeated,\n\t\t\t\t\tisRequired: arg.is_required,\n\t\t\t\t\tisSecret: arg.is_secret,\n\t\t\t\t\tvariables: arg.variables ? convertVariables(arg.variables) : undefined,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction convertKeyValueInput(input: RawGalleryMcpServerKeyValueInput): IMcpServerKeyValueInput {\n\t\t\t\treturn {\n\t\t\t\t\t...input,\n\t\t\t\t\tisRequired: input.is_required,\n\t\t\t\t\tisSecret: input.is_secret,\n\t\t\t\t\tvariables: input.variables ? convertVariables(input.variables) : undefined,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction convertTransport(input: RawGalleryTransport): Transport {\n\t\t\t\tswitch (input.type) {\n\t\t\t\t\tcase 'stdio':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: TransportType.STDIO,\n\t\t\t\t\t\t};\n\t\t\t\t\tcase 'streamable-http':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: TransportType.STREAMABLE_HTTP,\n\t\t\t\t\t\t\turl: input.url,\n\t\t\t\t\t\t\theaders: input.headers?.map(convertKeyValueInput),\n\t\t\t\t\t\t};\n\t\t\t\t\tcase 'sse':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: TransportType.SSE,\n\t\t\t\t\t\t\turl: input.url,\n\t\t\t\t\t\t\theaders: input.headers?.map(convertKeyValueInput),\n\t\t\t\t\t\t};\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: TransportType.STDIO,\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction convertRegistryType(input: string): RegistryType {\n\t\t\t\tswitch (input) {\n\t\t\t\t\tcase 'npm':\n\t\t\t\t\t\treturn RegistryType.NODE;\n\t\t\t\t\tcase 'docker':\n\t\t\t\t\tcase 'docker-hub':\n\t\t\t\t\tcase 'oci':\n\t\t\t\t\t\treturn RegistryType.DOCKER;\n\t\t\t\t\tcase 'pypi':\n\t\t\t\t\t\treturn RegistryType.PYTHON;\n\t\t\t\t\tcase 'nuget':\n\t\t\t\t\t\treturn RegistryType.NUGET;\n\t\t\t\t\tcase 'mcpb':\n\t\t\t\t\t\treturn RegistryType.MCPB;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn RegistryType.NODE;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst gitHubInfo: RawGitHubInfo | undefined = from._meta['io.modelcontextprotocol.registry/publisher-provided']?.github as RawGitHubInfo | undefined;\n\n\t\t\treturn {\n\t\t\t\tid: registryInfo.id,\n\t\t\t\tname: from.name,\n\t\t\t\tdescription: from.description,\n\t\t\t\trepository: from.repository ? {\n\t\t\t\t\turl: from.repository.url,\n\t\t\t\t\tsource: from.repository.source,\n\t\t\t\t\tid: from.repository.id,\n\t\t\t\t} : undefined,\n\t\t\t\treadme: from.repository?.readme,\n\t\t\t\tversion: from.version,\n\t\t\t\tcreatedAt: from.created_at,\n\t\t\t\tupdatedAt: from.updated_at,\n\t\t\t\tpackages: from.packages?.map<IMcpServerPackage>(p => ({\n\t\t\t\t\tidentifier: p.identifier ?? p.name,\n\t\t\t\t\tregistryType: convertRegistryType(p.registry_type ?? p.registry_name),\n\t\t\t\t\tversion: p.version,\n\t\t\t\t\tfileSha256: p.file_sha256,\n\t\t\t\t\tregistryBaseUrl: p.registry_base_url,\n\t\t\t\t\ttransport: p.transport ? convertTransport(p.transport) : { type: TransportType.STDIO },\n\t\t\t\t\tpackageArguments: p.package_arguments?.map(convertServerArgument),\n\t\t\t\t\truntimeHint: p.runtime_hint,\n\t\t\t\t\truntimeArguments: p.runtime_arguments?.map(convertServerArgument),\n\t\t\t\t\tenvironmentVariables: p.environment_variables?.map(convertKeyValueInput),\n\t\t\t\t})),\n\t\t\t\tremotes: from.remotes?.map(remote => {\n\t\t\t\t\tconst type = (<RawGalleryTransport>remote).type ?? (<McpServerDeprecatedRemote>remote).transport_type ?? (<McpServerDeprecatedRemote>remote).transport;\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: type === TransportType.SSE ? TransportType.SSE : TransportType.STREAMABLE_HTTP,\n\t\t\t\t\t\turl: remote.url,\n\t\t\t\t\t\theaders: remote.headers?.map(convertKeyValueInput)\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\tregistryInfo: {\n\t\t\t\t\tisLatest: registryInfo.is_latest,\n\t\t\t\t\tpublishedAt: registryInfo.published_at,\n\t\t\t\t\tupdatedAt: registryInfo.updated_at,\n\t\t\t\t},\n\t\t\t\tgithubInfo: gitHubInfo ? {\n\t\t\t\t\tname: gitHubInfo.name,\n\t\t\t\t\tnameWithOwner: gitHubInfo.name_with_owner,\n\t\t\t\t\tdisplayName: gitHubInfo.display_name,\n\t\t\t\t\tisInOrganization: gitHubInfo.is_in_organization,\n\t\t\t\t\tlicense: gitHubInfo.license,\n\t\t\t\t\topengraphImageUrl: gitHubInfo.opengraph_image_url,\n\t\t\t\t\townerAvatarUrl: gitHubInfo.owner_avatar_url,\n\t\t\t\t\tprimaryLanguage: gitHubInfo.primary_language,\n\t\t\t\t\tprimaryLanguageColor: gitHubInfo.primary_language_color,\n\t\t\t\t\tpushedAt: gitHubInfo.pushed_at,\n\t\t\t\t\tstargazerCount: gitHubInfo.stargazer_count,\n\t\t\t\t\ttopics: gitHubInfo.topics,\n\t\t\t\t\tusesCustomOpengraphImage: gitHubInfo.uses_custom_opengraph_image\n\t\t\t\t} : undefined\n\t\t\t};\n\t\t}\n\t}\n\n\texport const SERIALIZER = new Serializer();\n}\n\nnamespace McpServerSchemaVersion_v0_1 {\n\n\texport const VERSION = 'v0.1';\n\texport const SCHEMA = `https://static.modelcontextprotocol.io/schemas/2025-09-29/server.schema.json`;\n\n\tinterface RawGalleryMcpServerInput {\n\t\treadonly choices?: readonly string[];\n\t\treadonly default?: string;\n\t\treadonly description?: string;\n\t\treadonly format?: 'string' | 'number' | 'boolean' | 'filepath';\n\t\treadonly isRequired?: boolean;\n\t\treadonly isSecret?: boolean;\n\t\treadonly placeholder?: string;\n\t\treadonly value?: string;\n\t}\n\n\tinterface RawGalleryMcpServerVariableInput extends RawGalleryMcpServerInput {\n\t\treadonly variables?: Record<string, RawGalleryMcpServerInput>;\n\t}\n\n\tinterface RawGalleryMcpServerPositionalArgument extends RawGalleryMcpServerVariableInput {\n\t\treadonly type: 'positional';\n\t\treadonly valueHint?: string;\n\t\treadonly isRepeated?: boolean;\n\t}\n\n\tinterface RawGalleryMcpServerNamedArgument extends RawGalleryMcpServerVariableInput {\n\t\treadonly type: 'named';\n\t\treadonly name: string;\n\t\treadonly isRepeated?: boolean;\n\t}\n\n\tinterface RawGalleryMcpServerKeyValueInput extends RawGalleryMcpServerVariableInput {\n\t\treadonly name: string;\n\t}\n\n\ttype RawGalleryMcpServerArgument = RawGalleryMcpServerPositionalArgument | RawGalleryMcpServerNamedArgument;\n\n\ttype RawGalleryMcpServerRemotes = ReadonlyArray<SseTransport | StreamableHttpTransport>;\n\n\ttype RawGalleryTransport = StdioTransport | StreamableHttpTransport | SseTransport;\n\n\tinterface StdioTransport {\n\t\treadonly type: TransportType.STDIO;\n\t}\n\n\tinterface StreamableHttpTransport {\n\t\treadonly type: TransportType.STREAMABLE_HTTP;\n\t\treadonly url: string;\n\t\treadonly headers?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t}\n\n\tinterface SseTransport {\n\t\treadonly type: TransportType.SSE;\n\t\treadonly url: string;\n\t\treadonly headers?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t}\n\n\tinterface RawGalleryMcpServerPackage {\n\t\treadonly identifier: string;\n\t\treadonly registryType: RegistryType;\n\t\treadonly transport: RawGalleryTransport;\n\t\treadonly fileSha256?: string;\n\t\treadonly environmentVariables?: ReadonlyArray<RawGalleryMcpServerKeyValueInput>;\n\t\treadonly packageArguments?: readonly RawGalleryMcpServerArgument[];\n\t\treadonly registryBaseUrl?: string;\n\t\treadonly runtimeArguments?: readonly RawGalleryMcpServerArgument[];\n\t\treadonly runtimeHint?: string;\n\t\treadonly version?: string;\n\t}\n\n\tinterface RawGalleryMcpServer {\n\t\treadonly name: string;\n\t\treadonly description: string;\n\t\treadonly version: string;\n\t\treadonly $schema: string;\n\t\treadonly title?: string;\n\t\treadonly icons?: IRawGalleryMcpServerIcon[];\n\t\treadonly repository?: {\n\t\t\treadonly source: string;\n\t\t\treadonly url: string;\n\t\t\treadonly subfolder?: string;\n\t\t\treadonly id?: string;\n\t\t};\n\t\treadonly websiteUrl?: string;\n\t\treadonly packages?: readonly RawGalleryMcpServerPackage[];\n\t\treadonly remotes?: RawGalleryMcpServerRemotes;\n\t\treadonly _meta?: {\n\t\t\treadonly 'io.modelcontextprotocol.registry/publisher-provided'?: Record<string, unknown>;\n\t\t} & IAzureAPICenterInfo;\n\t}\n\n\tinterface RawGalleryMcpServerInfo {\n\t\treadonly server: RawGalleryMcpServer;\n\t\treadonly _meta: {\n\t\t\treadonly 'io.modelcontextprotocol.registry/official'?: {\n\t\t\t\treadonly status: GalleryMcpServerStatus;\n\t\t\t\treadonly isLatest: boolean;\n\t\t\t\treadonly publishedAt: string;\n\t\t\t\treadonly updatedAt?: string;\n\t\t\t};\n\t\t};\n\t}\n\n\tinterface RawGalleryMcpServersResult {\n\t\treadonly metadata: {\n\t\t\treadonly count: number;\n\t\t\treadonly nextCursor?: string;\n\t\t};\n\t\treadonly servers: readonly RawGalleryMcpServerInfo[];\n\t}\n\n\tclass Serializer implements IGalleryMcpServerDataSerializer {\n\n\t\tpublic toRawGalleryMcpServerResult(input: unknown): IRawGalleryMcpServersResult | undefined {\n\t\t\tif (!input || typeof input !== 'object' || !Array.isArray((input as RawGalleryMcpServersResult).servers)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst from = <RawGalleryMcpServersResult>input;\n\n\t\t\tconst servers: IRawGalleryMcpServer[] = [];\n\t\t\tfor (const server of from.servers) {\n\t\t\t\tconst rawServer = this.toRawGalleryMcpServer(server);\n\t\t\t\tif (!rawServer) {\n\t\t\t\t\tif (servers.length === 0) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tservers.push(rawServer);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmetadata: from.metadata,\n\t\t\t\tservers\n\t\t\t};\n\t\t}\n\n\t\tpublic toRawGalleryMcpServer(input: unknown): IRawGalleryMcpServer | undefined {\n\t\t\tif (!input || typeof input !== 'object') {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst from = <RawGalleryMcpServerInfo>input;\n\n\t\t\tif (\n\t\t\t\t(!from.server || !isObject(from.server))\n\t\t\t\t|| (!from.server.name || !isString(from.server.name))\n\t\t\t\t|| (!from.server.description || !isString(from.server.description))\n\t\t\t\t|| (!from.server.version || !isString(from.server.version))\n\t\t\t) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (from.server.$schema && from.server.$schema !== McpServerSchemaVersion_v0_1.SCHEMA) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst { 'io.modelcontextprotocol.registry/official': registryInfo, ...apicInfo } = from._meta;\n\t\t\tconst githubInfo = from.server._meta?.['io.modelcontextprotocol.registry/publisher-provided']?.github as IGitHubInfo | undefined;\n\n\t\t\treturn {\n\t\t\t\tname: from.server.name,\n\t\t\t\tdescription: from.server.description,\n\t\t\t\tversion: from.server.version,\n\t\t\t\ttitle: from.server.title,\n\t\t\t\trepository: from.server.repository ? {\n\t\t\t\t\turl: from.server.repository.url,\n\t\t\t\t\tsource: from.server.repository.source,\n\t\t\t\t\tid: from.server.repository.id,\n\t\t\t\t} : undefined,\n\t\t\t\treadme: githubInfo?.readme,\n\t\t\t\ticons: from.server.icons,\n\t\t\t\twebsiteUrl: from.server.websiteUrl,\n\t\t\t\tpackages: from.server.packages,\n\t\t\t\tremotes: from.server.remotes,\n\t\t\t\tstatus: registryInfo?.status,\n\t\t\t\tregistryInfo,\n\t\t\t\tgithubInfo,\n\t\t\t\tapicInfo\n\t\t\t};\n\t\t}\n\t}\n\n\texport const SERIALIZER = new Serializer();\n}\n\nnamespace McpServerSchemaVersion_v0 {\n\n\texport const VERSION = 'v0';\n\n\tclass Serializer implements IGalleryMcpServerDataSerializer {\n\n\t\tprivate readonly galleryMcpServerDataSerializers: IGalleryMcpServerDataSerializer[] = [];\n\n\t\tconstructor() {\n\t\t\tthis.galleryMcpServerDataSerializers.push(McpServerSchemaVersion_v0_1.SERIALIZER);\n\t\t\tthis.galleryMcpServerDataSerializers.push(McpServerSchemaVersion_v2025_07_09.SERIALIZER);\n\t\t}\n\n\t\tpublic toRawGalleryMcpServerResult(input: unknown): IRawGalleryMcpServersResult | undefined {\n\t\t\tfor (const serializer of this.galleryMcpServerDataSerializers) {\n\t\t\t\tconst result = serializer.toRawGalleryMcpServerResult(input);\n\t\t\t\tif (result) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\tpublic toRawGalleryMcpServer(input: unknown): IRawGalleryMcpServer | undefined {\n\t\t\tfor (const serializer of this.galleryMcpServerDataSerializers) {\n\t\t\t\tconst result = serializer.toRawGalleryMcpServer(input);\n\t\t\t\tif (result) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\texport const SERIALIZER = new Serializer();\n}\n\nconst DefaultPageSize = 50;\n\ninterface IQueryState {\n\treadonly searchText?: string;\n\treadonly cursor?: string;\n\treadonly pageSize: number;\n}\n\nconst DefaultQueryState: IQueryState = {\n\tpageSize: DefaultPageSize,\n};\n\nclass Query {\n\n\tconstructor(private state = DefaultQueryState) { }\n\n\tget pageSize(): number { return this.state.pageSize; }\n\tget searchText(): string | undefined { return this.state.searchText; }\n\tget cursor(): string | undefined { return this.state.cursor; }\n\n\twithPage(cursor: string, pageSize: number = this.pageSize): Query {\n\t\treturn new Query({ ...this.state, pageSize, cursor });\n\t}\n\n\twithSearchText(searchText: string | undefined): Query {\n\t\treturn new Query({ ...this.state, searchText });\n\t}\n}\n\nexport class McpGalleryService extends Disposable implements IMcpGalleryService {\n\n\t_serviceBrand: undefined;\n\n\tprivate galleryMcpServerDataSerializers: Map<string, IGalleryMcpServerDataSerializer>;\n\n\tconstructor(\n\t\t@IRequestService private readonly requestService: IRequestService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IMcpGalleryManifestService private readonly mcpGalleryManifestService: IMcpGalleryManifestService,\n\t) {\n\t\tsuper();\n\t\tthis.galleryMcpServerDataSerializers = new Map();\n\t\tthis.galleryMcpServerDataSerializers.set(McpServerSchemaVersion_v0.VERSION, McpServerSchemaVersion_v0.SERIALIZER);\n\t\tthis.galleryMcpServerDataSerializers.set(McpServerSchemaVersion_v0_1.VERSION, McpServerSchemaVersion_v0_1.SERIALIZER);\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn this.mcpGalleryManifestService.mcpGalleryManifestStatus === McpGalleryManifestStatus.Available;\n\t}\n\n\tasync query(options?: IQueryOptions, token: CancellationToken = CancellationToken.None): Promise<IIterativePager<IGalleryMcpServer>> {\n\t\tconst mcpGalleryManifest = await this.mcpGalleryManifestService.getMcpGalleryManifest();\n\t\tif (!mcpGalleryManifest) {\n\t\t\treturn {\n\t\t\t\tfirstPage: { items: [], hasMore: false },\n\t\t\t\tgetNextPage: async () => ({ items: [], hasMore: false })\n\t\t\t};\n\t\t}\n\n\t\tlet query = new Query();\n\t\tif (options?.text) {\n\t\t\tquery = query.withSearchText(options.text.trim());\n\t\t}\n\n\t\tconst { servers, metadata } = await this.queryGalleryMcpServers(query, mcpGalleryManifest, token);\n\n\t\tlet currentCursor = metadata.nextCursor;\n\t\treturn {\n\t\t\tfirstPage: { items: servers, hasMore: !!metadata.nextCursor },\n\t\t\tgetNextPage: async (ct: CancellationToken): Promise<IIterativePage<IGalleryMcpServer>> => {\n\t\t\t\tif (ct.isCancellationRequested) {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t\tif (!currentCursor) {\n\t\t\t\t\treturn { items: [], hasMore: false };\n\t\t\t\t}\n\t\t\t\tconst { servers, metadata: nextMetadata } = await this.queryGalleryMcpServers(query.withPage(currentCursor).withSearchText(undefined), mcpGalleryManifest, ct);\n\t\t\t\tcurrentCursor = nextMetadata.nextCursor;\n\t\t\t\treturn { items: servers, hasMore: !!nextMetadata.nextCursor };\n\t\t\t}\n\t\t};\n\t}\n\n\tasync getMcpServersFromGallery(infos: { name: string; id?: string }[]): Promise<IGalleryMcpServer[]> {\n\t\tconst mcpGalleryManifest = await this.mcpGalleryManifestService.getMcpGalleryManifest();\n\t\tif (!mcpGalleryManifest) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst mcpServers: IGalleryMcpServer[] = [];\n\t\tawait Promise.allSettled(infos.map(async info => {\n\t\t\tconst mcpServer = await this.getMcpServerByName(info, mcpGalleryManifest);\n\t\t\tif (mcpServer) {\n\t\t\t\tmcpServers.push(mcpServer);\n\t\t\t}\n\t\t}));\n\n\t\treturn mcpServers;\n\t}\n\n\tprivate async getMcpServerByName({ name, id }: { name: string; id?: string }, mcpGalleryManifest: IMcpGalleryManifest): Promise<IGalleryMcpServer | undefined> {\n\t\tconst mcpServerUrl = this.getLatestServerVersionUrl(name, mcpGalleryManifest);\n\t\tif (mcpServerUrl) {\n\t\t\tconst mcpServer = await this.getMcpServer(mcpServerUrl);\n\t\t\tif (mcpServer) {\n\t\t\t\treturn mcpServer;\n\t\t\t}\n\t\t}\n\n\t\tconst byNameUrl = this.getNamedServerUrl(name, mcpGalleryManifest);\n\t\tif (byNameUrl) {\n\t\t\tconst mcpServer = await this.getMcpServer(byNameUrl);\n\t\t\tif (mcpServer) {\n\t\t\t\treturn mcpServer;\n\t\t\t}\n\t\t}\n\n\t\tconst byIdUrl = id ? this.getServerIdUrl(id, mcpGalleryManifest) : undefined;\n\t\tif (byIdUrl) {\n\t\t\tconst mcpServer = await this.getMcpServer(byIdUrl);\n\t\t\tif (mcpServer) {\n\t\t\t\treturn mcpServer;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tasync getReadme(gallery: IGalleryMcpServer, token: CancellationToken): Promise<string> {\n\t\tconst readmeUrl = gallery.readmeUrl;\n\t\tif (!readmeUrl) {\n\t\t\treturn Promise.resolve(localize('noReadme', 'No README available'));\n\t\t}\n\n\t\tconst uri = URI.parse(readmeUrl);\n\t\tif (uri.scheme === Schemas.file) {\n\t\t\ttry {\n\t\t\t\tconst content = await this.fileService.readFile(uri);\n\t\t\t\treturn content.value.toString();\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(`Failed to read file from ${uri}: ${error}`);\n\t\t\t}\n\t\t}\n\n\t\tif (uri.authority !== 'raw.githubusercontent.com') {\n\t\t\treturn new MarkdownString(localize('readme.viewInBrowser', \"You can find information about this server [here]({0})\", readmeUrl)).value;\n\t\t}\n\n\t\tconst context = await this.requestService.request({\n\t\t\ttype: 'GET',\n\t\t\turl: readmeUrl,\n\t\t}, token);\n\n\t\tconst result = await asText(context);\n\t\tif (!result) {\n\t\t\tthrow new Error(`Failed to fetch README from ${readmeUrl}`);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate toGalleryMcpServer(server: IRawGalleryMcpServer, manifest: IMcpGalleryManifest | null): IGalleryMcpServer {\n\t\tlet publisher = '';\n\t\tlet displayName = server.title;\n\n\t\tif (server.githubInfo?.name) {\n\t\t\tif (!displayName) {\n\t\t\t\tdisplayName = server.githubInfo.name.split('-').map(s => s.toLowerCase() === 'mcp' ? 'MCP' : s.toLowerCase() === 'github' ? 'GitHub' : uppercaseFirstLetter(s)).join(' ');\n\t\t\t}\n\t\t\tpublisher = server.githubInfo.nameWithOwner.split('/')[0];\n\t\t} else {\n\t\t\tconst nameParts = server.name.split('/');\n\t\t\tif (nameParts.length > 0) {\n\t\t\t\tconst domainParts = nameParts[0].split('.');\n\t\t\t\tif (domainParts.length > 0) {\n\t\t\t\t\tpublisher = domainParts[domainParts.length - 1]; // Always take the last part as owner\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!displayName) {\n\t\t\t\tdisplayName = nameParts[nameParts.length - 1].split('-').map(s => uppercaseFirstLetter(s)).join(' ');\n\t\t\t}\n\t\t}\n\n\t\tif (server.githubInfo?.displayName) {\n\t\t\tdisplayName = server.githubInfo.displayName;\n\t\t}\n\n\t\tlet icon: { light: string; dark: string } | undefined;\n\n\t\tif (server.githubInfo?.preferredImage) {\n\t\t\ticon = {\n\t\t\t\tlight: server.githubInfo.preferredImage,\n\t\t\t\tdark: server.githubInfo.preferredImage\n\t\t\t};\n\t\t}\n\n\t\telse if (server.githubInfo?.ownerAvatarUrl) {\n\t\t\ticon = {\n\t\t\t\tlight: server.githubInfo.ownerAvatarUrl,\n\t\t\t\tdark: server.githubInfo.ownerAvatarUrl\n\t\t\t};\n\t\t}\n\n\t\telse if (server.apicInfo?.['x-ms-icon']) {\n\t\t\ticon = {\n\t\t\t\tlight: server.apicInfo['x-ms-icon'],\n\t\t\t\tdark: server.apicInfo['x-ms-icon']\n\t\t\t};\n\t\t}\n\n\t\telse if (server.icons && server.icons.length > 0) {\n\t\t\tconst lightIcon = server.icons.find(icon => icon.theme === 'light') ?? server.icons[0];\n\t\t\tconst darkIcon = server.icons.find(icon => icon.theme === 'dark') ?? lightIcon;\n\t\t\ticon = {\n\t\t\t\tlight: lightIcon.src,\n\t\t\t\tdark: darkIcon.src\n\t\t\t};\n\t\t}\n\n\t\tconst webUrl = manifest ? this.getWebUrl(server.name, manifest) : undefined;\n\t\tconst publisherUrl = manifest ? this.getPublisherUrl(publisher, manifest) : undefined;\n\n\t\treturn {\n\t\t\tid: server.id,\n\t\t\tname: server.name,\n\t\t\tdisplayName,\n\t\t\tgalleryUrl: manifest?.url,\n\t\t\twebUrl,\n\t\t\tdescription: server.description,\n\t\t\tstatus: server.status ?? GalleryMcpServerStatus.Active,\n\t\t\tversion: server.version,\n\t\t\tisLatest: server.registryInfo?.isLatest ?? true,\n\t\t\tpublishDate: server.registryInfo?.publishedAt ? Date.parse(server.registryInfo.publishedAt) : undefined,\n\t\t\tlastUpdated: server.githubInfo?.pushedAt ? Date.parse(server.githubInfo.pushedAt) : server.registryInfo?.updatedAt ? Date.parse(server.registryInfo.updatedAt) : undefined,\n\t\t\trepositoryUrl: server.repository?.url,\n\t\t\treadme: server.readme,\n\t\t\ticon,\n\t\t\tpublisher,\n\t\t\tpublisherUrl,\n\t\t\tlicense: server.githubInfo?.license,\n\t\t\tstarsCount: server.githubInfo?.stargazerCount,\n\t\t\ttopics: server.githubInfo?.topics,\n\t\t\tconfiguration: {\n\t\t\t\tpackages: server.packages,\n\t\t\t\tremotes: server.remotes\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate async queryGalleryMcpServers(query: Query, mcpGalleryManifest: IMcpGalleryManifest, token: CancellationToken): Promise<IGalleryMcpServersResult> {\n\t\tconst { servers, metadata } = await this.queryRawGalleryMcpServers(query, mcpGalleryManifest, token);\n\t\treturn {\n\t\t\tservers: servers.map(item => this.toGalleryMcpServer(item, mcpGalleryManifest)),\n\t\t\tmetadata\n\t\t};\n\t}\n\n\tprivate async queryRawGalleryMcpServers(query: Query, mcpGalleryManifest: IMcpGalleryManifest, token: CancellationToken): Promise<IRawGalleryMcpServersResult> {\n\t\tconst mcpGalleryUrl = this.getMcpGalleryUrl(mcpGalleryManifest);\n\t\tif (!mcpGalleryUrl) {\n\t\t\treturn { servers: [], metadata: { count: 0 } };\n\t\t}\n\n\t\tconst uri = URI.parse(mcpGalleryUrl);\n\t\tif (uri.scheme === Schemas.file) {\n\t\t\ttry {\n\t\t\t\tconst content = await this.fileService.readFile(uri);\n\t\t\t\tconst data = content.value.toString();\n\t\t\t\treturn JSON.parse(data);\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(`Failed to read file from ${uri}: ${error}`);\n\t\t\t}\n\t\t}\n\n\t\tlet url = `${mcpGalleryUrl}?limit=${query.pageSize}`;\n\t\tif (query.cursor) {\n\t\t\turl += `&cursor=${query.cursor}`;\n\t\t}\n\t\tif (query.searchText) {\n\t\t\tconst text = encodeURIComponent(query.searchText);\n\t\t\turl += `&search=${text}`;\n\t\t}\n\n\t\tconst context = await this.requestService.request({\n\t\t\ttype: 'GET',\n\t\t\turl,\n\t\t}, token);\n\n\t\tconst data = await asJson(context);\n\n\t\tif (!data) {\n\t\t\treturn { servers: [], metadata: { count: 0 } };\n\t\t}\n\n\t\tconst result = this.serializeMcpServersResult(data, mcpGalleryManifest);\n\n\t\tif (!result) {\n\t\t\tthrow new Error(`Failed to serialize MCP servers result from ${mcpGalleryUrl}`, data);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync getMcpServer(mcpServerUrl: string, mcpGalleryManifest?: IMcpGalleryManifest | null): Promise<IGalleryMcpServer | undefined> {\n\t\tconst context = await this.requestService.request({\n\t\t\ttype: 'GET',\n\t\t\turl: mcpServerUrl,\n\t\t}, CancellationToken.None);\n\n\t\tif (context.res.statusCode && context.res.statusCode >= 400 && context.res.statusCode < 500) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst data = await asJson(context);\n\t\tif (!data) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!mcpGalleryManifest) {\n\t\t\tmcpGalleryManifest = await this.mcpGalleryManifestService.getMcpGalleryManifest();\n\t\t}\n\t\tmcpGalleryManifest = mcpGalleryManifest && mcpServerUrl.startsWith(mcpGalleryManifest.url) ? mcpGalleryManifest : null;\n\n\t\tconst server = this.serializeMcpServer(data, mcpGalleryManifest);\n\t\tif (!server) {\n\t\t\tthrow new Error(`Failed to serialize MCP server from ${mcpServerUrl}`, data);\n\t\t}\n\n\t\treturn this.toGalleryMcpServer(server, mcpGalleryManifest);\n\t}\n\n\tprivate serializeMcpServer(data: unknown, mcpGalleryManifest: IMcpGalleryManifest | null): IRawGalleryMcpServer | undefined {\n\t\treturn this.getSerializer(mcpGalleryManifest)?.toRawGalleryMcpServer(data);\n\t}\n\n\tprivate serializeMcpServersResult(data: unknown, mcpGalleryManifest: IMcpGalleryManifest | null): IRawGalleryMcpServersResult | undefined {\n\t\treturn this.getSerializer(mcpGalleryManifest)?.toRawGalleryMcpServerResult(data);\n\t}\n\n\tprivate getSerializer(mcpGalleryManifest: IMcpGalleryManifest | null): IGalleryMcpServerDataSerializer | undefined {\n\t\tconst version = mcpGalleryManifest?.version ?? 'v0';\n\t\treturn this.galleryMcpServerDataSerializers.get(version);\n\t}\n\n\tprivate getNamedServerUrl(name: string, mcpGalleryManifest: IMcpGalleryManifest): string | undefined {\n\t\tconst namedResourceUriTemplate = getMcpGalleryManifestResourceUri(mcpGalleryManifest, McpGalleryResourceType.McpServerNamedResourceUri);\n\t\tif (!namedResourceUriTemplate) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn format2(namedResourceUriTemplate, { name });\n\t}\n\n\tprivate getServerIdUrl(id: string, mcpGalleryManifest: IMcpGalleryManifest): string | undefined {\n\t\tconst resourceUriTemplate = getMcpGalleryManifestResourceUri(mcpGalleryManifest, McpGalleryResourceType.McpServerIdUri);\n\t\tif (!resourceUriTemplate) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn format2(resourceUriTemplate, { id });\n\t}\n\n\tprivate getLatestServerVersionUrl(name: string, mcpGalleryManifest: IMcpGalleryManifest): string | undefined {\n\t\tconst latestVersionResourceUriTemplate = getMcpGalleryManifestResourceUri(mcpGalleryManifest, McpGalleryResourceType.McpServerLatestVersionUri);\n\t\tif (!latestVersionResourceUriTemplate) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn format2(latestVersionResourceUriTemplate, { name: encodeURIComponent(name) });\n\t}\n\n\tprivate getWebUrl(name: string, mcpGalleryManifest: IMcpGalleryManifest): string | undefined {\n\t\tconst resourceUriTemplate = getMcpGalleryManifestResourceUri(mcpGalleryManifest, McpGalleryResourceType.McpServerWebUri);\n\t\tif (!resourceUriTemplate) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn format2(resourceUriTemplate, { name });\n\t}\n\n\tprivate getPublisherUrl(name: string, mcpGalleryManifest: IMcpGalleryManifest): string | undefined {\n\t\tconst resourceUriTemplate = getMcpGalleryManifestResourceUri(mcpGalleryManifest, McpGalleryResourceType.PublisherUriTemplate);\n\t\tif (!resourceUriTemplate) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn format2(resourceUriTemplate, { name });\n\t}\n\n\tprivate getMcpGalleryUrl(mcpGalleryManifest: IMcpGalleryManifest): string | undefined {\n\t\treturn getMcpGalleryManifestResourceUri(mcpGalleryManifest, McpGalleryResourceType.McpServersQueryService);\n\t}\n\n}\n"]}