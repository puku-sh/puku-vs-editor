{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/mcp/common/mcpGalleryManifestServiceIpc.ts","vs/platform/mcp/common/mcpGalleryManifestServiceIpc.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;AACxD,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,+BAA+B,CAAC;AAC/D,OAAO,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAI/D,MAAM,OAAO,4BAA6B,SAAQ,UAAU;IAa3D,IAAI,wBAAwB;QAC3B,OAAO,IAAI,CAAC,mBAAmB,CAAC,CAAC,sDAAoC,CAAC,yDAAqC,CAAC;IAC7G,CAAC;IAED,YAAY,MAA+B;QAC1C,KAAK,EAAE,CAAC;QAdD,mCAA8B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAA8B,CAAC,CAAC;QAC1F,kCAA6B,GAAG,IAAI,CAAC,8BAA8B,CAAC,KAAK,CAAC;QAE3E,yCAAoC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAA4B,CAAC,CAAC;QAC9F,wCAAmC,GAAG,IAAI,CAAC,oCAAoC,CAAC,KAAK,CAAC;QAG9E,YAAO,GAAG,IAAI,OAAO,EAAE,CAAC;QAQxC,MAAM,CAAC,eAAe,CAAC,oBAAoB,EAAE;YAC5C,MAAM,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI;YACxB,IAAI,EAAE,KAAK,EAAK,OAAgB,EAAE,OAAe,EAAE,IAAc,EAAc,EAAE;gBAChF,QAAQ,OAAO,EAAE,CAAC;oBACjB,KAAK,uBAAuB,CAAC,CAAC,CAAC;wBAC9B,MAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAA+B,CAAC,CAAC,CAAC,IAAI,CAAC;wBACpF,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAM,CAAC;oBACnE,CAAC;gBACF,CAAC;gBACD,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;YACjC,CAAC;SACD,CAAC,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,qBAAqB;QAC1B,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QAC1B,OAAO,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC;IACzC,CAAC;IAEO,qBAAqB,CAAC,QAAoC;QACjE,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC;QACpC,IAAI,CAAC,8BAA8B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnD,IAAI,CAAC,oCAAoC,CAAC,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAC9E,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;IACrB,CAAC;CAED","file":"mcpGalleryManifestServiceIpc.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Barrier } from '../../../base/common/async.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IChannelServer } from '../../../base/parts/ipc/common/ipc.js';\nimport { IMcpGalleryManifest, IMcpGalleryManifestService, McpGalleryManifestStatus } from './mcpGalleryManifest.js';\n\nexport class McpGalleryManifestIPCService extends Disposable implements IMcpGalleryManifestService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _onDidChangeMcpGalleryManifest = this._register(new Emitter<IMcpGalleryManifest | null>());\n\treadonly onDidChangeMcpGalleryManifest = this._onDidChangeMcpGalleryManifest.event;\n\n\tprivate _onDidChangeMcpGalleryManifestStatus = this._register(new Emitter<McpGalleryManifestStatus>());\n\treadonly onDidChangeMcpGalleryManifestStatus = this._onDidChangeMcpGalleryManifestStatus.event;\n\n\tprivate _mcpGalleryManifest: IMcpGalleryManifest | null | undefined;\n\tprivate readonly barrier = new Barrier();\n\n\tget mcpGalleryManifestStatus(): McpGalleryManifestStatus {\n\t\treturn this._mcpGalleryManifest ? McpGalleryManifestStatus.Available : McpGalleryManifestStatus.Unavailable;\n\t}\n\n\tconstructor(server: IChannelServer<unknown>) {\n\t\tsuper();\n\t\tserver.registerChannel('mcpGalleryManifest', {\n\t\t\tlisten: () => Event.None,\n\t\t\tcall: async <T>(context: unknown, command: string, args?: unknown): Promise<T> => {\n\t\t\t\tswitch (command) {\n\t\t\t\t\tcase 'setMcpGalleryManifest': {\n\t\t\t\t\t\tconst manifest = Array.isArray(args) ? args[0] as IMcpGalleryManifest | null : null;\n\t\t\t\t\t\treturn Promise.resolve(this.setMcpGalleryManifest(manifest)) as T;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Invalid call');\n\t\t\t}\n\t\t});\n\t}\n\n\tasync getMcpGalleryManifest(): Promise<IMcpGalleryManifest | null> {\n\t\tawait this.barrier.wait();\n\t\treturn this._mcpGalleryManifest ?? null;\n\t}\n\n\tprivate setMcpGalleryManifest(manifest: IMcpGalleryManifest | null): void {\n\t\tthis._mcpGalleryManifest = manifest;\n\t\tthis._onDidChangeMcpGalleryManifest.fire(manifest);\n\t\tthis._onDidChangeMcpGalleryManifestStatus.fire(this.mcpGalleryManifestStatus);\n\t\tthis.barrier.open();\n\t}\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Barrier } from '../../../base/common/async.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IChannelServer } from '../../../base/parts/ipc/common/ipc.js';\nimport { IMcpGalleryManifest, IMcpGalleryManifestService, McpGalleryManifestStatus } from './mcpGalleryManifest.js';\n\nexport class McpGalleryManifestIPCService extends Disposable implements IMcpGalleryManifestService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _onDidChangeMcpGalleryManifest = this._register(new Emitter<IMcpGalleryManifest | null>());\n\treadonly onDidChangeMcpGalleryManifest = this._onDidChangeMcpGalleryManifest.event;\n\n\tprivate _onDidChangeMcpGalleryManifestStatus = this._register(new Emitter<McpGalleryManifestStatus>());\n\treadonly onDidChangeMcpGalleryManifestStatus = this._onDidChangeMcpGalleryManifestStatus.event;\n\n\tprivate _mcpGalleryManifest: IMcpGalleryManifest | null | undefined;\n\tprivate readonly barrier = new Barrier();\n\n\tget mcpGalleryManifestStatus(): McpGalleryManifestStatus {\n\t\treturn this._mcpGalleryManifest ? McpGalleryManifestStatus.Available : McpGalleryManifestStatus.Unavailable;\n\t}\n\n\tconstructor(server: IChannelServer<unknown>) {\n\t\tsuper();\n\t\tserver.registerChannel('mcpGalleryManifest', {\n\t\t\tlisten: () => Event.None,\n\t\t\tcall: async <T>(context: unknown, command: string, args?: unknown): Promise<T> => {\n\t\t\t\tswitch (command) {\n\t\t\t\t\tcase 'setMcpGalleryManifest': {\n\t\t\t\t\t\tconst manifest = Array.isArray(args) ? args[0] as IMcpGalleryManifest | null : null;\n\t\t\t\t\t\treturn Promise.resolve(this.setMcpGalleryManifest(manifest)) as T;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Invalid call');\n\t\t\t}\n\t\t});\n\t}\n\n\tasync getMcpGalleryManifest(): Promise<IMcpGalleryManifest | null> {\n\t\tawait this.barrier.wait();\n\t\treturn this._mcpGalleryManifest ?? null;\n\t}\n\n\tprivate setMcpGalleryManifest(manifest: IMcpGalleryManifest | null): void {\n\t\tthis._mcpGalleryManifest = manifest;\n\t\tthis._onDidChangeMcpGalleryManifest.fire(manifest);\n\t\tthis._onDidChangeMcpGalleryManifestStatus.fire(this.mcpGalleryManifestStatus);\n\t\tthis.barrier.open();\n\t}\n\n}\n"]}