{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/keybinding/test/common/keybindingResolver.test.ts","vs/platform/keybinding/test/common/keybindingResolver.test.ts"],"names":[],"mappings":"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","file":"keybindingResolver.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { decodeKeybinding, createSimpleKeybinding, KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ContextKeyExpr, ContextKeyExpression, IContext } from '../../../contextkey/common/contextkey.js';\nimport { KeybindingResolver, ResultKind } from '../../common/keybindingResolver.js';\nimport { ResolvedKeybindingItem } from '../../common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../common/usLayoutResolvedKeybinding.js';\nimport { createUSLayoutResolvedKeybinding } from './keybindingsTestUtils.js';\n\nfunction createContext(ctx: any) {\n\treturn {\n\t\tgetValue: (key: string) => {\n\t\t\treturn ctx[key];\n\t\t}\n\t};\n}\n\nsuite('KeybindingResolver', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction kbItem(keybinding: number | number[], command: string, commandArgs: any, when: ContextKeyExpression | undefined, isDefault: boolean): ResolvedKeybindingItem {\n\t\tconst resolvedKeybinding = createUSLayoutResolvedKeybinding(keybinding, OS);\n\t\treturn new ResolvedKeybindingItem(\n\t\t\tresolvedKeybinding,\n\t\t\tcommand,\n\t\t\tcommandArgs,\n\t\t\twhen,\n\t\t\tisDefault,\n\t\t\tnull,\n\t\t\tfalse\n\t\t);\n\t}\n\n\tfunction getDispatchStr(chord: KeyCodeChord): string {\n\t\treturn USLayoutResolvedKeybinding.getDispatchStr(chord)!;\n\t}\n\n\ttest('resolve key', () => {\n\t\tconst keybinding = KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyZ;\n\t\tconst runtimeKeybinding = createSimpleKeybinding(keybinding, OS);\n\t\tconst contextRules = ContextKeyExpr.equals('bar', 'baz');\n\t\tconst keybindingItem = kbItem(keybinding, 'yes', null, contextRules, true);\n\n\t\tassert.strictEqual(contextRules.evaluate(createContext({ bar: 'baz' })), true);\n\t\tassert.strictEqual(contextRules.evaluate(createContext({ bar: 'bz' })), false);\n\n\t\tconst resolver = new KeybindingResolver([keybindingItem], [], () => { });\n\n\t\tconst r1 = resolver.resolve(createContext({ bar: 'baz' }), [], getDispatchStr(runtimeKeybinding));\n\t\tassert.ok(r1.kind === ResultKind.KbFound);\n\t\tassert.strictEqual(r1.commandId, 'yes');\n\n\t\tconst r2 = resolver.resolve(createContext({ bar: 'bz' }), [], getDispatchStr(runtimeKeybinding));\n\t\tassert.strictEqual(r2.kind, ResultKind.NoMatchingKb);\n\t});\n\n\ttest('resolve key with arguments', () => {\n\t\tconst commandArgs = { text: 'no' };\n\t\tconst keybinding = KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyZ;\n\t\tconst runtimeKeybinding = createSimpleKeybinding(keybinding, OS);\n\t\tconst contextRules = ContextKeyExpr.equals('bar', 'baz');\n\t\tconst keybindingItem = kbItem(keybinding, 'yes', commandArgs, contextRules, true);\n\n\t\tconst resolver = new KeybindingResolver([keybindingItem], [], () => { });\n\n\t\tconst r = resolver.resolve(createContext({ bar: 'baz' }), [], getDispatchStr(runtimeKeybinding));\n\t\tassert.ok(r.kind === ResultKind.KbFound);\n\t\tassert.strictEqual(r.commandArgs, commandArgs);\n\t});\n\n\tsuite('handle keybinding removals', () => {\n\n\t\ttest('simple 1', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), false),\n\t\t\t]);\n\t\t});\n\n\t\ttest('simple 2', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyC, 'yes3', null, ContextKeyExpr.equals('3', 'c'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true),\n\t\t\t\tkbItem(KeyCode.KeyC, 'yes3', null, ContextKeyExpr.equals('3', 'c'), false),\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with not matching when', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, ContextKeyExpr.equals('1', 'b'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with not matching keybinding', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyB, '-yes1', null, ContextKeyExpr.equals('1', 'a'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with matching keybinding and when', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, ContextKeyExpr.equals('1', 'a'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with unspecified keybinding', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(0, '-yes1', null, ContextKeyExpr.equals('1', 'a'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with unspecified when', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with unspecified when and unspecified keybinding', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(0, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #138997 - removal in default list', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, undefined, true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, undefined, true),\n\t\t\t\tkbItem(0, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst overrides: ResolvedKeybindingItem[] = [];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, undefined, true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #612#issuecomment-222109084 cannot remove keybindings for commands with ^', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, '^yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #140884 Unable to reassign F1 as keybinding for Show All Commands', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, undefined, false),\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, false)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #141638: Keyboard Shortcuts: Change When Expression might actually remove keybinding in Insiders', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, ContextKeyExpr.equals('a', '1'), false),\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, undefined, false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, ContextKeyExpr.equals('a', '1'), false)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #157751: Auto-quoting of context keys prevents removal of keybindings via UI', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, ContextKeyExpr.deserialize(`editorTextFocus && activeEditor != workbench.editor.notebook && editorLangId in julia.supportedLanguageIds`), true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, ContextKeyExpr.deserialize(`editorTextFocus && activeEditor != 'workbench.editor.notebook' && editorLangId in 'julia.supportedLanguageIds'`), false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, []);\n\t\t});\n\n\t\ttest('issue #160604: Remove keybindings with when clause does not work', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, ContextKeyExpr.true(), false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, []);\n\t\t});\n\n\t\ttest('contextIsEntirelyIncluded', () => {\n\t\t\tconst toContextKeyExpression = (expr: ContextKeyExpression | string | null) => {\n\t\t\t\tif (typeof expr === 'string' || !expr) {\n\t\t\t\t\treturn ContextKeyExpr.deserialize(expr);\n\t\t\t\t}\n\t\t\t\treturn expr;\n\t\t\t};\n\t\t\tconst assertIsIncluded = (a: ContextKeyExpression | string | null, b: ContextKeyExpression | string | null) => {\n\t\t\t\tassert.strictEqual(KeybindingResolver.whenIsEntirelyIncluded(toContextKeyExpression(a), toContextKeyExpression(b)), true);\n\t\t\t};\n\t\t\tconst assertIsNotIncluded = (a: ContextKeyExpression | string | null, b: ContextKeyExpression | string | null) => {\n\t\t\t\tassert.strictEqual(KeybindingResolver.whenIsEntirelyIncluded(toContextKeyExpression(a), toContextKeyExpression(b)), false);\n\t\t\t};\n\n\t\t\tassertIsIncluded(null, null);\n\t\t\tassertIsIncluded(null, ContextKeyExpr.true());\n\t\t\tassertIsIncluded(ContextKeyExpr.true(), null);\n\t\t\tassertIsIncluded(ContextKeyExpr.true(), ContextKeyExpr.true());\n\t\t\tassertIsIncluded('key1', null);\n\t\t\tassertIsIncluded('key1', '');\n\t\t\tassertIsIncluded('key1', 'key1');\n\t\t\tassertIsIncluded('key1', ContextKeyExpr.true());\n\t\t\tassertIsIncluded('!key1', '');\n\t\t\tassertIsIncluded('!key1', '!key1');\n\t\t\tassertIsIncluded('key2', '');\n\t\t\tassertIsIncluded('key2', 'key2');\n\t\t\tassertIsIncluded('key1 && key1 && key2 && key2', 'key2');\n\t\t\tassertIsIncluded('key1 && key2', 'key2');\n\t\t\tassertIsIncluded('key1 && key2', 'key1');\n\t\t\tassertIsIncluded('key1 && key2', '');\n\t\t\tassertIsIncluded('key1', 'key1 || key2');\n\t\t\tassertIsIncluded('key1 || !key1', 'key2 || !key2');\n\t\t\tassertIsIncluded('key1', 'key1 || key2 && key3');\n\n\t\t\tassertIsNotIncluded('key1', '!key1');\n\t\t\tassertIsNotIncluded('!key1', 'key1');\n\t\t\tassertIsNotIncluded('key1 && key2', 'key3');\n\t\t\tassertIsNotIncluded('key1 && key2', 'key4');\n\t\t\tassertIsNotIncluded('key1', 'key2');\n\t\t\tassertIsNotIncluded('key1 || key2', 'key2');\n\t\t\tassertIsNotIncluded('', 'key2');\n\t\t\tassertIsNotIncluded(null, 'key2');\n\t\t});\n\t});\n\n\tsuite('resolve command', () => {\n\n\t\tfunction _kbItem(keybinding: number | number[], command: string, when: ContextKeyExpression | undefined): ResolvedKeybindingItem {\n\t\t\treturn kbItem(keybinding, command, null, when, true);\n\t\t}\n\n\t\tconst items = [\n\t\t\t// This one will never match because its \"when\" is always overwritten by another one\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyX,\n\t\t\t\t'first',\n\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\tContextKeyExpr.equals('key1', true),\n\t\t\t\t\tContextKeyExpr.notEquals('key2', false)\n\t\t\t\t)\n\t\t\t),\n\t\t\t// This one always overwrites first\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyX,\n\t\t\t\t'second',\n\t\t\t\tContextKeyExpr.equals('key2', true)\n\t\t\t),\n\t\t\t// This one is a secondary mapping for `second`\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyZ,\n\t\t\t\t'second',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t// This one sometimes overwrites first\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyX,\n\t\t\t\t'third',\n\t\t\t\tContextKeyExpr.equals('key3', true)\n\t\t\t),\n\t\t\t// This one is always overwritten by another one\n\t\t\t_kbItem(\n\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyY,\n\t\t\t\t'fourth',\n\t\t\t\tContextKeyExpr.equals('key4', true)\n\t\t\t),\n\t\t\t// This one overwrites with a chord the previous one\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyY, KeyCode.KeyZ),\n\t\t\t\t'fifth',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t// This one has no keybinding\n\t\t\t_kbItem(\n\t\t\t\t0,\n\t\t\t\t'sixth',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU),\n\t\t\t\t'seventh',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK),\n\t\t\t\t'seventh',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU),\n\t\t\t\t'uncomment lines',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyC), // cmd+k cmd+c\n\t\t\t\t'comment lines',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyG, KeyMod.CtrlCmd | KeyCode.KeyC), // cmd+g cmd+c\n\t\t\t\t'unreachablechord',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyG, // cmd+g\n\t\t\t\t'eleven',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\t[KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyA, KeyCode.KeyB], // cmd+k a b\n\t\t\t\t'long multi chord',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\t[KeyMod.CtrlCmd | KeyCode.KeyB, KeyMod.CtrlCmd | KeyCode.KeyC], // cmd+b cmd+c\n\t\t\t\t'shadowed by long-multi-chord-2',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\t[KeyMod.CtrlCmd | KeyCode.KeyB, KeyMod.CtrlCmd | KeyCode.KeyC, KeyCode.KeyI], // cmd+b cmd+c i\n\t\t\t\t'long-multi-chord-2',\n\t\t\t\tundefined\n\t\t\t)\n\t\t];\n\n\t\tconst resolver = new KeybindingResolver(items, [], () => { });\n\n\t\tconst testKbLookupByCommand = (commandId: string, expectedKeys: number[] | number[][]) => {\n\t\t\t// Test lookup\n\t\t\tconst lookupResult = resolver.lookupKeybindings(commandId);\n\t\t\tassert.strictEqual(lookupResult.length, expectedKeys.length, 'Length mismatch @ commandId ' + commandId);\n\t\t\tfor (let i = 0, len = lookupResult.length; i < len; i++) {\n\t\t\t\tconst expected = createUSLayoutResolvedKeybinding(expectedKeys[i], OS)!;\n\n\t\t\t\tassert.strictEqual(lookupResult[i].resolvedKeybinding!.getUserSettingsLabel(), expected.getUserSettingsLabel(), 'value mismatch @ commandId ' + commandId);\n\t\t\t}\n\t\t};\n\n\t\tconst testResolve = (ctx: IContext, _expectedKey: number | number[], commandId: string) => {\n\t\t\tconst expectedKeybinding = decodeKeybinding(_expectedKey, OS)!;\n\n\t\t\tconst previousChord: string[] = [];\n\n\t\t\tfor (let i = 0, len = expectedKeybinding.chords.length; i < len; i++) {\n\n\t\t\t\tconst chord = getDispatchStr(<KeyCodeChord>expectedKeybinding.chords[i]);\n\n\t\t\t\tconst result = resolver.resolve(ctx, previousChord, chord);\n\n\t\t\t\tif (i === len - 1) {\n\t\t\t\t\t// if it's the final chord, then we should find a valid command,\n\t\t\t\t\t// and there should not be a chord.\n\t\t\t\t\tassert.ok(result.kind === ResultKind.KbFound, `Enters multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t\tassert.strictEqual(result.commandId, commandId, `Enters multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t} else if (i > 0) {\n\t\t\t\t\t// if this is an intermediate chord, we should not find a valid command,\n\t\t\t\t\t// and there should be an open chord we continue.\n\t\t\t\t\tassert.ok(result.kind === ResultKind.MoreChordsNeeded, `Continues multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t} else {\n\t\t\t\t\t// if it's not the final chord and not an intermediate, then we should not\n\t\t\t\t\t// find a valid command, and we should enter a chord.\n\t\t\t\t\tassert.ok(result.kind === ResultKind.MoreChordsNeeded, `Enters multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t}\n\t\t\t\tpreviousChord.push(chord);\n\t\t\t}\n\t\t};\n\n\t\ttest('resolve command - 1', () => {\n\t\t\ttestKbLookupByCommand('first', []);\n\t\t});\n\n\t\ttest('resolve command - 2', () => {\n\t\t\ttestKbLookupByCommand('second', [KeyCode.KeyZ, KeyCode.KeyX]);\n\t\t\ttestResolve(createContext({ key2: true }), KeyCode.KeyX, 'second');\n\t\t\ttestResolve(createContext({}), KeyCode.KeyZ, 'second');\n\t\t});\n\n\t\ttest('resolve command - 3', () => {\n\t\t\ttestKbLookupByCommand('third', [KeyCode.KeyX]);\n\t\t\ttestResolve(createContext({ key3: true }), KeyCode.KeyX, 'third');\n\t\t});\n\n\t\ttest('resolve command - 4', () => {\n\t\t\ttestKbLookupByCommand('fourth', []);\n\t\t});\n\n\t\ttest('resolve command - 5', () => {\n\t\t\ttestKbLookupByCommand('fifth', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyY, KeyCode.KeyZ)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyY, KeyCode.KeyZ), 'fifth');\n\t\t});\n\n\t\ttest('resolve command - 6', () => {\n\t\t\ttestKbLookupByCommand('seventh', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK), 'seventh');\n\t\t});\n\n\t\ttest('resolve command - 7', () => {\n\t\t\ttestKbLookupByCommand('uncomment lines', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU), 'uncomment lines');\n\t\t});\n\n\t\ttest('resolve command - 8', () => {\n\t\t\ttestKbLookupByCommand('comment lines', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyC)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyC), 'comment lines');\n\t\t});\n\n\t\ttest('resolve command - 9', () => {\n\t\t\ttestKbLookupByCommand('unreachablechord', []);\n\t\t});\n\n\t\ttest('resolve command - 10', () => {\n\t\t\ttestKbLookupByCommand('eleven', [KeyMod.CtrlCmd | KeyCode.KeyG]);\n\t\t\ttestResolve(createContext({}), KeyMod.CtrlCmd | KeyCode.KeyG, 'eleven');\n\t\t});\n\n\t\ttest('resolve command - 11', () => {\n\t\t\ttestKbLookupByCommand('sixth', []);\n\t\t});\n\n\t\ttest('resolve command - 12', () => {\n\t\t\ttestKbLookupByCommand('long multi chord', [[KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyA, KeyCode.KeyB]]);\n\t\t\ttestResolve(createContext({}), [KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyA, KeyCode.KeyB], 'long multi chord');\n\t\t});\n\n\t\tconst emptyContext = createContext({});\n\n\t\ttest('KBs having common prefix - the one defined later is returned', () => {\n\t\t\ttestResolve(emptyContext, [KeyMod.CtrlCmd | KeyCode.KeyB, KeyMod.CtrlCmd | KeyCode.KeyC, KeyCode.KeyI], 'long-multi-chord-2');\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { decodeKeybinding, createSimpleKeybinding, KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ContextKeyExpr, ContextKeyExpression, IContext } from '../../../contextkey/common/contextkey.js';\nimport { KeybindingResolver, ResultKind } from '../../common/keybindingResolver.js';\nimport { ResolvedKeybindingItem } from '../../common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../common/usLayoutResolvedKeybinding.js';\nimport { createUSLayoutResolvedKeybinding } from './keybindingsTestUtils.js';\n\nfunction createContext(ctx: any) {\n\treturn {\n\t\tgetValue: (key: string) => {\n\t\t\treturn ctx[key];\n\t\t}\n\t};\n}\n\nsuite('KeybindingResolver', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction kbItem(keybinding: number | number[], command: string, commandArgs: any, when: ContextKeyExpression | undefined, isDefault: boolean): ResolvedKeybindingItem {\n\t\tconst resolvedKeybinding = createUSLayoutResolvedKeybinding(keybinding, OS);\n\t\treturn new ResolvedKeybindingItem(\n\t\t\tresolvedKeybinding,\n\t\t\tcommand,\n\t\t\tcommandArgs,\n\t\t\twhen,\n\t\t\tisDefault,\n\t\t\tnull,\n\t\t\tfalse\n\t\t);\n\t}\n\n\tfunction getDispatchStr(chord: KeyCodeChord): string {\n\t\treturn USLayoutResolvedKeybinding.getDispatchStr(chord)!;\n\t}\n\n\ttest('resolve key', () => {\n\t\tconst keybinding = KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyZ;\n\t\tconst runtimeKeybinding = createSimpleKeybinding(keybinding, OS);\n\t\tconst contextRules = ContextKeyExpr.equals('bar', 'baz');\n\t\tconst keybindingItem = kbItem(keybinding, 'yes', null, contextRules, true);\n\n\t\tassert.strictEqual(contextRules.evaluate(createContext({ bar: 'baz' })), true);\n\t\tassert.strictEqual(contextRules.evaluate(createContext({ bar: 'bz' })), false);\n\n\t\tconst resolver = new KeybindingResolver([keybindingItem], [], () => { });\n\n\t\tconst r1 = resolver.resolve(createContext({ bar: 'baz' }), [], getDispatchStr(runtimeKeybinding));\n\t\tassert.ok(r1.kind === ResultKind.KbFound);\n\t\tassert.strictEqual(r1.commandId, 'yes');\n\n\t\tconst r2 = resolver.resolve(createContext({ bar: 'bz' }), [], getDispatchStr(runtimeKeybinding));\n\t\tassert.strictEqual(r2.kind, ResultKind.NoMatchingKb);\n\t});\n\n\ttest('resolve key with arguments', () => {\n\t\tconst commandArgs = { text: 'no' };\n\t\tconst keybinding = KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyZ;\n\t\tconst runtimeKeybinding = createSimpleKeybinding(keybinding, OS);\n\t\tconst contextRules = ContextKeyExpr.equals('bar', 'baz');\n\t\tconst keybindingItem = kbItem(keybinding, 'yes', commandArgs, contextRules, true);\n\n\t\tconst resolver = new KeybindingResolver([keybindingItem], [], () => { });\n\n\t\tconst r = resolver.resolve(createContext({ bar: 'baz' }), [], getDispatchStr(runtimeKeybinding));\n\t\tassert.ok(r.kind === ResultKind.KbFound);\n\t\tassert.strictEqual(r.commandArgs, commandArgs);\n\t});\n\n\tsuite('handle keybinding removals', () => {\n\n\t\ttest('simple 1', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), false),\n\t\t\t]);\n\t\t});\n\n\t\ttest('simple 2', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyC, 'yes3', null, ContextKeyExpr.equals('3', 'c'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true),\n\t\t\t\tkbItem(KeyCode.KeyC, 'yes3', null, ContextKeyExpr.equals('3', 'c'), false),\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with not matching when', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, ContextKeyExpr.equals('1', 'b'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with not matching keybinding', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyB, '-yes1', null, ContextKeyExpr.equals('1', 'a'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with matching keybinding and when', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, ContextKeyExpr.equals('1', 'a'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with unspecified keybinding', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(0, '-yes1', null, ContextKeyExpr.equals('1', 'a'), false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with unspecified when', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('removal with unspecified when and unspecified keybinding', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(0, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #138997 - removal in default list', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'yes1', null, undefined, true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, undefined, true),\n\t\t\t\tkbItem(0, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst overrides: ResolvedKeybindingItem[] = [];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, undefined, true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #612#issuecomment-222109084 cannot remove keybindings for commands with ^', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, '^yes1', null, ContextKeyExpr.equals('1', 'a'), true),\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-yes1', null, undefined, false)\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyB, 'yes2', null, ContextKeyExpr.equals('2', 'b'), true)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #140884 Unable to reassign F1 as keybinding for Show All Commands', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, undefined, false),\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, false)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #141638: Keyboard Shortcuts: Change When Expression might actually remove keybinding in Insiders', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, ContextKeyExpr.equals('a', '1'), false),\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, undefined, false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, ContextKeyExpr.equals('a', '1'), false)\n\t\t\t]);\n\t\t});\n\n\t\ttest('issue #157751: Auto-quoting of context keys prevents removal of keybindings via UI', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, ContextKeyExpr.deserialize(`editorTextFocus && activeEditor != workbench.editor.notebook && editorLangId in julia.supportedLanguageIds`), true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, ContextKeyExpr.deserialize(`editorTextFocus && activeEditor != 'workbench.editor.notebook' && editorLangId in 'julia.supportedLanguageIds'`), false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, []);\n\t\t});\n\n\t\ttest('issue #160604: Remove keybindings with when clause does not work', () => {\n\t\t\tconst defaults = [\n\t\t\t\tkbItem(KeyCode.KeyA, 'command1', null, undefined, true),\n\t\t\t];\n\t\t\tconst overrides = [\n\t\t\t\tkbItem(KeyCode.KeyA, '-command1', null, ContextKeyExpr.true(), false),\n\t\t\t];\n\t\t\tconst actual = KeybindingResolver.handleRemovals([...defaults, ...overrides]);\n\t\t\tassert.deepStrictEqual(actual, []);\n\t\t});\n\n\t\ttest('contextIsEntirelyIncluded', () => {\n\t\t\tconst toContextKeyExpression = (expr: ContextKeyExpression | string | null) => {\n\t\t\t\tif (typeof expr === 'string' || !expr) {\n\t\t\t\t\treturn ContextKeyExpr.deserialize(expr);\n\t\t\t\t}\n\t\t\t\treturn expr;\n\t\t\t};\n\t\t\tconst assertIsIncluded = (a: ContextKeyExpression | string | null, b: ContextKeyExpression | string | null) => {\n\t\t\t\tassert.strictEqual(KeybindingResolver.whenIsEntirelyIncluded(toContextKeyExpression(a), toContextKeyExpression(b)), true);\n\t\t\t};\n\t\t\tconst assertIsNotIncluded = (a: ContextKeyExpression | string | null, b: ContextKeyExpression | string | null) => {\n\t\t\t\tassert.strictEqual(KeybindingResolver.whenIsEntirelyIncluded(toContextKeyExpression(a), toContextKeyExpression(b)), false);\n\t\t\t};\n\n\t\t\tassertIsIncluded(null, null);\n\t\t\tassertIsIncluded(null, ContextKeyExpr.true());\n\t\t\tassertIsIncluded(ContextKeyExpr.true(), null);\n\t\t\tassertIsIncluded(ContextKeyExpr.true(), ContextKeyExpr.true());\n\t\t\tassertIsIncluded('key1', null);\n\t\t\tassertIsIncluded('key1', '');\n\t\t\tassertIsIncluded('key1', 'key1');\n\t\t\tassertIsIncluded('key1', ContextKeyExpr.true());\n\t\t\tassertIsIncluded('!key1', '');\n\t\t\tassertIsIncluded('!key1', '!key1');\n\t\t\tassertIsIncluded('key2', '');\n\t\t\tassertIsIncluded('key2', 'key2');\n\t\t\tassertIsIncluded('key1 && key1 && key2 && key2', 'key2');\n\t\t\tassertIsIncluded('key1 && key2', 'key2');\n\t\t\tassertIsIncluded('key1 && key2', 'key1');\n\t\t\tassertIsIncluded('key1 && key2', '');\n\t\t\tassertIsIncluded('key1', 'key1 || key2');\n\t\t\tassertIsIncluded('key1 || !key1', 'key2 || !key2');\n\t\t\tassertIsIncluded('key1', 'key1 || key2 && key3');\n\n\t\t\tassertIsNotIncluded('key1', '!key1');\n\t\t\tassertIsNotIncluded('!key1', 'key1');\n\t\t\tassertIsNotIncluded('key1 && key2', 'key3');\n\t\t\tassertIsNotIncluded('key1 && key2', 'key4');\n\t\t\tassertIsNotIncluded('key1', 'key2');\n\t\t\tassertIsNotIncluded('key1 || key2', 'key2');\n\t\t\tassertIsNotIncluded('', 'key2');\n\t\t\tassertIsNotIncluded(null, 'key2');\n\t\t});\n\t});\n\n\tsuite('resolve command', () => {\n\n\t\tfunction _kbItem(keybinding: number | number[], command: string, when: ContextKeyExpression | undefined): ResolvedKeybindingItem {\n\t\t\treturn kbItem(keybinding, command, null, when, true);\n\t\t}\n\n\t\tconst items = [\n\t\t\t// This one will never match because its \"when\" is always overwritten by another one\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyX,\n\t\t\t\t'first',\n\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\tContextKeyExpr.equals('key1', true),\n\t\t\t\t\tContextKeyExpr.notEquals('key2', false)\n\t\t\t\t)\n\t\t\t),\n\t\t\t// This one always overwrites first\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyX,\n\t\t\t\t'second',\n\t\t\t\tContextKeyExpr.equals('key2', true)\n\t\t\t),\n\t\t\t// This one is a secondary mapping for `second`\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyZ,\n\t\t\t\t'second',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t// This one sometimes overwrites first\n\t\t\t_kbItem(\n\t\t\t\tKeyCode.KeyX,\n\t\t\t\t'third',\n\t\t\t\tContextKeyExpr.equals('key3', true)\n\t\t\t),\n\t\t\t// This one is always overwritten by another one\n\t\t\t_kbItem(\n\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyY,\n\t\t\t\t'fourth',\n\t\t\t\tContextKeyExpr.equals('key4', true)\n\t\t\t),\n\t\t\t// This one overwrites with a chord the previous one\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyY, KeyCode.KeyZ),\n\t\t\t\t'fifth',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t// This one has no keybinding\n\t\t\t_kbItem(\n\t\t\t\t0,\n\t\t\t\t'sixth',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU),\n\t\t\t\t'seventh',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK),\n\t\t\t\t'seventh',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU),\n\t\t\t\t'uncomment lines',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyC), // cmd+k cmd+c\n\t\t\t\t'comment lines',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyChord(KeyMod.CtrlCmd | KeyCode.KeyG, KeyMod.CtrlCmd | KeyCode.KeyC), // cmd+g cmd+c\n\t\t\t\t'unreachablechord',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\tKeyMod.CtrlCmd | KeyCode.KeyG, // cmd+g\n\t\t\t\t'eleven',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\t[KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyA, KeyCode.KeyB], // cmd+k a b\n\t\t\t\t'long multi chord',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\t[KeyMod.CtrlCmd | KeyCode.KeyB, KeyMod.CtrlCmd | KeyCode.KeyC], // cmd+b cmd+c\n\t\t\t\t'shadowed by long-multi-chord-2',\n\t\t\t\tundefined\n\t\t\t),\n\t\t\t_kbItem(\n\t\t\t\t[KeyMod.CtrlCmd | KeyCode.KeyB, KeyMod.CtrlCmd | KeyCode.KeyC, KeyCode.KeyI], // cmd+b cmd+c i\n\t\t\t\t'long-multi-chord-2',\n\t\t\t\tundefined\n\t\t\t)\n\t\t];\n\n\t\tconst resolver = new KeybindingResolver(items, [], () => { });\n\n\t\tconst testKbLookupByCommand = (commandId: string, expectedKeys: number[] | number[][]) => {\n\t\t\t// Test lookup\n\t\t\tconst lookupResult = resolver.lookupKeybindings(commandId);\n\t\t\tassert.strictEqual(lookupResult.length, expectedKeys.length, 'Length mismatch @ commandId ' + commandId);\n\t\t\tfor (let i = 0, len = lookupResult.length; i < len; i++) {\n\t\t\t\tconst expected = createUSLayoutResolvedKeybinding(expectedKeys[i], OS)!;\n\n\t\t\t\tassert.strictEqual(lookupResult[i].resolvedKeybinding!.getUserSettingsLabel(), expected.getUserSettingsLabel(), 'value mismatch @ commandId ' + commandId);\n\t\t\t}\n\t\t};\n\n\t\tconst testResolve = (ctx: IContext, _expectedKey: number | number[], commandId: string) => {\n\t\t\tconst expectedKeybinding = decodeKeybinding(_expectedKey, OS)!;\n\n\t\t\tconst previousChord: string[] = [];\n\n\t\t\tfor (let i = 0, len = expectedKeybinding.chords.length; i < len; i++) {\n\n\t\t\t\tconst chord = getDispatchStr(<KeyCodeChord>expectedKeybinding.chords[i]);\n\n\t\t\t\tconst result = resolver.resolve(ctx, previousChord, chord);\n\n\t\t\t\tif (i === len - 1) {\n\t\t\t\t\t// if it's the final chord, then we should find a valid command,\n\t\t\t\t\t// and there should not be a chord.\n\t\t\t\t\tassert.ok(result.kind === ResultKind.KbFound, `Enters multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t\tassert.strictEqual(result.commandId, commandId, `Enters multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t} else if (i > 0) {\n\t\t\t\t\t// if this is an intermediate chord, we should not find a valid command,\n\t\t\t\t\t// and there should be an open chord we continue.\n\t\t\t\t\tassert.ok(result.kind === ResultKind.MoreChordsNeeded, `Continues multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t} else {\n\t\t\t\t\t// if it's not the final chord and not an intermediate, then we should not\n\t\t\t\t\t// find a valid command, and we should enter a chord.\n\t\t\t\t\tassert.ok(result.kind === ResultKind.MoreChordsNeeded, `Enters multi chord for ${commandId} at chord ${i}`);\n\t\t\t\t}\n\t\t\t\tpreviousChord.push(chord);\n\t\t\t}\n\t\t};\n\n\t\ttest('resolve command - 1', () => {\n\t\t\ttestKbLookupByCommand('first', []);\n\t\t});\n\n\t\ttest('resolve command - 2', () => {\n\t\t\ttestKbLookupByCommand('second', [KeyCode.KeyZ, KeyCode.KeyX]);\n\t\t\ttestResolve(createContext({ key2: true }), KeyCode.KeyX, 'second');\n\t\t\ttestResolve(createContext({}), KeyCode.KeyZ, 'second');\n\t\t});\n\n\t\ttest('resolve command - 3', () => {\n\t\t\ttestKbLookupByCommand('third', [KeyCode.KeyX]);\n\t\t\ttestResolve(createContext({ key3: true }), KeyCode.KeyX, 'third');\n\t\t});\n\n\t\ttest('resolve command - 4', () => {\n\t\t\ttestKbLookupByCommand('fourth', []);\n\t\t});\n\n\t\ttest('resolve command - 5', () => {\n\t\t\ttestKbLookupByCommand('fifth', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyY, KeyCode.KeyZ)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyY, KeyCode.KeyZ), 'fifth');\n\t\t});\n\n\t\ttest('resolve command - 6', () => {\n\t\t\ttestKbLookupByCommand('seventh', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyK), 'seventh');\n\t\t});\n\n\t\ttest('resolve command - 7', () => {\n\t\t\ttestKbLookupByCommand('uncomment lines', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyU), 'uncomment lines');\n\t\t});\n\n\t\ttest('resolve command - 8', () => {\n\t\t\ttestKbLookupByCommand('comment lines', [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyC)]);\n\t\t\ttestResolve(createContext({}), KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyMod.CtrlCmd | KeyCode.KeyC), 'comment lines');\n\t\t});\n\n\t\ttest('resolve command - 9', () => {\n\t\t\ttestKbLookupByCommand('unreachablechord', []);\n\t\t});\n\n\t\ttest('resolve command - 10', () => {\n\t\t\ttestKbLookupByCommand('eleven', [KeyMod.CtrlCmd | KeyCode.KeyG]);\n\t\t\ttestResolve(createContext({}), KeyMod.CtrlCmd | KeyCode.KeyG, 'eleven');\n\t\t});\n\n\t\ttest('resolve command - 11', () => {\n\t\t\ttestKbLookupByCommand('sixth', []);\n\t\t});\n\n\t\ttest('resolve command - 12', () => {\n\t\t\ttestKbLookupByCommand('long multi chord', [[KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyA, KeyCode.KeyB]]);\n\t\t\ttestResolve(createContext({}), [KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyA, KeyCode.KeyB], 'long multi chord');\n\t\t});\n\n\t\tconst emptyContext = createContext({});\n\n\t\ttest('KBs having common prefix - the one defined later is returned', () => {\n\t\t\ttestResolve(emptyContext, [KeyMod.CtrlCmd | KeyCode.KeyB, KeyMod.CtrlCmd | KeyCode.KeyC, KeyCode.KeyI], 'long-multi-chord-2');\n\t\t});\n\t});\n});\n"]}