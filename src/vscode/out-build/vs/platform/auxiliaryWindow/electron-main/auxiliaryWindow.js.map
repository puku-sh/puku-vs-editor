{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/auxiliaryWindow/electron-main/auxiliaryWindow.ts","vs/platform/auxiliaryWindow/electron-main/auxiliaryWindow.ts"],"names":[],"mappings":"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","file":"auxiliaryWindow.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BrowserWindow, BrowserWindowConstructorOptions, WebContents } from 'electron';\nimport { isLinux, isWindows } from '../../../base/common/platform.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IEnvironmentMainService } from '../../environment/electron-main/environmentMainService.js';\nimport { ILifecycleMainService } from '../../lifecycle/electron-main/lifecycleMainService.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IStateService } from '../../state/node/state.js';\nimport { hasNativeTitlebar, TitlebarStyle } from '../../window/common/window.js';\nimport { IBaseWindow, WindowMode } from '../../window/electron-main/window.js';\nimport { BaseWindow } from '../../windows/electron-main/windowImpl.js';\n\nexport interface IAuxiliaryWindow extends IBaseWindow {\n\treadonly parentId: number;\n}\n\nexport class AuxiliaryWindow extends BaseWindow implements IAuxiliaryWindow {\n\n\treadonly id: number;\n\tparentId = -1;\n\n\toverride get win() {\n\t\tif (!super.win) {\n\t\t\tthis.tryClaimWindow();\n\t\t}\n\n\t\treturn super.win;\n\t}\n\n\tprivate stateApplied = false;\n\n\tconstructor(\n\t\tprivate readonly webContents: WebContents,\n\t\t@IEnvironmentMainService environmentMainService: IEnvironmentMainService,\n\t\t@ILogService logService: ILogService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStateService stateService: IStateService,\n\t\t@ILifecycleMainService private readonly lifecycleMainService: ILifecycleMainService\n\t) {\n\t\tsuper(configurationService, stateService, environmentMainService, logService);\n\n\t\tthis.id = this.webContents.id;\n\n\t\t// Try to claim window\n\t\tthis.tryClaimWindow();\n\t}\n\n\ttryClaimWindow(options?: BrowserWindowConstructorOptions): void {\n\t\tif (this._store.isDisposed || this.webContents.isDestroyed()) {\n\t\t\treturn; // already disposed\n\t\t}\n\n\t\tthis.doTryClaimWindow(options);\n\n\t\tif (options && !this.stateApplied) {\n\t\t\tthis.stateApplied = true;\n\n\t\t\tthis.applyState({\n\t\t\t\tx: options.x,\n\t\t\t\ty: options.y,\n\t\t\t\twidth: options.width,\n\t\t\t\theight: options.height,\n\t\t\t\t// We currently do not support restoring fullscreen state for auxiliary\n\t\t\t\t// windows because we do not get hold of the original `features` string\n\t\t\t\t// that contains that info in `window-fullscreen`. However, we can\n\t\t\t\t// probe the `options.show` value for whether the window should be maximized\n\t\t\t\t// or not because we never show maximized windows initially to reduce flicker.\n\t\t\t\tmode: options.show === false ? WindowMode.Maximized : WindowMode.Normal\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate doTryClaimWindow(options?: BrowserWindowConstructorOptions): void {\n\t\tif (this._win) {\n\t\t\treturn; // already claimed\n\t\t}\n\n\t\tconst window = BrowserWindow.fromWebContents(this.webContents);\n\t\tif (window) {\n\t\t\tthis.logService.trace('[aux window] Claimed browser window instance');\n\n\t\t\t// Remember\n\t\t\tthis.setWin(window, options);\n\n\t\t\t// Disable Menu\n\t\t\twindow.setMenu(null);\n\t\t\tif ((isWindows || isLinux) && hasNativeTitlebar(this.configurationService, options?.titleBarStyle === 'hidden' ? TitlebarStyle.CUSTOM : undefined /* unknown */)) {\n\t\t\t\twindow.setAutoHideMenuBar(true); // Fix for https://github.com/microsoft/vscode/issues/200615\n\t\t\t}\n\n\t\t\t// Lifecycle\n\t\t\tthis.lifecycleMainService.registerAuxWindow(this);\n\t\t}\n\t}\n\n\tmatches(webContents: WebContents): boolean {\n\t\treturn this.webContents.id === webContents.id;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BrowserWindow, BrowserWindowConstructorOptions, WebContents } from 'electron';\nimport { isLinux, isWindows } from '../../../base/common/platform.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IEnvironmentMainService } from '../../environment/electron-main/environmentMainService.js';\nimport { ILifecycleMainService } from '../../lifecycle/electron-main/lifecycleMainService.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IStateService } from '../../state/node/state.js';\nimport { hasNativeTitlebar, TitlebarStyle } from '../../window/common/window.js';\nimport { IBaseWindow, WindowMode } from '../../window/electron-main/window.js';\nimport { BaseWindow } from '../../windows/electron-main/windowImpl.js';\n\nexport interface IAuxiliaryWindow extends IBaseWindow {\n\treadonly parentId: number;\n}\n\nexport class AuxiliaryWindow extends BaseWindow implements IAuxiliaryWindow {\n\n\treadonly id: number;\n\tparentId = -1;\n\n\toverride get win() {\n\t\tif (!super.win) {\n\t\t\tthis.tryClaimWindow();\n\t\t}\n\n\t\treturn super.win;\n\t}\n\n\tprivate stateApplied = false;\n\n\tconstructor(\n\t\tprivate readonly webContents: WebContents,\n\t\t@IEnvironmentMainService environmentMainService: IEnvironmentMainService,\n\t\t@ILogService logService: ILogService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStateService stateService: IStateService,\n\t\t@ILifecycleMainService private readonly lifecycleMainService: ILifecycleMainService\n\t) {\n\t\tsuper(configurationService, stateService, environmentMainService, logService);\n\n\t\tthis.id = this.webContents.id;\n\n\t\t// Try to claim window\n\t\tthis.tryClaimWindow();\n\t}\n\n\ttryClaimWindow(options?: BrowserWindowConstructorOptions): void {\n\t\tif (this._store.isDisposed || this.webContents.isDestroyed()) {\n\t\t\treturn; // already disposed\n\t\t}\n\n\t\tthis.doTryClaimWindow(options);\n\n\t\tif (options && !this.stateApplied) {\n\t\t\tthis.stateApplied = true;\n\n\t\t\tthis.applyState({\n\t\t\t\tx: options.x,\n\t\t\t\ty: options.y,\n\t\t\t\twidth: options.width,\n\t\t\t\theight: options.height,\n\t\t\t\t// We currently do not support restoring fullscreen state for auxiliary\n\t\t\t\t// windows because we do not get hold of the original `features` string\n\t\t\t\t// that contains that info in `window-fullscreen`. However, we can\n\t\t\t\t// probe the `options.show` value for whether the window should be maximized\n\t\t\t\t// or not because we never show maximized windows initially to reduce flicker.\n\t\t\t\tmode: options.show === false ? WindowMode.Maximized : WindowMode.Normal\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate doTryClaimWindow(options?: BrowserWindowConstructorOptions): void {\n\t\tif (this._win) {\n\t\t\treturn; // already claimed\n\t\t}\n\n\t\tconst window = BrowserWindow.fromWebContents(this.webContents);\n\t\tif (window) {\n\t\t\tthis.logService.trace('[aux window] Claimed browser window instance');\n\n\t\t\t// Remember\n\t\t\tthis.setWin(window, options);\n\n\t\t\t// Disable Menu\n\t\t\twindow.setMenu(null);\n\t\t\tif ((isWindows || isLinux) && hasNativeTitlebar(this.configurationService, options?.titleBarStyle === 'hidden' ? TitlebarStyle.CUSTOM : undefined /* unknown */)) {\n\t\t\t\twindow.setAutoHideMenuBar(true); // Fix for https://github.com/microsoft/vscode/issues/200615\n\t\t\t}\n\n\t\t\t// Lifecycle\n\t\t\tthis.lifecycleMainService.registerAuxWindow(this);\n\t\t}\n\t}\n\n\tmatches(webContents: WebContents): boolean {\n\t\treturn this.webContents.id === webContents.id;\n\t}\n}\n"]}