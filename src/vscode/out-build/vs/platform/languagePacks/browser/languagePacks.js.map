{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/languagePacks/browser/languagePacks.ts","vs/platform/languagePacks/browser/languagePacks.ts"],"names":[],"mappings":"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","file":"languagePacks.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IExtensionGalleryService } from '../../extensionManagement/common/extensionManagement.js';\nimport { IExtensionResourceLoaderService } from '../../extensionResourceLoader/common/extensionResourceLoader.js';\nimport { ILanguagePackItem, LanguagePackBaseService } from '../common/languagePacks.js';\nimport { ILogService } from '../../log/common/log.js';\n\nexport class WebLanguagePacksService extends LanguagePackBaseService {\n\tconstructor(\n\t\t@IExtensionResourceLoaderService private readonly extensionResourceLoaderService: IExtensionResourceLoaderService,\n\t\t@IExtensionGalleryService extensionGalleryService: IExtensionGalleryService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper(extensionGalleryService);\n\t}\n\n\tasync getBuiltInExtensionTranslationsUri(id: string, language: string): Promise<URI | undefined> {\n\n\t\tconst queryTimeout = new CancellationTokenSource();\n\t\tsetTimeout(() => queryTimeout.cancel(), 1000);\n\n\t\t// First get the extensions that supports the language (there should only be one but just in case let's include more results)\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await this.extensionGalleryService.query({\n\t\t\t\ttext: `tag:\"lp-${language}\"`,\n\t\t\t\tpageSize: 5\n\t\t\t}, queryTimeout.token);\n\t\t} catch (err) {\n\t\t\tthis.logService.error(err);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst languagePackExtensions = result.firstPage.find(e => e.properties.localizedLanguages?.length);\n\t\tif (!languagePackExtensions) {\n\t\t\tthis.logService.trace(`No language pack found for language ${language}`);\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Then get the manifest for that extension\n\t\tconst manifestTimeout = new CancellationTokenSource();\n\t\tsetTimeout(() => queryTimeout.cancel(), 1000);\n\t\tconst manifest = await this.extensionGalleryService.getManifest(languagePackExtensions, manifestTimeout.token);\n\n\t\t// Find the translation from the language pack\n\t\tconst localization = manifest?.contributes?.localizations?.find(l => l.languageId === language);\n\t\tconst translation = localization?.translations.find(t => t.id === id);\n\t\tif (!translation) {\n\t\t\tthis.logService.trace(`No translation found for id '${id}, in ${manifest?.name}`);\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// get the resource uri and return it\n\t\tconst uri = await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({\n\t\t\t// If translation is defined then manifest should have been defined.\n\t\t\tname: manifest!.name,\n\t\t\tpublisher: manifest!.publisher,\n\t\t\tversion: manifest!.version\n\t\t});\n\t\tif (!uri) {\n\t\t\tthis.logService.trace('Gallery does not provide extension resources.');\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn URI.joinPath(uri, translation.path);\n\t}\n\n\t// Web doesn't have a concept of language packs, so we just return an empty array\n\tgetInstalledLanguages(): Promise<ILanguagePackItem[]> {\n\t\treturn Promise.resolve([]);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IExtensionGalleryService } from '../../extensionManagement/common/extensionManagement.js';\nimport { IExtensionResourceLoaderService } from '../../extensionResourceLoader/common/extensionResourceLoader.js';\nimport { ILanguagePackItem, LanguagePackBaseService } from '../common/languagePacks.js';\nimport { ILogService } from '../../log/common/log.js';\n\nexport class WebLanguagePacksService extends LanguagePackBaseService {\n\tconstructor(\n\t\t@IExtensionResourceLoaderService private readonly extensionResourceLoaderService: IExtensionResourceLoaderService,\n\t\t@IExtensionGalleryService extensionGalleryService: IExtensionGalleryService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper(extensionGalleryService);\n\t}\n\n\tasync getBuiltInExtensionTranslationsUri(id: string, language: string): Promise<URI | undefined> {\n\n\t\tconst queryTimeout = new CancellationTokenSource();\n\t\tsetTimeout(() => queryTimeout.cancel(), 1000);\n\n\t\t// First get the extensions that supports the language (there should only be one but just in case let's include more results)\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await this.extensionGalleryService.query({\n\t\t\t\ttext: `tag:\"lp-${language}\"`,\n\t\t\t\tpageSize: 5\n\t\t\t}, queryTimeout.token);\n\t\t} catch (err) {\n\t\t\tthis.logService.error(err);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst languagePackExtensions = result.firstPage.find(e => e.properties.localizedLanguages?.length);\n\t\tif (!languagePackExtensions) {\n\t\t\tthis.logService.trace(`No language pack found for language ${language}`);\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Then get the manifest for that extension\n\t\tconst manifestTimeout = new CancellationTokenSource();\n\t\tsetTimeout(() => queryTimeout.cancel(), 1000);\n\t\tconst manifest = await this.extensionGalleryService.getManifest(languagePackExtensions, manifestTimeout.token);\n\n\t\t// Find the translation from the language pack\n\t\tconst localization = manifest?.contributes?.localizations?.find(l => l.languageId === language);\n\t\tconst translation = localization?.translations.find(t => t.id === id);\n\t\tif (!translation) {\n\t\t\tthis.logService.trace(`No translation found for id '${id}, in ${manifest?.name}`);\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// get the resource uri and return it\n\t\tconst uri = await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({\n\t\t\t// If translation is defined then manifest should have been defined.\n\t\t\tname: manifest!.name,\n\t\t\tpublisher: manifest!.publisher,\n\t\t\tversion: manifest!.version\n\t\t});\n\t\tif (!uri) {\n\t\t\tthis.logService.trace('Gallery does not provide extension resources.');\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn URI.joinPath(uri, translation.path);\n\t}\n\n\t// Web doesn't have a concept of language packs, so we just return an empty array\n\tgetInstalledLanguages(): Promise<ILanguagePackItem[]> {\n\t\treturn Promise.resolve([]);\n\t}\n}\n"]}