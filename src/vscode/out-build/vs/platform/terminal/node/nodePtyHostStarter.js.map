{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/terminal/node/nodePtyHostStarter.ts","vs/platform/terminal/node/nodePtyHostStarter.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,mCAAmC,CAAC;AAChF,OAAO,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,iCAAiC,CAAC;AACtE,OAAO,EAAE,MAAM,EAAe,MAAM,wCAAwC,CAAC;AAC7E,OAAO,EAAE,mBAAmB,EAA6B,MAAM,yCAAyC,CAAC;AACzG,OAAO,EAAE,qBAAqB,EAAE,MAAM,8CAA8C,CAAC;AAI9E,IAAM,kBAAkB,GAAxB,MAAM,kBAAmB,SAAQ,UAAU;IACjD,YACkB,mBAAwC,EACnB,mBAA8C;QAEpF,KAAK,EAAE,CAAC;QAHS,wBAAmB,GAAnB,mBAAmB,CAAqB;QACnB,wBAAmB,GAAnB,mBAAmB,CAA2B;IAGrF,CAAC;IAED,KAAK;QACJ,MAAM,IAAI,GAAgB;YACzB,UAAU,EAAE,UAAU;YACtB,IAAI,EAAE,CAAC,gBAAgB,EAAE,YAAY,EAAE,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC;YAC/G,GAAG,EAAE;gBACJ,qBAAqB,EAAE,uCAAuC;gBAC9D,mBAAmB,EAAE,MAAM;gBAC3B,sBAAsB,EAAE,MAAM,EAAE,+CAA+C;gBAC/E,2BAA2B,EAAE,IAAI,CAAC,mBAAmB,CAAC,SAAS;gBAC/D,iCAAiC,EAAE,IAAI,CAAC,mBAAmB,CAAC,cAAc;gBAC1E,2BAA2B,EAAE,IAAI,CAAC,mBAAmB,CAAC,UAAU;aAChE;SACD,CAAC;QAEF,MAAM,YAAY,GAAG,qBAAqB,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;QAC5G,IAAI,YAAY,EAAE,CAAC;YAClB,IAAI,YAAY,CAAC,KAAK,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC;gBAC7C,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC;YACnC,CAAC;iBAAM,IAAI,CAAC,YAAY,CAAC,KAAK,IAAI,YAAY,CAAC,IAAI,EAAE,CAAC;gBACrD,IAAI,CAAC,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC;YAChC,CAAC;QACF,CAAC;QAED,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAE/E,MAAM,KAAK,GAAG,IAAI,eAAe,EAAE,CAAC;QACpC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAElB,OAAO;YACN,MAAM;YACN,KAAK;YACL,gBAAgB,EAAE,MAAM,CAAC,gBAAgB;SACzC,CAAC;IACH,CAAC;CACD,CAAA;AA1CY,kBAAkB;IAG5B,WAAA,mBAAmB,CAAA;GAHT,kBAAkB,CA0C9B","file":"nodePtyHostStarter.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { FileAccess, Schemas } from '../../../base/common/network.js';\nimport { Client, IIPCOptions } from '../../../base/parts/ipc/node/ipc.cp.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../environment/common/environment.js';\nimport { parsePtyHostDebugPort } from '../../environment/node/environmentService.js';\nimport { IReconnectConstants } from '../common/terminal.js';\nimport { IPtyHostConnection, IPtyHostStarter } from './ptyHost.js';\n\nexport class NodePtyHostStarter extends Disposable implements IPtyHostStarter {\n\tconstructor(\n\t\tprivate readonly _reconnectConstants: IReconnectConstants,\n\t\t@IEnvironmentService private readonly _environmentService: INativeEnvironmentService\n\t) {\n\t\tsuper();\n\t}\n\n\tstart(): IPtyHostConnection {\n\t\tconst opts: IIPCOptions = {\n\t\t\tserverName: 'Pty Host',\n\t\t\targs: ['--type=ptyHost', '--logsPath', this._environmentService.logsHome.with({ scheme: Schemas.file }).fsPath],\n\t\t\tenv: {\n\t\t\t\tVSCODE_ESM_ENTRYPOINT: 'vs/platform/terminal/node/ptyHostMain',\n\t\t\t\tVSCODE_PIPE_LOGGING: 'true',\n\t\t\t\tVSCODE_VERBOSE_LOGGING: 'true', // transmit console logs from server to client,\n\t\t\t\tVSCODE_RECONNECT_GRACE_TIME: this._reconnectConstants.graceTime,\n\t\t\t\tVSCODE_RECONNECT_SHORT_GRACE_TIME: this._reconnectConstants.shortGraceTime,\n\t\t\t\tVSCODE_RECONNECT_SCROLLBACK: this._reconnectConstants.scrollback\n\t\t\t}\n\t\t};\n\n\t\tconst ptyHostDebug = parsePtyHostDebugPort(this._environmentService.args, this._environmentService.isBuilt);\n\t\tif (ptyHostDebug) {\n\t\t\tif (ptyHostDebug.break && ptyHostDebug.port) {\n\t\t\t\topts.debugBrk = ptyHostDebug.port;\n\t\t\t} else if (!ptyHostDebug.break && ptyHostDebug.port) {\n\t\t\t\topts.debug = ptyHostDebug.port;\n\t\t\t}\n\t\t}\n\n\t\tconst client = new Client(FileAccess.asFileUri('bootstrap-fork').fsPath, opts);\n\n\t\tconst store = new DisposableStore();\n\t\tstore.add(client);\n\n\t\treturn {\n\t\t\tclient,\n\t\t\tstore,\n\t\t\tonDidProcessExit: client.onDidProcessExit\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { FileAccess, Schemas } from '../../../base/common/network.js';\nimport { Client, IIPCOptions } from '../../../base/parts/ipc/node/ipc.cp.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../environment/common/environment.js';\nimport { parsePtyHostDebugPort } from '../../environment/node/environmentService.js';\nimport { IReconnectConstants } from '../common/terminal.js';\nimport { IPtyHostConnection, IPtyHostStarter } from './ptyHost.js';\n\nexport class NodePtyHostStarter extends Disposable implements IPtyHostStarter {\n\tconstructor(\n\t\tprivate readonly _reconnectConstants: IReconnectConstants,\n\t\t@IEnvironmentService private readonly _environmentService: INativeEnvironmentService\n\t) {\n\t\tsuper();\n\t}\n\n\tstart(): IPtyHostConnection {\n\t\tconst opts: IIPCOptions = {\n\t\t\tserverName: 'Pty Host',\n\t\t\targs: ['--type=ptyHost', '--logsPath', this._environmentService.logsHome.with({ scheme: Schemas.file }).fsPath],\n\t\t\tenv: {\n\t\t\t\tVSCODE_ESM_ENTRYPOINT: 'vs/platform/terminal/node/ptyHostMain',\n\t\t\t\tVSCODE_PIPE_LOGGING: 'true',\n\t\t\t\tVSCODE_VERBOSE_LOGGING: 'true', // transmit console logs from server to client,\n\t\t\t\tVSCODE_RECONNECT_GRACE_TIME: this._reconnectConstants.graceTime,\n\t\t\t\tVSCODE_RECONNECT_SHORT_GRACE_TIME: this._reconnectConstants.shortGraceTime,\n\t\t\t\tVSCODE_RECONNECT_SCROLLBACK: this._reconnectConstants.scrollback\n\t\t\t}\n\t\t};\n\n\t\tconst ptyHostDebug = parsePtyHostDebugPort(this._environmentService.args, this._environmentService.isBuilt);\n\t\tif (ptyHostDebug) {\n\t\t\tif (ptyHostDebug.break && ptyHostDebug.port) {\n\t\t\t\topts.debugBrk = ptyHostDebug.port;\n\t\t\t} else if (!ptyHostDebug.break && ptyHostDebug.port) {\n\t\t\t\topts.debug = ptyHostDebug.port;\n\t\t\t}\n\t\t}\n\n\t\tconst client = new Client(FileAccess.asFileUri('bootstrap-fork').fsPath, opts);\n\n\t\tconst store = new DisposableStore();\n\t\tstore.add(client);\n\n\t\treturn {\n\t\t\tclient,\n\t\t\tstore,\n\t\t\tonDidProcessExit: client.onDidProcessExit\n\t\t};\n\t}\n}\n"]}