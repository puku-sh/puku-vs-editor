{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/userData/test/browser/fileUserDataProvider.test.ts","vs/platform/userData/test/browser/fileUserDataProvider.test.ts"],"names":[],"mappings":"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","file":"fileUserDataProvider.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { dirname, isEqual, joinPath } from '../../../../base/common/resources.js';\nimport { ReadableStreamEvents } from '../../../../base/common/stream.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IEnvironmentService } from '../../../environment/common/environment.js';\nimport { AbstractNativeEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { FileService } from '../../../files/common/fileService.js';\nimport { FileChangeType, FileSystemProviderCapabilities, FileType, IFileChange, IFileOpenOptions, IFileReadStreamOptions, IFileService, IFileSystemProviderWithFileReadStreamCapability, IFileSystemProviderWithFileReadWriteCapability, IFileSystemProviderWithOpenReadWriteCloseCapability, IStat } from '../../../files/common/files.js';\nimport { InMemoryFileSystemProvider } from '../../../files/common/inMemoryFilesystemProvider.js';\nimport { NullLogService } from '../../../log/common/log.js';\nimport product from '../../../product/common/product.js';\nimport { UriIdentityService } from '../../../uriIdentity/common/uriIdentityService.js';\nimport { FileUserDataProvider } from '../../common/fileUserDataProvider.js';\nimport { IUserDataProfilesService, UserDataProfilesService } from '../../../userDataProfile/common/userDataProfile.js';\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nclass TestEnvironmentService extends AbstractNativeEnvironmentService {\n\tconstructor(private readonly _appSettingsHome: URI) {\n\t\tsuper(Object.create(null), Object.create(null), { _serviceBrand: undefined, ...product });\n\t}\n\toverride get userRoamingDataHome() { return this._appSettingsHome.with({ scheme: Schemas.vscodeUserData }); }\n\toverride get cacheHome() { return this.userRoamingDataHome; }\n}\n\nsuite('FileUserDataProvider', () => {\n\n\tlet testObject: IFileService;\n\tlet userDataHomeOnDisk: URI;\n\tlet backupWorkspaceHomeOnDisk: URI;\n\tlet environmentService: IEnvironmentService;\n\tlet userDataProfilesService: IUserDataProfilesService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet fileUserDataProvider: FileUserDataProvider;\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\ttestObject = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(testObject.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tuserDataHomeOnDisk = joinPath(ROOT, 'User');\n\t\tconst backupHome = joinPath(ROOT, 'Backups');\n\t\tbackupWorkspaceHomeOnDisk = joinPath(backupHome, 'workspaceId');\n\t\tawait testObject.createFolder(userDataHomeOnDisk);\n\t\tawait testObject.createFolder(backupWorkspaceHomeOnDisk);\n\n\t\tenvironmentService = new TestEnvironmentService(userDataHomeOnDisk);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(testObject));\n\t\tuserDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, testObject, uriIdentityService, logService));\n\n\t\tfileUserDataProvider = disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, logService));\n\t\tdisposables.add(fileUserDataProvider);\n\t\tdisposables.add(testObject.registerProvider(Schemas.vscodeUserData, fileUserDataProvider));\n\t});\n\n\ttest('exists return false when file does not exist', async () => {\n\t\tconst exists = await testObject.exists(userDataProfilesService.defaultProfile.settingsResource);\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('read file throws error if not exist', async () => {\n\t\ttry {\n\t\t\tawait testObject.readFile(userDataProfilesService.defaultProfile.settingsResource);\n\t\t\tassert.fail('Should fail since file does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('read existing file', async () => {\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.readFile(userDataProfilesService.defaultProfile.settingsResource);\n\t\tassert.strictEqual(result.value.toString(), '{}');\n\t});\n\n\ttest('create file', async () => {\n\t\tconst resource = userDataProfilesService.defaultProfile.settingsResource;\n\t\tconst actual1 = await testObject.createFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('write file creates the file if not exist', async () => {\n\t\tconst resource = userDataProfilesService.defaultProfile.settingsResource;\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('write to existing file', async () => {\n\t\tconst resource = userDataProfilesService.defaultProfile.settingsResource;\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{a:1}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{a:1}');\n\t});\n\n\ttest('delete file', async () => {\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString(''));\n\t\tawait testObject.del(userDataProfilesService.defaultProfile.settingsResource);\n\t\tconst result = await testObject.exists(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(false, result);\n\t});\n\n\ttest('resolve file', async () => {\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString(''));\n\t\tconst result = await testObject.resolve(userDataProfilesService.defaultProfile.settingsResource);\n\t\tassert.ok(!result.isDirectory);\n\t\tassert.ok(result.children === undefined);\n\t});\n\n\ttest('exists return false for folder that does not exist', async () => {\n\t\tconst exists = await testObject.exists(userDataProfilesService.defaultProfile.snippetsHome);\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('exists return true for folder that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tconst exists = await testObject.exists(userDataProfilesService.defaultProfile.snippetsHome);\n\t\tassert.strictEqual(exists, true);\n\t});\n\n\ttest('read file throws error for folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\ttry {\n\t\t\tawait testObject.readFile(userDataProfilesService.defaultProfile.snippetsHome);\n\t\t\tassert.fail('Should fail since read file is not supported for folders');\n\t\t} catch (e) { }\n\t});\n\n\ttest('read file under folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual = await testObject.readFile(resource);\n\t\tassert.strictEqual(actual.resource.toString(), resource.toString());\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('read file under sub folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets', 'java'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'java', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'java/settings.json');\n\t\tconst actual = await testObject.readFile(resource);\n\t\tassert.strictEqual(actual.resource.toString(), resource.toString());\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('create file under folder that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.createFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('create file under folder that does not exist', async () => {\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.createFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('write to not existing file under container that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('write to not existing file under container that does not exists', async () => {\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('write to existing file under container', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{a:1}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{a:1}');\n\t});\n\n\ttest('write file under sub container', async () => {\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'java/settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'java', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('delete throws error for folder that does not exist', async () => {\n\t\ttry {\n\t\t\tawait testObject.del(userDataProfilesService.defaultProfile.snippetsHome);\n\t\t\tassert.fail('Should fail the folder does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('delete not existing file under container that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\ttry {\n\t\t\tawait testObject.del(joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json'));\n\t\t\tassert.fail('Should fail since file does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('delete not existing file under container that does not exists', async () => {\n\t\ttry {\n\t\t\tawait testObject.del(joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json'));\n\t\t\tassert.fail('Should fail since file does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('delete existing file under folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tawait testObject.del(joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json'));\n\t\tconst exists = await testObject.exists(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('resolve folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.resolve(userDataProfilesService.defaultProfile.snippetsHome);\n\t\tassert.ok(result.isDirectory);\n\t\tassert.ok(result.children !== undefined);\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.children[0].resource.toString(), joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json').toString());\n\t});\n\n\ttest('read backup file', async () => {\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.readFile(joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`));\n\t\tassert.strictEqual(result.value.toString(), '{}');\n\t});\n\n\ttest('create backup file', async () => {\n\t\tawait testObject.createFile(joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.readFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'));\n\t\tassert.strictEqual(result.value.toString(), '{}');\n\t});\n\n\ttest('write backup file', async () => {\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'), VSBuffer.fromString('{}'));\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`), VSBuffer.fromString('{a:1}'));\n\t\tconst result = await testObject.readFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'));\n\t\tassert.strictEqual(result.value.toString(), '{a:1}');\n\t});\n\n\ttest('resolve backups folder', async () => {\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.resolve(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }));\n\t\tassert.ok(result.isDirectory);\n\t\tassert.ok(result.children !== undefined);\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.children[0].resource.toString(), joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`).toString());\n\t});\n});\n\nclass TestFileSystemProvider implements IFileSystemProviderWithFileReadWriteCapability, IFileSystemProviderWithOpenReadWriteCloseCapability, IFileSystemProviderWithFileReadStreamCapability {\n\n\tconstructor(readonly onDidChangeFile: Event<readonly IFileChange[]>) { }\n\n\n\treadonly capabilities: FileSystemProviderCapabilities = FileSystemProviderCapabilities.FileReadWrite;\n\n\treadonly onDidChangeCapabilities: Event<void> = Event.None;\n\n\twatch(): IDisposable { return Disposable.None; }\n\n\tstat(): Promise<IStat> { throw new Error('Not Supported'); }\n\n\tmkdir(resource: URI): Promise<void> { throw new Error('Not Supported'); }\n\n\trename(): Promise<void> { throw new Error('Not Supported'); }\n\n\treadFile(resource: URI): Promise<Uint8Array> { throw new Error('Not Supported'); }\n\n\treaddir(resource: URI): Promise<[string, FileType][]> { throw new Error('Not Supported'); }\n\n\twriteFile(): Promise<void> { throw new Error('Not Supported'); }\n\n\tdelete(): Promise<void> { throw new Error('Not Supported'); }\n\topen(resource: URI, opts: IFileOpenOptions): Promise<number> { throw new Error('Not Supported'); }\n\tclose(fd: number): Promise<void> { throw new Error('Not Supported'); }\n\tread(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('Not Supported'); }\n\twrite(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('Not Supported'); }\n\n\treadFileStream(resource: URI, opts: IFileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array> { throw new Error('Method not implemented.'); }\n}\n\nsuite('FileUserDataProvider - Watching', () => {\n\n\tlet testObject: FileUserDataProvider;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tconst rootFileResource = joinPath(ROOT, 'User');\n\tconst rootUserDataResource = rootFileResource.with({ scheme: Schemas.vscodeUserData });\n\n\tlet fileEventEmitter: Emitter<readonly IFileChange[]>;\n\n\tsetup(() => {\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst environmentService = new TestEnvironmentService(rootFileResource);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\n\t\tfileEventEmitter = disposables.add(new Emitter<readonly IFileChange[]>());\n\t\ttestObject = disposables.add(new FileUserDataProvider(rootFileResource.scheme, new TestFileSystemProvider(fileEventEmitter.event), Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()));\n\t});\n\n\ttest('file added change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.ADDED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.ADDED\n\t\t}]);\n\t});\n\n\ttest('file updated change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.UPDATED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.UPDATED\n\t\t}]);\n\t});\n\n\ttest('file deleted change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.DELETED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t});\n\n\ttest('file under folder created change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'snippets', 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'snippets', 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.ADDED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.ADDED\n\t\t}]);\n\t});\n\n\ttest('file under folder updated change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'snippets', 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'snippets', 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.UPDATED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.UPDATED\n\t\t}]);\n\t});\n\n\ttest('file under folder deleted change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'snippets', 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'snippets', 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.DELETED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t});\n\n\ttest('event is not triggered if not watched', async () => {\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tlet triggered = false;\n\t\tdisposables.add(testObject.onDidChangeFile(() => triggered = true));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t\tif (triggered) {\n\t\t\tassert.fail('event should not be triggered');\n\t\t}\n\t});\n\n\ttest('event is not triggered if not watched 2', async () => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst target = joinPath(dirname(rootFileResource), 'settings.json');\n\t\tlet triggered = false;\n\t\tdisposables.add(testObject.onDidChangeFile(() => triggered = true));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t\tif (triggered) {\n\t\t\tassert.fail('event should not be triggered');\n\t\t}\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { dirname, isEqual, joinPath } from '../../../../base/common/resources.js';\nimport { ReadableStreamEvents } from '../../../../base/common/stream.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IEnvironmentService } from '../../../environment/common/environment.js';\nimport { AbstractNativeEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { FileService } from '../../../files/common/fileService.js';\nimport { FileChangeType, FileSystemProviderCapabilities, FileType, IFileChange, IFileOpenOptions, IFileReadStreamOptions, IFileService, IFileSystemProviderWithFileReadStreamCapability, IFileSystemProviderWithFileReadWriteCapability, IFileSystemProviderWithOpenReadWriteCloseCapability, IStat } from '../../../files/common/files.js';\nimport { InMemoryFileSystemProvider } from '../../../files/common/inMemoryFilesystemProvider.js';\nimport { NullLogService } from '../../../log/common/log.js';\nimport product from '../../../product/common/product.js';\nimport { UriIdentityService } from '../../../uriIdentity/common/uriIdentityService.js';\nimport { FileUserDataProvider } from '../../common/fileUserDataProvider.js';\nimport { IUserDataProfilesService, UserDataProfilesService } from '../../../userDataProfile/common/userDataProfile.js';\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nclass TestEnvironmentService extends AbstractNativeEnvironmentService {\n\tconstructor(private readonly _appSettingsHome: URI) {\n\t\tsuper(Object.create(null), Object.create(null), { _serviceBrand: undefined, ...product });\n\t}\n\toverride get userRoamingDataHome() { return this._appSettingsHome.with({ scheme: Schemas.vscodeUserData }); }\n\toverride get cacheHome() { return this.userRoamingDataHome; }\n}\n\nsuite('FileUserDataProvider', () => {\n\n\tlet testObject: IFileService;\n\tlet userDataHomeOnDisk: URI;\n\tlet backupWorkspaceHomeOnDisk: URI;\n\tlet environmentService: IEnvironmentService;\n\tlet userDataProfilesService: IUserDataProfilesService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet fileUserDataProvider: FileUserDataProvider;\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\ttestObject = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(testObject.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tuserDataHomeOnDisk = joinPath(ROOT, 'User');\n\t\tconst backupHome = joinPath(ROOT, 'Backups');\n\t\tbackupWorkspaceHomeOnDisk = joinPath(backupHome, 'workspaceId');\n\t\tawait testObject.createFolder(userDataHomeOnDisk);\n\t\tawait testObject.createFolder(backupWorkspaceHomeOnDisk);\n\n\t\tenvironmentService = new TestEnvironmentService(userDataHomeOnDisk);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(testObject));\n\t\tuserDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, testObject, uriIdentityService, logService));\n\n\t\tfileUserDataProvider = disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, logService));\n\t\tdisposables.add(fileUserDataProvider);\n\t\tdisposables.add(testObject.registerProvider(Schemas.vscodeUserData, fileUserDataProvider));\n\t});\n\n\ttest('exists return false when file does not exist', async () => {\n\t\tconst exists = await testObject.exists(userDataProfilesService.defaultProfile.settingsResource);\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('read file throws error if not exist', async () => {\n\t\ttry {\n\t\t\tawait testObject.readFile(userDataProfilesService.defaultProfile.settingsResource);\n\t\t\tassert.fail('Should fail since file does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('read existing file', async () => {\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.readFile(userDataProfilesService.defaultProfile.settingsResource);\n\t\tassert.strictEqual(result.value.toString(), '{}');\n\t});\n\n\ttest('create file', async () => {\n\t\tconst resource = userDataProfilesService.defaultProfile.settingsResource;\n\t\tconst actual1 = await testObject.createFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('write file creates the file if not exist', async () => {\n\t\tconst resource = userDataProfilesService.defaultProfile.settingsResource;\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('write to existing file', async () => {\n\t\tconst resource = userDataProfilesService.defaultProfile.settingsResource;\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{a:1}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{a:1}');\n\t});\n\n\ttest('delete file', async () => {\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString(''));\n\t\tawait testObject.del(userDataProfilesService.defaultProfile.settingsResource);\n\t\tconst result = await testObject.exists(joinPath(userDataHomeOnDisk, 'settings.json'));\n\t\tassert.strictEqual(false, result);\n\t});\n\n\ttest('resolve file', async () => {\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'settings.json'), VSBuffer.fromString(''));\n\t\tconst result = await testObject.resolve(userDataProfilesService.defaultProfile.settingsResource);\n\t\tassert.ok(!result.isDirectory);\n\t\tassert.ok(result.children === undefined);\n\t});\n\n\ttest('exists return false for folder that does not exist', async () => {\n\t\tconst exists = await testObject.exists(userDataProfilesService.defaultProfile.snippetsHome);\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('exists return true for folder that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tconst exists = await testObject.exists(userDataProfilesService.defaultProfile.snippetsHome);\n\t\tassert.strictEqual(exists, true);\n\t});\n\n\ttest('read file throws error for folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\ttry {\n\t\t\tawait testObject.readFile(userDataProfilesService.defaultProfile.snippetsHome);\n\t\t\tassert.fail('Should fail since read file is not supported for folders');\n\t\t} catch (e) { }\n\t});\n\n\ttest('read file under folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual = await testObject.readFile(resource);\n\t\tassert.strictEqual(actual.resource.toString(), resource.toString());\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('read file under sub folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets', 'java'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'java', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'java/settings.json');\n\t\tconst actual = await testObject.readFile(resource);\n\t\tassert.strictEqual(actual.resource.toString(), resource.toString());\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('create file under folder that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.createFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('create file under folder that does not exist', async () => {\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.createFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual2 = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual2.value.toString(), '{}');\n\t});\n\n\ttest('write to not existing file under container that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('write to not existing file under container that does not exists', async () => {\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('write to existing file under container', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{a:1}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{a:1}');\n\t});\n\n\ttest('write file under sub container', async () => {\n\t\tconst resource = joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'java/settings.json');\n\t\tconst actual1 = await testObject.writeFile(resource, VSBuffer.fromString('{}'));\n\t\tassert.strictEqual(actual1.resource.toString(), resource.toString());\n\t\tconst actual = await testObject.readFile(joinPath(userDataHomeOnDisk, 'snippets', 'java', 'settings.json'));\n\t\tassert.strictEqual(actual.value.toString(), '{}');\n\t});\n\n\ttest('delete throws error for folder that does not exist', async () => {\n\t\ttry {\n\t\t\tawait testObject.del(userDataProfilesService.defaultProfile.snippetsHome);\n\t\t\tassert.fail('Should fail the folder does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('delete not existing file under container that exists', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\ttry {\n\t\t\tawait testObject.del(joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json'));\n\t\t\tassert.fail('Should fail since file does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('delete not existing file under container that does not exists', async () => {\n\t\ttry {\n\t\t\tawait testObject.del(joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json'));\n\t\t\tassert.fail('Should fail since file does not exist');\n\t\t} catch (e) { }\n\t});\n\n\ttest('delete existing file under folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tawait testObject.del(joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json'));\n\t\tconst exists = await testObject.exists(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'));\n\t\tassert.strictEqual(exists, false);\n\t});\n\n\ttest('resolve folder', async () => {\n\t\tawait testObject.createFolder(joinPath(userDataHomeOnDisk, 'snippets'));\n\t\tawait testObject.writeFile(joinPath(userDataHomeOnDisk, 'snippets', 'settings.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.resolve(userDataProfilesService.defaultProfile.snippetsHome);\n\t\tassert.ok(result.isDirectory);\n\t\tassert.ok(result.children !== undefined);\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.children[0].resource.toString(), joinPath(userDataProfilesService.defaultProfile.snippetsHome, 'settings.json').toString());\n\t});\n\n\ttest('read backup file', async () => {\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.readFile(joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`));\n\t\tassert.strictEqual(result.value.toString(), '{}');\n\t});\n\n\ttest('create backup file', async () => {\n\t\tawait testObject.createFile(joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.readFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'));\n\t\tassert.strictEqual(result.value.toString(), '{}');\n\t});\n\n\ttest('write backup file', async () => {\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'), VSBuffer.fromString('{}'));\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`), VSBuffer.fromString('{a:1}'));\n\t\tconst result = await testObject.readFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'));\n\t\tassert.strictEqual(result.value.toString(), '{a:1}');\n\t});\n\n\ttest('resolve backups folder', async () => {\n\t\tawait testObject.writeFile(joinPath(backupWorkspaceHomeOnDisk, 'backup.json'), VSBuffer.fromString('{}'));\n\t\tconst result = await testObject.resolve(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }));\n\t\tassert.ok(result.isDirectory);\n\t\tassert.ok(result.children !== undefined);\n\t\tassert.strictEqual(result.children.length, 1);\n\t\tassert.strictEqual(result.children[0].resource.toString(), joinPath(backupWorkspaceHomeOnDisk.with({ scheme: environmentService.userRoamingDataHome.scheme }), `backup.json`).toString());\n\t});\n});\n\nclass TestFileSystemProvider implements IFileSystemProviderWithFileReadWriteCapability, IFileSystemProviderWithOpenReadWriteCloseCapability, IFileSystemProviderWithFileReadStreamCapability {\n\n\tconstructor(readonly onDidChangeFile: Event<readonly IFileChange[]>) { }\n\n\n\treadonly capabilities: FileSystemProviderCapabilities = FileSystemProviderCapabilities.FileReadWrite;\n\n\treadonly onDidChangeCapabilities: Event<void> = Event.None;\n\n\twatch(): IDisposable { return Disposable.None; }\n\n\tstat(): Promise<IStat> { throw new Error('Not Supported'); }\n\n\tmkdir(resource: URI): Promise<void> { throw new Error('Not Supported'); }\n\n\trename(): Promise<void> { throw new Error('Not Supported'); }\n\n\treadFile(resource: URI): Promise<Uint8Array> { throw new Error('Not Supported'); }\n\n\treaddir(resource: URI): Promise<[string, FileType][]> { throw new Error('Not Supported'); }\n\n\twriteFile(): Promise<void> { throw new Error('Not Supported'); }\n\n\tdelete(): Promise<void> { throw new Error('Not Supported'); }\n\topen(resource: URI, opts: IFileOpenOptions): Promise<number> { throw new Error('Not Supported'); }\n\tclose(fd: number): Promise<void> { throw new Error('Not Supported'); }\n\tread(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('Not Supported'); }\n\twrite(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('Not Supported'); }\n\n\treadFileStream(resource: URI, opts: IFileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array> { throw new Error('Method not implemented.'); }\n}\n\nsuite('FileUserDataProvider - Watching', () => {\n\n\tlet testObject: FileUserDataProvider;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tconst rootFileResource = joinPath(ROOT, 'User');\n\tconst rootUserDataResource = rootFileResource.with({ scheme: Schemas.vscodeUserData });\n\n\tlet fileEventEmitter: Emitter<readonly IFileChange[]>;\n\n\tsetup(() => {\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst environmentService = new TestEnvironmentService(rootFileResource);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\n\t\tfileEventEmitter = disposables.add(new Emitter<readonly IFileChange[]>());\n\t\ttestObject = disposables.add(new FileUserDataProvider(rootFileResource.scheme, new TestFileSystemProvider(fileEventEmitter.event), Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()));\n\t});\n\n\ttest('file added change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.ADDED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.ADDED\n\t\t}]);\n\t});\n\n\ttest('file updated change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.UPDATED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.UPDATED\n\t\t}]);\n\t});\n\n\ttest('file deleted change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.DELETED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t});\n\n\ttest('file under folder created change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'snippets', 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'snippets', 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.ADDED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.ADDED\n\t\t}]);\n\t});\n\n\ttest('file under folder updated change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'snippets', 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'snippets', 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.UPDATED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.UPDATED\n\t\t}]);\n\t});\n\n\ttest('file under folder deleted change event', done => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst expected = joinPath(rootUserDataResource, 'snippets', 'settings.json');\n\t\tconst target = joinPath(rootFileResource, 'snippets', 'settings.json');\n\t\tdisposables.add(testObject.onDidChangeFile(e => {\n\t\t\tif (isEqual(e[0].resource, expected) && e[0].type === FileChangeType.DELETED) {\n\t\t\t\tdone();\n\t\t\t}\n\t\t}));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t});\n\n\ttest('event is not triggered if not watched', async () => {\n\t\tconst target = joinPath(rootFileResource, 'settings.json');\n\t\tlet triggered = false;\n\t\tdisposables.add(testObject.onDidChangeFile(() => triggered = true));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t\tif (triggered) {\n\t\t\tassert.fail('event should not be triggered');\n\t\t}\n\t});\n\n\ttest('event is not triggered if not watched 2', async () => {\n\t\tdisposables.add(testObject.watch(rootUserDataResource, { excludes: [], recursive: false }));\n\t\tconst target = joinPath(dirname(rootFileResource), 'settings.json');\n\t\tlet triggered = false;\n\t\tdisposables.add(testObject.onDidChangeFile(() => triggered = true));\n\t\tfileEventEmitter.fire([{\n\t\t\tresource: target,\n\t\t\ttype: FileChangeType.DELETED\n\t\t}]);\n\t\tif (triggered) {\n\t\t\tassert.fail('event should not be triggered');\n\t\t}\n\t});\n\n});\n"]}