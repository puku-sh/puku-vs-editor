{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/telemetry/test/browser/telemetryService.test.ts","vs/platform/telemetry/test/browser/telemetryService.test.ts"],"names":[],"mappings":"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","file":"telemetryService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport sinonTest from 'sinon-test';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport * as Errors from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../configuration/test/common/testConfigurationService.js';\nimport product from '../../../product/common/product.js';\nimport { IProductService } from '../../../product/common/productService.js';\nimport ErrorTelemetry from '../../browser/errorTelemetry.js';\nimport { TelemetryConfiguration, TelemetryLevel } from '../../common/telemetry.js';\nimport { ITelemetryServiceConfig, TelemetryService } from '../../common/telemetryService.js';\nimport { ITelemetryAppender, NullAppender } from '../../common/telemetryUtils.js';\n\nconst sinonTestFn = sinonTest(sinon);\n\nclass TestTelemetryAppender implements ITelemetryAppender {\n\n\tpublic events: any[];\n\tpublic isDisposed: boolean;\n\n\tconstructor() {\n\t\tthis.events = [];\n\t\tthis.isDisposed = false;\n\t}\n\n\tpublic log(eventName: string, data?: any): void {\n\t\tthis.events.push({ eventName, data });\n\t}\n\n\tpublic getEventsCount() {\n\t\treturn this.events.length;\n\t}\n\n\tpublic flush(): Promise<any> {\n\t\tthis.isDisposed = true;\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nclass ErrorTestingSettings {\n\tpublic personalInfo: string;\n\tpublic importantInfo: string;\n\tpublic filePrefix: string;\n\tpublic dangerousPathWithoutImportantInfo: string;\n\tpublic dangerousPathWithImportantInfo: string;\n\tpublic missingModelPrefix: string;\n\tpublic missingModelMessage: string;\n\tpublic noSuchFilePrefix: string;\n\tpublic noSuchFileMessage: string;\n\tpublic stack: string[];\n\tpublic randomUserFile: string = 'a/path/that/doe_snt/con-tain/code/names.js';\n\tpublic anonymizedRandomUserFile: string = '<REDACTED: user-file-path>';\n\tpublic nodeModulePathToRetain: string = 'node_modules/path/that/shouldbe/retained/names.js:14:15854';\n\tpublic nodeModuleAsarPathToRetain: string = 'node_modules.asar/path/that/shouldbe/retained/names.js:14:12354';\n\n\tconstructor() {\n\t\tthis.personalInfo = 'DANGEROUS/PATH';\n\t\tthis.importantInfo = 'important/information';\n\t\tthis.filePrefix = 'file:///';\n\t\tthis.dangerousPathWithImportantInfo = this.filePrefix + this.personalInfo + '/resources/app/' + this.importantInfo;\n\t\tthis.dangerousPathWithoutImportantInfo = this.filePrefix + this.personalInfo;\n\n\t\tthis.missingModelPrefix = 'Received model events for missing model ';\n\t\tthis.missingModelMessage = this.missingModelPrefix + ' ' + this.dangerousPathWithoutImportantInfo;\n\n\t\tthis.noSuchFilePrefix = 'ENOENT: no such file or directory';\n\t\tthis.noSuchFileMessage = this.noSuchFilePrefix + ' \\'' + this.personalInfo + '\\'';\n\n\t\tthis.stack = [`at e._modelEvents (${this.randomUserFile}:11:7309)`,\n\t\t`    at t.AllWorkers (${this.randomUserFile}:6:8844)`,\n\t\t`    at e.(anonymous function) [as _modelEvents] (${this.randomUserFile}:5:29552)`,\n\t\t`    at Function.<anonymous> (${this.randomUserFile}:6:8272)`,\n\t\t`    at e.dispatch (${this.randomUserFile}:5:26931)`,\n\t\t`    at e.request (/${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._handleMessage (${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._onmessage (/${this.nodeModulePathToRetain})`,\n\t\t`    at t.onmessage (${this.nodeModulePathToRetain})`,\n\t\t\t`    at DedicatedWorkerGlobalScope.self.onmessage`,\n\t\tthis.dangerousPathWithImportantInfo,\n\t\tthis.dangerousPathWithoutImportantInfo,\n\t\tthis.missingModelMessage,\n\t\tthis.noSuchFileMessage];\n\t}\n}\n\nsuite('TelemetryService', () => {\n\n\tconst TestProductService: IProductService = { _serviceBrand: undefined, ...product };\n\n\ttest('Disposing', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testPrivateEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t\tassert.strictEqual(!testAppender.isDisposed, true);\n\t}));\n\n\t// event reporting\n\ttest('Simple event', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Event with data', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent', {\n\t\t\t'stringProp': 'property',\n\t\t\t'numberProp': 1,\n\t\t\t'booleanProp': true,\n\t\t\t'complexProp': {\n\t\t\t\t'value': 0\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\t\tassert.strictEqual(testAppender.events[0].data['stringProp'], 'property');\n\t\tassert.strictEqual(testAppender.events[0].data['numberProp'], 1);\n\t\tassert.strictEqual(testAppender.events[0].data['booleanProp'], true);\n\t\tassert.strictEqual(testAppender.events[0].data['complexProp'].value, 0);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('common properties added to *all* events, simple event', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender],\n\t\t\tcommonProperties: { foo: 'JA!', get bar() { return Math.random() % 2 === 0; } }\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tconst [first] = testAppender.events;\n\n\t\tassert.strictEqual(Object.keys(first.data).length, 2);\n\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\tassert.strictEqual(typeof first.data['bar'], 'boolean');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('common properties added to *all* events, event with data', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender],\n\t\t\tcommonProperties: { foo: 'JA!', get bar() { return Math.random() % 2 === 0; } }\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent', { hightower: 'xl', price: 8000 });\n\t\tconst [first] = testAppender.events;\n\n\t\tassert.strictEqual(Object.keys(first.data).length, 4);\n\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\tassert.strictEqual(typeof first.data['bar'], 'boolean');\n\t\tassert.strictEqual(typeof first.data['hightower'], 'string');\n\t\tassert.strictEqual(typeof first.data['price'], 'number');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('TelemetryInfo comes from properties', function () {\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [NullAppender],\n\t\t\tcommonProperties: {\n\t\t\t\tsessionID: 'one',\n\t\t\t\t['common.machineId']: 'three',\n\t\t\t}\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tassert.strictEqual(service.sessionId, 'one');\n\t\tassert.strictEqual(service.machineId, 'three');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('telemetry on by default', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\n\t\tservice.dispose();\n\t});\n\n\tclass TestErrorTelemetryService extends TelemetryService {\n\t\tconstructor(config: ITelemetryServiceConfig) {\n\t\t\tsuper({ ...config, sendErrorTelemetry: true }, new TestConfigurationService, TestProductService);\n\t\t}\n\t}\n\n\ttest('Error events', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\n\t\t\tconst e: any = new Error('This is a test.');\n\t\t\t// for Phantom\n\t\t\tif (!e.stack) {\n\t\t\t\te.stack = 'blah';\n\t\t\t}\n\n\t\t\tErrors.onUnexpectedError(e);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg, 'This is a test.');\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\t// \ttest('Unhandled Promise Error events', sinonTestFn(function() {\n\t//\n\t// \t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t// \t\tErrors.setUnexpectedErrorHandler(() => {});\n\t//\n\t// \t\ttry {\n\t// \t\t\tlet service = new MainTelemetryService();\n\t// \t\t\tlet testAppender = new TestTelemetryAppender();\n\t// \t\t\tservice.addTelemetryAppender(testAppender);\n\t//\n\t// \t\t\twinjs.Promise.wrapError(new Error('This should not get logged'));\n\t// \t\t\twinjs.TPromise.as(true).then(() => {\n\t// \t\t\t\tthrow new Error('This should get logged');\n\t// \t\t\t});\n\t// \t\t\t// prevent console output from failing the test\n\t// \t\t\tthis.stub(console, 'log');\n\t// \t\t\t// allow for the promise to finish\n\t// \t\t\tthis.clock.tick(MainErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t//\n\t// \t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t// \t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t// \t\t\tassert.strictEqual(testAppender.events[0].data.msg,  'This should get logged');\n\t//\n\t// \t\t\tservice.dispose();\n\t// \t\t} finally {\n\t// \t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t// \t\t}\n\t// \t}));\n\n\ttest('Handle global errors', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst testError = new Error('test');\n\t\t(mainWindow.onerror)('Error Message', 'file.js', 2, 42, testError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.alwaysCalledWithExactly('Error Message', 'file.js', 2, 42, testError), true);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\tassert.strictEqual(testAppender.events[0].data.msg, 'Error Message');\n\t\tassert.strictEqual(testAppender.events[0].data.file, 'file.js');\n\t\tassert.strictEqual(testAppender.events[0].data.line, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.column, 42);\n\t\tassert.strictEqual(testAppender.events[0].data.uncaught_error_msg, 'test');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Error Telemetry removes PII from filename with spaces', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst personInfoWithSpaces = settings.personalInfo.slice(0, 2) + ' ' + settings.personalInfo.slice(2);\n\t\tconst dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\tmainWindow.onerror('dangerousFilename', settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces) + '/test.js', 2, 42, dangerousFilenameError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII from filename', sinonTestFn(function (this: any) {\n\t\tconst clock = this.clock;\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\tmainWindow.onerror('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\n\t\tdangerousFilenameError = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\tmainWindow.onerror('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tassert.strictEqual(errorStub.callCount, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithoutImportantInfoError: any = new Error(settings.dangerousPathWithoutImportantInfo);\n\t\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t\tErrors.onUnexpectedError(dangerousPathWithoutImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithoutImportantInfoError: any = new Error('dangerousPathWithoutImportantInfo');\n\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.dangerousPathWithoutImportantInfo, 'test.js', 2, 42, dangerousPathWithoutImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, esp. personal info\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path with node modules', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender], piiPaths: [settings.personalInfo + '/resources/app/'] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender], piiPaths: [settings.personalInfo + '/resources/app/'] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Missing Model error message', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst missingModelError: any = new Error(settings.missingModelMessage);\n\t\t\tmissingModelError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (Received model events for missing model)\n\t\t\tErrors.onUnexpectedError(missingModelError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Missing Model error message', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst missingModelError: any = new Error('missingModelMessage');\n\t\tmissingModelError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.missingModelMessage, 'test.js', 2, 42, missingModelError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, but this particular\n\t\t// error message does (Received model events for missing model)\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves No Such File error message', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst noSuchFileError: any = new Error(settings.noSuchFileMessage);\n\t\t\tnoSuchFileError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves No Such File error message', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst errorStub = sinon.stub();\n\t\t\tmainWindow.onerror = errorStub;\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst noSuchFileError: any = new Error('noSuchFileMessage');\n\t\t\tnoSuchFileError.stack = settings.stack;\n\t\t\tmainWindow.onerror(settings.noSuchFileMessage, 'test.js', 2, 42, noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t\tsinon.restore();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Telemetry Service sends events when telemetry is on', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tservice.dispose();\n\t}));\n\n\ttest('Telemetry Service checks with config service', function () {\n\n\t\tlet telemetryLevel = TelemetryConfiguration.OFF;\n\t\tconst emitter = new Emitter<any>();\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender]\n\t\t}, new class extends TestConfigurationService {\n\t\t\toverride onDidChangeConfiguration = emitter.event;\n\t\t\toverride getValue<T>(): T {\n\t\t\t\treturn telemetryLevel as T;\n\t\t\t}\n\t\t}(), TestProductService);\n\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.NONE);\n\n\t\ttelemetryLevel = TelemetryConfiguration.ON;\n\t\temitter.fire({ affectsConfiguration: () => true });\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.USAGE);\n\n\t\ttelemetryLevel = TelemetryConfiguration.ERROR;\n\t\temitter.fire({ affectsConfiguration: () => true });\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.ERROR);\n\n\t\tservice.dispose();\n\t});\n\n\ttest('Unexpected Error Telemetry removes Windows PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst windowsUserPath = 'c:/Users/bpasero/AppData/Local/Programs/Microsoft%20VS%20Code%20Insiders/resources/app/';\n\t\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\t\tconst stack = [\n\t\t\t\t`    at cTe.gc (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:81492)`,\n\t\t\t\t`    at async cTe.setInput (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:80650)`,\n\t\t\t\t`    at async qJe.S (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:58520)`,\n\t\t\t\t`    at async qJe.L (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:57080)`,\n\t\t\t\t`    at async qJe.openEditor (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:56162)`\n\t\t\t];\n\n\t\t\tconst windowsError: any = new Error('The editor could not be opened because the file was not found.');\n\t\t\twindowsError.stack = stack.join('\\n');\n\n\t\t\tErrors.onUnexpectedError(windowsError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\t// Verify PII (username and path) is removed\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('bpasero'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Users'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('c:/Users'), -1);\n\t\t\t// Verify important code path is preserved\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes Windows PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst windowsUserPath = 'c:/Users/bpasero/AppData/Local/Programs/Microsoft%20VS%20Code%20Insiders/resources/app/';\n\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\tconst stack = [\n\t\t\t`    at cTe.gc (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:81492)`,\n\t\t\t`    at async cTe.setInput (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:80650)`,\n\t\t\t`    at async qJe.S (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:58520)`\n\t\t];\n\n\t\tconst windowsError: any = new Error('The editor could not be opened because the file was not found.');\n\t\twindowsError.stack = stack.join('\\n');\n\n\t\tmainWindow.onerror('The editor could not be opened because the file was not found.', 'test.js', 2, 42, windowsError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Verify PII (username and path) is removed\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('bpasero'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Users'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('c:/Users'), -1);\n\t\t// Verify important code path is preserved\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes macOS PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst macUserPath = 'Applications/Visual%20Studio%20Code%20-%20Insiders.app/Contents/Resources/app/';\n\t\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\t\tconst stack = [\n\t\t\t\t`    at uTe.gc (vscode-file://vscode-app/${macUserPath}${codePath}:2720:81492)`,\n\t\t\t\t`    at async uTe.setInput (vscode-file://vscode-app/${macUserPath}${codePath}:2720:80650)`,\n\t\t\t\t`    at async JJe.S (vscode-file://vscode-app/${macUserPath}${codePath}:698:58520)`,\n\t\t\t\t`    at async JJe.L (vscode-file://vscode-app/${macUserPath}${codePath}:698:57080)`,\n\t\t\t\t`    at async JJe.openEditor (vscode-file://vscode-app/${macUserPath}${codePath}:698:56162)`\n\t\t\t];\n\n\t\t\tconst macError: any = new Error('The editor could not be opened because the file was not found.');\n\t\t\tmacError.stack = stack.join('\\n');\n\n\t\t\tErrors.onUnexpectedError(macError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\t// Verify PII (application path) is removed\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Applications/Visual'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Visual%20Studio%20Code'), -1);\n\t\t\t// Verify important code path is preserved\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes macOS PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst macUserPath = 'Applications/Visual%20Studio%20Code%20-%20Insiders.app/Contents/Resources/app/';\n\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\tconst stack = [\n\t\t\t`    at uTe.gc (vscode-file://vscode-app/${macUserPath}${codePath}:2720:81492)`,\n\t\t\t`    at async uTe.setInput (vscode-file://vscode-app/${macUserPath}${codePath}:2720:80650)`,\n\t\t\t`    at async JJe.S (vscode-file://vscode-app/${macUserPath}${codePath}:698:58520)`\n\t\t];\n\n\t\tconst macError: any = new Error('The editor could not be opened because the file was not found.');\n\t\tmacError.stack = stack.join('\\n');\n\n\t\tmainWindow.onerror('The editor could not be opened because the file was not found.', 'test.js', 2, 42, macError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Verify PII (application path) is removed\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Applications/Visual'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Visual%20Studio%20Code'), -1);\n\t\t// Verify important code path is preserved\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes Linux PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst linuxUserPath = '/home/parallels/GitDevelopment/vscode-node-sqlite3-perf/';\n\t\t\tconst linuxSystemPath = 'usr/share/code-insiders/resources/app/';\n\t\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\t\tconst stack = [\n\t\t\t\t`    at _kt.G (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65940)`,\n\t\t\t\t`    at _kt.F (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65765)`,\n\t\t\t\t`    at async axt.L (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3830:9998)`,\n\t\t\t\t`    at async axt.readStream (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3830:9773)`,\n\t\t\t\t`    at async mye.Eb (vscode-file://vscode-app/${linuxSystemPath}${codePath}:1313:12359)`\n\t\t\t];\n\n\t\t\tconst linuxError: any = new Error(`Invalid fake file 'git:${linuxUserPath}index.js.git?{\"path\":\"${linuxUserPath}index.js\",\"ref\":\"\"}' (Canceled: Canceled)`);\n\t\t\tlinuxError.stack = stack.join('\\n');\n\n\t\t\tErrors.onUnexpectedError(linuxError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\t// Verify PII (username and home directory) is removed\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('parallels'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('/home/parallels'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('GitDevelopment'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('parallels'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('/home/parallels'), -1);\n\t\t\t// Verify important code path is preserved\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes Linux PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst linuxUserPath = '/home/parallels/GitDevelopment/vscode-node-sqlite3-perf/';\n\t\tconst linuxSystemPath = 'usr/share/code-insiders/resources/app/';\n\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\tconst stack = [\n\t\t\t`    at _kt.G (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65940)`,\n\t\t\t`    at _kt.F (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65765)`,\n\t\t\t`    at async axt.L (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3830:9998)`\n\t\t];\n\n\t\tconst linuxError: any = new Error(`Unable to read file 'git:${linuxUserPath}index.js.git'`);\n\t\tlinuxError.stack = stack.join('\\n');\n\n\t\tmainWindow.onerror(`Unable to read file 'git:${linuxUserPath}index.js.git'`, 'test.js', 2, 42, linuxError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Verify PII (username and home directory) is removed\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('parallels'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('/home/parallels'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('GitDevelopment'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('parallels'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('/home/parallels'), -1);\n\t\t// Verify important code path is preserved\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport sinonTest from 'sinon-test';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport * as Errors from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../configuration/test/common/testConfigurationService.js';\nimport product from '../../../product/common/product.js';\nimport { IProductService } from '../../../product/common/productService.js';\nimport ErrorTelemetry from '../../browser/errorTelemetry.js';\nimport { TelemetryConfiguration, TelemetryLevel } from '../../common/telemetry.js';\nimport { ITelemetryServiceConfig, TelemetryService } from '../../common/telemetryService.js';\nimport { ITelemetryAppender, NullAppender } from '../../common/telemetryUtils.js';\n\nconst sinonTestFn = sinonTest(sinon);\n\nclass TestTelemetryAppender implements ITelemetryAppender {\n\n\tpublic events: any[];\n\tpublic isDisposed: boolean;\n\n\tconstructor() {\n\t\tthis.events = [];\n\t\tthis.isDisposed = false;\n\t}\n\n\tpublic log(eventName: string, data?: any): void {\n\t\tthis.events.push({ eventName, data });\n\t}\n\n\tpublic getEventsCount() {\n\t\treturn this.events.length;\n\t}\n\n\tpublic flush(): Promise<any> {\n\t\tthis.isDisposed = true;\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nclass ErrorTestingSettings {\n\tpublic personalInfo: string;\n\tpublic importantInfo: string;\n\tpublic filePrefix: string;\n\tpublic dangerousPathWithoutImportantInfo: string;\n\tpublic dangerousPathWithImportantInfo: string;\n\tpublic missingModelPrefix: string;\n\tpublic missingModelMessage: string;\n\tpublic noSuchFilePrefix: string;\n\tpublic noSuchFileMessage: string;\n\tpublic stack: string[];\n\tpublic randomUserFile: string = 'a/path/that/doe_snt/con-tain/code/names.js';\n\tpublic anonymizedRandomUserFile: string = '<REDACTED: user-file-path>';\n\tpublic nodeModulePathToRetain: string = 'node_modules/path/that/shouldbe/retained/names.js:14:15854';\n\tpublic nodeModuleAsarPathToRetain: string = 'node_modules.asar/path/that/shouldbe/retained/names.js:14:12354';\n\n\tconstructor() {\n\t\tthis.personalInfo = 'DANGEROUS/PATH';\n\t\tthis.importantInfo = 'important/information';\n\t\tthis.filePrefix = 'file:///';\n\t\tthis.dangerousPathWithImportantInfo = this.filePrefix + this.personalInfo + '/resources/app/' + this.importantInfo;\n\t\tthis.dangerousPathWithoutImportantInfo = this.filePrefix + this.personalInfo;\n\n\t\tthis.missingModelPrefix = 'Received model events for missing model ';\n\t\tthis.missingModelMessage = this.missingModelPrefix + ' ' + this.dangerousPathWithoutImportantInfo;\n\n\t\tthis.noSuchFilePrefix = 'ENOENT: no such file or directory';\n\t\tthis.noSuchFileMessage = this.noSuchFilePrefix + ' \\'' + this.personalInfo + '\\'';\n\n\t\tthis.stack = [`at e._modelEvents (${this.randomUserFile}:11:7309)`,\n\t\t`    at t.AllWorkers (${this.randomUserFile}:6:8844)`,\n\t\t`    at e.(anonymous function) [as _modelEvents] (${this.randomUserFile}:5:29552)`,\n\t\t`    at Function.<anonymous> (${this.randomUserFile}:6:8272)`,\n\t\t`    at e.dispatch (${this.randomUserFile}:5:26931)`,\n\t\t`    at e.request (/${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._handleMessage (${this.nodeModuleAsarPathToRetain})`,\n\t\t`    at t._onmessage (/${this.nodeModulePathToRetain})`,\n\t\t`    at t.onmessage (${this.nodeModulePathToRetain})`,\n\t\t\t`    at DedicatedWorkerGlobalScope.self.onmessage`,\n\t\tthis.dangerousPathWithImportantInfo,\n\t\tthis.dangerousPathWithoutImportantInfo,\n\t\tthis.missingModelMessage,\n\t\tthis.noSuchFileMessage];\n\t}\n}\n\nsuite('TelemetryService', () => {\n\n\tconst TestProductService: IProductService = { _serviceBrand: undefined, ...product };\n\n\ttest('Disposing', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testPrivateEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\n\t\tservice.dispose();\n\t\tassert.strictEqual(!testAppender.isDisposed, true);\n\t}));\n\n\t// event reporting\n\ttest('Simple event', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('Event with data', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent', {\n\t\t\t'stringProp': 'property',\n\t\t\t'numberProp': 1,\n\t\t\t'booleanProp': true,\n\t\t\t'complexProp': {\n\t\t\t\t'value': 0\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\t\tassert.notStrictEqual(testAppender.events[0].data, null);\n\t\tassert.strictEqual(testAppender.events[0].data['stringProp'], 'property');\n\t\tassert.strictEqual(testAppender.events[0].data['numberProp'], 1);\n\t\tassert.strictEqual(testAppender.events[0].data['booleanProp'], true);\n\t\tassert.strictEqual(testAppender.events[0].data['complexProp'].value, 0);\n\n\t\tservice.dispose();\n\t}));\n\n\ttest('common properties added to *all* events, simple event', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender],\n\t\t\tcommonProperties: { foo: 'JA!', get bar() { return Math.random() % 2 === 0; } }\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tconst [first] = testAppender.events;\n\n\t\tassert.strictEqual(Object.keys(first.data).length, 2);\n\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\tassert.strictEqual(typeof first.data['bar'], 'boolean');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('common properties added to *all* events, event with data', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender],\n\t\t\tcommonProperties: { foo: 'JA!', get bar() { return Math.random() % 2 === 0; } }\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent', { hightower: 'xl', price: 8000 });\n\t\tconst [first] = testAppender.events;\n\n\t\tassert.strictEqual(Object.keys(first.data).length, 4);\n\t\tassert.strictEqual(typeof first.data['foo'], 'string');\n\t\tassert.strictEqual(typeof first.data['bar'], 'boolean');\n\t\tassert.strictEqual(typeof first.data['hightower'], 'string');\n\t\tassert.strictEqual(typeof first.data['price'], 'number');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('TelemetryInfo comes from properties', function () {\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [NullAppender],\n\t\t\tcommonProperties: {\n\t\t\t\tsessionID: 'one',\n\t\t\t\t['common.machineId']: 'three',\n\t\t\t}\n\t\t}, new TestConfigurationService(), TestProductService);\n\n\t\tassert.strictEqual(service.sessionId, 'one');\n\t\tassert.strictEqual(service.machineId, 'three');\n\n\t\tservice.dispose();\n\t});\n\n\ttest('telemetry on by default', function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'testEvent');\n\n\t\tservice.dispose();\n\t});\n\n\tclass TestErrorTelemetryService extends TelemetryService {\n\t\tconstructor(config: ITelemetryServiceConfig) {\n\t\t\tsuper({ ...config, sendErrorTelemetry: true }, new TestConfigurationService, TestProductService);\n\t\t}\n\t}\n\n\ttest('Error events', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\n\t\t\tconst e: any = new Error('This is a test.');\n\t\t\t// for Phantom\n\t\t\tif (!e.stack) {\n\t\t\t\te.stack = 'blah';\n\t\t\t}\n\n\t\t\tErrors.onUnexpectedError(e);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg, 'This is a test.');\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\t// \ttest('Unhandled Promise Error events', sinonTestFn(function() {\n\t//\n\t// \t\tlet origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t// \t\tErrors.setUnexpectedErrorHandler(() => {});\n\t//\n\t// \t\ttry {\n\t// \t\t\tlet service = new MainTelemetryService();\n\t// \t\t\tlet testAppender = new TestTelemetryAppender();\n\t// \t\t\tservice.addTelemetryAppender(testAppender);\n\t//\n\t// \t\t\twinjs.Promise.wrapError(new Error('This should not get logged'));\n\t// \t\t\twinjs.TPromise.as(true).then(() => {\n\t// \t\t\t\tthrow new Error('This should get logged');\n\t// \t\t\t});\n\t// \t\t\t// prevent console output from failing the test\n\t// \t\t\tthis.stub(console, 'log');\n\t// \t\t\t// allow for the promise to finish\n\t// \t\t\tthis.clock.tick(MainErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t//\n\t// \t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t// \t\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t// \t\t\tassert.strictEqual(testAppender.events[0].data.msg,  'This should get logged');\n\t//\n\t// \t\t\tservice.dispose();\n\t// \t\t} finally {\n\t// \t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t// \t\t}\n\t// \t}));\n\n\ttest('Handle global errors', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst testError = new Error('test');\n\t\t(mainWindow.onerror)('Error Message', 'file.js', 2, 42, testError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.alwaysCalledWithExactly('Error Message', 'file.js', 2, 42, testError), true);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tassert.strictEqual(testAppender.events[0].eventName, 'UnhandledError');\n\t\tassert.strictEqual(testAppender.events[0].data.msg, 'Error Message');\n\t\tassert.strictEqual(testAppender.events[0].data.file, 'file.js');\n\t\tassert.strictEqual(testAppender.events[0].data.line, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.column, 42);\n\t\tassert.strictEqual(testAppender.events[0].data.uncaught_error_msg, 'test');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Error Telemetry removes PII from filename with spaces', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst personInfoWithSpaces = settings.personalInfo.slice(0, 2) + ' ' + settings.personalInfo.slice(2);\n\t\tconst dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\tmainWindow.onerror('dangerousFilename', settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces) + '/test.js', 2, 42, dangerousFilenameError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo.replace(settings.personalInfo, personInfoWithSpaces)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII from filename', sinonTestFn(function (this: any) {\n\t\tconst clock = this.clock;\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tlet dangerousFilenameError: any = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\tmainWindow.onerror('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\n\t\tdangerousFilenameError = new Error('dangerousFilename');\n\t\tdangerousFilenameError.stack = settings.stack;\n\t\tmainWindow.onerror('dangerousFilename', settings.dangerousPathWithImportantInfo + '/test.js', 2, 42, dangerousFilenameError);\n\t\tclock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\t\tassert.strictEqual(errorStub.callCount, 2);\n\t\tassert.strictEqual(testAppender.events[0].data.file.indexOf(settings.dangerousPathWithImportantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.file, settings.importantInfo + '/test.js');\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithoutImportantInfoError: any = new Error(settings.dangerousPathWithoutImportantInfo);\n\t\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\t\tErrors.onUnexpectedError(dangerousPathWithoutImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithoutImportantInfoError: any = new Error('dangerousPathWithoutImportantInfo');\n\t\tdangerousPathWithoutImportantInfoError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.dangerousPathWithoutImportantInfo, 'test.js', 2, 42, dangerousPathWithoutImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, esp. personal info\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path with node modules', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(' + settings.nodeModulePathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModuleAsarPathToRetain), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('(/' + settings.nodeModulePathToRetain), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender], piiPaths: [settings.personalInfo + '/resources/app/'] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst dangerousPathWithImportantInfoError: any = new Error(settings.dangerousPathWithImportantInfo);\n\t\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\n\t\t\t// Test that important information remains but personal info does not\n\t\t\tErrors.onUnexpectedError(dangerousPathWithImportantInfoError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t}\n\t\tfinally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Code file path when PIIPath is configured', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender], piiPaths: [settings.personalInfo + '/resources/app/'] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst dangerousPathWithImportantInfoError: any = new Error('dangerousPathWithImportantInfo');\n\t\tdangerousPathWithImportantInfoError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.dangerousPathWithImportantInfo, 'test.js', 2, 42, dangerousPathWithImportantInfoError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that important information remains but personal info does not\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.importantInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves Missing Model error message', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst missingModelError: any = new Error(settings.missingModelMessage);\n\t\t\tmissingModelError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (Received model events for missing model)\n\t\t\tErrors.onUnexpectedError(missingModelError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves Missing Model error message', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\t\tconst settings = new ErrorTestingSettings();\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst missingModelError: any = new Error('missingModelMessage');\n\t\tmissingModelError.stack = settings.stack;\n\t\tmainWindow.onerror(settings.missingModelMessage, 'test.js', 2, 42, missingModelError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Test that no file information remains, but this particular\n\t\t// error message does (Received model events for missing model)\n\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.missingModelPrefix), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes PII but preserves No Such File error message', sinonTestFn(function (this: any) {\n\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst noSuchFileError: any = new Error(settings.noSuchFileMessage);\n\t\t\tnoSuchFileError.stack = settings.stack;\n\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes PII but preserves No Such File error message', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst errorStub = sinon.stub();\n\t\t\tmainWindow.onerror = errorStub;\n\t\t\tconst settings = new ErrorTestingSettings();\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst noSuchFileError: any = new Error('noSuchFileMessage');\n\t\t\tnoSuchFileError.stack = settings.stack;\n\t\t\tmainWindow.onerror(settings.noSuchFileMessage, 'test.js', 2, 42, noSuchFileError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t\t// Test that no file information remains, but this particular\n\t\t\t// error message does (ENOENT: no such file or directory)\n\t\t\tErrors.onUnexpectedError(noSuchFileError);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.msg.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.noSuchFilePrefix), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.personalInfo), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf(settings.filePrefix), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(settings.stack[4].replace(settings.randomUserFile, settings.anonymizedRandomUserFile)), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.split('\\n').length, settings.stack.length);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t\tsinon.restore();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Telemetry Service sends events when telemetry is on', sinonTestFn(function () {\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({ appenders: [testAppender] }, new TestConfigurationService(), TestProductService);\n\t\tservice.publicLog('testEvent');\n\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\tservice.dispose();\n\t}));\n\n\ttest('Telemetry Service checks with config service', function () {\n\n\t\tlet telemetryLevel = TelemetryConfiguration.OFF;\n\t\tconst emitter = new Emitter<any>();\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TelemetryService({\n\t\t\tappenders: [testAppender]\n\t\t}, new class extends TestConfigurationService {\n\t\t\toverride onDidChangeConfiguration = emitter.event;\n\t\t\toverride getValue<T>(): T {\n\t\t\t\treturn telemetryLevel as T;\n\t\t\t}\n\t\t}(), TestProductService);\n\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.NONE);\n\n\t\ttelemetryLevel = TelemetryConfiguration.ON;\n\t\temitter.fire({ affectsConfiguration: () => true });\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.USAGE);\n\n\t\ttelemetryLevel = TelemetryConfiguration.ERROR;\n\t\temitter.fire({ affectsConfiguration: () => true });\n\t\tassert.strictEqual(service.telemetryLevel, TelemetryLevel.ERROR);\n\n\t\tservice.dispose();\n\t});\n\n\ttest('Unexpected Error Telemetry removes Windows PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst windowsUserPath = 'c:/Users/bpasero/AppData/Local/Programs/Microsoft%20VS%20Code%20Insiders/resources/app/';\n\t\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\t\tconst stack = [\n\t\t\t\t`    at cTe.gc (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:81492)`,\n\t\t\t\t`    at async cTe.setInput (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:80650)`,\n\t\t\t\t`    at async qJe.S (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:58520)`,\n\t\t\t\t`    at async qJe.L (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:57080)`,\n\t\t\t\t`    at async qJe.openEditor (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:56162)`\n\t\t\t];\n\n\t\t\tconst windowsError: any = new Error('The editor could not be opened because the file was not found.');\n\t\t\twindowsError.stack = stack.join('\\n');\n\n\t\t\tErrors.onUnexpectedError(windowsError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\t// Verify PII (username and path) is removed\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('bpasero'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Users'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('c:/Users'), -1);\n\t\t\t// Verify important code path is preserved\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes Windows PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst windowsUserPath = 'c:/Users/bpasero/AppData/Local/Programs/Microsoft%20VS%20Code%20Insiders/resources/app/';\n\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\tconst stack = [\n\t\t\t`    at cTe.gc (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:81492)`,\n\t\t\t`    at async cTe.setInput (vscode-file://vscode-app/${windowsUserPath}${codePath}:2724:80650)`,\n\t\t\t`    at async qJe.S (vscode-file://vscode-app/${windowsUserPath}${codePath}:698:58520)`\n\t\t];\n\n\t\tconst windowsError: any = new Error('The editor could not be opened because the file was not found.');\n\t\twindowsError.stack = stack.join('\\n');\n\n\t\tmainWindow.onerror('The editor could not be opened because the file was not found.', 'test.js', 2, 42, windowsError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Verify PII (username and path) is removed\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('bpasero'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Users'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('c:/Users'), -1);\n\t\t// Verify important code path is preserved\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes macOS PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst macUserPath = 'Applications/Visual%20Studio%20Code%20-%20Insiders.app/Contents/Resources/app/';\n\t\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\t\tconst stack = [\n\t\t\t\t`    at uTe.gc (vscode-file://vscode-app/${macUserPath}${codePath}:2720:81492)`,\n\t\t\t\t`    at async uTe.setInput (vscode-file://vscode-app/${macUserPath}${codePath}:2720:80650)`,\n\t\t\t\t`    at async JJe.S (vscode-file://vscode-app/${macUserPath}${codePath}:698:58520)`,\n\t\t\t\t`    at async JJe.L (vscode-file://vscode-app/${macUserPath}${codePath}:698:57080)`,\n\t\t\t\t`    at async JJe.openEditor (vscode-file://vscode-app/${macUserPath}${codePath}:698:56162)`\n\t\t\t];\n\n\t\t\tconst macError: any = new Error('The editor could not be opened because the file was not found.');\n\t\t\tmacError.stack = stack.join('\\n');\n\n\t\t\tErrors.onUnexpectedError(macError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\t// Verify PII (application path) is removed\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Applications/Visual'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Visual%20Studio%20Code'), -1);\n\t\t\t// Verify important code path is preserved\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes macOS PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst macUserPath = 'Applications/Visual%20Studio%20Code%20-%20Insiders.app/Contents/Resources/app/';\n\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\tconst stack = [\n\t\t\t`    at uTe.gc (vscode-file://vscode-app/${macUserPath}${codePath}:2720:81492)`,\n\t\t\t`    at async uTe.setInput (vscode-file://vscode-app/${macUserPath}${codePath}:2720:80650)`,\n\t\t\t`    at async JJe.S (vscode-file://vscode-app/${macUserPath}${codePath}:698:58520)`\n\t\t];\n\n\t\tconst macError: any = new Error('The editor could not be opened because the file was not found.');\n\t\tmacError.stack = stack.join('\\n');\n\n\t\tmainWindow.onerror('The editor could not be opened because the file was not found.', 'test.js', 2, 42, macError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Verify PII (application path) is removed\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Applications/Visual'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('Visual%20Studio%20Code'), -1);\n\t\t// Verify important code path is preserved\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\ttest('Unexpected Error Telemetry removes Linux PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst origErrorHandler = Errors.errorHandler.getUnexpectedErrorHandler();\n\t\tErrors.setUnexpectedErrorHandler(() => { });\n\n\t\ttry {\n\t\t\tconst testAppender = new TestTelemetryAppender();\n\t\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\t\tconst linuxUserPath = '/home/parallels/GitDevelopment/vscode-node-sqlite3-perf/';\n\t\t\tconst linuxSystemPath = 'usr/share/code-insiders/resources/app/';\n\t\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\t\tconst stack = [\n\t\t\t\t`    at _kt.G (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65940)`,\n\t\t\t\t`    at _kt.F (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65765)`,\n\t\t\t\t`    at async axt.L (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3830:9998)`,\n\t\t\t\t`    at async axt.readStream (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3830:9773)`,\n\t\t\t\t`    at async mye.Eb (vscode-file://vscode-app/${linuxSystemPath}${codePath}:1313:12359)`\n\t\t\t];\n\n\t\t\tconst linuxError: any = new Error(`Invalid fake file 'git:${linuxUserPath}index.js.git?{\"path\":\"${linuxUserPath}index.js\",\"ref\":\"\"}' (Canceled: Canceled)`);\n\t\t\tlinuxError.stack = stack.join('\\n');\n\n\t\t\tErrors.onUnexpectedError(linuxError);\n\t\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\t\tassert.strictEqual(testAppender.getEventsCount(), 1);\n\t\t\t// Verify PII (username and home directory) is removed\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('parallels'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('/home/parallels'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('GitDevelopment'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('parallels'), -1);\n\t\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('/home/parallels'), -1);\n\t\t\t// Verify important code path is preserved\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\t\terrorTelemetry.dispose();\n\t\t\tservice.dispose();\n\t\t} finally {\n\t\t\tErrors.setUnexpectedErrorHandler(origErrorHandler);\n\t\t}\n\t}));\n\n\ttest('Uncaught Error Telemetry removes Linux PII but preserves code path', sinonTestFn(function (this: any) {\n\t\tconst errorStub = sinon.stub();\n\t\tmainWindow.onerror = errorStub;\n\n\t\tconst testAppender = new TestTelemetryAppender();\n\t\tconst service = new TestErrorTelemetryService({ appenders: [testAppender] });\n\t\tconst errorTelemetry = new ErrorTelemetry(service);\n\n\t\tconst linuxUserPath = '/home/parallels/GitDevelopment/vscode-node-sqlite3-perf/';\n\t\tconst linuxSystemPath = 'usr/share/code-insiders/resources/app/';\n\t\tconst codePath = 'out/vs/workbench/workbench.desktop.main.js';\n\t\tconst stack = [\n\t\t\t`    at _kt.G (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65940)`,\n\t\t\t`    at _kt.F (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3825:65765)`,\n\t\t\t`    at async axt.L (vscode-file://vscode-app/${linuxSystemPath}${codePath}:3830:9998)`\n\t\t];\n\n\t\tconst linuxError: any = new Error(`Unable to read file 'git:${linuxUserPath}index.js.git'`);\n\t\tlinuxError.stack = stack.join('\\n');\n\n\t\tmainWindow.onerror(`Unable to read file 'git:${linuxUserPath}index.js.git'`, 'test.js', 2, 42, linuxError);\n\t\tthis.clock.tick(ErrorTelemetry.ERROR_FLUSH_TIMEOUT);\n\n\t\tassert.strictEqual(errorStub.callCount, 1);\n\t\t// Verify PII (username and home directory) is removed\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('parallels'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('/home/parallels'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.msg.indexOf('GitDevelopment'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('parallels'), -1);\n\t\tassert.strictEqual(testAppender.events[0].data.callstack.indexOf('/home/parallels'), -1);\n\t\t// Verify important code path is preserved\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf(codePath), -1);\n\t\tassert.notStrictEqual(testAppender.events[0].data.callstack.indexOf('out/vs/workbench'), -1);\n\n\t\terrorTelemetry.dispose();\n\t\tservice.dispose();\n\t\tsinon.restore();\n\t}));\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}