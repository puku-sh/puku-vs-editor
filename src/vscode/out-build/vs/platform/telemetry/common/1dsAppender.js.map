{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/telemetry/common/1dsAppender.ts","vs/platform/telemetry/common/1dsAppender.ts"],"names":[],"mappings":"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","file":"1dsAppender.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IExtendedConfiguration, IExtendedTelemetryItem, ITelemetryItem, ITelemetryUnloadState } from '@microsoft/1ds-core-js';\nimport type { IChannelConfiguration, IXHROverride, PostChannel } from '@microsoft/1ds-post-js';\nimport { importAMDNodeModule } from '../../../amdX.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { mixin } from '../../../base/common/objects.js';\nimport { isWeb } from '../../../base/common/platform.js';\nimport { ITelemetryAppender, validateTelemetryData } from './telemetryUtils.js';\n\n// Interface type which is a subset of @microsoft/1ds-core-js AppInsightsCore.\n// Allows us to more easily build mock objects for testing as the interface is quite large and we only need a few properties.\nexport interface IAppInsightsCore {\n\tpluginVersionString: string;\n\ttrack(item: ITelemetryItem | IExtendedTelemetryItem): void;\n\tunload(isAsync: boolean, unloadComplete: (unloadState: ITelemetryUnloadState) => void): void;\n}\n\nconst endpointUrl = 'https://mobile.events.data.microsoft.com/OneCollector/1.0';\nconst endpointHealthUrl = 'https://mobile.events.data.microsoft.com/ping';\n\nasync function getClient(instrumentationKey: string, addInternalFlag?: boolean, xhrOverride?: IXHROverride): Promise<IAppInsightsCore> {\n\t// eslint-disable-next-line local/code-amd-node-module\n\tconst oneDs = isWeb ? await importAMDNodeModule<typeof import('@microsoft/1ds-core-js')>('@microsoft/1ds-core-js', 'bundle/ms.core.min.js') : await import('@microsoft/1ds-core-js');\n\t// eslint-disable-next-line local/code-amd-node-module\n\tconst postPlugin = isWeb ? await importAMDNodeModule<typeof import('@microsoft/1ds-post-js')>('@microsoft/1ds-post-js', 'bundle/ms.post.min.js') : await import('@microsoft/1ds-post-js');\n\n\tconst appInsightsCore = new oneDs.AppInsightsCore();\n\tconst collectorChannelPlugin: PostChannel = new postPlugin.PostChannel();\n\t// Configure the app insights core to send to collector++ and disable logging of debug info\n\tconst coreConfig: IExtendedConfiguration = {\n\t\tinstrumentationKey,\n\t\tendpointUrl,\n\t\tloggingLevelTelemetry: 0,\n\t\tloggingLevelConsole: 0,\n\t\tdisableCookiesUsage: true,\n\t\tdisableDbgExt: true,\n\t\tdisableInstrumentationKeyValidation: true,\n\t\tchannels: [[\n\t\t\tcollectorChannelPlugin\n\t\t]]\n\t};\n\n\tif (xhrOverride) {\n\t\tcoreConfig.extensionConfig = {};\n\t\t// Configure the channel to use a XHR Request override since it's not available in node\n\t\tconst channelConfig: IChannelConfiguration = {\n\t\t\talwaysUseXhrOverride: true,\n\t\t\tignoreMc1Ms0CookieProcessing: true,\n\t\t\thttpXHROverride: xhrOverride\n\t\t};\n\t\tcoreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n\t}\n\n\tappInsightsCore.initialize(coreConfig, []);\n\n\tappInsightsCore.addTelemetryInitializer((envelope) => {\n\t\t// Opt the user out of 1DS data sharing\n\t\tenvelope['ext'] = envelope['ext'] ?? {};\n\t\tenvelope['ext']['web'] = envelope['ext']['web'] ?? {};\n\t\tenvelope['ext']['web']['consentDetails'] = '{\"GPC_DataSharingOptIn\":false}';\n\n\t\tif (addInternalFlag) {\n\t\t\tenvelope['ext']['utc'] = envelope['ext']['utc'] ?? {};\n\t\t\t// Sets it to be internal only based on Windows UTC flagging\n\t\t\tenvelope['ext']['utc']['flags'] = 0x0000811ECD;\n\t\t}\n\t});\n\n\treturn appInsightsCore;\n}\n\n// TODO @lramos15 maybe make more in line with src/vs/platform/telemetry/browser/appInsightsAppender.ts with caching support\nexport abstract class AbstractOneDataSystemAppender implements ITelemetryAppender {\n\n\tprotected _aiCoreOrKey: IAppInsightsCore | string | undefined;\n\tprivate _asyncAiCore: Promise<IAppInsightsCore> | null;\n\tprotected readonly endPointUrl = endpointUrl;\n\tprotected readonly endPointHealthUrl = endpointHealthUrl;\n\n\tconstructor(\n\t\tprivate readonly _isInternalTelemetry: boolean,\n\t\tprivate _eventPrefix: string,\n\t\tprivate _defaultData: { [key: string]: unknown } | null,\n\t\tiKeyOrClientFactory: string | (() => IAppInsightsCore), // allow factory function for testing\n\t\tprivate _xhrOverride?: IXHROverride\n\t) {\n\t\tif (!this._defaultData) {\n\t\t\tthis._defaultData = {};\n\t\t}\n\n\t\tif (typeof iKeyOrClientFactory === 'function') {\n\t\t\tthis._aiCoreOrKey = iKeyOrClientFactory();\n\t\t} else {\n\t\t\tthis._aiCoreOrKey = iKeyOrClientFactory;\n\t\t}\n\t\tthis._asyncAiCore = null;\n\t}\n\n\tprivate _withAIClient(callback: (aiCore: IAppInsightsCore) => void): void {\n\t\tif (!this._aiCoreOrKey) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._aiCoreOrKey !== 'string') {\n\t\t\tcallback(this._aiCoreOrKey);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._asyncAiCore) {\n\t\t\tthis._asyncAiCore = getClient(this._aiCoreOrKey, this._isInternalTelemetry, this._xhrOverride);\n\t\t}\n\n\t\tthis._asyncAiCore.then(\n\t\t\t(aiClient) => {\n\t\t\t\tcallback(aiClient);\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t);\n\t}\n\n\tlog(eventName: string, data?: unknown): void {\n\t\tif (!this._aiCoreOrKey) {\n\t\t\treturn;\n\t\t}\n\t\tdata = mixin(data, this._defaultData);\n\t\tconst validatedData = validateTelemetryData(data);\n\t\tconst name = this._eventPrefix + '/' + eventName;\n\n\t\ttry {\n\t\t\tthis._withAIClient((aiClient) => {\n\t\t\t\taiClient.pluginVersionString = validatedData?.properties.version ?? 'Unknown';\n\t\t\t\taiClient.track({\n\t\t\t\t\tname,\n\t\t\t\t\tbaseData: { name, properties: validatedData?.properties, measurements: validatedData?.measurements }\n\t\t\t\t});\n\t\t\t});\n\t\t} catch { }\n\t}\n\n\tflush(): Promise<void> {\n\t\tif (this._aiCoreOrKey) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis._withAIClient((aiClient) => {\n\t\t\t\t\taiClient.unload(true, () => {\n\t\t\t\t\t\tthis._aiCoreOrKey = undefined;\n\t\t\t\t\t\tresolve(undefined);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IExtendedConfiguration, IExtendedTelemetryItem, ITelemetryItem, ITelemetryUnloadState } from '@microsoft/1ds-core-js';\nimport type { IChannelConfiguration, IXHROverride, PostChannel } from '@microsoft/1ds-post-js';\nimport { importAMDNodeModule } from '../../../amdX.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { mixin } from '../../../base/common/objects.js';\nimport { isWeb } from '../../../base/common/platform.js';\nimport { ITelemetryAppender, validateTelemetryData } from './telemetryUtils.js';\n\n// Interface type which is a subset of @microsoft/1ds-core-js AppInsightsCore.\n// Allows us to more easily build mock objects for testing as the interface is quite large and we only need a few properties.\nexport interface IAppInsightsCore {\n\tpluginVersionString: string;\n\ttrack(item: ITelemetryItem | IExtendedTelemetryItem): void;\n\tunload(isAsync: boolean, unloadComplete: (unloadState: ITelemetryUnloadState) => void): void;\n}\n\nconst endpointUrl = 'https://mobile.events.data.microsoft.com/OneCollector/1.0';\nconst endpointHealthUrl = 'https://mobile.events.data.microsoft.com/ping';\n\nasync function getClient(instrumentationKey: string, addInternalFlag?: boolean, xhrOverride?: IXHROverride): Promise<IAppInsightsCore> {\n\t// eslint-disable-next-line local/code-amd-node-module\n\tconst oneDs = isWeb ? await importAMDNodeModule<typeof import('@microsoft/1ds-core-js')>('@microsoft/1ds-core-js', 'bundle/ms.core.min.js') : await import('@microsoft/1ds-core-js');\n\t// eslint-disable-next-line local/code-amd-node-module\n\tconst postPlugin = isWeb ? await importAMDNodeModule<typeof import('@microsoft/1ds-post-js')>('@microsoft/1ds-post-js', 'bundle/ms.post.min.js') : await import('@microsoft/1ds-post-js');\n\n\tconst appInsightsCore = new oneDs.AppInsightsCore();\n\tconst collectorChannelPlugin: PostChannel = new postPlugin.PostChannel();\n\t// Configure the app insights core to send to collector++ and disable logging of debug info\n\tconst coreConfig: IExtendedConfiguration = {\n\t\tinstrumentationKey,\n\t\tendpointUrl,\n\t\tloggingLevelTelemetry: 0,\n\t\tloggingLevelConsole: 0,\n\t\tdisableCookiesUsage: true,\n\t\tdisableDbgExt: true,\n\t\tdisableInstrumentationKeyValidation: true,\n\t\tchannels: [[\n\t\t\tcollectorChannelPlugin\n\t\t]]\n\t};\n\n\tif (xhrOverride) {\n\t\tcoreConfig.extensionConfig = {};\n\t\t// Configure the channel to use a XHR Request override since it's not available in node\n\t\tconst channelConfig: IChannelConfiguration = {\n\t\t\talwaysUseXhrOverride: true,\n\t\t\tignoreMc1Ms0CookieProcessing: true,\n\t\t\thttpXHROverride: xhrOverride\n\t\t};\n\t\tcoreConfig.extensionConfig[collectorChannelPlugin.identifier] = channelConfig;\n\t}\n\n\tappInsightsCore.initialize(coreConfig, []);\n\n\tappInsightsCore.addTelemetryInitializer((envelope) => {\n\t\t// Opt the user out of 1DS data sharing\n\t\tenvelope['ext'] = envelope['ext'] ?? {};\n\t\tenvelope['ext']['web'] = envelope['ext']['web'] ?? {};\n\t\tenvelope['ext']['web']['consentDetails'] = '{\"GPC_DataSharingOptIn\":false}';\n\n\t\tif (addInternalFlag) {\n\t\t\tenvelope['ext']['utc'] = envelope['ext']['utc'] ?? {};\n\t\t\t// Sets it to be internal only based on Windows UTC flagging\n\t\t\tenvelope['ext']['utc']['flags'] = 0x0000811ECD;\n\t\t}\n\t});\n\n\treturn appInsightsCore;\n}\n\n// TODO @lramos15 maybe make more in line with src/vs/platform/telemetry/browser/appInsightsAppender.ts with caching support\nexport abstract class AbstractOneDataSystemAppender implements ITelemetryAppender {\n\n\tprotected _aiCoreOrKey: IAppInsightsCore | string | undefined;\n\tprivate _asyncAiCore: Promise<IAppInsightsCore> | null;\n\tprotected readonly endPointUrl = endpointUrl;\n\tprotected readonly endPointHealthUrl = endpointHealthUrl;\n\n\tconstructor(\n\t\tprivate readonly _isInternalTelemetry: boolean,\n\t\tprivate _eventPrefix: string,\n\t\tprivate _defaultData: { [key: string]: unknown } | null,\n\t\tiKeyOrClientFactory: string | (() => IAppInsightsCore), // allow factory function for testing\n\t\tprivate _xhrOverride?: IXHROverride\n\t) {\n\t\tif (!this._defaultData) {\n\t\t\tthis._defaultData = {};\n\t\t}\n\n\t\tif (typeof iKeyOrClientFactory === 'function') {\n\t\t\tthis._aiCoreOrKey = iKeyOrClientFactory();\n\t\t} else {\n\t\t\tthis._aiCoreOrKey = iKeyOrClientFactory;\n\t\t}\n\t\tthis._asyncAiCore = null;\n\t}\n\n\tprivate _withAIClient(callback: (aiCore: IAppInsightsCore) => void): void {\n\t\tif (!this._aiCoreOrKey) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._aiCoreOrKey !== 'string') {\n\t\t\tcallback(this._aiCoreOrKey);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._asyncAiCore) {\n\t\t\tthis._asyncAiCore = getClient(this._aiCoreOrKey, this._isInternalTelemetry, this._xhrOverride);\n\t\t}\n\n\t\tthis._asyncAiCore.then(\n\t\t\t(aiClient) => {\n\t\t\t\tcallback(aiClient);\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t);\n\t}\n\n\tlog(eventName: string, data?: unknown): void {\n\t\tif (!this._aiCoreOrKey) {\n\t\t\treturn;\n\t\t}\n\t\tdata = mixin(data, this._defaultData);\n\t\tconst validatedData = validateTelemetryData(data);\n\t\tconst name = this._eventPrefix + '/' + eventName;\n\n\t\ttry {\n\t\t\tthis._withAIClient((aiClient) => {\n\t\t\t\taiClient.pluginVersionString = validatedData?.properties.version ?? 'Unknown';\n\t\t\t\taiClient.track({\n\t\t\t\t\tname,\n\t\t\t\t\tbaseData: { name, properties: validatedData?.properties, measurements: validatedData?.measurements }\n\t\t\t\t});\n\t\t\t});\n\t\t} catch { }\n\t}\n\n\tflush(): Promise<void> {\n\t\tif (this._aiCoreOrKey) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tthis._withAIClient((aiClient) => {\n\t\t\t\t\taiClient.unload(true, () => {\n\t\t\t\t\t\tthis._aiCoreOrKey = undefined;\n\t\t\t\t\t\tresolve(undefined);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n}\n"]}