{"version":3,"sources":["vs/platform/telemetry/common/telemetryLogAppender.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAC/D,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,mBAAmB,EAAE,MAAM,yCAAyC,CAAC;AAC9E,OAAO,EAAW,cAAc,EAAE,MAAM,yBAAyB,CAAC;AAClE,OAAO,EAAE,eAAe,EAAE,MAAM,wCAAwC,CAAC;AACzE,OAAO,EAAsB,iBAAiB,EAAE,aAAa,EAAE,cAAc,EAAE,qBAAqB,EAAE,MAAM,qBAAqB,CAAC;AAE3H,IAAM,oBAAoB,GAA1B,MAAM,oBAAqB,SAAQ,UAAU;IAInD,YACkB,MAAc,EAC/B,MAAe,EACC,aAA6B,EACxB,kBAAuC,EAC3C,cAA+B;QAEhD,KAAK,EAAE,CAAC;QANS,WAAM,GAAN,MAAM,CAAQ;QAQ/B,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,cAAc,CAAC;QACvD,MAAM,MAAM,GAAG,aAAa,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QAC3C,IAAI,MAAM,EAAE,CAAC;YACZ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC;aAAM,CAAC;YACP,wIAAwI;YACxI,MAAM,wBAAwB,GAAG,aAAa,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;YACnF,MAAM,SAAS,GAAG,wBAAwB,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC;YAChE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,EACzD;gBACC,IAAI,EAAE,QAAQ,CAAC,IAAc,EAAE,IAAc,EAAE,SAAS,CAAC;gBACzD,KAAK,EAAE,iBAAiB;gBACxB,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC,CAAC;QACN,CAAC;IACF,CAAC;IAED,KAAK;QACJ,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,GAAG,CAAC,SAAiB,EAAE,IAAa;QACnC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,aAAa,SAAS,EAAE,EAAE,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;IACxF,CAAC;CACD,CAAA;AArCY,oBAAoB;IAO9B,WAAA,cAAc,CAAA;IACd,WAAA,mBAAmB,CAAA;IACnB,WAAA,eAAe,CAAA;GATL,oBAAoB,CAqChC","file":"telemetryLogAppender.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { localize } from '../../../nls.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { ILogger, ILoggerService } from '../../log/common/log.js';\nimport { IProductService } from '../../product/common/productService.js';\nimport { ITelemetryAppender, TelemetryLogGroup, isLoggingOnly, telemetryLogId, validateTelemetryData } from './telemetryUtils.js';\n\nexport class TelemetryLogAppender extends Disposable implements ITelemetryAppender {\n\n\tprivate readonly logger: ILogger;\n\n\tconstructor(\n\t\tprivate readonly prefix: string,\n\t\tremote: boolean,\n\t\t@ILoggerService loggerService: ILoggerService,\n\t\t@IEnvironmentService environmentService: IEnvironmentService,\n\t\t@IProductService productService: IProductService,\n\t) {\n\t\tsuper();\n\n\t\tconst id = remote ? 'remoteTelemetry' : telemetryLogId;\n\t\tconst logger = loggerService.getLogger(id);\n\t\tif (logger) {\n\t\t\tthis.logger = this._register(logger);\n\t\t} else {\n\t\t\t// Not a perfect check, but a nice way to indicate if we only have logging enabled for debug purposes and nothing is actually being sent\n\t\t\tconst justLoggingAndNotSending = isLoggingOnly(productService, environmentService);\n\t\t\tconst logSuffix = justLoggingAndNotSending ? ' (Not Sent)' : '';\n\t\t\tthis.logger = this._register(loggerService.createLogger(id,\n\t\t\t\t{\n\t\t\t\t\tname: localize('telemetryLog', \"Telemetry{0}\", logSuffix),\n\t\t\t\t\tgroup: TelemetryLogGroup,\n\t\t\t\t\thidden: true\n\t\t\t\t}));\n\t\t}\n\t}\n\n\tflush(): Promise<void> {\n\t\treturn Promise.resolve();\n\t}\n\n\tlog(eventName: string, data: unknown): void {\n\t\tthis.logger.trace(`${this.prefix}telemetry/${eventName}`, validateTelemetryData(data));\n\t}\n}\n\n"]}