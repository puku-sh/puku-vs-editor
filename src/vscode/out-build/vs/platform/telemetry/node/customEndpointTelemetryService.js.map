{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/telemetry/node/customEndpointTelemetryService.ts","vs/platform/telemetry/node/customEndpointTelemetryService.ts"],"names":[],"mappings":"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","file":"customEndpointTelemetryService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { FileAccess } from '../../../base/common/network.js';\nimport { Client as TelemetryClient } from '../../../base/parts/ipc/node/ipc.cp.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { ILoggerService } from '../../log/common/log.js';\nimport { IProductService } from '../../product/common/productService.js';\nimport { ICustomEndpointTelemetryService, ITelemetryData, ITelemetryEndpoint, ITelemetryService } from '../common/telemetry.js';\nimport { TelemetryAppenderClient } from '../common/telemetryIpc.js';\nimport { TelemetryLogAppender } from '../common/telemetryLogAppender.js';\nimport { TelemetryService } from '../common/telemetryService.js';\n\nexport class CustomEndpointTelemetryService implements ICustomEndpointTelemetryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate customTelemetryServices = new Map<string, ITelemetryService>();\n\n\tconstructor(\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ILoggerService private readonly loggerService: ILoggerService,\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IProductService private readonly productService: IProductService\n\t) { }\n\n\tprivate getCustomTelemetryService(endpoint: ITelemetryEndpoint): ITelemetryService {\n\t\tif (!this.customTelemetryServices.has(endpoint.id)) {\n\t\t\tconst telemetryInfo: { [key: string]: string } = Object.create(null);\n\t\t\ttelemetryInfo['common.vscodemachineid'] = this.telemetryService.machineId;\n\t\t\ttelemetryInfo['common.vscodesessionid'] = this.telemetryService.sessionId;\n\t\t\tconst args = [endpoint.id, JSON.stringify(telemetryInfo), endpoint.aiKey];\n\t\t\tconst client = new TelemetryClient(\n\t\t\t\tFileAccess.asFileUri('bootstrap-fork').fsPath,\n\t\t\t\t{\n\t\t\t\t\tserverName: 'Debug Telemetry',\n\t\t\t\t\ttimeout: 1000 * 60 * 5,\n\t\t\t\t\targs,\n\t\t\t\t\tenv: {\n\t\t\t\t\t\tELECTRON_RUN_AS_NODE: 1,\n\t\t\t\t\t\tVSCODE_PIPE_LOGGING: 'true',\n\t\t\t\t\t\tVSCODE_ESM_ENTRYPOINT: 'vs/workbench/contrib/debug/node/telemetryApp'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst channel = client.getChannel('telemetryAppender');\n\t\t\tconst appenders = [\n\t\t\t\tnew TelemetryAppenderClient(channel),\n\t\t\t\tnew TelemetryLogAppender(`[${endpoint.id}] `, false, this.loggerService, this.environmentService, this.productService),\n\t\t\t];\n\n\t\t\tthis.customTelemetryServices.set(endpoint.id, new TelemetryService({\n\t\t\t\tappenders,\n\t\t\t\tsendErrorTelemetry: endpoint.sendErrorTelemetry\n\t\t\t}, this.configurationService, this.productService));\n\t\t}\n\n\t\treturn this.customTelemetryServices.get(endpoint.id)!;\n\t}\n\n\tpublicLog(telemetryEndpoint: ITelemetryEndpoint, eventName: string, data?: ITelemetryData) {\n\t\tconst customTelemetryService = this.getCustomTelemetryService(telemetryEndpoint);\n\t\tcustomTelemetryService.publicLog(eventName, data);\n\t}\n\n\tpublicLogError(telemetryEndpoint: ITelemetryEndpoint, errorEventName: string, data?: ITelemetryData) {\n\t\tconst customTelemetryService = this.getCustomTelemetryService(telemetryEndpoint);\n\t\tcustomTelemetryService.publicLogError(errorEventName, data);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { FileAccess } from '../../../base/common/network.js';\nimport { Client as TelemetryClient } from '../../../base/parts/ipc/node/ipc.cp.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { ILoggerService } from '../../log/common/log.js';\nimport { IProductService } from '../../product/common/productService.js';\nimport { ICustomEndpointTelemetryService, ITelemetryData, ITelemetryEndpoint, ITelemetryService } from '../common/telemetry.js';\nimport { TelemetryAppenderClient } from '../common/telemetryIpc.js';\nimport { TelemetryLogAppender } from '../common/telemetryLogAppender.js';\nimport { TelemetryService } from '../common/telemetryService.js';\n\nexport class CustomEndpointTelemetryService implements ICustomEndpointTelemetryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate customTelemetryServices = new Map<string, ITelemetryService>();\n\n\tconstructor(\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ILoggerService private readonly loggerService: ILoggerService,\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IProductService private readonly productService: IProductService\n\t) { }\n\n\tprivate getCustomTelemetryService(endpoint: ITelemetryEndpoint): ITelemetryService {\n\t\tif (!this.customTelemetryServices.has(endpoint.id)) {\n\t\t\tconst telemetryInfo: { [key: string]: string } = Object.create(null);\n\t\t\ttelemetryInfo['common.vscodemachineid'] = this.telemetryService.machineId;\n\t\t\ttelemetryInfo['common.vscodesessionid'] = this.telemetryService.sessionId;\n\t\t\tconst args = [endpoint.id, JSON.stringify(telemetryInfo), endpoint.aiKey];\n\t\t\tconst client = new TelemetryClient(\n\t\t\t\tFileAccess.asFileUri('bootstrap-fork').fsPath,\n\t\t\t\t{\n\t\t\t\t\tserverName: 'Debug Telemetry',\n\t\t\t\t\ttimeout: 1000 * 60 * 5,\n\t\t\t\t\targs,\n\t\t\t\t\tenv: {\n\t\t\t\t\t\tELECTRON_RUN_AS_NODE: 1,\n\t\t\t\t\t\tVSCODE_PIPE_LOGGING: 'true',\n\t\t\t\t\t\tVSCODE_ESM_ENTRYPOINT: 'vs/workbench/contrib/debug/node/telemetryApp'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst channel = client.getChannel('telemetryAppender');\n\t\t\tconst appenders = [\n\t\t\t\tnew TelemetryAppenderClient(channel),\n\t\t\t\tnew TelemetryLogAppender(`[${endpoint.id}] `, false, this.loggerService, this.environmentService, this.productService),\n\t\t\t];\n\n\t\t\tthis.customTelemetryServices.set(endpoint.id, new TelemetryService({\n\t\t\t\tappenders,\n\t\t\t\tsendErrorTelemetry: endpoint.sendErrorTelemetry\n\t\t\t}, this.configurationService, this.productService));\n\t\t}\n\n\t\treturn this.customTelemetryServices.get(endpoint.id)!;\n\t}\n\n\tpublicLog(telemetryEndpoint: ITelemetryEndpoint, eventName: string, data?: ITelemetryData) {\n\t\tconst customTelemetryService = this.getCustomTelemetryService(telemetryEndpoint);\n\t\tcustomTelemetryService.publicLog(eventName, data);\n\t}\n\n\tpublicLogError(telemetryEndpoint: ITelemetryEndpoint, errorEventName: string, data?: ITelemetryData) {\n\t\tconst customTelemetryService = this.getCustomTelemetryService(telemetryEndpoint);\n\t\tcustomTelemetryService.publicLogError(errorEventName, data);\n\t}\n}\n"]}