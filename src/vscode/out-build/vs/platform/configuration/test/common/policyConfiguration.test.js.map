{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/configuration/test/common/policyConfiguration.test.ts","vs/platform/configuration/test/common/policyConfiguration.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAAE,KAAK,EAAE,MAAM,kCAAkC,CAAC;AACzD,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAAE,oBAAoB,EAAE,mBAAmB,EAAE,MAAM,gCAAgC,CAAC;AAE3F,OAAO,EAAE,WAAW,EAAE,MAAM,sCAAsC,CAAC;AACnE,OAAO,EAAE,0BAA0B,EAAE,MAAM,qDAAqD,CAAC;AACjG,OAAO,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAC;AAC5D,OAAO,EAAE,UAAU,EAA8C,MAAM,uCAAuC,CAAC;AAC/G,OAAO,EAAE,QAAQ,EAAE,MAAM,sCAAsC,CAAC;AAChE,OAAO,EAAE,QAAQ,EAAE,MAAM,mCAAmC,CAAC;AAC7D,OAAO,EAAE,SAAS,EAAE,MAAM,oCAAoC,CAAC;AAE/D,OAAO,EAAE,iBAAiB,EAAE,MAAM,6CAA6C,CAAC;AAChF,OAAO,EAAE,kBAAkB,EAAE,MAAM,qDAAqD,CAAC;AACzF,OAAO,EAAE,uCAAuC,EAAE,MAAM,uCAAuC,CAAC;AAChG,OAAO,EAAE,cAAc,EAAE,MAAM,mCAAmC,CAAC;AAEnE,KAAK,CAAC,qBAAqB,EAAE,GAAG,EAAE;IAEjC,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,IAAI,UAA+B,CAAC;IACpC,IAAI,WAAyB,CAAC;IAC9B,IAAI,aAA6B,CAAC;IAClC,MAAM,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,cAAc,EAAE,CAAC,CAAC;IAC3E,MAAM,uBAAuB,GAAuB;QACnD,IAAI,EAAE,qBAAqB;QAC3B,OAAO,EAAE,CAAC;QACV,OAAO,EAAE,GAAG;QACZ,MAAM,EAAE,QAAQ;QAChB,YAAY,EAAE;YACb,iBAAiB,EAAE;gBAClB,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,eAAe;gBAC1B,MAAM,EAAE;oBACP,IAAI,EAAE,gBAAgB;oBACtB,QAAQ,EAAE,cAAc,CAAC,UAAU;oBACnC,cAAc,EAAE,OAAO;oBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;iBACtD;aACD;YACD,iBAAiB,EAAE;gBAClB,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,eAAe;gBAC1B,MAAM,EAAE;oBACP,IAAI,EAAE,gBAAgB;oBACtB,QAAQ,EAAE,cAAc,CAAC,UAAU;oBACnC,cAAc,EAAE,OAAO;oBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;iBACtD;aACD;YACD,sBAAsB,EAAE;gBACvB,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,EAAE;gBACb,MAAM,EAAE;oBACP,IAAI,EAAE,qBAAqB;oBAC3B,QAAQ,EAAE,cAAc,CAAC,UAAU;oBACnC,cAAc,EAAE,OAAO;oBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;iBACtD;aACD;YACD,qBAAqB,EAAE;gBACtB,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,EAAE;gBACb,MAAM,EAAE;oBACP,IAAI,EAAE,oBAAoB;oBAC1B,QAAQ,EAAE,cAAc,CAAC,UAAU;oBACnC,cAAc,EAAE,OAAO;oBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;iBACtD;aACD;YACD,uBAAuB,EAAE;gBACxB,MAAM,EAAE,SAAS;gBACjB,SAAS,EAAE,IAAI;gBACf,MAAM,EAAE;oBACP,IAAI,EAAE,sBAAsB;oBAC5B,QAAQ,EAAE,cAAc,CAAC,UAAU;oBACnC,cAAc,EAAE,OAAO;oBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;iBACtD;aACD;YACD,wBAAwB,EAAE;gBACzB,MAAM,EAAE,QAAQ;gBAChB,SAAS,EAAE,sBAAsB;gBACjC,QAAQ,EAAE,KAAK;gBACf,MAAM,EAAE;oBACP,IAAI,EAAE,uBAAuB;oBAC7B,QAAQ,EAAE,cAAc,CAAC,UAAU;oBACnC,cAAc,EAAE,OAAO;oBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;iBACtD;aACD;YACD,mBAAmB,EAAE;gBACpB,MAAM,EAAE,SAAS;gBACjB,SAAS,EAAE,IAAI;aACf;SACD;KACD,CAAC;IAEF,UAAU,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAyB,UAAU,CAAC,aAAa,CAAC,CAAC,qBAAqB,CAAC,uBAAuB,CAAC,CAAC,CAAC;IAC/H,aAAa,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAyB,UAAU,CAAC,aAAa,CAAC,CAAC,wBAAwB,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;IAEvI,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,oBAAoB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC;QAC7F,MAAM,oBAAoB,CAAC,UAAU,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC;QACrE,MAAM,sBAAsB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QACjF,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,UAAU,CAAC,MAAM,EAAE,sBAAsB,CAAC,CAAC,CAAC;QACzF,aAAa,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,iBAAiB,CAAC,UAAU,EAAE,WAAW,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC;QACtG,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,oBAAoB,EAAE,aAAa,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC;IAClH,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,2BAA2B,EAAE,KAAK,IAAI,EAAE;QAC5C,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QAEnH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,cAAc,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACzD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE;QAC1C,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;IACrE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;QAC/D,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QAEvL,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,cAAc,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,cAAc,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,CAAC,CAAC;QAC5E,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;QACtD,MAAM,QAAQ,GAAG;YAChB,WAAW,EAAE,IAAI;YACjB,QAAQ,EAAE,QAAQ;YAClB,OAAO,EAAE,CAAC;YACV,SAAS,EAAE;gBACV,KAAK,EAAE,OAAO;aACd;YACD,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;SAClB,CAAC;QACF,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,qBAAqB,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAElI,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,sBAAsB,CAAC,EAAE,QAAQ,CAAC,CAAC;IAC3E,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;QACrD,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,oBAAoB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAE5H,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACrE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,+CAA+C,EAAE,KAAK,IAAI,EAAE;QAChE,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,sBAAsB,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;QAEhH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE,KAAK,CAAC,CAAC;IACzE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,8CAA8C,EAAE,KAAK,IAAI,EAAE;QAC/D,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,sBAAsB,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;QAE/G,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE,IAAI,CAAC,CAAC;IACxE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,0EAA0E,EAAE,KAAK,IAAI,EAAE;QAC3F,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,qBAAqB,EAAE,uBAAuB,EAAE,CAAC,CAAC,CAAC,CAAC;QAEjI,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,sBAAsB,CAAC,EAAE,SAAS,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gFAAgF,EAAE,KAAK,IAAI,EAAE;QACjG,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,qBAAqB,EAAE,0CAA0C,EAAE,CAAC,CAAC,CAAC,CAAC;QAEpJ,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,sBAAsB,CAAC,EAAE,SAAS,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,8BAA8B,EAAE,KAAK,IAAI,EAAE;QAC/C,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAE9B,MAAM,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;YACrE,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;YACvL,MAAM,OAAO,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,cAAc,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,cAAc,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,CAAC,CAAC;QAC5E,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;QACjD,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAE9B,MAAM,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;YACrE,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,CAAC,CAAC,CAAC,CAAC;YAC1H,MAAM,OAAO,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,qBAAqB,CAAC,CAAC;QAC9E,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACzD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;QACjD,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAE9B,MAAM,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;YACrE,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACjF,MAAM,OAAO,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;QAC5D,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAE9B,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,uBAAuB,CAAC,UAAW,CAAC,iBAAiB,CAAC,GAAG;YACxD,MAAM,EAAE,QAAQ;YAChB,SAAS,EAAE,eAAe;YAC1B,MAAM,EAAE;gBACP,IAAI,EAAE,gBAAgB;gBACtB,QAAQ,EAAE,cAAc,CAAC,UAAU;gBACnC,cAAc,EAAE,OAAO;gBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG;aACtD;SACD,CAAC;QACF,QAAQ,CAAC,EAAE,CAAyB,UAAU,CAAC,aAAa,CAAC,CAAC,qBAAqB,CAAC,SAAS,CAAC,uBAAuB,CAAC,CAAC,CAAC;QACxH,MAAM,OAAO,CAAC;QAEd,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,cAAc,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACzD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;QAC9D,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,gBAAgB,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAE9B,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,QAAQ,CAAC,EAAE,CAAyB,UAAU,CAAC,aAAa,CAAC,CAAC,wBAAwB,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;QAClH,MAAM,OAAO,CAAC;QAEd,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;QACrD,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,uBAAuB,EAAE,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC;QAE3H,MAAM,UAAU,CAAC,UAAU,EAAE,CAAC;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC;QAE7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,CAAC;QAClE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,wBAAwB,CAAC,EAAE,eAAe,CAAC,CAAC;QAC/E,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,SAAS,CAAC,CAAC;QACpE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,wBAAwB,CAAC,CAAC,CAAC;QAChE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;AAEJ,CAAC,CAAC,CAAC","file":"policyConfiguration.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../base/common/event.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DefaultConfiguration, PolicyConfiguration } from '../../common/configurations.js';\nimport { IFileService } from '../../../files/common/files.js';\nimport { FileService } from '../../../files/common/fileService.js';\nimport { InMemoryFileSystemProvider } from '../../../files/common/inMemoryFilesystemProvider.js';\nimport { NullLogService } from '../../../log/common/log.js';\nimport { Extensions, IConfigurationNode, IConfigurationRegistry } from '../../common/configurationRegistry.js';\nimport { Registry } from '../../../registry/common/platform.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { IPolicyService } from '../../../policy/common/policy.js';\nimport { FilePolicyService } from '../../../policy/common/filePolicyService.js';\nimport { runWithFakedTimers } from '../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { PolicyCategory } from '../../../../base/common/policy.js';\n\nsuite('PolicyConfiguration', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet testObject: PolicyConfiguration;\n\tlet fileService: IFileService;\n\tlet policyService: IPolicyService;\n\tconst policyFile = URI.file('policyFile').with({ scheme: 'vscode-tests' });\n\tconst policyConfigurationNode: IConfigurationNode = {\n\t\t'id': 'policyConfiguration',\n\t\t'order': 1,\n\t\t'title': 'a',\n\t\t'type': 'object',\n\t\t'properties': {\n\t\t\t'policy.settingA': {\n\t\t\t\t'type': 'string',\n\t\t\t\t'default': 'defaultValueA',\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicySettingA',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.settingB': {\n\t\t\t\t'type': 'string',\n\t\t\t\t'default': 'defaultValueB',\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicySettingB',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.objectSetting': {\n\t\t\t\t'type': 'object',\n\t\t\t\t'default': {},\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyObjectSetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.arraySetting': {\n\t\t\t\t'type': 'object',\n\t\t\t\t'default': [],\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyArraySetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.booleanSetting': {\n\t\t\t\t'type': 'boolean',\n\t\t\t\t'default': true,\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyBooleanSetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.internalSetting': {\n\t\t\t\t'type': 'string',\n\t\t\t\t'default': 'defaultInternalValue',\n\t\t\t\tincluded: false,\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyInternalSetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'nonPolicy.setting': {\n\t\t\t\t'type': 'boolean',\n\t\t\t\t'default': true\n\t\t\t}\n\t\t}\n\t};\n\n\tsuiteSetup(() => Registry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration(policyConfigurationNode));\n\tsuiteTeardown(() => Registry.as<IConfigurationRegistry>(Extensions.Configuration).deregisterConfigurations([policyConfigurationNode]));\n\n\tsetup(async () => {\n\t\tconst defaultConfiguration = disposables.add(new DefaultConfiguration(new NullLogService()));\n\t\tawait defaultConfiguration.initialize();\n\t\tfileService = disposables.add(new FileService(new NullLogService()));\n\t\tconst diskFileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(policyFile.scheme, diskFileSystemProvider));\n\t\tpolicyService = disposables.add(new FilePolicyService(policyFile, fileService, new NullLogService()));\n\t\ttestObject = disposables.add(new PolicyConfiguration(defaultConfiguration, policyService, new NullLogService()));\n\t});\n\n\ttest('initialize: with policies', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueA');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('initialize: no policies', async () => {\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.keys, []);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t});\n\n\ttest('initialize: with policies but not registered', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA', 'PolicySettingB': 'policyValueB', 'PolicySettingC': 'policyValueC' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueA');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), 'policyValueB');\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA', 'policy.settingB']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('initialize: with object type policy', async () => {\n\t\tconst expected = {\n\t\t\t'microsoft': true,\n\t\t\t'github': 'stable',\n\t\t\t'other': 1,\n\t\t\t'complex': {\n\t\t\t\t'key': 'value'\n\t\t\t},\n\t\t\t'array': [1, 2, 3]\n\t\t};\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyObjectSetting': JSON.stringify(expected) })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.objectSetting'), expected);\n\t});\n\n\ttest('initialize: with array type policy', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyArraySetting': JSON.stringify([1]) })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.arraySetting'), [1]);\n\t});\n\n\ttest('initialize: with boolean type policy as false', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyBooleanSetting': false })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.booleanSetting'), false);\n\t});\n\n\ttest('initialize: with boolean type policy as true', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyBooleanSetting': true })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.booleanSetting'), true);\n\t});\n\n\ttest('initialize: with object type policy ignores policy if value is not valid', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyObjectSetting': '{\"a\": \"b\", \"hello\": }' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.objectSetting'), undefined);\n\t});\n\n\ttest('initialize: with object type policy ignores policy if there are duplicate keys', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyObjectSetting': '{\"microsoft\": true, \"microsoft\": false }' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.objectSetting'), undefined);\n\t});\n\n\ttest('change: when policy is added', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA', 'PolicySettingB': 'policyValueB', 'PolicySettingC': 'policyValueC' })));\n\t\t\tawait promise;\n\t\t});\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueA');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), 'policyValueB');\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA', 'policy.settingB']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy is updated', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueAChanged' })));\n\t\t\tawait promise;\n\t\t});\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueAChanged');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy is removed', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({})));\n\t\t\tawait promise;\n\t\t});\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, []);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy setting is registered', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingC': 'policyValueC' })));\n\t\tawait testObject.initialize();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tpolicyConfigurationNode.properties!['policy.settingC'] = {\n\t\t\t'type': 'string',\n\t\t\t'default': 'defaultValueC',\n\t\t\tpolicy: {\n\t\t\t\tname: 'PolicySettingC',\n\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\tlocalization: { description: { key: '', value: '' }, },\n\t\t\t}\n\t\t};\n\t\tRegistry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration(deepClone(policyConfigurationNode));\n\t\tawait promise;\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingC'), 'policyValueC');\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingC']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy setting is deregistered', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tRegistry.as<IConfigurationRegistry>(Extensions.Configuration).deregisterConfigurations([policyConfigurationNode]);\n\t\tawait promise;\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, []);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('initialize: with internal policies', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyInternalSetting': 'internalValue' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.internalSetting'), 'internalValue');\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.internalSetting']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../base/common/event.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { DefaultConfiguration, PolicyConfiguration } from '../../common/configurations.js';\nimport { IFileService } from '../../../files/common/files.js';\nimport { FileService } from '../../../files/common/fileService.js';\nimport { InMemoryFileSystemProvider } from '../../../files/common/inMemoryFilesystemProvider.js';\nimport { NullLogService } from '../../../log/common/log.js';\nimport { Extensions, IConfigurationNode, IConfigurationRegistry } from '../../common/configurationRegistry.js';\nimport { Registry } from '../../../registry/common/platform.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { IPolicyService } from '../../../policy/common/policy.js';\nimport { FilePolicyService } from '../../../policy/common/filePolicyService.js';\nimport { runWithFakedTimers } from '../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { PolicyCategory } from '../../../../base/common/policy.js';\n\nsuite('PolicyConfiguration', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet testObject: PolicyConfiguration;\n\tlet fileService: IFileService;\n\tlet policyService: IPolicyService;\n\tconst policyFile = URI.file('policyFile').with({ scheme: 'vscode-tests' });\n\tconst policyConfigurationNode: IConfigurationNode = {\n\t\t'id': 'policyConfiguration',\n\t\t'order': 1,\n\t\t'title': 'a',\n\t\t'type': 'object',\n\t\t'properties': {\n\t\t\t'policy.settingA': {\n\t\t\t\t'type': 'string',\n\t\t\t\t'default': 'defaultValueA',\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicySettingA',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.settingB': {\n\t\t\t\t'type': 'string',\n\t\t\t\t'default': 'defaultValueB',\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicySettingB',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.objectSetting': {\n\t\t\t\t'type': 'object',\n\t\t\t\t'default': {},\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyObjectSetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.arraySetting': {\n\t\t\t\t'type': 'object',\n\t\t\t\t'default': [],\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyArraySetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.booleanSetting': {\n\t\t\t\t'type': 'boolean',\n\t\t\t\t'default': true,\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyBooleanSetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'policy.internalSetting': {\n\t\t\t\t'type': 'string',\n\t\t\t\t'default': 'defaultInternalValue',\n\t\t\t\tincluded: false,\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'PolicyInternalSetting',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\tlocalization: { description: { key: '', value: '' }, }\n\t\t\t\t}\n\t\t\t},\n\t\t\t'nonPolicy.setting': {\n\t\t\t\t'type': 'boolean',\n\t\t\t\t'default': true\n\t\t\t}\n\t\t}\n\t};\n\n\tsuiteSetup(() => Registry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration(policyConfigurationNode));\n\tsuiteTeardown(() => Registry.as<IConfigurationRegistry>(Extensions.Configuration).deregisterConfigurations([policyConfigurationNode]));\n\n\tsetup(async () => {\n\t\tconst defaultConfiguration = disposables.add(new DefaultConfiguration(new NullLogService()));\n\t\tawait defaultConfiguration.initialize();\n\t\tfileService = disposables.add(new FileService(new NullLogService()));\n\t\tconst diskFileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(policyFile.scheme, diskFileSystemProvider));\n\t\tpolicyService = disposables.add(new FilePolicyService(policyFile, fileService, new NullLogService()));\n\t\ttestObject = disposables.add(new PolicyConfiguration(defaultConfiguration, policyService, new NullLogService()));\n\t});\n\n\ttest('initialize: with policies', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueA');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('initialize: no policies', async () => {\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.keys, []);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t});\n\n\ttest('initialize: with policies but not registered', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA', 'PolicySettingB': 'policyValueB', 'PolicySettingC': 'policyValueC' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueA');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), 'policyValueB');\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA', 'policy.settingB']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('initialize: with object type policy', async () => {\n\t\tconst expected = {\n\t\t\t'microsoft': true,\n\t\t\t'github': 'stable',\n\t\t\t'other': 1,\n\t\t\t'complex': {\n\t\t\t\t'key': 'value'\n\t\t\t},\n\t\t\t'array': [1, 2, 3]\n\t\t};\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyObjectSetting': JSON.stringify(expected) })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.objectSetting'), expected);\n\t});\n\n\ttest('initialize: with array type policy', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyArraySetting': JSON.stringify([1]) })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.arraySetting'), [1]);\n\t});\n\n\ttest('initialize: with boolean type policy as false', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyBooleanSetting': false })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.booleanSetting'), false);\n\t});\n\n\ttest('initialize: with boolean type policy as true', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyBooleanSetting': true })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.booleanSetting'), true);\n\t});\n\n\ttest('initialize: with object type policy ignores policy if value is not valid', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyObjectSetting': '{\"a\": \"b\", \"hello\": }' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.objectSetting'), undefined);\n\t});\n\n\ttest('initialize: with object type policy ignores policy if there are duplicate keys', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyObjectSetting': '{\"microsoft\": true, \"microsoft\": false }' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.deepStrictEqual(acutal.getValue('policy.objectSetting'), undefined);\n\t});\n\n\ttest('change: when policy is added', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA', 'PolicySettingB': 'policyValueB', 'PolicySettingC': 'policyValueC' })));\n\t\t\tawait promise;\n\t\t});\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueA');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), 'policyValueB');\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA', 'policy.settingB']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy is updated', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueAChanged' })));\n\t\t\tawait promise;\n\t\t});\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), 'policyValueAChanged');\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingA']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy is removed', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({})));\n\t\t\tawait promise;\n\t\t});\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, []);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy setting is registered', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingC': 'policyValueC' })));\n\t\tawait testObject.initialize();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tpolicyConfigurationNode.properties!['policy.settingC'] = {\n\t\t\t'type': 'string',\n\t\t\t'default': 'defaultValueC',\n\t\t\tpolicy: {\n\t\t\t\tname: 'PolicySettingC',\n\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\tlocalization: { description: { key: '', value: '' }, },\n\t\t\t}\n\t\t};\n\t\tRegistry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration(deepClone(policyConfigurationNode));\n\t\tawait promise;\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingC'), 'policyValueC');\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.settingC']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('change: when policy setting is deregistered', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicySettingA': 'policyValueA' })));\n\t\tawait testObject.initialize();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tRegistry.as<IConfigurationRegistry>(Extensions.Configuration).deregisterConfigurations([policyConfigurationNode]);\n\t\tawait promise;\n\n\t\tconst acutal = testObject.configurationModel;\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, []);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n\ttest('initialize: with internal policies', async () => {\n\t\tawait fileService.writeFile(policyFile, VSBuffer.fromString(JSON.stringify({ 'PolicyInternalSetting': 'internalValue' })));\n\n\t\tawait testObject.initialize();\n\t\tconst acutal = testObject.configurationModel;\n\n\t\tassert.strictEqual(acutal.getValue('policy.settingA'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.settingB'), undefined);\n\t\tassert.strictEqual(acutal.getValue('policy.internalSetting'), 'internalValue');\n\t\tassert.strictEqual(acutal.getValue('nonPolicy.setting'), undefined);\n\t\tassert.deepStrictEqual(acutal.keys, ['policy.internalSetting']);\n\t\tassert.deepStrictEqual(acutal.overrides, []);\n\t});\n\n});\n"]}