{"version":3,"sources":["vs/platform/process/electron-main/processMainService.ts"],"names":[],"mappings":"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","file":"processMainService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { listProcesses } from '../../../base/node/ps.js';\nimport { localize } from '../../../nls.js';\nimport { IDiagnosticsService, IRemoteDiagnosticError, isRemoteDiagnosticError, PerformanceInfo, SystemInfo } from '../../diagnostics/common/diagnostics.js';\nimport { IDiagnosticsMainService } from '../../diagnostics/electron-main/diagnosticsMainService.js';\nimport { IProcessService, IResolvedProcessInformation } from '../common/process.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { UtilityProcess } from '../../utilityProcess/electron-main/utilityProcess.js';\nimport { ProcessItem } from '../../../base/common/processes.js';\n\nexport class ProcessMainService implements IProcessService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IDiagnosticsService private readonly diagnosticsService: IDiagnosticsService,\n\t\t@IDiagnosticsMainService private readonly diagnosticsMainService: IDiagnosticsMainService\n\t) {\n\t}\n\n\tasync resolveProcesses(): Promise<IResolvedProcessInformation> {\n\t\tconst mainProcessInfo = await this.diagnosticsMainService.getMainDiagnostics();\n\n\t\tconst pidToNames: [number, string][] = [];\n\t\tfor (const window of mainProcessInfo.windows) {\n\t\t\tpidToNames.push([window.pid, `window [${window.id}] (${window.title})`]);\n\t\t}\n\n\t\tfor (const { pid, name } of UtilityProcess.getAll()) {\n\t\t\tpidToNames.push([pid, name]);\n\t\t}\n\n\t\tconst processes: { name: string; rootProcess: ProcessItem | IRemoteDiagnosticError }[] = [];\n\t\ttry {\n\t\t\tprocesses.push({ name: localize('local', \"Local\"), rootProcess: await listProcesses(process.pid) });\n\n\t\t\tconst remoteDiagnostics = await this.diagnosticsMainService.getRemoteDiagnostics({ includeProcesses: true });\n\t\t\tremoteDiagnostics.forEach(data => {\n\t\t\t\tif (isRemoteDiagnosticError(data)) {\n\t\t\t\t\tprocesses.push({\n\t\t\t\t\t\tname: data.hostName,\n\t\t\t\t\t\trootProcess: data\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tif (data.processes) {\n\t\t\t\t\t\tprocesses.push({\n\t\t\t\t\t\t\tname: data.hostName,\n\t\t\t\t\t\t\trootProcess: data.processes\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tthis.logService.error(`Listing processes failed: ${e}`);\n\t\t}\n\n\t\treturn { pidToNames, processes };\n\t}\n\n\tasync getSystemStatus(): Promise<string> {\n\t\tconst [info, remoteData] = await Promise.all([this.diagnosticsMainService.getMainDiagnostics(), this.diagnosticsMainService.getRemoteDiagnostics({ includeProcesses: false, includeWorkspaceMetadata: false })]);\n\n\t\treturn this.diagnosticsService.getDiagnostics(info, remoteData);\n\t}\n\n\tasync getSystemInfo(): Promise<SystemInfo> {\n\t\tconst [info, remoteData] = await Promise.all([this.diagnosticsMainService.getMainDiagnostics(), this.diagnosticsMainService.getRemoteDiagnostics({ includeProcesses: false, includeWorkspaceMetadata: false })]);\n\t\tconst msg = await this.diagnosticsService.getSystemInfo(info, remoteData);\n\n\t\treturn msg;\n\t}\n\n\tasync getPerformanceInfo(): Promise<PerformanceInfo> {\n\t\ttry {\n\t\t\tconst [info, remoteData] = await Promise.all([this.diagnosticsMainService.getMainDiagnostics(), this.diagnosticsMainService.getRemoteDiagnostics({ includeProcesses: true, includeWorkspaceMetadata: true })]);\n\t\t\treturn await this.diagnosticsService.getPerformanceInfo(info, remoteData);\n\t\t} catch (error) {\n\t\t\tthis.logService.warn('issueService#getPerformanceInfo ', error.message);\n\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n"]}