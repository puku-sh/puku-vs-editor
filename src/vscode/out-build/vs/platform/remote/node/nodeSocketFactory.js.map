{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/remote/node/nodeSocketFactory.ts","vs/platform/remote/node/nodeSocketFactory.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,KAAK,GAAG,MAAM,KAAK,CAAC;AAE3B,OAAO,EAAE,UAAU,EAAE,MAAM,yCAAyC,CAAC;AACrE,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAIlE,MAAM,CAAC,MAAM,iBAAiB,GAAG,IAAI;IAEpC,QAAQ,CAAC,SAAoC;QAC5C,OAAO,IAAI,CAAC;IACb,CAAC;IAED,OAAO,CAAC,EAAE,IAAI,EAAE,IAAI,EAA6B,EAAE,IAAY,EAAE,KAAa,EAAE,UAAkB;QACjG,OAAO,IAAI,OAAO,CAAU,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YAC/C,MAAM,MAAM,GAAG,GAAG,CAAC,gBAAgB,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,GAAG,EAAE;gBACpE,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;gBAEvC,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,IAAI,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC;gBAE5D,MAAM,MAAM,GAAG,CAAC,IAAY,EAAE,EAAE;oBAC/B,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;oBAChC,IAAI,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;wBACtC,sBAAsB;wBACtB,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;wBAC3B,OAAO,CAAC,IAAI,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC,CAAC;oBAC7C,CAAC;gBACF,CAAC,CAAC;gBACF,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;YACH,6BAA6B;YAC7B,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACxB,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACJ,CAAC;CACD,CAAC","file":"nodeSocketFactory.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as net from 'net';\nimport { ISocket } from '../../../base/parts/ipc/common/ipc.net.js';\nimport { NodeSocket } from '../../../base/parts/ipc/node/ipc.net.js';\nimport { makeRawSocketHeaders } from '../common/managedSocket.js';\nimport { RemoteConnectionType, WebSocketRemoteConnection } from '../common/remoteAuthorityResolver.js';\nimport { ISocketFactory } from '../common/remoteSocketFactoryService.js';\n\nexport const nodeSocketFactory = new class implements ISocketFactory<RemoteConnectionType.WebSocket> {\n\n\tsupports(connectTo: WebSocketRemoteConnection): boolean {\n\t\treturn true;\n\t}\n\n\tconnect({ host, port }: WebSocketRemoteConnection, path: string, query: string, debugLabel: string): Promise<ISocket> {\n\t\treturn new Promise<ISocket>((resolve, reject) => {\n\t\t\tconst socket = net.createConnection({ host: host, port: port }, () => {\n\t\t\t\tsocket.removeListener('error', reject);\n\n\t\t\t\tsocket.write(makeRawSocketHeaders(path, query, debugLabel));\n\n\t\t\t\tconst onData = (data: Buffer) => {\n\t\t\t\t\tconst strData = data.toString();\n\t\t\t\t\tif (strData.indexOf('\\r\\n\\r\\n') >= 0) {\n\t\t\t\t\t\t// headers received OK\n\t\t\t\t\t\tsocket.off('data', onData);\n\t\t\t\t\t\tresolve(new NodeSocket(socket, debugLabel));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tsocket.on('data', onData);\n\t\t\t});\n\t\t\t// Disable Nagle's algorithm.\n\t\t\tsocket.setNoDelay(true);\n\t\t\tsocket.once('error', reject);\n\t\t});\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as net from 'net';\nimport { ISocket } from '../../../base/parts/ipc/common/ipc.net.js';\nimport { NodeSocket } from '../../../base/parts/ipc/node/ipc.net.js';\nimport { makeRawSocketHeaders } from '../common/managedSocket.js';\nimport { RemoteConnectionType, WebSocketRemoteConnection } from '../common/remoteAuthorityResolver.js';\nimport { ISocketFactory } from '../common/remoteSocketFactoryService.js';\n\nexport const nodeSocketFactory = new class implements ISocketFactory<RemoteConnectionType.WebSocket> {\n\n\tsupports(connectTo: WebSocketRemoteConnection): boolean {\n\t\treturn true;\n\t}\n\n\tconnect({ host, port }: WebSocketRemoteConnection, path: string, query: string, debugLabel: string): Promise<ISocket> {\n\t\treturn new Promise<ISocket>((resolve, reject) => {\n\t\t\tconst socket = net.createConnection({ host: host, port: port }, () => {\n\t\t\t\tsocket.removeListener('error', reject);\n\n\t\t\t\tsocket.write(makeRawSocketHeaders(path, query, debugLabel));\n\n\t\t\t\tconst onData = (data: Buffer) => {\n\t\t\t\t\tconst strData = data.toString();\n\t\t\t\t\tif (strData.indexOf('\\r\\n\\r\\n') >= 0) {\n\t\t\t\t\t\t// headers received OK\n\t\t\t\t\t\tsocket.off('data', onData);\n\t\t\t\t\t\tresolve(new NodeSocket(socket, debugLabel));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tsocket.on('data', onData);\n\t\t\t});\n\t\t\t// Disable Nagle's algorithm.\n\t\t\tsocket.setNoDelay(true);\n\t\t\tsocket.once('error', reject);\n\t\t});\n\t}\n};\n"]}