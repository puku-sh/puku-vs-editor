{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/remote/node/wsl.ts","vs/platform/remote/node/wsl.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,KAAK,EAAE,MAAM,IAAI,CAAC;AACzB,OAAO,KAAK,EAAE,MAAM,IAAI,CAAC;AACzB,OAAO,KAAK,EAAE,MAAM,eAAe,CAAC;AACpC,OAAO,EAAE,IAAI,EAAE,MAAM,8BAA8B,CAAC;AAEpD,IAAI,oBAAkD,CAAC;AAEvD,MAAM,CAAC,KAAK,UAAU,sBAAsB,CAAC,OAAO,GAAG,KAAK;IAC3D,IAAI,oBAAoB,KAAK,SAAS,IAAI,OAAO,EAAE,CAAC;QACnD,oBAAoB,GAAG,uBAAuB,EAAE,CAAC;IAClD,CAAC;IACD,OAAO,oBAAoB,CAAC;AAC7B,CAAC;AAED,KAAK,UAAU,uBAAuB;IACrC,MAAM,kBAAkB,GAAG,qBAAqB,EAAE,CAAC;IACnD,IAAI,kBAAkB,KAAK,SAAS,EAAE,CAAC;QACtC,OAAO,KAAK,CAAC;IACd,CAAC;IACD,IAAI,kBAAkB,IAAI,KAAK,EAAE,CAAC;QACjC,MAAM,UAAU,GAAG,oBAAoB,EAAE,CAAC;QAC1C,IAAI,UAAU,EAAE,CAAC;YAChB,OAAO,IAAI,OAAO,CAAU,CAAC,CAAC,EAAE;gBAC/B,IAAI,CAAC;oBACJ,EAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,UAAU,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACvD,CAAC;gBAAC,OAAO,CAAC,EAAE,CAAC;oBACZ,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC;QACJ,CAAC;IACF,CAAC;SAAM,CAAC;QACP,MAAM,OAAO,GAAG,qBAAqB,EAAE,CAAC;QACxC,IAAI,OAAO,EAAE,CAAC;YACb,IAAI,CAAC;gBACJ,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC;oBAChD,OAAO,IAAI,CAAC;gBACb,CAAC;YACF,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;YACb,CAAC;QACF,CAAC;IACF,CAAC;IACD,OAAO,KAAK,CAAC;AACd,CAAC;AAED,SAAS,qBAAqB;IAC7B,MAAM,SAAS,GAAG,CAAC,sBAAsB,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,CAAC,CAAC;IAC9D,IAAI,SAAS,EAAE,CAAC;QACf,OAAO,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IACD,OAAO,SAAS,CAAC;AAClB,CAAC;AAED,SAAS,eAAe,CAAC,OAAe;IACvC,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAC7C,IAAI,UAAU,EAAE,CAAC;QAChB,MAAM,sBAAsB,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC;QACpF,OAAO,IAAI,CAAC,UAAU,EAAE,sBAAsB,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;IACrF,CAAC;IACD,OAAO,SAAS,CAAC;AAClB,CAAC;AAED,SAAS,oBAAoB;IAC5B,OAAO,eAAe,CAAC,SAAS,CAAC,CAAC;AACnC,CAAC;AAED;;GAEG;AACH,SAAS,qBAAqB;IAC7B,OAAO,eAAe,CAAC,uBAAuB,CAAC,CAAC;AACjD,CAAC","file":"wsl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport * as cp from 'child_process';\nimport { join } from '../../../base/common/path.js';\n\nlet hasWSLFeaturePromise: Promise<boolean> | undefined;\n\nexport async function hasWSLFeatureInstalled(refresh = false): Promise<boolean> {\n\tif (hasWSLFeaturePromise === undefined || refresh) {\n\t\thasWSLFeaturePromise = testWSLFeatureInstalled();\n\t}\n\treturn hasWSLFeaturePromise;\n}\n\nasync function testWSLFeatureInstalled(): Promise<boolean> {\n\tconst windowsBuildNumber = getWindowsBuildNumber();\n\tif (windowsBuildNumber === undefined) {\n\t\treturn false;\n\t}\n\tif (windowsBuildNumber >= 22000) {\n\t\tconst wslExePath = getWSLExecutablePath();\n\t\tif (wslExePath) {\n\t\t\treturn new Promise<boolean>(s => {\n\t\t\t\ttry {\n\t\t\t\t\tcp.execFile(wslExePath, ['--status'], err => s(!err));\n\t\t\t\t} catch (e) {\n\t\t\t\t\ts(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t} else {\n\t\tconst dllPath = getLxssManagerDllPath();\n\t\tif (dllPath) {\n\t\t\ttry {\n\t\t\t\tif ((await fs.promises.stat(dllPath)).isFile()) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getWindowsBuildNumber(): number | undefined {\n\tconst osVersion = (/(\\d+)\\.(\\d+)\\.(\\d+)/g).exec(os.release());\n\tif (osVersion) {\n\t\treturn parseInt(osVersion[3]);\n\t}\n\treturn undefined;\n}\n\nfunction getSystem32Path(subPath: string): string | undefined {\n\tconst systemRoot = process.env['SystemRoot'];\n\tif (systemRoot) {\n\t\tconst is32ProcessOn64Windows = process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432');\n\t\treturn join(systemRoot, is32ProcessOn64Windows ? 'Sysnative' : 'System32', subPath);\n\t}\n\treturn undefined;\n}\n\nfunction getWSLExecutablePath(): string | undefined {\n\treturn getSystem32Path('wsl.exe');\n}\n\n/**\n * In builds < 22000 this dll inidcates that WSL is installed\n */\nfunction getLxssManagerDllPath(): string | undefined {\n\treturn getSystem32Path('lxss\\\\LxssManager.dll');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport * as cp from 'child_process';\nimport { join } from '../../../base/common/path.js';\n\nlet hasWSLFeaturePromise: Promise<boolean> | undefined;\n\nexport async function hasWSLFeatureInstalled(refresh = false): Promise<boolean> {\n\tif (hasWSLFeaturePromise === undefined || refresh) {\n\t\thasWSLFeaturePromise = testWSLFeatureInstalled();\n\t}\n\treturn hasWSLFeaturePromise;\n}\n\nasync function testWSLFeatureInstalled(): Promise<boolean> {\n\tconst windowsBuildNumber = getWindowsBuildNumber();\n\tif (windowsBuildNumber === undefined) {\n\t\treturn false;\n\t}\n\tif (windowsBuildNumber >= 22000) {\n\t\tconst wslExePath = getWSLExecutablePath();\n\t\tif (wslExePath) {\n\t\t\treturn new Promise<boolean>(s => {\n\t\t\t\ttry {\n\t\t\t\t\tcp.execFile(wslExePath, ['--status'], err => s(!err));\n\t\t\t\t} catch (e) {\n\t\t\t\t\ts(false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t} else {\n\t\tconst dllPath = getLxssManagerDllPath();\n\t\tif (dllPath) {\n\t\t\ttry {\n\t\t\t\tif ((await fs.promises.stat(dllPath)).isFile()) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getWindowsBuildNumber(): number | undefined {\n\tconst osVersion = (/(\\d+)\\.(\\d+)\\.(\\d+)/g).exec(os.release());\n\tif (osVersion) {\n\t\treturn parseInt(osVersion[3]);\n\t}\n\treturn undefined;\n}\n\nfunction getSystem32Path(subPath: string): string | undefined {\n\tconst systemRoot = process.env['SystemRoot'];\n\tif (systemRoot) {\n\t\tconst is32ProcessOn64Windows = process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432');\n\t\treturn join(systemRoot, is32ProcessOn64Windows ? 'Sysnative' : 'System32', subPath);\n\t}\n\treturn undefined;\n}\n\nfunction getWSLExecutablePath(): string | undefined {\n\treturn getSystem32Path('wsl.exe');\n}\n\n/**\n * In builds < 22000 this dll inidcates that WSL is installed\n */\nfunction getLxssManagerDllPath(): string | undefined {\n\treturn getSystem32Path('lxss\\\\LxssManager.dll');\n}\n"]}