{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/actions/test/common/menuService.test.ts","vs/platform/actions/test/common/menuService.test.ts"],"names":[],"mappings":"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","file":"menuService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../common/actions.js';\nimport { MenuService } from '../../common/menuService.js';\nimport { NullCommandService } from '../../../commands/test/common/nullCommandService.js';\nimport { MockContextKeyService, MockKeybindingService } from '../../../keybinding/test/common/mockKeybindingService.js';\nimport { InMemoryStorageService } from '../../../storage/common/storage.js';\n\n// --- service instances\n\nconst contextKeyService = new class extends MockContextKeyService {\n\toverride contextMatchesRules() {\n\t\treturn true;\n\t}\n};\n\n// --- tests\n\nsuite('MenuService', function () {\n\n\tlet menuService: MenuService;\n\tconst disposables = new DisposableStore();\n\tlet testMenuId: MenuId;\n\n\tsetup(function () {\n\t\tmenuService = new MenuService(NullCommandService, new MockKeybindingService(), new InMemoryStorageService());\n\t\ttestMenuId = new MenuId(`testo/${generateUuid()}`);\n\t\tdisposables.clear();\n\t});\n\n\tteardown(function () {\n\t\tdisposables.clear();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('group sorting', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'one', title: 'FOO' },\n\t\t\tgroup: '0_hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'two', title: 'FOO' },\n\t\t\tgroup: 'hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'three', title: 'FOO' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'four', title: 'FOO' },\n\t\t\tgroup: ''\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'five', title: 'FOO' },\n\t\t\tgroup: 'navigation'\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 5);\n\t\tconst [one, two, three, four, five] = groups;\n\n\t\tassert.strictEqual(one[0], 'navigation');\n\t\tassert.strictEqual(two[0], '0_hello');\n\t\tassert.strictEqual(three[0], 'hello');\n\t\tassert.strictEqual(four[0], 'Hello');\n\t\tassert.strictEqual(five[0], '');\n\t});\n\n\ttest('in group sorting, by title', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [, actions] = groups[0];\n\n\t\tassert.strictEqual(actions.length, 3);\n\t\tconst [one, two, three] = actions;\n\t\tassert.strictEqual(one.id, 'a');\n\t\tassert.strictEqual(two.id, 'b');\n\t\tassert.strictEqual(three.id, 'c');\n\t});\n\n\ttest('in group sorting, by title and order', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: 10\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: -1\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'd', title: 'yyy' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: -1\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [, actions] = groups[0];\n\n\t\tassert.strictEqual(actions.length, 4);\n\t\tconst [one, two, three, four] = actions;\n\t\tassert.strictEqual(one.id, 'd');\n\t\tassert.strictEqual(two.id, 'c');\n\t\tassert.strictEqual(three.id, 'b');\n\t\tassert.strictEqual(four.id, 'a');\n\t});\n\n\n\ttest('in group sorting, special: navigation', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.3\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.2\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.1\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [[, actions]] = groups;\n\n\t\tassert.strictEqual(actions.length, 3);\n\t\tconst [one, two, three] = actions;\n\t\tassert.strictEqual(one.id, 'c');\n\t\tassert.strictEqual(two.id, 'b');\n\t\tassert.strictEqual(three.id, 'a');\n\t});\n\n\ttest('special MenuId palette', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\t\t\tcommand: { id: 'a', title: 'Explicit' }\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.addCommand({ id: 'b', title: 'Implicit' }));\n\n\t\tlet foundA = false;\n\t\tlet foundB = false;\n\t\tfor (const item of MenuRegistry.getMenuItems(MenuId.CommandPalette)) {\n\t\t\tif (isIMenuItem(item)) {\n\t\t\t\tif (item.command.id === 'a') {\n\t\t\t\t\tassert.strictEqual(item.command.title, 'Explicit');\n\t\t\t\t\tfoundA = true;\n\t\t\t\t}\n\t\t\t\tif (item.command.id === 'b') {\n\t\t\t\t\tassert.strictEqual(item.command.title, 'Implicit');\n\t\t\t\t\tfoundB = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tassert.strictEqual(foundA, true);\n\t\tassert.strictEqual(foundB, true);\n\t});\n\n\ttest('Extension contributed submenus missing with errors in output #155030', function () {\n\n\t\tconst id = generateUuid();\n\t\tconst menu = new MenuId(id);\n\n\t\tassert.throws(() => new MenuId(id));\n\t\tassert.ok(menu === MenuId.for(id));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { isIMenuItem, MenuId, MenuRegistry } from '../../common/actions.js';\nimport { MenuService } from '../../common/menuService.js';\nimport { NullCommandService } from '../../../commands/test/common/nullCommandService.js';\nimport { MockContextKeyService, MockKeybindingService } from '../../../keybinding/test/common/mockKeybindingService.js';\nimport { InMemoryStorageService } from '../../../storage/common/storage.js';\n\n// --- service instances\n\nconst contextKeyService = new class extends MockContextKeyService {\n\toverride contextMatchesRules() {\n\t\treturn true;\n\t}\n};\n\n// --- tests\n\nsuite('MenuService', function () {\n\n\tlet menuService: MenuService;\n\tconst disposables = new DisposableStore();\n\tlet testMenuId: MenuId;\n\n\tsetup(function () {\n\t\tmenuService = new MenuService(NullCommandService, new MockKeybindingService(), new InMemoryStorageService());\n\t\ttestMenuId = new MenuId(`testo/${generateUuid()}`);\n\t\tdisposables.clear();\n\t});\n\n\tteardown(function () {\n\t\tdisposables.clear();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('group sorting', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'one', title: 'FOO' },\n\t\t\tgroup: '0_hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'two', title: 'FOO' },\n\t\t\tgroup: 'hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'three', title: 'FOO' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'four', title: 'FOO' },\n\t\t\tgroup: ''\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'five', title: 'FOO' },\n\t\t\tgroup: 'navigation'\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 5);\n\t\tconst [one, two, three, four, five] = groups;\n\n\t\tassert.strictEqual(one[0], 'navigation');\n\t\tassert.strictEqual(two[0], '0_hello');\n\t\tassert.strictEqual(three[0], 'hello');\n\t\tassert.strictEqual(four[0], 'Hello');\n\t\tassert.strictEqual(five[0], '');\n\t});\n\n\ttest('in group sorting, by title', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [, actions] = groups[0];\n\n\t\tassert.strictEqual(actions.length, 3);\n\t\tconst [one, two, three] = actions;\n\t\tassert.strictEqual(one.id, 'a');\n\t\tassert.strictEqual(two.id, 'b');\n\t\tassert.strictEqual(three.id, 'c');\n\t});\n\n\ttest('in group sorting, by title and order', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: 10\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'Hello'\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: -1\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'd', title: 'yyy' },\n\t\t\tgroup: 'Hello',\n\t\t\torder: -1\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [, actions] = groups[0];\n\n\t\tassert.strictEqual(actions.length, 4);\n\t\tconst [one, two, three, four] = actions;\n\t\tassert.strictEqual(one.id, 'd');\n\t\tassert.strictEqual(two.id, 'c');\n\t\tassert.strictEqual(three.id, 'b');\n\t\tassert.strictEqual(four.id, 'a');\n\t});\n\n\n\ttest('in group sorting, special: navigation', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'a', title: 'aaa' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.3\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'b', title: 'fff' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.2\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(testMenuId, {\n\t\t\tcommand: { id: 'c', title: 'zzz' },\n\t\t\tgroup: 'navigation',\n\t\t\torder: 1.1\n\t\t}));\n\n\t\tconst groups = disposables.add(menuService.createMenu(testMenuId, contextKeyService)).getActions();\n\n\t\tassert.strictEqual(groups.length, 1);\n\t\tconst [[, actions]] = groups;\n\n\t\tassert.strictEqual(actions.length, 3);\n\t\tconst [one, two, three] = actions;\n\t\tassert.strictEqual(one.id, 'c');\n\t\tassert.strictEqual(two.id, 'b');\n\t\tassert.strictEqual(three.id, 'a');\n\t});\n\n\ttest('special MenuId palette', function () {\n\n\t\tdisposables.add(MenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\t\t\tcommand: { id: 'a', title: 'Explicit' }\n\t\t}));\n\n\t\tdisposables.add(MenuRegistry.addCommand({ id: 'b', title: 'Implicit' }));\n\n\t\tlet foundA = false;\n\t\tlet foundB = false;\n\t\tfor (const item of MenuRegistry.getMenuItems(MenuId.CommandPalette)) {\n\t\t\tif (isIMenuItem(item)) {\n\t\t\t\tif (item.command.id === 'a') {\n\t\t\t\t\tassert.strictEqual(item.command.title, 'Explicit');\n\t\t\t\t\tfoundA = true;\n\t\t\t\t}\n\t\t\t\tif (item.command.id === 'b') {\n\t\t\t\t\tassert.strictEqual(item.command.title, 'Implicit');\n\t\t\t\t\tfoundB = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tassert.strictEqual(foundA, true);\n\t\tassert.strictEqual(foundB, true);\n\t});\n\n\ttest('Extension contributed submenus missing with errors in output #155030', function () {\n\n\t\tconst id = generateUuid();\n\t\tconst menu = new MenuId(id);\n\n\t\tassert.throws(() => new MenuId(id));\n\t\tassert.ok(menu === MenuId.for(id));\n\t});\n});\n"]}