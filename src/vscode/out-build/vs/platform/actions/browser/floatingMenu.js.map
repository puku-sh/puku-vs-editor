{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/actions/browser/floatingMenu.ts","vs/platform/actions/browser/floatingMenu.ts"],"names":[],"mappings":"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","file":"floatingMenu.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, append, clearNode } from '../../../base/browser/dom.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { IAction } from '../../../base/common/actions.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { getFlatActionBarActions } from './menuEntryActionViewItem.js';\nimport { IMenu, IMenuService, MenuId } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { asCssVariable, asCssVariableWithDefault, buttonBackground, buttonForeground, contrastBorder, editorBackground, editorForeground } from '../../theme/common/colorRegistry.js';\n\nexport class FloatingClickWidget extends Widget {\n\n\tprivate readonly _onClick = this._register(new Emitter<void>());\n\treadonly onClick = this._onClick.event;\n\n\tprivate _domNode: HTMLElement;\n\n\tconstructor(private label: string) {\n\t\tsuper();\n\n\t\tthis._domNode = $('.floating-click-widget');\n\t\tthis._domNode.style.padding = '6px 11px';\n\t\tthis._domNode.style.borderRadius = '2px';\n\t\tthis._domNode.style.cursor = 'pointer';\n\t\tthis._domNode.style.zIndex = '1';\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\trender() {\n\t\tclearNode(this._domNode);\n\t\tthis._domNode.style.backgroundColor = asCssVariableWithDefault(buttonBackground, asCssVariable(editorBackground));\n\t\tthis._domNode.style.color = asCssVariableWithDefault(buttonForeground, asCssVariable(editorForeground));\n\t\tthis._domNode.style.border = `1px solid ${asCssVariable(contrastBorder)}`;\n\n\t\tappend(this._domNode, $('')).textContent = this.label;\n\n\t\tthis.onclick(this._domNode, () => this._onClick.fire());\n\t}\n}\n\nexport abstract class AbstractFloatingClickMenu extends Disposable {\n\tprivate readonly renderEmitter = new Emitter<FloatingClickWidget>();\n\tprotected get onDidRender() { return this.renderEmitter.event; }\n\tprivate readonly menu: IMenu;\n\n\tconstructor(\n\t\tmenuId: MenuId,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t\tthis.menu = this._register(menuService.createMenu(menuId, contextKeyService));\n\t}\n\n\t/** Should be called in implementation constructors after they initialized */\n\tprotected render() {\n\t\tconst menuDisposables = this._register(new DisposableStore());\n\t\tconst renderMenuAsFloatingClickBtn = () => {\n\t\t\tmenuDisposables.clear();\n\t\t\tif (!this.isVisible()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst actions = getFlatActionBarActions(this.menu.getActions({ renderShortTitle: true, shouldForwardArgs: true }));\n\t\t\tif (actions.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// todo@jrieken find a way to handle N actions, like showing a context menu\n\t\t\tconst [first] = actions;\n\t\t\tconst widget = this.createWidget(first, menuDisposables);\n\t\t\tmenuDisposables.add(widget);\n\t\t\tmenuDisposables.add(widget.onClick(() => first.run(this.getActionArg())));\n\t\t\twidget.render();\n\t\t};\n\t\tthis._register(this.menu.onDidChange(renderMenuAsFloatingClickBtn));\n\t\trenderMenuAsFloatingClickBtn();\n\t}\n\n\tprotected abstract createWidget(action: IAction, disposables: DisposableStore): FloatingClickWidget;\n\n\tprotected getActionArg(): unknown {\n\t\treturn undefined;\n\t}\n\n\tprotected isVisible() {\n\t\treturn true;\n\t}\n}\n\nexport class FloatingClickMenu extends AbstractFloatingClickMenu {\n\n\tconstructor(\n\t\tprivate readonly options: {\n\t\t\t/** Element the menu should be rendered into. */\n\t\t\tcontainer: HTMLElement;\n\t\t\t/** Menu to show. If no actions are present, the button is hidden. */\n\t\t\tmenuId: MenuId;\n\t\t\t/** Argument provided to the menu action */\n\t\t\tgetActionArg: () => void;\n\t\t},\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper(options.menuId, menuService, contextKeyService);\n\t\tthis.render();\n\t}\n\n\tprotected override createWidget(action: IAction, disposable: DisposableStore): FloatingClickWidget {\n\t\tconst w = this.instantiationService.createInstance(FloatingClickWidget, action.label);\n\t\tconst node = w.getDomNode();\n\t\tthis.options.container.appendChild(node);\n\t\tdisposable.add(toDisposable(() => node.remove()));\n\t\treturn w;\n\t}\n\n\tprotected override getActionArg(): unknown {\n\t\treturn this.options.getActionArg();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, append, clearNode } from '../../../base/browser/dom.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { IAction } from '../../../base/common/actions.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { getFlatActionBarActions } from './menuEntryActionViewItem.js';\nimport { IMenu, IMenuService, MenuId } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { asCssVariable, asCssVariableWithDefault, buttonBackground, buttonForeground, contrastBorder, editorBackground, editorForeground } from '../../theme/common/colorRegistry.js';\n\nexport class FloatingClickWidget extends Widget {\n\n\tprivate readonly _onClick = this._register(new Emitter<void>());\n\treadonly onClick = this._onClick.event;\n\n\tprivate _domNode: HTMLElement;\n\n\tconstructor(private label: string) {\n\t\tsuper();\n\n\t\tthis._domNode = $('.floating-click-widget');\n\t\tthis._domNode.style.padding = '6px 11px';\n\t\tthis._domNode.style.borderRadius = '2px';\n\t\tthis._domNode.style.cursor = 'pointer';\n\t\tthis._domNode.style.zIndex = '1';\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\trender() {\n\t\tclearNode(this._domNode);\n\t\tthis._domNode.style.backgroundColor = asCssVariableWithDefault(buttonBackground, asCssVariable(editorBackground));\n\t\tthis._domNode.style.color = asCssVariableWithDefault(buttonForeground, asCssVariable(editorForeground));\n\t\tthis._domNode.style.border = `1px solid ${asCssVariable(contrastBorder)}`;\n\n\t\tappend(this._domNode, $('')).textContent = this.label;\n\n\t\tthis.onclick(this._domNode, () => this._onClick.fire());\n\t}\n}\n\nexport abstract class AbstractFloatingClickMenu extends Disposable {\n\tprivate readonly renderEmitter = new Emitter<FloatingClickWidget>();\n\tprotected get onDidRender() { return this.renderEmitter.event; }\n\tprivate readonly menu: IMenu;\n\n\tconstructor(\n\t\tmenuId: MenuId,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t\tthis.menu = this._register(menuService.createMenu(menuId, contextKeyService));\n\t}\n\n\t/** Should be called in implementation constructors after they initialized */\n\tprotected render() {\n\t\tconst menuDisposables = this._register(new DisposableStore());\n\t\tconst renderMenuAsFloatingClickBtn = () => {\n\t\t\tmenuDisposables.clear();\n\t\t\tif (!this.isVisible()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst actions = getFlatActionBarActions(this.menu.getActions({ renderShortTitle: true, shouldForwardArgs: true }));\n\t\t\tif (actions.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// todo@jrieken find a way to handle N actions, like showing a context menu\n\t\t\tconst [first] = actions;\n\t\t\tconst widget = this.createWidget(first, menuDisposables);\n\t\t\tmenuDisposables.add(widget);\n\t\t\tmenuDisposables.add(widget.onClick(() => first.run(this.getActionArg())));\n\t\t\twidget.render();\n\t\t};\n\t\tthis._register(this.menu.onDidChange(renderMenuAsFloatingClickBtn));\n\t\trenderMenuAsFloatingClickBtn();\n\t}\n\n\tprotected abstract createWidget(action: IAction, disposables: DisposableStore): FloatingClickWidget;\n\n\tprotected getActionArg(): unknown {\n\t\treturn undefined;\n\t}\n\n\tprotected isVisible() {\n\t\treturn true;\n\t}\n}\n\nexport class FloatingClickMenu extends AbstractFloatingClickMenu {\n\n\tconstructor(\n\t\tprivate readonly options: {\n\t\t\t/** Element the menu should be rendered into. */\n\t\t\tcontainer: HTMLElement;\n\t\t\t/** Menu to show. If no actions are present, the button is hidden. */\n\t\t\tmenuId: MenuId;\n\t\t\t/** Argument provided to the menu action */\n\t\t\tgetActionArg: () => void;\n\t\t},\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper(options.menuId, menuService, contextKeyService);\n\t\tthis.render();\n\t}\n\n\tprotected override createWidget(action: IAction, disposable: DisposableStore): FloatingClickWidget {\n\t\tconst w = this.instantiationService.createInstance(FloatingClickWidget, action.label);\n\t\tconst node = w.getDomNode();\n\t\tthis.options.container.appendChild(node);\n\t\tdisposable.add(toDisposable(() => node.remove()));\n\t\treturn w;\n\t}\n\n\tprotected override getActionArg(): unknown {\n\t\treturn this.options.getActionArg();\n\t}\n}\n"]}