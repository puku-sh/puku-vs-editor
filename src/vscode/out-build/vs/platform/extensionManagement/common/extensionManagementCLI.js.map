{"version":3,"sources":["vs/platform/extensionManagement/common/extensionManagementCLI.ts"],"names":[],"mappings":"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","file":"extensionManagementCLI.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { getErrorMessage, isCancellationError } from '../../../base/common/errors.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { gt } from '../../../base/common/semver/semver.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { EXTENSION_IDENTIFIER_REGEX, IExtensionGalleryService, IExtensionInfo, IExtensionManagementService, IGalleryExtension, ILocalExtension, InstallOptions, InstallExtensionInfo, InstallOperation } from './extensionManagement.js';\nimport { areSameExtensions, getExtensionId, getGalleryExtensionId, getIdAndVersion } from './extensionManagementUtil.js';\nimport { ExtensionType, EXTENSION_CATEGORIES, IExtensionManifest } from '../../extensions/common/extensions.js';\nimport { ILogger } from '../../log/common/log.js';\n\n\nconst notFound = (id: string) => localize('notFound', \"Extension '{0}' not found.\", id);\nconst useId = localize('useId', \"Make sure you use the full extension ID, including the publisher, e.g.: {0}\", 'ms-dotnettools.csharp');\n\ntype InstallVSIXInfo = { vsix: URI; installOptions: InstallOptions };\ntype InstallGalleryExtensionInfo = { id: string; version?: string; installOptions: InstallOptions };\n\nexport class ExtensionManagementCLI {\n\n\tconstructor(\n\t\tprotected readonly logger: ILogger,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IExtensionGalleryService private readonly extensionGalleryService: IExtensionGalleryService,\n\t) { }\n\n\tprotected get location(): string | undefined {\n\t\treturn undefined;\n\t}\n\n\tpublic async listExtensions(showVersions: boolean, category?: string, profileLocation?: URI): Promise<void> {\n\t\tlet extensions = await this.extensionManagementService.getInstalled(ExtensionType.User, profileLocation);\n\t\tconst categories = EXTENSION_CATEGORIES.map(c => c.toLowerCase());\n\t\tif (category && category !== '') {\n\t\t\tif (categories.indexOf(category.toLowerCase()) < 0) {\n\t\t\t\tthis.logger.info('Invalid category please enter a valid category. To list valid categories run --category without a category specified');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\textensions = extensions.filter(e => {\n\t\t\t\tif (e.manifest.categories) {\n\t\t\t\t\tconst lowerCaseCategories: string[] = e.manifest.categories.map(c => c.toLowerCase());\n\t\t\t\t\treturn lowerCaseCategories.indexOf(category.toLowerCase()) > -1;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t} else if (category === '') {\n\t\t\tthis.logger.info('Possible Categories: ');\n\t\t\tcategories.forEach(category => {\n\t\t\t\tthis.logger.info(category);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tif (this.location) {\n\t\t\tthis.logger.info(localize('listFromLocation', \"Extensions installed on {0}:\", this.location));\n\t\t}\n\n\t\textensions = extensions.sort((e1, e2) => e1.identifier.id.localeCompare(e2.identifier.id));\n\t\tlet lastId: string | undefined = undefined;\n\t\tfor (const extension of extensions) {\n\t\t\tif (lastId !== extension.identifier.id) {\n\t\t\t\tlastId = extension.identifier.id;\n\t\t\t\tthis.logger.info(showVersions ? `${lastId}@${extension.manifest.version}` : lastId);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async installExtensions(extensions: (string | URI)[], builtinExtensions: (string | URI)[], installOptions: InstallOptions, force: boolean): Promise<void> {\n\t\tconst failed: string[] = [];\n\n\t\ttry {\n\t\t\tif (extensions.length) {\n\t\t\t\tthis.logger.info(this.location ? localize('installingExtensionsOnLocation', \"Installing extensions on {0}...\", this.location) : localize('installingExtensions', \"Installing extensions...\"));\n\t\t\t}\n\n\t\t\tconst installVSIXInfos: InstallVSIXInfo[] = [];\n\t\t\tconst installExtensionInfos: InstallGalleryExtensionInfo[] = [];\n\t\t\tconst addInstallExtensionInfo = (id: string, version: string | undefined, isBuiltin: boolean) => {\n\t\t\t\tinstallExtensionInfos.push({ id, version: version !== 'prerelease' ? version : undefined, installOptions: { ...installOptions, isBuiltin, installPreReleaseVersion: version === 'prerelease' || installOptions.installPreReleaseVersion } });\n\t\t\t};\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tif (extension instanceof URI) {\n\t\t\t\t\tinstallVSIXInfos.push({ vsix: extension, installOptions });\n\t\t\t\t} else {\n\t\t\t\t\tconst [id, version] = getIdAndVersion(extension);\n\t\t\t\t\taddInstallExtensionInfo(id, version, false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const extension of builtinExtensions) {\n\t\t\t\tif (extension instanceof URI) {\n\t\t\t\t\tinstallVSIXInfos.push({ vsix: extension, installOptions: { ...installOptions, isBuiltin: true, donotIncludePackAndDependencies: true } });\n\t\t\t\t} else {\n\t\t\t\t\tconst [id, version] = getIdAndVersion(extension);\n\t\t\t\t\taddInstallExtensionInfo(id, version, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst installed = await this.extensionManagementService.getInstalled(undefined, installOptions.profileLocation);\n\n\t\t\tif (installVSIXInfos.length) {\n\t\t\t\tawait Promise.all(installVSIXInfos.map(async ({ vsix, installOptions }) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.installVSIX(vsix, installOptions, force, installed);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tthis.logger.error(err);\n\t\t\t\t\t\tfailed.push(vsix.toString());\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tif (installExtensionInfos.length) {\n\t\t\t\tconst failedGalleryExtensions = await this.installGalleryExtensions(installExtensionInfos, installed, force);\n\t\t\t\tfailed.push(...failedGalleryExtensions);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logger.error(localize('error while installing extensions', \"Error while installing extensions: {0}\", getErrorMessage(error)));\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (failed.length) {\n\t\t\tthrow new Error(localize('installation failed', \"Failed Installing Extensions: {0}\", failed.join(', ')));\n\t\t}\n\t}\n\n\tpublic async updateExtensions(profileLocation?: URI): Promise<void> {\n\t\tconst installedExtensions = await this.extensionManagementService.getInstalled(ExtensionType.User, profileLocation);\n\n\t\tconst installedExtensionsQuery: IExtensionInfo[] = [];\n\t\tfor (const extension of installedExtensions) {\n\t\t\tif (!!extension.identifier.uuid) { // No need to check new version for an unpublished extension\n\t\t\t\tinstalledExtensionsQuery.push({ ...extension.identifier, preRelease: extension.preRelease });\n\t\t\t}\n\t\t}\n\n\t\tthis.logger.trace(localize({ key: 'updateExtensionsQuery', comment: ['Placeholder is for the count of extensions'] }, \"Fetching latest versions for {0} extensions\", installedExtensionsQuery.length));\n\t\tconst availableVersions = await this.extensionGalleryService.getExtensions(installedExtensionsQuery, { compatible: true }, CancellationToken.None);\n\n\t\tconst extensionsToUpdate: InstallExtensionInfo[] = [];\n\t\tfor (const newVersion of availableVersions) {\n\t\t\tfor (const oldVersion of installedExtensions) {\n\t\t\t\tif (areSameExtensions(oldVersion.identifier, newVersion.identifier) && gt(newVersion.version, oldVersion.manifest.version)) {\n\t\t\t\t\textensionsToUpdate.push({\n\t\t\t\t\t\textension: newVersion,\n\t\t\t\t\t\toptions: { operation: InstallOperation.Update, installPreReleaseVersion: oldVersion.preRelease, profileLocation, isApplicationScoped: oldVersion.isApplicationScoped }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!extensionsToUpdate.length) {\n\t\t\tthis.logger.info(localize('updateExtensionsNoExtensions', \"No extension to update\"));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logger.info(localize('updateExtensionsNewVersionsAvailable', \"Updating extensions: {0}\", extensionsToUpdate.map(ext => ext.extension.identifier.id).join(', ')));\n\t\tconst installationResult = await this.extensionManagementService.installGalleryExtensions(extensionsToUpdate);\n\n\t\tfor (const extensionResult of installationResult) {\n\t\t\tif (extensionResult.error) {\n\t\t\t\tthis.logger.error(localize('errorUpdatingExtension', \"Error while updating extension {0}: {1}\", extensionResult.identifier.id, getErrorMessage(extensionResult.error)));\n\t\t\t} else {\n\t\t\t\tthis.logger.info(localize('successUpdate', \"Extension '{0}' v{1} was successfully updated.\", extensionResult.identifier.id, extensionResult.local?.manifest.version));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async installGalleryExtensions(installExtensionInfos: InstallGalleryExtensionInfo[], installed: ILocalExtension[], force: boolean): Promise<string[]> {\n\t\tinstallExtensionInfos = installExtensionInfos.filter(installExtensionInfo => {\n\t\t\tconst { id, version, installOptions } = installExtensionInfo;\n\t\t\tconst installedExtension = installed.find(i => areSameExtensions(i.identifier, { id }));\n\t\t\tif (installedExtension) {\n\t\t\t\tif (!force && (!version || (version === 'prerelease' && installedExtension.preRelease))) {\n\t\t\t\t\tthis.logger.info(localize('alreadyInstalled-checkAndUpdate', \"Extension '{0}' v{1} is already installed. Use '--force' option to update to latest version or provide '@<version>' to install a specific version, for example: '{2}@1.2.3'.\", id, installedExtension.manifest.version, id));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (version && installedExtension.manifest.version === version) {\n\t\t\t\t\tthis.logger.info(localize('alreadyInstalled', \"Extension '{0}' is already installed.\", `${id}@${version}`));\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (installedExtension.preRelease && version !== 'prerelease') {\n\t\t\t\t\tinstallOptions.preRelease = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\tif (!installExtensionInfos.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst failed: string[] = [];\n\t\tconst extensionsToInstall: InstallExtensionInfo[] = [];\n\t\tconst galleryExtensions = await this.getGalleryExtensions(installExtensionInfos);\n\t\tawait Promise.all(installExtensionInfos.map(async ({ id, version, installOptions }) => {\n\t\t\tconst gallery = galleryExtensions.get(id.toLowerCase());\n\t\t\tif (!gallery) {\n\t\t\t\tthis.logger.error(`${notFound(version ? `${id}@${version}` : id)}\\n${useId}`);\n\t\t\t\tfailed.push(id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst manifest = await this.extensionGalleryService.getManifest(gallery, CancellationToken.None);\n\t\t\t\tif (manifest && !this.validateExtensionKind(manifest)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tthis.logger.error(err.message || err.stack || err);\n\t\t\t\tfailed.push(id);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst installedExtension = installed.find(e => areSameExtensions(e.identifier, gallery.identifier));\n\t\t\tif (installedExtension) {\n\t\t\t\tif (gallery.version === installedExtension.manifest.version) {\n\t\t\t\t\tthis.logger.info(localize('alreadyInstalled', \"Extension '{0}' is already installed.\", version ? `${id}@${version}` : id));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.logger.info(localize('updateMessage', \"Updating the extension '{0}' to the version {1}\", id, gallery.version));\n\t\t\t}\n\t\t\tif (installOptions.isBuiltin) {\n\t\t\t\tthis.logger.info(version ? localize('installing builtin with version', \"Installing builtin extension '{0}' v{1}...\", id, version) : localize('installing builtin ', \"Installing builtin extension '{0}'...\", id));\n\t\t\t} else {\n\t\t\t\tthis.logger.info(version ? localize('installing with version', \"Installing extension '{0}' v{1}...\", id, version) : localize('installing', \"Installing extension '{0}'...\", id));\n\t\t\t}\n\t\t\textensionsToInstall.push({\n\t\t\t\textension: gallery,\n\t\t\t\toptions: { ...installOptions, installGivenVersion: !!version, isApplicationScoped: installOptions.isApplicationScoped || installedExtension?.isApplicationScoped },\n\t\t\t});\n\t\t}));\n\n\t\tif (extensionsToInstall.length) {\n\t\t\tconst installationResult = await this.extensionManagementService.installGalleryExtensions(extensionsToInstall);\n\t\t\tfor (const extensionResult of installationResult) {\n\t\t\t\tif (extensionResult.error) {\n\t\t\t\t\tthis.logger.error(localize('errorInstallingExtension', \"Error while installing extension {0}: {1}\", extensionResult.identifier.id, getErrorMessage(extensionResult.error)));\n\t\t\t\t\tfailed.push(extensionResult.identifier.id);\n\t\t\t\t} else {\n\t\t\t\t\tthis.logger.info(localize('successInstall', \"Extension '{0}' v{1} was successfully installed.\", extensionResult.identifier.id, extensionResult.local?.manifest.version));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn failed;\n\t}\n\n\tprivate async installVSIX(vsix: URI, installOptions: InstallOptions, force: boolean, installedExtensions: ILocalExtension[]): Promise<void> {\n\n\t\tconst manifest = await this.extensionManagementService.getManifest(vsix);\n\t\tif (!manifest) {\n\t\t\tthrow new Error('Invalid vsix');\n\t\t}\n\n\t\tconst valid = await this.validateVSIX(manifest, force, installOptions.profileLocation, installedExtensions);\n\t\tif (valid) {\n\t\t\ttry {\n\t\t\t\tawait this.extensionManagementService.install(vsix, { ...installOptions, installGivenVersion: true });\n\t\t\t\tthis.logger.info(localize('successVsixInstall', \"Extension '{0}' was successfully installed.\", basename(vsix)));\n\t\t\t} catch (error) {\n\t\t\t\tif (isCancellationError(error)) {\n\t\t\t\t\tthis.logger.info(localize('cancelVsixInstall', \"Cancelled installing extension '{0}'.\", basename(vsix)));\n\t\t\t\t} else {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async getGalleryExtensions(extensions: InstallGalleryExtensionInfo[]): Promise<Map<string, IGalleryExtension>> {\n\t\tconst galleryExtensions = new Map<string, IGalleryExtension>();\n\t\tconst preRelease = extensions.some(e => e.installOptions.installPreReleaseVersion);\n\t\tconst targetPlatform = await this.extensionManagementService.getTargetPlatform();\n\t\tconst extensionInfos: IExtensionInfo[] = [];\n\t\tfor (const extension of extensions) {\n\t\t\tif (EXTENSION_IDENTIFIER_REGEX.test(extension.id)) {\n\t\t\t\textensionInfos.push({ ...extension, preRelease });\n\t\t\t}\n\t\t}\n\t\tif (extensionInfos.length) {\n\t\t\tconst result = await this.extensionGalleryService.getExtensions(extensionInfos, { targetPlatform }, CancellationToken.None);\n\t\t\tfor (const extension of result) {\n\t\t\t\tgalleryExtensions.set(extension.identifier.id.toLowerCase(), extension);\n\t\t\t}\n\t\t}\n\t\treturn galleryExtensions;\n\t}\n\n\tprotected validateExtensionKind(_manifest: IExtensionManifest): boolean {\n\t\treturn true;\n\t}\n\n\tprivate async validateVSIX(manifest: IExtensionManifest, force: boolean, profileLocation: URI | undefined, installedExtensions: ILocalExtension[]): Promise<boolean> {\n\t\tif (!force) {\n\t\t\tconst extensionIdentifier = { id: getGalleryExtensionId(manifest.publisher, manifest.name) };\n\t\t\tconst newer = installedExtensions.find(local => areSameExtensions(extensionIdentifier, local.identifier) && gt(local.manifest.version, manifest.version));\n\t\t\tif (newer) {\n\t\t\t\tthis.logger.info(localize('forceDowngrade', \"A newer version of extension '{0}' v{1} is already installed. Use '--force' option to downgrade to older version.\", newer.identifier.id, newer.manifest.version, manifest.version));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn this.validateExtensionKind(manifest);\n\t}\n\n\tpublic async uninstallExtensions(extensions: (string | URI)[], force: boolean, profileLocation?: URI): Promise<void> {\n\t\tconst getId = async (extensionDescription: string | URI): Promise<string> => {\n\t\t\tif (extensionDescription instanceof URI) {\n\t\t\t\tconst manifest = await this.extensionManagementService.getManifest(extensionDescription);\n\t\t\t\treturn getExtensionId(manifest.publisher, manifest.name);\n\t\t\t}\n\t\t\treturn extensionDescription;\n\t\t};\n\n\t\tconst uninstalledExtensions: ILocalExtension[] = [];\n\t\tfor (const extension of extensions) {\n\t\t\tconst id = await getId(extension);\n\t\t\tconst installed = await this.extensionManagementService.getInstalled(undefined, profileLocation);\n\t\t\tconst extensionsToUninstall = installed.filter(e => areSameExtensions(e.identifier, { id }));\n\t\t\tif (!extensionsToUninstall.length) {\n\t\t\t\tthrow new Error(`${this.notInstalled(id)}\\n${useId}`);\n\t\t\t}\n\t\t\tif (extensionsToUninstall.some(e => e.type === ExtensionType.System)) {\n\t\t\t\tthis.logger.info(localize('builtin', \"Extension '{0}' is a Built-in extension and cannot be uninstalled\", id));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!force && extensionsToUninstall.some(e => e.isBuiltin)) {\n\t\t\t\tthis.logger.info(localize('forceUninstall', \"Extension '{0}' is marked as a Built-in extension by user. Please use '--force' option to uninstall it.\", id));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.logger.info(localize('uninstalling', \"Uninstalling {0}...\", id));\n\t\t\tfor (const extensionToUninstall of extensionsToUninstall) {\n\t\t\t\tawait this.extensionManagementService.uninstall(extensionToUninstall, { profileLocation });\n\t\t\t\tuninstalledExtensions.push(extensionToUninstall);\n\t\t\t}\n\n\t\t\tif (this.location) {\n\t\t\t\tthis.logger.info(localize('successUninstallFromLocation', \"Extension '{0}' was successfully uninstalled from {1}!\", id, this.location));\n\t\t\t} else {\n\t\t\t\tthis.logger.info(localize('successUninstall', \"Extension '{0}' was successfully uninstalled!\", id));\n\t\t\t}\n\n\t\t}\n\t}\n\n\tpublic async locateExtension(extensions: string[]): Promise<void> {\n\t\tconst installed = await this.extensionManagementService.getInstalled();\n\t\textensions.forEach(e => {\n\t\t\tinstalled.forEach(i => {\n\t\t\t\tif (i.identifier.id === e) {\n\t\t\t\t\tif (i.location.scheme === Schemas.file) {\n\t\t\t\t\t\tthis.logger.info(i.location.fsPath);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate notInstalled(id: string) {\n\t\treturn this.location ? localize('notInstalleddOnLocation', \"Extension '{0}' is not installed on {1}.\", id, this.location) : localize('notInstalled', \"Extension '{0}' is not installed.\", id);\n\t}\n\n}\n"]}