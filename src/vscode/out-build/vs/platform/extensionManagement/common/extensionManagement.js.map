{"version":3,"sources":["vs/platform/extensionManagement/common/extensionManagement.ts"],"names":[],"mappings":"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","file":"extensionManagement.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { IStringDictionary } from '../../../base/common/collections.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IPager } from '../../../base/common/paging.js';\nimport { Platform } from '../../../base/common/platform.js';\nimport { PolicyCategory } from '../../../base/common/policy.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { localize, localize2 } from '../../../nls.js';\nimport { ConfigurationScope, Extensions, IConfigurationRegistry } from '../../configuration/common/configurationRegistry.js';\nimport { ExtensionType, IExtension, IExtensionManifest, TargetPlatform } from '../../extensions/common/extensions.js';\nimport { FileOperationError, FileOperationResult, IFileService, IFileStat } from '../../files/common/files.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { IExtensionGalleryManifest } from './extensionGalleryManifest.js';\n\nexport const EXTENSION_IDENTIFIER_PATTERN = '^([a-z0-9A-Z][a-z0-9-A-Z]*)\\\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$';\nexport const EXTENSION_IDENTIFIER_REGEX = new RegExp(EXTENSION_IDENTIFIER_PATTERN);\nexport const WEB_EXTENSION_TAG = '__web_extension';\nexport const EXTENSION_INSTALL_SKIP_WALKTHROUGH_CONTEXT = 'skipWalkthrough';\nexport const EXTENSION_INSTALL_SKIP_PUBLISHER_TRUST_CONTEXT = 'skipPublisherTrust';\nexport const EXTENSION_INSTALL_SOURCE_CONTEXT = 'extensionInstallSource';\nexport const EXTENSION_INSTALL_DEP_PACK_CONTEXT = 'dependecyOrPackExtensionInstall';\nexport const EXTENSION_INSTALL_CLIENT_TARGET_PLATFORM_CONTEXT = 'clientTargetPlatform';\n\nexport const enum ExtensionInstallSource {\n\tCOMMAND = 'command',\n\tSETTINGS_SYNC = 'settingsSync',\n}\n\nexport interface IProductVersion {\n\treadonly version: string;\n\treadonly date?: string;\n}\n\nexport function TargetPlatformToString(targetPlatform: TargetPlatform) {\n\tswitch (targetPlatform) {\n\t\tcase TargetPlatform.WIN32_X64: return 'Windows 64 bit';\n\t\tcase TargetPlatform.WIN32_ARM64: return 'Windows ARM';\n\n\t\tcase TargetPlatform.LINUX_X64: return 'Linux 64 bit';\n\t\tcase TargetPlatform.LINUX_ARM64: return 'Linux ARM 64';\n\t\tcase TargetPlatform.LINUX_ARMHF: return 'Linux ARM';\n\n\t\tcase TargetPlatform.ALPINE_X64: return 'Alpine Linux 64 bit';\n\t\tcase TargetPlatform.ALPINE_ARM64: return 'Alpine ARM 64';\n\n\t\tcase TargetPlatform.DARWIN_X64: return 'Mac';\n\t\tcase TargetPlatform.DARWIN_ARM64: return 'Mac Silicon';\n\n\t\tcase TargetPlatform.WEB: return 'Web';\n\n\t\tcase TargetPlatform.UNIVERSAL: return TargetPlatform.UNIVERSAL;\n\t\tcase TargetPlatform.UNKNOWN: return TargetPlatform.UNKNOWN;\n\t\tcase TargetPlatform.UNDEFINED: return TargetPlatform.UNDEFINED;\n\t}\n}\n\nexport function toTargetPlatform(targetPlatform: string): TargetPlatform {\n\tswitch (targetPlatform) {\n\t\tcase TargetPlatform.WIN32_X64: return TargetPlatform.WIN32_X64;\n\t\tcase TargetPlatform.WIN32_ARM64: return TargetPlatform.WIN32_ARM64;\n\n\t\tcase TargetPlatform.LINUX_X64: return TargetPlatform.LINUX_X64;\n\t\tcase TargetPlatform.LINUX_ARM64: return TargetPlatform.LINUX_ARM64;\n\t\tcase TargetPlatform.LINUX_ARMHF: return TargetPlatform.LINUX_ARMHF;\n\n\t\tcase TargetPlatform.ALPINE_X64: return TargetPlatform.ALPINE_X64;\n\t\tcase TargetPlatform.ALPINE_ARM64: return TargetPlatform.ALPINE_ARM64;\n\n\t\tcase TargetPlatform.DARWIN_X64: return TargetPlatform.DARWIN_X64;\n\t\tcase TargetPlatform.DARWIN_ARM64: return TargetPlatform.DARWIN_ARM64;\n\n\t\tcase TargetPlatform.WEB: return TargetPlatform.WEB;\n\n\t\tcase TargetPlatform.UNIVERSAL: return TargetPlatform.UNIVERSAL;\n\t\tdefault: return TargetPlatform.UNKNOWN;\n\t}\n}\n\nexport function getTargetPlatform(platform: Platform | 'alpine', arch: string | undefined): TargetPlatform {\n\tswitch (platform) {\n\t\tcase Platform.Windows:\n\t\t\tif (arch === 'x64') {\n\t\t\t\treturn TargetPlatform.WIN32_X64;\n\t\t\t}\n\t\t\tif (arch === 'arm64') {\n\t\t\t\treturn TargetPlatform.WIN32_ARM64;\n\t\t\t}\n\t\t\treturn TargetPlatform.UNKNOWN;\n\n\t\tcase Platform.Linux:\n\t\t\tif (arch === 'x64') {\n\t\t\t\treturn TargetPlatform.LINUX_X64;\n\t\t\t}\n\t\t\tif (arch === 'arm64') {\n\t\t\t\treturn TargetPlatform.LINUX_ARM64;\n\t\t\t}\n\t\t\tif (arch === 'arm') {\n\t\t\t\treturn TargetPlatform.LINUX_ARMHF;\n\t\t\t}\n\t\t\treturn TargetPlatform.UNKNOWN;\n\n\t\tcase 'alpine':\n\t\t\tif (arch === 'x64') {\n\t\t\t\treturn TargetPlatform.ALPINE_X64;\n\t\t\t}\n\t\t\tif (arch === 'arm64') {\n\t\t\t\treturn TargetPlatform.ALPINE_ARM64;\n\t\t\t}\n\t\t\treturn TargetPlatform.UNKNOWN;\n\n\t\tcase Platform.Mac:\n\t\t\tif (arch === 'x64') {\n\t\t\t\treturn TargetPlatform.DARWIN_X64;\n\t\t\t}\n\t\t\tif (arch === 'arm64') {\n\t\t\t\treturn TargetPlatform.DARWIN_ARM64;\n\t\t\t}\n\t\t\treturn TargetPlatform.UNKNOWN;\n\n\t\tcase Platform.Web: return TargetPlatform.WEB;\n\t}\n}\n\nexport function isNotWebExtensionInWebTargetPlatform(allTargetPlatforms: TargetPlatform[], productTargetPlatform: TargetPlatform): boolean {\n\t// Not a web extension in web target platform\n\treturn productTargetPlatform === TargetPlatform.WEB && !allTargetPlatforms.includes(TargetPlatform.WEB);\n}\n\nexport function isTargetPlatformCompatible(extensionTargetPlatform: TargetPlatform, allTargetPlatforms: TargetPlatform[], productTargetPlatform: TargetPlatform): boolean {\n\t// Not compatible when extension is not a web extension in web target platform\n\tif (isNotWebExtensionInWebTargetPlatform(allTargetPlatforms, productTargetPlatform)) {\n\t\treturn false;\n\t}\n\n\t// Compatible when extension target platform is not defined\n\tif (extensionTargetPlatform === TargetPlatform.UNDEFINED) {\n\t\treturn true;\n\t}\n\n\t// Compatible when extension target platform is universal\n\tif (extensionTargetPlatform === TargetPlatform.UNIVERSAL) {\n\t\treturn true;\n\t}\n\n\t// Not compatible when extension target platform is unknown\n\tif (extensionTargetPlatform === TargetPlatform.UNKNOWN) {\n\t\treturn false;\n\t}\n\n\t// Compatible when extension and product target platforms matches\n\tif (extensionTargetPlatform === productTargetPlatform) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nexport interface IGalleryExtensionProperties {\n\tdependencies?: string[];\n\textensionPack?: string[];\n\tengine?: string;\n\tenabledApiProposals?: string[];\n\tlocalizedLanguages?: string[];\n\ttargetPlatform: TargetPlatform;\n\tisPreReleaseVersion: boolean;\n\texecutesCode?: boolean;\n}\n\nexport interface IGalleryExtensionAsset {\n\turi: string;\n\tfallbackUri: string;\n}\n\nexport interface IGalleryExtensionAssets {\n\tmanifest: IGalleryExtensionAsset | null;\n\treadme: IGalleryExtensionAsset | null;\n\tchangelog: IGalleryExtensionAsset | null;\n\tlicense: IGalleryExtensionAsset | null;\n\trepository: IGalleryExtensionAsset | null;\n\tdownload: IGalleryExtensionAsset;\n\ticon: IGalleryExtensionAsset | null;\n\tsignature: IGalleryExtensionAsset | null;\n\tcoreTranslations: [string, IGalleryExtensionAsset][];\n}\n\nexport function isIExtensionIdentifier(obj: unknown): obj is IExtensionIdentifier {\n\tconst thing = obj as IExtensionIdentifier | undefined;\n\treturn !!thing\n\t\t&& typeof thing === 'object'\n\t\t&& typeof thing.id === 'string'\n\t\t&& (!thing.uuid || typeof thing.uuid === 'string');\n}\n\nexport interface IExtensionIdentifier {\n\tid: string;\n\tuuid?: string;\n}\n\nexport interface IGalleryExtensionIdentifier extends IExtensionIdentifier {\n\tuuid: string;\n}\n\nexport interface IGalleryExtensionVersion {\n\tversion: string;\n\tdate: string;\n\tisPreReleaseVersion: boolean;\n\ttargetPlatforms: TargetPlatform[];\n}\n\nexport interface IGalleryExtension {\n\ttype: 'gallery';\n\tname: string;\n\tidentifier: IGalleryExtensionIdentifier;\n\tversion: string;\n\tdisplayName: string;\n\tpublisherId: string;\n\tpublisher: string;\n\tpublisherDisplayName: string;\n\tpublisherDomain?: { link: string; verified: boolean };\n\tpublisherLink?: string;\n\tpublisherSponsorLink?: string;\n\tdescription: string;\n\tinstallCount: number;\n\trating: number;\n\tratingCount: number;\n\tcategories: readonly string[];\n\ttags: readonly string[];\n\treleaseDate: number;\n\tlastUpdated: number;\n\tpreview: boolean;\n\tprivate: boolean;\n\thasPreReleaseVersion: boolean;\n\thasReleaseVersion: boolean;\n\tisSigned: boolean;\n\tallTargetPlatforms: TargetPlatform[];\n\tassets: IGalleryExtensionAssets;\n\tproperties: IGalleryExtensionProperties;\n\tdetailsLink?: string;\n\tratingLink?: string;\n\tsupportLink?: string;\n\ttelemetryData?: IStringDictionary<unknown>;\n\tqueryContext?: IStringDictionary<unknown>;\n}\n\nexport type InstallSource = 'gallery' | 'vsix' | 'resource';\n\nexport interface IGalleryMetadata {\n\tid: string;\n\tpublisherId: string;\n\tprivate: boolean;\n\tpublisherDisplayName: string;\n\tisPreReleaseVersion: boolean;\n\ttargetPlatform?: TargetPlatform;\n}\n\nexport type Metadata = Partial<IGalleryMetadata & {\n\tisApplicationScoped: boolean;\n\tisMachineScoped: boolean;\n\tisBuiltin: boolean;\n\tisSystem: boolean;\n\tupdated: boolean;\n\tpreRelease: boolean;\n\thasPreReleaseVersion: boolean;\n\tinstalledTimestamp: number;\n\tpinned: boolean;\n\tsource: InstallSource;\n\tsize: number;\n}>;\n\nexport interface ILocalExtension extends IExtension {\n\tisWorkspaceScoped: boolean;\n\tisMachineScoped: boolean;\n\tisApplicationScoped: boolean;\n\tpublisherId: string | null;\n\tinstalledTimestamp?: number;\n\tisPreReleaseVersion: boolean;\n\thasPreReleaseVersion: boolean;\n\tprivate: boolean;\n\tpreRelease: boolean;\n\tupdated: boolean;\n\tpinned: boolean;\n\tsource: InstallSource;\n\tsize: number;\n}\n\nexport const enum SortBy {\n\tNoneOrRelevance = 'NoneOrRelevance',\n\tLastUpdatedDate = 'LastUpdatedDate',\n\tTitle = 'Title',\n\tPublisherName = 'PublisherName',\n\tInstallCount = 'InstallCount',\n\tPublishedDate = 'PublishedDate',\n\tAverageRating = 'AverageRating',\n\tWeightedRating = 'WeightedRating'\n}\n\nexport const enum SortOrder {\n\tDefault = 0,\n\tAscending = 1,\n\tDescending = 2\n}\n\nexport const enum FilterType {\n\tCategory = 'Category',\n\tExtensionId = 'ExtensionId',\n\tExtensionName = 'ExtensionName',\n\tExcludeWithFlags = 'ExcludeWithFlags',\n\tFeatured = 'Featured',\n\tSearchText = 'SearchText',\n\tTag = 'Tag',\n\tTarget = 'Target',\n}\n\nexport interface IQueryOptions {\n\ttext?: string;\n\texclude?: string[];\n\tpageSize?: number;\n\tsortBy?: SortBy;\n\tsortOrder?: SortOrder;\n\tsource?: string;\n\tincludePreRelease?: boolean;\n\tproductVersion?: IProductVersion;\n}\n\nexport const enum StatisticType {\n\tInstall = 'install',\n\tUninstall = 'uninstall'\n}\n\nexport interface IDeprecationInfo {\n\treadonly disallowInstall?: boolean;\n\treadonly extension?: {\n\t\treadonly id: string;\n\t\treadonly displayName: string;\n\t\treadonly autoMigrate?: { readonly storage: boolean };\n\t\treadonly preRelease?: boolean;\n\t};\n\treadonly settings?: readonly string[];\n\treadonly additionalInfo?: string;\n}\n\nexport interface ISearchPrefferedResults {\n\treadonly query?: string;\n\treadonly preferredResults?: string[];\n}\n\nexport type MaliciousExtensionInfo = {\n\treadonly extensionOrPublisher: IExtensionIdentifier | string;\n\treadonly learnMoreLink?: string;\n};\n\nexport interface IExtensionsControlManifest {\n\treadonly malicious: ReadonlyArray<MaliciousExtensionInfo>;\n\treadonly deprecated: IStringDictionary<IDeprecationInfo>;\n\treadonly search: ISearchPrefferedResults[];\n\treadonly autoUpdate?: IStringDictionary<string>;\n}\n\nexport const enum InstallOperation {\n\tNone = 1,\n\tInstall,\n\tUpdate,\n\tMigrate,\n}\n\nexport interface ITranslation {\n\tcontents: { [key: string]: {} };\n}\n\nexport interface IExtensionInfo extends IExtensionIdentifier {\n\tversion?: string;\n\tpreRelease?: boolean;\n\thasPreRelease?: boolean;\n}\n\nexport interface IExtensionQueryOptions {\n\ttargetPlatform?: TargetPlatform;\n\tproductVersion?: IProductVersion;\n\tcompatible?: boolean;\n\tqueryAllVersions?: boolean;\n\tsource?: string;\n}\n\nexport interface IExtensionGalleryCapabilities {\n\treadonly query: {\n\t\treadonly sortBy: readonly SortBy[];\n\t\treadonly filters: readonly FilterType[];\n\t};\n\treadonly allRepositorySigned: boolean;\n}\n\nexport const IExtensionGalleryService = createDecorator<IExtensionGalleryService>('extensionGalleryService');\n\n/**\n * Service to interact with the Visual Studio Code Marketplace to get extensions.\n * @throws Error if the Marketplace is not enabled or not reachable.\n */\nexport interface IExtensionGalleryService {\n\treadonly _serviceBrand: undefined;\n\tisEnabled(): boolean;\n\tquery(options: IQueryOptions, token: CancellationToken): Promise<IPager<IGalleryExtension>>;\n\tgetExtensions(extensionInfos: ReadonlyArray<IExtensionInfo>, token: CancellationToken): Promise<IGalleryExtension[]>;\n\tgetExtensions(extensionInfos: ReadonlyArray<IExtensionInfo>, options: IExtensionQueryOptions, token: CancellationToken): Promise<IGalleryExtension[]>;\n\tisExtensionCompatible(extension: IGalleryExtension, includePreRelease: boolean, targetPlatform: TargetPlatform, productVersion?: IProductVersion): Promise<boolean>;\n\tgetCompatibleExtension(extension: IGalleryExtension, includePreRelease: boolean, targetPlatform: TargetPlatform, productVersion?: IProductVersion): Promise<IGalleryExtension | null>;\n\tgetAllCompatibleVersions(extensionIdentifier: IExtensionIdentifier, includePreRelease: boolean, targetPlatform: TargetPlatform): Promise<IGalleryExtensionVersion[]>;\n\tgetAllVersions(extensionIdentifier: IExtensionIdentifier): Promise<IGalleryExtensionVersion[]>;\n\tdownload(extension: IGalleryExtension, location: URI, operation: InstallOperation): Promise<void>;\n\tdownloadSignatureArchive(extension: IGalleryExtension, location: URI): Promise<void>;\n\treportStatistic(publisher: string, name: string, version: string, type: StatisticType): Promise<void>;\n\tgetReadme(extension: IGalleryExtension, token: CancellationToken): Promise<string>;\n\tgetManifest(extension: IGalleryExtension, token: CancellationToken): Promise<IExtensionManifest | null>;\n\tgetChangelog(extension: IGalleryExtension, token: CancellationToken): Promise<string>;\n\tgetCoreTranslation(extension: IGalleryExtension, languageId: string): Promise<ITranslation | null>;\n\tgetExtensionsControlManifest(): Promise<IExtensionsControlManifest>;\n}\n\nexport interface InstallExtensionEvent {\n\treadonly identifier: IExtensionIdentifier;\n\treadonly source: URI | IGalleryExtension;\n\treadonly profileLocation: URI;\n\treadonly applicationScoped?: boolean;\n\treadonly workspaceScoped?: boolean;\n}\n\nexport interface InstallExtensionResult {\n\treadonly identifier: IExtensionIdentifier;\n\treadonly operation: InstallOperation;\n\treadonly source?: URI | IGalleryExtension;\n\treadonly local?: ILocalExtension;\n\treadonly error?: Error;\n\treadonly context?: IStringDictionary<unknown>;\n\treadonly profileLocation: URI;\n\treadonly applicationScoped?: boolean;\n\treadonly workspaceScoped?: boolean;\n}\n\nexport interface UninstallExtensionEvent {\n\treadonly identifier: IExtensionIdentifier;\n\treadonly profileLocation: URI;\n\treadonly applicationScoped?: boolean;\n\treadonly workspaceScoped?: boolean;\n}\n\nexport interface DidUninstallExtensionEvent {\n\treadonly identifier: IExtensionIdentifier;\n\treadonly error?: string;\n\treadonly profileLocation: URI;\n\treadonly applicationScoped?: boolean;\n\treadonly workspaceScoped?: boolean;\n}\n\nexport interface DidUpdateExtensionMetadata {\n\treadonly profileLocation: URI;\n\treadonly local: ILocalExtension;\n}\n\nexport const enum ExtensionGalleryErrorCode {\n\tTimeout = 'Timeout',\n\tCancelled = 'Cancelled',\n\tClientError = 'ClientError',\n\tServerError = 'ServerError',\n\tFailed = 'Failed',\n\tDownloadFailedWriting = 'DownloadFailedWriting',\n\tOffline = 'Offline',\n}\n\nexport class ExtensionGalleryError extends Error {\n\tconstructor(message: string, readonly code: ExtensionGalleryErrorCode) {\n\t\tsuper(message);\n\t\tthis.name = code;\n\t}\n}\n\nexport const enum ExtensionManagementErrorCode {\n\tNotFound = 'NotFound',\n\tUnsupported = 'Unsupported',\n\tDeprecated = 'Deprecated',\n\tMalicious = 'Malicious',\n\tIncompatible = 'Incompatible',\n\tIncompatibleApi = 'IncompatibleApi',\n\tIncompatibleTargetPlatform = 'IncompatibleTargetPlatform',\n\tReleaseVersionNotFound = 'ReleaseVersionNotFound',\n\tInvalid = 'Invalid',\n\tDownload = 'Download',\n\tDownloadSignature = 'DownloadSignature',\n\tDownloadFailedWriting = ExtensionGalleryErrorCode.DownloadFailedWriting,\n\tUpdateMetadata = 'UpdateMetadata',\n\tExtract = 'Extract',\n\tScanning = 'Scanning',\n\tScanningExtension = 'ScanningExtension',\n\tReadRemoved = 'ReadRemoved',\n\tUnsetRemoved = 'UnsetRemoved',\n\tDelete = 'Delete',\n\tRename = 'Rename',\n\tIntializeDefaultProfile = 'IntializeDefaultProfile',\n\tAddToProfile = 'AddToProfile',\n\tInstalledExtensionNotFound = 'InstalledExtensionNotFound',\n\tPostInstall = 'PostInstall',\n\tCorruptZip = 'CorruptZip',\n\tIncompleteZip = 'IncompleteZip',\n\tPackageNotSigned = 'PackageNotSigned',\n\tSignatureVerificationInternal = 'SignatureVerificationInternal',\n\tSignatureVerificationFailed = 'SignatureVerificationFailed',\n\tNotAllowed = 'NotAllowed',\n\tGallery = 'Gallery',\n\tCancelled = 'Cancelled',\n\tUnknown = 'Unknown',\n\tInternal = 'Internal',\n}\n\nexport enum ExtensionSignatureVerificationCode {\n\t'NotSigned' = 'NotSigned',\n\t'Success' = 'Success',\n\t'RequiredArgumentMissing' = 'RequiredArgumentMissing', // A required argument is missing.\n\t'InvalidArgument' = 'InvalidArgument', // An argument is invalid.\n\t'PackageIsUnreadable' = 'PackageIsUnreadable', // The extension package is unreadable.\n\t'UnhandledException' = 'UnhandledException', // An unhandled exception occurred.\n\t'SignatureManifestIsMissing' = 'SignatureManifestIsMissing', // The extension is missing a signature manifest file (.signature.manifest).\n\t'SignatureManifestIsUnreadable' = 'SignatureManifestIsUnreadable', // The signature manifest is unreadable.\n\t'SignatureIsMissing' = 'SignatureIsMissing', // The extension is missing a signature file (.signature.p7s).\n\t'SignatureIsUnreadable' = 'SignatureIsUnreadable', // The signature is unreadable.\n\t'CertificateIsUnreadable' = 'CertificateIsUnreadable', // The certificate is unreadable.\n\t'SignatureArchiveIsUnreadable' = 'SignatureArchiveIsUnreadable',\n\t'FileAlreadyExists' = 'FileAlreadyExists', // The output file already exists.\n\t'SignatureArchiveIsInvalidZip' = 'SignatureArchiveIsInvalidZip',\n\t'SignatureArchiveHasSameSignatureFile' = 'SignatureArchiveHasSameSignatureFile', // The signature archive has the same signature file.\n\t'PackageIntegrityCheckFailed' = 'PackageIntegrityCheckFailed', // The package integrity check failed.\n\t'SignatureIsInvalid' = 'SignatureIsInvalid', // The extension has an invalid signature file (.signature.p7s).\n\t'SignatureManifestIsInvalid' = 'SignatureManifestIsInvalid', // The extension has an invalid signature manifest file (.signature.manifest).\n\t'SignatureIntegrityCheckFailed' = 'SignatureIntegrityCheckFailed', // The extension's signature integrity check failed.  Extension integrity is suspect.\n\t'EntryIsMissing' = 'EntryIsMissing', // An entry referenced in the signature manifest was not found in the extension.\n\t'EntryIsTampered' = 'EntryIsTampered', // The integrity check for an entry referenced in the signature manifest failed.\n\t'Untrusted' = 'Untrusted', // An X.509 certificate in the extension signature is untrusted.\n\t'CertificateRevoked' = 'CertificateRevoked', // An X.509 certificate in the extension signature has been revoked.\n\t'SignatureIsNotValid' = 'SignatureIsNotValid', // The extension signature is invalid.\n\t'UnknownError' = 'UnknownError', // An unknown error occurred.\n\t'PackageIsInvalidZip' = 'PackageIsInvalidZip', // The extension package is not valid ZIP format.\n\t'SignatureArchiveHasTooManyEntries' = 'SignatureArchiveHasTooManyEntries', // The signature archive has too many entries.\n}\n\nexport class ExtensionManagementError extends Error {\n\tconstructor(message: string, readonly code: ExtensionManagementErrorCode) {\n\t\tsuper(message);\n\t\tthis.name = code;\n\t}\n}\n\nexport interface InstallExtensionSummary {\n\tfailed: {\n\t\tid: string;\n\t\tinstallOptions: InstallOptions;\n\t}[];\n}\n\nexport type InstallOptions = {\n\tisBuiltin?: boolean;\n\tisWorkspaceScoped?: boolean;\n\tisMachineScoped?: boolean;\n\tisApplicationScoped?: boolean;\n\tpinned?: boolean;\n\tdonotIncludePackAndDependencies?: boolean;\n\tinstallGivenVersion?: boolean;\n\tpreRelease?: boolean;\n\tinstallPreReleaseVersion?: boolean;\n\tdonotVerifySignature?: boolean;\n\toperation?: InstallOperation;\n\tprofileLocation?: URI;\n\tproductVersion?: IProductVersion;\n\tkeepExisting?: boolean;\n\tdownloadExtensionsLocally?: boolean;\n\t/**\n\t * Context passed through to InstallExtensionResult\n\t */\n\tcontext?: IStringDictionary<unknown>;\n};\n\nexport type UninstallOptions = {\n\treadonly profileLocation?: URI;\n\treadonly donotIncludePack?: boolean;\n\treadonly donotCheckDependents?: boolean;\n\treadonly versionOnly?: boolean;\n\treadonly remove?: boolean;\n};\n\nexport interface IExtensionManagementParticipant {\n\tpostInstall(local: ILocalExtension, source: URI | IGalleryExtension, options: InstallOptions, token: CancellationToken): Promise<void>;\n\tpostUninstall(local: ILocalExtension, options: UninstallOptions, token: CancellationToken): Promise<void>;\n}\n\nexport type InstallExtensionInfo = { readonly extension: IGalleryExtension; readonly options: InstallOptions };\nexport type UninstallExtensionInfo = { readonly extension: ILocalExtension; readonly options?: UninstallOptions };\n\nexport const IExtensionManagementService = createDecorator<IExtensionManagementService>('extensionManagementService');\nexport interface IExtensionManagementService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly preferPreReleases: boolean;\n\n\tonInstallExtension: Event<InstallExtensionEvent>;\n\tonDidInstallExtensions: Event<readonly InstallExtensionResult[]>;\n\tonUninstallExtension: Event<UninstallExtensionEvent>;\n\tonDidUninstallExtension: Event<DidUninstallExtensionEvent>;\n\tonDidUpdateExtensionMetadata: Event<DidUpdateExtensionMetadata>;\n\n\tzip(extension: ILocalExtension): Promise<URI>;\n\tgetManifest(vsix: URI): Promise<IExtensionManifest>;\n\tinstall(vsix: URI, options?: InstallOptions): Promise<ILocalExtension>;\n\tcanInstall(extension: IGalleryExtension): Promise<true | IMarkdownString>;\n\tinstallFromGallery(extension: IGalleryExtension, options?: InstallOptions): Promise<ILocalExtension>;\n\tinstallGalleryExtensions(extensions: InstallExtensionInfo[]): Promise<InstallExtensionResult[]>;\n\tinstallFromLocation(location: URI, profileLocation: URI): Promise<ILocalExtension>;\n\tinstallExtensionsFromProfile(extensions: IExtensionIdentifier[], fromProfileLocation: URI, toProfileLocation: URI): Promise<ILocalExtension[]>;\n\tuninstall(extension: ILocalExtension, options?: UninstallOptions): Promise<void>;\n\tuninstallExtensions(extensions: UninstallExtensionInfo[]): Promise<void>;\n\ttoggleApplicationScope(extension: ILocalExtension, fromProfileLocation: URI): Promise<ILocalExtension>;\n\tgetInstalled(type?: ExtensionType, profileLocation?: URI, productVersion?: IProductVersion, language?: string): Promise<ILocalExtension[]>;\n\tgetExtensionsControlManifest(): Promise<IExtensionsControlManifest>;\n\tcopyExtensions(fromProfileLocation: URI, toProfileLocation: URI): Promise<void>;\n\tupdateMetadata(local: ILocalExtension, metadata: Partial<Metadata>, profileLocation: URI): Promise<ILocalExtension>;\n\tresetPinnedStateForAllUserExtensions(pinned: boolean): Promise<void>;\n\n\tdownload(extension: IGalleryExtension, operation: InstallOperation, donotVerifySignature: boolean): Promise<URI>;\n\n\tregisterParticipant(pariticipant: IExtensionManagementParticipant): void;\n\tgetTargetPlatform(): Promise<TargetPlatform>;\n\n\tcleanUp(): Promise<void>;\n}\n\nexport const DISABLED_EXTENSIONS_STORAGE_PATH = 'extensionsIdentifiers/disabled';\nexport const ENABLED_EXTENSIONS_STORAGE_PATH = 'extensionsIdentifiers/enabled';\nexport const IGlobalExtensionEnablementService = createDecorator<IGlobalExtensionEnablementService>('IGlobalExtensionEnablementService');\n\nexport interface IGlobalExtensionEnablementService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidChangeEnablement: Event<{ readonly extensions: IExtensionIdentifier[]; readonly source?: string }>;\n\n\tgetDisabledExtensions(): IExtensionIdentifier[];\n\tenableExtension(extension: IExtensionIdentifier, source?: string): Promise<boolean>;\n\tdisableExtension(extension: IExtensionIdentifier, source?: string): Promise<boolean>;\n\n}\n\nexport type IConfigBasedExtensionTip = {\n\treadonly extensionId: string;\n\treadonly extensionName: string;\n\treadonly isExtensionPack: boolean;\n\treadonly configName: string;\n\treadonly important: boolean;\n\treadonly whenNotInstalled?: string[];\n};\n\nexport type IExecutableBasedExtensionTip = {\n\treadonly extensionId: string;\n\treadonly extensionName: string;\n\treadonly isExtensionPack: boolean;\n\treadonly exeName: string;\n\treadonly exeFriendlyName: string;\n\treadonly windowsPath?: string;\n\treadonly whenNotInstalled?: string[];\n};\n\nexport const IExtensionTipsService = createDecorator<IExtensionTipsService>('IExtensionTipsService');\nexport interface IExtensionTipsService {\n\treadonly _serviceBrand: undefined;\n\n\tgetConfigBasedTips(folder: URI): Promise<IConfigBasedExtensionTip[]>;\n\tgetImportantExecutableBasedTips(): Promise<IExecutableBasedExtensionTip[]>;\n\tgetOtherExecutableBasedTips(): Promise<IExecutableBasedExtensionTip[]>;\n}\n\nexport type AllowedExtensionsConfigValueType = IStringDictionary<boolean | string | string[]>;\n\nexport const IAllowedExtensionsService = createDecorator<IAllowedExtensionsService>('IAllowedExtensionsService');\nexport interface IAllowedExtensionsService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly allowedExtensionsConfigValue: AllowedExtensionsConfigValueType | undefined;\n\treadonly onDidChangeAllowedExtensionsConfigValue: Event<void>;\n\n\tisAllowed(extension: IGalleryExtension | IExtension): true | IMarkdownString;\n\tisAllowed(extension: { id: string; publisherDisplayName: string | undefined; version?: string; prerelease?: boolean; targetPlatform?: TargetPlatform }): true | IMarkdownString;\n}\n\nexport async function computeSize(location: URI, fileService: IFileService): Promise<number> {\n\tlet stat: IFileStat;\n\ttry {\n\t\tstat = await fileService.resolve(location);\n\t} catch (e) {\n\t\tif ((<FileOperationError>e).fileOperationResult === FileOperationResult.FILE_NOT_FOUND) {\n\t\t\treturn 0;\n\t\t}\n\t\tthrow e;\n\t}\n\tif (stat.children) {\n\t\tconst sizes = await Promise.all(stat.children.map(c => computeSize(c.resource, fileService)));\n\t\treturn sizes.reduce((r, s) => r + s, 0);\n\t}\n\treturn stat.size ?? 0;\n}\n\nexport const ExtensionsLocalizedLabel = localize2('extensions', \"Extensions\");\nexport const PreferencesLocalizedLabel = localize2('preferences', 'Preferences');\nexport const AllowedExtensionsConfigKey = 'extensions.allowed';\nexport const VerifyExtensionSignatureConfigKey = 'extensions.verifySignature';\nexport const ExtensionRequestsTimeoutConfigKey = 'extensions.requestTimeout';\n\nRegistry.as<IConfigurationRegistry>(Extensions.Configuration)\n\t.registerConfiguration({\n\t\tid: 'extensions',\n\t\torder: 30,\n\t\ttitle: localize('extensionsConfigurationTitle', \"Extensions\"),\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\t[AllowedExtensionsConfigKey]: {\n\t\t\t\t// Note: Type is set only to object because to support policies generation during build time, where single type is expected.\n\t\t\t\ttype: 'object',\n\t\t\t\tmarkdownDescription: localize('extensions.allowed', \"Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. For more information on how to configure this setting, please visit the [Configure Allowed Extensions](https://code.visualstudio.com/docs/setup/enterprise#_configure-allowed-extensions) section.\"),\n\t\t\t\tdefault: '*',\n\t\t\t\tdefaultSnippets: [{\n\t\t\t\t\tbody: {},\n\t\t\t\t\tdescription: localize('extensions.allowed.none', \"No extensions are allowed.\"),\n\t\t\t\t}, {\n\t\t\t\t\tbody: {\n\t\t\t\t\t\t'*': true\n\t\t\t\t\t},\n\t\t\t\t\tdescription: localize('extensions.allowed.all', \"All extensions are allowed.\"),\n\t\t\t\t}],\n\t\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\t\tpolicy: {\n\t\t\t\t\tname: 'AllowedExtensions',\n\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\tminimumVersion: '1.96',\n\t\t\t\t\tlocalization: {\n\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\tkey: 'extensions.allowed.policy',\n\t\t\t\t\t\t\tvalue: localize('extensions.allowed.policy', \"Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. More information: https://code.visualstudio.com/docs/setup/enterprise#_configure-allowed-extensions\"),\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tadditionalProperties: false,\n\t\t\t\tpatternProperties: {\n\t\t\t\t\t'([a-z0-9A-Z][a-z0-9-A-Z]*)\\\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$': {\n\t\t\t\t\t\tanyOf: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: ['boolean', 'string'],\n\t\t\t\t\t\t\t\tenum: [true, false, 'stable'],\n\t\t\t\t\t\t\t\tdescription: localize('extensions.allow.description', \"Allow or disallow the extension.\"),\n\t\t\t\t\t\t\t\tenumDescriptions: [\n\t\t\t\t\t\t\t\t\tlocalize('extensions.allowed.enable.desc', \"Extension is allowed.\"),\n\t\t\t\t\t\t\t\t\tlocalize('extensions.allowed.disable.desc', \"Extension is not allowed.\"),\n\t\t\t\t\t\t\t\t\tlocalize('extensions.allowed.disable.stable.desc', \"Allow only stable versions of the extension.\"),\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdescription: localize('extensions.allow.version.description', \"Allow or disallow specific versions of the extension. To specifcy a platform specific version, use the format `platform@1.2.3`, e.g. `win32-x64@1.2.3`. Supported platforms are `win32-x64`, `win32-arm64`, `linux-x64`, `linux-arm64`, `linux-armhf`, `alpine-x64`, `alpine-arm64`, `darwin-x64`, `darwin-arm64`\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t'([a-z0-9A-Z][a-z0-9-A-Z]*)$': {\n\t\t\t\t\t\ttype: ['boolean', 'string'],\n\t\t\t\t\t\tenum: [true, false, 'stable'],\n\t\t\t\t\t\tdescription: localize('extension.publisher.allow.description', \"Allow or disallow all extensions from the publisher.\"),\n\t\t\t\t\t\tenumDescriptions: [\n\t\t\t\t\t\t\tlocalize('extensions.publisher.allowed.enable.desc', \"All extensions from the publisher are allowed.\"),\n\t\t\t\t\t\t\tlocalize('extensions.publisher.allowed.disable.desc', \"All extensions from the publisher are not allowed.\"),\n\t\t\t\t\t\t\tlocalize('extensions.publisher.allowed.disable.stable.desc', \"Allow only stable versions of the extensions from the publisher.\"),\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t'\\\\*': {\n\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\tenum: [true, false],\n\t\t\t\t\t\tdescription: localize('extensions.allow.all.description', \"Allow or disallow all extensions.\"),\n\t\t\t\t\t\tenumDescriptions: [\n\t\t\t\t\t\t\tlocalize('extensions.allow.all.enable', \"Allow all extensions.\"),\n\t\t\t\t\t\t\tlocalize('extensions.allow.all.disable', \"Disallow all extensions.\")\n\t\t\t\t\t\t],\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\nexport function shouldRequireRepositorySignatureFor(isPrivate: boolean, galleryManifest: IExtensionGalleryManifest | null): boolean {\n\tif (isPrivate) {\n\t\treturn galleryManifest?.capabilities.signing?.allPrivateRepositorySigned === true;\n\t}\n\treturn galleryManifest?.capabilities.signing?.allPublicRepositorySigned === true;\n}\n\n"]}