{"version":3,"sources":["vs/platform/extensionManagement/common/extensionNls.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,+BAA+B,CAAC;AAGnE,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAO3C,MAAM,UAAU,gBAAgB,CAAC,MAAe,EAAE,iBAAqC,EAAE,YAA2B,EAAE,oBAAoC;IACzJ,IAAI,CAAC;QACJ,gBAAgB,CAAC,MAAM,EAAE,iBAAiB,EAAE,YAAY,EAAE,oBAAoB,CAAC,CAAC;IACjF,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QAChB,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,OAAO,IAAI,KAAK,CAAC,CAAC;QACtC,gBAAgB;IACjB,CAAC;IACD,OAAO,iBAAiB,CAAC;AAC1B,CAAC;AAED;;;GAGG;AACH,SAAS,gBAAgB,CAAC,MAAe,EAAE,iBAAqC,EAAE,QAAuB,EAAE,gBAAgC;IAC1I,MAAM,YAAY,GAAG,CAAC,GAA4B,EAAE,GAAoB,EAAE,OAAiB,EAAE,EAAE;QAC9F,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;QACvB,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YACrB,MAAM,GAAG,GAAG,KAAK,CAAC;YAClB,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;YAC1B,IAAI,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;gBAC7D,MAAM,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;gBAC7C,IAAI,UAAU,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC;gBACtC,sEAAsE;gBACtE,wCAAwC;gBACxC,IAAI,UAAU,KAAK,SAAS,IAAI,gBAAgB,EAAE,CAAC;oBAClD,UAAU,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;gBAC3C,CAAC;gBACD,MAAM,OAAO,GAAuB,OAAO,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC;gBAEtG,+IAA+I;gBAC/I,MAAM,QAAQ,GAAG,gBAAgB,EAAE,CAAC,UAAU,CAAC,CAAC;gBAChD,MAAM,eAAe,GAAuB,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC;gBAExG,IAAI,CAAC,OAAO,EAAE,CAAC;oBACd,IAAI,CAAC,eAAe,EAAE,CAAC;wBACtB,MAAM,CAAC,IAAI,CAAC,IAAI,iBAAiB,CAAC,IAAI,MAAM,QAAQ,CAAC,IAAe,EAAE,IAAoC,EAAE,UAAU,CAAC,EAAE,CAAC,CAAC;oBAC5H,CAAC;oBACD,OAAO;gBACR,CAAC;gBAED;gBACC,2DAA2D;gBAC3D,OAAO,IAAI,CAAC,GAAG,KAAK,OAAO,IAAI,GAAG,KAAK,UAAU,CAAC;oBAClD,iEAAiE;oBACjE,eAAe,IAAI,eAAe,KAAK,OAAO,EAC7C,CAAC;oBACF,MAAM,eAAe,GAAqB;wBACzC,KAAK,EAAE,OAAO;wBACd,QAAQ,EAAE,eAAe;qBACzB,CAAC;oBACF,GAAG,CAAC,GAAG,CAAC,GAAG,eAAe,CAAC;gBAC5B,CAAC;qBAAM,CAAC;oBACP,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;gBACpB,CAAC;YACF,CAAC;QACF,CAAC;aAAM,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YAC5B,KAAK,MAAM,CAAC,IAAI,KAAK,EAAE,CAAC;gBACvB,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC;oBAC7B,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC,YAAY,CAAC,KAAgC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,KAAgC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;gBACzI,CAAC;YACF,CAAC;QACF,CAAC;aAAM,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;YACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAI,KAAwB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAC3D,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;YACjC,CAAC;QACF,CAAC;IACF,CAAC,CAAC;IAEF,KAAK,MAAM,GAAG,IAAI,iBAAiB,EAAE,CAAC;QACrC,IAAI,iBAAiB,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC;YAC3C,YAAY,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAC;QACtC,CAAC;IACF,CAAC;AACF,CAAC","file":"extensionNls.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isObject, isString } from '../../../base/common/types.js';\nimport { ILocalizedString } from '../../action/common/action.js';\nimport { IExtensionManifest } from '../../extensions/common/extensions.js';\nimport { localize } from '../../../nls.js';\nimport { ILogger } from '../../log/common/log.js';\n\nexport interface ITranslations {\n\t[key: string]: string | { message: string; comment: string[] } | undefined;\n}\n\nexport function localizeManifest(logger: ILogger, extensionManifest: IExtensionManifest, translations: ITranslations, fallbackTranslations?: ITranslations): IExtensionManifest {\n\ttry {\n\t\treplaceNLStrings(logger, extensionManifest, translations, fallbackTranslations);\n\t} catch (error) {\n\t\tlogger.error(error?.message ?? error);\n\t\t/*Ignore Error*/\n\t}\n\treturn extensionManifest;\n}\n\n/**\n * This routine makes the following assumptions:\n * The root element is an object literal\n */\nfunction replaceNLStrings(logger: ILogger, extensionManifest: IExtensionManifest, messages: ITranslations, originalMessages?: ITranslations): void {\n\tconst processEntry = (obj: Record<string, unknown>, key: string | number, command?: boolean) => {\n\t\tconst value = obj[key];\n\t\tif (isString(value)) {\n\t\t\tconst str = value;\n\t\t\tconst length = str.length;\n\t\t\tif (length > 1 && str[0] === '%' && str[length - 1] === '%') {\n\t\t\t\tconst messageKey = str.substr(1, length - 2);\n\t\t\t\tlet translated = messages[messageKey];\n\t\t\t\t// If the messages come from a language pack they might miss some keys\n\t\t\t\t// Fill them from the original messages.\n\t\t\t\tif (translated === undefined && originalMessages) {\n\t\t\t\t\ttranslated = originalMessages[messageKey];\n\t\t\t\t}\n\t\t\t\tconst message: string | undefined = typeof translated === 'string' ? translated : translated?.message;\n\n\t\t\t\t// This branch returns ILocalizedString's instead of Strings so that the Command Palette can contain both the localized and the original value.\n\t\t\t\tconst original = originalMessages?.[messageKey];\n\t\t\t\tconst originalMessage: string | undefined = typeof original === 'string' ? original : original?.message;\n\n\t\t\t\tif (!message) {\n\t\t\t\t\tif (!originalMessage) {\n\t\t\t\t\t\tlogger.warn(`[${extensionManifest.name}]: ${localize('missingNLSKey', \"Couldn't find message for key {0}.\", messageKey)}`);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t// if we are translating the title or category of a command\n\t\t\t\t\tcommand && (key === 'title' || key === 'category') &&\n\t\t\t\t\t// and the original value is not the same as the translated value\n\t\t\t\t\toriginalMessage && originalMessage !== message\n\t\t\t\t) {\n\t\t\t\t\tconst localizedString: ILocalizedString = {\n\t\t\t\t\t\tvalue: message,\n\t\t\t\t\t\toriginal: originalMessage\n\t\t\t\t\t};\n\t\t\t\t\tobj[key] = localizedString;\n\t\t\t\t} else {\n\t\t\t\t\tobj[key] = message;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isObject(value)) {\n\t\t\tfor (const k in value) {\n\t\t\t\tif (value.hasOwnProperty(k)) {\n\t\t\t\t\tk === 'commands' ? processEntry(value as Record<string, unknown>, k, true) : processEntry(value as Record<string, unknown>, k, command);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (Array.isArray(value)) {\n\t\t\tfor (let i = 0; i < (value as Array<unknown>).length; i++) {\n\t\t\t\tprocessEntry(value, i, command);\n\t\t\t}\n\t\t}\n\t};\n\n\tfor (const key in extensionManifest) {\n\t\tif (extensionManifest.hasOwnProperty(key)) {\n\t\t\tprocessEntry(extensionManifest, key);\n\t\t}\n\t}\n}\n"]}