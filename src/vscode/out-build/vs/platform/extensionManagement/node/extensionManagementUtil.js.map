{"version":3,"sources":["vs/platform/extensionManagement/node/extensionManagementUtil.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,0BAA0B,EAAE,MAAM,iDAAiD,CAAC;AAC7F,OAAO,EAAE,wBAAwB,EAAgC,MAAM,kCAAkC,CAAC;AAG1G,MAAM,UAAU,gBAAgB,CAAC,CAAQ;IACxC,IAAI,SAAS,uDAAuC,CAAC;IACrD,IAAI,CAAC,YAAY,YAAY,EAAE,CAAC;QAC/B,IAAI,CAAC,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;YAC7B,SAAS,6DAA0C,CAAC;QACrD,CAAC;aAAM,IAAI,CAAC,CAAC,IAAI,KAAK,YAAY,EAAE,CAAC;YACpC,SAAS,mEAA6C,CAAC;QACxD,CAAC;IACF,CAAC;IACD,OAAO,0BAA0B,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;AACjD,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,WAAW,CAAC,QAAgB;IACjD,IAAI,IAAI,CAAC;IACT,IAAI,CAAC;QACJ,IAAI,GAAG,MAAM,MAAM,CAAC,QAAQ,EAAE,wBAAwB,CAAC,CAAC;IACzD,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC;QACZ,MAAM,gBAAgB,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAED,IAAI,CAAC;QACJ,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;IAC1C,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACd,MAAM,IAAI,wBAAwB,CAAC,QAAQ,CAAC,IAAiB,EAAE,IAAgD,CAAC,uDAAuC,CAAC;IACzJ,CAAC;AACF,CAAC","file":"extensionManagementUtil.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { buffer, ExtractError } from '../../../base/node/zip.js';\nimport { localize } from '../../../nls.js';\nimport { toExtensionManagementError } from '../common/abstractExtensionManagementService.js';\nimport { ExtensionManagementError, ExtensionManagementErrorCode } from '../common/extensionManagement.js';\nimport { IExtensionManifest } from '../../extensions/common/extensions.js';\n\nexport function fromExtractError(e: Error): ExtensionManagementError {\n\tlet errorCode = ExtensionManagementErrorCode.Extract;\n\tif (e instanceof ExtractError) {\n\t\tif (e.type === 'CorruptZip') {\n\t\t\terrorCode = ExtensionManagementErrorCode.CorruptZip;\n\t\t} else if (e.type === 'Incomplete') {\n\t\t\terrorCode = ExtensionManagementErrorCode.IncompleteZip;\n\t\t}\n\t}\n\treturn toExtensionManagementError(e, errorCode);\n}\n\nexport async function getManifest(vsixPath: string): Promise<IExtensionManifest> {\n\tlet data;\n\ttry {\n\t\tdata = await buffer(vsixPath, 'extension/package.json');\n\t} catch (e) {\n\t\tthrow fromExtractError(e);\n\t}\n\n\ttry {\n\t\treturn JSON.parse(data.toString('utf8'));\n\t} catch (err) {\n\t\tthrow new ExtensionManagementError(localize('invalidManifest', \"VSIX invalid: package.json is not a JSON file.\"), ExtensionManagementErrorCode.Invalid);\n\t}\n}\n"]}