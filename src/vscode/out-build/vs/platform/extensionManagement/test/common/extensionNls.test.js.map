{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/platform/extensionManagement/test/common/extensionNls.test.ts","vs/platform/extensionManagement/test/common/extensionNls.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAAE,SAAS,EAAE,MAAM,oCAAoC,CAAC;AAC/D,OAAO,EAAE,uCAAuC,EAAE,MAAM,uCAAuC,CAAC;AAGhG,OAAO,EAAE,gBAAgB,EAAE,MAAM,8BAA8B,CAAC;AAEhE,OAAO,EAAE,UAAU,EAAE,MAAM,4BAA4B,CAAC;AAExD,MAAM,QAAQ,GAAuB;IACpC,IAAI,EAAE,MAAM;IACZ,SAAS,EAAE,MAAM;IACjB,OAAO,EAAE,OAAO;IAChB,OAAO,EAAE;QACR,MAAM,EAAE,GAAG;KACX;IACD,WAAW,EAAE;QACZ,QAAQ,EAAE;YACT;gBACC,OAAO,EAAE,cAAc;gBACvB,KAAK,EAAE,sBAAsB;gBAC7B,QAAQ,EAAE,yBAAyB;aACnC;SACD;QACD,cAAc,EAAE;YACf;gBACC,EAAE,EAAE,qBAAqB;gBACzB,KAAK,EAAE,6BAA6B;aACpC;SACD;QACD,aAAa,EAAE;YACd,6CAA6C;YAC7C,KAAK,EAAE,4BAA4B;YACnC,UAAU,EAAE;gBACX,oBAAoB,EAAE;oBACrB,IAAI,EAAE,QAAQ;oBACd,WAAW,EAAE,eAAe;iBAC5B;aACD;SACD;KACD;CACD,CAAC;AAEF,KAAK,CAAC,mBAAmB,EAAE,GAAG,EAAE;IAC/B,MAAM,KAAK,GAAG,uCAAuC,EAAE,CAAC;IACxD,IAAI,CAAC,2BAA2B,EAAE;QACjC,MAAM,iBAAiB,GAAG,gBAAgB,CACzC,KAAK,CAAC,GAAG,CAAC,IAAI,UAAU,EAAE,CAAC,EAC3B,SAAS,CAAC,QAAQ,CAAC,EACnB;YACC,oBAAoB,EAAE,cAAc;YACpC,uBAAuB,EAAE,eAAe;YACxC,2BAA2B,EAAE,qBAAqB;YAClD,0BAA0B,EAAE,oBAAoB;SAChD,CACD,CAAC;QAEF,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QACvF,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAC;QAC3F,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QACpG,MAAM,CAAC,WAAW,CAAC,CAAC,iBAAiB,CAAC,WAAW,EAAE,aAAoC,CAAA,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;IACtH,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,sEAAsE,EAAE;QAC5E,MAAM,iBAAiB,GAAG,gBAAgB,CACzC,KAAK,CAAC,GAAG,CAAC,IAAI,UAAU,EAAE,CAAC,EAC3B,SAAS,CAAC,QAAQ,CAAC,EACnB,EAAE,EACF;YACC,oBAAoB,EAAE,cAAc;YACpC,uBAAuB,EAAE,eAAe;YACxC,2BAA2B,EAAE,qBAAqB;YAClD,0BAA0B,EAAE,oBAAoB;SAChD,CACD,CAAC;QAEF,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QACvF,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAC;QAC3F,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QACpG,MAAM,CAAC,WAAW,CAAC,CAAC,iBAAiB,CAAC,WAAW,EAAE,aAAoC,CAAA,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;IACtH,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gFAAgF,EAAE;QACtF,MAAM,iBAAiB,GAAG,gBAAgB,CACzC,KAAK,CAAC,GAAG,CAAC,IAAI,UAAU,EAAE,CAAC,EAC3B,SAAS,CAAC,QAAQ,CAAC,EACnB;YACC,oBAAoB,EAAE,aAAa;YACnC,uBAAuB,EAAE,eAAe;YACxC,2BAA2B,EAAE,uBAAuB;YACpD,0BAA0B,EAAE,mBAAmB;SAC/C,EACD;YACC,oBAAoB,EAAE,cAAc;YACpC,uBAAuB,EAAE,eAAe;YACxC,2BAA2B,EAAE,qBAAqB;YAClD,0BAA0B,EAAE,oBAAoB;SAChD,CACD,CAAC;QAEF,MAAM,KAAK,GAAG,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAyB,CAAC;QACrF,MAAM,QAAQ,GAAG,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,QAA4B,CAAC;QAC3F,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QAC/C,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QACpD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAC;QAEvD,qCAAqC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,uBAAuB,CAAC,CAAC;QACtG,MAAM,CAAC,WAAW,CAAC,CAAC,iBAAiB,CAAC,WAAW,EAAE,aAAoC,CAAA,CAAC,KAAK,EAAE,mBAAmB,CAAC,CAAC;IACrH,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oDAAoD,EAAE;QAC1D,MAAM,gBAAgB,GAAuB;YAC5C,IAAI,EAAE,MAAM;YACZ,SAAS,EAAE,MAAM;YACjB,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE;gBACR,MAAM,EAAE,GAAG;aACX;YACD,WAAW,EAAE;gBACZ,cAAc,EAAE;oBACf;wBACC,EAAE,EAAE,qBAAqB;wBACzB,4DAA4D;wBAC5D,KAAK,EAAE,gBAAgB;qBACvB;iBACD;gBACD,QAAQ,EAAE;oBACT;wBACC,OAAO,EAAE,cAAc;wBACvB,KAAK,EAAE,sBAAsB;wBAC7B,QAAQ,EAAE,yBAAyB;qBACnC;iBACD;aACD;SACD,CAAC;QAEF,MAAM,iBAAiB,GAAG,gBAAgB,CACzC,KAAK,CAAC,GAAG,CAAC,IAAI,UAAU,EAAE,CAAC,EAC3B,SAAS,CAAC,gBAAgB,CAAC,EAC3B;YACC,oBAAoB,EAAE,cAAc;YACpC,uBAAuB,EAAE,eAAe;SACxC,CAAC,CAAC;QAEJ,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QACvF,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAC;QAC3F,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,WAAW,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;IAChG,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"extensionNls.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ILocalizedString } from '../../../action/common/action.js';\nimport { IConfigurationNode } from '../../../configuration/common/configurationRegistry.js';\nimport { localizeManifest } from '../../common/extensionNls.js';\nimport { IExtensionManifest } from '../../../extensions/common/extensions.js';\nimport { NullLogger } from '../../../log/common/log.js';\n\nconst manifest: IExtensionManifest = {\n\tname: 'test',\n\tpublisher: 'test',\n\tversion: '1.0.0',\n\tengines: {\n\t\tvscode: '*'\n\t},\n\tcontributes: {\n\t\tcommands: [\n\t\t\t{\n\t\t\t\tcommand: 'test.command',\n\t\t\t\ttitle: '%test.command.title%',\n\t\t\t\tcategory: '%test.command.category%'\n\t\t\t},\n\t\t],\n\t\tauthentication: [\n\t\t\t{\n\t\t\t\tid: 'test.authentication',\n\t\t\t\tlabel: '%test.authentication.label%',\n\t\t\t}\n\t\t],\n\t\tconfiguration: {\n\t\t\t// to ensure we test another \"title\" property\n\t\t\ttitle: '%test.configuration.title%',\n\t\t\tproperties: {\n\t\t\t\t'test.configuration': {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: 'not important',\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nsuite('Localize Manifest', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\ttest('replaces template strings', function () {\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifest),\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category',\n\t\t\t\t'test.authentication.label': 'Test Authentication',\n\t\t\t\t'test.configuration.title': 'Test Configuration',\n\t\t\t}\n\t\t);\n\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].title, 'Test Command');\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].category, 'Test Category');\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, 'Test Authentication');\n\t\tassert.strictEqual((localizedManifest.contributes?.configuration as IConfigurationNode).title, 'Test Configuration');\n\t});\n\n\ttest('replaces template strings with fallback if not found in translations', function () {\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifest),\n\t\t\t{},\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category',\n\t\t\t\t'test.authentication.label': 'Test Authentication',\n\t\t\t\t'test.configuration.title': 'Test Configuration',\n\t\t\t}\n\t\t);\n\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].title, 'Test Command');\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].category, 'Test Category');\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, 'Test Authentication');\n\t\tassert.strictEqual((localizedManifest.contributes?.configuration as IConfigurationNode).title, 'Test Configuration');\n\t});\n\n\ttest('replaces template strings - command title & categories become ILocalizedString', function () {\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifest),\n\t\t\t{\n\t\t\t\t'test.command.title': 'Befehl test',\n\t\t\t\t'test.command.category': 'Testkategorie',\n\t\t\t\t'test.authentication.label': 'Testauthentifizierung',\n\t\t\t\t'test.configuration.title': 'Testkonfiguration',\n\t\t\t},\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category',\n\t\t\t\t'test.authentication.label': 'Test Authentication',\n\t\t\t\t'test.configuration.title': 'Test Configuration',\n\t\t\t}\n\t\t);\n\n\t\tconst title = localizedManifest.contributes?.commands?.[0].title as ILocalizedString;\n\t\tconst category = localizedManifest.contributes?.commands?.[0].category as ILocalizedString;\n\t\tassert.strictEqual(title.value, 'Befehl test');\n\t\tassert.strictEqual(title.original, 'Test Command');\n\t\tassert.strictEqual(category.value, 'Testkategorie');\n\t\tassert.strictEqual(category.original, 'Test Category');\n\n\t\t// Everything else stays as a string.\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, 'Testauthentifizierung');\n\t\tassert.strictEqual((localizedManifest.contributes?.configuration as IConfigurationNode).title, 'Testkonfiguration');\n\t});\n\n\ttest('replaces template strings - is best effort #164630', function () {\n\t\tconst manifestWithTypo: IExtensionManifest = {\n\t\t\tname: 'test',\n\t\t\tpublisher: 'test',\n\t\t\tversion: '1.0.0',\n\t\t\tengines: {\n\t\t\t\tvscode: '*'\n\t\t\t},\n\t\t\tcontributes: {\n\t\t\t\tauthentication: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'test.authentication',\n\t\t\t\t\t\t// This not existing in the bundle shouldn't cause an error.\n\t\t\t\t\t\tlabel: '%doesnotexist%',\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tcommands: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcommand: 'test.command',\n\t\t\t\t\t\ttitle: '%test.command.title%',\n\t\t\t\t\t\tcategory: '%test.command.category%'\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t};\n\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifestWithTypo),\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category'\n\t\t\t});\n\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].title, 'Test Command');\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].category, 'Test Category');\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, '%doesnotexist%');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ILocalizedString } from '../../../action/common/action.js';\nimport { IConfigurationNode } from '../../../configuration/common/configurationRegistry.js';\nimport { localizeManifest } from '../../common/extensionNls.js';\nimport { IExtensionManifest } from '../../../extensions/common/extensions.js';\nimport { NullLogger } from '../../../log/common/log.js';\n\nconst manifest: IExtensionManifest = {\n\tname: 'test',\n\tpublisher: 'test',\n\tversion: '1.0.0',\n\tengines: {\n\t\tvscode: '*'\n\t},\n\tcontributes: {\n\t\tcommands: [\n\t\t\t{\n\t\t\t\tcommand: 'test.command',\n\t\t\t\ttitle: '%test.command.title%',\n\t\t\t\tcategory: '%test.command.category%'\n\t\t\t},\n\t\t],\n\t\tauthentication: [\n\t\t\t{\n\t\t\t\tid: 'test.authentication',\n\t\t\t\tlabel: '%test.authentication.label%',\n\t\t\t}\n\t\t],\n\t\tconfiguration: {\n\t\t\t// to ensure we test another \"title\" property\n\t\t\ttitle: '%test.configuration.title%',\n\t\t\tproperties: {\n\t\t\t\t'test.configuration': {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: 'not important',\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nsuite('Localize Manifest', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\ttest('replaces template strings', function () {\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifest),\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category',\n\t\t\t\t'test.authentication.label': 'Test Authentication',\n\t\t\t\t'test.configuration.title': 'Test Configuration',\n\t\t\t}\n\t\t);\n\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].title, 'Test Command');\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].category, 'Test Category');\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, 'Test Authentication');\n\t\tassert.strictEqual((localizedManifest.contributes?.configuration as IConfigurationNode).title, 'Test Configuration');\n\t});\n\n\ttest('replaces template strings with fallback if not found in translations', function () {\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifest),\n\t\t\t{},\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category',\n\t\t\t\t'test.authentication.label': 'Test Authentication',\n\t\t\t\t'test.configuration.title': 'Test Configuration',\n\t\t\t}\n\t\t);\n\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].title, 'Test Command');\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].category, 'Test Category');\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, 'Test Authentication');\n\t\tassert.strictEqual((localizedManifest.contributes?.configuration as IConfigurationNode).title, 'Test Configuration');\n\t});\n\n\ttest('replaces template strings - command title & categories become ILocalizedString', function () {\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifest),\n\t\t\t{\n\t\t\t\t'test.command.title': 'Befehl test',\n\t\t\t\t'test.command.category': 'Testkategorie',\n\t\t\t\t'test.authentication.label': 'Testauthentifizierung',\n\t\t\t\t'test.configuration.title': 'Testkonfiguration',\n\t\t\t},\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category',\n\t\t\t\t'test.authentication.label': 'Test Authentication',\n\t\t\t\t'test.configuration.title': 'Test Configuration',\n\t\t\t}\n\t\t);\n\n\t\tconst title = localizedManifest.contributes?.commands?.[0].title as ILocalizedString;\n\t\tconst category = localizedManifest.contributes?.commands?.[0].category as ILocalizedString;\n\t\tassert.strictEqual(title.value, 'Befehl test');\n\t\tassert.strictEqual(title.original, 'Test Command');\n\t\tassert.strictEqual(category.value, 'Testkategorie');\n\t\tassert.strictEqual(category.original, 'Test Category');\n\n\t\t// Everything else stays as a string.\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, 'Testauthentifizierung');\n\t\tassert.strictEqual((localizedManifest.contributes?.configuration as IConfigurationNode).title, 'Testkonfiguration');\n\t});\n\n\ttest('replaces template strings - is best effort #164630', function () {\n\t\tconst manifestWithTypo: IExtensionManifest = {\n\t\t\tname: 'test',\n\t\t\tpublisher: 'test',\n\t\t\tversion: '1.0.0',\n\t\t\tengines: {\n\t\t\t\tvscode: '*'\n\t\t\t},\n\t\t\tcontributes: {\n\t\t\t\tauthentication: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'test.authentication',\n\t\t\t\t\t\t// This not existing in the bundle shouldn't cause an error.\n\t\t\t\t\t\tlabel: '%doesnotexist%',\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tcommands: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcommand: 'test.command',\n\t\t\t\t\t\ttitle: '%test.command.title%',\n\t\t\t\t\t\tcategory: '%test.command.category%'\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t};\n\n\t\tconst localizedManifest = localizeManifest(\n\t\t\tstore.add(new NullLogger()),\n\t\t\tdeepClone(manifestWithTypo),\n\t\t\t{\n\t\t\t\t'test.command.title': 'Test Command',\n\t\t\t\t'test.command.category': 'Test Category'\n\t\t\t});\n\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].title, 'Test Command');\n\t\tassert.strictEqual(localizedManifest.contributes?.commands?.[0].category, 'Test Category');\n\t\tassert.strictEqual(localizedManifest.contributes?.authentication?.[0].label, '%doesnotexist%');\n\t});\n});\n"]}