{"version":3,"sources":["vs/workbench/common/editor/diffEditorInput.ts"],"names":[],"mappings":"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","file":"diffEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../nls.js';\nimport { AbstractSideBySideEditorInputSerializer, SideBySideEditorInput } from './sideBySideEditorInput.js';\nimport { EditorInput, IUntypedEditorOptions } from './editorInput.js';\nimport { EditorModel } from './editorModel.js';\nimport { TEXT_DIFF_EDITOR_ID, BINARY_DIFF_EDITOR_ID, Verbosity, IEditorDescriptor, IEditorPane, IResourceDiffEditorInput, IUntypedEditorInput, isResourceDiffEditorInput, IDiffEditorInput, IResourceSideBySideEditorInput, EditorInputCapabilities } from '../editor.js';\nimport { BaseTextEditorModel } from './textEditorModel.js';\nimport { DiffEditorModel } from './diffEditorModel.js';\nimport { TextDiffEditorModel } from './textDiffEditorModel.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IEditorService } from '../../services/editor/common/editorService.js';\nimport { shorten } from '../../../base/common/labels.js';\nimport { isResolvedEditorModel } from '../../../platform/editor/common/editor.js';\n\ninterface IDiffEditorInputLabels {\n\treadonly name: string;\n\n\treadonly shortDescription: string | undefined;\n\treadonly mediumDescription: string | undefined;\n\treadonly longDescription: string | undefined;\n\n\treadonly forceDescription: boolean;\n\n\treadonly shortTitle: string;\n\treadonly mediumTitle: string;\n\treadonly longTitle: string;\n}\n\n/**\n * The base editor input for the diff editor. It is made up of two editor inputs, the original version\n * and the modified version.\n */\nexport class DiffEditorInput extends SideBySideEditorInput implements IDiffEditorInput {\n\n\tstatic override readonly ID: string = 'workbench.editors.diffEditorInput';\n\n\toverride get typeId(): string {\n\t\treturn DiffEditorInput.ID;\n\t}\n\n\toverride get editorId(): string | undefined {\n\t\treturn this.modified.editorId === this.original.editorId ? this.modified.editorId : undefined;\n\t}\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = super.capabilities;\n\n\t\t// Force description capability depends on labels\n\t\tif (this.labels.forceDescription) {\n\t\t\tcapabilities |= EditorInputCapabilities.ForceDescription;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\tprivate cachedModel: DiffEditorModel | undefined = undefined;\n\n\tprivate readonly labels: IDiffEditorInputLabels;\n\n\tconstructor(\n\t\tpreferredName: string | undefined,\n\t\tpreferredDescription: string | undefined,\n\t\treadonly original: EditorInput,\n\t\treadonly modified: EditorInput,\n\t\tprivate readonly forceOpenAsBinary: boolean | undefined,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(preferredName, preferredDescription, original, modified, editorService);\n\n\t\tthis.labels = this.computeLabels();\n\t}\n\n\tprivate computeLabels(): IDiffEditorInputLabels {\n\n\t\t// Name\n\t\tlet name: string;\n\t\tlet forceDescription = false;\n\t\tif (this.preferredName) {\n\t\t\tname = this.preferredName;\n\t\t} else {\n\t\t\tconst originalName = this.original.getName();\n\t\t\tconst modifiedName = this.modified.getName();\n\n\t\t\tname = localize('sideBySideLabels', \"{0} ↔ {1}\", originalName, modifiedName);\n\n\t\t\t// Enforce description when the names are identical\n\t\t\tforceDescription = originalName === modifiedName;\n\t\t}\n\n\t\t// Description\n\t\tlet shortDescription: string | undefined;\n\t\tlet mediumDescription: string | undefined;\n\t\tlet longDescription: string | undefined;\n\t\tif (this.preferredDescription) {\n\t\t\tshortDescription = this.preferredDescription;\n\t\t\tmediumDescription = this.preferredDescription;\n\t\t\tlongDescription = this.preferredDescription;\n\t\t} else {\n\t\t\tshortDescription = this.computeLabel(this.original.getDescription(Verbosity.SHORT), this.modified.getDescription(Verbosity.SHORT));\n\t\t\tlongDescription = this.computeLabel(this.original.getDescription(Verbosity.LONG), this.modified.getDescription(Verbosity.LONG));\n\n\t\t\t// Medium Description: try to be verbose by computing\n\t\t\t// a label that resembles the difference between the two\n\t\t\tconst originalMediumDescription = this.original.getDescription(Verbosity.MEDIUM);\n\t\t\tconst modifiedMediumDescription = this.modified.getDescription(Verbosity.MEDIUM);\n\t\t\tif (\n\t\t\t\t(typeof originalMediumDescription === 'string' && typeof modifiedMediumDescription === 'string') && // we can only `shorten` when both sides are strings...\n\t\t\t\t(originalMediumDescription || modifiedMediumDescription) \t\t\t\t\t\t\t\t\t\t\t// ...however never when both sides are empty strings\n\t\t\t) {\n\t\t\t\tconst [shortenedOriginalMediumDescription, shortenedModifiedMediumDescription] = shorten([originalMediumDescription, modifiedMediumDescription]);\n\t\t\t\tmediumDescription = this.computeLabel(shortenedOriginalMediumDescription, shortenedModifiedMediumDescription);\n\t\t\t}\n\t\t}\n\n\t\t// Title\n\t\tlet shortTitle = this.computeLabel(this.original.getTitle(Verbosity.SHORT) ?? this.original.getName(), this.modified.getTitle(Verbosity.SHORT) ?? this.modified.getName(), ' ↔ ');\n\t\tlet mediumTitle = this.computeLabel(this.original.getTitle(Verbosity.MEDIUM) ?? this.original.getName(), this.modified.getTitle(Verbosity.MEDIUM) ?? this.modified.getName(), ' ↔ ');\n\t\tlet longTitle = this.computeLabel(this.original.getTitle(Verbosity.LONG) ?? this.original.getName(), this.modified.getTitle(Verbosity.LONG) ?? this.modified.getName(), ' ↔ ');\n\n\t\tconst preferredTitle = this.getPreferredTitle();\n\t\tif (preferredTitle) {\n\t\t\tshortTitle = `${preferredTitle} (${shortTitle})`;\n\t\t\tmediumTitle = `${preferredTitle} (${mediumTitle})`;\n\t\t\tlongTitle = `${preferredTitle} (${longTitle})`;\n\t\t}\n\n\t\treturn { name, shortDescription, mediumDescription, longDescription, forceDescription, shortTitle, mediumTitle, longTitle };\n\t}\n\n\tprivate computeLabel(originalLabel: string, modifiedLabel: string, separator?: string): string;\n\tprivate computeLabel(originalLabel: string | undefined, modifiedLabel: string | undefined, separator?: string): string | undefined;\n\tprivate computeLabel(originalLabel: string | undefined, modifiedLabel: string | undefined, separator = ' - '): string | undefined {\n\t\tif (!originalLabel || !modifiedLabel) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (originalLabel === modifiedLabel) {\n\t\t\treturn modifiedLabel;\n\t\t}\n\n\t\treturn `${originalLabel}${separator}${modifiedLabel}`;\n\t}\n\n\toverride getName(): string {\n\t\treturn this.labels.name;\n\t}\n\n\toverride getDescription(verbosity = Verbosity.MEDIUM): string | undefined {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.labels.shortDescription;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.labels.longDescription;\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\tdefault:\n\t\t\t\treturn this.labels.mediumDescription;\n\t\t}\n\t}\n\n\toverride getTitle(verbosity?: Verbosity): string {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.labels.shortTitle;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.labels.longTitle;\n\t\t\tdefault:\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\t\treturn this.labels.mediumTitle;\n\t\t}\n\t}\n\n\toverride async resolve(): Promise<EditorModel> {\n\n\t\t// Create Model - we never reuse our cached model if refresh is true because we cannot\n\t\t// decide for the inputs within if the cached model can be reused or not. There may be\n\t\t// inputs that need to be loaded again and thus we always recreate the model and dispose\n\t\t// the previous one - if any.\n\t\tconst resolvedModel = await this.createModel();\n\t\tthis.cachedModel?.dispose();\n\n\t\tthis.cachedModel = resolvedModel;\n\n\t\treturn this.cachedModel;\n\t}\n\n\toverride prefersEditorPane<T extends IEditorDescriptor<IEditorPane>>(editorPanes: T[]): T | undefined {\n\t\tif (this.forceOpenAsBinary) {\n\t\t\treturn editorPanes.find(editorPane => editorPane.typeId === BINARY_DIFF_EDITOR_ID);\n\t\t}\n\n\t\treturn editorPanes.find(editorPane => editorPane.typeId === TEXT_DIFF_EDITOR_ID);\n\t}\n\n\tprivate async createModel(): Promise<DiffEditorModel> {\n\n\t\t// Join resolve call over two inputs and build diff editor model\n\t\tconst [originalEditorModel, modifiedEditorModel] = await Promise.all([\n\t\t\tthis.original.resolve(),\n\t\t\tthis.modified.resolve()\n\t\t]);\n\n\t\t// If both are text models, return textdiffeditor model\n\t\tif (modifiedEditorModel instanceof BaseTextEditorModel && originalEditorModel instanceof BaseTextEditorModel) {\n\t\t\treturn new TextDiffEditorModel(originalEditorModel, modifiedEditorModel);\n\t\t}\n\n\t\t// Otherwise return normal diff model\n\t\treturn new DiffEditorModel(isResolvedEditorModel(originalEditorModel) ? originalEditorModel : undefined, isResolvedEditorModel(modifiedEditorModel) ? modifiedEditorModel : undefined);\n\t}\n\n\toverride toUntyped(options?: IUntypedEditorOptions): (IResourceDiffEditorInput & IResourceSideBySideEditorInput) | undefined {\n\t\tconst untyped = super.toUntyped(options);\n\t\tif (untyped) {\n\t\t\treturn {\n\t\t\t\t...untyped,\n\t\t\t\tmodified: untyped.primary,\n\t\t\t\toriginal: untyped.secondary\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (this === otherInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherInput instanceof DiffEditorInput) {\n\t\t\treturn this.modified.matches(otherInput.modified) && this.original.matches(otherInput.original) && otherInput.forceOpenAsBinary === this.forceOpenAsBinary;\n\t\t}\n\n\t\tif (isResourceDiffEditorInput(otherInput)) {\n\t\t\treturn this.modified.matches(otherInput.modified) && this.original.matches(otherInput.original);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose(): void {\n\n\t\t// Free the diff editor model but do not propagate the dispose() call to the two inputs\n\t\t// We never created the two inputs (original and modified) so we can not dispose\n\t\t// them without sideeffects.\n\t\tif (this.cachedModel) {\n\t\t\tthis.cachedModel.dispose();\n\t\t\tthis.cachedModel = undefined;\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class DiffEditorInputSerializer extends AbstractSideBySideEditorInputSerializer {\n\n\tprotected createEditorInput(instantiationService: IInstantiationService, name: string | undefined, description: string | undefined, secondaryInput: EditorInput, primaryInput: EditorInput): EditorInput {\n\t\treturn instantiationService.createInstance(DiffEditorInput, name, description, secondaryInput, primaryInput, undefined);\n\t}\n}\n"]}