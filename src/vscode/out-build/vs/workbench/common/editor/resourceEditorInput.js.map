{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/common/editor/resourceEditorInput.ts","vs/workbench/common/editor/resourceEditorInput.ts"],"names":[],"mappings":"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","file":"resourceEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Verbosity, EditorInputWithPreferredResource, EditorInputCapabilities, IFileLimitedEditorInputOptions } from '../editor.js';\nimport { EditorInput } from './editorInput.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ByteSize, IFileReadLimits, IFileService, getLargeFileConfirmationLimit } from '../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { dirname, isEqual } from '../../../base/common/resources.js';\nimport { IFilesConfigurationService } from '../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { isConfigured } from '../../../platform/configuration/common/configuration.js';\nimport { ITextResourceConfigurationService } from '../../../editor/common/services/textResourceConfiguration.js';\nimport { ICustomEditorLabelService } from '../../services/editor/common/customEditorLabelService.js';\n\n/**\n * The base class for all editor inputs that open resources.\n */\nexport abstract class AbstractResourceEditorInput extends EditorInput implements EditorInputWithPreferredResource {\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = EditorInputCapabilities.CanSplitInGroup;\n\n\t\tif (this.fileService.hasProvider(this.resource)) {\n\t\t\tif (this.filesConfigurationService.isReadonly(this.resource)) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t} else {\n\t\t\tcapabilities |= EditorInputCapabilities.Untitled;\n\t\t}\n\n\t\tif (!(capabilities & EditorInputCapabilities.Readonly)) {\n\t\t\tcapabilities |= EditorInputCapabilities.CanDropIntoEditor;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\tprivate _preferredResource: URI;\n\tget preferredResource(): URI { return this._preferredResource; }\n\n\tconstructor(\n\t\treadonly resource: URI,\n\t\tpreferredResource: URI | undefined,\n\t\t@ILabelService protected readonly labelService: ILabelService,\n\t\t@IFileService protected readonly fileService: IFileService,\n\t\t@IFilesConfigurationService protected readonly filesConfigurationService: IFilesConfigurationService,\n\t\t@ITextResourceConfigurationService protected readonly textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@ICustomEditorLabelService protected readonly customEditorLabelService: ICustomEditorLabelService\n\t) {\n\t\tsuper();\n\n\t\tthis._preferredResource = preferredResource || resource;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Clear our labels on certain label related events\n\t\tthis._register(this.labelService.onDidChangeFormatters(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.fileService.onDidChangeFileSystemProviderRegistrations(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.fileService.onDidChangeFileSystemProviderCapabilities(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.customEditorLabelService.onDidChange(() => this.updateLabel()));\n\t\tthis._register(this.filesConfigurationService.onDidChangeReadonly(() => this._onDidChangeCapabilities.fire()));\n\t}\n\n\tprivate onLabelEvent(scheme: string): void {\n\t\tif (scheme === this._preferredResource.scheme) {\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\tprivate updateLabel(): void {\n\n\t\t// Clear any cached labels from before\n\t\tthis._name = undefined;\n\t\tthis._shortDescription = undefined;\n\t\tthis._mediumDescription = undefined;\n\t\tthis._longDescription = undefined;\n\t\tthis._shortTitle = undefined;\n\t\tthis._mediumTitle = undefined;\n\t\tthis._longTitle = undefined;\n\n\t\t// Trigger recompute of label\n\t\tthis._onDidChangeLabel.fire();\n\t}\n\n\tsetPreferredResource(preferredResource: URI): void {\n\t\tif (!isEqual(preferredResource, this._preferredResource)) {\n\t\t\tthis._preferredResource = preferredResource;\n\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\tprivate _name: string | undefined = undefined;\n\toverride getName(): string {\n\t\tif (typeof this._name !== 'string') {\n\t\t\tthis._name = this.customEditorLabelService.getName(this._preferredResource) ?? this.labelService.getUriBasenameLabel(this._preferredResource);\n\t\t}\n\n\t\treturn this._name;\n\t}\n\n\toverride getDescription(verbosity = Verbosity.MEDIUM): string | undefined {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.shortDescription;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.longDescription;\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\tdefault:\n\t\t\t\treturn this.mediumDescription;\n\t\t}\n\t}\n\n\tprivate _shortDescription: string | undefined = undefined;\n\tprivate get shortDescription(): string {\n\t\tif (typeof this._shortDescription !== 'string') {\n\t\t\tthis._shortDescription = this.labelService.getUriBasenameLabel(dirname(this._preferredResource));\n\t\t}\n\n\t\treturn this._shortDescription;\n\t}\n\n\tprivate _mediumDescription: string | undefined = undefined;\n\tprivate get mediumDescription(): string {\n\t\tif (typeof this._mediumDescription !== 'string') {\n\t\t\tthis._mediumDescription = this.labelService.getUriLabel(dirname(this._preferredResource), { relative: true });\n\t\t}\n\n\t\treturn this._mediumDescription;\n\t}\n\n\tprivate _longDescription: string | undefined = undefined;\n\tprivate get longDescription(): string {\n\t\tif (typeof this._longDescription !== 'string') {\n\t\t\tthis._longDescription = this.labelService.getUriLabel(dirname(this._preferredResource));\n\t\t}\n\n\t\treturn this._longDescription;\n\t}\n\n\tprivate _shortTitle: string | undefined = undefined;\n\tprivate get shortTitle(): string {\n\t\tif (typeof this._shortTitle !== 'string') {\n\t\t\tthis._shortTitle = this.getName();\n\t\t}\n\n\t\treturn this._shortTitle;\n\t}\n\n\tprivate _mediumTitle: string | undefined = undefined;\n\tprivate get mediumTitle(): string {\n\t\tif (typeof this._mediumTitle !== 'string') {\n\t\t\tthis._mediumTitle = this.labelService.getUriLabel(this._preferredResource, { relative: true });\n\t\t}\n\n\t\treturn this._mediumTitle;\n\t}\n\n\tprivate _longTitle: string | undefined = undefined;\n\tprivate get longTitle(): string {\n\t\tif (typeof this._longTitle !== 'string') {\n\t\t\tthis._longTitle = this.labelService.getUriLabel(this._preferredResource);\n\t\t}\n\n\t\treturn this._longTitle;\n\t}\n\n\toverride getTitle(verbosity?: Verbosity): string {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.shortTitle;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.longTitle;\n\t\t\tdefault:\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\t\treturn this.mediumTitle;\n\t\t}\n\t}\n\n\toverride isReadonly(): boolean | IMarkdownString {\n\t\treturn this.filesConfigurationService.isReadonly(this.resource);\n\t}\n\n\tprotected ensureLimits(options?: IFileLimitedEditorInputOptions): IFileReadLimits | undefined {\n\t\tif (options?.limits) {\n\t\t\treturn options.limits; // respect passed in limits if any\n\t\t}\n\n\t\t// We want to determine the large file configuration based on the best defaults\n\t\t// for the resource but also respecting user settings. We only apply user settings\n\t\t// if explicitly configured by the user. Otherwise we pick the best limit for the\n\t\t// resource scheme.\n\n\t\tconst defaultSizeLimit = getLargeFileConfirmationLimit(this.resource);\n\t\tlet configuredSizeLimit: number | undefined;\n\n\t\tconst configuredSizeLimitMb = this.textResourceConfigurationService.inspect<number>(this.resource, null, 'workbench.editorLargeFileConfirmation');\n\t\tif (isConfigured(configuredSizeLimitMb)) {\n\t\t\tconfiguredSizeLimit = configuredSizeLimitMb.value * ByteSize.MB; // normalize to MB\n\t\t}\n\n\t\treturn {\n\t\t\tsize: configuredSizeLimit ?? defaultSizeLimit\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Verbosity, EditorInputWithPreferredResource, EditorInputCapabilities, IFileLimitedEditorInputOptions } from '../editor.js';\nimport { EditorInput } from './editorInput.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ByteSize, IFileReadLimits, IFileService, getLargeFileConfirmationLimit } from '../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { dirname, isEqual } from '../../../base/common/resources.js';\nimport { IFilesConfigurationService } from '../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { isConfigured } from '../../../platform/configuration/common/configuration.js';\nimport { ITextResourceConfigurationService } from '../../../editor/common/services/textResourceConfiguration.js';\nimport { ICustomEditorLabelService } from '../../services/editor/common/customEditorLabelService.js';\n\n/**\n * The base class for all editor inputs that open resources.\n */\nexport abstract class AbstractResourceEditorInput extends EditorInput implements EditorInputWithPreferredResource {\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = EditorInputCapabilities.CanSplitInGroup;\n\n\t\tif (this.fileService.hasProvider(this.resource)) {\n\t\t\tif (this.filesConfigurationService.isReadonly(this.resource)) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t} else {\n\t\t\tcapabilities |= EditorInputCapabilities.Untitled;\n\t\t}\n\n\t\tif (!(capabilities & EditorInputCapabilities.Readonly)) {\n\t\t\tcapabilities |= EditorInputCapabilities.CanDropIntoEditor;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\tprivate _preferredResource: URI;\n\tget preferredResource(): URI { return this._preferredResource; }\n\n\tconstructor(\n\t\treadonly resource: URI,\n\t\tpreferredResource: URI | undefined,\n\t\t@ILabelService protected readonly labelService: ILabelService,\n\t\t@IFileService protected readonly fileService: IFileService,\n\t\t@IFilesConfigurationService protected readonly filesConfigurationService: IFilesConfigurationService,\n\t\t@ITextResourceConfigurationService protected readonly textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@ICustomEditorLabelService protected readonly customEditorLabelService: ICustomEditorLabelService\n\t) {\n\t\tsuper();\n\n\t\tthis._preferredResource = preferredResource || resource;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Clear our labels on certain label related events\n\t\tthis._register(this.labelService.onDidChangeFormatters(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.fileService.onDidChangeFileSystemProviderRegistrations(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.fileService.onDidChangeFileSystemProviderCapabilities(e => this.onLabelEvent(e.scheme)));\n\t\tthis._register(this.customEditorLabelService.onDidChange(() => this.updateLabel()));\n\t\tthis._register(this.filesConfigurationService.onDidChangeReadonly(() => this._onDidChangeCapabilities.fire()));\n\t}\n\n\tprivate onLabelEvent(scheme: string): void {\n\t\tif (scheme === this._preferredResource.scheme) {\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\tprivate updateLabel(): void {\n\n\t\t// Clear any cached labels from before\n\t\tthis._name = undefined;\n\t\tthis._shortDescription = undefined;\n\t\tthis._mediumDescription = undefined;\n\t\tthis._longDescription = undefined;\n\t\tthis._shortTitle = undefined;\n\t\tthis._mediumTitle = undefined;\n\t\tthis._longTitle = undefined;\n\n\t\t// Trigger recompute of label\n\t\tthis._onDidChangeLabel.fire();\n\t}\n\n\tsetPreferredResource(preferredResource: URI): void {\n\t\tif (!isEqual(preferredResource, this._preferredResource)) {\n\t\t\tthis._preferredResource = preferredResource;\n\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\tprivate _name: string | undefined = undefined;\n\toverride getName(): string {\n\t\tif (typeof this._name !== 'string') {\n\t\t\tthis._name = this.customEditorLabelService.getName(this._preferredResource) ?? this.labelService.getUriBasenameLabel(this._preferredResource);\n\t\t}\n\n\t\treturn this._name;\n\t}\n\n\toverride getDescription(verbosity = Verbosity.MEDIUM): string | undefined {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.shortDescription;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.longDescription;\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\tdefault:\n\t\t\t\treturn this.mediumDescription;\n\t\t}\n\t}\n\n\tprivate _shortDescription: string | undefined = undefined;\n\tprivate get shortDescription(): string {\n\t\tif (typeof this._shortDescription !== 'string') {\n\t\t\tthis._shortDescription = this.labelService.getUriBasenameLabel(dirname(this._preferredResource));\n\t\t}\n\n\t\treturn this._shortDescription;\n\t}\n\n\tprivate _mediumDescription: string | undefined = undefined;\n\tprivate get mediumDescription(): string {\n\t\tif (typeof this._mediumDescription !== 'string') {\n\t\t\tthis._mediumDescription = this.labelService.getUriLabel(dirname(this._preferredResource), { relative: true });\n\t\t}\n\n\t\treturn this._mediumDescription;\n\t}\n\n\tprivate _longDescription: string | undefined = undefined;\n\tprivate get longDescription(): string {\n\t\tif (typeof this._longDescription !== 'string') {\n\t\t\tthis._longDescription = this.labelService.getUriLabel(dirname(this._preferredResource));\n\t\t}\n\n\t\treturn this._longDescription;\n\t}\n\n\tprivate _shortTitle: string | undefined = undefined;\n\tprivate get shortTitle(): string {\n\t\tif (typeof this._shortTitle !== 'string') {\n\t\t\tthis._shortTitle = this.getName();\n\t\t}\n\n\t\treturn this._shortTitle;\n\t}\n\n\tprivate _mediumTitle: string | undefined = undefined;\n\tprivate get mediumTitle(): string {\n\t\tif (typeof this._mediumTitle !== 'string') {\n\t\t\tthis._mediumTitle = this.labelService.getUriLabel(this._preferredResource, { relative: true });\n\t\t}\n\n\t\treturn this._mediumTitle;\n\t}\n\n\tprivate _longTitle: string | undefined = undefined;\n\tprivate get longTitle(): string {\n\t\tif (typeof this._longTitle !== 'string') {\n\t\t\tthis._longTitle = this.labelService.getUriLabel(this._preferredResource);\n\t\t}\n\n\t\treturn this._longTitle;\n\t}\n\n\toverride getTitle(verbosity?: Verbosity): string {\n\t\tswitch (verbosity) {\n\t\t\tcase Verbosity.SHORT:\n\t\t\t\treturn this.shortTitle;\n\t\t\tcase Verbosity.LONG:\n\t\t\t\treturn this.longTitle;\n\t\t\tdefault:\n\t\t\tcase Verbosity.MEDIUM:\n\t\t\t\treturn this.mediumTitle;\n\t\t}\n\t}\n\n\toverride isReadonly(): boolean | IMarkdownString {\n\t\treturn this.filesConfigurationService.isReadonly(this.resource);\n\t}\n\n\tprotected ensureLimits(options?: IFileLimitedEditorInputOptions): IFileReadLimits | undefined {\n\t\tif (options?.limits) {\n\t\t\treturn options.limits; // respect passed in limits if any\n\t\t}\n\n\t\t// We want to determine the large file configuration based on the best defaults\n\t\t// for the resource but also respecting user settings. We only apply user settings\n\t\t// if explicitly configured by the user. Otherwise we pick the best limit for the\n\t\t// resource scheme.\n\n\t\tconst defaultSizeLimit = getLargeFileConfirmationLimit(this.resource);\n\t\tlet configuredSizeLimit: number | undefined;\n\n\t\tconst configuredSizeLimitMb = this.textResourceConfigurationService.inspect<number>(this.resource, null, 'workbench.editorLargeFileConfirmation');\n\t\tif (isConfigured(configuredSizeLimitMb)) {\n\t\t\tconfiguredSizeLimit = configuredSizeLimitMb.value * ByteSize.MB; // normalize to MB\n\t\t}\n\n\t\treturn {\n\t\t\tsize: configuredSizeLimit ?? defaultSizeLimit\n\t\t};\n\t}\n}\n"]}