{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/test/browser/mainThreadDocumentsAndEditors.test.ts","vs/workbench/api/test/browser/mainThreadDocumentsAndEditors.test.ts"],"names":[],"mappings":"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","file":"mainThreadDocumentsAndEditors.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { MainThreadDocumentsAndEditors } from '../../browser/mainThreadDocumentsAndEditors.js';\nimport { SingleProxyRPCProtocol } from '../common/testRPCProtocol.js';\nimport { TestConfigurationService } from '../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ModelService } from '../../../../editor/common/services/modelService.js';\nimport { TestCodeEditorService } from '../../../../editor/test/browser/editorTestServices.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { IDocumentsAndEditorsDelta } from '../../common/extHost.protocol.js';\nimport { createTestCodeEditor, ITestCodeEditor } from '../../../../editor/test/browser/testCodeEditor.js';\nimport { mock } from '../../../../base/test/common/mock.js';\nimport { TestEditorService, TestEditorGroupsService, TestEnvironmentService, TestPathService } from '../../../test/browser/workbenchTestServices.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { TestThemeService } from '../../../../platform/theme/test/common/testThemeService.js';\nimport { UndoRedoService } from '../../../../platform/undoRedo/common/undoRedoService.js';\nimport { TestDialogService } from '../../../../platform/dialogs/test/common/testDialogService.js';\nimport { TestNotificationService } from '../../../../platform/notification/test/common/testNotificationService.js';\nimport { TestTextResourcePropertiesService, TestWorkingCopyFileService } from '../../../test/common/workbenchTestServices.js';\nimport { UriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { TextModel } from '../../../../editor/common/model/textModel.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { TestInstantiationService } from '../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { LanguageService } from '../../../../editor/common/services/languageService.js';\nimport { ILanguageConfigurationService } from '../../../../editor/common/languages/languageConfigurationRegistry.js';\nimport { TestLanguageConfigurationService } from '../../../../editor/test/common/modes/testLanguageConfigurationService.js';\nimport { IUndoRedoService } from '../../../../platform/undoRedo/common/undoRedo.js';\nimport { IQuickDiffModelService } from '../../../contrib/scm/browser/quickDiffModel.js';\nimport { ITextEditorDiffInformation } from '../../../../platform/editor/common/editor.js';\nimport { ITreeSitterLibraryService } from '../../../../editor/common/services/treeSitter/treeSitterLibraryService.js';\nimport { TestTreeSitterLibraryService } from '../../../../editor/test/common/services/testTreeSitterLibraryService.js';\n\nsuite('MainThreadDocumentsAndEditors', () => {\n\n\tlet disposables: DisposableStore;\n\n\tlet modelService: ModelService;\n\tlet codeEditorService: TestCodeEditorService;\n\tlet textFileService: ITextFileService;\n\tconst deltas: IDocumentsAndEditorsDelta[] = [];\n\n\tfunction myCreateTestCodeEditor(model: ITextModel | undefined): ITestCodeEditor {\n\t\treturn createTestCodeEditor(model, {\n\t\t\thasTextFocus: false,\n\t\t\tserviceCollection: new ServiceCollection(\n\t\t\t\t[ICodeEditorService, codeEditorService]\n\t\t\t)\n\t\t});\n\t}\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\n\t\tdeltas.length = 0;\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('editor', { 'detectIndentation': false });\n\t\tconst dialogService = new TestDialogService();\n\t\tconst notificationService = new TestNotificationService();\n\t\tconst undoRedoService = new UndoRedoService(dialogService, notificationService);\n\t\tconst themeService = new TestThemeService();\n\t\tconst instantiationService = new TestInstantiationService();\n\t\tinstantiationService.set(ILanguageService, disposables.add(new LanguageService()));\n\t\tinstantiationService.set(ILanguageConfigurationService, new TestLanguageConfigurationService());\n\t\tinstantiationService.set(ITreeSitterLibraryService, new TestTreeSitterLibraryService());\n\t\tinstantiationService.set(IUndoRedoService, undoRedoService);\n\t\tmodelService = new ModelService(\n\t\t\tconfigService,\n\t\t\tnew TestTextResourcePropertiesService(configService),\n\t\t\tundoRedoService,\n\t\t\tinstantiationService\n\t\t);\n\t\tcodeEditorService = new TestCodeEditorService(themeService);\n\t\ttextFileService = new class extends mock<ITextFileService>() {\n\t\t\toverride isDirty() { return false; }\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\toverride files = <any>{\n\t\t\t\tonDidSave: Event.None,\n\t\t\t\tonDidRevert: Event.None,\n\t\t\t\tonDidChangeDirty: Event.None,\n\t\t\t\tonDidChangeEncoding: Event.None\n\t\t\t};\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\toverride untitled = <any>{\n\t\t\t\tonDidChangeEncoding: Event.None\n\t\t\t};\n\t\t\toverride getEncoding() { return 'utf8'; }\n\t\t};\n\t\tconst workbenchEditorService = disposables.add(new TestEditorService());\n\t\tconst editorGroupService = new TestEditorGroupsService();\n\n\t\tconst fileService = new class extends mock<IFileService>() {\n\t\t\toverride onDidRunOperation = Event.None;\n\t\t\toverride onDidChangeFileSystemProviderCapabilities = Event.None;\n\t\t\toverride onDidChangeFileSystemProviderRegistrations = Event.None;\n\t\t};\n\n\t\tnew MainThreadDocumentsAndEditors(\n\t\t\tSingleProxyRPCProtocol({\n\t\t\t\t$acceptDocumentsAndEditorsDelta: (delta: IDocumentsAndEditorsDelta) => { deltas.push(delta); },\n\t\t\t\t$acceptEditorDiffInformation: (id: string, diffInformation: ITextEditorDiffInformation | undefined) => { }\n\t\t\t}),\n\t\t\tmodelService,\n\t\t\ttextFileService,\n\t\t\tworkbenchEditorService,\n\t\t\tcodeEditorService,\n\t\t\tfileService,\n\t\t\tnull!,\n\t\t\teditorGroupService,\n\t\t\tnew class extends mock<IPaneCompositePartService>() implements IPaneCompositePartService {\n\t\t\t\toverride onDidPaneCompositeOpen = Event.None;\n\t\t\t\toverride onDidPaneCompositeClose = Event.None;\n\t\t\t\toverride getActivePaneComposite() {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t},\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestWorkingCopyFileService(),\n\t\t\tnew UriIdentityService(fileService),\n\t\t\tnew class extends mock<IClipboardService>() {\n\t\t\t\toverride readText() {\n\t\t\t\t\treturn Promise.resolve('clipboard_contents');\n\t\t\t\t}\n\t\t\t},\n\t\t\tnew TestPathService(),\n\t\t\tnew TestConfigurationService(),\n\t\t\tnew class extends mock<IQuickDiffModelService>() {\n\t\t\t\toverride createQuickDiffModelReference() {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Model#add', () => {\n\t\tdeltas.length = 0;\n\n\t\tdisposables.add(modelService.createModel('farboo', null));\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\n\t\tassert.strictEqual(delta.addedDocuments!.length, 1);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t\tassert.strictEqual(delta.newActiveEditor, undefined);\n\t});\n\n\ttest('ignore huge model', function () {\n\n\t\tconst oldLimit = TextModel._MODEL_SYNC_LIMIT;\n\t\ttry {\n\t\t\tconst largeModelString = 'abc'.repeat(1024);\n\t\t\tTextModel._MODEL_SYNC_LIMIT = largeModelString.length / 2;\n\n\t\t\tconst model = modelService.createModel(largeModelString, null);\n\t\t\tdisposables.add(model);\n\t\t\tassert.ok(model.isTooLargeForSyncing());\n\n\t\t\tassert.strictEqual(deltas.length, 1);\n\t\t\tconst [delta] = deltas;\n\t\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\t\tassert.strictEqual(delta.removedEditors, undefined);\n\n\t\t} finally {\n\t\t\tTextModel._MODEL_SYNC_LIMIT = oldLimit;\n\t\t}\n\t});\n\n\ttest('ignore huge model from editor', function () {\n\n\t\tconst oldLimit = TextModel._MODEL_SYNC_LIMIT;\n\t\ttry {\n\t\t\tconst largeModelString = 'abc'.repeat(1024);\n\t\t\tTextModel._MODEL_SYNC_LIMIT = largeModelString.length / 2;\n\n\t\t\tconst model = modelService.createModel(largeModelString, null);\n\t\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\t\tassert.strictEqual(deltas.length, 1);\n\t\t\tdeltas.length = 0;\n\t\t\tassert.strictEqual(deltas.length, 0);\n\t\t\teditor.dispose();\n\t\t\tmodel.dispose();\n\n\t\t} finally {\n\t\t\tTextModel._MODEL_SYNC_LIMIT = oldLimit;\n\t\t}\n\t});\n\n\ttest('ignore simple widget model', function () {\n\t\tthis.timeout(1000 * 60); // increase timeout for this one test\n\n\t\tconst model = modelService.createModel('test', null, undefined, true);\n\t\tdisposables.add(model);\n\t\tassert.ok(model.isForSimpleWidget);\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t});\n\n\ttest('ignore editor w/o model', () => {\n\t\tconst editor = myCreateTestCodeEditor(undefined);\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\n\t\teditor.dispose();\n\t});\n\n\ttest('editor with model', () => {\n\t\tdeltas.length = 0;\n\n\t\tconst model = modelService.createModel('farboo', null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\tassert.strictEqual(deltas.length, 2);\n\t\tconst [first, second] = deltas;\n\t\tassert.strictEqual(first.addedDocuments!.length, 1);\n\t\tassert.strictEqual(first.newActiveEditor, undefined);\n\t\tassert.strictEqual(first.removedDocuments, undefined);\n\t\tassert.strictEqual(first.addedEditors, undefined);\n\t\tassert.strictEqual(first.removedEditors, undefined);\n\n\t\tassert.strictEqual(second.addedEditors!.length, 1);\n\t\tassert.strictEqual(second.addedDocuments, undefined);\n\t\tassert.strictEqual(second.removedDocuments, undefined);\n\t\tassert.strictEqual(second.removedEditors, undefined);\n\t\tassert.strictEqual(second.newActiveEditor, undefined);\n\n\t\teditor.dispose();\n\t\tmodel.dispose();\n\t});\n\n\ttest('editor with dispos-ed/-ing model', () => {\n\t\tconst model = modelService.createModel('farboo', null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\t// ignore things until now\n\t\tdeltas.length = 0;\n\n\t\tmodelService.destroyModel(model.uri);\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [first] = deltas;\n\n\t\tassert.strictEqual(first.newActiveEditor, undefined);\n\t\tassert.strictEqual(first.removedEditors!.length, 1);\n\t\tassert.strictEqual(first.removedDocuments!.length, 1);\n\t\tassert.strictEqual(first.addedDocuments, undefined);\n\t\tassert.strictEqual(first.addedEditors, undefined);\n\n\t\teditor.dispose();\n\t\tmodel.dispose();\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { MainThreadDocumentsAndEditors } from '../../browser/mainThreadDocumentsAndEditors.js';\nimport { SingleProxyRPCProtocol } from '../common/testRPCProtocol.js';\nimport { TestConfigurationService } from '../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ModelService } from '../../../../editor/common/services/modelService.js';\nimport { TestCodeEditorService } from '../../../../editor/test/browser/editorTestServices.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { IDocumentsAndEditorsDelta } from '../../common/extHost.protocol.js';\nimport { createTestCodeEditor, ITestCodeEditor } from '../../../../editor/test/browser/testCodeEditor.js';\nimport { mock } from '../../../../base/test/common/mock.js';\nimport { TestEditorService, TestEditorGroupsService, TestEnvironmentService, TestPathService } from '../../../test/browser/workbenchTestServices.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { TestThemeService } from '../../../../platform/theme/test/common/testThemeService.js';\nimport { UndoRedoService } from '../../../../platform/undoRedo/common/undoRedoService.js';\nimport { TestDialogService } from '../../../../platform/dialogs/test/common/testDialogService.js';\nimport { TestNotificationService } from '../../../../platform/notification/test/common/testNotificationService.js';\nimport { TestTextResourcePropertiesService, TestWorkingCopyFileService } from '../../../test/common/workbenchTestServices.js';\nimport { UriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { TextModel } from '../../../../editor/common/model/textModel.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { TestInstantiationService } from '../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { LanguageService } from '../../../../editor/common/services/languageService.js';\nimport { ILanguageConfigurationService } from '../../../../editor/common/languages/languageConfigurationRegistry.js';\nimport { TestLanguageConfigurationService } from '../../../../editor/test/common/modes/testLanguageConfigurationService.js';\nimport { IUndoRedoService } from '../../../../platform/undoRedo/common/undoRedo.js';\nimport { IQuickDiffModelService } from '../../../contrib/scm/browser/quickDiffModel.js';\nimport { ITextEditorDiffInformation } from '../../../../platform/editor/common/editor.js';\nimport { ITreeSitterLibraryService } from '../../../../editor/common/services/treeSitter/treeSitterLibraryService.js';\nimport { TestTreeSitterLibraryService } from '../../../../editor/test/common/services/testTreeSitterLibraryService.js';\n\nsuite('MainThreadDocumentsAndEditors', () => {\n\n\tlet disposables: DisposableStore;\n\n\tlet modelService: ModelService;\n\tlet codeEditorService: TestCodeEditorService;\n\tlet textFileService: ITextFileService;\n\tconst deltas: IDocumentsAndEditorsDelta[] = [];\n\n\tfunction myCreateTestCodeEditor(model: ITextModel | undefined): ITestCodeEditor {\n\t\treturn createTestCodeEditor(model, {\n\t\t\thasTextFocus: false,\n\t\t\tserviceCollection: new ServiceCollection(\n\t\t\t\t[ICodeEditorService, codeEditorService]\n\t\t\t)\n\t\t});\n\t}\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\n\t\tdeltas.length = 0;\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('editor', { 'detectIndentation': false });\n\t\tconst dialogService = new TestDialogService();\n\t\tconst notificationService = new TestNotificationService();\n\t\tconst undoRedoService = new UndoRedoService(dialogService, notificationService);\n\t\tconst themeService = new TestThemeService();\n\t\tconst instantiationService = new TestInstantiationService();\n\t\tinstantiationService.set(ILanguageService, disposables.add(new LanguageService()));\n\t\tinstantiationService.set(ILanguageConfigurationService, new TestLanguageConfigurationService());\n\t\tinstantiationService.set(ITreeSitterLibraryService, new TestTreeSitterLibraryService());\n\t\tinstantiationService.set(IUndoRedoService, undoRedoService);\n\t\tmodelService = new ModelService(\n\t\t\tconfigService,\n\t\t\tnew TestTextResourcePropertiesService(configService),\n\t\t\tundoRedoService,\n\t\t\tinstantiationService\n\t\t);\n\t\tcodeEditorService = new TestCodeEditorService(themeService);\n\t\ttextFileService = new class extends mock<ITextFileService>() {\n\t\t\toverride isDirty() { return false; }\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\toverride files = <any>{\n\t\t\t\tonDidSave: Event.None,\n\t\t\t\tonDidRevert: Event.None,\n\t\t\t\tonDidChangeDirty: Event.None,\n\t\t\t\tonDidChangeEncoding: Event.None\n\t\t\t};\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\toverride untitled = <any>{\n\t\t\t\tonDidChangeEncoding: Event.None\n\t\t\t};\n\t\t\toverride getEncoding() { return 'utf8'; }\n\t\t};\n\t\tconst workbenchEditorService = disposables.add(new TestEditorService());\n\t\tconst editorGroupService = new TestEditorGroupsService();\n\n\t\tconst fileService = new class extends mock<IFileService>() {\n\t\t\toverride onDidRunOperation = Event.None;\n\t\t\toverride onDidChangeFileSystemProviderCapabilities = Event.None;\n\t\t\toverride onDidChangeFileSystemProviderRegistrations = Event.None;\n\t\t};\n\n\t\tnew MainThreadDocumentsAndEditors(\n\t\t\tSingleProxyRPCProtocol({\n\t\t\t\t$acceptDocumentsAndEditorsDelta: (delta: IDocumentsAndEditorsDelta) => { deltas.push(delta); },\n\t\t\t\t$acceptEditorDiffInformation: (id: string, diffInformation: ITextEditorDiffInformation | undefined) => { }\n\t\t\t}),\n\t\t\tmodelService,\n\t\t\ttextFileService,\n\t\t\tworkbenchEditorService,\n\t\t\tcodeEditorService,\n\t\t\tfileService,\n\t\t\tnull!,\n\t\t\teditorGroupService,\n\t\t\tnew class extends mock<IPaneCompositePartService>() implements IPaneCompositePartService {\n\t\t\t\toverride onDidPaneCompositeOpen = Event.None;\n\t\t\t\toverride onDidPaneCompositeClose = Event.None;\n\t\t\t\toverride getActivePaneComposite() {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t},\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestWorkingCopyFileService(),\n\t\t\tnew UriIdentityService(fileService),\n\t\t\tnew class extends mock<IClipboardService>() {\n\t\t\t\toverride readText() {\n\t\t\t\t\treturn Promise.resolve('clipboard_contents');\n\t\t\t\t}\n\t\t\t},\n\t\t\tnew TestPathService(),\n\t\t\tnew TestConfigurationService(),\n\t\t\tnew class extends mock<IQuickDiffModelService>() {\n\t\t\t\toverride createQuickDiffModelReference() {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Model#add', () => {\n\t\tdeltas.length = 0;\n\n\t\tdisposables.add(modelService.createModel('farboo', null));\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\n\t\tassert.strictEqual(delta.addedDocuments!.length, 1);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t\tassert.strictEqual(delta.newActiveEditor, undefined);\n\t});\n\n\ttest('ignore huge model', function () {\n\n\t\tconst oldLimit = TextModel._MODEL_SYNC_LIMIT;\n\t\ttry {\n\t\t\tconst largeModelString = 'abc'.repeat(1024);\n\t\t\tTextModel._MODEL_SYNC_LIMIT = largeModelString.length / 2;\n\n\t\t\tconst model = modelService.createModel(largeModelString, null);\n\t\t\tdisposables.add(model);\n\t\t\tassert.ok(model.isTooLargeForSyncing());\n\n\t\t\tassert.strictEqual(deltas.length, 1);\n\t\t\tconst [delta] = deltas;\n\t\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\t\tassert.strictEqual(delta.removedEditors, undefined);\n\n\t\t} finally {\n\t\t\tTextModel._MODEL_SYNC_LIMIT = oldLimit;\n\t\t}\n\t});\n\n\ttest('ignore huge model from editor', function () {\n\n\t\tconst oldLimit = TextModel._MODEL_SYNC_LIMIT;\n\t\ttry {\n\t\t\tconst largeModelString = 'abc'.repeat(1024);\n\t\t\tTextModel._MODEL_SYNC_LIMIT = largeModelString.length / 2;\n\n\t\t\tconst model = modelService.createModel(largeModelString, null);\n\t\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\t\tassert.strictEqual(deltas.length, 1);\n\t\t\tdeltas.length = 0;\n\t\t\tassert.strictEqual(deltas.length, 0);\n\t\t\teditor.dispose();\n\t\t\tmodel.dispose();\n\n\t\t} finally {\n\t\t\tTextModel._MODEL_SYNC_LIMIT = oldLimit;\n\t\t}\n\t});\n\n\ttest('ignore simple widget model', function () {\n\t\tthis.timeout(1000 * 60); // increase timeout for this one test\n\n\t\tconst model = modelService.createModel('test', null, undefined, true);\n\t\tdisposables.add(model);\n\t\tassert.ok(model.isForSimpleWidget);\n\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\t});\n\n\ttest('ignore editor w/o model', () => {\n\t\tconst editor = myCreateTestCodeEditor(undefined);\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [delta] = deltas;\n\t\tassert.strictEqual(delta.newActiveEditor, null);\n\t\tassert.strictEqual(delta.addedDocuments, undefined);\n\t\tassert.strictEqual(delta.removedDocuments, undefined);\n\t\tassert.strictEqual(delta.addedEditors, undefined);\n\t\tassert.strictEqual(delta.removedEditors, undefined);\n\n\t\teditor.dispose();\n\t});\n\n\ttest('editor with model', () => {\n\t\tdeltas.length = 0;\n\n\t\tconst model = modelService.createModel('farboo', null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\tassert.strictEqual(deltas.length, 2);\n\t\tconst [first, second] = deltas;\n\t\tassert.strictEqual(first.addedDocuments!.length, 1);\n\t\tassert.strictEqual(first.newActiveEditor, undefined);\n\t\tassert.strictEqual(first.removedDocuments, undefined);\n\t\tassert.strictEqual(first.addedEditors, undefined);\n\t\tassert.strictEqual(first.removedEditors, undefined);\n\n\t\tassert.strictEqual(second.addedEditors!.length, 1);\n\t\tassert.strictEqual(second.addedDocuments, undefined);\n\t\tassert.strictEqual(second.removedDocuments, undefined);\n\t\tassert.strictEqual(second.removedEditors, undefined);\n\t\tassert.strictEqual(second.newActiveEditor, undefined);\n\n\t\teditor.dispose();\n\t\tmodel.dispose();\n\t});\n\n\ttest('editor with dispos-ed/-ing model', () => {\n\t\tconst model = modelService.createModel('farboo', null);\n\t\tconst editor = myCreateTestCodeEditor(model);\n\n\t\t// ignore things until now\n\t\tdeltas.length = 0;\n\n\t\tmodelService.destroyModel(model.uri);\n\t\tassert.strictEqual(deltas.length, 1);\n\t\tconst [first] = deltas;\n\n\t\tassert.strictEqual(first.newActiveEditor, undefined);\n\t\tassert.strictEqual(first.removedEditors!.length, 1);\n\t\tassert.strictEqual(first.removedDocuments!.length, 1);\n\t\tassert.strictEqual(first.addedDocuments, undefined);\n\t\tassert.strictEqual(first.addedEditors, undefined);\n\n\t\teditor.dispose();\n\t\tmodel.dispose();\n\t});\n});\n"]}