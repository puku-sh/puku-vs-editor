{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/test/browser/extHostTelemetry.test.ts","vs/workbench/api/test/browser/extHostTelemetry.test.ts"],"names":[],"mappings":"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","file":"extHostTelemetry.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ExtensionIdentifier, IExtensionDescription, TargetPlatform } from '../../../../platform/extensions/common/extensions.js';\nimport { DEFAULT_LOG_LEVEL, LogLevel } from '../../../../platform/log/common/log.js';\nimport { TelemetryLevel } from '../../../../platform/telemetry/common/telemetry.js';\nimport { TestTelemetryLoggerService } from '../../../../platform/telemetry/test/common/telemetryLogAppender.test.js';\nimport { IExtHostInitDataService } from '../../common/extHostInitDataService.js';\nimport { ExtHostTelemetry, ExtHostTelemetryLogger } from '../../common/extHostTelemetry.js';\nimport { IEnvironment } from '../../../services/extensions/common/extensionHostProtocol.js';\nimport { mock } from '../../../test/common/workbenchTestServices.js';\nimport type { TelemetryLoggerOptions, TelemetrySender } from 'vscode';\n\ninterface TelemetryLoggerSpy {\n\tdataArr: any[];\n\texceptionArr: any[];\n\tflushCalled: boolean;\n}\n\nsuite('ExtHostTelemetry', function () {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst mockEnvironment: IEnvironment = {\n\t\tisExtensionDevelopmentDebug: false,\n\t\textensionDevelopmentLocationURI: undefined,\n\t\textensionTestsLocationURI: undefined,\n\t\tappRoot: undefined,\n\t\tappName: 'test',\n\t\tisExtensionTelemetryLoggingOnly: false,\n\t\tappHost: 'test',\n\t\tappLanguage: 'en',\n\t\tglobalStorageHome: URI.parse('fake'),\n\t\tworkspaceStorageHome: URI.parse('fake'),\n\t\tappUriScheme: 'test',\n\t};\n\n\tconst mockTelemetryInfo = {\n\t\tfirstSessionDate: '2020-01-01T00:00:00.000Z',\n\t\tsessionId: 'test',\n\t\tmachineId: 'test',\n\t\tsqmId: 'test',\n\t\tdevDeviceId: 'test'\n\t};\n\n\tconst mockRemote = {\n\t\tauthority: 'test',\n\t\tisRemote: false,\n\t\tconnectionData: null\n\t};\n\n\tconst mockExtensionIdentifier: IExtensionDescription = {\n\t\tidentifier: new ExtensionIdentifier('test-extension'),\n\t\ttargetPlatform: TargetPlatform.UNIVERSAL,\n\t\tisBuiltin: true,\n\t\tisUserBuiltin: true,\n\t\tisUnderDevelopment: true,\n\t\tname: 'test-extension',\n\t\tpublisher: 'vscode',\n\t\tversion: '1.0.0',\n\t\tengines: { vscode: '*' },\n\t\textensionLocation: URI.parse('fake'),\n\t\tenabledApiProposals: undefined,\n\t\tpreRelease: false,\n\t};\n\n\tconst createExtHostTelemetry = () => {\n\t\tconst extensionTelemetry = new ExtHostTelemetry(false, new class extends mock<IExtHostInitDataService>() {\n\t\t\toverride environment: IEnvironment = mockEnvironment;\n\t\t\toverride telemetryInfo = mockTelemetryInfo;\n\t\t\toverride remote = mockRemote;\n\t\t}, new TestTelemetryLoggerService(DEFAULT_LOG_LEVEL));\n\t\tstore.add(extensionTelemetry);\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.USAGE, true, { usage: true, error: true });\n\t\treturn extensionTelemetry;\n\t};\n\n\tconst createLogger = (functionSpy: TelemetryLoggerSpy, extHostTelemetry?: ExtHostTelemetry, options?: TelemetryLoggerOptions) => {\n\t\tconst extensionTelemetry = extHostTelemetry ?? createExtHostTelemetry();\n\t\t// This is the appender which the extension would contribute\n\t\tconst appender: TelemetrySender = {\n\t\t\tsendEventData: (eventName: string, data) => {\n\t\t\t\tfunctionSpy.dataArr.push({ eventName, data });\n\t\t\t},\n\t\t\tsendErrorData: (exception, data) => {\n\t\t\t\tfunctionSpy.exceptionArr.push({ exception, data });\n\t\t\t},\n\t\t\tflush: () => {\n\t\t\t\tfunctionSpy.flushCalled = true;\n\t\t\t}\n\t\t};\n\n\t\tif (extHostTelemetry) {\n\t\t\tstore.add(extHostTelemetry);\n\t\t}\n\n\t\tconst logger = extensionTelemetry.instantiateLogger(mockExtensionIdentifier, appender, options);\n\t\tstore.add(logger);\n\t\treturn logger;\n\t};\n\n\ttest('Validate sender instances', function () {\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tassert.throws(() => ExtHostTelemetryLogger.validateSender(<any>null));\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tassert.throws(() => ExtHostTelemetryLogger.validateSender(<any>1));\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tassert.throws(() => ExtHostTelemetryLogger.validateSender(<any>{}));\n\t\tassert.throws(() => {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tExtHostTelemetryLogger.validateSender(<any>{\n\t\t\t\tsendErrorData: () => { },\n\t\t\t\tsendEventData: true\n\t\t\t});\n\t\t});\n\t\tassert.throws(() => {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tExtHostTelemetryLogger.validateSender(<any>{\n\t\t\t\tsendErrorData: 123,\n\t\t\t\tsendEventData: () => { },\n\t\t\t});\n\t\t});\n\t\tassert.throws(() => {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tExtHostTelemetryLogger.validateSender(<any>{\n\t\t\t\tsendErrorData: () => { },\n\t\t\t\tsendEventData: () => { },\n\t\t\t\tflush: true\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Ensure logger gets proper telemetry level during initialization', function () {\n\t\tconst extensionTelemetry = createExtHostTelemetry();\n\t\tlet config = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, true);\n\t\tassert.strictEqual(config.isErrorsEnabled, true);\n\n\t\t// Initialize would never be called twice, but this is just for testing\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.ERROR, true, { usage: true, error: true });\n\t\tconfig = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, false);\n\t\tassert.strictEqual(config.isErrorsEnabled, true);\n\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.CRASH, true, { usage: true, error: true });\n\t\tconfig = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, false);\n\t\tassert.strictEqual(config.isErrorsEnabled, false);\n\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.USAGE, true, { usage: false, error: true });\n\t\tconfig = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, false);\n\t\tassert.strictEqual(config.isErrorsEnabled, true);\n\t\textensionTelemetry.dispose();\n\t});\n\n\ttest('Simple log event to TelemetryLogger', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy);\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].eventName, `${mockExtensionIdentifier.name}/test-event`);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['test-data'], 'test-data');\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 2);\n\n\t\tlogger.logError('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\n\t\tlogger.logError(new Error('test-error'), { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\t\tassert.strictEqual(functionSpy.exceptionArr.length, 1);\n\n\n\t\t// Assert not flushed\n\t\tassert.strictEqual(functionSpy.flushCalled, false);\n\n\t\t// Call flush and assert that flush occurs\n\t\tlogger.dispose();\n\t\tassert.strictEqual(functionSpy.flushCalled, true);\n\n\t});\n\n\ttest('Simple log event to TelemetryLogger with options', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy, undefined, { additionalCommonProperties: { 'common.foo': 'bar' } });\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].eventName, `${mockExtensionIdentifier.name}/test-event`);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['test-data'], 'test-data');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['common.foo'], 'bar');\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 2);\n\n\t\tlogger.logError('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\n\t\tlogger.logError(new Error('test-error'), { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\t\tassert.strictEqual(functionSpy.exceptionArr.length, 1);\n\n\n\t\t// Assert not flushed\n\t\tassert.strictEqual(functionSpy.flushCalled, false);\n\n\t\t// Call flush and assert that flush occurs\n\t\tlogger.dispose();\n\t\tassert.strictEqual(functionSpy.flushCalled, true);\n\n\t});\n\n\ttest('Log error should get common properties #193205', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy, undefined, { additionalCommonProperties: { 'common.foo': 'bar' } });\n\t\tlogger.logError(new Error('Test error'));\n\t\tassert.strictEqual(functionSpy.exceptionArr.length, 1);\n\t\tassert.strictEqual(functionSpy.exceptionArr[0].data['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.exceptionArr[0].data['common.product'], 'test');\n\n\t\tlogger.logError('test-error-event');\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['common.product'], 'test');\n\n\t\tlogger.logError('test-error-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 2);\n\t\tassert.strictEqual(functionSpy.dataArr[1].data['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.dataArr[1].data['common.product'], 'test');\n\n\t\tlogger.logError('test-error-event', { properties: { 'test-data': 'test-data' } });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\t\tassert.strictEqual(functionSpy.dataArr[2].data.properties['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.dataArr[2].data.properties['common.product'], 'test');\n\n\t\tlogger.dispose();\n\t\tassert.strictEqual(functionSpy.flushCalled, true);\n\t});\n\n\n\ttest('Ensure logger properly cleans PII', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy);\n\n\t\t// Log an event with a bunch of PII, this should all get cleaned out\n\t\tlogger.logUsage('test-event', {\n\t\t\t'fake-password': 'pwd=123',\n\t\t\t'fake-email': 'no-reply@example.com',\n\t\t\t'fake-token': 'token=123',\n\t\t\t'fake-slack-token': 'xoxp-123',\n\t\t\t'fake-path': '/Users/username/.vscode/extensions',\n\t\t});\n\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].eventName, `${mockExtensionIdentifier.name}/test-event`);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-password'], '<REDACTED: Generic Secret>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-email'], '<REDACTED: Email>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-token'], '<REDACTED: Generic Secret>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-slack-token'], '<REDACTED: Slack Token>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-path'], '<REDACTED: user-file-path>');\n\t});\n\n\ttest('Ensure output channel is logged to', function () {\n\n\t\t// Have to re-duplicate code here because I the logger service isn't exposed in the simple setup functions\n\t\tconst loggerService = new TestTelemetryLoggerService(LogLevel.Trace);\n\t\tconst extensionTelemetry = new ExtHostTelemetry(false, new class extends mock<IExtHostInitDataService>() {\n\t\t\toverride environment: IEnvironment = mockEnvironment;\n\t\t\toverride telemetryInfo = mockTelemetryInfo;\n\t\t\toverride remote = mockRemote;\n\t\t}, loggerService);\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.USAGE, true, { usage: true, error: true });\n\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy, extensionTelemetry);\n\n\t\t// Ensure headers are logged on instantiation\n\t\tassert.strictEqual(loggerService.createLogger().logs.length, 0);\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\t// Initial header is logged then the event\n\t\tassert.strictEqual(loggerService.createLogger().logs.length, 1);\n\t\tassert.ok(loggerService.createLogger().logs[0].startsWith('test-extension/test-event'));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ExtensionIdentifier, IExtensionDescription, TargetPlatform } from '../../../../platform/extensions/common/extensions.js';\nimport { DEFAULT_LOG_LEVEL, LogLevel } from '../../../../platform/log/common/log.js';\nimport { TelemetryLevel } from '../../../../platform/telemetry/common/telemetry.js';\nimport { TestTelemetryLoggerService } from '../../../../platform/telemetry/test/common/telemetryLogAppender.test.js';\nimport { IExtHostInitDataService } from '../../common/extHostInitDataService.js';\nimport { ExtHostTelemetry, ExtHostTelemetryLogger } from '../../common/extHostTelemetry.js';\nimport { IEnvironment } from '../../../services/extensions/common/extensionHostProtocol.js';\nimport { mock } from '../../../test/common/workbenchTestServices.js';\nimport type { TelemetryLoggerOptions, TelemetrySender } from 'vscode';\n\ninterface TelemetryLoggerSpy {\n\tdataArr: any[];\n\texceptionArr: any[];\n\tflushCalled: boolean;\n}\n\nsuite('ExtHostTelemetry', function () {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst mockEnvironment: IEnvironment = {\n\t\tisExtensionDevelopmentDebug: false,\n\t\textensionDevelopmentLocationURI: undefined,\n\t\textensionTestsLocationURI: undefined,\n\t\tappRoot: undefined,\n\t\tappName: 'test',\n\t\tisExtensionTelemetryLoggingOnly: false,\n\t\tappHost: 'test',\n\t\tappLanguage: 'en',\n\t\tglobalStorageHome: URI.parse('fake'),\n\t\tworkspaceStorageHome: URI.parse('fake'),\n\t\tappUriScheme: 'test',\n\t};\n\n\tconst mockTelemetryInfo = {\n\t\tfirstSessionDate: '2020-01-01T00:00:00.000Z',\n\t\tsessionId: 'test',\n\t\tmachineId: 'test',\n\t\tsqmId: 'test',\n\t\tdevDeviceId: 'test'\n\t};\n\n\tconst mockRemote = {\n\t\tauthority: 'test',\n\t\tisRemote: false,\n\t\tconnectionData: null\n\t};\n\n\tconst mockExtensionIdentifier: IExtensionDescription = {\n\t\tidentifier: new ExtensionIdentifier('test-extension'),\n\t\ttargetPlatform: TargetPlatform.UNIVERSAL,\n\t\tisBuiltin: true,\n\t\tisUserBuiltin: true,\n\t\tisUnderDevelopment: true,\n\t\tname: 'test-extension',\n\t\tpublisher: 'vscode',\n\t\tversion: '1.0.0',\n\t\tengines: { vscode: '*' },\n\t\textensionLocation: URI.parse('fake'),\n\t\tenabledApiProposals: undefined,\n\t\tpreRelease: false,\n\t};\n\n\tconst createExtHostTelemetry = () => {\n\t\tconst extensionTelemetry = new ExtHostTelemetry(false, new class extends mock<IExtHostInitDataService>() {\n\t\t\toverride environment: IEnvironment = mockEnvironment;\n\t\t\toverride telemetryInfo = mockTelemetryInfo;\n\t\t\toverride remote = mockRemote;\n\t\t}, new TestTelemetryLoggerService(DEFAULT_LOG_LEVEL));\n\t\tstore.add(extensionTelemetry);\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.USAGE, true, { usage: true, error: true });\n\t\treturn extensionTelemetry;\n\t};\n\n\tconst createLogger = (functionSpy: TelemetryLoggerSpy, extHostTelemetry?: ExtHostTelemetry, options?: TelemetryLoggerOptions) => {\n\t\tconst extensionTelemetry = extHostTelemetry ?? createExtHostTelemetry();\n\t\t// This is the appender which the extension would contribute\n\t\tconst appender: TelemetrySender = {\n\t\t\tsendEventData: (eventName: string, data) => {\n\t\t\t\tfunctionSpy.dataArr.push({ eventName, data });\n\t\t\t},\n\t\t\tsendErrorData: (exception, data) => {\n\t\t\t\tfunctionSpy.exceptionArr.push({ exception, data });\n\t\t\t},\n\t\t\tflush: () => {\n\t\t\t\tfunctionSpy.flushCalled = true;\n\t\t\t}\n\t\t};\n\n\t\tif (extHostTelemetry) {\n\t\t\tstore.add(extHostTelemetry);\n\t\t}\n\n\t\tconst logger = extensionTelemetry.instantiateLogger(mockExtensionIdentifier, appender, options);\n\t\tstore.add(logger);\n\t\treturn logger;\n\t};\n\n\ttest('Validate sender instances', function () {\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tassert.throws(() => ExtHostTelemetryLogger.validateSender(<any>null));\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tassert.throws(() => ExtHostTelemetryLogger.validateSender(<any>1));\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tassert.throws(() => ExtHostTelemetryLogger.validateSender(<any>{}));\n\t\tassert.throws(() => {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tExtHostTelemetryLogger.validateSender(<any>{\n\t\t\t\tsendErrorData: () => { },\n\t\t\t\tsendEventData: true\n\t\t\t});\n\t\t});\n\t\tassert.throws(() => {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tExtHostTelemetryLogger.validateSender(<any>{\n\t\t\t\tsendErrorData: 123,\n\t\t\t\tsendEventData: () => { },\n\t\t\t});\n\t\t});\n\t\tassert.throws(() => {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tExtHostTelemetryLogger.validateSender(<any>{\n\t\t\t\tsendErrorData: () => { },\n\t\t\t\tsendEventData: () => { },\n\t\t\t\tflush: true\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('Ensure logger gets proper telemetry level during initialization', function () {\n\t\tconst extensionTelemetry = createExtHostTelemetry();\n\t\tlet config = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, true);\n\t\tassert.strictEqual(config.isErrorsEnabled, true);\n\n\t\t// Initialize would never be called twice, but this is just for testing\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.ERROR, true, { usage: true, error: true });\n\t\tconfig = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, false);\n\t\tassert.strictEqual(config.isErrorsEnabled, true);\n\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.CRASH, true, { usage: true, error: true });\n\t\tconfig = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, false);\n\t\tassert.strictEqual(config.isErrorsEnabled, false);\n\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.USAGE, true, { usage: false, error: true });\n\t\tconfig = extensionTelemetry.getTelemetryDetails();\n\t\tassert.strictEqual(config.isCrashEnabled, true);\n\t\tassert.strictEqual(config.isUsageEnabled, false);\n\t\tassert.strictEqual(config.isErrorsEnabled, true);\n\t\textensionTelemetry.dispose();\n\t});\n\n\ttest('Simple log event to TelemetryLogger', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy);\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].eventName, `${mockExtensionIdentifier.name}/test-event`);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['test-data'], 'test-data');\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 2);\n\n\t\tlogger.logError('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\n\t\tlogger.logError(new Error('test-error'), { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\t\tassert.strictEqual(functionSpy.exceptionArr.length, 1);\n\n\n\t\t// Assert not flushed\n\t\tassert.strictEqual(functionSpy.flushCalled, false);\n\n\t\t// Call flush and assert that flush occurs\n\t\tlogger.dispose();\n\t\tassert.strictEqual(functionSpy.flushCalled, true);\n\n\t});\n\n\ttest('Simple log event to TelemetryLogger with options', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy, undefined, { additionalCommonProperties: { 'common.foo': 'bar' } });\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].eventName, `${mockExtensionIdentifier.name}/test-event`);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['test-data'], 'test-data');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['common.foo'], 'bar');\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 2);\n\n\t\tlogger.logError('test-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\n\t\tlogger.logError(new Error('test-error'), { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\t\tassert.strictEqual(functionSpy.exceptionArr.length, 1);\n\n\n\t\t// Assert not flushed\n\t\tassert.strictEqual(functionSpy.flushCalled, false);\n\n\t\t// Call flush and assert that flush occurs\n\t\tlogger.dispose();\n\t\tassert.strictEqual(functionSpy.flushCalled, true);\n\n\t});\n\n\ttest('Log error should get common properties #193205', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy, undefined, { additionalCommonProperties: { 'common.foo': 'bar' } });\n\t\tlogger.logError(new Error('Test error'));\n\t\tassert.strictEqual(functionSpy.exceptionArr.length, 1);\n\t\tassert.strictEqual(functionSpy.exceptionArr[0].data['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.exceptionArr[0].data['common.product'], 'test');\n\n\t\tlogger.logError('test-error-event');\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['common.product'], 'test');\n\n\t\tlogger.logError('test-error-event', { 'test-data': 'test-data' });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 2);\n\t\tassert.strictEqual(functionSpy.dataArr[1].data['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.dataArr[1].data['common.product'], 'test');\n\n\t\tlogger.logError('test-error-event', { properties: { 'test-data': 'test-data' } });\n\t\tassert.strictEqual(functionSpy.dataArr.length, 3);\n\t\tassert.strictEqual(functionSpy.dataArr[2].data.properties['common.foo'], 'bar');\n\t\tassert.strictEqual(functionSpy.dataArr[2].data.properties['common.product'], 'test');\n\n\t\tlogger.dispose();\n\t\tassert.strictEqual(functionSpy.flushCalled, true);\n\t});\n\n\n\ttest('Ensure logger properly cleans PII', function () {\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy);\n\n\t\t// Log an event with a bunch of PII, this should all get cleaned out\n\t\tlogger.logUsage('test-event', {\n\t\t\t'fake-password': 'pwd=123',\n\t\t\t'fake-email': 'no-reply@example.com',\n\t\t\t'fake-token': 'token=123',\n\t\t\t'fake-slack-token': 'xoxp-123',\n\t\t\t'fake-path': '/Users/username/.vscode/extensions',\n\t\t});\n\n\t\tassert.strictEqual(functionSpy.dataArr.length, 1);\n\t\tassert.strictEqual(functionSpy.dataArr[0].eventName, `${mockExtensionIdentifier.name}/test-event`);\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-password'], '<REDACTED: Generic Secret>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-email'], '<REDACTED: Email>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-token'], '<REDACTED: Generic Secret>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-slack-token'], '<REDACTED: Slack Token>');\n\t\tassert.strictEqual(functionSpy.dataArr[0].data['fake-path'], '<REDACTED: user-file-path>');\n\t});\n\n\ttest('Ensure output channel is logged to', function () {\n\n\t\t// Have to re-duplicate code here because I the logger service isn't exposed in the simple setup functions\n\t\tconst loggerService = new TestTelemetryLoggerService(LogLevel.Trace);\n\t\tconst extensionTelemetry = new ExtHostTelemetry(false, new class extends mock<IExtHostInitDataService>() {\n\t\t\toverride environment: IEnvironment = mockEnvironment;\n\t\t\toverride telemetryInfo = mockTelemetryInfo;\n\t\t\toverride remote = mockRemote;\n\t\t}, loggerService);\n\t\textensionTelemetry.$initializeTelemetryLevel(TelemetryLevel.USAGE, true, { usage: true, error: true });\n\n\t\tconst functionSpy: TelemetryLoggerSpy = { dataArr: [], exceptionArr: [], flushCalled: false };\n\n\t\tconst logger = createLogger(functionSpy, extensionTelemetry);\n\n\t\t// Ensure headers are logged on instantiation\n\t\tassert.strictEqual(loggerService.createLogger().logs.length, 0);\n\n\t\tlogger.logUsage('test-event', { 'test-data': 'test-data' });\n\t\t// Initial header is logged then the event\n\t\tassert.strictEqual(loggerService.createLogger().logs.length, 1);\n\t\tassert.ok(loggerService.createLogger().logs[0].startsWith('test-extension/test-event'));\n\t});\n});\n"]}