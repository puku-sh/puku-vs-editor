{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/test/browser/extHostMessagerService.test.ts","vs/workbench/api/test/browser/extHostMessagerService.test.ts"],"names":[],"mappings":"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","file":"extHostMessagerService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { MainThreadMessageService } from '../../browser/mainThreadMessageService.js';\nimport { IDialogService, IPrompt, IPromptButton } from '../../../../platform/dialogs/common/dialogs.js';\nimport { INotificationService, INotification, NoOpNotification, INotificationHandle, Severity, IPromptChoice, IPromptOptions, IStatusMessageOptions, INotificationSource, INotificationSourceFilter, NotificationsFilter, IStatusHandle } from '../../../../platform/notification/common/notification.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { mock } from '../../../../base/test/common/mock.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { TestDialogService } from '../../../../platform/dialogs/test/common/testDialogService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { TestExtensionService } from '../../../test/common/workbenchTestServices.js';\n\nconst emptyCommandService: ICommandService = {\n\t_serviceBrand: undefined,\n\tonWillExecuteCommand: () => Disposable.None,\n\tonDidExecuteCommand: () => Disposable.None,\n\texecuteCommand: (commandId: string, ...args: unknown[]): Promise<any> => {\n\t\treturn Promise.resolve(undefined);\n\t}\n};\n\nconst emptyNotificationService = new class implements INotificationService {\n\tdeclare readonly _serviceBrand: undefined;\n\treadonly onDidChangeFilter: Event<void> = Event.None;\n\tnotify(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\tinfo(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\twarn(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\terror(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\tprompt(severity: Severity, message: string, choices: IPromptChoice[], options?: IPromptOptions): INotificationHandle {\n\t\tthrow new Error('not implemented');\n\t}\n\tstatus(message: string | Error, options?: IStatusMessageOptions): IStatusHandle {\n\t\treturn { close: () => { } };\n\t}\n\tsetFilter(): void {\n\t\tthrow new Error('not implemented');\n\t}\n\tgetFilter(source?: INotificationSource | undefined): NotificationsFilter {\n\t\tthrow new Error('not implemented');\n\t}\n\tgetFilters(): INotificationSourceFilter[] {\n\t\tthrow new Error('not implemented');\n\t}\n\tremoveFilter(sourceId: string): void {\n\t\tthrow new Error('not implemented');\n\t}\n};\n\nclass EmptyNotificationService implements INotificationService {\n\tdeclare readonly _serviceBrand: undefined;\n\tfilter: boolean = false;\n\tconstructor(private withNotify: (notification: INotification) => void) {\n\t}\n\n\treadonly onDidChangeFilter: Event<void> = Event.None;\n\tnotify(notification: INotification): INotificationHandle {\n\t\tthis.withNotify(notification);\n\n\t\treturn new NoOpNotification();\n\t}\n\tinfo(message: any): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\twarn(message: any): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\terror(message: any): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tprompt(severity: Severity, message: string, choices: IPromptChoice[], options?: IPromptOptions): INotificationHandle {\n\t\tthrow new Error('Method not implemented');\n\t}\n\tstatus(message: string, options?: IStatusMessageOptions): IStatusHandle {\n\t\treturn { close: () => { } };\n\t}\n\tsetFilter(): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tgetFilter(source?: INotificationSource | undefined): NotificationsFilter {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tgetFilters(): INotificationSourceFilter[] {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tremoveFilter(sourceId: string): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n}\n\nsuite('ExtHostMessageService', function () {\n\n\ttest('propagte handle on select', async function () {\n\n\t\tconst service = new MainThreadMessageService(null!, new EmptyNotificationService(notification => {\n\t\t\tassert.strictEqual(notification.actions!.primary!.length, 1);\n\t\t\tqueueMicrotask(() => notification.actions!.primary![0].run());\n\t\t}), emptyCommandService, new TestDialogService(), new TestExtensionService());\n\n\t\tconst handle = await service.$showMessage(1, 'h', {}, [{ handle: 42, title: 'a thing', isCloseAffordance: true }]);\n\t\tassert.strictEqual(handle, 42);\n\n\t\tservice.dispose();\n\t});\n\n\tsuite('modal', () => {\n\t\ttest('calls dialog service', async () => {\n\t\t\tconst service = new MainThreadMessageService(null!, emptyNotificationService, emptyCommandService, new class extends mock<IDialogService>() {\n\t\t\t\toverride prompt({ type, message, buttons, cancelButton }: IPrompt<any>) {\n\t\t\t\t\tassert.strictEqual(type, 1);\n\t\t\t\t\tassert.strictEqual(message, 'h');\n\t\t\t\t\tassert.strictEqual(buttons!.length, 1);\n\t\t\t\t\tassert.strictEqual((cancelButton as IPromptButton<unknown>)!.label, 'Cancel');\n\t\t\t\t\treturn Promise.resolve({ result: buttons![0].run({ checkboxChecked: false }) });\n\t\t\t\t}\n\t\t\t} as IDialogService, new TestExtensionService());\n\n\t\t\tconst handle = await service.$showMessage(1, 'h', { modal: true }, [{ handle: 42, title: 'a thing', isCloseAffordance: false }]);\n\t\t\tassert.strictEqual(handle, 42);\n\n\t\t\tservice.dispose();\n\t\t});\n\n\t\ttest('returns undefined when cancelled', async () => {\n\t\t\tconst service = new MainThreadMessageService(null!, emptyNotificationService, emptyCommandService, new class extends mock<IDialogService>() {\n\t\t\t\toverride prompt(prompt: IPrompt<any>) {\n\t\t\t\t\treturn Promise.resolve({ result: (prompt.cancelButton as IPromptButton<unknown>)!.run({ checkboxChecked: false }) });\n\t\t\t\t}\n\t\t\t} as IDialogService, new TestExtensionService());\n\n\t\t\tconst handle = await service.$showMessage(1, 'h', { modal: true }, [{ handle: 42, title: 'a thing', isCloseAffordance: false }]);\n\t\t\tassert.strictEqual(handle, undefined);\n\n\t\t\tservice.dispose();\n\t\t});\n\n\t\ttest('hides Cancel button when not needed', async () => {\n\t\t\tconst service = new MainThreadMessageService(null!, emptyNotificationService, emptyCommandService, new class extends mock<IDialogService>() {\n\t\t\t\toverride prompt({ type, message, buttons, cancelButton }: IPrompt<any>) {\n\t\t\t\t\tassert.strictEqual(buttons!.length, 0);\n\t\t\t\t\tassert.ok(cancelButton);\n\t\t\t\t\treturn Promise.resolve({ result: (cancelButton as IPromptButton<unknown>).run({ checkboxChecked: false }) });\n\t\t\t\t}\n\t\t\t} as IDialogService, new TestExtensionService());\n\n\t\t\tconst handle = await service.$showMessage(1, 'h', { modal: true }, [{ handle: 42, title: 'a thing', isCloseAffordance: true }]);\n\t\t\tassert.strictEqual(handle, 42);\n\n\t\t\tservice.dispose();\n\t\t});\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { MainThreadMessageService } from '../../browser/mainThreadMessageService.js';\nimport { IDialogService, IPrompt, IPromptButton } from '../../../../platform/dialogs/common/dialogs.js';\nimport { INotificationService, INotification, NoOpNotification, INotificationHandle, Severity, IPromptChoice, IPromptOptions, IStatusMessageOptions, INotificationSource, INotificationSourceFilter, NotificationsFilter, IStatusHandle } from '../../../../platform/notification/common/notification.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { mock } from '../../../../base/test/common/mock.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { TestDialogService } from '../../../../platform/dialogs/test/common/testDialogService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { TestExtensionService } from '../../../test/common/workbenchTestServices.js';\n\nconst emptyCommandService: ICommandService = {\n\t_serviceBrand: undefined,\n\tonWillExecuteCommand: () => Disposable.None,\n\tonDidExecuteCommand: () => Disposable.None,\n\texecuteCommand: (commandId: string, ...args: unknown[]): Promise<any> => {\n\t\treturn Promise.resolve(undefined);\n\t}\n};\n\nconst emptyNotificationService = new class implements INotificationService {\n\tdeclare readonly _serviceBrand: undefined;\n\treadonly onDidChangeFilter: Event<void> = Event.None;\n\tnotify(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\tinfo(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\twarn(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\terror(...args: unknown[]): never {\n\t\tthrow new Error('not implemented');\n\t}\n\tprompt(severity: Severity, message: string, choices: IPromptChoice[], options?: IPromptOptions): INotificationHandle {\n\t\tthrow new Error('not implemented');\n\t}\n\tstatus(message: string | Error, options?: IStatusMessageOptions): IStatusHandle {\n\t\treturn { close: () => { } };\n\t}\n\tsetFilter(): void {\n\t\tthrow new Error('not implemented');\n\t}\n\tgetFilter(source?: INotificationSource | undefined): NotificationsFilter {\n\t\tthrow new Error('not implemented');\n\t}\n\tgetFilters(): INotificationSourceFilter[] {\n\t\tthrow new Error('not implemented');\n\t}\n\tremoveFilter(sourceId: string): void {\n\t\tthrow new Error('not implemented');\n\t}\n};\n\nclass EmptyNotificationService implements INotificationService {\n\tdeclare readonly _serviceBrand: undefined;\n\tfilter: boolean = false;\n\tconstructor(private withNotify: (notification: INotification) => void) {\n\t}\n\n\treadonly onDidChangeFilter: Event<void> = Event.None;\n\tnotify(notification: INotification): INotificationHandle {\n\t\tthis.withNotify(notification);\n\n\t\treturn new NoOpNotification();\n\t}\n\tinfo(message: any): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\twarn(message: any): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\terror(message: any): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tprompt(severity: Severity, message: string, choices: IPromptChoice[], options?: IPromptOptions): INotificationHandle {\n\t\tthrow new Error('Method not implemented');\n\t}\n\tstatus(message: string, options?: IStatusMessageOptions): IStatusHandle {\n\t\treturn { close: () => { } };\n\t}\n\tsetFilter(): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tgetFilter(source?: INotificationSource | undefined): NotificationsFilter {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tgetFilters(): INotificationSourceFilter[] {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\tremoveFilter(sourceId: string): void {\n\t\tthrow new Error('Method not implemented.');\n\t}\n}\n\nsuite('ExtHostMessageService', function () {\n\n\ttest('propagte handle on select', async function () {\n\n\t\tconst service = new MainThreadMessageService(null!, new EmptyNotificationService(notification => {\n\t\t\tassert.strictEqual(notification.actions!.primary!.length, 1);\n\t\t\tqueueMicrotask(() => notification.actions!.primary![0].run());\n\t\t}), emptyCommandService, new TestDialogService(), new TestExtensionService());\n\n\t\tconst handle = await service.$showMessage(1, 'h', {}, [{ handle: 42, title: 'a thing', isCloseAffordance: true }]);\n\t\tassert.strictEqual(handle, 42);\n\n\t\tservice.dispose();\n\t});\n\n\tsuite('modal', () => {\n\t\ttest('calls dialog service', async () => {\n\t\t\tconst service = new MainThreadMessageService(null!, emptyNotificationService, emptyCommandService, new class extends mock<IDialogService>() {\n\t\t\t\toverride prompt({ type, message, buttons, cancelButton }: IPrompt<any>) {\n\t\t\t\t\tassert.strictEqual(type, 1);\n\t\t\t\t\tassert.strictEqual(message, 'h');\n\t\t\t\t\tassert.strictEqual(buttons!.length, 1);\n\t\t\t\t\tassert.strictEqual((cancelButton as IPromptButton<unknown>)!.label, 'Cancel');\n\t\t\t\t\treturn Promise.resolve({ result: buttons![0].run({ checkboxChecked: false }) });\n\t\t\t\t}\n\t\t\t} as IDialogService, new TestExtensionService());\n\n\t\t\tconst handle = await service.$showMessage(1, 'h', { modal: true }, [{ handle: 42, title: 'a thing', isCloseAffordance: false }]);\n\t\t\tassert.strictEqual(handle, 42);\n\n\t\t\tservice.dispose();\n\t\t});\n\n\t\ttest('returns undefined when cancelled', async () => {\n\t\t\tconst service = new MainThreadMessageService(null!, emptyNotificationService, emptyCommandService, new class extends mock<IDialogService>() {\n\t\t\t\toverride prompt(prompt: IPrompt<any>) {\n\t\t\t\t\treturn Promise.resolve({ result: (prompt.cancelButton as IPromptButton<unknown>)!.run({ checkboxChecked: false }) });\n\t\t\t\t}\n\t\t\t} as IDialogService, new TestExtensionService());\n\n\t\t\tconst handle = await service.$showMessage(1, 'h', { modal: true }, [{ handle: 42, title: 'a thing', isCloseAffordance: false }]);\n\t\t\tassert.strictEqual(handle, undefined);\n\n\t\t\tservice.dispose();\n\t\t});\n\n\t\ttest('hides Cancel button when not needed', async () => {\n\t\t\tconst service = new MainThreadMessageService(null!, emptyNotificationService, emptyCommandService, new class extends mock<IDialogService>() {\n\t\t\t\toverride prompt({ type, message, buttons, cancelButton }: IPrompt<any>) {\n\t\t\t\t\tassert.strictEqual(buttons!.length, 0);\n\t\t\t\t\tassert.ok(cancelButton);\n\t\t\t\t\treturn Promise.resolve({ result: (cancelButton as IPromptButton<unknown>).run({ checkboxChecked: false }) });\n\t\t\t\t}\n\t\t\t} as IDialogService, new TestExtensionService());\n\n\t\t\tconst handle = await service.$showMessage(1, 'h', { modal: true }, [{ handle: 42, title: 'a thing', isCloseAffordance: true }]);\n\t\t\tassert.strictEqual(handle, 42);\n\n\t\t\tservice.dispose();\n\t\t});\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}