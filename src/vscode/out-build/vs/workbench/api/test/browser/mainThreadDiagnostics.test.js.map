{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/test/browser/mainThreadDiagnostics.test.ts","vs/workbench/api/test/browser/mainThreadDiagnostics.test.ts"],"names":[],"mappings":"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","file":"mainThreadDiagnostics.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { timeout } from '../../../../base/common/async.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { runWithFakedTimers } from '../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { MarkerService } from '../../../../platform/markers/common/markerService.js';\nimport { IMarkerData } from '../../../../platform/markers/common/markers.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { MainThreadDiagnostics } from '../../browser/mainThreadDiagnostics.js';\nimport { IExtHostContext } from '../../../services/extensions/common/extHostCustomers.js';\nimport { ExtensionHostKind } from '../../../services/extensions/common/extensionHostKind.js';\nimport { mock } from '../../../test/common/workbenchTestServices.js';\n\n\nsuite('MainThreadDiagnostics', function () {\n\n\tlet markerService: MarkerService;\n\n\tsetup(function () {\n\t\tmarkerService = new MarkerService();\n\t});\n\n\tteardown(function () {\n\t\tmarkerService.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('clear markers on dispose', function () {\n\n\t\tconst diag = new MainThreadDiagnostics(\n\t\t\tnew class implements IExtHostContext {\n\t\t\t\tremoteAuthority = '';\n\t\t\t\textensionHostKind = ExtensionHostKind.LocalProcess;\n\t\t\t\tdispose() { }\n\t\t\t\tassertRegistered() { }\n\t\t\t\tset(v: any): any { return null; }\n\t\t\t\tgetProxy(): any {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t$acceptMarkersChange() { }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tdrain(): any { return null; }\n\t\t\t},\n\t\t\tmarkerService,\n\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\toverride asCanonicalUri(uri: URI) { return uri; }\n\t\t\t}\n\t\t);\n\n\t\tdiag.$changeMany('foo', [[URI.file('a'), [{\n\t\t\tcode: '666',\n\t\t\tstartLineNumber: 1,\n\t\t\tstartColumn: 1,\n\t\t\tendLineNumber: 1,\n\t\t\tendColumn: 1,\n\t\t\tmessage: 'fffff',\n\t\t\tseverity: 1,\n\t\t\tsource: 'me'\n\t\t}]]]);\n\n\t\tassert.strictEqual(markerService.read().length, 1);\n\t\tdiag.dispose();\n\t\tassert.strictEqual(markerService.read().length, 0);\n\t});\n\n\ttest('OnDidChangeDiagnostics triggers twice on same diagnostics #136434', function () {\n\n\t\treturn runWithFakedTimers({}, async () => {\n\n\t\t\tconst changedData: [UriComponents, IMarkerData[]][][] = [];\n\n\t\t\tconst diag = new MainThreadDiagnostics(\n\t\t\t\tnew class implements IExtHostContext {\n\t\t\t\t\tremoteAuthority = '';\n\t\t\t\t\textensionHostKind = ExtensionHostKind.LocalProcess;\n\t\t\t\t\tdispose() { }\n\t\t\t\t\tassertRegistered() { }\n\t\t\t\t\tset(v: any): any { return null; }\n\t\t\t\t\tgetProxy(): any {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t$acceptMarkersChange(data: [UriComponents, IMarkerData[]][]) {\n\t\t\t\t\t\t\t\tchangedData.push(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tdrain(): any { return null; }\n\t\t\t\t},\n\t\t\t\tmarkerService,\n\t\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\t\toverride asCanonicalUri(uri: URI) { return uri; }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst markerDataStub = {\n\t\t\t\tcode: '666',\n\t\t\t\tstartLineNumber: 1,\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendLineNumber: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\tseverity: 1,\n\t\t\t\tsource: 'me'\n\t\t\t};\n\t\t\tconst target = URI.file('a');\n\t\t\tdiag.$changeMany('foo', [[target, [{ ...markerDataStub, message: 'same_owner' }]]]);\n\t\t\tmarkerService.changeOne('bar', target, [{ ...markerDataStub, message: 'forgein_owner' }]);\n\n\t\t\t// added one marker via the API and one via the ext host. the latter must not\n\t\t\t// trigger an event to the extension host\n\n\t\t\tawait timeout(0);\n\t\t\tassert.strictEqual(markerService.read().length, 2);\n\t\t\tassert.strictEqual(changedData.length, 1);\n\t\t\tassert.strictEqual(changedData[0].length, 1);\n\t\t\tassert.strictEqual(changedData[0][0][1][0].message, 'forgein_owner');\n\n\t\t\tdiag.dispose();\n\t\t});\n\t});\n\n\ttest('onDidChangeDiagnostics different behavior when \"extensionKind\" ui running on remote workspace #136955', function () {\n\t\treturn runWithFakedTimers({}, async () => {\n\n\t\t\tconst markerData: IMarkerData = {\n\t\t\t\tcode: '666',\n\t\t\t\tstartLineNumber: 1,\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendLineNumber: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\tseverity: 1,\n\t\t\t\tsource: 'me',\n\t\t\t\tmessage: 'message'\n\t\t\t};\n\t\t\tconst target = URI.file('a');\n\t\t\tmarkerService.changeOne('bar', target, [markerData]);\n\n\t\t\tconst changedData: [UriComponents, IMarkerData[]][][] = [];\n\n\t\t\tconst diag = new MainThreadDiagnostics(\n\t\t\t\tnew class implements IExtHostContext {\n\t\t\t\t\tremoteAuthority = '';\n\t\t\t\t\textensionHostKind = ExtensionHostKind.LocalProcess;\n\t\t\t\t\tdispose() { }\n\t\t\t\t\tassertRegistered() { }\n\t\t\t\t\tset(v: any): any { return null; }\n\t\t\t\t\tgetProxy(): any {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t$acceptMarkersChange(data: [UriComponents, IMarkerData[]][]) {\n\t\t\t\t\t\t\t\tchangedData.push(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tdrain(): any { return null; }\n\t\t\t\t},\n\t\t\t\tmarkerService,\n\t\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\t\toverride asCanonicalUri(uri: URI) { return uri; }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tdiag.$clear('bar');\n\t\t\tawait timeout(0);\n\t\t\tassert.strictEqual(markerService.read().length, 0);\n\t\t\tassert.strictEqual(changedData.length, 1);\n\n\t\t\tdiag.dispose();\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { timeout } from '../../../../base/common/async.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { runWithFakedTimers } from '../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { MarkerService } from '../../../../platform/markers/common/markerService.js';\nimport { IMarkerData } from '../../../../platform/markers/common/markers.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { MainThreadDiagnostics } from '../../browser/mainThreadDiagnostics.js';\nimport { IExtHostContext } from '../../../services/extensions/common/extHostCustomers.js';\nimport { ExtensionHostKind } from '../../../services/extensions/common/extensionHostKind.js';\nimport { mock } from '../../../test/common/workbenchTestServices.js';\n\n\nsuite('MainThreadDiagnostics', function () {\n\n\tlet markerService: MarkerService;\n\n\tsetup(function () {\n\t\tmarkerService = new MarkerService();\n\t});\n\n\tteardown(function () {\n\t\tmarkerService.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('clear markers on dispose', function () {\n\n\t\tconst diag = new MainThreadDiagnostics(\n\t\t\tnew class implements IExtHostContext {\n\t\t\t\tremoteAuthority = '';\n\t\t\t\textensionHostKind = ExtensionHostKind.LocalProcess;\n\t\t\t\tdispose() { }\n\t\t\t\tassertRegistered() { }\n\t\t\t\tset(v: any): any { return null; }\n\t\t\t\tgetProxy(): any {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t$acceptMarkersChange() { }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tdrain(): any { return null; }\n\t\t\t},\n\t\t\tmarkerService,\n\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\toverride asCanonicalUri(uri: URI) { return uri; }\n\t\t\t}\n\t\t);\n\n\t\tdiag.$changeMany('foo', [[URI.file('a'), [{\n\t\t\tcode: '666',\n\t\t\tstartLineNumber: 1,\n\t\t\tstartColumn: 1,\n\t\t\tendLineNumber: 1,\n\t\t\tendColumn: 1,\n\t\t\tmessage: 'fffff',\n\t\t\tseverity: 1,\n\t\t\tsource: 'me'\n\t\t}]]]);\n\n\t\tassert.strictEqual(markerService.read().length, 1);\n\t\tdiag.dispose();\n\t\tassert.strictEqual(markerService.read().length, 0);\n\t});\n\n\ttest('OnDidChangeDiagnostics triggers twice on same diagnostics #136434', function () {\n\n\t\treturn runWithFakedTimers({}, async () => {\n\n\t\t\tconst changedData: [UriComponents, IMarkerData[]][][] = [];\n\n\t\t\tconst diag = new MainThreadDiagnostics(\n\t\t\t\tnew class implements IExtHostContext {\n\t\t\t\t\tremoteAuthority = '';\n\t\t\t\t\textensionHostKind = ExtensionHostKind.LocalProcess;\n\t\t\t\t\tdispose() { }\n\t\t\t\t\tassertRegistered() { }\n\t\t\t\t\tset(v: any): any { return null; }\n\t\t\t\t\tgetProxy(): any {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t$acceptMarkersChange(data: [UriComponents, IMarkerData[]][]) {\n\t\t\t\t\t\t\t\tchangedData.push(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tdrain(): any { return null; }\n\t\t\t\t},\n\t\t\t\tmarkerService,\n\t\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\t\toverride asCanonicalUri(uri: URI) { return uri; }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst markerDataStub = {\n\t\t\t\tcode: '666',\n\t\t\t\tstartLineNumber: 1,\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendLineNumber: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\tseverity: 1,\n\t\t\t\tsource: 'me'\n\t\t\t};\n\t\t\tconst target = URI.file('a');\n\t\t\tdiag.$changeMany('foo', [[target, [{ ...markerDataStub, message: 'same_owner' }]]]);\n\t\t\tmarkerService.changeOne('bar', target, [{ ...markerDataStub, message: 'forgein_owner' }]);\n\n\t\t\t// added one marker via the API and one via the ext host. the latter must not\n\t\t\t// trigger an event to the extension host\n\n\t\t\tawait timeout(0);\n\t\t\tassert.strictEqual(markerService.read().length, 2);\n\t\t\tassert.strictEqual(changedData.length, 1);\n\t\t\tassert.strictEqual(changedData[0].length, 1);\n\t\t\tassert.strictEqual(changedData[0][0][1][0].message, 'forgein_owner');\n\n\t\t\tdiag.dispose();\n\t\t});\n\t});\n\n\ttest('onDidChangeDiagnostics different behavior when \"extensionKind\" ui running on remote workspace #136955', function () {\n\t\treturn runWithFakedTimers({}, async () => {\n\n\t\t\tconst markerData: IMarkerData = {\n\t\t\t\tcode: '666',\n\t\t\t\tstartLineNumber: 1,\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendLineNumber: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\tseverity: 1,\n\t\t\t\tsource: 'me',\n\t\t\t\tmessage: 'message'\n\t\t\t};\n\t\t\tconst target = URI.file('a');\n\t\t\tmarkerService.changeOne('bar', target, [markerData]);\n\n\t\t\tconst changedData: [UriComponents, IMarkerData[]][][] = [];\n\n\t\t\tconst diag = new MainThreadDiagnostics(\n\t\t\t\tnew class implements IExtHostContext {\n\t\t\t\t\tremoteAuthority = '';\n\t\t\t\t\textensionHostKind = ExtensionHostKind.LocalProcess;\n\t\t\t\t\tdispose() { }\n\t\t\t\t\tassertRegistered() { }\n\t\t\t\t\tset(v: any): any { return null; }\n\t\t\t\t\tgetProxy(): any {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t$acceptMarkersChange(data: [UriComponents, IMarkerData[]][]) {\n\t\t\t\t\t\t\t\tchangedData.push(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tdrain(): any { return null; }\n\t\t\t\t},\n\t\t\t\tmarkerService,\n\t\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\t\toverride asCanonicalUri(uri: URI) { return uri; }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tdiag.$clear('bar');\n\t\t\tawait timeout(0);\n\t\t\tassert.strictEqual(markerService.read().length, 0);\n\t\t\tassert.strictEqual(changedData.length, 1);\n\n\t\t\tdiag.dispose();\n\t\t});\n\t});\n});\n"]}