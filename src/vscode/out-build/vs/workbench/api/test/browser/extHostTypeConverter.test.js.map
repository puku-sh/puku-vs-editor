{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/test/browser/extHostTypeConverter.test.ts","vs/workbench/api/test/browser/extHostTypeConverter.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,KAAK,YAAY,MAAM,8BAA8B,CAAC;AAC7D,OAAO,EAAE,cAAc,EAAE,sBAAsB,EAAE,YAAY,EAAE,gBAAgB,EAAE,aAAa,EAAE,MAAM,uCAAuC,CAAC;AAC9I,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AAErD,OAAO,EAAE,uCAAuC,EAAE,MAAM,uCAAuC,CAAC;AAEhG,KAAK,CAAC,sBAAsB,EAAE;IAE7B,uCAAuC,EAAE,CAAC;IAE1C,SAAS,IAAI,CAAI,IAAsB;QACtC,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE,CAAC;YACxB,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC;gBACrD,KAAK,IAAI,CAAC,CAAC;YACZ,CAAC;QACF,CAAC;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IAED,IAAI,CAAC,wBAAwB,EAAE;QAE9B,IAAI,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAExC,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,mBAAmB,CAAC,CAAC;QACpD,MAAM,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,oBAAoB;QAExE,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;QAC7D,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,gCAAgC,CAAC,CAAC;QACjE,MAAM,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,oBAAoB;QAExE,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,wBAAwB,CAAC,CAAC;QACzD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAK,CAAC,UAAU,CAAC,CAAC,CAAC;QAEpC,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QAC5C,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,mDAAmD;QAEnD,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;QAC1D,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,6BAA6B,CAAC,CAAC;QAC9D,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAK,CAAC,YAAY,CAAC,CAAC,CAAC;QAEtC,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,wEAAwE,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,wEAAwE,CAAC,CAAC;QACzG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC;QAEjD,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,wEAAwE,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,wEAAwE,CAAC,CAAC;QACzG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC;QAEjD,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,yEAAyE,CAAC,CAAC;QACtG,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,yEAAyE,CAAC,CAAC;QAC1G,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAK,CAAC,uBAAuB,CAAC,CAAC,CAAC;QACjD,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAK,CAAC,wBAAwB,CAAC,CAAC,CAAC;IACnD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,0EAA0E,EAAE;QAEhF,MAAM,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,oQAAoQ,CAAC,CAAC;QACvS,iFAAiF;QACjF,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACxC,KAAK,MAAM,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAK,CAAC,EAAE,CAAC;YAC/C,IAAI,KAAK,CAAC,MAAM,KAAK,MAAM,EAAE,CAAC;gBAC7B,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YACvE,CAAC;iBAAM,CAAC;gBACP,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;YAC7C,CAAC;QACF,CAAC;IACF,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qEAAqE,EAAE;QAE3E,MAAM,CAAC,GAAG,IAAI,YAAY,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;QAC5C,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,YAAY,CAAC,gBAAgB,CAAC,YAAY,CAAC,gBAAgB,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC;QACxG,CAAC,CAAC,QAAQ,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAEtC,MAAM,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEjC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,wBAAwB,EAAE;QAE9B,MAAM,IAAI,GAAG,YAAY,CAAC,sBAAsB,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;QAE1E,MAAM,GAAG,GAAG,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE9C,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAEzG,MAAM,KAAK,GAAG,sBAAsB,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAE7C,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,kBAAkB,EAAE;QACxB,MAAM,GAAG,GAAG,gBAAgB,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5E,MAAM,CAAC,EAAE,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC;QACnC,MAAM,CAAC,eAAe,CAAC,GAAG,EAAE;YAC3B,QAAQ,EAAE,KAAK;YACf,YAAY,EAAE,KAAK;YACnB,MAAM,EAAE,SAAS;YACjB,OAAO,EAAE,SAAS;YAClB,SAAS,EAAE,SAAS;SACpB,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,0GAA0G,EAAE;QAEhH,MAAM,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;QACzC,MAAM,EAAE,GAAG,IAAI,YAAY,CAAC,aAAa,EAAE,CAAC;QAC5C,EAAE,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,YAAY,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,YAAY,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAEhI,MAAM,GAAG,GAAG,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACnC,MAAM,KAAK,GAA0B,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QAEzD,MAAM,GAAG,GAAG,aAAa,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;QAClC,MAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACrC,MAAM,MAAM,GAA0B,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,QAAQ,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"extHostTypeConverter.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport assert from 'assert';\nimport * as extHostTypes from '../../common/extHostTypes.js';\nimport { MarkdownString, NotebookCellOutputItem, NotebookData, LanguageSelector, WorkspaceEdit } from '../../common/extHostTypeConverters.js';\nimport { isEmptyObject } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IWorkspaceTextEditDto } from '../../common/extHost.protocol.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\n\nsuite('ExtHostTypeConverter', function () {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction size<T>(from: Record<any, any>): number {\n\t\tlet count = 0;\n\t\tfor (const key in from) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(from, key)) {\n\t\t\t\tcount += 1;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\ttest('MarkdownConvert - uris', function () {\n\n\t\tlet data = MarkdownString.from('Hello');\n\t\tassert.strictEqual(isEmptyObject(data.uris), true);\n\t\tassert.strictEqual(data.value, 'Hello');\n\n\t\tdata = MarkdownString.from('Hello [link](foo)');\n\t\tassert.strictEqual(data.value, 'Hello [link](foo)');\n\t\tassert.strictEqual(isEmptyObject(data.uris), true); // no scheme, no uri\n\n\t\tdata = MarkdownString.from('Hello [link](www.noscheme.bad)');\n\t\tassert.strictEqual(data.value, 'Hello [link](www.noscheme.bad)');\n\t\tassert.strictEqual(isEmptyObject(data.uris), true); // no scheme, no uri\n\n\t\tdata = MarkdownString.from('Hello [link](foo:path)');\n\t\tassert.strictEqual(data.value, 'Hello [link](foo:path)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['foo:path']);\n\n\t\tdata = MarkdownString.from('hello@foo.bar');\n\t\tassert.strictEqual(data.value, 'hello@foo.bar');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\t// assert.ok(!!data.uris!['mailto:hello@foo.bar']);\n\n\t\tdata = MarkdownString.from('*hello* [click](command:me)');\n\t\tassert.strictEqual(data.value, '*hello* [click](command:me)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['command:me']);\n\n\t\tdata = MarkdownString.from('*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(data.value, '*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['file:///somepath/here']);\n\n\t\tdata = MarkdownString.from('*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(data.value, '*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['file:///somepath/here']);\n\n\t\tdata = MarkdownString.from('*hello* [click](file:///somepath/here). [click](file:///somepath/here2)');\n\t\tassert.strictEqual(data.value, '*hello* [click](file:///somepath/here). [click](file:///somepath/here2)');\n\t\tassert.strictEqual(size(data.uris!), 2);\n\t\tassert.ok(!!data.uris!['file:///somepath/here']);\n\t\tassert.ok(!!data.uris!['file:///somepath/here2']);\n\t});\n\n\ttest('NPM script explorer running a script from the hover does not work #65561', function () {\n\n\t\tconst data = MarkdownString.from('*hello* [click](command:npm.runScriptFromHover?%7B%22documentUri%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22file%3A%2F%2F%2Fc%253A%2Ffoo%2Fbaz.ex%22%2C%22path%22%3A%22%2Fc%3A%2Ffoo%2Fbaz.ex%22%2C%22scheme%22%3A%22file%22%7D%2C%22script%22%3A%22dev%22%7D)');\n\t\t// assert that both uri get extracted but that the latter is only decoded once...\n\t\tassert.strictEqual(size(data.uris!), 2);\n\t\tfor (const value of Object.values(data.uris!)) {\n\t\t\tif (value.scheme === 'file') {\n\t\t\t\tassert.ok(URI.revive(value).toString().indexOf('file:///c%3A') === 0);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(value.scheme, 'command');\n\t\t\t}\n\t\t}\n\t});\n\n\ttest('Notebook metadata is ignored when using Notebook Serializer #125716', function () {\n\n\t\tconst d = new extHostTypes.NotebookData([]);\n\t\td.cells.push(new extHostTypes.NotebookCellData(extHostTypes.NotebookCellKind.Code, 'hello', 'fooLang'));\n\t\td.metadata = { foo: 'bar', bar: 123 };\n\n\t\tconst dto = NotebookData.from(d);\n\n\t\tassert.strictEqual(dto.cells.length, 1);\n\t\tassert.strictEqual(dto.cells[0].language, 'fooLang');\n\t\tassert.strictEqual(dto.cells[0].source, 'hello');\n\t\tassert.deepStrictEqual(dto.metadata, d.metadata);\n\t});\n\n\ttest('NotebookCellOutputItem', function () {\n\n\t\tconst item = extHostTypes.NotebookCellOutputItem.text('Hello', 'foo/bar');\n\n\t\tconst dto = NotebookCellOutputItem.from(item);\n\n\t\tassert.strictEqual(dto.mime, 'foo/bar');\n\t\tassert.deepStrictEqual(Array.from(dto.valueBytes.buffer), Array.from(new TextEncoder().encode('Hello')));\n\n\t\tconst item2 = NotebookCellOutputItem.to(dto);\n\n\t\tassert.strictEqual(item2.mime, item.mime);\n\t\tassert.deepStrictEqual(Array.from(item2.data), Array.from(item.data));\n\t});\n\n\ttest('LanguageSelector', function () {\n\t\tconst out = LanguageSelector.from({ language: 'bat', notebookType: 'xxx' });\n\t\tassert.ok(typeof out === 'object');\n\t\tassert.deepStrictEqual(out, {\n\t\t\tlanguage: 'bat',\n\t\t\tnotebookType: 'xxx',\n\t\t\tscheme: undefined,\n\t\t\tpattern: undefined,\n\t\t\texclusive: undefined,\n\t\t});\n\t});\n\n\ttest('JS/TS Surround With Code Actions provide bad Workspace Edits when obtained by VSCode Command API #178654', function () {\n\n\t\tconst uri = URI.parse('file:///foo/bar');\n\t\tconst ws = new extHostTypes.WorkspaceEdit();\n\t\tws.set(uri, [extHostTypes.SnippetTextEdit.insert(new extHostTypes.Position(1, 1), new extHostTypes.SnippetString('foo$0bar'))]);\n\n\t\tconst dto = WorkspaceEdit.from(ws);\n\t\tconst first = <IWorkspaceTextEditDto>dto.edits[0];\n\t\tassert.strictEqual(first.textEdit.insertAsSnippet, true);\n\n\t\tconst ws2 = WorkspaceEdit.to(dto);\n\t\tconst dto2 = WorkspaceEdit.from(ws2);\n\t\tconst first2 = <IWorkspaceTextEditDto>dto2.edits[0];\n\t\tassert.strictEqual(first2.textEdit.insertAsSnippet, true);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport assert from 'assert';\nimport * as extHostTypes from '../../common/extHostTypes.js';\nimport { MarkdownString, NotebookCellOutputItem, NotebookData, LanguageSelector, WorkspaceEdit } from '../../common/extHostTypeConverters.js';\nimport { isEmptyObject } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IWorkspaceTextEditDto } from '../../common/extHost.protocol.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\n\nsuite('ExtHostTypeConverter', function () {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction size<T>(from: Record<any, any>): number {\n\t\tlet count = 0;\n\t\tfor (const key in from) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(from, key)) {\n\t\t\t\tcount += 1;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t}\n\n\ttest('MarkdownConvert - uris', function () {\n\n\t\tlet data = MarkdownString.from('Hello');\n\t\tassert.strictEqual(isEmptyObject(data.uris), true);\n\t\tassert.strictEqual(data.value, 'Hello');\n\n\t\tdata = MarkdownString.from('Hello [link](foo)');\n\t\tassert.strictEqual(data.value, 'Hello [link](foo)');\n\t\tassert.strictEqual(isEmptyObject(data.uris), true); // no scheme, no uri\n\n\t\tdata = MarkdownString.from('Hello [link](www.noscheme.bad)');\n\t\tassert.strictEqual(data.value, 'Hello [link](www.noscheme.bad)');\n\t\tassert.strictEqual(isEmptyObject(data.uris), true); // no scheme, no uri\n\n\t\tdata = MarkdownString.from('Hello [link](foo:path)');\n\t\tassert.strictEqual(data.value, 'Hello [link](foo:path)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['foo:path']);\n\n\t\tdata = MarkdownString.from('hello@foo.bar');\n\t\tassert.strictEqual(data.value, 'hello@foo.bar');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\t// assert.ok(!!data.uris!['mailto:hello@foo.bar']);\n\n\t\tdata = MarkdownString.from('*hello* [click](command:me)');\n\t\tassert.strictEqual(data.value, '*hello* [click](command:me)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['command:me']);\n\n\t\tdata = MarkdownString.from('*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(data.value, '*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['file:///somepath/here']);\n\n\t\tdata = MarkdownString.from('*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(data.value, '*hello* [click](file:///somepath/here). [click](file:///somepath/here)');\n\t\tassert.strictEqual(size(data.uris!), 1);\n\t\tassert.ok(!!data.uris!['file:///somepath/here']);\n\n\t\tdata = MarkdownString.from('*hello* [click](file:///somepath/here). [click](file:///somepath/here2)');\n\t\tassert.strictEqual(data.value, '*hello* [click](file:///somepath/here). [click](file:///somepath/here2)');\n\t\tassert.strictEqual(size(data.uris!), 2);\n\t\tassert.ok(!!data.uris!['file:///somepath/here']);\n\t\tassert.ok(!!data.uris!['file:///somepath/here2']);\n\t});\n\n\ttest('NPM script explorer running a script from the hover does not work #65561', function () {\n\n\t\tconst data = MarkdownString.from('*hello* [click](command:npm.runScriptFromHover?%7B%22documentUri%22%3A%7B%22%24mid%22%3A1%2C%22external%22%3A%22file%3A%2F%2F%2Fc%253A%2Ffoo%2Fbaz.ex%22%2C%22path%22%3A%22%2Fc%3A%2Ffoo%2Fbaz.ex%22%2C%22scheme%22%3A%22file%22%7D%2C%22script%22%3A%22dev%22%7D)');\n\t\t// assert that both uri get extracted but that the latter is only decoded once...\n\t\tassert.strictEqual(size(data.uris!), 2);\n\t\tfor (const value of Object.values(data.uris!)) {\n\t\t\tif (value.scheme === 'file') {\n\t\t\t\tassert.ok(URI.revive(value).toString().indexOf('file:///c%3A') === 0);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(value.scheme, 'command');\n\t\t\t}\n\t\t}\n\t});\n\n\ttest('Notebook metadata is ignored when using Notebook Serializer #125716', function () {\n\n\t\tconst d = new extHostTypes.NotebookData([]);\n\t\td.cells.push(new extHostTypes.NotebookCellData(extHostTypes.NotebookCellKind.Code, 'hello', 'fooLang'));\n\t\td.metadata = { foo: 'bar', bar: 123 };\n\n\t\tconst dto = NotebookData.from(d);\n\n\t\tassert.strictEqual(dto.cells.length, 1);\n\t\tassert.strictEqual(dto.cells[0].language, 'fooLang');\n\t\tassert.strictEqual(dto.cells[0].source, 'hello');\n\t\tassert.deepStrictEqual(dto.metadata, d.metadata);\n\t});\n\n\ttest('NotebookCellOutputItem', function () {\n\n\t\tconst item = extHostTypes.NotebookCellOutputItem.text('Hello', 'foo/bar');\n\n\t\tconst dto = NotebookCellOutputItem.from(item);\n\n\t\tassert.strictEqual(dto.mime, 'foo/bar');\n\t\tassert.deepStrictEqual(Array.from(dto.valueBytes.buffer), Array.from(new TextEncoder().encode('Hello')));\n\n\t\tconst item2 = NotebookCellOutputItem.to(dto);\n\n\t\tassert.strictEqual(item2.mime, item.mime);\n\t\tassert.deepStrictEqual(Array.from(item2.data), Array.from(item.data));\n\t});\n\n\ttest('LanguageSelector', function () {\n\t\tconst out = LanguageSelector.from({ language: 'bat', notebookType: 'xxx' });\n\t\tassert.ok(typeof out === 'object');\n\t\tassert.deepStrictEqual(out, {\n\t\t\tlanguage: 'bat',\n\t\t\tnotebookType: 'xxx',\n\t\t\tscheme: undefined,\n\t\t\tpattern: undefined,\n\t\t\texclusive: undefined,\n\t\t});\n\t});\n\n\ttest('JS/TS Surround With Code Actions provide bad Workspace Edits when obtained by VSCode Command API #178654', function () {\n\n\t\tconst uri = URI.parse('file:///foo/bar');\n\t\tconst ws = new extHostTypes.WorkspaceEdit();\n\t\tws.set(uri, [extHostTypes.SnippetTextEdit.insert(new extHostTypes.Position(1, 1), new extHostTypes.SnippetString('foo$0bar'))]);\n\n\t\tconst dto = WorkspaceEdit.from(ws);\n\t\tconst first = <IWorkspaceTextEditDto>dto.edits[0];\n\t\tassert.strictEqual(first.textEdit.insertAsSnippet, true);\n\n\t\tconst ws2 = WorkspaceEdit.to(dto);\n\t\tconst dto2 = WorkspaceEdit.from(ws2);\n\t\tconst first2 = <IWorkspaceTextEditDto>dto2.edits[0];\n\t\tassert.strictEqual(first2.textEdit.insertAsSnippet, true);\n\t});\n});\n"]}