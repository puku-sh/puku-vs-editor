{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/common/extHostSpeech.ts","vs/workbench/api/common/extHostSpeech.ts"],"names":[],"mappings":"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","file":"extHostSpeech.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { DisposableStore, IDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ExtHostSpeechShape, IMainContext, MainContext, MainThreadSpeechShape } from './extHost.protocol.js';\nimport type * as vscode from 'vscode';\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\n\nexport class ExtHostSpeech implements ExtHostSpeechShape {\n\n\tprivate static ID_POOL = 1;\n\n\tprivate readonly proxy: MainThreadSpeechShape;\n\n\tprivate readonly providers = new Map<number, vscode.SpeechProvider>();\n\tprivate readonly sessions = new Map<number, CancellationTokenSource>();\n\tprivate readonly synthesizers = new Map<number, vscode.TextToSpeechSession>();\n\n\tconstructor(\n\t\tmainContext: IMainContext\n\t) {\n\t\tthis.proxy = mainContext.getProxy(MainContext.MainThreadSpeech);\n\t}\n\n\tasync $createSpeechToTextSession(handle: number, session: number, language?: string): Promise<void> {\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis.sessions.set(session, cts);\n\n\t\tconst speechToTextSession = await provider.provideSpeechToTextSession(cts.token, language ? { language } : undefined);\n\t\tif (!speechToTextSession) {\n\t\t\treturn;\n\t\t}\n\n\t\tdisposables.add(speechToTextSession.onDidChange(e => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.proxy.$emitSpeechToTextEvent(session, e);\n\t\t}));\n\n\t\tdisposables.add(cts.token.onCancellationRequested(() => disposables.dispose()));\n\t}\n\n\tasync $cancelSpeechToTextSession(session: number): Promise<void> {\n\t\tthis.sessions.get(session)?.dispose(true);\n\t\tthis.sessions.delete(session);\n\t}\n\n\tasync $createTextToSpeechSession(handle: number, session: number, language?: string): Promise<void> {\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis.sessions.set(session, cts);\n\n\t\tconst textToSpeech = await provider.provideTextToSpeechSession(cts.token, language ? { language } : undefined);\n\t\tif (!textToSpeech) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.synthesizers.set(session, textToSpeech);\n\n\t\tdisposables.add(textToSpeech.onDidChange(e => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.proxy.$emitTextToSpeechEvent(session, e);\n\t\t}));\n\n\t\tdisposables.add(cts.token.onCancellationRequested(() => disposables.dispose()));\n\t}\n\n\tasync $synthesizeSpeech(session: number, text: string): Promise<void> {\n\t\tthis.synthesizers.get(session)?.synthesize(text);\n\t}\n\n\tasync $cancelTextToSpeechSession(session: number): Promise<void> {\n\t\tthis.sessions.get(session)?.dispose(true);\n\t\tthis.sessions.delete(session);\n\t\tthis.synthesizers.delete(session);\n\t}\n\n\tasync $createKeywordRecognitionSession(handle: number, session: number): Promise<void> {\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis.sessions.set(session, cts);\n\n\t\tconst keywordRecognitionSession = await provider.provideKeywordRecognitionSession(cts.token);\n\t\tif (!keywordRecognitionSession) {\n\t\t\treturn;\n\t\t}\n\n\t\tdisposables.add(keywordRecognitionSession.onDidChange(e => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.proxy.$emitKeywordRecognitionEvent(session, e);\n\t\t}));\n\n\t\tdisposables.add(cts.token.onCancellationRequested(() => disposables.dispose()));\n\t}\n\n\tasync $cancelKeywordRecognitionSession(session: number): Promise<void> {\n\t\tthis.sessions.get(session)?.dispose(true);\n\t\tthis.sessions.delete(session);\n\t}\n\n\tregisterProvider(extension: ExtensionIdentifier, identifier: string, provider: vscode.SpeechProvider): IDisposable {\n\t\tconst handle = ExtHostSpeech.ID_POOL++;\n\n\t\tthis.providers.set(handle, provider);\n\t\tthis.proxy.$registerProvider(handle, identifier, { extension, displayName: extension.value });\n\n\t\treturn toDisposable(() => {\n\t\t\tthis.proxy.$unregisterProvider(handle);\n\t\t\tthis.providers.delete(handle);\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { DisposableStore, IDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ExtHostSpeechShape, IMainContext, MainContext, MainThreadSpeechShape } from './extHost.protocol.js';\nimport type * as vscode from 'vscode';\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\n\nexport class ExtHostSpeech implements ExtHostSpeechShape {\n\n\tprivate static ID_POOL = 1;\n\n\tprivate readonly proxy: MainThreadSpeechShape;\n\n\tprivate readonly providers = new Map<number, vscode.SpeechProvider>();\n\tprivate readonly sessions = new Map<number, CancellationTokenSource>();\n\tprivate readonly synthesizers = new Map<number, vscode.TextToSpeechSession>();\n\n\tconstructor(\n\t\tmainContext: IMainContext\n\t) {\n\t\tthis.proxy = mainContext.getProxy(MainContext.MainThreadSpeech);\n\t}\n\n\tasync $createSpeechToTextSession(handle: number, session: number, language?: string): Promise<void> {\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis.sessions.set(session, cts);\n\n\t\tconst speechToTextSession = await provider.provideSpeechToTextSession(cts.token, language ? { language } : undefined);\n\t\tif (!speechToTextSession) {\n\t\t\treturn;\n\t\t}\n\n\t\tdisposables.add(speechToTextSession.onDidChange(e => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.proxy.$emitSpeechToTextEvent(session, e);\n\t\t}));\n\n\t\tdisposables.add(cts.token.onCancellationRequested(() => disposables.dispose()));\n\t}\n\n\tasync $cancelSpeechToTextSession(session: number): Promise<void> {\n\t\tthis.sessions.get(session)?.dispose(true);\n\t\tthis.sessions.delete(session);\n\t}\n\n\tasync $createTextToSpeechSession(handle: number, session: number, language?: string): Promise<void> {\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis.sessions.set(session, cts);\n\n\t\tconst textToSpeech = await provider.provideTextToSpeechSession(cts.token, language ? { language } : undefined);\n\t\tif (!textToSpeech) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.synthesizers.set(session, textToSpeech);\n\n\t\tdisposables.add(textToSpeech.onDidChange(e => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.proxy.$emitTextToSpeechEvent(session, e);\n\t\t}));\n\n\t\tdisposables.add(cts.token.onCancellationRequested(() => disposables.dispose()));\n\t}\n\n\tasync $synthesizeSpeech(session: number, text: string): Promise<void> {\n\t\tthis.synthesizers.get(session)?.synthesize(text);\n\t}\n\n\tasync $cancelTextToSpeechSession(session: number): Promise<void> {\n\t\tthis.sessions.get(session)?.dispose(true);\n\t\tthis.sessions.delete(session);\n\t\tthis.synthesizers.delete(session);\n\t}\n\n\tasync $createKeywordRecognitionSession(handle: number, session: number): Promise<void> {\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis.sessions.set(session, cts);\n\n\t\tconst keywordRecognitionSession = await provider.provideKeywordRecognitionSession(cts.token);\n\t\tif (!keywordRecognitionSession) {\n\t\t\treturn;\n\t\t}\n\n\t\tdisposables.add(keywordRecognitionSession.onDidChange(e => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.proxy.$emitKeywordRecognitionEvent(session, e);\n\t\t}));\n\n\t\tdisposables.add(cts.token.onCancellationRequested(() => disposables.dispose()));\n\t}\n\n\tasync $cancelKeywordRecognitionSession(session: number): Promise<void> {\n\t\tthis.sessions.get(session)?.dispose(true);\n\t\tthis.sessions.delete(session);\n\t}\n\n\tregisterProvider(extension: ExtensionIdentifier, identifier: string, provider: vscode.SpeechProvider): IDisposable {\n\t\tconst handle = ExtHostSpeech.ID_POOL++;\n\n\t\tthis.providers.set(handle, provider);\n\t\tthis.proxy.$registerProvider(handle, identifier, { extension, displayName: extension.value });\n\n\t\treturn toDisposable(() => {\n\t\t\tthis.proxy.$unregisterProvider(handle);\n\t\t\tthis.providers.delete(handle);\n\t\t});\n\t}\n}\n"]}