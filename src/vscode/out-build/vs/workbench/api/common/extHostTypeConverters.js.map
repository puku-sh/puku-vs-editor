{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/common/extHostTypeConverters.ts","vs/workbench/api/common/extHostTypeConverters.ts"],"names":[],"mappings":"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","file":"extHostTypeConverters.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { asArray, coalesce, isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { VSBuffer, encodeBase64 } from '../../../base/common/buffer.js';\nimport { IDataTransferFile, IDataTransferItem, UriList } from '../../../base/common/dataTransfer.js';\nimport { createSingleCallFunction } from '../../../base/common/functional.js';\nimport * as htmlContent from '../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ResourceMap, ResourceSet } from '../../../base/common/map.js';\nimport * as marked from '../../../base/common/marked/marked.js';\nimport { parse, revive } from '../../../base/common/marshalling.js';\nimport { MarshalledId } from '../../../base/common/marshallingIds.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport { cloneAndChange } from '../../../base/common/objects.js';\nimport { IPrefixTreeNode, WellDefinedPrefixTree } from '../../../base/common/prefixTree.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isDefined, isEmptyObject, isNumber, isString, isUndefinedOrNull } from '../../../base/common/types.js';\nimport { URI, UriComponents, isUriComponents } from '../../../base/common/uri.js';\nimport { IURITransformer } from '../../../base/common/uriIpc.js';\nimport { generateUuid } from '../../../base/common/uuid.js';\nimport { RenderLineNumbersType } from '../../../editor/common/config/editorOptions.js';\nimport { IPosition } from '../../../editor/common/core/position.js';\nimport * as editorRange from '../../../editor/common/core/range.js';\nimport { ISelection } from '../../../editor/common/core/selection.js';\nimport { IContentDecorationRenderOptions, IDecorationOptions, IDecorationRenderOptions, IThemeDecorationRenderOptions } from '../../../editor/common/editorCommon.js';\nimport * as encodedTokenAttributes from '../../../editor/common/encodedTokenAttributes.js';\nimport * as languageSelector from '../../../editor/common/languageSelector.js';\nimport * as languages from '../../../editor/common/languages.js';\nimport { EndOfLineSequence, TrackedRangeStickiness } from '../../../editor/common/model.js';\nimport { ITextEditorOptions } from '../../../platform/editor/common/editor.js';\nimport { IExtensionDescription, IRelaxedExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { IMarkerData, IRelatedInformation, MarkerSeverity, MarkerTag } from '../../../platform/markers/common/markers.js';\nimport { ProgressLocation as MainProgressLocation } from '../../../platform/progress/common/progress.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, SaveReason } from '../../common/editor.js';\nimport { IViewBadge } from '../../common/views.js';\nimport { IChatAgentRequest, IChatAgentResult } from '../../contrib/chat/common/chatAgents.js';\nimport { IChatRequestDraft } from '../../contrib/chat/common/chatEditingService.js';\nimport { IChatRequestModeInstructions } from '../../contrib/chat/common/chatModel.js';\nimport { IChatAgentMarkdownContentWithVulnerability, IChatCodeCitation, IChatCommandButton, IChatConfirmation, IChatContentInlineReference, IChatContentReference, IChatExtensionsContent, IChatFollowup, IChatMarkdownContent, IChatMoveMessage, IChatMultiDiffData, IChatPrepareToolInvocationPart, IChatProgressMessage, IChatPullRequestContent, IChatResponseCodeblockUriPart, IChatTaskDto, IChatTaskResult, IChatTextEdit, IChatThinkingPart, IChatToolInvocationSerialized, IChatTreeData, IChatUserActionEvent, IChatWarningMessage } from '../../contrib/chat/common/chatService.js';\nimport { ChatRequestToolReferenceEntry, IChatRequestVariableEntry, isImageVariableEntry, isPromptFileVariableEntry, isPromptTextVariableEntry } from '../../contrib/chat/common/chatVariableEntries.js';\nimport { ChatAgentLocation } from '../../contrib/chat/common/constants.js';\nimport { IToolInvocationContext, IToolResult, IToolResultInputOutputDetails, IToolResultOutputDetails, ToolDataSource } from '../../contrib/chat/common/languageModelToolsService.js';\nimport * as chatProvider from '../../contrib/chat/common/languageModels.js';\nimport { IChatMessageDataPart, IChatResponseDataPart, IChatResponsePromptTsxPart, IChatResponseTextPart } from '../../contrib/chat/common/languageModels.js';\nimport { DebugTreeItemCollapsibleState, IDebugVisualizationTreeItem } from '../../contrib/debug/common/debug.js';\nimport { McpServerLaunch, McpServerTransportType } from '../../contrib/mcp/common/mcpTypes.js';\nimport * as notebooks from '../../contrib/notebook/common/notebookCommon.js';\nimport { CellEditType } from '../../contrib/notebook/common/notebookCommon.js';\nimport { ICellRange } from '../../contrib/notebook/common/notebookRange.js';\nimport { InputValidationType } from '../../contrib/scm/common/scm.js';\nimport * as search from '../../contrib/search/common/search.js';\nimport { TestId } from '../../contrib/testing/common/testId.js';\nimport { CoverageDetails, DetailType, ICoverageCount, IFileCoverage, ISerializedTestResults, ITestErrorMessage, ITestItem, ITestRunProfileReference, ITestTag, TestMessageType, TestResultItem, TestRunProfileBitset, denamespaceTestTag, namespaceTestTag } from '../../contrib/testing/common/testTypes.js';\nimport { AiSettingsSearchResult, AiSettingsSearchResultKind } from '../../services/aiSettingsSearch/common/aiSettingsSearch.js';\nimport { EditorGroupColumn } from '../../services/editor/common/editorGroupColumn.js';\nimport { ACTIVE_GROUP, SIDE_GROUP } from '../../services/editor/common/editorService.js';\nimport { checkProposedApiEnabled, isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport { Dto, SerializableObjectWithBuffers } from '../../services/extensions/common/proxyIdentifier.js';\nimport * as extHostProtocol from './extHost.protocol.js';\nimport { CommandsConverter } from './extHostCommands.js';\nimport { getPrivateApiFor } from './extHostTestingPrivateApi.js';\nimport * as types from './extHostTypes.js';\nimport { LanguageModelDataPart, LanguageModelPromptTsxPart, LanguageModelTextPart } from './extHostTypes.js';\n\nexport namespace Command {\n\n\texport interface ICommandsConverter {\n\t\tfromInternal(command: extHostProtocol.ICommandDto): vscode.Command | undefined;\n\t\ttoInternal(command: vscode.Command | undefined, disposables: DisposableStore): extHostProtocol.ICommandDto | undefined;\n\t}\n}\n\nexport interface PositionLike {\n\tline: number;\n\tcharacter: number;\n}\n\nexport interface RangeLike {\n\tstart: PositionLike;\n\tend: PositionLike;\n}\n\nexport interface SelectionLike extends RangeLike {\n\tanchor: PositionLike;\n\tactive: PositionLike;\n}\nexport namespace Selection {\n\n\texport function to(selection: ISelection): types.Selection {\n\t\tconst { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n\t\tconst start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n\t\tconst end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n\t\treturn new types.Selection(start, end);\n\t}\n\n\texport function from(selection: SelectionLike): ISelection {\n\t\tconst { anchor, active } = selection;\n\t\treturn {\n\t\t\tselectionStartLineNumber: anchor.line + 1,\n\t\t\tselectionStartColumn: anchor.character + 1,\n\t\t\tpositionLineNumber: active.line + 1,\n\t\t\tpositionColumn: active.character + 1\n\t\t};\n\t}\n}\nexport namespace Range {\n\n\texport function from(range: undefined): undefined;\n\texport function from(range: RangeLike): editorRange.IRange;\n\texport function from(range: RangeLike | undefined): editorRange.IRange | undefined;\n\texport function from(range: RangeLike | undefined): editorRange.IRange | undefined {\n\t\tif (!range) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { start, end } = range;\n\t\treturn {\n\t\t\tstartLineNumber: start.line + 1,\n\t\t\tstartColumn: start.character + 1,\n\t\t\tendLineNumber: end.line + 1,\n\t\t\tendColumn: end.character + 1\n\t\t};\n\t}\n\n\texport function to(range: undefined): types.Range;\n\texport function to(range: editorRange.IRange): types.Range;\n\texport function to(range: editorRange.IRange | undefined): types.Range | undefined;\n\texport function to(range: editorRange.IRange | undefined): types.Range | undefined {\n\t\tif (!range) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n\t\treturn new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n\t}\n}\n\nexport namespace Location {\n\n\texport function from(location: vscode.Location): Dto<languages.Location> {\n\t\treturn {\n\t\t\turi: location.uri,\n\t\t\trange: Range.from(location.range)\n\t\t};\n\t}\n\n\texport function to(location: Dto<languages.Location>): vscode.Location {\n\t\treturn new types.Location(URI.revive(location.uri), Range.to(location.range));\n\t}\n}\n\nexport namespace TokenType {\n\texport function to(type: encodedTokenAttributes.StandardTokenType): types.StandardTokenType {\n\t\tswitch (type) {\n\t\t\tcase encodedTokenAttributes.StandardTokenType.Comment: return types.StandardTokenType.Comment;\n\t\t\tcase encodedTokenAttributes.StandardTokenType.Other: return types.StandardTokenType.Other;\n\t\t\tcase encodedTokenAttributes.StandardTokenType.RegEx: return types.StandardTokenType.RegEx;\n\t\t\tcase encodedTokenAttributes.StandardTokenType.String: return types.StandardTokenType.String;\n\t\t}\n\t}\n}\n\nexport namespace Position {\n\texport function to(position: IPosition): types.Position {\n\t\treturn new types.Position(position.lineNumber - 1, position.column - 1);\n\t}\n\texport function from(position: types.Position | vscode.Position): IPosition {\n\t\treturn { lineNumber: position.line + 1, column: position.character + 1 };\n\t}\n}\n\nexport namespace DocumentSelector {\n\n\texport function from(value: vscode.DocumentSelector, uriTransformer?: IURITransformer, extension?: IExtensionDescription): extHostProtocol.IDocumentFilterDto[] {\n\t\treturn coalesce(asArray(value).map(sel => _doTransformDocumentSelector(sel, uriTransformer, extension)));\n\t}\n\n\tfunction _doTransformDocumentSelector(selector: string | vscode.DocumentFilter, uriTransformer: IURITransformer | undefined, extension: IExtensionDescription | undefined): extHostProtocol.IDocumentFilterDto | undefined {\n\t\tif (typeof selector === 'string') {\n\t\t\treturn {\n\t\t\t\t$serialized: true,\n\t\t\t\tlanguage: selector,\n\t\t\t\tisBuiltin: extension?.isBuiltin,\n\t\t\t};\n\t\t}\n\n\t\tif (selector) {\n\t\t\treturn {\n\t\t\t\t$serialized: true,\n\t\t\t\tlanguage: selector.language,\n\t\t\t\tscheme: _transformScheme(selector.scheme, uriTransformer),\n\t\t\t\tpattern: GlobPattern.from(selector.pattern) ?? undefined,\n\t\t\t\texclusive: selector.exclusive,\n\t\t\t\tnotebookType: selector.notebookType,\n\t\t\t\tisBuiltin: extension?.isBuiltin\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tfunction _transformScheme(scheme: string | undefined, uriTransformer: IURITransformer | undefined): string | undefined {\n\t\tif (uriTransformer && typeof scheme === 'string') {\n\t\t\treturn uriTransformer.transformOutgoingScheme(scheme);\n\t\t}\n\t\treturn scheme;\n\t}\n}\n\nexport namespace DiagnosticTag {\n\texport function from(value: vscode.DiagnosticTag): MarkerTag | undefined {\n\t\tswitch (value) {\n\t\t\tcase types.DiagnosticTag.Unnecessary:\n\t\t\t\treturn MarkerTag.Unnecessary;\n\t\t\tcase types.DiagnosticTag.Deprecated:\n\t\t\t\treturn MarkerTag.Deprecated;\n\t\t}\n\t\treturn undefined;\n\t}\n\texport function to(value: MarkerTag): vscode.DiagnosticTag | undefined {\n\t\tswitch (value) {\n\t\t\tcase MarkerTag.Unnecessary:\n\t\t\t\treturn types.DiagnosticTag.Unnecessary;\n\t\t\tcase MarkerTag.Deprecated:\n\t\t\t\treturn types.DiagnosticTag.Deprecated;\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nexport namespace Diagnostic {\n\texport function from(value: vscode.Diagnostic): IMarkerData {\n\t\tlet code: string | { value: string; target: URI } | undefined;\n\n\t\tif (value.code) {\n\t\t\tif (isString(value.code) || isNumber(value.code)) {\n\t\t\t\tcode = String(value.code);\n\t\t\t} else {\n\t\t\t\tcode = {\n\t\t\t\t\tvalue: String(value.code.value),\n\t\t\t\t\ttarget: value.code.target,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t...Range.from(value.range),\n\t\t\tmessage: value.message,\n\t\t\tsource: value.source,\n\t\t\tcode,\n\t\t\tseverity: DiagnosticSeverity.from(value.severity),\n\t\t\trelatedInformation: value.relatedInformation && value.relatedInformation.map(DiagnosticRelatedInformation.from),\n\t\t\ttags: Array.isArray(value.tags) ? coalesce(value.tags.map(DiagnosticTag.from)) : undefined,\n\t\t};\n\t}\n\n\texport function to(value: IMarkerData): vscode.Diagnostic {\n\t\tconst res = new types.Diagnostic(Range.to(value), value.message, DiagnosticSeverity.to(value.severity));\n\t\tres.source = value.source;\n\t\tres.code = isString(value.code) ? value.code : value.code?.value;\n\t\tres.relatedInformation = value.relatedInformation && value.relatedInformation.map(DiagnosticRelatedInformation.to);\n\t\tres.tags = value.tags && coalesce(value.tags.map(DiagnosticTag.to));\n\t\treturn res;\n\t}\n}\n\nexport namespace DiagnosticRelatedInformation {\n\texport function from(value: vscode.DiagnosticRelatedInformation): IRelatedInformation {\n\t\treturn {\n\t\t\t...Range.from(value.location.range),\n\t\t\tmessage: value.message,\n\t\t\tresource: value.location.uri\n\t\t};\n\t}\n\texport function to(value: IRelatedInformation): types.DiagnosticRelatedInformation {\n\t\treturn new types.DiagnosticRelatedInformation(new types.Location(value.resource, Range.to(value)), value.message);\n\t}\n}\nexport namespace DiagnosticSeverity {\n\n\texport function from(value: number): MarkerSeverity {\n\t\tswitch (value) {\n\t\t\tcase types.DiagnosticSeverity.Error:\n\t\t\t\treturn MarkerSeverity.Error;\n\t\t\tcase types.DiagnosticSeverity.Warning:\n\t\t\t\treturn MarkerSeverity.Warning;\n\t\t\tcase types.DiagnosticSeverity.Information:\n\t\t\t\treturn MarkerSeverity.Info;\n\t\t\tcase types.DiagnosticSeverity.Hint:\n\t\t\t\treturn MarkerSeverity.Hint;\n\t\t}\n\t\treturn MarkerSeverity.Error;\n\t}\n\n\texport function to(value: MarkerSeverity): types.DiagnosticSeverity {\n\t\tswitch (value) {\n\t\t\tcase MarkerSeverity.Info:\n\t\t\t\treturn types.DiagnosticSeverity.Information;\n\t\t\tcase MarkerSeverity.Warning:\n\t\t\t\treturn types.DiagnosticSeverity.Warning;\n\t\t\tcase MarkerSeverity.Error:\n\t\t\t\treturn types.DiagnosticSeverity.Error;\n\t\t\tcase MarkerSeverity.Hint:\n\t\t\t\treturn types.DiagnosticSeverity.Hint;\n\t\t\tdefault:\n\t\t\t\treturn types.DiagnosticSeverity.Error;\n\t\t}\n\t}\n}\n\nexport namespace ViewColumn {\n\texport function from(column?: vscode.ViewColumn): EditorGroupColumn {\n\t\tif (typeof column === 'number' && column >= types.ViewColumn.One) {\n\t\t\treturn column - 1; // adjust zero index (ViewColumn.ONE => 0)\n\t\t}\n\n\t\tif (column === types.ViewColumn.Beside) {\n\t\t\treturn SIDE_GROUP;\n\t\t}\n\n\t\treturn ACTIVE_GROUP; // default is always the active group\n\t}\n\n\texport function to(position: EditorGroupColumn): vscode.ViewColumn {\n\t\tif (typeof position === 'number' && position >= 0) {\n\t\t\treturn position + 1; // adjust to index (ViewColumn.ONE => 1)\n\t\t}\n\n\t\tthrow new Error(`invalid 'EditorGroupColumn'`);\n\t}\n}\n\nfunction isDecorationOptions(something: any): something is vscode.DecorationOptions {\n\treturn (typeof something.range !== 'undefined');\n}\n\nexport function isDecorationOptionsArr(something: vscode.Range[] | vscode.DecorationOptions[]): something is vscode.DecorationOptions[] {\n\tif (something.length === 0) {\n\t\treturn true;\n\t}\n\treturn isDecorationOptions(something[0]) ? true : false;\n}\n\nexport namespace MarkdownString {\n\n\texport function fromMany(markup: (vscode.MarkdownString | vscode.MarkedString)[]): htmlContent.IMarkdownString[] {\n\t\treturn markup.map(MarkdownString.from);\n\t}\n\n\tinterface Codeblock {\n\t\tlanguage: string;\n\t\tvalue: string;\n\t}\n\n\tfunction isCodeblock(thing: any): thing is Codeblock {\n\t\treturn thing && typeof thing === 'object'\n\t\t\t&& typeof (<Codeblock>thing).language === 'string'\n\t\t\t&& typeof (<Codeblock>thing).value === 'string';\n\t}\n\n\texport function from(markup: vscode.MarkdownString | vscode.MarkedString): htmlContent.IMarkdownString {\n\t\tlet res: htmlContent.IMarkdownString;\n\t\tif (isCodeblock(markup)) {\n\t\t\tconst { language, value } = markup;\n\t\t\tres = { value: '```' + language + '\\n' + value + '\\n```\\n' };\n\t\t} else if (types.MarkdownString.isMarkdownString(markup)) {\n\t\t\tres = { value: markup.value, isTrusted: markup.isTrusted, supportThemeIcons: markup.supportThemeIcons, supportHtml: markup.supportHtml, supportAlertSyntax: markup.supportAlertSyntax, baseUri: markup.baseUri };\n\t\t} else if (typeof markup === 'string') {\n\t\t\tres = { value: markup };\n\t\t} else {\n\t\t\tres = { value: '' };\n\t\t}\n\n\t\t// extract uris into a separate object\n\t\tconst resUris: { [href: string]: UriComponents } = Object.create(null);\n\t\tres.uris = resUris;\n\n\t\tconst collectUri = ({ href }: { href: string }): string => {\n\t\t\ttry {\n\t\t\t\tlet uri = URI.parse(href, true);\n\t\t\t\turi = uri.with({ query: _uriMassage(uri.query, resUris) });\n\t\t\t\tresUris[href] = uri;\n\t\t\t} catch (e) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t\treturn '';\n\t\t};\n\n\t\tmarked.marked.walkTokens(marked.marked.lexer(res.value), token => {\n\t\t\tif (token.type === 'link') {\n\t\t\t\tcollectUri({ href: token.href });\n\t\t\t} else if (token.type === 'image') {\n\t\t\t\tif (typeof token.href === 'string') {\n\t\t\t\t\tcollectUri(htmlContent.parseHrefAndDimensions(token.href));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn res;\n\t}\n\n\tfunction _uriMassage(part: string, bucket: { [n: string]: UriComponents }): string {\n\t\tif (!part) {\n\t\t\treturn part;\n\t\t}\n\t\tlet data: unknown;\n\t\ttry {\n\t\t\tdata = parse(part);\n\t\t} catch (e) {\n\t\t\t// ignore\n\t\t}\n\t\tif (!data) {\n\t\t\treturn part;\n\t\t}\n\t\tlet changed = false;\n\t\tdata = cloneAndChange(data, value => {\n\t\t\tif (URI.isUri(value)) {\n\t\t\t\tconst key = `__uri_${Math.random().toString(16).slice(2, 8)}`;\n\t\t\t\tbucket[key] = value;\n\t\t\t\tchanged = true;\n\t\t\t\treturn key;\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\n\t\tif (!changed) {\n\t\t\treturn part;\n\t\t}\n\n\t\treturn JSON.stringify(data);\n\t}\n\n\texport function to(value: htmlContent.IMarkdownString): vscode.MarkdownString {\n\t\tconst result = new types.MarkdownString(value.value, value.supportThemeIcons);\n\t\tresult.isTrusted = value.isTrusted;\n\t\tresult.supportHtml = value.supportHtml;\n\t\tresult.supportAlertSyntax = value.supportAlertSyntax;\n\t\tresult.baseUri = value.baseUri ? URI.from(value.baseUri) : undefined;\n\t\treturn result;\n\t}\n\n\texport function fromStrict(value: string | vscode.MarkdownString | undefined | null): undefined | string | htmlContent.IMarkdownString {\n\t\tif (!value) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn typeof value === 'string' ? value : MarkdownString.from(value);\n\t}\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: vscode.Range[] | vscode.DecorationOptions[]): IDecorationOptions[] {\n\tif (isDecorationOptionsArr(ranges)) {\n\t\treturn ranges.map((r): IDecorationOptions => {\n\t\t\treturn {\n\t\t\t\trange: Range.from(r.range),\n\t\t\t\thoverMessage: Array.isArray(r.hoverMessage)\n\t\t\t\t\t? MarkdownString.fromMany(r.hoverMessage)\n\t\t\t\t\t: (r.hoverMessage ? MarkdownString.from(r.hoverMessage) : undefined),\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\trenderOptions: <any> /* URI vs Uri */r.renderOptions\n\t\t\t};\n\t\t});\n\t} else {\n\t\treturn ranges.map((r): IDecorationOptions => {\n\t\t\treturn {\n\t\t\t\trange: Range.from(r)\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n\tif (typeof value === 'undefined') {\n\t\treturn value;\n\t}\n\tif (typeof value === 'string') {\n\t\treturn URI.file(value);\n\t} else {\n\t\treturn value;\n\t}\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n\texport function from(options: vscode.ThemableDecorationAttachmentRenderOptions): IContentDecorationRenderOptions {\n\t\tif (typeof options === 'undefined') {\n\t\t\treturn options;\n\t\t}\n\t\treturn {\n\t\t\tcontentText: options.contentText,\n\t\t\tcontentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n\t\t\tborder: options.border,\n\t\t\tborderColor: <string | types.ThemeColor>options.borderColor,\n\t\t\tfontStyle: options.fontStyle,\n\t\t\tfontWeight: options.fontWeight,\n\t\t\ttextDecoration: options.textDecoration,\n\t\t\tcolor: <string | types.ThemeColor>options.color,\n\t\t\tbackgroundColor: <string | types.ThemeColor>options.backgroundColor,\n\t\t\tmargin: options.margin,\n\t\t\twidth: options.width,\n\t\t\theight: options.height,\n\t\t};\n\t}\n}\n\nexport namespace ThemableDecorationRenderOptions {\n\texport function from(options: vscode.ThemableDecorationRenderOptions): IThemeDecorationRenderOptions {\n\t\tif (typeof options === 'undefined') {\n\t\t\treturn options;\n\t\t}\n\t\treturn {\n\t\t\tbackgroundColor: <string | types.ThemeColor>options.backgroundColor,\n\t\t\toutline: options.outline,\n\t\t\toutlineColor: <string | types.ThemeColor>options.outlineColor,\n\t\t\toutlineStyle: options.outlineStyle,\n\t\t\toutlineWidth: options.outlineWidth,\n\t\t\tborder: options.border,\n\t\t\tborderColor: <string | types.ThemeColor>options.borderColor,\n\t\t\tborderRadius: options.borderRadius,\n\t\t\tborderSpacing: options.borderSpacing,\n\t\t\tborderStyle: options.borderStyle,\n\t\t\tborderWidth: options.borderWidth,\n\t\t\tfontStyle: options.fontStyle,\n\t\t\tfontWeight: options.fontWeight,\n\t\t\ttextDecoration: options.textDecoration,\n\t\t\tcursor: options.cursor,\n\t\t\tcolor: <string | types.ThemeColor>options.color,\n\t\t\topacity: options.opacity,\n\t\t\tletterSpacing: options.letterSpacing,\n\t\t\tgutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n\t\t\tgutterIconSize: options.gutterIconSize,\n\t\t\toverviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n\t\t\tbefore: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n\t\t\tafter: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace DecorationRangeBehavior {\n\texport function from(value: types.DecorationRangeBehavior): TrackedRangeStickiness {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn value;\n\t\t}\n\t\tswitch (value) {\n\t\t\tcase types.DecorationRangeBehavior.OpenOpen:\n\t\t\t\treturn TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n\t\t\tcase types.DecorationRangeBehavior.ClosedClosed:\n\t\t\t\treturn TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n\t\t\tcase types.DecorationRangeBehavior.OpenClosed:\n\t\t\t\treturn TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n\t\t\tcase types.DecorationRangeBehavior.ClosedOpen:\n\t\t\t\treturn TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n\t\t}\n\t}\n}\n\nexport namespace DecorationRenderOptions {\n\texport function from(options: vscode.DecorationRenderOptions): IDecorationRenderOptions {\n\t\treturn {\n\t\t\tisWholeLine: options.isWholeLine,\n\t\t\trangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n\t\t\toverviewRulerLane: options.overviewRulerLane,\n\t\t\tlight: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n\t\t\tdark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n\t\t\tbackgroundColor: <string | types.ThemeColor>options.backgroundColor,\n\t\t\toutline: options.outline,\n\t\t\toutlineColor: <string | types.ThemeColor>options.outlineColor,\n\t\t\toutlineStyle: options.outlineStyle,\n\t\t\toutlineWidth: options.outlineWidth,\n\t\t\tborder: options.border,\n\t\t\tborderColor: <string | types.ThemeColor>options.borderColor,\n\t\t\tborderRadius: options.borderRadius,\n\t\t\tborderSpacing: options.borderSpacing,\n\t\t\tborderStyle: options.borderStyle,\n\t\t\tborderWidth: options.borderWidth,\n\t\t\tfontStyle: options.fontStyle,\n\t\t\tfontWeight: options.fontWeight,\n\t\t\ttextDecoration: options.textDecoration,\n\t\t\tcursor: options.cursor,\n\t\t\tcolor: <string | types.ThemeColor>options.color,\n\t\t\topacity: options.opacity,\n\t\t\tletterSpacing: options.letterSpacing,\n\t\t\tgutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n\t\t\tgutterIconSize: options.gutterIconSize,\n\t\t\toverviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n\t\t\tbefore: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n\t\t\tafter: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace TextEdit {\n\n\texport function from(edit: vscode.TextEdit): languages.TextEdit {\n\t\treturn {\n\t\t\ttext: edit.newText,\n\t\t\teol: edit.newEol && EndOfLine.from(edit.newEol),\n\t\t\trange: Range.from(edit.range)\n\t\t};\n\t}\n\n\texport function to(edit: languages.TextEdit): types.TextEdit {\n\t\tconst result = new types.TextEdit(Range.to(edit.range), edit.text);\n\t\tresult.newEol = (typeof edit.eol === 'undefined' ? undefined : EndOfLine.to(edit.eol))!;\n\t\treturn result;\n\t}\n}\n\nexport namespace WorkspaceEdit {\n\n\texport interface IVersionInformationProvider {\n\t\tgetTextDocumentVersion(uri: URI): number | undefined;\n\t\tgetNotebookDocumentVersion(uri: URI): number | undefined;\n\t}\n\n\texport function from(value: vscode.WorkspaceEdit, versionInfo?: IVersionInformationProvider): extHostProtocol.IWorkspaceEditDto {\n\t\tconst result: extHostProtocol.IWorkspaceEditDto = {\n\t\t\tedits: []\n\t\t};\n\n\t\tif (value instanceof types.WorkspaceEdit) {\n\n\t\t\t// collect all files that are to be created so that their version\n\t\t\t// information (in case they exist as text model already) can be ignored\n\t\t\tconst toCreate = new ResourceSet();\n\t\t\tfor (const entry of value._allEntries()) {\n\t\t\t\tif (entry._type === types.FileEditType.File && URI.isUri(entry.to) && entry.from === undefined) {\n\t\t\t\t\ttoCreate.add(entry.to);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const entry of value._allEntries()) {\n\n\t\t\t\tif (entry._type === types.FileEditType.File) {\n\t\t\t\t\tlet contents: { type: 'base64'; value: string } | { type: 'dataTransferItem'; id: string } | undefined;\n\t\t\t\t\tif (entry.options?.contents) {\n\t\t\t\t\t\tif (ArrayBuffer.isView(entry.options.contents)) {\n\t\t\t\t\t\t\tcontents = { type: 'base64', value: encodeBase64(VSBuffer.wrap(entry.options.contents)) };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontents = { type: 'dataTransferItem', id: (entry.options.contents as types.DataTransferFile)._itemId };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// file operation\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\toldResource: entry.from,\n\t\t\t\t\t\tnewResource: entry.to,\n\t\t\t\t\t\toptions: { ...entry.options, contents },\n\t\t\t\t\t\tmetadata: entry.metadata\n\t\t\t\t\t});\n\n\t\t\t\t} else if (entry._type === types.FileEditType.Text) {\n\t\t\t\t\t// text edits\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\ttextEdit: TextEdit.from(entry.edit),\n\t\t\t\t\t\tversionId: !toCreate.has(entry.uri) ? versionInfo?.getTextDocumentVersion(entry.uri) : undefined,\n\t\t\t\t\t\tmetadata: entry.metadata\n\t\t\t\t\t});\n\t\t\t\t} else if (entry._type === types.FileEditType.Snippet) {\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\ttextEdit: {\n\t\t\t\t\t\t\trange: Range.from(entry.range),\n\t\t\t\t\t\t\ttext: entry.edit.value,\n\t\t\t\t\t\t\tinsertAsSnippet: true,\n\t\t\t\t\t\t\tkeepWhitespace: entry.keepWhitespace\n\t\t\t\t\t\t},\n\t\t\t\t\t\tversionId: !toCreate.has(entry.uri) ? versionInfo?.getTextDocumentVersion(entry.uri) : undefined,\n\t\t\t\t\t\tmetadata: entry.metadata\n\t\t\t\t\t});\n\n\t\t\t\t} else if (entry._type === types.FileEditType.Cell) {\n\t\t\t\t\t// cell edit\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tmetadata: entry.metadata,\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\tcellEdit: entry.edit,\n\t\t\t\t\t\tnotebookVersionId: versionInfo?.getNotebookDocumentVersion(entry.uri)\n\t\t\t\t\t});\n\n\t\t\t\t} else if (entry._type === types.FileEditType.CellReplace) {\n\t\t\t\t\t// cell replace\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tmetadata: entry.metadata,\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\tnotebookVersionId: versionInfo?.getNotebookDocumentVersion(entry.uri),\n\t\t\t\t\t\tcellEdit: {\n\t\t\t\t\t\t\teditType: notebooks.CellEditType.Replace,\n\t\t\t\t\t\t\tindex: entry.index,\n\t\t\t\t\t\t\tcount: entry.count,\n\t\t\t\t\t\t\tcells: entry.cells.map(NotebookCellData.from)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\texport function to(value: extHostProtocol.IWorkspaceEditDto) {\n\t\tconst result = new types.WorkspaceEdit();\n\t\tconst edits = new ResourceMap<(types.TextEdit | types.SnippetTextEdit)[]>();\n\t\tfor (const edit of value.edits) {\n\t\t\tif ((<extHostProtocol.IWorkspaceTextEditDto>edit).textEdit) {\n\n\t\t\t\tconst item = <extHostProtocol.IWorkspaceTextEditDto>edit;\n\t\t\t\tconst uri = URI.revive(item.resource);\n\t\t\t\tconst range = Range.to(item.textEdit.range);\n\t\t\t\tconst text = item.textEdit.text;\n\t\t\t\tconst isSnippet = item.textEdit.insertAsSnippet;\n\n\t\t\t\tlet editOrSnippetTest: types.TextEdit | types.SnippetTextEdit;\n\t\t\t\tif (isSnippet) {\n\t\t\t\t\teditOrSnippetTest = types.SnippetTextEdit.replace(range, new types.SnippetString(text));\n\t\t\t\t} else {\n\t\t\t\t\teditOrSnippetTest = types.TextEdit.replace(range, text);\n\t\t\t\t}\n\n\t\t\t\tconst array = edits.get(uri);\n\t\t\t\tif (!array) {\n\t\t\t\t\tedits.set(uri, [editOrSnippetTest]);\n\t\t\t\t} else {\n\t\t\t\t\tarray.push(editOrSnippetTest);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tresult.renameFile(\n\t\t\t\t\tURI.revive((<extHostProtocol.IWorkspaceFileEditDto>edit).oldResource!),\n\t\t\t\t\tURI.revive((<extHostProtocol.IWorkspaceFileEditDto>edit).newResource!),\n\t\t\t\t\t(<extHostProtocol.IWorkspaceFileEditDto>edit).options\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfor (const [uri, array] of edits) {\n\t\t\tresult.set(uri, array);\n\t\t}\n\t\treturn result;\n\t}\n}\n\n\nexport namespace SymbolKind {\n\n\tconst _fromMapping: { [kind: number]: languages.SymbolKind } = Object.create(null);\n\t_fromMapping[types.SymbolKind.File] = languages.SymbolKind.File;\n\t_fromMapping[types.SymbolKind.Module] = languages.SymbolKind.Module;\n\t_fromMapping[types.SymbolKind.Namespace] = languages.SymbolKind.Namespace;\n\t_fromMapping[types.SymbolKind.Package] = languages.SymbolKind.Package;\n\t_fromMapping[types.SymbolKind.Class] = languages.SymbolKind.Class;\n\t_fromMapping[types.SymbolKind.Method] = languages.SymbolKind.Method;\n\t_fromMapping[types.SymbolKind.Property] = languages.SymbolKind.Property;\n\t_fromMapping[types.SymbolKind.Field] = languages.SymbolKind.Field;\n\t_fromMapping[types.SymbolKind.Constructor] = languages.SymbolKind.Constructor;\n\t_fromMapping[types.SymbolKind.Enum] = languages.SymbolKind.Enum;\n\t_fromMapping[types.SymbolKind.Interface] = languages.SymbolKind.Interface;\n\t_fromMapping[types.SymbolKind.Function] = languages.SymbolKind.Function;\n\t_fromMapping[types.SymbolKind.Variable] = languages.SymbolKind.Variable;\n\t_fromMapping[types.SymbolKind.Constant] = languages.SymbolKind.Constant;\n\t_fromMapping[types.SymbolKind.String] = languages.SymbolKind.String;\n\t_fromMapping[types.SymbolKind.Number] = languages.SymbolKind.Number;\n\t_fromMapping[types.SymbolKind.Boolean] = languages.SymbolKind.Boolean;\n\t_fromMapping[types.SymbolKind.Array] = languages.SymbolKind.Array;\n\t_fromMapping[types.SymbolKind.Object] = languages.SymbolKind.Object;\n\t_fromMapping[types.SymbolKind.Key] = languages.SymbolKind.Key;\n\t_fromMapping[types.SymbolKind.Null] = languages.SymbolKind.Null;\n\t_fromMapping[types.SymbolKind.EnumMember] = languages.SymbolKind.EnumMember;\n\t_fromMapping[types.SymbolKind.Struct] = languages.SymbolKind.Struct;\n\t_fromMapping[types.SymbolKind.Event] = languages.SymbolKind.Event;\n\t_fromMapping[types.SymbolKind.Operator] = languages.SymbolKind.Operator;\n\t_fromMapping[types.SymbolKind.TypeParameter] = languages.SymbolKind.TypeParameter;\n\n\texport function from(kind: vscode.SymbolKind): languages.SymbolKind {\n\t\treturn typeof _fromMapping[kind] === 'number' ? _fromMapping[kind] : languages.SymbolKind.Property;\n\t}\n\n\texport function to(kind: languages.SymbolKind): vscode.SymbolKind {\n\t\tfor (const k in _fromMapping) {\n\t\t\tif (_fromMapping[k] === kind) {\n\t\t\t\treturn Number(k);\n\t\t\t}\n\t\t}\n\t\treturn types.SymbolKind.Property;\n\t}\n}\n\nexport namespace SymbolTag {\n\n\texport function from(kind: types.SymbolTag): languages.SymbolTag {\n\t\tswitch (kind) {\n\t\t\tcase types.SymbolTag.Deprecated: return languages.SymbolTag.Deprecated;\n\t\t}\n\t}\n\n\texport function to(kind: languages.SymbolTag): types.SymbolTag {\n\t\tswitch (kind) {\n\t\t\tcase languages.SymbolTag.Deprecated: return types.SymbolTag.Deprecated;\n\t\t}\n\t}\n}\n\nexport namespace WorkspaceSymbol {\n\texport function from(info: vscode.SymbolInformation): search.IWorkspaceSymbol {\n\t\treturn {\n\t\t\tname: info.name,\n\t\t\tkind: SymbolKind.from(info.kind),\n\t\t\ttags: info.tags && info.tags.map(SymbolTag.from),\n\t\t\tcontainerName: info.containerName,\n\t\t\tlocation: location.from(info.location)\n\t\t};\n\t}\n\texport function to(info: search.IWorkspaceSymbol): types.SymbolInformation {\n\t\tconst result = new types.SymbolInformation(\n\t\t\tinfo.name,\n\t\t\tSymbolKind.to(info.kind),\n\t\t\tinfo.containerName,\n\t\t\tlocation.to(info.location)\n\t\t);\n\t\tresult.tags = info.tags && info.tags.map(SymbolTag.to);\n\t\treturn result;\n\t}\n}\n\nexport namespace DocumentSymbol {\n\texport function from(info: vscode.DocumentSymbol): languages.DocumentSymbol {\n\t\tconst result: languages.DocumentSymbol = {\n\t\t\tname: info.name || '!!MISSING: name!!',\n\t\t\tdetail: info.detail,\n\t\t\trange: Range.from(info.range),\n\t\t\tselectionRange: Range.from(info.selectionRange),\n\t\t\tkind: SymbolKind.from(info.kind),\n\t\t\ttags: info.tags?.map(SymbolTag.from) ?? []\n\t\t};\n\t\tif (info.children) {\n\t\t\tresult.children = info.children.map(from);\n\t\t}\n\t\treturn result;\n\t}\n\texport function to(info: languages.DocumentSymbol): vscode.DocumentSymbol {\n\t\tconst result = new types.DocumentSymbol(\n\t\t\tinfo.name,\n\t\t\tinfo.detail,\n\t\t\tSymbolKind.to(info.kind),\n\t\t\tRange.to(info.range),\n\t\t\tRange.to(info.selectionRange),\n\t\t);\n\t\tif (isNonEmptyArray(info.tags)) {\n\t\t\tresult.tags = info.tags.map(SymbolTag.to);\n\t\t}\n\t\tif (info.children) {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tresult.children = info.children.map(to) as any;\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport namespace CallHierarchyItem {\n\n\texport function to(item: extHostProtocol.ICallHierarchyItemDto): types.CallHierarchyItem {\n\t\tconst result = new types.CallHierarchyItem(\n\t\t\tSymbolKind.to(item.kind),\n\t\t\titem.name,\n\t\t\titem.detail || '',\n\t\t\tURI.revive(item.uri),\n\t\t\tRange.to(item.range),\n\t\t\tRange.to(item.selectionRange)\n\t\t);\n\n\t\tresult._sessionId = item._sessionId;\n\t\tresult._itemId = item._itemId;\n\n\t\treturn result;\n\t}\n\n\texport function from(item: vscode.CallHierarchyItem, sessionId?: string, itemId?: string): extHostProtocol.ICallHierarchyItemDto {\n\n\t\tsessionId = sessionId ?? (<types.CallHierarchyItem>item)._sessionId;\n\t\titemId = itemId ?? (<types.CallHierarchyItem>item)._itemId;\n\n\t\tif (sessionId === undefined || itemId === undefined) {\n\t\t\tthrow new Error('invalid item');\n\t\t}\n\n\t\treturn {\n\t\t\t_sessionId: sessionId,\n\t\t\t_itemId: itemId,\n\t\t\tname: item.name,\n\t\t\tdetail: item.detail,\n\t\t\tkind: SymbolKind.from(item.kind),\n\t\t\turi: item.uri,\n\t\t\trange: Range.from(item.range),\n\t\t\tselectionRange: Range.from(item.selectionRange),\n\t\t\ttags: item.tags?.map(SymbolTag.from)\n\t\t};\n\t}\n}\n\nexport namespace CallHierarchyIncomingCall {\n\n\texport function to(item: extHostProtocol.IIncomingCallDto): types.CallHierarchyIncomingCall {\n\t\treturn new types.CallHierarchyIncomingCall(\n\t\t\tCallHierarchyItem.to(item.from),\n\t\t\titem.fromRanges.map(r => Range.to(r))\n\t\t);\n\t}\n}\n\nexport namespace CallHierarchyOutgoingCall {\n\n\texport function to(item: extHostProtocol.IOutgoingCallDto): types.CallHierarchyOutgoingCall {\n\t\treturn new types.CallHierarchyOutgoingCall(\n\t\t\tCallHierarchyItem.to(item.to),\n\t\t\titem.fromRanges.map(r => Range.to(r))\n\t\t);\n\t}\n}\n\n\nexport namespace location {\n\texport function from(value: vscode.Location): languages.Location {\n\t\treturn {\n\t\t\trange: value.range && Range.from(value.range),\n\t\t\turi: value.uri\n\t\t};\n\t}\n\n\texport function to(value: extHostProtocol.ILocationDto): types.Location {\n\t\treturn new types.Location(URI.revive(value.uri), Range.to(value.range));\n\t}\n}\n\nexport namespace DefinitionLink {\n\texport function from(value: vscode.Location | vscode.DefinitionLink): languages.LocationLink {\n\t\tconst definitionLink = <vscode.DefinitionLink>value;\n\t\tconst location = <vscode.Location>value;\n\t\treturn {\n\t\t\toriginSelectionRange: definitionLink.originSelectionRange\n\t\t\t\t? Range.from(definitionLink.originSelectionRange)\n\t\t\t\t: undefined,\n\t\t\turi: definitionLink.targetUri ? definitionLink.targetUri : location.uri,\n\t\t\trange: Range.from(definitionLink.targetRange ? definitionLink.targetRange : location.range),\n\t\t\ttargetSelectionRange: definitionLink.targetSelectionRange\n\t\t\t\t? Range.from(definitionLink.targetSelectionRange)\n\t\t\t\t: undefined,\n\t\t};\n\t}\n\texport function to(value: extHostProtocol.ILocationLinkDto): vscode.LocationLink {\n\t\treturn {\n\t\t\ttargetUri: URI.revive(value.uri),\n\t\t\ttargetRange: Range.to(value.range),\n\t\t\ttargetSelectionRange: value.targetSelectionRange\n\t\t\t\t? Range.to(value.targetSelectionRange)\n\t\t\t\t: undefined,\n\t\t\toriginSelectionRange: value.originSelectionRange\n\t\t\t\t? Range.to(value.originSelectionRange)\n\t\t\t\t: undefined\n\t\t};\n\t}\n}\n\nexport namespace Hover {\n\texport function from(hover: vscode.VerboseHover): languages.Hover {\n\t\tconst convertedHover: languages.Hover = {\n\t\t\trange: Range.from(hover.range),\n\t\t\tcontents: MarkdownString.fromMany(hover.contents),\n\t\t\tcanIncreaseVerbosity: hover.canIncreaseVerbosity,\n\t\t\tcanDecreaseVerbosity: hover.canDecreaseVerbosity,\n\t\t};\n\t\treturn convertedHover;\n\t}\n\n\texport function to(info: languages.Hover): types.VerboseHover {\n\t\tconst contents = info.contents.map(MarkdownString.to);\n\t\tconst range = Range.to(info.range);\n\t\tconst canIncreaseVerbosity = info.canIncreaseVerbosity;\n\t\tconst canDecreaseVerbosity = info.canDecreaseVerbosity;\n\t\treturn new types.VerboseHover(contents, range, canIncreaseVerbosity, canDecreaseVerbosity);\n\t}\n}\n\nexport namespace EvaluatableExpression {\n\texport function from(expression: vscode.EvaluatableExpression): languages.EvaluatableExpression {\n\t\treturn {\n\t\t\trange: Range.from(expression.range),\n\t\t\texpression: expression.expression\n\t\t};\n\t}\n\n\texport function to(info: languages.EvaluatableExpression): types.EvaluatableExpression {\n\t\treturn new types.EvaluatableExpression(Range.to(info.range), info.expression);\n\t}\n}\n\nexport namespace InlineValue {\n\texport function from(inlineValue: vscode.InlineValue): languages.InlineValue {\n\t\tif (inlineValue instanceof types.InlineValueText) {\n\t\t\treturn {\n\t\t\t\ttype: 'text',\n\t\t\t\trange: Range.from(inlineValue.range),\n\t\t\t\ttext: inlineValue.text\n\t\t\t} satisfies languages.InlineValueText;\n\t\t} else if (inlineValue instanceof types.InlineValueVariableLookup) {\n\t\t\treturn {\n\t\t\t\ttype: 'variable',\n\t\t\t\trange: Range.from(inlineValue.range),\n\t\t\t\tvariableName: inlineValue.variableName,\n\t\t\t\tcaseSensitiveLookup: inlineValue.caseSensitiveLookup\n\t\t\t} satisfies languages.InlineValueVariableLookup;\n\t\t} else if (inlineValue instanceof types.InlineValueEvaluatableExpression) {\n\t\t\treturn {\n\t\t\t\ttype: 'expression',\n\t\t\t\trange: Range.from(inlineValue.range),\n\t\t\t\texpression: inlineValue.expression\n\t\t\t} satisfies languages.InlineValueExpression;\n\t\t} else {\n\t\t\tthrow new Error(`Unknown 'InlineValue' type`);\n\t\t}\n\t}\n\n\texport function to(inlineValue: languages.InlineValue): vscode.InlineValue {\n\t\tswitch (inlineValue.type) {\n\t\t\tcase 'text':\n\t\t\t\treturn {\n\t\t\t\t\trange: Range.to(inlineValue.range),\n\t\t\t\t\ttext: inlineValue.text\n\t\t\t\t} satisfies vscode.InlineValueText;\n\t\t\tcase 'variable':\n\t\t\t\treturn {\n\t\t\t\t\trange: Range.to(inlineValue.range),\n\t\t\t\t\tvariableName: inlineValue.variableName,\n\t\t\t\t\tcaseSensitiveLookup: inlineValue.caseSensitiveLookup\n\t\t\t\t} satisfies vscode.InlineValueVariableLookup;\n\t\t\tcase 'expression':\n\t\t\t\treturn {\n\t\t\t\t\trange: Range.to(inlineValue.range),\n\t\t\t\t\texpression: inlineValue.expression\n\t\t\t\t} satisfies vscode.InlineValueEvaluatableExpression;\n\t\t}\n\t}\n}\n\nexport namespace InlineValueContext {\n\texport function from(inlineValueContext: vscode.InlineValueContext): extHostProtocol.IInlineValueContextDto {\n\t\treturn {\n\t\t\tframeId: inlineValueContext.frameId,\n\t\t\tstoppedLocation: Range.from(inlineValueContext.stoppedLocation)\n\t\t};\n\t}\n\n\texport function to(inlineValueContext: extHostProtocol.IInlineValueContextDto): types.InlineValueContext {\n\t\treturn new types.InlineValueContext(inlineValueContext.frameId, Range.to(inlineValueContext.stoppedLocation));\n\t}\n}\n\nexport namespace DocumentHighlight {\n\texport function from(documentHighlight: vscode.DocumentHighlight): languages.DocumentHighlight {\n\t\treturn {\n\t\t\trange: Range.from(documentHighlight.range),\n\t\t\tkind: documentHighlight.kind\n\t\t};\n\t}\n\texport function to(occurrence: languages.DocumentHighlight): types.DocumentHighlight {\n\t\treturn new types.DocumentHighlight(Range.to(occurrence.range), occurrence.kind);\n\t}\n}\n\nexport namespace MultiDocumentHighlight {\n\texport function from(multiDocumentHighlight: vscode.MultiDocumentHighlight): languages.MultiDocumentHighlight {\n\t\treturn {\n\t\t\turi: multiDocumentHighlight.uri,\n\t\t\thighlights: multiDocumentHighlight.highlights.map(DocumentHighlight.from)\n\t\t};\n\t}\n\n\texport function to(multiDocumentHighlight: languages.MultiDocumentHighlight): types.MultiDocumentHighlight {\n\t\treturn new types.MultiDocumentHighlight(URI.revive(multiDocumentHighlight.uri), multiDocumentHighlight.highlights.map(DocumentHighlight.to));\n\t}\n}\n\nexport namespace CompletionTriggerKind {\n\texport function to(kind: languages.CompletionTriggerKind) {\n\t\tswitch (kind) {\n\t\t\tcase languages.CompletionTriggerKind.TriggerCharacter:\n\t\t\t\treturn types.CompletionTriggerKind.TriggerCharacter;\n\t\t\tcase languages.CompletionTriggerKind.TriggerForIncompleteCompletions:\n\t\t\t\treturn types.CompletionTriggerKind.TriggerForIncompleteCompletions;\n\t\t\tcase languages.CompletionTriggerKind.Invoke:\n\t\t\tdefault:\n\t\t\t\treturn types.CompletionTriggerKind.Invoke;\n\t\t}\n\t}\n}\n\nexport namespace CompletionContext {\n\texport function to(context: languages.CompletionContext): types.CompletionContext {\n\t\treturn {\n\t\t\ttriggerKind: CompletionTriggerKind.to(context.triggerKind),\n\t\t\ttriggerCharacter: context.triggerCharacter\n\t\t};\n\t}\n}\n\nexport namespace CompletionItemTag {\n\n\texport function from(kind: types.CompletionItemTag): languages.CompletionItemTag {\n\t\tswitch (kind) {\n\t\t\tcase types.CompletionItemTag.Deprecated: return languages.CompletionItemTag.Deprecated;\n\t\t}\n\t}\n\n\texport function to(kind: languages.CompletionItemTag): types.CompletionItemTag {\n\t\tswitch (kind) {\n\t\t\tcase languages.CompletionItemTag.Deprecated: return types.CompletionItemTag.Deprecated;\n\t\t}\n\t}\n}\n\nexport namespace CompletionCommand {\n\texport function from(c: vscode.Command | { command: vscode.Command; icon: vscode.ThemeIcon }, converter: CommandsConverter, disposables: DisposableStore): { command: extHostProtocol.ICommandDto; icon?: languages.IconPath } {\n\t\tif ('icon' in c && 'command' in c) {\n\t\t\treturn {\n\t\t\t\tcommand: converter.toInternal(c.command, disposables),\n\t\t\t\ticon: IconPath.fromThemeIcon(c.icon)\n\t\t\t};\n\t\t}\n\t\treturn { command: converter.toInternal(c, disposables) };\n\t}\n}\n\nexport namespace CompletionItemKind {\n\n\tconst _from = new Map<types.CompletionItemKind, languages.CompletionItemKind>([\n\t\t[types.CompletionItemKind.Method, languages.CompletionItemKind.Method],\n\t\t[types.CompletionItemKind.Function, languages.CompletionItemKind.Function],\n\t\t[types.CompletionItemKind.Constructor, languages.CompletionItemKind.Constructor],\n\t\t[types.CompletionItemKind.Field, languages.CompletionItemKind.Field],\n\t\t[types.CompletionItemKind.Variable, languages.CompletionItemKind.Variable],\n\t\t[types.CompletionItemKind.Class, languages.CompletionItemKind.Class],\n\t\t[types.CompletionItemKind.Interface, languages.CompletionItemKind.Interface],\n\t\t[types.CompletionItemKind.Struct, languages.CompletionItemKind.Struct],\n\t\t[types.CompletionItemKind.Module, languages.CompletionItemKind.Module],\n\t\t[types.CompletionItemKind.Property, languages.CompletionItemKind.Property],\n\t\t[types.CompletionItemKind.Unit, languages.CompletionItemKind.Unit],\n\t\t[types.CompletionItemKind.Value, languages.CompletionItemKind.Value],\n\t\t[types.CompletionItemKind.Constant, languages.CompletionItemKind.Constant],\n\t\t[types.CompletionItemKind.Enum, languages.CompletionItemKind.Enum],\n\t\t[types.CompletionItemKind.EnumMember, languages.CompletionItemKind.EnumMember],\n\t\t[types.CompletionItemKind.Keyword, languages.CompletionItemKind.Keyword],\n\t\t[types.CompletionItemKind.Snippet, languages.CompletionItemKind.Snippet],\n\t\t[types.CompletionItemKind.Text, languages.CompletionItemKind.Text],\n\t\t[types.CompletionItemKind.Color, languages.CompletionItemKind.Color],\n\t\t[types.CompletionItemKind.File, languages.CompletionItemKind.File],\n\t\t[types.CompletionItemKind.Reference, languages.CompletionItemKind.Reference],\n\t\t[types.CompletionItemKind.Folder, languages.CompletionItemKind.Folder],\n\t\t[types.CompletionItemKind.Event, languages.CompletionItemKind.Event],\n\t\t[types.CompletionItemKind.Operator, languages.CompletionItemKind.Operator],\n\t\t[types.CompletionItemKind.TypeParameter, languages.CompletionItemKind.TypeParameter],\n\t\t[types.CompletionItemKind.Issue, languages.CompletionItemKind.Issue],\n\t\t[types.CompletionItemKind.User, languages.CompletionItemKind.User],\n\t]);\n\n\texport function from(kind: types.CompletionItemKind): languages.CompletionItemKind {\n\t\treturn _from.get(kind) ?? languages.CompletionItemKind.Property;\n\t}\n\n\tconst _to = new Map<languages.CompletionItemKind, types.CompletionItemKind>([\n\t\t[languages.CompletionItemKind.Method, types.CompletionItemKind.Method],\n\t\t[languages.CompletionItemKind.Function, types.CompletionItemKind.Function],\n\t\t[languages.CompletionItemKind.Constructor, types.CompletionItemKind.Constructor],\n\t\t[languages.CompletionItemKind.Field, types.CompletionItemKind.Field],\n\t\t[languages.CompletionItemKind.Variable, types.CompletionItemKind.Variable],\n\t\t[languages.CompletionItemKind.Class, types.CompletionItemKind.Class],\n\t\t[languages.CompletionItemKind.Interface, types.CompletionItemKind.Interface],\n\t\t[languages.CompletionItemKind.Struct, types.CompletionItemKind.Struct],\n\t\t[languages.CompletionItemKind.Module, types.CompletionItemKind.Module],\n\t\t[languages.CompletionItemKind.Property, types.CompletionItemKind.Property],\n\t\t[languages.CompletionItemKind.Unit, types.CompletionItemKind.Unit],\n\t\t[languages.CompletionItemKind.Value, types.CompletionItemKind.Value],\n\t\t[languages.CompletionItemKind.Constant, types.CompletionItemKind.Constant],\n\t\t[languages.CompletionItemKind.Enum, types.CompletionItemKind.Enum],\n\t\t[languages.CompletionItemKind.EnumMember, types.CompletionItemKind.EnumMember],\n\t\t[languages.CompletionItemKind.Keyword, types.CompletionItemKind.Keyword],\n\t\t[languages.CompletionItemKind.Snippet, types.CompletionItemKind.Snippet],\n\t\t[languages.CompletionItemKind.Text, types.CompletionItemKind.Text],\n\t\t[languages.CompletionItemKind.Color, types.CompletionItemKind.Color],\n\t\t[languages.CompletionItemKind.File, types.CompletionItemKind.File],\n\t\t[languages.CompletionItemKind.Reference, types.CompletionItemKind.Reference],\n\t\t[languages.CompletionItemKind.Folder, types.CompletionItemKind.Folder],\n\t\t[languages.CompletionItemKind.Event, types.CompletionItemKind.Event],\n\t\t[languages.CompletionItemKind.Operator, types.CompletionItemKind.Operator],\n\t\t[languages.CompletionItemKind.TypeParameter, types.CompletionItemKind.TypeParameter],\n\t\t[languages.CompletionItemKind.User, types.CompletionItemKind.User],\n\t\t[languages.CompletionItemKind.Issue, types.CompletionItemKind.Issue],\n\t]);\n\n\texport function to(kind: languages.CompletionItemKind): types.CompletionItemKind {\n\t\treturn _to.get(kind) ?? types.CompletionItemKind.Property;\n\t}\n}\n\nexport namespace CompletionItem {\n\n\texport function to(suggestion: languages.CompletionItem, converter?: Command.ICommandsConverter): types.CompletionItem {\n\n\t\tconst result = new types.CompletionItem(suggestion.label);\n\t\tresult.insertText = suggestion.insertText;\n\t\tresult.kind = CompletionItemKind.to(suggestion.kind);\n\t\tresult.tags = suggestion.tags?.map(CompletionItemTag.to);\n\t\tresult.detail = suggestion.detail;\n\t\tresult.documentation = htmlContent.isMarkdownString(suggestion.documentation) ? MarkdownString.to(suggestion.documentation) : suggestion.documentation;\n\t\tresult.sortText = suggestion.sortText;\n\t\tresult.filterText = suggestion.filterText;\n\t\tresult.preselect = suggestion.preselect;\n\t\tresult.commitCharacters = suggestion.commitCharacters;\n\n\t\t// range\n\t\tif (editorRange.Range.isIRange(suggestion.range)) {\n\t\t\tresult.range = Range.to(suggestion.range);\n\t\t} else if (typeof suggestion.range === 'object') {\n\t\t\tresult.range = { inserting: Range.to(suggestion.range.insert), replacing: Range.to(suggestion.range.replace) };\n\t\t}\n\n\t\tresult.keepWhitespace = typeof suggestion.insertTextRules === 'undefined' ? false : Boolean(suggestion.insertTextRules & languages.CompletionItemInsertTextRule.KeepWhitespace);\n\t\t// 'insertText'-logic\n\t\tif (typeof suggestion.insertTextRules !== 'undefined' && suggestion.insertTextRules & languages.CompletionItemInsertTextRule.InsertAsSnippet) {\n\t\t\tresult.insertText = new types.SnippetString(suggestion.insertText);\n\t\t} else {\n\t\t\tresult.insertText = suggestion.insertText;\n\t\t\tresult.textEdit = result.range instanceof types.Range ? new types.TextEdit(result.range, result.insertText) : undefined;\n\t\t}\n\t\tif (suggestion.additionalTextEdits && suggestion.additionalTextEdits.length > 0) {\n\t\t\tresult.additionalTextEdits = suggestion.additionalTextEdits.map(e => TextEdit.to(e as languages.TextEdit));\n\t\t}\n\t\tresult.command = converter && suggestion.command ? converter.fromInternal(suggestion.command) : undefined;\n\n\t\treturn result;\n\t}\n}\n\nexport namespace ParameterInformation {\n\texport function from(info: types.ParameterInformation): languages.ParameterInformation {\n\t\tif (typeof info.label !== 'string' && !Array.isArray(info.label)) {\n\t\t\tthrow new TypeError('Invalid label');\n\t\t}\n\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: MarkdownString.fromStrict(info.documentation)\n\t\t};\n\t}\n\texport function to(info: languages.ParameterInformation): types.ParameterInformation {\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: htmlContent.isMarkdownString(info.documentation) ? MarkdownString.to(info.documentation) : info.documentation\n\t\t};\n\t}\n}\n\nexport namespace SignatureInformation {\n\n\texport function from(info: types.SignatureInformation): languages.SignatureInformation {\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: MarkdownString.fromStrict(info.documentation),\n\t\t\tparameters: Array.isArray(info.parameters) ? info.parameters.map(ParameterInformation.from) : [],\n\t\t\tactiveParameter: info.activeParameter,\n\t\t};\n\t}\n\n\texport function to(info: languages.SignatureInformation): types.SignatureInformation {\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: htmlContent.isMarkdownString(info.documentation) ? MarkdownString.to(info.documentation) : info.documentation,\n\t\t\tparameters: Array.isArray(info.parameters) ? info.parameters.map(ParameterInformation.to) : [],\n\t\t\tactiveParameter: info.activeParameter,\n\t\t};\n\t}\n}\n\nexport namespace SignatureHelp {\n\n\texport function from(help: types.SignatureHelp): languages.SignatureHelp {\n\t\treturn {\n\t\t\tactiveSignature: help.activeSignature,\n\t\t\tactiveParameter: help.activeParameter,\n\t\t\tsignatures: Array.isArray(help.signatures) ? help.signatures.map(SignatureInformation.from) : [],\n\t\t};\n\t}\n\n\texport function to(help: languages.SignatureHelp): types.SignatureHelp {\n\t\treturn {\n\t\t\tactiveSignature: help.activeSignature,\n\t\t\tactiveParameter: help.activeParameter,\n\t\t\tsignatures: Array.isArray(help.signatures) ? help.signatures.map(SignatureInformation.to) : [],\n\t\t};\n\t}\n}\n\nexport namespace InlayHint {\n\n\texport function to(converter: Command.ICommandsConverter, hint: languages.InlayHint): vscode.InlayHint {\n\t\tconst res = new types.InlayHint(\n\t\t\tPosition.to(hint.position),\n\t\t\ttypeof hint.label === 'string' ? hint.label : hint.label.map(InlayHintLabelPart.to.bind(undefined, converter)),\n\t\t\thint.kind && InlayHintKind.to(hint.kind)\n\t\t);\n\t\tres.textEdits = hint.textEdits && hint.textEdits.map(TextEdit.to);\n\t\tres.tooltip = htmlContent.isMarkdownString(hint.tooltip) ? MarkdownString.to(hint.tooltip) : hint.tooltip;\n\t\tres.paddingLeft = hint.paddingLeft;\n\t\tres.paddingRight = hint.paddingRight;\n\t\treturn res;\n\t}\n}\n\nexport namespace InlayHintLabelPart {\n\n\texport function to(converter: Command.ICommandsConverter, part: languages.InlayHintLabelPart): types.InlayHintLabelPart {\n\t\tconst result = new types.InlayHintLabelPart(part.label);\n\t\tresult.tooltip = htmlContent.isMarkdownString(part.tooltip)\n\t\t\t? MarkdownString.to(part.tooltip)\n\t\t\t: part.tooltip;\n\t\tif (languages.Command.is(part.command)) {\n\t\t\tresult.command = converter.fromInternal(part.command);\n\t\t}\n\t\tif (part.location) {\n\t\t\tresult.location = location.to(part.location);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport namespace InlayHintKind {\n\texport function from(kind: vscode.InlayHintKind): languages.InlayHintKind {\n\t\treturn kind;\n\t}\n\texport function to(kind: languages.InlayHintKind): vscode.InlayHintKind {\n\t\treturn kind;\n\t}\n}\n\nexport namespace DocumentLink {\n\n\texport function from(link: vscode.DocumentLink): languages.ILink {\n\t\treturn {\n\t\t\trange: Range.from(link.range),\n\t\t\turl: link.target,\n\t\t\ttooltip: link.tooltip\n\t\t};\n\t}\n\n\texport function to(link: languages.ILink): vscode.DocumentLink {\n\t\tlet target: URI | undefined = undefined;\n\t\tif (link.url) {\n\t\t\ttry {\n\t\t\t\ttarget = typeof link.url === 'string' ? URI.parse(link.url, true) : URI.revive(link.url);\n\t\t\t} catch (err) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t}\n\t\tconst result = new types.DocumentLink(Range.to(link.range), target);\n\t\tresult.tooltip = link.tooltip;\n\t\treturn result;\n\t}\n}\n\nexport namespace ColorPresentation {\n\texport function to(colorPresentation: languages.IColorPresentation): types.ColorPresentation {\n\t\tconst cp = new types.ColorPresentation(colorPresentation.label);\n\t\tif (colorPresentation.textEdit) {\n\t\t\tcp.textEdit = TextEdit.to(colorPresentation.textEdit);\n\t\t}\n\t\tif (colorPresentation.additionalTextEdits) {\n\t\t\tcp.additionalTextEdits = colorPresentation.additionalTextEdits.map(value => TextEdit.to(value));\n\t\t}\n\t\treturn cp;\n\t}\n\n\texport function from(colorPresentation: vscode.ColorPresentation): languages.IColorPresentation {\n\t\treturn {\n\t\t\tlabel: colorPresentation.label,\n\t\t\ttextEdit: colorPresentation.textEdit ? TextEdit.from(colorPresentation.textEdit) : undefined,\n\t\t\tadditionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => TextEdit.from(value)) : undefined\n\t\t};\n\t}\n}\n\nexport namespace Color {\n\texport function to(c: [number, number, number, number]): types.Color {\n\t\treturn new types.Color(c[0], c[1], c[2], c[3]);\n\t}\n\texport function from(color: types.Color): [number, number, number, number] {\n\t\treturn [color.red, color.green, color.blue, color.alpha];\n\t}\n}\n\n\nexport namespace SelectionRange {\n\texport function from(obj: vscode.SelectionRange): languages.SelectionRange {\n\t\treturn { range: Range.from(obj.range) };\n\t}\n\n\texport function to(obj: languages.SelectionRange): vscode.SelectionRange {\n\t\treturn new types.SelectionRange(Range.to(obj.range));\n\t}\n}\n\nexport namespace TextDocumentSaveReason {\n\n\texport function to(reason: SaveReason): vscode.TextDocumentSaveReason {\n\t\tswitch (reason) {\n\t\t\tcase SaveReason.AUTO:\n\t\t\t\treturn types.TextDocumentSaveReason.AfterDelay;\n\t\t\tcase SaveReason.EXPLICIT:\n\t\t\t\treturn types.TextDocumentSaveReason.Manual;\n\t\t\tcase SaveReason.FOCUS_CHANGE:\n\t\t\tcase SaveReason.WINDOW_CHANGE:\n\t\t\t\treturn types.TextDocumentSaveReason.FocusOut;\n\t\t}\n\t}\n}\n\nexport namespace TextEditorLineNumbersStyle {\n\texport function from(style: vscode.TextEditorLineNumbersStyle): RenderLineNumbersType {\n\t\tswitch (style) {\n\t\t\tcase types.TextEditorLineNumbersStyle.Off:\n\t\t\t\treturn RenderLineNumbersType.Off;\n\t\t\tcase types.TextEditorLineNumbersStyle.Relative:\n\t\t\t\treturn RenderLineNumbersType.Relative;\n\t\t\tcase types.TextEditorLineNumbersStyle.Interval:\n\t\t\t\treturn RenderLineNumbersType.Interval;\n\t\t\tcase types.TextEditorLineNumbersStyle.On:\n\t\t\tdefault:\n\t\t\t\treturn RenderLineNumbersType.On;\n\t\t}\n\t}\n\texport function to(style: RenderLineNumbersType): vscode.TextEditorLineNumbersStyle {\n\t\tswitch (style) {\n\t\t\tcase RenderLineNumbersType.Off:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.Off;\n\t\t\tcase RenderLineNumbersType.Relative:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.Relative;\n\t\t\tcase RenderLineNumbersType.Interval:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.Interval;\n\t\t\tcase RenderLineNumbersType.On:\n\t\t\tdefault:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.On;\n\t\t}\n\t}\n}\n\nexport namespace EndOfLine {\n\n\texport function from(eol: vscode.EndOfLine): EndOfLineSequence | undefined {\n\t\tif (eol === types.EndOfLine.CRLF) {\n\t\t\treturn EndOfLineSequence.CRLF;\n\t\t} else if (eol === types.EndOfLine.LF) {\n\t\t\treturn EndOfLineSequence.LF;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\texport function to(eol: EndOfLineSequence): vscode.EndOfLine | undefined {\n\t\tif (eol === EndOfLineSequence.CRLF) {\n\t\t\treturn types.EndOfLine.CRLF;\n\t\t} else if (eol === EndOfLineSequence.LF) {\n\t\t\treturn types.EndOfLine.LF;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport namespace ProgressLocation {\n\texport function from(loc: vscode.ProgressLocation | { viewId: string }): MainProgressLocation | string {\n\t\tif (typeof loc === 'object') {\n\t\t\treturn loc.viewId;\n\t\t}\n\n\t\tswitch (loc) {\n\t\t\tcase types.ProgressLocation.SourceControl: return MainProgressLocation.Scm;\n\t\t\tcase types.ProgressLocation.Window: return MainProgressLocation.Window;\n\t\t\tcase types.ProgressLocation.Notification: return MainProgressLocation.Notification;\n\t\t}\n\t\tthrow new Error(`Unknown 'ProgressLocation'`);\n\t}\n}\n\nexport namespace FoldingRange {\n\texport function from(r: vscode.FoldingRange): languages.FoldingRange {\n\t\tconst range: languages.FoldingRange = { start: r.start + 1, end: r.end + 1 };\n\t\tif (r.kind) {\n\t\t\trange.kind = FoldingRangeKind.from(r.kind);\n\t\t}\n\t\treturn range;\n\t}\n\texport function to(r: languages.FoldingRange): vscode.FoldingRange {\n\t\tconst range: vscode.FoldingRange = { start: r.start - 1, end: r.end - 1 };\n\t\tif (r.kind) {\n\t\t\trange.kind = FoldingRangeKind.to(r.kind);\n\t\t}\n\t\treturn range;\n\t}\n}\n\nexport namespace FoldingRangeKind {\n\texport function from(kind: vscode.FoldingRangeKind | undefined): languages.FoldingRangeKind | undefined {\n\t\tif (kind) {\n\t\t\tswitch (kind) {\n\t\t\t\tcase types.FoldingRangeKind.Comment:\n\t\t\t\t\treturn languages.FoldingRangeKind.Comment;\n\t\t\t\tcase types.FoldingRangeKind.Imports:\n\t\t\t\t\treturn languages.FoldingRangeKind.Imports;\n\t\t\t\tcase types.FoldingRangeKind.Region:\n\t\t\t\t\treturn languages.FoldingRangeKind.Region;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\texport function to(kind: languages.FoldingRangeKind | undefined): vscode.FoldingRangeKind | undefined {\n\t\tif (kind) {\n\t\t\tswitch (kind.value) {\n\t\t\t\tcase languages.FoldingRangeKind.Comment.value:\n\t\t\t\t\treturn types.FoldingRangeKind.Comment;\n\t\t\t\tcase languages.FoldingRangeKind.Imports.value:\n\t\t\t\t\treturn types.FoldingRangeKind.Imports;\n\t\t\t\tcase languages.FoldingRangeKind.Region.value:\n\t\t\t\t\treturn types.FoldingRangeKind.Region;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport interface TextEditorOpenOptions extends vscode.TextDocumentShowOptions {\n\tbackground?: boolean;\n\toverride?: boolean;\n}\n\nexport namespace TextEditorOpenOptions {\n\n\texport function from(options?: TextEditorOpenOptions): ITextEditorOptions | undefined {\n\t\tif (options) {\n\t\t\treturn {\n\t\t\t\tpinned: typeof options.preview === 'boolean' ? !options.preview : undefined,\n\t\t\t\tinactive: options.background,\n\t\t\t\tpreserveFocus: options.preserveFocus,\n\t\t\t\tselection: typeof options.selection === 'object' ? Range.from(options.selection) : undefined,\n\t\t\t\toverride: typeof options.override === 'boolean' ? DEFAULT_EDITOR_ASSOCIATION.id : undefined\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n}\n\nexport namespace GlobPattern {\n\n\texport function from(pattern: vscode.GlobPattern): string | extHostProtocol.IRelativePatternDto;\n\texport function from(pattern: undefined): undefined;\n\texport function from(pattern: null): null;\n\texport function from(pattern: vscode.GlobPattern | undefined | null): string | extHostProtocol.IRelativePatternDto | undefined | null;\n\texport function from(pattern: vscode.GlobPattern | undefined | null): string | extHostProtocol.IRelativePatternDto | undefined | null {\n\t\tif (pattern instanceof types.RelativePattern) {\n\t\t\treturn pattern.toJSON();\n\t\t}\n\n\t\tif (typeof pattern === 'string') {\n\t\t\treturn pattern;\n\t\t}\n\n\t\t// This is slightly bogus because we declare this method to accept\n\t\t// `vscode.GlobPattern` which can be `vscode.RelativePattern` class,\n\t\t// but given we cannot enforce classes from our vscode.d.ts, we have\n\t\t// to probe for objects too\n\t\t// Refs: https://github.com/microsoft/vscode/issues/140771\n\t\tif (isRelativePatternShape(pattern) || isLegacyRelativePatternShape(pattern)) {\n\t\t\treturn new types.RelativePattern(pattern.baseUri ?? pattern.base, pattern.pattern).toJSON();\n\t\t}\n\n\t\treturn pattern; // preserve `undefined` and `null`\n\t}\n\n\tfunction isRelativePatternShape(obj: unknown): obj is { base: string; baseUri: URI; pattern: string } {\n\t\tconst rp = obj as { base: string; baseUri: URI; pattern: string } | undefined | null;\n\t\tif (!rp) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn URI.isUri(rp.baseUri) && typeof rp.pattern === 'string';\n\t}\n\n\tfunction isLegacyRelativePatternShape(obj: unknown): obj is { base: string; pattern: string } {\n\n\t\t// Before 1.64.x, `RelativePattern` did not have any `baseUri: Uri`\n\t\t// property. To preserve backwards compatibility with older extensions\n\t\t// we allow this old format when creating the `vscode.RelativePattern`.\n\n\t\tconst rp = obj as { base: string; pattern: string } | undefined | null;\n\t\tif (!rp) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn typeof rp.base === 'string' && typeof rp.pattern === 'string';\n\t}\n\n\texport function to(pattern: string | extHostProtocol.IRelativePatternDto): vscode.GlobPattern {\n\t\tif (typeof pattern === 'string') {\n\t\t\treturn pattern;\n\t\t}\n\n\t\treturn new types.RelativePattern(URI.revive(pattern.baseUri), pattern.pattern);\n\t}\n}\n\nexport namespace LanguageSelector {\n\n\texport function from(selector: undefined): undefined;\n\texport function from(selector: vscode.DocumentSelector): languageSelector.LanguageSelector;\n\texport function from(selector: vscode.DocumentSelector | undefined): languageSelector.LanguageSelector | undefined;\n\texport function from(selector: vscode.DocumentSelector | undefined): languageSelector.LanguageSelector | undefined {\n\t\tif (!selector) {\n\t\t\treturn undefined;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\treturn <languageSelector.LanguageSelector>selector.map(from);\n\t\t} else if (typeof selector === 'string') {\n\t\t\treturn selector;\n\t\t} else {\n\t\t\tconst filter = selector as vscode.DocumentFilter; // TODO: microsoft/TypeScript#42768\n\t\t\treturn {\n\t\t\t\tlanguage: filter.language,\n\t\t\t\tscheme: filter.scheme,\n\t\t\t\tpattern: GlobPattern.from(filter.pattern) ?? undefined,\n\t\t\t\texclusive: filter.exclusive,\n\t\t\t\tnotebookType: filter.notebookType\n\t\t\t};\n\t\t}\n\t}\n}\n\nexport namespace NotebookRange {\n\n\texport function from(range: vscode.NotebookRange): ICellRange {\n\t\treturn { start: range.start, end: range.end };\n\t}\n\n\texport function to(range: ICellRange): types.NotebookRange {\n\t\treturn new types.NotebookRange(range.start, range.end);\n\t}\n}\n\nexport namespace NotebookCellExecutionSummary {\n\texport function to(data: notebooks.NotebookCellInternalMetadata): vscode.NotebookCellExecutionSummary {\n\t\treturn {\n\t\t\ttiming: typeof data.runStartTime === 'number' && typeof data.runEndTime === 'number' ? { startTime: data.runStartTime, endTime: data.runEndTime } : undefined,\n\t\t\texecutionOrder: data.executionOrder,\n\t\t\tsuccess: data.lastRunSuccess\n\t\t};\n\t}\n\n\texport function from(data: vscode.NotebookCellExecutionSummary): Partial<notebooks.NotebookCellInternalMetadata> {\n\t\treturn {\n\t\t\tlastRunSuccess: data.success,\n\t\t\trunStartTime: data.timing?.startTime,\n\t\t\trunEndTime: data.timing?.endTime,\n\t\t\texecutionOrder: data.executionOrder\n\t\t};\n\t}\n}\n\nexport namespace NotebookCellKind {\n\texport function from(data: vscode.NotebookCellKind): notebooks.CellKind {\n\t\tswitch (data) {\n\t\t\tcase types.NotebookCellKind.Markup:\n\t\t\t\treturn notebooks.CellKind.Markup;\n\t\t\tcase types.NotebookCellKind.Code:\n\t\t\tdefault:\n\t\t\t\treturn notebooks.CellKind.Code;\n\t\t}\n\t}\n\n\texport function to(data: notebooks.CellKind): vscode.NotebookCellKind {\n\t\tswitch (data) {\n\t\t\tcase notebooks.CellKind.Markup:\n\t\t\t\treturn types.NotebookCellKind.Markup;\n\t\t\tcase notebooks.CellKind.Code:\n\t\t\tdefault:\n\t\t\t\treturn types.NotebookCellKind.Code;\n\t\t}\n\t}\n}\n\nexport namespace NotebookData {\n\n\texport function from(data: vscode.NotebookData): extHostProtocol.NotebookDataDto {\n\t\tconst res: extHostProtocol.NotebookDataDto = {\n\t\t\tmetadata: data.metadata ?? Object.create(null),\n\t\t\tcells: [],\n\t\t};\n\t\tfor (const cell of data.cells) {\n\t\t\ttypes.NotebookCellData.validate(cell);\n\t\t\tres.cells.push(NotebookCellData.from(cell));\n\t\t}\n\t\treturn res;\n\t}\n\n\texport function to(data: extHostProtocol.NotebookDataDto): vscode.NotebookData {\n\t\tconst res = new types.NotebookData(\n\t\t\tdata.cells.map(NotebookCellData.to),\n\t\t);\n\t\tif (!isEmptyObject(data.metadata)) {\n\t\t\tres.metadata = data.metadata;\n\t\t}\n\t\treturn res;\n\t}\n}\n\nexport namespace NotebookCellData {\n\n\texport function from(data: vscode.NotebookCellData): extHostProtocol.NotebookCellDataDto {\n\t\treturn {\n\t\t\tcellKind: NotebookCellKind.from(data.kind),\n\t\t\tlanguage: data.languageId,\n\t\t\tmime: data.mime,\n\t\t\tsource: data.value,\n\t\t\tmetadata: data.metadata,\n\t\t\tinternalMetadata: NotebookCellExecutionSummary.from(data.executionSummary ?? {}),\n\t\t\toutputs: data.outputs ? data.outputs.map(NotebookCellOutput.from) : []\n\t\t};\n\t}\n\n\texport function to(data: extHostProtocol.NotebookCellDataDto): vscode.NotebookCellData {\n\t\treturn new types.NotebookCellData(\n\t\t\tNotebookCellKind.to(data.cellKind),\n\t\t\tdata.source,\n\t\t\tdata.language,\n\t\t\tdata.mime,\n\t\t\tdata.outputs ? data.outputs.map(NotebookCellOutput.to) : undefined,\n\t\t\tdata.metadata,\n\t\t\tdata.internalMetadata ? NotebookCellExecutionSummary.to(data.internalMetadata) : undefined\n\t\t);\n\t}\n}\n\nexport namespace NotebookCellOutputItem {\n\texport function from(item: types.NotebookCellOutputItem): extHostProtocol.NotebookOutputItemDto {\n\t\treturn {\n\t\t\tmime: item.mime,\n\t\t\tvalueBytes: VSBuffer.wrap(item.data),\n\t\t};\n\t}\n\n\texport function to(item: extHostProtocol.NotebookOutputItemDto): types.NotebookCellOutputItem {\n\t\treturn new types.NotebookCellOutputItem(item.valueBytes.buffer, item.mime);\n\t}\n}\n\nexport namespace NotebookCellOutput {\n\texport function from(output: vscode.NotebookCellOutput): extHostProtocol.NotebookOutputDto {\n\t\treturn {\n\t\t\toutputId: output.id,\n\t\t\titems: output.items.map(NotebookCellOutputItem.from),\n\t\t\tmetadata: output.metadata\n\t\t};\n\t}\n\n\texport function to(output: extHostProtocol.NotebookOutputDto): vscode.NotebookCellOutput {\n\t\tconst items = output.items.map(NotebookCellOutputItem.to);\n\t\treturn new types.NotebookCellOutput(items, output.outputId, output.metadata);\n\t}\n}\n\n\nexport namespace NotebookExclusiveDocumentPattern {\n\texport function from(pattern: { include: vscode.GlobPattern | undefined; exclude: vscode.GlobPattern | undefined }): { include: string | extHostProtocol.IRelativePatternDto | undefined; exclude: string | extHostProtocol.IRelativePatternDto | undefined };\n\texport function from(pattern: vscode.GlobPattern): string | extHostProtocol.IRelativePatternDto;\n\texport function from(pattern: undefined): undefined;\n\texport function from(pattern: { include: vscode.GlobPattern | undefined | null; exclude: vscode.GlobPattern | undefined } | vscode.GlobPattern | undefined): string | extHostProtocol.IRelativePatternDto | { include: string | extHostProtocol.IRelativePatternDto | undefined; exclude: string | extHostProtocol.IRelativePatternDto | undefined } | undefined;\n\texport function from(pattern: { include: vscode.GlobPattern | undefined | null; exclude: vscode.GlobPattern | undefined } | vscode.GlobPattern | undefined): string | extHostProtocol.IRelativePatternDto | { include: string | extHostProtocol.IRelativePatternDto | undefined; exclude: string | extHostProtocol.IRelativePatternDto | undefined } | undefined {\n\t\tif (isExclusivePattern(pattern)) {\n\t\t\treturn {\n\t\t\t\tinclude: GlobPattern.from(pattern.include) ?? undefined,\n\t\t\t\texclude: GlobPattern.from(pattern.exclude) ?? undefined,\n\t\t\t};\n\t\t}\n\n\t\treturn GlobPattern.from(pattern) ?? undefined;\n\t}\n\n\texport function to(pattern: string | extHostProtocol.IRelativePatternDto | { include: string | extHostProtocol.IRelativePatternDto; exclude: string | extHostProtocol.IRelativePatternDto }): { include: vscode.GlobPattern; exclude: vscode.GlobPattern } | vscode.GlobPattern {\n\t\tif (isExclusivePattern(pattern)) {\n\t\t\treturn {\n\t\t\t\tinclude: GlobPattern.to(pattern.include),\n\t\t\t\texclude: GlobPattern.to(pattern.exclude)\n\t\t\t};\n\t\t}\n\n\t\treturn GlobPattern.to(pattern);\n\t}\n\n\tfunction isExclusivePattern<T>(obj: any): obj is { include?: T; exclude?: T } {\n\t\tconst ep = obj as { include?: T; exclude?: T } | undefined | null;\n\t\tif (!ep) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !isUndefinedOrNull(ep.include) && !isUndefinedOrNull(ep.exclude);\n\t}\n}\n\nexport namespace NotebookStatusBarItem {\n\texport function from(item: vscode.NotebookCellStatusBarItem, commandsConverter: Command.ICommandsConverter, disposables: DisposableStore): notebooks.INotebookCellStatusBarItem {\n\t\tconst command = typeof item.command === 'string' ? { title: '', command: item.command } : item.command;\n\t\treturn {\n\t\t\talignment: item.alignment === types.NotebookCellStatusBarAlignment.Left ? notebooks.CellStatusbarAlignment.Left : notebooks.CellStatusbarAlignment.Right,\n\t\t\tcommand: commandsConverter.toInternal(command, disposables), // TODO@roblou\n\t\t\ttext: item.text,\n\t\t\ttooltip: item.tooltip,\n\t\t\taccessibilityInformation: item.accessibilityInformation,\n\t\t\tpriority: item.priority\n\t\t};\n\t}\n}\n\nexport namespace NotebookKernelSourceAction {\n\texport function from(item: vscode.NotebookKernelSourceAction, commandsConverter: Command.ICommandsConverter, disposables: DisposableStore): notebooks.INotebookKernelSourceAction {\n\t\tconst command = typeof item.command === 'string' ? { title: '', command: item.command } : item.command;\n\n\t\treturn {\n\t\t\tcommand: commandsConverter.toInternal(command, disposables),\n\t\t\tlabel: item.label,\n\t\t\tdescription: item.description,\n\t\t\tdetail: item.detail,\n\t\t\tdocumentation: item.documentation\n\t\t};\n\t}\n}\n\nexport namespace NotebookDocumentContentOptions {\n\texport function from(options: vscode.NotebookDocumentContentOptions | undefined): notebooks.TransientOptions {\n\t\treturn {\n\t\t\ttransientOutputs: options?.transientOutputs ?? false,\n\t\t\ttransientCellMetadata: options?.transientCellMetadata ?? {},\n\t\t\ttransientDocumentMetadata: options?.transientDocumentMetadata ?? {},\n\t\t\tcellContentMetadata: options?.cellContentMetadata ?? {}\n\t\t};\n\t}\n}\n\nexport namespace NotebookRendererScript {\n\texport function from(preload: vscode.NotebookRendererScript): { uri: UriComponents; provides: readonly string[] } {\n\t\treturn {\n\t\t\turi: preload.uri,\n\t\t\tprovides: preload.provides\n\t\t};\n\t}\n\n\texport function to(preload: { uri: UriComponents; provides: readonly string[] }): vscode.NotebookRendererScript {\n\t\treturn new types.NotebookRendererScript(URI.revive(preload.uri), preload.provides);\n\t}\n}\n\nexport namespace TestMessage {\n\texport function from(message: vscode.TestMessage): ITestErrorMessage.Serialized {\n\t\treturn {\n\t\t\tmessage: MarkdownString.fromStrict(message.message) || '',\n\t\t\ttype: TestMessageType.Error,\n\t\t\texpected: message.expectedOutput,\n\t\t\tactual: message.actualOutput,\n\t\t\tcontextValue: message.contextValue,\n\t\t\tlocation: message.location && ({ range: Range.from(message.location.range), uri: message.location.uri }),\n\t\t\tstackTrace: message.stackTrace?.map(s => ({\n\t\t\t\tlabel: s.label,\n\t\t\t\tposition: s.position && Position.from(s.position),\n\t\t\t\turi: s.uri && URI.revive(s.uri).toJSON(),\n\t\t\t})),\n\t\t};\n\t}\n\n\texport function to(item: ITestErrorMessage.Serialized): vscode.TestMessage {\n\t\tconst message = new types.TestMessage(typeof item.message === 'string' ? item.message : MarkdownString.to(item.message));\n\t\tmessage.actualOutput = item.actual;\n\t\tmessage.expectedOutput = item.expected;\n\t\tmessage.contextValue = item.contextValue;\n\t\tmessage.location = item.location ? location.to(item.location) : undefined;\n\t\treturn message;\n\t}\n}\n\nexport namespace TestTag {\n\texport const namespace = namespaceTestTag;\n\n\texport const denamespace = denamespaceTestTag;\n}\n\nexport namespace TestRunProfile {\n\texport function from(item: types.TestRunProfileBase): ITestRunProfileReference {\n\t\treturn {\n\t\t\tcontrollerId: item.controllerId,\n\t\t\tprofileId: item.profileId,\n\t\t\tgroup: TestRunProfileKind.from(item.kind),\n\t\t};\n\t}\n}\n\nexport namespace TestRunProfileKind {\n\tconst profileGroupToBitset: { [K in vscode.TestRunProfileKind]: TestRunProfileBitset } = {\n\t\t[types.TestRunProfileKind.Coverage]: TestRunProfileBitset.Coverage,\n\t\t[types.TestRunProfileKind.Debug]: TestRunProfileBitset.Debug,\n\t\t[types.TestRunProfileKind.Run]: TestRunProfileBitset.Run,\n\t};\n\n\texport function from(kind: types.TestRunProfileKind): TestRunProfileBitset {\n\t\treturn profileGroupToBitset.hasOwnProperty(kind) ? profileGroupToBitset[kind] : TestRunProfileBitset.Run;\n\t}\n}\n\nexport namespace TestItem {\n\texport type Raw = vscode.TestItem;\n\n\texport function from(item: vscode.TestItem): ITestItem {\n\t\tconst ctrlId = getPrivateApiFor(item).controllerId;\n\t\treturn {\n\t\t\textId: TestId.fromExtHostTestItem(item, ctrlId).toString(),\n\t\t\tlabel: item.label,\n\t\t\turi: URI.revive(item.uri),\n\t\t\tbusy: item.busy,\n\t\t\ttags: item.tags.map(t => TestTag.namespace(ctrlId, t.id)),\n\t\t\trange: editorRange.Range.lift(Range.from(item.range)),\n\t\t\tdescription: item.description || null,\n\t\t\tsortText: item.sortText || null,\n\t\t\terror: item.error ? (MarkdownString.fromStrict(item.error) || null) : null,\n\t\t};\n\t}\n\n\texport function toPlain(item: ITestItem.Serialized): vscode.TestItem {\n\t\treturn {\n\t\t\tparent: undefined,\n\t\t\terror: undefined,\n\t\t\tid: TestId.fromString(item.extId).localId,\n\t\t\tlabel: item.label,\n\t\t\turi: URI.revive(item.uri),\n\t\t\ttags: (item.tags || []).map(t => {\n\t\t\t\tconst { tagId } = TestTag.denamespace(t);\n\t\t\t\treturn new types.TestTag(tagId);\n\t\t\t}),\n\t\t\tchildren: {\n\t\t\t\tadd: () => { },\n\t\t\t\tdelete: () => { },\n\t\t\t\tforEach: () => { },\n\t\t\t\t*[Symbol.iterator]() { },\n\t\t\t\tget: () => undefined,\n\t\t\t\treplace: () => { },\n\t\t\t\tsize: 0,\n\t\t\t},\n\t\t\trange: Range.to(item.range || undefined),\n\t\t\tcanResolveChildren: false,\n\t\t\tbusy: item.busy,\n\t\t\tdescription: item.description || undefined,\n\t\t\tsortText: item.sortText || undefined,\n\t\t};\n\t}\n}\n\nexport namespace TestTag {\n\texport function from(tag: vscode.TestTag): ITestTag {\n\t\treturn { id: tag.id };\n\t}\n\n\texport function to(tag: ITestTag): vscode.TestTag {\n\t\treturn new types.TestTag(tag.id);\n\t}\n}\n\nexport namespace TestResults {\n\tconst convertTestResultItem = (node: IPrefixTreeNode<TestResultItem.Serialized>, parent?: vscode.TestResultSnapshot): vscode.TestResultSnapshot | undefined => {\n\t\tconst item = node.value;\n\t\tif (!item) {\n\t\t\treturn undefined; // should be unreachable\n\t\t}\n\n\t\tconst snapshot: vscode.TestResultSnapshot = ({\n\t\t\t...TestItem.toPlain(item.item),\n\t\t\tparent,\n\t\t\ttaskStates: item.tasks.map(t => ({\n\t\t\t\tstate: t.state as number as types.TestResultState,\n\t\t\t\tduration: t.duration,\n\t\t\t\tmessages: t.messages\n\t\t\t\t\t.filter((m): m is ITestErrorMessage.Serialized => m.type === TestMessageType.Error)\n\t\t\t\t\t.map(TestMessage.to),\n\t\t\t})),\n\t\t\tchildren: [],\n\t\t});\n\n\t\tif (node.children) {\n\t\t\tfor (const child of node.children.values()) {\n\t\t\t\tconst c = convertTestResultItem(child, snapshot);\n\t\t\t\tif (c) {\n\t\t\t\t\tsnapshot.children.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn snapshot;\n\t};\n\n\texport function to(serialized: ISerializedTestResults): vscode.TestRunResult {\n\t\tconst tree = new WellDefinedPrefixTree<TestResultItem.Serialized>();\n\t\tfor (const item of serialized.items) {\n\t\t\ttree.insert(TestId.fromString(item.item.extId).path, item);\n\t\t}\n\n\t\t// Get the first node with a value in each subtree of IDs.\n\t\tconst queue = [tree.nodes];\n\t\tconst roots: IPrefixTreeNode<TestResultItem.Serialized>[] = [];\n\t\twhile (queue.length) {\n\t\t\tfor (const node of queue.pop()!) {\n\t\t\t\tif (node.value) {\n\t\t\t\t\troots.push(node);\n\t\t\t\t} else if (node.children) {\n\t\t\t\t\tqueue.push(node.children.values());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcompletedAt: serialized.completedAt,\n\t\t\tresults: roots.map(r => convertTestResultItem(r)).filter(isDefined),\n\t\t};\n\t}\n}\n\nexport namespace TestCoverage {\n\tfunction fromCoverageCount(count: vscode.TestCoverageCount): ICoverageCount {\n\t\treturn { covered: count.covered, total: count.total };\n\t}\n\n\tfunction fromLocation(location: vscode.Range | vscode.Position) {\n\t\treturn 'line' in location ? Position.from(location) : Range.from(location);\n\t}\n\n\tfunction toLocation(location: IPosition | editorRange.IRange): types.Position | types.Range;\n\tfunction toLocation(location: IPosition | editorRange.IRange | undefined): types.Position | types.Range | undefined;\n\tfunction toLocation(location: IPosition | editorRange.IRange | undefined): types.Position | types.Range | undefined {\n\t\tif (!location) { return undefined; }\n\t\treturn 'endLineNumber' in location ? Range.to(location) : Position.to(location);\n\t}\n\n\texport function to(serialized: CoverageDetails.Serialized): vscode.FileCoverageDetail {\n\t\tif (serialized.type === DetailType.Statement) {\n\t\t\tconst branches: vscode.BranchCoverage[] = [];\n\t\t\tif (serialized.branches) {\n\t\t\t\tfor (const branch of serialized.branches) {\n\t\t\t\t\tbranches.push({\n\t\t\t\t\t\texecuted: branch.count,\n\t\t\t\t\t\tlocation: toLocation(branch.location),\n\t\t\t\t\t\tlabel: branch.label\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new types.StatementCoverage(\n\t\t\t\tserialized.count,\n\t\t\t\ttoLocation(serialized.location),\n\t\t\t\tserialized.branches?.map(b => new types.BranchCoverage(\n\t\t\t\t\tb.count,\n\t\t\t\t\ttoLocation(b.location)!,\n\t\t\t\t\tb.label,\n\t\t\t\t))\n\t\t\t);\n\t\t} else {\n\t\t\treturn new types.DeclarationCoverage(\n\t\t\t\tserialized.name,\n\t\t\t\tserialized.count,\n\t\t\t\ttoLocation(serialized.location),\n\t\t\t);\n\t\t}\n\t}\n\n\texport function fromDetails(coverage: vscode.FileCoverageDetail): CoverageDetails.Serialized {\n\t\tif (typeof coverage.executed === 'number' && coverage.executed < 0) {\n\t\t\tthrow new Error(`Invalid coverage count ${coverage.executed}`);\n\t\t}\n\n\t\tif ('branches' in coverage) {\n\t\t\treturn {\n\t\t\t\tcount: coverage.executed,\n\t\t\t\tlocation: fromLocation(coverage.location),\n\t\t\t\ttype: DetailType.Statement,\n\t\t\t\tbranches: coverage.branches.length\n\t\t\t\t\t? coverage.branches.map(b => ({ count: b.executed, location: b.location && fromLocation(b.location), label: b.label }))\n\t\t\t\t\t: undefined,\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: DetailType.Declaration,\n\t\t\t\tname: coverage.name,\n\t\t\t\tcount: coverage.executed,\n\t\t\t\tlocation: fromLocation(coverage.location),\n\t\t\t};\n\t\t}\n\t}\n\n\texport function fromFile(controllerId: string, id: string, coverage: vscode.FileCoverage): IFileCoverage.Serialized {\n\t\ttypes.validateTestCoverageCount(coverage.statementCoverage);\n\t\ttypes.validateTestCoverageCount(coverage.branchCoverage);\n\t\ttypes.validateTestCoverageCount(coverage.declarationCoverage);\n\n\t\treturn {\n\t\t\tid,\n\t\t\turi: coverage.uri,\n\t\t\tstatement: fromCoverageCount(coverage.statementCoverage),\n\t\t\tbranch: coverage.branchCoverage && fromCoverageCount(coverage.branchCoverage),\n\t\t\tdeclaration: coverage.declarationCoverage && fromCoverageCount(coverage.declarationCoverage),\n\t\t\ttestIds: coverage instanceof types.FileCoverage && coverage.includesTests.length ?\n\t\t\t\tcoverage.includesTests.map(t => TestId.fromExtHostTestItem(t, controllerId).toString()) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace CodeActionTriggerKind {\n\n\texport function to(value: languages.CodeActionTriggerType): types.CodeActionTriggerKind {\n\t\tswitch (value) {\n\t\t\tcase languages.CodeActionTriggerType.Invoke:\n\t\t\t\treturn types.CodeActionTriggerKind.Invoke;\n\n\t\t\tcase languages.CodeActionTriggerType.Auto:\n\t\t\t\treturn types.CodeActionTriggerKind.Automatic;\n\t\t}\n\t}\n}\n\nexport namespace TypeHierarchyItem {\n\n\texport function to(item: extHostProtocol.ITypeHierarchyItemDto): types.TypeHierarchyItem {\n\t\tconst result = new types.TypeHierarchyItem(\n\t\t\tSymbolKind.to(item.kind),\n\t\t\titem.name,\n\t\t\titem.detail || '',\n\t\t\tURI.revive(item.uri),\n\t\t\tRange.to(item.range),\n\t\t\tRange.to(item.selectionRange)\n\t\t);\n\n\t\tresult._sessionId = item._sessionId;\n\t\tresult._itemId = item._itemId;\n\n\t\treturn result;\n\t}\n\n\texport function from(item: vscode.TypeHierarchyItem, sessionId?: string, itemId?: string): extHostProtocol.ITypeHierarchyItemDto {\n\n\t\tsessionId = sessionId ?? (<types.TypeHierarchyItem>item)._sessionId;\n\t\titemId = itemId ?? (<types.TypeHierarchyItem>item)._itemId;\n\n\t\tif (sessionId === undefined || itemId === undefined) {\n\t\t\tthrow new Error('invalid item');\n\t\t}\n\n\t\treturn {\n\t\t\t_sessionId: sessionId,\n\t\t\t_itemId: itemId,\n\t\t\tkind: SymbolKind.from(item.kind),\n\t\t\tname: item.name,\n\t\t\tdetail: item.detail ?? '',\n\t\t\turi: item.uri,\n\t\t\trange: Range.from(item.range),\n\t\t\tselectionRange: Range.from(item.selectionRange),\n\t\t\ttags: item.tags?.map(SymbolTag.from)\n\t\t};\n\t}\n}\n\nexport namespace ViewBadge {\n\texport function from(badge: vscode.ViewBadge | undefined): IViewBadge | undefined {\n\t\tif (!badge) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: badge.value,\n\t\t\ttooltip: badge.tooltip\n\t\t};\n\t}\n}\n\nexport namespace DataTransferItem {\n\texport function to(mime: string, item: extHostProtocol.DataTransferItemDTO, resolveFileData: (id: string) => Promise<Uint8Array>): types.DataTransferItem {\n\t\tconst file = item.fileData;\n\t\tif (file) {\n\t\t\treturn new types.InternalFileDataTransferItem(\n\t\t\t\tnew types.DataTransferFile(file.name, URI.revive(file.uri), file.id, createSingleCallFunction(() => resolveFileData(file.id))));\n\t\t}\n\n\t\tif (mime === Mimes.uriList && item.uriListData) {\n\t\t\treturn new types.InternalDataTransferItem(reviveUriList(item.uriListData));\n\t\t}\n\n\t\treturn new types.InternalDataTransferItem(item.asString);\n\t}\n\n\texport async function from(mime: string, item: vscode.DataTransferItem | IDataTransferItem, id: string = generateUuid()): Promise<extHostProtocol.DataTransferItemDTO> {\n\t\tconst stringValue = await item.asString();\n\n\t\tif (mime === Mimes.uriList) {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tasString: stringValue,\n\t\t\t\tfileData: undefined,\n\t\t\t\turiListData: serializeUriList(stringValue),\n\t\t\t};\n\t\t}\n\n\t\tconst fileValue = item.asFile();\n\t\treturn {\n\t\t\tid,\n\t\t\tasString: stringValue,\n\t\t\tfileData: fileValue ? {\n\t\t\t\tname: fileValue.name,\n\t\t\t\turi: fileValue.uri,\n\t\t\t\tid: (fileValue as types.DataTransferFile)._itemId ?? (fileValue as IDataTransferFile).id,\n\t\t\t} : undefined,\n\t\t};\n\t}\n\n\tfunction serializeUriList(stringValue: string): ReadonlyArray<string | URI> {\n\t\treturn UriList.split(stringValue).map(part => {\n\t\t\tif (part.startsWith('#')) {\n\t\t\t\treturn part;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\treturn URI.parse(part);\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\n\t\t\treturn part;\n\t\t});\n\t}\n\n\tfunction reviveUriList(parts: ReadonlyArray<string | UriComponents>): string {\n\t\treturn UriList.create(parts.map(part => {\n\t\t\treturn typeof part === 'string' ? part : URI.revive(part);\n\t\t}));\n\t}\n}\n\nexport namespace DataTransfer {\n\texport function toDataTransfer(value: extHostProtocol.DataTransferDTO, resolveFileData: (itemId: string) => Promise<Uint8Array>): types.DataTransfer {\n\t\tconst init = value.items.map(([type, item]) => {\n\t\t\treturn [type, DataTransferItem.to(type, item, resolveFileData)] as const;\n\t\t});\n\t\treturn new types.DataTransfer(init);\n\t}\n\n\texport async function from(dataTransfer: vscode.DataTransfer): Promise<extHostProtocol.DataTransferDTO> {\n\t\tconst items = await Promise.all(Array.from(dataTransfer, async ([mime, value]) => {\n\t\t\treturn [mime, await DataTransferItem.from(mime, value)] as const;\n\t\t}));\n\n\t\treturn { items };\n\t}\n\n\texport async function fromList(dataTransfer: Iterable<readonly [string, IDataTransferItem]>): Promise<extHostProtocol.DataTransferDTO> {\n\t\tconst items = await Promise.all(Array.from(dataTransfer, async ([mime, value]) => {\n\t\t\treturn [mime, await DataTransferItem.from(mime, value, value.id)] as const;\n\t\t}));\n\n\t\treturn { items };\n\t}\n}\n\nexport namespace ChatFollowup {\n\texport function from(followup: vscode.ChatFollowup, request: IChatAgentRequest | undefined): IChatFollowup {\n\t\treturn {\n\t\t\tkind: 'reply',\n\t\t\tagentId: followup.participant ?? request?.agentId ?? '',\n\t\t\tsubCommand: followup.command ?? request?.command,\n\t\t\tmessage: followup.prompt,\n\t\t\ttitle: followup.label\n\t\t};\n\t}\n\n\texport function to(followup: IChatFollowup): vscode.ChatFollowup {\n\t\treturn {\n\t\t\tprompt: followup.message,\n\t\t\tlabel: followup.title,\n\t\t\tparticipant: followup.agentId,\n\t\t\tcommand: followup.subCommand,\n\t\t};\n\t}\n}\n\nexport namespace LanguageModelChatMessageRole {\n\texport function to(role: chatProvider.ChatMessageRole): vscode.LanguageModelChatMessageRole {\n\t\tswitch (role) {\n\t\t\tcase chatProvider.ChatMessageRole.System: return types.LanguageModelChatMessageRole.System;\n\t\t\tcase chatProvider.ChatMessageRole.User: return types.LanguageModelChatMessageRole.User;\n\t\t\tcase chatProvider.ChatMessageRole.Assistant: return types.LanguageModelChatMessageRole.Assistant;\n\t\t}\n\t}\n\n\texport function from(role: vscode.LanguageModelChatMessageRole): chatProvider.ChatMessageRole {\n\t\tswitch (role) {\n\t\t\tcase types.LanguageModelChatMessageRole.System: return chatProvider.ChatMessageRole.System;\n\t\t\tcase types.LanguageModelChatMessageRole.User: return chatProvider.ChatMessageRole.User;\n\t\t\tcase types.LanguageModelChatMessageRole.Assistant: return chatProvider.ChatMessageRole.Assistant;\n\t\t}\n\t\treturn chatProvider.ChatMessageRole.User;\n\t}\n}\n\nexport namespace LanguageModelChatMessage {\n\n\texport function to(message: chatProvider.IChatMessage): vscode.LanguageModelChatMessage {\n\t\tconst content = message.content.map(c => {\n\t\t\tif (c.type === 'text') {\n\t\t\t\treturn new LanguageModelTextPart(c.value, c.audience);\n\t\t\t} else if (c.type === 'tool_result') {\n\t\t\t\tconst content: (LanguageModelTextPart | LanguageModelPromptTsxPart | LanguageModelDataPart)[] = coalesce(c.value.map(part => {\n\t\t\t\t\tif (part.type === 'text') {\n\t\t\t\t\t\treturn new types.LanguageModelTextPart(part.value, part.audience);\n\t\t\t\t\t} else if (part.type === 'data') {\n\t\t\t\t\t\treturn new types.LanguageModelDataPart(part.data.buffer, part.mimeType);\n\t\t\t\t\t} else if (part.type === 'prompt_tsx') {\n\t\t\t\t\t\treturn new types.LanguageModelPromptTsxPart(part.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn undefined; // Strip unknown parts\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\treturn new types.LanguageModelToolResultPart(c.toolCallId, content, c.isError);\n\t\t\t} else if (c.type === 'image_url') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.value.data.buffer, c.value.mimeType);\n\t\t\t} else if (c.type === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.data.buffer, c.mimeType);\n\t\t\t} else if (c.type === 'tool_use') {\n\t\t\t\treturn new types.LanguageModelToolCallPart(c.toolCallId, c.name, c.parameters);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}).filter(c => c !== undefined);\n\n\t\tconst role = LanguageModelChatMessageRole.to(message.role);\n\t\tconst result = new types.LanguageModelChatMessage(role, content, message.name);\n\t\treturn result;\n\t}\n\n\texport function from(message: vscode.LanguageModelChatMessage): chatProvider.IChatMessage {\n\n\t\tconst role = LanguageModelChatMessageRole.from(message.role);\n\t\tconst name = message.name;\n\n\t\tlet messageContent = message.content;\n\t\tif (typeof messageContent === 'string') {\n\t\t\tmessageContent = [new types.LanguageModelTextPart(messageContent)];\n\t\t}\n\n\t\tconst content = messageContent.map((c): chatProvider.IChatMessagePart => {\n\t\t\tif (c instanceof types.LanguageModelToolResultPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_result',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tvalue: coalesce(c.content.map(part => {\n\t\t\t\t\t\tif (part instanceof types.LanguageModelTextPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t\taudience: part.audience,\n\t\t\t\t\t\t\t} satisfies IChatResponseTextPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'prompt_tsx',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t} satisfies IChatResponsePromptTsxPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelDataPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\t\t\tmimeType: part.mimeType,\n\t\t\t\t\t\t\t\tdata: VSBuffer.wrap(part.data),\n\t\t\t\t\t\t\t\taudience: part.audience\n\t\t\t\t\t\t\t} satisfies IChatResponseDataPart;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Strip unknown parts\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t})),\n\t\t\t\t\tisError: c.isError\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelDataPart) {\n\t\t\t\tif (isImageDataPart(c)) {\n\t\t\t\t\tconst value: chatProvider.IChatImageURLPart = {\n\t\t\t\t\t\tmimeType: c.mimeType as chatProvider.ChatImageMimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'image_url',\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\tmimeType: c.mimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t\taudience: c.audience\n\t\t\t\t\t} satisfies IChatMessageDataPart;\n\t\t\t\t}\n\t\t\t} else if (c instanceof types.LanguageModelToolCallPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_use',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tname: c.name,\n\t\t\t\t\tparameters: c.input\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelTextPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c.value\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tif (typeof c !== 'string') {\n\t\t\t\t\tthrow new Error('Unexpected chat message content type');\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\trole,\n\t\t\tname,\n\t\t\tcontent\n\t\t};\n\t}\n}\n\nexport namespace LanguageModelChatMessage2 {\n\n\texport function to(message: chatProvider.IChatMessage): vscode.LanguageModelChatMessage2 {\n\t\tconst content = message.content.map(c => {\n\t\t\tif (c.type === 'text') {\n\t\t\t\treturn new LanguageModelTextPart(c.value, c.audience);\n\t\t\t} else if (c.type === 'tool_result') {\n\t\t\t\tconst content: (LanguageModelTextPart | LanguageModelPromptTsxPart | LanguageModelDataPart)[] = c.value.map(part => {\n\t\t\t\t\tif (part.type === 'text') {\n\t\t\t\t\t\treturn new types.LanguageModelTextPart(part.value, part.audience);\n\t\t\t\t\t} else if (part.type === 'data') {\n\t\t\t\t\t\treturn new types.LanguageModelDataPart(part.data.buffer, part.mimeType);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn new types.LanguageModelPromptTsxPart(part.value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn new types.LanguageModelToolResultPart(c.toolCallId, content, c.isError);\n\t\t\t} else if (c.type === 'image_url') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.value.data.buffer, c.value.mimeType);\n\t\t\t} else if (c.type === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.data.buffer, c.mimeType);\n\t\t\t} else if (c.type === 'thinking') {\n\t\t\t\treturn new types.LanguageModelThinkingPart(c.value, c.id, c.metadata);\n\t\t\t} else {\n\t\t\t\treturn new types.LanguageModelToolCallPart(c.toolCallId, c.name, c.parameters);\n\t\t\t}\n\t\t});\n\t\tconst role = LanguageModelChatMessageRole.to(message.role);\n\t\tconst result = new types.LanguageModelChatMessage2(role, content, message.name);\n\t\treturn result;\n\t}\n\n\texport function from(message: vscode.LanguageModelChatMessage2): chatProvider.IChatMessage {\n\n\t\tconst role = LanguageModelChatMessageRole.from(message.role);\n\t\tconst name = message.name;\n\n\t\tlet messageContent = message.content;\n\t\tif (typeof messageContent === 'string') {\n\t\t\tmessageContent = [new types.LanguageModelTextPart(messageContent)];\n\t\t}\n\n\t\tconst content = messageContent.map((c): chatProvider.IChatMessagePart => {\n\t\t\tif (c instanceof types.LanguageModelToolResultPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_result',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tvalue: coalesce(c.content.map(part => {\n\t\t\t\t\t\tif (part instanceof types.LanguageModelTextPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t\taudience: part.audience,\n\t\t\t\t\t\t\t} satisfies IChatResponseTextPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'prompt_tsx',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t} satisfies IChatResponsePromptTsxPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelDataPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\t\t\tmimeType: part.mimeType,\n\t\t\t\t\t\t\t\tdata: VSBuffer.wrap(part.data),\n\t\t\t\t\t\t\t\taudience: part.audience\n\t\t\t\t\t\t\t} satisfies IChatResponseDataPart;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Strip unknown parts\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t})),\n\t\t\t\t\tisError: c.isError\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelDataPart) {\n\t\t\t\tif (isImageDataPart(c)) {\n\t\t\t\t\tconst value: chatProvider.IChatImageURLPart = {\n\t\t\t\t\t\tmimeType: c.mimeType as chatProvider.ChatImageMimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'image_url',\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\tmimeType: c.mimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t\taudience: c.audience\n\t\t\t\t\t} satisfies IChatMessageDataPart;\n\t\t\t\t}\n\t\t\t} else if (c instanceof types.LanguageModelToolCallPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_use',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tname: c.name,\n\t\t\t\t\tparameters: c.input\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelTextPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c.value\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelThinkingPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'thinking',\n\t\t\t\t\tvalue: c.value,\n\t\t\t\t\tid: c.id,\n\t\t\t\t\tmetadata: c.metadata\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\tif (typeof c !== 'string') {\n\t\t\t\t\tthrow new Error('Unexpected chat message content type llm 2');\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\trole,\n\t\t\tname,\n\t\t\tcontent\n\t\t};\n\t}\n}\n\nfunction isImageDataPart(part: types.LanguageModelDataPart): boolean {\n\tconst mime = typeof part.mimeType === 'string' ? part.mimeType.toLowerCase() : '';\n\tswitch (mime) {\n\t\tcase 'image/png':\n\t\tcase 'image/jpeg':\n\t\tcase 'image/jpg':\n\t\tcase 'image/gif':\n\t\tcase 'image/webp':\n\t\tcase 'image/bmp':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nexport namespace ChatResponseMarkdownPart {\n\texport function from(part: vscode.ChatResponseMarkdownPart): Dto<IChatMarkdownContent> {\n\t\treturn {\n\t\t\tkind: 'markdownContent',\n\t\t\tcontent: MarkdownString.from(part.value)\n\t\t};\n\t}\n\texport function to(part: Dto<IChatMarkdownContent>): vscode.ChatResponseMarkdownPart {\n\t\treturn new types.ChatResponseMarkdownPart(MarkdownString.to(part.content));\n\t}\n}\n\nexport namespace ChatResponseCodeblockUriPart {\n\texport function from(part: vscode.ChatResponseCodeblockUriPart): Dto<IChatResponseCodeblockUriPart> {\n\t\treturn {\n\t\t\tkind: 'codeblockUri',\n\t\t\turi: part.value,\n\t\t\tisEdit: part.isEdit,\n\t\t};\n\t}\n\texport function to(part: Dto<IChatResponseCodeblockUriPart>): vscode.ChatResponseCodeblockUriPart {\n\t\treturn new types.ChatResponseCodeblockUriPart(URI.revive(part.uri), part.isEdit);\n\t}\n}\n\nexport namespace ChatResponseMarkdownWithVulnerabilitiesPart {\n\texport function from(part: vscode.ChatResponseMarkdownWithVulnerabilitiesPart): Dto<IChatAgentMarkdownContentWithVulnerability> {\n\t\treturn {\n\t\t\tkind: 'markdownVuln',\n\t\t\tcontent: MarkdownString.from(part.value),\n\t\t\tvulnerabilities: part.vulnerabilities,\n\t\t};\n\t}\n\texport function to(part: Dto<IChatAgentMarkdownContentWithVulnerability>): vscode.ChatResponseMarkdownWithVulnerabilitiesPart {\n\t\treturn new types.ChatResponseMarkdownWithVulnerabilitiesPart(MarkdownString.to(part.content), part.vulnerabilities);\n\t}\n}\n\nexport namespace ChatResponseConfirmationPart {\n\texport function from(part: vscode.ChatResponseConfirmationPart): Dto<IChatConfirmation> {\n\t\treturn {\n\t\t\tkind: 'confirmation',\n\t\t\ttitle: part.title,\n\t\t\tmessage: MarkdownString.from(part.message),\n\t\t\tdata: part.data,\n\t\t\tbuttons: part.buttons\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseFilesPart {\n\texport function from(part: vscode.ChatResponseFileTreePart): IChatTreeData {\n\t\tconst { value, baseUri } = part;\n\t\tfunction convert(items: vscode.ChatResponseFileTree[], baseUri: URI): extHostProtocol.IChatResponseProgressFileTreeData[] {\n\t\t\treturn items.map(item => {\n\t\t\t\tconst myUri = URI.joinPath(baseUri, item.name);\n\t\t\t\treturn {\n\t\t\t\t\tlabel: item.name,\n\t\t\t\t\turi: myUri,\n\t\t\t\t\tchildren: item.children && convert(item.children, myUri)\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\treturn {\n\t\t\tkind: 'treeData',\n\t\t\ttreeData: {\n\t\t\t\tlabel: basename(baseUri),\n\t\t\t\turi: baseUri,\n\t\t\t\tchildren: convert(value, baseUri)\n\t\t\t}\n\t\t};\n\t}\n\texport function to(part: Dto<IChatTreeData>): vscode.ChatResponseFileTreePart {\n\t\tconst treeData = revive<extHostProtocol.IChatResponseProgressFileTreeData>(part.treeData);\n\t\tfunction convert(items: extHostProtocol.IChatResponseProgressFileTreeData[]): vscode.ChatResponseFileTree[] {\n\t\t\treturn items.map(item => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tchildren: item.children && convert(item.children)\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tconst baseUri = treeData.uri;\n\t\tconst items = treeData.children ? convert(treeData.children) : [];\n\t\treturn new types.ChatResponseFileTreePart(items, baseUri);\n\t}\n}\n\nexport namespace ChatResponseMultiDiffPart {\n\texport function from(part: vscode.ChatResponseMultiDiffPart): IChatMultiDiffData {\n\t\treturn {\n\t\t\tkind: 'multiDiffData',\n\t\t\tmultiDiffData: {\n\t\t\t\ttitle: part.title,\n\t\t\t\tresources: part.value.map(entry => ({\n\t\t\t\t\toriginalUri: entry.originalUri,\n\t\t\t\t\tmodifiedUri: entry.modifiedUri,\n\t\t\t\t\tgoToFileUri: entry.goToFileUri,\n\t\t\t\t\tadded: entry.added,\n\t\t\t\t\tremoved: entry.removed,\n\t\t\t\t}))\n\t\t\t},\n\t\t\treadOnly: part.readOnly\n\t\t};\n\t}\n\texport function to(part: Dto<IChatMultiDiffData>): vscode.ChatResponseMultiDiffPart {\n\t\tconst resources = part.multiDiffData.resources.map(resource => ({\n\t\t\toriginalUri: resource.originalUri ? URI.revive(resource.originalUri) : undefined,\n\t\t\tmodifiedUri: resource.modifiedUri ? URI.revive(resource.modifiedUri) : undefined,\n\t\t\tgoToFileUri: resource.goToFileUri ? URI.revive(resource.goToFileUri) : undefined,\n\t\t\tadded: resource.added,\n\t\t\tremoved: resource.removed,\n\t\t}));\n\t\treturn new types.ChatResponseMultiDiffPart(resources, part.multiDiffData.title, part.readOnly);\n\t}\n}\n\nexport namespace ChatResponseAnchorPart {\n\texport function from(part: vscode.ChatResponseAnchorPart): Dto<IChatContentInlineReference> {\n\t\t// Work around type-narrowing confusion between vscode.Uri and URI\n\t\tconst isUri = (thing: unknown): thing is vscode.Uri => URI.isUri(thing);\n\t\tconst isSymbolInformation = (thing: object): thing is vscode.SymbolInformation => 'name' in thing;\n\n\t\treturn {\n\t\t\tkind: 'inlineReference',\n\t\t\tname: part.title,\n\t\t\tinlineReference: isUri(part.value)\n\t\t\t\t? part.value\n\t\t\t\t: isSymbolInformation(part.value)\n\t\t\t\t\t? WorkspaceSymbol.from(part.value)\n\t\t\t\t\t: Location.from(part.value)\n\t\t};\n\t}\n\n\texport function to(part: Dto<IChatContentInlineReference>): vscode.ChatResponseAnchorPart {\n\t\tconst value = revive<IChatContentInlineReference>(part);\n\t\treturn new types.ChatResponseAnchorPart(\n\t\t\tURI.isUri(value.inlineReference)\n\t\t\t\t? value.inlineReference\n\t\t\t\t: 'location' in value.inlineReference\n\t\t\t\t\t? WorkspaceSymbol.to(value.inlineReference) as vscode.SymbolInformation\n\t\t\t\t\t: Location.to(value.inlineReference),\n\t\t\tpart.name\n\t\t);\n\t}\n}\n\nexport namespace ChatResponseProgressPart {\n\texport function from(part: vscode.ChatResponseProgressPart): Dto<IChatProgressMessage> {\n\t\treturn {\n\t\t\tkind: 'progressMessage',\n\t\t\tcontent: MarkdownString.from(part.value)\n\t\t};\n\t}\n\texport function to(part: Dto<IChatProgressMessage>): vscode.ChatResponseProgressPart {\n\t\treturn new types.ChatResponseProgressPart(part.content.value);\n\t}\n}\n\nexport namespace ChatResponseThinkingProgressPart {\n\texport function from(part: vscode.ChatResponseThinkingProgressPart): Dto<IChatThinkingPart> {\n\t\treturn {\n\t\t\tkind: 'thinking',\n\t\t\tvalue: part.value,\n\t\t\tid: part.id,\n\t\t\tmetadata: part.metadata\n\t\t};\n\t}\n\texport function to(part: Dto<IChatThinkingPart>): vscode.ChatResponseThinkingProgressPart {\n\t\treturn new types.ChatResponseThinkingProgressPart(part.value ?? '', part.id, part.metadata);\n\t}\n}\n\nexport namespace ChatResponseWarningPart {\n\texport function from(part: vscode.ChatResponseWarningPart): Dto<IChatWarningMessage> {\n\t\treturn {\n\t\t\tkind: 'warning',\n\t\t\tcontent: MarkdownString.from(part.value)\n\t\t};\n\t}\n\texport function to(part: Dto<IChatWarningMessage>): vscode.ChatResponseWarningPart {\n\t\treturn new types.ChatResponseWarningPart(part.content.value);\n\t}\n}\n\nexport namespace ChatResponseExtensionsPart {\n\texport function from(part: vscode.ChatResponseExtensionsPart): Dto<IChatExtensionsContent> {\n\t\treturn {\n\t\t\tkind: 'extensions',\n\t\t\textensions: part.extensions\n\t\t};\n\t}\n}\n\nexport namespace ChatResponsePullRequestPart {\n\texport function from(part: vscode.ChatResponsePullRequestPart): Dto<IChatPullRequestContent> {\n\t\treturn {\n\t\t\tkind: 'pullRequest',\n\t\t\tauthor: part.author,\n\t\t\ttitle: part.title,\n\t\t\tdescription: part.description,\n\t\t\turi: part.uri,\n\t\t\tlinkTag: part.linkTag\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseMovePart {\n\texport function from(part: vscode.ChatResponseMovePart): Dto<IChatMoveMessage> {\n\t\treturn {\n\t\t\tkind: 'move',\n\t\t\turi: part.uri,\n\t\t\trange: Range.from(part.range),\n\t\t};\n\t}\n\texport function to(part: Dto<IChatMoveMessage>): vscode.ChatResponseMovePart {\n\t\treturn new types.ChatResponseMovePart(URI.revive(part.uri), Range.to(part.range));\n\t}\n}\n\nexport namespace ChatPrepareToolInvocationPart {\n\texport function from(part: vscode.ChatPrepareToolInvocationPart): IChatPrepareToolInvocationPart {\n\t\treturn {\n\t\t\tkind: 'prepareToolInvocation',\n\t\t\ttoolName: part.toolName,\n\t\t};\n\t}\n\n\texport function to(part: IChatPrepareToolInvocationPart): vscode.ChatPrepareToolInvocationPart {\n\t\treturn new types.ChatPrepareToolInvocationPart(part.toolName);\n\t}\n}\n\nexport namespace ChatToolInvocationPart {\n\texport function from(part: vscode.ChatToolInvocationPart): IChatToolInvocationSerialized {\n\t\t// Convert extension API ChatToolInvocationPart to internal serialized format\n\t\treturn {\n\t\t\tkind: 'toolInvocationSerialized',\n\t\t\ttoolCallId: part.toolCallId,\n\t\t\ttoolId: part.toolName,\n\t\t\tinvocationMessage: part.invocationMessage ? MarkdownString.from(part.invocationMessage) : part.toolName,\n\t\t\toriginMessage: part.originMessage ? MarkdownString.from(part.originMessage) : undefined,\n\t\t\tpastTenseMessage: part.pastTenseMessage ? MarkdownString.from(part.pastTenseMessage) : undefined,\n\t\t\tisConfirmed: part.isConfirmed,\n\t\t\tisComplete: part.isComplete ?? true,\n\t\t\tsource: ToolDataSource.External,\n\t\t\t// isError: part.isError ?? false,\n\t\t\ttoolSpecificData: part.toolSpecificData ? convertToolSpecificData(part.toolSpecificData) : undefined,\n\t\t\tpresentation: undefined,\n\t\t\tfromSubAgent: part.fromSubAgent\n\t\t};\n\t}\n\n\tfunction convertToolSpecificData(data: any): any {\n\t\t// Convert extension API terminal tool data to internal format\n\t\tif ('command' in data && 'language' in data) {\n\t\t\t// ChatTerminalToolInvocationData\n\t\t\treturn {\n\t\t\t\tkind: 'terminal',\n\t\t\t\tcommand: data.command,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t} else if ('commandLine' in data && 'language' in data) {\n\t\t\t// ChatTerminalToolInvocationData2\n\t\t\treturn {\n\t\t\t\tkind: 'terminal',\n\t\t\t\tcommandLine: data.commandLine,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t}\n\t\treturn data;\n\t}\n\n\texport function to(part: any): vscode.ChatToolInvocationPart {\n\t\tconst toolInvocation = new types.ChatToolInvocationPart(\n\t\t\tpart.toolId || part.toolName,\n\t\t\tpart.toolCallId,\n\t\t\tpart.isError\n\t\t);\n\n\t\tif (part.invocationMessage) {\n\t\t\ttoolInvocation.invocationMessage = part.invocationMessage;\n\t\t}\n\t\tif (part.originMessage) {\n\t\t\ttoolInvocation.originMessage = part.originMessage;\n\t\t}\n\t\tif (part.pastTenseMessage) {\n\t\t\ttoolInvocation.pastTenseMessage = part.pastTenseMessage;\n\t\t}\n\t\tif (part.isConfirmed !== undefined) {\n\t\t\ttoolInvocation.isConfirmed = part.isConfirmed;\n\t\t}\n\t\tif (part.isComplete !== undefined) {\n\t\t\ttoolInvocation.isComplete = part.isComplete;\n\t\t}\n\t\tif (part.toolSpecificData) {\n\t\t\ttoolInvocation.toolSpecificData = convertFromInternalToolSpecificData(part.toolSpecificData);\n\t\t}\n\t\ttoolInvocation.fromSubAgent = part.fromSubAgent;\n\n\t\treturn toolInvocation;\n\t}\n\n\tfunction convertFromInternalToolSpecificData(data: any): any {\n\t\t// Convert internal terminal tool data to extension API format\n\t\tif (data.kind === 'terminal') {\n\t\t\treturn {\n\t\t\t\tcommand: data.command,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t} else if (data.kind === 'terminal2') {\n\t\t\treturn {\n\t\t\t\tcommandLine: data.commandLine,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t}\n\t\treturn data;\n\t}\n}\n\nexport namespace ChatTask {\n\texport function from(part: vscode.ChatResponseProgressPart2): IChatTaskDto {\n\t\treturn {\n\t\t\tkind: 'progressTask',\n\t\t\tcontent: MarkdownString.from(part.value),\n\t\t};\n\t}\n}\n\nexport namespace ChatTaskResult {\n\texport function from(part: string | void): Dto<IChatTaskResult> {\n\t\treturn {\n\t\t\tkind: 'progressTaskResult',\n\t\t\tcontent: typeof part === 'string' ? MarkdownString.from(part) : undefined\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseCommandButtonPart {\n\texport function from(part: vscode.ChatResponseCommandButtonPart, commandsConverter: CommandsConverter, commandDisposables: DisposableStore): Dto<IChatCommandButton> {\n\t\t// If the command isn't in the converter, then this session may have been restored, and the command args don't exist anymore\n\t\tconst command = commandsConverter.toInternal(part.value, commandDisposables) ?? { command: part.value.command, title: part.value.title };\n\t\treturn {\n\t\t\tkind: 'command',\n\t\t\tcommand\n\t\t};\n\t}\n\texport function to(part: Dto<IChatCommandButton>, commandsConverter: CommandsConverter): vscode.ChatResponseCommandButtonPart {\n\t\t// If the command isn't in the converter, then this session may have been restored, and the command args don't exist anymore\n\t\treturn new types.ChatResponseCommandButtonPart(commandsConverter.fromInternal(part.command) ?? { command: part.command.id, title: part.command.title });\n\t}\n}\n\nexport namespace ChatResponseTextEditPart {\n\texport function from(part: vscode.ChatResponseTextEditPart): Dto<IChatTextEdit> {\n\t\treturn {\n\t\t\tkind: 'textEdit',\n\t\t\turi: part.uri,\n\t\t\tedits: part.edits.map(e => TextEdit.from(e)),\n\t\t\tdone: part.isDone\n\t\t};\n\t}\n\texport function to(part: Dto<IChatTextEdit>): vscode.ChatResponseTextEditPart {\n\t\tconst result = new types.ChatResponseTextEditPart(URI.revive(part.uri), part.edits.map(e => TextEdit.to(e)));\n\t\tresult.isDone = part.done;\n\t\treturn result;\n\t}\n\n}\n\nexport namespace NotebookEdit {\n\texport function from(edit: vscode.NotebookEdit): extHostProtocol.ICellEditOperationDto {\n\t\tif (edit.newCellMetadata) {\n\t\t\treturn {\n\t\t\t\teditType: CellEditType.Metadata,\n\t\t\t\tindex: edit.range.start,\n\t\t\t\tmetadata: edit.newCellMetadata\n\t\t\t};\n\t\t} else if (edit.newNotebookMetadata) {\n\t\t\treturn {\n\t\t\t\teditType: CellEditType.DocumentMetadata,\n\t\t\t\tmetadata: edit.newNotebookMetadata\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\tindex: edit.range.start,\n\t\t\t\tcount: edit.range.end - edit.range.start,\n\t\t\t\tcells: edit.newCells.map(NotebookCellData.from)\n\t\t\t};\n\t\t}\n\t}\n}\n\n\nexport namespace ChatResponseNotebookEditPart {\n\texport function from(part: vscode.ChatResponseNotebookEditPart): extHostProtocol.IChatNotebookEditDto {\n\t\treturn {\n\t\t\tkind: 'notebookEdit',\n\t\t\turi: part.uri,\n\t\t\tedits: part.edits.map(NotebookEdit.from),\n\t\t\tdone: part.isDone\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseReferencePart {\n\texport function from(part: types.ChatResponseReferencePart): Dto<IChatContentReference> {\n\t\tconst iconPath = ThemeIcon.isThemeIcon(part.iconPath) ? part.iconPath\n\t\t\t: URI.isUri(part.iconPath) ? { light: URI.revive(part.iconPath) }\n\t\t\t\t: (part.iconPath && 'light' in part.iconPath && 'dark' in part.iconPath && URI.isUri(part.iconPath.light) && URI.isUri(part.iconPath.dark) ? { light: URI.revive(part.iconPath.light), dark: URI.revive(part.iconPath.dark) }\n\t\t\t\t\t: undefined);\n\n\t\tif (typeof part.value === 'object' && 'variableName' in part.value) {\n\t\t\treturn {\n\t\t\t\tkind: 'reference',\n\t\t\t\treference: {\n\t\t\t\t\tvariableName: part.value.variableName,\n\t\t\t\t\tvalue: URI.isUri(part.value.value) || !part.value.value ?\n\t\t\t\t\t\tpart.value.value :\n\t\t\t\t\t\tLocation.from(part.value.value as vscode.Location)\n\t\t\t\t},\n\t\t\t\ticonPath,\n\t\t\t\toptions: part.options\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tkind: 'reference',\n\t\t\treference: URI.isUri(part.value) || typeof part.value === 'string' ?\n\t\t\t\tpart.value :\n\t\t\t\tLocation.from(<vscode.Location>part.value),\n\t\t\ticonPath,\n\t\t\toptions: part.options\n\t\t};\n\t}\n\texport function to(part: Dto<IChatContentReference>): vscode.ChatResponseReferencePart {\n\t\tconst value = revive<IChatContentReference>(part);\n\n\t\tconst mapValue = (value: URI | languages.Location): vscode.Uri | vscode.Location => URI.isUri(value) ?\n\t\t\tvalue :\n\t\t\tLocation.to(value);\n\n\t\treturn new types.ChatResponseReferencePart(\n\t\t\ttypeof value.reference === 'string' ? value.reference : 'variableName' in value.reference ? {\n\t\t\t\tvariableName: value.reference.variableName,\n\t\t\t\tvalue: value.reference.value && mapValue(value.reference.value)\n\t\t\t} :\n\t\t\t\tmapValue(value.reference)\n\t\t) as vscode.ChatResponseReferencePart; // 'value' is extended with variableName\n\t}\n}\n\nexport namespace ChatResponseCodeCitationPart {\n\texport function from(part: vscode.ChatResponseCodeCitationPart): Dto<IChatCodeCitation> {\n\t\treturn {\n\t\t\tkind: 'codeCitation',\n\t\t\tvalue: part.value,\n\t\t\tlicense: part.license,\n\t\t\tsnippet: part.snippet\n\t\t};\n\t}\n}\n\nexport namespace ChatResponsePart {\n\n\texport function from(part: vscode.ExtendedChatResponsePart, commandsConverter: CommandsConverter, commandDisposables: DisposableStore): extHostProtocol.IChatProgressDto {\n\t\tif (part instanceof types.ChatResponseMarkdownPart) {\n\t\t\treturn ChatResponseMarkdownPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseAnchorPart) {\n\t\t\treturn ChatResponseAnchorPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseReferencePart) {\n\t\t\treturn ChatResponseReferencePart.from(part);\n\t\t} else if (part instanceof types.ChatResponseProgressPart) {\n\t\t\treturn ChatResponseProgressPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseThinkingProgressPart) {\n\t\t\treturn ChatResponseThinkingProgressPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseFileTreePart) {\n\t\t\treturn ChatResponseFilesPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseMultiDiffPart) {\n\t\t\treturn ChatResponseMultiDiffPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseCommandButtonPart) {\n\t\t\treturn ChatResponseCommandButtonPart.from(part, commandsConverter, commandDisposables);\n\t\t} else if (part instanceof types.ChatResponseTextEditPart) {\n\t\t\treturn ChatResponseTextEditPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseNotebookEditPart) {\n\t\t\treturn ChatResponseNotebookEditPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseMarkdownWithVulnerabilitiesPart) {\n\t\t\treturn ChatResponseMarkdownWithVulnerabilitiesPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseCodeblockUriPart) {\n\t\t\treturn ChatResponseCodeblockUriPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseWarningPart) {\n\t\t\treturn ChatResponseWarningPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseConfirmationPart) {\n\t\t\treturn ChatResponseConfirmationPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseCodeCitationPart) {\n\t\t\treturn ChatResponseCodeCitationPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseMovePart) {\n\t\t\treturn ChatResponseMovePart.from(part);\n\t\t} else if (part instanceof types.ChatResponseExtensionsPart) {\n\t\t\treturn ChatResponseExtensionsPart.from(part);\n\t\t} else if (part instanceof types.ChatPrepareToolInvocationPart) {\n\t\t\treturn ChatPrepareToolInvocationPart.from(part);\n\t\t} else if (part instanceof types.ChatResponsePullRequestPart) {\n\t\t\treturn ChatResponsePullRequestPart.from(part);\n\t\t} else if (part instanceof types.ChatToolInvocationPart) {\n\t\t\treturn ChatToolInvocationPart.from(part);\n\t\t}\n\n\t\treturn {\n\t\t\tkind: 'markdownContent',\n\t\t\tcontent: MarkdownString.from('')\n\t\t};\n\t}\n\n\texport function to(part: extHostProtocol.IChatProgressDto, commandsConverter: CommandsConverter): vscode.ChatResponsePart | undefined {\n\t\tswitch (part.kind) {\n\t\t\tcase 'reference': return ChatResponseReferencePart.to(part);\n\t\t\tcase 'markdownContent':\n\t\t\tcase 'inlineReference':\n\t\t\tcase 'progressMessage':\n\t\t\tcase 'treeData':\n\t\t\tcase 'command':\n\t\t\t\treturn toContent(part, commandsConverter);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\texport function toContent(part: extHostProtocol.IChatContentProgressDto, commandsConverter: CommandsConverter): vscode.ChatResponseMarkdownPart | vscode.ChatResponseFileTreePart | vscode.ChatResponseAnchorPart | vscode.ChatResponseCommandButtonPart | undefined {\n\t\tswitch (part.kind) {\n\t\t\tcase 'markdownContent': return ChatResponseMarkdownPart.to(part);\n\t\t\tcase 'inlineReference': return ChatResponseAnchorPart.to(part);\n\t\t\tcase 'progressMessage': return undefined;\n\t\t\tcase 'treeData': return ChatResponseFilesPart.to(part);\n\t\t\tcase 'command': return ChatResponseCommandButtonPart.to(part, commandsConverter);\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n\nexport namespace ChatAgentRequest {\n\texport function to(request: IChatAgentRequest, location2: vscode.ChatRequestEditorData | vscode.ChatRequestNotebookData | undefined, model: vscode.LanguageModelChat, diagnostics: readonly [vscode.Uri, readonly vscode.Diagnostic[]][], tools: Map<string, boolean>, extension: IRelaxedExtensionDescription, logService: ILogService): vscode.ChatRequest {\n\n\t\tconst toolReferences: typeof request.variables.variables = [];\n\t\tconst variableReferences: typeof request.variables.variables = [];\n\t\tfor (const v of request.variables.variables) {\n\t\t\tif (v.kind === 'tool') {\n\t\t\t\ttoolReferences.push(v);\n\t\t\t} else if (v.kind === 'toolset') {\n\t\t\t\ttoolReferences.push(...v.value);\n\t\t\t} else {\n\t\t\t\tvariableReferences.push(v);\n\t\t\t}\n\t\t}\n\n\t\tconst requestWithAllProps: vscode.ChatRequest = {\n\t\t\tid: request.requestId,\n\t\t\tprompt: request.message,\n\t\t\tcommand: request.command,\n\t\t\tattempt: request.attempt ?? 0,\n\t\t\tenableCommandDetection: request.enableCommandDetection ?? true,\n\t\t\tisParticipantDetected: request.isParticipantDetected ?? false,\n\t\t\tsessionId: request.sessionId,\n\t\t\treferences: variableReferences\n\t\t\t\t.map(v => ChatPromptReference.to(v, diagnostics, logService))\n\t\t\t\t.filter(isDefined),\n\t\t\ttoolReferences: toolReferences.map(ChatLanguageModelToolReference.to),\n\t\t\tlocation: ChatLocation.to(request.location),\n\t\t\tacceptedConfirmationData: request.acceptedConfirmationData,\n\t\t\trejectedConfirmationData: request.rejectedConfirmationData,\n\t\t\tlocation2,\n\t\t\ttoolInvocationToken: Object.freeze<IToolInvocationContext>({ sessionId: request.sessionId, sessionResource: request.sessionResource }) as never,\n\t\t\ttools,\n\t\t\tmodel,\n\t\t\teditedFileEvents: request.editedFileEvents,\n\t\t\tmodeInstructions: request.modeInstructions?.content,\n\t\t\tmodeInstructions2: ChatRequestModeInstructions.to(request.modeInstructions),\n\t\t\tisSubagent: request.isSubagent,\n\t\t};\n\n\t\tif (!isProposedApiEnabled(extension, 'chatParticipantPrivate')) {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).id;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).attempt;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).enableCommandDetection;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).isParticipantDetected;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).location;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).location2;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).editedFileEvents;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).sessionId;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).isSubagent;\n\t\t}\n\n\t\tif (!isProposedApiEnabled(extension, 'chatParticipantAdditions')) {\n\t\t\tdelete requestWithAllProps.acceptedConfirmationData;\n\t\t\tdelete requestWithAllProps.rejectedConfirmationData;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).tools;\n\t\t}\n\n\n\t\treturn requestWithAllProps;\n\t}\n}\n\nexport namespace ChatRequestDraft {\n\texport function to(request: IChatRequestDraft): vscode.ChatRequestDraft {\n\t\treturn {\n\t\t\tprompt: request.prompt,\n\t\t\tfiles: request.files.map((uri) => URI.revive(uri))\n\t\t};\n\t}\n}\n\nexport namespace ChatLocation {\n\texport function to(loc: ChatAgentLocation): types.ChatLocation {\n\t\tswitch (loc) {\n\t\t\tcase ChatAgentLocation.Notebook: return types.ChatLocation.Notebook;\n\t\t\tcase ChatAgentLocation.Terminal: return types.ChatLocation.Terminal;\n\t\t\tcase ChatAgentLocation.Chat: return types.ChatLocation.Panel;\n\t\t\tcase ChatAgentLocation.EditorInline: return types.ChatLocation.Editor;\n\t\t}\n\t}\n\n\texport function from(loc: types.ChatLocation): ChatAgentLocation {\n\t\tswitch (loc) {\n\t\t\tcase types.ChatLocation.Notebook: return ChatAgentLocation.Notebook;\n\t\t\tcase types.ChatLocation.Terminal: return ChatAgentLocation.Terminal;\n\t\t\tcase types.ChatLocation.Panel: return ChatAgentLocation.Chat;\n\t\t\tcase types.ChatLocation.Editor: return ChatAgentLocation.EditorInline;\n\t\t}\n\t}\n}\n\nexport namespace ChatPromptReference {\n\texport function to(variable: IChatRequestVariableEntry, diagnostics: readonly [vscode.Uri, readonly vscode.Diagnostic[]][], logService: ILogService): vscode.ChatPromptReference | undefined {\n\t\tlet value: vscode.ChatPromptReference['value'] = variable.value;\n\t\tif (!value) {\n\t\t\tlet varStr: string;\n\t\t\ttry {\n\t\t\t\tvarStr = JSON.stringify(variable);\n\t\t\t} catch {\n\t\t\t\tvarStr = `kind=${variable.kind}, id=${variable.id}, name=${variable.name}`;\n\t\t\t}\n\n\t\t\tlogService.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${varStr}`);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (isUriComponents(value)) {\n\t\t\tvalue = URI.revive(value);\n\t\t} else if (value && typeof value === 'object' && 'uri' in value && 'range' in value && isUriComponents(value.uri)) {\n\t\t\tvalue = Location.to(revive(value));\n\t\t} else if (isImageVariableEntry(variable)) {\n\t\t\tconst ref = variable.references?.[0]?.reference;\n\t\t\tvalue = new types.ChatReferenceBinaryData(\n\t\t\t\tvariable.mimeType ?? 'image/png',\n\t\t\t\t() => Promise.resolve(new Uint8Array(Object.values(variable.value as number[]))),\n\t\t\t\tref && URI.isUri(ref) ? ref : undefined\n\t\t\t);\n\t\t} else if (variable.kind === 'diagnostic') {\n\t\t\tconst filterSeverity = variable.filterSeverity && DiagnosticSeverity.to(variable.filterSeverity);\n\t\t\tconst filterUri = variable.filterUri && URI.revive(variable.filterUri).toString();\n\t\t\tvalue = new types.ChatReferenceDiagnostic(diagnostics.map(([uri, d]): [vscode.Uri, vscode.Diagnostic[]] => {\n\t\t\t\tif (variable.filterUri && uri.toString() !== filterUri) {\n\t\t\t\t\treturn [uri, []];\n\t\t\t\t}\n\n\t\t\t\treturn [uri, d.filter(d => {\n\t\t\t\t\tif (filterSeverity && d.severity > filterSeverity) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (variable.filterRange && !editorRange.Range.areIntersectingOrTouching(variable.filterRange, Range.from(d.range))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t})];\n\t\t\t}).filter(([, d]) => d.length > 0));\n\t\t}\n\t\tlet toolReferences;\n\t\tif (isPromptFileVariableEntry(variable) || isPromptTextVariableEntry(variable)) {\n\t\t\tif (variable.toolReferences) {\n\t\t\t\ttoolReferences = ChatLanguageModelToolReferences.to(variable.toolReferences);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tid: variable.id,\n\t\t\tname: variable.name,\n\t\t\trange: variable.range && [variable.range.start, variable.range.endExclusive],\n\t\t\ttoolReferences,\n\t\t\tvalue,\n\t\t\tmodelDescription: variable.modelDescription,\n\t\t};\n\t}\n}\n\nexport namespace ChatLanguageModelToolReference {\n\texport function to(variable: IChatRequestVariableEntry): vscode.ChatLanguageModelToolReference {\n\t\tconst value = variable.value;\n\t\tif (value) {\n\t\t\tthrow new Error('Invalid tool reference');\n\t\t}\n\n\t\treturn {\n\t\t\tname: variable.id,\n\t\t\trange: variable.range && [variable.range.start, variable.range.endExclusive],\n\t\t};\n\t}\n}\n\nnamespace ChatLanguageModelToolReferences {\n\texport function to(variables: readonly ChatRequestToolReferenceEntry[]): vscode.ChatLanguageModelToolReference[] {\n\t\tconst toolReferences = [];\n\t\tfor (const v of variables) {\n\t\t\tif (v.kind === 'tool') {\n\t\t\t\ttoolReferences.push(ChatLanguageModelToolReference.to(v));\n\t\t\t} else if (v.kind === 'toolset') {\n\t\t\t\ttoolReferences.push(...v.value.map(ChatLanguageModelToolReference.to));\n\t\t\t} else {\n\t\t\t\tthrow new Error('Invalid tool reference in prompt variables');\n\t\t\t}\n\t\t}\n\t\treturn toolReferences;\n\t}\n}\n\nexport namespace ChatRequestModeInstructions {\n\texport function to(mode: IChatRequestModeInstructions | undefined): vscode.ChatRequestModeInstructions | undefined {\n\t\tif (mode) {\n\t\t\treturn {\n\t\t\t\tname: mode.name,\n\t\t\t\tcontent: mode.content,\n\t\t\t\ttoolReferences: ChatLanguageModelToolReferences.to(mode.toolReferences),\n\t\t\t\tmetadata: mode.metadata\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport namespace ChatAgentCompletionItem {\n\texport function from(item: vscode.ChatCompletionItem, commandsConverter: CommandsConverter, disposables: DisposableStore): extHostProtocol.IChatAgentCompletionItem {\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\tlabel: item.label,\n\t\t\tfullName: item.fullName,\n\t\t\ticon: item.icon?.id,\n\t\t\tvalue: item.values[0].value,\n\t\t\tinsertText: item.insertText,\n\t\t\tdetail: item.detail,\n\t\t\tdocumentation: item.documentation,\n\t\t\tcommand: commandsConverter.toInternal(item.command, disposables),\n\t\t};\n\t}\n}\n\nexport namespace ChatAgentResult {\n\texport function to(result: IChatAgentResult): vscode.ChatResult {\n\t\treturn {\n\t\t\terrorDetails: result.errorDetails,\n\t\t\tmetadata: reviveMetadata(result.metadata),\n\t\t\tnextQuestion: result.nextQuestion,\n\t\t\tdetails: result.details,\n\t\t};\n\t}\n\texport function from(result: vscode.ChatResult): Dto<IChatAgentResult> {\n\t\treturn {\n\t\t\terrorDetails: result.errorDetails,\n\t\t\tmetadata: result.metadata,\n\t\t\tnextQuestion: result.nextQuestion,\n\t\t\tdetails: result.details\n\t\t};\n\t}\n\n\tfunction reviveMetadata(metadata: IChatAgentResult['metadata']) {\n\t\treturn cloneAndChange(metadata, value => {\n\t\t\tif (value.$mid === MarshalledId.LanguageModelToolResult) {\n\t\t\t\treturn new types.LanguageModelToolResult(cloneAndChange(value.content, reviveMetadata));\n\t\t\t} else if (value.$mid === MarshalledId.LanguageModelTextPart) {\n\t\t\t\treturn new types.LanguageModelTextPart(value.value);\n\t\t\t} else if (value.$mid === MarshalledId.LanguageModelThinkingPart) {\n\t\t\t\treturn new types.LanguageModelThinkingPart(value.value, value.id, value.metadata);\n\t\t\t} else if (value.$mid === MarshalledId.LanguageModelPromptTsxPart) {\n\t\t\t\treturn new types.LanguageModelPromptTsxPart(value.value);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t}\n}\n\nexport namespace ChatAgentUserActionEvent {\n\texport function to(result: IChatAgentResult, event: IChatUserActionEvent, commandsConverter: CommandsConverter): vscode.ChatUserActionEvent | undefined {\n\t\tif (event.action.kind === 'vote') {\n\t\t\t// Is the \"feedback\" type\n\t\t\treturn;\n\t\t}\n\n\t\tconst ehResult = ChatAgentResult.to(result);\n\t\tif (event.action.kind === 'command') {\n\t\t\tconst command = event.action.commandButton.command;\n\t\t\tconst commandButton = {\n\t\t\t\tcommand: commandsConverter.fromInternal(command) ?? { command: command.id, title: command.title },\n\t\t\t};\n\t\t\tconst commandAction: vscode.ChatCommandAction = { kind: 'command', commandButton };\n\t\t\treturn { action: commandAction, result: ehResult };\n\t\t} else if (event.action.kind === 'followUp') {\n\t\t\tconst followupAction: vscode.ChatFollowupAction = { kind: 'followUp', followup: ChatFollowup.to(event.action.followup) };\n\t\t\treturn { action: followupAction, result: ehResult };\n\t\t} else if (event.action.kind === 'inlineChat') {\n\t\t\treturn { action: { kind: 'editor', accepted: event.action.action === 'accepted' }, result: ehResult };\n\t\t} else if (event.action.kind === 'chatEditingSessionAction') {\n\n\t\t\tconst outcomes = new Map([\n\t\t\t\t['accepted', types.ChatEditingSessionActionOutcome.Accepted],\n\t\t\t\t['rejected', types.ChatEditingSessionActionOutcome.Rejected],\n\t\t\t\t['saved', types.ChatEditingSessionActionOutcome.Saved],\n\t\t\t]);\n\n\t\t\treturn {\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'chatEditingSessionAction',\n\t\t\t\t\toutcome: outcomes.get(event.action.outcome) ?? types.ChatEditingSessionActionOutcome.Rejected,\n\t\t\t\t\turi: URI.revive(event.action.uri),\n\t\t\t\t\thasRemainingEdits: event.action.hasRemainingEdits\n\t\t\t\t}, result: ehResult\n\t\t\t};\n\t\t} else if (event.action.kind === 'chatEditingHunkAction') {\n\t\t\tconst outcomes = new Map([\n\t\t\t\t['accepted', types.ChatEditingSessionActionOutcome.Accepted],\n\t\t\t\t['rejected', types.ChatEditingSessionActionOutcome.Rejected],\n\t\t\t]);\n\n\t\t\treturn {\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'chatEditingHunkAction',\n\t\t\t\t\toutcome: outcomes.get(event.action.outcome) ?? types.ChatEditingSessionActionOutcome.Rejected,\n\t\t\t\t\turi: URI.revive(event.action.uri),\n\t\t\t\t\thasRemainingEdits: event.action.hasRemainingEdits,\n\t\t\t\t\tlineCount: event.action.lineCount,\n\t\t\t\t\tlinesAdded: event.action.linesAdded,\n\t\t\t\t\tlinesRemoved: event.action.linesRemoved\n\t\t\t\t}, result: ehResult\n\t\t\t};\n\t\t} else {\n\t\t\treturn { action: event.action, result: ehResult };\n\t\t}\n\t}\n}\n\nexport namespace TerminalQuickFix {\n\texport function from(quickFix: vscode.TerminalQuickFixTerminalCommand | vscode.TerminalQuickFixOpener | vscode.Command, converter: Command.ICommandsConverter, disposables: DisposableStore): extHostProtocol.ITerminalQuickFixTerminalCommandDto | extHostProtocol.ITerminalQuickFixOpenerDto | extHostProtocol.ICommandDto | undefined {\n\t\tif ('terminalCommand' in quickFix) {\n\t\t\treturn { terminalCommand: quickFix.terminalCommand, shouldExecute: quickFix.shouldExecute };\n\t\t}\n\t\tif ('uri' in quickFix) {\n\t\t\treturn { uri: quickFix.uri };\n\t\t}\n\t\treturn converter.toInternal(quickFix, disposables);\n\t}\n}\nexport namespace TerminalCompletionItemDto {\n\texport function from(item: vscode.TerminalCompletionItem): extHostProtocol.ITerminalCompletionItemDto {\n\t\treturn {\n\t\t\t...item,\n\t\t\tdocumentation: MarkdownString.fromStrict(item.documentation),\n\t\t};\n\t}\n}\n\nexport namespace TerminalCompletionList {\n\texport function from(completions: vscode.TerminalCompletionList | vscode.TerminalCompletionItem[], pathSeparator: string): extHostProtocol.TerminalCompletionListDto {\n\t\tif (Array.isArray(completions)) {\n\t\t\treturn {\n\t\t\t\titems: completions.map(i => TerminalCompletionItemDto.from(i)),\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\titems: completions.items.map(i => TerminalCompletionItemDto.from(i)),\n\t\t\tresourceOptions: completions.resourceOptions ? TerminalCompletionResourceOptions.from(completions.resourceOptions, pathSeparator) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace TerminalCompletionResourceOptions {\n\texport function from(resourceOptions: vscode.TerminalCompletionResourceOptions, pathSeparator: string): extHostProtocol.TerminalCompletionResourceOptionsDto {\n\t\treturn {\n\t\t\t...resourceOptions,\n\t\t\tpathSeparator,\n\t\t\tcwd: resourceOptions.cwd,\n\t\t\tglobPattern: GlobPattern.from(resourceOptions.globPattern) ?? undefined\n\t\t};\n\t}\n}\n\nexport namespace PartialAcceptInfo {\n\texport function to(info: languages.PartialAcceptInfo): types.PartialAcceptInfo {\n\t\treturn {\n\t\t\tkind: PartialAcceptTriggerKind.to(info.kind),\n\t\t\tacceptedLength: info.acceptedLength,\n\t\t};\n\t}\n}\n\nexport namespace PartialAcceptTriggerKind {\n\texport function to(kind: languages.PartialAcceptTriggerKind): types.PartialAcceptTriggerKind {\n\t\tswitch (kind) {\n\t\t\tcase languages.PartialAcceptTriggerKind.Word:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Word;\n\t\t\tcase languages.PartialAcceptTriggerKind.Line:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Line;\n\t\t\tcase languages.PartialAcceptTriggerKind.Suggest:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Suggest;\n\t\t\tdefault:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Unknown;\n\t\t}\n\t}\n}\n\nexport namespace InlineCompletionEndOfLifeReason {\n\texport function to<T>(reason: languages.InlineCompletionEndOfLifeReason<T>, convertFn: (item: T) => vscode.InlineCompletionItem | undefined): vscode.InlineCompletionEndOfLifeReason {\n\t\tif (reason.kind === languages.InlineCompletionEndOfLifeReasonKind.Ignored) {\n\t\t\tconst supersededBy = reason.supersededBy ? convertFn(reason.supersededBy) : undefined;\n\t\t\treturn {\n\t\t\t\tkind: types.InlineCompletionEndOfLifeReasonKind.Ignored,\n\t\t\t\tsupersededBy: supersededBy,\n\t\t\t\tuserTypingDisagreed: reason.userTypingDisagreed,\n\t\t\t};\n\t\t} else if (reason.kind === languages.InlineCompletionEndOfLifeReasonKind.Accepted) {\n\t\t\treturn {\n\t\t\t\tkind: types.InlineCompletionEndOfLifeReasonKind.Accepted,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tkind: types.InlineCompletionEndOfLifeReasonKind.Rejected,\n\t\t};\n\t}\n}\n\nexport namespace InlineCompletionHintStyle {\n\texport function from(value: vscode.InlineCompletionDisplayLocationKind): languages.InlineCompletionHintStyle {\n\t\tif (value === types.InlineCompletionDisplayLocationKind.Label) {\n\t\t\treturn languages.InlineCompletionHintStyle.Label;\n\t\t} else {\n\t\t\treturn languages.InlineCompletionHintStyle.Code;\n\t\t}\n\t}\n\n\texport function to(kind: languages.InlineCompletionHintStyle): types.InlineCompletionDisplayLocationKind {\n\t\tswitch (kind) {\n\t\t\tcase languages.InlineCompletionHintStyle.Label:\n\t\t\t\treturn types.InlineCompletionDisplayLocationKind.Label;\n\t\t\tdefault:\n\t\t\t\treturn types.InlineCompletionDisplayLocationKind.Code;\n\t\t}\n\t}\n}\n\nexport namespace DebugTreeItem {\n\texport function from(item: vscode.DebugTreeItem, id: number): IDebugVisualizationTreeItem {\n\t\treturn {\n\t\t\tid,\n\t\t\tlabel: item.label,\n\t\t\tdescription: item.description,\n\t\t\tcanEdit: item.canEdit,\n\t\t\tcollapsibleState: (item.collapsibleState || DebugTreeItemCollapsibleState.None) as DebugTreeItemCollapsibleState,\n\t\t\tcontextValue: item.contextValue,\n\t\t};\n\t}\n}\n\nexport namespace LanguageModelToolSource {\n\texport function to(source: Dto<ToolDataSource>): vscode.LanguageModelToolInformation['source'] {\n\t\tif (source.type === 'mcp') {\n\t\t\treturn new types.LanguageModelToolMCPSource(source.label, source.serverLabel || source.label, source.instructions);\n\t\t} else if (source.type === 'extension') {\n\t\t\treturn new types.LanguageModelToolExtensionSource(source.extensionId.value, source.label);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nexport namespace LanguageModelToolResult {\n\texport function to(result: IToolResult): vscode.LanguageModelToolResult {\n\t\treturn new types.LanguageModelToolResult(result.content.map(item => {\n\t\t\tif (item.kind === 'text') {\n\t\t\t\treturn new types.LanguageModelTextPart(item.value, item.audience);\n\t\t\t} else if (item.kind === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(item.value.data.buffer, item.value.mimeType, item.audience);\n\t\t\t} else {\n\t\t\t\treturn new types.LanguageModelPromptTsxPart(item.value);\n\t\t\t}\n\t\t}));\n\t}\n\n\texport function from(result: vscode.ExtendedLanguageModelToolResult, extension: IExtensionDescription): Dto<IToolResult> | SerializableObjectWithBuffers<Dto<IToolResult>> {\n\t\tif (result.toolResultMessage) {\n\t\t\tcheckProposedApiEnabled(extension, 'chatParticipantPrivate');\n\t\t}\n\n\t\tconst checkAudienceApi = (item: LanguageModelTextPart | LanguageModelDataPart) => {\n\t\t\tif (item.audience) {\n\t\t\t\tcheckProposedApiEnabled(extension, 'languageModelToolResultAudience');\n\t\t\t}\n\t\t};\n\n\t\tlet hasBuffers = false;\n\t\tconst dto: Dto<IToolResult> = {\n\t\t\tcontent: result.content.map(item => {\n\t\t\t\tif (item instanceof types.LanguageModelTextPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'text',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'promptTsx',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelDataPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\thasBuffers = true;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'data',\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tmimeType: item.mimeType,\n\t\t\t\t\t\t\tdata: VSBuffer.wrap(item.data)\n\t\t\t\t\t\t},\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unknown LanguageModelToolResult part type');\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttoolResultMessage: MarkdownString.fromStrict(result.toolResultMessage),\n\t\t\ttoolResultDetails: result.toolResultDetails?.map(detail => URI.isUri(detail) ? detail : Location.from(detail as vscode.Location)),\n\t\t};\n\n\t\treturn hasBuffers ? new SerializableObjectWithBuffers(dto) : dto;\n\t}\n}\n\nexport namespace LanguageModelToolResult2 {\n\texport function to(result: IToolResult): vscode.LanguageModelToolResult2 {\n\t\tconst toolResult = new types.LanguageModelToolResult2(result.content.map(item => {\n\t\t\tif (item.kind === 'text') {\n\t\t\t\treturn new types.LanguageModelTextPart(item.value, item.audience);\n\t\t\t} else if (item.kind === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(item.value.data.buffer, item.value.mimeType, item.audience);\n\t\t\t} else {\n\t\t\t\treturn new types.LanguageModelPromptTsxPart(item.value);\n\t\t\t}\n\t\t}));\n\n\t\tif (result.toolMetadata) {\n\t\t\t(toolResult as vscode.ExtendedLanguageModelToolResult).toolMetadata = result.toolMetadata;\n\t\t}\n\n\t\treturn toolResult;\n\t}\n\n\texport function from(result: vscode.ExtendedLanguageModelToolResult2, extension: IExtensionDescription): Dto<IToolResult> | SerializableObjectWithBuffers<Dto<IToolResult>> {\n\t\tif (result.toolResultMessage) {\n\t\t\tcheckProposedApiEnabled(extension, 'chatParticipantPrivate');\n\t\t}\n\n\t\tconst checkAudienceApi = (item: LanguageModelTextPart | LanguageModelDataPart) => {\n\t\t\tif (item.audience) {\n\t\t\t\tcheckProposedApiEnabled(extension, 'languageModelToolResultAudience');\n\t\t\t}\n\t\t};\n\n\t\tlet hasBuffers = false;\n\t\tlet detailsDto: Dto<Array<URI | types.Location> | IToolResultInputOutputDetails | IToolResultOutputDetails | undefined> = undefined;\n\t\tif (Array.isArray(result.toolResultDetails)) {\n\t\t\tdetailsDto = result.toolResultDetails?.map(detail => {\n\t\t\t\treturn URI.isUri(detail) ? detail : Location.from(detail as vscode.Location);\n\t\t\t});\n\t\t} else {\n\t\t\tif (result.toolResultDetails2) {\n\t\t\t\tdetailsDto = {\n\t\t\t\t\toutput: {\n\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\tmimeType: (result.toolResultDetails2 as vscode.ToolResultDataOutput).mime,\n\t\t\t\t\t\tvalue: VSBuffer.wrap((result.toolResultDetails2 as vscode.ToolResultDataOutput).value),\n\t\t\t\t\t}\n\t\t\t\t} satisfies IToolResultOutputDetails;\n\t\t\t\thasBuffers = true;\n\t\t\t}\n\t\t}\n\n\t\tconst dto: Dto<IToolResult> = {\n\t\t\tcontent: result.content.map(item => {\n\t\t\t\tif (item instanceof types.LanguageModelTextPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'text',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'promptTsx',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelDataPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\thasBuffers = true;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'data',\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tmimeType: item.mimeType,\n\t\t\t\t\t\t\tdata: VSBuffer.wrap(item.data)\n\t\t\t\t\t\t},\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unknown LanguageModelToolResult part type');\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttoolResultMessage: MarkdownString.fromStrict(result.toolResultMessage),\n\t\t\ttoolResultDetails: detailsDto,\n\t\t\ttoolMetadata: result.toolMetadata,\n\t\t};\n\n\t\treturn hasBuffers ? new SerializableObjectWithBuffers(dto) : dto;\n\t}\n}\n\nexport namespace IconPath {\n\texport function fromThemeIcon(iconPath: vscode.ThemeIcon): languages.IconPath {\n\t\treturn iconPath;\n\t}\n\n\t/**\n\t * Converts a {@link vscode.IconPath} to an {@link extHostProtocol.IconPathDto}.\n\t * @note This function will tolerate strings specified instead of URIs in IconPath for historical reasons.\n\t * Such strings are treated as file paths and converted using {@link URI.file} function, not {@link URI.from}.\n\t * See https://github.com/microsoft/vscode/issues/110432#issuecomment-726144556 for context.\n\t */\n\texport function from(value: undefined): undefined;\n\texport function from(value: vscode.IconPath): extHostProtocol.IconPathDto;\n\texport function from(value: vscode.IconPath | undefined): extHostProtocol.IconPathDto | undefined;\n\texport function from(value: vscode.IconPath | undefined): extHostProtocol.IconPathDto | undefined {\n\t\tif (!value) {\n\t\t\treturn undefined;\n\t\t} else if (ThemeIcon.isThemeIcon(value)) {\n\t\t\treturn value;\n\t\t} else if (URI.isUri(value)) {\n\t\t\treturn value;\n\t\t} else if (typeof value === 'string') {\n\t\t\treturn URI.file(value);\n\t\t} else if (typeof value === 'object' && value !== null && 'dark' in value) {\n\t\t\tconst dark = typeof value.dark === 'string' ? URI.file(value.dark) : value.dark;\n\t\t\tconst light = typeof value.light === 'string' ? URI.file(value.light) : value.light;\n\t\t\treturn !dark ? undefined : { dark, light: light ?? dark };\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Converts a {@link extHostProtocol.IconPathDto} to a {@link vscode.IconPath}.\n\t * @note This is a strict conversion and we assume types are correct in this case.\n\t */\n\texport function to(value: undefined): undefined;\n\texport function to(value: extHostProtocol.IconPathDto): vscode.IconPath;\n\texport function to(value: extHostProtocol.IconPathDto | undefined): vscode.IconPath | undefined;\n\texport function to(value: extHostProtocol.IconPathDto | undefined): vscode.IconPath | undefined {\n\t\tif (!value) {\n\t\t\treturn undefined;\n\t\t} else if (ThemeIcon.isThemeIcon(value)) {\n\t\t\treturn value;\n\t\t} else if (isUriComponents(value)) {\n\t\t\treturn URI.revive(value);\n\t\t} else {\n\t\t\tconst icon = value as { light: UriComponents; dark: UriComponents };\n\t\t\treturn {\n\t\t\t\tlight: URI.revive(icon.light),\n\t\t\t\tdark: URI.revive(icon.dark)\n\t\t\t};\n\t\t}\n\t}\n}\n\nexport namespace AiSettingsSearch {\n\texport function fromSettingsSearchResult(result: vscode.SettingsSearchResult): AiSettingsSearchResult {\n\t\treturn {\n\t\t\tquery: result.query,\n\t\t\tkind: fromSettingsSearchResultKind(result.kind),\n\t\t\tsettings: result.settings\n\t\t};\n\t}\n\n\tfunction fromSettingsSearchResultKind(kind: number): AiSettingsSearchResultKind {\n\t\tswitch (kind) {\n\t\t\tcase AiSettingsSearchResultKind.EMBEDDED:\n\t\t\t\treturn AiSettingsSearchResultKind.EMBEDDED;\n\t\t\tcase AiSettingsSearchResultKind.LLM_RANKED:\n\t\t\t\treturn AiSettingsSearchResultKind.LLM_RANKED;\n\t\t\tcase AiSettingsSearchResultKind.CANCELED:\n\t\t\t\treturn AiSettingsSearchResultKind.CANCELED;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unknown AiSettingsSearchResultKind');\n\t\t}\n\t}\n}\n\nexport namespace McpServerDefinition {\n\tfunction isHttpConfig(candidate: vscode.McpServerDefinition): candidate is vscode.McpHttpServerDefinition {\n\t\treturn !!(candidate as vscode.McpHttpServerDefinition).uri;\n\t}\n\n\texport function from(item: vscode.McpServerDefinition): McpServerLaunch.Serialized {\n\t\treturn McpServerLaunch.toSerialized(\n\t\t\tisHttpConfig(item)\n\t\t\t\t? {\n\t\t\t\t\ttype: McpServerTransportType.HTTP,\n\t\t\t\t\turi: item.uri,\n\t\t\t\t\theaders: Object.entries(item.headers),\n\t\t\t\t\tauthentication: (item as vscode.McpHttpServerDefinition2).authentication ? {\n\t\t\t\t\t\tproviderId: (item as vscode.McpHttpServerDefinition2).authentication!.providerId,\n\t\t\t\t\t\tscopes: (item as vscode.McpHttpServerDefinition2).authentication!.scopes\n\t\t\t\t\t} : undefined,\n\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\ttype: McpServerTransportType.Stdio,\n\t\t\t\t\tcwd: item.cwd?.fsPath,\n\t\t\t\t\targs: item.args,\n\t\t\t\t\tcommand: item.command,\n\t\t\t\t\tenv: item.env,\n\t\t\t\t\tenvFile: undefined,\n\t\t\t\t}\n\t\t);\n\t}\n}\n\nexport namespace SourceControlInputBoxValidationType {\n\texport function from(type: number): InputValidationType {\n\t\tswitch (type) {\n\t\t\tcase types.SourceControlInputBoxValidationType.Error:\n\t\t\t\treturn InputValidationType.Error;\n\t\t\tcase types.SourceControlInputBoxValidationType.Warning:\n\t\t\t\treturn InputValidationType.Warning;\n\t\t\tcase types.SourceControlInputBoxValidationType.Information:\n\t\t\t\treturn InputValidationType.Information;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unknown SourceControlInputBoxValidationType');\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { asArray, coalesce, isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { VSBuffer, encodeBase64 } from '../../../base/common/buffer.js';\nimport { IDataTransferFile, IDataTransferItem, UriList } from '../../../base/common/dataTransfer.js';\nimport { createSingleCallFunction } from '../../../base/common/functional.js';\nimport * as htmlContent from '../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ResourceMap, ResourceSet } from '../../../base/common/map.js';\nimport * as marked from '../../../base/common/marked/marked.js';\nimport { parse, revive } from '../../../base/common/marshalling.js';\nimport { MarshalledId } from '../../../base/common/marshallingIds.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport { cloneAndChange } from '../../../base/common/objects.js';\nimport { IPrefixTreeNode, WellDefinedPrefixTree } from '../../../base/common/prefixTree.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isDefined, isEmptyObject, isNumber, isString, isUndefinedOrNull } from '../../../base/common/types.js';\nimport { URI, UriComponents, isUriComponents } from '../../../base/common/uri.js';\nimport { IURITransformer } from '../../../base/common/uriIpc.js';\nimport { generateUuid } from '../../../base/common/uuid.js';\nimport { RenderLineNumbersType } from '../../../editor/common/config/editorOptions.js';\nimport { IPosition } from '../../../editor/common/core/position.js';\nimport * as editorRange from '../../../editor/common/core/range.js';\nimport { ISelection } from '../../../editor/common/core/selection.js';\nimport { IContentDecorationRenderOptions, IDecorationOptions, IDecorationRenderOptions, IThemeDecorationRenderOptions } from '../../../editor/common/editorCommon.js';\nimport * as encodedTokenAttributes from '../../../editor/common/encodedTokenAttributes.js';\nimport * as languageSelector from '../../../editor/common/languageSelector.js';\nimport * as languages from '../../../editor/common/languages.js';\nimport { EndOfLineSequence, TrackedRangeStickiness } from '../../../editor/common/model.js';\nimport { ITextEditorOptions } from '../../../platform/editor/common/editor.js';\nimport { IExtensionDescription, IRelaxedExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { IMarkerData, IRelatedInformation, MarkerSeverity, MarkerTag } from '../../../platform/markers/common/markers.js';\nimport { ProgressLocation as MainProgressLocation } from '../../../platform/progress/common/progress.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, SaveReason } from '../../common/editor.js';\nimport { IViewBadge } from '../../common/views.js';\nimport { IChatAgentRequest, IChatAgentResult } from '../../contrib/chat/common/chatAgents.js';\nimport { IChatRequestDraft } from '../../contrib/chat/common/chatEditingService.js';\nimport { IChatRequestModeInstructions } from '../../contrib/chat/common/chatModel.js';\nimport { IChatAgentMarkdownContentWithVulnerability, IChatCodeCitation, IChatCommandButton, IChatConfirmation, IChatContentInlineReference, IChatContentReference, IChatExtensionsContent, IChatFollowup, IChatMarkdownContent, IChatMoveMessage, IChatMultiDiffData, IChatPrepareToolInvocationPart, IChatProgressMessage, IChatPullRequestContent, IChatResponseCodeblockUriPart, IChatTaskDto, IChatTaskResult, IChatTextEdit, IChatThinkingPart, IChatToolInvocationSerialized, IChatTreeData, IChatUserActionEvent, IChatWarningMessage } from '../../contrib/chat/common/chatService.js';\nimport { ChatRequestToolReferenceEntry, IChatRequestVariableEntry, isImageVariableEntry, isPromptFileVariableEntry, isPromptTextVariableEntry } from '../../contrib/chat/common/chatVariableEntries.js';\nimport { ChatAgentLocation } from '../../contrib/chat/common/constants.js';\nimport { IToolInvocationContext, IToolResult, IToolResultInputOutputDetails, IToolResultOutputDetails, ToolDataSource } from '../../contrib/chat/common/languageModelToolsService.js';\nimport * as chatProvider from '../../contrib/chat/common/languageModels.js';\nimport { IChatMessageDataPart, IChatResponseDataPart, IChatResponsePromptTsxPart, IChatResponseTextPart } from '../../contrib/chat/common/languageModels.js';\nimport { DebugTreeItemCollapsibleState, IDebugVisualizationTreeItem } from '../../contrib/debug/common/debug.js';\nimport { McpServerLaunch, McpServerTransportType } from '../../contrib/mcp/common/mcpTypes.js';\nimport * as notebooks from '../../contrib/notebook/common/notebookCommon.js';\nimport { CellEditType } from '../../contrib/notebook/common/notebookCommon.js';\nimport { ICellRange } from '../../contrib/notebook/common/notebookRange.js';\nimport { InputValidationType } from '../../contrib/scm/common/scm.js';\nimport * as search from '../../contrib/search/common/search.js';\nimport { TestId } from '../../contrib/testing/common/testId.js';\nimport { CoverageDetails, DetailType, ICoverageCount, IFileCoverage, ISerializedTestResults, ITestErrorMessage, ITestItem, ITestRunProfileReference, ITestTag, TestMessageType, TestResultItem, TestRunProfileBitset, denamespaceTestTag, namespaceTestTag } from '../../contrib/testing/common/testTypes.js';\nimport { AiSettingsSearchResult, AiSettingsSearchResultKind } from '../../services/aiSettingsSearch/common/aiSettingsSearch.js';\nimport { EditorGroupColumn } from '../../services/editor/common/editorGroupColumn.js';\nimport { ACTIVE_GROUP, SIDE_GROUP } from '../../services/editor/common/editorService.js';\nimport { checkProposedApiEnabled, isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport { Dto, SerializableObjectWithBuffers } from '../../services/extensions/common/proxyIdentifier.js';\nimport * as extHostProtocol from './extHost.protocol.js';\nimport { CommandsConverter } from './extHostCommands.js';\nimport { getPrivateApiFor } from './extHostTestingPrivateApi.js';\nimport * as types from './extHostTypes.js';\nimport { LanguageModelDataPart, LanguageModelPromptTsxPart, LanguageModelTextPart } from './extHostTypes.js';\n\nexport namespace Command {\n\n\texport interface ICommandsConverter {\n\t\tfromInternal(command: extHostProtocol.ICommandDto): vscode.Command | undefined;\n\t\ttoInternal(command: vscode.Command | undefined, disposables: DisposableStore): extHostProtocol.ICommandDto | undefined;\n\t}\n}\n\nexport interface PositionLike {\n\tline: number;\n\tcharacter: number;\n}\n\nexport interface RangeLike {\n\tstart: PositionLike;\n\tend: PositionLike;\n}\n\nexport interface SelectionLike extends RangeLike {\n\tanchor: PositionLike;\n\tactive: PositionLike;\n}\nexport namespace Selection {\n\n\texport function to(selection: ISelection): types.Selection {\n\t\tconst { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n\t\tconst start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n\t\tconst end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n\t\treturn new types.Selection(start, end);\n\t}\n\n\texport function from(selection: SelectionLike): ISelection {\n\t\tconst { anchor, active } = selection;\n\t\treturn {\n\t\t\tselectionStartLineNumber: anchor.line + 1,\n\t\t\tselectionStartColumn: anchor.character + 1,\n\t\t\tpositionLineNumber: active.line + 1,\n\t\t\tpositionColumn: active.character + 1\n\t\t};\n\t}\n}\nexport namespace Range {\n\n\texport function from(range: undefined): undefined;\n\texport function from(range: RangeLike): editorRange.IRange;\n\texport function from(range: RangeLike | undefined): editorRange.IRange | undefined;\n\texport function from(range: RangeLike | undefined): editorRange.IRange | undefined {\n\t\tif (!range) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { start, end } = range;\n\t\treturn {\n\t\t\tstartLineNumber: start.line + 1,\n\t\t\tstartColumn: start.character + 1,\n\t\t\tendLineNumber: end.line + 1,\n\t\t\tendColumn: end.character + 1\n\t\t};\n\t}\n\n\texport function to(range: undefined): types.Range;\n\texport function to(range: editorRange.IRange): types.Range;\n\texport function to(range: editorRange.IRange | undefined): types.Range | undefined;\n\texport function to(range: editorRange.IRange | undefined): types.Range | undefined {\n\t\tif (!range) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n\t\treturn new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n\t}\n}\n\nexport namespace Location {\n\n\texport function from(location: vscode.Location): Dto<languages.Location> {\n\t\treturn {\n\t\t\turi: location.uri,\n\t\t\trange: Range.from(location.range)\n\t\t};\n\t}\n\n\texport function to(location: Dto<languages.Location>): vscode.Location {\n\t\treturn new types.Location(URI.revive(location.uri), Range.to(location.range));\n\t}\n}\n\nexport namespace TokenType {\n\texport function to(type: encodedTokenAttributes.StandardTokenType): types.StandardTokenType {\n\t\tswitch (type) {\n\t\t\tcase encodedTokenAttributes.StandardTokenType.Comment: return types.StandardTokenType.Comment;\n\t\t\tcase encodedTokenAttributes.StandardTokenType.Other: return types.StandardTokenType.Other;\n\t\t\tcase encodedTokenAttributes.StandardTokenType.RegEx: return types.StandardTokenType.RegEx;\n\t\t\tcase encodedTokenAttributes.StandardTokenType.String: return types.StandardTokenType.String;\n\t\t}\n\t}\n}\n\nexport namespace Position {\n\texport function to(position: IPosition): types.Position {\n\t\treturn new types.Position(position.lineNumber - 1, position.column - 1);\n\t}\n\texport function from(position: types.Position | vscode.Position): IPosition {\n\t\treturn { lineNumber: position.line + 1, column: position.character + 1 };\n\t}\n}\n\nexport namespace DocumentSelector {\n\n\texport function from(value: vscode.DocumentSelector, uriTransformer?: IURITransformer, extension?: IExtensionDescription): extHostProtocol.IDocumentFilterDto[] {\n\t\treturn coalesce(asArray(value).map(sel => _doTransformDocumentSelector(sel, uriTransformer, extension)));\n\t}\n\n\tfunction _doTransformDocumentSelector(selector: string | vscode.DocumentFilter, uriTransformer: IURITransformer | undefined, extension: IExtensionDescription | undefined): extHostProtocol.IDocumentFilterDto | undefined {\n\t\tif (typeof selector === 'string') {\n\t\t\treturn {\n\t\t\t\t$serialized: true,\n\t\t\t\tlanguage: selector,\n\t\t\t\tisBuiltin: extension?.isBuiltin,\n\t\t\t};\n\t\t}\n\n\t\tif (selector) {\n\t\t\treturn {\n\t\t\t\t$serialized: true,\n\t\t\t\tlanguage: selector.language,\n\t\t\t\tscheme: _transformScheme(selector.scheme, uriTransformer),\n\t\t\t\tpattern: GlobPattern.from(selector.pattern) ?? undefined,\n\t\t\t\texclusive: selector.exclusive,\n\t\t\t\tnotebookType: selector.notebookType,\n\t\t\t\tisBuiltin: extension?.isBuiltin\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tfunction _transformScheme(scheme: string | undefined, uriTransformer: IURITransformer | undefined): string | undefined {\n\t\tif (uriTransformer && typeof scheme === 'string') {\n\t\t\treturn uriTransformer.transformOutgoingScheme(scheme);\n\t\t}\n\t\treturn scheme;\n\t}\n}\n\nexport namespace DiagnosticTag {\n\texport function from(value: vscode.DiagnosticTag): MarkerTag | undefined {\n\t\tswitch (value) {\n\t\t\tcase types.DiagnosticTag.Unnecessary:\n\t\t\t\treturn MarkerTag.Unnecessary;\n\t\t\tcase types.DiagnosticTag.Deprecated:\n\t\t\t\treturn MarkerTag.Deprecated;\n\t\t}\n\t\treturn undefined;\n\t}\n\texport function to(value: MarkerTag): vscode.DiagnosticTag | undefined {\n\t\tswitch (value) {\n\t\t\tcase MarkerTag.Unnecessary:\n\t\t\t\treturn types.DiagnosticTag.Unnecessary;\n\t\t\tcase MarkerTag.Deprecated:\n\t\t\t\treturn types.DiagnosticTag.Deprecated;\n\t\t\tdefault:\n\t\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nexport namespace Diagnostic {\n\texport function from(value: vscode.Diagnostic): IMarkerData {\n\t\tlet code: string | { value: string; target: URI } | undefined;\n\n\t\tif (value.code) {\n\t\t\tif (isString(value.code) || isNumber(value.code)) {\n\t\t\t\tcode = String(value.code);\n\t\t\t} else {\n\t\t\t\tcode = {\n\t\t\t\t\tvalue: String(value.code.value),\n\t\t\t\t\ttarget: value.code.target,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t...Range.from(value.range),\n\t\t\tmessage: value.message,\n\t\t\tsource: value.source,\n\t\t\tcode,\n\t\t\tseverity: DiagnosticSeverity.from(value.severity),\n\t\t\trelatedInformation: value.relatedInformation && value.relatedInformation.map(DiagnosticRelatedInformation.from),\n\t\t\ttags: Array.isArray(value.tags) ? coalesce(value.tags.map(DiagnosticTag.from)) : undefined,\n\t\t};\n\t}\n\n\texport function to(value: IMarkerData): vscode.Diagnostic {\n\t\tconst res = new types.Diagnostic(Range.to(value), value.message, DiagnosticSeverity.to(value.severity));\n\t\tres.source = value.source;\n\t\tres.code = isString(value.code) ? value.code : value.code?.value;\n\t\tres.relatedInformation = value.relatedInformation && value.relatedInformation.map(DiagnosticRelatedInformation.to);\n\t\tres.tags = value.tags && coalesce(value.tags.map(DiagnosticTag.to));\n\t\treturn res;\n\t}\n}\n\nexport namespace DiagnosticRelatedInformation {\n\texport function from(value: vscode.DiagnosticRelatedInformation): IRelatedInformation {\n\t\treturn {\n\t\t\t...Range.from(value.location.range),\n\t\t\tmessage: value.message,\n\t\t\tresource: value.location.uri\n\t\t};\n\t}\n\texport function to(value: IRelatedInformation): types.DiagnosticRelatedInformation {\n\t\treturn new types.DiagnosticRelatedInformation(new types.Location(value.resource, Range.to(value)), value.message);\n\t}\n}\nexport namespace DiagnosticSeverity {\n\n\texport function from(value: number): MarkerSeverity {\n\t\tswitch (value) {\n\t\t\tcase types.DiagnosticSeverity.Error:\n\t\t\t\treturn MarkerSeverity.Error;\n\t\t\tcase types.DiagnosticSeverity.Warning:\n\t\t\t\treturn MarkerSeverity.Warning;\n\t\t\tcase types.DiagnosticSeverity.Information:\n\t\t\t\treturn MarkerSeverity.Info;\n\t\t\tcase types.DiagnosticSeverity.Hint:\n\t\t\t\treturn MarkerSeverity.Hint;\n\t\t}\n\t\treturn MarkerSeverity.Error;\n\t}\n\n\texport function to(value: MarkerSeverity): types.DiagnosticSeverity {\n\t\tswitch (value) {\n\t\t\tcase MarkerSeverity.Info:\n\t\t\t\treturn types.DiagnosticSeverity.Information;\n\t\t\tcase MarkerSeverity.Warning:\n\t\t\t\treturn types.DiagnosticSeverity.Warning;\n\t\t\tcase MarkerSeverity.Error:\n\t\t\t\treturn types.DiagnosticSeverity.Error;\n\t\t\tcase MarkerSeverity.Hint:\n\t\t\t\treturn types.DiagnosticSeverity.Hint;\n\t\t\tdefault:\n\t\t\t\treturn types.DiagnosticSeverity.Error;\n\t\t}\n\t}\n}\n\nexport namespace ViewColumn {\n\texport function from(column?: vscode.ViewColumn): EditorGroupColumn {\n\t\tif (typeof column === 'number' && column >= types.ViewColumn.One) {\n\t\t\treturn column - 1; // adjust zero index (ViewColumn.ONE => 0)\n\t\t}\n\n\t\tif (column === types.ViewColumn.Beside) {\n\t\t\treturn SIDE_GROUP;\n\t\t}\n\n\t\treturn ACTIVE_GROUP; // default is always the active group\n\t}\n\n\texport function to(position: EditorGroupColumn): vscode.ViewColumn {\n\t\tif (typeof position === 'number' && position >= 0) {\n\t\t\treturn position + 1; // adjust to index (ViewColumn.ONE => 1)\n\t\t}\n\n\t\tthrow new Error(`invalid 'EditorGroupColumn'`);\n\t}\n}\n\nfunction isDecorationOptions(something: any): something is vscode.DecorationOptions {\n\treturn (typeof something.range !== 'undefined');\n}\n\nexport function isDecorationOptionsArr(something: vscode.Range[] | vscode.DecorationOptions[]): something is vscode.DecorationOptions[] {\n\tif (something.length === 0) {\n\t\treturn true;\n\t}\n\treturn isDecorationOptions(something[0]) ? true : false;\n}\n\nexport namespace MarkdownString {\n\n\texport function fromMany(markup: (vscode.MarkdownString | vscode.MarkedString)[]): htmlContent.IMarkdownString[] {\n\t\treturn markup.map(MarkdownString.from);\n\t}\n\n\tinterface Codeblock {\n\t\tlanguage: string;\n\t\tvalue: string;\n\t}\n\n\tfunction isCodeblock(thing: any): thing is Codeblock {\n\t\treturn thing && typeof thing === 'object'\n\t\t\t&& typeof (<Codeblock>thing).language === 'string'\n\t\t\t&& typeof (<Codeblock>thing).value === 'string';\n\t}\n\n\texport function from(markup: vscode.MarkdownString | vscode.MarkedString): htmlContent.IMarkdownString {\n\t\tlet res: htmlContent.IMarkdownString;\n\t\tif (isCodeblock(markup)) {\n\t\t\tconst { language, value } = markup;\n\t\t\tres = { value: '```' + language + '\\n' + value + '\\n```\\n' };\n\t\t} else if (types.MarkdownString.isMarkdownString(markup)) {\n\t\t\tres = { value: markup.value, isTrusted: markup.isTrusted, supportThemeIcons: markup.supportThemeIcons, supportHtml: markup.supportHtml, supportAlertSyntax: markup.supportAlertSyntax, baseUri: markup.baseUri };\n\t\t} else if (typeof markup === 'string') {\n\t\t\tres = { value: markup };\n\t\t} else {\n\t\t\tres = { value: '' };\n\t\t}\n\n\t\t// extract uris into a separate object\n\t\tconst resUris: { [href: string]: UriComponents } = Object.create(null);\n\t\tres.uris = resUris;\n\n\t\tconst collectUri = ({ href }: { href: string }): string => {\n\t\t\ttry {\n\t\t\t\tlet uri = URI.parse(href, true);\n\t\t\t\turi = uri.with({ query: _uriMassage(uri.query, resUris) });\n\t\t\t\tresUris[href] = uri;\n\t\t\t} catch (e) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t\treturn '';\n\t\t};\n\n\t\tmarked.marked.walkTokens(marked.marked.lexer(res.value), token => {\n\t\t\tif (token.type === 'link') {\n\t\t\t\tcollectUri({ href: token.href });\n\t\t\t} else if (token.type === 'image') {\n\t\t\t\tif (typeof token.href === 'string') {\n\t\t\t\t\tcollectUri(htmlContent.parseHrefAndDimensions(token.href));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn res;\n\t}\n\n\tfunction _uriMassage(part: string, bucket: { [n: string]: UriComponents }): string {\n\t\tif (!part) {\n\t\t\treturn part;\n\t\t}\n\t\tlet data: unknown;\n\t\ttry {\n\t\t\tdata = parse(part);\n\t\t} catch (e) {\n\t\t\t// ignore\n\t\t}\n\t\tif (!data) {\n\t\t\treturn part;\n\t\t}\n\t\tlet changed = false;\n\t\tdata = cloneAndChange(data, value => {\n\t\t\tif (URI.isUri(value)) {\n\t\t\t\tconst key = `__uri_${Math.random().toString(16).slice(2, 8)}`;\n\t\t\t\tbucket[key] = value;\n\t\t\t\tchanged = true;\n\t\t\t\treturn key;\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\n\t\tif (!changed) {\n\t\t\treturn part;\n\t\t}\n\n\t\treturn JSON.stringify(data);\n\t}\n\n\texport function to(value: htmlContent.IMarkdownString): vscode.MarkdownString {\n\t\tconst result = new types.MarkdownString(value.value, value.supportThemeIcons);\n\t\tresult.isTrusted = value.isTrusted;\n\t\tresult.supportHtml = value.supportHtml;\n\t\tresult.supportAlertSyntax = value.supportAlertSyntax;\n\t\tresult.baseUri = value.baseUri ? URI.from(value.baseUri) : undefined;\n\t\treturn result;\n\t}\n\n\texport function fromStrict(value: string | vscode.MarkdownString | undefined | null): undefined | string | htmlContent.IMarkdownString {\n\t\tif (!value) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn typeof value === 'string' ? value : MarkdownString.from(value);\n\t}\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: vscode.Range[] | vscode.DecorationOptions[]): IDecorationOptions[] {\n\tif (isDecorationOptionsArr(ranges)) {\n\t\treturn ranges.map((r): IDecorationOptions => {\n\t\t\treturn {\n\t\t\t\trange: Range.from(r.range),\n\t\t\t\thoverMessage: Array.isArray(r.hoverMessage)\n\t\t\t\t\t? MarkdownString.fromMany(r.hoverMessage)\n\t\t\t\t\t: (r.hoverMessage ? MarkdownString.from(r.hoverMessage) : undefined),\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\trenderOptions: <any> /* URI vs Uri */r.renderOptions\n\t\t\t};\n\t\t});\n\t} else {\n\t\treturn ranges.map((r): IDecorationOptions => {\n\t\t\treturn {\n\t\t\t\trange: Range.from(r)\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n\tif (typeof value === 'undefined') {\n\t\treturn value;\n\t}\n\tif (typeof value === 'string') {\n\t\treturn URI.file(value);\n\t} else {\n\t\treturn value;\n\t}\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n\texport function from(options: vscode.ThemableDecorationAttachmentRenderOptions): IContentDecorationRenderOptions {\n\t\tif (typeof options === 'undefined') {\n\t\t\treturn options;\n\t\t}\n\t\treturn {\n\t\t\tcontentText: options.contentText,\n\t\t\tcontentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n\t\t\tborder: options.border,\n\t\t\tborderColor: <string | types.ThemeColor>options.borderColor,\n\t\t\tfontStyle: options.fontStyle,\n\t\t\tfontWeight: options.fontWeight,\n\t\t\ttextDecoration: options.textDecoration,\n\t\t\tcolor: <string | types.ThemeColor>options.color,\n\t\t\tbackgroundColor: <string | types.ThemeColor>options.backgroundColor,\n\t\t\tmargin: options.margin,\n\t\t\twidth: options.width,\n\t\t\theight: options.height,\n\t\t};\n\t}\n}\n\nexport namespace ThemableDecorationRenderOptions {\n\texport function from(options: vscode.ThemableDecorationRenderOptions): IThemeDecorationRenderOptions {\n\t\tif (typeof options === 'undefined') {\n\t\t\treturn options;\n\t\t}\n\t\treturn {\n\t\t\tbackgroundColor: <string | types.ThemeColor>options.backgroundColor,\n\t\t\toutline: options.outline,\n\t\t\toutlineColor: <string | types.ThemeColor>options.outlineColor,\n\t\t\toutlineStyle: options.outlineStyle,\n\t\t\toutlineWidth: options.outlineWidth,\n\t\t\tborder: options.border,\n\t\t\tborderColor: <string | types.ThemeColor>options.borderColor,\n\t\t\tborderRadius: options.borderRadius,\n\t\t\tborderSpacing: options.borderSpacing,\n\t\t\tborderStyle: options.borderStyle,\n\t\t\tborderWidth: options.borderWidth,\n\t\t\tfontStyle: options.fontStyle,\n\t\t\tfontWeight: options.fontWeight,\n\t\t\ttextDecoration: options.textDecoration,\n\t\t\tcursor: options.cursor,\n\t\t\tcolor: <string | types.ThemeColor>options.color,\n\t\t\topacity: options.opacity,\n\t\t\tletterSpacing: options.letterSpacing,\n\t\t\tgutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n\t\t\tgutterIconSize: options.gutterIconSize,\n\t\t\toverviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n\t\t\tbefore: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n\t\t\tafter: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace DecorationRangeBehavior {\n\texport function from(value: types.DecorationRangeBehavior): TrackedRangeStickiness {\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn value;\n\t\t}\n\t\tswitch (value) {\n\t\t\tcase types.DecorationRangeBehavior.OpenOpen:\n\t\t\t\treturn TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n\t\t\tcase types.DecorationRangeBehavior.ClosedClosed:\n\t\t\t\treturn TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n\t\t\tcase types.DecorationRangeBehavior.OpenClosed:\n\t\t\t\treturn TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n\t\t\tcase types.DecorationRangeBehavior.ClosedOpen:\n\t\t\t\treturn TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n\t\t}\n\t}\n}\n\nexport namespace DecorationRenderOptions {\n\texport function from(options: vscode.DecorationRenderOptions): IDecorationRenderOptions {\n\t\treturn {\n\t\t\tisWholeLine: options.isWholeLine,\n\t\t\trangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n\t\t\toverviewRulerLane: options.overviewRulerLane,\n\t\t\tlight: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n\t\t\tdark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n\t\t\tbackgroundColor: <string | types.ThemeColor>options.backgroundColor,\n\t\t\toutline: options.outline,\n\t\t\toutlineColor: <string | types.ThemeColor>options.outlineColor,\n\t\t\toutlineStyle: options.outlineStyle,\n\t\t\toutlineWidth: options.outlineWidth,\n\t\t\tborder: options.border,\n\t\t\tborderColor: <string | types.ThemeColor>options.borderColor,\n\t\t\tborderRadius: options.borderRadius,\n\t\t\tborderSpacing: options.borderSpacing,\n\t\t\tborderStyle: options.borderStyle,\n\t\t\tborderWidth: options.borderWidth,\n\t\t\tfontStyle: options.fontStyle,\n\t\t\tfontWeight: options.fontWeight,\n\t\t\ttextDecoration: options.textDecoration,\n\t\t\tcursor: options.cursor,\n\t\t\tcolor: <string | types.ThemeColor>options.color,\n\t\t\topacity: options.opacity,\n\t\t\tletterSpacing: options.letterSpacing,\n\t\t\tgutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n\t\t\tgutterIconSize: options.gutterIconSize,\n\t\t\toverviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n\t\t\tbefore: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n\t\t\tafter: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace TextEdit {\n\n\texport function from(edit: vscode.TextEdit): languages.TextEdit {\n\t\treturn {\n\t\t\ttext: edit.newText,\n\t\t\teol: edit.newEol && EndOfLine.from(edit.newEol),\n\t\t\trange: Range.from(edit.range)\n\t\t};\n\t}\n\n\texport function to(edit: languages.TextEdit): types.TextEdit {\n\t\tconst result = new types.TextEdit(Range.to(edit.range), edit.text);\n\t\tresult.newEol = (typeof edit.eol === 'undefined' ? undefined : EndOfLine.to(edit.eol))!;\n\t\treturn result;\n\t}\n}\n\nexport namespace WorkspaceEdit {\n\n\texport interface IVersionInformationProvider {\n\t\tgetTextDocumentVersion(uri: URI): number | undefined;\n\t\tgetNotebookDocumentVersion(uri: URI): number | undefined;\n\t}\n\n\texport function from(value: vscode.WorkspaceEdit, versionInfo?: IVersionInformationProvider): extHostProtocol.IWorkspaceEditDto {\n\t\tconst result: extHostProtocol.IWorkspaceEditDto = {\n\t\t\tedits: []\n\t\t};\n\n\t\tif (value instanceof types.WorkspaceEdit) {\n\n\t\t\t// collect all files that are to be created so that their version\n\t\t\t// information (in case they exist as text model already) can be ignored\n\t\t\tconst toCreate = new ResourceSet();\n\t\t\tfor (const entry of value._allEntries()) {\n\t\t\t\tif (entry._type === types.FileEditType.File && URI.isUri(entry.to) && entry.from === undefined) {\n\t\t\t\t\ttoCreate.add(entry.to);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const entry of value._allEntries()) {\n\n\t\t\t\tif (entry._type === types.FileEditType.File) {\n\t\t\t\t\tlet contents: { type: 'base64'; value: string } | { type: 'dataTransferItem'; id: string } | undefined;\n\t\t\t\t\tif (entry.options?.contents) {\n\t\t\t\t\t\tif (ArrayBuffer.isView(entry.options.contents)) {\n\t\t\t\t\t\t\tcontents = { type: 'base64', value: encodeBase64(VSBuffer.wrap(entry.options.contents)) };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontents = { type: 'dataTransferItem', id: (entry.options.contents as types.DataTransferFile)._itemId };\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// file operation\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\toldResource: entry.from,\n\t\t\t\t\t\tnewResource: entry.to,\n\t\t\t\t\t\toptions: { ...entry.options, contents },\n\t\t\t\t\t\tmetadata: entry.metadata\n\t\t\t\t\t});\n\n\t\t\t\t} else if (entry._type === types.FileEditType.Text) {\n\t\t\t\t\t// text edits\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\ttextEdit: TextEdit.from(entry.edit),\n\t\t\t\t\t\tversionId: !toCreate.has(entry.uri) ? versionInfo?.getTextDocumentVersion(entry.uri) : undefined,\n\t\t\t\t\t\tmetadata: entry.metadata\n\t\t\t\t\t});\n\t\t\t\t} else if (entry._type === types.FileEditType.Snippet) {\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\ttextEdit: {\n\t\t\t\t\t\t\trange: Range.from(entry.range),\n\t\t\t\t\t\t\ttext: entry.edit.value,\n\t\t\t\t\t\t\tinsertAsSnippet: true,\n\t\t\t\t\t\t\tkeepWhitespace: entry.keepWhitespace\n\t\t\t\t\t\t},\n\t\t\t\t\t\tversionId: !toCreate.has(entry.uri) ? versionInfo?.getTextDocumentVersion(entry.uri) : undefined,\n\t\t\t\t\t\tmetadata: entry.metadata\n\t\t\t\t\t});\n\n\t\t\t\t} else if (entry._type === types.FileEditType.Cell) {\n\t\t\t\t\t// cell edit\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tmetadata: entry.metadata,\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\tcellEdit: entry.edit,\n\t\t\t\t\t\tnotebookVersionId: versionInfo?.getNotebookDocumentVersion(entry.uri)\n\t\t\t\t\t});\n\n\t\t\t\t} else if (entry._type === types.FileEditType.CellReplace) {\n\t\t\t\t\t// cell replace\n\t\t\t\t\tresult.edits.push({\n\t\t\t\t\t\tmetadata: entry.metadata,\n\t\t\t\t\t\tresource: entry.uri,\n\t\t\t\t\t\tnotebookVersionId: versionInfo?.getNotebookDocumentVersion(entry.uri),\n\t\t\t\t\t\tcellEdit: {\n\t\t\t\t\t\t\teditType: notebooks.CellEditType.Replace,\n\t\t\t\t\t\t\tindex: entry.index,\n\t\t\t\t\t\t\tcount: entry.count,\n\t\t\t\t\t\t\tcells: entry.cells.map(NotebookCellData.from)\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\texport function to(value: extHostProtocol.IWorkspaceEditDto) {\n\t\tconst result = new types.WorkspaceEdit();\n\t\tconst edits = new ResourceMap<(types.TextEdit | types.SnippetTextEdit)[]>();\n\t\tfor (const edit of value.edits) {\n\t\t\tif ((<extHostProtocol.IWorkspaceTextEditDto>edit).textEdit) {\n\n\t\t\t\tconst item = <extHostProtocol.IWorkspaceTextEditDto>edit;\n\t\t\t\tconst uri = URI.revive(item.resource);\n\t\t\t\tconst range = Range.to(item.textEdit.range);\n\t\t\t\tconst text = item.textEdit.text;\n\t\t\t\tconst isSnippet = item.textEdit.insertAsSnippet;\n\n\t\t\t\tlet editOrSnippetTest: types.TextEdit | types.SnippetTextEdit;\n\t\t\t\tif (isSnippet) {\n\t\t\t\t\teditOrSnippetTest = types.SnippetTextEdit.replace(range, new types.SnippetString(text));\n\t\t\t\t} else {\n\t\t\t\t\teditOrSnippetTest = types.TextEdit.replace(range, text);\n\t\t\t\t}\n\n\t\t\t\tconst array = edits.get(uri);\n\t\t\t\tif (!array) {\n\t\t\t\t\tedits.set(uri, [editOrSnippetTest]);\n\t\t\t\t} else {\n\t\t\t\t\tarray.push(editOrSnippetTest);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tresult.renameFile(\n\t\t\t\t\tURI.revive((<extHostProtocol.IWorkspaceFileEditDto>edit).oldResource!),\n\t\t\t\t\tURI.revive((<extHostProtocol.IWorkspaceFileEditDto>edit).newResource!),\n\t\t\t\t\t(<extHostProtocol.IWorkspaceFileEditDto>edit).options\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfor (const [uri, array] of edits) {\n\t\t\tresult.set(uri, array);\n\t\t}\n\t\treturn result;\n\t}\n}\n\n\nexport namespace SymbolKind {\n\n\tconst _fromMapping: { [kind: number]: languages.SymbolKind } = Object.create(null);\n\t_fromMapping[types.SymbolKind.File] = languages.SymbolKind.File;\n\t_fromMapping[types.SymbolKind.Module] = languages.SymbolKind.Module;\n\t_fromMapping[types.SymbolKind.Namespace] = languages.SymbolKind.Namespace;\n\t_fromMapping[types.SymbolKind.Package] = languages.SymbolKind.Package;\n\t_fromMapping[types.SymbolKind.Class] = languages.SymbolKind.Class;\n\t_fromMapping[types.SymbolKind.Method] = languages.SymbolKind.Method;\n\t_fromMapping[types.SymbolKind.Property] = languages.SymbolKind.Property;\n\t_fromMapping[types.SymbolKind.Field] = languages.SymbolKind.Field;\n\t_fromMapping[types.SymbolKind.Constructor] = languages.SymbolKind.Constructor;\n\t_fromMapping[types.SymbolKind.Enum] = languages.SymbolKind.Enum;\n\t_fromMapping[types.SymbolKind.Interface] = languages.SymbolKind.Interface;\n\t_fromMapping[types.SymbolKind.Function] = languages.SymbolKind.Function;\n\t_fromMapping[types.SymbolKind.Variable] = languages.SymbolKind.Variable;\n\t_fromMapping[types.SymbolKind.Constant] = languages.SymbolKind.Constant;\n\t_fromMapping[types.SymbolKind.String] = languages.SymbolKind.String;\n\t_fromMapping[types.SymbolKind.Number] = languages.SymbolKind.Number;\n\t_fromMapping[types.SymbolKind.Boolean] = languages.SymbolKind.Boolean;\n\t_fromMapping[types.SymbolKind.Array] = languages.SymbolKind.Array;\n\t_fromMapping[types.SymbolKind.Object] = languages.SymbolKind.Object;\n\t_fromMapping[types.SymbolKind.Key] = languages.SymbolKind.Key;\n\t_fromMapping[types.SymbolKind.Null] = languages.SymbolKind.Null;\n\t_fromMapping[types.SymbolKind.EnumMember] = languages.SymbolKind.EnumMember;\n\t_fromMapping[types.SymbolKind.Struct] = languages.SymbolKind.Struct;\n\t_fromMapping[types.SymbolKind.Event] = languages.SymbolKind.Event;\n\t_fromMapping[types.SymbolKind.Operator] = languages.SymbolKind.Operator;\n\t_fromMapping[types.SymbolKind.TypeParameter] = languages.SymbolKind.TypeParameter;\n\n\texport function from(kind: vscode.SymbolKind): languages.SymbolKind {\n\t\treturn typeof _fromMapping[kind] === 'number' ? _fromMapping[kind] : languages.SymbolKind.Property;\n\t}\n\n\texport function to(kind: languages.SymbolKind): vscode.SymbolKind {\n\t\tfor (const k in _fromMapping) {\n\t\t\tif (_fromMapping[k] === kind) {\n\t\t\t\treturn Number(k);\n\t\t\t}\n\t\t}\n\t\treturn types.SymbolKind.Property;\n\t}\n}\n\nexport namespace SymbolTag {\n\n\texport function from(kind: types.SymbolTag): languages.SymbolTag {\n\t\tswitch (kind) {\n\t\t\tcase types.SymbolTag.Deprecated: return languages.SymbolTag.Deprecated;\n\t\t}\n\t}\n\n\texport function to(kind: languages.SymbolTag): types.SymbolTag {\n\t\tswitch (kind) {\n\t\t\tcase languages.SymbolTag.Deprecated: return types.SymbolTag.Deprecated;\n\t\t}\n\t}\n}\n\nexport namespace WorkspaceSymbol {\n\texport function from(info: vscode.SymbolInformation): search.IWorkspaceSymbol {\n\t\treturn {\n\t\t\tname: info.name,\n\t\t\tkind: SymbolKind.from(info.kind),\n\t\t\ttags: info.tags && info.tags.map(SymbolTag.from),\n\t\t\tcontainerName: info.containerName,\n\t\t\tlocation: location.from(info.location)\n\t\t};\n\t}\n\texport function to(info: search.IWorkspaceSymbol): types.SymbolInformation {\n\t\tconst result = new types.SymbolInformation(\n\t\t\tinfo.name,\n\t\t\tSymbolKind.to(info.kind),\n\t\t\tinfo.containerName,\n\t\t\tlocation.to(info.location)\n\t\t);\n\t\tresult.tags = info.tags && info.tags.map(SymbolTag.to);\n\t\treturn result;\n\t}\n}\n\nexport namespace DocumentSymbol {\n\texport function from(info: vscode.DocumentSymbol): languages.DocumentSymbol {\n\t\tconst result: languages.DocumentSymbol = {\n\t\t\tname: info.name || '!!MISSING: name!!',\n\t\t\tdetail: info.detail,\n\t\t\trange: Range.from(info.range),\n\t\t\tselectionRange: Range.from(info.selectionRange),\n\t\t\tkind: SymbolKind.from(info.kind),\n\t\t\ttags: info.tags?.map(SymbolTag.from) ?? []\n\t\t};\n\t\tif (info.children) {\n\t\t\tresult.children = info.children.map(from);\n\t\t}\n\t\treturn result;\n\t}\n\texport function to(info: languages.DocumentSymbol): vscode.DocumentSymbol {\n\t\tconst result = new types.DocumentSymbol(\n\t\t\tinfo.name,\n\t\t\tinfo.detail,\n\t\t\tSymbolKind.to(info.kind),\n\t\t\tRange.to(info.range),\n\t\t\tRange.to(info.selectionRange),\n\t\t);\n\t\tif (isNonEmptyArray(info.tags)) {\n\t\t\tresult.tags = info.tags.map(SymbolTag.to);\n\t\t}\n\t\tif (info.children) {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tresult.children = info.children.map(to) as any;\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport namespace CallHierarchyItem {\n\n\texport function to(item: extHostProtocol.ICallHierarchyItemDto): types.CallHierarchyItem {\n\t\tconst result = new types.CallHierarchyItem(\n\t\t\tSymbolKind.to(item.kind),\n\t\t\titem.name,\n\t\t\titem.detail || '',\n\t\t\tURI.revive(item.uri),\n\t\t\tRange.to(item.range),\n\t\t\tRange.to(item.selectionRange)\n\t\t);\n\n\t\tresult._sessionId = item._sessionId;\n\t\tresult._itemId = item._itemId;\n\n\t\treturn result;\n\t}\n\n\texport function from(item: vscode.CallHierarchyItem, sessionId?: string, itemId?: string): extHostProtocol.ICallHierarchyItemDto {\n\n\t\tsessionId = sessionId ?? (<types.CallHierarchyItem>item)._sessionId;\n\t\titemId = itemId ?? (<types.CallHierarchyItem>item)._itemId;\n\n\t\tif (sessionId === undefined || itemId === undefined) {\n\t\t\tthrow new Error('invalid item');\n\t\t}\n\n\t\treturn {\n\t\t\t_sessionId: sessionId,\n\t\t\t_itemId: itemId,\n\t\t\tname: item.name,\n\t\t\tdetail: item.detail,\n\t\t\tkind: SymbolKind.from(item.kind),\n\t\t\turi: item.uri,\n\t\t\trange: Range.from(item.range),\n\t\t\tselectionRange: Range.from(item.selectionRange),\n\t\t\ttags: item.tags?.map(SymbolTag.from)\n\t\t};\n\t}\n}\n\nexport namespace CallHierarchyIncomingCall {\n\n\texport function to(item: extHostProtocol.IIncomingCallDto): types.CallHierarchyIncomingCall {\n\t\treturn new types.CallHierarchyIncomingCall(\n\t\t\tCallHierarchyItem.to(item.from),\n\t\t\titem.fromRanges.map(r => Range.to(r))\n\t\t);\n\t}\n}\n\nexport namespace CallHierarchyOutgoingCall {\n\n\texport function to(item: extHostProtocol.IOutgoingCallDto): types.CallHierarchyOutgoingCall {\n\t\treturn new types.CallHierarchyOutgoingCall(\n\t\t\tCallHierarchyItem.to(item.to),\n\t\t\titem.fromRanges.map(r => Range.to(r))\n\t\t);\n\t}\n}\n\n\nexport namespace location {\n\texport function from(value: vscode.Location): languages.Location {\n\t\treturn {\n\t\t\trange: value.range && Range.from(value.range),\n\t\t\turi: value.uri\n\t\t};\n\t}\n\n\texport function to(value: extHostProtocol.ILocationDto): types.Location {\n\t\treturn new types.Location(URI.revive(value.uri), Range.to(value.range));\n\t}\n}\n\nexport namespace DefinitionLink {\n\texport function from(value: vscode.Location | vscode.DefinitionLink): languages.LocationLink {\n\t\tconst definitionLink = <vscode.DefinitionLink>value;\n\t\tconst location = <vscode.Location>value;\n\t\treturn {\n\t\t\toriginSelectionRange: definitionLink.originSelectionRange\n\t\t\t\t? Range.from(definitionLink.originSelectionRange)\n\t\t\t\t: undefined,\n\t\t\turi: definitionLink.targetUri ? definitionLink.targetUri : location.uri,\n\t\t\trange: Range.from(definitionLink.targetRange ? definitionLink.targetRange : location.range),\n\t\t\ttargetSelectionRange: definitionLink.targetSelectionRange\n\t\t\t\t? Range.from(definitionLink.targetSelectionRange)\n\t\t\t\t: undefined,\n\t\t};\n\t}\n\texport function to(value: extHostProtocol.ILocationLinkDto): vscode.LocationLink {\n\t\treturn {\n\t\t\ttargetUri: URI.revive(value.uri),\n\t\t\ttargetRange: Range.to(value.range),\n\t\t\ttargetSelectionRange: value.targetSelectionRange\n\t\t\t\t? Range.to(value.targetSelectionRange)\n\t\t\t\t: undefined,\n\t\t\toriginSelectionRange: value.originSelectionRange\n\t\t\t\t? Range.to(value.originSelectionRange)\n\t\t\t\t: undefined\n\t\t};\n\t}\n}\n\nexport namespace Hover {\n\texport function from(hover: vscode.VerboseHover): languages.Hover {\n\t\tconst convertedHover: languages.Hover = {\n\t\t\trange: Range.from(hover.range),\n\t\t\tcontents: MarkdownString.fromMany(hover.contents),\n\t\t\tcanIncreaseVerbosity: hover.canIncreaseVerbosity,\n\t\t\tcanDecreaseVerbosity: hover.canDecreaseVerbosity,\n\t\t};\n\t\treturn convertedHover;\n\t}\n\n\texport function to(info: languages.Hover): types.VerboseHover {\n\t\tconst contents = info.contents.map(MarkdownString.to);\n\t\tconst range = Range.to(info.range);\n\t\tconst canIncreaseVerbosity = info.canIncreaseVerbosity;\n\t\tconst canDecreaseVerbosity = info.canDecreaseVerbosity;\n\t\treturn new types.VerboseHover(contents, range, canIncreaseVerbosity, canDecreaseVerbosity);\n\t}\n}\n\nexport namespace EvaluatableExpression {\n\texport function from(expression: vscode.EvaluatableExpression): languages.EvaluatableExpression {\n\t\treturn {\n\t\t\trange: Range.from(expression.range),\n\t\t\texpression: expression.expression\n\t\t};\n\t}\n\n\texport function to(info: languages.EvaluatableExpression): types.EvaluatableExpression {\n\t\treturn new types.EvaluatableExpression(Range.to(info.range), info.expression);\n\t}\n}\n\nexport namespace InlineValue {\n\texport function from(inlineValue: vscode.InlineValue): languages.InlineValue {\n\t\tif (inlineValue instanceof types.InlineValueText) {\n\t\t\treturn {\n\t\t\t\ttype: 'text',\n\t\t\t\trange: Range.from(inlineValue.range),\n\t\t\t\ttext: inlineValue.text\n\t\t\t} satisfies languages.InlineValueText;\n\t\t} else if (inlineValue instanceof types.InlineValueVariableLookup) {\n\t\t\treturn {\n\t\t\t\ttype: 'variable',\n\t\t\t\trange: Range.from(inlineValue.range),\n\t\t\t\tvariableName: inlineValue.variableName,\n\t\t\t\tcaseSensitiveLookup: inlineValue.caseSensitiveLookup\n\t\t\t} satisfies languages.InlineValueVariableLookup;\n\t\t} else if (inlineValue instanceof types.InlineValueEvaluatableExpression) {\n\t\t\treturn {\n\t\t\t\ttype: 'expression',\n\t\t\t\trange: Range.from(inlineValue.range),\n\t\t\t\texpression: inlineValue.expression\n\t\t\t} satisfies languages.InlineValueExpression;\n\t\t} else {\n\t\t\tthrow new Error(`Unknown 'InlineValue' type`);\n\t\t}\n\t}\n\n\texport function to(inlineValue: languages.InlineValue): vscode.InlineValue {\n\t\tswitch (inlineValue.type) {\n\t\t\tcase 'text':\n\t\t\t\treturn {\n\t\t\t\t\trange: Range.to(inlineValue.range),\n\t\t\t\t\ttext: inlineValue.text\n\t\t\t\t} satisfies vscode.InlineValueText;\n\t\t\tcase 'variable':\n\t\t\t\treturn {\n\t\t\t\t\trange: Range.to(inlineValue.range),\n\t\t\t\t\tvariableName: inlineValue.variableName,\n\t\t\t\t\tcaseSensitiveLookup: inlineValue.caseSensitiveLookup\n\t\t\t\t} satisfies vscode.InlineValueVariableLookup;\n\t\t\tcase 'expression':\n\t\t\t\treturn {\n\t\t\t\t\trange: Range.to(inlineValue.range),\n\t\t\t\t\texpression: inlineValue.expression\n\t\t\t\t} satisfies vscode.InlineValueEvaluatableExpression;\n\t\t}\n\t}\n}\n\nexport namespace InlineValueContext {\n\texport function from(inlineValueContext: vscode.InlineValueContext): extHostProtocol.IInlineValueContextDto {\n\t\treturn {\n\t\t\tframeId: inlineValueContext.frameId,\n\t\t\tstoppedLocation: Range.from(inlineValueContext.stoppedLocation)\n\t\t};\n\t}\n\n\texport function to(inlineValueContext: extHostProtocol.IInlineValueContextDto): types.InlineValueContext {\n\t\treturn new types.InlineValueContext(inlineValueContext.frameId, Range.to(inlineValueContext.stoppedLocation));\n\t}\n}\n\nexport namespace DocumentHighlight {\n\texport function from(documentHighlight: vscode.DocumentHighlight): languages.DocumentHighlight {\n\t\treturn {\n\t\t\trange: Range.from(documentHighlight.range),\n\t\t\tkind: documentHighlight.kind\n\t\t};\n\t}\n\texport function to(occurrence: languages.DocumentHighlight): types.DocumentHighlight {\n\t\treturn new types.DocumentHighlight(Range.to(occurrence.range), occurrence.kind);\n\t}\n}\n\nexport namespace MultiDocumentHighlight {\n\texport function from(multiDocumentHighlight: vscode.MultiDocumentHighlight): languages.MultiDocumentHighlight {\n\t\treturn {\n\t\t\turi: multiDocumentHighlight.uri,\n\t\t\thighlights: multiDocumentHighlight.highlights.map(DocumentHighlight.from)\n\t\t};\n\t}\n\n\texport function to(multiDocumentHighlight: languages.MultiDocumentHighlight): types.MultiDocumentHighlight {\n\t\treturn new types.MultiDocumentHighlight(URI.revive(multiDocumentHighlight.uri), multiDocumentHighlight.highlights.map(DocumentHighlight.to));\n\t}\n}\n\nexport namespace CompletionTriggerKind {\n\texport function to(kind: languages.CompletionTriggerKind) {\n\t\tswitch (kind) {\n\t\t\tcase languages.CompletionTriggerKind.TriggerCharacter:\n\t\t\t\treturn types.CompletionTriggerKind.TriggerCharacter;\n\t\t\tcase languages.CompletionTriggerKind.TriggerForIncompleteCompletions:\n\t\t\t\treturn types.CompletionTriggerKind.TriggerForIncompleteCompletions;\n\t\t\tcase languages.CompletionTriggerKind.Invoke:\n\t\t\tdefault:\n\t\t\t\treturn types.CompletionTriggerKind.Invoke;\n\t\t}\n\t}\n}\n\nexport namespace CompletionContext {\n\texport function to(context: languages.CompletionContext): types.CompletionContext {\n\t\treturn {\n\t\t\ttriggerKind: CompletionTriggerKind.to(context.triggerKind),\n\t\t\ttriggerCharacter: context.triggerCharacter\n\t\t};\n\t}\n}\n\nexport namespace CompletionItemTag {\n\n\texport function from(kind: types.CompletionItemTag): languages.CompletionItemTag {\n\t\tswitch (kind) {\n\t\t\tcase types.CompletionItemTag.Deprecated: return languages.CompletionItemTag.Deprecated;\n\t\t}\n\t}\n\n\texport function to(kind: languages.CompletionItemTag): types.CompletionItemTag {\n\t\tswitch (kind) {\n\t\t\tcase languages.CompletionItemTag.Deprecated: return types.CompletionItemTag.Deprecated;\n\t\t}\n\t}\n}\n\nexport namespace CompletionCommand {\n\texport function from(c: vscode.Command | { command: vscode.Command; icon: vscode.ThemeIcon }, converter: CommandsConverter, disposables: DisposableStore): { command: extHostProtocol.ICommandDto; icon?: languages.IconPath } {\n\t\tif ('icon' in c && 'command' in c) {\n\t\t\treturn {\n\t\t\t\tcommand: converter.toInternal(c.command, disposables),\n\t\t\t\ticon: IconPath.fromThemeIcon(c.icon)\n\t\t\t};\n\t\t}\n\t\treturn { command: converter.toInternal(c, disposables) };\n\t}\n}\n\nexport namespace CompletionItemKind {\n\n\tconst _from = new Map<types.CompletionItemKind, languages.CompletionItemKind>([\n\t\t[types.CompletionItemKind.Method, languages.CompletionItemKind.Method],\n\t\t[types.CompletionItemKind.Function, languages.CompletionItemKind.Function],\n\t\t[types.CompletionItemKind.Constructor, languages.CompletionItemKind.Constructor],\n\t\t[types.CompletionItemKind.Field, languages.CompletionItemKind.Field],\n\t\t[types.CompletionItemKind.Variable, languages.CompletionItemKind.Variable],\n\t\t[types.CompletionItemKind.Class, languages.CompletionItemKind.Class],\n\t\t[types.CompletionItemKind.Interface, languages.CompletionItemKind.Interface],\n\t\t[types.CompletionItemKind.Struct, languages.CompletionItemKind.Struct],\n\t\t[types.CompletionItemKind.Module, languages.CompletionItemKind.Module],\n\t\t[types.CompletionItemKind.Property, languages.CompletionItemKind.Property],\n\t\t[types.CompletionItemKind.Unit, languages.CompletionItemKind.Unit],\n\t\t[types.CompletionItemKind.Value, languages.CompletionItemKind.Value],\n\t\t[types.CompletionItemKind.Constant, languages.CompletionItemKind.Constant],\n\t\t[types.CompletionItemKind.Enum, languages.CompletionItemKind.Enum],\n\t\t[types.CompletionItemKind.EnumMember, languages.CompletionItemKind.EnumMember],\n\t\t[types.CompletionItemKind.Keyword, languages.CompletionItemKind.Keyword],\n\t\t[types.CompletionItemKind.Snippet, languages.CompletionItemKind.Snippet],\n\t\t[types.CompletionItemKind.Text, languages.CompletionItemKind.Text],\n\t\t[types.CompletionItemKind.Color, languages.CompletionItemKind.Color],\n\t\t[types.CompletionItemKind.File, languages.CompletionItemKind.File],\n\t\t[types.CompletionItemKind.Reference, languages.CompletionItemKind.Reference],\n\t\t[types.CompletionItemKind.Folder, languages.CompletionItemKind.Folder],\n\t\t[types.CompletionItemKind.Event, languages.CompletionItemKind.Event],\n\t\t[types.CompletionItemKind.Operator, languages.CompletionItemKind.Operator],\n\t\t[types.CompletionItemKind.TypeParameter, languages.CompletionItemKind.TypeParameter],\n\t\t[types.CompletionItemKind.Issue, languages.CompletionItemKind.Issue],\n\t\t[types.CompletionItemKind.User, languages.CompletionItemKind.User],\n\t]);\n\n\texport function from(kind: types.CompletionItemKind): languages.CompletionItemKind {\n\t\treturn _from.get(kind) ?? languages.CompletionItemKind.Property;\n\t}\n\n\tconst _to = new Map<languages.CompletionItemKind, types.CompletionItemKind>([\n\t\t[languages.CompletionItemKind.Method, types.CompletionItemKind.Method],\n\t\t[languages.CompletionItemKind.Function, types.CompletionItemKind.Function],\n\t\t[languages.CompletionItemKind.Constructor, types.CompletionItemKind.Constructor],\n\t\t[languages.CompletionItemKind.Field, types.CompletionItemKind.Field],\n\t\t[languages.CompletionItemKind.Variable, types.CompletionItemKind.Variable],\n\t\t[languages.CompletionItemKind.Class, types.CompletionItemKind.Class],\n\t\t[languages.CompletionItemKind.Interface, types.CompletionItemKind.Interface],\n\t\t[languages.CompletionItemKind.Struct, types.CompletionItemKind.Struct],\n\t\t[languages.CompletionItemKind.Module, types.CompletionItemKind.Module],\n\t\t[languages.CompletionItemKind.Property, types.CompletionItemKind.Property],\n\t\t[languages.CompletionItemKind.Unit, types.CompletionItemKind.Unit],\n\t\t[languages.CompletionItemKind.Value, types.CompletionItemKind.Value],\n\t\t[languages.CompletionItemKind.Constant, types.CompletionItemKind.Constant],\n\t\t[languages.CompletionItemKind.Enum, types.CompletionItemKind.Enum],\n\t\t[languages.CompletionItemKind.EnumMember, types.CompletionItemKind.EnumMember],\n\t\t[languages.CompletionItemKind.Keyword, types.CompletionItemKind.Keyword],\n\t\t[languages.CompletionItemKind.Snippet, types.CompletionItemKind.Snippet],\n\t\t[languages.CompletionItemKind.Text, types.CompletionItemKind.Text],\n\t\t[languages.CompletionItemKind.Color, types.CompletionItemKind.Color],\n\t\t[languages.CompletionItemKind.File, types.CompletionItemKind.File],\n\t\t[languages.CompletionItemKind.Reference, types.CompletionItemKind.Reference],\n\t\t[languages.CompletionItemKind.Folder, types.CompletionItemKind.Folder],\n\t\t[languages.CompletionItemKind.Event, types.CompletionItemKind.Event],\n\t\t[languages.CompletionItemKind.Operator, types.CompletionItemKind.Operator],\n\t\t[languages.CompletionItemKind.TypeParameter, types.CompletionItemKind.TypeParameter],\n\t\t[languages.CompletionItemKind.User, types.CompletionItemKind.User],\n\t\t[languages.CompletionItemKind.Issue, types.CompletionItemKind.Issue],\n\t]);\n\n\texport function to(kind: languages.CompletionItemKind): types.CompletionItemKind {\n\t\treturn _to.get(kind) ?? types.CompletionItemKind.Property;\n\t}\n}\n\nexport namespace CompletionItem {\n\n\texport function to(suggestion: languages.CompletionItem, converter?: Command.ICommandsConverter): types.CompletionItem {\n\n\t\tconst result = new types.CompletionItem(suggestion.label);\n\t\tresult.insertText = suggestion.insertText;\n\t\tresult.kind = CompletionItemKind.to(suggestion.kind);\n\t\tresult.tags = suggestion.tags?.map(CompletionItemTag.to);\n\t\tresult.detail = suggestion.detail;\n\t\tresult.documentation = htmlContent.isMarkdownString(suggestion.documentation) ? MarkdownString.to(suggestion.documentation) : suggestion.documentation;\n\t\tresult.sortText = suggestion.sortText;\n\t\tresult.filterText = suggestion.filterText;\n\t\tresult.preselect = suggestion.preselect;\n\t\tresult.commitCharacters = suggestion.commitCharacters;\n\n\t\t// range\n\t\tif (editorRange.Range.isIRange(suggestion.range)) {\n\t\t\tresult.range = Range.to(suggestion.range);\n\t\t} else if (typeof suggestion.range === 'object') {\n\t\t\tresult.range = { inserting: Range.to(suggestion.range.insert), replacing: Range.to(suggestion.range.replace) };\n\t\t}\n\n\t\tresult.keepWhitespace = typeof suggestion.insertTextRules === 'undefined' ? false : Boolean(suggestion.insertTextRules & languages.CompletionItemInsertTextRule.KeepWhitespace);\n\t\t// 'insertText'-logic\n\t\tif (typeof suggestion.insertTextRules !== 'undefined' && suggestion.insertTextRules & languages.CompletionItemInsertTextRule.InsertAsSnippet) {\n\t\t\tresult.insertText = new types.SnippetString(suggestion.insertText);\n\t\t} else {\n\t\t\tresult.insertText = suggestion.insertText;\n\t\t\tresult.textEdit = result.range instanceof types.Range ? new types.TextEdit(result.range, result.insertText) : undefined;\n\t\t}\n\t\tif (suggestion.additionalTextEdits && suggestion.additionalTextEdits.length > 0) {\n\t\t\tresult.additionalTextEdits = suggestion.additionalTextEdits.map(e => TextEdit.to(e as languages.TextEdit));\n\t\t}\n\t\tresult.command = converter && suggestion.command ? converter.fromInternal(suggestion.command) : undefined;\n\n\t\treturn result;\n\t}\n}\n\nexport namespace ParameterInformation {\n\texport function from(info: types.ParameterInformation): languages.ParameterInformation {\n\t\tif (typeof info.label !== 'string' && !Array.isArray(info.label)) {\n\t\t\tthrow new TypeError('Invalid label');\n\t\t}\n\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: MarkdownString.fromStrict(info.documentation)\n\t\t};\n\t}\n\texport function to(info: languages.ParameterInformation): types.ParameterInformation {\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: htmlContent.isMarkdownString(info.documentation) ? MarkdownString.to(info.documentation) : info.documentation\n\t\t};\n\t}\n}\n\nexport namespace SignatureInformation {\n\n\texport function from(info: types.SignatureInformation): languages.SignatureInformation {\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: MarkdownString.fromStrict(info.documentation),\n\t\t\tparameters: Array.isArray(info.parameters) ? info.parameters.map(ParameterInformation.from) : [],\n\t\t\tactiveParameter: info.activeParameter,\n\t\t};\n\t}\n\n\texport function to(info: languages.SignatureInformation): types.SignatureInformation {\n\t\treturn {\n\t\t\tlabel: info.label,\n\t\t\tdocumentation: htmlContent.isMarkdownString(info.documentation) ? MarkdownString.to(info.documentation) : info.documentation,\n\t\t\tparameters: Array.isArray(info.parameters) ? info.parameters.map(ParameterInformation.to) : [],\n\t\t\tactiveParameter: info.activeParameter,\n\t\t};\n\t}\n}\n\nexport namespace SignatureHelp {\n\n\texport function from(help: types.SignatureHelp): languages.SignatureHelp {\n\t\treturn {\n\t\t\tactiveSignature: help.activeSignature,\n\t\t\tactiveParameter: help.activeParameter,\n\t\t\tsignatures: Array.isArray(help.signatures) ? help.signatures.map(SignatureInformation.from) : [],\n\t\t};\n\t}\n\n\texport function to(help: languages.SignatureHelp): types.SignatureHelp {\n\t\treturn {\n\t\t\tactiveSignature: help.activeSignature,\n\t\t\tactiveParameter: help.activeParameter,\n\t\t\tsignatures: Array.isArray(help.signatures) ? help.signatures.map(SignatureInformation.to) : [],\n\t\t};\n\t}\n}\n\nexport namespace InlayHint {\n\n\texport function to(converter: Command.ICommandsConverter, hint: languages.InlayHint): vscode.InlayHint {\n\t\tconst res = new types.InlayHint(\n\t\t\tPosition.to(hint.position),\n\t\t\ttypeof hint.label === 'string' ? hint.label : hint.label.map(InlayHintLabelPart.to.bind(undefined, converter)),\n\t\t\thint.kind && InlayHintKind.to(hint.kind)\n\t\t);\n\t\tres.textEdits = hint.textEdits && hint.textEdits.map(TextEdit.to);\n\t\tres.tooltip = htmlContent.isMarkdownString(hint.tooltip) ? MarkdownString.to(hint.tooltip) : hint.tooltip;\n\t\tres.paddingLeft = hint.paddingLeft;\n\t\tres.paddingRight = hint.paddingRight;\n\t\treturn res;\n\t}\n}\n\nexport namespace InlayHintLabelPart {\n\n\texport function to(converter: Command.ICommandsConverter, part: languages.InlayHintLabelPart): types.InlayHintLabelPart {\n\t\tconst result = new types.InlayHintLabelPart(part.label);\n\t\tresult.tooltip = htmlContent.isMarkdownString(part.tooltip)\n\t\t\t? MarkdownString.to(part.tooltip)\n\t\t\t: part.tooltip;\n\t\tif (languages.Command.is(part.command)) {\n\t\t\tresult.command = converter.fromInternal(part.command);\n\t\t}\n\t\tif (part.location) {\n\t\t\tresult.location = location.to(part.location);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport namespace InlayHintKind {\n\texport function from(kind: vscode.InlayHintKind): languages.InlayHintKind {\n\t\treturn kind;\n\t}\n\texport function to(kind: languages.InlayHintKind): vscode.InlayHintKind {\n\t\treturn kind;\n\t}\n}\n\nexport namespace DocumentLink {\n\n\texport function from(link: vscode.DocumentLink): languages.ILink {\n\t\treturn {\n\t\t\trange: Range.from(link.range),\n\t\t\turl: link.target,\n\t\t\ttooltip: link.tooltip\n\t\t};\n\t}\n\n\texport function to(link: languages.ILink): vscode.DocumentLink {\n\t\tlet target: URI | undefined = undefined;\n\t\tif (link.url) {\n\t\t\ttry {\n\t\t\t\ttarget = typeof link.url === 'string' ? URI.parse(link.url, true) : URI.revive(link.url);\n\t\t\t} catch (err) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t}\n\t\tconst result = new types.DocumentLink(Range.to(link.range), target);\n\t\tresult.tooltip = link.tooltip;\n\t\treturn result;\n\t}\n}\n\nexport namespace ColorPresentation {\n\texport function to(colorPresentation: languages.IColorPresentation): types.ColorPresentation {\n\t\tconst cp = new types.ColorPresentation(colorPresentation.label);\n\t\tif (colorPresentation.textEdit) {\n\t\t\tcp.textEdit = TextEdit.to(colorPresentation.textEdit);\n\t\t}\n\t\tif (colorPresentation.additionalTextEdits) {\n\t\t\tcp.additionalTextEdits = colorPresentation.additionalTextEdits.map(value => TextEdit.to(value));\n\t\t}\n\t\treturn cp;\n\t}\n\n\texport function from(colorPresentation: vscode.ColorPresentation): languages.IColorPresentation {\n\t\treturn {\n\t\t\tlabel: colorPresentation.label,\n\t\t\ttextEdit: colorPresentation.textEdit ? TextEdit.from(colorPresentation.textEdit) : undefined,\n\t\t\tadditionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => TextEdit.from(value)) : undefined\n\t\t};\n\t}\n}\n\nexport namespace Color {\n\texport function to(c: [number, number, number, number]): types.Color {\n\t\treturn new types.Color(c[0], c[1], c[2], c[3]);\n\t}\n\texport function from(color: types.Color): [number, number, number, number] {\n\t\treturn [color.red, color.green, color.blue, color.alpha];\n\t}\n}\n\n\nexport namespace SelectionRange {\n\texport function from(obj: vscode.SelectionRange): languages.SelectionRange {\n\t\treturn { range: Range.from(obj.range) };\n\t}\n\n\texport function to(obj: languages.SelectionRange): vscode.SelectionRange {\n\t\treturn new types.SelectionRange(Range.to(obj.range));\n\t}\n}\n\nexport namespace TextDocumentSaveReason {\n\n\texport function to(reason: SaveReason): vscode.TextDocumentSaveReason {\n\t\tswitch (reason) {\n\t\t\tcase SaveReason.AUTO:\n\t\t\t\treturn types.TextDocumentSaveReason.AfterDelay;\n\t\t\tcase SaveReason.EXPLICIT:\n\t\t\t\treturn types.TextDocumentSaveReason.Manual;\n\t\t\tcase SaveReason.FOCUS_CHANGE:\n\t\t\tcase SaveReason.WINDOW_CHANGE:\n\t\t\t\treturn types.TextDocumentSaveReason.FocusOut;\n\t\t}\n\t}\n}\n\nexport namespace TextEditorLineNumbersStyle {\n\texport function from(style: vscode.TextEditorLineNumbersStyle): RenderLineNumbersType {\n\t\tswitch (style) {\n\t\t\tcase types.TextEditorLineNumbersStyle.Off:\n\t\t\t\treturn RenderLineNumbersType.Off;\n\t\t\tcase types.TextEditorLineNumbersStyle.Relative:\n\t\t\t\treturn RenderLineNumbersType.Relative;\n\t\t\tcase types.TextEditorLineNumbersStyle.Interval:\n\t\t\t\treturn RenderLineNumbersType.Interval;\n\t\t\tcase types.TextEditorLineNumbersStyle.On:\n\t\t\tdefault:\n\t\t\t\treturn RenderLineNumbersType.On;\n\t\t}\n\t}\n\texport function to(style: RenderLineNumbersType): vscode.TextEditorLineNumbersStyle {\n\t\tswitch (style) {\n\t\t\tcase RenderLineNumbersType.Off:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.Off;\n\t\t\tcase RenderLineNumbersType.Relative:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.Relative;\n\t\t\tcase RenderLineNumbersType.Interval:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.Interval;\n\t\t\tcase RenderLineNumbersType.On:\n\t\t\tdefault:\n\t\t\t\treturn types.TextEditorLineNumbersStyle.On;\n\t\t}\n\t}\n}\n\nexport namespace EndOfLine {\n\n\texport function from(eol: vscode.EndOfLine): EndOfLineSequence | undefined {\n\t\tif (eol === types.EndOfLine.CRLF) {\n\t\t\treturn EndOfLineSequence.CRLF;\n\t\t} else if (eol === types.EndOfLine.LF) {\n\t\t\treturn EndOfLineSequence.LF;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\texport function to(eol: EndOfLineSequence): vscode.EndOfLine | undefined {\n\t\tif (eol === EndOfLineSequence.CRLF) {\n\t\t\treturn types.EndOfLine.CRLF;\n\t\t} else if (eol === EndOfLineSequence.LF) {\n\t\t\treturn types.EndOfLine.LF;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport namespace ProgressLocation {\n\texport function from(loc: vscode.ProgressLocation | { viewId: string }): MainProgressLocation | string {\n\t\tif (typeof loc === 'object') {\n\t\t\treturn loc.viewId;\n\t\t}\n\n\t\tswitch (loc) {\n\t\t\tcase types.ProgressLocation.SourceControl: return MainProgressLocation.Scm;\n\t\t\tcase types.ProgressLocation.Window: return MainProgressLocation.Window;\n\t\t\tcase types.ProgressLocation.Notification: return MainProgressLocation.Notification;\n\t\t}\n\t\tthrow new Error(`Unknown 'ProgressLocation'`);\n\t}\n}\n\nexport namespace FoldingRange {\n\texport function from(r: vscode.FoldingRange): languages.FoldingRange {\n\t\tconst range: languages.FoldingRange = { start: r.start + 1, end: r.end + 1 };\n\t\tif (r.kind) {\n\t\t\trange.kind = FoldingRangeKind.from(r.kind);\n\t\t}\n\t\treturn range;\n\t}\n\texport function to(r: languages.FoldingRange): vscode.FoldingRange {\n\t\tconst range: vscode.FoldingRange = { start: r.start - 1, end: r.end - 1 };\n\t\tif (r.kind) {\n\t\t\trange.kind = FoldingRangeKind.to(r.kind);\n\t\t}\n\t\treturn range;\n\t}\n}\n\nexport namespace FoldingRangeKind {\n\texport function from(kind: vscode.FoldingRangeKind | undefined): languages.FoldingRangeKind | undefined {\n\t\tif (kind) {\n\t\t\tswitch (kind) {\n\t\t\t\tcase types.FoldingRangeKind.Comment:\n\t\t\t\t\treturn languages.FoldingRangeKind.Comment;\n\t\t\t\tcase types.FoldingRangeKind.Imports:\n\t\t\t\t\treturn languages.FoldingRangeKind.Imports;\n\t\t\t\tcase types.FoldingRangeKind.Region:\n\t\t\t\t\treturn languages.FoldingRangeKind.Region;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\texport function to(kind: languages.FoldingRangeKind | undefined): vscode.FoldingRangeKind | undefined {\n\t\tif (kind) {\n\t\t\tswitch (kind.value) {\n\t\t\t\tcase languages.FoldingRangeKind.Comment.value:\n\t\t\t\t\treturn types.FoldingRangeKind.Comment;\n\t\t\t\tcase languages.FoldingRangeKind.Imports.value:\n\t\t\t\t\treturn types.FoldingRangeKind.Imports;\n\t\t\t\tcase languages.FoldingRangeKind.Region.value:\n\t\t\t\t\treturn types.FoldingRangeKind.Region;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport interface TextEditorOpenOptions extends vscode.TextDocumentShowOptions {\n\tbackground?: boolean;\n\toverride?: boolean;\n}\n\nexport namespace TextEditorOpenOptions {\n\n\texport function from(options?: TextEditorOpenOptions): ITextEditorOptions | undefined {\n\t\tif (options) {\n\t\t\treturn {\n\t\t\t\tpinned: typeof options.preview === 'boolean' ? !options.preview : undefined,\n\t\t\t\tinactive: options.background,\n\t\t\t\tpreserveFocus: options.preserveFocus,\n\t\t\t\tselection: typeof options.selection === 'object' ? Range.from(options.selection) : undefined,\n\t\t\t\toverride: typeof options.override === 'boolean' ? DEFAULT_EDITOR_ASSOCIATION.id : undefined\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n}\n\nexport namespace GlobPattern {\n\n\texport function from(pattern: vscode.GlobPattern): string | extHostProtocol.IRelativePatternDto;\n\texport function from(pattern: undefined): undefined;\n\texport function from(pattern: null): null;\n\texport function from(pattern: vscode.GlobPattern | undefined | null): string | extHostProtocol.IRelativePatternDto | undefined | null;\n\texport function from(pattern: vscode.GlobPattern | undefined | null): string | extHostProtocol.IRelativePatternDto | undefined | null {\n\t\tif (pattern instanceof types.RelativePattern) {\n\t\t\treturn pattern.toJSON();\n\t\t}\n\n\t\tif (typeof pattern === 'string') {\n\t\t\treturn pattern;\n\t\t}\n\n\t\t// This is slightly bogus because we declare this method to accept\n\t\t// `vscode.GlobPattern` which can be `vscode.RelativePattern` class,\n\t\t// but given we cannot enforce classes from our vscode.d.ts, we have\n\t\t// to probe for objects too\n\t\t// Refs: https://github.com/microsoft/vscode/issues/140771\n\t\tif (isRelativePatternShape(pattern) || isLegacyRelativePatternShape(pattern)) {\n\t\t\treturn new types.RelativePattern(pattern.baseUri ?? pattern.base, pattern.pattern).toJSON();\n\t\t}\n\n\t\treturn pattern; // preserve `undefined` and `null`\n\t}\n\n\tfunction isRelativePatternShape(obj: unknown): obj is { base: string; baseUri: URI; pattern: string } {\n\t\tconst rp = obj as { base: string; baseUri: URI; pattern: string } | undefined | null;\n\t\tif (!rp) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn URI.isUri(rp.baseUri) && typeof rp.pattern === 'string';\n\t}\n\n\tfunction isLegacyRelativePatternShape(obj: unknown): obj is { base: string; pattern: string } {\n\n\t\t// Before 1.64.x, `RelativePattern` did not have any `baseUri: Uri`\n\t\t// property. To preserve backwards compatibility with older extensions\n\t\t// we allow this old format when creating the `vscode.RelativePattern`.\n\n\t\tconst rp = obj as { base: string; pattern: string } | undefined | null;\n\t\tif (!rp) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn typeof rp.base === 'string' && typeof rp.pattern === 'string';\n\t}\n\n\texport function to(pattern: string | extHostProtocol.IRelativePatternDto): vscode.GlobPattern {\n\t\tif (typeof pattern === 'string') {\n\t\t\treturn pattern;\n\t\t}\n\n\t\treturn new types.RelativePattern(URI.revive(pattern.baseUri), pattern.pattern);\n\t}\n}\n\nexport namespace LanguageSelector {\n\n\texport function from(selector: undefined): undefined;\n\texport function from(selector: vscode.DocumentSelector): languageSelector.LanguageSelector;\n\texport function from(selector: vscode.DocumentSelector | undefined): languageSelector.LanguageSelector | undefined;\n\texport function from(selector: vscode.DocumentSelector | undefined): languageSelector.LanguageSelector | undefined {\n\t\tif (!selector) {\n\t\t\treturn undefined;\n\t\t} else if (Array.isArray(selector)) {\n\t\t\treturn <languageSelector.LanguageSelector>selector.map(from);\n\t\t} else if (typeof selector === 'string') {\n\t\t\treturn selector;\n\t\t} else {\n\t\t\tconst filter = selector as vscode.DocumentFilter; // TODO: microsoft/TypeScript#42768\n\t\t\treturn {\n\t\t\t\tlanguage: filter.language,\n\t\t\t\tscheme: filter.scheme,\n\t\t\t\tpattern: GlobPattern.from(filter.pattern) ?? undefined,\n\t\t\t\texclusive: filter.exclusive,\n\t\t\t\tnotebookType: filter.notebookType\n\t\t\t};\n\t\t}\n\t}\n}\n\nexport namespace NotebookRange {\n\n\texport function from(range: vscode.NotebookRange): ICellRange {\n\t\treturn { start: range.start, end: range.end };\n\t}\n\n\texport function to(range: ICellRange): types.NotebookRange {\n\t\treturn new types.NotebookRange(range.start, range.end);\n\t}\n}\n\nexport namespace NotebookCellExecutionSummary {\n\texport function to(data: notebooks.NotebookCellInternalMetadata): vscode.NotebookCellExecutionSummary {\n\t\treturn {\n\t\t\ttiming: typeof data.runStartTime === 'number' && typeof data.runEndTime === 'number' ? { startTime: data.runStartTime, endTime: data.runEndTime } : undefined,\n\t\t\texecutionOrder: data.executionOrder,\n\t\t\tsuccess: data.lastRunSuccess\n\t\t};\n\t}\n\n\texport function from(data: vscode.NotebookCellExecutionSummary): Partial<notebooks.NotebookCellInternalMetadata> {\n\t\treturn {\n\t\t\tlastRunSuccess: data.success,\n\t\t\trunStartTime: data.timing?.startTime,\n\t\t\trunEndTime: data.timing?.endTime,\n\t\t\texecutionOrder: data.executionOrder\n\t\t};\n\t}\n}\n\nexport namespace NotebookCellKind {\n\texport function from(data: vscode.NotebookCellKind): notebooks.CellKind {\n\t\tswitch (data) {\n\t\t\tcase types.NotebookCellKind.Markup:\n\t\t\t\treturn notebooks.CellKind.Markup;\n\t\t\tcase types.NotebookCellKind.Code:\n\t\t\tdefault:\n\t\t\t\treturn notebooks.CellKind.Code;\n\t\t}\n\t}\n\n\texport function to(data: notebooks.CellKind): vscode.NotebookCellKind {\n\t\tswitch (data) {\n\t\t\tcase notebooks.CellKind.Markup:\n\t\t\t\treturn types.NotebookCellKind.Markup;\n\t\t\tcase notebooks.CellKind.Code:\n\t\t\tdefault:\n\t\t\t\treturn types.NotebookCellKind.Code;\n\t\t}\n\t}\n}\n\nexport namespace NotebookData {\n\n\texport function from(data: vscode.NotebookData): extHostProtocol.NotebookDataDto {\n\t\tconst res: extHostProtocol.NotebookDataDto = {\n\t\t\tmetadata: data.metadata ?? Object.create(null),\n\t\t\tcells: [],\n\t\t};\n\t\tfor (const cell of data.cells) {\n\t\t\ttypes.NotebookCellData.validate(cell);\n\t\t\tres.cells.push(NotebookCellData.from(cell));\n\t\t}\n\t\treturn res;\n\t}\n\n\texport function to(data: extHostProtocol.NotebookDataDto): vscode.NotebookData {\n\t\tconst res = new types.NotebookData(\n\t\t\tdata.cells.map(NotebookCellData.to),\n\t\t);\n\t\tif (!isEmptyObject(data.metadata)) {\n\t\t\tres.metadata = data.metadata;\n\t\t}\n\t\treturn res;\n\t}\n}\n\nexport namespace NotebookCellData {\n\n\texport function from(data: vscode.NotebookCellData): extHostProtocol.NotebookCellDataDto {\n\t\treturn {\n\t\t\tcellKind: NotebookCellKind.from(data.kind),\n\t\t\tlanguage: data.languageId,\n\t\t\tmime: data.mime,\n\t\t\tsource: data.value,\n\t\t\tmetadata: data.metadata,\n\t\t\tinternalMetadata: NotebookCellExecutionSummary.from(data.executionSummary ?? {}),\n\t\t\toutputs: data.outputs ? data.outputs.map(NotebookCellOutput.from) : []\n\t\t};\n\t}\n\n\texport function to(data: extHostProtocol.NotebookCellDataDto): vscode.NotebookCellData {\n\t\treturn new types.NotebookCellData(\n\t\t\tNotebookCellKind.to(data.cellKind),\n\t\t\tdata.source,\n\t\t\tdata.language,\n\t\t\tdata.mime,\n\t\t\tdata.outputs ? data.outputs.map(NotebookCellOutput.to) : undefined,\n\t\t\tdata.metadata,\n\t\t\tdata.internalMetadata ? NotebookCellExecutionSummary.to(data.internalMetadata) : undefined\n\t\t);\n\t}\n}\n\nexport namespace NotebookCellOutputItem {\n\texport function from(item: types.NotebookCellOutputItem): extHostProtocol.NotebookOutputItemDto {\n\t\treturn {\n\t\t\tmime: item.mime,\n\t\t\tvalueBytes: VSBuffer.wrap(item.data),\n\t\t};\n\t}\n\n\texport function to(item: extHostProtocol.NotebookOutputItemDto): types.NotebookCellOutputItem {\n\t\treturn new types.NotebookCellOutputItem(item.valueBytes.buffer, item.mime);\n\t}\n}\n\nexport namespace NotebookCellOutput {\n\texport function from(output: vscode.NotebookCellOutput): extHostProtocol.NotebookOutputDto {\n\t\treturn {\n\t\t\toutputId: output.id,\n\t\t\titems: output.items.map(NotebookCellOutputItem.from),\n\t\t\tmetadata: output.metadata\n\t\t};\n\t}\n\n\texport function to(output: extHostProtocol.NotebookOutputDto): vscode.NotebookCellOutput {\n\t\tconst items = output.items.map(NotebookCellOutputItem.to);\n\t\treturn new types.NotebookCellOutput(items, output.outputId, output.metadata);\n\t}\n}\n\n\nexport namespace NotebookExclusiveDocumentPattern {\n\texport function from(pattern: { include: vscode.GlobPattern | undefined; exclude: vscode.GlobPattern | undefined }): { include: string | extHostProtocol.IRelativePatternDto | undefined; exclude: string | extHostProtocol.IRelativePatternDto | undefined };\n\texport function from(pattern: vscode.GlobPattern): string | extHostProtocol.IRelativePatternDto;\n\texport function from(pattern: undefined): undefined;\n\texport function from(pattern: { include: vscode.GlobPattern | undefined | null; exclude: vscode.GlobPattern | undefined } | vscode.GlobPattern | undefined): string | extHostProtocol.IRelativePatternDto | { include: string | extHostProtocol.IRelativePatternDto | undefined; exclude: string | extHostProtocol.IRelativePatternDto | undefined } | undefined;\n\texport function from(pattern: { include: vscode.GlobPattern | undefined | null; exclude: vscode.GlobPattern | undefined } | vscode.GlobPattern | undefined): string | extHostProtocol.IRelativePatternDto | { include: string | extHostProtocol.IRelativePatternDto | undefined; exclude: string | extHostProtocol.IRelativePatternDto | undefined } | undefined {\n\t\tif (isExclusivePattern(pattern)) {\n\t\t\treturn {\n\t\t\t\tinclude: GlobPattern.from(pattern.include) ?? undefined,\n\t\t\t\texclude: GlobPattern.from(pattern.exclude) ?? undefined,\n\t\t\t};\n\t\t}\n\n\t\treturn GlobPattern.from(pattern) ?? undefined;\n\t}\n\n\texport function to(pattern: string | extHostProtocol.IRelativePatternDto | { include: string | extHostProtocol.IRelativePatternDto; exclude: string | extHostProtocol.IRelativePatternDto }): { include: vscode.GlobPattern; exclude: vscode.GlobPattern } | vscode.GlobPattern {\n\t\tif (isExclusivePattern(pattern)) {\n\t\t\treturn {\n\t\t\t\tinclude: GlobPattern.to(pattern.include),\n\t\t\t\texclude: GlobPattern.to(pattern.exclude)\n\t\t\t};\n\t\t}\n\n\t\treturn GlobPattern.to(pattern);\n\t}\n\n\tfunction isExclusivePattern<T>(obj: any): obj is { include?: T; exclude?: T } {\n\t\tconst ep = obj as { include?: T; exclude?: T } | undefined | null;\n\t\tif (!ep) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !isUndefinedOrNull(ep.include) && !isUndefinedOrNull(ep.exclude);\n\t}\n}\n\nexport namespace NotebookStatusBarItem {\n\texport function from(item: vscode.NotebookCellStatusBarItem, commandsConverter: Command.ICommandsConverter, disposables: DisposableStore): notebooks.INotebookCellStatusBarItem {\n\t\tconst command = typeof item.command === 'string' ? { title: '', command: item.command } : item.command;\n\t\treturn {\n\t\t\talignment: item.alignment === types.NotebookCellStatusBarAlignment.Left ? notebooks.CellStatusbarAlignment.Left : notebooks.CellStatusbarAlignment.Right,\n\t\t\tcommand: commandsConverter.toInternal(command, disposables), // TODO@roblou\n\t\t\ttext: item.text,\n\t\t\ttooltip: item.tooltip,\n\t\t\taccessibilityInformation: item.accessibilityInformation,\n\t\t\tpriority: item.priority\n\t\t};\n\t}\n}\n\nexport namespace NotebookKernelSourceAction {\n\texport function from(item: vscode.NotebookKernelSourceAction, commandsConverter: Command.ICommandsConverter, disposables: DisposableStore): notebooks.INotebookKernelSourceAction {\n\t\tconst command = typeof item.command === 'string' ? { title: '', command: item.command } : item.command;\n\n\t\treturn {\n\t\t\tcommand: commandsConverter.toInternal(command, disposables),\n\t\t\tlabel: item.label,\n\t\t\tdescription: item.description,\n\t\t\tdetail: item.detail,\n\t\t\tdocumentation: item.documentation\n\t\t};\n\t}\n}\n\nexport namespace NotebookDocumentContentOptions {\n\texport function from(options: vscode.NotebookDocumentContentOptions | undefined): notebooks.TransientOptions {\n\t\treturn {\n\t\t\ttransientOutputs: options?.transientOutputs ?? false,\n\t\t\ttransientCellMetadata: options?.transientCellMetadata ?? {},\n\t\t\ttransientDocumentMetadata: options?.transientDocumentMetadata ?? {},\n\t\t\tcellContentMetadata: options?.cellContentMetadata ?? {}\n\t\t};\n\t}\n}\n\nexport namespace NotebookRendererScript {\n\texport function from(preload: vscode.NotebookRendererScript): { uri: UriComponents; provides: readonly string[] } {\n\t\treturn {\n\t\t\turi: preload.uri,\n\t\t\tprovides: preload.provides\n\t\t};\n\t}\n\n\texport function to(preload: { uri: UriComponents; provides: readonly string[] }): vscode.NotebookRendererScript {\n\t\treturn new types.NotebookRendererScript(URI.revive(preload.uri), preload.provides);\n\t}\n}\n\nexport namespace TestMessage {\n\texport function from(message: vscode.TestMessage): ITestErrorMessage.Serialized {\n\t\treturn {\n\t\t\tmessage: MarkdownString.fromStrict(message.message) || '',\n\t\t\ttype: TestMessageType.Error,\n\t\t\texpected: message.expectedOutput,\n\t\t\tactual: message.actualOutput,\n\t\t\tcontextValue: message.contextValue,\n\t\t\tlocation: message.location && ({ range: Range.from(message.location.range), uri: message.location.uri }),\n\t\t\tstackTrace: message.stackTrace?.map(s => ({\n\t\t\t\tlabel: s.label,\n\t\t\t\tposition: s.position && Position.from(s.position),\n\t\t\t\turi: s.uri && URI.revive(s.uri).toJSON(),\n\t\t\t})),\n\t\t};\n\t}\n\n\texport function to(item: ITestErrorMessage.Serialized): vscode.TestMessage {\n\t\tconst message = new types.TestMessage(typeof item.message === 'string' ? item.message : MarkdownString.to(item.message));\n\t\tmessage.actualOutput = item.actual;\n\t\tmessage.expectedOutput = item.expected;\n\t\tmessage.contextValue = item.contextValue;\n\t\tmessage.location = item.location ? location.to(item.location) : undefined;\n\t\treturn message;\n\t}\n}\n\nexport namespace TestTag {\n\texport const namespace = namespaceTestTag;\n\n\texport const denamespace = denamespaceTestTag;\n}\n\nexport namespace TestRunProfile {\n\texport function from(item: types.TestRunProfileBase): ITestRunProfileReference {\n\t\treturn {\n\t\t\tcontrollerId: item.controllerId,\n\t\t\tprofileId: item.profileId,\n\t\t\tgroup: TestRunProfileKind.from(item.kind),\n\t\t};\n\t}\n}\n\nexport namespace TestRunProfileKind {\n\tconst profileGroupToBitset: { [K in vscode.TestRunProfileKind]: TestRunProfileBitset } = {\n\t\t[types.TestRunProfileKind.Coverage]: TestRunProfileBitset.Coverage,\n\t\t[types.TestRunProfileKind.Debug]: TestRunProfileBitset.Debug,\n\t\t[types.TestRunProfileKind.Run]: TestRunProfileBitset.Run,\n\t};\n\n\texport function from(kind: types.TestRunProfileKind): TestRunProfileBitset {\n\t\treturn profileGroupToBitset.hasOwnProperty(kind) ? profileGroupToBitset[kind] : TestRunProfileBitset.Run;\n\t}\n}\n\nexport namespace TestItem {\n\texport type Raw = vscode.TestItem;\n\n\texport function from(item: vscode.TestItem): ITestItem {\n\t\tconst ctrlId = getPrivateApiFor(item).controllerId;\n\t\treturn {\n\t\t\textId: TestId.fromExtHostTestItem(item, ctrlId).toString(),\n\t\t\tlabel: item.label,\n\t\t\turi: URI.revive(item.uri),\n\t\t\tbusy: item.busy,\n\t\t\ttags: item.tags.map(t => TestTag.namespace(ctrlId, t.id)),\n\t\t\trange: editorRange.Range.lift(Range.from(item.range)),\n\t\t\tdescription: item.description || null,\n\t\t\tsortText: item.sortText || null,\n\t\t\terror: item.error ? (MarkdownString.fromStrict(item.error) || null) : null,\n\t\t};\n\t}\n\n\texport function toPlain(item: ITestItem.Serialized): vscode.TestItem {\n\t\treturn {\n\t\t\tparent: undefined,\n\t\t\terror: undefined,\n\t\t\tid: TestId.fromString(item.extId).localId,\n\t\t\tlabel: item.label,\n\t\t\turi: URI.revive(item.uri),\n\t\t\ttags: (item.tags || []).map(t => {\n\t\t\t\tconst { tagId } = TestTag.denamespace(t);\n\t\t\t\treturn new types.TestTag(tagId);\n\t\t\t}),\n\t\t\tchildren: {\n\t\t\t\tadd: () => { },\n\t\t\t\tdelete: () => { },\n\t\t\t\tforEach: () => { },\n\t\t\t\t*[Symbol.iterator]() { },\n\t\t\t\tget: () => undefined,\n\t\t\t\treplace: () => { },\n\t\t\t\tsize: 0,\n\t\t\t},\n\t\t\trange: Range.to(item.range || undefined),\n\t\t\tcanResolveChildren: false,\n\t\t\tbusy: item.busy,\n\t\t\tdescription: item.description || undefined,\n\t\t\tsortText: item.sortText || undefined,\n\t\t};\n\t}\n}\n\nexport namespace TestTag {\n\texport function from(tag: vscode.TestTag): ITestTag {\n\t\treturn { id: tag.id };\n\t}\n\n\texport function to(tag: ITestTag): vscode.TestTag {\n\t\treturn new types.TestTag(tag.id);\n\t}\n}\n\nexport namespace TestResults {\n\tconst convertTestResultItem = (node: IPrefixTreeNode<TestResultItem.Serialized>, parent?: vscode.TestResultSnapshot): vscode.TestResultSnapshot | undefined => {\n\t\tconst item = node.value;\n\t\tif (!item) {\n\t\t\treturn undefined; // should be unreachable\n\t\t}\n\n\t\tconst snapshot: vscode.TestResultSnapshot = ({\n\t\t\t...TestItem.toPlain(item.item),\n\t\t\tparent,\n\t\t\ttaskStates: item.tasks.map(t => ({\n\t\t\t\tstate: t.state as number as types.TestResultState,\n\t\t\t\tduration: t.duration,\n\t\t\t\tmessages: t.messages\n\t\t\t\t\t.filter((m): m is ITestErrorMessage.Serialized => m.type === TestMessageType.Error)\n\t\t\t\t\t.map(TestMessage.to),\n\t\t\t})),\n\t\t\tchildren: [],\n\t\t});\n\n\t\tif (node.children) {\n\t\t\tfor (const child of node.children.values()) {\n\t\t\t\tconst c = convertTestResultItem(child, snapshot);\n\t\t\t\tif (c) {\n\t\t\t\t\tsnapshot.children.push(c);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn snapshot;\n\t};\n\n\texport function to(serialized: ISerializedTestResults): vscode.TestRunResult {\n\t\tconst tree = new WellDefinedPrefixTree<TestResultItem.Serialized>();\n\t\tfor (const item of serialized.items) {\n\t\t\ttree.insert(TestId.fromString(item.item.extId).path, item);\n\t\t}\n\n\t\t// Get the first node with a value in each subtree of IDs.\n\t\tconst queue = [tree.nodes];\n\t\tconst roots: IPrefixTreeNode<TestResultItem.Serialized>[] = [];\n\t\twhile (queue.length) {\n\t\t\tfor (const node of queue.pop()!) {\n\t\t\t\tif (node.value) {\n\t\t\t\t\troots.push(node);\n\t\t\t\t} else if (node.children) {\n\t\t\t\t\tqueue.push(node.children.values());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcompletedAt: serialized.completedAt,\n\t\t\tresults: roots.map(r => convertTestResultItem(r)).filter(isDefined),\n\t\t};\n\t}\n}\n\nexport namespace TestCoverage {\n\tfunction fromCoverageCount(count: vscode.TestCoverageCount): ICoverageCount {\n\t\treturn { covered: count.covered, total: count.total };\n\t}\n\n\tfunction fromLocation(location: vscode.Range | vscode.Position) {\n\t\treturn 'line' in location ? Position.from(location) : Range.from(location);\n\t}\n\n\tfunction toLocation(location: IPosition | editorRange.IRange): types.Position | types.Range;\n\tfunction toLocation(location: IPosition | editorRange.IRange | undefined): types.Position | types.Range | undefined;\n\tfunction toLocation(location: IPosition | editorRange.IRange | undefined): types.Position | types.Range | undefined {\n\t\tif (!location) { return undefined; }\n\t\treturn 'endLineNumber' in location ? Range.to(location) : Position.to(location);\n\t}\n\n\texport function to(serialized: CoverageDetails.Serialized): vscode.FileCoverageDetail {\n\t\tif (serialized.type === DetailType.Statement) {\n\t\t\tconst branches: vscode.BranchCoverage[] = [];\n\t\t\tif (serialized.branches) {\n\t\t\t\tfor (const branch of serialized.branches) {\n\t\t\t\t\tbranches.push({\n\t\t\t\t\t\texecuted: branch.count,\n\t\t\t\t\t\tlocation: toLocation(branch.location),\n\t\t\t\t\t\tlabel: branch.label\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new types.StatementCoverage(\n\t\t\t\tserialized.count,\n\t\t\t\ttoLocation(serialized.location),\n\t\t\t\tserialized.branches?.map(b => new types.BranchCoverage(\n\t\t\t\t\tb.count,\n\t\t\t\t\ttoLocation(b.location)!,\n\t\t\t\t\tb.label,\n\t\t\t\t))\n\t\t\t);\n\t\t} else {\n\t\t\treturn new types.DeclarationCoverage(\n\t\t\t\tserialized.name,\n\t\t\t\tserialized.count,\n\t\t\t\ttoLocation(serialized.location),\n\t\t\t);\n\t\t}\n\t}\n\n\texport function fromDetails(coverage: vscode.FileCoverageDetail): CoverageDetails.Serialized {\n\t\tif (typeof coverage.executed === 'number' && coverage.executed < 0) {\n\t\t\tthrow new Error(`Invalid coverage count ${coverage.executed}`);\n\t\t}\n\n\t\tif ('branches' in coverage) {\n\t\t\treturn {\n\t\t\t\tcount: coverage.executed,\n\t\t\t\tlocation: fromLocation(coverage.location),\n\t\t\t\ttype: DetailType.Statement,\n\t\t\t\tbranches: coverage.branches.length\n\t\t\t\t\t? coverage.branches.map(b => ({ count: b.executed, location: b.location && fromLocation(b.location), label: b.label }))\n\t\t\t\t\t: undefined,\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: DetailType.Declaration,\n\t\t\t\tname: coverage.name,\n\t\t\t\tcount: coverage.executed,\n\t\t\t\tlocation: fromLocation(coverage.location),\n\t\t\t};\n\t\t}\n\t}\n\n\texport function fromFile(controllerId: string, id: string, coverage: vscode.FileCoverage): IFileCoverage.Serialized {\n\t\ttypes.validateTestCoverageCount(coverage.statementCoverage);\n\t\ttypes.validateTestCoverageCount(coverage.branchCoverage);\n\t\ttypes.validateTestCoverageCount(coverage.declarationCoverage);\n\n\t\treturn {\n\t\t\tid,\n\t\t\turi: coverage.uri,\n\t\t\tstatement: fromCoverageCount(coverage.statementCoverage),\n\t\t\tbranch: coverage.branchCoverage && fromCoverageCount(coverage.branchCoverage),\n\t\t\tdeclaration: coverage.declarationCoverage && fromCoverageCount(coverage.declarationCoverage),\n\t\t\ttestIds: coverage instanceof types.FileCoverage && coverage.includesTests.length ?\n\t\t\t\tcoverage.includesTests.map(t => TestId.fromExtHostTestItem(t, controllerId).toString()) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace CodeActionTriggerKind {\n\n\texport function to(value: languages.CodeActionTriggerType): types.CodeActionTriggerKind {\n\t\tswitch (value) {\n\t\t\tcase languages.CodeActionTriggerType.Invoke:\n\t\t\t\treturn types.CodeActionTriggerKind.Invoke;\n\n\t\t\tcase languages.CodeActionTriggerType.Auto:\n\t\t\t\treturn types.CodeActionTriggerKind.Automatic;\n\t\t}\n\t}\n}\n\nexport namespace TypeHierarchyItem {\n\n\texport function to(item: extHostProtocol.ITypeHierarchyItemDto): types.TypeHierarchyItem {\n\t\tconst result = new types.TypeHierarchyItem(\n\t\t\tSymbolKind.to(item.kind),\n\t\t\titem.name,\n\t\t\titem.detail || '',\n\t\t\tURI.revive(item.uri),\n\t\t\tRange.to(item.range),\n\t\t\tRange.to(item.selectionRange)\n\t\t);\n\n\t\tresult._sessionId = item._sessionId;\n\t\tresult._itemId = item._itemId;\n\n\t\treturn result;\n\t}\n\n\texport function from(item: vscode.TypeHierarchyItem, sessionId?: string, itemId?: string): extHostProtocol.ITypeHierarchyItemDto {\n\n\t\tsessionId = sessionId ?? (<types.TypeHierarchyItem>item)._sessionId;\n\t\titemId = itemId ?? (<types.TypeHierarchyItem>item)._itemId;\n\n\t\tif (sessionId === undefined || itemId === undefined) {\n\t\t\tthrow new Error('invalid item');\n\t\t}\n\n\t\treturn {\n\t\t\t_sessionId: sessionId,\n\t\t\t_itemId: itemId,\n\t\t\tkind: SymbolKind.from(item.kind),\n\t\t\tname: item.name,\n\t\t\tdetail: item.detail ?? '',\n\t\t\turi: item.uri,\n\t\t\trange: Range.from(item.range),\n\t\t\tselectionRange: Range.from(item.selectionRange),\n\t\t\ttags: item.tags?.map(SymbolTag.from)\n\t\t};\n\t}\n}\n\nexport namespace ViewBadge {\n\texport function from(badge: vscode.ViewBadge | undefined): IViewBadge | undefined {\n\t\tif (!badge) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: badge.value,\n\t\t\ttooltip: badge.tooltip\n\t\t};\n\t}\n}\n\nexport namespace DataTransferItem {\n\texport function to(mime: string, item: extHostProtocol.DataTransferItemDTO, resolveFileData: (id: string) => Promise<Uint8Array>): types.DataTransferItem {\n\t\tconst file = item.fileData;\n\t\tif (file) {\n\t\t\treturn new types.InternalFileDataTransferItem(\n\t\t\t\tnew types.DataTransferFile(file.name, URI.revive(file.uri), file.id, createSingleCallFunction(() => resolveFileData(file.id))));\n\t\t}\n\n\t\tif (mime === Mimes.uriList && item.uriListData) {\n\t\t\treturn new types.InternalDataTransferItem(reviveUriList(item.uriListData));\n\t\t}\n\n\t\treturn new types.InternalDataTransferItem(item.asString);\n\t}\n\n\texport async function from(mime: string, item: vscode.DataTransferItem | IDataTransferItem, id: string = generateUuid()): Promise<extHostProtocol.DataTransferItemDTO> {\n\t\tconst stringValue = await item.asString();\n\n\t\tif (mime === Mimes.uriList) {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tasString: stringValue,\n\t\t\t\tfileData: undefined,\n\t\t\t\turiListData: serializeUriList(stringValue),\n\t\t\t};\n\t\t}\n\n\t\tconst fileValue = item.asFile();\n\t\treturn {\n\t\t\tid,\n\t\t\tasString: stringValue,\n\t\t\tfileData: fileValue ? {\n\t\t\t\tname: fileValue.name,\n\t\t\t\turi: fileValue.uri,\n\t\t\t\tid: (fileValue as types.DataTransferFile)._itemId ?? (fileValue as IDataTransferFile).id,\n\t\t\t} : undefined,\n\t\t};\n\t}\n\n\tfunction serializeUriList(stringValue: string): ReadonlyArray<string | URI> {\n\t\treturn UriList.split(stringValue).map(part => {\n\t\t\tif (part.startsWith('#')) {\n\t\t\t\treturn part;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\treturn URI.parse(part);\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\n\t\t\treturn part;\n\t\t});\n\t}\n\n\tfunction reviveUriList(parts: ReadonlyArray<string | UriComponents>): string {\n\t\treturn UriList.create(parts.map(part => {\n\t\t\treturn typeof part === 'string' ? part : URI.revive(part);\n\t\t}));\n\t}\n}\n\nexport namespace DataTransfer {\n\texport function toDataTransfer(value: extHostProtocol.DataTransferDTO, resolveFileData: (itemId: string) => Promise<Uint8Array>): types.DataTransfer {\n\t\tconst init = value.items.map(([type, item]) => {\n\t\t\treturn [type, DataTransferItem.to(type, item, resolveFileData)] as const;\n\t\t});\n\t\treturn new types.DataTransfer(init);\n\t}\n\n\texport async function from(dataTransfer: vscode.DataTransfer): Promise<extHostProtocol.DataTransferDTO> {\n\t\tconst items = await Promise.all(Array.from(dataTransfer, async ([mime, value]) => {\n\t\t\treturn [mime, await DataTransferItem.from(mime, value)] as const;\n\t\t}));\n\n\t\treturn { items };\n\t}\n\n\texport async function fromList(dataTransfer: Iterable<readonly [string, IDataTransferItem]>): Promise<extHostProtocol.DataTransferDTO> {\n\t\tconst items = await Promise.all(Array.from(dataTransfer, async ([mime, value]) => {\n\t\t\treturn [mime, await DataTransferItem.from(mime, value, value.id)] as const;\n\t\t}));\n\n\t\treturn { items };\n\t}\n}\n\nexport namespace ChatFollowup {\n\texport function from(followup: vscode.ChatFollowup, request: IChatAgentRequest | undefined): IChatFollowup {\n\t\treturn {\n\t\t\tkind: 'reply',\n\t\t\tagentId: followup.participant ?? request?.agentId ?? '',\n\t\t\tsubCommand: followup.command ?? request?.command,\n\t\t\tmessage: followup.prompt,\n\t\t\ttitle: followup.label\n\t\t};\n\t}\n\n\texport function to(followup: IChatFollowup): vscode.ChatFollowup {\n\t\treturn {\n\t\t\tprompt: followup.message,\n\t\t\tlabel: followup.title,\n\t\t\tparticipant: followup.agentId,\n\t\t\tcommand: followup.subCommand,\n\t\t};\n\t}\n}\n\nexport namespace LanguageModelChatMessageRole {\n\texport function to(role: chatProvider.ChatMessageRole): vscode.LanguageModelChatMessageRole {\n\t\tswitch (role) {\n\t\t\tcase chatProvider.ChatMessageRole.System: return types.LanguageModelChatMessageRole.System;\n\t\t\tcase chatProvider.ChatMessageRole.User: return types.LanguageModelChatMessageRole.User;\n\t\t\tcase chatProvider.ChatMessageRole.Assistant: return types.LanguageModelChatMessageRole.Assistant;\n\t\t}\n\t}\n\n\texport function from(role: vscode.LanguageModelChatMessageRole): chatProvider.ChatMessageRole {\n\t\tswitch (role) {\n\t\t\tcase types.LanguageModelChatMessageRole.System: return chatProvider.ChatMessageRole.System;\n\t\t\tcase types.LanguageModelChatMessageRole.User: return chatProvider.ChatMessageRole.User;\n\t\t\tcase types.LanguageModelChatMessageRole.Assistant: return chatProvider.ChatMessageRole.Assistant;\n\t\t}\n\t\treturn chatProvider.ChatMessageRole.User;\n\t}\n}\n\nexport namespace LanguageModelChatMessage {\n\n\texport function to(message: chatProvider.IChatMessage): vscode.LanguageModelChatMessage {\n\t\tconst content = message.content.map(c => {\n\t\t\tif (c.type === 'text') {\n\t\t\t\treturn new LanguageModelTextPart(c.value, c.audience);\n\t\t\t} else if (c.type === 'tool_result') {\n\t\t\t\tconst content: (LanguageModelTextPart | LanguageModelPromptTsxPart | LanguageModelDataPart)[] = coalesce(c.value.map(part => {\n\t\t\t\t\tif (part.type === 'text') {\n\t\t\t\t\t\treturn new types.LanguageModelTextPart(part.value, part.audience);\n\t\t\t\t\t} else if (part.type === 'data') {\n\t\t\t\t\t\treturn new types.LanguageModelDataPart(part.data.buffer, part.mimeType);\n\t\t\t\t\t} else if (part.type === 'prompt_tsx') {\n\t\t\t\t\t\treturn new types.LanguageModelPromptTsxPart(part.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn undefined; // Strip unknown parts\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\treturn new types.LanguageModelToolResultPart(c.toolCallId, content, c.isError);\n\t\t\t} else if (c.type === 'image_url') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.value.data.buffer, c.value.mimeType);\n\t\t\t} else if (c.type === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.data.buffer, c.mimeType);\n\t\t\t} else if (c.type === 'tool_use') {\n\t\t\t\treturn new types.LanguageModelToolCallPart(c.toolCallId, c.name, c.parameters);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}).filter(c => c !== undefined);\n\n\t\tconst role = LanguageModelChatMessageRole.to(message.role);\n\t\tconst result = new types.LanguageModelChatMessage(role, content, message.name);\n\t\treturn result;\n\t}\n\n\texport function from(message: vscode.LanguageModelChatMessage): chatProvider.IChatMessage {\n\n\t\tconst role = LanguageModelChatMessageRole.from(message.role);\n\t\tconst name = message.name;\n\n\t\tlet messageContent = message.content;\n\t\tif (typeof messageContent === 'string') {\n\t\t\tmessageContent = [new types.LanguageModelTextPart(messageContent)];\n\t\t}\n\n\t\tconst content = messageContent.map((c): chatProvider.IChatMessagePart => {\n\t\t\tif (c instanceof types.LanguageModelToolResultPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_result',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tvalue: coalesce(c.content.map(part => {\n\t\t\t\t\t\tif (part instanceof types.LanguageModelTextPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t\taudience: part.audience,\n\t\t\t\t\t\t\t} satisfies IChatResponseTextPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'prompt_tsx',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t} satisfies IChatResponsePromptTsxPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelDataPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\t\t\tmimeType: part.mimeType,\n\t\t\t\t\t\t\t\tdata: VSBuffer.wrap(part.data),\n\t\t\t\t\t\t\t\taudience: part.audience\n\t\t\t\t\t\t\t} satisfies IChatResponseDataPart;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Strip unknown parts\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t})),\n\t\t\t\t\tisError: c.isError\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelDataPart) {\n\t\t\t\tif (isImageDataPart(c)) {\n\t\t\t\t\tconst value: chatProvider.IChatImageURLPart = {\n\t\t\t\t\t\tmimeType: c.mimeType as chatProvider.ChatImageMimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'image_url',\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\tmimeType: c.mimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t\taudience: c.audience\n\t\t\t\t\t} satisfies IChatMessageDataPart;\n\t\t\t\t}\n\t\t\t} else if (c instanceof types.LanguageModelToolCallPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_use',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tname: c.name,\n\t\t\t\t\tparameters: c.input\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelTextPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c.value\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tif (typeof c !== 'string') {\n\t\t\t\t\tthrow new Error('Unexpected chat message content type');\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\trole,\n\t\t\tname,\n\t\t\tcontent\n\t\t};\n\t}\n}\n\nexport namespace LanguageModelChatMessage2 {\n\n\texport function to(message: chatProvider.IChatMessage): vscode.LanguageModelChatMessage2 {\n\t\tconst content = message.content.map(c => {\n\t\t\tif (c.type === 'text') {\n\t\t\t\treturn new LanguageModelTextPart(c.value, c.audience);\n\t\t\t} else if (c.type === 'tool_result') {\n\t\t\t\tconst content: (LanguageModelTextPart | LanguageModelPromptTsxPart | LanguageModelDataPart)[] = c.value.map(part => {\n\t\t\t\t\tif (part.type === 'text') {\n\t\t\t\t\t\treturn new types.LanguageModelTextPart(part.value, part.audience);\n\t\t\t\t\t} else if (part.type === 'data') {\n\t\t\t\t\t\treturn new types.LanguageModelDataPart(part.data.buffer, part.mimeType);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn new types.LanguageModelPromptTsxPart(part.value);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn new types.LanguageModelToolResultPart(c.toolCallId, content, c.isError);\n\t\t\t} else if (c.type === 'image_url') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.value.data.buffer, c.value.mimeType);\n\t\t\t} else if (c.type === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(c.data.buffer, c.mimeType);\n\t\t\t} else if (c.type === 'thinking') {\n\t\t\t\treturn new types.LanguageModelThinkingPart(c.value, c.id, c.metadata);\n\t\t\t} else {\n\t\t\t\treturn new types.LanguageModelToolCallPart(c.toolCallId, c.name, c.parameters);\n\t\t\t}\n\t\t});\n\t\tconst role = LanguageModelChatMessageRole.to(message.role);\n\t\tconst result = new types.LanguageModelChatMessage2(role, content, message.name);\n\t\treturn result;\n\t}\n\n\texport function from(message: vscode.LanguageModelChatMessage2): chatProvider.IChatMessage {\n\n\t\tconst role = LanguageModelChatMessageRole.from(message.role);\n\t\tconst name = message.name;\n\n\t\tlet messageContent = message.content;\n\t\tif (typeof messageContent === 'string') {\n\t\t\tmessageContent = [new types.LanguageModelTextPart(messageContent)];\n\t\t}\n\n\t\tconst content = messageContent.map((c): chatProvider.IChatMessagePart => {\n\t\t\tif (c instanceof types.LanguageModelToolResultPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_result',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tvalue: coalesce(c.content.map(part => {\n\t\t\t\t\t\tif (part instanceof types.LanguageModelTextPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t\taudience: part.audience,\n\t\t\t\t\t\t\t} satisfies IChatResponseTextPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'prompt_tsx',\n\t\t\t\t\t\t\t\tvalue: part.value,\n\t\t\t\t\t\t\t} satisfies IChatResponsePromptTsxPart;\n\t\t\t\t\t\t} else if (part instanceof types.LanguageModelDataPart) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\t\t\tmimeType: part.mimeType,\n\t\t\t\t\t\t\t\tdata: VSBuffer.wrap(part.data),\n\t\t\t\t\t\t\t\taudience: part.audience\n\t\t\t\t\t\t\t} satisfies IChatResponseDataPart;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Strip unknown parts\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t})),\n\t\t\t\t\tisError: c.isError\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelDataPart) {\n\t\t\t\tif (isImageDataPart(c)) {\n\t\t\t\t\tconst value: chatProvider.IChatImageURLPart = {\n\t\t\t\t\t\tmimeType: c.mimeType as chatProvider.ChatImageMimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'image_url',\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\tmimeType: c.mimeType,\n\t\t\t\t\t\tdata: VSBuffer.wrap(c.data),\n\t\t\t\t\t\taudience: c.audience\n\t\t\t\t\t} satisfies IChatMessageDataPart;\n\t\t\t\t}\n\t\t\t} else if (c instanceof types.LanguageModelToolCallPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'tool_use',\n\t\t\t\t\ttoolCallId: c.callId,\n\t\t\t\t\tname: c.name,\n\t\t\t\t\tparameters: c.input\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelTextPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c.value\n\t\t\t\t};\n\t\t\t} else if (c instanceof types.LanguageModelThinkingPart) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'thinking',\n\t\t\t\t\tvalue: c.value,\n\t\t\t\t\tid: c.id,\n\t\t\t\t\tmetadata: c.metadata\n\t\t\t\t};\n\n\t\t\t} else {\n\t\t\t\tif (typeof c !== 'string') {\n\t\t\t\t\tthrow new Error('Unexpected chat message content type llm 2');\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tvalue: c\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\trole,\n\t\t\tname,\n\t\t\tcontent\n\t\t};\n\t}\n}\n\nfunction isImageDataPart(part: types.LanguageModelDataPart): boolean {\n\tconst mime = typeof part.mimeType === 'string' ? part.mimeType.toLowerCase() : '';\n\tswitch (mime) {\n\t\tcase 'image/png':\n\t\tcase 'image/jpeg':\n\t\tcase 'image/jpg':\n\t\tcase 'image/gif':\n\t\tcase 'image/webp':\n\t\tcase 'image/bmp':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nexport namespace ChatResponseMarkdownPart {\n\texport function from(part: vscode.ChatResponseMarkdownPart): Dto<IChatMarkdownContent> {\n\t\treturn {\n\t\t\tkind: 'markdownContent',\n\t\t\tcontent: MarkdownString.from(part.value)\n\t\t};\n\t}\n\texport function to(part: Dto<IChatMarkdownContent>): vscode.ChatResponseMarkdownPart {\n\t\treturn new types.ChatResponseMarkdownPart(MarkdownString.to(part.content));\n\t}\n}\n\nexport namespace ChatResponseCodeblockUriPart {\n\texport function from(part: vscode.ChatResponseCodeblockUriPart): Dto<IChatResponseCodeblockUriPart> {\n\t\treturn {\n\t\t\tkind: 'codeblockUri',\n\t\t\turi: part.value,\n\t\t\tisEdit: part.isEdit,\n\t\t};\n\t}\n\texport function to(part: Dto<IChatResponseCodeblockUriPart>): vscode.ChatResponseCodeblockUriPart {\n\t\treturn new types.ChatResponseCodeblockUriPart(URI.revive(part.uri), part.isEdit);\n\t}\n}\n\nexport namespace ChatResponseMarkdownWithVulnerabilitiesPart {\n\texport function from(part: vscode.ChatResponseMarkdownWithVulnerabilitiesPart): Dto<IChatAgentMarkdownContentWithVulnerability> {\n\t\treturn {\n\t\t\tkind: 'markdownVuln',\n\t\t\tcontent: MarkdownString.from(part.value),\n\t\t\tvulnerabilities: part.vulnerabilities,\n\t\t};\n\t}\n\texport function to(part: Dto<IChatAgentMarkdownContentWithVulnerability>): vscode.ChatResponseMarkdownWithVulnerabilitiesPart {\n\t\treturn new types.ChatResponseMarkdownWithVulnerabilitiesPart(MarkdownString.to(part.content), part.vulnerabilities);\n\t}\n}\n\nexport namespace ChatResponseConfirmationPart {\n\texport function from(part: vscode.ChatResponseConfirmationPart): Dto<IChatConfirmation> {\n\t\treturn {\n\t\t\tkind: 'confirmation',\n\t\t\ttitle: part.title,\n\t\t\tmessage: MarkdownString.from(part.message),\n\t\t\tdata: part.data,\n\t\t\tbuttons: part.buttons\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseFilesPart {\n\texport function from(part: vscode.ChatResponseFileTreePart): IChatTreeData {\n\t\tconst { value, baseUri } = part;\n\t\tfunction convert(items: vscode.ChatResponseFileTree[], baseUri: URI): extHostProtocol.IChatResponseProgressFileTreeData[] {\n\t\t\treturn items.map(item => {\n\t\t\t\tconst myUri = URI.joinPath(baseUri, item.name);\n\t\t\t\treturn {\n\t\t\t\t\tlabel: item.name,\n\t\t\t\t\turi: myUri,\n\t\t\t\t\tchildren: item.children && convert(item.children, myUri)\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\treturn {\n\t\t\tkind: 'treeData',\n\t\t\ttreeData: {\n\t\t\t\tlabel: basename(baseUri),\n\t\t\t\turi: baseUri,\n\t\t\t\tchildren: convert(value, baseUri)\n\t\t\t}\n\t\t};\n\t}\n\texport function to(part: Dto<IChatTreeData>): vscode.ChatResponseFileTreePart {\n\t\tconst treeData = revive<extHostProtocol.IChatResponseProgressFileTreeData>(part.treeData);\n\t\tfunction convert(items: extHostProtocol.IChatResponseProgressFileTreeData[]): vscode.ChatResponseFileTree[] {\n\t\t\treturn items.map(item => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tchildren: item.children && convert(item.children)\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tconst baseUri = treeData.uri;\n\t\tconst items = treeData.children ? convert(treeData.children) : [];\n\t\treturn new types.ChatResponseFileTreePart(items, baseUri);\n\t}\n}\n\nexport namespace ChatResponseMultiDiffPart {\n\texport function from(part: vscode.ChatResponseMultiDiffPart): IChatMultiDiffData {\n\t\treturn {\n\t\t\tkind: 'multiDiffData',\n\t\t\tmultiDiffData: {\n\t\t\t\ttitle: part.title,\n\t\t\t\tresources: part.value.map(entry => ({\n\t\t\t\t\toriginalUri: entry.originalUri,\n\t\t\t\t\tmodifiedUri: entry.modifiedUri,\n\t\t\t\t\tgoToFileUri: entry.goToFileUri,\n\t\t\t\t\tadded: entry.added,\n\t\t\t\t\tremoved: entry.removed,\n\t\t\t\t}))\n\t\t\t},\n\t\t\treadOnly: part.readOnly\n\t\t};\n\t}\n\texport function to(part: Dto<IChatMultiDiffData>): vscode.ChatResponseMultiDiffPart {\n\t\tconst resources = part.multiDiffData.resources.map(resource => ({\n\t\t\toriginalUri: resource.originalUri ? URI.revive(resource.originalUri) : undefined,\n\t\t\tmodifiedUri: resource.modifiedUri ? URI.revive(resource.modifiedUri) : undefined,\n\t\t\tgoToFileUri: resource.goToFileUri ? URI.revive(resource.goToFileUri) : undefined,\n\t\t\tadded: resource.added,\n\t\t\tremoved: resource.removed,\n\t\t}));\n\t\treturn new types.ChatResponseMultiDiffPart(resources, part.multiDiffData.title, part.readOnly);\n\t}\n}\n\nexport namespace ChatResponseAnchorPart {\n\texport function from(part: vscode.ChatResponseAnchorPart): Dto<IChatContentInlineReference> {\n\t\t// Work around type-narrowing confusion between vscode.Uri and URI\n\t\tconst isUri = (thing: unknown): thing is vscode.Uri => URI.isUri(thing);\n\t\tconst isSymbolInformation = (thing: object): thing is vscode.SymbolInformation => 'name' in thing;\n\n\t\treturn {\n\t\t\tkind: 'inlineReference',\n\t\t\tname: part.title,\n\t\t\tinlineReference: isUri(part.value)\n\t\t\t\t? part.value\n\t\t\t\t: isSymbolInformation(part.value)\n\t\t\t\t\t? WorkspaceSymbol.from(part.value)\n\t\t\t\t\t: Location.from(part.value)\n\t\t};\n\t}\n\n\texport function to(part: Dto<IChatContentInlineReference>): vscode.ChatResponseAnchorPart {\n\t\tconst value = revive<IChatContentInlineReference>(part);\n\t\treturn new types.ChatResponseAnchorPart(\n\t\t\tURI.isUri(value.inlineReference)\n\t\t\t\t? value.inlineReference\n\t\t\t\t: 'location' in value.inlineReference\n\t\t\t\t\t? WorkspaceSymbol.to(value.inlineReference) as vscode.SymbolInformation\n\t\t\t\t\t: Location.to(value.inlineReference),\n\t\t\tpart.name\n\t\t);\n\t}\n}\n\nexport namespace ChatResponseProgressPart {\n\texport function from(part: vscode.ChatResponseProgressPart): Dto<IChatProgressMessage> {\n\t\treturn {\n\t\t\tkind: 'progressMessage',\n\t\t\tcontent: MarkdownString.from(part.value)\n\t\t};\n\t}\n\texport function to(part: Dto<IChatProgressMessage>): vscode.ChatResponseProgressPart {\n\t\treturn new types.ChatResponseProgressPart(part.content.value);\n\t}\n}\n\nexport namespace ChatResponseThinkingProgressPart {\n\texport function from(part: vscode.ChatResponseThinkingProgressPart): Dto<IChatThinkingPart> {\n\t\treturn {\n\t\t\tkind: 'thinking',\n\t\t\tvalue: part.value,\n\t\t\tid: part.id,\n\t\t\tmetadata: part.metadata\n\t\t};\n\t}\n\texport function to(part: Dto<IChatThinkingPart>): vscode.ChatResponseThinkingProgressPart {\n\t\treturn new types.ChatResponseThinkingProgressPart(part.value ?? '', part.id, part.metadata);\n\t}\n}\n\nexport namespace ChatResponseWarningPart {\n\texport function from(part: vscode.ChatResponseWarningPart): Dto<IChatWarningMessage> {\n\t\treturn {\n\t\t\tkind: 'warning',\n\t\t\tcontent: MarkdownString.from(part.value)\n\t\t};\n\t}\n\texport function to(part: Dto<IChatWarningMessage>): vscode.ChatResponseWarningPart {\n\t\treturn new types.ChatResponseWarningPart(part.content.value);\n\t}\n}\n\nexport namespace ChatResponseExtensionsPart {\n\texport function from(part: vscode.ChatResponseExtensionsPart): Dto<IChatExtensionsContent> {\n\t\treturn {\n\t\t\tkind: 'extensions',\n\t\t\textensions: part.extensions\n\t\t};\n\t}\n}\n\nexport namespace ChatResponsePullRequestPart {\n\texport function from(part: vscode.ChatResponsePullRequestPart): Dto<IChatPullRequestContent> {\n\t\treturn {\n\t\t\tkind: 'pullRequest',\n\t\t\tauthor: part.author,\n\t\t\ttitle: part.title,\n\t\t\tdescription: part.description,\n\t\t\turi: part.uri,\n\t\t\tlinkTag: part.linkTag\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseMovePart {\n\texport function from(part: vscode.ChatResponseMovePart): Dto<IChatMoveMessage> {\n\t\treturn {\n\t\t\tkind: 'move',\n\t\t\turi: part.uri,\n\t\t\trange: Range.from(part.range),\n\t\t};\n\t}\n\texport function to(part: Dto<IChatMoveMessage>): vscode.ChatResponseMovePart {\n\t\treturn new types.ChatResponseMovePart(URI.revive(part.uri), Range.to(part.range));\n\t}\n}\n\nexport namespace ChatPrepareToolInvocationPart {\n\texport function from(part: vscode.ChatPrepareToolInvocationPart): IChatPrepareToolInvocationPart {\n\t\treturn {\n\t\t\tkind: 'prepareToolInvocation',\n\t\t\ttoolName: part.toolName,\n\t\t};\n\t}\n\n\texport function to(part: IChatPrepareToolInvocationPart): vscode.ChatPrepareToolInvocationPart {\n\t\treturn new types.ChatPrepareToolInvocationPart(part.toolName);\n\t}\n}\n\nexport namespace ChatToolInvocationPart {\n\texport function from(part: vscode.ChatToolInvocationPart): IChatToolInvocationSerialized {\n\t\t// Convert extension API ChatToolInvocationPart to internal serialized format\n\t\treturn {\n\t\t\tkind: 'toolInvocationSerialized',\n\t\t\ttoolCallId: part.toolCallId,\n\t\t\ttoolId: part.toolName,\n\t\t\tinvocationMessage: part.invocationMessage ? MarkdownString.from(part.invocationMessage) : part.toolName,\n\t\t\toriginMessage: part.originMessage ? MarkdownString.from(part.originMessage) : undefined,\n\t\t\tpastTenseMessage: part.pastTenseMessage ? MarkdownString.from(part.pastTenseMessage) : undefined,\n\t\t\tisConfirmed: part.isConfirmed,\n\t\t\tisComplete: part.isComplete ?? true,\n\t\t\tsource: ToolDataSource.External,\n\t\t\t// isError: part.isError ?? false,\n\t\t\ttoolSpecificData: part.toolSpecificData ? convertToolSpecificData(part.toolSpecificData) : undefined,\n\t\t\tpresentation: undefined,\n\t\t\tfromSubAgent: part.fromSubAgent\n\t\t};\n\t}\n\n\tfunction convertToolSpecificData(data: any): any {\n\t\t// Convert extension API terminal tool data to internal format\n\t\tif ('command' in data && 'language' in data) {\n\t\t\t// ChatTerminalToolInvocationData\n\t\t\treturn {\n\t\t\t\tkind: 'terminal',\n\t\t\t\tcommand: data.command,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t} else if ('commandLine' in data && 'language' in data) {\n\t\t\t// ChatTerminalToolInvocationData2\n\t\t\treturn {\n\t\t\t\tkind: 'terminal',\n\t\t\t\tcommandLine: data.commandLine,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t}\n\t\treturn data;\n\t}\n\n\texport function to(part: any): vscode.ChatToolInvocationPart {\n\t\tconst toolInvocation = new types.ChatToolInvocationPart(\n\t\t\tpart.toolId || part.toolName,\n\t\t\tpart.toolCallId,\n\t\t\tpart.isError\n\t\t);\n\n\t\tif (part.invocationMessage) {\n\t\t\ttoolInvocation.invocationMessage = part.invocationMessage;\n\t\t}\n\t\tif (part.originMessage) {\n\t\t\ttoolInvocation.originMessage = part.originMessage;\n\t\t}\n\t\tif (part.pastTenseMessage) {\n\t\t\ttoolInvocation.pastTenseMessage = part.pastTenseMessage;\n\t\t}\n\t\tif (part.isConfirmed !== undefined) {\n\t\t\ttoolInvocation.isConfirmed = part.isConfirmed;\n\t\t}\n\t\tif (part.isComplete !== undefined) {\n\t\t\ttoolInvocation.isComplete = part.isComplete;\n\t\t}\n\t\tif (part.toolSpecificData) {\n\t\t\ttoolInvocation.toolSpecificData = convertFromInternalToolSpecificData(part.toolSpecificData);\n\t\t}\n\t\ttoolInvocation.fromSubAgent = part.fromSubAgent;\n\n\t\treturn toolInvocation;\n\t}\n\n\tfunction convertFromInternalToolSpecificData(data: any): any {\n\t\t// Convert internal terminal tool data to extension API format\n\t\tif (data.kind === 'terminal') {\n\t\t\treturn {\n\t\t\t\tcommand: data.command,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t} else if (data.kind === 'terminal2') {\n\t\t\treturn {\n\t\t\t\tcommandLine: data.commandLine,\n\t\t\t\tlanguage: data.language\n\t\t\t};\n\t\t}\n\t\treturn data;\n\t}\n}\n\nexport namespace ChatTask {\n\texport function from(part: vscode.ChatResponseProgressPart2): IChatTaskDto {\n\t\treturn {\n\t\t\tkind: 'progressTask',\n\t\t\tcontent: MarkdownString.from(part.value),\n\t\t};\n\t}\n}\n\nexport namespace ChatTaskResult {\n\texport function from(part: string | void): Dto<IChatTaskResult> {\n\t\treturn {\n\t\t\tkind: 'progressTaskResult',\n\t\t\tcontent: typeof part === 'string' ? MarkdownString.from(part) : undefined\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseCommandButtonPart {\n\texport function from(part: vscode.ChatResponseCommandButtonPart, commandsConverter: CommandsConverter, commandDisposables: DisposableStore): Dto<IChatCommandButton> {\n\t\t// If the command isn't in the converter, then this session may have been restored, and the command args don't exist anymore\n\t\tconst command = commandsConverter.toInternal(part.value, commandDisposables) ?? { command: part.value.command, title: part.value.title };\n\t\treturn {\n\t\t\tkind: 'command',\n\t\t\tcommand\n\t\t};\n\t}\n\texport function to(part: Dto<IChatCommandButton>, commandsConverter: CommandsConverter): vscode.ChatResponseCommandButtonPart {\n\t\t// If the command isn't in the converter, then this session may have been restored, and the command args don't exist anymore\n\t\treturn new types.ChatResponseCommandButtonPart(commandsConverter.fromInternal(part.command) ?? { command: part.command.id, title: part.command.title });\n\t}\n}\n\nexport namespace ChatResponseTextEditPart {\n\texport function from(part: vscode.ChatResponseTextEditPart): Dto<IChatTextEdit> {\n\t\treturn {\n\t\t\tkind: 'textEdit',\n\t\t\turi: part.uri,\n\t\t\tedits: part.edits.map(e => TextEdit.from(e)),\n\t\t\tdone: part.isDone\n\t\t};\n\t}\n\texport function to(part: Dto<IChatTextEdit>): vscode.ChatResponseTextEditPart {\n\t\tconst result = new types.ChatResponseTextEditPart(URI.revive(part.uri), part.edits.map(e => TextEdit.to(e)));\n\t\tresult.isDone = part.done;\n\t\treturn result;\n\t}\n\n}\n\nexport namespace NotebookEdit {\n\texport function from(edit: vscode.NotebookEdit): extHostProtocol.ICellEditOperationDto {\n\t\tif (edit.newCellMetadata) {\n\t\t\treturn {\n\t\t\t\teditType: CellEditType.Metadata,\n\t\t\t\tindex: edit.range.start,\n\t\t\t\tmetadata: edit.newCellMetadata\n\t\t\t};\n\t\t} else if (edit.newNotebookMetadata) {\n\t\t\treturn {\n\t\t\t\teditType: CellEditType.DocumentMetadata,\n\t\t\t\tmetadata: edit.newNotebookMetadata\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\tindex: edit.range.start,\n\t\t\t\tcount: edit.range.end - edit.range.start,\n\t\t\t\tcells: edit.newCells.map(NotebookCellData.from)\n\t\t\t};\n\t\t}\n\t}\n}\n\n\nexport namespace ChatResponseNotebookEditPart {\n\texport function from(part: vscode.ChatResponseNotebookEditPart): extHostProtocol.IChatNotebookEditDto {\n\t\treturn {\n\t\t\tkind: 'notebookEdit',\n\t\t\turi: part.uri,\n\t\t\tedits: part.edits.map(NotebookEdit.from),\n\t\t\tdone: part.isDone\n\t\t};\n\t}\n}\n\nexport namespace ChatResponseReferencePart {\n\texport function from(part: types.ChatResponseReferencePart): Dto<IChatContentReference> {\n\t\tconst iconPath = ThemeIcon.isThemeIcon(part.iconPath) ? part.iconPath\n\t\t\t: URI.isUri(part.iconPath) ? { light: URI.revive(part.iconPath) }\n\t\t\t\t: (part.iconPath && 'light' in part.iconPath && 'dark' in part.iconPath && URI.isUri(part.iconPath.light) && URI.isUri(part.iconPath.dark) ? { light: URI.revive(part.iconPath.light), dark: URI.revive(part.iconPath.dark) }\n\t\t\t\t\t: undefined);\n\n\t\tif (typeof part.value === 'object' && 'variableName' in part.value) {\n\t\t\treturn {\n\t\t\t\tkind: 'reference',\n\t\t\t\treference: {\n\t\t\t\t\tvariableName: part.value.variableName,\n\t\t\t\t\tvalue: URI.isUri(part.value.value) || !part.value.value ?\n\t\t\t\t\t\tpart.value.value :\n\t\t\t\t\t\tLocation.from(part.value.value as vscode.Location)\n\t\t\t\t},\n\t\t\t\ticonPath,\n\t\t\t\toptions: part.options\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tkind: 'reference',\n\t\t\treference: URI.isUri(part.value) || typeof part.value === 'string' ?\n\t\t\t\tpart.value :\n\t\t\t\tLocation.from(<vscode.Location>part.value),\n\t\t\ticonPath,\n\t\t\toptions: part.options\n\t\t};\n\t}\n\texport function to(part: Dto<IChatContentReference>): vscode.ChatResponseReferencePart {\n\t\tconst value = revive<IChatContentReference>(part);\n\n\t\tconst mapValue = (value: URI | languages.Location): vscode.Uri | vscode.Location => URI.isUri(value) ?\n\t\t\tvalue :\n\t\t\tLocation.to(value);\n\n\t\treturn new types.ChatResponseReferencePart(\n\t\t\ttypeof value.reference === 'string' ? value.reference : 'variableName' in value.reference ? {\n\t\t\t\tvariableName: value.reference.variableName,\n\t\t\t\tvalue: value.reference.value && mapValue(value.reference.value)\n\t\t\t} :\n\t\t\t\tmapValue(value.reference)\n\t\t) as vscode.ChatResponseReferencePart; // 'value' is extended with variableName\n\t}\n}\n\nexport namespace ChatResponseCodeCitationPart {\n\texport function from(part: vscode.ChatResponseCodeCitationPart): Dto<IChatCodeCitation> {\n\t\treturn {\n\t\t\tkind: 'codeCitation',\n\t\t\tvalue: part.value,\n\t\t\tlicense: part.license,\n\t\t\tsnippet: part.snippet\n\t\t};\n\t}\n}\n\nexport namespace ChatResponsePart {\n\n\texport function from(part: vscode.ExtendedChatResponsePart, commandsConverter: CommandsConverter, commandDisposables: DisposableStore): extHostProtocol.IChatProgressDto {\n\t\tif (part instanceof types.ChatResponseMarkdownPart) {\n\t\t\treturn ChatResponseMarkdownPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseAnchorPart) {\n\t\t\treturn ChatResponseAnchorPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseReferencePart) {\n\t\t\treturn ChatResponseReferencePart.from(part);\n\t\t} else if (part instanceof types.ChatResponseProgressPart) {\n\t\t\treturn ChatResponseProgressPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseThinkingProgressPart) {\n\t\t\treturn ChatResponseThinkingProgressPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseFileTreePart) {\n\t\t\treturn ChatResponseFilesPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseMultiDiffPart) {\n\t\t\treturn ChatResponseMultiDiffPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseCommandButtonPart) {\n\t\t\treturn ChatResponseCommandButtonPart.from(part, commandsConverter, commandDisposables);\n\t\t} else if (part instanceof types.ChatResponseTextEditPart) {\n\t\t\treturn ChatResponseTextEditPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseNotebookEditPart) {\n\t\t\treturn ChatResponseNotebookEditPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseMarkdownWithVulnerabilitiesPart) {\n\t\t\treturn ChatResponseMarkdownWithVulnerabilitiesPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseCodeblockUriPart) {\n\t\t\treturn ChatResponseCodeblockUriPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseWarningPart) {\n\t\t\treturn ChatResponseWarningPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseConfirmationPart) {\n\t\t\treturn ChatResponseConfirmationPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseCodeCitationPart) {\n\t\t\treturn ChatResponseCodeCitationPart.from(part);\n\t\t} else if (part instanceof types.ChatResponseMovePart) {\n\t\t\treturn ChatResponseMovePart.from(part);\n\t\t} else if (part instanceof types.ChatResponseExtensionsPart) {\n\t\t\treturn ChatResponseExtensionsPart.from(part);\n\t\t} else if (part instanceof types.ChatPrepareToolInvocationPart) {\n\t\t\treturn ChatPrepareToolInvocationPart.from(part);\n\t\t} else if (part instanceof types.ChatResponsePullRequestPart) {\n\t\t\treturn ChatResponsePullRequestPart.from(part);\n\t\t} else if (part instanceof types.ChatToolInvocationPart) {\n\t\t\treturn ChatToolInvocationPart.from(part);\n\t\t}\n\n\t\treturn {\n\t\t\tkind: 'markdownContent',\n\t\t\tcontent: MarkdownString.from('')\n\t\t};\n\t}\n\n\texport function to(part: extHostProtocol.IChatProgressDto, commandsConverter: CommandsConverter): vscode.ChatResponsePart | undefined {\n\t\tswitch (part.kind) {\n\t\t\tcase 'reference': return ChatResponseReferencePart.to(part);\n\t\t\tcase 'markdownContent':\n\t\t\tcase 'inlineReference':\n\t\t\tcase 'progressMessage':\n\t\t\tcase 'treeData':\n\t\t\tcase 'command':\n\t\t\t\treturn toContent(part, commandsConverter);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\texport function toContent(part: extHostProtocol.IChatContentProgressDto, commandsConverter: CommandsConverter): vscode.ChatResponseMarkdownPart | vscode.ChatResponseFileTreePart | vscode.ChatResponseAnchorPart | vscode.ChatResponseCommandButtonPart | undefined {\n\t\tswitch (part.kind) {\n\t\t\tcase 'markdownContent': return ChatResponseMarkdownPart.to(part);\n\t\t\tcase 'inlineReference': return ChatResponseAnchorPart.to(part);\n\t\t\tcase 'progressMessage': return undefined;\n\t\t\tcase 'treeData': return ChatResponseFilesPart.to(part);\n\t\t\tcase 'command': return ChatResponseCommandButtonPart.to(part, commandsConverter);\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n\nexport namespace ChatAgentRequest {\n\texport function to(request: IChatAgentRequest, location2: vscode.ChatRequestEditorData | vscode.ChatRequestNotebookData | undefined, model: vscode.LanguageModelChat, diagnostics: readonly [vscode.Uri, readonly vscode.Diagnostic[]][], tools: Map<string, boolean>, extension: IRelaxedExtensionDescription, logService: ILogService): vscode.ChatRequest {\n\n\t\tconst toolReferences: typeof request.variables.variables = [];\n\t\tconst variableReferences: typeof request.variables.variables = [];\n\t\tfor (const v of request.variables.variables) {\n\t\t\tif (v.kind === 'tool') {\n\t\t\t\ttoolReferences.push(v);\n\t\t\t} else if (v.kind === 'toolset') {\n\t\t\t\ttoolReferences.push(...v.value);\n\t\t\t} else {\n\t\t\t\tvariableReferences.push(v);\n\t\t\t}\n\t\t}\n\n\t\tconst requestWithAllProps: vscode.ChatRequest = {\n\t\t\tid: request.requestId,\n\t\t\tprompt: request.message,\n\t\t\tcommand: request.command,\n\t\t\tattempt: request.attempt ?? 0,\n\t\t\tenableCommandDetection: request.enableCommandDetection ?? true,\n\t\t\tisParticipantDetected: request.isParticipantDetected ?? false,\n\t\t\tsessionId: request.sessionId,\n\t\t\treferences: variableReferences\n\t\t\t\t.map(v => ChatPromptReference.to(v, diagnostics, logService))\n\t\t\t\t.filter(isDefined),\n\t\t\ttoolReferences: toolReferences.map(ChatLanguageModelToolReference.to),\n\t\t\tlocation: ChatLocation.to(request.location),\n\t\t\tacceptedConfirmationData: request.acceptedConfirmationData,\n\t\t\trejectedConfirmationData: request.rejectedConfirmationData,\n\t\t\tlocation2,\n\t\t\ttoolInvocationToken: Object.freeze<IToolInvocationContext>({ sessionId: request.sessionId, sessionResource: request.sessionResource }) as never,\n\t\t\ttools,\n\t\t\tmodel,\n\t\t\teditedFileEvents: request.editedFileEvents,\n\t\t\tmodeInstructions: request.modeInstructions?.content,\n\t\t\tmodeInstructions2: ChatRequestModeInstructions.to(request.modeInstructions),\n\t\t\tisSubagent: request.isSubagent,\n\t\t};\n\n\t\tif (!isProposedApiEnabled(extension, 'chatParticipantPrivate')) {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).id;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).attempt;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).enableCommandDetection;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).isParticipantDetected;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).location;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).location2;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).editedFileEvents;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).sessionId;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).isSubagent;\n\t\t}\n\n\t\tif (!isProposedApiEnabled(extension, 'chatParticipantAdditions')) {\n\t\t\tdelete requestWithAllProps.acceptedConfirmationData;\n\t\t\tdelete requestWithAllProps.rejectedConfirmationData;\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tdelete (requestWithAllProps as any).tools;\n\t\t}\n\n\n\t\treturn requestWithAllProps;\n\t}\n}\n\nexport namespace ChatRequestDraft {\n\texport function to(request: IChatRequestDraft): vscode.ChatRequestDraft {\n\t\treturn {\n\t\t\tprompt: request.prompt,\n\t\t\tfiles: request.files.map((uri) => URI.revive(uri))\n\t\t};\n\t}\n}\n\nexport namespace ChatLocation {\n\texport function to(loc: ChatAgentLocation): types.ChatLocation {\n\t\tswitch (loc) {\n\t\t\tcase ChatAgentLocation.Notebook: return types.ChatLocation.Notebook;\n\t\t\tcase ChatAgentLocation.Terminal: return types.ChatLocation.Terminal;\n\t\t\tcase ChatAgentLocation.Chat: return types.ChatLocation.Panel;\n\t\t\tcase ChatAgentLocation.EditorInline: return types.ChatLocation.Editor;\n\t\t}\n\t}\n\n\texport function from(loc: types.ChatLocation): ChatAgentLocation {\n\t\tswitch (loc) {\n\t\t\tcase types.ChatLocation.Notebook: return ChatAgentLocation.Notebook;\n\t\t\tcase types.ChatLocation.Terminal: return ChatAgentLocation.Terminal;\n\t\t\tcase types.ChatLocation.Panel: return ChatAgentLocation.Chat;\n\t\t\tcase types.ChatLocation.Editor: return ChatAgentLocation.EditorInline;\n\t\t}\n\t}\n}\n\nexport namespace ChatPromptReference {\n\texport function to(variable: IChatRequestVariableEntry, diagnostics: readonly [vscode.Uri, readonly vscode.Diagnostic[]][], logService: ILogService): vscode.ChatPromptReference | undefined {\n\t\tlet value: vscode.ChatPromptReference['value'] = variable.value;\n\t\tif (!value) {\n\t\t\tlet varStr: string;\n\t\t\ttry {\n\t\t\t\tvarStr = JSON.stringify(variable);\n\t\t\t} catch {\n\t\t\t\tvarStr = `kind=${variable.kind}, id=${variable.id}, name=${variable.name}`;\n\t\t\t}\n\n\t\t\tlogService.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${varStr}`);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (isUriComponents(value)) {\n\t\t\tvalue = URI.revive(value);\n\t\t} else if (value && typeof value === 'object' && 'uri' in value && 'range' in value && isUriComponents(value.uri)) {\n\t\t\tvalue = Location.to(revive(value));\n\t\t} else if (isImageVariableEntry(variable)) {\n\t\t\tconst ref = variable.references?.[0]?.reference;\n\t\t\tvalue = new types.ChatReferenceBinaryData(\n\t\t\t\tvariable.mimeType ?? 'image/png',\n\t\t\t\t() => Promise.resolve(new Uint8Array(Object.values(variable.value as number[]))),\n\t\t\t\tref && URI.isUri(ref) ? ref : undefined\n\t\t\t);\n\t\t} else if (variable.kind === 'diagnostic') {\n\t\t\tconst filterSeverity = variable.filterSeverity && DiagnosticSeverity.to(variable.filterSeverity);\n\t\t\tconst filterUri = variable.filterUri && URI.revive(variable.filterUri).toString();\n\t\t\tvalue = new types.ChatReferenceDiagnostic(diagnostics.map(([uri, d]): [vscode.Uri, vscode.Diagnostic[]] => {\n\t\t\t\tif (variable.filterUri && uri.toString() !== filterUri) {\n\t\t\t\t\treturn [uri, []];\n\t\t\t\t}\n\n\t\t\t\treturn [uri, d.filter(d => {\n\t\t\t\t\tif (filterSeverity && d.severity > filterSeverity) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (variable.filterRange && !editorRange.Range.areIntersectingOrTouching(variable.filterRange, Range.from(d.range))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t})];\n\t\t\t}).filter(([, d]) => d.length > 0));\n\t\t}\n\t\tlet toolReferences;\n\t\tif (isPromptFileVariableEntry(variable) || isPromptTextVariableEntry(variable)) {\n\t\t\tif (variable.toolReferences) {\n\t\t\t\ttoolReferences = ChatLanguageModelToolReferences.to(variable.toolReferences);\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tid: variable.id,\n\t\t\tname: variable.name,\n\t\t\trange: variable.range && [variable.range.start, variable.range.endExclusive],\n\t\t\ttoolReferences,\n\t\t\tvalue,\n\t\t\tmodelDescription: variable.modelDescription,\n\t\t};\n\t}\n}\n\nexport namespace ChatLanguageModelToolReference {\n\texport function to(variable: IChatRequestVariableEntry): vscode.ChatLanguageModelToolReference {\n\t\tconst value = variable.value;\n\t\tif (value) {\n\t\t\tthrow new Error('Invalid tool reference');\n\t\t}\n\n\t\treturn {\n\t\t\tname: variable.id,\n\t\t\trange: variable.range && [variable.range.start, variable.range.endExclusive],\n\t\t};\n\t}\n}\n\nnamespace ChatLanguageModelToolReferences {\n\texport function to(variables: readonly ChatRequestToolReferenceEntry[]): vscode.ChatLanguageModelToolReference[] {\n\t\tconst toolReferences = [];\n\t\tfor (const v of variables) {\n\t\t\tif (v.kind === 'tool') {\n\t\t\t\ttoolReferences.push(ChatLanguageModelToolReference.to(v));\n\t\t\t} else if (v.kind === 'toolset') {\n\t\t\t\ttoolReferences.push(...v.value.map(ChatLanguageModelToolReference.to));\n\t\t\t} else {\n\t\t\t\tthrow new Error('Invalid tool reference in prompt variables');\n\t\t\t}\n\t\t}\n\t\treturn toolReferences;\n\t}\n}\n\nexport namespace ChatRequestModeInstructions {\n\texport function to(mode: IChatRequestModeInstructions | undefined): vscode.ChatRequestModeInstructions | undefined {\n\t\tif (mode) {\n\t\t\treturn {\n\t\t\t\tname: mode.name,\n\t\t\t\tcontent: mode.content,\n\t\t\t\ttoolReferences: ChatLanguageModelToolReferences.to(mode.toolReferences),\n\t\t\t\tmetadata: mode.metadata\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport namespace ChatAgentCompletionItem {\n\texport function from(item: vscode.ChatCompletionItem, commandsConverter: CommandsConverter, disposables: DisposableStore): extHostProtocol.IChatAgentCompletionItem {\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\tlabel: item.label,\n\t\t\tfullName: item.fullName,\n\t\t\ticon: item.icon?.id,\n\t\t\tvalue: item.values[0].value,\n\t\t\tinsertText: item.insertText,\n\t\t\tdetail: item.detail,\n\t\t\tdocumentation: item.documentation,\n\t\t\tcommand: commandsConverter.toInternal(item.command, disposables),\n\t\t};\n\t}\n}\n\nexport namespace ChatAgentResult {\n\texport function to(result: IChatAgentResult): vscode.ChatResult {\n\t\treturn {\n\t\t\terrorDetails: result.errorDetails,\n\t\t\tmetadata: reviveMetadata(result.metadata),\n\t\t\tnextQuestion: result.nextQuestion,\n\t\t\tdetails: result.details,\n\t\t};\n\t}\n\texport function from(result: vscode.ChatResult): Dto<IChatAgentResult> {\n\t\treturn {\n\t\t\terrorDetails: result.errorDetails,\n\t\t\tmetadata: result.metadata,\n\t\t\tnextQuestion: result.nextQuestion,\n\t\t\tdetails: result.details\n\t\t};\n\t}\n\n\tfunction reviveMetadata(metadata: IChatAgentResult['metadata']) {\n\t\treturn cloneAndChange(metadata, value => {\n\t\t\tif (value.$mid === MarshalledId.LanguageModelToolResult) {\n\t\t\t\treturn new types.LanguageModelToolResult(cloneAndChange(value.content, reviveMetadata));\n\t\t\t} else if (value.$mid === MarshalledId.LanguageModelTextPart) {\n\t\t\t\treturn new types.LanguageModelTextPart(value.value);\n\t\t\t} else if (value.$mid === MarshalledId.LanguageModelThinkingPart) {\n\t\t\t\treturn new types.LanguageModelThinkingPart(value.value, value.id, value.metadata);\n\t\t\t} else if (value.$mid === MarshalledId.LanguageModelPromptTsxPart) {\n\t\t\t\treturn new types.LanguageModelPromptTsxPart(value.value);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t}\n}\n\nexport namespace ChatAgentUserActionEvent {\n\texport function to(result: IChatAgentResult, event: IChatUserActionEvent, commandsConverter: CommandsConverter): vscode.ChatUserActionEvent | undefined {\n\t\tif (event.action.kind === 'vote') {\n\t\t\t// Is the \"feedback\" type\n\t\t\treturn;\n\t\t}\n\n\t\tconst ehResult = ChatAgentResult.to(result);\n\t\tif (event.action.kind === 'command') {\n\t\t\tconst command = event.action.commandButton.command;\n\t\t\tconst commandButton = {\n\t\t\t\tcommand: commandsConverter.fromInternal(command) ?? { command: command.id, title: command.title },\n\t\t\t};\n\t\t\tconst commandAction: vscode.ChatCommandAction = { kind: 'command', commandButton };\n\t\t\treturn { action: commandAction, result: ehResult };\n\t\t} else if (event.action.kind === 'followUp') {\n\t\t\tconst followupAction: vscode.ChatFollowupAction = { kind: 'followUp', followup: ChatFollowup.to(event.action.followup) };\n\t\t\treturn { action: followupAction, result: ehResult };\n\t\t} else if (event.action.kind === 'inlineChat') {\n\t\t\treturn { action: { kind: 'editor', accepted: event.action.action === 'accepted' }, result: ehResult };\n\t\t} else if (event.action.kind === 'chatEditingSessionAction') {\n\n\t\t\tconst outcomes = new Map([\n\t\t\t\t['accepted', types.ChatEditingSessionActionOutcome.Accepted],\n\t\t\t\t['rejected', types.ChatEditingSessionActionOutcome.Rejected],\n\t\t\t\t['saved', types.ChatEditingSessionActionOutcome.Saved],\n\t\t\t]);\n\n\t\t\treturn {\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'chatEditingSessionAction',\n\t\t\t\t\toutcome: outcomes.get(event.action.outcome) ?? types.ChatEditingSessionActionOutcome.Rejected,\n\t\t\t\t\turi: URI.revive(event.action.uri),\n\t\t\t\t\thasRemainingEdits: event.action.hasRemainingEdits\n\t\t\t\t}, result: ehResult\n\t\t\t};\n\t\t} else if (event.action.kind === 'chatEditingHunkAction') {\n\t\t\tconst outcomes = new Map([\n\t\t\t\t['accepted', types.ChatEditingSessionActionOutcome.Accepted],\n\t\t\t\t['rejected', types.ChatEditingSessionActionOutcome.Rejected],\n\t\t\t]);\n\n\t\t\treturn {\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'chatEditingHunkAction',\n\t\t\t\t\toutcome: outcomes.get(event.action.outcome) ?? types.ChatEditingSessionActionOutcome.Rejected,\n\t\t\t\t\turi: URI.revive(event.action.uri),\n\t\t\t\t\thasRemainingEdits: event.action.hasRemainingEdits,\n\t\t\t\t\tlineCount: event.action.lineCount,\n\t\t\t\t\tlinesAdded: event.action.linesAdded,\n\t\t\t\t\tlinesRemoved: event.action.linesRemoved\n\t\t\t\t}, result: ehResult\n\t\t\t};\n\t\t} else {\n\t\t\treturn { action: event.action, result: ehResult };\n\t\t}\n\t}\n}\n\nexport namespace TerminalQuickFix {\n\texport function from(quickFix: vscode.TerminalQuickFixTerminalCommand | vscode.TerminalQuickFixOpener | vscode.Command, converter: Command.ICommandsConverter, disposables: DisposableStore): extHostProtocol.ITerminalQuickFixTerminalCommandDto | extHostProtocol.ITerminalQuickFixOpenerDto | extHostProtocol.ICommandDto | undefined {\n\t\tif ('terminalCommand' in quickFix) {\n\t\t\treturn { terminalCommand: quickFix.terminalCommand, shouldExecute: quickFix.shouldExecute };\n\t\t}\n\t\tif ('uri' in quickFix) {\n\t\t\treturn { uri: quickFix.uri };\n\t\t}\n\t\treturn converter.toInternal(quickFix, disposables);\n\t}\n}\nexport namespace TerminalCompletionItemDto {\n\texport function from(item: vscode.TerminalCompletionItem): extHostProtocol.ITerminalCompletionItemDto {\n\t\treturn {\n\t\t\t...item,\n\t\t\tdocumentation: MarkdownString.fromStrict(item.documentation),\n\t\t};\n\t}\n}\n\nexport namespace TerminalCompletionList {\n\texport function from(completions: vscode.TerminalCompletionList | vscode.TerminalCompletionItem[], pathSeparator: string): extHostProtocol.TerminalCompletionListDto {\n\t\tif (Array.isArray(completions)) {\n\t\t\treturn {\n\t\t\t\titems: completions.map(i => TerminalCompletionItemDto.from(i)),\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\titems: completions.items.map(i => TerminalCompletionItemDto.from(i)),\n\t\t\tresourceOptions: completions.resourceOptions ? TerminalCompletionResourceOptions.from(completions.resourceOptions, pathSeparator) : undefined,\n\t\t};\n\t}\n}\n\nexport namespace TerminalCompletionResourceOptions {\n\texport function from(resourceOptions: vscode.TerminalCompletionResourceOptions, pathSeparator: string): extHostProtocol.TerminalCompletionResourceOptionsDto {\n\t\treturn {\n\t\t\t...resourceOptions,\n\t\t\tpathSeparator,\n\t\t\tcwd: resourceOptions.cwd,\n\t\t\tglobPattern: GlobPattern.from(resourceOptions.globPattern) ?? undefined\n\t\t};\n\t}\n}\n\nexport namespace PartialAcceptInfo {\n\texport function to(info: languages.PartialAcceptInfo): types.PartialAcceptInfo {\n\t\treturn {\n\t\t\tkind: PartialAcceptTriggerKind.to(info.kind),\n\t\t\tacceptedLength: info.acceptedLength,\n\t\t};\n\t}\n}\n\nexport namespace PartialAcceptTriggerKind {\n\texport function to(kind: languages.PartialAcceptTriggerKind): types.PartialAcceptTriggerKind {\n\t\tswitch (kind) {\n\t\t\tcase languages.PartialAcceptTriggerKind.Word:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Word;\n\t\t\tcase languages.PartialAcceptTriggerKind.Line:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Line;\n\t\t\tcase languages.PartialAcceptTriggerKind.Suggest:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Suggest;\n\t\t\tdefault:\n\t\t\t\treturn types.PartialAcceptTriggerKind.Unknown;\n\t\t}\n\t}\n}\n\nexport namespace InlineCompletionEndOfLifeReason {\n\texport function to<T>(reason: languages.InlineCompletionEndOfLifeReason<T>, convertFn: (item: T) => vscode.InlineCompletionItem | undefined): vscode.InlineCompletionEndOfLifeReason {\n\t\tif (reason.kind === languages.InlineCompletionEndOfLifeReasonKind.Ignored) {\n\t\t\tconst supersededBy = reason.supersededBy ? convertFn(reason.supersededBy) : undefined;\n\t\t\treturn {\n\t\t\t\tkind: types.InlineCompletionEndOfLifeReasonKind.Ignored,\n\t\t\t\tsupersededBy: supersededBy,\n\t\t\t\tuserTypingDisagreed: reason.userTypingDisagreed,\n\t\t\t};\n\t\t} else if (reason.kind === languages.InlineCompletionEndOfLifeReasonKind.Accepted) {\n\t\t\treturn {\n\t\t\t\tkind: types.InlineCompletionEndOfLifeReasonKind.Accepted,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tkind: types.InlineCompletionEndOfLifeReasonKind.Rejected,\n\t\t};\n\t}\n}\n\nexport namespace InlineCompletionHintStyle {\n\texport function from(value: vscode.InlineCompletionDisplayLocationKind): languages.InlineCompletionHintStyle {\n\t\tif (value === types.InlineCompletionDisplayLocationKind.Label) {\n\t\t\treturn languages.InlineCompletionHintStyle.Label;\n\t\t} else {\n\t\t\treturn languages.InlineCompletionHintStyle.Code;\n\t\t}\n\t}\n\n\texport function to(kind: languages.InlineCompletionHintStyle): types.InlineCompletionDisplayLocationKind {\n\t\tswitch (kind) {\n\t\t\tcase languages.InlineCompletionHintStyle.Label:\n\t\t\t\treturn types.InlineCompletionDisplayLocationKind.Label;\n\t\t\tdefault:\n\t\t\t\treturn types.InlineCompletionDisplayLocationKind.Code;\n\t\t}\n\t}\n}\n\nexport namespace DebugTreeItem {\n\texport function from(item: vscode.DebugTreeItem, id: number): IDebugVisualizationTreeItem {\n\t\treturn {\n\t\t\tid,\n\t\t\tlabel: item.label,\n\t\t\tdescription: item.description,\n\t\t\tcanEdit: item.canEdit,\n\t\t\tcollapsibleState: (item.collapsibleState || DebugTreeItemCollapsibleState.None) as DebugTreeItemCollapsibleState,\n\t\t\tcontextValue: item.contextValue,\n\t\t};\n\t}\n}\n\nexport namespace LanguageModelToolSource {\n\texport function to(source: Dto<ToolDataSource>): vscode.LanguageModelToolInformation['source'] {\n\t\tif (source.type === 'mcp') {\n\t\t\treturn new types.LanguageModelToolMCPSource(source.label, source.serverLabel || source.label, source.instructions);\n\t\t} else if (source.type === 'extension') {\n\t\t\treturn new types.LanguageModelToolExtensionSource(source.extensionId.value, source.label);\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nexport namespace LanguageModelToolResult {\n\texport function to(result: IToolResult): vscode.LanguageModelToolResult {\n\t\treturn new types.LanguageModelToolResult(result.content.map(item => {\n\t\t\tif (item.kind === 'text') {\n\t\t\t\treturn new types.LanguageModelTextPart(item.value, item.audience);\n\t\t\t} else if (item.kind === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(item.value.data.buffer, item.value.mimeType, item.audience);\n\t\t\t} else {\n\t\t\t\treturn new types.LanguageModelPromptTsxPart(item.value);\n\t\t\t}\n\t\t}));\n\t}\n\n\texport function from(result: vscode.ExtendedLanguageModelToolResult, extension: IExtensionDescription): Dto<IToolResult> | SerializableObjectWithBuffers<Dto<IToolResult>> {\n\t\tif (result.toolResultMessage) {\n\t\t\tcheckProposedApiEnabled(extension, 'chatParticipantPrivate');\n\t\t}\n\n\t\tconst checkAudienceApi = (item: LanguageModelTextPart | LanguageModelDataPart) => {\n\t\t\tif (item.audience) {\n\t\t\t\tcheckProposedApiEnabled(extension, 'languageModelToolResultAudience');\n\t\t\t}\n\t\t};\n\n\t\tlet hasBuffers = false;\n\t\tconst dto: Dto<IToolResult> = {\n\t\t\tcontent: result.content.map(item => {\n\t\t\t\tif (item instanceof types.LanguageModelTextPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'text',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'promptTsx',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelDataPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\thasBuffers = true;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'data',\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tmimeType: item.mimeType,\n\t\t\t\t\t\t\tdata: VSBuffer.wrap(item.data)\n\t\t\t\t\t\t},\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unknown LanguageModelToolResult part type');\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttoolResultMessage: MarkdownString.fromStrict(result.toolResultMessage),\n\t\t\ttoolResultDetails: result.toolResultDetails?.map(detail => URI.isUri(detail) ? detail : Location.from(detail as vscode.Location)),\n\t\t};\n\n\t\treturn hasBuffers ? new SerializableObjectWithBuffers(dto) : dto;\n\t}\n}\n\nexport namespace LanguageModelToolResult2 {\n\texport function to(result: IToolResult): vscode.LanguageModelToolResult2 {\n\t\tconst toolResult = new types.LanguageModelToolResult2(result.content.map(item => {\n\t\t\tif (item.kind === 'text') {\n\t\t\t\treturn new types.LanguageModelTextPart(item.value, item.audience);\n\t\t\t} else if (item.kind === 'data') {\n\t\t\t\treturn new types.LanguageModelDataPart(item.value.data.buffer, item.value.mimeType, item.audience);\n\t\t\t} else {\n\t\t\t\treturn new types.LanguageModelPromptTsxPart(item.value);\n\t\t\t}\n\t\t}));\n\n\t\tif (result.toolMetadata) {\n\t\t\t(toolResult as vscode.ExtendedLanguageModelToolResult).toolMetadata = result.toolMetadata;\n\t\t}\n\n\t\treturn toolResult;\n\t}\n\n\texport function from(result: vscode.ExtendedLanguageModelToolResult2, extension: IExtensionDescription): Dto<IToolResult> | SerializableObjectWithBuffers<Dto<IToolResult>> {\n\t\tif (result.toolResultMessage) {\n\t\t\tcheckProposedApiEnabled(extension, 'chatParticipantPrivate');\n\t\t}\n\n\t\tconst checkAudienceApi = (item: LanguageModelTextPart | LanguageModelDataPart) => {\n\t\t\tif (item.audience) {\n\t\t\t\tcheckProposedApiEnabled(extension, 'languageModelToolResultAudience');\n\t\t\t}\n\t\t};\n\n\t\tlet hasBuffers = false;\n\t\tlet detailsDto: Dto<Array<URI | types.Location> | IToolResultInputOutputDetails | IToolResultOutputDetails | undefined> = undefined;\n\t\tif (Array.isArray(result.toolResultDetails)) {\n\t\t\tdetailsDto = result.toolResultDetails?.map(detail => {\n\t\t\t\treturn URI.isUri(detail) ? detail : Location.from(detail as vscode.Location);\n\t\t\t});\n\t\t} else {\n\t\t\tif (result.toolResultDetails2) {\n\t\t\t\tdetailsDto = {\n\t\t\t\t\toutput: {\n\t\t\t\t\t\ttype: 'data',\n\t\t\t\t\t\tmimeType: (result.toolResultDetails2 as vscode.ToolResultDataOutput).mime,\n\t\t\t\t\t\tvalue: VSBuffer.wrap((result.toolResultDetails2 as vscode.ToolResultDataOutput).value),\n\t\t\t\t\t}\n\t\t\t\t} satisfies IToolResultOutputDetails;\n\t\t\t\thasBuffers = true;\n\t\t\t}\n\t\t}\n\n\t\tconst dto: Dto<IToolResult> = {\n\t\t\tcontent: result.content.map(item => {\n\t\t\t\tif (item instanceof types.LanguageModelTextPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'text',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelPromptTsxPart) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'promptTsx',\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t};\n\t\t\t\t} else if (item instanceof types.LanguageModelDataPart) {\n\t\t\t\t\tcheckAudienceApi(item);\n\t\t\t\t\thasBuffers = true;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkind: 'data',\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tmimeType: item.mimeType,\n\t\t\t\t\t\t\tdata: VSBuffer.wrap(item.data)\n\t\t\t\t\t\t},\n\t\t\t\t\t\taudience: item.audience\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unknown LanguageModelToolResult part type');\n\t\t\t\t}\n\t\t\t}),\n\t\t\ttoolResultMessage: MarkdownString.fromStrict(result.toolResultMessage),\n\t\t\ttoolResultDetails: detailsDto,\n\t\t\ttoolMetadata: result.toolMetadata,\n\t\t};\n\n\t\treturn hasBuffers ? new SerializableObjectWithBuffers(dto) : dto;\n\t}\n}\n\nexport namespace IconPath {\n\texport function fromThemeIcon(iconPath: vscode.ThemeIcon): languages.IconPath {\n\t\treturn iconPath;\n\t}\n\n\t/**\n\t * Converts a {@link vscode.IconPath} to an {@link extHostProtocol.IconPathDto}.\n\t * @note This function will tolerate strings specified instead of URIs in IconPath for historical reasons.\n\t * Such strings are treated as file paths and converted using {@link URI.file} function, not {@link URI.from}.\n\t * See https://github.com/microsoft/vscode/issues/110432#issuecomment-726144556 for context.\n\t */\n\texport function from(value: undefined): undefined;\n\texport function from(value: vscode.IconPath): extHostProtocol.IconPathDto;\n\texport function from(value: vscode.IconPath | undefined): extHostProtocol.IconPathDto | undefined;\n\texport function from(value: vscode.IconPath | undefined): extHostProtocol.IconPathDto | undefined {\n\t\tif (!value) {\n\t\t\treturn undefined;\n\t\t} else if (ThemeIcon.isThemeIcon(value)) {\n\t\t\treturn value;\n\t\t} else if (URI.isUri(value)) {\n\t\t\treturn value;\n\t\t} else if (typeof value === 'string') {\n\t\t\treturn URI.file(value);\n\t\t} else if (typeof value === 'object' && value !== null && 'dark' in value) {\n\t\t\tconst dark = typeof value.dark === 'string' ? URI.file(value.dark) : value.dark;\n\t\t\tconst light = typeof value.light === 'string' ? URI.file(value.light) : value.light;\n\t\t\treturn !dark ? undefined : { dark, light: light ?? dark };\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t/**\n\t * Converts a {@link extHostProtocol.IconPathDto} to a {@link vscode.IconPath}.\n\t * @note This is a strict conversion and we assume types are correct in this case.\n\t */\n\texport function to(value: undefined): undefined;\n\texport function to(value: extHostProtocol.IconPathDto): vscode.IconPath;\n\texport function to(value: extHostProtocol.IconPathDto | undefined): vscode.IconPath | undefined;\n\texport function to(value: extHostProtocol.IconPathDto | undefined): vscode.IconPath | undefined {\n\t\tif (!value) {\n\t\t\treturn undefined;\n\t\t} else if (ThemeIcon.isThemeIcon(value)) {\n\t\t\treturn value;\n\t\t} else if (isUriComponents(value)) {\n\t\t\treturn URI.revive(value);\n\t\t} else {\n\t\t\tconst icon = value as { light: UriComponents; dark: UriComponents };\n\t\t\treturn {\n\t\t\t\tlight: URI.revive(icon.light),\n\t\t\t\tdark: URI.revive(icon.dark)\n\t\t\t};\n\t\t}\n\t}\n}\n\nexport namespace AiSettingsSearch {\n\texport function fromSettingsSearchResult(result: vscode.SettingsSearchResult): AiSettingsSearchResult {\n\t\treturn {\n\t\t\tquery: result.query,\n\t\t\tkind: fromSettingsSearchResultKind(result.kind),\n\t\t\tsettings: result.settings\n\t\t};\n\t}\n\n\tfunction fromSettingsSearchResultKind(kind: number): AiSettingsSearchResultKind {\n\t\tswitch (kind) {\n\t\t\tcase AiSettingsSearchResultKind.EMBEDDED:\n\t\t\t\treturn AiSettingsSearchResultKind.EMBEDDED;\n\t\t\tcase AiSettingsSearchResultKind.LLM_RANKED:\n\t\t\t\treturn AiSettingsSearchResultKind.LLM_RANKED;\n\t\t\tcase AiSettingsSearchResultKind.CANCELED:\n\t\t\t\treturn AiSettingsSearchResultKind.CANCELED;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unknown AiSettingsSearchResultKind');\n\t\t}\n\t}\n}\n\nexport namespace McpServerDefinition {\n\tfunction isHttpConfig(candidate: vscode.McpServerDefinition): candidate is vscode.McpHttpServerDefinition {\n\t\treturn !!(candidate as vscode.McpHttpServerDefinition).uri;\n\t}\n\n\texport function from(item: vscode.McpServerDefinition): McpServerLaunch.Serialized {\n\t\treturn McpServerLaunch.toSerialized(\n\t\t\tisHttpConfig(item)\n\t\t\t\t? {\n\t\t\t\t\ttype: McpServerTransportType.HTTP,\n\t\t\t\t\turi: item.uri,\n\t\t\t\t\theaders: Object.entries(item.headers),\n\t\t\t\t\tauthentication: (item as vscode.McpHttpServerDefinition2).authentication ? {\n\t\t\t\t\t\tproviderId: (item as vscode.McpHttpServerDefinition2).authentication!.providerId,\n\t\t\t\t\t\tscopes: (item as vscode.McpHttpServerDefinition2).authentication!.scopes\n\t\t\t\t\t} : undefined,\n\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\ttype: McpServerTransportType.Stdio,\n\t\t\t\t\tcwd: item.cwd?.fsPath,\n\t\t\t\t\targs: item.args,\n\t\t\t\t\tcommand: item.command,\n\t\t\t\t\tenv: item.env,\n\t\t\t\t\tenvFile: undefined,\n\t\t\t\t}\n\t\t);\n\t}\n}\n\nexport namespace SourceControlInputBoxValidationType {\n\texport function from(type: number): InputValidationType {\n\t\tswitch (type) {\n\t\t\tcase types.SourceControlInputBoxValidationType.Error:\n\t\t\t\treturn InputValidationType.Error;\n\t\t\tcase types.SourceControlInputBoxValidationType.Warning:\n\t\t\t\treturn InputValidationType.Warning;\n\t\t\tcase types.SourceControlInputBoxValidationType.Information:\n\t\t\t\treturn InputValidationType.Information;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unknown SourceControlInputBoxValidationType');\n\t\t}\n\t}\n}\n"]}