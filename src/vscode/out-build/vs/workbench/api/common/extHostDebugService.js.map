{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/common/extHostDebugService.ts","vs/workbench/api/common/extHostDebugService.ts"],"names":[],"mappings":"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","file":"extHostDebugService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { coalesce } from '../../../base/common/arrays.js';\nimport { asPromise } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable as DisposableCls, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon as ThemeIconUtils } from '../../../base/common/themables.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { ISignService } from '../../../platform/sign/common/sign.js';\nimport { IWorkspaceFolderData } from '../../../platform/workspace/common/workspace.js';\nimport { AbstractDebugAdapter } from '../../contrib/debug/common/abstractDebugAdapter.js';\nimport { DebugVisualizationType, IAdapterDescriptor, IConfig, IDebugAdapter, IDebugAdapterExecutable, IDebugAdapterImpl, IDebugAdapterNamedPipeServer, IDebugAdapterServer, IDebuggerContribution, IDebugVisualization, IDebugVisualizationContext, IDebugVisualizationTreeItem, MainThreadDebugVisualization } from '../../contrib/debug/common/debug.js';\nimport { convertToDAPaths, convertToVSCPaths, isDebuggerMainContribution } from '../../contrib/debug/common/debugUtils.js';\nimport { ExtensionDescriptionRegistry } from '../../services/extensions/common/extensionDescriptionRegistry.js';\nimport { Dto } from '../../services/extensions/common/proxyIdentifier.js';\nimport { DebugSessionUUID, ExtHostDebugServiceShape, IBreakpointsDeltaDto, IDebugSessionDto, IFunctionBreakpointDto, ISourceMultiBreakpointDto, IStackFrameFocusDto, IThreadFocusDto, MainContext, MainThreadDebugServiceShape, MainThreadTelemetryShape } from './extHost.protocol.js';\nimport { IExtHostCommands } from './extHostCommands.js';\nimport { IExtHostConfiguration } from './extHostConfiguration.js';\nimport { IExtHostEditorTabs } from './extHostEditorTabs.js';\nimport { IExtHostExtensionService } from './extHostExtensionService.js';\nimport { IExtHostRpcService } from './extHostRpcService.js';\nimport { IExtHostTesting } from './extHostTesting.js';\nimport * as Convert from './extHostTypeConverters.js';\nimport { Breakpoint, DataBreakpoint, DebugAdapterExecutable, DebugAdapterInlineImplementation, DebugAdapterNamedPipeServer, DebugAdapterServer, DebugConsoleMode, DebugStackFrame, DebugThread, Disposable, FunctionBreakpoint, Location, Position, setBreakpointId, SourceBreakpoint, ThemeIcon } from './extHostTypes.js';\nimport { IExtHostVariableResolverProvider } from './extHostVariableResolverService.js';\nimport { IExtHostWorkspace } from './extHostWorkspace.js';\n\nexport const IExtHostDebugService = createDecorator<IExtHostDebugService>('IExtHostDebugService');\n\nexport interface IExtHostDebugService extends ExtHostDebugServiceShape {\n\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidStartDebugSession: Event<vscode.DebugSession>;\n\treadonly onDidTerminateDebugSession: Event<vscode.DebugSession>;\n\treadonly onDidChangeActiveDebugSession: Event<vscode.DebugSession | undefined>;\n\tactiveDebugSession: vscode.DebugSession | undefined;\n\tactiveDebugConsole: vscode.DebugConsole;\n\treadonly onDidReceiveDebugSessionCustomEvent: Event<vscode.DebugSessionCustomEvent>;\n\treadonly onDidChangeBreakpoints: Event<vscode.BreakpointsChangeEvent>;\n\tbreakpoints: vscode.Breakpoint[];\n\treadonly onDidChangeActiveStackItem: Event<vscode.DebugThread | vscode.DebugStackFrame | undefined>;\n\tactiveStackItem: vscode.DebugThread | vscode.DebugStackFrame | undefined;\n\n\taddBreakpoints(breakpoints0: readonly vscode.Breakpoint[]): Promise<void>;\n\tremoveBreakpoints(breakpoints0: readonly vscode.Breakpoint[]): Promise<void>;\n\tstartDebugging(folder: vscode.WorkspaceFolder | undefined, nameOrConfig: string | vscode.DebugConfiguration, options: vscode.DebugSessionOptions): Promise<boolean>;\n\tstopDebugging(session?: vscode.DebugSession): Promise<void>;\n\tregisterDebugConfigurationProvider(type: string, provider: vscode.DebugConfigurationProvider, trigger: vscode.DebugConfigurationProviderTriggerKind): vscode.Disposable;\n\tregisterDebugAdapterDescriptorFactory(extension: IExtensionDescription, type: string, factory: vscode.DebugAdapterDescriptorFactory): vscode.Disposable;\n\tregisterDebugAdapterTrackerFactory(type: string, factory: vscode.DebugAdapterTrackerFactory): vscode.Disposable;\n\tregisterDebugVisualizationProvider<T extends vscode.DebugVisualization>(extension: IExtensionDescription, id: string, provider: vscode.DebugVisualizationProvider<T>): vscode.Disposable;\n\tregisterDebugVisualizationTree<T extends vscode.DebugTreeItem>(extension: IExtensionDescription, id: string, provider: vscode.DebugVisualizationTree<T>): vscode.Disposable;\n\tasDebugSourceUri(source: vscode.DebugProtocolSource, session?: vscode.DebugSession): vscode.Uri;\n}\n\nexport abstract class ExtHostDebugServiceBase extends DisposableCls implements IExtHostDebugService, ExtHostDebugServiceShape {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _configProviderHandleCounter: number;\n\tprivate _configProviders: ConfigProviderTuple[];\n\n\tprivate _adapterFactoryHandleCounter: number;\n\tprivate _adapterFactories: DescriptorFactoryTuple[];\n\n\tprivate _trackerFactoryHandleCounter: number;\n\tprivate _trackerFactories: TrackerFactoryTuple[];\n\n\tprivate _debugServiceProxy: MainThreadDebugServiceShape;\n\tprivate _debugSessions: Map<DebugSessionUUID, ExtHostDebugSession> = new Map<DebugSessionUUID, ExtHostDebugSession>();\n\n\tprivate readonly _onDidStartDebugSession: Emitter<vscode.DebugSession>;\n\tget onDidStartDebugSession(): Event<vscode.DebugSession> { return this._onDidStartDebugSession.event; }\n\n\tprivate readonly _onDidTerminateDebugSession: Emitter<vscode.DebugSession>;\n\tget onDidTerminateDebugSession(): Event<vscode.DebugSession> { return this._onDidTerminateDebugSession.event; }\n\n\tprivate readonly _onDidChangeActiveDebugSession: Emitter<vscode.DebugSession | undefined>;\n\tget onDidChangeActiveDebugSession(): Event<vscode.DebugSession | undefined> { return this._onDidChangeActiveDebugSession.event; }\n\n\tprivate _activeDebugSession: ExtHostDebugSession | undefined;\n\tget activeDebugSession(): vscode.DebugSession | undefined { return this._activeDebugSession?.api; }\n\n\tprivate readonly _onDidReceiveDebugSessionCustomEvent: Emitter<vscode.DebugSessionCustomEvent>;\n\tget onDidReceiveDebugSessionCustomEvent(): Event<vscode.DebugSessionCustomEvent> { return this._onDidReceiveDebugSessionCustomEvent.event; }\n\n\tprivate _activeDebugConsole: ExtHostDebugConsole;\n\tget activeDebugConsole(): vscode.DebugConsole { return this._activeDebugConsole.value; }\n\n\tprivate _breakpoints: Map<string, vscode.Breakpoint>;\n\n\tprivate readonly _onDidChangeBreakpoints: Emitter<vscode.BreakpointsChangeEvent>;\n\n\tprivate _activeStackItem: vscode.DebugThread | vscode.DebugStackFrame | undefined;\n\tprivate readonly _onDidChangeActiveStackItem: Emitter<vscode.DebugThread | vscode.DebugStackFrame | undefined>;\n\n\tprivate _debugAdapters: Map<number, IDebugAdapter>;\n\tprivate _debugAdaptersTrackers: Map<number, vscode.DebugAdapterTracker>;\n\n\tprivate _debugVisualizationTreeItemIdsCounter = 0;\n\tprivate readonly _debugVisualizationProviders = new Map<string, vscode.DebugVisualizationProvider>();\n\tprivate readonly _debugVisualizationTrees = new Map<string, vscode.DebugVisualizationTree>();\n\tprivate readonly _debugVisualizationTreeItemIds = new WeakMap<vscode.DebugTreeItem, number>();\n\tprivate readonly _debugVisualizationElements = new Map<number, { provider: string; item: vscode.DebugTreeItem; children?: number[] }>();\n\n\tprivate _signService: ISignService | undefined;\n\n\tprivate readonly _visualizers = new Map<number, { v: vscode.DebugVisualization; provider: vscode.DebugVisualizationProvider; extensionId: string }>();\n\tprivate _visualizerIdCounter = 0;\n\n\tprivate _telemetryProxy: MainThreadTelemetryShape;\n\n\tconstructor(\n\t\t@IExtHostRpcService extHostRpcService: IExtHostRpcService,\n\t\t@IExtHostWorkspace protected readonly _workspaceService: IExtHostWorkspace,\n\t\t@IExtHostExtensionService private readonly _extensionService: IExtHostExtensionService,\n\t\t@IExtHostConfiguration protected readonly _configurationService: IExtHostConfiguration,\n\t\t@IExtHostEditorTabs protected readonly _editorTabs: IExtHostEditorTabs,\n\t\t@IExtHostVariableResolverProvider private readonly _variableResolver: IExtHostVariableResolverProvider,\n\t\t@IExtHostCommands private readonly _commands: IExtHostCommands,\n\t\t@IExtHostTesting private readonly _testing: IExtHostTesting,\n\t) {\n\t\tsuper();\n\n\t\tthis._configProviderHandleCounter = 0;\n\t\tthis._configProviders = [];\n\n\t\tthis._adapterFactoryHandleCounter = 0;\n\t\tthis._adapterFactories = [];\n\n\t\tthis._trackerFactoryHandleCounter = 0;\n\t\tthis._trackerFactories = [];\n\n\t\tthis._debugAdapters = new Map();\n\t\tthis._debugAdaptersTrackers = new Map();\n\n\t\tthis._onDidStartDebugSession = this._register(new Emitter<vscode.DebugSession>());\n\t\tthis._onDidTerminateDebugSession = this._register(new Emitter<vscode.DebugSession>());\n\t\tthis._onDidChangeActiveDebugSession = this._register(new Emitter<vscode.DebugSession | undefined>());\n\t\tthis._onDidReceiveDebugSessionCustomEvent = this._register(new Emitter<vscode.DebugSessionCustomEvent>());\n\n\t\tthis._debugServiceProxy = extHostRpcService.getProxy(MainContext.MainThreadDebugService);\n\n\t\tthis._onDidChangeBreakpoints = this._register(new Emitter<vscode.BreakpointsChangeEvent>());\n\n\t\tthis._onDidChangeActiveStackItem = this._register(new Emitter<vscode.DebugThread | vscode.DebugStackFrame | undefined>());\n\n\t\tthis._activeDebugConsole = new ExtHostDebugConsole(this._debugServiceProxy);\n\n\t\tthis._breakpoints = new Map<string, vscode.Breakpoint>();\n\n\t\tthis._extensionService.getExtensionRegistry().then((extensionRegistry: ExtensionDescriptionRegistry) => {\n\t\t\tthis._register(extensionRegistry.onDidChange(_ => {\n\t\t\t\tthis.registerAllDebugTypes(extensionRegistry);\n\t\t\t}));\n\t\t\tthis.registerAllDebugTypes(extensionRegistry);\n\t\t});\n\n\t\tthis._telemetryProxy = extHostRpcService.getProxy(MainContext.MainThreadTelemetry);\n\t}\n\n\tpublic async $getVisualizerTreeItem(treeId: string, element: IDebugVisualizationContext): Promise<IDebugVisualizationTreeItem | undefined> {\n\t\tconst context = this.hydrateVisualizationContext(element);\n\t\tif (!context) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst item = await this._debugVisualizationTrees.get(treeId)?.getTreeItem?.(context);\n\t\treturn item ? this.convertVisualizerTreeItem(treeId, item) : undefined;\n\t}\n\n\tpublic registerDebugVisualizationTree<T extends vscode.DebugTreeItem>(manifest: IExtensionDescription, id: string, provider: vscode.DebugVisualizationTree<T>): vscode.Disposable {\n\t\tconst extensionId = ExtensionIdentifier.toKey(manifest.identifier);\n\t\tconst key = this.extensionVisKey(extensionId, id);\n\t\tif (this._debugVisualizationProviders.has(key)) {\n\t\t\tthrow new Error(`A debug visualization provider with id '${id}' is already registered`);\n\t\t}\n\n\t\tthis._debugVisualizationTrees.set(key, provider);\n\t\tthis._debugServiceProxy.$registerDebugVisualizerTree(key, !!provider.editItem);\n\t\treturn toDisposable(() => {\n\t\t\tthis._debugServiceProxy.$unregisterDebugVisualizerTree(key);\n\t\t\tthis._debugVisualizationTrees.delete(id);\n\t\t});\n\t}\n\n\tpublic async $getVisualizerTreeItemChildren(treeId: string, element: number): Promise<IDebugVisualizationTreeItem[]> {\n\t\tconst item = this._debugVisualizationElements.get(element)?.item;\n\t\tif (!item) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst children = await this._debugVisualizationTrees.get(treeId)?.getChildren?.(item);\n\t\treturn children?.map(i => this.convertVisualizerTreeItem(treeId, i)) || [];\n\t}\n\n\tpublic async $editVisualizerTreeItem(element: number, value: string): Promise<IDebugVisualizationTreeItem | undefined> {\n\t\tconst e = this._debugVisualizationElements.get(element);\n\t\tif (!e) { return undefined; }\n\n\t\tconst r = await this._debugVisualizationTrees.get(e.provider)?.editItem?.(e.item, value);\n\t\treturn this.convertVisualizerTreeItem(e.provider, r || e.item);\n\t}\n\n\tpublic $disposeVisualizedTree(element: number): void {\n\t\tconst root = this._debugVisualizationElements.get(element);\n\t\tif (!root) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst queue = [root.children];\n\t\tfor (const children of queue) {\n\t\t\tif (children) {\n\t\t\t\tfor (const child of children) {\n\t\t\t\t\tqueue.push(this._debugVisualizationElements.get(child)?.children);\n\t\t\t\t\tthis._debugVisualizationElements.delete(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate convertVisualizerTreeItem(treeId: string, item: vscode.DebugTreeItem): IDebugVisualizationTreeItem {\n\t\tlet id = this._debugVisualizationTreeItemIds.get(item);\n\t\tif (!id) {\n\t\t\tid = this._debugVisualizationTreeItemIdsCounter++;\n\t\t\tthis._debugVisualizationTreeItemIds.set(item, id);\n\t\t\tthis._debugVisualizationElements.set(id, { provider: treeId, item });\n\t\t}\n\n\t\treturn Convert.DebugTreeItem.from(item, id);\n\t}\n\n\tpublic asDebugSourceUri(src: vscode.DebugProtocolSource, session?: vscode.DebugSession): URI {\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst source = <any>src;\n\n\t\tif (typeof source.sourceReference === 'number' && source.sourceReference > 0) {\n\t\t\t// src can be retrieved via DAP's \"source\" request\n\n\t\t\tlet debug = `debug:${encodeURIComponent(source.path || '')}`;\n\t\t\tlet sep = '?';\n\n\t\t\tif (session) {\n\t\t\t\tdebug += `${sep}session=${encodeURIComponent(session.id)}`;\n\t\t\t\tsep = '&';\n\t\t\t}\n\n\t\t\tdebug += `${sep}ref=${source.sourceReference}`;\n\n\t\t\treturn URI.parse(debug);\n\t\t} else if (source.path) {\n\t\t\t// src is just a local file path\n\t\t\treturn URI.file(source.path);\n\t\t} else {\n\t\t\tthrow new Error(`cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.`);\n\t\t}\n\t}\n\n\tprivate registerAllDebugTypes(extensionRegistry: ExtensionDescriptionRegistry) {\n\n\t\tconst debugTypes: string[] = [];\n\n\t\tfor (const ed of extensionRegistry.getAllExtensionDescriptions()) {\n\t\t\tif (ed.contributes) {\n\t\t\t\tconst debuggers = <IDebuggerContribution[]>ed.contributes['debuggers'];\n\t\t\t\tif (debuggers && debuggers.length > 0) {\n\t\t\t\t\tfor (const dbg of debuggers) {\n\t\t\t\t\t\tif (isDebuggerMainContribution(dbg)) {\n\t\t\t\t\t\t\tdebugTypes.push(dbg.type);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._debugServiceProxy.$registerDebugTypes(debugTypes);\n\t}\n\n\t// extension debug API\n\n\n\tget activeStackItem(): vscode.DebugThread | vscode.DebugStackFrame | undefined {\n\t\treturn this._activeStackItem;\n\t}\n\n\tget onDidChangeActiveStackItem(): Event<vscode.DebugThread | vscode.DebugStackFrame | undefined> {\n\t\treturn this._onDidChangeActiveStackItem.event;\n\t}\n\n\tget onDidChangeBreakpoints(): Event<vscode.BreakpointsChangeEvent> {\n\t\treturn this._onDidChangeBreakpoints.event;\n\t}\n\n\tget breakpoints(): vscode.Breakpoint[] {\n\t\tconst result: vscode.Breakpoint[] = [];\n\t\tthis._breakpoints.forEach(bp => result.push(bp));\n\t\treturn result;\n\t}\n\n\tpublic async $resolveDebugVisualizer(id: number, token: CancellationToken): Promise<MainThreadDebugVisualization> {\n\t\tconst visualizer = this._visualizers.get(id);\n\t\tif (!visualizer) {\n\t\t\tthrow new Error(`No debug visualizer found with id '${id}'`);\n\t\t}\n\n\t\tlet { v, provider, extensionId } = visualizer;\n\t\tif (!v.visualization) {\n\t\t\tv = await provider.resolveDebugVisualization?.(v, token) || v;\n\t\t\tvisualizer.v = v;\n\t\t}\n\n\t\tif (!v.visualization) {\n\t\t\tthrow new Error(`No visualization returned from resolveDebugVisualization in '${provider}'`);\n\t\t}\n\n\t\treturn this.serializeVisualization(extensionId, v.visualization)!;\n\t}\n\n\tpublic async $executeDebugVisualizerCommand(id: number): Promise<void> {\n\t\tconst visualizer = this._visualizers.get(id);\n\t\tif (!visualizer) {\n\t\t\tthrow new Error(`No debug visualizer found with id '${id}'`);\n\t\t}\n\n\t\tconst command = visualizer.v.visualization;\n\t\tif (command && 'command' in command) {\n\t\t\tthis._commands.executeCommand(command.command, ...(command.arguments || []));\n\t\t}\n\t}\n\n\tprivate hydrateVisualizationContext(context: IDebugVisualizationContext): vscode.DebugVisualizationContext | undefined {\n\t\tconst session = this._debugSessions.get(context.sessionId);\n\t\treturn session && {\n\t\t\tsession: session.api,\n\t\t\tvariable: context.variable,\n\t\t\tcontainerId: context.containerId,\n\t\t\tframeId: context.frameId,\n\t\t\tthreadId: context.threadId,\n\t\t};\n\t}\n\n\tpublic async $provideDebugVisualizers(extensionId: string, id: string, context: IDebugVisualizationContext, token: CancellationToken): Promise<IDebugVisualization.Serialized[]> {\n\t\tconst contextHydrated = this.hydrateVisualizationContext(context);\n\t\tconst key = this.extensionVisKey(extensionId, id);\n\t\tconst provider = this._debugVisualizationProviders.get(key);\n\t\tif (!contextHydrated || !provider) {\n\t\t\treturn []; // probably ended in the meantime\n\t\t}\n\n\t\tconst visualizations = await provider.provideDebugVisualization(contextHydrated, token);\n\n\t\tif (!visualizations) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn visualizations.map(v => {\n\t\t\tconst id = ++this._visualizerIdCounter;\n\t\t\tthis._visualizers.set(id, { v, provider, extensionId });\n\t\t\tconst icon = v.iconPath ? this.getIconPathOrClass(v.iconPath) : undefined;\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: v.name,\n\t\t\t\ticonClass: icon?.iconClass,\n\t\t\t\ticonPath: icon?.iconPath,\n\t\t\t\tvisualization: this.serializeVisualization(extensionId, v.visualization),\n\t\t\t};\n\t\t});\n\t}\n\n\tpublic $disposeDebugVisualizers(ids: number[]): void {\n\t\tfor (const id of ids) {\n\t\t\tthis._visualizers.delete(id);\n\t\t}\n\t}\n\n\tpublic registerDebugVisualizationProvider<T extends vscode.DebugVisualization>(manifest: IExtensionDescription, id: string, provider: vscode.DebugVisualizationProvider<T>): vscode.Disposable {\n\t\tif (!manifest.contributes?.debugVisualizers?.some(r => r.id === id)) {\n\t\t\tthrow new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${id})`);\n\t\t}\n\n\t\tconst extensionId = ExtensionIdentifier.toKey(manifest.identifier);\n\t\tconst key = this.extensionVisKey(extensionId, id);\n\t\tif (this._debugVisualizationProviders.has(key)) {\n\t\t\tthrow new Error(`A debug visualization provider with id '${id}' is already registered`);\n\t\t}\n\n\t\tthis._debugVisualizationProviders.set(key, provider);\n\t\tthis._debugServiceProxy.$registerDebugVisualizer(extensionId, id);\n\t\treturn toDisposable(() => {\n\t\t\tthis._debugServiceProxy.$unregisterDebugVisualizer(extensionId, id);\n\t\t\tthis._debugVisualizationProviders.delete(id);\n\t\t});\n\t}\n\n\tpublic addBreakpoints(breakpoints0: vscode.Breakpoint[]): Promise<void> {\n\t\t// filter only new breakpoints\n\t\tconst breakpoints = breakpoints0.filter(bp => {\n\t\t\tconst id = bp.id;\n\t\t\tif (!this._breakpoints.has(id)) {\n\t\t\t\tthis._breakpoints.set(id, bp);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\t// send notification for added breakpoints\n\t\tthis.fireBreakpointChanges(breakpoints, [], []);\n\n\t\t// convert added breakpoints to DTOs\n\t\tconst dtos: Array<ISourceMultiBreakpointDto | IFunctionBreakpointDto> = [];\n\t\tconst map = new Map<string, ISourceMultiBreakpointDto>();\n\t\tfor (const bp of breakpoints) {\n\t\t\tif (bp instanceof SourceBreakpoint) {\n\t\t\t\tlet dto = map.get(bp.location.uri.toString());\n\t\t\t\tif (!dto) {\n\t\t\t\t\tdto = {\n\t\t\t\t\t\ttype: 'sourceMulti',\n\t\t\t\t\t\turi: bp.location.uri,\n\t\t\t\t\t\tlines: []\n\t\t\t\t\t} satisfies ISourceMultiBreakpointDto;\n\t\t\t\t\tmap.set(bp.location.uri.toString(), dto);\n\t\t\t\t\tdtos.push(dto);\n\t\t\t\t}\n\t\t\t\tdto.lines.push({\n\t\t\t\t\tid: bp.id,\n\t\t\t\t\tenabled: bp.enabled,\n\t\t\t\t\tcondition: bp.condition,\n\t\t\t\t\thitCondition: bp.hitCondition,\n\t\t\t\t\tlogMessage: bp.logMessage,\n\t\t\t\t\tline: bp.location.range.start.line,\n\t\t\t\t\tcharacter: bp.location.range.start.character,\n\t\t\t\t\tmode: bp.mode,\n\t\t\t\t});\n\t\t\t} else if (bp instanceof FunctionBreakpoint) {\n\t\t\t\tdtos.push({\n\t\t\t\t\ttype: 'function',\n\t\t\t\t\tid: bp.id,\n\t\t\t\t\tenabled: bp.enabled,\n\t\t\t\t\thitCondition: bp.hitCondition,\n\t\t\t\t\tlogMessage: bp.logMessage,\n\t\t\t\t\tcondition: bp.condition,\n\t\t\t\t\tfunctionName: bp.functionName,\n\t\t\t\t\tmode: bp.mode,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// send DTOs to VS Code\n\t\treturn this._debugServiceProxy.$registerBreakpoints(dtos);\n\t}\n\n\tpublic removeBreakpoints(breakpoints0: vscode.Breakpoint[]): Promise<void> {\n\t\t// remove from array\n\t\tconst breakpoints = breakpoints0.filter(b => this._breakpoints.delete(b.id));\n\n\t\t// send notification\n\t\tthis.fireBreakpointChanges([], breakpoints, []);\n\n\t\t// unregister with VS Code\n\t\tconst ids = breakpoints.filter(bp => bp instanceof SourceBreakpoint).map(bp => bp.id);\n\t\tconst fids = breakpoints.filter(bp => bp instanceof FunctionBreakpoint).map(bp => bp.id);\n\t\tconst dids = breakpoints.filter(bp => bp instanceof DataBreakpoint).map(bp => bp.id);\n\t\treturn this._debugServiceProxy.$unregisterBreakpoints(ids, fids, dids);\n\t}\n\n\tpublic startDebugging(folder: vscode.WorkspaceFolder | undefined, nameOrConfig: string | vscode.DebugConfiguration, options: vscode.DebugSessionOptions): Promise<boolean> {\n\t\tconst testRunMeta = options.testRun && this._testing.getMetadataForRun(options.testRun);\n\n\t\treturn this._debugServiceProxy.$startDebugging(folder ? folder.uri : undefined, nameOrConfig, {\n\t\t\tparentSessionID: options.parentSession ? options.parentSession.id : undefined,\n\t\t\tlifecycleManagedByParent: options.lifecycleManagedByParent,\n\t\t\trepl: options.consoleMode === DebugConsoleMode.MergeWithParent ? 'mergeWithParent' : 'separate',\n\t\t\tnoDebug: options.noDebug,\n\t\t\tcompact: options.compact,\n\t\t\tsuppressSaveBeforeStart: options.suppressSaveBeforeStart,\n\t\t\ttestRun: testRunMeta && {\n\t\t\t\trunId: testRunMeta.runId,\n\t\t\t\ttaskId: testRunMeta.taskId,\n\t\t\t},\n\n\t\t\t// Check debugUI for back-compat, #147264\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tsuppressDebugStatusbar: options.suppressDebugStatusbar ?? (options as any).debugUI?.simple,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tsuppressDebugToolbar: options.suppressDebugToolbar ?? (options as any).debugUI?.simple,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tsuppressDebugView: options.suppressDebugView ?? (options as any).debugUI?.simple,\n\t\t});\n\t}\n\n\tpublic stopDebugging(session?: vscode.DebugSession): Promise<void> {\n\t\treturn this._debugServiceProxy.$stopDebugging(session ? session.id : undefined);\n\t}\n\n\tpublic registerDebugConfigurationProvider(type: string, provider: vscode.DebugConfigurationProvider, trigger: vscode.DebugConfigurationProviderTriggerKind): vscode.Disposable {\n\n\t\tif (!provider) {\n\t\t\treturn new Disposable(() => { });\n\t\t}\n\n\t\tconst handle = this._configProviderHandleCounter++;\n\t\tthis._configProviders.push({ type, handle, provider });\n\n\t\tthis._debugServiceProxy.$registerDebugConfigurationProvider(type, trigger,\n\t\t\t!!provider.provideDebugConfigurations,\n\t\t\t!!provider.resolveDebugConfiguration,\n\t\t\t!!provider.resolveDebugConfigurationWithSubstitutedVariables,\n\t\t\thandle);\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._configProviders = this._configProviders.filter(p => p.provider !== provider);\t\t// remove\n\t\t\tthis._debugServiceProxy.$unregisterDebugConfigurationProvider(handle);\n\t\t});\n\t}\n\n\tpublic registerDebugAdapterDescriptorFactory(extension: IExtensionDescription, type: string, factory: vscode.DebugAdapterDescriptorFactory): vscode.Disposable {\n\n\t\tif (!factory) {\n\t\t\treturn new Disposable(() => { });\n\t\t}\n\n\t\t// a DebugAdapterDescriptorFactory can only be registered in the extension that contributes the debugger\n\t\tif (!this.definesDebugType(extension, type)) {\n\t\t\tthrow new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${type}' debugger.`);\n\t\t}\n\n\t\t// make sure that only one factory for this type is registered\n\t\tif (this.getAdapterDescriptorFactoryByType(type)) {\n\t\t\tthrow new Error(`a DebugAdapterDescriptorFactory can only be registered once per a type.`);\n\t\t}\n\n\t\tconst handle = this._adapterFactoryHandleCounter++;\n\t\tthis._adapterFactories.push({ type, handle, factory });\n\n\t\tthis._debugServiceProxy.$registerDebugAdapterDescriptorFactory(type, handle);\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._adapterFactories = this._adapterFactories.filter(p => p.factory !== factory);\t\t// remove\n\t\t\tthis._debugServiceProxy.$unregisterDebugAdapterDescriptorFactory(handle);\n\t\t});\n\t}\n\n\tpublic registerDebugAdapterTrackerFactory(type: string, factory: vscode.DebugAdapterTrackerFactory): vscode.Disposable {\n\n\t\tif (!factory) {\n\t\t\treturn new Disposable(() => { });\n\t\t}\n\n\t\tconst handle = this._trackerFactoryHandleCounter++;\n\t\tthis._trackerFactories.push({ type, handle, factory });\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._trackerFactories = this._trackerFactories.filter(p => p.factory !== factory);\t\t// remove\n\t\t});\n\t}\n\n\t// RPC methods (ExtHostDebugServiceShape)\n\n\tpublic async $runInTerminal(args: DebugProtocol.RunInTerminalRequestArguments, sessionId: string): Promise<number | undefined> {\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tpublic async $substituteVariables(folderUri: UriComponents | undefined, config: IConfig): Promise<IConfig> {\n\t\tlet ws: IWorkspaceFolderData | undefined;\n\t\tconst folder = await this.getFolder(folderUri);\n\t\tif (folder) {\n\t\t\tws = {\n\t\t\t\turi: folder.uri,\n\t\t\t\tname: folder.name,\n\t\t\t\tindex: folder.index,\n\t\t\t};\n\t\t}\n\t\tconst variableResolver = await this._variableResolver.getResolver();\n\t\treturn variableResolver.resolveAsync(ws, config);\n\t}\n\n\tprotected createDebugAdapter(adapter: vscode.DebugAdapterDescriptor, session: ExtHostDebugSession): AbstractDebugAdapter | undefined {\n\t\tif (adapter instanceof DebugAdapterInlineImplementation) {\n\t\t\treturn new DirectDebugAdapter(adapter.implementation);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprotected createSignService(): ISignService | undefined {\n\t\treturn undefined;\n\t}\n\n\tpublic async $startDASession(debugAdapterHandle: number, sessionDto: IDebugSessionDto): Promise<void> {\n\t\tconst mythis = this;\n\n\t\tconst session = await this.getSession(sessionDto);\n\n\t\treturn this.getAdapterDescriptor(this.getAdapterDescriptorFactoryByType(session.type), session).then(daDescriptor => {\n\n\t\t\tif (!daDescriptor) {\n\t\t\t\tthrow new Error(`Couldn't find a debug adapter descriptor for debug type '${session.type}' (extension might have failed to activate)`);\n\t\t\t}\n\n\t\t\tconst da = this.createDebugAdapter(daDescriptor, session);\n\t\t\tif (!da) {\n\t\t\t\tthrow new Error(`Couldn't create a debug adapter for type '${session.type}'.`);\n\t\t\t}\n\n\t\t\tconst debugAdapter = da;\n\n\t\t\tthis._debugAdapters.set(debugAdapterHandle, debugAdapter);\n\n\t\t\treturn this.getDebugAdapterTrackers(session).then(tracker => {\n\n\t\t\t\tif (tracker) {\n\t\t\t\t\tthis._debugAdaptersTrackers.set(debugAdapterHandle, tracker);\n\t\t\t\t}\n\n\t\t\t\tdebugAdapter.onMessage(async message => {\n\n\t\t\t\t\tif (message.type === 'request' && (<DebugProtocol.Request>message).command === 'handshake') {\n\n\t\t\t\t\t\tconst request = <DebugProtocol.Request>message;\n\n\t\t\t\t\t\tconst response: DebugProtocol.Response = {\n\t\t\t\t\t\t\ttype: 'response',\n\t\t\t\t\t\t\tseq: 0,\n\t\t\t\t\t\t\tcommand: request.command,\n\t\t\t\t\t\t\trequest_seq: request.seq,\n\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!this._signService) {\n\t\t\t\t\t\t\tthis._signService = this.createSignService();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (this._signService) {\n\t\t\t\t\t\t\t\tconst signature = await this._signService.sign(request.arguments.value);\n\t\t\t\t\t\t\t\tresponse.body = {\n\t\t\t\t\t\t\t\t\tsignature: signature\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdebugAdapter.sendResponse(response);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow new Error('no signer');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tresponse.success = false;\n\t\t\t\t\t\t\tresponse.message = e.message;\n\t\t\t\t\t\t\tdebugAdapter.sendResponse(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (tracker && tracker.onDidSendMessage) {\n\t\t\t\t\t\t\ttracker.onDidSendMessage(message);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// DA -> VS Code\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Try to catch details for #233167\n\t\t\t\t\t\t\tmessage = convertToVSCPaths(message, true);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t\tconst type = message.type + '_' + ((message as any).command ?? (message as any).event ?? '');\n\t\t\t\t\t\t\tthis._telemetryProxy.$publicLog2<DebugProtocolMessageErrorEvent, DebugProtocolMessageErrorClassification>('debugProtocolMessageError', { type, from: session.type });\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmythis._debugServiceProxy.$acceptDAMessage(debugAdapterHandle, message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdebugAdapter.onError(err => {\n\t\t\t\t\tif (tracker && tracker.onError) {\n\t\t\t\t\t\ttracker.onError(err);\n\t\t\t\t\t}\n\t\t\t\t\tthis._debugServiceProxy.$acceptDAError(debugAdapterHandle, err.name, err.message, err.stack);\n\t\t\t\t});\n\t\t\t\tdebugAdapter.onExit((code: number | null) => {\n\t\t\t\t\tif (tracker && tracker.onExit) {\n\t\t\t\t\t\ttracker.onExit(code ?? undefined, undefined);\n\t\t\t\t\t}\n\t\t\t\t\tthis._debugServiceProxy.$acceptDAExit(debugAdapterHandle, code ?? undefined, undefined);\n\t\t\t\t});\n\n\t\t\t\tif (tracker && tracker.onWillStartSession) {\n\t\t\t\t\ttracker.onWillStartSession();\n\t\t\t\t}\n\n\t\t\t\treturn debugAdapter.startSession();\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic $sendDAMessage(debugAdapterHandle: number, message: DebugProtocol.ProtocolMessage): void {\n\n\t\t// VS Code -> DA\n\t\tmessage = convertToDAPaths(message, false);\n\n\t\tconst tracker = this._debugAdaptersTrackers.get(debugAdapterHandle);\t// TODO@AW: same handle?\n\t\tif (tracker && tracker.onWillReceiveMessage) {\n\t\t\ttracker.onWillReceiveMessage(message);\n\t\t}\n\n\t\tconst da = this._debugAdapters.get(debugAdapterHandle);\n\t\tda?.sendMessage(message);\n\t}\n\n\tpublic $stopDASession(debugAdapterHandle: number): Promise<void> {\n\n\t\tconst tracker = this._debugAdaptersTrackers.get(debugAdapterHandle);\n\t\tthis._debugAdaptersTrackers.delete(debugAdapterHandle);\n\t\tif (tracker && tracker.onWillStopSession) {\n\t\t\ttracker.onWillStopSession();\n\t\t}\n\n\t\tconst da = this._debugAdapters.get(debugAdapterHandle);\n\t\tthis._debugAdapters.delete(debugAdapterHandle);\n\t\tif (da) {\n\t\t\treturn da.stopSession();\n\t\t} else {\n\t\t\treturn Promise.resolve(void 0);\n\t\t}\n\t}\n\n\tpublic $acceptBreakpointsDelta(delta: IBreakpointsDeltaDto): void {\n\n\t\tconst a: vscode.Breakpoint[] = [];\n\t\tconst r: vscode.Breakpoint[] = [];\n\t\tconst c: vscode.Breakpoint[] = [];\n\n\t\tif (delta.added) {\n\t\t\tfor (const bpd of delta.added) {\n\t\t\t\tconst id = bpd.id;\n\t\t\t\tif (id && !this._breakpoints.has(id)) {\n\t\t\t\t\tlet bp: Breakpoint;\n\t\t\t\t\tif (bpd.type === 'function') {\n\t\t\t\t\t\tbp = new FunctionBreakpoint(bpd.functionName, bpd.enabled, bpd.condition, bpd.hitCondition, bpd.logMessage, bpd.mode);\n\t\t\t\t\t} else if (bpd.type === 'data') {\n\t\t\t\t\t\tbp = new DataBreakpoint(bpd.label, bpd.dataId, bpd.canPersist, bpd.enabled, bpd.hitCondition, bpd.condition, bpd.logMessage, bpd.mode);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst uri = URI.revive(bpd.uri);\n\t\t\t\t\t\tbp = new SourceBreakpoint(new Location(uri, new Position(bpd.line, bpd.character)), bpd.enabled, bpd.condition, bpd.hitCondition, bpd.logMessage, bpd.mode);\n\t\t\t\t\t}\n\t\t\t\t\tsetBreakpointId(bp, id);\n\t\t\t\t\tthis._breakpoints.set(id, bp);\n\t\t\t\t\ta.push(bp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (delta.removed) {\n\t\t\tfor (const id of delta.removed) {\n\t\t\t\tconst bp = this._breakpoints.get(id);\n\t\t\t\tif (bp) {\n\t\t\t\t\tthis._breakpoints.delete(id);\n\t\t\t\t\tr.push(bp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (delta.changed) {\n\t\t\tfor (const bpd of delta.changed) {\n\t\t\t\tif (bpd.id) {\n\t\t\t\t\tconst bp = this._breakpoints.get(bpd.id);\n\t\t\t\t\tif (bp) {\n\t\t\t\t\t\tif (bp instanceof FunctionBreakpoint && bpd.type === 'function') {\n\t\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t\tconst fbp = <any>bp;\n\t\t\t\t\t\t\tfbp.enabled = bpd.enabled;\n\t\t\t\t\t\t\tfbp.condition = bpd.condition;\n\t\t\t\t\t\t\tfbp.hitCondition = bpd.hitCondition;\n\t\t\t\t\t\t\tfbp.logMessage = bpd.logMessage;\n\t\t\t\t\t\t\tfbp.functionName = bpd.functionName;\n\t\t\t\t\t\t} else if (bp instanceof SourceBreakpoint && bpd.type === 'source') {\n\t\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t\tconst sbp = <any>bp;\n\t\t\t\t\t\t\tsbp.enabled = bpd.enabled;\n\t\t\t\t\t\t\tsbp.condition = bpd.condition;\n\t\t\t\t\t\t\tsbp.hitCondition = bpd.hitCondition;\n\t\t\t\t\t\t\tsbp.logMessage = bpd.logMessage;\n\t\t\t\t\t\t\tsbp.location = new Location(URI.revive(bpd.uri), new Position(bpd.line, bpd.character));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc.push(bp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.fireBreakpointChanges(a, r, c);\n\t}\n\n\tpublic async $acceptStackFrameFocus(focusDto: IThreadFocusDto | IStackFrameFocusDto | undefined): Promise<void> {\n\t\tlet focus: vscode.DebugThread | vscode.DebugStackFrame | undefined;\n\t\tif (focusDto) {\n\t\t\tconst session = await this.getSession(focusDto.sessionId);\n\t\t\tif (focusDto.kind === 'thread') {\n\t\t\t\tfocus = new DebugThread(session.api, focusDto.threadId);\n\t\t\t} else {\n\t\t\t\tfocus = new DebugStackFrame(session.api, focusDto.threadId, focusDto.frameId);\n\t\t\t}\n\t\t}\n\n\t\tthis._activeStackItem = focus;\n\t\tthis._onDidChangeActiveStackItem.fire(this._activeStackItem);\n\t}\n\n\tpublic $provideDebugConfigurations(configProviderHandle: number, folderUri: UriComponents | undefined, token: CancellationToken): Promise<vscode.DebugConfiguration[]> {\n\t\treturn asPromise(async () => {\n\t\t\tconst provider = this.getConfigProviderByHandle(configProviderHandle);\n\t\t\tif (!provider) {\n\t\t\t\tthrow new Error('no DebugConfigurationProvider found');\n\t\t\t}\n\t\t\tif (!provider.provideDebugConfigurations) {\n\t\t\t\tthrow new Error('DebugConfigurationProvider has no method provideDebugConfigurations');\n\t\t\t}\n\t\t\tconst folder = await this.getFolder(folderUri);\n\t\t\treturn provider.provideDebugConfigurations(folder, token);\n\t\t}).then(debugConfigurations => {\n\t\t\tif (!debugConfigurations) {\n\t\t\t\tthrow new Error('nothing returned from DebugConfigurationProvider.provideDebugConfigurations');\n\t\t\t}\n\t\t\treturn debugConfigurations;\n\t\t});\n\t}\n\n\tpublic $resolveDebugConfiguration(configProviderHandle: number, folderUri: UriComponents | undefined, debugConfiguration: vscode.DebugConfiguration, token: CancellationToken): Promise<vscode.DebugConfiguration | null | undefined> {\n\t\treturn asPromise(async () => {\n\t\t\tconst provider = this.getConfigProviderByHandle(configProviderHandle);\n\t\t\tif (!provider) {\n\t\t\t\tthrow new Error('no DebugConfigurationProvider found');\n\t\t\t}\n\t\t\tif (!provider.resolveDebugConfiguration) {\n\t\t\t\tthrow new Error('DebugConfigurationProvider has no method resolveDebugConfiguration');\n\t\t\t}\n\t\t\tconst folder = await this.getFolder(folderUri);\n\t\t\treturn provider.resolveDebugConfiguration(folder, debugConfiguration, token);\n\t\t});\n\t}\n\n\tpublic $resolveDebugConfigurationWithSubstitutedVariables(configProviderHandle: number, folderUri: UriComponents | undefined, debugConfiguration: vscode.DebugConfiguration, token: CancellationToken): Promise<vscode.DebugConfiguration | null | undefined> {\n\t\treturn asPromise(async () => {\n\t\t\tconst provider = this.getConfigProviderByHandle(configProviderHandle);\n\t\t\tif (!provider) {\n\t\t\t\tthrow new Error('no DebugConfigurationProvider found');\n\t\t\t}\n\t\t\tif (!provider.resolveDebugConfigurationWithSubstitutedVariables) {\n\t\t\t\tthrow new Error('DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables');\n\t\t\t}\n\t\t\tconst folder = await this.getFolder(folderUri);\n\t\t\treturn provider.resolveDebugConfigurationWithSubstitutedVariables(folder, debugConfiguration, token);\n\t\t});\n\t}\n\n\tpublic async $provideDebugAdapter(adapterFactoryHandle: number, sessionDto: IDebugSessionDto): Promise<Dto<IAdapterDescriptor>> {\n\t\tconst adapterDescriptorFactory = this.getAdapterDescriptorFactoryByHandle(adapterFactoryHandle);\n\t\tif (!adapterDescriptorFactory) {\n\t\t\treturn Promise.reject(new Error('no adapter descriptor factory found for handle'));\n\t\t}\n\t\tconst session = await this.getSession(sessionDto);\n\t\treturn this.getAdapterDescriptor(adapterDescriptorFactory, session).then(adapterDescriptor => {\n\t\t\tif (!adapterDescriptor) {\n\t\t\t\tthrow new Error(`Couldn't find a debug adapter descriptor for debug type '${session.type}'`);\n\t\t\t}\n\t\t\treturn this.convertToDto(adapterDescriptor);\n\t\t});\n\t}\n\n\tpublic async $acceptDebugSessionStarted(sessionDto: IDebugSessionDto): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tthis._onDidStartDebugSession.fire(session.api);\n\t}\n\n\tpublic async $acceptDebugSessionTerminated(sessionDto: IDebugSessionDto): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tif (session) {\n\t\t\tthis._onDidTerminateDebugSession.fire(session.api);\n\t\t\tthis._debugSessions.delete(session.id);\n\t\t}\n\t}\n\n\tpublic async $acceptDebugSessionActiveChanged(sessionDto: IDebugSessionDto | undefined): Promise<void> {\n\t\tthis._activeDebugSession = sessionDto ? await this.getSession(sessionDto) : undefined;\n\t\tthis._onDidChangeActiveDebugSession.fire(this._activeDebugSession?.api);\n\t}\n\n\tpublic async $acceptDebugSessionNameChanged(sessionDto: IDebugSessionDto, name: string): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tsession?._acceptNameChanged(name);\n\t}\n\n\tpublic async $acceptDebugSessionCustomEvent(sessionDto: IDebugSessionDto, event: any): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tconst ee: vscode.DebugSessionCustomEvent = {\n\t\t\tsession: session.api,\n\t\t\tevent: event.event,\n\t\t\tbody: event.body\n\t\t};\n\t\tthis._onDidReceiveDebugSessionCustomEvent.fire(ee);\n\t}\n\n\t// private & dto helpers\n\n\tprivate convertToDto(x: vscode.DebugAdapterDescriptor): Dto<IAdapterDescriptor> {\n\t\tif (x instanceof DebugAdapterExecutable) {\n\t\t\treturn this.convertExecutableToDto(x);\n\t\t} else if (x instanceof DebugAdapterServer) {\n\t\t\treturn this.convertServerToDto(x);\n\t\t} else if (x instanceof DebugAdapterNamedPipeServer) {\n\t\t\treturn this.convertPipeServerToDto(x);\n\t\t} else if (x instanceof DebugAdapterInlineImplementation) {\n\t\t\treturn this.convertImplementationToDto(x);\n\t\t} else {\n\t\t\tthrow new Error('convertToDto unexpected type');\n\t\t}\n\t}\n\n\tprotected convertExecutableToDto(x: DebugAdapterExecutable): IDebugAdapterExecutable {\n\t\treturn {\n\t\t\ttype: 'executable',\n\t\t\tcommand: x.command,\n\t\t\targs: x.args,\n\t\t\toptions: x.options\n\t\t};\n\t}\n\n\tprotected convertServerToDto(x: DebugAdapterServer): IDebugAdapterServer {\n\t\treturn {\n\t\t\ttype: 'server',\n\t\t\tport: x.port,\n\t\t\thost: x.host\n\t\t};\n\t}\n\n\tprotected convertPipeServerToDto(x: DebugAdapterNamedPipeServer): IDebugAdapterNamedPipeServer {\n\t\treturn {\n\t\t\ttype: 'pipeServer',\n\t\t\tpath: x.path\n\t\t};\n\t}\n\n\tprotected convertImplementationToDto(x: DebugAdapterInlineImplementation): IDebugAdapterImpl {\n\t\treturn {\n\t\t\ttype: 'implementation',\n\t\t};\n\t}\n\n\tprivate getAdapterDescriptorFactoryByType(type: string): vscode.DebugAdapterDescriptorFactory | undefined {\n\t\tconst results = this._adapterFactories.filter(p => p.type === type);\n\t\tif (results.length > 0) {\n\t\t\treturn results[0].factory;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getAdapterDescriptorFactoryByHandle(handle: number): vscode.DebugAdapterDescriptorFactory | undefined {\n\t\tconst results = this._adapterFactories.filter(p => p.handle === handle);\n\t\tif (results.length > 0) {\n\t\t\treturn results[0].factory;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getConfigProviderByHandle(handle: number): vscode.DebugConfigurationProvider | undefined {\n\t\tconst results = this._configProviders.filter(p => p.handle === handle);\n\t\tif (results.length > 0) {\n\t\t\treturn results[0].provider;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate definesDebugType(ed: IExtensionDescription, type: string) {\n\t\tif (ed.contributes) {\n\t\t\tconst debuggers = ed.contributes['debuggers'];\n\t\t\tif (debuggers && debuggers.length > 0) {\n\t\t\t\tfor (const dbg of debuggers) {\n\t\t\t\t\t// only debugger contributions with a \"label\" are considered a \"defining\" debugger contribution\n\t\t\t\t\tif (dbg.label && dbg.type) {\n\t\t\t\t\t\tif (dbg.type === type) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate getDebugAdapterTrackers(session: ExtHostDebugSession): Promise<vscode.DebugAdapterTracker | undefined> {\n\n\t\tconst config = session.configuration;\n\t\tconst type = config.type;\n\n\t\tconst promises = this._trackerFactories\n\t\t\t.filter(tuple => tuple.type === type || tuple.type === '*')\n\t\t\t.map(tuple => asPromise<vscode.ProviderResult<vscode.DebugAdapterTracker>>(() => tuple.factory.createDebugAdapterTracker(session.api)).then(p => p, err => null));\n\n\t\treturn Promise.race([\n\t\t\tPromise.all(promises).then(result => {\n\t\t\t\tconst trackers = coalesce(result);\t// filter null\n\t\t\t\tif (trackers.length > 0) {\n\t\t\t\t\treturn new MultiTracker(trackers);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}),\n\t\t\tnew Promise<undefined>(resolve => setTimeout(() => resolve(undefined), 1000)),\n\t\t]).catch(err => {\n\t\t\t// ignore errors\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\tprivate async getAdapterDescriptor(adapterDescriptorFactory: vscode.DebugAdapterDescriptorFactory | undefined, session: ExtHostDebugSession): Promise<vscode.DebugAdapterDescriptor | undefined> {\n\n\t\t// a \"debugServer\" attribute in the launch config takes precedence\n\t\tconst serverPort = session.configuration.debugServer;\n\t\tif (typeof serverPort === 'number') {\n\t\t\treturn Promise.resolve(new DebugAdapterServer(serverPort));\n\t\t}\n\n\t\tif (adapterDescriptorFactory) {\n\t\t\tconst extensionRegistry = await this._extensionService.getExtensionRegistry();\n\t\t\treturn asPromise(() => adapterDescriptorFactory.createDebugAdapterDescriptor(session.api, this.daExecutableFromPackage(session, extensionRegistry))).then(daDescriptor => {\n\t\t\t\tif (daDescriptor) {\n\t\t\t\t\treturn daDescriptor;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t}\n\n\t\t// fallback: use executable information from package.json\n\t\tconst extensionRegistry = await this._extensionService.getExtensionRegistry();\n\t\treturn Promise.resolve(this.daExecutableFromPackage(session, extensionRegistry));\n\t}\n\n\tprotected daExecutableFromPackage(session: ExtHostDebugSession, extensionRegistry: ExtensionDescriptionRegistry): DebugAdapterExecutable | undefined {\n\t\treturn undefined;\n\t}\n\n\tprivate fireBreakpointChanges(added: vscode.Breakpoint[], removed: vscode.Breakpoint[], changed: vscode.Breakpoint[]) {\n\t\tif (added.length > 0 || removed.length > 0 || changed.length > 0) {\n\t\t\tthis._onDidChangeBreakpoints.fire(Object.freeze({\n\t\t\t\tadded,\n\t\t\t\tremoved,\n\t\t\t\tchanged,\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate async getSession(dto: IDebugSessionDto): Promise<ExtHostDebugSession> {\n\t\tif (dto) {\n\t\t\tif (typeof dto === 'string') {\n\t\t\t\tconst ds = this._debugSessions.get(dto);\n\t\t\t\tif (ds) {\n\t\t\t\t\treturn ds;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet ds = this._debugSessions.get(dto.id);\n\t\t\t\tif (!ds) {\n\t\t\t\t\tconst folder = await this.getFolder(dto.folderUri);\n\t\t\t\t\tconst parent = dto.parent ? this._debugSessions.get(dto.parent) : undefined;\n\t\t\t\t\tds = new ExtHostDebugSession(this._debugServiceProxy, dto.id, dto.type, dto.name, folder, dto.configuration, parent?.api);\n\t\t\t\t\tthis._debugSessions.set(ds.id, ds);\n\t\t\t\t\tthis._debugServiceProxy.$sessionCached(ds.id);\n\t\t\t\t}\n\t\t\t\treturn ds;\n\t\t\t}\n\t\t}\n\t\tthrow new Error('cannot find session');\n\t}\n\n\tprivate getFolder(_folderUri: UriComponents | undefined): Promise<vscode.WorkspaceFolder | undefined> {\n\t\tif (_folderUri) {\n\t\t\tconst folderURI = URI.revive(_folderUri);\n\t\t\treturn this._workspaceService.resolveWorkspaceFolder(folderURI);\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tprivate extensionVisKey(extensionId: string, id: string) {\n\t\treturn `${extensionId}\\0${id}`;\n\t}\n\n\tprivate serializeVisualization(extensionId: string, viz: vscode.DebugVisualization['visualization']): MainThreadDebugVisualization | undefined {\n\t\tif (!viz) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ('title' in viz && 'command' in viz) {\n\t\t\treturn { type: DebugVisualizationType.Command };\n\t\t}\n\n\t\tif ('treeId' in viz) {\n\t\t\treturn { type: DebugVisualizationType.Tree, id: `${extensionId}\\0${viz.treeId}` };\n\t\t}\n\n\t\tthrow new Error('Unsupported debug visualization type');\n\t}\n\n\tprivate getIconPathOrClass(icon: vscode.DebugVisualization['iconPath']) {\n\t\tconst iconPathOrIconClass = this.getIconUris(icon);\n\t\tlet iconPath: { dark: URI; light?: URI | undefined } | undefined;\n\t\tlet iconClass: string | undefined;\n\t\tif ('id' in iconPathOrIconClass) {\n\t\t\ticonClass = ThemeIconUtils.asClassName(iconPathOrIconClass);\n\t\t} else {\n\t\t\ticonPath = iconPathOrIconClass;\n\t\t}\n\n\t\treturn {\n\t\t\ticonPath,\n\t\t\ticonClass\n\t\t};\n\t}\n\n\tprivate getIconUris(iconPath: vscode.DebugVisualization['iconPath']): { dark: URI; light?: URI } | { id: string } {\n\t\tif (iconPath instanceof ThemeIcon) {\n\t\t\treturn { id: iconPath.id };\n\t\t}\n\t\tconst dark = typeof iconPath === 'object' && 'dark' in iconPath ? iconPath.dark : iconPath;\n\t\tconst light = typeof iconPath === 'object' && 'light' in iconPath ? iconPath.light : iconPath;\n\t\treturn {\n\t\t\tdark: (typeof dark === 'string' ? URI.file(dark) : dark) as URI,\n\t\t\tlight: (typeof light === 'string' ? URI.file(light) : light) as URI,\n\t\t};\n\t}\n}\n\nexport class ExtHostDebugSession {\n\tprivate apiSession?: vscode.DebugSession;\n\tconstructor(\n\t\tprivate _debugServiceProxy: MainThreadDebugServiceShape,\n\t\tprivate _id: DebugSessionUUID,\n\t\tprivate _type: string,\n\t\tprivate _name: string,\n\t\tprivate _workspaceFolder: vscode.WorkspaceFolder | undefined,\n\t\tprivate _configuration: vscode.DebugConfiguration,\n\t\tprivate _parentSession: vscode.DebugSession | undefined) {\n\t}\n\n\tpublic get api(): vscode.DebugSession {\n\t\tconst that = this;\n\t\treturn this.apiSession ??= Object.freeze({\n\t\t\tid: that._id,\n\t\t\ttype: that._type,\n\t\t\tget name() {\n\t\t\t\treturn that._name;\n\t\t\t},\n\t\t\tset name(name: string) {\n\t\t\t\tthat._name = name;\n\t\t\t\tthat._debugServiceProxy.$setDebugSessionName(that._id, name);\n\t\t\t},\n\t\t\tparentSession: that._parentSession,\n\t\t\tworkspaceFolder: that._workspaceFolder,\n\t\t\tconfiguration: that._configuration,\n\t\t\tcustomRequest(command: string, args: any): Promise<any> {\n\t\t\t\treturn that._debugServiceProxy.$customDebugAdapterRequest(that._id, command, args);\n\t\t\t},\n\t\t\tgetDebugProtocolBreakpoint(breakpoint: vscode.Breakpoint): Promise<vscode.DebugProtocolBreakpoint | undefined> {\n\t\t\t\treturn that._debugServiceProxy.$getDebugProtocolBreakpoint(that._id, breakpoint.id);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic get id(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic get type(): string {\n\t\treturn this._type;\n\t}\n\n\t_acceptNameChanged(name: string) {\n\t\tthis._name = name;\n\t}\n\n\tpublic get configuration(): vscode.DebugConfiguration {\n\t\treturn this._configuration;\n\t}\n}\n\nexport class ExtHostDebugConsole {\n\n\treadonly value: vscode.DebugConsole;\n\n\tconstructor(proxy: MainThreadDebugServiceShape) {\n\n\t\tthis.value = Object.freeze({\n\t\t\tappend(value: string): void {\n\t\t\t\tproxy.$appendDebugConsole(value);\n\t\t\t},\n\t\t\tappendLine(value: string): void {\n\t\t\t\tthis.append(value + '\\n');\n\t\t\t}\n\t\t});\n\t}\n}\n\ninterface ConfigProviderTuple {\n\ttype: string;\n\thandle: number;\n\tprovider: vscode.DebugConfigurationProvider;\n}\n\ninterface DescriptorFactoryTuple {\n\ttype: string;\n\thandle: number;\n\tfactory: vscode.DebugAdapterDescriptorFactory;\n}\n\ninterface TrackerFactoryTuple {\n\ttype: string;\n\thandle: number;\n\tfactory: vscode.DebugAdapterTrackerFactory;\n}\n\nclass MultiTracker implements vscode.DebugAdapterTracker {\n\n\tconstructor(private trackers: vscode.DebugAdapterTracker[]) {\n\t}\n\n\tonWillStartSession(): void {\n\t\tthis.trackers.forEach(t => t.onWillStartSession ? t.onWillStartSession() : undefined);\n\t}\n\n\tonWillReceiveMessage(message: any): void {\n\t\tthis.trackers.forEach(t => t.onWillReceiveMessage ? t.onWillReceiveMessage(message) : undefined);\n\t}\n\n\tonDidSendMessage(message: any): void {\n\t\tthis.trackers.forEach(t => t.onDidSendMessage ? t.onDidSendMessage(message) : undefined);\n\t}\n\n\tonWillStopSession(): void {\n\t\tthis.trackers.forEach(t => t.onWillStopSession ? t.onWillStopSession() : undefined);\n\t}\n\n\tonError(error: Error): void {\n\t\tthis.trackers.forEach(t => t.onError ? t.onError(error) : undefined);\n\t}\n\n\tonExit(code: number, signal: string): void {\n\t\tthis.trackers.forEach(t => t.onExit ? t.onExit(code, signal) : undefined);\n\t}\n}\n\n/*\n * Call directly into a debug adapter implementation\n */\nclass DirectDebugAdapter extends AbstractDebugAdapter {\n\n\tconstructor(private implementation: vscode.DebugAdapter) {\n\t\tsuper();\n\n\t\timplementation.onDidSendMessage((message: vscode.DebugProtocolMessage) => {\n\t\t\tthis.acceptMessage(message as DebugProtocol.ProtocolMessage);\n\t\t});\n\t}\n\n\tstartSession(): Promise<void> {\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tsendMessage(message: DebugProtocol.ProtocolMessage): void {\n\t\tthis.implementation.handleMessage(message);\n\t}\n\n\tstopSession(): Promise<void> {\n\t\tthis.implementation.dispose();\n\t\treturn Promise.resolve(undefined);\n\t}\n}\n\n\nexport class WorkerExtHostDebugService extends ExtHostDebugServiceBase {\n\tconstructor(\n\t\t@IExtHostRpcService extHostRpcService: IExtHostRpcService,\n\t\t@IExtHostWorkspace workspaceService: IExtHostWorkspace,\n\t\t@IExtHostExtensionService extensionService: IExtHostExtensionService,\n\t\t@IExtHostConfiguration configurationService: IExtHostConfiguration,\n\t\t@IExtHostEditorTabs editorTabs: IExtHostEditorTabs,\n\t\t@IExtHostVariableResolverProvider variableResolver: IExtHostVariableResolverProvider,\n\t\t@IExtHostCommands commands: IExtHostCommands,\n\t\t@IExtHostTesting testing: IExtHostTesting,\n\t) {\n\t\tsuper(extHostRpcService, workspaceService, extensionService, configurationService, editorTabs, variableResolver, commands, testing);\n\t}\n}\n\n// Collecting info for #233167 specifically\ntype DebugProtocolMessageErrorClassification = {\n\tfrom: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The type of the debug adapter that the event is from.' };\n\ttype: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The type of the event that was malformed.' };\n\towner: 'roblourens';\n\tcomment: 'Sent to collect details about misbehaving debug extensions.';\n};\n\ntype DebugProtocolMessageErrorEvent = {\n\tfrom: string;\n\ttype: string;\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { coalesce } from '../../../base/common/arrays.js';\nimport { asPromise } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable as DisposableCls, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ThemeIcon as ThemeIconUtils } from '../../../base/common/themables.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { ISignService } from '../../../platform/sign/common/sign.js';\nimport { IWorkspaceFolderData } from '../../../platform/workspace/common/workspace.js';\nimport { AbstractDebugAdapter } from '../../contrib/debug/common/abstractDebugAdapter.js';\nimport { DebugVisualizationType, IAdapterDescriptor, IConfig, IDebugAdapter, IDebugAdapterExecutable, IDebugAdapterImpl, IDebugAdapterNamedPipeServer, IDebugAdapterServer, IDebuggerContribution, IDebugVisualization, IDebugVisualizationContext, IDebugVisualizationTreeItem, MainThreadDebugVisualization } from '../../contrib/debug/common/debug.js';\nimport { convertToDAPaths, convertToVSCPaths, isDebuggerMainContribution } from '../../contrib/debug/common/debugUtils.js';\nimport { ExtensionDescriptionRegistry } from '../../services/extensions/common/extensionDescriptionRegistry.js';\nimport { Dto } from '../../services/extensions/common/proxyIdentifier.js';\nimport { DebugSessionUUID, ExtHostDebugServiceShape, IBreakpointsDeltaDto, IDebugSessionDto, IFunctionBreakpointDto, ISourceMultiBreakpointDto, IStackFrameFocusDto, IThreadFocusDto, MainContext, MainThreadDebugServiceShape, MainThreadTelemetryShape } from './extHost.protocol.js';\nimport { IExtHostCommands } from './extHostCommands.js';\nimport { IExtHostConfiguration } from './extHostConfiguration.js';\nimport { IExtHostEditorTabs } from './extHostEditorTabs.js';\nimport { IExtHostExtensionService } from './extHostExtensionService.js';\nimport { IExtHostRpcService } from './extHostRpcService.js';\nimport { IExtHostTesting } from './extHostTesting.js';\nimport * as Convert from './extHostTypeConverters.js';\nimport { Breakpoint, DataBreakpoint, DebugAdapterExecutable, DebugAdapterInlineImplementation, DebugAdapterNamedPipeServer, DebugAdapterServer, DebugConsoleMode, DebugStackFrame, DebugThread, Disposable, FunctionBreakpoint, Location, Position, setBreakpointId, SourceBreakpoint, ThemeIcon } from './extHostTypes.js';\nimport { IExtHostVariableResolverProvider } from './extHostVariableResolverService.js';\nimport { IExtHostWorkspace } from './extHostWorkspace.js';\n\nexport const IExtHostDebugService = createDecorator<IExtHostDebugService>('IExtHostDebugService');\n\nexport interface IExtHostDebugService extends ExtHostDebugServiceShape {\n\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidStartDebugSession: Event<vscode.DebugSession>;\n\treadonly onDidTerminateDebugSession: Event<vscode.DebugSession>;\n\treadonly onDidChangeActiveDebugSession: Event<vscode.DebugSession | undefined>;\n\tactiveDebugSession: vscode.DebugSession | undefined;\n\tactiveDebugConsole: vscode.DebugConsole;\n\treadonly onDidReceiveDebugSessionCustomEvent: Event<vscode.DebugSessionCustomEvent>;\n\treadonly onDidChangeBreakpoints: Event<vscode.BreakpointsChangeEvent>;\n\tbreakpoints: vscode.Breakpoint[];\n\treadonly onDidChangeActiveStackItem: Event<vscode.DebugThread | vscode.DebugStackFrame | undefined>;\n\tactiveStackItem: vscode.DebugThread | vscode.DebugStackFrame | undefined;\n\n\taddBreakpoints(breakpoints0: readonly vscode.Breakpoint[]): Promise<void>;\n\tremoveBreakpoints(breakpoints0: readonly vscode.Breakpoint[]): Promise<void>;\n\tstartDebugging(folder: vscode.WorkspaceFolder | undefined, nameOrConfig: string | vscode.DebugConfiguration, options: vscode.DebugSessionOptions): Promise<boolean>;\n\tstopDebugging(session?: vscode.DebugSession): Promise<void>;\n\tregisterDebugConfigurationProvider(type: string, provider: vscode.DebugConfigurationProvider, trigger: vscode.DebugConfigurationProviderTriggerKind): vscode.Disposable;\n\tregisterDebugAdapterDescriptorFactory(extension: IExtensionDescription, type: string, factory: vscode.DebugAdapterDescriptorFactory): vscode.Disposable;\n\tregisterDebugAdapterTrackerFactory(type: string, factory: vscode.DebugAdapterTrackerFactory): vscode.Disposable;\n\tregisterDebugVisualizationProvider<T extends vscode.DebugVisualization>(extension: IExtensionDescription, id: string, provider: vscode.DebugVisualizationProvider<T>): vscode.Disposable;\n\tregisterDebugVisualizationTree<T extends vscode.DebugTreeItem>(extension: IExtensionDescription, id: string, provider: vscode.DebugVisualizationTree<T>): vscode.Disposable;\n\tasDebugSourceUri(source: vscode.DebugProtocolSource, session?: vscode.DebugSession): vscode.Uri;\n}\n\nexport abstract class ExtHostDebugServiceBase extends DisposableCls implements IExtHostDebugService, ExtHostDebugServiceShape {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _configProviderHandleCounter: number;\n\tprivate _configProviders: ConfigProviderTuple[];\n\n\tprivate _adapterFactoryHandleCounter: number;\n\tprivate _adapterFactories: DescriptorFactoryTuple[];\n\n\tprivate _trackerFactoryHandleCounter: number;\n\tprivate _trackerFactories: TrackerFactoryTuple[];\n\n\tprivate _debugServiceProxy: MainThreadDebugServiceShape;\n\tprivate _debugSessions: Map<DebugSessionUUID, ExtHostDebugSession> = new Map<DebugSessionUUID, ExtHostDebugSession>();\n\n\tprivate readonly _onDidStartDebugSession: Emitter<vscode.DebugSession>;\n\tget onDidStartDebugSession(): Event<vscode.DebugSession> { return this._onDidStartDebugSession.event; }\n\n\tprivate readonly _onDidTerminateDebugSession: Emitter<vscode.DebugSession>;\n\tget onDidTerminateDebugSession(): Event<vscode.DebugSession> { return this._onDidTerminateDebugSession.event; }\n\n\tprivate readonly _onDidChangeActiveDebugSession: Emitter<vscode.DebugSession | undefined>;\n\tget onDidChangeActiveDebugSession(): Event<vscode.DebugSession | undefined> { return this._onDidChangeActiveDebugSession.event; }\n\n\tprivate _activeDebugSession: ExtHostDebugSession | undefined;\n\tget activeDebugSession(): vscode.DebugSession | undefined { return this._activeDebugSession?.api; }\n\n\tprivate readonly _onDidReceiveDebugSessionCustomEvent: Emitter<vscode.DebugSessionCustomEvent>;\n\tget onDidReceiveDebugSessionCustomEvent(): Event<vscode.DebugSessionCustomEvent> { return this._onDidReceiveDebugSessionCustomEvent.event; }\n\n\tprivate _activeDebugConsole: ExtHostDebugConsole;\n\tget activeDebugConsole(): vscode.DebugConsole { return this._activeDebugConsole.value; }\n\n\tprivate _breakpoints: Map<string, vscode.Breakpoint>;\n\n\tprivate readonly _onDidChangeBreakpoints: Emitter<vscode.BreakpointsChangeEvent>;\n\n\tprivate _activeStackItem: vscode.DebugThread | vscode.DebugStackFrame | undefined;\n\tprivate readonly _onDidChangeActiveStackItem: Emitter<vscode.DebugThread | vscode.DebugStackFrame | undefined>;\n\n\tprivate _debugAdapters: Map<number, IDebugAdapter>;\n\tprivate _debugAdaptersTrackers: Map<number, vscode.DebugAdapterTracker>;\n\n\tprivate _debugVisualizationTreeItemIdsCounter = 0;\n\tprivate readonly _debugVisualizationProviders = new Map<string, vscode.DebugVisualizationProvider>();\n\tprivate readonly _debugVisualizationTrees = new Map<string, vscode.DebugVisualizationTree>();\n\tprivate readonly _debugVisualizationTreeItemIds = new WeakMap<vscode.DebugTreeItem, number>();\n\tprivate readonly _debugVisualizationElements = new Map<number, { provider: string; item: vscode.DebugTreeItem; children?: number[] }>();\n\n\tprivate _signService: ISignService | undefined;\n\n\tprivate readonly _visualizers = new Map<number, { v: vscode.DebugVisualization; provider: vscode.DebugVisualizationProvider; extensionId: string }>();\n\tprivate _visualizerIdCounter = 0;\n\n\tprivate _telemetryProxy: MainThreadTelemetryShape;\n\n\tconstructor(\n\t\t@IExtHostRpcService extHostRpcService: IExtHostRpcService,\n\t\t@IExtHostWorkspace protected readonly _workspaceService: IExtHostWorkspace,\n\t\t@IExtHostExtensionService private readonly _extensionService: IExtHostExtensionService,\n\t\t@IExtHostConfiguration protected readonly _configurationService: IExtHostConfiguration,\n\t\t@IExtHostEditorTabs protected readonly _editorTabs: IExtHostEditorTabs,\n\t\t@IExtHostVariableResolverProvider private readonly _variableResolver: IExtHostVariableResolverProvider,\n\t\t@IExtHostCommands private readonly _commands: IExtHostCommands,\n\t\t@IExtHostTesting private readonly _testing: IExtHostTesting,\n\t) {\n\t\tsuper();\n\n\t\tthis._configProviderHandleCounter = 0;\n\t\tthis._configProviders = [];\n\n\t\tthis._adapterFactoryHandleCounter = 0;\n\t\tthis._adapterFactories = [];\n\n\t\tthis._trackerFactoryHandleCounter = 0;\n\t\tthis._trackerFactories = [];\n\n\t\tthis._debugAdapters = new Map();\n\t\tthis._debugAdaptersTrackers = new Map();\n\n\t\tthis._onDidStartDebugSession = this._register(new Emitter<vscode.DebugSession>());\n\t\tthis._onDidTerminateDebugSession = this._register(new Emitter<vscode.DebugSession>());\n\t\tthis._onDidChangeActiveDebugSession = this._register(new Emitter<vscode.DebugSession | undefined>());\n\t\tthis._onDidReceiveDebugSessionCustomEvent = this._register(new Emitter<vscode.DebugSessionCustomEvent>());\n\n\t\tthis._debugServiceProxy = extHostRpcService.getProxy(MainContext.MainThreadDebugService);\n\n\t\tthis._onDidChangeBreakpoints = this._register(new Emitter<vscode.BreakpointsChangeEvent>());\n\n\t\tthis._onDidChangeActiveStackItem = this._register(new Emitter<vscode.DebugThread | vscode.DebugStackFrame | undefined>());\n\n\t\tthis._activeDebugConsole = new ExtHostDebugConsole(this._debugServiceProxy);\n\n\t\tthis._breakpoints = new Map<string, vscode.Breakpoint>();\n\n\t\tthis._extensionService.getExtensionRegistry().then((extensionRegistry: ExtensionDescriptionRegistry) => {\n\t\t\tthis._register(extensionRegistry.onDidChange(_ => {\n\t\t\t\tthis.registerAllDebugTypes(extensionRegistry);\n\t\t\t}));\n\t\t\tthis.registerAllDebugTypes(extensionRegistry);\n\t\t});\n\n\t\tthis._telemetryProxy = extHostRpcService.getProxy(MainContext.MainThreadTelemetry);\n\t}\n\n\tpublic async $getVisualizerTreeItem(treeId: string, element: IDebugVisualizationContext): Promise<IDebugVisualizationTreeItem | undefined> {\n\t\tconst context = this.hydrateVisualizationContext(element);\n\t\tif (!context) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst item = await this._debugVisualizationTrees.get(treeId)?.getTreeItem?.(context);\n\t\treturn item ? this.convertVisualizerTreeItem(treeId, item) : undefined;\n\t}\n\n\tpublic registerDebugVisualizationTree<T extends vscode.DebugTreeItem>(manifest: IExtensionDescription, id: string, provider: vscode.DebugVisualizationTree<T>): vscode.Disposable {\n\t\tconst extensionId = ExtensionIdentifier.toKey(manifest.identifier);\n\t\tconst key = this.extensionVisKey(extensionId, id);\n\t\tif (this._debugVisualizationProviders.has(key)) {\n\t\t\tthrow new Error(`A debug visualization provider with id '${id}' is already registered`);\n\t\t}\n\n\t\tthis._debugVisualizationTrees.set(key, provider);\n\t\tthis._debugServiceProxy.$registerDebugVisualizerTree(key, !!provider.editItem);\n\t\treturn toDisposable(() => {\n\t\t\tthis._debugServiceProxy.$unregisterDebugVisualizerTree(key);\n\t\t\tthis._debugVisualizationTrees.delete(id);\n\t\t});\n\t}\n\n\tpublic async $getVisualizerTreeItemChildren(treeId: string, element: number): Promise<IDebugVisualizationTreeItem[]> {\n\t\tconst item = this._debugVisualizationElements.get(element)?.item;\n\t\tif (!item) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst children = await this._debugVisualizationTrees.get(treeId)?.getChildren?.(item);\n\t\treturn children?.map(i => this.convertVisualizerTreeItem(treeId, i)) || [];\n\t}\n\n\tpublic async $editVisualizerTreeItem(element: number, value: string): Promise<IDebugVisualizationTreeItem | undefined> {\n\t\tconst e = this._debugVisualizationElements.get(element);\n\t\tif (!e) { return undefined; }\n\n\t\tconst r = await this._debugVisualizationTrees.get(e.provider)?.editItem?.(e.item, value);\n\t\treturn this.convertVisualizerTreeItem(e.provider, r || e.item);\n\t}\n\n\tpublic $disposeVisualizedTree(element: number): void {\n\t\tconst root = this._debugVisualizationElements.get(element);\n\t\tif (!root) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst queue = [root.children];\n\t\tfor (const children of queue) {\n\t\t\tif (children) {\n\t\t\t\tfor (const child of children) {\n\t\t\t\t\tqueue.push(this._debugVisualizationElements.get(child)?.children);\n\t\t\t\t\tthis._debugVisualizationElements.delete(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate convertVisualizerTreeItem(treeId: string, item: vscode.DebugTreeItem): IDebugVisualizationTreeItem {\n\t\tlet id = this._debugVisualizationTreeItemIds.get(item);\n\t\tif (!id) {\n\t\t\tid = this._debugVisualizationTreeItemIdsCounter++;\n\t\t\tthis._debugVisualizationTreeItemIds.set(item, id);\n\t\t\tthis._debugVisualizationElements.set(id, { provider: treeId, item });\n\t\t}\n\n\t\treturn Convert.DebugTreeItem.from(item, id);\n\t}\n\n\tpublic asDebugSourceUri(src: vscode.DebugProtocolSource, session?: vscode.DebugSession): URI {\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst source = <any>src;\n\n\t\tif (typeof source.sourceReference === 'number' && source.sourceReference > 0) {\n\t\t\t// src can be retrieved via DAP's \"source\" request\n\n\t\t\tlet debug = `debug:${encodeURIComponent(source.path || '')}`;\n\t\t\tlet sep = '?';\n\n\t\t\tif (session) {\n\t\t\t\tdebug += `${sep}session=${encodeURIComponent(session.id)}`;\n\t\t\t\tsep = '&';\n\t\t\t}\n\n\t\t\tdebug += `${sep}ref=${source.sourceReference}`;\n\n\t\t\treturn URI.parse(debug);\n\t\t} else if (source.path) {\n\t\t\t// src is just a local file path\n\t\t\treturn URI.file(source.path);\n\t\t} else {\n\t\t\tthrow new Error(`cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.`);\n\t\t}\n\t}\n\n\tprivate registerAllDebugTypes(extensionRegistry: ExtensionDescriptionRegistry) {\n\n\t\tconst debugTypes: string[] = [];\n\n\t\tfor (const ed of extensionRegistry.getAllExtensionDescriptions()) {\n\t\t\tif (ed.contributes) {\n\t\t\t\tconst debuggers = <IDebuggerContribution[]>ed.contributes['debuggers'];\n\t\t\t\tif (debuggers && debuggers.length > 0) {\n\t\t\t\t\tfor (const dbg of debuggers) {\n\t\t\t\t\t\tif (isDebuggerMainContribution(dbg)) {\n\t\t\t\t\t\t\tdebugTypes.push(dbg.type);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._debugServiceProxy.$registerDebugTypes(debugTypes);\n\t}\n\n\t// extension debug API\n\n\n\tget activeStackItem(): vscode.DebugThread | vscode.DebugStackFrame | undefined {\n\t\treturn this._activeStackItem;\n\t}\n\n\tget onDidChangeActiveStackItem(): Event<vscode.DebugThread | vscode.DebugStackFrame | undefined> {\n\t\treturn this._onDidChangeActiveStackItem.event;\n\t}\n\n\tget onDidChangeBreakpoints(): Event<vscode.BreakpointsChangeEvent> {\n\t\treturn this._onDidChangeBreakpoints.event;\n\t}\n\n\tget breakpoints(): vscode.Breakpoint[] {\n\t\tconst result: vscode.Breakpoint[] = [];\n\t\tthis._breakpoints.forEach(bp => result.push(bp));\n\t\treturn result;\n\t}\n\n\tpublic async $resolveDebugVisualizer(id: number, token: CancellationToken): Promise<MainThreadDebugVisualization> {\n\t\tconst visualizer = this._visualizers.get(id);\n\t\tif (!visualizer) {\n\t\t\tthrow new Error(`No debug visualizer found with id '${id}'`);\n\t\t}\n\n\t\tlet { v, provider, extensionId } = visualizer;\n\t\tif (!v.visualization) {\n\t\t\tv = await provider.resolveDebugVisualization?.(v, token) || v;\n\t\t\tvisualizer.v = v;\n\t\t}\n\n\t\tif (!v.visualization) {\n\t\t\tthrow new Error(`No visualization returned from resolveDebugVisualization in '${provider}'`);\n\t\t}\n\n\t\treturn this.serializeVisualization(extensionId, v.visualization)!;\n\t}\n\n\tpublic async $executeDebugVisualizerCommand(id: number): Promise<void> {\n\t\tconst visualizer = this._visualizers.get(id);\n\t\tif (!visualizer) {\n\t\t\tthrow new Error(`No debug visualizer found with id '${id}'`);\n\t\t}\n\n\t\tconst command = visualizer.v.visualization;\n\t\tif (command && 'command' in command) {\n\t\t\tthis._commands.executeCommand(command.command, ...(command.arguments || []));\n\t\t}\n\t}\n\n\tprivate hydrateVisualizationContext(context: IDebugVisualizationContext): vscode.DebugVisualizationContext | undefined {\n\t\tconst session = this._debugSessions.get(context.sessionId);\n\t\treturn session && {\n\t\t\tsession: session.api,\n\t\t\tvariable: context.variable,\n\t\t\tcontainerId: context.containerId,\n\t\t\tframeId: context.frameId,\n\t\t\tthreadId: context.threadId,\n\t\t};\n\t}\n\n\tpublic async $provideDebugVisualizers(extensionId: string, id: string, context: IDebugVisualizationContext, token: CancellationToken): Promise<IDebugVisualization.Serialized[]> {\n\t\tconst contextHydrated = this.hydrateVisualizationContext(context);\n\t\tconst key = this.extensionVisKey(extensionId, id);\n\t\tconst provider = this._debugVisualizationProviders.get(key);\n\t\tif (!contextHydrated || !provider) {\n\t\t\treturn []; // probably ended in the meantime\n\t\t}\n\n\t\tconst visualizations = await provider.provideDebugVisualization(contextHydrated, token);\n\n\t\tif (!visualizations) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn visualizations.map(v => {\n\t\t\tconst id = ++this._visualizerIdCounter;\n\t\t\tthis._visualizers.set(id, { v, provider, extensionId });\n\t\t\tconst icon = v.iconPath ? this.getIconPathOrClass(v.iconPath) : undefined;\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: v.name,\n\t\t\t\ticonClass: icon?.iconClass,\n\t\t\t\ticonPath: icon?.iconPath,\n\t\t\t\tvisualization: this.serializeVisualization(extensionId, v.visualization),\n\t\t\t};\n\t\t});\n\t}\n\n\tpublic $disposeDebugVisualizers(ids: number[]): void {\n\t\tfor (const id of ids) {\n\t\t\tthis._visualizers.delete(id);\n\t\t}\n\t}\n\n\tpublic registerDebugVisualizationProvider<T extends vscode.DebugVisualization>(manifest: IExtensionDescription, id: string, provider: vscode.DebugVisualizationProvider<T>): vscode.Disposable {\n\t\tif (!manifest.contributes?.debugVisualizers?.some(r => r.id === id)) {\n\t\t\tthrow new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${id})`);\n\t\t}\n\n\t\tconst extensionId = ExtensionIdentifier.toKey(manifest.identifier);\n\t\tconst key = this.extensionVisKey(extensionId, id);\n\t\tif (this._debugVisualizationProviders.has(key)) {\n\t\t\tthrow new Error(`A debug visualization provider with id '${id}' is already registered`);\n\t\t}\n\n\t\tthis._debugVisualizationProviders.set(key, provider);\n\t\tthis._debugServiceProxy.$registerDebugVisualizer(extensionId, id);\n\t\treturn toDisposable(() => {\n\t\t\tthis._debugServiceProxy.$unregisterDebugVisualizer(extensionId, id);\n\t\t\tthis._debugVisualizationProviders.delete(id);\n\t\t});\n\t}\n\n\tpublic addBreakpoints(breakpoints0: vscode.Breakpoint[]): Promise<void> {\n\t\t// filter only new breakpoints\n\t\tconst breakpoints = breakpoints0.filter(bp => {\n\t\t\tconst id = bp.id;\n\t\t\tif (!this._breakpoints.has(id)) {\n\t\t\t\tthis._breakpoints.set(id, bp);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\t// send notification for added breakpoints\n\t\tthis.fireBreakpointChanges(breakpoints, [], []);\n\n\t\t// convert added breakpoints to DTOs\n\t\tconst dtos: Array<ISourceMultiBreakpointDto | IFunctionBreakpointDto> = [];\n\t\tconst map = new Map<string, ISourceMultiBreakpointDto>();\n\t\tfor (const bp of breakpoints) {\n\t\t\tif (bp instanceof SourceBreakpoint) {\n\t\t\t\tlet dto = map.get(bp.location.uri.toString());\n\t\t\t\tif (!dto) {\n\t\t\t\t\tdto = {\n\t\t\t\t\t\ttype: 'sourceMulti',\n\t\t\t\t\t\turi: bp.location.uri,\n\t\t\t\t\t\tlines: []\n\t\t\t\t\t} satisfies ISourceMultiBreakpointDto;\n\t\t\t\t\tmap.set(bp.location.uri.toString(), dto);\n\t\t\t\t\tdtos.push(dto);\n\t\t\t\t}\n\t\t\t\tdto.lines.push({\n\t\t\t\t\tid: bp.id,\n\t\t\t\t\tenabled: bp.enabled,\n\t\t\t\t\tcondition: bp.condition,\n\t\t\t\t\thitCondition: bp.hitCondition,\n\t\t\t\t\tlogMessage: bp.logMessage,\n\t\t\t\t\tline: bp.location.range.start.line,\n\t\t\t\t\tcharacter: bp.location.range.start.character,\n\t\t\t\t\tmode: bp.mode,\n\t\t\t\t});\n\t\t\t} else if (bp instanceof FunctionBreakpoint) {\n\t\t\t\tdtos.push({\n\t\t\t\t\ttype: 'function',\n\t\t\t\t\tid: bp.id,\n\t\t\t\t\tenabled: bp.enabled,\n\t\t\t\t\thitCondition: bp.hitCondition,\n\t\t\t\t\tlogMessage: bp.logMessage,\n\t\t\t\t\tcondition: bp.condition,\n\t\t\t\t\tfunctionName: bp.functionName,\n\t\t\t\t\tmode: bp.mode,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// send DTOs to VS Code\n\t\treturn this._debugServiceProxy.$registerBreakpoints(dtos);\n\t}\n\n\tpublic removeBreakpoints(breakpoints0: vscode.Breakpoint[]): Promise<void> {\n\t\t// remove from array\n\t\tconst breakpoints = breakpoints0.filter(b => this._breakpoints.delete(b.id));\n\n\t\t// send notification\n\t\tthis.fireBreakpointChanges([], breakpoints, []);\n\n\t\t// unregister with VS Code\n\t\tconst ids = breakpoints.filter(bp => bp instanceof SourceBreakpoint).map(bp => bp.id);\n\t\tconst fids = breakpoints.filter(bp => bp instanceof FunctionBreakpoint).map(bp => bp.id);\n\t\tconst dids = breakpoints.filter(bp => bp instanceof DataBreakpoint).map(bp => bp.id);\n\t\treturn this._debugServiceProxy.$unregisterBreakpoints(ids, fids, dids);\n\t}\n\n\tpublic startDebugging(folder: vscode.WorkspaceFolder | undefined, nameOrConfig: string | vscode.DebugConfiguration, options: vscode.DebugSessionOptions): Promise<boolean> {\n\t\tconst testRunMeta = options.testRun && this._testing.getMetadataForRun(options.testRun);\n\n\t\treturn this._debugServiceProxy.$startDebugging(folder ? folder.uri : undefined, nameOrConfig, {\n\t\t\tparentSessionID: options.parentSession ? options.parentSession.id : undefined,\n\t\t\tlifecycleManagedByParent: options.lifecycleManagedByParent,\n\t\t\trepl: options.consoleMode === DebugConsoleMode.MergeWithParent ? 'mergeWithParent' : 'separate',\n\t\t\tnoDebug: options.noDebug,\n\t\t\tcompact: options.compact,\n\t\t\tsuppressSaveBeforeStart: options.suppressSaveBeforeStart,\n\t\t\ttestRun: testRunMeta && {\n\t\t\t\trunId: testRunMeta.runId,\n\t\t\t\ttaskId: testRunMeta.taskId,\n\t\t\t},\n\n\t\t\t// Check debugUI for back-compat, #147264\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tsuppressDebugStatusbar: options.suppressDebugStatusbar ?? (options as any).debugUI?.simple,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tsuppressDebugToolbar: options.suppressDebugToolbar ?? (options as any).debugUI?.simple,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tsuppressDebugView: options.suppressDebugView ?? (options as any).debugUI?.simple,\n\t\t});\n\t}\n\n\tpublic stopDebugging(session?: vscode.DebugSession): Promise<void> {\n\t\treturn this._debugServiceProxy.$stopDebugging(session ? session.id : undefined);\n\t}\n\n\tpublic registerDebugConfigurationProvider(type: string, provider: vscode.DebugConfigurationProvider, trigger: vscode.DebugConfigurationProviderTriggerKind): vscode.Disposable {\n\n\t\tif (!provider) {\n\t\t\treturn new Disposable(() => { });\n\t\t}\n\n\t\tconst handle = this._configProviderHandleCounter++;\n\t\tthis._configProviders.push({ type, handle, provider });\n\n\t\tthis._debugServiceProxy.$registerDebugConfigurationProvider(type, trigger,\n\t\t\t!!provider.provideDebugConfigurations,\n\t\t\t!!provider.resolveDebugConfiguration,\n\t\t\t!!provider.resolveDebugConfigurationWithSubstitutedVariables,\n\t\t\thandle);\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._configProviders = this._configProviders.filter(p => p.provider !== provider);\t\t// remove\n\t\t\tthis._debugServiceProxy.$unregisterDebugConfigurationProvider(handle);\n\t\t});\n\t}\n\n\tpublic registerDebugAdapterDescriptorFactory(extension: IExtensionDescription, type: string, factory: vscode.DebugAdapterDescriptorFactory): vscode.Disposable {\n\n\t\tif (!factory) {\n\t\t\treturn new Disposable(() => { });\n\t\t}\n\n\t\t// a DebugAdapterDescriptorFactory can only be registered in the extension that contributes the debugger\n\t\tif (!this.definesDebugType(extension, type)) {\n\t\t\tthrow new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${type}' debugger.`);\n\t\t}\n\n\t\t// make sure that only one factory for this type is registered\n\t\tif (this.getAdapterDescriptorFactoryByType(type)) {\n\t\t\tthrow new Error(`a DebugAdapterDescriptorFactory can only be registered once per a type.`);\n\t\t}\n\n\t\tconst handle = this._adapterFactoryHandleCounter++;\n\t\tthis._adapterFactories.push({ type, handle, factory });\n\n\t\tthis._debugServiceProxy.$registerDebugAdapterDescriptorFactory(type, handle);\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._adapterFactories = this._adapterFactories.filter(p => p.factory !== factory);\t\t// remove\n\t\t\tthis._debugServiceProxy.$unregisterDebugAdapterDescriptorFactory(handle);\n\t\t});\n\t}\n\n\tpublic registerDebugAdapterTrackerFactory(type: string, factory: vscode.DebugAdapterTrackerFactory): vscode.Disposable {\n\n\t\tif (!factory) {\n\t\t\treturn new Disposable(() => { });\n\t\t}\n\n\t\tconst handle = this._trackerFactoryHandleCounter++;\n\t\tthis._trackerFactories.push({ type, handle, factory });\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._trackerFactories = this._trackerFactories.filter(p => p.factory !== factory);\t\t// remove\n\t\t});\n\t}\n\n\t// RPC methods (ExtHostDebugServiceShape)\n\n\tpublic async $runInTerminal(args: DebugProtocol.RunInTerminalRequestArguments, sessionId: string): Promise<number | undefined> {\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tpublic async $substituteVariables(folderUri: UriComponents | undefined, config: IConfig): Promise<IConfig> {\n\t\tlet ws: IWorkspaceFolderData | undefined;\n\t\tconst folder = await this.getFolder(folderUri);\n\t\tif (folder) {\n\t\t\tws = {\n\t\t\t\turi: folder.uri,\n\t\t\t\tname: folder.name,\n\t\t\t\tindex: folder.index,\n\t\t\t};\n\t\t}\n\t\tconst variableResolver = await this._variableResolver.getResolver();\n\t\treturn variableResolver.resolveAsync(ws, config);\n\t}\n\n\tprotected createDebugAdapter(adapter: vscode.DebugAdapterDescriptor, session: ExtHostDebugSession): AbstractDebugAdapter | undefined {\n\t\tif (adapter instanceof DebugAdapterInlineImplementation) {\n\t\t\treturn new DirectDebugAdapter(adapter.implementation);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprotected createSignService(): ISignService | undefined {\n\t\treturn undefined;\n\t}\n\n\tpublic async $startDASession(debugAdapterHandle: number, sessionDto: IDebugSessionDto): Promise<void> {\n\t\tconst mythis = this;\n\n\t\tconst session = await this.getSession(sessionDto);\n\n\t\treturn this.getAdapterDescriptor(this.getAdapterDescriptorFactoryByType(session.type), session).then(daDescriptor => {\n\n\t\t\tif (!daDescriptor) {\n\t\t\t\tthrow new Error(`Couldn't find a debug adapter descriptor for debug type '${session.type}' (extension might have failed to activate)`);\n\t\t\t}\n\n\t\t\tconst da = this.createDebugAdapter(daDescriptor, session);\n\t\t\tif (!da) {\n\t\t\t\tthrow new Error(`Couldn't create a debug adapter for type '${session.type}'.`);\n\t\t\t}\n\n\t\t\tconst debugAdapter = da;\n\n\t\t\tthis._debugAdapters.set(debugAdapterHandle, debugAdapter);\n\n\t\t\treturn this.getDebugAdapterTrackers(session).then(tracker => {\n\n\t\t\t\tif (tracker) {\n\t\t\t\t\tthis._debugAdaptersTrackers.set(debugAdapterHandle, tracker);\n\t\t\t\t}\n\n\t\t\t\tdebugAdapter.onMessage(async message => {\n\n\t\t\t\t\tif (message.type === 'request' && (<DebugProtocol.Request>message).command === 'handshake') {\n\n\t\t\t\t\t\tconst request = <DebugProtocol.Request>message;\n\n\t\t\t\t\t\tconst response: DebugProtocol.Response = {\n\t\t\t\t\t\t\ttype: 'response',\n\t\t\t\t\t\t\tseq: 0,\n\t\t\t\t\t\t\tcommand: request.command,\n\t\t\t\t\t\t\trequest_seq: request.seq,\n\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!this._signService) {\n\t\t\t\t\t\t\tthis._signService = this.createSignService();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (this._signService) {\n\t\t\t\t\t\t\t\tconst signature = await this._signService.sign(request.arguments.value);\n\t\t\t\t\t\t\t\tresponse.body = {\n\t\t\t\t\t\t\t\t\tsignature: signature\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdebugAdapter.sendResponse(response);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow new Error('no signer');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tresponse.success = false;\n\t\t\t\t\t\t\tresponse.message = e.message;\n\t\t\t\t\t\t\tdebugAdapter.sendResponse(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (tracker && tracker.onDidSendMessage) {\n\t\t\t\t\t\t\ttracker.onDidSendMessage(message);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// DA -> VS Code\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Try to catch details for #233167\n\t\t\t\t\t\t\tmessage = convertToVSCPaths(message, true);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t\tconst type = message.type + '_' + ((message as any).command ?? (message as any).event ?? '');\n\t\t\t\t\t\t\tthis._telemetryProxy.$publicLog2<DebugProtocolMessageErrorEvent, DebugProtocolMessageErrorClassification>('debugProtocolMessageError', { type, from: session.type });\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmythis._debugServiceProxy.$acceptDAMessage(debugAdapterHandle, message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdebugAdapter.onError(err => {\n\t\t\t\t\tif (tracker && tracker.onError) {\n\t\t\t\t\t\ttracker.onError(err);\n\t\t\t\t\t}\n\t\t\t\t\tthis._debugServiceProxy.$acceptDAError(debugAdapterHandle, err.name, err.message, err.stack);\n\t\t\t\t});\n\t\t\t\tdebugAdapter.onExit((code: number | null) => {\n\t\t\t\t\tif (tracker && tracker.onExit) {\n\t\t\t\t\t\ttracker.onExit(code ?? undefined, undefined);\n\t\t\t\t\t}\n\t\t\t\t\tthis._debugServiceProxy.$acceptDAExit(debugAdapterHandle, code ?? undefined, undefined);\n\t\t\t\t});\n\n\t\t\t\tif (tracker && tracker.onWillStartSession) {\n\t\t\t\t\ttracker.onWillStartSession();\n\t\t\t\t}\n\n\t\t\t\treturn debugAdapter.startSession();\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic $sendDAMessage(debugAdapterHandle: number, message: DebugProtocol.ProtocolMessage): void {\n\n\t\t// VS Code -> DA\n\t\tmessage = convertToDAPaths(message, false);\n\n\t\tconst tracker = this._debugAdaptersTrackers.get(debugAdapterHandle);\t// TODO@AW: same handle?\n\t\tif (tracker && tracker.onWillReceiveMessage) {\n\t\t\ttracker.onWillReceiveMessage(message);\n\t\t}\n\n\t\tconst da = this._debugAdapters.get(debugAdapterHandle);\n\t\tda?.sendMessage(message);\n\t}\n\n\tpublic $stopDASession(debugAdapterHandle: number): Promise<void> {\n\n\t\tconst tracker = this._debugAdaptersTrackers.get(debugAdapterHandle);\n\t\tthis._debugAdaptersTrackers.delete(debugAdapterHandle);\n\t\tif (tracker && tracker.onWillStopSession) {\n\t\t\ttracker.onWillStopSession();\n\t\t}\n\n\t\tconst da = this._debugAdapters.get(debugAdapterHandle);\n\t\tthis._debugAdapters.delete(debugAdapterHandle);\n\t\tif (da) {\n\t\t\treturn da.stopSession();\n\t\t} else {\n\t\t\treturn Promise.resolve(void 0);\n\t\t}\n\t}\n\n\tpublic $acceptBreakpointsDelta(delta: IBreakpointsDeltaDto): void {\n\n\t\tconst a: vscode.Breakpoint[] = [];\n\t\tconst r: vscode.Breakpoint[] = [];\n\t\tconst c: vscode.Breakpoint[] = [];\n\n\t\tif (delta.added) {\n\t\t\tfor (const bpd of delta.added) {\n\t\t\t\tconst id = bpd.id;\n\t\t\t\tif (id && !this._breakpoints.has(id)) {\n\t\t\t\t\tlet bp: Breakpoint;\n\t\t\t\t\tif (bpd.type === 'function') {\n\t\t\t\t\t\tbp = new FunctionBreakpoint(bpd.functionName, bpd.enabled, bpd.condition, bpd.hitCondition, bpd.logMessage, bpd.mode);\n\t\t\t\t\t} else if (bpd.type === 'data') {\n\t\t\t\t\t\tbp = new DataBreakpoint(bpd.label, bpd.dataId, bpd.canPersist, bpd.enabled, bpd.hitCondition, bpd.condition, bpd.logMessage, bpd.mode);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst uri = URI.revive(bpd.uri);\n\t\t\t\t\t\tbp = new SourceBreakpoint(new Location(uri, new Position(bpd.line, bpd.character)), bpd.enabled, bpd.condition, bpd.hitCondition, bpd.logMessage, bpd.mode);\n\t\t\t\t\t}\n\t\t\t\t\tsetBreakpointId(bp, id);\n\t\t\t\t\tthis._breakpoints.set(id, bp);\n\t\t\t\t\ta.push(bp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (delta.removed) {\n\t\t\tfor (const id of delta.removed) {\n\t\t\t\tconst bp = this._breakpoints.get(id);\n\t\t\t\tif (bp) {\n\t\t\t\t\tthis._breakpoints.delete(id);\n\t\t\t\t\tr.push(bp);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (delta.changed) {\n\t\t\tfor (const bpd of delta.changed) {\n\t\t\t\tif (bpd.id) {\n\t\t\t\t\tconst bp = this._breakpoints.get(bpd.id);\n\t\t\t\t\tif (bp) {\n\t\t\t\t\t\tif (bp instanceof FunctionBreakpoint && bpd.type === 'function') {\n\t\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t\tconst fbp = <any>bp;\n\t\t\t\t\t\t\tfbp.enabled = bpd.enabled;\n\t\t\t\t\t\t\tfbp.condition = bpd.condition;\n\t\t\t\t\t\t\tfbp.hitCondition = bpd.hitCondition;\n\t\t\t\t\t\t\tfbp.logMessage = bpd.logMessage;\n\t\t\t\t\t\t\tfbp.functionName = bpd.functionName;\n\t\t\t\t\t\t} else if (bp instanceof SourceBreakpoint && bpd.type === 'source') {\n\t\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t\tconst sbp = <any>bp;\n\t\t\t\t\t\t\tsbp.enabled = bpd.enabled;\n\t\t\t\t\t\t\tsbp.condition = bpd.condition;\n\t\t\t\t\t\t\tsbp.hitCondition = bpd.hitCondition;\n\t\t\t\t\t\t\tsbp.logMessage = bpd.logMessage;\n\t\t\t\t\t\t\tsbp.location = new Location(URI.revive(bpd.uri), new Position(bpd.line, bpd.character));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc.push(bp);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.fireBreakpointChanges(a, r, c);\n\t}\n\n\tpublic async $acceptStackFrameFocus(focusDto: IThreadFocusDto | IStackFrameFocusDto | undefined): Promise<void> {\n\t\tlet focus: vscode.DebugThread | vscode.DebugStackFrame | undefined;\n\t\tif (focusDto) {\n\t\t\tconst session = await this.getSession(focusDto.sessionId);\n\t\t\tif (focusDto.kind === 'thread') {\n\t\t\t\tfocus = new DebugThread(session.api, focusDto.threadId);\n\t\t\t} else {\n\t\t\t\tfocus = new DebugStackFrame(session.api, focusDto.threadId, focusDto.frameId);\n\t\t\t}\n\t\t}\n\n\t\tthis._activeStackItem = focus;\n\t\tthis._onDidChangeActiveStackItem.fire(this._activeStackItem);\n\t}\n\n\tpublic $provideDebugConfigurations(configProviderHandle: number, folderUri: UriComponents | undefined, token: CancellationToken): Promise<vscode.DebugConfiguration[]> {\n\t\treturn asPromise(async () => {\n\t\t\tconst provider = this.getConfigProviderByHandle(configProviderHandle);\n\t\t\tif (!provider) {\n\t\t\t\tthrow new Error('no DebugConfigurationProvider found');\n\t\t\t}\n\t\t\tif (!provider.provideDebugConfigurations) {\n\t\t\t\tthrow new Error('DebugConfigurationProvider has no method provideDebugConfigurations');\n\t\t\t}\n\t\t\tconst folder = await this.getFolder(folderUri);\n\t\t\treturn provider.provideDebugConfigurations(folder, token);\n\t\t}).then(debugConfigurations => {\n\t\t\tif (!debugConfigurations) {\n\t\t\t\tthrow new Error('nothing returned from DebugConfigurationProvider.provideDebugConfigurations');\n\t\t\t}\n\t\t\treturn debugConfigurations;\n\t\t});\n\t}\n\n\tpublic $resolveDebugConfiguration(configProviderHandle: number, folderUri: UriComponents | undefined, debugConfiguration: vscode.DebugConfiguration, token: CancellationToken): Promise<vscode.DebugConfiguration | null | undefined> {\n\t\treturn asPromise(async () => {\n\t\t\tconst provider = this.getConfigProviderByHandle(configProviderHandle);\n\t\t\tif (!provider) {\n\t\t\t\tthrow new Error('no DebugConfigurationProvider found');\n\t\t\t}\n\t\t\tif (!provider.resolveDebugConfiguration) {\n\t\t\t\tthrow new Error('DebugConfigurationProvider has no method resolveDebugConfiguration');\n\t\t\t}\n\t\t\tconst folder = await this.getFolder(folderUri);\n\t\t\treturn provider.resolveDebugConfiguration(folder, debugConfiguration, token);\n\t\t});\n\t}\n\n\tpublic $resolveDebugConfigurationWithSubstitutedVariables(configProviderHandle: number, folderUri: UriComponents | undefined, debugConfiguration: vscode.DebugConfiguration, token: CancellationToken): Promise<vscode.DebugConfiguration | null | undefined> {\n\t\treturn asPromise(async () => {\n\t\t\tconst provider = this.getConfigProviderByHandle(configProviderHandle);\n\t\t\tif (!provider) {\n\t\t\t\tthrow new Error('no DebugConfigurationProvider found');\n\t\t\t}\n\t\t\tif (!provider.resolveDebugConfigurationWithSubstitutedVariables) {\n\t\t\t\tthrow new Error('DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables');\n\t\t\t}\n\t\t\tconst folder = await this.getFolder(folderUri);\n\t\t\treturn provider.resolveDebugConfigurationWithSubstitutedVariables(folder, debugConfiguration, token);\n\t\t});\n\t}\n\n\tpublic async $provideDebugAdapter(adapterFactoryHandle: number, sessionDto: IDebugSessionDto): Promise<Dto<IAdapterDescriptor>> {\n\t\tconst adapterDescriptorFactory = this.getAdapterDescriptorFactoryByHandle(adapterFactoryHandle);\n\t\tif (!adapterDescriptorFactory) {\n\t\t\treturn Promise.reject(new Error('no adapter descriptor factory found for handle'));\n\t\t}\n\t\tconst session = await this.getSession(sessionDto);\n\t\treturn this.getAdapterDescriptor(adapterDescriptorFactory, session).then(adapterDescriptor => {\n\t\t\tif (!adapterDescriptor) {\n\t\t\t\tthrow new Error(`Couldn't find a debug adapter descriptor for debug type '${session.type}'`);\n\t\t\t}\n\t\t\treturn this.convertToDto(adapterDescriptor);\n\t\t});\n\t}\n\n\tpublic async $acceptDebugSessionStarted(sessionDto: IDebugSessionDto): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tthis._onDidStartDebugSession.fire(session.api);\n\t}\n\n\tpublic async $acceptDebugSessionTerminated(sessionDto: IDebugSessionDto): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tif (session) {\n\t\t\tthis._onDidTerminateDebugSession.fire(session.api);\n\t\t\tthis._debugSessions.delete(session.id);\n\t\t}\n\t}\n\n\tpublic async $acceptDebugSessionActiveChanged(sessionDto: IDebugSessionDto | undefined): Promise<void> {\n\t\tthis._activeDebugSession = sessionDto ? await this.getSession(sessionDto) : undefined;\n\t\tthis._onDidChangeActiveDebugSession.fire(this._activeDebugSession?.api);\n\t}\n\n\tpublic async $acceptDebugSessionNameChanged(sessionDto: IDebugSessionDto, name: string): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tsession?._acceptNameChanged(name);\n\t}\n\n\tpublic async $acceptDebugSessionCustomEvent(sessionDto: IDebugSessionDto, event: any): Promise<void> {\n\t\tconst session = await this.getSession(sessionDto);\n\t\tconst ee: vscode.DebugSessionCustomEvent = {\n\t\t\tsession: session.api,\n\t\t\tevent: event.event,\n\t\t\tbody: event.body\n\t\t};\n\t\tthis._onDidReceiveDebugSessionCustomEvent.fire(ee);\n\t}\n\n\t// private & dto helpers\n\n\tprivate convertToDto(x: vscode.DebugAdapterDescriptor): Dto<IAdapterDescriptor> {\n\t\tif (x instanceof DebugAdapterExecutable) {\n\t\t\treturn this.convertExecutableToDto(x);\n\t\t} else if (x instanceof DebugAdapterServer) {\n\t\t\treturn this.convertServerToDto(x);\n\t\t} else if (x instanceof DebugAdapterNamedPipeServer) {\n\t\t\treturn this.convertPipeServerToDto(x);\n\t\t} else if (x instanceof DebugAdapterInlineImplementation) {\n\t\t\treturn this.convertImplementationToDto(x);\n\t\t} else {\n\t\t\tthrow new Error('convertToDto unexpected type');\n\t\t}\n\t}\n\n\tprotected convertExecutableToDto(x: DebugAdapterExecutable): IDebugAdapterExecutable {\n\t\treturn {\n\t\t\ttype: 'executable',\n\t\t\tcommand: x.command,\n\t\t\targs: x.args,\n\t\t\toptions: x.options\n\t\t};\n\t}\n\n\tprotected convertServerToDto(x: DebugAdapterServer): IDebugAdapterServer {\n\t\treturn {\n\t\t\ttype: 'server',\n\t\t\tport: x.port,\n\t\t\thost: x.host\n\t\t};\n\t}\n\n\tprotected convertPipeServerToDto(x: DebugAdapterNamedPipeServer): IDebugAdapterNamedPipeServer {\n\t\treturn {\n\t\t\ttype: 'pipeServer',\n\t\t\tpath: x.path\n\t\t};\n\t}\n\n\tprotected convertImplementationToDto(x: DebugAdapterInlineImplementation): IDebugAdapterImpl {\n\t\treturn {\n\t\t\ttype: 'implementation',\n\t\t};\n\t}\n\n\tprivate getAdapterDescriptorFactoryByType(type: string): vscode.DebugAdapterDescriptorFactory | undefined {\n\t\tconst results = this._adapterFactories.filter(p => p.type === type);\n\t\tif (results.length > 0) {\n\t\t\treturn results[0].factory;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getAdapterDescriptorFactoryByHandle(handle: number): vscode.DebugAdapterDescriptorFactory | undefined {\n\t\tconst results = this._adapterFactories.filter(p => p.handle === handle);\n\t\tif (results.length > 0) {\n\t\t\treturn results[0].factory;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getConfigProviderByHandle(handle: number): vscode.DebugConfigurationProvider | undefined {\n\t\tconst results = this._configProviders.filter(p => p.handle === handle);\n\t\tif (results.length > 0) {\n\t\t\treturn results[0].provider;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate definesDebugType(ed: IExtensionDescription, type: string) {\n\t\tif (ed.contributes) {\n\t\t\tconst debuggers = ed.contributes['debuggers'];\n\t\t\tif (debuggers && debuggers.length > 0) {\n\t\t\t\tfor (const dbg of debuggers) {\n\t\t\t\t\t// only debugger contributions with a \"label\" are considered a \"defining\" debugger contribution\n\t\t\t\t\tif (dbg.label && dbg.type) {\n\t\t\t\t\t\tif (dbg.type === type) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate getDebugAdapterTrackers(session: ExtHostDebugSession): Promise<vscode.DebugAdapterTracker | undefined> {\n\n\t\tconst config = session.configuration;\n\t\tconst type = config.type;\n\n\t\tconst promises = this._trackerFactories\n\t\t\t.filter(tuple => tuple.type === type || tuple.type === '*')\n\t\t\t.map(tuple => asPromise<vscode.ProviderResult<vscode.DebugAdapterTracker>>(() => tuple.factory.createDebugAdapterTracker(session.api)).then(p => p, err => null));\n\n\t\treturn Promise.race([\n\t\t\tPromise.all(promises).then(result => {\n\t\t\t\tconst trackers = coalesce(result);\t// filter null\n\t\t\t\tif (trackers.length > 0) {\n\t\t\t\t\treturn new MultiTracker(trackers);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}),\n\t\t\tnew Promise<undefined>(resolve => setTimeout(() => resolve(undefined), 1000)),\n\t\t]).catch(err => {\n\t\t\t// ignore errors\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\tprivate async getAdapterDescriptor(adapterDescriptorFactory: vscode.DebugAdapterDescriptorFactory | undefined, session: ExtHostDebugSession): Promise<vscode.DebugAdapterDescriptor | undefined> {\n\n\t\t// a \"debugServer\" attribute in the launch config takes precedence\n\t\tconst serverPort = session.configuration.debugServer;\n\t\tif (typeof serverPort === 'number') {\n\t\t\treturn Promise.resolve(new DebugAdapterServer(serverPort));\n\t\t}\n\n\t\tif (adapterDescriptorFactory) {\n\t\t\tconst extensionRegistry = await this._extensionService.getExtensionRegistry();\n\t\t\treturn asPromise(() => adapterDescriptorFactory.createDebugAdapterDescriptor(session.api, this.daExecutableFromPackage(session, extensionRegistry))).then(daDescriptor => {\n\t\t\t\tif (daDescriptor) {\n\t\t\t\t\treturn daDescriptor;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t}\n\n\t\t// fallback: use executable information from package.json\n\t\tconst extensionRegistry = await this._extensionService.getExtensionRegistry();\n\t\treturn Promise.resolve(this.daExecutableFromPackage(session, extensionRegistry));\n\t}\n\n\tprotected daExecutableFromPackage(session: ExtHostDebugSession, extensionRegistry: ExtensionDescriptionRegistry): DebugAdapterExecutable | undefined {\n\t\treturn undefined;\n\t}\n\n\tprivate fireBreakpointChanges(added: vscode.Breakpoint[], removed: vscode.Breakpoint[], changed: vscode.Breakpoint[]) {\n\t\tif (added.length > 0 || removed.length > 0 || changed.length > 0) {\n\t\t\tthis._onDidChangeBreakpoints.fire(Object.freeze({\n\t\t\t\tadded,\n\t\t\t\tremoved,\n\t\t\t\tchanged,\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate async getSession(dto: IDebugSessionDto): Promise<ExtHostDebugSession> {\n\t\tif (dto) {\n\t\t\tif (typeof dto === 'string') {\n\t\t\t\tconst ds = this._debugSessions.get(dto);\n\t\t\t\tif (ds) {\n\t\t\t\t\treturn ds;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet ds = this._debugSessions.get(dto.id);\n\t\t\t\tif (!ds) {\n\t\t\t\t\tconst folder = await this.getFolder(dto.folderUri);\n\t\t\t\t\tconst parent = dto.parent ? this._debugSessions.get(dto.parent) : undefined;\n\t\t\t\t\tds = new ExtHostDebugSession(this._debugServiceProxy, dto.id, dto.type, dto.name, folder, dto.configuration, parent?.api);\n\t\t\t\t\tthis._debugSessions.set(ds.id, ds);\n\t\t\t\t\tthis._debugServiceProxy.$sessionCached(ds.id);\n\t\t\t\t}\n\t\t\t\treturn ds;\n\t\t\t}\n\t\t}\n\t\tthrow new Error('cannot find session');\n\t}\n\n\tprivate getFolder(_folderUri: UriComponents | undefined): Promise<vscode.WorkspaceFolder | undefined> {\n\t\tif (_folderUri) {\n\t\t\tconst folderURI = URI.revive(_folderUri);\n\t\t\treturn this._workspaceService.resolveWorkspaceFolder(folderURI);\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tprivate extensionVisKey(extensionId: string, id: string) {\n\t\treturn `${extensionId}\\0${id}`;\n\t}\n\n\tprivate serializeVisualization(extensionId: string, viz: vscode.DebugVisualization['visualization']): MainThreadDebugVisualization | undefined {\n\t\tif (!viz) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ('title' in viz && 'command' in viz) {\n\t\t\treturn { type: DebugVisualizationType.Command };\n\t\t}\n\n\t\tif ('treeId' in viz) {\n\t\t\treturn { type: DebugVisualizationType.Tree, id: `${extensionId}\\0${viz.treeId}` };\n\t\t}\n\n\t\tthrow new Error('Unsupported debug visualization type');\n\t}\n\n\tprivate getIconPathOrClass(icon: vscode.DebugVisualization['iconPath']) {\n\t\tconst iconPathOrIconClass = this.getIconUris(icon);\n\t\tlet iconPath: { dark: URI; light?: URI | undefined } | undefined;\n\t\tlet iconClass: string | undefined;\n\t\tif ('id' in iconPathOrIconClass) {\n\t\t\ticonClass = ThemeIconUtils.asClassName(iconPathOrIconClass);\n\t\t} else {\n\t\t\ticonPath = iconPathOrIconClass;\n\t\t}\n\n\t\treturn {\n\t\t\ticonPath,\n\t\t\ticonClass\n\t\t};\n\t}\n\n\tprivate getIconUris(iconPath: vscode.DebugVisualization['iconPath']): { dark: URI; light?: URI } | { id: string } {\n\t\tif (iconPath instanceof ThemeIcon) {\n\t\t\treturn { id: iconPath.id };\n\t\t}\n\t\tconst dark = typeof iconPath === 'object' && 'dark' in iconPath ? iconPath.dark : iconPath;\n\t\tconst light = typeof iconPath === 'object' && 'light' in iconPath ? iconPath.light : iconPath;\n\t\treturn {\n\t\t\tdark: (typeof dark === 'string' ? URI.file(dark) : dark) as URI,\n\t\t\tlight: (typeof light === 'string' ? URI.file(light) : light) as URI,\n\t\t};\n\t}\n}\n\nexport class ExtHostDebugSession {\n\tprivate apiSession?: vscode.DebugSession;\n\tconstructor(\n\t\tprivate _debugServiceProxy: MainThreadDebugServiceShape,\n\t\tprivate _id: DebugSessionUUID,\n\t\tprivate _type: string,\n\t\tprivate _name: string,\n\t\tprivate _workspaceFolder: vscode.WorkspaceFolder | undefined,\n\t\tprivate _configuration: vscode.DebugConfiguration,\n\t\tprivate _parentSession: vscode.DebugSession | undefined) {\n\t}\n\n\tpublic get api(): vscode.DebugSession {\n\t\tconst that = this;\n\t\treturn this.apiSession ??= Object.freeze({\n\t\t\tid: that._id,\n\t\t\ttype: that._type,\n\t\t\tget name() {\n\t\t\t\treturn that._name;\n\t\t\t},\n\t\t\tset name(name: string) {\n\t\t\t\tthat._name = name;\n\t\t\t\tthat._debugServiceProxy.$setDebugSessionName(that._id, name);\n\t\t\t},\n\t\t\tparentSession: that._parentSession,\n\t\t\tworkspaceFolder: that._workspaceFolder,\n\t\t\tconfiguration: that._configuration,\n\t\t\tcustomRequest(command: string, args: any): Promise<any> {\n\t\t\t\treturn that._debugServiceProxy.$customDebugAdapterRequest(that._id, command, args);\n\t\t\t},\n\t\t\tgetDebugProtocolBreakpoint(breakpoint: vscode.Breakpoint): Promise<vscode.DebugProtocolBreakpoint | undefined> {\n\t\t\t\treturn that._debugServiceProxy.$getDebugProtocolBreakpoint(that._id, breakpoint.id);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic get id(): string {\n\t\treturn this._id;\n\t}\n\n\tpublic get type(): string {\n\t\treturn this._type;\n\t}\n\n\t_acceptNameChanged(name: string) {\n\t\tthis._name = name;\n\t}\n\n\tpublic get configuration(): vscode.DebugConfiguration {\n\t\treturn this._configuration;\n\t}\n}\n\nexport class ExtHostDebugConsole {\n\n\treadonly value: vscode.DebugConsole;\n\n\tconstructor(proxy: MainThreadDebugServiceShape) {\n\n\t\tthis.value = Object.freeze({\n\t\t\tappend(value: string): void {\n\t\t\t\tproxy.$appendDebugConsole(value);\n\t\t\t},\n\t\t\tappendLine(value: string): void {\n\t\t\t\tthis.append(value + '\\n');\n\t\t\t}\n\t\t});\n\t}\n}\n\ninterface ConfigProviderTuple {\n\ttype: string;\n\thandle: number;\n\tprovider: vscode.DebugConfigurationProvider;\n}\n\ninterface DescriptorFactoryTuple {\n\ttype: string;\n\thandle: number;\n\tfactory: vscode.DebugAdapterDescriptorFactory;\n}\n\ninterface TrackerFactoryTuple {\n\ttype: string;\n\thandle: number;\n\tfactory: vscode.DebugAdapterTrackerFactory;\n}\n\nclass MultiTracker implements vscode.DebugAdapterTracker {\n\n\tconstructor(private trackers: vscode.DebugAdapterTracker[]) {\n\t}\n\n\tonWillStartSession(): void {\n\t\tthis.trackers.forEach(t => t.onWillStartSession ? t.onWillStartSession() : undefined);\n\t}\n\n\tonWillReceiveMessage(message: any): void {\n\t\tthis.trackers.forEach(t => t.onWillReceiveMessage ? t.onWillReceiveMessage(message) : undefined);\n\t}\n\n\tonDidSendMessage(message: any): void {\n\t\tthis.trackers.forEach(t => t.onDidSendMessage ? t.onDidSendMessage(message) : undefined);\n\t}\n\n\tonWillStopSession(): void {\n\t\tthis.trackers.forEach(t => t.onWillStopSession ? t.onWillStopSession() : undefined);\n\t}\n\n\tonError(error: Error): void {\n\t\tthis.trackers.forEach(t => t.onError ? t.onError(error) : undefined);\n\t}\n\n\tonExit(code: number, signal: string): void {\n\t\tthis.trackers.forEach(t => t.onExit ? t.onExit(code, signal) : undefined);\n\t}\n}\n\n/*\n * Call directly into a debug adapter implementation\n */\nclass DirectDebugAdapter extends AbstractDebugAdapter {\n\n\tconstructor(private implementation: vscode.DebugAdapter) {\n\t\tsuper();\n\n\t\timplementation.onDidSendMessage((message: vscode.DebugProtocolMessage) => {\n\t\t\tthis.acceptMessage(message as DebugProtocol.ProtocolMessage);\n\t\t});\n\t}\n\n\tstartSession(): Promise<void> {\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tsendMessage(message: DebugProtocol.ProtocolMessage): void {\n\t\tthis.implementation.handleMessage(message);\n\t}\n\n\tstopSession(): Promise<void> {\n\t\tthis.implementation.dispose();\n\t\treturn Promise.resolve(undefined);\n\t}\n}\n\n\nexport class WorkerExtHostDebugService extends ExtHostDebugServiceBase {\n\tconstructor(\n\t\t@IExtHostRpcService extHostRpcService: IExtHostRpcService,\n\t\t@IExtHostWorkspace workspaceService: IExtHostWorkspace,\n\t\t@IExtHostExtensionService extensionService: IExtHostExtensionService,\n\t\t@IExtHostConfiguration configurationService: IExtHostConfiguration,\n\t\t@IExtHostEditorTabs editorTabs: IExtHostEditorTabs,\n\t\t@IExtHostVariableResolverProvider variableResolver: IExtHostVariableResolverProvider,\n\t\t@IExtHostCommands commands: IExtHostCommands,\n\t\t@IExtHostTesting testing: IExtHostTesting,\n\t) {\n\t\tsuper(extHostRpcService, workspaceService, extensionService, configurationService, editorTabs, variableResolver, commands, testing);\n\t}\n}\n\n// Collecting info for #233167 specifically\ntype DebugProtocolMessageErrorClassification = {\n\tfrom: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The type of the debug adapter that the event is from.' };\n\ttype: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The type of the event that was malformed.' };\n\towner: 'roblourens';\n\tcomment: 'Sent to collect details about misbehaving debug extensions.';\n};\n\ntype DebugProtocolMessageErrorEvent = {\n\tfrom: string;\n\ttype: string;\n};\n"]}