{"version":3,"sources":["vs/workbench/api/common/extHostTreeViews.ts"],"names":[],"mappings":"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","file":"extHostTreeViews.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../nls.js';\nimport type * as vscode from 'vscode';\nimport { basename } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore, dispose, IDisposable } from '../../../base/common/lifecycle.js';\nimport { CheckboxUpdate, DataTransferDTO, ExtHostTreeViewsShape, MainThreadTreeViewsShape } from './extHost.protocol.js';\nimport { ITreeItem, TreeViewItemHandleArg, ITreeItemLabel, IRevealOptions, TreeCommand, TreeViewPaneHandleArg, ITreeItemCheckboxState, NoTreeViewError } from '../../common/views.js';\nimport { ExtHostCommands, CommandsConverter } from './extHostCommands.js';\nimport { asPromise } from '../../../base/common/async.js';\nimport * as extHostTypes from './extHostTypes.js';\nimport { isUndefinedOrNull, isString } from '../../../base/common/types.js';\nimport { equals, coalesce, distinct } from '../../../base/common/arrays.js';\nimport { ILogService, LogLevel } from '../../../platform/log/common/log.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { MarkdownString, ViewBadge, DataTransfer } from './extHostTypeConverters.js';\nimport { IMarkdownString, isMarkdownString } from '../../../base/common/htmlContent.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { ITreeViewsDnDService, TreeViewsDnDService } from '../../../editor/common/services/treeViewsDnd.js';\nimport { IAccessibilityInformation } from '../../../platform/accessibility/common/accessibility.js';\nimport { checkProposedApiEnabled } from '../../services/extensions/common/extensions.js';\n\ntype TreeItemHandle = string;\n\nfunction toTreeItemLabel(label: any, extension: IExtensionDescription): ITreeItemLabel | undefined {\n\tif (isString(label)) {\n\t\treturn { label };\n\t}\n\n\tif (label && typeof label === 'object' && label.label) {\n\t\tlet highlights: [number, number][] | undefined = undefined;\n\t\tif (Array.isArray(label.highlights)) {\n\t\t\thighlights = (<[number, number][]>label.highlights).filter((highlight => highlight.length === 2 && typeof highlight[0] === 'number' && typeof highlight[1] === 'number'));\n\t\t\thighlights = highlights.length ? highlights : undefined;\n\t\t}\n\t\tif (isString(label.label)) {\n\t\t\treturn { label: label.label, highlights };\n\t\t} else if (extHostTypes.MarkdownString.isMarkdownString(label.label)) {\n\t\t\tcheckProposedApiEnabled(extension, 'treeItemMarkdownLabel');\n\t\t\treturn { label: MarkdownString.from(label.label), highlights };\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n\nexport class ExtHostTreeViews extends Disposable implements ExtHostTreeViewsShape {\n\n\tprivate _treeViews: Map<string, ExtHostTreeView<any>> = new Map<string, ExtHostTreeView<any>>();\n\tprivate _treeDragAndDropService: ITreeViewsDnDService<vscode.DataTransfer> = new TreeViewsDnDService<vscode.DataTransfer>();\n\n\tconstructor(\n\t\tprivate _proxy: MainThreadTreeViewsShape,\n\t\tprivate _commands: ExtHostCommands,\n\t\tprivate _logService: ILogService\n\t) {\n\t\tsuper();\n\t\tfunction isTreeViewConvertableItem(arg: any): boolean {\n\t\t\treturn arg && arg.$treeViewId && (arg.$treeItemHandle || arg.$selectedTreeItems || arg.$focusedTreeItem);\n\t\t}\n\t\t_commands.registerArgumentProcessor({\n\t\t\tprocessArgument: arg => {\n\t\t\t\tif (isTreeViewConvertableItem(arg)) {\n\t\t\t\t\treturn this._convertArgument(arg);\n\t\t\t\t} else if (Array.isArray(arg) && (arg.length > 0)) {\n\t\t\t\t\treturn arg.map(item => {\n\t\t\t\t\t\tif (isTreeViewConvertableItem(item)) {\n\t\t\t\t\t\t\treturn this._convertArgument(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn arg;\n\t\t\t}\n\t\t});\n\t}\n\n\tregisterTreeDataProvider<T>(id: string, treeDataProvider: vscode.TreeDataProvider<T>, extension: IExtensionDescription): vscode.Disposable {\n\t\tconst treeView = this.createTreeView(id, { treeDataProvider }, extension);\n\t\treturn { dispose: () => treeView.dispose() };\n\t}\n\n\tcreateTreeView<T>(viewId: string, options: vscode.TreeViewOptions<T>, extension: IExtensionDescription): vscode.TreeView<T> {\n\t\tif (!options || !options.treeDataProvider) {\n\t\t\tthrow new Error('Options with treeDataProvider is mandatory');\n\t\t}\n\t\tconst dropMimeTypes = options.dragAndDropController?.dropMimeTypes ?? [];\n\t\tconst dragMimeTypes = options.dragAndDropController?.dragMimeTypes ?? [];\n\t\tconst hasHandleDrag = !!options.dragAndDropController?.handleDrag;\n\t\tconst hasHandleDrop = !!options.dragAndDropController?.handleDrop;\n\t\tconst treeView = this._createExtHostTreeView(viewId, options, extension);\n\t\tconst proxyOptions = { showCollapseAll: !!options.showCollapseAll, canSelectMany: !!options.canSelectMany, dropMimeTypes, dragMimeTypes, hasHandleDrag, hasHandleDrop, manuallyManageCheckboxes: !!options.manageCheckboxStateManually };\n\t\tconst registerPromise = this._proxy.$registerTreeViewDataProvider(viewId, proxyOptions);\n\t\tconst view = {\n\t\t\tget onDidCollapseElement() { return treeView.onDidCollapseElement; },\n\t\t\tget onDidExpandElement() { return treeView.onDidExpandElement; },\n\t\t\tget selection() { return treeView.selectedElements; },\n\t\t\tget onDidChangeSelection() { return treeView.onDidChangeSelection; },\n\t\t\tget activeItem() {\n\t\t\t\tcheckProposedApiEnabled(extension, 'treeViewActiveItem');\n\t\t\t\treturn treeView.focusedElement;\n\t\t\t},\n\t\t\tget onDidChangeActiveItem() {\n\t\t\t\tcheckProposedApiEnabled(extension, 'treeViewActiveItem');\n\t\t\t\treturn treeView.onDidChangeActiveItem;\n\t\t\t},\n\t\t\tget visible() { return treeView.visible; },\n\t\t\tget onDidChangeVisibility() { return treeView.onDidChangeVisibility; },\n\t\t\tget onDidChangeCheckboxState() {\n\t\t\t\treturn treeView.onDidChangeCheckboxState;\n\t\t\t},\n\t\t\tget message() { return treeView.message; },\n\t\t\tset message(message: string | vscode.MarkdownString) {\n\t\t\t\tif (isMarkdownString(message)) {\n\t\t\t\t\tcheckProposedApiEnabled(extension, 'treeViewMarkdownMessage');\n\t\t\t\t}\n\t\t\t\ttreeView.message = message;\n\t\t\t},\n\t\t\tget title() { return treeView.title; },\n\t\t\tset title(title: string) {\n\t\t\t\ttreeView.title = title;\n\t\t\t},\n\t\t\tget description() {\n\t\t\t\treturn treeView.description;\n\t\t\t},\n\t\t\tset description(description: string | undefined) {\n\t\t\t\ttreeView.description = description;\n\t\t\t},\n\t\t\tget badge() {\n\t\t\t\treturn treeView.badge;\n\t\t\t},\n\t\t\tset badge(badge: vscode.ViewBadge | undefined) {\n\t\t\t\tif ((badge !== undefined) && extHostTypes.ViewBadge.isViewBadge(badge)) {\n\t\t\t\t\ttreeView.badge = {\n\t\t\t\t\t\tvalue: Math.floor(Math.abs(badge.value)),\n\t\t\t\t\t\ttooltip: badge.tooltip\n\t\t\t\t\t};\n\t\t\t\t} else if (badge === undefined) {\n\t\t\t\t\ttreeView.badge = undefined;\n\t\t\t\t}\n\t\t\t},\n\t\t\treveal: (element: T, options?: IRevealOptions): Promise<void> => {\n\t\t\t\treturn treeView.reveal(element, options);\n\t\t\t},\n\t\t\tdispose: async () => {\n\t\t\t\t// Wait for the registration promise to finish before doing the dispose.\n\t\t\t\tawait registerPromise;\n\t\t\t\tthis._treeViews.delete(viewId);\n\t\t\t\ttreeView.dispose();\n\t\t\t}\n\t\t};\n\t\tthis._register(view);\n\t\treturn view as vscode.TreeView<T>;\n\t}\n\n\tasync $getChildren(treeViewId: string, treeItemHandles?: string[]): Promise<(number | ITreeItem)[][] | undefined> {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\treturn Promise.reject(new NoTreeViewError(treeViewId));\n\t\t}\n\t\tif (!treeItemHandles) {\n\t\t\tconst children = await treeView.getChildren();\n\t\t\treturn children ? [[0, ...children]] : undefined;\n\t\t}\n\t\t// Keep order of treeItemHandles in case extension trees already depend on this\n\t\tconst result = [];\n\t\tfor (let i = 0; i < treeItemHandles.length; i++) {\n\t\t\tconst treeItemHandle = treeItemHandles[i];\n\t\t\tconst children = await treeView.getChildren(treeItemHandle);\n\t\t\tif (children) {\n\t\t\t\tresult.push([i, ...children]);\n\t\t\t}\n\n\t\t}\n\t\treturn result;\n\t}\n\n\tasync $handleDrop(destinationViewId: string, requestId: number, treeDataTransferDTO: DataTransferDTO, targetItemHandle: string | undefined, token: CancellationToken,\n\t\toperationUuid?: string, sourceViewId?: string, sourceTreeItemHandles?: string[]): Promise<void> {\n\t\tconst treeView = this._treeViews.get(destinationViewId);\n\t\tif (!treeView) {\n\t\t\treturn Promise.reject(new NoTreeViewError(destinationViewId));\n\t\t}\n\n\t\tconst treeDataTransfer = DataTransfer.toDataTransfer(treeDataTransferDTO, async dataItemIndex => {\n\t\t\treturn (await this._proxy.$resolveDropFileData(destinationViewId, requestId, dataItemIndex)).buffer;\n\t\t});\n\t\tif ((sourceViewId === destinationViewId) && sourceTreeItemHandles) {\n\t\t\tawait this._addAdditionalTransferItems(treeDataTransfer, treeView, sourceTreeItemHandles, token, operationUuid);\n\t\t}\n\t\treturn treeView.onDrop(treeDataTransfer, targetItemHandle, token);\n\t}\n\n\tprivate async _addAdditionalTransferItems(treeDataTransfer: vscode.DataTransfer, treeView: ExtHostTreeView<any>,\n\t\tsourceTreeItemHandles: string[], token: CancellationToken, operationUuid?: string): Promise<vscode.DataTransfer | undefined> {\n\t\tconst existingTransferOperation = this._treeDragAndDropService.removeDragOperationTransfer(operationUuid);\n\t\tif (existingTransferOperation) {\n\t\t\t(await existingTransferOperation)?.forEach((value, key) => {\n\t\t\t\tif (value) {\n\t\t\t\t\ttreeDataTransfer.set(key, value);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (operationUuid && treeView.handleDrag) {\n\t\t\tconst willDropPromise = treeView.handleDrag(sourceTreeItemHandles, treeDataTransfer, token);\n\t\t\tthis._treeDragAndDropService.addDragOperationTransfer(operationUuid, willDropPromise);\n\t\t\tawait willDropPromise;\n\t\t}\n\t\treturn treeDataTransfer;\n\t}\n\n\tasync $handleDrag(sourceViewId: string, sourceTreeItemHandles: string[], operationUuid: string, token: CancellationToken): Promise<DataTransferDTO | undefined> {\n\t\tconst treeView = this._treeViews.get(sourceViewId);\n\t\tif (!treeView) {\n\t\t\treturn Promise.reject(new NoTreeViewError(sourceViewId));\n\t\t}\n\n\t\tconst treeDataTransfer = await this._addAdditionalTransferItems(new extHostTypes.DataTransfer(), treeView, sourceTreeItemHandles, token, operationUuid);\n\t\tif (!treeDataTransfer || token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn DataTransfer.from(treeDataTransfer);\n\t}\n\n\tasync $hasResolve(treeViewId: string): Promise<boolean> {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\tthrow new NoTreeViewError(treeViewId);\n\t\t}\n\t\treturn treeView.hasResolve;\n\t}\n\n\t$resolve(treeViewId: string, treeItemHandle: string, token: vscode.CancellationToken): Promise<ITreeItem | undefined> {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\tthrow new NoTreeViewError(treeViewId);\n\t\t}\n\t\treturn treeView.resolveTreeItem(treeItemHandle, token);\n\t}\n\n\t$setExpanded(treeViewId: string, treeItemHandle: string, expanded: boolean): void {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\tthrow new NoTreeViewError(treeViewId);\n\t\t}\n\t\ttreeView.setExpanded(treeItemHandle, expanded);\n\t}\n\n\t$setSelectionAndFocus(treeViewId: string, selectedHandles: string[], focusedHandle: string) {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\tthrow new NoTreeViewError(treeViewId);\n\t\t}\n\t\ttreeView.setSelectionAndFocus(selectedHandles, focusedHandle);\n\t}\n\n\t$setVisible(treeViewId: string, isVisible: boolean): void {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\tif (!isVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow new NoTreeViewError(treeViewId);\n\t\t}\n\t\ttreeView.setVisible(isVisible);\n\t}\n\n\t$changeCheckboxState(treeViewId: string, checkboxUpdate: CheckboxUpdate[]): void {\n\t\tconst treeView = this._treeViews.get(treeViewId);\n\t\tif (!treeView) {\n\t\t\tthrow new NoTreeViewError(treeViewId);\n\t\t}\n\t\ttreeView.setCheckboxState(checkboxUpdate);\n\t}\n\n\tprivate _createExtHostTreeView<T>(id: string, options: vscode.TreeViewOptions<T>, extension: IExtensionDescription): ExtHostTreeView<T> {\n\t\tconst treeView = this._register(new ExtHostTreeView<T>(id, options, this._proxy, this._commands.converter, this._logService, extension));\n\t\tthis._treeViews.set(id, treeView);\n\t\treturn treeView;\n\t}\n\n\tprivate _convertArgument(arg: TreeViewItemHandleArg | TreeViewPaneHandleArg): any {\n\t\tconst treeView = this._treeViews.get(arg.$treeViewId);\n\t\tconst asItemHandle = arg as Partial<TreeViewItemHandleArg>;\n\t\tif (treeView && asItemHandle.$treeItemHandle) {\n\t\t\treturn treeView.getExtensionElement(asItemHandle.$treeItemHandle);\n\t\t}\n\t\tconst asPaneHandle = arg as Partial<TreeViewPaneHandleArg>;\n\t\tif (treeView && asPaneHandle.$focusedTreeItem) {\n\t\t\treturn treeView.focusedElement;\n\t\t}\n\t\treturn null;\n\t}\n}\n\ntype Root = null | undefined | void;\ntype TreeData<T> = { message: boolean; element: T | T[] | Root | false };\n\ninterface TreeNode extends IDisposable {\n\titem: ITreeItem;\n\textensionItem: vscode.TreeItem;\n\tparent: TreeNode | Root;\n\tchildren?: TreeNode[];\n\tdisposableStore: DisposableStore;\n}\n\nclass ExtHostTreeView<T> extends Disposable {\n\n\tprivate static readonly LABEL_HANDLE_PREFIX = '0';\n\tprivate static readonly ID_HANDLE_PREFIX = '1';\n\n\tprivate readonly _dataProvider: vscode.TreeDataProvider<T>;\n\tprivate readonly _dndController: vscode.TreeDragAndDropController<T> | undefined;\n\n\tprivate _roots: TreeNode[] | undefined = undefined;\n\tprivate _elements: Map<TreeItemHandle, T> = new Map<TreeItemHandle, T>();\n\tprivate _nodes: Map<T, TreeNode> = new Map<T, TreeNode>();\n\n\tprivate _visible: boolean = false;\n\tget visible(): boolean { return this._visible; }\n\n\tprivate _selectedHandles: TreeItemHandle[] = [];\n\tget selectedElements(): T[] { return <T[]>this._selectedHandles.map(handle => this.getExtensionElement(handle)).filter(element => !isUndefinedOrNull(element)); }\n\n\tprivate _focusedHandle: TreeItemHandle | undefined = undefined;\n\tget focusedElement(): T | undefined { return <T | undefined>(this._focusedHandle ? this.getExtensionElement(this._focusedHandle) : undefined); }\n\n\tprivate _onDidExpandElement: Emitter<vscode.TreeViewExpansionEvent<T>> = this._register(new Emitter<vscode.TreeViewExpansionEvent<T>>());\n\treadonly onDidExpandElement: Event<vscode.TreeViewExpansionEvent<T>> = this._onDidExpandElement.event;\n\n\tprivate _onDidCollapseElement: Emitter<vscode.TreeViewExpansionEvent<T>> = this._register(new Emitter<vscode.TreeViewExpansionEvent<T>>());\n\treadonly onDidCollapseElement: Event<vscode.TreeViewExpansionEvent<T>> = this._onDidCollapseElement.event;\n\n\tprivate _onDidChangeSelection: Emitter<vscode.TreeViewSelectionChangeEvent<T>> = this._register(new Emitter<vscode.TreeViewSelectionChangeEvent<T>>());\n\treadonly onDidChangeSelection: Event<vscode.TreeViewSelectionChangeEvent<T>> = this._onDidChangeSelection.event;\n\n\tprivate _onDidChangeActiveItem: Emitter<vscode.TreeViewActiveItemChangeEvent<T>> = this._register(new Emitter<vscode.TreeViewActiveItemChangeEvent<T>>());\n\treadonly onDidChangeActiveItem: Event<vscode.TreeViewActiveItemChangeEvent<T>> = this._onDidChangeActiveItem.event;\n\n\tprivate _onDidChangeVisibility: Emitter<vscode.TreeViewVisibilityChangeEvent> = this._register(new Emitter<vscode.TreeViewVisibilityChangeEvent>());\n\treadonly onDidChangeVisibility: Event<vscode.TreeViewVisibilityChangeEvent> = this._onDidChangeVisibility.event;\n\n\tprivate _onDidChangeCheckboxState = this._register(new Emitter<vscode.TreeCheckboxChangeEvent<T>>());\n\treadonly onDidChangeCheckboxState: Event<vscode.TreeCheckboxChangeEvent<T>> = this._onDidChangeCheckboxState.event;\n\n\tprivate _onDidChangeData: Emitter<TreeData<T>> = this._register(new Emitter<TreeData<T>>());\n\n\tprivate _refreshPromise: Promise<void> = Promise.resolve();\n\tprivate _refreshQueue: Promise<void> = Promise.resolve();\n\n\tprivate _nodesToClear: Set<TreeNode> = new Set<TreeNode>();\n\n\tconstructor(\n\t\tprivate _viewId: string, options: vscode.TreeViewOptions<T>,\n\t\tprivate _proxy: MainThreadTreeViewsShape,\n\t\tprivate _commands: CommandsConverter,\n\t\tprivate _logService: ILogService,\n\t\tprivate _extension: IExtensionDescription\n\t) {\n\t\tsuper();\n\t\tif (_extension.contributes && _extension.contributes.views) {\n\t\t\tfor (const location in _extension.contributes.views) {\n\t\t\t\tfor (const view of _extension.contributes.views[location]) {\n\t\t\t\t\tif (view.id === _viewId) {\n\t\t\t\t\t\tthis._title = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._dataProvider = options.treeDataProvider;\n\t\tthis._dndController = options.dragAndDropController;\n\t\tif (this._dataProvider.onDidChangeTreeData) {\n\t\t\tthis._register(this._dataProvider.onDidChangeTreeData(elementOrElements => {\n\t\t\t\tif (Array.isArray(elementOrElements) && elementOrElements.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._onDidChangeData.fire({ message: false, element: elementOrElements });\n\t\t\t}));\n\t\t}\n\n\t\tlet refreshingPromise: Promise<void> | null;\n\t\tlet promiseCallback: () => void;\n\t\tconst onDidChangeData = Event.debounce<TreeData<T>, { message: boolean; elements: (T | Root)[] }>(this._onDidChangeData.event, (result, current) => {\n\t\t\tif (!result) {\n\t\t\t\tresult = { message: false, elements: [] };\n\t\t\t}\n\t\t\tif (current.element !== false) {\n\t\t\t\tif (!refreshingPromise) {\n\t\t\t\t\t// New refresh has started\n\t\t\t\t\trefreshingPromise = new Promise(c => promiseCallback = c);\n\t\t\t\t\tthis._refreshPromise = this._refreshPromise.then(() => refreshingPromise!);\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(current.element)) {\n\t\t\t\t\tresult.elements.push(...current.element);\n\t\t\t\t} else {\n\t\t\t\t\tresult.elements.push(current.element);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (current.message) {\n\t\t\t\tresult.message = true;\n\t\t\t}\n\t\t\treturn result;\n\t\t}, 200, true);\n\t\tthis._register(onDidChangeData(({ message, elements }) => {\n\t\t\tif (elements.length) {\n\t\t\t\telements = distinct(elements);\n\t\t\t\tthis._refreshQueue = this._refreshQueue.then(() => {\n\t\t\t\t\tconst _promiseCallback = promiseCallback;\n\t\t\t\t\trefreshingPromise = null;\n\t\t\t\t\tconst childrenToClear = Array.from(this._nodesToClear);\n\t\t\t\t\tthis._nodesToClear.clear();\n\t\t\t\t\tthis._debugLogRefresh('start', elements, childrenToClear);\n\t\t\t\t\treturn this._refresh(elements).then(() => {\n\t\t\t\t\t\tthis._debugLogRefresh('done', elements, childrenToClear);\n\t\t\t\t\t\tthis._clearNodes(childrenToClear);\n\t\t\t\t\t\treturn _promiseCallback();\n\t\t\t\t\t}).catch(e => {\n\t\t\t\t\t\tconst message = e instanceof Error ? e.message : JSON.stringify(e);\n\t\t\t\t\t\tthis._debugLogRefresh('error', elements, childrenToClear);\n\t\t\t\t\t\tthis._clearNodes(childrenToClear);\n\t\t\t\t\t\tthis._logService.error(`Unable to refresh tree view ${this._viewId}: ${message}`);\n\t\t\t\t\t\treturn _promiseCallback();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (message) {\n\t\t\t\tthis._proxy.$setMessage(this._viewId, MarkdownString.fromStrict(this._message) ?? '');\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _debugCollectHandles(elements: (T | Root)[]): { changed: string[]; roots: string[]; clearing?: string[] } {\n\t\tconst changed: string[] = [];\n\t\tfor (const el of elements) {\n\t\t\tif (!el) {\n\t\t\t\tchanged.push('<root>');\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst node = this._nodes.get(el as T);\n\t\t\tif (node) {\n\t\t\t\tchanged.push(node.item.handle);\n\t\t\t}\n\t\t}\n\t\tconst roots = this._roots?.map(r => r.item.handle) ?? [];\n\t\treturn { changed, roots };\n\t}\n\n\tprivate _debugLogRefresh(phase: 'start' | 'done' | 'error', elements: (T | Root)[], childrenToClear: TreeNode[]): void {\n\t\tif (!this._isDebugLogging()) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tconst snapshot = this._debugCollectHandles(elements);\n\t\t\tsnapshot.clearing = childrenToClear.map(n => n.item.handle);\n\t\t\tconst changedCount = snapshot.changed.length;\n\t\t\tconst nodesToClearLen = childrenToClear.length;\n\t\t\tthis._logService.debug(`[TreeView:${this._viewId}] refresh ${phase} changed=${changedCount} nodesToClear=${nodesToClearLen} elements.size=${this._elements.size} nodes.size=${this._nodes.size} handles=${JSON.stringify(snapshot)}`);\n\t\t} catch {\n\t\t\tthis._logService.debug(`[TreeView:${this._viewId}] refresh ${phase} (snapshot failed)`);\n\t\t}\n\t}\n\n\tprivate _isDebugLogging(): boolean {\n\t\ttry {\n\t\t\tconst level = this._logService.getLevel();\n\t\t\treturn (level === LogLevel.Debug) || (level === LogLevel.Trace);\n\t\t} catch {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tasync getChildren(parentHandle: TreeItemHandle | Root): Promise<ITreeItem[] | undefined> {\n\t\tconst parentElement = parentHandle ? this.getExtensionElement(parentHandle) : undefined;\n\t\tif (parentHandle && !parentElement) {\n\t\t\tthis._logService.error(`No tree item with id \\'${parentHandle}\\' found.`);\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\n\t\tlet childrenNodes: TreeNode[] | undefined = this._getChildrenNodes(parentHandle); // Get it from cache\n\n\t\tif (!childrenNodes) {\n\t\t\tchildrenNodes = await this._fetchChildrenNodes(parentElement);\n\t\t}\n\n\t\treturn childrenNodes ? childrenNodes.map(n => n.item) : undefined;\n\t}\n\n\tgetExtensionElement(treeItemHandle: TreeItemHandle): T | undefined {\n\t\treturn this._elements.get(treeItemHandle);\n\t}\n\n\treveal(element: T | undefined, options?: IRevealOptions): Promise<void> {\n\t\toptions = options ? options : { select: true, focus: false };\n\t\tconst select = isUndefinedOrNull(options.select) ? true : options.select;\n\t\tconst focus = isUndefinedOrNull(options.focus) ? false : options.focus;\n\t\tconst expand = isUndefinedOrNull(options.expand) ? false : options.expand;\n\n\t\tif (typeof this._dataProvider.getParent !== 'function') {\n\t\t\treturn Promise.reject(new Error(`Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method`));\n\t\t}\n\n\t\tif (element) {\n\t\t\treturn this._refreshPromise\n\t\t\t\t.then(() => this._resolveUnknownParentChain(element))\n\t\t\t\t.then(parentChain => this._resolveTreeNode(element, parentChain[parentChain.length - 1])\n\t\t\t\t\t.then(treeNode => this._proxy.$reveal(this._viewId, { item: treeNode.item, parentChain: parentChain.map(p => p.item) }, { select, focus, expand })), error => this._logService.error(error));\n\t\t} else {\n\t\t\treturn this._proxy.$reveal(this._viewId, undefined, { select, focus, expand });\n\t\t}\n\t}\n\n\tprivate _message: string | vscode.MarkdownString = '';\n\tget message(): string | vscode.MarkdownString {\n\t\treturn this._message;\n\t}\n\n\tset message(message: string | vscode.MarkdownString) {\n\t\tthis._message = message;\n\t\tthis._onDidChangeData.fire({ message: true, element: false });\n\t}\n\n\tprivate _title: string = '';\n\tget title(): string {\n\t\treturn this._title;\n\t}\n\n\tset title(title: string) {\n\t\tthis._title = title;\n\t\tthis._proxy.$setTitle(this._viewId, title, this._description);\n\t}\n\n\tprivate _description: string | undefined;\n\tget description(): string | undefined {\n\t\treturn this._description;\n\t}\n\n\tset description(description: string | undefined) {\n\t\tthis._description = description;\n\t\tthis._proxy.$setTitle(this._viewId, this._title, description);\n\t}\n\n\tprivate _badge: vscode.ViewBadge | undefined;\n\tget badge(): vscode.ViewBadge | undefined {\n\t\treturn this._badge;\n\t}\n\n\tset badge(badge: vscode.ViewBadge | undefined) {\n\t\tif (this._badge?.value === badge?.value &&\n\t\t\tthis._badge?.tooltip === badge?.tooltip) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._badge = ViewBadge.from(badge);\n\t\tthis._proxy.$setBadge(this._viewId, badge);\n\t}\n\n\tsetExpanded(treeItemHandle: TreeItemHandle, expanded: boolean): void {\n\t\tconst element = this.getExtensionElement(treeItemHandle);\n\t\tif (element) {\n\t\t\tif (expanded) {\n\t\t\t\tthis._onDidExpandElement.fire(Object.freeze({ element }));\n\t\t\t} else {\n\t\t\t\tthis._onDidCollapseElement.fire(Object.freeze({ element }));\n\t\t\t}\n\t\t}\n\t}\n\n\tsetSelectionAndFocus(selectedHandles: TreeItemHandle[], focusedHandle: string): void {\n\t\tconst changedSelection = !equals(this._selectedHandles, selectedHandles);\n\t\tthis._selectedHandles = selectedHandles;\n\n\t\tconst changedFocus = this._focusedHandle !== focusedHandle;\n\t\tthis._focusedHandle = focusedHandle;\n\n\t\tif (changedSelection) {\n\t\t\tthis._onDidChangeSelection.fire(Object.freeze({ selection: this.selectedElements }));\n\t\t}\n\n\t\tif (changedFocus) {\n\t\t\tthis._onDidChangeActiveItem.fire(Object.freeze({ activeItem: this.focusedElement }));\n\t\t}\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tif (visible !== this._visible) {\n\t\t\tthis._visible = visible;\n\t\t\tthis._onDidChangeVisibility.fire(Object.freeze({ visible: this._visible }));\n\t\t}\n\t}\n\n\tasync setCheckboxState(checkboxUpdates: CheckboxUpdate[]) {\n\t\ttype CheckboxUpdateWithItem = { extensionItem: NonNullable<T>; treeItem: vscode.TreeItem; newState: extHostTypes.TreeItemCheckboxState };\n\t\tconst items = (await Promise.all(checkboxUpdates.map(async checkboxUpdate => {\n\t\t\tconst extensionItem = this.getExtensionElement(checkboxUpdate.treeItemHandle);\n\t\t\tif (extensionItem) {\n\t\t\t\treturn {\n\t\t\t\t\textensionItem: extensionItem,\n\t\t\t\t\ttreeItem: await this._dataProvider.getTreeItem(extensionItem),\n\t\t\t\t\tnewState: checkboxUpdate.newState ? extHostTypes.TreeItemCheckboxState.Checked : extHostTypes.TreeItemCheckboxState.Unchecked\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn Promise.resolve(undefined);\n\t\t}))).filter<CheckboxUpdateWithItem>((item): item is CheckboxUpdateWithItem => item !== undefined);\n\n\t\titems.forEach(item => {\n\t\t\titem.treeItem.checkboxState = item.newState ? extHostTypes.TreeItemCheckboxState.Checked : extHostTypes.TreeItemCheckboxState.Unchecked;\n\t\t});\n\n\t\tthis._onDidChangeCheckboxState.fire({ items: items.map(item => [item.extensionItem, item.newState]) });\n\t}\n\n\tasync handleDrag(sourceTreeItemHandles: TreeItemHandle[], treeDataTransfer: vscode.DataTransfer, token: CancellationToken): Promise<vscode.DataTransfer | undefined> {\n\t\tconst extensionTreeItems: T[] = [];\n\t\tfor (const sourceHandle of sourceTreeItemHandles) {\n\t\t\tconst extensionItem = this.getExtensionElement(sourceHandle);\n\t\t\tif (extensionItem) {\n\t\t\t\textensionTreeItems.push(extensionItem);\n\t\t\t}\n\t\t}\n\n\t\tif (!this._dndController?.handleDrag || (extensionTreeItems.length === 0)) {\n\t\t\treturn;\n\t\t}\n\t\tawait this._dndController.handleDrag(extensionTreeItems, treeDataTransfer, token);\n\t\treturn treeDataTransfer;\n\t}\n\n\tget hasHandleDrag(): boolean {\n\t\treturn !!this._dndController?.handleDrag;\n\t}\n\n\tasync onDrop(treeDataTransfer: vscode.DataTransfer, targetHandleOrNode: TreeItemHandle | undefined, token: CancellationToken): Promise<void> {\n\t\tconst target = targetHandleOrNode ? this.getExtensionElement(targetHandleOrNode) : undefined;\n\t\tif ((!target && targetHandleOrNode) || !this._dndController?.handleDrop) {\n\t\t\treturn;\n\t\t}\n\t\treturn asPromise(() => this._dndController?.handleDrop\n\t\t\t? this._dndController.handleDrop(target, treeDataTransfer, token)\n\t\t\t: undefined);\n\t}\n\n\tget hasResolve(): boolean {\n\t\treturn !!this._dataProvider.resolveTreeItem;\n\t}\n\n\tasync resolveTreeItem(treeItemHandle: string, token: vscode.CancellationToken): Promise<ITreeItem | undefined> {\n\t\tif (!this._dataProvider.resolveTreeItem) {\n\t\t\treturn;\n\t\t}\n\t\tconst element = this._elements.get(treeItemHandle);\n\t\tif (element) {\n\t\t\tconst node = this._nodes.get(element);\n\t\t\tif (node) {\n\t\t\t\tconst resolve = await this._dataProvider.resolveTreeItem(node.extensionItem, element, token) ?? node.extensionItem;\n\t\t\t\tthis._validateTreeItem(resolve);\n\t\t\t\t// Resolvable elements. Currently only tooltip and command.\n\t\t\t\tnode.item.tooltip = this._getTooltip(resolve.tooltip);\n\t\t\t\tnode.item.command = this._getCommand(node.disposableStore, resolve.command);\n\t\t\t\treturn node.item;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate _resolveUnknownParentChain(element: T): Promise<TreeNode[]> {\n\t\treturn this._resolveParent(element)\n\t\t\t.then((parent) => {\n\t\t\t\tif (!parent) {\n\t\t\t\t\treturn Promise.resolve([]);\n\t\t\t\t}\n\t\t\t\treturn this._resolveUnknownParentChain(parent)\n\t\t\t\t\t.then(result => this._resolveTreeNode(parent, result[result.length - 1])\n\t\t\t\t\t\t.then(parentNode => {\n\t\t\t\t\t\t\tresult.push(parentNode);\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}));\n\t\t\t});\n\t}\n\n\tprivate _resolveParent(element: T): Promise<T | Root> {\n\t\tconst node = this._nodes.get(element);\n\t\tif (node) {\n\t\t\treturn Promise.resolve(node.parent ? this._elements.get(node.parent.item.handle) : undefined);\n\t\t}\n\t\treturn asPromise(() => this._dataProvider.getParent!(element));\n\t}\n\n\tprivate _resolveTreeNode(element: T, parent?: TreeNode): Promise<TreeNode> {\n\t\tconst node = this._nodes.get(element);\n\t\tif (node) {\n\t\t\treturn Promise.resolve(node);\n\t\t}\n\t\treturn asPromise(() => this._dataProvider.getTreeItem(element))\n\t\t\t.then(extTreeItem => this._createHandle(element, extTreeItem, parent, true))\n\t\t\t.then(handle => this.getChildren(parent ? parent.item.handle : undefined)\n\t\t\t\t.then(() => {\n\t\t\t\t\tconst cachedElement = this.getExtensionElement(handle);\n\t\t\t\t\tif (cachedElement) {\n\t\t\t\t\t\tconst node = this._nodes.get(cachedElement);\n\t\t\t\t\t\tif (node) {\n\t\t\t\t\t\t\treturn Promise.resolve(node);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(`Cannot resolve tree item for element ${handle} from extension ${this._extension.identifier.value}`);\n\t\t\t\t}));\n\t}\n\n\tprivate _getChildrenNodes(parentNodeOrHandle: TreeNode | TreeItemHandle | Root): TreeNode[] | undefined {\n\t\tif (parentNodeOrHandle) {\n\t\t\tlet parentNode: TreeNode | undefined;\n\t\t\tif (typeof parentNodeOrHandle === 'string') {\n\t\t\t\tconst parentElement = this.getExtensionElement(parentNodeOrHandle);\n\t\t\t\tparentNode = parentElement ? this._nodes.get(parentElement) : undefined;\n\t\t\t} else {\n\t\t\t\tparentNode = parentNodeOrHandle;\n\t\t\t}\n\t\t\treturn parentNode ? parentNode.children || undefined : undefined;\n\t\t}\n\t\treturn this._roots;\n\t}\n\n\tprivate async _fetchChildrenNodes(parentElement?: T): Promise<TreeNode[] | undefined> {\n\t\t// clear children cache\n\t\tthis._addChildrenToClear(parentElement);\n\n\t\tconst cts = new CancellationTokenSource(this._refreshCancellationSource.token);\n\n\t\ttry {\n\t\t\tconst elements = await this._dataProvider.getChildren(parentElement);\n\t\t\tconst parentNode = parentElement ? this._nodes.get(parentElement) : undefined;\n\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst coalescedElements = coalesce(elements || []);\n\t\t\tconst treeItems = await Promise.all(coalesce(coalescedElements).map(element => {\n\t\t\t\treturn this._dataProvider.getTreeItem(element);\n\t\t\t}));\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// createAndRegisterTreeNodes adds the nodes to a cache. This must be done sync so that they get added in the correct order.\n\t\t\tconst items = treeItems.map((item, index) => item ? this._createAndRegisterTreeNode(coalescedElements[index], item, parentNode) : null);\n\n\t\t\treturn coalesce(items);\n\t\t} finally {\n\t\t\tcts.dispose();\n\t\t}\n\t}\n\n\tprivate _refreshCancellationSource = new CancellationTokenSource();\n\n\tprivate _refresh(elements: (T | Root)[]): Promise<void> {\n\t\tconst hasRoot = elements.some(element => !element);\n\t\tif (hasRoot) {\n\t\t\t// Cancel any pending children fetches\n\t\t\tthis._refreshCancellationSource.dispose(true);\n\t\t\tthis._refreshCancellationSource = new CancellationTokenSource();\n\n\t\t\tthis._addChildrenToClear();\n\t\t\treturn this._proxy.$refresh(this._viewId);\n\t\t} else {\n\t\t\tconst handlesToRefresh = this._getHandlesToRefresh(<T[]>elements);\n\t\t\tif (handlesToRefresh.length) {\n\t\t\t\treturn this._refreshHandles(handlesToRefresh);\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tprivate _getHandlesToRefresh(elements: T[]): TreeItemHandle[] {\n\t\tconst elementsToUpdate = new Set<TreeItemHandle>();\n\t\tconst elementNodes = elements.map(element => this._nodes.get(element));\n\t\tfor (const elementNode of elementNodes) {\n\t\t\tif (elementNode && !elementsToUpdate.has(elementNode.item.handle)) {\n\t\t\t\t// check if an ancestor of extElement is already in the elements list\n\t\t\t\tlet currentNode: TreeNode | undefined = elementNode;\n\t\t\t\twhile (currentNode && currentNode.parent && elementNodes.findIndex(node => currentNode && currentNode.parent && node && node.item.handle === currentNode.parent.item.handle) === -1) {\n\t\t\t\t\tconst parentElement: T | undefined = this._elements.get(currentNode.parent.item.handle);\n\t\t\t\t\tcurrentNode = parentElement ? this._nodes.get(parentElement) : undefined;\n\t\t\t\t}\n\t\t\t\tif (currentNode && !currentNode.parent) {\n\t\t\t\t\telementsToUpdate.add(elementNode.item.handle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst handlesToUpdate: TreeItemHandle[] = [];\n\t\t// Take only top level elements\n\t\telementsToUpdate.forEach((handle) => {\n\t\t\tconst element = this._elements.get(handle);\n\t\t\tif (element) {\n\t\t\t\tconst node = this._nodes.get(element);\n\t\t\t\tif (node && (!node.parent || !elementsToUpdate.has(node.parent.item.handle))) {\n\t\t\t\t\thandlesToUpdate.push(handle);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn handlesToUpdate;\n\t}\n\n\tprivate _refreshHandles(itemHandles: TreeItemHandle[]): Promise<void> {\n\t\tconst itemsToRefresh: { [treeItemHandle: string]: ITreeItem } = {};\n\t\treturn Promise.all(itemHandles.map(treeItemHandle =>\n\t\t\tthis._refreshNode(treeItemHandle)\n\t\t\t\t.then(node => {\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\titemsToRefresh[treeItemHandle] = node.item;\n\t\t\t\t\t}\n\t\t\t\t})))\n\t\t\t.then(() => Object.keys(itemsToRefresh).length ? this._proxy.$refresh(this._viewId, itemsToRefresh) : undefined);\n\t}\n\n\tprivate _refreshNode(treeItemHandle: TreeItemHandle): Promise<TreeNode | null> {\n\t\tconst extElement = this.getExtensionElement(treeItemHandle);\n\t\tif (extElement) {\n\t\t\tconst existing = this._nodes.get(extElement);\n\t\t\tif (existing) {\n\t\t\t\tthis._addChildrenToClear(extElement); // clear children cache\n\t\t\t\treturn asPromise(() => this._dataProvider.getTreeItem(extElement))\n\t\t\t\t\t.then(extTreeItem => {\n\t\t\t\t\t\tif (extTreeItem) {\n\t\t\t\t\t\t\tconst newNode = this._createTreeNode(extElement, extTreeItem, existing.parent);\n\t\t\t\t\t\t\tthis._updateNodeCache(extElement, newNode, existing, existing.parent);\n\t\t\t\t\t\t\texisting.dispose();\n\t\t\t\t\t\t\treturn newNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n\n\tprivate _createAndRegisterTreeNode(element: T, extTreeItem: vscode.TreeItem, parentNode: TreeNode | Root): TreeNode {\n\t\tconst node = this._createTreeNode(element, extTreeItem, parentNode);\n\t\tif (extTreeItem.id && this._elements.has(node.item.handle)) {\n\t\t\tthrow new Error(localize('treeView.duplicateElement', 'Element with id {0} is already registered', extTreeItem.id));\n\t\t}\n\t\tthis._addNodeToCache(element, node);\n\t\tthis._addNodeToParentCache(node, parentNode);\n\t\treturn node;\n\t}\n\n\tprivate _getTooltip(tooltip?: string | vscode.MarkdownString): string | IMarkdownString | undefined {\n\t\tif (extHostTypes.MarkdownString.isMarkdownString(tooltip)) {\n\t\t\treturn MarkdownString.from(tooltip);\n\t\t}\n\t\treturn tooltip;\n\t}\n\n\tprivate _getCommand(disposable: DisposableStore, command?: vscode.Command): TreeCommand | undefined {\n\t\treturn command ? { ...this._commands.toInternal(command, disposable), originalId: command.command } : undefined;\n\t}\n\n\tprivate _getCheckbox(extensionTreeItem: vscode.TreeItem): ITreeItemCheckboxState | undefined {\n\t\tif (extensionTreeItem.checkboxState === undefined) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet checkboxState: extHostTypes.TreeItemCheckboxState;\n\t\tlet tooltip: string | undefined = undefined;\n\t\tlet accessibilityInformation: IAccessibilityInformation | undefined = undefined;\n\t\tif (typeof extensionTreeItem.checkboxState === 'number') {\n\t\t\tcheckboxState = extensionTreeItem.checkboxState;\n\t\t} else {\n\t\t\tcheckboxState = extensionTreeItem.checkboxState.state;\n\t\t\ttooltip = extensionTreeItem.checkboxState.tooltip;\n\t\t\taccessibilityInformation = extensionTreeItem.checkboxState.accessibilityInformation;\n\t\t}\n\t\treturn { isChecked: checkboxState === extHostTypes.TreeItemCheckboxState.Checked, tooltip, accessibilityInformation };\n\t}\n\n\tprivate _validateTreeItem(extensionTreeItem: vscode.TreeItem) {\n\t\tif (!extHostTypes.TreeItem.isTreeItem(extensionTreeItem, this._extension)) {\n\t\t\tthrow new Error(`Extension ${this._extension.identifier.value} has provided an invalid tree item.`);\n\t\t}\n\t}\n\n\tprivate _createTreeNode(element: T, extensionTreeItem: vscode.TreeItem, parent: TreeNode | Root): TreeNode {\n\t\tthis._validateTreeItem(extensionTreeItem);\n\t\tconst disposableStore = this._register(new DisposableStore());\n\t\tconst handle = this._createHandle(element, extensionTreeItem, parent);\n\t\tconst icon = this._getLightIconPath(extensionTreeItem);\n\t\tconst item: ITreeItem = {\n\t\t\thandle,\n\t\t\tparentHandle: parent ? parent.item.handle : undefined,\n\t\t\tlabel: toTreeItemLabel(extensionTreeItem.label, this._extension),\n\t\t\tdescription: extensionTreeItem.description,\n\t\t\tresourceUri: extensionTreeItem.resourceUri,\n\t\t\ttooltip: this._getTooltip(extensionTreeItem.tooltip),\n\t\t\tcommand: this._getCommand(disposableStore, extensionTreeItem.command),\n\t\t\tcontextValue: extensionTreeItem.contextValue,\n\t\t\ticon,\n\t\t\ticonDark: this._getDarkIconPath(extensionTreeItem) || icon,\n\t\t\tthemeIcon: this._getThemeIcon(extensionTreeItem),\n\t\t\tcollapsibleState: isUndefinedOrNull(extensionTreeItem.collapsibleState) ? extHostTypes.TreeItemCollapsibleState.None : extensionTreeItem.collapsibleState,\n\t\t\taccessibilityInformation: extensionTreeItem.accessibilityInformation,\n\t\t\tcheckbox: this._getCheckbox(extensionTreeItem),\n\t\t};\n\n\t\treturn {\n\t\t\titem,\n\t\t\textensionItem: extensionTreeItem,\n\t\t\tparent,\n\t\t\tchildren: undefined,\n\t\t\tdisposableStore,\n\t\t\tdispose(): void { disposableStore.dispose(); }\n\t\t};\n\t}\n\n\tprivate _getThemeIcon(extensionTreeItem: vscode.TreeItem): extHostTypes.ThemeIcon | undefined {\n\t\treturn extensionTreeItem.iconPath instanceof extHostTypes.ThemeIcon ? extensionTreeItem.iconPath : undefined;\n\t}\n\n\tprivate _createHandle(element: T, { id, label, resourceUri }: vscode.TreeItem, parent: TreeNode | Root, returnFirst?: boolean): TreeItemHandle {\n\t\tif (id) {\n\t\t\treturn `${ExtHostTreeView.ID_HANDLE_PREFIX}/${id}`;\n\t\t}\n\n\t\tconst treeItemLabel = toTreeItemLabel(label, this._extension);\n\t\tconst prefix: string = parent ? parent.item.handle : ExtHostTreeView.LABEL_HANDLE_PREFIX;\n\t\tlet labelValue = '';\n\t\tif (treeItemLabel) {\n\t\t\tif (isMarkdownString(treeItemLabel.label)) {\n\t\t\t\tlabelValue = treeItemLabel.label.value;\n\t\t\t} else {\n\t\t\t\tlabelValue = treeItemLabel.label;\n\t\t\t}\n\t\t}\n\t\tlet elementId = labelValue || (resourceUri ? basename(resourceUri) : '');\n\t\telementId = elementId.indexOf('/') !== -1 ? elementId.replace('/', '//') : elementId;\n\t\tconst existingHandle = this._nodes.has(element) ? this._nodes.get(element)!.item.handle : undefined;\n\t\tconst childrenNodes = (this._getChildrenNodes(parent) || []);\n\n\t\tlet handle: TreeItemHandle;\n\t\tlet counter = 0;\n\t\tdo {\n\t\t\thandle = `${prefix}/${counter}:${elementId}`;\n\t\t\tif (returnFirst || !this._elements.has(handle) || existingHandle === handle) {\n\t\t\t\t// Return first if asked for or\n\t\t\t\t// Return if handle does not exist or\n\t\t\t\t// Return if handle is being reused\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcounter++;\n\t\t} while (counter <= childrenNodes.length);\n\n\t\treturn handle;\n\t}\n\n\tprivate _getLightIconPath(extensionTreeItem: vscode.TreeItem): URI | undefined {\n\t\tif (extensionTreeItem.iconPath && !(extensionTreeItem.iconPath instanceof extHostTypes.ThemeIcon)) {\n\t\t\tif (typeof extensionTreeItem.iconPath === 'string'\n\t\t\t\t|| URI.isUri(extensionTreeItem.iconPath)) {\n\t\t\t\treturn this._getIconPath(extensionTreeItem.iconPath);\n\t\t\t}\n\t\t\treturn this._getIconPath((<{ light: string | URI; dark: string | URI }>extensionTreeItem.iconPath).light);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate _getDarkIconPath(extensionTreeItem: vscode.TreeItem): URI | undefined {\n\t\tif (extensionTreeItem.iconPath && !(extensionTreeItem.iconPath instanceof extHostTypes.ThemeIcon) && (<{ light: string | URI; dark: string | URI }>extensionTreeItem.iconPath).dark) {\n\t\t\treturn this._getIconPath((<{ light: string | URI; dark: string | URI }>extensionTreeItem.iconPath).dark);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate _getIconPath(iconPath: string | URI): URI {\n\t\tif (URI.isUri(iconPath)) {\n\t\t\treturn iconPath;\n\t\t}\n\t\treturn URI.file(iconPath);\n\t}\n\n\tprivate _addNodeToCache(element: T, node: TreeNode): void {\n\t\tthis._elements.set(node.item.handle, element);\n\t\tthis._nodes.set(element, node);\n\t}\n\n\tprivate _updateNodeCache(element: T, newNode: TreeNode, existing: TreeNode, parentNode: TreeNode | Root): void {\n\t\t// Remove from the cache\n\t\tthis._elements.delete(newNode.item.handle);\n\t\tthis._nodes.delete(element);\n\t\tif (newNode.item.handle !== existing.item.handle) {\n\t\t\tthis._elements.delete(existing.item.handle);\n\t\t}\n\n\t\t// Add the new node to the cache\n\t\tthis._addNodeToCache(element, newNode);\n\n\t\t// Replace the node in parent's children nodes\n\t\tconst childrenNodes = (this._getChildrenNodes(parentNode) || []);\n\t\tconst childNode = childrenNodes.filter(c => c.item.handle === existing.item.handle)[0];\n\t\tif (childNode) {\n\t\t\tchildrenNodes.splice(childrenNodes.indexOf(childNode), 1, newNode);\n\t\t}\n\t}\n\n\tprivate _addNodeToParentCache(node: TreeNode, parentNode: TreeNode | Root): void {\n\t\tif (parentNode) {\n\t\t\tif (!parentNode.children) {\n\t\t\t\tparentNode.children = [];\n\t\t\t}\n\t\t\tparentNode.children.push(node);\n\t\t} else {\n\t\t\tif (!this._roots) {\n\t\t\t\tthis._roots = [];\n\t\t\t}\n\t\t\tthis._roots.push(node);\n\t\t}\n\t}\n\n\tprivate _addChildrenToClear(parentElement?: T): void {\n\t\tif (parentElement) {\n\t\t\tconst node = this._nodes.get(parentElement);\n\t\t\tif (node) {\n\t\t\t\tif (node.children) {\n\t\t\t\t\tfor (const child of node.children) {\n\t\t\t\t\t\tthis._nodesToClear.add(child);\n\t\t\t\t\t\tconst childElement = this._elements.get(child.item.handle);\n\t\t\t\t\t\tif (childElement) {\n\t\t\t\t\t\t\tthis._addChildrenToClear(childElement);\n\t\t\t\t\t\t\tthis._nodes.delete(childElement);\n\t\t\t\t\t\t\tthis._elements.delete(child.item.handle);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnode.children = undefined;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._addAllToClear();\n\t\t}\n\t}\n\n\tprivate _addAllToClear(): void {\n\t\tthis._roots = undefined;\n\t\tthis._nodes.forEach(node => {\n\t\t\tthis._nodesToClear.add(node);\n\t\t});\n\t\tthis._nodes.clear();\n\t\tthis._elements.clear();\n\t}\n\n\tprivate _clearNodes(nodes: TreeNode[]): void {\n\t\tdispose(nodes);\n\t}\n\n\tprivate _clearAll(): void {\n\t\tthis._roots = undefined;\n\t\tthis._elements.clear();\n\t\tdispose(this._nodes.values());\n\t\tthis._nodes.clear();\n\t\tdispose(this._nodesToClear);\n\t\tthis._nodesToClear.clear();\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._refreshCancellationSource.dispose();\n\n\t\tthis._clearAll();\n\t\tthis._proxy.$disposeTree(this._viewId);\n\t}\n}\n"]}