{"version":3,"sources":["vs/workbench/api/common/extHostLanguageFeatures.ts"],"names":[],"mappings":"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","file":"extHostLanguageFeatures.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { asArray, coalesce, isFalsyOrEmpty, isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { raceCancellationError } from '../../../base/common/async.js';\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { NotImplementedError, isCancellationError } from '../../../base/common/errors.js';\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\nimport { DisposableStore, Disposable as CoreDisposable } from '../../../base/common/lifecycle.js';\nimport { equals, mixin } from '../../../base/common/objects.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { regExpLeadsToEndlessLoop } from '../../../base/common/strings.js';\nimport { assertType, isObject } from '../../../base/common/types.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IURITransformer } from '../../../base/common/uriIpc.js';\nimport { generateUuid } from '../../../base/common/uuid.js';\nimport { IPosition } from '../../../editor/common/core/position.js';\nimport { Range as EditorRange, IRange } from '../../../editor/common/core/range.js';\nimport { ISelection, Selection } from '../../../editor/common/core/selection.js';\nimport * as languages from '../../../editor/common/languages.js';\nimport { IAutoClosingPairConditional } from '../../../editor/common/languages/languageConfiguration.js';\nimport { encodeSemanticTokensDto } from '../../../editor/common/services/semanticTokensDto.js';\nimport { localize } from '../../../nls.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport { Cache } from './cache.js';\nimport * as extHostProtocol from './extHost.protocol.js';\nimport { IExtHostApiDeprecationService } from './extHostApiDeprecationService.js';\nimport { CommandsConverter, ExtHostCommands } from './extHostCommands.js';\nimport { ExtHostDiagnostics } from './extHostDiagnostics.js';\nimport { ExtHostDocuments } from './extHostDocuments.js';\nimport { ExtHostTelemetry, IExtHostTelemetry } from './extHostTelemetry.js';\nimport * as typeConvert from './extHostTypeConverters.js';\nimport { CodeAction, CodeActionKind, CompletionList, DataTransfer, Disposable, DocumentDropOrPasteEditKind, DocumentSymbol, InlineCompletionsDisposeReasonKind, InlineCompletionTriggerKind, InternalDataTransferItem, Location, NewSymbolNameTriggerKind, Range, SemanticTokens, SemanticTokensEdit, SemanticTokensEdits, SnippetString, SymbolInformation, SyntaxTokenType } from './extHostTypes.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { IInlineCompletionsUnificationState } from '../../services/inlineCompletions/common/inlineCompletionsUnification.js';\n\n// --- adapter\n\nclass DocumentSymbolAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentSymbolProvider\n\t) { }\n\n\tasync provideDocumentSymbols(resource: URI, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideDocumentSymbols(doc, token);\n\t\tif (isFalsyOrEmpty(value)) {\n\t\t\treturn undefined;\n\t\t} else if (value![0] instanceof DocumentSymbol) {\n\t\t\treturn (<DocumentSymbol[]>value).map(typeConvert.DocumentSymbol.from);\n\t\t} else {\n\t\t\treturn DocumentSymbolAdapter._asDocumentSymbolTree(<SymbolInformation[]>value);\n\t\t}\n\t}\n\n\tprivate static _asDocumentSymbolTree(infos: SymbolInformation[]): languages.DocumentSymbol[] {\n\t\t// first sort by start (and end) and then loop over all elements\n\t\t// and build a tree based on containment.\n\t\tinfos = infos.slice(0).sort((a, b) => {\n\t\t\tlet res = a.location.range.start.compareTo(b.location.range.start);\n\t\t\tif (res === 0) {\n\t\t\t\tres = b.location.range.end.compareTo(a.location.range.end);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t\tconst res: languages.DocumentSymbol[] = [];\n\t\tconst parentStack: languages.DocumentSymbol[] = [];\n\t\tfor (const info of infos) {\n\t\t\tconst element: languages.DocumentSymbol = {\n\t\t\t\tname: info.name || '!!MISSING: name!!',\n\t\t\t\tkind: typeConvert.SymbolKind.from(info.kind),\n\t\t\t\ttags: info.tags?.map(typeConvert.SymbolTag.from) || [],\n\t\t\t\tdetail: '',\n\t\t\t\tcontainerName: info.containerName,\n\t\t\t\trange: typeConvert.Range.from(info.location.range),\n\t\t\t\tselectionRange: typeConvert.Range.from(info.location.range),\n\t\t\t\tchildren: []\n\t\t\t};\n\n\t\t\twhile (true) {\n\t\t\t\tif (parentStack.length === 0) {\n\t\t\t\t\tparentStack.push(element);\n\t\t\t\t\tres.push(element);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst parent = parentStack[parentStack.length - 1];\n\t\t\t\tif (EditorRange.containsRange(parent.range, element.range) && !EditorRange.equalsRange(parent.range, element.range)) {\n\t\t\t\t\tparent.children?.push(element);\n\t\t\t\t\tparentStack.push(element);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparentStack.pop();\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n}\n\nclass CodeLensAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.CodeLens>('CodeLens');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.CodeLensProvider,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _extTelemetry: ExtHostTelemetry,\n\t\tprivate readonly _logService: ILogService,\n\t) { }\n\n\tasync provideCodeLenses(resource: URI, token: CancellationToken): Promise<extHostProtocol.ICodeLensListDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\n\t\tconst lenses = await this._provider.provideCodeLenses(doc, token);\n\t\tif (!lenses || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst cacheId = this._cache.add(lenses);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(cacheId, disposables);\n\t\tconst result: extHostProtocol.ICodeLensListDto = {\n\t\t\tcacheId,\n\t\t\tlenses: [],\n\t\t};\n\t\tfor (let i = 0; i < lenses.length; i++) {\n\n\t\t\tif (!Range.isRange(lenses[i].range)) {\n\t\t\t\tconsole.warn('INVALID code lens, range is not defined', this._extension.identifier.value);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult.lenses.push({\n\t\t\t\tcacheId: [cacheId, i],\n\t\t\t\trange: typeConvert.Range.from(lenses[i].range),\n\t\t\t\tcommand: this._commands.toInternal(lenses[i].command, disposables)\n\t\t\t});\n\t\t}\n\t\treturn result;\n\t}\n\n\tasync resolveCodeLens(symbol: extHostProtocol.ICodeLensDto, token: CancellationToken): Promise<extHostProtocol.ICodeLensDto | undefined> {\n\n\t\tconst lens = symbol.cacheId && this._cache.get(...symbol.cacheId);\n\t\tif (!lens) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet resolvedLens: vscode.CodeLens | undefined | null;\n\t\tif (typeof this._provider.resolveCodeLens !== 'function' || lens.isResolved) {\n\t\t\tresolvedLens = lens;\n\t\t} else {\n\t\t\tresolvedLens = await this._provider.resolveCodeLens(lens, token);\n\t\t}\n\t\tif (!resolvedLens) {\n\t\t\tresolvedLens = lens;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst disposables = symbol.cacheId && this._disposables.get(symbol.cacheId[0]);\n\t\tif (!disposables) {\n\t\t\t// disposed in the meantime\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!resolvedLens.command) {\n\t\t\tconst error = new Error('INVALID code lens resolved, lacks command: ' + this._extension.identifier.value);\n\t\t\tthis._extTelemetry.onExtensionError(this._extension.identifier, error);\n\t\t\tthis._logService.error(error);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tsymbol.command = this._commands.toInternal(resolvedLens.command, disposables);\n\t\treturn symbol;\n\t}\n\n\treleaseCodeLenses(cachedId: number): void {\n\t\tthis._disposables.get(cachedId)?.dispose();\n\t\tthis._disposables.delete(cachedId);\n\t\tthis._cache.delete(cachedId);\n\t}\n}\n\nfunction convertToLocationLinks(value: vscode.Location | vscode.Location[] | vscode.LocationLink[] | undefined | null): languages.LocationLink[] {\n\tif (Array.isArray(value)) {\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\treturn (<any>value).map(typeConvert.DefinitionLink.from);\n\t} else if (value) {\n\t\treturn [typeConvert.DefinitionLink.from(value)];\n\t}\n\treturn [];\n}\n\nclass DefinitionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DefinitionProvider\n\t) { }\n\n\tasync provideDefinition(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideDefinition(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass DeclarationAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DeclarationProvider\n\t) { }\n\n\tasync provideDeclaration(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideDeclaration(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass ImplementationAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.ImplementationProvider\n\t) { }\n\n\tasync provideImplementation(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideImplementation(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass TypeDefinitionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.TypeDefinitionProvider\n\t) { }\n\n\tasync provideTypeDefinition(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst value = await this._provider.provideTypeDefinition(doc, pos, token);\n\t\treturn convertToLocationLinks(value);\n\t}\n}\n\nclass HoverAdapter {\n\n\tprivate _hoverCounter: number = 0;\n\tprivate _hoverMap: Map<number, vscode.Hover> = new Map<number, vscode.Hover>();\n\n\tprivate static HOVER_MAP_MAX_SIZE = 10;\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.HoverProvider,\n\t) { }\n\n\tasync provideHover(resource: URI, position: IPosition, context: languages.HoverContext<{ id: number }> | undefined, token: CancellationToken): Promise<extHostProtocol.HoverWithId | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tlet value: vscode.Hover | null | undefined;\n\t\tif (context && context.verbosityRequest) {\n\t\t\tconst previousHoverId = context.verbosityRequest.previousHover.id;\n\t\t\tconst previousHover = this._hoverMap.get(previousHoverId);\n\t\t\tif (!previousHover) {\n\t\t\t\tthrow new Error(`Hover with id ${previousHoverId} not found`);\n\t\t\t}\n\t\t\tconst hoverContext: vscode.HoverContext = { verbosityDelta: context.verbosityRequest.verbosityDelta, previousHover };\n\t\t\tvalue = await this._provider.provideHover(doc, pos, token, hoverContext);\n\t\t} else {\n\t\t\tvalue = await this._provider.provideHover(doc, pos, token);\n\t\t}\n\t\tif (!value || isFalsyOrEmpty(value.contents)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!value.range) {\n\t\t\tvalue.range = doc.getWordRangeAtPosition(pos);\n\t\t}\n\t\tif (!value.range) {\n\t\t\tvalue.range = new Range(pos, pos);\n\t\t}\n\t\tconst convertedHover: languages.Hover = typeConvert.Hover.from(value);\n\t\tconst id = this._hoverCounter;\n\t\t// Check if hover map has more than 10 elements and if yes, remove oldest from the map\n\t\tif (this._hoverMap.size === HoverAdapter.HOVER_MAP_MAX_SIZE) {\n\t\t\tconst minimumId = Math.min(...this._hoverMap.keys());\n\t\t\tthis._hoverMap.delete(minimumId);\n\t\t}\n\t\tthis._hoverMap.set(id, value);\n\t\tthis._hoverCounter += 1;\n\t\tconst hover: extHostProtocol.HoverWithId = {\n\t\t\t...convertedHover,\n\t\t\tid\n\t\t};\n\t\treturn hover;\n\t}\n\n\treleaseHover(id: number): void {\n\t\tthis._hoverMap.delete(id);\n\t}\n}\n\nclass EvaluatableExpressionAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.EvaluatableExpressionProvider,\n\t) { }\n\n\tasync provideEvaluatableExpression(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideEvaluatableExpression(doc, pos, token);\n\t\tif (value) {\n\t\t\treturn typeConvert.EvaluatableExpression.from(value);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass InlineValuesAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineValuesProvider,\n\t) { }\n\n\tasync provideInlineValues(resource: URI, viewPort: IRange, context: extHostProtocol.IInlineValueContextDto, token: CancellationToken): Promise<languages.InlineValue[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideInlineValues(doc, typeConvert.Range.to(viewPort), typeConvert.InlineValueContext.to(context), token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(iv => typeConvert.InlineValue.from(iv));\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass DocumentHighlightAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentHighlightProvider\n\t) { }\n\n\tasync provideDocumentHighlights(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideDocumentHighlights(doc, pos, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.DocumentHighlight.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass MultiDocumentHighlightAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.MultiDocumentHighlightProvider,\n\t\tprivate readonly _logService: ILogService,\n\t) { }\n\n\tasync provideMultiDocumentHighlights(resource: URI, position: IPosition, otherResources: URI[], token: CancellationToken): Promise<languages.MultiDocumentHighlight[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst otherDocuments = otherResources.map(r => {\n\t\t\ttry {\n\t\t\t\treturn this._documents.getDocument(r);\n\t\t\t} catch (err) {\n\t\t\t\tthis._logService.error('Error: Unable to retrieve document from URI: ' + r + '. Error message: ' + err);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}).filter(doc => doc !== undefined);\n\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideMultiDocumentHighlights(doc, pos, otherDocuments, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.MultiDocumentHighlight.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass LinkedEditingRangeAdapter {\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.LinkedEditingRangeProvider\n\t) { }\n\n\tasync provideLinkedEditingRanges(resource: URI, position: IPosition, token: CancellationToken): Promise<languages.LinkedEditingRanges | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideLinkedEditingRanges(doc, pos, token);\n\t\tif (value && Array.isArray(value.ranges)) {\n\t\t\treturn {\n\t\t\t\tranges: coalesce(value.ranges.map(typeConvert.Range.from)),\n\t\t\t\twordPattern: value.wordPattern\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass ReferenceAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.ReferenceProvider\n\t) { }\n\n\tasync provideReferences(resource: URI, position: IPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst value = await this._provider.provideReferences(doc, pos, context, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.location.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport interface CustomCodeAction extends extHostProtocol.ICodeActionDto {\n\t_isSynthetic?: boolean;\n}\n\nclass CodeActionAdapter {\n\tprivate static readonly _maxCodeActionsPerFile: number = 1000;\n\n\tprivate readonly _cache = new Cache<vscode.CodeAction | vscode.Command>('CodeAction');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _diagnostics: ExtHostDiagnostics,\n\t\tprivate readonly _provider: vscode.CodeActionProvider,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t) { }\n\n\tasync provideCodeActions(resource: URI, rangeOrSelection: IRange | ISelection, context: languages.CodeActionContext, token: CancellationToken): Promise<extHostProtocol.ICodeActionListDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst ran = Selection.isISelection(rangeOrSelection)\n\t\t\t? <vscode.Selection>typeConvert.Selection.to(rangeOrSelection)\n\t\t\t: <vscode.Range>typeConvert.Range.to(rangeOrSelection);\n\t\tconst allDiagnostics: vscode.Diagnostic[] = [];\n\n\t\tfor (const diagnostic of this._diagnostics.getDiagnostics(resource)) {\n\t\t\tif (ran.intersection(diagnostic.range)) {\n\t\t\t\tconst newLen = allDiagnostics.push(diagnostic);\n\t\t\t\tif (newLen > CodeActionAdapter._maxCodeActionsPerFile) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst codeActionContext: vscode.CodeActionContext = {\n\t\t\tdiagnostics: allDiagnostics,\n\t\t\tonly: context.only ? new CodeActionKind(context.only) : undefined,\n\t\t\ttriggerKind: typeConvert.CodeActionTriggerKind.to(context.trigger),\n\t\t};\n\n\t\tconst commandsOrActions = await this._provider.provideCodeActions(doc, ran, codeActionContext, token);\n\t\tif (!isNonEmptyArray(commandsOrActions) || token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst cacheId = this._cache.add(commandsOrActions);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(cacheId, disposables);\n\t\tconst actions: CustomCodeAction[] = [];\n\t\tfor (let i = 0; i < commandsOrActions.length; i++) {\n\t\t\tconst candidate = commandsOrActions[i];\n\t\t\tif (!candidate) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (CodeActionAdapter._isCommand(candidate) && !(candidate instanceof CodeAction)) {\n\t\t\t\t// old school: synthetic code action\n\t\t\t\tthis._apiDeprecation.report('CodeActionProvider.provideCodeActions - return commands', this._extension,\n\t\t\t\t\t`Return 'CodeAction' instances instead.`);\n\n\t\t\t\tactions.push({\n\t\t\t\t\t_isSynthetic: true,\n\t\t\t\t\ttitle: candidate.title,\n\t\t\t\t\tcommand: this._commands.toInternal(candidate, disposables),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst toConvert = candidate as vscode.CodeAction;\n\n\t\t\t\t// new school: convert code action\n\t\t\t\tif (codeActionContext.only) {\n\t\t\t\t\tif (!toConvert.kind) {\n\t\t\t\t\t\tthis._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n\t\t\t\t\t} else if (!codeActionContext.only.contains(toConvert.kind)) {\n\t\t\t\t\t\tthis._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${toConvert.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Ensures that this is either a Range[] or an empty array so we don't get Array<Range | undefined>\n\t\t\t\tconst range = toConvert.ranges ?? [];\n\n\t\t\t\tactions.push({\n\t\t\t\t\tcacheId: [cacheId, i],\n\t\t\t\t\ttitle: toConvert.title,\n\t\t\t\t\tcommand: toConvert.command && this._commands.toInternal(toConvert.command, disposables),\n\t\t\t\t\tdiagnostics: toConvert.diagnostics && toConvert.diagnostics.map(typeConvert.Diagnostic.from),\n\t\t\t\t\tedit: toConvert.edit && typeConvert.WorkspaceEdit.from(toConvert.edit, undefined),\n\t\t\t\t\tkind: toConvert.kind && toConvert.kind.value,\n\t\t\t\t\tisPreferred: toConvert.isPreferred,\n\t\t\t\t\tisAI: isProposedApiEnabled(this._extension, 'codeActionAI') ? toConvert.isAI : false,\n\t\t\t\t\tranges: isProposedApiEnabled(this._extension, 'codeActionRanges') ? coalesce(range.map(typeConvert.Range.from)) : undefined,\n\t\t\t\t\tdisabled: toConvert.disabled?.reason\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn { cacheId, actions };\n\t}\n\n\tasync resolveCodeAction(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ edit?: extHostProtocol.IWorkspaceEditDto; command?: extHostProtocol.ICommandDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._cache.get(sessionId, itemId);\n\t\tif (!item || CodeActionAdapter._isCommand(item)) {\n\t\t\treturn {}; // code actions only!\n\t\t}\n\t\tif (!this._provider.resolveCodeAction) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\n\t\tconst resolvedItem = (await this._provider.resolveCodeAction(item, token)) ?? item;\n\n\t\tlet resolvedEdit: extHostProtocol.IWorkspaceEditDto | undefined;\n\t\tif (resolvedItem.edit) {\n\t\t\tresolvedEdit = typeConvert.WorkspaceEdit.from(resolvedItem.edit, undefined);\n\t\t}\n\n\t\tlet resolvedCommand: extHostProtocol.ICommandDto | undefined;\n\t\tif (resolvedItem.command) {\n\t\t\tconst disposables = this._disposables.get(sessionId);\n\t\t\tif (disposables) {\n\t\t\t\tresolvedCommand = this._commands.toInternal(resolvedItem.command, disposables);\n\t\t\t}\n\t\t}\n\n\t\treturn { edit: resolvedEdit, command: resolvedCommand };\n\t}\n\n\treleaseCodeActions(cachedId: number): void {\n\t\tthis._disposables.get(cachedId)?.dispose();\n\t\tthis._disposables.delete(cachedId);\n\t\tthis._cache.delete(cachedId);\n\t}\n\n\tprivate static _isCommand(thing: any): thing is vscode.Command {\n\t\treturn typeof (<vscode.Command>thing).command === 'string' && typeof (<vscode.Command>thing).title === 'string';\n\t}\n}\n\nclass DocumentPasteEditProvider {\n\n\tprivate _cachedPrepare?: Map<string, vscode.DataTransferItem>;\n\n\tprivate readonly _editsCache = new Cache<vscode.DocumentPasteEdit>('DocumentPasteEdit.edits');\n\n\tconstructor(\n\t\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentPasteEditProvider,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync prepareDocumentPaste(resource: URI, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.DataTransferDTO | undefined> {\n\t\tif (!this._provider.prepareDocumentPaste) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._cachedPrepare = undefined;\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst vscodeRanges = ranges.map(range => typeConvert.Range.to(range));\n\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, () => {\n\t\t\tthrow new NotImplementedError();\n\t\t});\n\t\tawait this._provider.prepareDocumentPaste(doc, vscodeRanges, dataTransfer, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only send back values that have been added to the data transfer\n\t\tconst newEntries = Array.from(dataTransfer).filter(([, value]) => !(value instanceof InternalDataTransferItem));\n\n\t\t// Store off original data transfer items so we can retrieve them on paste\n\t\tconst newCache = new Map<string, vscode.DataTransferItem>();\n\n\t\tconst items = await Promise.all(Array.from(newEntries, async ([mime, value]) => {\n\t\t\tconst id = generateUuid();\n\t\t\tnewCache.set(id, value);\n\t\t\treturn [mime, await typeConvert.DataTransferItem.from(mime, value, id)] as const;\n\t\t}));\n\n\t\tthis._cachedPrepare = newCache;\n\n\t\treturn { items };\n\t}\n\n\tasync providePasteEdits(requestId: number, resource: URI, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, context: extHostProtocol.IDocumentPasteContextDto, token: CancellationToken): Promise<extHostProtocol.IPasteEditDto[]> {\n\t\tif (!this._provider.provideDocumentPasteEdits) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst vscodeRanges = ranges.map(range => typeConvert.Range.to(range));\n\n\t\tconst items = dataTransferDto.items.map(([mime, value]): [string, vscode.DataTransferItem] => {\n\t\t\tconst cached = this._cachedPrepare?.get(value.id);\n\t\t\tif (cached) {\n\t\t\t\treturn [mime, cached];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\tmime,\n\t\t\t\ttypeConvert.DataTransferItem.to(mime, value, async id => {\n\t\t\t\t\treturn (await this._proxy.$resolvePasteFileData(this._handle, requestId, id)).buffer;\n\t\t\t\t})\n\t\t\t];\n\t\t});\n\n\t\tconst dataTransfer = new DataTransfer(items);\n\n\t\tconst edits = await this._provider.provideDocumentPasteEdits(doc, vscodeRanges, dataTransfer, {\n\t\t\tonly: context.only ? new DocumentDropOrPasteEditKind(context.only) : undefined,\n\t\t\ttriggerKind: context.triggerKind,\n\t\t}, token);\n\t\tif (!edits || token.isCancellationRequested) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst cacheId = this._editsCache.add(edits);\n\n\t\treturn edits.map((edit, i): extHostProtocol.IPasteEditDto => ({\n\t\t\t_cacheId: [cacheId, i],\n\t\t\ttitle: edit.title ?? localize('defaultPasteLabel', \"Paste using '{0}' extension\", this._extension.displayName || this._extension.name),\n\t\t\tkind: edit.kind,\n\t\t\tyieldTo: edit.yieldTo?.map(x => x.value),\n\t\t\tinsertText: typeof edit.insertText === 'string' ? edit.insertText : { snippet: edit.insertText.value },\n\t\t\tadditionalEdit: edit.additionalEdit ? typeConvert.WorkspaceEdit.from(edit.additionalEdit, undefined) : undefined,\n\t\t}));\n\t}\n\n\tasync resolvePasteEdit(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ insertText?: string | vscode.SnippetString; additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._editsCache.get(sessionId, itemId);\n\t\tif (!item || !this._provider.resolveDocumentPasteEdit) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\t\tconst resolvedItem = (await this._provider.resolveDocumentPasteEdit(item, token)) ?? item;\n\t\treturn {\n\t\t\tinsertText: resolvedItem.insertText,\n\t\t\tadditionalEdit: resolvedItem.additionalEdit ? typeConvert.WorkspaceEdit.from(resolvedItem.additionalEdit, undefined) : undefined\n\t\t};\n\t}\n\n\treleasePasteEdits(id: number): any {\n\t\tthis._editsCache.delete(id);\n\t}\n}\n\nclass DocumentFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentFormattingEditProvider\n\t) { }\n\n\tasync provideDocumentFormattingEdits(resource: URI, options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst value = await this._provider.provideDocumentFormattingEdits(document, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass RangeFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentRangeFormattingEditProvider\n\t) { }\n\n\tasync provideDocumentRangeFormattingEdits(resource: URI, range: IRange, options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst ran = typeConvert.Range.to(range);\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst value = await this._provider.provideDocumentRangeFormattingEdits(document, ran, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync provideDocumentRangesFormattingEdits(resource: URI, ranges: IRange[], options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\t\tassertType(typeof this._provider.provideDocumentRangesFormattingEdits === 'function', 'INVALID invocation of `provideDocumentRangesFormattingEdits`');\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst _ranges = <Range[]>ranges.map(typeConvert.Range.to);\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst value = await this._provider.provideDocumentRangesFormattingEdits(document, _ranges, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass OnTypeFormattingAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.OnTypeFormattingEditProvider\n\t) { }\n\n\tautoFormatTriggerCharacters: string[] = []; // not here\n\n\tasync provideOnTypeFormattingEdits(resource: URI, position: IPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst value = await this._provider.provideOnTypeFormattingEdits(document, pos, ch, <any>options, token);\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value.map(typeConvert.TextEdit.from);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nclass NavigateTypeAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.SymbolInformation>('WorkspaceSymbols');\n\n\tconstructor(\n\t\tprivate readonly _provider: vscode.WorkspaceSymbolProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideWorkspaceSymbols(search: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolsDto> {\n\t\tconst value = await this._provider.provideWorkspaceSymbols(search, token);\n\n\t\tif (!isNonEmptyArray(value)) {\n\t\t\treturn { symbols: [] };\n\t\t}\n\n\t\tconst sid = this._cache.add(value);\n\t\tconst result: extHostProtocol.IWorkspaceSymbolsDto = {\n\t\t\tcacheId: sid,\n\t\t\tsymbols: []\n\t\t};\n\n\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\tconst item = value[i];\n\t\t\tif (!item || !item.name) {\n\t\t\t\tthis._logService.warn('INVALID SymbolInformation', item);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tresult.symbols.push({\n\t\t\t\t...typeConvert.WorkspaceSymbol.from(item),\n\t\t\t\tcacheId: [sid, i]\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync resolveWorkspaceSymbol(symbol: extHostProtocol.IWorkspaceSymbolDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolDto | undefined> {\n\t\tif (typeof this._provider.resolveWorkspaceSymbol !== 'function') {\n\t\t\treturn symbol;\n\t\t}\n\t\tif (!symbol.cacheId) {\n\t\t\treturn symbol;\n\t\t}\n\t\tconst item = this._cache.get(...symbol.cacheId);\n\t\tif (item) {\n\t\t\tconst value = await this._provider.resolveWorkspaceSymbol(item, token);\n\t\t\treturn value && mixin(symbol, typeConvert.WorkspaceSymbol.from(value), true);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\treleaseWorkspaceSymbols(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass RenameAdapter {\n\n\tstatic supportsResolving(provider: vscode.RenameProvider): boolean {\n\t\treturn typeof provider.prepareRename === 'function';\n\t}\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.RenameProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideRenameEdits(resource: URI, position: IPosition, newName: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto & languages.Rejection | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\ttry {\n\t\t\tconst value = await this._provider.provideRenameEdits(doc, pos, newName, token);\n\t\t\tif (!value) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn typeConvert.WorkspaceEdit.from(value);\n\n\t\t} catch (err) {\n\t\t\tconst rejectReason = RenameAdapter._asMessage(err);\n\t\t\tif (rejectReason) {\n\t\t\t\treturn { rejectReason, edits: undefined! };\n\t\t\t} else {\n\t\t\t\t// generic error\n\t\t\t\treturn Promise.reject<extHostProtocol.IWorkspaceEditDto>(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync resolveRenameLocation(resource: URI, position: IPosition, token: CancellationToken): Promise<(languages.RenameLocation & languages.Rejection) | undefined> {\n\t\tif (typeof this._provider.prepareRename !== 'function') {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\ttry {\n\t\t\tconst rangeOrLocation = await this._provider.prepareRename(doc, pos, token);\n\n\t\t\tlet range: vscode.Range | undefined;\n\t\t\tlet text: string | undefined;\n\t\t\tif (Range.isRange(rangeOrLocation)) {\n\t\t\t\trange = rangeOrLocation;\n\t\t\t\ttext = doc.getText(rangeOrLocation);\n\n\t\t\t} else if (isObject(rangeOrLocation)) {\n\t\t\t\trange = rangeOrLocation.range;\n\t\t\t\ttext = rangeOrLocation.placeholder;\n\t\t\t}\n\n\t\t\tif (!range || !text) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif (range.start.line > pos.line || range.end.line < pos.line) {\n\t\t\t\tthis._logService.warn('INVALID rename location: position line must be within range start/end lines');\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn { range: typeConvert.Range.from(range), text };\n\n\t\t} catch (err) {\n\t\t\tconst rejectReason = RenameAdapter._asMessage(err);\n\t\t\tif (rejectReason) {\n\t\t\t\treturn { rejectReason, range: undefined!, text: undefined! };\n\t\t\t} else {\n\t\t\t\treturn Promise.reject<any>(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static _asMessage(err: any): string | undefined {\n\t\tif (typeof err === 'string') {\n\t\t\treturn err;\n\t\t} else if (err instanceof Error && typeof err.message === 'string') {\n\t\t\treturn err.message;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nclass NewSymbolNamesAdapter {\n\n\tprivate static languageTriggerKindToVSCodeTriggerKind: Record<languages.NewSymbolNameTriggerKind, vscode.NewSymbolNameTriggerKind> = {\n\t\t[languages.NewSymbolNameTriggerKind.Invoke]: NewSymbolNameTriggerKind.Invoke,\n\t\t[languages.NewSymbolNameTriggerKind.Automatic]: NewSymbolNameTriggerKind.Automatic,\n\t};\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.NewSymbolNamesProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync supportsAutomaticNewSymbolNamesTriggerKind() {\n\t\treturn this._provider.supportsAutomaticTriggerKind;\n\t}\n\n\tasync provideNewSymbolNames(resource: URI, range: IRange, triggerKind: languages.NewSymbolNameTriggerKind, token: CancellationToken): Promise<languages.NewSymbolName[] | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Range.to(range);\n\n\t\ttry {\n\t\t\tconst kind = NewSymbolNamesAdapter.languageTriggerKindToVSCodeTriggerKind[triggerKind];\n\t\t\tconst value = await this._provider.provideNewSymbolNames(doc, pos, kind, token);\n\t\t\tif (!value) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn value.map(v =>\n\t\t\t\ttypeof v === 'string' /* @ulugbekna: for backward compatibility because `value` used to be just `string[]` */\n\t\t\t\t\t? { newSymbolName: v }\n\t\t\t\t\t: { newSymbolName: v.newSymbolName, tags: v.tags }\n\t\t\t);\n\t\t} catch (err: unknown) {\n\t\t\tthis._logService.error(NewSymbolNamesAdapter._asMessage(err) ?? JSON.stringify(err, null, '\\t') /* @ulugbekna: assuming `err` doesn't have circular references that could result in an exception when converting to JSON */);\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t// @ulugbekna: this method is also defined in RenameAdapter but seems OK to be duplicated\n\tprivate static _asMessage(err: any): string | undefined {\n\t\tif (typeof err === 'string') {\n\t\t\treturn err;\n\t\t} else if (err instanceof Error && typeof err.message === 'string') {\n\t\t\treturn err.message;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n\nclass SemanticTokensPreviousResult {\n\tconstructor(\n\t\treadonly resultId: string | undefined,\n\t\treadonly tokens?: Uint32Array,\n\t) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[] };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[] };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[] };\n\ntype ProvidedSemanticTokens = vscode.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = vscode.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nclass DocumentSemanticTokensAdapter {\n\n\tprivate readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n\tprivate _nextResultId = 1;\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentSemanticTokensProvider,\n\t) {\n\t\tthis._previousResults = new Map<number, SemanticTokensPreviousResult>();\n\t}\n\n\tasync provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: CancellationToken): Promise<VSBuffer | null> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n\t\tlet value = typeof previousResult?.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function'\n\t\t\t? await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token)\n\t\t\t: await this._provider.provideDocumentSemanticTokens(doc, token);\n\n\t\tif (previousResult) {\n\t\t\tthis._previousResults.delete(previousResultId);\n\t\t}\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\tvalue = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n\t\treturn this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n\t}\n\n\tasync releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n\t\tthis._previousResults.delete(semanticColoringResultId);\n\t}\n\n\tprivate static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): vscode.SemanticTokens | vscode.SemanticTokensEdits {\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n\t\t\tif (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\treturn new SemanticTokens(new Uint32Array(v.data), v.resultId);\n\t\t} else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n\t\t\tif (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\treturn new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ? new Uint32Array(edit.data) : edit.data)), v.resultId);\n\t\t}\n\t\treturn v;\n\t}\n\n\tprivate static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n\t\treturn v && !!((v as ProvidedSemanticTokens).data);\n\t}\n\n\tprivate static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is vscode.SemanticTokens {\n\t\treturn (v.data instanceof Uint32Array);\n\t}\n\n\tprivate static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n\t\treturn v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n\t}\n\n\tprivate static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is vscode.SemanticTokensEdits {\n\t\tfor (const edit of v.edits) {\n\t\t\tif (!(edit.data instanceof Uint32Array)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: vscode.SemanticTokens | vscode.SemanticTokensEdits): vscode.SemanticTokens | vscode.SemanticTokensEdits {\n\t\tif (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n\t\t\treturn newResult;\n\t\t}\n\t\tif (!previousResult || !previousResult.tokens) {\n\t\t\treturn newResult;\n\t\t}\n\t\tconst oldData = previousResult.tokens;\n\t\tconst oldLength = oldData.length;\n\t\tconst newData = newResult.data;\n\t\tconst newLength = newData.length;\n\n\t\tlet commonPrefixLength = 0;\n\t\tconst maxCommonPrefixLength = Math.min(oldLength, newLength);\n\t\twhile (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n\t\t\tcommonPrefixLength++;\n\t\t}\n\n\t\tif (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n\t\t\t// complete overlap!\n\t\t\treturn new SemanticTokensEdits([], newResult.resultId);\n\t\t}\n\n\t\tlet commonSuffixLength = 0;\n\t\tconst maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n\t\twhile (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n\t\t\tcommonSuffixLength++;\n\t\t}\n\n\t\treturn new SemanticTokensEdits([{\n\t\t\tstart: commonPrefixLength,\n\t\t\tdeleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n\t\t\tdata: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n\t\t}], newResult.resultId);\n\t}\n\n\tprivate _send(value: vscode.SemanticTokens | vscode.SemanticTokensEdits, original: vscode.SemanticTokens | vscode.SemanticTokensEdits): VSBuffer | null {\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n\t\t\tconst myId = this._nextResultId++;\n\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n\t\t\treturn encodeSemanticTokensDto({\n\t\t\t\tid: myId,\n\t\t\t\ttype: 'full',\n\t\t\t\tdata: value.data\n\t\t\t});\n\t\t}\n\n\t\tif (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n\t\t\tconst myId = this._nextResultId++;\n\t\t\tif (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n\t\t\t\t// store the original\n\t\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n\t\t\t} else {\n\t\t\t\tthis._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n\t\t\t}\n\t\t\treturn encodeSemanticTokensDto({\n\t\t\t\tid: myId,\n\t\t\t\ttype: 'delta',\n\t\t\t\tdeltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nclass DocumentRangeSemanticTokensAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentRangeSemanticTokensProvider,\n\t) { }\n\n\tasync provideDocumentRangeSemanticTokens(resource: URI, range: IRange, token: CancellationToken): Promise<VSBuffer | null> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst value = await this._provider.provideDocumentRangeSemanticTokens(doc, typeConvert.Range.to(range), token);\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._send(value);\n\t}\n\n\tprivate _send(value: vscode.SemanticTokens): VSBuffer {\n\t\treturn encodeSemanticTokensDto({\n\t\t\tid: 0,\n\t\t\ttype: 'full',\n\t\t\tdata: value.data\n\t\t});\n\t}\n}\n\nclass CompletionsAdapter {\n\n\tstatic supportsResolving(provider: vscode.CompletionItemProvider): boolean {\n\t\treturn typeof provider.resolveCompletionItem === 'function';\n\t}\n\n\tprivate _cache = new Cache<vscode.CompletionItem>('CompletionItem');\n\tprivate _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.CompletionItemProvider,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync provideCompletionItems(resource: URI, position: IPosition, context: languages.CompletionContext, token: CancellationToken): Promise<extHostProtocol.ISuggestResultDto | undefined> {\n\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\t// The default insert/replace ranges. It's important to compute them\n\t\t// before asynchronously asking the provider for its results. See\n\t\t// https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n\t\tconst replaceRange = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n\t\tconst insertRange = replaceRange.with({ end: pos });\n\n\t\tconst sw = new StopWatch();\n\t\tconst itemsOrList = await this._provider.provideCompletionItems(doc, pos, token, typeConvert.CompletionContext.to(context));\n\n\t\tif (!itemsOrList) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst list = Array.isArray(itemsOrList) ? new CompletionList(itemsOrList) : itemsOrList;\n\n\t\t// keep result for providers that support resolving\n\t\tconst pid: number = CompletionsAdapter.supportsResolving(this._provider) ? this._cache.add(list.items) : this._cache.add([]);\n\t\tconst disposables = new DisposableStore();\n\t\tthis._disposables.set(pid, disposables);\n\n\t\tconst completions: extHostProtocol.ISuggestDataDto[] = [];\n\t\tconst result: extHostProtocol.ISuggestResultDto = {\n\t\t\tx: pid,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.completions]: completions,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.defaultRanges]: { replace: typeConvert.Range.from(replaceRange), insert: typeConvert.Range.from(insertRange) },\n\t\t\t[extHostProtocol.ISuggestResultDtoField.isIncomplete]: list.isIncomplete || undefined,\n\t\t\t[extHostProtocol.ISuggestResultDtoField.duration]: sw.elapsed()\n\t\t};\n\n\t\tfor (let i = 0; i < list.items.length; i++) {\n\t\t\tconst item = list.items[i];\n\t\t\t// check for bad completion item first\n\t\t\tconst dto = this._convertCompletionItem(item, [pid, i], insertRange, replaceRange);\n\t\t\tcompletions.push(dto);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync resolveCompletionItem(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ISuggestDataDto | undefined> {\n\n\t\tif (typeof this._provider.resolveCompletionItem !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst dto1 = this._convertCompletionItem(item, id);\n\n\t\tconst resolvedItem = await this._provider.resolveCompletionItem(item, token);\n\n\t\tif (!resolvedItem) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst dto2 = this._convertCompletionItem(resolvedItem, id);\n\n\t\tif (dto1[extHostProtocol.ISuggestDataDtoField.insertText] !== dto2[extHostProtocol.ISuggestDataDtoField.insertText]\n\t\t\t|| dto1[extHostProtocol.ISuggestDataDtoField.insertTextRules] !== dto2[extHostProtocol.ISuggestDataDtoField.insertTextRules]\n\t\t) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.insertText', this._extension, 'extension MAY NOT change \\'insertText\\' of a CompletionItem during resolve');\n\t\t}\n\n\t\tif (dto1[extHostProtocol.ISuggestDataDtoField.commandIdent] !== dto2[extHostProtocol.ISuggestDataDtoField.commandIdent]\n\t\t\t|| dto1[extHostProtocol.ISuggestDataDtoField.commandId] !== dto2[extHostProtocol.ISuggestDataDtoField.commandId]\n\t\t\t|| !equals(dto1[extHostProtocol.ISuggestDataDtoField.commandArguments], dto2[extHostProtocol.ISuggestDataDtoField.commandArguments])\n\t\t) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.command', this._extension, 'extension MAY NOT change \\'command\\' of a CompletionItem during resolve');\n\t\t}\n\n\t\treturn {\n\t\t\t...dto1,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.documentation]: dto2[extHostProtocol.ISuggestDataDtoField.documentation],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.detail]: dto2[extHostProtocol.ISuggestDataDtoField.detail],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.additionalTextEdits]: dto2[extHostProtocol.ISuggestDataDtoField.additionalTextEdits],\n\n\t\t\t// (fishy) async insertText\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertText]: dto2[extHostProtocol.ISuggestDataDtoField.insertText],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertTextRules]: dto2[extHostProtocol.ISuggestDataDtoField.insertTextRules],\n\n\t\t\t// (fishy) async command\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandIdent]: dto2[extHostProtocol.ISuggestDataDtoField.commandIdent],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandId]: dto2[extHostProtocol.ISuggestDataDtoField.commandId],\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandArguments]: dto2[extHostProtocol.ISuggestDataDtoField.commandArguments],\n\t\t};\n\t}\n\n\treleaseCompletionItems(id: number): any {\n\t\tthis._disposables.get(id)?.dispose();\n\t\tthis._disposables.delete(id);\n\t\tthis._cache.delete(id);\n\t}\n\n\tprivate _convertCompletionItem(item: vscode.CompletionItem, id: extHostProtocol.ChainedCacheId, defaultInsertRange?: vscode.Range, defaultReplaceRange?: vscode.Range): extHostProtocol.ISuggestDataDto {\n\n\t\tconst disposables = this._disposables.get(id[0]);\n\t\tif (!disposables) {\n\t\t\tthrow Error('DisposableStore is missing...');\n\t\t}\n\n\t\tconst command = this._commands.toInternal(item.command, disposables);\n\t\tconst result: extHostProtocol.ISuggestDataDto = {\n\t\t\t//\n\t\t\tx: id,\n\t\t\t//\n\t\t\t[extHostProtocol.ISuggestDataDtoField.label]: item.label,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.kind]: item.kind !== undefined ? typeConvert.CompletionItemKind.from(item.kind) : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.kindModifier]: item.tags && item.tags.map(typeConvert.CompletionItemTag.from),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.detail]: item.detail,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.documentation]: typeof item.documentation === 'undefined' ? undefined : typeConvert.MarkdownString.fromStrict(item.documentation),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.sortText]: item.sortText !== item.label ? item.sortText : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.filterText]: item.filterText !== item.label ? item.filterText : undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.preselect]: item.preselect || undefined,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.insertTextRules]: item.keepWhitespace ? languages.CompletionItemInsertTextRule.KeepWhitespace : languages.CompletionItemInsertTextRule.None,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commitCharacters]: item.commitCharacters?.join(''),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.additionalTextEdits]: item.additionalTextEdits && item.additionalTextEdits.map(typeConvert.TextEdit.from),\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandIdent]: command?.$ident,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandId]: command?.id,\n\t\t\t[extHostProtocol.ISuggestDataDtoField.commandArguments]: command?.$ident ? undefined : command?.arguments, // filled in on main side from $ident\n\t\t};\n\n\t\t// 'insertText'-logic\n\t\tif (item.textEdit) {\n\t\t\tthis._apiDeprecation.report('CompletionItem.textEdit', this._extension, `Use 'CompletionItem.insertText' and 'CompletionItem.range' instead.`);\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.textEdit.newText;\n\n\t\t} else if (typeof item.insertText === 'string') {\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.insertText;\n\n\t\t} else if (item.insertText instanceof SnippetString) {\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertText] = item.insertText.value;\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.insertTextRules]! |= languages.CompletionItemInsertTextRule.InsertAsSnippet;\n\t\t}\n\n\t\t// 'overwrite[Before|After]'-logic\n\t\tlet range: vscode.Range | { inserting: vscode.Range; replacing: vscode.Range } | undefined;\n\t\tif (item.textEdit) {\n\t\t\trange = item.textEdit.range;\n\t\t} else if (item.range) {\n\t\t\trange = item.range;\n\t\t}\n\n\t\tif (Range.isRange(range)) {\n\t\t\t// \"old\" range\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.range] = typeConvert.Range.from(range);\n\n\t\t} else if (range && (!defaultInsertRange?.isEqual(range.inserting) || !defaultReplaceRange?.isEqual(range.replacing))) {\n\t\t\t// ONLY send range when it's different from the default ranges (safe bandwidth)\n\t\t\tresult[extHostProtocol.ISuggestDataDtoField.range] = {\n\t\t\t\tinsert: typeConvert.Range.from(range.inserting),\n\t\t\t\treplace: typeConvert.Range.from(range.replacing)\n\t\t\t};\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass InlineCompletionAdapter {\n\tprivate readonly _references = new ReferenceMap<{\n\t\tdispose(): void;\n\t\titems: readonly vscode.InlineCompletionItem[];\n\t\tlist: vscode.InlineCompletionList | undefined;\n\t}>();\n\n\tprivate readonly _isAdditionsProposedApiEnabled: boolean;\n\n\tconstructor(\n\t\tprivate readonly _extension: IExtensionDescription,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.InlineCompletionItemProvider,\n\t\tprivate readonly _commands: CommandsConverter,\n\t) {\n\t\tthis._isAdditionsProposedApiEnabled = isProposedApiEnabled(this._extension, 'inlineCompletionsAdditions');\n\t}\n\n\tpublic get supportsHandleEvents(): boolean {\n\t\treturn isProposedApiEnabled(this._extension, 'inlineCompletionsAdditions')\n\t\t\t&& (typeof this._provider.handleDidShowCompletionItem === 'function'\n\t\t\t\t|| typeof this._provider.handleDidPartiallyAcceptCompletionItem === 'function'\n\t\t\t\t|| typeof this._provider.handleDidRejectCompletionItem === 'function'\n\t\t\t\t|| typeof this._provider.handleEndOfLifetime === 'function'\n\t\t\t);\n\t}\n\n\tprivate readonly languageTriggerKindToVSCodeTriggerKind: Record<languages.InlineCompletionTriggerKind, InlineCompletionTriggerKind> = {\n\t\t[languages.InlineCompletionTriggerKind.Automatic]: InlineCompletionTriggerKind.Automatic,\n\t\t[languages.InlineCompletionTriggerKind.Explicit]: InlineCompletionTriggerKind.Invoke,\n\t};\n\n\tasync provideInlineCompletions(resource: URI, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst result = await this._provider.provideInlineCompletionItems(doc, pos, {\n\t\t\tselectedCompletionInfo:\n\t\t\t\tcontext.selectedSuggestionInfo\n\t\t\t\t\t? {\n\t\t\t\t\t\trange: typeConvert.Range.to(context.selectedSuggestionInfo.range),\n\t\t\t\t\t\ttext: context.selectedSuggestionInfo.text\n\t\t\t\t\t}\n\t\t\t\t\t: undefined,\n\t\t\ttriggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind],\n\t\t\trequestUuid: context.requestUuid,\n\t\t\trequestIssuedDateTime: context.requestIssuedDateTime,\n\t\t\tearliestShownDateTime: context.earliestShownDateTime,\n\t\t}, token);\n\n\t\tif (!result) {\n\t\t\t// undefined and null are valid results\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst { resultItems, list } = Array.isArray(result) ? { resultItems: result, list: undefined } : { resultItems: result.items, list: result };\n\t\tconst commands = this._isAdditionsProposedApiEnabled ? Array.isArray(result) ? [] : result.commands || [] : [];\n\t\tconst enableForwardStability = this._isAdditionsProposedApiEnabled && !Array.isArray(result) ? result.enableForwardStability : undefined;\n\n\t\tlet disposableStore: DisposableStore | undefined = undefined;\n\t\tconst pid = this._references.createReferenceId({\n\t\t\tdispose() {\n\t\t\t\tdisposableStore?.dispose();\n\t\t\t},\n\t\t\titems: resultItems,\n\t\t\tlist,\n\t\t});\n\n\t\treturn {\n\t\t\tpid,\n\t\t\tlanguageId: doc.languageId,\n\t\t\titems: resultItems.map<extHostProtocol.IdentifiableInlineCompletion>((item, idx) => {\n\t\t\t\tlet command: languages.Command | undefined = undefined;\n\t\t\t\tif (item.command) {\n\t\t\t\t\tif (!disposableStore) {\n\t\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t\t}\n\t\t\t\t\tcommand = this._commands.toInternal(item.command, disposableStore);\n\t\t\t\t}\n\n\t\t\t\tlet action: languages.Command | undefined = undefined;\n\t\t\t\tif (item.action) {\n\t\t\t\t\tif (!disposableStore) {\n\t\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t\t}\n\t\t\t\t\taction = this._commands.toInternal(item.action, disposableStore);\n\t\t\t\t}\n\n\t\t\t\tconst insertText = item.insertText;\n\t\t\t\treturn ({\n\t\t\t\t\tinsertText: insertText === undefined ? undefined : (typeof insertText === 'string' ? insertText : { snippet: insertText.value }),\n\t\t\t\t\trange: item.range ? typeConvert.Range.from(item.range) : undefined,\n\t\t\t\t\tshowRange: (this._isAdditionsProposedApiEnabled && item.showRange) ? typeConvert.Range.from(item.showRange) : undefined,\n\t\t\t\t\tcommand,\n\t\t\t\t\tgutterMenuLinkAction: action,\n\t\t\t\t\tidx: idx,\n\t\t\t\t\tcompleteBracketPairs: this._isAdditionsProposedApiEnabled ? item.completeBracketPairs : false,\n\t\t\t\t\tisInlineEdit: this._isAdditionsProposedApiEnabled ? item.isInlineEdit : false,\n\t\t\t\t\tshowInlineEditMenu: this._isAdditionsProposedApiEnabled ? item.showInlineEditMenu : false,\n\t\t\t\t\thint: (item.displayLocation && this._isAdditionsProposedApiEnabled) ? {\n\t\t\t\t\t\trange: typeConvert.Range.from(item.displayLocation.range),\n\t\t\t\t\t\tcontent: item.displayLocation.label,\n\t\t\t\t\t\tstyle: item.displayLocation.kind ? typeConvert.InlineCompletionHintStyle.from(item.displayLocation.kind) : languages.InlineCompletionHintStyle.Code,\n\t\t\t\t\t} : undefined,\n\t\t\t\t\twarning: (item.warning && this._isAdditionsProposedApiEnabled) ? {\n\t\t\t\t\t\tmessage: typeConvert.MarkdownString.from(item.warning.message),\n\t\t\t\t\t\ticon: item.warning.icon ? typeConvert.IconPath.fromThemeIcon(item.warning.icon) : undefined,\n\t\t\t\t\t} : undefined,\n\t\t\t\t\tcorrelationId: this._isAdditionsProposedApiEnabled ? item.correlationId : undefined,\n\t\t\t\t\tsuggestionId: undefined,\n\t\t\t\t\turi: (this._isAdditionsProposedApiEnabled && item.uri) ? item.uri : undefined,\n\t\t\t\t});\n\t\t\t}),\n\t\t\tcommands: commands.map(c => {\n\t\t\t\tif (!disposableStore) {\n\t\t\t\t\tdisposableStore = new DisposableStore();\n\t\t\t\t}\n\t\t\t\treturn typeConvert.CompletionCommand.from(c, this._commands, disposableStore);\n\t\t\t}),\n\t\t\tsuppressSuggestions: false,\n\t\t\tenableForwardStability,\n\t\t};\n\t}\n\n\tdisposeCompletions(pid: number, reason: languages.InlineCompletionsDisposeReason) {\n\t\tconst completionList = this._references.get(pid);\n\t\tif (this._provider.handleListEndOfLifetime && this._isAdditionsProposedApiEnabled && completionList?.list) {\n\t\t\tfunction translateReason(reason: languages.InlineCompletionsDisposeReason): vscode.InlineCompletionsDisposeReason {\n\t\t\t\tswitch (reason.kind) {\n\t\t\t\t\tcase 'lostRace':\n\t\t\t\t\t\treturn { kind: InlineCompletionsDisposeReasonKind.LostRace };\n\t\t\t\t\tcase 'tokenCancellation':\n\t\t\t\t\t\treturn { kind: InlineCompletionsDisposeReasonKind.TokenCancellation };\n\t\t\t\t\tcase 'other':\n\t\t\t\t\t\treturn { kind: InlineCompletionsDisposeReasonKind.Other };\n\t\t\t\t\tcase 'empty':\n\t\t\t\t\t\treturn { kind: InlineCompletionsDisposeReasonKind.Empty };\n\t\t\t\t\tcase 'notTaken':\n\t\t\t\t\t\treturn { kind: InlineCompletionsDisposeReasonKind.NotTaken };\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn { kind: InlineCompletionsDisposeReasonKind.Other };\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._provider.handleListEndOfLifetime(completionList.list, translateReason(reason));\n\t\t}\n\n\t\tconst data = this._references.disposeReferenceId(pid);\n\t\tdata?.dispose();\n\t}\n\n\thandleDidShowCompletionItem(pid: number, idx: number, updatedInsertText: string): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidShowCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidShowCompletionItem(completionItem, updatedInsertText);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePartialAccept(pid: number, idx: number, acceptedCharacters: number, info: languages.PartialAcceptInfo): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidPartiallyAcceptCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidPartiallyAcceptCompletionItem(completionItem, acceptedCharacters);\n\t\t\t\tthis._provider.handleDidPartiallyAcceptCompletionItem(completionItem, typeConvert.PartialAcceptInfo.to(info));\n\t\t\t}\n\t\t}\n\t}\n\n\thandleEndOfLifetime(pid: number, idx: number, reason: languages.InlineCompletionEndOfLifeReason<{ pid: number; idx: number }>): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleEndOfLifetime && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tconst r = typeConvert.InlineCompletionEndOfLifeReason.to(reason, ref => this._references.get(ref.pid)?.items[ref.idx]);\n\t\t\t\tthis._provider.handleEndOfLifetime(completionItem, r);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleRejection(pid: number, idx: number): void {\n\t\tconst completionItem = this._references.get(pid)?.items[idx];\n\t\tif (completionItem) {\n\t\t\tif (this._provider.handleDidRejectCompletionItem && this._isAdditionsProposedApiEnabled) {\n\t\t\t\tthis._provider.handleDidRejectCompletionItem(completionItem);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass ReferenceMap<T> {\n\tprivate readonly _references = new Map<number, T>();\n\tprivate _idPool = 1;\n\n\tcreateReferenceId(value: T): number {\n\t\tconst id = this._idPool++;\n\t\tthis._references.set(id, value);\n\t\treturn id;\n\t}\n\n\tdisposeReferenceId(referenceId: number): T | undefined {\n\t\tconst value = this._references.get(referenceId);\n\t\tthis._references.delete(referenceId);\n\t\treturn value;\n\t}\n\n\tget(referenceId: number): T | undefined {\n\t\treturn this._references.get(referenceId);\n\t}\n}\n\nclass SignatureHelpAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.SignatureHelp>('SignatureHelp');\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.SignatureHelpProvider,\n\t) { }\n\n\tasync provideSignatureHelp(resource: URI, position: IPosition, context: extHostProtocol.ISignatureHelpContextDto, token: CancellationToken): Promise<extHostProtocol.ISignatureHelpDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst vscodeContext = this.reviveContext(context);\n\n\t\tconst value = await this._provider.provideSignatureHelp(doc, pos, token, vscodeContext);\n\t\tif (value) {\n\t\t\tconst id = this._cache.add([value]);\n\t\t\treturn { ...typeConvert.SignatureHelp.from(value), id };\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate reviveContext(context: extHostProtocol.ISignatureHelpContextDto): vscode.SignatureHelpContext {\n\t\tlet activeSignatureHelp: vscode.SignatureHelp | undefined = undefined;\n\t\tif (context.activeSignatureHelp) {\n\t\t\tconst revivedSignatureHelp = typeConvert.SignatureHelp.to(context.activeSignatureHelp);\n\t\t\tconst saved = this._cache.get(context.activeSignatureHelp.id, 0);\n\t\t\tif (saved) {\n\t\t\t\tactiveSignatureHelp = saved;\n\t\t\t\tactiveSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n\t\t\t\tactiveSignatureHelp.activeParameter = revivedSignatureHelp.activeParameter;\n\t\t\t} else {\n\t\t\t\tactiveSignatureHelp = revivedSignatureHelp;\n\t\t\t}\n\t\t}\n\t\treturn { ...context, activeSignatureHelp };\n\t}\n\n\treleaseSignatureHelp(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass InlayHintsAdapter {\n\n\tprivate _cache = new Cache<vscode.InlayHint>('InlayHints');\n\tprivate readonly _disposables = new Map<number, DisposableStore>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: CommandsConverter,\n\t\tprivate readonly _provider: vscode.InlayHintsProvider,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _extension: IExtensionDescription\n\t) { }\n\n\tasync provideInlayHints(resource: URI, ran: IRange, token: CancellationToken): Promise<extHostProtocol.IInlayHintsDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst range = typeConvert.Range.to(ran);\n\n\t\tconst hints = await this._provider.provideInlayHints(doc, range, token);\n\t\tif (!Array.isArray(hints) || hints.length === 0) {\n\t\t\t// bad result\n\t\t\tthis._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(ran)}`);\n\t\t\treturn undefined;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tconst pid = this._cache.add(hints);\n\t\tthis._disposables.set(pid, new DisposableStore());\n\t\tconst result: extHostProtocol.IInlayHintsDto = { hints: [], cacheId: pid };\n\t\tfor (let i = 0; i < hints.length; i++) {\n\t\t\tif (this._isValidInlayHint(hints[i], range)) {\n\t\t\t\tresult.hints.push(this._convertInlayHint(hints[i], [pid, i]));\n\t\t\t}\n\t\t}\n\t\tthis._logService.trace(`[InlayHints] ${result.hints.length} inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(ran)}`);\n\t\treturn result;\n\t}\n\n\tasync resolveInlayHint(id: extHostProtocol.ChainedCacheId, token: CancellationToken) {\n\t\tif (typeof this._provider.resolveInlayHint !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hint = await this._provider.resolveInlayHint(item, token);\n\t\tif (!hint) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._isValidInlayHint(hint)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._convertInlayHint(hint, id);\n\t}\n\n\treleaseHints(id: number): any {\n\t\tthis._disposables.get(id)?.dispose();\n\t\tthis._disposables.delete(id);\n\t\tthis._cache.delete(id);\n\t}\n\n\tprivate _isValidInlayHint(hint: vscode.InlayHint, range?: vscode.Range): boolean {\n\t\tif (hint.label.length === 0 || Array.isArray(hint.label) && hint.label.every(part => part.value.length === 0)) {\n\t\t\tconsole.log('INVALID inlay hint, empty label', hint);\n\t\t\treturn false;\n\t\t}\n\t\tif (range && !range.contains(hint.position)) {\n\t\t\t// console.log('INVALID inlay hint, position outside range', range, hint);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate _convertInlayHint(hint: vscode.InlayHint, id: extHostProtocol.ChainedCacheId): extHostProtocol.IInlayHintDto {\n\n\t\tconst disposables = this._disposables.get(id[0]);\n\t\tif (!disposables) {\n\t\t\tthrow Error('DisposableStore is missing...');\n\t\t}\n\n\t\tconst result: extHostProtocol.IInlayHintDto = {\n\t\t\tlabel: '', // fill-in below\n\t\t\tcacheId: id,\n\t\t\ttooltip: typeConvert.MarkdownString.fromStrict(hint.tooltip),\n\t\t\tposition: typeConvert.Position.from(hint.position),\n\t\t\ttextEdits: hint.textEdits && hint.textEdits.map(typeConvert.TextEdit.from),\n\t\t\tkind: hint.kind && typeConvert.InlayHintKind.from(hint.kind),\n\t\t\tpaddingLeft: hint.paddingLeft,\n\t\t\tpaddingRight: hint.paddingRight,\n\t\t};\n\n\t\tif (typeof hint.label === 'string') {\n\t\t\tresult.label = hint.label;\n\t\t} else {\n\t\t\tconst parts: languages.InlayHintLabelPart[] = [];\n\t\t\tresult.label = parts;\n\n\t\t\tfor (const part of hint.label) {\n\t\t\t\tif (!part.value) {\n\t\t\t\t\tconsole.warn('INVALID inlay hint, empty label part', this._extension.identifier.value);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst part2: languages.InlayHintLabelPart = {\n\t\t\t\t\tlabel: part.value,\n\t\t\t\t\ttooltip: typeConvert.MarkdownString.fromStrict(part.tooltip)\n\t\t\t\t};\n\t\t\t\tif (Location.isLocation(part.location)) {\n\t\t\t\t\tpart2.location = typeConvert.location.from(part.location);\n\t\t\t\t}\n\t\t\t\tif (part.command) {\n\t\t\t\t\tpart2.command = this._commands.toInternal(part.command, disposables);\n\t\t\t\t}\n\t\t\t\tparts.push(part2);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass LinkProviderAdapter {\n\n\tprivate _cache = new Cache<vscode.DocumentLink>('DocumentLink');\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentLinkProvider\n\t) { }\n\n\tasync provideLinks(resource: URI, token: CancellationToken): Promise<extHostProtocol.ILinksListDto | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\n\t\tconst links = await this._provider.provideDocumentLinks(doc, token);\n\t\tif (!Array.isArray(links) || links.length === 0) {\n\t\t\t// bad result\n\t\t\treturn undefined;\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\t// cancelled -> return without further ado, esp no caching\n\t\t\t// of results as they will leak\n\t\t\treturn undefined;\n\t\t}\n\t\tif (typeof this._provider.resolveDocumentLink !== 'function') {\n\t\t\t// no resolve -> no caching\n\t\t\treturn { links: links.filter(LinkProviderAdapter._validateLink).map(typeConvert.DocumentLink.from) };\n\n\t\t} else {\n\t\t\t// cache links for future resolving\n\t\t\tconst pid = this._cache.add(links);\n\t\t\tconst result: extHostProtocol.ILinksListDto = { links: [], cacheId: pid };\n\t\t\tfor (let i = 0; i < links.length; i++) {\n\n\t\t\t\tif (!LinkProviderAdapter._validateLink(links[i])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst dto: extHostProtocol.ILinkDto = typeConvert.DocumentLink.from(links[i]);\n\t\t\t\tdto.cacheId = [pid, i];\n\t\t\t\tresult.links.push(dto);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tprivate static _validateLink(link: vscode.DocumentLink): boolean {\n\t\tif (link.target && link.target.path.length > 50_000) {\n\t\t\tconsole.warn('DROPPING link because it is too long');\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync resolveLink(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ILinkDto | undefined> {\n\t\tif (typeof this._provider.resolveDocumentLink !== 'function') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst item = this._cache.get(...id);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst link = await this._provider.resolveDocumentLink(item, token);\n\t\tif (!link || !LinkProviderAdapter._validateLink(link)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn typeConvert.DocumentLink.from(link);\n\t}\n\n\treleaseLinks(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\nclass ColorProviderAdapter {\n\n\tconstructor(\n\t\tprivate _documents: ExtHostDocuments,\n\t\tprivate _provider: vscode.DocumentColorProvider\n\t) { }\n\n\tasync provideColors(resource: URI, token: CancellationToken): Promise<extHostProtocol.IRawColorInfo[]> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst colors = await this._provider.provideDocumentColors(doc, token);\n\t\tif (!Array.isArray(colors)) {\n\t\t\treturn [];\n\t\t}\n\t\tconst colorInfos: extHostProtocol.IRawColorInfo[] = colors.map(ci => {\n\t\t\treturn {\n\t\t\t\tcolor: typeConvert.Color.from(ci.color),\n\t\t\t\trange: typeConvert.Range.from(ci.range)\n\t\t\t};\n\t\t});\n\t\treturn colorInfos;\n\t}\n\n\tasync provideColorPresentations(resource: URI, raw: extHostProtocol.IRawColorInfo, token: CancellationToken): Promise<languages.IColorPresentation[] | undefined> {\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst range = typeConvert.Range.to(raw.range);\n\t\tconst color = typeConvert.Color.to(raw.color);\n\t\tconst value = await this._provider.provideColorPresentations(color, { document, range }, token);\n\t\tif (!Array.isArray(value)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn value.map(typeConvert.ColorPresentation.from);\n\t}\n}\n\nclass FoldingProviderAdapter {\n\n\tconstructor(\n\t\tprivate _documents: ExtHostDocuments,\n\t\tprivate _provider: vscode.FoldingRangeProvider\n\t) { }\n\n\tasync provideFoldingRanges(resource: URI, context: languages.FoldingContext, token: CancellationToken): Promise<languages.FoldingRange[] | undefined> {\n\t\tconst doc = this._documents.getDocument(resource);\n\t\tconst ranges = await this._provider.provideFoldingRanges(doc, context, token);\n\t\tif (!Array.isArray(ranges)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn ranges.map(typeConvert.FoldingRange.from);\n\t}\n}\n\nclass SelectionRangeAdapter {\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.SelectionRangeProvider,\n\t\tprivate readonly _logService: ILogService\n\t) { }\n\n\tasync provideSelectionRanges(resource: URI, pos: IPosition[], token: CancellationToken): Promise<languages.SelectionRange[][]> {\n\t\tconst document = this._documents.getDocument(resource);\n\t\tconst positions = pos.map(typeConvert.Position.to);\n\n\t\tconst allProviderRanges = await this._provider.provideSelectionRanges(document, positions, token);\n\t\tif (!isNonEmptyArray(allProviderRanges)) {\n\t\t\treturn [];\n\t\t}\n\t\tif (allProviderRanges.length !== positions.length) {\n\t\t\tthis._logService.warn('BAD selection ranges, provider must return ranges for each position');\n\t\t\treturn [];\n\t\t}\n\t\tconst allResults: languages.SelectionRange[][] = [];\n\t\tfor (let i = 0; i < positions.length; i++) {\n\t\t\tconst oneResult: languages.SelectionRange[] = [];\n\t\t\tallResults.push(oneResult);\n\n\t\t\tlet last: vscode.Position | vscode.Range = positions[i];\n\t\t\tlet selectionRange = allProviderRanges[i];\n\n\t\t\twhile (true) {\n\t\t\t\tif (!selectionRange.range.contains(last)) {\n\t\t\t\t\tthrow new Error('INVALID selection range, must contain the previous range');\n\t\t\t\t}\n\t\t\t\toneResult.push(typeConvert.SelectionRange.from(selectionRange));\n\t\t\t\tif (!selectionRange.parent) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlast = selectionRange.range;\n\t\t\t\tselectionRange = selectionRange.parent;\n\t\t\t}\n\t\t}\n\t\treturn allResults;\n\t}\n}\n\nclass CallHierarchyAdapter {\n\n\tprivate readonly _idPool = new IdGenerator('');\n\tprivate readonly _cache = new Map<string, Map<string, vscode.CallHierarchyItem>>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.CallHierarchyProvider\n\t) { }\n\n\tasync prepareSession(uri: URI, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ICallHierarchyItemDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst items = await this._provider.prepareCallHierarchy(doc, pos, token);\n\t\tif (!items) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sessionId = this._idPool.nextId();\n\t\tthis._cache.set(sessionId, new Map());\n\n\t\tif (Array.isArray(items)) {\n\t\t\treturn items.map(item => this._cacheAndConvertItem(sessionId, item));\n\t\t} else {\n\t\t\treturn [this._cacheAndConvertItem(sessionId, items)];\n\t\t}\n\t}\n\n\tasync provideCallsTo(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IIncomingCallDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing call hierarchy item');\n\t\t}\n\t\tconst calls = await this._provider.provideCallHierarchyIncomingCalls(item, token);\n\t\tif (!calls) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn calls.map(call => {\n\t\t\treturn {\n\t\t\t\tfrom: this._cacheAndConvertItem(sessionId, call.from),\n\t\t\t\tfromRanges: call.fromRanges.map(r => typeConvert.Range.from(r))\n\t\t\t};\n\t\t});\n\t}\n\n\tasync provideCallsFrom(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IOutgoingCallDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing call hierarchy item');\n\t\t}\n\t\tconst calls = await this._provider.provideCallHierarchyOutgoingCalls(item, token);\n\t\tif (!calls) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn calls.map(call => {\n\t\t\treturn {\n\t\t\t\tto: this._cacheAndConvertItem(sessionId, call.to),\n\t\t\t\tfromRanges: call.fromRanges.map(r => typeConvert.Range.from(r))\n\t\t\t};\n\t\t});\n\t}\n\n\treleaseSession(sessionId: string): void {\n\t\tthis._cache.delete(sessionId);\n\t}\n\n\tprivate _cacheAndConvertItem(sessionId: string, item: vscode.CallHierarchyItem): extHostProtocol.ICallHierarchyItemDto {\n\t\tconst map = this._cache.get(sessionId)!;\n\t\tconst dto = typeConvert.CallHierarchyItem.from(item, sessionId, map.size.toString(36));\n\t\tmap.set(dto._itemId, item);\n\t\treturn dto;\n\t}\n\n\tprivate _itemFromCache(sessionId: string, itemId: string): vscode.CallHierarchyItem | undefined {\n\t\tconst map = this._cache.get(sessionId);\n\t\treturn map?.get(itemId);\n\t}\n}\n\nclass TypeHierarchyAdapter {\n\n\tprivate readonly _idPool = new IdGenerator('');\n\tprivate readonly _cache = new Map<string, Map<string, vscode.TypeHierarchyItem>>();\n\n\tconstructor(\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.TypeHierarchyProvider\n\t) { }\n\n\tasync prepareSession(uri: URI, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\n\t\tconst items = await this._provider.prepareTypeHierarchy(doc, pos, token);\n\t\tif (!items) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sessionId = this._idPool.nextId();\n\t\tthis._cache.set(sessionId, new Map());\n\n\t\tif (Array.isArray(items)) {\n\t\t\treturn items.map(item => this._cacheAndConvertItem(sessionId, item));\n\t\t} else {\n\t\t\treturn [this._cacheAndConvertItem(sessionId, items)];\n\t\t}\n\t}\n\n\tasync provideSupertypes(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing type hierarchy item');\n\t\t}\n\t\tconst supertypes = await this._provider.provideTypeHierarchySupertypes(item, token);\n\t\tif (!supertypes) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn supertypes.map(supertype => {\n\t\t\treturn this._cacheAndConvertItem(sessionId, supertype);\n\t\t});\n\t}\n\n\tasync provideSubtypes(sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\tconst item = this._itemFromCache(sessionId, itemId);\n\t\tif (!item) {\n\t\t\tthrow new Error('missing type hierarchy item');\n\t\t}\n\t\tconst subtypes = await this._provider.provideTypeHierarchySubtypes(item, token);\n\t\tif (!subtypes) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn subtypes.map(subtype => {\n\t\t\treturn this._cacheAndConvertItem(sessionId, subtype);\n\t\t});\n\t}\n\n\treleaseSession(sessionId: string): void {\n\t\tthis._cache.delete(sessionId);\n\t}\n\n\tprivate _cacheAndConvertItem(sessionId: string, item: vscode.TypeHierarchyItem): extHostProtocol.ITypeHierarchyItemDto {\n\t\tconst map = this._cache.get(sessionId)!;\n\t\tconst dto = typeConvert.TypeHierarchyItem.from(item, sessionId, map.size.toString(36));\n\t\tmap.set(dto._itemId, item);\n\t\treturn dto;\n\t}\n\n\tprivate _itemFromCache(sessionId: string, itemId: string): vscode.TypeHierarchyItem | undefined {\n\t\tconst map = this._cache.get(sessionId);\n\t\treturn map?.get(itemId);\n\t}\n}\n\nclass DocumentDropEditAdapter {\n\n\tprivate readonly _cache = new Cache<vscode.DocumentDropEdit>('DocumentDropEdit');\n\n\tconstructor(\n\t\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _provider: vscode.DocumentDropEditProvider,\n\t\tprivate readonly _handle: number,\n\t\tprivate readonly _extension: IExtensionDescription,\n\t) { }\n\n\tasync provideDocumentOnDropEdits(requestId: number, uri: URI, position: IPosition, dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IDocumentDropEditDto[] | undefined> {\n\t\tconst doc = this._documents.getDocument(uri);\n\t\tconst pos = typeConvert.Position.to(position);\n\t\tconst dataTransfer = typeConvert.DataTransfer.toDataTransfer(dataTransferDto, async (id) => {\n\t\t\treturn (await this._proxy.$resolveDocumentOnDropFileData(this._handle, requestId, id)).buffer;\n\t\t});\n\n\t\tconst edits = await this._provider.provideDocumentDropEdits(doc, pos, dataTransfer, token);\n\t\tif (!edits) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst editsArray = asArray(edits);\n\t\tconst cacheId = this._cache.add(editsArray);\n\n\t\treturn editsArray.map((edit, i): extHostProtocol.IDocumentDropEditDto => ({\n\t\t\t_cacheId: [cacheId, i],\n\t\t\ttitle: edit.title ?? localize('defaultDropLabel', \"Drop using '{0}' extension\", this._extension.displayName || this._extension.name),\n\t\t\tkind: edit.kind?.value,\n\t\t\tyieldTo: edit.yieldTo?.map(x => x.value),\n\t\t\tinsertText: typeof edit.insertText === 'string' ? edit.insertText : { snippet: edit.insertText.value },\n\t\t\tadditionalEdit: edit.additionalEdit ? typeConvert.WorkspaceEdit.from(edit.additionalEdit, undefined) : undefined,\n\t\t}));\n\t}\n\n\tasync resolveDropEdit(id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\tconst [sessionId, itemId] = id;\n\t\tconst item = this._cache.get(sessionId, itemId);\n\t\tif (!item || !this._provider.resolveDocumentDropEdit) {\n\t\t\treturn {}; // this should not happen...\n\t\t}\n\n\t\tconst resolvedItem = (await this._provider.resolveDocumentDropEdit(item, token)) ?? item;\n\t\tconst additionalEdit = resolvedItem.additionalEdit ? typeConvert.WorkspaceEdit.from(resolvedItem.additionalEdit, undefined) : undefined;\n\t\treturn { additionalEdit };\n\t}\n\n\treleaseDropEdits(id: number): any {\n\t\tthis._cache.delete(id);\n\t}\n}\n\ntype Adapter = DocumentSymbolAdapter | CodeLensAdapter | DefinitionAdapter | HoverAdapter\n\t| DocumentHighlightAdapter | MultiDocumentHighlightAdapter | ReferenceAdapter | CodeActionAdapter\n\t| DocumentPasteEditProvider | DocumentFormattingAdapter | RangeFormattingAdapter\n\t| OnTypeFormattingAdapter | NavigateTypeAdapter | RenameAdapter\n\t| CompletionsAdapter | SignatureHelpAdapter | LinkProviderAdapter | ImplementationAdapter\n\t| TypeDefinitionAdapter | ColorProviderAdapter | FoldingProviderAdapter | DeclarationAdapter\n\t| SelectionRangeAdapter | CallHierarchyAdapter | TypeHierarchyAdapter\n\t| DocumentSemanticTokensAdapter | DocumentRangeSemanticTokensAdapter\n\t| EvaluatableExpressionAdapter | InlineValuesAdapter\n\t| LinkedEditingRangeAdapter | InlayHintsAdapter | InlineCompletionAdapter\n\t| DocumentDropEditAdapter | NewSymbolNamesAdapter;\n\nclass AdapterData {\n\tconstructor(\n\t\treadonly adapter: Adapter,\n\t\treadonly extension: IExtensionDescription\n\t) { }\n}\n\nexport class ExtHostLanguageFeatures extends CoreDisposable implements extHostProtocol.ExtHostLanguageFeaturesShape {\n\n\tprivate static _handlePool: number = 0;\n\n\tprivate readonly _proxy: extHostProtocol.MainThreadLanguageFeaturesShape;\n\tprivate readonly _adapter = new Map<number, AdapterData>();\n\n\tprivate _inlineCompletionsUnificationState: vscode.InlineCompletionsUnificationState;\n\tpublic get inlineCompletionsUnificationState(): vscode.InlineCompletionsUnificationState {\n\t\treturn this._inlineCompletionsUnificationState;\n\t}\n\n\tprivate readonly _onDidChangeInlineCompletionsUnificationState = this._register(new Emitter<void>());\n\treadonly onDidChangeInlineCompletionsUnificationState = this._onDidChangeInlineCompletionsUnificationState.event;\n\n\tconstructor(\n\t\tmainContext: extHostProtocol.IMainContext,\n\t\tprivate readonly _uriTransformer: IURITransformer,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _commands: ExtHostCommands,\n\t\tprivate readonly _diagnostics: ExtHostDiagnostics,\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _apiDeprecation: IExtHostApiDeprecationService,\n\t\tprivate readonly _extensionTelemetry: IExtHostTelemetry\n\t) {\n\t\tsuper();\n\t\tthis._proxy = mainContext.getProxy(extHostProtocol.MainContext.MainThreadLanguageFeatures);\n\t\tthis._inlineCompletionsUnificationState = {\n\t\t\tcodeUnification: false,\n\t\t\tmodelUnification: false,\n\t\t\textensionUnification: false,\n\t\t\texpAssignments: []\n\t\t};\n\t}\n\n\tprivate _transformDocumentSelector(selector: vscode.DocumentSelector, extension: IExtensionDescription): Array<extHostProtocol.IDocumentFilterDto> {\n\t\treturn typeConvert.DocumentSelector.from(selector, this._uriTransformer, extension);\n\t}\n\n\tprivate _createDisposable(handle: number): Disposable {\n\t\treturn new Disposable(() => {\n\t\t\tthis._adapter.delete(handle);\n\t\t\tthis._proxy.$unregister(handle);\n\t\t});\n\t}\n\n\tprivate _nextHandle(): number {\n\t\treturn ExtHostLanguageFeatures._handlePool++;\n\t}\n\n\tprivate async _withAdapter<A, R>(\n\t\thandle: number,\n\t\tctor: { new(...args: any[]): A },\n\t\tcallback: (adapter: A, extension: IExtensionDescription) => Promise<R>,\n\t\tfallbackValue: R,\n\t\ttokenToRaceAgainst: CancellationToken | undefined,\n\t\tdoNotLog: boolean = false\n\t): Promise<R> {\n\t\tconst data = this._adapter.get(handle);\n\t\tif (!data || !(data.adapter instanceof ctor)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\tconst t1: number = Date.now();\n\t\tif (!doNotLog) {\n\t\t\tthis._logService.trace(`[${data.extension.identifier.value}] INVOKE provider '${callback.toString().replace(/[\\r\\n]/g, '')}'`);\n\t\t}\n\n\t\tconst result = callback(data.adapter, data.extension);\n\n\t\t// logging,tracing\n\t\tPromise.resolve(result).catch(err => {\n\t\t\tif (!isCancellationError(err)) {\n\t\t\t\tthis._logService.error(`[${data.extension.identifier.value}] provider FAILED`);\n\t\t\t\tthis._logService.error(err);\n\n\t\t\t\tthis._extensionTelemetry.onExtensionError(data.extension.identifier, err);\n\t\t\t}\n\t\t}).finally(() => {\n\t\t\tif (!doNotLog) {\n\t\t\t\tthis._logService.trace(`[${data.extension.identifier.value}] provider DONE after ${Date.now() - t1}ms`);\n\t\t\t}\n\t\t});\n\n\t\tif (CancellationToken.isCancellationToken(tokenToRaceAgainst)) {\n\t\t\treturn raceCancellationError(result, tokenToRaceAgainst);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _addNewAdapter(adapter: Adapter, extension: IExtensionDescription): number {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(adapter, extension));\n\t\treturn handle;\n\t}\n\n\tprivate static _extLabel(ext: IExtensionDescription): string {\n\t\treturn ext.displayName || ext.name;\n\t}\n\n\tprivate static _extId(ext: IExtensionDescription): string {\n\t\treturn ext.identifier.value;\n\t}\n\n\t// --- outline\n\n\tregisterDocumentSymbolProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentSymbolProvider, metadata?: vscode.DocumentSymbolProviderMetadata): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentSymbolAdapter(this._documents, provider), extension);\n\t\tconst displayName = (metadata && metadata.label) || ExtHostLanguageFeatures._extLabel(extension);\n\t\tthis._proxy.$registerDocumentSymbolProvider(handle, this._transformDocumentSelector(selector, extension), displayName);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<languages.DocumentSymbol[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentSymbolAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined, token);\n\t}\n\n\t// --- code lens\n\n\tregisterCodeLensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CodeLensProvider): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tconst eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this._nextHandle() : undefined;\n\n\t\tthis._adapter.set(handle, new AdapterData(new CodeLensAdapter(this._documents, this._commands.converter, provider, extension, this._extensionTelemetry, this._logService), extension));\n\t\tthis._proxy.$registerCodeLensSupport(handle, this._transformDocumentSelector(selector, extension), eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeCodeLenses!(_ => this._proxy.$emitCodeLensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.ICodeLensListDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined, token, resource.scheme === 'output');\n\t}\n\n\t$resolveCodeLens(handle: number, symbol: extHostProtocol.ICodeLensDto, token: CancellationToken): Promise<extHostProtocol.ICodeLensDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(symbol, token), undefined, undefined, true);\n\t}\n\n\t$releaseCodeLenses(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, CodeLensAdapter, adapter => Promise.resolve(adapter.releaseCodeLenses(cacheId)), undefined, undefined, true);\n\t}\n\n\t// --- declaration\n\n\tregisterDefinitionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DefinitionProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DefinitionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDefinitionSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDefinition(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterDeclarationProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DeclarationProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DeclarationAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDeclarationSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDeclaration(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterImplementationProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.ImplementationProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ImplementationAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerImplementationSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideImplementation(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), [], token);\n\t}\n\n\tregisterTypeDefinitionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.TypeDefinitionProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new TypeDefinitionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerTypeDefinitionSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideTypeDefinition(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.LocationLink[]> {\n\t\treturn this._withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), [], token);\n\t}\n\n\t// --- extra info\n\n\tregisterHoverProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.HoverProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new HoverAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerHoverProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideHover(handle: number, resource: UriComponents, position: IPosition, context: languages.HoverContext<{ id: number }> | undefined, token: CancellationToken,): Promise<extHostProtocol.HoverWithId | undefined> {\n\t\treturn this._withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$releaseHover(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, HoverAdapter, adapter => Promise.resolve(adapter.releaseHover(id)), undefined, undefined);\n\t}\n\n\t// --- debug hover\n\n\tregisterEvaluatableExpressionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.EvaluatableExpressionProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new EvaluatableExpressionAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerEvaluatableExpressionProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideEvaluatableExpression(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.EvaluatableExpression | undefined> {\n\t\treturn this._withAdapter(handle, EvaluatableExpressionAdapter, adapter => adapter.provideEvaluatableExpression(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t// --- debug inline values\n\n\tregisterInlineValuesProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineValuesProvider, extensionId?: ExtensionIdentifier): vscode.Disposable {\n\n\t\tconst eventHandle = typeof provider.onDidChangeInlineValues === 'function' ? this._nextHandle() : undefined;\n\t\tconst handle = this._addNewAdapter(new InlineValuesAdapter(this._documents, provider), extension);\n\n\t\tthis._proxy.$registerInlineValuesProvider(handle, this._transformDocumentSelector(selector, extension), eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeInlineValues!(_ => this._proxy.$emitInlineValuesEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\t\treturn result;\n\t}\n\n\t$provideInlineValues(handle: number, resource: UriComponents, range: IRange, context: extHostProtocol.IInlineValueContextDto, token: CancellationToken): Promise<languages.InlineValue[] | undefined> {\n\t\treturn this._withAdapter(handle, InlineValuesAdapter, adapter => adapter.provideInlineValues(URI.revive(resource), range, context, token), undefined, token);\n\t}\n\n\t// --- occurrences\n\n\tregisterDocumentHighlightProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentHighlightProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentHighlightAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentHighlightProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\tregisterMultiDocumentHighlightProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.MultiDocumentHighlightProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new MultiDocumentHighlightAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerMultiDocumentHighlightProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentHighlights(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<languages.DocumentHighlight[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\t$provideMultiDocumentHighlights(handle: number, resource: UriComponents, position: IPosition, otherModels: UriComponents[], token: CancellationToken): Promise<languages.MultiDocumentHighlight[] | undefined> {\n\t\treturn this._withAdapter(handle, MultiDocumentHighlightAdapter, adapter => adapter.provideMultiDocumentHighlights(URI.revive(resource), position, otherModels.map(model => URI.revive(model)), token), undefined, token);\n\t}\n\n\t// --- linked editing\n\n\tregisterLinkedEditingRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.LinkedEditingRangeProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new LinkedEditingRangeAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerLinkedEditingRangeProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideLinkedEditingRanges(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ILinkedEditingRangesDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkedEditingRangeAdapter, async adapter => {\n\t\t\tconst res = await adapter.provideLinkedEditingRanges(URI.revive(resource), position, token);\n\t\t\tif (res) {\n\t\t\t\treturn {\n\t\t\t\t\tranges: res.ranges,\n\t\t\t\t\twordPattern: res.wordPattern ? ExtHostLanguageFeatures._serializeRegExp(res.wordPattern) : undefined\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}, undefined, token);\n\t}\n\n\t// --- references\n\n\tregisterReferenceProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.ReferenceProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ReferenceAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerReferenceSupport(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideReferences(handle: number, resource: UriComponents, position: IPosition, context: languages.ReferenceContext, token: CancellationToken): Promise<languages.Location[] | undefined> {\n\t\treturn this._withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t// --- code actions\n\n\tregisterCodeActionProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CodeActionProvider, metadata?: vscode.CodeActionProviderMetadata): vscode.Disposable {\n\t\tconst store = new DisposableStore();\n\t\tconst handle = this._addNewAdapter(new CodeActionAdapter(this._documents, this._commands.converter, this._diagnostics, provider, this._logService, extension, this._apiDeprecation), extension);\n\t\tthis._proxy.$registerCodeActionSupport(handle, this._transformDocumentSelector(selector, extension), {\n\t\t\tprovidedKinds: metadata?.providedCodeActionKinds?.map(kind => kind.value),\n\t\t\tdocumentation: metadata?.documentation?.map(x => ({\n\t\t\t\tkind: x.kind.value,\n\t\t\t\tcommand: this._commands.converter.toInternal(x.command, store),\n\t\t\t}))\n\t\t}, ExtHostLanguageFeatures._extLabel(extension), ExtHostLanguageFeatures._extId(extension), Boolean(provider.resolveCodeAction));\n\t\tstore.add(this._createDisposable(handle));\n\t\treturn store;\n\t}\n\n\n\t$provideCodeActions(handle: number, resource: UriComponents, rangeOrSelection: IRange | ISelection, context: languages.CodeActionContext, token: CancellationToken): Promise<extHostProtocol.ICodeActionListDto | undefined> {\n\t\treturn this._withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeActions(URI.revive(resource), rangeOrSelection, context, token), undefined, token);\n\t}\n\n\t$resolveCodeAction(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ edit?: extHostProtocol.IWorkspaceEditDto; command?: extHostProtocol.ICommandDto }> {\n\t\treturn this._withAdapter(handle, CodeActionAdapter, adapter => adapter.resolveCodeAction(id, token), {}, undefined);\n\t}\n\n\t$releaseCodeActions(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, CodeActionAdapter, adapter => Promise.resolve(adapter.releaseCodeActions(cacheId)), undefined, undefined);\n\t}\n\n\t// --- formatting\n\n\tregisterDocumentFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentFormattingEditProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentFormattingSupport(handle, this._transformDocumentSelector(selector, extension), extension.identifier, extension.displayName || extension.name);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentFormattingEdits(handle: number, resource: UriComponents, options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined, token);\n\t}\n\n\tregisterDocumentRangeFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentRangeFormattingEditProvider): vscode.Disposable {\n\t\tconst canFormatMultipleRanges = typeof provider.provideDocumentRangesFormattingEdits === 'function';\n\t\tconst handle = this._addNewAdapter(new RangeFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerRangeFormattingSupport(handle, this._transformDocumentSelector(selector, extension), extension.identifier, extension.displayName || extension.name, canFormatMultipleRanges);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: IRange, options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\t\treturn this._withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined, token);\n\t}\n\n\t$provideDocumentRangesFormattingEdits(handle: number, resource: UriComponents, ranges: IRange[], options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\t\treturn this._withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangesFormattingEdits(URI.revive(resource), ranges, options, token), undefined, token);\n\t}\n\n\tregisterOnTypeFormattingEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.OnTypeFormattingEditProvider, triggerCharacters: string[]): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new OnTypeFormattingAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerOnTypeFormattingSupport(handle, this._transformDocumentSelector(selector, extension), triggerCharacters, extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: IPosition, ch: string, options: languages.FormattingOptions, token: CancellationToken): Promise<languages.TextEdit[] | undefined> {\n\t\treturn this._withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined, token);\n\t}\n\n\t// --- navigate types\n\n\tregisterWorkspaceSymbolProvider(extension: IExtensionDescription, provider: vscode.WorkspaceSymbolProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new NavigateTypeAdapter(provider, this._logService), extension);\n\t\tthis._proxy.$registerNavigateTypeSupport(handle, typeof provider.resolveWorkspaceSymbol === 'function');\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideWorkspaceSymbols(handle: number, search: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolsDto> {\n\t\treturn this._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.provideWorkspaceSymbols(search, token), { symbols: [] }, token);\n\t}\n\n\t$resolveWorkspaceSymbol(handle: number, symbol: extHostProtocol.IWorkspaceSymbolDto, token: CancellationToken): Promise<extHostProtocol.IWorkspaceSymbolDto | undefined> {\n\t\treturn this._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined, undefined);\n\t}\n\n\t$releaseWorkspaceSymbols(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, NavigateTypeAdapter, adapter => adapter.releaseWorkspaceSymbols(id), undefined, undefined);\n\t}\n\n\t// --- rename\n\n\tregisterRenameProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.RenameProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new RenameAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerRenameSupport(handle, this._transformDocumentSelector(selector, extension), RenameAdapter.supportsResolving(provider));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideRenameEdits(handle: number, resource: UriComponents, position: IPosition, newName: string, token: CancellationToken): Promise<extHostProtocol.IWorkspaceEditDto | undefined> {\n\t\treturn this._withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined, token);\n\t}\n\n\t$resolveRenameLocation(handle: number, resource: URI, position: IPosition, token: CancellationToken): Promise<languages.RenameLocation | undefined> {\n\t\treturn this._withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined, token);\n\t}\n\n\tregisterNewSymbolNamesProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.NewSymbolNamesProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new NewSymbolNamesAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerNewSymbolNamesProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$supportsAutomaticNewSymbolNamesTriggerKind(handle: number): Promise<boolean | undefined> {\n\t\treturn this._withAdapter(\n\t\t\thandle,\n\t\t\tNewSymbolNamesAdapter,\n\t\t\tadapter => adapter.supportsAutomaticNewSymbolNamesTriggerKind(),\n\t\t\tfalse,\n\t\t\tundefined\n\t\t);\n\t}\n\n\t$provideNewSymbolNames(handle: number, resource: UriComponents, range: IRange, triggerKind: languages.NewSymbolNameTriggerKind, token: CancellationToken): Promise<languages.NewSymbolName[] | undefined> {\n\t\treturn this._withAdapter(handle, NewSymbolNamesAdapter, adapter => adapter.provideNewSymbolNames(URI.revive(resource), range, triggerKind, token), undefined, token);\n\t}\n\n\t//#region semantic coloring\n\n\tregisterDocumentSemanticTokensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentSemanticTokensProvider, legend: vscode.SemanticTokensLegend): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentSemanticTokensAdapter(this._documents, provider), extension);\n\t\tconst eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this._nextHandle() : undefined);\n\t\tthis._proxy.$registerDocumentSemanticTokensProvider(handle, this._transformDocumentSelector(selector, extension), legend, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle) {\n\t\t\tconst subscription = provider.onDidChangeSemanticTokens!(_ => this._proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: CancellationToken): Promise<VSBuffer | null> {\n\t\treturn this._withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null, token);\n\t}\n\n\t$releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n\t\tthis._withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined, undefined);\n\t}\n\n\tregisterDocumentRangeSemanticTokensProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentRangeSemanticTokensProvider, legend: vscode.SemanticTokensLegend): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new DocumentRangeSemanticTokensAdapter(this._documents, provider), extension);\n\t\tconst eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this._nextHandle() : undefined);\n\t\tthis._proxy.$registerDocumentRangeSemanticTokensProvider(handle, this._transformDocumentSelector(selector, extension), legend, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle) {\n\t\t\tconst subscription = provider.onDidChangeSemanticTokens!(_ => this._proxy.$emitDocumentRangeSemanticTokensEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: IRange, token: CancellationToken): Promise<VSBuffer | null> {\n\t\treturn this._withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null, token);\n\t}\n\n\t//#endregion\n\n\t// --- suggestion\n\n\tregisterCompletionItemProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CompletionItemProvider, triggerCharacters: string[]): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new CompletionsAdapter(this._documents, this._commands.converter, provider, this._apiDeprecation, extension), extension);\n\t\tthis._proxy.$registerCompletionsProvider(handle, this._transformDocumentSelector(selector, extension), triggerCharacters, CompletionsAdapter.supportsResolving(provider), extension.identifier);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideCompletionItems(handle: number, resource: UriComponents, position: IPosition, context: languages.CompletionContext, token: CancellationToken): Promise<extHostProtocol.ISuggestResultDto | undefined> {\n\t\treturn this._withAdapter(handle, CompletionsAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$resolveCompletionItem(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ISuggestDataDto | undefined> {\n\t\treturn this._withAdapter(handle, CompletionsAdapter, adapter => adapter.resolveCompletionItem(id, token), undefined, token);\n\t}\n\n\t$releaseCompletionItems(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, CompletionsAdapter, adapter => adapter.releaseCompletionItems(id), undefined, undefined);\n\t}\n\n\t// --- ghost text\n\n\tregisterInlineCompletionsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlineCompletionItemProvider, metadata: vscode.InlineCompletionItemProviderMetadata | undefined): vscode.Disposable {\n\t\tconst eventHandle = typeof provider.onDidChange === 'function' && isProposedApiEnabled(extension, 'inlineCompletionsAdditions') ? this._nextHandle() : undefined;\n\t\tconst adapter = new InlineCompletionAdapter(extension, this._documents, provider, this._commands.converter);\n\t\tconst handle = this._addNewAdapter(adapter, extension);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChange!(_ => this._proxy.$emitInlineCompletionsChange(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\tthis._proxy.$registerInlineCompletionsSupport(\n\t\t\thandle,\n\t\t\tthis._transformDocumentSelector(selector, extension),\n\t\t\tadapter.supportsHandleEvents,\n\t\t\tExtensionIdentifier.toKey(extension.identifier.value),\n\t\t\textension.version,\n\t\t\tmetadata?.groupId ? ExtensionIdentifier.toKey(metadata.groupId) : undefined,\n\t\t\tmetadata?.yieldTo?.map(extId => ExtensionIdentifier.toKey(extId)) || [],\n\t\t\tmetadata?.displayName,\n\t\t\tmetadata?.debounceDelayMs,\n\t\t\tmetadata?.excludes?.map(extId => ExtensionIdentifier.toKey(extId)) || [],\n\t\t\teventHandle,\n\t\t);\n\t\treturn result;\n\t}\n\n\t$provideInlineCompletions(handle: number, resource: UriComponents, position: IPosition, context: languages.InlineCompletionContext, token: CancellationToken): Promise<extHostProtocol.IdentifiableInlineCompletions | undefined> {\n\t\treturn this._withAdapter(handle, InlineCompletionAdapter, adapter => adapter.provideInlineCompletions(URI.revive(resource), position, context, token), undefined, undefined);\n\t}\n\n\t$handleInlineCompletionDidShow(handle: number, pid: number, idx: number, updatedInsertText: string): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapter, async adapter => {\n\t\t\tadapter.handleDidShowCompletionItem(pid, idx, updatedInsertText);\n\t\t}, undefined, undefined);\n\t}\n\n\t$handleInlineCompletionPartialAccept(handle: number, pid: number, idx: number, acceptedCharacters: number, info: languages.PartialAcceptInfo): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapter, async adapter => {\n\t\t\tadapter.handlePartialAccept(pid, idx, acceptedCharacters, info);\n\t\t}, undefined, undefined);\n\t}\n\n\t$handleInlineCompletionEndOfLifetime(handle: number, pid: number, idx: number, reason: languages.InlineCompletionEndOfLifeReason<{ pid: number; idx: number }>): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapter, async adapter => {\n\t\t\tadapter.handleEndOfLifetime(pid, idx, reason);\n\t\t}, undefined, undefined);\n\t}\n\n\t$handleInlineCompletionRejection(handle: number, pid: number, idx: number): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapter, async adapter => {\n\t\t\tadapter.handleRejection(pid, idx);\n\t\t}, undefined, undefined);\n\t}\n\n\t$freeInlineCompletionsList(handle: number, pid: number, reason: languages.InlineCompletionsDisposeReason): void {\n\t\tthis._withAdapter(handle, InlineCompletionAdapter, async adapter => { adapter.disposeCompletions(pid, reason); }, undefined, undefined);\n\t}\n\n\t$acceptInlineCompletionsUnificationState(state: IInlineCompletionsUnificationState): void {\n\t\tthis._inlineCompletionsUnificationState = state;\n\t\tthis._onDidChangeInlineCompletionsUnificationState.fire();\n\t}\n\n\t// --- parameter hints\n\n\tregisterSignatureHelpProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.SignatureHelpProvider, metadataOrTriggerChars: string[] | vscode.SignatureHelpProviderMetadata): vscode.Disposable {\n\t\tconst metadata: extHostProtocol.ISignatureHelpProviderMetadataDto | undefined = Array.isArray(metadataOrTriggerChars)\n\t\t\t? { triggerCharacters: metadataOrTriggerChars, retriggerCharacters: [] }\n\t\t\t: metadataOrTriggerChars;\n\n\t\tconst handle = this._addNewAdapter(new SignatureHelpAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerSignatureHelpProvider(handle, this._transformDocumentSelector(selector, extension), metadata);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideSignatureHelp(handle: number, resource: UriComponents, position: IPosition, context: extHostProtocol.ISignatureHelpContextDto, token: CancellationToken): Promise<extHostProtocol.ISignatureHelpDto | undefined> {\n\t\treturn this._withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, context, token), undefined, token);\n\t}\n\n\t$releaseSignatureHelp(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, SignatureHelpAdapter, adapter => adapter.releaseSignatureHelp(id), undefined, undefined);\n\t}\n\n\t// --- inline hints\n\n\tregisterInlayHintsProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.InlayHintsProvider): vscode.Disposable {\n\n\t\tconst eventHandle = typeof provider.onDidChangeInlayHints === 'function' ? this._nextHandle() : undefined;\n\t\tconst handle = this._addNewAdapter(new InlayHintsAdapter(this._documents, this._commands.converter, provider, this._logService, extension), extension);\n\n\t\tthis._proxy.$registerInlayHintsProvider(handle, this._transformDocumentSelector(selector, extension), typeof provider.resolveInlayHint === 'function', eventHandle, ExtHostLanguageFeatures._extLabel(extension));\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeInlayHints!(uri => this._proxy.$emitInlayHintsEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\t\treturn result;\n\t}\n\n\t$provideInlayHints(handle: number, resource: UriComponents, range: IRange, token: CancellationToken): Promise<extHostProtocol.IInlayHintsDto | undefined> {\n\t\treturn this._withAdapter(handle, InlayHintsAdapter, adapter => adapter.provideInlayHints(URI.revive(resource), range, token), undefined, token);\n\t}\n\n\t$resolveInlayHint(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.IInlayHintDto | undefined> {\n\t\treturn this._withAdapter(handle, InlayHintsAdapter, adapter => adapter.resolveInlayHint(id, token), undefined, token);\n\t}\n\n\t$releaseInlayHints(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, InlayHintsAdapter, adapter => adapter.releaseHints(id), undefined, undefined);\n\t}\n\n\t// --- links\n\n\tregisterDocumentLinkProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentLinkProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new LinkProviderAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentLinkProvider(handle, this._transformDocumentSelector(selector, extension), typeof provider.resolveDocumentLink === 'function');\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.ILinksListDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined, token, resource.scheme === 'output');\n\t}\n\n\t$resolveDocumentLink(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<extHostProtocol.ILinkDto | undefined> {\n\t\treturn this._withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(id, token), undefined, undefined, true);\n\t}\n\n\t$releaseDocumentLinks(handle: number, id: number): void {\n\t\tthis._withAdapter(handle, LinkProviderAdapter, adapter => adapter.releaseLinks(id), undefined, undefined, true);\n\t}\n\n\tregisterColorProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentColorProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new ColorProviderAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerDocumentColorProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): Promise<extHostProtocol.IRawColorInfo[]> {\n\t\treturn this._withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), [], token);\n\t}\n\n\t$provideColorPresentations(handle: number, resource: UriComponents, colorInfo: extHostProtocol.IRawColorInfo, token: CancellationToken): Promise<languages.IColorPresentation[] | undefined> {\n\t\treturn this._withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), undefined, token);\n\t}\n\n\tregisterFoldingRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.FoldingRangeProvider): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tconst eventHandle = typeof provider.onDidChangeFoldingRanges === 'function' ? this._nextHandle() : undefined;\n\n\t\tthis._adapter.set(handle, new AdapterData(new FoldingProviderAdapter(this._documents, provider), extension));\n\t\tthis._proxy.$registerFoldingRangeProvider(handle, this._transformDocumentSelector(selector, extension), extension.identifier, eventHandle);\n\t\tlet result = this._createDisposable(handle);\n\n\t\tif (eventHandle !== undefined) {\n\t\t\tconst subscription = provider.onDidChangeFoldingRanges!(() => this._proxy.$emitFoldingRangeEvent(eventHandle));\n\t\t\tresult = Disposable.from(result, subscription);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t$provideFoldingRanges(handle: number, resource: UriComponents, context: vscode.FoldingContext, token: CancellationToken): Promise<languages.FoldingRange[] | undefined> {\n\t\treturn this._withAdapter(\n\t\t\thandle,\n\t\t\tFoldingProviderAdapter,\n\t\t\t(adapter) =>\n\t\t\t\tadapter.provideFoldingRanges(URI.revive(resource), context, token),\n\t\t\tundefined,\n\t\t\ttoken\n\t\t);\n\t}\n\n\t// --- smart select\n\n\tregisterSelectionRangeProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.SelectionRangeProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new SelectionRangeAdapter(this._documents, provider, this._logService), extension);\n\t\tthis._proxy.$registerSelectionRangeProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideSelectionRanges(handle: number, resource: UriComponents, positions: IPosition[], token: CancellationToken): Promise<languages.SelectionRange[][]> {\n\t\treturn this._withAdapter(handle, SelectionRangeAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), [], token);\n\t}\n\n\t// --- call hierarchy\n\n\tregisterCallHierarchyProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.CallHierarchyProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new CallHierarchyAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerCallHierarchyProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareCallHierarchy(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ICallHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => Promise.resolve(adapter.prepareSession(URI.revive(resource), position, token)), undefined, token);\n\t}\n\n\t$provideCallHierarchyIncomingCalls(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IIncomingCallDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallsTo(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$provideCallHierarchyOutgoingCalls(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.IOutgoingCallDto[] | undefined> {\n\t\treturn this._withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallsFrom(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$releaseCallHierarchy(handle: number, sessionId: string): void {\n\t\tthis._withAdapter(handle, CallHierarchyAdapter, adapter => Promise.resolve(adapter.releaseSession(sessionId)), undefined, undefined);\n\t}\n\n\t// --- type hierarchy\n\tregisterTypeHierarchyProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.TypeHierarchyProvider): vscode.Disposable {\n\t\tconst handle = this._addNewAdapter(new TypeHierarchyAdapter(this._documents, provider), extension);\n\t\tthis._proxy.$registerTypeHierarchyProvider(handle, this._transformDocumentSelector(selector, extension));\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareTypeHierarchy(handle: number, resource: UriComponents, position: IPosition, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => Promise.resolve(adapter.prepareSession(URI.revive(resource), position, token)), undefined, token);\n\t}\n\n\t$provideTypeHierarchySupertypes(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => adapter.provideSupertypes(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$provideTypeHierarchySubtypes(handle: number, sessionId: string, itemId: string, token: CancellationToken): Promise<extHostProtocol.ITypeHierarchyItemDto[] | undefined> {\n\t\treturn this._withAdapter(handle, TypeHierarchyAdapter, adapter => adapter.provideSubtypes(sessionId, itemId, token), undefined, token);\n\t}\n\n\t$releaseTypeHierarchy(handle: number, sessionId: string): void {\n\t\tthis._withAdapter(handle, TypeHierarchyAdapter, adapter => Promise.resolve(adapter.releaseSession(sessionId)), undefined, undefined);\n\t}\n\n\t// --- Document on drop\n\n\tregisterDocumentOnDropEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentDropEditProvider, metadata?: vscode.DocumentDropEditProviderMetadata) {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(new DocumentDropEditAdapter(this._proxy, this._documents, provider, handle, extension), extension));\n\n\t\tthis._proxy.$registerDocumentOnDropEditProvider(handle, this._transformDocumentSelector(selector, extension), metadata ? {\n\t\t\tsupportsResolve: !!provider.resolveDocumentDropEdit,\n\t\t\tdropMimeTypes: metadata.dropMimeTypes,\n\t\t\tprovidedDropKinds: metadata.providedDropEditKinds?.map(x => x.value),\n\t\t} : undefined);\n\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$provideDocumentOnDropEdits(handle: number, requestId: number, resource: UriComponents, position: IPosition, dataTransferDto: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.IDocumentDropEditDto[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentDropEditAdapter, adapter =>\n\t\t\tPromise.resolve(adapter.provideDocumentOnDropEdits(requestId, URI.revive(resource), position, dataTransferDto, token)), undefined, undefined);\n\t}\n\n\t$resolveDropEdit(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\treturn this._withAdapter(handle, DocumentDropEditAdapter, adapter => adapter.resolveDropEdit(id, token), {}, undefined);\n\t}\n\n\t$releaseDocumentOnDropEdits(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, DocumentDropEditAdapter, adapter => Promise.resolve(adapter.releaseDropEdits(cacheId)), undefined, undefined);\n\t}\n\n\t// --- copy/paste actions\n\n\tregisterDocumentPasteEditProvider(extension: IExtensionDescription, selector: vscode.DocumentSelector, provider: vscode.DocumentPasteEditProvider, metadata: vscode.DocumentPasteProviderMetadata): vscode.Disposable {\n\t\tconst handle = this._nextHandle();\n\t\tthis._adapter.set(handle, new AdapterData(new DocumentPasteEditProvider(this._proxy, this._documents, provider, handle, extension), extension));\n\t\tthis._proxy.$registerPasteEditProvider(handle, this._transformDocumentSelector(selector, extension), {\n\t\t\tsupportsCopy: !!provider.prepareDocumentPaste,\n\t\t\tsupportsPaste: !!provider.provideDocumentPasteEdits,\n\t\t\tsupportsResolve: !!provider.resolveDocumentPasteEdit,\n\t\t\tprovidedPasteEditKinds: metadata.providedPasteEditKinds?.map(x => x.value),\n\t\t\tcopyMimeTypes: metadata.copyMimeTypes,\n\t\t\tpasteMimeTypes: metadata.pasteMimeTypes,\n\t\t});\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$prepareDocumentPaste(handle: number, resource: UriComponents, ranges: IRange[], dataTransfer: extHostProtocol.DataTransferDTO, token: CancellationToken): Promise<extHostProtocol.DataTransferDTO | undefined> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.prepareDocumentPaste(URI.revive(resource), ranges, dataTransfer, token), undefined, token);\n\t}\n\n\t$providePasteEdits(handle: number, requestId: number, resource: UriComponents, ranges: IRange[], dataTransferDto: extHostProtocol.DataTransferDTO, context: extHostProtocol.IDocumentPasteContextDto, token: CancellationToken): Promise<extHostProtocol.IPasteEditDto[] | undefined> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.providePasteEdits(requestId, URI.revive(resource), ranges, dataTransferDto, context, token), undefined, token);\n\t}\n\n\t$resolvePasteEdit(handle: number, id: extHostProtocol.ChainedCacheId, token: CancellationToken): Promise<{ additionalEdit?: extHostProtocol.IWorkspaceEditDto }> {\n\t\treturn this._withAdapter(handle, DocumentPasteEditProvider, adapter => adapter.resolvePasteEdit(id, token), {}, undefined);\n\t}\n\n\t$releasePasteEdits(handle: number, cacheId: number): void {\n\t\tthis._withAdapter(handle, DocumentPasteEditProvider, adapter => Promise.resolve(adapter.releasePasteEdits(cacheId)), undefined, undefined);\n\t}\n\n\t// --- configuration\n\n\tprivate static _serializeRegExp(regExp: RegExp): extHostProtocol.IRegExpDto {\n\t\treturn {\n\t\t\tpattern: regExp.source,\n\t\t\tflags: regExp.flags,\n\t\t};\n\t}\n\n\tprivate static _serializeIndentationRule(indentationRule: vscode.IndentationRule): extHostProtocol.IIndentationRuleDto {\n\t\treturn {\n\t\t\tdecreaseIndentPattern: ExtHostLanguageFeatures._serializeRegExp(indentationRule.decreaseIndentPattern),\n\t\t\tincreaseIndentPattern: ExtHostLanguageFeatures._serializeRegExp(indentationRule.increaseIndentPattern),\n\t\t\tindentNextLinePattern: indentationRule.indentNextLinePattern ? ExtHostLanguageFeatures._serializeRegExp(indentationRule.indentNextLinePattern) : undefined,\n\t\t\tunIndentedLinePattern: indentationRule.unIndentedLinePattern ? ExtHostLanguageFeatures._serializeRegExp(indentationRule.unIndentedLinePattern) : undefined,\n\t\t};\n\t}\n\n\tprivate static _serializeOnEnterRule(onEnterRule: vscode.OnEnterRule): extHostProtocol.IOnEnterRuleDto {\n\t\treturn {\n\t\t\tbeforeText: ExtHostLanguageFeatures._serializeRegExp(onEnterRule.beforeText),\n\t\t\tafterText: onEnterRule.afterText ? ExtHostLanguageFeatures._serializeRegExp(onEnterRule.afterText) : undefined,\n\t\t\tpreviousLineText: onEnterRule.previousLineText ? ExtHostLanguageFeatures._serializeRegExp(onEnterRule.previousLineText) : undefined,\n\t\t\taction: onEnterRule.action\n\t\t};\n\t}\n\n\tprivate static _serializeOnEnterRules(onEnterRules: vscode.OnEnterRule[]): extHostProtocol.IOnEnterRuleDto[] {\n\t\treturn onEnterRules.map(ExtHostLanguageFeatures._serializeOnEnterRule);\n\t}\n\n\tprivate static _serializeAutoClosingPair(autoClosingPair: vscode.AutoClosingPair): IAutoClosingPairConditional {\n\t\treturn {\n\t\t\topen: autoClosingPair.open,\n\t\t\tclose: autoClosingPair.close,\n\t\t\tnotIn: autoClosingPair.notIn ? autoClosingPair.notIn.map(v => SyntaxTokenType.toString(v)) : undefined,\n\t\t};\n\t}\n\n\tprivate static _serializeAutoClosingPairs(autoClosingPairs: vscode.AutoClosingPair[]): IAutoClosingPairConditional[] {\n\t\treturn autoClosingPairs.map(ExtHostLanguageFeatures._serializeAutoClosingPair);\n\t}\n\n\tsetLanguageConfiguration(extension: IExtensionDescription, languageId: string, configuration: vscode.LanguageConfiguration): vscode.Disposable {\n\t\tconst { wordPattern } = configuration;\n\n\t\t// check for a valid word pattern\n\t\tif (wordPattern && regExpLeadsToEndlessLoop(wordPattern)) {\n\t\t\tthrow new Error(`Invalid language configuration: wordPattern '${wordPattern}' is not allowed to match the empty string.`);\n\t\t}\n\n\t\t// word definition\n\t\tif (wordPattern) {\n\t\t\tthis._documents.setWordDefinitionFor(languageId, wordPattern);\n\t\t} else {\n\t\t\tthis._documents.setWordDefinitionFor(languageId, undefined);\n\t\t}\n\n\t\tif (configuration.__electricCharacterSupport) {\n\t\t\tthis._apiDeprecation.report('LanguageConfiguration.__electricCharacterSupport', extension,\n\t\t\t\t`Do not use.`);\n\t\t}\n\n\t\tif (configuration.__characterPairSupport) {\n\t\t\tthis._apiDeprecation.report('LanguageConfiguration.__characterPairSupport', extension,\n\t\t\t\t`Do not use.`);\n\t\t}\n\n\t\tconst handle = this._nextHandle();\n\t\tconst serializedConfiguration: extHostProtocol.ILanguageConfigurationDto = {\n\t\t\tcomments: configuration.comments,\n\t\t\tbrackets: configuration.brackets,\n\t\t\twordPattern: configuration.wordPattern ? ExtHostLanguageFeatures._serializeRegExp(configuration.wordPattern) : undefined,\n\t\t\tindentationRules: configuration.indentationRules ? ExtHostLanguageFeatures._serializeIndentationRule(configuration.indentationRules) : undefined,\n\t\t\tonEnterRules: configuration.onEnterRules ? ExtHostLanguageFeatures._serializeOnEnterRules(configuration.onEnterRules) : undefined,\n\t\t\t__electricCharacterSupport: configuration.__electricCharacterSupport,\n\t\t\t__characterPairSupport: configuration.__characterPairSupport,\n\t\t\tautoClosingPairs: configuration.autoClosingPairs ? ExtHostLanguageFeatures._serializeAutoClosingPairs(configuration.autoClosingPairs) : undefined,\n\t\t};\n\n\t\tthis._proxy.$setLanguageConfiguration(handle, languageId, serializedConfiguration);\n\t\treturn this._createDisposable(handle);\n\t}\n\n\t$setWordDefinitions(wordDefinitions: extHostProtocol.ILanguageWordDefinitionDto[]): void {\n\t\tfor (const wordDefinition of wordDefinitions) {\n\t\t\tthis._documents.setWordDefinitionFor(wordDefinition.languageId, new RegExp(wordDefinition.regexSource, wordDefinition.regexFlags));\n\t\t}\n\t}\n}\n"]}