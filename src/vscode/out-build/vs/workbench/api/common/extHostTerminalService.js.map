{"version":3,"sources":["vs/workbench/api/common/extHostTerminalService.ts"],"names":[],"mappings":"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","file":"extHostTerminalService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { Event, Emitter } from '../../../base/common/event.js';\nimport { ExtHostTerminalServiceShape, MainContext, MainThreadTerminalServiceShape, ITerminalDimensionsDto, ITerminalLinkDto, ExtHostTerminalIdentifier, ICommandDto, ITerminalQuickFixOpenerDto, ITerminalQuickFixTerminalCommandDto, TerminalCommandMatchResultDto, ITerminalCommandDto, ITerminalCompletionContextDto, TerminalCompletionListDto } from './extHost.protocol.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IExtHostRpcService } from './extHostRpcService.js';\nimport { IDisposable, DisposableStore, Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { Disposable as VSCodeDisposable, EnvironmentVariableMutatorType, TerminalExitReason, TerminalCompletionItem } from './extHostTypes.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { localize } from '../../../nls.js';\nimport { NotSupportedError } from '../../../base/common/errors.js';\nimport { serializeEnvironmentDescriptionMap, serializeEnvironmentVariableCollection } from '../../../platform/terminal/common/environmentVariableShared.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { generateUuid } from '../../../base/common/uuid.js';\nimport { IEnvironmentVariableCollectionDescription, IEnvironmentVariableMutator, ISerializableEnvironmentVariableCollection } from '../../../platform/terminal/common/environmentVariable.js';\nimport { ICreateContributedTerminalProfileOptions, IProcessReadyEvent, IShellLaunchConfigDto, ITerminalChildProcess, ITerminalLaunchError, ITerminalProfile, TerminalIcon, TerminalLocation, IProcessProperty, ProcessPropertyType, IProcessPropertyMap, TerminalShellType, WindowsShellType } from '../../../platform/terminal/common/terminal.js';\nimport { TerminalDataBufferer } from '../../../platform/terminal/common/terminalDataBuffering.js';\nimport { ThemeColor } from '../../../base/common/themables.js';\nimport { Promises } from '../../../base/common/async.js';\nimport { EditorGroupColumn } from '../../services/editor/common/editorGroupColumn.js';\nimport { TerminalCompletionList, TerminalQuickFix, ViewColumn } from './extHostTypeConverters.js';\nimport { IExtHostCommands } from './extHostCommands.js';\nimport { MarshalledId } from '../../../base/common/marshallingIds.js';\nimport { ISerializedTerminalInstanceContext } from '../../contrib/terminal/common/terminal.js';\nimport { isWindows } from '../../../base/common/platform.js';\nimport { hasKey } from '../../../base/common/types.js';\n\nexport interface IExtHostTerminalService extends ExtHostTerminalServiceShape, IDisposable {\n\n\treadonly _serviceBrand: undefined;\n\n\tactiveTerminal: vscode.Terminal | undefined;\n\tterminals: vscode.Terminal[];\n\n\treadonly onDidCloseTerminal: Event<vscode.Terminal>;\n\treadonly onDidOpenTerminal: Event<vscode.Terminal>;\n\treadonly onDidChangeActiveTerminal: Event<vscode.Terminal | undefined>;\n\treadonly onDidChangeTerminalDimensions: Event<vscode.TerminalDimensionsChangeEvent>;\n\treadonly onDidChangeTerminalState: Event<vscode.Terminal>;\n\treadonly onDidWriteTerminalData: Event<vscode.TerminalDataWriteEvent>;\n\treadonly onDidExecuteTerminalCommand: Event<vscode.TerminalExecutedCommand>;\n\treadonly onDidChangeShell: Event<string>;\n\n\tcreateTerminal(name?: string, shellPath?: string, shellArgs?: readonly string[] | string): vscode.Terminal;\n\tcreateTerminalFromOptions(options: vscode.TerminalOptions, internalOptions?: ITerminalInternalOptions): vscode.Terminal;\n\tcreateExtensionTerminal(options: vscode.ExtensionTerminalOptions): vscode.Terminal;\n\tattachPtyToTerminal(id: number, pty: vscode.Pseudoterminal): void;\n\tgetDefaultShell(useAutomationShell: boolean): string;\n\tgetDefaultShellArgs(useAutomationShell: boolean): string[] | string;\n\tregisterLinkProvider(provider: vscode.TerminalLinkProvider): vscode.Disposable;\n\tregisterProfileProvider(extension: IExtensionDescription, id: string, provider: vscode.TerminalProfileProvider): vscode.Disposable;\n\tregisterTerminalQuickFixProvider(id: string, extensionId: string, provider: vscode.TerminalQuickFixProvider): vscode.Disposable;\n\tgetEnvironmentVariableCollection(extension: IExtensionDescription): IEnvironmentVariableCollection;\n\tgetTerminalById(id: number): ExtHostTerminal | null;\n\tgetTerminalIdByApiObject(apiTerminal: vscode.Terminal): number | null;\n\tregisterTerminalCompletionProvider(extension: IExtensionDescription, provider: vscode.TerminalCompletionProvider<vscode.TerminalCompletionItem>, ...triggerCharacters: string[]): vscode.Disposable;\n}\n\ninterface IEnvironmentVariableCollection extends vscode.EnvironmentVariableCollection {\n\tgetScoped(scope: vscode.EnvironmentVariableScope): vscode.EnvironmentVariableCollection;\n}\n\nexport interface ITerminalInternalOptions {\n\tcwd?: string | URI;\n\tisFeatureTerminal?: boolean;\n\tforceShellIntegration?: boolean;\n\tuseShellEnvironment?: boolean;\n\tresolvedExtHostIdentifier?: ExtHostTerminalIdentifier;\n\t/**\n\t * This location is different from the API location because it can include splitActiveTerminal,\n\t * a property we resolve internally\n\t */\n\tlocation?: TerminalLocation | { viewColumn: number; preserveState?: boolean } | { splitActiveTerminal: boolean };\n}\n\nexport const IExtHostTerminalService = createDecorator<IExtHostTerminalService>('IExtHostTerminalService');\n\nexport class ExtHostTerminal extends Disposable {\n\tprivate _disposed: boolean = false;\n\tprivate _pidPromise: Promise<number | undefined>;\n\tprivate _cols: number | undefined;\n\tprivate _pidPromiseComplete: ((value: number | undefined) => unknown) | undefined;\n\tprivate _rows: number | undefined;\n\tprivate _exitStatus: vscode.TerminalExitStatus | undefined;\n\tprivate _state: vscode.TerminalState = { isInteractedWith: false, shell: undefined };\n\tprivate _selection: string | undefined;\n\n\tshellIntegration: vscode.TerminalShellIntegration | undefined;\n\n\tpublic isOpen: boolean = false;\n\n\treadonly value: vscode.Terminal;\n\n\tprotected readonly _onWillDispose = this._register(new Emitter<void>());\n\treadonly onWillDispose = this._onWillDispose.event;\n\n\tconstructor(\n\t\tprivate _proxy: MainThreadTerminalServiceShape,\n\t\tpublic _id: ExtHostTerminalIdentifier,\n\t\tprivate readonly _creationOptions: vscode.TerminalOptions | vscode.ExtensionTerminalOptions,\n\t\tprivate _name?: string,\n\t) {\n\t\tsuper();\n\n\t\tthis._creationOptions = Object.freeze(this._creationOptions);\n\t\tthis._pidPromise = new Promise<number | undefined>(c => this._pidPromiseComplete = c);\n\n\t\tconst that = this;\n\t\tthis.value = {\n\t\t\tget name(): string {\n\t\t\t\treturn that._name || '';\n\t\t\t},\n\t\t\tget processId(): Promise<number | undefined> {\n\t\t\t\treturn that._pidPromise;\n\t\t\t},\n\t\t\tget creationOptions(): Readonly<vscode.TerminalOptions | vscode.ExtensionTerminalOptions> {\n\t\t\t\treturn that._creationOptions;\n\t\t\t},\n\t\t\tget exitStatus(): vscode.TerminalExitStatus | undefined {\n\t\t\t\treturn that._exitStatus;\n\t\t\t},\n\t\t\tget state(): vscode.TerminalState {\n\t\t\t\treturn that._state;\n\t\t\t},\n\t\t\tget selection(): string | undefined {\n\t\t\t\treturn that._selection;\n\t\t\t},\n\t\t\tget shellIntegration(): vscode.TerminalShellIntegration | undefined {\n\t\t\t\treturn that.shellIntegration;\n\t\t\t},\n\t\t\tsendText(text: string, shouldExecute: boolean = true): void {\n\t\t\t\tthat._checkDisposed();\n\t\t\t\tthat._proxy.$sendText(that._id, text, shouldExecute);\n\t\t\t},\n\t\t\tshow(preserveFocus: boolean): void {\n\t\t\t\tthat._checkDisposed();\n\t\t\t\tthat._proxy.$show(that._id, preserveFocus);\n\t\t\t},\n\t\t\thide(): void {\n\t\t\t\tthat._checkDisposed();\n\t\t\t\tthat._proxy.$hide(that._id);\n\t\t\t},\n\t\t\tdispose(): void {\n\t\t\t\tif (!that._disposed) {\n\t\t\t\t\tthat._disposed = true;\n\t\t\t\t\tthat._proxy.$dispose(that._id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget dimensions(): vscode.TerminalDimensions | undefined {\n\t\t\t\tif (that._cols === undefined || that._rows === undefined) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tcolumns: that._cols,\n\t\t\t\t\trows: that._rows\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\toverride dispose(): void {\n\t\tthis._onWillDispose.fire();\n\t\tsuper.dispose();\n\t}\n\n\tpublic async create(\n\t\toptions: vscode.TerminalOptions,\n\t\tinternalOptions?: ITerminalInternalOptions,\n\t): Promise<void> {\n\t\tif (typeof this._id !== 'string') {\n\t\t\tthrow new Error('Terminal has already been created');\n\t\t}\n\t\tawait this._proxy.$createTerminal(this._id, {\n\t\t\tname: options.name,\n\t\t\tshellPath: options.shellPath ?? undefined,\n\t\t\tshellArgs: options.shellArgs ?? undefined,\n\t\t\tcwd: options.cwd ?? internalOptions?.cwd ?? undefined,\n\t\t\tenv: options.env ?? undefined,\n\t\t\ticon: asTerminalIcon(options.iconPath) ?? undefined,\n\t\t\tcolor: ThemeColor.isThemeColor(options.color) ? options.color.id : undefined,\n\t\t\tinitialText: options.message ?? undefined,\n\t\t\tstrictEnv: options.strictEnv ?? undefined,\n\t\t\thideFromUser: options.hideFromUser ?? undefined,\n\t\t\tforceShellIntegration: internalOptions?.forceShellIntegration ?? undefined,\n\t\t\tisFeatureTerminal: internalOptions?.isFeatureTerminal ?? undefined,\n\t\t\tisExtensionOwnedTerminal: true,\n\t\t\tuseShellEnvironment: internalOptions?.useShellEnvironment ?? undefined,\n\t\t\tlocation: internalOptions?.location || this._serializeParentTerminal(options.location, internalOptions?.resolvedExtHostIdentifier),\n\t\t\tisTransient: options.isTransient ?? undefined,\n\t\t\tshellIntegrationNonce: options.shellIntegrationNonce ?? undefined,\n\t\t});\n\t}\n\n\n\tpublic async createExtensionTerminal(location?: TerminalLocation | vscode.TerminalEditorLocationOptions | vscode.TerminalSplitLocationOptions, internalOptions?: ITerminalInternalOptions, parentTerminal?: ExtHostTerminalIdentifier, iconPath?: TerminalIcon, color?: ThemeColor, shellIntegrationNonce?: string): Promise<number> {\n\t\tif (typeof this._id !== 'string') {\n\t\t\tthrow new Error('Terminal has already been created');\n\t\t}\n\t\tawait this._proxy.$createTerminal(this._id, {\n\t\t\tname: this._name,\n\t\t\tisExtensionCustomPtyTerminal: true,\n\t\t\ticon: iconPath,\n\t\t\tcolor: ThemeColor.isThemeColor(color) ? color.id : undefined,\n\t\t\tlocation: internalOptions?.location || this._serializeParentTerminal(location, parentTerminal),\n\t\t\tisTransient: true,\n\t\t\tshellIntegrationNonce: shellIntegrationNonce ?? undefined,\n\t\t});\n\t\t// At this point, the id has been set via `$acceptTerminalOpened`\n\t\tif (typeof this._id === 'string') {\n\t\t\tthrow new Error('Terminal creation failed');\n\t\t}\n\t\treturn this._id;\n\t}\n\n\tprivate _serializeParentTerminal(location?: TerminalLocation | vscode.TerminalEditorLocationOptions | vscode.TerminalSplitLocationOptions, parentTerminal?: ExtHostTerminalIdentifier): TerminalLocation | { viewColumn: EditorGroupColumn; preserveFocus?: boolean } | { parentTerminal: ExtHostTerminalIdentifier } | undefined {\n\t\tif (typeof location === 'object') {\n\t\t\tif (hasKey(location, { parentTerminal: true }) && location.parentTerminal && parentTerminal) {\n\t\t\t\treturn { parentTerminal };\n\t\t\t}\n\n\t\t\tif (hasKey(location, { viewColumn: true })) {\n\t\t\t\treturn { viewColumn: ViewColumn.from(location.viewColumn), preserveFocus: location.preserveFocus };\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn location;\n\t}\n\n\tprivate _checkDisposed() {\n\t\tif (this._disposed) {\n\t\t\tthrow new Error('Terminal has already been disposed');\n\t\t}\n\t}\n\n\tpublic set name(name: string) {\n\t\tthis._name = name;\n\t}\n\n\tpublic setExitStatus(code: number | undefined, reason: TerminalExitReason) {\n\t\tthis._exitStatus = Object.freeze({ code, reason });\n\t}\n\n\tpublic setDimensions(cols: number, rows: number): boolean {\n\t\tif (cols === this._cols && rows === this._rows) {\n\t\t\t// Nothing changed\n\t\t\treturn false;\n\t\t}\n\t\tif (cols === 0 || rows === 0) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._cols = cols;\n\t\tthis._rows = rows;\n\t\treturn true;\n\t}\n\n\tpublic setInteractedWith(): boolean {\n\t\tif (!this._state.isInteractedWith) {\n\t\t\tthis._state = {\n\t\t\t\t...this._state,\n\t\t\t\tisInteractedWith: true\n\t\t\t};\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setShellType(shellType: TerminalShellType | undefined): boolean {\n\n\t\tif (this._state.shell !== shellType) {\n\t\t\tthis._state = {\n\t\t\t\t...this._state,\n\t\t\t\tshell: shellType\n\t\t\t};\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setSelection(selection: string | undefined): void {\n\t\tthis._selection = selection;\n\t}\n\n\tpublic _setProcessId(processId: number | undefined): void {\n\t\t// The event may fire 2 times when the panel is restored\n\t\tif (this._pidPromiseComplete) {\n\t\t\tthis._pidPromiseComplete(processId);\n\t\t\tthis._pidPromiseComplete = undefined;\n\t\t} else {\n\t\t\t// Recreate the promise if this is the nth processId set (e.g. reused task terminals)\n\t\t\tthis._pidPromise.then(pid => {\n\t\t\t\tif (pid !== processId) {\n\t\t\t\t\tthis._pidPromise = Promise.resolve(processId);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass ExtHostPseudoterminal implements ITerminalChildProcess {\n\treadonly id = 0;\n\treadonly shouldPersist = false;\n\n\tprivate readonly _onProcessData = new Emitter<string>();\n\tpublic readonly onProcessData: Event<string> = this._onProcessData.event;\n\tprivate readonly _onProcessReady = new Emitter<IProcessReadyEvent>();\n\tpublic get onProcessReady(): Event<IProcessReadyEvent> { return this._onProcessReady.event; }\n\tprivate readonly _onDidChangeProperty = new Emitter<IProcessProperty>();\n\tpublic readonly onDidChangeProperty = this._onDidChangeProperty.event;\n\tprivate readonly _onProcessExit = new Emitter<number | undefined>();\n\tpublic readonly onProcessExit: Event<number | undefined> = this._onProcessExit.event;\n\n\tconstructor(private readonly _pty: vscode.Pseudoterminal) { }\n\n\trefreshProperty<T extends ProcessPropertyType>(property: ProcessPropertyType): Promise<IProcessPropertyMap[T]> {\n\t\tthrow new Error(`refreshProperty is not suppported in extension owned terminals. property: ${property}`);\n\t}\n\n\tupdateProperty<T extends ProcessPropertyType>(property: ProcessPropertyType, value: IProcessPropertyMap[T]): Promise<void> {\n\t\tthrow new Error(`updateProperty is not suppported in extension owned terminals. property: ${property}, value: ${value}`);\n\t}\n\n\tasync start(): Promise<undefined> {\n\t\treturn undefined;\n\t}\n\n\tshutdown(): void {\n\t\tthis._pty.close();\n\t}\n\n\tinput(data: string): void {\n\t\tthis._pty.handleInput?.(data);\n\t}\n\n\tsendSignal(signal: string): void {\n\t\t// Extension owned terminals don't support sending signals directly to processes\n\t\t// This could be extended in the future if the pseudoterminal API is enhanced\n\t}\n\n\tresize(cols: number, rows: number): void {\n\t\tthis._pty.setDimensions?.({ columns: cols, rows });\n\t}\n\n\tclearBuffer(): void {\n\t\t// no-op\n\t}\n\n\tasync processBinary(data: string): Promise<void> {\n\t\t// No-op, processBinary is not supported in extension owned terminals.\n\t}\n\n\tacknowledgeDataEvent(charCount: number): void {\n\t\t// No-op, flow control is not supported in extension owned terminals. If this is ever\n\t\t// implemented it will need new pause and resume VS Code APIs.\n\t}\n\n\tasync setUnicodeVersion(version: '6' | '11'): Promise<void> {\n\t\t// No-op, xterm-headless isn't used for extension owned terminals.\n\t}\n\n\tgetInitialCwd(): Promise<string> {\n\t\treturn Promise.resolve('');\n\t}\n\n\tgetCwd(): Promise<string> {\n\t\treturn Promise.resolve('');\n\t}\n\n\tstartSendingEvents(initialDimensions: ITerminalDimensionsDto | undefined): void {\n\t\t// Attach the listeners\n\t\tthis._pty.onDidWrite(e => this._onProcessData.fire(e));\n\t\tthis._pty.onDidClose?.((e: number | void = undefined) => {\n\t\t\tthis._onProcessExit.fire(e === void 0 ? undefined : e);\n\t\t});\n\t\tthis._pty.onDidOverrideDimensions?.(e => {\n\t\t\tif (e) {\n\t\t\t\tthis._onDidChangeProperty.fire({ type: ProcessPropertyType.OverrideDimensions, value: { cols: e.columns, rows: e.rows } });\n\t\t\t}\n\t\t});\n\t\tthis._pty.onDidChangeName?.(title => {\n\t\t\tthis._onDidChangeProperty.fire({ type: ProcessPropertyType.Title, value: title });\n\t\t});\n\n\t\tthis._pty.open(initialDimensions ? initialDimensions : undefined);\n\n\t\tif (initialDimensions) {\n\t\t\tthis._pty.setDimensions?.(initialDimensions);\n\t\t}\n\n\t\tthis._onProcessReady.fire({ pid: -1, cwd: '', windowsPty: undefined });\n\t}\n}\n\nlet nextLinkId = 1;\n\ninterface ICachedLinkEntry {\n\tprovider: vscode.TerminalLinkProvider;\n\tlink: vscode.TerminalLink;\n}\n\nexport abstract class BaseExtHostTerminalService extends Disposable implements IExtHostTerminalService, ExtHostTerminalServiceShape {\n\n\treadonly _serviceBrand: undefined;\n\n\tprotected _proxy: MainThreadTerminalServiceShape;\n\tprotected _activeTerminal: ExtHostTerminal | undefined;\n\tprotected _terminals: ExtHostTerminal[] = [];\n\tprotected _terminalProcesses: Map<number, ITerminalChildProcess> = new Map();\n\tprotected _terminalProcessDisposables: { [id: number]: IDisposable } = {};\n\tprotected _extensionTerminalAwaitingStart: { [id: number]: { initialDimensions: ITerminalDimensionsDto | undefined } | undefined } = {};\n\tprotected _getTerminalPromises: { [id: number]: Promise<ExtHostTerminal | undefined> } = {};\n\tprotected _environmentVariableCollections: Map<string, UnifiedEnvironmentVariableCollection> = new Map();\n\tprivate _defaultProfile: ITerminalProfile | undefined;\n\tprivate _defaultAutomationProfile: ITerminalProfile | undefined;\n\tprivate readonly _lastQuickFixCommands: MutableDisposable<IDisposable> = this._register(new MutableDisposable());\n\n\tprivate readonly _bufferer: TerminalDataBufferer;\n\tprivate readonly _linkProviders: Set<vscode.TerminalLinkProvider> = new Set();\n\tprivate readonly _completionProviders: Map<string, vscode.TerminalCompletionProvider<vscode.TerminalCompletionItem>> = new Map();\n\tprivate readonly _profileProviders: Map<string, vscode.TerminalProfileProvider> = new Map();\n\tprivate readonly _quickFixProviders: Map<string, vscode.TerminalQuickFixProvider> = new Map();\n\tprivate readonly _terminalLinkCache: Map<number, Map<number, ICachedLinkEntry>> = new Map();\n\tprivate readonly _terminalLinkCancellationSource: Map<number, CancellationTokenSource> = new Map();\n\n\tpublic get activeTerminal(): vscode.Terminal | undefined { return this._activeTerminal?.value; }\n\tpublic get terminals(): vscode.Terminal[] { return this._terminals.map(term => term.value); }\n\n\tprotected readonly _onDidCloseTerminal = new Emitter<vscode.Terminal>();\n\treadonly onDidCloseTerminal = this._onDidCloseTerminal.event;\n\tprotected readonly _onDidOpenTerminal = new Emitter<vscode.Terminal>();\n\treadonly onDidOpenTerminal = this._onDidOpenTerminal.event;\n\tprotected readonly _onDidChangeActiveTerminal = new Emitter<vscode.Terminal | undefined>();\n\treadonly onDidChangeActiveTerminal = this._onDidChangeActiveTerminal.event;\n\tprotected readonly _onDidChangeTerminalDimensions = new Emitter<vscode.TerminalDimensionsChangeEvent>();\n\treadonly onDidChangeTerminalDimensions = this._onDidChangeTerminalDimensions.event;\n\tprotected readonly _onDidChangeTerminalState = new Emitter<vscode.Terminal>();\n\treadonly onDidChangeTerminalState = this._onDidChangeTerminalState.event;\n\tprotected readonly _onDidChangeShell = new Emitter<string>();\n\treadonly onDidChangeShell = this._onDidChangeShell.event;\n\n\tprotected readonly _onDidWriteTerminalData = new Emitter<vscode.TerminalDataWriteEvent>({\n\t\tonWillAddFirstListener: () => this._proxy.$startSendingDataEvents(),\n\t\tonDidRemoveLastListener: () => this._proxy.$stopSendingDataEvents()\n\t});\n\treadonly onDidWriteTerminalData = this._onDidWriteTerminalData.event;\n\tprotected readonly _onDidExecuteCommand = new Emitter<vscode.TerminalExecutedCommand>({\n\t\tonWillAddFirstListener: () => this._proxy.$startSendingCommandEvents(),\n\t\tonDidRemoveLastListener: () => this._proxy.$stopSendingCommandEvents()\n\t});\n\treadonly onDidExecuteTerminalCommand = this._onDidExecuteCommand.event;\n\n\tconstructor(\n\t\tsupportsProcesses: boolean,\n\t\t@IExtHostCommands private readonly _extHostCommands: IExtHostCommands,\n\t\t@IExtHostRpcService extHostRpc: IExtHostRpcService\n\t) {\n\t\tsuper();\n\t\tthis._proxy = extHostRpc.getProxy(MainContext.MainThreadTerminalService);\n\t\tthis._bufferer = new TerminalDataBufferer(this._proxy.$sendProcessData);\n\t\tthis._proxy.$registerProcessSupport(supportsProcesses);\n\t\tthis._extHostCommands.registerArgumentProcessor({\n\t\t\tprocessArgument: arg => {\n\t\t\t\tconst deserialize = (arg: ISerializedTerminalInstanceContext) => {\n\t\t\t\t\treturn this.getTerminalById(arg.instanceId)?.value;\n\t\t\t\t};\n\t\t\t\tswitch (arg?.$mid) {\n\t\t\t\t\tcase MarshalledId.TerminalContext: return deserialize(arg);\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\t// Do array transformation in place as this is a hot path\n\t\t\t\t\t\tif (Array.isArray(arg)) {\n\t\t\t\t\t\t\tfor (let i = 0; i < arg.length; i++) {\n\t\t\t\t\t\t\t\tif (arg[i].$mid === MarshalledId.TerminalContext) {\n\t\t\t\t\t\t\t\t\targ[i] = deserialize(arg[i]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Probably something else, so exit early\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn arg;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._register({\n\t\t\tdispose: () => {\n\t\t\t\tfor (const [_, terminalProcess] of this._terminalProcesses) {\n\t\t\t\t\tterminalProcess.shutdown(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic abstract createTerminal(name?: string, shellPath?: string, shellArgs?: string[] | string): vscode.Terminal;\n\tpublic abstract createTerminalFromOptions(options: vscode.TerminalOptions, internalOptions?: ITerminalInternalOptions): vscode.Terminal;\n\n\tpublic getDefaultShell(useAutomationShell: boolean): string {\n\t\tconst profile = useAutomationShell ? this._defaultAutomationProfile : this._defaultProfile;\n\t\treturn profile?.path || '';\n\t}\n\n\tpublic getDefaultShellArgs(useAutomationShell: boolean): string[] | string {\n\t\tconst profile = useAutomationShell ? this._defaultAutomationProfile : this._defaultProfile;\n\t\treturn profile?.args || [];\n\t}\n\n\tpublic createExtensionTerminal(options: vscode.ExtensionTerminalOptions, internalOptions?: ITerminalInternalOptions): vscode.Terminal {\n\t\tconst terminal = new ExtHostTerminal(this._proxy, generateUuid(), options, options.name);\n\t\tconst p = new ExtHostPseudoterminal(options.pty);\n\t\tterminal.createExtensionTerminal(options.location, internalOptions, this._serializeParentTerminal(options, internalOptions).resolvedExtHostIdentifier, asTerminalIcon(options.iconPath), asTerminalColor(options.color), options.shellIntegrationNonce).then(id => {\n\t\t\tconst disposable = this._setupExtHostProcessListeners(id, p);\n\t\t\tthis._terminalProcessDisposables[id] = disposable;\n\t\t});\n\t\tthis._terminals.push(terminal);\n\t\treturn terminal.value;\n\t}\n\n\tprotected _serializeParentTerminal(options: vscode.TerminalOptions, internalOptions?: ITerminalInternalOptions): ITerminalInternalOptions {\n\t\tinternalOptions = internalOptions ? internalOptions : {};\n\t\tif (options.location && typeof options.location === 'object' && hasKey(options.location, { parentTerminal: true })) {\n\t\t\tconst parentTerminal = options.location.parentTerminal;\n\t\t\tif (parentTerminal) {\n\t\t\t\tconst parentExtHostTerminal = this._terminals.find(t => t.value === parentTerminal);\n\t\t\t\tif (parentExtHostTerminal) {\n\t\t\t\t\tinternalOptions.resolvedExtHostIdentifier = parentExtHostTerminal._id;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (options.location && typeof options.location !== 'object') {\n\t\t\tinternalOptions.location = options.location;\n\t\t} else if (internalOptions.location && typeof internalOptions.location === 'object' && hasKey(internalOptions.location, { splitActiveTerminal: true })) {\n\t\t\tinternalOptions.location = { splitActiveTerminal: true };\n\t\t}\n\t\treturn internalOptions;\n\t}\n\n\tpublic attachPtyToTerminal(id: number, pty: vscode.Pseudoterminal): void {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (!terminal) {\n\t\t\tthrow new Error(`Cannot resolve terminal with id ${id} for virtual process`);\n\t\t}\n\t\tconst p = new ExtHostPseudoterminal(pty);\n\t\tconst disposable = this._setupExtHostProcessListeners(id, p);\n\t\tthis._terminalProcessDisposables[id] = disposable;\n\t}\n\n\tpublic async $acceptActiveTerminalChanged(id: number | null): Promise<void> {\n\t\tconst original = this._activeTerminal;\n\t\tif (id === null) {\n\t\t\tthis._activeTerminal = undefined;\n\t\t\tif (original !== this._activeTerminal) {\n\t\t\t\tthis._onDidChangeActiveTerminal.fire(this._activeTerminal);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal) {\n\t\t\tthis._activeTerminal = terminal;\n\t\t\tif (original !== this._activeTerminal) {\n\t\t\t\tthis._onDidChangeActiveTerminal.fire(this._activeTerminal.value);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async $acceptTerminalProcessData(id: number, data: string): Promise<void> {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal) {\n\t\t\tthis._onDidWriteTerminalData.fire({ terminal: terminal.value, data });\n\t\t}\n\t}\n\n\tpublic async $acceptTerminalDimensions(id: number, cols: number, rows: number): Promise<void> {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal) {\n\t\t\tif (terminal.setDimensions(cols, rows)) {\n\t\t\t\tthis._onDidChangeTerminalDimensions.fire({\n\t\t\t\t\tterminal: terminal.value,\n\t\t\t\t\tdimensions: terminal.value.dimensions as vscode.TerminalDimensions\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async $acceptDidExecuteCommand(id: number, command: ITerminalCommandDto): Promise<void> {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal) {\n\t\t\tthis._onDidExecuteCommand.fire({ terminal: terminal.value, ...command });\n\t\t}\n\t}\n\n\tpublic async $acceptTerminalMaximumDimensions(id: number, cols: number, rows: number): Promise<void> {\n\t\t// Extension pty terminal only - when virtual process resize fires it means that the\n\t\t// terminal's maximum dimensions changed\n\t\tthis._terminalProcesses.get(id)?.resize(cols, rows);\n\t}\n\n\tpublic async $acceptTerminalTitleChange(id: number, name: string): Promise<void> {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal) {\n\t\t\tterminal.name = name;\n\t\t}\n\t}\n\n\tpublic async $acceptTerminalClosed(id: number, exitCode: number | undefined, exitReason: TerminalExitReason): Promise<void> {\n\t\tconst index = this._getTerminalObjectIndexById(this._terminals, id);\n\t\tif (index !== null) {\n\t\t\tconst terminal = this._terminals.splice(index, 1)[0];\n\t\t\tterminal.setExitStatus(exitCode, exitReason);\n\t\t\tthis._onDidCloseTerminal.fire(terminal.value);\n\t\t}\n\t}\n\n\tpublic $acceptTerminalOpened(id: number, extHostTerminalId: string | undefined, name: string, shellLaunchConfigDto: IShellLaunchConfigDto): void {\n\t\tif (extHostTerminalId) {\n\t\t\t// Resolve with the renderer generated id\n\t\t\tconst index = this._getTerminalObjectIndexById(this._terminals, extHostTerminalId);\n\t\t\tif (index !== null) {\n\t\t\t\t// The terminal has already been created (via createTerminal*), only fire the event\n\t\t\t\tthis._terminals[index]._id = id;\n\t\t\t\tthis._onDidOpenTerminal.fire(this.terminals[index]);\n\t\t\t\tthis._terminals[index].isOpen = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst creationOptions: vscode.TerminalOptions = {\n\t\t\tname: shellLaunchConfigDto.name,\n\t\t\tshellPath: shellLaunchConfigDto.executable,\n\t\t\tshellArgs: shellLaunchConfigDto.args,\n\t\t\tcwd: typeof shellLaunchConfigDto.cwd === 'string' ? shellLaunchConfigDto.cwd : URI.revive(shellLaunchConfigDto.cwd),\n\t\t\tenv: shellLaunchConfigDto.env,\n\t\t\thideFromUser: shellLaunchConfigDto.hideFromUser\n\t\t};\n\t\tconst terminal = new ExtHostTerminal(this._proxy, id, creationOptions, name);\n\t\tthis._terminals.push(terminal);\n\t\tthis._onDidOpenTerminal.fire(terminal.value);\n\t\tterminal.isOpen = true;\n\t}\n\n\tpublic async $acceptTerminalProcessId(id: number, processId: number): Promise<void> {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tterminal?._setProcessId(processId);\n\t}\n\n\tpublic async $startExtensionTerminal(id: number, initialDimensions: ITerminalDimensionsDto | undefined): Promise<ITerminalLaunchError | undefined> {\n\t\t// Make sure the ExtHostTerminal exists so onDidOpenTerminal has fired before we call\n\t\t// Pseudoterminal.start\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (!terminal) {\n\t\t\treturn { message: localize('launchFail.idMissingOnExtHost', \"Could not find the terminal with id {0} on the extension host\", id) };\n\t\t}\n\n\t\t// Wait for onDidOpenTerminal to fire\n\t\tif (!terminal.isOpen) {\n\t\t\tawait new Promise<void>(r => {\n\t\t\t\t// Ensure open is called after onDidOpenTerminal\n\t\t\t\tconst listener = this.onDidOpenTerminal(async e => {\n\t\t\t\t\tif (e === terminal.value) {\n\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\tr();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tconst terminalProcess = this._terminalProcesses.get(id);\n\t\tif (terminalProcess) {\n\t\t\t(terminalProcess as ExtHostPseudoterminal).startSendingEvents(initialDimensions);\n\t\t} else {\n\t\t\t// Defer startSendingEvents call to when _setupExtHostProcessListeners is called\n\t\t\tthis._extensionTerminalAwaitingStart[id] = { initialDimensions };\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprotected _setupExtHostProcessListeners(id: number, p: ITerminalChildProcess): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\t\tdisposables.add(p.onProcessReady(e => this._proxy.$sendProcessReady(id, e.pid, e.cwd, e.windowsPty)));\n\t\tdisposables.add(p.onDidChangeProperty(property => this._proxy.$sendProcessProperty(id, property)));\n\n\t\t// Buffer data events to reduce the amount of messages going to the renderer\n\t\tthis._bufferer.startBuffering(id, p.onProcessData);\n\t\tdisposables.add(p.onProcessExit(exitCode => this._onProcessExit(id, exitCode)));\n\t\tthis._terminalProcesses.set(id, p);\n\n\t\tconst awaitingStart = this._extensionTerminalAwaitingStart[id];\n\t\tif (awaitingStart && p instanceof ExtHostPseudoterminal) {\n\t\t\tp.startSendingEvents(awaitingStart.initialDimensions);\n\t\t\tdelete this._extensionTerminalAwaitingStart[id];\n\t\t}\n\n\t\treturn disposables;\n\t}\n\n\tpublic $acceptProcessAckDataEvent(id: number, charCount: number): void {\n\t\tthis._terminalProcesses.get(id)?.acknowledgeDataEvent(charCount);\n\t}\n\n\tpublic $acceptProcessInput(id: number, data: string): void {\n\t\tthis._terminalProcesses.get(id)?.input(data);\n\t}\n\n\tpublic $acceptTerminalInteraction(id: number): void {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal?.setInteractedWith()) {\n\t\t\tthis._onDidChangeTerminalState.fire(terminal.value);\n\t\t}\n\t}\n\n\tpublic $acceptTerminalSelection(id: number, selection: string | undefined): void {\n\t\tthis.getTerminalById(id)?.setSelection(selection);\n\t}\n\n\tpublic $acceptProcessResize(id: number, cols: number, rows: number): void {\n\t\ttry {\n\t\t\tthis._terminalProcesses.get(id)?.resize(cols, rows);\n\t\t} catch (error) {\n\t\t\t// We tried to write to a closed pipe / channel.\n\t\t\tif (error.code !== 'EPIPE' && error.code !== 'ERR_IPC_CHANNEL_CLOSED') {\n\t\t\t\tthrow (error);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic $acceptProcessShutdown(id: number, immediate: boolean): void {\n\t\tthis._terminalProcesses.get(id)?.shutdown(immediate);\n\t}\n\n\tpublic $acceptProcessRequestInitialCwd(id: number): void {\n\t\tthis._terminalProcesses.get(id)?.getInitialCwd().then(initialCwd => this._proxy.$sendProcessProperty(id, { type: ProcessPropertyType.InitialCwd, value: initialCwd }));\n\t}\n\n\tpublic $acceptProcessRequestCwd(id: number): void {\n\t\tthis._terminalProcesses.get(id)?.getCwd().then(cwd => this._proxy.$sendProcessProperty(id, { type: ProcessPropertyType.Cwd, value: cwd }));\n\t}\n\n\tpublic $acceptProcessRequestLatency(id: number): Promise<number> {\n\t\treturn Promise.resolve(id);\n\t}\n\n\n\tpublic registerProfileProvider(extension: IExtensionDescription, id: string, provider: vscode.TerminalProfileProvider): vscode.Disposable {\n\t\tif (this._profileProviders.has(id)) {\n\t\t\tthrow new Error(`Terminal profile provider \"${id}\" already registered`);\n\t\t}\n\t\tthis._profileProviders.set(id, provider);\n\t\tthis._proxy.$registerProfileProvider(id, extension.identifier.value);\n\t\treturn new VSCodeDisposable(() => {\n\t\t\tthis._profileProviders.delete(id);\n\t\t\tthis._proxy.$unregisterProfileProvider(id);\n\t\t});\n\t}\n\n\tpublic registerTerminalCompletionProvider(extension: IExtensionDescription, provider: vscode.TerminalCompletionProvider<TerminalCompletionItem>, ...triggerCharacters: string[]): vscode.Disposable {\n\t\tif (this._completionProviders.has(extension.identifier.value)) {\n\t\t\tthrow new Error(`Terminal completion provider \"${extension.identifier.value}\" already registered`);\n\t\t}\n\t\tthis._completionProviders.set(extension.identifier.value, provider);\n\t\tthis._proxy.$registerCompletionProvider(extension.identifier.value, extension.identifier.value, ...triggerCharacters);\n\t\treturn new VSCodeDisposable(() => {\n\t\t\tthis._completionProviders.delete(extension.identifier.value);\n\t\t\tthis._proxy.$unregisterCompletionProvider(extension.identifier.value);\n\t\t});\n\t}\n\n\tpublic async $provideTerminalCompletions(id: string, options: ITerminalCompletionContextDto): Promise<TerminalCompletionListDto | undefined> {\n\t\tconst token = new CancellationTokenSource().token;\n\t\tif (token.isCancellationRequested || !this.activeTerminal) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst provider = this._completionProviders.get(id);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst completions = await provider.provideTerminalCompletions(this.activeTerminal, options, token);\n\t\tif (completions === null || completions === undefined) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst pathSeparator = !isWindows || this.activeTerminal.state?.shell === WindowsShellType.GitBash ? '/' : '\\\\';\n\t\treturn TerminalCompletionList.from(completions, pathSeparator);\n\t}\n\n\tpublic $acceptTerminalShellType(id: number, shellType: TerminalShellType | undefined): void {\n\t\tconst terminal = this.getTerminalById(id);\n\t\tif (terminal?.setShellType(shellType)) {\n\t\t\tthis._onDidChangeTerminalState.fire(terminal.value);\n\t\t}\n\t}\n\n\tpublic registerTerminalQuickFixProvider(id: string, extensionId: string, provider: vscode.TerminalQuickFixProvider): vscode.Disposable {\n\t\tif (this._quickFixProviders.has(id)) {\n\t\t\tthrow new Error(`Terminal quick fix provider \"${id}\" is already registered`);\n\t\t}\n\t\tthis._quickFixProviders.set(id, provider);\n\t\tthis._proxy.$registerQuickFixProvider(id, extensionId);\n\t\treturn new VSCodeDisposable(() => {\n\t\t\tthis._quickFixProviders.delete(id);\n\t\t\tthis._proxy.$unregisterQuickFixProvider(id);\n\t\t});\n\t}\n\n\tpublic async $provideTerminalQuickFixes(id: string, matchResult: TerminalCommandMatchResultDto): Promise<(ITerminalQuickFixTerminalCommandDto | ITerminalQuickFixOpenerDto | ICommandDto)[] | ITerminalQuickFixTerminalCommandDto | ITerminalQuickFixOpenerDto | ICommandDto | undefined> {\n\t\tconst token = new CancellationTokenSource().token;\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tconst provider = this._quickFixProviders.get(id);\n\t\tif (!provider) {\n\t\t\treturn;\n\t\t}\n\t\tconst quickFixes = await provider.provideTerminalQuickFixes(matchResult, token);\n\t\tif (quickFixes === null || (Array.isArray(quickFixes) && quickFixes.length === 0)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst store = new DisposableStore();\n\t\tthis._lastQuickFixCommands.value = store;\n\n\t\t// Single\n\t\tif (!Array.isArray(quickFixes)) {\n\t\t\treturn quickFixes ? TerminalQuickFix.from(quickFixes, this._extHostCommands.converter, store) : undefined;\n\t\t}\n\n\t\t// Many\n\t\tconst result = [];\n\t\tfor (const fix of quickFixes) {\n\t\t\tconst converted = TerminalQuickFix.from(fix, this._extHostCommands.converter, store);\n\t\t\tif (converted) {\n\t\t\t\tresult.push(converted);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic async $createContributedProfileTerminal(id: string, options: ICreateContributedTerminalProfileOptions): Promise<void> {\n\t\tconst token = new CancellationTokenSource().token;\n\t\tlet profile = await this._profileProviders.get(id)?.provideTerminalProfile(token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tif (profile && !hasKey(profile, { options: true })) {\n\t\t\tprofile = { options: profile };\n\t\t}\n\n\t\tif (!profile || !hasKey(profile, { options: true })) {\n\t\t\tthrow new Error(`No terminal profile options provided for id \"${id}\"`);\n\t\t}\n\n\t\tif (hasKey(profile.options, { pty: true })) {\n\t\t\tthis.createExtensionTerminal(profile.options, options);\n\t\t\treturn;\n\t\t}\n\t\tthis.createTerminalFromOptions(profile.options, options);\n\t}\n\n\tpublic registerLinkProvider(provider: vscode.TerminalLinkProvider): vscode.Disposable {\n\t\tthis._linkProviders.add(provider);\n\t\tif (this._linkProviders.size === 1) {\n\t\t\tthis._proxy.$startLinkProvider();\n\t\t}\n\t\treturn new VSCodeDisposable(() => {\n\t\t\tthis._linkProviders.delete(provider);\n\t\t\tif (this._linkProviders.size === 0) {\n\t\t\t\tthis._proxy.$stopLinkProvider();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic async $provideLinks(terminalId: number, line: string): Promise<ITerminalLinkDto[]> {\n\t\tconst terminal = this.getTerminalById(terminalId);\n\t\tif (!terminal) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// Discard any cached links the terminal has been holding, currently all links are released\n\t\t// when new links are provided.\n\t\tthis._terminalLinkCache.delete(terminalId);\n\n\t\tconst oldToken = this._terminalLinkCancellationSource.get(terminalId);\n\t\toldToken?.dispose(true);\n\t\tconst cancellationSource = new CancellationTokenSource();\n\t\tthis._terminalLinkCancellationSource.set(terminalId, cancellationSource);\n\n\t\tconst result: ITerminalLinkDto[] = [];\n\t\tconst context: vscode.TerminalLinkContext = { terminal: terminal.value, line };\n\t\tconst promises: vscode.ProviderResult<{ provider: vscode.TerminalLinkProvider; links: vscode.TerminalLink[] }>[] = [];\n\n\t\tfor (const provider of this._linkProviders) {\n\t\t\tpromises.push(Promises.withAsyncBody(async r => {\n\t\t\t\tcancellationSource.token.onCancellationRequested(() => r({ provider, links: [] }));\n\t\t\t\tconst links = (await provider.provideTerminalLinks(context, cancellationSource.token)) || [];\n\t\t\t\tif (!cancellationSource.token.isCancellationRequested) {\n\t\t\t\t\tr({ provider, links });\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tconst provideResults = await Promise.all(promises);\n\n\t\tif (cancellationSource.token.isCancellationRequested) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst cacheLinkMap = new Map<number, ICachedLinkEntry>();\n\t\tfor (const provideResult of provideResults) {\n\t\t\tif (provideResult && provideResult.links.length > 0) {\n\t\t\t\tresult.push(...provideResult.links.map(providerLink => {\n\t\t\t\t\tconst link = {\n\t\t\t\t\t\tid: nextLinkId++,\n\t\t\t\t\t\tstartIndex: providerLink.startIndex,\n\t\t\t\t\t\tlength: providerLink.length,\n\t\t\t\t\t\tlabel: providerLink.tooltip\n\t\t\t\t\t};\n\t\t\t\t\tcacheLinkMap.set(link.id, {\n\t\t\t\t\t\tprovider: provideResult.provider,\n\t\t\t\t\t\tlink: providerLink\n\t\t\t\t\t});\n\t\t\t\t\treturn link;\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\tthis._terminalLinkCache.set(terminalId, cacheLinkMap);\n\n\t\treturn result;\n\t}\n\n\t$activateLink(terminalId: number, linkId: number): void {\n\t\tconst cachedLink = this._terminalLinkCache.get(terminalId)?.get(linkId);\n\t\tif (!cachedLink) {\n\t\t\treturn;\n\t\t}\n\t\tcachedLink.provider.handleTerminalLink(cachedLink.link);\n\t}\n\n\tprivate _onProcessExit(id: number, exitCode: number | undefined): void {\n\t\tthis._bufferer.stopBuffering(id);\n\n\t\t// Remove process reference\n\t\tthis._terminalProcesses.delete(id);\n\t\tdelete this._extensionTerminalAwaitingStart[id];\n\n\t\t// Clean up process disposables\n\t\tconst processDiposable = this._terminalProcessDisposables[id];\n\t\tif (processDiposable) {\n\t\t\tprocessDiposable.dispose();\n\t\t\tdelete this._terminalProcessDisposables[id];\n\t\t}\n\t\t// Send exit event to main side\n\t\tthis._proxy.$sendProcessExit(id, exitCode);\n\t}\n\n\tpublic getTerminalById(id: number): ExtHostTerminal | null {\n\t\treturn this._getTerminalObjectById(this._terminals, id);\n\t}\n\n\tpublic getTerminalIdByApiObject(terminal: vscode.Terminal): number | null {\n\t\tconst index = this._terminals.findIndex(item => {\n\t\t\treturn item.value === terminal;\n\t\t});\n\t\treturn index >= 0 ? index : null;\n\t}\n\n\tprivate _getTerminalObjectById<T extends ExtHostTerminal>(array: T[], id: number): T | null {\n\t\tconst index = this._getTerminalObjectIndexById(array, id);\n\t\treturn index !== null ? array[index] : null;\n\t}\n\n\tprivate _getTerminalObjectIndexById<T extends ExtHostTerminal>(array: T[], id: ExtHostTerminalIdentifier): number | null {\n\t\tconst index = array.findIndex(item => {\n\t\t\treturn item._id === id;\n\t\t});\n\t\treturn index >= 0 ? index : null;\n\t}\n\n\tpublic getEnvironmentVariableCollection(extension: IExtensionDescription): IEnvironmentVariableCollection {\n\t\tlet collection = this._environmentVariableCollections.get(extension.identifier.value);\n\t\tif (!collection) {\n\t\t\tcollection = this._register(new UnifiedEnvironmentVariableCollection());\n\t\t\tthis._setEnvironmentVariableCollection(extension.identifier.value, collection);\n\t\t}\n\t\treturn collection.getScopedEnvironmentVariableCollection(undefined);\n\t}\n\n\tprivate _syncEnvironmentVariableCollection(extensionIdentifier: string, collection: UnifiedEnvironmentVariableCollection): void {\n\t\tconst serialized = serializeEnvironmentVariableCollection(collection.map);\n\t\tconst serializedDescription = serializeEnvironmentDescriptionMap(collection.descriptionMap);\n\t\tthis._proxy.$setEnvironmentVariableCollection(extensionIdentifier, collection.persistent, serialized.length === 0 ? undefined : serialized, serializedDescription);\n\t}\n\n\tpublic $initEnvironmentVariableCollections(collections: [string, ISerializableEnvironmentVariableCollection][]): void {\n\t\tcollections.forEach(entry => {\n\t\t\tconst extensionIdentifier = entry[0];\n\t\t\tconst collection = this._register(new UnifiedEnvironmentVariableCollection(entry[1]));\n\t\t\tthis._setEnvironmentVariableCollection(extensionIdentifier, collection);\n\t\t});\n\t}\n\n\tpublic $acceptDefaultProfile(profile: ITerminalProfile, automationProfile: ITerminalProfile): void {\n\t\tconst oldProfile = this._defaultProfile;\n\t\tthis._defaultProfile = profile;\n\t\tthis._defaultAutomationProfile = automationProfile;\n\t\tif (oldProfile?.path !== profile.path) {\n\t\t\tthis._onDidChangeShell.fire(profile.path);\n\t\t}\n\t}\n\n\tprivate _setEnvironmentVariableCollection(extensionIdentifier: string, collection: UnifiedEnvironmentVariableCollection): void {\n\t\tthis._environmentVariableCollections.set(extensionIdentifier, collection);\n\t\tthis._register(collection.onDidChangeCollection(() => {\n\t\t\t// When any collection value changes send this immediately, this is done to ensure\n\t\t\t// following calls to createTerminal will be created with the new environment. It will\n\t\t\t// result in more noise by sending multiple updates when called but collections are\n\t\t\t// expected to be small.\n\t\t\tthis._syncEnvironmentVariableCollection(extensionIdentifier, collection);\n\t\t}));\n\t}\n}\n\n/**\n * Unified environment variable collection carrying information for all scopes, for a specific extension.\n */\nclass UnifiedEnvironmentVariableCollection extends Disposable {\n\treadonly map: Map<string, IEnvironmentVariableMutator> = new Map();\n\tprivate readonly scopedCollections: Map<string, ScopedEnvironmentVariableCollection> = new Map();\n\treadonly descriptionMap: Map<string, IEnvironmentVariableCollectionDescription> = new Map();\n\tprivate _persistent: boolean = true;\n\n\tpublic get persistent(): boolean { return this._persistent; }\n\tpublic set persistent(value: boolean) {\n\t\tthis._persistent = value;\n\t\tthis._onDidChangeCollection.fire();\n\t}\n\n\tprotected readonly _onDidChangeCollection: Emitter<void> = new Emitter<void>();\n\tget onDidChangeCollection(): Event<void> { return this._onDidChangeCollection && this._onDidChangeCollection.event; }\n\n\tconstructor(\n\t\tserialized?: ISerializableEnvironmentVariableCollection\n\t) {\n\t\tsuper();\n\t\tthis.map = new Map(serialized);\n\t}\n\n\tgetScopedEnvironmentVariableCollection(scope: vscode.EnvironmentVariableScope | undefined): IEnvironmentVariableCollection {\n\t\tconst scopedCollectionKey = this.getScopeKey(scope);\n\t\tlet scopedCollection = this.scopedCollections.get(scopedCollectionKey);\n\t\tif (!scopedCollection) {\n\t\t\tscopedCollection = new ScopedEnvironmentVariableCollection(this, scope);\n\t\t\tthis.scopedCollections.set(scopedCollectionKey, scopedCollection);\n\t\t\tthis._register(scopedCollection.onDidChangeCollection(() => this._onDidChangeCollection.fire()));\n\t\t}\n\t\treturn scopedCollection;\n\t}\n\n\treplace(variable: string, value: string, options: vscode.EnvironmentVariableMutatorOptions | undefined, scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tthis._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Replace, options: options ?? { applyAtProcessCreation: true }, scope });\n\t}\n\n\tappend(variable: string, value: string, options: vscode.EnvironmentVariableMutatorOptions | undefined, scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tthis._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Append, options: options ?? { applyAtProcessCreation: true }, scope });\n\t}\n\n\tprepend(variable: string, value: string, options: vscode.EnvironmentVariableMutatorOptions | undefined, scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tthis._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Prepend, options: options ?? { applyAtProcessCreation: true }, scope });\n\t}\n\n\tprivate _setIfDiffers(variable: string, mutator: vscode.EnvironmentVariableMutator & { scope: vscode.EnvironmentVariableScope | undefined }): void {\n\t\tif (mutator.options && mutator.options.applyAtProcessCreation === false && !mutator.options.applyAtShellIntegration) {\n\t\t\tthrow new Error('EnvironmentVariableMutatorOptions must apply at either process creation or shell integration');\n\t\t}\n\t\tconst key = this.getKey(variable, mutator.scope);\n\t\tconst current = this.map.get(key);\n\t\tconst newOptions = mutator.options ? {\n\t\t\tapplyAtProcessCreation: mutator.options.applyAtProcessCreation ?? false,\n\t\t\tapplyAtShellIntegration: mutator.options.applyAtShellIntegration ?? false,\n\t\t} : {\n\t\t\tapplyAtProcessCreation: true\n\t\t};\n\t\tif (\n\t\t\t!current ||\n\t\t\tcurrent.value !== mutator.value ||\n\t\t\tcurrent.type !== mutator.type ||\n\t\t\tcurrent.options?.applyAtProcessCreation !== newOptions.applyAtProcessCreation ||\n\t\t\tcurrent.options?.applyAtShellIntegration !== newOptions.applyAtShellIntegration ||\n\t\t\tcurrent.scope?.workspaceFolder?.index !== mutator.scope?.workspaceFolder?.index\n\t\t) {\n\t\t\tconst key = this.getKey(variable, mutator.scope);\n\t\t\tconst value: IEnvironmentVariableMutator = {\n\t\t\t\tvariable,\n\t\t\t\t...mutator,\n\t\t\t\toptions: newOptions\n\t\t\t};\n\t\t\tthis.map.set(key, value);\n\t\t\tthis._onDidChangeCollection.fire();\n\t\t}\n\t}\n\n\tget(variable: string, scope: vscode.EnvironmentVariableScope | undefined): vscode.EnvironmentVariableMutator | undefined {\n\t\tconst key = this.getKey(variable, scope);\n\t\tconst value = this.map.get(key);\n\t\t// TODO: Set options to defaults if needed\n\t\treturn value ? convertMutator(value) : undefined;\n\t}\n\n\tprivate getKey(variable: string, scope: vscode.EnvironmentVariableScope | undefined) {\n\t\tconst scopeKey = this.getScopeKey(scope);\n\t\treturn scopeKey.length ? `${variable}:::${scopeKey}` : variable;\n\t}\n\n\tprivate getScopeKey(scope: vscode.EnvironmentVariableScope | undefined): string {\n\t\treturn this.getWorkspaceKey(scope?.workspaceFolder) ?? '';\n\t}\n\n\tprivate getWorkspaceKey(workspaceFolder: vscode.WorkspaceFolder | undefined): string | undefined {\n\t\treturn workspaceFolder ? workspaceFolder.uri.toString() : undefined;\n\t}\n\n\tpublic getVariableMap(scope: vscode.EnvironmentVariableScope | undefined): Map<string, vscode.EnvironmentVariableMutator> {\n\t\tconst map = new Map<string, vscode.EnvironmentVariableMutator>();\n\t\tfor (const [_, value] of this.map) {\n\t\t\tif (this.getScopeKey(value.scope) === this.getScopeKey(scope)) {\n\t\t\t\tmap.set(value.variable, convertMutator(value));\n\t\t\t}\n\t\t}\n\t\treturn map;\n\t}\n\n\tdelete(variable: string, scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tconst key = this.getKey(variable, scope);\n\t\tthis.map.delete(key);\n\t\tthis._onDidChangeCollection.fire();\n\t}\n\n\tclear(scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tif (scope?.workspaceFolder) {\n\t\t\tfor (const [key, mutator] of this.map) {\n\t\t\t\tif (mutator.scope?.workspaceFolder?.index === scope.workspaceFolder.index) {\n\t\t\t\t\tthis.map.delete(key);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.clearDescription(scope);\n\t\t} else {\n\t\t\tthis.map.clear();\n\t\t\tthis.descriptionMap.clear();\n\t\t}\n\t\tthis._onDidChangeCollection.fire();\n\t}\n\n\tsetDescription(description: string | vscode.MarkdownString | undefined, scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tconst key = this.getScopeKey(scope);\n\t\tconst current = this.descriptionMap.get(key);\n\t\tif (!current || current.description !== description) {\n\t\t\tlet descriptionStr: string | undefined;\n\t\t\tif (typeof description === 'string') {\n\t\t\t\tdescriptionStr = description;\n\t\t\t} else {\n\t\t\t\t// Only take the description before the first `\\n\\n`, so that the description doesn't mess up the UI\n\t\t\t\tdescriptionStr = description?.value.split('\\n\\n')[0];\n\t\t\t}\n\t\t\tconst value: IEnvironmentVariableCollectionDescription = { description: descriptionStr, scope };\n\t\t\tthis.descriptionMap.set(key, value);\n\t\t\tthis._onDidChangeCollection.fire();\n\t\t}\n\t}\n\n\tpublic getDescription(scope: vscode.EnvironmentVariableScope | undefined): string | vscode.MarkdownString | undefined {\n\t\tconst key = this.getScopeKey(scope);\n\t\treturn this.descriptionMap.get(key)?.description;\n\t}\n\n\tprivate clearDescription(scope: vscode.EnvironmentVariableScope | undefined): void {\n\t\tconst key = this.getScopeKey(scope);\n\t\tthis.descriptionMap.delete(key);\n\t}\n}\n\nclass ScopedEnvironmentVariableCollection implements IEnvironmentVariableCollection {\n\tpublic get persistent(): boolean { return this.collection.persistent; }\n\tpublic set persistent(value: boolean) {\n\t\tthis.collection.persistent = value;\n\t}\n\n\tprotected readonly _onDidChangeCollection = new Emitter<void>();\n\tget onDidChangeCollection(): Event<void> { return this._onDidChangeCollection && this._onDidChangeCollection.event; }\n\n\tconstructor(\n\t\tprivate readonly collection: UnifiedEnvironmentVariableCollection,\n\t\tprivate readonly scope: vscode.EnvironmentVariableScope | undefined\n\t) {\n\t}\n\n\tgetScoped(scope: vscode.EnvironmentVariableScope | undefined) {\n\t\treturn this.collection.getScopedEnvironmentVariableCollection(scope);\n\t}\n\n\treplace(variable: string, value: string, options?: vscode.EnvironmentVariableMutatorOptions | undefined): void {\n\t\tthis.collection.replace(variable, value, options, this.scope);\n\t}\n\n\tappend(variable: string, value: string, options?: vscode.EnvironmentVariableMutatorOptions | undefined): void {\n\t\tthis.collection.append(variable, value, options, this.scope);\n\t}\n\n\tprepend(variable: string, value: string, options?: vscode.EnvironmentVariableMutatorOptions | undefined): void {\n\t\tthis.collection.prepend(variable, value, options, this.scope);\n\t}\n\n\tget(variable: string): vscode.EnvironmentVariableMutator | undefined {\n\t\treturn this.collection.get(variable, this.scope);\n\t}\n\n\tforEach(callback: (variable: string, mutator: vscode.EnvironmentVariableMutator, collection: vscode.EnvironmentVariableCollection) => unknown, thisArg?: unknown): void {\n\t\tthis.collection.getVariableMap(this.scope).forEach((value, variable) => callback.call(thisArg, variable, value, this), this.scope);\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[variable: string, mutator: vscode.EnvironmentVariableMutator]> {\n\t\treturn this.collection.getVariableMap(this.scope).entries();\n\t}\n\n\tdelete(variable: string): void {\n\t\tthis.collection.delete(variable, this.scope);\n\t\tthis._onDidChangeCollection.fire(undefined);\n\t}\n\n\tclear(): void {\n\t\tthis.collection.clear(this.scope);\n\t}\n\n\tset description(description: string | vscode.MarkdownString | undefined) {\n\t\tthis.collection.setDescription(description, this.scope);\n\t}\n\n\tget description(): string | vscode.MarkdownString | undefined {\n\t\treturn this.collection.getDescription(this.scope);\n\t}\n}\n\nexport class WorkerExtHostTerminalService extends BaseExtHostTerminalService {\n\tconstructor(\n\t\t@IExtHostCommands extHostCommands: IExtHostCommands,\n\t\t@IExtHostRpcService extHostRpc: IExtHostRpcService\n\t) {\n\t\tsuper(false, extHostCommands, extHostRpc);\n\t}\n\n\tpublic createTerminal(name?: string, shellPath?: string, shellArgs?: string[] | string): vscode.Terminal {\n\t\tthrow new NotSupportedError();\n\t}\n\n\tpublic createTerminalFromOptions(options: vscode.TerminalOptions, internalOptions?: ITerminalInternalOptions): vscode.Terminal {\n\t\tthrow new NotSupportedError();\n\t}\n}\n\nfunction asTerminalIcon(iconPath?: vscode.Uri | { light: vscode.Uri; dark: vscode.Uri } | vscode.ThemeIcon): TerminalIcon | undefined {\n\tif (!iconPath || typeof iconPath === 'string') {\n\t\treturn undefined;\n\t}\n\n\tif (!hasKey(iconPath, { id: true })) {\n\t\treturn iconPath;\n\t}\n\n\treturn {\n\t\tid: iconPath.id,\n\t\tcolor: iconPath.color as ThemeColor\n\t};\n}\n\nfunction asTerminalColor(color?: vscode.ThemeColor): ThemeColor | undefined {\n\treturn ThemeColor.isThemeColor(color) ? color as ThemeColor : undefined;\n}\n\nfunction convertMutator(mutator: IEnvironmentVariableMutator): vscode.EnvironmentVariableMutator {\n\tconst newMutator = { ...mutator };\n\tdelete newMutator.scope;\n\tnewMutator.options = newMutator.options ?? undefined;\n\treturn newMutator as vscode.EnvironmentVariableMutator;\n}\n"]}