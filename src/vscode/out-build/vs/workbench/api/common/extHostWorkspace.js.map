{"version":3,"sources":["vs/workbench/api/common/extHostWorkspace.ts"],"names":[],"mappings":"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","file":"extHostWorkspace.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { delta as arrayDelta, mapArrayOrNot } from '../../../base/common/arrays.js';\nimport { AsyncIterableProducer, Barrier } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { AsyncEmitter, Emitter, Event } from '../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { TernarySearchTree } from '../../../base/common/ternarySearchTree.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Counter } from '../../../base/common/numbers.js';\nimport { basename, basenameOrAuthority, dirname, ExtUri, relativePath } from '../../../base/common/resources.js';\nimport { compare } from '../../../base/common/strings.js';\nimport { isUriComponents, URI, UriComponents } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { FileSystemProviderCapabilities } from '../../../platform/files/common/files.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { Severity } from '../../../platform/notification/common/notification.js';\nimport { EditSessionIdentityMatch } from '../../../platform/workspace/common/editSessions.js';\nimport { Workspace, WorkspaceFolder } from '../../../platform/workspace/common/workspace.js';\nimport { IExtHostFileSystemInfo } from './extHostFileSystemInfo.js';\nimport { IExtHostInitDataService } from './extHostInitDataService.js';\nimport { IExtHostRpcService } from './extHostRpcService.js';\nimport { GlobPattern } from './extHostTypeConverters.js';\nimport { Range } from './extHostTypes.js';\nimport { IURITransformerService } from './extHostUriTransformerService.js';\nimport { IFileQueryBuilderOptions, ISearchPatternBuilder, ITextQueryBuilderOptions } from '../../services/search/common/queryBuilder.js';\nimport { IRawFileMatch2, ITextSearchResult, resultIsMatch } from '../../services/search/common/search.js';\nimport type * as vscode from 'vscode';\nimport { ExtHostWorkspaceShape, IRelativePatternDto, IWorkspaceData, MainContext, MainThreadMessageOptions, MainThreadMessageServiceShape, MainThreadWorkspaceShape } from './extHost.protocol.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { AuthInfo, Credentials } from '../../../platform/request/common/request.js';\nimport { ExcludeSettingOptions, TextSearchContext2, TextSearchMatch2 } from '../../services/search/common/searchExtTypes.js';\nimport { bufferToStream, readableToBuffer, VSBuffer } from '../../../base/common/buffer.js';\nimport { toDecodeStream, toEncodeReadable, UTF8 } from '../../services/textfile/common/encoding.js';\nimport { consumeStream } from '../../../base/common/stream.js';\nimport { stringToSnapshot } from '../../services/textfile/common/textfiles.js';\n\nexport interface IExtHostWorkspaceProvider {\n\tgetWorkspaceFolder2(uri: vscode.Uri, resolveParent?: boolean): Promise<vscode.WorkspaceFolder | undefined>;\n\tresolveWorkspaceFolder(uri: vscode.Uri): Promise<vscode.WorkspaceFolder | undefined>;\n\tgetWorkspaceFolders2(): Promise<vscode.WorkspaceFolder[] | undefined>;\n\tresolveProxy(url: string): Promise<string | undefined>;\n\tlookupAuthorization(authInfo: AuthInfo): Promise<Credentials | undefined>;\n\tlookupKerberosAuthorization(url: string): Promise<string | undefined>;\n\tloadCertificates(): Promise<string[]>;\n}\n\nfunction isFolderEqual(folderA: URI, folderB: URI, extHostFileSystemInfo: IExtHostFileSystemInfo): boolean {\n\treturn new ExtUri(uri => ignorePathCasing(uri, extHostFileSystemInfo)).isEqual(folderA, folderB);\n}\n\nfunction compareWorkspaceFolderByUri(a: vscode.WorkspaceFolder, b: vscode.WorkspaceFolder, extHostFileSystemInfo: IExtHostFileSystemInfo): number {\n\treturn isFolderEqual(a.uri, b.uri, extHostFileSystemInfo) ? 0 : compare(a.uri.toString(), b.uri.toString());\n}\n\nfunction compareWorkspaceFolderByUriAndNameAndIndex(a: vscode.WorkspaceFolder, b: vscode.WorkspaceFolder, extHostFileSystemInfo: IExtHostFileSystemInfo): number {\n\tif (a.index !== b.index) {\n\t\treturn a.index < b.index ? -1 : 1;\n\t}\n\n\treturn isFolderEqual(a.uri, b.uri, extHostFileSystemInfo) ? compare(a.name, b.name) : compare(a.uri.toString(), b.uri.toString());\n}\n\nfunction delta(oldFolders: vscode.WorkspaceFolder[], newFolders: vscode.WorkspaceFolder[], compare: (a: vscode.WorkspaceFolder, b: vscode.WorkspaceFolder, extHostFileSystemInfo: IExtHostFileSystemInfo) => number, extHostFileSystemInfo: IExtHostFileSystemInfo): { removed: vscode.WorkspaceFolder[]; added: vscode.WorkspaceFolder[] } {\n\tconst oldSortedFolders = oldFolders.slice(0).sort((a, b) => compare(a, b, extHostFileSystemInfo));\n\tconst newSortedFolders = newFolders.slice(0).sort((a, b) => compare(a, b, extHostFileSystemInfo));\n\n\treturn arrayDelta(oldSortedFolders, newSortedFolders, (a, b) => compare(a, b, extHostFileSystemInfo));\n}\n\nfunction ignorePathCasing(uri: URI, extHostFileSystemInfo: IExtHostFileSystemInfo): boolean {\n\tconst capabilities = extHostFileSystemInfo.getCapabilities(uri.scheme);\n\treturn !(capabilities && (capabilities & FileSystemProviderCapabilities.PathCaseSensitive));\n}\n\ninterface MutableWorkspaceFolder extends vscode.WorkspaceFolder {\n\tname: string;\n\tindex: number;\n}\n\ninterface QueryOptions<T> {\n\toptions: T;\n\tfolder: URI | undefined;\n}\n\nclass ExtHostWorkspaceImpl extends Workspace {\n\n\tstatic toExtHostWorkspace(data: IWorkspaceData | null, previousConfirmedWorkspace: ExtHostWorkspaceImpl | undefined, previousUnconfirmedWorkspace: ExtHostWorkspaceImpl | undefined, extHostFileSystemInfo: IExtHostFileSystemInfo): { workspace: ExtHostWorkspaceImpl | null; added: vscode.WorkspaceFolder[]; removed: vscode.WorkspaceFolder[] } {\n\t\tif (!data) {\n\t\t\treturn { workspace: null, added: [], removed: [] };\n\t\t}\n\n\t\tconst { id, name, folders, configuration, transient, isUntitled } = data;\n\t\tconst newWorkspaceFolders: vscode.WorkspaceFolder[] = [];\n\n\t\t// If we have an existing workspace, we try to find the folders that match our\n\t\t// data and update their properties. It could be that an extension stored them\n\t\t// for later use and we want to keep them \"live\" if they are still present.\n\t\tconst oldWorkspace = previousConfirmedWorkspace;\n\t\tif (previousConfirmedWorkspace) {\n\t\t\tfolders.forEach((folderData, index) => {\n\t\t\t\tconst folderUri = URI.revive(folderData.uri);\n\t\t\t\tconst existingFolder = ExtHostWorkspaceImpl._findFolder(previousUnconfirmedWorkspace || previousConfirmedWorkspace, folderUri, extHostFileSystemInfo);\n\n\t\t\t\tif (existingFolder) {\n\t\t\t\t\texistingFolder.name = folderData.name;\n\t\t\t\t\texistingFolder.index = folderData.index;\n\n\t\t\t\t\tnewWorkspaceFolders.push(existingFolder);\n\t\t\t\t} else {\n\t\t\t\t\tnewWorkspaceFolders.push({ uri: folderUri, name: folderData.name, index });\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tnewWorkspaceFolders.push(...folders.map(({ uri, name, index }) => ({ uri: URI.revive(uri), name, index })));\n\t\t}\n\n\t\t// make sure to restore sort order based on index\n\t\tnewWorkspaceFolders.sort((f1, f2) => f1.index < f2.index ? -1 : 1);\n\n\t\tconst workspace = new ExtHostWorkspaceImpl(id, name, newWorkspaceFolders, !!transient, configuration ? URI.revive(configuration) : null, !!isUntitled, uri => ignorePathCasing(uri, extHostFileSystemInfo));\n\t\tconst { added, removed } = delta(oldWorkspace ? oldWorkspace.workspaceFolders : [], workspace.workspaceFolders, compareWorkspaceFolderByUri, extHostFileSystemInfo);\n\n\t\treturn { workspace, added, removed };\n\t}\n\n\tprivate static _findFolder(workspace: ExtHostWorkspaceImpl, folderUriToFind: URI, extHostFileSystemInfo: IExtHostFileSystemInfo): MutableWorkspaceFolder | undefined {\n\t\tfor (let i = 0; i < workspace.folders.length; i++) {\n\t\t\tconst folder = workspace.workspaceFolders[i];\n\t\t\tif (isFolderEqual(folder.uri, folderUriToFind, extHostFileSystemInfo)) {\n\t\t\t\treturn folder;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate readonly _workspaceFolders: vscode.WorkspaceFolder[] = [];\n\tprivate readonly _structure: TernarySearchTree<URI, vscode.WorkspaceFolder>;\n\n\tconstructor(id: string, private _name: string, folders: vscode.WorkspaceFolder[], transient: boolean, configuration: URI | null, private _isUntitled: boolean, ignorePathCasing: (key: URI) => boolean) {\n\t\tsuper(id, folders.map(f => new WorkspaceFolder(f)), transient, configuration, ignorePathCasing);\n\t\tthis._structure = TernarySearchTree.forUris<vscode.WorkspaceFolder>(ignorePathCasing, () => true);\n\n\t\t// setup the workspace folder data structure\n\t\tfolders.forEach(folder => {\n\t\t\tthis._workspaceFolders.push(folder);\n\t\t\tthis._structure.set(folder.uri, folder);\n\t\t});\n\t}\n\n\tget name(): string {\n\t\treturn this._name;\n\t}\n\n\tget isUntitled(): boolean {\n\t\treturn this._isUntitled;\n\t}\n\n\tget workspaceFolders(): vscode.WorkspaceFolder[] {\n\t\treturn this._workspaceFolders.slice(0);\n\t}\n\n\tgetWorkspaceFolder(uri: URI, resolveParent?: boolean): vscode.WorkspaceFolder | undefined {\n\t\tif (resolveParent && this._structure.get(uri)) {\n\t\t\t// `uri` is a workspace folder so we check for its parent\n\t\t\turi = dirname(uri);\n\t\t}\n\t\treturn this._structure.findSubstr(uri);\n\t}\n\n\tresolveWorkspaceFolder(uri: URI): vscode.WorkspaceFolder | undefined {\n\t\treturn this._structure.get(uri);\n\t}\n}\n\nexport class ExtHostWorkspace implements ExtHostWorkspaceShape, IExtHostWorkspaceProvider {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeWorkspace = new Emitter<vscode.WorkspaceFoldersChangeEvent>();\n\treadonly onDidChangeWorkspace: Event<vscode.WorkspaceFoldersChangeEvent> = this._onDidChangeWorkspace.event;\n\n\tprivate readonly _onDidGrantWorkspaceTrust = new Emitter<void>();\n\treadonly onDidGrantWorkspaceTrust: Event<void> = this._onDidGrantWorkspaceTrust.event;\n\n\tprivate readonly _logService: ILogService;\n\tprivate readonly _requestIdProvider: Counter;\n\tprivate readonly _barrier: Barrier;\n\n\tprivate _confirmedWorkspace?: ExtHostWorkspaceImpl;\n\tprivate _unconfirmedWorkspace?: ExtHostWorkspaceImpl;\n\n\tprivate readonly _proxy: MainThreadWorkspaceShape;\n\tprivate readonly _messageService: MainThreadMessageServiceShape;\n\tprivate readonly _extHostFileSystemInfo: IExtHostFileSystemInfo;\n\tprivate readonly _uriTransformerService: IURITransformerService;\n\n\tprivate readonly _activeSearchCallbacks: ((match: IRawFileMatch2) => any)[] = [];\n\n\tprivate _trusted: boolean = false;\n\n\tprivate readonly _editSessionIdentityProviders = new Map<string, vscode.EditSessionIdentityProvider>();\n\n\tconstructor(\n\t\t@IExtHostRpcService extHostRpc: IExtHostRpcService,\n\t\t@IExtHostInitDataService initData: IExtHostInitDataService,\n\t\t@IExtHostFileSystemInfo extHostFileSystemInfo: IExtHostFileSystemInfo,\n\t\t@ILogService logService: ILogService,\n\t\t@IURITransformerService uriTransformerService: IURITransformerService,\n\t) {\n\t\tthis._logService = logService;\n\t\tthis._extHostFileSystemInfo = extHostFileSystemInfo;\n\t\tthis._uriTransformerService = uriTransformerService;\n\t\tthis._requestIdProvider = new Counter();\n\t\tthis._barrier = new Barrier();\n\n\t\tthis._proxy = extHostRpc.getProxy(MainContext.MainThreadWorkspace);\n\t\tthis._messageService = extHostRpc.getProxy(MainContext.MainThreadMessageService);\n\t\tconst data = initData.workspace;\n\t\tthis._confirmedWorkspace = data ? new ExtHostWorkspaceImpl(data.id, data.name, [], !!data.transient, data.configuration ? URI.revive(data.configuration) : null, !!data.isUntitled, uri => ignorePathCasing(uri, extHostFileSystemInfo)) : undefined;\n\t}\n\n\t$initializeWorkspace(data: IWorkspaceData | null, trusted: boolean): void {\n\t\tthis._trusted = trusted;\n\t\tthis.$acceptWorkspaceData(data);\n\t\tthis._barrier.open();\n\t}\n\n\twaitForInitializeCall(): Promise<boolean> {\n\t\treturn this._barrier.wait();\n\t}\n\n\t// --- workspace ---\n\n\tget workspace(): Workspace | undefined {\n\t\treturn this._actualWorkspace;\n\t}\n\n\tget name(): string | undefined {\n\t\treturn this._actualWorkspace ? this._actualWorkspace.name : undefined;\n\t}\n\n\tget workspaceFile(): vscode.Uri | undefined {\n\t\tif (this._actualWorkspace) {\n\t\t\tif (this._actualWorkspace.configuration) {\n\t\t\t\tif (this._actualWorkspace.isUntitled) {\n\t\t\t\t\treturn URI.from({ scheme: Schemas.untitled, path: basename(dirname(this._actualWorkspace.configuration)) }); // Untitled Workspace: return untitled URI\n\t\t\t\t}\n\n\t\t\t\treturn this._actualWorkspace.configuration; // Workspace: return the configuration location\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate get _actualWorkspace(): ExtHostWorkspaceImpl | undefined {\n\t\treturn this._unconfirmedWorkspace || this._confirmedWorkspace;\n\t}\n\n\tgetWorkspaceFolders(): vscode.WorkspaceFolder[] | undefined {\n\t\tif (!this._actualWorkspace) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._actualWorkspace.workspaceFolders.slice(0);\n\t}\n\n\tasync getWorkspaceFolders2(): Promise<vscode.WorkspaceFolder[] | undefined> {\n\t\tawait this._barrier.wait();\n\t\tif (!this._actualWorkspace) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._actualWorkspace.workspaceFolders.slice(0);\n\t}\n\n\tupdateWorkspaceFolders(extension: IExtensionDescription, index: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: vscode.Uri; name?: string }[]): boolean {\n\t\tconst validatedDistinctWorkspaceFoldersToAdd: { uri: vscode.Uri; name?: string }[] = [];\n\t\tif (Array.isArray(workspaceFoldersToAdd)) {\n\t\t\tworkspaceFoldersToAdd.forEach(folderToAdd => {\n\t\t\t\tif (URI.isUri(folderToAdd.uri) && !validatedDistinctWorkspaceFoldersToAdd.some(f => isFolderEqual(f.uri, folderToAdd.uri, this._extHostFileSystemInfo))) {\n\t\t\t\t\tvalidatedDistinctWorkspaceFoldersToAdd.push({ uri: folderToAdd.uri, name: folderToAdd.name || basenameOrAuthority(folderToAdd.uri) });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!!this._unconfirmedWorkspace) {\n\t\t\treturn false; // prevent accumulated calls without a confirmed workspace\n\t\t}\n\n\t\tif ([index, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n\t\t\treturn false; // validate numbers\n\t\t}\n\n\t\tif (deleteCount === 0 && validatedDistinctWorkspaceFoldersToAdd.length === 0) {\n\t\t\treturn false; // nothing to delete or add\n\t\t}\n\n\t\tconst currentWorkspaceFolders: MutableWorkspaceFolder[] = this._actualWorkspace ? this._actualWorkspace.workspaceFolders : [];\n\t\tif (index + deleteCount > currentWorkspaceFolders.length) {\n\t\t\treturn false; // cannot delete more than we have\n\t\t}\n\n\t\t// Simulate the updateWorkspaceFolders method on our data to do more validation\n\t\tconst newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n\t\tnewWorkspaceFolders.splice(index, deleteCount, ...validatedDistinctWorkspaceFoldersToAdd.map(f => ({ uri: f.uri, name: f.name || basenameOrAuthority(f.uri), index: undefined! /* fixed later */ })));\n\n\t\tfor (let i = 0; i < newWorkspaceFolders.length; i++) {\n\t\t\tconst folder = newWorkspaceFolders[i];\n\t\t\tif (newWorkspaceFolders.some((otherFolder, index) => index !== i && isFolderEqual(folder.uri, otherFolder.uri, this._extHostFileSystemInfo))) {\n\t\t\t\treturn false; // cannot add the same folder multiple times\n\t\t\t}\n\t\t}\n\n\t\tnewWorkspaceFolders.forEach((f, index) => f.index = index); // fix index\n\t\tconst { added, removed } = delta(currentWorkspaceFolders, newWorkspaceFolders, compareWorkspaceFolderByUriAndNameAndIndex, this._extHostFileSystemInfo);\n\t\tif (added.length === 0 && removed.length === 0) {\n\t\t\treturn false; // nothing actually changed\n\t\t}\n\n\t\t// Trigger on main side\n\t\tif (this._proxy) {\n\t\t\tconst extName = extension.displayName || extension.name;\n\t\t\tthis._proxy.$updateWorkspaceFolders(extName, index, deleteCount, validatedDistinctWorkspaceFoldersToAdd).then(undefined, error => {\n\n\t\t\t\t// in case of an error, make sure to clear out the unconfirmed workspace\n\t\t\t\t// because we cannot expect the acknowledgement from the main side for this\n\t\t\t\tthis._unconfirmedWorkspace = undefined;\n\n\t\t\t\t// show error to user\n\t\t\t\tconst options: MainThreadMessageOptions = { source: { identifier: extension.identifier, label: extension.displayName || extension.name } };\n\t\t\t\tthis._messageService.$showMessage(Severity.Error, localize('updateerror', \"Extension '{0}' failed to update workspace folders: {1}\", extName, error.toString()), options, []);\n\t\t\t});\n\t\t}\n\n\t\t// Try to accept directly\n\t\tthis.trySetWorkspaceFolders(newWorkspaceFolders);\n\n\t\treturn true;\n\t}\n\n\tgetWorkspaceFolder(uri: vscode.Uri, resolveParent?: boolean): vscode.WorkspaceFolder | undefined {\n\t\tif (!this._actualWorkspace) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._actualWorkspace.getWorkspaceFolder(uri, resolveParent);\n\t}\n\n\tasync getWorkspaceFolder2(uri: vscode.Uri, resolveParent?: boolean): Promise<vscode.WorkspaceFolder | undefined> {\n\t\tawait this._barrier.wait();\n\t\tif (!this._actualWorkspace) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._actualWorkspace.getWorkspaceFolder(uri, resolveParent);\n\t}\n\n\tasync resolveWorkspaceFolder(uri: vscode.Uri): Promise<vscode.WorkspaceFolder | undefined> {\n\t\tawait this._barrier.wait();\n\t\tif (!this._actualWorkspace) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._actualWorkspace.resolveWorkspaceFolder(uri);\n\t}\n\n\tgetPath(): string | undefined {\n\n\t\t// this is legacy from the days before having\n\t\t// multi-root and we keep it only alive if there\n\t\t// is just one workspace folder.\n\t\tif (!this._actualWorkspace) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst { folders } = this._actualWorkspace;\n\t\tif (folders.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\t// #54483 @Joh Why are we still using fsPath?\n\t\treturn folders[0].uri.fsPath;\n\t}\n\n\tgetRelativePath(pathOrUri: string | vscode.Uri, includeWorkspace?: boolean): string {\n\n\t\tlet resource: URI | undefined;\n\t\tlet path: string = '';\n\t\tif (typeof pathOrUri === 'string') {\n\t\t\tresource = URI.file(pathOrUri);\n\t\t\tpath = pathOrUri;\n\t\t} else if (typeof pathOrUri !== 'undefined') {\n\t\t\tresource = pathOrUri;\n\t\t\tpath = pathOrUri.fsPath;\n\t\t}\n\n\t\tif (!resource) {\n\t\t\treturn path;\n\t\t}\n\n\t\tconst folder = this.getWorkspaceFolder(\n\t\t\tresource,\n\t\t\ttrue\n\t\t);\n\n\t\tif (!folder) {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (typeof includeWorkspace === 'undefined' && this._actualWorkspace) {\n\t\t\tincludeWorkspace = this._actualWorkspace.folders.length > 1;\n\t\t}\n\n\t\tlet result = relativePath(folder.uri, resource);\n\t\tif (includeWorkspace && folder.name) {\n\t\t\tresult = `${folder.name}/${result}`;\n\t\t}\n\t\treturn result!;\n\t}\n\n\tprivate trySetWorkspaceFolders(folders: vscode.WorkspaceFolder[]): void {\n\n\t\t// Update directly here. The workspace is unconfirmed as long as we did not get an\n\t\t// acknowledgement from the main side (via $acceptWorkspaceData)\n\t\tif (this._actualWorkspace) {\n\t\t\tthis._unconfirmedWorkspace = ExtHostWorkspaceImpl.toExtHostWorkspace({\n\t\t\t\tid: this._actualWorkspace.id,\n\t\t\t\tname: this._actualWorkspace.name,\n\t\t\t\tconfiguration: this._actualWorkspace.configuration,\n\t\t\t\tfolders,\n\t\t\t\tisUntitled: this._actualWorkspace.isUntitled\n\t\t\t}, this._actualWorkspace, undefined, this._extHostFileSystemInfo).workspace || undefined;\n\t\t}\n\t}\n\n\t$acceptWorkspaceData(data: IWorkspaceData | null): void {\n\n\t\tconst { workspace, added, removed } = ExtHostWorkspaceImpl.toExtHostWorkspace(data, this._confirmedWorkspace, this._unconfirmedWorkspace, this._extHostFileSystemInfo);\n\n\t\t// Update our workspace object. We have a confirmed workspace, so we drop our\n\t\t// unconfirmed workspace.\n\t\tthis._confirmedWorkspace = workspace || undefined;\n\t\tthis._unconfirmedWorkspace = undefined;\n\n\t\t// Events\n\t\tthis._onDidChangeWorkspace.fire(Object.freeze({\n\t\t\tadded,\n\t\t\tremoved,\n\t\t}));\n\t}\n\n\t// --- search ---\n\n\t/**\n\t * Note, null/undefined have different and important meanings for \"exclude\"\n\t */\n\tfindFiles(include: vscode.GlobPattern | undefined, exclude: vscode.GlobPattern | null | undefined, maxResults: number | undefined, extensionId: ExtensionIdentifier, token: vscode.CancellationToken = CancellationToken.None): Promise<vscode.Uri[]> {\n\t\tthis._logService.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${extensionId.value}, entryPoint: findFiles`);\n\n\t\tlet excludeString: string = '';\n\t\tlet useFileExcludes = true;\n\t\tif (exclude === null) {\n\t\t\tuseFileExcludes = false;\n\t\t} else if (exclude !== undefined) {\n\t\t\tif (typeof exclude === 'string') {\n\t\t\t\texcludeString = exclude;\n\t\t\t} else {\n\t\t\t\texcludeString = exclude.pattern;\n\t\t\t}\n\t\t}\n\n\t\t// todo: consider exclude baseURI if available\n\t\treturn this._findFilesImpl({ type: 'include', value: include }, {\n\t\t\texclude: [excludeString],\n\t\t\tmaxResults,\n\t\t\tuseExcludeSettings: useFileExcludes ? ExcludeSettingOptions.FilesExclude : ExcludeSettingOptions.None,\n\t\t\tuseIgnoreFiles: {\n\t\t\t\tlocal: false\n\t\t\t}\n\t\t}, token);\n\t}\n\n\n\tfindFiles2(filePatterns: readonly vscode.GlobPattern[],\n\t\toptions: vscode.FindFiles2Options = {},\n\t\textensionId: ExtensionIdentifier,\n\t\ttoken: vscode.CancellationToken = CancellationToken.None): Promise<vscode.Uri[]> {\n\t\tthis._logService.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${extensionId.value}, entryPoint: findFiles2New`);\n\t\treturn this._findFilesImpl({ type: 'filePatterns', value: filePatterns }, options, token);\n\t}\n\n\tprivate async _findFilesImpl(\n\t\t// the old `findFiles` used `include` to query, but the new `findFiles2` uses `filePattern` to query.\n\t\t// `filePattern` is the proper way to handle this, since it takes less precedence than the ignore files.\n\t\tquery: { readonly type: 'include'; readonly value: vscode.GlobPattern | undefined } | { readonly type: 'filePatterns'; readonly value: readonly vscode.GlobPattern[] },\n\t\toptions: vscode.FindFiles2Options,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Uri[]> {\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn Promise.resolve([]);\n\t\t}\n\n\t\tconst filePatternsToUse = query.type === 'include' ? [query.value] : query.value ?? [];\n\t\tif (!Array.isArray(filePatternsToUse)) {\n\t\t\tconsole.error('Invalid file pattern provided', filePatternsToUse);\n\t\t\tthrow new Error(`Invalid file pattern provided ${JSON.stringify(filePatternsToUse)}`);\n\t\t}\n\n\t\tconst queryOptions: QueryOptions<IFileQueryBuilderOptions>[] = filePatternsToUse.map(filePattern => {\n\n\t\t\tconst excludePatterns = globsToISearchPatternBuilder(options.exclude);\n\n\t\t\tconst fileQueries: IFileQueryBuilderOptions = {\n\t\t\t\tignoreSymlinks: typeof options.followSymlinks === 'boolean' ? !options.followSymlinks : undefined,\n\t\t\t\tdisregardIgnoreFiles: typeof options.useIgnoreFiles?.local === 'boolean' ? !options.useIgnoreFiles.local : undefined,\n\t\t\t\tdisregardGlobalIgnoreFiles: typeof options.useIgnoreFiles?.global === 'boolean' ? !options.useIgnoreFiles.global : undefined,\n\t\t\t\tdisregardParentIgnoreFiles: typeof options.useIgnoreFiles?.parent === 'boolean' ? !options.useIgnoreFiles.parent : undefined,\n\t\t\t\tdisregardExcludeSettings: options.useExcludeSettings !== undefined && options.useExcludeSettings === ExcludeSettingOptions.None,\n\t\t\t\tdisregardSearchExcludeSettings: options.useExcludeSettings !== undefined && (options.useExcludeSettings !== ExcludeSettingOptions.SearchAndFilesExclude),\n\t\t\t\tmaxResults: options.maxResults,\n\t\t\t\texcludePattern: excludePatterns.length > 0 ? excludePatterns : undefined,\n\t\t\t\t_reason: 'startFileSearch',\n\t\t\t\tshouldGlobSearch: query.type === 'include' ? undefined : true,\n\t\t\t};\n\n\t\t\tconst parseInclude = parseSearchExcludeInclude(GlobPattern.from(filePattern));\n\t\t\tconst folderToUse = parseInclude?.folder;\n\t\t\tif (query.type === 'include') {\n\t\t\t\tfileQueries.includePattern = parseInclude?.pattern;\n\t\t\t} else {\n\t\t\t\tfileQueries.filePattern = parseInclude?.pattern;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tfolder: folderToUse,\n\t\t\t\toptions: fileQueries\n\t\t\t};\n\t\t});\n\n\t\treturn this._findFilesBase(queryOptions, token);\n\t}\n\n\tprivate async _findFilesBase(\n\t\tqueryOptions: QueryOptions<IFileQueryBuilderOptions>[] | undefined,\n\t\ttoken: CancellationToken\n\t): Promise<vscode.Uri[]> {\n\t\tconst result = await Promise.all(queryOptions?.map(option => this._proxy.$startFileSearch(\n\t\t\toption.folder ?? null,\n\t\t\toption.options,\n\t\t\ttoken).then(data => Array.isArray(data) ? data.map(d => URI.revive(d)) : [])\n\t\t) ?? []);\n\n\t\tconst flatResult = result.flat();\n\n\t\t// Dedupe entries in a flat array\n\t\tconst extUri = new ExtUri(uri => ignorePathCasing(uri, this._extHostFileSystemInfo));\n\t\tconst uriMap = new Map<string, vscode.Uri>();\n\n\t\tfor (const uri of flatResult) {\n\t\t\tconst key = extUri.getComparisonKey(uri);\n\t\t\tif (!uriMap.has(key)) {\n\t\t\t\turiMap.set(key, uri);\n\t\t\t}\n\t\t}\n\n\t\treturn Array.from(uriMap.values());\n\t}\n\n\tfindTextInFiles2(query: vscode.TextSearchQuery2, options: vscode.FindTextInFilesOptions2 | undefined, extensionId: ExtensionIdentifier, token: vscode.CancellationToken = CancellationToken.None): vscode.FindTextInFilesResponse {\n\t\tthis._logService.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${extensionId.value}, entryPoint: findTextInFiles2`);\n\n\n\t\tconst getOptions = (include: vscode.GlobPattern | undefined): QueryOptions<ITextQueryBuilderOptions> => {\n\t\t\tif (!options) {\n\t\t\t\treturn {\n\t\t\t\t\tfolder: undefined,\n\t\t\t\t\toptions: {}\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst parsedInclude = include ? parseSearchExcludeInclude(GlobPattern.from(include)) : undefined;\n\n\t\t\tconst excludePatterns = options.exclude ? globsToISearchPatternBuilder(options.exclude) : undefined;\n\n\t\t\treturn {\n\t\t\t\toptions: {\n\n\t\t\t\t\tignoreSymlinks: typeof options.followSymlinks === 'boolean' ? !options.followSymlinks : undefined,\n\t\t\t\t\tdisregardIgnoreFiles: typeof options.useIgnoreFiles?.local === 'boolean' ? !options.useIgnoreFiles?.local : undefined,\n\t\t\t\t\tdisregardGlobalIgnoreFiles: typeof options.useIgnoreFiles?.global === 'boolean' ? !options.useIgnoreFiles?.global : undefined,\n\t\t\t\t\tdisregardParentIgnoreFiles: typeof options.useIgnoreFiles?.parent === 'boolean' ? !options.useIgnoreFiles?.parent : undefined,\n\t\t\t\t\tdisregardExcludeSettings: options.useExcludeSettings !== undefined && options.useExcludeSettings === ExcludeSettingOptions.None,\n\t\t\t\t\tdisregardSearchExcludeSettings: options.useExcludeSettings !== undefined && (options.useExcludeSettings !== ExcludeSettingOptions.SearchAndFilesExclude),\n\t\t\t\t\tfileEncoding: options.encoding,\n\t\t\t\t\tmaxResults: options.maxResults,\n\t\t\t\t\tpreviewOptions: options.previewOptions ? {\n\t\t\t\t\t\tmatchLines: options.previewOptions?.numMatchLines ?? 100,\n\t\t\t\t\t\tcharsPerLine: options.previewOptions?.charsPerLine ?? 10000,\n\t\t\t\t\t} : undefined,\n\t\t\t\t\tsurroundingContext: options.surroundingContext,\n\n\t\t\t\t\tincludePattern: parsedInclude?.pattern,\n\t\t\t\t\texcludePattern: excludePatterns\n\t\t\t\t} satisfies ITextQueryBuilderOptions,\n\t\t\t\tfolder: parsedInclude?.folder\n\t\t\t} satisfies QueryOptions<ITextQueryBuilderOptions>;\n\t\t};\n\n\t\tconst queryOptionsRaw: (QueryOptions<ITextQueryBuilderOptions> | undefined)[] = ((options?.include?.map((include) =>\n\t\t\tgetOptions(include)))) ?? [getOptions(undefined)];\n\n\t\tconst queryOptions = queryOptionsRaw.filter((queryOps): queryOps is QueryOptions<ITextQueryBuilderOptions> => !!queryOps);\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst progressEmitter = disposables.add(new Emitter<{ result: ITextSearchResult<URI>; uri: URI }>());\n\t\tconst complete = this.findTextInFilesBase(\n\t\t\tquery,\n\t\t\tqueryOptions,\n\t\t\t(result, uri) => progressEmitter.fire({ result, uri }),\n\t\t\ttoken\n\t\t);\n\t\tconst asyncIterable = new AsyncIterableProducer<vscode.TextSearchResult2>(async emitter => {\n\t\t\tdisposables.add(progressEmitter.event(e => {\n\t\t\t\tconst result = e.result;\n\t\t\t\tconst uri = e.uri;\n\t\t\t\tif (resultIsMatch(result)) {\n\t\t\t\t\temitter.emitOne(new TextSearchMatch2(\n\t\t\t\t\t\turi,\n\t\t\t\t\t\tresult.rangeLocations.map((range) => ({\n\t\t\t\t\t\t\tpreviewRange: new Range(range.preview.startLineNumber, range.preview.startColumn, range.preview.endLineNumber, range.preview.endColumn),\n\t\t\t\t\t\t\tsourceRange: new Range(range.source.startLineNumber, range.source.startColumn, range.source.endLineNumber, range.source.endColumn)\n\t\t\t\t\t\t})),\n\t\t\t\t\t\tresult.previewText\n\n\t\t\t\t\t));\n\t\t\t\t} else {\n\t\t\t\t\temitter.emitOne(new TextSearchContext2(\n\t\t\t\t\t\turi,\n\t\t\t\t\t\tresult.text,\n\t\t\t\t\t\tresult.lineNumber\n\t\t\t\t\t));\n\n\t\t\t\t}\n\t\t\t}));\n\t\t\tawait complete;\n\t\t});\n\n\t\treturn {\n\t\t\tresults: asyncIterable,\n\t\t\tcomplete: complete.then((e) => {\n\t\t\t\tdisposables.dispose();\n\t\t\t\treturn {\n\t\t\t\t\tlimitHit: e?.limitHit ?? false\n\t\t\t\t};\n\t\t\t}),\n\t\t};\n\t}\n\n\n\tasync findTextInFilesBase(query: vscode.TextSearchQuery, queryOptions: QueryOptions<ITextQueryBuilderOptions>[] | undefined, callback: (result: ITextSearchResult<URI>, uri: URI) => void, token: vscode.CancellationToken = CancellationToken.None): Promise<vscode.TextSearchComplete> {\n\t\tconst requestId = this._requestIdProvider.getNext();\n\n\t\tlet isCanceled = false;\n\t\ttoken.onCancellationRequested(_ => {\n\t\t\tisCanceled = true;\n\t\t});\n\n\t\tthis._activeSearchCallbacks[requestId] = p => {\n\t\t\tif (isCanceled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst uri = URI.revive(p.resource);\n\t\t\tp.results!.forEach(rawResult => {\n\t\t\t\tconst result: ITextSearchResult<URI> = revive(rawResult);\n\t\t\t\tcallback(result, uri);\n\t\t\t});\n\t\t};\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn {};\n\t\t}\n\n\t\ttry {\n\t\t\tconst result = await Promise.all(queryOptions?.map(option => this._proxy.$startTextSearch(\n\t\t\t\tquery,\n\t\t\t\toption.folder ?? null,\n\t\t\t\toption.options,\n\t\t\t\trequestId,\n\t\t\t\ttoken) || {}\n\t\t\t) ?? []);\n\t\t\tdelete this._activeSearchCallbacks[requestId];\n\t\t\treturn result.reduce((acc, val) => {\n\t\t\t\treturn {\n\t\t\t\t\tlimitHit: acc?.limitHit || (val?.limitHit ?? false),\n\t\t\t\t\tmessage: [acc?.message ?? [], val?.message ?? []].flat(),\n\t\t\t\t};\n\t\t\t}, {}) ?? { limitHit: false };\n\n\t\t} catch (err) {\n\t\t\tdelete this._activeSearchCallbacks[requestId];\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tasync findTextInFiles(query: vscode.TextSearchQuery, options: vscode.FindTextInFilesOptions & { useSearchExclude?: boolean }, callback: (result: vscode.TextSearchResult) => void, extensionId: ExtensionIdentifier, token: vscode.CancellationToken = CancellationToken.None): Promise<vscode.TextSearchComplete> {\n\t\tthis._logService.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${extensionId.value}, entryPoint: findTextInFiles`);\n\n\t\tconst previewOptions: vscode.TextSearchPreviewOptions = typeof options.previewOptions === 'undefined' ?\n\t\t\t{\n\t\t\t\tmatchLines: 100,\n\t\t\t\tcharsPerLine: 10000\n\t\t\t} :\n\t\t\toptions.previewOptions;\n\n\t\tconst parsedInclude = parseSearchExcludeInclude(GlobPattern.from(options.include));\n\n\t\tconst excludePattern = (typeof options.exclude === 'string') ? options.exclude :\n\t\t\toptions.exclude ? options.exclude.pattern : undefined;\n\t\tconst queryOptions: ITextQueryBuilderOptions = {\n\t\t\tignoreSymlinks: typeof options.followSymlinks === 'boolean' ? !options.followSymlinks : undefined,\n\t\t\tdisregardIgnoreFiles: typeof options.useIgnoreFiles === 'boolean' ? !options.useIgnoreFiles : undefined,\n\t\t\tdisregardGlobalIgnoreFiles: typeof options.useGlobalIgnoreFiles === 'boolean' ? !options.useGlobalIgnoreFiles : undefined,\n\t\t\tdisregardParentIgnoreFiles: typeof options.useParentIgnoreFiles === 'boolean' ? !options.useParentIgnoreFiles : undefined,\n\t\t\tdisregardExcludeSettings: typeof options.useDefaultExcludes === 'boolean' ? !options.useDefaultExcludes : true,\n\t\t\tdisregardSearchExcludeSettings: typeof options.useSearchExclude === 'boolean' ? !options.useSearchExclude : true,\n\t\t\tfileEncoding: options.encoding,\n\t\t\tmaxResults: options.maxResults,\n\t\t\tpreviewOptions,\n\t\t\tsurroundingContext: options.afterContext, // TODO: remove ability to have before/after context separately\n\n\t\t\tincludePattern: parsedInclude?.pattern,\n\t\t\texcludePattern: excludePattern ? [{ pattern: excludePattern }] : undefined,\n\t\t};\n\n\t\tconst progress = (result: ITextSearchResult<URI>, uri: URI) => {\n\t\t\tif (resultIsMatch(result)) {\n\t\t\t\tcallback({\n\t\t\t\t\turi,\n\t\t\t\t\tpreview: {\n\t\t\t\t\t\ttext: result.previewText,\n\t\t\t\t\t\tmatches: mapArrayOrNot(\n\t\t\t\t\t\t\tresult.rangeLocations,\n\t\t\t\t\t\t\tm => new Range(m.preview.startLineNumber, m.preview.startColumn, m.preview.endLineNumber, m.preview.endColumn))\n\t\t\t\t\t},\n\t\t\t\t\tranges: mapArrayOrNot(\n\t\t\t\t\t\tresult.rangeLocations,\n\t\t\t\t\t\tr => new Range(r.source.startLineNumber, r.source.startColumn, r.source.endLineNumber, r.source.endColumn))\n\t\t\t\t} satisfies vscode.TextSearchMatch);\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\turi,\n\t\t\t\t\ttext: result.text,\n\t\t\t\t\tlineNumber: result.lineNumber\n\t\t\t\t} satisfies vscode.TextSearchContext);\n\t\t\t}\n\t\t};\n\n\t\treturn this.findTextInFilesBase(query, [{ options: queryOptions, folder: parsedInclude?.folder }], progress, token);\n\t}\n\n\t$handleTextSearchResult(result: IRawFileMatch2, requestId: number): void {\n\t\tthis._activeSearchCallbacks[requestId]?.(result);\n\t}\n\n\tasync save(uri: URI): Promise<URI | undefined> {\n\t\tconst result = await this._proxy.$save(uri, { saveAs: false });\n\n\t\treturn URI.revive(result);\n\t}\n\n\tasync saveAs(uri: URI): Promise<URI | undefined> {\n\t\tconst result = await this._proxy.$save(uri, { saveAs: true });\n\n\t\treturn URI.revive(result);\n\t}\n\n\tsaveAll(includeUntitled?: boolean): Promise<boolean> {\n\t\treturn this._proxy.$saveAll(includeUntitled);\n\t}\n\n\tresolveProxy(url: string): Promise<string | undefined> {\n\t\treturn this._proxy.$resolveProxy(url);\n\t}\n\n\tlookupAuthorization(authInfo: AuthInfo): Promise<Credentials | undefined> {\n\t\treturn this._proxy.$lookupAuthorization(authInfo);\n\t}\n\n\tlookupKerberosAuthorization(url: string): Promise<string | undefined> {\n\t\treturn this._proxy.$lookupKerberosAuthorization(url);\n\t}\n\n\tloadCertificates(): Promise<string[]> {\n\t\treturn this._proxy.$loadCertificates();\n\t}\n\n\t// --- trust ---\n\n\tget trusted(): boolean {\n\t\treturn this._trusted;\n\t}\n\n\trequestWorkspaceTrust(options?: vscode.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n\t\treturn this._proxy.$requestWorkspaceTrust(options);\n\t}\n\n\t$onDidGrantWorkspaceTrust(): void {\n\t\tif (!this._trusted) {\n\t\t\tthis._trusted = true;\n\t\t\tthis._onDidGrantWorkspaceTrust.fire();\n\t\t}\n\t}\n\n\t// --- edit sessions ---\n\n\tprivate _providerHandlePool = 0;\n\n\t// called by ext host\n\tregisterEditSessionIdentityProvider(scheme: string, provider: vscode.EditSessionIdentityProvider) {\n\t\tif (this._editSessionIdentityProviders.has(scheme)) {\n\t\t\tthrow new Error(`A provider has already been registered for scheme ${scheme}`);\n\t\t}\n\n\t\tthis._editSessionIdentityProviders.set(scheme, provider);\n\t\tconst outgoingScheme = this._uriTransformerService.transformOutgoingScheme(scheme);\n\t\tconst handle = this._providerHandlePool++;\n\t\tthis._proxy.$registerEditSessionIdentityProvider(handle, outgoingScheme);\n\n\t\treturn toDisposable(() => {\n\t\t\tthis._editSessionIdentityProviders.delete(scheme);\n\t\t\tthis._proxy.$unregisterEditSessionIdentityProvider(handle);\n\t\t});\n\t}\n\n\t// called by main thread\n\tasync $getEditSessionIdentifier(workspaceFolder: UriComponents, cancellationToken: CancellationToken): Promise<string | undefined> {\n\t\tthis._logService.info('Getting edit session identifier for workspaceFolder', workspaceFolder);\n\t\tconst folder = await this.resolveWorkspaceFolder(URI.revive(workspaceFolder));\n\t\tif (!folder) {\n\t\t\tthis._logService.warn('Unable to resolve workspace folder');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._logService.info('Invoking #provideEditSessionIdentity for workspaceFolder', folder);\n\n\t\tconst provider = this._editSessionIdentityProviders.get(folder.uri.scheme);\n\t\tthis._logService.info(`Provider for scheme ${folder.uri.scheme} is defined: `, !!provider);\n\t\tif (!provider) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst result = await provider.provideEditSessionIdentity(folder, cancellationToken);\n\t\tthis._logService.info('Provider returned edit session identifier: ', result);\n\t\tif (!result) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tasync $provideEditSessionIdentityMatch(workspaceFolder: UriComponents, identity1: string, identity2: string, cancellationToken: CancellationToken): Promise<EditSessionIdentityMatch | undefined> {\n\t\tthis._logService.info('Getting edit session identifier for workspaceFolder', workspaceFolder);\n\t\tconst folder = await this.resolveWorkspaceFolder(URI.revive(workspaceFolder));\n\t\tif (!folder) {\n\t\t\tthis._logService.warn('Unable to resolve workspace folder');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._logService.info('Invoking #provideEditSessionIdentity for workspaceFolder', folder);\n\n\t\tconst provider = this._editSessionIdentityProviders.get(folder.uri.scheme);\n\t\tthis._logService.info(`Provider for scheme ${folder.uri.scheme} is defined: `, !!provider);\n\t\tif (!provider) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst result = await provider.provideEditSessionIdentityMatch?.(identity1, identity2, cancellationToken);\n\t\tthis._logService.info('Provider returned edit session identifier match result: ', result);\n\t\tif (!result) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate readonly _onWillCreateEditSessionIdentityEvent = new AsyncEmitter<vscode.EditSessionIdentityWillCreateEvent>();\n\n\tgetOnWillCreateEditSessionIdentityEvent(extension: IExtensionDescription): Event<vscode.EditSessionIdentityWillCreateEvent> {\n\t\treturn (listener, thisArg, disposables) => {\n\t\t\tconst wrappedListener: IExtensionListener<vscode.EditSessionIdentityWillCreateEvent> = function wrapped(e) { listener.call(thisArg, e); };\n\t\t\twrappedListener.extension = extension;\n\t\t\treturn this._onWillCreateEditSessionIdentityEvent.event(wrappedListener, undefined, disposables);\n\t\t};\n\t}\n\n\t// main thread calls this to trigger participants\n\tasync $onWillCreateEditSessionIdentity(workspaceFolder: UriComponents, token: CancellationToken, timeout: number): Promise<void> {\n\t\tconst folder = await this.resolveWorkspaceFolder(URI.revive(workspaceFolder));\n\n\t\tif (folder === undefined) {\n\t\t\tthrow new Error('Unable to resolve workspace folder');\n\t\t}\n\n\t\tawait this._onWillCreateEditSessionIdentityEvent.fireAsync({ workspaceFolder: folder }, token, async (thenable: Promise<unknown>, listener) => {\n\t\t\tconst now = Date.now();\n\t\t\tawait Promise.resolve(thenable);\n\t\t\tif (Date.now() - now > timeout) {\n\t\t\t\tthis._logService.warn('SLOW edit session create-participant', (<IExtensionListener<vscode.EditSessionIdentityWillCreateEvent>>listener).extension.identifier);\n\t\t\t}\n\t\t});\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\t// --- canonical uri identity ---\n\n\tprivate readonly _canonicalUriProviders = new Map<string, vscode.CanonicalUriProvider>();\n\n\t// called by ext host\n\tregisterCanonicalUriProvider(scheme: string, provider: vscode.CanonicalUriProvider) {\n\t\tif (this._canonicalUriProviders.has(scheme)) {\n\t\t\tthrow new Error(`A provider has already been registered for scheme ${scheme}`);\n\t\t}\n\n\t\tthis._canonicalUriProviders.set(scheme, provider);\n\t\tconst outgoingScheme = this._uriTransformerService.transformOutgoingScheme(scheme);\n\t\tconst handle = this._providerHandlePool++;\n\t\tthis._proxy.$registerCanonicalUriProvider(handle, outgoingScheme);\n\n\t\treturn toDisposable(() => {\n\t\t\tthis._canonicalUriProviders.delete(scheme);\n\t\t\tthis._proxy.$unregisterCanonicalUriProvider(handle);\n\t\t});\n\t}\n\n\tasync provideCanonicalUri(uri: URI, options: vscode.CanonicalUriRequestOptions, cancellationToken: CancellationToken): Promise<URI | undefined> {\n\t\tconst provider = this._canonicalUriProviders.get(uri.scheme);\n\t\tif (!provider) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst result = await provider.provideCanonicalUri?.(URI.revive(uri), options, cancellationToken);\n\t\tif (!result) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t// called by main thread\n\tasync $provideCanonicalUri(uri: UriComponents, targetScheme: string, cancellationToken: CancellationToken): Promise<UriComponents | undefined> {\n\t\treturn this.provideCanonicalUri(URI.revive(uri), { targetScheme }, cancellationToken);\n\t}\n\n\t// --- encodings ---\n\n\tasync decode(content: Uint8Array, args?: { uri?: vscode.Uri; encoding?: string }): Promise<string> {\n\t\tconst [uri, opts] = this.toEncodeDecodeParameters(args);\n\t\tconst options = await this._proxy.$resolveDecoding(uri, opts);\n\n\t\tconst stream = (await toDecodeStream(bufferToStream(VSBuffer.wrap(content)), {\n\t\t\t...options,\n\t\t\tacceptTextOnly: true,\n\t\t\toverwriteEncoding: detectedEncoding => {\n\t\t\t\tif (detectedEncoding === null || detectedEncoding === options.preferredEncoding) {\n\t\t\t\t\t// Prevent another roundtrip to the main thread\n\t\t\t\t\t// if the detected encoding is null or the same\n\t\t\t\t\t// as the preferred encoding\n\t\t\t\t\treturn Promise.resolve(options.preferredEncoding);\n\t\t\t\t}\n\n\t\t\t\treturn this._proxy.$validateDetectedEncoding(uri, detectedEncoding, opts);\n\t\t\t},\n\t\t})).stream;\n\n\t\treturn consumeStream(stream, chunks => chunks.join(''));\n\t}\n\n\tasync encode(content: string, args?: { uri?: vscode.Uri; encoding?: string }): Promise<Uint8Array> {\n\t\tconst [uri, options] = this.toEncodeDecodeParameters(args);\n\t\tconst { encoding, addBOM } = await this._proxy.$resolveEncoding(uri, options);\n\n\t\t// when encoding is standard skip encoding step\n\t\tif (encoding === UTF8 && !addBOM) {\n\t\t\treturn VSBuffer.fromString(content).buffer;\n\t\t}\n\n\t\t// otherwise create encoded readable\n\t\tconst res = await toEncodeReadable(stringToSnapshot(content), encoding, { addBOM });\n\t\treturn readableToBuffer(res).buffer;\n\t}\n\n\tprivate toEncodeDecodeParameters(opts?: { uri?: vscode.Uri; encoding?: string }): [UriComponents | undefined, { encoding: string } | undefined] {\n\t\tconst uri = isUriComponents(opts?.uri) ? opts.uri : undefined;\n\t\tconst encoding = typeof opts?.encoding === 'string' ? opts.encoding : undefined;\n\n\t\treturn [uri, encoding ? { encoding } : undefined];\n\t}\n}\n\nexport const IExtHostWorkspace = createDecorator<IExtHostWorkspace>('IExtHostWorkspace');\nexport interface IExtHostWorkspace extends ExtHostWorkspace, ExtHostWorkspaceShape, IExtHostWorkspaceProvider { }\n\nfunction parseSearchExcludeInclude(include: string | IRelativePatternDto | undefined | null): { pattern: string; folder?: URI } | undefined {\n\tlet pattern: string | undefined;\n\tlet includeFolder: URI | undefined;\n\tif (include) {\n\t\tif (typeof include === 'string') {\n\t\t\tpattern = include;\n\t\t} else {\n\t\t\tpattern = include.pattern;\n\t\t\tincludeFolder = URI.revive(include.baseUri);\n\t\t}\n\n\t\treturn {\n\t\t\tpattern,\n\t\t\tfolder: includeFolder\n\t\t};\n\t}\n\treturn undefined;\n}\n\ninterface IExtensionListener<E> {\n\textension: IExtensionDescription;\n\t(e: E): any;\n}\n\nfunction globsToISearchPatternBuilder(excludes: vscode.GlobPattern[] | undefined): ISearchPatternBuilder<URI>[] {\n\treturn (\n\t\texcludes?.map((exclude): ISearchPatternBuilder<URI> | undefined => {\n\t\t\tif (typeof exclude === 'string') {\n\t\t\t\tif (exclude === '') {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tpattern: exclude,\n\t\t\t\t\turi: undefined\n\t\t\t\t} satisfies ISearchPatternBuilder<URI>;\n\t\t\t} else {\n\t\t\t\tconst parsedExclude = parseSearchExcludeInclude(exclude);\n\t\t\t\tif (!parsedExclude) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tpattern: parsedExclude.pattern,\n\t\t\t\t\turi: parsedExclude.folder\n\t\t\t\t} satisfies ISearchPatternBuilder<URI>;\n\t\t\t}\n\t\t}) ?? []\n\t).filter((e): e is ISearchPatternBuilder<URI> => !!e);\n}\n"]}