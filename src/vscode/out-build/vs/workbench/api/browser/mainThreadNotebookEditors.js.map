{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadNotebookEditors.ts","vs/workbench/api/browser/mainThreadNotebookEditors.ts"],"names":[],"mappings":"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","file":"mainThreadNotebookEditors.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\nimport { equals } from '../../../base/common/objects.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { EditorActivation } from '../../../platform/editor/common/editor.js';\nimport { getNotebookEditorFromEditorPane, INotebookEditor, INotebookEditorOptions } from '../../contrib/notebook/browser/notebookBrowser.js';\nimport { INotebookEditorService } from '../../contrib/notebook/browser/services/notebookEditorService.js';\nimport { ICellRange } from '../../contrib/notebook/common/notebookRange.js';\nimport { columnToEditorGroup, editorGroupToColumn } from '../../services/editor/common/editorGroupColumn.js';\nimport { IEditorGroupsService } from '../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../services/editor/common/editorService.js';\nimport { IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostNotebookEditorsShape, INotebookDocumentShowOptions, INotebookEditorViewColumnInfo, MainThreadNotebookEditorsShape, NotebookEditorRevealType } from '../common/extHost.protocol.js';\n\nclass MainThreadNotebook {\n\n\tconstructor(\n\t\treadonly editor: INotebookEditor,\n\t\treadonly disposables: DisposableStore\n\t) { }\n\n\tdispose() {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nexport class MainThreadNotebookEditors implements MainThreadNotebookEditorsShape {\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate readonly _proxy: ExtHostNotebookEditorsShape;\n\tprivate readonly _mainThreadEditors = new Map<string, MainThreadNotebook>();\n\n\tprivate _currentViewColumnInfo?: INotebookEditorViewColumnInfo;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@INotebookEditorService private readonly _notebookEditorService: INotebookEditorService,\n\t\t@IEditorGroupsService private readonly _editorGroupService: IEditorGroupsService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostNotebookEditors);\n\n\t\tthis._editorService.onDidActiveEditorChange(() => this._updateEditorViewColumns(), this, this._disposables);\n\t\tthis._editorGroupService.onDidRemoveGroup(() => this._updateEditorViewColumns(), this, this._disposables);\n\t\tthis._editorGroupService.onDidMoveGroup(() => this._updateEditorViewColumns(), this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tdispose(this._mainThreadEditors.values());\n\t}\n\n\thandleEditorsAdded(editors: readonly INotebookEditor[]): void {\n\n\t\tfor (const editor of editors) {\n\n\t\t\tconst editorDisposables = new DisposableStore();\n\t\t\teditorDisposables.add(editor.onDidChangeVisibleRanges(() => {\n\t\t\t\tthis._proxy.$acceptEditorPropertiesChanged(editor.getId(), { visibleRanges: { ranges: editor.visibleRanges } });\n\t\t\t}));\n\n\t\t\teditorDisposables.add(editor.onDidChangeSelection(() => {\n\t\t\t\tthis._proxy.$acceptEditorPropertiesChanged(editor.getId(), { selections: { selections: editor.getSelections() } });\n\t\t\t}));\n\n\t\t\tconst wrapper = new MainThreadNotebook(editor, editorDisposables);\n\t\t\tthis._mainThreadEditors.set(editor.getId(), wrapper);\n\t\t}\n\t}\n\n\thandleEditorsRemoved(editorIds: readonly string[]): void {\n\t\tfor (const id of editorIds) {\n\t\t\tthis._mainThreadEditors.get(id)?.dispose();\n\t\t\tthis._mainThreadEditors.delete(id);\n\t\t}\n\t}\n\n\tprivate _updateEditorViewColumns(): void {\n\t\tconst result: INotebookEditorViewColumnInfo = Object.create(null);\n\t\tfor (const editorPane of this._editorService.visibleEditorPanes) {\n\t\t\tconst candidate = getNotebookEditorFromEditorPane(editorPane);\n\t\t\tif (candidate && this._mainThreadEditors.has(candidate.getId())) {\n\t\t\t\tresult[candidate.getId()] = editorGroupToColumn(this._editorGroupService, editorPane.group);\n\t\t\t}\n\t\t}\n\t\tif (!equals(result, this._currentViewColumnInfo)) {\n\t\t\tthis._currentViewColumnInfo = result;\n\t\t\tthis._proxy.$acceptEditorViewColumns(result);\n\t\t}\n\t}\n\n\tasync $tryShowNotebookDocument(resource: UriComponents, viewType: string, options: INotebookDocumentShowOptions): Promise<string> {\n\t\tconst editorOptions: INotebookEditorOptions = {\n\t\t\tcellSelections: options.selections,\n\t\t\tpreserveFocus: options.preserveFocus,\n\t\t\tpinned: options.pinned,\n\t\t\t// selection: options.selection,\n\t\t\t// preserve pre 1.38 behaviour to not make group active when preserveFocus: true\n\t\t\t// but make sure to restore the editor to fix https://github.com/microsoft/vscode/issues/79633\n\t\t\tactivation: options.preserveFocus ? EditorActivation.RESTORE : undefined,\n\t\t\tlabel: options.label,\n\t\t\toverride: viewType\n\t\t};\n\n\t\tconst editorPane = await this._editorService.openEditor({ resource: URI.revive(resource), options: editorOptions }, columnToEditorGroup(this._editorGroupService, this._configurationService, options.position));\n\t\tconst notebookEditor = getNotebookEditorFromEditorPane(editorPane);\n\n\t\tif (notebookEditor) {\n\t\t\treturn notebookEditor.getId();\n\t\t} else {\n\t\t\tthrow new Error(`Notebook Editor creation failure for document ${JSON.stringify(resource)}`);\n\t\t}\n\t}\n\n\tasync $tryRevealRange(id: string, range: ICellRange, revealType: NotebookEditorRevealType): Promise<void> {\n\t\tconst editor = this._notebookEditorService.getNotebookEditor(id);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tconst notebookEditor = editor;\n\t\tif (!notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (range.start >= notebookEditor.getLength()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = notebookEditor.cellAt(range.start);\n\n\t\tswitch (revealType) {\n\t\t\tcase NotebookEditorRevealType.Default:\n\t\t\t\treturn notebookEditor.revealCellRangeInView(range);\n\t\t\tcase NotebookEditorRevealType.InCenter:\n\t\t\t\treturn notebookEditor.revealInCenter(cell);\n\t\t\tcase NotebookEditorRevealType.InCenterIfOutsideViewport:\n\t\t\t\treturn notebookEditor.revealInCenterIfOutsideViewport(cell);\n\t\t\tcase NotebookEditorRevealType.AtTop:\n\t\t\t\treturn notebookEditor.revealInViewAtTop(cell);\n\t\t}\n\t}\n\n\t$trySetSelections(id: string, ranges: ICellRange[]): void {\n\t\tconst editor = this._notebookEditorService.getNotebookEditor(id);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\teditor.setSelections(ranges);\n\n\t\tif (ranges.length) {\n\t\t\teditor.setFocus({ start: ranges[0].start, end: ranges[0].start + 1 });\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\nimport { equals } from '../../../base/common/objects.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { EditorActivation } from '../../../platform/editor/common/editor.js';\nimport { getNotebookEditorFromEditorPane, INotebookEditor, INotebookEditorOptions } from '../../contrib/notebook/browser/notebookBrowser.js';\nimport { INotebookEditorService } from '../../contrib/notebook/browser/services/notebookEditorService.js';\nimport { ICellRange } from '../../contrib/notebook/common/notebookRange.js';\nimport { columnToEditorGroup, editorGroupToColumn } from '../../services/editor/common/editorGroupColumn.js';\nimport { IEditorGroupsService } from '../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../services/editor/common/editorService.js';\nimport { IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostNotebookEditorsShape, INotebookDocumentShowOptions, INotebookEditorViewColumnInfo, MainThreadNotebookEditorsShape, NotebookEditorRevealType } from '../common/extHost.protocol.js';\n\nclass MainThreadNotebook {\n\n\tconstructor(\n\t\treadonly editor: INotebookEditor,\n\t\treadonly disposables: DisposableStore\n\t) { }\n\n\tdispose() {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nexport class MainThreadNotebookEditors implements MainThreadNotebookEditorsShape {\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate readonly _proxy: ExtHostNotebookEditorsShape;\n\tprivate readonly _mainThreadEditors = new Map<string, MainThreadNotebook>();\n\n\tprivate _currentViewColumnInfo?: INotebookEditorViewColumnInfo;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@INotebookEditorService private readonly _notebookEditorService: INotebookEditorService,\n\t\t@IEditorGroupsService private readonly _editorGroupService: IEditorGroupsService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostNotebookEditors);\n\n\t\tthis._editorService.onDidActiveEditorChange(() => this._updateEditorViewColumns(), this, this._disposables);\n\t\tthis._editorGroupService.onDidRemoveGroup(() => this._updateEditorViewColumns(), this, this._disposables);\n\t\tthis._editorGroupService.onDidMoveGroup(() => this._updateEditorViewColumns(), this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tdispose(this._mainThreadEditors.values());\n\t}\n\n\thandleEditorsAdded(editors: readonly INotebookEditor[]): void {\n\n\t\tfor (const editor of editors) {\n\n\t\t\tconst editorDisposables = new DisposableStore();\n\t\t\teditorDisposables.add(editor.onDidChangeVisibleRanges(() => {\n\t\t\t\tthis._proxy.$acceptEditorPropertiesChanged(editor.getId(), { visibleRanges: { ranges: editor.visibleRanges } });\n\t\t\t}));\n\n\t\t\teditorDisposables.add(editor.onDidChangeSelection(() => {\n\t\t\t\tthis._proxy.$acceptEditorPropertiesChanged(editor.getId(), { selections: { selections: editor.getSelections() } });\n\t\t\t}));\n\n\t\t\tconst wrapper = new MainThreadNotebook(editor, editorDisposables);\n\t\t\tthis._mainThreadEditors.set(editor.getId(), wrapper);\n\t\t}\n\t}\n\n\thandleEditorsRemoved(editorIds: readonly string[]): void {\n\t\tfor (const id of editorIds) {\n\t\t\tthis._mainThreadEditors.get(id)?.dispose();\n\t\t\tthis._mainThreadEditors.delete(id);\n\t\t}\n\t}\n\n\tprivate _updateEditorViewColumns(): void {\n\t\tconst result: INotebookEditorViewColumnInfo = Object.create(null);\n\t\tfor (const editorPane of this._editorService.visibleEditorPanes) {\n\t\t\tconst candidate = getNotebookEditorFromEditorPane(editorPane);\n\t\t\tif (candidate && this._mainThreadEditors.has(candidate.getId())) {\n\t\t\t\tresult[candidate.getId()] = editorGroupToColumn(this._editorGroupService, editorPane.group);\n\t\t\t}\n\t\t}\n\t\tif (!equals(result, this._currentViewColumnInfo)) {\n\t\t\tthis._currentViewColumnInfo = result;\n\t\t\tthis._proxy.$acceptEditorViewColumns(result);\n\t\t}\n\t}\n\n\tasync $tryShowNotebookDocument(resource: UriComponents, viewType: string, options: INotebookDocumentShowOptions): Promise<string> {\n\t\tconst editorOptions: INotebookEditorOptions = {\n\t\t\tcellSelections: options.selections,\n\t\t\tpreserveFocus: options.preserveFocus,\n\t\t\tpinned: options.pinned,\n\t\t\t// selection: options.selection,\n\t\t\t// preserve pre 1.38 behaviour to not make group active when preserveFocus: true\n\t\t\t// but make sure to restore the editor to fix https://github.com/microsoft/vscode/issues/79633\n\t\t\tactivation: options.preserveFocus ? EditorActivation.RESTORE : undefined,\n\t\t\tlabel: options.label,\n\t\t\toverride: viewType\n\t\t};\n\n\t\tconst editorPane = await this._editorService.openEditor({ resource: URI.revive(resource), options: editorOptions }, columnToEditorGroup(this._editorGroupService, this._configurationService, options.position));\n\t\tconst notebookEditor = getNotebookEditorFromEditorPane(editorPane);\n\n\t\tif (notebookEditor) {\n\t\t\treturn notebookEditor.getId();\n\t\t} else {\n\t\t\tthrow new Error(`Notebook Editor creation failure for document ${JSON.stringify(resource)}`);\n\t\t}\n\t}\n\n\tasync $tryRevealRange(id: string, range: ICellRange, revealType: NotebookEditorRevealType): Promise<void> {\n\t\tconst editor = this._notebookEditorService.getNotebookEditor(id);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tconst notebookEditor = editor;\n\t\tif (!notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (range.start >= notebookEditor.getLength()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = notebookEditor.cellAt(range.start);\n\n\t\tswitch (revealType) {\n\t\t\tcase NotebookEditorRevealType.Default:\n\t\t\t\treturn notebookEditor.revealCellRangeInView(range);\n\t\t\tcase NotebookEditorRevealType.InCenter:\n\t\t\t\treturn notebookEditor.revealInCenter(cell);\n\t\t\tcase NotebookEditorRevealType.InCenterIfOutsideViewport:\n\t\t\t\treturn notebookEditor.revealInCenterIfOutsideViewport(cell);\n\t\t\tcase NotebookEditorRevealType.AtTop:\n\t\t\t\treturn notebookEditor.revealInViewAtTop(cell);\n\t\t}\n\t}\n\n\t$trySetSelections(id: string, ranges: ICellRange[]): void {\n\t\tconst editor = this._notebookEditorService.getNotebookEditor(id);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\teditor.setSelections(ranges);\n\n\t\tif (ranges.length) {\n\t\t\teditor.setFocus({ start: ranges[0].start, end: ranges[0].start + 1 });\n\t\t}\n\t}\n}\n"]}