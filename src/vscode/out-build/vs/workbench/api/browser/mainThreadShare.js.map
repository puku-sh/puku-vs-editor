{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadShare.ts","vs/workbench/api/browser/mainThreadShare.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,iBAAiB,EAAE,MAAM,sCAAsC,CAAC;AACzE,OAAO,EAAe,OAAO,EAAE,MAAM,mCAAmC,CAAC;AACzE,OAAO,EAAE,GAAG,EAAE,MAAM,6BAA6B,CAAC;AAClD,OAAO,EAAE,cAAc,EAAyC,WAAW,EAAwB,MAAM,+BAA+B,CAAC;AACzI,OAAO,EAAkB,aAAa,EAAkB,MAAM,qCAAqC,CAAC;AACpG,OAAO,EAAmB,oBAAoB,EAAE,MAAM,sDAAsD,CAAC;AAGtG,IAAM,eAAe,GAArB,MAAM,eAAe;IAM3B,YACC,cAA+B,EAChB,YAA4C;QAA3B,iBAAY,GAAZ,YAAY,CAAe;QALpD,cAAS,GAAG,IAAI,GAAG,EAA0B,CAAC;QAC9C,wBAAmB,GAAG,IAAI,GAAG,EAAuB,CAAC;QAM5D,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;IACnE,CAAC;IAED,sBAAsB,CAAC,MAAc,EAAE,QAA8B,EAAE,EAAU,EAAE,KAAa,EAAE,QAAgB;QACjH,MAAM,QAAQ,GAAmB;YAChC,EAAE;YACF,KAAK;YACL,QAAQ;YACR,QAAQ;YACR,YAAY,EAAE,KAAK,EAAE,IAAoB,EAAE,EAAE;gBAC5C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;gBACpF,OAAO,OAAO,MAAM,KAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YACjE,CAAC;SACD,CAAC;QACF,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;QACrC,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;QACrE,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IAClD,CAAC;IAED,wBAAwB,CAAC,MAAc;QACtC,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;YAChC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/B,CAAC;QACD,IAAI,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;YAC1C,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACzC,CAAC;IACF,CAAC;IAED,OAAO;QACN,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;QACvB,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,CAAC;QAC3C,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC;IAClC,CAAC;CACD,CAAA;AA3CY,eAAe;IAD3B,oBAAoB,CAAC,WAAW,CAAC,eAAe,CAAC;IAS/C,WAAA,aAAa,CAAA;GARH,eAAe,CA2C3B","file":"mainThreadShare.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { IDisposable, dispose } from '../../../base/common/lifecycle.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ExtHostContext, ExtHostShareShape, IDocumentFilterDto, MainContext, MainThreadShareShape } from '../common/extHost.protocol.js';\nimport { IShareProvider, IShareService, IShareableItem } from '../../contrib/share/common/share.js';\nimport { IExtHostContext, extHostNamedCustomer } from '../../services/extensions/common/extHostCustomers.js';\n\n@extHostNamedCustomer(MainContext.MainThreadShare)\nexport class MainThreadShare implements MainThreadShareShape {\n\n\tprivate readonly proxy: ExtHostShareShape;\n\tprivate providers = new Map<number, IShareProvider>();\n\tprivate providerDisposables = new Map<number, IDisposable>();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IShareService private readonly shareService: IShareService\n\t) {\n\t\tthis.proxy = extHostContext.getProxy(ExtHostContext.ExtHostShare);\n\t}\n\n\t$registerShareProvider(handle: number, selector: IDocumentFilterDto[], id: string, label: string, priority: number): void {\n\t\tconst provider: IShareProvider = {\n\t\t\tid,\n\t\t\tlabel,\n\t\t\tselector,\n\t\t\tpriority,\n\t\t\tprovideShare: async (item: IShareableItem) => {\n\t\t\t\tconst result = await this.proxy.$provideShare(handle, item, CancellationToken.None);\n\t\t\t\treturn typeof result === 'string' ? result : URI.revive(result);\n\t\t\t}\n\t\t};\n\t\tthis.providers.set(handle, provider);\n\t\tconst disposable = this.shareService.registerShareProvider(provider);\n\t\tthis.providerDisposables.set(handle, disposable);\n\t}\n\n\t$unregisterShareProvider(handle: number): void {\n\t\tif (this.providers.has(handle)) {\n\t\t\tthis.providers.delete(handle);\n\t\t}\n\t\tif (this.providerDisposables.has(handle)) {\n\t\t\tthis.providerDisposables.delete(handle);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.providers.clear();\n\t\tdispose(this.providerDisposables.values());\n\t\tthis.providerDisposables.clear();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { IDisposable, dispose } from '../../../base/common/lifecycle.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ExtHostContext, ExtHostShareShape, IDocumentFilterDto, MainContext, MainThreadShareShape } from '../common/extHost.protocol.js';\nimport { IShareProvider, IShareService, IShareableItem } from '../../contrib/share/common/share.js';\nimport { IExtHostContext, extHostNamedCustomer } from '../../services/extensions/common/extHostCustomers.js';\n\n@extHostNamedCustomer(MainContext.MainThreadShare)\nexport class MainThreadShare implements MainThreadShareShape {\n\n\tprivate readonly proxy: ExtHostShareShape;\n\tprivate providers = new Map<number, IShareProvider>();\n\tprivate providerDisposables = new Map<number, IDisposable>();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IShareService private readonly shareService: IShareService\n\t) {\n\t\tthis.proxy = extHostContext.getProxy(ExtHostContext.ExtHostShare);\n\t}\n\n\t$registerShareProvider(handle: number, selector: IDocumentFilterDto[], id: string, label: string, priority: number): void {\n\t\tconst provider: IShareProvider = {\n\t\t\tid,\n\t\t\tlabel,\n\t\t\tselector,\n\t\t\tpriority,\n\t\t\tprovideShare: async (item: IShareableItem) => {\n\t\t\t\tconst result = await this.proxy.$provideShare(handle, item, CancellationToken.None);\n\t\t\t\treturn typeof result === 'string' ? result : URI.revive(result);\n\t\t\t}\n\t\t};\n\t\tthis.providers.set(handle, provider);\n\t\tconst disposable = this.shareService.registerShareProvider(provider);\n\t\tthis.providerDisposables.set(handle, disposable);\n\t}\n\n\t$unregisterShareProvider(handle: number): void {\n\t\tif (this.providers.has(handle)) {\n\t\t\tthis.providers.delete(handle);\n\t\t}\n\t\tif (this.providerDisposables.has(handle)) {\n\t\t\tthis.providerDisposables.delete(handle);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.providers.clear();\n\t\tdispose(this.providerDisposables.values());\n\t\tthis.providerDisposables.clear();\n\t}\n}\n"]}