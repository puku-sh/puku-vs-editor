{"version":3,"sources":["vs/workbench/api/browser/statusBarExtensionPoint.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAGhG,OAAO,EAAE,eAAe,EAAe,YAAY,EAAE,MAAM,mCAAmC,CAAC;AAC/F,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,eAAe,EAAE,MAAM,yDAAyD,CAAC;AAC1F,OAAO,EAAE,oBAAoB,EAAE,MAAM,gDAAgD,CAAC;AACtF,OAAO,EAAE,kBAAkB,EAAE,MAAM,wDAAwD,CAAC;AAC5F,OAAO,EAAE,iBAAiB,EAAiK,MAAM,+CAA+C,CAAC;AAGjP,OAAO,EAA6B,0BAA0B,EAAE,MAAM,yDAAyD,CAAC;AAChI,OAAO,EAAmB,gBAAgB,EAAE,MAAM,qCAAqC,CAAC;AACxF,OAAO,EAAE,mBAAmB,EAAE,MAAM,oCAAoC,CAAC;AACzE,OAAO,EAAE,IAAI,EAAE,MAAM,8BAA8B,CAAC;AACpD,OAAO,EAAS,OAAO,EAAE,MAAM,+BAA+B,CAAC;AAC/D,OAAO,EAAqB,iBAAiB,EAAE,MAAM,sDAAsD,CAAC;AAC5G,OAAO,EAAE,QAAQ,EAAE,MAAM,kCAAkC,CAAC;AAC5D,OAAO,EAAE,mBAAmB,EAAE,MAAM,mDAAmD,CAAC;AACxF,OAAO,EAAE,yBAAyB,EAAE,MAAM,2BAA2B,CAAC;AACtE,OAAO,EAAE,gCAAgC,EAAE,kCAAkC,EAAE,MAAM,uBAAuB,CAAC;AAI7G,cAAc;AAEd,MAAM,CAAC,MAAM,8BAA8B,GAAG,eAAe,CAAiC,gCAAgC,CAAC,CAAC;AAahI,MAAM,CAAN,IAAkB,mBAGjB;AAHD,WAAkB,mBAAmB;IACpC,uEAAS,CAAA;IACT,uEAAS,CAAA;AACV,CAAC,EAHiB,mBAAmB,KAAnB,mBAAmB,QAGpC;AAeD,IAAM,6BAA6B,GAAnC,MAAM,6BAA6B;IASlC,YAA+B,iBAAqD;QAApC,sBAAiB,GAAjB,iBAAiB,CAAmB;QALnE,aAAQ,GAAmK,IAAI,GAAG,EAAE,CAAC;QAErL,iBAAY,GAAG,IAAI,OAAO,EAAsC,CAAC;QACzE,gBAAW,GAA8C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;IAEF,CAAC;IAEzF,OAAO;QACN,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;IAC7B,CAAC;IAED,gBAAgB,CAAC,OAAe,EAC/B,EAAU,EAAE,WAA+B,EAAE,IAAY,EAAE,IAAY,EACvE,OAAkF,EAClF,OAA4B,EAAE,KAAsC,EAAE,eAAuC,EAC7G,SAAkB,EAAE,QAA4B,EAAE,wBAA+D;QAEjH,oEAAoE;QACpE,IAAI,SAAiB,CAAC;QACtB,IAAI,IAAI,GAAuB,SAAS,CAAC;QACzC,IAAI,wBAAwB,EAAE,CAAC;YAC9B,SAAS,GAAG,wBAAwB,CAAC,KAAK,CAAC;YAC3C,IAAI,GAAG,wBAAwB,CAAC,IAAI,CAAC;QACtC,CAAC;aAAM,CAAC;YACP,SAAS,GAAG,mBAAmB,CAAC,IAAI,CAAC,CAAC;YACtC,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,gBAAgB,CAAC,OAAO,CAAC,EAAE,CAAC;gBAC9D,MAAM,aAAa,GAAG,OAAO,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC;gBAC5E,SAAS,IAAI,KAAK,aAAa,EAAE,CAAC;YACnC,CAAC;QACF,CAAC;QACD,IAAI,IAAI,GAAmC,SAAS,CAAC;QACrD,QAAQ,eAAe,EAAE,EAAE,EAAE,CAAC;YAC7B,KAAK,gCAAgC,CAAC;YACtC,KAAK,kCAAkC;gBACtC,wGAAwG;gBACxG,IAAI,GAAG,eAAe,CAAC,EAAE,KAAK,gCAAgC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;gBACrF,KAAK,GAAG,SAAS,CAAC;gBAClB,eAAe,GAAG,SAAS,CAAC;QAC9B,CAAC;QACD,MAAM,KAAK,GAAoB,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,eAAe,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;QAE5H,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,CAAC;YACrC,QAAQ,GAAG,CAAC,CAAC;QACd,CAAC;QAED,IAAI,SAAS,GAAG,SAAS,CAAC,CAAC,iCAAyB,CAAC,iCAAyB,CAAC;QAE/E,iEAAiE;QACjE,MAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACjD,IAAI,aAAa,EAAE,CAAC;YACnB,SAAS,GAAG,aAAa,CAAC,SAAS,CAAC;YACpC,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC;QACnC,CAAC;QAED,mCAAmC;QACnC,IAAI,CAAC,aAAa,EAAE,CAAC;YACpB,IAAI,aAA+C,CAAC;YACpD,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE,CAAC;gBACrC,mEAAmE;gBACnE,iEAAiE;gBACjE,gCAAgC;gBAChC,wDAAwD;gBACxD,wDAAwD;gBACxD,aAAa,GAAG,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;YACrE,CAAC;iBAAM,CAAC;gBACP,aAAa,GAAG,QAAQ,CAAC;YAC1B,CAAC;YAED,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,EAAE,SAAS,EAAE,aAAa,CAAC,CAAC;YACtF,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE;gBAC1B,QAAQ;gBACR,KAAK;gBACL,SAAS;gBACT,QAAQ;gBACR,UAAU,EAAE,YAAY,CAAC,GAAG,EAAE;oBAC7B,QAAQ,CAAC,OAAO,EAAE,CAAC;oBACnB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBAC9B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;gBAC9C,CAAC,CAAC;aACF,CAAC,CAAC;YAEH,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,OAAO,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;YAC7E,6CAAqC;QAEtC,CAAC;aAAM,CAAC;YACP,mBAAmB;YACnB,aAAa,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACrC,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;YAC5B,6CAAqC;QACtC,CAAC;IACF,CAAC;IAED,UAAU,CAAC,OAAe;QACzB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAC/B,CAAC;IAED,UAAU;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAChC,CAAC;CACD,CAAA;AA1GK,6BAA6B;IASrB,WAAA,iBAAiB,CAAA;GATzB,6BAA6B,CA0GlC;AAED,iBAAiB,CAAC,8BAA8B,EAAE,6BAA6B,oCAA4B,CAAC;AAM5G,SAAS,6BAA6B,CAAC,SAAkB;IACxD,MAAM,GAAG,GAAG,SAAyC,CAAC;IACtD,OAAO,CAAC,OAAO,GAAG,CAAC,EAAE,KAAK,QAAQ,IAAI,GAAG,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;WACpD,OAAO,GAAG,CAAC,IAAI,KAAK,QAAQ;WAC5B,OAAO,GAAG,CAAC,IAAI,KAAK,QAAQ;WAC5B,CAAC,GAAG,CAAC,SAAS,KAAK,MAAM,IAAI,GAAG,CAAC,SAAS,KAAK,OAAO,CAAC;WACvD,CAAC,GAAG,CAAC,OAAO,KAAK,SAAS,IAAI,OAAO,GAAG,CAAC,OAAO,KAAK,QAAQ,CAAC;WAC9D,CAAC,GAAG,CAAC,OAAO,KAAK,SAAS,IAAI,OAAO,GAAG,CAAC,OAAO,KAAK,QAAQ,CAAC;WAC9D,CAAC,GAAG,CAAC,QAAQ,KAAK,SAAS,IAAI,OAAO,GAAG,CAAC,QAAQ,KAAK,QAAQ,CAAC;WAChE,CAAC,GAAG,CAAC,wBAAwB,KAAK,SAAS,IAAI,0BAA0B,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,CAC1G;AACH,CAAC;AAED,MAAM,mBAAmB,GAAG;IAC3B,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE,CAAC,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,MAAM,CAAC;IAC7C,UAAU,EAAE;QACX,EAAE,EAAE;YACH,IAAI,EAAE,QAAQ;YACd,mBAAmB,EAAE,QAAQ,CAAC,IAAI,EAAE,IAA4K,CAAC;SACjN;QACD,IAAI,EAAE;YACL,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAM,EAAE,IAA8M,CAAC;SAC7O;QACD,IAAI,EAAE;YACL,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAM,EAAE,IAAgI,CAAC;SAC/J;QACD,OAAO,EAAE;YACR,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAS,EAAE,IAAiC,CAAC;SACnE;QACD,OAAO,EAAE;YACR,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAS,EAAE,IAA8D,CAAC;SAChG;QACD,SAAS,EAAE;YACV,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC;YACvB,WAAW,EAAE,QAAQ,CAAC,IAAW,EAAE,IAAwC,CAAC;SAC5E;QACD,QAAQ,EAAE;YACT,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAU,EAAE,IAAqG,CAAC;SACxI;QACD,wBAAwB,EAAE;YACzB,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAA0B,EAAE,IAAkF,CAAC;YACrI,QAAQ,EAAE,CAAC,OAAO,CAAC;YACnB,UAAU,EAAE;gBACX,IAAI,EAAE;oBACL,IAAI,EAAE,QAAQ;oBACd,WAAW,EAAE,QAAQ,CAAC,IAA+B,EAAE,IAAwK,CAAC;iBAChO;gBACD,KAAK,EAAE;oBACN,IAAI,EAAE,QAAQ;oBACd,WAAW,EAAE,QAAQ,CAAC,IAAgC,EAAE,IAAwE,CAAC;iBACjI;aACD;SACD;KACD;CAC8B,CAAC;AAEjC,MAAM,oBAAoB,GAAgB;IACzC,WAAW,EAAE,QAAQ,CAAC,IAA6C,EAAE,IAAsC,CAAC;IAC5G,KAAK,EAAE;QACN,mBAAmB;QACnB;YACC,IAAI,EAAE,OAAO;YACb,KAAK,EAAE,mBAAmB;SAC1B;KACD;CACD,CAAC;AAEF,MAAM,4BAA4B,GAAG,kBAAkB,CAAC,sBAAsB,CAAgE;IAC7I,cAAc,EAAE,gBAAgB;IAChC,UAAU,EAAE,oBAAoB;CAChC,CAAC,CAAC;AAEI,IAAM,4BAA4B,GAAlC,MAAM,4BAA4B;IAExC,YAA4C,qBAAqD;QAEhG,MAAM,aAAa,GAAG,IAAI,eAAe,EAAE,CAAC;QAE5C,4BAA4B,CAAC,UAAU,CAAC,CAAC,UAAU,EAAE,EAAE;YAEtD,aAAa,CAAC,KAAK,EAAE,CAAC;YAEtB,KAAK,MAAM,KAAK,IAAI,UAAU,EAAE,CAAC;gBAEhC,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,WAAW,EAAE,uBAAuB,CAAC,EAAE,CAAC;oBACvE,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,4BAA4B,CAAC,IAAI,kBAAkB,CAAC,CAAC;oBAClF,SAAS;gBACV,CAAC;gBAED,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,KAAK,CAAC;gBAEnC,KAAK,MAAM,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;oBAC9C,IAAI,CAAC,6BAA6B,CAAC,SAAS,CAAC,EAAE,CAAC;wBAC/C,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAS,EAAE,IAAuC,CAAC,CAAC,CAAC;wBAC9E,SAAS;oBACV,CAAC;oBAED,MAAM,UAAU,GAAG,yBAAyB,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;oBAEzF,MAAM,IAAI,GAAG,qBAAqB,CAAC,gBAAgB,CAClD,UAAU,EACV,UAAU,EACV,mBAAmB,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,CAAC,EACvD,SAAS,CAAC,IAAI,IAAI,KAAK,CAAC,WAAW,CAAC,WAAW,IAAI,KAAK,CAAC,WAAW,CAAC,IAAI,EACzE,SAAS,CAAC,IAAI,EACd,SAAS,CAAC,OAAO,EACjB,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,SAAS,CAAC,OAAO,EAAE,KAAK,EAAE,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS,EAChF,SAAS,EAAE,SAAS,EACpB,SAAS,CAAC,SAAS,KAAK,MAAM,EAC9B,SAAS,CAAC,QAAQ,EAClB,SAAS,CAAC,wBAAwB,CAClC,CAAC;oBAEF,IAAI,IAAI,0CAAkC,EAAE,CAAC;wBAC5C,aAAa,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,qBAAqB,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBACrF,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;CACD,CAAA;AAhDY,4BAA4B;IAE3B,WAAA,8BAA8B,CAAA;GAF/B,4BAA4B,CAgDxC","file":"statusBarExtensionPoint.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IJSONSchema, TypeFromJsonSchema } from '../../../base/common/jsonSchema.js';\nimport { DisposableStore, IDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { localize } from '../../../nls.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport { ExtensionsRegistry } from '../../services/extensions/common/extensionsRegistry.js';\nimport { IStatusbarService, StatusbarAlignment as MainThreadStatusBarAlignment, IStatusbarEntryAccessor, IStatusbarEntry, StatusbarAlignment, IStatusbarEntryPriority, StatusbarEntryKind } from '../../services/statusbar/browser/statusbar.js';\nimport { ThemeColor } from '../../../base/common/themables.js';\nimport { Command } from '../../../editor/common/languages.js';\nimport { IAccessibilityInformation, isAccessibilityInformation } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMarkdownString, isMarkdownString } from '../../../base/common/htmlContent.js';\nimport { getCodiconAriaLabel } from '../../../base/common/iconLabels.js';\nimport { hash } from '../../../base/common/hash.js';\nimport { Event, Emitter } from '../../../base/common/event.js';\nimport { InstantiationType, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { ExtensionIdentifier } from '../../../platform/extensions/common/extensions.js';\nimport { asStatusBarItemIdentifier } from '../common/extHostTypes.js';\nimport { STATUS_BAR_ERROR_ITEM_BACKGROUND, STATUS_BAR_WARNING_ITEM_BACKGROUND } from '../../common/theme.js';\nimport { IManagedHoverTooltipMarkdownString } from '../../../base/browser/ui/hover/hover.js';\n\n\n// --- service\n\nexport const IExtensionStatusBarItemService = createDecorator<IExtensionStatusBarItemService>('IExtensionStatusBarItemService');\n\nexport interface IExtensionStatusBarItemChangeEvent {\n\treadonly added?: ExtensionStatusBarEntry;\n\treadonly removed?: string;\n}\n\nexport type ExtensionStatusBarEntry = [string, {\n\tentry: IStatusbarEntry;\n\talignment: MainThreadStatusBarAlignment;\n\tpriority: number;\n}];\n\nexport const enum StatusBarUpdateKind {\n\tDidDefine,\n\tDidUpdate\n}\n\nexport interface IExtensionStatusBarItemService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChange: Event<IExtensionStatusBarItemChangeEvent>;\n\n\tsetOrUpdateEntry(id: string, statusId: string, extensionId: string | undefined, name: string, text: string, tooltip: IMarkdownString | string | undefined | IManagedHoverTooltipMarkdownString, command: Command | undefined, color: string | ThemeColor | undefined, backgroundColor: ThemeColor | undefined, alignLeft: boolean, priority: number | undefined, accessibilityInformation: IAccessibilityInformation | undefined): StatusBarUpdateKind;\n\n\tunsetEntry(id: string): void;\n\n\tgetEntries(): Iterable<ExtensionStatusBarEntry>;\n}\n\n\nclass ExtensionStatusBarItemService implements IExtensionStatusBarItemService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _entries: Map<string, { accessor: IStatusbarEntryAccessor; entry: IStatusbarEntry; alignment: MainThreadStatusBarAlignment; priority: number; disposable: IDisposable }> = new Map();\n\n\tprivate readonly _onDidChange = new Emitter<IExtensionStatusBarItemChangeEvent>();\n\treadonly onDidChange: Event<IExtensionStatusBarItemChangeEvent> = this._onDidChange.event;\n\n\tconstructor(@IStatusbarService private readonly _statusbarService: IStatusbarService) { }\n\n\tdispose(): void {\n\t\tthis._entries.forEach(entry => entry.accessor.dispose());\n\t\tthis._entries.clear();\n\t\tthis._onDidChange.dispose();\n\t}\n\n\tsetOrUpdateEntry(entryId: string,\n\t\tid: string, extensionId: string | undefined, name: string, text: string,\n\t\ttooltip: IMarkdownString | string | undefined | IManagedHoverTooltipMarkdownString,\n\t\tcommand: Command | undefined, color: string | ThemeColor | undefined, backgroundColor: ThemeColor | undefined,\n\t\talignLeft: boolean, priority: number | undefined, accessibilityInformation: IAccessibilityInformation | undefined\n\t): StatusBarUpdateKind {\n\t\t// if there are icons in the text use the tooltip for the aria label\n\t\tlet ariaLabel: string;\n\t\tlet role: string | undefined = undefined;\n\t\tif (accessibilityInformation) {\n\t\t\tariaLabel = accessibilityInformation.label;\n\t\t\trole = accessibilityInformation.role;\n\t\t} else {\n\t\t\tariaLabel = getCodiconAriaLabel(text);\n\t\t\tif (typeof tooltip === 'string' || isMarkdownString(tooltip)) {\n\t\t\t\tconst tooltipString = typeof tooltip === 'string' ? tooltip : tooltip.value;\n\t\t\t\tariaLabel += `, ${tooltipString}`;\n\t\t\t}\n\t\t}\n\t\tlet kind: StatusbarEntryKind | undefined = undefined;\n\t\tswitch (backgroundColor?.id) {\n\t\t\tcase STATUS_BAR_ERROR_ITEM_BACKGROUND:\n\t\t\tcase STATUS_BAR_WARNING_ITEM_BACKGROUND:\n\t\t\t\t// override well known colors that map to status entry kinds to support associated themable hover colors\n\t\t\t\tkind = backgroundColor.id === STATUS_BAR_ERROR_ITEM_BACKGROUND ? 'error' : 'warning';\n\t\t\t\tcolor = undefined;\n\t\t\t\tbackgroundColor = undefined;\n\t\t}\n\t\tconst entry: IStatusbarEntry = { name, text, tooltip, command, color, backgroundColor, ariaLabel, role, kind, extensionId };\n\n\t\tif (typeof priority === 'undefined') {\n\t\t\tpriority = 0;\n\t\t}\n\n\t\tlet alignment = alignLeft ? StatusbarAlignment.LEFT : StatusbarAlignment.RIGHT;\n\n\t\t// alignment and priority can only be set once (at creation time)\n\t\tconst existingEntry = this._entries.get(entryId);\n\t\tif (existingEntry) {\n\t\t\talignment = existingEntry.alignment;\n\t\t\tpriority = existingEntry.priority;\n\t\t}\n\n\t\t// Create new entry if not existing\n\t\tif (!existingEntry) {\n\t\t\tlet entryPriority: number | IStatusbarEntryPriority;\n\t\t\tif (typeof extensionId === 'string') {\n\t\t\t\t// We cannot enforce unique priorities across all extensions, so we\n\t\t\t\t// use the extension identifier as a secondary sort key to reduce\n\t\t\t\t// the likelyhood of collisions.\n\t\t\t\t// See https://github.com/microsoft/vscode/issues/177835\n\t\t\t\t// See https://github.com/microsoft/vscode/issues/123827\n\t\t\t\tentryPriority = { primary: priority, secondary: hash(extensionId) };\n\t\t\t} else {\n\t\t\t\tentryPriority = priority;\n\t\t\t}\n\n\t\t\tconst accessor = this._statusbarService.addEntry(entry, id, alignment, entryPriority);\n\t\t\tthis._entries.set(entryId, {\n\t\t\t\taccessor,\n\t\t\t\tentry,\n\t\t\t\talignment,\n\t\t\t\tpriority,\n\t\t\t\tdisposable: toDisposable(() => {\n\t\t\t\t\taccessor.dispose();\n\t\t\t\t\tthis._entries.delete(entryId);\n\t\t\t\t\tthis._onDidChange.fire({ removed: entryId });\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tthis._onDidChange.fire({ added: [entryId, { entry, alignment, priority }] });\n\t\t\treturn StatusBarUpdateKind.DidDefine;\n\n\t\t} else {\n\t\t\t// Otherwise update\n\t\t\texistingEntry.accessor.update(entry);\n\t\t\texistingEntry.entry = entry;\n\t\t\treturn StatusBarUpdateKind.DidUpdate;\n\t\t}\n\t}\n\n\tunsetEntry(entryId: string): void {\n\t\tthis._entries.get(entryId)?.disposable.dispose();\n\t\tthis._entries.delete(entryId);\n\t}\n\n\tgetEntries(): Iterable<[string, { entry: IStatusbarEntry; alignment: MainThreadStatusBarAlignment; priority: number }]> {\n\t\treturn this._entries.entries();\n\t}\n}\n\nregisterSingleton(IExtensionStatusBarItemService, ExtensionStatusBarItemService, InstantiationType.Delayed);\n\n// --- extension point and reading of it\n\ntype IUserFriendlyStatusItemEntry = TypeFromJsonSchema<typeof statusBarItemSchema>;\n\nfunction isUserFriendlyStatusItemEntry(candidate: unknown): candidate is IUserFriendlyStatusItemEntry {\n\tconst obj = candidate as IUserFriendlyStatusItemEntry;\n\treturn (typeof obj.id === 'string' && obj.id.length > 0)\n\t\t&& typeof obj.name === 'string'\n\t\t&& typeof obj.text === 'string'\n\t\t&& (obj.alignment === 'left' || obj.alignment === 'right')\n\t\t&& (obj.command === undefined || typeof obj.command === 'string')\n\t\t&& (obj.tooltip === undefined || typeof obj.tooltip === 'string')\n\t\t&& (obj.priority === undefined || typeof obj.priority === 'number')\n\t\t&& (obj.accessibilityInformation === undefined || isAccessibilityInformation(obj.accessibilityInformation))\n\t\t;\n}\n\nconst statusBarItemSchema = {\n\ttype: 'object',\n\trequired: ['id', 'text', 'alignment', 'name'],\n\tproperties: {\n\t\tid: {\n\t\t\ttype: 'string',\n\t\t\tmarkdownDescription: localize('id', 'The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API')\n\t\t},\n\t\tname: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('name', 'The name of the entry, like \\'Python Language Indicator\\', \\'Git Status\\' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.')\n\t\t},\n\t\ttext: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('text', 'The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like \\'Hello $(globe)!\\'')\n\t\t},\n\t\ttooltip: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('tooltip', 'The tooltip text for the entry.')\n\t\t},\n\t\tcommand: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('command', 'The command to execute when the status bar entry is clicked.')\n\t\t},\n\t\talignment: {\n\t\t\ttype: 'string',\n\t\t\tenum: ['left', 'right'],\n\t\t\tdescription: localize('alignment', 'The alignment of the status bar entry.')\n\t\t},\n\t\tpriority: {\n\t\t\ttype: 'number',\n\t\t\tdescription: localize('priority', 'The priority of the status bar entry. Higher value means the item should be shown more to the left.')\n\t\t},\n\t\taccessibilityInformation: {\n\t\t\ttype: 'object',\n\t\t\tdescription: localize('accessibilityInformation', 'Defines the role and aria label to be used when the status bar entry is focused.'),\n\t\t\trequired: ['label'],\n\t\t\tproperties: {\n\t\t\t\trole: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: localize('accessibilityInformation.role', 'The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles')\n\t\t\t\t},\n\t\t\t\tlabel: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: localize('accessibilityInformation.label', 'The aria label of the status bar entry. Defaults to the entry\\'s text.')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} as const satisfies IJSONSchema;\n\nconst statusBarItemsSchema: IJSONSchema = {\n\tdescription: localize('vscode.extension.contributes.statusBarItems', \"Contributes items to the status bar.\"),\n\toneOf: [\n\t\tstatusBarItemSchema,\n\t\t{\n\t\t\ttype: 'array',\n\t\t\titems: statusBarItemSchema\n\t\t}\n\t]\n};\n\nconst statusBarItemsExtensionPoint = ExtensionsRegistry.registerExtensionPoint<IUserFriendlyStatusItemEntry | IUserFriendlyStatusItemEntry[]>({\n\textensionPoint: 'statusBarItems',\n\tjsonSchema: statusBarItemsSchema,\n});\n\nexport class StatusBarItemsExtensionPoint {\n\n\tconstructor(@IExtensionStatusBarItemService statusBarItemsService: IExtensionStatusBarItemService) {\n\n\t\tconst contributions = new DisposableStore();\n\n\t\tstatusBarItemsExtensionPoint.setHandler((extensions) => {\n\n\t\t\tcontributions.clear();\n\n\t\t\tfor (const entry of extensions) {\n\n\t\t\t\tif (!isProposedApiEnabled(entry.description, 'contribStatusBarItems')) {\n\t\t\t\t\tentry.collector.error(`The ${statusBarItemsExtensionPoint.name} is proposed API`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst { value, collector } = entry;\n\n\t\t\t\tfor (const candidate of Iterable.wrap(value)) {\n\t\t\t\t\tif (!isUserFriendlyStatusItemEntry(candidate)) {\n\t\t\t\t\t\tcollector.error(localize('invalid', \"Invalid status bar item contribution.\"));\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst fullItemId = asStatusBarItemIdentifier(entry.description.identifier, candidate.id);\n\n\t\t\t\t\tconst kind = statusBarItemsService.setOrUpdateEntry(\n\t\t\t\t\t\tfullItemId,\n\t\t\t\t\t\tfullItemId,\n\t\t\t\t\t\tExtensionIdentifier.toKey(entry.description.identifier),\n\t\t\t\t\t\tcandidate.name ?? entry.description.displayName ?? entry.description.name,\n\t\t\t\t\t\tcandidate.text,\n\t\t\t\t\t\tcandidate.tooltip,\n\t\t\t\t\t\tcandidate.command ? { id: candidate.command, title: candidate.name } : undefined,\n\t\t\t\t\t\tundefined, undefined,\n\t\t\t\t\t\tcandidate.alignment === 'left',\n\t\t\t\t\t\tcandidate.priority,\n\t\t\t\t\t\tcandidate.accessibilityInformation\n\t\t\t\t\t);\n\n\t\t\t\t\tif (kind === StatusBarUpdateKind.DidDefine) {\n\t\t\t\t\t\tcontributions.add(toDisposable(() => statusBarItemsService.unsetEntry(fullItemId)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n"]}