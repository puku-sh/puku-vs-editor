{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadDiagnostics.ts","vs/workbench/api/browser/mainThreadDiagnostics.ts"],"names":[],"mappings":"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","file":"mainThreadDiagnostics.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IMarkerService, IMarkerData, type IMarker } from '../../../platform/markers/common/markers.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { MainThreadDiagnosticsShape, MainContext, ExtHostDiagnosticsShape, ExtHostContext } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { IUriIdentityService } from '../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ResourceMap } from '../../../base/common/map.js';\n\n@extHostNamedCustomer(MainContext.MainThreadDiagnostics)\nexport class MainThreadDiagnostics implements MainThreadDiagnosticsShape {\n\n\tprivate readonly _activeOwners = new Set<string>();\n\n\tprivate readonly _proxy: ExtHostDiagnosticsShape;\n\tprivate readonly _markerListener: IDisposable;\n\n\tprivate static ExtHostCounter: number = 1;\n\tprivate readonly extHostId: string;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IMarkerService private readonly _markerService: IMarkerService,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService,\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostDiagnostics);\n\n\t\tthis._markerListener = this._markerService.onMarkerChanged(this._forwardMarkers, this);\n\t\tthis.extHostId = `extHost${MainThreadDiagnostics.ExtHostCounter++}`;\n\t}\n\n\tdispose(): void {\n\t\tthis._markerListener.dispose();\n\t\tfor (const owner of this._activeOwners) {\n\t\t\tconst markersData: ResourceMap<IMarker[]> = new ResourceMap<IMarker[]>();\n\t\t\tfor (const marker of this._markerService.read({ owner })) {\n\t\t\t\tlet data = markersData.get(marker.resource);\n\t\t\t\tif (data === undefined) {\n\t\t\t\t\tdata = [];\n\t\t\t\t\tmarkersData.set(marker.resource, data);\n\t\t\t\t}\n\t\t\t\tif (marker.origin !== this.extHostId) {\n\t\t\t\t\tdata.push(marker);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [resource, local] of markersData.entries()) {\n\t\t\t\tthis._markerService.changeOne(owner, resource, local);\n\t\t\t}\n\t\t}\n\t\tthis._activeOwners.clear();\n\t}\n\n\tprivate _forwardMarkers(resources: readonly URI[]): void {\n\t\tconst data: [UriComponents, IMarkerData[]][] = [];\n\t\tfor (const resource of resources) {\n\t\t\tconst allMarkerData = this._markerService.read({ resource, ignoreResourceFilters: true });\n\t\t\tif (allMarkerData.length === 0) {\n\t\t\t\tdata.push([resource, []]);\n\t\t\t} else {\n\t\t\t\tconst foreignMarkerData = allMarkerData.filter(marker => marker?.origin !== this.extHostId);\n\t\t\t\tif (foreignMarkerData.length > 0) {\n\t\t\t\t\tdata.push([resource, foreignMarkerData]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (data.length > 0) {\n\t\t\tthis._proxy.$acceptMarkersChange(data);\n\t\t}\n\t}\n\n\t$changeMany(owner: string, entries: [UriComponents, IMarkerData[]][]): void {\n\t\tfor (const entry of entries) {\n\t\t\tconst [uri, markers] = entry;\n\t\t\tif (markers) {\n\t\t\t\tfor (const marker of markers) {\n\t\t\t\t\tif (marker.relatedInformation) {\n\t\t\t\t\t\tfor (const relatedInformation of marker.relatedInformation) {\n\t\t\t\t\t\t\trelatedInformation.resource = URI.revive(relatedInformation.resource);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (marker.code && typeof marker.code !== 'string') {\n\t\t\t\t\t\tmarker.code.target = URI.revive(marker.code.target);\n\t\t\t\t\t}\n\t\t\t\t\tif (marker.origin === undefined) {\n\t\t\t\t\t\tmarker.origin = this.extHostId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._markerService.changeOne(owner, this._uriIdentService.asCanonicalUri(URI.revive(uri)), markers);\n\t\t}\n\t\tthis._activeOwners.add(owner);\n\t}\n\n\t$clear(owner: string): void {\n\t\tthis._markerService.changeAll(owner, []);\n\t\tthis._activeOwners.delete(owner);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IMarkerService, IMarkerData, type IMarker } from '../../../platform/markers/common/markers.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { MainThreadDiagnosticsShape, MainContext, ExtHostDiagnosticsShape, ExtHostContext } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { IUriIdentityService } from '../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ResourceMap } from '../../../base/common/map.js';\n\n@extHostNamedCustomer(MainContext.MainThreadDiagnostics)\nexport class MainThreadDiagnostics implements MainThreadDiagnosticsShape {\n\n\tprivate readonly _activeOwners = new Set<string>();\n\n\tprivate readonly _proxy: ExtHostDiagnosticsShape;\n\tprivate readonly _markerListener: IDisposable;\n\n\tprivate static ExtHostCounter: number = 1;\n\tprivate readonly extHostId: string;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IMarkerService private readonly _markerService: IMarkerService,\n\t\t@IUriIdentityService private readonly _uriIdentService: IUriIdentityService,\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostDiagnostics);\n\n\t\tthis._markerListener = this._markerService.onMarkerChanged(this._forwardMarkers, this);\n\t\tthis.extHostId = `extHost${MainThreadDiagnostics.ExtHostCounter++}`;\n\t}\n\n\tdispose(): void {\n\t\tthis._markerListener.dispose();\n\t\tfor (const owner of this._activeOwners) {\n\t\t\tconst markersData: ResourceMap<IMarker[]> = new ResourceMap<IMarker[]>();\n\t\t\tfor (const marker of this._markerService.read({ owner })) {\n\t\t\t\tlet data = markersData.get(marker.resource);\n\t\t\t\tif (data === undefined) {\n\t\t\t\t\tdata = [];\n\t\t\t\t\tmarkersData.set(marker.resource, data);\n\t\t\t\t}\n\t\t\t\tif (marker.origin !== this.extHostId) {\n\t\t\t\t\tdata.push(marker);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [resource, local] of markersData.entries()) {\n\t\t\t\tthis._markerService.changeOne(owner, resource, local);\n\t\t\t}\n\t\t}\n\t\tthis._activeOwners.clear();\n\t}\n\n\tprivate _forwardMarkers(resources: readonly URI[]): void {\n\t\tconst data: [UriComponents, IMarkerData[]][] = [];\n\t\tfor (const resource of resources) {\n\t\t\tconst allMarkerData = this._markerService.read({ resource, ignoreResourceFilters: true });\n\t\t\tif (allMarkerData.length === 0) {\n\t\t\t\tdata.push([resource, []]);\n\t\t\t} else {\n\t\t\t\tconst foreignMarkerData = allMarkerData.filter(marker => marker?.origin !== this.extHostId);\n\t\t\t\tif (foreignMarkerData.length > 0) {\n\t\t\t\t\tdata.push([resource, foreignMarkerData]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (data.length > 0) {\n\t\t\tthis._proxy.$acceptMarkersChange(data);\n\t\t}\n\t}\n\n\t$changeMany(owner: string, entries: [UriComponents, IMarkerData[]][]): void {\n\t\tfor (const entry of entries) {\n\t\t\tconst [uri, markers] = entry;\n\t\t\tif (markers) {\n\t\t\t\tfor (const marker of markers) {\n\t\t\t\t\tif (marker.relatedInformation) {\n\t\t\t\t\t\tfor (const relatedInformation of marker.relatedInformation) {\n\t\t\t\t\t\t\trelatedInformation.resource = URI.revive(relatedInformation.resource);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (marker.code && typeof marker.code !== 'string') {\n\t\t\t\t\t\tmarker.code.target = URI.revive(marker.code.target);\n\t\t\t\t\t}\n\t\t\t\t\tif (marker.origin === undefined) {\n\t\t\t\t\t\tmarker.origin = this.extHostId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._markerService.changeOne(owner, this._uriIdentService.asCanonicalUri(URI.revive(uri)), markers);\n\t\t}\n\t\tthis._activeOwners.add(owner);\n\t}\n\n\t$clear(owner: string): void {\n\t\tthis._markerService.changeAll(owner, []);\n\t\tthis._activeOwners.delete(owner);\n\t}\n}\n"]}