{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadWindow.ts","vs/workbench/api/browser/mainThreadWindow.ts"],"names":[],"mappings":"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","file":"mainThreadWindow.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostWindowShape, IOpenUriOptions, MainContext, MainThreadWindowShape } from '../common/extHost.protocol.js';\nimport { IHostService } from '../../services/host/browser/host.js';\nimport { IUserActivityService } from '../../services/userActivity/common/userActivityService.js';\nimport { encodeBase64 } from '../../../base/common/buffer.js';\n\n@extHostNamedCustomer(MainContext.MainThreadWindow)\nexport class MainThreadWindow implements MainThreadWindowShape {\n\n\tprivate readonly proxy: ExtHostWindowShape;\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IUserActivityService private readonly userActivityService: IUserActivityService,\n\t) {\n\t\tthis.proxy = extHostContext.getProxy(ExtHostContext.ExtHostWindow);\n\n\t\tEvent.latch(hostService.onDidChangeFocus)\n\t\t\t(this.proxy.$onDidChangeWindowFocus, this.proxy, this.disposables);\n\t\tuserActivityService.onDidChangeIsActive(this.proxy.$onDidChangeWindowActive, this.proxy, this.disposables);\n\t\tthis.registerNativeHandle();\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n\n\tregisterNativeHandle(): void {\n\t\tEvent.latch(this.hostService.onDidChangeActiveWindow)(\n\t\t\tasync windowId => {\n\t\t\t\tconst handle = await this.hostService.getNativeWindowHandle(windowId);\n\t\t\t\tthis.proxy.$onDidChangeActiveNativeWindowHandle(handle ? encodeBase64(handle) : undefined);\n\t\t\t},\n\t\t\tthis,\n\t\t\tthis.disposables\n\t\t);\n\t}\n\n\t$getInitialState() {\n\t\treturn Promise.resolve({\n\t\t\tisFocused: this.hostService.hasFocus,\n\t\t\tisActive: this.userActivityService.isActive,\n\t\t});\n\t}\n\n\tasync $openUri(uriComponents: UriComponents, uriString: string | undefined, options: IOpenUriOptions): Promise<boolean> {\n\t\tconst uri = URI.from(uriComponents);\n\t\tlet target: URI | string;\n\t\tif (uriString && URI.parse(uriString).toString() === uri.toString()) {\n\t\t\t// called with string and no transformation happened -> keep string\n\t\t\ttarget = uriString;\n\t\t} else {\n\t\t\t// called with URI or transformed -> use uri\n\t\t\ttarget = uri;\n\t\t}\n\t\treturn this.openerService.open(target, {\n\t\t\topenExternal: true,\n\t\t\tallowTunneling: options.allowTunneling,\n\t\t\tallowContributedOpeners: options.allowContributedOpeners,\n\t\t});\n\t}\n\n\tasync $asExternalUri(uriComponents: UriComponents, options: IOpenUriOptions): Promise<UriComponents> {\n\t\tconst result = await this.openerService.resolveExternalUri(URI.revive(uriComponents), options);\n\t\treturn result.resolved;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostWindowShape, IOpenUriOptions, MainContext, MainThreadWindowShape } from '../common/extHost.protocol.js';\nimport { IHostService } from '../../services/host/browser/host.js';\nimport { IUserActivityService } from '../../services/userActivity/common/userActivityService.js';\nimport { encodeBase64 } from '../../../base/common/buffer.js';\n\n@extHostNamedCustomer(MainContext.MainThreadWindow)\nexport class MainThreadWindow implements MainThreadWindowShape {\n\n\tprivate readonly proxy: ExtHostWindowShape;\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IUserActivityService private readonly userActivityService: IUserActivityService,\n\t) {\n\t\tthis.proxy = extHostContext.getProxy(ExtHostContext.ExtHostWindow);\n\n\t\tEvent.latch(hostService.onDidChangeFocus)\n\t\t\t(this.proxy.$onDidChangeWindowFocus, this.proxy, this.disposables);\n\t\tuserActivityService.onDidChangeIsActive(this.proxy.$onDidChangeWindowActive, this.proxy, this.disposables);\n\t\tthis.registerNativeHandle();\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n\n\tregisterNativeHandle(): void {\n\t\tEvent.latch(this.hostService.onDidChangeActiveWindow)(\n\t\t\tasync windowId => {\n\t\t\t\tconst handle = await this.hostService.getNativeWindowHandle(windowId);\n\t\t\t\tthis.proxy.$onDidChangeActiveNativeWindowHandle(handle ? encodeBase64(handle) : undefined);\n\t\t\t},\n\t\t\tthis,\n\t\t\tthis.disposables\n\t\t);\n\t}\n\n\t$getInitialState() {\n\t\treturn Promise.resolve({\n\t\t\tisFocused: this.hostService.hasFocus,\n\t\t\tisActive: this.userActivityService.isActive,\n\t\t});\n\t}\n\n\tasync $openUri(uriComponents: UriComponents, uriString: string | undefined, options: IOpenUriOptions): Promise<boolean> {\n\t\tconst uri = URI.from(uriComponents);\n\t\tlet target: URI | string;\n\t\tif (uriString && URI.parse(uriString).toString() === uri.toString()) {\n\t\t\t// called with string and no transformation happened -> keep string\n\t\t\ttarget = uriString;\n\t\t} else {\n\t\t\t// called with URI or transformed -> use uri\n\t\t\ttarget = uri;\n\t\t}\n\t\treturn this.openerService.open(target, {\n\t\t\topenExternal: true,\n\t\t\tallowTunneling: options.allowTunneling,\n\t\t\tallowContributedOpeners: options.allowContributedOpeners,\n\t\t});\n\t}\n\n\tasync $asExternalUri(uriComponents: UriComponents, options: IOpenUriOptions): Promise<UriComponents> {\n\t\tconst result = await this.openerService.resolveExternalUri(URI.revive(uriComponents), options);\n\t\treturn result.resolved;\n\t}\n}\n"]}