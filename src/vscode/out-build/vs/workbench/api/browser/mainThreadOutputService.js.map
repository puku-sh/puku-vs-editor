{"version":3,"sources":["vs/workbench/api/browser/mainThreadOutputService.ts"],"names":[],"mappings":"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","file":"mainThreadOutputService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { Extensions, IOutputChannelRegistry, IOutputService, IOutputChannel, OUTPUT_VIEW_ID, OutputChannelUpdateMode } from '../../services/output/common/output.js';\nimport { MainThreadOutputServiceShape, MainContext, ExtHostOutputServiceShape, ExtHostContext } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { UriComponents, URI } from '../../../base/common/uri.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IViewsService } from '../../services/views/common/viewsService.js';\nimport { isNumber } from '../../../base/common/types.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { IStatusbarEntry, IStatusbarEntryAccessor, IStatusbarService, StatusbarAlignment } from '../../services/statusbar/browser/statusbar.js';\nimport { localize } from '../../../nls.js';\n\n@extHostNamedCustomer(MainContext.MainThreadOutputService)\nexport class MainThreadOutputService extends Disposable implements MainThreadOutputServiceShape {\n\n\tprivate static _extensionIdPool = new Map<string, number>();\n\n\tprivate readonly _proxy: ExtHostOutputServiceShape;\n\tprivate readonly _outputService: IOutputService;\n\tprivate readonly _viewsService: IViewsService;\n\tprivate readonly _configurationService: IConfigurationService;\n\tprivate readonly _statusbarService: IStatusbarService;\n\n\tprivate readonly _outputStatusItem = this._register(new MutableDisposable<IStatusbarEntryAccessor>());\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IOutputService outputService: IOutputService,\n\t\t@IViewsService viewsService: IViewsService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStatusbarService statusbarService: IStatusbarService,\n\t) {\n\t\tsuper();\n\t\tthis._outputService = outputService;\n\t\tthis._viewsService = viewsService;\n\t\tthis._configurationService = configurationService;\n\t\tthis._statusbarService = statusbarService;\n\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostOutputService);\n\n\t\tconst setVisibleChannel = () => {\n\t\t\tconst visibleChannel = this._viewsService.isViewVisible(OUTPUT_VIEW_ID) ? this._outputService.getActiveChannel() : undefined;\n\t\t\tthis._proxy.$setVisibleChannel(visibleChannel ? visibleChannel.id : null);\n\t\t\tthis._outputStatusItem.value = undefined;\n\t\t};\n\t\tthis._register(Event.any<unknown>(this._outputService.onActiveOutputChannel, Event.filter(this._viewsService.onDidChangeViewVisibility, ({ id }) => id === OUTPUT_VIEW_ID))(() => setVisibleChannel()));\n\t\tsetVisibleChannel();\n\t}\n\n\tpublic async $register(label: string, file: UriComponents, languageId: string | undefined, extensionId: string): Promise<string> {\n\t\tconst idCounter = (MainThreadOutputService._extensionIdPool.get(extensionId) || 0) + 1;\n\t\tMainThreadOutputService._extensionIdPool.set(extensionId, idCounter);\n\t\tconst id = `extension-output-${extensionId}-#${idCounter}-${label}`;\n\t\tconst resource = URI.revive(file);\n\n\t\tRegistry.as<IOutputChannelRegistry>(Extensions.OutputChannels).registerChannel({ id, label, source: { resource }, log: false, languageId, extensionId });\n\t\tthis._register(toDisposable(() => this.$dispose(id)));\n\t\treturn id;\n\t}\n\n\tpublic async $update(channelId: string, mode: OutputChannelUpdateMode, till?: number): Promise<void> {\n\t\tconst channel = this._getChannel(channelId);\n\t\tif (channel) {\n\t\t\tif (mode === OutputChannelUpdateMode.Append) {\n\t\t\t\tchannel.update(mode);\n\t\t\t} else if (isNumber(till)) {\n\t\t\t\tchannel.update(mode, till);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async $reveal(channelId: string, preserveFocus: boolean): Promise<void> {\n\t\tconst channel = this._getChannel(channelId);\n\t\tif (!channel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewsToShowQuietly = this._configurationService.getValue<Record<string, boolean> | undefined>('workbench.view.showQuietly') ?? {};\n\t\tif (!this._viewsService.isViewVisible(OUTPUT_VIEW_ID) && viewsToShowQuietly[OUTPUT_VIEW_ID]) {\n\t\t\tthis._showChannelQuietly(channel);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._outputService.showChannel(channel.id, preserveFocus);\n\t}\n\n\t// Show status bar indicator\n\tprivate _showChannelQuietly(channel: IOutputChannel) {\n\t\tconst statusProperties: IStatusbarEntry = {\n\t\t\tname: localize('status.showOutput', \"Show Output\"),\n\t\t\ttext: '$(output)',\n\t\t\tariaLabel: localize('status.showOutputAria', \"Show {0} Output Channel\", channel.label),\n\t\t\tcommand: `workbench.action.output.show.${channel.id}`,\n\t\t\ttooltip: localize('status.showOutputTooltip', \"Show {0} Output Channel\", channel.label),\n\t\t\tkind: 'prominent'\n\t\t};\n\n\t\tif (!this._outputStatusItem.value) {\n\t\t\tthis._outputStatusItem.value = this._statusbarService.addEntry(\n\t\t\t\tstatusProperties,\n\t\t\t\t'status.view.showQuietly',\n\t\t\t\tStatusbarAlignment.RIGHT,\n\t\t\t\t{ location: { id: 'status.notifications', priority: Number.NEGATIVE_INFINITY }, alignment: StatusbarAlignment.LEFT }\n\t\t\t);\n\t\t} else {\n\t\t\tthis._outputStatusItem.value.update(statusProperties);\n\t\t}\n\t}\n\n\tpublic async $close(channelId: string): Promise<void> {\n\t\tif (this._viewsService.isViewVisible(OUTPUT_VIEW_ID)) {\n\t\t\tconst activeChannel = this._outputService.getActiveChannel();\n\t\t\tif (activeChannel && channelId === activeChannel.id) {\n\t\t\t\tthis._viewsService.closeView(OUTPUT_VIEW_ID);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async $dispose(channelId: string): Promise<void> {\n\t\tconst channel = this._getChannel(channelId);\n\t\tchannel?.dispose();\n\t}\n\n\tprivate _getChannel(channelId: string): IOutputChannel | undefined {\n\t\treturn this._outputService.getChannel(channelId);\n\t}\n}\n"]}