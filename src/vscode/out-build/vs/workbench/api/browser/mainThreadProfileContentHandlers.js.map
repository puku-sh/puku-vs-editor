{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadProfileContentHandlers.ts","vs/workbench/api/browser/mainThreadProfileContentHandlers.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAGhG,OAAO,EAAE,UAAU,EAAE,aAAa,EAAe,MAAM,mCAAmC,CAAC;AAC3F,OAAO,EAAE,MAAM,EAAE,MAAM,qCAAqC,CAAC;AAE7D,OAAO,EAAE,cAAc,EAAsC,WAAW,EAAyC,MAAM,+BAA+B,CAAC;AACvJ,OAAO,EAAE,oBAAoB,EAAmB,MAAM,sDAAsD,CAAC;AAC7G,OAAO,EAAsB,mCAAmC,EAAE,MAAM,0DAA0D,CAAC;AAG5H,IAAM,gCAAgC,GAAtC,MAAM,gCAAiC,SAAQ,UAAU;IAM/D,YACC,OAAwB,EACa,kCAAwF;QAE7H,KAAK,EAAE,CAAC;QAF8C,uCAAkC,GAAlC,kCAAkC,CAAqC;QAJ7G,uBAAkB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,aAAa,EAAuB,CAAC,CAAC;QAO9F,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,6BAA6B,CAAC,CAAC;IAC7E,CAAC;IAED,KAAK,CAAC,8BAA8B,CAAC,EAAU,EAAE,IAAY,EAAE,WAA+B,EAAE,WAAmB;QAClH,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,kCAAkC,CAAC,6BAA6B,CAAC,EAAE,EAAE;YACzG,IAAI;YACJ,WAAW;YACX,WAAW;YACX,WAAW,EAAE,KAAK,EAAE,IAAY,EAAE,OAAe,EAAE,KAAwB,EAAE,EAAE;gBAC9E,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;gBACvE,OAAO,MAAM,CAAC,CAAC,CAAC,MAAM,CAAqB,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAC3D,CAAC;YACD,WAAW,EAAE,KAAK,EAAE,GAAQ,EAAE,KAAwB,EAAE,EAAE;gBACzD,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;YAChD,CAAC;SACD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,gCAAgC,CAAC,EAAU;QAChD,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;IAC9C,CAAC;CAED,CAAA;AAjCY,gCAAgC;IAD5C,oBAAoB,CAAC,WAAW,CAAC,gCAAgC,CAAC;IAShE,WAAA,mCAAmC,CAAA;GARzB,gCAAgC,CAiC5C","file":"mainThreadProfileContentHandlers.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableMap, IDisposable } from '../../../base/common/lifecycle.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ExtHostContext, ExtHostProfileContentHandlersShape, MainContext, MainThreadProfileContentHandlersShape } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ISaveProfileResult, IUserDataProfileImportExportService } from '../../services/userDataProfile/common/userDataProfile.js';\n\n@extHostNamedCustomer(MainContext.MainThreadProfileContentHandlers)\nexport class MainThreadProfileContentHandlers extends Disposable implements MainThreadProfileContentHandlersShape {\n\n\tprivate readonly proxy: ExtHostProfileContentHandlersShape;\n\n\tprivate readonly registeredHandlers = this._register(new DisposableMap<string, IDisposable>());\n\n\tconstructor(\n\t\tcontext: IExtHostContext,\n\t\t@IUserDataProfileImportExportService private readonly userDataProfileImportExportService: IUserDataProfileImportExportService,\n\t) {\n\t\tsuper();\n\t\tthis.proxy = context.getProxy(ExtHostContext.ExtHostProfileContentHandlers);\n\t}\n\n\tasync $registerProfileContentHandler(id: string, name: string, description: string | undefined, extensionId: string): Promise<void> {\n\t\tthis.registeredHandlers.set(id, this.userDataProfileImportExportService.registerProfileContentHandler(id, {\n\t\t\tname,\n\t\t\tdescription,\n\t\t\textensionId,\n\t\t\tsaveProfile: async (name: string, content: string, token: CancellationToken) => {\n\t\t\t\tconst result = await this.proxy.$saveProfile(id, name, content, token);\n\t\t\t\treturn result ? revive<ISaveProfileResult>(result) : null;\n\t\t\t},\n\t\t\treadProfile: async (uri: URI, token: CancellationToken) => {\n\t\t\t\treturn this.proxy.$readProfile(id, uri, token);\n\t\t\t},\n\t\t}));\n\t}\n\n\tasync $unregisterProfileContentHandler(id: string): Promise<void> {\n\t\tthis.registeredHandlers.deleteAndDispose(id);\n\t}\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Disposable, DisposableMap, IDisposable } from '../../../base/common/lifecycle.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ExtHostContext, ExtHostProfileContentHandlersShape, MainContext, MainThreadProfileContentHandlersShape } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ISaveProfileResult, IUserDataProfileImportExportService } from '../../services/userDataProfile/common/userDataProfile.js';\n\n@extHostNamedCustomer(MainContext.MainThreadProfileContentHandlers)\nexport class MainThreadProfileContentHandlers extends Disposable implements MainThreadProfileContentHandlersShape {\n\n\tprivate readonly proxy: ExtHostProfileContentHandlersShape;\n\n\tprivate readonly registeredHandlers = this._register(new DisposableMap<string, IDisposable>());\n\n\tconstructor(\n\t\tcontext: IExtHostContext,\n\t\t@IUserDataProfileImportExportService private readonly userDataProfileImportExportService: IUserDataProfileImportExportService,\n\t) {\n\t\tsuper();\n\t\tthis.proxy = context.getProxy(ExtHostContext.ExtHostProfileContentHandlers);\n\t}\n\n\tasync $registerProfileContentHandler(id: string, name: string, description: string | undefined, extensionId: string): Promise<void> {\n\t\tthis.registeredHandlers.set(id, this.userDataProfileImportExportService.registerProfileContentHandler(id, {\n\t\t\tname,\n\t\t\tdescription,\n\t\t\textensionId,\n\t\t\tsaveProfile: async (name: string, content: string, token: CancellationToken) => {\n\t\t\t\tconst result = await this.proxy.$saveProfile(id, name, content, token);\n\t\t\t\treturn result ? revive<ISaveProfileResult>(result) : null;\n\t\t\t},\n\t\t\treadProfile: async (uri: URI, token: CancellationToken) => {\n\t\t\t\treturn this.proxy.$readProfile(id, uri, token);\n\t\t\t},\n\t\t}));\n\t}\n\n\tasync $unregisterProfileContentHandler(id: string): Promise<void> {\n\t\tthis.registeredHandlers.deleteAndDispose(id);\n\t}\n\n}\n"]}