{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadLogService.ts","vs/workbench/api/browser/mainThreadLogService.ts"],"names":[],"mappings":"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","file":"mainThreadLogService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ILoggerOptions, ILoggerResource, ILoggerService, ILogService, isLogLevel, log, LogLevel, LogLevelToString, parseLogLevel } from '../../../platform/log/common/log.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ExtHostContext, MainThreadLoggerShape, MainContext } from '../common/extHost.protocol.js';\nimport { UriComponents, URI, UriDto } from '../../../base/common/uri.js';\nimport { ServicesAccessor } from '../../../platform/instantiation/common/instantiation.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\n\n@extHostNamedCustomer(MainContext.MainThreadLogger)\nexport class MainThreadLoggerService implements MainThreadLoggerShape {\n\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@ILoggerService private readonly loggerService: ILoggerService,\n\t) {\n\t\tconst proxy = extHostContext.getProxy(ExtHostContext.ExtHostLogLevelServiceShape);\n\t\tthis.disposables.add(loggerService.onDidChangeLogLevel(arg => {\n\t\t\tif (isLogLevel(arg)) {\n\t\t\t\tproxy.$setLogLevel(arg);\n\t\t\t} else {\n\t\t\t\tproxy.$setLogLevel(arg[1], arg[0]);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$log(file: UriComponents, messages: [LogLevel, string][]): void {\n\t\tconst logger = this.loggerService.getLogger(URI.revive(file));\n\t\tif (!logger) {\n\t\t\tthrow new Error('Create the logger before logging');\n\t\t}\n\t\tfor (const [level, message] of messages) {\n\t\t\tlog(logger, level, message);\n\t\t}\n\t}\n\n\tasync $createLogger(file: UriComponents, options?: ILoggerOptions): Promise<void> {\n\t\tthis.loggerService.createLogger(URI.revive(file), options);\n\t}\n\n\tasync $registerLogger(logResource: UriDto<ILoggerResource>): Promise<void> {\n\t\tthis.loggerService.registerLogger({\n\t\t\t...logResource,\n\t\t\tresource: URI.revive(logResource.resource)\n\t\t});\n\t}\n\n\tasync $deregisterLogger(resource: UriComponents): Promise<void> {\n\t\tthis.loggerService.deregisterLogger(URI.revive(resource));\n\t}\n\n\tasync $setVisibility(resource: UriComponents, visible: boolean): Promise<void> {\n\t\tthis.loggerService.setVisibility(URI.revive(resource), visible);\n\t}\n\n\t$flush(file: UriComponents): void {\n\t\tconst logger = this.loggerService.getLogger(URI.revive(file));\n\t\tif (!logger) {\n\t\t\tthrow new Error('Create the logger before flushing');\n\t\t}\n\t\tlogger.flush();\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n}\n\n// --- Internal commands to improve extension test runs\n\nCommandsRegistry.registerCommand('_extensionTests.setLogLevel', function (accessor: ServicesAccessor, level: string) {\n\tconst loggerService = accessor.get(ILoggerService);\n\tconst environmentService = accessor.get(IEnvironmentService);\n\n\tif (environmentService.isExtensionDevelopment && !!environmentService.extensionTestsLocationURI) {\n\t\tconst logLevel = parseLogLevel(level);\n\t\tif (logLevel !== undefined) {\n\t\t\tloggerService.setLogLevel(logLevel);\n\t\t}\n\t}\n});\n\nCommandsRegistry.registerCommand('_extensionTests.getLogLevel', function (accessor: ServicesAccessor) {\n\tconst logService = accessor.get(ILogService);\n\n\treturn LogLevelToString(logService.getLevel());\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ILoggerOptions, ILoggerResource, ILoggerService, ILogService, isLogLevel, log, LogLevel, LogLevelToString, parseLogLevel } from '../../../platform/log/common/log.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ExtHostContext, MainThreadLoggerShape, MainContext } from '../common/extHost.protocol.js';\nimport { UriComponents, URI, UriDto } from '../../../base/common/uri.js';\nimport { ServicesAccessor } from '../../../platform/instantiation/common/instantiation.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\n\n@extHostNamedCustomer(MainContext.MainThreadLogger)\nexport class MainThreadLoggerService implements MainThreadLoggerShape {\n\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@ILoggerService private readonly loggerService: ILoggerService,\n\t) {\n\t\tconst proxy = extHostContext.getProxy(ExtHostContext.ExtHostLogLevelServiceShape);\n\t\tthis.disposables.add(loggerService.onDidChangeLogLevel(arg => {\n\t\t\tif (isLogLevel(arg)) {\n\t\t\t\tproxy.$setLogLevel(arg);\n\t\t\t} else {\n\t\t\t\tproxy.$setLogLevel(arg[1], arg[0]);\n\t\t\t}\n\t\t}));\n\t}\n\n\t$log(file: UriComponents, messages: [LogLevel, string][]): void {\n\t\tconst logger = this.loggerService.getLogger(URI.revive(file));\n\t\tif (!logger) {\n\t\t\tthrow new Error('Create the logger before logging');\n\t\t}\n\t\tfor (const [level, message] of messages) {\n\t\t\tlog(logger, level, message);\n\t\t}\n\t}\n\n\tasync $createLogger(file: UriComponents, options?: ILoggerOptions): Promise<void> {\n\t\tthis.loggerService.createLogger(URI.revive(file), options);\n\t}\n\n\tasync $registerLogger(logResource: UriDto<ILoggerResource>): Promise<void> {\n\t\tthis.loggerService.registerLogger({\n\t\t\t...logResource,\n\t\t\tresource: URI.revive(logResource.resource)\n\t\t});\n\t}\n\n\tasync $deregisterLogger(resource: UriComponents): Promise<void> {\n\t\tthis.loggerService.deregisterLogger(URI.revive(resource));\n\t}\n\n\tasync $setVisibility(resource: UriComponents, visible: boolean): Promise<void> {\n\t\tthis.loggerService.setVisibility(URI.revive(resource), visible);\n\t}\n\n\t$flush(file: UriComponents): void {\n\t\tconst logger = this.loggerService.getLogger(URI.revive(file));\n\t\tif (!logger) {\n\t\t\tthrow new Error('Create the logger before flushing');\n\t\t}\n\t\tlogger.flush();\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n}\n\n// --- Internal commands to improve extension test runs\n\nCommandsRegistry.registerCommand('_extensionTests.setLogLevel', function (accessor: ServicesAccessor, level: string) {\n\tconst loggerService = accessor.get(ILoggerService);\n\tconst environmentService = accessor.get(IEnvironmentService);\n\n\tif (environmentService.isExtensionDevelopment && !!environmentService.extensionTestsLocationURI) {\n\t\tconst logLevel = parseLogLevel(level);\n\t\tif (logLevel !== undefined) {\n\t\t\tloggerService.setLogLevel(logLevel);\n\t\t}\n\t}\n});\n\nCommandsRegistry.registerCommand('_extensionTests.getLogLevel', function (accessor: ServicesAccessor) {\n\tconst logService = accessor.get(ILogService);\n\n\treturn LogLevelToString(logService.getLevel());\n});\n"]}