{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadLanguages.ts","vs/workbench/api/browser/mainThreadLanguages.ts"],"names":[],"mappings":"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","file":"mainThreadLanguages.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { ILanguageService } from '../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../editor/common/services/model.js';\nimport { MainThreadLanguagesShape, MainContext, ExtHostContext, ExtHostLanguagesShape } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { IPosition } from '../../../editor/common/core/position.js';\nimport { IRange, Range } from '../../../editor/common/core/range.js';\nimport { StandardTokenType } from '../../../editor/common/encodedTokenAttributes.js';\nimport { ITextModelService } from '../../../editor/common/services/resolverService.js';\nimport { ILanguageStatus, ILanguageStatusService } from '../../services/languageStatus/common/languageStatusService.js';\nimport { DisposableMap, DisposableStore } from '../../../base/common/lifecycle.js';\n\n@extHostNamedCustomer(MainContext.MainThreadLanguages)\nexport class MainThreadLanguages implements MainThreadLanguagesShape {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _proxy: ExtHostLanguagesShape;\n\n\tprivate readonly _status = new DisposableMap<number>();\n\n\tconstructor(\n\t\t_extHostContext: IExtHostContext,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ITextModelService private _resolverService: ITextModelService,\n\t\t@ILanguageStatusService private readonly _languageStatusService: ILanguageStatusService,\n\t) {\n\t\tthis._proxy = _extHostContext.getProxy(ExtHostContext.ExtHostLanguages);\n\n\t\tthis._proxy.$acceptLanguageIds(_languageService.getRegisteredLanguageIds());\n\t\tthis._disposables.add(_languageService.onDidChange(_ => {\n\t\t\tthis._proxy.$acceptLanguageIds(_languageService.getRegisteredLanguageIds());\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._status.dispose();\n\t}\n\n\tasync $changeLanguage(resource: UriComponents, languageId: string): Promise<void> {\n\n\t\tif (!this._languageService.isRegisteredLanguageId(languageId)) {\n\t\t\treturn Promise.reject(new Error(`Unknown language id: ${languageId}`));\n\t\t}\n\n\t\tconst uri = URI.revive(resource);\n\t\tconst ref = await this._resolverService.createModelReference(uri);\n\t\ttry {\n\t\t\tref.object.textEditorModel.setLanguage(this._languageService.createById(languageId));\n\t\t} finally {\n\t\t\tref.dispose();\n\t\t}\n\t}\n\n\tasync $tokensAtPosition(resource: UriComponents, position: IPosition): Promise<undefined | { type: StandardTokenType; range: IRange }> {\n\t\tconst uri = URI.revive(resource);\n\t\tconst model = this._modelService.getModel(uri);\n\t\tif (!model) {\n\t\t\treturn undefined;\n\t\t}\n\t\tmodel.tokenization.tokenizeIfCheap(position.lineNumber);\n\t\tconst tokens = model.tokenization.getLineTokens(position.lineNumber);\n\t\tconst idx = tokens.findTokenIndexAtOffset(position.column - 1);\n\t\treturn {\n\t\t\ttype: tokens.getStandardTokenType(idx),\n\t\t\trange: new Range(position.lineNumber, 1 + tokens.getStartOffset(idx), position.lineNumber, 1 + tokens.getEndOffset(idx))\n\t\t};\n\t}\n\n\t// --- language status\n\n\t$setLanguageStatus(handle: number, status: ILanguageStatus): void {\n\t\tthis._status.get(handle)?.dispose();\n\t\tthis._status.set(handle, this._languageStatusService.addStatus(status));\n\t}\n\n\t$removeLanguageStatus(handle: number): void {\n\t\tthis._status.get(handle)?.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { ILanguageService } from '../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../editor/common/services/model.js';\nimport { MainThreadLanguagesShape, MainContext, ExtHostContext, ExtHostLanguagesShape } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { IPosition } from '../../../editor/common/core/position.js';\nimport { IRange, Range } from '../../../editor/common/core/range.js';\nimport { StandardTokenType } from '../../../editor/common/encodedTokenAttributes.js';\nimport { ITextModelService } from '../../../editor/common/services/resolverService.js';\nimport { ILanguageStatus, ILanguageStatusService } from '../../services/languageStatus/common/languageStatusService.js';\nimport { DisposableMap, DisposableStore } from '../../../base/common/lifecycle.js';\n\n@extHostNamedCustomer(MainContext.MainThreadLanguages)\nexport class MainThreadLanguages implements MainThreadLanguagesShape {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _proxy: ExtHostLanguagesShape;\n\n\tprivate readonly _status = new DisposableMap<number>();\n\n\tconstructor(\n\t\t_extHostContext: IExtHostContext,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ITextModelService private _resolverService: ITextModelService,\n\t\t@ILanguageStatusService private readonly _languageStatusService: ILanguageStatusService,\n\t) {\n\t\tthis._proxy = _extHostContext.getProxy(ExtHostContext.ExtHostLanguages);\n\n\t\tthis._proxy.$acceptLanguageIds(_languageService.getRegisteredLanguageIds());\n\t\tthis._disposables.add(_languageService.onDidChange(_ => {\n\t\t\tthis._proxy.$acceptLanguageIds(_languageService.getRegisteredLanguageIds());\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._status.dispose();\n\t}\n\n\tasync $changeLanguage(resource: UriComponents, languageId: string): Promise<void> {\n\n\t\tif (!this._languageService.isRegisteredLanguageId(languageId)) {\n\t\t\treturn Promise.reject(new Error(`Unknown language id: ${languageId}`));\n\t\t}\n\n\t\tconst uri = URI.revive(resource);\n\t\tconst ref = await this._resolverService.createModelReference(uri);\n\t\ttry {\n\t\t\tref.object.textEditorModel.setLanguage(this._languageService.createById(languageId));\n\t\t} finally {\n\t\t\tref.dispose();\n\t\t}\n\t}\n\n\tasync $tokensAtPosition(resource: UriComponents, position: IPosition): Promise<undefined | { type: StandardTokenType; range: IRange }> {\n\t\tconst uri = URI.revive(resource);\n\t\tconst model = this._modelService.getModel(uri);\n\t\tif (!model) {\n\t\t\treturn undefined;\n\t\t}\n\t\tmodel.tokenization.tokenizeIfCheap(position.lineNumber);\n\t\tconst tokens = model.tokenization.getLineTokens(position.lineNumber);\n\t\tconst idx = tokens.findTokenIndexAtOffset(position.column - 1);\n\t\treturn {\n\t\t\ttype: tokens.getStandardTokenType(idx),\n\t\t\trange: new Range(position.lineNumber, 1 + tokens.getStartOffset(idx), position.lineNumber, 1 + tokens.getEndOffset(idx))\n\t\t};\n\t}\n\n\t// --- language status\n\n\t$setLanguageStatus(handle: number, status: ILanguageStatus): void {\n\t\tthis._status.get(handle)?.dispose();\n\t\tthis._status.set(handle, this._languageStatusService.addStatus(status));\n\t}\n\n\t$removeLanguageStatus(handle: number): void {\n\t\tthis._status.get(handle)?.dispose();\n\t}\n}\n"]}