{"version":3,"sources":["vs/workbench/api/browser/mainThreadWorkspace.ts"],"names":[],"mappings":"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","file":"mainThreadWorkspace.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { DisposableStore, IDisposable } from '../../../base/common/lifecycle.js';\nimport { isNative } from '../../../base/common/platform.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { IFileService } from '../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { AuthInfo, Credentials, IRequestService } from '../../../platform/request/common/request.js';\nimport { WorkspaceTrustRequestOptions, IWorkspaceTrustManagementService, IWorkspaceTrustRequestService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IWorkspace, IWorkspaceContextService, WorkbenchState, isUntitledWorkspace, WorkspaceFolder } from '../../../platform/workspace/common/workspace.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { checkGlobFileExists } from '../../services/extensions/common/workspaceContains.js';\nimport { IFileQueryBuilderOptions, ITextQueryBuilderOptions, QueryBuilder } from '../../services/search/common/queryBuilder.js';\nimport { IEditorService, ISaveEditorsResult } from '../../services/editor/common/editorService.js';\nimport { IFileMatch, IPatternInfo, ISearchProgressItem, ISearchService } from '../../services/search/common/search.js';\nimport { IWorkspaceEditingService } from '../../services/workspaces/common/workspaceEditing.js';\nimport { ExtHostContext, ExtHostWorkspaceShape, ITextSearchComplete, IWorkspaceData, MainContext, MainThreadWorkspaceShape } from '../common/extHost.protocol.js';\nimport { IEditSessionIdentityService } from '../../../platform/workspace/common/editSessions.js';\nimport { EditorResourceAccessor, SaveReason, SideBySideEditor } from '../../common/editor.js';\nimport { coalesce } from '../../../base/common/arrays.js';\nimport { ICanonicalUriService } from '../../../platform/workspace/common/canonicalUri.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { ITextFileService } from '../../services/textfile/common/textfiles.js';\n\n@extHostNamedCustomer(MainContext.MainThreadWorkspace)\nexport class MainThreadWorkspace implements MainThreadWorkspaceShape {\n\n\tprivate readonly _toDispose = new DisposableStore();\n\tprivate readonly _activeCancelTokens: { [id: number]: CancellationTokenSource } = Object.create(null);\n\tprivate readonly _proxy: ExtHostWorkspaceShape;\n\tprivate readonly _queryBuilder: QueryBuilder;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@ISearchService private readonly _searchService: ISearchService,\n\t\t@IWorkspaceContextService private readonly _contextService: IWorkspaceContextService,\n\t\t@IEditSessionIdentityService private readonly _editSessionIdentityService: IEditSessionIdentityService,\n\t\t@ICanonicalUriService private readonly _canonicalUriService: ICanonicalUriService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IWorkspaceEditingService private readonly _workspaceEditingService: IWorkspaceEditingService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IRequestService private readonly _requestService: IRequestService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@IEnvironmentService private readonly _environmentService: IEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IWorkspaceTrustManagementService private readonly _workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkspaceTrustRequestService private readonly _workspaceTrustRequestService: IWorkspaceTrustRequestService,\n\t\t@ITextFileService private readonly _textFileService: ITextFileService,\n\t) {\n\t\tthis._queryBuilder = this._instantiationService.createInstance(QueryBuilder);\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostWorkspace);\n\t\tconst workspace = this._contextService.getWorkspace();\n\t\t// The workspace file is provided be a unknown file system provider. It might come\n\t\t// from the extension host. So initialize now knowing that `rootPath` is undefined.\n\t\tif (workspace.configuration && !isNative && !fileService.hasProvider(workspace.configuration)) {\n\t\t\tthis._proxy.$initializeWorkspace(this.getWorkspaceData(workspace), this.isWorkspaceTrusted());\n\t\t} else {\n\t\t\tthis._contextService.getCompleteWorkspace().then(workspace => this._proxy.$initializeWorkspace(this.getWorkspaceData(workspace), this.isWorkspaceTrusted()));\n\t\t}\n\t\tthis._contextService.onDidChangeWorkspaceFolders(this._onDidChangeWorkspace, this, this._toDispose);\n\t\tthis._contextService.onDidChangeWorkbenchState(this._onDidChangeWorkspace, this, this._toDispose);\n\t\tthis._workspaceTrustManagementService.onDidChangeTrust(this._onDidGrantWorkspaceTrust, this, this._toDispose);\n\t}\n\n\tdispose(): void {\n\t\tthis._toDispose.dispose();\n\n\t\tfor (const requestId in this._activeCancelTokens) {\n\t\t\tconst tokenSource = this._activeCancelTokens[requestId];\n\t\t\ttokenSource.cancel();\n\t\t}\n\t}\n\n\t// --- workspace ---\n\n\t$updateWorkspaceFolders(extensionName: string, index: number, deleteCount: number, foldersToAdd: { uri: UriComponents; name?: string }[]): Promise<void> {\n\t\tconst workspaceFoldersToAdd = foldersToAdd.map(f => ({ uri: URI.revive(f.uri), name: f.name }));\n\n\t\t// Indicate in status message\n\t\tthis._notificationService.status(this.getStatusMessage(extensionName, workspaceFoldersToAdd.length, deleteCount), { hideAfter: 10 * 1000 /* 10s */ });\n\n\t\treturn this._workspaceEditingService.updateFolders(index, deleteCount, workspaceFoldersToAdd, true);\n\t}\n\n\tprivate getStatusMessage(extensionName: string, addCount: number, removeCount: number): string {\n\t\tlet message: string;\n\n\t\tconst wantsToAdd = addCount > 0;\n\t\tconst wantsToDelete = removeCount > 0;\n\n\t\t// Add Folders\n\t\tif (wantsToAdd && !wantsToDelete) {\n\t\t\tif (addCount === 1) {\n\t\t\t\tmessage = localize('folderStatusMessageAddSingleFolder', \"Extension '{0}' added 1 folder to the workspace\", extensionName);\n\t\t\t} else {\n\t\t\t\tmessage = localize('folderStatusMessageAddMultipleFolders', \"Extension '{0}' added {1} folders to the workspace\", extensionName, addCount);\n\t\t\t}\n\t\t}\n\n\t\t// Delete Folders\n\t\telse if (wantsToDelete && !wantsToAdd) {\n\t\t\tif (removeCount === 1) {\n\t\t\t\tmessage = localize('folderStatusMessageRemoveSingleFolder', \"Extension '{0}' removed 1 folder from the workspace\", extensionName);\n\t\t\t} else {\n\t\t\t\tmessage = localize('folderStatusMessageRemoveMultipleFolders', \"Extension '{0}' removed {1} folders from the workspace\", extensionName, removeCount);\n\t\t\t}\n\t\t}\n\n\t\t// Change Folders\n\t\telse {\n\t\t\tmessage = localize('folderStatusChangeFolder', \"Extension '{0}' changed folders of the workspace\", extensionName);\n\t\t}\n\n\t\treturn message;\n\t}\n\n\tprivate _onDidChangeWorkspace(): void {\n\t\tthis._proxy.$acceptWorkspaceData(this.getWorkspaceData(this._contextService.getWorkspace()));\n\t}\n\n\tprivate getWorkspaceData(workspace: IWorkspace): IWorkspaceData | null {\n\t\tif (this._contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\treturn null;\n\t\t}\n\t\treturn {\n\t\t\tconfiguration: workspace.configuration || undefined,\n\t\t\tisUntitled: workspace.configuration ? isUntitledWorkspace(workspace.configuration, this._environmentService) : false,\n\t\t\tfolders: workspace.folders,\n\t\t\tid: workspace.id,\n\t\t\tname: this._labelService.getWorkspaceLabel(workspace),\n\t\t\ttransient: workspace.transient\n\t\t};\n\t}\n\n\t// --- search ---\n\n\t$startFileSearch(_includeFolder: UriComponents | null, options: IFileQueryBuilderOptions<UriComponents>, token: CancellationToken): Promise<UriComponents[] | null> {\n\t\tconst includeFolder = URI.revive(_includeFolder);\n\t\tconst workspace = this._contextService.getWorkspace();\n\n\t\tconst query = this._queryBuilder.file(\n\t\t\tincludeFolder ? [includeFolder] : workspace.folders,\n\t\t\trevive(options)\n\t\t);\n\n\t\treturn this._searchService.fileSearch(query, token).then(result => {\n\t\t\treturn result.results.map(m => m.resource);\n\t\t}, err => {\n\t\t\tif (!isCancellationError(err)) {\n\t\t\t\treturn Promise.reject(err);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n\n\t$startTextSearch(pattern: IPatternInfo, _folder: UriComponents | null, options: ITextQueryBuilderOptions<UriComponents>, requestId: number, token: CancellationToken): Promise<ITextSearchComplete | null> {\n\t\tconst folder = URI.revive(_folder);\n\t\tconst workspace = this._contextService.getWorkspace();\n\t\tconst folders = folder ? [folder] : workspace.folders.map(folder => folder.uri);\n\n\t\tconst query = this._queryBuilder.text(pattern, folders, revive(options));\n\t\tquery._reason = 'startTextSearch';\n\n\t\tconst onProgress = (p: ISearchProgressItem) => {\n\t\t\tif ((<IFileMatch>p).results) {\n\t\t\t\tthis._proxy.$handleTextSearchResult(<IFileMatch>p, requestId);\n\t\t\t}\n\t\t};\n\n\t\tconst search = this._searchService.textSearch(query, token, onProgress).then(\n\t\t\tresult => {\n\t\t\t\treturn { limitHit: result.limitHit };\n\t\t\t},\n\t\t\terr => {\n\t\t\t\tif (!isCancellationError(err)) {\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\treturn search;\n\t}\n\n\t$checkExists(folders: readonly UriComponents[], includes: string[], token: CancellationToken): Promise<boolean> {\n\t\treturn this._instantiationService.invokeFunction((accessor) => checkGlobFileExists(accessor, folders, includes, token));\n\t}\n\n\t// --- save & edit resources ---\n\n\tasync $save(uriComponents: UriComponents, options: { saveAs: boolean }): Promise<UriComponents | undefined> {\n\t\tconst uri = URI.revive(uriComponents);\n\n\t\tconst editors = [...this._editorService.findEditors(uri, { supportSideBySide: SideBySideEditor.PRIMARY })];\n\t\tconst result = await this._editorService.save(editors, {\n\t\t\treason: SaveReason.EXPLICIT,\n\t\t\tsaveAs: options.saveAs,\n\t\t\tforce: !options.saveAs\n\t\t});\n\n\t\treturn this._saveResultToUris(result).at(0);\n\t}\n\n\tprivate _saveResultToUris(result: ISaveEditorsResult): URI[] {\n\t\tif (!result.success) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn coalesce(result.editors.map(editor => EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY })));\n\t}\n\n\t$saveAll(includeUntitled?: boolean): Promise<boolean> {\n\t\treturn this._editorService.saveAll({ includeUntitled }).then(res => res.success);\n\t}\n\n\t$resolveProxy(url: string): Promise<string | undefined> {\n\t\treturn this._requestService.resolveProxy(url);\n\t}\n\n\t$lookupAuthorization(authInfo: AuthInfo): Promise<Credentials | undefined> {\n\t\treturn this._requestService.lookupAuthorization(authInfo);\n\t}\n\n\t$lookupKerberosAuthorization(url: string): Promise<string | undefined> {\n\t\treturn this._requestService.lookupKerberosAuthorization(url);\n\t}\n\n\t$loadCertificates(): Promise<string[]> {\n\t\treturn this._requestService.loadCertificates();\n\t}\n\n\t// --- trust ---\n\n\t$requestWorkspaceTrust(options?: WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n\t\treturn this._workspaceTrustRequestService.requestWorkspaceTrust(options);\n\t}\n\n\tprivate isWorkspaceTrusted(): boolean {\n\t\treturn this._workspaceTrustManagementService.isWorkspaceTrusted();\n\t}\n\n\tprivate _onDidGrantWorkspaceTrust(): void {\n\t\tthis._proxy.$onDidGrantWorkspaceTrust();\n\t}\n\n\t// --- edit sessions ---\n\tprivate registeredEditSessionProviders = new Map<number, IDisposable>();\n\n\t$registerEditSessionIdentityProvider(handle: number, scheme: string) {\n\t\tconst disposable = this._editSessionIdentityService.registerEditSessionIdentityProvider({\n\t\t\tscheme: scheme,\n\t\t\tgetEditSessionIdentifier: async (workspaceFolder: WorkspaceFolder, token: CancellationToken) => {\n\t\t\t\treturn this._proxy.$getEditSessionIdentifier(workspaceFolder.uri, token);\n\t\t\t},\n\t\t\tprovideEditSessionIdentityMatch: async (workspaceFolder: WorkspaceFolder, identity1: string, identity2: string, token: CancellationToken) => {\n\t\t\t\treturn this._proxy.$provideEditSessionIdentityMatch(workspaceFolder.uri, identity1, identity2, token);\n\t\t\t}\n\t\t});\n\n\t\tthis.registeredEditSessionProviders.set(handle, disposable);\n\t\tthis._toDispose.add(disposable);\n\t}\n\n\t$unregisterEditSessionIdentityProvider(handle: number) {\n\t\tconst disposable = this.registeredEditSessionProviders.get(handle);\n\t\tdisposable?.dispose();\n\t\tthis.registeredEditSessionProviders.delete(handle);\n\t}\n\n\t// --- canonical uri identities ---\n\tprivate registeredCanonicalUriProviders = new Map<number, IDisposable>();\n\n\t$registerCanonicalUriProvider(handle: number, scheme: string) {\n\t\tconst disposable = this._canonicalUriService.registerCanonicalUriProvider({\n\t\t\tscheme: scheme,\n\t\t\tprovideCanonicalUri: async (uri: UriComponents, targetScheme: string, token: CancellationToken) => {\n\t\t\t\tconst result = await this._proxy.$provideCanonicalUri(uri, targetScheme, token);\n\t\t\t\tif (result) {\n\t\t\t\t\treturn URI.revive(result);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t});\n\n\t\tthis.registeredCanonicalUriProviders.set(handle, disposable);\n\t\tthis._toDispose.add(disposable);\n\t}\n\n\t$unregisterCanonicalUriProvider(handle: number) {\n\t\tconst disposable = this.registeredCanonicalUriProviders.get(handle);\n\t\tdisposable?.dispose();\n\t\tthis.registeredCanonicalUriProviders.delete(handle);\n\t}\n\n\t// --- encodings\n\n\t$resolveDecoding(resource: UriComponents | undefined, options?: { encoding: string }): Promise<{ preferredEncoding: string; guessEncoding: boolean; candidateGuessEncodings: string[] }> {\n\t\treturn this._textFileService.resolveDecoding(URI.revive(resource), options);\n\t}\n\n\t$validateDetectedEncoding(resource: UriComponents | undefined, detectedEncoding: string, options?: { encoding?: string }): Promise<string> {\n\t\treturn this._textFileService.validateDetectedEncoding(URI.revive(resource), detectedEncoding, options);\n\t}\n\n\t$resolveEncoding(resource: UriComponents | undefined, options?: { encoding: string }): Promise<{ encoding: string; addBOM: boolean }> {\n\t\treturn this._textFileService.resolveEncoding(URI.revive(resource), options);\n\t}\n}\n"]}