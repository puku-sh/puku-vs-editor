{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadConfiguration.ts","vs/workbench/api/browser/mainThreadConfiguration.ts"],"names":[],"mappings":"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","file":"mainThreadConfiguration.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../base/common/uri.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions, ConfigurationScope, getScopes } from '../../../platform/configuration/common/configurationRegistry.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../platform/workspace/common/workspace.js';\nimport { MainThreadConfigurationShape, MainContext, ExtHostContext, IConfigurationInitData } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ConfigurationTarget, IConfigurationService, IConfigurationOverrides } from '../../../platform/configuration/common/configuration.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\n\n@extHostNamedCustomer(MainContext.MainThreadConfiguration)\nexport class MainThreadConfiguration implements MainThreadConfigurationShape {\n\n\tprivate readonly _configurationListener: IDisposable;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEnvironmentService private readonly _environmentService: IEnvironmentService,\n\t) {\n\t\tconst proxy = extHostContext.getProxy(ExtHostContext.ExtHostConfiguration);\n\n\t\tproxy.$initializeConfiguration(this._getConfigurationData());\n\t\tthis._configurationListener = configurationService.onDidChangeConfiguration(e => {\n\t\t\tproxy.$acceptConfigurationChanged(this._getConfigurationData(), e.change);\n\t\t});\n\t}\n\n\tprivate _getConfigurationData(): IConfigurationInitData {\n\t\tconst configurationData: IConfigurationInitData = { ...(this.configurationService.getConfigurationData()!), configurationScopes: [] };\n\t\t// Send configurations scopes only in development mode.\n\t\tif (!this._environmentService.isBuilt || this._environmentService.isExtensionDevelopment) {\n\t\t\tconfigurationData.configurationScopes = getScopes();\n\t\t}\n\t\treturn configurationData;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._configurationListener.dispose();\n\t}\n\n\t$updateConfigurationOption(target: ConfigurationTarget | null, key: string, value: unknown, overrides: IConfigurationOverrides | undefined, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\toverrides = { resource: overrides?.resource ? URI.revive(overrides.resource) : undefined, overrideIdentifier: overrides?.overrideIdentifier };\n\t\treturn this.writeConfiguration(target, key, value, overrides, scopeToLanguage);\n\t}\n\n\t$removeConfigurationOption(target: ConfigurationTarget | null, key: string, overrides: IConfigurationOverrides | undefined, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\toverrides = { resource: overrides?.resource ? URI.revive(overrides.resource) : undefined, overrideIdentifier: overrides?.overrideIdentifier };\n\t\treturn this.writeConfiguration(target, key, undefined, overrides, scopeToLanguage);\n\t}\n\n\tprivate writeConfiguration(target: ConfigurationTarget | null, key: string, value: unknown, overrides: IConfigurationOverrides, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\ttarget = target !== null && target !== undefined ? target : this.deriveConfigurationTarget(key, overrides);\n\t\tconst configurationValue = this.configurationService.inspect(key, overrides);\n\t\tswitch (target) {\n\t\t\tcase ConfigurationTarget.MEMORY:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.memory?.override, overrides, scopeToLanguage);\n\t\t\tcase ConfigurationTarget.WORKSPACE_FOLDER:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.workspaceFolder?.override, overrides, scopeToLanguage);\n\t\t\tcase ConfigurationTarget.WORKSPACE:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.workspace?.override, overrides, scopeToLanguage);\n\t\t\tcase ConfigurationTarget.USER_REMOTE:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.userRemote?.override, overrides, scopeToLanguage);\n\t\t\tdefault:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.userLocal?.override, overrides, scopeToLanguage);\n\t\t}\n\t}\n\n\tprivate _updateValue(key: string, value: unknown, configurationTarget: ConfigurationTarget, overriddenValue: unknown | undefined, overrides: IConfigurationOverrides, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\toverrides = scopeToLanguage === true ? overrides\n\t\t\t: scopeToLanguage === false ? { resource: overrides.resource }\n\t\t\t\t: overrides.overrideIdentifier && overriddenValue !== undefined ? overrides\n\t\t\t\t\t: { resource: overrides.resource };\n\t\treturn this.configurationService.updateValue(key, value, overrides, configurationTarget, { donotNotifyError: true });\n\t}\n\n\tprivate deriveConfigurationTarget(key: string, overrides: IConfigurationOverrides): ConfigurationTarget {\n\t\tif (overrides.resource && this._workspaceContextService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\t\t\tconst configurationProperties = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).getConfigurationProperties();\n\t\t\tif (configurationProperties[key] && (configurationProperties[key].scope === ConfigurationScope.RESOURCE || configurationProperties[key].scope === ConfigurationScope.LANGUAGE_OVERRIDABLE)) {\n\t\t\t\treturn ConfigurationTarget.WORKSPACE_FOLDER;\n\t\t\t}\n\t\t}\n\t\treturn ConfigurationTarget.WORKSPACE;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../base/common/uri.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions, ConfigurationScope, getScopes } from '../../../platform/configuration/common/configurationRegistry.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../platform/workspace/common/workspace.js';\nimport { MainThreadConfigurationShape, MainContext, ExtHostContext, IConfigurationInitData } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ConfigurationTarget, IConfigurationService, IConfigurationOverrides } from '../../../platform/configuration/common/configuration.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\n\n@extHostNamedCustomer(MainContext.MainThreadConfiguration)\nexport class MainThreadConfiguration implements MainThreadConfigurationShape {\n\n\tprivate readonly _configurationListener: IDisposable;\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEnvironmentService private readonly _environmentService: IEnvironmentService,\n\t) {\n\t\tconst proxy = extHostContext.getProxy(ExtHostContext.ExtHostConfiguration);\n\n\t\tproxy.$initializeConfiguration(this._getConfigurationData());\n\t\tthis._configurationListener = configurationService.onDidChangeConfiguration(e => {\n\t\t\tproxy.$acceptConfigurationChanged(this._getConfigurationData(), e.change);\n\t\t});\n\t}\n\n\tprivate _getConfigurationData(): IConfigurationInitData {\n\t\tconst configurationData: IConfigurationInitData = { ...(this.configurationService.getConfigurationData()!), configurationScopes: [] };\n\t\t// Send configurations scopes only in development mode.\n\t\tif (!this._environmentService.isBuilt || this._environmentService.isExtensionDevelopment) {\n\t\t\tconfigurationData.configurationScopes = getScopes();\n\t\t}\n\t\treturn configurationData;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._configurationListener.dispose();\n\t}\n\n\t$updateConfigurationOption(target: ConfigurationTarget | null, key: string, value: unknown, overrides: IConfigurationOverrides | undefined, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\toverrides = { resource: overrides?.resource ? URI.revive(overrides.resource) : undefined, overrideIdentifier: overrides?.overrideIdentifier };\n\t\treturn this.writeConfiguration(target, key, value, overrides, scopeToLanguage);\n\t}\n\n\t$removeConfigurationOption(target: ConfigurationTarget | null, key: string, overrides: IConfigurationOverrides | undefined, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\toverrides = { resource: overrides?.resource ? URI.revive(overrides.resource) : undefined, overrideIdentifier: overrides?.overrideIdentifier };\n\t\treturn this.writeConfiguration(target, key, undefined, overrides, scopeToLanguage);\n\t}\n\n\tprivate writeConfiguration(target: ConfigurationTarget | null, key: string, value: unknown, overrides: IConfigurationOverrides, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\ttarget = target !== null && target !== undefined ? target : this.deriveConfigurationTarget(key, overrides);\n\t\tconst configurationValue = this.configurationService.inspect(key, overrides);\n\t\tswitch (target) {\n\t\t\tcase ConfigurationTarget.MEMORY:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.memory?.override, overrides, scopeToLanguage);\n\t\t\tcase ConfigurationTarget.WORKSPACE_FOLDER:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.workspaceFolder?.override, overrides, scopeToLanguage);\n\t\t\tcase ConfigurationTarget.WORKSPACE:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.workspace?.override, overrides, scopeToLanguage);\n\t\t\tcase ConfigurationTarget.USER_REMOTE:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.userRemote?.override, overrides, scopeToLanguage);\n\t\t\tdefault:\n\t\t\t\treturn this._updateValue(key, value, target, configurationValue?.userLocal?.override, overrides, scopeToLanguage);\n\t\t}\n\t}\n\n\tprivate _updateValue(key: string, value: unknown, configurationTarget: ConfigurationTarget, overriddenValue: unknown | undefined, overrides: IConfigurationOverrides, scopeToLanguage: boolean | undefined): Promise<void> {\n\t\toverrides = scopeToLanguage === true ? overrides\n\t\t\t: scopeToLanguage === false ? { resource: overrides.resource }\n\t\t\t\t: overrides.overrideIdentifier && overriddenValue !== undefined ? overrides\n\t\t\t\t\t: { resource: overrides.resource };\n\t\treturn this.configurationService.updateValue(key, value, overrides, configurationTarget, { donotNotifyError: true });\n\t}\n\n\tprivate deriveConfigurationTarget(key: string, overrides: IConfigurationOverrides): ConfigurationTarget {\n\t\tif (overrides.resource && this._workspaceContextService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\t\t\tconst configurationProperties = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).getConfigurationProperties();\n\t\t\tif (configurationProperties[key] && (configurationProperties[key].scope === ConfigurationScope.RESOURCE || configurationProperties[key].scope === ConfigurationScope.LANGUAGE_OVERRIDABLE)) {\n\t\t\t\treturn ConfigurationTarget.WORKSPACE_FOLDER;\n\t\t\t}\n\t\t}\n\t\treturn ConfigurationTarget.WORKSPACE;\n\t}\n}\n"]}