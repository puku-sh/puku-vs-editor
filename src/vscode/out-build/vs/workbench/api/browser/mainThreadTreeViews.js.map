{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadTreeViews.ts","vs/workbench/api/browser/mainThreadTreeViews.ts"],"names":[],"mappings":"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","file":"mainThreadTreeViews.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableMap, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ExtHostContext, MainThreadTreeViewsShape, ExtHostTreeViewsShape, MainContext, CheckboxUpdate } from '../common/extHost.protocol.js';\nimport { ITreeItem, ITreeView, IViewsRegistry, ITreeViewDescriptor, IRevealOptions, Extensions, ResolvableTreeItem, ITreeViewDragAndDropController, IViewBadge, NoTreeViewError, ITreeViewDataProvider } from '../../common/views.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { distinct } from '../../../base/common/arrays.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { isUndefinedOrNull, isNumber } from '../../../base/common/types.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { IExtensionService } from '../../services/extensions/common/extensions.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { createStringDataTransferItem, VSDataTransfer } from '../../../base/common/dataTransfer.js';\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { DataTransferFileCache } from '../common/shared/dataTransferCache.js';\nimport * as typeConvert from '../common/extHostTypeConverters.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IViewsService } from '../../services/views/common/viewsService.js';\n\n@extHostNamedCustomer(MainContext.MainThreadTreeViews)\nexport class MainThreadTreeViews extends Disposable implements MainThreadTreeViewsShape {\n\n\tprivate readonly _proxy: ExtHostTreeViewsShape;\n\tprivate readonly _dataProviders: DisposableMap<string, { dataProvider: TreeViewDataProvider; dispose: () => void }> = this._register(new DisposableMap<string, { dataProvider: TreeViewDataProvider; dispose: () => void }>());\n\tprivate readonly _dndControllers = new Map<string, TreeViewDragAndDropController>();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper();\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostTreeViews);\n\t}\n\n\tasync $registerTreeViewDataProvider(treeViewId: string, options: { showCollapseAll: boolean; canSelectMany: boolean; dropMimeTypes: string[]; dragMimeTypes: string[]; hasHandleDrag: boolean; hasHandleDrop: boolean; manuallyManageCheckboxes: boolean }): Promise<void> {\n\t\tthis.logService.trace('MainThreadTreeViews#$registerTreeViewDataProvider', treeViewId, options);\n\n\t\tthis.extensionService.whenInstalledExtensionsRegistered().then(() => {\n\t\t\tconst dataProvider = new TreeViewDataProvider(treeViewId, this._proxy, this.notificationService);\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tthis._dataProviders.set(treeViewId, { dataProvider, dispose: () => disposables.dispose() });\n\t\t\tconst dndController = (options.hasHandleDrag || options.hasHandleDrop)\n\t\t\t\t? new TreeViewDragAndDropController(treeViewId, options.dropMimeTypes, options.dragMimeTypes, options.hasHandleDrag, this._proxy) : undefined;\n\t\t\tconst viewer = this.getTreeView(treeViewId);\n\t\t\tif (viewer) {\n\t\t\t\t// Order is important here. The internal tree isn't created until the dataProvider is set.\n\t\t\t\t// Set all other properties first!\n\t\t\t\tviewer.showCollapseAllAction = options.showCollapseAll;\n\t\t\t\tviewer.canSelectMany = options.canSelectMany;\n\t\t\t\tviewer.manuallyManageCheckboxes = options.manuallyManageCheckboxes;\n\t\t\t\tviewer.dragAndDropController = dndController;\n\t\t\t\tif (dndController) {\n\t\t\t\t\tthis._dndControllers.set(treeViewId, dndController);\n\t\t\t\t}\n\t\t\t\tviewer.dataProvider = dataProvider;\n\t\t\t\tthis.registerListeners(treeViewId, viewer, disposables);\n\t\t\t\tthis._proxy.$setVisible(treeViewId, viewer.visible);\n\t\t\t} else {\n\t\t\t\tthis.notificationService.error('No view is registered with id: ' + treeViewId);\n\t\t\t}\n\t\t});\n\t}\n\n\t$reveal(treeViewId: string, itemInfo: { item: ITreeItem; parentChain: ITreeItem[] } | undefined, options: IRevealOptions): Promise<void> {\n\t\tthis.logService.trace('MainThreadTreeViews#$reveal', treeViewId, itemInfo?.item, itemInfo?.parentChain, options);\n\n\t\treturn this.viewsService.openView(treeViewId, options.focus)\n\t\t\t.then(() => {\n\t\t\t\tconst viewer = this.getTreeView(treeViewId);\n\t\t\t\tif (viewer && itemInfo) {\n\t\t\t\t\treturn this.reveal(viewer, this._dataProviders.get(treeViewId)!.dataProvider, itemInfo.item, itemInfo.parentChain, options);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t}\n\n\t$refresh(treeViewId: string, itemsToRefreshByHandle: { [treeItemHandle: string]: ITreeItem }): Promise<void> {\n\t\tthis.logService.trace('MainThreadTreeViews#$refresh', treeViewId, itemsToRefreshByHandle);\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tconst dataProvider = this._dataProviders.get(treeViewId);\n\t\tif (viewer && dataProvider) {\n\t\t\tconst itemsToRefresh = dataProvider.dataProvider.getItemsToRefresh(itemsToRefreshByHandle);\n\t\t\treturn viewer.refresh(itemsToRefresh.items.length ? itemsToRefresh.items : undefined, itemsToRefresh.checkboxes.length ? itemsToRefresh.checkboxes : undefined);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t$setMessage(treeViewId: string, message: string | IMarkdownString): void {\n\t\tthis.logService.trace('MainThreadTreeViews#$setMessage', treeViewId, message.toString());\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.message = message;\n\t\t}\n\t}\n\n\t$setTitle(treeViewId: string, title: string, description: string | undefined): void {\n\t\tthis.logService.trace('MainThreadTreeViews#$setTitle', treeViewId, title, description);\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.title = title;\n\t\t\tviewer.description = description;\n\t\t}\n\t}\n\n\t$setBadge(treeViewId: string, badge: IViewBadge | undefined): void {\n\t\tthis.logService.trace('MainThreadTreeViews#$setBadge', treeViewId, badge?.value, badge?.tooltip);\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.badge = badge;\n\t\t}\n\t}\n\n\t$resolveDropFileData(destinationViewId: string, requestId: number, dataItemId: string): Promise<VSBuffer> {\n\t\tconst controller = this._dndControllers.get(destinationViewId);\n\t\tif (!controller) {\n\t\t\tthrow new Error('Unknown tree');\n\t\t}\n\t\treturn controller.resolveDropFileData(requestId, dataItemId);\n\t}\n\n\tpublic async $disposeTree(treeViewId: string): Promise<void> {\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.dataProvider = undefined;\n\t\t}\n\n\t\tthis._dataProviders.deleteAndDispose(treeViewId);\n\t}\n\n\tprivate async reveal(treeView: ITreeView, dataProvider: TreeViewDataProvider, itemIn: ITreeItem, parentChain: ITreeItem[], options: IRevealOptions): Promise<void> {\n\t\toptions = options ? options : { select: false, focus: false };\n\t\tconst select = isUndefinedOrNull(options.select) ? false : options.select;\n\t\tconst focus = isUndefinedOrNull(options.focus) ? false : options.focus;\n\t\tlet expand = Math.min(isNumber(options.expand) ? options.expand : options.expand === true ? 1 : 0, 3);\n\n\t\tif (dataProvider.isEmpty()) {\n\t\t\t// Refresh if empty\n\t\t\tawait treeView.refresh();\n\t\t}\n\t\tfor (const parent of parentChain) {\n\t\t\tconst parentItem = dataProvider.getItem(parent.handle);\n\t\t\tif (parentItem) {\n\t\t\t\tawait treeView.expand(parentItem);\n\t\t\t}\n\t\t}\n\t\tconst item = dataProvider.getItem(itemIn.handle);\n\t\tif (item) {\n\t\t\tawait treeView.reveal(item);\n\t\t\tif (select) {\n\t\t\t\ttreeView.setSelection([item]);\n\t\t\t}\n\t\t\tif (focus === false) {\n\t\t\t\ttreeView.setFocus();\n\t\t\t} else if (focus) {\n\t\t\t\ttreeView.setFocus(item);\n\t\t\t}\n\t\t\tlet itemsToExpand = [item];\n\t\t\tfor (; itemsToExpand.length > 0 && expand > 0; expand--) {\n\t\t\t\tawait treeView.expand(itemsToExpand);\n\t\t\t\titemsToExpand = itemsToExpand.reduce((result, itemValue) => {\n\t\t\t\t\tconst item = dataProvider.getItem(itemValue.handle);\n\t\t\t\t\tif (item && item.children && item.children.length) {\n\t\t\t\t\t\tresult.push(...item.children);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}, [] as ITreeItem[]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate registerListeners(treeViewId: string, treeView: ITreeView, disposables: DisposableStore): void {\n\t\tdisposables.add(treeView.onDidExpandItem(item => this._proxy.$setExpanded(treeViewId, item.handle, true)));\n\t\tdisposables.add(treeView.onDidCollapseItem(item => this._proxy.$setExpanded(treeViewId, item.handle, false)));\n\t\tdisposables.add(treeView.onDidChangeSelectionAndFocus(items => this._proxy.$setSelectionAndFocus(treeViewId, items.selection.map(({ handle }) => handle), items.focus.handle)));\n\t\tdisposables.add(treeView.onDidChangeVisibility(isVisible => this._proxy.$setVisible(treeViewId, isVisible)));\n\t\tdisposables.add(treeView.onDidChangeCheckboxState(items => {\n\t\t\tthis._proxy.$changeCheckboxState(treeViewId, <CheckboxUpdate[]>items.map(item => {\n\t\t\t\treturn { treeItemHandle: item.handle, newState: item.checkbox?.isChecked ?? false };\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate getTreeView(treeViewId: string): ITreeView | null {\n\t\tconst viewDescriptor: ITreeViewDescriptor = <ITreeViewDescriptor>Registry.as<IViewsRegistry>(Extensions.ViewsRegistry).getView(treeViewId);\n\t\treturn viewDescriptor ? viewDescriptor.treeView : null;\n\t}\n\n\toverride dispose(): void {\n\t\tfor (const dataprovider of this._dataProviders) {\n\t\t\tconst treeView = this.getTreeView(dataprovider[0]);\n\t\t\tif (treeView) {\n\t\t\t\ttreeView.dataProvider = undefined;\n\t\t\t}\n\t\t}\n\t\tthis._dataProviders.dispose();\n\n\t\tthis._dndControllers.clear();\n\n\t\tsuper.dispose();\n\t}\n}\n\ntype TreeItemHandle = string;\n\nclass TreeViewDragAndDropController implements ITreeViewDragAndDropController {\n\n\tprivate readonly dataTransfersCache = new DataTransferFileCache();\n\n\tconstructor(private readonly treeViewId: string,\n\t\treadonly dropMimeTypes: string[],\n\t\treadonly dragMimeTypes: string[],\n\t\treadonly hasWillDrop: boolean,\n\t\tprivate readonly _proxy: ExtHostTreeViewsShape) { }\n\n\tasync handleDrop(dataTransfer: VSDataTransfer, targetTreeItem: ITreeItem | undefined, token: CancellationToken,\n\t\toperationUuid?: string, sourceTreeId?: string, sourceTreeItemHandles?: string[]): Promise<void> {\n\t\tconst request = this.dataTransfersCache.add(dataTransfer);\n\t\ttry {\n\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.fromList(dataTransfer);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn await this._proxy.$handleDrop(this.treeViewId, request.id, dataTransferDto, targetTreeItem?.handle, token, operationUuid, sourceTreeId, sourceTreeItemHandles);\n\t\t} finally {\n\t\t\trequest.dispose();\n\t\t}\n\t}\n\n\tasync handleDrag(sourceTreeItemHandles: string[], operationUuid: string, token: CancellationToken): Promise<VSDataTransfer | undefined> {\n\t\tif (!this.hasWillDrop) {\n\t\t\treturn;\n\t\t}\n\t\tconst additionalDataTransferDTO = await this._proxy.$handleDrag(this.treeViewId, sourceTreeItemHandles, operationUuid, token);\n\t\tif (!additionalDataTransferDTO) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst additionalDataTransfer = new VSDataTransfer();\n\t\tadditionalDataTransferDTO.items.forEach(([type, item]) => {\n\t\t\tadditionalDataTransfer.replace(type, createStringDataTransferItem(item.asString));\n\t\t});\n\t\treturn additionalDataTransfer;\n\t}\n\n\tpublic resolveDropFileData(requestId: number, dataItemId: string): Promise<VSBuffer> {\n\t\treturn this.dataTransfersCache.resolveFileData(requestId, dataItemId);\n\t}\n}\n\nclass TreeViewDataProvider implements ITreeViewDataProvider {\n\n\tprivate readonly itemsMap: Map<TreeItemHandle, ITreeItem> = new Map<TreeItemHandle, ITreeItem>();\n\tprivate hasResolve: Promise<boolean>;\n\n\tconstructor(private readonly treeViewId: string,\n\t\tprivate readonly _proxy: ExtHostTreeViewsShape,\n\t\tprivate readonly notificationService: INotificationService\n\t) {\n\t\tthis.hasResolve = this._proxy.$hasResolve(this.treeViewId);\n\t}\n\n\tasync getChildren(treeItem?: ITreeItem): Promise<ITreeItem[] | undefined> {\n\t\tconst batches = await this.getChildrenBatch(treeItem ? [treeItem] : undefined);\n\t\treturn batches?.[0];\n\t}\n\n\tgetChildrenBatch(treeItems?: ITreeItem[]): Promise<ITreeItem[][] | undefined> {\n\t\tif (!treeItems) {\n\t\t\tthis.itemsMap.clear();\n\t\t}\n\t\treturn this._proxy.$getChildren(this.treeViewId, treeItems ? treeItems.map(item => item.handle) : undefined)\n\t\t\t.then(\n\t\t\t\tchildren => {\n\t\t\t\t\tconst convertedChildren = this.convertTransferChildren(treeItems ?? [], children);\n\t\t\t\t\treturn this.postGetChildren(convertedChildren);\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\t// It can happen that a tree view is disposed right as `getChildren` is called. This results in an error because the data provider gets removed.\n\t\t\t\t\t// The tree will shortly get cleaned up in this case. We just need to handle the error here.\n\t\t\t\t\tif (!NoTreeViewError.is(err)) {\n\t\t\t\t\t\tthis.notificationService.error(err);\n\t\t\t\t\t}\n\t\t\t\t\treturn [];\n\t\t\t\t});\n\t}\n\n\tprivate convertTransferChildren(parents: ITreeItem[], children: (number | ITreeItem)[][] | undefined) {\n\t\tconst convertedChildren: (ITreeItem[] | undefined)[] = Array(parents.length);\n\t\tif (children) {\n\t\t\tfor (const childGroup of children) {\n\t\t\t\tconst childGroupIndex = childGroup[0] as number;\n\t\t\t\tconvertedChildren[childGroupIndex] = childGroup.slice(1) as ITreeItem[];\n\t\t\t}\n\t\t}\n\t\treturn convertedChildren;\n\t}\n\n\tgetItemsToRefresh(itemsToRefreshByHandle: { [treeItemHandle: string]: ITreeItem }): { items: ITreeItem[]; checkboxes: ITreeItem[] } {\n\t\tconst itemsToRefresh: ITreeItem[] = [];\n\t\tconst checkboxesToRefresh: ITreeItem[] = [];\n\t\tif (itemsToRefreshByHandle) {\n\t\t\tfor (const newTreeItemHandle of Object.keys(itemsToRefreshByHandle)) {\n\t\t\t\tconst currentTreeItem = this.getItem(newTreeItemHandle);\n\t\t\t\tif (currentTreeItem) { // Refresh only if the item exists\n\t\t\t\t\tconst newTreeItem = itemsToRefreshByHandle[newTreeItemHandle];\n\t\t\t\t\tif (currentTreeItem.checkbox?.isChecked !== newTreeItem.checkbox?.isChecked) {\n\t\t\t\t\t\tcheckboxesToRefresh.push(currentTreeItem);\n\t\t\t\t\t}\n\t\t\t\t\t// Update the current item with refreshed item\n\t\t\t\t\tthis.updateTreeItem(currentTreeItem, newTreeItem);\n\t\t\t\t\tif (newTreeItemHandle === newTreeItem.handle) {\n\t\t\t\t\t\titemsToRefresh.push(currentTreeItem);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Update maps when handle is changed and refresh parent\n\t\t\t\t\t\tthis.itemsMap.delete(newTreeItemHandle);\n\t\t\t\t\t\tthis.itemsMap.set(currentTreeItem.handle, currentTreeItem);\n\t\t\t\t\t\tconst parent = newTreeItem.parentHandle ? this.itemsMap.get(newTreeItem.parentHandle) : null;\n\t\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t\titemsToRefresh.push(parent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { items: itemsToRefresh, checkboxes: checkboxesToRefresh };\n\t}\n\n\tgetItem(treeItemHandle: string): ITreeItem | undefined {\n\t\treturn this.itemsMap.get(treeItemHandle);\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.itemsMap.size === 0;\n\t}\n\n\tprivate async postGetChildren(elementGroups: (ITreeItem[] | undefined)[] | undefined): Promise<ResolvableTreeItem[][] | undefined> {\n\t\tif (elementGroups === undefined) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst resultGroups: ResolvableTreeItem[][] = [];\n\t\tconst hasResolve = await this.hasResolve;\n\t\tif (elementGroups) {\n\t\t\tfor (const elements of elementGroups) {\n\t\t\t\tconst result: ResolvableTreeItem[] = [];\n\t\t\t\tresultGroups.push(result);\n\t\t\t\tif (!elements) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (const element of elements) {\n\t\t\t\t\tconst resolvable = new ResolvableTreeItem(element, hasResolve ? (token) => {\n\t\t\t\t\t\treturn this._proxy.$resolve(this.treeViewId, element.handle, token);\n\t\t\t\t\t} : undefined);\n\t\t\t\t\tthis.itemsMap.set(element.handle, resolvable);\n\t\t\t\t\tresult.push(resolvable);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resultGroups;\n\t}\n\n\tprivate updateTreeItem(current: ITreeItem, treeItem: ITreeItem): void {\n\t\ttreeItem.children = treeItem.children ? treeItem.children : undefined;\n\t\tif (current) {\n\t\t\tconst properties = distinct([...Object.keys(current instanceof ResolvableTreeItem ? current.asTreeItem() : current),\n\t\t\t...Object.keys(treeItem)]);\n\t\t\tfor (const property of properties) {\n\t\t\t\t(current as unknown as { [key: string]: unknown })[property] = (treeItem as unknown as { [key: string]: unknown })[property];\n\t\t\t}\n\t\t\tif (current instanceof ResolvableTreeItem) {\n\t\t\t\tcurrent.resetResolve();\n\t\t\t}\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableMap, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ExtHostContext, MainThreadTreeViewsShape, ExtHostTreeViewsShape, MainContext, CheckboxUpdate } from '../common/extHost.protocol.js';\nimport { ITreeItem, ITreeView, IViewsRegistry, ITreeViewDescriptor, IRevealOptions, Extensions, ResolvableTreeItem, ITreeViewDragAndDropController, IViewBadge, NoTreeViewError, ITreeViewDataProvider } from '../../common/views.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { distinct } from '../../../base/common/arrays.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { isUndefinedOrNull, isNumber } from '../../../base/common/types.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { IExtensionService } from '../../services/extensions/common/extensions.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { createStringDataTransferItem, VSDataTransfer } from '../../../base/common/dataTransfer.js';\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { DataTransferFileCache } from '../common/shared/dataTransferCache.js';\nimport * as typeConvert from '../common/extHostTypeConverters.js';\nimport { IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IViewsService } from '../../services/views/common/viewsService.js';\n\n@extHostNamedCustomer(MainContext.MainThreadTreeViews)\nexport class MainThreadTreeViews extends Disposable implements MainThreadTreeViewsShape {\n\n\tprivate readonly _proxy: ExtHostTreeViewsShape;\n\tprivate readonly _dataProviders: DisposableMap<string, { dataProvider: TreeViewDataProvider; dispose: () => void }> = this._register(new DisposableMap<string, { dataProvider: TreeViewDataProvider; dispose: () => void }>());\n\tprivate readonly _dndControllers = new Map<string, TreeViewDragAndDropController>();\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper();\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostTreeViews);\n\t}\n\n\tasync $registerTreeViewDataProvider(treeViewId: string, options: { showCollapseAll: boolean; canSelectMany: boolean; dropMimeTypes: string[]; dragMimeTypes: string[]; hasHandleDrag: boolean; hasHandleDrop: boolean; manuallyManageCheckboxes: boolean }): Promise<void> {\n\t\tthis.logService.trace('MainThreadTreeViews#$registerTreeViewDataProvider', treeViewId, options);\n\n\t\tthis.extensionService.whenInstalledExtensionsRegistered().then(() => {\n\t\t\tconst dataProvider = new TreeViewDataProvider(treeViewId, this._proxy, this.notificationService);\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tthis._dataProviders.set(treeViewId, { dataProvider, dispose: () => disposables.dispose() });\n\t\t\tconst dndController = (options.hasHandleDrag || options.hasHandleDrop)\n\t\t\t\t? new TreeViewDragAndDropController(treeViewId, options.dropMimeTypes, options.dragMimeTypes, options.hasHandleDrag, this._proxy) : undefined;\n\t\t\tconst viewer = this.getTreeView(treeViewId);\n\t\t\tif (viewer) {\n\t\t\t\t// Order is important here. The internal tree isn't created until the dataProvider is set.\n\t\t\t\t// Set all other properties first!\n\t\t\t\tviewer.showCollapseAllAction = options.showCollapseAll;\n\t\t\t\tviewer.canSelectMany = options.canSelectMany;\n\t\t\t\tviewer.manuallyManageCheckboxes = options.manuallyManageCheckboxes;\n\t\t\t\tviewer.dragAndDropController = dndController;\n\t\t\t\tif (dndController) {\n\t\t\t\t\tthis._dndControllers.set(treeViewId, dndController);\n\t\t\t\t}\n\t\t\t\tviewer.dataProvider = dataProvider;\n\t\t\t\tthis.registerListeners(treeViewId, viewer, disposables);\n\t\t\t\tthis._proxy.$setVisible(treeViewId, viewer.visible);\n\t\t\t} else {\n\t\t\t\tthis.notificationService.error('No view is registered with id: ' + treeViewId);\n\t\t\t}\n\t\t});\n\t}\n\n\t$reveal(treeViewId: string, itemInfo: { item: ITreeItem; parentChain: ITreeItem[] } | undefined, options: IRevealOptions): Promise<void> {\n\t\tthis.logService.trace('MainThreadTreeViews#$reveal', treeViewId, itemInfo?.item, itemInfo?.parentChain, options);\n\n\t\treturn this.viewsService.openView(treeViewId, options.focus)\n\t\t\t.then(() => {\n\t\t\t\tconst viewer = this.getTreeView(treeViewId);\n\t\t\t\tif (viewer && itemInfo) {\n\t\t\t\t\treturn this.reveal(viewer, this._dataProviders.get(treeViewId)!.dataProvider, itemInfo.item, itemInfo.parentChain, options);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t}\n\n\t$refresh(treeViewId: string, itemsToRefreshByHandle: { [treeItemHandle: string]: ITreeItem }): Promise<void> {\n\t\tthis.logService.trace('MainThreadTreeViews#$refresh', treeViewId, itemsToRefreshByHandle);\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tconst dataProvider = this._dataProviders.get(treeViewId);\n\t\tif (viewer && dataProvider) {\n\t\t\tconst itemsToRefresh = dataProvider.dataProvider.getItemsToRefresh(itemsToRefreshByHandle);\n\t\t\treturn viewer.refresh(itemsToRefresh.items.length ? itemsToRefresh.items : undefined, itemsToRefresh.checkboxes.length ? itemsToRefresh.checkboxes : undefined);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t$setMessage(treeViewId: string, message: string | IMarkdownString): void {\n\t\tthis.logService.trace('MainThreadTreeViews#$setMessage', treeViewId, message.toString());\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.message = message;\n\t\t}\n\t}\n\n\t$setTitle(treeViewId: string, title: string, description: string | undefined): void {\n\t\tthis.logService.trace('MainThreadTreeViews#$setTitle', treeViewId, title, description);\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.title = title;\n\t\t\tviewer.description = description;\n\t\t}\n\t}\n\n\t$setBadge(treeViewId: string, badge: IViewBadge | undefined): void {\n\t\tthis.logService.trace('MainThreadTreeViews#$setBadge', treeViewId, badge?.value, badge?.tooltip);\n\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.badge = badge;\n\t\t}\n\t}\n\n\t$resolveDropFileData(destinationViewId: string, requestId: number, dataItemId: string): Promise<VSBuffer> {\n\t\tconst controller = this._dndControllers.get(destinationViewId);\n\t\tif (!controller) {\n\t\t\tthrow new Error('Unknown tree');\n\t\t}\n\t\treturn controller.resolveDropFileData(requestId, dataItemId);\n\t}\n\n\tpublic async $disposeTree(treeViewId: string): Promise<void> {\n\t\tconst viewer = this.getTreeView(treeViewId);\n\t\tif (viewer) {\n\t\t\tviewer.dataProvider = undefined;\n\t\t}\n\n\t\tthis._dataProviders.deleteAndDispose(treeViewId);\n\t}\n\n\tprivate async reveal(treeView: ITreeView, dataProvider: TreeViewDataProvider, itemIn: ITreeItem, parentChain: ITreeItem[], options: IRevealOptions): Promise<void> {\n\t\toptions = options ? options : { select: false, focus: false };\n\t\tconst select = isUndefinedOrNull(options.select) ? false : options.select;\n\t\tconst focus = isUndefinedOrNull(options.focus) ? false : options.focus;\n\t\tlet expand = Math.min(isNumber(options.expand) ? options.expand : options.expand === true ? 1 : 0, 3);\n\n\t\tif (dataProvider.isEmpty()) {\n\t\t\t// Refresh if empty\n\t\t\tawait treeView.refresh();\n\t\t}\n\t\tfor (const parent of parentChain) {\n\t\t\tconst parentItem = dataProvider.getItem(parent.handle);\n\t\t\tif (parentItem) {\n\t\t\t\tawait treeView.expand(parentItem);\n\t\t\t}\n\t\t}\n\t\tconst item = dataProvider.getItem(itemIn.handle);\n\t\tif (item) {\n\t\t\tawait treeView.reveal(item);\n\t\t\tif (select) {\n\t\t\t\ttreeView.setSelection([item]);\n\t\t\t}\n\t\t\tif (focus === false) {\n\t\t\t\ttreeView.setFocus();\n\t\t\t} else if (focus) {\n\t\t\t\ttreeView.setFocus(item);\n\t\t\t}\n\t\t\tlet itemsToExpand = [item];\n\t\t\tfor (; itemsToExpand.length > 0 && expand > 0; expand--) {\n\t\t\t\tawait treeView.expand(itemsToExpand);\n\t\t\t\titemsToExpand = itemsToExpand.reduce((result, itemValue) => {\n\t\t\t\t\tconst item = dataProvider.getItem(itemValue.handle);\n\t\t\t\t\tif (item && item.children && item.children.length) {\n\t\t\t\t\t\tresult.push(...item.children);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}, [] as ITreeItem[]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate registerListeners(treeViewId: string, treeView: ITreeView, disposables: DisposableStore): void {\n\t\tdisposables.add(treeView.onDidExpandItem(item => this._proxy.$setExpanded(treeViewId, item.handle, true)));\n\t\tdisposables.add(treeView.onDidCollapseItem(item => this._proxy.$setExpanded(treeViewId, item.handle, false)));\n\t\tdisposables.add(treeView.onDidChangeSelectionAndFocus(items => this._proxy.$setSelectionAndFocus(treeViewId, items.selection.map(({ handle }) => handle), items.focus.handle)));\n\t\tdisposables.add(treeView.onDidChangeVisibility(isVisible => this._proxy.$setVisible(treeViewId, isVisible)));\n\t\tdisposables.add(treeView.onDidChangeCheckboxState(items => {\n\t\t\tthis._proxy.$changeCheckboxState(treeViewId, <CheckboxUpdate[]>items.map(item => {\n\t\t\t\treturn { treeItemHandle: item.handle, newState: item.checkbox?.isChecked ?? false };\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate getTreeView(treeViewId: string): ITreeView | null {\n\t\tconst viewDescriptor: ITreeViewDescriptor = <ITreeViewDescriptor>Registry.as<IViewsRegistry>(Extensions.ViewsRegistry).getView(treeViewId);\n\t\treturn viewDescriptor ? viewDescriptor.treeView : null;\n\t}\n\n\toverride dispose(): void {\n\t\tfor (const dataprovider of this._dataProviders) {\n\t\t\tconst treeView = this.getTreeView(dataprovider[0]);\n\t\t\tif (treeView) {\n\t\t\t\ttreeView.dataProvider = undefined;\n\t\t\t}\n\t\t}\n\t\tthis._dataProviders.dispose();\n\n\t\tthis._dndControllers.clear();\n\n\t\tsuper.dispose();\n\t}\n}\n\ntype TreeItemHandle = string;\n\nclass TreeViewDragAndDropController implements ITreeViewDragAndDropController {\n\n\tprivate readonly dataTransfersCache = new DataTransferFileCache();\n\n\tconstructor(private readonly treeViewId: string,\n\t\treadonly dropMimeTypes: string[],\n\t\treadonly dragMimeTypes: string[],\n\t\treadonly hasWillDrop: boolean,\n\t\tprivate readonly _proxy: ExtHostTreeViewsShape) { }\n\n\tasync handleDrop(dataTransfer: VSDataTransfer, targetTreeItem: ITreeItem | undefined, token: CancellationToken,\n\t\toperationUuid?: string, sourceTreeId?: string, sourceTreeItemHandles?: string[]): Promise<void> {\n\t\tconst request = this.dataTransfersCache.add(dataTransfer);\n\t\ttry {\n\t\t\tconst dataTransferDto = await typeConvert.DataTransfer.fromList(dataTransfer);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn await this._proxy.$handleDrop(this.treeViewId, request.id, dataTransferDto, targetTreeItem?.handle, token, operationUuid, sourceTreeId, sourceTreeItemHandles);\n\t\t} finally {\n\t\t\trequest.dispose();\n\t\t}\n\t}\n\n\tasync handleDrag(sourceTreeItemHandles: string[], operationUuid: string, token: CancellationToken): Promise<VSDataTransfer | undefined> {\n\t\tif (!this.hasWillDrop) {\n\t\t\treturn;\n\t\t}\n\t\tconst additionalDataTransferDTO = await this._proxy.$handleDrag(this.treeViewId, sourceTreeItemHandles, operationUuid, token);\n\t\tif (!additionalDataTransferDTO) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst additionalDataTransfer = new VSDataTransfer();\n\t\tadditionalDataTransferDTO.items.forEach(([type, item]) => {\n\t\t\tadditionalDataTransfer.replace(type, createStringDataTransferItem(item.asString));\n\t\t});\n\t\treturn additionalDataTransfer;\n\t}\n\n\tpublic resolveDropFileData(requestId: number, dataItemId: string): Promise<VSBuffer> {\n\t\treturn this.dataTransfersCache.resolveFileData(requestId, dataItemId);\n\t}\n}\n\nclass TreeViewDataProvider implements ITreeViewDataProvider {\n\n\tprivate readonly itemsMap: Map<TreeItemHandle, ITreeItem> = new Map<TreeItemHandle, ITreeItem>();\n\tprivate hasResolve: Promise<boolean>;\n\n\tconstructor(private readonly treeViewId: string,\n\t\tprivate readonly _proxy: ExtHostTreeViewsShape,\n\t\tprivate readonly notificationService: INotificationService\n\t) {\n\t\tthis.hasResolve = this._proxy.$hasResolve(this.treeViewId);\n\t}\n\n\tasync getChildren(treeItem?: ITreeItem): Promise<ITreeItem[] | undefined> {\n\t\tconst batches = await this.getChildrenBatch(treeItem ? [treeItem] : undefined);\n\t\treturn batches?.[0];\n\t}\n\n\tgetChildrenBatch(treeItems?: ITreeItem[]): Promise<ITreeItem[][] | undefined> {\n\t\tif (!treeItems) {\n\t\t\tthis.itemsMap.clear();\n\t\t}\n\t\treturn this._proxy.$getChildren(this.treeViewId, treeItems ? treeItems.map(item => item.handle) : undefined)\n\t\t\t.then(\n\t\t\t\tchildren => {\n\t\t\t\t\tconst convertedChildren = this.convertTransferChildren(treeItems ?? [], children);\n\t\t\t\t\treturn this.postGetChildren(convertedChildren);\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\t// It can happen that a tree view is disposed right as `getChildren` is called. This results in an error because the data provider gets removed.\n\t\t\t\t\t// The tree will shortly get cleaned up in this case. We just need to handle the error here.\n\t\t\t\t\tif (!NoTreeViewError.is(err)) {\n\t\t\t\t\t\tthis.notificationService.error(err);\n\t\t\t\t\t}\n\t\t\t\t\treturn [];\n\t\t\t\t});\n\t}\n\n\tprivate convertTransferChildren(parents: ITreeItem[], children: (number | ITreeItem)[][] | undefined) {\n\t\tconst convertedChildren: (ITreeItem[] | undefined)[] = Array(parents.length);\n\t\tif (children) {\n\t\t\tfor (const childGroup of children) {\n\t\t\t\tconst childGroupIndex = childGroup[0] as number;\n\t\t\t\tconvertedChildren[childGroupIndex] = childGroup.slice(1) as ITreeItem[];\n\t\t\t}\n\t\t}\n\t\treturn convertedChildren;\n\t}\n\n\tgetItemsToRefresh(itemsToRefreshByHandle: { [treeItemHandle: string]: ITreeItem }): { items: ITreeItem[]; checkboxes: ITreeItem[] } {\n\t\tconst itemsToRefresh: ITreeItem[] = [];\n\t\tconst checkboxesToRefresh: ITreeItem[] = [];\n\t\tif (itemsToRefreshByHandle) {\n\t\t\tfor (const newTreeItemHandle of Object.keys(itemsToRefreshByHandle)) {\n\t\t\t\tconst currentTreeItem = this.getItem(newTreeItemHandle);\n\t\t\t\tif (currentTreeItem) { // Refresh only if the item exists\n\t\t\t\t\tconst newTreeItem = itemsToRefreshByHandle[newTreeItemHandle];\n\t\t\t\t\tif (currentTreeItem.checkbox?.isChecked !== newTreeItem.checkbox?.isChecked) {\n\t\t\t\t\t\tcheckboxesToRefresh.push(currentTreeItem);\n\t\t\t\t\t}\n\t\t\t\t\t// Update the current item with refreshed item\n\t\t\t\t\tthis.updateTreeItem(currentTreeItem, newTreeItem);\n\t\t\t\t\tif (newTreeItemHandle === newTreeItem.handle) {\n\t\t\t\t\t\titemsToRefresh.push(currentTreeItem);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Update maps when handle is changed and refresh parent\n\t\t\t\t\t\tthis.itemsMap.delete(newTreeItemHandle);\n\t\t\t\t\t\tthis.itemsMap.set(currentTreeItem.handle, currentTreeItem);\n\t\t\t\t\t\tconst parent = newTreeItem.parentHandle ? this.itemsMap.get(newTreeItem.parentHandle) : null;\n\t\t\t\t\t\tif (parent) {\n\t\t\t\t\t\t\titemsToRefresh.push(parent);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { items: itemsToRefresh, checkboxes: checkboxesToRefresh };\n\t}\n\n\tgetItem(treeItemHandle: string): ITreeItem | undefined {\n\t\treturn this.itemsMap.get(treeItemHandle);\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this.itemsMap.size === 0;\n\t}\n\n\tprivate async postGetChildren(elementGroups: (ITreeItem[] | undefined)[] | undefined): Promise<ResolvableTreeItem[][] | undefined> {\n\t\tif (elementGroups === undefined) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst resultGroups: ResolvableTreeItem[][] = [];\n\t\tconst hasResolve = await this.hasResolve;\n\t\tif (elementGroups) {\n\t\t\tfor (const elements of elementGroups) {\n\t\t\t\tconst result: ResolvableTreeItem[] = [];\n\t\t\t\tresultGroups.push(result);\n\t\t\t\tif (!elements) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (const element of elements) {\n\t\t\t\t\tconst resolvable = new ResolvableTreeItem(element, hasResolve ? (token) => {\n\t\t\t\t\t\treturn this._proxy.$resolve(this.treeViewId, element.handle, token);\n\t\t\t\t\t} : undefined);\n\t\t\t\t\tthis.itemsMap.set(element.handle, resolvable);\n\t\t\t\t\tresult.push(resolvable);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resultGroups;\n\t}\n\n\tprivate updateTreeItem(current: ITreeItem, treeItem: ITreeItem): void {\n\t\ttreeItem.children = treeItem.children ? treeItem.children : undefined;\n\t\tif (current) {\n\t\t\tconst properties = distinct([...Object.keys(current instanceof ResolvableTreeItem ? current.asTreeItem() : current),\n\t\t\t...Object.keys(treeItem)]);\n\t\t\tfor (const property of properties) {\n\t\t\t\t(current as unknown as { [key: string]: unknown })[property] = (treeItem as unknown as { [key: string]: unknown })[property];\n\t\t\t}\n\t\t\tif (current instanceof ResolvableTreeItem) {\n\t\t\t\tcurrent.resetResolve();\n\t\t\t}\n\t\t}\n\t}\n}\n"]}