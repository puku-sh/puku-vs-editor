{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadQuickOpen.ts","vs/workbench/api/browser/mainThreadQuickOpen.ts"],"names":[],"mappings":"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","file":"mainThreadQuickOpen.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Toggle } from '../../../base/browser/ui/toggle/toggle.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { DisposableStore, IDisposable } from '../../../base/common/lifecycle.js';\nimport { basenameOrAuthority, dirname, hasTrailingPathSeparator } from '../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isUriComponents, URI } from '../../../base/common/uri.js';\nimport { ILanguageService } from '../../../editor/common/languages/language.js';\nimport { getIconClasses } from '../../../editor/common/services/getIconClasses.js';\nimport { IModelService } from '../../../editor/common/services/model.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { IInputOptions, IPickOptions, IQuickInput, IQuickInputService, IQuickPick, IQuickPickItem, QuickInputButtonLocation } from '../../../platform/quickinput/common/quickInput.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ICustomEditorLabelService } from '../../services/editor/common/customEditorLabelService.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostQuickOpenShape, IInputBoxOptions, MainContext, MainThreadQuickOpenShape, TransferQuickInput, TransferQuickInputButton, TransferQuickPickItem, TransferQuickPickItemOrSeparator } from '../common/extHost.protocol.js';\n\ninterface QuickInputSession {\n\tinput: IQuickInput;\n\thandlesToItems: Map<number, TransferQuickPickItem>;\n\thandlesToToggles: Map<number, { toggle: Toggle; listener: IDisposable }>;\n\tstore: DisposableStore;\n}\n\n@extHostNamedCustomer(MainContext.MainThreadQuickOpen)\nexport class MainThreadQuickOpen implements MainThreadQuickOpenShape {\n\n\tprivate readonly _proxy: ExtHostQuickOpenShape;\n\tprivate readonly _quickInputService: IQuickInputService;\n\tprivate readonly _items: Record<number, {\n\t\tresolve(items: TransferQuickPickItemOrSeparator[]): void;\n\t\treject(error: Error): void;\n\t}> = {};\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@ICustomEditorLabelService private readonly customEditorLabelService: ICustomEditorLabelService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly languageService: ILanguageService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostQuickOpen);\n\t\tthis._quickInputService = quickInputService;\n\t}\n\n\tpublic dispose(): void {\n\t\tfor (const [_id, session] of this.sessions) {\n\t\t\tsession.store.dispose();\n\t\t}\n\t}\n\n\t$show(instance: number, options: IPickOptions<TransferQuickPickItem>, token: CancellationToken): Promise<number | number[] | undefined> {\n\t\tconst contents = new Promise<TransferQuickPickItemOrSeparator[]>((resolve, reject) => {\n\t\t\tthis._items[instance] = { resolve, reject };\n\t\t});\n\n\t\toptions = {\n\t\t\t...options,\n\t\t\tonDidFocus: el => {\n\t\t\t\tif (el) {\n\t\t\t\t\tthis._proxy.$onItemSelected(el.handle);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (options.canPickMany) {\n\t\t\treturn this._quickInputService.pick(contents, options as { canPickMany: true }, token).then(items => {\n\t\t\t\tif (items) {\n\t\t\t\t\treturn items.map(item => item.handle);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t} else {\n\t\t\treturn this._quickInputService.pick(contents, options, token).then(item => {\n\t\t\t\tif (item) {\n\t\t\t\t\treturn item.handle;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t}\n\t}\n\n\t$setItems(instance: number, items: TransferQuickPickItemOrSeparator[]): Promise<void> {\n\t\tif (this._items[instance]) {\n\t\t\titems.forEach(item => this.expandItemProps(item));\n\t\t\tthis._items[instance].resolve(items);\n\t\t\tdelete this._items[instance];\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t$setError(instance: number, error: Error): Promise<void> {\n\t\tif (this._items[instance]) {\n\t\t\tthis._items[instance].reject(error);\n\t\t\tdelete this._items[instance];\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t// ---- input\n\n\t$input(options: IInputBoxOptions | undefined, validateInput: boolean, token: CancellationToken): Promise<string | undefined> {\n\t\tconst inputOptions: IInputOptions = Object.create(null);\n\n\t\tif (options) {\n\t\t\tinputOptions.title = options.title;\n\t\t\tinputOptions.password = options.password;\n\t\t\tinputOptions.placeHolder = options.placeHolder;\n\t\t\tinputOptions.valueSelection = options.valueSelection;\n\t\t\tinputOptions.prompt = options.prompt;\n\t\t\tinputOptions.value = options.value;\n\t\t\tinputOptions.ignoreFocusLost = options.ignoreFocusOut;\n\t\t}\n\n\t\tif (validateInput) {\n\t\t\tinputOptions.validateInput = (value) => {\n\t\t\t\treturn this._proxy.$validateInput(value);\n\t\t\t};\n\t\t}\n\n\t\treturn this._quickInputService.input(inputOptions, token);\n\t}\n\n\t// ---- QuickInput\n\n\tprivate sessions = new Map<number, QuickInputSession>();\n\n\t$createOrUpdate(params: TransferQuickInput): Promise<void> {\n\t\tconst sessionId = params.id;\n\t\tlet session = this.sessions.get(sessionId);\n\t\tif (!session) {\n\t\t\tconst store = new DisposableStore();\n\t\t\tconst input = params.type === 'quickPick' ? this._quickInputService.createQuickPick() : this._quickInputService.createInputBox();\n\t\t\tstore.add(input);\n\t\t\tstore.add(input.onDidAccept(() => {\n\t\t\t\tthis._proxy.$onDidAccept(sessionId);\n\t\t\t}));\n\t\t\tstore.add(input.onDidTriggerButton(button => {\n\t\t\t\tthis._proxy.$onDidTriggerButton(sessionId, (button as TransferQuickInputButton).handle);\n\t\t\t}));\n\t\t\tstore.add(input.onDidChangeValue(value => {\n\t\t\t\tthis._proxy.$onDidChangeValue(sessionId, value);\n\t\t\t}));\n\t\t\tstore.add(input.onDidHide(() => {\n\t\t\t\tthis._proxy.$onDidHide(sessionId);\n\t\t\t}));\n\n\t\t\tif (params.type === 'quickPick') {\n\t\t\t\t// Add extra events specific for quickpick\n\t\t\t\tconst quickpick = input as IQuickPick<IQuickPickItem>;\n\t\t\t\tstore.add(quickpick.onDidChangeActive(items => {\n\t\t\t\t\tthis._proxy.$onDidChangeActive(sessionId, items.map(item => (item as TransferQuickPickItem).handle));\n\t\t\t\t}));\n\t\t\t\tstore.add(quickpick.onDidChangeSelection(items => {\n\t\t\t\t\tthis._proxy.$onDidChangeSelection(sessionId, items.map(item => (item as TransferQuickPickItem).handle));\n\t\t\t\t}));\n\t\t\t\tstore.add(quickpick.onDidTriggerItemButton((e) => {\n\t\t\t\t\tthis._proxy.$onDidTriggerItemButton(sessionId, (e.item as TransferQuickPickItem).handle, (e.button as TransferQuickInputButton).handle);\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tsession = {\n\t\t\t\tinput,\n\t\t\t\thandlesToItems: new Map(),\n\t\t\t\thandlesToToggles: new Map(),\n\t\t\t\tstore\n\t\t\t};\n\t\t\tthis.sessions.set(sessionId, session);\n\t\t}\n\n\t\tconst { input, handlesToItems } = session;\n\t\tconst quickPick = input as IQuickPick<IQuickPickItem>;\n\t\tfor (const param in params) {\n\t\t\tswitch (param) {\n\t\t\t\tcase 'id':\n\t\t\t\tcase 'type':\n\t\t\t\t\tcontinue;\n\n\t\t\t\tcase 'visible':\n\t\t\t\t\tif (params.visible) {\n\t\t\t\t\t\tinput.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.hide();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'items': {\n\t\t\t\t\thandlesToItems.clear();\n\t\t\t\t\tparams.items?.forEach((item: TransferQuickPickItemOrSeparator) => {\n\t\t\t\t\t\tthis.expandItemProps(item);\n\t\t\t\t\t\tif (item.type !== 'separator') {\n\t\t\t\t\t\t\titem.buttons?.forEach(button => this.expandIconPath(button));\n\t\t\t\t\t\t\thandlesToItems.set(item.handle, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tquickPick.items = params.items;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'activeItems':\n\t\t\t\t\tquickPick.activeItems = params.activeItems\n\t\t\t\t\t\t?.map((handle: number) => handlesToItems.get(handle))\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectedItems':\n\t\t\t\t\tquickPick.selectedItems = params.selectedItems\n\t\t\t\t\t\t?.map((handle: number) => handlesToItems.get(handle))\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buttons': {\n\t\t\t\t\tconst buttons = [], toggles = [];\n\t\t\t\t\tfor (const button of params.buttons!) {\n\t\t\t\t\t\tif (button.handle === -1) {\n\t\t\t\t\t\t\tbuttons.push(this._quickInputService.backButton);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.expandIconPath(button);\n\n\t\t\t\t\t\t\t// Currently buttons are only supported outside of the input box\n\t\t\t\t\t\t\t// and toggles only inside. When/if that changes, this will need to be updated.\n\t\t\t\t\t\t\tif (button.location === QuickInputButtonLocation.Input) {\n\t\t\t\t\t\t\t\ttoggles.push(button);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbuttons.push(button);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinput.buttons = buttons;\n\t\t\t\t\tthis.updateToggles(sessionId, session, toggles);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any\n\t\t\t\t\t(input as any)[param] = params[param];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t$dispose(sessionId: number): Promise<void> {\n\t\tconst session = this.sessions.get(sessionId);\n\t\tif (session) {\n\t\t\tsession.store.dispose();\n\t\t\tthis.sessions.delete(sessionId);\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t/**\n\t* Derives icon, label and description for Quick Pick items that represent a resource URI.\n\t*/\n\tprivate expandItemProps(item: TransferQuickPickItemOrSeparator) {\n\t\tif (item.type === 'separator') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!item.resourceUri) {\n\t\t\tthis.expandIconPath(item);\n\t\t\treturn;\n\t\t}\n\n\t\t// Derive missing label and description from resourceUri.\n\t\tconst resourceUri = URI.from(item.resourceUri);\n\t\titem.label ??= this.customEditorLabelService.getName(resourceUri) || '';\n\t\tif (item.label) {\n\t\t\titem.description ??= this.labelService.getUriLabel(resourceUri, { relative: true });\n\t\t} else {\n\t\t\titem.label = basenameOrAuthority(resourceUri);\n\t\t\titem.description ??= this.labelService.getUriLabel(dirname(resourceUri), { relative: true });\n\t\t}\n\n\t\t// Derive icon props from resourceUri if icon is set to ThemeIcon.File or ThemeIcon.Folder.\n\t\tconst icon = item.iconPathDto;\n\t\tif (ThemeIcon.isThemeIcon(icon) && (ThemeIcon.isFile(icon) || ThemeIcon.isFolder(icon))) {\n\t\t\tconst fileKind = ThemeIcon.isFolder(icon) || hasTrailingPathSeparator(resourceUri) ? FileKind.FOLDER : FileKind.FILE;\n\t\t\tconst iconClasses = new Lazy(() => getIconClasses(this.modelService, this.languageService, resourceUri, fileKind));\n\t\t\tObject.defineProperty(item, 'iconClasses', { get: () => iconClasses.value });\n\t\t} else {\n\t\t\tthis.expandIconPath(item);\n\t\t}\n\t}\n\n\t/**\n\t* Converts IconPath DTO into iconPath/iconClass properties.\n\t*/\n\tprivate expandIconPath(target: Pick<TransferQuickPickItem, 'iconPathDto' | 'iconPath' | 'iconClass'>) {\n\t\tconst icon = target.iconPathDto;\n\t\tif (!icon) {\n\t\t\treturn;\n\t\t} else if (ThemeIcon.isThemeIcon(icon)) {\n\t\t\t// TODO: Since IQuickPickItem and IQuickInputButton do not support ThemeIcon directly, the color ID is lost here.\n\t\t\t// We should consider changing changing iconPath/iconClass to IconPath in both interfaces.\n\t\t\t// Request for color support: https://github.com/microsoft/vscode/issues/185356..\n\t\t\ttarget.iconClass = ThemeIcon.asClassName(icon);\n\t\t} else if (isUriComponents(icon)) {\n\t\t\tconst uri = URI.from(icon);\n\t\t\ttarget.iconPath = { dark: uri, light: uri };\n\t\t} else {\n\t\t\tconst { dark, light } = icon;\n\t\t\ttarget.iconPath = { dark: URI.from(dark), light: URI.from(light) };\n\t\t}\n\t}\n\n\t/**\n\t* Updates the toggles for a given quick input session by creating new {@link Toggle}-s\n\t* from buttons, updating existing toggles props and removing old ones.\n\t*/\n\tprivate updateToggles(sessionId: number, session: QuickInputSession, buttons: TransferQuickInputButton[]) {\n\t\tconst { input, handlesToToggles, store } = session;\n\n\t\t// Add new or update existing toggles.\n\t\tconst toggles = [];\n\t\tfor (const button of buttons) {\n\t\t\tconst title = button.tooltip || '';\n\t\t\tconst isChecked = !!button.checked;\n\n\t\t\t// TODO: Toggle class only supports ThemeIcon at the moment, but not other formats of IconPath.\n\t\t\t// We should consider adding support for the full IconPath to Toggle, in this code should be updated.\n\t\t\tconst icon = ThemeIcon.isThemeIcon(button.iconPathDto) ? button.iconPathDto : undefined;\n\n\t\t\tlet { toggle } = handlesToToggles.get(button.handle) || {};\n\t\t\tif (toggle) {\n\t\t\t\t// Toggle already exists, update its props.\n\t\t\t\ttoggle.setTitle(title);\n\t\t\t\ttoggle.setIcon(icon);\n\t\t\t\ttoggle.checked = isChecked;\n\t\t\t} else {\n\t\t\t\t// Create a new toggle from the button.\n\t\t\t\ttoggle = store.add(new Toggle({\n\t\t\t\t\ttitle,\n\t\t\t\t\ticon,\n\t\t\t\t\tisChecked,\n\t\t\t\t\tinputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n\t\t\t\t\tinputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n\t\t\t\t\tinputActiveOptionBackground: asCssVariable(inputActiveOptionBackground)\n\t\t\t\t}));\n\n\t\t\t\tconst listener = store.add(toggle.onChange(() => {\n\t\t\t\t\tthis._proxy.$onDidTriggerButton(sessionId, button.handle, toggle!.checked);\n\t\t\t\t}));\n\n\t\t\t\thandlesToToggles.set(button.handle, { toggle, listener });\n\t\t\t}\n\t\t\ttoggles.push(toggle);\n\t\t}\n\n\t\t// Remove toggles that are no longer present from the session map.\n\t\tfor (const [handle, { toggle, listener }] of handlesToToggles) {\n\t\t\tif (!buttons.some(button => button.handle === handle)) {\n\t\t\t\thandlesToToggles.delete(handle);\n\t\t\t\tstore.delete(toggle);\n\t\t\t\tstore.delete(listener);\n\t\t\t}\n\t\t}\n\n\t\t// Update toggle interfaces on the input widget.\n\t\tinput.toggles = toggles;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Toggle } from '../../../base/browser/ui/toggle/toggle.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { DisposableStore, IDisposable } from '../../../base/common/lifecycle.js';\nimport { basenameOrAuthority, dirname, hasTrailingPathSeparator } from '../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isUriComponents, URI } from '../../../base/common/uri.js';\nimport { ILanguageService } from '../../../editor/common/languages/language.js';\nimport { getIconClasses } from '../../../editor/common/services/getIconClasses.js';\nimport { IModelService } from '../../../editor/common/services/model.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { IInputOptions, IPickOptions, IQuickInput, IQuickInputService, IQuickPick, IQuickPickItem, QuickInputButtonLocation } from '../../../platform/quickinput/common/quickInput.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ICustomEditorLabelService } from '../../services/editor/common/customEditorLabelService.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { ExtHostContext, ExtHostQuickOpenShape, IInputBoxOptions, MainContext, MainThreadQuickOpenShape, TransferQuickInput, TransferQuickInputButton, TransferQuickPickItem, TransferQuickPickItemOrSeparator } from '../common/extHost.protocol.js';\n\ninterface QuickInputSession {\n\tinput: IQuickInput;\n\thandlesToItems: Map<number, TransferQuickPickItem>;\n\thandlesToToggles: Map<number, { toggle: Toggle; listener: IDisposable }>;\n\tstore: DisposableStore;\n}\n\n@extHostNamedCustomer(MainContext.MainThreadQuickOpen)\nexport class MainThreadQuickOpen implements MainThreadQuickOpenShape {\n\n\tprivate readonly _proxy: ExtHostQuickOpenShape;\n\tprivate readonly _quickInputService: IQuickInputService;\n\tprivate readonly _items: Record<number, {\n\t\tresolve(items: TransferQuickPickItemOrSeparator[]): void;\n\t\treject(error: Error): void;\n\t}> = {};\n\n\tconstructor(\n\t\textHostContext: IExtHostContext,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@ICustomEditorLabelService private readonly customEditorLabelService: ICustomEditorLabelService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly languageService: ILanguageService\n\t) {\n\t\tthis._proxy = extHostContext.getProxy(ExtHostContext.ExtHostQuickOpen);\n\t\tthis._quickInputService = quickInputService;\n\t}\n\n\tpublic dispose(): void {\n\t\tfor (const [_id, session] of this.sessions) {\n\t\t\tsession.store.dispose();\n\t\t}\n\t}\n\n\t$show(instance: number, options: IPickOptions<TransferQuickPickItem>, token: CancellationToken): Promise<number | number[] | undefined> {\n\t\tconst contents = new Promise<TransferQuickPickItemOrSeparator[]>((resolve, reject) => {\n\t\t\tthis._items[instance] = { resolve, reject };\n\t\t});\n\n\t\toptions = {\n\t\t\t...options,\n\t\t\tonDidFocus: el => {\n\t\t\t\tif (el) {\n\t\t\t\t\tthis._proxy.$onItemSelected(el.handle);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (options.canPickMany) {\n\t\t\treturn this._quickInputService.pick(contents, options as { canPickMany: true }, token).then(items => {\n\t\t\t\tif (items) {\n\t\t\t\t\treturn items.map(item => item.handle);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t} else {\n\t\t\treturn this._quickInputService.pick(contents, options, token).then(item => {\n\t\t\t\tif (item) {\n\t\t\t\t\treturn item.handle;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t}\n\t}\n\n\t$setItems(instance: number, items: TransferQuickPickItemOrSeparator[]): Promise<void> {\n\t\tif (this._items[instance]) {\n\t\t\titems.forEach(item => this.expandItemProps(item));\n\t\t\tthis._items[instance].resolve(items);\n\t\t\tdelete this._items[instance];\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t$setError(instance: number, error: Error): Promise<void> {\n\t\tif (this._items[instance]) {\n\t\t\tthis._items[instance].reject(error);\n\t\t\tdelete this._items[instance];\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t// ---- input\n\n\t$input(options: IInputBoxOptions | undefined, validateInput: boolean, token: CancellationToken): Promise<string | undefined> {\n\t\tconst inputOptions: IInputOptions = Object.create(null);\n\n\t\tif (options) {\n\t\t\tinputOptions.title = options.title;\n\t\t\tinputOptions.password = options.password;\n\t\t\tinputOptions.placeHolder = options.placeHolder;\n\t\t\tinputOptions.valueSelection = options.valueSelection;\n\t\t\tinputOptions.prompt = options.prompt;\n\t\t\tinputOptions.value = options.value;\n\t\t\tinputOptions.ignoreFocusLost = options.ignoreFocusOut;\n\t\t}\n\n\t\tif (validateInput) {\n\t\t\tinputOptions.validateInput = (value) => {\n\t\t\t\treturn this._proxy.$validateInput(value);\n\t\t\t};\n\t\t}\n\n\t\treturn this._quickInputService.input(inputOptions, token);\n\t}\n\n\t// ---- QuickInput\n\n\tprivate sessions = new Map<number, QuickInputSession>();\n\n\t$createOrUpdate(params: TransferQuickInput): Promise<void> {\n\t\tconst sessionId = params.id;\n\t\tlet session = this.sessions.get(sessionId);\n\t\tif (!session) {\n\t\t\tconst store = new DisposableStore();\n\t\t\tconst input = params.type === 'quickPick' ? this._quickInputService.createQuickPick() : this._quickInputService.createInputBox();\n\t\t\tstore.add(input);\n\t\t\tstore.add(input.onDidAccept(() => {\n\t\t\t\tthis._proxy.$onDidAccept(sessionId);\n\t\t\t}));\n\t\t\tstore.add(input.onDidTriggerButton(button => {\n\t\t\t\tthis._proxy.$onDidTriggerButton(sessionId, (button as TransferQuickInputButton).handle);\n\t\t\t}));\n\t\t\tstore.add(input.onDidChangeValue(value => {\n\t\t\t\tthis._proxy.$onDidChangeValue(sessionId, value);\n\t\t\t}));\n\t\t\tstore.add(input.onDidHide(() => {\n\t\t\t\tthis._proxy.$onDidHide(sessionId);\n\t\t\t}));\n\n\t\t\tif (params.type === 'quickPick') {\n\t\t\t\t// Add extra events specific for quickpick\n\t\t\t\tconst quickpick = input as IQuickPick<IQuickPickItem>;\n\t\t\t\tstore.add(quickpick.onDidChangeActive(items => {\n\t\t\t\t\tthis._proxy.$onDidChangeActive(sessionId, items.map(item => (item as TransferQuickPickItem).handle));\n\t\t\t\t}));\n\t\t\t\tstore.add(quickpick.onDidChangeSelection(items => {\n\t\t\t\t\tthis._proxy.$onDidChangeSelection(sessionId, items.map(item => (item as TransferQuickPickItem).handle));\n\t\t\t\t}));\n\t\t\t\tstore.add(quickpick.onDidTriggerItemButton((e) => {\n\t\t\t\t\tthis._proxy.$onDidTriggerItemButton(sessionId, (e.item as TransferQuickPickItem).handle, (e.button as TransferQuickInputButton).handle);\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tsession = {\n\t\t\t\tinput,\n\t\t\t\thandlesToItems: new Map(),\n\t\t\t\thandlesToToggles: new Map(),\n\t\t\t\tstore\n\t\t\t};\n\t\t\tthis.sessions.set(sessionId, session);\n\t\t}\n\n\t\tconst { input, handlesToItems } = session;\n\t\tconst quickPick = input as IQuickPick<IQuickPickItem>;\n\t\tfor (const param in params) {\n\t\t\tswitch (param) {\n\t\t\t\tcase 'id':\n\t\t\t\tcase 'type':\n\t\t\t\t\tcontinue;\n\n\t\t\t\tcase 'visible':\n\t\t\t\t\tif (params.visible) {\n\t\t\t\t\t\tinput.show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.hide();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'items': {\n\t\t\t\t\thandlesToItems.clear();\n\t\t\t\t\tparams.items?.forEach((item: TransferQuickPickItemOrSeparator) => {\n\t\t\t\t\t\tthis.expandItemProps(item);\n\t\t\t\t\t\tif (item.type !== 'separator') {\n\t\t\t\t\t\t\titem.buttons?.forEach(button => this.expandIconPath(button));\n\t\t\t\t\t\t\thandlesToItems.set(item.handle, item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tquickPick.items = params.items;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'activeItems':\n\t\t\t\t\tquickPick.activeItems = params.activeItems\n\t\t\t\t\t\t?.map((handle: number) => handlesToItems.get(handle))\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectedItems':\n\t\t\t\t\tquickPick.selectedItems = params.selectedItems\n\t\t\t\t\t\t?.map((handle: number) => handlesToItems.get(handle))\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buttons': {\n\t\t\t\t\tconst buttons = [], toggles = [];\n\t\t\t\t\tfor (const button of params.buttons!) {\n\t\t\t\t\t\tif (button.handle === -1) {\n\t\t\t\t\t\t\tbuttons.push(this._quickInputService.backButton);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.expandIconPath(button);\n\n\t\t\t\t\t\t\t// Currently buttons are only supported outside of the input box\n\t\t\t\t\t\t\t// and toggles only inside. When/if that changes, this will need to be updated.\n\t\t\t\t\t\t\tif (button.location === QuickInputButtonLocation.Input) {\n\t\t\t\t\t\t\t\ttoggles.push(button);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbuttons.push(button);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinput.buttons = buttons;\n\t\t\t\t\tthis.updateToggles(sessionId, session, toggles);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any\n\t\t\t\t\t(input as any)[param] = params[param];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t$dispose(sessionId: number): Promise<void> {\n\t\tconst session = this.sessions.get(sessionId);\n\t\tif (session) {\n\t\t\tsession.store.dispose();\n\t\t\tthis.sessions.delete(sessionId);\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\t/**\n\t* Derives icon, label and description for Quick Pick items that represent a resource URI.\n\t*/\n\tprivate expandItemProps(item: TransferQuickPickItemOrSeparator) {\n\t\tif (item.type === 'separator') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!item.resourceUri) {\n\t\t\tthis.expandIconPath(item);\n\t\t\treturn;\n\t\t}\n\n\t\t// Derive missing label and description from resourceUri.\n\t\tconst resourceUri = URI.from(item.resourceUri);\n\t\titem.label ??= this.customEditorLabelService.getName(resourceUri) || '';\n\t\tif (item.label) {\n\t\t\titem.description ??= this.labelService.getUriLabel(resourceUri, { relative: true });\n\t\t} else {\n\t\t\titem.label = basenameOrAuthority(resourceUri);\n\t\t\titem.description ??= this.labelService.getUriLabel(dirname(resourceUri), { relative: true });\n\t\t}\n\n\t\t// Derive icon props from resourceUri if icon is set to ThemeIcon.File or ThemeIcon.Folder.\n\t\tconst icon = item.iconPathDto;\n\t\tif (ThemeIcon.isThemeIcon(icon) && (ThemeIcon.isFile(icon) || ThemeIcon.isFolder(icon))) {\n\t\t\tconst fileKind = ThemeIcon.isFolder(icon) || hasTrailingPathSeparator(resourceUri) ? FileKind.FOLDER : FileKind.FILE;\n\t\t\tconst iconClasses = new Lazy(() => getIconClasses(this.modelService, this.languageService, resourceUri, fileKind));\n\t\t\tObject.defineProperty(item, 'iconClasses', { get: () => iconClasses.value });\n\t\t} else {\n\t\t\tthis.expandIconPath(item);\n\t\t}\n\t}\n\n\t/**\n\t* Converts IconPath DTO into iconPath/iconClass properties.\n\t*/\n\tprivate expandIconPath(target: Pick<TransferQuickPickItem, 'iconPathDto' | 'iconPath' | 'iconClass'>) {\n\t\tconst icon = target.iconPathDto;\n\t\tif (!icon) {\n\t\t\treturn;\n\t\t} else if (ThemeIcon.isThemeIcon(icon)) {\n\t\t\t// TODO: Since IQuickPickItem and IQuickInputButton do not support ThemeIcon directly, the color ID is lost here.\n\t\t\t// We should consider changing changing iconPath/iconClass to IconPath in both interfaces.\n\t\t\t// Request for color support: https://github.com/microsoft/vscode/issues/185356..\n\t\t\ttarget.iconClass = ThemeIcon.asClassName(icon);\n\t\t} else if (isUriComponents(icon)) {\n\t\t\tconst uri = URI.from(icon);\n\t\t\ttarget.iconPath = { dark: uri, light: uri };\n\t\t} else {\n\t\t\tconst { dark, light } = icon;\n\t\t\ttarget.iconPath = { dark: URI.from(dark), light: URI.from(light) };\n\t\t}\n\t}\n\n\t/**\n\t* Updates the toggles for a given quick input session by creating new {@link Toggle}-s\n\t* from buttons, updating existing toggles props and removing old ones.\n\t*/\n\tprivate updateToggles(sessionId: number, session: QuickInputSession, buttons: TransferQuickInputButton[]) {\n\t\tconst { input, handlesToToggles, store } = session;\n\n\t\t// Add new or update existing toggles.\n\t\tconst toggles = [];\n\t\tfor (const button of buttons) {\n\t\t\tconst title = button.tooltip || '';\n\t\t\tconst isChecked = !!button.checked;\n\n\t\t\t// TODO: Toggle class only supports ThemeIcon at the moment, but not other formats of IconPath.\n\t\t\t// We should consider adding support for the full IconPath to Toggle, in this code should be updated.\n\t\t\tconst icon = ThemeIcon.isThemeIcon(button.iconPathDto) ? button.iconPathDto : undefined;\n\n\t\t\tlet { toggle } = handlesToToggles.get(button.handle) || {};\n\t\t\tif (toggle) {\n\t\t\t\t// Toggle already exists, update its props.\n\t\t\t\ttoggle.setTitle(title);\n\t\t\t\ttoggle.setIcon(icon);\n\t\t\t\ttoggle.checked = isChecked;\n\t\t\t} else {\n\t\t\t\t// Create a new toggle from the button.\n\t\t\t\ttoggle = store.add(new Toggle({\n\t\t\t\t\ttitle,\n\t\t\t\t\ticon,\n\t\t\t\t\tisChecked,\n\t\t\t\t\tinputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n\t\t\t\t\tinputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n\t\t\t\t\tinputActiveOptionBackground: asCssVariable(inputActiveOptionBackground)\n\t\t\t\t}));\n\n\t\t\t\tconst listener = store.add(toggle.onChange(() => {\n\t\t\t\t\tthis._proxy.$onDidTriggerButton(sessionId, button.handle, toggle!.checked);\n\t\t\t\t}));\n\n\t\t\t\thandlesToToggles.set(button.handle, { toggle, listener });\n\t\t\t}\n\t\t\ttoggles.push(toggle);\n\t\t}\n\n\t\t// Remove toggles that are no longer present from the session map.\n\t\tfor (const [handle, { toggle, listener }] of handlesToToggles) {\n\t\t\tif (!buttons.some(button => button.handle === handle)) {\n\t\t\t\thandlesToToggles.delete(handle);\n\t\t\t\tstore.delete(toggle);\n\t\t\t\tstore.delete(listener);\n\t\t\t}\n\t\t}\n\n\t\t// Update toggle interfaces on the input widget.\n\t\tinput.toggles = toggles;\n\t}\n}\n"]}