{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/api/browser/mainThreadTimeline.ts","vs/workbench/api/browser/mainThreadTimeline.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,+BAA+B,CAAC;AAGxD,OAAO,EAAE,WAAW,EAAE,MAAM,qCAAqC,CAAC;AAClE,OAAO,EAAE,WAAW,EAAiD,cAAc,EAAE,MAAM,+BAA+B,CAAC;AAC3H,OAAO,EAAE,oBAAoB,EAAmB,MAAM,sDAAsD,CAAC;AAC7G,OAAO,EAAoE,gBAAgB,EAAY,MAAM,2CAA2C,CAAC;AACzJ,OAAO,EAAE,MAAM,EAAE,MAAM,qCAAqC,CAAC;AAGtD,IAAM,kBAAkB,GAAxB,MAAM,kBAAkB;IAI9B,YACC,OAAwB,EACX,UAAwC,EACnC,gBAAmD;QADvC,eAAU,GAAV,UAAU,CAAa;QAClB,qBAAgB,GAAhB,gBAAgB,CAAkB;QALrD,sBAAiB,GAAG,IAAI,GAAG,EAAwC,CAAC;QAOpF,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;IAChE,CAAC;IAED,yBAAyB,CAAC,QAAoC;QAC7D,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,mDAAmD,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAC;QAExF,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAE1B,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACxC,IAAI,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QAC5C,IAAI,WAAW,KAAK,SAAS,EAAE,CAAC;YAC/B,WAAW,GAAG,IAAI,OAAO,EAAuB,CAAC;YACjD,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,EAAE,WAAW,CAAC,CAAC;QACxC,CAAC;QAED,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC;YAC9C,GAAG,QAAQ;YACX,WAAW,EAAE,WAAW,CAAC,KAAK;YAC9B,KAAK,CAAC,eAAe,CAAC,GAAQ,EAAE,OAAwB,EAAE,KAAwB;gBACjF,OAAO,MAAM,CAAW,MAAM,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;YACrF,CAAC;YACD,OAAO;gBACN,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC7B,WAAW,EAAE,OAAO,EAAE,CAAC;YACxB,CAAC;SACD,CAAC,CAAC;IACJ,CAAC;IAED,2BAA2B,CAAC,EAAU;QACrC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,qDAAqD,EAAE,EAAE,CAAC,CAAC;QAEjF,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,EAAE,CAAC,CAAC;IACtD,CAAC;IAED,wBAAwB,CAAC,CAAsB;QAC9C,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,0CAA0C,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAEtG,MAAM,OAAO,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACjD,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,OAAO;QACN,OAAO;IACR,CAAC;CACD,CAAA;AArDY,kBAAkB;IAD9B,oBAAoB,CAAC,WAAW,CAAC,kBAAkB,CAAC;IAOlD,WAAA,WAAW,CAAA;IACX,WAAA,gBAAgB,CAAA;GAPN,kBAAkB,CAqD9B","file":"mainThreadTimeline.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../base/common/event.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { MainContext, MainThreadTimelineShape, ExtHostTimelineShape, ExtHostContext } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { TimelineChangeEvent, TimelineOptions, TimelineProviderDescriptor, ITimelineService, Timeline } from '../../contrib/timeline/common/timeline.js';\nimport { revive } from '../../../base/common/marshalling.js';\n\n@extHostNamedCustomer(MainContext.MainThreadTimeline)\nexport class MainThreadTimeline implements MainThreadTimelineShape {\n\tprivate readonly _proxy: ExtHostTimelineShape;\n\tprivate readonly _providerEmitters = new Map<string, Emitter<TimelineChangeEvent>>();\n\n\tconstructor(\n\t\tcontext: IExtHostContext,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@ITimelineService private readonly _timelineService: ITimelineService\n\t) {\n\t\tthis._proxy = context.getProxy(ExtHostContext.ExtHostTimeline);\n\t}\n\n\t$registerTimelineProvider(provider: TimelineProviderDescriptor): void {\n\t\tthis.logService.trace(`MainThreadTimeline#registerTimelineProvider: id=${provider.id}`);\n\n\t\tconst proxy = this._proxy;\n\n\t\tconst emitters = this._providerEmitters;\n\t\tlet onDidChange = emitters.get(provider.id);\n\t\tif (onDidChange === undefined) {\n\t\t\tonDidChange = new Emitter<TimelineChangeEvent>();\n\t\t\temitters.set(provider.id, onDidChange);\n\t\t}\n\n\t\tthis._timelineService.registerTimelineProvider({\n\t\t\t...provider,\n\t\t\tonDidChange: onDidChange.event,\n\t\t\tasync provideTimeline(uri: URI, options: TimelineOptions, token: CancellationToken) {\n\t\t\t\treturn revive<Timeline>(await proxy.$getTimeline(provider.id, uri, options, token));\n\t\t\t},\n\t\t\tdispose() {\n\t\t\t\temitters.delete(provider.id);\n\t\t\t\tonDidChange?.dispose();\n\t\t\t}\n\t\t});\n\t}\n\n\t$unregisterTimelineProvider(id: string): void {\n\t\tthis.logService.trace(`MainThreadTimeline#unregisterTimelineProvider: id=${id}`);\n\n\t\tthis._timelineService.unregisterTimelineProvider(id);\n\t}\n\n\t$emitTimelineChangeEvent(e: TimelineChangeEvent): void {\n\t\tthis.logService.trace(`MainThreadTimeline#emitChangeEvent: id=${e.id}, uri=${e.uri?.toString(true)}`);\n\n\t\tconst emitter = this._providerEmitters.get(e.id);\n\t\temitter?.fire(e);\n\t}\n\n\tdispose(): void {\n\t\t// noop\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../base/common/event.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { MainContext, MainThreadTimelineShape, ExtHostTimelineShape, ExtHostContext } from '../common/extHost.protocol.js';\nimport { extHostNamedCustomer, IExtHostContext } from '../../services/extensions/common/extHostCustomers.js';\nimport { TimelineChangeEvent, TimelineOptions, TimelineProviderDescriptor, ITimelineService, Timeline } from '../../contrib/timeline/common/timeline.js';\nimport { revive } from '../../../base/common/marshalling.js';\n\n@extHostNamedCustomer(MainContext.MainThreadTimeline)\nexport class MainThreadTimeline implements MainThreadTimelineShape {\n\tprivate readonly _proxy: ExtHostTimelineShape;\n\tprivate readonly _providerEmitters = new Map<string, Emitter<TimelineChangeEvent>>();\n\n\tconstructor(\n\t\tcontext: IExtHostContext,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@ITimelineService private readonly _timelineService: ITimelineService\n\t) {\n\t\tthis._proxy = context.getProxy(ExtHostContext.ExtHostTimeline);\n\t}\n\n\t$registerTimelineProvider(provider: TimelineProviderDescriptor): void {\n\t\tthis.logService.trace(`MainThreadTimeline#registerTimelineProvider: id=${provider.id}`);\n\n\t\tconst proxy = this._proxy;\n\n\t\tconst emitters = this._providerEmitters;\n\t\tlet onDidChange = emitters.get(provider.id);\n\t\tif (onDidChange === undefined) {\n\t\t\tonDidChange = new Emitter<TimelineChangeEvent>();\n\t\t\temitters.set(provider.id, onDidChange);\n\t\t}\n\n\t\tthis._timelineService.registerTimelineProvider({\n\t\t\t...provider,\n\t\t\tonDidChange: onDidChange.event,\n\t\t\tasync provideTimeline(uri: URI, options: TimelineOptions, token: CancellationToken) {\n\t\t\t\treturn revive<Timeline>(await proxy.$getTimeline(provider.id, uri, options, token));\n\t\t\t},\n\t\t\tdispose() {\n\t\t\t\temitters.delete(provider.id);\n\t\t\t\tonDidChange?.dispose();\n\t\t\t}\n\t\t});\n\t}\n\n\t$unregisterTimelineProvider(id: string): void {\n\t\tthis.logService.trace(`MainThreadTimeline#unregisterTimelineProvider: id=${id}`);\n\n\t\tthis._timelineService.unregisterTimelineProvider(id);\n\t}\n\n\t$emitTimelineChangeEvent(e: TimelineChangeEvent): void {\n\t\tthis.logService.trace(`MainThreadTimeline#emitChangeEvent: id=${e.id}, uri=${e.uri?.toString(true)}`);\n\n\t\tconst emitter = this._providerEmitters.get(e.id);\n\t\temitter?.fire(e);\n\t}\n\n\tdispose(): void {\n\t\t// noop\n\t}\n}\n"]}