{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/electron-browser/parts/dialogs/dialog.contribution.ts","vs/workbench/electron-browser/parts/dialogs/dialog.contribution.ts"],"names":[],"mappings":"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","file":"dialog.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogHandler, IDialogResult, IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { IDialogsModel, IDialogViewItem } from '../../../common/dialogs.js';\nimport { BrowserDialogHandler } from '../../../browser/parts/dialogs/dialogHandler.js';\nimport { NativeDialogHandler } from './dialogHandler.js';\nimport { DialogService } from '../../../services/dialogs/common/dialogService.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { createNativeAboutDialogDetails } from '../../../../platform/dialogs/electron-browser/dialog.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IMarkdownRendererService } from '../../../../platform/markdown/browser/markdownRenderer.js';\n\nexport class DialogHandlerContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.dialogHandler';\n\n\tprivate nativeImpl: Lazy<IDialogHandler>;\n\tprivate browserImpl: Lazy<IDialogHandler>;\n\n\tprivate model: IDialogsModel;\n\tprivate currentDialog: IDialogViewItem | undefined;\n\n\tconstructor(\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IDialogService private dialogService: IDialogService,\n\t\t@ILogService logService: ILogService,\n\t\t@ILayoutService layoutService: ILayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IProductService private productService: IProductService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@INativeHostService private nativeHostService: INativeHostService,\n\t\t@IWorkbenchEnvironmentService private environmentService: IWorkbenchEnvironmentService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IMarkdownRendererService markdownRendererService: IMarkdownRendererService,\n\t) {\n\t\tsuper();\n\n\t\tthis.browserImpl = new Lazy(() => new BrowserDialogHandler(logService, layoutService, keybindingService, instantiationService, clipboardService, openerService, markdownRendererService));\n\t\tthis.nativeImpl = new Lazy(() => new NativeDialogHandler(logService, nativeHostService, clipboardService));\n\n\t\tthis.model = (this.dialogService as DialogService).model;\n\n\t\tthis._register(this.model.onWillShowDialog(() => {\n\t\t\tif (!this.currentDialog) {\n\t\t\t\tthis.processDialogs();\n\t\t\t}\n\t\t}));\n\n\t\tthis.processDialogs();\n\t}\n\n\tprivate async processDialogs(): Promise<void> {\n\t\twhile (this.model.dialogs.length) {\n\t\t\tthis.currentDialog = this.model.dialogs[0];\n\n\t\t\tlet result: IDialogResult | Error | undefined = undefined;\n\t\t\ttry {\n\n\t\t\t\t// Confirm\n\t\t\t\tif (this.currentDialog.args.confirmArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.confirmArgs;\n\t\t\t\t\tresult = (this.useCustomDialog || args?.confirmation.custom) ?\n\t\t\t\t\t\tawait this.browserImpl.value.confirm(args.confirmation) :\n\t\t\t\t\t\tawait this.nativeImpl.value.confirm(args.confirmation);\n\t\t\t\t}\n\n\t\t\t\t// Input (custom only)\n\t\t\t\telse if (this.currentDialog.args.inputArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.inputArgs;\n\t\t\t\t\tresult = await this.browserImpl.value.input(args.input);\n\t\t\t\t}\n\n\t\t\t\t// Prompt\n\t\t\t\telse if (this.currentDialog.args.promptArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.promptArgs;\n\t\t\t\t\tresult = (this.useCustomDialog || args?.prompt.custom) ?\n\t\t\t\t\t\tawait this.browserImpl.value.prompt(args.prompt) :\n\t\t\t\t\t\tawait this.nativeImpl.value.prompt(args.prompt);\n\t\t\t\t}\n\n\t\t\t\t// About\n\t\t\t\telse {\n\t\t\t\t\tconst aboutDialogDetails = createNativeAboutDialogDetails(this.productService, await this.nativeHostService.getOSProperties());\n\n\t\t\t\t\tif (this.useCustomDialog) {\n\t\t\t\t\t\tawait this.browserImpl.value.about(aboutDialogDetails.title, aboutDialogDetails.details, aboutDialogDetails.detailsToCopy);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.nativeImpl.value.about(aboutDialogDetails.title, aboutDialogDetails.details, aboutDialogDetails.detailsToCopy);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tresult = error;\n\t\t\t}\n\n\t\t\tthis.currentDialog.close(result);\n\t\t\tthis.currentDialog = undefined;\n\t\t}\n\t}\n\n\tprivate get useCustomDialog(): boolean {\n\t\treturn this.configurationService.getValue('window.dialogStyle') === 'custom' ||\n\t\t\t// Use the custom dialog while driven so that the driver can interact with it\n\t\t\t!!this.environmentService.enableSmokeTestDriver;\n\t}\n}\n\nregisterWorkbenchContribution2(\n\tDialogHandlerContribution.ID,\n\tDialogHandlerContribution,\n\tWorkbenchPhase.BlockStartup // Block to allow for dialogs to show before restore finished\n);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogHandler, IDialogResult, IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { IDialogsModel, IDialogViewItem } from '../../../common/dialogs.js';\nimport { BrowserDialogHandler } from '../../../browser/parts/dialogs/dialogHandler.js';\nimport { NativeDialogHandler } from './dialogHandler.js';\nimport { DialogService } from '../../../services/dialogs/common/dialogService.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { createNativeAboutDialogDetails } from '../../../../platform/dialogs/electron-browser/dialog.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IMarkdownRendererService } from '../../../../platform/markdown/browser/markdownRenderer.js';\n\nexport class DialogHandlerContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.dialogHandler';\n\n\tprivate nativeImpl: Lazy<IDialogHandler>;\n\tprivate browserImpl: Lazy<IDialogHandler>;\n\n\tprivate model: IDialogsModel;\n\tprivate currentDialog: IDialogViewItem | undefined;\n\n\tconstructor(\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IDialogService private dialogService: IDialogService,\n\t\t@ILogService logService: ILogService,\n\t\t@ILayoutService layoutService: ILayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IProductService private productService: IProductService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@INativeHostService private nativeHostService: INativeHostService,\n\t\t@IWorkbenchEnvironmentService private environmentService: IWorkbenchEnvironmentService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IMarkdownRendererService markdownRendererService: IMarkdownRendererService,\n\t) {\n\t\tsuper();\n\n\t\tthis.browserImpl = new Lazy(() => new BrowserDialogHandler(logService, layoutService, keybindingService, instantiationService, clipboardService, openerService, markdownRendererService));\n\t\tthis.nativeImpl = new Lazy(() => new NativeDialogHandler(logService, nativeHostService, clipboardService));\n\n\t\tthis.model = (this.dialogService as DialogService).model;\n\n\t\tthis._register(this.model.onWillShowDialog(() => {\n\t\t\tif (!this.currentDialog) {\n\t\t\t\tthis.processDialogs();\n\t\t\t}\n\t\t}));\n\n\t\tthis.processDialogs();\n\t}\n\n\tprivate async processDialogs(): Promise<void> {\n\t\twhile (this.model.dialogs.length) {\n\t\t\tthis.currentDialog = this.model.dialogs[0];\n\n\t\t\tlet result: IDialogResult | Error | undefined = undefined;\n\t\t\ttry {\n\n\t\t\t\t// Confirm\n\t\t\t\tif (this.currentDialog.args.confirmArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.confirmArgs;\n\t\t\t\t\tresult = (this.useCustomDialog || args?.confirmation.custom) ?\n\t\t\t\t\t\tawait this.browserImpl.value.confirm(args.confirmation) :\n\t\t\t\t\t\tawait this.nativeImpl.value.confirm(args.confirmation);\n\t\t\t\t}\n\n\t\t\t\t// Input (custom only)\n\t\t\t\telse if (this.currentDialog.args.inputArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.inputArgs;\n\t\t\t\t\tresult = await this.browserImpl.value.input(args.input);\n\t\t\t\t}\n\n\t\t\t\t// Prompt\n\t\t\t\telse if (this.currentDialog.args.promptArgs) {\n\t\t\t\t\tconst args = this.currentDialog.args.promptArgs;\n\t\t\t\t\tresult = (this.useCustomDialog || args?.prompt.custom) ?\n\t\t\t\t\t\tawait this.browserImpl.value.prompt(args.prompt) :\n\t\t\t\t\t\tawait this.nativeImpl.value.prompt(args.prompt);\n\t\t\t\t}\n\n\t\t\t\t// About\n\t\t\t\telse {\n\t\t\t\t\tconst aboutDialogDetails = createNativeAboutDialogDetails(this.productService, await this.nativeHostService.getOSProperties());\n\n\t\t\t\t\tif (this.useCustomDialog) {\n\t\t\t\t\t\tawait this.browserImpl.value.about(aboutDialogDetails.title, aboutDialogDetails.details, aboutDialogDetails.detailsToCopy);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.nativeImpl.value.about(aboutDialogDetails.title, aboutDialogDetails.details, aboutDialogDetails.detailsToCopy);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tresult = error;\n\t\t\t}\n\n\t\t\tthis.currentDialog.close(result);\n\t\t\tthis.currentDialog = undefined;\n\t\t}\n\t}\n\n\tprivate get useCustomDialog(): boolean {\n\t\treturn this.configurationService.getValue('window.dialogStyle') === 'custom' ||\n\t\t\t// Use the custom dialog while driven so that the driver can interact with it\n\t\t\t!!this.environmentService.enableSmokeTestDriver;\n\t}\n}\n\nregisterWorkbenchContribution2(\n\tDialogHandlerContribution.ID,\n\tDialogHandlerContribution,\n\tWorkbenchPhase.BlockStartup // Block to allow for dialogs to show before restore finished\n);\n"]}