{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/electron-browser/parts/titlebar/titlebarPart.ts","vs/workbench/electron-browser/parts/titlebar/titlebarPart.ts"],"names":[],"mappings":"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","file":"titlebarPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../base/common/event.js';\nimport { getZoomFactor } from '../../../../base/browser/browser.js';\nimport { $, addDisposableListener, append, EventType, getWindow, getWindowId, hide, show } from '../../../../base/browser/dom.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService, IConfigurationChangeEvent } from '../../../../platform/configuration/common/configuration.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { INativeWorkbenchEnvironmentService } from '../../../services/environment/electron-browser/environmentService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { isMacintosh, isWindows, isLinux, isBigSurOrNewer } from '../../../../base/common/platform.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { BrowserTitlebarPart, BrowserTitleService, IAuxiliaryTitlebarPart } from '../../../browser/parts/titlebar/titlebarPart.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IWorkbenchLayoutService, Parts } from '../../../services/layout/browser/layoutService.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { hasNativeTitlebar, useWindowControlsOverlay, DEFAULT_CUSTOM_TITLEBAR_HEIGHT, hasNativeMenu } from '../../../../platform/window/common/window.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { NativeMenubarControl } from './menubarControl.js';\nimport { IEditorGroupsContainer, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { CodeWindow, mainWindow } from '../../../../base/browser/window.js';\nimport { IsWindowAlwaysOnTopContext } from '../../../common/contextkeys.js';\n\nexport class NativeTitlebarPart extends BrowserTitlebarPart {\n\n\t//#region IView\n\n\toverride get minimumHeight(): number {\n\t\tif (!isMacintosh) {\n\t\t\treturn super.minimumHeight;\n\t\t}\n\n\t\treturn (this.isCommandCenterVisible ? DEFAULT_CUSTOM_TITLEBAR_HEIGHT : this.macTitlebarSize) / (this.preventZoom ? getZoomFactor(getWindow(this.element)) : 1);\n\t}\n\toverride get maximumHeight(): number { return this.minimumHeight; }\n\n\tprivate bigSurOrNewer: boolean;\n\tprivate get macTitlebarSize() {\n\t\tif (this.bigSurOrNewer) {\n\t\t\treturn 28; // macOS Big Sur increases title bar height\n\t\t}\n\n\t\treturn 22;\n\t}\n\n\t//#endregion\n\n\tprivate maxRestoreControl: HTMLElement | undefined;\n\tprivate resizer: HTMLElement | undefined;\n\n\tprivate cachedWindowControlStyles: { bgColor: string; fgColor: string } | undefined;\n\tprivate cachedWindowControlHeight: number | undefined;\n\n\tconstructor(\n\t\tid: string,\n\t\ttargetWindow: CodeWindow,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tsuper(id, targetWindow, editorGroupsContainer, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, editorService, menuService, keybindingService);\n\n\t\tthis.bigSurOrNewer = isBigSurOrNewer(environmentService.os.release);\n\n\t\tthis.handleWindowsAlwaysOnTop(targetWindow.vscodeWindowId);\n\t}\n\n\tprivate async handleWindowsAlwaysOnTop(targetWindowId: number): Promise<void> {\n\t\tconst isWindowAlwaysOnTopContext = IsWindowAlwaysOnTopContext.bindTo(this.contextKeyService);\n\n\t\tthis._register(this.nativeHostService.onDidChangeWindowAlwaysOnTop(({ windowId, alwaysOnTop }) => {\n\t\t\tif (windowId === targetWindowId) {\n\t\t\t\tisWindowAlwaysOnTopContext.set(alwaysOnTop);\n\t\t\t}\n\t\t}));\n\n\t\tisWindowAlwaysOnTopContext.set(await this.nativeHostService.isWindowAlwaysOnTop({ targetWindowId }));\n\t}\n\n\tprotected override onMenubarVisibilityChanged(visible: boolean): void {\n\n\t\t// Hide title when toggling menu bar\n\t\tif ((isWindows || isLinux) && this.currentMenubarVisibility === 'toggle' && visible) {\n\n\t\t\t// Hack to fix issue #52522 with layered webkit-app-region elements appearing under cursor\n\t\t\tif (this.dragRegion) {\n\t\t\t\thide(this.dragRegion);\n\t\t\t\tsetTimeout(() => show(this.dragRegion!), 50);\n\t\t\t}\n\t\t}\n\n\t\tsuper.onMenubarVisibilityChanged(visible);\n\t}\n\n\tprotected override onConfigurationChanged(event: IConfigurationChangeEvent): void {\n\t\tsuper.onConfigurationChanged(event);\n\n\t\tif (event.affectsConfiguration('window.doubleClickIconToClose')) {\n\t\t\tif (this.appIcon) {\n\t\t\t\tthis.onUpdateAppIconDragBehavior();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onUpdateAppIconDragBehavior(): void {\n\t\tconst setting = this.configurationService.getValue('window.doubleClickIconToClose');\n\t\tif (setting && this.appIcon) {\n\t\t\t(this.appIcon.style as CSSStyleDeclaration & { '-webkit-app-region': string })['-webkit-app-region'] = 'no-drag';\n\t\t} else if (this.appIcon) {\n\t\t\t(this.appIcon.style as CSSStyleDeclaration & { '-webkit-app-region': string })['-webkit-app-region'] = 'drag';\n\t\t}\n\t}\n\n\tprotected override installMenubar(): void {\n\t\tsuper.installMenubar();\n\n\t\tif (this.menubar) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.customMenubar.value) {\n\t\t\tthis._register(this.customMenubar.value.onFocusStateChange(e => this.onMenubarFocusChanged(e)));\n\t\t}\n\t}\n\n\tprivate onMenubarFocusChanged(focused: boolean): void {\n\t\tif ((isWindows || isLinux) && this.currentMenubarVisibility !== 'compact' && this.dragRegion) {\n\t\t\tif (focused) {\n\t\t\t\thide(this.dragRegion);\n\t\t\t} else {\n\t\t\t\tshow(this.dragRegion);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\tconst result = super.createContentArea(parent);\n\t\tconst targetWindow = getWindow(parent);\n\t\tconst targetWindowId = getWindowId(targetWindow);\n\n\t\t// Native menu controller\n\t\tif (isMacintosh || hasNativeMenu(this.configurationService)) {\n\t\t\tthis._register(this.instantiationService.createInstance(NativeMenubarControl));\n\t\t}\n\n\t\t// App Icon (Native Windows/Linux)\n\t\tif (this.appIcon) {\n\t\t\tthis.onUpdateAppIconDragBehavior();\n\n\t\t\tthis._register(addDisposableListener(this.appIcon, EventType.DBLCLICK, (() => {\n\t\t\t\tthis.nativeHostService.closeWindow({ targetWindowId });\n\t\t\t})));\n\t\t}\n\n\t\t// Custom Window Controls (Native Windows/Linux)\n\t\tif (\n\t\t\t!hasNativeTitlebar(this.configurationService) &&\t\t// not for native title bars\n\t\t\t!useWindowControlsOverlay(this.configurationService) &&\t// not when controls are natively drawn\n\t\t\tthis.windowControlsContainer\n\t\t) {\n\n\t\t\t// Minimize\n\t\t\tconst minimizeIcon = append(this.windowControlsContainer, $('div.window-icon.window-minimize' + ThemeIcon.asCSSSelector(Codicon.chromeMinimize)));\n\t\t\tthis._register(addDisposableListener(minimizeIcon, EventType.CLICK, () => {\n\t\t\t\tthis.nativeHostService.minimizeWindow({ targetWindowId });\n\t\t\t}));\n\n\t\t\t// Restore\n\t\t\tthis.maxRestoreControl = append(this.windowControlsContainer, $('div.window-icon.window-max-restore'));\n\t\t\tthis._register(addDisposableListener(this.maxRestoreControl, EventType.CLICK, async () => {\n\t\t\t\tconst maximized = await this.nativeHostService.isMaximized({ targetWindowId });\n\t\t\t\tif (maximized) {\n\t\t\t\t\treturn this.nativeHostService.unmaximizeWindow({ targetWindowId });\n\t\t\t\t}\n\n\t\t\t\treturn this.nativeHostService.maximizeWindow({ targetWindowId });\n\t\t\t}));\n\n\t\t\t// Close\n\t\t\tconst closeIcon = append(this.windowControlsContainer, $('div.window-icon.window-close' + ThemeIcon.asCSSSelector(Codicon.chromeClose)));\n\t\t\tthis._register(addDisposableListener(closeIcon, EventType.CLICK, () => {\n\t\t\t\tthis.nativeHostService.closeWindow({ targetWindowId });\n\t\t\t}));\n\n\t\t\t// Resizer\n\t\t\tthis.resizer = append(this.rootContainer, $('div.resizer'));\n\t\t\tthis._register(Event.runAndSubscribe(this.layoutService.onDidChangeWindowMaximized, ({ windowId, maximized }) => {\n\t\t\t\tif (windowId === targetWindowId) {\n\t\t\t\t\tthis.onDidChangeWindowMaximized(maximized);\n\t\t\t\t}\n\t\t\t}, { windowId: targetWindowId, maximized: this.layoutService.isWindowMaximized(targetWindow) }));\n\t\t}\n\n\t\t// Window System Context Menu\n\t\t// See https://github.com/electron/electron/issues/24893\n\t\tif (isWindows && !hasNativeTitlebar(this.configurationService)) {\n\t\t\tthis._register(this.nativeHostService.onDidTriggerWindowSystemContextMenu(({ windowId, x, y }) => {\n\t\t\t\tif (targetWindowId !== windowId) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst zoomFactor = getZoomFactor(getWindow(this.element));\n\t\t\t\tthis.onContextMenu(new MouseEvent(EventType.MOUSE_UP, { clientX: x / zoomFactor, clientY: y / zoomFactor }), MenuId.TitleBarContext);\n\t\t\t}));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate onDidChangeWindowMaximized(maximized: boolean): void {\n\t\tif (this.maxRestoreControl) {\n\t\t\tif (maximized) {\n\t\t\t\tthis.maxRestoreControl.classList.remove(...ThemeIcon.asClassNameArray(Codicon.chromeMaximize));\n\t\t\t\tthis.maxRestoreControl.classList.add(...ThemeIcon.asClassNameArray(Codicon.chromeRestore));\n\t\t\t} else {\n\t\t\t\tthis.maxRestoreControl.classList.remove(...ThemeIcon.asClassNameArray(Codicon.chromeRestore));\n\t\t\t\tthis.maxRestoreControl.classList.add(...ThemeIcon.asClassNameArray(Codicon.chromeMaximize));\n\t\t\t}\n\t\t}\n\n\t\tif (this.resizer) {\n\t\t\tif (maximized) {\n\t\t\t\thide(this.resizer);\n\t\t\t} else {\n\t\t\t\tshow(this.resizer);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride updateStyles(): void {\n\t\tsuper.updateStyles();\n\n\t\t// Part container\n\t\tif (this.element) {\n\t\t\tif (useWindowControlsOverlay(this.configurationService)) {\n\t\t\t\tif (\n\t\t\t\t\t!this.cachedWindowControlStyles ||\n\t\t\t\t\tthis.cachedWindowControlStyles.bgColor !== this.element.style.backgroundColor ||\n\t\t\t\t\tthis.cachedWindowControlStyles.fgColor !== this.element.style.color\n\t\t\t\t) {\n\t\t\t\t\tthis.nativeHostService.updateWindowControls({\n\t\t\t\t\t\ttargetWindowId: getWindowId(getWindow(this.element)),\n\t\t\t\t\t\tbackgroundColor: this.element.style.backgroundColor,\n\t\t\t\t\t\tforegroundColor: this.element.style.color\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride layout(width: number, height: number): void {\n\t\tsuper.layout(width, height);\n\n\t\tif (useWindowControlsOverlay(this.configurationService)) {\n\n\t\t\t// When the user goes into full screen mode, the height of the title bar becomes 0.\n\t\t\t// Instead, set it back to the default titlebar height for Catalina users\n\t\t\t// so that they can have the traffic lights rendered at the proper offset.\n\t\t\t// Ref https://github.com/microsoft/vscode/issues/159862\n\n\t\t\tconst newHeight = (height > 0 || this.bigSurOrNewer) ? Math.round(height * getZoomFactor(getWindow(this.element))) : this.macTitlebarSize;\n\t\t\tif (newHeight !== this.cachedWindowControlHeight) {\n\t\t\t\tthis.cachedWindowControlHeight = newHeight;\n\t\t\t\tthis.nativeHostService.updateWindowControls({\n\t\t\t\t\ttargetWindowId: getWindowId(getWindow(this.element)),\n\t\t\t\t\theight: newHeight\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class MainNativeTitlebarPart extends NativeTitlebarPart {\n\n\tconstructor(\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tsuper(Parts.TITLEBAR_PART, mainWindow, editorGroupService.mainPart, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, nativeHostService, editorGroupService, editorService, menuService, keybindingService);\n\t}\n}\n\nexport class AuxiliaryNativeTitlebarPart extends NativeTitlebarPart implements IAuxiliaryTitlebarPart {\n\n\tprivate static COUNTER = 1;\n\n\tget height() { return this.minimumHeight; }\n\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t\tprivate readonly mainTitlebar: BrowserTitlebarPart,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tconst id = AuxiliaryNativeTitlebarPart.COUNTER++;\n\t\tsuper(`workbench.parts.auxiliaryTitle.${id}`, getWindow(container), editorGroupsContainer, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, nativeHostService, editorGroupService, editorService, menuService, keybindingService);\n\t}\n\n\toverride get preventZoom(): boolean {\n\n\t\t// Prevent zooming behavior if any of the following conditions are met:\n\t\t// 1. Shrinking below the window control size (zoom < 1)\n\t\t// 2. No custom items are present in the main title bar\n\t\t// The auxiliary title bar never contains any zoomable items itself,\n\t\t// but we want to match the behavior of the main title bar.\n\n\t\treturn getZoomFactor(getWindow(this.element)) < 1 || !this.mainTitlebar.hasZoomableElements;\n\t}\n}\n\nexport class NativeTitleService extends BrowserTitleService {\n\n\tprotected override createMainTitlebarPart(): MainNativeTitlebarPart {\n\t\treturn this.instantiationService.createInstance(MainNativeTitlebarPart);\n\t}\n\n\tprotected override doCreateAuxiliaryTitlebarPart(container: HTMLElement, editorGroupsContainer: IEditorGroupsContainer, instantiationService: IInstantiationService): AuxiliaryNativeTitlebarPart {\n\t\treturn instantiationService.createInstance(AuxiliaryNativeTitlebarPart, container, editorGroupsContainer, this.mainPart);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../base/common/event.js';\nimport { getZoomFactor } from '../../../../base/browser/browser.js';\nimport { $, addDisposableListener, append, EventType, getWindow, getWindowId, hide, show } from '../../../../base/browser/dom.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService, IConfigurationChangeEvent } from '../../../../platform/configuration/common/configuration.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { INativeWorkbenchEnvironmentService } from '../../../services/environment/electron-browser/environmentService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { isMacintosh, isWindows, isLinux, isBigSurOrNewer } from '../../../../base/common/platform.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { BrowserTitlebarPart, BrowserTitleService, IAuxiliaryTitlebarPart } from '../../../browser/parts/titlebar/titlebarPart.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IWorkbenchLayoutService, Parts } from '../../../services/layout/browser/layoutService.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { hasNativeTitlebar, useWindowControlsOverlay, DEFAULT_CUSTOM_TITLEBAR_HEIGHT, hasNativeMenu } from '../../../../platform/window/common/window.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { NativeMenubarControl } from './menubarControl.js';\nimport { IEditorGroupsContainer, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { CodeWindow, mainWindow } from '../../../../base/browser/window.js';\nimport { IsWindowAlwaysOnTopContext } from '../../../common/contextkeys.js';\n\nexport class NativeTitlebarPart extends BrowserTitlebarPart {\n\n\t//#region IView\n\n\toverride get minimumHeight(): number {\n\t\tif (!isMacintosh) {\n\t\t\treturn super.minimumHeight;\n\t\t}\n\n\t\treturn (this.isCommandCenterVisible ? DEFAULT_CUSTOM_TITLEBAR_HEIGHT : this.macTitlebarSize) / (this.preventZoom ? getZoomFactor(getWindow(this.element)) : 1);\n\t}\n\toverride get maximumHeight(): number { return this.minimumHeight; }\n\n\tprivate bigSurOrNewer: boolean;\n\tprivate get macTitlebarSize() {\n\t\tif (this.bigSurOrNewer) {\n\t\t\treturn 28; // macOS Big Sur increases title bar height\n\t\t}\n\n\t\treturn 22;\n\t}\n\n\t//#endregion\n\n\tprivate maxRestoreControl: HTMLElement | undefined;\n\tprivate resizer: HTMLElement | undefined;\n\n\tprivate cachedWindowControlStyles: { bgColor: string; fgColor: string } | undefined;\n\tprivate cachedWindowControlHeight: number | undefined;\n\n\tconstructor(\n\t\tid: string,\n\t\ttargetWindow: CodeWindow,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tsuper(id, targetWindow, editorGroupsContainer, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, editorService, menuService, keybindingService);\n\n\t\tthis.bigSurOrNewer = isBigSurOrNewer(environmentService.os.release);\n\n\t\tthis.handleWindowsAlwaysOnTop(targetWindow.vscodeWindowId);\n\t}\n\n\tprivate async handleWindowsAlwaysOnTop(targetWindowId: number): Promise<void> {\n\t\tconst isWindowAlwaysOnTopContext = IsWindowAlwaysOnTopContext.bindTo(this.contextKeyService);\n\n\t\tthis._register(this.nativeHostService.onDidChangeWindowAlwaysOnTop(({ windowId, alwaysOnTop }) => {\n\t\t\tif (windowId === targetWindowId) {\n\t\t\t\tisWindowAlwaysOnTopContext.set(alwaysOnTop);\n\t\t\t}\n\t\t}));\n\n\t\tisWindowAlwaysOnTopContext.set(await this.nativeHostService.isWindowAlwaysOnTop({ targetWindowId }));\n\t}\n\n\tprotected override onMenubarVisibilityChanged(visible: boolean): void {\n\n\t\t// Hide title when toggling menu bar\n\t\tif ((isWindows || isLinux) && this.currentMenubarVisibility === 'toggle' && visible) {\n\n\t\t\t// Hack to fix issue #52522 with layered webkit-app-region elements appearing under cursor\n\t\t\tif (this.dragRegion) {\n\t\t\t\thide(this.dragRegion);\n\t\t\t\tsetTimeout(() => show(this.dragRegion!), 50);\n\t\t\t}\n\t\t}\n\n\t\tsuper.onMenubarVisibilityChanged(visible);\n\t}\n\n\tprotected override onConfigurationChanged(event: IConfigurationChangeEvent): void {\n\t\tsuper.onConfigurationChanged(event);\n\n\t\tif (event.affectsConfiguration('window.doubleClickIconToClose')) {\n\t\t\tif (this.appIcon) {\n\t\t\t\tthis.onUpdateAppIconDragBehavior();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onUpdateAppIconDragBehavior(): void {\n\t\tconst setting = this.configurationService.getValue('window.doubleClickIconToClose');\n\t\tif (setting && this.appIcon) {\n\t\t\t(this.appIcon.style as CSSStyleDeclaration & { '-webkit-app-region': string })['-webkit-app-region'] = 'no-drag';\n\t\t} else if (this.appIcon) {\n\t\t\t(this.appIcon.style as CSSStyleDeclaration & { '-webkit-app-region': string })['-webkit-app-region'] = 'drag';\n\t\t}\n\t}\n\n\tprotected override installMenubar(): void {\n\t\tsuper.installMenubar();\n\n\t\tif (this.menubar) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.customMenubar.value) {\n\t\t\tthis._register(this.customMenubar.value.onFocusStateChange(e => this.onMenubarFocusChanged(e)));\n\t\t}\n\t}\n\n\tprivate onMenubarFocusChanged(focused: boolean): void {\n\t\tif ((isWindows || isLinux) && this.currentMenubarVisibility !== 'compact' && this.dragRegion) {\n\t\t\tif (focused) {\n\t\t\t\thide(this.dragRegion);\n\t\t\t} else {\n\t\t\t\tshow(this.dragRegion);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\tconst result = super.createContentArea(parent);\n\t\tconst targetWindow = getWindow(parent);\n\t\tconst targetWindowId = getWindowId(targetWindow);\n\n\t\t// Native menu controller\n\t\tif (isMacintosh || hasNativeMenu(this.configurationService)) {\n\t\t\tthis._register(this.instantiationService.createInstance(NativeMenubarControl));\n\t\t}\n\n\t\t// App Icon (Native Windows/Linux)\n\t\tif (this.appIcon) {\n\t\t\tthis.onUpdateAppIconDragBehavior();\n\n\t\t\tthis._register(addDisposableListener(this.appIcon, EventType.DBLCLICK, (() => {\n\t\t\t\tthis.nativeHostService.closeWindow({ targetWindowId });\n\t\t\t})));\n\t\t}\n\n\t\t// Custom Window Controls (Native Windows/Linux)\n\t\tif (\n\t\t\t!hasNativeTitlebar(this.configurationService) &&\t\t// not for native title bars\n\t\t\t!useWindowControlsOverlay(this.configurationService) &&\t// not when controls are natively drawn\n\t\t\tthis.windowControlsContainer\n\t\t) {\n\n\t\t\t// Minimize\n\t\t\tconst minimizeIcon = append(this.windowControlsContainer, $('div.window-icon.window-minimize' + ThemeIcon.asCSSSelector(Codicon.chromeMinimize)));\n\t\t\tthis._register(addDisposableListener(minimizeIcon, EventType.CLICK, () => {\n\t\t\t\tthis.nativeHostService.minimizeWindow({ targetWindowId });\n\t\t\t}));\n\n\t\t\t// Restore\n\t\t\tthis.maxRestoreControl = append(this.windowControlsContainer, $('div.window-icon.window-max-restore'));\n\t\t\tthis._register(addDisposableListener(this.maxRestoreControl, EventType.CLICK, async () => {\n\t\t\t\tconst maximized = await this.nativeHostService.isMaximized({ targetWindowId });\n\t\t\t\tif (maximized) {\n\t\t\t\t\treturn this.nativeHostService.unmaximizeWindow({ targetWindowId });\n\t\t\t\t}\n\n\t\t\t\treturn this.nativeHostService.maximizeWindow({ targetWindowId });\n\t\t\t}));\n\n\t\t\t// Close\n\t\t\tconst closeIcon = append(this.windowControlsContainer, $('div.window-icon.window-close' + ThemeIcon.asCSSSelector(Codicon.chromeClose)));\n\t\t\tthis._register(addDisposableListener(closeIcon, EventType.CLICK, () => {\n\t\t\t\tthis.nativeHostService.closeWindow({ targetWindowId });\n\t\t\t}));\n\n\t\t\t// Resizer\n\t\t\tthis.resizer = append(this.rootContainer, $('div.resizer'));\n\t\t\tthis._register(Event.runAndSubscribe(this.layoutService.onDidChangeWindowMaximized, ({ windowId, maximized }) => {\n\t\t\t\tif (windowId === targetWindowId) {\n\t\t\t\t\tthis.onDidChangeWindowMaximized(maximized);\n\t\t\t\t}\n\t\t\t}, { windowId: targetWindowId, maximized: this.layoutService.isWindowMaximized(targetWindow) }));\n\t\t}\n\n\t\t// Window System Context Menu\n\t\t// See https://github.com/electron/electron/issues/24893\n\t\tif (isWindows && !hasNativeTitlebar(this.configurationService)) {\n\t\t\tthis._register(this.nativeHostService.onDidTriggerWindowSystemContextMenu(({ windowId, x, y }) => {\n\t\t\t\tif (targetWindowId !== windowId) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst zoomFactor = getZoomFactor(getWindow(this.element));\n\t\t\t\tthis.onContextMenu(new MouseEvent(EventType.MOUSE_UP, { clientX: x / zoomFactor, clientY: y / zoomFactor }), MenuId.TitleBarContext);\n\t\t\t}));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate onDidChangeWindowMaximized(maximized: boolean): void {\n\t\tif (this.maxRestoreControl) {\n\t\t\tif (maximized) {\n\t\t\t\tthis.maxRestoreControl.classList.remove(...ThemeIcon.asClassNameArray(Codicon.chromeMaximize));\n\t\t\t\tthis.maxRestoreControl.classList.add(...ThemeIcon.asClassNameArray(Codicon.chromeRestore));\n\t\t\t} else {\n\t\t\t\tthis.maxRestoreControl.classList.remove(...ThemeIcon.asClassNameArray(Codicon.chromeRestore));\n\t\t\t\tthis.maxRestoreControl.classList.add(...ThemeIcon.asClassNameArray(Codicon.chromeMaximize));\n\t\t\t}\n\t\t}\n\n\t\tif (this.resizer) {\n\t\t\tif (maximized) {\n\t\t\t\thide(this.resizer);\n\t\t\t} else {\n\t\t\t\tshow(this.resizer);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride updateStyles(): void {\n\t\tsuper.updateStyles();\n\n\t\t// Part container\n\t\tif (this.element) {\n\t\t\tif (useWindowControlsOverlay(this.configurationService)) {\n\t\t\t\tif (\n\t\t\t\t\t!this.cachedWindowControlStyles ||\n\t\t\t\t\tthis.cachedWindowControlStyles.bgColor !== this.element.style.backgroundColor ||\n\t\t\t\t\tthis.cachedWindowControlStyles.fgColor !== this.element.style.color\n\t\t\t\t) {\n\t\t\t\t\tthis.nativeHostService.updateWindowControls({\n\t\t\t\t\t\ttargetWindowId: getWindowId(getWindow(this.element)),\n\t\t\t\t\t\tbackgroundColor: this.element.style.backgroundColor,\n\t\t\t\t\t\tforegroundColor: this.element.style.color\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride layout(width: number, height: number): void {\n\t\tsuper.layout(width, height);\n\n\t\tif (useWindowControlsOverlay(this.configurationService)) {\n\n\t\t\t// When the user goes into full screen mode, the height of the title bar becomes 0.\n\t\t\t// Instead, set it back to the default titlebar height for Catalina users\n\t\t\t// so that they can have the traffic lights rendered at the proper offset.\n\t\t\t// Ref https://github.com/microsoft/vscode/issues/159862\n\n\t\t\tconst newHeight = (height > 0 || this.bigSurOrNewer) ? Math.round(height * getZoomFactor(getWindow(this.element))) : this.macTitlebarSize;\n\t\t\tif (newHeight !== this.cachedWindowControlHeight) {\n\t\t\t\tthis.cachedWindowControlHeight = newHeight;\n\t\t\t\tthis.nativeHostService.updateWindowControls({\n\t\t\t\t\ttargetWindowId: getWindowId(getWindow(this.element)),\n\t\t\t\t\theight: newHeight\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class MainNativeTitlebarPart extends NativeTitlebarPart {\n\n\tconstructor(\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tsuper(Parts.TITLEBAR_PART, mainWindow, editorGroupService.mainPart, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, nativeHostService, editorGroupService, editorService, menuService, keybindingService);\n\t}\n}\n\nexport class AuxiliaryNativeTitlebarPart extends NativeTitlebarPart implements IAuxiliaryTitlebarPart {\n\n\tprivate static COUNTER = 1;\n\n\tget height() { return this.minimumHeight; }\n\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t\tprivate readonly mainTitlebar: BrowserTitlebarPart,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService\n\t) {\n\t\tconst id = AuxiliaryNativeTitlebarPart.COUNTER++;\n\t\tsuper(`workbench.parts.auxiliaryTitle.${id}`, getWindow(container), editorGroupsContainer, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, nativeHostService, editorGroupService, editorService, menuService, keybindingService);\n\t}\n\n\toverride get preventZoom(): boolean {\n\n\t\t// Prevent zooming behavior if any of the following conditions are met:\n\t\t// 1. Shrinking below the window control size (zoom < 1)\n\t\t// 2. No custom items are present in the main title bar\n\t\t// The auxiliary title bar never contains any zoomable items itself,\n\t\t// but we want to match the behavior of the main title bar.\n\n\t\treturn getZoomFactor(getWindow(this.element)) < 1 || !this.mainTitlebar.hasZoomableElements;\n\t}\n}\n\nexport class NativeTitleService extends BrowserTitleService {\n\n\tprotected override createMainTitlebarPart(): MainNativeTitlebarPart {\n\t\treturn this.instantiationService.createInstance(MainNativeTitlebarPart);\n\t}\n\n\tprotected override doCreateAuxiliaryTitlebarPart(container: HTMLElement, editorGroupsContainer: IEditorGroupsContainer, instantiationService: IInstantiationService): AuxiliaryNativeTitlebarPart {\n\t\treturn instantiationService.createInstance(AuxiliaryNativeTitlebarPart, container, editorGroupsContainer, this.mainPart);\n\t}\n}\n"]}