{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/browser/workbench.ts","vs/workbench/browser/workbench.ts"],"names":[],"mappings":"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","file":"workbench.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './style.js';\nimport { runWhenWindowIdle } from '../../base/browser/dom.js';\nimport { Event, Emitter, setGlobalLeakWarningThreshold } from '../../base/common/event.js';\nimport { RunOnceScheduler, timeout } from '../../base/common/async.js';\nimport { isFirefox, isSafari, isChrome } from '../../base/browser/browser.js';\nimport { mark } from '../../base/common/performance.js';\nimport { onUnexpectedError, setUnexpectedErrorHandler } from '../../base/common/errors.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { isWindows, isLinux, isWeb, isNative, isMacintosh } from '../../base/common/platform.js';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from '../common/contributions.js';\nimport { IEditorFactoryRegistry, EditorExtensions } from '../common/editor.js';\nimport { getSingletonServiceDescriptors } from '../../platform/instantiation/common/extensions.js';\nimport { Position, Parts, IWorkbenchLayoutService, positionToString } from '../services/layout/browser/layoutService.js';\nimport { IStorageService, WillSaveStateReason, StorageScope, StorageTarget } from '../../platform/storage/common/storage.js';\nimport { IConfigurationChangeEvent, IConfigurationService } from '../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../platform/instantiation/common/serviceCollection.js';\nimport { LifecyclePhase, ILifecycleService, WillShutdownEvent } from '../services/lifecycle/common/lifecycle.js';\nimport { INotificationService } from '../../platform/notification/common/notification.js';\nimport { NotificationService } from '../services/notification/common/notificationService.js';\nimport { NotificationsCenter } from './parts/notifications/notificationsCenter.js';\nimport { NotificationsAlerts } from './parts/notifications/notificationsAlerts.js';\nimport { NotificationsStatus } from './parts/notifications/notificationsStatus.js';\nimport { registerNotificationCommands } from './parts/notifications/notificationsCommands.js';\nimport { NotificationsToasts } from './parts/notifications/notificationsToasts.js';\nimport { setARIAContainer } from '../../base/browser/ui/aria/aria.js';\nimport { FontMeasurements } from '../../editor/browser/config/fontMeasurements.js';\nimport { createBareFontInfoFromRawSettings } from '../../editor/common/config/fontInfoFromSettings.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nimport { toErrorMessage } from '../../base/common/errorMessage.js';\nimport { WorkbenchContextKeysHandler } from './contextkeys.js';\nimport { coalesce } from '../../base/common/arrays.js';\nimport { InstantiationService } from '../../platform/instantiation/common/instantiationService.js';\nimport { Layout } from './layout.js';\nimport { IHostService } from '../services/host/browser/host.js';\nimport { IDialogService } from '../../platform/dialogs/common/dialogs.js';\nimport { mainWindow } from '../../base/browser/window.js';\nimport { PixelRatio } from '../../base/browser/pixelRatio.js';\nimport { IHoverService, WorkbenchHoverDelegate } from '../../platform/hover/browser/hover.js';\nimport { setHoverDelegateFactory } from '../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { setBaseLayerHoverDelegate } from '../../base/browser/ui/hover/hoverDelegate2.js';\nimport { AccessibilityProgressSignalScheduler } from '../../platform/accessibilitySignal/browser/progressAccessibilitySignalScheduler.js';\nimport { setProgressAccessibilitySignalScheduler } from '../../base/browser/ui/progressbar/progressAccessibilitySignal.js';\nimport { AccessibleViewRegistry } from '../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { NotificationAccessibleView } from './parts/notifications/notificationAccessibleView.js';\nimport { IMarkdownRendererService } from '../../platform/markdown/browser/markdownRenderer.js';\nimport { EditorMarkdownCodeBlockRenderer } from '../../editor/browser/widget/markdownRenderer/browser/editorMarkdownCodeBlockRenderer.js';\n\nexport interface IWorkbenchOptions {\n\n\t/**\n\t * Extra classes to be added to the workbench container.\n\t */\n\textraClasses?: string[];\n\n\t/**\n\t * Whether to reset the workbench parts layout on startup.\n\t */\n\tresetLayout?: boolean;\n}\n\nexport class Workbench extends Layout {\n\n\tprivate readonly _onWillShutdown = this._register(new Emitter<WillShutdownEvent>());\n\treadonly onWillShutdown = this._onWillShutdown.event;\n\n\tprivate readonly _onDidShutdown = this._register(new Emitter<void>());\n\treadonly onDidShutdown = this._onDidShutdown.event;\n\n\tconstructor(\n\t\tparent: HTMLElement,\n\t\tprivate readonly options: IWorkbenchOptions | undefined,\n\t\tprivate readonly serviceCollection: ServiceCollection,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper(parent, { resetLayout: Boolean(options?.resetLayout) });\n\n\t\t// Perf: measure workbench startup time\n\t\tmark('code/willStartWorkbench');\n\n\t\tthis.registerErrorHandler(logService);\n\t}\n\n\tprivate registerErrorHandler(logService: ILogService): void {\n\n\t\t// Listen on unhandled rejection events\n\t\t// Note: intentionally not registered as disposable to handle\n\t\t//       errors that can occur during shutdown phase.\n\t\tmainWindow.addEventListener('unhandledrejection', (event) => {\n\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n\t\t\tonUnexpectedError(event.reason);\n\n\t\t\t// Prevent the printing of this event to the console\n\t\t\tevent.preventDefault();\n\t\t});\n\n\t\t// Install handler for unexpected errors\n\t\tsetUnexpectedErrorHandler(error => this.handleUnexpectedError(error, logService));\n\t}\n\n\tprivate previousUnexpectedError: { message: string | undefined; time: number } = { message: undefined, time: 0 };\n\tprivate handleUnexpectedError(error: unknown, logService: ILogService): void {\n\t\tconst message = toErrorMessage(error, true);\n\t\tif (!message) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst now = Date.now();\n\t\tif (message === this.previousUnexpectedError.message && now - this.previousUnexpectedError.time <= 1000) {\n\t\t\treturn; // Return if error message identical to previous and shorter than 1 second\n\t\t}\n\n\t\tthis.previousUnexpectedError.time = now;\n\t\tthis.previousUnexpectedError.message = message;\n\n\t\t// Log it\n\t\tlogService.error(message);\n\t}\n\n\tstartup(): IInstantiationService {\n\t\ttry {\n\n\t\t\t// Configure emitter leak warning threshold\n\t\t\tthis._register(setGlobalLeakWarningThreshold(175));\n\n\t\t\t// Services\n\t\t\tconst instantiationService = this.initServices(this.serviceCollection);\n\n\t\t\tinstantiationService.invokeFunction(accessor => {\n\t\t\t\tconst lifecycleService = accessor.get(ILifecycleService);\n\t\t\t\tconst storageService = accessor.get(IStorageService);\n\t\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\t\tconst hostService = accessor.get(IHostService);\n\t\t\t\tconst hoverService = accessor.get(IHoverService);\n\t\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\t\tconst notificationService = accessor.get(INotificationService) as NotificationService;\n\t\t\t\tconst markdownRendererService = accessor.get(IMarkdownRendererService);\n\n\t\t\t\t// Set code block renderer for markdown rendering\n\t\t\t\tmarkdownRendererService.setDefaultCodeBlockRenderer(instantiationService.createInstance(EditorMarkdownCodeBlockRenderer));\n\n\t\t\t\t// Default Hover Delegate must be registered before creating any workbench/layout components\n\t\t\t\t// as these possibly will use the default hover delegate\n\t\t\t\tsetHoverDelegateFactory((placement, enableInstantHover) => instantiationService.createInstance(WorkbenchHoverDelegate, placement, { instantHover: enableInstantHover }, {}));\n\t\t\t\tsetBaseLayerHoverDelegate(hoverService);\n\n\t\t\t\t// Layout\n\t\t\t\tthis.initLayout(accessor);\n\n\t\t\t\t// Registries\n\t\t\t\tRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).start(accessor);\n\t\t\t\tRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).start(accessor);\n\n\t\t\t\t// Context Keys\n\t\t\t\tthis._register(instantiationService.createInstance(WorkbenchContextKeysHandler));\n\n\t\t\t\t// Register Listeners\n\t\t\t\tthis.registerListeners(lifecycleService, storageService, configurationService, hostService, dialogService);\n\n\t\t\t\t// Render Workbench\n\t\t\t\tthis.renderWorkbench(instantiationService, notificationService, storageService, configurationService);\n\n\t\t\t\t// Workbench Layout\n\t\t\t\tthis.createWorkbenchLayout();\n\n\t\t\t\t// Layout\n\t\t\t\tthis.layout();\n\n\t\t\t\t// Restore\n\t\t\t\tthis.restore(lifecycleService);\n\t\t\t});\n\n\t\t\treturn instantiationService;\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\n\t\t\tthrow error; // rethrow because this is a critical issue we cannot handle properly here\n\t\t}\n\t}\n\n\tprivate initServices(serviceCollection: ServiceCollection): IInstantiationService {\n\n\t\t// Layout Service\n\t\tserviceCollection.set(IWorkbenchLayoutService, this);\n\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t//\n\t\t// NOTE: Please do NOT register services here. Use `registerSingleton()`\n\t\t//       from `workbench.common.main.ts` if the service is shared between\n\t\t//       desktop and web or `workbench.desktop.main.ts` if the service\n\t\t//       is desktop only.\n\t\t//\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\t\t// All Contributed Services\n\t\tconst contributedServices = getSingletonServiceDescriptors();\n\t\tfor (const [id, descriptor] of contributedServices) {\n\t\t\tserviceCollection.set(id, descriptor);\n\t\t}\n\n\t\tconst instantiationService = new InstantiationService(serviceCollection, true);\n\n\t\t// Wrap up\n\t\tinstantiationService.invokeFunction(accessor => {\n\t\t\tconst lifecycleService = accessor.get(ILifecycleService);\n\n\t\t\t// TODO@Sandeep debt around cyclic dependencies\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tif (configurationService && 'acquireInstantiationService' in configurationService) {\n\t\t\t\t(configurationService as { acquireInstantiationService: (instantiationService: unknown) => void }).acquireInstantiationService(instantiationService);\n\t\t\t}\n\n\t\t\t// Signal to lifecycle that services are set\n\t\t\tlifecycleService.phase = LifecyclePhase.Ready;\n\t\t});\n\n\t\treturn instantiationService;\n\t}\n\n\tprivate registerListeners(lifecycleService: ILifecycleService, storageService: IStorageService, configurationService: IConfigurationService, hostService: IHostService, dialogService: IDialogService): void {\n\n\t\t// Configuration changes\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => this.updateFontAliasing(e, configurationService)));\n\n\t\t// Font Info\n\t\tif (isNative) {\n\t\t\tthis._register(storageService.onWillSaveState(e => {\n\t\t\t\tif (e.reason === WillSaveStateReason.SHUTDOWN) {\n\t\t\t\t\tthis.storeFontInfo(storageService);\n\t\t\t\t}\n\t\t\t}));\n\t\t} else {\n\t\t\tthis._register(lifecycleService.onWillShutdown(() => this.storeFontInfo(storageService)));\n\t\t}\n\n\t\t// Lifecycle\n\t\tthis._register(lifecycleService.onWillShutdown(event => this._onWillShutdown.fire(event)));\n\t\tthis._register(lifecycleService.onDidShutdown(() => {\n\t\t\tthis._onDidShutdown.fire();\n\t\t\tthis.dispose();\n\t\t}));\n\n\t\t// In some environments we do not get enough time to persist state on shutdown.\n\t\t// In other cases, VSCode might crash, so we periodically save state to reduce\n\t\t// the chance of loosing any state.\n\t\t// The window loosing focus is a good indication that the user has stopped working\n\t\t// in that window so we pick that at a time to collect state.\n\t\tthis._register(hostService.onDidChangeFocus(focus => {\n\t\t\tif (!focus) {\n\t\t\t\tstorageService.flush();\n\t\t\t}\n\t\t}));\n\n\t\t// Dialogs showing/hiding\n\t\tthis._register(dialogService.onWillShowDialog(() => this.mainContainer.classList.add('modal-dialog-visible')));\n\t\tthis._register(dialogService.onDidShowDialog(() => this.mainContainer.classList.remove('modal-dialog-visible')));\n\t}\n\n\tprivate fontAliasing: 'default' | 'antialiased' | 'none' | 'auto' | undefined;\n\tprivate updateFontAliasing(e: IConfigurationChangeEvent | undefined, configurationService: IConfigurationService) {\n\t\tif (!isMacintosh) {\n\t\t\treturn; // macOS only\n\t\t}\n\n\t\tif (e && !e.affectsConfiguration('workbench.fontAliasing')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst aliasing = configurationService.getValue<'default' | 'antialiased' | 'none' | 'auto'>('workbench.fontAliasing');\n\t\tif (this.fontAliasing === aliasing) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fontAliasing = aliasing;\n\n\t\t// Remove all\n\t\tconst fontAliasingValues: (typeof aliasing)[] = ['antialiased', 'none', 'auto'];\n\t\tthis.mainContainer.classList.remove(...fontAliasingValues.map(value => `monaco-font-aliasing-${value}`));\n\n\t\t// Add specific\n\t\tif (fontAliasingValues.some(option => option === aliasing)) {\n\t\t\tthis.mainContainer.classList.add(`monaco-font-aliasing-${aliasing}`);\n\t\t}\n\t}\n\n\tprivate restoreFontInfo(storageService: IStorageService, configurationService: IConfigurationService): void {\n\t\tconst storedFontInfoRaw = storageService.get('editorFontInfo', StorageScope.APPLICATION);\n\t\tif (storedFontInfoRaw) {\n\t\t\ttry {\n\t\t\t\tconst storedFontInfo = JSON.parse(storedFontInfoRaw);\n\t\t\t\tif (Array.isArray(storedFontInfo)) {\n\t\t\t\t\tFontMeasurements.restoreFontInfo(mainWindow, storedFontInfo);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t/* ignore */\n\t\t\t}\n\t\t}\n\n\t\tFontMeasurements.readFontInfo(mainWindow, createBareFontInfoFromRawSettings(configurationService.getValue('editor'), PixelRatio.getInstance(mainWindow).value));\n\t}\n\n\tprivate storeFontInfo(storageService: IStorageService): void {\n\t\tconst serializedFontInfo = FontMeasurements.serializeFontInfo(mainWindow);\n\t\tif (serializedFontInfo) {\n\t\t\tstorageService.store('editorFontInfo', JSON.stringify(serializedFontInfo), StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t}\n\t}\n\n\tprivate renderWorkbench(instantiationService: IInstantiationService, notificationService: NotificationService, storageService: IStorageService, configurationService: IConfigurationService): void {\n\n\t\t// ARIA & Signals\n\t\tsetARIAContainer(this.mainContainer);\n\t\tsetProgressAccessibilitySignalScheduler((msDelayTime: number, msLoopTime?: number) => instantiationService.createInstance(AccessibilityProgressSignalScheduler, msDelayTime, msLoopTime));\n\n\t\t// State specific classes\n\t\tconst platformClass = isWindows ? 'windows' : isLinux ? 'linux' : 'mac';\n\t\tconst workbenchClasses = coalesce([\n\t\t\t'monaco-workbench',\n\t\t\tplatformClass,\n\t\t\tisWeb ? 'web' : undefined,\n\t\t\tisChrome ? 'chromium' : isFirefox ? 'firefox' : isSafari ? 'safari' : undefined,\n\t\t\t...this.getLayoutClasses(),\n\t\t\t...(this.options?.extraClasses ? this.options.extraClasses : [])\n\t\t]);\n\n\t\tthis.mainContainer.classList.add(...workbenchClasses);\n\n\t\t// Apply font aliasing\n\t\tthis.updateFontAliasing(undefined, configurationService);\n\n\t\t// Warm up font cache information before building up too many dom elements\n\t\tthis.restoreFontInfo(storageService, configurationService);\n\n\t\t// Create Parts\n\t\tfor (const { id, role, classes, options } of [\n\t\t\t{ id: Parts.TITLEBAR_PART, role: 'none', classes: ['titlebar'] },\n\t\t\t{ id: Parts.BANNER_PART, role: 'banner', classes: ['banner'] },\n\t\t\t{ id: Parts.ACTIVITYBAR_PART, role: 'none', classes: ['activitybar', this.getSideBarPosition() === Position.LEFT ? 'left' : 'right'] }, // Use role 'none' for some parts to make screen readers less chatty #114892\n\t\t\t{ id: Parts.SIDEBAR_PART, role: 'none', classes: ['sidebar', this.getSideBarPosition() === Position.LEFT ? 'left' : 'right'] },\n\t\t\t{ id: Parts.EDITOR_PART, role: 'main', classes: ['editor'], options: { restorePreviousState: this.willRestoreEditors() } },\n\t\t\t{ id: Parts.PANEL_PART, role: 'none', classes: ['panel', 'basepanel', positionToString(this.getPanelPosition())] },\n\t\t\t{ id: Parts.AUXILIARYBAR_PART, role: 'none', classes: ['auxiliarybar', 'basepanel', this.getSideBarPosition() === Position.LEFT ? 'right' : 'left'] },\n\t\t\t{ id: Parts.STATUSBAR_PART, role: 'status', classes: ['statusbar'] }\n\t\t]) {\n\t\t\tconst partContainer = this.createPart(id, role, classes);\n\n\t\t\tmark(`code/willCreatePart/${id}`);\n\t\t\tthis.getPart(id).create(partContainer, options);\n\t\t\tmark(`code/didCreatePart/${id}`);\n\t\t}\n\n\t\t// Notification Handlers\n\t\tthis.createNotificationsHandlers(instantiationService, notificationService);\n\n\t\t// Add Workbench to DOM\n\t\tthis.parent.appendChild(this.mainContainer);\n\t}\n\n\tprivate createPart(id: string, role: string, classes: string[]): HTMLElement {\n\t\tconst part = document.createElement(role === 'status' ? 'footer' /* Use footer element for status bar #98376 */ : 'div');\n\t\tpart.classList.add('part', ...classes);\n\t\tpart.id = id;\n\t\tpart.setAttribute('role', role);\n\t\tif (role === 'status') {\n\t\t\tpart.setAttribute('aria-live', 'off');\n\t\t}\n\n\t\treturn part;\n\t}\n\n\tprivate createNotificationsHandlers(instantiationService: IInstantiationService, notificationService: NotificationService): void {\n\n\t\t// Instantiate Notification components\n\t\tconst notificationsCenter = this._register(instantiationService.createInstance(NotificationsCenter, this.mainContainer, notificationService.model));\n\t\tconst notificationsToasts = this._register(instantiationService.createInstance(NotificationsToasts, this.mainContainer, notificationService.model));\n\t\tthis._register(instantiationService.createInstance(NotificationsAlerts, notificationService.model));\n\t\tconst notificationsStatus = instantiationService.createInstance(NotificationsStatus, notificationService.model);\n\n\t\t// Visibility\n\t\tthis._register(notificationsCenter.onDidChangeVisibility(() => {\n\t\t\tnotificationsStatus.update(notificationsCenter.isVisible, notificationsToasts.isVisible);\n\t\t\tnotificationsToasts.update(notificationsCenter.isVisible);\n\t\t}));\n\n\t\tthis._register(notificationsToasts.onDidChangeVisibility(() => {\n\t\t\tnotificationsStatus.update(notificationsCenter.isVisible, notificationsToasts.isVisible);\n\t\t}));\n\n\t\t// Register Commands\n\t\tregisterNotificationCommands(notificationsCenter, notificationsToasts, notificationService.model);\n\n\t\t// Register notification accessible view\n\t\tAccessibleViewRegistry.register(new NotificationAccessibleView());\n\n\t\t// Register with Layout\n\t\tthis.registerNotifications({\n\t\t\tonDidChangeNotificationsVisibility: Event.map(Event.any(notificationsToasts.onDidChangeVisibility, notificationsCenter.onDidChangeVisibility), () => notificationsToasts.isVisible || notificationsCenter.isVisible)\n\t\t});\n\t}\n\n\tprivate restore(lifecycleService: ILifecycleService): void {\n\n\t\t// Ask each part to restore\n\t\ttry {\n\t\t\tthis.restoreParts();\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\t\t}\n\n\t\t// Transition into restored phase after layout has restored\n\t\t// but do not wait indefinitely on this to account for slow\n\t\t// editors restoring. Since the workbench is fully functional\n\t\t// even when the visible editors have not resolved, we still\n\t\t// want contributions on the `Restored` phase to work before\n\t\t// slow editors have resolved. But we also do not want fast\n\t\t// editors to resolve slow when too many contributions get\n\t\t// instantiated, so we find a middle ground solution via\n\t\t// `Promise.race`\n\t\tthis.whenReady.finally(() =>\n\t\t\tPromise.race([\n\t\t\t\tthis.whenRestored,\n\t\t\t\ttimeout(2000)\n\t\t\t]).finally(() => {\n\n\t\t\t\t// Update perf marks only when the layout is fully\n\t\t\t\t// restored. We want the time it takes to restore\n\t\t\t\t// editors to be included in these numbers\n\n\t\t\t\tfunction markDidStartWorkbench() {\n\t\t\t\t\tmark('code/didStartWorkbench');\n\t\t\t\t\tperformance.measure('perf: workbench create & restore', 'code/didLoadWorkbenchMain', 'code/didStartWorkbench');\n\t\t\t\t}\n\n\t\t\t\tif (this.isRestored()) {\n\t\t\t\t\tmarkDidStartWorkbench();\n\t\t\t\t} else {\n\t\t\t\t\tthis.whenRestored.finally(() => markDidStartWorkbench());\n\t\t\t\t}\n\n\t\t\t\t// Set lifecycle phase to `Restored`\n\t\t\t\tlifecycleService.phase = LifecyclePhase.Restored;\n\n\t\t\t\t// Set lifecycle phase to `Eventually` after a short delay and when idle (min 2.5sec, max 5sec)\n\t\t\t\tconst eventuallyPhaseScheduler = this._register(new RunOnceScheduler(() => {\n\t\t\t\t\tthis._register(runWhenWindowIdle(mainWindow, () => lifecycleService.phase = LifecyclePhase.Eventually, 2500));\n\t\t\t\t}, 2500));\n\t\t\t\teventuallyPhaseScheduler.schedule();\n\t\t\t})\n\t\t);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './style.js';\nimport { runWhenWindowIdle } from '../../base/browser/dom.js';\nimport { Event, Emitter, setGlobalLeakWarningThreshold } from '../../base/common/event.js';\nimport { RunOnceScheduler, timeout } from '../../base/common/async.js';\nimport { isFirefox, isSafari, isChrome } from '../../base/browser/browser.js';\nimport { mark } from '../../base/common/performance.js';\nimport { onUnexpectedError, setUnexpectedErrorHandler } from '../../base/common/errors.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { isWindows, isLinux, isWeb, isNative, isMacintosh } from '../../base/common/platform.js';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from '../common/contributions.js';\nimport { IEditorFactoryRegistry, EditorExtensions } from '../common/editor.js';\nimport { getSingletonServiceDescriptors } from '../../platform/instantiation/common/extensions.js';\nimport { Position, Parts, IWorkbenchLayoutService, positionToString } from '../services/layout/browser/layoutService.js';\nimport { IStorageService, WillSaveStateReason, StorageScope, StorageTarget } from '../../platform/storage/common/storage.js';\nimport { IConfigurationChangeEvent, IConfigurationService } from '../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../platform/instantiation/common/serviceCollection.js';\nimport { LifecyclePhase, ILifecycleService, WillShutdownEvent } from '../services/lifecycle/common/lifecycle.js';\nimport { INotificationService } from '../../platform/notification/common/notification.js';\nimport { NotificationService } from '../services/notification/common/notificationService.js';\nimport { NotificationsCenter } from './parts/notifications/notificationsCenter.js';\nimport { NotificationsAlerts } from './parts/notifications/notificationsAlerts.js';\nimport { NotificationsStatus } from './parts/notifications/notificationsStatus.js';\nimport { registerNotificationCommands } from './parts/notifications/notificationsCommands.js';\nimport { NotificationsToasts } from './parts/notifications/notificationsToasts.js';\nimport { setARIAContainer } from '../../base/browser/ui/aria/aria.js';\nimport { FontMeasurements } from '../../editor/browser/config/fontMeasurements.js';\nimport { createBareFontInfoFromRawSettings } from '../../editor/common/config/fontInfoFromSettings.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nimport { toErrorMessage } from '../../base/common/errorMessage.js';\nimport { WorkbenchContextKeysHandler } from './contextkeys.js';\nimport { coalesce } from '../../base/common/arrays.js';\nimport { InstantiationService } from '../../platform/instantiation/common/instantiationService.js';\nimport { Layout } from './layout.js';\nimport { IHostService } from '../services/host/browser/host.js';\nimport { IDialogService } from '../../platform/dialogs/common/dialogs.js';\nimport { mainWindow } from '../../base/browser/window.js';\nimport { PixelRatio } from '../../base/browser/pixelRatio.js';\nimport { IHoverService, WorkbenchHoverDelegate } from '../../platform/hover/browser/hover.js';\nimport { setHoverDelegateFactory } from '../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { setBaseLayerHoverDelegate } from '../../base/browser/ui/hover/hoverDelegate2.js';\nimport { AccessibilityProgressSignalScheduler } from '../../platform/accessibilitySignal/browser/progressAccessibilitySignalScheduler.js';\nimport { setProgressAccessibilitySignalScheduler } from '../../base/browser/ui/progressbar/progressAccessibilitySignal.js';\nimport { AccessibleViewRegistry } from '../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { NotificationAccessibleView } from './parts/notifications/notificationAccessibleView.js';\nimport { IMarkdownRendererService } from '../../platform/markdown/browser/markdownRenderer.js';\nimport { EditorMarkdownCodeBlockRenderer } from '../../editor/browser/widget/markdownRenderer/browser/editorMarkdownCodeBlockRenderer.js';\n\nexport interface IWorkbenchOptions {\n\n\t/**\n\t * Extra classes to be added to the workbench container.\n\t */\n\textraClasses?: string[];\n\n\t/**\n\t * Whether to reset the workbench parts layout on startup.\n\t */\n\tresetLayout?: boolean;\n}\n\nexport class Workbench extends Layout {\n\n\tprivate readonly _onWillShutdown = this._register(new Emitter<WillShutdownEvent>());\n\treadonly onWillShutdown = this._onWillShutdown.event;\n\n\tprivate readonly _onDidShutdown = this._register(new Emitter<void>());\n\treadonly onDidShutdown = this._onDidShutdown.event;\n\n\tconstructor(\n\t\tparent: HTMLElement,\n\t\tprivate readonly options: IWorkbenchOptions | undefined,\n\t\tprivate readonly serviceCollection: ServiceCollection,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper(parent, { resetLayout: Boolean(options?.resetLayout) });\n\n\t\t// Perf: measure workbench startup time\n\t\tmark('code/willStartWorkbench');\n\n\t\tthis.registerErrorHandler(logService);\n\t}\n\n\tprivate registerErrorHandler(logService: ILogService): void {\n\n\t\t// Listen on unhandled rejection events\n\t\t// Note: intentionally not registered as disposable to handle\n\t\t//       errors that can occur during shutdown phase.\n\t\tmainWindow.addEventListener('unhandledrejection', (event) => {\n\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n\t\t\tonUnexpectedError(event.reason);\n\n\t\t\t// Prevent the printing of this event to the console\n\t\t\tevent.preventDefault();\n\t\t});\n\n\t\t// Install handler for unexpected errors\n\t\tsetUnexpectedErrorHandler(error => this.handleUnexpectedError(error, logService));\n\t}\n\n\tprivate previousUnexpectedError: { message: string | undefined; time: number } = { message: undefined, time: 0 };\n\tprivate handleUnexpectedError(error: unknown, logService: ILogService): void {\n\t\tconst message = toErrorMessage(error, true);\n\t\tif (!message) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst now = Date.now();\n\t\tif (message === this.previousUnexpectedError.message && now - this.previousUnexpectedError.time <= 1000) {\n\t\t\treturn; // Return if error message identical to previous and shorter than 1 second\n\t\t}\n\n\t\tthis.previousUnexpectedError.time = now;\n\t\tthis.previousUnexpectedError.message = message;\n\n\t\t// Log it\n\t\tlogService.error(message);\n\t}\n\n\tstartup(): IInstantiationService {\n\t\ttry {\n\n\t\t\t// Configure emitter leak warning threshold\n\t\t\tthis._register(setGlobalLeakWarningThreshold(175));\n\n\t\t\t// Services\n\t\t\tconst instantiationService = this.initServices(this.serviceCollection);\n\n\t\t\tinstantiationService.invokeFunction(accessor => {\n\t\t\t\tconst lifecycleService = accessor.get(ILifecycleService);\n\t\t\t\tconst storageService = accessor.get(IStorageService);\n\t\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\t\tconst hostService = accessor.get(IHostService);\n\t\t\t\tconst hoverService = accessor.get(IHoverService);\n\t\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\t\tconst notificationService = accessor.get(INotificationService) as NotificationService;\n\t\t\t\tconst markdownRendererService = accessor.get(IMarkdownRendererService);\n\n\t\t\t\t// Set code block renderer for markdown rendering\n\t\t\t\tmarkdownRendererService.setDefaultCodeBlockRenderer(instantiationService.createInstance(EditorMarkdownCodeBlockRenderer));\n\n\t\t\t\t// Default Hover Delegate must be registered before creating any workbench/layout components\n\t\t\t\t// as these possibly will use the default hover delegate\n\t\t\t\tsetHoverDelegateFactory((placement, enableInstantHover) => instantiationService.createInstance(WorkbenchHoverDelegate, placement, { instantHover: enableInstantHover }, {}));\n\t\t\t\tsetBaseLayerHoverDelegate(hoverService);\n\n\t\t\t\t// Layout\n\t\t\t\tthis.initLayout(accessor);\n\n\t\t\t\t// Registries\n\t\t\t\tRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).start(accessor);\n\t\t\t\tRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).start(accessor);\n\n\t\t\t\t// Context Keys\n\t\t\t\tthis._register(instantiationService.createInstance(WorkbenchContextKeysHandler));\n\n\t\t\t\t// Register Listeners\n\t\t\t\tthis.registerListeners(lifecycleService, storageService, configurationService, hostService, dialogService);\n\n\t\t\t\t// Render Workbench\n\t\t\t\tthis.renderWorkbench(instantiationService, notificationService, storageService, configurationService);\n\n\t\t\t\t// Workbench Layout\n\t\t\t\tthis.createWorkbenchLayout();\n\n\t\t\t\t// Layout\n\t\t\t\tthis.layout();\n\n\t\t\t\t// Restore\n\t\t\t\tthis.restore(lifecycleService);\n\t\t\t});\n\n\t\t\treturn instantiationService;\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\n\t\t\tthrow error; // rethrow because this is a critical issue we cannot handle properly here\n\t\t}\n\t}\n\n\tprivate initServices(serviceCollection: ServiceCollection): IInstantiationService {\n\n\t\t// Layout Service\n\t\tserviceCollection.set(IWorkbenchLayoutService, this);\n\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t//\n\t\t// NOTE: Please do NOT register services here. Use `registerSingleton()`\n\t\t//       from `workbench.common.main.ts` if the service is shared between\n\t\t//       desktop and web or `workbench.desktop.main.ts` if the service\n\t\t//       is desktop only.\n\t\t//\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\t\t// All Contributed Services\n\t\tconst contributedServices = getSingletonServiceDescriptors();\n\t\tfor (const [id, descriptor] of contributedServices) {\n\t\t\tserviceCollection.set(id, descriptor);\n\t\t}\n\n\t\tconst instantiationService = new InstantiationService(serviceCollection, true);\n\n\t\t// Wrap up\n\t\tinstantiationService.invokeFunction(accessor => {\n\t\t\tconst lifecycleService = accessor.get(ILifecycleService);\n\n\t\t\t// TODO@Sandeep debt around cyclic dependencies\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tif (configurationService && 'acquireInstantiationService' in configurationService) {\n\t\t\t\t(configurationService as { acquireInstantiationService: (instantiationService: unknown) => void }).acquireInstantiationService(instantiationService);\n\t\t\t}\n\n\t\t\t// Signal to lifecycle that services are set\n\t\t\tlifecycleService.phase = LifecyclePhase.Ready;\n\t\t});\n\n\t\treturn instantiationService;\n\t}\n\n\tprivate registerListeners(lifecycleService: ILifecycleService, storageService: IStorageService, configurationService: IConfigurationService, hostService: IHostService, dialogService: IDialogService): void {\n\n\t\t// Configuration changes\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => this.updateFontAliasing(e, configurationService)));\n\n\t\t// Font Info\n\t\tif (isNative) {\n\t\t\tthis._register(storageService.onWillSaveState(e => {\n\t\t\t\tif (e.reason === WillSaveStateReason.SHUTDOWN) {\n\t\t\t\t\tthis.storeFontInfo(storageService);\n\t\t\t\t}\n\t\t\t}));\n\t\t} else {\n\t\t\tthis._register(lifecycleService.onWillShutdown(() => this.storeFontInfo(storageService)));\n\t\t}\n\n\t\t// Lifecycle\n\t\tthis._register(lifecycleService.onWillShutdown(event => this._onWillShutdown.fire(event)));\n\t\tthis._register(lifecycleService.onDidShutdown(() => {\n\t\t\tthis._onDidShutdown.fire();\n\t\t\tthis.dispose();\n\t\t}));\n\n\t\t// In some environments we do not get enough time to persist state on shutdown.\n\t\t// In other cases, VSCode might crash, so we periodically save state to reduce\n\t\t// the chance of loosing any state.\n\t\t// The window loosing focus is a good indication that the user has stopped working\n\t\t// in that window so we pick that at a time to collect state.\n\t\tthis._register(hostService.onDidChangeFocus(focus => {\n\t\t\tif (!focus) {\n\t\t\t\tstorageService.flush();\n\t\t\t}\n\t\t}));\n\n\t\t// Dialogs showing/hiding\n\t\tthis._register(dialogService.onWillShowDialog(() => this.mainContainer.classList.add('modal-dialog-visible')));\n\t\tthis._register(dialogService.onDidShowDialog(() => this.mainContainer.classList.remove('modal-dialog-visible')));\n\t}\n\n\tprivate fontAliasing: 'default' | 'antialiased' | 'none' | 'auto' | undefined;\n\tprivate updateFontAliasing(e: IConfigurationChangeEvent | undefined, configurationService: IConfigurationService) {\n\t\tif (!isMacintosh) {\n\t\t\treturn; // macOS only\n\t\t}\n\n\t\tif (e && !e.affectsConfiguration('workbench.fontAliasing')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst aliasing = configurationService.getValue<'default' | 'antialiased' | 'none' | 'auto'>('workbench.fontAliasing');\n\t\tif (this.fontAliasing === aliasing) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fontAliasing = aliasing;\n\n\t\t// Remove all\n\t\tconst fontAliasingValues: (typeof aliasing)[] = ['antialiased', 'none', 'auto'];\n\t\tthis.mainContainer.classList.remove(...fontAliasingValues.map(value => `monaco-font-aliasing-${value}`));\n\n\t\t// Add specific\n\t\tif (fontAliasingValues.some(option => option === aliasing)) {\n\t\t\tthis.mainContainer.classList.add(`monaco-font-aliasing-${aliasing}`);\n\t\t}\n\t}\n\n\tprivate restoreFontInfo(storageService: IStorageService, configurationService: IConfigurationService): void {\n\t\tconst storedFontInfoRaw = storageService.get('editorFontInfo', StorageScope.APPLICATION);\n\t\tif (storedFontInfoRaw) {\n\t\t\ttry {\n\t\t\t\tconst storedFontInfo = JSON.parse(storedFontInfoRaw);\n\t\t\t\tif (Array.isArray(storedFontInfo)) {\n\t\t\t\t\tFontMeasurements.restoreFontInfo(mainWindow, storedFontInfo);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t/* ignore */\n\t\t\t}\n\t\t}\n\n\t\tFontMeasurements.readFontInfo(mainWindow, createBareFontInfoFromRawSettings(configurationService.getValue('editor'), PixelRatio.getInstance(mainWindow).value));\n\t}\n\n\tprivate storeFontInfo(storageService: IStorageService): void {\n\t\tconst serializedFontInfo = FontMeasurements.serializeFontInfo(mainWindow);\n\t\tif (serializedFontInfo) {\n\t\t\tstorageService.store('editorFontInfo', JSON.stringify(serializedFontInfo), StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t}\n\t}\n\n\tprivate renderWorkbench(instantiationService: IInstantiationService, notificationService: NotificationService, storageService: IStorageService, configurationService: IConfigurationService): void {\n\n\t\t// ARIA & Signals\n\t\tsetARIAContainer(this.mainContainer);\n\t\tsetProgressAccessibilitySignalScheduler((msDelayTime: number, msLoopTime?: number) => instantiationService.createInstance(AccessibilityProgressSignalScheduler, msDelayTime, msLoopTime));\n\n\t\t// State specific classes\n\t\tconst platformClass = isWindows ? 'windows' : isLinux ? 'linux' : 'mac';\n\t\tconst workbenchClasses = coalesce([\n\t\t\t'monaco-workbench',\n\t\t\tplatformClass,\n\t\t\tisWeb ? 'web' : undefined,\n\t\t\tisChrome ? 'chromium' : isFirefox ? 'firefox' : isSafari ? 'safari' : undefined,\n\t\t\t...this.getLayoutClasses(),\n\t\t\t...(this.options?.extraClasses ? this.options.extraClasses : [])\n\t\t]);\n\n\t\tthis.mainContainer.classList.add(...workbenchClasses);\n\n\t\t// Apply font aliasing\n\t\tthis.updateFontAliasing(undefined, configurationService);\n\n\t\t// Warm up font cache information before building up too many dom elements\n\t\tthis.restoreFontInfo(storageService, configurationService);\n\n\t\t// Create Parts\n\t\tfor (const { id, role, classes, options } of [\n\t\t\t{ id: Parts.TITLEBAR_PART, role: 'none', classes: ['titlebar'] },\n\t\t\t{ id: Parts.BANNER_PART, role: 'banner', classes: ['banner'] },\n\t\t\t{ id: Parts.ACTIVITYBAR_PART, role: 'none', classes: ['activitybar', this.getSideBarPosition() === Position.LEFT ? 'left' : 'right'] }, // Use role 'none' for some parts to make screen readers less chatty #114892\n\t\t\t{ id: Parts.SIDEBAR_PART, role: 'none', classes: ['sidebar', this.getSideBarPosition() === Position.LEFT ? 'left' : 'right'] },\n\t\t\t{ id: Parts.EDITOR_PART, role: 'main', classes: ['editor'], options: { restorePreviousState: this.willRestoreEditors() } },\n\t\t\t{ id: Parts.PANEL_PART, role: 'none', classes: ['panel', 'basepanel', positionToString(this.getPanelPosition())] },\n\t\t\t{ id: Parts.AUXILIARYBAR_PART, role: 'none', classes: ['auxiliarybar', 'basepanel', this.getSideBarPosition() === Position.LEFT ? 'right' : 'left'] },\n\t\t\t{ id: Parts.STATUSBAR_PART, role: 'status', classes: ['statusbar'] }\n\t\t]) {\n\t\t\tconst partContainer = this.createPart(id, role, classes);\n\n\t\t\tmark(`code/willCreatePart/${id}`);\n\t\t\tthis.getPart(id).create(partContainer, options);\n\t\t\tmark(`code/didCreatePart/${id}`);\n\t\t}\n\n\t\t// Notification Handlers\n\t\tthis.createNotificationsHandlers(instantiationService, notificationService);\n\n\t\t// Add Workbench to DOM\n\t\tthis.parent.appendChild(this.mainContainer);\n\t}\n\n\tprivate createPart(id: string, role: string, classes: string[]): HTMLElement {\n\t\tconst part = document.createElement(role === 'status' ? 'footer' /* Use footer element for status bar #98376 */ : 'div');\n\t\tpart.classList.add('part', ...classes);\n\t\tpart.id = id;\n\t\tpart.setAttribute('role', role);\n\t\tif (role === 'status') {\n\t\t\tpart.setAttribute('aria-live', 'off');\n\t\t}\n\n\t\treturn part;\n\t}\n\n\tprivate createNotificationsHandlers(instantiationService: IInstantiationService, notificationService: NotificationService): void {\n\n\t\t// Instantiate Notification components\n\t\tconst notificationsCenter = this._register(instantiationService.createInstance(NotificationsCenter, this.mainContainer, notificationService.model));\n\t\tconst notificationsToasts = this._register(instantiationService.createInstance(NotificationsToasts, this.mainContainer, notificationService.model));\n\t\tthis._register(instantiationService.createInstance(NotificationsAlerts, notificationService.model));\n\t\tconst notificationsStatus = instantiationService.createInstance(NotificationsStatus, notificationService.model);\n\n\t\t// Visibility\n\t\tthis._register(notificationsCenter.onDidChangeVisibility(() => {\n\t\t\tnotificationsStatus.update(notificationsCenter.isVisible, notificationsToasts.isVisible);\n\t\t\tnotificationsToasts.update(notificationsCenter.isVisible);\n\t\t}));\n\n\t\tthis._register(notificationsToasts.onDidChangeVisibility(() => {\n\t\t\tnotificationsStatus.update(notificationsCenter.isVisible, notificationsToasts.isVisible);\n\t\t}));\n\n\t\t// Register Commands\n\t\tregisterNotificationCommands(notificationsCenter, notificationsToasts, notificationService.model);\n\n\t\t// Register notification accessible view\n\t\tAccessibleViewRegistry.register(new NotificationAccessibleView());\n\n\t\t// Register with Layout\n\t\tthis.registerNotifications({\n\t\t\tonDidChangeNotificationsVisibility: Event.map(Event.any(notificationsToasts.onDidChangeVisibility, notificationsCenter.onDidChangeVisibility), () => notificationsToasts.isVisible || notificationsCenter.isVisible)\n\t\t});\n\t}\n\n\tprivate restore(lifecycleService: ILifecycleService): void {\n\n\t\t// Ask each part to restore\n\t\ttry {\n\t\t\tthis.restoreParts();\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\t\t}\n\n\t\t// Transition into restored phase after layout has restored\n\t\t// but do not wait indefinitely on this to account for slow\n\t\t// editors restoring. Since the workbench is fully functional\n\t\t// even when the visible editors have not resolved, we still\n\t\t// want contributions on the `Restored` phase to work before\n\t\t// slow editors have resolved. But we also do not want fast\n\t\t// editors to resolve slow when too many contributions get\n\t\t// instantiated, so we find a middle ground solution via\n\t\t// `Promise.race`\n\t\tthis.whenReady.finally(() =>\n\t\t\tPromise.race([\n\t\t\t\tthis.whenRestored,\n\t\t\t\ttimeout(2000)\n\t\t\t]).finally(() => {\n\n\t\t\t\t// Update perf marks only when the layout is fully\n\t\t\t\t// restored. We want the time it takes to restore\n\t\t\t\t// editors to be included in these numbers\n\n\t\t\t\tfunction markDidStartWorkbench() {\n\t\t\t\t\tmark('code/didStartWorkbench');\n\t\t\t\t\tperformance.measure('perf: workbench create & restore', 'code/didLoadWorkbenchMain', 'code/didStartWorkbench');\n\t\t\t\t}\n\n\t\t\t\tif (this.isRestored()) {\n\t\t\t\t\tmarkDidStartWorkbench();\n\t\t\t\t} else {\n\t\t\t\t\tthis.whenRestored.finally(() => markDidStartWorkbench());\n\t\t\t\t}\n\n\t\t\t\t// Set lifecycle phase to `Restored`\n\t\t\t\tlifecycleService.phase = LifecyclePhase.Restored;\n\n\t\t\t\t// Set lifecycle phase to `Eventually` after a short delay and when idle (min 2.5sec, max 5sec)\n\t\t\t\tconst eventuallyPhaseScheduler = this._register(new RunOnceScheduler(() => {\n\t\t\t\t\tthis._register(runWhenWindowIdle(mainWindow, () => lifecycleService.phase = LifecyclePhase.Eventually, 2500));\n\t\t\t\t}, 2500));\n\t\t\t\teventuallyPhaseScheduler.schedule();\n\t\t\t})\n\t\t);\n\t}\n}\n"]}