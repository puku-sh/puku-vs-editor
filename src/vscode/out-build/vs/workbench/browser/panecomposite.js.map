{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/browser/panecomposite.ts","vs/workbench/browser/panecomposite.ts"],"names":[],"mappings":"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","file":"panecomposite.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { Composite, CompositeDescriptor, CompositeRegistry } from './composite.js';\nimport { IConstructorSignature, BrandedService, IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../base/common/uri.js';\nimport { Dimension } from '../../base/browser/dom.js';\nimport { IActionViewItem } from '../../base/browser/ui/actionbar/actionbar.js';\nimport { IAction, Separator } from '../../base/common/actions.js';\nimport { MenuId, SubmenuItemAction } from '../../platform/actions/common/actions.js';\nimport { IContextMenuService } from '../../platform/contextview/browser/contextView.js';\nimport { IStorageService } from '../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../platform/theme/common/themeService.js';\nimport { IWorkspaceContextService } from '../../platform/workspace/common/workspace.js';\nimport { ViewPaneContainer, ViewsSubMenu } from './parts/views/viewPaneContainer.js';\nimport { IPaneComposite } from '../common/panecomposite.js';\nimport { IView } from '../common/views.js';\nimport { IExtensionService } from '../services/extensions/common/extensions.js';\nimport { VIEWPANE_FILTER_ACTION } from './parts/views/viewPane.js';\nimport { IBoundarySashes } from '../../base/browser/ui/sash/sash.js';\nimport { IBaseActionViewItemOptions } from '../../base/browser/ui/actionbar/actionViewItems.js';\n\nexport abstract class PaneComposite<MementoType extends object = object> extends Composite<MementoType> implements IPaneComposite {\n\n\tprivate viewPaneContainer?: ViewPaneContainer;\n\n\tconstructor(\n\t\tid: string,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService protected storageService: IStorageService,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextMenuService protected contextMenuService: IContextMenuService,\n\t\t@IExtensionService protected extensionService: IExtensionService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService\n\t) {\n\t\tsuper(id, telemetryService, themeService, storageService);\n\t}\n\n\toverride create(parent: HTMLElement): void {\n\t\tsuper.create(parent);\n\t\tthis.viewPaneContainer = this._register(this.createViewPaneContainer(parent));\n\t\tthis._register(this.viewPaneContainer.onTitleAreaUpdate(() => this.updateTitleArea()));\n\t\tthis.viewPaneContainer.create(parent);\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tsuper.setVisible(visible);\n\t\tthis.viewPaneContainer?.setVisible(visible);\n\t}\n\n\tlayout(dimension: Dimension): void {\n\t\tthis.viewPaneContainer?.layout(dimension);\n\t}\n\n\tsetBoundarySashes(sashes: IBoundarySashes): void {\n\t\tthis.viewPaneContainer?.setBoundarySashes(sashes);\n\t}\n\n\tgetOptimalWidth(): number {\n\t\treturn this.viewPaneContainer?.getOptimalWidth() ?? 0;\n\t}\n\n\topenView<T extends IView>(id: string, focus?: boolean): T | undefined {\n\t\treturn this.viewPaneContainer?.openView(id, focus) as T;\n\t}\n\n\tgetViewPaneContainer(): ViewPaneContainer | undefined {\n\t\treturn this.viewPaneContainer;\n\t}\n\n\toverride getActionsContext(): unknown {\n\t\treturn this.getViewPaneContainer()?.getActionsContext();\n\t}\n\n\toverride getContextMenuActions(): readonly IAction[] {\n\t\treturn this.viewPaneContainer?.menuActions?.getContextMenuActions() ?? [];\n\t}\n\n\toverride getMenuIds(): MenuId[] {\n\t\tconst result: MenuId[] = [];\n\t\tif (this.viewPaneContainer?.menuActions) {\n\t\t\tresult.push(this.viewPaneContainer.menuActions.menuId);\n\t\t\tif (this.viewPaneContainer.isViewMergedWithContainer()) {\n\t\t\t\tresult.push(this.viewPaneContainer.panes[0].menuActions.menuId);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\toverride getActions(): readonly IAction[] {\n\t\tconst result = [];\n\t\tif (this.viewPaneContainer?.menuActions) {\n\t\t\tresult.push(...this.viewPaneContainer.menuActions.getPrimaryActions());\n\t\t\tif (this.viewPaneContainer.isViewMergedWithContainer()) {\n\t\t\t\tconst viewPane = this.viewPaneContainer.panes[0];\n\t\t\t\tif (viewPane.shouldShowFilterInHeader()) {\n\t\t\t\t\tresult.push(VIEWPANE_FILTER_ACTION);\n\t\t\t\t}\n\t\t\t\tresult.push(...viewPane.menuActions.getPrimaryActions());\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\toverride getSecondaryActions(): readonly IAction[] {\n\t\tif (!this.viewPaneContainer?.menuActions) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst viewPaneActions = this.viewPaneContainer.isViewMergedWithContainer() ? this.viewPaneContainer.panes[0].menuActions.getSecondaryActions() : [];\n\t\tlet menuActions = this.viewPaneContainer.menuActions.getSecondaryActions();\n\n\t\tconst viewsSubmenuActionIndex = menuActions.findIndex(action => action instanceof SubmenuItemAction && action.item.submenu === ViewsSubMenu);\n\t\tif (viewsSubmenuActionIndex !== -1) {\n\t\t\tconst viewsSubmenuAction = <SubmenuItemAction>menuActions[viewsSubmenuActionIndex];\n\t\t\tif (viewsSubmenuAction.actions.some(({ enabled }) => enabled)) {\n\t\t\t\tif (menuActions.length === 1 && viewPaneActions.length === 0) {\n\t\t\t\t\tmenuActions = viewsSubmenuAction.actions.slice();\n\t\t\t\t} else if (viewsSubmenuActionIndex !== 0) {\n\t\t\t\t\tmenuActions = [viewsSubmenuAction, ...menuActions.slice(0, viewsSubmenuActionIndex), ...menuActions.slice(viewsSubmenuActionIndex + 1)];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove views submenu if none of the actions are enabled\n\t\t\t\tmenuActions.splice(viewsSubmenuActionIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (menuActions.length && viewPaneActions.length) {\n\t\t\treturn [\n\t\t\t\t...menuActions,\n\t\t\t\tnew Separator(),\n\t\t\t\t...viewPaneActions\n\t\t\t];\n\t\t}\n\n\t\treturn menuActions.length ? menuActions : viewPaneActions;\n\t}\n\n\toverride getActionViewItem(action: IAction, options: IBaseActionViewItemOptions): IActionViewItem | undefined {\n\t\treturn this.viewPaneContainer?.getActionViewItem(action, options);\n\t}\n\n\toverride getTitle(): string {\n\t\treturn this.viewPaneContainer?.getTitle() ?? '';\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.viewPaneContainer?.focus();\n\t}\n\n\tprotected abstract createViewPaneContainer(parent: HTMLElement): ViewPaneContainer;\n}\n\n\n/**\n * A Pane Composite descriptor is a lightweight descriptor of a Pane Composite in the workbench.\n */\nexport class PaneCompositeDescriptor extends CompositeDescriptor<PaneComposite> {\n\n\tstatic create<Services extends BrandedService[]>(\n\t\tctor: { new(...services: Services): PaneComposite },\n\t\tid: string,\n\t\tname: string,\n\t\tcssClass?: string,\n\t\torder?: number,\n\t\trequestedIndex?: number,\n\t\ticonUrl?: URI\n\t): PaneCompositeDescriptor {\n\n\t\treturn new PaneCompositeDescriptor(ctor as IConstructorSignature<PaneComposite>, id, name, cssClass, order, requestedIndex, iconUrl);\n\t}\n\n\tprivate constructor(\n\t\tctor: IConstructorSignature<PaneComposite>,\n\t\tid: string,\n\t\tname: string,\n\t\tcssClass?: string,\n\t\torder?: number,\n\t\trequestedIndex?: number,\n\t\treadonly iconUrl?: URI\n\t) {\n\t\tsuper(ctor, id, name, cssClass, order, requestedIndex);\n\t}\n}\n\nexport const Extensions = {\n\tViewlets: 'workbench.contributions.viewlets',\n\tPanels: 'workbench.contributions.panels',\n\tAuxiliary: 'workbench.contributions.auxiliary',\n};\n\nexport class PaneCompositeRegistry extends CompositeRegistry<PaneComposite> {\n\n\t/**\n\t * Registers a viewlet to the platform.\n\t */\n\tregisterPaneComposite(descriptor: PaneCompositeDescriptor): void {\n\t\tsuper.registerComposite(descriptor);\n\t}\n\n\t/**\n\t * Deregisters a viewlet to the platform.\n\t */\n\tderegisterPaneComposite(id: string): void {\n\t\tsuper.deregisterComposite(id);\n\t}\n\n\t/**\n\t * Returns the viewlet descriptor for the given id or null if none.\n\t */\n\tgetPaneComposite(id: string): PaneCompositeDescriptor {\n\t\treturn this.getComposite(id) as PaneCompositeDescriptor;\n\t}\n\n\t/**\n\t * Returns an array of registered viewlets known to the platform.\n\t */\n\tgetPaneComposites(): PaneCompositeDescriptor[] {\n\t\treturn this.getComposites() as PaneCompositeDescriptor[];\n\t}\n}\n\nRegistry.add(Extensions.Viewlets, new PaneCompositeRegistry());\nRegistry.add(Extensions.Panels, new PaneCompositeRegistry());\nRegistry.add(Extensions.Auxiliary, new PaneCompositeRegistry());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { Composite, CompositeDescriptor, CompositeRegistry } from './composite.js';\nimport { IConstructorSignature, BrandedService, IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../base/common/uri.js';\nimport { Dimension } from '../../base/browser/dom.js';\nimport { IActionViewItem } from '../../base/browser/ui/actionbar/actionbar.js';\nimport { IAction, Separator } from '../../base/common/actions.js';\nimport { MenuId, SubmenuItemAction } from '../../platform/actions/common/actions.js';\nimport { IContextMenuService } from '../../platform/contextview/browser/contextView.js';\nimport { IStorageService } from '../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../platform/theme/common/themeService.js';\nimport { IWorkspaceContextService } from '../../platform/workspace/common/workspace.js';\nimport { ViewPaneContainer, ViewsSubMenu } from './parts/views/viewPaneContainer.js';\nimport { IPaneComposite } from '../common/panecomposite.js';\nimport { IView } from '../common/views.js';\nimport { IExtensionService } from '../services/extensions/common/extensions.js';\nimport { VIEWPANE_FILTER_ACTION } from './parts/views/viewPane.js';\nimport { IBoundarySashes } from '../../base/browser/ui/sash/sash.js';\nimport { IBaseActionViewItemOptions } from '../../base/browser/ui/actionbar/actionViewItems.js';\n\nexport abstract class PaneComposite<MementoType extends object = object> extends Composite<MementoType> implements IPaneComposite {\n\n\tprivate viewPaneContainer?: ViewPaneContainer;\n\n\tconstructor(\n\t\tid: string,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService protected storageService: IStorageService,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextMenuService protected contextMenuService: IContextMenuService,\n\t\t@IExtensionService protected extensionService: IExtensionService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService\n\t) {\n\t\tsuper(id, telemetryService, themeService, storageService);\n\t}\n\n\toverride create(parent: HTMLElement): void {\n\t\tsuper.create(parent);\n\t\tthis.viewPaneContainer = this._register(this.createViewPaneContainer(parent));\n\t\tthis._register(this.viewPaneContainer.onTitleAreaUpdate(() => this.updateTitleArea()));\n\t\tthis.viewPaneContainer.create(parent);\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tsuper.setVisible(visible);\n\t\tthis.viewPaneContainer?.setVisible(visible);\n\t}\n\n\tlayout(dimension: Dimension): void {\n\t\tthis.viewPaneContainer?.layout(dimension);\n\t}\n\n\tsetBoundarySashes(sashes: IBoundarySashes): void {\n\t\tthis.viewPaneContainer?.setBoundarySashes(sashes);\n\t}\n\n\tgetOptimalWidth(): number {\n\t\treturn this.viewPaneContainer?.getOptimalWidth() ?? 0;\n\t}\n\n\topenView<T extends IView>(id: string, focus?: boolean): T | undefined {\n\t\treturn this.viewPaneContainer?.openView(id, focus) as T;\n\t}\n\n\tgetViewPaneContainer(): ViewPaneContainer | undefined {\n\t\treturn this.viewPaneContainer;\n\t}\n\n\toverride getActionsContext(): unknown {\n\t\treturn this.getViewPaneContainer()?.getActionsContext();\n\t}\n\n\toverride getContextMenuActions(): readonly IAction[] {\n\t\treturn this.viewPaneContainer?.menuActions?.getContextMenuActions() ?? [];\n\t}\n\n\toverride getMenuIds(): MenuId[] {\n\t\tconst result: MenuId[] = [];\n\t\tif (this.viewPaneContainer?.menuActions) {\n\t\t\tresult.push(this.viewPaneContainer.menuActions.menuId);\n\t\t\tif (this.viewPaneContainer.isViewMergedWithContainer()) {\n\t\t\t\tresult.push(this.viewPaneContainer.panes[0].menuActions.menuId);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\toverride getActions(): readonly IAction[] {\n\t\tconst result = [];\n\t\tif (this.viewPaneContainer?.menuActions) {\n\t\t\tresult.push(...this.viewPaneContainer.menuActions.getPrimaryActions());\n\t\t\tif (this.viewPaneContainer.isViewMergedWithContainer()) {\n\t\t\t\tconst viewPane = this.viewPaneContainer.panes[0];\n\t\t\t\tif (viewPane.shouldShowFilterInHeader()) {\n\t\t\t\t\tresult.push(VIEWPANE_FILTER_ACTION);\n\t\t\t\t}\n\t\t\t\tresult.push(...viewPane.menuActions.getPrimaryActions());\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\toverride getSecondaryActions(): readonly IAction[] {\n\t\tif (!this.viewPaneContainer?.menuActions) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst viewPaneActions = this.viewPaneContainer.isViewMergedWithContainer() ? this.viewPaneContainer.panes[0].menuActions.getSecondaryActions() : [];\n\t\tlet menuActions = this.viewPaneContainer.menuActions.getSecondaryActions();\n\n\t\tconst viewsSubmenuActionIndex = menuActions.findIndex(action => action instanceof SubmenuItemAction && action.item.submenu === ViewsSubMenu);\n\t\tif (viewsSubmenuActionIndex !== -1) {\n\t\t\tconst viewsSubmenuAction = <SubmenuItemAction>menuActions[viewsSubmenuActionIndex];\n\t\t\tif (viewsSubmenuAction.actions.some(({ enabled }) => enabled)) {\n\t\t\t\tif (menuActions.length === 1 && viewPaneActions.length === 0) {\n\t\t\t\t\tmenuActions = viewsSubmenuAction.actions.slice();\n\t\t\t\t} else if (viewsSubmenuActionIndex !== 0) {\n\t\t\t\t\tmenuActions = [viewsSubmenuAction, ...menuActions.slice(0, viewsSubmenuActionIndex), ...menuActions.slice(viewsSubmenuActionIndex + 1)];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Remove views submenu if none of the actions are enabled\n\t\t\t\tmenuActions.splice(viewsSubmenuActionIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (menuActions.length && viewPaneActions.length) {\n\t\t\treturn [\n\t\t\t\t...menuActions,\n\t\t\t\tnew Separator(),\n\t\t\t\t...viewPaneActions\n\t\t\t];\n\t\t}\n\n\t\treturn menuActions.length ? menuActions : viewPaneActions;\n\t}\n\n\toverride getActionViewItem(action: IAction, options: IBaseActionViewItemOptions): IActionViewItem | undefined {\n\t\treturn this.viewPaneContainer?.getActionViewItem(action, options);\n\t}\n\n\toverride getTitle(): string {\n\t\treturn this.viewPaneContainer?.getTitle() ?? '';\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.viewPaneContainer?.focus();\n\t}\n\n\tprotected abstract createViewPaneContainer(parent: HTMLElement): ViewPaneContainer;\n}\n\n\n/**\n * A Pane Composite descriptor is a lightweight descriptor of a Pane Composite in the workbench.\n */\nexport class PaneCompositeDescriptor extends CompositeDescriptor<PaneComposite> {\n\n\tstatic create<Services extends BrandedService[]>(\n\t\tctor: { new(...services: Services): PaneComposite },\n\t\tid: string,\n\t\tname: string,\n\t\tcssClass?: string,\n\t\torder?: number,\n\t\trequestedIndex?: number,\n\t\ticonUrl?: URI\n\t): PaneCompositeDescriptor {\n\n\t\treturn new PaneCompositeDescriptor(ctor as IConstructorSignature<PaneComposite>, id, name, cssClass, order, requestedIndex, iconUrl);\n\t}\n\n\tprivate constructor(\n\t\tctor: IConstructorSignature<PaneComposite>,\n\t\tid: string,\n\t\tname: string,\n\t\tcssClass?: string,\n\t\torder?: number,\n\t\trequestedIndex?: number,\n\t\treadonly iconUrl?: URI\n\t) {\n\t\tsuper(ctor, id, name, cssClass, order, requestedIndex);\n\t}\n}\n\nexport const Extensions = {\n\tViewlets: 'workbench.contributions.viewlets',\n\tPanels: 'workbench.contributions.panels',\n\tAuxiliary: 'workbench.contributions.auxiliary',\n};\n\nexport class PaneCompositeRegistry extends CompositeRegistry<PaneComposite> {\n\n\t/**\n\t * Registers a viewlet to the platform.\n\t */\n\tregisterPaneComposite(descriptor: PaneCompositeDescriptor): void {\n\t\tsuper.registerComposite(descriptor);\n\t}\n\n\t/**\n\t * Deregisters a viewlet to the platform.\n\t */\n\tderegisterPaneComposite(id: string): void {\n\t\tsuper.deregisterComposite(id);\n\t}\n\n\t/**\n\t * Returns the viewlet descriptor for the given id or null if none.\n\t */\n\tgetPaneComposite(id: string): PaneCompositeDescriptor {\n\t\treturn this.getComposite(id) as PaneCompositeDescriptor;\n\t}\n\n\t/**\n\t * Returns an array of registered viewlets known to the platform.\n\t */\n\tgetPaneComposites(): PaneCompositeDescriptor[] {\n\t\treturn this.getComposites() as PaneCompositeDescriptor[];\n\t}\n}\n\nRegistry.add(Extensions.Viewlets, new PaneCompositeRegistry());\nRegistry.add(Extensions.Panels, new PaneCompositeRegistry());\nRegistry.add(Extensions.Auxiliary, new PaneCompositeRegistry());\n"]}