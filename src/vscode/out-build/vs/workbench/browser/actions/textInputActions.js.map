{"version":3,"sources":["vs/workbench/browser/actions/textInputActions.ts"],"names":[],"mappings":"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","file":"textInputActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction, Separator, toAction } from '../../../base/common/actions.js';\nimport { localize } from '../../../nls.js';\nimport { IWorkbenchLayoutService } from '../../services/layout/browser/layoutService.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { EventHelper, addDisposableListener, getActiveDocument, getWindow, isHTMLInputElement, isHTMLTextAreaElement } from '../../../base/browser/dom.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../common/contributions.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\nimport { Event as BaseEvent } from '../../../base/common/event.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\n\nexport function createTextInputActions(clipboardService: IClipboardService, logService: ILogService): IAction[] {\n\treturn [\n\n\t\ttoAction({ id: 'undo', label: localize('undo', \"Undo\"), run: () => getActiveDocument().execCommand('undo') }),\n\t\ttoAction({ id: 'redo', label: localize('redo', \"Redo\"), run: () => getActiveDocument().execCommand('redo') }),\n\t\tnew Separator(),\n\t\ttoAction({\n\t\t\tid: 'editor.action.clipboardCutAction', label: localize('cut', \"Cut\"), run: () => {\n\t\t\t\tlogService.trace('TextInputActionsProvider#cut');\n\t\t\t\tgetActiveDocument().execCommand('cut');\n\t\t\t}\n\t\t}),\n\t\ttoAction({\n\t\t\tid: 'editor.action.clipboardCopyAction', label: localize('copy', \"Copy\"), run: () => {\n\t\t\t\tlogService.trace('TextInputActionsProvider#copy');\n\t\t\t\tgetActiveDocument().execCommand('copy');\n\t\t\t}\n\t\t}),\n\t\ttoAction({\n\t\t\tid: 'editor.action.clipboardPasteAction',\n\t\t\tlabel: localize('paste', \"Paste\"),\n\t\t\trun: async (element: unknown) => {\n\t\t\t\tlogService.trace('TextInputActionsProvider#paste');\n\t\t\t\tconst clipboardText = await clipboardService.readText();\n\t\t\t\tif (isHTMLTextAreaElement(element) || isHTMLInputElement(element)) {\n\t\t\t\t\tconst selectionStart = element.selectionStart || 0;\n\t\t\t\t\tconst selectionEnd = element.selectionEnd || 0;\n\n\t\t\t\t\telement.value = `${element.value.substring(0, selectionStart)}${clipboardText}${element.value.substring(selectionEnd, element.value.length)}`;\n\t\t\t\t\telement.selectionStart = selectionStart + clipboardText.length;\n\t\t\t\t\telement.selectionEnd = element.selectionStart;\n\t\t\t\t\telement.dispatchEvent(new Event('input', { bubbles: true, cancelable: true }));\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\tnew Separator(),\n\t\ttoAction({ id: 'editor.action.selectAll', label: localize('selectAll', \"Select All\"), run: () => getActiveDocument().execCommand('selectAll') })\n\t];\n}\n\nexport class TextInputActionsProvider extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.textInputActionsProvider';\n\n\tprivate readonly textInputActions = new Lazy<IAction[]>(() => createTextInputActions(this.clipboardService, this.logService));\n\n\tconstructor(\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IClipboardService private readonly clipboardService: IClipboardService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Context menu support in input/textarea\n\t\tthis._register(BaseEvent.runAndSubscribe(this.layoutService.onDidAddContainer, ({ container, disposables }) => {\n\t\t\tdisposables.add(addDisposableListener(container, 'contextmenu', e => this.onContextMenu(getWindow(container), e)));\n\t\t}, { container: this.layoutService.mainContainer, disposables: this._store }));\n\t}\n\n\tprivate onContextMenu(targetWindow: Window, e: MouseEvent): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn; // make sure to not show these actions by accident if component indicated to prevent\n\t\t}\n\n\t\tconst target = e.target;\n\t\tif (!isHTMLTextAreaElement(target) && !isHTMLInputElement(target)) {\n\t\t\treturn; // only for inputs or textareas\n\t\t}\n\n\t\tEventHelper.stop(e, true);\n\n\t\tconst event = new StandardMouseEvent(targetWindow, e);\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => event,\n\t\t\tgetActions: () => this.textInputActions.value,\n\t\t\tgetActionsContext: () => target,\n\t\t});\n\t}\n}\n\nregisterWorkbenchContribution2(\n\tTextInputActionsProvider.ID,\n\tTextInputActionsProvider,\n\tWorkbenchPhase.BlockRestore // Block to allow right-click into input fields before restore finished\n);\n"]}