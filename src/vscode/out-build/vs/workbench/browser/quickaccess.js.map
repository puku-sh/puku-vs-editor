{"version":3,"sources":["vs/workbench/browser/quickaccess.ts"],"names":[],"mappings":"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","file":"quickaccess.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../base/common/lifecycle.js';\nimport { getIEditor } from '../../editor/browser/editorBrowser.js';\nimport { ICodeEditorViewState, IDiffEditorViewState } from '../../editor/common/editorCommon.js';\nimport { localize } from '../../nls.js';\nimport { ICommandHandler } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, RawContextKey } from '../../platform/contextkey/common/contextkey.js';\nimport { IResourceEditorInput, ITextResourceEditorInput } from '../../platform/editor/common/editor.js';\nimport { IKeybindingService } from '../../platform/keybinding/common/keybinding.js';\nimport { IQuickInputService } from '../../platform/quickinput/common/quickInput.js';\nimport { IEditorPane, IUntitledTextResourceEditorInput, IUntypedEditorInput } from '../common/editor.js';\nimport { EditorInput } from '../common/editor/editorInput.js';\nimport { IEditorGroup, IEditorGroupsService } from '../services/editor/common/editorGroupsService.js';\nimport { PreferredGroup, IEditorService } from '../services/editor/common/editorService.js';\n\nexport const inQuickPickContextKeyValue = 'inQuickOpen';\nexport const InQuickPickContextKey = new RawContextKey<boolean>(inQuickPickContextKeyValue, false, localize('inQuickOpen', \"Whether keyboard focus is inside the quick open control\"));\nexport const inQuickPickContext = ContextKeyExpr.has(inQuickPickContextKeyValue);\n\nexport const defaultQuickAccessContextKeyValue = 'inFilesPicker';\nexport const defaultQuickAccessContext = ContextKeyExpr.and(inQuickPickContext, ContextKeyExpr.has(defaultQuickAccessContextKeyValue));\n\nexport interface IWorkbenchQuickAccessConfiguration {\n\treadonly workbench: {\n\t\treadonly commandPalette: {\n\t\t\treadonly history: number;\n\t\t\treadonly preserveInput: boolean;\n\t\t\treadonly showAskInChat: boolean;\n\t\t\treadonly experimental: {\n\t\t\t\treadonly suggestCommands: boolean;\n\t\t\t\treadonly enableNaturalLanguageSearch: boolean;\n\t\t\t\treadonly askChatLocation: 'quickChat' | 'chatView';\n\t\t\t};\n\t\t};\n\t\treadonly quickOpen: {\n\t\t\treadonly enableExperimentalNewVersion: boolean;\n\t\t\treadonly preserveInput: boolean;\n\t\t};\n\t};\n}\n\nexport function getQuickNavigateHandler(id: string, next?: boolean): ICommandHandler {\n\treturn accessor => {\n\t\tconst keybindingService = accessor.get(IKeybindingService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\n\t\tconst keys = keybindingService.lookupKeybindings(id);\n\t\tconst quickNavigate = { keybindings: keys };\n\n\t\tquickInputService.navigate(!!next, quickNavigate);\n\t};\n}\n\nexport class PickerEditorState extends Disposable {\n\tprivate _editorViewState: {\n\t\teditor: EditorInput;\n\t\tgroup: IEditorGroup;\n\t\tstate: ICodeEditorViewState | IDiffEditorViewState | undefined;\n\t} | undefined = undefined;\n\n\tprivate readonly openedTransientEditors = new Set<EditorInput>(); // editors that were opened between set and restore\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly editorGroupsService: IEditorGroupsService\n\t) {\n\t\tsuper();\n\t}\n\n\tset(): void {\n\t\tif (this._editorViewState) {\n\t\t\treturn; // return early if already done\n\t\t}\n\n\t\tconst activeEditorPane = this.editorService.activeEditorPane;\n\t\tif (activeEditorPane) {\n\t\t\tthis._editorViewState = {\n\t\t\t\tgroup: activeEditorPane.group,\n\t\t\t\teditor: activeEditorPane.input,\n\t\t\t\tstate: getIEditor(activeEditorPane.getControl())?.saveViewState() ?? undefined,\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Open a transient editor such that it may be closed when the state is restored.\n\t * Note that, when the state is restored, if the editor is no longer transient, it will not be closed.\n\t */\n\tasync openTransientEditor(editor: IResourceEditorInput | ITextResourceEditorInput | IUntitledTextResourceEditorInput | IUntypedEditorInput, group?: PreferredGroup): Promise<IEditorPane | undefined> {\n\t\teditor.options = { ...editor.options, transient: true };\n\n\t\tconst editorPane = await this.editorService.openEditor(editor, group);\n\t\tif (editorPane?.input && editorPane.input !== this._editorViewState?.editor && editorPane.group.isTransient(editorPane.input)) {\n\t\t\tthis.openedTransientEditors.add(editorPane.input);\n\t\t}\n\n\t\treturn editorPane;\n\t}\n\n\tasync restore(): Promise<void> {\n\t\tif (this._editorViewState) {\n\t\t\tfor (const editor of this.openedTransientEditors) {\n\t\t\t\tif (editor.isDirty()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (const group of this.editorGroupsService.groups) {\n\t\t\t\t\tif (group.isTransient(editor)) {\n\t\t\t\t\t\tawait group.closeEditor(editor, { preserveFocus: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._editorViewState.group.openEditor(this._editorViewState.editor, {\n\t\t\t\tviewState: this._editorViewState.state,\n\t\t\t\tpreserveFocus: true // important to not close the picker as a result\n\t\t\t});\n\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\treset() {\n\t\tthis._editorViewState = undefined;\n\t\tthis.openedTransientEditors.clear();\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.reset();\n\t}\n}\n"]}