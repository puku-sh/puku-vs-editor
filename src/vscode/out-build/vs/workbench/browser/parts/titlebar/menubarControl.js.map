{"version":3,"sources":["vs/workbench/browser/parts/titlebar/menubarControl.ts"],"names":[],"mappings":"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","file":"menubarControl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/menubarControl.css';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IMenuService, MenuId, IMenu, SubmenuItemAction, registerAction2, Action2, MenuItemAction, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { MenuBarVisibility, IWindowOpenable, getMenuBarVisibility, MenuSettings, hasNativeMenu } from '../../../../platform/window/common/window.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IAction, Action, SubmenuAction, Separator, IActionRunner, ActionRunner, WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification, toAction } from '../../../../base/common/actions.js';\nimport { addDisposableListener, Dimension, EventType } from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { isMacintosh, isWeb, isIOS, isNative } from '../../../../base/common/platform.js';\nimport { IConfigurationService, IConfigurationChangeEvent } from '../../../../platform/configuration/common/configuration.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IRecentlyOpened, isRecentFolder, IRecent, isRecentWorkspace, IWorkspacesService } from '../../../../platform/workspaces/common/workspaces.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ILabelService, Verbosity } from '../../../../platform/label/common/label.js';\nimport { IUpdateService, StateType } from '../../../../platform/update/common/update.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { MenuBar, IMenuBarOptions } from '../../../../base/browser/ui/menu/menubar.js';\nimport { HorizontalDirection, IMenuDirection, VerticalDirection } from '../../../../base/browser/ui/menu/menu.js';\nimport { mnemonicMenuLabel, unmnemonicLabel } from '../../../../base/common/labels.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { isFullscreen, onDidChangeFullscreen } from '../../../../base/browser/browser.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { BrowserFeatures } from '../../../../base/browser/canIUse.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IsMacNativeContext, IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { OpenRecentAction } from '../../actions/windowActions.js';\nimport { isICommandActionToggleInfo } from '../../../../platform/action/common/action.js';\nimport { getFlatContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { defaultMenuStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ActivityBarPosition } from '../../../services/layout/browser/layoutService.js';\n\nexport type IOpenRecentAction = IAction & { uri: URI; remoteAuthority?: string };\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarFileMenu,\n\ttitle: {\n\t\tvalue: 'File',\n\t\toriginal: 'File',\n\t\tmnemonicTitle: localize({ key: 'mFile', comment: ['&& denotes a mnemonic'] }, \"&&File\"),\n\t},\n\torder: 1\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarEditMenu,\n\ttitle: {\n\t\tvalue: 'Edit',\n\t\toriginal: 'Edit',\n\t\tmnemonicTitle: localize({ key: 'mEdit', comment: ['&& denotes a mnemonic'] }, \"&&Edit\")\n\t},\n\torder: 2\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarSelectionMenu,\n\ttitle: {\n\t\tvalue: 'Selection',\n\t\toriginal: 'Selection',\n\t\tmnemonicTitle: localize({ key: 'mSelection', comment: ['&& denotes a mnemonic'] }, \"&&Selection\")\n\t},\n\torder: 3\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarViewMenu,\n\ttitle: {\n\t\tvalue: 'View',\n\t\toriginal: 'View',\n\t\tmnemonicTitle: localize({ key: 'mView', comment: ['&& denotes a mnemonic'] }, \"&&View\")\n\t},\n\torder: 4\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarGoMenu,\n\ttitle: {\n\t\tvalue: 'Go',\n\t\toriginal: 'Go',\n\t\tmnemonicTitle: localize({ key: 'mGoto', comment: ['&& denotes a mnemonic'] }, \"&&Go\")\n\t},\n\torder: 5\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarTerminalMenu,\n\ttitle: {\n\t\tvalue: 'Terminal',\n\t\toriginal: 'Terminal',\n\t\tmnemonicTitle: localize({ key: 'mTerminal', comment: ['&& denotes a mnemonic'] }, \"&&Terminal\")\n\t},\n\torder: 7\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarHelpMenu,\n\ttitle: {\n\t\tvalue: 'Help',\n\t\toriginal: 'Help',\n\t\tmnemonicTitle: localize({ key: 'mHelp', comment: ['&& denotes a mnemonic'] }, \"&&Help\")\n\t},\n\torder: 8\n});\n\nMenuRegistry.appendMenuItem(MenuId.MenubarMainMenu, {\n\tsubmenu: MenuId.MenubarPreferencesMenu,\n\ttitle: {\n\t\tvalue: 'Preferences',\n\t\toriginal: 'Preferences',\n\t\tmnemonicTitle: localize({ key: 'mPreferences', comment: ['&& denotes a mnemonic'] }, \"Preferences\")\n\t},\n\twhen: IsMacNativeContext,\n\torder: 9\n});\n\nexport abstract class MenubarControl extends Disposable {\n\n\tprotected keys = [\n\t\tMenuSettings.MenuBarVisibility,\n\t\t'window.enableMenuBarMnemonics',\n\t\t'window.customMenuBarAltFocus',\n\t\t'workbench.sideBar.location',\n\t\t'window.nativeTabs'\n\t];\n\n\tprotected mainMenu: IMenu;\n\tprotected menus: {\n\t\t[index: string]: IMenu | undefined;\n\t} = {};\n\n\tprotected topLevelTitles: { [menu: string]: string } = {};\n\n\tprotected readonly mainMenuDisposables: DisposableStore;\n\n\tprotected recentlyOpened: IRecentlyOpened = { files: [], workspaces: [] };\n\n\tprotected menuUpdater: RunOnceScheduler;\n\n\tprotected static readonly MAX_MENU_RECENT_ENTRIES = 10;\n\n\tconstructor(\n\t\tprotected readonly menuService: IMenuService,\n\t\tprotected readonly workspacesService: IWorkspacesService,\n\t\tprotected readonly contextKeyService: IContextKeyService,\n\t\tprotected readonly keybindingService: IKeybindingService,\n\t\tprotected readonly configurationService: IConfigurationService,\n\t\tprotected readonly labelService: ILabelService,\n\t\tprotected readonly updateService: IUpdateService,\n\t\tprotected readonly storageService: IStorageService,\n\t\tprotected readonly notificationService: INotificationService,\n\t\tprotected readonly preferencesService: IPreferencesService,\n\t\tprotected readonly environmentService: IWorkbenchEnvironmentService,\n\t\tprotected readonly accessibilityService: IAccessibilityService,\n\t\tprotected readonly hostService: IHostService,\n\t\tprotected readonly commandService: ICommandService\n\t) {\n\n\t\tsuper();\n\n\t\tthis.mainMenu = this._register(this.menuService.createMenu(MenuId.MenubarMainMenu, this.contextKeyService));\n\t\tthis.mainMenuDisposables = this._register(new DisposableStore());\n\n\t\tthis.setupMainMenu();\n\n\t\tthis.menuUpdater = this._register(new RunOnceScheduler(() => this.doUpdateMenubar(false), 200));\n\n\t\tthis.notifyUserOfCustomMenubarAccessibility();\n\t}\n\n\tprotected abstract doUpdateMenubar(firstTime: boolean): void;\n\n\tprotected registerListeners(): void {\n\t\t// Listen for window focus changes\n\t\tthis._register(this.hostService.onDidChangeFocus(e => this.onDidChangeWindowFocus(e)));\n\n\t\t// Update when config changes\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n\n\t\t// Listen to update service\n\t\tthis._register(this.updateService.onStateChange(() => this.onUpdateStateChange()));\n\n\t\t// Listen for changes in recently opened menu\n\t\tthis._register(this.workspacesService.onDidChangeRecentlyOpened(() => { this.onDidChangeRecentlyOpened(); }));\n\n\t\t// Listen to keybindings change\n\t\tthis._register(this.keybindingService.onDidUpdateKeybindings(() => this.updateMenubar()));\n\n\t\t// Update recent menu items on formatter registration\n\t\tthis._register(this.labelService.onDidChangeFormatters(() => { this.onDidChangeRecentlyOpened(); }));\n\n\t\t// Listen for changes on the main menu\n\t\tthis._register(this.mainMenu.onDidChange(() => { this.setupMainMenu(); this.doUpdateMenubar(true); }));\n\t}\n\n\tprotected setupMainMenu(): void {\n\t\tthis.mainMenuDisposables.clear();\n\t\tthis.menus = {};\n\t\tthis.topLevelTitles = {};\n\n\t\tconst [, mainMenuActions] = this.mainMenu.getActions()[0];\n\t\tfor (const mainMenuAction of mainMenuActions) {\n\t\t\tif (mainMenuAction instanceof SubmenuItemAction && typeof mainMenuAction.item.title !== 'string') {\n\t\t\t\tthis.menus[mainMenuAction.item.title.original] = this.mainMenuDisposables.add(this.menuService.createMenu(mainMenuAction.item.submenu, this.contextKeyService, { emitEventsForSubmenuChanges: true }));\n\t\t\t\tthis.topLevelTitles[mainMenuAction.item.title.original] = mainMenuAction.item.title.mnemonicTitle ?? mainMenuAction.item.title.value;\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected updateMenubar(): void {\n\t\tthis.menuUpdater.schedule();\n\t}\n\n\tprotected calculateActionLabel(action: { id: string; label: string }): string {\n\t\tconst label = action.label;\n\t\tswitch (action.id) {\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn label;\n\t}\n\n\tprotected onUpdateStateChange(): void {\n\t\tthis.updateMenubar();\n\t}\n\n\tprotected onUpdateKeybindings(): void {\n\t\tthis.updateMenubar();\n\t}\n\n\tprotected getOpenRecentActions(): (Separator | IOpenRecentAction)[] {\n\t\tif (!this.recentlyOpened) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { workspaces, files } = this.recentlyOpened;\n\n\t\tconst result = [];\n\n\t\tif (workspaces.length > 0) {\n\t\t\tfor (let i = 0; i < MenubarControl.MAX_MENU_RECENT_ENTRIES && i < workspaces.length; i++) {\n\t\t\t\tresult.push(this.createOpenRecentMenuAction(workspaces[i]));\n\t\t\t}\n\n\t\t\tresult.push(new Separator());\n\t\t}\n\n\t\tif (files.length > 0) {\n\t\t\tfor (let i = 0; i < MenubarControl.MAX_MENU_RECENT_ENTRIES && i < files.length; i++) {\n\t\t\t\tresult.push(this.createOpenRecentMenuAction(files[i]));\n\t\t\t}\n\n\t\t\tresult.push(new Separator());\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected onDidChangeWindowFocus(hasFocus: boolean): void {\n\t\t// When we regain focus, update the recent menu items\n\t\tif (hasFocus) {\n\t\t\tthis.onDidChangeRecentlyOpened();\n\t\t}\n\t}\n\n\tprivate onConfigurationUpdated(event: IConfigurationChangeEvent): void {\n\t\tif (this.keys.some(key => event.affectsConfiguration(key))) {\n\t\t\tthis.updateMenubar();\n\t\t}\n\n\t\tif (event.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\tthis.notifyUserOfCustomMenubarAccessibility();\n\t\t}\n\n\t\t// Since we try not update when hidden, we should\n\t\t// try to update the recently opened list on visibility changes\n\t\tif (event.affectsConfiguration(MenuSettings.MenuBarVisibility)) {\n\t\t\tthis.onDidChangeRecentlyOpened();\n\t\t}\n\t}\n\n\tprivate get menubarHidden(): boolean {\n\t\treturn isMacintosh && isNative ? false : getMenuBarVisibility(this.configurationService) === 'hidden';\n\t}\n\n\tprotected onDidChangeRecentlyOpened(): void {\n\n\t\t// Do not update recently opened when the menubar is hidden #108712\n\t\tif (!this.menubarHidden) {\n\t\t\tthis.workspacesService.getRecentlyOpened().then(recentlyOpened => {\n\t\t\t\tthis.recentlyOpened = recentlyOpened;\n\t\t\t\tthis.updateMenubar();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate createOpenRecentMenuAction(recent: IRecent): IOpenRecentAction {\n\n\t\tlet label: string;\n\t\tlet uri: URI;\n\t\tlet commandId: string;\n\t\tlet openable: IWindowOpenable;\n\t\tconst remoteAuthority = recent.remoteAuthority;\n\n\t\tif (isRecentFolder(recent)) {\n\t\t\turi = recent.folderUri;\n\t\t\tlabel = recent.label || this.labelService.getWorkspaceLabel(uri, { verbose: Verbosity.LONG });\n\t\t\tcommandId = 'openRecentFolder';\n\t\t\topenable = { folderUri: uri };\n\t\t} else if (isRecentWorkspace(recent)) {\n\t\t\turi = recent.workspace.configPath;\n\t\t\tlabel = recent.label || this.labelService.getWorkspaceLabel(recent.workspace, { verbose: Verbosity.LONG });\n\t\t\tcommandId = 'openRecentWorkspace';\n\t\t\topenable = { workspaceUri: uri };\n\t\t} else {\n\t\t\turi = recent.fileUri;\n\t\t\tlabel = recent.label || this.labelService.getUriLabel(uri, { appendWorkspaceSuffix: true });\n\t\t\tcommandId = 'openRecentFile';\n\t\t\topenable = { fileUri: uri };\n\t\t}\n\n\t\tconst ret = toAction({\n\t\t\tid: commandId, label: unmnemonicLabel(label), run: (browserEvent: KeyboardEvent) => {\n\t\t\t\tconst openInNewWindow = browserEvent && ((!isMacintosh && (browserEvent.ctrlKey || browserEvent.shiftKey)) || (isMacintosh && (browserEvent.metaKey || browserEvent.altKey)));\n\n\t\t\t\treturn this.hostService.openWindow([openable], {\n\t\t\t\t\tforceNewWindow: !!openInNewWindow,\n\t\t\t\t\tremoteAuthority: remoteAuthority || null // local window if remoteAuthority is not set or can not be deducted from the openable\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn Object.assign(ret, { uri, remoteAuthority });\n\t}\n\n\tprivate notifyUserOfCustomMenubarAccessibility(): void {\n\t\tif (isWeb || isMacintosh) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst hasBeenNotified = this.storageService.getBoolean('menubar/accessibleMenubarNotified', StorageScope.APPLICATION, false);\n\t\tconst usingCustomMenubar = !hasNativeMenu(this.configurationService);\n\n\t\tif (hasBeenNotified || usingCustomMenubar || !this.accessibilityService.isScreenReaderOptimized()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = localize('menubar.customTitlebarAccessibilityNotification', \"Accessibility support is enabled for you. For the most accessible experience, we recommend the custom menu style.\");\n\t\tthis.notificationService.prompt(Severity.Info, message, [\n\t\t\t{\n\t\t\t\tlabel: localize('goToSetting', \"Open Settings\"),\n\t\t\t\trun: () => {\n\t\t\t\t\treturn this.preferencesService.openUserSettings({ query: MenuSettings.MenuStyle });\n\t\t\t\t}\n\t\t\t}\n\t\t]);\n\n\t\tthis.storageService.store('menubar/accessibleMenubarNotified', true, StorageScope.APPLICATION, StorageTarget.USER);\n\t}\n}\n\n// This is a bit complex due to the issue https://github.com/microsoft/vscode/issues/205836\nlet focusMenuBarEmitter: Emitter<void> | undefined = undefined;\nfunction enableFocusMenuBarAction(): Emitter<void> {\n\tif (!focusMenuBarEmitter) {\n\t\tfocusMenuBarEmitter = new Emitter<void>();\n\n\t\tregisterAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.actions.menubar.focus`,\n\t\t\t\t\ttitle: localize2('focusMenu', 'Focus Application Menu'),\n\t\t\t\t\tkeybinding: {\n\t\t\t\t\t\tprimary: KeyMod.Alt | KeyCode.F10,\n\t\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\t\twhen: IsWebContext\n\t\t\t\t\t},\n\t\t\t\t\tf1: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(): Promise<void> {\n\t\t\t\tfocusMenuBarEmitter?.fire();\n\t\t\t}\n\t\t});\n\t}\n\n\treturn focusMenuBarEmitter;\n}\n\nexport class CustomMenubarControl extends MenubarControl {\n\tprivate menubar: MenuBar | undefined;\n\tprivate container: HTMLElement | undefined;\n\tprivate alwaysOnMnemonics: boolean = false;\n\tprivate focusInsideMenubar: boolean = false;\n\tprivate pendingFirstTimeUpdate: boolean = false;\n\tprivate visible: boolean = true;\n\tprivate actionRunner: IActionRunner;\n\tprivate readonly webNavigationMenu = this._register(this.menuService.createMenu(MenuId.MenubarHomeMenu, this.contextKeyService));\n\n\tprivate readonly _onVisibilityChange: Emitter<boolean>;\n\tprivate readonly _onFocusStateChange: Emitter<boolean>;\n\n\tconstructor(\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IUpdateService updateService: IUpdateService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IPreferencesService preferencesService: IPreferencesService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IHostService hostService: IHostService,\n\t\t@ICommandService commandService: ICommandService\n\t) {\n\t\tsuper(menuService, workspacesService, contextKeyService, keybindingService, configurationService, labelService, updateService, storageService, notificationService, preferencesService, environmentService, accessibilityService, hostService, commandService);\n\n\t\tthis._onVisibilityChange = this._register(new Emitter<boolean>());\n\t\tthis._onFocusStateChange = this._register(new Emitter<boolean>());\n\n\t\tthis.actionRunner = this._register(new ActionRunner());\n\t\tthis.actionRunner.onDidRun(e => {\n\t\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', { id: e.action.id, from: 'menu' });\n\t\t});\n\n\t\tthis.workspacesService.getRecentlyOpened().then((recentlyOpened) => {\n\t\t\tthis.recentlyOpened = recentlyOpened;\n\t\t});\n\n\t\tthis.registerListeners();\n\t}\n\n\tprotected doUpdateMenubar(firstTime: boolean): void {\n\t\tif (!this.focusInsideMenubar) {\n\t\t\tthis.setupCustomMenubar(firstTime);\n\t\t}\n\n\t\tif (firstTime) {\n\t\t\tthis.pendingFirstTimeUpdate = true;\n\t\t}\n\t}\n\n\tprivate getUpdateAction(): IAction | null {\n\t\tconst state = this.updateService.state;\n\n\t\tswitch (state.type) {\n\t\t\tcase StateType.Idle:\n\t\t\t\treturn toAction({\n\t\t\t\t\tid: 'update.check', label: localize({ key: 'checkForUpdates', comment: ['&& denotes a mnemonic'] }, \"Check for &&Updates...\"), enabled: true, run: () =>\n\t\t\t\t\t\tthis.updateService.checkForUpdates(true)\n\t\t\t\t});\n\n\t\t\tcase StateType.CheckingForUpdates:\n\t\t\t\treturn toAction({ id: 'update.checking', label: localize('checkingForUpdates', \"Checking for Updates...\"), enabled: false, run: () => { } });\n\n\t\t\tcase StateType.AvailableForDownload:\n\t\t\t\treturn toAction({\n\t\t\t\t\tid: 'update.downloadNow', label: localize({ key: 'download now', comment: ['&& denotes a mnemonic'] }, \"D&&ownload Update\"), enabled: true, run: () =>\n\t\t\t\t\t\tthis.updateService.downloadUpdate()\n\t\t\t\t});\n\n\t\t\tcase StateType.Downloading:\n\t\t\t\treturn toAction({ id: 'update.downloading', label: localize('DownloadingUpdate', \"Downloading Update...\"), enabled: false, run: () => { } });\n\n\t\t\tcase StateType.Downloaded:\n\t\t\t\treturn isMacintosh ? null : toAction({\n\t\t\t\t\tid: 'update.install', label: localize({ key: 'installUpdate...', comment: ['&& denotes a mnemonic'] }, \"Install &&Update...\"), enabled: true, run: () =>\n\t\t\t\t\t\tthis.updateService.applyUpdate()\n\t\t\t\t});\n\n\t\t\tcase StateType.Updating:\n\t\t\t\treturn toAction({ id: 'update.updating', label: localize('installingUpdate', \"Installing Update...\"), enabled: false, run: () => { } });\n\n\t\t\tcase StateType.Ready:\n\t\t\t\treturn toAction({\n\t\t\t\t\tid: 'update.restart', label: localize({ key: 'restartToUpdate', comment: ['&& denotes a mnemonic'] }, \"Restart to &&Update\"), enabled: true, run: () =>\n\t\t\t\t\t\tthis.updateService.quitAndInstall()\n\t\t\t\t});\n\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate get currentMenubarVisibility(): MenuBarVisibility {\n\t\treturn getMenuBarVisibility(this.configurationService);\n\t}\n\n\tprivate get currentDisableMenuBarAltFocus(): boolean {\n\t\tconst settingValue = this.configurationService.getValue<boolean>('window.customMenuBarAltFocus');\n\n\t\tlet disableMenuBarAltBehavior = false;\n\t\tif (typeof settingValue === 'boolean') {\n\t\t\tdisableMenuBarAltBehavior = !settingValue;\n\t\t}\n\n\t\treturn disableMenuBarAltBehavior;\n\t}\n\n\tprivate insertActionsBefore(nextAction: IAction, target: IAction[]): void {\n\t\tswitch (nextAction.id) {\n\t\t\tcase OpenRecentAction.ID:\n\t\t\t\ttarget.push(...this.getOpenRecentActions());\n\t\t\t\tbreak;\n\n\t\t\tcase 'workbench.action.showAboutDialog':\n\t\t\t\tif (!isMacintosh && !isWeb) {\n\t\t\t\t\tconst updateAction = this.getUpdateAction();\n\t\t\t\t\tif (updateAction) {\n\t\t\t\t\t\tupdateAction.label = mnemonicMenuLabel(updateAction.label);\n\t\t\t\t\t\ttarget.push(updateAction);\n\t\t\t\t\t\ttarget.push(new Separator());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate get currentEnableMenuBarMnemonics(): boolean {\n\t\tlet enableMenuBarMnemonics = this.configurationService.getValue<boolean>('window.enableMenuBarMnemonics');\n\t\tif (typeof enableMenuBarMnemonics !== 'boolean') {\n\t\t\tenableMenuBarMnemonics = true;\n\t\t}\n\n\t\treturn enableMenuBarMnemonics && (!isWeb || isFullscreen(mainWindow));\n\t}\n\n\tprivate get currentCompactMenuMode(): IMenuDirection | undefined {\n\t\tif (this.currentMenubarVisibility !== 'compact') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Menu bar lives in activity bar and should flow based on its location\n\t\tconst currentSidebarLocation = this.configurationService.getValue<string>('workbench.sideBar.location');\n\t\tconst horizontalDirection = currentSidebarLocation === 'right' ? HorizontalDirection.Left : HorizontalDirection.Right;\n\n\t\tconst activityBarLocation = this.configurationService.getValue<string>('workbench.activityBar.location');\n\t\tconst verticalDirection = activityBarLocation === ActivityBarPosition.BOTTOM ? VerticalDirection.Above : VerticalDirection.Below;\n\n\t\treturn { horizontal: horizontalDirection, vertical: verticalDirection };\n\t}\n\n\tprivate onDidVisibilityChange(visible: boolean): void {\n\t\tthis.visible = visible;\n\t\tthis.onDidChangeRecentlyOpened();\n\t\tthis._onVisibilityChange.fire(visible);\n\t}\n\n\tprivate toActionsArray(menu: IMenu): IAction[] {\n\t\treturn getFlatContextMenuActions(menu.getActions({ shouldForwardArgs: true }));\n\t}\n\n\tprivate readonly reinstallDisposables = this._register(new DisposableStore());\n\tprivate readonly updateActionsDisposables = this._register(new DisposableStore());\n\tprivate setupCustomMenubar(firstTime: boolean): void {\n\t\t// If there is no container, we cannot setup the menubar\n\t\tif (!this.container) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (firstTime) {\n\t\t\t// Reset and create new menubar\n\t\t\tif (this.menubar) {\n\t\t\t\tthis.reinstallDisposables.clear();\n\t\t\t}\n\n\t\t\tthis.menubar = this.reinstallDisposables.add(new MenuBar(this.container, this.getMenuBarOptions(), defaultMenuStyles));\n\n\t\t\tthis.accessibilityService.alwaysUnderlineAccessKeys().then(val => {\n\t\t\t\tthis.alwaysOnMnemonics = val;\n\t\t\t\tthis.menubar?.update(this.getMenuBarOptions());\n\t\t\t});\n\n\t\t\tthis.reinstallDisposables.add(this.menubar.onFocusStateChange(focused => {\n\t\t\t\tthis._onFocusStateChange.fire(focused);\n\n\t\t\t\t// When the menubar loses focus, update it to clear any pending updates\n\t\t\t\tif (!focused) {\n\t\t\t\t\tif (this.pendingFirstTimeUpdate) {\n\t\t\t\t\t\tthis.setupCustomMenubar(true);\n\t\t\t\t\t\tthis.pendingFirstTimeUpdate = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.updateMenubar();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.focusInsideMenubar = false;\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.reinstallDisposables.add(this.menubar.onVisibilityChange(e => this.onDidVisibilityChange(e)));\n\n\t\t\t// Before we focus the menubar, stop updates to it so that focus-related context keys will work\n\t\t\tthis.reinstallDisposables.add(addDisposableListener(this.container, EventType.FOCUS_IN, () => {\n\t\t\t\tthis.focusInsideMenubar = true;\n\t\t\t}));\n\n\t\t\tthis.reinstallDisposables.add(addDisposableListener(this.container, EventType.FOCUS_OUT, () => {\n\t\t\t\tthis.focusInsideMenubar = false;\n\t\t\t}));\n\n\t\t\t// Fire visibility change for the first install if menu is shown\n\t\t\tif (this.menubar.isVisible) {\n\t\t\t\tthis.onDidVisibilityChange(true);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.menubar?.update(this.getMenuBarOptions());\n\t\t}\n\n\t\t// Update the menu actions\n\t\tconst updateActions = (menuActions: readonly IAction[], target: IAction[], topLevelTitle: string, store: DisposableStore) => {\n\t\t\ttarget.splice(0);\n\n\t\t\tfor (const menuItem of menuActions) {\n\t\t\t\tthis.insertActionsBefore(menuItem, target);\n\n\t\t\t\tif (menuItem instanceof Separator) {\n\t\t\t\t\ttarget.push(menuItem);\n\t\t\t\t} else if (menuItem instanceof SubmenuItemAction || menuItem instanceof MenuItemAction) {\n\t\t\t\t\t// use mnemonicTitle whenever possible\n\t\t\t\t\tlet title = typeof menuItem.item.title === 'string'\n\t\t\t\t\t\t? menuItem.item.title\n\t\t\t\t\t\t: menuItem.item.title.mnemonicTitle ?? menuItem.item.title.value;\n\n\t\t\t\t\tif (menuItem instanceof SubmenuItemAction) {\n\t\t\t\t\t\tconst submenuActions: SubmenuAction[] = [];\n\t\t\t\t\t\tupdateActions(menuItem.actions, submenuActions, topLevelTitle, store);\n\n\t\t\t\t\t\tif (submenuActions.length > 0) {\n\t\t\t\t\t\t\ttarget.push(new SubmenuAction(menuItem.id, mnemonicMenuLabel(title), submenuActions));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isICommandActionToggleInfo(menuItem.item.toggled)) {\n\t\t\t\t\t\t\ttitle = menuItem.item.toggled.mnemonicTitle ?? menuItem.item.toggled.title ?? title;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newAction = store.add(new Action(menuItem.id, mnemonicMenuLabel(title), menuItem.class, menuItem.enabled, () => this.commandService.executeCommand(menuItem.id)));\n\t\t\t\t\t\tnewAction.tooltip = menuItem.tooltip;\n\t\t\t\t\t\tnewAction.checked = menuItem.checked;\n\t\t\t\t\t\ttarget.push(newAction);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Append web navigation menu items to the file menu when not compact\n\t\t\tif (topLevelTitle === 'File' && this.currentCompactMenuMode === undefined) {\n\t\t\t\tconst webActions = this.getWebNavigationActions();\n\t\t\t\tif (webActions.length) {\n\t\t\t\t\ttarget.push(...webActions);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tfor (const title of Object.keys(this.topLevelTitles)) {\n\t\t\tconst menu = this.menus[title];\n\t\t\tif (firstTime && menu) {\n\t\t\t\tconst menuChangedDisposable = this.reinstallDisposables.add(new DisposableStore());\n\t\t\t\tthis.reinstallDisposables.add(menu.onDidChange(() => {\n\t\t\t\t\tif (!this.focusInsideMenubar) {\n\t\t\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\t\t\tmenuChangedDisposable.clear();\n\t\t\t\t\t\tupdateActions(this.toActionsArray(menu), actions, title, menuChangedDisposable);\n\t\t\t\t\t\tthis.menubar?.updateMenu({ actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\t// For the file menu, we need to update if the web nav menu updates as well\n\t\t\t\tif (menu === this.menus.File) {\n\t\t\t\t\tconst webMenuChangedDisposable = this.reinstallDisposables.add(new DisposableStore());\n\t\t\t\t\tthis.reinstallDisposables.add(this.webNavigationMenu.onDidChange(() => {\n\t\t\t\t\t\tif (!this.focusInsideMenubar) {\n\t\t\t\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\t\t\t\twebMenuChangedDisposable.clear();\n\t\t\t\t\t\t\tupdateActions(this.toActionsArray(menu), actions, title, webMenuChangedDisposable);\n\t\t\t\t\t\t\tthis.menubar?.updateMenu({ actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst actions: IAction[] = [];\n\t\t\tif (menu) {\n\t\t\t\tthis.updateActionsDisposables.clear();\n\t\t\t\tupdateActions(this.toActionsArray(menu), actions, title, this.updateActionsDisposables);\n\t\t\t}\n\n\t\t\tif (this.menubar) {\n\t\t\t\tif (!firstTime) {\n\t\t\t\t\tthis.menubar.updateMenu({ actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t} else {\n\t\t\t\t\tthis.menubar.push({ actions, label: mnemonicMenuLabel(this.topLevelTitles[title]) });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getWebNavigationActions(): IAction[] {\n\t\tif (!isWeb) {\n\t\t\treturn []; // only for web\n\t\t}\n\n\t\tconst webNavigationActions = [];\n\t\tfor (const groups of this.webNavigationMenu.getActions()) {\n\t\t\tconst [, actions] = groups;\n\t\t\tfor (const action of actions) {\n\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\tconst title = typeof action.item.title === 'string'\n\t\t\t\t\t\t? action.item.title\n\t\t\t\t\t\t: action.item.title.mnemonicTitle ?? action.item.title.value;\n\t\t\t\t\twebNavigationActions.push(toAction({\n\t\t\t\t\t\tid: action.id, label: mnemonicMenuLabel(title), class: action.class, enabled: action.enabled, run: async (event?: unknown) => {\n\t\t\t\t\t\t\tthis.commandService.executeCommand(action.id, event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twebNavigationActions.push(new Separator());\n\t\t}\n\n\t\tif (webNavigationActions.length) {\n\t\t\twebNavigationActions.pop();\n\t\t}\n\n\t\treturn webNavigationActions;\n\t}\n\n\tprivate getMenuBarOptions(): IMenuBarOptions {\n\t\treturn {\n\t\t\tenableMnemonics: this.currentEnableMenuBarMnemonics,\n\t\t\tdisableAltFocus: this.currentDisableMenuBarAltFocus,\n\t\t\tvisibility: this.currentMenubarVisibility,\n\t\t\tactionRunner: this.actionRunner,\n\t\t\tgetKeybinding: (action) => this.keybindingService.lookupKeybinding(action.id),\n\t\t\talwaysOnMnemonics: this.alwaysOnMnemonics,\n\t\t\tcompactMode: this.currentCompactMenuMode,\n\t\t\tgetCompactMenuActions: () => {\n\t\t\t\tif (!isWeb) {\n\t\t\t\t\treturn []; // only for web\n\t\t\t\t}\n\n\t\t\t\treturn this.getWebNavigationActions();\n\t\t\t}\n\t\t};\n\t}\n\n\tprotected override onDidChangeWindowFocus(hasFocus: boolean): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onDidChangeWindowFocus(hasFocus);\n\n\t\tif (this.container) {\n\t\t\tif (hasFocus) {\n\t\t\t\tthis.container.classList.remove('inactive');\n\t\t\t} else {\n\t\t\t\tthis.container.classList.add('inactive');\n\t\t\t\tthis.menubar?.blur();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override onUpdateStateChange(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onUpdateStateChange();\n\t}\n\n\tprotected override onDidChangeRecentlyOpened(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onDidChangeRecentlyOpened();\n\t}\n\n\tprotected override onUpdateKeybindings(): void {\n\t\tif (!this.visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onUpdateKeybindings();\n\t}\n\n\tprotected override registerListeners(): void {\n\t\tsuper.registerListeners();\n\n\t\tthis._register(addDisposableListener(mainWindow, EventType.RESIZE, () => {\n\t\t\tif (this.menubar && !(isIOS && BrowserFeatures.pointerEvents)) {\n\t\t\t\tthis.menubar.blur();\n\t\t\t}\n\t\t}));\n\n\t\t// Mnemonics require fullscreen in web\n\t\tif (isWeb) {\n\t\t\tthis._register(onDidChangeFullscreen(windowId => {\n\t\t\t\tif (windowId === mainWindow.vscodeWindowId) {\n\t\t\t\t\tthis.updateMenubar();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._register(this.webNavigationMenu.onDidChange(() => this.updateMenubar()));\n\t\t\tthis._register(enableFocusMenuBarAction().event(() => this.menubar?.toggleFocus()));\n\t\t}\n\t}\n\n\tget onVisibilityChange(): Event<boolean> {\n\t\treturn this._onVisibilityChange.event;\n\t}\n\n\tget onFocusStateChange(): Event<boolean> {\n\t\treturn this._onFocusStateChange.event;\n\t}\n\n\tgetMenubarItemsDimensions(): Dimension {\n\t\tif (this.menubar) {\n\t\t\treturn new Dimension(this.menubar.getWidth(), this.menubar.getHeight());\n\t\t}\n\n\t\treturn new Dimension(0, 0);\n\t}\n\n\tcreate(parent: HTMLElement): HTMLElement {\n\t\tthis.container = parent;\n\n\t\t// Build the menubar\n\t\tif (this.container) {\n\t\t\tthis.doUpdateMenubar(true);\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\tlayout(dimension: Dimension) {\n\t\tthis.menubar?.update(this.getMenuBarOptions());\n\t}\n\n\ttoggleFocus() {\n\t\tthis.menubar?.toggleFocus();\n\t}\n}\n"]}