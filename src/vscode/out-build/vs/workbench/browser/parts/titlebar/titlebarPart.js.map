{"version":3,"sources":["vs/workbench/browser/parts/titlebar/titlebarPart.ts"],"names":[],"mappings":"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","file":"titlebarPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/titlebarpart.css';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { MultiWindowParts, Part } from '../../part.js';\nimport { ITitleService } from '../../../services/title/browser/titleService.js';\nimport { getWCOTitlebarAreaRect, getZoomFactor, isWCOEnabled } from '../../../../base/browser/browser.js';\nimport { MenuBarVisibility, getTitleBarStyle, getMenuBarVisibility, hasCustomTitlebar, hasNativeTitlebar, DEFAULT_CUSTOM_TITLEBAR_HEIGHT, getWindowControlsStyle, WindowControlsStyle, TitlebarStyle, MenuSettings, hasNativeMenu } from '../../../../platform/window/common/window.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { IConfigurationService, IConfigurationChangeEvent } from '../../../../platform/configuration/common/configuration.js';\nimport { DisposableStore, IDisposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../../services/environment/browser/environmentService.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { TITLE_BAR_ACTIVE_BACKGROUND, TITLE_BAR_ACTIVE_FOREGROUND, TITLE_BAR_INACTIVE_FOREGROUND, TITLE_BAR_INACTIVE_BACKGROUND, TITLE_BAR_BORDER, WORKBENCH_BACKGROUND } from '../../../common/theme.js';\nimport { isMacintosh, isWindows, isLinux, isWeb, isNative, platformLocale } from '../../../../base/common/platform.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { EventType, EventHelper, Dimension, append, $, addDisposableListener, prepend, reset, getWindow, getWindowId, isAncestor, getActiveDocument, isHTMLElement } from '../../../../base/browser/dom.js';\nimport { CustomMenubarControl } from './menubarControl.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IStorageService, StorageScope } from '../../../../platform/storage/common/storage.js';\nimport { Parts, IWorkbenchLayoutService, ActivityBarPosition, LayoutSettings, EditorActionsLocation, EditorTabsMode } from '../../../services/layout/browser/layoutService.js';\nimport { createActionViewItem, fillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { Action2, IMenu, IMenuService, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { WindowTitle } from './windowTitle.js';\nimport { CommandCenterControl } from './commandCenterControl.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { WorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { ACCOUNTS_ACTIVITY_ID, GLOBAL_ACTIVITY_ID } from '../../../common/activity.js';\nimport { AccountsActivityActionViewItem, isAccountsActionVisible, SimpleAccountActivityActionViewItem, SimpleGlobalActivityActionViewItem } from '../globalCompositeBar.js';\nimport { HoverPosition } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { IEditorGroupsContainer, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ActionRunner, IAction } from '../../../../base/common/actions.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ActionsOrientation, IActionViewItem, prepareActions } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { EDITOR_CORE_NAVIGATION_COMMANDS } from '../editor/editorCommands.js';\nimport { AnchorAlignment } from '../../../../base/browser/ui/contextview/contextview.js';\nimport { EditorPane } from '../editor/editorPane.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ResolvedKeybinding } from '../../../../base/common/keybindings.js';\nimport { EditorCommandsContextActionRunner } from '../editor/editorTabsControl.js';\nimport { IEditorCommandsContext, IEditorPartOptionsChangeEvent, IToolbarActions } from '../../../common/editor.js';\nimport { CodeWindow, mainWindow } from '../../../../base/browser/window.js';\nimport { ACCOUNTS_ACTIVITY_TILE_ACTION, GLOBAL_ACTIVITY_TITLE_ACTION } from './titlebarActions.js';\nimport { IView } from '../../../../base/browser/ui/grid/grid.js';\nimport { createInstantHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IBaseActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { IHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { safeIntl } from '../../../../base/common/date.js';\nimport { IsCompactTitleBarContext, TitleBarVisibleContext } from '../../../common/contextkeys.js';\n\nexport interface ITitleVariable {\n\treadonly name: string;\n\treadonly contextKey: string;\n}\n\nexport interface ITitleProperties {\n\tisPure?: boolean;\n\tisAdmin?: boolean;\n\tprefix?: string;\n}\n\nexport interface ITitlebarPart extends IDisposable {\n\n\t/**\n\t * An event when the menubar visibility changes.\n\t */\n\treadonly onMenubarVisibilityChange: Event<boolean>;\n\n\t/**\n\t * Update some environmental title properties.\n\t */\n\tupdateProperties(properties: ITitleProperties): void;\n\n\t/**\n\t * Adds variables to be supported in the window title.\n\t */\n\tregisterVariables(variables: ITitleVariable[]): void;\n}\n\nexport class BrowserTitleService extends MultiWindowParts<BrowserTitlebarPart> implements ITitleService {\n\n\tdeclare _serviceBrand: undefined;\n\n\treadonly mainPart: BrowserTitlebarPart;\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IThemeService themeService: IThemeService\n\t) {\n\t\tsuper('workbench.titleService', themeService, storageService);\n\n\t\tthis.mainPart = this._register(this.createMainTitlebarPart());\n\t\tthis.onMenubarVisibilityChange = this.mainPart.onMenubarVisibilityChange;\n\t\tthis._register(this.registerPart(this.mainPart));\n\n\t\tthis.registerActions();\n\t\tthis.registerAPICommands();\n\t}\n\n\tprotected createMainTitlebarPart(): BrowserTitlebarPart {\n\t\treturn this.instantiationService.createInstance(MainBrowserTitlebarPart);\n\t}\n\n\tprivate registerActions(): void {\n\n\t\t// Focus action\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class FocusTitleBar extends Action2 {\n\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.action.focusTitleBar`,\n\t\t\t\t\ttitle: localize2('focusTitleBar', 'Focus Title Bar'),\n\t\t\t\t\tcategory: Categories.View,\n\t\t\t\t\tf1: true,\n\t\t\t\t\tprecondition: TitleBarVisibleContext\n\t\t\t\t});\n\t\t\t}\n\n\t\t\trun(): void {\n\t\t\t\tthat.getPartByDocument(getActiveDocument())?.focus();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate registerAPICommands(): void {\n\t\tthis._register(CommandsRegistry.registerCommand({\n\t\t\tid: 'registerWindowTitleVariable',\n\t\t\thandler: (accessor: ServicesAccessor, name: string, contextKey: string) => {\n\t\t\t\tthis.registerVariables([{ name, contextKey }]);\n\t\t\t},\n\t\t\tmetadata: {\n\t\t\t\tdescription: 'Registers a new title variable',\n\t\t\t\targs: [\n\t\t\t\t\t{ name: 'name', schema: { type: 'string' }, description: 'The name of the variable to register' },\n\t\t\t\t\t{ name: 'contextKey', schema: { type: 'string' }, description: 'The context key to use for the value of the variable' }\n\t\t\t\t]\n\t\t\t}\n\t\t}));\n\t}\n\n\t//#region Auxiliary Titlebar Parts\n\n\tcreateAuxiliaryTitlebarPart(container: HTMLElement, editorGroupsContainer: IEditorGroupsContainer, instantiationService: IInstantiationService): IAuxiliaryTitlebarPart {\n\t\tconst titlebarPartContainer = $('.part.titlebar', { role: 'none' });\n\t\ttitlebarPartContainer.style.position = 'relative';\n\t\tcontainer.insertBefore(titlebarPartContainer, container.firstChild); // ensure we are first element\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst titlebarPart = this.doCreateAuxiliaryTitlebarPart(titlebarPartContainer, editorGroupsContainer, instantiationService);\n\t\tdisposables.add(this.registerPart(titlebarPart));\n\n\t\tdisposables.add(Event.runAndSubscribe(titlebarPart.onDidChange, () => titlebarPartContainer.style.height = `${titlebarPart.height}px`));\n\t\ttitlebarPart.create(titlebarPartContainer);\n\n\t\tif (this.properties) {\n\t\t\ttitlebarPart.updateProperties(this.properties);\n\t\t}\n\n\t\tif (this.variables.size) {\n\t\t\ttitlebarPart.registerVariables(Array.from(this.variables.values()));\n\t\t}\n\n\t\tEvent.once(titlebarPart.onWillDispose)(() => disposables.dispose());\n\n\t\treturn titlebarPart;\n\t}\n\n\tprotected doCreateAuxiliaryTitlebarPart(container: HTMLElement, editorGroupsContainer: IEditorGroupsContainer, instantiationService: IInstantiationService): BrowserTitlebarPart & IAuxiliaryTitlebarPart {\n\t\treturn instantiationService.createInstance(AuxiliaryBrowserTitlebarPart, container, editorGroupsContainer, this.mainPart);\n\t}\n\n\t//#endregion\n\n\n\t//#region Service Implementation\n\n\treadonly onMenubarVisibilityChange: Event<boolean>;\n\n\tprivate properties: ITitleProperties | undefined = undefined;\n\n\tupdateProperties(properties: ITitleProperties): void {\n\t\tthis.properties = properties;\n\n\t\tfor (const part of this.parts) {\n\t\t\tpart.updateProperties(properties);\n\t\t}\n\t}\n\n\tprivate readonly variables = new Map<string, ITitleVariable>();\n\n\tregisterVariables(variables: ITitleVariable[]): void {\n\t\tconst newVariables: ITitleVariable[] = [];\n\n\t\tfor (const variable of variables) {\n\t\t\tif (!this.variables.has(variable.name)) {\n\t\t\t\tthis.variables.set(variable.name, variable);\n\t\t\t\tnewVariables.push(variable);\n\t\t\t}\n\t\t}\n\n\t\tfor (const part of this.parts) {\n\t\t\tpart.registerVariables(newVariables);\n\t\t}\n\t}\n\n\t//#endregion\n}\n\nexport class BrowserTitlebarPart extends Part implements ITitlebarPart {\n\n\t//#region IView\n\n\treadonly minimumWidth: number = 0;\n\treadonly maximumWidth: number = Number.POSITIVE_INFINITY;\n\n\tget minimumHeight(): number {\n\t\tconst wcoEnabled = isWeb && isWCOEnabled();\n\t\tlet value = this.isCommandCenterVisible || wcoEnabled ? DEFAULT_CUSTOM_TITLEBAR_HEIGHT : 30;\n\t\tif (wcoEnabled) {\n\t\t\tvalue = Math.max(value, getWCOTitlebarAreaRect(getWindow(this.element))?.height ?? 0);\n\t\t}\n\n\t\treturn value / (this.preventZoom ? getZoomFactor(getWindow(this.element)) : 1);\n\t}\n\n\tget maximumHeight(): number { return this.minimumHeight; }\n\n\t//#endregion\n\n\t//#region Events\n\n\tprivate _onMenubarVisibilityChange = this._register(new Emitter<boolean>());\n\treadonly onMenubarVisibilityChange = this._onMenubarVisibilityChange.event;\n\n\tprivate readonly _onWillDispose = this._register(new Emitter<void>());\n\treadonly onWillDispose = this._onWillDispose.event;\n\n\t//#endregion\n\n\tprotected rootContainer!: HTMLElement;\n\tprotected windowControlsContainer: HTMLElement | undefined;\n\n\tprotected dragRegion: HTMLElement | undefined;\n\tprivate title!: HTMLElement;\n\n\tprivate leftContent!: HTMLElement;\n\tprivate centerContent!: HTMLElement;\n\tprivate rightContent!: HTMLElement;\n\n\tprotected readonly customMenubar = this._register(new MutableDisposable<CustomMenubarControl>());\n\tprotected appIcon: HTMLElement | undefined;\n\tprivate appIconBadge: HTMLElement | undefined;\n\tprotected menubar?: HTMLElement;\n\tprivate lastLayoutDimensions: Dimension | undefined;\n\n\tprivate actionToolBar!: WorkbenchToolBar;\n\tprivate readonly actionToolBarDisposable = this._register(new DisposableStore());\n\tprivate readonly editorActionsChangeDisposable = this._register(new DisposableStore());\n\tprivate actionToolBarElement!: HTMLElement;\n\n\tprivate globalToolbarMenu: IMenu | undefined;\n\tprivate layoutToolbarMenu: IMenu | undefined;\n\n\tprivate readonly globalToolbarMenuDisposables = this._register(new DisposableStore());\n\tprivate readonly editorToolbarMenuDisposables = this._register(new DisposableStore());\n\tprivate readonly layoutToolbarMenuDisposables = this._register(new DisposableStore());\n\tprivate readonly activityToolbarDisposables = this._register(new DisposableStore());\n\n\tprivate readonly hoverDelegate: IHoverDelegate;\n\n\tprivate readonly titleDisposables = this._register(new DisposableStore());\n\tprivate titleBarStyle: TitlebarStyle;\n\n\tprivate isInactive: boolean = false;\n\n\tprivate readonly isAuxiliary: boolean;\n\tprivate isCompact = false;\n\n\tprivate readonly isCompactContextKey: IContextKey<boolean>;\n\n\tprivate readonly windowTitle: WindowTitle;\n\n\tconstructor(\n\t\tid: string,\n\t\ttargetWindow: CodeWindow,\n\t\tprivate readonly editorGroupsContainer: IEditorGroupsContainer,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IConfigurationService protected readonly configurationService: IConfigurationService,\n\t\t@IBrowserWorkbenchEnvironmentService protected readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService protected readonly contextKeyService: IContextKeyService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService\n\t) {\n\t\tsuper(id, { hasTitle: false }, themeService, storageService, layoutService);\n\n\t\tthis.isAuxiliary = targetWindow.vscodeWindowId !== mainWindow.vscodeWindowId;\n\n\t\tthis.isCompactContextKey = IsCompactTitleBarContext.bindTo(this.contextKeyService);\n\n\t\tthis.titleBarStyle = getTitleBarStyle(this.configurationService);\n\n\t\tthis.windowTitle = this._register(instantiationService.createInstance(WindowTitle, targetWindow));\n\n\t\tthis.hoverDelegate = this._register(createInstantHoverDelegate());\n\n\t\tthis.registerListeners(getWindowId(targetWindow));\n\t}\n\n\tprivate registerListeners(targetWindowId: number): void {\n\t\tthis._register(this.hostService.onDidChangeFocus(focused => focused ? this.onFocus() : this.onBlur()));\n\t\tthis._register(this.hostService.onDidChangeActiveWindow(windowId => windowId === targetWindowId ? this.onFocus() : this.onBlur()));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationChanged(e)));\n\t\tthis._register(this.editorGroupsContainer.onDidChangeEditorPartOptions(e => this.onEditorPartConfigurationChange(e)));\n\t}\n\n\tprivate onBlur(): void {\n\t\tthis.isInactive = true;\n\n\t\tthis.updateStyles();\n\t}\n\n\tprivate onFocus(): void {\n\t\tthis.isInactive = false;\n\n\t\tthis.updateStyles();\n\t}\n\n\tprivate onEditorPartConfigurationChange({ oldPartOptions, newPartOptions }: IEditorPartOptionsChangeEvent): void {\n\t\tif (\n\t\t\toldPartOptions.editorActionsLocation !== newPartOptions.editorActionsLocation ||\n\t\t\toldPartOptions.showTabs !== newPartOptions.showTabs\n\t\t) {\n\t\t\tif (hasCustomTitlebar(this.configurationService, this.titleBarStyle) && this.actionToolBar) {\n\t\t\t\tthis.createActionToolBar();\n\t\t\t\tthis.createActionToolBarMenus({ editorActions: true });\n\t\t\t\tthis._onDidChange.fire(undefined);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onConfigurationChanged(event: IConfigurationChangeEvent): void {\n\n\t\t// Custom menu bar (disabled if auxiliary)\n\t\tif (!this.isAuxiliary && !hasNativeMenu(this.configurationService, this.titleBarStyle) && (!isMacintosh || isWeb)) {\n\t\t\tif (event.affectsConfiguration(MenuSettings.MenuBarVisibility)) {\n\t\t\t\tif (this.currentMenubarVisibility === 'compact') {\n\t\t\t\t\tthis.uninstallMenubar();\n\t\t\t\t} else {\n\t\t\t\t\tthis.installMenubar();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Actions\n\t\tif (hasCustomTitlebar(this.configurationService, this.titleBarStyle) && this.actionToolBar) {\n\t\t\tconst affectsLayoutControl = event.affectsConfiguration(LayoutSettings.LAYOUT_ACTIONS);\n\t\t\tconst affectsActivityControl = event.affectsConfiguration(LayoutSettings.ACTIVITY_BAR_LOCATION);\n\n\t\t\tif (affectsLayoutControl || affectsActivityControl) {\n\t\t\t\tthis.createActionToolBarMenus({ layoutActions: affectsLayoutControl, activityActions: affectsActivityControl });\n\n\t\t\t\tthis._onDidChange.fire(undefined);\n\t\t\t}\n\t\t}\n\n\t\t// Command Center\n\t\tif (event.affectsConfiguration(LayoutSettings.COMMAND_CENTER)) {\n\t\t\tthis.recreateTitle();\n\t\t}\n\t}\n\n\tprivate recreateTitle(): void {\n\t\tthis.createTitle();\n\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\tupdateOptions(options: { compact: boolean }): void {\n\t\tconst oldIsCompact = this.isCompact;\n\t\tthis.isCompact = options.compact;\n\n\t\tthis.isCompactContextKey.set(this.isCompact);\n\n\t\tif (oldIsCompact !== this.isCompact) {\n\t\t\tthis.recreateTitle();\n\t\t\tthis.createActionToolBarMenus(true);\n\t\t}\n\t}\n\n\tprotected installMenubar(): void {\n\t\tif (this.menubar) {\n\t\t\treturn; // If the menubar is already installed, skip\n\t\t}\n\n\t\tthis.customMenubar.value = this.instantiationService.createInstance(CustomMenubarControl);\n\n\t\tthis.menubar = append(this.leftContent, $('div.menubar'));\n\t\tthis.menubar.setAttribute('role', 'menubar');\n\n\t\tthis._register(this.customMenubar.value.onVisibilityChange(e => this.onMenubarVisibilityChanged(e)));\n\n\t\tthis.customMenubar.value.create(this.menubar);\n\t}\n\n\tprivate uninstallMenubar(): void {\n\t\tthis.customMenubar.value = undefined;\n\n\t\tthis.menubar?.remove();\n\t\tthis.menubar = undefined;\n\n\t\tthis.onMenubarVisibilityChanged(false);\n\t}\n\n\tprotected onMenubarVisibilityChanged(visible: boolean): void {\n\t\tif (isWeb || isWindows || isLinux) {\n\t\t\tif (this.lastLayoutDimensions) {\n\t\t\t\tthis.layout(this.lastLayoutDimensions.width, this.lastLayoutDimensions.height);\n\t\t\t}\n\n\t\t\tthis._onMenubarVisibilityChange.fire(visible);\n\t\t}\n\t}\n\n\tupdateProperties(properties: ITitleProperties): void {\n\t\tthis.windowTitle.updateProperties(properties);\n\t}\n\n\tregisterVariables(variables: ITitleVariable[]): void {\n\t\tthis.windowTitle.registerVariables(variables);\n\t}\n\n\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\tthis.element = parent;\n\t\tthis.rootContainer = append(parent, $('.titlebar-container'));\n\n\t\tthis.leftContent = append(this.rootContainer, $('.titlebar-left'));\n\t\tthis.centerContent = append(this.rootContainer, $('.titlebar-center'));\n\t\tthis.rightContent = append(this.rootContainer, $('.titlebar-right'));\n\n\t\t// App Icon (Windows, Linux)\n\t\tif ((isWindows || isLinux) && !hasNativeTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\tthis.appIcon = prepend(this.leftContent, $('a.window-appicon'));\n\t\t}\n\n\t\t// Draggable region that we can manipulate for #52522\n\t\tthis.dragRegion = prepend(this.rootContainer, $('div.titlebar-drag-region'));\n\n\t\t// Menubar: install a custom menu bar depending on configuration\n\t\tif (\n\t\t\t!this.isAuxiliary &&\n\t\t\t!hasNativeMenu(this.configurationService, this.titleBarStyle) &&\n\t\t\t(!isMacintosh || isWeb) &&\n\t\t\tthis.currentMenubarVisibility !== 'compact'\n\t\t) {\n\t\t\tthis.installMenubar();\n\t\t}\n\n\t\t// Title\n\t\tthis.title = append(this.centerContent, $('div.window-title'));\n\t\tthis.createTitle();\n\n\t\t// Create Toolbar Actions\n\t\tif (hasCustomTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\tthis.actionToolBarElement = append(this.rightContent, $('div.action-toolbar-container'));\n\t\t\tthis.createActionToolBar();\n\t\t\tthis.createActionToolBarMenus();\n\t\t}\n\n\t\t// Window Controls Container\n\t\tif (!hasNativeTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\tlet primaryWindowControlsLocation = isMacintosh ? 'left' : 'right';\n\t\t\tif (isMacintosh && isNative) {\n\n\t\t\t\t// Check if the locale is RTL, macOS will move traffic lights in RTL locales\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/textInfo\n\n\t\t\t\tconst localeInfo = safeIntl.Locale(platformLocale).value;\n\t\t\t\tconst textInfo = (localeInfo as { textInfo?: unknown }).textInfo;\n\t\t\t\tif (textInfo && typeof textInfo === 'object' && 'direction' in textInfo && textInfo.direction === 'rtl') {\n\t\t\t\t\tprimaryWindowControlsLocation = 'right';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isMacintosh && isNative && primaryWindowControlsLocation === 'left') {\n\t\t\t\t// macOS native: controls are on the left and the container is not needed to make room\n\t\t\t\t// for something, except for web where a custom menu being supported). not putting the\n\t\t\t\t// container helps with allowing to move the window when clicking very close to the\n\t\t\t\t// window control buttons.\n\t\t\t} else if (getWindowControlsStyle(this.configurationService) === WindowControlsStyle.HIDDEN) {\n\t\t\t\t// Linux/Windows: controls are explicitly disabled\n\t\t\t} else {\n\t\t\t\tthis.windowControlsContainer = append(primaryWindowControlsLocation === 'left' ? this.leftContent : this.rightContent, $('div.window-controls-container'));\n\t\t\t\tif (isWeb) {\n\t\t\t\t\t// Web: its possible to have control overlays on both sides, for example on macOS\n\t\t\t\t\t// with window controls on the left and PWA controls on the right.\n\t\t\t\t\tappend(primaryWindowControlsLocation === 'left' ? this.rightContent : this.leftContent, $('div.window-controls-container'));\n\t\t\t\t}\n\n\t\t\t\tif (isWCOEnabled()) {\n\t\t\t\t\tthis.windowControlsContainer.classList.add('wco-enabled');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Context menu over title bar: depending on the OS and the location of the click this will either be\n\t\t// the overall context menu for the entire title bar or a specific title context menu.\n\t\t// Windows / Linux: we only support the overall context menu on the title bar\n\t\t// macOS: we support both the overall context menu and the title context menu.\n\t\t//        in addition, we allow Cmd+click to bring up the title context menu.\n\t\t{\n\t\t\tthis._register(addDisposableListener(this.rootContainer, EventType.CONTEXT_MENU, e => {\n\t\t\t\tEventHelper.stop(e);\n\n\t\t\t\tlet targetMenu: MenuId;\n\t\t\t\tif (isMacintosh && isHTMLElement(e.target) && isAncestor(e.target, this.title)) {\n\t\t\t\t\ttargetMenu = MenuId.TitleBarTitleContext;\n\t\t\t\t} else {\n\t\t\t\t\ttargetMenu = MenuId.TitleBarContext;\n\t\t\t\t}\n\n\t\t\t\tthis.onContextMenu(e, targetMenu);\n\t\t\t}));\n\n\t\t\tif (isMacintosh) {\n\t\t\t\tthis._register(addDisposableListener(this.title, EventType.MOUSE_DOWN, e => {\n\t\t\t\t\tif (e.metaKey) {\n\t\t\t\t\t\tEventHelper.stop(e, true /* stop bubbling to prevent command center from opening */);\n\n\t\t\t\t\t\tthis.onContextMenu(e, MenuId.TitleBarTitleContext);\n\t\t\t\t\t}\n\t\t\t\t}, true /* capture phase to prevent command center from opening */));\n\t\t\t}\n\t\t}\n\n\t\tthis.updateStyles();\n\n\t\treturn this.element;\n\t}\n\n\tprivate createTitle(): void {\n\t\tthis.titleDisposables.clear();\n\n\t\tconst isShowingTitleInNativeTitlebar = hasNativeTitlebar(this.configurationService, this.titleBarStyle);\n\n\t\t// Text Title\n\t\tif (!this.isCommandCenterVisible) {\n\t\t\tif (!isShowingTitleInNativeTitlebar) {\n\t\t\t\tthis.title.textContent = this.windowTitle.value;\n\t\t\t\tthis.titleDisposables.add(this.windowTitle.onDidChange(() => {\n\t\t\t\t\tthis.title.textContent = this.windowTitle.value;\n\t\t\t\t\tif (this.lastLayoutDimensions) {\n\t\t\t\t\t\tthis.updateLayout(this.lastLayoutDimensions); // layout menubar and other renderings in the titlebar\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\treset(this.title);\n\t\t\t}\n\t\t}\n\n\t\t// Menu Title\n\t\telse {\n\t\t\tconst commandCenter = this.instantiationService.createInstance(CommandCenterControl, this.windowTitle, this.hoverDelegate);\n\t\t\treset(this.title, commandCenter.element);\n\t\t\tthis.titleDisposables.add(commandCenter);\n\t\t}\n\t}\n\n\tprivate actionViewItemProvider(action: IAction, options: IBaseActionViewItemOptions): IActionViewItem | undefined {\n\n\t\t// --- Activity Actions\n\t\tif (!this.isAuxiliary) {\n\t\t\tif (action.id === GLOBAL_ACTIVITY_ID) {\n\t\t\t\treturn this.instantiationService.createInstance(SimpleGlobalActivityActionViewItem, { position: () => HoverPosition.BELOW }, options);\n\t\t\t}\n\t\t\tif (action.id === ACCOUNTS_ACTIVITY_ID) {\n\t\t\t\treturn this.instantiationService.createInstance(SimpleAccountActivityActionViewItem, { position: () => HoverPosition.BELOW }, options);\n\t\t\t}\n\t\t}\n\n\t\t// --- Editor Actions\n\t\tconst activeEditorPane = this.editorGroupsContainer.activeGroup?.activeEditorPane;\n\t\tif (activeEditorPane && activeEditorPane instanceof EditorPane) {\n\t\t\tconst result = activeEditorPane.getActionViewItem(action, options);\n\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\t// Check extensions\n\t\treturn createActionViewItem(this.instantiationService, action, { ...options, menuAsChild: false });\n\t}\n\n\tprivate getKeybinding(action: IAction): ResolvedKeybinding | undefined {\n\t\tconst editorPaneAwareContextKeyService = this.editorGroupsContainer.activeGroup?.activeEditorPane?.scopedContextKeyService ?? this.contextKeyService;\n\n\t\treturn this.keybindingService.lookupKeybinding(action.id, editorPaneAwareContextKeyService);\n\t}\n\n\tprivate createActionToolBar(): void {\n\n\t\t// Creates the action tool bar. Depends on the configuration of the title bar menus\n\t\t// Requires to be recreated whenever editor actions enablement changes\n\n\t\tthis.actionToolBarDisposable.clear();\n\n\t\tthis.actionToolBar = this.actionToolBarDisposable.add(this.instantiationService.createInstance(WorkbenchToolBar, this.actionToolBarElement, {\n\t\t\tcontextMenu: MenuId.TitleBarContext,\n\t\t\torientation: ActionsOrientation.HORIZONTAL,\n\t\t\tariaLabel: localize('ariaLabelTitleActions', \"Title actions\"),\n\t\t\tgetKeyBinding: action => this.getKeybinding(action),\n\t\t\toverflowBehavior: { maxItems: 9, exempted: [ACCOUNTS_ACTIVITY_ID, GLOBAL_ACTIVITY_ID, ...EDITOR_CORE_NAVIGATION_COMMANDS] },\n\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT,\n\t\t\ttelemetrySource: 'titlePart',\n\t\t\thighlightToggledItems: this.editorActionsEnabled || this.isAuxiliary, // Only show toggled state for editor actions or auxiliary title bars\n\t\t\tactionViewItemProvider: (action, options) => this.actionViewItemProvider(action, options),\n\t\t\thoverDelegate: this.hoverDelegate\n\t\t}));\n\n\t\tif (this.editorActionsEnabled) {\n\t\t\tthis.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(() => this.createActionToolBarMenus({ editorActions: true })));\n\t\t}\n\t}\n\n\tprivate createActionToolBarMenus(update: true | { editorActions?: boolean; layoutActions?: boolean; globalActions?: boolean; activityActions?: boolean } = true): void {\n\t\tif (update === true) {\n\t\t\tupdate = { editorActions: true, layoutActions: true, globalActions: true, activityActions: true };\n\t\t}\n\n\t\tconst updateToolBarActions = () => {\n\t\t\tconst actions: IToolbarActions = { primary: [], secondary: [] };\n\n\t\t\t// --- Editor Actions\n\t\t\tif (this.editorActionsEnabled) {\n\t\t\t\tthis.editorActionsChangeDisposable.clear();\n\n\t\t\t\tconst activeGroup = this.editorGroupsContainer.activeGroup;\n\t\t\t\tif (activeGroup) {\n\t\t\t\t\tconst editorActions = activeGroup.createEditorActions(this.editorActionsChangeDisposable, this.isAuxiliary && this.isCompact ? MenuId.CompactWindowEditorTitle : MenuId.EditorTitle);\n\n\t\t\t\t\tactions.primary.push(...editorActions.actions.primary);\n\t\t\t\t\tactions.secondary.push(...editorActions.actions.secondary);\n\n\t\t\t\t\tthis.editorActionsChangeDisposable.add(editorActions.onDidChange(() => updateToolBarActions()));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// --- Global Actions\n\t\t\tif (this.globalToolbarMenu) {\n\t\t\t\tfillInActionBarActions(\n\t\t\t\t\tthis.globalToolbarMenu.getActions(),\n\t\t\t\t\tactions\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// --- Layout Actions\n\t\t\tif (this.layoutToolbarMenu) {\n\t\t\t\tfillInActionBarActions(\n\t\t\t\t\tthis.layoutToolbarMenu.getActions(),\n\t\t\t\t\tactions,\n\t\t\t\t\t() => !this.editorActionsEnabled || this.isCompact // layout actions move to \"...\" if editor actions are enabled unless compact\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// --- Activity Actions (always at the end)\n\t\t\tif (this.activityActionsEnabled) {\n\t\t\t\tif (isAccountsActionVisible(this.storageService)) {\n\t\t\t\t\tactions.primary.push(ACCOUNTS_ACTIVITY_TILE_ACTION);\n\t\t\t\t}\n\n\t\t\t\tactions.primary.push(GLOBAL_ACTIVITY_TITLE_ACTION);\n\t\t\t}\n\n\t\t\tthis.actionToolBar.setActions(prepareActions(actions.primary), prepareActions(actions.secondary));\n\t\t};\n\n\t\t// Create/Update the menus which should be in the title tool bar\n\n\t\tif (update.editorActions) {\n\t\t\tthis.editorToolbarMenuDisposables.clear();\n\n\t\t\t// The editor toolbar menu is handled by the editor group so we do not need to manage it here.\n\t\t\t// However, depending on the active editor, we need to update the context and action runner of the toolbar menu.\n\t\t\tif (this.editorActionsEnabled && this.editorService.activeEditor !== undefined) {\n\t\t\t\tconst context: IEditorCommandsContext = { groupId: this.editorGroupsContainer.activeGroup.id };\n\n\t\t\t\tthis.actionToolBar.actionRunner = this.editorToolbarMenuDisposables.add(new EditorCommandsContextActionRunner(context));\n\t\t\t\tthis.actionToolBar.context = context;\n\t\t\t} else {\n\t\t\t\tthis.actionToolBar.actionRunner = this.editorToolbarMenuDisposables.add(new ActionRunner());\n\t\t\t\tthis.actionToolBar.context = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (update.layoutActions) {\n\t\t\tthis.layoutToolbarMenuDisposables.clear();\n\n\t\t\tif (this.layoutControlEnabled) {\n\t\t\t\tthis.layoutToolbarMenu = this.menuService.createMenu(MenuId.LayoutControlMenu, this.contextKeyService);\n\n\t\t\t\tthis.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu);\n\t\t\t\tthis.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(() => updateToolBarActions()));\n\t\t\t} else {\n\t\t\t\tthis.layoutToolbarMenu = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (update.globalActions) {\n\t\t\tthis.globalToolbarMenuDisposables.clear();\n\n\t\t\tif (this.globalActionsEnabled) {\n\t\t\t\tthis.globalToolbarMenu = this.menuService.createMenu(MenuId.TitleBar, this.contextKeyService);\n\n\t\t\t\tthis.globalToolbarMenuDisposables.add(this.globalToolbarMenu);\n\t\t\t\tthis.globalToolbarMenuDisposables.add(this.globalToolbarMenu.onDidChange(() => updateToolBarActions()));\n\t\t\t} else {\n\t\t\t\tthis.globalToolbarMenu = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (update.activityActions) {\n\t\t\tthis.activityToolbarDisposables.clear();\n\t\t\tif (this.activityActionsEnabled) {\n\t\t\t\tthis.activityToolbarDisposables.add(this.storageService.onDidChangeValue(StorageScope.PROFILE, AccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY, this._store)(() => updateToolBarActions()));\n\t\t\t}\n\t\t}\n\n\t\tupdateToolBarActions();\n\t}\n\n\toverride updateStyles(): void {\n\t\tsuper.updateStyles();\n\n\t\t// Part container\n\t\tif (this.element) {\n\t\t\tif (this.isInactive) {\n\t\t\t\tthis.element.classList.add('inactive');\n\t\t\t} else {\n\t\t\t\tthis.element.classList.remove('inactive');\n\t\t\t}\n\n\t\t\tconst titleBackground = this.getColor(this.isInactive ? TITLE_BAR_INACTIVE_BACKGROUND : TITLE_BAR_ACTIVE_BACKGROUND, (color, theme) => {\n\t\t\t\t// LCD Rendering Support: the title bar part is a defining its own GPU layer.\n\t\t\t\t// To benefit from LCD font rendering, we must ensure that we always set an\n\t\t\t\t// opaque background color. As such, we compute an opaque color given we know\n\t\t\t\t// the background color is the workbench background.\n\t\t\t\treturn color.isOpaque() ? color : color.makeOpaque(WORKBENCH_BACKGROUND(theme));\n\t\t\t}) || '';\n\t\t\tthis.element.style.backgroundColor = titleBackground;\n\n\t\t\tif (this.appIconBadge) {\n\t\t\t\tthis.appIconBadge.style.backgroundColor = titleBackground;\n\t\t\t}\n\n\t\t\tif (titleBackground && Color.fromHex(titleBackground).isLighter()) {\n\t\t\t\tthis.element.classList.add('light');\n\t\t\t} else {\n\t\t\t\tthis.element.classList.remove('light');\n\t\t\t}\n\n\t\t\tconst titleForeground = this.getColor(this.isInactive ? TITLE_BAR_INACTIVE_FOREGROUND : TITLE_BAR_ACTIVE_FOREGROUND);\n\t\t\tthis.element.style.color = titleForeground || '';\n\n\t\t\tconst titleBorder = this.getColor(TITLE_BAR_BORDER);\n\t\t\tthis.element.style.borderBottom = titleBorder ? `1px solid ${titleBorder}` : '';\n\t\t}\n\t}\n\n\tprotected onContextMenu(e: MouseEvent, menuId: MenuId): void {\n\t\tconst event = new StandardMouseEvent(getWindow(this.element), e);\n\n\t\t// Show it\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => event,\n\t\t\tmenuId,\n\t\t\tcontextKeyService: this.contextKeyService,\n\t\t\tdomForShadowRoot: isMacintosh && isNative ? event.target : undefined\n\t\t});\n\t}\n\n\tprotected get currentMenubarVisibility(): MenuBarVisibility {\n\t\tif (this.isAuxiliary) {\n\t\t\treturn 'hidden';\n\t\t}\n\n\t\treturn getMenuBarVisibility(this.configurationService);\n\t}\n\n\tprivate get layoutControlEnabled(): boolean {\n\t\treturn this.configurationService.getValue<boolean>(LayoutSettings.LAYOUT_ACTIONS) !== false;\n\t}\n\n\tprotected get isCommandCenterVisible() {\n\t\treturn !this.isCompact && this.configurationService.getValue<boolean>(LayoutSettings.COMMAND_CENTER) !== false;\n\t}\n\n\tprivate get editorActionsEnabled(): boolean {\n\t\treturn (this.editorGroupsContainer.partOptions.editorActionsLocation === EditorActionsLocation.TITLEBAR ||\n\t\t\t(\n\t\t\t\tthis.editorGroupsContainer.partOptions.editorActionsLocation === EditorActionsLocation.DEFAULT &&\n\t\t\t\tthis.editorGroupsContainer.partOptions.showTabs === EditorTabsMode.NONE\n\t\t\t));\n\t}\n\n\tprivate get activityActionsEnabled(): boolean {\n\t\tconst activityBarPosition = this.configurationService.getValue<ActivityBarPosition>(LayoutSettings.ACTIVITY_BAR_LOCATION);\n\t\treturn !this.isCompact && !this.isAuxiliary && (activityBarPosition === ActivityBarPosition.TOP || activityBarPosition === ActivityBarPosition.BOTTOM);\n\t}\n\n\tprivate get globalActionsEnabled(): boolean {\n\t\treturn !this.isCompact;\n\t}\n\n\tget hasZoomableElements(): boolean {\n\t\tconst hasMenubar = !(this.currentMenubarVisibility === 'hidden' || this.currentMenubarVisibility === 'compact' || (!isWeb && isMacintosh));\n\t\tconst hasCommandCenter = this.isCommandCenterVisible;\n\t\tconst hasToolBarActions = this.globalActionsEnabled || this.layoutControlEnabled || this.editorActionsEnabled || this.activityActionsEnabled;\n\t\treturn hasMenubar || hasCommandCenter || hasToolBarActions;\n\t}\n\n\tget preventZoom(): boolean {\n\t\t// Prevent zooming behavior if any of the following conditions are met:\n\t\t// 1. Shrinking below the window control size (zoom < 1)\n\t\t// 2. No custom items are present in the title bar\n\n\t\treturn getZoomFactor(getWindow(this.element)) < 1 || !this.hasZoomableElements;\n\t}\n\n\toverride layout(width: number, height: number): void {\n\t\tthis.updateLayout(new Dimension(width, height));\n\n\t\tsuper.layoutContents(width, height);\n\t}\n\n\tprivate updateLayout(dimension: Dimension): void {\n\t\tthis.lastLayoutDimensions = dimension;\n\n\t\tif (!hasCustomTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst zoomFactor = getZoomFactor(getWindow(this.element));\n\n\t\tthis.element.style.setProperty('--zoom-factor', zoomFactor.toString());\n\t\tthis.rootContainer.classList.toggle('counter-zoom', this.preventZoom);\n\n\t\tif (this.customMenubar.value) {\n\t\t\tconst menubarDimension = new Dimension(0, dimension.height);\n\t\t\tthis.customMenubar.value.layout(menubarDimension);\n\t\t}\n\n\t\tconst hasCenter = this.isCommandCenterVisible || this.title.textContent !== '';\n\t\tthis.rootContainer.classList.toggle('has-center', hasCenter);\n\t}\n\n\tfocus(): void {\n\t\tif (this.customMenubar.value) {\n\t\t\tthis.customMenubar.value.toggleFocus();\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t(this.element.querySelector('[tabindex]:not([tabindex=\"-1\"])') as HTMLElement | null)?.focus();\n\t\t}\n\t}\n\n\ttoJSON(): object {\n\t\treturn {\n\t\t\ttype: Parts.TITLEBAR_PART\n\t\t};\n\t}\n\n\toverride dispose(): void {\n\t\tthis._onWillDispose.fire();\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class MainBrowserTitlebarPart extends BrowserTitlebarPart {\n\n\tconstructor(\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(Parts.TITLEBAR_PART, mainWindow, editorGroupService.mainPart, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, editorService, menuService, keybindingService);\n\t}\n}\n\nexport interface IAuxiliaryTitlebarPart extends ITitlebarPart, IView {\n\treadonly container: HTMLElement;\n\treadonly height: number;\n\n\tupdateOptions(options: { compact: boolean }): void;\n}\n\nexport class AuxiliaryBrowserTitlebarPart extends BrowserTitlebarPart implements IAuxiliaryTitlebarPart {\n\n\tprivate static COUNTER = 1;\n\n\tget height() { return this.minimumHeight; }\n\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t\tprivate readonly mainTitlebar: BrowserTitlebarPart,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t) {\n\t\tconst id = AuxiliaryBrowserTitlebarPart.COUNTER++;\n\t\tsuper(`workbench.parts.auxiliaryTitle.${id}`, getWindow(container), editorGroupsContainer, contextMenuService, configurationService, environmentService, instantiationService, themeService, storageService, layoutService, contextKeyService, hostService, editorService, menuService, keybindingService);\n\t}\n\n\toverride get preventZoom(): boolean {\n\n\t\t// Prevent zooming behavior if any of the following conditions are met:\n\t\t// 1. Shrinking below the window control size (zoom < 1)\n\t\t// 2. No custom items are present in the main title bar\n\t\t// The auxiliary title bar never contains any zoomable items itself,\n\t\t// but we want to match the behavior of the main title bar.\n\n\t\treturn getZoomFactor(getWindow(this.element)) < 1 || !this.mainTitlebar.hasZoomableElements;\n\t}\n}\n"]}