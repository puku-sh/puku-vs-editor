{"version":3,"sources":["vs/workbench/browser/parts/notifications/notificationAccessibleView.ts"],"names":[],"mappings":"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","file":"notificationAccessibleView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nimport { IAccessibleViewService, AccessibleViewProviderId, AccessibleViewType, AccessibleContentProvider } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { IAccessibilitySignalService, AccessibilitySignal } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IListService, WorkbenchList } from '../../../../platform/list/browser/listService.js';\nimport { getNotificationFromContext } from './notificationsCommands.js';\nimport { NotificationFocusedContext } from '../../../common/contextkeys.js';\nimport { INotificationViewItem } from '../../../common/notifications.js';\nimport { withSeverityPrefix } from '../../../../platform/notification/common/notification.js';\n\nexport class NotificationAccessibleView implements IAccessibleViewImplementation {\n\treadonly priority = 90;\n\treadonly name = 'notifications';\n\treadonly when = NotificationFocusedContext;\n\treadonly type = AccessibleViewType.View;\n\tgetProvider(accessor: ServicesAccessor) {\n\t\tconst accessibleViewService = accessor.get(IAccessibleViewService);\n\t\tconst listService = accessor.get(IListService);\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst accessibilitySignalService = accessor.get(IAccessibilitySignalService);\n\n\t\tfunction getProvider() {\n\t\t\tconst notification = getNotificationFromContext(listService);\n\t\t\tif (!notification) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcommandService.executeCommand('notifications.showList');\n\t\t\tlet notificationIndex: number | undefined;\n\t\t\tconst list = listService.lastFocusedList;\n\t\t\tif (list instanceof WorkbenchList) {\n\t\t\t\tnotificationIndex = list.indexOf(notification);\n\t\t\t}\n\t\t\tif (notificationIndex === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction focusList(): void {\n\t\t\t\tcommandService.executeCommand('notifications.showList');\n\t\t\t\tif (list && notificationIndex !== undefined) {\n\t\t\t\t\tlist.domFocus();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlist.setFocus([notificationIndex]);\n\t\t\t\t\t} catch { }\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getContentForNotification(): string | undefined {\n\t\t\t\tconst notification = getNotificationFromContext(listService);\n\t\t\t\tconst message = notification?.message.original.toString();\n\t\t\t\tif (!notification || !message) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn withSeverityPrefix(notification.source ? localize('notification.accessibleViewSrc', '{0} Source: {1}', message, notification.source) : message, notification.severity);\n\t\t\t}\n\t\t\tconst content = getContentForNotification();\n\t\t\tif (!content) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnotification.onDidClose(() => accessibleViewService.next());\n\t\t\treturn new AccessibleContentProvider(\n\t\t\t\tAccessibleViewProviderId.Notification,\n\t\t\t\t{ type: AccessibleViewType.View },\n\t\t\t\t() => content,\n\t\t\t\t() => focusList(),\n\t\t\t\t'accessibility.verbosity.notification',\n\t\t\t\tundefined,\n\t\t\t\tgetActionsFromNotification(notification, accessibilitySignalService),\n\t\t\t\t() => {\n\t\t\t\t\tif (!list) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfocusList();\n\t\t\t\t\tlist.focusNext();\n\t\t\t\t\treturn getContentForNotification();\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tif (!list) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfocusList();\n\t\t\t\t\tlist.focusPrevious();\n\t\t\t\t\treturn getContentForNotification();\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\treturn getProvider();\n\t}\n}\n\n\nfunction getActionsFromNotification(notification: INotificationViewItem, accessibilitySignalService: IAccessibilitySignalService): IAction[] | undefined {\n\tlet actions = undefined;\n\tif (notification.actions) {\n\t\tactions = [];\n\t\tif (notification.actions.primary) {\n\t\t\tactions.push(...notification.actions.primary);\n\t\t}\n\t\tif (notification.actions.secondary) {\n\t\t\tactions.push(...notification.actions.secondary);\n\t\t}\n\t}\n\tif (actions) {\n\t\tfor (const action of actions) {\n\t\t\taction.class = ThemeIcon.asClassName(Codicon.bell);\n\t\t\tconst initialAction = action.run;\n\t\t\taction.run = () => {\n\t\t\t\tinitialAction();\n\t\t\t\tnotification.close();\n\t\t\t};\n\t\t}\n\t}\n\tconst manageExtension = actions?.find(a => a.label.includes('Manage Extension'));\n\tif (manageExtension) {\n\t\tmanageExtension.class = ThemeIcon.asClassName(Codicon.gear);\n\t}\n\tif (actions) {\n\t\tactions.push({\n\t\t\tid: 'clearNotification', label: localize('clearNotification', \"Clear Notification\"), tooltip: localize('clearNotification', \"Clear Notification\"), run: () => {\n\t\t\t\tnotification.close();\n\t\t\t\taccessibilitySignalService.playSignal(AccessibilitySignal.clear);\n\t\t\t}, enabled: true, class: ThemeIcon.asClassName(Codicon.clearAll)\n\t\t});\n\t}\n\treturn actions;\n}\n\n"]}