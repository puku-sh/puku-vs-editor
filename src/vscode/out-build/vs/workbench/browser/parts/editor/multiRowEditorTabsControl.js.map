{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/browser/parts/editor/multiRowEditorTabsControl.ts","vs/workbench/browser/parts/editor/multiRowEditorTabsControl.ts"],"names":[],"mappings":"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","file":"multiRowEditorTabsControl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorGroupsView, IEditorGroupView, IEditorPartsView, IInternalEditorOpenOptions } from './editor.js';\nimport { IEditorTabsControl } from './editorTabsControl.js';\nimport { MultiEditorTabsControl } from './multiEditorTabsControl.js';\nimport { IEditorPartOptions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { StickyEditorGroupModel, UnstickyEditorGroupModel } from '../../../common/editor/filteredEditorGroupModel.js';\nimport { IEditorTitleControlDimensions } from './editorTitleControl.js';\nimport { IReadonlyEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\n\nexport class MultiRowEditorControl extends Disposable implements IEditorTabsControl {\n\n\tprivate readonly stickyEditorTabsControl: IEditorTabsControl;\n\tprivate readonly unstickyEditorTabsControl: IEditorTabsControl;\n\n\tprivate activeControl: IEditorTabsControl | undefined;\n\n\tconstructor(\n\t\tprivate readonly parent: HTMLElement,\n\t\teditorPartsView: IEditorPartsView,\n\t\tprivate readonly groupsView: IEditorGroupsView,\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\tprivate readonly model: IReadonlyEditorGroupModel,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\n\t\tconst stickyModel = this._register(new StickyEditorGroupModel(this.model));\n\t\tconst unstickyModel = this._register(new UnstickyEditorGroupModel(this.model));\n\n\t\tthis.stickyEditorTabsControl = this._register(this.instantiationService.createInstance(MultiEditorTabsControl, this.parent, editorPartsView, this.groupsView, this.groupView, stickyModel));\n\t\tthis.unstickyEditorTabsControl = this._register(this.instantiationService.createInstance(MultiEditorTabsControl, this.parent, editorPartsView, this.groupsView, this.groupView, unstickyModel));\n\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tprivate handleTabBarsStateChange(): void {\n\t\tthis.activeControl = this.model.activeEditor ? this.getEditorTabsController(this.model.activeEditor) : undefined;\n\t\tthis.handleTabBarsLayoutChange();\n\t}\n\n\tprivate handleTabBarsLayoutChange(): void {\n\t\tif (this.groupView.count === 0) {\n\t\t\t// Do nothing as no tab bar is visible\n\t\t\treturn;\n\t\t}\n\n\t\tconst hadTwoTabBars = this.parent.classList.contains('two-tab-bars');\n\t\tconst hasTwoTabBars = this.groupView.count !== this.groupView.stickyCount && this.groupView.stickyCount > 0;\n\n\t\t// Ensure action toolbar is only visible once\n\t\tthis.parent.classList.toggle('two-tab-bars', hasTwoTabBars);\n\n\t\tif (hadTwoTabBars !== hasTwoTabBars) {\n\t\t\tthis.groupView.relayout();\n\t\t}\n\t}\n\n\tprivate didActiveControlChange() {\n\t\treturn this.activeControl !== (this.model.activeEditor ? this.getEditorTabsController(this.model.activeEditor) : undefined);\n\t}\n\n\tprivate getEditorTabsController(editor: EditorInput): IEditorTabsControl {\n\t\treturn this.model.isSticky(editor) ? this.stickyEditorTabsControl : this.unstickyEditorTabsControl;\n\t}\n\n\topenEditor(editor: EditorInput, options: IInternalEditorOpenOptions): boolean {\n\t\tconst didActiveControlChange = this.didActiveControlChange();\n\t\tconst didOpenEditorChange = this.getEditorTabsController(editor).openEditor(editor, options);\n\n\t\tconst didChange = didOpenEditorChange || didActiveControlChange;\n\t\tif (didChange) {\n\t\t\tthis.handleOpenedEditors();\n\t\t}\n\t\treturn didChange;\n\t}\n\n\topenEditors(editors: EditorInput[]): boolean {\n\t\tconst stickyEditors = editors.filter(e => this.model.isSticky(e));\n\t\tconst unstickyEditors = editors.filter(e => !this.model.isSticky(e));\n\n\t\tconst didActiveControlChange = this.didActiveControlChange();\n\t\tconst didChangeOpenEditorsSticky = this.stickyEditorTabsControl.openEditors(stickyEditors);\n\t\tconst didChangeOpenEditorsUnSticky = this.unstickyEditorTabsControl.openEditors(unstickyEditors);\n\n\t\tconst didChange = didChangeOpenEditorsSticky || didChangeOpenEditorsUnSticky || didActiveControlChange;\n\t\tif (didChange) {\n\t\t\tthis.handleOpenedEditors();\n\t\t}\n\n\t\treturn didChange;\n\t}\n\n\tprivate handleOpenedEditors(): void {\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).beforeCloseEditor(editor);\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\t// Has to be called on both tab bars as the editor could be either sticky or not\n\t\tthis.stickyEditorTabsControl.closeEditor(editor);\n\t\tthis.unstickyEditorTabsControl.closeEditor(editor);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tconst stickyEditors = editors.filter(e => this.model.isSticky(e));\n\t\tconst unstickyEditors = editors.filter(e => !this.model.isSticky(e));\n\n\t\tthis.stickyEditorTabsControl.closeEditors(stickyEditors);\n\t\tthis.unstickyEditorTabsControl.closeEditors(unstickyEditors);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tmoveEditor(editor: EditorInput, fromIndex: number, targetIndex: number, stickyStateChange: boolean): void {\n\t\tif (stickyStateChange) {\n\t\t\t// If sticky state changes, move editor between tab bars\n\t\t\tif (this.model.isSticky(editor)) {\n\t\t\t\tthis.stickyEditorTabsControl.openEditor(editor);\n\t\t\t\tthis.unstickyEditorTabsControl.closeEditor(editor);\n\t\t\t} else {\n\t\t\t\tthis.stickyEditorTabsControl.closeEditor(editor);\n\t\t\t\tthis.unstickyEditorTabsControl.openEditor(editor);\n\t\t\t}\n\n\t\t\tthis.handleTabBarsStateChange();\n\n\t\t} else {\n\t\t\tif (this.model.isSticky(editor)) {\n\t\t\t\tthis.stickyEditorTabsControl.moveEditor(editor, fromIndex, targetIndex, stickyStateChange);\n\t\t\t} else {\n\t\t\t\tthis.unstickyEditorTabsControl.moveEditor(editor, fromIndex - this.model.stickyCount, targetIndex - this.model.stickyCount, stickyStateChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).pinEditor(editor);\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\tthis.unstickyEditorTabsControl.closeEditor(editor);\n\t\tthis.stickyEditorTabsControl.openEditor(editor);\n\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\tthis.stickyEditorTabsControl.closeEditor(editor);\n\t\tthis.unstickyEditorTabsControl.openEditor(editor);\n\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tsetActive(isActive: boolean): void {\n\t\tthis.stickyEditorTabsControl.setActive(isActive);\n\t\tthis.unstickyEditorTabsControl.setActive(isActive);\n\t}\n\n\tupdateEditorSelections(): void {\n\t\tthis.stickyEditorTabsControl.updateEditorSelections();\n\t\tthis.unstickyEditorTabsControl.updateEditorSelections();\n\t}\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).updateEditorLabel(editor);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).updateEditorDirty(editor);\n\t}\n\n\tupdateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\tthis.stickyEditorTabsControl.updateOptions(oldOptions, newOptions);\n\t\tthis.unstickyEditorTabsControl.updateOptions(oldOptions, newOptions);\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions): Dimension {\n\t\tconst stickyDimensions = this.stickyEditorTabsControl.layout(dimensions);\n\t\tconst unstickyAvailableDimensions = {\n\t\t\tcontainer: dimensions.container,\n\t\t\tavailable: new Dimension(dimensions.available.width, dimensions.available.height - stickyDimensions.height)\n\t\t};\n\t\tconst unstickyDimensions = this.unstickyEditorTabsControl.layout(unstickyAvailableDimensions);\n\n\t\treturn new Dimension(\n\t\t\tdimensions.container.width,\n\t\t\tstickyDimensions.height + unstickyDimensions.height\n\t\t);\n\t}\n\n\tgetHeight(): number {\n\t\treturn this.stickyEditorTabsControl.getHeight() + this.unstickyEditorTabsControl.getHeight();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.parent.classList.toggle('two-tab-bars', false);\n\n\t\tsuper.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorGroupsView, IEditorGroupView, IEditorPartsView, IInternalEditorOpenOptions } from './editor.js';\nimport { IEditorTabsControl } from './editorTabsControl.js';\nimport { MultiEditorTabsControl } from './multiEditorTabsControl.js';\nimport { IEditorPartOptions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { StickyEditorGroupModel, UnstickyEditorGroupModel } from '../../../common/editor/filteredEditorGroupModel.js';\nimport { IEditorTitleControlDimensions } from './editorTitleControl.js';\nimport { IReadonlyEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\n\nexport class MultiRowEditorControl extends Disposable implements IEditorTabsControl {\n\n\tprivate readonly stickyEditorTabsControl: IEditorTabsControl;\n\tprivate readonly unstickyEditorTabsControl: IEditorTabsControl;\n\n\tprivate activeControl: IEditorTabsControl | undefined;\n\n\tconstructor(\n\t\tprivate readonly parent: HTMLElement,\n\t\teditorPartsView: IEditorPartsView,\n\t\tprivate readonly groupsView: IEditorGroupsView,\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\tprivate readonly model: IReadonlyEditorGroupModel,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\n\t\tconst stickyModel = this._register(new StickyEditorGroupModel(this.model));\n\t\tconst unstickyModel = this._register(new UnstickyEditorGroupModel(this.model));\n\n\t\tthis.stickyEditorTabsControl = this._register(this.instantiationService.createInstance(MultiEditorTabsControl, this.parent, editorPartsView, this.groupsView, this.groupView, stickyModel));\n\t\tthis.unstickyEditorTabsControl = this._register(this.instantiationService.createInstance(MultiEditorTabsControl, this.parent, editorPartsView, this.groupsView, this.groupView, unstickyModel));\n\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tprivate handleTabBarsStateChange(): void {\n\t\tthis.activeControl = this.model.activeEditor ? this.getEditorTabsController(this.model.activeEditor) : undefined;\n\t\tthis.handleTabBarsLayoutChange();\n\t}\n\n\tprivate handleTabBarsLayoutChange(): void {\n\t\tif (this.groupView.count === 0) {\n\t\t\t// Do nothing as no tab bar is visible\n\t\t\treturn;\n\t\t}\n\n\t\tconst hadTwoTabBars = this.parent.classList.contains('two-tab-bars');\n\t\tconst hasTwoTabBars = this.groupView.count !== this.groupView.stickyCount && this.groupView.stickyCount > 0;\n\n\t\t// Ensure action toolbar is only visible once\n\t\tthis.parent.classList.toggle('two-tab-bars', hasTwoTabBars);\n\n\t\tif (hadTwoTabBars !== hasTwoTabBars) {\n\t\t\tthis.groupView.relayout();\n\t\t}\n\t}\n\n\tprivate didActiveControlChange() {\n\t\treturn this.activeControl !== (this.model.activeEditor ? this.getEditorTabsController(this.model.activeEditor) : undefined);\n\t}\n\n\tprivate getEditorTabsController(editor: EditorInput): IEditorTabsControl {\n\t\treturn this.model.isSticky(editor) ? this.stickyEditorTabsControl : this.unstickyEditorTabsControl;\n\t}\n\n\topenEditor(editor: EditorInput, options: IInternalEditorOpenOptions): boolean {\n\t\tconst didActiveControlChange = this.didActiveControlChange();\n\t\tconst didOpenEditorChange = this.getEditorTabsController(editor).openEditor(editor, options);\n\n\t\tconst didChange = didOpenEditorChange || didActiveControlChange;\n\t\tif (didChange) {\n\t\t\tthis.handleOpenedEditors();\n\t\t}\n\t\treturn didChange;\n\t}\n\n\topenEditors(editors: EditorInput[]): boolean {\n\t\tconst stickyEditors = editors.filter(e => this.model.isSticky(e));\n\t\tconst unstickyEditors = editors.filter(e => !this.model.isSticky(e));\n\n\t\tconst didActiveControlChange = this.didActiveControlChange();\n\t\tconst didChangeOpenEditorsSticky = this.stickyEditorTabsControl.openEditors(stickyEditors);\n\t\tconst didChangeOpenEditorsUnSticky = this.unstickyEditorTabsControl.openEditors(unstickyEditors);\n\n\t\tconst didChange = didChangeOpenEditorsSticky || didChangeOpenEditorsUnSticky || didActiveControlChange;\n\t\tif (didChange) {\n\t\t\tthis.handleOpenedEditors();\n\t\t}\n\n\t\treturn didChange;\n\t}\n\n\tprivate handleOpenedEditors(): void {\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).beforeCloseEditor(editor);\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\t// Has to be called on both tab bars as the editor could be either sticky or not\n\t\tthis.stickyEditorTabsControl.closeEditor(editor);\n\t\tthis.unstickyEditorTabsControl.closeEditor(editor);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tconst stickyEditors = editors.filter(e => this.model.isSticky(e));\n\t\tconst unstickyEditors = editors.filter(e => !this.model.isSticky(e));\n\n\t\tthis.stickyEditorTabsControl.closeEditors(stickyEditors);\n\t\tthis.unstickyEditorTabsControl.closeEditors(unstickyEditors);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tmoveEditor(editor: EditorInput, fromIndex: number, targetIndex: number, stickyStateChange: boolean): void {\n\t\tif (stickyStateChange) {\n\t\t\t// If sticky state changes, move editor between tab bars\n\t\t\tif (this.model.isSticky(editor)) {\n\t\t\t\tthis.stickyEditorTabsControl.openEditor(editor);\n\t\t\t\tthis.unstickyEditorTabsControl.closeEditor(editor);\n\t\t\t} else {\n\t\t\t\tthis.stickyEditorTabsControl.closeEditor(editor);\n\t\t\t\tthis.unstickyEditorTabsControl.openEditor(editor);\n\t\t\t}\n\n\t\t\tthis.handleTabBarsStateChange();\n\n\t\t} else {\n\t\t\tif (this.model.isSticky(editor)) {\n\t\t\t\tthis.stickyEditorTabsControl.moveEditor(editor, fromIndex, targetIndex, stickyStateChange);\n\t\t\t} else {\n\t\t\t\tthis.unstickyEditorTabsControl.moveEditor(editor, fromIndex - this.model.stickyCount, targetIndex - this.model.stickyCount, stickyStateChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).pinEditor(editor);\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\tthis.unstickyEditorTabsControl.closeEditor(editor);\n\t\tthis.stickyEditorTabsControl.openEditor(editor);\n\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\tthis.stickyEditorTabsControl.closeEditor(editor);\n\t\tthis.unstickyEditorTabsControl.openEditor(editor);\n\n\t\tthis.handleTabBarsStateChange();\n\t}\n\n\tsetActive(isActive: boolean): void {\n\t\tthis.stickyEditorTabsControl.setActive(isActive);\n\t\tthis.unstickyEditorTabsControl.setActive(isActive);\n\t}\n\n\tupdateEditorSelections(): void {\n\t\tthis.stickyEditorTabsControl.updateEditorSelections();\n\t\tthis.unstickyEditorTabsControl.updateEditorSelections();\n\t}\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).updateEditorLabel(editor);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\tthis.getEditorTabsController(editor).updateEditorDirty(editor);\n\t}\n\n\tupdateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\tthis.stickyEditorTabsControl.updateOptions(oldOptions, newOptions);\n\t\tthis.unstickyEditorTabsControl.updateOptions(oldOptions, newOptions);\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions): Dimension {\n\t\tconst stickyDimensions = this.stickyEditorTabsControl.layout(dimensions);\n\t\tconst unstickyAvailableDimensions = {\n\t\t\tcontainer: dimensions.container,\n\t\t\tavailable: new Dimension(dimensions.available.width, dimensions.available.height - stickyDimensions.height)\n\t\t};\n\t\tconst unstickyDimensions = this.unstickyEditorTabsControl.layout(unstickyAvailableDimensions);\n\n\t\treturn new Dimension(\n\t\t\tdimensions.container.width,\n\t\t\tstickyDimensions.height + unstickyDimensions.height\n\t\t);\n\t}\n\n\tgetHeight(): number {\n\t\treturn this.stickyEditorTabsControl.getHeight() + this.unstickyEditorTabsControl.getHeight();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.parent.classList.toggle('two-tab-bars', false);\n\n\t\tsuper.dispose();\n\t}\n}\n"]}