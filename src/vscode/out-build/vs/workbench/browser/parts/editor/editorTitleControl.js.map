{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/browser/parts/editor/editorTitleControl.ts","vs/workbench/browser/parts/editor/editorTitleControl.ts"],"names":[],"mappings":"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","file":"editorTitleControl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/editortitlecontrol.css';\nimport { $, Dimension, clearNode } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IThemeService, Themable } from '../../../../platform/theme/common/themeService.js';\nimport { BreadcrumbsControl, BreadcrumbsControlFactory } from './breadcrumbsControl.js';\nimport { IEditorGroupsView, IEditorGroupTitleHeight, IEditorGroupView, IEditorPartsView, IInternalEditorOpenOptions } from './editor.js';\nimport { IEditorTabsControl } from './editorTabsControl.js';\nimport { MultiEditorTabsControl } from './multiEditorTabsControl.js';\nimport { SingleEditorTabsControl } from './singleEditorTabsControl.js';\nimport { IEditorPartOptions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MultiRowEditorControl } from './multiRowEditorTabsControl.js';\nimport { IReadonlyEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\nimport { NoEditorTabsControl } from './noEditorTabsControl.js';\n\nexport interface IEditorTitleControlDimensions {\n\n\t/**\n\t * The size of the parent container the title control is layed out in.\n\t */\n\treadonly container: Dimension;\n\n\t/**\n\t * The maximum size the title control is allowed to consume based on\n\t * other controls that are positioned inside the container.\n\t */\n\treadonly available: Dimension;\n}\n\nexport class EditorTitleControl extends Themable {\n\n\tprivate editorTabsControl: IEditorTabsControl;\n\tprivate readonly editorTabsControlDisposable = this._register(new DisposableStore());\n\n\tprivate breadcrumbsControlFactory: BreadcrumbsControlFactory | undefined;\n\tprivate readonly breadcrumbsControlDisposables = this._register(new DisposableStore());\n\tprivate get breadcrumbsControl() { return this.breadcrumbsControlFactory?.control; }\n\n\tconstructor(\n\t\tprivate readonly parent: HTMLElement,\n\t\tprivate readonly editorPartsView: IEditorPartsView,\n\t\tprivate readonly groupsView: IEditorGroupsView,\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\tprivate readonly model: IReadonlyEditorGroupModel,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.editorTabsControl = this.createEditorTabsControl();\n\t\tthis.breadcrumbsControlFactory = this.createBreadcrumbsControl();\n\t}\n\n\tprivate createEditorTabsControl(): IEditorTabsControl {\n\t\tlet tabsControlType;\n\t\tswitch (this.groupsView.partOptions.showTabs) {\n\t\t\tcase 'none':\n\t\t\t\ttabsControlType = NoEditorTabsControl;\n\t\t\t\tbreak;\n\t\t\tcase 'single':\n\t\t\t\ttabsControlType = SingleEditorTabsControl;\n\t\t\t\tbreak;\n\t\t\tcase 'multiple':\n\t\t\tdefault:\n\t\t\t\ttabsControlType = this.groupsView.partOptions.pinnedTabsOnSeparateRow ? MultiRowEditorControl : MultiEditorTabsControl;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst control = this.instantiationService.createInstance(tabsControlType, this.parent, this.editorPartsView, this.groupsView, this.groupView, this.model);\n\t\treturn this.editorTabsControlDisposable.add(control);\n\t}\n\n\tprivate createBreadcrumbsControl(): BreadcrumbsControlFactory | undefined {\n\t\tif (this.groupsView.partOptions.showTabs === 'single') {\n\t\t\treturn undefined; // Single tabs have breadcrumbs inlined. No tabs have no breadcrumbs.\n\t\t}\n\n\t\t// Breadcrumbs container\n\t\tconst breadcrumbsContainer = $('.breadcrumbs-below-tabs');\n\t\tthis.parent.appendChild(breadcrumbsContainer);\n\n\t\tconst breadcrumbsControlFactory = this.breadcrumbsControlDisposables.add(this.instantiationService.createInstance(BreadcrumbsControlFactory, breadcrumbsContainer, this.groupView, {\n\t\t\tshowFileIcons: true,\n\t\t\tshowSymbolIcons: true,\n\t\t\tshowDecorationColors: false,\n\t\t\tshowPlaceholder: true,\n\t\t\tdragEditor: false,\n\t\t}));\n\n\t\t// Breadcrumbs enablement & visibility change have an impact on layout\n\t\t// so we need to relayout the editor group when that happens.\n\t\tthis.breadcrumbsControlDisposables.add(breadcrumbsControlFactory.onDidEnablementChange(() => this.groupView.relayout()));\n\t\tthis.breadcrumbsControlDisposables.add(breadcrumbsControlFactory.onDidVisibilityChange(() => this.groupView.relayout()));\n\n\t\treturn breadcrumbsControlFactory;\n\t}\n\n\topenEditor(editor: EditorInput, options?: IInternalEditorOpenOptions): void {\n\t\tconst didChange = this.editorTabsControl.openEditor(editor, options);\n\n\t\tthis.handleOpenedEditors(didChange);\n\t}\n\n\topenEditors(editors: EditorInput[]): void {\n\t\tconst didChange = this.editorTabsControl.openEditors(editors);\n\n\t\tthis.handleOpenedEditors(didChange);\n\t}\n\n\tprivate handleOpenedEditors(didChange: boolean): void {\n\t\tif (didChange) {\n\t\t\tthis.breadcrumbsControl?.update();\n\t\t} else {\n\t\t\tthis.breadcrumbsControl?.revealLast();\n\t\t}\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.beforeCloseEditor(editor);\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\tthis.editorTabsControl.closeEditor(editor);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tthis.editorTabsControl.closeEditors(editors);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\t\tif (!this.groupView.activeEditor) {\n\t\t\tthis.breadcrumbsControl?.update();\n\t\t}\n\t}\n\n\tmoveEditor(editor: EditorInput, fromIndex: number, targetIndex: number, stickyStateChange: boolean): void {\n\t\treturn this.editorTabsControl.moveEditor(editor, fromIndex, targetIndex, stickyStateChange);\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.pinEditor(editor);\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.stickEditor(editor);\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.unstickEditor(editor);\n\t}\n\n\tsetActive(isActive: boolean): void {\n\t\treturn this.editorTabsControl.setActive(isActive);\n\t}\n\n\tupdateEditorSelections(): void {\n\t\tthis.editorTabsControl.updateEditorSelections();\n\t}\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.updateEditorLabel(editor);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.updateEditorDirty(editor);\n\t}\n\n\tupdateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\t// Update editor tabs control if options changed\n\t\tif (\n\t\t\toldOptions.showTabs !== newOptions.showTabs ||\n\t\t\t(newOptions.showTabs !== 'single' && oldOptions.pinnedTabsOnSeparateRow !== newOptions.pinnedTabsOnSeparateRow)\n\t\t) {\n\t\t\t// Clear old\n\t\t\tthis.editorTabsControlDisposable.clear();\n\t\t\tthis.breadcrumbsControlDisposables.clear();\n\t\t\tclearNode(this.parent);\n\n\t\t\t// Create new\n\t\t\tthis.editorTabsControl = this.createEditorTabsControl();\n\t\t\tthis.breadcrumbsControlFactory = this.createBreadcrumbsControl();\n\t\t}\n\n\t\t// Forward into editor tabs control\n\t\telse {\n\t\t\tthis.editorTabsControl.updateOptions(oldOptions, newOptions);\n\t\t}\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions): Dimension {\n\n\t\t// Layout tabs control\n\t\tconst tabsControlDimension = this.editorTabsControl.layout(dimensions);\n\n\t\t// Layout breadcrumbs if visible\n\t\tlet breadcrumbsControlDimension: Dimension | undefined = undefined;\n\t\tif (this.breadcrumbsControl?.isHidden() === false) {\n\t\t\tbreadcrumbsControlDimension = new Dimension(dimensions.container.width, BreadcrumbsControl.HEIGHT);\n\t\t\tthis.breadcrumbsControl.layout(breadcrumbsControlDimension);\n\t\t}\n\n\t\treturn new Dimension(\n\t\t\tdimensions.container.width,\n\t\t\ttabsControlDimension.height + (breadcrumbsControlDimension ? breadcrumbsControlDimension.height : 0)\n\t\t);\n\t}\n\n\tgetHeight(): IEditorGroupTitleHeight {\n\t\tconst tabsControlHeight = this.editorTabsControl.getHeight();\n\t\tconst breadcrumbsControlHeight = this.breadcrumbsControl?.isHidden() === false ? BreadcrumbsControl.HEIGHT : 0;\n\n\t\treturn {\n\t\t\ttotal: tabsControlHeight + breadcrumbsControlHeight,\n\t\t\toffset: tabsControlHeight\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/editortitlecontrol.css';\nimport { $, Dimension, clearNode } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IThemeService, Themable } from '../../../../platform/theme/common/themeService.js';\nimport { BreadcrumbsControl, BreadcrumbsControlFactory } from './breadcrumbsControl.js';\nimport { IEditorGroupsView, IEditorGroupTitleHeight, IEditorGroupView, IEditorPartsView, IInternalEditorOpenOptions } from './editor.js';\nimport { IEditorTabsControl } from './editorTabsControl.js';\nimport { MultiEditorTabsControl } from './multiEditorTabsControl.js';\nimport { SingleEditorTabsControl } from './singleEditorTabsControl.js';\nimport { IEditorPartOptions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MultiRowEditorControl } from './multiRowEditorTabsControl.js';\nimport { IReadonlyEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\nimport { NoEditorTabsControl } from './noEditorTabsControl.js';\n\nexport interface IEditorTitleControlDimensions {\n\n\t/**\n\t * The size of the parent container the title control is layed out in.\n\t */\n\treadonly container: Dimension;\n\n\t/**\n\t * The maximum size the title control is allowed to consume based on\n\t * other controls that are positioned inside the container.\n\t */\n\treadonly available: Dimension;\n}\n\nexport class EditorTitleControl extends Themable {\n\n\tprivate editorTabsControl: IEditorTabsControl;\n\tprivate readonly editorTabsControlDisposable = this._register(new DisposableStore());\n\n\tprivate breadcrumbsControlFactory: BreadcrumbsControlFactory | undefined;\n\tprivate readonly breadcrumbsControlDisposables = this._register(new DisposableStore());\n\tprivate get breadcrumbsControl() { return this.breadcrumbsControlFactory?.control; }\n\n\tconstructor(\n\t\tprivate readonly parent: HTMLElement,\n\t\tprivate readonly editorPartsView: IEditorPartsView,\n\t\tprivate readonly groupsView: IEditorGroupsView,\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\tprivate readonly model: IReadonlyEditorGroupModel,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.editorTabsControl = this.createEditorTabsControl();\n\t\tthis.breadcrumbsControlFactory = this.createBreadcrumbsControl();\n\t}\n\n\tprivate createEditorTabsControl(): IEditorTabsControl {\n\t\tlet tabsControlType;\n\t\tswitch (this.groupsView.partOptions.showTabs) {\n\t\t\tcase 'none':\n\t\t\t\ttabsControlType = NoEditorTabsControl;\n\t\t\t\tbreak;\n\t\t\tcase 'single':\n\t\t\t\ttabsControlType = SingleEditorTabsControl;\n\t\t\t\tbreak;\n\t\t\tcase 'multiple':\n\t\t\tdefault:\n\t\t\t\ttabsControlType = this.groupsView.partOptions.pinnedTabsOnSeparateRow ? MultiRowEditorControl : MultiEditorTabsControl;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst control = this.instantiationService.createInstance(tabsControlType, this.parent, this.editorPartsView, this.groupsView, this.groupView, this.model);\n\t\treturn this.editorTabsControlDisposable.add(control);\n\t}\n\n\tprivate createBreadcrumbsControl(): BreadcrumbsControlFactory | undefined {\n\t\tif (this.groupsView.partOptions.showTabs === 'single') {\n\t\t\treturn undefined; // Single tabs have breadcrumbs inlined. No tabs have no breadcrumbs.\n\t\t}\n\n\t\t// Breadcrumbs container\n\t\tconst breadcrumbsContainer = $('.breadcrumbs-below-tabs');\n\t\tthis.parent.appendChild(breadcrumbsContainer);\n\n\t\tconst breadcrumbsControlFactory = this.breadcrumbsControlDisposables.add(this.instantiationService.createInstance(BreadcrumbsControlFactory, breadcrumbsContainer, this.groupView, {\n\t\t\tshowFileIcons: true,\n\t\t\tshowSymbolIcons: true,\n\t\t\tshowDecorationColors: false,\n\t\t\tshowPlaceholder: true,\n\t\t\tdragEditor: false,\n\t\t}));\n\n\t\t// Breadcrumbs enablement & visibility change have an impact on layout\n\t\t// so we need to relayout the editor group when that happens.\n\t\tthis.breadcrumbsControlDisposables.add(breadcrumbsControlFactory.onDidEnablementChange(() => this.groupView.relayout()));\n\t\tthis.breadcrumbsControlDisposables.add(breadcrumbsControlFactory.onDidVisibilityChange(() => this.groupView.relayout()));\n\n\t\treturn breadcrumbsControlFactory;\n\t}\n\n\topenEditor(editor: EditorInput, options?: IInternalEditorOpenOptions): void {\n\t\tconst didChange = this.editorTabsControl.openEditor(editor, options);\n\n\t\tthis.handleOpenedEditors(didChange);\n\t}\n\n\topenEditors(editors: EditorInput[]): void {\n\t\tconst didChange = this.editorTabsControl.openEditors(editors);\n\n\t\tthis.handleOpenedEditors(didChange);\n\t}\n\n\tprivate handleOpenedEditors(didChange: boolean): void {\n\t\tif (didChange) {\n\t\t\tthis.breadcrumbsControl?.update();\n\t\t} else {\n\t\t\tthis.breadcrumbsControl?.revealLast();\n\t\t}\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.beforeCloseEditor(editor);\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\tthis.editorTabsControl.closeEditor(editor);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tthis.editorTabsControl.closeEditors(editors);\n\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\t\tif (!this.groupView.activeEditor) {\n\t\t\tthis.breadcrumbsControl?.update();\n\t\t}\n\t}\n\n\tmoveEditor(editor: EditorInput, fromIndex: number, targetIndex: number, stickyStateChange: boolean): void {\n\t\treturn this.editorTabsControl.moveEditor(editor, fromIndex, targetIndex, stickyStateChange);\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.pinEditor(editor);\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.stickEditor(editor);\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.unstickEditor(editor);\n\t}\n\n\tsetActive(isActive: boolean): void {\n\t\treturn this.editorTabsControl.setActive(isActive);\n\t}\n\n\tupdateEditorSelections(): void {\n\t\tthis.editorTabsControl.updateEditorSelections();\n\t}\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.updateEditorLabel(editor);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\treturn this.editorTabsControl.updateEditorDirty(editor);\n\t}\n\n\tupdateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\t// Update editor tabs control if options changed\n\t\tif (\n\t\t\toldOptions.showTabs !== newOptions.showTabs ||\n\t\t\t(newOptions.showTabs !== 'single' && oldOptions.pinnedTabsOnSeparateRow !== newOptions.pinnedTabsOnSeparateRow)\n\t\t) {\n\t\t\t// Clear old\n\t\t\tthis.editorTabsControlDisposable.clear();\n\t\t\tthis.breadcrumbsControlDisposables.clear();\n\t\t\tclearNode(this.parent);\n\n\t\t\t// Create new\n\t\t\tthis.editorTabsControl = this.createEditorTabsControl();\n\t\t\tthis.breadcrumbsControlFactory = this.createBreadcrumbsControl();\n\t\t}\n\n\t\t// Forward into editor tabs control\n\t\telse {\n\t\t\tthis.editorTabsControl.updateOptions(oldOptions, newOptions);\n\t\t}\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions): Dimension {\n\n\t\t// Layout tabs control\n\t\tconst tabsControlDimension = this.editorTabsControl.layout(dimensions);\n\n\t\t// Layout breadcrumbs if visible\n\t\tlet breadcrumbsControlDimension: Dimension | undefined = undefined;\n\t\tif (this.breadcrumbsControl?.isHidden() === false) {\n\t\t\tbreadcrumbsControlDimension = new Dimension(dimensions.container.width, BreadcrumbsControl.HEIGHT);\n\t\t\tthis.breadcrumbsControl.layout(breadcrumbsControlDimension);\n\t\t}\n\n\t\treturn new Dimension(\n\t\t\tdimensions.container.width,\n\t\t\ttabsControlDimension.height + (breadcrumbsControlDimension ? breadcrumbsControlDimension.height : 0)\n\t\t);\n\t}\n\n\tgetHeight(): IEditorGroupTitleHeight {\n\t\tconst tabsControlHeight = this.editorTabsControl.getHeight();\n\t\tconst breadcrumbsControlHeight = this.breadcrumbsControl?.isHidden() === false ? BreadcrumbsControl.HEIGHT : 0;\n\n\t\treturn {\n\t\t\ttotal: tabsControlHeight + breadcrumbsControlHeight,\n\t\t\toffset: tabsControlHeight\n\t\t};\n\t}\n}\n"]}