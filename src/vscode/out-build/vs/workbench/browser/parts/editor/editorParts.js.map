{"version":3,"sources":["vs/workbench/browser/parts/editor/editorParts.ts"],"names":[],"mappings":"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","file":"editorParts.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { EditorGroupLayout, GroupDirection, GroupLocation, GroupOrientation, GroupsArrangement, GroupsOrder, IAuxiliaryEditorPart, IEditorGroupContextKeyProvider, IEditorDropTargetDelegate, IEditorGroupsService, IEditorSideGroup, IEditorWorkingSet, IFindGroupScope, IMergeGroupOptions, IEditorWorkingSetOptions, IEditorPart } from '../../../services/editor/common/editorGroupsService.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableMap, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { GroupIdentifier, IEditorPartOptions } from '../../../common/editor.js';\nimport { EditorPart, IEditorPartUIState, MainEditorPart } from './editorPart.js';\nimport { IEditorGroupView, IEditorPartsView } from './editor.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { AuxiliaryEditorPart, IAuxiliaryEditorPartOpenOptions } from './auxiliaryEditorPart.js';\nimport { MultiWindowParts } from '../../part.js';\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { IStorageService, IStorageValueChangeEvent, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IAuxiliaryWindowOpenOptions, IAuxiliaryWindowService } from '../../../services/auxiliaryWindow/browser/auxiliaryWindowService.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ContextKeyValue, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { isHTMLElement } from '../../../../base/browser/dom.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { DeepPartial } from '../../../../base/common/types.js';\nimport { IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\n\ninterface IEditorPartsUIState {\n\treadonly auxiliary: IAuxiliaryEditorPartState[];\n\treadonly mru: number[];\n\t// main state is managed by the main part\n}\n\ninterface IAuxiliaryEditorPartState extends IAuxiliaryWindowOpenOptions {\n\treadonly state: IEditorPartUIState;\n}\n\ninterface IEditorWorkingSetState extends IEditorWorkingSet {\n\treadonly main: IEditorPartUIState;\n\treadonly auxiliary: IEditorPartsUIState;\n}\n\ninterface IEditorPartsMemento {\n\t'editorparts.state'?: IEditorPartsUIState;\n}\n\nexport class EditorParts extends MultiWindowParts<EditorPart, IEditorPartsMemento> implements IEditorGroupsService, IEditorPartsView {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\treadonly mainPart: MainEditorPart;\n\n\tprivate mostRecentActiveParts: MainEditorPart[];\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IAuxiliaryWindowService private readonly auxiliaryWindowService: IAuxiliaryWindowService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper('workbench.editorParts', themeService, storageService);\n\n\t\tthis.editorWorkingSets = (() => {\n\t\t\tconst workingSetsRaw = this.storageService.get(EditorParts.EDITOR_WORKING_SETS_STORAGE_KEY, StorageScope.WORKSPACE);\n\t\t\tif (workingSetsRaw) {\n\t\t\t\treturn JSON.parse(workingSetsRaw);\n\t\t\t}\n\n\t\t\treturn [];\n\t\t})();\n\n\t\tthis.mainPart = this._register(this.createMainEditorPart());\n\t\tthis._register(this.registerPart(this.mainPart));\n\n\t\tthis.mostRecentActiveParts = [this.mainPart];\n\n\t\tthis.restoreParts();\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.onDidChangeMementoValue(StorageScope.WORKSPACE, this._store)(e => this.onDidChangeMementoState(e)));\n\t\tthis.whenReady.then(() => this.registerGroupsContextKeyListeners());\n\t}\n\n\tprotected createMainEditorPart(): MainEditorPart {\n\t\treturn this.instantiationService.createInstance(MainEditorPart, this);\n\t}\n\n\t//#region Scoped Instantiation Services\n\n\tprivate readonly mapPartToInstantiationService = new Map<number /* window ID */, IInstantiationService>();\n\n\tgetScopedInstantiationService(part: IEditorPart): IInstantiationService {\n\t\tif (part === this.mainPart) {\n\t\t\tif (!this.mapPartToInstantiationService.has(part.windowId)) {\n\t\t\t\tthis.instantiationService.invokeFunction(accessor => {\n\t\t\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\t\t\tconst statusbarService = accessor.get(IStatusbarService);\n\n\t\t\t\t\tthis.mapPartToInstantiationService.set(part.windowId, this._register(this.mainPart.scopedInstantiationService.createChild(new ServiceCollection(\n\t\t\t\t\t\t[IEditorService, editorService.createScoped(this.mainPart, this._store)],\n\t\t\t\t\t\t[IStatusbarService, statusbarService.createScoped(statusbarService, this._store)]\n\t\t\t\t\t))));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.mapPartToInstantiationService.get(part.windowId) ?? this.instantiationService;\n\t}\n\n\t//#endregion\n\n\t//#region Auxiliary Editor Parts\n\n\tprivate readonly _onDidCreateAuxiliaryEditorPart = this._register(new Emitter<IAuxiliaryEditorPart>());\n\treadonly onDidCreateAuxiliaryEditorPart = this._onDidCreateAuxiliaryEditorPart.event;\n\n\tasync createAuxiliaryEditorPart(options?: IAuxiliaryEditorPartOpenOptions): Promise<IAuxiliaryEditorPart> {\n\t\tconst { part, instantiationService, disposables } = await this.instantiationService.createInstance(AuxiliaryEditorPart, this).create(this.getGroupsLabel(this._parts.size), options);\n\n\t\t// Keep instantiation service\n\t\tthis.mapPartToInstantiationService.set(part.windowId, instantiationService);\n\t\tdisposables.add(toDisposable(() => this.mapPartToInstantiationService.delete(part.windowId)));\n\n\t\t// Events\n\t\tthis._onDidAddGroup.fire(part.activeGroup);\n\n\t\tthis._onDidCreateAuxiliaryEditorPart.fire(part);\n\n\t\treturn part;\n\t}\n\n\t//#endregion\n\n\t//#region Registration\n\n\toverride registerPart(part: EditorPart): IDisposable {\n\t\tconst disposables = this._register(new DisposableStore());\n\t\tdisposables.add(super.registerPart(part));\n\n\t\tthis.registerEditorPartListeners(part, disposables);\n\n\t\treturn disposables;\n\t}\n\n\tprotected override unregisterPart(part: EditorPart): void {\n\t\tsuper.unregisterPart(part);\n\n\t\t// Notify all parts about a groups label change\n\t\t// given it is computed based on the index\n\n\t\tthis.parts.forEach((part, index) => {\n\t\t\tif (part === this.mainPart) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tpart.notifyGroupsLabelChange(this.getGroupsLabel(index));\n\t\t});\n\t}\n\n\tprivate registerEditorPartListeners(part: EditorPart, disposables: DisposableStore): void {\n\t\tdisposables.add(part.onDidFocus(() => {\n\t\t\tthis.doUpdateMostRecentActive(part, true);\n\n\t\t\tif (this._parts.size > 1) {\n\t\t\t\t// Either main or auxiliary editor part got focus\n\t\t\t\t// which we have to treat as a group change event.\n\t\t\t\tthis._onDidActiveGroupChange.fire(this.activeGroup);\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(toDisposable(() => {\n\t\t\tthis.doUpdateMostRecentActive(part);\n\n\t\t\tif (part.windowId !== mainWindow.vscodeWindowId) {\n\t\t\t\t// An auxiliary editor part is closing which we have\n\t\t\t\t// to treat as group change event for the next editor\n\t\t\t\t// part that becomes active.\n\t\t\t\t// Refs: https://github.com/microsoft/vscode/issues/257058\n\t\t\t\tthis._onDidActiveGroupChange.fire(this.activeGroup);\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.add(part.onDidChangeActiveGroup(group => this._onDidActiveGroupChange.fire(group)));\n\t\tdisposables.add(part.onDidAddGroup(group => this._onDidAddGroup.fire(group)));\n\t\tdisposables.add(part.onDidRemoveGroup(group => this._onDidRemoveGroup.fire(group)));\n\t\tdisposables.add(part.onDidMoveGroup(group => this._onDidMoveGroup.fire(group)));\n\t\tdisposables.add(part.onDidActivateGroup(group => this._onDidActivateGroup.fire(group)));\n\t\tdisposables.add(part.onDidChangeGroupMaximized(maximized => this._onDidChangeGroupMaximized.fire(maximized)));\n\n\t\tdisposables.add(part.onDidChangeGroupIndex(group => this._onDidChangeGroupIndex.fire(group)));\n\t\tdisposables.add(part.onDidChangeGroupLocked(group => this._onDidChangeGroupLocked.fire(group)));\n\t}\n\n\tprivate doUpdateMostRecentActive(part: EditorPart, makeMostRecentlyActive?: boolean): void {\n\t\tconst index = this.mostRecentActiveParts.indexOf(part);\n\n\t\t// Remove from MRU list\n\t\tif (index !== -1) {\n\t\t\tthis.mostRecentActiveParts.splice(index, 1);\n\t\t}\n\n\t\t// Add to front as needed\n\t\tif (makeMostRecentlyActive) {\n\t\t\tthis.mostRecentActiveParts.unshift(part);\n\t\t}\n\t}\n\n\tprivate getGroupsLabel(index: number): string {\n\t\treturn localize('groupLabel', \"Window {0}\", index + 1);\n\t}\n\n\t//#endregion\n\n\t//#region Helpers\n\n\toverride getPart(group: IEditorGroupView | GroupIdentifier): EditorPart;\n\toverride getPart(element: HTMLElement): EditorPart;\n\toverride getPart(groupOrElement: IEditorGroupView | GroupIdentifier | HTMLElement): EditorPart {\n\t\tif (this._parts.size > 1) {\n\t\t\tif (isHTMLElement(groupOrElement)) {\n\t\t\t\tconst element = groupOrElement;\n\n\t\t\t\treturn this.getPartByDocument(element.ownerDocument);\n\t\t\t} else {\n\t\t\t\tconst group = groupOrElement;\n\n\t\t\t\tlet id: GroupIdentifier;\n\t\t\t\tif (typeof group === 'number') {\n\t\t\t\t\tid = group;\n\t\t\t\t} else {\n\t\t\t\t\tid = group.id;\n\t\t\t\t}\n\n\t\t\t\tfor (const part of this._parts) {\n\t\t\t\t\tif (part.hasGroup(id)) {\n\t\t\t\t\t\treturn part;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.mainPart;\n\t}\n\n\t//#endregion\n\n\t//#region Lifecycle / State\n\n\tprivate static readonly EDITOR_PARTS_UI_STATE_STORAGE_KEY = 'editorparts.state';\n\n\tprivate readonly workspaceMemento = this.getMemento(StorageScope.WORKSPACE, StorageTarget.USER);\n\n\tprivate _isReady = false;\n\tget isReady(): boolean { return this._isReady; }\n\n\tprivate readonly whenReadyPromise = new DeferredPromise<void>();\n\treadonly whenReady = this.whenReadyPromise.p;\n\n\tprivate readonly whenRestoredPromise = new DeferredPromise<void>();\n\treadonly whenRestored = this.whenRestoredPromise.p;\n\n\tprivate async restoreParts(): Promise<void> {\n\n\t\t// Join on the main part being ready to pick\n\t\t// the right moment to begin restoring.\n\t\t// The main part is automatically being created\n\t\t// as part of the overall startup process.\n\t\tawait this.mainPart.whenReady;\n\n\t\t// Only attempt to restore auxiliary editor parts\n\t\t// when the main part did restore. It is possible\n\t\t// that restoring was not attempted because specific\n\t\t// editors were opened.\n\t\tif (this.mainPart.willRestoreState) {\n\t\t\tconst state = this.loadState();\n\t\t\tif (state) {\n\t\t\t\tawait this.restoreState(state);\n\t\t\t}\n\t\t}\n\n\t\tconst mostRecentActivePart = this.mostRecentActiveParts.at(0);\n\t\tmostRecentActivePart?.activeGroup.focus();\n\n\t\tthis._isReady = true;\n\t\tthis.whenReadyPromise.complete();\n\n\t\t// Await restored\n\t\tawait Promise.allSettled(this.parts.map(part => part.whenRestored));\n\t\tthis.whenRestoredPromise.complete();\n\t}\n\n\tprivate loadState(): IEditorPartsUIState | undefined {\n\t\treturn this.workspaceMemento[EditorParts.EDITOR_PARTS_UI_STATE_STORAGE_KEY];\n\t}\n\n\tprotected override saveState(): void {\n\t\tconst state = this.createState();\n\t\tif (state.auxiliary.length === 0) {\n\t\t\tdelete this.workspaceMemento[EditorParts.EDITOR_PARTS_UI_STATE_STORAGE_KEY];\n\t\t} else {\n\t\t\tthis.workspaceMemento[EditorParts.EDITOR_PARTS_UI_STATE_STORAGE_KEY] = state;\n\t\t}\n\t}\n\n\tprivate createState(): IEditorPartsUIState {\n\t\treturn {\n\t\t\tauxiliary: this.parts.filter(part => part !== this.mainPart).map(part => {\n\t\t\t\tconst auxiliaryWindow = this.auxiliaryWindowService.getWindow(part.windowId);\n\n\t\t\t\treturn {\n\t\t\t\t\tstate: part.createState(),\n\t\t\t\t\t...auxiliaryWindow?.createState()\n\t\t\t\t};\n\t\t\t}),\n\t\t\tmru: this.mostRecentActiveParts.map(part => this.parts.indexOf(part))\n\t\t};\n\t}\n\n\tprivate async restoreState(state: IEditorPartsUIState): Promise<void> {\n\t\tif (state.auxiliary.length) {\n\t\t\tconst auxiliaryEditorPartPromises: Promise<IAuxiliaryEditorPart>[] = [];\n\n\t\t\t// Create auxiliary editor parts\n\t\t\tfor (const auxiliaryEditorPartState of state.auxiliary) {\n\t\t\t\tauxiliaryEditorPartPromises.push(this.createAuxiliaryEditorPart(auxiliaryEditorPartState));\n\t\t\t}\n\n\t\t\t// Await creation\n\t\t\tawait Promise.allSettled(auxiliaryEditorPartPromises);\n\n\t\t\t// Update MRU list\n\t\t\tif (state.mru.length === this.parts.length) {\n\t\t\t\tthis.mostRecentActiveParts = state.mru.map(index => this.parts[index]);\n\t\t\t} else {\n\t\t\t\tthis.mostRecentActiveParts = [...this.parts];\n\t\t\t}\n\n\t\t\t// Await ready\n\t\t\tawait Promise.allSettled(this.parts.map(part => part.whenReady));\n\t\t}\n\t}\n\n\tget hasRestorableState(): boolean {\n\t\treturn this.parts.some(part => part.hasRestorableState);\n\t}\n\n\tprivate onDidChangeMementoState(e: IStorageValueChangeEvent): void {\n\t\tif (e.external && e.scope === StorageScope.WORKSPACE) {\n\t\t\tthis.reloadMemento(e.scope);\n\n\t\t\tconst state = this.loadState();\n\t\t\tif (state) {\n\t\t\t\tthis.applyState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async applyState(state: IEditorPartsUIState | 'empty'): Promise<boolean> {\n\n\t\t// Before closing windows, try to close as many editors as\n\t\t// possible, but skip over those that would trigger a dialog\n\t\t// (for example when being dirty). This is to be able to have\n\t\t// them merge into the main part.\n\n\t\tfor (const part of this.parts) {\n\t\t\tif (part === this.mainPart) {\n\t\t\t\tcontinue; // main part takes care on its own\n\t\t\t}\n\n\t\t\tfor (const group of part.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE)) {\n\t\t\t\tawait group.closeAllEditors({ excludeConfirming: true });\n\t\t\t}\n\n\t\t\tconst closed = (part as unknown as IAuxiliaryEditorPart).close(); // will move remaining editors to main part\n\t\t\tif (!closed) {\n\t\t\t\treturn false; // this indicates that closing was vetoed\n\t\t\t}\n\t\t}\n\n\t\t// Restore auxiliary state unless we are in an empty state\n\t\tif (state !== 'empty') {\n\t\t\tawait this.restoreState(state);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t//#endregion\n\n\t//#region Working Sets\n\n\tprivate static readonly EDITOR_WORKING_SETS_STORAGE_KEY = 'editor.workingSets';\n\n\tprivate editorWorkingSets: IEditorWorkingSetState[];\n\n\tsaveWorkingSet(name: string): IEditorWorkingSet {\n\t\tconst workingSet: IEditorWorkingSetState = {\n\t\t\tid: generateUuid(),\n\t\t\tname,\n\t\t\tmain: this.mainPart.createState(),\n\t\t\tauxiliary: this.createState()\n\t\t};\n\n\t\tthis.editorWorkingSets.push(workingSet);\n\n\t\tthis.saveWorkingSets();\n\n\t\treturn {\n\t\t\tid: workingSet.id,\n\t\t\tname: workingSet.name\n\t\t};\n\t}\n\n\tgetWorkingSets(): IEditorWorkingSet[] {\n\t\treturn this.editorWorkingSets.map(workingSet => ({ id: workingSet.id, name: workingSet.name }));\n\t}\n\n\tdeleteWorkingSet(workingSet: IEditorWorkingSet): void {\n\t\tconst index = this.indexOfWorkingSet(workingSet);\n\t\tif (typeof index === 'number') {\n\t\t\tthis.editorWorkingSets.splice(index, 1);\n\n\t\t\tthis.saveWorkingSets();\n\t\t}\n\t}\n\n\tasync applyWorkingSet(workingSet: IEditorWorkingSet | 'empty', options?: IEditorWorkingSetOptions): Promise<boolean> {\n\t\tlet workingSetState: IEditorWorkingSetState | 'empty' | undefined;\n\t\tif (workingSet === 'empty') {\n\t\t\tworkingSetState = 'empty';\n\t\t} else {\n\t\t\tworkingSetState = this.editorWorkingSets[this.indexOfWorkingSet(workingSet) ?? -1];\n\t\t}\n\n\t\tif (!workingSetState) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Apply state: begin with auxiliary windows first because it helps to keep\n\t\t// editors around that need confirmation by moving them into the main part.\n\t\t// Also, in rare cases, the auxiliary part may not be able to apply the state\n\t\t// for certain editors that cannot move to the main part.\n\t\tconst applied = await this.applyState(workingSetState === 'empty' ? workingSetState : workingSetState.auxiliary);\n\t\tif (!applied) {\n\t\t\treturn false;\n\t\t}\n\t\tawait this.mainPart.applyState(workingSetState === 'empty' ? workingSetState : workingSetState.main, options);\n\n\t\t// Restore Focus unless instructed otherwise\n\t\tif (!options?.preserveFocus) {\n\t\t\tconst mostRecentActivePart = this.mostRecentActiveParts.at(0);\n\t\t\tif (mostRecentActivePart) {\n\t\t\t\tawait mostRecentActivePart.whenReady;\n\t\t\t\tmostRecentActivePart.activeGroup.focus();\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate indexOfWorkingSet(workingSet: IEditorWorkingSet): number | undefined {\n\t\tfor (let i = 0; i < this.editorWorkingSets.length; i++) {\n\t\t\tif (this.editorWorkingSets[i].id === workingSet.id) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate saveWorkingSets(): void {\n\t\tthis.storageService.store(EditorParts.EDITOR_WORKING_SETS_STORAGE_KEY, JSON.stringify(this.editorWorkingSets), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\t//#endregion\n\n\t//#region Events\n\n\tprivate readonly _onDidActiveGroupChange = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidChangeActiveGroup = this._onDidActiveGroupChange.event;\n\n\tprivate readonly _onDidAddGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidAddGroup = this._onDidAddGroup.event;\n\n\tprivate readonly _onDidRemoveGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidRemoveGroup = this._onDidRemoveGroup.event;\n\n\tprivate readonly _onDidMoveGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidMoveGroup = this._onDidMoveGroup.event;\n\n\tprivate readonly _onDidActivateGroup = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidActivateGroup = this._onDidActivateGroup.event;\n\n\tprivate readonly _onDidChangeGroupIndex = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidChangeGroupIndex = this._onDidChangeGroupIndex.event;\n\n\tprivate readonly _onDidChangeGroupLocked = this._register(new Emitter<IEditorGroupView>());\n\treadonly onDidChangeGroupLocked = this._onDidChangeGroupLocked.event;\n\n\tprivate readonly _onDidChangeGroupMaximized = this._register(new Emitter<boolean>());\n\treadonly onDidChangeGroupMaximized = this._onDidChangeGroupMaximized.event;\n\n\t//#endregion\n\n\t//#region Group Management\n\n\tget activeGroup(): IEditorGroupView {\n\t\treturn this.activePart.activeGroup;\n\t}\n\n\tget sideGroup(): IEditorSideGroup {\n\t\treturn this.activePart.sideGroup;\n\t}\n\n\tget groups(): IEditorGroupView[] {\n\t\treturn this.getGroups();\n\t}\n\n\tget count(): number {\n\t\treturn this.groups.length;\n\t}\n\n\tgetGroups(order = GroupsOrder.CREATION_TIME): IEditorGroupView[] {\n\t\tif (this._parts.size > 1) {\n\t\t\tlet parts: EditorPart[];\n\t\t\tswitch (order) {\n\t\t\t\tcase GroupsOrder.GRID_APPEARANCE: // we currently do not have a way to compute by appearance over multiple windows\n\t\t\t\tcase GroupsOrder.CREATION_TIME:\n\t\t\t\t\tparts = this.parts;\n\t\t\t\t\tbreak;\n\t\t\t\tcase GroupsOrder.MOST_RECENTLY_ACTIVE:\n\t\t\t\t\tparts = distinct([...this.mostRecentActiveParts, ...this.parts]); // always ensure all parts are included\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn parts.flatMap(part => part.getGroups(order));\n\t\t}\n\n\t\treturn this.mainPart.getGroups(order);\n\t}\n\n\tgetGroup(identifier: GroupIdentifier): IEditorGroupView | undefined {\n\t\tif (this._parts.size > 1) {\n\t\t\tfor (const part of this._parts) {\n\t\t\t\tconst group = part.getGroup(identifier);\n\t\t\t\tif (group) {\n\t\t\t\t\treturn group;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.mainPart.getGroup(identifier);\n\t}\n\n\tprivate assertGroupView(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\tlet groupView: IEditorGroupView | undefined;\n\t\tif (typeof group === 'number') {\n\t\t\tgroupView = this.getGroup(group);\n\t\t} else {\n\t\t\tgroupView = group;\n\t\t}\n\n\t\tif (!groupView) {\n\t\t\tthrow new Error('Invalid editor group provided!');\n\t\t}\n\n\t\treturn groupView;\n\t}\n\n\tactivateGroup(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\treturn this.getPart(group).activateGroup(group);\n\t}\n\n\tgetSize(group: IEditorGroupView | GroupIdentifier): { width: number; height: number } {\n\t\treturn this.getPart(group).getSize(group);\n\t}\n\n\tsetSize(group: IEditorGroupView | GroupIdentifier, size: { width: number; height: number }): void {\n\t\tthis.getPart(group).setSize(group, size);\n\t}\n\n\tarrangeGroups(arrangement: GroupsArrangement, group: IEditorGroupView | GroupIdentifier = this.activePart.activeGroup): void {\n\t\tthis.getPart(group).arrangeGroups(arrangement, group);\n\t}\n\n\ttoggleMaximizeGroup(group: IEditorGroupView | GroupIdentifier = this.activePart.activeGroup): void {\n\t\tthis.getPart(group).toggleMaximizeGroup(group);\n\t}\n\n\ttoggleExpandGroup(group: IEditorGroupView | GroupIdentifier = this.activePart.activeGroup): void {\n\t\tthis.getPart(group).toggleExpandGroup(group);\n\t}\n\n\trestoreGroup(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\treturn this.getPart(group).restoreGroup(group);\n\t}\n\n\tapplyLayout(layout: EditorGroupLayout): void {\n\t\tthis.activePart.applyLayout(layout);\n\t}\n\n\tgetLayout(): EditorGroupLayout {\n\t\treturn this.activePart.getLayout();\n\t}\n\n\tget orientation() {\n\t\treturn this.activePart.orientation;\n\t}\n\n\tsetGroupOrientation(orientation: GroupOrientation): void {\n\t\tthis.activePart.setGroupOrientation(orientation);\n\t}\n\n\tfindGroup(scope: IFindGroupScope, source: IEditorGroupView | GroupIdentifier = this.activeGroup, wrap?: boolean): IEditorGroupView | undefined {\n\t\tconst sourcePart = this.getPart(source);\n\t\tif (this._parts.size > 1) {\n\t\t\tconst groups = this.getGroups(GroupsOrder.GRID_APPEARANCE);\n\n\t\t\t// Ensure that FIRST/LAST dispatches globally over all parts\n\t\t\tif (scope.location === GroupLocation.FIRST || scope.location === GroupLocation.LAST) {\n\t\t\t\treturn scope.location === GroupLocation.FIRST ? groups[0] : groups[groups.length - 1];\n\t\t\t}\n\n\t\t\t// Try to find in target part first without wrapping\n\t\t\tconst group = sourcePart.findGroup(scope, source, false);\n\t\t\tif (group) {\n\t\t\t\treturn group;\n\t\t\t}\n\n\t\t\t// Ensure that NEXT/PREVIOUS dispatches globally over all parts\n\t\t\tif (scope.location === GroupLocation.NEXT || scope.location === GroupLocation.PREVIOUS) {\n\t\t\t\tconst sourceGroup = this.assertGroupView(source);\n\t\t\t\tconst index = groups.indexOf(sourceGroup);\n\n\t\t\t\tif (scope.location === GroupLocation.NEXT) {\n\t\t\t\t\tlet nextGroup: IEditorGroupView | undefined = groups[index + 1];\n\t\t\t\t\tif (!nextGroup && wrap) {\n\t\t\t\t\t\tnextGroup = groups[0];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn nextGroup;\n\t\t\t\t} else {\n\t\t\t\t\tlet previousGroup: IEditorGroupView | undefined = groups[index - 1];\n\t\t\t\t\tif (!previousGroup && wrap) {\n\t\t\t\t\t\tpreviousGroup = groups[groups.length - 1];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn previousGroup;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sourcePart.findGroup(scope, source, wrap);\n\t}\n\n\taddGroup(location: IEditorGroupView | GroupIdentifier, direction: GroupDirection): IEditorGroupView {\n\t\treturn this.getPart(location).addGroup(location, direction);\n\t}\n\n\tremoveGroup(group: IEditorGroupView | GroupIdentifier): void {\n\t\tthis.getPart(group).removeGroup(group);\n\t}\n\n\tmoveGroup(group: IEditorGroupView | GroupIdentifier, location: IEditorGroupView | GroupIdentifier, direction: GroupDirection): IEditorGroupView {\n\t\treturn this.getPart(group).moveGroup(group, location, direction);\n\t}\n\n\tmergeGroup(group: IEditorGroupView | GroupIdentifier, target: IEditorGroupView | GroupIdentifier, options?: IMergeGroupOptions): boolean {\n\t\treturn this.getPart(group).mergeGroup(group, target, options);\n\t}\n\n\tmergeAllGroups(target: IEditorGroupView | GroupIdentifier, options?: IMergeGroupOptions): boolean {\n\t\treturn this.activePart.mergeAllGroups(target, options);\n\t}\n\n\tcopyGroup(group: IEditorGroupView | GroupIdentifier, location: IEditorGroupView | GroupIdentifier, direction: GroupDirection): IEditorGroupView {\n\t\treturn this.getPart(group).copyGroup(group, location, direction);\n\t}\n\n\tcreateEditorDropTarget(container: HTMLElement, delegate: IEditorDropTargetDelegate): IDisposable {\n\t\treturn this.getPart(container).createEditorDropTarget(container, delegate);\n\t}\n\n\t//#endregion\n\n\t//#region Editor Group Context Key Handling\n\n\tprivate readonly globalContextKeys = new Map<string, IContextKey<ContextKeyValue>>();\n\tprivate readonly scopedContextKeys = new Map<GroupIdentifier, Map<string, IContextKey<ContextKeyValue>>>();\n\n\tprivate registerGroupsContextKeyListeners(): void {\n\t\tthis._register(this.onDidChangeActiveGroup(() => this.updateGlobalContextKeys()));\n\t\tthis.groups.forEach(group => this.registerGroupContextKeyProvidersListeners(group));\n\t\tthis._register(this.onDidAddGroup(group => this.registerGroupContextKeyProvidersListeners(group)));\n\t\tthis._register(this.onDidRemoveGroup(group => {\n\t\t\tthis.scopedContextKeys.delete(group.id);\n\t\t\tthis.registeredContextKeys.delete(group.id);\n\t\t\tthis.contextKeyProviderDisposables.deleteAndDispose(group.id);\n\t\t}));\n\t}\n\n\tprivate updateGlobalContextKeys(): void {\n\t\tconst activeGroupScopedContextKeys = this.scopedContextKeys.get(this.activeGroup.id);\n\t\tif (!activeGroupScopedContextKeys) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [key, globalContextKey] of this.globalContextKeys) {\n\t\t\tconst scopedContextKey = activeGroupScopedContextKeys.get(key);\n\t\t\tif (scopedContextKey) {\n\t\t\t\tglobalContextKey.set(scopedContextKey.get());\n\t\t\t} else {\n\t\t\t\tglobalContextKey.reset();\n\t\t\t}\n\t\t}\n\t}\n\n\tbind<T extends ContextKeyValue>(contextKey: RawContextKey<T>, group: IEditorGroupView): IContextKey<T> {\n\n\t\t// Ensure we only bind to the same context key once globaly\n\t\tlet globalContextKey = this.globalContextKeys.get(contextKey.key);\n\t\tif (!globalContextKey) {\n\t\t\tglobalContextKey = contextKey.bindTo(this.contextKeyService);\n\t\t\tthis.globalContextKeys.set(contextKey.key, globalContextKey);\n\t\t}\n\n\t\t// Ensure we only bind to the same context key once per group\n\t\tlet groupScopedContextKeys = this.scopedContextKeys.get(group.id);\n\t\tif (!groupScopedContextKeys) {\n\t\t\tgroupScopedContextKeys = new Map<string, IContextKey<ContextKeyValue>>();\n\t\t\tthis.scopedContextKeys.set(group.id, groupScopedContextKeys);\n\t\t}\n\t\tlet scopedContextKey = groupScopedContextKeys.get(contextKey.key);\n\t\tif (!scopedContextKey) {\n\t\t\tscopedContextKey = contextKey.bindTo(group.scopedContextKeyService);\n\t\t\tgroupScopedContextKeys.set(contextKey.key, scopedContextKey);\n\t\t}\n\n\t\tconst that = this;\n\t\treturn {\n\t\t\tget(): T | undefined {\n\t\t\t\treturn scopedContextKey.get() as T | undefined;\n\t\t\t},\n\t\t\tset(value: T): void {\n\t\t\t\tif (that.activeGroup === group) {\n\t\t\t\t\tglobalContextKey.set(value);\n\t\t\t\t}\n\t\t\t\tscopedContextKey.set(value);\n\t\t\t},\n\t\t\treset(): void {\n\t\t\t\tif (that.activeGroup === group) {\n\t\t\t\t\tglobalContextKey.reset();\n\t\t\t\t}\n\t\t\t\tscopedContextKey.reset();\n\t\t\t},\n\t\t};\n\t}\n\n\tprivate readonly contextKeyProviders = new Map<string, IEditorGroupContextKeyProvider<ContextKeyValue>>();\n\tprivate readonly registeredContextKeys = new Map<GroupIdentifier, Map<string, IContextKey>>();\n\n\tregisterContextKeyProvider<T extends ContextKeyValue>(provider: IEditorGroupContextKeyProvider<T>): IDisposable {\n\t\tif (this.contextKeyProviders.has(provider.contextKey.key) || this.globalContextKeys.has(provider.contextKey.key)) {\n\t\t\tthrow new Error(`A context key provider for key ${provider.contextKey.key} already exists.`);\n\t\t}\n\n\t\tthis.contextKeyProviders.set(provider.contextKey.key, provider);\n\n\t\tconst setContextKeyForGroups = () => {\n\t\t\tfor (const group of this.groups) {\n\t\t\t\tthis.updateRegisteredContextKey(group, provider);\n\t\t\t}\n\t\t};\n\n\t\t// Run initially and on change\n\t\tsetContextKeyForGroups();\n\t\tconst onDidChange = provider.onDidChange?.(() => setContextKeyForGroups());\n\n\t\treturn toDisposable(() => {\n\t\t\tonDidChange?.dispose();\n\n\t\t\tthis.globalContextKeys.delete(provider.contextKey.key);\n\t\t\tthis.scopedContextKeys.forEach(scopedContextKeys => scopedContextKeys.delete(provider.contextKey.key));\n\n\t\t\tthis.contextKeyProviders.delete(provider.contextKey.key);\n\t\t\tthis.registeredContextKeys.forEach(registeredContextKeys => registeredContextKeys.delete(provider.contextKey.key));\n\t\t});\n\t}\n\n\tprivate readonly contextKeyProviderDisposables = this._register(new DisposableMap<GroupIdentifier, IDisposable>());\n\tprivate registerGroupContextKeyProvidersListeners(group: IEditorGroupView): void {\n\n\t\t// Update context keys from providers for the group when its active editor changes\n\t\tconst disposable = group.onDidActiveEditorChange(() => {\n\t\t\tfor (const contextKeyProvider of this.contextKeyProviders.values()) {\n\t\t\t\tthis.updateRegisteredContextKey(group, contextKeyProvider);\n\t\t\t}\n\t\t});\n\n\t\tthis.contextKeyProviderDisposables.set(group.id, disposable);\n\t}\n\n\tprivate updateRegisteredContextKey<T extends ContextKeyValue>(group: IEditorGroupView, provider: IEditorGroupContextKeyProvider<T>): void {\n\n\t\t// Get the group scoped context keys for the provider\n\t\t// If the providers context key has not yet been bound\n\t\t// to the group, do so now.\n\n\t\tlet groupRegisteredContextKeys = this.registeredContextKeys.get(group.id);\n\t\tif (!groupRegisteredContextKeys) {\n\t\t\tgroupRegisteredContextKeys = new Map<string, IContextKey>();\n\t\t\tthis.registeredContextKeys.set(group.id, groupRegisteredContextKeys);\n\t\t}\n\n\t\tlet scopedRegisteredContextKey = groupRegisteredContextKeys.get(provider.contextKey.key);\n\t\tif (!scopedRegisteredContextKey) {\n\t\t\tscopedRegisteredContextKey = this.bind(provider.contextKey, group);\n\t\t\tgroupRegisteredContextKeys.set(provider.contextKey.key, scopedRegisteredContextKey);\n\t\t}\n\n\t\t// Set the context key value for the group context\n\t\tscopedRegisteredContextKey.set(provider.getGroupContextKeyValue(group));\n\t}\n\n\t//#endregion\n\n\t//#region Main Editor Part Only\n\n\tget partOptions() { return this.mainPart.partOptions; }\n\tget onDidChangeEditorPartOptions() { return this.mainPart.onDidChangeEditorPartOptions; }\n\n\tenforcePartOptions(options: DeepPartial<IEditorPartOptions>): IDisposable {\n\t\treturn this.mainPart.enforcePartOptions(options);\n\t}\n\n\t//#endregion\n}\n\nregisterSingleton(IEditorGroupsService, EditorParts, InstantiationType.Eager);\n"]}