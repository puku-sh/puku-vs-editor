{"version":3,"sources":["vs/workbench/browser/parts/editor/editorPanes.ts"],"names":[],"mappings":"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","file":"editorPanes.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { IAction } from '../../../../base/common/actions.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorExtensions, EditorInputCapabilities, IEditorOpenContext, IVisibleEditorPane, isEditorOpenError } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { Dimension, show, hide, IDomNodePagePosition, isAncestor, getActiveElement, getWindowById, isEditableElement, $ } from '../../../../base/browser/dom.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IEditorPaneRegistry, IEditorPaneDescriptor } from '../../editor.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { EditorPane } from './editorPane.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, LongRunningOperation } from '../../../../platform/progress/common/progress.js';\nimport { IEditorGroupView, DEFAULT_EDITOR_MIN_DIMENSIONS, DEFAULT_EDITOR_MAX_DIMENSIONS, IInternalEditorOpenOptions } from './editor.js';\nimport { assertReturnsDefined } from '../../../../base/common/types.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { ErrorPlaceholderEditor, IErrorEditorPlaceholderOptions, WorkspaceTrustRequiredPlaceholderEditor } from './editorPlaceholder.js';\nimport { EditorOpenSource, IEditorOptions } from '../../../../platform/editor/common/editor.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { toErrorMessage } from '../../../../base/common/errorMessage.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IDialogService, IPromptButton, IPromptCancelButton } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IBoundarySashes } from '../../../../base/browser/ui/sash/sash.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\n\nexport interface IOpenEditorResult {\n\n\t/**\n\t * The editor pane used for opening. This can be a generic\n\t * placeholder in certain cases, e.g. when workspace trust\n\t * is required, or an editor fails to restore.\n\t *\n\t * Will be `undefined` if an error occurred while trying to\n\t * open the editor and in cases where no placeholder is being\n\t * used.\n\t */\n\treadonly pane?: EditorPane;\n\n\t/**\n\t * Whether the editor changed as a result of opening.\n\t */\n\treadonly changed?: boolean;\n\n\t/**\n\t * This property is set when an editor fails to restore and\n\t * is shown with a generic place holder. It allows callers\n\t * to still present the error to the user in that case.\n\t */\n\treadonly error?: Error;\n\n\t/**\n\t * This property indicates whether the open editor operation was\n\t * cancelled or not. The operation may have been cancelled\n\t * in case another editor open operation was triggered right\n\t * after cancelling this one out.\n\t */\n\treadonly cancelled?: boolean;\n}\n\nexport class EditorPanes extends Disposable {\n\n\t//#region Events\n\n\tprivate readonly _onDidFocus = this._register(new Emitter<void>());\n\treadonly onDidFocus = this._onDidFocus.event;\n\n\tprivate _onDidChangeSizeConstraints = this._register(new Emitter<{ width: number; height: number } | undefined>());\n\treadonly onDidChangeSizeConstraints = this._onDidChangeSizeConstraints.event;\n\n\t//#endregion\n\n\tget minimumWidth() { return this._activeEditorPane?.minimumWidth ?? DEFAULT_EDITOR_MIN_DIMENSIONS.width; }\n\tget minimumHeight() { return this._activeEditorPane?.minimumHeight ?? DEFAULT_EDITOR_MIN_DIMENSIONS.height; }\n\tget maximumWidth() { return this._activeEditorPane?.maximumWidth ?? DEFAULT_EDITOR_MAX_DIMENSIONS.width; }\n\tget maximumHeight() { return this._activeEditorPane?.maximumHeight ?? DEFAULT_EDITOR_MAX_DIMENSIONS.height; }\n\n\tprivate _activeEditorPane: EditorPane | null = null;\n\tget activeEditorPane(): IVisibleEditorPane | null { return this._activeEditorPane as IVisibleEditorPane | null; }\n\n\tprivate readonly editorPanes: EditorPane[] = [];\n\tprivate readonly mapEditorPaneToPendingSetInput = new Map<EditorPane, Promise<void>>();\n\n\tprivate readonly activeEditorPaneDisposables = this._register(new DisposableStore());\n\n\tprivate pagePosition: IDomNodePagePosition | undefined;\n\tprivate boundarySashes: IBoundarySashes | undefined;\n\n\tprivate readonly editorOperation: LongRunningOperation;\n\tprivate readonly editorPanesRegistry = Registry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane);\n\n\tconstructor(\n\t\tprivate readonly editorGroupParent: HTMLElement,\n\t\tprivate readonly editorPanesParent: HTMLElement,\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorProgressService editorProgressService: IEditorProgressService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustService: IWorkspaceTrustManagementService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IHostService private readonly hostService: IHostService\n\t) {\n\t\tsuper();\n\n\t\tthis.editorOperation = this._register(new LongRunningOperation(editorProgressService));\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.workspaceTrustService.onDidChangeTrust(() => this.onDidChangeWorkspaceTrust()));\n\t}\n\n\tprivate onDidChangeWorkspaceTrust() {\n\n\t\t// If the active editor pane requires workspace trust\n\t\t// we need to re-open it anytime trust changes to\n\t\t// account for it.\n\t\t// For that we explicitly call into the group-view\n\t\t// to handle errors properly.\n\t\tconst editor = this._activeEditorPane?.input;\n\t\tconst options = this._activeEditorPane?.options;\n\t\tif (editor?.hasCapability(EditorInputCapabilities.RequiresTrust)) {\n\t\t\tthis.groupView.openEditor(editor, options);\n\t\t}\n\t}\n\n\tasync openEditor(editor: EditorInput, options: IEditorOptions | undefined, internalOptions: IInternalEditorOpenOptions | undefined, context: IEditorOpenContext = Object.create(null)): Promise<IOpenEditorResult> {\n\t\ttry {\n\t\t\treturn await this.doOpenEditor(this.getEditorPaneDescriptor(editor), editor, options, internalOptions, context);\n\t\t} catch (error) {\n\n\t\t\t// First check if caller instructed us to ignore error handling\n\t\t\tif (options?.ignoreError) {\n\t\t\t\treturn { error };\n\t\t\t}\n\n\t\t\t// In case of an error when opening an editor, we still want to show\n\t\t\t// an editor in the desired location to preserve the user intent and\n\t\t\t// view state (e.g. when restoring).\n\t\t\t//\n\t\t\t// For that reason we have place holder editors that can convey a\n\t\t\t// message with actions the user can click on.\n\n\t\t\treturn this.doShowError(error, editor, options, internalOptions, context);\n\t\t}\n\t}\n\n\tprivate async doShowError(error: Error, editor: EditorInput, options: IEditorOptions | undefined, internalOptions: IInternalEditorOpenOptions | undefined, context?: IEditorOpenContext): Promise<IOpenEditorResult> {\n\n\t\t// Always log the error to figure out what is going on\n\t\tthis.logService.error(error);\n\n\t\t// Show as modal dialog when explicit user action unless disabled\n\t\tlet errorHandled = false;\n\t\tif (options?.source === EditorOpenSource.USER && (!isEditorOpenError(error) || error.allowDialog)) {\n\t\t\terrorHandled = await this.doShowErrorDialog(error, editor);\n\t\t}\n\n\t\t// Return early if the user dealt with the error already\n\t\tif (errorHandled) {\n\t\t\treturn { error };\n\t\t}\n\n\t\t// Show as editor placeholder: pass over the error to display\n\t\tconst editorPlaceholderOptions: IErrorEditorPlaceholderOptions = { ...options };\n\t\tif (!isCancellationError(error)) {\n\t\t\teditorPlaceholderOptions.error = error;\n\t\t}\n\n\t\treturn {\n\t\t\t...(await this.doOpenEditor(ErrorPlaceholderEditor.DESCRIPTOR, editor, editorPlaceholderOptions, internalOptions, context)),\n\t\t\terror\n\t\t};\n\t}\n\n\tprivate async doShowErrorDialog(error: Error, editor: EditorInput): Promise<boolean> {\n\t\tlet severity = Severity.Error;\n\t\tlet message: string | undefined = undefined;\n\t\tlet detail: string | undefined = toErrorMessage(error);\n\t\tlet errorActions: readonly IAction[] | undefined = undefined;\n\n\t\tif (isEditorOpenError(error)) {\n\t\t\terrorActions = error.actions;\n\t\t\tseverity = error.forceSeverity ?? Severity.Error;\n\t\t\tif (error.forceMessage) {\n\t\t\t\tmessage = error.message;\n\t\t\t\tdetail = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (!message) {\n\t\t\tmessage = localize('editorOpenErrorDialog', \"Unable to open '{0}'\", editor.getName());\n\t\t}\n\n\t\tconst buttons: IPromptButton<IAction | undefined>[] = [];\n\t\tif (errorActions && errorActions.length > 0) {\n\t\t\tfor (const errorAction of errorActions) {\n\t\t\t\tbuttons.push({\n\t\t\t\t\tlabel: errorAction.label,\n\t\t\t\t\trun: () => errorAction\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tbuttons.push({\n\t\t\t\tlabel: localize({ key: 'ok', comment: ['&& denotes a mnemonic'] }, \"&&OK\"),\n\t\t\t\trun: () => undefined\n\t\t\t});\n\t\t}\n\n\t\tlet cancelButton: IPromptCancelButton<undefined> | undefined = undefined;\n\t\tif (buttons.length === 1) {\n\t\t\tcancelButton = {\n\t\t\t\trun: () => {\n\t\t\t\t\terrorHandled = true; // treat cancel as handled and do not show placeholder\n\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tlet errorHandled = false;  // by default, show placeholder\n\n\t\tconst { result } = await this.dialogService.prompt({\n\t\t\ttype: severity,\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tbuttons,\n\t\t\tcancelButton\n\t\t});\n\n\t\tif (result) {\n\t\t\tconst errorActionResult = result.run();\n\t\t\tif (errorActionResult instanceof Promise) {\n\t\t\t\terrorActionResult.catch(error => this.dialogService.error(toErrorMessage(error)));\n\t\t\t}\n\n\t\t\terrorHandled = true; // treat custom error action as handled and do not show placeholder\n\t\t}\n\n\t\treturn errorHandled;\n\t}\n\n\tprivate async doOpenEditor(descriptor: IEditorPaneDescriptor, editor: EditorInput, options: IEditorOptions | undefined, internalOptions: IInternalEditorOpenOptions | undefined, context: IEditorOpenContext = Object.create(null)): Promise<IOpenEditorResult> {\n\n\t\t// Editor pane\n\t\tconst pane = this.doShowEditorPane(descriptor);\n\n\t\t// Remember current active element for deciding to restore focus later\n\t\tconst activeElement = getActiveElement();\n\n\t\t// Apply input to pane\n\t\tconst { changed, cancelled } = await this.doSetInput(pane, editor, options, context);\n\n\t\t// Make sure to pass focus to the pane or otherwise\n\t\t// make sure that the pane window is visible unless\n\t\t// this has been explicitly disabled.\n\t\tif (!cancelled) {\n\t\t\tconst focus = !options?.preserveFocus;\n\t\t\tif (focus && this.shouldRestoreFocus(activeElement)) {\n\t\t\t\tpane.focus();\n\t\t\t} else if (!internalOptions?.preserveWindowOrder) {\n\t\t\t\tthis.hostService.moveTop(getWindowById(this.groupView.windowId, true).window);\n\t\t\t}\n\t\t}\n\n\t\treturn { pane, changed, cancelled };\n\t}\n\n\tprivate shouldRestoreFocus(expectedActiveElement: Element | null): boolean {\n\t\tif (!this.layoutService.isRestored()) {\n\t\t\treturn true; // restore focus if we are not restored yet on startup\n\t\t}\n\n\t\tif (!expectedActiveElement) {\n\t\t\treturn true; // restore focus if nothing was focused\n\t\t}\n\n\t\tconst activeElement = getActiveElement();\n\t\tif (!activeElement || activeElement === expectedActiveElement.ownerDocument.body) {\n\t\t\treturn true; // restore focus if nothing is focused currently\n\t\t}\n\n\t\tconst same = expectedActiveElement === activeElement;\n\t\tif (same) {\n\t\t\treturn true; // restore focus if same element is still active\n\t\t}\n\n\t\tif (!isEditableElement(activeElement)) {\n\n\t\t\t// This is to avoid regressions from not restoring focus as we used to:\n\t\t\t// Only allow a different input element (or textarea) to remain focused\n\t\t\t// but not other elements that do not accept text input.\n\n\t\t\treturn true;\n\t\t}\n\n\t\tif (isAncestor(activeElement, this.editorGroupParent)) {\n\t\t\treturn true; // restore focus if active element is still inside our editor group\n\t\t}\n\n\t\treturn false; // do not restore focus\n\t}\n\n\tprivate getEditorPaneDescriptor(editor: EditorInput): IEditorPaneDescriptor {\n\t\tif (editor.hasCapability(EditorInputCapabilities.RequiresTrust) && !this.workspaceTrustService.isWorkspaceTrusted()) {\n\t\t\t// Workspace trust: if an editor signals it needs workspace trust\n\t\t\t// but the current workspace is untrusted, we fallback to a generic\n\t\t\t// editor descriptor to indicate this an do NOT load the registered\n\t\t\t// editor.\n\t\t\treturn WorkspaceTrustRequiredPlaceholderEditor.DESCRIPTOR;\n\t\t}\n\n\t\treturn assertReturnsDefined(this.editorPanesRegistry.getEditorPane(editor));\n\t}\n\n\tprivate doShowEditorPane(descriptor: IEditorPaneDescriptor): EditorPane {\n\n\t\t// Return early if the currently active editor pane can handle the input\n\t\tif (this._activeEditorPane && descriptor.describes(this._activeEditorPane)) {\n\t\t\treturn this._activeEditorPane;\n\t\t}\n\n\t\t// Hide active one first\n\t\tthis.doHideActiveEditorPane();\n\n\t\t// Create editor pane\n\t\tconst editorPane = this.doCreateEditorPane(descriptor);\n\n\t\t// Set editor as active\n\t\tthis.doSetActiveEditorPane(editorPane);\n\n\t\t// Show editor\n\t\tconst container = assertReturnsDefined(editorPane.getContainer());\n\t\tthis.editorPanesParent.appendChild(container);\n\t\tshow(container);\n\n\t\t// Indicate to editor that it is now visible\n\t\teditorPane.setVisible(true);\n\n\t\t// Layout\n\t\tif (this.pagePosition) {\n\t\t\teditorPane.layout(new Dimension(this.pagePosition.width, this.pagePosition.height), { top: this.pagePosition.top, left: this.pagePosition.left });\n\t\t}\n\n\t\t// Boundary sashes\n\t\tif (this.boundarySashes) {\n\t\t\teditorPane.setBoundarySashes(this.boundarySashes);\n\t\t}\n\n\t\treturn editorPane;\n\t}\n\n\tprivate doCreateEditorPane(descriptor: IEditorPaneDescriptor): EditorPane {\n\n\t\t// Instantiate editor\n\t\tconst editorPane = this.doInstantiateEditorPane(descriptor);\n\n\t\t// Create editor container as needed\n\t\tif (!editorPane.getContainer()) {\n\t\t\tconst editorPaneContainer = $('.editor-instance');\n\n\t\t\t// It is cruicial to append the container to its parent before\n\t\t\t// passing on to the create() method of the pane so that the\n\t\t\t// right `window` can be determined in floating window cases.\n\t\t\tthis.editorPanesParent.appendChild(editorPaneContainer);\n\n\t\t\ttry {\n\t\t\t\teditorPane.create(editorPaneContainer);\n\t\t\t} catch (error) {\n\n\t\t\t\t// At this point the editor pane container is not healthy\n\t\t\t\t// and as such, we remove it from the pane parent and hide\n\t\t\t\t// it so that we have a chance to show an error placeholder.\n\t\t\t\t// Not doing so would result in multiple `.editor-instance`\n\t\t\t\t// lingering around in the DOM.\n\n\t\t\t\teditorPaneContainer.remove();\n\t\t\t\thide(editorPaneContainer);\n\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\treturn editorPane;\n\t}\n\n\tprivate doInstantiateEditorPane(descriptor: IEditorPaneDescriptor): EditorPane {\n\n\t\t// Return early if already instantiated\n\t\tconst existingEditorPane = this.editorPanes.find(editorPane => descriptor.describes(editorPane));\n\t\tif (existingEditorPane) {\n\t\t\treturn existingEditorPane;\n\t\t}\n\n\t\t// Otherwise instantiate new\n\t\tconst editorPane = this._register(descriptor.instantiate(this.instantiationService, this.groupView));\n\t\tthis.editorPanes.push(editorPane);\n\n\t\treturn editorPane;\n\t}\n\n\tprivate doSetActiveEditorPane(editorPane: EditorPane | null) {\n\t\tthis._activeEditorPane = editorPane;\n\n\t\t// Clear out previous active editor pane listeners\n\t\tthis.activeEditorPaneDisposables.clear();\n\n\t\t// Listen to editor pane changes\n\t\tif (editorPane) {\n\t\t\tthis.activeEditorPaneDisposables.add(editorPane.onDidChangeSizeConstraints(e => this._onDidChangeSizeConstraints.fire(e)));\n\t\t\tthis.activeEditorPaneDisposables.add(editorPane.onDidFocus(() => this._onDidFocus.fire()));\n\t\t}\n\n\t\t// Indicate that size constraints could have changed due to new editor\n\t\tthis._onDidChangeSizeConstraints.fire(undefined);\n\t}\n\n\tprivate async doSetInput(editorPane: EditorPane, editor: EditorInput, options: IEditorOptions | undefined, context: IEditorOpenContext): Promise<{ changed: boolean; cancelled: boolean }> {\n\n\t\t// If the input did not change, return early and only\n\t\t// apply the options unless the options instruct us to\n\t\t// force open it even if it is the same\n\t\tlet inputMatches = editorPane.input?.matches(editor);\n\t\tif (inputMatches && !options?.forceReload) {\n\n\t\t\t// We have to await a pending `setInput()` call for this\n\t\t\t// pane before we can call into `setOptions()`, otherwise\n\t\t\t// we risk calling when the input is not yet fully applied.\n\t\t\tif (this.mapEditorPaneToPendingSetInput.has(editorPane)) {\n\t\t\t\tawait this.mapEditorPaneToPendingSetInput.get(editorPane);\n\t\t\t}\n\n\t\t\t// At this point, the input might have changed, so we check again\n\t\t\tinputMatches = editorPane.input?.matches(editor);\n\t\t\tif (inputMatches) {\n\t\t\t\teditorPane.setOptions(options);\n\t\t\t}\n\n\t\t\treturn { changed: false, cancelled: !inputMatches };\n\t\t}\n\n\t\t// Start a new editor input operation to report progress\n\t\t// and to support cancellation. Any new operation that is\n\t\t// started will cancel the previous one.\n\t\tconst operation = this.editorOperation.start(this.layoutService.isRestored() ? 800 : 3200);\n\n\t\tlet cancelled = false;\n\t\ttry {\n\n\t\t\t// Clear the current input before setting new input\n\t\t\t// This ensures that a slow loading input will not\n\t\t\t// be visible for the duration of the new input to\n\t\t\t// load (https://github.com/microsoft/vscode/issues/34697)\n\t\t\teditorPane.clearInput();\n\n\t\t\t// Set the input to the editor pane and keep track of it\n\t\t\tconst pendingSetInput = editorPane.setInput(editor, options, context, operation.token);\n\t\t\tthis.mapEditorPaneToPendingSetInput.set(editorPane, pendingSetInput);\n\t\t\tawait pendingSetInput;\n\n\t\t\tif (!operation.isCurrent()) {\n\t\t\t\tcancelled = true;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (!operation.isCurrent()) {\n\t\t\t\tcancelled = true;\n\t\t\t} else {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t} finally {\n\t\t\tif (operation.isCurrent()) {\n\t\t\t\tthis.mapEditorPaneToPendingSetInput.delete(editorPane);\n\t\t\t}\n\t\t\toperation.stop();\n\t\t}\n\n\t\treturn { changed: !inputMatches, cancelled };\n\t}\n\n\tprivate doHideActiveEditorPane(): void {\n\t\tif (!this._activeEditorPane) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop any running operation\n\t\tthis.editorOperation.stop();\n\n\t\t// Indicate to editor pane before removing the editor from\n\t\t// the DOM to give a chance to persist certain state that\n\t\t// might depend on still being the active DOM element.\n\t\tthis.safeRun(() => this._activeEditorPane?.clearInput());\n\t\tthis.safeRun(() => this._activeEditorPane?.setVisible(false));\n\n\t\t// Clear any pending setInput promise\n\t\tthis.mapEditorPaneToPendingSetInput.delete(this._activeEditorPane);\n\n\t\t// Remove editor pane from parent\n\t\tconst editorPaneContainer = this._activeEditorPane.getContainer();\n\t\tif (editorPaneContainer) {\n\t\t\teditorPaneContainer.remove();\n\t\t\thide(editorPaneContainer);\n\t\t}\n\n\t\t// Clear active editor pane\n\t\tthis.doSetActiveEditorPane(null);\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\tif (this._activeEditorPane?.input && editor.matches(this._activeEditorPane.input)) {\n\t\t\tthis.doHideActiveEditorPane();\n\t\t}\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tthis.safeRun(() => this._activeEditorPane?.setVisible(visible));\n\t}\n\n\tlayout(pagePosition: IDomNodePagePosition): void {\n\t\tthis.pagePosition = pagePosition;\n\n\t\tthis.safeRun(() => this._activeEditorPane?.layout(new Dimension(pagePosition.width, pagePosition.height), pagePosition));\n\t}\n\n\tsetBoundarySashes(sashes: IBoundarySashes): void {\n\t\tthis.boundarySashes = sashes;\n\n\t\tthis.safeRun(() => this._activeEditorPane?.setBoundarySashes(sashes));\n\t}\n\n\tprivate safeRun(fn: () => void): void {\n\n\t\t// We delegate many calls to the active editor pane which\n\t\t// can be any kind of editor. We must ensure that our calls\n\t\t// do not throw, for example in `layout()` because that can\n\t\t// mess with the grid layout.\n\n\t\ttry {\n\t\t\tfn();\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\t\t}\n\t}\n}\n"]}