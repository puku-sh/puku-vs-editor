{"version":3,"sources":["vs/workbench/browser/parts/editor/editorDropTarget.ts"],"names":[],"mappings":"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","file":"editorDropTarget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/editordroptarget.css';\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { $, addDisposableListener, DragAndDropObserver, EventHelper, EventType, getWindow, isAncestor } from '../../../../base/browser/dom.js';\nimport { renderFormattedText } from '../../../../base/browser/formattedTextRenderer.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh, isWeb } from '../../../../base/common/platform.js';\nimport { assertReturnsAllDefined, assertReturnsDefined } from '../../../../base/common/types.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { activeContrastBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, Themable } from '../../../../platform/theme/common/themeService.js';\nimport { isTemporaryWorkspace, IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { CodeDataTransfers, containsDragType, Extensions as DragAndDropExtensions, IDragAndDropContributionRegistry, LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { DraggedEditorGroupIdentifier, DraggedEditorIdentifier, extractTreeDropData, ResourcesDropHandler } from '../../dnd.js';\nimport { IEditorGroupView, prepareMoveCopyEditors } from './editor.js';\nimport { EditorInputCapabilities, IEditorIdentifier, IUntypedEditorInput } from '../../../common/editor.js';\nimport { EDITOR_DRAG_AND_DROP_BACKGROUND, EDITOR_DROP_INTO_PROMPT_BACKGROUND, EDITOR_DROP_INTO_PROMPT_BORDER, EDITOR_DROP_INTO_PROMPT_FOREGROUND } from '../../../common/theme.js';\nimport { GroupDirection, IEditorDropTargetDelegate, IEditorGroup, IEditorGroupsService, IMergeGroupOptions, MergeGroupMode } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ITreeViewsDnDService } from '../../../../editor/common/services/treeViewsDndService.js';\nimport { DraggedTreeItemsIdentifier } from '../../../../editor/common/services/treeViewsDnd.js';\n\ninterface IDropOperation {\n\tsplitDirection?: GroupDirection;\n}\n\nfunction isDropIntoEditorEnabledGlobally(configurationService: IConfigurationService) {\n\treturn configurationService.getValue<boolean>('editor.dropIntoEditor.enabled');\n}\n\nfunction isDragIntoEditorEvent(e: DragEvent): boolean {\n\treturn e.shiftKey;\n}\n\nclass DropOverlay extends Themable {\n\n\tprivate static readonly OVERLAY_ID = 'monaco-workbench-editor-drop-overlay';\n\n\tprivate container: HTMLElement | undefined;\n\tprivate overlay: HTMLElement | undefined;\n\tprivate dropIntoPromptElement?: HTMLSpanElement;\n\n\tprivate currentDropOperation: IDropOperation | undefined;\n\n\tprivate _disposed: boolean | undefined;\n\tget disposed(): boolean { return !!this._disposed; }\n\n\tprivate cleanupOverlayScheduler: RunOnceScheduler;\n\n\tprivate readonly editorTransfer = LocalSelectionTransfer.getInstance<DraggedEditorIdentifier>();\n\tprivate readonly groupTransfer = LocalSelectionTransfer.getInstance<DraggedEditorGroupIdentifier>();\n\tprivate readonly treeItemsTransfer = LocalSelectionTransfer.getInstance<DraggedTreeItemsIdentifier>();\n\n\tprivate readonly enableDropIntoEditor: boolean;\n\n\tconstructor(\n\t\tprivate readonly groupView: IEditorGroupView,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@ITreeViewsDnDService private readonly treeViewsDragAndDropService: ITreeViewsDnDService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.cleanupOverlayScheduler = this._register(new RunOnceScheduler(() => this.dispose(), 300));\n\n\t\tthis.enableDropIntoEditor = isDropIntoEditorEnabledGlobally(this.configurationService) && this.isDropIntoActiveEditorEnabled();\n\n\t\tthis.create();\n\t}\n\n\tprivate create(): void {\n\t\tconst overlayOffsetHeight = this.getOverlayOffsetHeight();\n\n\t\t// Container\n\t\tconst container = this.container = $('div', { id: DropOverlay.OVERLAY_ID });\n\t\tcontainer.style.top = `${overlayOffsetHeight}px`;\n\n\t\t// Parent\n\t\tthis.groupView.element.appendChild(container);\n\t\tthis.groupView.element.classList.add('dragged-over');\n\t\tthis._register(toDisposable(() => {\n\t\t\tcontainer.remove();\n\t\t\tthis.groupView.element.classList.remove('dragged-over');\n\t\t}));\n\n\t\t// Overlay\n\t\tthis.overlay = $('.editor-group-overlay-indicator');\n\t\tcontainer.appendChild(this.overlay);\n\n\t\tif (this.enableDropIntoEditor) {\n\t\t\tthis.dropIntoPromptElement = renderFormattedText(localize('dropIntoEditorPrompt', \"Hold __{0}__ to drop into editor\", isMacintosh ? 'â‡§' : 'Shift'), {});\n\t\t\tthis.dropIntoPromptElement.classList.add('editor-group-overlay-drop-into-prompt');\n\t\t\tthis.overlay.appendChild(this.dropIntoPromptElement);\n\t\t}\n\n\t\t// Overlay Event Handling\n\t\tthis.registerListeners(container);\n\n\t\t// Styles\n\t\tthis.updateStyles();\n\t}\n\n\toverride updateStyles(): void {\n\t\tconst overlay = assertReturnsDefined(this.overlay);\n\n\t\t// Overlay drop background\n\t\toverlay.style.backgroundColor = this.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND) || '';\n\n\t\t// Overlay contrast border (if any)\n\t\tconst activeContrastBorderColor = this.getColor(activeContrastBorder);\n\t\toverlay.style.outlineColor = activeContrastBorderColor || '';\n\t\toverlay.style.outlineOffset = activeContrastBorderColor ? '-2px' : '';\n\t\toverlay.style.outlineStyle = activeContrastBorderColor ? 'dashed' : '';\n\t\toverlay.style.outlineWidth = activeContrastBorderColor ? '2px' : '';\n\n\t\tif (this.dropIntoPromptElement) {\n\t\t\tthis.dropIntoPromptElement.style.backgroundColor = this.getColor(EDITOR_DROP_INTO_PROMPT_BACKGROUND) ?? '';\n\t\t\tthis.dropIntoPromptElement.style.color = this.getColor(EDITOR_DROP_INTO_PROMPT_FOREGROUND) ?? '';\n\n\t\t\tconst borderColor = this.getColor(EDITOR_DROP_INTO_PROMPT_BORDER);\n\t\t\tif (borderColor) {\n\t\t\t\tthis.dropIntoPromptElement.style.borderWidth = '1px';\n\t\t\t\tthis.dropIntoPromptElement.style.borderStyle = 'solid';\n\t\t\t\tthis.dropIntoPromptElement.style.borderColor = borderColor;\n\t\t\t} else {\n\t\t\t\tthis.dropIntoPromptElement.style.borderWidth = '0';\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate registerListeners(container: HTMLElement): void {\n\t\tthis._register(new DragAndDropObserver(container, {\n\t\t\tonDragOver: e => {\n\t\t\t\tif (this.enableDropIntoEditor && isDragIntoEditorEvent(e)) {\n\t\t\t\t\tthis.dispose();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst isDraggingGroup = this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t\tconst isDraggingEditor = this.editorTransfer.hasData(DraggedEditorIdentifier.prototype);\n\n\t\t\t\t// Update the dropEffect to \"copy\" if there is no local data to be dragged because\n\t\t\t\t// in that case we can only copy the data into and not move it from its source\n\t\t\t\tif (!isDraggingEditor && !isDraggingGroup && e.dataTransfer) {\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}\n\n\t\t\t\t// Find out if operation is valid\n\t\t\t\tlet isCopy = true;\n\t\t\t\tif (isDraggingGroup) {\n\t\t\t\t\tisCopy = this.isCopyOperation(e);\n\t\t\t\t} else if (isDraggingEditor) {\n\t\t\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\t\t\tisCopy = this.isCopyOperation(e, data[0].identifier);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!isCopy) {\n\t\t\t\t\tconst sourceGroupView = this.findSourceGroupView();\n\t\t\t\t\tif (sourceGroupView === this.groupView) {\n\t\t\t\t\t\tif (isDraggingGroup || (isDraggingEditor && sourceGroupView.count < 2)) {\n\t\t\t\t\t\t\tthis.hideOverlay();\n\t\t\t\t\t\t\treturn; // do not allow to drop group/editor on itself if this results in an empty group\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Position overlay and conditionally enable or disable\n\t\t\t\t// editor group splitting support based on setting and\n\t\t\t\t// keymodifiers used.\n\t\t\t\tlet splitOnDragAndDrop = !!this.editorGroupService.partOptions.splitOnDragAndDrop;\n\t\t\t\tif (this.isToggleSplitOperation(e)) {\n\t\t\t\t\tsplitOnDragAndDrop = !splitOnDragAndDrop;\n\t\t\t\t}\n\t\t\t\tthis.positionOverlay(e.offsetX, e.offsetY, isDraggingGroup, splitOnDragAndDrop);\n\n\t\t\t\t// Make sure to stop any running cleanup scheduler to remove the overlay\n\t\t\t\tif (this.cleanupOverlayScheduler.isScheduled()) {\n\t\t\t\t\tthis.cleanupOverlayScheduler.cancel();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDragLeave: e => this.dispose(),\n\t\t\tonDragEnd: e => this.dispose(),\n\n\t\t\tonDrop: e => {\n\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t// Dispose overlay\n\t\t\t\tthis.dispose();\n\n\t\t\t\t// Handle drop if we have a valid operation\n\t\t\t\tif (this.currentDropOperation) {\n\t\t\t\t\tthis.handleDrop(e, this.currentDropOperation.splitDirection);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(addDisposableListener(container, EventType.MOUSE_OVER, () => {\n\t\t\t// Under some circumstances we have seen reports where the drop overlay is not being\n\t\t\t// cleaned up and as such the editor area remains under the overlay so that you cannot\n\t\t\t// type into the editor anymore. This seems related to using VMs and DND via host and\n\t\t\t// guest OS, though some users also saw it without VMs.\n\t\t\t// To protect against this issue we always destroy the overlay as soon as we detect a\n\t\t\t// mouse event over it. The delay is used to guarantee we are not interfering with the\n\t\t\t// actual DROP event that can also trigger a mouse over event.\n\t\t\tif (!this.cleanupOverlayScheduler.isScheduled()) {\n\t\t\t\tthis.cleanupOverlayScheduler.schedule();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate isDropIntoActiveEditorEnabled(): boolean {\n\t\treturn !!this.groupView.activeEditor?.hasCapability(EditorInputCapabilities.CanDropIntoEditor);\n\t}\n\n\tprivate findSourceGroupView(): IEditorGroup | undefined {\n\n\t\t// Check for group transfer\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\treturn this.editorGroupService.getGroup(data[0].identifier);\n\t\t\t}\n\t\t}\n\n\t\t// Check for editor transfer\n\t\telse if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\treturn this.editorGroupService.getGroup(data[0].identifier.groupId);\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate async handleDrop(event: DragEvent, splitDirection?: GroupDirection): Promise<void> {\n\n\t\t// Determine target group\n\t\tconst ensureTargetGroup = () => {\n\t\t\tlet targetGroup: IEditorGroup;\n\t\t\tif (typeof splitDirection === 'number') {\n\t\t\t\ttargetGroup = this.editorGroupService.addGroup(this.groupView, splitDirection);\n\t\t\t} else {\n\t\t\t\ttargetGroup = this.groupView;\n\t\t\t}\n\n\t\t\treturn targetGroup;\n\t\t};\n\n\t\t// Check for group transfer\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst sourceGroup = this.editorGroupService.getGroup(data[0].identifier);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tif (typeof splitDirection !== 'number' && sourceGroup === this.groupView) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split to new group\n\t\t\t\t\tlet targetGroup: IEditorGroup | undefined;\n\t\t\t\t\tif (typeof splitDirection === 'number') {\n\t\t\t\t\t\tif (this.isCopyOperation(event)) {\n\t\t\t\t\t\t\ttargetGroup = this.editorGroupService.copyGroup(sourceGroup, this.groupView, splitDirection);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttargetGroup = this.editorGroupService.moveGroup(sourceGroup, this.groupView, splitDirection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Merge into existing group\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet mergeGroupOptions: IMergeGroupOptions | undefined = undefined;\n\t\t\t\t\t\tif (this.isCopyOperation(event)) {\n\t\t\t\t\t\t\tmergeGroupOptions = { mode: MergeGroupMode.COPY_EDITORS };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.editorGroupService.mergeGroup(sourceGroup, this.groupView, mergeGroupOptions);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (targetGroup) {\n\t\t\t\t\t\tthis.editorGroupService.activateGroup(targetGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for editor transfer\n\t\telse if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst draggedEditors = data;\n\t\t\t\tconst firstDraggedEditor = data[0].identifier;\n\n\t\t\t\tconst sourceGroup = this.editorGroupService.getGroup(firstDraggedEditor.groupId);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tconst copyEditor = this.isCopyOperation(event, firstDraggedEditor);\n\t\t\t\t\tlet targetGroup: IEditorGroup | undefined = undefined;\n\n\t\t\t\t\t// Optimization: if we move the last editor of an editor group\n\t\t\t\t\t// and we are configured to close empty editor groups, we can\n\t\t\t\t\t// rather move the entire editor group according to the direction\n\t\t\t\t\tif (this.editorGroupService.partOptions.closeEmptyGroups && sourceGroup.count === 1 && typeof splitDirection === 'number' && !copyEditor) {\n\t\t\t\t\t\ttargetGroup = this.editorGroupService.moveGroup(sourceGroup, this.groupView, splitDirection);\n\t\t\t\t\t}\n\n\t\t\t\t\t// In any other case do a normal move/copy operation\n\t\t\t\t\telse {\n\t\t\t\t\t\ttargetGroup = ensureTargetGroup();\n\t\t\t\t\t\tif (sourceGroup === targetGroup) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst editorsWithOptions = prepareMoveCopyEditors(this.groupView, draggedEditors.map(editor => editor.identifier.editor));\n\t\t\t\t\t\tif (!copyEditor) {\n\t\t\t\t\t\t\tsourceGroup.moveEditors(editorsWithOptions, targetGroup);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsourceGroup.copyEditors(editorsWithOptions, targetGroup);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Ensure target has focus\n\t\t\t\t\ttargetGroup.focus();\n\t\t\t\t}\n\n\t\t\t\tthis.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for tree items\n\t\telse if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n\t\t\tconst data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst editors: IUntypedEditorInput[] = [];\n\t\t\t\tfor (const id of data) {\n\t\t\t\t\tconst dataTransferItem = await this.treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n\t\t\t\t\tif (dataTransferItem) {\n\t\t\t\t\t\tconst treeDropData = await extractTreeDropData(dataTransferItem);\n\t\t\t\t\t\teditors.push(...treeDropData.map(editor => ({ ...editor, options: { ...editor.options, pinned: true } })));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (editors.length) {\n\t\t\t\t\tthis.editorService.openEditors(editors, ensureTargetGroup(), { validateTrust: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.treeItemsTransfer.clearData(DraggedTreeItemsIdentifier.prototype);\n\t\t}\n\n\t\t// Check for URI transfer\n\t\telse {\n\t\t\tconst dropHandler = this.instantiationService.createInstance(ResourcesDropHandler, { allowWorkspaceOpen: !isWeb || isTemporaryWorkspace(this.contextService.getWorkspace()) });\n\t\t\tdropHandler.handleDrop(event, getWindow(this.groupView.element), () => ensureTargetGroup(), targetGroup => targetGroup?.focus());\n\t\t}\n\t}\n\n\tprivate isCopyOperation(e: DragEvent, draggedEditor?: IEditorIdentifier): boolean {\n\t\tif (draggedEditor?.editor.hasCapability(EditorInputCapabilities.Singleton)) {\n\t\t\treturn false; // Singleton editors cannot be split\n\t\t}\n\n\t\treturn (e.ctrlKey && !isMacintosh) || (e.altKey && isMacintosh);\n\t}\n\n\tprivate isToggleSplitOperation(e: DragEvent): boolean {\n\t\treturn (e.altKey && !isMacintosh) || (e.shiftKey && isMacintosh);\n\t}\n\n\tprivate positionOverlay(mousePosX: number, mousePosY: number, isDraggingGroup: boolean, enableSplitting: boolean): void {\n\t\tconst preferSplitVertically = this.editorGroupService.partOptions.openSideBySideDirection === 'right';\n\n\t\tconst editorControlWidth = this.groupView.element.clientWidth;\n\t\tconst editorControlHeight = this.groupView.element.clientHeight - this.getOverlayOffsetHeight();\n\n\t\tlet edgeWidthThresholdFactor: number;\n\t\tlet edgeHeightThresholdFactor: number;\n\t\tif (enableSplitting) {\n\t\t\tif (isDraggingGroup) {\n\t\t\t\tedgeWidthThresholdFactor = preferSplitVertically ? 0.3 : 0.1; // give larger threshold when dragging group depending on preferred split direction\n\t\t\t} else {\n\t\t\t\tedgeWidthThresholdFactor = 0.1; // 10% threshold to split if dragging editors\n\t\t\t}\n\n\t\t\tif (isDraggingGroup) {\n\t\t\t\tedgeHeightThresholdFactor = preferSplitVertically ? 0.1 : 0.3; // give larger threshold when dragging group depending on preferred split direction\n\t\t\t} else {\n\t\t\t\tedgeHeightThresholdFactor = 0.1; // 10% threshold to split if dragging editors\n\t\t\t}\n\t\t} else {\n\t\t\tedgeWidthThresholdFactor = 0;\n\t\t\tedgeHeightThresholdFactor = 0;\n\t\t}\n\n\t\tconst edgeWidthThreshold = editorControlWidth * edgeWidthThresholdFactor;\n\t\tconst edgeHeightThreshold = editorControlHeight * edgeHeightThresholdFactor;\n\n\t\tconst splitWidthThreshold = editorControlWidth / 3;\t\t// offer to split left/right at 33%\n\t\tconst splitHeightThreshold = editorControlHeight / 3;\t// offer to split up/down at 33%\n\n\t\t// No split if mouse is above certain threshold in the center of the view\n\t\tlet splitDirection: GroupDirection | undefined;\n\t\tif (\n\t\t\tmousePosX > edgeWidthThreshold && mousePosX < editorControlWidth - edgeWidthThreshold &&\n\t\t\tmousePosY > edgeHeightThreshold && mousePosY < editorControlHeight - edgeHeightThreshold\n\t\t) {\n\t\t\tsplitDirection = undefined;\n\t\t}\n\n\t\t// Offer to split otherwise\n\t\telse {\n\n\t\t\t// User prefers to split vertically: offer a larger hitzone\n\t\t\t// for this direction like so:\n\t\t\t// ----------------------------------------------\n\t\t\t// |\t\t|\t\tSPLIT UP\t\t|\t\t\t|\n\t\t\t// | SPLIT \t|-----------------------|\tSPLIT\t|\n\t\t\t// |\t\t|\t\t  MERGE\t\t\t|\t\t\t|\n\t\t\t// | LEFT\t|-----------------------|\tRIGHT\t|\n\t\t\t// |\t\t|\t\tSPLIT DOWN\t\t|\t\t\t|\n\t\t\t// ----------------------------------------------\n\t\t\tif (preferSplitVertically) {\n\t\t\t\tif (mousePosX < splitWidthThreshold) {\n\t\t\t\t\tsplitDirection = GroupDirection.LEFT;\n\t\t\t\t} else if (mousePosX > splitWidthThreshold * 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.RIGHT;\n\t\t\t\t} else if (mousePosY < editorControlHeight / 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.UP;\n\t\t\t\t} else {\n\t\t\t\t\tsplitDirection = GroupDirection.DOWN;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// User prefers to split horizontally: offer a larger hitzone\n\t\t\t// for this direction like so:\n\t\t\t// ----------------------------------------------\n\t\t\t// |\t\t\t\tSPLIT UP\t\t\t\t\t|\n\t\t\t// |--------------------------------------------|\n\t\t\t// |  SPLIT LEFT  |\t   MERGE\t|  SPLIT RIGHT  |\n\t\t\t// |--------------------------------------------|\n\t\t\t// |\t\t\t\tSPLIT DOWN\t\t\t\t\t|\n\t\t\t// ----------------------------------------------\n\t\t\telse {\n\t\t\t\tif (mousePosY < splitHeightThreshold) {\n\t\t\t\t\tsplitDirection = GroupDirection.UP;\n\t\t\t\t} else if (mousePosY > splitHeightThreshold * 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.DOWN;\n\t\t\t\t} else if (mousePosX < editorControlWidth / 2) {\n\t\t\t\t\tsplitDirection = GroupDirection.LEFT;\n\t\t\t\t} else {\n\t\t\t\t\tsplitDirection = GroupDirection.RIGHT;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Draw overlay based on split direction\n\t\tswitch (splitDirection) {\n\t\t\tcase GroupDirection.UP:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '50%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tcase GroupDirection.DOWN:\n\t\t\t\tthis.doPositionOverlay({ top: '50%', left: '0', width: '100%', height: '50%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tcase GroupDirection.LEFT:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '50%', height: '100%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tcase GroupDirection.RIGHT:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '50%', width: '50%', height: '100%' });\n\t\t\t\tthis.toggleDropIntoPrompt(false);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '100%' });\n\t\t\t\tthis.toggleDropIntoPrompt(true);\n\t\t}\n\n\t\t// Make sure the overlay is visible now\n\t\tconst overlay = assertReturnsDefined(this.overlay);\n\t\toverlay.style.opacity = '1';\n\n\t\t// Enable transition after a timeout to prevent initial animation\n\t\tsetTimeout(() => overlay.classList.add('overlay-move-transition'), 0);\n\n\t\t// Remember as current split direction\n\t\tthis.currentDropOperation = { splitDirection };\n\t}\n\n\tprivate doPositionOverlay(options: { top: string; left: string; width: string; height: string }): void {\n\t\tconst [container, overlay] = assertReturnsAllDefined(this.container, this.overlay);\n\n\t\t// Container\n\t\tconst offsetHeight = this.getOverlayOffsetHeight();\n\t\tif (offsetHeight) {\n\t\t\tcontainer.style.height = `calc(100% - ${offsetHeight}px)`;\n\t\t} else {\n\t\t\tcontainer.style.height = '100%';\n\t\t}\n\n\t\t// Overlay\n\t\toverlay.style.top = options.top;\n\t\toverlay.style.left = options.left;\n\t\toverlay.style.width = options.width;\n\t\toverlay.style.height = options.height;\n\t}\n\n\tprivate getOverlayOffsetHeight(): number {\n\n\t\t// With tabs and opened editors: use the area below tabs as drop target\n\t\tif (!this.groupView.isEmpty && this.editorGroupService.partOptions.showTabs === 'multiple') {\n\t\t\treturn this.groupView.titleHeight.offset;\n\t\t}\n\n\t\t// Without tabs or empty group: use entire editor area as drop target\n\t\treturn 0;\n\t}\n\n\tprivate hideOverlay(): void {\n\t\tconst overlay = assertReturnsDefined(this.overlay);\n\n\t\t// Reset overlay\n\t\tthis.doPositionOverlay({ top: '0', left: '0', width: '100%', height: '100%' });\n\t\toverlay.style.opacity = '0';\n\t\toverlay.classList.remove('overlay-move-transition');\n\n\t\t// Reset current operation\n\t\tthis.currentDropOperation = undefined;\n\t}\n\n\tprivate toggleDropIntoPrompt(showing: boolean) {\n\t\tif (!this.dropIntoPromptElement) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dropIntoPromptElement.style.opacity = showing ? '1' : '0';\n\t}\n\n\tcontains(element: HTMLElement): boolean {\n\t\treturn element === this.container || element === this.overlay;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis._disposed = true;\n\t}\n}\n\nexport class EditorDropTarget extends Themable {\n\n\tprivate _overlay?: DropOverlay;\n\n\tprivate counter = 0;\n\n\tprivate readonly editorTransfer = LocalSelectionTransfer.getInstance<DraggedEditorIdentifier>();\n\tprivate readonly groupTransfer = LocalSelectionTransfer.getInstance<DraggedEditorGroupIdentifier>();\n\n\tconstructor(\n\t\tprivate readonly container: HTMLElement,\n\t\tprivate readonly delegate: IEditorDropTargetDelegate,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate get overlay(): DropOverlay | undefined {\n\t\tif (this._overlay && !this._overlay.disposed) {\n\t\t\treturn this._overlay;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(addDisposableListener(this.container, EventType.DRAG_ENTER, e => this.onDragEnter(e)));\n\t\tthis._register(addDisposableListener(this.container, EventType.DRAG_LEAVE, () => this.onDragLeave()));\n\t\tfor (const target of [this.container, getWindow(this.container)]) {\n\t\t\tthis._register(addDisposableListener(target, EventType.DRAG_END, () => this.onDragEnd()));\n\t\t}\n\t}\n\n\tprivate onDragEnter(event: DragEvent): void {\n\t\tif (isDropIntoEditorEnabledGlobally(this.configurationService) && isDragIntoEditorEvent(event)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.counter++;\n\n\t\t// Validate transfer\n\t\tif (\n\t\t\t!this.editorTransfer.hasData(DraggedEditorIdentifier.prototype) &&\n\t\t\t!this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype) &&\n\t\t\tevent.dataTransfer\n\t\t) {\n\t\t\tconst dndContributions = Registry.as<IDragAndDropContributionRegistry>(DragAndDropExtensions.DragAndDropContribution).getAll();\n\t\t\tconst dndContributionKeys = Array.from(dndContributions).map(e => e.dataFormatKey);\n\t\t\tif (!containsDragType(event, DataTransfers.FILES, CodeDataTransfers.FILES, DataTransfers.RESOURCES, CodeDataTransfers.EDITORS, ...dndContributionKeys)) { // see https://github.com/microsoft/vscode/issues/25789\n\t\t\t\tevent.dataTransfer.dropEffect = 'none';\n\t\t\t\treturn; // unsupported transfer\n\t\t\t}\n\t\t}\n\n\t\t// Signal DND start\n\t\tthis.updateContainer(true);\n\n\t\tconst target = event.target as HTMLElement;\n\t\tif (target) {\n\n\t\t\t// Somehow we managed to move the mouse quickly out of the current overlay, so destroy it\n\t\t\tif (this.overlay && !this.overlay.contains(target)) {\n\t\t\t\tthis.disposeOverlay();\n\t\t\t}\n\n\t\t\t// Create overlay over target\n\t\t\tif (!this.overlay) {\n\t\t\t\tconst targetGroupView = this.findTargetGroupView(target);\n\t\t\t\tif (targetGroupView) {\n\t\t\t\t\tthis._overlay = this.instantiationService.createInstance(DropOverlay, targetGroupView);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onDragLeave(): void {\n\t\tthis.counter--;\n\n\t\tif (this.counter === 0) {\n\t\t\tthis.updateContainer(false);\n\t\t}\n\t}\n\n\tprivate onDragEnd(): void {\n\t\tthis.counter = 0;\n\n\t\tthis.updateContainer(false);\n\t\tthis.disposeOverlay();\n\t}\n\n\tprivate findTargetGroupView(child: HTMLElement): IEditorGroupView | undefined {\n\t\tconst groups = this.editorGroupService.groups as IEditorGroupView[];\n\n\t\treturn groups.find(groupView => isAncestor(child, groupView.element) || this.delegate.containsGroup?.(groupView));\n\t}\n\n\tprivate updateContainer(isDraggedOver: boolean): void {\n\t\tthis.container.classList.toggle('dragged-over', isDraggedOver);\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.disposeOverlay();\n\t}\n\n\tprivate disposeOverlay(): void {\n\t\tif (this.overlay) {\n\t\t\tthis.overlay.dispose();\n\t\t\tthis._overlay = undefined;\n\t\t}\n\t}\n}\n"]}