{"version":3,"sources":["vs/workbench/browser/parts/editor/textDiffEditor.ts"],"names":[],"mappings":"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","file":"textDiffEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { isObject, assertReturnsDefined } from '../../../../base/common/types.js';\nimport { ICodeEditor, IDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IDiffEditorOptions, IEditorOptions as ICodeEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { AbstractTextEditor, IEditorConfiguration } from './textEditor.js';\nimport { TEXT_DIFF_EDITOR_ID, IEditorFactoryRegistry, EditorExtensions, ITextDiffEditorPane, IEditorOpenContext, isEditorInput, isTextEditorViewState, createTooLargeFileError } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { applyTextEditorOptions } from '../../../common/editor/editorOptions.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { TextDiffEditorModel } from '../../../common/editor/textDiffEditorModel.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITextResourceConfigurationChangeEvent, ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { TextFileOperationError, TextFileOperationResult } from '../../../services/textfile/common/textfiles.js';\nimport { ScrollType, IDiffEditorViewState, IDiffEditorModel, IDiffEditorViewModel } from '../../../../editor/common/editorCommon.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { EditorActivation, ITextEditorOptions } from '../../../../platform/editor/common/editor.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { multibyteAwareBtoa } from '../../../../base/common/strings.js';\nimport { ByteSize, FileOperationError, FileOperationResult, IFileService, TooLargeFileOperationError } from '../../../../platform/files/common/files.js';\nimport { IBoundarySashes } from '../../../../base/browser/ui/sash/sash.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { DiffEditorWidget } from '../../../../editor/browser/widget/diffEditor/diffEditorWidget.js';\n\n/**\n * The text editor that leverages the diff text editor for the editing experience.\n */\nexport class TextDiffEditor extends AbstractTextEditor<IDiffEditorViewState> implements ITextDiffEditorPane {\n\tstatic readonly ID = TEXT_DIFF_EDITOR_ID;\n\n\tprivate diffEditorControl: IDiffEditor | undefined = undefined;\n\n\tprivate inputLifecycleStopWatch: StopWatch | undefined = undefined;\n\n\toverride get scopedContextKeyService(): IContextKeyService | undefined {\n\t\tif (!this.diffEditorControl) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst originalEditor = this.diffEditorControl.getOriginalEditor();\n\t\tconst modifiedEditor = this.diffEditorControl.getModifiedEditor();\n\n\t\treturn (originalEditor.hasTextFocus() ? originalEditor : modifiedEditor).invokeWithinContext(accessor => accessor.get(IContextKeyService));\n\t}\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@ITextResourceConfigurationService configurationService: ITextResourceConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService\n\t) {\n\t\tsuper(TextDiffEditor.ID, group, telemetryService, instantiationService, storageService, configurationService, themeService, editorService, editorGroupService, fileService);\n\t}\n\n\toverride getTitle(): string {\n\t\tif (this.input) {\n\t\t\treturn this.input.getName();\n\t\t}\n\n\t\treturn localize('textDiffEditor', \"Text Diff Editor\");\n\t}\n\n\tprotected override createEditorControl(parent: HTMLElement, configuration: ICodeEditorOptions): void {\n\t\tthis.diffEditorControl = this._register(this.instantiationService.createInstance(DiffEditorWidget, parent, configuration, {}));\n\t}\n\n\tprotected updateEditorControlOptions(options: ICodeEditorOptions): void {\n\t\tthis.diffEditorControl?.updateOptions(options);\n\t}\n\n\tprotected getMainControl(): ICodeEditor | undefined {\n\t\treturn this.diffEditorControl?.getModifiedEditor();\n\t}\n\n\tprivate _previousViewModel: IDiffEditorViewModel | null = null;\n\n\toverride async setInput(input: DiffEditorInput, options: ITextEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tif (this._previousViewModel) {\n\t\t\tthis._previousViewModel.dispose();\n\t\t\tthis._previousViewModel = null;\n\t\t}\n\n\t\t// Cleanup previous things associated with the input\n\t\tthis.inputLifecycleStopWatch = undefined;\n\n\t\t// Set input and resolve\n\t\tawait super.setInput(input, options, context, token);\n\n\t\ttry {\n\t\t\tconst resolvedModel = await input.resolve();\n\n\t\t\t// Check for cancellation\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// Fallback to open as binary if not text\n\t\t\tif (!(resolvedModel instanceof TextDiffEditorModel)) {\n\t\t\t\tthis.openAsBinary(input, options);\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// Set Editor Model\n\t\t\tconst control = assertReturnsDefined(this.diffEditorControl);\n\t\t\tconst resolvedDiffEditorModel = resolvedModel;\n\n\t\t\tconst vm = resolvedDiffEditorModel.textDiffEditorModel ? control.createViewModel(resolvedDiffEditorModel.textDiffEditorModel) : null;\n\t\t\tthis._previousViewModel = vm;\n\t\t\tawait vm?.waitForDiff();\n\t\t\tcontrol.setModel(vm);\n\n\t\t\t// Restore view state (unless provided by options)\n\t\t\tlet hasPreviousViewState = false;\n\t\t\tif (!isTextEditorViewState(options?.viewState)) {\n\t\t\t\thasPreviousViewState = this.restoreTextDiffEditorViewState(input, options, context, control);\n\t\t\t}\n\n\t\t\t// Apply options to editor if any\n\t\t\tlet optionsGotApplied = false;\n\t\t\tif (options) {\n\t\t\t\toptionsGotApplied = applyTextEditorOptions(options, control, ScrollType.Immediate);\n\t\t\t}\n\n\t\t\tif (!optionsGotApplied && !hasPreviousViewState) {\n\t\t\t\tcontrol.revealFirstDiff();\n\t\t\t}\n\n\t\t\t// Since the resolved model provides information about being readonly\n\t\t\t// or not, we apply it here to the editor even though the editor input\n\t\t\t// was already asked for being readonly or not. The rationale is that\n\t\t\t// a resolved model might have more specific information about being\n\t\t\t// readonly or not that the input did not have.\n\t\t\tcontrol.updateOptions({\n\t\t\t\t...this.getReadonlyConfiguration(resolvedDiffEditorModel.modifiedModel?.isReadonly()),\n\t\t\t\toriginalEditable: !resolvedDiffEditorModel.originalModel?.isReadonly()\n\t\t\t});\n\n\t\t\tcontrol.handleInitialized();\n\n\t\t\t// Start to measure input lifecycle\n\t\t\tthis.inputLifecycleStopWatch = new StopWatch(false);\n\t\t} catch (error) {\n\t\t\tawait this.handleSetInputError(error, input, options);\n\t\t}\n\t}\n\n\tprivate async handleSetInputError(error: Error, input: DiffEditorInput, options: ITextEditorOptions | undefined): Promise<void> {\n\n\t\t// Handle case where content appears to be binary\n\t\tif (this.isFileBinaryError(error)) {\n\t\t\treturn this.openAsBinary(input, options);\n\t\t}\n\n\t\t// Handle case where a file is too large to open without confirmation\n\t\tif ((<FileOperationError>error).fileOperationResult === FileOperationResult.FILE_TOO_LARGE) {\n\t\t\tlet message: string;\n\t\t\tif (error instanceof TooLargeFileOperationError) {\n\t\t\t\tmessage = localize('fileTooLargeForHeapErrorWithSize', \"At least one file is not displayed in the text compare editor because it is very large ({0}).\", ByteSize.formatSize(error.size));\n\t\t\t} else {\n\t\t\t\tmessage = localize('fileTooLargeForHeapErrorWithoutSize', \"At least one file is not displayed in the text compare editor because it is very large.\");\n\t\t\t}\n\n\t\t\tthrow createTooLargeFileError(this.group, input, options, message, this.preferencesService);\n\t\t}\n\n\t\t// Otherwise make sure the error bubbles up\n\t\tthrow error;\n\t}\n\n\tprivate restoreTextDiffEditorViewState(editor: DiffEditorInput, options: ITextEditorOptions | undefined, context: IEditorOpenContext, control: IDiffEditor): boolean {\n\t\tconst editorViewState = this.loadEditorViewState(editor, context);\n\t\tif (editorViewState) {\n\t\t\tif (options?.selection && editorViewState.modified) {\n\t\t\t\teditorViewState.modified.cursorState = []; // prevent duplicate selections via options\n\t\t\t}\n\n\t\t\tcontrol.restoreViewState(editorViewState);\n\n\t\t\tif (options?.revealIfVisible) {\n\t\t\t\tcontrol.revealFirstDiff();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate openAsBinary(input: DiffEditorInput, options: ITextEditorOptions | undefined): void {\n\t\tconst original = input.original;\n\t\tconst modified = input.modified;\n\n\t\tconst binaryDiffInput = this.instantiationService.createInstance(DiffEditorInput, input.getName(), input.getDescription(), original, modified, true);\n\n\t\t// Forward binary flag to input if supported\n\t\tconst fileEditorFactory = Registry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).getFileEditorFactory();\n\t\tif (fileEditorFactory.isFileEditor(original)) {\n\t\t\toriginal.setForceOpenAsBinary();\n\t\t}\n\n\t\tif (fileEditorFactory.isFileEditor(modified)) {\n\t\t\tmodified.setForceOpenAsBinary();\n\t\t}\n\n\t\t// Replace this editor with the binary one\n\t\tthis.group.replaceEditors([{\n\t\t\teditor: input,\n\t\t\treplacement: binaryDiffInput,\n\t\t\toptions: {\n\t\t\t\t...options,\n\t\t\t\t// Make sure to not steal away the currently active group\n\t\t\t\t// because we are triggering another openEditor() call\n\t\t\t\t// and do not control the initial intent that resulted\n\t\t\t\t// in us now opening as binary.\n\t\t\t\tactivation: EditorActivation.PRESERVE,\n\t\t\t\tpinned: this.group.isPinned(input),\n\t\t\t\tsticky: this.group.isSticky(input)\n\t\t\t}\n\t\t}]);\n\t}\n\n\toverride setOptions(options: ITextEditorOptions | undefined): void {\n\t\tsuper.setOptions(options);\n\n\t\tif (options) {\n\t\t\tapplyTextEditorOptions(options, assertReturnsDefined(this.diffEditorControl), ScrollType.Smooth);\n\t\t}\n\t}\n\n\tprotected override shouldHandleConfigurationChangeEvent(e: ITextResourceConfigurationChangeEvent, resource: URI): boolean {\n\t\tif (super.shouldHandleConfigurationChangeEvent(e, resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn e.affectsConfiguration(resource, 'diffEditor') || e.affectsConfiguration(resource, 'accessibility.verbosity.diffEditor');\n\t}\n\n\tprotected override computeConfiguration(configuration: IEditorConfiguration): ICodeEditorOptions {\n\t\tconst editorConfiguration = super.computeConfiguration(configuration);\n\n\t\t// Handle diff editor specially by merging in diffEditor configuration\n\t\tif (isObject(configuration.diffEditor)) {\n\t\t\tconst diffEditorConfiguration: IDiffEditorOptions = deepClone(configuration.diffEditor);\n\n\t\t\t// User settings defines `diffEditor.codeLens`, but here we rename that to `diffEditor.diffCodeLens` to avoid collisions with `editor.codeLens`.\n\t\t\tdiffEditorConfiguration.diffCodeLens = diffEditorConfiguration.codeLens;\n\t\t\tdelete diffEditorConfiguration.codeLens;\n\n\t\t\t// User settings defines `diffEditor.wordWrap`, but here we rename that to `diffEditor.diffWordWrap` to avoid collisions with `editor.wordWrap`.\n\t\t\tdiffEditorConfiguration.diffWordWrap = <'off' | 'on' | 'inherit' | undefined>diffEditorConfiguration.wordWrap;\n\t\t\tdelete diffEditorConfiguration.wordWrap;\n\n\t\t\tObject.assign(editorConfiguration, diffEditorConfiguration);\n\t\t}\n\n\t\tconst verbose = configuration.accessibility?.verbosity?.diffEditor ?? false;\n\t\t(editorConfiguration as IDiffEditorOptions).accessibilityVerbose = verbose;\n\n\t\treturn editorConfiguration;\n\t}\n\n\tprotected override getConfigurationOverrides(configuration: IEditorConfiguration): IDiffEditorOptions {\n\t\treturn {\n\t\t\t...super.getConfigurationOverrides(configuration),\n\t\t\t...this.getReadonlyConfiguration(this.input?.isReadonly()),\n\t\t\toriginalEditable: this.input instanceof DiffEditorInput && !this.input.original.isReadonly(),\n\t\t\tlineDecorationsWidth: '2ch'\n\t\t};\n\t}\n\n\tprotected override updateReadonly(input: EditorInput): void {\n\t\tif (input instanceof DiffEditorInput) {\n\t\t\tthis.diffEditorControl?.updateOptions({\n\t\t\t\t...this.getReadonlyConfiguration(input.isReadonly()),\n\t\t\t\toriginalEditable: !input.original.isReadonly(),\n\t\t\t});\n\t\t} else {\n\t\t\tsuper.updateReadonly(input);\n\t\t}\n\t}\n\n\tprivate isFileBinaryError(error: Error[]): boolean;\n\tprivate isFileBinaryError(error: Error): boolean;\n\tprivate isFileBinaryError(error: Error | Error[]): boolean {\n\t\tif (Array.isArray(error)) {\n\t\t\tconst errors = error;\n\n\t\t\treturn errors.some(error => this.isFileBinaryError(error));\n\t\t}\n\n\t\treturn (<TextFileOperationError>error).textFileOperationResult === TextFileOperationResult.FILE_IS_BINARY;\n\t}\n\n\toverride clearInput(): void {\n\t\tif (this._previousViewModel) {\n\t\t\tthis._previousViewModel.dispose();\n\t\t\tthis._previousViewModel = null;\n\t\t}\n\n\t\tsuper.clearInput();\n\n\t\t// Log input lifecycle telemetry\n\t\tconst inputLifecycleElapsed = this.inputLifecycleStopWatch?.elapsed();\n\t\tthis.inputLifecycleStopWatch = undefined;\n\t\tif (typeof inputLifecycleElapsed === 'number') {\n\t\t\tthis.logInputLifecycleTelemetry(inputLifecycleElapsed, this.getControl()?.getModel()?.modified?.getLanguageId());\n\t\t}\n\n\t\t// Clear Model\n\t\tthis.diffEditorControl?.setModel(null);\n\t}\n\n\tprivate logInputLifecycleTelemetry(duration: number, languageId: string | undefined): void {\n\t\tlet collapseUnchangedRegions = false;\n\t\tif (this.diffEditorControl instanceof DiffEditorWidget) {\n\t\t\tcollapseUnchangedRegions = this.diffEditorControl.collapseUnchangedRegions;\n\t\t}\n\t\tthis.telemetryService.publicLog2<{\n\t\t\teditorVisibleTimeMs: number;\n\t\t\tlanguageId: string;\n\t\t\tcollapseUnchangedRegions: boolean;\n\t\t}, {\n\t\t\towner: 'hediet';\n\t\t\teditorVisibleTimeMs: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Indicates the time the diff editor was visible to the user' };\n\t\t\tlanguageId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Indicates for which language the diff editor was shown' };\n\t\t\tcollapseUnchangedRegions: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Indicates whether unchanged regions were collapsed' };\n\t\t\tcomment: 'This event gives insight about how long the diff editor was visible to the user.';\n\t\t}>('diffEditor.editorVisibleTime', {\n\t\t\teditorVisibleTimeMs: duration,\n\t\t\tlanguageId: languageId ?? '',\n\t\t\tcollapseUnchangedRegions,\n\t\t});\n\t}\n\n\toverride getControl(): IDiffEditor | undefined {\n\t\treturn this.diffEditorControl;\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tthis.diffEditorControl?.focus();\n\t}\n\n\toverride hasFocus(): boolean {\n\t\treturn this.diffEditorControl?.hasTextFocus() || super.hasFocus();\n\t}\n\n\tprotected override setEditorVisible(visible: boolean): void {\n\t\tsuper.setEditorVisible(visible);\n\n\t\tif (visible) {\n\t\t\tthis.diffEditorControl?.onVisible();\n\t\t} else {\n\t\t\tthis.diffEditorControl?.onHide();\n\t\t}\n\t}\n\n\toverride layout(dimension: Dimension): void {\n\t\tthis.diffEditorControl?.layout(dimension);\n\t}\n\n\toverride setBoundarySashes(sashes: IBoundarySashes) {\n\t\tthis.diffEditorControl?.setBoundarySashes(sashes);\n\t}\n\n\tprotected override tracksEditorViewState(input: EditorInput): boolean {\n\t\treturn input instanceof DiffEditorInput;\n\t}\n\n\tprotected override computeEditorViewState(resource: URI): IDiffEditorViewState | undefined {\n\t\tif (!this.diffEditorControl) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst model = this.diffEditorControl.getModel();\n\t\tif (!model?.modified || !model.original) {\n\t\t\treturn undefined; // view state always needs a model\n\t\t}\n\n\t\tconst modelUri = this.toEditorViewStateResource(model);\n\t\tif (!modelUri) {\n\t\t\treturn undefined; // model URI is needed to make sure we save the view state correctly\n\t\t}\n\n\t\tif (!isEqual(modelUri, resource)) {\n\t\t\treturn undefined; // prevent saving view state for a model that is not the expected one\n\t\t}\n\n\t\treturn this.diffEditorControl.saveViewState() ?? undefined;\n\t}\n\n\tprotected override toEditorViewStateResource(modelOrInput: IDiffEditorModel | EditorInput): URI | undefined {\n\t\tlet original: URI | undefined;\n\t\tlet modified: URI | undefined;\n\n\t\tif (modelOrInput instanceof DiffEditorInput) {\n\t\t\toriginal = modelOrInput.original.resource;\n\t\t\tmodified = modelOrInput.modified.resource;\n\t\t} else if (!isEditorInput(modelOrInput)) {\n\t\t\toriginal = modelOrInput.original.uri;\n\t\t\tmodified = modelOrInput.modified.uri;\n\t\t}\n\n\t\tif (!original || !modified) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// create a URI that is the Base64 concatenation of original + modified resource\n\t\treturn URI.from({ scheme: 'diff', path: `${multibyteAwareBtoa(original.toString())}${multibyteAwareBtoa(modified.toString())}` });\n\t}\n}\n"]}