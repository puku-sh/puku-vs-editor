{"version":3,"sources":["vs/workbench/browser/parts/editor/multiEditorTabsControl.ts"],"names":[],"mappings":"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","file":"multiEditorTabsControl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/multieditortabscontrol.css';\nimport { isLinux, isMacintosh, isWindows } from '../../../../base/common/platform.js';\nimport { shorten } from '../../../../base/common/labels.js';\nimport { EditorResourceAccessor, Verbosity, IEditorPartOptions, SideBySideEditor, DEFAULT_EDITOR_ASSOCIATION, EditorInputCapabilities, IUntypedEditorInput, preventEditorClose, EditorCloseMethod, EditorsOrder, IToolbarActions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { computeEditorAriaLabel } from '../../editor.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { EventType as TouchEventType, GestureEvent, Gesture } from '../../../../base/browser/touch.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { ResourceLabels, IResourceLabel, DEFAULT_LABELS_CONTAINER } from '../../labels.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { EditorCommandsContextActionRunner, EditorTabsControl } from './editorTabsControl.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IDisposable, dispose, DisposableStore, combinedDisposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { ScrollbarVisibility } from '../../../../base/common/scrollable.js';\nimport { getOrSet } from '../../../../base/common/map.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { TAB_INACTIVE_BACKGROUND, TAB_ACTIVE_BACKGROUND, TAB_BORDER, EDITOR_DRAG_AND_DROP_BACKGROUND, TAB_UNFOCUSED_ACTIVE_BACKGROUND, TAB_UNFOCUSED_ACTIVE_BORDER, TAB_ACTIVE_BORDER, TAB_HOVER_BACKGROUND, TAB_HOVER_BORDER, TAB_UNFOCUSED_HOVER_BACKGROUND, TAB_UNFOCUSED_HOVER_BORDER, EDITOR_GROUP_HEADER_TABS_BACKGROUND, WORKBENCH_BACKGROUND, TAB_ACTIVE_BORDER_TOP, TAB_UNFOCUSED_ACTIVE_BORDER_TOP, TAB_ACTIVE_MODIFIED_BORDER, TAB_INACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_ACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_INACTIVE_MODIFIED_BORDER, TAB_UNFOCUSED_INACTIVE_BACKGROUND, TAB_HOVER_FOREGROUND, TAB_UNFOCUSED_HOVER_FOREGROUND, EDITOR_GROUP_HEADER_TABS_BORDER, TAB_LAST_PINNED_BORDER, TAB_SELECTED_BORDER_TOP } from '../../../common/theme.js';\nimport { activeContrastBorder, contrastBorder, editorBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { ResourcesDropHandler, DraggedEditorIdentifier, DraggedEditorGroupIdentifier, extractTreeDropData, isWindowDraggedOver } from '../../dnd.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { MergeGroupMode, IMergeGroupOptions } from '../../../services/editor/common/editorGroupsService.js';\nimport { addDisposableListener, EventType, EventHelper, Dimension, scheduleAtNextAnimationFrame, findParentWithClass, clearNode, DragAndDropObserver, isMouseEvent, getWindow, $ } from '../../../../base/browser/dom.js';\nimport { localize } from '../../../../nls.js';\nimport { IEditorGroupsView, EditorServiceImpl, IEditorGroupView, IInternalEditorOpenOptions, IEditorPartsView, prepareMoveCopyEditors } from './editor.js';\nimport { CloseEditorTabAction, UnpinEditorAction } from './editorActions.js';\nimport { assertReturnsAllDefined, assertReturnsDefined } from '../../../../base/common/types.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { basenameOrAuthority } from '../../../../base/common/resources.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { IPath, win32, posix } from '../../../../base/common/path.js';\nimport { coalesce, insert } from '../../../../base/common/arrays.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { EditorActivation, IEditorOptions } from '../../../../platform/editor/common/editor.js';\nimport { UNLOCK_GROUP_COMMAND_ID } from './editorCommands.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { ITreeViewsDnDService } from '../../../../editor/common/services/treeViewsDndService.js';\nimport { DraggedTreeItemsIdentifier } from '../../../../editor/common/services/treeViewsDnd.js';\nimport { IEditorResolverService } from '../../../services/editor/common/editorResolverService.js';\nimport { IEditorTitleControlDimensions } from './editorTitleControl.js';\nimport { StickyEditorGroupModel, UnstickyEditorGroupModel } from '../../../common/editor/filteredEditorGroupModel.js';\nimport { IReadonlyEditorGroupModel } from '../../../common/editor/editorGroupModel.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { applyDragImage } from '../../../../base/browser/ui/dnd/dnd.js';\n\ninterface IEditorInputLabel {\n\treadonly editor: EditorInput;\n\n\treadonly name?: string;\n\tdescription?: string;\n\treadonly forceDescription?: boolean;\n\treadonly title?: string;\n\treadonly ariaLabel?: string;\n}\n\ninterface IMultiEditorTabsControlLayoutOptions {\n\n\t/**\n\t * Whether to force revealing the active tab, even when\n\t * the dimensions have not changed. This can be the case\n\t * when a tab was made active and needs to be revealed.\n\t */\n\treadonly forceRevealActiveTab?: true;\n}\n\ninterface IScheduledMultiEditorTabsControlLayout extends IDisposable {\n\n\t/**\n\t * Associated options with the layout call.\n\t */\n\toptions?: IMultiEditorTabsControlLayoutOptions;\n}\n\nexport class MultiEditorTabsControl extends EditorTabsControl {\n\n\tprivate static readonly SCROLLBAR_SIZES = {\n\t\tdefault: 3 as const,\n\t\tlarge: 10 as const\n\t};\n\n\tprivate static readonly TAB_WIDTH = {\n\t\tcompact: 38 as const,\n\t\tshrink: 80 as const,\n\t\tfit: 120 as const\n\t};\n\n\tprivate static readonly DRAG_OVER_OPEN_TAB_THRESHOLD = 1500;\n\n\tprivate static readonly MOUSE_WHEEL_EVENT_THRESHOLD = 150;\n\tprivate static readonly MOUSE_WHEEL_DISTANCE_THRESHOLD = 1.5;\n\n\tprivate titleContainer: HTMLElement | undefined;\n\tprivate tabsAndActionsContainer: HTMLElement | undefined;\n\tprivate tabsContainer: HTMLElement | undefined;\n\tprivate tabsScrollbar: ScrollableElement | undefined;\n\tprivate tabSizingFixedDisposables: DisposableStore | undefined;\n\n\tprivate readonly closeEditorAction = this._register(this.instantiationService.createInstance(CloseEditorTabAction, CloseEditorTabAction.ID, CloseEditorTabAction.LABEL));\n\tprivate readonly unpinEditorAction = this._register(this.instantiationService.createInstance(UnpinEditorAction, UnpinEditorAction.ID, UnpinEditorAction.LABEL));\n\n\tprivate readonly tabResourceLabels = this._register(this.instantiationService.createInstance(ResourceLabels, DEFAULT_LABELS_CONTAINER));\n\tprivate tabLabels: IEditorInputLabel[] = [];\n\tprivate activeTabLabel: IEditorInputLabel | undefined;\n\n\tprivate tabActionBars: ActionBar[] = [];\n\tprivate tabDisposables: IDisposable[] = [];\n\n\tprivate dimensions: IEditorTitleControlDimensions & { used?: Dimension } = {\n\t\tcontainer: Dimension.None,\n\t\tavailable: Dimension.None\n\t};\n\n\tprivate readonly layoutScheduler = this._register(new MutableDisposable<IScheduledMultiEditorTabsControlLayout>());\n\tprivate blockRevealActiveTab: boolean | undefined;\n\n\tprivate path: IPath = isWindows ? win32 : posix;\n\n\tprivate lastMouseWheelEventTime = 0;\n\tprivate isMouseOverTabs = false;\n\n\tconstructor(\n\t\tparent: HTMLElement,\n\t\teditorPartsView: IEditorPartsView,\n\t\tgroupsView: IEditorGroupsView,\n\t\tgroupView: IEditorGroupView,\n\t\ttabsModel: IReadonlyEditorGroupModel,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IEditorService private readonly editorService: EditorServiceImpl,\n\t\t@IPathService private readonly pathService: IPathService,\n\t\t@ITreeViewsDnDService private readonly treeViewsDragAndDropService: ITreeViewsDnDService,\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService,\n\t\t@IHostService hostService: IHostService,\n\t) {\n\t\tsuper(parent, editorPartsView, groupsView, groupView, tabsModel, contextMenuService, instantiationService, contextKeyService, keybindingService, notificationService, quickInputService, themeService, editorResolverService, hostService);\n\n\t\t// Resolve the correct path library for the OS we are on\n\t\t// If we are connected to remote, this accounts for the\n\t\t// remote OS.\n\t\t(async () => this.path = await this.pathService.path)();\n\n\t\t// React to decorations changing for our resource labels\n\t\tthis._register(this.tabResourceLabels.onDidChangeDecorations(() => this.doHandleDecorationsChange()));\n\t}\n\n\tprotected override create(parent: HTMLElement): HTMLElement {\n\t\tsuper.create(parent);\n\n\t\tthis.titleContainer = parent;\n\n\t\t// Tabs and Actions Container (are on a single row with flex side-by-side)\n\t\tthis.tabsAndActionsContainer = $('.tabs-and-actions-container');\n\t\tthis.titleContainer.appendChild(this.tabsAndActionsContainer);\n\n\t\t// Tabs Container\n\t\tthis.tabsContainer = $('.tabs-container', {\n\t\t\trole: 'tablist',\n\t\t\tdraggable: true\n\t\t});\n\t\tthis._register(Gesture.addTarget(this.tabsContainer));\n\n\t\tthis.tabSizingFixedDisposables = this._register(new DisposableStore());\n\t\tthis.updateTabSizing(false);\n\n\t\t// Tabs Scrollbar\n\t\tthis.tabsScrollbar = this.createTabsScrollbar(this.tabsContainer);\n\t\tthis.tabsAndActionsContainer.appendChild(this.tabsScrollbar.getDomNode());\n\n\t\t// Tabs Container listeners\n\t\tthis.registerTabsContainerListeners(this.tabsContainer, this.tabsScrollbar);\n\n\t\t// Create Editor Toolbar\n\t\tthis.createEditorActionsToolBar(this.tabsAndActionsContainer, ['editor-actions']);\n\n\t\t// Set tabs control visibility\n\t\tthis.updateTabsControlVisibility();\n\n\t\treturn this.tabsAndActionsContainer;\n\t}\n\n\tprivate createTabsScrollbar(scrollable: HTMLElement): ScrollableElement {\n\t\tconst tabsScrollbar = this._register(new ScrollableElement(scrollable, {\n\t\t\thorizontal: this.getTabsScrollbarVisibility(),\n\t\t\thorizontalScrollbarSize: this.getTabsScrollbarSizing(),\n\t\t\tvertical: ScrollbarVisibility.Hidden,\n\t\t\tscrollYToX: true,\n\t\t\tuseShadows: false\n\t\t}));\n\n\t\tthis._register(tabsScrollbar.onScroll(e => {\n\t\t\tif (e.scrollLeftChanged) {\n\t\t\t\tscrollable.scrollLeft = e.scrollLeft;\n\t\t\t}\n\t\t}));\n\n\t\treturn tabsScrollbar;\n\t}\n\n\tprivate updateTabsScrollbarSizing(): void {\n\t\tthis.tabsScrollbar?.updateOptions({\n\t\t\thorizontalScrollbarSize: this.getTabsScrollbarSizing()\n\t\t});\n\t}\n\n\tprivate updateTabsScrollbarVisibility(): void {\n\t\tthis.tabsScrollbar?.updateOptions({\n\t\t\thorizontal: this.getTabsScrollbarVisibility()\n\t\t});\n\t}\n\n\tprivate updateTabSizing(fromEvent: boolean): void {\n\t\tconst [tabsContainer, tabSizingFixedDisposables] = assertReturnsAllDefined(this.tabsContainer, this.tabSizingFixedDisposables);\n\n\t\ttabSizingFixedDisposables.clear();\n\n\t\tconst options = this.groupsView.partOptions;\n\t\tif (options.tabSizing === 'fixed') {\n\t\t\ttabsContainer.style.setProperty('--tab-sizing-fixed-min-width', `${options.tabSizingFixedMinWidth}px`);\n\t\t\ttabsContainer.style.setProperty('--tab-sizing-fixed-max-width', `${options.tabSizingFixedMaxWidth}px`);\n\n\t\t\t// For https://github.com/microsoft/vscode/issues/40290 we want to\n\t\t\t// preserve the current tab widths as long as the mouse is over the\n\t\t\t// tabs so that you can quickly close them via mouse click. For that\n\t\t\t// we track mouse movements over the tabs container.\n\n\t\t\ttabSizingFixedDisposables.add(addDisposableListener(tabsContainer, EventType.MOUSE_ENTER, () => {\n\t\t\t\tthis.isMouseOverTabs = true;\n\t\t\t}));\n\t\t\ttabSizingFixedDisposables.add(addDisposableListener(tabsContainer, EventType.MOUSE_LEAVE, () => {\n\t\t\t\tthis.isMouseOverTabs = false;\n\t\t\t\tthis.updateTabsFixedWidth(false);\n\t\t\t}));\n\t\t} else if (fromEvent) {\n\t\t\ttabsContainer.style.removeProperty('--tab-sizing-fixed-min-width');\n\t\t\ttabsContainer.style.removeProperty('--tab-sizing-fixed-max-width');\n\t\t\tthis.updateTabsFixedWidth(false);\n\t\t}\n\t}\n\n\tprivate updateTabsFixedWidth(fixed: boolean): void {\n\t\tthis.forEachTab((editor, tabIndex, tabContainer) => {\n\t\t\tif (fixed) {\n\t\t\t\tconst { width } = tabContainer.getBoundingClientRect();\n\t\t\t\ttabContainer.style.setProperty('--tab-sizing-current-width', `${width}px`);\n\t\t\t} else {\n\t\t\t\ttabContainer.style.removeProperty('--tab-sizing-current-width');\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getTabsScrollbarSizing(): number {\n\t\tif (this.groupsView.partOptions.titleScrollbarSizing !== 'large') {\n\t\t\treturn MultiEditorTabsControl.SCROLLBAR_SIZES.default;\n\t\t}\n\n\t\treturn MultiEditorTabsControl.SCROLLBAR_SIZES.large;\n\t}\n\n\tprivate getTabsScrollbarVisibility(): ScrollbarVisibility {\n\t\tswitch (this.groupsView.partOptions.titleScrollbarVisibility) {\n\t\t\tcase 'visible': return ScrollbarVisibility.Visible;\n\t\t\tcase 'hidden': return ScrollbarVisibility.Hidden;\n\t\t\tdefault: return ScrollbarVisibility.Auto;\n\t\t}\n\t}\n\n\tprivate registerTabsContainerListeners(tabsContainer: HTMLElement, tabsScrollbar: ScrollableElement): void {\n\n\t\t// Forward scrolling inside the container to our custom scrollbar\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.SCROLL, () => {\n\t\t\tif (tabsContainer.classList.contains('scroll')) {\n\t\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\t\tscrollLeft: tabsContainer.scrollLeft // during DND the container gets scrolled so we need to update the custom scrollbar\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\t// New file when double-clicking on tabs container (but not tabs)\n\t\tfor (const eventType of [TouchEventType.Tap, EventType.DBLCLICK]) {\n\t\t\tthis._register(addDisposableListener(tabsContainer, eventType, (e: MouseEvent | GestureEvent) => {\n\t\t\t\tif (eventType === EventType.DBLCLICK) {\n\t\t\t\t\tif (e.target !== tabsContainer) {\n\t\t\t\t\t\treturn; // ignore if target is not tabs container\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ((<GestureEvent>e).tapCount !== 2) {\n\t\t\t\t\t\treturn; // ignore single taps\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((<GestureEvent>e).initialTarget !== tabsContainer) {\n\t\t\t\t\t\treturn; // ignore if target is not tabs container\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tEventHelper.stop(e);\n\n\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\tresource: undefined,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tpinned: true,\n\t\t\t\t\t\tindex: this.groupView.count, // always at the end\n\t\t\t\t\t\toverride: DEFAULT_EDITOR_ASSOCIATION.id\n\t\t\t\t\t}\n\t\t\t\t}, this.groupView.id);\n\t\t\t}));\n\t\t}\n\n\t\t// Prevent auto-scrolling (https://github.com/microsoft/vscode/issues/16690)\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.MOUSE_DOWN, e => {\n\t\t\tif (e.button === 1) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t}));\n\n\t\t// Prevent auto-pasting (https://github.com/microsoft/vscode/issues/201696)\n\t\tif (isLinux) {\n\t\t\tthis._register(addDisposableListener(tabsContainer, EventType.MOUSE_UP, e => {\n\t\t\t\tif (e.button === 1) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\t// Drag & Drop support\n\t\tlet lastDragEvent: DragEvent | undefined = undefined;\n\t\tlet isNewWindowOperation = false;\n\t\tthis._register(new DragAndDropObserver(tabsContainer, {\n\t\t\tonDragStart: e => {\n\t\t\t\tisNewWindowOperation = this.onGroupDragStart(e, tabsContainer);\n\t\t\t},\n\n\t\t\tonDrag: e => {\n\t\t\t\tlastDragEvent = e;\n\t\t\t},\n\n\t\t\tonDragEnter: e => {\n\n\t\t\t\t// Always enable support to scroll while dragging\n\t\t\t\ttabsContainer.classList.add('scroll');\n\n\t\t\t\t// Return if the target is not on the tabs container\n\t\t\t\tif (e.target !== tabsContainer) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return if transfer is unsupported\n\t\t\t\tif (!this.isSupportedDropTransfer(e)) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Update the dropEffect to \"copy\" if there is no local data to be dragged because\n\t\t\t\t// in that case we can only copy the data into and not move it from its source\n\t\t\t\tif (!this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.updateDropFeedback(tabsContainer, true, e);\n\t\t\t},\n\n\t\t\tonDragLeave: e => {\n\t\t\t\tthis.updateDropFeedback(tabsContainer, false, e);\n\t\t\t\ttabsContainer.classList.remove('scroll');\n\t\t\t},\n\n\t\t\tonDragEnd: e => {\n\t\t\t\tthis.updateDropFeedback(tabsContainer, false, e);\n\t\t\t\ttabsContainer.classList.remove('scroll');\n\n\t\t\t\tthis.onGroupDragEnd(e, lastDragEvent, tabsContainer, isNewWindowOperation);\n\t\t\t},\n\n\t\t\tonDrop: e => {\n\t\t\t\tthis.updateDropFeedback(tabsContainer, false, e);\n\t\t\t\ttabsContainer.classList.remove('scroll');\n\n\t\t\t\tif (e.target === tabsContainer) {\n\t\t\t\t\tconst isGroupTransfer = this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t\t\tthis.onDrop(e, isGroupTransfer ? this.groupView.count : this.tabsModel.count, tabsContainer);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Mouse-wheel support to switch to tabs optionally\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.MOUSE_WHEEL, (e: WheelEvent) => {\n\t\t\tconst activeEditor = this.groupView.activeEditor;\n\t\t\tif (!activeEditor || this.groupView.count < 2) {\n\t\t\t\treturn;  // need at least 2 open editors\n\t\t\t}\n\n\t\t\t// Shift-key enables or disables this behaviour depending on the setting\n\t\t\tif (this.groupsView.partOptions.scrollToSwitchTabs === true) {\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\treturn; // 'on': only enable this when Shift-key is not pressed\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\treturn; // 'off': only enable this when Shift-key is pressed\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ignore event if the last one happened too recently (https://github.com/microsoft/vscode/issues/96409)\n\t\t\t// The restriction is relaxed according to the absolute value of `deltaX` and `deltaY`\n\t\t\t// to support discrete (mouse wheel) and contiguous scrolling (touchpad) equally well\n\t\t\tconst now = Date.now();\n\t\t\tif (now - this.lastMouseWheelEventTime < MultiEditorTabsControl.MOUSE_WHEEL_EVENT_THRESHOLD - 2 * (Math.abs(e.deltaX) + Math.abs(e.deltaY))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastMouseWheelEventTime = now;\n\n\t\t\t// Figure out scrolling direction but ignore it if too subtle\n\t\t\tlet tabSwitchDirection: number;\n\t\t\tif (e.deltaX + e.deltaY < - MultiEditorTabsControl.MOUSE_WHEEL_DISTANCE_THRESHOLD) {\n\t\t\t\ttabSwitchDirection = -1;\n\t\t\t} else if (e.deltaX + e.deltaY > MultiEditorTabsControl.MOUSE_WHEEL_DISTANCE_THRESHOLD) {\n\t\t\t\ttabSwitchDirection = 1;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextEditor = this.groupView.getEditorByIndex(this.groupView.getIndexOfEditor(activeEditor) + tabSwitchDirection);\n\t\t\tif (!nextEditor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Open it\n\t\t\tthis.groupView.openEditor(nextEditor);\n\n\t\t\t// Disable normal scrolling, opening the editor will already reveal it properly\n\t\t\tEventHelper.stop(e, true);\n\t\t}));\n\n\t\t// Context menu\n\t\tconst showContextMenu = (e: Event) => {\n\t\t\tEventHelper.stop(e);\n\n\t\t\t// Find target anchor\n\t\t\tlet anchor: HTMLElement | StandardMouseEvent = tabsContainer;\n\t\t\tif (isMouseEvent(e)) {\n\t\t\t\tanchor = new StandardMouseEvent(getWindow(this.parent), e);\n\t\t\t}\n\n\t\t\t// Show it\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => anchor,\n\t\t\t\tmenuId: MenuId.EditorTabsBarContext,\n\t\t\t\tcontextKeyService: this.contextKeyService,\n\t\t\t\tmenuActionOptions: { shouldForwardArgs: true },\n\t\t\t\tgetActionsContext: () => ({ groupId: this.groupView.id }),\n\t\t\t\tgetKeyBinding: action => this.getKeybinding(action),\n\t\t\t\tonHide: () => this.groupView.focus()\n\t\t\t});\n\t\t};\n\n\t\tthis._register(addDisposableListener(tabsContainer, TouchEventType.Contextmenu, e => showContextMenu(e)));\n\t\tthis._register(addDisposableListener(tabsContainer, EventType.CONTEXT_MENU, e => showContextMenu(e)));\n\t}\n\n\tprivate doHandleDecorationsChange(): void {\n\n\t\t// A change to decorations potentially has an impact on the size of tabs\n\t\t// so we need to trigger a layout in that case to adjust things\n\t\tthis.layout(this.dimensions);\n\t}\n\n\tprotected override updateEditorActionsToolbar(): void {\n\t\tsuper.updateEditorActionsToolbar();\n\n\t\t// Changing the actions in the toolbar can have an impact on the size of the\n\t\t// tab container, so we need to layout the tabs to make sure the active is visible\n\t\tthis.layout(this.dimensions);\n\t}\n\n\topenEditor(editor: EditorInput, options?: IInternalEditorOpenOptions): boolean {\n\t\tconst changed = this.handleOpenedEditors();\n\n\t\t// Respect option to focus tab control if provided\n\t\tif (options?.focusTabControl) {\n\t\t\tthis.withTab(editor, (editor, tabIndex, tabContainer) => tabContainer.focus());\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\topenEditors(editors: EditorInput[]): boolean {\n\t\treturn this.handleOpenedEditors();\n\t}\n\n\tprivate handleOpenedEditors(): boolean {\n\n\t\t// Set tabs control visibility\n\t\tthis.updateTabsControlVisibility();\n\n\t\t// Create tabs as needed\n\t\tconst [tabsContainer, tabsScrollbar] = assertReturnsAllDefined(this.tabsContainer, this.tabsScrollbar);\n\t\tfor (let i = tabsContainer.children.length; i < this.tabsModel.count; i++) {\n\t\t\ttabsContainer.appendChild(this.createTab(i, tabsContainer, tabsScrollbar));\n\t\t}\n\n\t\t// Make sure to recompute tab labels and detect\n\t\t// if a label change occurred that requires a\n\t\t// redraw of tabs.\n\n\t\tconst activeEditorChanged = this.didActiveEditorChange();\n\t\tconst oldTabLabels = this.tabLabels;\n\t\tthis.computeTabLabels();\n\n\t\t// Redraw and update in these cases\n\t\tlet didChange = false;\n\t\tif (\n\t\t\tactiveEditorChanged ||\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// active editor changed\n\t\t\toldTabLabels.length !== this.tabLabels.length ||\t\t\t\t\t\t\t\t\t\t\t\t\t// number of tabs changed\n\t\t\toldTabLabels.some((label, index) => !this.equalsEditorInputLabel(label, this.tabLabels.at(index))) \t// editor labels changed\n\t\t) {\n\t\t\tthis.redraw({ forceRevealActiveTab: true });\n\t\t\tdidChange = true;\n\t\t}\n\n\t\t// Otherwise only layout for revealing\n\t\telse {\n\t\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t\t}\n\n\t\treturn didChange;\n\t}\n\n\tprivate didActiveEditorChange(): boolean {\n\t\tif (\n\t\t\t!this.activeTabLabel?.editor && this.tabsModel.activeEditor || \t\t\t\t\t\t\t// active editor changed from null => editor\n\t\t\tthis.activeTabLabel?.editor && !this.tabsModel.activeEditor || \t\t\t\t\t\t\t// active editor changed from editor => null\n\t\t\t(!this.activeTabLabel?.editor || !this.tabsModel.isActive(this.activeTabLabel.editor))\t// active editor changed from editorA => editorB\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate equalsEditorInputLabel(labelA: IEditorInputLabel | undefined, labelB: IEditorInputLabel | undefined): boolean {\n\t\tif (labelA === labelB) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!labelA || !labelB) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn labelA.name === labelB.name &&\n\t\t\tlabelA.description === labelB.description &&\n\t\t\tlabelA.forceDescription === labelB.forceDescription &&\n\t\t\tlabelA.title === labelB.title &&\n\t\t\tlabelA.ariaLabel === labelB.ariaLabel;\n\t}\n\n\tbeforeCloseEditor(editor: EditorInput): void {\n\n\t\t// Fix tabs width if the mouse is over tabs and before closing\n\t\t// a tab (except the last tab) when tab sizing is 'fixed'.\n\t\t// This helps keeping the close button stable under\n\t\t// the mouse and allows for rapid closing of tabs.\n\n\t\tif (this.isMouseOverTabs && this.groupsView.partOptions.tabSizing === 'fixed') {\n\t\t\tconst closingLastTab = this.tabsModel.isLast(editor);\n\t\t\tthis.updateTabsFixedWidth(!closingLastTab);\n\t\t}\n\t}\n\n\tcloseEditor(editor: EditorInput): void {\n\t\tthis.handleClosedEditors();\n\t}\n\n\tcloseEditors(editors: EditorInput[]): void {\n\t\tthis.handleClosedEditors();\n\t}\n\n\tprivate handleClosedEditors(): void {\n\n\t\t// There are tabs to show\n\t\tif (this.tabsModel.count) {\n\n\t\t\t// Remove tabs that got closed\n\t\t\tconst tabsContainer = assertReturnsDefined(this.tabsContainer);\n\t\t\twhile (tabsContainer.children.length > this.tabsModel.count) {\n\n\t\t\t\t// Remove one tab from container (must be the last to keep indexes in order!)\n\t\t\t\ttabsContainer.lastChild?.remove();\n\n\t\t\t\t// Remove associated tab label and widget\n\t\t\t\tdispose(this.tabDisposables.pop());\n\t\t\t}\n\n\t\t\t// A removal of a label requires to recompute all labels\n\t\t\tthis.computeTabLabels();\n\n\t\t\t// Redraw all tabs\n\t\t\tthis.redraw({ forceRevealActiveTab: true });\n\t\t}\n\n\t\t// No tabs to show\n\t\telse {\n\t\t\tif (this.tabsContainer) {\n\t\t\t\tclearNode(this.tabsContainer);\n\t\t\t}\n\n\t\t\tthis.tabDisposables = dispose(this.tabDisposables);\n\t\t\tthis.tabResourceLabels.clear();\n\t\t\tthis.tabLabels = [];\n\t\t\tthis.activeTabLabel = undefined;\n\t\t\tthis.tabActionBars = [];\n\n\t\t\tthis.clearEditorActionsToolbar();\n\t\t\tthis.updateTabsControlVisibility();\n\t\t}\n\t}\n\n\tmoveEditor(editor: EditorInput, fromTabIndex: number, targetTabIndex: number): void {\n\n\t\t// Move the editor label\n\t\tconst editorLabel = this.tabLabels[fromTabIndex];\n\t\tthis.tabLabels.splice(fromTabIndex, 1);\n\t\tthis.tabLabels.splice(targetTabIndex, 0, editorLabel);\n\n\t\t// Redraw tabs in the range of the move\n\t\tthis.forEachTab((editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTab(editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar);\n\t\t},\n\t\t\tMath.min(fromTabIndex, targetTabIndex), // from: smallest of fromTabIndex/targetTabIndex\n\t\t\tMath.max(fromTabIndex, targetTabIndex)\t//   to: largest of fromTabIndex/targetTabIndex\n\t\t);\n\n\t\t// Moving an editor requires a layout to keep the active editor visible\n\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t}\n\n\tpinEditor(editor: EditorInput): void {\n\t\tthis.withTab(editor, (editor, tabIndex, tabContainer, tabLabelWidget, tabLabel) => this.redrawTabLabel(editor, tabIndex, tabContainer, tabLabelWidget, tabLabel));\n\t}\n\n\tstickEditor(editor: EditorInput): void {\n\t\tthis.doHandleStickyEditorChange(editor);\n\t}\n\n\tunstickEditor(editor: EditorInput): void {\n\t\tthis.doHandleStickyEditorChange(editor);\n\t}\n\n\tprivate doHandleStickyEditorChange(editor: EditorInput): void {\n\n\t\t// Update tab\n\t\tthis.withTab(editor, (editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => this.redrawTab(editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar));\n\n\t\t// Sticky change has an impact on each tab's border because\n\t\t// it potentially moves the border to the last pinned tab\n\t\tthis.forEachTab((editor, tabIndex, tabContainer, tabLabelWidget, tabLabel) => {\n\t\t\tthis.redrawTabBorders(tabIndex, tabContainer);\n\t\t});\n\n\t\t// A change to the sticky state requires a layout to keep the active editor visible\n\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t}\n\n\tsetActive(isGroupActive: boolean): void {\n\n\t\t// Activity has an impact on each tab's active indication\n\t\tthis.forEachTab((editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTabSelectedActiveAndDirty(isGroupActive, editor, tabContainer, tabActionBar);\n\t\t});\n\n\t\t// Activity has an impact on the toolbar, so we need to update and layout\n\t\tthis.updateEditorActionsToolbar();\n\t\tthis.layout(this.dimensions, { forceRevealActiveTab: true });\n\t}\n\n\tupdateEditorSelections(): void {\n\t\tthis.forEachTab((editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup === this.groupView, editor, tabContainer, tabActionBar);\n\t\t});\n\t}\n\n\tprivate updateEditorLabelScheduler = this._register(new RunOnceScheduler(() => this.doUpdateEditorLabels(), 0));\n\n\tupdateEditorLabel(editor: EditorInput): void {\n\n\t\t// Update all labels to account for changes to tab labels\n\t\t// Since this method may be called a lot of times from\n\t\t// individual editors, we collect all those requests and\n\t\t// then run the update once because we have to update\n\t\t// all opened tabs in the group at once.\n\t\tthis.updateEditorLabelScheduler.schedule();\n\t}\n\n\tprivate doUpdateEditorLabels(): void {\n\n\t\t// A change to a label requires to recompute all labels\n\t\tthis.computeTabLabels();\n\n\t\t// As such we need to redraw each label\n\t\tthis.forEachTab((editor, tabIndex, tabContainer, tabLabelWidget, tabLabel) => {\n\t\t\tthis.redrawTabLabel(editor, tabIndex, tabContainer, tabLabelWidget, tabLabel);\n\t\t});\n\n\t\t// A change to a label requires a layout to keep the active editor visible\n\t\tthis.layout(this.dimensions);\n\t}\n\n\tupdateEditorDirty(editor: EditorInput): void {\n\t\tthis.withTab(editor, (editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => this.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup === this.groupView, editor, tabContainer, tabActionBar));\n\t}\n\n\toverride updateOptions(oldOptions: IEditorPartOptions, newOptions: IEditorPartOptions): void {\n\t\tsuper.updateOptions(oldOptions, newOptions);\n\n\t\t// A change to a label format options requires to recompute all labels\n\t\tif (oldOptions.labelFormat !== newOptions.labelFormat) {\n\t\t\tthis.computeTabLabels();\n\t\t}\n\n\t\t// Update tabs scrollbar sizing\n\t\tif (oldOptions.titleScrollbarSizing !== newOptions.titleScrollbarSizing) {\n\t\t\tthis.updateTabsScrollbarSizing();\n\t\t}\n\n\t\t// Update tabs scrollbar visibility\n\t\tif (oldOptions.titleScrollbarVisibility !== newOptions.titleScrollbarVisibility) {\n\t\t\tthis.updateTabsScrollbarVisibility();\n\t\t}\n\n\t\t// Update editor actions\n\t\tif (oldOptions.alwaysShowEditorActions !== newOptions.alwaysShowEditorActions) {\n\t\t\tthis.updateEditorActionsToolbar();\n\t\t}\n\n\t\t// Update tabs sizing\n\t\tif (\n\t\t\toldOptions.tabSizingFixedMinWidth !== newOptions.tabSizingFixedMinWidth ||\n\t\t\toldOptions.tabSizingFixedMaxWidth !== newOptions.tabSizingFixedMaxWidth ||\n\t\t\toldOptions.tabSizing !== newOptions.tabSizing\n\t\t) {\n\t\t\tthis.updateTabSizing(true);\n\t\t}\n\n\t\t// Redraw tabs when other options change\n\t\tif (\n\t\t\toldOptions.labelFormat !== newOptions.labelFormat ||\n\t\t\toldOptions.tabActionLocation !== newOptions.tabActionLocation ||\n\t\t\toldOptions.tabActionCloseVisibility !== newOptions.tabActionCloseVisibility ||\n\t\t\toldOptions.tabActionUnpinVisibility !== newOptions.tabActionUnpinVisibility ||\n\t\t\toldOptions.tabSizing !== newOptions.tabSizing ||\n\t\t\toldOptions.pinnedTabSizing !== newOptions.pinnedTabSizing ||\n\t\t\toldOptions.showIcons !== newOptions.showIcons ||\n\t\t\toldOptions.hasIcons !== newOptions.hasIcons ||\n\t\t\toldOptions.highlightModifiedTabs !== newOptions.highlightModifiedTabs ||\n\t\t\toldOptions.wrapTabs !== newOptions.wrapTabs ||\n\t\t\toldOptions.showTabIndex !== newOptions.showTabIndex ||\n\t\t\t!equals(oldOptions.decorations, newOptions.decorations)\n\t\t) {\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\n\toverride updateStyles(): void {\n\t\tthis.redraw();\n\t}\n\n\tprivate forEachTab(fn: (editor: EditorInput, tabIndex: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar) => void, fromTabIndex?: number, toTabIndex?: number): void {\n\t\tthis.tabsModel.getEditors(EditorsOrder.SEQUENTIAL).forEach((editor: EditorInput, tabIndex: number) => {\n\t\t\tif (typeof fromTabIndex === 'number' && fromTabIndex > tabIndex) {\n\t\t\t\treturn; // do nothing if we are not yet at `fromIndex`\n\t\t\t}\n\n\t\t\tif (typeof toTabIndex === 'number' && toTabIndex < tabIndex) {\n\t\t\t\treturn; // do nothing if we are beyond `toIndex`\n\t\t\t}\n\n\t\t\tthis.doWithTab(tabIndex, editor, fn);\n\t\t});\n\t}\n\n\tprivate withTab(editor: EditorInput, fn: (editor: EditorInput, tabIndex: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar) => void): void {\n\t\tthis.doWithTab(this.tabsModel.indexOf(editor), editor, fn);\n\t}\n\n\tprivate doWithTab(tabIndex: number, editor: EditorInput, fn: (editor: EditorInput, tabIndex: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar) => void): void {\n\t\tconst tabsContainer = assertReturnsDefined(this.tabsContainer);\n\t\tconst tabContainer = tabsContainer.children[tabIndex] as HTMLElement;\n\t\tconst tabResourceLabel = this.tabResourceLabels.get(tabIndex);\n\t\tconst tabLabel = this.tabLabels[tabIndex];\n\t\tconst tabActionBar = this.tabActionBars[tabIndex];\n\t\tif (tabContainer && tabResourceLabel && tabLabel) {\n\t\t\tfn(editor, tabIndex, tabContainer, tabResourceLabel, tabLabel, tabActionBar);\n\t\t}\n\t}\n\n\tprivate createTab(tabIndex: number, tabsContainer: HTMLElement, tabsScrollbar: ScrollableElement): HTMLElement {\n\n\t\t// Tab Container\n\t\tconst tabContainer = $('.tab', {\n\t\t\tdraggable: true,\n\t\t\trole: 'tab'\n\t\t});\n\n\t\t// Gesture Support\n\t\tthis._register(Gesture.addTarget(tabContainer));\n\n\t\t// Tab Border Top\n\t\tconst tabBorderTopContainer = $('.tab-border-top-container');\n\t\ttabContainer.appendChild(tabBorderTopContainer);\n\n\t\t// Tab Editor Label\n\t\tconst editorLabel = this.tabResourceLabels.create(tabContainer, { hoverTargetOverride: tabContainer });\n\n\t\t// Tab Actions\n\t\tconst tabActionsContainer = $('.tab-actions');\n\t\ttabContainer.appendChild(tabActionsContainer);\n\n\t\tconst that = this;\n\t\tconst tabActionRunner = new EditorCommandsContextActionRunner({\n\t\t\tgroupId: this.groupView.id,\n\t\t\tget editorIndex() { return that.toEditorIndex(tabIndex); }\n\t\t});\n\n\t\tconst tabActionBar = new ActionBar(tabActionsContainer, { ariaLabel: localize('ariaLabelTabActions', \"Tab actions\"), actionRunner: tabActionRunner });\n\t\tconst tabActionListener = tabActionBar.onWillRun(e => {\n\t\t\tif (e.action.id === this.closeEditorAction.id) {\n\t\t\t\tthis.blockRevealActiveTabOnce();\n\t\t\t}\n\t\t});\n\n\t\tconst tabActionBarDisposable = combinedDisposable(tabActionRunner, tabActionBar, tabActionListener, toDisposable(insert(this.tabActionBars, tabActionBar)));\n\n\t\t// Tab Fade Hider\n\t\t// Hides the tab fade to the right when tab action left and sizing shrink/fixed, ::after, ::before are already used\n\t\tconst tabShadowHider = $('.tab-fade-hider');\n\t\ttabContainer.appendChild(tabShadowHider);\n\n\t\t// Tab Border Bottom\n\t\tconst tabBorderBottomContainer = $('.tab-border-bottom-container');\n\t\ttabContainer.appendChild(tabBorderBottomContainer);\n\n\t\t// Eventing\n\t\tconst eventsDisposable = this.registerTabListeners(tabContainer, tabIndex, tabsContainer, tabsScrollbar);\n\n\t\tthis.tabDisposables.push(combinedDisposable(eventsDisposable, tabActionBarDisposable, tabActionRunner, editorLabel));\n\n\t\treturn tabContainer;\n\t}\n\n\tprivate toEditorIndex(tabIndex: number): number {\n\n\t\t// Given a `tabIndex` that is relative to the tabs model\n\t\t// returns the `editorIndex` relative to the entire group\n\n\t\tconst editor = assertReturnsDefined(this.tabsModel.getEditorByIndex(tabIndex));\n\n\t\treturn this.groupView.getIndexOfEditor(editor);\n\t}\n\n\tprivate lastSingleSelectSelectedEditor: EditorInput | undefined;\n\tprivate registerTabListeners(tab: HTMLElement, tabIndex: number, tabsContainer: HTMLElement, tabsScrollbar: ScrollableElement): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst handleClickOrTouch = async (e: MouseEvent | GestureEvent, preserveFocus: boolean): Promise<void> => {\n\t\t\ttab.blur(); // prevent flicker of focus outline on tab until editor got focus\n\n\t\t\tif (isMouseEvent(e) && (e.button !== 0 /* middle/right mouse button */ || (isMacintosh && e.ctrlKey /* macOS context menu */))) {\n\t\t\t\tif (e.button === 1) {\n\t\t\t\t\te.preventDefault(); // required to prevent auto-scrolling (https://github.com/microsoft/vscode/issues/16690)\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.originatesFromTabActionBar(e)) {\n\t\t\t\treturn; // not when clicking on actions\n\t\t\t}\n\n\t\t\t// Open tabs editor\n\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\tif (editor) {\n\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\tlet anchor: EditorInput;\n\t\t\t\t\tif (this.lastSingleSelectSelectedEditor && this.tabsModel.isSelected(this.lastSingleSelectSelectedEditor)) {\n\t\t\t\t\t\t// The last selected editor is the anchor\n\t\t\t\t\t\tanchor = this.lastSingleSelectSelectedEditor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// The active editor is the anchor\n\t\t\t\t\t\tconst activeEditor = assertReturnsDefined(this.groupView.activeEditor);\n\t\t\t\t\t\tthis.lastSingleSelectSelectedEditor = activeEditor;\n\t\t\t\t\t\tanchor = activeEditor;\n\t\t\t\t\t}\n\t\t\t\t\tawait this.selectEditorsBetween(editor, anchor);\n\t\t\t\t} else if ((e.ctrlKey && !isMacintosh) || (e.metaKey && isMacintosh)) {\n\t\t\t\t\tif (this.tabsModel.isSelected(editor)) {\n\t\t\t\t\t\tawait this.unselectEditor(editor);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.selectEditor(editor);\n\t\t\t\t\t\tthis.lastSingleSelectSelectedEditor = editor;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Even if focus is preserved make sure to activate the group.\n\t\t\t\t\t// If a new active editor is selected, keep the current selection on key\n\t\t\t\t\t// down such that drag and drop can operate over the selection. The selection\n\t\t\t\t\t// is removed on key up in this case.\n\t\t\t\t\tconst inactiveSelection = this.tabsModel.isSelected(editor) ? this.groupView.selectedEditors.filter(e => !e.matches(editor)) : [];\n\t\t\t\t\tawait this.groupView.openEditor(editor, { preserveFocus, activation: EditorActivation.ACTIVATE }, { inactiveSelection, focusTabControl: true });\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst showContextMenu = (e: Event) => {\n\t\t\tEventHelper.stop(e);\n\n\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\tif (editor) {\n\t\t\t\tthis.onTabContextMenu(editor, e, tab);\n\t\t\t}\n\t\t};\n\n\t\t// Open on Click / Touch\n\t\tdisposables.add(addDisposableListener(tab, EventType.MOUSE_DOWN, e => handleClickOrTouch(e, false)));\n\t\tdisposables.add(addDisposableListener(tab, TouchEventType.Tap, (e: GestureEvent) => handleClickOrTouch(e, true))); // Preserve focus on touch #125470\n\n\t\t// Touch Scroll Support\n\t\tdisposables.add(addDisposableListener(tab, TouchEventType.Change, (e: GestureEvent) => {\n\t\t\ttabsScrollbar.setScrollPosition({ scrollLeft: tabsScrollbar.getScrollPosition().scrollLeft - e.translationX });\n\t\t}));\n\n\t\t// Update selection & prevent flicker of focus outline on tab until editor got focus\n\t\tdisposables.add(addDisposableListener(tab, EventType.MOUSE_UP, async e => {\n\t\t\tEventHelper.stop(e);\n\n\t\t\ttab.blur();\n\n\t\t\tif (isMouseEvent(e) && (e.button !== 0 /* middle/right mouse button */ || (isMacintosh && e.ctrlKey /* macOS context menu */))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.originatesFromTabActionBar(e)) {\n\t\t\t\treturn; // not when clicking on actions\n\t\t\t}\n\n\t\t\tconst isCtrlCmd = (e.ctrlKey && !isMacintosh) || (e.metaKey && isMacintosh);\n\t\t\tif (!isCtrlCmd && !e.shiftKey && this.groupView.selectedEditors.length > 1) {\n\t\t\t\tawait this.unselectAllEditors();\n\t\t\t}\n\t\t}));\n\n\t\t// Close on mouse middle click\n\t\tdisposables.add(addDisposableListener(tab, EventType.AUXCLICK, e => {\n\t\t\tif (e.button === 1 /* Middle Button*/) {\n\t\t\t\tEventHelper.stop(e, true /* for https://github.com/microsoft/vscode/issues/56715 */);\n\n\t\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\t\tif (editor) {\n\t\t\t\t\tif (preventEditorClose(this.tabsModel, editor, EditorCloseMethod.MOUSE, this.groupsView.partOptions)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.blockRevealActiveTabOnce();\n\t\t\t\t\tthis.closeEditorAction.run({ groupId: this.groupView.id, editorIndex: this.groupView.getIndexOfEditor(editor) });\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Context menu on Shift+F10\n\t\tdisposables.add(addDisposableListener(tab, EventType.KEY_DOWN, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.shiftKey && event.keyCode === KeyCode.F10) {\n\t\t\t\tshowContextMenu(e);\n\t\t\t}\n\t\t}));\n\n\t\t// Context menu on touch context menu gesture\n\t\tdisposables.add(addDisposableListener(tab, TouchEventType.Contextmenu, (e: GestureEvent) => {\n\t\t\tshowContextMenu(e);\n\t\t}));\n\n\t\t// Keyboard accessibility\n\t\tdisposables.add(addDisposableListener(tab, EventType.KEY_UP, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tlet handled = false;\n\n\t\t\t// Run action on Enter/Space\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\thandled = true;\n\t\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\t\tif (editor) {\n\t\t\t\t\tthis.groupView.openEditor(editor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Navigate in editors\n\t\t\telse if ([KeyCode.LeftArrow, KeyCode.RightArrow, KeyCode.UpArrow, KeyCode.DownArrow, KeyCode.Home, KeyCode.End].some(kb => event.equals(kb))) {\n\t\t\t\tlet editorIndex = this.toEditorIndex(tabIndex);\n\t\t\t\tif (event.equals(KeyCode.LeftArrow) || event.equals(KeyCode.UpArrow)) {\n\t\t\t\t\teditorIndex = editorIndex - 1;\n\t\t\t\t} else if (event.equals(KeyCode.RightArrow) || event.equals(KeyCode.DownArrow)) {\n\t\t\t\t\teditorIndex = editorIndex + 1;\n\t\t\t\t} else if (event.equals(KeyCode.Home)) {\n\t\t\t\t\teditorIndex = 0;\n\t\t\t\t} else {\n\t\t\t\t\teditorIndex = this.groupView.count - 1;\n\t\t\t\t}\n\n\t\t\t\tconst target = this.groupView.getEditorByIndex(editorIndex);\n\t\t\t\tif (target) {\n\t\t\t\t\thandled = true;\n\t\t\t\t\tthis.groupView.openEditor(target, { preserveFocus: true }, { focusTabControl: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (handled) {\n\t\t\t\tEventHelper.stop(e, true);\n\t\t\t}\n\n\t\t\t// moving in the tabs container can have an impact on scrolling position, so we need to update the custom scrollbar\n\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\tscrollLeft: tabsContainer.scrollLeft\n\t\t\t});\n\t\t}));\n\n\t\t// Double click: either pin or toggle maximized\n\t\tfor (const eventType of [TouchEventType.Tap, EventType.DBLCLICK]) {\n\t\t\tdisposables.add(addDisposableListener(tab, eventType, (e: MouseEvent | GestureEvent) => {\n\t\t\t\tif (eventType === EventType.DBLCLICK) {\n\t\t\t\t\tEventHelper.stop(e);\n\t\t\t\t} else if ((<GestureEvent>e).tapCount !== 2) {\n\t\t\t\t\treturn; // ignore single taps\n\t\t\t\t}\n\n\t\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\t\tif (editor && this.tabsModel.isPinned(editor)) {\n\t\t\t\t\tswitch (this.groupsView.partOptions.doubleClickTabToToggleEditorGroupSizes) {\n\t\t\t\t\t\tcase 'maximize':\n\t\t\t\t\t\t\tthis.groupsView.toggleMaximizeGroup(this.groupView);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'expand':\n\t\t\t\t\t\t\tthis.groupsView.toggleExpandGroup(this.groupView);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'off':\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tthis.groupView.pinEditor(editor);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\t// Context menu\n\t\tdisposables.add(addDisposableListener(tab, EventType.CONTEXT_MENU, e => {\n\t\t\tEventHelper.stop(e, true);\n\n\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\tif (editor) {\n\t\t\t\tthis.onTabContextMenu(editor, e, tab);\n\t\t\t}\n\t\t}, true /* use capture to fix https://github.com/microsoft/vscode/issues/19145 */));\n\n\t\t// Drag & Drop support\n\t\tlet lastDragEvent: DragEvent | undefined = undefined;\n\t\tlet isNewWindowOperation = false;\n\t\tdisposables.add(new DragAndDropObserver(tab, {\n\t\t\tonDragStart: e => {\n\t\t\t\tconst editor = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\t\tif (!editor) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tisNewWindowOperation = this.isNewWindowOperation(e);\n\t\t\t\tconst selectedEditors = this.groupView.selectedEditors;\n\t\t\t\tthis.editorTransfer.setData(selectedEditors.map(e => new DraggedEditorIdentifier({ editor: e, groupId: this.groupView.id })), DraggedEditorIdentifier.prototype);\n\n\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\te.dataTransfer.effectAllowed = 'copyMove';\n\t\t\t\t\tif (selectedEditors.length > 1) {\n\t\t\t\t\t\tconst label = `${editor.getName()} + ${selectedEditors.length - 1}`;\n\t\t\t\t\t\tapplyDragImage(e, tab, label);\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.dataTransfer.setDragImage(tab, 0, 0); // top left corner of dragged tab set to cursor position to make room for drop-border feedback\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply some datatransfer types to allow for dragging the element outside of the application\n\t\t\t\tthis.doFillResourceDataTransfers(selectedEditors, e, isNewWindowOperation);\n\n\t\t\t\tscheduleAtNextAnimationFrame(getWindow(this.parent), () => this.updateDropFeedback(tab, false, e, tabIndex));\n\t\t\t},\n\n\t\t\tonDrag: e => {\n\t\t\t\tlastDragEvent = e;\n\t\t\t},\n\n\t\t\tonDragEnter: e => {\n\n\t\t\t\t// Return if transfer is unsupported\n\t\t\t\tif (!this.isSupportedDropTransfer(e)) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'none';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Update the dropEffect to \"copy\" if there is no local data to be dragged because\n\t\t\t\t// in that case we can only copy the data into and not move it from its source\n\t\t\t\tif (!this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\t\t\tif (e.dataTransfer) {\n\t\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.updateDropFeedback(tab, true, e, tabIndex);\n\t\t\t},\n\n\t\t\tonDragOver: (e, dragDuration) => {\n\t\t\t\tif (dragDuration >= MultiEditorTabsControl.DRAG_OVER_OPEN_TAB_THRESHOLD) {\n\t\t\t\t\tconst draggedOverTab = this.tabsModel.getEditorByIndex(tabIndex);\n\t\t\t\t\tif (draggedOverTab && this.tabsModel.activeEditor !== draggedOverTab) {\n\t\t\t\t\t\tthis.groupView.openEditor(draggedOverTab, { preserveFocus: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.updateDropFeedback(tab, true, e, tabIndex);\n\t\t\t},\n\n\t\t\tonDragEnd: async e => {\n\t\t\t\tthis.updateDropFeedback(tab, false, e, tabIndex);\n\t\t\t\tconst draggedEditors = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\t\tthis.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n\n\t\t\t\tif (\n\t\t\t\t\t!isNewWindowOperation ||\n\t\t\t\t\tisWindowDraggedOver() ||\n\t\t\t\t\t!draggedEditors ||\n\t\t\t\t\tdraggedEditors.length === 0\n\t\t\t\t) {\n\t\t\t\t\treturn; // drag to open in new window is disabled\n\t\t\t\t}\n\n\t\t\t\tconst auxiliaryEditorPart = await this.maybeCreateAuxiliaryEditorPartAt(e, tab);\n\t\t\t\tif (!auxiliaryEditorPart) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst targetGroup = auxiliaryEditorPart.activeGroup;\n\t\t\t\tconst editorsWithOptions = prepareMoveCopyEditors(this.groupView, draggedEditors.map(editor => editor.identifier.editor));\n\t\t\t\tif (this.isMoveOperation(lastDragEvent ?? e, targetGroup.id, draggedEditors[0].identifier.editor)) {\n\t\t\t\t\tthis.groupView.moveEditors(editorsWithOptions, targetGroup);\n\t\t\t\t} else {\n\t\t\t\t\tthis.groupView.copyEditors(editorsWithOptions, targetGroup);\n\t\t\t\t}\n\n\t\t\t\ttargetGroup.focus();\n\t\t\t},\n\n\t\t\tonDrop: e => {\n\t\t\t\tthis.updateDropFeedback(tab, false, e, tabIndex);\n\n\t\t\t\t// compute the target index\n\t\t\t\tlet targetIndex = tabIndex;\n\t\t\t\tif (this.getTabDragOverLocation(e, tab) === 'right') {\n\t\t\t\t\ttargetIndex++;\n\t\t\t\t}\n\n\t\t\t\tthis.onDrop(e, targetIndex, tabsContainer);\n\t\t\t}\n\t\t}));\n\n\t\treturn disposables;\n\t}\n\n\tprivate isSupportedDropTransfer(e: DragEvent): boolean {\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst group = data[0];\n\t\t\t\tif (group.identifier === this.groupView.id) {\n\t\t\t\t\treturn false; // groups cannot be dropped on group it originates from\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\treturn true; // (local) editors can always be dropped\n\t\t}\n\n\t\tif (e.dataTransfer && e.dataTransfer.types.length > 0) {\n\t\t\treturn true; // optimistically allow external data (// see https://github.com/microsoft/vscode/issues/25789)\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate updateDropFeedback(element: HTMLElement, isDND: boolean, e: DragEvent, tabIndex?: number): void {\n\t\tconst isTab = (typeof tabIndex === 'number');\n\n\t\tlet dropTarget;\n\t\tif (isDND) {\n\t\t\tif (isTab) {\n\t\t\t\tdropTarget = this.computeDropTarget(e, tabIndex, element);\n\t\t\t} else {\n\t\t\t\tdropTarget = { leftElement: element.lastElementChild as HTMLElement, rightElement: undefined };\n\t\t\t}\n\t\t} else {\n\t\t\tdropTarget = undefined;\n\t\t}\n\n\t\tthis.updateDropTarget(dropTarget);\n\t}\n\n\tprivate dropTarget: { leftElement: HTMLElement | undefined; rightElement: HTMLElement | undefined } | undefined;\n\tprivate updateDropTarget(newTarget: { leftElement: HTMLElement | undefined; rightElement: HTMLElement | undefined } | undefined): void {\n\t\tconst oldTargets = this.dropTarget;\n\t\tif (oldTargets === newTarget || oldTargets && newTarget && oldTargets.leftElement === newTarget.leftElement && oldTargets.rightElement === newTarget.rightElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dropClassLeft = 'drop-target-left';\n\t\tconst dropClassRight = 'drop-target-right';\n\n\t\tif (oldTargets) {\n\t\t\toldTargets.leftElement?.classList.remove(dropClassLeft);\n\t\t\toldTargets.rightElement?.classList.remove(dropClassRight);\n\t\t}\n\n\t\tif (newTarget) {\n\t\t\tnewTarget.leftElement?.classList.add(dropClassLeft);\n\t\t\tnewTarget.rightElement?.classList.add(dropClassRight);\n\t\t}\n\n\t\tthis.dropTarget = newTarget;\n\t}\n\n\tprivate getTabDragOverLocation(e: DragEvent, tab: HTMLElement): 'left' | 'right' {\n\t\tconst rect = tab.getBoundingClientRect();\n\t\tconst offsetXRelativeToParent = e.clientX - rect.left;\n\n\t\treturn offsetXRelativeToParent <= rect.width / 2 ? 'left' : 'right';\n\t}\n\n\tprivate computeDropTarget(e: DragEvent, tabIndex: number, targetTab: HTMLElement): { leftElement: HTMLElement | undefined; rightElement: HTMLElement | undefined } | undefined {\n\t\tconst isLeftSideOfTab = this.getTabDragOverLocation(e, targetTab) === 'left';\n\t\tconst isLastTab = tabIndex === this.tabsModel.count - 1;\n\t\tconst isFirstTab = tabIndex === 0;\n\n\t\t// Before first tab\n\t\tif (isLeftSideOfTab && isFirstTab) {\n\t\t\treturn { leftElement: undefined, rightElement: targetTab };\n\t\t}\n\n\t\t// After last tab\n\t\tif (!isLeftSideOfTab && isLastTab) {\n\t\t\treturn { leftElement: targetTab, rightElement: undefined };\n\t\t}\n\n\t\t// Between two tabs\n\t\tconst tabBefore = isLeftSideOfTab ? targetTab.previousElementSibling : targetTab;\n\t\tconst tabAfter = isLeftSideOfTab ? targetTab : targetTab.nextElementSibling;\n\n\t\treturn { leftElement: tabBefore as HTMLElement, rightElement: tabAfter as HTMLElement };\n\t}\n\n\tprivate async selectEditor(editor: EditorInput): Promise<void> {\n\t\tif (this.groupView.isActive(editor)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.groupView.setSelection(editor, this.groupView.selectedEditors);\n\t}\n\n\tprivate async selectEditorsBetween(target: EditorInput, anchor: EditorInput): Promise<void> {\n\t\tconst editorIndex = this.groupView.getIndexOfEditor(target);\n\t\tif (editorIndex === -1) {\n\t\t\tthrow new BugIndicatingError();\n\t\t}\n\n\t\tconst anchorEditorIndex = this.groupView.getIndexOfEditor(anchor);\n\t\tif (anchorEditorIndex === -1) {\n\t\t\tthrow new BugIndicatingError();\n\t\t}\n\n\t\tlet selection = this.groupView.selectedEditors;\n\n\t\t// Unselect editors on other side of anchor in relation to the target\n\t\tlet currentEditorIndex = anchorEditorIndex;\n\t\twhile (currentEditorIndex >= 0 && currentEditorIndex <= this.groupView.count - 1) {\n\t\t\tcurrentEditorIndex = anchorEditorIndex < editorIndex ? currentEditorIndex - 1 : currentEditorIndex + 1;\n\n\t\t\tconst currentEditor = this.groupView.getEditorByIndex(currentEditorIndex);\n\t\t\tif (!currentEditor) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!this.groupView.isSelected(currentEditor)) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tselection = selection.filter(editor => !editor.matches(currentEditor));\n\t\t}\n\n\t\t// Select editors between anchor and target\n\t\tconst fromEditorIndex = anchorEditorIndex < editorIndex ? anchorEditorIndex : editorIndex;\n\t\tconst toEditorIndex = anchorEditorIndex < editorIndex ? editorIndex : anchorEditorIndex;\n\n\t\tconst editorsToSelect = this.groupView.getEditors(EditorsOrder.SEQUENTIAL).slice(fromEditorIndex, toEditorIndex + 1);\n\t\tfor (const editor of editorsToSelect) {\n\t\t\tif (!this.groupView.isSelected(editor)) {\n\t\t\t\tselection.push(editor);\n\t\t\t}\n\t\t}\n\n\t\tconst inactiveSelectedEditors = selection.filter(editor => !editor.matches(target));\n\t\tawait this.groupView.setSelection(target, inactiveSelectedEditors);\n\t}\n\n\tprivate async unselectEditor(editor: EditorInput): Promise<void> {\n\t\tconst isUnselectingActiveEditor = this.groupView.isActive(editor);\n\n\t\t// If there is only one editor selected, do not unselect it\n\t\tif (isUnselectingActiveEditor && this.groupView.selectedEditors.length === 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet newActiveEditor = assertReturnsDefined(this.groupView.activeEditor);\n\n\t\t// If active editor is bing unselected then find the most recently opened selected editor\n\t\t// that is not the editor being unselected\n\t\tif (isUnselectingActiveEditor) {\n\t\t\tconst recentEditors = this.groupView.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE);\n\t\t\tfor (let i = 1; i < recentEditors.length; i++) { // First one is the active editor\n\t\t\t\tconst recentEditor = recentEditors[i];\n\t\t\t\tif (this.groupView.isSelected(recentEditor)) {\n\t\t\t\t\tnewActiveEditor = recentEditor;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst inactiveSelectedEditors = this.groupView.selectedEditors.filter(e => !e.matches(editor) && !e.matches(newActiveEditor));\n\t\tawait this.groupView.setSelection(newActiveEditor, inactiveSelectedEditors);\n\t}\n\n\tprivate async unselectAllEditors(): Promise<void> {\n\t\tif (this.groupView.selectedEditors.length > 1) {\n\t\t\tconst activeEditor = assertReturnsDefined(this.groupView.activeEditor);\n\t\t\tawait this.groupView.setSelection(activeEditor, []);\n\t\t}\n\t}\n\n\tprivate computeTabLabels(): void {\n\t\tconst { labelFormat } = this.groupsView.partOptions;\n\t\tconst { verbosity, shortenDuplicates } = this.getLabelConfigFlags(labelFormat);\n\n\t\t// Build labels and descriptions for each editor\n\t\tconst labels: IEditorInputLabel[] = [];\n\t\tlet activeEditorTabIndex = -1;\n\t\tthis.tabsModel.getEditors(EditorsOrder.SEQUENTIAL).forEach((editor: EditorInput, tabIndex: number) => {\n\t\t\tlabels.push({\n\t\t\t\teditor,\n\t\t\t\tname: editor.getName(),\n\t\t\t\tdescription: editor.getDescription(verbosity),\n\t\t\t\tforceDescription: editor.hasCapability(EditorInputCapabilities.ForceDescription),\n\t\t\t\ttitle: editor.getTitle(Verbosity.LONG),\n\t\t\t\tariaLabel: computeEditorAriaLabel(editor, tabIndex, this.groupView, this.editorPartsView.count)\n\t\t\t});\n\n\t\t\tif (editor === this.tabsModel.activeEditor) {\n\t\t\t\tactiveEditorTabIndex = tabIndex;\n\t\t\t}\n\t\t});\n\n\t\t// Shorten labels as needed\n\t\tif (shortenDuplicates) {\n\t\t\tthis.shortenTabLabels(labels);\n\t\t}\n\n\t\t// Remember for fast lookup\n\t\tthis.tabLabels = labels;\n\t\tthis.activeTabLabel = labels[activeEditorTabIndex];\n\t}\n\n\tprivate shortenTabLabels(labels: IEditorInputLabel[]): void {\n\n\t\t// Gather duplicate titles, while filtering out invalid descriptions\n\t\tconst mapNameToDuplicates = new Map<string, IEditorInputLabel[]>();\n\t\tfor (const label of labels) {\n\t\t\tif (typeof label.description === 'string') {\n\t\t\t\tgetOrSet(mapNameToDuplicates, label.name, []).push(label);\n\t\t\t} else {\n\t\t\t\tlabel.description = '';\n\t\t\t}\n\t\t}\n\n\t\t// Identify duplicate names and shorten descriptions\n\t\tfor (const [, duplicateLabels] of mapNameToDuplicates) {\n\n\t\t\t// Remove description if the title isn't duplicated\n\t\t\t// and we have no indication to enforce description\n\t\t\tif (duplicateLabels.length === 1 && !duplicateLabels[0].forceDescription) {\n\t\t\t\tduplicateLabels[0].description = '';\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Identify duplicate descriptions\n\t\t\tconst mapDescriptionToDuplicates = new Map<string, IEditorInputLabel[]>();\n\t\t\tfor (const duplicateLabel of duplicateLabels) {\n\t\t\t\tgetOrSet(mapDescriptionToDuplicates, duplicateLabel.description, []).push(duplicateLabel);\n\t\t\t}\n\n\t\t\t// For editors with duplicate descriptions, check whether any long descriptions differ\n\t\t\tlet useLongDescriptions = false;\n\t\t\tfor (const [, duplicateLabels] of mapDescriptionToDuplicates) {\n\t\t\t\tif (!useLongDescriptions && duplicateLabels.length > 1) {\n\t\t\t\t\tconst [first, ...rest] = duplicateLabels.map(({ editor }) => editor.getDescription(Verbosity.LONG));\n\t\t\t\t\tuseLongDescriptions = rest.some(description => description !== first);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If so, replace all descriptions with long descriptions\n\t\t\tif (useLongDescriptions) {\n\t\t\t\tmapDescriptionToDuplicates.clear();\n\t\t\t\tfor (const duplicateLabel of duplicateLabels) {\n\t\t\t\t\tduplicateLabel.description = duplicateLabel.editor.getDescription(Verbosity.LONG);\n\t\t\t\t\tgetOrSet(mapDescriptionToDuplicates, duplicateLabel.description, []).push(duplicateLabel);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Obtain final set of descriptions\n\t\t\tconst descriptions: string[] = [];\n\t\t\tfor (const [description] of mapDescriptionToDuplicates) {\n\t\t\t\tdescriptions.push(description);\n\t\t\t}\n\n\t\t\t// Remove description if all descriptions are identical unless forced\n\t\t\tif (descriptions.length === 1) {\n\t\t\t\tfor (const label of mapDescriptionToDuplicates.get(descriptions[0]) || []) {\n\t\t\t\t\tif (!label.forceDescription) {\n\t\t\t\t\t\tlabel.description = '';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Shorten descriptions\n\t\t\tconst shortenedDescriptions = shorten(descriptions, this.path.sep);\n\t\t\tdescriptions.forEach((description, tabIndex) => {\n\t\t\t\tfor (const label of mapDescriptionToDuplicates.get(description) || []) {\n\t\t\t\t\tlabel.description = shortenedDescriptions[tabIndex];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate getLabelConfigFlags(value: string | undefined) {\n\t\tswitch (value) {\n\t\t\tcase 'short':\n\t\t\t\treturn { verbosity: Verbosity.SHORT, shortenDuplicates: false };\n\t\t\tcase 'medium':\n\t\t\t\treturn { verbosity: Verbosity.MEDIUM, shortenDuplicates: false };\n\t\t\tcase 'long':\n\t\t\t\treturn { verbosity: Verbosity.LONG, shortenDuplicates: false };\n\t\t\tdefault:\n\t\t\t\treturn { verbosity: Verbosity.MEDIUM, shortenDuplicates: true };\n\t\t}\n\t}\n\n\tprivate redraw(options?: IMultiEditorTabsControlLayoutOptions): void {\n\n\t\t// Border below tabs if any with explicit high contrast support\n\t\tif (this.tabsAndActionsContainer) {\n\t\t\tlet tabsContainerBorderColor = this.getColor(EDITOR_GROUP_HEADER_TABS_BORDER);\n\t\t\tif (!tabsContainerBorderColor && isHighContrast(this.theme.type)) {\n\t\t\t\ttabsContainerBorderColor = this.getColor(TAB_BORDER) || this.getColor(contrastBorder);\n\t\t\t}\n\n\t\t\tif (tabsContainerBorderColor) {\n\t\t\t\tthis.tabsAndActionsContainer.classList.add('tabs-border-bottom');\n\t\t\t\tthis.tabsAndActionsContainer.style.setProperty('--tabs-border-bottom-color', tabsContainerBorderColor.toString());\n\t\t\t} else {\n\t\t\t\tthis.tabsAndActionsContainer.classList.remove('tabs-border-bottom');\n\t\t\t\tthis.tabsAndActionsContainer.style.removeProperty('--tabs-border-bottom-color');\n\t\t\t}\n\t\t}\n\n\t\t// For each tab\n\t\tthis.forEachTab((editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar) => {\n\t\t\tthis.redrawTab(editor, tabIndex, tabContainer, tabLabelWidget, tabLabel, tabActionBar);\n\t\t});\n\n\t\t// Update Editor Actions Toolbar\n\t\tthis.updateEditorActionsToolbar();\n\n\t\t// Ensure the active tab is always revealed\n\t\tthis.layout(this.dimensions, options);\n\t}\n\n\tprivate redrawTab(editor: EditorInput, tabIndex: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel, tabActionBar: ActionBar): void {\n\t\tconst isTabSticky = this.tabsModel.isSticky(tabIndex);\n\t\tconst options = this.groupsView.partOptions;\n\n\t\t// Label\n\t\tthis.redrawTabLabel(editor, tabIndex, tabContainer, tabLabelWidget, tabLabel);\n\n\t\t// Action\n\t\tconst hasUnpinAction = isTabSticky && options.tabActionUnpinVisibility;\n\t\tconst hasCloseAction = !hasUnpinAction && options.tabActionCloseVisibility;\n\t\tconst hasAction = hasUnpinAction || hasCloseAction;\n\n\t\tlet tabAction;\n\t\tif (hasAction) {\n\t\t\ttabAction = hasUnpinAction ? this.unpinEditorAction : this.closeEditorAction;\n\t\t} else {\n\t\t\t// Even if the action is not visible, add it as it contains the dirty indicator\n\t\t\ttabAction = isTabSticky ? this.unpinEditorAction : this.closeEditorAction;\n\t\t}\n\n\t\tif (!tabActionBar.hasAction(tabAction)) {\n\t\t\tif (!tabActionBar.isEmpty()) {\n\t\t\t\ttabActionBar.clear();\n\t\t\t}\n\n\t\t\ttabActionBar.push(tabAction, { icon: true, label: false, keybinding: this.getKeybindingLabel(tabAction) });\n\t\t}\n\n\t\ttabContainer.classList.toggle(`pinned-action-off`, isTabSticky && !hasUnpinAction);\n\t\ttabContainer.classList.toggle(`close-action-off`, !hasUnpinAction && !hasCloseAction);\n\n\t\tfor (const option of ['left', 'right']) {\n\t\t\ttabContainer.classList.toggle(`tab-actions-${option}`, hasAction && options.tabActionLocation === option);\n\t\t}\n\n\t\tconst tabSizing = isTabSticky && options.pinnedTabSizing === 'shrink' ? 'shrink' /* treat sticky shrink tabs as tabSizing: 'shrink' */ : options.tabSizing;\n\t\tfor (const option of ['fit', 'shrink', 'fixed']) {\n\t\t\ttabContainer.classList.toggle(`sizing-${option}`, tabSizing === option);\n\t\t}\n\n\t\ttabContainer.classList.toggle('has-icon', options.showIcons && options.hasIcons);\n\n\t\ttabContainer.classList.toggle('sticky', isTabSticky);\n\t\tfor (const option of ['normal', 'compact', 'shrink']) {\n\t\t\ttabContainer.classList.toggle(`sticky-${option}`, isTabSticky && options.pinnedTabSizing === option);\n\t\t}\n\n\t\t// If not wrapping tabs, sticky compact/shrink tabs need a position to remain at their location\n\t\t// when scrolling to stay in view (requirement for position: sticky)\n\t\tif (!options.wrapTabs && isTabSticky && options.pinnedTabSizing !== 'normal') {\n\t\t\tlet stickyTabWidth = 0;\n\t\t\tswitch (options.pinnedTabSizing) {\n\t\t\t\tcase 'compact':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.compact;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'shrink':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.shrink;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttabContainer.style.left = `${tabIndex * stickyTabWidth}px`;\n\t\t} else {\n\t\t\ttabContainer.style.left = 'auto';\n\t\t}\n\n\t\t// Borders / outline\n\t\tthis.redrawTabBorders(tabIndex, tabContainer);\n\n\t\t// Selection / active / dirty state\n\t\tthis.redrawTabSelectedActiveAndDirty(this.groupsView.activeGroup === this.groupView, editor, tabContainer, tabActionBar);\n\t}\n\n\tprivate redrawTabLabel(editor: EditorInput, tabIndex: number, tabContainer: HTMLElement, tabLabelWidget: IResourceLabel, tabLabel: IEditorInputLabel): void {\n\t\tconst options = this.groupsView.partOptions;\n\n\t\t// Unless tabs are sticky compact, show the full label and description\n\t\t// Sticky compact tabs will only show an icon if icons are enabled\n\t\t// or their first character of the name otherwise\n\t\tlet name: string | undefined;\n\t\tlet namePrefix: string | undefined;\n\t\tlet forceLabel = false;\n\t\tlet fileDecorationBadges = Boolean(options.decorations?.badges);\n\t\tconst fileDecorationColors = Boolean(options.decorations?.colors);\n\t\tlet description: string;\n\t\tif (options.pinnedTabSizing === 'compact' && this.tabsModel.isSticky(tabIndex)) {\n\t\t\tconst isShowingIcons = options.showIcons && options.hasIcons;\n\t\t\tname = isShowingIcons ? '' : tabLabel.name?.charAt(0).toUpperCase();\n\t\t\tdescription = '';\n\t\t\tforceLabel = true;\n\t\t\tfileDecorationBadges = false; // not enough space when sticky tabs are compact\n\t\t} else {\n\t\t\tname = tabLabel.name;\n\t\t\tnamePrefix = options.showTabIndex ? `${this.toEditorIndex(tabIndex) + 1}: ` : undefined;\n\t\t\tdescription = tabLabel.description || '';\n\t\t}\n\n\t\tif (tabLabel.ariaLabel) {\n\t\t\ttabContainer.setAttribute('aria-label', tabLabel.ariaLabel);\n\t\t\t// Set aria-description to empty string so that screen readers would not read the title as well\n\t\t\t// More details https://github.com/microsoft/vscode/issues/95378\n\t\t\ttabContainer.setAttribute('aria-description', '');\n\t\t}\n\n\t\t// Label\n\t\ttabLabelWidget.setResource(\n\t\t\t{ name, description, resource: EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.BOTH }) },\n\t\t\t{\n\t\t\t\ttitle: this.getHoverTitle(editor),\n\t\t\t\textraClasses: coalesce(['tab-label', fileDecorationBadges ? 'tab-label-has-badge' : undefined].concat(editor.getLabelExtraClasses())),\n\t\t\t\titalic: !this.tabsModel.isPinned(editor),\n\t\t\t\tforceLabel,\n\t\t\t\tfileDecorations: {\n\t\t\t\t\tcolors: fileDecorationColors,\n\t\t\t\t\tbadges: fileDecorationBadges\n\t\t\t\t},\n\t\t\t\ticon: editor.getIcon(),\n\t\t\t\thideIcon: options.showIcons === false,\n\t\t\t\tnamePrefix,\n\t\t\t}\n\t\t);\n\n\t\t// Tests helper\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (resource) {\n\t\t\ttabContainer.setAttribute('data-resource-name', basenameOrAuthority(resource));\n\t\t} else {\n\t\t\ttabContainer.removeAttribute('data-resource-name');\n\t\t}\n\t}\n\n\tprivate redrawTabSelectedActiveAndDirty(isGroupActive: boolean, editor: EditorInput, tabContainer: HTMLElement, tabActionBar: ActionBar): void {\n\t\tconst isTabActive = this.tabsModel.isActive(editor);\n\t\tconst hasModifiedBorderTop = this.doRedrawTabDirty(isGroupActive, isTabActive, editor, tabContainer);\n\n\t\tthis.doRedrawTabActive(isGroupActive, !hasModifiedBorderTop, editor, tabContainer, tabActionBar);\n\t}\n\n\tprivate doRedrawTabActive(isGroupActive: boolean, allowBorderTop: boolean, editor: EditorInput, tabContainer: HTMLElement, tabActionBar: ActionBar): void {\n\t\tconst isActive = this.tabsModel.isActive(editor);\n\t\tconst isSelected = this.tabsModel.isSelected(editor);\n\n\t\ttabContainer.classList.toggle('active', isActive);\n\t\ttabContainer.classList.toggle('selected', isSelected);\n\t\ttabContainer.setAttribute('aria-selected', isActive ? 'true' : 'false');\n\t\ttabContainer.tabIndex = isActive ? 0 : -1; // Only active tab can be focused into\n\t\ttabActionBar.setFocusable(isActive);\n\n\t\t// Set border BOTTOM if theme defined color\n\t\tif (isActive) {\n\t\t\tconst activeTabBorderColorBottom = this.getColor(isGroupActive ? TAB_ACTIVE_BORDER : TAB_UNFOCUSED_ACTIVE_BORDER);\n\t\t\ttabContainer.classList.toggle('tab-border-bottom', !!activeTabBorderColorBottom);\n\t\t\ttabContainer.style.setProperty('--tab-border-bottom-color', activeTabBorderColorBottom ?? '');\n\t\t}\n\n\t\t// Set border TOP if theme defined color\n\t\tlet tabBorderColorTop: string | null = null;\n\t\tif (allowBorderTop) {\n\t\t\tif (isActive) {\n\t\t\t\ttabBorderColorTop = this.getColor(isGroupActive ? TAB_ACTIVE_BORDER_TOP : TAB_UNFOCUSED_ACTIVE_BORDER_TOP);\n\t\t\t}\n\n\t\t\tif (tabBorderColorTop === null && isSelected) {\n\t\t\t\ttabBorderColorTop = this.getColor(TAB_SELECTED_BORDER_TOP);\n\t\t\t}\n\t\t}\n\n\t\ttabContainer.classList.toggle('tab-border-top', !!tabBorderColorTop);\n\t\ttabContainer.style.setProperty('--tab-border-top-color', tabBorderColorTop ?? '');\n\t}\n\n\tprivate doRedrawTabDirty(isGroupActive: boolean, isTabActive: boolean, editor: EditorInput, tabContainer: HTMLElement): boolean {\n\t\tlet hasModifiedBorderColor = false;\n\n\t\t// Tab: dirty (unless saving)\n\t\tif (editor.isDirty() && !editor.isSaving()) {\n\t\t\ttabContainer.classList.add('dirty');\n\n\t\t\t// Highlight modified tabs with a border if configured\n\t\t\tif (this.groupsView.partOptions.highlightModifiedTabs) {\n\t\t\t\tlet modifiedBorderColor: string | null;\n\t\t\t\tif (isGroupActive && isTabActive) {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_ACTIVE_MODIFIED_BORDER);\n\t\t\t\t} else if (isGroupActive && !isTabActive) {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_INACTIVE_MODIFIED_BORDER);\n\t\t\t\t} else if (!isGroupActive && isTabActive) {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_UNFOCUSED_ACTIVE_MODIFIED_BORDER);\n\t\t\t\t} else {\n\t\t\t\t\tmodifiedBorderColor = this.getColor(TAB_UNFOCUSED_INACTIVE_MODIFIED_BORDER);\n\t\t\t\t}\n\n\t\t\t\tif (modifiedBorderColor) {\n\t\t\t\t\thasModifiedBorderColor = true;\n\n\t\t\t\t\ttabContainer.classList.add('dirty-border-top');\n\t\t\t\t\ttabContainer.style.setProperty('--tab-dirty-border-top-color', modifiedBorderColor);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttabContainer.classList.remove('dirty-border-top');\n\t\t\t\ttabContainer.style.removeProperty('--tab-dirty-border-top-color');\n\t\t\t}\n\t\t}\n\n\t\t// Tab: not dirty\n\t\telse {\n\t\t\ttabContainer.classList.remove('dirty', 'dirty-border-top');\n\t\t\ttabContainer.style.removeProperty('--tab-dirty-border-top-color');\n\t\t}\n\n\t\treturn hasModifiedBorderColor;\n\t}\n\n\tprivate redrawTabBorders(tabIndex: number, tabContainer: HTMLElement): void {\n\t\tconst isTabSticky = this.tabsModel.isSticky(tabIndex);\n\t\tconst isTabLastSticky = isTabSticky && this.tabsModel.stickyCount === tabIndex + 1;\n\t\tconst showLastStickyTabBorderColor = this.tabsModel.stickyCount !== this.tabsModel.count;\n\n\t\t// Borders / Outline\n\t\tconst borderRightColor = ((isTabLastSticky && showLastStickyTabBorderColor ? this.getColor(TAB_LAST_PINNED_BORDER) : undefined) || this.getColor(TAB_BORDER) || this.getColor(contrastBorder));\n\t\ttabContainer.style.borderRight = borderRightColor ? `1px solid ${borderRightColor}` : '';\n\t\ttabContainer.style.outlineColor = this.getColor(activeContrastBorder) || '';\n\t}\n\n\tprotected override prepareEditorActions(editorActions: IToolbarActions): IToolbarActions {\n\t\tconst isGroupActive = this.groupsView.activeGroup === this.groupView;\n\n\t\t// Active: allow all actions\n\t\tif (isGroupActive) {\n\t\t\treturn editorActions;\n\t\t}\n\n\t\t// Inactive: only show \"Unlock\" and secondary actions\n\t\telse {\n\t\t\treturn {\n\t\t\t\tprimary: this.groupsView.partOptions.alwaysShowEditorActions ? editorActions.primary : editorActions.primary.filter(action => action.id === UNLOCK_GROUP_COMMAND_ID),\n\t\t\t\tsecondary: editorActions.secondary\n\t\t\t};\n\t\t}\n\t}\n\n\tgetHeight(): number {\n\n\t\t// Return quickly if our used dimensions are known\n\t\tif (this.dimensions.used) {\n\t\t\treturn this.dimensions.used.height;\n\t\t}\n\n\t\t// Otherwise compute via browser APIs\n\t\telse {\n\t\t\treturn this.computeHeight();\n\t\t}\n\t}\n\n\tprivate computeHeight(): number {\n\t\tlet height: number;\n\n\t\tif (!this.visible) {\n\t\t\theight = 0;\n\t\t} else if (this.groupsView.partOptions.wrapTabs && this.tabsAndActionsContainer?.classList.contains('wrapping')) {\n\t\t\t// Wrap: we need to ask `offsetHeight` to get\n\t\t\t// the real height of the title area with wrapping.\n\t\t\theight = this.tabsAndActionsContainer.offsetHeight;\n\t\t} else {\n\t\t\theight = this.tabHeight;\n\t\t}\n\n\t\treturn height;\n\t}\n\n\tlayout(dimensions: IEditorTitleControlDimensions, options?: IMultiEditorTabsControlLayoutOptions): Dimension {\n\n\t\t// Remember dimensions that we get\n\t\tObject.assign(this.dimensions, dimensions);\n\n\t\tif (this.visible) {\n\t\t\tif (!this.layoutScheduler.value) {\n\n\t\t\t\t// The layout of tabs can be an expensive operation because we access DOM properties\n\t\t\t\t// that can result in the browser doing a full page layout to validate them. To buffer\n\t\t\t\t// this a little bit we try at least to schedule this work on the next animation frame\n\t\t\t\t// when we have restored or when idle otherwise.\n\n\t\t\t\tconst disposable = scheduleAtNextAnimationFrame(getWindow(this.parent), () => {\n\t\t\t\t\tthis.doLayout(this.dimensions, this.layoutScheduler.value?.options /* ensure to pick up latest options */);\n\n\t\t\t\t\tthis.layoutScheduler.clear();\n\t\t\t\t});\n\t\t\t\tthis.layoutScheduler.value = { options, dispose: () => disposable.dispose() };\n\t\t\t}\n\n\t\t\t// Make sure to keep options updated\n\t\t\tif (options?.forceRevealActiveTab) {\n\t\t\t\tthis.layoutScheduler.value.options = {\n\t\t\t\t\t...this.layoutScheduler.value.options,\n\t\t\t\t\tforceRevealActiveTab: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// First time layout: compute the dimensions and store it\n\t\tif (!this.dimensions.used) {\n\t\t\tthis.dimensions.used = new Dimension(dimensions.container.width, this.computeHeight());\n\t\t}\n\n\t\treturn this.dimensions.used;\n\t}\n\n\tprivate doLayout(dimensions: IEditorTitleControlDimensions, options?: IMultiEditorTabsControlLayoutOptions): void {\n\n\t\t// Layout tabs\n\t\tif (dimensions.container !== Dimension.None && dimensions.available !== Dimension.None) {\n\t\t\tthis.doLayoutTabs(dimensions, options);\n\t\t}\n\n\t\t// Remember the dimensions used in the control so that we can\n\t\t// return it fast from the `layout` call without having to\n\t\t// compute it over and over again\n\t\tconst oldDimension = this.dimensions.used;\n\t\tconst newDimension = this.dimensions.used = new Dimension(dimensions.container.width, this.computeHeight());\n\n\t\t// In case the height of the title control changed from before\n\t\t// (currently only possible if wrapping changed on/off), we need\n\t\t// to signal this to the outside via a `relayout` call so that\n\t\t// e.g. the editor control can be adjusted accordingly.\n\t\tif (oldDimension && oldDimension.height !== newDimension.height) {\n\t\t\tthis.groupView.relayout();\n\t\t}\n\t}\n\n\tprivate doLayoutTabs(dimensions: IEditorTitleControlDimensions, options?: IMultiEditorTabsControlLayoutOptions): void {\n\n\t\t// Always first layout tabs with wrapping support even if wrapping\n\t\t// is disabled. The result indicates if tabs wrap and if not, we\n\t\t// need to proceed with the layout without wrapping because even\n\t\t// if wrapping is enabled in settings, there are cases where\n\t\t// wrapping is disabled (e.g. due to space constraints)\n\t\tconst tabsWrapMultiLine = this.doLayoutTabsWrapping(dimensions);\n\t\tif (!tabsWrapMultiLine) {\n\t\t\tthis.doLayoutTabsNonWrapping(options);\n\t\t}\n\t}\n\n\tprivate doLayoutTabsWrapping(dimensions: IEditorTitleControlDimensions): boolean {\n\t\tconst [tabsAndActionsContainer, tabsContainer, editorToolbarContainer, tabsScrollbar] = assertReturnsAllDefined(this.tabsAndActionsContainer, this.tabsContainer, this.editorActionsToolbarContainer, this.tabsScrollbar);\n\n\t\t// Handle wrapping tabs according to setting:\n\t\t// - enabled: only add class if tabs wrap and don't exceed available dimensions\n\t\t// - disabled: remove class and margin-right variable\n\n\t\tconst didTabsWrapMultiLine = tabsAndActionsContainer.classList.contains('wrapping');\n\t\tlet tabsWrapMultiLine = didTabsWrapMultiLine;\n\n\t\tfunction updateTabsWrapping(enabled: boolean): void {\n\t\t\ttabsWrapMultiLine = enabled;\n\n\t\t\t// Toggle the `wrapped` class to enable wrapping\n\t\t\ttabsAndActionsContainer.classList.toggle('wrapping', tabsWrapMultiLine);\n\n\t\t\t// Update `last-tab-margin-right` CSS variable to account for the absolute\n\t\t\t// positioned editor actions container when tabs wrap. The margin needs to\n\t\t\t// be the width of the editor actions container to avoid screen cheese.\n\t\t\ttabsContainer.style.setProperty('--last-tab-margin-right', tabsWrapMultiLine ? `${editorToolbarContainer.offsetWidth}px` : '0');\n\n\t\t\t// Remove old css classes that are not needed anymore\n\t\t\tfor (const tab of tabsContainer.children) {\n\t\t\t\ttab.classList.remove('last-in-row');\n\t\t\t}\n\t\t}\n\n\t\t// Setting enabled: selectively enable wrapping if possible\n\t\tif (this.groupsView.partOptions.wrapTabs) {\n\t\t\tconst visibleTabsWidth = tabsContainer.offsetWidth;\n\t\t\tconst allTabsWidth = tabsContainer.scrollWidth;\n\t\t\tconst lastTabFitsWrapped = () => {\n\t\t\t\tconst lastTab = this.getLastTab();\n\t\t\t\tif (!lastTab) {\n\t\t\t\t\treturn true; // no tab always fits\n\t\t\t\t}\n\n\t\t\t\tconst lastTabOverlapWithToolbarWidth = lastTab.offsetWidth + editorToolbarContainer.offsetWidth - dimensions.available.width;\n\t\t\t\tif (lastTabOverlapWithToolbarWidth > 1) {\n\t\t\t\t\t// Allow for slight rounding errors related to zooming here\n\t\t\t\t\t// https://github.com/microsoft/vscode/issues/116385\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t};\n\n\t\t\t// If tabs wrap or should start to wrap (when width exceeds visible width)\n\t\t\t// we must trigger `updateWrapping` to set the `last-tab-margin-right`\n\t\t\t// accordingly based on the number of actions. The margin is important to\n\t\t\t// properly position the last tab apart from the actions\n\t\t\t//\n\t\t\t// We already check here if the last tab would fit when wrapped given the\n\t\t\t// editor toolbar will also show right next to it. This ensures we are not\n\t\t\t// enabling wrapping only to disable it again in the code below (this fixes\n\t\t\t// flickering issue https://github.com/microsoft/vscode/issues/115050)\n\t\t\tif (tabsWrapMultiLine || (allTabsWidth > visibleTabsWidth && lastTabFitsWrapped())) {\n\t\t\t\tupdateTabsWrapping(true);\n\t\t\t}\n\n\t\t\t// Tabs wrap multiline: remove wrapping under certain size constraint conditions\n\t\t\tif (tabsWrapMultiLine) {\n\t\t\t\tif (\n\t\t\t\t\t(tabsContainer.offsetHeight > dimensions.available.height) ||\t\t\t\t\t\t\t// if height exceeds available height\n\t\t\t\t\t(allTabsWidth === visibleTabsWidth && tabsContainer.offsetHeight === this.tabHeight) ||\t// if wrapping is not needed anymore\n\t\t\t\t\t(!lastTabFitsWrapped())\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// if last tab does not fit anymore\n\t\t\t\t) {\n\t\t\t\t\tupdateTabsWrapping(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Setting disabled: remove CSS traces only if tabs did wrap\n\t\telse if (didTabsWrapMultiLine) {\n\t\t\tupdateTabsWrapping(false);\n\t\t}\n\n\t\t// If we transitioned from non-wrapping to wrapping, we need\n\t\t// to update the scrollbar to have an equal `width` and\n\t\t// `scrollWidth`. Otherwise a scrollbar would appear which is\n\t\t// never desired when wrapping.\n\t\tif (tabsWrapMultiLine && !didTabsWrapMultiLine) {\n\t\t\tconst visibleTabsWidth = tabsContainer.offsetWidth;\n\t\t\ttabsScrollbar.setScrollDimensions({\n\t\t\t\twidth: visibleTabsWidth,\n\t\t\t\tscrollWidth: visibleTabsWidth\n\t\t\t});\n\t\t}\n\n\t\t// Update the `last-in-row` class on tabs when wrapping\n\t\t// is enabled (it doesn't do any harm otherwise). This\n\t\t// class controls additional properties of tab when it is\n\t\t// the last tab in a row\n\t\tif (tabsWrapMultiLine) {\n\n\t\t\t// Using a map here to change classes after the for loop is\n\t\t\t// crucial for performance because changing the class on a\n\t\t\t// tab can result in layouts of the rendering engine.\n\t\t\tconst tabs = new Map<HTMLElement, boolean /* last in row */>();\n\n\t\t\tlet currentTabsPosY: number | undefined = undefined;\n\t\t\tlet lastTab: HTMLElement | undefined = undefined;\n\t\t\tfor (const child of tabsContainer.children) {\n\t\t\t\tconst tab = child as HTMLElement;\n\t\t\t\tconst tabPosY = tab.offsetTop;\n\n\t\t\t\t// Marks a new or the first row of tabs\n\t\t\t\tif (tabPosY !== currentTabsPosY) {\n\t\t\t\t\tcurrentTabsPosY = tabPosY;\n\t\t\t\t\tif (lastTab) {\n\t\t\t\t\t\ttabs.set(lastTab, true); // previous tab must be last in row then\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Always remember last tab and ensure the\n\t\t\t\t// last-in-row class is not present until\n\t\t\t\t// we know the tab is last\n\t\t\t\tlastTab = tab;\n\t\t\t\ttabs.set(tab, false);\n\t\t\t}\n\n\t\t\t// Last tab overally is always last-in-row\n\t\t\tif (lastTab) {\n\t\t\t\ttabs.set(lastTab, true);\n\t\t\t}\n\n\t\t\tfor (const [tab, lastInRow] of tabs) {\n\t\t\t\ttab.classList.toggle('last-in-row', lastInRow);\n\t\t\t}\n\t\t}\n\n\t\treturn tabsWrapMultiLine;\n\t}\n\n\tprivate doLayoutTabsNonWrapping(options?: IMultiEditorTabsControlLayoutOptions): void {\n\t\tconst [tabsContainer, tabsScrollbar] = assertReturnsAllDefined(this.tabsContainer, this.tabsScrollbar);\n\n\t\t//\n\t\t// Synopsis\n\t\t// - allTabsWidth:   \t\t\tsum of all tab widths\n\t\t// - stickyTabsWidth:\t\t\tsum of all sticky tab widths (unless `pinnedTabSizing: normal`)\n\t\t// - visibleContainerWidth: \tsize of tab container\n\t\t// - availableContainerWidth: \tsize of tab container minus size of sticky tabs\n\t\t//\n\t\t// [------------------------------ All tabs width ---------------------------------------]\n\t\t// [------------------- Visible container width -------------------]\n\t\t//                         [------ Available container width ------]\n\t\t// [ Sticky A ][ Sticky B ][ Tab C ][ Tab D ][ Tab E ][ Tab F ][ Tab G ][ Tab H ][ Tab I ]\n\t\t//                 Active Tab Width [-------]\n\t\t// [------- Active Tab Pos X -------]\n\t\t// [-- Sticky Tabs Width --]\n\t\t//\n\n\t\tconst visibleTabsWidth = tabsContainer.offsetWidth;\n\t\tconst allTabsWidth = tabsContainer.scrollWidth;\n\n\t\t// Compute width of sticky tabs depending on pinned tab sizing\n\t\t// - compact: sticky-tabs * TAB_SIZES.compact\n\t\t// -  shrink: sticky-tabs * TAB_SIZES.shrink\n\t\t// -  normal: 0 (sticky tabs inherit look and feel from non-sticky tabs)\n\t\tlet stickyTabsWidth = 0;\n\t\tif (this.tabsModel.stickyCount > 0) {\n\t\t\tlet stickyTabWidth = 0;\n\t\t\tswitch (this.groupsView.partOptions.pinnedTabSizing) {\n\t\t\t\tcase 'compact':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.compact;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'shrink':\n\t\t\t\t\tstickyTabWidth = MultiEditorTabsControl.TAB_WIDTH.shrink;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tstickyTabsWidth = this.tabsModel.stickyCount * stickyTabWidth;\n\t\t}\n\n\t\tconst activeTabAndIndex = this.tabsModel.activeEditor ? this.getTabAndIndex(this.tabsModel.activeEditor) : undefined;\n\t\tconst [activeTab, activeTabIndex] = activeTabAndIndex ?? [undefined, undefined];\n\n\t\t// Figure out if active tab is positioned static which has an\n\t\t// impact on whether to reveal the tab or not later\n\t\tlet activeTabPositionStatic = this.groupsView.partOptions.pinnedTabSizing !== 'normal' && typeof activeTabIndex === 'number' && this.tabsModel.isSticky(activeTabIndex);\n\n\t\t// Special case: we have sticky tabs but the available space for showing tabs\n\t\t// is little enough that we need to disable sticky tabs sticky positioning\n\t\t// so that tabs can be scrolled at naturally.\n\t\tlet availableTabsContainerWidth = visibleTabsWidth - stickyTabsWidth;\n\t\tif (this.tabsModel.stickyCount > 0 && availableTabsContainerWidth < MultiEditorTabsControl.TAB_WIDTH.fit) {\n\t\t\ttabsContainer.classList.add('disable-sticky-tabs');\n\n\t\t\tavailableTabsContainerWidth = visibleTabsWidth;\n\t\t\tstickyTabsWidth = 0;\n\t\t\tactiveTabPositionStatic = false;\n\t\t} else {\n\t\t\ttabsContainer.classList.remove('disable-sticky-tabs');\n\t\t}\n\n\t\tlet activeTabPosX: number | undefined;\n\t\tlet activeTabWidth: number | undefined;\n\n\t\tif (!this.blockRevealActiveTab && activeTab) {\n\t\t\tactiveTabPosX = activeTab.offsetLeft;\n\t\t\tactiveTabWidth = activeTab.offsetWidth;\n\t\t}\n\n\t\t// Update scrollbar\n\t\tconst { width: oldVisibleTabsWidth, scrollWidth: oldAllTabsWidth } = tabsScrollbar.getScrollDimensions();\n\t\ttabsScrollbar.setScrollDimensions({\n\t\t\twidth: visibleTabsWidth,\n\t\t\tscrollWidth: allTabsWidth\n\t\t});\n\t\tconst dimensionsChanged = oldVisibleTabsWidth !== visibleTabsWidth || oldAllTabsWidth !== allTabsWidth;\n\n\t\t// Revealing the active tab is skipped under some conditions:\n\t\tif (\n\t\t\tthis.blockRevealActiveTab ||\t\t\t\t\t\t\t// explicitly disabled\n\t\t\ttypeof activeTabPosX !== 'number' ||\t\t\t\t\t// invalid dimension\n\t\t\ttypeof activeTabWidth !== 'number' ||\t\t\t\t\t// invalid dimension\n\t\t\tactiveTabPositionStatic ||\t\t\t\t\t\t\t\t// static tab (sticky)\n\t\t\t(!dimensionsChanged && !options?.forceRevealActiveTab) \t// dimensions did not change and we have low layout priority (https://github.com/microsoft/vscode/issues/133631)\n\t\t) {\n\t\t\tthis.blockRevealActiveTab = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Reveal the active one\n\t\tconst tabsContainerScrollPosX = tabsScrollbar.getScrollPosition().scrollLeft;\n\t\tconst activeTabFits = activeTabWidth <= availableTabsContainerWidth;\n\t\tconst adjustedActiveTabPosX = activeTabPosX - stickyTabsWidth;\n\n\t\t//\n\t\t// Synopsis\n\t\t// - adjustedActiveTabPosX: the adjusted tabPosX takes the width of sticky tabs into account\n\t\t//   conceptually the scrolling only begins after sticky tabs so in order to reveal a tab fully\n\t\t//   the actual position needs to be adjusted for sticky tabs.\n\t\t//\n\t\t// Tab is overflowing to the right: Scroll minimally until the element is fully visible to the right\n\t\t// Note: only try to do this if we actually have enough width to give to show the tab fully!\n\t\t//\n\t\t// Example: Tab G should be made active and needs to be fully revealed as such.\n\t\t//\n\t\t// [-------------------------------- All tabs width -----------------------------------------]\n\t\t// [-------------------- Visible container width --------------------]\n\t\t//                           [----- Available container width -------]\n\t\t//     [ Sticky A ][ Sticky B ][ Tab C ][ Tab D ][ Tab E ][ Tab F ][ Tab G ][ Tab H ][ Tab I ]\n\t\t//                     Active Tab Width [-------]\n\t\t//     [------- Active Tab Pos X -------]\n\t\t//                             [-------- Adjusted Tab Pos X -------]\n\t\t//     [-- Sticky Tabs Width --]\n\t\t//\n\t\t//\n\t\tif (activeTabFits && tabsContainerScrollPosX + availableTabsContainerWidth < adjustedActiveTabPosX + activeTabWidth) {\n\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\tscrollLeft: tabsContainerScrollPosX + ((adjustedActiveTabPosX + activeTabWidth) /* right corner of tab */ - (tabsContainerScrollPosX + availableTabsContainerWidth) /* right corner of view port */)\n\t\t\t});\n\t\t}\n\n\t\t//\n\t\t// Tab is overlflowing to the left or does not fit: Scroll it into view to the left\n\t\t//\n\t\t// Example: Tab C should be made active and needs to be fully revealed as such.\n\t\t//\n\t\t// [----------------------------- All tabs width ----------------------------------------]\n\t\t//     [------------------ Visible container width ------------------]\n\t\t//                           [----- Available container width -------]\n\t\t// [ Sticky A ][ Sticky B ][ Tab C ][ Tab D ][ Tab E ][ Tab F ][ Tab G ][ Tab H ][ Tab I ]\n\t\t//                 Active Tab Width [-------]\n\t\t// [------- Active Tab Pos X -------]\n\t\t//      Adjusted Tab Pos X []\n\t\t// [-- Sticky Tabs Width --]\n\t\t//\n\t\t//\n\t\telse if (tabsContainerScrollPosX > adjustedActiveTabPosX || !activeTabFits) {\n\t\t\ttabsScrollbar.setScrollPosition({\n\t\t\t\tscrollLeft: adjustedActiveTabPosX\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate updateTabsControlVisibility(): void {\n\t\tconst tabsAndActionsContainer = assertReturnsDefined(this.tabsAndActionsContainer);\n\t\ttabsAndActionsContainer.classList.toggle('empty', !this.visible);\n\n\t\t// Reset dimensions if hidden\n\t\tif (!this.visible && this.dimensions) {\n\t\t\tthis.dimensions.used = undefined;\n\t\t}\n\t}\n\n\tprivate get visible(): boolean {\n\t\treturn this.tabsModel.count > 0;\n\t}\n\n\tprivate getTabAndIndex(editor: EditorInput): [HTMLElement, number /* index */] | undefined {\n\t\tconst tabIndex = this.tabsModel.indexOf(editor);\n\t\tconst tab = this.getTabAtIndex(tabIndex);\n\t\tif (tab) {\n\t\t\treturn [tab, tabIndex];\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getTabAtIndex(tabIndex: number): HTMLElement | undefined {\n\t\tif (tabIndex >= 0) {\n\t\t\tconst tabsContainer = assertReturnsDefined(this.tabsContainer);\n\n\t\t\treturn tabsContainer.children[tabIndex] as HTMLElement | undefined;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getLastTab(): HTMLElement | undefined {\n\t\treturn this.getTabAtIndex(this.tabsModel.count - 1);\n\t}\n\n\tprivate blockRevealActiveTabOnce(): void {\n\n\t\t// When closing tabs through the tab close button or gesture, the user\n\t\t// might want to rapidly close tabs in sequence and as such revealing\n\t\t// the active tab after each close would be annoying. As such we block\n\t\t// the automated revealing of the active tab once after the close is\n\t\t// triggered.\n\t\tthis.blockRevealActiveTab = true;\n\t}\n\n\tprivate originatesFromTabActionBar(e: MouseEvent | GestureEvent): boolean {\n\t\tlet element: HTMLElement;\n\t\tif (isMouseEvent(e)) {\n\t\t\telement = (e.target || e.srcElement) as HTMLElement;\n\t\t} else {\n\t\t\telement = (e as GestureEvent).initialTarget as HTMLElement;\n\t\t}\n\n\t\treturn !!findParentWithClass(element, 'action-item', 'tab');\n\t}\n\n\tprivate async onDrop(e: DragEvent, targetTabIndex: number, tabsContainer: HTMLElement): Promise<void> {\n\t\tEventHelper.stop(e, true);\n\n\t\tthis.updateDropFeedback(tabsContainer, false, e, targetTabIndex);\n\t\ttabsContainer.classList.remove('scroll');\n\n\t\tlet targetEditorIndex = this.tabsModel instanceof UnstickyEditorGroupModel ? targetTabIndex + this.groupView.stickyCount : targetTabIndex;\n\t\tconst options: IEditorOptions = {\n\t\t\tsticky: this.tabsModel instanceof StickyEditorGroupModel && this.tabsModel.stickyCount === targetEditorIndex,\n\t\t\tindex: targetEditorIndex\n\t\t};\n\n\t\t// Check for group transfer\n\t\tif (this.groupTransfer.hasData(DraggedEditorGroupIdentifier.prototype)) {\n\t\t\tconst data = this.groupTransfer.getData(DraggedEditorGroupIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst sourceGroup = this.editorPartsView.getGroup(data[0].identifier);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tconst mergeGroupOptions: IMergeGroupOptions = { index: targetEditorIndex };\n\t\t\t\t\tif (!this.isMoveOperation(e, sourceGroup.id)) {\n\t\t\t\t\t\tmergeGroupOptions.mode = MergeGroupMode.COPY_EDITORS;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.groupsView.mergeGroup(sourceGroup, this.groupView, mergeGroupOptions);\n\t\t\t\t}\n\n\t\t\t\tthis.groupView.focus();\n\t\t\t\tthis.groupTransfer.clearData(DraggedEditorGroupIdentifier.prototype);\n\t\t\t}\n\t\t}\n\n\t\t// Check for editor transfer\n\t\telse if (this.editorTransfer.hasData(DraggedEditorIdentifier.prototype)) {\n\t\t\tconst data = this.editorTransfer.getData(DraggedEditorIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst sourceGroup = this.editorPartsView.getGroup(data[0].identifier.groupId);\n\t\t\t\tif (sourceGroup) {\n\t\t\t\t\tfor (const de of data) {\n\t\t\t\t\t\tconst editor = de.identifier.editor;\n\n\t\t\t\t\t\t// Only allow moving/copying from a single group source\n\t\t\t\t\t\tif (sourceGroup.id !== de.identifier.groupId) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Keep the same order when moving / copying editors within the same group\n\t\t\t\t\t\tconst sourceEditorIndex = sourceGroup.getIndexOfEditor(editor);\n\t\t\t\t\t\tif (sourceGroup === this.groupView && sourceEditorIndex < targetEditorIndex) {\n\t\t\t\t\t\t\ttargetEditorIndex--;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.isMoveOperation(e, de.identifier.groupId, editor)) {\n\t\t\t\t\t\t\tsourceGroup.moveEditor(editor, this.groupView, { ...options, index: targetEditorIndex });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsourceGroup.copyEditor(editor, this.groupView, { ...options, index: targetEditorIndex });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetEditorIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.groupView.focus();\n\t\t\tthis.editorTransfer.clearData(DraggedEditorIdentifier.prototype);\n\t\t}\n\n\t\t// Check for tree items\n\t\telse if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n\t\t\tconst data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n\t\t\tif (Array.isArray(data) && data.length > 0) {\n\t\t\t\tconst editors: IUntypedEditorInput[] = [];\n\t\t\t\tfor (const id of data) {\n\t\t\t\t\tconst dataTransferItem = await this.treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n\t\t\t\t\tif (dataTransferItem) {\n\t\t\t\t\t\tconst treeDropData = await extractTreeDropData(dataTransferItem);\n\t\t\t\t\t\teditors.push(...treeDropData.map(editor => ({ ...editor, options: { ...editor.options, pinned: true, index: targetEditorIndex } })));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.editorService.openEditors(editors, this.groupView, { validateTrust: true });\n\t\t\t}\n\n\t\t\tthis.treeItemsTransfer.clearData(DraggedTreeItemsIdentifier.prototype);\n\t\t}\n\n\t\t// Check for URI transfer\n\t\telse {\n\t\t\tconst dropHandler = this.instantiationService.createInstance(ResourcesDropHandler, { allowWorkspaceOpen: false });\n\t\t\tdropHandler.handleDrop(e, getWindow(this.parent), () => this.groupView, () => this.groupView.focus(), options);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.tabDisposables = dispose(this.tabDisposables);\n\t}\n}\n\nregisterThemingParticipant((theme, collector) => {\n\n\t// Add bottom border to tabs when wrapping\n\tconst borderColor = theme.getColor(TAB_BORDER);\n\tif (borderColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title > .tabs-and-actions-container.wrapping .tabs-container > .tab {\n\t\t\t\tborder-bottom: 1px solid ${borderColor};\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Styling with Outline color (e.g. high contrast theme)\n\tconst activeContrastBorderColor = theme.getColor(activeContrastBorder);\n\tif (activeContrastBorderColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:hover  {\n\t\t\t\toutline: 1px solid;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.selected:not(.active):not(:hover)  {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab.active:focus {\n\t\t\t\toutline-style: dashed;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active {\n\t\t\t\toutline: 1px dotted;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover  {\n\t\t\t\toutline: 1px dashed;\n\t\t\t\toutline-offset: -5px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.dirty > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.sticky > .tab-actions .action-label,\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-actions .action-label {\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\t// High Contrast Border Color for Editor Actions\n\tconst contrastBorderColor = theme.getColor(contrastBorder);\n\tif (contrastBorderColor) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .editor-actions {\n\t\t\t\toutline: 1px solid ${contrastBorderColor}\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Hover Background\n\tconst tabHoverBackground = theme.getColor(TAB_HOVER_BACKGROUND);\n\tif (tabHoverBackground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover {\n\t\t\t\tbackground-color: ${tabHoverBackground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst tabUnfocusedHoverBackground = theme.getColor(TAB_UNFOCUSED_HOVER_BACKGROUND);\n\tif (tabUnfocusedHoverBackground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {\n\t\t\t\tbackground-color: ${tabUnfocusedHoverBackground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Hover Foreground\n\tconst tabHoverForeground = theme.getColor(TAB_HOVER_FOREGROUND);\n\tif (tabHoverForeground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:not(.selected):hover  {\n\t\t\t\tcolor: ${tabHoverForeground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst tabUnfocusedHoverForeground = theme.getColor(TAB_UNFOCUSED_HOVER_FOREGROUND);\n\tif (tabUnfocusedHoverForeground) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:not(.selected):hover  {\n\t\t\t\tcolor: ${tabUnfocusedHoverForeground} !important;\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Hover Border\n\t//\n\t// Unfortunately we need to copy a lot of CSS over from the\n\t// multiEditorTabsControl.css because we want to reuse the same\n\t// styles we already have for the normal bottom-border.\n\tconst tabHoverBorder = theme.getColor(TAB_HOVER_BORDER);\n\tif (tabHoverBorder) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container.active > .title .tabs-container > .tab:hover > .tab-border-bottom-container {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${tabHoverBorder};\n\t\t\t}\n\t\t`);\n\t}\n\n\tconst tabUnfocusedHoverBorder = theme.getColor(TAB_UNFOCUSED_HOVER_BORDER);\n\tif (tabUnfocusedHoverBorder) {\n\t\tcollector.addRule(`\n\t\t\t.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover > .tab-border-bottom-container  {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t\twidth: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t\tbottom: 0;\n\t\t\t\theight: 1px;\n\t\t\t\tbackground-color: ${tabUnfocusedHoverBorder};\n\t\t\t}\n\t\t`);\n\t}\n\n\t// Fade out styles via linear gradient (when tabs are set to shrink or fixed)\n\t// But not when:\n\t// - in high contrast theme\n\t// - if we have a contrast border (which draws an outline - https://github.com/microsoft/vscode/issues/109117)\n\t// - on Safari (https://github.com/microsoft/vscode/issues/108996)\n\tif (!isHighContrast(theme.type) && !isSafari && !activeContrastBorderColor) {\n\t\tconst workbenchBackground = WORKBENCH_BACKGROUND(theme);\n\t\tconst editorBackgroundColor = theme.getColor(editorBackground);\n\t\tconst editorGroupHeaderTabsBackground = theme.getColor(EDITOR_GROUP_HEADER_TABS_BACKGROUND);\n\t\tconst editorDragAndDropBackground = theme.getColor(EDITOR_DRAG_AND_DROP_BACKGROUND);\n\n\t\tlet adjustedTabBackground: Color | undefined;\n\t\tif (editorGroupHeaderTabsBackground && editorBackgroundColor) {\n\t\t\tadjustedTabBackground = editorGroupHeaderTabsBackground.flatten(editorBackgroundColor, editorBackgroundColor, workbenchBackground);\n\t\t}\n\n\t\tlet adjustedTabDragBackground: Color | undefined;\n\t\tif (editorGroupHeaderTabsBackground && editorBackgroundColor && editorDragAndDropBackground && editorBackgroundColor) {\n\t\t\tadjustedTabDragBackground = editorGroupHeaderTabsBackground.flatten(editorBackgroundColor, editorDragAndDropBackground, editorBackgroundColor, workbenchBackground);\n\t\t}\n\n\t\t// Adjust gradient for focused and unfocused hover background\n\t\tconst makeTabHoverBackgroundRule = (color: Color, colorDrag: Color, hasFocus = false) => `\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${color}, transparent) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-shrink:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after,\n\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${hasFocus ? '.active' : ''} > .title .tabs-container > .tab.sizing-fixed:not(.dragged):not(.sticky-compact):hover > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\tbackground: linear-gradient(to left, ${colorDrag}, transparent) !important;\n\t\t\t}\n\t\t`;\n\n\t\t// Adjust gradient for (focused) hover background\n\t\tif (tabHoverBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabHoverBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabHoverBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabHoverBackgroundRule(adjustedColor, adjustedColorDrag, true));\n\t\t}\n\n\t\t// Adjust gradient for unfocused hover background\n\t\tif (tabUnfocusedHoverBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabUnfocusedHoverBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabUnfocusedHoverBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabHoverBackgroundRule(adjustedColor, adjustedColorDrag));\n\t\t}\n\n\t\t// Adjust gradient for drag and drop background\n\t\tif (editorDragAndDropBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColorDrag = editorDragAndDropBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(`\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-shrink.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container.active > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.active):not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container:not(.active) > .title .tabs-container > .tab.sizing-fixed.dragged-over:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${adjustedColorDrag}, transparent) !important;\n\t\t\t\t}\n\t\t`);\n\t\t}\n\n\t\tconst makeTabBackgroundRule = (color: Color, colorDrag: Color, focused: boolean, active: boolean) => `\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-shrink${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content:not(.dragged-over) .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-fixed${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${color}, transparent);\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-shrink${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after,\n\t\t\t\t.monaco-workbench .part.editor > .content.dragged-over .editor-group-container${focused ? '.active' : ':not(.active)'} > .title .tabs-container > .tab.sizing-fixed${active ? '.active' : ''}:not(.dragged):not(.sticky-compact) > .tab-label > .monaco-icon-label-container::after {\n\t\t\t\t\tbackground: linear-gradient(to left, ${colorDrag}, transparent);\n\t\t\t\t}\n\t\t`;\n\n\t\t// Adjust gradient for focused active tab background\n\t\tconst tabActiveBackground = theme.getColor(TAB_ACTIVE_BACKGROUND);\n\t\tif (tabActiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabActiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabActiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, true, true));\n\t\t}\n\n\t\t// Adjust gradient for unfocused active tab background\n\t\tconst tabUnfocusedActiveBackground = theme.getColor(TAB_UNFOCUSED_ACTIVE_BACKGROUND);\n\t\tif (tabUnfocusedActiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabUnfocusedActiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabUnfocusedActiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, false, true));\n\t\t}\n\n\t\t// Adjust gradient for focused inactive tab background\n\t\tconst tabInactiveBackground = theme.getColor(TAB_INACTIVE_BACKGROUND);\n\t\tif (tabInactiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabInactiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabInactiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, true, false));\n\t\t}\n\n\t\t// Adjust gradient for unfocused inactive tab background\n\t\tconst tabUnfocusedInactiveBackground = theme.getColor(TAB_UNFOCUSED_INACTIVE_BACKGROUND);\n\t\tif (tabUnfocusedInactiveBackground && adjustedTabBackground && adjustedTabDragBackground) {\n\t\t\tconst adjustedColor = tabUnfocusedInactiveBackground.flatten(adjustedTabBackground);\n\t\t\tconst adjustedColorDrag = tabUnfocusedInactiveBackground.flatten(adjustedTabDragBackground);\n\t\t\tcollector.addRule(makeTabBackgroundRule(adjustedColor, adjustedColorDrag, false, false));\n\t\t}\n\t}\n});\n"]}