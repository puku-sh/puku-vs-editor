{"version":3,"sources":["vs/workbench/browser/parts/editor/auxiliaryEditorPart.ts"],"names":[],"mappings":"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","file":"auxiliaryEditorPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onDidChangeFullscreen } from '../../../../base/browser/browser.js';\nimport { $, getActiveWindow, hide, show } from '../../../../base/browser/dom.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore, markAsSingleton, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isNative } from '../../../../base/common/platform.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { hasCustomTitlebar } from '../../../../platform/window/common/window.js';\nimport { IEditorGroupView, IEditorPartsView } from './editor.js';\nimport { EditorPart, IEditorPartUIState } from './editorPart.js';\nimport { IAuxiliaryTitlebarPart } from '../titlebar/titlebarPart.js';\nimport { WindowTitle } from '../titlebar/windowTitle.js';\nimport { IAuxiliaryWindowOpenOptions, IAuxiliaryWindowService } from '../../../services/auxiliaryWindow/browser/auxiliaryWindowService.js';\nimport { GroupDirection, GroupsOrder, IAuxiliaryEditorPart } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IWorkbenchLayoutService, shouldShowCustomTitleBar } from '../../../services/layout/browser/layoutService.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\nimport { ITitleService } from '../../../services/title/browser/titleService.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IsAuxiliaryWindowContext, IsAuxiliaryWindowFocusedContext, IsCompactTitleBarContext } from '../../../common/contextkeys.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { GroupIdentifier } from '../../../common/editor.js';\n\nexport interface IAuxiliaryEditorPartOpenOptions extends IAuxiliaryWindowOpenOptions {\n\treadonly state?: IEditorPartUIState;\n}\n\nexport interface ICreateAuxiliaryEditorPartResult {\n\treadonly part: AuxiliaryEditorPartImpl;\n\treadonly instantiationService: IInstantiationService;\n\treadonly disposables: DisposableStore;\n}\n\nconst compactWindowEmitter = markAsSingleton(new Emitter<{ windowId: number; compact: boolean | 'toggle' }>());\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.toggleCompactAuxiliaryWindow',\n\t\t\ttitle: localize2('toggleCompactAuxiliaryWindow', \"Toggle Window Compact Mode\"),\n\t\t\tcategory: Categories.View,\n\t\t\tf1: true,\n\t\t\tprecondition: IsAuxiliaryWindowFocusedContext\n\t\t});\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tcompactWindowEmitter.fire({ windowId: getActiveWindow().vscodeWindowId, compact: 'toggle' });\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.enableCompactAuxiliaryWindow',\n\t\t\ttitle: localize('enableCompactAuxiliaryWindow', \"Turn On Compact Mode\"),\n\t\t\ticon: Codicon.screenFull,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.LayoutControlMenu,\n\t\t\t\twhen: ContextKeyExpr.and(IsCompactTitleBarContext.toNegated(), IsAuxiliaryWindowContext),\n\t\t\t\torder: 0\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tcompactWindowEmitter.fire({ windowId: getActiveWindow().vscodeWindowId, compact: true });\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.disableCompactAuxiliaryWindow',\n\t\t\ttitle: localize('disableCompactAuxiliaryWindow', \"Turn Off Compact Mode\"),\n\t\t\ticon: Codicon.screenNormal,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.LayoutControlMenu,\n\t\t\t\twhen: ContextKeyExpr.and(IsCompactTitleBarContext, IsAuxiliaryWindowContext),\n\t\t\t\torder: 0\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tcompactWindowEmitter.fire({ windowId: getActiveWindow().vscodeWindowId, compact: false });\n\t}\n});\n\nexport class AuxiliaryEditorPart {\n\n\tprivate static STATUS_BAR_VISIBILITY = 'workbench.statusBar.visible';\n\n\tconstructor(\n\t\tprivate readonly editorPartsView: IEditorPartsView,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IAuxiliaryWindowService private readonly auxiliaryWindowService: IAuxiliaryWindowService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t\t@ITitleService private readonly titleService: ITitleService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService\n\t) {\n\t}\n\n\tasync create(label: string, options?: IAuxiliaryEditorPartOpenOptions): Promise<ICreateAuxiliaryEditorPartResult> {\n\t\tconst that = this;\n\t\tconst disposables = new DisposableStore();\n\n\t\tlet compact = Boolean(options?.compact);\n\n\t\tfunction computeEditorPartHeightOffset(): number {\n\t\t\tlet editorPartHeightOffset = 0;\n\n\t\t\tif (statusbarVisible) {\n\t\t\t\teditorPartHeightOffset += statusbarPart.height;\n\t\t\t}\n\n\t\t\tif (titlebarPart && titlebarVisible) {\n\t\t\t\teditorPartHeightOffset += titlebarPart.height;\n\t\t\t}\n\n\t\t\treturn editorPartHeightOffset;\n\t\t}\n\n\t\tfunction updateStatusbarVisibility(fromEvent: boolean): void {\n\t\t\tif (statusbarVisible) {\n\t\t\t\tshow(statusbarPart.container);\n\t\t\t} else {\n\t\t\t\thide(statusbarPart.container);\n\t\t\t}\n\n\t\t\tif (fromEvent) {\n\t\t\t\tauxiliaryWindow.layout();\n\t\t\t}\n\t\t}\n\n\t\tfunction updateTitlebarVisibility(fromEvent: boolean): void {\n\t\t\tif (!titlebarPart) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (titlebarVisible) {\n\t\t\t\tshow(titlebarPart.container);\n\t\t\t} else {\n\t\t\t\thide(titlebarPart.container);\n\t\t\t}\n\n\t\t\tif (fromEvent) {\n\t\t\t\tauxiliaryWindow.layout();\n\t\t\t}\n\t\t}\n\n\t\tfunction updateCompact(newCompact: boolean): void {\n\t\t\tif (newCompact === compact) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompact = newCompact;\n\t\t\tauxiliaryWindow.updateOptions({ compact });\n\t\t\ttitlebarPart?.updateOptions({ compact });\n\t\t\teditorPart.updateOptions({ compact });\n\n\t\t\tconst oldStatusbarVisible = statusbarVisible;\n\t\t\tstatusbarVisible = !compact && that.configurationService.getValue<boolean>(AuxiliaryEditorPart.STATUS_BAR_VISIBILITY) !== false;\n\t\t\tif (oldStatusbarVisible !== statusbarVisible) {\n\t\t\t\tupdateStatusbarVisibility(true);\n\t\t\t}\n\t\t}\n\n\t\t// Auxiliary Window\n\t\tconst auxiliaryWindow = disposables.add(await this.auxiliaryWindowService.open(options));\n\n\t\t// Editor Part\n\t\tconst editorPartContainer = $('.part.editor', { role: 'main' });\n\t\teditorPartContainer.style.position = 'relative';\n\t\tauxiliaryWindow.container.appendChild(editorPartContainer);\n\n\t\tconst editorPart = disposables.add(this.instantiationService.createInstance(AuxiliaryEditorPartImpl, auxiliaryWindow.window.vscodeWindowId, this.editorPartsView, options?.state, label));\n\t\teditorPart.updateOptions({ compact });\n\t\tdisposables.add(this.editorPartsView.registerPart(editorPart));\n\t\teditorPart.create(editorPartContainer);\n\n\t\tconst scopedEditorPartInstantiationService = disposables.add(editorPart.scopedInstantiationService.createChild(new ServiceCollection(\n\t\t\t[IEditorService, this.editorService.createScoped(editorPart, disposables)]\n\t\t)));\n\n\t\t// Titlebar\n\t\tlet titlebarPart: IAuxiliaryTitlebarPart | undefined = undefined;\n\t\tlet titlebarVisible = false;\n\t\tconst useCustomTitle = isNative && hasCustomTitlebar(this.configurationService); // custom title in aux windows only enabled in native\n\t\tif (useCustomTitle) {\n\t\t\ttitlebarPart = disposables.add(this.titleService.createAuxiliaryTitlebarPart(auxiliaryWindow.container, editorPart, scopedEditorPartInstantiationService));\n\t\t\ttitlebarPart.updateOptions({ compact });\n\t\t\ttitlebarVisible = shouldShowCustomTitleBar(this.configurationService, auxiliaryWindow.window, undefined);\n\n\t\t\tconst handleTitleBarVisibilityEvent = () => {\n\t\t\t\tconst oldTitlebarPartVisible = titlebarVisible;\n\t\t\t\ttitlebarVisible = shouldShowCustomTitleBar(this.configurationService, auxiliaryWindow.window, undefined);\n\t\t\t\tif (oldTitlebarPartVisible !== titlebarVisible) {\n\t\t\t\t\tupdateTitlebarVisibility(true);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdisposables.add(titlebarPart.onDidChange(() => auxiliaryWindow.layout()));\n\t\t\tdisposables.add(this.layoutService.onDidChangePartVisibility(() => handleTitleBarVisibilityEvent()));\n\t\t\tdisposables.add(onDidChangeFullscreen(windowId => {\n\t\t\t\tif (windowId !== auxiliaryWindow.window.vscodeWindowId) {\n\t\t\t\t\treturn; // ignore all but our window\n\t\t\t\t}\n\n\t\t\t\thandleTitleBarVisibilityEvent();\n\t\t\t}));\n\n\t\t\tupdateTitlebarVisibility(false);\n\t\t} else {\n\t\t\tdisposables.add(scopedEditorPartInstantiationService.createInstance(WindowTitle, auxiliaryWindow.window));\n\t\t}\n\n\t\t// Statusbar\n\t\tconst statusbarPart = disposables.add(this.statusbarService.createAuxiliaryStatusbarPart(auxiliaryWindow.container, scopedEditorPartInstantiationService));\n\t\tlet statusbarVisible = !compact && this.configurationService.getValue<boolean>(AuxiliaryEditorPart.STATUS_BAR_VISIBILITY) !== false;\n\t\tdisposables.add(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AuxiliaryEditorPart.STATUS_BAR_VISIBILITY)) {\n\t\t\t\tstatusbarVisible = !compact && this.configurationService.getValue<boolean>(AuxiliaryEditorPart.STATUS_BAR_VISIBILITY) !== false;\n\n\t\t\t\tupdateStatusbarVisibility(true);\n\t\t\t}\n\t\t}));\n\n\t\tupdateStatusbarVisibility(false);\n\n\t\t// Lifecycle\n\t\tconst editorCloseListener = disposables.add(Event.once(editorPart.onWillClose)(() => auxiliaryWindow.window.close()));\n\t\tdisposables.add(Event.once(auxiliaryWindow.onUnload)(() => {\n\t\t\tif (disposables.isDisposed) {\n\t\t\t\treturn; // the close happened as part of an earlier dispose call\n\t\t\t}\n\n\t\t\teditorCloseListener.dispose();\n\t\t\teditorPart.close();\n\t\t\tdisposables.dispose();\n\t\t}));\n\t\tdisposables.add(Event.once(this.lifecycleService.onDidShutdown)(() => disposables.dispose()));\n\t\tdisposables.add(auxiliaryWindow.onBeforeUnload(event => {\n\t\t\tfor (const group of editorPart.groups) {\n\t\t\t\tfor (const editor of group.editors) {\n\t\t\t\t\t// Closing an auxiliary window with opened editors\n\t\t\t\t\t// will move the editors to the main window. As such,\n\t\t\t\t\t// we need to validate that we can move and otherwise\n\t\t\t\t\t// prevent the window from closing.\n\t\t\t\t\tconst canMoveVeto = editor.canMove(group.id, this.editorPartsView.mainPart.activeGroup.id);\n\t\t\t\t\tif (typeof canMoveVeto === 'string') {\n\t\t\t\t\t\tgroup.openEditor(editor);\n\t\t\t\t\t\tevent.veto(canMoveVeto);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Layout: specifically `onWillLayout` to have a chance\n\t\t// to build the aux editor part before other components\n\t\t// have a chance to react.\n\t\tdisposables.add(auxiliaryWindow.onWillLayout(dimension => {\n\t\t\tconst titlebarPartHeight = titlebarPart?.height ?? 0;\n\t\t\ttitlebarPart?.layout(dimension.width, titlebarPartHeight, 0, 0);\n\n\t\t\tconst editorPartHeight = dimension.height - computeEditorPartHeightOffset();\n\t\t\teditorPart.layout(dimension.width, editorPartHeight, titlebarPartHeight, 0);\n\n\t\t\tstatusbarPart.layout(dimension.width, statusbarPart.height, dimension.height - statusbarPart.height, 0);\n\t\t}));\n\t\tauxiliaryWindow.layout();\n\n\t\t// Compact mode\n\t\tdisposables.add(compactWindowEmitter.event(e => {\n\t\t\tif (e.windowId === auxiliaryWindow.window.vscodeWindowId) {\n\t\t\t\tlet newCompact: boolean;\n\t\t\t\tif (typeof e.compact === 'boolean') {\n\t\t\t\t\tnewCompact = e.compact;\n\t\t\t\t} else {\n\t\t\t\t\tnewCompact = !compact;\n\t\t\t\t}\n\t\t\t\tupdateCompact(newCompact);\n\t\t\t}\n\t\t}));\n\n\t\tdisposables.add(editorPart.onDidAddGroup(() => {\n\t\t\tupdateCompact(false); // leave compact mode when a group is added\n\t\t}));\n\n\t\tdisposables.add(editorPart.activeGroup.onDidActiveEditorChange(() => {\n\t\t\tif (editorPart.activeGroup.count > 1) {\n\t\t\t\tupdateCompact(false); // leave compact mode when more than 1 editor is active\n\t\t\t}\n\t\t}));\n\n\t\t// Have a scoped instantiation service that is scoped to the auxiliary window\n\t\tconst scopedInstantiationService = disposables.add(scopedEditorPartInstantiationService.createChild(new ServiceCollection(\n\t\t\t[IStatusbarService, this.statusbarService.createScoped(statusbarPart, disposables)]\n\t\t)));\n\n\t\treturn {\n\t\t\tpart: editorPart,\n\t\t\tinstantiationService: scopedInstantiationService,\n\t\t\tdisposables\n\t\t};\n\t}\n}\n\nclass AuxiliaryEditorPartImpl extends EditorPart implements IAuxiliaryEditorPart {\n\n\tprivate static COUNTER = 1;\n\n\tprivate readonly _onWillClose = this._register(new Emitter<void>());\n\treadonly onWillClose = this._onWillClose.event;\n\n\tprivate readonly optionsDisposable = this._register(new MutableDisposable());\n\n\tprivate isCompact = false;\n\n\tconstructor(\n\t\twindowId: number,\n\t\teditorPartsView: IEditorPartsView,\n\t\tprivate readonly state: IEditorPartUIState | undefined,\n\t\tgroupsLabel: string,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tconst id = AuxiliaryEditorPartImpl.COUNTER++;\n\t\tsuper(editorPartsView, `workbench.parts.auxiliaryEditor.${id}`, groupsLabel, windowId, instantiationService, themeService, configurationService, storageService, layoutService, hostService, contextKeyService);\n\t}\n\n\tupdateOptions(options: { compact: boolean }): void {\n\t\tthis.isCompact = options.compact;\n\n\t\tif (options.compact) {\n\t\t\tif (!this.optionsDisposable.value) {\n\t\t\t\tthis.optionsDisposable.value = this.enforcePartOptions({\n\t\t\t\t\tshowTabs: 'none',\n\t\t\t\t\tcloseEmptyGroups: true\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthis.optionsDisposable.clear();\n\t\t}\n\t}\n\n\toverride addGroup(location: IEditorGroupView | GroupIdentifier, direction: GroupDirection, groupToCopy?: IEditorGroupView): IEditorGroupView {\n\t\tif (this.isCompact) {\n\t\t\t// When in compact mode, we prefer to open groups in the main part\n\t\t\t// as compact mode is typically meant for showing just 1 editor.\n\t\t\tlocation = this.editorPartsView.mainPart.activeGroup;\n\t\t}\n\n\t\treturn super.addGroup(location, direction, groupToCopy);\n\t}\n\n\toverride removeGroup(group: number | IEditorGroupView, preserveFocus?: boolean): void {\n\n\t\t// Close aux window when last group removed\n\t\tconst groupView = this.assertGroupView(group);\n\t\tif (this.count === 1 && this.activeGroup === groupView) {\n\t\t\tthis.doRemoveLastGroup(preserveFocus);\n\t\t}\n\n\t\t// Otherwise delegate to parent implementation\n\t\telse {\n\t\t\tsuper.removeGroup(group, preserveFocus);\n\t\t}\n\t}\n\n\tprivate doRemoveLastGroup(preserveFocus?: boolean): void {\n\t\tconst restoreFocus = !preserveFocus && this.shouldRestoreFocus(this.container);\n\n\t\t// Activate next group\n\t\tconst mostRecentlyActiveGroups = this.editorPartsView.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE);\n\t\tconst nextActiveGroup = mostRecentlyActiveGroups[1]; // [0] will be the current group we are about to dispose\n\t\tif (nextActiveGroup) {\n\t\t\tnextActiveGroup.groupsView.activateGroup(nextActiveGroup);\n\n\t\t\tif (restoreFocus) {\n\t\t\t\tnextActiveGroup.focus();\n\t\t\t}\n\t\t}\n\n\t\tthis.doClose(false /* do not merge any confirming editors to main part */);\n\t}\n\n\tprotected override loadState(): IEditorPartUIState | undefined {\n\t\treturn this.state;\n\t}\n\n\tprotected override saveState(): void {\n\t\treturn; // disabled, auxiliary editor part state is tracked outside\n\t}\n\n\tclose(): boolean {\n\t\treturn this.doClose(true /* merge all confirming editors to main part */);\n\t}\n\n\tprivate doClose(mergeConfirmingEditorsToMainPart: boolean): boolean {\n\t\tlet result = true;\n\t\tif (mergeConfirmingEditorsToMainPart) {\n\n\t\t\t// First close all editors that are non-confirming\n\t\t\tfor (const group of this.groups) {\n\t\t\t\tgroup.closeAllEditors({ excludeConfirming: true });\n\t\t\t}\n\n\t\t\t// Then merge remaining to main part\n\t\t\tresult = this.mergeGroupsToMainPart();\n\t\t}\n\n\t\tthis._onWillClose.fire();\n\n\t\treturn result;\n\t}\n\n\tprivate mergeGroupsToMainPart(): boolean {\n\t\tif (!this.groups.some(group => group.count > 0)) {\n\t\t\treturn true; // skip if we have no editors opened\n\t\t}\n\n\t\t// Find the most recent group that is not locked\n\t\tlet targetGroup: IEditorGroupView | undefined = undefined;\n\t\tfor (const group of this.editorPartsView.mainPart.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE)) {\n\t\t\tif (!group.isLocked) {\n\t\t\t\ttargetGroup = group;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!targetGroup) {\n\t\t\ttargetGroup = this.editorPartsView.mainPart.addGroup(this.editorPartsView.mainPart.activeGroup, this.partOptions.openSideBySideDirection === 'right' ? GroupDirection.RIGHT : GroupDirection.DOWN);\n\t\t}\n\n\t\tconst result = this.mergeAllGroups(targetGroup, {\n\t\t\t// Try to reduce the impact of closing the auxiliary window\n\t\t\t// as much as possible by not changing existing editors\n\t\t\t// in the main window.\n\t\t\tpreserveExistingIndex: true\n\t\t});\n\t\ttargetGroup.focus();\n\n\t\treturn result;\n\t}\n}\n"]}