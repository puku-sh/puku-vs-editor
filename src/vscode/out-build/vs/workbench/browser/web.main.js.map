{"version":3,"sources":["vs/workbench/browser/web.main.ts"],"names":[],"mappings":"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","file":"web.main.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mark } from '../../base/common/performance.js';\nimport { domContentLoaded, detectFullscreen, getCookieValue, getWindow } from '../../base/browser/dom.js';\nimport { assertReturnsDefined } from '../../base/common/types.js';\nimport { ServiceCollection } from '../../platform/instantiation/common/serviceCollection.js';\nimport { ILogService, ConsoleLogger, getLogLevel, ILoggerService, ILogger } from '../../platform/log/common/log.js';\nimport { ConsoleLogInAutomationLogger } from '../../platform/log/browser/log.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../base/common/lifecycle.js';\nimport { BrowserWorkbenchEnvironmentService, IBrowserWorkbenchEnvironmentService } from '../services/environment/browser/environmentService.js';\nimport { Workbench } from './workbench.js';\nimport { RemoteFileSystemProviderClient } from '../services/remote/common/remoteFileSystemProviderClient.js';\nimport { IWorkbenchEnvironmentService } from '../services/environment/common/environmentService.js';\nimport { IProductService } from '../../platform/product/common/productService.js';\nimport product from '../../platform/product/common/product.js';\nimport { RemoteAgentService } from '../services/remote/browser/remoteAgentService.js';\nimport { RemoteAuthorityResolverService } from '../../platform/remote/browser/remoteAuthorityResolverService.js';\nimport { IRemoteAuthorityResolverService, RemoteConnectionType } from '../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IRemoteAgentService } from '../services/remote/common/remoteAgentService.js';\nimport { IFileService } from '../../platform/files/common/files.js';\nimport { FileService } from '../../platform/files/common/fileService.js';\nimport { Schemas, connectionTokenCookieName } from '../../base/common/network.js';\nimport { IAnyWorkspaceIdentifier, IWorkspaceContextService, UNKNOWN_EMPTY_WINDOW_WORKSPACE, isTemporaryWorkspace, isWorkspaceIdentifier } from '../../platform/workspace/common/workspace.js';\nimport { IWorkbenchConfigurationService } from '../services/configuration/common/configuration.js';\nimport { onUnexpectedError } from '../../base/common/errors.js';\nimport { setFullscreen } from '../../base/browser/browser.js';\nimport { URI, UriComponents } from '../../base/common/uri.js';\nimport { WorkspaceService } from '../services/configuration/browser/configurationService.js';\nimport { ConfigurationCache } from '../services/configuration/common/configurationCache.js';\nimport { ISignService } from '../../platform/sign/common/sign.js';\nimport { SignService } from '../../platform/sign/browser/signService.js';\nimport { IWorkbenchConstructionOptions, IWorkbench, IWorkspace, ITunnel } from './web.api.js';\nimport { BrowserStorageService } from '../services/storage/browser/storageService.js';\nimport { IStorageService } from '../../platform/storage/common/storage.js';\nimport { toLocalISOString } from '../../base/common/date.js';\nimport { isWorkspaceToOpen, isFolderToOpen } from '../../platform/window/common/window.js';\nimport { getSingleFolderWorkspaceIdentifier, getWorkspaceIdentifier } from '../services/workspaces/browser/workspaces.js';\nimport { InMemoryFileSystemProvider } from '../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { ICommandService } from '../../platform/commands/common/commands.js';\nimport { IndexedDBFileSystemProvider } from '../../platform/files/browser/indexedDBFileSystemProvider.js';\nimport { BrowserRequestService } from '../services/request/browser/requestService.js';\nimport { IRequestService } from '../../platform/request/common/request.js';\nimport { IUserDataInitializationService, IUserDataInitializer, UserDataInitializationService } from '../services/userData/browser/userDataInit.js';\nimport { UserDataSyncStoreManagementService } from '../../platform/userDataSync/common/userDataSyncStoreService.js';\nimport { IUserDataSyncStoreManagementService } from '../../platform/userDataSync/common/userDataSync.js';\nimport { ILifecycleService } from '../services/lifecycle/common/lifecycle.js';\nimport { Action2, MenuId, registerAction2 } from '../../platform/actions/common/actions.js';\nimport { IInstantiationService, ServicesAccessor } from '../../platform/instantiation/common/instantiation.js';\nimport { localize, localize2 } from '../../nls.js';\nimport { Categories } from '../../platform/action/common/actionCommonCategories.js';\nimport { IDialogService } from '../../platform/dialogs/common/dialogs.js';\nimport { IHostService } from '../services/host/browser/host.js';\nimport { IUriIdentityService } from '../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../platform/uriIdentity/common/uriIdentityService.js';\nimport { BrowserWindow } from './window.js';\nimport { ITimerService } from '../services/timer/browser/timerService.js';\nimport { WorkspaceTrustEnablementService, WorkspaceTrustManagementService } from '../services/workspaces/common/workspaceTrust.js';\nimport { IWorkspaceTrustEnablementService, IWorkspaceTrustManagementService } from '../../platform/workspace/common/workspaceTrust.js';\nimport { HTMLFileSystemProvider } from '../../platform/files/browser/htmlFileSystemProvider.js';\nimport { IOpenerService } from '../../platform/opener/common/opener.js';\nimport { mixin, safeStringify } from '../../base/common/objects.js';\nimport { IndexedDB } from '../../base/browser/indexedDB.js';\nimport { WebFileSystemAccess } from '../../platform/files/browser/webFileSystemAccess.js';\nimport { IProgressService } from '../../platform/progress/common/progress.js';\nimport { DelayedLogChannel } from '../services/output/common/delayedLogChannel.js';\nimport { dirname, joinPath } from '../../base/common/resources.js';\nimport { IUserDataProfile, IUserDataProfilesService } from '../../platform/userDataProfile/common/userDataProfile.js';\nimport { IPolicyService } from '../../platform/policy/common/policy.js';\nimport { IRemoteExplorerService } from '../services/remote/common/remoteExplorerService.js';\nimport { DisposableTunnel, TunnelProtocol } from '../../platform/tunnel/common/tunnel.js';\nimport { ILabelService } from '../../platform/label/common/label.js';\nimport { UserDataProfileService } from '../services/userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../services/userDataProfile/common/userDataProfile.js';\nimport { BrowserUserDataProfilesService } from '../../platform/userDataProfile/browser/userDataProfile.js';\nimport { DeferredPromise, timeout } from '../../base/common/async.js';\nimport { windowLogGroup, windowLogId } from '../services/log/common/logConstants.js';\nimport { LogService } from '../../platform/log/common/logService.js';\nimport { IRemoteSocketFactoryService, RemoteSocketFactoryService } from '../../platform/remote/common/remoteSocketFactoryService.js';\nimport { BrowserSocketFactory } from '../../platform/remote/browser/browserSocketFactory.js';\nimport { VSBuffer } from '../../base/common/buffer.js';\nimport { IStoredWorkspace } from '../../platform/workspaces/common/workspaces.js';\nimport { UserDataProfileInitializer } from '../services/userDataProfile/browser/userDataProfileInit.js';\nimport { UserDataSyncInitializer } from '../services/userDataSync/browser/userDataSyncInit.js';\nimport { BrowserRemoteResourceLoader } from '../services/remote/browser/browserRemoteResourceHandler.js';\nimport { BufferLogger } from '../../platform/log/common/bufferLog.js';\nimport { FileLoggerService } from '../../platform/log/common/fileLog.js';\nimport { IEmbedderTerminalService } from '../services/terminal/common/embedderTerminalService.js';\nimport { BrowserSecretStorageService } from '../services/secrets/browser/secretStorageService.js';\nimport { EncryptionService } from '../services/encryption/browser/encryptionService.js';\nimport { IEncryptionService } from '../../platform/encryption/common/encryptionService.js';\nimport { ISecretStorageService } from '../../platform/secrets/common/secrets.js';\nimport { TunnelSource } from '../services/remote/common/tunnelModel.js';\nimport { mainWindow } from '../../base/browser/window.js';\nimport { INotificationService, Severity } from '../../platform/notification/common/notification.js';\nimport { DefaultAccountService, IDefaultAccountService } from '../services/accounts/common/defaultAccount.js';\nimport { AccountPolicyService } from '../services/policies/common/accountPolicyService.js';\n\nexport class BrowserMain extends Disposable {\n\n\tprivate readonly onWillShutdownDisposables = this._register(new DisposableStore());\n\tprivate readonly indexedDBFileSystemProviders: IndexedDBFileSystemProvider[] = [];\n\n\tconstructor(\n\t\tprivate readonly domElement: HTMLElement,\n\t\tprivate readonly configuration: IWorkbenchConstructionOptions\n\t) {\n\t\tsuper();\n\n\t\tthis.init();\n\t}\n\n\tprivate init(): void {\n\n\t\t// Browser config\n\t\tsetFullscreen(!!detectFullscreen(mainWindow), mainWindow);\n\t}\n\n\tasync open(): Promise<IWorkbench> {\n\n\t\t// Init services and wait for DOM to be ready in parallel\n\t\tconst [services] = await Promise.all([this.initServices(), domContentLoaded(getWindow(this.domElement))]);\n\n\t\t// Create Workbench\n\t\tconst workbench = new Workbench(this.domElement, undefined, services.serviceCollection, services.logService);\n\n\t\t// Listeners\n\t\tthis.registerListeners(workbench);\n\n\t\t// Startup\n\t\tconst instantiationService = workbench.startup();\n\n\t\t// Window\n\t\tthis._register(instantiationService.createInstance(BrowserWindow));\n\n\t\t// Logging\n\t\tservices.logService.trace('workbench#open with configuration', safeStringify(this.configuration));\n\n\t\t// Return API Facade\n\t\treturn instantiationService.invokeFunction(accessor => {\n\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\tconst lifecycleService = accessor.get(ILifecycleService);\n\t\t\tconst timerService = accessor.get(ITimerService);\n\t\t\tconst openerService = accessor.get(IOpenerService);\n\t\t\tconst productService = accessor.get(IProductService);\n\t\t\tconst progressService = accessor.get(IProgressService);\n\t\t\tconst environmentService = accessor.get(IBrowserWorkbenchEnvironmentService);\n\t\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\t\tconst remoteExplorerService = accessor.get(IRemoteExplorerService);\n\t\t\tconst labelService = accessor.get(ILabelService);\n\t\t\tconst embedderTerminalService = accessor.get(IEmbedderTerminalService);\n\t\t\tconst remoteAuthorityResolverService = accessor.get(IRemoteAuthorityResolverService);\n\t\t\tconst notificationService = accessor.get(INotificationService);\n\n\t\t\tasync function showMessage<T extends string>(severity: Severity, message: string, ...items: T[]): Promise<T | undefined> {\n\t\t\t\tconst choice = new DeferredPromise<T | undefined>();\n\t\t\t\tconst handle = notificationService.prompt(severity, message, items.map(item => ({\n\t\t\t\t\tlabel: item,\n\t\t\t\t\trun: () => choice.complete(item)\n\t\t\t\t})));\n\t\t\t\tconst disposable = handle.onDidClose(() => {\n\t\t\t\t\tchoice.complete(undefined);\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t});\n\t\t\t\tconst result = await choice.p;\n\t\t\t\thandle.close();\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tlet logger: DelayedLogChannel | undefined = undefined;\n\n\t\t\treturn {\n\t\t\t\tcommands: {\n\t\t\t\t\texecuteCommand: (command, ...args) => commandService.executeCommand(command, ...args)\n\t\t\t\t},\n\t\t\t\tenv: {\n\t\t\t\t\tasync getUriScheme(): Promise<string> {\n\t\t\t\t\t\treturn productService.urlProtocol;\n\t\t\t\t\t},\n\t\t\t\t\tasync retrievePerformanceMarks() {\n\t\t\t\t\t\tawait timerService.whenReady();\n\n\t\t\t\t\t\treturn timerService.getPerformanceMarks();\n\t\t\t\t\t},\n\t\t\t\t\tasync openUri(uri: URI | UriComponents): Promise<boolean> {\n\t\t\t\t\t\treturn openerService.open(URI.isUri(uri) ? uri : URI.from(uri), {});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tlogger: {\n\t\t\t\t\tlog: (level, message) => {\n\t\t\t\t\t\tif (!logger) {\n\t\t\t\t\t\t\tlogger = instantiationService.createInstance(DelayedLogChannel, 'webEmbedder', productService.embedderIdentifier || productService.nameShort, joinPath(dirname(environmentService.logFile), 'webEmbedder.log'));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlogger.log(level, message);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twindow: {\n\t\t\t\t\twithProgress: (options, task) => progressService.withProgress(options, task),\n\t\t\t\t\tcreateTerminal: async (options) => embedderTerminalService.createTerminal(options),\n\t\t\t\t\tshowInformationMessage: (message, ...items) => showMessage(Severity.Info, message, ...items),\n\t\t\t\t},\n\t\t\t\tworkspace: {\n\t\t\t\t\tdidResolveRemoteAuthority: async () => {\n\t\t\t\t\t\tif (!this.configuration.remoteAuthority) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tawait remoteAuthorityResolverService.resolveAuthority(this.configuration.remoteAuthority);\n\t\t\t\t\t},\n\t\t\t\t\topenTunnel: async tunnelOptions => {\n\t\t\t\t\t\tconst tunnel = assertReturnsDefined(await remoteExplorerService.forward({\n\t\t\t\t\t\t\tremote: tunnelOptions.remoteAddress,\n\t\t\t\t\t\t\tlocal: tunnelOptions.localAddressPort,\n\t\t\t\t\t\t\tname: tunnelOptions.label,\n\t\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\t\tsource: TunnelSource.Extension,\n\t\t\t\t\t\t\t\tdescription: labelService.getHostLabel(Schemas.vscodeRemote, this.configuration.remoteAuthority)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\televateIfNeeded: false,\n\t\t\t\t\t\t\tprivacy: tunnelOptions.privacy\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tlabel: tunnelOptions.label,\n\t\t\t\t\t\t\televateIfNeeded: undefined,\n\t\t\t\t\t\t\tonAutoForward: undefined,\n\t\t\t\t\t\t\trequireLocalPort: undefined,\n\t\t\t\t\t\t\tprotocol: tunnelOptions.protocol === TunnelProtocol.Https ? tunnelOptions.protocol : TunnelProtocol.Http\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tif (typeof tunnel === 'string') {\n\t\t\t\t\t\t\tthrow new Error(tunnel);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn new class extends DisposableTunnel implements ITunnel {\n\t\t\t\t\t\t\tdeclare localAddress: string;\n\t\t\t\t\t\t}({\n\t\t\t\t\t\t\tport: tunnel.tunnelRemotePort,\n\t\t\t\t\t\t\thost: tunnel.tunnelRemoteHost\n\t\t\t\t\t\t}, tunnel.localAddress, () => tunnel.dispose());\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tshutdown: () => lifecycleService.shutdown()\n\t\t\t} satisfies IWorkbench;\n\t\t});\n\t}\n\n\tprivate registerListeners(workbench: Workbench): void {\n\n\t\t// Workbench Lifecycle\n\t\tthis._register(workbench.onWillShutdown(() => this.onWillShutdownDisposables.clear()));\n\t\tthis._register(workbench.onDidShutdown(() => this.dispose()));\n\t}\n\n\tprivate async initServices(): Promise<{ serviceCollection: ServiceCollection; configurationService: IWorkbenchConfigurationService; logService: ILogService }> {\n\t\tconst serviceCollection = new ServiceCollection();\n\n\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t//\n\t\t// NOTE: Please do NOT register services here. Use `registerSingleton()`\n\t\t//       from `workbench.common.main.ts` if the service is shared between\n\t\t//       desktop and web or `workbench.web.main.ts` if the service\n\t\t//       is web only.\n\t\t//\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\n\t\tconst workspace = this.resolveWorkspace();\n\n\t\t// Product\n\t\tconst productService: IProductService = mixin({ _serviceBrand: undefined, ...product }, this.configuration.productConfiguration);\n\t\tserviceCollection.set(IProductService, productService);\n\n\t\t// Environment\n\t\tconst logsPath = URI.file(toLocalISOString(new Date()).replace(/-|:|\\.\\d+Z$/g, '')).with({ scheme: 'vscode-log' });\n\t\tconst environmentService = new BrowserWorkbenchEnvironmentService(workspace.id, logsPath, this.configuration, productService);\n\t\tserviceCollection.set(IBrowserWorkbenchEnvironmentService, environmentService);\n\n\t\t// Files\n\t\tconst fileLogger = new BufferLogger();\n\t\tconst fileService = this._register(new FileService(fileLogger));\n\t\tserviceCollection.set(IFileService, fileService);\n\n\t\t// Logger\n\t\tconst loggerService = new FileLoggerService(getLogLevel(environmentService), logsPath, fileService);\n\t\tserviceCollection.set(ILoggerService, loggerService);\n\n\t\t// Log Service\n\t\tconst otherLoggers: ILogger[] = [new ConsoleLogger(loggerService.getLogLevel())];\n\t\tif (environmentService.isExtensionDevelopment && !!environmentService.extensionTestsLocationURI) {\n\t\t\totherLoggers.push(new ConsoleLogInAutomationLogger(loggerService.getLogLevel()));\n\t\t}\n\t\tconst logger = loggerService.createLogger(environmentService.logFile, { id: windowLogId, name: windowLogGroup.name, group: windowLogGroup });\n\t\tconst logService = new LogService(logger, otherLoggers);\n\t\tserviceCollection.set(ILogService, logService);\n\n\t\t// Set the logger of the fileLogger after the log service is ready.\n\t\t// This is to avoid cyclic dependency\n\t\tfileLogger.logger = logService;\n\n\t\t// Register File System Providers depending on IndexedDB support\n\t\t// Register them early because they are needed for the profiles initialization\n\t\tawait this.registerIndexedDBFileSystemProviders(environmentService, fileService, logService, loggerService, logsPath);\n\n\n\t\tconst connectionToken = environmentService.options.connectionToken || getCookieValue(connectionTokenCookieName);\n\t\tconst remoteResourceLoader = this.configuration.remoteResourceProvider ? new BrowserRemoteResourceLoader(fileService, this.configuration.remoteResourceProvider) : undefined;\n\t\tconst resourceUriProvider = this.configuration.resourceUriProvider ?? remoteResourceLoader?.getResourceUriProvider();\n\t\tconst remoteAuthorityResolverService = new RemoteAuthorityResolverService(!environmentService.expectsResolverExtension, connectionToken, resourceUriProvider, this.configuration.serverBasePath, productService, logService);\n\t\tserviceCollection.set(IRemoteAuthorityResolverService, remoteAuthorityResolverService);\n\n\t\t// Signing\n\t\tconst signService = new SignService(productService);\n\t\tserviceCollection.set(ISignService, signService);\n\n\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t//\n\t\t// NOTE: Please do NOT register services here. Use `registerSingleton()`\n\t\t//       from `workbench.common.main.ts` if the service is shared between\n\t\t//       desktop and web or `workbench.web.main.ts` if the service\n\t\t//       is web only.\n\t\t//\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\n\t\t// URI Identity\n\t\tconst uriIdentityService = new UriIdentityService(fileService);\n\t\tserviceCollection.set(IUriIdentityService, uriIdentityService);\n\n\t\t// User Data Profiles\n\t\tconst userDataProfilesService = new BrowserUserDataProfilesService(environmentService, fileService, uriIdentityService, logService);\n\t\tserviceCollection.set(IUserDataProfilesService, userDataProfilesService);\n\n\t\tconst currentProfile = await this.getCurrentProfile(workspace, userDataProfilesService, environmentService);\n\t\tawait userDataProfilesService.setProfileForWorkspace(workspace, currentProfile);\n\t\tconst userDataProfileService = new UserDataProfileService(currentProfile);\n\t\tserviceCollection.set(IUserDataProfileService, userDataProfileService);\n\n\t\t// Remote Agent\n\t\tconst remoteSocketFactoryService = new RemoteSocketFactoryService();\n\t\tremoteSocketFactoryService.register(RemoteConnectionType.WebSocket, new BrowserSocketFactory(this.configuration.webSocketFactory));\n\t\tserviceCollection.set(IRemoteSocketFactoryService, remoteSocketFactoryService);\n\t\tconst remoteAgentService = this._register(new RemoteAgentService(remoteSocketFactoryService, userDataProfileService, environmentService, productService, remoteAuthorityResolverService, signService, logService));\n\t\tserviceCollection.set(IRemoteAgentService, remoteAgentService);\n\t\tthis._register(RemoteFileSystemProviderClient.register(remoteAgentService, fileService, logService));\n\n\t\t// Default Account\n\t\tconst defaultAccountService = this._register(new DefaultAccountService());\n\t\tserviceCollection.set(IDefaultAccountService, defaultAccountService);\n\n\t\t// Policies\n\t\tconst policyService = new AccountPolicyService(logService, defaultAccountService);\n\t\tserviceCollection.set(IPolicyService, policyService);\n\n\t\t// Long running services (workspace, config, storage)\n\t\tconst [configurationService, storageService] = await Promise.all([\n\t\t\tthis.createWorkspaceService(workspace, environmentService, userDataProfileService, userDataProfilesService, fileService, remoteAgentService, uriIdentityService, policyService, logService).then(service => {\n\n\t\t\t\t// Workspace\n\t\t\t\tserviceCollection.set(IWorkspaceContextService, service);\n\n\t\t\t\t// Configuration\n\t\t\t\tserviceCollection.set(IWorkbenchConfigurationService, service);\n\n\t\t\t\treturn service;\n\t\t\t}),\n\n\t\t\tthis.createStorageService(workspace, logService, userDataProfileService).then(service => {\n\n\t\t\t\t// Storage\n\t\t\t\tserviceCollection.set(IStorageService, service);\n\n\t\t\t\treturn service;\n\t\t\t})\n\t\t]);\n\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t//\n\t\t// NOTE: Please do NOT register services here. Use `registerSingleton()`\n\t\t//       from `workbench.common.main.ts` if the service is shared between\n\t\t//       desktop and web or `workbench.web.main.ts` if the service\n\t\t//       is web only.\n\t\t//\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\n\t\t// Workspace Trust Service\n\t\tconst workspaceTrustEnablementService = new WorkspaceTrustEnablementService(configurationService, environmentService);\n\t\tserviceCollection.set(IWorkspaceTrustEnablementService, workspaceTrustEnablementService);\n\n\t\tconst workspaceTrustManagementService = new WorkspaceTrustManagementService(configurationService, remoteAuthorityResolverService, storageService, uriIdentityService, environmentService, configurationService, workspaceTrustEnablementService, fileService);\n\t\tserviceCollection.set(IWorkspaceTrustManagementService, workspaceTrustManagementService);\n\n\t\t// Update workspace trust so that configuration is updated accordingly\n\t\tconfigurationService.updateWorkspaceTrust(workspaceTrustManagementService.isWorkspaceTrusted());\n\t\tthis._register(workspaceTrustManagementService.onDidChangeTrust(() => configurationService.updateWorkspaceTrust(workspaceTrustManagementService.isWorkspaceTrusted())));\n\n\t\t// Request Service\n\t\tconst requestService = new BrowserRequestService(remoteAgentService, configurationService, loggerService);\n\t\tserviceCollection.set(IRequestService, requestService);\n\n\t\t// Userdata Sync Store Management Service\n\t\tconst userDataSyncStoreManagementService = new UserDataSyncStoreManagementService(productService, configurationService, storageService);\n\t\tserviceCollection.set(IUserDataSyncStoreManagementService, userDataSyncStoreManagementService);\n\n\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t//\n\t\t// NOTE: Please do NOT register services here. Use `registerSingleton()`\n\t\t//       from `workbench.common.main.ts` if the service is shared between\n\t\t//       desktop and web or `workbench.web.main.ts` if the service\n\t\t//       is web only.\n\t\t//\n\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\t\tconst encryptionService = new EncryptionService();\n\t\tserviceCollection.set(IEncryptionService, encryptionService);\n\t\tconst secretStorageService = new BrowserSecretStorageService(storageService, encryptionService, environmentService, logService);\n\t\tserviceCollection.set(ISecretStorageService, secretStorageService);\n\n\t\t// Userdata Initialize Service\n\t\tconst userDataInitializers: IUserDataInitializer[] = [];\n\t\tuserDataInitializers.push(new UserDataSyncInitializer(environmentService, secretStorageService, userDataSyncStoreManagementService, fileService, userDataProfilesService, storageService, productService, requestService, logService, uriIdentityService));\n\t\tif (environmentService.options.profile) {\n\t\t\tuserDataInitializers.push(new UserDataProfileInitializer(environmentService, fileService, userDataProfileService, storageService, logService, uriIdentityService, requestService));\n\t\t}\n\t\tconst userDataInitializationService = new UserDataInitializationService(userDataInitializers);\n\t\tserviceCollection.set(IUserDataInitializationService, userDataInitializationService);\n\n\t\ttry {\n\t\t\tawait Promise.race([\n\t\t\t\t// Do not block more than 5s\n\t\t\t\ttimeout(5000),\n\t\t\t\tthis.initializeUserData(userDataInitializationService, configurationService)]\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tlogService.error(error);\n\t\t}\n\n\t\treturn { serviceCollection, configurationService, logService };\n\t}\n\n\tprivate async initializeUserData(userDataInitializationService: UserDataInitializationService, configurationService: WorkspaceService) {\n\t\tif (await userDataInitializationService.requiresInitialization()) {\n\t\t\tmark('code/willInitRequiredUserData');\n\n\t\t\t// Initialize required resources - settings & global state\n\t\t\tawait userDataInitializationService.initializeRequiredResources();\n\n\t\t\t// Important: Reload only local user configuration after initializing\n\t\t\t// Reloading complete configuration blocks workbench until remote configuration is loaded.\n\t\t\tawait configurationService.reloadLocalUserConfiguration();\n\n\t\t\tmark('code/didInitRequiredUserData');\n\t\t}\n\t}\n\n\tprivate async registerIndexedDBFileSystemProviders(environmentService: IWorkbenchEnvironmentService, fileService: IFileService, logService: ILogService, loggerService: ILoggerService, logsPath: URI): Promise<void> {\n\n\t\t// IndexedDB is used for logging and user data\n\t\tlet indexedDB: IndexedDB | undefined;\n\t\tconst userDataStore = 'vscode-userdata-store';\n\t\tconst logsStore = 'vscode-logs-store';\n\t\tconst handlesStore = 'vscode-filehandles-store';\n\t\ttry {\n\t\t\tindexedDB = await IndexedDB.create('vscode-web-db', 3, [userDataStore, logsStore, handlesStore]);\n\n\t\t\t// Close onWillShutdown\n\t\t\tthis.onWillShutdownDisposables.add(toDisposable(() => indexedDB?.close()));\n\t\t} catch (error) {\n\t\t\tlogService.error('Error while creating IndexedDB', error);\n\t\t}\n\n\t\t// Logger\n\t\tif (indexedDB) {\n\t\t\tconst logFileSystemProvider = new IndexedDBFileSystemProvider(logsPath.scheme, indexedDB, logsStore, false);\n\t\t\tthis.indexedDBFileSystemProviders.push(logFileSystemProvider);\n\t\t\tfileService.registerProvider(logsPath.scheme, logFileSystemProvider);\n\t\t} else {\n\t\t\tfileService.registerProvider(logsPath.scheme, new InMemoryFileSystemProvider());\n\t\t}\n\n\t\t// User data\n\t\tlet userDataProvider;\n\t\tif (indexedDB) {\n\t\t\tuserDataProvider = new IndexedDBFileSystemProvider(Schemas.vscodeUserData, indexedDB, userDataStore, true);\n\t\t\tthis.indexedDBFileSystemProviders.push(userDataProvider);\n\t\t\tthis.registerDeveloperActions(userDataProvider);\n\t\t} else {\n\t\t\tlogService.info('Using in-memory user data provider');\n\t\t\tuserDataProvider = new InMemoryFileSystemProvider();\n\t\t}\n\t\tfileService.registerProvider(Schemas.vscodeUserData, userDataProvider);\n\n\t\t// Local file access (if supported by browser)\n\t\tif (WebFileSystemAccess.supported(mainWindow)) {\n\t\t\tfileService.registerProvider(Schemas.file, new HTMLFileSystemProvider(indexedDB, handlesStore, logService));\n\t\t}\n\n\t\t// In-memory\n\t\tfileService.registerProvider(Schemas.tmp, new InMemoryFileSystemProvider());\n\t}\n\n\tprivate registerDeveloperActions(provider: IndexedDBFileSystemProvider): void {\n\t\tthis._register(registerAction2(class ResetUserDataAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'workbench.action.resetUserData',\n\t\t\t\t\ttitle: localize2('reset', \"Reset User Data\"),\n\t\t\t\t\tcategory: Categories.Developer,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.CommandPalette\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\t\tconst hostService = accessor.get(IHostService);\n\t\t\t\tconst storageService = accessor.get(IStorageService);\n\t\t\t\tconst logService = accessor.get(ILogService);\n\t\t\t\tconst result = await dialogService.confirm({\n\t\t\t\t\tmessage: localize('reset user data message', \"Would you like to reset your data (settings, keybindings, extensions, snippets and UI State) and reload?\")\n\t\t\t\t});\n\n\t\t\t\tif (result.confirmed) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait provider?.reset();\n\t\t\t\t\t\tif (storageService instanceof BrowserStorageService) {\n\t\t\t\t\t\t\tawait storageService.clear();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tlogService.error(error);\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\thostService.reload();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async createStorageService(workspace: IAnyWorkspaceIdentifier, logService: ILogService, userDataProfileService: IUserDataProfileService): Promise<IStorageService> {\n\t\tconst storageService = new BrowserStorageService(workspace, userDataProfileService, logService);\n\n\t\ttry {\n\t\t\tawait storageService.initialize();\n\n\t\t\t// Register to close on shutdown\n\t\t\tthis.onWillShutdownDisposables.add(toDisposable(() => storageService.close()));\n\n\t\t\treturn storageService;\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\t\t\tlogService.error(error);\n\n\t\t\treturn storageService;\n\t\t}\n\t}\n\n\tprivate async createWorkspaceService(workspace: IAnyWorkspaceIdentifier, environmentService: IBrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService, userDataProfilesService: IUserDataProfilesService, fileService: FileService, remoteAgentService: IRemoteAgentService, uriIdentityService: IUriIdentityService, policyService: IPolicyService, logService: ILogService): Promise<WorkspaceService> {\n\n\t\t// Temporary workspaces do not exist on startup because they are\n\t\t// just in memory. As such, detect this case and eagerly create\n\t\t// the workspace file empty so that it is a valid workspace.\n\n\t\tif (isWorkspaceIdentifier(workspace) && isTemporaryWorkspace(workspace.configPath)) {\n\t\t\ttry {\n\t\t\t\tconst emptyWorkspace: IStoredWorkspace = { folders: [] };\n\t\t\t\tawait fileService.createFile(workspace.configPath, VSBuffer.fromString(JSON.stringify(emptyWorkspace, null, '\\t')), { overwrite: false });\n\t\t\t} catch (error) {\n\t\t\t\t// ignore if workspace file already exists\n\t\t\t}\n\t\t}\n\n\t\tconst configurationCache = new ConfigurationCache([Schemas.file, Schemas.vscodeUserData, Schemas.tmp] /* Cache all non native resources */, environmentService, fileService);\n\t\tconst workspaceService = new WorkspaceService({ remoteAuthority: this.configuration.remoteAuthority, configurationCache }, environmentService, userDataProfileService, userDataProfilesService, fileService, remoteAgentService, uriIdentityService, logService, policyService);\n\n\t\ttry {\n\t\t\tawait workspaceService.initialize(workspace);\n\n\t\t\treturn workspaceService;\n\t\t} catch (error) {\n\t\t\tonUnexpectedError(error);\n\t\t\tlogService.error(error);\n\n\t\t\treturn workspaceService;\n\t\t}\n\t}\n\n\tprivate async getCurrentProfile(workspace: IAnyWorkspaceIdentifier, userDataProfilesService: BrowserUserDataProfilesService, environmentService: BrowserWorkbenchEnvironmentService): Promise<IUserDataProfile> {\n\t\tconst profileName = environmentService.options?.profile?.name ?? environmentService.profile;\n\t\tif (profileName) {\n\t\t\tconst profile = userDataProfilesService.profiles.find(p => p.name === profileName);\n\t\t\tif (profile) {\n\t\t\t\treturn profile;\n\t\t\t}\n\t\t\treturn userDataProfilesService.createNamedProfile(profileName, undefined, workspace);\n\t\t}\n\t\treturn userDataProfilesService.getProfileForWorkspace(workspace) ?? userDataProfilesService.defaultProfile;\n\t}\n\n\tprivate resolveWorkspace(): IAnyWorkspaceIdentifier {\n\t\tlet workspace: IWorkspace | undefined = undefined;\n\t\tif (this.configuration.workspaceProvider) {\n\t\t\tworkspace = this.configuration.workspaceProvider.workspace;\n\t\t}\n\n\t\t// Multi-root workspace\n\t\tif (workspace && isWorkspaceToOpen(workspace)) {\n\t\t\treturn getWorkspaceIdentifier(workspace.workspaceUri);\n\t\t}\n\n\t\t// Single-folder workspace\n\t\tif (workspace && isFolderToOpen(workspace)) {\n\t\t\treturn getSingleFolderWorkspaceIdentifier(workspace.folderUri);\n\t\t}\n\n\t\t// Empty window workspace\n\t\treturn UNKNOWN_EMPTY_WINDOW_WORKSPACE;\n\t}\n}\n"]}