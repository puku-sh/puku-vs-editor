{"version":3,"sources":["vs/workbench/contrib/terminal/browser/environmentVariableInfo.ts"],"names":[],"mappings":"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","file":"environmentVariableInfo.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IEnvironmentVariableInfo } from '../common/environmentVariable.js';\nimport { ITerminalStatus, ITerminalStatusHoverAction, TerminalCommandId } from '../common/terminal.js';\nimport { ITerminalService } from './terminal.js';\nimport { localize } from '../../../../nls.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { EnvironmentVariableScope, IExtensionOwnedEnvironmentVariableMutator, IMergedEnvironmentVariableCollection, IMergedEnvironmentVariableCollectionDiff } from '../../../../platform/terminal/common/environmentVariable.js';\nimport { TerminalStatus } from './terminalStatusList.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\n\nexport class EnvironmentVariableInfoStale implements IEnvironmentVariableInfo {\n\treadonly requiresAction = true;\n\n\tconstructor(\n\t\tprivate readonly _diff: IMergedEnvironmentVariableCollectionDiff,\n\t\tprivate readonly _terminalId: number,\n\t\tprivate readonly _collection: IMergedEnvironmentVariableCollection,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService\n\t) {\n\t}\n\n\tprivate _getInfo(scope: EnvironmentVariableScope | undefined): string {\n\t\tconst extSet: Set<string> = new Set();\n\t\taddExtensionIdentifiers(extSet, this._diff.added.values());\n\t\taddExtensionIdentifiers(extSet, this._diff.removed.values());\n\t\taddExtensionIdentifiers(extSet, this._diff.changed.values());\n\n\t\tlet message = localize('extensionEnvironmentContributionInfoStale', \"The following extensions want to relaunch the terminal to contribute to its environment:\");\n\t\tmessage += getMergedDescription(this._collection, scope, this._extensionService, extSet);\n\t\treturn message;\n\t}\n\n\tprivate _getActions(): ITerminalStatusHoverAction[] {\n\t\treturn [{\n\t\t\tlabel: localize('relaunchTerminalLabel', \"Relaunch Terminal\"),\n\t\t\trun: () => this._terminalService.getInstanceFromId(this._terminalId)?.relaunch(),\n\t\t\tcommandId: TerminalCommandId.Relaunch\n\t\t}];\n\t}\n\n\tgetStatus(scope: EnvironmentVariableScope | undefined): ITerminalStatus {\n\t\treturn {\n\t\t\tid: TerminalStatus.RelaunchNeeded,\n\t\t\tseverity: Severity.Warning,\n\t\t\ticon: Codicon.warning,\n\t\t\ttooltip: this._getInfo(scope),\n\t\t\thoverActions: this._getActions()\n\t\t};\n\t}\n}\n\nexport class EnvironmentVariableInfoChangesActive implements IEnvironmentVariableInfo {\n\treadonly requiresAction = false;\n\n\tconstructor(\n\t\tprivate readonly _collection: IMergedEnvironmentVariableCollection,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService\n\t) {\n\t}\n\n\tprivate _getInfo(scope: EnvironmentVariableScope | undefined): string {\n\t\tconst extSet: Set<string> = new Set();\n\t\taddExtensionIdentifiers(extSet, this._collection.getVariableMap(scope).values());\n\n\t\tlet message = localize('extensionEnvironmentContributionInfoActive', \"The following extensions have contributed to this terminal's environment:\");\n\t\tmessage += getMergedDescription(this._collection, scope, this._extensionService, extSet);\n\t\treturn message;\n\t}\n\n\tprivate _getActions(scope: EnvironmentVariableScope | undefined): ITerminalStatusHoverAction[] {\n\t\treturn [{\n\t\t\tlabel: localize('showEnvironmentContributions', \"Show Environment Contributions\"),\n\t\t\trun: () => this._commandService.executeCommand(TerminalCommandId.ShowEnvironmentContributions, scope),\n\t\t\tcommandId: TerminalCommandId.ShowEnvironmentContributions\n\t\t}];\n\t}\n\n\tgetStatus(scope: EnvironmentVariableScope | undefined): ITerminalStatus {\n\t\treturn {\n\t\t\tid: TerminalStatus.EnvironmentVariableInfoChangesActive,\n\t\t\tseverity: Severity.Info,\n\t\t\ttooltip: undefined, // The action is present when details aren't shown\n\t\t\tdetailedTooltip: this._getInfo(scope),\n\t\t\thoverActions: this._getActions(scope)\n\t\t};\n\t}\n}\n\nfunction getMergedDescription(collection: IMergedEnvironmentVariableCollection, scope: EnvironmentVariableScope | undefined, extensionService: IExtensionService, extSet: Set<string>): string {\n\tconst message = ['\\n'];\n\tconst globalDescriptions = collection.getDescriptionMap(undefined);\n\tconst workspaceDescriptions = collection.getDescriptionMap(scope);\n\tfor (const ext of extSet) {\n\t\tconst globalDescription = globalDescriptions.get(ext);\n\t\tif (globalDescription) {\n\t\t\tmessage.push(`\\n- \\`${getExtensionName(ext, extensionService)}\\``);\n\t\t\tmessage.push(`: ${globalDescription}`);\n\t\t}\n\t\tconst workspaceDescription = workspaceDescriptions.get(ext);\n\t\tif (workspaceDescription) {\n\t\t\t// Only show '(workspace)' suffix if there is already a description for the extension.\n\t\t\tconst workspaceSuffix = globalDescription ? ` (${localize('ScopedEnvironmentContributionInfo', 'workspace')})` : '';\n\t\t\tmessage.push(`\\n- \\`${getExtensionName(ext, extensionService)}${workspaceSuffix}\\``);\n\t\t\tmessage.push(`: ${workspaceDescription}`);\n\t\t}\n\t\tif (!globalDescription && !workspaceDescription) {\n\t\t\tmessage.push(`\\n- \\`${getExtensionName(ext, extensionService)}\\``);\n\t\t}\n\t}\n\treturn message.join('');\n}\n\nfunction addExtensionIdentifiers(extSet: Set<string>, diff: IterableIterator<IExtensionOwnedEnvironmentVariableMutator[]>): void {\n\tfor (const mutators of diff) {\n\t\tfor (const mutator of mutators) {\n\t\t\textSet.add(mutator.extensionIdentifier);\n\t\t}\n\t}\n}\n\nfunction getExtensionName(id: string, extensionService: IExtensionService): string {\n\treturn extensionService.extensions.find(e => e.id === id)?.displayName || id;\n}\n"]}