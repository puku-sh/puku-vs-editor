{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/browser/terminalResizeDebouncer.ts","vs/workbench/contrib/terminal/browser/terminalResizeDebouncer.ts"],"names":[],"mappings":"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","file":"terminalResizeDebouncer.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getWindow, runWhenWindowIdle } from '../../../../base/browser/dom.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport type { XtermTerminal } from './xterm/xtermTerminal.js';\n\nconst enum Constants {\n\t/**\n\t * The _normal_ buffer length threshold at which point resizing starts being debounced.\n\t */\n\tStartDebouncingThreshold = 200,\n}\n\nexport class TerminalResizeDebouncer extends Disposable {\n\tprivate _latestX: number = 0;\n\tprivate _latestY: number = 0;\n\n\tprivate readonly _resizeXJob = this._register(new MutableDisposable());\n\tprivate readonly _resizeYJob = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _isVisible: () => boolean,\n\t\tprivate readonly _getXterm: () => XtermTerminal | undefined,\n\t\tprivate readonly _resizeBothCallback: (cols: number, rows: number) => void,\n\t\tprivate readonly _resizeXCallback: (cols: number) => void,\n\t\tprivate readonly _resizeYCallback: (rows: number) => void,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync resize(cols: number, rows: number, immediate: boolean): Promise<void> {\n\t\tthis._latestX = cols;\n\t\tthis._latestY = rows;\n\n\t\t// Resize immediately if requested explicitly or if the buffer is small\n\t\tif (immediate || this._getXterm()!.raw.buffer.normal.length < Constants.StartDebouncingThreshold) {\n\t\t\tthis._resizeXJob.clear();\n\t\t\tthis._resizeYJob.clear();\n\t\t\tthis._resizeBothCallback(cols, rows);\n\t\t\treturn;\n\t\t}\n\n\t\t// Resize in an idle callback if the terminal is not visible\n\t\tconst win = getWindow(this._getXterm()!.raw.element);\n\t\tif (win && !this._isVisible()) {\n\t\t\tif (!this._resizeXJob.value) {\n\t\t\t\tthis._resizeXJob.value = runWhenWindowIdle(win, async () => {\n\t\t\t\t\tthis._resizeXCallback(this._latestX);\n\t\t\t\t\tthis._resizeXJob.clear();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!this._resizeYJob.value) {\n\t\t\t\tthis._resizeYJob.value = runWhenWindowIdle(win, async () => {\n\t\t\t\t\tthis._resizeYCallback(this._latestY);\n\t\t\t\t\tthis._resizeYJob.clear();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Update dimensions independently as vertical resize is cheap and horizontal resize is\n\t\t// expensive due to reflow.\n\t\tthis._resizeYCallback(rows);\n\t\tthis._latestX = cols;\n\t\tthis._debounceResizeX(cols);\n\t}\n\n\tflush(): void {\n\t\tif (this._resizeXJob.value || this._resizeYJob.value) {\n\t\t\tthis._resizeXJob.clear();\n\t\t\tthis._resizeYJob.clear();\n\t\t\tthis._resizeBothCallback(this._latestX, this._latestY);\n\t\t}\n\t}\n\n\t@debounce(100)\n\tprivate _debounceResizeX(cols: number) {\n\t\tthis._resizeXCallback(cols);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getWindow, runWhenWindowIdle } from '../../../../base/browser/dom.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport type { XtermTerminal } from './xterm/xtermTerminal.js';\n\nconst enum Constants {\n\t/**\n\t * The _normal_ buffer length threshold at which point resizing starts being debounced.\n\t */\n\tStartDebouncingThreshold = 200,\n}\n\nexport class TerminalResizeDebouncer extends Disposable {\n\tprivate _latestX: number = 0;\n\tprivate _latestY: number = 0;\n\n\tprivate readonly _resizeXJob = this._register(new MutableDisposable());\n\tprivate readonly _resizeYJob = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _isVisible: () => boolean,\n\t\tprivate readonly _getXterm: () => XtermTerminal | undefined,\n\t\tprivate readonly _resizeBothCallback: (cols: number, rows: number) => void,\n\t\tprivate readonly _resizeXCallback: (cols: number) => void,\n\t\tprivate readonly _resizeYCallback: (rows: number) => void,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync resize(cols: number, rows: number, immediate: boolean): Promise<void> {\n\t\tthis._latestX = cols;\n\t\tthis._latestY = rows;\n\n\t\t// Resize immediately if requested explicitly or if the buffer is small\n\t\tif (immediate || this._getXterm()!.raw.buffer.normal.length < Constants.StartDebouncingThreshold) {\n\t\t\tthis._resizeXJob.clear();\n\t\t\tthis._resizeYJob.clear();\n\t\t\tthis._resizeBothCallback(cols, rows);\n\t\t\treturn;\n\t\t}\n\n\t\t// Resize in an idle callback if the terminal is not visible\n\t\tconst win = getWindow(this._getXterm()!.raw.element);\n\t\tif (win && !this._isVisible()) {\n\t\t\tif (!this._resizeXJob.value) {\n\t\t\t\tthis._resizeXJob.value = runWhenWindowIdle(win, async () => {\n\t\t\t\t\tthis._resizeXCallback(this._latestX);\n\t\t\t\t\tthis._resizeXJob.clear();\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (!this._resizeYJob.value) {\n\t\t\t\tthis._resizeYJob.value = runWhenWindowIdle(win, async () => {\n\t\t\t\t\tthis._resizeYCallback(this._latestY);\n\t\t\t\t\tthis._resizeYJob.clear();\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Update dimensions independently as vertical resize is cheap and horizontal resize is\n\t\t// expensive due to reflow.\n\t\tthis._resizeYCallback(rows);\n\t\tthis._latestX = cols;\n\t\tthis._debounceResizeX(cols);\n\t}\n\n\tflush(): void {\n\t\tif (this._resizeXJob.value || this._resizeYJob.value) {\n\t\t\tthis._resizeXJob.clear();\n\t\t\tthis._resizeYJob.clear();\n\t\t\tthis._resizeBothCallback(this._latestX, this._latestY);\n\t\t}\n\t}\n\n\t@debounce(100)\n\tprivate _debounceResizeX(cols: number) {\n\t\tthis._resizeXCallback(cols);\n\t}\n}\n"]}