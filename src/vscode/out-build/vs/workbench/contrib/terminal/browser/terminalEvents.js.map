{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/browser/terminalEvents.ts","vs/workbench/contrib/terminal/browser/terminalEvents.ts"],"names":[],"mappings":"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","file":"terminalEvents.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITerminalInstance } from './terminal.js';\nimport { DynamicListEventMultiplexer, Event, EventMultiplexer, IDynamicListEventMultiplexer } from '../../../../base/common/event.js';\nimport { DisposableMap, DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { ITerminalCapabilityImplMap, TerminalCapability } from '../../../../platform/terminal/common/capabilities/capabilities.js';\n\nexport function createInstanceCapabilityEventMultiplexer<T extends TerminalCapability, K>(\n\tcurrentInstances: ITerminalInstance[],\n\tonAddInstance: Event<ITerminalInstance>,\n\tonRemoveInstance: Event<ITerminalInstance>,\n\tcapabilityId: T,\n\tgetEvent: (capability: ITerminalCapabilityImplMap[T]) => Event<K>\n): IDynamicListEventMultiplexer<{ instance: ITerminalInstance; data: K }> {\n\tconst store = new DisposableStore();\n\tconst multiplexer = store.add(new EventMultiplexer<{ instance: ITerminalInstance; data: K }>());\n\tconst capabilityListeners = store.add(new DisposableMap<number, DisposableMap<ITerminalCapabilityImplMap[T], IDisposable>>());\n\n\tfunction addCapability(instance: ITerminalInstance, capability: ITerminalCapabilityImplMap[T]) {\n\t\tconst listener = multiplexer.add(Event.map(getEvent(capability), data => ({ instance, data })));\n\t\tlet instanceCapabilityListeners = capabilityListeners.get(instance.instanceId);\n\t\tif (!instanceCapabilityListeners) {\n\t\t\tinstanceCapabilityListeners = new DisposableMap<ITerminalCapabilityImplMap[T], IDisposable>();\n\t\t\tcapabilityListeners.set(instance.instanceId, instanceCapabilityListeners);\n\t\t}\n\t\tinstanceCapabilityListeners.set(capability, listener);\n\t}\n\n\t// Existing instances\n\tfor (const instance of currentInstances) {\n\t\tconst capability = instance.capabilities.get(capabilityId);\n\t\tif (capability) {\n\t\t\taddCapability(instance, capability);\n\t\t}\n\t}\n\n\t// Removed instances\n\tstore.add(onRemoveInstance(instance => {\n\t\tcapabilityListeners.deleteAndDispose(instance.instanceId);\n\t}));\n\n\t// Added capabilities\n\tconst addCapabilityMultiplexer = store.add(new DynamicListEventMultiplexer(\n\t\tcurrentInstances,\n\t\tonAddInstance,\n\t\tonRemoveInstance,\n\t\tinstance => Event.map(instance.capabilities.createOnDidAddCapabilityOfTypeEvent(capabilityId), changeEvent => ({ instance, changeEvent }))\n\t));\n\tstore.add(addCapabilityMultiplexer.event(e => {\n\t\taddCapability(e.instance, e.changeEvent);\n\t}));\n\n\t// Removed capabilities\n\tconst removeCapabilityMultiplexer = store.add(new DynamicListEventMultiplexer(\n\t\tcurrentInstances,\n\t\tonAddInstance,\n\t\tonRemoveInstance,\n\t\tinstance => Event.map(instance.capabilities.createOnDidRemoveCapabilityOfTypeEvent(capabilityId), changeEvent => ({ instance, changeEvent }))\n\t));\n\tstore.add(removeCapabilityMultiplexer.event(e => {\n\t\tcapabilityListeners.get(e.instance.instanceId)?.deleteAndDispose(e.changeEvent);\n\t}));\n\n\treturn {\n\t\tdispose: () => store.dispose(),\n\t\tevent: multiplexer.event\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITerminalInstance } from './terminal.js';\nimport { DynamicListEventMultiplexer, Event, EventMultiplexer, IDynamicListEventMultiplexer } from '../../../../base/common/event.js';\nimport { DisposableMap, DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { ITerminalCapabilityImplMap, TerminalCapability } from '../../../../platform/terminal/common/capabilities/capabilities.js';\n\nexport function createInstanceCapabilityEventMultiplexer<T extends TerminalCapability, K>(\n\tcurrentInstances: ITerminalInstance[],\n\tonAddInstance: Event<ITerminalInstance>,\n\tonRemoveInstance: Event<ITerminalInstance>,\n\tcapabilityId: T,\n\tgetEvent: (capability: ITerminalCapabilityImplMap[T]) => Event<K>\n): IDynamicListEventMultiplexer<{ instance: ITerminalInstance; data: K }> {\n\tconst store = new DisposableStore();\n\tconst multiplexer = store.add(new EventMultiplexer<{ instance: ITerminalInstance; data: K }>());\n\tconst capabilityListeners = store.add(new DisposableMap<number, DisposableMap<ITerminalCapabilityImplMap[T], IDisposable>>());\n\n\tfunction addCapability(instance: ITerminalInstance, capability: ITerminalCapabilityImplMap[T]) {\n\t\tconst listener = multiplexer.add(Event.map(getEvent(capability), data => ({ instance, data })));\n\t\tlet instanceCapabilityListeners = capabilityListeners.get(instance.instanceId);\n\t\tif (!instanceCapabilityListeners) {\n\t\t\tinstanceCapabilityListeners = new DisposableMap<ITerminalCapabilityImplMap[T], IDisposable>();\n\t\t\tcapabilityListeners.set(instance.instanceId, instanceCapabilityListeners);\n\t\t}\n\t\tinstanceCapabilityListeners.set(capability, listener);\n\t}\n\n\t// Existing instances\n\tfor (const instance of currentInstances) {\n\t\tconst capability = instance.capabilities.get(capabilityId);\n\t\tif (capability) {\n\t\t\taddCapability(instance, capability);\n\t\t}\n\t}\n\n\t// Removed instances\n\tstore.add(onRemoveInstance(instance => {\n\t\tcapabilityListeners.deleteAndDispose(instance.instanceId);\n\t}));\n\n\t// Added capabilities\n\tconst addCapabilityMultiplexer = store.add(new DynamicListEventMultiplexer(\n\t\tcurrentInstances,\n\t\tonAddInstance,\n\t\tonRemoveInstance,\n\t\tinstance => Event.map(instance.capabilities.createOnDidAddCapabilityOfTypeEvent(capabilityId), changeEvent => ({ instance, changeEvent }))\n\t));\n\tstore.add(addCapabilityMultiplexer.event(e => {\n\t\taddCapability(e.instance, e.changeEvent);\n\t}));\n\n\t// Removed capabilities\n\tconst removeCapabilityMultiplexer = store.add(new DynamicListEventMultiplexer(\n\t\tcurrentInstances,\n\t\tonAddInstance,\n\t\tonRemoveInstance,\n\t\tinstance => Event.map(instance.capabilities.createOnDidRemoveCapabilityOfTypeEvent(capabilityId), changeEvent => ({ instance, changeEvent }))\n\t));\n\tstore.add(removeCapabilityMultiplexer.event(e => {\n\t\tcapabilityListeners.get(e.instance.instanceId)?.deleteAndDispose(e.changeEvent);\n\t}));\n\n\treturn {\n\t\tdispose: () => store.dispose(),\n\t\tevent: multiplexer.event\n\t};\n}\n"]}