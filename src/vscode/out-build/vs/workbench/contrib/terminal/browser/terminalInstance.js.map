{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalInstance.ts"],"names":[],"mappings":"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","file":"terminalInstance.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isFirefox } from '../../../../base/browser/browser.js';\nimport { BrowserFeatures } from '../../../../base/browser/canIUse.js';\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { Orientation } from '../../../../base/browser/ui/sash/sash.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { AutoOpenBarrier, Promises, disposableTimeout, timeout } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { BugIndicatingError, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { ISeparator, template } from '../../../../base/common/labels.js';\nimport { Disposable, DisposableMap, DisposableStore, IDisposable, ImmortalReference, MutableDisposable, dispose, toDisposable, type IReference } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as path from '../../../../base/common/path.js';\nimport { OS, OperatingSystem, isMacintosh, isWindows } from '../../../../base/common/platform.js';\nimport { ScrollbarVisibility } from '../../../../base/common/scrollable.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TabFocus } from '../../../../editor/browser/config/tabFocus.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CodeDataTransfers, containsDragType, getPathForFile } from '../../../../platform/dnd/browser/dnd.js';\nimport { FileSystemProviderCapabilities, IFileService } from '../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ResultKind } from '../../../../platform/keybinding/common/keybindingResolver.js';\nimport { INotificationService, IPromptChoice, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IQuickInputService, IQuickPickItem, QuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IMarkProperties, TerminalCapability } from '../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { TerminalCapabilityStoreMultiplexer } from '../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { IEnvironmentVariableCollection, IMergedEnvironmentVariableCollection } from '../../../../platform/terminal/common/environmentVariable.js';\nimport { deserializeEnvironmentVariableCollections } from '../../../../platform/terminal/common/environmentVariableShared.js';\nimport { GeneralShellType, IProcessDataEvent, IProcessPropertyMap, IReconnectionProperties, IShellLaunchConfig, ITerminalDimensionsOverride, ITerminalLaunchError, ITerminalLogService, PosixShellType, ProcessPropertyType, ShellIntegrationStatus, TerminalExitReason, TerminalIcon, TerminalLocation, TerminalSettingId, TerminalShellType, TitleEventSource, WindowsShellType, type ShellIntegrationInjectionFailureReason } from '../../../../platform/terminal/common/terminal.js';\nimport { formatMessageForTerminal } from '../../../../platform/terminal/common/terminalStrings.js';\nimport { editorBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { getIconRegistry } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IColorTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IWorkspaceContextService, IWorkspaceFolder } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkspaceTrustRequestService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { PANEL_BACKGROUND, SIDE_BAR_BACKGROUND } from '../../../common/theme.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../common/views.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { IRequestAddInstanceToGroupEvent, ITerminalConfigurationService, ITerminalContribution, ITerminalInstance, IXtermColorProvider, TerminalDataTransfers } from './terminal.js';\nimport { TerminalLaunchHelpAction } from './terminalActions.js';\nimport { TerminalEditorInput } from './terminalEditorInput.js';\nimport { TerminalExtensionsRegistry } from './terminalExtensions.js';\nimport { getColorClass, createColorStyleElement, getStandardColors } from './terminalIcon.js';\nimport { TerminalProcessManager } from './terminalProcessManager.js';\nimport { ITerminalStatusList, TerminalStatus, TerminalStatusList } from './terminalStatusList.js';\nimport { getTerminalResourcesFromDragEvent, getTerminalUri } from './terminalUri.js';\nimport { TerminalWidgetManager } from './widgets/widgetManager.js';\nimport { LineDataEventAddon } from './xterm/lineDataEventAddon.js';\nimport { XtermTerminal, getXtermScaledDimensions } from './xterm/xtermTerminal.js';\nimport { IEnvironmentVariableInfo } from '../common/environmentVariable.js';\nimport { DEFAULT_COMMANDS_TO_SKIP_SHELL, ITerminalProcessManager, ITerminalProfileResolverService, ProcessState, TERMINAL_CREATION_COMMANDS, TERMINAL_VIEW_ID, TerminalCommandId } from '../common/terminal.js';\nimport { TERMINAL_BACKGROUND_COLOR } from '../common/terminalColorRegistry.js';\nimport { TerminalContextKeys } from '../common/terminalContextKey.js';\nimport { getUriLabelForShell, getShellIntegrationTimeout, getWorkspaceForTerminal, preparePathForShell } from '../common/terminalEnvironment.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { isHorizontal, IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { importAMDNodeModule } from '../../../../amdX.js';\nimport type { IMarker, Terminal as XTermTerminal, IBufferLine } from '@xterm/xterm';\nimport { AccessibilityCommandId } from '../../accessibility/common/accessibilityCommands.js';\nimport { terminalStrings } from '../common/terminalStrings.js';\nimport { TerminalIconPicker } from './terminalIconPicker.js';\nimport { TerminalResizeDebouncer } from './terminalResizeDebouncer.js';\nimport { openContextMenu } from './terminalContextMenu.js';\nimport type { IMenu } from '../../../../platform/actions/common/actions.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { TerminalContribCommandId } from '../terminalContribExports.js';\nimport type { IProgressState } from '@xterm/addon-progress';\nimport { refreshShellIntegrationInfoStatus } from './terminalTooltip.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { PromptInputState } from '../../../../platform/terminal/common/capabilities/commandDetection/promptInputModel.js';\nimport { hasKey, isNumber, isString } from '../../../../base/common/types.js';\n\nconst enum Constants {\n\t/**\n\t * The maximum amount of milliseconds to wait for a container before starting to create the\n\t * terminal process. This period helps ensure the terminal has good initial dimensions to work\n\t * with if it's going to be a foreground terminal.\n\t */\n\tWaitForContainerThreshold = 100,\n\n\tDefaultCols = 80,\n\tDefaultRows = 30,\n\tMaxCanvasWidth = 4096\n}\n\nlet xtermConstructor: Promise<typeof XTermTerminal> | undefined;\n\ninterface ICanvasDimensions {\n\twidth: number;\n\theight: number;\n}\n\ninterface IGridDimensions {\n\tcols: number;\n\trows: number;\n}\n\nconst shellIntegrationSupportedShellTypes: (PosixShellType | GeneralShellType | WindowsShellType)[] = [\n\tPosixShellType.Bash,\n\tPosixShellType.Zsh,\n\tGeneralShellType.PowerShell,\n\tGeneralShellType.Python,\n];\n\nexport class TerminalInstance extends Disposable implements ITerminalInstance {\n\tprivate static _lastKnownCanvasDimensions: ICanvasDimensions | undefined;\n\tprivate static _lastKnownGridDimensions: IGridDimensions | undefined;\n\tprivate static _instanceIdCounter = 1;\n\n\tprivate readonly _scopedInstantiationService: IInstantiationService;\n\n\tprivate readonly _processManager: ITerminalProcessManager;\n\tprivate readonly _contributions: Map<string, ITerminalContribution> = new Map();\n\tprivate readonly _resource: URI;\n\n\t/**\n\t * Resolves when xterm.js is ready, this will be undefined if the terminal instance is disposed\n\t * before xterm.js could be created.\n\t */\n\tprivate _xtermReadyPromise: Promise<XtermTerminal | undefined>;\n\tget xtermReadyPromise(): Promise<XtermTerminal | undefined> { return this._xtermReadyPromise; }\n\n\tprivate _pressAnyKeyToCloseListener: IDisposable | undefined;\n\tprivate _instanceId: number;\n\tprivate _latestXtermWriteData: number = 0;\n\tprivate _latestXtermParseData: number = 0;\n\tprivate _isExiting: boolean;\n\tprivate _hadFocusOnExit: boolean;\n\tprivate _isVisible: boolean;\n\tprivate _exitCode: number | undefined;\n\tprivate _exitReason: TerminalExitReason | undefined;\n\tprivate _skipTerminalCommands: string[];\n\tprivate _shellType: TerminalShellType | undefined;\n\tprivate _title: string = '';\n\tprivate _titleSource: TitleEventSource = TitleEventSource.Process;\n\tprivate _container: HTMLElement | undefined;\n\tprivate _wrapperElement: (HTMLElement & { xterm?: XTermTerminal });\n\tget domElement(): HTMLElement { return this._wrapperElement; }\n\tprivate _horizontalScrollbar: DomScrollableElement | undefined;\n\tprivate _terminalFocusContextKey: IContextKey<boolean>;\n\tprivate _terminalHasFixedWidth: IContextKey<boolean>;\n\tprivate _terminalHasTextContextKey: IContextKey<boolean>;\n\tprivate _terminalAltBufferActiveContextKey: IContextKey<boolean>;\n\tprivate _terminalShellIntegrationEnabledContextKey: IContextKey<boolean>;\n\tprivate _cols: number = 0;\n\tprivate _rows: number = 0;\n\tprivate _fixedCols: number | undefined;\n\tprivate _fixedRows: number | undefined;\n\tprivate _cwd: string | undefined = undefined;\n\tprivate _initialCwd: string | undefined = undefined;\n\tprivate _injectedArgs: string[] | undefined = undefined;\n\tprivate _layoutSettingsChanged: boolean = true;\n\tprivate _dimensionsOverride: ITerminalDimensionsOverride | undefined;\n\tprivate _areLinksReady: boolean = false;\n\tprivate readonly _initialDataEventsListener: MutableDisposable<IDisposable> = this._register(new MutableDisposable());\n\tprivate _initialDataEvents: string[] | undefined = [];\n\tprivate _containerReadyBarrier: AutoOpenBarrier;\n\tprivate _attachBarrier: AutoOpenBarrier;\n\tprivate _icon: TerminalIcon | undefined;\n\tprivate readonly _messageTitleDisposable: MutableDisposable<IDisposable> = this._register(new MutableDisposable());\n\tprivate _widgetManager: TerminalWidgetManager;\n\tprivate readonly _dndObserver: MutableDisposable<IDisposable> = this._register(new MutableDisposable());\n\tprivate _lastLayoutDimensions: dom.Dimension | undefined;\n\tprivate _hasHadInput: boolean;\n\tprivate _description?: string;\n\tprivate _processName: string = '';\n\tprivate _sequence?: string;\n\tprivate _staticTitle?: string;\n\tprivate _workspaceFolder?: IWorkspaceFolder;\n\tprivate _labelComputer?: TerminalLabelComputer;\n\tprivate _userHome?: string;\n\tprivate _hasScrollBar?: boolean;\n\tprivate _usedShellIntegrationInjection: boolean = false;\n\tget usedShellIntegrationInjection(): boolean { return this._usedShellIntegrationInjection; }\n\tprivate _shellIntegrationInjectionInfo: ShellIntegrationInjectionFailureReason | undefined;\n\tget shellIntegrationInjectionFailureReason(): ShellIntegrationInjectionFailureReason | undefined { return this._shellIntegrationInjectionInfo; }\n\tprivate _lineDataEventAddon: LineDataEventAddon | undefined;\n\tprivate readonly _scopedContextKeyService: IContextKeyService;\n\tprivate _resizeDebouncer?: TerminalResizeDebouncer;\n\n\treadonly capabilities = this._register(new TerminalCapabilityStoreMultiplexer());\n\treadonly statusList: ITerminalStatusList;\n\n\tget store(): DisposableStore {\n\t\treturn this._store;\n\t}\n\n\tget extEnvironmentVariableCollection(): IMergedEnvironmentVariableCollection | undefined { return this._processManager.extEnvironmentVariableCollection; }\n\n\txterm?: XtermTerminal;\n\tdisableLayout: boolean = false;\n\n\tget waitOnExit(): ITerminalInstance['waitOnExit'] { return this._shellLaunchConfig.attachPersistentProcess?.waitOnExit || this._shellLaunchConfig.waitOnExit; }\n\tset waitOnExit(value: ITerminalInstance['waitOnExit']) {\n\t\tthis._shellLaunchConfig.waitOnExit = value;\n\t}\n\n\tprivate _targetRef: ImmortalReference<TerminalLocation | undefined> = new ImmortalReference(undefined);\n\tget targetRef(): IReference<TerminalLocation | undefined> { return this._targetRef; }\n\n\tget target(): TerminalLocation | undefined { return this._targetRef.object; }\n\tset target(value: TerminalLocation | undefined) {\n\t\tthis._targetRef.object = value;\n\t\tthis._onDidChangeTarget.fire(value);\n\t}\n\n\tget instanceId(): number { return this._instanceId; }\n\tget resource(): URI { return this._resource; }\n\tget cols(): number {\n\t\tif (this._fixedCols !== undefined) {\n\t\t\treturn this._fixedCols;\n\t\t}\n\t\tif (this._dimensionsOverride && this._dimensionsOverride.cols) {\n\t\t\tif (this._dimensionsOverride.forceExactSize) {\n\t\t\t\treturn this._dimensionsOverride.cols;\n\t\t\t}\n\t\t\treturn Math.min(Math.max(this._dimensionsOverride.cols, 2), this._cols);\n\t\t}\n\t\treturn this._cols;\n\t}\n\tget rows(): number {\n\t\tif (this._fixedRows !== undefined) {\n\t\t\treturn this._fixedRows;\n\t\t}\n\t\tif (this._dimensionsOverride && this._dimensionsOverride.rows) {\n\t\t\tif (this._dimensionsOverride.forceExactSize) {\n\t\t\t\treturn this._dimensionsOverride.rows;\n\t\t\t}\n\t\t\treturn Math.min(Math.max(this._dimensionsOverride.rows, 2), this._rows);\n\t\t}\n\t\treturn this._rows;\n\t}\n\tget isDisposed(): boolean { return this._store.isDisposed; }\n\tget fixedCols(): number | undefined { return this._fixedCols; }\n\tget fixedRows(): number | undefined { return this._fixedRows; }\n\tget maxCols(): number { return this._cols; }\n\tget maxRows(): number { return this._rows; }\n\t// TODO: Ideally processId would be merged into processReady\n\tget processId(): number | undefined { return this._processManager.shellProcessId; }\n\t// TODO: How does this work with detached processes?\n\t// TODO: Should this be an event as it can fire twice?\n\tget processReady(): Promise<void> { return this._processManager.ptyProcessReady; }\n\tget hasChildProcesses(): boolean { return this.shellLaunchConfig.attachPersistentProcess?.hasChildProcesses || this._processManager.hasChildProcesses; }\n\tget reconnectionProperties(): IReconnectionProperties | undefined { return this.shellLaunchConfig.attachPersistentProcess?.reconnectionProperties || this.shellLaunchConfig.reconnectionProperties; }\n\tget areLinksReady(): boolean { return this._areLinksReady; }\n\tget initialDataEvents(): string[] | undefined { return this._initialDataEvents; }\n\tget exitCode(): number | undefined { return this._exitCode; }\n\tget exitReason(): TerminalExitReason | undefined { return this._exitReason; }\n\tget hadFocusOnExit(): boolean { return this._hadFocusOnExit; }\n\tget isTitleSetByProcess(): boolean { return !!this._messageTitleDisposable.value; }\n\tget shellLaunchConfig(): IShellLaunchConfig { return this._shellLaunchConfig; }\n\tget shellType(): TerminalShellType | undefined { return this._shellType; }\n\tget os(): OperatingSystem | undefined { return this._processManager.os; }\n\tget hasRemoteAuthority(): boolean { return this._processManager.remoteAuthority !== undefined; }\n\tget remoteAuthority(): string | undefined { return this._processManager.remoteAuthority; }\n\tget hasFocus(): boolean { return dom.isAncestorOfActiveElement(this._wrapperElement); }\n\tget title(): string { return this._title; }\n\tget titleSource(): TitleEventSource { return this._titleSource; }\n\tget icon(): TerminalIcon | undefined { return this._getIcon(); }\n\tget color(): string | undefined { return this._getColor(); }\n\tget processName(): string { return this._processName; }\n\tget sequence(): string | undefined { return this._sequence; }\n\tget staticTitle(): string | undefined { return this._staticTitle; }\n\tget progressState(): IProgressState | undefined { return this.xterm?.progressState; }\n\tget workspaceFolder(): IWorkspaceFolder | undefined { return this._workspaceFolder; }\n\tget cwd(): string | undefined { return this._cwd; }\n\tget initialCwd(): string | undefined { return this._initialCwd; }\n\tget description(): string | undefined {\n\t\tif (this._description) {\n\t\t\treturn this._description;\n\t\t}\n\t\tconst type = this.shellLaunchConfig.attachPersistentProcess?.type || this.shellLaunchConfig.type;\n\t\tswitch (type) {\n\t\t\tcase 'Task': return terminalStrings.typeTask;\n\t\t\tcase 'Local': return terminalStrings.typeLocal;\n\t\t\tdefault: return undefined;\n\t\t}\n\t}\n\tget userHome(): string | undefined { return this._userHome; }\n\tget shellIntegrationNonce(): string { return this._processManager.shellIntegrationNonce; }\n\tget injectedArgs(): string[] | undefined { return this._injectedArgs; }\n\n\t// The onExit event is special in that it fires and is disposed after the terminal instance\n\t// itself is disposed\n\tprivate readonly _onExit = new Emitter<number | ITerminalLaunchError | undefined>();\n\treadonly onExit = this._onExit.event;\n\tprivate readonly _onDisposed = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDisposed = this._onDisposed.event;\n\tprivate readonly _onProcessIdReady = this._register(new Emitter<ITerminalInstance>());\n\treadonly onProcessIdReady = this._onProcessIdReady.event;\n\tprivate readonly _onProcessReplayComplete = this._register(new Emitter<void>());\n\treadonly onProcessReplayComplete = this._onProcessReplayComplete.event;\n\tprivate readonly _onTitleChanged = this._register(new Emitter<ITerminalInstance>());\n\treadonly onTitleChanged = this._onTitleChanged.event;\n\tprivate readonly _onIconChanged = this._register(new Emitter<{ instance: ITerminalInstance; userInitiated: boolean }>());\n\treadonly onIconChanged = this._onIconChanged.event;\n\tprivate readonly _onWillData = this._register(new Emitter<string>());\n\treadonly onWillData = this._onWillData.event;\n\tprivate readonly _onData = this._register(new Emitter<string>());\n\treadonly onData = this._onData.event;\n\tprivate readonly _onBinary = this._register(new Emitter<string>());\n\treadonly onBinary = this._onBinary.event;\n\tprivate readonly _onRequestExtHostProcess = this._register(new Emitter<ITerminalInstance>());\n\treadonly onRequestExtHostProcess = this._onRequestExtHostProcess.event;\n\tprivate readonly _onDimensionsChanged = this._register(new Emitter<void>());\n\treadonly onDimensionsChanged = this._onDimensionsChanged.event;\n\tprivate readonly _onMaximumDimensionsChanged = this._register(new Emitter<void>());\n\treadonly onMaximumDimensionsChanged = this._onMaximumDimensionsChanged.event;\n\tprivate readonly _onDidFocus = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidFocus = this._onDidFocus.event;\n\tprivate readonly _onDidRequestFocus = this._register(new Emitter<void>());\n\treadonly onDidRequestFocus = this._onDidRequestFocus.event;\n\tprivate readonly _onDidBlur = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidBlur = this._onDidBlur.event;\n\tprivate readonly _onDidInputData = this._register(new Emitter<string>());\n\treadonly onDidInputData = this._onDidInputData.event;\n\tprivate readonly _onDidChangeSelection = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\tprivate readonly _onRequestAddInstanceToGroup = this._register(new Emitter<IRequestAddInstanceToGroupEvent>());\n\treadonly onRequestAddInstanceToGroup = this._onRequestAddInstanceToGroup.event;\n\tprivate readonly _onDidChangeHasChildProcesses = this._register(new Emitter<boolean>());\n\treadonly onDidChangeHasChildProcesses = this._onDidChangeHasChildProcesses.event;\n\tprivate readonly _onDidExecuteText = this._register(new Emitter<void>());\n\treadonly onDidExecuteText = this._onDidExecuteText.event;\n\tprivate readonly _onDidChangeTarget = this._register(new Emitter<TerminalLocation | undefined>());\n\treadonly onDidChangeTarget = this._onDidChangeTarget.event;\n\tprivate readonly _onDidSendText = this._register(new Emitter<string>());\n\treadonly onDidSendText = this._onDidSendText.event;\n\tprivate readonly _onDidChangeShellType = this._register(new Emitter<TerminalShellType>());\n\treadonly onDidChangeShellType = this._onDidChangeShellType.event;\n\tprivate readonly _onDidChangeVisibility = this._register(new Emitter<boolean>());\n\treadonly onDidChangeVisibility = this._onDidChangeVisibility.event;\n\n\tprivate readonly _onLineData = this._register(new Emitter<string>({\n\t\tonDidAddFirstListener: async () => (this.xterm ?? await this._xtermReadyPromise)?.raw.loadAddon(this._lineDataEventAddon!)\n\t}));\n\treadonly onLineData = this._onLineData.event;\n\n\treadonly sessionId = generateUuid();\n\n\tconstructor(\n\t\tprivate readonly _terminalShellTypeContextKey: IContextKey<string>,\n\t\tprivate _shellLaunchConfig: IShellLaunchConfig,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ITerminalConfigurationService private readonly _terminalConfigurationService: ITerminalConfigurationService,\n\t\t@ITerminalProfileResolverService private readonly _terminalProfileResolverService: ITerminalProfileResolverService,\n\t\t@IPathService private readonly _pathService: IPathService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IPreferencesService private readonly _preferencesService: IPreferencesService,\n\t\t@IViewsService private readonly _viewsService: IViewsService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t\t@IProductService private readonly _productService: IProductService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@IWorkbenchEnvironmentService workbenchEnvironmentService: IWorkbenchEnvironmentService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IWorkspaceTrustRequestService private readonly _workspaceTrustRequestService: IWorkspaceTrustRequestService,\n\t\t@IHistoryService private readonly _historyService: IHistoryService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService,\n\t\t@IViewDescriptorService private readonly _viewDescriptorService: IViewDescriptorService,\n\t) {\n\t\tsuper();\n\n\t\tthis._wrapperElement = document.createElement('div');\n\t\tthis._wrapperElement.classList.add('terminal-wrapper');\n\n\t\tthis._widgetManager = this._register(instantiationService.createInstance(TerminalWidgetManager));\n\n\t\tthis._skipTerminalCommands = [];\n\t\tthis._isExiting = false;\n\t\tthis._hadFocusOnExit = false;\n\t\tthis._isVisible = false;\n\t\tthis._instanceId = TerminalInstance._instanceIdCounter++;\n\t\tthis._hasHadInput = false;\n\t\tthis._fixedRows = _shellLaunchConfig.attachPersistentProcess?.fixedDimensions?.rows;\n\t\tthis._fixedCols = _shellLaunchConfig.attachPersistentProcess?.fixedDimensions?.cols;\n\t\tthis._shellLaunchConfig.shellIntegrationEnvironmentReporting = this._configurationService.getValue(TerminalSettingId.ShellIntegrationEnvironmentReporting);\n\n\t\tthis._resource = getTerminalUri(this._workspaceContextService.getWorkspace().id, this.instanceId, this.title);\n\n\t\tif (this._shellLaunchConfig.attachPersistentProcess?.hideFromUser) {\n\t\t\tthis._shellLaunchConfig.hideFromUser = this._shellLaunchConfig.attachPersistentProcess.hideFromUser;\n\t\t}\n\n\t\tif (this._shellLaunchConfig.attachPersistentProcess?.isFeatureTerminal) {\n\t\t\tthis._shellLaunchConfig.isFeatureTerminal = this._shellLaunchConfig.attachPersistentProcess.isFeatureTerminal;\n\t\t}\n\n\t\tif (this._shellLaunchConfig.attachPersistentProcess?.type) {\n\t\t\tthis._shellLaunchConfig.type = this._shellLaunchConfig.attachPersistentProcess.type;\n\t\t}\n\n\t\tif (this._shellLaunchConfig.attachPersistentProcess?.tabActions) {\n\t\t\tthis._shellLaunchConfig.tabActions = this._shellLaunchConfig.attachPersistentProcess.tabActions;\n\t\t}\n\n\t\tif (this.shellLaunchConfig.cwd) {\n\t\t\tconst cwdUri = isString(this._shellLaunchConfig.cwd) ? URI.from({\n\t\t\t\tscheme: Schemas.file,\n\t\t\t\tpath: this._shellLaunchConfig.cwd\n\t\t\t}) : this._shellLaunchConfig.cwd;\n\t\t\tif (cwdUri) {\n\t\t\t\tthis._workspaceFolder = this._workspaceContextService.getWorkspaceFolder(cwdUri) ?? undefined;\n\t\t\t}\n\t\t}\n\t\tif (!this._workspaceFolder) {\n\t\t\tconst activeWorkspaceRootUri = this._historyService.getLastActiveWorkspaceRoot();\n\t\t\tthis._workspaceFolder = activeWorkspaceRootUri ? this._workspaceContextService.getWorkspaceFolder(activeWorkspaceRootUri) ?? undefined : undefined;\n\t\t}\n\n\t\tconst scopedContextKeyService = this._register(_contextKeyService.createScoped(this._wrapperElement));\n\t\tthis._scopedContextKeyService = scopedContextKeyService;\n\t\tthis._scopedInstantiationService = this._register(instantiationService.createChild(new ServiceCollection(\n\t\t\t[IContextKeyService, scopedContextKeyService]\n\t\t)));\n\n\t\tthis._terminalFocusContextKey = TerminalContextKeys.focus.bindTo(scopedContextKeyService);\n\t\tthis._terminalHasFixedWidth = TerminalContextKeys.terminalHasFixedWidth.bindTo(scopedContextKeyService);\n\t\tthis._terminalHasTextContextKey = TerminalContextKeys.textSelected.bindTo(this._contextKeyService);\n\t\tthis._terminalAltBufferActiveContextKey = TerminalContextKeys.altBufferActive.bindTo(scopedContextKeyService);\n\t\tthis._terminalShellIntegrationEnabledContextKey = TerminalContextKeys.terminalShellIntegrationEnabled.bindTo(scopedContextKeyService);\n\n\t\tthis._logService.trace(`terminalInstance#ctor (instanceId: ${this.instanceId})`, this._shellLaunchConfig);\n\t\tthis._register(this.capabilities.onDidAddCapability(e => this._logService.debug('terminalInstance added capability', e.id)));\n\t\tthis._register(this.capabilities.onDidRemoveCapability(e => this._logService.debug('terminalInstance removed capability', e.id)));\n\n\t\tconst capabilityListeners = this._register(new DisposableMap<TerminalCapability, IDisposable>());\n\t\tthis._register(this.capabilities.onDidAddCapability(e => {\n\t\t\tcapabilityListeners.get(e.id)?.dispose();\n\t\t\tconst refreshInfo = () => {\n\t\t\t\tthis._labelComputer?.refreshLabel(this);\n\t\t\t\trefreshShellIntegrationInfoStatus(this);\n\t\t\t};\n\t\t\tswitch (e.id) {\n\t\t\t\tcase TerminalCapability.CwdDetection: {\n\t\t\t\t\tcapabilityListeners.set(e.id, e.capability.onDidChangeCwd(e => {\n\t\t\t\t\t\tthis._cwd = e;\n\t\t\t\t\t\tthis._setTitle(this.title, TitleEventSource.Config);\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase TerminalCapability.CommandDetection: {\n\t\t\t\t\te.capability.promptInputModel.setShellType(this.shellType);\n\t\t\t\t\tcapabilityListeners.set(e.id, Event.any(\n\t\t\t\t\t\te.capability.promptInputModel.onDidStartInput,\n\t\t\t\t\t\te.capability.promptInputModel.onDidChangeInput,\n\t\t\t\t\t\te.capability.promptInputModel.onDidFinishInput\n\t\t\t\t\t)(refreshInfo));\n\t\t\t\t\tthis._register(e.capability.onCommandExecuted(async (command) => {\n\t\t\t\t\t\t// Only generate ID if command doesn't already have one (i.e., it's a manual command, not Copilot-initiated)\n\t\t\t\t\t\t// The tool terminal sets the command ID before command start, so this won't override it\n\t\t\t\t\t\tif (!command.id && command.command) {\n\t\t\t\t\t\t\tconst commandId = generateUuid();\n\t\t\t\t\t\t\tthis.xterm?.shellIntegration.setNextCommandId(command.command, commandId);\n\t\t\t\t\t\t\tawait this._processManager.setNextCommandId(command.command, commandId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase TerminalCapability.PromptTypeDetection: {\n\t\t\t\t\tcapabilityListeners.set(e.id, e.capability.onPromptTypeChanged(refreshInfo));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.onDidChangeShellType(() => refreshShellIntegrationInfoStatus(this)));\n\t\tthis._register(this.capabilities.onDidRemoveCapability(e => {\n\t\t\tcapabilityListeners.get(e.id)?.dispose();\n\t\t}));\n\n\t\t// Resolve just the icon ahead of time so that it shows up immediately in the tabs. This is\n\t\t// disabled in remote because this needs to be sync and the OS may differ on the remote\n\t\t// which would result in the wrong profile being selected and the wrong icon being\n\t\t// permanently attached to the terminal. This also doesn't work when the default profile\n\t\t// setting is set to null, that's handled after the process is created.\n\t\tif (!this.shellLaunchConfig.executable && !workbenchEnvironmentService.remoteAuthority) {\n\t\t\tthis._terminalProfileResolverService.resolveIcon(this._shellLaunchConfig, OS);\n\t\t}\n\t\tthis._icon = _shellLaunchConfig.attachPersistentProcess?.icon || _shellLaunchConfig.icon;\n\n\t\t// When a custom pty is used set the name immediately so it gets passed over to the exthost\n\t\t// and is available when Pseudoterminal.open fires.\n\t\tif (this.shellLaunchConfig.customPtyImplementation) {\n\t\t\tthis._setTitle(this._shellLaunchConfig.name, TitleEventSource.Api);\n\t\t}\n\n\t\tthis.statusList = this._register(this._scopedInstantiationService.createInstance(TerminalStatusList));\n\t\tthis._initDimensions();\n\t\tthis._processManager = this._createProcessManager();\n\n\t\tthis._containerReadyBarrier = new AutoOpenBarrier(Constants.WaitForContainerThreshold);\n\t\tthis._attachBarrier = new AutoOpenBarrier(1000);\n\t\tthis._xtermReadyPromise = this._createXterm();\n\t\tthis._xtermReadyPromise.then(async () => {\n\t\t\t// Wait for a period to allow a container to be ready\n\t\t\tawait this._containerReadyBarrier.wait();\n\n\t\t\t// Resolve the executable ahead of time if shell integration is enabled, this should not\n\t\t\t// be done for custom PTYs as that would cause extension Pseudoterminal-based terminals\n\t\t\t// to hang in resolver extensions\n\t\t\tlet os: OperatingSystem | undefined;\n\t\t\tif (!this.shellLaunchConfig.customPtyImplementation && this._terminalConfigurationService.config.shellIntegration?.enabled && !this.shellLaunchConfig.executable) {\n\t\t\t\tos = await this._processManager.getBackendOS();\n\t\t\t\tconst defaultProfile = (await this._terminalProfileResolverService.getDefaultProfile({ remoteAuthority: this.remoteAuthority, os }));\n\t\t\t\tthis.shellLaunchConfig.executable = defaultProfile.path;\n\t\t\t\tthis.shellLaunchConfig.args = defaultProfile.args;\n\t\t\t\t// Only use default icon and color and env if they are undefined in the SLC\n\t\t\t\tthis.shellLaunchConfig.icon ??= defaultProfile.icon;\n\t\t\t\tthis.shellLaunchConfig.color ??= defaultProfile.color;\n\t\t\t\tthis.shellLaunchConfig.env ??= defaultProfile.env;\n\t\t\t}\n\n\t\t\t// Resolve the shell type ahead of time to allow features that depend upon it to work\n\t\t\t// before the process is actually created (like terminal suggest manual request)\n\t\t\tif (os && this.shellLaunchConfig.executable) {\n\t\t\t\tthis.setShellType(guessShellTypeFromExecutable(os, this.shellLaunchConfig.executable));\n\t\t\t}\n\n\t\t\tawait this._createProcess();\n\n\t\t\t// Re-establish the title after reconnect\n\t\t\tif (this.shellLaunchConfig.attachPersistentProcess) {\n\t\t\t\tthis._cwd = this.shellLaunchConfig.attachPersistentProcess.cwd;\n\t\t\t\tthis._setTitle(this.shellLaunchConfig.attachPersistentProcess.title, this.shellLaunchConfig.attachPersistentProcess.titleSource);\n\t\t\t\tthis.setShellType(this.shellType);\n\t\t\t}\n\n\t\t\tif (this._fixedCols) {\n\t\t\t\tawait this._addScrollbar();\n\t\t\t}\n\t\t}).catch((err) => {\n\t\t\t// Ignore exceptions if the terminal is already disposed\n\t\t\tif (!this.isDisposed) {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t});\n\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(async e => {\n\t\t\tif (e.affectsConfiguration(AccessibilityVerbositySettingId.Terminal)) {\n\t\t\t\tthis._setAriaLabel(this.xterm?.raw, this._instanceId, this.title);\n\t\t\t}\n\t\t\tif (e.affectsConfiguration('terminal.integrated')) {\n\t\t\t\tthis.updateConfig();\n\t\t\t\tthis.setVisible(this._isVisible);\n\t\t\t}\n\t\t\tconst layoutSettings: string[] = [\n\t\t\t\tTerminalSettingId.FontSize,\n\t\t\t\tTerminalSettingId.FontFamily,\n\t\t\t\tTerminalSettingId.FontWeight,\n\t\t\t\tTerminalSettingId.FontWeightBold,\n\t\t\t\tTerminalSettingId.LetterSpacing,\n\t\t\t\tTerminalSettingId.LineHeight,\n\t\t\t\t'editor.fontFamily'\n\t\t\t];\n\t\t\tif (layoutSettings.some(id => e.affectsConfiguration(id))) {\n\t\t\t\tthis._layoutSettingsChanged = true;\n\t\t\t\tawait this._resize();\n\t\t\t}\n\t\t\tif (e.affectsConfiguration(TerminalSettingId.UnicodeVersion)) {\n\t\t\t\tthis._updateUnicodeVersion();\n\t\t\t}\n\t\t\tif (e.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t}\n\t\t\tif (\n\t\t\t\te.affectsConfiguration(TerminalSettingId.TerminalTitle) ||\n\t\t\t\te.affectsConfiguration(TerminalSettingId.TerminalTitleSeparator) ||\n\t\t\t\te.affectsConfiguration(TerminalSettingId.TerminalDescription)) {\n\t\t\t\tthis._labelComputer?.refreshLabel(this);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._workspaceContextService.onDidChangeWorkspaceFolders(() => this._labelComputer?.refreshLabel(this)));\n\n\t\t// Clear out initial data events after 10 seconds, hopefully extension hosts are up and\n\t\t// running at that point.\n\t\tlet initialDataEventsTimeout: number | undefined = dom.getWindow(this._container).setTimeout(() => {\n\t\t\tinitialDataEventsTimeout = undefined;\n\t\t\tthis._initialDataEvents = undefined;\n\t\t\tthis._initialDataEventsListener.clear();\n\t\t}, 10000);\n\t\tthis._register(toDisposable(() => {\n\t\t\tif (initialDataEventsTimeout) {\n\t\t\t\tdom.getWindow(this._container).clearTimeout(initialDataEventsTimeout);\n\t\t\t}\n\t\t}));\n\n\t\t// Initialize contributions\n\t\tconst contributionDescs = TerminalExtensionsRegistry.getTerminalContributions();\n\t\tfor (const desc of contributionDescs) {\n\t\t\tif (this._contributions.has(desc.id)) {\n\t\t\t\tonUnexpectedError(new Error(`Cannot have two terminal contributions with the same id ${desc.id}`));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet contribution: ITerminalContribution;\n\t\t\ttry {\n\t\t\t\tcontribution = this._register(this._scopedInstantiationService.createInstance(desc.ctor, {\n\t\t\t\t\tinstance: this,\n\t\t\t\t\tprocessManager: this._processManager,\n\t\t\t\t\twidgetManager: this._widgetManager\n\t\t\t\t}));\n\t\t\t\tthis._contributions.set(desc.id, contribution);\n\t\t\t} catch (err) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t\tthis._xtermReadyPromise.then(xterm => {\n\t\t\t\tif (xterm) {\n\t\t\t\t\tcontribution.xtermReady?.(xterm);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._register(this.onDisposed(() => {\n\t\t\t\tcontribution.dispose();\n\t\t\t\tthis._contributions.delete(desc.id);\n\t\t\t}));\n\t\t}\n\t}\n\n\tpublic getContribution<T extends ITerminalContribution>(id: string): T | null {\n\t\treturn this._contributions.get(id) as T | null;\n\t}\n\n\tprivate async _handleOnData(data: string): Promise<void> {\n\t\tawait this._processManager.write(data);\n\t\tthis._onDidInputData.fire(data);\n\t}\n\n\tprivate _getIcon(): TerminalIcon | undefined {\n\t\tif (!this._icon) {\n\t\t\tthis._icon = this._processManager.processState >= ProcessState.Launching\n\t\t\t\t? getIconRegistry().getIcon(this._configurationService.getValue(TerminalSettingId.TabsDefaultIcon))\n\t\t\t\t: undefined;\n\t\t}\n\t\treturn this._icon;\n\t}\n\n\tprivate _getColor(): string | undefined {\n\t\tif (this.shellLaunchConfig.color) {\n\t\t\treturn this.shellLaunchConfig.color;\n\t\t}\n\t\tif (this.shellLaunchConfig?.attachPersistentProcess?.color) {\n\t\t\treturn this.shellLaunchConfig.attachPersistentProcess.color;\n\t\t}\n\n\t\tif (this._processManager.processState >= ProcessState.Launching) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate _initDimensions(): void {\n\t\t// The terminal panel needs to have been created to get the real view dimensions\n\t\tif (!this._container) {\n\t\t\t// Set the fallback dimensions if not\n\t\t\tthis._cols = Constants.DefaultCols;\n\t\t\tthis._rows = Constants.DefaultRows;\n\t\t\treturn;\n\t\t}\n\n\t\tconst computedStyle = dom.getWindow(this._container).getComputedStyle(this._container);\n\t\tconst width = parseInt(computedStyle.width);\n\t\tconst height = parseInt(computedStyle.height);\n\n\t\tthis._evaluateColsAndRows(width, height);\n\t}\n\n\t/**\n\t * Evaluates and sets the cols and rows of the terminal if possible.\n\t * @param width The width of the container.\n\t * @param height The height of the container.\n\t * @return The terminal's width if it requires a layout.\n\t */\n\tprivate _evaluateColsAndRows(width: number, height: number): number | null {\n\t\t// Ignore if dimensions are undefined or 0\n\t\tif (!width || !height) {\n\t\t\tthis._setLastKnownColsAndRows();\n\t\t\treturn null;\n\t\t}\n\n\t\tconst dimension = this._getDimension(width, height);\n\t\tif (!dimension) {\n\t\t\tthis._setLastKnownColsAndRows();\n\t\t\treturn null;\n\t\t}\n\n\t\tconst font = this.xterm ? this.xterm.getFont() : this._terminalConfigurationService.getFont(dom.getWindow(this.domElement));\n\t\tconst newRC = getXtermScaledDimensions(dom.getWindow(this.domElement), font, dimension.width, dimension.height);\n\t\tif (!newRC) {\n\t\t\tthis._setLastKnownColsAndRows();\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this._cols !== newRC.cols || this._rows !== newRC.rows) {\n\t\t\tthis._cols = newRC.cols;\n\t\t\tthis._rows = newRC.rows;\n\t\t\tthis._fireMaximumDimensionsChanged();\n\t\t}\n\n\t\treturn dimension.width;\n\t}\n\n\tprivate _setLastKnownColsAndRows(): void {\n\t\tif (TerminalInstance._lastKnownGridDimensions) {\n\t\t\tthis._cols = TerminalInstance._lastKnownGridDimensions.cols;\n\t\t\tthis._rows = TerminalInstance._lastKnownGridDimensions.rows;\n\t\t}\n\t}\n\n\t@debounce(50)\n\tprivate _fireMaximumDimensionsChanged(): void {\n\t\tthis._onMaximumDimensionsChanged.fire();\n\t}\n\n\tprivate _getDimension(width: number, height: number): ICanvasDimensions | undefined {\n\t\t// The font needs to have been initialized\n\t\tconst font = this.xterm ? this.xterm.getFont() : this._terminalConfigurationService.getFont(dom.getWindow(this.domElement));\n\t\tif (!font || !font.charWidth || !font.charHeight) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!this.xterm?.raw.element) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst computedStyle = dom.getWindow(this.xterm.raw.element).getComputedStyle(this.xterm.raw.element);\n\t\tconst horizontalPadding = parseInt(computedStyle.paddingLeft) + parseInt(computedStyle.paddingRight) + 14/*scroll bar padding*/;\n\t\tconst verticalPadding = parseInt(computedStyle.paddingTop) + parseInt(computedStyle.paddingBottom);\n\t\tTerminalInstance._lastKnownCanvasDimensions = new dom.Dimension(\n\t\t\tMath.min(Constants.MaxCanvasWidth, width - horizontalPadding),\n\t\t\theight - verticalPadding + (this._hasScrollBar && this._horizontalScrollbar ? -5/* scroll bar height */ : 0));\n\t\treturn TerminalInstance._lastKnownCanvasDimensions;\n\t}\n\n\tget persistentProcessId(): number | undefined { return this._processManager.persistentProcessId; }\n\tget shouldPersist(): boolean { return this._processManager.shouldPersist && !this.shellLaunchConfig.isTransient && (!this.reconnectionProperties || this._configurationService.getValue('task.reconnection') === true); }\n\n\tpublic static getXtermConstructor(keybindingService: IKeybindingService, contextKeyService: IContextKeyService) {\n\t\tconst keybinding = keybindingService.lookupKeybinding(TerminalContribCommandId.A11yFocusAccessibleBuffer, contextKeyService);\n\t\tif (xtermConstructor) {\n\t\t\treturn xtermConstructor;\n\t\t}\n\t\txtermConstructor = Promises.withAsyncBody<typeof XTermTerminal>(async (resolve) => {\n\t\t\tconst Terminal = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\t\t// Localize strings\n\t\t\tTerminal.strings.promptLabel = nls.localize('terminal.integrated.a11yPromptLabel', 'Terminal input');\n\t\t\tTerminal.strings.tooMuchOutput = keybinding ? nls.localize('terminal.integrated.useAccessibleBuffer', 'Use the accessible buffer {0} to manually review output', keybinding.getLabel()) : nls.localize('terminal.integrated.useAccessibleBufferNoKb', 'Use the Terminal: Focus Accessible Buffer command to manually review output');\n\t\t\tresolve(Terminal);\n\t\t});\n\t\treturn xtermConstructor;\n\t}\n\n\t/**\n\t * Create xterm.js instance and attach data listeners.\n\t */\n\tprotected async _createXterm(): Promise<XtermTerminal | undefined> {\n\t\tconst Terminal = await TerminalInstance.getXtermConstructor(this._keybindingService, this._contextKeyService);\n\t\tif (this.isDisposed) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst disableShellIntegrationReporting = (this.shellLaunchConfig.executable === undefined || this.shellType === undefined) || !shellIntegrationSupportedShellTypes.includes(this.shellType);\n\t\tconst xterm = this._scopedInstantiationService.createInstance(XtermTerminal, this._resource, Terminal, {\n\t\t\tcols: this._cols,\n\t\t\trows: this._rows,\n\t\t\txtermColorProvider: this._scopedInstantiationService.createInstance(TerminalInstanceColorProvider, this._targetRef),\n\t\t\tcapabilities: this.capabilities,\n\t\t\tshellIntegrationNonce: this._processManager.shellIntegrationNonce,\n\t\t\tdisableShellIntegrationReporting,\n\t\t}, this.onDidExecuteText);\n\t\tthis.xterm = xterm;\n\t\tthis._resizeDebouncer = this._register(new TerminalResizeDebouncer(\n\t\t\t() => this._isVisible,\n\t\t\t() => xterm,\n\t\t\tasync (cols, rows) => {\n\t\t\t\txterm.resize(cols, rows);\n\t\t\t\tawait this._updatePtyDimensions(xterm.raw);\n\t\t\t},\n\t\t\tasync (cols) => {\n\t\t\t\txterm.resize(cols, xterm.raw.rows);\n\t\t\t\tawait this._updatePtyDimensions(xterm.raw);\n\t\t\t},\n\t\t\tasync (rows) => {\n\t\t\t\txterm.resize(xterm.raw.cols, rows);\n\t\t\t\tawait this._updatePtyDimensions(xterm.raw);\n\t\t\t}\n\t\t));\n\t\tthis._register(toDisposable(() => this._resizeDebouncer = undefined));\n\t\tthis.updateAccessibilitySupport();\n\t\tthis._register(this.xterm.onDidRequestRunCommand(e => {\n\t\t\tthis.sendText(e.command.command, e.noNewLine ? false : true);\n\t\t}));\n\t\tthis._register(this.xterm.onDidRequestRefreshDimensions(() => {\n\t\t\tif (this._lastLayoutDimensions) {\n\t\t\t\tthis.layout(this._lastLayoutDimensions);\n\t\t\t}\n\t\t}));\n\t\t// Write initial text, deferring onLineFeed listener when applicable to avoid firing\n\t\t// onLineData events containing initialText\n\t\tconst initialTextWrittenPromise = this._shellLaunchConfig.initialText ? new Promise<void>(r => this._writeInitialText(xterm, r)) : undefined;\n\t\tconst lineDataEventAddon = this._register(new LineDataEventAddon(initialTextWrittenPromise));\n\t\tthis._register(lineDataEventAddon.onLineData(e => this._onLineData.fire(e)));\n\t\tthis._lineDataEventAddon = lineDataEventAddon;\n\t\t// Delay the creation of the bell listener to avoid showing the bell when the terminal\n\t\t// starts up or reconnects\n\t\tdisposableTimeout(() => {\n\t\t\tthis._register(xterm.raw.onBell(() => {\n\t\t\t\tif (this._configurationService.getValue(TerminalSettingId.EnableBell) || this._configurationService.getValue(TerminalSettingId.EnableVisualBell)) {\n\t\t\t\t\tthis.statusList.add({\n\t\t\t\t\t\tid: TerminalStatus.Bell,\n\t\t\t\t\t\tseverity: Severity.Warning,\n\t\t\t\t\t\ticon: Codicon.bell,\n\t\t\t\t\t\ttooltip: nls.localize('bellStatus', \"Bell\")\n\t\t\t\t\t}, this._terminalConfigurationService.config.bellDuration);\n\t\t\t\t}\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.terminalBell);\n\t\t\t}));\n\t\t}, 1000, this._store);\n\t\tthis._register(xterm.raw.onSelectionChange(() => this._onDidChangeSelection.fire(this)));\n\t\tthis._register(xterm.raw.buffer.onBufferChange(() => this._refreshAltBufferContextKey()));\n\n\t\tthis._register(this._processManager.onProcessData(e => this._onProcessData(e)));\n\t\tthis._register(xterm.raw.onData(async data => {\n\t\t\tawait this._handleOnData(data);\n\t\t}));\n\t\tthis._register(xterm.raw.onBinary(data => this._processManager.processBinary(data)));\n\t\t// Init winpty compat and link handler after process creation as they rely on the\n\t\t// underlying process OS\n\t\tthis._register(this._processManager.onProcessReady(async (processTraits) => {\n\t\t\t// Respond to DA1 with basic conformance. Note that including this is required to avoid\n\t\t\t// a long delay in conpty 1.22+ where it waits for the response.\n\t\t\t// Reference: https://github.com/microsoft/terminal/blob/3760caed97fa9140a40777a8fbc1c95785e6d2ab/src/terminal/adapter/adaptDispatch.cpp#L1471-L1495\n\t\t\tif (processTraits?.windowsPty?.backend === 'conpty') {\n\t\t\t\tthis._register(xterm.raw.parser.registerCsiHandler({ final: 'c' }, params => {\n\t\t\t\t\tif (params.length === 0 || params.length === 1 && params[0] === 0) {\n\t\t\t\t\t\tthis._handleOnData('\\x1b[?61;4c');\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}));\n\t\t\t}\n\t\t\tif (this._processManager.os) {\n\t\t\t\tlineDataEventAddon.setOperatingSystem(this._processManager.os);\n\t\t\t}\n\t\t\txterm.raw.options.windowsPty = processTraits.windowsPty;\n\t\t}));\n\t\tthis._register(this._processManager.onRestoreCommands(e => this.xterm?.shellIntegration.deserialize(e)));\n\n\t\tthis._register(this._viewDescriptorService.onDidChangeLocation(({ views }) => {\n\t\t\tif (views.some(v => v.id === TERMINAL_VIEW_ID)) {\n\t\t\t\txterm.refresh();\n\t\t\t}\n\t\t}));\n\t\tthis._register(xterm.onDidChangeProgress(() => this._labelComputer?.refreshLabel(this)));\n\n\t\t// Register and update the terminal's shell integration status\n\t\tthis._register(Event.runAndSubscribe(xterm.shellIntegration.onDidChangeSeenSequences, () => {\n\t\t\tif (xterm.shellIntegration.seenSequences.size > 0) {\n\t\t\t\trefreshShellIntegrationInfoStatus(this);\n\t\t\t}\n\t\t}));\n\n\t\t// Set up updating of the process cwd on key press, this is only needed when the cwd\n\t\t// detection capability has not been registered\n\t\tif (!this.capabilities.has(TerminalCapability.CwdDetection)) {\n\t\t\tlet onKeyListener: IDisposable | undefined = xterm.raw.onKey(e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e.domEvent);\n\t\t\t\tif (event.equals(KeyCode.Enter)) {\n\t\t\t\t\tthis._updateProcessCwd();\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._register(this.capabilities.onDidAddCwdDetectionCapability(() => {\n\t\t\t\tonKeyListener?.dispose();\n\t\t\t\tonKeyListener = undefined;\n\t\t\t}));\n\t\t}\n\n\t\tif (this.xterm?.shellIntegration) {\n\t\t\tthis.capabilities.add(this.xterm.shellIntegration.capabilities);\n\t\t}\n\n\t\tthis._pathService.userHome().then(userHome => {\n\t\t\tthis._userHome = userHome.fsPath;\n\t\t});\n\n\t\tif (this._isVisible) {\n\t\t\tthis._open();\n\t\t}\n\n\t\treturn xterm;\n\t}\n\n\tasync runCommand(commandLine: string, shouldExecute: boolean, commandId?: string): Promise<void> {\n\t\tlet commandDetection = this.capabilities.get(TerminalCapability.CommandDetection);\n\t\tconst siInjectionEnabled = this._configurationService.getValue(TerminalSettingId.ShellIntegrationEnabled) === true;\n\t\tconst timeoutMs = getShellIntegrationTimeout(\n\t\t\tthis._configurationService,\n\t\t\tsiInjectionEnabled,\n\t\t\tthis.hasRemoteAuthority,\n\t\t\tthis._processManager.processReadyTimestamp\n\t\t);\n\n\t\tif (!commandDetection || commandDetection.promptInputModel.state !== PromptInputState.Input) {\n\t\t\tconst store = new DisposableStore();\n\n\t\t\tawait Promise.race([\n\t\t\t\tnew Promise<void>(r => {\n\t\t\t\t\tstore.add(this.capabilities.onDidAddCommandDetectionCapability(e => {\n\t\t\t\t\t\tcommandDetection = e;\n\t\t\t\t\t\tif (commandDetection.promptInputModel.state === PromptInputState.Input) {\n\t\t\t\t\t\t\tr();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstore.add(commandDetection.promptInputModel.onDidStartInput(() => {\n\t\t\t\t\t\t\t\tr();\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}),\n\t\t\t\ttimeout(timeoutMs)\n\t\t\t]);\n\t\t\tstore.dispose();\n\t\t}\n\n\t\t// If a command ID was provided and we have command detection, set it as the next command ID\n\t\t// so it will be used when the shell sends the command start sequence\n\t\tif (commandId && commandDetection) {\n\t\t\tthis.xterm?.shellIntegration.setNextCommandId(commandLine, commandId);\n\t\t\tawait this._processManager.setNextCommandId(commandLine, commandId);\n\t\t}\n\n\t\t// Determine whether to send ETX (ctrl+c) before running the command. This should always\n\t\t// happen unless command detection can reliably say that a command is being entered and\n\t\t// there is no content in the prompt\n\t\tif (!commandDetection || commandDetection.promptInputModel.value.length > 0) {\n\t\t\tawait this.sendText('\\x03', false);\n\t\t\t// Wait a little before running the command to avoid the sequences being echoed while the ^C\n\t\t\t// is being evaluated\n\t\t\tawait timeout(100);\n\t\t}\n\t\t// Use bracketed paste mode only when not running the command\n\t\tawait this.sendText(commandLine, shouldExecute, !shouldExecute);\n\t}\n\n\tdetachFromElement(): void {\n\t\tthis._wrapperElement.remove();\n\t\tthis._container = undefined;\n\t}\n\n\tattachToElement(container: HTMLElement): void {\n\t\t// The container did not change, do nothing\n\t\tif (this._container === container) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._attachBarrier.isOpen()) {\n\t\t\tthis._attachBarrier.open();\n\t\t}\n\n\t\t// The container changed, reattach\n\t\tthis._container = container;\n\t\tthis._container.appendChild(this._wrapperElement);\n\n\t\t// If xterm is already attached, call open again to pick up any changes to the window.\n\t\tif (this.xterm?.raw.element) {\n\t\t\tthis.xterm.raw.open(this.xterm.raw.element);\n\t\t}\n\n\t\tthis.xterm?.refresh();\n\n\t\tsetTimeout(() => {\n\t\t\tif (this._store.isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._initDragAndDrop(container);\n\t\t}, 0);\n\t}\n\n\t/**\n\t * Opens the terminal instance inside the parent DOM element previously set with\n\t * `attachToElement`, you must ensure the parent DOM element is explicitly visible before\n\t * invoking this function as it performs some DOM calculations internally\n\t */\n\tprivate _open(): void {\n\t\tif (!this.xterm || this.xterm.raw.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._container || !this._container.isConnected) {\n\t\t\tthrow new Error('A container element needs to be set with `attachToElement` and be part of the DOM before calling `_open`');\n\t\t}\n\n\t\tconst xtermElement = document.createElement('div');\n\t\tthis._wrapperElement.appendChild(xtermElement);\n\n\t\tthis._container.appendChild(this._wrapperElement);\n\n\t\tconst xterm = this.xterm;\n\n\t\t// Attach the xterm object to the DOM, exposing it to the smoke tests\n\t\tthis._wrapperElement.xterm = xterm.raw;\n\n\t\tconst screenElement = xterm.attachToElement(xtermElement);\n\n\t\t// Fire xtermOpen on all contributions\n\t\tfor (const contribution of this._contributions.values()) {\n\t\t\tif (!this.xterm) {\n\t\t\t\tthis._xtermReadyPromise.then(xterm => {\n\t\t\t\t\tif (xterm) {\n\t\t\t\t\t\tcontribution.xtermOpen?.(xterm);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcontribution.xtermOpen?.(this.xterm);\n\t\t\t}\n\t\t}\n\n\t\tthis._register(xterm.shellIntegration.onDidChangeStatus(() => {\n\t\t\tif (this.hasFocus) {\n\t\t\t\tthis._setShellIntegrationContextKey();\n\t\t\t} else {\n\t\t\t\tthis._terminalShellIntegrationEnabledContextKey.reset();\n\t\t\t}\n\t\t}));\n\n\t\tif (!xterm.raw.element || !xterm.raw.textarea) {\n\t\t\tthrow new Error('xterm elements not set after open');\n\t\t}\n\n\t\tthis._setAriaLabel(xterm.raw, this._instanceId, this._title);\n\n\t\txterm.raw.attachCustomKeyEventHandler((event: KeyboardEvent): boolean => {\n\t\t\t// Disable all input if the terminal is exiting\n\t\t\tif (this._isExiting) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst standardKeyboardEvent = new StandardKeyboardEvent(event);\n\t\t\tconst resolveResult = this._keybindingService.softDispatch(standardKeyboardEvent, standardKeyboardEvent.target);\n\n\t\t\t// Respect chords if the allowChords setting is set and it's not Escape. Escape is\n\t\t\t// handled specially for Zen Mode's Escape, Escape chord, plus it's important in\n\t\t\t// terminals generally\n\t\t\tconst isValidChord = resolveResult.kind === ResultKind.MoreChordsNeeded && this._terminalConfigurationService.config.allowChords && event.key !== 'Escape';\n\t\t\tif (this._keybindingService.inChordMode || isValidChord) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst SHOW_TERMINAL_CONFIG_PROMPT_KEY = 'terminal.integrated.showTerminalConfigPrompt';\n\t\t\tconst EXCLUDED_KEYS = ['RightArrow', 'LeftArrow', 'UpArrow', 'DownArrow', 'Space', 'Meta', 'Control', 'Shift', 'Alt', '', 'Delete', 'Backspace', 'Tab'];\n\n\t\t\t// only keep track of input if prompt hasn't already been shown\n\t\t\tif (this._storageService.getBoolean(SHOW_TERMINAL_CONFIG_PROMPT_KEY, StorageScope.APPLICATION, true) &&\n\t\t\t\t!EXCLUDED_KEYS.includes(event.key) &&\n\t\t\t\t!event.ctrlKey &&\n\t\t\t\t!event.shiftKey &&\n\t\t\t\t!event.altKey) {\n\t\t\t\tthis._hasHadInput = true;\n\t\t\t}\n\n\t\t\t// for keyboard events that resolve to commands described\n\t\t\t// within commandsToSkipShell, either alert or skip processing by xterm.js\n\t\t\tif (resolveResult.kind === ResultKind.KbFound && resolveResult.commandId && this._skipTerminalCommands.some(k => k === resolveResult.commandId) && !this._terminalConfigurationService.config.sendKeybindingsToShell) {\n\t\t\t\t// don't alert when terminal is opened or closed\n\t\t\t\tif (this._storageService.getBoolean(SHOW_TERMINAL_CONFIG_PROMPT_KEY, StorageScope.APPLICATION, true) &&\n\t\t\t\t\tthis._hasHadInput &&\n\t\t\t\t\t!TERMINAL_CREATION_COMMANDS.includes(resolveResult.commandId)) {\n\t\t\t\t\tthis._notificationService.prompt(\n\t\t\t\t\t\tSeverity.Info,\n\t\t\t\t\t\tnls.localize('keybindingHandling', \"Some keybindings don't go to the terminal by default and are handled by {0} instead.\", this._productService.nameLong),\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: nls.localize('configureTerminalSettings', \"Configure Terminal Settings\"),\n\t\t\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\t\t\tthis._preferencesService.openSettings({ jsonEditor: false, query: `@id:${TerminalSettingId.CommandsToSkipShell},${TerminalSettingId.SendKeybindingsToShell},${TerminalSettingId.AllowChords}` });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} satisfies IPromptChoice\n\t\t\t\t\t\t]\n\t\t\t\t\t);\n\t\t\t\t\tthis._storageService.store(SHOW_TERMINAL_CONFIG_PROMPT_KEY, false, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Skip processing by xterm.js of keyboard events that match menu bar mnemonics\n\t\t\tif (this._terminalConfigurationService.config.allowMnemonics && !isMacintosh && event.altKey) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// If tab focus mode is on, tab is not passed to the terminal\n\t\t\tif (TabFocus.getTabFocusMode() && event.key === 'Tab') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Prevent default when shift+tab is being sent to the terminal to avoid it bubbling up\n\t\t\t// and changing focus https://github.com/microsoft/vscode/issues/188329\n\t\t\tif (event.key === 'Tab' && event.shiftKey) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Always have alt+F4 skip the terminal on Windows and allow it to be handled by the\n\t\t\t// system\n\t\t\tif (isWindows && event.altKey && event.key === 'F4' && !event.ctrlKey) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Fallback to force ctrl+v to paste on browsers that do not support\n\t\t\t// navigator.clipboard.readText\n\t\t\tif (!BrowserFeatures.clipboard.readText && event.key === 'v' && event.ctrlKey) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t\tthis._register(dom.addDisposableListener(xterm.raw.element, 'mousedown', () => {\n\t\t\t// We need to listen to the mouseup event on the document since the user may release\n\t\t\t// the mouse button anywhere outside of _xterm.element.\n\t\t\tconst listener = dom.addDisposableListener(xterm.raw.element!.ownerDocument, 'mouseup', () => {\n\t\t\t\t// Delay with a setTimeout to allow the mouseup to propagate through the DOM\n\t\t\t\t// before evaluating the new selection state.\n\t\t\t\tsetTimeout(() => this._refreshSelectionContextKey(), 0);\n\t\t\t\tlistener.dispose();\n\t\t\t});\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(xterm.raw.element, 'touchstart', () => {\n\t\t\txterm.raw.focus();\n\t\t}));\n\n\t\t// xterm.js currently drops selection on keyup as we need to handle this case.\n\t\tthis._register(dom.addDisposableListener(xterm.raw.element, 'keyup', () => {\n\t\t\t// Wait until keyup has propagated through the DOM before evaluating\n\t\t\t// the new selection state.\n\t\t\tsetTimeout(() => this._refreshSelectionContextKey(), 0);\n\t\t}));\n\n\t\tthis._register(dom.addDisposableListener(xterm.raw.textarea, 'focus', () => this._setFocus(true)));\n\t\tthis._register(dom.addDisposableListener(xterm.raw.textarea, 'blur', () => this._setFocus(false)));\n\t\tthis._register(dom.addDisposableListener(xterm.raw.textarea, 'focusout', () => this._setFocus(false)));\n\n\t\tthis._initDragAndDrop(this._container);\n\n\t\tthis._widgetManager.attachToElement(screenElement);\n\n\t\tif (this._lastLayoutDimensions) {\n\t\t\tthis.layout(this._lastLayoutDimensions);\n\t\t}\n\t\tthis.updateConfig();\n\n\t\t// If IShellLaunchConfig.waitOnExit was true and the process finished before the terminal\n\t\t// panel was initialized.\n\t\tif (xterm.raw.options.disableStdin) {\n\t\t\tthis._attachPressAnyKeyToCloseListener(xterm.raw);\n\t\t}\n\t}\n\n\tprivate _setFocus(focused?: boolean): void {\n\t\tif (focused) {\n\t\t\tthis._terminalFocusContextKey.set(true);\n\t\t\tthis._setShellIntegrationContextKey();\n\t\t\tthis._onDidFocus.fire(this);\n\t\t} else {\n\t\t\tthis.resetFocusContextKey();\n\t\t\tthis._onDidBlur.fire(this);\n\t\t\tthis._refreshSelectionContextKey();\n\t\t}\n\t}\n\n\tprivate _setShellIntegrationContextKey(): void {\n\t\tif (this.xterm) {\n\t\t\tthis._terminalShellIntegrationEnabledContextKey.set(this.xterm.shellIntegration.status === ShellIntegrationStatus.VSCode);\n\t\t}\n\t}\n\n\tresetFocusContextKey(): void {\n\t\tthis._terminalFocusContextKey.reset();\n\t\tthis._terminalShellIntegrationEnabledContextKey.reset();\n\t}\n\n\tprivate _initDragAndDrop(container: HTMLElement) {\n\t\tconst store = new DisposableStore();\n\t\tconst dndController = store.add(this._scopedInstantiationService.createInstance(TerminalInstanceDragAndDropController, container));\n\t\tstore.add(dndController.onDropTerminal(e => this._onRequestAddInstanceToGroup.fire(e)));\n\t\tstore.add(dndController.onDropFile(async path => {\n\t\t\tthis.focus();\n\t\t\tawait this.sendPath(path, false);\n\t\t}));\n\t\tstore.add(new dom.DragAndDropObserver(container, dndController));\n\t\tthis._dndObserver.value = store;\n\t}\n\n\thasSelection(): boolean {\n\t\treturn this.xterm ? this.xterm.raw.hasSelection() : false;\n\t}\n\n\tget selection(): string | undefined {\n\t\treturn this.xterm && this.hasSelection() ? this.xterm.raw.getSelection() : undefined;\n\t}\n\n\tclearSelection(): void {\n\t\tthis.xterm?.raw.clearSelection();\n\t}\n\n\tprivate _refreshAltBufferContextKey() {\n\t\tthis._terminalAltBufferActiveContextKey.set(!!(this.xterm && this.xterm.raw.buffer.active === this.xterm.raw.buffer.alternate));\n\t}\n\n\toverride dispose(reason?: TerminalExitReason): void {\n\t\tif (this.shellLaunchConfig.type === 'Task' && reason === TerminalExitReason.Process && this._exitCode !== 0 && !this.shellLaunchConfig.waitOnExit) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tthis._logService.trace(`terminalInstance#dispose (instanceId: ${this.instanceId})`);\n\t\tdispose(this._widgetManager);\n\n\t\tif (this.xterm?.raw.element) {\n\t\t\tthis._hadFocusOnExit = this.hasFocus;\n\t\t}\n\t\tif (this._wrapperElement.xterm) {\n\t\t\tthis._wrapperElement.xterm = undefined;\n\t\t}\n\t\tif (this._horizontalScrollbar) {\n\t\t\tthis._horizontalScrollbar.dispose();\n\t\t\tthis._horizontalScrollbar = undefined;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.xterm?.dispose();\n\t\t} catch (err: unknown) {\n\t\t\t// See https://github.com/microsoft/vscode/issues/153486\n\t\t\tthis._logService.error('Exception occurred during xterm disposal', err);\n\t\t}\n\n\t\t// HACK: Workaround for Firefox bug https://bugzilla.mozilla.org/show_bug.cgi?id=559561,\n\t\t// as 'blur' event in xterm.raw.textarea is not triggered on xterm.dispose()\n\t\t// See https://github.com/microsoft/vscode/issues/138358\n\t\tif (isFirefox) {\n\t\t\tthis.resetFocusContextKey();\n\t\t\tthis._terminalHasTextContextKey.reset();\n\t\t\tthis._onDidBlur.fire(this);\n\t\t}\n\n\t\tif (this._pressAnyKeyToCloseListener) {\n\t\t\tthis._pressAnyKeyToCloseListener.dispose();\n\t\t\tthis._pressAnyKeyToCloseListener = undefined;\n\t\t}\n\n\t\tif (this._exitReason === undefined) {\n\t\t\tthis._exitReason = reason ?? TerminalExitReason.Unknown;\n\t\t}\n\n\t\tthis._processManager.dispose();\n\t\t// Process manager dispose/shutdown doesn't fire process exit, trigger with undefined if it\n\t\t// hasn't happened yet\n\t\tthis._onProcessExit(undefined);\n\n\t\tthis._onDisposed.fire(this);\n\n\t\tsuper.dispose();\n\t}\n\n\tasync detachProcessAndDispose(reason: TerminalExitReason): Promise<void> {\n\t\t// Detach the process and dispose the instance, without the instance dispose the terminal\n\t\t// won't go away. Force persist if the detach was requested by the user (not shutdown).\n\t\tawait this._processManager.detachFromProcess(reason === TerminalExitReason.User);\n\t\tthis.dispose(reason);\n\t}\n\n\tfocus(force?: boolean): void {\n\t\tthis._refreshAltBufferContextKey();\n\t\tif (!this.xterm) {\n\t\t\treturn;\n\t\t}\n\t\tif (force || !dom.getActiveWindow().getSelection()?.toString()) {\n\t\t\tthis.xterm.raw.focus();\n\t\t\tthis._onDidRequestFocus.fire();\n\t\t}\n\t}\n\n\tasync focusWhenReady(force?: boolean): Promise<void> {\n\t\tawait this._xtermReadyPromise;\n\t\tawait this._attachBarrier.wait();\n\t\tthis.focus(force);\n\t}\n\n\tasync sendText(text: string, shouldExecute: boolean, bracketedPasteMode?: boolean): Promise<void> {\n\t\t// Apply bracketed paste sequences if the terminal has the mode enabled, this will prevent\n\t\t// the text from triggering keybindings and ensure new lines are handled properly\n\t\tif (bracketedPasteMode && this.xterm?.raw.modes.bracketedPasteMode) {\n\t\t\ttext = `\\x1b[200~${text}\\x1b[201~`;\n\t\t}\n\n\t\t// Normalize line endings to 'enter' press.\n\t\ttext = text.replace(/\\r?\\n/g, '\\r');\n\t\tif (shouldExecute && !text.endsWith('\\r')) {\n\t\t\ttext += '\\r';\n\t\t}\n\n\t\t// Send it to the process\n\t\tthis._logService.debug('sending data (vscode)', text);\n\t\tawait this._processManager.write(text);\n\t\tthis._onDidInputData.fire(text);\n\t\tthis._onDidSendText.fire(text);\n\t\tthis.xterm?.scrollToBottom();\n\t\tif (shouldExecute) {\n\t\t\tthis._onDidExecuteText.fire();\n\t\t}\n\t}\n\n\tasync sendSignal(signal: string): Promise<void> {\n\t\tthis._logService.debug('sending signal (vscode)', signal);\n\t\tawait this._processManager.sendSignal(signal);\n\t}\n\n\tasync sendPath(originalPath: string | URI, shouldExecute: boolean): Promise<void> {\n\t\treturn this.sendText(await this.preparePathForShell(originalPath), shouldExecute);\n\t}\n\n\tasync preparePathForShell(originalPath: string | URI): Promise<string> {\n\t\t// Wait for shell type to be ready\n\t\tawait this.processReady;\n\t\treturn preparePathForShell(originalPath, this.shellLaunchConfig.executable, this.title, this.shellType, this._processManager.backend, this._processManager.os);\n\t}\n\n\tasync getUriLabelForShell(uri: URI): Promise<string> {\n\t\t// Wait for shell type to be ready\n\t\tawait this.processReady;\n\t\treturn getUriLabelForShell(uri, this._processManager.backend!, this.shellType, this.os);\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tconst didChange = this._isVisible !== visible;\n\t\tthis._isVisible = visible;\n\t\tthis._wrapperElement.classList.toggle('active', visible);\n\t\tif (visible && this.xterm) {\n\t\t\tthis._open();\n\t\t\t// Flush any pending resizes\n\t\t\tthis._resizeDebouncer?.flush();\n\t\t\t// Resize to re-evaluate dimensions, this will ensure when switching to a terminal it is\n\t\t\t// using the most up to date dimensions (eg. when terminal is created in the background\n\t\t\t// using cached dimensions of a split terminal).\n\t\t\tthis._resize();\n\t\t}\n\t\tif (didChange) {\n\t\t\tthis._onDidChangeVisibility.fire(visible);\n\t\t}\n\t}\n\n\tscrollDownLine(): void {\n\t\tthis.xterm?.scrollDownLine();\n\t}\n\n\tscrollDownPage(): void {\n\t\tthis.xterm?.scrollDownPage();\n\t}\n\n\tscrollToBottom(): void {\n\t\tthis.xterm?.scrollToBottom();\n\t}\n\n\tscrollUpLine(): void {\n\t\tthis.xterm?.scrollUpLine();\n\t}\n\n\tscrollUpPage(): void {\n\t\tthis.xterm?.scrollUpPage();\n\t}\n\n\tscrollToTop(): void {\n\t\tthis.xterm?.scrollToTop();\n\t}\n\n\tclearBuffer(): void {\n\t\tthis._processManager.clearBuffer();\n\t\tthis.xterm?.clearBuffer();\n\t}\n\n\tprivate _refreshSelectionContextKey() {\n\t\tconst isActive = !!this._viewsService.getActiveViewWithId(TERMINAL_VIEW_ID);\n\t\tlet isEditorActive = false;\n\t\tconst editor = this._editorService.activeEditor;\n\t\tif (editor) {\n\t\t\tisEditorActive = editor instanceof TerminalEditorInput;\n\t\t}\n\t\tthis._terminalHasTextContextKey.set((isActive || isEditorActive) && this.hasSelection());\n\t}\n\n\tprotected _createProcessManager(): TerminalProcessManager {\n\t\tlet deserializedCollections: ReadonlyMap<string, IEnvironmentVariableCollection> | undefined;\n\t\tif (this.shellLaunchConfig.attachPersistentProcess?.environmentVariableCollections) {\n\t\t\tdeserializedCollections = deserializeEnvironmentVariableCollections(this.shellLaunchConfig.attachPersistentProcess.environmentVariableCollections);\n\t\t}\n\t\tconst processManager = this._scopedInstantiationService.createInstance(\n\t\t\tTerminalProcessManager,\n\t\t\tthis._instanceId,\n\t\t\tthis.shellLaunchConfig?.cwd,\n\t\t\tdeserializedCollections,\n\t\t\tthis.shellLaunchConfig.shellIntegrationNonce ?? this.shellLaunchConfig.attachPersistentProcess?.shellIntegrationNonce\n\t\t);\n\t\tthis.capabilities.add(processManager.capabilities);\n\t\tthis._register(processManager.onProcessReady(async (e) => {\n\t\t\tthis._onProcessIdReady.fire(this);\n\t\t\tthis._initialCwd = await this.getInitialCwd();\n\t\t\t// Set the initial name based on the _resolved_ shell launch config, this will also\n\t\t\t// ensure the resolved icon gets shown\n\t\t\tif (!this._labelComputer) {\n\t\t\t\tthis._labelComputer = this._register(this._scopedInstantiationService.createInstance(TerminalLabelComputer));\n\t\t\t\tthis._register(this._labelComputer.onDidChangeLabel(e => {\n\t\t\t\t\tconst wasChanged = this._title !== e.title || this._description !== e.description;\n\t\t\t\t\tif (wasChanged) {\n\t\t\t\t\t\tthis._title = e.title;\n\t\t\t\t\t\tthis._description = e.description;\n\t\t\t\t\t\tthis._onTitleChanged.fire(this);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t\tif (this._shellLaunchConfig.name) {\n\t\t\t\tthis._setTitle(this._shellLaunchConfig.name, TitleEventSource.Api);\n\t\t\t} else {\n\t\t\t\t// Listen to xterm.js' sequence title change event, trigger this async to ensure\n\t\t\t\t// _xtermReadyPromise is ready constructed since this is called from the ctor\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._xtermReadyPromise.then(xterm => {\n\t\t\t\t\t\tif (xterm) {\n\t\t\t\t\t\t\tthis._messageTitleDisposable.value = xterm.raw.onTitleChange(e => this._onTitleChange(e));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tthis._setTitle(this._shellLaunchConfig.executable, TitleEventSource.Process);\n\t\t\t}\n\t\t}));\n\t\tthis._register(processManager.onProcessExit(exitCode => this._onProcessExit(exitCode)));\n\t\tthis._register(processManager.onDidChangeProperty(({ type, value }) => {\n\t\t\tswitch (type) {\n\t\t\t\tcase ProcessPropertyType.Cwd:\n\t\t\t\t\tthis._cwd = value as IProcessPropertyMap[ProcessPropertyType.Cwd];\n\t\t\t\t\tthis._labelComputer?.refreshLabel(this);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.InitialCwd:\n\t\t\t\t\tthis._initialCwd = value as IProcessPropertyMap[ProcessPropertyType.InitialCwd];\n\t\t\t\t\tthis._cwd = this._initialCwd;\n\t\t\t\t\tthis._setTitle(this.title, TitleEventSource.Config);\n\t\t\t\t\tthis._icon = this._shellLaunchConfig.attachPersistentProcess?.icon || this._shellLaunchConfig.icon;\n\t\t\t\t\tthis._onIconChanged.fire({ instance: this, userInitiated: false });\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.Title:\n\t\t\t\t\tthis._setTitle(value as IProcessPropertyMap[ProcessPropertyType.Title] ?? '', TitleEventSource.Process);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.OverrideDimensions:\n\t\t\t\t\tthis.setOverrideDimensions(value as IProcessPropertyMap[ProcessPropertyType.OverrideDimensions], true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.ResolvedShellLaunchConfig:\n\t\t\t\t\tthis._setResolvedShellLaunchConfig(value as IProcessPropertyMap[ProcessPropertyType.ResolvedShellLaunchConfig]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.ShellType:\n\t\t\t\t\tthis.setShellType(value as IProcessPropertyMap[ProcessPropertyType.ShellType]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.HasChildProcesses:\n\t\t\t\t\tthis._onDidChangeHasChildProcesses.fire(value as IProcessPropertyMap[ProcessPropertyType.HasChildProcesses]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.UsedShellIntegrationInjection:\n\t\t\t\t\tthis._usedShellIntegrationInjection = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase ProcessPropertyType.ShellIntegrationInjectionFailureReason:\n\t\t\t\t\tthis._shellIntegrationInjectionInfo = value as IProcessPropertyMap[ProcessPropertyType.ShellIntegrationInjectionFailureReason];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\n\t\tthis._initialDataEventsListener.value = processManager.onProcessData(ev => this._initialDataEvents?.push(ev.data));\n\t\tthis._register(processManager.onProcessReplayComplete(() => this._onProcessReplayComplete.fire()));\n\t\tthis._register(processManager.onEnvironmentVariableInfoChanged(e => this._onEnvironmentVariableInfoChanged(e)));\n\t\tthis._register(processManager.onPtyDisconnect(() => {\n\t\t\tif (this.xterm) {\n\t\t\t\tthis.xterm.raw.options.disableStdin = true;\n\t\t\t}\n\t\t\tthis.statusList.add({\n\t\t\t\tid: TerminalStatus.Disconnected,\n\t\t\t\tseverity: Severity.Error,\n\t\t\t\ticon: Codicon.debugDisconnect,\n\t\t\t\ttooltip: nls.localize('disconnectStatus', \"Lost connection to process\")\n\t\t\t});\n\t\t}));\n\t\tthis._register(processManager.onPtyReconnect(() => {\n\t\t\tif (this.xterm) {\n\t\t\t\tthis.xterm.raw.options.disableStdin = false;\n\t\t\t}\n\t\t\tthis.statusList.remove(TerminalStatus.Disconnected);\n\t\t}));\n\n\t\treturn processManager;\n\t}\n\n\tprivate async _createProcess(): Promise<void> {\n\t\tif (this.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tconst activeWorkspaceRootUri = this._historyService.getLastActiveWorkspaceRoot(Schemas.file);\n\t\tif (activeWorkspaceRootUri) {\n\t\t\tconst trusted = await this._trust();\n\t\t\tif (!trusted) {\n\t\t\t\tthis._onProcessExit({ message: nls.localize('workspaceNotTrustedCreateTerminal', \"Cannot launch a terminal process in an untrusted workspace\") });\n\t\t\t}\n\t\t} else if (this._cwd && this._userHome && this._cwd !== this._userHome) {\n\t\t\t// something strange is going on if cwd is not userHome in an empty workspace\n\t\t\tthis._onProcessExit({\n\t\t\t\tmessage: nls.localize('workspaceNotTrustedCreateTerminalCwd', \"Cannot launch a terminal process in an untrusted workspace with cwd {0} and userHome {1}\", this._cwd, this._userHome)\n\t\t\t});\n\t\t}\n\t\t// Re-evaluate dimensions if the container has been set since the xterm instance was created\n\t\tif (this._container && this._cols === 0 && this._rows === 0) {\n\t\t\tthis._initDimensions();\n\t\t\tthis.xterm?.resize(this._cols || Constants.DefaultCols, this._rows || Constants.DefaultRows);\n\t\t}\n\t\tconst originalIcon = this.shellLaunchConfig.icon;\n\t\tawait this._processManager.createProcess(this._shellLaunchConfig, this._cols || Constants.DefaultCols, this._rows || Constants.DefaultRows).then(result => {\n\t\t\tif (result) {\n\t\t\t\tif (hasKey(result, { message: true })) {\n\t\t\t\t\tthis._onProcessExit(result);\n\t\t\t\t} else if (hasKey(result, { injectedArgs: true })) {\n\t\t\t\t\tthis._injectedArgs = result.injectedArgs;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (this.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tif (originalIcon !== this.shellLaunchConfig.icon || this.shellLaunchConfig.color) {\n\t\t\tthis._icon = this._shellLaunchConfig.attachPersistentProcess?.icon || this._shellLaunchConfig.icon;\n\t\t\tthis._onIconChanged.fire({ instance: this, userInitiated: false });\n\t\t}\n\t}\n\n\tpublic registerMarker(offset?: number): IMarker | undefined {\n\t\treturn this.xterm?.raw.registerMarker(offset);\n\t}\n\n\tpublic addBufferMarker(properties: IMarkProperties): void {\n\t\tthis.capabilities.get(TerminalCapability.BufferMarkDetection)?.addMark(properties);\n\t}\n\n\tpublic scrollToMark(startMarkId: string, endMarkId?: string, highlight?: boolean): void {\n\t\tthis.xterm?.markTracker.scrollToClosestMarker(startMarkId, endMarkId, highlight);\n\t}\n\n\tpublic async freePortKillProcess(port: string, command: string): Promise<void> {\n\t\tawait this._processManager?.freePortKillProcess(port);\n\t\tthis.runCommand(command, false);\n\t}\n\n\tprivate _onProcessData(ev: IProcessDataEvent): void {\n\t\t// Ensure events are split by SI command execute and command finished sequence to ensure the\n\t\t// output of the command can be read by extensions and the output of the command is of a\n\t\t// consistent form respectively. This must be done here as xterm.js does not currently have\n\t\t// a listener for when individual data events are parsed, only `onWriteParsed` which fires\n\t\t// when the write buffer is flushed.\n\t\tconst leadingSegmentedData: string[] = [];\n\t\tconst matches = ev.data.matchAll(/(?<seq>\\x1b\\][16]33;(?:C|D(?:;\\d+)?)\\x07)/g);\n\t\tlet i = 0;\n\t\tfor (const match of matches) {\n\t\t\tif (match.groups?.seq === undefined) {\n\t\t\t\tthrow new BugIndicatingError('seq must be defined');\n\t\t\t}\n\t\t\tleadingSegmentedData.push(ev.data.substring(i, match.index));\n\t\t\tleadingSegmentedData.push(match.groups?.seq ?? '');\n\t\t\ti = match.index + match[0].length;\n\t\t}\n\t\tconst lastData = ev.data.substring(i);\n\n\t\t// Write all leading segmented data first, followed by the last data, tracking commit if\n\t\t// necessary\n\t\tfor (let i = 0; i < leadingSegmentedData.length; i++) {\n\t\t\tthis._writeProcessData(leadingSegmentedData[i]);\n\t\t}\n\t\tif (ev.trackCommit) {\n\t\t\tev.writePromise = new Promise<void>(r => this._writeProcessData(lastData, r));\n\t\t} else {\n\t\t\tthis._writeProcessData(lastData);\n\t\t}\n\t}\n\n\tprivate _writeProcessData(data: string, cb?: () => void) {\n\t\tthis._onWillData.fire(data);\n\t\tconst messageId = ++this._latestXtermWriteData;\n\t\tthis.xterm?.raw.write(data, () => {\n\t\t\tthis._latestXtermParseData = messageId;\n\t\t\tthis._processManager.acknowledgeDataEvent(data.length);\n\t\t\tcb?.();\n\t\t\tthis._onData.fire(data);\n\t\t});\n\t}\n\n\t/**\n\t * Called when either a process tied to a terminal has exited or when a terminal renderer\n\t * simulates a process exiting (e.g. custom execution task).\n\t * @param exitCode The exit code of the process, this is undefined when the terminal was exited\n\t * through user action.\n\t */\n\tprivate async _onProcessExit(exitCodeOrError?: number | ITerminalLaunchError): Promise<void> {\n\t\t// Prevent dispose functions being triggered multiple times\n\t\tif (this._isExiting) {\n\t\t\treturn;\n\t\t}\n\t\tconst parsedExitResult = parseExitResult(exitCodeOrError, this.shellLaunchConfig, this._processManager.processState, this._initialCwd);\n\n\t\tif (this._usedShellIntegrationInjection && this._processManager.processState === ProcessState.KilledDuringLaunch && parsedExitResult?.code !== 0) {\n\t\t\tthis._relaunchWithShellIntegrationDisabled(parsedExitResult?.message);\n\t\t\tthis._onExit.fire(exitCodeOrError);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isExiting = true;\n\n\t\tawait this._flushXtermData();\n\n\t\tthis._exitCode = parsedExitResult?.code;\n\t\tconst exitMessage = parsedExitResult?.message;\n\n\t\tthis._logService.debug('Terminal process exit', 'instanceId', this.instanceId, 'code', this._exitCode, 'processState', this._processManager.processState);\n\n\t\t// Only trigger wait on exit when the exit was *not* triggered by the\n\t\t// user (via the `workbench.action.terminal.kill` command).\n\t\tconst waitOnExit = this.waitOnExit;\n\t\tif (waitOnExit && this._processManager.processState !== ProcessState.KilledByUser) {\n\t\t\tthis._xtermReadyPromise.then(xterm => {\n\t\t\t\tif (!xterm) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (exitMessage) {\n\t\t\t\t\txterm.raw.write(formatMessageForTerminal(exitMessage));\n\t\t\t\t}\n\t\t\t\tswitch (typeof waitOnExit) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\txterm.raw.write(formatMessageForTerminal(waitOnExit, { excludeLeadingNewLine: true }));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'function':\n\t\t\t\t\t\tif (this.exitCode !== undefined) {\n\t\t\t\t\t\t\txterm.raw.write(formatMessageForTerminal(waitOnExit(this.exitCode), { excludeLeadingNewLine: true }));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// Disable all input if the terminal is exiting and listen for next keypress\n\t\t\t\txterm.raw.options.disableStdin = true;\n\t\t\t\tif (xterm.raw.textarea) {\n\t\t\t\t\tthis._attachPressAnyKeyToCloseListener(xterm.raw);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (exitMessage) {\n\t\t\t\tconst failedDuringLaunch = this._processManager.processState === ProcessState.KilledDuringLaunch;\n\t\t\t\tif (failedDuringLaunch || (this._terminalConfigurationService.config.showExitAlert && this.xterm?.lastInputEvent !== /*Ctrl+D*/'\\x04')) {\n\t\t\t\t\t// Always show launch failures\n\t\t\t\t\tthis._notificationService.notify({\n\t\t\t\t\t\tmessage: exitMessage,\n\t\t\t\t\t\tseverity: Severity.Error,\n\t\t\t\t\t\tactions: { primary: [this._scopedInstantiationService.createInstance(TerminalLaunchHelpAction)] }\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// Log to help surface the error in case users report issues with showExitAlert\n\t\t\t\t\t// disabled\n\t\t\t\t\tthis._logService.warn(exitMessage);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispose(TerminalExitReason.Process);\n\t\t}\n\n\t\t// First onExit to consumers, this can happen after the terminal has already been disposed.\n\t\tthis._onExit.fire(exitCodeOrError);\n\n\t\t// Dispose of the onExit event if the terminal will not be reused again\n\t\tif (this.isDisposed) {\n\t\t\tthis._onExit.dispose();\n\t\t}\n\t}\n\n\tprivate _relaunchWithShellIntegrationDisabled(exitMessage: string | undefined): void {\n\t\tthis._shellLaunchConfig.ignoreShellIntegration = true;\n\t\tthis.relaunch();\n\t\tthis.statusList.add({\n\t\t\tid: TerminalStatus.ShellIntegrationAttentionNeeded,\n\t\t\tseverity: Severity.Warning,\n\t\t\ticon: Codicon.warning,\n\t\t\ttooltip: `${exitMessage} ` + nls.localize('launchFailed.exitCodeOnlyShellIntegration', 'Disabling shell integration in user settings might help.'),\n\t\t\thoverActions: [{\n\t\t\t\tcommandId: TerminalCommandId.ShellIntegrationLearnMore,\n\t\t\t\tlabel: nls.localize('shellIntegration.learnMore', \"Learn more about shell integration\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis._openerService.open('https://code.visualstudio.com/docs/editor/integrated-terminal#_shell-integration');\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tcommandId: 'workbench.action.openSettings',\n\t\t\t\tlabel: nls.localize('shellIntegration.openSettings', \"Open user settings\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis._commandService.executeCommand('workbench.action.openSettings', 'terminal.integrated.shellIntegration.enabled');\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t\tthis._telemetryService.publicLog2<{}, { owner: 'meganrogge'; comment: 'Indicates the process exited when created with shell integration args' }>('terminal/shellIntegrationFailureProcessExit');\n\t}\n\n\t/**\n\t * Ensure write calls to xterm.js have finished before resolving.\n\t */\n\tprivate _flushXtermData(): Promise<void> {\n\t\tif (this._latestXtermWriteData === this._latestXtermParseData) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tlet retries = 0;\n\t\treturn new Promise<void>(r => {\n\t\t\tconst interval = dom.disposableWindowInterval(dom.getActiveWindow().window, () => {\n\t\t\t\tif (this._latestXtermWriteData === this._latestXtermParseData || ++retries === 5) {\n\t\t\t\t\tinterval.dispose();\n\t\t\t\t\tr();\n\t\t\t\t}\n\t\t\t}, 20);\n\t\t});\n\t}\n\n\tprivate _attachPressAnyKeyToCloseListener(xterm: XTermTerminal) {\n\t\tif (xterm.textarea && !this._pressAnyKeyToCloseListener) {\n\t\t\tthis._pressAnyKeyToCloseListener = dom.addDisposableListener(xterm.textarea, 'keypress', (event: KeyboardEvent) => {\n\t\t\t\tif (this._pressAnyKeyToCloseListener) {\n\t\t\t\t\tthis._pressAnyKeyToCloseListener.dispose();\n\t\t\t\t\tthis._pressAnyKeyToCloseListener = undefined;\n\t\t\t\t\tthis.dispose(TerminalExitReason.Process);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _writeInitialText(xterm: XtermTerminal, callback?: () => void): void {\n\t\tif (!this._shellLaunchConfig.initialText) {\n\t\t\tcallback?.();\n\t\t\treturn;\n\t\t}\n\t\tconst text = isString(this._shellLaunchConfig.initialText)\n\t\t\t? this._shellLaunchConfig.initialText\n\t\t\t: this._shellLaunchConfig.initialText?.text;\n\t\tif (isString(this._shellLaunchConfig.initialText)) {\n\t\t\txterm.raw.writeln(text, callback);\n\t\t} else {\n\t\t\tif (this._shellLaunchConfig.initialText.trailingNewLine) {\n\t\t\t\txterm.raw.writeln(text, callback);\n\t\t\t} else {\n\t\t\t\txterm.raw.write(text, callback);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync reuseTerminal(shell: IShellLaunchConfig, reset: boolean = false): Promise<void> {\n\t\t// Unsubscribe any key listener we may have.\n\t\tthis._pressAnyKeyToCloseListener?.dispose();\n\t\tthis._pressAnyKeyToCloseListener = undefined;\n\n\t\tconst xterm = this.xterm;\n\t\tif (xterm) {\n\t\t\tif (!reset) {\n\t\t\t\t// Ensure new processes' output starts at start of new line\n\t\t\t\tawait new Promise<void>(r => xterm.raw.write('\\n\\x1b[G', r));\n\t\t\t}\n\n\t\t\t// Print initialText if specified\n\t\t\tif (shell.initialText) {\n\t\t\t\tthis._shellLaunchConfig.initialText = shell.initialText;\n\t\t\t\tawait new Promise<void>(r => this._writeInitialText(xterm, r));\n\t\t\t}\n\n\t\t\t// Clean up waitOnExit state\n\t\t\tif (this._isExiting && this._shellLaunchConfig.waitOnExit) {\n\t\t\t\txterm.raw.options.disableStdin = false;\n\t\t\t\tthis._isExiting = false;\n\t\t\t}\n\t\t\tif (reset) {\n\t\t\t\txterm.clearDecorations();\n\t\t\t}\n\t\t}\n\n\t\t// Dispose the environment info widget if it exists\n\t\tthis.statusList.remove(TerminalStatus.RelaunchNeeded);\n\n\t\tif (!reset) {\n\t\t\t// HACK: Force initialText to be non-falsy for reused terminals such that the\n\t\t\t// conptyInheritCursor flag is passed to the node-pty, this flag can cause a Window to stop\n\t\t\t// responding in Windows 10 1903 so we only want to use it when something is definitely written\n\t\t\t// to the terminal.\n\t\t\tshell.initialText = ' ';\n\t\t}\n\n\t\t// Set the new shell launch config\n\t\tthis._shellLaunchConfig = shell; // Must be done before calling _createProcess()\n\t\tawait this._processManager.relaunch(this._shellLaunchConfig, this._cols || Constants.DefaultCols, this._rows || Constants.DefaultRows, reset).then(result => {\n\t\t\tif (result) {\n\t\t\t\tif (hasKey(result, { message: true })) {\n\t\t\t\t\tthis._onProcessExit(result);\n\t\t\t\t} else if (hasKey(result, { injectedArgs: true })) {\n\t\t\t\t\tthis._injectedArgs = result.injectedArgs;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t@debounce(1000)\n\trelaunch(): void {\n\t\t// Clear the attachPersistentProcess flag to ensure we create a new process\n\t\t// instead of trying to reattach to the existing one during relaunch.\n\t\tconst shellLaunchConfig = { ...this._shellLaunchConfig };\n\t\tdelete shellLaunchConfig.attachPersistentProcess;\n\n\t\tthis.reuseTerminal(shellLaunchConfig, true);\n\t}\n\n\tprivate _onTitleChange(title: string): void {\n\t\tif (this.isTitleSetByProcess) {\n\t\t\tthis._setTitle(title, TitleEventSource.Sequence);\n\t\t}\n\t}\n\n\tprivate async _trust(): Promise<boolean> {\n\t\treturn (await this._workspaceTrustRequestService.requestWorkspaceTrust(\n\t\t\t{\n\t\t\t\tmessage: nls.localize('terminal.requestTrust', \"Creating a terminal process requires executing code\")\n\t\t\t})) === true;\n\t}\n\n\t@debounce(2000)\n\tprivate async _updateProcessCwd(): Promise<void> {\n\t\tif (this.isDisposed || this.shellLaunchConfig.customPtyImplementation) {\n\t\t\treturn;\n\t\t}\n\t\t// reset cwd if it has changed, so file based url paths can be resolved\n\t\ttry {\n\t\t\tconst cwd = await this._refreshProperty(ProcessPropertyType.Cwd);\n\t\t\tif (!isString(cwd)) {\n\t\t\t\tthrow new Error(`cwd is not a string ${cwd}`);\n\t\t\t}\n\t\t} catch (e: unknown) {\n\t\t\t// Swallow this as it means the process has been killed\n\t\t\tif (e instanceof Error && e.message === 'Cannot refresh property when process is not set') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\tupdateConfig(): void {\n\t\tthis._setCommandsToSkipShell(this._terminalConfigurationService.config.commandsToSkipShell);\n\t\tthis._refreshEnvironmentVariableInfoWidgetState(this._processManager.environmentVariableInfo);\n\t}\n\n\tprivate async _updateUnicodeVersion(): Promise<void> {\n\t\tthis._processManager.setUnicodeVersion(this._terminalConfigurationService.config.unicodeVersion);\n\t}\n\n\tupdateAccessibilitySupport(): void {\n\t\tthis.xterm!.raw.options.screenReaderMode = this._accessibilityService.isScreenReaderOptimized();\n\t}\n\n\tprivate _setCommandsToSkipShell(commands: string[]): void {\n\t\tconst excludeCommands = commands.filter(command => command[0] === '-').map(command => command.slice(1));\n\t\tthis._skipTerminalCommands = DEFAULT_COMMANDS_TO_SKIP_SHELL.filter(defaultCommand => {\n\t\t\treturn !excludeCommands.includes(defaultCommand);\n\t\t}).concat(commands);\n\t}\n\n\tlayout(dimension: dom.Dimension): void {\n\t\tthis._lastLayoutDimensions = dimension;\n\t\tif (this.disableLayout) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't layout if dimensions are invalid (eg. the container is not attached to the DOM or\n\t\t// if display: none\n\t\tif (dimension.width <= 0 || dimension.height <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Evaluate columns and rows, exclude the wrapper element's margin\n\t\tconst terminalWidth = this._evaluateColsAndRows(dimension.width, dimension.height);\n\t\tif (!terminalWidth) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._resize();\n\n\t\t// Signal the container is ready\n\t\tif (!this._containerReadyBarrier.isOpen()) {\n\t\t\tthis._containerReadyBarrier.open();\n\t\t}\n\n\t\t// Layout all contributions\n\t\tfor (const contribution of this._contributions.values()) {\n\t\t\tif (!this.xterm) {\n\t\t\t\tthis._xtermReadyPromise.then(xterm => {\n\t\t\t\t\tif (xterm) {\n\t\t\t\t\t\tcontribution.layout?.(xterm, dimension);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcontribution.layout?.(this.xterm, dimension);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async _resize(immediate?: boolean): Promise<void> {\n\t\tif (!this.xterm) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cols = this.cols;\n\t\tlet rows = this.rows;\n\n\t\t// Only apply these settings when the terminal is visible so that\n\t\t// the characters are measured correctly.\n\t\tif (this._isVisible && this._layoutSettingsChanged) {\n\t\t\tconst font = this.xterm.getFont();\n\t\t\tconst config = this._terminalConfigurationService.config;\n\t\t\tthis.xterm.raw.options.letterSpacing = font.letterSpacing;\n\t\t\tthis.xterm.raw.options.lineHeight = font.lineHeight;\n\t\t\tthis.xterm.raw.options.fontSize = font.fontSize;\n\t\t\tthis.xterm.raw.options.fontFamily = font.fontFamily;\n\t\t\tthis.xterm.raw.options.fontWeight = config.fontWeight;\n\t\t\tthis.xterm.raw.options.fontWeightBold = config.fontWeightBold;\n\n\t\t\t// Any of the above setting changes could have changed the dimensions of the\n\t\t\t// terminal, re-evaluate now.\n\t\t\tthis._initDimensions();\n\t\t\tcols = this.cols;\n\t\t\trows = this.rows;\n\n\t\t\tthis._layoutSettingsChanged = false;\n\t\t}\n\n\t\tif (isNaN(cols) || isNaN(rows)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (cols !== this.xterm.raw.cols || rows !== this.xterm.raw.rows) {\n\t\t\tif (this._fixedRows || this._fixedCols) {\n\t\t\t\tawait this._updateProperty(ProcessPropertyType.FixedDimensions, { cols: this._fixedCols, rows: this._fixedRows });\n\t\t\t}\n\t\t\tthis._onDimensionsChanged.fire();\n\t\t}\n\n\t\tTerminalInstance._lastKnownGridDimensions = { cols, rows };\n\t\tthis._resizeDebouncer!.resize(cols, rows, immediate ?? false);\n\t}\n\n\tprivate async _updatePtyDimensions(rawXterm: XTermTerminal): Promise<void> {\n\t\tawait this._processManager.setDimensions(rawXterm.cols, rawXterm.rows);\n\t}\n\n\tsetShellType(shellType: TerminalShellType | undefined) {\n\t\tif (this._shellType === shellType) {\n\t\t\treturn;\n\t\t}\n\t\tthis._shellType = shellType;\n\t\tif (shellType === undefined) {\n\t\t\tthis._terminalShellTypeContextKey.reset();\n\t\t} else {\n\t\t\tthis._terminalShellTypeContextKey.set(shellType?.toString());\n\t\t}\n\t\tthis._onDidChangeShellType.fire(shellType);\n\n\t}\n\n\tprivate _setAriaLabel(xterm: XTermTerminal | undefined, terminalId: number, title: string | undefined): void {\n\t\tconst labelParts: string[] = [];\n\t\tif (xterm && xterm.textarea) {\n\t\t\tif (title && title.length > 0) {\n\t\t\t\tlabelParts.push(nls.localize('terminalTextBoxAriaLabelNumberAndTitle', \"Terminal {0}, {1}\", terminalId, title));\n\t\t\t} else {\n\t\t\t\tlabelParts.push(nls.localize('terminalTextBoxAriaLabel', \"Terminal {0}\", terminalId));\n\t\t\t}\n\t\t\tconst screenReaderOptimized = this._accessibilityService.isScreenReaderOptimized();\n\t\t\tif (!screenReaderOptimized) {\n\t\t\t\tlabelParts.push(nls.localize('terminalScreenReaderMode', \"Run the command: Toggle Screen Reader Accessibility Mode for an optimized screen reader experience\"));\n\t\t\t}\n\t\t\tconst accessibilityHelpKeybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibilityHelp)?.getLabel();\n\t\t\tif (this._configurationService.getValue(AccessibilityVerbositySettingId.Terminal) && accessibilityHelpKeybinding) {\n\t\t\t\tlabelParts.push(nls.localize('terminalHelpAriaLabel', \"Use {0} for terminal accessibility help\", accessibilityHelpKeybinding));\n\t\t\t}\n\t\t\txterm.textarea.setAttribute('aria-label', labelParts.join('\\n'));\n\t\t}\n\t}\n\n\tprivate _updateTitleProperties(title: string | undefined, eventSource: TitleEventSource): string {\n\t\tif (!title) {\n\t\t\treturn this._processName;\n\t\t}\n\t\tswitch (eventSource) {\n\t\t\tcase TitleEventSource.Process:\n\t\t\t\tif (this._processManager.os === OperatingSystem.Windows) {\n\t\t\t\t\t// Extract the file name without extension\n\t\t\t\t\ttitle = path.win32.parse(title).name;\n\t\t\t\t} else {\n\t\t\t\t\tconst firstSpaceIndex = title.indexOf(' ');\n\t\t\t\t\tif (title.startsWith('/')) {\n\t\t\t\t\t\ttitle = path.basename(title);\n\t\t\t\t\t} else if (firstSpaceIndex > -1) {\n\t\t\t\t\t\ttitle = title.substring(0, firstSpaceIndex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._processName = title;\n\t\t\t\tbreak;\n\t\t\tcase TitleEventSource.Api:\n\t\t\t\t// If the title has not been set by the API or the rename command, unregister the handler that\n\t\t\t\t// automatically updates the terminal name\n\t\t\t\tthis._staticTitle = title;\n\t\t\t\tthis._messageTitleDisposable.value = undefined;\n\t\t\t\tbreak;\n\t\t\tcase TitleEventSource.Sequence:\n\t\t\t\t// On Windows, some shells will fire this with the full path which we want to trim\n\t\t\t\t// to show just the file name. This should only happen if the title looks like an\n\t\t\t\t// absolute Windows file path\n\t\t\t\tthis._sequence = title;\n\t\t\t\tif (this._processManager.os === OperatingSystem.Windows &&\n\t\t\t\t\ttitle.match(/^[a-zA-Z]:\\\\.+\\.[a-zA-Z]{1,3}/)) {\n\t\t\t\t\tthis._sequence = path.win32.parse(title).name;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\tthis._titleSource = eventSource;\n\t\treturn title;\n\t}\n\n\tsetOverrideDimensions(dimensions: ITerminalDimensionsOverride | undefined, immediate: boolean = false): void {\n\t\tif (this._dimensionsOverride && this._dimensionsOverride.forceExactSize && !dimensions && this._rows === 0 && this._cols === 0) {\n\t\t\t// this terminal never had a real size => keep the last dimensions override exact size\n\t\t\tthis._cols = this._dimensionsOverride.cols;\n\t\t\tthis._rows = this._dimensionsOverride.rows;\n\t\t}\n\t\tthis._dimensionsOverride = dimensions;\n\t\tif (immediate) {\n\t\t\tthis._resize(true);\n\t\t} else {\n\t\t\tthis._resize();\n\t\t}\n\t}\n\n\tasync setFixedDimensions(): Promise<void> {\n\t\tconst cols = await this._quickInputService.input({\n\t\t\ttitle: nls.localize('setTerminalDimensionsColumn', \"Set Fixed Dimensions: Column\"),\n\t\t\tplaceHolder: 'Enter a number of columns or leave empty for automatic width',\n\t\t\tvalidateInput: async (text) => text.length > 0 && !text.match(/^\\d+$/) ? { content: 'Enter a number or leave empty size automatically', severity: Severity.Error } : undefined\n\t\t});\n\t\tif (cols === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis._fixedCols = this._parseFixedDimension(cols);\n\t\tthis._labelComputer?.refreshLabel(this);\n\t\tthis._terminalHasFixedWidth.set(!!this._fixedCols);\n\t\tconst rows = await this._quickInputService.input({\n\t\t\ttitle: nls.localize('setTerminalDimensionsRow', \"Set Fixed Dimensions: Row\"),\n\t\t\tplaceHolder: 'Enter a number of rows or leave empty for automatic height',\n\t\t\tvalidateInput: async (text) => text.length > 0 && !text.match(/^\\d+$/) ? { content: 'Enter a number or leave empty size automatically', severity: Severity.Error } : undefined\n\t\t});\n\t\tif (rows === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tthis._fixedRows = this._parseFixedDimension(rows);\n\t\tthis._labelComputer?.refreshLabel(this);\n\t\tawait this._refreshScrollbar();\n\t\tthis._resize();\n\t\tthis.focus();\n\t}\n\n\tprivate _parseFixedDimension(value: string): number | undefined {\n\t\tif (value === '') {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst parsed = parseInt(value);\n\t\tif (parsed <= 0) {\n\t\t\tthrow new Error(`Could not parse dimension \"${value}\"`);\n\t\t}\n\t\treturn parsed;\n\t}\n\n\tasync toggleSizeToContentWidth(): Promise<void> {\n\t\tif (!this.xterm?.raw.buffer.active) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._hasScrollBar) {\n\t\t\tthis._terminalHasFixedWidth.set(false);\n\t\t\tthis._fixedCols = undefined;\n\t\t\tthis._fixedRows = undefined;\n\t\t\tthis._hasScrollBar = false;\n\t\t\tthis._initDimensions();\n\t\t\tawait this._resize();\n\t\t} else {\n\t\t\tconst font = this.xterm ? this.xterm.getFont() : this._terminalConfigurationService.getFont(dom.getWindow(this.domElement));\n\t\t\tconst maxColsForTexture = Math.floor(Constants.MaxCanvasWidth / (font.charWidth ?? 20));\n\t\t\t// Fixed columns should be at least xterm.js' regular column count\n\t\t\tconst proposedCols = Math.max(this.maxCols, Math.min(this.xterm.getLongestViewportWrappedLineLength(), maxColsForTexture));\n\t\t\t// Don't switch to fixed dimensions if the content already fits as it makes the scroll\n\t\t\t// bar look bad being off the edge\n\t\t\tif (proposedCols > this.xterm.raw.cols) {\n\t\t\t\tthis._fixedCols = proposedCols;\n\t\t\t}\n\t\t}\n\t\tawait this._refreshScrollbar();\n\t\tthis._labelComputer?.refreshLabel(this);\n\t\tthis.focus();\n\t}\n\n\tprivate _refreshScrollbar(): Promise<void> {\n\t\tif (this._fixedCols || this._fixedRows) {\n\t\t\treturn this._addScrollbar();\n\t\t}\n\t\treturn this._removeScrollbar();\n\t}\n\n\tprivate async _addScrollbar(): Promise<void> {\n\t\tconst charWidth = (this.xterm ? this.xterm.getFont() : this._terminalConfigurationService.getFont(dom.getWindow(this.domElement))).charWidth;\n\t\tif (!this.xterm?.raw.element || !this._container || !charWidth || !this._fixedCols) {\n\t\t\treturn;\n\t\t}\n\t\tthis._wrapperElement.classList.add('fixed-dims');\n\t\tthis._hasScrollBar = true;\n\t\tthis._initDimensions();\n\t\tawait this._resize();\n\t\tthis._terminalHasFixedWidth.set(true);\n\t\tif (!this._horizontalScrollbar) {\n\t\t\tthis._horizontalScrollbar = this._register(new DomScrollableElement(this._wrapperElement, {\n\t\t\t\tvertical: ScrollbarVisibility.Hidden,\n\t\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\t\tuseShadows: false,\n\t\t\t\tscrollYToX: false,\n\t\t\t\tconsumeMouseWheelIfScrollbarIsNeeded: false\n\t\t\t}));\n\t\t\tthis._container.appendChild(this._horizontalScrollbar.getDomNode());\n\t\t}\n\t\tthis._horizontalScrollbar.setScrollDimensions({\n\t\t\twidth: this.xterm.raw.element.clientWidth,\n\t\t\tscrollWidth: this._fixedCols * charWidth + 40 // Padding + scroll bar\n\t\t});\n\t\tthis._horizontalScrollbar.getDomNode().style.paddingBottom = '16px';\n\n\t\t// work around for https://github.com/xtermjs/xterm.js/issues/3482\n\t\tif (isWindows) {\n\t\t\tfor (let i = this.xterm.raw.buffer.active.viewportY; i < this.xterm.raw.buffer.active.length; i++) {\n\t\t\t\tinterface ILineWithInternals extends IBufferLine {\n\t\t\t\t\t_line: {\n\t\t\t\t\t\tisWrapped: boolean;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst line = this.xterm.raw.buffer.active.getLine(i);\n\t\t\t\t(line as ILineWithInternals)._line.isWrapped = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async _removeScrollbar(): Promise<void> {\n\t\tif (!this._container || !this._horizontalScrollbar) {\n\t\t\treturn;\n\t\t}\n\t\tthis._horizontalScrollbar.getDomNode().remove();\n\t\tthis._horizontalScrollbar.dispose();\n\t\tthis._horizontalScrollbar = undefined;\n\t\tthis._wrapperElement.remove();\n\t\tthis._wrapperElement.classList.remove('fixed-dims');\n\t\tthis._container.appendChild(this._wrapperElement);\n\t}\n\n\tprivate _setResolvedShellLaunchConfig(shellLaunchConfig: IShellLaunchConfig): void {\n\t\tthis._shellLaunchConfig.args = shellLaunchConfig.args;\n\t\tthis._shellLaunchConfig.cwd = shellLaunchConfig.cwd;\n\t\tthis._shellLaunchConfig.executable = shellLaunchConfig.executable;\n\t\tthis._shellLaunchConfig.env = shellLaunchConfig.env;\n\t}\n\n\tprivate _onEnvironmentVariableInfoChanged(info: IEnvironmentVariableInfo): void {\n\t\tif (info.requiresAction) {\n\t\t\tthis.xterm?.raw.textarea?.setAttribute('aria-label', nls.localize('terminalStaleTextBoxAriaLabel', \"Terminal {0} environment is stale, run the 'Show Environment Information' command for more information\", this._instanceId));\n\t\t}\n\t\tthis._refreshEnvironmentVariableInfoWidgetState(info);\n\t}\n\n\tprivate async _refreshEnvironmentVariableInfoWidgetState(info?: IEnvironmentVariableInfo): Promise<void> {\n\t\t// Check if the status should exist\n\t\tif (!info) {\n\t\t\tthis.statusList.remove(TerminalStatus.RelaunchNeeded);\n\t\t\tthis.statusList.remove(TerminalStatus.EnvironmentVariableInfoChangesActive);\n\t\t\treturn;\n\t\t}\n\n\t\t// Recreate the process seamlessly without informing the use if the following conditions are\n\t\t// met.\n\t\tif (\n\t\t\t// The change requires a relaunch\n\t\t\tinfo.requiresAction &&\n\t\t\t// The feature is enabled\n\t\t\tthis._terminalConfigurationService.config.environmentChangesRelaunch &&\n\t\t\t// Has not been interacted with\n\t\t\t!this._processManager.hasWrittenData &&\n\t\t\t// Not a feature terminal or is a reconnecting task terminal (TODO: Need to explain the latter case)\n\t\t\t(!this._shellLaunchConfig.isFeatureTerminal || (this.reconnectionProperties && this._configurationService.getValue('task.reconnection') === true)) &&\n\t\t\t// Not a custom pty\n\t\t\t!this._shellLaunchConfig.customPtyImplementation &&\n\t\t\t// Not an extension owned terminal\n\t\t\t!this._shellLaunchConfig.isExtensionOwnedTerminal &&\n\t\t\t// Not a reconnected or revived terminal\n\t\t\t!this._shellLaunchConfig.attachPersistentProcess &&\n\t\t\t// Not a Windows remote using ConPTY (#187084)\n\t\t\t!(this._processManager.remoteAuthority && this._terminalConfigurationService.config.windowsEnableConpty && (await this._processManager.getBackendOS()) === OperatingSystem.Windows)\n\t\t) {\n\t\t\tthis.relaunch();\n\t\t\treturn;\n\t\t}\n\t\t// Re-create statuses\n\t\tconst workspaceFolder = getWorkspaceForTerminal(this.shellLaunchConfig.cwd, this._workspaceContextService, this._historyService);\n\t\tthis.statusList.add(info.getStatus({ workspaceFolder }));\n\t}\n\n\tasync getInitialCwd(): Promise<string> {\n\t\tif (!this._initialCwd) {\n\t\t\tthis._initialCwd = this._processManager.initialCwd;\n\t\t}\n\t\treturn this._initialCwd;\n\t}\n\n\tasync getSpeculativeCwd(): Promise<string> {\n\t\tif (this.capabilities.has(TerminalCapability.CwdDetection)) {\n\t\t\treturn this.capabilities.get(TerminalCapability.CwdDetection)!.getCwd();\n\t\t} else if (this.capabilities.has(TerminalCapability.NaiveCwdDetection)) {\n\t\t\treturn this.capabilities.get(TerminalCapability.NaiveCwdDetection)!.getCwd();\n\t\t}\n\t\treturn this._processManager.initialCwd;\n\t}\n\n\tasync getCwdResource(): Promise<URI | undefined> {\n\t\tconst cwd = this.capabilities.get(TerminalCapability.CwdDetection)?.getCwd();\n\t\tif (!cwd) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet resource: URI;\n\t\tif (this.remoteAuthority) {\n\t\t\tresource = await this._pathService.fileURI(cwd);\n\t\t} else {\n\t\t\tresource = URI.file(cwd);\n\t\t}\n\t\tif (await this._fileService.exists(resource)) {\n\t\t\treturn resource;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async _refreshProperty<T extends ProcessPropertyType>(type: T): Promise<IProcessPropertyMap[T]> {\n\t\tawait this.processReady;\n\t\treturn this._processManager.refreshProperty(type);\n\t}\n\n\tprivate async _updateProperty<T extends ProcessPropertyType>(type: T, value: IProcessPropertyMap[T]): Promise<void> {\n\t\treturn this._processManager.updateProperty(type, value);\n\t}\n\n\tasync rename(title?: string, source?: TitleEventSource) {\n\t\tthis._setTitle(title, source ?? TitleEventSource.Api);\n\t}\n\n\tprivate _setTitle(title: string | undefined, eventSource: TitleEventSource): void {\n\t\tif ((this._shellLaunchConfig?.type === 'Task' || this._titleSource === TitleEventSource.Api) && eventSource === TitleEventSource.Process) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst reset = !title;\n\t\ttitle = this._updateTitleProperties(title, eventSource);\n\t\tconst titleChanged = title !== this._title;\n\t\tthis._title = title;\n\t\tthis._labelComputer?.refreshLabel(this, reset);\n\t\tthis._setAriaLabel(this.xterm?.raw, this._instanceId, this._title);\n\n\t\tif (titleChanged) {\n\t\t\tthis._onTitleChanged.fire(this);\n\t\t}\n\t}\n\n\tasync changeIcon(icon?: TerminalIcon): Promise<TerminalIcon | undefined> {\n\t\tif (icon) {\n\t\t\tthis._icon = icon;\n\t\t\tthis._onIconChanged.fire({ instance: this, userInitiated: true });\n\t\t\treturn icon;\n\t\t}\n\t\tconst iconPicker = this._scopedInstantiationService.createInstance(TerminalIconPicker);\n\t\tconst pickedIcon = await iconPicker.pickIcons();\n\t\ticonPicker.dispose();\n\t\tif (!pickedIcon) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._icon = pickedIcon;\n\t\tthis._onIconChanged.fire({ instance: this, userInitiated: true });\n\t\treturn pickedIcon;\n\t}\n\n\tasync changeColor(color?: string, skipQuickPick?: boolean): Promise<string | undefined> {\n\t\tif (color) {\n\t\t\tthis.shellLaunchConfig.color = color;\n\t\t\tthis._onIconChanged.fire({ instance: this, userInitiated: true });\n\t\t\treturn color;\n\t\t} else if (skipQuickPick) {\n\t\t\t// Reset this tab's color\n\t\t\tthis.shellLaunchConfig.color = '';\n\t\t\tthis._onIconChanged.fire({ instance: this, userInitiated: true });\n\t\t\treturn;\n\t\t}\n\t\tconst icon = this._getIcon();\n\t\tif (!icon) {\n\t\t\treturn;\n\t\t}\n\t\tconst colorTheme = this._themeService.getColorTheme();\n\t\tconst standardColors: string[] = getStandardColors(colorTheme);\n\t\tconst colorStyleDisposable = createColorStyleElement(colorTheme);\n\t\tconst items: QuickPickItem[] = [];\n\t\tfor (const colorKey of standardColors) {\n\t\t\tconst colorClass = getColorClass(colorKey);\n\t\t\titems.push({\n\t\t\t\tlabel: `$(${Codicon.circleFilled.id}) ${colorKey.replace('terminal.ansi', '')}`, id: colorKey, description: colorKey, iconClasses: [colorClass]\n\t\t\t});\n\t\t}\n\t\titems.push({ type: 'separator' });\n\t\tconst showAllColorsItem = { label: 'Reset to default' };\n\t\titems.push(showAllColorsItem);\n\n\t\tconst disposables: IDisposable[] = [];\n\t\tconst quickPick = this._quickInputService.createQuickPick({ useSeparators: true });\n\t\tdisposables.push(quickPick);\n\t\tquickPick.items = items;\n\t\tquickPick.matchOnDescription = true;\n\t\tquickPick.placeholder = nls.localize('changeColor', 'Select a color for the terminal');\n\t\tquickPick.show();\n\t\tconst result = await new Promise<IQuickPickItem | undefined>(r => {\n\t\t\tdisposables.push(quickPick.onDidHide(() => r(undefined)));\n\t\t\tdisposables.push(quickPick.onDidAccept(() => r(quickPick.selectedItems[0])));\n\t\t});\n\t\tdispose(disposables);\n\n\t\tif (result) {\n\t\t\tthis.shellLaunchConfig.color = result.id;\n\t\t\tthis._onIconChanged.fire({ instance: this, userInitiated: true });\n\t\t}\n\n\t\tquickPick.hide();\n\t\tcolorStyleDisposable.dispose();\n\t\treturn result?.id;\n\t}\n\n\tforceScrollbarVisibility(): void {\n\t\tthis._wrapperElement.classList.add('force-scrollbar');\n\t}\n\n\tresetScrollbarVisibility(): void {\n\t\tthis._wrapperElement.classList.remove('force-scrollbar');\n\t}\n\n\tsetParentContextKeyService(parentContextKeyService: IContextKeyService): void {\n\t\tthis._scopedContextKeyService.updateParent(parentContextKeyService);\n\t}\n\n\tasync handleMouseEvent(event: MouseEvent, contextMenu: IMenu): Promise<{ cancelContextMenu: boolean } | void> {\n\t\t// Don't handle mouse event if it was on the scroll bar\n\t\tif (dom.isHTMLElement(event.target) && (event.target.classList.contains('scrollbar') || event.target.classList.contains('slider'))) {\n\t\t\treturn { cancelContextMenu: true };\n\t\t}\n\n\t\t// Allow contributions to handle the mouse event first\n\t\tfor (const contrib of this._contributions.values()) {\n\t\t\tconst result = await contrib.handleMouseEvent?.(event);\n\t\t\tif (result?.handled) {\n\t\t\t\treturn { cancelContextMenu: true };\n\t\t\t}\n\t\t}\n\n\t\t// Middle click\n\t\tif (event.which === 2) {\n\t\t\tswitch (this._terminalConfigurationService.config.middleClickBehavior) {\n\t\t\t\tcase 'default':\n\t\t\t\tdefault:\n\t\t\t\t\t// Drop selection and focus terminal on Linux to enable middle button paste\n\t\t\t\t\t// when click occurs on the selection itself.\n\t\t\t\t\tthis.focus();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Right click\n\t\tif (event.which === 3) {\n\t\t\t// Shift click forces the context menu\n\t\t\tif (event.shiftKey) {\n\t\t\t\topenContextMenu(dom.getActiveWindow(), event, this, contextMenu, this._contextMenuService);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rightClickBehavior = this._terminalConfigurationService.config.rightClickBehavior;\n\t\t\tif (rightClickBehavior === 'nothing') {\n\t\t\t\tif (!event.shiftKey) {\n\t\t\t\t\treturn { cancelContextMenu: true };\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass TerminalInstanceDragAndDropController extends Disposable implements dom.IDragAndDropObserverCallbacks {\n\tprivate _dropOverlay?: HTMLElement;\n\n\tprivate readonly _onDropFile = this._register(new Emitter<string | URI>());\n\tget onDropFile(): Event<string | URI> { return this._onDropFile.event; }\n\tprivate readonly _onDropTerminal = this._register(new Emitter<IRequestAddInstanceToGroupEvent>());\n\tget onDropTerminal(): Event<IRequestAddInstanceToGroupEvent> { return this._onDropTerminal.event; }\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IViewDescriptorService private readonly _viewDescriptorService: IViewDescriptorService,\n\t) {\n\t\tsuper();\n\t\tthis._register(toDisposable(() => this._clearDropOverlay()));\n\t}\n\n\tprivate _clearDropOverlay() {\n\t\tthis._dropOverlay?.remove();\n\t\tthis._dropOverlay = undefined;\n\t}\n\n\tonDragEnter(e: DragEvent) {\n\t\tif (!containsDragType(e, DataTransfers.FILES, DataTransfers.RESOURCES, TerminalDataTransfers.Terminals, CodeDataTransfers.FILES)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._dropOverlay) {\n\t\t\tthis._dropOverlay = document.createElement('div');\n\t\t\tthis._dropOverlay.classList.add('terminal-drop-overlay');\n\t\t}\n\n\t\t// Dragging terminals\n\t\tif (containsDragType(e, TerminalDataTransfers.Terminals)) {\n\t\t\tconst side = this._getDropSide(e);\n\t\t\tthis._dropOverlay.classList.toggle('drop-before', side === 'before');\n\t\t\tthis._dropOverlay.classList.toggle('drop-after', side === 'after');\n\t\t}\n\n\t\tif (!this._dropOverlay.parentElement) {\n\t\t\tthis._container.appendChild(this._dropOverlay);\n\t\t}\n\t}\n\tonDragLeave(e: DragEvent) {\n\t\tthis._clearDropOverlay();\n\t}\n\n\tonDragEnd(e: DragEvent) {\n\t\tthis._clearDropOverlay();\n\t}\n\n\tonDragOver(e: DragEvent) {\n\t\tif (!e.dataTransfer || !this._dropOverlay) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Dragging terminals\n\t\tif (containsDragType(e, TerminalDataTransfers.Terminals)) {\n\t\t\tconst side = this._getDropSide(e);\n\t\t\tthis._dropOverlay.classList.toggle('drop-before', side === 'before');\n\t\t\tthis._dropOverlay.classList.toggle('drop-after', side === 'after');\n\t\t}\n\n\t\tthis._dropOverlay.style.opacity = '1';\n\t}\n\n\tasync onDrop(e: DragEvent) {\n\t\tthis._clearDropOverlay();\n\n\t\tif (!e.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst terminalResources = getTerminalResourcesFromDragEvent(e);\n\t\tif (terminalResources) {\n\t\t\tfor (const uri of terminalResources) {\n\t\t\t\tconst side = this._getDropSide(e);\n\t\t\t\tthis._onDropTerminal.fire({ uri, side });\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if files were dragged from the tree explorer\n\t\tlet path: URI | undefined;\n\t\tconst rawResources = e.dataTransfer.getData(DataTransfers.RESOURCES);\n\t\tif (rawResources) {\n\t\t\tpath = URI.parse(JSON.parse(rawResources)[0]);\n\t\t}\n\n\t\tconst rawCodeFiles = e.dataTransfer.getData(CodeDataTransfers.FILES);\n\t\tif (!path && rawCodeFiles) {\n\t\t\tpath = URI.file(JSON.parse(rawCodeFiles)[0]);\n\t\t}\n\n\t\tif (!path && e.dataTransfer.files.length > 0 && getPathForFile(e.dataTransfer.files[0])) {\n\t\t\t// Check if the file was dragged from the filesystem\n\t\t\tpath = URI.file(getPathForFile(e.dataTransfer.files[0])!);\n\t\t}\n\n\t\tif (!path) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onDropFile.fire(path);\n\t}\n\n\tprivate _getDropSide(e: DragEvent): 'before' | 'after' {\n\t\tconst target = this._container;\n\t\tif (!target) {\n\t\t\treturn 'after';\n\t\t}\n\n\t\tconst rect = target.getBoundingClientRect();\n\t\treturn this._getViewOrientation() === Orientation.HORIZONTAL\n\t\t\t? (e.clientX - rect.left < rect.width / 2 ? 'before' : 'after')\n\t\t\t: (e.clientY - rect.top < rect.height / 2 ? 'before' : 'after');\n\t}\n\n\tprivate _getViewOrientation(): Orientation {\n\t\tconst panelPosition = this._layoutService.getPanelPosition();\n\t\tconst terminalLocation = this._viewDescriptorService.getViewLocationById(TERMINAL_VIEW_ID);\n\t\treturn terminalLocation === ViewContainerLocation.Panel && isHorizontal(panelPosition)\n\t\t\t? Orientation.HORIZONTAL\n\t\t\t: Orientation.VERTICAL;\n\t}\n}\n\ninterface ITerminalLabelTemplateProperties {\n\tcwd?: string | null | undefined;\n\tcwdFolder?: string | null | undefined;\n\tworkspaceFolderName?: string | null | undefined;\n\tworkspaceFolder?: string | null | undefined;\n\tlocal?: string | null | undefined;\n\tprocess?: string | null | undefined;\n\tsequence?: string | null | undefined;\n\tprogress?: string | null | undefined;\n\ttask?: string | null | undefined;\n\tfixedDimensions?: string | null | undefined;\n\tseparator?: string | ISeparator | null | undefined;\n\tshellType?: string | undefined;\n\tshellCommand?: string | undefined;\n\tshellPromptInput?: string | undefined;\n}\n\nconst enum TerminalLabelType {\n\tTitle = 'title',\n\tDescription = 'description'\n}\n\nexport class TerminalLabelComputer extends Disposable {\n\tprivate _title: string = '';\n\tprivate _description: string = '';\n\tget title(): string | undefined { return this._title; }\n\tget description(): string { return this._description; }\n\n\tprivate readonly _onDidChangeLabel = this._register(new Emitter<{ title: string; description: string }>());\n\treadonly onDidChangeLabel = this._onDidChangeLabel.event;\n\n\tconstructor(\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@ITerminalConfigurationService private readonly _terminalConfigurationService: ITerminalConfigurationService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService\n\t) {\n\t\tsuper();\n\t}\n\n\trefreshLabel(instance: Pick<ITerminalInstance, 'shellLaunchConfig' | 'shellType' | 'cwd' | 'fixedCols' | 'fixedRows' | 'initialCwd' | 'processName' | 'sequence' | 'userHome' | 'workspaceFolder' | 'staticTitle' | 'capabilities' | 'title' | 'description'>, reset?: boolean): void {\n\t\tthis._title = this.computeLabel(instance, this._terminalConfigurationService.config.tabs.title, TerminalLabelType.Title, reset);\n\t\tthis._description = this.computeLabel(instance, this._terminalConfigurationService.config.tabs.description, TerminalLabelType.Description);\n\t\tif (this._title !== instance.title || this._description !== instance.description || reset) {\n\t\t\tthis._onDidChangeLabel.fire({ title: this._title, description: this._description });\n\t\t}\n\t}\n\n\tcomputeLabel(\n\t\tinstance: Pick<ITerminalInstance, 'shellLaunchConfig' | 'shellType' | 'cwd' | 'fixedCols' | 'fixedRows' | 'initialCwd' | 'processName' | 'sequence' | 'userHome' | 'workspaceFolder' | 'staticTitle' | 'capabilities' | 'title' | 'description' | 'progressState'>,\n\t\tlabelTemplate: string,\n\t\tlabelType: TerminalLabelType,\n\t\treset?: boolean\n\t) {\n\t\tconst type = instance.shellLaunchConfig.attachPersistentProcess?.type || instance.shellLaunchConfig.type;\n\t\tconst commandDetection = instance.capabilities.get(TerminalCapability.CommandDetection);\n\t\tconst promptInputModel = commandDetection?.promptInputModel;\n\t\tconst nonTaskSpinner = type === 'Task' ? '' : ' $(loading~spin)';\n\t\tconst templateProperties: ITerminalLabelTemplateProperties = {\n\t\t\tcwd: instance.cwd || instance.initialCwd || '',\n\t\t\tcwdFolder: '',\n\t\t\tworkspaceFolderName: instance.workspaceFolder?.name,\n\t\t\tworkspaceFolder: instance.workspaceFolder ? path.basename(instance.workspaceFolder.uri.fsPath) : undefined,\n\t\t\tlocal: type === 'Local' ? terminalStrings.typeLocal : undefined,\n\t\t\tprocess: instance.processName,\n\t\t\tsequence: instance.sequence,\n\t\t\ttask: type === 'Task' ? terminalStrings.typeTask : undefined,\n\t\t\tfixedDimensions: instance.fixedCols\n\t\t\t\t? (instance.fixedRows ? `\\u2194${instance.fixedCols} \\u2195${instance.fixedRows}` : `\\u2194${instance.fixedCols}`)\n\t\t\t\t: (instance.fixedRows ? `\\u2195${instance.fixedRows}` : ''),\n\t\t\tseparator: { label: this._terminalConfigurationService.config.tabs.separator },\n\t\t\tshellType: instance.shellType,\n\t\t\t// Shell command requires high confidence\n\t\t\tshellCommand: commandDetection?.executingCommand && commandDetection.executingCommandConfidence === 'high' && promptInputModel\n\t\t\t\t? promptInputModel.value + nonTaskSpinner\n\t\t\t\t: undefined,\n\t\t\t// Shell prompt input does not require high confidence as it's largely for VS Code developers\n\t\t\tshellPromptInput: commandDetection?.executingCommand && promptInputModel\n\t\t\t\t? promptInputModel.getCombinedString(true) + nonTaskSpinner\n\t\t\t\t: promptInputModel?.getCombinedString(true),\n\t\t\tprogress: this._getProgressStateString(instance.progressState)\n\t\t};\n\t\ttemplateProperties.workspaceFolderName = instance.workspaceFolder?.name ?? templateProperties.workspaceFolder;\n\t\tlabelTemplate = labelTemplate.trim();\n\t\tif (!labelTemplate) {\n\t\t\treturn labelType === TerminalLabelType.Title ? (instance.processName || '') : '';\n\t\t}\n\t\tif (!reset && instance.staticTitle && labelType === TerminalLabelType.Title) {\n\t\t\treturn instance.staticTitle.replace(/[\\n\\r\\t]/g, '') || templateProperties.process?.replace(/[\\n\\r\\t]/g, '') || '';\n\t\t}\n\t\tconst detection = instance.capabilities.has(TerminalCapability.CwdDetection) || instance.capabilities.has(TerminalCapability.NaiveCwdDetection);\n\t\tconst folders = this._workspaceContextService.getWorkspace().folders;\n\t\tconst multiRootWorkspace = folders.length > 1;\n\n\t\t// Only set cwdFolder if detection is on\n\t\tif (templateProperties.cwd && detection && (!instance.shellLaunchConfig.isFeatureTerminal || labelType === TerminalLabelType.Title)) {\n\t\t\tconst cwdUri = URI.from({\n\t\t\t\tscheme: instance.workspaceFolder?.uri.scheme || Schemas.file,\n\t\t\t\tpath: instance.cwd ? path.resolve(instance.cwd) : undefined\n\t\t\t});\n\t\t\t// Multi-root workspaces always show cwdFolder to disambiguate them, otherwise only show\n\t\t\t// when it differs from the workspace folder in which it was launched from\n\t\t\tlet showCwd = false;\n\t\t\tif (multiRootWorkspace) {\n\t\t\t\tshowCwd = true;\n\t\t\t} else if (instance.workspaceFolder?.uri) {\n\t\t\t\tconst caseSensitive = this._fileService.hasCapability(instance.workspaceFolder.uri, FileSystemProviderCapabilities.PathCaseSensitive);\n\t\t\t\tshowCwd = cwdUri.fsPath.localeCompare(instance.workspaceFolder.uri.fsPath, undefined, { sensitivity: caseSensitive ? 'case' : 'base' }) !== 0;\n\t\t\t}\n\t\t\tif (showCwd) {\n\t\t\t\ttemplateProperties.cwdFolder = path.basename(templateProperties.cwd);\n\t\t\t}\n\t\t}\n\n\t\t// Remove special characters that could mess with rendering\n\t\tconst label = template(labelTemplate, (templateProperties as unknown) as { [key: string]: string | ISeparator | undefined | null }).replace(/[\\n\\r\\t]/g, '').trim();\n\t\treturn label === '' && labelType === TerminalLabelType.Title ? (instance.processName || '') : label;\n\t}\n\n\tprivate _getProgressStateString(progressState?: IProgressState): string {\n\t\tif (!progressState) {\n\t\t\treturn '';\n\t\t}\n\t\tswitch (progressState.state) {\n\t\t\tcase 0: return '';\n\t\t\tcase 1: return `${Math.round(progressState.value)}%`;\n\t\t\tcase 2: return '$(error)';\n\t\t\tcase 3: return '$(loading~spin)';\n\t\t\tcase 4: return '$(alert)';\n\t\t}\n\t}\n}\n\nexport function parseExitResult(\n\texitCodeOrError: ITerminalLaunchError | number | undefined,\n\tshellLaunchConfig: IShellLaunchConfig,\n\tprocessState: ProcessState,\n\tinitialCwd: string | undefined\n): { code: number | undefined; message: string | undefined } | undefined {\n\t// Only return a message if the exit code is non-zero\n\tif (exitCodeOrError === undefined || exitCodeOrError === 0) {\n\t\treturn { code: exitCodeOrError, message: undefined };\n\t}\n\n\tconst code = isNumber(exitCodeOrError) ? exitCodeOrError : exitCodeOrError.code;\n\n\t// Create exit code message\n\tlet message: string | undefined = undefined;\n\tswitch (typeof exitCodeOrError) {\n\t\tcase 'number': {\n\t\t\tlet commandLine: string | undefined = undefined;\n\t\t\tif (shellLaunchConfig.executable) {\n\t\t\t\tcommandLine = shellLaunchConfig.executable;\n\t\t\t\tif (isString(shellLaunchConfig.args)) {\n\t\t\t\t\tcommandLine += ` ${shellLaunchConfig.args}`;\n\t\t\t\t} else if (shellLaunchConfig.args && shellLaunchConfig.args.length) {\n\t\t\t\t\tcommandLine += shellLaunchConfig.args.map(a => ` '${a}'`).join();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (processState === ProcessState.KilledDuringLaunch) {\n\t\t\t\tif (commandLine) {\n\t\t\t\t\tmessage = nls.localize('launchFailed.exitCodeAndCommandLine', \"The terminal process \\\"{0}\\\" failed to launch (exit code: {1}).\", commandLine, code);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('launchFailed.exitCodeOnly', \"The terminal process failed to launch (exit code: {0}).\", code);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (commandLine) {\n\t\t\t\t\tmessage = nls.localize('terminated.exitCodeAndCommandLine', \"The terminal process \\\"{0}\\\" terminated with exit code: {1}.\", commandLine, code);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('terminated.exitCodeOnly', \"The terminal process terminated with exit code: {0}.\", code);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase 'object': {\n\t\t\t// Ignore internal errors\n\t\t\tif (exitCodeOrError.message.toString().includes('Could not find pty with id')) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// Convert conpty code-based failures into human friendly messages\n\t\t\tlet innerMessage = exitCodeOrError.message;\n\t\t\tconst conptyError = exitCodeOrError.message.match(/.*error code:\\s*(\\d+).*$/);\n\t\t\tif (conptyError) {\n\t\t\t\tconst errorCode = conptyError.length > 1 ? parseInt(conptyError[1]) : undefined;\n\t\t\t\tswitch (errorCode) {\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tinnerMessage = `Access was denied to the path containing your executable \"${shellLaunchConfig.executable}\". Manage and change your permissions to get this to work`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 267:\n\t\t\t\t\t\tinnerMessage = `Invalid starting directory \"${initialCwd}\", review your terminal.integrated.cwd setting`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1260:\n\t\t\t\t\t\tinnerMessage = `Windows cannot open this program because it has been prevented by a software restriction policy. For more information, open Event Viewer or contact your system Administrator`;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmessage = nls.localize('launchFailed.errorMessage', \"The terminal process failed to launch: {0}.\", innerMessage);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn { code, message };\n}\n\n\nexport class TerminalInstanceColorProvider implements IXtermColorProvider {\n\tconstructor(\n\t\tprivate readonly _target: IReference<TerminalLocation | undefined>,\n\t\t@IViewDescriptorService private readonly _viewDescriptorService: IViewDescriptorService,\n\t) {\n\t}\n\n\tgetBackgroundColor(theme: IColorTheme) {\n\t\tconst terminalBackground = theme.getColor(TERMINAL_BACKGROUND_COLOR);\n\t\tif (terminalBackground) {\n\t\t\treturn terminalBackground;\n\t\t}\n\t\tif (this._target.object === TerminalLocation.Editor) {\n\t\t\treturn theme.getColor(editorBackground);\n\t\t}\n\t\tconst location = this._viewDescriptorService.getViewLocationById(TERMINAL_VIEW_ID)!;\n\t\tif (location === ViewContainerLocation.Panel) {\n\t\t\treturn theme.getColor(PANEL_BACKGROUND);\n\t\t}\n\t\treturn theme.getColor(SIDE_BAR_BACKGROUND);\n\t}\n}\n\nfunction guessShellTypeFromExecutable(os: OperatingSystem, executable: string): TerminalShellType | undefined {\n\tconst exeBasename = path.basename(executable);\n\tconst generalShellTypeMap: Map<TerminalShellType, RegExp> = new Map([\n\t\t[GeneralShellType.Julia, /^julia$/],\n\t\t[GeneralShellType.Node, /^node$/],\n\t\t[GeneralShellType.NuShell, /^nu$/],\n\t\t[GeneralShellType.PowerShell, /^pwsh(-preview)?|powershell$/],\n\t\t[GeneralShellType.Python, /^py(?:thon)?$/]\n\t]);\n\tfor (const [shellType, pattern] of generalShellTypeMap) {\n\t\tif (exeBasename.match(pattern)) {\n\t\t\treturn shellType;\n\t\t}\n\t}\n\n\tif (os === OperatingSystem.Windows) {\n\t\tconst windowsShellTypeMap: Map<TerminalShellType, RegExp> = new Map([\n\t\t\t[WindowsShellType.CommandPrompt, /^cmd$/],\n\t\t\t[WindowsShellType.GitBash, /^bash$/],\n\t\t\t[WindowsShellType.Wsl, /^wsl$/]\n\t\t]);\n\t\tfor (const [shellType, pattern] of windowsShellTypeMap) {\n\t\t\tif (exeBasename.match(pattern)) {\n\t\t\t\treturn shellType;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst posixShellTypes: PosixShellType[] = [\n\t\t\tPosixShellType.Bash,\n\t\t\tPosixShellType.Csh,\n\t\t\tPosixShellType.Fish,\n\t\t\tPosixShellType.Ksh,\n\t\t\tPosixShellType.Sh,\n\t\t\tPosixShellType.Zsh,\n\t\t];\n\t\tfor (const type of posixShellTypes) {\n\t\t\tif (exeBasename === type) {\n\t\t\t\treturn type;\n\t\t\t}\n\t\t}\n\t}\n\treturn undefined;\n}\n"]}