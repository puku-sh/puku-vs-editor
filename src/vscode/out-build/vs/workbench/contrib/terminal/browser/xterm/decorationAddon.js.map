{"version":3,"sources":["vs/workbench/contrib/terminal/browser/xterm/decorationAddon.ts"],"names":[],"mappings":"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","file":"decorationAddon.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IDecoration, ITerminalAddon, Terminal } from '@xterm/xterm';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { IAction, Separator } from '../../../../../base/common/actions.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableMap, DisposableStore, IDisposable, dispose, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IClipboardService } from '../../../../../platform/clipboard/common/clipboardService.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IContextMenuService } from '../../../../../platform/contextview/browser/contextView.js';\nimport { INotificationService, Severity } from '../../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { CommandInvalidationReason, ICommandDetectionCapability, IMarkProperties, ITerminalCapabilityStore, ITerminalCommand, TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { TerminalSettingId, type IDecorationAddon } from '../../../../../platform/terminal/common/terminal.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { terminalDecorationMark } from '../terminalIcons.js';\nimport { DecorationSelector, getTerminalCommandDecorationState, getTerminalDecorationHoverContent, updateLayout } from './decorationStyles.js';\nimport { TERMINAL_COMMAND_DECORATION_DEFAULT_BACKGROUND_COLOR, TERMINAL_COMMAND_DECORATION_ERROR_BACKGROUND_COLOR, TERMINAL_COMMAND_DECORATION_SUCCESS_BACKGROUND_COLOR } from '../../common/terminalColorRegistry.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { IHoverService } from '../../../../../platform/hover/browser/hover.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { IChatContextPickService } from '../../../chat/browser/chatContextPickService.js';\nimport { IChatWidgetService } from '../../../chat/browser/chat.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TerminalContext } from '../../../chat/browser/actions/chatContext.js';\nimport { getTerminalUri, parseTerminalUri } from '../terminalUri.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ChatAgentLocation } from '../../../chat/common/constants.js';\nimport { isString } from '../../../../../base/common/types.js';\n\ninterface IDisposableDecoration { decoration: IDecoration; disposables: IDisposable[]; command?: ITerminalCommand; markProperties?: IMarkProperties }\n\nexport class DecorationAddon extends Disposable implements ITerminalAddon, IDecorationAddon {\n\tprotected _terminal: Terminal | undefined;\n\tprivate _capabilityDisposables: DisposableMap<TerminalCapability> = this._register(new DisposableMap());\n\tprivate _decorations: Map<number, IDisposableDecoration> = new Map();\n\tprivate _placeholderDecoration: IDecoration | undefined;\n\tprivate _showGutterDecorations?: boolean;\n\tprivate _showOverviewRulerDecorations?: boolean;\n\tprivate readonly _registeredMenuItems: Map<ITerminalCommand, IAction[]> = new Map();\n\n\tprivate readonly _onDidRequestRunCommand = this._register(new Emitter<{ command: ITerminalCommand; noNewLine?: boolean }>());\n\treadonly onDidRequestRunCommand = this._onDidRequestRunCommand.event;\n\tprivate readonly _onDidRequestCopyAsHtml = this._register(new Emitter<{ command: ITerminalCommand }>());\n\treadonly onDidRequestCopyAsHtml = this._onDidRequestCopyAsHtml.event;\n\n\tconstructor(\n\t\tprivate readonly _resource: URI | undefined,\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\t@IClipboardService private readonly _clipboardService: IClipboardService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t\t@IChatContextPickService private readonly _contextPickService: IChatContextPickService,\n\t\t@IChatWidgetService private readonly _chatWidgetService: IChatWidgetService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._register(toDisposable(() => this._dispose()));\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TerminalSettingId.FontSize) || e.affectsConfiguration(TerminalSettingId.LineHeight)) {\n\t\t\t\tthis.refreshLayouts();\n\t\t\t} else if (e.affectsConfiguration('workbench.colorCustomizations')) {\n\t\t\t\tthis._refreshStyles(true);\n\t\t\t} else if (e.affectsConfiguration(TerminalSettingId.ShellIntegrationDecorationsEnabled)) {\n\t\t\t\tthis._removeCapabilityDisposables(TerminalCapability.CommandDetection);\n\t\t\t\tthis._updateDecorationVisibility();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => this._refreshStyles(true)));\n\t\tthis._updateDecorationVisibility();\n\t\tthis._register(this._capabilities.onDidAddCapability(c => this._createCapabilityDisposables(c.id)));\n\t\tthis._register(this._capabilities.onDidRemoveCapability(c => this._removeCapabilityDisposables(c.id)));\n\t\tthis._register(lifecycleService.onWillShutdown(() => this._disposeAllDecorations()));\n\t}\n\n\tprivate _createCapabilityDisposables(c: TerminalCapability): void {\n\t\tconst capability = this._capabilities.get(c);\n\t\tif (!capability || this._capabilityDisposables.has(c)) {\n\t\t\treturn;\n\t\t}\n\t\tconst store = new DisposableStore();\n\t\tswitch (capability.type) {\n\t\t\tcase TerminalCapability.BufferMarkDetection:\n\t\t\t\tstore.add(capability.onMarkAdded(mark => this.registerMarkDecoration(mark)));\n\t\t\t\tbreak;\n\t\t\tcase TerminalCapability.CommandDetection: {\n\t\t\t\tconst disposables = this._getCommandDetectionListeners(capability);\n\t\t\t\tfor (const d of disposables) {\n\t\t\t\t\tstore.add(d);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis._capabilityDisposables.set(c, store);\n\t}\n\n\tprivate _removeCapabilityDisposables(c: TerminalCapability): void {\n\t\tthis._capabilityDisposables.deleteAndDispose(c);\n\t}\n\n\tregisterMarkDecoration(mark: IMarkProperties): IDecoration | undefined {\n\t\tif (!this._terminal || (!this._showGutterDecorations && !this._showOverviewRulerDecorations)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (mark.hidden) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.registerCommandDecoration(undefined, undefined, mark);\n\t}\n\n\tprivate _updateDecorationVisibility(): void {\n\t\tconst showDecorations = this._configurationService.getValue(TerminalSettingId.ShellIntegrationDecorationsEnabled);\n\t\tthis._showGutterDecorations = (showDecorations === 'both' || showDecorations === 'gutter');\n\t\tthis._showOverviewRulerDecorations = (showDecorations === 'both' || showDecorations === 'overviewRuler');\n\t\tthis._disposeAllDecorations();\n\t\tif (this._showGutterDecorations || this._showOverviewRulerDecorations) {\n\t\t\tthis._attachToCommandCapability();\n\t\t\tthis._updateGutterDecorationVisibility();\n\t\t}\n\t\tconst currentCommand = this._capabilities.get(TerminalCapability.CommandDetection)?.executingCommandObject;\n\t\tif (currentCommand) {\n\t\t\tthis.registerCommandDecoration(currentCommand, true);\n\t\t}\n\t}\n\n\tprivate _disposeAllDecorations(): void {\n\t\tthis._placeholderDecoration?.dispose();\n\t\tfor (const value of this._decorations.values()) {\n\t\t\tvalue.decoration.dispose();\n\t\t\tdispose(value.disposables);\n\t\t}\n\t}\n\n\tprivate _updateGutterDecorationVisibility(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst commandDecorationElements = this._terminal?.element?.querySelectorAll(DecorationSelector.CommandDecoration);\n\t\tif (commandDecorationElements) {\n\t\t\tfor (const commandDecorationElement of commandDecorationElements) {\n\t\t\t\tthis._updateCommandDecorationVisibility(commandDecorationElement);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _updateCommandDecorationVisibility(commandDecorationElement: Element): void {\n\t\tif (this._showGutterDecorations) {\n\t\t\tcommandDecorationElement.classList.remove(DecorationSelector.Hide);\n\t\t} else {\n\t\t\tcommandDecorationElement.classList.add(DecorationSelector.Hide);\n\t\t}\n\t}\n\n\tpublic refreshLayouts(): void {\n\t\tupdateLayout(this._configurationService, this._placeholderDecoration?.element);\n\t\tfor (const decoration of this._decorations) {\n\t\t\tupdateLayout(this._configurationService, decoration[1].decoration.element);\n\t\t}\n\t}\n\n\tprivate _refreshStyles(refreshOverviewRulerColors?: boolean): void {\n\t\tif (refreshOverviewRulerColors) {\n\t\t\tfor (const decoration of this._decorations.values()) {\n\t\t\t\tconst color = this._getDecorationCssColor(decoration.command)?.toString() ?? '';\n\t\t\t\tif (decoration.decoration.options?.overviewRulerOptions) {\n\t\t\t\t\tdecoration.decoration.options.overviewRulerOptions.color = color;\n\t\t\t\t} else if (decoration.decoration.options) {\n\t\t\t\t\tdecoration.decoration.options.overviewRulerOptions = { color };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._updateClasses(this._placeholderDecoration?.element);\n\t\tfor (const decoration of this._decorations.values()) {\n\t\t\tthis._updateClasses(decoration.decoration.element, decoration.command, decoration.markProperties);\n\t\t}\n\t}\n\n\tprivate _dispose(): void {\n\t\tfor (const disposable of this._capabilityDisposables.values()) {\n\t\t\tdispose(disposable);\n\t\t}\n\t\tthis.clearDecorations();\n\t}\n\n\tprivate _clearPlaceholder(): void {\n\t\tthis._placeholderDecoration?.dispose();\n\t\tthis._placeholderDecoration = undefined;\n\t}\n\n\tpublic clearDecorations(): void {\n\t\tthis._placeholderDecoration?.marker.dispose();\n\t\tthis._clearPlaceholder();\n\t\tthis._disposeAllDecorations();\n\t\tthis._decorations.clear();\n\t}\n\n\tprivate _attachToCommandCapability(): void {\n\t\tif (this._capabilities.has(TerminalCapability.CommandDetection)) {\n\t\t\tconst capability = this._capabilities.get(TerminalCapability.CommandDetection)!;\n\t\t\tconst disposables = this._getCommandDetectionListeners(capability);\n\t\t\tconst store = new DisposableStore();\n\t\t\tfor (const d of disposables) {\n\t\t\t\tstore.add(d);\n\t\t\t}\n\t\t\tthis._capabilityDisposables.set(TerminalCapability.CommandDetection, store);\n\t\t}\n\t}\n\n\tprivate _getCommandDetectionListeners(capability: ICommandDetectionCapability): IDisposable[] {\n\t\tthis._removeCapabilityDisposables(TerminalCapability.CommandDetection);\n\n\t\tconst commandDetectionListeners = [];\n\t\t// Command started\n\t\tif (capability.executingCommandObject?.marker) {\n\t\t\tthis.registerCommandDecoration(capability.executingCommandObject, true);\n\t\t}\n\t\tcommandDetectionListeners.push(capability.onCommandStarted(command => this.registerCommandDecoration(command, true)));\n\t\t// Command finished\n\t\tfor (const command of capability.commands) {\n\t\t\tthis.registerCommandDecoration(command);\n\t\t}\n\t\tcommandDetectionListeners.push(capability.onCommandFinished(command => {\n\t\t\tconst buffer = this._terminal?.buffer?.active;\n\t\t\tconst marker = command.promptStartMarker;\n\n\t\t\t// Edge case: Handle case where tsc watch commands clears buffer, but decoration of that tsc command re-appears\n\t\t\tconst shouldRegisterDecoration = (\n\t\t\t\tcommand.exitCode === undefined ||\n\t\t\t\t// Only register decoration if the cursor is at or below the promptStart marker.\n\t\t\t\t(buffer && marker && buffer.baseY + buffer.cursorY >= marker.line)\n\t\t\t);\n\n\t\t\tif (shouldRegisterDecoration) {\n\t\t\t\tthis.registerCommandDecoration(command);\n\t\t\t}\n\n\t\t\tif (command.exitCode) {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.terminalCommandFailed);\n\t\t\t} else {\n\t\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.terminalCommandSucceeded);\n\t\t\t}\n\t\t}));\n\t\t// Command invalidated\n\t\tcommandDetectionListeners.push(capability.onCommandInvalidated(commands => {\n\t\t\tfor (const command of commands) {\n\t\t\t\tconst id = command.marker?.id;\n\t\t\t\tif (id) {\n\t\t\t\t\tconst match = this._decorations.get(id);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tmatch.decoration.dispose();\n\t\t\t\t\t\tdispose(match.disposables);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\t// Current command invalidated\n\t\tcommandDetectionListeners.push(capability.onCurrentCommandInvalidated((request) => {\n\t\t\tif (request.reason === CommandInvalidationReason.NoProblemsReported) {\n\t\t\t\tconst lastDecoration = Array.from(this._decorations.entries())[this._decorations.size - 1];\n\t\t\t\tlastDecoration?.[1].decoration.dispose();\n\t\t\t} else if (request.reason === CommandInvalidationReason.Windows) {\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t}));\n\t\treturn commandDetectionListeners;\n\t}\n\n\tactivate(terminal: Terminal): void {\n\t\tthis._terminal = terminal;\n\t\tthis._attachToCommandCapability();\n\t}\n\n\tregisterCommandDecoration(command?: ITerminalCommand, beforeCommandExecution?: boolean, markProperties?: IMarkProperties): IDecoration | undefined {\n\t\tif (!this._terminal || (beforeCommandExecution && !command) || (!this._showGutterDecorations && !this._showOverviewRulerDecorations)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst marker = command?.marker || markProperties?.marker;\n\t\tif (!marker) {\n\t\t\tthrow new Error(`cannot add a decoration for a command ${JSON.stringify(command)} with no marker`);\n\t\t}\n\t\tthis._clearPlaceholder();\n\t\tconst color = this._getDecorationCssColor(command)?.toString() ?? '';\n\t\tconst decoration = this._terminal.registerDecoration({\n\t\t\tmarker,\n\t\t\toverviewRulerOptions: this._showOverviewRulerDecorations ? (beforeCommandExecution\n\t\t\t\t? { color, position: 'left' }\n\t\t\t\t: { color, position: command?.exitCode ? 'right' : 'left' }) : undefined\n\t\t});\n\t\tif (!decoration) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (beforeCommandExecution) {\n\t\t\tthis._placeholderDecoration = decoration;\n\t\t}\n\t\tdecoration.onRender(element => {\n\t\t\tif (element.classList.contains(DecorationSelector.OverviewRuler)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this._decorations.get(decoration.marker.id)) {\n\t\t\t\tdecoration.onDispose(() => this._decorations.delete(decoration.marker.id));\n\t\t\t\tthis._decorations.set(decoration.marker.id,\n\t\t\t\t\t{\n\t\t\t\t\t\tdecoration,\n\t\t\t\t\t\tdisposables: this._createDisposables(element, command, markProperties),\n\t\t\t\t\t\tcommand,\n\t\t\t\t\t\tmarkProperties: command?.markProperties || markProperties\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tif (!element.classList.contains(DecorationSelector.Codicon) || command?.marker?.line === 0) {\n\t\t\t\t// first render or buffer was cleared\n\t\t\t\tupdateLayout(this._configurationService, element);\n\t\t\t\tthis._updateClasses(element, command, command?.markProperties || markProperties);\n\t\t\t}\n\t\t});\n\t\treturn decoration;\n\t}\n\n\tregisterMenuItems(command: ITerminalCommand, items: IAction[]): IDisposable {\n\t\tconst existingItems = this._registeredMenuItems.get(command);\n\t\tif (existingItems) {\n\t\t\texistingItems.push(...items);\n\t\t} else {\n\t\t\tthis._registeredMenuItems.set(command, [...items]);\n\t\t}\n\t\treturn toDisposable(() => {\n\t\t\tconst commandItems = this._registeredMenuItems.get(command);\n\t\t\tif (commandItems) {\n\t\t\t\tfor (const item of items.values()) {\n\t\t\t\t\tconst index = commandItems.indexOf(item);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tcommandItems.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _createDisposables(element: HTMLElement, command?: ITerminalCommand, markProperties?: IMarkProperties): IDisposable[] {\n\t\tif (command?.exitCode === undefined && !command?.markProperties) {\n\t\t\treturn [];\n\t\t} else if (command?.markProperties || markProperties) {\n\t\t\treturn [this._createHover(element, command || markProperties, markProperties?.hoverMessage)];\n\t\t}\n\t\treturn [...this._createContextMenu(element, command), this._createHover(element, command)];\n\t}\n\n\tprivate _createHover(element: HTMLElement, command: ITerminalCommand | undefined, hoverMessage?: string) {\n\t\treturn this._hoverService.setupDelayedHover(element, () => ({\n\t\t\tcontent: new MarkdownString(getTerminalDecorationHoverContent(command, hoverMessage, true))\n\t\t}));\n\t}\n\n\tprivate _updateClasses(element?: HTMLElement, command?: ITerminalCommand, markProperties?: IMarkProperties): void {\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const classes of element.classList) {\n\t\t\telement.classList.remove(classes);\n\t\t}\n\t\telement.classList.add(DecorationSelector.CommandDecoration, DecorationSelector.Codicon, DecorationSelector.XtermDecoration);\n\n\t\tif (markProperties) {\n\t\t\telement.classList.add(DecorationSelector.DefaultColor, ...ThemeIcon.asClassNameArray(terminalDecorationMark));\n\t\t\tif (!markProperties.hoverMessage) {\n\t\t\t\t//disable the mouse pointer\n\t\t\t\telement.classList.add(DecorationSelector.Default);\n\t\t\t}\n\t\t} else {\n\t\t\t// command decoration\n\t\t\tconst state = getTerminalCommandDecorationState(command);\n\t\t\tthis._updateCommandDecorationVisibility(element);\n\t\t\tfor (const className of state.classNames) {\n\t\t\t\telement.classList.add(className);\n\t\t\t}\n\t\t\telement.classList.add(...ThemeIcon.asClassNameArray(state.icon));\n\t\t}\n\t\telement.removeAttribute('title');\n\t\telement.removeAttribute('aria-label');\n\t}\n\n\tprivate _createContextMenu(element: HTMLElement, command: ITerminalCommand): IDisposable[] {\n\t\t// When the xterm Decoration gets disposed of, its element gets removed from the dom\n\t\t// along with its listeners\n\t\treturn [\n\t\t\tdom.addDisposableListener(element, dom.EventType.MOUSE_DOWN, async (e) => {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t}),\n\t\t\tdom.addDisposableListener(element, dom.EventType.CLICK, async (e) => {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tconst actions = await this._getCommandActions(command);\n\t\t\t\tthis._contextMenuService.showContextMenu({ getAnchor: () => element, getActions: () => actions });\n\t\t\t}),\n\t\t\tdom.addDisposableListener(element, dom.EventType.CONTEXT_MENU, async (e) => {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tconst chatActions = await this._getCommandActions(command);\n\t\t\t\tconst actions = this._getContextMenuActions();\n\t\t\t\tthis._contextMenuService.showContextMenu({ getAnchor: () => element, getActions: () => [...actions, ...chatActions] });\n\t\t\t}),\n\t\t];\n\t}\n\tprivate _getContextMenuActions(): IAction[] {\n\t\tconst label = localize('workbench.action.terminal.toggleVisibility', \"Toggle Visibility\");\n\t\treturn [\n\t\t\t{\n\t\t\t\tclass: undefined, tooltip: label, id: 'terminal.toggleVisibility', label, enabled: true,\n\t\t\t\trun: async () => {\n\t\t\t\t\tthis._showToggleVisibilityQuickPick();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\tprivate async _getCommandActions(command: ITerminalCommand): Promise<IAction[]> {\n\n\t\tconst actions: IAction[] = [];\n\t\tconst registeredMenuItems = this._registeredMenuItems.get(command);\n\t\tif (registeredMenuItems?.length) {\n\t\t\tactions.push(...registeredMenuItems, new Separator());\n\t\t}\n\n\t\tconst attachToChatAction = this._createAttachToChatAction(command);\n\t\tif (attachToChatAction) {\n\t\t\tactions.push(attachToChatAction, new Separator());\n\t\t}\n\n\t\tif (command.command !== '') {\n\t\t\tconst labelRun = localize(\"terminal.rerunCommand\", 'Rerun Command');\n\t\t\tactions.push({\n\t\t\t\tclass: undefined, tooltip: labelRun, id: 'terminal.rerunCommand', label: labelRun, enabled: true,\n\t\t\t\trun: async () => {\n\t\t\t\t\tif (command.command === '') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!command.isTrusted) {\n\t\t\t\t\t\tconst shouldRun = await new Promise<boolean>(r => {\n\t\t\t\t\t\t\tthis._notificationService.prompt(Severity.Info, localize('rerun', 'Do you want to run the command: {0}', command.command), [{\n\t\t\t\t\t\t\t\tlabel: localize('yes', 'Yes'),\n\t\t\t\t\t\t\t\trun: () => r(true)\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tlabel: localize('no', 'No'),\n\t\t\t\t\t\t\t\trun: () => r(false)\n\t\t\t\t\t\t\t}]);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!shouldRun) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDidRequestRunCommand.fire({ command });\n\t\t\t\t}\n\t\t\t});\n\t\t\t// The second section is the clipboard section\n\t\t\tactions.push(new Separator());\n\t\t\tconst labelCopy = localize(\"terminal.copyCommand\", 'Copy Command');\n\t\t\tactions.push({\n\t\t\t\tclass: undefined, tooltip: labelCopy, id: 'terminal.copyCommand', label: labelCopy, enabled: true,\n\t\t\t\trun: () => this._clipboardService.writeText(command.command)\n\t\t\t});\n\t\t}\n\t\tif (command.hasOutput()) {\n\t\t\tconst labelCopyCommandAndOutput = localize(\"terminal.copyCommandAndOutput\", 'Copy Command and Output');\n\t\t\tactions.push({\n\t\t\t\tclass: undefined, tooltip: labelCopyCommandAndOutput, id: 'terminal.copyCommandAndOutput', label: labelCopyCommandAndOutput, enabled: true,\n\t\t\t\trun: () => {\n\t\t\t\t\tconst output = command.getOutput();\n\t\t\t\t\tif (isString(output)) {\n\t\t\t\t\t\tthis._clipboardService.writeText(`${command.command !== '' ? command.command + '\\n' : ''}${output}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst labelText = localize(\"terminal.copyOutput\", 'Copy Output');\n\t\t\tactions.push({\n\t\t\t\tclass: undefined, tooltip: labelText, id: 'terminal.copyOutput', label: labelText, enabled: true,\n\t\t\t\trun: () => {\n\t\t\t\t\tconst text = command.getOutput();\n\t\t\t\t\tif (isString(text)) {\n\t\t\t\t\t\tthis._clipboardService.writeText(text);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst labelHtml = localize(\"terminal.copyOutputAsHtml\", 'Copy Output as HTML');\n\t\t\tactions.push({\n\t\t\t\tclass: undefined, tooltip: labelHtml, id: 'terminal.copyOutputAsHtml', label: labelHtml, enabled: true,\n\t\t\t\trun: () => this._onDidRequestCopyAsHtml.fire({ command })\n\t\t\t});\n\t\t}\n\t\tif (actions.length > 0) {\n\t\t\tactions.push(new Separator());\n\t\t}\n\t\tconst labelRunRecent = localize('workbench.action.terminal.runRecentCommand', \"Run Recent Command\");\n\t\tactions.push({\n\t\t\tclass: undefined, tooltip: labelRunRecent, id: 'workbench.action.terminal.runRecentCommand', label: labelRunRecent, enabled: true,\n\t\t\trun: () => this._commandService.executeCommand('workbench.action.terminal.runRecentCommand')\n\t\t});\n\t\tconst labelGoToRecent = localize('workbench.action.terminal.goToRecentDirectory', \"Go To Recent Directory\");\n\t\tactions.push({\n\t\t\tclass: undefined, tooltip: labelRunRecent, id: 'workbench.action.terminal.goToRecentDirectory', label: labelGoToRecent, enabled: true,\n\t\t\trun: () => this._commandService.executeCommand('workbench.action.terminal.goToRecentDirectory')\n\t\t});\n\n\t\tactions.push(new Separator());\n\n\t\tconst labelAbout = localize(\"terminal.learnShellIntegration\", 'Learn About Shell Integration');\n\t\tactions.push({\n\t\t\tclass: undefined, tooltip: labelAbout, id: 'terminal.learnShellIntegration', label: labelAbout, enabled: true,\n\t\t\trun: () => this._openerService.open('https://code.visualstudio.com/docs/terminal/shell-integration')\n\t\t});\n\t\treturn actions;\n\t}\n\n\tprivate _createAttachToChatAction(command: ITerminalCommand): IAction | undefined {\n\t\tconst chatIsEnabled = this._chatWidgetService.getWidgetsByLocations(ChatAgentLocation.Chat).some(w => w.attachmentCapabilities.supportsTerminalAttachments);\n\t\tif (!chatIsEnabled) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst labelAttachToChat = localize(\"terminal.attachToChat\", 'Attach To Chat');\n\t\treturn {\n\t\t\tclass: undefined, tooltip: labelAttachToChat, id: 'terminal.attachToChat', label: labelAttachToChat, enabled: true,\n\t\t\trun: async () => {\n\t\t\t\tlet widget = this._chatWidgetService.lastFocusedWidget ?? this._chatWidgetService.getWidgetsByLocations(ChatAgentLocation.Chat)?.find(w => w.attachmentCapabilities.supportsTerminalAttachments);\n\n\t\t\t\t// If no widget found (e.g., after window reload when chat hasn't been focused), open chat view\n\t\t\t\tif (!widget) {\n\t\t\t\t\twidget = await this._chatWidgetService.revealWidget();\n\t\t\t\t}\n\n\t\t\t\tif (!widget) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet terminalContext: TerminalContext | undefined;\n\t\t\t\tif (this._resource) {\n\t\t\t\t\tconst parsedUri = parseTerminalUri(this._resource);\n\t\t\t\t\tterminalContext = this._instantiationService.createInstance(TerminalContext, getTerminalUri(parsedUri.workspaceId, parsedUri.instanceId!, undefined, command.id));\n\t\t\t\t}\n\n\t\t\t\tif (terminalContext && widget.attachmentCapabilities.supportsTerminalAttachments) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst attachment = await terminalContext.asAttachment(widget);\n\t\t\t\t\t\tif (attachment) {\n\t\t\t\t\t\t\twidget.attachmentModel.addContext(attachment);\n\t\t\t\t\t\t\twidget.focusInput();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t}\n\t\t\t\t\tthis._store.add(this._contextPickService.registerChatContextItem(terminalContext));\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate _showToggleVisibilityQuickPick() {\n\t\tconst quickPick = this._register(this._quickInputService.createQuickPick());\n\t\tquickPick.hideInput = true;\n\t\tquickPick.hideCheckAll = true;\n\t\tquickPick.canSelectMany = true;\n\t\tquickPick.title = localize('toggleVisibility', 'Toggle visibility');\n\t\tconst configValue = this._configurationService.getValue(TerminalSettingId.ShellIntegrationDecorationsEnabled);\n\t\tconst gutterIcon: IQuickPickItem = {\n\t\t\tlabel: localize('gutter', 'Gutter command decorations'),\n\t\t\tpicked: configValue !== 'never' && configValue !== 'overviewRuler'\n\t\t};\n\t\tconst overviewRulerIcon: IQuickPickItem = {\n\t\t\tlabel: localize('overviewRuler', 'Overview ruler command decorations'),\n\t\t\tpicked: configValue !== 'never' && configValue !== 'gutter'\n\t\t};\n\t\tquickPick.items = [gutterIcon, overviewRulerIcon];\n\t\tconst selectedItems: IQuickPickItem[] = [];\n\t\tif (configValue !== 'never') {\n\t\t\tif (configValue !== 'gutter') {\n\t\t\t\tselectedItems.push(gutterIcon);\n\t\t\t}\n\t\t\tif (configValue !== 'overviewRuler') {\n\t\t\t\tselectedItems.push(overviewRulerIcon);\n\t\t\t}\n\t\t}\n\t\tquickPick.selectedItems = selectedItems;\n\t\tthis._register(quickPick.onDidChangeSelection(async e => {\n\t\t\tlet newValue: 'both' | 'gutter' | 'overviewRuler' | 'never' = 'never';\n\t\t\tif (e.includes(gutterIcon)) {\n\t\t\t\tif (e.includes(overviewRulerIcon)) {\n\t\t\t\t\tnewValue = 'both';\n\t\t\t\t} else {\n\t\t\t\t\tnewValue = 'gutter';\n\t\t\t\t}\n\t\t\t} else if (e.includes(overviewRulerIcon)) {\n\t\t\t\tnewValue = 'overviewRuler';\n\t\t\t}\n\t\t\tawait this._configurationService.updateValue(TerminalSettingId.ShellIntegrationDecorationsEnabled, newValue);\n\t\t}));\n\t\tquickPick.ok = false;\n\t\tquickPick.show();\n\t}\n\n\tprivate _getDecorationCssColor(command?: ITerminalCommand): string | undefined {\n\t\tlet colorId: string;\n\t\tif (command?.exitCode === undefined) {\n\t\t\tcolorId = TERMINAL_COMMAND_DECORATION_DEFAULT_BACKGROUND_COLOR;\n\t\t} else {\n\t\t\tcolorId = command.exitCode ? TERMINAL_COMMAND_DECORATION_ERROR_BACKGROUND_COLOR : TERMINAL_COMMAND_DECORATION_SUCCESS_BACKGROUND_COLOR;\n\t\t}\n\t\treturn this._themeService.getColorTheme().getColor(colorId)?.toString();\n\t}\n}\n"]}