{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/browser/remoteTerminalBackend.ts","vs/workbench/contrib/terminal/browser/remoteTerminalBackend.ts"],"names":[],"mappings":"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","file":"remoteTerminalBackend.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { revive } from '../../../../base/common/marshalling.js';\nimport { PerformanceMark, mark } from '../../../../base/common/performance.js';\nimport { IProcessEnvironment, OperatingSystem } from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IRemoteAuthorityResolverService } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ISerializedTerminalCommand } from '../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { IPtyHostLatencyMeasurement, IShellLaunchConfig, IShellLaunchConfigDto, ITerminalBackend, ITerminalBackendRegistry, ITerminalChildProcess, ITerminalEnvironment, ITerminalLogService, ITerminalProcessOptions, ITerminalProfile, ITerminalsLayoutInfo, ITerminalsLayoutInfoById, ProcessPropertyType, TerminalExtensions, TerminalIcon, TerminalSettingId, TitleEventSource, type IProcessPropertyMap } from '../../../../platform/terminal/common/terminal.js';\nimport { IProcessDetails } from '../../../../platform/terminal/common/terminalProcess.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { BaseTerminalBackend } from './baseTerminalBackend.js';\nimport { RemotePty } from './remotePty.js';\nimport { ITerminalInstanceService } from './terminal.js';\nimport { RemoteTerminalChannelClient, REMOTE_TERMINAL_CHANNEL_NAME } from '../common/remote/remoteTerminalChannel.js';\nimport { ICompleteTerminalConfiguration, ITerminalConfiguration, TERMINAL_CONFIG_SECTION } from '../common/terminal.js';\nimport { TerminalStorageKeys } from '../common/terminalStorageKeys.js';\nimport { IConfigurationResolverService } from '../../../services/configurationResolver/common/configurationResolver.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\n\nexport class RemoteTerminalBackendContribution implements IWorkbenchContribution {\n\tstatic ID = 'remoteTerminalBackend';\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@ITerminalInstanceService terminalInstanceService: ITerminalInstanceService\n\t) {\n\t\tconst connection = remoteAgentService.getConnection();\n\t\tif (connection?.remoteAuthority) {\n\t\t\tconst channel = instantiationService.createInstance(RemoteTerminalChannelClient, connection.remoteAuthority, connection.getChannel(REMOTE_TERMINAL_CHANNEL_NAME));\n\t\t\tconst backend = instantiationService.createInstance(RemoteTerminalBackend, connection.remoteAuthority, channel);\n\t\t\tRegistry.as<ITerminalBackendRegistry>(TerminalExtensions.Backend).registerTerminalBackend(backend);\n\t\t\tterminalInstanceService.didRegisterBackend(backend);\n\t\t}\n\t}\n}\n\nclass RemoteTerminalBackend extends BaseTerminalBackend implements ITerminalBackend {\n\tprivate readonly _ptys: Map<number, RemotePty> = new Map();\n\n\tprivate readonly _whenConnected = new DeferredPromise<void>();\n\tget whenReady(): Promise<void> { return this._whenConnected.p; }\n\tsetReady(): void { this._whenConnected.complete(); }\n\n\tprivate readonly _onDidRequestDetach = this._register(new Emitter<{ requestId: number; workspaceId: string; instanceId: number }>());\n\treadonly onDidRequestDetach = this._onDidRequestDetach.event;\n\tprivate readonly _onRestoreCommands = this._register(new Emitter<{ id: number; commands: ISerializedTerminalCommand[] }>());\n\treadonly onRestoreCommands = this._onRestoreCommands.event;\n\n\tconstructor(\n\t\treadonly remoteAuthority: string | undefined,\n\t\tprivate readonly _remoteTerminalChannel: RemoteTerminalChannelClient,\n\t\t@IRemoteAgentService private readonly _remoteAgentService: IRemoteAgentService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalLogService logService: ITerminalLogService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IRemoteAuthorityResolverService private readonly _remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@IWorkspaceContextService workspaceContextService: IWorkspaceContextService,\n\t\t@IConfigurationResolverService configurationResolverService: IConfigurationResolverService,\n\t\t@IHistoryService private readonly _historyService: IHistoryService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IStatusbarService statusBarService: IStatusbarService\n\t) {\n\t\tsuper(_remoteTerminalChannel, logService, _historyService, configurationResolverService, statusBarService, workspaceContextService);\n\n\t\tthis._remoteTerminalChannel.onProcessData(e => this._ptys.get(e.id)?.handleData(e.event));\n\t\tthis._remoteTerminalChannel.onProcessReplay(e => {\n\t\t\tthis._ptys.get(e.id)?.handleReplay(e.event);\n\t\t\tif (e.event.commands.commands.length > 0) {\n\t\t\t\tthis._onRestoreCommands.fire({ id: e.id, commands: e.event.commands.commands });\n\t\t\t}\n\t\t});\n\t\tthis._remoteTerminalChannel.onProcessOrphanQuestion(e => this._ptys.get(e.id)?.handleOrphanQuestion());\n\t\tthis._remoteTerminalChannel.onDidRequestDetach(e => this._onDidRequestDetach.fire(e));\n\t\tthis._remoteTerminalChannel.onProcessReady(e => this._ptys.get(e.id)?.handleReady(e.event));\n\t\tthis._remoteTerminalChannel.onDidChangeProperty(e => this._ptys.get(e.id)?.handleDidChangeProperty(e.property));\n\t\tthis._remoteTerminalChannel.onProcessExit(e => {\n\t\t\tconst pty = this._ptys.get(e.id);\n\t\t\tif (pty) {\n\t\t\t\tpty.handleExit(e.event);\n\t\t\t\tpty.dispose();\n\t\t\t\tthis._ptys.delete(e.id);\n\t\t\t}\n\t\t});\n\n\t\tconst allowedCommands = ['_remoteCLI.openExternal', '_remoteCLI.windowOpen', '_remoteCLI.getSystemStatus', '_remoteCLI.manageExtensions'];\n\t\tthis._remoteTerminalChannel.onExecuteCommand(async e => {\n\t\t\t// Ensure this request for for this window\n\t\t\tconst pty = this._ptys.get(e.persistentProcessId);\n\t\t\tif (!pty) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst reqId = e.reqId;\n\t\t\tconst commandId = e.commandId;\n\t\t\tif (!allowedCommands.includes(commandId)) {\n\t\t\t\tthis._remoteTerminalChannel.sendCommandResult(reqId, true, 'Invalid remote cli command: ' + commandId);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst commandArgs = e.commandArgs.map(arg => revive(arg));\n\t\t\ttry {\n\t\t\t\tconst result = await this._commandService.executeCommand(e.commandId, ...commandArgs);\n\t\t\t\tthis._remoteTerminalChannel.sendCommandResult(reqId, false, result);\n\t\t\t} catch (err) {\n\t\t\t\tthis._remoteTerminalChannel.sendCommandResult(reqId, true, err);\n\t\t\t}\n\t\t});\n\n\t\tthis._onPtyHostConnected.fire();\n\t}\n\n\tasync requestDetachInstance(workspaceId: string, instanceId: number): Promise<IProcessDetails | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot request detach instance when there is no remote!`);\n\t\t}\n\t\treturn this._remoteTerminalChannel.requestDetachInstance(workspaceId, instanceId);\n\t}\n\n\tasync acceptDetachInstanceReply(requestId: number, persistentProcessId?: number): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot accept detached instance when there is no remote!`);\n\t\t} else if (!persistentProcessId) {\n\t\t\tthis._logService.warn('Cannot attach to feature terminals, custom pty terminals, or those without a persistentProcessId');\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._remoteTerminalChannel.acceptDetachInstanceReply(requestId, persistentProcessId);\n\t}\n\n\tasync persistTerminalState(): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot persist terminal state when there is no remote!`);\n\t\t}\n\t\tconst ids = Array.from(this._ptys.keys());\n\t\tconst serialized = await this._remoteTerminalChannel.serializeTerminalState(ids);\n\t\tthis._storageService.store(TerminalStorageKeys.TerminalBufferState, serialized, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\tasync createProcess(\n\t\tshellLaunchConfig: IShellLaunchConfig,\n\t\tcwd: string, // TODO: This is ignored\n\t\tcols: number,\n\t\trows: number,\n\t\tunicodeVersion: '6' | '11',\n\t\tenv: IProcessEnvironment, // TODO: This is ignored\n\t\toptions: ITerminalProcessOptions,\n\t\tshouldPersist: boolean\n\t): Promise<ITerminalChildProcess> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot create remote terminal when there is no remote!`);\n\t\t}\n\n\t\t// Fetch the environment to check shell permissions\n\t\tconst remoteEnv = await this._remoteAgentService.getEnvironment();\n\t\tif (!remoteEnv) {\n\t\t\t// Extension host processes are only allowed in remote extension hosts currently\n\t\t\tthrow new Error('Could not fetch remote environment');\n\t\t}\n\n\t\tconst terminalConfig = this._configurationService.getValue<ITerminalConfiguration>(TERMINAL_CONFIG_SECTION);\n\t\tconst configuration: ICompleteTerminalConfiguration = {\n\t\t\t'terminal.integrated.env.windows': this._configurationService.getValue(TerminalSettingId.EnvWindows) as ITerminalEnvironment,\n\t\t\t'terminal.integrated.env.osx': this._configurationService.getValue(TerminalSettingId.EnvMacOs) as ITerminalEnvironment,\n\t\t\t'terminal.integrated.env.linux': this._configurationService.getValue(TerminalSettingId.EnvLinux) as ITerminalEnvironment,\n\t\t\t'terminal.integrated.cwd': this._configurationService.getValue(TerminalSettingId.Cwd) as string,\n\t\t\t'terminal.integrated.detectLocale': terminalConfig.detectLocale\n\t\t};\n\n\t\tconst shellLaunchConfigDto: IShellLaunchConfigDto = {\n\t\t\tname: shellLaunchConfig.name,\n\t\t\texecutable: shellLaunchConfig.executable,\n\t\t\targs: shellLaunchConfig.args,\n\t\t\tcwd: shellLaunchConfig.cwd,\n\t\t\tenv: shellLaunchConfig.env,\n\t\t\tuseShellEnvironment: shellLaunchConfig.useShellEnvironment,\n\t\t\treconnectionProperties: shellLaunchConfig.reconnectionProperties,\n\t\t\ttype: shellLaunchConfig.type,\n\t\t\tisFeatureTerminal: shellLaunchConfig.isFeatureTerminal,\n\t\t\ttabActions: shellLaunchConfig.tabActions,\n\t\t\tshellIntegrationEnvironmentReporting: shellLaunchConfig.shellIntegrationEnvironmentReporting,\n\t\t};\n\t\tconst activeWorkspaceRootUri = this._historyService.getLastActiveWorkspaceRoot();\n\n\t\tconst result = await this._remoteTerminalChannel.createProcess(\n\t\t\tshellLaunchConfigDto,\n\t\t\tconfiguration,\n\t\t\tactiveWorkspaceRootUri,\n\t\t\toptions,\n\t\t\tshouldPersist,\n\t\t\tcols,\n\t\t\trows,\n\t\t\tunicodeVersion\n\t\t);\n\t\tconst pty = this._instantiationService.createInstance(RemotePty, result.persistentTerminalId, shouldPersist, this._remoteTerminalChannel);\n\t\tthis._ptys.set(result.persistentTerminalId, pty);\n\t\treturn pty;\n\t}\n\n\tasync attachToProcess(id: number): Promise<ITerminalChildProcess | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot create remote terminal when there is no remote!`);\n\t\t}\n\n\t\ttry {\n\t\t\tawait this._remoteTerminalChannel.attachToProcess(id);\n\t\t\tconst pty = this._instantiationService.createInstance(RemotePty, id, true, this._remoteTerminalChannel);\n\t\t\tthis._ptys.set(id, pty);\n\t\t\treturn pty;\n\t\t} catch (e) {\n\t\t\tthis._logService.trace(`Couldn't attach to process ${e.message}`);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync attachToRevivedProcess(id: number): Promise<ITerminalChildProcess | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot create remote terminal when there is no remote!`);\n\t\t}\n\n\t\ttry {\n\t\t\tconst newId = await this._remoteTerminalChannel.getRevivedPtyNewId(id) ?? id;\n\t\t\treturn await this.attachToProcess(newId);\n\t\t} catch (e) {\n\t\t\tthis._logService.trace(`Couldn't attach to process ${e.message}`);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync listProcesses(): Promise<IProcessDetails[]> {\n\t\treturn this._remoteTerminalChannel.listProcesses();\n\t}\n\n\tasync getLatency(): Promise<IPtyHostLatencyMeasurement[]> {\n\t\tconst sw = new StopWatch();\n\t\tconst results = await this._remoteTerminalChannel.getLatency();\n\t\tsw.stop();\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: 'window<->ptyhostservice<->ptyhost',\n\t\t\t\tlatency: sw.elapsed()\n\t\t\t},\n\t\t\t...results\n\t\t];\n\t}\n\n\tasync updateProperty<T extends ProcessPropertyType>(id: number, property: T, value: IProcessPropertyMap[T]): Promise<void> {\n\t\tawait this._remoteTerminalChannel.updateProperty(id, property, value);\n\t}\n\n\tasync updateTitle(id: number, title: string, titleSource: TitleEventSource): Promise<void> {\n\t\tawait this._remoteTerminalChannel.updateTitle(id, title, titleSource);\n\t}\n\n\tasync updateIcon(id: number, userInitiated: boolean, icon: TerminalIcon, color?: string): Promise<void> {\n\t\tawait this._remoteTerminalChannel.updateIcon(id, userInitiated, icon, color);\n\t}\n\n\tasync setNextCommandId(id: number, commandLine: string, commandId: string): Promise<void> {\n\t\tawait this._remoteTerminalChannel.setNextCommandId(id, commandLine, commandId);\n\t}\n\n\tasync getDefaultSystemShell(osOverride?: OperatingSystem): Promise<string> {\n\t\treturn this._remoteTerminalChannel.getDefaultSystemShell(osOverride) || '';\n\t}\n\n\tasync getProfiles(profiles: unknown, defaultProfile: unknown, includeDetectedProfiles?: boolean): Promise<ITerminalProfile[]> {\n\t\treturn this._remoteTerminalChannel.getProfiles(profiles, defaultProfile, includeDetectedProfiles) || [];\n\t}\n\n\tasync getEnvironment(): Promise<IProcessEnvironment> {\n\t\treturn this._remoteTerminalChannel.getEnvironment() || {};\n\t}\n\n\tasync getShellEnvironment(): Promise<IProcessEnvironment | undefined> {\n\t\tconst connection = this._remoteAgentService.getConnection();\n\t\tif (!connection) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst resolverResult = await this._remoteAuthorityResolverService.resolveAuthority(connection.remoteAuthority);\n\t\tconst envResult: IProcessEnvironment = {};\n\t\tif (resolverResult.options?.extensionHostEnv) {\n\t\t\tfor (const [key, value] of Object.entries(resolverResult.options.extensionHostEnv)) {\n\t\t\t\tif (value !== null) {\n\t\t\t\t\tenvResult[key] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn envResult;\n\t}\n\n\tasync getWslPath(original: string, direction: 'unix-to-win' | 'win-to-unix'): Promise<string> {\n\t\tconst env = await this._remoteAgentService.getEnvironment();\n\t\tif (env?.os !== OperatingSystem.Windows) {\n\t\t\treturn original;\n\t\t}\n\t\treturn this._remoteTerminalChannel.getWslPath(original, direction) || original;\n\t}\n\n\tasync setTerminalLayoutInfo(layout?: ITerminalsLayoutInfoById): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot call setActiveInstanceId when there is no remote`);\n\t\t}\n\n\t\treturn this._remoteTerminalChannel.setTerminalLayoutInfo(layout);\n\t}\n\n\tasync reduceConnectionGraceTime(): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error('Cannot reduce grace time when there is no remote');\n\t\t}\n\t\treturn this._remoteTerminalChannel.reduceConnectionGraceTime();\n\t}\n\n\tasync getTerminalLayoutInfo(): Promise<ITerminalsLayoutInfo | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot call getActiveInstanceId when there is no remote`);\n\t\t}\n\n\t\tconst workspaceId = this._getWorkspaceId();\n\n\t\t// Revive processes if needed\n\t\tconst serializedState = this._storageService.get(TerminalStorageKeys.TerminalBufferState, StorageScope.WORKSPACE);\n\t\tconst reviveBufferState = this._deserializeTerminalState(serializedState);\n\t\tif (reviveBufferState && reviveBufferState.length > 0) {\n\t\t\ttry {\n\t\t\t\t// Note that remote terminals do not get their environment re-resolved unlike in local terminals\n\n\t\t\t\tmark('code/terminal/willReviveTerminalProcessesRemote');\n\t\t\t\tawait this._remoteTerminalChannel.reviveTerminalProcesses(workspaceId, reviveBufferState, Intl.DateTimeFormat().resolvedOptions().locale);\n\t\t\t\tmark('code/terminal/didReviveTerminalProcessesRemote');\n\t\t\t\tthis._storageService.remove(TerminalStorageKeys.TerminalBufferState, StorageScope.WORKSPACE);\n\t\t\t\t// If reviving processes, send the terminal layout info back to the pty host as it\n\t\t\t\t// will not have been persisted on application exit\n\t\t\t\tconst layoutInfo = this._storageService.get(TerminalStorageKeys.TerminalLayoutInfo, StorageScope.WORKSPACE);\n\t\t\t\tif (layoutInfo) {\n\t\t\t\t\tmark('code/terminal/willSetTerminalLayoutInfoRemote');\n\t\t\t\t\tawait this._remoteTerminalChannel.setTerminalLayoutInfo(JSON.parse(layoutInfo));\n\t\t\t\t\tmark('code/terminal/didSetTerminalLayoutInfoRemote');\n\t\t\t\t\tthis._storageService.remove(TerminalStorageKeys.TerminalLayoutInfo, StorageScope.WORKSPACE);\n\t\t\t\t}\n\t\t\t} catch (e: unknown) {\n\t\t\t\tthis._logService.warn('RemoteTerminalBackend#getTerminalLayoutInfo Error', (<{ message?: string }>e).message ?? e);\n\t\t\t}\n\t\t}\n\n\t\treturn this._remoteTerminalChannel.getTerminalLayoutInfo();\n\t}\n\n\tasync getPerformanceMarks(): Promise<PerformanceMark[]> {\n\t\treturn this._remoteTerminalChannel.getPerformanceMarks();\n\t}\n\n\tinstallAutoReply(match: string, reply: string): Promise<void> {\n\t\treturn this._remoteTerminalChannel.installAutoReply(match, reply);\n\t}\n\n\tuninstallAllAutoReplies(): Promise<void> {\n\t\treturn this._remoteTerminalChannel.uninstallAllAutoReplies();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { revive } from '../../../../base/common/marshalling.js';\nimport { PerformanceMark, mark } from '../../../../base/common/performance.js';\nimport { IProcessEnvironment, OperatingSystem } from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IRemoteAuthorityResolverService } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ISerializedTerminalCommand } from '../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { IPtyHostLatencyMeasurement, IShellLaunchConfig, IShellLaunchConfigDto, ITerminalBackend, ITerminalBackendRegistry, ITerminalChildProcess, ITerminalEnvironment, ITerminalLogService, ITerminalProcessOptions, ITerminalProfile, ITerminalsLayoutInfo, ITerminalsLayoutInfoById, ProcessPropertyType, TerminalExtensions, TerminalIcon, TerminalSettingId, TitleEventSource, type IProcessPropertyMap } from '../../../../platform/terminal/common/terminal.js';\nimport { IProcessDetails } from '../../../../platform/terminal/common/terminalProcess.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { BaseTerminalBackend } from './baseTerminalBackend.js';\nimport { RemotePty } from './remotePty.js';\nimport { ITerminalInstanceService } from './terminal.js';\nimport { RemoteTerminalChannelClient, REMOTE_TERMINAL_CHANNEL_NAME } from '../common/remote/remoteTerminalChannel.js';\nimport { ICompleteTerminalConfiguration, ITerminalConfiguration, TERMINAL_CONFIG_SECTION } from '../common/terminal.js';\nimport { TerminalStorageKeys } from '../common/terminalStorageKeys.js';\nimport { IConfigurationResolverService } from '../../../services/configurationResolver/common/configurationResolver.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { IStatusbarService } from '../../../services/statusbar/browser/statusbar.js';\n\nexport class RemoteTerminalBackendContribution implements IWorkbenchContribution {\n\tstatic ID = 'remoteTerminalBackend';\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@ITerminalInstanceService terminalInstanceService: ITerminalInstanceService\n\t) {\n\t\tconst connection = remoteAgentService.getConnection();\n\t\tif (connection?.remoteAuthority) {\n\t\t\tconst channel = instantiationService.createInstance(RemoteTerminalChannelClient, connection.remoteAuthority, connection.getChannel(REMOTE_TERMINAL_CHANNEL_NAME));\n\t\t\tconst backend = instantiationService.createInstance(RemoteTerminalBackend, connection.remoteAuthority, channel);\n\t\t\tRegistry.as<ITerminalBackendRegistry>(TerminalExtensions.Backend).registerTerminalBackend(backend);\n\t\t\tterminalInstanceService.didRegisterBackend(backend);\n\t\t}\n\t}\n}\n\nclass RemoteTerminalBackend extends BaseTerminalBackend implements ITerminalBackend {\n\tprivate readonly _ptys: Map<number, RemotePty> = new Map();\n\n\tprivate readonly _whenConnected = new DeferredPromise<void>();\n\tget whenReady(): Promise<void> { return this._whenConnected.p; }\n\tsetReady(): void { this._whenConnected.complete(); }\n\n\tprivate readonly _onDidRequestDetach = this._register(new Emitter<{ requestId: number; workspaceId: string; instanceId: number }>());\n\treadonly onDidRequestDetach = this._onDidRequestDetach.event;\n\tprivate readonly _onRestoreCommands = this._register(new Emitter<{ id: number; commands: ISerializedTerminalCommand[] }>());\n\treadonly onRestoreCommands = this._onRestoreCommands.event;\n\n\tconstructor(\n\t\treadonly remoteAuthority: string | undefined,\n\t\tprivate readonly _remoteTerminalChannel: RemoteTerminalChannelClient,\n\t\t@IRemoteAgentService private readonly _remoteAgentService: IRemoteAgentService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalLogService logService: ITerminalLogService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IRemoteAuthorityResolverService private readonly _remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@IWorkspaceContextService workspaceContextService: IWorkspaceContextService,\n\t\t@IConfigurationResolverService configurationResolverService: IConfigurationResolverService,\n\t\t@IHistoryService private readonly _historyService: IHistoryService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IStatusbarService statusBarService: IStatusbarService\n\t) {\n\t\tsuper(_remoteTerminalChannel, logService, _historyService, configurationResolverService, statusBarService, workspaceContextService);\n\n\t\tthis._remoteTerminalChannel.onProcessData(e => this._ptys.get(e.id)?.handleData(e.event));\n\t\tthis._remoteTerminalChannel.onProcessReplay(e => {\n\t\t\tthis._ptys.get(e.id)?.handleReplay(e.event);\n\t\t\tif (e.event.commands.commands.length > 0) {\n\t\t\t\tthis._onRestoreCommands.fire({ id: e.id, commands: e.event.commands.commands });\n\t\t\t}\n\t\t});\n\t\tthis._remoteTerminalChannel.onProcessOrphanQuestion(e => this._ptys.get(e.id)?.handleOrphanQuestion());\n\t\tthis._remoteTerminalChannel.onDidRequestDetach(e => this._onDidRequestDetach.fire(e));\n\t\tthis._remoteTerminalChannel.onProcessReady(e => this._ptys.get(e.id)?.handleReady(e.event));\n\t\tthis._remoteTerminalChannel.onDidChangeProperty(e => this._ptys.get(e.id)?.handleDidChangeProperty(e.property));\n\t\tthis._remoteTerminalChannel.onProcessExit(e => {\n\t\t\tconst pty = this._ptys.get(e.id);\n\t\t\tif (pty) {\n\t\t\t\tpty.handleExit(e.event);\n\t\t\t\tpty.dispose();\n\t\t\t\tthis._ptys.delete(e.id);\n\t\t\t}\n\t\t});\n\n\t\tconst allowedCommands = ['_remoteCLI.openExternal', '_remoteCLI.windowOpen', '_remoteCLI.getSystemStatus', '_remoteCLI.manageExtensions'];\n\t\tthis._remoteTerminalChannel.onExecuteCommand(async e => {\n\t\t\t// Ensure this request for for this window\n\t\t\tconst pty = this._ptys.get(e.persistentProcessId);\n\t\t\tif (!pty) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst reqId = e.reqId;\n\t\t\tconst commandId = e.commandId;\n\t\t\tif (!allowedCommands.includes(commandId)) {\n\t\t\t\tthis._remoteTerminalChannel.sendCommandResult(reqId, true, 'Invalid remote cli command: ' + commandId);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst commandArgs = e.commandArgs.map(arg => revive(arg));\n\t\t\ttry {\n\t\t\t\tconst result = await this._commandService.executeCommand(e.commandId, ...commandArgs);\n\t\t\t\tthis._remoteTerminalChannel.sendCommandResult(reqId, false, result);\n\t\t\t} catch (err) {\n\t\t\t\tthis._remoteTerminalChannel.sendCommandResult(reqId, true, err);\n\t\t\t}\n\t\t});\n\n\t\tthis._onPtyHostConnected.fire();\n\t}\n\n\tasync requestDetachInstance(workspaceId: string, instanceId: number): Promise<IProcessDetails | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot request detach instance when there is no remote!`);\n\t\t}\n\t\treturn this._remoteTerminalChannel.requestDetachInstance(workspaceId, instanceId);\n\t}\n\n\tasync acceptDetachInstanceReply(requestId: number, persistentProcessId?: number): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot accept detached instance when there is no remote!`);\n\t\t} else if (!persistentProcessId) {\n\t\t\tthis._logService.warn('Cannot attach to feature terminals, custom pty terminals, or those without a persistentProcessId');\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._remoteTerminalChannel.acceptDetachInstanceReply(requestId, persistentProcessId);\n\t}\n\n\tasync persistTerminalState(): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot persist terminal state when there is no remote!`);\n\t\t}\n\t\tconst ids = Array.from(this._ptys.keys());\n\t\tconst serialized = await this._remoteTerminalChannel.serializeTerminalState(ids);\n\t\tthis._storageService.store(TerminalStorageKeys.TerminalBufferState, serialized, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\tasync createProcess(\n\t\tshellLaunchConfig: IShellLaunchConfig,\n\t\tcwd: string, // TODO: This is ignored\n\t\tcols: number,\n\t\trows: number,\n\t\tunicodeVersion: '6' | '11',\n\t\tenv: IProcessEnvironment, // TODO: This is ignored\n\t\toptions: ITerminalProcessOptions,\n\t\tshouldPersist: boolean\n\t): Promise<ITerminalChildProcess> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot create remote terminal when there is no remote!`);\n\t\t}\n\n\t\t// Fetch the environment to check shell permissions\n\t\tconst remoteEnv = await this._remoteAgentService.getEnvironment();\n\t\tif (!remoteEnv) {\n\t\t\t// Extension host processes are only allowed in remote extension hosts currently\n\t\t\tthrow new Error('Could not fetch remote environment');\n\t\t}\n\n\t\tconst terminalConfig = this._configurationService.getValue<ITerminalConfiguration>(TERMINAL_CONFIG_SECTION);\n\t\tconst configuration: ICompleteTerminalConfiguration = {\n\t\t\t'terminal.integrated.env.windows': this._configurationService.getValue(TerminalSettingId.EnvWindows) as ITerminalEnvironment,\n\t\t\t'terminal.integrated.env.osx': this._configurationService.getValue(TerminalSettingId.EnvMacOs) as ITerminalEnvironment,\n\t\t\t'terminal.integrated.env.linux': this._configurationService.getValue(TerminalSettingId.EnvLinux) as ITerminalEnvironment,\n\t\t\t'terminal.integrated.cwd': this._configurationService.getValue(TerminalSettingId.Cwd) as string,\n\t\t\t'terminal.integrated.detectLocale': terminalConfig.detectLocale\n\t\t};\n\n\t\tconst shellLaunchConfigDto: IShellLaunchConfigDto = {\n\t\t\tname: shellLaunchConfig.name,\n\t\t\texecutable: shellLaunchConfig.executable,\n\t\t\targs: shellLaunchConfig.args,\n\t\t\tcwd: shellLaunchConfig.cwd,\n\t\t\tenv: shellLaunchConfig.env,\n\t\t\tuseShellEnvironment: shellLaunchConfig.useShellEnvironment,\n\t\t\treconnectionProperties: shellLaunchConfig.reconnectionProperties,\n\t\t\ttype: shellLaunchConfig.type,\n\t\t\tisFeatureTerminal: shellLaunchConfig.isFeatureTerminal,\n\t\t\ttabActions: shellLaunchConfig.tabActions,\n\t\t\tshellIntegrationEnvironmentReporting: shellLaunchConfig.shellIntegrationEnvironmentReporting,\n\t\t};\n\t\tconst activeWorkspaceRootUri = this._historyService.getLastActiveWorkspaceRoot();\n\n\t\tconst result = await this._remoteTerminalChannel.createProcess(\n\t\t\tshellLaunchConfigDto,\n\t\t\tconfiguration,\n\t\t\tactiveWorkspaceRootUri,\n\t\t\toptions,\n\t\t\tshouldPersist,\n\t\t\tcols,\n\t\t\trows,\n\t\t\tunicodeVersion\n\t\t);\n\t\tconst pty = this._instantiationService.createInstance(RemotePty, result.persistentTerminalId, shouldPersist, this._remoteTerminalChannel);\n\t\tthis._ptys.set(result.persistentTerminalId, pty);\n\t\treturn pty;\n\t}\n\n\tasync attachToProcess(id: number): Promise<ITerminalChildProcess | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot create remote terminal when there is no remote!`);\n\t\t}\n\n\t\ttry {\n\t\t\tawait this._remoteTerminalChannel.attachToProcess(id);\n\t\t\tconst pty = this._instantiationService.createInstance(RemotePty, id, true, this._remoteTerminalChannel);\n\t\t\tthis._ptys.set(id, pty);\n\t\t\treturn pty;\n\t\t} catch (e) {\n\t\t\tthis._logService.trace(`Couldn't attach to process ${e.message}`);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync attachToRevivedProcess(id: number): Promise<ITerminalChildProcess | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot create remote terminal when there is no remote!`);\n\t\t}\n\n\t\ttry {\n\t\t\tconst newId = await this._remoteTerminalChannel.getRevivedPtyNewId(id) ?? id;\n\t\t\treturn await this.attachToProcess(newId);\n\t\t} catch (e) {\n\t\t\tthis._logService.trace(`Couldn't attach to process ${e.message}`);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync listProcesses(): Promise<IProcessDetails[]> {\n\t\treturn this._remoteTerminalChannel.listProcesses();\n\t}\n\n\tasync getLatency(): Promise<IPtyHostLatencyMeasurement[]> {\n\t\tconst sw = new StopWatch();\n\t\tconst results = await this._remoteTerminalChannel.getLatency();\n\t\tsw.stop();\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: 'window<->ptyhostservice<->ptyhost',\n\t\t\t\tlatency: sw.elapsed()\n\t\t\t},\n\t\t\t...results\n\t\t];\n\t}\n\n\tasync updateProperty<T extends ProcessPropertyType>(id: number, property: T, value: IProcessPropertyMap[T]): Promise<void> {\n\t\tawait this._remoteTerminalChannel.updateProperty(id, property, value);\n\t}\n\n\tasync updateTitle(id: number, title: string, titleSource: TitleEventSource): Promise<void> {\n\t\tawait this._remoteTerminalChannel.updateTitle(id, title, titleSource);\n\t}\n\n\tasync updateIcon(id: number, userInitiated: boolean, icon: TerminalIcon, color?: string): Promise<void> {\n\t\tawait this._remoteTerminalChannel.updateIcon(id, userInitiated, icon, color);\n\t}\n\n\tasync setNextCommandId(id: number, commandLine: string, commandId: string): Promise<void> {\n\t\tawait this._remoteTerminalChannel.setNextCommandId(id, commandLine, commandId);\n\t}\n\n\tasync getDefaultSystemShell(osOverride?: OperatingSystem): Promise<string> {\n\t\treturn this._remoteTerminalChannel.getDefaultSystemShell(osOverride) || '';\n\t}\n\n\tasync getProfiles(profiles: unknown, defaultProfile: unknown, includeDetectedProfiles?: boolean): Promise<ITerminalProfile[]> {\n\t\treturn this._remoteTerminalChannel.getProfiles(profiles, defaultProfile, includeDetectedProfiles) || [];\n\t}\n\n\tasync getEnvironment(): Promise<IProcessEnvironment> {\n\t\treturn this._remoteTerminalChannel.getEnvironment() || {};\n\t}\n\n\tasync getShellEnvironment(): Promise<IProcessEnvironment | undefined> {\n\t\tconst connection = this._remoteAgentService.getConnection();\n\t\tif (!connection) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst resolverResult = await this._remoteAuthorityResolverService.resolveAuthority(connection.remoteAuthority);\n\t\tconst envResult: IProcessEnvironment = {};\n\t\tif (resolverResult.options?.extensionHostEnv) {\n\t\t\tfor (const [key, value] of Object.entries(resolverResult.options.extensionHostEnv)) {\n\t\t\t\tif (value !== null) {\n\t\t\t\t\tenvResult[key] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn envResult;\n\t}\n\n\tasync getWslPath(original: string, direction: 'unix-to-win' | 'win-to-unix'): Promise<string> {\n\t\tconst env = await this._remoteAgentService.getEnvironment();\n\t\tif (env?.os !== OperatingSystem.Windows) {\n\t\t\treturn original;\n\t\t}\n\t\treturn this._remoteTerminalChannel.getWslPath(original, direction) || original;\n\t}\n\n\tasync setTerminalLayoutInfo(layout?: ITerminalsLayoutInfoById): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot call setActiveInstanceId when there is no remote`);\n\t\t}\n\n\t\treturn this._remoteTerminalChannel.setTerminalLayoutInfo(layout);\n\t}\n\n\tasync reduceConnectionGraceTime(): Promise<void> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error('Cannot reduce grace time when there is no remote');\n\t\t}\n\t\treturn this._remoteTerminalChannel.reduceConnectionGraceTime();\n\t}\n\n\tasync getTerminalLayoutInfo(): Promise<ITerminalsLayoutInfo | undefined> {\n\t\tif (!this._remoteTerminalChannel) {\n\t\t\tthrow new Error(`Cannot call getActiveInstanceId when there is no remote`);\n\t\t}\n\n\t\tconst workspaceId = this._getWorkspaceId();\n\n\t\t// Revive processes if needed\n\t\tconst serializedState = this._storageService.get(TerminalStorageKeys.TerminalBufferState, StorageScope.WORKSPACE);\n\t\tconst reviveBufferState = this._deserializeTerminalState(serializedState);\n\t\tif (reviveBufferState && reviveBufferState.length > 0) {\n\t\t\ttry {\n\t\t\t\t// Note that remote terminals do not get their environment re-resolved unlike in local terminals\n\n\t\t\t\tmark('code/terminal/willReviveTerminalProcessesRemote');\n\t\t\t\tawait this._remoteTerminalChannel.reviveTerminalProcesses(workspaceId, reviveBufferState, Intl.DateTimeFormat().resolvedOptions().locale);\n\t\t\t\tmark('code/terminal/didReviveTerminalProcessesRemote');\n\t\t\t\tthis._storageService.remove(TerminalStorageKeys.TerminalBufferState, StorageScope.WORKSPACE);\n\t\t\t\t// If reviving processes, send the terminal layout info back to the pty host as it\n\t\t\t\t// will not have been persisted on application exit\n\t\t\t\tconst layoutInfo = this._storageService.get(TerminalStorageKeys.TerminalLayoutInfo, StorageScope.WORKSPACE);\n\t\t\t\tif (layoutInfo) {\n\t\t\t\t\tmark('code/terminal/willSetTerminalLayoutInfoRemote');\n\t\t\t\t\tawait this._remoteTerminalChannel.setTerminalLayoutInfo(JSON.parse(layoutInfo));\n\t\t\t\t\tmark('code/terminal/didSetTerminalLayoutInfoRemote');\n\t\t\t\t\tthis._storageService.remove(TerminalStorageKeys.TerminalLayoutInfo, StorageScope.WORKSPACE);\n\t\t\t\t}\n\t\t\t} catch (e: unknown) {\n\t\t\t\tthis._logService.warn('RemoteTerminalBackend#getTerminalLayoutInfo Error', (<{ message?: string }>e).message ?? e);\n\t\t\t}\n\t\t}\n\n\t\treturn this._remoteTerminalChannel.getTerminalLayoutInfo();\n\t}\n\n\tasync getPerformanceMarks(): Promise<PerformanceMark[]> {\n\t\treturn this._remoteTerminalChannel.getPerformanceMarks();\n\t}\n\n\tinstallAutoReply(match: string, reply: string): Promise<void> {\n\t\treturn this._remoteTerminalChannel.installAutoReply(match, reply);\n\t}\n\n\tuninstallAllAutoReplies(): Promise<void> {\n\t\treturn this._remoteTerminalChannel.uninstallAllAutoReplies();\n\t}\n}\n"]}