{"version":3,"sources":["vs/workbench/contrib/terminal/browser/terminalTooltip.ts"],"names":[],"mappings":"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","file":"terminalTooltip.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { ITerminalInstance } from './terminal.js';\nimport { asArray } from '../../../../base/common/arrays.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport type { IHoverAction } from '../../../../base/browser/ui/hover/hover.js';\nimport { TerminalCapability } from '../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { TerminalStatus } from './terminalStatusList.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { StorageScope, StorageTarget, type IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { TerminalStorageKeys } from '../common/terminalStorageKeys.js';\nimport type { ITerminalStatusHoverAction } from '../common/terminal.js';\nimport { basename } from '../../../../base/common/path.js';\n\nexport function getInstanceHoverInfo(instance: ITerminalInstance, storageService: IStorageService): { content: MarkdownString; actions: IHoverAction[] } {\n\tconst showDetailed = parseInt(storageService.get(TerminalStorageKeys.TabsShowDetailed, StorageScope.APPLICATION) ?? '0');\n\tlet statusString = '';\n\tconst statuses = instance.statusList.statuses;\n\tconst actions: ITerminalStatusHoverAction[] = [];\n\tfor (const status of statuses) {\n\t\tif (showDetailed) {\n\t\t\tif (status.detailedTooltip ?? status.tooltip) {\n\t\t\t\tstatusString += `\\n\\n---\\n\\n${status.icon ? `$(${status.icon?.id}) ` : ''}` + (status.detailedTooltip ?? status.tooltip ?? '');\n\t\t\t}\n\t\t} else {\n\t\t\tif (status.tooltip) {\n\t\t\t\tstatusString += `\\n\\n---\\n\\n${status.icon ? `$(${status.icon?.id}) ` : ''}` + (status.tooltip ?? '');\n\t\t\t}\n\t\t}\n\t\tif (status.hoverActions) {\n\t\t\tactions.push(...status.hoverActions);\n\t\t}\n\t}\n\tactions.push({\n\t\tcommandId: 'toggleDetailedInfo',\n\t\tlabel: showDetailed ? localize('hideDetails', 'Hide Details') : localize('showDetails', 'Show Details'),\n\t\trun() {\n\t\t\tstorageService.store(TerminalStorageKeys.TabsShowDetailed, (showDetailed + 1) % 2, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t},\n\t});\n\n\tconst shellProcessString = getShellProcessTooltip(instance, !!showDetailed);\n\tconst content = new MarkdownString(instance.title + shellProcessString + statusString, { supportThemeIcons: true });\n\n\treturn { content, actions };\n}\n\nexport function getShellProcessTooltip(instance: ITerminalInstance, showDetailed: boolean): string {\n\tconst lines: string[] = [];\n\n\tif (instance.processId && instance.processId > 0) {\n\t\tlines.push(localize({ key: 'shellProcessTooltip.processId', comment: ['The first arg is \"PID\" which shouldn\\'t be translated'] }, \"Process ID ({0}): {1}\", 'PID', instance.processId) + '\\n');\n\t}\n\n\tif (instance.shellLaunchConfig.executable) {\n\t\tlet commandLine = '';\n\t\tif (!showDetailed && instance.shellLaunchConfig.executable.length > 32) {\n\t\t\tconst base = basename(instance.shellLaunchConfig.executable);\n\t\t\tconst sepIndex = instance.shellLaunchConfig.executable.length - base.length - 1;\n\t\t\tconst sep = instance.shellLaunchConfig.executable.substring(sepIndex, sepIndex + 1);\n\t\t\tcommandLine += `â€¦${sep}${base}`;\n\t\t} else {\n\t\t\tcommandLine += instance.shellLaunchConfig.executable;\n\t\t}\n\t\tconst args = asArray(instance.injectedArgs || instance.shellLaunchConfig.args || []).map(x => x.match(/\\s/) ? `'${x}'` : x).join(' ');\n\t\tif (args) {\n\t\t\tcommandLine += ` ${args}`;\n\t\t}\n\n\t\tlines.push(localize('shellProcessTooltip.commandLine', 'Command line: {0}', commandLine));\n\t}\n\n\treturn lines.length ? `\\n\\n---\\n\\n${lines.join('\\n')}` : '';\n}\n\nexport function refreshShellIntegrationInfoStatus(instance: ITerminalInstance) {\n\tif (!instance.xterm) {\n\t\treturn;\n\t}\n\tconst cmdDetectionType = (\n\t\tinstance.capabilities.get(TerminalCapability.CommandDetection)?.hasRichCommandDetection\n\t\t\t? localize('shellIntegration.rich', 'Rich')\n\t\t\t: instance.capabilities.has(TerminalCapability.CommandDetection)\n\t\t\t\t? localize('shellIntegration.basic', 'Basic')\n\t\t\t\t: instance.usedShellIntegrationInjection\n\t\t\t\t\t? localize('shellIntegration.injectionFailed', \"Injection failed to activate\")\n\t\t\t\t\t: localize('shellIntegration.no', 'No')\n\t);\n\n\tconst detailedAdditions: string[] = [];\n\tif (instance.shellType) {\n\t\tdetailedAdditions.push(`Shell type: \\`${instance.shellType}\\``);\n\t}\n\tconst cwd = instance.cwd;\n\tif (cwd) {\n\t\tdetailedAdditions.push(`Current working directory: \\`${cwd}\\``);\n\t}\n\tconst seenSequences = Array.from(instance.xterm.shellIntegration.seenSequences);\n\tif (seenSequences.length > 0) {\n\t\tdetailedAdditions.push(`Seen sequences: ${seenSequences.map(e => `\\`${e}\\``).join(', ')}`);\n\t}\n\tconst promptType = instance.capabilities.get(TerminalCapability.PromptTypeDetection)?.promptType;\n\tif (promptType) {\n\t\tdetailedAdditions.push(`Prompt type: \\`${promptType}\\``);\n\t}\n\tconst combinedString = instance.capabilities.get(TerminalCapability.CommandDetection)?.promptInputModel.getCombinedString();\n\tif (combinedString !== undefined) {\n\t\tdetailedAdditions.push(`Prompt input: \\`\\`\\`${combinedString}\\`\\`\\``);\n\t}\n\tconst detailedAdditionsString = detailedAdditions.length > 0\n\t\t? '\\n\\n' + detailedAdditions.map(e => `- ${e}`).join('\\n')\n\t\t: '';\n\n\tinstance.statusList.add({\n\t\tid: TerminalStatus.ShellIntegrationInfo,\n\t\tseverity: Severity.Info,\n\t\ttooltip: `${localize('shellIntegration', \"Shell integration\")}: ${cmdDetectionType}`,\n\t\tdetailedTooltip: `${localize('shellIntegration', \"Shell integration\")}: ${cmdDetectionType}${detailedAdditionsString}`\n\t});\n}\n"]}