{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/browser/terminalEditorSerializer.ts","vs/workbench/contrib/terminal/browser/terminalEditorSerializer.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,kCAAkC,CAAC;AAItE,OAAO,EAAkC,sBAAsB,EAA4D,MAAM,eAAe,CAAC;AAG1I,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;IACnC,YAC0C,sBAA8C;QAA9C,2BAAsB,GAAtB,sBAAsB,CAAwB;IACpF,CAAC;IAEE,YAAY,CAAC,WAAgC;QACnD,OAAO,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,IAAI,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC;IAClH,CAAC;IAEM,SAAS,CAAC,WAAgC;QAChD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,EAAE,CAAC;YACrC,OAAO;QACR,CAAC;QACD,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC,CAAC;IACnE,CAAC;IAEM,WAAW,CAAC,oBAA2C,EAAE,qBAA6B;QAC5F,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAY,CAAC;QACjE,IAAI,CAAC,iCAAiC,CAAC,WAAW,CAAC,EAAE,CAAC;YACrD,MAAM,IAAI,KAAK,CAAC,2CAA2C,WAAW,EAAE,CAAC,CAAC;QAC3E,CAAC;QACD,OAAO,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;IAC7D,CAAC;IAEO,OAAO,CAAC,QAA2B;QAC1C,OAAO;YACN,EAAE,EAAE,QAAQ,CAAC,mBAAoB;YACjC,GAAG,EAAE,QAAQ,CAAC,SAAS,IAAI,CAAC;YAC5B,KAAK,EAAE,QAAQ,CAAC,KAAK;YACrB,WAAW,EAAE,QAAQ,CAAC,WAAW;YACjC,GAAG,EAAE,EAAE;YACP,IAAI,EAAE,QAAQ,CAAC,IAAI;YACnB,KAAK,EAAE,QAAQ,CAAC,KAAK;YACrB,iBAAiB,EAAE,QAAQ,CAAC,iBAAiB;YAC7C,iBAAiB,EAAE,QAAQ,CAAC,iBAAiB,CAAC,iBAAiB;YAC/D,YAAY,EAAE,QAAQ,CAAC,iBAAiB,CAAC,YAAY;YACrD,sBAAsB,EAAE,QAAQ,CAAC,iBAAiB,CAAC,sBAAsB;YACzE,qBAAqB,EAAE,QAAQ,CAAC,qBAAqB;SACrD,CAAC;IACH,CAAC;CACD,CAAA;AAxCY,uBAAuB;IAEjC,WAAA,sBAAsB,CAAA;GAFZ,uBAAuB,CAwCnC;;AAED,SAAS,iCAAiC,CAAC,GAAY;IACtD,OAAO,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,GAAG,IAAI,KAAK,IAAI,GAAG,CAAC;AACrD,CAAC","file":"terminalEditorSerializer.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isNumber, isObject } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorSerializer } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { ISerializedTerminalEditorInput, ITerminalEditorService, ITerminalInstance, type IDeserializedTerminalEditorInput } from './terminal.js';\nimport { TerminalEditorInput } from './terminalEditorInput.js';\n\nexport class TerminalInputSerializer implements IEditorSerializer {\n\tconstructor(\n\t\t@ITerminalEditorService private readonly _terminalEditorService: ITerminalEditorService\n\t) { }\n\n\tpublic canSerialize(editorInput: TerminalEditorInput): editorInput is TerminalEditorInput & { readonly terminalInstance: ITerminalInstance } {\n\t\treturn isNumber(editorInput.terminalInstance?.persistentProcessId) && editorInput.terminalInstance.shouldPersist;\n\t}\n\n\tpublic serialize(editorInput: TerminalEditorInput): string | undefined {\n\t\tif (!this.canSerialize(editorInput)) {\n\t\t\treturn;\n\t\t}\n\t\treturn JSON.stringify(this._toJson(editorInput.terminalInstance));\n\t}\n\n\tpublic deserialize(instantiationService: IInstantiationService, serializedEditorInput: string): EditorInput | undefined {\n\t\tconst editorInput = JSON.parse(serializedEditorInput) as unknown;\n\t\tif (!isDeserializedTerminalEditorInput(editorInput)) {\n\t\t\tthrow new Error(`Could not revive terminal editor input, ${editorInput}`);\n\t\t}\n\t\treturn this._terminalEditorService.reviveInput(editorInput);\n\t}\n\n\tprivate _toJson(instance: ITerminalInstance): ISerializedTerminalEditorInput {\n\t\treturn {\n\t\t\tid: instance.persistentProcessId!,\n\t\t\tpid: instance.processId || 0,\n\t\t\ttitle: instance.title,\n\t\t\ttitleSource: instance.titleSource,\n\t\t\tcwd: '',\n\t\t\ticon: instance.icon,\n\t\t\tcolor: instance.color,\n\t\t\thasChildProcesses: instance.hasChildProcesses,\n\t\t\tisFeatureTerminal: instance.shellLaunchConfig.isFeatureTerminal,\n\t\t\thideFromUser: instance.shellLaunchConfig.hideFromUser,\n\t\t\treconnectionProperties: instance.shellLaunchConfig.reconnectionProperties,\n\t\t\tshellIntegrationNonce: instance.shellIntegrationNonce\n\t\t};\n\t}\n}\n\nfunction isDeserializedTerminalEditorInput(obj: unknown): obj is IDeserializedTerminalEditorInput {\n\treturn isObject(obj) && 'id' in obj && 'pid' in obj;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isNumber, isObject } from '../../../../base/common/types.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorSerializer } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { ISerializedTerminalEditorInput, ITerminalEditorService, ITerminalInstance, type IDeserializedTerminalEditorInput } from './terminal.js';\nimport { TerminalEditorInput } from './terminalEditorInput.js';\n\nexport class TerminalInputSerializer implements IEditorSerializer {\n\tconstructor(\n\t\t@ITerminalEditorService private readonly _terminalEditorService: ITerminalEditorService\n\t) { }\n\n\tpublic canSerialize(editorInput: TerminalEditorInput): editorInput is TerminalEditorInput & { readonly terminalInstance: ITerminalInstance } {\n\t\treturn isNumber(editorInput.terminalInstance?.persistentProcessId) && editorInput.terminalInstance.shouldPersist;\n\t}\n\n\tpublic serialize(editorInput: TerminalEditorInput): string | undefined {\n\t\tif (!this.canSerialize(editorInput)) {\n\t\t\treturn;\n\t\t}\n\t\treturn JSON.stringify(this._toJson(editorInput.terminalInstance));\n\t}\n\n\tpublic deserialize(instantiationService: IInstantiationService, serializedEditorInput: string): EditorInput | undefined {\n\t\tconst editorInput = JSON.parse(serializedEditorInput) as unknown;\n\t\tif (!isDeserializedTerminalEditorInput(editorInput)) {\n\t\t\tthrow new Error(`Could not revive terminal editor input, ${editorInput}`);\n\t\t}\n\t\treturn this._terminalEditorService.reviveInput(editorInput);\n\t}\n\n\tprivate _toJson(instance: ITerminalInstance): ISerializedTerminalEditorInput {\n\t\treturn {\n\t\t\tid: instance.persistentProcessId!,\n\t\t\tpid: instance.processId || 0,\n\t\t\ttitle: instance.title,\n\t\t\ttitleSource: instance.titleSource,\n\t\t\tcwd: '',\n\t\t\ticon: instance.icon,\n\t\t\tcolor: instance.color,\n\t\t\thasChildProcesses: instance.hasChildProcesses,\n\t\t\tisFeatureTerminal: instance.shellLaunchConfig.isFeatureTerminal,\n\t\t\thideFromUser: instance.shellLaunchConfig.hideFromUser,\n\t\t\treconnectionProperties: instance.shellLaunchConfig.reconnectionProperties,\n\t\t\tshellIntegrationNonce: instance.shellIntegrationNonce\n\t\t};\n\t}\n}\n\nfunction isDeserializedTerminalEditorInput(obj: unknown): obj is IDeserializedTerminalEditorInput {\n\treturn isObject(obj) && 'id' in obj && 'pid' in obj;\n}\n"]}