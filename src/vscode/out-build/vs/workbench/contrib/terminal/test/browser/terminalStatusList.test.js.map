{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/test/browser/terminalStatusList.test.ts","vs/workbench/contrib/terminal/test/browser/terminalStatusList.test.ts"],"names":[],"mappings":"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","file":"terminalStatusList.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual, strictEqual } from 'assert';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport Severity from '../../../../../base/common/severity.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { spinningLoading } from '../../../../../platform/theme/common/iconRegistry.js';\nimport { TerminalStatusList } from '../../browser/terminalStatusList.js';\nimport { ITerminalStatus } from '../../common/terminal.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nfunction statusesEqual(list: TerminalStatusList, expected: [string, Severity][]) {\n\tdeepStrictEqual(list.statuses.map(e => [e.id, e.severity]), expected);\n}\n\nsuite('Workbench - TerminalStatusList', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet list: TerminalStatusList;\n\n\tsetup(() => {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, store);\n\t\tlist = store.add(instantiationService.createInstance(TerminalStatusList));\n\t});\n\n\ttest('primary', () => {\n\t\tstrictEqual(list.primary?.id, undefined);\n\t\tlist.add({ id: 'info1', severity: Severity.Info });\n\t\tstrictEqual(list.primary?.id, 'info1');\n\t\tlist.add({ id: 'warning1', severity: Severity.Warning });\n\t\tstrictEqual(list.primary?.id, 'warning1');\n\t\tlist.add({ id: 'info2', severity: Severity.Info });\n\t\tstrictEqual(list.primary?.id, 'warning1');\n\t\tlist.add({ id: 'warning2', severity: Severity.Warning });\n\t\tstrictEqual(list.primary?.id, 'warning2');\n\t\tlist.add({ id: 'info3', severity: Severity.Info });\n\t\tstrictEqual(list.primary?.id, 'warning2');\n\t\tlist.add({ id: 'error1', severity: Severity.Error });\n\t\tstrictEqual(list.primary?.id, 'error1');\n\t\tlist.add({ id: 'warning3', severity: Severity.Warning });\n\t\tstrictEqual(list.primary?.id, 'error1');\n\t\tlist.add({ id: 'error2', severity: Severity.Error });\n\t\tstrictEqual(list.primary?.id, 'error2');\n\t\tlist.remove('error1');\n\t\tstrictEqual(list.primary?.id, 'error2');\n\t\tlist.remove('error2');\n\t\tstrictEqual(list.primary?.id, 'warning3');\n\t});\n\n\ttest('statuses', () => {\n\t\tstrictEqual(list.statuses.length, 0);\n\t\tlist.add({ id: 'info', severity: Severity.Info });\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tlist.add({ id: 'error', severity: Severity.Error });\n\t\tstrictEqual(list.statuses.length, 3);\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning],\n\t\t\t['error', Severity.Error],\n\t\t]);\n\t\tlist.remove('info');\n\t\tlist.remove('warning');\n\t\tlist.remove('error');\n\t\tstrictEqual(list.statuses.length, 0);\n\t});\n\n\ttest('onDidAddStatus', async () => {\n\t\tconst result = await new Promise<ITerminalStatus>(r => {\n\t\t\tstore.add(list.onDidAddStatus(r));\n\t\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\t});\n\t\tdeepStrictEqual(result, { id: 'test', severity: Severity.Info });\n\t});\n\n\ttest('onDidRemoveStatus', async () => {\n\t\tconst result = await new Promise<ITerminalStatus>(r => {\n\t\t\tstore.add(list.onDidRemoveStatus(r));\n\t\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\t\tlist.remove('test');\n\t\t});\n\t\tdeepStrictEqual(result, { id: 'test', severity: Severity.Info });\n\t});\n\n\ttest('onDidChangePrimaryStatus', async () => {\n\t\tconst result = await new Promise<ITerminalStatus | undefined>(r => {\n\t\t\tstore.add(list.onDidChangePrimaryStatus(r));\n\t\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\t});\n\t\tdeepStrictEqual(result, { id: 'test', severity: Severity.Info });\n\t});\n\n\ttest('primary is not updated to status without an icon', async () => {\n\t\tlist.add({ id: 'test', severity: Severity.Info, icon: Codicon.check });\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tdeepStrictEqual(list.primary, { id: 'test', severity: Severity.Info, icon: Codicon.check });\n\t});\n\n\ttest('add', () => {\n\t\tstatusesEqual(list, []);\n\t\tlist.add({ id: 'info', severity: Severity.Info });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info]\n\t\t]);\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning]\n\t\t]);\n\t\tlist.add({ id: 'error', severity: Severity.Error });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning],\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t});\n\n\ttest('add should remove animation', () => {\n\t\tstatusesEqual(list, []);\n\t\tlist.add({ id: 'info', severity: Severity.Info, icon: spinningLoading });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info]\n\t\t]);\n\t\tstrictEqual(list.statuses[0].icon!.id, Codicon.play.id, 'loading~spin should be converted to play');\n\t\tlist.add({ id: 'warning', severity: Severity.Warning, icon: ThemeIcon.modify(Codicon.zap, 'spin') });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning]\n\t\t]);\n\t\tstrictEqual(list.statuses[1].icon!.id, Codicon.zap.id, 'zap~spin should have animation removed only');\n\t});\n\n\ttest('add should fire onDidRemoveStatus if same status id with a different object reference was added', () => {\n\t\tconst eventCalls: string[] = [];\n\t\tstore.add(list.onDidAddStatus(() => eventCalls.push('add')));\n\t\tstore.add(list.onDidRemoveStatus(() => eventCalls.push('remove')));\n\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\tdeepStrictEqual(eventCalls, [\n\t\t\t'add',\n\t\t\t'remove',\n\t\t\t'add'\n\t\t]);\n\t});\n\n\ttest('remove', () => {\n\t\tlist.add({ id: 'info', severity: Severity.Info });\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tlist.add({ id: 'error', severity: Severity.Error });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning],\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t\tlist.remove('warning');\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t\tlist.remove('info');\n\t\tstatusesEqual(list, [\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t\tlist.remove('error');\n\t\tstatusesEqual(list, []);\n\t});\n\n\ttest('toggle', () => {\n\t\tconst status = { id: 'info', severity: Severity.Info };\n\t\tlist.toggle(status, true);\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info]\n\t\t]);\n\t\tlist.toggle(status, false);\n\t\tstatusesEqual(list, []);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual, strictEqual } from 'assert';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport Severity from '../../../../../base/common/severity.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { spinningLoading } from '../../../../../platform/theme/common/iconRegistry.js';\nimport { TerminalStatusList } from '../../browser/terminalStatusList.js';\nimport { ITerminalStatus } from '../../common/terminal.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nfunction statusesEqual(list: TerminalStatusList, expected: [string, Severity][]) {\n\tdeepStrictEqual(list.statuses.map(e => [e.id, e.severity]), expected);\n}\n\nsuite('Workbench - TerminalStatusList', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet list: TerminalStatusList;\n\n\tsetup(() => {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, store);\n\t\tlist = store.add(instantiationService.createInstance(TerminalStatusList));\n\t});\n\n\ttest('primary', () => {\n\t\tstrictEqual(list.primary?.id, undefined);\n\t\tlist.add({ id: 'info1', severity: Severity.Info });\n\t\tstrictEqual(list.primary?.id, 'info1');\n\t\tlist.add({ id: 'warning1', severity: Severity.Warning });\n\t\tstrictEqual(list.primary?.id, 'warning1');\n\t\tlist.add({ id: 'info2', severity: Severity.Info });\n\t\tstrictEqual(list.primary?.id, 'warning1');\n\t\tlist.add({ id: 'warning2', severity: Severity.Warning });\n\t\tstrictEqual(list.primary?.id, 'warning2');\n\t\tlist.add({ id: 'info3', severity: Severity.Info });\n\t\tstrictEqual(list.primary?.id, 'warning2');\n\t\tlist.add({ id: 'error1', severity: Severity.Error });\n\t\tstrictEqual(list.primary?.id, 'error1');\n\t\tlist.add({ id: 'warning3', severity: Severity.Warning });\n\t\tstrictEqual(list.primary?.id, 'error1');\n\t\tlist.add({ id: 'error2', severity: Severity.Error });\n\t\tstrictEqual(list.primary?.id, 'error2');\n\t\tlist.remove('error1');\n\t\tstrictEqual(list.primary?.id, 'error2');\n\t\tlist.remove('error2');\n\t\tstrictEqual(list.primary?.id, 'warning3');\n\t});\n\n\ttest('statuses', () => {\n\t\tstrictEqual(list.statuses.length, 0);\n\t\tlist.add({ id: 'info', severity: Severity.Info });\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tlist.add({ id: 'error', severity: Severity.Error });\n\t\tstrictEqual(list.statuses.length, 3);\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning],\n\t\t\t['error', Severity.Error],\n\t\t]);\n\t\tlist.remove('info');\n\t\tlist.remove('warning');\n\t\tlist.remove('error');\n\t\tstrictEqual(list.statuses.length, 0);\n\t});\n\n\ttest('onDidAddStatus', async () => {\n\t\tconst result = await new Promise<ITerminalStatus>(r => {\n\t\t\tstore.add(list.onDidAddStatus(r));\n\t\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\t});\n\t\tdeepStrictEqual(result, { id: 'test', severity: Severity.Info });\n\t});\n\n\ttest('onDidRemoveStatus', async () => {\n\t\tconst result = await new Promise<ITerminalStatus>(r => {\n\t\t\tstore.add(list.onDidRemoveStatus(r));\n\t\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\t\tlist.remove('test');\n\t\t});\n\t\tdeepStrictEqual(result, { id: 'test', severity: Severity.Info });\n\t});\n\n\ttest('onDidChangePrimaryStatus', async () => {\n\t\tconst result = await new Promise<ITerminalStatus | undefined>(r => {\n\t\t\tstore.add(list.onDidChangePrimaryStatus(r));\n\t\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\t});\n\t\tdeepStrictEqual(result, { id: 'test', severity: Severity.Info });\n\t});\n\n\ttest('primary is not updated to status without an icon', async () => {\n\t\tlist.add({ id: 'test', severity: Severity.Info, icon: Codicon.check });\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tdeepStrictEqual(list.primary, { id: 'test', severity: Severity.Info, icon: Codicon.check });\n\t});\n\n\ttest('add', () => {\n\t\tstatusesEqual(list, []);\n\t\tlist.add({ id: 'info', severity: Severity.Info });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info]\n\t\t]);\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning]\n\t\t]);\n\t\tlist.add({ id: 'error', severity: Severity.Error });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning],\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t});\n\n\ttest('add should remove animation', () => {\n\t\tstatusesEqual(list, []);\n\t\tlist.add({ id: 'info', severity: Severity.Info, icon: spinningLoading });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info]\n\t\t]);\n\t\tstrictEqual(list.statuses[0].icon!.id, Codicon.play.id, 'loading~spin should be converted to play');\n\t\tlist.add({ id: 'warning', severity: Severity.Warning, icon: ThemeIcon.modify(Codicon.zap, 'spin') });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning]\n\t\t]);\n\t\tstrictEqual(list.statuses[1].icon!.id, Codicon.zap.id, 'zap~spin should have animation removed only');\n\t});\n\n\ttest('add should fire onDidRemoveStatus if same status id with a different object reference was added', () => {\n\t\tconst eventCalls: string[] = [];\n\t\tstore.add(list.onDidAddStatus(() => eventCalls.push('add')));\n\t\tstore.add(list.onDidRemoveStatus(() => eventCalls.push('remove')));\n\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\tlist.add({ id: 'test', severity: Severity.Info });\n\t\tdeepStrictEqual(eventCalls, [\n\t\t\t'add',\n\t\t\t'remove',\n\t\t\t'add'\n\t\t]);\n\t});\n\n\ttest('remove', () => {\n\t\tlist.add({ id: 'info', severity: Severity.Info });\n\t\tlist.add({ id: 'warning', severity: Severity.Warning });\n\t\tlist.add({ id: 'error', severity: Severity.Error });\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['warning', Severity.Warning],\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t\tlist.remove('warning');\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info],\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t\tlist.remove('info');\n\t\tstatusesEqual(list, [\n\t\t\t['error', Severity.Error]\n\t\t]);\n\t\tlist.remove('error');\n\t\tstatusesEqual(list, []);\n\t});\n\n\ttest('toggle', () => {\n\t\tconst status = { id: 'info', severity: Severity.Info };\n\t\tlist.toggle(status, true);\n\t\tstatusesEqual(list, [\n\t\t\t['info', Severity.Info]\n\t\t]);\n\t\tlist.toggle(status, false);\n\t\tstatusesEqual(list, []);\n\t});\n});\n"]}