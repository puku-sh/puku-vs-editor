{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/test/browser/xterm/decorationAddon.test.ts","vs/workbench/contrib/terminal/test/browser/xterm/decorationAddon.test.ts"],"names":[],"mappings":"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","file":"decorationAddon.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IDecoration, IDecorationOptions, Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { notEqual, strictEqual, throws } from 'assert';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ITerminalCommand, TerminalCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { CommandDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/commandDetectionCapability.js';\nimport { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { DecorationAddon } from '../../../browser/xterm/decorationAddon.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\n\nsuite('DecorationAddon', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet decorationAddon: DecorationAddon;\n\tlet xterm: RawXtermTerminal;\n\n\tsetup(async () => {\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\tclass TestTerminal extends TerminalCtor {\n\t\t\toverride registerDecoration(decorationOptions: IDecorationOptions): IDecoration | undefined {\n\t\t\t\tif (decorationOptions.marker.isDisposed) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\tconst element = document.createElement('div');\n\t\t\t\treturn { marker: decorationOptions.marker, element, onDispose: () => { }, isDisposed: false, dispose: () => { }, onRender: (element: HTMLElement) => { return element; } } as unknown as IDecoration;\n\t\t\t}\n\t\t}\n\n\t\tconst instantiationService = workbenchInstantiationService({\n\t\t\tconfigurationService: () => new TestConfigurationService({\n\t\t\t\tfiles: {},\n\t\t\t\tworkbench: {\n\t\t\t\t\thover: { delay: 5 },\n\t\t\t\t},\n\t\t\t\tterminal: {\n\t\t\t\t\tintegrated: {\n\t\t\t\t\t\tshellIntegration: {\n\t\t\t\t\t\t\tdecorationsEnabled: 'both'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}, store);\n\t\txterm = store.add(new TestTerminal({\n\t\t\tallowProposedApi: true,\n\t\t\tcols: 80,\n\t\t\trows: 30\n\t\t}));\n\t\tconst capabilities = store.add(new TerminalCapabilityStore());\n\t\tcapabilities.add(TerminalCapability.CommandDetection, store.add(instantiationService.createInstance(CommandDetectionCapability, xterm)));\n\t\tdecorationAddon = store.add(instantiationService.createInstance(DecorationAddon, undefined, capabilities));\n\t\txterm.loadAddon(decorationAddon);\n\t});\n\n\tsuite('registerDecoration', () => {\n\t\ttest('should throw when command has no marker', async () => {\n\t\t\tthrows(() => decorationAddon.registerCommandDecoration({ command: 'cd src', timestamp: Date.now(), hasOutput: () => false } as ITerminalCommand));\n\t\t});\n\t\ttest('should return undefined when marker has been disposed of', async () => {\n\t\t\tconst marker = xterm.registerMarker(1);\n\t\t\tmarker?.dispose();\n\t\t\tstrictEqual(decorationAddon.registerCommandDecoration({ command: 'cd src', marker, timestamp: Date.now(), hasOutput: () => false } as ITerminalCommand), undefined);\n\t\t});\n\t\ttest('should return decoration when marker has not been disposed of', async () => {\n\t\t\tconst marker = xterm.registerMarker(2);\n\t\t\tnotEqual(decorationAddon.registerCommandDecoration({ command: 'cd src', marker, timestamp: Date.now(), hasOutput: () => false } as ITerminalCommand), undefined);\n\t\t});\n\t\ttest('should return decoration with mark properties', async () => {\n\t\t\tconst marker = xterm.registerMarker(2);\n\t\t\tnotEqual(decorationAddon.registerCommandDecoration(undefined, undefined, { marker }), undefined);\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IDecoration, IDecorationOptions, Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { notEqual, strictEqual, throws } from 'assert';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ITerminalCommand, TerminalCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { CommandDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/commandDetectionCapability.js';\nimport { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { DecorationAddon } from '../../../browser/xterm/decorationAddon.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\n\nsuite('DecorationAddon', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet decorationAddon: DecorationAddon;\n\tlet xterm: RawXtermTerminal;\n\n\tsetup(async () => {\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\tclass TestTerminal extends TerminalCtor {\n\t\t\toverride registerDecoration(decorationOptions: IDecorationOptions): IDecoration | undefined {\n\t\t\t\tif (decorationOptions.marker.isDisposed) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\tconst element = document.createElement('div');\n\t\t\t\treturn { marker: decorationOptions.marker, element, onDispose: () => { }, isDisposed: false, dispose: () => { }, onRender: (element: HTMLElement) => { return element; } } as unknown as IDecoration;\n\t\t\t}\n\t\t}\n\n\t\tconst instantiationService = workbenchInstantiationService({\n\t\t\tconfigurationService: () => new TestConfigurationService({\n\t\t\t\tfiles: {},\n\t\t\t\tworkbench: {\n\t\t\t\t\thover: { delay: 5 },\n\t\t\t\t},\n\t\t\t\tterminal: {\n\t\t\t\t\tintegrated: {\n\t\t\t\t\t\tshellIntegration: {\n\t\t\t\t\t\t\tdecorationsEnabled: 'both'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}, store);\n\t\txterm = store.add(new TestTerminal({\n\t\t\tallowProposedApi: true,\n\t\t\tcols: 80,\n\t\t\trows: 30\n\t\t}));\n\t\tconst capabilities = store.add(new TerminalCapabilityStore());\n\t\tcapabilities.add(TerminalCapability.CommandDetection, store.add(instantiationService.createInstance(CommandDetectionCapability, xterm)));\n\t\tdecorationAddon = store.add(instantiationService.createInstance(DecorationAddon, undefined, capabilities));\n\t\txterm.loadAddon(decorationAddon);\n\t});\n\n\tsuite('registerDecoration', () => {\n\t\ttest('should throw when command has no marker', async () => {\n\t\t\tthrows(() => decorationAddon.registerCommandDecoration({ command: 'cd src', timestamp: Date.now(), hasOutput: () => false } as ITerminalCommand));\n\t\t});\n\t\ttest('should return undefined when marker has been disposed of', async () => {\n\t\t\tconst marker = xterm.registerMarker(1);\n\t\t\tmarker?.dispose();\n\t\t\tstrictEqual(decorationAddon.registerCommandDecoration({ command: 'cd src', marker, timestamp: Date.now(), hasOutput: () => false } as ITerminalCommand), undefined);\n\t\t});\n\t\ttest('should return decoration when marker has not been disposed of', async () => {\n\t\t\tconst marker = xterm.registerMarker(2);\n\t\t\tnotEqual(decorationAddon.registerCommandDecoration({ command: 'cd src', marker, timestamp: Date.now(), hasOutput: () => false } as ITerminalCommand), undefined);\n\t\t});\n\t\ttest('should return decoration with mark properties', async () => {\n\t\t\tconst marker = xterm.registerMarker(2);\n\t\t\tnotEqual(decorationAddon.registerCommandDecoration(undefined, undefined, { marker }), undefined);\n\t\t});\n\t});\n});\n"]}