{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminal/common/terminalExtensionPoints.ts","vs/workbench/contrib/terminal/common/terminalExtensionPoints.ts"],"names":[],"mappings":"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","file":"terminalExtensionPoints.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as extensionsRegistry from '../../../services/extensions/common/extensionsRegistry.js';\nimport { terminalContributionsDescriptor } from './terminal.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IExtensionTerminalProfile, ITerminalCompletionProviderContribution, ITerminalContributions, ITerminalProfileContribution } from '../../../../platform/terminal/common/terminal.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { isProposedApiEnabled } from '../../../services/extensions/common/extensions.js';\nimport { isObject, isString } from '../../../../base/common/types.js';\n\n// terminal extension point\nconst terminalsExtPoint = extensionsRegistry.ExtensionsRegistry.registerExtensionPoint<ITerminalContributions>(terminalContributionsDescriptor);\n\nexport interface IExtensionTerminalCompletionProvider extends ITerminalCompletionProviderContribution {\n\textensionIdentifier: string;\n}\n\nexport interface ITerminalContributionService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly terminalProfiles: ReadonlyArray<IExtensionTerminalProfile>;\n\treadonly terminalCompletionProviders: ReadonlyArray<IExtensionTerminalCompletionProvider>;\n\treadonly onDidChangeTerminalCompletionProviders: Event<void>;\n}\n\nexport const ITerminalContributionService = createDecorator<ITerminalContributionService>('terminalContributionsService');\n\nexport class TerminalContributionService implements ITerminalContributionService {\n\tdeclare _serviceBrand: undefined;\n\n\tprivate _terminalProfiles: ReadonlyArray<IExtensionTerminalProfile> = [];\n\tget terminalProfiles() { return this._terminalProfiles; }\n\n\tprivate _terminalCompletionProviders: ReadonlyArray<IExtensionTerminalCompletionProvider> = [];\n\tget terminalCompletionProviders() { return this._terminalCompletionProviders; }\n\n\tprivate readonly _onDidChangeTerminalCompletionProviders = new Emitter<void>();\n\treadonly onDidChangeTerminalCompletionProviders = this._onDidChangeTerminalCompletionProviders.event;\n\n\tconstructor() {\n\t\tterminalsExtPoint.setHandler(contributions => {\n\t\t\tthis._terminalProfiles = contributions.map(c => {\n\t\t\t\treturn c.value?.profiles?.filter(p => hasValidTerminalIcon(p)).map(e => {\n\t\t\t\t\treturn { ...e, extensionIdentifier: c.description.identifier.value };\n\t\t\t\t}) || [];\n\t\t\t}).flat();\n\n\t\t\tthis._terminalCompletionProviders = contributions.map(c => {\n\t\t\t\tif (!isProposedApiEnabled(c.description, 'terminalCompletionProvider')) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn c.value?.completionProviders?.map(p => {\n\t\t\t\t\treturn { ...p, extensionIdentifier: c.description.identifier.value };\n\t\t\t\t}) || [];\n\t\t\t}).flat();\n\n\t\t\tthis._onDidChangeTerminalCompletionProviders.fire();\n\t\t});\n\t}\n}\n\nfunction hasValidTerminalIcon(profile: ITerminalProfileContribution): boolean {\n\tfunction isValidDarkLightIcon(obj: unknown): obj is { light: URI; dark: URI } {\n\t\treturn (\n\t\t\tisObject(obj) &&\n\t\t\t'light' in obj && URI.isUri(obj.light) &&\n\t\t\t'dark' in obj && URI.isUri(obj.dark)\n\t\t);\n\t}\n\treturn !profile.icon || (\n\t\tisString(profile.icon) ||\n\t\tURI.isUri(profile.icon) ||\n\t\tisValidDarkLightIcon(profile.icon)\n\t);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as extensionsRegistry from '../../../services/extensions/common/extensionsRegistry.js';\nimport { terminalContributionsDescriptor } from './terminal.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IExtensionTerminalProfile, ITerminalCompletionProviderContribution, ITerminalContributions, ITerminalProfileContribution } from '../../../../platform/terminal/common/terminal.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { isProposedApiEnabled } from '../../../services/extensions/common/extensions.js';\nimport { isObject, isString } from '../../../../base/common/types.js';\n\n// terminal extension point\nconst terminalsExtPoint = extensionsRegistry.ExtensionsRegistry.registerExtensionPoint<ITerminalContributions>(terminalContributionsDescriptor);\n\nexport interface IExtensionTerminalCompletionProvider extends ITerminalCompletionProviderContribution {\n\textensionIdentifier: string;\n}\n\nexport interface ITerminalContributionService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly terminalProfiles: ReadonlyArray<IExtensionTerminalProfile>;\n\treadonly terminalCompletionProviders: ReadonlyArray<IExtensionTerminalCompletionProvider>;\n\treadonly onDidChangeTerminalCompletionProviders: Event<void>;\n}\n\nexport const ITerminalContributionService = createDecorator<ITerminalContributionService>('terminalContributionsService');\n\nexport class TerminalContributionService implements ITerminalContributionService {\n\tdeclare _serviceBrand: undefined;\n\n\tprivate _terminalProfiles: ReadonlyArray<IExtensionTerminalProfile> = [];\n\tget terminalProfiles() { return this._terminalProfiles; }\n\n\tprivate _terminalCompletionProviders: ReadonlyArray<IExtensionTerminalCompletionProvider> = [];\n\tget terminalCompletionProviders() { return this._terminalCompletionProviders; }\n\n\tprivate readonly _onDidChangeTerminalCompletionProviders = new Emitter<void>();\n\treadonly onDidChangeTerminalCompletionProviders = this._onDidChangeTerminalCompletionProviders.event;\n\n\tconstructor() {\n\t\tterminalsExtPoint.setHandler(contributions => {\n\t\t\tthis._terminalProfiles = contributions.map(c => {\n\t\t\t\treturn c.value?.profiles?.filter(p => hasValidTerminalIcon(p)).map(e => {\n\t\t\t\t\treturn { ...e, extensionIdentifier: c.description.identifier.value };\n\t\t\t\t}) || [];\n\t\t\t}).flat();\n\n\t\t\tthis._terminalCompletionProviders = contributions.map(c => {\n\t\t\t\tif (!isProposedApiEnabled(c.description, 'terminalCompletionProvider')) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn c.value?.completionProviders?.map(p => {\n\t\t\t\t\treturn { ...p, extensionIdentifier: c.description.identifier.value };\n\t\t\t\t}) || [];\n\t\t\t}).flat();\n\n\t\t\tthis._onDidChangeTerminalCompletionProviders.fire();\n\t\t});\n\t}\n}\n\nfunction hasValidTerminalIcon(profile: ITerminalProfileContribution): boolean {\n\tfunction isValidDarkLightIcon(obj: unknown): obj is { light: URI; dark: URI } {\n\t\treturn (\n\t\t\tisObject(obj) &&\n\t\t\t'light' in obj && URI.isUri(obj.light) &&\n\t\t\t'dark' in obj && URI.isUri(obj.dark)\n\t\t);\n\t}\n\treturn !profile.icon || (\n\t\tisString(profile.icon) ||\n\t\tURI.isUri(profile.icon) ||\n\t\tisValidDarkLightIcon(profile.icon)\n\t);\n}\n"]}