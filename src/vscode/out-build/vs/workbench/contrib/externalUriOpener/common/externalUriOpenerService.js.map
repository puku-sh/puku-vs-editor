{"version":3,"sources":["vs/workbench/contrib/externalUriOpener/common/externalUriOpenerService.ts"],"names":[],"mappings":"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","file":"externalUriOpenerService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IExternalOpener, IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { defaultExternalUriOpenerId, ExternalUriOpenersConfiguration, externalUriOpenersSettingId } from './configuration.js';\nimport { testUrlMatchesGlob } from '../../url/common/urlGlob.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\n\n\nexport const IExternalUriOpenerService = createDecorator<IExternalUriOpenerService>('externalUriOpenerService');\n\n\nexport interface IExternalOpenerProvider {\n\tgetOpeners(targetUri: URI): AsyncIterable<IExternalUriOpener>;\n}\n\nexport interface IExternalUriOpener {\n\treadonly id: string;\n\treadonly label: string;\n\n\tcanOpen(uri: URI, token: CancellationToken): Promise<languages.ExternalUriOpenerPriority>;\n\topenExternalUri(uri: URI, ctx: { sourceUri: URI }, token: CancellationToken): Promise<boolean>;\n}\n\nexport interface IExternalUriOpenerService {\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Registers a provider for external resources openers.\n\t */\n\tregisterExternalOpenerProvider(provider: IExternalOpenerProvider): IDisposable;\n\n\t/**\n\t * Get the configured IExternalUriOpener for the uri.\n\t * If there is no opener configured, then returns the first opener that can handle the uri.\n\t */\n\tgetOpener(uri: URI, ctx: { sourceUri: URI; preferredOpenerId?: string }, token: CancellationToken): Promise<IExternalUriOpener | undefined>;\n}\n\nexport class ExternalUriOpenerService extends Disposable implements IExternalUriOpenerService, IExternalOpener {\n\n\tpublic readonly _serviceBrand: undefined;\n\n\tprivate readonly _providers = new LinkedList<IExternalOpenerProvider>();\n\n\tconstructor(\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t) {\n\t\tsuper();\n\t\tthis._register(openerService.registerExternalOpener(this));\n\t}\n\n\tregisterExternalOpenerProvider(provider: IExternalOpenerProvider): IDisposable {\n\t\tconst remove = this._providers.push(provider);\n\t\treturn { dispose: remove };\n\t}\n\n\tprivate async getOpeners(targetUri: URI, allowOptional: boolean, ctx: { sourceUri: URI; preferredOpenerId?: string }, token: CancellationToken): Promise<IExternalUriOpener[]> {\n\t\tconst allOpeners = await this.getAllOpenersForUri(targetUri);\n\n\t\tif (allOpeners.size === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// First see if we have a preferredOpener\n\t\tif (ctx.preferredOpenerId) {\n\t\t\tif (ctx.preferredOpenerId === defaultExternalUriOpenerId) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst preferredOpener = allOpeners.get(ctx.preferredOpenerId);\n\t\t\tif (preferredOpener) {\n\t\t\t\t// Skip the `canOpen` check here since the opener was specifically requested.\n\t\t\t\treturn [preferredOpener];\n\t\t\t}\n\t\t}\n\n\t\t// Check to see if we have a configured opener\n\t\tconst configuredOpener = this.getConfiguredOpenerForUri(allOpeners, targetUri);\n\t\tif (configuredOpener) {\n\t\t\t// Skip the `canOpen` check here since the opener was specifically requested.\n\t\t\treturn configuredOpener === defaultExternalUriOpenerId ? [] : [configuredOpener];\n\t\t}\n\n\t\t// Then check to see if there is a valid opener\n\t\tconst validOpeners: Array<{ opener: IExternalUriOpener; priority: languages.ExternalUriOpenerPriority }> = [];\n\t\tawait Promise.all(Array.from(allOpeners.values()).map(async opener => {\n\t\t\tlet priority: languages.ExternalUriOpenerPriority;\n\t\t\ttry {\n\t\t\t\tpriority = await opener.canOpen(ctx.sourceUri, token);\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.error(e);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tswitch (priority) {\n\t\t\t\tcase languages.ExternalUriOpenerPriority.Option:\n\t\t\t\tcase languages.ExternalUriOpenerPriority.Default:\n\t\t\t\tcase languages.ExternalUriOpenerPriority.Preferred:\n\t\t\t\t\tvalidOpeners.push({ opener, priority });\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\n\t\tif (validOpeners.length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// See if we have a preferred opener first\n\t\tconst preferred = validOpeners.filter(x => x.priority === languages.ExternalUriOpenerPriority.Preferred).at(0);\n\t\tif (preferred) {\n\t\t\treturn [preferred.opener];\n\t\t}\n\n\t\t// See if we only have optional openers, use the default opener\n\t\tif (!allowOptional && validOpeners.every(x => x.priority === languages.ExternalUriOpenerPriority.Option)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn validOpeners.map(value => value.opener);\n\t}\n\n\tasync openExternal(href: string, ctx: { sourceUri: URI; preferredOpenerId?: string }, token: CancellationToken): Promise<boolean> {\n\n\t\tconst targetUri = typeof href === 'string' ? URI.parse(href) : href;\n\n\t\tconst allOpeners = await this.getOpeners(targetUri, false, ctx, token);\n\t\tif (allOpeners.length === 0) {\n\t\t\treturn false;\n\t\t} else if (allOpeners.length === 1) {\n\t\t\treturn allOpeners[0].openExternalUri(targetUri, ctx, token);\n\t\t}\n\n\t\t// Otherwise prompt\n\t\treturn this.showOpenerPrompt(allOpeners, targetUri, ctx, token);\n\t}\n\n\tasync getOpener(targetUri: URI, ctx: { sourceUri: URI; preferredOpenerId?: string }, token: CancellationToken): Promise<IExternalUriOpener | undefined> {\n\t\tconst allOpeners = await this.getOpeners(targetUri, true, ctx, token);\n\t\tif (allOpeners.length >= 1) {\n\t\t\treturn allOpeners[0];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async getAllOpenersForUri(targetUri: URI): Promise<Map<string, IExternalUriOpener>> {\n\t\tconst allOpeners = new Map<string, IExternalUriOpener>();\n\t\tawait Promise.all(Iterable.map(this._providers, async (provider) => {\n\t\t\tfor await (const opener of provider.getOpeners(targetUri)) {\n\t\t\t\tallOpeners.set(opener.id, opener);\n\t\t\t}\n\t\t}));\n\t\treturn allOpeners;\n\t}\n\n\tprivate getConfiguredOpenerForUri(openers: Map<string, IExternalUriOpener>, targetUri: URI): IExternalUriOpener | 'default' | undefined {\n\t\tconst config = this.configurationService.getValue<ExternalUriOpenersConfiguration>(externalUriOpenersSettingId) || {};\n\t\tfor (const [uriGlob, id] of Object.entries(config)) {\n\t\t\tif (testUrlMatchesGlob(targetUri, uriGlob)) {\n\t\t\t\tif (id === defaultExternalUriOpenerId) {\n\t\t\t\t\treturn 'default';\n\t\t\t\t}\n\n\t\t\t\tconst entry = openers.get(id);\n\t\t\t\tif (entry) {\n\t\t\t\t\treturn entry;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async showOpenerPrompt(\n\t\topeners: ReadonlyArray<IExternalUriOpener>,\n\t\ttargetUri: URI,\n\t\tctx: { sourceUri: URI },\n\t\ttoken: CancellationToken\n\t): Promise<boolean> {\n\t\ttype PickItem = IQuickPickItem & { opener?: IExternalUriOpener | 'configureDefault' };\n\n\t\tconst items: Array<PickItem | IQuickPickSeparator> = openers.map((opener): PickItem => {\n\t\t\treturn {\n\t\t\t\tlabel: opener.label,\n\t\t\t\topener: opener\n\t\t\t};\n\t\t});\n\t\titems.push(\n\t\t\t{\n\t\t\t\tlabel: isWeb\n\t\t\t\t\t? nls.localize('selectOpenerDefaultLabel.web', 'Open in new browser window')\n\t\t\t\t\t: nls.localize('selectOpenerDefaultLabel', 'Open in default browser'),\n\t\t\t\topener: undefined\n\t\t\t},\n\t\t\t{ type: 'separator' },\n\t\t\t{\n\t\t\t\tlabel: nls.localize('selectOpenerConfigureTitle', \"Configure default opener...\"),\n\t\t\t\topener: 'configureDefault'\n\t\t\t});\n\n\t\tconst picked = await this.quickInputService.pick(items, {\n\t\t\tplaceHolder: nls.localize('selectOpenerPlaceHolder', \"How would you like to open: {0}\", targetUri.toString())\n\t\t});\n\n\t\tif (!picked) {\n\t\t\t// Still cancel the default opener here since we prompted the user\n\t\t\treturn true;\n\t\t}\n\n\t\tif (typeof picked.opener === 'undefined') {\n\t\t\treturn false; // Fallback to default opener\n\t\t} else if (picked.opener === 'configureDefault') {\n\t\t\tawait this.preferencesService.openUserSettings({\n\t\t\t\tjsonEditor: true,\n\t\t\t\trevealSetting: { key: externalUriOpenersSettingId, edit: true }\n\t\t\t});\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn picked.opener.openExternalUri(targetUri, ctx, token);\n\t\t}\n\t}\n}\n"]}