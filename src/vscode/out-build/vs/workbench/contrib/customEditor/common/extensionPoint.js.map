{"version":3,"sources":["vs/workbench/contrib/customEditor/common/extensionPoint.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,QAAQ,EAAE,MAAM,mCAAmC,CAAC;AAE7D,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,KAAK,GAAG,MAAM,oBAAoB,CAAC;AAE1C,OAAO,EAAE,cAAc,EAAE,MAAM,0DAA0D,CAAC;AAC1F,OAAO,EAAE,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAE5E,OAAO,EAAE,UAAU,EAAmG,MAAM,mEAAmE,CAAC;AAChM,OAAO,EAAE,kBAAkB,EAAE,MAAM,2DAA2D,CAAC;AAC/F,OAAO,EAAE,iBAAiB,EAAE,MAAM,sDAAsD,CAAC;AAEzF,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;IAC5B,QAAQ,EAAE,UAAU;IACpB,WAAW,EAAE,aAAa;IAC1B,QAAQ,EAAE,UAAU;IACpB,QAAQ,EAAE,UAAU;CACpB,CAAC,CAAC;AAEH,MAAM,+BAA+B,GAAG;IACvC,IAAI,EAAE,QAAQ;IACd,QAAQ,EAAE;QACT,MAAM,CAAC,QAAQ;QACf,MAAM,CAAC,WAAW;QAClB,MAAM,CAAC,QAAQ;KACf;IACD,oBAAoB,EAAE,KAAK;IAC3B,UAAU,EAAE;QACX,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;YAClB,IAAI,EAAE,QAAQ;YACd,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAA6W,CAAC;SACxa;QACD,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE;YACrB,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAA0G,CAAC;SAChK;QACD,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;YAClB,IAAI,EAAE,OAAO;YACb,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAqD,CAAC;YACxG,KAAK,EAAE;gBACN,IAAI,EAAE,QAAQ;gBACd,eAAe,EAAE,CAAC;wBACjB,IAAI,EAAE;4BACL,eAAe,EAAE,IAAI;yBACrB;qBACD,CAAC;gBACF,oBAAoB,EAAE,KAAK;gBAC3B,UAAU,EAAE;oBACX,eAAe,EAAE;wBAChB,IAAI,EAAE,QAAQ;wBACd,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsC,EAAE,IAA6C,CAAC;qBAChH;iBACD;aACD;SACD;QACD,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;YAClB,IAAI,EAAE,QAAQ;YACd,0BAA0B,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAsK,CAAC;YACxO,IAAI,EAAE;;;aAGL;YACD,wBAAwB,EAAE;gBACzB,GAAG,CAAC,QAAQ,CAAC,IAA8B,EAAE,IAAkJ,CAAC;gBAChM,GAAG,CAAC,QAAQ,CAAC,IAA6B,EAAE,IAA2I,CAAC;aACxL;YACD,OAAO,8CAA8B;SACrC;KACD;CAC8B,CAAC;AAIjC,MAAM,CAAC,MAAM,2BAA2B,GAAG,kBAAkB,CAAC,sBAAsB,CAAiC;IACpH,cAAc,EAAE,eAAe;IAC/B,IAAI,EAAE,CAAC,iBAAiB,CAAC;IACzB,UAAU,EAAE;QACX,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAA2B,EAAE,IAA6B,CAAC;QACrF,IAAI,EAAE,OAAO;QACb,eAAe,EAAE,CAAC;gBACjB,IAAI,EAAE,CAAC;wBACN,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI;wBACvB,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,IAAI;wBAC1B,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC;gCACnB,eAAe,EAAE,IAAI;6BACrB,CAAC;qBACF,CAAC;aACF,CAAC;QACF,KAAK,EAAE,+BAA+B;KACtC;IACD,yBAAyB,EAAE,QAAQ,CAAC,EAAE,QAAiD;QACtF,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;YAChC,MAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC1C,IAAI,QAAQ,EAAE,CAAC;gBACd,MAAM,kBAAkB,QAAQ,EAAE,CAAC;YACpC,CAAC;QACF,CAAC;IACF,CAAC;CACD,CAAC,CAAC;AAEH,MAAM,yBAA0B,SAAQ,UAAU;IAAlD;;QAEU,SAAI,GAAG,OAAO,CAAC;IAmCzB,CAAC;IAjCA,YAAY,CAAC,QAA4B;QACxC,OAAO,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,aAAa,CAAC;IAC9C,CAAC;IAED,MAAM,CAAC,QAA4B;QAClC,MAAM,aAAa,GAAG,QAAQ,CAAC,WAAW,EAAE,aAAa,IAAI,EAAE,CAAC;QAChE,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC;YAC3B,OAAO,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC;QAChE,CAAC;QAED,MAAM,OAAO,GAAG;YACf,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAW,CAAC;YACpD,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAAU,CAAC;YAClD,GAAG,CAAC,QAAQ,CAAC,IAA+B,EAAE,IAAkB,CAAC;SACjE,CAAC;QAEF,MAAM,IAAI,GAAiB,aAAa;aACtC,GAAG,CAAC,YAAY,CAAC,EAAE;YACnB,OAAO;gBACN,YAAY,CAAC,QAAQ;gBACrB,YAAY,CAAC,QAAQ,IAAI,EAAE;gBAC3B,QAAQ,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;aACtE,CAAC;QACH,CAAC,CAAC,CAAC;QAEJ,OAAO;YACN,IAAI,EAAE;gBACL,OAAO;gBACP,IAAI;aACJ;YACD,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC;SAClB,CAAC;IACH,CAAC;CACD;AAED,QAAQ,CAAC,EAAE,CAA6B,UAAU,CAAC,yBAAyB,CAAC,CAAC,wBAAwB,CAAC;IACtG,EAAE,EAAE,eAAe;IACnB,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAe,EAAE,IAAgB,CAAC;IACtD,MAAM,EAAE;QACP,SAAS,EAAE,KAAK;KAChB;IACD,QAAQ,EAAE,IAAI,cAAc,CAAC,yBAAyB,CAAC;CACvD,CAAC,CAAC","file":"extensionPoint.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { TypeFromJsonSchema, IJSONSchema } from '../../../../base/common/jsonSchema.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as nls from '../../../../nls.js';\nimport { IExtensionManifest } from '../../../../platform/extensions/common/extensions.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CustomEditorPriority } from './customEditor.js';\nimport { Extensions, IExtensionFeatureTableRenderer, IExtensionFeaturesRegistry, IRenderedData, IRowData, ITableData } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { ExtensionsRegistry } from '../../../services/extensions/common/extensionsRegistry.js';\nimport { languagesExtPoint } from '../../../services/language/common/languageService.js';\n\nconst Fields = Object.freeze({\n\tviewType: 'viewType',\n\tdisplayName: 'displayName',\n\tselector: 'selector',\n\tpriority: 'priority',\n});\n\nconst customEditorsContributionSchema = {\n\ttype: 'object',\n\trequired: [\n\t\tFields.viewType,\n\t\tFields.displayName,\n\t\tFields.selector,\n\t],\n\tadditionalProperties: false,\n\tproperties: {\n\t\t[Fields.viewType]: {\n\t\t\ttype: 'string',\n\t\t\tmarkdownDescription: nls.localize('contributes.viewType', 'Identifier for the custom editor. This must be unique across all custom editors, so we recommend including your extension id as part of `viewType`. The `viewType` is used when registering custom editors with `vscode.registerCustomEditorProvider` and in the `onCustomEditor:${id}` [activation event](https://code.visualstudio.com/api/references/activation-events).'),\n\t\t},\n\t\t[Fields.displayName]: {\n\t\t\ttype: 'string',\n\t\t\tdescription: nls.localize('contributes.displayName', 'Human readable name of the custom editor. This is displayed to users when selecting which editor to use.'),\n\t\t},\n\t\t[Fields.selector]: {\n\t\t\ttype: 'array',\n\t\t\tdescription: nls.localize('contributes.selector', 'Set of globs that the custom editor is enabled for.'),\n\t\t\titems: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefaultSnippets: [{\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tfilenamePattern: '$1',\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\tadditionalProperties: false,\n\t\t\t\tproperties: {\n\t\t\t\t\tfilenamePattern: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: nls.localize('contributes.selector.filenamePattern', 'Glob that the custom editor is enabled for.'),\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[Fields.priority]: {\n\t\t\ttype: 'string',\n\t\t\tmarkdownDeprecationMessage: nls.localize('contributes.priority', 'Controls if the custom editor is enabled automatically when the user opens a file. This may be overridden by users using the `workbench.editorAssociations` setting.'),\n\t\t\tenum: [\n\t\t\t\tCustomEditorPriority.default,\n\t\t\t\tCustomEditorPriority.option,\n\t\t\t],\n\t\t\tmarkdownEnumDescriptions: [\n\t\t\t\tnls.localize('contributes.priority.default', 'The editor is automatically used when the user opens a resource, provided that no other default custom editors are registered for that resource.'),\n\t\t\t\tnls.localize('contributes.priority.option', 'The editor is not automatically used when the user opens a resource, but a user can switch to the editor using the `Reopen With` command.'),\n\t\t\t],\n\t\t\tdefault: CustomEditorPriority.default\n\t\t}\n\t}\n} as const satisfies IJSONSchema;\n\nexport type ICustomEditorsExtensionPoint = TypeFromJsonSchema<typeof customEditorsContributionSchema>;\n\nexport const customEditorsExtensionPoint = ExtensionsRegistry.registerExtensionPoint<ICustomEditorsExtensionPoint[]>({\n\textensionPoint: 'customEditors',\n\tdeps: [languagesExtPoint],\n\tjsonSchema: {\n\t\tdescription: nls.localize('contributes.customEditors', 'Contributed custom editors.'),\n\t\ttype: 'array',\n\t\tdefaultSnippets: [{\n\t\t\tbody: [{\n\t\t\t\t[Fields.viewType]: '$1',\n\t\t\t\t[Fields.displayName]: '$2',\n\t\t\t\t[Fields.selector]: [{\n\t\t\t\t\tfilenamePattern: '$3'\n\t\t\t\t}],\n\t\t\t}]\n\t\t}],\n\t\titems: customEditorsContributionSchema\n\t},\n\tactivationEventsGenerator: function* (contribs: readonly ICustomEditorsExtensionPoint[]) {\n\t\tfor (const contrib of contribs) {\n\t\t\tconst viewType = contrib[Fields.viewType];\n\t\t\tif (viewType) {\n\t\t\t\tyield `onCustomEditor:${viewType}`;\n\t\t\t}\n\t\t}\n\t},\n});\n\nclass CustomEditorsDataRenderer extends Disposable implements IExtensionFeatureTableRenderer {\n\n\treadonly type = 'table';\n\n\tshouldRender(manifest: IExtensionManifest): boolean {\n\t\treturn !!manifest.contributes?.customEditors;\n\t}\n\n\trender(manifest: IExtensionManifest): IRenderedData<ITableData> {\n\t\tconst customEditors = manifest.contributes?.customEditors || [];\n\t\tif (!customEditors.length) {\n\t\t\treturn { data: { headers: [], rows: [] }, dispose: () => { } };\n\t\t}\n\n\t\tconst headers = [\n\t\t\tnls.localize('customEditors view type', \"View Type\"),\n\t\t\tnls.localize('customEditors priority', \"Priority\"),\n\t\t\tnls.localize('customEditors filenamePattern', \"Filename Pattern\"),\n\t\t];\n\n\t\tconst rows: IRowData[][] = customEditors\n\t\t\t.map(customEditor => {\n\t\t\t\treturn [\n\t\t\t\t\tcustomEditor.viewType,\n\t\t\t\t\tcustomEditor.priority ?? '',\n\t\t\t\t\tcoalesce(customEditor.selector.map(x => x.filenamePattern)).join(', ')\n\t\t\t\t];\n\t\t\t});\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\theaders,\n\t\t\t\trows\n\t\t\t},\n\t\t\tdispose: () => { }\n\t\t};\n\t}\n}\n\nRegistry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).registerExtensionFeature({\n\tid: 'customEditors',\n\tlabel: nls.localize('customEditors', \"Custom Editors\"),\n\taccess: {\n\t\tcanToggle: false\n\t},\n\trenderer: new SyncDescriptor(CustomEditorsDataRenderer),\n});\n"]}