{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/splash/browser/partsSplash.ts","vs/workbench/contrib/splash/browser/partsSplash.ts"],"names":[],"mappings":"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","file":"partsSplash.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onDidChangeFullscreen, isFullscreen } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { editorBackground, foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { getThemeTypeSelector, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { DEFAULT_EDITOR_MIN_DIMENSIONS } from '../../../browser/parts/editor/editor.js';\nimport * as themes from '../../../common/theme.js';\nimport { IWorkbenchLayoutService, Parts, Position } from '../../../services/layout/browser/layoutService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport * as perf from '../../../../base/common/performance.js';\nimport { assertReturnsDefined } from '../../../../base/common/types.js';\nimport { ISplashStorageService } from './splash.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ILifecycleService, LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { TitleBarSetting } from '../../../../platform/window/common/window.js';\n\nexport class PartsSplash {\n\n\tstatic readonly ID = 'workbench.contrib.partsSplash';\n\n\tprivate static readonly _splashElementId = 'monaco-parts-splash';\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate _didChangeTitleBarStyle?: boolean;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IWorkbenchEnvironmentService private readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService,\n\t\t@ISplashStorageService private readonly _partSplashService: ISplashStorageService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t) {\n\t\tEvent.once(_layoutService.onDidLayoutMainContainer)(() => {\n\t\t\tthis._removePartsSplash();\n\t\t\tperf.mark('code/didRemovePartsSplash');\n\t\t}, undefined, this._disposables);\n\n\t\tconst lastIdleSchedule = this._disposables.add(new MutableDisposable());\n\t\tconst savePartsSplashSoon = () => {\n\t\t\tlastIdleSchedule.value = dom.runWhenWindowIdle(mainWindow, () => this._savePartsSplash(), 2500);\n\t\t};\n\t\tlifecycleService.when(LifecyclePhase.Restored).then(() => {\n\t\t\tEvent.any(Event.filter(onDidChangeFullscreen, windowId => windowId === mainWindow.vscodeWindowId), editorGroupsService.mainPart.onDidLayout, _themeService.onDidColorThemeChange)(savePartsSplashSoon, undefined, this._disposables);\n\t\t\tsavePartsSplashSoon();\n\t\t});\n\n\t\t_configService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TitleBarSetting.TITLE_BAR_STYLE)) {\n\t\t\t\tthis._didChangeTitleBarStyle = true;\n\t\t\t\tthis._savePartsSplash();\n\t\t\t}\n\t\t}, this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tprivate _savePartsSplash() {\n\t\tconst theme = this._themeService.getColorTheme();\n\n\t\tthis._partSplashService.saveWindowSplash({\n\t\t\tzoomLevel: this._configService.getValue<undefined>('window.zoomLevel'),\n\t\t\tbaseTheme: getThemeTypeSelector(theme.type),\n\t\t\tcolorInfo: {\n\t\t\t\tforeground: theme.getColor(foreground)?.toString(),\n\t\t\t\tbackground: Color.Format.CSS.formatHex(theme.getColor(editorBackground) || themes.WORKBENCH_BACKGROUND(theme)),\n\t\t\t\teditorBackground: theme.getColor(editorBackground)?.toString(),\n\t\t\t\ttitleBarBackground: theme.getColor(themes.TITLE_BAR_ACTIVE_BACKGROUND)?.toString(),\n\t\t\t\ttitleBarBorder: theme.getColor(themes.TITLE_BAR_BORDER)?.toString(),\n\t\t\t\tactivityBarBackground: theme.getColor(themes.ACTIVITY_BAR_BACKGROUND)?.toString(),\n\t\t\t\tactivityBarBorder: theme.getColor(themes.ACTIVITY_BAR_BORDER)?.toString(),\n\t\t\t\tsideBarBackground: theme.getColor(themes.SIDE_BAR_BACKGROUND)?.toString(),\n\t\t\t\tsideBarBorder: theme.getColor(themes.SIDE_BAR_BORDER)?.toString(),\n\t\t\t\tstatusBarBackground: theme.getColor(themes.STATUS_BAR_BACKGROUND)?.toString(),\n\t\t\t\tstatusBarBorder: theme.getColor(themes.STATUS_BAR_BORDER)?.toString(),\n\t\t\t\tstatusBarNoFolderBackground: theme.getColor(themes.STATUS_BAR_NO_FOLDER_BACKGROUND)?.toString(),\n\t\t\t\twindowBorder: theme.getColor(themes.WINDOW_ACTIVE_BORDER)?.toString() ?? theme.getColor(themes.WINDOW_INACTIVE_BORDER)?.toString()\n\t\t\t},\n\t\t\tlayoutInfo: !this._shouldSaveLayoutInfo() ? undefined : {\n\t\t\t\tsideBarSide: this._layoutService.getSideBarPosition() === Position.RIGHT ? 'right' : 'left',\n\t\t\t\teditorPartMinWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\t\ttitleBarHeight: this._layoutService.isVisible(Parts.TITLEBAR_PART, mainWindow) ? dom.getTotalHeight(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.TITLEBAR_PART))) : 0,\n\t\t\t\tactivityBarWidth: this._layoutService.isVisible(Parts.ACTIVITYBAR_PART) ? dom.getTotalWidth(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.ACTIVITYBAR_PART))) : 0,\n\t\t\t\tsideBarWidth: this._layoutService.isVisible(Parts.SIDEBAR_PART) ? dom.getTotalWidth(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.SIDEBAR_PART))) : 0,\n\t\t\t\tauxiliaryBarWidth: this._layoutService.isAuxiliaryBarMaximized() ? Number.MAX_SAFE_INTEGER /* marker for maximized state */ : this._layoutService.isVisible(Parts.AUXILIARYBAR_PART) ? dom.getTotalWidth(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.AUXILIARYBAR_PART))) : 0,\n\t\t\t\tstatusBarHeight: this._layoutService.isVisible(Parts.STATUSBAR_PART, mainWindow) ? dom.getTotalHeight(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.STATUSBAR_PART))) : 0,\n\t\t\t\twindowBorder: this._layoutService.hasMainWindowBorder(),\n\t\t\t\twindowBorderRadius: this._layoutService.getMainWindowBorderRadius()\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _shouldSaveLayoutInfo(): boolean {\n\t\treturn !isFullscreen(mainWindow) && !this._environmentService.isExtensionDevelopment && !this._didChangeTitleBarStyle;\n\t}\n\n\tprivate _removePartsSplash(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst element = mainWindow.document.getElementById(PartsSplash._splashElementId);\n\t\tif (element) {\n\t\t\telement.style.display = 'none';\n\t\t}\n\n\t\t// remove initial colors\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst defaultStyles = mainWindow.document.head.getElementsByClassName('initialShellColors');\n\t\tdefaultStyles[0]?.remove();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onDidChangeFullscreen, isFullscreen } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { editorBackground, foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { getThemeTypeSelector, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { DEFAULT_EDITOR_MIN_DIMENSIONS } from '../../../browser/parts/editor/editor.js';\nimport * as themes from '../../../common/theme.js';\nimport { IWorkbenchLayoutService, Parts, Position } from '../../../services/layout/browser/layoutService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport * as perf from '../../../../base/common/performance.js';\nimport { assertReturnsDefined } from '../../../../base/common/types.js';\nimport { ISplashStorageService } from './splash.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ILifecycleService, LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { TitleBarSetting } from '../../../../platform/window/common/window.js';\n\nexport class PartsSplash {\n\n\tstatic readonly ID = 'workbench.contrib.partsSplash';\n\n\tprivate static readonly _splashElementId = 'monaco-parts-splash';\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate _didChangeTitleBarStyle?: boolean;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IWorkbenchEnvironmentService private readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService,\n\t\t@ISplashStorageService private readonly _partSplashService: ISplashStorageService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t) {\n\t\tEvent.once(_layoutService.onDidLayoutMainContainer)(() => {\n\t\t\tthis._removePartsSplash();\n\t\t\tperf.mark('code/didRemovePartsSplash');\n\t\t}, undefined, this._disposables);\n\n\t\tconst lastIdleSchedule = this._disposables.add(new MutableDisposable());\n\t\tconst savePartsSplashSoon = () => {\n\t\t\tlastIdleSchedule.value = dom.runWhenWindowIdle(mainWindow, () => this._savePartsSplash(), 2500);\n\t\t};\n\t\tlifecycleService.when(LifecyclePhase.Restored).then(() => {\n\t\t\tEvent.any(Event.filter(onDidChangeFullscreen, windowId => windowId === mainWindow.vscodeWindowId), editorGroupsService.mainPart.onDidLayout, _themeService.onDidColorThemeChange)(savePartsSplashSoon, undefined, this._disposables);\n\t\t\tsavePartsSplashSoon();\n\t\t});\n\n\t\t_configService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TitleBarSetting.TITLE_BAR_STYLE)) {\n\t\t\t\tthis._didChangeTitleBarStyle = true;\n\t\t\t\tthis._savePartsSplash();\n\t\t\t}\n\t\t}, this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tprivate _savePartsSplash() {\n\t\tconst theme = this._themeService.getColorTheme();\n\n\t\tthis._partSplashService.saveWindowSplash({\n\t\t\tzoomLevel: this._configService.getValue<undefined>('window.zoomLevel'),\n\t\t\tbaseTheme: getThemeTypeSelector(theme.type),\n\t\t\tcolorInfo: {\n\t\t\t\tforeground: theme.getColor(foreground)?.toString(),\n\t\t\t\tbackground: Color.Format.CSS.formatHex(theme.getColor(editorBackground) || themes.WORKBENCH_BACKGROUND(theme)),\n\t\t\t\teditorBackground: theme.getColor(editorBackground)?.toString(),\n\t\t\t\ttitleBarBackground: theme.getColor(themes.TITLE_BAR_ACTIVE_BACKGROUND)?.toString(),\n\t\t\t\ttitleBarBorder: theme.getColor(themes.TITLE_BAR_BORDER)?.toString(),\n\t\t\t\tactivityBarBackground: theme.getColor(themes.ACTIVITY_BAR_BACKGROUND)?.toString(),\n\t\t\t\tactivityBarBorder: theme.getColor(themes.ACTIVITY_BAR_BORDER)?.toString(),\n\t\t\t\tsideBarBackground: theme.getColor(themes.SIDE_BAR_BACKGROUND)?.toString(),\n\t\t\t\tsideBarBorder: theme.getColor(themes.SIDE_BAR_BORDER)?.toString(),\n\t\t\t\tstatusBarBackground: theme.getColor(themes.STATUS_BAR_BACKGROUND)?.toString(),\n\t\t\t\tstatusBarBorder: theme.getColor(themes.STATUS_BAR_BORDER)?.toString(),\n\t\t\t\tstatusBarNoFolderBackground: theme.getColor(themes.STATUS_BAR_NO_FOLDER_BACKGROUND)?.toString(),\n\t\t\t\twindowBorder: theme.getColor(themes.WINDOW_ACTIVE_BORDER)?.toString() ?? theme.getColor(themes.WINDOW_INACTIVE_BORDER)?.toString()\n\t\t\t},\n\t\t\tlayoutInfo: !this._shouldSaveLayoutInfo() ? undefined : {\n\t\t\t\tsideBarSide: this._layoutService.getSideBarPosition() === Position.RIGHT ? 'right' : 'left',\n\t\t\t\teditorPartMinWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\t\ttitleBarHeight: this._layoutService.isVisible(Parts.TITLEBAR_PART, mainWindow) ? dom.getTotalHeight(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.TITLEBAR_PART))) : 0,\n\t\t\t\tactivityBarWidth: this._layoutService.isVisible(Parts.ACTIVITYBAR_PART) ? dom.getTotalWidth(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.ACTIVITYBAR_PART))) : 0,\n\t\t\t\tsideBarWidth: this._layoutService.isVisible(Parts.SIDEBAR_PART) ? dom.getTotalWidth(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.SIDEBAR_PART))) : 0,\n\t\t\t\tauxiliaryBarWidth: this._layoutService.isAuxiliaryBarMaximized() ? Number.MAX_SAFE_INTEGER /* marker for maximized state */ : this._layoutService.isVisible(Parts.AUXILIARYBAR_PART) ? dom.getTotalWidth(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.AUXILIARYBAR_PART))) : 0,\n\t\t\t\tstatusBarHeight: this._layoutService.isVisible(Parts.STATUSBAR_PART, mainWindow) ? dom.getTotalHeight(assertReturnsDefined(this._layoutService.getContainer(mainWindow, Parts.STATUSBAR_PART))) : 0,\n\t\t\t\twindowBorder: this._layoutService.hasMainWindowBorder(),\n\t\t\t\twindowBorderRadius: this._layoutService.getMainWindowBorderRadius()\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _shouldSaveLayoutInfo(): boolean {\n\t\treturn !isFullscreen(mainWindow) && !this._environmentService.isExtensionDevelopment && !this._didChangeTitleBarStyle;\n\t}\n\n\tprivate _removePartsSplash(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst element = mainWindow.document.getElementById(PartsSplash._splashElementId);\n\t\tif (element) {\n\t\t\telement.style.display = 'none';\n\t\t}\n\n\t\t// remove initial colors\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst defaultStyles = mainWindow.document.head.getElementsByClassName('initialShellColors');\n\t\tdefaultStyles[0]?.remove();\n\t}\n}\n"]}