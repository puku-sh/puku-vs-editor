{"version":3,"sources":["vs/workbench/contrib/interactive/browser/replInputHintContentWidget.ts"],"names":[],"mappings":"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","file":"replInputHintContentWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { KeybindingLabel } from '../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ResolvedKeybinding } from '../../../../base/common/keybindings.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from '../../../../editor/browser/editorBrowser.js';\nimport { ConfigurationChangedEvent, EditorOption } from '../../../../editor/common/config/editorOptions.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { AccessibilityCommandId } from '../../accessibility/common/accessibilityCommands.js';\nimport { ReplEditorSettings } from './interactiveCommon.js';\n\n\nexport class ReplInputHintContentWidget extends Disposable implements IContentWidget {\n\n\tprivate static readonly ID = 'replInput.widget.emptyHint';\n\n\tprivate domNode: HTMLElement | undefined;\n\tprivate ariaLabel: string = '';\n\tprivate label: KeybindingLabel | undefined;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this.editor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (this.domNode && e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\tthis.editor.applyFontInfo(this.domNode);\n\t\t\t}\n\t\t}));\n\t\tconst onDidFocusEditorText = Event.debounce(this.editor.onDidFocusEditorText, () => undefined, 500);\n\t\tthis._register(onDidFocusEditorText(() => {\n\t\t\tif (this.editor.hasTextFocus() && this.ariaLabel && configurationService.getValue(AccessibilityVerbositySettingId.ReplEditor)) {\n\t\t\t\tstatus(this.ariaLabel);\n\t\t\t}\n\t\t}));\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(ReplEditorSettings.executeWithShiftEnter)) {\n\t\t\t\tthis.setHint();\n\t\t\t}\n\t\t}));\n\t\tthis.editor.addContentWidget(this);\n\t}\n\n\tgetId(): string {\n\t\treturn ReplInputHintContentWidget.ID;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn {\n\t\t\tposition: { lineNumber: 1, column: 1 },\n\t\t\tpreference: [ContentWidgetPositionPreference.EXACT]\n\t\t};\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\tif (!this.domNode) {\n\t\t\tthis.domNode = dom.$('.empty-editor-hint');\n\t\t\tthis.domNode.style.width = 'max-content';\n\t\t\tthis.domNode.style.paddingLeft = '4px';\n\n\t\t\tthis.setHint();\n\n\t\t\tthis._register(dom.addDisposableListener(this.domNode, 'click', () => {\n\t\t\t\tthis.editor.focus();\n\t\t\t}));\n\n\t\t\tthis.editor.applyFontInfo(this.domNode);\n\t\t\tconst lineHeight = this.editor.getLineHeightForPosition(new Position(1, 1));\n\t\t\tthis.domNode.style.lineHeight = lineHeight + 'px';\n\t\t}\n\n\t\treturn this.domNode;\n\t}\n\n\tprivate setHint() {\n\t\tif (!this.domNode) {\n\t\t\treturn;\n\t\t}\n\t\twhile (this.domNode.firstChild) {\n\t\t\tthis.domNode.removeChild(this.domNode.firstChild);\n\t\t}\n\n\t\tconst hintElement = dom.$('div.empty-hint-text');\n\t\thintElement.style.cursor = 'text';\n\t\thintElement.style.whiteSpace = 'nowrap';\n\n\t\tconst keybinding = this.getKeybinding();\n\t\tconst keybindingHintLabel = keybinding?.getLabel();\n\n\t\tif (keybinding && keybindingHintLabel) {\n\t\t\tconst actionPart = localize('emptyHintText', 'Press {0} to execute. ', keybindingHintLabel);\n\n\t\t\tconst [before, after] = actionPart.split(keybindingHintLabel).map((fragment) => {\n\t\t\t\tconst hintPart = dom.$('span', undefined, fragment);\n\t\t\t\thintPart.style.fontStyle = 'italic';\n\t\t\t\treturn hintPart;\n\t\t\t});\n\n\t\t\thintElement.appendChild(before);\n\n\t\t\tif (this.label) {\n\t\t\t\tthis.label.dispose();\n\t\t\t}\n\t\t\tthis.label = this._register(new KeybindingLabel(hintElement, OS));\n\t\t\tthis.label.set(keybinding);\n\t\t\tthis.label.element.style.width = 'min-content';\n\t\t\tthis.label.element.style.display = 'inline';\n\n\t\t\thintElement.appendChild(after);\n\t\t\tthis.domNode.append(hintElement);\n\n\t\t\tconst helpKeybinding = this.keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibilityHelp)?.getLabel();\n\t\t\tconst helpInfo = helpKeybinding\n\t\t\t\t? localize('ReplInputAriaLabelHelp', \"Use {0} for accessibility help. \", helpKeybinding)\n\t\t\t\t: localize('ReplInputAriaLabelHelpNoKb', \"Run the Open Accessibility Help command for more information. \");\n\n\t\t\tthis.ariaLabel = actionPart.concat(helpInfo, localize('disableHint', ' Toggle {0} in settings to disable this hint.', AccessibilityVerbositySettingId.ReplEditor));\n\t\t}\n\t}\n\n\tprivate getKeybinding() {\n\t\tconst keybindings = this.keybindingService.lookupKeybindings('interactive.execute');\n\t\tconst shiftEnterConfig = this.configurationService.getValue(ReplEditorSettings.executeWithShiftEnter);\n\t\tconst hasEnterChord = (kb: ResolvedKeybinding, modifier: string = '') => {\n\t\t\tconst chords = kb.getDispatchChords();\n\t\t\tconst chord = modifier + 'Enter';\n\t\t\tconst chordAlt = modifier + '[Enter]';\n\t\t\treturn chords.length === 1 && (chords[0] === chord || chords[0] === chordAlt);\n\t\t};\n\n\t\tif (shiftEnterConfig) {\n\t\t\tconst keybinding = keybindings.find(kb => hasEnterChord(kb, 'shift+'));\n\t\t\tif (keybinding) {\n\t\t\t\treturn keybinding;\n\t\t\t}\n\t\t} else {\n\t\t\tlet keybinding = keybindings.find(kb => hasEnterChord(kb));\n\t\t\tif (keybinding) {\n\t\t\t\treturn keybinding;\n\t\t\t}\n\t\t\tkeybinding = this.keybindingService.lookupKeybindings('python.execInREPLEnter')\n\t\t\t\t.find(kb => hasEnterChord(kb));\n\t\t\tif (keybinding) {\n\t\t\t\treturn keybinding;\n\t\t\t}\n\t\t}\n\n\t\treturn keybindings?.[0];\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.editor.removeContentWidget(this);\n\t\tthis.label?.dispose();\n\t}\n}\n"]}