{"version":3,"sources":["vs/workbench/contrib/interactive/browser/interactive.contribution.ts"],"names":[],"mappings":"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","file":"interactive.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { parse } from '../../../../base/common/marshalling.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { extname, isEqual } from '../../../../base/common/resources.js';\nimport { isFalsyOrWhitespace } from '../../../../base/common/strings.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../../editor/browser/services/bulkEditService.js';\nimport { EditOperation } from '../../../../editor/common/core/editOperation.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../editor/common/languages/modesRegistry.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ITextModelContentProvider, ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport { peekViewBorder } from '../../../../editor/contrib/peekView/browser/peekView.js';\nimport { Context as SuggestContext } from '../../../../editor/contrib/suggest/browser/suggest.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorActivation, ITextResourceEditorInput } from '../../../../platform/editor/common/editor.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { contrastBorder, ifDefinedThenElse, listInactiveSelectionBackground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { EditorPaneDescriptor, IEditorPaneRegistry } from '../../../browser/editor.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { EditorExtensions, EditorsOrder, IEditorControl, IEditorFactoryRegistry, IEditorSerializer, IUntypedEditorInput } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { PANEL_BORDER } from '../../../common/theme.js';\nimport { ResourceNotebookCellEdit } from '../../bulkEdit/browser/bulkCellEdits.js';\nimport { ReplEditorSettings, INTERACTIVE_INPUT_CURSOR_BOUNDARY } from './interactiveCommon.js';\nimport { IInteractiveDocumentService, InteractiveDocumentService } from './interactiveDocumentService.js';\nimport { InteractiveEditor } from './interactiveEditor.js';\nimport { InteractiveEditorInput } from './interactiveEditorInput.js';\nimport { IInteractiveHistoryService, InteractiveHistoryService } from './interactiveHistoryService.js';\nimport { NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT } from '../../notebook/browser/controller/coreActions.js';\nimport { INotebookEditorOptions } from '../../notebook/browser/notebookBrowser.js';\nimport * as icons from '../../notebook/browser/notebookIcons.js';\nimport { INotebookEditorService } from '../../notebook/browser/services/notebookEditorService.js';\nimport { CellEditType, CellKind, CellUri, INTERACTIVE_WINDOW_EDITOR_ID, NotebookSetting, NotebookWorkingCopyTypeIdentifier } from '../../notebook/common/notebookCommon.js';\nimport { InteractiveWindowOpen, IS_COMPOSITE_NOTEBOOK, NOTEBOOK_EDITOR_FOCUSED } from '../../notebook/common/notebookContextKeys.js';\nimport { INotebookKernelService } from '../../notebook/common/notebookKernelService.js';\nimport { INotebookService } from '../../notebook/common/notebookService.js';\nimport { columnToEditorGroup } from '../../../services/editor/common/editorGroupColumn.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorResolverService, RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IWorkingCopyIdentifier } from '../../../services/workingCopy/common/workingCopy.js';\nimport { IWorkingCopyEditorHandler, IWorkingCopyEditorService } from '../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { isReplEditorControl, ReplEditorControl } from '../../replNotebook/browser/replEditor.js';\nimport { InlineChatController } from '../../inlineChat/browser/inlineChatController.js';\nimport { IsLinuxContext, IsWindowsContext } from '../../../../platform/contextkey/common/contextkeys.js';\n\nconst interactiveWindowCategory: ILocalizedString = localize2('interactiveWindow', \"Interactive Window\");\n\nRegistry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane).registerEditorPane(\n\tEditorPaneDescriptor.create(\n\t\tInteractiveEditor,\n\t\tINTERACTIVE_WINDOW_EDITOR_ID,\n\t\t'Interactive Window'\n\t),\n\t[\n\t\tnew SyncDescriptor(InteractiveEditorInput)\n\t]\n);\n\nexport class InteractiveDocumentContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.interactiveDocument';\n\n\tconstructor(\n\t\t@INotebookService notebookService: INotebookService,\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\n\t\tconst info = notebookService.getContributedNotebookType('interactive');\n\n\t\t// We need to contribute a notebook type for the Interactive Window to provide notebook models.\n\t\tif (!info) {\n\t\t\tthis._register(notebookService.registerContributedNotebookType('interactive', {\n\t\t\t\tproviderDisplayName: 'Interactive Notebook',\n\t\t\t\tdisplayName: 'Interactive',\n\t\t\t\tfilenamePattern: ['*.interactive'],\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t}));\n\t\t}\n\n\t\teditorResolverService.registerEditor(\n\t\t\t`${Schemas.vscodeInteractiveInput}:/**`,\n\t\t\t{\n\t\t\t\tid: 'vscode-interactive-input',\n\t\t\t\tlabel: 'Interactive Editor',\n\t\t\t\tpriority: RegisteredEditorPriority.exclusive\n\t\t\t},\n\t\t\t{\n\t\t\t\tcanSupportResource: uri => uri.scheme === Schemas.vscodeInteractiveInput,\n\t\t\t\tsinglePerResource: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tcreateEditorInput: ({ resource }) => {\n\t\t\t\t\tconst editorInput = editorService.findEditors({\n\t\t\t\t\t\tresource,\n\t\t\t\t\t\teditorId: 'interactive',\n\t\t\t\t\t\ttypeId: InteractiveEditorInput.ID\n\t\t\t\t\t}, { order: EditorsOrder.SEQUENTIAL }).at(0);\n\t\t\t\t\treturn editorInput!;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\teditorResolverService.registerEditor(\n\t\t\t`*.interactive`,\n\t\t\t{\n\t\t\t\tid: 'interactive',\n\t\t\t\tlabel: 'Interactive Editor',\n\t\t\t\tpriority: RegisteredEditorPriority.exclusive\n\t\t\t},\n\t\t\t{\n\t\t\t\tcanSupportResource: uri =>\n\t\t\t\t\t(uri.scheme === Schemas.untitled && extname(uri) === '.interactive') ||\n\t\t\t\t\t(uri.scheme === Schemas.vscodeNotebookCell && extname(uri) === '.interactive'),\n\t\t\t\tsinglePerResource: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tcreateEditorInput: ({ resource, options }) => {\n\t\t\t\t\tconst data = CellUri.parse(resource);\n\t\t\t\t\tlet cellOptions: ITextResourceEditorInput | undefined;\n\t\t\t\t\tlet iwResource = resource;\n\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tcellOptions = { resource, options };\n\t\t\t\t\t\tiwResource = data.notebook;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst notebookOptions: INotebookEditorOptions | undefined = {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tcellOptions,\n\t\t\t\t\t\tcellRevealType: undefined,\n\t\t\t\t\t\tcellSelections: undefined,\n\t\t\t\t\t\tisReadOnly: undefined,\n\t\t\t\t\t\tviewState: undefined,\n\t\t\t\t\t\tindexedCellOptions: undefined\n\t\t\t\t\t};\n\n\t\t\t\t\tconst editorInput = createEditor(iwResource, this.instantiationService);\n\t\t\t\t\treturn {\n\t\t\t\t\t\teditor: editorInput,\n\t\t\t\t\t\toptions: notebookOptions\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tcreateUntitledEditorInput: ({ resource, options }) => {\n\t\t\t\t\tif (!resource) {\n\t\t\t\t\t\tthrow new Error('Interactive window editors must have a resource name');\n\t\t\t\t\t}\n\t\t\t\t\tconst data = CellUri.parse(resource);\n\t\t\t\t\tlet cellOptions: ITextResourceEditorInput | undefined;\n\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tcellOptions = { resource, options };\n\t\t\t\t\t}\n\n\t\t\t\t\tconst notebookOptions: INotebookEditorOptions = {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\tcellOptions,\n\t\t\t\t\t\tcellRevealType: undefined,\n\t\t\t\t\t\tcellSelections: undefined,\n\t\t\t\t\t\tisReadOnly: undefined,\n\t\t\t\t\t\tviewState: undefined,\n\t\t\t\t\t\tindexedCellOptions: undefined\n\t\t\t\t\t};\n\n\t\t\t\t\tconst editorInput = createEditor(resource, this.instantiationService);\n\t\t\t\t\treturn {\n\t\t\t\t\t\teditor: editorInput,\n\t\t\t\t\t\toptions: notebookOptions\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n}\n\nclass InteractiveInputContentProvider implements ITextModelContentProvider {\n\n\tstatic readonly ID = 'workbench.contrib.interactiveInputContentProvider';\n\n\tprivate readonly _registration: IDisposable;\n\n\tconstructor(\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t) {\n\t\tthis._registration = textModelService.registerTextModelContentProvider(Schemas.vscodeInteractiveInput, this);\n\t}\n\n\tdispose(): void {\n\t\tthis._registration.dispose();\n\t}\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\tif (existing) {\n\t\t\treturn existing;\n\t\t}\n\t\tconst result: ITextModel | null = this._modelService.createModel('', null, resource, false);\n\t\treturn result;\n\t}\n}\n\nfunction createEditor(resource: URI, instantiationService: IInstantiationService): EditorInput {\n\tconst counter = /\\/Interactive-(\\d+)/.exec(resource.path);\n\tconst inputBoxPath = counter && counter[1] ? `/InteractiveInput-${counter[1]}` : 'InteractiveInput';\n\tconst inputUri = URI.from({ scheme: Schemas.vscodeInteractiveInput, path: inputBoxPath });\n\tconst editorInput = InteractiveEditorInput.create(instantiationService, resource, inputUri);\n\n\treturn editorInput;\n}\n\nclass InteractiveWindowWorkingCopyEditorHandler extends Disposable implements IWorkbenchContribution, IWorkingCopyEditorHandler {\n\n\tstatic readonly ID = 'workbench.contrib.interactiveWindowWorkingCopyEditorHandler';\n\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IWorkingCopyEditorService private readonly _workingCopyEditorService: IWorkingCopyEditorService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\n\t) {\n\t\tsuper();\n\n\t\tthis._installHandler();\n\t}\n\n\thandles(workingCopy: IWorkingCopyIdentifier): boolean {\n\t\tconst viewType = this._getViewType(workingCopy);\n\t\treturn !!viewType && viewType === 'interactive';\n\n\t}\n\n\tisOpen(workingCopy: IWorkingCopyIdentifier, editor: EditorInput): boolean {\n\t\tif (!this.handles(workingCopy)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn editor instanceof InteractiveEditorInput && isEqual(workingCopy.resource, editor.resource);\n\t}\n\n\tcreateEditor(workingCopy: IWorkingCopyIdentifier): EditorInput {\n\t\treturn createEditor(workingCopy.resource, this._instantiationService);\n\t}\n\n\tprivate async _installHandler(): Promise<void> {\n\t\tawait this._extensionService.whenInstalledExtensionsRegistered();\n\n\t\tthis._register(this._workingCopyEditorService.registerHandler(this));\n\t}\n\n\tprivate _getViewType(workingCopy: IWorkingCopyIdentifier): string | undefined {\n\t\treturn NotebookWorkingCopyTypeIdentifier.parse(workingCopy.typeId)?.viewType;\n\t}\n}\n\nregisterWorkbenchContribution2(InteractiveDocumentContribution.ID, InteractiveDocumentContribution, WorkbenchPhase.BlockRestore);\nregisterWorkbenchContribution2(InteractiveInputContentProvider.ID, InteractiveInputContentProvider, {\n\teditorTypeId: INTERACTIVE_WINDOW_EDITOR_ID\n});\nregisterWorkbenchContribution2(InteractiveWindowWorkingCopyEditorHandler.ID, InteractiveWindowWorkingCopyEditorHandler, {\n\teditorTypeId: INTERACTIVE_WINDOW_EDITOR_ID\n});\n\ntype interactiveEditorInputData = { resource: URI; inputResource: URI; name: string; language: string };\n\nexport class InteractiveEditorSerializer implements IEditorSerializer {\n\tpublic static readonly ID = InteractiveEditorInput.ID;\n\n\tcanSerialize(editor: EditorInput): editor is InteractiveEditorInput {\n\t\tif (!(editor instanceof InteractiveEditorInput)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn URI.isUri(editor.primary.resource) && URI.isUri(editor.inputResource);\n\t}\n\n\tserialize(input: EditorInput): string | undefined {\n\t\tif (!this.canSerialize(input)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn JSON.stringify({\n\t\t\tresource: input.primary.resource,\n\t\t\tinputResource: input.inputResource,\n\t\t\tname: input.getName(),\n\t\t\tlanguage: input.language\n\t\t});\n\t}\n\n\tdeserialize(instantiationService: IInstantiationService, raw: string) {\n\t\tconst data = <interactiveEditorInputData>parse(raw);\n\t\tif (!data) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst { resource, inputResource, name, language } = data;\n\t\tif (!URI.isUri(resource) || !URI.isUri(inputResource)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst input = InteractiveEditorInput.create(instantiationService, resource, inputResource, name, language);\n\t\treturn input;\n\t}\n}\n\nRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory)\n\t.registerEditorSerializer(\n\t\tInteractiveEditorSerializer.ID,\n\t\tInteractiveEditorSerializer);\n\nregisterSingleton(IInteractiveHistoryService, InteractiveHistoryService, InstantiationType.Delayed);\nregisterSingleton(IInteractiveDocumentService, InteractiveDocumentService, InstantiationType.Delayed);\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: '_interactive.open',\n\t\t\ttitle: localize2('interactive.open', 'Open Interactive Window'),\n\t\t\tf1: false,\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize('interactive.open', 'Open Interactive Window'),\n\t\t\t\targs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'showOptions',\n\t\t\t\t\t\tdescription: 'Show Options',\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t'viewColumn': {\n\t\t\t\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t\t\t\tdefault: -1\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'preserveFocus': {\n\t\t\t\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\t\t\t\tdefault: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'resource',\n\t\t\t\t\t\tdescription: 'Interactive resource Uri',\n\t\t\t\t\t\tisOptional: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'controllerId',\n\t\t\t\t\t\tdescription: 'Notebook controller Id',\n\t\t\t\t\t\tisOptional: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\tdescription: 'Notebook editor title',\n\t\t\t\t\t\tisOptional: true\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, showOptions?: number | { viewColumn?: number; preserveFocus?: boolean }, resource?: URI, id?: string, title?: string): Promise<{ notebookUri: URI; inputUri: URI; notebookEditorId?: string }> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorGroupService = accessor.get(IEditorGroupsService);\n\t\tconst historyService = accessor.get(IInteractiveHistoryService);\n\t\tconst kernelService = accessor.get(INotebookKernelService);\n\t\tconst logService = accessor.get(ILogService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst group = columnToEditorGroup(editorGroupService, configurationService, typeof showOptions === 'number' ? showOptions : showOptions?.viewColumn);\n\t\tconst editorOptions = {\n\t\t\tactivation: EditorActivation.PRESERVE,\n\t\t\tpreserveFocus: typeof showOptions !== 'number' ? (showOptions?.preserveFocus ?? false) : false\n\t\t};\n\n\t\tif (resource && extname(resource) === '.interactive') {\n\t\t\tlogService.debug('Open interactive window from resource:', resource.toString());\n\t\t\tconst resourceUri = URI.revive(resource);\n\t\t\tconst editors = editorService.findEditors(resourceUri).filter(id => id.editor instanceof InteractiveEditorInput && id.editor.resource?.toString() === resourceUri.toString());\n\t\t\tif (editors.length) {\n\t\t\t\tlogService.debug('Find existing interactive window:', resource.toString());\n\t\t\t\tconst editorInput = editors[0].editor as InteractiveEditorInput;\n\t\t\t\tconst currentGroup = editors[0].groupId;\n\t\t\t\tconst editor = await editorService.openEditor(editorInput, editorOptions, currentGroup);\n\t\t\t\tconst editorControl = editor?.getControl() as ReplEditorControl;\n\n\t\t\t\treturn {\n\t\t\t\t\tnotebookUri: editorInput.resource,\n\t\t\t\t\tinputUri: editorInput.inputResource,\n\t\t\t\t\tnotebookEditorId: editorControl?.notebookEditor?.getId()\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst existingNotebookDocument = new Set<string>();\n\t\teditorService.getEditors(EditorsOrder.SEQUENTIAL).forEach(editor => {\n\t\t\tif (editor.editor.resource) {\n\t\t\t\texistingNotebookDocument.add(editor.editor.resource.toString());\n\t\t\t}\n\t\t});\n\n\t\tlet notebookUri: URI | undefined = undefined;\n\t\tlet inputUri: URI | undefined = undefined;\n\t\tlet counter = 1;\n\t\tdo {\n\t\t\tnotebookUri = URI.from({ scheme: Schemas.untitled, path: `/Interactive-${counter}.interactive` });\n\t\t\tinputUri = URI.from({ scheme: Schemas.vscodeInteractiveInput, path: `/InteractiveInput-${counter}` });\n\n\t\t\tcounter++;\n\t\t} while (existingNotebookDocument.has(notebookUri.toString()));\n\t\tInteractiveEditorInput.setName(notebookUri, title);\n\n\t\tlogService.debug('Open new interactive window:', notebookUri.toString(), inputUri.toString());\n\n\t\tif (id) {\n\t\t\tconst allKernels = kernelService.getMatchingKernel({ uri: notebookUri, notebookType: 'interactive' }).all;\n\t\t\tconst preferredKernel = allKernels.find(kernel => kernel.id === id);\n\t\t\tif (preferredKernel) {\n\t\t\t\tkernelService.preselectKernelForNotebook(preferredKernel, { uri: notebookUri, notebookType: 'interactive' });\n\t\t\t}\n\t\t}\n\n\t\thistoryService.clearHistory(notebookUri);\n\t\tconst editorInput: IUntypedEditorInput = { resource: notebookUri, options: editorOptions };\n\t\tconst editorPane = await editorService.openEditor(editorInput, group);\n\t\tconst editorControl = editorPane?.getControl() as ReplEditorControl;\n\t\t// Extensions must retain references to these URIs to manipulate the interactive editor\n\t\tlogService.debug('New interactive window opened. Notebook editor id', editorControl?.notebookEditor?.getId());\n\t\treturn { notebookUri, inputUri, notebookEditorId: editorControl?.notebookEditor?.getId() };\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.execute',\n\t\t\ttitle: localize2('interactive.execute', 'Execute Code'),\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tkeybinding: [{\n\t\t\t\t// when: NOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tIS_COMPOSITE_NOTEBOOK,\n\t\t\t\t\tContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive')\n\t\t\t\t),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT\n\t\t\t}, {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tIS_COMPOSITE_NOTEBOOK,\n\t\t\t\t\tContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive'),\n\t\t\t\t\tContextKeyExpr.equals('config.interactiveWindow.executeWithShiftEnter', true)\n\t\t\t\t),\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.Enter,\n\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT\n\t\t\t}, {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tIS_COMPOSITE_NOTEBOOK,\n\t\t\t\t\tContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive'),\n\t\t\t\t\tContextKeyExpr.equals('config.interactiveWindow.executeWithShiftEnter', false)\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT\n\t\t\t}],\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.InteractiveInputExecute\n\t\t\t\t},\n\t\t\t],\n\t\t\ticon: icons.executeIcon,\n\t\t\tf1: false,\n\t\t\tmetadata: {\n\t\t\t\tdescription: 'Execute the Contents of the Input Box',\n\t\t\t\targs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'resource',\n\t\t\t\t\t\tdescription: 'Interactive resource Uri',\n\t\t\t\t\t\tisOptional: true\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, context?: UriComponents): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst bulkEditService = accessor.get(IBulkEditService);\n\t\tconst historyService = accessor.get(IInteractiveHistoryService);\n\t\tconst notebookEditorService = accessor.get(INotebookEditorService);\n\t\tlet editorControl: IEditorControl | undefined;\n\t\tif (context) {\n\t\t\tconst resourceUri = URI.revive(context);\n\t\t\tconst editors = editorService.findEditors(resourceUri);\n\t\t\tfor (const found of editors) {\n\t\t\t\tif (found.editor.typeId === InteractiveEditorInput.ID) {\n\t\t\t\t\tconst editor = await editorService.openEditor(found.editor, found.groupId);\n\t\t\t\t\teditorControl = editor?.getControl();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\teditorControl = editorService.activeEditorPane?.getControl();\n\t\t}\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\tconst notebookDocument = editorControl.notebookEditor.textModel;\n\t\t\tconst textModel = editorControl.activeCodeEditor?.getModel();\n\t\t\tconst activeKernel = editorControl.notebookEditor.activeKernel;\n\t\t\tconst language = activeKernel?.supportedLanguages[0] ?? PLAINTEXT_LANGUAGE_ID;\n\n\t\t\tif (notebookDocument && textModel && editorControl.activeCodeEditor) {\n\t\t\t\tconst index = notebookDocument.length;\n\t\t\t\tconst value = textModel.getValue();\n\n\t\t\t\tif (isFalsyOrWhitespace(value)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst ctrl = InlineChatController.get(editorControl.activeCodeEditor);\n\t\t\t\tif (ctrl) {\n\t\t\t\t\tctrl.acceptSession();\n\t\t\t\t}\n\n\t\t\t\thistoryService.replaceLast(notebookDocument.uri, value);\n\t\t\t\thistoryService.addToHistory(notebookDocument.uri, '');\n\t\t\t\ttextModel.setValue('');\n\n\t\t\t\tconst collapseState = editorControl.notebookEditor.notebookOptions.getDisplayOptions().interactiveWindowCollapseCodeCells === 'fromEditor' ?\n\t\t\t\t\t{\n\t\t\t\t\t\tinputCollapsed: false,\n\t\t\t\t\t\toutputCollapsed: false\n\t\t\t\t\t} :\n\t\t\t\t\tundefined;\n\n\t\t\t\tawait bulkEditService.apply([\n\t\t\t\t\tnew ResourceNotebookCellEdit(notebookDocument.uri,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\t\tcells: [{\n\t\t\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\t\t\tlanguage,\n\t\t\t\t\t\t\t\tsource: value,\n\t\t\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\t\t\tcollapseState\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t]);\n\n\t\t\t\t// reveal the cell into view first\n\t\t\t\tconst range = { start: index, end: index + 1 };\n\t\t\t\teditorControl.notebookEditor.revealCellRangeInView(range);\n\t\t\t\tawait editorControl.notebookEditor.executeNotebookCells(editorControl.notebookEditor.getCellsInRange({ start: index, end: index + 1 }));\n\n\t\t\t\t// update the selection and focus in the extension host model\n\t\t\t\tconst editor = notebookEditorService.getNotebookEditor(editorControl.notebookEditor.getId());\n\t\t\t\tif (editor) {\n\t\t\t\t\teditor.setSelections([range]);\n\t\t\t\t\teditor.setFocus(range);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.input.clear',\n\t\t\ttitle: localize2('interactive.input.clear', 'Clear the interactive window input editor contents'),\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tf1: false\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\tconst notebookDocument = editorControl.notebookEditor.textModel;\n\t\t\tconst editor = editorControl.activeCodeEditor;\n\t\t\tconst range = editor?.getModel()?.getFullModelRange();\n\n\n\t\t\tif (notebookDocument && editor && range) {\n\t\t\t\teditor.executeEdits('', [EditOperation.replace(range, null)]);\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.history.previous',\n\t\t\ttitle: localize2('interactive.history.previous', 'Previous value in history'),\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tf1: false,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.notEqualsTo('bottom'),\n\t\t\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.notEqualsTo('none'),\n\t\t\t\t\tSuggestContext.Visible.toNegated()\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.UpArrow,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tprecondition: ContextKeyExpr.and(IS_COMPOSITE_NOTEBOOK, NOTEBOOK_EDITOR_FOCUSED.negate())\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst historyService = accessor.get(IInteractiveHistoryService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\tconst notebookDocument = editorControl.notebookEditor.textModel;\n\t\t\tconst textModel = editorControl.activeCodeEditor?.getModel();\n\n\t\t\tif (notebookDocument && textModel) {\n\t\t\t\tconst previousValue = historyService.getPreviousValue(notebookDocument.uri);\n\t\t\t\tif (previousValue) {\n\t\t\t\t\ttextModel.setValue(previousValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.history.next',\n\t\t\ttitle: localize2('interactive.history.next', 'Next value in history'),\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tf1: false,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.notEqualsTo('top'),\n\t\t\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.notEqualsTo('none'),\n\t\t\t\t\tSuggestContext.Visible.toNegated()\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.DownArrow,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tprecondition: ContextKeyExpr.and(IS_COMPOSITE_NOTEBOOK, NOTEBOOK_EDITOR_FOCUSED.negate())\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst historyService = accessor.get(IInteractiveHistoryService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\tconst notebookDocument = editorControl.notebookEditor.textModel;\n\t\t\tconst textModel = editorControl.activeCodeEditor?.getModel();\n\n\t\t\tif (notebookDocument && textModel) {\n\t\t\t\tconst nextValue = historyService.getNextValue(notebookDocument.uri);\n\t\t\t\tif (nextValue !== null) {\n\t\t\t\t\ttextModel.setValue(nextValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.scrollToTop',\n\t\t\ttitle: localize('interactiveScrollToTop', 'Scroll to Top'),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive'),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Home,\n\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyCode.UpArrow },\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tcategory: interactiveWindowCategory,\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\tif (editorControl.notebookEditor.getLength() === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\teditorControl.notebookEditor.revealCellRangeInView({ start: 0, end: 1 });\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.scrollToBottom',\n\t\t\ttitle: localize('interactiveScrollToBottom', 'Scroll to Bottom'),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive'),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.End,\n\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyCode.DownArrow },\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tcategory: interactiveWindowCategory,\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\tif (editorControl.notebookEditor.getLength() === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst len = editorControl.notebookEditor.getLength();\n\t\t\teditorControl.notebookEditor.revealCellRangeInView({ start: len - 1, end: len });\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.input.focus',\n\t\t\ttitle: localize2('interactive.input.focus', 'Focus Input Editor'),\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: InteractiveWindowOpen\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\teditorService.activeEditorPane?.focus();\n\t\t}\n\t\telse {\n\t\t\t// find and open the most recent interactive window\n\t\t\tconst openEditors = editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE);\n\t\t\tconst interactiveWindow = Iterable.find(openEditors, identifier => { return identifier.editor.typeId === InteractiveEditorInput.ID; });\n\t\t\tif (interactiveWindow) {\n\t\t\t\tconst editorInput = interactiveWindow.editor as InteractiveEditorInput;\n\t\t\t\tconst currentGroup = interactiveWindow.groupId;\n\t\t\t\tconst editor = await editorService.openEditor(editorInput, currentGroup);\n\t\t\t\tconst editorControl = editor?.getControl();\n\n\t\t\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\t\t\teditorService.activeEditorPane?.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'interactive.history.focus',\n\t\t\ttitle: localize2('interactive.history.focus', 'Focus History'),\n\t\t\tcategory: interactiveWindowCategory,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: ContextKeyExpr.equals('activeEditor', 'workbench.editor.interactive'),\n\t\t\t},\n\t\t\tkeybinding: [{\n\t\t\t\t// On mac, require that the cursor is at the top of the input, to avoid stealing cmd+up to move the cursor to the top\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.notEqualsTo('bottom'),\n\t\t\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.notEqualsTo('none')),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 5,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow\n\t\t\t},\n\t\t\t{\n\t\t\t\twhen: ContextKeyExpr.or(IsWindowsContext, IsLinuxContext),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow,\n\t\t\t}],\n\t\t\tprecondition: ContextKeyExpr.and(IS_COMPOSITE_NOTEBOOK, NOTEBOOK_EDITOR_FOCUSED.negate())\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\t\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\t\teditorControl.notebookEditor.focus();\n\t\t}\n\t}\n});\n\nregisterColor('interactive.activeCodeBorder', {\n\tdark: ifDefinedThenElse(peekViewBorder, peekViewBorder, '#007acc'),\n\tlight: ifDefinedThenElse(peekViewBorder, peekViewBorder, '#007acc'),\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, localize('interactive.activeCodeBorder', 'The border color for the current interactive code cell when the editor has focus.'));\n\nregisterColor('interactive.inactiveCodeBorder', {\n\t//dark: theme.getColor(listInactiveSelectionBackground) ?? transparent(listInactiveSelectionBackground, 1),\n\tdark: ifDefinedThenElse(listInactiveSelectionBackground, listInactiveSelectionBackground, '#37373D'),\n\tlight: ifDefinedThenElse(listInactiveSelectionBackground, listInactiveSelectionBackground, '#E4E6F1'),\n\thcDark: PANEL_BORDER,\n\thcLight: PANEL_BORDER\n}, localize('interactive.inactiveCodeBorder', 'The border color for the current interactive code cell when the editor does not have focus.'));\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\tid: 'interactiveWindow',\n\torder: 100,\n\ttype: 'object',\n\t'properties': {\n\t\t[ReplEditorSettings.interactiveWindowAlwaysScrollOnNewCell]: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tmarkdownDescription: localize('interactiveWindow.alwaysScrollOnNewCell', \"Automatically scroll the interactive window to show the output of the last statement executed. If this value is false, the window will only scroll if the last cell was already the one scrolled to.\")\n\t\t},\n\t\t[NotebookSetting.InteractiveWindowPromptToSave]: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\tmarkdownDescription: localize('interactiveWindow.promptToSaveOnClose', \"Prompt to save the interactive window when it is closed. Only new interactive windows will be affected by this setting change.\")\n\t\t},\n\t\t[ReplEditorSettings.executeWithShiftEnter]: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t\tmarkdownDescription: localize('interactiveWindow.executeWithShiftEnter', \"Execute the Interactive Window (REPL) input box with shift+enter, so that enter can be used to create a newline.\"),\n\t\t\ttags: ['replExecute']\n\t\t},\n\t\t[ReplEditorSettings.showExecutionHint]: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t\tmarkdownDescription: localize('interactiveWindow.showExecutionHint', \"Display a hint in the Interactive Window (REPL) input box to indicate how to execute code.\"),\n\t\t\ttags: ['replExecute']\n\t\t}\n\t}\n});\n"]}