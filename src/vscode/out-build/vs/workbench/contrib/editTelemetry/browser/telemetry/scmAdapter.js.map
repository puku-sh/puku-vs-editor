{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/editTelemetry/browser/telemetry/scmAdapter.ts","vs/workbench/contrib/editTelemetry/browser/telemetry/scmAdapter.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,kBAAkB,EAAE,MAAM,qCAAqC,CAAC;AACzE,OAAO,EAAE,KAAK,EAAE,MAAM,qCAAqC,CAAC;AAC5D,OAAO,EAAE,yBAAyB,EAAwB,OAAO,EAAE,MAAM,0CAA0C,CAAC;AAEpH,OAAO,EAAkB,WAAW,EAAE,MAAM,4BAA4B,CAAC;AAElE,IAAM,UAAU,GAAhB,MAAM,UAAU;IAKtB,YACc,WAAyC;QAAxB,gBAAW,GAAX,WAAW,CAAa;QALtC,WAAM,GAAG,IAAI,kBAAkB,CAAC,CAAC,IAAoB,EAAE,EAAE,CAAC,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QAOpG,IAAI,CAAC,mBAAmB,GAAG,yBAAyB,CAAC,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC,CAAC;IACpJ,CAAC;IAEM,OAAO,CAAC,GAAQ,EAAE,MAA2B;QACnD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtC,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QACjD,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,OAAO,SAAS,CAAC;QAClB,CAAC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;CACD,CAAA;AAnBY,UAAU;IAMpB,WAAA,WAAW,CAAA;GAND,UAAU,CAmBtB;;AAED,MAAM,OAAO,cAAc;IAI1B,YACkB,KAAqB;QAArB,UAAK,GAAL,KAAK,CAAgB;QAJvB,sBAAiB,GAAoC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QAC5J,sBAAiB,GAAoC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC,CAAC;IAKhL,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,GAAQ;QACvB,OAAO,KAAK,CAAC;IACd,CAAC;CACD","file":"scmAdapter.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { WeakCachedFunction } from '../../../../../base/common/cache.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { observableSignalFromEvent, IReader, IObservable, derived } from '../../../../../base/common/observable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ISCMRepository, ISCMService } from '../../../scm/common/scm.js';\n\nexport class ScmAdapter {\n\tprivate readonly _repos = new WeakCachedFunction((repo: ISCMRepository) => new ScmRepoAdapter(repo));\n\n\tprivate readonly _reposChangedSignal;\n\n\tconstructor(\n\t\t@ISCMService private readonly _scmService: ISCMService\n\t) {\n\t\tthis._reposChangedSignal = observableSignalFromEvent(this, Event.any(this._scmService.onDidAddRepository, this._scmService.onDidRemoveRepository));\n\t}\n\n\tpublic getRepo(uri: URI, reader: IReader | undefined): ScmRepoAdapter | undefined {\n\t\tthis._reposChangedSignal.read(reader);\n\t\tconst repo = this._scmService.getRepository(uri);\n\t\tif (!repo) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._repos.get(repo);\n\t}\n}\n\nexport class ScmRepoAdapter {\n\tpublic readonly headBranchNameObs: IObservable<string | undefined> = derived(reader => this._repo.provider.historyProvider.read(reader)?.historyItemRef.read(reader)?.name);\n\tpublic readonly headCommitHashObs: IObservable<string | undefined> = derived(reader => this._repo.provider.historyProvider.read(reader)?.historyItemRef.read(reader)?.revision);\n\n\tconstructor(\n\t\tprivate readonly _repo: ISCMRepository\n\t) {\n\t}\n\n\tasync isIgnored(uri: URI): Promise<boolean> {\n\t\treturn false;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { WeakCachedFunction } from '../../../../../base/common/cache.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { observableSignalFromEvent, IReader, IObservable, derived } from '../../../../../base/common/observable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ISCMRepository, ISCMService } from '../../../scm/common/scm.js';\n\nexport class ScmAdapter {\n\tprivate readonly _repos = new WeakCachedFunction((repo: ISCMRepository) => new ScmRepoAdapter(repo));\n\n\tprivate readonly _reposChangedSignal;\n\n\tconstructor(\n\t\t@ISCMService private readonly _scmService: ISCMService\n\t) {\n\t\tthis._reposChangedSignal = observableSignalFromEvent(this, Event.any(this._scmService.onDidAddRepository, this._scmService.onDidRemoveRepository));\n\t}\n\n\tpublic getRepo(uri: URI, reader: IReader | undefined): ScmRepoAdapter | undefined {\n\t\tthis._reposChangedSignal.read(reader);\n\t\tconst repo = this._scmService.getRepository(uri);\n\t\tif (!repo) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._repos.get(repo);\n\t}\n}\n\nexport class ScmRepoAdapter {\n\tpublic readonly headBranchNameObs: IObservable<string | undefined> = derived(reader => this._repo.provider.historyProvider.read(reader)?.historyItemRef.read(reader)?.name);\n\tpublic readonly headCommitHashObs: IObservable<string | undefined> = derived(reader => this._repo.provider.historyProvider.read(reader)?.historyItemRef.read(reader)?.revision);\n\n\tconstructor(\n\t\tprivate readonly _repo: ISCMRepository\n\t) {\n\t}\n\n\tasync isIgnored(uri: URI): Promise<boolean> {\n\t\treturn false;\n\t}\n}\n"]}