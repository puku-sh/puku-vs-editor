{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/editTelemetry/browser/telemetry/aiEditTelemetry/aiEditTelemetryServiceImpl.ts","vs/workbench/contrib/editTelemetry/browser/telemetry/aiEditTelemetry/aiEditTelemetryServiceImpl.ts"],"names":[],"mappings":"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","file":"aiEditTelemetryServiceImpl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EditSuggestionId } from '../../../../../../editor/common/textModelEditSource.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ITelemetryService } from '../../../../../../platform/telemetry/common/telemetry.js';\nimport { TelemetryTrustedValue } from '../../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { DataChannelForwardingTelemetryService, forwardToChannelIf, isCopilotLikeExtension } from '../../../../../../platform/dataChannel/browser/forwardingTelemetryService.js';\nimport { IAiEditTelemetryService, IEditTelemetryCodeAcceptedData, IEditTelemetryCodeSuggestedData } from './aiEditTelemetryService.js';\nimport { IRandomService } from '../../randomService.js';\n\nexport class AiEditTelemetryServiceImpl implements IAiEditTelemetryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _telemetryService: ITelemetryService;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IRandomService private readonly _randomService: IRandomService,\n\t) {\n\t\tthis._telemetryService = this.instantiationService.createInstance(DataChannelForwardingTelemetryService);\n\t}\n\n\tpublic createSuggestionId(data: Omit<IEditTelemetryCodeSuggestedData, 'suggestionId'>): EditSuggestionId {\n\t\tconst suggestionId = EditSuggestionId.newId(ns => this._randomService.generatePrefixedUuid(ns));\n\t\tthis._telemetryService.publicLog2<{\n\t\t\teventId: string | undefined;\n\t\t\tsuggestionId: string | undefined;\n\n\t\t\tpresentation: 'codeBlock' | 'highlightedEdit' | 'inlineCompletion' | 'nextEditSuggestion' | undefined;\n\t\t\tfeature: 'sideBarChat' | 'inlineChat' | 'inlineSuggestion' | string | undefined;\n\n\t\t\tsourceExtensionId: string | undefined;\n\t\t\tsourceExtensionVersion: string | undefined;\n\t\t\tsourceProviderId: string | undefined;\n\n\t\t\tlanguageId: string | undefined;\n\t\t\teditCharsInserted: number | undefined;\n\t\t\teditCharsDeleted: number | undefined;\n\t\t\teditLinesInserted: number | undefined;\n\t\t\teditLinesDeleted: number | undefined;\n\n\t\t\tmodeId: 'ask' | 'edit' | 'agent' | 'custom' | 'applyCodeBlock' | undefined;\n\t\t\tmodelId: TelemetryTrustedValue<string | undefined>;\n\t\t\tapplyCodeBlockSuggestionId: string | undefined;\n\t\t}, {\n\t\t\towner: 'hediet';\n\t\t\tcomment: 'Reports when code from AI is suggested to the user. @sentToGitHub';\n\n\t\t\teventId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this event.' };\n\t\t\tsuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this suggestion. Not always set.' };\n\n\t\t\tpresentation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'How the code suggestion is presented to the user. See #IEditTelemetryBaseData.presentation for possible values.' };\n\t\t\tfeature: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The feature the code suggestion came from. See #IEditTelemetryBaseData.feature for possible values.' };\n\n\t\t\tsourceExtensionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The extension that provided the code suggestion, if any.' };\n\t\t\tsourceExtensionVersion: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The version of the extension that provided the code suggestion, if any.' };\n\t\t\tsourceProviderId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The provider ID of the source that provided the code suggestion, if any.' };\n\n\t\t\tlanguageId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The programming language of the code suggestion.' };\n\t\t\teditCharsInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters inserted in the edit.' };\n\t\t\teditCharsDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters deleted in the edit.' };\n\t\t\teditLinesInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines inserted in the edit.' };\n\t\t\teditLinesDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines deleted in the edit.' };\n\n\t\t\tmodeId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The mode. See #IEditTelemetryBaseData.modeId for possible values.' };\n\t\t\tmodelId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The AI model used to generate the suggestion.' };\n\t\t\tapplyCodeBlockSuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'If this suggestion is for applying a suggested code block, this is the id of the suggested code block.' };\n\t\t}>('editTelemetry.codeSuggested', {\n\t\t\teventId: this._randomService.generatePrefixedUuid('evt'),\n\t\t\tsuggestionId: suggestionId as unknown as string,\n\t\t\tpresentation: data.presentation,\n\t\t\tfeature: data.feature,\n\n\t\t\tsourceExtensionId: data.source?.extensionId,\n\t\t\tsourceExtensionVersion: data.source?.extensionVersion,\n\t\t\tsourceProviderId: data.source?.providerId,\n\n\t\t\tlanguageId: data.languageId,\n\t\t\teditCharsInserted: data.editDeltaInfo?.charsAdded,\n\t\t\teditCharsDeleted: data.editDeltaInfo?.charsRemoved,\n\t\t\teditLinesInserted: data.editDeltaInfo?.linesAdded,\n\t\t\teditLinesDeleted: data.editDeltaInfo?.linesRemoved,\n\n\t\t\tmodeId: data.modeId,\n\t\t\tmodelId: new TelemetryTrustedValue(data.modelId),\n\t\t\tapplyCodeBlockSuggestionId: data.applyCodeBlockSuggestionId as unknown as string,\n\n\t\t\t...forwardToChannelIf(isCopilotLikeExtension(data.source?.extensionId)),\n\t\t});\n\n\t\treturn suggestionId;\n\t}\n\n\tpublic handleCodeAccepted(data: IEditTelemetryCodeAcceptedData): void {\n\t\tthis._telemetryService.publicLog2<{\n\t\t\teventId: string | undefined;\n\t\t\tsuggestionId: string | undefined;\n\n\t\t\tpresentation: 'codeBlock' | 'highlightedEdit' | 'inlineCompletion' | 'nextEditSuggestion' | undefined;\n\t\t\tfeature: 'sideBarChat' | 'inlineChat' | 'inlineSuggestion' | string | undefined;\n\n\t\t\tsourceExtensionId: string | undefined;\n\t\t\tsourceExtensionVersion: string | undefined;\n\t\t\tsourceProviderId: string | undefined;\n\n\n\t\t\tlanguageId: string | undefined;\n\t\t\teditCharsInserted: number | undefined;\n\t\t\teditCharsDeleted: number | undefined;\n\t\t\teditLinesInserted: number | undefined;\n\t\t\teditLinesDeleted: number | undefined;\n\n\t\t\tmodeId: 'ask' | 'edit' | 'agent' | 'custom' | 'applyCodeBlock' | undefined;\n\t\t\tmodelId: TelemetryTrustedValue<string | undefined>;\n\t\t\tapplyCodeBlockSuggestionId: string | undefined;\n\n\t\t\tacceptanceMethod:\n\t\t\t| 'insertAtCursor'\n\t\t\t| 'insertInNewFile'\n\t\t\t| 'copyManual'\n\t\t\t| 'copyButton'\n\t\t\t| 'applyCodeBlock'\n\t\t\t| 'accept';\n\t\t}, {\n\t\t\towner: 'hediet';\n\t\t\tcomment: 'Reports when code from AI is accepted by the user. @sentToGitHub';\n\n\t\t\teventId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this event.' };\n\t\t\tsuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this suggestion. Not always set.' };\n\n\t\t\tpresentation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'How the code suggestion is presented to the user. See #IEditTelemetryBaseData.presentation for possible values.' };\n\t\t\tfeature: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The feature the code suggestion came from. See #IEditTelemetryBaseData.feature for possible values.' };\n\n\t\t\tsourceExtensionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The extension that provided the code suggestion, if any.' };\n\t\t\tsourceExtensionVersion: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The version of the extension that provided the code suggestion, if any.' };\n\t\t\tsourceProviderId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The provider ID of the source that provided the code suggestion, if any.' };\n\n\t\t\tlanguageId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The programming language of the code suggestion.' };\n\t\t\teditCharsInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters inserted in the edit.' };\n\t\t\teditCharsDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters deleted in the edit.' };\n\t\t\teditLinesInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines inserted in the edit.' };\n\t\t\teditLinesDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines deleted in the edit.' };\n\n\t\t\tmodeId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The mode. See #IEditTelemetryBaseData.modeId for possible values.' };\n\t\t\tmodelId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The AI model used to generate the suggestion.' };\n\n\t\t\tapplyCodeBlockSuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'If this suggestion is for applying a suggested code block, this is the id of the suggested code block.' };\n\t\t\tacceptanceMethod: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'How the user accepted the code suggestion. See #IEditTelemetryCodeAcceptedData.acceptanceMethod for possible values.' };\n\t\t}>('editTelemetry.codeAccepted', {\n\t\t\teventId: this._randomService.generatePrefixedUuid('evt'),\n\t\t\tsuggestionId: data.suggestionId as unknown as string,\n\t\t\tpresentation: data.presentation,\n\t\t\tfeature: data.feature,\n\n\t\t\tsourceExtensionId: data.source?.extensionId,\n\t\t\tsourceExtensionVersion: data.source?.extensionVersion,\n\t\t\tsourceProviderId: data.source?.providerId,\n\n\t\t\tlanguageId: data.languageId,\n\t\t\teditCharsInserted: data.editDeltaInfo?.charsAdded,\n\t\t\teditCharsDeleted: data.editDeltaInfo?.charsRemoved,\n\t\t\teditLinesInserted: data.editDeltaInfo?.linesAdded,\n\t\t\teditLinesDeleted: data.editDeltaInfo?.linesRemoved,\n\n\t\t\tmodeId: data.modeId,\n\t\t\tmodelId: new TelemetryTrustedValue(data.modelId),\n\t\t\tapplyCodeBlockSuggestionId: data.applyCodeBlockSuggestionId as unknown as string,\n\t\t\tacceptanceMethod: data.acceptanceMethod,\n\n\t\t\t...forwardToChannelIf(isCopilotLikeExtension(data.source?.extensionId)),\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EditSuggestionId } from '../../../../../../editor/common/textModelEditSource.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ITelemetryService } from '../../../../../../platform/telemetry/common/telemetry.js';\nimport { TelemetryTrustedValue } from '../../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { DataChannelForwardingTelemetryService, forwardToChannelIf, isCopilotLikeExtension } from '../../../../../../platform/dataChannel/browser/forwardingTelemetryService.js';\nimport { IAiEditTelemetryService, IEditTelemetryCodeAcceptedData, IEditTelemetryCodeSuggestedData } from './aiEditTelemetryService.js';\nimport { IRandomService } from '../../randomService.js';\n\nexport class AiEditTelemetryServiceImpl implements IAiEditTelemetryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _telemetryService: ITelemetryService;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IRandomService private readonly _randomService: IRandomService,\n\t) {\n\t\tthis._telemetryService = this.instantiationService.createInstance(DataChannelForwardingTelemetryService);\n\t}\n\n\tpublic createSuggestionId(data: Omit<IEditTelemetryCodeSuggestedData, 'suggestionId'>): EditSuggestionId {\n\t\tconst suggestionId = EditSuggestionId.newId(ns => this._randomService.generatePrefixedUuid(ns));\n\t\tthis._telemetryService.publicLog2<{\n\t\t\teventId: string | undefined;\n\t\t\tsuggestionId: string | undefined;\n\n\t\t\tpresentation: 'codeBlock' | 'highlightedEdit' | 'inlineCompletion' | 'nextEditSuggestion' | undefined;\n\t\t\tfeature: 'sideBarChat' | 'inlineChat' | 'inlineSuggestion' | string | undefined;\n\n\t\t\tsourceExtensionId: string | undefined;\n\t\t\tsourceExtensionVersion: string | undefined;\n\t\t\tsourceProviderId: string | undefined;\n\n\t\t\tlanguageId: string | undefined;\n\t\t\teditCharsInserted: number | undefined;\n\t\t\teditCharsDeleted: number | undefined;\n\t\t\teditLinesInserted: number | undefined;\n\t\t\teditLinesDeleted: number | undefined;\n\n\t\t\tmodeId: 'ask' | 'edit' | 'agent' | 'custom' | 'applyCodeBlock' | undefined;\n\t\t\tmodelId: TelemetryTrustedValue<string | undefined>;\n\t\t\tapplyCodeBlockSuggestionId: string | undefined;\n\t\t}, {\n\t\t\towner: 'hediet';\n\t\t\tcomment: 'Reports when code from AI is suggested to the user. @sentToGitHub';\n\n\t\t\teventId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this event.' };\n\t\t\tsuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this suggestion. Not always set.' };\n\n\t\t\tpresentation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'How the code suggestion is presented to the user. See #IEditTelemetryBaseData.presentation for possible values.' };\n\t\t\tfeature: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The feature the code suggestion came from. See #IEditTelemetryBaseData.feature for possible values.' };\n\n\t\t\tsourceExtensionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The extension that provided the code suggestion, if any.' };\n\t\t\tsourceExtensionVersion: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The version of the extension that provided the code suggestion, if any.' };\n\t\t\tsourceProviderId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The provider ID of the source that provided the code suggestion, if any.' };\n\n\t\t\tlanguageId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The programming language of the code suggestion.' };\n\t\t\teditCharsInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters inserted in the edit.' };\n\t\t\teditCharsDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters deleted in the edit.' };\n\t\t\teditLinesInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines inserted in the edit.' };\n\t\t\teditLinesDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines deleted in the edit.' };\n\n\t\t\tmodeId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The mode. See #IEditTelemetryBaseData.modeId for possible values.' };\n\t\t\tmodelId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The AI model used to generate the suggestion.' };\n\t\t\tapplyCodeBlockSuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'If this suggestion is for applying a suggested code block, this is the id of the suggested code block.' };\n\t\t}>('editTelemetry.codeSuggested', {\n\t\t\teventId: this._randomService.generatePrefixedUuid('evt'),\n\t\t\tsuggestionId: suggestionId as unknown as string,\n\t\t\tpresentation: data.presentation,\n\t\t\tfeature: data.feature,\n\n\t\t\tsourceExtensionId: data.source?.extensionId,\n\t\t\tsourceExtensionVersion: data.source?.extensionVersion,\n\t\t\tsourceProviderId: data.source?.providerId,\n\n\t\t\tlanguageId: data.languageId,\n\t\t\teditCharsInserted: data.editDeltaInfo?.charsAdded,\n\t\t\teditCharsDeleted: data.editDeltaInfo?.charsRemoved,\n\t\t\teditLinesInserted: data.editDeltaInfo?.linesAdded,\n\t\t\teditLinesDeleted: data.editDeltaInfo?.linesRemoved,\n\n\t\t\tmodeId: data.modeId,\n\t\t\tmodelId: new TelemetryTrustedValue(data.modelId),\n\t\t\tapplyCodeBlockSuggestionId: data.applyCodeBlockSuggestionId as unknown as string,\n\n\t\t\t...forwardToChannelIf(isCopilotLikeExtension(data.source?.extensionId)),\n\t\t});\n\n\t\treturn suggestionId;\n\t}\n\n\tpublic handleCodeAccepted(data: IEditTelemetryCodeAcceptedData): void {\n\t\tthis._telemetryService.publicLog2<{\n\t\t\teventId: string | undefined;\n\t\t\tsuggestionId: string | undefined;\n\n\t\t\tpresentation: 'codeBlock' | 'highlightedEdit' | 'inlineCompletion' | 'nextEditSuggestion' | undefined;\n\t\t\tfeature: 'sideBarChat' | 'inlineChat' | 'inlineSuggestion' | string | undefined;\n\n\t\t\tsourceExtensionId: string | undefined;\n\t\t\tsourceExtensionVersion: string | undefined;\n\t\t\tsourceProviderId: string | undefined;\n\n\n\t\t\tlanguageId: string | undefined;\n\t\t\teditCharsInserted: number | undefined;\n\t\t\teditCharsDeleted: number | undefined;\n\t\t\teditLinesInserted: number | undefined;\n\t\t\teditLinesDeleted: number | undefined;\n\n\t\t\tmodeId: 'ask' | 'edit' | 'agent' | 'custom' | 'applyCodeBlock' | undefined;\n\t\t\tmodelId: TelemetryTrustedValue<string | undefined>;\n\t\t\tapplyCodeBlockSuggestionId: string | undefined;\n\n\t\t\tacceptanceMethod:\n\t\t\t| 'insertAtCursor'\n\t\t\t| 'insertInNewFile'\n\t\t\t| 'copyManual'\n\t\t\t| 'copyButton'\n\t\t\t| 'applyCodeBlock'\n\t\t\t| 'accept';\n\t\t}, {\n\t\t\towner: 'hediet';\n\t\t\tcomment: 'Reports when code from AI is accepted by the user. @sentToGitHub';\n\n\t\t\teventId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this event.' };\n\t\t\tsuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Unique identifier for this suggestion. Not always set.' };\n\n\t\t\tpresentation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'How the code suggestion is presented to the user. See #IEditTelemetryBaseData.presentation for possible values.' };\n\t\t\tfeature: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The feature the code suggestion came from. See #IEditTelemetryBaseData.feature for possible values.' };\n\n\t\t\tsourceExtensionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The extension that provided the code suggestion, if any.' };\n\t\t\tsourceExtensionVersion: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The version of the extension that provided the code suggestion, if any.' };\n\t\t\tsourceProviderId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The provider ID of the source that provided the code suggestion, if any.' };\n\n\t\t\tlanguageId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The programming language of the code suggestion.' };\n\t\t\teditCharsInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters inserted in the edit.' };\n\t\t\teditCharsDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of characters deleted in the edit.' };\n\t\t\teditLinesInserted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines inserted in the edit.' };\n\t\t\teditLinesDeleted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'Number of lines deleted in the edit.' };\n\n\t\t\tmodeId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The mode. See #IEditTelemetryBaseData.modeId for possible values.' };\n\t\t\tmodelId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The AI model used to generate the suggestion.' };\n\n\t\t\tapplyCodeBlockSuggestionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'If this suggestion is for applying a suggested code block, this is the id of the suggested code block.' };\n\t\t\tacceptanceMethod: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'How the user accepted the code suggestion. See #IEditTelemetryCodeAcceptedData.acceptanceMethod for possible values.' };\n\t\t}>('editTelemetry.codeAccepted', {\n\t\t\teventId: this._randomService.generatePrefixedUuid('evt'),\n\t\t\tsuggestionId: data.suggestionId as unknown as string,\n\t\t\tpresentation: data.presentation,\n\t\t\tfeature: data.feature,\n\n\t\t\tsourceExtensionId: data.source?.extensionId,\n\t\t\tsourceExtensionVersion: data.source?.extensionVersion,\n\t\t\tsourceProviderId: data.source?.providerId,\n\n\t\t\tlanguageId: data.languageId,\n\t\t\teditCharsInserted: data.editDeltaInfo?.charsAdded,\n\t\t\teditCharsDeleted: data.editDeltaInfo?.charsRemoved,\n\t\t\teditLinesInserted: data.editDeltaInfo?.linesAdded,\n\t\t\teditLinesDeleted: data.editDeltaInfo?.linesRemoved,\n\n\t\t\tmodeId: data.modeId,\n\t\t\tmodelId: new TelemetryTrustedValue(data.modelId),\n\t\t\tapplyCodeBlockSuggestionId: data.applyCodeBlockSuggestionId as unknown as string,\n\t\t\tacceptanceMethod: data.acceptanceMethod,\n\n\t\t\t...forwardToChannelIf(isCopilotLikeExtension(data.source?.extensionId)),\n\t\t});\n\t}\n}\n"]}