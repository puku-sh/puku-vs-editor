{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/editTelemetry/browser/helpers/utils.ts","vs/workbench/contrib/editTelemetry/browser/helpers/utils.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,qBAAqB,EAAE,MAAM,qCAAqC,CAAC;AAC5E,OAAO,EAAmB,YAAY,EAAE,MAAM,yCAAyC,CAAC;AACxF,OAAO,EAAyB,eAAe,EAAE,WAAW,EAAE,WAAW,EAAmB,MAAM,0CAA0C,CAAC;AAE7I,MAAM,UAAU,aAAa,CAA8B,KAAmB,EAAE,QAA6B,EAAE,WAAmC;IACjJ,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;QACjC,MAAM,QAAQ,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC;QACnC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;QACtD,OAAO,GAAG,CAAC;QACX,mDAAmD;IACpD,CAAC,EAAE,EAAsC,CAAC,CAAC;AAC5C,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAuB,GAAqC,EAAE,KAAmC,EAAE,KAAsB;IAC1J,MAAM,SAAS,GAAG,eAAe,CAAe,QAAQ,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;IACrE,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE;QACzD,WAAW,CAAC,EAAE,CAAC,EAAE;YAChB,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE,CAAC;gBACzB,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACpC,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC;IACJ,OAAO,SAAS,CAAC;AAClB,CAAC;AAED,MAAM,UAAU,wBAAwB,CAAa,GAAsC,EAAE,KAAsB;IAClH,OAAO,IAAI,qBAAqB,CAAiE,CAAC,CAAC,EAAE,EAAE;QACtG,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;YACtB,OAAO;QACR,CAAC;QACD,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,EAAE;YACvD,CAAC,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC,CAAC;QAEJ,OAAO,IAAI,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;YAC1B,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE;gBAC3B,GAAG,CAAC,SAAS,CAAC,CAAC;YAChB,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC","file":"utils.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AsyncIterableProducer } from '../../../../../base/common/async.js';\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservableWithChange, observableValue, runOnChange, transaction, RemoveUndefined } from '../../../../../base/common/observable.js';\n\nexport function sumByCategory<T, TCategory extends string>(items: readonly T[], getValue: (item: T) => number, getCategory: (item: T) => TCategory): Record<TCategory, number | undefined> {\n\treturn items.reduce((acc, item) => {\n\t\tconst category = getCategory(item);\n\t\tacc[category] = (acc[category] || 0) + getValue(item);\n\t\treturn acc;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t}, {} as any as Record<TCategory, number>);\n}\n\nexport function mapObservableDelta<T, TDelta, TDeltaNew>(obs: IObservableWithChange<T, TDelta>, mapFn: (value: TDelta) => TDeltaNew, store: DisposableStore): IObservableWithChange<T, TDeltaNew> {\n\tconst obsResult = observableValue<T, TDeltaNew>('mapped', obs.get());\n\tstore.add(runOnChange(obs, (value, _prevValue, changes) => {\n\t\ttransaction(tx => {\n\t\t\tfor (const c of changes) {\n\t\t\t\tobsResult.set(value, tx, mapFn(c));\n\t\t\t}\n\t\t});\n\t}));\n\treturn obsResult;\n}\n\nexport function iterateObservableChanges<T, TChange>(obs: IObservableWithChange<T, TChange>, store: DisposableStore): AsyncIterable<{ value: T; prevValue: T; change: RemoveUndefined<TChange>[] }> {\n\treturn new AsyncIterableProducer<{ value: T; prevValue: T; change: RemoveUndefined<TChange>[] }>((e) => {\n\t\tif (store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tstore.add(runOnChange(obs, (value, prevValue, change) => {\n\t\t\te.emitOne({ value, prevValue, change: change });\n\t\t}));\n\n\t\treturn new Promise((res) => {\n\t\t\tstore.add(toDisposable(() => {\n\t\t\t\tres(undefined);\n\t\t\t}));\n\t\t});\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AsyncIterableProducer } from '../../../../../base/common/async.js';\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservableWithChange, observableValue, runOnChange, transaction, RemoveUndefined } from '../../../../../base/common/observable.js';\n\nexport function sumByCategory<T, TCategory extends string>(items: readonly T[], getValue: (item: T) => number, getCategory: (item: T) => TCategory): Record<TCategory, number | undefined> {\n\treturn items.reduce((acc, item) => {\n\t\tconst category = getCategory(item);\n\t\tacc[category] = (acc[category] || 0) + getValue(item);\n\t\treturn acc;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t}, {} as any as Record<TCategory, number>);\n}\n\nexport function mapObservableDelta<T, TDelta, TDeltaNew>(obs: IObservableWithChange<T, TDelta>, mapFn: (value: TDelta) => TDeltaNew, store: DisposableStore): IObservableWithChange<T, TDeltaNew> {\n\tconst obsResult = observableValue<T, TDeltaNew>('mapped', obs.get());\n\tstore.add(runOnChange(obs, (value, _prevValue, changes) => {\n\t\ttransaction(tx => {\n\t\t\tfor (const c of changes) {\n\t\t\t\tobsResult.set(value, tx, mapFn(c));\n\t\t\t}\n\t\t});\n\t}));\n\treturn obsResult;\n}\n\nexport function iterateObservableChanges<T, TChange>(obs: IObservableWithChange<T, TChange>, store: DisposableStore): AsyncIterable<{ value: T; prevValue: T; change: RemoveUndefined<TChange>[] }> {\n\treturn new AsyncIterableProducer<{ value: T; prevValue: T; change: RemoveUndefined<TChange>[] }>((e) => {\n\t\tif (store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tstore.add(runOnChange(obs, (value, prevValue, change) => {\n\t\t\te.emitOne({ value, prevValue, change: change });\n\t\t}));\n\n\t\treturn new Promise((res) => {\n\t\t\tstore.add(toDisposable(() => {\n\t\t\t\tres(undefined);\n\t\t\t}));\n\t\t});\n\t});\n}\n"]}