{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/editTelemetry/browser/editTelemetryContribution.ts","vs/workbench/contrib/editTelemetry/browser/editTelemetryContribution.ts"],"names":[],"mappings":"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","file":"editTelemetryContribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived } from '../../../../base/common/observable.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { ITelemetryService, TelemetryLevel, telemetryLevelEnabled } from '../../../../platform/telemetry/common/telemetry.js';\nimport { AnnotatedDocuments } from './helpers/annotatedDocuments.js';\nimport { EditTrackingFeature } from './telemetry/editSourceTrackingFeature.js';\nimport { VSCodeWorkspace } from './helpers/vscodeObservableWorkspace.js';\nimport { AiStatsFeature } from './editStats/aiStatsFeature.js';\nimport { EDIT_TELEMETRY_SETTING_ID, AI_STATS_SETTING_ID } from './settingIds.js';\n\nexport class EditTelemetryContribution extends Disposable {\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t) {\n\t\tsuper();\n\n\t\tconst workspace = derived(reader => reader.store.add(this._instantiationService.createInstance(VSCodeWorkspace)));\n\t\tconst annotatedDocuments = derived(reader => reader.store.add(this._instantiationService.createInstance(AnnotatedDocuments, workspace.read(reader))));\n\n\t\tconst editSourceTrackingEnabled = observableConfigValue(EDIT_TELEMETRY_SETTING_ID, true, this._configurationService);\n\t\tthis._register(autorun(r => {\n\t\t\tconst enabled = editSourceTrackingEnabled.read(r);\n\t\t\tif (!enabled || !telemetryLevelEnabled(this._telemetryService, TelemetryLevel.USAGE)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tr.store.add(this._instantiationService.createInstance(EditTrackingFeature, workspace.read(r), annotatedDocuments.read(r)));\n\t\t}));\n\n\t\tconst aiStatsEnabled = observableConfigValue(AI_STATS_SETTING_ID, true, this._configurationService);\n\t\tthis._register(autorun(r => {\n\t\t\tconst enabled = aiStatsEnabled.read(r);\n\t\t\tif (!enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tr.store.add(this._instantiationService.createInstance(AiStatsFeature, annotatedDocuments.read(r)));\n\t\t}));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived } from '../../../../base/common/observable.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { ITelemetryService, TelemetryLevel, telemetryLevelEnabled } from '../../../../platform/telemetry/common/telemetry.js';\nimport { AnnotatedDocuments } from './helpers/annotatedDocuments.js';\nimport { EditTrackingFeature } from './telemetry/editSourceTrackingFeature.js';\nimport { VSCodeWorkspace } from './helpers/vscodeObservableWorkspace.js';\nimport { AiStatsFeature } from './editStats/aiStatsFeature.js';\nimport { EDIT_TELEMETRY_SETTING_ID, AI_STATS_SETTING_ID } from './settingIds.js';\n\nexport class EditTelemetryContribution extends Disposable {\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t) {\n\t\tsuper();\n\n\t\tconst workspace = derived(reader => reader.store.add(this._instantiationService.createInstance(VSCodeWorkspace)));\n\t\tconst annotatedDocuments = derived(reader => reader.store.add(this._instantiationService.createInstance(AnnotatedDocuments, workspace.read(reader))));\n\n\t\tconst editSourceTrackingEnabled = observableConfigValue(EDIT_TELEMETRY_SETTING_ID, true, this._configurationService);\n\t\tthis._register(autorun(r => {\n\t\t\tconst enabled = editSourceTrackingEnabled.read(r);\n\t\t\tif (!enabled || !telemetryLevelEnabled(this._telemetryService, TelemetryLevel.USAGE)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tr.store.add(this._instantiationService.createInstance(EditTrackingFeature, workspace.read(r), annotatedDocuments.read(r)));\n\t\t}));\n\n\t\tconst aiStatsEnabled = observableConfigValue(AI_STATS_SETTING_ID, true, this._configurationService);\n\t\tthis._register(autorun(r => {\n\t\t\tconst enabled = aiStatsEnabled.read(r);\n\t\t\tif (!enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tr.store.add(this._instantiationService.createInstance(AiStatsFeature, annotatedDocuments.read(r)));\n\t\t}));\n\t}\n}\n"]}