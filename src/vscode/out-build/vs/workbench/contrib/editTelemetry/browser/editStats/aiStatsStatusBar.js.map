{"version":3,"sources":["vs/workbench/contrib/editTelemetry/browser/editStats/aiStatsStatusBar.ts"],"names":[],"mappings":"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","file":"aiStatsStatusBar.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { n } from '../../../../../base/browser/dom.js';\nimport { ActionBar, IActionBarOptions, IActionOptions } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { IAction } from '../../../../../base/common/actions.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { createHotClass } from '../../../../../base/common/hotReloadHelpers.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { autorun, derived } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { localize } from '../../../../../nls.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { nativeHoverDelegate } from '../../../../../platform/hover/browser/hover.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IStatusbarService, StatusbarAlignment } from '../../../../services/statusbar/browser/statusbar.js';\nimport { AI_STATS_SETTING_ID } from '../settingIds.js';\nimport type { AiStatsFeature } from './aiStatsFeature.js';\nimport './media.css';\n\nexport class AiStatsStatusBar extends Disposable {\n\tpublic static readonly hot = createHotClass(this);\n\n\tconstructor(\n\t\tprivate readonly _aiStatsFeature: AiStatsFeature,\n\t\t@IStatusbarService private readonly _statusbarService: IStatusbarService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(autorun((reader) => {\n\t\t\tconst statusBarItem = this._createStatusBar().keepUpdated(reader.store);\n\n\t\t\tconst store = this._register(new DisposableStore());\n\n\t\t\treader.store.add(this._statusbarService.addEntry({\n\t\t\t\tname: localize('inlineSuggestions', \"Inline Suggestions\"),\n\t\t\t\tariaLabel: localize('inlineSuggestionsStatusBar', \"Inline suggestions status bar\"),\n\t\t\t\ttext: '',\n\t\t\t\ttooltip: {\n\t\t\t\t\telement: async (_token) => {\n\t\t\t\t\t\tthis._sendHoverTelemetry();\n\t\t\t\t\t\tstore.clear();\n\t\t\t\t\t\tconst elem = this._createStatusBarHover();\n\t\t\t\t\t\treturn elem.keepUpdated(store).element;\n\t\t\t\t\t},\n\t\t\t\t\tmarkdownNotSupportedFallback: undefined,\n\t\t\t\t},\n\t\t\t\tcontent: statusBarItem.element,\n\t\t\t}, 'aiStatsStatusBar', StatusbarAlignment.RIGHT, 100));\n\t\t}));\n\t}\n\n\tprivate _sendHoverTelemetry(): void {\n\t\tthis._telemetryService.publicLog2<{\n\t\t\taiRate: number;\n\t\t}, {\n\t\t\towner: 'hediet';\n\t\t\tcomment: 'Fired when the AI stats status bar hover tooltip is shown';\n\t\t\taiRate: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The current AI rate percentage' };\n\t\t}>(\n\t\t\t'aiStatsStatusBar.hover',\n\t\t\t{\n\t\t\t\taiRate: this._aiStatsFeature.aiRate.get(),\n\t\t\t}\n\t\t);\n\t}\n\n\n\tprivate _createStatusBar() {\n\t\treturn n.div({\n\t\t\tstyle: {\n\t\t\t\theight: '100%',\n\t\t\t\tdisplay: 'flex',\n\t\t\t\talignItems: 'center',\n\t\t\t\tjustifyContent: 'center',\n\t\t\t\tmarginLeft: '3px',\n\t\t\t\tmarginRight: '3px',\n\t\t\t}\n\t\t}, [\n\t\t\tn.div(\n\t\t\t\t{\n\t\t\t\t\tclass: 'ai-stats-status-bar',\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tflexDirection: 'column',\n\n\t\t\t\t\t\twidth: 50,\n\t\t\t\t\t\theight: 6,\n\n\t\t\t\t\t\tborderRadius: 6,\n\t\t\t\t\t\tborderWidth: '1px',\n\t\t\t\t\t\tborderStyle: 'solid',\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tn.div({\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tflex: 1,\n\n\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\toverflow: 'hidden',\n\n\t\t\t\t\t\t\tborderRadius: 6,\n\t\t\t\t\t\t\tborder: '1px solid transparent',\n\t\t\t\t\t\t}\n\t\t\t\t\t}, [\n\t\t\t\t\t\tn.div({\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\twidth: this._aiStatsFeature.aiRate.map(v => `${v * 100}%`),\n\t\t\t\t\t\t\t\tbackgroundColor: 'currentColor',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t])\n\t\t\t\t]\n\t\t\t)\n\t\t]);\n\t}\n\n\tprivate _createStatusBarHover() {\n\t\tconst aiRatePercent = this._aiStatsFeature.aiRate.map(r => `${Math.round(r * 100)}%`);\n\n\t\treturn n.div({\n\t\t\tclass: 'ai-stats-status-bar',\n\t\t}, [\n\t\t\tn.div({\n\t\t\t\tclass: 'header',\n\t\t\t\tstyle: {\n\t\t\t\t\tminWidth: '200px',\n\t\t\t\t}\n\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tn.div({ style: { flex: 1 } }, [localize('aiStatsStatusBarHeader', \"AI Usage Statistics\")]),\n\t\t\t\t\tn.div({ style: { marginLeft: 'auto' } }, actionBar([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\tid: 'aiStats.statusBar.settings',\n\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\trun: () => openSettingsCommand({ ids: [AI_STATS_SETTING_ID] }).run(this._commandService),\n\t\t\t\t\t\t\t\tclass: ThemeIcon.asClassName(Codicon.gear),\n\t\t\t\t\t\t\t\ttooltip: localize('aiStats.statusBar.configure', \"Configure\")\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\toptions: { icon: true, label: false, hoverDelegate: nativeHoverDelegate }\n\t\t\t\t\t\t}\n\t\t\t\t\t]))\n\t\t\t\t]\n\t\t\t),\n\n\t\t\tn.div({ style: { display: 'flex' } }, [\n\t\t\t\tn.div({ style: { flex: 1, paddingRight: '4px' } }, [\n\t\t\t\t\tlocalize('text1', \"AI vs Typing Average: {0}\", aiRatePercent.get()),\n\t\t\t\t]),\n\t\t\t\t/*\n\t\t\t\tTODO: Write article that explains the ratio and link to it.\n\n\t\t\t\tn.div({ style: { marginLeft: 'auto' } }, actionBar([\n\t\t\t\t\t{\n\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\tid: 'aiStatsStatusBar.openSettings',\n\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\trun: () => { },\n\t\t\t\t\t\t\tclass: ThemeIcon.asClassName(Codicon.info),\n\t\t\t\t\t\t\ttooltip: ''\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions: { icon: true, label: true, }\n\t\t\t\t\t}\n\t\t\t\t]))*/\n\t\t\t]),\n\t\t\tn.div({ style: { flex: 1, paddingRight: '4px' } }, [\n\t\t\t\tlocalize('text2', \"Accepted inline suggestions today: {0}\", this._aiStatsFeature.acceptedInlineSuggestionsToday.get()),\n\t\t\t]),\n\t\t]);\n\t}\n}\n\nfunction actionBar(actions: { action: IAction; options: IActionOptions }[], options?: IActionBarOptions) {\n\treturn derived((_reader) => n.div({\n\t\tclass: [],\n\t\tstyle: {\n\t\t},\n\t\tref: elem => {\n\t\t\tconst actionBar = _reader.store.add(new ActionBar(elem, options));\n\t\t\tfor (const { action, options } of actions) {\n\t\t\t\tactionBar.push(action, options);\n\t\t\t}\n\t\t}\n\t}));\n}\n\nclass CommandWithArgs {\n\tconstructor(\n\t\tpublic readonly commandId: string,\n\t\tpublic readonly args: unknown[] = [],\n\t) { }\n\n\tpublic run(commandService: ICommandService): void {\n\t\tcommandService.executeCommand(this.commandId, ...this.args);\n\t}\n}\n\nfunction openSettingsCommand(options: { ids?: string[] } = {}) {\n\treturn new CommandWithArgs('workbench.action.openSettings', [{\n\t\tquery: options.ids ? options.ids.map(id => `@id:${id}`).join(' ') : undefined,\n\t}]);\n}\n"]}