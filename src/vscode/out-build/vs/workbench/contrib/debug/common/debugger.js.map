{"version":3,"sources":["vs/workbench/contrib/debug/common/debugger.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,oBAAoB,CAAC;AAC1C,OAAO,EAAE,QAAQ,EAAE,MAAM,kCAAkC,CAAC;AAG5D,OAAO,EAA4F,aAAa,EAAE,uBAAuB,EAAqB,qCAAqC,EAAE,MAAM,YAAY,CAAC;AACxN,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,6BAA6B,EAAE,MAAM,yEAAyE,CAAC;AACxH,OAAO,KAAK,0BAA0B,MAAM,8EAA8E,CAAC;AAC3H,OAAO,EAAE,8BAA8B,EAAE,MAAM,iEAAiE,CAAC;AACjH,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAAE,OAAO,EAAE,MAAM,oCAAoC,CAAC;AAC7D,OAAO,EAAE,0BAA0B,EAAE,MAAM,iBAAiB,CAAC;AAG7D,OAAO,EAAE,oBAAoB,EAAE,MAAM,yDAAyD,CAAC;AAC/F,OAAO,EAAE,4BAA4B,EAAE,MAAM,4DAA4D,CAAC;AAC1G,OAAO,EAAE,cAAc,EAAwB,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AAChI,OAAO,EAAE,MAAM,EAAE,MAAM,oCAAoC,CAAC;AAErD,IAAM,QAAQ,GAAd,MAAM,QAAQ;IASpB,YACS,cAA+B,EACvC,eAAsC,EACtC,oBAA2C,EACpB,oBAA4D,EACnD,yBAA0E,EAC3E,4BAA4E,EAC7E,kBAAiE,EAChF,YAA4C,EACvC,iBAAsD;QARlE,mBAAc,GAAd,cAAc,CAAiB;QAGC,yBAAoB,GAApB,oBAAoB,CAAuB;QAClC,8BAAyB,GAAzB,yBAAyB,CAAgC;QAC1D,iCAA4B,GAA5B,4BAA4B,CAA+B;QAC5D,uBAAkB,GAAlB,kBAAkB,CAA8B;QAC/D,iBAAY,GAAZ,YAAY,CAAe;QACtB,sBAAiB,GAAjB,iBAAiB,CAAoB;QAfnE,gCAA2B,GAA4B,EAAE,CAAC;QAiBjE,IAAI,CAAC,oBAAoB,GAAG,EAAE,IAAI,EAAE,eAAe,CAAC,IAAI,EAAE,CAAC;QAC3D,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,oBAAoB,CAAC,CAAC;QAElD,IAAI,CAAC,YAAY,GAAG,OAAO,IAAI,CAAC,oBAAoB,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAChJ,IAAI,CAAC,kBAAkB,GAAG,OAAO,IAAI,CAAC,oBAAoB,CAAC,UAAU,KAAK,QAAQ,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IACnK,CAAC;IAED,KAAK,CAAC,yBAAgD,EAAE,oBAA2C;QAElG;;;WAGG;QACH,SAAS,KAAK,CAAC,WAAgB,EAAE,MAAW,EAAE,SAAkB,EAAE,KAAK,GAAG,CAAC;YAE1E,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;gBAC5B,OAAO,MAAM,CAAC;YACf,CAAC;YAED,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC;gBACtB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;oBACjC,IAAI,GAAG,KAAK,WAAW,EAAE,CAAC;wBACzB,IAAI,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;4BACzD,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,KAAK,GAAG,CAAC,CAAC,CAAC;wBAC5D,CAAC;6BAAM,CAAC;4BACP,IAAI,GAAG,IAAI,WAAW,EAAE,CAAC;gCACxB,IAAI,SAAS,EAAE,CAAC;oCACf,IAAI,KAAK,KAAK,CAAC,IAAI,GAAG,KAAK,MAAM,EAAE,CAAC;wCACnC,kCAAkC;oCACnC,CAAC;yCAAM,CAAC;wCACP,WAAW,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;oCAChC,CAAC;gCACF,CAAC;4BACF,CAAC;iCAAM,CAAC;gCACP,WAAW,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;4BAChC,CAAC;wBACF,CAAC;oBACF,CAAC;gBACF,CAAC,CAAC,CAAC;YACJ,CAAC;YAED,OAAO,WAAW,CAAC;QACpB,CAAC;QAED,6BAA6B;QAC7B,IAAI,IAAI,CAAC,2BAA2B,CAAC,OAAO,CAAC,oBAAoB,CAAC,GAAG,CAAC,EAAE,CAAC;YAExE,kEAAkE;YAClE,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAE5D,kHAAkH;YAClH,KAAK,CAAC,IAAI,CAAC,oBAAoB,EAAE,yBAAyB,EAAE,oBAAoB,CAAC,SAAS,CAAC,CAAC;YAE5F,6EAA6E;YAC7E,IAAI,0BAA0B,CAAC,yBAAyB,CAAC,EAAE,CAAC;gBAC3D,IAAI,CAAC,wBAAwB,GAAG,oBAAoB,CAAC;YACtD,CAAC;QACF,CAAC;IACF,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,aAAsB,EAAE,eAAuB;QACnE,MAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;QAC/E,OAAO,MAAM,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,SAAS,EAAE,aAAa,EAAE,EAAE,aAAa,EAAE,EAAE,SAAS,CAAC,CAAC;IACvG,CAAC;IAED,KAAK,CAAC,kBAAkB,CAAC,OAAsB;QAC9C,MAAM,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,+BAA+B,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACxF,MAAM,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;QAC3D,IAAI,EAAE,EAAE,CAAC;YACR,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;QAC5B,CAAC;QACD,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAgB,EAAE,IAA2C,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACzG,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,MAAoC,EAAE,MAAe;QAC9E,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QACnG,OAAO,MAAM,IAAI,CAAC,4BAA4B,CAAC,6BAA6B,CAAC,MAAM,EAAE,iBAAiB,EAAE,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,iBAAiB,CAAC,qBAAqB,CAAC,CAAC;IAC5K,CAAC;IAED,aAAa,CAAC,IAAiD,EAAE,SAAiB;QACjF,OAAO,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC;IACtE,CAAC;IAED,IAAI,KAAK;QACR,OAAO,IAAI,CAAC,oBAAoB,CAAC,KAAK,IAAI,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;IAC1E,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;IACvC,CAAC;IAED,IAAI,SAAS;QACZ,OAAO,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC;IAC5C,CAAC;IAED,IAAI,qBAAqB;QACxB,OAAO,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,CAAC;IACxD,CAAC;IAED,IAAI,SAAS;QACZ,OAAO,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC;IAC5C,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,YAAY,CAAC;IAC1B,CAAC;IAED,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,kBAAkB,CAAC;IAChC,CAAC;IAED,IAAI,OAAO;QACV,OAAO,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC5F,CAAC;IAED,IAAI,oBAAoB;QACvB,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC9B,OAAO,KAAK,CAAC;QACd,CAAC;QACD,OAAO,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAC5E,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,oBAAoB,CAAC,OAAO,IAAI,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC;IAClF,CAAC;IAED,oBAAoB,CAAC,UAAkB;QACtC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;IACtE,CAAC;IAED,uBAAuB;QACtB,OAAO,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,CAAC;IAC1D,CAAC;IAED,gCAAgC;QAC/B,OAAO,IAAI,CAAC,YAAY,CAAC,uBAAuB,EAAE,CAAC,6BAA6B,CAAC,IAAI,CAAC,IAAI,EAAE,qCAAqC,CAAC,OAAO,CAAC,CAAC;IAC5I,CAAC;IAED,wBAAwB;QACvB,OAAO,IAAI,CAAC,YAAY,CAAC,uBAAuB,EAAE,CAAC,6BAA6B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7F,CAAC;IAED,8BAA8B,CAAC,cAA0B;QACxD,6GAA6G;QAC7G,IAAI,qBAAqB,GAAG,IAAI,CAAC,oBAAoB,CAAC,qBAAqB,IAAI,EAAE,CAAC;QAClF,IAAI,cAAc,EAAE,CAAC;YACpB,qBAAqB,GAAG,qBAAqB,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QACtE,CAAC;QAED,MAAM,GAAG,GAAG,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;QAChI,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,qBAAqB,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC;QACxH,MAAM,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAAsD,CAAC,CAAC;QAChH,MAAM,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAAoD,CAAC,CAAC;QAC9G,MAAM,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAAkC,EAAE,gDAAgD,CAAC,CAAC;QAE9I,IAAI,OAAO,GAAG;YACb,GAAG;YACH,QAAQ,QAAQ,EAAE;YAClB,QAAQ,QAAQ,EAAE;YAClB,QAAQ,QAAQ,EAAE;YAClB,uBAAuB;YACvB,uBAAuB,OAAO,EAAE;YAChC,GAAG;SACH,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEZ,iBAAiB;QACjB,MAAM,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAO,CAAC;QAC/D,IAAI,YAAY,CAAC,MAAM,IAAI,YAAY,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;YAC7D,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;QAC3F,CAAC;QAED,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC;IAED,0BAA0B;QACzB,OAAO,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,2BAA2B,CAAC,CAAC,CAAC,CAAC;IAC7E,CAAC;IAED,0BAA0B;QACzB,MAAM,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC;QAC9C,IAAI,CAAC,KAAK,EAAE,CAAC;YACZ,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,MAAM,iBAAiB,GAAG,oBAAoB,CAAC,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,KAAK,OAAO,CAAC;QACpG,OAAO;YACN,EAAE,EAAE,GAAG,IAAI,CAAC,0BAA0B,EAAE,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,EAAE;YACjE,KAAK;YACL,kBAAkB,EAAE,iBAAiB;SACrC,CAAC;IACH,CAAC;IAED,mBAAmB,CAAC,WAA2B;QAE9C,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,EAAE,CAAC;YACxD,OAAO,IAAI,CAAC;QACb,CAAC;QAED,uEAAuE;QACvE,OAAO,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE,EAAE;YACtG,MAAM,YAAY,GAAG,GAAG,IAAI,CAAC,IAAI,IAAI,OAAO,EAAE,CAAC;YAC/C,MAAM,4BAA4B,GAAG,GAAG,IAAI,CAAC,IAAI,IAAI,OAAO,WAAW,CAAC;YACxE,MAAM,eAAe,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;YACpD,UAAU,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC;YACxI,UAAU,CAAC,oBAAoB,GAAG,KAAK,CAAC;YACxC,UAAU,CAAC,IAAI,GAAG,QAAQ,CAAC;YAC3B,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;gBAC5B,UAAU,CAAC,UAAU,GAAG,EAAE,CAAC;YAC5B,CAAC;YACD,MAAM,UAAU,GAAG,UAAU,CAAC,UAAU,CAAC;YACzC,UAAU,CAAC,MAAM,CAAC,GAAG;gBACpB,IAAI,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;gBACjB,gBAAgB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC;gBAC9B,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAW,EAAE,IAAwB,CAAC;gBAChE,OAAO,EAAE,YAAY;gBACrB,kBAAkB,EAAE,IAAI,CAAC,oBAAoB,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC3H,YAAY,EAAE,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,UAAU;gBACpD,YAAY,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAA6H,CAAC;gBACnL,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAA6G,CAAC;aACrK,CAAC;YACF,UAAU,CAAC,SAAS,CAAC,GAAG;gBACvB,IAAI,EAAE,CAAC,OAAO,CAAC;gBACf,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAc,EAAE,IAAiE,CAAC;aAC5G,CAAC;YACF,KAAK,MAAM,IAAI,IAAI,WAAW,CAAC,QAAQ,CAAC,CAAC,UAAU,EAAE,CAAC;gBACrD,UAAU,CAAC,IAAI,CAAC,GAAG;oBAClB,IAAI,EAAE,mCAAmC,IAAI,EAAE;iBAC/C,CAAC;YACH,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACtC,sEAAsE;gBACtE,0BAA0B,CAAC,8BAA8B,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;YAC7E,CAAC,CAAC,CAAC;YAEH,WAAW,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,UAAU,EAAE,CAAC;YAC9C,WAAW,CAAC,4BAA4B,CAAC,GAAG;gBAC3C,IAAI,EAAE,QAAQ;gBACd,oBAAoB,EAAE,KAAK;gBAC3B,UAAU,EAAE,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,MAAM,IAAI,GAAG,KAAK,SAAS,IAAI,GAAG,KAAK,MAAM,CAAC;aAC5F,CAAC;YAEF,8FAA8F;YAC9F,MAAM,cAAc,GAAG,EAAE,GAAG,UAAU,EAAE,CAAC;YACzC,cAAc,CAAC,UAAU,GAAG;gBAC3B,GAAG,UAAU;gBACb,GAAG;oBACF,OAAO,EAAE;wBACR,IAAI,EAAE,iBAAiB,4BAA4B,EAAE;wBACrD,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAA2B,EAAE,IAAmD,CAAC;qBAC3G;oBACD,GAAG,EAAE;wBACJ,IAAI,EAAE,iBAAiB,4BAA4B,EAAE;wBACrD,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAAgD,CAAC;qBACpG;oBACD,KAAK,EAAE;wBACN,IAAI,EAAE,iBAAiB,4BAA4B,EAAE;wBACrD,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAiD,CAAC;qBACvG;iBACD;aACD,CAAC;YAEF,OAAO,cAAc,CAAC;QACvB,CAAC,CAAC,CAAC;IACJ,CAAC;CACD,CAAA;AA5RY,QAAQ;IAalB,WAAA,qBAAqB,CAAA;IACrB,WAAA,8BAA8B,CAAA;IAC9B,WAAA,6BAA6B,CAAA;IAC7B,WAAA,4BAA4B,CAAA;IAC5B,WAAA,aAAa,CAAA;IACb,WAAA,kBAAkB,CAAA;GAlBR,QAAQ,CA4RpB","file":"debugger.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { isObject } from '../../../../base/common/types.js';\nimport { IJSONSchema, IJSONSchemaMap, IJSONSchemaSnippet } from '../../../../base/common/jsonSchema.js';\nimport { IWorkspaceFolder } from '../../../../platform/workspace/common/workspace.js';\nimport { IConfig, IDebuggerContribution, IDebugAdapter, IDebugger, IDebugSession, IAdapterManager, IDebugService, debuggerDisabledMessage, IDebuggerMetadata, DebugConfigurationProviderTriggerKind } from './debug.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IConfigurationResolverService } from '../../../services/configurationResolver/common/configurationResolver.js';\nimport * as ConfigurationResolverUtils from '../../../services/configurationResolver/common/configurationResolverUtils.js';\nimport { ITextResourcePropertiesService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { isDebuggerMainContribution } from './debugUtils.js';\nimport { IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { ITelemetryEndpoint } from '../../../../platform/telemetry/common/telemetry.js';\nimport { cleanRemoteAuthority } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { ContextKeyExpr, ContextKeyExpression, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { filter } from '../../../../base/common/objects.js';\n\nexport class Debugger implements IDebugger, IDebuggerMetadata {\n\n\tprivate debuggerContribution: IDebuggerContribution;\n\tprivate mergedExtensionDescriptions: IExtensionDescription[] = [];\n\tprivate mainExtensionDescription: IExtensionDescription | undefined;\n\n\tprivate debuggerWhen: ContextKeyExpression | undefined;\n\tprivate debuggerHiddenWhen: ContextKeyExpression | undefined;\n\n\tconstructor(\n\t\tprivate adapterManager: IAdapterManager,\n\t\tdbgContribution: IDebuggerContribution,\n\t\textensionDescription: IExtensionDescription,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITextResourcePropertiesService private readonly resourcePropertiesService: ITextResourcePropertiesService,\n\t\t@IConfigurationResolverService private readonly configurationResolverService: IConfigurationResolverService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t) {\n\t\tthis.debuggerContribution = { type: dbgContribution.type };\n\t\tthis.merge(dbgContribution, extensionDescription);\n\n\t\tthis.debuggerWhen = typeof this.debuggerContribution.when === 'string' ? ContextKeyExpr.deserialize(this.debuggerContribution.when) : undefined;\n\t\tthis.debuggerHiddenWhen = typeof this.debuggerContribution.hiddenWhen === 'string' ? ContextKeyExpr.deserialize(this.debuggerContribution.hiddenWhen) : undefined;\n\t}\n\n\tmerge(otherDebuggerContribution: IDebuggerContribution, extensionDescription: IExtensionDescription): void {\n\n\t\t/**\n\t\t * Copies all properties of source into destination. The optional parameter \"overwrite\" allows to control\n\t\t * if existing non-structured properties on the destination should be overwritten or not. Defaults to true (overwrite).\n\t\t */\n\t\tfunction mixin(destination: any, source: any, overwrite: boolean, level = 0): any {\n\n\t\t\tif (!isObject(destination)) {\n\t\t\t\treturn source;\n\t\t\t}\n\n\t\t\tif (isObject(source)) {\n\t\t\t\tObject.keys(source).forEach(key => {\n\t\t\t\t\tif (key !== '__proto__') {\n\t\t\t\t\t\tif (isObject(destination[key]) && isObject(source[key])) {\n\t\t\t\t\t\t\tmixin(destination[key], source[key], overwrite, level + 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (key in destination) {\n\t\t\t\t\t\t\t\tif (overwrite) {\n\t\t\t\t\t\t\t\t\tif (level === 0 && key === 'type') {\n\t\t\t\t\t\t\t\t\t\t// don't merge the 'type' property\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn destination;\n\t\t}\n\n\t\t// only if not already merged\n\t\tif (this.mergedExtensionDescriptions.indexOf(extensionDescription) < 0) {\n\n\t\t\t// remember all extensions that have been merged for this debugger\n\t\t\tthis.mergedExtensionDescriptions.push(extensionDescription);\n\n\t\t\t// merge new debugger contribution into existing contributions (and don't overwrite values in built-in extensions)\n\t\t\tmixin(this.debuggerContribution, otherDebuggerContribution, extensionDescription.isBuiltin);\n\n\t\t\t// remember the extension that is considered the \"main\" debugger contribution\n\t\t\tif (isDebuggerMainContribution(otherDebuggerContribution)) {\n\t\t\t\tthis.mainExtensionDescription = extensionDescription;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync startDebugging(configuration: IConfig, parentSessionId: string): Promise<boolean> {\n\t\tconst parentSession = this.debugService.getModel().getSession(parentSessionId);\n\t\treturn await this.debugService.startDebugging(undefined, configuration, { parentSession }, undefined);\n\t}\n\n\tasync createDebugAdapter(session: IDebugSession): Promise<IDebugAdapter> {\n\t\tawait this.adapterManager.activateDebuggers('onDebugAdapterProtocolTracker', this.type);\n\t\tconst da = this.adapterManager.createDebugAdapter(session);\n\t\tif (da) {\n\t\t\treturn Promise.resolve(da);\n\t\t}\n\t\tthrow new Error(nls.localize('cannot.find.da', \"Cannot find debug adapter for type '{0}'.\", this.type));\n\t}\n\n\tasync substituteVariables(folder: IWorkspaceFolder | undefined, config: IConfig): Promise<IConfig> {\n\t\tconst substitutedConfig = await this.adapterManager.substituteVariables(this.type, folder, config);\n\t\treturn await this.configurationResolverService.resolveWithInteractionReplace(folder, substitutedConfig, 'launch', this.variables, substitutedConfig.__configurationTarget);\n\t}\n\n\trunInTerminal(args: DebugProtocol.RunInTerminalRequestArguments, sessionId: string): Promise<number | undefined> {\n\t\treturn this.adapterManager.runInTerminal(this.type, args, sessionId);\n\t}\n\n\tget label(): string {\n\t\treturn this.debuggerContribution.label || this.debuggerContribution.type;\n\t}\n\n\tget type(): string {\n\t\treturn this.debuggerContribution.type;\n\t}\n\n\tget variables(): { [key: string]: string } | undefined {\n\t\treturn this.debuggerContribution.variables;\n\t}\n\n\tget configurationSnippets(): IJSONSchemaSnippet[] | undefined {\n\t\treturn this.debuggerContribution.configurationSnippets;\n\t}\n\n\tget languages(): string[] | undefined {\n\t\treturn this.debuggerContribution.languages;\n\t}\n\n\tget when(): ContextKeyExpression | undefined {\n\t\treturn this.debuggerWhen;\n\t}\n\n\tget hiddenWhen(): ContextKeyExpression | undefined {\n\t\treturn this.debuggerHiddenWhen;\n\t}\n\n\tget enabled() {\n\t\treturn !this.debuggerWhen || this.contextKeyService.contextMatchesRules(this.debuggerWhen);\n\t}\n\n\tget isHiddenFromDropdown() {\n\t\tif (!this.debuggerHiddenWhen) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.contextKeyService.contextMatchesRules(this.debuggerHiddenWhen);\n\t}\n\n\tget strings() {\n\t\treturn this.debuggerContribution.strings ?? this.debuggerContribution.uiMessages;\n\t}\n\n\tinterestedInLanguage(languageId: string): boolean {\n\t\treturn !!(this.languages && this.languages.indexOf(languageId) >= 0);\n\t}\n\n\thasInitialConfiguration(): boolean {\n\t\treturn !!this.debuggerContribution.initialConfigurations;\n\t}\n\n\thasDynamicConfigurationProviders(): boolean {\n\t\treturn this.debugService.getConfigurationManager().hasDebugConfigurationProvider(this.type, DebugConfigurationProviderTriggerKind.Dynamic);\n\t}\n\n\thasConfigurationProvider(): boolean {\n\t\treturn this.debugService.getConfigurationManager().hasDebugConfigurationProvider(this.type);\n\t}\n\n\tgetInitialConfigurationContent(initialConfigs?: IConfig[]): Promise<string> {\n\t\t// at this point we got some configs from the package.json and/or from registered DebugConfigurationProviders\n\t\tlet initialConfigurations = this.debuggerContribution.initialConfigurations || [];\n\t\tif (initialConfigs) {\n\t\t\tinitialConfigurations = initialConfigurations.concat(initialConfigs);\n\t\t}\n\n\t\tconst eol = this.resourcePropertiesService.getEOL(URI.from({ scheme: Schemas.untitled, path: '1' })) === '\\r\\n' ? '\\r\\n' : '\\n';\n\t\tconst configs = JSON.stringify(initialConfigurations, null, '\\t').split('\\n').map(line => '\\t' + line).join(eol).trim();\n\t\tconst comment1 = nls.localize('launch.config.comment1', \"Use IntelliSense to learn about possible attributes.\");\n\t\tconst comment2 = nls.localize('launch.config.comment2', \"Hover to view descriptions of existing attributes.\");\n\t\tconst comment3 = nls.localize('launch.config.comment3', \"For more information, visit: {0}\", 'https://go.microsoft.com/fwlink/?linkid=830387');\n\n\t\tlet content = [\n\t\t\t'{',\n\t\t\t`\\t// ${comment1}`,\n\t\t\t`\\t// ${comment2}`,\n\t\t\t`\\t// ${comment3}`,\n\t\t\t`\\t\"version\": \"0.2.0\",`,\n\t\t\t`\\t\"configurations\": ${configs}`,\n\t\t\t'}'\n\t\t].join(eol);\n\n\t\t// fix formatting\n\t\tconst editorConfig = this.configurationService.getValue<any>();\n\t\tif (editorConfig.editor && editorConfig.editor.insertSpaces) {\n\t\t\tcontent = content.replace(new RegExp('\\t', 'g'), ' '.repeat(editorConfig.editor.tabSize));\n\t\t}\n\n\t\treturn Promise.resolve(content);\n\t}\n\n\tgetMainExtensionDescriptor(): IExtensionDescription {\n\t\treturn this.mainExtensionDescription || this.mergedExtensionDescriptions[0];\n\t}\n\n\tgetCustomTelemetryEndpoint(): ITelemetryEndpoint | undefined {\n\t\tconst aiKey = this.debuggerContribution.aiKey;\n\t\tif (!aiKey) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst sendErrorTelemtry = cleanRemoteAuthority(this.environmentService.remoteAuthority) !== 'other';\n\t\treturn {\n\t\t\tid: `${this.getMainExtensionDescriptor().publisher}.${this.type}`,\n\t\t\taiKey,\n\t\t\tsendErrorTelemetry: sendErrorTelemtry\n\t\t};\n\t}\n\n\tgetSchemaAttributes(definitions: IJSONSchemaMap): IJSONSchema[] | null {\n\n\t\tif (!this.debuggerContribution.configurationAttributes) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// fill in the default configuration attributes shared by all adapters.\n\t\treturn Object.entries(this.debuggerContribution.configurationAttributes).map(([request, attributes]) => {\n\t\t\tconst definitionId = `${this.type}:${request}`;\n\t\t\tconst platformSpecificDefinitionId = `${this.type}:${request}:platform`;\n\t\t\tconst defaultRequired = ['name', 'type', 'request'];\n\t\t\tattributes.required = attributes.required && attributes.required.length ? defaultRequired.concat(attributes.required) : defaultRequired;\n\t\t\tattributes.additionalProperties = false;\n\t\t\tattributes.type = 'object';\n\t\t\tif (!attributes.properties) {\n\t\t\t\tattributes.properties = {};\n\t\t\t}\n\t\t\tconst properties = attributes.properties;\n\t\t\tproperties['type'] = {\n\t\t\t\tenum: [this.type],\n\t\t\t\tenumDescriptions: [this.label],\n\t\t\t\tdescription: nls.localize('debugType', \"Type of configuration.\"),\n\t\t\t\tpattern: '^(?!node2)',\n\t\t\t\tdeprecationMessage: this.debuggerContribution.deprecated || (this.enabled ? undefined : debuggerDisabledMessage(this.type)),\n\t\t\t\tdoNotSuggest: !!this.debuggerContribution.deprecated,\n\t\t\t\terrorMessage: nls.localize('debugTypeNotRecognised', \"The debug type is not recognized. Make sure that you have a corresponding debug extension installed and that it is enabled.\"),\n\t\t\t\tpatternErrorMessage: nls.localize('node2NotSupported', \"\\\"node2\\\" is no longer supported, use \\\"node\\\" instead and set the \\\"protocol\\\" attribute to \\\"inspector\\\".\")\n\t\t\t};\n\t\t\tproperties['request'] = {\n\t\t\t\tenum: [request],\n\t\t\t\tdescription: nls.localize('debugRequest', \"Request type of configuration. Can be \\\"launch\\\" or \\\"attach\\\".\"),\n\t\t\t};\n\t\t\tfor (const prop in definitions['common'].properties) {\n\t\t\t\tproperties[prop] = {\n\t\t\t\t\t$ref: `#/definitions/common/properties/${prop}`\n\t\t\t\t};\n\t\t\t}\n\t\t\tObject.keys(properties).forEach(name => {\n\t\t\t\t// Use schema allOf property to get independent error reporting #21113\n\t\t\t\tConfigurationResolverUtils.applyDeprecatedVariableMessage(properties[name]);\n\t\t\t});\n\n\t\t\tdefinitions[definitionId] = { ...attributes };\n\t\t\tdefinitions[platformSpecificDefinitionId] = {\n\t\t\t\ttype: 'object',\n\t\t\t\tadditionalProperties: false,\n\t\t\t\tproperties: filter(properties, key => key !== 'type' && key !== 'request' && key !== 'name')\n\t\t\t};\n\n\t\t\t// Don't add the OS props to the real attributes object so they don't show up in 'definitions'\n\t\t\tconst attributesCopy = { ...attributes };\n\t\t\tattributesCopy.properties = {\n\t\t\t\t...properties,\n\t\t\t\t...{\n\t\t\t\t\twindows: {\n\t\t\t\t\t\t$ref: `#/definitions/${platformSpecificDefinitionId}`,\n\t\t\t\t\t\tdescription: nls.localize('debugWindowsConfiguration', \"Windows specific launch configuration attributes.\"),\n\t\t\t\t\t},\n\t\t\t\t\tosx: {\n\t\t\t\t\t\t$ref: `#/definitions/${platformSpecificDefinitionId}`,\n\t\t\t\t\t\tdescription: nls.localize('debugOSXConfiguration', \"OS X specific launch configuration attributes.\"),\n\t\t\t\t\t},\n\t\t\t\t\tlinux: {\n\t\t\t\t\t\t$ref: `#/definitions/${platformSpecificDefinitionId}`,\n\t\t\t\t\t\tdescription: nls.localize('debugLinuxConfiguration', \"Linux specific launch configuration attributes.\"),\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn attributesCopy;\n\t\t});\n\t}\n}\n"]}