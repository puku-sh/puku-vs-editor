{"version":3,"sources":["vs/workbench/contrib/debug/common/replModel.ts"],"names":[],"mappings":"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","file":"replModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport severity from '../../../../base/common/severity.js';\nimport { isObject, isString } from '../../../../base/common/types.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDebugConfiguration, IDebugSession, IExpression, INestingReplElement, IReplElement, IReplElementSource, IStackFrame } from './debug.js';\nimport { ExpressionContainer } from './debugModel.js';\n\nlet topReplElementCounter = 0;\nconst getUniqueId = () => `topReplElement:${topReplElementCounter++}`;\n\n/**\n * General case of data from DAP the `output` event. {@link ReplVariableElement}\n * is used instead only if there is a `variablesReference` with no `output` text.\n */\nexport class ReplOutputElement implements INestingReplElement {\n\n\tprivate _count = 1;\n\tprivate _onDidChangeCount = new Emitter<void>();\n\n\tconstructor(\n\t\tpublic session: IDebugSession,\n\t\tprivate id: string,\n\t\tpublic value: string,\n\t\tpublic severity: severity,\n\t\tpublic sourceData?: IReplElementSource,\n\t\tpublic readonly expression?: IExpression,\n\t) {\n\t}\n\n\ttoString(includeSource = false): string {\n\t\tlet valueRespectCount = this.value;\n\t\tfor (let i = 1; i < this.count; i++) {\n\t\t\tvalueRespectCount += (valueRespectCount.endsWith('\\n') ? '' : '\\n') + this.value;\n\t\t}\n\t\tconst sourceStr = (this.sourceData && includeSource) ? ` ${this.sourceData.source.name}` : '';\n\t\treturn valueRespectCount + sourceStr;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\tgetChildren(): Promise<IReplElement[]> {\n\t\treturn this.expression?.getChildren() || Promise.resolve([]);\n\t}\n\n\tset count(value: number) {\n\t\tthis._count = value;\n\t\tthis._onDidChangeCount.fire();\n\t}\n\n\tget count(): number {\n\t\treturn this._count;\n\t}\n\n\tget onDidChangeCount(): Event<void> {\n\t\treturn this._onDidChangeCount.event;\n\t}\n\n\tget hasChildren() {\n\t\treturn !!this.expression?.hasChildren;\n\t}\n}\n\n/** Top-level variable logged via DAP output when there's no `output` string */\nexport class ReplVariableElement implements INestingReplElement {\n\tpublic readonly hasChildren: boolean;\n\tprivate readonly id = generateUuid();\n\n\tconstructor(\n\t\tprivate readonly session: IDebugSession,\n\t\tpublic readonly expression: IExpression,\n\t\tpublic readonly severity: severity,\n\t\tpublic readonly sourceData?: IReplElementSource,\n\t) {\n\t\tthis.hasChildren = expression.hasChildren;\n\t}\n\n\tgetSession() {\n\t\treturn this.session;\n\t}\n\n\tgetChildren(): IReplElement[] | Promise<IReplElement[]> {\n\t\treturn this.expression.getChildren();\n\t}\n\n\ttoString(): string {\n\t\treturn this.expression.toString();\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n}\n\nexport class RawObjectReplElement implements IExpression, INestingReplElement {\n\n\tprivate static readonly MAX_CHILDREN = 1000; // upper bound of children per value\n\n\tconstructor(private id: string, public name: string, public valueObj: any, public sourceData?: IReplElementSource, public annotation?: string) { }\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\tgetSession(): IDebugSession | undefined {\n\t\treturn undefined;\n\t}\n\n\tget value(): string {\n\t\tif (this.valueObj === null) {\n\t\t\treturn 'null';\n\t\t} else if (Array.isArray(this.valueObj)) {\n\t\t\treturn `Array[${this.valueObj.length}]`;\n\t\t} else if (isObject(this.valueObj)) {\n\t\t\treturn 'Object';\n\t\t} else if (isString(this.valueObj)) {\n\t\t\treturn `\"${this.valueObj}\"`;\n\t\t}\n\n\t\treturn String(this.valueObj) || '';\n\t}\n\n\tget hasChildren(): boolean {\n\t\treturn (Array.isArray(this.valueObj) && this.valueObj.length > 0) || (isObject(this.valueObj) && Object.getOwnPropertyNames(this.valueObj).length > 0);\n\t}\n\n\tevaluateLazy(): Promise<void> {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tgetChildren(): Promise<IExpression[]> {\n\t\tlet result: IExpression[] = [];\n\t\tif (Array.isArray(this.valueObj)) {\n\t\t\tresult = (<any[]>this.valueObj).slice(0, RawObjectReplElement.MAX_CHILDREN)\n\t\t\t\t.map((v, index) => new RawObjectReplElement(`${this.id}:${index}`, String(index), v));\n\t\t} else if (isObject(this.valueObj)) {\n\t\t\tresult = Object.getOwnPropertyNames(this.valueObj).slice(0, RawObjectReplElement.MAX_CHILDREN)\n\t\t\t\t.map((key, index) => new RawObjectReplElement(`${this.id}:${index}`, key, this.valueObj[key]));\n\t\t}\n\n\t\treturn Promise.resolve(result);\n\t}\n\n\ttoString(): string {\n\t\treturn `${this.name}\\n${this.value}`;\n\t}\n}\n\nexport class ReplEvaluationInput implements IReplElement {\n\tprivate id: string;\n\n\tconstructor(public value: string) {\n\t\tthis.id = generateUuid();\n\t}\n\n\ttoString(): string {\n\t\treturn this.value;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n}\n\nexport class ReplEvaluationResult extends ExpressionContainer implements IReplElement {\n\tprivate _available = true;\n\n\tget available(): boolean {\n\t\treturn this._available;\n\t}\n\n\tconstructor(public readonly originalExpression: string) {\n\t\tsuper(undefined, undefined, 0, generateUuid());\n\t}\n\n\toverride async evaluateExpression(expression: string, session: IDebugSession | undefined, stackFrame: IStackFrame | undefined, context: string): Promise<boolean> {\n\t\tconst result = await super.evaluateExpression(expression, session, stackFrame, context);\n\t\tthis._available = result;\n\n\t\treturn result;\n\t}\n\n\toverride toString(): string {\n\t\treturn `${this.value}`;\n\t}\n}\n\nexport class ReplGroup implements INestingReplElement {\n\n\tprivate children: IReplElement[] = [];\n\tprivate id: string;\n\tprivate ended = false;\n\tstatic COUNTER = 0;\n\n\tconstructor(\n\t\tpublic readonly session: IDebugSession,\n\t\tpublic name: string,\n\t\tpublic autoExpand: boolean,\n\t\tpublic sourceData?: IReplElementSource\n\t) {\n\t\tthis.id = `replGroup:${ReplGroup.COUNTER++}`;\n\t}\n\n\tget hasChildren() {\n\t\treturn true;\n\t}\n\n\tgetId(): string {\n\t\treturn this.id;\n\t}\n\n\ttoString(includeSource = false): string {\n\t\tconst sourceStr = (includeSource && this.sourceData) ? ` ${this.sourceData.source.name}` : '';\n\t\treturn this.name + sourceStr;\n\t}\n\n\taddChild(child: IReplElement): void {\n\t\tconst lastElement = this.children.length ? this.children[this.children.length - 1] : undefined;\n\t\tif (lastElement instanceof ReplGroup && !lastElement.hasEnded) {\n\t\t\tlastElement.addChild(child);\n\t\t} else {\n\t\t\tthis.children.push(child);\n\t\t}\n\t}\n\n\tgetChildren(): IReplElement[] {\n\t\treturn this.children;\n\t}\n\n\tend(): void {\n\t\tconst lastElement = this.children.length ? this.children[this.children.length - 1] : undefined;\n\t\tif (lastElement instanceof ReplGroup && !lastElement.hasEnded) {\n\t\t\tlastElement.end();\n\t\t} else {\n\t\t\tthis.ended = true;\n\t\t}\n\t}\n\n\tget hasEnded(): boolean {\n\t\treturn this.ended;\n\t}\n}\n\nfunction areSourcesEqual(first: IReplElementSource | undefined, second: IReplElementSource | undefined): boolean {\n\tif (!first && !second) {\n\t\treturn true;\n\t}\n\tif (first && second) {\n\t\treturn first.column === second.column && first.lineNumber === second.lineNumber && first.source.uri.toString() === second.source.uri.toString();\n\t}\n\n\treturn false;\n}\n\nexport interface INewReplElementData {\n\toutput: string;\n\texpression?: IExpression;\n\tsev: severity;\n\tsource?: IReplElementSource;\n}\n\nexport class ReplModel {\n\tprivate replElements: IReplElement[] = [];\n\tprivate readonly _onDidChangeElements = new Emitter<IReplElement | undefined>();\n\treadonly onDidChangeElements = this._onDidChangeElements.event;\n\n\tconstructor(private readonly configurationService: IConfigurationService) { }\n\n\tgetReplElements(): IReplElement[] {\n\t\treturn this.replElements;\n\t}\n\n\tasync addReplExpression(session: IDebugSession, stackFrame: IStackFrame | undefined, expression: string): Promise<void> {\n\t\tthis.addReplElement(new ReplEvaluationInput(expression));\n\t\tconst result = new ReplEvaluationResult(expression);\n\t\tawait result.evaluateExpression(expression, session, stackFrame, 'repl');\n\t\tthis.addReplElement(result);\n\t}\n\n\tappendToRepl(session: IDebugSession, { output, expression, sev, source }: INewReplElementData): void {\n\t\tconst clearAnsiSequence = '\\u001b[2J';\n\t\tconst clearAnsiIndex = output.lastIndexOf(clearAnsiSequence);\n\t\tif (clearAnsiIndex !== -1) {\n\t\t\t// [2J is the ansi escape sequence for clearing the display http://ascii-table.com/ansi-escape-sequences.php\n\t\t\tthis.removeReplExpressions();\n\t\t\tthis.appendToRepl(session, { output: nls.localize('consoleCleared', \"Console was cleared\"), sev: severity.Ignore });\n\t\t\toutput = output.substring(clearAnsiIndex + clearAnsiSequence.length);\n\t\t}\n\n\t\tif (expression) {\n\t\t\t// if there is an output string, prefer to show that, since the DA could\n\t\t\t// have formatted it nicely e.g. with ANSI color codes.\n\t\t\tthis.addReplElement(output\n\t\t\t\t? new ReplOutputElement(session, getUniqueId(), output, sev, source, expression)\n\t\t\t\t: new ReplVariableElement(session, expression, sev, source));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.appendOutputToRepl(session, output, sev, source);\n\t}\n\n\tprivate appendOutputToRepl(session: IDebugSession, output: string, sev: severity, source?: IReplElementSource): void {\n\t\tconst config = this.configurationService.getValue<IDebugConfiguration>('debug');\n\t\tconst previousElement = this.replElements.length ? this.replElements[this.replElements.length - 1] : undefined;\n\n\t\t// Handle concatenation of incomplete lines first\n\t\tif (previousElement instanceof ReplOutputElement && previousElement.severity === sev && areSourcesEqual(previousElement.sourceData, source)) {\n\t\t\tif (!previousElement.value.endsWith('\\n') && !previousElement.value.endsWith('\\r\\n') && previousElement.count === 1) {\n\t\t\t\t// Concatenate with previous incomplete line\n\t\t\t\tconst combinedOutput = previousElement.value + output;\n\t\t\t\tthis.replElements[this.replElements.length - 1] = new ReplOutputElement(\n\t\t\t\t\tsession, getUniqueId(), combinedOutput, sev, source);\n\t\t\t\tthis._onDidChangeElements.fire(undefined);\n\n\t\t\t\t// If the combined output now forms a complete line and collapsing is enabled,\n\t\t\t\t// check if it can be collapsed with previous elements\n\t\t\t\tif (config.console.collapseIdenticalLines && combinedOutput.endsWith('\\n')) {\n\t\t\t\t\tthis.tryCollapseCompleteLine(sev, source);\n\t\t\t\t}\n\n\t\t\t\t// If the combined output contains multiple lines, apply line-level collapsing\n\t\t\t\tif (config.console.collapseIdenticalLines && combinedOutput.includes('\\n')) {\n\t\t\t\t\tconst lines = this.splitIntoLines(combinedOutput);\n\t\t\t\t\tif (lines.length > 1) {\n\t\t\t\t\t\tthis.applyLineLevelCollapsing(session, sev, source);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// If collapsing is enabled and the output contains line breaks, parse and collapse at line level\n\t\tif (config.console.collapseIdenticalLines && output.includes('\\n')) {\n\t\t\tthis.processMultiLineOutput(session, output, sev, source);\n\t\t} else {\n\t\t\t// For simple output without line breaks, use the original logic\n\t\t\tif (previousElement instanceof ReplOutputElement && previousElement.severity === sev && areSourcesEqual(previousElement.sourceData, source)) {\n\t\t\t\tif (previousElement.value === output && config.console.collapseIdenticalLines) {\n\t\t\t\t\tpreviousElement.count++;\n\t\t\t\t\t// No need to fire an event, just the count updates and badge will adjust automatically\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst element = new ReplOutputElement(session, getUniqueId(), output, sev, source);\n\t\t\tthis.addReplElement(element);\n\t\t}\n\t}\n\n\tprivate tryCollapseCompleteLine(sev: severity, source?: IReplElementSource): void {\n\t\t// Try to collapse the last element with the second-to-last if they are identical complete lines\n\t\tif (this.replElements.length < 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastElement = this.replElements[this.replElements.length - 1];\n\t\tconst secondToLastElement = this.replElements[this.replElements.length - 2];\n\n\t\tif (lastElement instanceof ReplOutputElement &&\n\t\t\tsecondToLastElement instanceof ReplOutputElement &&\n\t\t\tlastElement.severity === sev &&\n\t\t\tsecondToLastElement.severity === sev &&\n\t\t\tareSourcesEqual(lastElement.sourceData, source) &&\n\t\t\tareSourcesEqual(secondToLastElement.sourceData, source) &&\n\t\t\tlastElement.value === secondToLastElement.value &&\n\t\t\tlastElement.count === 1 &&\n\t\t\tlastElement.value.endsWith('\\n')) {\n\n\t\t\t// Collapse the last element into the second-to-last\n\t\t\tsecondToLastElement.count += lastElement.count;\n\t\t\tthis.replElements.pop();\n\t\t\tthis._onDidChangeElements.fire(undefined);\n\t\t}\n\t}\n\n\tprivate processMultiLineOutput(session: IDebugSession, output: string, sev: severity, source?: IReplElementSource): void {\n\t\t// Split output into lines, preserving line endings\n\t\tconst lines = this.splitIntoLines(output);\n\n\t\tfor (const line of lines) {\n\t\t\tif (line.length === 0) { continue; }\n\n\t\t\tconst previousElement = this.replElements.length ? this.replElements[this.replElements.length - 1] : undefined;\n\n\t\t\t// Check if this line can be collapsed with the previous one\n\t\t\tif (previousElement instanceof ReplOutputElement &&\n\t\t\t\tpreviousElement.severity === sev &&\n\t\t\t\tareSourcesEqual(previousElement.sourceData, source) &&\n\t\t\t\tpreviousElement.value === line) {\n\t\t\t\tpreviousElement.count++;\n\t\t\t\t// No need to fire an event, just the count updates and badge will adjust automatically\n\t\t\t} else {\n\t\t\t\tconst element = new ReplOutputElement(session, getUniqueId(), line, sev, source);\n\t\t\t\tthis.addReplElement(element);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate splitIntoLines(text: string): string[] {\n\t\t// Split text into lines while preserving line endings, using indexOf for efficiency\n\t\tconst lines: string[] = [];\n\t\tlet start = 0;\n\n\t\twhile (start < text.length) {\n\t\t\tconst nextLF = text.indexOf('\\n', start);\n\t\t\tif (nextLF === -1) {\n\t\t\t\tlines.push(text.substring(start));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tlines.push(text.substring(start, nextLF + 1));\n\t\t\tstart = nextLF + 1;\n\t\t}\n\n\t\treturn lines;\n\t}\n\n\tprivate applyLineLevelCollapsing(session: IDebugSession, sev: severity, source?: IReplElementSource): void {\n\t\t// Apply line-level collapsing to the last element if it contains multiple lines\n\t\tconst lastElement = this.replElements[this.replElements.length - 1];\n\t\tif (!(lastElement instanceof ReplOutputElement) || lastElement.severity !== sev || !areSourcesEqual(lastElement.sourceData, source)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lines = this.splitIntoLines(lastElement.value);\n\t\tif (lines.length <= 1) {\n\t\t\treturn; // No multiple lines to collapse\n\t\t}\n\n\t\t// Remove the last element and reprocess it as multiple lines\n\t\tthis.replElements.pop();\n\n\t\t// Process each line and try to collapse with existing elements\n\t\tfor (const line of lines) {\n\t\t\tif (line.length === 0) { continue; }\n\n\t\t\tconst previousElement = this.replElements.length ? this.replElements[this.replElements.length - 1] : undefined;\n\n\t\t\t// Check if this line can be collapsed with the previous one\n\t\t\tif (previousElement instanceof ReplOutputElement &&\n\t\t\t\tpreviousElement.severity === sev &&\n\t\t\t\tareSourcesEqual(previousElement.sourceData, source) &&\n\t\t\t\tpreviousElement.value === line) {\n\t\t\t\tpreviousElement.count++;\n\t\t\t} else {\n\t\t\t\tconst element = new ReplOutputElement(session, getUniqueId(), line, sev, source);\n\t\t\t\tthis.addReplElement(element);\n\t\t\t}\n\t\t}\n\n\t\tthis._onDidChangeElements.fire(undefined);\n\t}\n\n\tstartGroup(session: IDebugSession, name: string, autoExpand: boolean, sourceData?: IReplElementSource): void {\n\t\tconst group = new ReplGroup(session, name, autoExpand, sourceData);\n\t\tthis.addReplElement(group);\n\t}\n\n\tendGroup(): void {\n\t\tconst lastElement = this.replElements[this.replElements.length - 1];\n\t\tif (lastElement instanceof ReplGroup) {\n\t\t\tlastElement.end();\n\t\t}\n\t}\n\n\tprivate addReplElement(newElement: IReplElement): void {\n\t\tconst lastElement = this.replElements.length ? this.replElements[this.replElements.length - 1] : undefined;\n\t\tif (lastElement instanceof ReplGroup && !lastElement.hasEnded) {\n\t\t\tlastElement.addChild(newElement);\n\t\t} else {\n\t\t\tthis.replElements.push(newElement);\n\t\t\tconst config = this.configurationService.getValue<IDebugConfiguration>('debug');\n\t\t\tif (this.replElements.length > config.console.maximumLines) {\n\t\t\t\tthis.replElements.splice(0, this.replElements.length - config.console.maximumLines);\n\t\t\t}\n\t\t}\n\t\tthis._onDidChangeElements.fire(newElement);\n\t}\n\n\tremoveReplExpressions(): void {\n\t\tif (this.replElements.length > 0) {\n\t\t\tthis.replElements = [];\n\t\t\tthis._onDidChangeElements.fire(undefined);\n\t\t}\n\t}\n\n\t/** Returns a new REPL model that's a copy of this one. */\n\tclone() {\n\t\tconst newRepl = new ReplModel(this.configurationService);\n\t\tnewRepl.replElements = this.replElements.slice();\n\t\treturn newRepl;\n\t}\n}\n"]}