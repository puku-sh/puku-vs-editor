{"version":3,"sources":["vs/workbench/contrib/debug/common/debugLifecycle.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAGhG,OAAO,KAAK,GAAG,MAAM,oBAAoB,CAAC;AAC1C,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,cAAc,EAAE,MAAM,gDAAgD,CAAC;AAEhF,OAAO,EAAuB,aAAa,EAAE,MAAM,YAAY,CAAC;AAChE,OAAO,EAAE,iBAAiB,EAAkB,MAAM,iDAAiD,CAAC;AAE7F,IAAM,cAAc,GAApB,MAAM,cAAc;IAG1B,YACoB,gBAAmC,EACtB,YAA2B,EACnB,oBAA2C,EAClD,aAA6B;QAF9B,iBAAY,GAAZ,YAAY,CAAe;QACnB,yBAAoB,GAApB,oBAAoB,CAAuB;QAClD,kBAAa,GAAb,aAAa,CAAgB;QAE9D,IAAI,CAAC,UAAU,GAAG,gBAAgB,CAAC,gBAAgB,CAAC,KAAK,EAAC,CAAC,EAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC;IACzH,CAAC;IAEO,kBAAkB,CAAC,OAAuB;QACjD,MAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,aAAa,KAAK,SAAS,CAAC,CAAC;QAC3G,IAAI,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC/B,OAAO,KAAK,CAAC;QACd,CAAC;QAED,MAAM,mBAAmB,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAsB,OAAO,CAAC,CAAC,aAAa,CAAC;QAC3G,IAAI,mBAAmB,KAAK,OAAO,EAAE,CAAC;YACrC,OAAO,KAAK,CAAC;QACd,CAAC;QAED,OAAO,IAAI,CAAC,2BAA2B,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC9D,CAAC;IAEM,OAAO;QACb,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;IAEO,KAAK,CAAC,2BAA2B,CAAC,WAAmB;QAC5D,IAAI,OAAe,CAAC;QACpB,IAAI,WAAW,KAAK,CAAC,EAAE,CAAC;YACvB,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,IAA6C,EAAE,IAAqE,CAAC,CAAC;QAC9I,CAAC;aAAM,CAAC;YACP,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,IAA2C,EAAE,IAAsE,CAAC,CAAC;QAC7I,CAAC;QACD,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;YAC5C,OAAO;YACP,IAAI,EAAE,SAAS;YACf,aAAa,EAAE,GAAG,CAAC,QAAQ,CAAC,EAAE,EAAuD,CAApD,CAAsD,CAApD,GAAsE,CAAC,QAA3D,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;SACnF,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC;IACvB,CAAC;CACD,CAAA;AA5CY,cAAc;IAIxB,WAAA,iBAAiB,CAAA;IACjB,WAAA,aAAa,CAAA;IACb,WAAA,qBAAqB,CAAA;IACrB,WAAA,cAAc,CAAA;GAPJ,cAAc,CA4C1B","file":"debugLifecycle.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IDebugConfiguration, IDebugService } from './debug.js';\nimport { ILifecycleService, ShutdownReason } from '../../../services/lifecycle/common/lifecycle.js';\n\nexport class DebugLifecycle implements IWorkbenchContribution {\n\tprivate disposable: IDisposable;\n\n\tconstructor(\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t) {\n\t\tthis.disposable = lifecycleService.onBeforeShutdown(async e => e.veto(this.shouldVetoShutdown(e.reason), 'veto.debug'));\n\t}\n\n\tprivate shouldVetoShutdown(_reason: ShutdownReason): boolean | Promise<boolean> {\n\t\tconst rootSessions = this.debugService.getModel().getSessions().filter(s => s.parentSession === undefined);\n\t\tif (rootSessions.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst shouldConfirmOnExit = this.configurationService.getValue<IDebugConfiguration>('debug').confirmOnExit;\n\t\tif (shouldConfirmOnExit === 'never') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.showWindowCloseConfirmation(rootSessions.length);\n\t}\n\n\tpublic dispose() {\n\t\treturn this.disposable.dispose();\n\t}\n\n\tprivate async showWindowCloseConfirmation(numSessions: number): Promise<boolean> {\n\t\tlet message: string;\n\t\tif (numSessions === 1) {\n\t\t\tmessage = nls.localize('debug.debugSessionCloseConfirmationSingular', \"There is an active debug session, are you sure you want to stop it?\");\n\t\t} else {\n\t\t\tmessage = nls.localize('debug.debugSessionCloseConfirmationPlural', \"There are active debug sessions, are you sure you want to stop them?\");\n\t\t}\n\t\tconst res = await this.dialogService.confirm({\n\t\t\tmessage,\n\t\t\ttype: 'warning',\n\t\t\tprimaryButton: nls.localize({ key: 'debug.stop', comment: ['&& denotes a mnemonic'] }, \"&&Stop Debugging\")\n\t\t});\n\t\treturn !res.confirmed;\n\t}\n}\n"]}