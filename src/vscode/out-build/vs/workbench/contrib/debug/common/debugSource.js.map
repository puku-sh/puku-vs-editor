{"version":3,"sources":["vs/workbench/contrib/debug/common/debugSource.ts"],"names":[],"mappings":"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","file":"debugSource.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { normalize, isAbsolute } from '../../../../base/common/path.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { DEBUG_SCHEME } from './debug.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { IEditorService, SIDE_GROUP, ACTIVE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { isUriString } from './debugUtils.js';\nimport { IEditorPane } from '../../../common/editor.js';\nimport { TextEditorSelectionRevealType } from '../../../../platform/editor/common/editor.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\n\nexport const UNKNOWN_SOURCE_LABEL = nls.localize('unknownSource', \"Unknown Source\");\n\n/**\n * Debug URI format\n *\n * a debug URI represents a Source object and the debug session where the Source comes from.\n *\n *       debug:arbitrary_path?session=123e4567-e89b-12d3-a456-426655440000&ref=1016\n *       \\___/ \\____________/ \\__________________________________________/ \\______/\n *         |          |                             |                          |\n *      scheme   source.path                    session id            source.reference\n *\n *\n */\n\nexport class Source {\n\n\treadonly uri: URI;\n\tavailable: boolean;\n\traw: DebugProtocol.Source;\n\n\tconstructor(raw_: DebugProtocol.Source | undefined, sessionId: string, uriIdentityService: IUriIdentityService, logService: ILogService) {\n\t\tlet path: string;\n\t\tif (raw_) {\n\t\t\tthis.raw = raw_;\n\t\t\tpath = this.raw.path || this.raw.name || '';\n\t\t\tthis.available = true;\n\t\t} else {\n\t\t\tthis.raw = { name: UNKNOWN_SOURCE_LABEL };\n\t\t\tthis.available = false;\n\t\t\tpath = `${DEBUG_SCHEME}:${UNKNOWN_SOURCE_LABEL}`;\n\t\t}\n\n\t\tthis.uri = getUriFromSource(this.raw, path, sessionId, uriIdentityService, logService);\n\t}\n\n\tget name() {\n\t\treturn this.raw.name || resources.basenameOrAuthority(this.uri);\n\t}\n\n\tget origin() {\n\t\treturn this.raw.origin;\n\t}\n\n\tget presentationHint() {\n\t\treturn this.raw.presentationHint;\n\t}\n\n\tget reference() {\n\t\treturn this.raw.sourceReference;\n\t}\n\n\tget inMemory() {\n\t\treturn this.uri.scheme === DEBUG_SCHEME;\n\t}\n\n\topenInEditor(editorService: IEditorService, selection: IRange, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean): Promise<IEditorPane | undefined> {\n\t\treturn !this.available ? Promise.resolve(undefined) : editorService.openEditor({\n\t\t\tresource: this.uri,\n\t\t\tdescription: this.origin,\n\t\t\toptions: {\n\t\t\t\tpreserveFocus,\n\t\t\t\tselection,\n\t\t\t\trevealIfOpened: true,\n\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t\tpinned\n\t\t\t}\n\t\t}, sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\t}\n\n\tstatic getEncodedDebugData(modelUri: URI): { name: string; path: string; sessionId?: string; sourceReference?: number } {\n\t\tlet path: string;\n\t\tlet sourceReference: number | undefined;\n\t\tlet sessionId: string | undefined;\n\n\t\tswitch (modelUri.scheme) {\n\t\t\tcase Schemas.file:\n\t\t\t\tpath = normalize(modelUri.fsPath);\n\t\t\t\tbreak;\n\t\t\tcase DEBUG_SCHEME:\n\t\t\t\tpath = modelUri.path;\n\t\t\t\tif (modelUri.query) {\n\t\t\t\t\tconst keyvalues = modelUri.query.split('&');\n\t\t\t\t\tfor (const keyvalue of keyvalues) {\n\t\t\t\t\t\tconst pair = keyvalue.split('=');\n\t\t\t\t\t\tif (pair.length === 2) {\n\t\t\t\t\t\t\tswitch (pair[0]) {\n\t\t\t\t\t\t\t\tcase 'session':\n\t\t\t\t\t\t\t\t\tsessionId = pair[1];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'ref':\n\t\t\t\t\t\t\t\t\tsourceReference = parseInt(pair[1]);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tpath = modelUri.toString();\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\tname: resources.basenameOrAuthority(modelUri),\n\t\t\tpath,\n\t\t\tsourceReference,\n\t\t\tsessionId\n\t\t};\n\t}\n}\n\nexport function getUriFromSource(raw: DebugProtocol.Source, path: string | undefined, sessionId: string, uriIdentityService: IUriIdentityService, logService: ILogService): URI {\n\tconst _getUriFromSource = (path: string | undefined) => {\n\t\tif (typeof raw.sourceReference === 'number' && raw.sourceReference > 0) {\n\t\t\treturn URI.from({\n\t\t\t\tscheme: DEBUG_SCHEME,\n\t\t\t\tpath: path?.replace(/^\\/+/g, '/'), // #174054\n\t\t\t\tquery: `session=${sessionId}&ref=${raw.sourceReference}`\n\t\t\t});\n\t\t}\n\n\t\tif (path && isUriString(path)) {\t// path looks like a uri\n\t\t\treturn uriIdentityService.asCanonicalUri(URI.parse(path));\n\t\t}\n\t\t// assume a filesystem path\n\t\tif (path && isAbsolute(path)) {\n\t\t\treturn uriIdentityService.asCanonicalUri(URI.file(path));\n\t\t}\n\t\t// path is relative: since VS Code cannot deal with this by itself\n\t\t// create a debug url that will result in a DAP 'source' request when the url is resolved.\n\t\treturn uriIdentityService.asCanonicalUri(URI.from({\n\t\t\tscheme: DEBUG_SCHEME,\n\t\t\tpath,\n\t\t\tquery: `session=${sessionId}`\n\t\t}));\n\t};\n\n\n\ttry {\n\t\treturn _getUriFromSource(path);\n\t} catch (err) {\n\t\tlogService.error('Invalid path from debug adapter: ' + path);\n\t\treturn _getUriFromSource('/invalidDebugSource');\n\t}\n}\n"]}