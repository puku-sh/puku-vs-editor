{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/test/browser/debugHover.test.ts","vs/workbench/contrib/debug/test/browser/debugHover.test.ts"],"names":[],"mappings":"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","file":"debugHover.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { findExpressionInStackFrame } from '../../browser/debugHover.js';\nimport type { IExpression, IScope } from '../../common/debug.js';\nimport { Scope, StackFrame, Thread, Variable } from '../../common/debugModel.js';\nimport { Source } from '../../common/debugSource.js';\nimport { createTestSession } from './callStack.test.js';\nimport { createMockDebugModel, mockUriIdentityService } from './mockDebugModel.js';\n\nsuite('Debug - Hover', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('find expression in stack frame', async () => {\n\t\tconst model = createMockDebugModel(disposables);\n\t\tconst session = disposables.add(createTestSession(model));\n\n\t\tconst thread = new class extends Thread {\n\t\t\tpublic override getCallStack(): StackFrame[] {\n\t\t\t\treturn [stackFrame];\n\t\t\t}\n\t\t}(session, 'mockthread', 1);\n\n\t\tconst firstSource = new Source({\n\t\t\tname: 'internalModule.js',\n\t\t\tpath: 'a/b/c/d/internalModule.js',\n\t\t\tsourceReference: 10,\n\t\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\n\t\tconst stackFrame = new class extends StackFrame {\n\t\t\toverride getScopes(): Promise<IScope[]> {\n\t\t\t\treturn Promise.resolve([scope]);\n\t\t\t}\n\t\t}(thread, 1, firstSource, 'app.js', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\n\n\t\tconst scope = new class extends Scope {\n\t\t\toverride getChildren(): Promise<IExpression[]> {\n\t\t\t\treturn Promise.resolve([variableA]);\n\t\t\t}\n\t\t}(stackFrame, 1, 'local', 1, false, 10, 10);\n\n\t\tconst variableA = new class extends Variable {\n\t\t\toverride getChildren(): Promise<IExpression[]> {\n\t\t\t\treturn Promise.resolve([variableB]);\n\t\t\t}\n\t\t}(session, 1, scope, 2, 'A', 'A', undefined, 0, 0, undefined, {}, 'string');\n\t\tconst variableB = new Variable(session, 1, scope, 2, 'B', 'A.B', undefined, 0, 0, undefined, {}, 'string');\n\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, []), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A']), variableA);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['doesNotExist', 'no']), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['a']), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['B']), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A', 'B']), variableB);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A', 'C']), undefined);\n\n\t\t// We do not search in expensive scopes\n\t\tscope.expensive = true;\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A']), undefined);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { findExpressionInStackFrame } from '../../browser/debugHover.js';\nimport type { IExpression, IScope } from '../../common/debug.js';\nimport { Scope, StackFrame, Thread, Variable } from '../../common/debugModel.js';\nimport { Source } from '../../common/debugSource.js';\nimport { createTestSession } from './callStack.test.js';\nimport { createMockDebugModel, mockUriIdentityService } from './mockDebugModel.js';\n\nsuite('Debug - Hover', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('find expression in stack frame', async () => {\n\t\tconst model = createMockDebugModel(disposables);\n\t\tconst session = disposables.add(createTestSession(model));\n\n\t\tconst thread = new class extends Thread {\n\t\t\tpublic override getCallStack(): StackFrame[] {\n\t\t\t\treturn [stackFrame];\n\t\t\t}\n\t\t}(session, 'mockthread', 1);\n\n\t\tconst firstSource = new Source({\n\t\t\tname: 'internalModule.js',\n\t\t\tpath: 'a/b/c/d/internalModule.js',\n\t\t\tsourceReference: 10,\n\t\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\n\t\tconst stackFrame = new class extends StackFrame {\n\t\t\toverride getScopes(): Promise<IScope[]> {\n\t\t\t\treturn Promise.resolve([scope]);\n\t\t\t}\n\t\t}(thread, 1, firstSource, 'app.js', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\n\n\t\tconst scope = new class extends Scope {\n\t\t\toverride getChildren(): Promise<IExpression[]> {\n\t\t\t\treturn Promise.resolve([variableA]);\n\t\t\t}\n\t\t}(stackFrame, 1, 'local', 1, false, 10, 10);\n\n\t\tconst variableA = new class extends Variable {\n\t\t\toverride getChildren(): Promise<IExpression[]> {\n\t\t\t\treturn Promise.resolve([variableB]);\n\t\t\t}\n\t\t}(session, 1, scope, 2, 'A', 'A', undefined, 0, 0, undefined, {}, 'string');\n\t\tconst variableB = new Variable(session, 1, scope, 2, 'B', 'A.B', undefined, 0, 0, undefined, {}, 'string');\n\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, []), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A']), variableA);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['doesNotExist', 'no']), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['a']), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['B']), undefined);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A', 'B']), variableB);\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A', 'C']), undefined);\n\n\t\t// We do not search in expensive scopes\n\t\tscope.expensive = true;\n\t\tassert.strictEqual(await findExpressionInStackFrame(stackFrame, ['A']), undefined);\n\t});\n});\n"]}