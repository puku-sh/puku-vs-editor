{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/test/browser/repl.test.ts","vs/workbench/contrib/debug/test/browser/repl.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAE5B,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,QAAQ,MAAM,wCAAwC,CAAC;AAC9D,OAAO,EAAE,uCAAuC,EAAE,MAAM,0CAA0C,CAAC;AACnG,OAAO,EAAE,wBAAwB,EAAE,MAAM,+EAA+E,CAAC;AACzH,OAAO,EAAE,eAAe,EAAE,MAAM,kCAAkC,CAAC;AACnE,OAAO,EAAE,UAAU,EAAE,MAAM,6BAA6B,CAAC;AACzD,OAAO,EAAc,UAAU,EAAE,MAAM,EAAE,MAAM,4BAA4B,CAAC;AAC5E,OAAO,EAAE,oBAAoB,EAAwD,SAAS,EAA0C,MAAM,2BAA2B,CAAC;AAC1K,OAAO,EAAE,iBAAiB,EAAE,MAAM,qBAAqB,CAAC;AACxD,OAAO,EAAE,oBAAoB,EAAE,MAAM,qBAAqB,CAAC;AAC3D,OAAO,EAAE,gBAAgB,EAAE,cAAc,EAAE,MAAM,wBAAwB,CAAC;AAE1E,KAAK,CAAC,cAAc,EAAE,GAAG,EAAE;IAC1B,IAAI,KAAiB,CAAC;IACtB,IAAI,UAA0B,CAAC;IAC/B,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAC9D,MAAM,oBAAoB,GAAG,IAAI,wBAAwB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,sBAAsB,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;IAEpH,KAAK,CAAC,GAAG,EAAE;QACV,KAAK,GAAG,oBAAoB,CAAC,WAAW,CAAC,CAAC;QAC1C,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;IACnC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,aAAa,EAAE,GAAG,EAAE;QACxB,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACjD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,aAAa,EAAE,GAAG,EAAE,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC;QAE3E,IAAI,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;QACzD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,oCAAoC,CAAC,CAAC;QAC5E,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;QAEzD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;QACnE,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;QAE3D,MAAM,cAAc,GAAG,EAAE,MAAM,EAAE,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC;QACtD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,UAAU,EAAE,IAAI,oBAAoB,CAAC,QAAQ,EAAE,MAAM,EAAE,cAAc,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACvI,MAAM,OAAO,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACvD,MAAM,CAAC,eAAe,CAAE,OAAO,CAAC,UAAmC,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;QAE9F,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAErD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAClE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACnE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAClE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvD,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;QAEtF,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC9B,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,mBAAmB,EAAE,GAAG,EAAE;QAC9B,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACjD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3E,MAAM,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC7D,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;YAC/E,EAAE,KAAK,EAAE,cAAc,EAAE,KAAK,EAAE,CAAC,EAAE;YACnC,EAAE,KAAK,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,EAAE;YACpC,EAAE,KAAK,EAAE,cAAc,EAAE,KAAK,EAAE,CAAC,EAAE;SACnC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE;QACzB,+DAA+D;QAC/D,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAChG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC,CAAC,CAAC;QAChH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC,CAAC,CAAC;QACvH,MAAM,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,YAAY,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAC/H,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,aAAa,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;QAE9F,IAAI,aAAa,GAAG,CAAC,CAAC;QACtB,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,uBAAuB,CAAC,GAAG,EAAE,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC;QAEvE,MAAM,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEvD,UAAU,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEvD,MAAM,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEvD,MAAM,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,kBAAkB,EAAE,GAAG,EAAE;QAC7B,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACxD,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAE1B,mDAAmD;QACnD,OAAO,CAAC,KAAK,CAAC,GAAQ,UAAU,CAAC;QACjC,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,OAAO,EAAE,YAAY,EAAE,CAAC,CAAC,CAAC;QACpD,mDAAmD;QACnD,MAAM,UAAU,GAAG,IAAI,UAAU,CAAC,MAAM,EAAE,CAAC,EAAO,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,eAAe,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACnK,MAAM,SAAS,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACtD,SAAS,CAAC,iBAAiB,CAAC,OAAO,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC,IAAI,EAAE,CAAC;QACtE,SAAS,CAAC,iBAAiB,CAAC,OAAO,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC,IAAI,EAAE,CAAC;QACtE,SAAS,CAAC,iBAAiB,CAAC,OAAO,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC,IAAI,EAAE,CAAC;QAEtE,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC1D,SAAS,CAAC,eAAe,EAAE,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE;YACxC,MAAM,CAAC,WAAW,CAAuB,EAAG,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC;QAEH,SAAS,CAAC,qBAAqB,EAAE,CAAC;QAClC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,eAAe,EAAE,KAAK,IAAI,EAAE;QAChC,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QAE1B,MAAM,OAAO,GAAG,IAAI,gBAAgB,EAAE,CAAC;QACvC,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,OAAO,EAAE,SAAU,EAAE,EAAE,EAAE,EAAE,EAAE,SAAU,EAAE,SAAU,EAAE,SAAU,EAAE,SAAU,CAAE,CAAC,CAAC;QAC/H,OAAO,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;QAE/B,MAAM,OAAO,CAAC,iBAAiB,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAuB,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;QAC1F,MAAM,CAAC,WAAW,CAAqB,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;QACxF,MAAM,CAAC,WAAW,CAAwB,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;QAE5F,MAAM,OAAO,CAAC,iBAAiB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACtD,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC;QACjB,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAuB,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QACzF,MAAM,CAAC,WAAW,CAAwB,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;QAC3F,MAAM,CAAC,WAAW,CAAqB,OAAO,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,aAAa,EAAE,KAAK,IAAI,EAAE;QAC9B,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QAEjD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,mBAAmB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChF,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,qBAAqB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAClF,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,sBAAsB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACnF,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QACxC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAc,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAC1C,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAC3C,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC5C,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAE1C,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,wBAAwB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACrF,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,yBAAyB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACtF,MAAM,QAAQ,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAqB,QAAQ,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAqB,QAAQ,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,sBAAsB,CAAC,CAAC;QACnF,MAAM,CAAC,WAAW,CAAa,QAAQ,CAAC,CAAC,CAAE,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAC7D,MAAM,CAAC,WAAW,CAAa,QAAQ,CAAC,CAAC,CAAE,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC7D,MAAM,CAAC,WAAW,CAAa,QAAQ,CAAC,CAAC,CAAE,CAAC,WAAW,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,MAAM,CAAC,WAAW,CAAa,QAAQ,CAAC,CAAC,CAAE,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QAC5D,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,qBAAqB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,oBAAoB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACjF,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAqB,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAE,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;IAChG,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,yDAAyD,EAAE,GAAG,EAAE;QACpE,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QAEjD,qEAAqE;QACrE,yCAAyC;QACzC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAEjE,IAAI,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3D,0DAA0D;QAC1D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAC/C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAEzC,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAE7B,wDAAwD;QACxD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAEjE,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QACvD,sDAAsD;QACtD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAC9C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,8DAA8D,EAAE,GAAG,EAAE;QACzE,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QAEjD,4EAA4E;QAC5E,2CAA2C;QAC3C,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,gBAAgB,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAE7E,MAAM,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC7D,+CAA+C;QAC/C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE;QAC7D,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QAEjD,wDAAwD;QACxD,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAE3E,MAAM,QAAQ,GAAwB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC7D,+CAA+C;QAC/C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,aAAa,EAAE,KAAK,IAAI,EAAE;QAC9B,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1D,MAAM,IAAI,GAAG,IAAI,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACjD,MAAM,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;QAEpC,MAAM,mBAAmB,GAAG,GAAwB,EAAE;YACrD,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACxC,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAA0B,EAAE;gBACpD,MAAM,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,iCAAyB,CAAC;gBAClE,OAAO,YAAY,KAAK,IAAI,IAAI,YAAY,mCAA2B,CAAC;YACzE,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC;QAEF,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;QAE5E,UAAU,CAAC,WAAW,GAAG,OAAO,CAAC;QACjC,MAAM,EAAE,GAAG,mBAAmB,EAAE,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAEhD,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC;QAClC,MAAM,EAAE,GAAG,mBAAmB,EAAE,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QAEjD,UAAU,CAAC,WAAW,GAAG,aAAa,CAAC;QACvC,MAAM,EAAE,GAAG,mBAAmB,EAAE,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QAEjD,UAAU,CAAC,WAAW,GAAG,eAAe,CAAC;QACzC,MAAM,EAAE,GAAG,mBAAmB,EAAE,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QAEjD,UAAU,CAAC,WAAW,GAAG,eAAe,CAAC;QACzC,MAAM,OAAO,GAAG,mBAAmB,EAAE,CAAC;QACtC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;QAE9C,UAAU,CAAC,WAAW,GAAG,OAAO,CAAC;QACjC,MAAM,EAAE,GAAG,mBAAmB,EAAE,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEjC,UAAU,CAAC,WAAW,GAAG,MAAM,CAAC;QAChC,MAAM,EAAE,GAAG,mBAAmB,EAAE,CAAC;QACjC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"repl.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport assert from 'assert';\nimport { TreeVisibility } from '../../../../../base/browser/ui/tree/tree.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport severity from '../../../../../base/common/severity.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { RawDebugSession } from '../../browser/rawDebugSession.js';\nimport { ReplFilter } from '../../browser/replFilter.js';\nimport { DebugModel, StackFrame, Thread } from '../../common/debugModel.js';\nimport { RawObjectReplElement, ReplEvaluationInput, ReplEvaluationResult, ReplGroup, ReplModel, ReplOutputElement, ReplVariableElement } from '../../common/replModel.js';\nimport { createTestSession } from './callStack.test.js';\nimport { createMockDebugModel } from './mockDebugModel.js';\nimport { MockDebugAdapter, MockRawSession } from '../common/mockDebug.js';\n\nsuite('Debug - REPL', () => {\n\tlet model: DebugModel;\n\tlet rawSession: MockRawSession;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tconst configurationService = new TestConfigurationService({ debug: { console: { collapseIdenticalLines: true } } });\n\n\tsetup(() => {\n\t\tmodel = createMockDebugModel(disposables);\n\t\trawSession = new MockRawSession();\n\t});\n\n\ttest('repl output', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'second line ', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'third line ', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'fourth line', sev: severity.Error });\n\n\t\tlet elements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 2);\n\t\tassert.strictEqual(elements[0].value, 'first line\\n');\n\t\tassert.strictEqual(elements[0].severity, severity.Error);\n\t\tassert.strictEqual(elements[1].value, 'second line third line fourth line');\n\t\tassert.strictEqual(elements[1].severity, severity.Error);\n\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Warning });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 3);\n\t\tassert.strictEqual(elements[2].value, '1');\n\t\tassert.strictEqual(elements[2].severity, severity.Warning);\n\n\t\tconst keyValueObject = { 'key1': 2, 'key2': 'value' };\n\t\trepl.appendToRepl(session, { output: '', expression: new RawObjectReplElement('fakeid', 'fake', keyValueObject), sev: severity.Info });\n\t\tconst element = <ReplVariableElement>repl.getReplElements()[3];\n\t\tassert.strictEqual(element.expression.value, 'Object');\n\t\tassert.deepStrictEqual((element.expression as RawObjectReplElement).valueObj, keyValueObject);\n\n\t\trepl.removeReplExpressions();\n\t\tassert.strictEqual(repl.getReplElements().length, 0);\n\n\t\trepl.appendToRepl(session, { output: '1\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '2', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '3\\n4', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '5\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '6', sev: severity.Info });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.deepStrictEqual(elements.map(e => e.toString()), ['1\\n', '23\\n', '45\\n', '6']);\n\n\t\trepl.removeReplExpressions();\n\t});\n\n\ttest('repl output count', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line\\n', sev: severity.Info });\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.deepStrictEqual(elements.map(e => ({ value: e.value, count: e.count })), [\n\t\t\t{ value: 'first line\\n', count: 3 },\n\t\t\t{ value: 'second line\\n', count: 2 },\n\t\t\t{ value: 'third line\\n', count: 1 }\n\t\t]);\n\t});\n\n\ttest('repl merging', () => {\n\t\t// 'mergeWithParent' should be ignored when there is no parent.\n\t\tconst parent = disposables.add(createTestSession(model, 'parent', { repl: 'mergeWithParent' }));\n\t\tconst child1 = disposables.add(createTestSession(model, 'child1', { parentSession: parent, repl: 'separate' }));\n\t\tconst child2 = disposables.add(createTestSession(model, 'child2', { parentSession: parent, repl: 'mergeWithParent' }));\n\t\tconst grandChild = disposables.add(createTestSession(model, 'grandChild', { parentSession: child2, repl: 'mergeWithParent' }));\n\t\tconst child3 = disposables.add(createTestSession(model, 'child3', { parentSession: parent }));\n\n\t\tlet parentChanges = 0;\n\t\tdisposables.add(parent.onDidChangeReplElements(() => ++parentChanges));\n\n\t\tparent.appendToRepl({ output: '1\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 1);\n\t\tassert.strictEqual(parent.getReplElements().length, 1);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 1);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 1);\n\t\tassert.strictEqual(child3.getReplElements().length, 0);\n\n\t\tgrandChild.appendToRepl({ output: '2\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 0);\n\n\t\tchild3.appendToRepl({ output: '3\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 1);\n\n\t\tchild1.appendToRepl({ output: '4\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 1);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 1);\n\t});\n\n\ttest('repl expressions', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tassert.strictEqual(session.getReplElements().length, 0);\n\t\tmodel.addSession(session);\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tsession['raw'] = <any>rawSession;\n\t\tconst thread = new Thread(session, 'mockthread', 1);\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst stackFrame = new StackFrame(thread, 1, <any>undefined, 'app.js', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\t\tconst replModel = new ReplModel(configurationService);\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\n\t\tassert.strictEqual(replModel.getReplElements().length, 3);\n\t\treplModel.getReplElements().forEach(re => {\n\t\t\tassert.strictEqual((<ReplEvaluationInput>re).value, 'myVariable');\n\t\t});\n\n\t\treplModel.removeReplExpressions();\n\t\tassert.strictEqual(replModel.getReplElements().length, 0);\n\t});\n\n\ttest('repl ordering', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tmodel.addSession(session);\n\n\t\tconst adapter = new MockDebugAdapter();\n\t\tconst raw = disposables.add(new RawDebugSession(adapter, undefined!, '', '', undefined!, undefined!, undefined!, undefined!,));\n\t\tsession.initializeForTest(raw);\n\n\t\tawait session.addReplExpression(undefined, 'before.1');\n\t\tassert.strictEqual(session.getReplElements().length, 3);\n\t\tassert.strictEqual((<ReplEvaluationInput>session.getReplElements()[0]).value, 'before.1');\n\t\tassert.strictEqual((<ReplOutputElement>session.getReplElements()[1]).value, 'before.1');\n\t\tassert.strictEqual((<ReplEvaluationResult>session.getReplElements()[2]).value, '=before.1');\n\n\t\tawait session.addReplExpression(undefined, 'after.2');\n\t\tawait timeout(0);\n\t\tassert.strictEqual(session.getReplElements().length, 6);\n\t\tassert.strictEqual((<ReplEvaluationInput>session.getReplElements()[3]).value, 'after.2');\n\t\tassert.strictEqual((<ReplEvaluationResult>session.getReplElements()[4]).value, '=after.2');\n\t\tassert.strictEqual((<ReplOutputElement>session.getReplElements()[5]).value, 'after.2');\n\t});\n\n\ttest('repl groups', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\trepl.appendToRepl(session, { output: 'first global line', sev: severity.Info });\n\t\trepl.startGroup(session, 'group_1', true);\n\t\trepl.appendToRepl(session, { output: 'first line in group', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line in group', sev: severity.Info });\n\t\tconst elements = repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 2);\n\t\tconst group = elements[1] as ReplGroup;\n\t\tassert.strictEqual(group.name, 'group_1');\n\t\tassert.strictEqual(group.autoExpand, true);\n\t\tassert.strictEqual(group.hasChildren, true);\n\t\tassert.strictEqual(group.hasEnded, false);\n\n\t\trepl.startGroup(session, 'group_2', false);\n\t\trepl.appendToRepl(session, { output: 'first line in subgroup', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line in subgroup', sev: severity.Info });\n\t\tconst children = group.getChildren();\n\t\tassert.strictEqual(children.length, 3);\n\t\tassert.strictEqual((<ReplOutputElement>children[0]).value, 'first line in group');\n\t\tassert.strictEqual((<ReplOutputElement>children[1]).value, 'second line in group');\n\t\tassert.strictEqual((<ReplGroup>children[2]).name, 'group_2');\n\t\tassert.strictEqual((<ReplGroup>children[2]).hasEnded, false);\n\t\tassert.strictEqual((<ReplGroup>children[2]).getChildren().length, 2);\n\t\trepl.endGroup();\n\t\tassert.strictEqual((<ReplGroup>children[2]).hasEnded, true);\n\t\trepl.appendToRepl(session, { output: 'third line in group', sev: severity.Info });\n\t\tassert.strictEqual(group.getChildren().length, 4);\n\t\tassert.strictEqual(group.hasEnded, false);\n\t\trepl.endGroup();\n\t\tassert.strictEqual(group.hasEnded, true);\n\t\trepl.appendToRepl(session, { output: 'second global line', sev: severity.Info });\n\t\tassert.strictEqual(repl.getReplElements().length, 3);\n\t\tassert.strictEqual((<ReplOutputElement>repl.getReplElements()[2]).value, 'second global line');\n\t});\n\n\ttest('repl identical line collapsing - character by character', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\t// Test case 1: Character-by-character output should NOT be collapsed\n\t\t// These should print \"111\\n\", not \"(3)1\"\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '\\n', sev: severity.Info });\n\n\t\tlet elements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one element with \"111\\n\" value, not collapsed\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, '111\\n');\n\t\tassert.strictEqual(elements[0].count, 1);\n\n\t\trepl.removeReplExpressions();\n\n\t\t// Test case 2: Character-by-character with mixed output\n\t\trepl.appendToRepl(session, { output: '5', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '5', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '\\n', sev: severity.Info });\n\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one element with \"55\\n\" value, not \"(2)5\"\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, '55\\n');\n\t\tassert.strictEqual(elements[0].count, 1);\n\t});\n\n\ttest('repl identical line collapsing - single event multiple lines', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\t// Test case: Single event with multiple identical lines should be collapsed\n\t\t// This should be collapsed into \"(2)hello\"\n\t\trepl.appendToRepl(session, { output: 'hello\\nhello\\n', sev: severity.Info });\n\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one collapsed element with count 2\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, 'hello\\n');\n\t\tassert.strictEqual(elements[0].count, 2);\n\t});\n\n\ttest('repl identical line collapsing - mixed scenarios', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\t// Test case: Mix of single events and multi-line events\n\t\trepl.appendToRepl(session, { output: 'test\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'test\\ntest\\n', sev: severity.Info });\n\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one collapsed element with count 3\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, 'test\\n');\n\t\tassert.strictEqual(elements[0].count, 3);\n\t});\n\n\ttest('repl filter', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\tconst replFilter = new ReplFilter();\n\n\t\tconst getFilteredElements = (): ReplOutputElement[] => {\n\t\t\tconst elements = repl.getReplElements();\n\t\t\treturn elements.filter((e): e is ReplOutputElement => {\n\t\t\t\tconst filterResult = replFilter.filter(e, TreeVisibility.Visible);\n\t\t\t\treturn filterResult === true || filterResult === TreeVisibility.Visible;\n\t\t\t});\n\t\t};\n\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'fourth line\\n', sev: severity.Info });\n\n\t\treplFilter.filterQuery = 'first';\n\t\tconst r1 = getFilteredElements();\n\t\tassert.strictEqual(r1.length, 1);\n\t\tassert.strictEqual(r1[0].value, 'first line\\n');\n\n\t\treplFilter.filterQuery = '!first';\n\t\tconst r2 = getFilteredElements();\n\t\tassert.strictEqual(r1.length, 1);\n\t\tassert.strictEqual(r2[0].value, 'second line\\n');\n\t\tassert.strictEqual(r2[1].value, 'third line\\n');\n\t\tassert.strictEqual(r2[2].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = 'first, line';\n\t\tconst r3 = getFilteredElements();\n\t\tassert.strictEqual(r3.length, 4);\n\t\tassert.strictEqual(r3[0].value, 'first line\\n');\n\t\tassert.strictEqual(r3[1].value, 'second line\\n');\n\t\tassert.strictEqual(r3[2].value, 'third line\\n');\n\t\tassert.strictEqual(r3[3].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = 'line, !second';\n\t\tconst r4 = getFilteredElements();\n\t\tassert.strictEqual(r4.length, 3);\n\t\tassert.strictEqual(r4[0].value, 'first line\\n');\n\t\tassert.strictEqual(r4[1].value, 'third line\\n');\n\t\tassert.strictEqual(r4[2].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = '!second, line';\n\t\tconst r4_same = getFilteredElements();\n\t\tassert.strictEqual(r4.length, r4_same.length);\n\n\t\treplFilter.filterQuery = '!line';\n\t\tconst r5 = getFilteredElements();\n\t\tassert.strictEqual(r5.length, 0);\n\n\t\treplFilter.filterQuery = 'smth';\n\t\tconst r6 = getFilteredElements();\n\t\tassert.strictEqual(r6.length, 0);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport assert from 'assert';\nimport { TreeVisibility } from '../../../../../base/browser/ui/tree/tree.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport severity from '../../../../../base/common/severity.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { RawDebugSession } from '../../browser/rawDebugSession.js';\nimport { ReplFilter } from '../../browser/replFilter.js';\nimport { DebugModel, StackFrame, Thread } from '../../common/debugModel.js';\nimport { RawObjectReplElement, ReplEvaluationInput, ReplEvaluationResult, ReplGroup, ReplModel, ReplOutputElement, ReplVariableElement } from '../../common/replModel.js';\nimport { createTestSession } from './callStack.test.js';\nimport { createMockDebugModel } from './mockDebugModel.js';\nimport { MockDebugAdapter, MockRawSession } from '../common/mockDebug.js';\n\nsuite('Debug - REPL', () => {\n\tlet model: DebugModel;\n\tlet rawSession: MockRawSession;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tconst configurationService = new TestConfigurationService({ debug: { console: { collapseIdenticalLines: true } } });\n\n\tsetup(() => {\n\t\tmodel = createMockDebugModel(disposables);\n\t\trawSession = new MockRawSession();\n\t});\n\n\ttest('repl output', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'second line ', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'third line ', sev: severity.Error });\n\t\trepl.appendToRepl(session, { output: 'fourth line', sev: severity.Error });\n\n\t\tlet elements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 2);\n\t\tassert.strictEqual(elements[0].value, 'first line\\n');\n\t\tassert.strictEqual(elements[0].severity, severity.Error);\n\t\tassert.strictEqual(elements[1].value, 'second line third line fourth line');\n\t\tassert.strictEqual(elements[1].severity, severity.Error);\n\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Warning });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 3);\n\t\tassert.strictEqual(elements[2].value, '1');\n\t\tassert.strictEqual(elements[2].severity, severity.Warning);\n\n\t\tconst keyValueObject = { 'key1': 2, 'key2': 'value' };\n\t\trepl.appendToRepl(session, { output: '', expression: new RawObjectReplElement('fakeid', 'fake', keyValueObject), sev: severity.Info });\n\t\tconst element = <ReplVariableElement>repl.getReplElements()[3];\n\t\tassert.strictEqual(element.expression.value, 'Object');\n\t\tassert.deepStrictEqual((element.expression as RawObjectReplElement).valueObj, keyValueObject);\n\n\t\trepl.removeReplExpressions();\n\t\tassert.strictEqual(repl.getReplElements().length, 0);\n\n\t\trepl.appendToRepl(session, { output: '1\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '2', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '3\\n4', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '5\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '6', sev: severity.Info });\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.deepStrictEqual(elements.map(e => e.toString()), ['1\\n', '23\\n', '45\\n', '6']);\n\n\t\trepl.removeReplExpressions();\n\t});\n\n\ttest('repl output count', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line\\n', sev: severity.Info });\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\tassert.deepStrictEqual(elements.map(e => ({ value: e.value, count: e.count })), [\n\t\t\t{ value: 'first line\\n', count: 3 },\n\t\t\t{ value: 'second line\\n', count: 2 },\n\t\t\t{ value: 'third line\\n', count: 1 }\n\t\t]);\n\t});\n\n\ttest('repl merging', () => {\n\t\t// 'mergeWithParent' should be ignored when there is no parent.\n\t\tconst parent = disposables.add(createTestSession(model, 'parent', { repl: 'mergeWithParent' }));\n\t\tconst child1 = disposables.add(createTestSession(model, 'child1', { parentSession: parent, repl: 'separate' }));\n\t\tconst child2 = disposables.add(createTestSession(model, 'child2', { parentSession: parent, repl: 'mergeWithParent' }));\n\t\tconst grandChild = disposables.add(createTestSession(model, 'grandChild', { parentSession: child2, repl: 'mergeWithParent' }));\n\t\tconst child3 = disposables.add(createTestSession(model, 'child3', { parentSession: parent }));\n\n\t\tlet parentChanges = 0;\n\t\tdisposables.add(parent.onDidChangeReplElements(() => ++parentChanges));\n\n\t\tparent.appendToRepl({ output: '1\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 1);\n\t\tassert.strictEqual(parent.getReplElements().length, 1);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 1);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 1);\n\t\tassert.strictEqual(child3.getReplElements().length, 0);\n\n\t\tgrandChild.appendToRepl({ output: '2\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 0);\n\n\t\tchild3.appendToRepl({ output: '3\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 0);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 1);\n\n\t\tchild1.appendToRepl({ output: '4\\n', sev: severity.Info });\n\t\tassert.strictEqual(parentChanges, 2);\n\t\tassert.strictEqual(parent.getReplElements().length, 2);\n\t\tassert.strictEqual(child1.getReplElements().length, 1);\n\t\tassert.strictEqual(child2.getReplElements().length, 2);\n\t\tassert.strictEqual(grandChild.getReplElements().length, 2);\n\t\tassert.strictEqual(child3.getReplElements().length, 1);\n\t});\n\n\ttest('repl expressions', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tassert.strictEqual(session.getReplElements().length, 0);\n\t\tmodel.addSession(session);\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tsession['raw'] = <any>rawSession;\n\t\tconst thread = new Thread(session, 'mockthread', 1);\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst stackFrame = new StackFrame(thread, 1, <any>undefined, 'app.js', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\t\tconst replModel = new ReplModel(configurationService);\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\t\treplModel.addReplExpression(session, stackFrame, 'myVariable').then();\n\n\t\tassert.strictEqual(replModel.getReplElements().length, 3);\n\t\treplModel.getReplElements().forEach(re => {\n\t\t\tassert.strictEqual((<ReplEvaluationInput>re).value, 'myVariable');\n\t\t});\n\n\t\treplModel.removeReplExpressions();\n\t\tassert.strictEqual(replModel.getReplElements().length, 0);\n\t});\n\n\ttest('repl ordering', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tmodel.addSession(session);\n\n\t\tconst adapter = new MockDebugAdapter();\n\t\tconst raw = disposables.add(new RawDebugSession(adapter, undefined!, '', '', undefined!, undefined!, undefined!, undefined!,));\n\t\tsession.initializeForTest(raw);\n\n\t\tawait session.addReplExpression(undefined, 'before.1');\n\t\tassert.strictEqual(session.getReplElements().length, 3);\n\t\tassert.strictEqual((<ReplEvaluationInput>session.getReplElements()[0]).value, 'before.1');\n\t\tassert.strictEqual((<ReplOutputElement>session.getReplElements()[1]).value, 'before.1');\n\t\tassert.strictEqual((<ReplEvaluationResult>session.getReplElements()[2]).value, '=before.1');\n\n\t\tawait session.addReplExpression(undefined, 'after.2');\n\t\tawait timeout(0);\n\t\tassert.strictEqual(session.getReplElements().length, 6);\n\t\tassert.strictEqual((<ReplEvaluationInput>session.getReplElements()[3]).value, 'after.2');\n\t\tassert.strictEqual((<ReplEvaluationResult>session.getReplElements()[4]).value, '=after.2');\n\t\tassert.strictEqual((<ReplOutputElement>session.getReplElements()[5]).value, 'after.2');\n\t});\n\n\ttest('repl groups', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\trepl.appendToRepl(session, { output: 'first global line', sev: severity.Info });\n\t\trepl.startGroup(session, 'group_1', true);\n\t\trepl.appendToRepl(session, { output: 'first line in group', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line in group', sev: severity.Info });\n\t\tconst elements = repl.getReplElements();\n\t\tassert.strictEqual(elements.length, 2);\n\t\tconst group = elements[1] as ReplGroup;\n\t\tassert.strictEqual(group.name, 'group_1');\n\t\tassert.strictEqual(group.autoExpand, true);\n\t\tassert.strictEqual(group.hasChildren, true);\n\t\tassert.strictEqual(group.hasEnded, false);\n\n\t\trepl.startGroup(session, 'group_2', false);\n\t\trepl.appendToRepl(session, { output: 'first line in subgroup', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line in subgroup', sev: severity.Info });\n\t\tconst children = group.getChildren();\n\t\tassert.strictEqual(children.length, 3);\n\t\tassert.strictEqual((<ReplOutputElement>children[0]).value, 'first line in group');\n\t\tassert.strictEqual((<ReplOutputElement>children[1]).value, 'second line in group');\n\t\tassert.strictEqual((<ReplGroup>children[2]).name, 'group_2');\n\t\tassert.strictEqual((<ReplGroup>children[2]).hasEnded, false);\n\t\tassert.strictEqual((<ReplGroup>children[2]).getChildren().length, 2);\n\t\trepl.endGroup();\n\t\tassert.strictEqual((<ReplGroup>children[2]).hasEnded, true);\n\t\trepl.appendToRepl(session, { output: 'third line in group', sev: severity.Info });\n\t\tassert.strictEqual(group.getChildren().length, 4);\n\t\tassert.strictEqual(group.hasEnded, false);\n\t\trepl.endGroup();\n\t\tassert.strictEqual(group.hasEnded, true);\n\t\trepl.appendToRepl(session, { output: 'second global line', sev: severity.Info });\n\t\tassert.strictEqual(repl.getReplElements().length, 3);\n\t\tassert.strictEqual((<ReplOutputElement>repl.getReplElements()[2]).value, 'second global line');\n\t});\n\n\ttest('repl identical line collapsing - character by character', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\t// Test case 1: Character-by-character output should NOT be collapsed\n\t\t// These should print \"111\\n\", not \"(3)1\"\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '1', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '\\n', sev: severity.Info });\n\n\t\tlet elements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one element with \"111\\n\" value, not collapsed\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, '111\\n');\n\t\tassert.strictEqual(elements[0].count, 1);\n\n\t\trepl.removeReplExpressions();\n\n\t\t// Test case 2: Character-by-character with mixed output\n\t\trepl.appendToRepl(session, { output: '5', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '5', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: '\\n', sev: severity.Info });\n\n\t\telements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one element with \"55\\n\" value, not \"(2)5\"\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, '55\\n');\n\t\tassert.strictEqual(elements[0].count, 1);\n\t});\n\n\ttest('repl identical line collapsing - single event multiple lines', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\t// Test case: Single event with multiple identical lines should be collapsed\n\t\t// This should be collapsed into \"(2)hello\"\n\t\trepl.appendToRepl(session, { output: 'hello\\nhello\\n', sev: severity.Info });\n\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one collapsed element with count 2\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, 'hello\\n');\n\t\tassert.strictEqual(elements[0].count, 2);\n\t});\n\n\ttest('repl identical line collapsing - mixed scenarios', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\n\t\t// Test case: Mix of single events and multi-line events\n\t\trepl.appendToRepl(session, { output: 'test\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'test\\ntest\\n', sev: severity.Info });\n\n\t\tconst elements = <ReplOutputElement[]>repl.getReplElements();\n\t\t// Should be one collapsed element with count 3\n\t\tassert.strictEqual(elements.length, 1);\n\t\tassert.strictEqual(elements[0].value, 'test\\n');\n\t\tassert.strictEqual(elements[0].count, 3);\n\t});\n\n\ttest('repl filter', async () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tconst repl = new ReplModel(configurationService);\n\t\tconst replFilter = new ReplFilter();\n\n\t\tconst getFilteredElements = (): ReplOutputElement[] => {\n\t\t\tconst elements = repl.getReplElements();\n\t\t\treturn elements.filter((e): e is ReplOutputElement => {\n\t\t\t\tconst filterResult = replFilter.filter(e, TreeVisibility.Visible);\n\t\t\t\treturn filterResult === true || filterResult === TreeVisibility.Visible;\n\t\t\t});\n\t\t};\n\n\t\trepl.appendToRepl(session, { output: 'first line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'second line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'third line\\n', sev: severity.Info });\n\t\trepl.appendToRepl(session, { output: 'fourth line\\n', sev: severity.Info });\n\n\t\treplFilter.filterQuery = 'first';\n\t\tconst r1 = getFilteredElements();\n\t\tassert.strictEqual(r1.length, 1);\n\t\tassert.strictEqual(r1[0].value, 'first line\\n');\n\n\t\treplFilter.filterQuery = '!first';\n\t\tconst r2 = getFilteredElements();\n\t\tassert.strictEqual(r1.length, 1);\n\t\tassert.strictEqual(r2[0].value, 'second line\\n');\n\t\tassert.strictEqual(r2[1].value, 'third line\\n');\n\t\tassert.strictEqual(r2[2].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = 'first, line';\n\t\tconst r3 = getFilteredElements();\n\t\tassert.strictEqual(r3.length, 4);\n\t\tassert.strictEqual(r3[0].value, 'first line\\n');\n\t\tassert.strictEqual(r3[1].value, 'second line\\n');\n\t\tassert.strictEqual(r3[2].value, 'third line\\n');\n\t\tassert.strictEqual(r3[3].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = 'line, !second';\n\t\tconst r4 = getFilteredElements();\n\t\tassert.strictEqual(r4.length, 3);\n\t\tassert.strictEqual(r4[0].value, 'first line\\n');\n\t\tassert.strictEqual(r4[1].value, 'third line\\n');\n\t\tassert.strictEqual(r4[2].value, 'fourth line\\n');\n\n\t\treplFilter.filterQuery = '!second, line';\n\t\tconst r4_same = getFilteredElements();\n\t\tassert.strictEqual(r4.length, r4_same.length);\n\n\t\treplFilter.filterQuery = '!line';\n\t\tconst r5 = getFilteredElements();\n\t\tassert.strictEqual(r5.length, 0);\n\n\t\treplFilter.filterQuery = 'smth';\n\t\tconst r6 = getFilteredElements();\n\t\tassert.strictEqual(r6.length, 0);\n\t});\n});\n"]}