{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/test/browser/debugSession.test.ts","vs/workbench/contrib/debug/test/browser/debugSession.test.ts"],"names":[],"mappings":"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","file":"debugSession.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ThreadStatusScheduler } from '../../browser/debugSession.js';\n\n\nsuite('DebugSession - ThreadStatusScheduler', () => {\n\tconst ds = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('cancel base case', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token.isCancellationRequested, false);\n\t\t\tscheduler.cancel([1]);\n\t\t\tassert.strictEqual(token.isCancellationRequested, true);\n\t\t});\n\t});\n\n\ttest('cancel global', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token.isCancellationRequested, false);\n\t\t\tscheduler.cancel(undefined);\n\t\t\tassert.strictEqual(token.isCancellationRequested, true);\n\t\t});\n\t});\n\n\ttest('cancels when new work comes in', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token1) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token1.isCancellationRequested, false);\n\t\t\tawait scheduler.run(Promise.resolve([1]), async (_threadId, token2) => {\n\t\t\t\tinnerCalled = true;\n\t\t\t\tassert.strictEqual(token1.isCancellationRequested, true);\n\t\t\t\tassert.strictEqual(token2.isCancellationRequested, false);\n\t\t\t});\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, true);\n\t});\n\n\ttest('cancels slower lookups when new lookup is made', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tconst innerCalled1: number[] = [];\n\t\tconst innerCalled2: number[] = [];\n\n\t\tawait Promise.all([\n\t\t\tscheduler.run(Promise.resolve().then(() => { }).then(() => [1, 3]), async threadId => {\n\t\t\t\tinnerCalled1.push(threadId);\n\t\t\t}),\n\t\t\tscheduler.run(Promise.resolve([1, 2]), async threadId => {\n\t\t\t\tinnerCalled2.push(threadId);\n\t\t\t})\n\t\t]);\n\n\t\tassert.deepEqual(innerCalled1, [3]);\n\t\tassert.deepEqual(innerCalled2, [1, 2]);\n\t});\n\n\ttest('allows work with other IDs', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token1) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token1.isCancellationRequested, false);\n\t\t\tawait scheduler.run(Promise.resolve([2]), async (_threadId, token2) => {\n\t\t\t\tinnerCalled = true;\n\t\t\t\tassert.strictEqual(token1.isCancellationRequested, false);\n\t\t\t\tassert.strictEqual(token2.isCancellationRequested, false);\n\t\t\t});\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, true);\n\t});\n\n\ttest('cancels when called during reslution', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve().then(() => scheduler.cancel([1])).then(() => [1]), async () => {\n\t\t\tinnerCalled = true;\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, false);\n\t});\n\n\ttest('global cancels when called during reslution', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve().then(() => scheduler.cancel(undefined)).then(() => [1]), async () => {\n\t\t\tinnerCalled = true;\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, false);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ThreadStatusScheduler } from '../../browser/debugSession.js';\n\n\nsuite('DebugSession - ThreadStatusScheduler', () => {\n\tconst ds = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('cancel base case', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token.isCancellationRequested, false);\n\t\t\tscheduler.cancel([1]);\n\t\t\tassert.strictEqual(token.isCancellationRequested, true);\n\t\t});\n\t});\n\n\ttest('cancel global', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token.isCancellationRequested, false);\n\t\t\tscheduler.cancel(undefined);\n\t\t\tassert.strictEqual(token.isCancellationRequested, true);\n\t\t});\n\t});\n\n\ttest('cancels when new work comes in', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token1) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token1.isCancellationRequested, false);\n\t\t\tawait scheduler.run(Promise.resolve([1]), async (_threadId, token2) => {\n\t\t\t\tinnerCalled = true;\n\t\t\t\tassert.strictEqual(token1.isCancellationRequested, true);\n\t\t\t\tassert.strictEqual(token2.isCancellationRequested, false);\n\t\t\t});\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, true);\n\t});\n\n\ttest('cancels slower lookups when new lookup is made', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tconst innerCalled1: number[] = [];\n\t\tconst innerCalled2: number[] = [];\n\n\t\tawait Promise.all([\n\t\t\tscheduler.run(Promise.resolve().then(() => { }).then(() => [1, 3]), async threadId => {\n\t\t\t\tinnerCalled1.push(threadId);\n\t\t\t}),\n\t\t\tscheduler.run(Promise.resolve([1, 2]), async threadId => {\n\t\t\t\tinnerCalled2.push(threadId);\n\t\t\t})\n\t\t]);\n\n\t\tassert.deepEqual(innerCalled1, [3]);\n\t\tassert.deepEqual(innerCalled2, [1, 2]);\n\t});\n\n\ttest('allows work with other IDs', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve([1]), async (threadId, token1) => {\n\t\t\tassert.strictEqual(threadId, 1);\n\t\t\tassert.strictEqual(token1.isCancellationRequested, false);\n\t\t\tawait scheduler.run(Promise.resolve([2]), async (_threadId, token2) => {\n\t\t\t\tinnerCalled = true;\n\t\t\t\tassert.strictEqual(token1.isCancellationRequested, false);\n\t\t\t\tassert.strictEqual(token2.isCancellationRequested, false);\n\t\t\t});\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, true);\n\t});\n\n\ttest('cancels when called during reslution', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve().then(() => scheduler.cancel([1])).then(() => [1]), async () => {\n\t\t\tinnerCalled = true;\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, false);\n\t});\n\n\ttest('global cancels when called during reslution', async () => {\n\t\tconst scheduler = ds.add(new ThreadStatusScheduler());\n\t\tlet innerCalled = false;\n\n\t\tawait scheduler.run(Promise.resolve().then(() => scheduler.cancel(undefined)).then(() => [1]), async () => {\n\t\t\tinnerCalled = true;\n\t\t});\n\n\t\tassert.strictEqual(innerCalled, false);\n\t});\n});\n"]}