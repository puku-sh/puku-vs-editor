{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/test/browser/watchExpressionView.test.ts","vs/workbench/contrib/debug/test/browser/watchExpressionView.test.ts"],"names":[],"mappings":"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","file":"watchExpressionView.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { WatchExpressionsRenderer } from '../../browser/watchExpressionsView.js';\nimport { Scope, StackFrame, Thread, Variable } from '../../common/debugModel.js';\nimport { MockDebugService, MockSession } from '../common/mockDebug.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { IHoverService } from '../../../../../platform/hover/browser/hover.js';\nimport { NullHoverService } from '../../../../../platform/hover/test/browser/nullHoverService.js';\nimport { IDebugService, IViewModel } from '../../common/debug.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { DebugExpressionRenderer } from '../../browser/debugExpressionRenderer.js';\nconst $ = dom.$;\n\nfunction assertWatchVariable(disposables: Pick<DisposableStore, 'add'>, watchExpressionsRenderer: WatchExpressionsRenderer, displayType: boolean) {\n\tconst session = new MockSession();\n\tconst thread = new Thread(session, 'mockthread', 1);\n\tconst range = {\n\t\tstartLineNumber: 1,\n\t\tstartColumn: 1,\n\t\tendLineNumber: undefined!,\n\t\tendColumn: undefined!\n\t};\n\tconst stackFrame = new StackFrame(thread, 1, null!, 'app.js', 'normal', range, 0, true);\n\tconst scope = new Scope(stackFrame, 1, 'local', 1, false, 10, 10);\n\tconst node = {\n\t\telement: new Variable(session, 1, scope, 2, 'foo', 'bar.foo', undefined, 0, 0, undefined, {}, 'string'),\n\t\tdepth: 0,\n\t\tvisibleChildrenCount: 1,\n\t\tvisibleChildIndex: -1,\n\t\tcollapsible: false,\n\t\tcollapsed: false,\n\t\tvisible: true,\n\t\tfilterData: undefined,\n\t\tchildren: []\n\t};\n\tconst expression = $('.');\n\tconst name = $('.');\n\tconst type = $('.');\n\tconst value = $('.');\n\tconst label = disposables.add(new HighlightedLabel(name));\n\tconst lazyButton = $('.');\n\tconst inputBoxContainer = $('.');\n\tconst elementDisposable = disposables.add(new DisposableStore());\n\tconst templateDisposable = disposables.add(new DisposableStore());\n\tconst currentElement = undefined;\n\tconst data = {\n\t\texpression,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tlabel,\n\t\tlazyButton,\n\t\tinputBoxContainer,\n\t\telementDisposable,\n\t\ttemplateDisposable,\n\t\tcurrentElement\n\t};\n\twatchExpressionsRenderer.renderElement(node, 0, data);\n\tassert.strictEqual(value.textContent, '');\n\tassert.strictEqual(label.element.textContent, displayType ? 'foo: ' : 'foo =');\n\n\tnode.element.value = 'xpto';\n\twatchExpressionsRenderer.renderElement(node, 0, data);\n\tassert.strictEqual(value.textContent, 'xpto');\n\tassert.strictEqual(type.textContent, displayType ? 'string =' : '');\n\tassert.strictEqual(label.element.textContent, displayType ? 'foo: ' : 'foo =');\n}\n\nsuite('Debug - Watch Debug View', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet watchExpressionsRenderer: WatchExpressionsRenderer;\n\tlet instantiationService: TestInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\tlet expressionRenderer: DebugExpressionRenderer;\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconfigurationService = instantiationService.createInstance(TestConfigurationService);\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\texpressionRenderer = instantiationService.createInstance(DebugExpressionRenderer);\n\t\tconst debugService = new MockDebugService();\n\t\tinstantiationService.stub(IHoverService, NullHoverService);\n\t\tdebugService.getViewModel = () => <IViewModel>{ focusedStackFrame: undefined, getSelectedExpression: () => undefined };\n\t\tdebugService.getViewModel().getSelectedExpression = () => undefined;\n\t\tinstantiationService.stub(IDebugService, debugService);\n\t});\n\n\ttest('watch expressions with display type', () => {\n\t\tconfigurationService.setUserConfiguration('debug', { showVariableTypes: true });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\twatchExpressionsRenderer = instantiationService.createInstance(WatchExpressionsRenderer, expressionRenderer);\n\t\tassertWatchVariable(disposables, watchExpressionsRenderer, true);\n\t});\n\n\ttest('watch expressions', () => {\n\t\tconfigurationService.setUserConfiguration('debug', { showVariableTypes: false });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\twatchExpressionsRenderer = instantiationService.createInstance(WatchExpressionsRenderer, expressionRenderer);\n\t\tassertWatchVariable(disposables, watchExpressionsRenderer, false);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { WatchExpressionsRenderer } from '../../browser/watchExpressionsView.js';\nimport { Scope, StackFrame, Thread, Variable } from '../../common/debugModel.js';\nimport { MockDebugService, MockSession } from '../common/mockDebug.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { IHoverService } from '../../../../../platform/hover/browser/hover.js';\nimport { NullHoverService } from '../../../../../platform/hover/test/browser/nullHoverService.js';\nimport { IDebugService, IViewModel } from '../../common/debug.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { DebugExpressionRenderer } from '../../browser/debugExpressionRenderer.js';\nconst $ = dom.$;\n\nfunction assertWatchVariable(disposables: Pick<DisposableStore, 'add'>, watchExpressionsRenderer: WatchExpressionsRenderer, displayType: boolean) {\n\tconst session = new MockSession();\n\tconst thread = new Thread(session, 'mockthread', 1);\n\tconst range = {\n\t\tstartLineNumber: 1,\n\t\tstartColumn: 1,\n\t\tendLineNumber: undefined!,\n\t\tendColumn: undefined!\n\t};\n\tconst stackFrame = new StackFrame(thread, 1, null!, 'app.js', 'normal', range, 0, true);\n\tconst scope = new Scope(stackFrame, 1, 'local', 1, false, 10, 10);\n\tconst node = {\n\t\telement: new Variable(session, 1, scope, 2, 'foo', 'bar.foo', undefined, 0, 0, undefined, {}, 'string'),\n\t\tdepth: 0,\n\t\tvisibleChildrenCount: 1,\n\t\tvisibleChildIndex: -1,\n\t\tcollapsible: false,\n\t\tcollapsed: false,\n\t\tvisible: true,\n\t\tfilterData: undefined,\n\t\tchildren: []\n\t};\n\tconst expression = $('.');\n\tconst name = $('.');\n\tconst type = $('.');\n\tconst value = $('.');\n\tconst label = disposables.add(new HighlightedLabel(name));\n\tconst lazyButton = $('.');\n\tconst inputBoxContainer = $('.');\n\tconst elementDisposable = disposables.add(new DisposableStore());\n\tconst templateDisposable = disposables.add(new DisposableStore());\n\tconst currentElement = undefined;\n\tconst data = {\n\t\texpression,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tlabel,\n\t\tlazyButton,\n\t\tinputBoxContainer,\n\t\telementDisposable,\n\t\ttemplateDisposable,\n\t\tcurrentElement\n\t};\n\twatchExpressionsRenderer.renderElement(node, 0, data);\n\tassert.strictEqual(value.textContent, '');\n\tassert.strictEqual(label.element.textContent, displayType ? 'foo: ' : 'foo =');\n\n\tnode.element.value = 'xpto';\n\twatchExpressionsRenderer.renderElement(node, 0, data);\n\tassert.strictEqual(value.textContent, 'xpto');\n\tassert.strictEqual(type.textContent, displayType ? 'string =' : '');\n\tassert.strictEqual(label.element.textContent, displayType ? 'foo: ' : 'foo =');\n}\n\nsuite('Debug - Watch Debug View', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet watchExpressionsRenderer: WatchExpressionsRenderer;\n\tlet instantiationService: TestInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\tlet expressionRenderer: DebugExpressionRenderer;\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconfigurationService = instantiationService.createInstance(TestConfigurationService);\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\texpressionRenderer = instantiationService.createInstance(DebugExpressionRenderer);\n\t\tconst debugService = new MockDebugService();\n\t\tinstantiationService.stub(IHoverService, NullHoverService);\n\t\tdebugService.getViewModel = () => <IViewModel>{ focusedStackFrame: undefined, getSelectedExpression: () => undefined };\n\t\tdebugService.getViewModel().getSelectedExpression = () => undefined;\n\t\tinstantiationService.stub(IDebugService, debugService);\n\t});\n\n\ttest('watch expressions with display type', () => {\n\t\tconfigurationService.setUserConfiguration('debug', { showVariableTypes: true });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\twatchExpressionsRenderer = instantiationService.createInstance(WatchExpressionsRenderer, expressionRenderer);\n\t\tassertWatchVariable(disposables, watchExpressionsRenderer, true);\n\t});\n\n\ttest('watch expressions', () => {\n\t\tconfigurationService.setUserConfiguration('debug', { showVariableTypes: false });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\twatchExpressionsRenderer = instantiationService.createInstance(WatchExpressionsRenderer, expressionRenderer);\n\t\tassertWatchVariable(disposables, watchExpressionsRenderer, false);\n\t});\n});\n"]}