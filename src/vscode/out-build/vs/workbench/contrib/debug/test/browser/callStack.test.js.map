{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/test/browser/callStack.test.ts","vs/workbench/contrib/debug/test/browser/callStack.test.ts"],"names":[],"mappings":"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","file":"callStack.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { Constants } from '../../../../../base/common/uint.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { upcastDeepPartial, upcastPartial } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { TestAccessibilityService } from '../../../../../platform/accessibility/test/common/testAccessibilityService.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { createDecorationsForStackFrame } from '../../browser/callStackEditorContribution.js';\nimport { getContext, getContextForContributedActions, getSpecificSourceName } from '../../browser/callStackView.js';\nimport { debugStackframe, debugStackframeFocused } from '../../browser/debugIcons.js';\nimport { getStackFrameThreadAndSessionToFocus } from '../../browser/debugService.js';\nimport { DebugSession } from '../../browser/debugSession.js';\nimport { IDebugService, IDebugSessionOptions, State } from '../../common/debug.js';\nimport { DebugModel, StackFrame, Thread } from '../../common/debugModel.js';\nimport { Source } from '../../common/debugSource.js';\nimport { MockRawSession } from '../common/mockDebug.js';\nimport { createMockDebugModel, mockUriIdentityService } from './mockDebugModel.js';\nimport { RawDebugSession } from '../../browser/rawDebugSession.js';\n\nconst mockWorkspaceContextService = upcastDeepPartial<IWorkspaceContextService>({\n\tgetWorkspace: () => {\n\t\treturn {\n\t\t\tfolders: []\n\t\t};\n\t}\n});\n\nexport function createTestSession(model: DebugModel, name = 'mockSession', options?: IDebugSessionOptions): DebugSession {\n\treturn new DebugSession(generateUuid(), { resolved: { name, type: 'node', request: 'launch' }, unresolved: undefined }, undefined, model, options, {\n\t\tgetViewModel(): any {\n\t\t\treturn {\n\t\t\t\tupdateViews(): void {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} as IDebugService, undefined!, undefined!, new TestConfigurationService({ debug: { console: { collapseIdenticalLines: true } } }), undefined!, mockWorkspaceContextService, undefined!, undefined!, undefined!, mockUriIdentityService, new TestInstantiationService(), undefined!, undefined!, new NullLogService(), undefined!, undefined!, new TestAccessibilityService());\n}\n\nfunction createTwoStackFrames(session: DebugSession): { firstStackFrame: StackFrame; secondStackFrame: StackFrame } {\n\tconst thread = new class extends Thread {\n\t\tpublic override getCallStack(): StackFrame[] {\n\t\t\treturn [firstStackFrame, secondStackFrame];\n\t\t}\n\t}(session, 'mockthread', 1);\n\n\tconst firstSource = new Source({\n\t\tname: 'internalModule.js',\n\t\tpath: 'a/b/c/d/internalModule.js',\n\t\tsourceReference: 10,\n\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\tconst secondSource = new Source({\n\t\tname: 'internalModule.js',\n\t\tpath: 'z/x/c/d/internalModule.js',\n\t\tsourceReference: 11,\n\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\n\tconst firstStackFrame = new StackFrame(thread, 0, firstSource, 'app.js', 'normal', { startLineNumber: 1, startColumn: 2, endLineNumber: 1, endColumn: 10 }, 0, true);\n\tconst secondStackFrame = new StackFrame(thread, 1, secondSource, 'app2.js', 'normal', { startLineNumber: 1, startColumn: 2, endLineNumber: 1, endColumn: 10 }, 1, true);\n\n\treturn { firstStackFrame, secondStackFrame };\n}\n\nsuite('Debug - CallStack', () => {\n\tlet model: DebugModel;\n\tlet mockRawSession: MockRawSession;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tmodel = createMockDebugModel(disposables);\n\t\tmockRawSession = new MockRawSession();\n\t});\n\n\tteardown(() => {\n\t\tsinon.restore();\n\t});\n\n\t// Threads\n\n\ttest('threads simple', () => {\n\t\tconst threadId = 1;\n\t\tconst threadName = 'firstThread';\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tassert.strictEqual(model.getSessions(true).length, 1);\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId,\n\t\t\t\tname: threadName\n\t\t\t}]\n\t\t});\n\n\t\tassert.strictEqual(session.getThread(threadId)!.name, threadName);\n\n\t\tmodel.clearThreads(session.getId(), true);\n\t\tassert.strictEqual(session.getThread(threadId), undefined);\n\t\tassert.strictEqual(model.getSessions(true).length, 1);\n\t});\n\n\ttest('threads multiple with allThreadsStopped', async () => {\n\t\tconst threadId1 = 1;\n\t\tconst threadName1 = 'firstThread';\n\t\tconst threadId2 = 2;\n\t\tconst threadName2 = 'secondThread';\n\t\tconst stoppedReason = 'breakpoint';\n\n\t\t// Add the threads\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}]\n\t\t});\n\n\t\t// Stopped event with all threads stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: 1,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tconst thread1 = session.getThread(threadId1)!;\n\t\tconst thread2 = session.getThread(threadId2)!;\n\n\t\t// at the beginning, callstacks are obtainable but not available\n\t\tassert.strictEqual(session.getAllThreads().length, 2);\n\t\tassert.strictEqual(thread1.name, threadName1);\n\t\tassert.strictEqual(thread1.stopped, true);\n\t\tassert.strictEqual(thread1.getCallStack().length, 0);\n\t\tassert.strictEqual(thread1.stoppedDetails!.reason, stoppedReason);\n\t\tassert.strictEqual(thread2.name, threadName2);\n\t\tassert.strictEqual(thread2.stopped, true);\n\t\tassert.strictEqual(thread2.getCallStack().length, 0);\n\t\tassert.strictEqual(thread2.stoppedDetails!.reason, undefined);\n\n\t\t// after calling getCallStack, the callstack becomes available\n\t\t// and results in a request for the callstack in the debug adapter\n\t\tawait thread1.fetchCallStack();\n\t\tassert.notStrictEqual(thread1.getCallStack().length, 0);\n\n\t\tawait thread2.fetchCallStack();\n\t\tassert.notStrictEqual(thread2.getCallStack().length, 0);\n\n\t\t// calling multiple times getCallStack doesn't result in multiple calls\n\t\t// to the debug adapter\n\t\tawait thread1.fetchCallStack();\n\t\tawait thread2.fetchCallStack();\n\n\t\t// clearing the callstack results in the callstack not being available\n\t\tthread1.clearCallStack();\n\t\tassert.strictEqual(thread1.stopped, true);\n\t\tassert.strictEqual(thread1.getCallStack().length, 0);\n\n\t\tthread2.clearCallStack();\n\t\tassert.strictEqual(thread2.stopped, true);\n\t\tassert.strictEqual(thread2.getCallStack().length, 0);\n\n\t\tmodel.clearThreads(session.getId(), true);\n\t\tassert.strictEqual(session.getThread(threadId1), undefined);\n\t\tassert.strictEqual(session.getThread(threadId2), undefined);\n\t\tassert.strictEqual(session.getAllThreads().length, 0);\n\t});\n\n\ttest('allThreadsStopped in multiple events', async () => {\n\t\tconst threadId1 = 1;\n\t\tconst threadName1 = 'firstThread';\n\t\tconst threadId2 = 2;\n\t\tconst threadName2 = 'secondThread';\n\t\tconst stoppedReason = 'breakpoint';\n\n\t\t// Add the threads\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\t// Stopped event with all threads stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: threadId1,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: threadId2,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tconst thread1 = session.getThread(threadId1)!;\n\t\tconst thread2 = session.getThread(threadId2)!;\n\n\t\tassert.strictEqual(thread1.stoppedDetails?.reason, stoppedReason);\n\t\tassert.strictEqual(thread2.stoppedDetails?.reason, stoppedReason);\n\t});\n\n\ttest('threads multiple without allThreadsStopped', async () => {\n\t\tconst sessionStub = sinon.spy(mockRawSession, 'stackTrace');\n\n\t\tconst stoppedThreadId = 1;\n\t\tconst stoppedThreadName = 'stoppedThread';\n\t\tconst runningThreadId = 2;\n\t\tconst runningThreadName = 'runningThread';\n\t\tconst stoppedReason = 'breakpoint';\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\t// Add the threads\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: stoppedThreadId,\n\t\t\t\tname: stoppedThreadName\n\t\t\t}]\n\t\t});\n\n\t\t// Stopped event with only one thread stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: 1,\n\t\t\t\tname: stoppedThreadName\n\t\t\t}, {\n\t\t\t\tid: runningThreadId,\n\t\t\t\tname: runningThreadName\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: 1,\n\t\t\t\tallThreadsStopped: false\n\t\t\t}\n\t\t});\n\n\t\tconst stoppedThread = session.getThread(stoppedThreadId)!;\n\t\tconst runningThread = session.getThread(runningThreadId)!;\n\n\t\t// the callstack for the stopped thread is obtainable but not available\n\t\t// the callstack for the running thread is not obtainable nor available\n\t\tassert.strictEqual(stoppedThread.name, stoppedThreadName);\n\t\tassert.strictEqual(stoppedThread.stopped, true);\n\t\tassert.strictEqual(session.getAllThreads().length, 2);\n\t\tassert.strictEqual(stoppedThread.getCallStack().length, 0);\n\t\tassert.strictEqual(stoppedThread.stoppedDetails!.reason, stoppedReason);\n\t\tassert.strictEqual(runningThread.name, runningThreadName);\n\t\tassert.strictEqual(runningThread.stopped, false);\n\t\tassert.strictEqual(runningThread.getCallStack().length, 0);\n\t\tassert.strictEqual(runningThread.stoppedDetails, undefined);\n\n\t\t// after calling getCallStack, the callstack becomes available\n\t\t// and results in a request for the callstack in the debug adapter\n\t\tawait stoppedThread.fetchCallStack();\n\t\tassert.notStrictEqual(stoppedThread.getCallStack().length, 0);\n\t\tassert.strictEqual(runningThread.getCallStack().length, 0);\n\t\tassert.strictEqual(sessionStub.callCount, 1);\n\n\t\t// calling getCallStack on the running thread returns empty array\n\t\t// and does not return in a request for the callstack in the debug\n\t\t// adapter\n\t\tawait runningThread.fetchCallStack();\n\t\tassert.strictEqual(runningThread.getCallStack().length, 0);\n\t\tassert.strictEqual(sessionStub.callCount, 1);\n\n\t\t// clearing the callstack results in the callstack not being available\n\t\tstoppedThread.clearCallStack();\n\t\tassert.strictEqual(stoppedThread.stopped, true);\n\t\tassert.strictEqual(stoppedThread.getCallStack().length, 0);\n\n\t\tmodel.clearThreads(session.getId(), true);\n\t\tassert.strictEqual(session.getThread(stoppedThreadId), undefined);\n\t\tassert.strictEqual(session.getThread(runningThreadId), undefined);\n\t\tassert.strictEqual(session.getAllThreads().length, 0);\n\t});\n\n\ttest('stack frame get specific source name', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\t\tconst { firstStackFrame, secondStackFrame } = createTwoStackFrames(session);\n\n\t\tassert.strictEqual(getSpecificSourceName(firstStackFrame), '.../b/c/d/internalModule.js');\n\t\tassert.strictEqual(getSpecificSourceName(secondStackFrame), '.../x/c/d/internalModule.js');\n\t});\n\n\ttest('stack frame toString()', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tconst thread = new Thread(session, 'mockthread', 1);\n\t\tconst firstSource = new Source({\n\t\t\tname: 'internalModule.js',\n\t\t\tpath: 'a/b/c/d/internalModule.js',\n\t\t\tsourceReference: 10,\n\t\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\t\tconst stackFrame = new StackFrame(thread, 1, firstSource, 'app', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\t\tassert.strictEqual(stackFrame.toString(), 'app (internalModule.js:1)');\n\n\t\tconst secondSource = new Source(undefined, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\t\tconst stackFrame2 = new StackFrame(thread, 2, secondSource, 'module', 'normal', { startLineNumber: undefined!, startColumn: undefined!, endLineNumber: undefined!, endColumn: undefined! }, 2, true);\n\t\tassert.strictEqual(stackFrame2.toString(), 'module');\n\t});\n\n\ttest('debug child sessions are added in correct order', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tmodel.addSession(session);\n\t\tconst secondSession = disposables.add(createTestSession(model, 'mockSession2'));\n\t\tmodel.addSession(secondSession);\n\t\tconst firstChild = disposables.add(createTestSession(model, 'firstChild', { parentSession: session }));\n\t\tmodel.addSession(firstChild);\n\t\tconst secondChild = disposables.add(createTestSession(model, 'secondChild', { parentSession: session }));\n\t\tmodel.addSession(secondChild);\n\t\tconst thirdSession = disposables.add(createTestSession(model, 'mockSession3'));\n\t\tmodel.addSession(thirdSession);\n\t\tconst anotherChild = disposables.add(createTestSession(model, 'secondChild', { parentSession: secondSession }));\n\t\tmodel.addSession(anotherChild);\n\n\t\tconst sessions = model.getSessions();\n\t\tassert.strictEqual(sessions[0].getId(), session.getId());\n\t\tassert.strictEqual(sessions[1].getId(), firstChild.getId());\n\t\tassert.strictEqual(sessions[2].getId(), secondChild.getId());\n\t\tassert.strictEqual(sessions[3].getId(), secondSession.getId());\n\t\tassert.strictEqual(sessions[4].getId(), anotherChild.getId());\n\t\tassert.strictEqual(sessions[5].getId(), thirdSession.getId());\n\t});\n\n\ttest('decorations', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\t\tconst { firstStackFrame, secondStackFrame } = createTwoStackFrames(session);\n\t\tlet decorations = createDecorationsForStackFrame(firstStackFrame, true, false);\n\t\tassert.strictEqual(decorations.length, 3);\n\t\tassert.deepStrictEqual(decorations[0].range, new Range(1, 2, 1, 3));\n\t\tassert.strictEqual(decorations[0].options.glyphMarginClassName, ThemeIcon.asClassName(debugStackframe));\n\t\tassert.deepStrictEqual(decorations[1].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t\tassert.strictEqual(decorations[1].options.className, 'debug-top-stack-frame-line');\n\t\tassert.strictEqual(decorations[1].options.isWholeLine, true);\n\n\t\tdecorations = createDecorationsForStackFrame(secondStackFrame, true, false);\n\t\tassert.strictEqual(decorations.length, 2);\n\t\tassert.deepStrictEqual(decorations[0].range, new Range(1, 2, 1, 3));\n\t\tassert.strictEqual(decorations[0].options.glyphMarginClassName, ThemeIcon.asClassName(debugStackframeFocused));\n\t\tassert.deepStrictEqual(decorations[1].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t\tassert.strictEqual(decorations[1].options.className, 'debug-focused-stack-frame-line');\n\t\tassert.strictEqual(decorations[1].options.isWholeLine, true);\n\n\t\tdecorations = createDecorationsForStackFrame(firstStackFrame, true, false);\n\t\tassert.strictEqual(decorations.length, 3);\n\t\tassert.deepStrictEqual(decorations[0].range, new Range(1, 2, 1, 3));\n\t\tassert.strictEqual(decorations[0].options.glyphMarginClassName, ThemeIcon.asClassName(debugStackframe));\n\t\tassert.deepStrictEqual(decorations[1].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t\tassert.strictEqual(decorations[1].options.className, 'debug-top-stack-frame-line');\n\t\tassert.strictEqual(decorations[1].options.isWholeLine, true);\n\t\t// Inline decoration gets rendered in this case\n\t\tassert.strictEqual(decorations[2].options.before?.inlineClassName, 'debug-top-stack-frame-column');\n\t\tassert.deepStrictEqual(decorations[2].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t});\n\n\ttest('contexts', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\t\tconst { firstStackFrame, secondStackFrame } = createTwoStackFrames(session);\n\t\tlet context = getContext(firstStackFrame);\n\t\tassert.strictEqual(context?.sessionId, firstStackFrame.thread.session.getId());\n\t\tassert.strictEqual(context?.threadId, firstStackFrame.thread.getId());\n\t\tassert.strictEqual(context?.frameId, firstStackFrame.getId());\n\n\t\tcontext = getContext(secondStackFrame.thread);\n\t\tassert.strictEqual(context?.sessionId, secondStackFrame.thread.session.getId());\n\t\tassert.strictEqual(context?.threadId, secondStackFrame.thread.getId());\n\t\tassert.strictEqual(context?.frameId, undefined);\n\n\t\tcontext = getContext(session);\n\t\tassert.strictEqual(context?.sessionId, session.getId());\n\t\tassert.strictEqual(context?.threadId, undefined);\n\t\tassert.strictEqual(context?.frameId, undefined);\n\n\t\tlet contributedContext = getContextForContributedActions(firstStackFrame);\n\t\tassert.strictEqual(contributedContext, firstStackFrame.source.raw.path);\n\t\tcontributedContext = getContextForContributedActions(firstStackFrame.thread);\n\t\tassert.strictEqual(contributedContext, firstStackFrame.thread.threadId);\n\t\tcontributedContext = getContextForContributedActions(session);\n\t\tassert.strictEqual(contributedContext, session.getId());\n\t});\n\n\ttest('focusStackFrameThreadAndSession', () => {\n\t\tconst threadId1 = 1;\n\t\tconst threadName1 = 'firstThread';\n\t\tconst threadId2 = 2;\n\t\tconst threadName2 = 'secondThread';\n\t\tconst stoppedReason = 'breakpoint';\n\n\t\t// Add the threads\n\t\tconst session = new class extends DebugSession {\n\t\t\toverride get state(): State {\n\t\t\t\treturn State.Stopped;\n\t\t\t}\n\t\t}(generateUuid(), { resolved: { name: 'stoppedSession', type: 'node', request: 'launch' }, unresolved: undefined }, undefined, model, undefined, undefined!, undefined!, undefined!, undefined!, undefined!, mockWorkspaceContextService, undefined!, undefined!, undefined!, mockUriIdentityService, new TestInstantiationService(), undefined!, undefined!, new NullLogService(), undefined!, undefined!, new TestAccessibilityService());\n\t\tdisposables.add(session);\n\n\t\tconst runningSession = createTestSession(model);\n\t\tdisposables.add(runningSession);\n\t\tmodel.addSession(runningSession);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}]\n\t\t});\n\n\t\t// Stopped event with all threads stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: 1,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tconst thread = session.getThread(threadId1)!;\n\t\tconst runningThread = session.getThread(threadId2);\n\n\t\tlet toFocus = getStackFrameThreadAndSessionToFocus(model, undefined);\n\t\t// Verify stopped session and stopped thread get focused\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: thread, session: session });\n\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, undefined, undefined, runningSession);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: undefined, session: runningSession });\n\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, undefined, thread);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: thread, session: session });\n\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, undefined, runningThread);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: runningThread, session: session });\n\n\t\tconst stackFrame = new StackFrame(thread, 5, undefined!, 'stackframename2', undefined, undefined!, 1, true);\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, stackFrame);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: stackFrame, thread: thread, session: session });\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { Constants } from '../../../../../base/common/uint.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { upcastDeepPartial, upcastPartial } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { TestAccessibilityService } from '../../../../../platform/accessibility/test/common/testAccessibilityService.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { createDecorationsForStackFrame } from '../../browser/callStackEditorContribution.js';\nimport { getContext, getContextForContributedActions, getSpecificSourceName } from '../../browser/callStackView.js';\nimport { debugStackframe, debugStackframeFocused } from '../../browser/debugIcons.js';\nimport { getStackFrameThreadAndSessionToFocus } from '../../browser/debugService.js';\nimport { DebugSession } from '../../browser/debugSession.js';\nimport { IDebugService, IDebugSessionOptions, State } from '../../common/debug.js';\nimport { DebugModel, StackFrame, Thread } from '../../common/debugModel.js';\nimport { Source } from '../../common/debugSource.js';\nimport { MockRawSession } from '../common/mockDebug.js';\nimport { createMockDebugModel, mockUriIdentityService } from './mockDebugModel.js';\nimport { RawDebugSession } from '../../browser/rawDebugSession.js';\n\nconst mockWorkspaceContextService = upcastDeepPartial<IWorkspaceContextService>({\n\tgetWorkspace: () => {\n\t\treturn {\n\t\t\tfolders: []\n\t\t};\n\t}\n});\n\nexport function createTestSession(model: DebugModel, name = 'mockSession', options?: IDebugSessionOptions): DebugSession {\n\treturn new DebugSession(generateUuid(), { resolved: { name, type: 'node', request: 'launch' }, unresolved: undefined }, undefined, model, options, {\n\t\tgetViewModel(): any {\n\t\t\treturn {\n\t\t\t\tupdateViews(): void {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t} as IDebugService, undefined!, undefined!, new TestConfigurationService({ debug: { console: { collapseIdenticalLines: true } } }), undefined!, mockWorkspaceContextService, undefined!, undefined!, undefined!, mockUriIdentityService, new TestInstantiationService(), undefined!, undefined!, new NullLogService(), undefined!, undefined!, new TestAccessibilityService());\n}\n\nfunction createTwoStackFrames(session: DebugSession): { firstStackFrame: StackFrame; secondStackFrame: StackFrame } {\n\tconst thread = new class extends Thread {\n\t\tpublic override getCallStack(): StackFrame[] {\n\t\t\treturn [firstStackFrame, secondStackFrame];\n\t\t}\n\t}(session, 'mockthread', 1);\n\n\tconst firstSource = new Source({\n\t\tname: 'internalModule.js',\n\t\tpath: 'a/b/c/d/internalModule.js',\n\t\tsourceReference: 10,\n\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\tconst secondSource = new Source({\n\t\tname: 'internalModule.js',\n\t\tpath: 'z/x/c/d/internalModule.js',\n\t\tsourceReference: 11,\n\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\n\tconst firstStackFrame = new StackFrame(thread, 0, firstSource, 'app.js', 'normal', { startLineNumber: 1, startColumn: 2, endLineNumber: 1, endColumn: 10 }, 0, true);\n\tconst secondStackFrame = new StackFrame(thread, 1, secondSource, 'app2.js', 'normal', { startLineNumber: 1, startColumn: 2, endLineNumber: 1, endColumn: 10 }, 1, true);\n\n\treturn { firstStackFrame, secondStackFrame };\n}\n\nsuite('Debug - CallStack', () => {\n\tlet model: DebugModel;\n\tlet mockRawSession: MockRawSession;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tmodel = createMockDebugModel(disposables);\n\t\tmockRawSession = new MockRawSession();\n\t});\n\n\tteardown(() => {\n\t\tsinon.restore();\n\t});\n\n\t// Threads\n\n\ttest('threads simple', () => {\n\t\tconst threadId = 1;\n\t\tconst threadName = 'firstThread';\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tassert.strictEqual(model.getSessions(true).length, 1);\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId,\n\t\t\t\tname: threadName\n\t\t\t}]\n\t\t});\n\n\t\tassert.strictEqual(session.getThread(threadId)!.name, threadName);\n\n\t\tmodel.clearThreads(session.getId(), true);\n\t\tassert.strictEqual(session.getThread(threadId), undefined);\n\t\tassert.strictEqual(model.getSessions(true).length, 1);\n\t});\n\n\ttest('threads multiple with allThreadsStopped', async () => {\n\t\tconst threadId1 = 1;\n\t\tconst threadName1 = 'firstThread';\n\t\tconst threadId2 = 2;\n\t\tconst threadName2 = 'secondThread';\n\t\tconst stoppedReason = 'breakpoint';\n\n\t\t// Add the threads\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}]\n\t\t});\n\n\t\t// Stopped event with all threads stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: 1,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tconst thread1 = session.getThread(threadId1)!;\n\t\tconst thread2 = session.getThread(threadId2)!;\n\n\t\t// at the beginning, callstacks are obtainable but not available\n\t\tassert.strictEqual(session.getAllThreads().length, 2);\n\t\tassert.strictEqual(thread1.name, threadName1);\n\t\tassert.strictEqual(thread1.stopped, true);\n\t\tassert.strictEqual(thread1.getCallStack().length, 0);\n\t\tassert.strictEqual(thread1.stoppedDetails!.reason, stoppedReason);\n\t\tassert.strictEqual(thread2.name, threadName2);\n\t\tassert.strictEqual(thread2.stopped, true);\n\t\tassert.strictEqual(thread2.getCallStack().length, 0);\n\t\tassert.strictEqual(thread2.stoppedDetails!.reason, undefined);\n\n\t\t// after calling getCallStack, the callstack becomes available\n\t\t// and results in a request for the callstack in the debug adapter\n\t\tawait thread1.fetchCallStack();\n\t\tassert.notStrictEqual(thread1.getCallStack().length, 0);\n\n\t\tawait thread2.fetchCallStack();\n\t\tassert.notStrictEqual(thread2.getCallStack().length, 0);\n\n\t\t// calling multiple times getCallStack doesn't result in multiple calls\n\t\t// to the debug adapter\n\t\tawait thread1.fetchCallStack();\n\t\tawait thread2.fetchCallStack();\n\n\t\t// clearing the callstack results in the callstack not being available\n\t\tthread1.clearCallStack();\n\t\tassert.strictEqual(thread1.stopped, true);\n\t\tassert.strictEqual(thread1.getCallStack().length, 0);\n\n\t\tthread2.clearCallStack();\n\t\tassert.strictEqual(thread2.stopped, true);\n\t\tassert.strictEqual(thread2.getCallStack().length, 0);\n\n\t\tmodel.clearThreads(session.getId(), true);\n\t\tassert.strictEqual(session.getThread(threadId1), undefined);\n\t\tassert.strictEqual(session.getThread(threadId2), undefined);\n\t\tassert.strictEqual(session.getAllThreads().length, 0);\n\t});\n\n\ttest('allThreadsStopped in multiple events', async () => {\n\t\tconst threadId1 = 1;\n\t\tconst threadName1 = 'firstThread';\n\t\tconst threadId2 = 2;\n\t\tconst threadName2 = 'secondThread';\n\t\tconst stoppedReason = 'breakpoint';\n\n\t\t// Add the threads\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\t// Stopped event with all threads stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: threadId1,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: threadId2,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tconst thread1 = session.getThread(threadId1)!;\n\t\tconst thread2 = session.getThread(threadId2)!;\n\n\t\tassert.strictEqual(thread1.stoppedDetails?.reason, stoppedReason);\n\t\tassert.strictEqual(thread2.stoppedDetails?.reason, stoppedReason);\n\t});\n\n\ttest('threads multiple without allThreadsStopped', async () => {\n\t\tconst sessionStub = sinon.spy(mockRawSession, 'stackTrace');\n\n\t\tconst stoppedThreadId = 1;\n\t\tconst stoppedThreadName = 'stoppedThread';\n\t\tconst runningThreadId = 2;\n\t\tconst runningThreadName = 'runningThread';\n\t\tconst stoppedReason = 'breakpoint';\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\t// Add the threads\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: stoppedThreadId,\n\t\t\t\tname: stoppedThreadName\n\t\t\t}]\n\t\t});\n\n\t\t// Stopped event with only one thread stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: 1,\n\t\t\t\tname: stoppedThreadName\n\t\t\t}, {\n\t\t\t\tid: runningThreadId,\n\t\t\t\tname: runningThreadName\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: 1,\n\t\t\t\tallThreadsStopped: false\n\t\t\t}\n\t\t});\n\n\t\tconst stoppedThread = session.getThread(stoppedThreadId)!;\n\t\tconst runningThread = session.getThread(runningThreadId)!;\n\n\t\t// the callstack for the stopped thread is obtainable but not available\n\t\t// the callstack for the running thread is not obtainable nor available\n\t\tassert.strictEqual(stoppedThread.name, stoppedThreadName);\n\t\tassert.strictEqual(stoppedThread.stopped, true);\n\t\tassert.strictEqual(session.getAllThreads().length, 2);\n\t\tassert.strictEqual(stoppedThread.getCallStack().length, 0);\n\t\tassert.strictEqual(stoppedThread.stoppedDetails!.reason, stoppedReason);\n\t\tassert.strictEqual(runningThread.name, runningThreadName);\n\t\tassert.strictEqual(runningThread.stopped, false);\n\t\tassert.strictEqual(runningThread.getCallStack().length, 0);\n\t\tassert.strictEqual(runningThread.stoppedDetails, undefined);\n\n\t\t// after calling getCallStack, the callstack becomes available\n\t\t// and results in a request for the callstack in the debug adapter\n\t\tawait stoppedThread.fetchCallStack();\n\t\tassert.notStrictEqual(stoppedThread.getCallStack().length, 0);\n\t\tassert.strictEqual(runningThread.getCallStack().length, 0);\n\t\tassert.strictEqual(sessionStub.callCount, 1);\n\n\t\t// calling getCallStack on the running thread returns empty array\n\t\t// and does not return in a request for the callstack in the debug\n\t\t// adapter\n\t\tawait runningThread.fetchCallStack();\n\t\tassert.strictEqual(runningThread.getCallStack().length, 0);\n\t\tassert.strictEqual(sessionStub.callCount, 1);\n\n\t\t// clearing the callstack results in the callstack not being available\n\t\tstoppedThread.clearCallStack();\n\t\tassert.strictEqual(stoppedThread.stopped, true);\n\t\tassert.strictEqual(stoppedThread.getCallStack().length, 0);\n\n\t\tmodel.clearThreads(session.getId(), true);\n\t\tassert.strictEqual(session.getThread(stoppedThreadId), undefined);\n\t\tassert.strictEqual(session.getThread(runningThreadId), undefined);\n\t\tassert.strictEqual(session.getAllThreads().length, 0);\n\t});\n\n\ttest('stack frame get specific source name', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\t\tconst { firstStackFrame, secondStackFrame } = createTwoStackFrames(session);\n\n\t\tassert.strictEqual(getSpecificSourceName(firstStackFrame), '.../b/c/d/internalModule.js');\n\t\tassert.strictEqual(getSpecificSourceName(secondStackFrame), '.../x/c/d/internalModule.js');\n\t});\n\n\ttest('stack frame toString()', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tconst thread = new Thread(session, 'mockthread', 1);\n\t\tconst firstSource = new Source({\n\t\t\tname: 'internalModule.js',\n\t\t\tpath: 'a/b/c/d/internalModule.js',\n\t\t\tsourceReference: 10,\n\t\t}, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\t\tconst stackFrame = new StackFrame(thread, 1, firstSource, 'app', 'normal', { startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 10 }, 1, true);\n\t\tassert.strictEqual(stackFrame.toString(), 'app (internalModule.js:1)');\n\n\t\tconst secondSource = new Source(undefined, 'aDebugSessionId', mockUriIdentityService, new NullLogService());\n\t\tconst stackFrame2 = new StackFrame(thread, 2, secondSource, 'module', 'normal', { startLineNumber: undefined!, startColumn: undefined!, endLineNumber: undefined!, endColumn: undefined! }, 2, true);\n\t\tassert.strictEqual(stackFrame2.toString(), 'module');\n\t});\n\n\ttest('debug child sessions are added in correct order', () => {\n\t\tconst session = disposables.add(createTestSession(model));\n\t\tmodel.addSession(session);\n\t\tconst secondSession = disposables.add(createTestSession(model, 'mockSession2'));\n\t\tmodel.addSession(secondSession);\n\t\tconst firstChild = disposables.add(createTestSession(model, 'firstChild', { parentSession: session }));\n\t\tmodel.addSession(firstChild);\n\t\tconst secondChild = disposables.add(createTestSession(model, 'secondChild', { parentSession: session }));\n\t\tmodel.addSession(secondChild);\n\t\tconst thirdSession = disposables.add(createTestSession(model, 'mockSession3'));\n\t\tmodel.addSession(thirdSession);\n\t\tconst anotherChild = disposables.add(createTestSession(model, 'secondChild', { parentSession: secondSession }));\n\t\tmodel.addSession(anotherChild);\n\n\t\tconst sessions = model.getSessions();\n\t\tassert.strictEqual(sessions[0].getId(), session.getId());\n\t\tassert.strictEqual(sessions[1].getId(), firstChild.getId());\n\t\tassert.strictEqual(sessions[2].getId(), secondChild.getId());\n\t\tassert.strictEqual(sessions[3].getId(), secondSession.getId());\n\t\tassert.strictEqual(sessions[4].getId(), anotherChild.getId());\n\t\tassert.strictEqual(sessions[5].getId(), thirdSession.getId());\n\t});\n\n\ttest('decorations', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\t\tconst { firstStackFrame, secondStackFrame } = createTwoStackFrames(session);\n\t\tlet decorations = createDecorationsForStackFrame(firstStackFrame, true, false);\n\t\tassert.strictEqual(decorations.length, 3);\n\t\tassert.deepStrictEqual(decorations[0].range, new Range(1, 2, 1, 3));\n\t\tassert.strictEqual(decorations[0].options.glyphMarginClassName, ThemeIcon.asClassName(debugStackframe));\n\t\tassert.deepStrictEqual(decorations[1].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t\tassert.strictEqual(decorations[1].options.className, 'debug-top-stack-frame-line');\n\t\tassert.strictEqual(decorations[1].options.isWholeLine, true);\n\n\t\tdecorations = createDecorationsForStackFrame(secondStackFrame, true, false);\n\t\tassert.strictEqual(decorations.length, 2);\n\t\tassert.deepStrictEqual(decorations[0].range, new Range(1, 2, 1, 3));\n\t\tassert.strictEqual(decorations[0].options.glyphMarginClassName, ThemeIcon.asClassName(debugStackframeFocused));\n\t\tassert.deepStrictEqual(decorations[1].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t\tassert.strictEqual(decorations[1].options.className, 'debug-focused-stack-frame-line');\n\t\tassert.strictEqual(decorations[1].options.isWholeLine, true);\n\n\t\tdecorations = createDecorationsForStackFrame(firstStackFrame, true, false);\n\t\tassert.strictEqual(decorations.length, 3);\n\t\tassert.deepStrictEqual(decorations[0].range, new Range(1, 2, 1, 3));\n\t\tassert.strictEqual(decorations[0].options.glyphMarginClassName, ThemeIcon.asClassName(debugStackframe));\n\t\tassert.deepStrictEqual(decorations[1].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t\tassert.strictEqual(decorations[1].options.className, 'debug-top-stack-frame-line');\n\t\tassert.strictEqual(decorations[1].options.isWholeLine, true);\n\t\t// Inline decoration gets rendered in this case\n\t\tassert.strictEqual(decorations[2].options.before?.inlineClassName, 'debug-top-stack-frame-column');\n\t\tassert.deepStrictEqual(decorations[2].range, new Range(1, 2, 1, Constants.MAX_SAFE_SMALL_INTEGER));\n\t});\n\n\ttest('contexts', () => {\n\t\tconst session = createTestSession(model);\n\t\tdisposables.add(session);\n\t\tmodel.addSession(session);\n\t\tconst { firstStackFrame, secondStackFrame } = createTwoStackFrames(session);\n\t\tlet context = getContext(firstStackFrame);\n\t\tassert.strictEqual(context?.sessionId, firstStackFrame.thread.session.getId());\n\t\tassert.strictEqual(context?.threadId, firstStackFrame.thread.getId());\n\t\tassert.strictEqual(context?.frameId, firstStackFrame.getId());\n\n\t\tcontext = getContext(secondStackFrame.thread);\n\t\tassert.strictEqual(context?.sessionId, secondStackFrame.thread.session.getId());\n\t\tassert.strictEqual(context?.threadId, secondStackFrame.thread.getId());\n\t\tassert.strictEqual(context?.frameId, undefined);\n\n\t\tcontext = getContext(session);\n\t\tassert.strictEqual(context?.sessionId, session.getId());\n\t\tassert.strictEqual(context?.threadId, undefined);\n\t\tassert.strictEqual(context?.frameId, undefined);\n\n\t\tlet contributedContext = getContextForContributedActions(firstStackFrame);\n\t\tassert.strictEqual(contributedContext, firstStackFrame.source.raw.path);\n\t\tcontributedContext = getContextForContributedActions(firstStackFrame.thread);\n\t\tassert.strictEqual(contributedContext, firstStackFrame.thread.threadId);\n\t\tcontributedContext = getContextForContributedActions(session);\n\t\tassert.strictEqual(contributedContext, session.getId());\n\t});\n\n\ttest('focusStackFrameThreadAndSession', () => {\n\t\tconst threadId1 = 1;\n\t\tconst threadName1 = 'firstThread';\n\t\tconst threadId2 = 2;\n\t\tconst threadName2 = 'secondThread';\n\t\tconst stoppedReason = 'breakpoint';\n\n\t\t// Add the threads\n\t\tconst session = new class extends DebugSession {\n\t\t\toverride get state(): State {\n\t\t\t\treturn State.Stopped;\n\t\t\t}\n\t\t}(generateUuid(), { resolved: { name: 'stoppedSession', type: 'node', request: 'launch' }, unresolved: undefined }, undefined, model, undefined, undefined!, undefined!, undefined!, undefined!, undefined!, mockWorkspaceContextService, undefined!, undefined!, undefined!, mockUriIdentityService, new TestInstantiationService(), undefined!, undefined!, new NullLogService(), undefined!, undefined!, new TestAccessibilityService());\n\t\tdisposables.add(session);\n\n\t\tconst runningSession = createTestSession(model);\n\t\tdisposables.add(runningSession);\n\t\tmodel.addSession(runningSession);\n\t\tmodel.addSession(session);\n\n\t\tsession.raw = upcastPartial<RawDebugSession>(mockRawSession);\n\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}]\n\t\t});\n\n\t\t// Stopped event with all threads stopped\n\t\tmodel.rawUpdate({\n\t\t\tsessionId: session.getId(),\n\t\t\tthreads: [{\n\t\t\t\tid: threadId1,\n\t\t\t\tname: threadName1\n\t\t\t}, {\n\t\t\t\tid: threadId2,\n\t\t\t\tname: threadName2\n\t\t\t}],\n\t\t\tstoppedDetails: {\n\t\t\t\treason: stoppedReason,\n\t\t\t\tthreadId: 1,\n\t\t\t\tallThreadsStopped: true\n\t\t\t},\n\t\t});\n\n\t\tconst thread = session.getThread(threadId1)!;\n\t\tconst runningThread = session.getThread(threadId2);\n\n\t\tlet toFocus = getStackFrameThreadAndSessionToFocus(model, undefined);\n\t\t// Verify stopped session and stopped thread get focused\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: thread, session: session });\n\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, undefined, undefined, runningSession);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: undefined, session: runningSession });\n\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, undefined, thread);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: thread, session: session });\n\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, undefined, runningThread);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: undefined, thread: runningThread, session: session });\n\n\t\tconst stackFrame = new StackFrame(thread, 5, undefined!, 'stackframename2', undefined, undefined!, 1, true);\n\t\ttoFocus = getStackFrameThreadAndSessionToFocus(model, stackFrame);\n\t\tassert.deepStrictEqual(toFocus, { stackFrame: stackFrame, thread: thread, session: session });\n\t});\n});\n"]}