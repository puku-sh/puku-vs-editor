{"version":3,"sources":["vs/workbench/contrib/debug/browser/debugAdapterManager.ts"],"names":[],"mappings":"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","file":"debugAdapterManager.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IJSONSchema, IJSONSchemaMap } from '../../../../base/common/jsonSchema.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport Severity from '../../../../base/common/severity.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IEditorModel } from '../../../../editor/common/editorCommon.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Extensions as JSONExtensions, IJSONContributionRegistry } from '../../../../platform/jsonschemas/common/jsonContributionRegistry.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkspaceFolder } from '../../../../platform/workspace/common/workspace.js';\nimport { Breakpoints } from '../common/breakpoints.js';\nimport { CONTEXT_DEBUGGERS_AVAILABLE, CONTEXT_DEBUG_EXTENSION_AVAILABLE, IAdapterDescriptor, IAdapterManager, IConfig, IConfigurationManager, IDebugAdapter, IDebugAdapterDescriptorFactory, IDebugAdapterFactory, IDebugConfiguration, IDebugSession, IGuessedDebugger, INTERNAL_CONSOLE_OPTIONS_SCHEMA } from '../common/debug.js';\nimport { Debugger } from '../common/debugger.js';\nimport { breakpointsExtPoint, debuggersExtPoint, launchSchema, presentationSchema } from '../common/debugSchemas.js';\nimport { TaskDefinitionRegistry } from '../../tasks/common/taskDefinitionRegistry.js';\nimport { ITaskService } from '../../tasks/common/taskService.js';\nimport { launchSchemaId } from '../../../services/configuration/common/configuration.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { ILifecycleService, LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\n\nconst jsonRegistry = Registry.as<IJSONContributionRegistry>(JSONExtensions.JSONContribution);\n\nexport interface IAdapterManagerDelegate {\n\treadonly onDidNewSession: Event<IDebugSession>;\n\tconfigurationManager(): IConfigurationManager;\n}\n\nexport class AdapterManager extends Disposable implements IAdapterManager {\n\n\tprivate debuggers: Debugger[];\n\tprivate adapterDescriptorFactories: IDebugAdapterDescriptorFactory[];\n\tprivate debugAdapterFactories = new Map<string, IDebugAdapterFactory>();\n\tprivate debuggersAvailable!: IContextKey<boolean>;\n\tprivate debugExtensionsAvailable!: IContextKey<boolean>;\n\tprivate readonly _onDidRegisterDebugger = new Emitter<void>();\n\tprivate readonly _onDidDebuggersExtPointRead = new Emitter<void>();\n\tprivate breakpointContributions: Breakpoints[] = [];\n\tprivate debuggerWhenKeys = new Set<string>();\n\tprivate taskLabels: string[] = [];\n\n\t/** Extensions that were already active before any debugger activation events */\n\tprivate earlyActivatedExtensions: Set<string> | undefined;\n\n\tprivate usedDebugTypes = new Set<string>();\n\n\tconstructor(\n\t\tprivate readonly delegate: IAdapterManagerDelegate,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@ITaskService private readonly tasksService: ITaskService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) {\n\t\tsuper();\n\t\tthis.adapterDescriptorFactories = [];\n\t\tthis.debuggers = [];\n\t\tthis.registerListeners();\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tthis.debuggersAvailable = CONTEXT_DEBUGGERS_AVAILABLE.bindTo(contextKeyService);\n\t\t\tthis.debugExtensionsAvailable = CONTEXT_DEBUG_EXTENSION_AVAILABLE.bindTo(contextKeyService);\n\t\t});\n\t\tthis._register(this.contextKeyService.onDidChangeContext(e => {\n\t\t\tif (e.affectsSome(this.debuggerWhenKeys)) {\n\t\t\t\tthis.debuggersAvailable.set(this.hasEnabledDebuggers());\n\t\t\t\tthis.updateDebugAdapterSchema();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.onDidDebuggersExtPointRead(() => {\n\t\t\tthis.debugExtensionsAvailable.set(this.debuggers.length > 0);\n\t\t}));\n\n\t\t// generous debounce since this will end up calling `resolveTask` internally\n\t\tconst updateTaskScheduler = this._register(new RunOnceScheduler(() => this.updateTaskLabels(), 5000));\n\n\t\tthis._register(Event.any(tasksService.onDidChangeTaskConfig, tasksService.onDidChangeTaskProviders)(() => {\n\t\t\tupdateTaskScheduler.cancel();\n\t\t\tupdateTaskScheduler.schedule();\n\t\t}));\n\t\tthis.lifecycleService.when(LifecyclePhase.Eventually)\n\t\t\t.then(() => this.debugExtensionsAvailable.set(this.debuggers.length > 0)); // If no extensions with a debugger contribution are loaded\n\n\t\tthis._register(delegate.onDidNewSession(s => {\n\t\t\tthis.usedDebugTypes.add(s.configuration.type);\n\t\t}));\n\n\t\tupdateTaskScheduler.schedule();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tdebuggersExtPoint.setHandler((extensions, delta) => {\n\t\t\tdelta.added.forEach(added => {\n\t\t\t\tadded.value.forEach(rawAdapter => {\n\t\t\t\t\tif (!rawAdapter.type || (typeof rawAdapter.type !== 'string')) {\n\t\t\t\t\t\tadded.collector.error(nls.localize('debugNoType', \"Debugger 'type' can not be omitted and must be of type 'string'.\"));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rawAdapter.type !== '*') {\n\t\t\t\t\t\tconst existing = this.getDebugger(rawAdapter.type);\n\t\t\t\t\t\tif (existing) {\n\t\t\t\t\t\t\texisting.merge(rawAdapter, added.description);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst dbg = this.instantiationService.createInstance(Debugger, this, rawAdapter, added.description);\n\t\t\t\t\t\t\tdbg.when?.keys().forEach(key => this.debuggerWhenKeys.add(key));\n\t\t\t\t\t\t\tthis.debuggers.push(dbg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// take care of all wildcard contributions\n\t\t\textensions.forEach(extension => {\n\t\t\t\textension.value.forEach(rawAdapter => {\n\t\t\t\t\tif (rawAdapter.type === '*') {\n\t\t\t\t\t\tthis.debuggers.forEach(dbg => dbg.merge(rawAdapter, extension.description));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tdelta.removed.forEach(removed => {\n\t\t\t\tconst removedTypes = removed.value.map(rawAdapter => rawAdapter.type);\n\t\t\t\tthis.debuggers = this.debuggers.filter(d => removedTypes.indexOf(d.type) === -1);\n\t\t\t});\n\n\t\t\tthis.updateDebugAdapterSchema();\n\t\t\tthis._onDidDebuggersExtPointRead.fire();\n\t\t});\n\n\t\tbreakpointsExtPoint.setHandler(extensions => {\n\t\t\tthis.breakpointContributions = extensions.flatMap(ext => ext.value.map(breakpoint => this.instantiationService.createInstance(Breakpoints, breakpoint)));\n\t\t});\n\t}\n\n\tprivate updateTaskLabels() {\n\t\tthis.tasksService.getKnownTasks().then(tasks => {\n\t\t\tthis.taskLabels = tasks.map(task => task._label);\n\t\t\tthis.updateDebugAdapterSchema();\n\t\t});\n\t}\n\n\tprivate updateDebugAdapterSchema() {\n\t\t// update the schema to include all attributes, snippets and types from extensions.\n\t\tconst items = (<IJSONSchema>launchSchema.properties!['configurations'].items);\n\t\tconst taskSchema = TaskDefinitionRegistry.getJsonSchema();\n\t\tconst definitions: IJSONSchemaMap = {\n\t\t\t'common': {\n\t\t\t\tproperties: {\n\t\t\t\t\t'name': {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: nls.localize('debugName', \"Name of configuration; appears in the launch configuration dropdown menu.\"),\n\t\t\t\t\t\tdefault: 'Launch'\n\t\t\t\t\t},\n\t\t\t\t\t'debugServer': {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tdescription: nls.localize('debugServer', \"For debug extension development only: if a port is specified VS Code tries to connect to a debug adapter running in server mode\"),\n\t\t\t\t\t\tdefault: 4711\n\t\t\t\t\t},\n\t\t\t\t\t'preLaunchTask': {\n\t\t\t\t\t\tanyOf: [taskSchema, {\n\t\t\t\t\t\t\ttype: ['string']\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdefaultSnippets: [{ body: { task: '', type: '' } }],\n\t\t\t\t\t\tdescription: nls.localize('debugPrelaunchTask', \"Task to run before debug session starts.\"),\n\t\t\t\t\t\texamples: this.taskLabels,\n\t\t\t\t\t},\n\t\t\t\t\t'postDebugTask': {\n\t\t\t\t\t\tanyOf: [taskSchema, {\n\t\t\t\t\t\t\ttype: ['string'],\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tdefault: '',\n\t\t\t\t\t\tdefaultSnippets: [{ body: { task: '', type: '' } }],\n\t\t\t\t\t\tdescription: nls.localize('debugPostDebugTask', \"Task to run after debug session ends.\"),\n\t\t\t\t\t\texamples: this.taskLabels,\n\t\t\t\t\t},\n\t\t\t\t\t'presentation': presentationSchema,\n\t\t\t\t\t'internalConsoleOptions': INTERNAL_CONSOLE_OPTIONS_SCHEMA,\n\t\t\t\t\t'suppressMultipleSessionWarning': {\n\t\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\t\tdescription: nls.localize('suppressMultipleSessionWarning', \"Disable the warning when trying to start the same debug configuration more than once.\"),\n\t\t\t\t\t\tdefault: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tlaunchSchema.definitions = definitions;\n\t\titems.oneOf = [];\n\t\titems.defaultSnippets = [];\n\t\tthis.debuggers.forEach(adapter => {\n\t\t\tconst schemaAttributes = adapter.getSchemaAttributes(definitions);\n\t\t\tif (schemaAttributes && items.oneOf) {\n\t\t\t\titems.oneOf.push(...schemaAttributes);\n\t\t\t}\n\t\t\tconst configurationSnippets = adapter.configurationSnippets;\n\t\t\tif (configurationSnippets && items.defaultSnippets) {\n\t\t\t\titems.defaultSnippets.push(...configurationSnippets);\n\t\t\t}\n\t\t});\n\t\tjsonRegistry.registerSchema(launchSchemaId, launchSchema);\n\t}\n\n\tregisterDebugAdapterFactory(debugTypes: string[], debugAdapterLauncher: IDebugAdapterFactory): IDisposable {\n\t\tdebugTypes.forEach(debugType => this.debugAdapterFactories.set(debugType, debugAdapterLauncher));\n\t\tthis.debuggersAvailable.set(this.hasEnabledDebuggers());\n\t\tthis._onDidRegisterDebugger.fire();\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tdebugTypes.forEach(debugType => this.debugAdapterFactories.delete(debugType));\n\t\t\t}\n\t\t};\n\t}\n\n\thasEnabledDebuggers(): boolean {\n\t\tfor (const [type] of this.debugAdapterFactories) {\n\t\t\tconst dbg = this.getDebugger(type);\n\t\t\tif (dbg && dbg.enabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcreateDebugAdapter(session: IDebugSession): IDebugAdapter | undefined {\n\t\tconst factory = this.debugAdapterFactories.get(session.configuration.type);\n\t\tif (factory) {\n\t\t\treturn factory.createDebugAdapter(session);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsubstituteVariables(debugType: string, folder: IWorkspaceFolder | undefined, config: IConfig): Promise<IConfig> {\n\t\tconst factory = this.debugAdapterFactories.get(debugType);\n\t\tif (factory) {\n\t\t\treturn factory.substituteVariables(folder, config);\n\t\t}\n\t\treturn Promise.resolve(config);\n\t}\n\n\trunInTerminal(debugType: string, args: DebugProtocol.RunInTerminalRequestArguments, sessionId: string): Promise<number | undefined> {\n\t\tconst factory = this.debugAdapterFactories.get(debugType);\n\t\tif (factory) {\n\t\t\treturn factory.runInTerminal(args, sessionId);\n\t\t}\n\t\treturn Promise.resolve(void 0);\n\t}\n\n\tregisterDebugAdapterDescriptorFactory(debugAdapterProvider: IDebugAdapterDescriptorFactory): IDisposable {\n\t\tthis.adapterDescriptorFactories.push(debugAdapterProvider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.unregisterDebugAdapterDescriptorFactory(debugAdapterProvider);\n\t\t\t}\n\t\t};\n\t}\n\n\tunregisterDebugAdapterDescriptorFactory(debugAdapterProvider: IDebugAdapterDescriptorFactory): void {\n\t\tconst ix = this.adapterDescriptorFactories.indexOf(debugAdapterProvider);\n\t\tif (ix >= 0) {\n\t\t\tthis.adapterDescriptorFactories.splice(ix, 1);\n\t\t}\n\t}\n\n\tgetDebugAdapterDescriptor(session: IDebugSession): Promise<IAdapterDescriptor | undefined> {\n\t\tconst config = session.configuration;\n\t\tconst providers = this.adapterDescriptorFactories.filter(p => p.type === config.type && p.createDebugAdapterDescriptor);\n\t\tif (providers.length === 1) {\n\t\t\treturn providers[0].createDebugAdapterDescriptor(session);\n\t\t} else {\n\t\t\t// TODO@AW handle n > 1 case\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tgetDebuggerLabel(type: string): string | undefined {\n\t\tconst dbgr = this.getDebugger(type);\n\t\tif (dbgr) {\n\t\t\treturn dbgr.label;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget onDidRegisterDebugger(): Event<void> {\n\t\treturn this._onDidRegisterDebugger.event;\n\t}\n\n\tget onDidDebuggersExtPointRead(): Event<void> {\n\t\treturn this._onDidDebuggersExtPointRead.event;\n\t}\n\n\tcanSetBreakpointsIn(model: ITextModel): boolean {\n\t\tconst languageId = model.getLanguageId();\n\t\tif (!languageId || languageId === 'jsonc' || languageId === 'log') {\n\t\t\t// do not allow breakpoints in our settings files and output\n\t\t\treturn false;\n\t\t}\n\t\tif (this.configurationService.getValue<IDebugConfiguration>('debug').allowBreakpointsEverywhere) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.breakpointContributions.some(breakpoints => breakpoints.language === languageId && breakpoints.enabled);\n\t}\n\n\tgetDebugger(type: string): Debugger | undefined {\n\t\treturn this.debuggers.find(dbg => strings.equalsIgnoreCase(dbg.type, type));\n\t}\n\n\tgetEnabledDebugger(type: string): Debugger | undefined {\n\t\tconst adapter = this.getDebugger(type);\n\t\treturn adapter && adapter.enabled ? adapter : undefined;\n\t}\n\n\tsomeDebuggerInterestedInLanguage(languageId: string): boolean {\n\t\treturn !!this.debuggers\n\t\t\t.filter(d => d.enabled)\n\t\t\t.find(a => a.interestedInLanguage(languageId));\n\t}\n\n\tasync guessDebugger(gettingConfigurations: boolean): Promise<IGuessedDebugger | undefined> {\n\t\tconst activeTextEditorControl = this.editorService.activeTextEditorControl;\n\t\tlet candidates: Debugger[] = [];\n\t\tlet languageLabel: string | null = null;\n\t\tlet model: IEditorModel | null = null;\n\t\tif (isCodeEditor(activeTextEditorControl)) {\n\t\t\tmodel = activeTextEditorControl.getModel();\n\t\t\tconst language = model ? model.getLanguageId() : undefined;\n\t\t\tif (language) {\n\t\t\t\tlanguageLabel = this.languageService.getLanguageName(language);\n\t\t\t}\n\t\t\tconst adapters = this.debuggers\n\t\t\t\t.filter(a => a.enabled)\n\t\t\t\t.filter(a => language && a.interestedInLanguage(language));\n\t\t\tif (adapters.length === 1) {\n\t\t\t\treturn { debugger: adapters[0] };\n\t\t\t}\n\t\t\tif (adapters.length > 1) {\n\t\t\t\tcandidates = adapters;\n\t\t\t}\n\t\t}\n\n\t\t// We want to get the debuggers that have configuration providers in the case we are fetching configurations\n\t\t// Or if a breakpoint can be set in the current file (good hint that an extension can handle it)\n\t\tif ((!languageLabel || gettingConfigurations || (model && this.canSetBreakpointsIn(model))) && candidates.length === 0) {\n\t\t\tawait this.activateDebuggers('onDebugInitialConfigurations');\n\n\t\t\tcandidates = this.debuggers\n\t\t\t\t.filter(a => a.enabled)\n\t\t\t\t.filter(dbg => dbg.hasInitialConfiguration() || dbg.hasDynamicConfigurationProviders() || dbg.hasConfigurationProvider());\n\t\t}\n\n\t\tif (candidates.length === 0 && languageLabel) {\n\t\t\tif (languageLabel.indexOf(' ') >= 0) {\n\t\t\t\tlanguageLabel = `'${languageLabel}'`;\n\t\t\t}\n\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\ttype: Severity.Warning,\n\t\t\t\tmessage: nls.localize('CouldNotFindLanguage', \"You don't have an extension for debugging {0}. Should we find a {0} extension in the Marketplace?\", languageLabel),\n\t\t\t\tprimaryButton: nls.localize({ key: 'findExtension', comment: ['&& denotes a mnemonic'] }, \"&&Find {0} extension\", languageLabel)\n\t\t\t});\n\t\t\tif (confirmed) {\n\t\t\t\tawait this.commandService.executeCommand('debug.installAdditionalDebuggers', languageLabel);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.initExtensionActivationsIfNeeded();\n\n\t\tcandidates.sort((first, second) => first.label.localeCompare(second.label));\n\t\tcandidates = candidates.filter(a => !a.isHiddenFromDropdown);\n\n\t\tconst suggestedCandidates: Debugger[] = [];\n\t\tconst otherCandidates: Debugger[] = [];\n\t\tcandidates.forEach(d => {\n\t\t\tconst descriptor = d.getMainExtensionDescriptor();\n\t\t\tif (descriptor.id && !!this.earlyActivatedExtensions?.has(descriptor.id)) {\n\t\t\t\t// Was activated early\n\t\t\t\tsuggestedCandidates.push(d);\n\t\t\t} else if (this.usedDebugTypes.has(d.type)) {\n\t\t\t\t// Was used already\n\t\t\t\tsuggestedCandidates.push(d);\n\t\t\t} else {\n\t\t\t\totherCandidates.push(d);\n\t\t\t}\n\t\t});\n\n\t\tconst picks: ({ label: string; pick?: () => IGuessedDebugger | Promise<IGuessedDebugger | undefined>; type?: string } | MenuItemAction)[] = [];\n\t\tconst dynamic = await this.delegate.configurationManager().getDynamicProviders();\n\t\tif (suggestedCandidates.length > 0) {\n\t\t\tpicks.push(\n\t\t\t\t{ type: 'separator', label: nls.localize('suggestedDebuggers', \"Suggested\") },\n\t\t\t\t...suggestedCandidates.map(c => ({ label: c.label, pick: () => ({ debugger: c }) })));\n\t\t}\n\n\t\tif (otherCandidates.length > 0) {\n\t\t\tif (picks.length > 0) {\n\t\t\t\tpicks.push({ type: 'separator', label: '' });\n\t\t\t}\n\n\t\t\tpicks.push(...otherCandidates.map(c => ({ label: c.label, pick: () => ({ debugger: c }) })));\n\t\t}\n\n\t\tif (dynamic.length) {\n\t\t\tif (picks.length) {\n\t\t\t\tpicks.push({ type: 'separator', label: '' });\n\t\t\t}\n\n\t\t\tfor (const d of dynamic) {\n\t\t\t\tpicks.push({\n\t\t\t\t\tlabel: nls.localize('moreOptionsForDebugType', \"More {0} options...\", d.label),\n\t\t\t\t\tpick: async (): Promise<IGuessedDebugger | undefined> => {\n\t\t\t\t\t\tconst cfg = await d.pick();\n\t\t\t\t\t\tif (!cfg) { return undefined; }\n\t\t\t\t\t\treturn cfg && { debugger: this.getDebugger(d.type)!, withConfig: cfg };\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tpicks.push(\n\t\t\t{ type: 'separator', label: '' },\n\t\t\t{ label: languageLabel ? nls.localize('installLanguage', \"Install an extension for {0}...\", languageLabel) : nls.localize('installExt', \"Install extension...\") }\n\t\t);\n\n\t\tconst contributed = this.menuService.getMenuActions(MenuId.DebugCreateConfiguration, this.contextKeyService);\n\t\tfor (const [, action] of contributed) {\n\t\t\tfor (const item of action) {\n\t\t\t\tpicks.push(item);\n\t\t\t}\n\t\t}\n\n\t\tconst placeHolder = nls.localize('selectDebug', \"Select debugger\");\n\t\treturn this.quickInputService.pick<{ label: string; debugger?: Debugger } | IQuickPickItem>(picks, { activeItem: picks[0], placeHolder }).then(async picked => {\n\t\t\tif (picked && 'pick' in picked && typeof picked.pick === 'function') {\n\t\t\t\treturn await picked.pick();\n\t\t\t}\n\n\t\t\tif (picked instanceof MenuItemAction) {\n\t\t\t\tpicked.run();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (picked) {\n\t\t\t\tthis.commandService.executeCommand('debug.installAdditionalDebuggers', languageLabel);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\tprivate initExtensionActivationsIfNeeded(): void {\n\t\tif (!this.earlyActivatedExtensions) {\n\t\t\tthis.earlyActivatedExtensions = new Set<string>();\n\n\t\t\tconst status = this.extensionService.getExtensionsStatus();\n\t\t\tfor (const id in status) {\n\t\t\t\tif (!!status[id].activationTimes) {\n\t\t\t\t\tthis.earlyActivatedExtensions.add(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync activateDebuggers(activationEvent: string, debugType?: string): Promise<void> {\n\t\tthis.initExtensionActivationsIfNeeded();\n\n\t\tconst promises: Promise<any>[] = [\n\t\t\tthis.extensionService.activateByEvent(activationEvent),\n\t\t\tthis.extensionService.activateByEvent('onDebug')\n\t\t];\n\t\tif (debugType) {\n\t\t\tpromises.push(this.extensionService.activateByEvent(`${activationEvent}:${debugType}`));\n\t\t}\n\t\tawait Promise.all(promises);\n\t}\n}\n"]}