{"version":3,"sources":["vs/workbench/contrib/debug/browser/debugSessionPicker.ts"],"names":[],"mappings":"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","file":"debugSessionPicker.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../../nls.js';\nimport { matchesFuzzy } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IDebugService, IDebugSession, REPL_VIEW_ID } from '../common/debug.js';\nimport { IQuickInputService, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\n\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IPickerDebugItem } from '../common/loadedScriptsPicker.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\n\n\nexport async function showDebugSessionMenu(accessor: ServicesAccessor, selectAndStartID: string) {\n\tconst quickInputService = accessor.get(IQuickInputService);\n\tconst debugService = accessor.get(IDebugService);\n\tconst viewsService = accessor.get(IViewsService);\n\tconst commandService = accessor.get(ICommandService);\n\n\tconst localDisposableStore = new DisposableStore();\n\tconst quickPick = quickInputService.createQuickPick<IPickerDebugItem>({ useSeparators: true });\n\tlocalDisposableStore.add(quickPick);\n\tquickPick.matchOnLabel = quickPick.matchOnDescription = quickPick.matchOnDetail = quickPick.sortByLabel = false;\n\tquickPick.placeholder = nls.localize('moveFocusedView.selectView', 'Search debug sessions by name');\n\n\tconst pickItems = _getPicksAndActiveItem(quickPick.value, selectAndStartID, debugService, viewsService, commandService);\n\tquickPick.items = pickItems.picks;\n\tquickPick.activeItems = pickItems.activeItems;\n\n\tlocalDisposableStore.add(quickPick.onDidChangeValue(async () => {\n\t\tquickPick.items = _getPicksAndActiveItem(quickPick.value, selectAndStartID, debugService, viewsService, commandService).picks;\n\t}));\n\tlocalDisposableStore.add(quickPick.onDidAccept(() => {\n\t\tconst selectedItem = quickPick.selectedItems[0];\n\t\tselectedItem.accept();\n\t\tquickPick.hide();\n\t\tlocalDisposableStore.dispose();\n\t}));\n\tquickPick.show();\n}\n\nfunction _getPicksAndActiveItem(filter: string, selectAndStartID: string, debugService: IDebugService, viewsService: IViewsService, commandService: ICommandService): { picks: Array<IPickerDebugItem | IQuickPickSeparator>; activeItems: Array<IPickerDebugItem> } {\n\tconst debugConsolePicks: Array<IPickerDebugItem | IQuickPickSeparator> = [];\n\tconst headerSessions: IDebugSession[] = [];\n\n\tconst currSession = debugService.getViewModel().focusedSession;\n\tconst sessions = debugService.getModel().getSessions(false);\n\tconst activeItems: Array<IPickerDebugItem> = [];\n\n\tsessions.forEach((session) => {\n\t\tif (session.compact && session.parentSession) {\n\t\t\theaderSessions.push(session.parentSession);\n\t\t}\n\t});\n\n\tsessions.forEach((session) => {\n\t\tconst isHeader = headerSessions.includes(session);\n\t\tif (!session.parentSession) {\n\t\t\tdebugConsolePicks.push({ type: 'separator', label: isHeader ? session.name : undefined });\n\t\t}\n\n\t\tif (!isHeader) {\n\t\t\tconst pick = _createPick(session, filter, debugService, viewsService, commandService);\n\t\t\tif (pick) {\n\t\t\t\tdebugConsolePicks.push(pick);\n\t\t\t\tif (session.getId() === currSession?.getId()) {\n\t\t\t\t\tactiveItems.push(pick);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (debugConsolePicks.length) {\n\t\tdebugConsolePicks.push({ type: 'separator' });\n\t}\n\n\tconst createDebugSessionLabel = nls.localize('workbench.action.debug.startDebug', 'Start a New Debug Session');\n\tdebugConsolePicks.push({\n\t\tlabel: `$(plus) ${createDebugSessionLabel}`,\n\t\tariaLabel: createDebugSessionLabel,\n\t\taccept: () => commandService.executeCommand(selectAndStartID)\n\t});\n\n\treturn { picks: debugConsolePicks, activeItems };\n}\n\n\nfunction _getSessionInfo(session: IDebugSession): { label: string; description: string; ariaLabel: string } {\n\tconst label = (!session.configuration.name.length) ? session.name : session.configuration.name;\n\tconst parentName = session.compact ? undefined : session.parentSession?.configuration.name;\n\tlet description = '';\n\tlet ariaLabel = '';\n\tif (parentName) {\n\t\tariaLabel = nls.localize('workbench.action.debug.spawnFrom', 'Session {0} spawned from {1}', label, parentName);\n\t\tdescription = parentName;\n\t}\n\n\treturn { label, description, ariaLabel };\n}\n\nfunction _createPick(session: IDebugSession, filter: string, debugService: IDebugService, viewsService: IViewsService, commandService: ICommandService): IPickerDebugItem | undefined {\n\tconst pickInfo = _getSessionInfo(session);\n\tconst highlights = matchesFuzzy(filter, pickInfo.label, true);\n\tif (highlights) {\n\t\treturn {\n\t\t\tlabel: pickInfo.label,\n\t\t\tdescription: pickInfo.description,\n\t\t\tariaLabel: pickInfo.ariaLabel,\n\t\t\thighlights: { label: highlights },\n\t\t\taccept: () => {\n\t\t\t\tdebugService.focusStackFrame(undefined, undefined, session, { explicit: true });\n\t\t\t\tif (!viewsService.isViewVisible(REPL_VIEW_ID)) {\n\t\t\t\t\tviewsService.openView(REPL_VIEW_ID, true);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\treturn undefined;\n}\n\n\n"]}