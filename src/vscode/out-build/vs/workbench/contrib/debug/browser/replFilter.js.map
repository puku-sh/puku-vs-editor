{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/browser/replFilter.ts","vs/workbench/contrib/debug/browser/replFilter.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAc,YAAY,EAAE,MAAM,oCAAoC,CAAC;AAC9E,OAAO,EAAE,cAAc,EAAE,MAAM,iCAAiC,CAAC;AAGjE,OAAO,EAAE,oBAAoB,EAAE,mBAAmB,EAAE,MAAM,wBAAwB,CAAC;AACnF,OAAO,EAAE,QAAQ,EAAE,MAAM,yBAAyB,CAAC;AAQnD,MAAM,OAAO,UAAU;IAAvB;QAIS,mBAAc,GAAkB,EAAE,CAAC;IA4C5C,CAAC;aA9CO,eAAU,GAAG,YAAH,AAAe,CAAC;IAGjC,IAAI,WAAW,CAAC,KAAa;QAC5B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,KAAK,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;QAErB,IAAI,KAAK,IAAI,KAAK,KAAK,EAAE,EAAE,CAAC;YAC3B,MAAM,OAAO,GAAG,cAAc,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YACtF,KAAK,MAAM,CAAC,IAAI,OAAO,EAAE,CAAC;gBACzB,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;oBACxB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;gBAClE,CAAC;qBAAM,IAAI,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC;oBAC9B,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;gBAClE,CAAC;qBAAM,CAAC;oBACP,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;gBACzD,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAED,MAAM,CAAC,OAAqB,EAAE,gBAAgC;QAC7D,IAAI,OAAO,YAAY,mBAAmB,IAAI,OAAO,YAAY,oBAAoB,IAAI,OAAO,YAAY,QAAQ,EAAE,CAAC;YACtH,8GAA8G;YAC9G,sCAA8B;QAC/B,CAAC;QAED,IAAI,mBAAmB,GAAG,KAAK,CAAC;QAChC,IAAI,mBAAmB,GAAG,KAAK,CAAC;QAEhC,MAAM,IAAI,GAAG,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAEpC,KAAK,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACnD,IAAI,IAAI,KAAK,SAAS,IAAI,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC;gBAC9D,8DAA8D;gBAC9D,OAAO,KAAK,CAAC;YACd,CAAC;iBAAM,IAAI,IAAI,KAAK,SAAS,EAAE,CAAC;gBAC/B,mBAAmB,GAAG,IAAI,CAAC;gBAC3B,IAAI,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC;oBACxC,mBAAmB,GAAG,IAAI,CAAC;gBAC5B,CAAC;YACF,CAAC;QACF,CAAC;QAED,OAAO,mBAAmB,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,OAAO,gBAAgB,KAAK,WAAW,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,+BAAuB,CAAC,CAAC;IAC1I,CAAC","file":"replFilter.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { FuzzyScore, matchesFuzzy } from '../../../../base/common/filters.js';\nimport { splitGlobAware } from '../../../../base/common/glob.js';\nimport { ITreeFilter, TreeVisibility, TreeFilterResult } from '../../../../base/browser/ui/tree/tree.js';\nimport { IReplElement } from '../common/debug.js';\nimport { ReplEvaluationResult, ReplEvaluationInput } from '../common/replModel.js';\nimport { Variable } from '../common/debugModel.js';\n\n\ntype ParsedQuery = {\n\ttype: 'include' | 'exclude';\n\tquery: string;\n};\n\nexport class ReplFilter implements ITreeFilter<IReplElement, FuzzyScore> {\n\n\tstatic matchQuery = matchesFuzzy;\n\n\tprivate _parsedQueries: ParsedQuery[] = [];\n\tset filterQuery(query: string) {\n\t\tthis._parsedQueries = [];\n\t\tquery = query.trim();\n\n\t\tif (query && query !== '') {\n\t\t\tconst filters = splitGlobAware(query, ',').map(s => s.trim()).filter(s => !!s.length);\n\t\t\tfor (const f of filters) {\n\t\t\t\tif (f.startsWith('\\\\')) {\n\t\t\t\t\tthis._parsedQueries.push({ type: 'include', query: f.slice(1) });\n\t\t\t\t} else if (f.startsWith('!')) {\n\t\t\t\t\tthis._parsedQueries.push({ type: 'exclude', query: f.slice(1) });\n\t\t\t\t} else {\n\t\t\t\t\tthis._parsedQueries.push({ type: 'include', query: f });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfilter(element: IReplElement, parentVisibility: TreeVisibility): TreeFilterResult<FuzzyScore> {\n\t\tif (element instanceof ReplEvaluationInput || element instanceof ReplEvaluationResult || element instanceof Variable) {\n\t\t\t// Only filter the output events, everything else is visible https://github.com/microsoft/vscode/issues/105863\n\t\t\treturn TreeVisibility.Visible;\n\t\t}\n\n\t\tlet includeQueryPresent = false;\n\t\tlet includeQueryMatched = false;\n\n\t\tconst text = element.toString(true);\n\n\t\tfor (const { type, query } of this._parsedQueries) {\n\t\t\tif (type === 'exclude' && ReplFilter.matchQuery(query, text)) {\n\t\t\t\t// If exclude query matches, ignore all other queries and hide\n\t\t\t\treturn false;\n\t\t\t} else if (type === 'include') {\n\t\t\t\tincludeQueryPresent = true;\n\t\t\t\tif (ReplFilter.matchQuery(query, text)) {\n\t\t\t\t\tincludeQueryMatched = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn includeQueryPresent ? includeQueryMatched : (typeof parentVisibility !== 'undefined' ? parentVisibility : TreeVisibility.Visible);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { FuzzyScore, matchesFuzzy } from '../../../../base/common/filters.js';\nimport { splitGlobAware } from '../../../../base/common/glob.js';\nimport { ITreeFilter, TreeVisibility, TreeFilterResult } from '../../../../base/browser/ui/tree/tree.js';\nimport { IReplElement } from '../common/debug.js';\nimport { ReplEvaluationResult, ReplEvaluationInput } from '../common/replModel.js';\nimport { Variable } from '../common/debugModel.js';\n\n\ntype ParsedQuery = {\n\ttype: 'include' | 'exclude';\n\tquery: string;\n};\n\nexport class ReplFilter implements ITreeFilter<IReplElement, FuzzyScore> {\n\n\tstatic matchQuery = matchesFuzzy;\n\n\tprivate _parsedQueries: ParsedQuery[] = [];\n\tset filterQuery(query: string) {\n\t\tthis._parsedQueries = [];\n\t\tquery = query.trim();\n\n\t\tif (query && query !== '') {\n\t\t\tconst filters = splitGlobAware(query, ',').map(s => s.trim()).filter(s => !!s.length);\n\t\t\tfor (const f of filters) {\n\t\t\t\tif (f.startsWith('\\\\')) {\n\t\t\t\t\tthis._parsedQueries.push({ type: 'include', query: f.slice(1) });\n\t\t\t\t} else if (f.startsWith('!')) {\n\t\t\t\t\tthis._parsedQueries.push({ type: 'exclude', query: f.slice(1) });\n\t\t\t\t} else {\n\t\t\t\t\tthis._parsedQueries.push({ type: 'include', query: f });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfilter(element: IReplElement, parentVisibility: TreeVisibility): TreeFilterResult<FuzzyScore> {\n\t\tif (element instanceof ReplEvaluationInput || element instanceof ReplEvaluationResult || element instanceof Variable) {\n\t\t\t// Only filter the output events, everything else is visible https://github.com/microsoft/vscode/issues/105863\n\t\t\treturn TreeVisibility.Visible;\n\t\t}\n\n\t\tlet includeQueryPresent = false;\n\t\tlet includeQueryMatched = false;\n\n\t\tconst text = element.toString(true);\n\n\t\tfor (const { type, query } of this._parsedQueries) {\n\t\t\tif (type === 'exclude' && ReplFilter.matchQuery(query, text)) {\n\t\t\t\t// If exclude query matches, ignore all other queries and hide\n\t\t\t\treturn false;\n\t\t\t} else if (type === 'include') {\n\t\t\t\tincludeQueryPresent = true;\n\t\t\t\tif (ReplFilter.matchQuery(query, text)) {\n\t\t\t\t\tincludeQueryMatched = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn includeQueryPresent ? includeQueryMatched : (typeof parentVisibility !== 'undefined' ? parentVisibility : TreeVisibility.Visible);\n\t}\n}\n"]}