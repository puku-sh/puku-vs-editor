{"version":3,"sources":["vs/workbench/contrib/debug/browser/callStackWidget.ts"],"names":[],"mappings":"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","file":"callStackWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { IListRenderer, IListVirtualDelegate } from '../../../../base/browser/ui/list/list.js';\nimport { IListAccessibilityProvider } from '../../../../base/browser/ui/list/listWidget.js';\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, IObservable, ISettableObservable, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Constants } from '../../../../base/common/uint.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorContributionCtor, EditorContributionInstantiation, IEditorContributionDescription } from '../../../../editor/browser/editorExtensions.js';\nimport { CodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { IWordAtPosition } from '../../../../editor/common/core/wordHelper.js';\nimport { IEditorContribution, IEditorDecorationsCollection } from '../../../../editor/common/editorCommon.js';\nimport { Location } from '../../../../editor/common/languages.js';\nimport { ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport { ClickLinkGesture, ClickLinkMouseEvent } from '../../../../editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { TextEditorSelectionRevealType } from '../../../../platform/editor/common/editor.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { WorkbenchList } from '../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { defaultButtonStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { ResourceLabel } from '../../../browser/labels.js';\nimport { IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { makeStackFrameColumnDecoration, TOP_STACK_FRAME_DECORATION } from './callStackEditorContribution.js';\nimport './media/callStackWidget.css';\n\n\nexport class CallStackFrame {\n\tconstructor(\n\t\tpublic readonly name: string,\n\t\tpublic readonly source?: URI,\n\t\tpublic readonly line = 1,\n\t\tpublic readonly column = 1,\n\t) { }\n}\n\nexport class SkippedCallFrames {\n\tconstructor(\n\t\tpublic readonly label: string,\n\t\tpublic readonly load: (token: CancellationToken) => Promise<AnyStackFrame[]>,\n\t) { }\n}\n\nexport abstract class CustomStackFrame {\n\tpublic readonly showHeader = observableValue('CustomStackFrame.showHeader', true);\n\tpublic abstract readonly height: IObservable<number>;\n\tpublic abstract readonly label: string;\n\tpublic icon?: ThemeIcon;\n\tpublic abstract render(container: HTMLElement): IDisposable;\n\tpublic renderActions?(container: HTMLElement): IDisposable;\n}\n\nexport type AnyStackFrame = SkippedCallFrames | CallStackFrame | CustomStackFrame;\n\ninterface IFrameLikeItem {\n\treadonly collapsed: ISettableObservable<boolean>;\n\treadonly height: IObservable<number>;\n}\n\nclass WrappedCallStackFrame extends CallStackFrame implements IFrameLikeItem {\n\tpublic readonly editorHeight = observableValue('WrappedCallStackFrame.height', this.source ? 100 : 0);\n\tpublic readonly collapsed = observableValue('WrappedCallStackFrame.collapsed', false);\n\n\tpublic readonly height = derived(reader => {\n\t\treturn this.collapsed.read(reader) ? CALL_STACK_WIDGET_HEADER_HEIGHT : CALL_STACK_WIDGET_HEADER_HEIGHT + this.editorHeight.read(reader);\n\t});\n\n\tconstructor(original: CallStackFrame) {\n\t\tsuper(original.name, original.source, original.line, original.column);\n\t}\n}\n\nclass WrappedCustomStackFrame implements IFrameLikeItem {\n\tpublic readonly collapsed = observableValue('WrappedCallStackFrame.collapsed', false);\n\n\tpublic readonly height = derived(reader => {\n\t\tconst headerHeight = this.original.showHeader.read(reader) ? CALL_STACK_WIDGET_HEADER_HEIGHT : 0;\n\t\treturn this.collapsed.read(reader) ? headerHeight : headerHeight + this.original.height.read(reader);\n\t});\n\n\tconstructor(public readonly original: CustomStackFrame) { }\n}\n\nconst isFrameLike = (item: unknown): item is IFrameLikeItem =>\n\titem instanceof WrappedCallStackFrame || item instanceof WrappedCustomStackFrame;\n\ntype ListItem = WrappedCallStackFrame | SkippedCallFrames | WrappedCustomStackFrame;\n\nconst WIDGET_CLASS_NAME = 'multiCallStackWidget';\n\n/**\n * A reusable widget that displays a call stack as a series of editors. Note\n * that this both used in debug's exception widget as well as in the testing\n * call stack view.\n */\nexport class CallStackWidget extends Disposable {\n\tprivate readonly list: WorkbenchList<ListItem>;\n\tprivate readonly layoutEmitter = this._register(new Emitter<void>());\n\tprivate readonly currentFramesDs = this._register(new DisposableStore());\n\tprivate cts?: CancellationTokenSource;\n\n\tpublic get onDidChangeContentHeight() {\n\t\treturn this.list.onDidChangeContentHeight;\n\t}\n\n\tpublic get onDidScroll() {\n\t\treturn this.list.onDidScroll;\n\t}\n\n\tpublic get contentHeight() {\n\t\treturn this.list.contentHeight;\n\t}\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tcontainingEditor: ICodeEditor | undefined,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tcontainer.classList.add(WIDGET_CLASS_NAME);\n\t\tthis._register(toDisposable(() => container.classList.remove(WIDGET_CLASS_NAME)));\n\n\t\tthis.list = this._register(instantiationService.createInstance(\n\t\t\tWorkbenchList,\n\t\t\t'TestResultStackWidget',\n\t\t\tcontainer,\n\t\t\tnew StackDelegate(),\n\t\t\t[\n\t\t\t\tinstantiationService.createInstance(FrameCodeRenderer, containingEditor, this.layoutEmitter.event),\n\t\t\t\tinstantiationService.createInstance(MissingCodeRenderer),\n\t\t\t\tinstantiationService.createInstance(CustomRenderer),\n\t\t\t\tinstantiationService.createInstance(SkippedRenderer, (i) => this.loadFrame(i)),\n\t\t\t],\n\t\t\t{\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\tmouseSupport: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\talwaysConsumeMouseWheel: false,\n\t\t\t\taccessibilityProvider: instantiationService.createInstance(StackAccessibilityProvider),\n\t\t\t}\n\t\t) as WorkbenchList<ListItem>);\n\t}\n\n\t/** Replaces the call frames display in the view. */\n\tpublic setFrames(frames: AnyStackFrame[]): void {\n\t\t// cancel any existing load\n\t\tthis.currentFramesDs.clear();\n\t\tthis.cts = new CancellationTokenSource();\n\t\tthis._register(toDisposable(() => this.cts!.dispose(true)));\n\n\t\tthis.list.splice(0, this.list.length, this.mapFrames(frames));\n\t}\n\n\tpublic layout(height?: number, width?: number): void {\n\t\tthis.list.layout(height, width);\n\t\tthis.layoutEmitter.fire();\n\t}\n\n\tpublic collapseAll() {\n\t\ttransaction(tx => {\n\t\t\tfor (let i = 0; i < this.list.length; i++) {\n\t\t\t\tconst frame = this.list.element(i);\n\t\t\t\tif (isFrameLike(frame)) {\n\t\t\t\t\tframe.collapsed.set(true, tx);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async loadFrame(replacing: SkippedCallFrames): Promise<void> {\n\t\tif (!this.cts) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frames = await replacing.load(this.cts.token);\n\t\tif (this.cts.token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = this.list.indexOf(replacing);\n\t\tthis.list.splice(index, 1, this.mapFrames(frames));\n\t}\n\n\tprivate mapFrames(frames: AnyStackFrame[]): ListItem[] {\n\t\tconst result: ListItem[] = [];\n\t\tfor (const frame of frames) {\n\t\t\tif (frame instanceof SkippedCallFrames) {\n\t\t\t\tresult.push(frame);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst wrapped = frame instanceof CustomStackFrame\n\t\t\t\t? new WrappedCustomStackFrame(frame) : new WrappedCallStackFrame(frame);\n\t\t\tresult.push(wrapped);\n\n\t\t\tthis.currentFramesDs.add(autorun(reader => {\n\t\t\t\tconst height = wrapped.height.read(reader);\n\t\t\t\tconst idx = this.list.indexOf(wrapped);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tthis.list.updateElementHeight(idx, height);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass StackAccessibilityProvider implements IListAccessibilityProvider<ListItem> {\n\tconstructor(@ILabelService private readonly labelService: ILabelService) { }\n\n\tgetAriaLabel(e: ListItem): string | IObservable<string> | null {\n\t\tif (e instanceof SkippedCallFrames) {\n\t\t\treturn e.label;\n\t\t}\n\n\t\tif (e instanceof WrappedCustomStackFrame) {\n\t\t\treturn e.original.label;\n\t\t}\n\n\t\tif (e instanceof CallStackFrame) {\n\t\t\tif (e.source && e.line) {\n\t\t\t\treturn localize({\n\t\t\t\t\tcomment: ['{0} is an extension-defined label, then line number and filename'],\n\t\t\t\t\tkey: 'stackTraceLabel',\n\t\t\t\t}, '{0}, line {1} in {2}', e.name, e.line, this.labelService.getUriLabel(e.source, { relative: true }));\n\t\t\t}\n\n\t\t\treturn e.name;\n\t\t}\n\n\t\tassertNever(e);\n\t}\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('stackTrace', 'Stack Trace');\n\t}\n}\n\nclass StackDelegate implements IListVirtualDelegate<ListItem> {\n\tgetHeight(element: ListItem): number {\n\t\tif (element instanceof CallStackFrame || element instanceof WrappedCustomStackFrame) {\n\t\t\treturn element.height.get();\n\t\t}\n\t\tif (element instanceof SkippedCallFrames) {\n\t\t\treturn CALL_STACK_WIDGET_HEADER_HEIGHT;\n\t\t}\n\n\t\tassertNever(element);\n\t}\n\n\tgetTemplateId(element: ListItem): string {\n\t\tif (element instanceof CallStackFrame) {\n\t\t\treturn element.source ? FrameCodeRenderer.templateId : MissingCodeRenderer.templateId;\n\t\t}\n\t\tif (element instanceof SkippedCallFrames) {\n\t\t\treturn SkippedRenderer.templateId;\n\t\t}\n\t\tif (element instanceof WrappedCustomStackFrame) {\n\t\t\treturn CustomRenderer.templateId;\n\t\t}\n\n\t\tassertNever(element);\n\t}\n}\n\ninterface IStackTemplateData extends IAbstractFrameRendererTemplateData {\n\teditor: CodeEditorWidget;\n\ttoolbar: MenuWorkbenchToolBar;\n}\n\nconst editorOptions: IEditorOptions = {\n\tscrollBeyondLastLine: false,\n\tscrollbar: {\n\t\tvertical: 'hidden',\n\t\thorizontal: 'hidden',\n\t\thandleMouseWheel: false,\n\t\tuseShadows: false,\n\t},\n\toverviewRulerLanes: 0,\n\tfixedOverflowWidgets: true,\n\toverviewRulerBorder: false,\n\tstickyScroll: { enabled: false },\n\tminimap: { enabled: false },\n\treadOnly: true,\n\tautomaticLayout: false,\n};\n\nconst makeFrameElements = () => dom.h('div.multiCallStackFrame', [\n\tdom.h('div.header@header', [\n\t\tdom.h('div.collapse-button@collapseButton'),\n\t\tdom.h('div.title.show-file-icons@title'),\n\t\tdom.h('div.actions@actions'),\n\t]),\n\n\tdom.h('div.editorParent', [\n\t\tdom.h('div.editorContainer@editor'),\n\t])\n]);\n\nexport const CALL_STACK_WIDGET_HEADER_HEIGHT = 24;\n\ninterface IAbstractFrameRendererTemplateData {\n\tcontainer: HTMLElement;\n\tlabel: ResourceLabel;\n\telements: ReturnType<typeof makeFrameElements>;\n\tdecorations: string[];\n\tcollapse: Button;\n\telementStore: DisposableStore;\n\ttemplateStore: DisposableStore;\n}\n\nabstract class AbstractFrameRenderer<T extends IAbstractFrameRendererTemplateData> implements IListRenderer<ListItem, T> {\n\tpublic abstract templateId: string;\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): T {\n\t\tconst elements = makeFrameElements();\n\t\tcontainer.appendChild(elements.root);\n\n\n\t\tconst templateStore = new DisposableStore();\n\t\tcontainer.classList.add('multiCallStackFrameContainer');\n\t\ttemplateStore.add(toDisposable(() => {\n\t\t\tcontainer.classList.remove('multiCallStackFrameContainer');\n\t\t\telements.root.remove();\n\t\t}));\n\n\t\tconst label = templateStore.add(this.instantiationService.createInstance(ResourceLabel, elements.title, {}));\n\n\t\tconst collapse = templateStore.add(new Button(elements.collapseButton, {}));\n\n\t\tconst contentId = generateUuid();\n\t\telements.editor.id = contentId;\n\t\telements.editor.role = 'region';\n\t\telements.collapseButton.setAttribute('aria-controls', contentId);\n\n\t\treturn this.finishRenderTemplate({\n\t\t\tcontainer,\n\t\t\tdecorations: [],\n\t\t\telements,\n\t\t\tlabel,\n\t\t\tcollapse,\n\t\t\telementStore: templateStore.add(new DisposableStore()),\n\t\t\ttemplateStore,\n\t\t});\n\t}\n\n\tprotected abstract finishRenderTemplate(data: IAbstractFrameRendererTemplateData): T;\n\n\trenderElement(element: ListItem, index: number, template: T): void {\n\t\tconst { elementStore } = template;\n\t\telementStore.clear();\n\t\tconst item = element as IFrameLikeItem;\n\n\t\tthis.setupCollapseButton(item, template);\n\t}\n\n\tprivate setupCollapseButton(item: IFrameLikeItem, { elementStore, elements, collapse }: T) {\n\t\telementStore.add(autorun(reader => {\n\t\t\tcollapse.element.className = '';\n\t\t\tconst collapsed = item.collapsed.read(reader);\n\t\t\tcollapse.icon = collapsed ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t\tcollapse.element.ariaExpanded = String(!collapsed);\n\t\t\telements.root.classList.toggle('collapsed', collapsed);\n\t\t}));\n\t\tconst toggleCollapse = () => item.collapsed.set(!item.collapsed.get(), undefined);\n\t\telementStore.add(collapse.onDidClick(toggleCollapse));\n\t\telementStore.add(dom.addDisposableListener(elements.title, 'click', toggleCollapse));\n\t}\n\n\tdisposeElement(element: ListItem, index: number, templateData: T): void {\n\t\ttemplateData.elementStore.clear();\n\t}\n\n\tdisposeTemplate(templateData: T): void {\n\t\ttemplateData.templateStore.dispose();\n\t}\n}\n\nconst CONTEXT_LINES = 2;\n\n/** Renderer for a normal stack frame where code is available. */\nclass FrameCodeRenderer extends AbstractFrameRenderer<IStackTemplateData> {\n\tpublic static readonly templateId = 'f';\n\n\tpublic readonly templateId = FrameCodeRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly containingEditor: ICodeEditor | undefined,\n\t\tprivate readonly onLayout: Event<void>,\n\t\t@ITextModelService private readonly modelService: ITextModelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(instantiationService);\n\t}\n\n\tprotected override finishRenderTemplate(data: IAbstractFrameRendererTemplateData): IStackTemplateData {\n\t\t// override default e.g. language contributions, only allow users to click\n\t\t// on code in the call stack to go to its source location\n\t\tconst contributions: IEditorContributionDescription[] = [{\n\t\t\tid: ClickToLocationContribution.ID,\n\t\t\tinstantiation: EditorContributionInstantiation.BeforeFirstInteraction,\n\t\t\tctor: ClickToLocationContribution as EditorContributionCtor,\n\t\t}];\n\n\t\tconst editor = this.containingEditor\n\t\t\t? this.instantiationService.createInstance(\n\t\t\t\tEmbeddedCodeEditorWidget,\n\t\t\t\tdata.elements.editor,\n\t\t\t\teditorOptions,\n\t\t\t\t{ isSimpleWidget: true, contributions },\n\t\t\t\tthis.containingEditor,\n\t\t\t)\n\t\t\t: this.instantiationService.createInstance(\n\t\t\t\tCodeEditorWidget,\n\t\t\t\tdata.elements.editor,\n\t\t\t\teditorOptions,\n\t\t\t\t{ isSimpleWidget: true, contributions },\n\t\t\t);\n\n\t\tdata.templateStore.add(editor);\n\n\t\tconst toolbar = data.templateStore.add(this.instantiationService.createInstance(MenuWorkbenchToolBar, data.elements.actions, MenuId.DebugCallStackToolbar, {\n\t\t\tmenuOptions: { shouldForwardArgs: true },\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(this.instantiationService, action, options),\n\t\t}));\n\n\t\treturn { ...data, editor, toolbar };\n\t}\n\n\toverride renderElement(element: ListItem, index: number, template: IStackTemplateData): void {\n\t\tsuper.renderElement(element, index, template);\n\n\t\tconst { elementStore, editor } = template;\n\n\t\tconst item = element as WrappedCallStackFrame;\n\t\tconst uri = item.source!;\n\n\t\ttemplate.label.element.setFile(uri);\n\t\tconst cts = new CancellationTokenSource();\n\t\telementStore.add(toDisposable(() => cts.dispose(true)));\n\t\tthis.modelService.createModelReference(uri).then(reference => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn reference.dispose();\n\t\t\t}\n\n\t\t\telementStore.add(reference);\n\t\t\teditor.setModel(reference.object.textEditorModel);\n\t\t\tthis.setupEditorAfterModel(item, template);\n\t\t\tthis.setupEditorLayout(item, template);\n\t\t});\n\t}\n\n\tprivate setupEditorLayout(item: WrappedCallStackFrame, { elementStore, container, editor }: IStackTemplateData) {\n\t\tconst layout = () => {\n\t\t\tconst prev = editor.getContentHeight();\n\t\t\teditor.layout({ width: container.clientWidth, height: prev });\n\n\t\t\tconst next = editor.getContentHeight();\n\t\t\tif (next !== prev) {\n\t\t\t\teditor.layout({ width: container.clientWidth, height: next });\n\t\t\t}\n\n\t\t\titem.editorHeight.set(next, undefined);\n\t\t};\n\t\telementStore.add(editor.onDidChangeModelDecorations(layout));\n\t\telementStore.add(editor.onDidChangeModelContent(layout));\n\t\telementStore.add(editor.onDidChangeModelOptions(layout));\n\t\telementStore.add(this.onLayout(layout));\n\t\tlayout();\n\t}\n\n\tprivate setupEditorAfterModel(item: WrappedCallStackFrame, template: IStackTemplateData): void {\n\t\tconst range = Range.fromPositions({\n\t\t\tcolumn: item.column ?? 1,\n\t\t\tlineNumber: item.line ?? 1,\n\t\t});\n\n\t\ttemplate.toolbar.context = { uri: item.source, range };\n\n\t\ttemplate.editor.setHiddenAreas([\n\t\t\tRange.fromPositions(\n\t\t\t\t{ column: 1, lineNumber: 1 },\n\t\t\t\t{ column: 1, lineNumber: Math.max(1, item.line - CONTEXT_LINES - 1) },\n\t\t\t),\n\t\t\tRange.fromPositions(\n\t\t\t\t{ column: 1, lineNumber: item.line + CONTEXT_LINES + 1 },\n\t\t\t\t{ column: 1, lineNumber: Constants.MAX_SAFE_SMALL_INTEGER },\n\t\t\t),\n\t\t]);\n\n\t\ttemplate.editor.changeDecorations(accessor => {\n\t\t\tfor (const d of template.decorations) {\n\t\t\t\taccessor.removeDecoration(d);\n\t\t\t}\n\t\t\ttemplate.decorations.length = 0;\n\n\t\t\tconst beforeRange = range.setStartPosition(range.startLineNumber, 1);\n\t\t\tconst hasCharactersBefore = !!template.editor.getModel()?.getValueInRange(beforeRange).trim();\n\t\t\tconst decoRange = range.setEndPosition(range.startLineNumber, Constants.MAX_SAFE_SMALL_INTEGER);\n\n\t\t\ttemplate.decorations.push(accessor.addDecoration(\n\t\t\t\tdecoRange,\n\t\t\t\tmakeStackFrameColumnDecoration(!hasCharactersBefore),\n\t\t\t));\n\t\t\ttemplate.decorations.push(accessor.addDecoration(\n\t\t\t\tdecoRange,\n\t\t\t\tTOP_STACK_FRAME_DECORATION,\n\t\t\t));\n\t\t});\n\n\t\titem.editorHeight.set(template.editor.getContentHeight(), undefined);\n\t}\n}\n\ninterface IMissingTemplateData {\n\telements: ReturnType<typeof makeFrameElements>;\n\tlabel: ResourceLabel;\n}\n\n/** Renderer for a call frame that's missing a URI */\nclass MissingCodeRenderer implements IListRenderer<ListItem, IMissingTemplateData> {\n\tpublic static readonly templateId = 'm';\n\tpublic readonly templateId = MissingCodeRenderer.templateId;\n\n\tconstructor(@IInstantiationService private readonly instantiationService: IInstantiationService) { }\n\n\trenderTemplate(container: HTMLElement): IMissingTemplateData {\n\t\tconst elements = makeFrameElements();\n\t\telements.root.classList.add('missing');\n\t\tcontainer.appendChild(elements.root);\n\t\tconst label = this.instantiationService.createInstance(ResourceLabel, elements.title, {});\n\t\treturn { elements, label };\n\t}\n\n\trenderElement(element: ListItem, _index: number, templateData: IMissingTemplateData): void {\n\t\tconst cast = element as CallStackFrame;\n\t\ttemplateData.label.element.setResource({\n\t\t\tname: cast.name,\n\t\t\tdescription: localize('stackFrameLocation', 'Line {0} column {1}', cast.line, cast.column),\n\t\t\trange: { startLineNumber: cast.line, startColumn: cast.column, endColumn: cast.column, endLineNumber: cast.line },\n\t\t}, {\n\t\t\ticon: Codicon.fileBinary,\n\t\t});\n\t}\n\n\tdisposeTemplate(templateData: IMissingTemplateData): void {\n\t\ttemplateData.label.dispose();\n\t\ttemplateData.elements.root.remove();\n\t}\n}\n\n/** Renderer for a call frame that's missing a URI */\nclass CustomRenderer extends AbstractFrameRenderer<IAbstractFrameRendererTemplateData> {\n\tpublic static readonly templateId = 'c';\n\tpublic readonly templateId = CustomRenderer.templateId;\n\n\tprotected override finishRenderTemplate(data: IAbstractFrameRendererTemplateData): IAbstractFrameRendererTemplateData {\n\t\treturn data;\n\t}\n\n\toverride renderElement(element: ListItem, index: number, template: IAbstractFrameRendererTemplateData): void {\n\t\tsuper.renderElement(element, index, template);\n\n\t\tconst item = element as WrappedCustomStackFrame;\n\t\tconst { elementStore, container, label } = template;\n\n\t\tlabel.element.setResource({ name: item.original.label }, { icon: item.original.icon });\n\n\t\telementStore.add(autorun(reader => {\n\t\t\ttemplate.elements.header.style.display = item.original.showHeader.read(reader) ? '' : 'none';\n\t\t}));\n\n\t\telementStore.add(autorunWithStore((reader, store) => {\n\t\t\tif (!item.collapsed.read(reader)) {\n\t\t\t\tstore.add(item.original.render(container));\n\t\t\t}\n\t\t}));\n\n\t\tconst actions = item.original.renderActions?.(template.elements.actions);\n\t\tif (actions) {\n\t\t\telementStore.add(actions);\n\t\t}\n\t}\n}\n\ninterface ISkippedTemplateData {\n\tbutton: Button;\n\tcurrent?: SkippedCallFrames;\n\tstore: DisposableStore;\n}\n\n/** Renderer for a button to load more call frames */\nclass SkippedRenderer implements IListRenderer<ListItem, ISkippedTemplateData> {\n\tpublic static readonly templateId = 's';\n\tpublic readonly templateId = SkippedRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly loadFrames: (fromItem: SkippedCallFrames) => Promise<void>,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ISkippedTemplateData {\n\t\tconst store = new DisposableStore();\n\t\tconst button = new Button(container, { title: '', ...defaultButtonStyles });\n\t\tconst data: ISkippedTemplateData = { button, store };\n\n\t\tstore.add(button);\n\t\tstore.add(button.onDidClick(() => {\n\t\t\tif (!data.current || !button.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbutton.enabled = false;\n\t\t\tthis.loadFrames(data.current).catch(e => {\n\t\t\t\tthis.notificationService.error(localize('failedToLoadFrames', 'Failed to load stack frames: {0}', e.message));\n\t\t\t});\n\t\t}));\n\n\t\treturn data;\n\t}\n\n\trenderElement(element: ListItem, index: number, templateData: ISkippedTemplateData): void {\n\t\tconst cast = element as SkippedCallFrames;\n\t\ttemplateData.button.enabled = true;\n\t\ttemplateData.button.label = cast.label;\n\t\ttemplateData.current = cast;\n\t}\n\n\tdisposeTemplate(templateData: ISkippedTemplateData): void {\n\t\ttemplateData.store.dispose();\n\t}\n}\n\n/** A simple contribution that makes all data in the editor clickable to go to the location */\nclass ClickToLocationContribution extends Disposable implements IEditorContribution {\n\tpublic static readonly ID = 'clickToLocation';\n\tprivate readonly linkDecorations: IEditorDecorationsCollection;\n\tprivate current: { line: number; word: IWordAtPosition } | undefined;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IEditorService editorService: IEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.linkDecorations = editor.createDecorationsCollection();\n\t\tthis._register(toDisposable(() => this.linkDecorations.clear()));\n\n\t\tconst clickLinkGesture = this._register(new ClickLinkGesture(editor));\n\n\t\tthis._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n\t\t\tthis.onMove(mouseEvent);\n\t\t}));\n\t\tthis._register(clickLinkGesture.onExecute((e) => {\n\t\t\tconst model = this.editor.getModel();\n\t\t\tif (!this.current || !model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\teditorService.openEditor({\n\t\t\t\tresource: model.uri,\n\t\t\t\toptions: {\n\t\t\t\t\tselection: Range.fromPositions(new Position(this.current.line, this.current.word.startColumn)),\n\t\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t\t},\n\t\t\t}, e.hasSideBySideModifier ? SIDE_GROUP : undefined);\n\t\t}));\n\t}\n\n\tprivate onMove(mouseEvent: ClickLinkMouseEvent) {\n\t\tif (!mouseEvent.hasTriggerModifier) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst position = mouseEvent.target.position;\n\t\tconst word = position && this.editor.getModel()?.getWordAtPosition(position);\n\t\tif (!word) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst prev = this.current?.word;\n\t\tif (prev && prev.startColumn === word.startColumn && prev.endColumn === word.endColumn && prev.word === word.word) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.current = { word, line: position.lineNumber };\n\t\tthis.linkDecorations.set([{\n\t\t\trange: new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn),\n\t\t\toptions: {\n\t\t\t\tdescription: 'call-stack-go-to-file-link',\n\t\t\t\tinlineClassName: 'call-stack-go-to-file-link',\n\t\t\t},\n\t\t}]);\n\t}\n\n\tprivate clear() {\n\t\tthis.linkDecorations.clear();\n\t\tthis.current = undefined;\n\t}\n}\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'callStackWidget.goToFile',\n\t\t\ttitle: localize2('goToFile', 'Open File'),\n\t\t\ticon: Codicon.goToFile,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.DebugCallStackToolbar,\n\t\t\t\torder: 22,\n\t\t\t\tgroup: 'navigation',\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, { uri, range }: Location): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tawait editorService.openEditor({\n\t\t\tresource: uri,\n\t\t\toptions: {\n\t\t\t\tselection: range,\n\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t},\n\t\t});\n\t}\n});\n"]}