{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/debug/browser/debugProgress.ts","vs/workbench/contrib/debug/browser/debugProgress.ts"],"names":[],"mappings":"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","file":"debugProgress.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../base/common/event.js';\nimport { IDisposable, dispose } from '../../../../base/common/lifecycle.js';\nimport { IProgressService, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IDebugService, IDebugSession, VIEWLET_ID } from '../common/debug.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\n\nexport class DebugProgressContribution implements IWorkbenchContribution {\n\n\tprivate toDispose: IDisposable[] = [];\n\n\tconstructor(\n\t\t@IDebugService debugService: IDebugService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IViewsService viewsService: IViewsService\n\t) {\n\t\tlet progressListener: IDisposable | undefined;\n\t\tconst listenOnProgress = (session: IDebugSession | undefined) => {\n\t\t\tif (progressListener) {\n\t\t\t\tprogressListener.dispose();\n\t\t\t\tprogressListener = undefined;\n\t\t\t}\n\t\t\tif (session) {\n\t\t\t\tprogressListener = session.onDidProgressStart(async progressStartEvent => {\n\t\t\t\t\tconst promise = new Promise<void>(r => {\n\t\t\t\t\t\t// Show progress until a progress end event comes or the session ends\n\t\t\t\t\t\tconst listener = Event.any(Event.filter(session.onDidProgressEnd, e => e.body.progressId === progressStartEvent.body.progressId),\n\t\t\t\t\t\t\tsession.onDidEndAdapter)(() => {\n\t\t\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\t\t\tr();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tif (viewsService.isViewContainerVisible(VIEWLET_ID)) {\n\t\t\t\t\t\tprogressService.withProgress({ location: VIEWLET_ID }, () => promise);\n\t\t\t\t\t}\n\t\t\t\t\tconst source = debugService.getAdapterManager().getDebuggerLabel(session.configuration.type);\n\t\t\t\t\tprogressService.withProgress({\n\t\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\t\ttitle: progressStartEvent.body.title,\n\t\t\t\t\t\tcancellable: progressStartEvent.body.cancellable,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tdelay: 500\n\t\t\t\t\t}, progressStep => {\n\t\t\t\t\t\tlet total = 0;\n\t\t\t\t\t\tconst reportProgress = (progress: { message?: string; percentage?: number }) => {\n\t\t\t\t\t\t\tlet increment = undefined;\n\t\t\t\t\t\t\tif (typeof progress.percentage === 'number') {\n\t\t\t\t\t\t\t\tincrement = progress.percentage - total;\n\t\t\t\t\t\t\t\ttotal += increment;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprogressStep.report({\n\t\t\t\t\t\t\t\tmessage: progress.message,\n\t\t\t\t\t\t\t\tincrement,\n\t\t\t\t\t\t\t\ttotal: typeof increment === 'number' ? 100 : undefined,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (progressStartEvent.body.message) {\n\t\t\t\t\t\t\treportProgress(progressStartEvent.body);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst progressUpdateListener = session.onDidProgressUpdate(e => {\n\t\t\t\t\t\t\tif (e.body.progressId === progressStartEvent.body.progressId) {\n\t\t\t\t\t\t\t\treportProgress(e.body);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn promise.then(() => progressUpdateListener.dispose());\n\t\t\t\t\t}, () => session.cancel(progressStartEvent.body.progressId));\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tthis.toDispose.push(debugService.getViewModel().onDidFocusSession(listenOnProgress));\n\t\tlistenOnProgress(debugService.getViewModel().focusedSession);\n\t\tthis.toDispose.push(debugService.onWillNewSession(session => {\n\t\t\tif (!progressListener) {\n\t\t\t\tlistenOnProgress(session);\n\t\t\t}\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.toDispose);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../base/common/event.js';\nimport { IDisposable, dispose } from '../../../../base/common/lifecycle.js';\nimport { IProgressService, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IDebugService, IDebugSession, VIEWLET_ID } from '../common/debug.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\n\nexport class DebugProgressContribution implements IWorkbenchContribution {\n\n\tprivate toDispose: IDisposable[] = [];\n\n\tconstructor(\n\t\t@IDebugService debugService: IDebugService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IViewsService viewsService: IViewsService\n\t) {\n\t\tlet progressListener: IDisposable | undefined;\n\t\tconst listenOnProgress = (session: IDebugSession | undefined) => {\n\t\t\tif (progressListener) {\n\t\t\t\tprogressListener.dispose();\n\t\t\t\tprogressListener = undefined;\n\t\t\t}\n\t\t\tif (session) {\n\t\t\t\tprogressListener = session.onDidProgressStart(async progressStartEvent => {\n\t\t\t\t\tconst promise = new Promise<void>(r => {\n\t\t\t\t\t\t// Show progress until a progress end event comes or the session ends\n\t\t\t\t\t\tconst listener = Event.any(Event.filter(session.onDidProgressEnd, e => e.body.progressId === progressStartEvent.body.progressId),\n\t\t\t\t\t\t\tsession.onDidEndAdapter)(() => {\n\t\t\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\t\t\tr();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\tif (viewsService.isViewContainerVisible(VIEWLET_ID)) {\n\t\t\t\t\t\tprogressService.withProgress({ location: VIEWLET_ID }, () => promise);\n\t\t\t\t\t}\n\t\t\t\t\tconst source = debugService.getAdapterManager().getDebuggerLabel(session.configuration.type);\n\t\t\t\t\tprogressService.withProgress({\n\t\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\t\ttitle: progressStartEvent.body.title,\n\t\t\t\t\t\tcancellable: progressStartEvent.body.cancellable,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tdelay: 500\n\t\t\t\t\t}, progressStep => {\n\t\t\t\t\t\tlet total = 0;\n\t\t\t\t\t\tconst reportProgress = (progress: { message?: string; percentage?: number }) => {\n\t\t\t\t\t\t\tlet increment = undefined;\n\t\t\t\t\t\t\tif (typeof progress.percentage === 'number') {\n\t\t\t\t\t\t\t\tincrement = progress.percentage - total;\n\t\t\t\t\t\t\t\ttotal += increment;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprogressStep.report({\n\t\t\t\t\t\t\t\tmessage: progress.message,\n\t\t\t\t\t\t\t\tincrement,\n\t\t\t\t\t\t\t\ttotal: typeof increment === 'number' ? 100 : undefined,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (progressStartEvent.body.message) {\n\t\t\t\t\t\t\treportProgress(progressStartEvent.body);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst progressUpdateListener = session.onDidProgressUpdate(e => {\n\t\t\t\t\t\t\tif (e.body.progressId === progressStartEvent.body.progressId) {\n\t\t\t\t\t\t\t\treportProgress(e.body);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn promise.then(() => progressUpdateListener.dispose());\n\t\t\t\t\t}, () => session.cancel(progressStartEvent.body.progressId));\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tthis.toDispose.push(debugService.getViewModel().onDidFocusSession(listenOnProgress));\n\t\tlistenOnProgress(debugService.getViewModel().focusedSession);\n\t\tthis.toDispose.push(debugService.onWillNewSession(session => {\n\t\t\tif (!progressListener) {\n\t\t\t\tlistenOnProgress(session);\n\t\t\t}\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.toDispose);\n\t}\n}\n"]}