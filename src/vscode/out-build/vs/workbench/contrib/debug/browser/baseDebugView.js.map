{"version":3,"sources":["vs/workbench/contrib/debug/browser/baseDebugView.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,iCAAiC,CAAC;AAEvD,OAAO,EAAE,SAAS,EAAE,MAAM,oDAAoD,CAAC;AAC/E,OAAO,EAAE,gBAAgB,EAAc,MAAM,kEAAkE,CAAC;AAChH,OAAO,EAAE,uBAAuB,EAAE,MAAM,2DAA2D,CAAC;AACpG,OAAO,EAA2B,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAGrG,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAc,aAAa,EAAE,MAAM,oCAAoC,CAAC;AAC/E,OAAO,EAAE,wBAAwB,EAAE,MAAM,uCAAuC,CAAC;AAEjF,OAAO,EAAE,eAAe,EAAe,OAAO,EAAE,YAAY,EAAE,MAAM,sCAAsC,CAAC;AAC3G,OAAO,EAAE,qBAAqB,EAAE,MAAM,oCAAoC,CAAC;AAC3E,OAAO,EAAE,SAAS,EAAE,MAAM,sCAAsC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAE9C,OAAO,EAAE,mBAAmB,EAAE,MAAM,yDAAyD,CAAC;AAC9F,OAAO,EAAE,aAAa,EAAE,MAAM,6CAA6C,CAAC;AAC5E,OAAO,EAAE,qBAAqB,EAAE,MAAM,qDAAqD,CAAC;AAC5F,OAAO,EAAE,aAAa,EAAuB,MAAM,oBAAoB,CAAC;AACxE,OAAO,EAAE,QAAQ,EAAE,MAAM,yBAAyB,CAAC;AACnD,OAAO,EAAE,uBAAuB,EAAE,MAAM,+BAA+B,CAAC;AAGxE,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAuBhB,MAAM,UAAU,cAAc,CAAC,SAAsB;IACpD,MAAM,aAAa,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IAC7B,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,oBAAoB,EAAE,yBAAyB,CAAC,CAAC;IAC7E,SAAS,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;IACrC,OAAO,aAAa,CAAC;AACtB,CAAC;AAwBD,yFAAyF;AACzF,MAAM,CAAC,MAAM,gCAAgC,GAAG,CAAC,CAAuB,EAAE,UAAwB,EAAE,EAAE;IACrG,MAAM,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;IACjC,MAAM,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;IACxC,MAAM,IAAI,GAAiB,EAAE,CAAC;IAC9B,MAAM,KAAK,GAAiB,EAAE,CAAC;IAC/B,KAAK,MAAM,EAAE,IAAI,UAAU,EAAE,CAAC;QAC7B,IAAI,EAAE,CAAC,KAAK,GAAG,UAAU,EAAE,CAAC;YAC3B,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,UAAU,CAAC,EAAE,CAAC,CAAC;QACnE,CAAC;QACD,IAAI,EAAE,CAAC,GAAG,GAAG,aAAa,EAAE,CAAC;YAC5B,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,KAAK,GAAG,aAAa,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,aAAa,EAAE,CAAC,CAAC;QAC3F,CAAC;IACF,CAAC;IAED,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AACxB,CAAC,CAAC;AAEF,sEAAsE;AACtE,MAAM,CAAC,MAAM,+BAA+B,GAA2D;IACtG,0BAA0B,CAAC,CAAC;QAC3B,MAAM,SAAS,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE,sBAAsB,EAAE,mBAAmB,CAAC;QAC9E,OAAO,GAAG,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;IAC7E,CAAC;CACD,CAAC;AAEK,IAAe,4BAA4B,GAA3C,MAAe,4BAA4B;IACjD,YAC0B,YAA2B,EACjB,eAAwC;QADlD,iBAAY,GAAZ,YAAY,CAAe;QACjB,oBAAe,GAAf,eAAe,CAAyB;IACxE,CAAC;IAIE,KAAK,CAAC,WAAW,CAAC,OAAwB;QAChD,MAAM,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;QAC5C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACnD,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAC,CAAC,EAAC,EAAE;YACzC,MAAM,SAAS,GAAG,EAAE,CAAC,uBAAuB,CAAC,CAAgB,CAAC,CAAC;YAC/D,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE,CAAC;gBACnC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,oBAAoB,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBAC1E,IAAI,GAAG,EAAE,CAAC;oBACT,EAAE,CAAC,uBAAuB,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;oBACnC,OAAO,GAA6B,CAAC;gBACtC,CAAC;YACF,CAAC;iBAAM,IAAI,SAAS,EAAE,CAAC;gBACtB,OAAO,SAAoB,CAAC;YAC7B,CAAC;YAGD,OAAO,CAAC,CAAC;QACV,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;CAGD,CAAA;AA7BqB,4BAA4B;IAE/C,WAAA,aAAa,CAAA;IACb,WAAA,uBAAuB,CAAA;GAHJ,4BAA4B,CA6BjD;;AAEM,IAAe,2BAA2B,GAA1C,MAAe,2BAA2B;IAEhD,YAC0B,YAA2B,EACd,kBAAuC,EAC3C,YAA2B;QAFpC,iBAAY,GAAZ,YAAY,CAAe;QACd,uBAAkB,GAAlB,kBAAkB,CAAqB;QAC3C,iBAAY,GAAZ,YAAY,CAAe;IAC1D,CAAC;IAIL,cAAc,CAAC,SAAsB;QACpC,MAAM,kBAAkB,GAAG,IAAI,eAAe,EAAE,CAAC;QACjD,MAAM,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;QAC3D,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;QACpD,MAAM,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACjE,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;QAErE,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,OAAO,CAAC,EAAE,UAAU,EAAE,QAAQ,CAAC,IAA0B,EAAE,IAAiB,CAAC,CAAC,CAAC,CAAC;QACnK,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;QAEpD,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;QAEtD,MAAM,KAAK,GAAG,kBAAkB,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC;QAEjE,MAAM,iBAAiB,GAAG,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAE1E,IAAI,SAAgC,CAAC;QACrC,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAAC;YACpD,SAAS,GAAG,kBAAkB,CAAC,GAAG,CAAC,IAAI,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;QAC/D,CAAC;QAED,MAAM,QAAQ,GAA4B,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,iBAAiB,EAAE,SAAS,EAAE,iBAAiB,EAAE,IAAI,eAAe,EAAE,EAAE,kBAAkB,EAAE,UAAU,EAAE,cAAc,EAAE,SAAS,EAAE,CAAC;QAEtN,kBAAkB,CAAC,GAAG,CAAC,GAAG,CAAC,qBAAqB,CAAC,UAAU,EAAE,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,GAAG,EAAE;YACtF,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,sBAAsB,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YAClF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,OAAO,QAAQ,CAAC;IACjB,CAAC;IAIS,uBAAuB,CAAC,OAAoB,EAAE,IAA8B,EAAE,IAA6B;QACpH,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC;QAC9B,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;QAC1E,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACpB,IAAI,CAAC,eAAgB,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;QACtD,CAAC;QACD,MAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,qBAAqB,EAAE,CAAC;QACpF,IAAI,OAAO,KAAK,kBAAkB,EAAE,UAAU,IAAI,CAAC,OAAO,YAAY,QAAQ,IAAI,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC;YACzG,MAAM,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC,CAAC,kBAAkB,EAAE,YAAY,CAAC,CAAC;YACrF,IAAI,OAAO,EAAE,CAAC;gBACb,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC,CAAC;YACzG,CAAC;QACF,CAAC;IACF,CAAC;IAED,cAAc,CAAC,WAAwB,EAAE,YAAyB,EAAE,iBAA8B,EAAE,OAAyB;QAC5H,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACnC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACpC,iBAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,SAAS,CAAC;QAC5C,GAAG,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;QAEjC,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,kBAAkB,EAAE,EAAE,GAAG,OAAO,EAAE,cAAc,EAAE,qBAAqB,EAAE,CAAC,CAAC;QAEjI,QAAQ,CAAC,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC;QACtC,QAAQ,CAAC,KAAK,EAAE,CAAC;QACjB,QAAQ,CAAC,MAAM,EAAE,CAAC;QAElB,MAAM,IAAI,GAAG,wBAAwB,CAAC,CAAC,OAAgB,EAAE,aAAsB,EAAE,EAAE;YAClF,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;YAC/B,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;YAChC,iBAAiB,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YACzC,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC7B,OAAO,CAAC,SAAS,CAAC,CAAC;YAEnB,IAAI,aAAa,EAAE,CAAC;gBACnB,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC,qBAAqB,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;gBACzE,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YAClC,CAAC;QACF,CAAC,CAAC,CAAC;QAEH,MAAM,SAAS,GAAG;YACjB,QAAQ;YACR,GAAG,CAAC,6BAA6B,CAAC,QAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAiB,EAAE,EAAE;gBACtG,MAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,wBAAgB,CAAC;gBAC1C,MAAM,OAAO,GAAG,CAAC,CAAC,MAAM,uBAAe,CAAC;gBACxC,IAAI,QAAQ,IAAI,OAAO,EAAE,CAAC;oBACzB,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;oBACpB,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;gBACrB,CAAC;YACF,CAAC,CAAC;YACF,GAAG,CAAC,qBAAqB,CAAC,QAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,EAAE;gBACzE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAClB,CAAC,CAAC;YACF,GAAG,CAAC,qBAAqB,CAAC,QAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE;gBACzE,6CAA6C;gBAC7C,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;YACrB,CAAC,CAAC;SACF,CAAC;QAEF,OAAO,YAAY,CAAC,GAAG,EAAE;YACxB,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IAOD,cAAc,CAAC,IAA8B,EAAE,KAAa,EAAE,YAAqC;QAClG,YAAY,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;IACxC,CAAC;IAED,eAAe,CAAC,YAAqC;QACpD,YAAY,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;QACzC,YAAY,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC;IAC3C,CAAC;CACD,CAAA;AA5HqB,2BAA2B;IAG9C,WAAA,aAAa,CAAA;IACb,WAAA,mBAAmB,CAAA;IACnB,WAAA,aAAa,CAAA;GALM,2BAA2B,CA4HhD","file":"baseDebugView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { HighlightedLabel, IHighlight } from '../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IInputValidationOptions, InputBox } from '../../../../base/browser/ui/inputbox/inputBox.js';\nimport { IKeyboardNavigationLabelProvider } from '../../../../base/browser/ui/list/list.js';\nimport { IAsyncDataSource, ITreeNode, ITreeRenderer } from '../../../../base/browser/ui/tree/tree.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { FuzzyScore, createMatches } from '../../../../base/common/filters.js';\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore, IDisposable, dispose, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { removeAnsiEscapeCodes } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { defaultInputBoxStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { IDebugService, IExpression, IScope } from '../common/debug.js';\nimport { Variable } from '../common/debugModel.js';\nimport { IDebugVisualizerService } from '../common/debugVisualizers.js';\nimport { LinkDetector } from './linkDetector.js';\n\nconst $ = dom.$;\n\nexport interface IRenderValueOptions {\n\tshowChanged?: boolean;\n\tmaxValueLength?: number;\n\t/** If set, a hover will be shown on the element. Requires a disposable store for usage. */\n\thover?: false | {\n\t\tcommands: { id: string; args: unknown[] }[];\n\t\tcommandService: ICommandService;\n\t};\n\tcolorize?: boolean;\n\tlinkDetector?: LinkDetector;\n}\n\nexport interface IVariableTemplateData {\n\texpression: HTMLElement;\n\tname: HTMLElement;\n\ttype: HTMLElement;\n\tvalue: HTMLElement;\n\tlabel: HighlightedLabel;\n\tlazyButton: HTMLElement;\n}\n\nexport function renderViewTree(container: HTMLElement): HTMLElement {\n\tconst treeContainer = $('.');\n\ttreeContainer.classList.add('debug-view-content', 'file-icon-themable-tree');\n\tcontainer.appendChild(treeContainer);\n\treturn treeContainer;\n}\n\nexport interface IInputBoxOptions {\n\tinitialValue: string;\n\tariaLabel: string;\n\tplaceholder?: string;\n\tvalidationOptions?: IInputValidationOptions;\n\tonFinish: (value: string, success: boolean) => void;\n}\n\nexport interface IExpressionTemplateData {\n\texpression: HTMLElement;\n\tname: HTMLSpanElement;\n\ttype: HTMLSpanElement;\n\tvalue: HTMLSpanElement;\n\tinputBoxContainer: HTMLElement;\n\tactionBar?: ActionBar;\n\telementDisposable: DisposableStore;\n\ttemplateDisposable: IDisposable;\n\tlabel: HighlightedLabel;\n\tlazyButton: HTMLElement;\n\tcurrentElement: IExpression | undefined;\n}\n\n/** Splits highlights based on matching of the {@link expressionAndScopeLabelProvider} */\nexport const splitExpressionOrScopeHighlights = (e: IExpression | IScope, highlights: IHighlight[]) => {\n\tconst nameEndsAt = e.name.length;\n\tconst labelBeginsAt = e.name.length + 2;\n\tconst name: IHighlight[] = [];\n\tconst value: IHighlight[] = [];\n\tfor (const hl of highlights) {\n\t\tif (hl.start < nameEndsAt) {\n\t\t\tname.push({ start: hl.start, end: Math.min(hl.end, nameEndsAt) });\n\t\t}\n\t\tif (hl.end > labelBeginsAt) {\n\t\t\tvalue.push({ start: Math.max(hl.start - labelBeginsAt, 0), end: hl.end - labelBeginsAt });\n\t\t}\n\t}\n\n\treturn { name, value };\n};\n\n/** Keyboard label provider for expression and scope tree elements. */\nexport const expressionAndScopeLabelProvider: IKeyboardNavigationLabelProvider<IExpression | IScope> = {\n\tgetKeyboardNavigationLabel(e) {\n\t\tconst stripAnsi = e.getSession()?.rememberedCapabilities?.supportsANSIStyling;\n\t\treturn `${e.name}: ${stripAnsi ? removeAnsiEscapeCodes(e.value) : e.value}`;\n\t},\n};\n\nexport abstract class AbstractExpressionDataSource<Input, Element extends IExpression> implements IAsyncDataSource<Input, Element> {\n\tconstructor(\n\t\t@IDebugService protected debugService: IDebugService,\n\t\t@IDebugVisualizerService protected debugVisualizer: IDebugVisualizerService,\n\t) { }\n\n\tpublic abstract hasChildren(element: Input | Element): boolean;\n\n\tpublic async getChildren(element: Input | Element): Promise<Element[]> {\n\t\tconst vm = this.debugService.getViewModel();\n\t\tconst children = await this.doGetChildren(element);\n\t\treturn Promise.all(children.map(async r => {\n\t\t\tconst vizOrTree = vm.getVisualizedExpression(r as IExpression);\n\t\t\tif (typeof vizOrTree === 'string') {\n\t\t\t\tconst viz = await this.debugVisualizer.getVisualizedNodeFor(vizOrTree, r);\n\t\t\t\tif (viz) {\n\t\t\t\t\tvm.setVisualizedExpression(r, viz);\n\t\t\t\t\treturn viz as IExpression as Element;\n\t\t\t\t}\n\t\t\t} else if (vizOrTree) {\n\t\t\t\treturn vizOrTree as Element;\n\t\t\t}\n\n\n\t\t\treturn r;\n\t\t}));\n\t}\n\n\tprotected abstract doGetChildren(element: Input | Element): Promise<Element[]>;\n}\n\nexport abstract class AbstractExpressionsRenderer<T = IExpression> implements ITreeRenderer<T, FuzzyScore, IExpressionTemplateData> {\n\n\tconstructor(\n\t\t@IDebugService protected debugService: IDebugService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IHoverService protected readonly hoverService: IHoverService,\n\t) { }\n\n\tabstract get templateId(): string;\n\n\trenderTemplate(container: HTMLElement): IExpressionTemplateData {\n\t\tconst templateDisposable = new DisposableStore();\n\t\tconst expression = dom.append(container, $('.expression'));\n\t\tconst name = dom.append(expression, $('span.name'));\n\t\tconst lazyButton = dom.append(expression, $('span.lazy-button'));\n\t\tlazyButton.classList.add(...ThemeIcon.asClassNameArray(Codicon.eye));\n\n\t\ttemplateDisposable.add(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), lazyButton, localize('debug.lazyButton.tooltip', \"Click to expand\")));\n\t\tconst type = dom.append(expression, $('span.type'));\n\n\t\tconst value = dom.append(expression, $('span.value'));\n\n\t\tconst label = templateDisposable.add(new HighlightedLabel(name));\n\n\t\tconst inputBoxContainer = dom.append(expression, $('.inputBoxContainer'));\n\n\t\tlet actionBar: ActionBar | undefined;\n\t\tif (this.renderActionBar) {\n\t\t\tdom.append(expression, $('.span.actionbar-spacer'));\n\t\t\tactionBar = templateDisposable.add(new ActionBar(expression));\n\t\t}\n\n\t\tconst template: IExpressionTemplateData = { expression, name, type, value, label, inputBoxContainer, actionBar, elementDisposable: new DisposableStore(), templateDisposable, lazyButton, currentElement: undefined };\n\n\t\ttemplateDisposable.add(dom.addDisposableListener(lazyButton, dom.EventType.CLICK, () => {\n\t\t\tif (template.currentElement) {\n\t\t\t\tthis.debugService.getViewModel().evaluateLazyExpression(template.currentElement);\n\t\t\t}\n\t\t}));\n\n\t\treturn template;\n\t}\n\n\tpublic abstract renderElement(node: ITreeNode<T, FuzzyScore>, index: number, data: IExpressionTemplateData): void;\n\n\tprotected renderExpressionElement(element: IExpression, node: ITreeNode<T, FuzzyScore>, data: IExpressionTemplateData): void {\n\t\tdata.currentElement = element;\n\t\tthis.renderExpression(node.element, data, createMatches(node.filterData));\n\t\tif (data.actionBar) {\n\t\t\tthis.renderActionBar!(data.actionBar, element, data);\n\t\t}\n\t\tconst selectedExpression = this.debugService.getViewModel().getSelectedExpression();\n\t\tif (element === selectedExpression?.expression || (element instanceof Variable && element.errorMessage)) {\n\t\t\tconst options = this.getInputBoxOptions(element, !!selectedExpression?.settingWatch);\n\t\t\tif (options) {\n\t\t\t\tdata.elementDisposable.add(this.renderInputBox(data.name, data.value, data.inputBoxContainer, options));\n\t\t\t}\n\t\t}\n\t}\n\n\trenderInputBox(nameElement: HTMLElement, valueElement: HTMLElement, inputBoxContainer: HTMLElement, options: IInputBoxOptions): IDisposable {\n\t\tnameElement.style.display = 'none';\n\t\tvalueElement.style.display = 'none';\n\t\tinputBoxContainer.style.display = 'initial';\n\t\tdom.clearNode(inputBoxContainer);\n\n\t\tconst inputBox = new InputBox(inputBoxContainer, this.contextViewService, { ...options, inputBoxStyles: defaultInputBoxStyles });\n\n\t\tinputBox.value = options.initialValue;\n\t\tinputBox.focus();\n\t\tinputBox.select();\n\n\t\tconst done = createSingleCallFunction((success: boolean, finishEditing: boolean) => {\n\t\t\tnameElement.style.display = '';\n\t\t\tvalueElement.style.display = '';\n\t\t\tinputBoxContainer.style.display = 'none';\n\t\t\tconst value = inputBox.value;\n\t\t\tdispose(toDispose);\n\n\t\t\tif (finishEditing) {\n\t\t\t\tthis.debugService.getViewModel().setSelectedExpression(undefined, false);\n\t\t\t\toptions.onFinish(value, success);\n\t\t\t}\n\t\t});\n\n\t\tconst toDispose = [\n\t\t\tinputBox,\n\t\t\tdom.addStandardDisposableListener(inputBox.inputElement, dom.EventType.KEY_DOWN, (e: IKeyboardEvent) => {\n\t\t\t\tconst isEscape = e.equals(KeyCode.Escape);\n\t\t\t\tconst isEnter = e.equals(KeyCode.Enter);\n\t\t\t\tif (isEscape || isEnter) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tdone(isEnter, true);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tdom.addDisposableListener(inputBox.inputElement, dom.EventType.BLUR, () => {\n\t\t\t\tdone(true, true);\n\t\t\t}),\n\t\t\tdom.addDisposableListener(inputBox.inputElement, dom.EventType.CLICK, e => {\n\t\t\t\t// Do not expand / collapse selected elements\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t})\n\t\t];\n\n\t\treturn toDisposable(() => {\n\t\t\tdone(false, false);\n\t\t});\n\t}\n\n\tprotected abstract renderExpression(expression: T, data: IExpressionTemplateData, highlights: IHighlight[]): void;\n\tprotected abstract getInputBoxOptions(expression: IExpression, settingValue: boolean): IInputBoxOptions | undefined;\n\n\tprotected renderActionBar?(actionBar: ActionBar, expression: IExpression, data: IExpressionTemplateData): void;\n\n\tdisposeElement(node: ITreeNode<T, FuzzyScore>, index: number, templateData: IExpressionTemplateData): void {\n\t\ttemplateData.elementDisposable.clear();\n\t}\n\n\tdisposeTemplate(templateData: IExpressionTemplateData): void {\n\t\ttemplateData.elementDisposable.dispose();\n\t\ttemplateData.templateDisposable.dispose();\n\t}\n}\n"]}