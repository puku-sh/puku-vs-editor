{"version":3,"sources":["vs/workbench/contrib/update/browser/releaseNotesEditor.ts"],"names":[],"mappings":"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","file":"releaseNotesEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/releasenoteseditor.css';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { escapeMarkdownSyntaxTokens } from '../../../../base/common/htmlContent.js';\nimport { KeybindingParser } from '../../../../base/common/keybindingParser.js';\nimport { escape } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { TokenizationRegistry } from '../../../../editor/common/languages.js';\nimport { generateTokensCSSForColorMap } from '../../../../editor/common/languages/supports/tokenization.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { asTextOrError, IRequestService } from '../../../../platform/request/common/request.js';\nimport { DEFAULT_MARKDOWN_STYLES, renderMarkdownDocument } from '../../markdown/browser/markdownDocumentRenderer.js';\nimport { WebviewInput } from '../../webviewPanel/browser/webviewEditorInput.js';\nimport { IWebviewWorkbenchService } from '../../webviewPanel/browser/webviewWorkbenchService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ACTIVE_GROUP, IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { getTelemetryLevel, supportsTelemetry } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IConfigurationChangeEvent, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { TelemetryLevel } from '../../../../platform/telemetry/common/telemetry.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { SimpleSettingRenderer } from '../../markdown/browser/markdownSettingRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { asWebviewUri } from '../../webview/common/webview.js';\n\nexport class ReleaseNotesManager extends Disposable {\n\tprivate readonly _simpleSettingRenderer: SimpleSettingRenderer;\n\tprivate readonly _releaseNotesCache = new Map<string, Promise<string>>();\n\n\tprivate _currentReleaseNotes: WebviewInput | undefined = undefined;\n\tprivate _lastMeta: { text: string; base: URI } | undefined;\n\n\tconstructor(\n\t\t@IEnvironmentService private readonly _environmentService: IEnvironmentService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IRequestService private readonly _requestService: IRequestService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly _editorGroupService: IEditorGroupsService,\n\t\t@ICodeEditorService private readonly _codeEditorService: ICodeEditorService,\n\t\t@IWebviewWorkbenchService private readonly _webviewWorkbenchService: IWebviewWorkbenchService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\n\t\t@IProductService private readonly _productService: IProductService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(TokenizationRegistry.onDidChange(() => {\n\t\t\treturn this.updateHtml();\n\t\t}));\n\n\t\tthis._register(_configurationService.onDidChangeConfiguration(this.onDidChangeConfiguration));\n\t\tthis._register(_webviewWorkbenchService.onDidChangeActiveWebviewEditor(this.onDidChangeActiveWebviewEditor));\n\t\tthis._simpleSettingRenderer = this._instantiationService.createInstance(SimpleSettingRenderer);\n\t}\n\n\tprivate async updateHtml() {\n\t\tif (!this._currentReleaseNotes || !this._lastMeta) {\n\t\t\treturn;\n\t\t}\n\t\tconst html = await this.renderBody(this._lastMeta);\n\t\tif (this._currentReleaseNotes) {\n\t\t\tthis._currentReleaseNotes.webview.setHtml(html);\n\t\t}\n\t}\n\n\tprivate async getBase(useCurrentFile: boolean) {\n\t\tif (useCurrentFile) {\n\t\t\tconst currentFileUri = this._codeEditorService.getActiveCodeEditor()?.getModel()?.uri;\n\t\t\tif (currentFileUri) {\n\t\t\t\treturn dirname(currentFileUri);\n\t\t\t}\n\t\t}\n\t\treturn URI.parse('https://code.visualstudio.com/raw');\n\t}\n\n\tpublic async show(version: string, useCurrentFile: boolean): Promise<boolean> {\n\t\tconst releaseNoteText = await this.loadReleaseNotes(version, useCurrentFile);\n\t\tconst base = await this.getBase(useCurrentFile);\n\t\tthis._lastMeta = { text: releaseNoteText, base };\n\t\tconst html = await this.renderBody(this._lastMeta);\n\t\tconst title = nls.localize('releaseNotesInputName', \"Release Notes: {0}\", version);\n\n\t\tconst activeEditorPane = this._editorService.activeEditorPane;\n\t\tif (this._currentReleaseNotes) {\n\t\t\tthis._currentReleaseNotes.setWebviewTitle(title);\n\t\t\tthis._currentReleaseNotes.webview.setHtml(html);\n\t\t\tthis._webviewWorkbenchService.revealWebview(this._currentReleaseNotes, activeEditorPane ? activeEditorPane.group : this._editorGroupService.activeGroup, false);\n\t\t} else {\n\t\t\tthis._currentReleaseNotes = this._webviewWorkbenchService.openWebview(\n\t\t\t\t{\n\t\t\t\t\ttitle,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\ttryRestoreScrollPosition: true,\n\t\t\t\t\t\tenableFindWidget: true,\n\t\t\t\t\t\tdisableServiceWorker: useCurrentFile ? false : true,\n\t\t\t\t\t},\n\t\t\t\t\tcontentOptions: {\n\t\t\t\t\t\tlocalResourceRoots: useCurrentFile ? [base] : [],\n\t\t\t\t\t\tallowScripts: true\n\t\t\t\t\t},\n\t\t\t\t\textension: undefined\n\t\t\t\t},\n\t\t\t\t'releaseNotes',\n\t\t\t\ttitle,\n\t\t\t\tundefined,\n\t\t\t\t{ group: ACTIVE_GROUP, preserveFocus: false });\n\n\t\t\tconst disposables = new DisposableStore();\n\n\t\t\tdisposables.add(this._currentReleaseNotes.webview.onDidClickLink(uri => this.onDidClickLink(URI.parse(uri))));\n\n\t\t\tdisposables.add(this._currentReleaseNotes.webview.onMessage(e => {\n\t\t\t\tif (e.message.type === 'showReleaseNotes') {\n\t\t\t\t\tthis._configurationService.updateValue('update.showReleaseNotes', e.message.value);\n\t\t\t\t} else if (e.message.type === 'clickSetting') {\n\t\t\t\t\tconst x = this._currentReleaseNotes?.webview.container.offsetLeft + e.message.value.x;\n\t\t\t\t\tconst y = this._currentReleaseNotes?.webview.container.offsetTop + e.message.value.y;\n\t\t\t\t\tthis._simpleSettingRenderer.updateSetting(URI.parse(e.message.value.uri), x, y);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tdisposables.add(this._currentReleaseNotes.onWillDispose(() => {\n\t\t\t\tdisposables.dispose();\n\t\t\t\tthis._currentReleaseNotes = undefined;\n\t\t\t}));\n\n\t\t\tthis._currentReleaseNotes.webview.setHtml(html);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate async loadReleaseNotes(version: string, useCurrentFile: boolean): Promise<string> {\n\t\tconst match = /^(\\d+\\.\\d+)\\./.exec(version);\n\t\tif (!match) {\n\t\t\tthrow new Error('not found');\n\t\t}\n\n\t\tconst versionLabel = match[1].replace(/\\./g, '_');\n\t\tconst baseUrl = 'https://code.visualstudio.com/raw';\n\t\tconst url = `${baseUrl}/v${versionLabel}.md`;\n\t\tconst unassigned = nls.localize('unassigned', \"unassigned\");\n\n\t\tconst escapeMdHtml = (text: string): string => {\n\t\t\treturn escape(text).replace(/\\\\/g, '\\\\\\\\');\n\t\t};\n\n\t\tconst patchKeybindings = (text: string): string => {\n\t\t\tconst kb = (match: string, kb: string) => {\n\t\t\t\tconst keybinding = this._keybindingService.lookupKeybinding(kb);\n\n\t\t\t\tif (!keybinding) {\n\t\t\t\t\treturn unassigned;\n\t\t\t\t}\n\n\t\t\t\treturn keybinding.getLabel() || unassigned;\n\t\t\t};\n\n\t\t\tconst kbstyle = (match: string, kb: string) => {\n\t\t\t\tconst keybinding = KeybindingParser.parseKeybinding(kb);\n\n\t\t\t\tif (!keybinding) {\n\t\t\t\t\treturn unassigned;\n\t\t\t\t}\n\n\t\t\t\tconst resolvedKeybindings = this._keybindingService.resolveKeybinding(keybinding);\n\n\t\t\t\tif (resolvedKeybindings.length === 0) {\n\t\t\t\t\treturn unassigned;\n\t\t\t\t}\n\n\t\t\t\treturn resolvedKeybindings[0].getLabel() || unassigned;\n\t\t\t};\n\n\t\t\tconst kbCode = (match: string, binding: string) => {\n\t\t\t\tconst resolved = kb(match, binding);\n\t\t\t\treturn resolved ? `<code title=\"${binding}\">${escapeMdHtml(resolved)}</code>` : resolved;\n\t\t\t};\n\n\t\t\tconst kbstyleCode = (match: string, binding: string) => {\n\t\t\t\tconst resolved = kbstyle(match, binding);\n\t\t\t\treturn resolved ? `<code title=\"${binding}\">${escapeMdHtml(resolved)}</code>` : resolved;\n\t\t\t};\n\n\t\t\treturn text\n\t\t\t\t.replace(/`kb\\(([a-z.\\d\\-]+)\\)`/gi, kbCode)\n\t\t\t\t.replace(/`kbstyle\\(([^\\)]+)\\)`/gi, kbstyleCode)\n\t\t\t\t.replace(/kb\\(([a-z.\\d\\-]+)\\)/gi, (match, binding) => escapeMarkdownSyntaxTokens(kb(match, binding)))\n\t\t\t\t.replace(/kbstyle\\(([^\\)]+)\\)/gi, (match, binding) => escapeMarkdownSyntaxTokens(kbstyle(match, binding)));\n\t\t};\n\n\t\tconst fetchReleaseNotes = async () => {\n\t\t\tlet text;\n\t\t\ttry {\n\t\t\t\tif (useCurrentFile) {\n\t\t\t\t\tconst file = this._codeEditorService.getActiveCodeEditor()?.getModel()?.getValue();\n\t\t\t\t\ttext = file ? file.substring(file.indexOf('#')) : undefined;\n\t\t\t\t} else {\n\t\t\t\t\ttext = await asTextOrError(await this._requestService.request({ url }, CancellationToken.None));\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\tthrow new Error('Failed to fetch release notes');\n\t\t\t}\n\n\t\t\tif (!text || (!/^#\\s/.test(text) && !useCurrentFile)) { // release notes always starts with `#` followed by whitespace, except when using the current file\n\t\t\t\tthrow new Error('Invalid release notes');\n\t\t\t}\n\n\t\t\treturn patchKeybindings(text);\n\t\t};\n\n\t\t// Don't cache the current file\n\t\tif (useCurrentFile) {\n\t\t\treturn fetchReleaseNotes();\n\t\t}\n\t\tif (!this._releaseNotesCache.has(version)) {\n\t\t\tthis._releaseNotesCache.set(version, (async () => {\n\t\t\t\ttry {\n\t\t\t\t\treturn await fetchReleaseNotes();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis._releaseNotesCache.delete(version);\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t})());\n\t\t}\n\n\t\treturn this._releaseNotesCache.get(version)!;\n\t}\n\n\tprivate async onDidClickLink(uri: URI) {\n\t\tif (uri.scheme === Schemas.codeSetting) {\n\t\t\t// handled in receive message\n\t\t} else {\n\t\t\tthis.addGAParameters(uri, 'ReleaseNotes')\n\t\t\t\t.then(updated => this._openerService.open(updated, { allowCommands: ['workbench.action.openSettings', 'summarize.release.notes'] }))\n\t\t\t\t.then(undefined, onUnexpectedError);\n\t\t}\n\t}\n\n\tprivate async addGAParameters(uri: URI, origin: string, experiment = '1'): Promise<URI> {\n\t\tif (supportsTelemetry(this._productService, this._environmentService) && getTelemetryLevel(this._configurationService) === TelemetryLevel.USAGE) {\n\t\t\tif (uri.scheme === 'https' && uri.authority === 'code.visualstudio.com') {\n\t\t\t\treturn uri.with({ query: `${uri.query ? uri.query + '&' : ''}utm_source=VsCode&utm_medium=${encodeURIComponent(origin)}&utm_content=${encodeURIComponent(experiment)}` });\n\t\t\t}\n\t\t}\n\t\treturn uri;\n\t}\n\n\tprivate async renderBody(fileContent: { text: string; base: URI }) {\n\t\tconst nonce = generateUuid();\n\n\t\tconst processedContent = await renderReleaseNotesMarkdown(fileContent.text, this._extensionService, this._languageService, this._simpleSettingRenderer);\n\n\t\tconst colorMap = TokenizationRegistry.getColorMap();\n\t\tconst css = colorMap ? generateTokensCSSForColorMap(colorMap) : '';\n\t\tconst showReleaseNotes = Boolean(this._configurationService.getValue<boolean>('update.showReleaseNotes'));\n\n\t\treturn `<!DOCTYPE html>\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<base href=\"${asWebviewUri(fileContent.base).toString(true)}/\" >\n\t\t\t\t<meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\">\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; img-src https: data:; media-src https:; style-src 'nonce-${nonce}' https://code.visualstudio.com; script-src 'nonce-${nonce}';\">\n\t\t\t\t<style nonce=\"${nonce}\">\n\t\t\t\t\t${DEFAULT_MARKDOWN_STYLES}\n\t\t\t\t\t${css}\n\n\t\t\t\t\t/* codesetting */\n\n\t\t\t\t\tcode:has(.codesetting) {\n\t\t\t\t\t\tbackground-color: var(--vscode-textPreformat-background);\n\t\t\t\t\t\tcolor: var(--vscode-textPreformat-foreground);\n\t\t\t\t\t\tpadding-left: 1px;\n\t\t\t\t\t\tmargin-right: 3px;\n\t\t\t\t\t\tpadding-right: 0px;\n\t\t\t\t\t}\n\n\t\t\t\t\tcode:has(.codesetting):focus {\n\t\t\t\t\t\tborder: 1px solid var(--vscode-button-border, transparent);\n\t\t\t\t\t}\n\n\t\t\t\t\t.codesetting {\n\t\t\t\t\t\tcolor: var(--vscode-textPreformat-foreground);\n\t\t\t\t\t\tpadding: 0px 1px 1px 0px;\n\t\t\t\t\t\tfont-size: 0px;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\toutline-offset: 2px !important;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tdisplay: inline;\n\t\t\t\t\t\tmargin-right: 3px;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting svg {\n\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tborder: 1px solid var(--vscode-button-secondaryBorder, transparent);\n\t\t\t\t\t\toutline: 1px solid transparent;\n\t\t\t\t\t\tline-height: 9px;\n\t\t\t\t\t\tmargin-bottom: -5px;\n\t\t\t\t\t\tpadding-left: 0px;\n\t\t\t\t\t\tpadding-top: 2px;\n\t\t\t\t\t\tpadding-bottom: 2px;\n\t\t\t\t\t\tpadding-right: 2px;\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\ttext-rendering: auto;\n\t\t\t\t\t\ttext-transform: none;\n\t\t\t\t\t\t-webkit-font-smoothing: antialiased;\n\t\t\t\t\t\t-moz-osx-font-smoothing: grayscale;\n\t\t\t\t\t\tuser-select: none;\n\t\t\t\t\t\t-webkit-user-select: none;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting .setting-name {\n\t\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\t\tpadding-left: 2px;\n\t\t\t\t\t\tpadding-right: 3px;\n\t\t\t\t\t\tpadding-top: 1px;\n\t\t\t\t\t\tpadding-bottom: 1px;\n\t\t\t\t\t\tmargin-top: -3px;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting:hover {\n\t\t\t\t\t\tcolor: var(--vscode-textPreformat-foreground) !important;\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t}\n\t\t\t\t\tcode:has(.codesetting):hover {\n\t\t\t\t\t\tfilter: brightness(140%);\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting:focus {\n\t\t\t\t\t\toutline: 0 !important;\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t\tcolor: var(--vscode-button-hoverForeground) !important;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting .separator {\n\t\t\t\t\t\twidth: 1px;\n\t\t\t\t\t\theight: 14px;\n\t\t\t\t\t\tmargin-bottom: -3px;\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tbackground-color: var(--vscode-editor-background);\n\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\tmargin-right: 4px;\n\t\t\t\t\t}\n\n\t\t\t\t\theader { display: flex; align-items: center; padding-top: 1em; }\n\n\t\t\t\t\t/* Release notes enhancements from vscode-docs */\n\t\t\t\t\thtml {\n\t\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\toverscroll-behavior: none;\n\t\t\t\t\t}\n\n\t\t\t\t\tbody {\n\t\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\t\tmax-width: 980px;\n\t\t\t\t\t\theight: auto;\n\t\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\t\toverscroll-behavior: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Scroll to top button */\n\t\t\t\t\t#scroll-to-top {\n\t\t\t\t\t\tposition: fixed;\n\t\t\t\t\t\twidth: 40px;\n\t\t\t\t\t\theight: 40px;\n\t\t\t\t\t\tright: 25px;\n\t\t\t\t\t\tbottom: 25px;\n\t\t\t\t\t\tbackground-color: var(--vscode-button-background, #444);\n\t\t\t\t\t\tborder-color: var(--vscode-button-border);\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tbox-shadow: 1px 1px 1px rgba(0,0,0,.25);\n\t\t\t\t\t\toutline: none;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t#scroll-to-top:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-button-hoverBackground);\n\t\t\t\t\t\tbox-shadow: 2px 2px 2px rgba(0,0,0,.25);\n\t\t\t\t\t}\n\n\t\t\t\t\tbody.vscode-high-contrast #scroll-to-top {\n\t\t\t\t\t\tborder-width: 2px;\n\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t\tbox-shadow: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t#scroll-to-top span.icon::before {\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tbackground: var(--vscode-button-foreground);\n\t\t\t\t\t\t/* Chevron up icon */\n\t\t\t\t\t\t-webkit-mask-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNiAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KCS5zdDF7ZmlsbDpub25lO30KPC9zdHlsZT4KPHRpdGxlPnVwY2hldnJvbjwvdGl0bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik04LDUuMWwtNy4zLDcuM0wwLDExLjZsOC04bDgsOGwtMC43LDAuN0w4LDUuMXoiLz4KPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+Cjwvc3ZnPgo=');\n\t\t\t\t\t\tmask-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNiAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KCS5zdDF7ZmlsbDpub25lO30KPC9zdHlsZT4KPHRpdGxlPnVwY2hldnJvbjwvdGl0bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik04LDUuMWwtNy4zLDcuM0wwLDExLjZsOC04bDgsOGwtMC43LDAuN0w4LDUuMXoiLz4KPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+Cjwvc3ZnPgo=');\n\t\t\t\t\t\twidth: 16px;\n\t\t\t\t\t\theight: 16px;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Header styling */\n\t\t\t\t\th2 {\n\t\t\t\t\t\tmargin-top: 1.2em;\n\t\t\t\t\t\tscroll-margin-top: 1.2em;\n\t\t\t\t\t}\n\n\t\t\t\t\th2:not(:first-of-type) {\n\t\t\t\t\t\tmargin-top: 4em;\n\t\t\t\t\t\tscroll-margin-top: 1em;\n\t\t\t\t\t}\n\n\t\t\t\t\th3 {\n\t\t\t\t\t\tmargin-top: 4em;\n\t\t\t\t\t\tscroll-margin-top: 1em;\n\t\t\t\t\t}\n\n\t\t\t\t\th2 + h3 {\n\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Highlights table styling */\n\t\t\t\t\t.highlights-table {\n\t\t\t\t\t\tborder-collapse: collapse;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t.highlights-table th {\n\t\t\t\t\t\tvertical-align: top;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tpadding-top: 2em;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\n\t\t\t\t\t.highlights-table td {\n\t\t\t\t\t\tvertical-align: top;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t.highlights-table tr:nth-child(2) td {\n\t\t\t\t\t\tpadding-bottom: 1em;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Main content layout */\n\t\t\t\t\t.toc-nav-layout {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: flex-start;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* TOC Navigation */\n\t\t\t\t\t#toc-nav {\n\t\t\t\t\t\tposition: sticky;\n\t\t\t\t\t\ttop: 20px;\n\t\t\t\t\t\twidth: 10vw;\n\t\t\t\t\t\tmin-width: 120px;\n\t\t\t\t\t\tmargin-right: 32px;\n\t\t\t\t\t\tmargin-top: 2em;\n\t\t\t\t\t}\n\n\t\t\t\t\t#toc-nav > div {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tfont-size: 1em;\n\t\t\t\t\t\tmargin-bottom: 1em;\n\t\t\t\t\t\ttext-transform: uppercase;\n\t\t\t\t\t}\n\n\t\t\t\t\t#toc-nav ul {\n\t\t\t\t\t\tlist-style: none;\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t#toc-nav ul li {\n\t\t\t\t\t\tmargin-bottom: 0.5em;\n\t\t\t\t\t}\n\n\t\t\t\t\t#toc-nav a {\n\t\t\t\t\t\tcolor: var(--vscode-editor-foreground, #ccc);\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t\ttransition: background-color 0.2s, color 0.2s;\n\t\t\t\t\t\tpadding: 4px 6px;\n\t\t\t\t\t\tmargin: -4px -6px;\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\toutline: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t#toc-nav a:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-button-secondaryHoverBackground, #1177bb);\n\t\t\t\t\t\tcolor: var(--vscode-button-secondaryForeground, #ffffff);\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Main content area */\n\t\t\t\t\t.notes-main {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\tmin-width: 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* Responsive breakpoint - Hide TOC on smaller screens */\n\t\t\t\t\t@media (max-width: 576px) {\n\t\t\t\t\t\t#toc-nav {\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.toc-nav-layout {\n\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.notes-main {\n\t\t\t\t\t\t\tmargin-left: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t${processedContent}\n\t\t\t\t<script nonce=\"${nonce}\">\n\t\t\t\t\tconst vscode = acquireVsCodeApi();\n\t\t\t\t\tconst container = document.createElement('p');\n\t\t\t\t\tcontainer.style.display = 'flex';\n\t\t\t\t\tcontainer.style.alignItems = 'center';\n\n\t\t\t\t\tconst input = document.createElement('input');\n\t\t\t\t\tinput.type = 'checkbox';\n\t\t\t\t\tinput.id = 'showReleaseNotes';\n\t\t\t\t\tinput.checked = ${showReleaseNotes};\n\t\t\t\t\tcontainer.appendChild(input);\n\n\t\t\t\t\tconst label = document.createElement('label');\n\t\t\t\t\tlabel.htmlFor = 'showReleaseNotes';\n\t\t\t\t\tlabel.textContent = '${nls.localize('showOnUpdate', \"Show release notes after an update\")}';\n\t\t\t\t\tcontainer.appendChild(label);\n\n\t\t\t\t\tconst beforeElement = document.querySelector(\"body > h1\")?.nextElementSibling;\n\t\t\t\t\tif (beforeElement) {\n\t\t\t\t\t\tdocument.body.insertBefore(container, beforeElement);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.body.appendChild(container);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.addEventListener('message', event => {\n\t\t\t\t\t\tif (event.data.type === 'showReleaseNotes') {\n\t\t\t\t\t\t\tinput.checked = event.data.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\twindow.addEventListener('click', event => {\n\t\t\t\t\t\tconst href = event.target.href ?? event.target.parentElement?.href ?? event.target.parentElement?.parentElement?.href;\n\t\t\t\t\t\tif (href && (href.startsWith('${Schemas.codeSetting}'))) {\n\t\t\t\t\t\t\tvscode.postMessage({ type: 'clickSetting', value: { uri: href, x: event.clientX, y: event.clientY }});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\twindow.addEventListener('keypress', event => {\n\t\t\t\t\t\tif (event.keyCode === 13) {\n\t\t\t\t\t\t\tif (event.target.children.length > 0 && event.target.children[0].href) {\n\t\t\t\t\t\t\t\tconst clientRect = event.target.getBoundingClientRect();\n\t\t\t\t\t\t\t\tvscode.postMessage({ type: 'clickSetting', value: { uri: event.target.children[0].href, x: clientRect.right , y: clientRect.bottom }});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tinput.addEventListener('change', event => {\n\t\t\t\t\t\tvscode.postMessage({ type: 'showReleaseNotes', value: input.checked }, '*');\n\t\t\t\t\t});\n\t\t\t\t</script>\n\t\t\t</body>\n\t\t</html>`;\n\t}\n\n\tprivate onDidChangeConfiguration(e: IConfigurationChangeEvent): void {\n\t\tif (e.affectsConfiguration('update.showReleaseNotes')) {\n\t\t\tthis.updateCheckboxWebview();\n\t\t}\n\t}\n\n\tprivate onDidChangeActiveWebviewEditor(input: WebviewInput | undefined): void {\n\t\tif (input && input === this._currentReleaseNotes) {\n\t\t\tthis.updateCheckboxWebview();\n\t\t}\n\t}\n\n\tprivate updateCheckboxWebview() {\n\t\tif (this._currentReleaseNotes) {\n\t\t\tthis._currentReleaseNotes.webview.postMessage({\n\t\t\t\ttype: 'showReleaseNotes',\n\t\t\t\tvalue: this._configurationService.getValue<boolean>('update.showReleaseNotes')\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport async function renderReleaseNotesMarkdown(\n\ttext: string,\n\textensionService: IExtensionService,\n\tlanguageService: ILanguageService,\n\tsimpleSettingRenderer: SimpleSettingRenderer,\n): Promise<TrustedHTML> {\n\t// Remove HTML comment markers around table of contents navigation\n\ttext = text\n\t\t.toString()\n\t\t.replace(/<!--\\s*TOC\\s*/gi, '')\n\t\t.replace(/\\s*Navigation End\\s*-->/gi, '');\n\n\treturn renderMarkdownDocument(text, extensionService, languageService, {\n\t\tsanitizerConfig: {\n\t\t\tallowRelativeMediaPaths: true,\n\t\t\tallowedLinkProtocols: {\n\t\t\t\toverride: [Schemas.http, Schemas.https, Schemas.command, Schemas.codeSetting]\n\t\t\t},\n\t\t\tallowedTags: { augment: ['nav', 'svg', 'path'] },\n\t\t\tallowedAttributes: { augment: ['aria-role', 'viewBox', 'fill', 'xmlns', 'd'] }\n\t\t},\n\t\tmarkedExtensions: [{\n\t\t\trenderer: {\n\t\t\t\thtml: simpleSettingRenderer.getHtmlRenderer(),\n\t\t\t\tcodespan: simpleSettingRenderer.getCodeSpanRenderer(),\n\t\t\t}\n\t\t}]\n\t});\n}\n"]}