{"version":3,"sources":["vs/workbench/contrib/bulkEdit/browser/preview/bulkEdit.contribution.ts"],"names":[],"mappings":"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","file":"bulkEdit.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { WorkbenchPhase, registerWorkbenchContribution2 } from '../../../../common/contributions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { BulkEditPane } from './bulkEditPane.js';\nimport { IViewContainersRegistry, Extensions as ViewContainerExtensions, ViewContainerLocation, IViewsRegistry } from '../../../../common/views.js';\nimport { IViewsService } from '../../../../services/views/common/viewsService.js';\nimport { FocusedViewContext } from '../../../../common/contextkeys.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { ViewPaneContainer } from '../../../../browser/parts/views/viewPaneContainer.js';\nimport { RawContextKey, IContextKeyService, IContextKey, ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { KeyMod, KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { WorkbenchListFocusContextKey } from '../../../../../platform/list/browser/listService.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { MenuId, registerAction2, Action2 } from '../../../../../platform/actions/common/actions.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../../common/editor.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport type { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport Severity from '../../../../../base/common/severity.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport { IPaneCompositePartService } from '../../../../services/panecomposite/browser/panecomposite.js';\n\nasync function getBulkEditPane(viewsService: IViewsService): Promise<BulkEditPane | undefined> {\n\tconst view = await viewsService.openView(BulkEditPane.ID, true);\n\tif (view instanceof BulkEditPane) {\n\t\treturn view;\n\t}\n\treturn undefined;\n}\n\nclass UXState {\n\n\tprivate readonly _activePanel: string | undefined;\n\n\tconstructor(\n\t\t@IPaneCompositePartService private readonly _paneCompositeService: IPaneCompositePartService,\n\t\t@IEditorGroupsService private readonly _editorGroupsService: IEditorGroupsService,\n\t) {\n\t\tthis._activePanel = _paneCompositeService.getActivePaneComposite(ViewContainerLocation.Panel)?.getId();\n\t}\n\n\tasync restore(panels: boolean, editors: boolean): Promise<void> {\n\n\t\t// (1) restore previous panel\n\t\tif (panels) {\n\t\t\tif (typeof this._activePanel === 'string') {\n\t\t\t\tawait this._paneCompositeService.openPaneComposite(this._activePanel, ViewContainerLocation.Panel);\n\t\t\t} else {\n\t\t\t\tthis._paneCompositeService.hideActivePaneComposite(ViewContainerLocation.Panel);\n\t\t\t}\n\t\t}\n\n\t\t// (2) close preview editors\n\t\tif (editors) {\n\t\t\tfor (const group of this._editorGroupsService.groups) {\n\t\t\t\tconst previewEditors: EditorInput[] = [];\n\t\t\t\tfor (const input of group.editors) {\n\n\t\t\t\t\tconst resource = EditorResourceAccessor.getCanonicalUri(input, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\t\t\t\tif (resource?.scheme === BulkEditPane.Schema) {\n\t\t\t\t\t\tpreviewEditors.push(input);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (previewEditors.length) {\n\t\t\t\t\tgroup.closeEditors(previewEditors, { preserveFocus: true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass PreviewSession {\n\tconstructor(\n\t\treadonly uxState: UXState,\n\t\treadonly cts: CancellationTokenSource = new CancellationTokenSource(),\n\t) { }\n}\n\nclass BulkEditPreviewContribution {\n\n\tstatic readonly ID = 'workbench.contrib.bulkEditPreview';\n\n\tstatic readonly ctxEnabled = new RawContextKey('refactorPreview.enabled', false);\n\n\tprivate readonly _ctxEnabled: IContextKey<boolean>;\n\n\tprivate _activeSession: PreviewSession | undefined;\n\n\tconstructor(\n\t\t@IPaneCompositePartService private readonly _paneCompositeService: IPaneCompositePartService,\n\t\t@IViewsService private readonly _viewsService: IViewsService,\n\t\t@IEditorGroupsService private readonly _editorGroupsService: IEditorGroupsService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@IBulkEditService bulkEditService: IBulkEditService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tbulkEditService.setPreviewHandler(edits => this._previewEdit(edits));\n\t\tthis._ctxEnabled = BulkEditPreviewContribution.ctxEnabled.bindTo(contextKeyService);\n\t}\n\n\tprivate async _previewEdit(edits: ResourceEdit[]): Promise<ResourceEdit[]> {\n\t\tthis._ctxEnabled.set(true);\n\n\t\tconst uxState = this._activeSession?.uxState ?? new UXState(this._paneCompositeService, this._editorGroupsService);\n\t\tconst view = await getBulkEditPane(this._viewsService);\n\t\tif (!view) {\n\t\t\tthis._ctxEnabled.set(false);\n\t\t\treturn edits;\n\t\t}\n\n\t\t// check for active preview session and let the user decide\n\t\tif (view.hasInput()) {\n\t\t\tconst { confirmed } = await this._dialogService.confirm({\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage: localize('overlap', \"Another refactoring is being previewed.\"),\n\t\t\t\tdetail: localize('detail', \"Press 'Continue' to discard the previous refactoring and continue with the current refactoring.\"),\n\t\t\t\tprimaryButton: localize({ key: 'continue', comment: ['&& denotes a mnemonic'] }, \"&&Continue\")\n\t\t\t});\n\n\t\t\tif (!confirmed) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\t// session\n\t\tlet session: PreviewSession;\n\t\tif (this._activeSession) {\n\t\t\tawait this._activeSession.uxState.restore(false, true);\n\t\t\tthis._activeSession.cts.dispose(true);\n\t\t\tsession = new PreviewSession(uxState);\n\t\t} else {\n\t\t\tsession = new PreviewSession(uxState);\n\t\t}\n\t\tthis._activeSession = session;\n\n\t\t// the actual work...\n\t\ttry {\n\n\t\t\treturn await view.setInput(edits, session.cts.token) ?? [];\n\n\t\t} finally {\n\t\t\t// restore UX state\n\t\t\tif (this._activeSession === session) {\n\t\t\t\tawait this._activeSession.uxState.restore(true, true);\n\t\t\t\tthis._activeSession.cts.dispose();\n\t\t\t\tthis._ctxEnabled.set(false);\n\t\t\t\tthis._activeSession = undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// CMD: accept\nregisterAction2(class ApplyAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'refactorPreview.apply',\n\t\t\ttitle: localize2('apply', \"Apply Refactoring\"),\n\t\t\tcategory: localize2('cat', \"Refactor Preview\"),\n\t\t\ticon: Codicon.check,\n\t\t\tprecondition: ContextKeyExpr.and(BulkEditPreviewContribution.ctxEnabled, BulkEditPane.ctxHasCheckedChanges),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.BulkEditContext,\n\t\t\t\torder: 1\n\t\t\t}],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorContrib - 10,\n\t\t\t\twhen: ContextKeyExpr.and(BulkEditPreviewContribution.ctxEnabled, FocusedViewContext.isEqualTo(BulkEditPane.ID)),\n\t\t\t\tprimary: KeyMod.CtrlCmd + KeyCode.Enter,\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = await getBulkEditPane(viewsService);\n\t\tview?.accept();\n\t}\n});\n\n// CMD: discard\nregisterAction2(class DiscardAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'refactorPreview.discard',\n\t\t\ttitle: localize2('Discard', \"Discard Refactoring\"),\n\t\t\tcategory: localize2('cat', \"Refactor Preview\"),\n\t\t\ticon: Codicon.clearAll,\n\t\t\tprecondition: BulkEditPreviewContribution.ctxEnabled,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.BulkEditContext,\n\t\t\t\torder: 2\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = await getBulkEditPane(viewsService);\n\t\tview?.discard();\n\t}\n});\n\n\n// CMD: toggle change\nregisterAction2(class ToggleAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'refactorPreview.toggleCheckedState',\n\t\t\ttitle: localize2('toogleSelection', \"Toggle Change\"),\n\t\t\tcategory: localize2('cat', \"Refactor Preview\"),\n\t\t\tprecondition: BulkEditPreviewContribution.ctxEnabled,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: WorkbenchListFocusContextKey,\n\t\t\t\tprimary: KeyCode.Space,\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.BulkEditContext,\n\t\t\t\tgroup: 'navigation'\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = await getBulkEditPane(viewsService);\n\t\tview?.toggleChecked();\n\t}\n});\n\n\n// CMD: toggle category\nregisterAction2(class GroupByFile extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'refactorPreview.groupByFile',\n\t\t\ttitle: localize2('groupByFile', \"Group Changes By File\"),\n\t\t\tcategory: localize2('cat', \"Refactor Preview\"),\n\t\t\ticon: Codicon.ungroupByRefType,\n\t\t\tprecondition: ContextKeyExpr.and(BulkEditPane.ctxHasCategories, BulkEditPane.ctxGroupByFile.negate(), BulkEditPreviewContribution.ctxEnabled),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.BulkEditTitle,\n\t\t\t\twhen: ContextKeyExpr.and(BulkEditPane.ctxHasCategories, BulkEditPane.ctxGroupByFile.negate()),\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 3,\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = await getBulkEditPane(viewsService);\n\t\tview?.groupByFile();\n\t}\n});\n\nregisterAction2(class GroupByType extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'refactorPreview.groupByType',\n\t\t\ttitle: localize2('groupByType', \"Group Changes By Type\"),\n\t\t\tcategory: localize2('cat', \"Refactor Preview\"),\n\t\t\ticon: Codicon.groupByRefType,\n\t\t\tprecondition: ContextKeyExpr.and(BulkEditPane.ctxHasCategories, BulkEditPane.ctxGroupByFile, BulkEditPreviewContribution.ctxEnabled),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.BulkEditTitle,\n\t\t\t\twhen: ContextKeyExpr.and(BulkEditPane.ctxHasCategories, BulkEditPane.ctxGroupByFile),\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 3\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = await getBulkEditPane(viewsService);\n\t\tview?.groupByType();\n\t}\n});\n\nregisterAction2(class ToggleGrouping extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'refactorPreview.toggleGrouping',\n\t\t\ttitle: localize2('groupByType', \"Group Changes By Type\"),\n\t\t\tcategory: localize2('cat', \"Refactor Preview\"),\n\t\t\ticon: Codicon.listTree,\n\t\t\ttoggled: BulkEditPane.ctxGroupByFile.negate(),\n\t\t\tprecondition: ContextKeyExpr.and(BulkEditPane.ctxHasCategories, BulkEditPreviewContribution.ctxEnabled),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.BulkEditContext,\n\t\t\t\torder: 3\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst view = await getBulkEditPane(viewsService);\n\t\tview?.toggleGrouping();\n\t}\n});\n\nregisterWorkbenchContribution2(\n\tBulkEditPreviewContribution.ID, BulkEditPreviewContribution, WorkbenchPhase.BlockRestore\n);\n\nconst refactorPreviewViewIcon = registerIcon('refactor-preview-view-icon', Codicon.lightbulb, localize('refactorPreviewViewIcon', 'View icon of the refactor preview view.'));\n\nconst container = Registry.as<IViewContainersRegistry>(ViewContainerExtensions.ViewContainersRegistry).registerViewContainer({\n\tid: BulkEditPane.ID,\n\ttitle: localize2('panel', \"Refactor Preview\"),\n\thideIfEmpty: true,\n\tctorDescriptor: new SyncDescriptor(\n\t\tViewPaneContainer,\n\t\t[BulkEditPane.ID, { mergeViewWithContainerWhenSingleView: true }]\n\t),\n\ticon: refactorPreviewViewIcon,\n\tstorageId: BulkEditPane.ID\n}, ViewContainerLocation.Panel);\n\nRegistry.as<IViewsRegistry>(ViewContainerExtensions.ViewsRegistry).registerViews([{\n\tid: BulkEditPane.ID,\n\tname: localize2('panel', \"Refactor Preview\"),\n\twhen: BulkEditPreviewContribution.ctxEnabled,\n\tctorDescriptor: new SyncDescriptor(BulkEditPane),\n\tcontainerIcon: refactorPreviewViewIcon,\n}], container);\n"]}