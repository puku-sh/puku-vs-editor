{"version":3,"sources":["vs/workbench/contrib/bulkEdit/browser/bulkEditService.ts"],"names":[],"mappings":"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","file":"bulkEditService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { ResourceMap, ResourceSet } from '../../../../base/common/map.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IBulkEditOptions, IBulkEditPreviewHandler, IBulkEditResult, IBulkEditService, ResourceEdit, ResourceFileEdit, ResourceTextEdit } from '../../../../editor/browser/services/bulkEditService.js';\nimport { EditorOption } from '../../../../editor/common/config/editorOptions.js';\nimport { WorkspaceEdit } from '../../../../editor/common/languages.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { Extensions, IConfigurationRegistry } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IProgress, IProgressStep, Progress } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { UndoRedoGroup, UndoRedoSource } from '../../../../platform/undoRedo/common/undoRedo.js';\nimport { BulkCellEdits, ResourceNotebookCellEdit } from './bulkCellEdits.js';\nimport { BulkFileEdits } from './bulkFileEdits.js';\nimport { BulkTextEdits } from './bulkTextEdits.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ILifecycleService, ShutdownReason } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IWorkingCopyService } from '../../../services/workingCopy/common/workingCopyService.js';\nimport { OpaqueEdits, ResourceAttachmentEdit } from './opaqueEdits.js';\nimport { TextModelEditSource } from '../../../../editor/common/textModelEditSource.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\n\nfunction liftEdits(edits: ResourceEdit[]): ResourceEdit[] {\n\treturn edits.map(edit => {\n\t\tif (ResourceTextEdit.is(edit)) {\n\t\t\treturn ResourceTextEdit.lift(edit);\n\t\t}\n\t\tif (ResourceFileEdit.is(edit)) {\n\t\t\treturn ResourceFileEdit.lift(edit);\n\t\t}\n\t\tif (ResourceNotebookCellEdit.is(edit)) {\n\t\t\treturn ResourceNotebookCellEdit.lift(edit);\n\t\t}\n\n\t\tif (ResourceAttachmentEdit.is(edit)) {\n\t\t\treturn ResourceAttachmentEdit.lift(edit);\n\t\t}\n\n\t\tthrow new Error('Unsupported edit');\n\t});\n}\n\nclass BulkEdit {\n\n\tconstructor(\n\t\tprivate readonly _label: string | undefined,\n\t\tprivate readonly _code: string | undefined,\n\t\tprivate readonly _editor: ICodeEditor | undefined,\n\t\tprivate readonly _progress: IProgress<IProgressStep>,\n\t\tprivate readonly _token: CancellationToken,\n\t\tprivate readonly _edits: ResourceEdit[],\n\t\tprivate readonly _undoRedoGroup: UndoRedoGroup,\n\t\tprivate readonly _undoRedoSource: UndoRedoSource | undefined,\n\t\tprivate readonly _confirmBeforeUndo: boolean,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t) {\n\n\t}\n\n\tariaMessage(): string {\n\n\t\tconst otherResources = new ResourceMap<boolean>();\n\t\tconst textEditResources = new ResourceMap<boolean>();\n\t\tlet textEditCount = 0;\n\t\tfor (const edit of this._edits) {\n\t\t\tif (edit instanceof ResourceTextEdit) {\n\t\t\t\ttextEditCount += 1;\n\t\t\t\ttextEditResources.set(edit.resource, true);\n\t\t\t} else if (edit instanceof ResourceFileEdit) {\n\t\t\t\totherResources.set(edit.oldResource ?? edit.newResource!, true);\n\t\t\t}\n\t\t}\n\t\tif (this._edits.length === 0) {\n\t\t\treturn localize('summary.0', \"Made no edits\");\n\t\t} else if (otherResources.size === 0) {\n\t\t\tif (textEditCount > 1 && textEditResources.size > 1) {\n\t\t\t\treturn localize('summary.nm', \"Made {0} text edits in {1} files\", textEditCount, textEditResources.size);\n\t\t\t} else {\n\t\t\t\treturn localize('summary.n0', \"Made {0} text edits in one file\", textEditCount);\n\t\t\t}\n\t\t} else {\n\t\t\treturn localize('summary.textFiles', \"Made {0} text edits in {1} files, also created or deleted {2} files\", textEditCount, textEditResources.size, otherResources.size);\n\t\t}\n\t}\n\n\tasync perform(reason?: TextModelEditSource): Promise<readonly URI[]> {\n\n\t\tif (this._edits.length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst ranges: number[] = [1];\n\t\tfor (let i = 1; i < this._edits.length; i++) {\n\t\t\tif (Object.getPrototypeOf(this._edits[i - 1]) === Object.getPrototypeOf(this._edits[i])) {\n\t\t\t\tranges[ranges.length - 1]++;\n\t\t\t} else {\n\t\t\t\tranges.push(1);\n\t\t\t}\n\t\t}\n\n\t\t// Show infinte progress when there is only 1 item since we do not know how long it takes\n\t\tconst increment = this._edits.length > 1 ? 0 : undefined;\n\t\tthis._progress.report({ increment, total: 100 });\n\t\t// Increment by percentage points since progress API expects that\n\t\tconst progress: IProgress<void> = { report: _ => this._progress.report({ increment: 100 / this._edits.length }) };\n\n\t\tconst resources: (readonly URI[])[] = [];\n\t\tlet index = 0;\n\t\tfor (const range of ranges) {\n\t\t\tif (this._token.isCancellationRequested) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst group = this._edits.slice(index, index + range);\n\t\t\tif (group[0] instanceof ResourceFileEdit) {\n\t\t\t\tresources.push(await this._performFileEdits(<ResourceFileEdit[]>group, this._undoRedoGroup, this._undoRedoSource, this._confirmBeforeUndo, progress));\n\t\t\t} else if (group[0] instanceof ResourceTextEdit) {\n\t\t\t\tresources.push(await this._performTextEdits(<ResourceTextEdit[]>group, this._undoRedoGroup, this._undoRedoSource, progress, reason));\n\t\t\t} else if (group[0] instanceof ResourceNotebookCellEdit) {\n\t\t\t\tresources.push(await this._performCellEdits(<ResourceNotebookCellEdit[]>group, this._undoRedoGroup, this._undoRedoSource, progress));\n\t\t\t} else if (group[0] instanceof ResourceAttachmentEdit) {\n\t\t\t\tresources.push(await this._performOpaqueEdits(<ResourceAttachmentEdit[]>group, this._undoRedoGroup, this._undoRedoSource, progress));\n\t\t\t} else {\n\t\t\t\tconsole.log('UNKNOWN EDIT');\n\t\t\t}\n\t\t\tindex = index + range;\n\t\t}\n\n\t\treturn resources.flat();\n\t}\n\n\tprivate async _performFileEdits(edits: ResourceFileEdit[], undoRedoGroup: UndoRedoGroup, undoRedoSource: UndoRedoSource | undefined, confirmBeforeUndo: boolean, progress: IProgress<void>): Promise<readonly URI[]> {\n\t\tthis._logService.debug('_performFileEdits', JSON.stringify(edits));\n\t\tconst model = this._instaService.createInstance(BulkFileEdits, this._label || localize('workspaceEdit', \"Workspace Edit\"), this._code || 'undoredo.workspaceEdit', undoRedoGroup, undoRedoSource, confirmBeforeUndo, progress, this._token, edits);\n\t\treturn await model.apply();\n\t}\n\n\tprivate async _performTextEdits(edits: ResourceTextEdit[], undoRedoGroup: UndoRedoGroup, undoRedoSource: UndoRedoSource | undefined, progress: IProgress<void>, reason: TextModelEditSource | undefined): Promise<readonly URI[]> {\n\t\tthis._logService.debug('_performTextEdits', JSON.stringify(edits));\n\t\tconst model = this._instaService.createInstance(BulkTextEdits, this._label || localize('workspaceEdit', \"Workspace Edit\"), this._code || 'undoredo.workspaceEdit', this._editor, undoRedoGroup, undoRedoSource, progress, this._token, edits);\n\t\treturn await model.apply(reason);\n\t}\n\n\tprivate async _performCellEdits(edits: ResourceNotebookCellEdit[], undoRedoGroup: UndoRedoGroup, undoRedoSource: UndoRedoSource | undefined, progress: IProgress<void>): Promise<readonly URI[]> {\n\t\tthis._logService.debug('_performCellEdits', JSON.stringify(edits));\n\t\tconst model = this._instaService.createInstance(BulkCellEdits, undoRedoGroup, undoRedoSource, progress, this._token, edits);\n\t\treturn await model.apply();\n\t}\n\n\tprivate async _performOpaqueEdits(edits: ResourceAttachmentEdit[], undoRedoGroup: UndoRedoGroup, undoRedoSource: UndoRedoSource | undefined, progress: IProgress<void>): Promise<readonly URI[]> {\n\t\tthis._logService.debug('_performOpaqueEdits', JSON.stringify(edits));\n\t\tconst model = this._instaService.createInstance(OpaqueEdits, undoRedoGroup, undoRedoSource, progress, this._token, edits);\n\t\treturn await model.apply();\n\t}\n}\n\nexport class BulkEditService implements IBulkEditService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _activeUndoRedoGroups = new LinkedList<UndoRedoGroup>();\n\tprivate _previewHandler?: IBulkEditPreviewHandler;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ILifecycleService private readonly _lifecycleService: ILifecycleService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@IWorkingCopyService private readonly _workingCopyService: IWorkingCopyService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService,\n\t) { }\n\n\tsetPreviewHandler(handler: IBulkEditPreviewHandler): IDisposable {\n\t\tthis._previewHandler = handler;\n\t\treturn toDisposable(() => {\n\t\t\tif (this._previewHandler === handler) {\n\t\t\t\tthis._previewHandler = undefined;\n\t\t\t}\n\t\t});\n\t}\n\n\thasPreviewHandler(): boolean {\n\t\treturn Boolean(this._previewHandler);\n\t}\n\n\tasync apply(editsIn: ResourceEdit[] | WorkspaceEdit, options?: IBulkEditOptions): Promise<IBulkEditResult> {\n\t\tlet edits = liftEdits(Array.isArray(editsIn) ? editsIn : editsIn.edits);\n\n\t\tif (edits.length === 0) {\n\t\t\treturn { ariaSummary: localize('nothing', \"Made no edits\"), isApplied: false };\n\t\t}\n\n\t\tif (this._previewHandler && (options?.showPreview || edits.some(value => value.metadata?.needsConfirmation))) {\n\t\t\tedits = await this._previewHandler(edits, options);\n\t\t}\n\n\t\tlet codeEditor = options?.editor;\n\t\t// try to find code editor\n\t\tif (!codeEditor) {\n\t\t\tconst candidate = this._editorService.activeTextEditorControl;\n\t\t\tif (isCodeEditor(candidate)) {\n\t\t\t\tcodeEditor = candidate;\n\t\t\t} else if (isDiffEditor(candidate)) {\n\t\t\t\tcodeEditor = candidate.getModifiedEditor();\n\t\t\t}\n\t\t}\n\n\t\tif (codeEditor && codeEditor.getOption(EditorOption.readOnly)) {\n\t\t\t// If the code editor is readonly still allow bulk edits to be applied #68549\n\t\t\tcodeEditor = undefined;\n\t\t}\n\n\t\t// undo-redo-group: if a group id is passed then try to find it\n\t\t// in the list of active edits. otherwise (or when not found)\n\t\t// create a separate undo-redo-group\n\t\tlet undoRedoGroup: UndoRedoGroup | undefined;\n\t\tlet undoRedoGroupRemove = () => { };\n\t\tif (typeof options?.undoRedoGroupId === 'number') {\n\t\t\tfor (const candidate of this._activeUndoRedoGroups) {\n\t\t\t\tif (candidate.id === options.undoRedoGroupId) {\n\t\t\t\t\tundoRedoGroup = candidate;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!undoRedoGroup) {\n\t\t\tundoRedoGroup = new UndoRedoGroup();\n\t\t\tundoRedoGroupRemove = this._activeUndoRedoGroups.push(undoRedoGroup);\n\t\t}\n\n\t\tconst label = options?.quotableLabel || options?.label;\n\t\tconst bulkEdit = this._instaService.createInstance(\n\t\t\tBulkEdit,\n\t\t\tlabel,\n\t\t\toptions?.code,\n\t\t\tcodeEditor,\n\t\t\toptions?.progress ?? Progress.None,\n\t\t\toptions?.token ?? CancellationToken.None,\n\t\t\tedits,\n\t\t\tundoRedoGroup,\n\t\t\toptions?.undoRedoSource,\n\t\t\t!!options?.confirmBeforeUndo\n\t\t);\n\n\t\tlet listener: IDisposable | undefined;\n\t\ttry {\n\t\t\tlistener = this._lifecycleService.onBeforeShutdown(e => e.veto(this._shouldVeto(label, e.reason), 'veto.blukEditService'));\n\t\t\tconst resources = await bulkEdit.perform(options?.reason);\n\n\t\t\t// when enabled (option AND setting) loop over all dirty working copies and trigger save\n\t\t\t// for those that were involved in this bulk edit operation.\n\t\t\tif (options?.respectAutoSaveConfig && this._configService.getValue(autoSaveSetting) === true && resources.length > 1) {\n\t\t\t\tawait this._saveAll(resources);\n\t\t\t}\n\n\t\t\treturn { ariaSummary: bulkEdit.ariaMessage(), isApplied: edits.length > 0 };\n\t\t} catch (err) {\n\t\t\t// console.log('apply FAILED');\n\t\t\t// console.log(err);\n\t\t\tthis._logService.error(err);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tlistener?.dispose();\n\t\t\tundoRedoGroupRemove();\n\t\t}\n\t}\n\n\tprivate async _saveAll(resources: readonly URI[]) {\n\t\tconst set = new ResourceSet(resources);\n\t\tconst saves = this._workingCopyService.dirtyWorkingCopies.map(async (copy) => {\n\t\t\tif (set.has(copy.resource)) {\n\t\t\t\tawait copy.save();\n\t\t\t}\n\t\t});\n\n\t\tconst result = await Promise.allSettled(saves);\n\t\tfor (const item of result) {\n\t\t\tif (item.status === 'rejected') {\n\t\t\t\tthis._logService.warn(item.reason);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async _shouldVeto(label: string | undefined, reason: ShutdownReason): Promise<boolean> {\n\t\tlet message: string;\n\t\tswitch (reason) {\n\t\t\tcase ShutdownReason.CLOSE:\n\t\t\t\tmessage = localize('closeTheWindow.message', \"Are you sure you want to close the window?\");\n\t\t\t\tbreak;\n\t\t\tcase ShutdownReason.LOAD:\n\t\t\t\tmessage = localize('changeWorkspace.message', \"Are you sure you want to change the workspace?\");\n\t\t\t\tbreak;\n\t\t\tcase ShutdownReason.RELOAD:\n\t\t\t\tmessage = localize('reloadTheWindow.message', \"Are you sure you want to reload the window?\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmessage = isMacintosh ? localize('quitMessageMac', \"Are you sure you want to quit?\") : localize('quitMessage', \"Are you sure you want to exit?\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst result = await this._dialogService.confirm({\n\t\t\tmessage,\n\t\t\tdetail: localize('areYouSureQuiteBulkEdit.detail', \"'{0}' is in progress.\", label || localize('fileOperation', \"File operation\")),\n\t\t});\n\n\t\treturn !result.confirmed;\n\t}\n}\n\nregisterSingleton(IBulkEditService, BulkEditService, InstantiationType.Delayed);\n\nconst autoSaveSetting = 'files.refactoring.autoSave';\n\nRegistry.as<IConfigurationRegistry>(Extensions.Configuration).registerConfiguration({\n\tid: 'files',\n\tproperties: {\n\t\t[autoSaveSetting]: {\n\t\t\tdescription: localize('refactoring.autoSave', \"Controls if files that were part of a refactoring are saved automatically\"),\n\t\t\tdefault: true,\n\t\t\ttype: 'boolean'\n\t\t}\n\t}\n});\n"]}