{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/bulkEdit/browser/opaqueEdits.ts","vs/workbench/contrib/bulkEdit/browser/opaqueEdits.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAGhG,OAAO,EAAE,QAAQ,EAAE,MAAM,kCAAkC,CAAC;AAE5D,OAAO,EAAE,YAAY,EAAE,MAAM,wDAAwD,CAAC;AAGtF,OAAO,EAAE,gBAAgB,EAAsD,MAAM,kDAAkD,CAAC;AAExI,MAAM,OAAO,sBAAuB,SAAQ,YAAY;IAEvD,MAAM,CAAC,EAAE,CAAC,SAAc;QACvB,IAAI,SAAS,YAAY,sBAAsB,EAAE,CAAC;YACjD,OAAO,IAAI,CAAC;QACb,CAAC;aAAM,CAAC;YACP,OAAO,QAAQ,CAAC,SAAS,CAAC;mBACtB,CAAC,OAAO,CAAe,SAAU,CAAC,IAAI,IAAkB,SAAU,CAAC,IAAI,CAAC,CAAC,CAAC;QAC/E,CAAC;IACF,CAAC;IAED,MAAM,CAAC,IAAI,CAAC,IAAiB;QAC5B,IAAI,IAAI,YAAY,sBAAsB,EAAE,CAAC;YAC5C,OAAO,IAAI,CAAC;QACb,CAAC;aAAM,CAAC;YACP,OAAO,IAAI,sBAAsB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvF,CAAC;IACF,CAAC;IAED,YACU,QAAa,EACb,IAAgC,EAChC,IAAgC,EACzC,QAAgC;QAEhC,KAAK,CAAC,QAAQ,CAAC,CAAC;QALP,aAAQ,GAAR,QAAQ,CAAK;QACb,SAAI,GAAJ,IAAI,CAA4B;QAChC,SAAI,GAAJ,IAAI,CAA4B;IAI1C,CAAC;CACD;AAEM,IAAM,WAAW,GAAjB,MAAM,WAAW;IAEvB,YACkB,cAA6B,EAC7B,eAA2C,EAC3C,SAA0B,EAC1B,MAAyB,EACzB,MAAgC,EACd,gBAAkC;QALpD,mBAAc,GAAd,cAAc,CAAe;QAC7B,oBAAe,GAAf,eAAe,CAA4B;QAC3C,cAAS,GAAT,SAAS,CAAiB;QAC1B,WAAM,GAAN,MAAM,CAAmB;QACzB,WAAM,GAAN,MAAM,CAA0B;QACd,qBAAgB,GAAhB,gBAAgB,CAAkB;IAClE,CAAC;IAEL,KAAK,CAAC,KAAK;QACV,MAAM,SAAS,GAAU,EAAE,CAAC;QAE5B,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;YAChC,IAAI,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;gBACzC,MAAM;YACP,CAAC;YAED,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;YAElB,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC;gBACjC,IAAI,sCAA8B;gBAClC,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,aAAa;gBAC5C,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,IAAI,EAAE,IAAI,CAAC,IAAI;aACf,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;YAE9C,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YACjC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC;QAED,OAAO,SAAS,CAAC;IAClB,CAAC;CACD,CAAA;AApCY,WAAW;IAQrB,WAAA,gBAAgB,CAAA;GARN,WAAW,CAoCvB","file":"opaqueEdits.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { isObject } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ResourceEdit } from '../../../../editor/browser/services/bulkEditService.js';\nimport { ICustomEdit, WorkspaceEditMetadata } from '../../../../editor/common/languages.js';\nimport { IProgress } from '../../../../platform/progress/common/progress.js';\nimport { IUndoRedoService, UndoRedoElementType, UndoRedoGroup, UndoRedoSource } from '../../../../platform/undoRedo/common/undoRedo.js';\n\nexport class ResourceAttachmentEdit extends ResourceEdit implements ICustomEdit {\n\n\tstatic is(candidate: any): candidate is ICustomEdit {\n\t\tif (candidate instanceof ResourceAttachmentEdit) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn isObject(candidate)\n\t\t\t\t&& (Boolean((<ICustomEdit>candidate).undo && (<ICustomEdit>candidate).redo));\n\t\t}\n\t}\n\n\tstatic lift(edit: ICustomEdit): ResourceAttachmentEdit {\n\t\tif (edit instanceof ResourceAttachmentEdit) {\n\t\t\treturn edit;\n\t\t} else {\n\t\t\treturn new ResourceAttachmentEdit(edit.resource, edit.undo, edit.redo, edit.metadata);\n\t\t}\n\t}\n\n\tconstructor(\n\t\treadonly resource: URI,\n\t\treadonly undo: () => Promise<void> | void,\n\t\treadonly redo: () => Promise<void> | void,\n\t\tmetadata?: WorkspaceEditMetadata\n\t) {\n\t\tsuper(metadata);\n\t}\n}\n\nexport class OpaqueEdits {\n\n\tconstructor(\n\t\tprivate readonly _undoRedoGroup: UndoRedoGroup,\n\t\tprivate readonly _undoRedoSource: UndoRedoSource | undefined,\n\t\tprivate readonly _progress: IProgress<void>,\n\t\tprivate readonly _token: CancellationToken,\n\t\tprivate readonly _edits: ResourceAttachmentEdit[],\n\t\t@IUndoRedoService private readonly _undoRedoService: IUndoRedoService,\n\t) { }\n\n\tasync apply(): Promise<readonly URI[]> {\n\t\tconst resources: URI[] = [];\n\n\t\tfor (const edit of this._edits) {\n\t\t\tif (this._token.isCancellationRequested) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tawait edit.redo();\n\n\t\t\tthis._undoRedoService.pushElement({\n\t\t\t\ttype: UndoRedoElementType.Resource,\n\t\t\t\tresource: edit.resource,\n\t\t\t\tlabel: edit.metadata?.label || 'Custom Edit',\n\t\t\t\tcode: 'paste',\n\t\t\t\tundo: edit.undo,\n\t\t\t\tredo: edit.redo,\n\t\t\t}, this._undoRedoGroup, this._undoRedoSource);\n\n\t\t\tthis._progress.report(undefined);\n\t\t\tresources.push(edit.resource);\n\t\t}\n\n\t\treturn resources;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { isObject } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ResourceEdit } from '../../../../editor/browser/services/bulkEditService.js';\nimport { ICustomEdit, WorkspaceEditMetadata } from '../../../../editor/common/languages.js';\nimport { IProgress } from '../../../../platform/progress/common/progress.js';\nimport { IUndoRedoService, UndoRedoElementType, UndoRedoGroup, UndoRedoSource } from '../../../../platform/undoRedo/common/undoRedo.js';\n\nexport class ResourceAttachmentEdit extends ResourceEdit implements ICustomEdit {\n\n\tstatic is(candidate: any): candidate is ICustomEdit {\n\t\tif (candidate instanceof ResourceAttachmentEdit) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn isObject(candidate)\n\t\t\t\t&& (Boolean((<ICustomEdit>candidate).undo && (<ICustomEdit>candidate).redo));\n\t\t}\n\t}\n\n\tstatic lift(edit: ICustomEdit): ResourceAttachmentEdit {\n\t\tif (edit instanceof ResourceAttachmentEdit) {\n\t\t\treturn edit;\n\t\t} else {\n\t\t\treturn new ResourceAttachmentEdit(edit.resource, edit.undo, edit.redo, edit.metadata);\n\t\t}\n\t}\n\n\tconstructor(\n\t\treadonly resource: URI,\n\t\treadonly undo: () => Promise<void> | void,\n\t\treadonly redo: () => Promise<void> | void,\n\t\tmetadata?: WorkspaceEditMetadata\n\t) {\n\t\tsuper(metadata);\n\t}\n}\n\nexport class OpaqueEdits {\n\n\tconstructor(\n\t\tprivate readonly _undoRedoGroup: UndoRedoGroup,\n\t\tprivate readonly _undoRedoSource: UndoRedoSource | undefined,\n\t\tprivate readonly _progress: IProgress<void>,\n\t\tprivate readonly _token: CancellationToken,\n\t\tprivate readonly _edits: ResourceAttachmentEdit[],\n\t\t@IUndoRedoService private readonly _undoRedoService: IUndoRedoService,\n\t) { }\n\n\tasync apply(): Promise<readonly URI[]> {\n\t\tconst resources: URI[] = [];\n\n\t\tfor (const edit of this._edits) {\n\t\t\tif (this._token.isCancellationRequested) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tawait edit.redo();\n\n\t\t\tthis._undoRedoService.pushElement({\n\t\t\t\ttype: UndoRedoElementType.Resource,\n\t\t\t\tresource: edit.resource,\n\t\t\t\tlabel: edit.metadata?.label || 'Custom Edit',\n\t\t\t\tcode: 'paste',\n\t\t\t\tundo: edit.undo,\n\t\t\t\tredo: edit.redo,\n\t\t\t}, this._undoRedoGroup, this._undoRedoSource);\n\n\t\t\tthis._progress.report(undefined);\n\t\t\tresources.push(edit.resource);\n\t\t}\n\n\t\treturn resources;\n\t}\n}\n"]}