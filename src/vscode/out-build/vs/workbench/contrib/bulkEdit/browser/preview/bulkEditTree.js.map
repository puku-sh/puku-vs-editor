{"version":3,"sources":["vs/workbench/contrib/bulkEdit/browser/preview/bulkEditTree.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAGhG,OAAO,EAAE,iBAAiB,EAAE,MAAM,0DAA0D,CAAC;AAC7F,OAAO,EAAc,aAAa,EAAE,MAAM,uCAAuC,CAAC;AAElF,OAAO,EAAE,gBAAgB,EAAc,MAAM,qEAAqE,CAAC;AAEnH,OAAO,EAAE,KAAK,EAAE,MAAM,4CAA4C,CAAC;AACnE,OAAO,KAAK,GAAG,MAAM,oCAAoC,CAAC;AAE1D,OAAO,EAAe,eAAe,EAAE,MAAM,yCAAyC,CAAC;AACvF,OAAO,EAAE,SAAS,EAAE,MAAM,iDAAiD,CAAC;AAC5E,OAAO,EAAE,kBAAkB,EAAwE,MAAM,sBAAsB,CAAC;AAChI,OAAO,EAAE,QAAQ,EAAE,MAAM,+CAA+C,CAAC;AACzE,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,aAAa,EAAE,MAAM,+CAA+C,CAAC;AAE9E,OAAO,EAAE,SAAS,EAAE,MAAM,uDAAuD,CAAC;AAClF,OAAO,EAAE,QAAQ,EAAE,MAAM,yCAAyC,CAAC;AACnE,OAAO,EAAE,aAAa,EAAE,MAAM,sDAAsD,CAAC;AACrF,OAAO,EAAE,SAAS,EAAE,MAAM,yCAAyC,CAAC;AACpE,OAAO,EAAE,OAAO,EAAE,MAAM,uCAAuC,CAAC;AAChE,OAAO,EAAE,GAAG,EAAE,MAAM,mCAAmC,CAAC;AACxD,OAAO,EAAE,gBAAgB,EAAE,MAAM,2DAA2D,CAAC;AAC7F,OAAO,EAAE,qBAAqB,EAAE,MAAM,yDAAyD,CAAC;AAChG,OAAO,EAAE,aAAa,EAAE,MAAM,gEAAgE,CAAC;AAE/F,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AACtG,OAAO,KAAK,GAAG,MAAM,yCAAyC,CAAC;AAS/D,MAAM,OAAO,eAAe;IAE3B,YACU,MAA0B,EAC1B,QAAsB;QADtB,WAAM,GAAN,MAAM,CAAoB;QAC1B,aAAQ,GAAR,QAAQ,CAAc;IAC5B,CAAC;IAEL,SAAS;QACR,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,IAAI,OAAO,GAAG,IAAI,CAAC;QACnB,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;YACjD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;gBAChD,OAAO,GAAG,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACpD,CAAC;QACF,CAAC;QACD,OAAO,OAAO,CAAC;IAChB,CAAC;IAED,UAAU,CAAC,KAAc;QACxB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC;YACjD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;gBAChD,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;YAC1C,CAAC;QACF,CAAC;IACF,CAAC;CACD;AAED,MAAM,OAAO,WAAW;IAEvB,YACU,MAA4C,EAC5C,IAAuB;QADvB,WAAM,GAAN,MAAM,CAAsC;QAC5C,SAAI,GAAJ,IAAI,CAAmB;IAC7B,CAAC;IAEL,SAAS;QACR,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,YAAY,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QAExF,IAAI,OAAO,GAAG,IAAI,CAAC;QAEnB,oDAAoD;QACpD,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,2CAAmC,EAAE,CAAC;YACvD,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;QACvF,CAAC;QAED,8CAA8C;QAC9C,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;YACrD,IAAI,IAAI,YAAY,gBAAgB,EAAE,CAAC;gBACtC,OAAO,GAAG,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACpD,CAAC;QACF,CAAC;QAED,2DAA2D;QAC3D,IAAI,IAAI,CAAC,MAAM,YAAY,eAAe,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,2CAAmC,EAAE,CAAC;YACjG,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;gBACzC,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC;oBAC5C,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;wBACtD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;4BAChD,IAAI,IAAI,YAAY,gBAAgB,EAAE,CAAC;gCACtC,OAAO,GAAG,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;4BACpD,CAAC;wBACF,CAAC;oBACF,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;QAED,OAAO,OAAO,CAAC;IAChB,CAAC;IAED,UAAU,CAAC,KAAc;QACxB,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,YAAY,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QACxF,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;YACrD,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAC1C,CAAC;QAED,6DAA6D;QAC7D,IAAI,IAAI,CAAC,MAAM,YAAY,eAAe,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,2CAAmC,EAAE,CAAC;YACjG,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;gBACzC,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC;oBAC5C,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;wBACtD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;4BAChD,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;wBAC1C,CAAC;oBACF,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAED,UAAU;QACT,IAAI,IAAI,CAAC,MAAM,YAAY,eAAe,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,2CAAmC,EAAE,CAAC;YACjG,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACjC,IAAI,OAAO,GAAG,IAAI,CAAC;YACnB,KAAK,MAAM,QAAQ,IAAI,KAAK,CAAC,UAAU,EAAE,CAAC;gBACzC,KAAK,MAAM,IAAI,IAAI,QAAQ,CAAC,cAAc,EAAE,CAAC;oBAC5C,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;wBACtD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;4BAChD,IAAI,IAAI,YAAY,gBAAgB,EAAE,CAAC;gCACtC,OAAO,GAAG,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;4BACpD,CAAC;wBACF,CAAC;oBACF,CAAC;gBACF,CAAC;YACF,CAAC;YACD,OAAO,CAAC,OAAO,CAAC;QACjB,CAAC;QACD,OAAO,KAAK,CAAC;IACd,CAAC;CACD;AAED,MAAM,OAAO,eAAe;IAE3B,YACU,MAAmB,EACnB,GAAW,EACX,IAAkB,EAClB,MAAc,EAAW,SAAiB,EAAW,SAAiB,EAAW,MAAc;QAH/F,WAAM,GAAN,MAAM,CAAa;QACnB,QAAG,GAAH,GAAG,CAAQ;QACX,SAAI,GAAJ,IAAI,CAAc;QAClB,WAAM,GAAN,MAAM,CAAQ;QAAW,cAAS,GAAT,SAAS,CAAQ;QAAW,cAAS,GAAT,SAAS,CAAQ;QAAW,WAAM,GAAN,MAAM,CAAQ;IACrG,CAAC;IAEL,SAAS;QACR,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAC/B,IAAI,KAAK,YAAY,eAAe,EAAE,CAAC;YACtC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;QACtB,CAAC;QACD,OAAO,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACpD,CAAC;IAED,UAAU,CAAC,KAAc;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAC/B,IAAI,KAAK,YAAY,eAAe,EAAE,CAAC;YACtC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;QACtB,CAAC;QAED,6BAA6B;QAC7B,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAEvD,8DAA8D;QAC9D,IAAI,KAAK,EAAE,CAAC;YACX,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,EAAE,CAAC;gBAC5D,IAAI,IAAI,YAAY,gBAAgB,EAAE,CAAC;oBACjB,KAAM,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBAChE,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAED,UAAU;QACT,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;IACjC,CAAC;CACD;AAID,kBAAkB;AAEX,IAAM,kBAAkB,GAAxB,MAAM,kBAAkB;IAI9B,YACoB,iBAAqD,EACjD,qBAA6D;QADhD,sBAAiB,GAAjB,iBAAiB,CAAmB;QAChC,0BAAqB,GAArB,qBAAqB,CAAuB;QAJ9E,gBAAW,GAAY,IAAI,CAAC;IAK/B,CAAC;IAEL,WAAW,CAAC,OAA6C;QACxD,IAAI,OAAO,YAAY,WAAW,EAAE,CAAC;YACpC,OAAO,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;QAC1C,CAAC;QACD,IAAI,OAAO,YAAY,eAAe,EAAE,CAAC;YACxC,OAAO,KAAK,CAAC;QACd,CAAC;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,OAA6C;QAE9D,0BAA0B;QAC1B,IAAI,OAAO,YAAY,kBAAkB,EAAE,CAAC;YAC3C,OAAO,IAAI,CAAC,WAAW;gBACtB,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,WAAW,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBAChE,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,eAAe,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QACrE,CAAC;QAED,WAAW;QACX,IAAI,OAAO,YAAY,eAAe,EAAE,CAAC;YACxC,OAAO,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,WAAW,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;QACxF,CAAC;QAED,kBAAkB;QAClB,IAAI,OAAO,YAAY,WAAW,IAAI,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACzE,kFAAkF;YAClF,IAAI,SAAqB,CAAC;YAC1B,IAAI,mBAAgC,CAAC;YACrC,IAAI,CAAC;gBACJ,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAChF,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC;gBACvC,mBAAmB,GAAG,GAAG,CAAC;YAC3B,CAAC;YAAC,MAAM,CAAC;gBACR,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,EAAE,qBAAqB,EAAE,SAAS,CAAC,wBAAwB,EAAE,IAAI,CAAC,CAAC;gBACtI,mBAAmB,GAAG,SAAS,CAAC;YACjC,CAAC;YAED,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE;gBACvD,MAAM,KAAK,GAAG,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAEpE,aAAa;gBACb,MAAM,WAAW,GAAG,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;gBAChF,IAAI,SAAS,GAAG,EAAE,CAAC,CAAC,+CAA+C;gBACnE,KAAK,IAAI,GAAG,GAAG,WAAW,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,GAAG,EAAE,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC;oBACjH,SAAS,GAAG,KAAK,CAAC,WAAW,GAAG,WAAW,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;gBACjE,CAAC;gBAED,aAAa;gBACb,MAAM,SAAS,GAAG,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;gBAC5E,IAAI,SAAS,GAAG,CAAC,CAAC;gBAClB,KAAK,IAAI,GAAG,GAAG,SAAS,CAAC,sBAAsB,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,EAAE,SAAS,GAAG,EAAE,IAAI,GAAG,GAAG,SAAS,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,EAAE,CAAC;oBAC3H,SAAS,IAAI,SAAS,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;gBAC1E,CAAC;gBAED,OAAO,IAAI,eAAe,CACzB,OAAO,EACP,GAAG,EACH,IAAI,EACJ,SAAS,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,WAAW,GAAG,SAAS,EAAE,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC,EACpI,SAAS,CAAC,eAAe,CAAC,KAAK,CAAC,EAChC,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAC/H,SAAS,CAAC,eAAe,CAAC,IAAI,KAAK,CAAC,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,CAC5H,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,mBAAmB,CAAC,OAAO,EAAE,CAAC;YAC9B,OAAO,MAAM,CAAC;QACf,CAAC;QAED,OAAO,EAAE,CAAC;IACX,CAAC;CACD,CAAA;AAjFY,kBAAkB;IAK5B,WAAA,iBAAiB,CAAA;IACjB,WAAA,qBAAqB,CAAA;GANX,kBAAkB,CAiF9B;;AAGD,MAAM,OAAO,cAAc;IAE1B,OAAO,CAAC,CAAkB,EAAE,CAAkB;QAC7C,IAAI,CAAC,YAAY,WAAW,IAAI,CAAC,YAAY,WAAW,EAAE,CAAC;YAC1D,OAAO,yBAAyB,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;QAClD,CAAC;QAED,IAAI,CAAC,YAAY,eAAe,IAAI,CAAC,YAAY,eAAe,EAAE,CAAC;YAClE,OAAO,KAAK,CAAC,wBAAwB,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACvG,CAAC;QAED,OAAO,CAAC,CAAC;IACV,CAAC;CACD;AAED,MAAM,UAAU,yBAAyB,CAAC,CAAoB,EAAE,CAAoB;IACnF,OAAO,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;AACpD,CAAC;AAED,cAAc;AAEP,IAAM,6BAA6B,GAAnC,MAAM,6BAA6B;IAEzC,YAA4C,aAA4B;QAA5B,kBAAa,GAAb,aAAa,CAAe;IAAI,CAAC;IAE7E,kBAAkB;QACjB,OAAO,QAAQ,CAAC,IAAU,EAAE,IAAW,CAAC,CAAC;IAC1C,CAAC;IAED,OAAO,CAAC,QAAyB;QAChC,OAAO,UAAU,CAAC;IACnB,CAAC;IAED,YAAY,CAAC,OAAwB;QACpC,IAAI,OAAO,YAAY,WAAW,EAAE,CAAC;YACpC,IAAI,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACvC,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;oBAC7E,OAAO,QAAQ,CACd,IAAoB,EAAE,IAA6C,EACnE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAC7I,CAAC;gBAEH,CAAC;qBAAM,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,EAAE,CAAC;oBAC7D,OAAO,QAAQ,CACd,IAAoB,EAAE,IAAsC,EAC5D,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CACpE,CAAC;gBAEH,CAAC;qBAAM,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,EAAE,CAAC;oBAC7D,OAAO,QAAQ,CACd,IAAoB,EAAE,IAAsC,EAC5D,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CACpE,CAAC;gBACH,CAAC;qBAAM,CAAC;oBACP,OAAO,QAAQ,CACd,IAAe,EAAE,IAAwB,EACzC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CACpE,CAAC;gBACH,CAAC;YAEF,CAAC;iBAAM,CAAC;gBACP,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;oBAC7E,OAAO,QAAQ,CACd,IAAa,EAAE,IAAqB,EACpC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAC7I,CAAC;gBAEH,CAAC;qBAAM,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,EAAE,CAAC;oBAC7D,OAAO,QAAQ,CACd,IAAa,EAAE,IAAc,EAC7B,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CACpE,CAAC;gBAEH,CAAC;qBAAM,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,EAAE,CAAC;oBAC7D,OAAO,QAAQ,CACd,IAAa,EAAE,IAAc,EAC7B,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CACpE,CAAC;gBACH,CAAC;YACF,CAAC;QACF,CAAC;QAED,IAAI,OAAO,YAAY,eAAe,EAAE,CAAC;YACxC,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAClE,gBAAgB;gBAChB,OAAO,QAAQ,CAAC,IAAc,EAAE,IAAkC,EAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,EAAE,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;YACjK,CAAC;iBAAM,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAC3E,eAAe;gBACf,OAAO,QAAQ,CAAC,IAAU,EAAE,IAAwB,EAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;YAChI,CAAC;iBAAM,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAC3E,eAAe;gBACf,OAAO,QAAQ,CAAC,IAAa,EAAE,IAAyB,EAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;YACpI,CAAC;QACF,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;CACD,CAAA;AA5EY,6BAA6B;IAE5B,WAAA,aAAa,CAAA;GAFd,6BAA6B,CA4EzC;;AAED,YAAY;AAEZ,MAAM,OAAO,wBAAwB;IAEpC,KAAK,CAAC,OAAwB;QAC7B,IAAI,OAAO,YAAY,WAAW,EAAE,CAAC;YACpC,OAAO,OAAO,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,MAAM,YAAY,eAAe,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QAC/H,CAAC;aAAM,IAAI,OAAO,YAAY,eAAe,EAAE,CAAC;YAC/C,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC;QACzD,CAAC;aAAM,CAAC;YACP,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAClD,CAAC;IACF,CAAC;CACD;AAED,eAAe;AAEf,MAAM,uBAAuB;IAK5B,YAAY,SAAsB;QACjC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QACpC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,IAAI,SAAS,CAAC,SAAS,CAAC,CAAC;IACvC,CAAC;CACD;AAEM,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;;aAEnB,OAAE,GAAW,yBAAX,AAAoC,CAAC;IAIvD,YAA2B,aAA6C;QAA5B,kBAAa,GAAb,aAAa,CAAe;QAF/D,eAAU,GAAW,yBAAuB,CAAC,EAAE,CAAC;IAEmB,CAAC;IAE7E,cAAc,CAAC,SAAsB;QACpC,OAAO,IAAI,uBAAuB,CAAC,SAAS,CAAC,CAAC;IAC/C,CAAC;IAED,aAAa,CAAC,IAA4C,EAAE,MAAc,EAAE,QAAiC;QAE5G,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;QAC3D,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QAC5D,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;QAE/B,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC3C,IAAI,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC;YAC9C,MAAM;YACN,MAAM,SAAS,GAAG,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YAC3D,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,cAAc,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YACrE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;QAGtJ,CAAC;aAAM,IAAI,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC;YACzC,mBAAmB;YACnB,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;YACrC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;YACtF,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;QAExF,CAAC;aAAM,IAAI,QAAQ,CAAC,QAAQ,EAAE,CAAC;YAC9B,mBAAmB;YACnB,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;YACrC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;YAC3F,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QAC9F,CAAC;QAED,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,WAAW,EAAE;YAC7D,kBAAkB,EAAE,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC;SAClD,CAAC,CAAC;IACJ,CAAC;IAED,eAAe,CAAC,QAAiC;QAChD,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;;AA9CW,uBAAuB;IAMtB,WAAA,aAAa,CAAA;GANd,uBAAuB,CA+CnC;;AAED,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;IASxB,YACC,SAAsB,EACtB,cAA8B,EACf,aAA6C;QAA5B,kBAAa,GAAb,aAAa,CAAe;QAV5C,iBAAY,GAAG,IAAI,eAAe,EAAE,CAAC;QACrC,sBAAiB,GAAG,IAAI,eAAe,EAAE,CAAC;QAY1D,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,CAAC,SAAS,GAAG,eAAe,CAAC;QAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,CAAC;QACjC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAChD,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEtC,IAAI,CAAC,MAAM,GAAG,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5E,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,SAAS,CAAC;QACpC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACtC,CAAC;IAED,OAAO;QACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;QAC5B,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;IAED,GAAG,CAAC,OAAoB,EAAE,KAA6B;QACtD,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;QAE/B,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC;QAC/C,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,GAAG,EAAE;YACnF,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YAC7E,4BAA4B;YAC5B,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC;gBACvB,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC,GAAG;gBAC1B,IAAI,EAAE,QAAQ,CAAC,IAAc,EAAE,IAAW,EAAE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;aAC1L,EAAE;gBACF,eAAe,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE;aAChD,CAAC,CAAC;YAEH,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAe,EAAE,IAAY,CAAC,CAAC;QAEnE,CAAC;aAAM,CAAC;YACP,6BAA6B;YAC7B,MAAM,OAAO,GAAG;gBACf,OAAO,EAAE,aAAa,CAAC,KAAK,CAAC;gBAC7B,QAAQ,EAAE,QAAQ,CAAC,IAAI;gBACvB,eAAe,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE;gBAChD,YAAY,EAAY,EAAE;aAC1B,CAAC;YACF,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,EAAE,CAAC;gBACtD,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAe,EAAE,IAAY,CAAC,CAAC;YACnE,CAAC;iBAAM,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,uCAA+B,EAAE,CAAC;gBAC7D,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,QAAQ,CAAC,IAAY,EAAE,IAAY,CAAC,CAAC;gBAC/D,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACrC,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,EAAE,CAAC;YAC9B,CAAC;YACD,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QAChD,CAAC;IACF,CAAC;CACD,CAAA;AAzEK,mBAAmB;IAYtB,WAAA,aAAa,CAAA;GAZV,mBAAmB,CAyExB;AAEM,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;;aAEf,OAAE,GAAW,qBAAX,AAAgC,CAAC;IAInD,YACkB,eAA+B,EACjC,aAA6C;QAD3C,oBAAe,GAAf,eAAe,CAAgB;QAChB,kBAAa,GAAb,aAAa,CAAe;QAJpD,eAAU,GAAW,qBAAmB,CAAC,EAAE,CAAC;IAKjD,CAAC;IAEL,cAAc,CAAC,SAAsB;QACpC,OAAO,IAAI,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACrF,CAAC;IAED,aAAa,CAAC,IAAwC,EAAE,MAAc,EAAE,QAA6B;QACpG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IAC7C,CAAC;IAED,eAAe,CAAC,QAA6B;QAC5C,QAAQ,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;;AArBW,mBAAmB;IAQ7B,WAAA,aAAa,CAAA;GARH,mBAAmB,CAsB/B;;AAED,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;IAS5B,YAAY,SAAsB,EAAiB,aAA6C;QAA5B,kBAAa,GAAb,aAAa,CAAe;QAP/E,iBAAY,GAAG,IAAI,eAAe,EAAE,CAAC;QACrC,sBAAiB,GAAG,IAAI,eAAe,EAAE,CAAC;QAO1D,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAEpC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,CAAC,SAAS,GAAG,eAAe,CAAC;QAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,CAAC;QACjC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;QAChD,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAEtC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC3C,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAElC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;IACtE,CAAC;IAED,OAAO;QACN,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;IAC7B,CAAC;IAED,GAAG,CAAC,OAAwB;QAC3B,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;QAE/B,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE;YAClF,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAC3C,CAAC,CAAC,cAAc,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;YAChC,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;YAC7C,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC;QAChD,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC,SAAS,EAAE,CAAC;YAC7C,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,OAAO,CAAC,UAAU,EAAE,CAAC;QAChD,CAAC;QAED,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,IAAI,OAAO,CAAC,MAAM,CAAC;QACxB,KAAK,IAAI,OAAO,CAAC,SAAS,CAAC;QAC3B,KAAK,IAAI,OAAO,CAAC,SAAS,CAAC;QAC3B,KAAK,IAAI,OAAO,CAAC,MAAM,CAAC;QAExB,MAAM,eAAe,GAAe,EAAE,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,YAAY,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC;QACtJ,MAAM,eAAe,GAAe,EAAE,KAAK,EAAE,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,eAAe,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,YAAY,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC;QAElJ,IAAI,KAAyB,CAAC;QAC9B,MAAM,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;QAC3C,IAAI,QAAQ,IAAI,QAAQ,CAAC,WAAW,EAAE,CAAC;YACtC,KAAK,GAAG,QAAQ,CAAC,IAAO,EAAE,IAAW,EAAE,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;QAC9E,CAAC;aAAM,IAAI,QAAQ,EAAE,CAAC;YACrB,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;QACxB,CAAC;QAED,MAAM,QAAQ,GAAG,QAAQ,EAAE,QAAQ,CAAC;QACpC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACnC,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;YAEnC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;YACxD,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;YAEzD,IAAI,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,CAAC;gBACrC,MAAM;gBACN,MAAM,SAAS,GAAG,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBAClD,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,cAAc,SAAS,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;gBAClE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAGjI,CAAC;iBAAM,IAAI,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC;gBAChC,mBAAmB;gBACnB,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,UAAU,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC1E,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;YAE5E,CAAC;iBAAM,CAAC;gBACP,mBAAmB;gBACnB,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,UAAU,CAAC;gBAClC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,mBAAmB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;gBAC/E,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,EAAE,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;YAClF,CAAC;QACF,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,eAAe,EAAE,eAAe,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QACxE,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;IAChC,CAAC;CACD,CAAA;AA9FK,uBAAuB;IASS,WAAA,aAAa,CAAA;GAT7C,uBAAuB,CA8F5B;AAEM,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;;aAEnB,OAAE,GAAG,yBAAH,AAA4B,CAAC;IAI/C,YAA2B,aAA6C;QAA5B,kBAAa,GAAb,aAAa,CAAe;QAF/D,eAAU,GAAW,yBAAuB,CAAC,EAAE,CAAC;IAEmB,CAAC;IAE7E,cAAc,CAAC,SAAsB;QACpC,OAAO,IAAI,uBAAuB,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACnE,CAAC;IAED,aAAa,CAAC,EAAE,OAAO,EAA0C,EAAE,MAAc,EAAE,QAAiC;QACnH,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;IAED,eAAe,CAAC,SAAkC,IAAU,CAAC;;AAhBjD,uBAAuB;IAMtB,WAAA,aAAa,CAAA;GANd,uBAAuB,CAiBnC;;AAED,MAAM,OAAO,gBAAgB;IAE5B,SAAS;QACR,OAAO,EAAE,CAAC;IACX,CAAC;IAED,aAAa,CAAC,OAAwB;QAErC,IAAI,OAAO,YAAY,WAAW,EAAE,CAAC;YACpC,OAAO,mBAAmB,CAAC,EAAE,CAAC;QAC/B,CAAC;aAAM,IAAI,OAAO,YAAY,eAAe,EAAE,CAAC;YAC/C,OAAO,uBAAuB,CAAC,EAAE,CAAC;QACnC,CAAC;aAAM,CAAC;YACP,OAAO,uBAAuB,CAAC,EAAE,CAAC;QACnC,CAAC;IACF,CAAC;CACD;AAGD,MAAM,OAAO,yBAAyB;IAErC,0BAA0B,CAAC,OAAwB;QAClD,IAAI,OAAO,YAAY,WAAW,EAAE,CAAC;YACpC,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACnC,CAAC;aAAM,IAAI,OAAO,YAAY,eAAe,EAAE,CAAC;YAC/C,OAAO,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC;QACxC,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;CACD","file":"bulkEditTree.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAsyncDataSource, ITreeRenderer, ITreeNode, ITreeSorter } from '../../../../../base/browser/ui/tree/tree.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { FuzzyScore, createMatches } from '../../../../../base/common/filters.js';\nimport { IResourceLabel, ResourceLabels } from '../../../../browser/labels.js';\nimport { HighlightedLabel, IHighlight } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IIdentityProvider, IListVirtualDelegate, IKeyboardNavigationLabelProvider } from '../../../../../base/browser/ui/list/list.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { IDisposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { TextModel } from '../../../../../editor/common/model/textModel.js';\nimport { BulkFileOperations, BulkFileOperation, BulkFileOperationType, BulkTextEdit, BulkCategory } from './bulkEditPreview.js';\nimport { FileKind } from '../../../../../platform/files/common/files.js';\nimport { localize } from '../../../../../nls.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport type { IListAccessibilityProvider } from '../../../../../base/browser/ui/list/listWidget.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { basename } from '../../../../../base/common/resources.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { compare } from '../../../../../base/common/strings.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ResourceFileEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../../editor/common/languages/modesRegistry.js';\nimport { SnippetParser } from '../../../../../editor/contrib/snippet/browser/snippetParser.js';\nimport { AriaRole } from '../../../../../base/browser/ui/aria/aria.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport * as css from '../../../../../base/browser/cssValue.js';\n\n// --- VIEW MODEL\n\nexport interface ICheckable {\n\tisChecked(): boolean;\n\tsetChecked(value: boolean): void;\n}\n\nexport class CategoryElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: BulkFileOperations,\n\t\treadonly category: BulkCategory\n\t) { }\n\n\tisChecked(): boolean {\n\t\tconst model = this.parent;\n\t\tlet checked = true;\n\t\tfor (const file of this.category.fileOperations) {\n\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t}\n\t\t}\n\t\treturn checked;\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tconst model = this.parent;\n\t\tfor (const file of this.category.fileOperations) {\n\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class FileElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: CategoryElement | BulkFileOperations,\n\t\treadonly edit: BulkFileOperation\n\t) { }\n\n\tisChecked(): boolean {\n\t\tconst model = this.parent instanceof CategoryElement ? this.parent.parent : this.parent;\n\n\t\tlet checked = true;\n\n\t\t// only text edit children -> reflect children state\n\t\tif (this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tchecked = !this.edit.textEdits.every(edit => !model.checked.isChecked(edit.textEdit));\n\t\t}\n\n\t\t// multiple file edits -> reflect single state\n\t\tfor (const edit of this.edit.originalEdits.values()) {\n\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t}\n\t\t}\n\n\t\t// multiple categories and text change -> read all elements\n\t\tif (this.parent instanceof CategoryElement && this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn checked;\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tconst model = this.parent instanceof CategoryElement ? this.parent.parent : this.parent;\n\t\tfor (const edit of this.edit.originalEdits.values()) {\n\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t}\n\n\t\t// multiple categories and file change -> update all elements\n\t\tif (this.parent instanceof CategoryElement && this.edit.type !== BulkFileOperationType.TextEdit) {\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisDisabled(): boolean {\n\t\tif (this.parent instanceof CategoryElement && this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tconst model = this.parent.parent;\n\t\t\tlet checked = true;\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !checked;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class TextEditElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: FileElement,\n\t\treadonly idx: number,\n\t\treadonly edit: BulkTextEdit,\n\t\treadonly prefix: string, readonly selecting: string, readonly inserting: string, readonly suffix: string\n\t) { }\n\n\tisChecked(): boolean {\n\t\tlet model = this.parent.parent;\n\t\tif (model instanceof CategoryElement) {\n\t\t\tmodel = model.parent;\n\t\t}\n\t\treturn model.checked.isChecked(this.edit.textEdit);\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tlet model = this.parent.parent;\n\t\tif (model instanceof CategoryElement) {\n\t\t\tmodel = model.parent;\n\t\t}\n\n\t\t// check/uncheck this element\n\t\tmodel.checked.updateChecked(this.edit.textEdit, value);\n\n\t\t// make sure parent is checked when this element is checked...\n\t\tif (value) {\n\t\t\tfor (const edit of this.parent.edit.originalEdits.values()) {\n\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t(<BulkFileOperations>model).checked.updateChecked(edit, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.parent.isDisabled();\n\t}\n}\n\nexport type BulkEditElement = CategoryElement | FileElement | TextEditElement;\n\n// --- DATA SOURCE\n\nexport class BulkEditDataSource implements IAsyncDataSource<BulkFileOperations, BulkEditElement> {\n\n\tpublic groupByFile: boolean = true;\n\n\tconstructor(\n\t\t@ITextModelService private readonly _textModelService: ITextModelService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) { }\n\n\thasChildren(element: BulkFileOperations | BulkEditElement): boolean {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn element.edit.textEdits.length > 0;\n\t\t}\n\t\tif (element instanceof TextEditElement) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync getChildren(element: BulkFileOperations | BulkEditElement): Promise<BulkEditElement[]> {\n\n\t\t// root -> file/text edits\n\t\tif (element instanceof BulkFileOperations) {\n\t\t\treturn this.groupByFile\n\t\t\t\t? element.fileOperations.map(op => new FileElement(element, op))\n\t\t\t\t: element.categories.map(cat => new CategoryElement(element, cat));\n\t\t}\n\n\t\t// category\n\t\tif (element instanceof CategoryElement) {\n\t\t\treturn Array.from(element.category.fileOperations, op => new FileElement(element, op));\n\t\t}\n\n\t\t// file: text edit\n\t\tif (element instanceof FileElement && element.edit.textEdits.length > 0) {\n\t\t\t// const previewUri = BulkEditPreviewProvider.asPreviewUri(element.edit.resource);\n\t\t\tlet textModel: ITextModel;\n\t\t\tlet textModelDisposable: IDisposable;\n\t\t\ttry {\n\t\t\t\tconst ref = await this._textModelService.createModelReference(element.edit.uri);\n\t\t\t\ttextModel = ref.object.textEditorModel;\n\t\t\t\ttextModelDisposable = ref;\n\t\t\t} catch {\n\t\t\t\ttextModel = this._instantiationService.createInstance(TextModel, '', PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null);\n\t\t\t\ttextModelDisposable = textModel;\n\t\t\t}\n\n\t\t\tconst result = element.edit.textEdits.map((edit, idx) => {\n\t\t\t\tconst range = textModel.validateRange(edit.textEdit.textEdit.range);\n\n\t\t\t\t//prefix-math\n\t\t\t\tconst startTokens = textModel.tokenization.getLineTokens(range.startLineNumber);\n\t\t\t\tlet prefixLen = 23; // default value for the no tokens/grammar case\n\t\t\t\tfor (let idx = startTokens.findTokenIndexAtOffset(range.startColumn - 1) - 1; prefixLen < 50 && idx >= 0; idx--) {\n\t\t\t\t\tprefixLen = range.startColumn - startTokens.getStartOffset(idx);\n\t\t\t\t}\n\n\t\t\t\t//suffix-math\n\t\t\t\tconst endTokens = textModel.tokenization.getLineTokens(range.endLineNumber);\n\t\t\t\tlet suffixLen = 0;\n\t\t\t\tfor (let idx = endTokens.findTokenIndexAtOffset(range.endColumn - 1); suffixLen < 50 && idx < endTokens.getCount(); idx++) {\n\t\t\t\t\tsuffixLen += endTokens.getEndOffset(idx) - endTokens.getStartOffset(idx);\n\t\t\t\t}\n\n\t\t\t\treturn new TextEditElement(\n\t\t\t\t\telement,\n\t\t\t\t\tidx,\n\t\t\t\t\tedit,\n\t\t\t\t\ttextModel.getValueInRange(new Range(range.startLineNumber, range.startColumn - prefixLen, range.startLineNumber, range.startColumn)),\n\t\t\t\t\ttextModel.getValueInRange(range),\n\t\t\t\t\t!edit.textEdit.textEdit.insertAsSnippet ? edit.textEdit.textEdit.text : SnippetParser.asInsertText(edit.textEdit.textEdit.text),\n\t\t\t\t\ttextModel.getValueInRange(new Range(range.endLineNumber, range.endColumn, range.endLineNumber, range.endColumn + suffixLen))\n\t\t\t\t);\n\t\t\t});\n\n\t\t\ttextModelDisposable.dispose();\n\t\t\treturn result;\n\t\t}\n\n\t\treturn [];\n\t}\n}\n\n\nexport class BulkEditSorter implements ITreeSorter<BulkEditElement> {\n\n\tcompare(a: BulkEditElement, b: BulkEditElement): number {\n\t\tif (a instanceof FileElement && b instanceof FileElement) {\n\t\t\treturn compareBulkFileOperations(a.edit, b.edit);\n\t\t}\n\n\t\tif (a instanceof TextEditElement && b instanceof TextEditElement) {\n\t\t\treturn Range.compareRangesUsingStarts(a.edit.textEdit.textEdit.range, b.edit.textEdit.textEdit.range);\n\t\t}\n\n\t\treturn 0;\n\t}\n}\n\nexport function compareBulkFileOperations(a: BulkFileOperation, b: BulkFileOperation): number {\n\treturn compare(a.uri.toString(), b.uri.toString());\n}\n\n// --- ACCESSI\n\nexport class BulkEditAccessibilityProvider implements IListAccessibilityProvider<BulkEditElement> {\n\n\tconstructor(@ILabelService private readonly _labelService: ILabelService) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('bulkEdit', \"Bulk Edit\");\n\t}\n\n\tgetRole(_element: BulkEditElement): AriaRole {\n\t\treturn 'checkbox';\n\t}\n\n\tgetAriaLabel(element: BulkEditElement): string | null {\n\t\tif (element instanceof FileElement) {\n\t\t\tif (element.edit.textEdits.length > 0) {\n\t\t\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.renameAndEdit', \"Renaming {0} to {1}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.createAndEdit', \"Creating {0}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.deleteAndEdit', \"Deleting {0}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.editOnly', \"{0}, making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.rename', \"Renaming {0} to {1}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.create', \"Creating {0}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.delete', \"Deleting {0}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (element instanceof TextEditElement) {\n\t\t\tif (element.selecting.length > 0 && element.inserting.length > 0) {\n\t\t\t\t// edit: replace\n\t\t\t\treturn localize('aria.replace', \"line {0}, replacing {1} with {2}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting, element.inserting);\n\t\t\t} else if (element.selecting.length > 0 && element.inserting.length === 0) {\n\t\t\t\t// edit: delete\n\t\t\t\treturn localize('aria.del', \"line {0}, removing {1}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting);\n\t\t\t} else if (element.selecting.length === 0 && element.inserting.length > 0) {\n\t\t\t\t// edit: insert\n\t\t\t\treturn localize('aria.insert', \"line {0}, inserting {1}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// --- IDENT\n\nexport class BulkEditIdentityProvider implements IIdentityProvider<BulkEditElement> {\n\n\tgetId(element: BulkEditElement): { toString(): string } {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn element.edit.uri + (element.parent instanceof CategoryElement ? JSON.stringify(element.parent.category.metadata) : '');\n\t\t} else if (element instanceof TextEditElement) {\n\t\t\treturn element.parent.edit.uri.toString() + element.idx;\n\t\t} else {\n\t\t\treturn JSON.stringify(element.category.metadata);\n\t\t}\n\t}\n}\n\n// --- RENDERER\n\nclass CategoryElementTemplate {\n\n\treadonly icon: HTMLDivElement;\n\treadonly label: IconLabel;\n\n\tconstructor(container: HTMLElement) {\n\t\tcontainer.classList.add('category');\n\t\tthis.icon = document.createElement('div');\n\t\tcontainer.appendChild(this.icon);\n\t\tthis.label = new IconLabel(container);\n\t}\n}\n\nexport class CategoryElementRenderer implements ITreeRenderer<CategoryElement, FuzzyScore, CategoryElementTemplate> {\n\n\tstatic readonly id: string = 'CategoryElementRenderer';\n\n\treadonly templateId: string = CategoryElementRenderer.id;\n\n\tconstructor(@IThemeService private readonly _themeService: IThemeService) { }\n\n\trenderTemplate(container: HTMLElement): CategoryElementTemplate {\n\t\treturn new CategoryElementTemplate(container);\n\t}\n\n\trenderElement(node: ITreeNode<CategoryElement, FuzzyScore>, _index: number, template: CategoryElementTemplate): void {\n\n\t\ttemplate.icon.style.setProperty('--background-dark', null);\n\t\ttemplate.icon.style.setProperty('--background-light', null);\n\t\ttemplate.icon.style.color = '';\n\n\t\tconst { metadata } = node.element.category;\n\t\tif (ThemeIcon.isThemeIcon(metadata.iconPath)) {\n\t\t\t// css\n\t\t\tconst className = ThemeIcon.asClassName(metadata.iconPath);\n\t\t\ttemplate.icon.className = className ? `theme-icon ${className}` : '';\n\t\t\ttemplate.icon.style.color = metadata.iconPath.color ? this._themeService.getColorTheme().getColor(metadata.iconPath.color.id)?.toString() ?? '' : '';\n\n\n\t\t} else if (URI.isUri(metadata.iconPath)) {\n\t\t\t// background-image\n\t\t\ttemplate.icon.className = 'uri-icon';\n\t\t\ttemplate.icon.style.setProperty('--background-dark', css.asCSSUrl(metadata.iconPath));\n\t\t\ttemplate.icon.style.setProperty('--background-light', css.asCSSUrl(metadata.iconPath));\n\n\t\t} else if (metadata.iconPath) {\n\t\t\t// background-image\n\t\t\ttemplate.icon.className = 'uri-icon';\n\t\t\ttemplate.icon.style.setProperty('--background-dark', css.asCSSUrl(metadata.iconPath.dark));\n\t\t\ttemplate.icon.style.setProperty('--background-light', css.asCSSUrl(metadata.iconPath.light));\n\t\t}\n\n\t\ttemplate.label.setLabel(metadata.label, metadata.description, {\n\t\t\tdescriptionMatches: createMatches(node.filterData),\n\t\t});\n\t}\n\n\tdisposeTemplate(template: CategoryElementTemplate): void {\n\t\ttemplate.label.dispose();\n\t}\n}\n\nclass FileElementTemplate {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tprivate readonly _checkbox: HTMLInputElement;\n\tprivate readonly _label: IResourceLabel;\n\tprivate readonly _details: HTMLSpanElement;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tresourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) {\n\n\t\tthis._checkbox = document.createElement('input');\n\t\tthis._checkbox.className = 'edit-checkbox';\n\t\tthis._checkbox.type = 'checkbox';\n\t\tthis._checkbox.setAttribute('role', 'checkbox');\n\t\tcontainer.appendChild(this._checkbox);\n\n\t\tthis._label = resourceLabels.create(container, { supportHighlights: true });\n\n\t\tthis._details = document.createElement('span');\n\t\tthis._details.className = 'details';\n\t\tcontainer.appendChild(this._details);\n\t}\n\n\tdispose(): void {\n\t\tthis._localDisposables.dispose();\n\t\tthis._disposables.dispose();\n\t\tthis._label.dispose();\n\t}\n\n\tset(element: FileElement, score: FuzzyScore | undefined) {\n\t\tthis._localDisposables.clear();\n\n\t\tthis._checkbox.checked = element.isChecked();\n\t\tthis._checkbox.disabled = element.isDisabled();\n\t\tthis._localDisposables.add(dom.addDisposableListener(this._checkbox, 'change', () => {\n\t\t\telement.setChecked(this._checkbox.checked);\n\t\t}));\n\n\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t// rename: oldName → newName\n\t\t\tthis._label.setResource({\n\t\t\t\tresource: element.edit.uri,\n\t\t\t\tname: localize('rename.label', \"{0} → {1}\", this._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })),\n\t\t\t}, {\n\t\t\t\tfileDecorations: { colors: true, badges: false }\n\t\t\t});\n\n\t\t\tthis._details.innerText = localize('detail.rename', \"(renaming)\");\n\n\t\t} else {\n\t\t\t// create, delete, edit: NAME\n\t\t\tconst options = {\n\t\t\t\tmatches: createMatches(score),\n\t\t\t\tfileKind: FileKind.FILE,\n\t\t\t\tfileDecorations: { colors: true, badges: false },\n\t\t\t\textraClasses: <string[]>[]\n\t\t\t};\n\t\t\tif (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\tthis._details.innerText = localize('detail.create', \"(creating)\");\n\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\tthis._details.innerText = localize('detail.del', \"(deleting)\");\n\t\t\t\toptions.extraClasses.push('delete');\n\t\t\t} else {\n\t\t\t\tthis._details.innerText = '';\n\t\t\t}\n\t\t\tthis._label.setFile(element.edit.uri, options);\n\t\t}\n\t}\n}\n\nexport class FileElementRenderer implements ITreeRenderer<FileElement, FuzzyScore, FileElementTemplate> {\n\n\tstatic readonly id: string = 'FileElementRenderer';\n\n\treadonly templateId: string = FileElementRenderer.id;\n\n\tconstructor(\n\t\tprivate readonly _resourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): FileElementTemplate {\n\t\treturn new FileElementTemplate(container, this._resourceLabels, this._labelService);\n\t}\n\n\trenderElement(node: ITreeNode<FileElement, FuzzyScore>, _index: number, template: FileElementTemplate): void {\n\t\ttemplate.set(node.element, node.filterData);\n\t}\n\n\tdisposeTemplate(template: FileElementTemplate): void {\n\t\ttemplate.dispose();\n\t}\n}\n\nclass TextEditElementTemplate {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tprivate readonly _checkbox: HTMLInputElement;\n\tprivate readonly _icon: HTMLDivElement;\n\tprivate readonly _label: HighlightedLabel;\n\n\tconstructor(container: HTMLElement, @IThemeService private readonly _themeService: IThemeService) {\n\t\tcontainer.classList.add('textedit');\n\n\t\tthis._checkbox = document.createElement('input');\n\t\tthis._checkbox.className = 'edit-checkbox';\n\t\tthis._checkbox.type = 'checkbox';\n\t\tthis._checkbox.setAttribute('role', 'checkbox');\n\t\tcontainer.appendChild(this._checkbox);\n\n\t\tthis._icon = document.createElement('div');\n\t\tcontainer.appendChild(this._icon);\n\n\t\tthis._label = this._disposables.add(new HighlightedLabel(container));\n\t}\n\n\tdispose(): void {\n\t\tthis._localDisposables.dispose();\n\t\tthis._disposables.dispose();\n\t}\n\n\tset(element: TextEditElement) {\n\t\tthis._localDisposables.clear();\n\n\t\tthis._localDisposables.add(dom.addDisposableListener(this._checkbox, 'change', e => {\n\t\t\telement.setChecked(this._checkbox.checked);\n\t\t\te.preventDefault();\n\t\t}));\n\t\tif (element.parent.isChecked()) {\n\t\t\tthis._checkbox.checked = element.isChecked();\n\t\t\tthis._checkbox.disabled = element.isDisabled();\n\t\t} else {\n\t\t\tthis._checkbox.checked = element.isChecked();\n\t\t\tthis._checkbox.disabled = element.isDisabled();\n\t\t}\n\n\t\tlet value = '';\n\t\tvalue += element.prefix;\n\t\tvalue += element.selecting;\n\t\tvalue += element.inserting;\n\t\tvalue += element.suffix;\n\n\t\tconst selectHighlight: IHighlight = { start: element.prefix.length, end: element.prefix.length + element.selecting.length, extraClasses: ['remove'] };\n\t\tconst insertHighlight: IHighlight = { start: selectHighlight.end, end: selectHighlight.end + element.inserting.length, extraClasses: ['insert'] };\n\n\t\tlet title: string | undefined;\n\t\tconst { metadata } = element.edit.textEdit;\n\t\tif (metadata && metadata.description) {\n\t\t\ttitle = localize('title', \"{0} - {1}\", metadata.label, metadata.description);\n\t\t} else if (metadata) {\n\t\t\ttitle = metadata.label;\n\t\t}\n\n\t\tconst iconPath = metadata?.iconPath;\n\t\tif (!iconPath) {\n\t\t\tthis._icon.style.display = 'none';\n\t\t} else {\n\t\t\tthis._icon.style.display = 'block';\n\n\t\t\tthis._icon.style.setProperty('--background-dark', null);\n\t\t\tthis._icon.style.setProperty('--background-light', null);\n\n\t\t\tif (ThemeIcon.isThemeIcon(iconPath)) {\n\t\t\t\t// css\n\t\t\t\tconst className = ThemeIcon.asClassName(iconPath);\n\t\t\t\tthis._icon.className = className ? `theme-icon ${className}` : '';\n\t\t\t\tthis._icon.style.color = iconPath.color ? this._themeService.getColorTheme().getColor(iconPath.color.id)?.toString() ?? '' : '';\n\n\n\t\t\t} else if (URI.isUri(iconPath)) {\n\t\t\t\t// background-image\n\t\t\t\tthis._icon.className = 'uri-icon';\n\t\t\t\tthis._icon.style.setProperty('--background-dark', css.asCSSUrl(iconPath));\n\t\t\t\tthis._icon.style.setProperty('--background-light', css.asCSSUrl(iconPath));\n\n\t\t\t} else {\n\t\t\t\t// background-image\n\t\t\t\tthis._icon.className = 'uri-icon';\n\t\t\t\tthis._icon.style.setProperty('--background-dark', css.asCSSUrl(iconPath.dark));\n\t\t\t\tthis._icon.style.setProperty('--background-light', css.asCSSUrl(iconPath.light));\n\t\t\t}\n\t\t}\n\n\t\tthis._label.set(value, [selectHighlight, insertHighlight], title, true);\n\t\tthis._icon.title = title || '';\n\t}\n}\n\nexport class TextEditElementRenderer implements ITreeRenderer<TextEditElement, FuzzyScore, TextEditElementTemplate> {\n\n\tstatic readonly id = 'TextEditElementRenderer';\n\n\treadonly templateId: string = TextEditElementRenderer.id;\n\n\tconstructor(@IThemeService private readonly _themeService: IThemeService) { }\n\n\trenderTemplate(container: HTMLElement): TextEditElementTemplate {\n\t\treturn new TextEditElementTemplate(container, this._themeService);\n\t}\n\n\trenderElement({ element }: ITreeNode<TextEditElement, FuzzyScore>, _index: number, template: TextEditElementTemplate): void {\n\t\ttemplate.set(element);\n\t}\n\n\tdisposeTemplate(_template: TextEditElementTemplate): void { }\n}\n\nexport class BulkEditDelegate implements IListVirtualDelegate<BulkEditElement> {\n\n\tgetHeight(): number {\n\t\treturn 23;\n\t}\n\n\tgetTemplateId(element: BulkEditElement): string {\n\n\t\tif (element instanceof FileElement) {\n\t\t\treturn FileElementRenderer.id;\n\t\t} else if (element instanceof TextEditElement) {\n\t\t\treturn TextEditElementRenderer.id;\n\t\t} else {\n\t\t\treturn CategoryElementRenderer.id;\n\t\t}\n\t}\n}\n\n\nexport class BulkEditNaviLabelProvider implements IKeyboardNavigationLabelProvider<BulkEditElement> {\n\n\tgetKeyboardNavigationLabel(element: BulkEditElement) {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn basename(element.edit.uri);\n\t\t} else if (element instanceof CategoryElement) {\n\t\t\treturn element.category.metadata.label;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"]}