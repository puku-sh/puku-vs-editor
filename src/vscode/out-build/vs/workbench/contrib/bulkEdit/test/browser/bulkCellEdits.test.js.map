{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/bulkEdit/test/browser/bulkCellEdits.test.ts","vs/workbench/contrib/bulkEdit/test/browser/bulkCellEdits.test.ts"],"names":[],"mappings":"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","file":"bulkCellEdits.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mockObject } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IProgress } from '../../../../../platform/progress/common/progress.js';\nimport { UndoRedoGroup, UndoRedoSource } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { BulkCellEdits, ResourceNotebookCellEdit } from '../../browser/bulkCellEdits.js';\nimport { NotebookTextModel } from '../../../notebook/common/model/notebookTextModel.js';\nimport { CellEditType, CellUri, IResolvedNotebookEditorModel } from '../../../notebook/common/notebookCommon.js';\nimport { INotebookEditorModelResolverService } from '../../../notebook/common/notebookEditorModelResolverService.js';\nimport { TestEditorService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('BulkCellEdits', function () {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tasync function runTest(inputUri: URI, resolveUri: URI) {\n\t\tconst progress: IProgress<void> = { report: _ => { } };\n\t\tconst editorService = store.add(new TestEditorService());\n\n\t\tconst notebook = mockObject<NotebookTextModel>()();\n\t\tnotebook.uri.returns(URI.file('/project/notebook.ipynb'));\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst notebookEditorModel = mockObject<IResolvedNotebookEditorModel>()({ notebook: notebook as any });\n\t\tnotebookEditorModel.isReadonly.returns(false);\n\n\t\tconst notebookService = mockObject<INotebookEditorModelResolverService>()();\n\t\tnotebookService.resolve.returns({ object: notebookEditorModel, dispose: () => { } });\n\n\t\tconst edits = [\n\t\t\tnew ResourceNotebookCellEdit(inputUri, { index: 0, count: 1, editType: CellEditType.Replace, cells: [] })\n\t\t];\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst bce = new BulkCellEdits(new UndoRedoGroup(), new UndoRedoSource(), progress, CancellationToken.None, edits, editorService, notebookService as any);\n\t\tawait bce.apply();\n\n\t\tconst resolveArgs = notebookService.resolve.args[0];\n\t\tassert.strictEqual(resolveArgs[0].toString(), resolveUri.toString());\n\t}\n\n\tconst notebookUri = URI.file('/foo/bar.ipynb');\n\ttest('works with notebook URI', async () => {\n\t\tawait runTest(notebookUri, notebookUri);\n\t});\n\n\ttest('maps cell URI to notebook URI', async () => {\n\t\tawait runTest(CellUri.generate(notebookUri, 5), notebookUri);\n\t});\n\n\ttest('throws for invalid cell URI', async () => {\n\t\tconst badCellUri = CellUri.generate(notebookUri, 5).with({ fragment: '' });\n\t\tawait assert.rejects(async () => await runTest(badCellUri, notebookUri));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mockObject } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IProgress } from '../../../../../platform/progress/common/progress.js';\nimport { UndoRedoGroup, UndoRedoSource } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { BulkCellEdits, ResourceNotebookCellEdit } from '../../browser/bulkCellEdits.js';\nimport { NotebookTextModel } from '../../../notebook/common/model/notebookTextModel.js';\nimport { CellEditType, CellUri, IResolvedNotebookEditorModel } from '../../../notebook/common/notebookCommon.js';\nimport { INotebookEditorModelResolverService } from '../../../notebook/common/notebookEditorModelResolverService.js';\nimport { TestEditorService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('BulkCellEdits', function () {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tasync function runTest(inputUri: URI, resolveUri: URI) {\n\t\tconst progress: IProgress<void> = { report: _ => { } };\n\t\tconst editorService = store.add(new TestEditorService());\n\n\t\tconst notebook = mockObject<NotebookTextModel>()();\n\t\tnotebook.uri.returns(URI.file('/project/notebook.ipynb'));\n\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst notebookEditorModel = mockObject<IResolvedNotebookEditorModel>()({ notebook: notebook as any });\n\t\tnotebookEditorModel.isReadonly.returns(false);\n\n\t\tconst notebookService = mockObject<INotebookEditorModelResolverService>()();\n\t\tnotebookService.resolve.returns({ object: notebookEditorModel, dispose: () => { } });\n\n\t\tconst edits = [\n\t\t\tnew ResourceNotebookCellEdit(inputUri, { index: 0, count: 1, editType: CellEditType.Replace, cells: [] })\n\t\t];\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst bce = new BulkCellEdits(new UndoRedoGroup(), new UndoRedoSource(), progress, CancellationToken.None, edits, editorService, notebookService as any);\n\t\tawait bce.apply();\n\n\t\tconst resolveArgs = notebookService.resolve.args[0];\n\t\tassert.strictEqual(resolveArgs[0].toString(), resolveUri.toString());\n\t}\n\n\tconst notebookUri = URI.file('/foo/bar.ipynb');\n\ttest('works with notebook URI', async () => {\n\t\tawait runTest(notebookUri, notebookUri);\n\t});\n\n\ttest('maps cell URI to notebook URI', async () => {\n\t\tawait runTest(CellUri.generate(notebookUri, 5), notebookUri);\n\t});\n\n\ttest('throws for invalid cell URI', async () => {\n\t\tconst badCellUri = CellUri.generate(notebookUri, 5).with({ fragment: '' });\n\t\tawait assert.rejects(async () => await runTest(badCellUri, notebookUri));\n\t});\n});\n"]}