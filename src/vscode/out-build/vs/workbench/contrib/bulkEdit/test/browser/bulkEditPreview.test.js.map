{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/bulkEdit/test/browser/bulkEditPreview.test.ts","vs/workbench/contrib/bulkEdit/test/browser/bulkEditPreview.test.ts"],"names":[],"mappings":"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","file":"bulkEditPreview.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { mock } from '../../../../test/common/workbenchTestServices.js';\nimport { InstantiationService } from '../../../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { BulkFileOperations } from '../../browser/preview/bulkEditPreview.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { ResourceFileEdit, ResourceTextEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('BulkEditPreview', function () {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instaService: IInstantiationService;\n\n\tsetup(function () {\n\n\t\tconst fileService: IFileService = new class extends mock<IFileService>() {\n\t\t\toverride onDidFilesChange = Event.None;\n\t\t\toverride async exists() {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\n\t\tconst modelService: IModelService = new class extends mock<IModelService>() {\n\t\t\toverride getModel() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\toverride getModels() {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\n\t\tinstaService = new InstantiationService(new ServiceCollection(\n\t\t\t[IFileService, fileService],\n\t\t\t[IModelService, modelService],\n\t\t));\n\t});\n\n\ttest('one needsConfirmation unchecks all of file', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'cat1', needsConfirmation: true }),\n\t\t\tnew ResourceFileEdit(URI.parse('some:///uri1'), URI.parse('some:///uri2'), undefined, { label: 'cat2', needsConfirmation: false }),\n\t\t];\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\t\tassert.strictEqual(ops.fileOperations.length, 1);\n\t\tassert.strictEqual(ops.checked.isChecked(edits[0]), false);\n\t});\n\n\ttest('has categories', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'uri1', needsConfirmation: true }),\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri2'), undefined, { label: 'uri2', needsConfirmation: false }),\n\t\t];\n\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\t\tassert.strictEqual(ops.categories.length, 2);\n\t\tassert.strictEqual(ops.categories[0].metadata.label, 'uri1'); // unconfirmed!\n\t\tassert.strictEqual(ops.categories[1].metadata.label, 'uri2');\n\t});\n\n\ttest('has not categories', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'uri1', needsConfirmation: true }),\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri2'), undefined, { label: 'uri1', needsConfirmation: false }),\n\t\t];\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\t\tassert.strictEqual(ops.categories.length, 1);\n\t\tassert.strictEqual(ops.categories[0].metadata.label, 'uri1'); // unconfirmed!\n\t\tassert.strictEqual(ops.categories[0].metadata.label, 'uri1');\n\t});\n\n\ttest('category selection', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'C1', needsConfirmation: false }),\n\t\t\tnew ResourceTextEdit(URI.parse('some:///uri2'), { text: 'foo', range: new Range(1, 1, 1, 1) }, undefined, { label: 'C2', needsConfirmation: false }),\n\t\t];\n\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\n\t\tassert.strictEqual(ops.checked.isChecked(edits[0]), true);\n\t\tassert.strictEqual(ops.checked.isChecked(edits[1]), true);\n\n\t\tassert.ok(edits === ops.getWorkspaceEdit());\n\n\t\t// NOT taking to create, but the invalid text edit will\n\t\t// go through\n\t\tops.checked.updateChecked(edits[0], false);\n\t\tconst newEdits = ops.getWorkspaceEdit();\n\t\tassert.ok(edits !== newEdits);\n\n\t\tassert.strictEqual(edits.length, 2);\n\t\tassert.strictEqual(newEdits.length, 1);\n\t});\n\n\ttest('fix bad metadata', async function () {\n\n\t\t// bogous edit that wants creation to be confirmed, but not it's textedit-child...\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'C1', needsConfirmation: true }),\n\t\t\tnew ResourceTextEdit(URI.parse('some:///uri1'), { text: 'foo', range: new Range(1, 1, 1, 1) }, undefined, { label: 'C2', needsConfirmation: false })\n\t\t];\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\n\t\tassert.strictEqual(ops.checked.isChecked(edits[0]), false);\n\t\tassert.strictEqual(ops.checked.isChecked(edits[1]), false);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { mock } from '../../../../test/common/workbenchTestServices.js';\nimport { InstantiationService } from '../../../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { BulkFileOperations } from '../../browser/preview/bulkEditPreview.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { ResourceFileEdit, ResourceTextEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('BulkEditPreview', function () {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instaService: IInstantiationService;\n\n\tsetup(function () {\n\n\t\tconst fileService: IFileService = new class extends mock<IFileService>() {\n\t\t\toverride onDidFilesChange = Event.None;\n\t\t\toverride async exists() {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\n\t\tconst modelService: IModelService = new class extends mock<IModelService>() {\n\t\t\toverride getModel() {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\toverride getModels() {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\n\t\tinstaService = new InstantiationService(new ServiceCollection(\n\t\t\t[IFileService, fileService],\n\t\t\t[IModelService, modelService],\n\t\t));\n\t});\n\n\ttest('one needsConfirmation unchecks all of file', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'cat1', needsConfirmation: true }),\n\t\t\tnew ResourceFileEdit(URI.parse('some:///uri1'), URI.parse('some:///uri2'), undefined, { label: 'cat2', needsConfirmation: false }),\n\t\t];\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\t\tassert.strictEqual(ops.fileOperations.length, 1);\n\t\tassert.strictEqual(ops.checked.isChecked(edits[0]), false);\n\t});\n\n\ttest('has categories', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'uri1', needsConfirmation: true }),\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri2'), undefined, { label: 'uri2', needsConfirmation: false }),\n\t\t];\n\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\t\tassert.strictEqual(ops.categories.length, 2);\n\t\tassert.strictEqual(ops.categories[0].metadata.label, 'uri1'); // unconfirmed!\n\t\tassert.strictEqual(ops.categories[1].metadata.label, 'uri2');\n\t});\n\n\ttest('has not categories', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'uri1', needsConfirmation: true }),\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri2'), undefined, { label: 'uri1', needsConfirmation: false }),\n\t\t];\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\t\tassert.strictEqual(ops.categories.length, 1);\n\t\tassert.strictEqual(ops.categories[0].metadata.label, 'uri1'); // unconfirmed!\n\t\tassert.strictEqual(ops.categories[0].metadata.label, 'uri1');\n\t});\n\n\ttest('category selection', async function () {\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'C1', needsConfirmation: false }),\n\t\t\tnew ResourceTextEdit(URI.parse('some:///uri2'), { text: 'foo', range: new Range(1, 1, 1, 1) }, undefined, { label: 'C2', needsConfirmation: false }),\n\t\t];\n\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\n\t\tassert.strictEqual(ops.checked.isChecked(edits[0]), true);\n\t\tassert.strictEqual(ops.checked.isChecked(edits[1]), true);\n\n\t\tassert.ok(edits === ops.getWorkspaceEdit());\n\n\t\t// NOT taking to create, but the invalid text edit will\n\t\t// go through\n\t\tops.checked.updateChecked(edits[0], false);\n\t\tconst newEdits = ops.getWorkspaceEdit();\n\t\tassert.ok(edits !== newEdits);\n\n\t\tassert.strictEqual(edits.length, 2);\n\t\tassert.strictEqual(newEdits.length, 1);\n\t});\n\n\ttest('fix bad metadata', async function () {\n\n\t\t// bogous edit that wants creation to be confirmed, but not it's textedit-child...\n\n\t\tconst edits = [\n\t\t\tnew ResourceFileEdit(undefined, URI.parse('some:///uri1'), undefined, { label: 'C1', needsConfirmation: true }),\n\t\t\tnew ResourceTextEdit(URI.parse('some:///uri1'), { text: 'foo', range: new Range(1, 1, 1, 1) }, undefined, { label: 'C2', needsConfirmation: false })\n\t\t];\n\n\t\tconst ops = await instaService.invokeFunction(BulkFileOperations.create, edits);\n\t\tstore.add(ops);\n\n\t\tassert.strictEqual(ops.checked.isChecked(edits[0]), false);\n\t\tassert.strictEqual(ops.checked.isChecked(edits[1]), false);\n\t});\n});\n"]}