{"version":3,"sources":["vs/workbench/contrib/remoteTunnel/electron-browser/remoteTunnel.contribution.ts"],"names":[],"mappings":"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","file":"remoteTunnel.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { toAction } from '../../../../base/common/actions.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ITunnelApplicationConfig } from '../../../../base/common/product.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { isNumber, isObject, isString } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { Extensions as ConfigurationExtensions, ConfigurationScope, IConfigurationRegistry } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { INativeEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogger, ILoggerService } from '../../../../platform/log/common/log.js';\nimport { INotificationService, NotificationPriority, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IProgress, IProgressService, IProgressStep, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator, QuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONFIGURATION_KEY_HOST_NAME, CONFIGURATION_KEY_PREFIX, CONFIGURATION_KEY_PREVENT_SLEEP, ConnectionInfo, INACTIVE_TUNNEL_MODE, IRemoteTunnelService, IRemoteTunnelSession, LOGGER_NAME, LOG_ID, TunnelStatus } from '../../../../platform/remoteTunnel/common/remoteTunnel.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IWorkspaceContextService, isUntitledWorkspace } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from '../../../common/contributions.js';\nimport { AuthenticationSession, IAuthenticationService } from '../../../services/authentication/common/authentication.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IOutputService } from '../../../services/output/common/output.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\n\nexport const REMOTE_TUNNEL_CATEGORY = localize2('remoteTunnel.category', 'Remote Tunnels');\n\ntype CONTEXT_KEY_STATES = 'connected' | 'connecting' | 'disconnected';\n\nexport const REMOTE_TUNNEL_CONNECTION_STATE_KEY = 'remoteTunnelConnection';\nexport const REMOTE_TUNNEL_CONNECTION_STATE = new RawContextKey<CONTEXT_KEY_STATES>(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'disconnected');\n\nconst REMOTE_TUNNEL_USED_STORAGE_KEY = 'remoteTunnelServiceUsed';\nconst REMOTE_TUNNEL_PROMPTED_PREVIEW_STORAGE_KEY = 'remoteTunnelServicePromptedPreview';\nconst REMOTE_TUNNEL_EXTENSION_RECOMMENDED_KEY = 'remoteTunnelExtensionRecommended';\nconst REMOTE_TUNNEL_HAS_USED_BEFORE = 'remoteTunnelHasUsed';\nconst REMOTE_TUNNEL_EXTENSION_TIMEOUT = 4 * 60 * 1000; // show the recommendation that a machine started using tunnels if it joined less than 4 minutes ago\n\nconst INVALID_TOKEN_RETRIES = 2;\n\ninterface UsedOnHostMessage { hostName: string; timeStamp: number }\n\ntype ExistingSessionItem = { session: AuthenticationSession; providerId: string; label: string; description: string };\ntype IAuthenticationProvider = { id: string; scopes: string[] };\ntype AuthenticationProviderOption = IQuickPickItem & { provider: IAuthenticationProvider };\n\nenum RemoteTunnelCommandIds {\n\tturnOn = 'workbench.remoteTunnel.actions.turnOn',\n\tturnOff = 'workbench.remoteTunnel.actions.turnOff',\n\tconnecting = 'workbench.remoteTunnel.actions.connecting',\n\tmanage = 'workbench.remoteTunnel.actions.manage',\n\tshowLog = 'workbench.remoteTunnel.actions.showLog',\n\tconfigure = 'workbench.remoteTunnel.actions.configure',\n\tcopyToClipboard = 'workbench.remoteTunnel.actions.copyToClipboard',\n\tlearnMore = 'workbench.remoteTunnel.actions.learnMore',\n}\n\n// name shown in nofications\nnamespace RemoteTunnelCommandLabels {\n\texport const turnOn = localize('remoteTunnel.actions.turnOn', 'Turn on Remote Tunnel Access...');\n\texport const turnOff = localize('remoteTunnel.actions.turnOff', 'Turn off Remote Tunnel Access...');\n\texport const showLog = localize('remoteTunnel.actions.showLog', 'Show Remote Tunnel Service Log');\n\texport const configure = localize('remoteTunnel.actions.configure', 'Configure Tunnel Name...');\n\texport const copyToClipboard = localize('remoteTunnel.actions.copyToClipboard', 'Copy Browser URI to Clipboard');\n\texport const learnMore = localize('remoteTunnel.actions.learnMore', 'Get Started with Tunnels');\n}\n\n\nexport class RemoteTunnelWorkbenchContribution extends Disposable implements IWorkbenchContribution {\n\n\tprivate readonly connectionStateContext: IContextKey<CONTEXT_KEY_STATES>;\n\n\tprivate readonly serverConfiguration: ITunnelApplicationConfig;\n\n\tprivate connectionInfo: ConnectionInfo | undefined;\n\n\tprivate readonly logger: ILogger;\n\n\tprivate expiredSessions: Set<string> = new Set();\n\n\tconstructor(\n\t\t@IAuthenticationService private readonly authenticationService: IAuthenticationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IProductService productService: IProductService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@ILoggerService loggerService: ILoggerService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@INativeEnvironmentService private environmentService: INativeEnvironmentService,\n\t\t@IRemoteTunnelService private remoteTunnelService: IRemoteTunnelService,\n\t\t@ICommandService private commandService: ICommandService,\n\t\t@IWorkspaceContextService private workspaceContextService: IWorkspaceContextService,\n\t\t@IProgressService private progressService: IProgressService,\n\t\t@INotificationService private notificationService: INotificationService\n\t) {\n\t\tsuper();\n\n\t\tthis.logger = this._register(loggerService.createLogger(joinPath(environmentService.logsHome, `${LOG_ID}.log`), { id: LOG_ID, name: LOGGER_NAME }));\n\n\t\tthis.connectionStateContext = REMOTE_TUNNEL_CONNECTION_STATE.bindTo(this.contextKeyService);\n\n\t\tconst serverConfiguration = productService.tunnelApplicationConfig;\n\t\tif (!serverConfiguration || !productService.tunnelApplicationName) {\n\t\t\tthis.logger.error('Missing \\'tunnelApplicationConfig\\' or \\'tunnelApplicationName\\' in product.json. Remote tunneling is not available.');\n\t\t\tthis.serverConfiguration = { authenticationProviders: {}, editorWebUrl: '', extension: { extensionId: '', friendlyName: '' } };\n\t\t\treturn;\n\t\t}\n\t\tthis.serverConfiguration = serverConfiguration;\n\n\t\tthis._register(this.remoteTunnelService.onDidChangeTunnelStatus(s => this.handleTunnelStatusUpdate(s)));\n\n\t\tthis.registerCommands();\n\n\t\tthis.initialize();\n\n\t\tthis.recommendRemoteExtensionIfNeeded();\n\t}\n\n\tprivate handleTunnelStatusUpdate(status: TunnelStatus) {\n\t\tthis.connectionInfo = undefined;\n\t\tif (status.type === 'disconnected') {\n\t\t\tif (status.onTokenFailed) {\n\t\t\t\tthis.expiredSessions.add(status.onTokenFailed.sessionId);\n\t\t\t}\n\t\t\tthis.connectionStateContext.set('disconnected');\n\t\t} else if (status.type === 'connecting') {\n\t\t\tthis.connectionStateContext.set('connecting');\n\t\t} else if (status.type === 'connected') {\n\t\t\tthis.connectionInfo = status.info;\n\t\t\tthis.connectionStateContext.set('connected');\n\t\t}\n\t}\n\n\tprivate async recommendRemoteExtensionIfNeeded() {\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\n\t\tconst remoteExtension = this.serverConfiguration.extension;\n\t\tconst shouldRecommend = async () => {\n\t\t\tif (this.storageService.getBoolean(REMOTE_TUNNEL_EXTENSION_RECOMMENDED_KEY, StorageScope.APPLICATION)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (await this.extensionService.getExtension(remoteExtension.extensionId)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst usedOnHostMessage = this.storageService.get(REMOTE_TUNNEL_USED_STORAGE_KEY, StorageScope.APPLICATION);\n\t\t\tif (!usedOnHostMessage) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet usedTunnelName: string | undefined;\n\t\t\ttry {\n\t\t\t\tconst message = JSON.parse(usedOnHostMessage);\n\t\t\t\tif (!isObject(message)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst { hostName, timeStamp } = message as UsedOnHostMessage;\n\t\t\t\tif (!isString(hostName)! || !isNumber(timeStamp) || new Date().getTime() > timeStamp + REMOTE_TUNNEL_EXTENSION_TIMEOUT) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tusedTunnelName = hostName;\n\t\t\t} catch (_) {\n\t\t\t\t// problems parsing the message, likly the old message format\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst currentTunnelName = await this.remoteTunnelService.getTunnelName();\n\t\t\tif (!currentTunnelName || currentTunnelName === usedTunnelName) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn usedTunnelName;\n\t\t};\n\t\tconst recommed = async () => {\n\t\t\tconst usedOnHost = await shouldRecommend();\n\t\t\tif (!usedOnHost) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.notificationService.notify({\n\t\t\t\tseverity: Severity.Info,\n\t\t\t\tpriority: NotificationPriority.OPTIONAL,\n\t\t\t\tmessage:\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'recommend.remoteExtension',\n\t\t\t\t\t\t\tcomment: ['{0} will be a tunnel name, {1} will the link address to the web UI, {6} an extension name. [label](command:commandId) is a markdown link. Only translate the label, do not modify the format']\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"Tunnel '{0}' is avaiable for remote access. The {1} extension can be used to connect to it.\",\n\t\t\t\t\t\tusedOnHost, remoteExtension.friendlyName\n\t\t\t\t\t),\n\t\t\t\tactions: {\n\t\t\t\t\tprimary: [\n\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\tid: 'showExtension', label: localize('action.showExtension', \"Show Extension\"), run: () => {\n\t\t\t\t\t\t\t\treturn this.commandService.executeCommand('workbench.extensions.action.showExtensionsWithIds', [remoteExtension.extensionId]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\tid: 'doNotShowAgain', label: localize('action.doNotShowAgain', \"Do not show again\"), run: () => {\n\t\t\t\t\t\t\t\tthis.storageService.store(REMOTE_TUNNEL_EXTENSION_RECOMMENDED_KEY, true, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn true;\n\t\t};\n\t\tif (await shouldRecommend()) {\n\t\t\tconst disposables = this._register(new DisposableStore());\n\t\t\tdisposables.add(this.storageService.onDidChangeValue(StorageScope.APPLICATION, REMOTE_TUNNEL_USED_STORAGE_KEY, disposables)(async () => {\n\t\t\t\tconst success = await recommed();\n\t\t\t\tif (success) {\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate async initialize(): Promise<void> {\n\t\tconst [mode, status] = await Promise.all([\n\t\t\tthis.remoteTunnelService.getMode(),\n\t\t\tthis.remoteTunnelService.getTunnelStatus(),\n\t\t]);\n\n\t\tthis.handleTunnelStatusUpdate(status);\n\n\t\tif (mode.active && mode.session.token) {\n\t\t\treturn; // already initialized, token available\n\t\t}\n\n\t\tconst doInitialStateDiscovery = async (progress?: IProgress<IProgressStep>) => {\n\t\t\tconst listener = progress && this.remoteTunnelService.onDidChangeTunnelStatus(status => {\n\t\t\t\tswitch (status.type) {\n\t\t\t\t\tcase 'connecting':\n\t\t\t\t\t\tif (status.progress) {\n\t\t\t\t\t\t\tprogress.report({ message: status.progress });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t\tlet newSession: IRemoteTunnelSession | undefined;\n\t\t\tif (mode.active) {\n\t\t\t\tconst token = await this.getSessionToken(mode.session);\n\t\t\t\tif (token) {\n\t\t\t\t\tnewSession = { ...mode.session, token };\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst status = await this.remoteTunnelService.initialize(mode.active && newSession ? { ...mode, session: newSession } : INACTIVE_TUNNEL_MODE);\n\t\t\tlistener?.dispose();\n\n\t\t\tif (status.type === 'connected') {\n\t\t\t\tthis.connectionInfo = status.info;\n\t\t\t\tthis.connectionStateContext.set('connected');\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\n\n\t\tconst hasUsed = this.storageService.getBoolean(REMOTE_TUNNEL_HAS_USED_BEFORE, StorageScope.APPLICATION, false);\n\n\t\tif (hasUsed) {\n\t\t\tawait this.progressService.withProgress(\n\t\t\t\t{\n\t\t\t\t\tlocation: ProgressLocation.Window,\n\t\t\t\t\ttitle: localize({ key: 'initialize.progress.title', comment: ['Only translate \\'Looking for remote tunnel\\', do not change the format of the rest (markdown link format)'] }, \"[Looking for remote tunnel](command:{0})\", RemoteTunnelCommandIds.showLog),\n\t\t\t\t},\n\t\t\t\tdoInitialStateDiscovery\n\t\t\t);\n\t\t} else {\n\t\t\tdoInitialStateDiscovery(undefined);\n\t\t}\n\t}\n\n\tprivate getPreferredTokenFromSession(session: ExistingSessionItem) {\n\t\treturn session.session.accessToken || session.session.idToken;\n\t}\n\n\tprivate async startTunnel(asService: boolean): Promise<ConnectionInfo | undefined> {\n\t\tif (this.connectionInfo) {\n\t\t\treturn this.connectionInfo;\n\t\t}\n\n\t\tthis.storageService.store(REMOTE_TUNNEL_HAS_USED_BEFORE, true, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\n\t\tlet tokenProblems = false;\n\t\tfor (let i = 0; i < INVALID_TOKEN_RETRIES; i++) {\n\t\t\ttokenProblems = false;\n\n\t\t\tconst authenticationSession = await this.getAuthenticationSession();\n\t\t\tif (authenticationSession === undefined) {\n\t\t\t\tthis.logger.info('No authentication session available, not starting tunnel');\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst result = await this.progressService.withProgress(\n\t\t\t\t{\n\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\ttitle: localize({ key: 'startTunnel.progress.title', comment: ['Only translate \\'Starting remote tunnel\\', do not change the format of the rest (markdown link format)'] }, \"[Starting remote tunnel](command:{0})\", RemoteTunnelCommandIds.showLog),\n\t\t\t\t},\n\t\t\t\t(progress: IProgress<IProgressStep>) => {\n\t\t\t\t\treturn new Promise<ConnectionInfo | undefined>((s, e) => {\n\t\t\t\t\t\tlet completed = false;\n\t\t\t\t\t\tconst listener = this.remoteTunnelService.onDidChangeTunnelStatus(status => {\n\t\t\t\t\t\t\tswitch (status.type) {\n\t\t\t\t\t\t\t\tcase 'connecting':\n\t\t\t\t\t\t\t\t\tif (status.progress) {\n\t\t\t\t\t\t\t\t\t\tprogress.report({ message: status.progress });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'connected':\n\t\t\t\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\ts(status.info);\n\t\t\t\t\t\t\t\t\tif (status.serviceInstallFailed) {\n\t\t\t\t\t\t\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\t\t\t\t\t\t\tseverity: Severity.Warning,\n\t\t\t\t\t\t\t\t\t\t\tmessage: localize(\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey: 'remoteTunnel.serviceInstallFailed',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcomment: ['{Locked=\"](command:{0})\"}']\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\"Installation as a service failed, and we fell back to running the tunnel for this session. See the [error log](command:{0}) for details.\",\n\t\t\t\t\t\t\t\t\t\t\t\tRemoteTunnelCommandIds.showLog,\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'disconnected':\n\t\t\t\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\t\t\t\tcompleted = true;\n\t\t\t\t\t\t\t\t\ttokenProblems = !!status.onTokenFailed;\n\t\t\t\t\t\t\t\t\ts(undefined);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst token = this.getPreferredTokenFromSession(authenticationSession);\n\t\t\t\t\t\tconst account: IRemoteTunnelSession = { sessionId: authenticationSession.session.id, token, providerId: authenticationSession.providerId, accountLabel: authenticationSession.session.account.label };\n\t\t\t\t\t\tthis.remoteTunnelService.startTunnel({ active: true, asService, session: account }).then(status => {\n\t\t\t\t\t\t\tif (!completed && (status.type === 'connected' || status.type === 'disconnected')) {\n\t\t\t\t\t\t\t\tlistener.dispose();\n\t\t\t\t\t\t\t\tif (status.type === 'connected') {\n\t\t\t\t\t\t\t\t\ts(status.info);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttokenProblems = !!status.onTokenFailed;\n\t\t\t\t\t\t\t\t\ts(undefined);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t\tif (result || !tokenProblems) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async getAuthenticationSession(): Promise<ExistingSessionItem | undefined> {\n\t\tconst sessions = await this.getAllSessions();\n\t\tconst disposables = new DisposableStore();\n\t\tconst quickpick = disposables.add(this.quickInputService.createQuickPick<ExistingSessionItem | AuthenticationProviderOption | IQuickPickItem>({ useSeparators: true }));\n\t\tquickpick.ok = false;\n\t\tquickpick.placeholder = localize('accountPreference.placeholder', \"Sign in to an account to enable remote access\");\n\t\tquickpick.ignoreFocusOut = true;\n\t\tquickpick.items = await this.createQuickpickItems(sessions);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdisposables.add(quickpick.onDidHide((e) => {\n\t\t\t\tresolve(undefined);\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\n\t\t\tdisposables.add(quickpick.onDidAccept(async (e) => {\n\t\t\t\tconst selection = quickpick.selectedItems[0];\n\t\t\t\tif ('provider' in selection) {\n\t\t\t\t\tconst session = await this.authenticationService.createSession(selection.provider.id, selection.provider.scopes);\n\t\t\t\t\tresolve(this.createExistingSessionItem(session, selection.provider.id));\n\t\t\t\t} else if ('session' in selection) {\n\t\t\t\t\tresolve(selection);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}\n\t\t\t\tquickpick.hide();\n\t\t\t}));\n\n\t\t\tquickpick.show();\n\t\t});\n\t}\n\n\tprivate createExistingSessionItem(session: AuthenticationSession, providerId: string): ExistingSessionItem {\n\t\treturn {\n\t\t\tlabel: session.account.label,\n\t\t\tdescription: this.authenticationService.getProvider(providerId).label,\n\t\t\tsession,\n\t\t\tproviderId\n\t\t};\n\t}\n\n\tprivate async createQuickpickItems(sessions: ExistingSessionItem[]): Promise<(ExistingSessionItem | AuthenticationProviderOption | IQuickPickSeparator | IQuickPickItem & { canceledAuthentication: boolean })[]> {\n\t\tconst options: (ExistingSessionItem | AuthenticationProviderOption | IQuickPickSeparator | IQuickPickItem & { canceledAuthentication: boolean })[] = [];\n\n\t\tif (sessions.length) {\n\t\t\toptions.push({ type: 'separator', label: localize('signed in', \"Signed In\") });\n\t\t\toptions.push(...sessions);\n\t\t\toptions.push({ type: 'separator', label: localize('others', \"Others\") });\n\t\t}\n\n\t\tfor (const authenticationProvider of (await this.getAuthenticationProviders())) {\n\t\t\tconst signedInForProvider = sessions.some(account => account.providerId === authenticationProvider.id);\n\t\t\tconst provider = this.authenticationService.getProvider(authenticationProvider.id);\n\t\t\tif (!signedInForProvider || provider.supportsMultipleAccounts) {\n\t\t\t\toptions.push({ label: localize({ key: 'sign in using account', comment: ['{0} will be a auth provider (e.g. Github)'] }, \"Sign in with {0}\", provider.label), provider: authenticationProvider });\n\t\t\t}\n\t\t}\n\n\t\treturn options;\n\t}\n\n\t/**\n\t * Returns all authentication sessions available from {@link getAuthenticationProviders}.\n\t */\n\tprivate async getAllSessions(): Promise<ExistingSessionItem[]> {\n\t\tconst authenticationProviders = await this.getAuthenticationProviders();\n\t\tconst accounts = new Map<string, ExistingSessionItem>();\n\t\tconst currentAccount = await this.remoteTunnelService.getMode();\n\t\tlet currentSession: ExistingSessionItem | undefined;\n\n\t\tfor (const provider of authenticationProviders) {\n\t\t\tconst sessions = await this.authenticationService.getSessions(provider.id, provider.scopes);\n\n\t\t\tfor (const session of sessions) {\n\t\t\t\tif (!this.expiredSessions.has(session.id)) {\n\t\t\t\t\tconst item = this.createExistingSessionItem(session, provider.id);\n\t\t\t\t\taccounts.set(item.session.account.id, item);\n\t\t\t\t\tif (currentAccount.active && currentAccount.session.sessionId === session.id) {\n\t\t\t\t\t\tcurrentSession = item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (currentSession !== undefined) {\n\t\t\taccounts.set(currentSession.session.account.id, currentSession);\n\t\t}\n\n\t\treturn [...accounts.values()];\n\t}\n\n\tprivate async getSessionToken(session: IRemoteTunnelSession | undefined): Promise<string | undefined> {\n\t\tif (session) {\n\t\t\tconst sessionItem = (await this.getAllSessions()).find(s => s.session.id === session.sessionId);\n\t\t\tif (sessionItem) {\n\t\t\t\treturn this.getPreferredTokenFromSession(sessionItem);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Returns all authentication providers which can be used to authenticate\n\t * to the remote storage service, based on product.json configuration\n\t * and registered authentication providers.\n\t */\n\tprivate async getAuthenticationProviders(): Promise<IAuthenticationProvider[]> {\n\t\t// Get the list of authentication providers configured in product.json\n\t\tconst authenticationProviders = this.serverConfiguration.authenticationProviders;\n\t\tconst configuredAuthenticationProviders = Object.keys(authenticationProviders).reduce<IAuthenticationProvider[]>((result, id) => {\n\t\t\tresult.push({ id, scopes: authenticationProviders[id].scopes });\n\t\t\treturn result;\n\t\t}, []);\n\n\t\t// Filter out anything that isn't currently available through the authenticationService\n\t\tconst availableAuthenticationProviders = this.authenticationService.declaredProviders;\n\n\t\treturn configuredAuthenticationProviders.filter(({ id }) => availableAuthenticationProviders.some(provider => provider.id === id));\n\t}\n\n\tprivate registerCommands() {\n\t\tconst that = this;\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.turnOn,\n\t\t\t\t\ttitle: RemoteTunnelCommandLabels.turnOn,\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tprecondition: ContextKeyExpr.equals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'disconnected'),\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.AccountsContext,\n\t\t\t\t\t\tgroup: '2_remoteTunnel',\n\t\t\t\t\t\twhen: ContextKeyExpr.equals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'disconnected'),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor) {\n\t\t\t\tconst notificationService = accessor.get(INotificationService);\n\t\t\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\t\tconst storageService = accessor.get(IStorageService);\n\t\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\t\t\tconst productService = accessor.get(IProductService);\n\n\t\t\t\tconst didNotifyPreview = storageService.getBoolean(REMOTE_TUNNEL_PROMPTED_PREVIEW_STORAGE_KEY, StorageScope.APPLICATION, false);\n\t\t\t\tif (!didNotifyPreview) {\n\t\t\t\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\t\t\t\tmessage: localize('tunnel.preview', 'Remote Tunnels is currently in preview. Please report any problems using the \"Help: Report Issue\" command.'),\n\t\t\t\t\t\tprimaryButton: localize({ key: 'enable', comment: ['&& denotes a mnemonic'] }, '&&Enable')\n\t\t\t\t\t});\n\t\t\t\t\tif (!confirmed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstorageService.store(REMOTE_TUNNEL_PROMPTED_PREVIEW_STORAGE_KEY, true, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\t\t}\n\n\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\tconst quickPick = quickInputService.createQuickPick<IQuickPickItem & { service: boolean }>();\n\t\t\t\tquickPick.placeholder = localize('tunnel.enable.placeholder', 'Select how you want to enable access');\n\t\t\t\tquickPick.items = [\n\t\t\t\t\t{ service: false, label: localize('tunnel.enable.session', 'Turn on for this session'), description: localize('tunnel.enable.session.description', 'Run whenever {0} is open', productService.nameShort) },\n\t\t\t\t\t{ service: true, label: localize('tunnel.enable.service', 'Install as a service'), description: localize('tunnel.enable.service.description', 'Run whenever you\\'re logged in') }\n\t\t\t\t];\n\n\t\t\t\tconst asService = await new Promise<boolean | undefined>(resolve => {\n\t\t\t\t\tdisposables.add(quickPick.onDidAccept(() => resolve(quickPick.selectedItems[0]?.service)));\n\t\t\t\t\tdisposables.add(quickPick.onDidHide(() => resolve(undefined)));\n\t\t\t\t\tquickPick.show();\n\t\t\t\t});\n\n\t\t\t\tquickPick.dispose();\n\n\t\t\t\tif (asService === undefined) {\n\t\t\t\t\treturn; // no-op\n\t\t\t\t}\n\n\t\t\t\tconst connectionInfo = await that.startTunnel(/* installAsService= */ asService);\n\n\t\t\t\tif (connectionInfo) {\n\t\t\t\t\tconst linkToOpen = that.getLinkToOpen(connectionInfo);\n\t\t\t\t\tconst remoteExtension = that.serverConfiguration.extension;\n\t\t\t\t\tconst linkToOpenForMarkdown = linkToOpen.toString(false).replace(/\\)/g, '%29');\n\t\t\t\t\tnotificationService.notify({\n\t\t\t\t\t\tseverity: Severity.Info,\n\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tkey: 'progress.turnOn.final',\n\t\t\t\t\t\t\t\t\tcomment: ['{0} will be the tunnel name, {1} will the link address to the web UI, {6} an extension name, {7} a link to the extension documentation. [label](command:commandId) is a markdown link. Only translate the label, do not modify the format']\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"You can now access this machine anywhere via the secure tunnel [{0}](command:{4}). To connect via a different machine, use the generated [{1}]({2}) link or use the [{6}]({7}) extension in the desktop or web. You can [configure](command:{3}) or [turn off](command:{5}) this access via the VS Code Accounts menu.\",\n\t\t\t\t\t\t\t\tconnectionInfo.tunnelName, connectionInfo.domain, linkToOpenForMarkdown, RemoteTunnelCommandIds.manage, RemoteTunnelCommandIds.configure, RemoteTunnelCommandIds.turnOff, remoteExtension.friendlyName, 'https://code.visualstudio.com/docs/remote/tunnels'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tactions: {\n\t\t\t\t\t\t\tprimary: [\n\t\t\t\t\t\t\t\ttoAction({ id: 'copyToClipboard', label: localize('action.copyToClipboard', \"Copy Browser Link to Clipboard\"), run: () => clipboardService.writeText(linkToOpen.toString(true)) }),\n\t\t\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\t\t\tid: 'showExtension', label: localize('action.showExtension', \"Show Extension\"), run: () => {\n\t\t\t\t\t\t\t\t\t\treturn commandService.executeCommand('workbench.extensions.action.showExtensionsWithIds', [remoteExtension.extensionId]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tconst usedOnHostMessage: UsedOnHostMessage = { hostName: connectionInfo.tunnelName, timeStamp: new Date().getTime() };\n\t\t\t\t\tstorageService.store(REMOTE_TUNNEL_USED_STORAGE_KEY, JSON.stringify(usedOnHostMessage), StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\t\t} else {\n\t\t\t\t\tnotificationService.notify({\n\t\t\t\t\t\tseverity: Severity.Info,\n\t\t\t\t\t\tmessage: localize('progress.turnOn.failed',\n\t\t\t\t\t\t\t\"Unable to turn on the remote tunnel access. Check the Remote Tunnel Service log for details.\"),\n\t\t\t\t\t});\n\t\t\t\t\tawait commandService.executeCommand(RemoteTunnelCommandIds.showLog);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}));\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.manage,\n\t\t\t\t\ttitle: localize('remoteTunnel.actions.manage.on.v2', 'Remote Tunnel Access is On'),\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.AccountsContext,\n\t\t\t\t\t\tgroup: '2_remoteTunnel',\n\t\t\t\t\t\twhen: ContextKeyExpr.equals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'connected'),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run() {\n\t\t\t\tthat.showManageOptions();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.connecting,\n\t\t\t\t\ttitle: localize('remoteTunnel.actions.manage.connecting', 'Remote Tunnel Access is Connecting'),\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.AccountsContext,\n\t\t\t\t\t\tgroup: '2_remoteTunnel',\n\t\t\t\t\t\twhen: ContextKeyExpr.equals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'connecting'),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run() {\n\t\t\t\tthat.showManageOptions();\n\t\t\t}\n\t\t}));\n\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.turnOff,\n\t\t\t\t\ttitle: RemoteTunnelCommandLabels.turnOff,\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tprecondition: ContextKeyExpr.notEquals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'disconnected'),\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\t\t\twhen: ContextKeyExpr.notEquals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, ''),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run() {\n\t\t\t\tconst message =\n\t\t\t\t\tthat.connectionInfo?.isAttached ?\n\t\t\t\t\t\tlocalize('remoteTunnel.turnOffAttached.confirm', 'Do you want to turn off Remote Tunnel Access? This will also stop the service that was started externally.') :\n\t\t\t\t\t\tlocalize('remoteTunnel.turnOff.confirm', 'Do you want to turn off Remote Tunnel Access?');\n\n\t\t\t\tconst { confirmed } = await that.dialogService.confirm({ message });\n\t\t\t\tif (confirmed) {\n\t\t\t\t\tthat.remoteTunnelService.stopTunnel();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.showLog,\n\t\t\t\t\ttitle: RemoteTunnelCommandLabels.showLog,\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\t\t\twhen: ContextKeyExpr.notEquals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, ''),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor) {\n\t\t\t\tconst outputService = accessor.get(IOutputService);\n\t\t\t\toutputService.showChannel(LOG_ID);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.configure,\n\t\t\t\t\ttitle: RemoteTunnelCommandLabels.configure,\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\t\t\twhen: ContextKeyExpr.notEquals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, ''),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor) {\n\t\t\t\tconst preferencesService = accessor.get(IPreferencesService);\n\t\t\t\tpreferencesService.openSettings({ query: CONFIGURATION_KEY_PREFIX });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.copyToClipboard,\n\t\t\t\t\ttitle: RemoteTunnelCommandLabels.copyToClipboard,\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tprecondition: ContextKeyExpr.equals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'connected'),\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\t\t\twhen: ContextKeyExpr.equals(REMOTE_TUNNEL_CONNECTION_STATE_KEY, 'connected'),\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor) {\n\t\t\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\t\t\tif (that.connectionInfo) {\n\t\t\t\t\tconst linkToOpen = that.getLinkToOpen(that.connectionInfo);\n\t\t\t\t\tclipboardService.writeText(linkToOpen.toString(true));\n\t\t\t\t}\n\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteTunnelCommandIds.learnMore,\n\t\t\t\t\ttitle: RemoteTunnelCommandLabels.learnMore,\n\t\t\t\t\tcategory: REMOTE_TUNNEL_CATEGORY,\n\t\t\t\t\tmenu: []\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor) {\n\t\t\t\tconst openerService = accessor.get(IOpenerService);\n\t\t\t\tawait openerService.open('https://aka.ms/vscode-server-doc');\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate getLinkToOpen(connectionInfo: ConnectionInfo): URI {\n\t\tconst workspace = this.workspaceContextService.getWorkspace();\n\t\tconst folders = workspace.folders;\n\t\tlet resource;\n\t\tif (folders.length === 1) {\n\t\t\tresource = folders[0].uri;\n\t\t} else if (workspace.configuration && !isUntitledWorkspace(workspace.configuration, this.environmentService)) {\n\t\t\tresource = workspace.configuration;\n\t\t}\n\t\tconst link = URI.parse(connectionInfo.link);\n\t\tif (resource?.scheme === Schemas.file) {\n\t\t\treturn joinPath(link, resource.path);\n\t\t}\n\t\treturn joinPath(link, this.environmentService.userHome.path);\n\t}\n\n\n\tprivate async showManageOptions() {\n\t\tconst account = await this.remoteTunnelService.getMode();\n\n\t\treturn new Promise<void>((c, e) => {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst quickPick = this.quickInputService.createQuickPick({ useSeparators: true });\n\t\t\tquickPick.placeholder = localize('manage.placeholder', 'Select a command to invoke');\n\t\t\tdisposables.add(quickPick);\n\t\t\tconst items: Array<QuickPickItem> = [];\n\t\t\titems.push({ id: RemoteTunnelCommandIds.learnMore, label: RemoteTunnelCommandLabels.learnMore });\n\t\t\tif (this.connectionInfo) {\n\t\t\t\tquickPick.title =\n\t\t\t\t\tthis.connectionInfo.isAttached ?\n\t\t\t\t\t\tlocalize({ key: 'manage.title.attached', comment: ['{0} is the tunnel name'] }, 'Remote Tunnel Access enabled for {0} (launched externally)', this.connectionInfo.tunnelName) :\n\t\t\t\t\t\tlocalize({ key: 'manage.title.orunning', comment: ['{0} is the tunnel name'] }, 'Remote Tunnel Access enabled for {0}', this.connectionInfo.tunnelName);\n\n\t\t\t\titems.push({ id: RemoteTunnelCommandIds.copyToClipboard, label: RemoteTunnelCommandLabels.copyToClipboard, description: this.connectionInfo.domain });\n\t\t\t} else {\n\t\t\t\tquickPick.title = localize('manage.title.off', 'Remote Tunnel Access not enabled');\n\t\t\t}\n\t\t\titems.push({ id: RemoteTunnelCommandIds.showLog, label: localize('manage.showLog', 'Show Log') });\n\t\t\titems.push({ type: 'separator' });\n\t\t\titems.push({ id: RemoteTunnelCommandIds.configure, label: localize('manage.tunnelName', 'Change Tunnel Name'), description: this.connectionInfo?.tunnelName });\n\t\t\titems.push({ id: RemoteTunnelCommandIds.turnOff, label: RemoteTunnelCommandLabels.turnOff, description: account.active ? `${account.session.accountLabel} (${account.session.providerId})` : undefined });\n\n\t\t\tquickPick.items = items;\n\t\t\tdisposables.add(quickPick.onDidAccept(() => {\n\t\t\t\tif (quickPick.selectedItems[0] && quickPick.selectedItems[0].id) {\n\t\t\t\t\tthis.commandService.executeCommand(quickPick.selectedItems[0].id);\n\t\t\t\t}\n\t\t\t\tquickPick.hide();\n\t\t\t}));\n\t\t\tdisposables.add(quickPick.onDidHide(() => {\n\t\t\t\tdisposables.dispose();\n\t\t\t\tc();\n\t\t\t}));\n\t\t\tquickPick.show();\n\t\t});\n\t}\n}\n\n\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(RemoteTunnelWorkbenchContribution, LifecyclePhase.Restored);\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\ttype: 'object',\n\tproperties: {\n\t\t[CONFIGURATION_KEY_HOST_NAME]: {\n\t\t\tdescription: localize('remoteTunnelAccess.machineName', \"The name under which the remote tunnel access is registered. If not set, the host name is used.\"),\n\t\t\ttype: 'string',\n\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\tignoreSync: true,\n\t\t\tpattern: '^(\\\\w[\\\\w-]*)?$',\n\t\t\tpatternErrorMessage: localize('remoteTunnelAccess.machineNameRegex', \"The name must only consist of letters, numbers, underscore and dash. It must not start with a dash.\"),\n\t\t\tmaxLength: 20,\n\t\t\tdefault: ''\n\t\t},\n\t\t[CONFIGURATION_KEY_PREVENT_SLEEP]: {\n\t\t\tdescription: localize('remoteTunnelAccess.preventSleep', \"Prevent this computer from sleeping when remote tunnel access is turned on.\"),\n\t\t\ttype: 'boolean',\n\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\tdefault: false,\n\t\t}\n\t}\n});\n"]}