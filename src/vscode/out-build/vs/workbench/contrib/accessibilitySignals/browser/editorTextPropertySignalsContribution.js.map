{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/accessibilitySignals/browser/editorTextPropertySignalsContribution.ts","vs/workbench/contrib/accessibilitySignals/browser/editorTextPropertySignalsContribution.ts"],"names":[],"mappings":"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","file":"editorTextPropertySignalsContribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { disposableTimeout } from '../../../../base/common/async.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IReader, autorun, autorunWithStore, derived, observableFromEvent, observableFromPromise, observableFromValueWithChangeEvent, observableSignalFromEvent, wasEventTriggeredRecently } from '../../../../base/common/observable.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { CursorChangeReason } from '../../../../editor/common/cursorEvents.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { FoldingController } from '../../../../editor/contrib/folding/browser/folding.js';\nimport { AccessibilityModality, AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IDebugService } from '../../debug/common/debug.js';\n\nexport class EditorTextPropertySignalsContribution extends Disposable implements IWorkbenchContribution {\n\tprivate readonly _textProperties: TextProperty[];\n\n\tprivate readonly _someAccessibilitySignalIsEnabled;\n\n\tprivate readonly _activeEditorObservable;\n\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService\n\t) {\n\t\tsuper();\n\t\tthis._textProperties = [\n\t\t\tthis._instantiationService.createInstance(MarkerTextProperty, AccessibilitySignal.errorAtPosition, AccessibilitySignal.errorOnLine, MarkerSeverity.Error),\n\t\t\tthis._instantiationService.createInstance(MarkerTextProperty, AccessibilitySignal.warningAtPosition, AccessibilitySignal.warningOnLine, MarkerSeverity.Warning),\n\t\t\tthis._instantiationService.createInstance(FoldedAreaTextProperty),\n\t\t\tthis._instantiationService.createInstance(BreakpointTextProperty),\n\t\t];\n\t\tthis._someAccessibilitySignalIsEnabled = derived(this, reader =>\n\t\t\tthis._textProperties\n\t\t\t\t.flatMap(p => [p.lineSignal, p.positionSignal])\n\t\t\t\t.filter(isDefined)\n\t\t\t\t.some(signal => observableFromValueWithChangeEvent(this, this._accessibilitySignalService.getEnabledState(signal, false)).read(reader))\n\t\t);\n\t\tthis._activeEditorObservable = observableFromEvent(this,\n\t\t\tthis._editorService.onDidActiveEditorChange,\n\t\t\t(_) => {\n\t\t\t\tconst activeTextEditorControl = this._editorService.activeTextEditorControl;\n\n\t\t\t\tconst editor = isDiffEditor(activeTextEditorControl)\n\t\t\t\t\t? activeTextEditorControl.getOriginalEditor()\n\t\t\t\t\t: isCodeEditor(activeTextEditorControl)\n\t\t\t\t\t\t? activeTextEditorControl\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\treturn editor && editor.hasModel() ? { editor, model: editor.getModel() } : undefined;\n\t\t\t}\n\t\t);\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description updateSignalsEnabled */\n\t\t\tif (!this._someAccessibilitySignalIsEnabled.read(reader)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst activeEditor = this._activeEditorObservable.read(reader);\n\t\t\tif (activeEditor) {\n\t\t\t\tthis._registerAccessibilitySignalsForEditor(activeEditor.editor, activeEditor.model, store);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerAccessibilitySignalsForEditor(editor: ICodeEditor, editorModel: ITextModel, store: DisposableStore): void {\n\t\tlet lastLine = -1;\n\t\tconst ignoredLineSignalsForCurrentLine = new Set<TextProperty>();\n\n\t\tconst timeouts = store.add(new DisposableStore());\n\n\t\tconst propertySources = this._textProperties.map(p => ({ source: p.createSource(editor, editorModel), property: p }));\n\n\t\tconst didType = wasEventTriggeredRecently(editor.onDidChangeModelContent, 100, store);\n\n\t\tstore.add(editor.onDidChangeCursorPosition(args => {\n\t\t\ttimeouts.clear();\n\n\t\t\tif (\n\t\t\t\targs &&\n\t\t\t\targs.reason !== CursorChangeReason.Explicit &&\n\t\t\t\targs.reason !== CursorChangeReason.NotSet\n\t\t\t) {\n\t\t\t\t// Ignore cursor changes caused by navigation (e.g. which happens when execution is paused).\n\t\t\t\tignoredLineSignalsForCurrentLine.clear();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst trigger = (property: TextProperty, source: TextPropertySource, mode: 'line' | 'positional') => {\n\t\t\t\tconst signal = mode === 'line' ? property.lineSignal : property.positionSignal;\n\t\t\t\tif (\n\t\t\t\t\t!signal\n\t\t\t\t\t|| !this._accessibilitySignalService.getEnabledState(signal, false).value\n\t\t\t\t\t|| !source.isPresent(position, mode, undefined)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (const modality of ['sound', 'announcement'] as AccessibilityModality[]) {\n\t\t\t\t\tif (this._accessibilitySignalService.getEnabledState(signal, false, modality).value) {\n\t\t\t\t\t\tconst delay = this._accessibilitySignalService.getDelayMs(signal, modality, mode) + (didType.get() ? 1000 : 0);\n\n\t\t\t\t\t\ttimeouts.add(disposableTimeout(() => {\n\t\t\t\t\t\t\tif (source.isPresent(position, mode, undefined)) {\n\t\t\t\t\t\t\t\tif (!(mode === 'line') || !ignoredLineSignalsForCurrentLine.has(property)) {\n\t\t\t\t\t\t\t\t\tthis._accessibilitySignalService.playSignal(signal, { modality });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tignoredLineSignalsForCurrentLine.add(property);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, delay));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// React to cursor changes\n\t\t\tconst position = args.position;\n\t\t\tconst lineNumber = position.lineNumber;\n\t\t\tif (lineNumber !== lastLine) {\n\t\t\t\tignoredLineSignalsForCurrentLine.clear();\n\t\t\t\tlastLine = lineNumber;\n\t\t\t\tfor (const p of propertySources) {\n\t\t\t\t\ttrigger(p.property, p.source, 'line');\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const p of propertySources) {\n\t\t\t\ttrigger(p.property, p.source, 'positional');\n\t\t\t}\n\n\t\t\t// React to property state changes for the current cursor position\n\t\t\tfor (const s of propertySources) {\n\t\t\t\tif (\n\t\t\t\t\t![s.property.lineSignal, s.property.positionSignal]\n\t\t\t\t\t\t.some(s => s && this._accessibilitySignalService.getEnabledState(s, false).value)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet lastValueAtPosition: boolean | undefined = undefined;\n\t\t\t\tlet lastValueOnLine: boolean | undefined = undefined;\n\t\t\t\ttimeouts.add(autorun(reader => {\n\t\t\t\t\tconst newValueAtPosition = s.source.isPresentAtPosition(args.position, reader);\n\t\t\t\t\tconst newValueOnLine = s.source.isPresentOnLine(args.position.lineNumber, reader);\n\n\t\t\t\t\tif (lastValueAtPosition !== undefined && lastValueAtPosition !== undefined) {\n\t\t\t\t\t\tif (!lastValueAtPosition && newValueAtPosition) {\n\t\t\t\t\t\t\ttrigger(s.property, s.source, 'positional');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!lastValueOnLine && newValueOnLine) {\n\t\t\t\t\t\t\ttrigger(s.property, s.source, 'line');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlastValueAtPosition = newValueAtPosition;\n\t\t\t\t\tlastValueOnLine = newValueOnLine;\n\t\t\t\t}));\n\t\t\t}\n\t\t}));\n\t}\n}\n\ninterface TextProperty {\n\treadonly positionSignal?: AccessibilitySignal;\n\treadonly lineSignal?: AccessibilitySignal;\n\treadonly debounceWhileTyping?: boolean;\n\tcreateSource(editor: ICodeEditor, model: ITextModel): TextPropertySource;\n}\n\nclass TextPropertySource {\n\tpublic static notPresent = new TextPropertySource({ isPresentAtPosition: () => false, isPresentOnLine: () => false });\n\n\tpublic readonly isPresentOnLine: (lineNumber: number, reader: IReader | undefined) => boolean;\n\tpublic readonly isPresentAtPosition: (position: Position, reader: IReader | undefined) => boolean;\n\n\tconstructor(options: {\n\t\tisPresentOnLine: (lineNumber: number, reader: IReader | undefined) => boolean;\n\t\tisPresentAtPosition?: (position: Position, reader: IReader | undefined) => boolean;\n\t}) {\n\t\tthis.isPresentOnLine = options.isPresentOnLine;\n\t\tthis.isPresentAtPosition = options.isPresentAtPosition ?? (() => false);\n\t}\n\n\tpublic isPresent(position: Position, mode: 'line' | 'positional', reader: IReader | undefined): boolean {\n\t\treturn mode === 'line' ? this.isPresentOnLine(position.lineNumber, reader) : this.isPresentAtPosition(position, reader);\n\t}\n}\n\nclass MarkerTextProperty implements TextProperty {\n\tpublic readonly debounceWhileTyping = true;\n\tconstructor(\n\t\tpublic readonly positionSignal: AccessibilitySignal,\n\t\tpublic readonly lineSignal: AccessibilitySignal,\n\t\tprivate readonly severity: MarkerSeverity,\n\t\t@IMarkerService private readonly markerService: IMarkerService,\n\n\t) { }\n\n\tcreateSource(editor: ICodeEditor, model: ITextModel): TextPropertySource {\n\t\tconst obs = observableSignalFromEvent('onMarkerChanged', this.markerService.onMarkerChanged);\n\t\treturn new TextPropertySource({\n\t\t\tisPresentAtPosition: (position, reader) => {\n\t\t\t\tobs.read(reader);\n\t\t\t\tconst hasMarker = this.markerService\n\t\t\t\t\t.read({ resource: model.uri })\n\t\t\t\t\t.some(\n\t\t\t\t\t\t(m) =>\n\t\t\t\t\t\t\tm.severity === this.severity &&\n\t\t\t\t\t\t\tm.startLineNumber <= position.lineNumber &&\n\t\t\t\t\t\t\tposition.lineNumber <= m.endLineNumber &&\n\t\t\t\t\t\t\tm.startColumn <= position.column &&\n\t\t\t\t\t\t\tposition.column <= m.endColumn\n\t\t\t\t\t);\n\t\t\t\treturn hasMarker;\n\t\t\t},\n\t\t\tisPresentOnLine: (lineNumber, reader) => {\n\t\t\t\tobs.read(reader);\n\t\t\t\tconst hasMarker = this.markerService\n\t\t\t\t\t.read({ resource: model.uri })\n\t\t\t\t\t.some(\n\t\t\t\t\t\t(m) =>\n\t\t\t\t\t\t\tm.severity === this.severity &&\n\t\t\t\t\t\t\tm.startLineNumber <= lineNumber &&\n\t\t\t\t\t\t\tlineNumber <= m.endLineNumber\n\t\t\t\t\t);\n\t\t\t\treturn hasMarker;\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass FoldedAreaTextProperty implements TextProperty {\n\tpublic readonly lineSignal = AccessibilitySignal.foldedArea;\n\n\tcreateSource(editor: ICodeEditor, _model: ITextModel): TextPropertySource {\n\t\tconst foldingController = FoldingController.get(editor);\n\t\tif (!foldingController) { return TextPropertySource.notPresent; }\n\n\t\tconst foldingModel = observableFromPromise(foldingController.getFoldingModel() ?? Promise.resolve(undefined));\n\t\treturn new TextPropertySource({\n\t\t\tisPresentOnLine(lineNumber, reader): boolean {\n\t\t\t\tconst m = foldingModel.read(reader);\n\t\t\t\tconst regionAtLine = m.value?.getRegionAtLine(lineNumber);\n\t\t\t\tconst hasFolding = !regionAtLine\n\t\t\t\t\t? false\n\t\t\t\t\t: regionAtLine.isCollapsed &&\n\t\t\t\t\tregionAtLine.startLineNumber === lineNumber;\n\t\t\t\treturn hasFolding;\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass BreakpointTextProperty implements TextProperty {\n\tpublic readonly lineSignal = AccessibilitySignal.break;\n\n\tconstructor(@IDebugService private readonly debugService: IDebugService) { }\n\n\tcreateSource(editor: ICodeEditor, model: ITextModel): TextPropertySource {\n\t\tconst signal = observableSignalFromEvent('onDidChangeBreakpoints', this.debugService.getModel().onDidChangeBreakpoints);\n\t\tconst debugService = this.debugService;\n\t\treturn new TextPropertySource({\n\t\t\tisPresentOnLine(lineNumber, reader): boolean {\n\t\t\t\tsignal.read(reader);\n\t\t\t\tconst breakpoints = debugService\n\t\t\t\t\t.getModel()\n\t\t\t\t\t.getBreakpoints({ uri: model.uri, lineNumber });\n\t\t\t\tconst hasBreakpoints = breakpoints.length > 0;\n\t\t\t\treturn hasBreakpoints;\n\t\t\t}\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { disposableTimeout } from '../../../../base/common/async.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IReader, autorun, autorunWithStore, derived, observableFromEvent, observableFromPromise, observableFromValueWithChangeEvent, observableSignalFromEvent, wasEventTriggeredRecently } from '../../../../base/common/observable.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { CursorChangeReason } from '../../../../editor/common/cursorEvents.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { FoldingController } from '../../../../editor/contrib/folding/browser/folding.js';\nimport { AccessibilityModality, AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IDebugService } from '../../debug/common/debug.js';\n\nexport class EditorTextPropertySignalsContribution extends Disposable implements IWorkbenchContribution {\n\tprivate readonly _textProperties: TextProperty[];\n\n\tprivate readonly _someAccessibilitySignalIsEnabled;\n\n\tprivate readonly _activeEditorObservable;\n\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService\n\t) {\n\t\tsuper();\n\t\tthis._textProperties = [\n\t\t\tthis._instantiationService.createInstance(MarkerTextProperty, AccessibilitySignal.errorAtPosition, AccessibilitySignal.errorOnLine, MarkerSeverity.Error),\n\t\t\tthis._instantiationService.createInstance(MarkerTextProperty, AccessibilitySignal.warningAtPosition, AccessibilitySignal.warningOnLine, MarkerSeverity.Warning),\n\t\t\tthis._instantiationService.createInstance(FoldedAreaTextProperty),\n\t\t\tthis._instantiationService.createInstance(BreakpointTextProperty),\n\t\t];\n\t\tthis._someAccessibilitySignalIsEnabled = derived(this, reader =>\n\t\t\tthis._textProperties\n\t\t\t\t.flatMap(p => [p.lineSignal, p.positionSignal])\n\t\t\t\t.filter(isDefined)\n\t\t\t\t.some(signal => observableFromValueWithChangeEvent(this, this._accessibilitySignalService.getEnabledState(signal, false)).read(reader))\n\t\t);\n\t\tthis._activeEditorObservable = observableFromEvent(this,\n\t\t\tthis._editorService.onDidActiveEditorChange,\n\t\t\t(_) => {\n\t\t\t\tconst activeTextEditorControl = this._editorService.activeTextEditorControl;\n\n\t\t\t\tconst editor = isDiffEditor(activeTextEditorControl)\n\t\t\t\t\t? activeTextEditorControl.getOriginalEditor()\n\t\t\t\t\t: isCodeEditor(activeTextEditorControl)\n\t\t\t\t\t\t? activeTextEditorControl\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\treturn editor && editor.hasModel() ? { editor, model: editor.getModel() } : undefined;\n\t\t\t}\n\t\t);\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\t/** @description updateSignalsEnabled */\n\t\t\tif (!this._someAccessibilitySignalIsEnabled.read(reader)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst activeEditor = this._activeEditorObservable.read(reader);\n\t\t\tif (activeEditor) {\n\t\t\t\tthis._registerAccessibilitySignalsForEditor(activeEditor.editor, activeEditor.model, store);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerAccessibilitySignalsForEditor(editor: ICodeEditor, editorModel: ITextModel, store: DisposableStore): void {\n\t\tlet lastLine = -1;\n\t\tconst ignoredLineSignalsForCurrentLine = new Set<TextProperty>();\n\n\t\tconst timeouts = store.add(new DisposableStore());\n\n\t\tconst propertySources = this._textProperties.map(p => ({ source: p.createSource(editor, editorModel), property: p }));\n\n\t\tconst didType = wasEventTriggeredRecently(editor.onDidChangeModelContent, 100, store);\n\n\t\tstore.add(editor.onDidChangeCursorPosition(args => {\n\t\t\ttimeouts.clear();\n\n\t\t\tif (\n\t\t\t\targs &&\n\t\t\t\targs.reason !== CursorChangeReason.Explicit &&\n\t\t\t\targs.reason !== CursorChangeReason.NotSet\n\t\t\t) {\n\t\t\t\t// Ignore cursor changes caused by navigation (e.g. which happens when execution is paused).\n\t\t\t\tignoredLineSignalsForCurrentLine.clear();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst trigger = (property: TextProperty, source: TextPropertySource, mode: 'line' | 'positional') => {\n\t\t\t\tconst signal = mode === 'line' ? property.lineSignal : property.positionSignal;\n\t\t\t\tif (\n\t\t\t\t\t!signal\n\t\t\t\t\t|| !this._accessibilitySignalService.getEnabledState(signal, false).value\n\t\t\t\t\t|| !source.isPresent(position, mode, undefined)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (const modality of ['sound', 'announcement'] as AccessibilityModality[]) {\n\t\t\t\t\tif (this._accessibilitySignalService.getEnabledState(signal, false, modality).value) {\n\t\t\t\t\t\tconst delay = this._accessibilitySignalService.getDelayMs(signal, modality, mode) + (didType.get() ? 1000 : 0);\n\n\t\t\t\t\t\ttimeouts.add(disposableTimeout(() => {\n\t\t\t\t\t\t\tif (source.isPresent(position, mode, undefined)) {\n\t\t\t\t\t\t\t\tif (!(mode === 'line') || !ignoredLineSignalsForCurrentLine.has(property)) {\n\t\t\t\t\t\t\t\t\tthis._accessibilitySignalService.playSignal(signal, { modality });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tignoredLineSignalsForCurrentLine.add(property);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, delay));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// React to cursor changes\n\t\t\tconst position = args.position;\n\t\t\tconst lineNumber = position.lineNumber;\n\t\t\tif (lineNumber !== lastLine) {\n\t\t\t\tignoredLineSignalsForCurrentLine.clear();\n\t\t\t\tlastLine = lineNumber;\n\t\t\t\tfor (const p of propertySources) {\n\t\t\t\t\ttrigger(p.property, p.source, 'line');\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const p of propertySources) {\n\t\t\t\ttrigger(p.property, p.source, 'positional');\n\t\t\t}\n\n\t\t\t// React to property state changes for the current cursor position\n\t\t\tfor (const s of propertySources) {\n\t\t\t\tif (\n\t\t\t\t\t![s.property.lineSignal, s.property.positionSignal]\n\t\t\t\t\t\t.some(s => s && this._accessibilitySignalService.getEnabledState(s, false).value)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet lastValueAtPosition: boolean | undefined = undefined;\n\t\t\t\tlet lastValueOnLine: boolean | undefined = undefined;\n\t\t\t\ttimeouts.add(autorun(reader => {\n\t\t\t\t\tconst newValueAtPosition = s.source.isPresentAtPosition(args.position, reader);\n\t\t\t\t\tconst newValueOnLine = s.source.isPresentOnLine(args.position.lineNumber, reader);\n\n\t\t\t\t\tif (lastValueAtPosition !== undefined && lastValueAtPosition !== undefined) {\n\t\t\t\t\t\tif (!lastValueAtPosition && newValueAtPosition) {\n\t\t\t\t\t\t\ttrigger(s.property, s.source, 'positional');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!lastValueOnLine && newValueOnLine) {\n\t\t\t\t\t\t\ttrigger(s.property, s.source, 'line');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlastValueAtPosition = newValueAtPosition;\n\t\t\t\t\tlastValueOnLine = newValueOnLine;\n\t\t\t\t}));\n\t\t\t}\n\t\t}));\n\t}\n}\n\ninterface TextProperty {\n\treadonly positionSignal?: AccessibilitySignal;\n\treadonly lineSignal?: AccessibilitySignal;\n\treadonly debounceWhileTyping?: boolean;\n\tcreateSource(editor: ICodeEditor, model: ITextModel): TextPropertySource;\n}\n\nclass TextPropertySource {\n\tpublic static notPresent = new TextPropertySource({ isPresentAtPosition: () => false, isPresentOnLine: () => false });\n\n\tpublic readonly isPresentOnLine: (lineNumber: number, reader: IReader | undefined) => boolean;\n\tpublic readonly isPresentAtPosition: (position: Position, reader: IReader | undefined) => boolean;\n\n\tconstructor(options: {\n\t\tisPresentOnLine: (lineNumber: number, reader: IReader | undefined) => boolean;\n\t\tisPresentAtPosition?: (position: Position, reader: IReader | undefined) => boolean;\n\t}) {\n\t\tthis.isPresentOnLine = options.isPresentOnLine;\n\t\tthis.isPresentAtPosition = options.isPresentAtPosition ?? (() => false);\n\t}\n\n\tpublic isPresent(position: Position, mode: 'line' | 'positional', reader: IReader | undefined): boolean {\n\t\treturn mode === 'line' ? this.isPresentOnLine(position.lineNumber, reader) : this.isPresentAtPosition(position, reader);\n\t}\n}\n\nclass MarkerTextProperty implements TextProperty {\n\tpublic readonly debounceWhileTyping = true;\n\tconstructor(\n\t\tpublic readonly positionSignal: AccessibilitySignal,\n\t\tpublic readonly lineSignal: AccessibilitySignal,\n\t\tprivate readonly severity: MarkerSeverity,\n\t\t@IMarkerService private readonly markerService: IMarkerService,\n\n\t) { }\n\n\tcreateSource(editor: ICodeEditor, model: ITextModel): TextPropertySource {\n\t\tconst obs = observableSignalFromEvent('onMarkerChanged', this.markerService.onMarkerChanged);\n\t\treturn new TextPropertySource({\n\t\t\tisPresentAtPosition: (position, reader) => {\n\t\t\t\tobs.read(reader);\n\t\t\t\tconst hasMarker = this.markerService\n\t\t\t\t\t.read({ resource: model.uri })\n\t\t\t\t\t.some(\n\t\t\t\t\t\t(m) =>\n\t\t\t\t\t\t\tm.severity === this.severity &&\n\t\t\t\t\t\t\tm.startLineNumber <= position.lineNumber &&\n\t\t\t\t\t\t\tposition.lineNumber <= m.endLineNumber &&\n\t\t\t\t\t\t\tm.startColumn <= position.column &&\n\t\t\t\t\t\t\tposition.column <= m.endColumn\n\t\t\t\t\t);\n\t\t\t\treturn hasMarker;\n\t\t\t},\n\t\t\tisPresentOnLine: (lineNumber, reader) => {\n\t\t\t\tobs.read(reader);\n\t\t\t\tconst hasMarker = this.markerService\n\t\t\t\t\t.read({ resource: model.uri })\n\t\t\t\t\t.some(\n\t\t\t\t\t\t(m) =>\n\t\t\t\t\t\t\tm.severity === this.severity &&\n\t\t\t\t\t\t\tm.startLineNumber <= lineNumber &&\n\t\t\t\t\t\t\tlineNumber <= m.endLineNumber\n\t\t\t\t\t);\n\t\t\t\treturn hasMarker;\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass FoldedAreaTextProperty implements TextProperty {\n\tpublic readonly lineSignal = AccessibilitySignal.foldedArea;\n\n\tcreateSource(editor: ICodeEditor, _model: ITextModel): TextPropertySource {\n\t\tconst foldingController = FoldingController.get(editor);\n\t\tif (!foldingController) { return TextPropertySource.notPresent; }\n\n\t\tconst foldingModel = observableFromPromise(foldingController.getFoldingModel() ?? Promise.resolve(undefined));\n\t\treturn new TextPropertySource({\n\t\t\tisPresentOnLine(lineNumber, reader): boolean {\n\t\t\t\tconst m = foldingModel.read(reader);\n\t\t\t\tconst regionAtLine = m.value?.getRegionAtLine(lineNumber);\n\t\t\t\tconst hasFolding = !regionAtLine\n\t\t\t\t\t? false\n\t\t\t\t\t: regionAtLine.isCollapsed &&\n\t\t\t\t\tregionAtLine.startLineNumber === lineNumber;\n\t\t\t\treturn hasFolding;\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass BreakpointTextProperty implements TextProperty {\n\tpublic readonly lineSignal = AccessibilitySignal.break;\n\n\tconstructor(@IDebugService private readonly debugService: IDebugService) { }\n\n\tcreateSource(editor: ICodeEditor, model: ITextModel): TextPropertySource {\n\t\tconst signal = observableSignalFromEvent('onDidChangeBreakpoints', this.debugService.getModel().onDidChangeBreakpoints);\n\t\tconst debugService = this.debugService;\n\t\treturn new TextPropertySource({\n\t\t\tisPresentOnLine(lineNumber, reader): boolean {\n\t\t\t\tsignal.read(reader);\n\t\t\t\tconst breakpoints = debugService\n\t\t\t\t\t.getModel()\n\t\t\t\t\t.getBreakpoints({ uri: model.uri, lineNumber });\n\t\t\t\tconst hasBreakpoints = breakpoints.length > 0;\n\t\t\t\treturn hasBreakpoints;\n\t\t\t}\n\t\t});\n\t}\n}\n"]}