{"version":3,"sources":["vs/workbench/contrib/accessibilitySignals/browser/commands.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAE,SAAS,EAAE,MAAM,sCAAsC,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAC;AACzD,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,OAAO,EAAE,MAAM,gDAAgD,CAAC;AACzE,OAAO,EAAE,mBAAmB,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,MAAM,gFAAgF,CAAC;AAC/K,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AAEnG,OAAO,EAAE,kBAAkB,EAAkB,MAAM,sDAAsD,CAAC;AAC1G,OAAO,EAAE,mBAAmB,EAAE,MAAM,qDAAqD,CAAC;AAC1F,OAAO,EAAE,eAAe,EAAE,MAAM,sCAAsC,CAAC;AAEvE,MAAM,OAAO,mBAAoB,SAAQ,OAAO;aAC/B,OAAE,GAAG,qBAAqB,CAAC;IAE3C;QACC,KAAK,CAAC;YACL,EAAE,EAAE,mBAAmB,CAAC,EAAE;YAC1B,KAAK,EAAE,SAAS,CAAC,IAAoB,EAAE,0BAA0B,CAAC;YAClE,EAAE,EAAE,IAAI;YACR,QAAQ,EAAE;gBACT,WAAW,EAAE,QAAQ,CAAC,IAAsC,EAAE,IAAmF,CAAC;aAClJ;SACD,CAAC,CAAC;IACJ,CAAC;IAEQ,KAAK,CAAC,GAAG,CAAC,QAA0B;QAC5C,MAAM,0BAA0B,GAAG,QAAQ,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QAC7E,MAAM,iBAAiB,GAAG,QAAQ,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAC3D,MAAM,oBAAoB,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACjE,MAAM,oBAAoB,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,QAAQ,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAC7D,MAAM,kBAAkB,GAAG,CAAC,mBAAmB,CAAC,IAAI,EAAE,mBAAmB,CAAC,MAAM,CAAC,CAAC;QAClF,MAAM,KAAK,GAAyD,mBAAmB,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;YACrI,KAAK,EAAE,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,KAAK,oBAAoB,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI;YAC7I,MAAM;YACN,OAAO,EAAE,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/C,SAAS,EAAE,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC;oBACtD,OAAO,EAAE,QAAQ,CAAC,IAAsB,EAAE,IAAiB,CAAC;oBAC5D,aAAa,EAAE,IAAI;iBACnB,CAAC,CAAC,CAAC,CAAC,EAAE;SACP,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACnD,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,MAAM,EAAE,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,eAAe,EAAoD,CAAC,CAAC;QAClH,EAAE,CAAC,KAAK,GAAG,KAAK,CAAC;QACjB,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,0BAA0B,CAAC,cAAc,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,OAAO,CAAC,CAAC;QACjN,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE;YACnC,MAAM,aAAa,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YAC1D,mDAAmD;YACnD,MAAM,cAAc,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAE,CAAS,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;YACpG,KAAK,MAAM,MAAM,IAAI,aAAa,EAAE,CAAC;gBACpC,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,oBAAoB,CAAC,QAAQ,CAA2C,MAAM,CAAC,WAAW,CAAC,CAAC;gBAC1H,KAAK,GAAG,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,oBAAoB,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC7H,IAAI,YAAY,EAAE,CAAC;oBAClB,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,CAAC,CAAC;gBAC/E,CAAC;qBAAM,CAAC;oBACP,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;gBACjE,CAAC;YACF,CAAC;YAED,KAAK,MAAM,MAAM,IAAI,cAAc,EAAE,CAAC;gBACrC,MAAM,YAAY,GAAG,oBAAoB,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,GAAG,eAAe,CAAC,CAAC;gBACzF,MAAM,KAAK,GAAG,uBAAuB,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,oBAAoB,CAAC,uBAAuB,EAAE,CAAC,CAAC;gBAC3H,MAAM,KAAK,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;gBACjE,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YAC7D,CAAC;YACD,EAAE,CAAC,IAAI,EAAE,CAAC;QACX,CAAC,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAAE;YAC7C,kBAAkB,CAAC,gBAAgB,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,aAAa,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAC1H,CAAC,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,iBAAiB,CAAC,GAAG,EAAE;YACzC,0BAA0B,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,2BAA2B,CAAC,CAAC;QACxH,CAAC,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAC3D,EAAE,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAyB,EAAE,IAAsC,CAAC,CAAC;QAC7F,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC;QACxB,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC;IACjB,CAAC;;AAGF,SAAS,uBAAuB,CAAC,mBAA4B,EAAE,uBAAgC;IAC9F,OAAO,uBAAuB,CAAC,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AACrH,CAAC;AAED,MAAM,OAAO,iCAAkC,SAAQ,OAAO;aAC7C,OAAE,GAAG,iCAAiC,CAAC;IAEvD;QACC,KAAK,CAAC;YACL,EAAE,EAAE,iCAAiC,CAAC,EAAE;YACxC,KAAK,EAAE,SAAS,CAAC,IAAiC,EAAE,iCAAiC,CAAC;YACtF,EAAE,EAAE,IAAI;YACR,QAAQ,EAAE;gBACT,WAAW,EAAE,QAAQ,CAAC,IAA6C,EAAE,IAA8F,CAAC;aACpK;SACD,CAAC,CAAC;IACJ,CAAC;IAEQ,KAAK,CAAC,GAAG,CAAC,QAA0B;QAC5C,MAAM,0BAA0B,GAAG,QAAQ,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QAC7E,MAAM,iBAAiB,GAAG,QAAQ,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QAC3D,MAAM,oBAAoB,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACjE,MAAM,oBAAoB,GAAG,QAAQ,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,QAAQ,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAC7D,MAAM,kBAAkB,GAAG,CAAC,mBAAmB,CAAC,IAAI,EAAE,mBAAmB,CAAC,MAAM,CAAC,CAAC;QAClF,MAAM,KAAK,GAAyD,mBAAmB,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;YACpL,KAAK,EAAE,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,KAAK,oBAAoB,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI;YACpJ,MAAM;YACN,OAAO,EAAE,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/C,SAAS,EAAE,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,CAAC;oBACtD,OAAO,EAAE,QAAQ,CAAC,IAA4B,EAAE,IAAwB,CAAC;oBACzE,aAAa,EAAE,IAAI;iBACnB,CAAC,CAAC,CAAC,CAAC,EAAE;SACP,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACnD,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,MAAM,EAAE,GAAG,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,eAAe,EAAoD,CAAC,CAAC;QAClH,EAAE,CAAC,KAAK,GAAG,KAAK,CAAC;QACjB,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,0BAA0B,CAAC,qBAAqB,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,WAAW,GAAG,eAAe,CAAC,KAAK,OAAO,CAAC,CAAC;QAC/N,MAAM,qBAAqB,GAAG,oBAAoB,CAAC,uBAAuB,EAAE,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,WAAW,CAAC,GAAG,EAAE;YACnC,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC5B,oEAAoE;gBACpE,EAAE,CAAC,IAAI,EAAE,CAAC;gBACV,OAAO;YACR,CAAC;YACD,MAAM,oBAAoB,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YACjE,MAAM,qBAAqB,GAAG,mBAAmB,CAAC,uBAAuB,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,6BAA6B,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;YACpK,KAAK,MAAM,MAAM,IAAI,oBAAoB,EAAE,CAAC;gBAC3C,IAAI,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,oBAAoB,CAAC,QAAQ,CAA2C,MAAM,CAAC,WAAW,CAAC,CAAC;gBAC1H,YAAY,GAAG,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,CAAC,mBAAmB,IAAI,oBAAoB,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC;gBACvK,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,CAAC,CAAC;YAC/E,CAAC;YAED,KAAK,MAAM,MAAM,IAAI,qBAAqB,EAAE,CAAC;gBAC5C,MAAM,YAAY,GAAG,uBAAuB,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;gBACxF,MAAM,KAAK,GAAG,oBAAoB,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,CAAC;gBAC3E,MAAM,KAAK,GAAG,YAAY,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;gBACjE,oBAAoB,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;YAC7D,CAAC;YACD,EAAE,CAAC,IAAI,EAAE,CAAC;QACX,CAAC,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAAE;YAC7C,kBAAkB,CAAC,gBAAgB,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,aAAa,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAC1H,CAAC,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAC3D,EAAE,CAAC,WAAW,GAAG,qBAAqB,CAAC,CAAC,CAAC,QAAQ,CAAC,IAA+B,EAAE,IAAqC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAwC,EAAE,IAAqE,CAAC,CAAC;QACtP,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC;QACxB,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC;IACjB,CAAC","file":"commands.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { Action2 } from '../../../../platform/actions/common/actions.js';\nimport { AccessibilitySignal, AcknowledgeDocCommentsToken, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\n\nexport class ShowSignalSoundHelp extends Action2 {\n\tstatic readonly ID = 'signals.sounds.help';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ShowSignalSoundHelp.ID,\n\t\t\ttitle: localize2('signals.sound.help', \"Help: List Signal Sounds\"),\n\t\t\tf1: true,\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize('accessibility.sound.help.description', \"List all accessibility sounds, noises, or audio cues and configure their settings\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst accessibilitySignalService = accessor.get(IAccessibilitySignalService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst accessibilityService = accessor.get(IAccessibilityService);\n\t\tconst preferencesService = accessor.get(IPreferencesService);\n\t\tconst userGestureSignals = [AccessibilitySignal.save, AccessibilitySignal.format];\n\t\tconst items: (IQuickPickItem & { signal: AccessibilitySignal })[] = AccessibilitySignal.allAccessibilitySignals.map((signal, idx) => ({\n\t\t\tlabel: userGestureSignals.includes(signal) ? `${signal.name} (${configurationService.getValue(signal.settingsKey + '.sound')})` : signal.name,\n\t\t\tsignal,\n\t\t\tbuttons: userGestureSignals.includes(signal) ? [{\n\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.settingsGear),\n\t\t\t\ttooltip: localize('sounds.help.settings', 'Configure Sound'),\n\t\t\t\talwaysVisible: true\n\t\t\t}] : []\n\t\t})).sort((a, b) => a.label.localeCompare(b.label));\n\t\tconst disposables = new DisposableStore();\n\t\tconst qp = disposables.add(quickInputService.createQuickPick<IQuickPickItem & { signal: AccessibilitySignal }>());\n\t\tqp.items = items;\n\t\tqp.selectedItems = items.filter(i => accessibilitySignalService.isSoundEnabled(i.signal) || userGestureSignals.includes(i.signal) && configurationService.getValue(i.signal.settingsKey + '.sound') !== 'never');\n\t\tdisposables.add(qp.onDidAccept(() => {\n\t\t\tconst enabledSounds = qp.selectedItems.map(i => i.signal);\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tconst disabledSounds = qp.items.map(i => (i as any).signal).filter(i => !enabledSounds.includes(i));\n\t\t\tfor (const signal of enabledSounds) {\n\t\t\t\tlet { sound, announcement } = configurationService.getValue<{ sound: string; announcement?: string }>(signal.settingsKey);\n\t\t\t\tsound = userGestureSignals.includes(signal) ? 'userGesture' : accessibilityService.isScreenReaderOptimized() ? 'auto' : 'on';\n\t\t\t\tif (announcement) {\n\t\t\t\t\tconfigurationService.updateValue(signal.settingsKey, { sound, announcement });\n\t\t\t\t} else {\n\t\t\t\t\tconfigurationService.updateValue(signal.settingsKey, { sound });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const signal of disabledSounds) {\n\t\t\t\tconst announcement = configurationService.getValue(signal.settingsKey + '.announcement');\n\t\t\t\tconst sound = getDisabledSettingValue(userGestureSignals.includes(signal), accessibilityService.isScreenReaderOptimized());\n\t\t\t\tconst value = announcement ? { sound, announcement } : { sound };\n\t\t\t\tconfigurationService.updateValue(signal.settingsKey, value);\n\t\t\t}\n\t\t\tqp.hide();\n\t\t}));\n\t\tdisposables.add(qp.onDidTriggerItemButton(e => {\n\t\t\tpreferencesService.openUserSettings({ jsonEditor: true, revealSetting: { key: e.item.signal.settingsKey, edit: true } });\n\t\t}));\n\t\tdisposables.add(qp.onDidChangeActive(() => {\n\t\t\taccessibilitySignalService.playSound(qp.activeItems[0].signal.sound.getSound(true), true, AcknowledgeDocCommentsToken);\n\t\t}));\n\t\tdisposables.add(qp.onDidHide(() => disposables.dispose()));\n\t\tqp.placeholder = localize('sounds.help.placeholder', 'Select a sound to play and configure');\n\t\tqp.canSelectMany = true;\n\t\tawait qp.show();\n\t}\n}\n\nfunction getDisabledSettingValue(isUserGestureSignal: boolean, isScreenReaderOptimized: boolean): string {\n\treturn isScreenReaderOptimized ? (isUserGestureSignal ? 'never' : 'off') : (isUserGestureSignal ? 'never' : 'auto');\n}\n\nexport class ShowAccessibilityAnnouncementHelp extends Action2 {\n\tstatic readonly ID = 'accessibility.announcement.help';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ShowAccessibilityAnnouncementHelp.ID,\n\t\t\ttitle: localize2('accessibility.announcement.help', \"Help: List Signal Announcements\"),\n\t\t\tf1: true,\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize('accessibility.announcement.help.description', \"List all accessibility announcements, alerts, braille messages, and configure their settings\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst accessibilitySignalService = accessor.get(IAccessibilitySignalService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst accessibilityService = accessor.get(IAccessibilityService);\n\t\tconst preferencesService = accessor.get(IPreferencesService);\n\t\tconst userGestureSignals = [AccessibilitySignal.save, AccessibilitySignal.format];\n\t\tconst items: (IQuickPickItem & { signal: AccessibilitySignal })[] = AccessibilitySignal.allAccessibilitySignals.filter(c => !!c.legacyAnnouncementSettingsKey).map((signal, idx) => ({\n\t\t\tlabel: userGestureSignals.includes(signal) ? `${signal.name} (${configurationService.getValue(signal.settingsKey + '.announcement')})` : signal.name,\n\t\t\tsignal,\n\t\t\tbuttons: userGestureSignals.includes(signal) ? [{\n\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.settingsGear),\n\t\t\t\ttooltip: localize('announcement.help.settings', 'Configure Announcement'),\n\t\t\t\talwaysVisible: true,\n\t\t\t}] : []\n\t\t})).sort((a, b) => a.label.localeCompare(b.label));\n\t\tconst disposables = new DisposableStore();\n\t\tconst qp = disposables.add(quickInputService.createQuickPick<IQuickPickItem & { signal: AccessibilitySignal }>());\n\t\tqp.items = items;\n\t\tqp.selectedItems = items.filter(i => accessibilitySignalService.isAnnouncementEnabled(i.signal) || userGestureSignals.includes(i.signal) && configurationService.getValue(i.signal.settingsKey + '.announcement') !== 'never');\n\t\tconst screenReaderOptimized = accessibilityService.isScreenReaderOptimized();\n\t\tdisposables.add(qp.onDidAccept(() => {\n\t\t\tif (!screenReaderOptimized) {\n\t\t\t\t// announcements are off by default when screen reader is not active\n\t\t\t\tqp.hide();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst enabledAnnouncements = qp.selectedItems.map(i => i.signal);\n\t\t\tconst disabledAnnouncements = AccessibilitySignal.allAccessibilitySignals.filter(cue => !!cue.legacyAnnouncementSettingsKey && !enabledAnnouncements.includes(cue));\n\t\t\tfor (const signal of enabledAnnouncements) {\n\t\t\t\tlet { sound, announcement } = configurationService.getValue<{ sound: string; announcement?: string }>(signal.settingsKey);\n\t\t\t\tannouncement = userGestureSignals.includes(signal) ? 'userGesture' : signal.announcementMessage && accessibilityService.isScreenReaderOptimized() ? 'auto' : undefined;\n\t\t\t\tconfigurationService.updateValue(signal.settingsKey, { sound, announcement });\n\t\t\t}\n\n\t\t\tfor (const signal of disabledAnnouncements) {\n\t\t\t\tconst announcement = getDisabledSettingValue(userGestureSignals.includes(signal), true);\n\t\t\t\tconst sound = configurationService.getValue(signal.settingsKey + '.sound');\n\t\t\t\tconst value = announcement ? { sound, announcement } : { sound };\n\t\t\t\tconfigurationService.updateValue(signal.settingsKey, value);\n\t\t\t}\n\t\t\tqp.hide();\n\t\t}));\n\t\tdisposables.add(qp.onDidTriggerItemButton(e => {\n\t\t\tpreferencesService.openUserSettings({ jsonEditor: true, revealSetting: { key: e.item.signal.settingsKey, edit: true } });\n\t\t}));\n\t\tdisposables.add(qp.onDidHide(() => disposables.dispose()));\n\t\tqp.placeholder = screenReaderOptimized ? localize('announcement.help.placeholder', 'Select an announcement to configure') : localize('announcement.help.placeholder.disabled', 'Screen reader is not active, announcements are disabled by default.');\n\t\tqp.canSelectMany = true;\n\t\tawait qp.show();\n\t}\n}\n"]}