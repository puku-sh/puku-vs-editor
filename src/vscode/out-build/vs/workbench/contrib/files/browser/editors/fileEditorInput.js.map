{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/files/browser/editors/fileEditorInput.ts","vs/workbench/contrib/files/browser/editors/fileEditorInput.ts"],"names":[],"mappings":"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","file":"fileEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IFileEditorInput, Verbosity, GroupIdentifier, IMoveResult, EditorInputCapabilities, IEditorDescriptor, IEditorPane, IUntypedEditorInput, DEFAULT_EDITOR_ASSOCIATION, IUntypedFileEditorInput, findViewStateForEditor, isResourceEditorInput, IFileEditorInputOptions } from '../../../../common/editor.js';\nimport { EditorInput, IUntypedEditorOptions } from '../../../../common/editor/editorInput.js';\nimport { AbstractTextResourceEditorInput } from '../../../../common/editor/textResourceEditorInput.js';\nimport { ITextResourceEditorInput } from '../../../../../platform/editor/common/editor.js';\nimport { BinaryEditorModel } from '../../../../common/editor/binaryEditorModel.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { ITextFileService, TextFileEditorModelState, TextFileResolveReason, TextFileOperationError, TextFileOperationResult, ITextFileEditorModel, EncodingMode } from '../../../../services/textfile/common/textfiles.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IReference, dispose, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { FILE_EDITOR_INPUT_ID, TEXT_FILE_EDITOR_ID, BINARY_FILE_EDITOR_ID } from '../../common/files.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { createTextBufferFactory } from '../../../../../editor/common/model/textModel.js';\nimport { IPathService } from '../../../../services/path/common/pathService.js';\nimport { ITextResourceConfigurationService } from '../../../../../editor/common/services/textResourceConfiguration.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { ICustomEditorLabelService } from '../../../../services/editor/common/customEditorLabelService.js';\n\nconst enum ForceOpenAs {\n\tNone,\n\tText,\n\tBinary\n}\n\n/**\n * A file editor input is the input type for the file editor of file system resources.\n */\nexport class FileEditorInput extends AbstractTextResourceEditorInput implements IFileEditorInput {\n\n\toverride get typeId(): string {\n\t\treturn FILE_EDITOR_INPUT_ID;\n\t}\n\n\toverride get editorId(): string | undefined {\n\t\treturn DEFAULT_EDITOR_ASSOCIATION.id;\n\t}\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = EditorInputCapabilities.CanSplitInGroup;\n\n\t\tif (this.model) {\n\t\t\tif (this.model.isReadonly()) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.fileService.hasProvider(this.resource)) {\n\t\t\t\tif (this.filesConfigurationService.isReadonly(this.resource)) {\n\t\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Untitled;\n\t\t\t}\n\t\t}\n\n\t\tif (!(capabilities & EditorInputCapabilities.Readonly)) {\n\t\t\tcapabilities |= EditorInputCapabilities.CanDropIntoEditor;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\tprivate preferredName: string | undefined;\n\tprivate preferredDescription: string | undefined;\n\tprivate preferredEncoding: string | undefined;\n\tprivate preferredLanguageId: string | undefined;\n\tprivate preferredContents: string | undefined;\n\n\tprivate forceOpenAs: ForceOpenAs = ForceOpenAs.None;\n\n\tprivate model: ITextFileEditorModel | undefined = undefined;\n\tprivate cachedTextFileModelReference: IReference<ITextFileEditorModel> | undefined = undefined;\n\n\tprivate readonly modelListeners = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tresource: URI,\n\t\tpreferredResource: URI | undefined,\n\t\tpreferredName: string | undefined,\n\t\tpreferredDescription: string | undefined,\n\t\tpreferredEncoding: string | undefined,\n\t\tpreferredLanguageId: string | undefined,\n\t\tpreferredContents: string | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IFilesConfigurationService filesConfigurationService: IFilesConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IPathService private readonly pathService: IPathService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@ICustomEditorLabelService customEditorLabelService: ICustomEditorLabelService\n\t) {\n\t\tsuper(resource, preferredResource, editorService, textFileService, labelService, fileService, filesConfigurationService, textResourceConfigurationService, customEditorLabelService);\n\n\t\tthis.model = this.textFileService.files.get(resource);\n\n\t\tif (preferredName) {\n\t\t\tthis.setPreferredName(preferredName);\n\t\t}\n\n\t\tif (preferredDescription) {\n\t\t\tthis.setPreferredDescription(preferredDescription);\n\t\t}\n\n\t\tif (preferredEncoding) {\n\t\t\tthis.setPreferredEncoding(preferredEncoding);\n\t\t}\n\n\t\tif (preferredLanguageId) {\n\t\t\tthis.setPreferredLanguageId(preferredLanguageId);\n\t\t}\n\n\t\tif (typeof preferredContents === 'string') {\n\t\t\tthis.setPreferredContents(preferredContents);\n\t\t}\n\n\t\t// Attach to model that matches our resource once created\n\t\tthis._register(this.textFileService.files.onDidCreate(model => this.onDidCreateTextFileModel(model)));\n\n\t\t// If a file model already exists, make sure to wire it in\n\t\tif (this.model) {\n\t\t\tthis.registerModelListeners(this.model);\n\t\t}\n\t}\n\n\tprivate onDidCreateTextFileModel(model: ITextFileEditorModel): void {\n\n\t\t// Once the text file model is created, we keep it inside\n\t\t// the input to be able to implement some methods properly\n\t\tif (isEqual(model.resource, this.resource)) {\n\t\t\tthis.model = model;\n\n\t\t\tthis.registerModelListeners(model);\n\t\t}\n\t}\n\n\tprivate registerModelListeners(model: ITextFileEditorModel): void {\n\n\t\t// Clear any old\n\t\tthis.modelListeners.clear();\n\n\t\t// re-emit some events from the model\n\t\tthis.modelListeners.add(model.onDidChangeDirty(() => this._onDidChangeDirty.fire()));\n\t\tthis.modelListeners.add(model.onDidChangeReadonly(() => this._onDidChangeCapabilities.fire()));\n\n\t\t// important: treat save errors as potential dirty change because\n\t\t// a file that is in save conflict or error will report dirty even\n\t\t// if auto save is turned on.\n\t\tthis.modelListeners.add(model.onDidSaveError(() => this._onDidChangeDirty.fire()));\n\n\t\t// remove model association once it gets disposed\n\t\tthis.modelListeners.add(Event.once(model.onWillDispose)(() => {\n\t\t\tthis.modelListeners.clear();\n\t\t\tthis.model = undefined;\n\t\t}));\n\t}\n\n\toverride getName(): string {\n\t\treturn this.preferredName || super.getName();\n\t}\n\n\tsetPreferredName(name: string): void {\n\t\tif (!this.allowLabelOverride()) {\n\t\t\treturn; // block for specific schemes we consider to be owning\n\t\t}\n\n\t\tif (this.preferredName !== name) {\n\t\t\tthis.preferredName = name;\n\n\t\t\tthis._onDidChangeLabel.fire();\n\t\t}\n\t}\n\n\tprivate allowLabelOverride(): boolean {\n\t\treturn this.resource.scheme !== this.pathService.defaultUriScheme &&\n\t\t\tthis.resource.scheme !== Schemas.vscodeUserData &&\n\t\t\tthis.resource.scheme !== Schemas.file &&\n\t\t\tthis.resource.scheme !== Schemas.vscodeRemote;\n\t}\n\n\tgetPreferredName(): string | undefined {\n\t\treturn this.preferredName;\n\t}\n\n\toverride isReadonly(): boolean | IMarkdownString {\n\t\treturn this.model ? this.model.isReadonly() : this.filesConfigurationService.isReadonly(this.resource);\n\t}\n\n\toverride getDescription(verbosity?: Verbosity): string | undefined {\n\t\treturn this.preferredDescription || super.getDescription(verbosity);\n\t}\n\n\tsetPreferredDescription(description: string): void {\n\t\tif (!this.allowLabelOverride()) {\n\t\t\treturn; // block for specific schemes we consider to be owning\n\t\t}\n\n\t\tif (this.preferredDescription !== description) {\n\t\t\tthis.preferredDescription = description;\n\n\t\t\tthis._onDidChangeLabel.fire();\n\t\t}\n\t}\n\n\tgetPreferredDescription(): string | undefined {\n\t\treturn this.preferredDescription;\n\t}\n\n\toverride getTitle(verbosity?: Verbosity): string {\n\t\tlet title = super.getTitle(verbosity);\n\n\t\tconst preferredTitle = this.getPreferredTitle();\n\t\tif (preferredTitle) {\n\t\t\ttitle = `${preferredTitle} (${title})`;\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tprotected getPreferredTitle(): string | undefined {\n\t\tif (this.preferredName && this.preferredDescription) {\n\t\t\treturn `${this.preferredName} ${this.preferredDescription}`;\n\t\t}\n\n\t\tif (this.preferredName || this.preferredDescription) {\n\t\t\treturn this.preferredName ?? this.preferredDescription;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tgetEncoding(): string | undefined {\n\t\tif (this.model) {\n\t\t\treturn this.model.getEncoding();\n\t\t}\n\n\t\treturn this.preferredEncoding;\n\t}\n\n\tgetPreferredEncoding(): string | undefined {\n\t\treturn this.preferredEncoding;\n\t}\n\n\tasync setEncoding(encoding: string, mode: EncodingMode): Promise<void> {\n\t\tthis.setPreferredEncoding(encoding);\n\n\t\treturn this.model?.setEncoding(encoding, mode);\n\t}\n\n\tsetPreferredEncoding(encoding: string): void {\n\t\tthis.preferredEncoding = encoding;\n\n\t\t// encoding is a good hint to open the file as text\n\t\tthis.setForceOpenAsText();\n\t}\n\n\tgetLanguageId(): string | undefined {\n\t\tif (this.model) {\n\t\t\treturn this.model.getLanguageId();\n\t\t}\n\n\t\treturn this.preferredLanguageId;\n\t}\n\n\tgetPreferredLanguageId(): string | undefined {\n\t\treturn this.preferredLanguageId;\n\t}\n\n\tsetLanguageId(languageId: string, source?: string): void {\n\t\tthis.setPreferredLanguageId(languageId);\n\n\t\tthis.model?.setLanguageId(languageId, source);\n\t}\n\n\tsetPreferredLanguageId(languageId: string): void {\n\t\tthis.preferredLanguageId = languageId;\n\n\t\t// languages are a good hint to open the file as text\n\t\tthis.setForceOpenAsText();\n\t}\n\n\tsetPreferredContents(contents: string): void {\n\t\tthis.preferredContents = contents;\n\n\t\t// contents is a good hint to open the file as text\n\t\tthis.setForceOpenAsText();\n\t}\n\n\tsetForceOpenAsText(): void {\n\t\tthis.forceOpenAs = ForceOpenAs.Text;\n\t}\n\n\tsetForceOpenAsBinary(): void {\n\t\tthis.forceOpenAs = ForceOpenAs.Binary;\n\t}\n\n\toverride isDirty(): boolean {\n\t\treturn !!(this.model?.isDirty());\n\t}\n\n\toverride isSaving(): boolean {\n\t\tif (this.model?.hasState(TextFileEditorModelState.SAVED) || this.model?.hasState(TextFileEditorModelState.CONFLICT) || this.model?.hasState(TextFileEditorModelState.ERROR)) {\n\t\t\treturn false; // require the model to be dirty and not in conflict or error state\n\t\t}\n\n\t\t// Note: currently not checking for ModelState.PENDING_SAVE for a reason\n\t\t// because we currently miss an event for this state change on editors\n\t\t// and it could result in bad UX where an editor can be closed even though\n\t\t// it shows up as dirty and has not finished saving yet.\n\n\t\tif (this.filesConfigurationService.hasShortAutoSaveDelay(this)) {\n\t\t\treturn true; // a short auto save is configured, treat this as being saved\n\t\t}\n\n\t\treturn super.isSaving();\n\t}\n\n\toverride prefersEditorPane<T extends IEditorDescriptor<IEditorPane>>(editorPanes: T[]): T | undefined {\n\t\tif (this.forceOpenAs === ForceOpenAs.Binary) {\n\t\t\treturn editorPanes.find(editorPane => editorPane.typeId === BINARY_FILE_EDITOR_ID);\n\t\t}\n\n\t\treturn editorPanes.find(editorPane => editorPane.typeId === TEXT_FILE_EDITOR_ID);\n\t}\n\n\toverride resolve(options?: IFileEditorInputOptions): Promise<ITextFileEditorModel | BinaryEditorModel> {\n\n\t\t// Resolve as binary\n\t\tif (this.forceOpenAs === ForceOpenAs.Binary) {\n\t\t\treturn this.doResolveAsBinary();\n\t\t}\n\n\t\t// Resolve as text\n\t\treturn this.doResolveAsText(options);\n\t}\n\n\tprivate async doResolveAsText(options?: IFileEditorInputOptions): Promise<ITextFileEditorModel | BinaryEditorModel> {\n\t\ttry {\n\n\t\t\t// Unset preferred contents after having applied it once\n\t\t\t// to prevent this property to stick. We still want future\n\t\t\t// `resolve` calls to fetch the contents from disk.\n\t\t\tconst preferredContents = this.preferredContents;\n\t\t\tthis.preferredContents = undefined;\n\n\t\t\t// Resolve resource via text file service and only allow\n\t\t\t// to open binary files if we are instructed so\n\t\t\tawait this.textFileService.files.resolve(this.resource, {\n\t\t\t\tlanguageId: this.preferredLanguageId,\n\t\t\t\tencoding: this.preferredEncoding,\n\t\t\t\tcontents: typeof preferredContents === 'string' ? createTextBufferFactory(preferredContents) : undefined,\n\t\t\t\treload: { async: true }, // trigger a reload of the model if it exists already but do not wait to show the model\n\t\t\t\tallowBinary: this.forceOpenAs === ForceOpenAs.Text,\n\t\t\t\treason: TextFileResolveReason.EDITOR,\n\t\t\t\tlimits: this.ensureLimits(options)\n\t\t\t});\n\n\t\t\t// This is a bit ugly, because we first resolve the model and then resolve a model reference. the reason being that binary\n\t\t\t// or very large files do not resolve to a text file model but should be opened as binary files without text. First calling into\n\t\t\t// resolve() ensures we are not creating model references for these kind of resources.\n\t\t\t// In addition we have a bit of payload to take into account (encoding, reload) that the text resolver does not handle yet.\n\t\t\tif (!this.cachedTextFileModelReference) {\n\t\t\t\tthis.cachedTextFileModelReference = await this.textModelService.createModelReference(this.resource) as IReference<ITextFileEditorModel>;\n\t\t\t}\n\n\t\t\tconst model = this.cachedTextFileModelReference.object;\n\n\t\t\t// It is possible that this input was disposed before the model\n\t\t\t// finished resolving. As such, we need to make sure to dispose\n\t\t\t// the model reference to not leak it.\n\t\t\tif (this.isDisposed()) {\n\t\t\t\tthis.disposeModelReference();\n\t\t\t}\n\n\t\t\treturn model;\n\t\t} catch (error) {\n\n\t\t\t// Handle binary files with binary model\n\t\t\tif ((<TextFileOperationError>error).textFileOperationResult === TextFileOperationResult.FILE_IS_BINARY) {\n\t\t\t\treturn this.doResolveAsBinary();\n\t\t\t}\n\n\t\t\t// Bubble any other error up\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate async doResolveAsBinary(): Promise<BinaryEditorModel> {\n\t\tconst model = this.instantiationService.createInstance(BinaryEditorModel, this.preferredResource, this.getName());\n\t\tawait model.resolve();\n\n\t\treturn model;\n\t}\n\n\tisResolved(): boolean {\n\t\treturn !!this.model;\n\t}\n\n\toverride async rename(group: GroupIdentifier, target: URI): Promise<IMoveResult> {\n\t\treturn {\n\t\t\teditor: {\n\t\t\t\tresource: target,\n\t\t\t\tencoding: this.getEncoding(),\n\t\t\t\toptions: {\n\t\t\t\t\tviewState: findViewStateForEditor(this, group, this.editorService)\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\toverride toUntyped(options?: IUntypedEditorOptions): ITextResourceEditorInput {\n\t\tconst untypedInput: IUntypedFileEditorInput = {\n\t\t\tresource: this.preferredResource,\n\t\t\tforceFile: true,\n\t\t\toptions: {\n\t\t\t\toverride: this.editorId\n\t\t\t}\n\t\t};\n\n\t\tif (typeof options?.preserveViewState === 'number') {\n\t\t\tuntypedInput.encoding = this.getEncoding();\n\t\t\tuntypedInput.languageId = this.getLanguageId();\n\t\t\tuntypedInput.contents = (() => {\n\t\t\t\tconst model = this.textFileService.files.get(this.resource);\n\t\t\t\tif (model?.isDirty() && !model.textEditorModel.isTooLargeForHeapOperation()) {\n\t\t\t\t\treturn model.textEditorModel.getValue(); // only if dirty and not too large\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t})();\n\n\t\t\tuntypedInput.options = {\n\t\t\t\t...untypedInput.options,\n\t\t\t\tviewState: findViewStateForEditor(this, options.preserveViewState, this.editorService)\n\t\t\t};\n\t\t}\n\n\t\treturn untypedInput;\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (this === otherInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherInput instanceof FileEditorInput) {\n\t\t\treturn isEqual(otherInput.resource, this.resource);\n\t\t}\n\n\t\tif (isResourceEditorInput(otherInput)) {\n\t\t\treturn super.matches(otherInput);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose(): void {\n\n\t\t// Model\n\t\tthis.model = undefined;\n\n\t\t// Model reference\n\t\tthis.disposeModelReference();\n\n\t\tsuper.dispose();\n\t}\n\n\tprivate disposeModelReference(): void {\n\t\tdispose(this.cachedTextFileModelReference);\n\t\tthis.cachedTextFileModelReference = undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IFileEditorInput, Verbosity, GroupIdentifier, IMoveResult, EditorInputCapabilities, IEditorDescriptor, IEditorPane, IUntypedEditorInput, DEFAULT_EDITOR_ASSOCIATION, IUntypedFileEditorInput, findViewStateForEditor, isResourceEditorInput, IFileEditorInputOptions } from '../../../../common/editor.js';\nimport { EditorInput, IUntypedEditorOptions } from '../../../../common/editor/editorInput.js';\nimport { AbstractTextResourceEditorInput } from '../../../../common/editor/textResourceEditorInput.js';\nimport { ITextResourceEditorInput } from '../../../../../platform/editor/common/editor.js';\nimport { BinaryEditorModel } from '../../../../common/editor/binaryEditorModel.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { ITextFileService, TextFileEditorModelState, TextFileResolveReason, TextFileOperationError, TextFileOperationResult, ITextFileEditorModel, EncodingMode } from '../../../../services/textfile/common/textfiles.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IReference, dispose, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { FILE_EDITOR_INPUT_ID, TEXT_FILE_EDITOR_ID, BINARY_FILE_EDITOR_ID } from '../../common/files.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { createTextBufferFactory } from '../../../../../editor/common/model/textModel.js';\nimport { IPathService } from '../../../../services/path/common/pathService.js';\nimport { ITextResourceConfigurationService } from '../../../../../editor/common/services/textResourceConfiguration.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { ICustomEditorLabelService } from '../../../../services/editor/common/customEditorLabelService.js';\n\nconst enum ForceOpenAs {\n\tNone,\n\tText,\n\tBinary\n}\n\n/**\n * A file editor input is the input type for the file editor of file system resources.\n */\nexport class FileEditorInput extends AbstractTextResourceEditorInput implements IFileEditorInput {\n\n\toverride get typeId(): string {\n\t\treturn FILE_EDITOR_INPUT_ID;\n\t}\n\n\toverride get editorId(): string | undefined {\n\t\treturn DEFAULT_EDITOR_ASSOCIATION.id;\n\t}\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = EditorInputCapabilities.CanSplitInGroup;\n\n\t\tif (this.model) {\n\t\t\tif (this.model.isReadonly()) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.fileService.hasProvider(this.resource)) {\n\t\t\t\tif (this.filesConfigurationService.isReadonly(this.resource)) {\n\t\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Untitled;\n\t\t\t}\n\t\t}\n\n\t\tif (!(capabilities & EditorInputCapabilities.Readonly)) {\n\t\t\tcapabilities |= EditorInputCapabilities.CanDropIntoEditor;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\tprivate preferredName: string | undefined;\n\tprivate preferredDescription: string | undefined;\n\tprivate preferredEncoding: string | undefined;\n\tprivate preferredLanguageId: string | undefined;\n\tprivate preferredContents: string | undefined;\n\n\tprivate forceOpenAs: ForceOpenAs = ForceOpenAs.None;\n\n\tprivate model: ITextFileEditorModel | undefined = undefined;\n\tprivate cachedTextFileModelReference: IReference<ITextFileEditorModel> | undefined = undefined;\n\n\tprivate readonly modelListeners = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tresource: URI,\n\t\tpreferredResource: URI | undefined,\n\t\tpreferredName: string | undefined,\n\t\tpreferredDescription: string | undefined,\n\t\tpreferredEncoding: string | undefined,\n\t\tpreferredLanguageId: string | undefined,\n\t\tpreferredContents: string | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IFilesConfigurationService filesConfigurationService: IFilesConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IPathService private readonly pathService: IPathService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@ICustomEditorLabelService customEditorLabelService: ICustomEditorLabelService\n\t) {\n\t\tsuper(resource, preferredResource, editorService, textFileService, labelService, fileService, filesConfigurationService, textResourceConfigurationService, customEditorLabelService);\n\n\t\tthis.model = this.textFileService.files.get(resource);\n\n\t\tif (preferredName) {\n\t\t\tthis.setPreferredName(preferredName);\n\t\t}\n\n\t\tif (preferredDescription) {\n\t\t\tthis.setPreferredDescription(preferredDescription);\n\t\t}\n\n\t\tif (preferredEncoding) {\n\t\t\tthis.setPreferredEncoding(preferredEncoding);\n\t\t}\n\n\t\tif (preferredLanguageId) {\n\t\t\tthis.setPreferredLanguageId(preferredLanguageId);\n\t\t}\n\n\t\tif (typeof preferredContents === 'string') {\n\t\t\tthis.setPreferredContents(preferredContents);\n\t\t}\n\n\t\t// Attach to model that matches our resource once created\n\t\tthis._register(this.textFileService.files.onDidCreate(model => this.onDidCreateTextFileModel(model)));\n\n\t\t// If a file model already exists, make sure to wire it in\n\t\tif (this.model) {\n\t\t\tthis.registerModelListeners(this.model);\n\t\t}\n\t}\n\n\tprivate onDidCreateTextFileModel(model: ITextFileEditorModel): void {\n\n\t\t// Once the text file model is created, we keep it inside\n\t\t// the input to be able to implement some methods properly\n\t\tif (isEqual(model.resource, this.resource)) {\n\t\t\tthis.model = model;\n\n\t\t\tthis.registerModelListeners(model);\n\t\t}\n\t}\n\n\tprivate registerModelListeners(model: ITextFileEditorModel): void {\n\n\t\t// Clear any old\n\t\tthis.modelListeners.clear();\n\n\t\t// re-emit some events from the model\n\t\tthis.modelListeners.add(model.onDidChangeDirty(() => this._onDidChangeDirty.fire()));\n\t\tthis.modelListeners.add(model.onDidChangeReadonly(() => this._onDidChangeCapabilities.fire()));\n\n\t\t// important: treat save errors as potential dirty change because\n\t\t// a file that is in save conflict or error will report dirty even\n\t\t// if auto save is turned on.\n\t\tthis.modelListeners.add(model.onDidSaveError(() => this._onDidChangeDirty.fire()));\n\n\t\t// remove model association once it gets disposed\n\t\tthis.modelListeners.add(Event.once(model.onWillDispose)(() => {\n\t\t\tthis.modelListeners.clear();\n\t\t\tthis.model = undefined;\n\t\t}));\n\t}\n\n\toverride getName(): string {\n\t\treturn this.preferredName || super.getName();\n\t}\n\n\tsetPreferredName(name: string): void {\n\t\tif (!this.allowLabelOverride()) {\n\t\t\treturn; // block for specific schemes we consider to be owning\n\t\t}\n\n\t\tif (this.preferredName !== name) {\n\t\t\tthis.preferredName = name;\n\n\t\t\tthis._onDidChangeLabel.fire();\n\t\t}\n\t}\n\n\tprivate allowLabelOverride(): boolean {\n\t\treturn this.resource.scheme !== this.pathService.defaultUriScheme &&\n\t\t\tthis.resource.scheme !== Schemas.vscodeUserData &&\n\t\t\tthis.resource.scheme !== Schemas.file &&\n\t\t\tthis.resource.scheme !== Schemas.vscodeRemote;\n\t}\n\n\tgetPreferredName(): string | undefined {\n\t\treturn this.preferredName;\n\t}\n\n\toverride isReadonly(): boolean | IMarkdownString {\n\t\treturn this.model ? this.model.isReadonly() : this.filesConfigurationService.isReadonly(this.resource);\n\t}\n\n\toverride getDescription(verbosity?: Verbosity): string | undefined {\n\t\treturn this.preferredDescription || super.getDescription(verbosity);\n\t}\n\n\tsetPreferredDescription(description: string): void {\n\t\tif (!this.allowLabelOverride()) {\n\t\t\treturn; // block for specific schemes we consider to be owning\n\t\t}\n\n\t\tif (this.preferredDescription !== description) {\n\t\t\tthis.preferredDescription = description;\n\n\t\t\tthis._onDidChangeLabel.fire();\n\t\t}\n\t}\n\n\tgetPreferredDescription(): string | undefined {\n\t\treturn this.preferredDescription;\n\t}\n\n\toverride getTitle(verbosity?: Verbosity): string {\n\t\tlet title = super.getTitle(verbosity);\n\n\t\tconst preferredTitle = this.getPreferredTitle();\n\t\tif (preferredTitle) {\n\t\t\ttitle = `${preferredTitle} (${title})`;\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tprotected getPreferredTitle(): string | undefined {\n\t\tif (this.preferredName && this.preferredDescription) {\n\t\t\treturn `${this.preferredName} ${this.preferredDescription}`;\n\t\t}\n\n\t\tif (this.preferredName || this.preferredDescription) {\n\t\t\treturn this.preferredName ?? this.preferredDescription;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tgetEncoding(): string | undefined {\n\t\tif (this.model) {\n\t\t\treturn this.model.getEncoding();\n\t\t}\n\n\t\treturn this.preferredEncoding;\n\t}\n\n\tgetPreferredEncoding(): string | undefined {\n\t\treturn this.preferredEncoding;\n\t}\n\n\tasync setEncoding(encoding: string, mode: EncodingMode): Promise<void> {\n\t\tthis.setPreferredEncoding(encoding);\n\n\t\treturn this.model?.setEncoding(encoding, mode);\n\t}\n\n\tsetPreferredEncoding(encoding: string): void {\n\t\tthis.preferredEncoding = encoding;\n\n\t\t// encoding is a good hint to open the file as text\n\t\tthis.setForceOpenAsText();\n\t}\n\n\tgetLanguageId(): string | undefined {\n\t\tif (this.model) {\n\t\t\treturn this.model.getLanguageId();\n\t\t}\n\n\t\treturn this.preferredLanguageId;\n\t}\n\n\tgetPreferredLanguageId(): string | undefined {\n\t\treturn this.preferredLanguageId;\n\t}\n\n\tsetLanguageId(languageId: string, source?: string): void {\n\t\tthis.setPreferredLanguageId(languageId);\n\n\t\tthis.model?.setLanguageId(languageId, source);\n\t}\n\n\tsetPreferredLanguageId(languageId: string): void {\n\t\tthis.preferredLanguageId = languageId;\n\n\t\t// languages are a good hint to open the file as text\n\t\tthis.setForceOpenAsText();\n\t}\n\n\tsetPreferredContents(contents: string): void {\n\t\tthis.preferredContents = contents;\n\n\t\t// contents is a good hint to open the file as text\n\t\tthis.setForceOpenAsText();\n\t}\n\n\tsetForceOpenAsText(): void {\n\t\tthis.forceOpenAs = ForceOpenAs.Text;\n\t}\n\n\tsetForceOpenAsBinary(): void {\n\t\tthis.forceOpenAs = ForceOpenAs.Binary;\n\t}\n\n\toverride isDirty(): boolean {\n\t\treturn !!(this.model?.isDirty());\n\t}\n\n\toverride isSaving(): boolean {\n\t\tif (this.model?.hasState(TextFileEditorModelState.SAVED) || this.model?.hasState(TextFileEditorModelState.CONFLICT) || this.model?.hasState(TextFileEditorModelState.ERROR)) {\n\t\t\treturn false; // require the model to be dirty and not in conflict or error state\n\t\t}\n\n\t\t// Note: currently not checking for ModelState.PENDING_SAVE for a reason\n\t\t// because we currently miss an event for this state change on editors\n\t\t// and it could result in bad UX where an editor can be closed even though\n\t\t// it shows up as dirty and has not finished saving yet.\n\n\t\tif (this.filesConfigurationService.hasShortAutoSaveDelay(this)) {\n\t\t\treturn true; // a short auto save is configured, treat this as being saved\n\t\t}\n\n\t\treturn super.isSaving();\n\t}\n\n\toverride prefersEditorPane<T extends IEditorDescriptor<IEditorPane>>(editorPanes: T[]): T | undefined {\n\t\tif (this.forceOpenAs === ForceOpenAs.Binary) {\n\t\t\treturn editorPanes.find(editorPane => editorPane.typeId === BINARY_FILE_EDITOR_ID);\n\t\t}\n\n\t\treturn editorPanes.find(editorPane => editorPane.typeId === TEXT_FILE_EDITOR_ID);\n\t}\n\n\toverride resolve(options?: IFileEditorInputOptions): Promise<ITextFileEditorModel | BinaryEditorModel> {\n\n\t\t// Resolve as binary\n\t\tif (this.forceOpenAs === ForceOpenAs.Binary) {\n\t\t\treturn this.doResolveAsBinary();\n\t\t}\n\n\t\t// Resolve as text\n\t\treturn this.doResolveAsText(options);\n\t}\n\n\tprivate async doResolveAsText(options?: IFileEditorInputOptions): Promise<ITextFileEditorModel | BinaryEditorModel> {\n\t\ttry {\n\n\t\t\t// Unset preferred contents after having applied it once\n\t\t\t// to prevent this property to stick. We still want future\n\t\t\t// `resolve` calls to fetch the contents from disk.\n\t\t\tconst preferredContents = this.preferredContents;\n\t\t\tthis.preferredContents = undefined;\n\n\t\t\t// Resolve resource via text file service and only allow\n\t\t\t// to open binary files if we are instructed so\n\t\t\tawait this.textFileService.files.resolve(this.resource, {\n\t\t\t\tlanguageId: this.preferredLanguageId,\n\t\t\t\tencoding: this.preferredEncoding,\n\t\t\t\tcontents: typeof preferredContents === 'string' ? createTextBufferFactory(preferredContents) : undefined,\n\t\t\t\treload: { async: true }, // trigger a reload of the model if it exists already but do not wait to show the model\n\t\t\t\tallowBinary: this.forceOpenAs === ForceOpenAs.Text,\n\t\t\t\treason: TextFileResolveReason.EDITOR,\n\t\t\t\tlimits: this.ensureLimits(options)\n\t\t\t});\n\n\t\t\t// This is a bit ugly, because we first resolve the model and then resolve a model reference. the reason being that binary\n\t\t\t// or very large files do not resolve to a text file model but should be opened as binary files without text. First calling into\n\t\t\t// resolve() ensures we are not creating model references for these kind of resources.\n\t\t\t// In addition we have a bit of payload to take into account (encoding, reload) that the text resolver does not handle yet.\n\t\t\tif (!this.cachedTextFileModelReference) {\n\t\t\t\tthis.cachedTextFileModelReference = await this.textModelService.createModelReference(this.resource) as IReference<ITextFileEditorModel>;\n\t\t\t}\n\n\t\t\tconst model = this.cachedTextFileModelReference.object;\n\n\t\t\t// It is possible that this input was disposed before the model\n\t\t\t// finished resolving. As such, we need to make sure to dispose\n\t\t\t// the model reference to not leak it.\n\t\t\tif (this.isDisposed()) {\n\t\t\t\tthis.disposeModelReference();\n\t\t\t}\n\n\t\t\treturn model;\n\t\t} catch (error) {\n\n\t\t\t// Handle binary files with binary model\n\t\t\tif ((<TextFileOperationError>error).textFileOperationResult === TextFileOperationResult.FILE_IS_BINARY) {\n\t\t\t\treturn this.doResolveAsBinary();\n\t\t\t}\n\n\t\t\t// Bubble any other error up\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate async doResolveAsBinary(): Promise<BinaryEditorModel> {\n\t\tconst model = this.instantiationService.createInstance(BinaryEditorModel, this.preferredResource, this.getName());\n\t\tawait model.resolve();\n\n\t\treturn model;\n\t}\n\n\tisResolved(): boolean {\n\t\treturn !!this.model;\n\t}\n\n\toverride async rename(group: GroupIdentifier, target: URI): Promise<IMoveResult> {\n\t\treturn {\n\t\t\teditor: {\n\t\t\t\tresource: target,\n\t\t\t\tencoding: this.getEncoding(),\n\t\t\t\toptions: {\n\t\t\t\t\tviewState: findViewStateForEditor(this, group, this.editorService)\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\toverride toUntyped(options?: IUntypedEditorOptions): ITextResourceEditorInput {\n\t\tconst untypedInput: IUntypedFileEditorInput = {\n\t\t\tresource: this.preferredResource,\n\t\t\tforceFile: true,\n\t\t\toptions: {\n\t\t\t\toverride: this.editorId\n\t\t\t}\n\t\t};\n\n\t\tif (typeof options?.preserveViewState === 'number') {\n\t\t\tuntypedInput.encoding = this.getEncoding();\n\t\t\tuntypedInput.languageId = this.getLanguageId();\n\t\t\tuntypedInput.contents = (() => {\n\t\t\t\tconst model = this.textFileService.files.get(this.resource);\n\t\t\t\tif (model?.isDirty() && !model.textEditorModel.isTooLargeForHeapOperation()) {\n\t\t\t\t\treturn model.textEditorModel.getValue(); // only if dirty and not too large\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t})();\n\n\t\t\tuntypedInput.options = {\n\t\t\t\t...untypedInput.options,\n\t\t\t\tviewState: findViewStateForEditor(this, options.preserveViewState, this.editorService)\n\t\t\t};\n\t\t}\n\n\t\treturn untypedInput;\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (this === otherInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherInput instanceof FileEditorInput) {\n\t\t\treturn isEqual(otherInput.resource, this.resource);\n\t\t}\n\n\t\tif (isResourceEditorInput(otherInput)) {\n\t\t\treturn super.matches(otherInput);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose(): void {\n\n\t\t// Model\n\t\tthis.model = undefined;\n\n\t\t// Model reference\n\t\tthis.disposeModelReference();\n\n\t\tsuper.dispose();\n\t}\n\n\tprivate disposeModelReference(): void {\n\t\tdispose(this.cachedTextFileModelReference);\n\t\tthis.cachedTextFileModelReference = undefined;\n\t}\n}\n"]}