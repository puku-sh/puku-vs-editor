{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/files/browser/editors/textFileEditorTracker.ts","vs/workbench/contrib/files/browser/editors/textFileEditorTracker.ts"],"names":[],"mappings":"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","file":"textFileEditorTracker.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ITextFileService, TextFileEditorModelState } from '../../../../services/textfile/common/textfiles.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { distinct, coalesce } from '../../../../../base/common/arrays.js';\nimport { IHostService } from '../../../../services/host/browser/host.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { RunOnceWorker } from '../../../../../base/common/async.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { FILE_EDITOR_INPUT_ID } from '../../common/files.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { UntitledTextEditorInput } from '../../../../services/untitled/common/untitledTextEditorInput.js';\nimport { IWorkingCopyEditorService } from '../../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { DEFAULT_EDITOR_ASSOCIATION } from '../../../../common/editor.js';\n\nexport class TextFileEditorTracker extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.textFileEditorTracker';\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t\t@IFilesConfigurationService private readonly filesConfigurationService: IFilesConfigurationService,\n\t\t@IWorkingCopyEditorService private readonly workingCopyEditorService: IWorkingCopyEditorService\n\t) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Ensure dirty text file and untitled models are always opened as editors\n\t\tthis._register(this.textFileService.files.onDidChangeDirty(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n\t\tthis._register(this.textFileService.files.onDidSaveError(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n\t\tthis._register(this.textFileService.untitled.onDidChangeDirty(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n\n\t\t// Update visible text file editors when focus is gained\n\t\tthis._register(this.hostService.onDidChangeFocus(hasFocus => hasFocus ? this.reloadVisibleTextFileEditors() : undefined));\n\n\t\t// Lifecycle\n\t\tthis._register(this.lifecycleService.onDidShutdown(() => this.dispose()));\n\t}\n\n\t//#region Text File: Ensure every dirty text and untitled file is opened in an editor\n\n\tprivate readonly ensureDirtyFilesAreOpenedWorker = this._register(new RunOnceWorker<URI>(units => this.ensureDirtyTextFilesAreOpened(units), this.getDirtyTextFileTrackerDelay()));\n\n\tprotected getDirtyTextFileTrackerDelay(): number {\n\t\treturn 800; // encapsulated in a method for tests to override\n\t}\n\n\tprivate ensureDirtyTextFilesAreOpened(resources: URI[]): void {\n\t\tthis.doEnsureDirtyTextFilesAreOpened(distinct(resources.filter(resource => {\n\t\t\tif (!this.textFileService.isDirty(resource)) {\n\t\t\t\treturn false; // resource must be dirty\n\t\t\t}\n\n\t\t\tconst fileModel = this.textFileService.files.get(resource);\n\t\t\tif (fileModel?.hasState(TextFileEditorModelState.PENDING_SAVE)) {\n\t\t\t\treturn false; // resource must not be pending to save\n\t\t\t}\n\n\t\t\tif (resource.scheme !== Schemas.untitled && !fileModel?.hasState(TextFileEditorModelState.ERROR) && this.filesConfigurationService.hasShortAutoSaveDelay(resource)) {\n\t\t\t\t// leave models auto saved after short delay unless\n\t\t\t\t// the save resulted in an error and not for untitled\n\t\t\t\t// that are not auto-saved anyway\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.editorService.isOpened({ resource, typeId: resource.scheme === Schemas.untitled ? UntitledTextEditorInput.ID : FILE_EDITOR_INPUT_ID, editorId: DEFAULT_EDITOR_ASSOCIATION.id })) {\n\t\t\t\treturn false; // model must not be opened already as file (fast check via editor type)\n\t\t\t}\n\n\t\t\tconst model = fileModel ?? this.textFileService.untitled.get(resource);\n\t\t\tif (model && this.workingCopyEditorService.findEditor(model)) {\n\t\t\t\treturn false; // model must not be opened already as file (slower check via working copy)\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}), resource => resource.toString()));\n\t}\n\n\tprivate doEnsureDirtyTextFilesAreOpened(resources: URI[]): void {\n\t\tif (!resources.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editorService.openEditors(resources.map(resource => ({\n\t\t\tresource,\n\t\t\toptions: { inactive: true, pinned: true, preserveFocus: true }\n\t\t})));\n\t}\n\n\t//#endregion\n\n\t//#region Window Focus Change: Update visible code editors when focus is gained that have a known text file model\n\n\tprivate reloadVisibleTextFileEditors(): void {\n\t\t// the window got focus and we use this as a hint that files might have been changed outside\n\t\t// of this window. since file events can be unreliable, we queue a load for models that\n\t\t// are visible in any editor. since this is a fast operation in the case nothing has changed,\n\t\t// we tolerate the additional work.\n\t\tdistinct(\n\t\t\tcoalesce(this.codeEditorService.listCodeEditors()\n\t\t\t\t.map(codeEditor => {\n\t\t\t\t\tconst resource = codeEditor.getModel()?.uri;\n\t\t\t\t\tif (!resource) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst model = this.textFileService.files.get(resource);\n\t\t\t\t\tif (!model || model.isDirty() || !model.isResolved()) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn model;\n\t\t\t\t})),\n\t\t\tmodel => model.resource.toString()\n\t\t).forEach(model => this.textFileService.files.resolve(model.resource, { reload: { async: true } }));\n\t}\n\n\t//#endregion\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ITextFileService, TextFileEditorModelState } from '../../../../services/textfile/common/textfiles.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { distinct, coalesce } from '../../../../../base/common/arrays.js';\nimport { IHostService } from '../../../../services/host/browser/host.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { RunOnceWorker } from '../../../../../base/common/async.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { FILE_EDITOR_INPUT_ID } from '../../common/files.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { UntitledTextEditorInput } from '../../../../services/untitled/common/untitledTextEditorInput.js';\nimport { IWorkingCopyEditorService } from '../../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { DEFAULT_EDITOR_ASSOCIATION } from '../../../../common/editor.js';\n\nexport class TextFileEditorTracker extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.textFileEditorTracker';\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t\t@IFilesConfigurationService private readonly filesConfigurationService: IFilesConfigurationService,\n\t\t@IWorkingCopyEditorService private readonly workingCopyEditorService: IWorkingCopyEditorService\n\t) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Ensure dirty text file and untitled models are always opened as editors\n\t\tthis._register(this.textFileService.files.onDidChangeDirty(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n\t\tthis._register(this.textFileService.files.onDidSaveError(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n\t\tthis._register(this.textFileService.untitled.onDidChangeDirty(model => this.ensureDirtyFilesAreOpenedWorker.work(model.resource)));\n\n\t\t// Update visible text file editors when focus is gained\n\t\tthis._register(this.hostService.onDidChangeFocus(hasFocus => hasFocus ? this.reloadVisibleTextFileEditors() : undefined));\n\n\t\t// Lifecycle\n\t\tthis._register(this.lifecycleService.onDidShutdown(() => this.dispose()));\n\t}\n\n\t//#region Text File: Ensure every dirty text and untitled file is opened in an editor\n\n\tprivate readonly ensureDirtyFilesAreOpenedWorker = this._register(new RunOnceWorker<URI>(units => this.ensureDirtyTextFilesAreOpened(units), this.getDirtyTextFileTrackerDelay()));\n\n\tprotected getDirtyTextFileTrackerDelay(): number {\n\t\treturn 800; // encapsulated in a method for tests to override\n\t}\n\n\tprivate ensureDirtyTextFilesAreOpened(resources: URI[]): void {\n\t\tthis.doEnsureDirtyTextFilesAreOpened(distinct(resources.filter(resource => {\n\t\t\tif (!this.textFileService.isDirty(resource)) {\n\t\t\t\treturn false; // resource must be dirty\n\t\t\t}\n\n\t\t\tconst fileModel = this.textFileService.files.get(resource);\n\t\t\tif (fileModel?.hasState(TextFileEditorModelState.PENDING_SAVE)) {\n\t\t\t\treturn false; // resource must not be pending to save\n\t\t\t}\n\n\t\t\tif (resource.scheme !== Schemas.untitled && !fileModel?.hasState(TextFileEditorModelState.ERROR) && this.filesConfigurationService.hasShortAutoSaveDelay(resource)) {\n\t\t\t\t// leave models auto saved after short delay unless\n\t\t\t\t// the save resulted in an error and not for untitled\n\t\t\t\t// that are not auto-saved anyway\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.editorService.isOpened({ resource, typeId: resource.scheme === Schemas.untitled ? UntitledTextEditorInput.ID : FILE_EDITOR_INPUT_ID, editorId: DEFAULT_EDITOR_ASSOCIATION.id })) {\n\t\t\t\treturn false; // model must not be opened already as file (fast check via editor type)\n\t\t\t}\n\n\t\t\tconst model = fileModel ?? this.textFileService.untitled.get(resource);\n\t\t\tif (model && this.workingCopyEditorService.findEditor(model)) {\n\t\t\t\treturn false; // model must not be opened already as file (slower check via working copy)\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}), resource => resource.toString()));\n\t}\n\n\tprivate doEnsureDirtyTextFilesAreOpened(resources: URI[]): void {\n\t\tif (!resources.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editorService.openEditors(resources.map(resource => ({\n\t\t\tresource,\n\t\t\toptions: { inactive: true, pinned: true, preserveFocus: true }\n\t\t})));\n\t}\n\n\t//#endregion\n\n\t//#region Window Focus Change: Update visible code editors when focus is gained that have a known text file model\n\n\tprivate reloadVisibleTextFileEditors(): void {\n\t\t// the window got focus and we use this as a hint that files might have been changed outside\n\t\t// of this window. since file events can be unreliable, we queue a load for models that\n\t\t// are visible in any editor. since this is a fast operation in the case nothing has changed,\n\t\t// we tolerate the additional work.\n\t\tdistinct(\n\t\t\tcoalesce(this.codeEditorService.listCodeEditors()\n\t\t\t\t.map(codeEditor => {\n\t\t\t\t\tconst resource = codeEditor.getModel()?.uri;\n\t\t\t\t\tif (!resource) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst model = this.textFileService.files.get(resource);\n\t\t\t\t\tif (!model || model.isDirty() || !model.isResolved()) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn model;\n\t\t\t\t})),\n\t\t\tmodel => model.resource.toString()\n\t\t).forEach(model => this.textFileService.files.resolve(model.resource, { reload: { async: true } }));\n\t}\n\n\t//#endregion\n}\n"]}