{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/files/browser/editors/fileEditorHandler.ts","vs/workbench/contrib/files/browser/editors/fileEditorHandler.ts"],"names":[],"mappings":"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","file":"fileEditorHandler.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { URI, UriComponents } from '../../../../../base/common/uri.js';\nimport { IEditorSerializer } from '../../../../common/editor.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { ITextEditorService } from '../../../../services/textfile/common/textEditorService.js';\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { IWorkingCopyIdentifier, NO_TYPE_ID } from '../../../../services/workingCopy/common/workingCopy.js';\nimport { IWorkingCopyEditorHandler, IWorkingCopyEditorService } from '../../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { FileEditorInput } from './fileEditorInput.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\n\ninterface ISerializedFileEditorInput {\n\tresourceJSON: UriComponents;\n\tpreferredResourceJSON?: UriComponents;\n\tname?: string;\n\tdescription?: string;\n\tencoding?: string;\n\tmodeId?: string; // should be `languageId` but is kept for backwards compatibility\n}\n\nexport class FileEditorInputSerializer implements IEditorSerializer {\n\n\tcanSerialize(editorInput: EditorInput): boolean {\n\t\treturn true;\n\t}\n\n\tserialize(editorInput: EditorInput): string {\n\t\tconst fileEditorInput = editorInput as FileEditorInput;\n\t\tconst resource = fileEditorInput.resource;\n\t\tconst preferredResource = fileEditorInput.preferredResource;\n\t\tconst serializedFileEditorInput: ISerializedFileEditorInput = {\n\t\t\tresourceJSON: resource.toJSON(),\n\t\t\tpreferredResourceJSON: isEqual(resource, preferredResource) ? undefined : preferredResource, // only storing preferredResource if it differs from the resource\n\t\t\tname: fileEditorInput.getPreferredName(),\n\t\t\tdescription: fileEditorInput.getPreferredDescription(),\n\t\t\tencoding: fileEditorInput.getEncoding(),\n\t\t\tmodeId: fileEditorInput.getPreferredLanguageId() // only using the preferred user associated language here if available to not store redundant data\n\t\t};\n\n\t\treturn JSON.stringify(serializedFileEditorInput);\n\t}\n\n\tdeserialize(instantiationService: IInstantiationService, serializedEditorInput: string): FileEditorInput {\n\t\treturn instantiationService.invokeFunction(accessor => {\n\t\t\tconst serializedFileEditorInput: ISerializedFileEditorInput = JSON.parse(serializedEditorInput);\n\t\t\tconst resource = URI.revive(serializedFileEditorInput.resourceJSON);\n\t\t\tconst preferredResource = URI.revive(serializedFileEditorInput.preferredResourceJSON);\n\t\t\tconst name = serializedFileEditorInput.name;\n\t\t\tconst description = serializedFileEditorInput.description;\n\t\t\tconst encoding = serializedFileEditorInput.encoding;\n\t\t\tconst languageId = serializedFileEditorInput.modeId;\n\n\t\t\tconst fileEditorInput = accessor.get(ITextEditorService).createTextEditor({ resource, label: name, description, encoding, languageId, forceFile: true }) as FileEditorInput;\n\t\t\tif (preferredResource) {\n\t\t\t\tfileEditorInput.setPreferredResource(preferredResource);\n\t\t\t}\n\n\t\t\treturn fileEditorInput;\n\t\t});\n\t}\n}\n\nexport class FileEditorWorkingCopyEditorHandler extends Disposable implements IWorkbenchContribution, IWorkingCopyEditorHandler {\n\n\tstatic readonly ID = 'workbench.contrib.fileEditorWorkingCopyEditorHandler';\n\n\tconstructor(\n\t\t@IWorkingCopyEditorService workingCopyEditorService: IWorkingCopyEditorService,\n\t\t@ITextEditorService private readonly textEditorService: ITextEditorService,\n\t\t@IFileService private readonly fileService: IFileService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(workingCopyEditorService.registerHandler(this));\n\t}\n\n\thandles(workingCopy: IWorkingCopyIdentifier): boolean | Promise<boolean> {\n\t\treturn workingCopy.typeId === NO_TYPE_ID && this.fileService.canHandleResource(workingCopy.resource);\n\t}\n\n\tprivate handlesSync(workingCopy: IWorkingCopyIdentifier): boolean {\n\t\treturn workingCopy.typeId === NO_TYPE_ID && this.fileService.hasProvider(workingCopy.resource);\n\t}\n\n\tisOpen(workingCopy: IWorkingCopyIdentifier, editor: EditorInput): boolean {\n\t\tif (!this.handlesSync(workingCopy)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Naturally it would make sense here to check for `instanceof FileEditorInput`\n\t\t// but because some custom editors also leverage text file based working copies\n\t\t// we need to do a weaker check by only comparing for the resource\n\n\t\treturn isEqual(workingCopy.resource, editor.resource);\n\t}\n\n\tcreateEditor(workingCopy: IWorkingCopyIdentifier): EditorInput {\n\t\treturn this.textEditorService.createTextEditor({ resource: workingCopy.resource, forceFile: true });\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { URI, UriComponents } from '../../../../../base/common/uri.js';\nimport { IEditorSerializer } from '../../../../common/editor.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { ITextEditorService } from '../../../../services/textfile/common/textEditorService.js';\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { IWorkingCopyIdentifier, NO_TYPE_ID } from '../../../../services/workingCopy/common/workingCopy.js';\nimport { IWorkingCopyEditorHandler, IWorkingCopyEditorService } from '../../../../services/workingCopy/common/workingCopyEditorService.js';\nimport { FileEditorInput } from './fileEditorInput.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\n\ninterface ISerializedFileEditorInput {\n\tresourceJSON: UriComponents;\n\tpreferredResourceJSON?: UriComponents;\n\tname?: string;\n\tdescription?: string;\n\tencoding?: string;\n\tmodeId?: string; // should be `languageId` but is kept for backwards compatibility\n}\n\nexport class FileEditorInputSerializer implements IEditorSerializer {\n\n\tcanSerialize(editorInput: EditorInput): boolean {\n\t\treturn true;\n\t}\n\n\tserialize(editorInput: EditorInput): string {\n\t\tconst fileEditorInput = editorInput as FileEditorInput;\n\t\tconst resource = fileEditorInput.resource;\n\t\tconst preferredResource = fileEditorInput.preferredResource;\n\t\tconst serializedFileEditorInput: ISerializedFileEditorInput = {\n\t\t\tresourceJSON: resource.toJSON(),\n\t\t\tpreferredResourceJSON: isEqual(resource, preferredResource) ? undefined : preferredResource, // only storing preferredResource if it differs from the resource\n\t\t\tname: fileEditorInput.getPreferredName(),\n\t\t\tdescription: fileEditorInput.getPreferredDescription(),\n\t\t\tencoding: fileEditorInput.getEncoding(),\n\t\t\tmodeId: fileEditorInput.getPreferredLanguageId() // only using the preferred user associated language here if available to not store redundant data\n\t\t};\n\n\t\treturn JSON.stringify(serializedFileEditorInput);\n\t}\n\n\tdeserialize(instantiationService: IInstantiationService, serializedEditorInput: string): FileEditorInput {\n\t\treturn instantiationService.invokeFunction(accessor => {\n\t\t\tconst serializedFileEditorInput: ISerializedFileEditorInput = JSON.parse(serializedEditorInput);\n\t\t\tconst resource = URI.revive(serializedFileEditorInput.resourceJSON);\n\t\t\tconst preferredResource = URI.revive(serializedFileEditorInput.preferredResourceJSON);\n\t\t\tconst name = serializedFileEditorInput.name;\n\t\t\tconst description = serializedFileEditorInput.description;\n\t\t\tconst encoding = serializedFileEditorInput.encoding;\n\t\t\tconst languageId = serializedFileEditorInput.modeId;\n\n\t\t\tconst fileEditorInput = accessor.get(ITextEditorService).createTextEditor({ resource, label: name, description, encoding, languageId, forceFile: true }) as FileEditorInput;\n\t\t\tif (preferredResource) {\n\t\t\t\tfileEditorInput.setPreferredResource(preferredResource);\n\t\t\t}\n\n\t\t\treturn fileEditorInput;\n\t\t});\n\t}\n}\n\nexport class FileEditorWorkingCopyEditorHandler extends Disposable implements IWorkbenchContribution, IWorkingCopyEditorHandler {\n\n\tstatic readonly ID = 'workbench.contrib.fileEditorWorkingCopyEditorHandler';\n\n\tconstructor(\n\t\t@IWorkingCopyEditorService workingCopyEditorService: IWorkingCopyEditorService,\n\t\t@ITextEditorService private readonly textEditorService: ITextEditorService,\n\t\t@IFileService private readonly fileService: IFileService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(workingCopyEditorService.registerHandler(this));\n\t}\n\n\thandles(workingCopy: IWorkingCopyIdentifier): boolean | Promise<boolean> {\n\t\treturn workingCopy.typeId === NO_TYPE_ID && this.fileService.canHandleResource(workingCopy.resource);\n\t}\n\n\tprivate handlesSync(workingCopy: IWorkingCopyIdentifier): boolean {\n\t\treturn workingCopy.typeId === NO_TYPE_ID && this.fileService.hasProvider(workingCopy.resource);\n\t}\n\n\tisOpen(workingCopy: IWorkingCopyIdentifier, editor: EditorInput): boolean {\n\t\tif (!this.handlesSync(workingCopy)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Naturally it would make sense here to check for `instanceof FileEditorInput`\n\t\t// but because some custom editors also leverage text file based working copies\n\t\t// we need to do a weaker check by only comparing for the resource\n\n\t\treturn isEqual(workingCopy.resource, editor.resource);\n\t}\n\n\tcreateEditor(workingCopy: IWorkingCopyIdentifier): EditorInput {\n\t\treturn this.textEditorService.createTextEditor({ resource: workingCopy.resource, forceFile: true });\n\t}\n}\n"]}