{"version":3,"sources":["vs/workbench/contrib/files/browser/editors/binaryFileEditor.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAEhG,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,wBAAwB,EAAE,MAAM,kDAAkD,CAAC;AAC5F,OAAO,EAAE,iBAAiB,EAAE,MAAM,uDAAuD,CAAC;AAC1F,OAAO,EAAE,aAAa,EAAE,MAAM,sDAAsD,CAAC;AAErF,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AACvD,OAAO,EAAE,qBAAqB,EAAE,qBAAqB,EAAE,MAAM,uBAAuB,CAAC;AACrF,OAAO,EAAE,eAAe,EAAE,MAAM,mDAAmD,CAAC;AACpF,OAAO,EAAE,gBAAgB,EAAkB,MAAM,iDAAiD,CAAC;AACnG,OAAO,EAAE,sBAAsB,EAAkC,MAAM,6DAA6D,CAAC;AACrI,OAAO,EAAE,wBAAwB,EAAE,MAAM,8BAA8B,CAAC;AACxE,OAAO,EAAE,eAAe,EAAE,MAAM,8CAA8C,CAAC;AAG/E;;GAEG;AACI,IAAM,gBAAgB,GAAtB,MAAM,gBAAiB,SAAQ,wBAAwB;;aAE7C,OAAE,GAAG,qBAAH,AAAwB,CAAC;IAE3C,YACC,KAAmB,EACA,gBAAmC,EACvC,YAA2B,EACD,qBAA6C,EACrE,cAA+B;QAEhD,KAAK,CACJ,kBAAgB,CAAC,EAAE,EACnB,KAAK,EACL;YACC,YAAY,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,OAAO,CAAC;SACnE,EACD,gBAAgB,EAChB,YAAY,EACZ,cAAc,CACd,CAAC;QAZuC,0BAAqB,GAArB,qBAAqB,CAAwB;IAavF,CAAC;IAEO,KAAK,CAAC,YAAY,CAAC,KAAkB,EAAE,OAAmC;QACjF,IAAI,KAAK,YAAY,eAAe,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;YAEjE,6DAA6D;YAC7D,yDAAyD;YACzD,eAAe;YACf,0DAA0D;YAC1D,yDAAyD;YACzD,sDAAsD;YACtD,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;YAC7C,MAAM,mBAAmB,GAAG,YAAY,EAAE,SAAS,EAAE,CAAC;YACtD,IAAI,CAAC,mBAAmB,EAAE,CAAC;gBAC1B,OAAO,CAAC,iCAAiC;YAC1C,CAAC;YAED,qCAAqC;YACrC,IAAI,cAAc,GAA+B,MAAM,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC;gBAC/F,GAAG,mBAAmB;gBACtB,OAAO,EAAE;oBACR,GAAG,OAAO;oBACV,QAAQ,EAAE,gBAAgB,CAAC,IAAI;iBAC/B;aACD,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;YAEf,IAAI,cAAc,gCAAwB,EAAE,CAAC;gBAC5C,cAAc,GAAG,SAAS,CAAC;YAC5B,CAAC;iBAAM,IAAI,cAAc,iCAAyB,EAAE,CAAC;gBACpD,OAAO;YACR,CAAC;YAED,6DAA6D;YAC7D,iEAAiE;YACjE,IAAI,wBAAwB,CAAC,cAAc,CAAC,EAAE,CAAC;gBAC9C,KAAK,MAAM,MAAM,IAAI,cAAc,CAAC,MAAM,YAAY,eAAe,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,EAAE,cAAc,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE,CAAC;oBACpK,IAAI,MAAM,YAAY,eAAe,EAAE,CAAC;wBACvC,MAAM,CAAC,kBAAkB,EAAE,CAAC;wBAC5B,MAAM,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,CAAC,CAAC,oDAAoD;oBAC3G,CAAC;gBACF,CAAC;YACF,CAAC;YAED,gDAAgD;YAChD,MAAM,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;oBAChC,MAAM,EAAE,YAAY;oBACpB,WAAW,EAAE,cAAc,EAAE,MAAM,IAAI,KAAK;oBAC5C,OAAO,EAAE;wBACR,GAAG,cAAc,EAAE,OAAO,IAAI,OAAO;qBACrC;iBACD,CAAC,CAAC,CAAC;QACL,CAAC;IACF,CAAC;IAEQ,QAAQ;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAkB,EAAE,IAAoB,CAAC,CAAC;IAC/F,CAAC;;AA7EW,gBAAgB;IAM1B,WAAA,iBAAiB,CAAA;IACjB,WAAA,aAAa,CAAA;IACb,WAAA,sBAAsB,CAAA;IACtB,WAAA,eAAe,CAAA;GATL,gBAAgB,CA8E5B","file":"binaryFileEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../../nls.js';\nimport { BaseBinaryResourceEditor } from '../../../../browser/parts/editor/binaryEditor.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { FileEditorInput } from './fileEditorInput.js';\nimport { BINARY_FILE_EDITOR_ID, BINARY_TEXT_FILE_MODE } from '../../common/files.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { EditorResolution, IEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { IEditorResolverService, ResolvedStatus, ResolvedEditor } from '../../../../services/editor/common/editorResolverService.js';\nimport { isEditorInputWithOptions } from '../../../../common/editor.js';\nimport { DiffEditorInput } from '../../../../common/editor/diffEditorInput.js';\nimport { IEditorGroup } from '../../../../services/editor/common/editorGroupsService.js';\n\n/**\n * An implementation of editor for binary files that cannot be displayed.\n */\nexport class BinaryFileEditor extends BaseBinaryResourceEditor {\n\n\tstatic readonly ID = BINARY_FILE_EDITOR_ID;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IEditorResolverService private readonly editorResolverService: IEditorResolverService,\n\t\t@IStorageService storageService: IStorageService\n\t) {\n\t\tsuper(\n\t\t\tBinaryFileEditor.ID,\n\t\t\tgroup,\n\t\t\t{\n\t\t\t\topenInternal: (input, options) => this.openInternal(input, options)\n\t\t\t},\n\t\t\ttelemetryService,\n\t\t\tthemeService,\n\t\t\tstorageService\n\t\t);\n\t}\n\n\tprivate async openInternal(input: EditorInput, options: IEditorOptions | undefined): Promise<void> {\n\t\tif (input instanceof FileEditorInput && this.group.activeEditor) {\n\n\t\t\t// We operate on the active editor here to support re-opening\n\t\t\t// diff editors where `input` may just be one side of the\n\t\t\t// diff editor.\n\t\t\t// Since `openInternal` can only ever be selected from the\n\t\t\t// active editor of the group, this is a safe assumption.\n\t\t\t// (https://github.com/microsoft/vscode/issues/124222)\n\t\t\tconst activeEditor = this.group.activeEditor;\n\t\t\tconst untypedActiveEditor = activeEditor?.toUntyped();\n\t\t\tif (!untypedActiveEditor) {\n\t\t\t\treturn; // we need untyped editor support\n\t\t\t}\n\n\t\t\t// Try to let the user pick an editor\n\t\t\tlet resolvedEditor: ResolvedEditor | undefined = await this.editorResolverService.resolveEditor({\n\t\t\t\t...untypedActiveEditor,\n\t\t\t\toptions: {\n\t\t\t\t\t...options,\n\t\t\t\t\toverride: EditorResolution.PICK\n\t\t\t\t}\n\t\t\t}, this.group);\n\n\t\t\tif (resolvedEditor === ResolvedStatus.NONE) {\n\t\t\t\tresolvedEditor = undefined;\n\t\t\t} else if (resolvedEditor === ResolvedStatus.ABORT) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the result if a file editor, the user indicated to open\n\t\t\t// the binary file as text. As such we adjust the input for that.\n\t\t\tif (isEditorInputWithOptions(resolvedEditor)) {\n\t\t\t\tfor (const editor of resolvedEditor.editor instanceof DiffEditorInput ? [resolvedEditor.editor.original, resolvedEditor.editor.modified] : [resolvedEditor.editor]) {\n\t\t\t\t\tif (editor instanceof FileEditorInput) {\n\t\t\t\t\t\teditor.setForceOpenAsText();\n\t\t\t\t\t\teditor.setPreferredLanguageId(BINARY_TEXT_FILE_MODE); // https://github.com/microsoft/vscode/issues/131076\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Replace the active editor with the picked one\n\t\t\tawait this.group.replaceEditors([{\n\t\t\t\teditor: activeEditor,\n\t\t\t\treplacement: resolvedEditor?.editor ?? input,\n\t\t\t\toptions: {\n\t\t\t\t\t...resolvedEditor?.options ?? options\n\t\t\t\t}\n\t\t\t}]);\n\t\t}\n\t}\n\n\toverride getTitle(): string {\n\t\treturn this.input ? this.input.getName() : localize('binaryFileEditor', \"Binary File Viewer\");\n\t}\n}\n"]}