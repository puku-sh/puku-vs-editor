{"version":3,"sources":["vs/workbench/contrib/files/browser/fileActions.ts"],"names":[],"mappings":"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","file":"fileActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { isWindows, OperatingSystem, OS } from '../../../../base/common/platform.js';\nimport { extname, basename, isAbsolute } from '../../../../base/common/path.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { toErrorMessage } from '../../../../base/common/errorMessage.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { dispose, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { VIEWLET_ID, IFilesConfiguration, VIEW_ID, UndoConfirmLevel } from '../common/files.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { IQuickInputService, ItemActivation } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { REVEAL_IN_EXPLORER_COMMAND_ID, SAVE_ALL_IN_GROUP_COMMAND_ID, NEW_UNTITLED_FILE_COMMAND_ID } from './fileConstants.js';\nimport { ITextModelService, ITextModelContentProvider } from '../../../../editor/common/services/resolverService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ICommandService, CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { IDialogService, IConfirmationResult, getFileNamesMessage } from '../../../../platform/dialogs/common/dialogs.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { Constants } from '../../../../base/common/uint.js';\nimport { CLOSE_EDITORS_AND_GROUP_COMMAND_ID } from '../../../browser/parts/editor/editorCommands.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { ExplorerItem, NewExplorerItem } from '../common/explorerModel.js';\nimport { getErrorMessage } from '../../../../base/common/errors.js';\nimport { triggerUpload } from '../../../../base/browser/dom.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IWorkingCopyService } from '../../../services/workingCopy/common/workingCopyService.js';\nimport { IWorkingCopy } from '../../../services/workingCopy/common/workingCopy.js';\nimport { timeout } from '../../../../base/common/async.js';\nimport { IWorkingCopyFileService } from '../../../services/workingCopy/common/workingCopyFileService.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ViewContainerLocation } from '../../../common/views.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { trim, rtrim } from '../../../../base/common/strings.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ResourceFileEdit } from '../../../../editor/browser/services/bulkEditService.js';\nimport { IExplorerService } from './files.js';\nimport { BrowserFileUpload, FileDownload } from './fileImportExport.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { Action2 } from '../../../../platform/actions/common/actions.js';\nimport { ActiveEditorCanToggleReadonlyContext, ActiveEditorContext, EmptyWorkspaceSupportContext } from '../../../common/contextkeys.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { getPathForFile } from '../../../../platform/dnd/browser/dnd.js';\n\nexport const NEW_FILE_COMMAND_ID = 'explorer.newFile';\nexport const NEW_FILE_LABEL = nls.localize2('newFile', \"New File...\");\nexport const NEW_FOLDER_COMMAND_ID = 'explorer.newFolder';\nexport const NEW_FOLDER_LABEL = nls.localize2('newFolder', \"New Folder...\");\nexport const TRIGGER_RENAME_LABEL = nls.localize('rename', \"Rename...\");\nexport const MOVE_FILE_TO_TRASH_LABEL = nls.localize('delete', \"Delete\");\nexport const COPY_FILE_LABEL = nls.localize('copyFile', \"Copy\");\nexport const PASTE_FILE_LABEL = nls.localize('pasteFile', \"Paste\");\nexport const FileCopiedContext = new RawContextKey<boolean>('fileCopied', false);\nexport const DOWNLOAD_COMMAND_ID = 'explorer.download';\nexport const DOWNLOAD_LABEL = nls.localize('download', \"Download...\");\nexport const UPLOAD_COMMAND_ID = 'explorer.upload';\nexport const UPLOAD_LABEL = nls.localize('upload', \"Upload...\");\nconst CONFIRM_DELETE_SETTING_KEY = 'explorer.confirmDelete';\nconst MAX_UNDO_FILE_SIZE = 5000000; // 5mb\n\nasync function refreshIfSeparator(value: string, explorerService: IExplorerService): Promise<void> {\n\tif (value && ((value.indexOf('/') >= 0) || (value.indexOf('\\\\') >= 0))) {\n\t\t// New input contains separator, multiple resources will get created workaround for #68204\n\t\tawait explorerService.refresh();\n\t}\n}\n\nasync function deleteFiles(explorerService: IExplorerService, workingCopyFileService: IWorkingCopyFileService, dialogService: IDialogService, configurationService: IConfigurationService, filesConfigurationService: IFilesConfigurationService, elements: ExplorerItem[], useTrash: boolean, skipConfirm = false, ignoreIfNotExists = false): Promise<void> {\n\tlet primaryButton: string;\n\tif (useTrash) {\n\t\tprimaryButton = isWindows ? nls.localize('deleteButtonLabelRecycleBin', \"&&Move to Recycle Bin\") : nls.localize({ key: 'deleteButtonLabelTrash', comment: ['&& denotes a mnemonic'] }, \"&&Move to Trash\");\n\t} else {\n\t\tprimaryButton = nls.localize({ key: 'deleteButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete\");\n\t}\n\n\t// Handle dirty\n\tconst distinctElements = resources.distinctParents(elements, e => e.resource);\n\tconst dirtyWorkingCopies = new Set<IWorkingCopy>();\n\tfor (const distinctElement of distinctElements) {\n\t\tfor (const dirtyWorkingCopy of workingCopyFileService.getDirty(distinctElement.resource)) {\n\t\t\tdirtyWorkingCopies.add(dirtyWorkingCopy);\n\t\t}\n\t}\n\n\tif (dirtyWorkingCopies.size) {\n\t\tlet message: string;\n\t\tif (distinctElements.length > 1) {\n\t\t\tmessage = nls.localize('dirtyMessageFilesDelete', \"You are deleting files with unsaved changes. Do you want to continue?\");\n\t\t} else if (distinctElements[0].isDirectory) {\n\t\t\tif (dirtyWorkingCopies.size === 1) {\n\t\t\t\tmessage = nls.localize('dirtyMessageFolderOneDelete', \"You are deleting a folder {0} with unsaved changes in 1 file. Do you want to continue?\", distinctElements[0].name);\n\t\t\t} else {\n\t\t\t\tmessage = nls.localize('dirtyMessageFolderDelete', \"You are deleting a folder {0} with unsaved changes in {1} files. Do you want to continue?\", distinctElements[0].name, dirtyWorkingCopies.size);\n\t\t\t}\n\t\t} else {\n\t\t\tmessage = nls.localize('dirtyMessageFileDelete', \"You are deleting {0} with unsaved changes. Do you want to continue?\", distinctElements[0].name);\n\t\t}\n\n\t\tconst response = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage,\n\t\t\tdetail: nls.localize('dirtyWarning', \"Your changes will be lost if you don't save them.\"),\n\t\t\tprimaryButton\n\t\t});\n\n\t\tif (!response.confirmed) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tskipConfirm = true;\n\t\t}\n\t}\n\n\t// Handle readonly\n\tif (!skipConfirm) {\n\t\tconst readonlyResources = distinctElements.filter(e => filesConfigurationService.isReadonly(e.resource));\n\t\tif (readonlyResources.length) {\n\t\t\tlet message: string;\n\t\t\tif (readonlyResources.length > 1) {\n\t\t\t\tmessage = nls.localize('readonlyMessageFilesDelete', \"You are deleting files that are configured to be read-only. Do you want to continue?\");\n\t\t\t} else if (readonlyResources[0].isDirectory) {\n\t\t\t\tmessage = nls.localize('readonlyMessageFolderOneDelete', \"You are deleting a folder {0} that is configured to be read-only. Do you want to continue?\", distinctElements[0].name);\n\t\t\t} else {\n\t\t\t\tmessage = nls.localize('readonlyMessageFolderDelete', \"You are deleting a file {0} that is configured to be read-only. Do you want to continue?\", distinctElements[0].name);\n\t\t\t}\n\n\t\t\tconst response = await dialogService.confirm({\n\t\t\t\ttype: 'warning',\n\t\t\t\tmessage,\n\t\t\t\tdetail: nls.localize('continueDetail', \"The read-only protection will be overridden if you continue.\"),\n\t\t\t\tprimaryButton: nls.localize('continueButtonLabel', \"Continue\")\n\t\t\t});\n\n\t\t\tif (!response.confirmed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tlet confirmation: IConfirmationResult;\n\n\t// We do not support undo of folders, so in that case the delete action is irreversible\n\tconst deleteDetail = distinctElements.some(e => e.isDirectory) ? nls.localize('irreversible', \"This action is irreversible!\") :\n\t\tdistinctElements.length > 1 ? nls.localize('restorePlural', \"You can restore these files using the Undo command.\") : nls.localize('restore', \"You can restore this file using the Undo command.\");\n\n\t// Check if we need to ask for confirmation at all\n\tif (skipConfirm || (useTrash && configurationService.getValue<boolean>(CONFIRM_DELETE_SETTING_KEY) === false)) {\n\t\tconfirmation = { confirmed: true };\n\t}\n\n\t// Confirm for moving to trash\n\telse if (useTrash) {\n\t\tlet { message, detail } = getMoveToTrashMessage(distinctElements);\n\t\tdetail += detail ? '\\n' : '';\n\t\tif (isWindows) {\n\t\t\tdetail += distinctElements.length > 1 ? nls.localize('undoBinFiles', \"You can restore these files from the Recycle Bin.\") : nls.localize('undoBin', \"You can restore this file from the Recycle Bin.\");\n\t\t} else {\n\t\t\tdetail += distinctElements.length > 1 ? nls.localize('undoTrashFiles', \"You can restore these files from the Trash.\") : nls.localize('undoTrash', \"You can restore this file from the Trash.\");\n\t\t}\n\n\t\tconfirmation = await dialogService.confirm({\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tprimaryButton,\n\t\t\tcheckbox: {\n\t\t\t\tlabel: nls.localize('doNotAskAgain', \"Do not ask me again\")\n\t\t\t}\n\t\t});\n\t}\n\n\t// Confirm for deleting permanently\n\telse {\n\t\tlet { message, detail } = getDeleteMessage(distinctElements);\n\t\tdetail += detail ? '\\n' : '';\n\t\tdetail += deleteDetail;\n\t\tconfirmation = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tprimaryButton\n\t\t});\n\t}\n\n\t// Check for confirmation checkbox\n\tif (confirmation.confirmed && confirmation.checkboxChecked === true) {\n\t\tawait configurationService.updateValue(CONFIRM_DELETE_SETTING_KEY, false);\n\t}\n\n\t// Check for confirmation\n\tif (!confirmation.confirmed) {\n\t\treturn;\n\t}\n\n\t// Call function\n\ttry {\n\t\tconst resourceFileEdits = distinctElements.map(e => new ResourceFileEdit(e.resource, undefined, { recursive: true, folder: e.isDirectory, ignoreIfNotExists, skipTrashBin: !useTrash, maxSize: MAX_UNDO_FILE_SIZE }));\n\t\tconst options = {\n\t\t\tundoLabel: distinctElements.length > 1 ? nls.localize({ key: 'deleteBulkEdit', comment: ['Placeholder will be replaced by the number of files deleted'] }, \"Delete {0} files\", distinctElements.length) : nls.localize({ key: 'deleteFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file deleted'] }, \"Delete {0}\", distinctElements[0].name),\n\t\t\tprogressLabel: distinctElements.length > 1 ? nls.localize({ key: 'deletingBulkEdit', comment: ['Placeholder will be replaced by the number of files deleted'] }, \"Deleting {0} files\", distinctElements.length) : nls.localize({ key: 'deletingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file deleted'] }, \"Deleting {0}\", distinctElements[0].name),\n\t\t};\n\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t} catch (error) {\n\n\t\t// Handle error to delete file(s) from a modal confirmation dialog\n\t\tlet errorMessage: string;\n\t\tlet detailMessage: string | undefined;\n\t\tlet primaryButton: string;\n\t\tif (useTrash) {\n\t\t\terrorMessage = isWindows ? nls.localize('binFailed', \"Failed to delete using the Recycle Bin. Do you want to permanently delete instead?\") : nls.localize('trashFailed', \"Failed to delete using the Trash. Do you want to permanently delete instead?\");\n\t\t\tdetailMessage = deleteDetail;\n\t\t\tprimaryButton = nls.localize({ key: 'deletePermanentlyButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete Permanently\");\n\t\t} else {\n\t\t\terrorMessage = toErrorMessage(error, false);\n\t\t\tprimaryButton = nls.localize({ key: 'retryButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Retry\");\n\t\t}\n\n\t\tconst res = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage: errorMessage,\n\t\t\tdetail: detailMessage,\n\t\t\tprimaryButton\n\t\t});\n\n\t\tif (res.confirmed) {\n\t\t\tif (useTrash) {\n\t\t\t\tuseTrash = false; // Delete Permanently\n\t\t\t}\n\n\t\t\tskipConfirm = true;\n\t\t\tignoreIfNotExists = true;\n\n\t\t\treturn deleteFiles(explorerService, workingCopyFileService, dialogService, configurationService, filesConfigurationService, elements, useTrash, skipConfirm, ignoreIfNotExists);\n\t\t}\n\t}\n}\n\nfunction getMoveToTrashMessage(distinctElements: ExplorerItem[]): { message: string; detail: string } {\n\tif (containsBothDirectoryAndFile(distinctElements)) {\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmMoveTrashMessageFilesAndDirectories', \"Are you sure you want to delete the following {0} files/directories and their contents?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements.length > 1) {\n\t\tif (distinctElements[0].isDirectory) {\n\t\t\treturn {\n\t\t\t\tmessage: nls.localize('confirmMoveTrashMessageMultipleDirectories', \"Are you sure you want to delete the following {0} directories and their contents?\", distinctElements.length),\n\t\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmMoveTrashMessageMultiple', \"Are you sure you want to delete the following {0} files?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements[0].isDirectory && !distinctElements[0].isSymbolicLink) {\n\t\treturn { message: nls.localize('confirmMoveTrashMessageFolder', \"Are you sure you want to delete '{0}' and its contents?\", distinctElements[0].name), detail: '' };\n\t}\n\n\treturn { message: nls.localize('confirmMoveTrashMessageFile', \"Are you sure you want to delete '{0}'?\", distinctElements[0].name), detail: '' };\n}\n\nfunction getDeleteMessage(distinctElements: ExplorerItem[]): { message: string; detail: string } {\n\tif (containsBothDirectoryAndFile(distinctElements)) {\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmDeleteMessageFilesAndDirectories', \"Are you sure you want to permanently delete the following {0} files/directories and their contents?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements.length > 1) {\n\t\tif (distinctElements[0].isDirectory) {\n\t\t\treturn {\n\t\t\t\tmessage: nls.localize('confirmDeleteMessageMultipleDirectories', \"Are you sure you want to permanently delete the following {0} directories and their contents?\", distinctElements.length),\n\t\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tmessage: nls.localize('confirmDeleteMessageMultiple', \"Are you sure you want to permanently delete the following {0} files?\", distinctElements.length),\n\t\t\tdetail: getFileNamesMessage(distinctElements.map(e => e.resource))\n\t\t};\n\t}\n\n\tif (distinctElements[0].isDirectory) {\n\t\treturn { message: nls.localize('confirmDeleteMessageFolder', \"Are you sure you want to permanently delete '{0}' and its contents?\", distinctElements[0].name), detail: '' };\n\t}\n\n\treturn { message: nls.localize('confirmDeleteMessageFile', \"Are you sure you want to permanently delete '{0}'?\", distinctElements[0].name), detail: '' };\n}\n\nfunction containsBothDirectoryAndFile(distinctElements: ExplorerItem[]): boolean {\n\tconst directory = distinctElements.find(element => element.isDirectory);\n\tconst file = distinctElements.find(element => !element.isDirectory);\n\n\treturn !!directory && !!file;\n}\n\n\nexport async function findValidPasteFileTarget(\n\texplorerService: IExplorerService,\n\tfileService: IFileService,\n\tdialogService: IDialogService,\n\ttargetFolder: ExplorerItem,\n\tfileToPaste: { resource: URI | string; isDirectory?: boolean; allowOverwrite: boolean },\n\tincrementalNaming: 'simple' | 'smart' | 'disabled'\n): Promise<URI | undefined> {\n\n\tlet name = typeof fileToPaste.resource === 'string' ? fileToPaste.resource : resources.basenameOrAuthority(fileToPaste.resource);\n\tlet candidate = resources.joinPath(targetFolder.resource, name);\n\n\t// In the disabled case we must ask if it's ok to overwrite the file if it exists\n\tif (incrementalNaming === 'disabled') {\n\t\tconst canOverwrite = await askForOverwrite(fileService, dialogService, candidate);\n\t\tif (!canOverwrite) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\twhile (true && !fileToPaste.allowOverwrite) {\n\t\tif (!explorerService.findClosest(candidate)) {\n\t\t\tbreak;\n\t\t}\n\n\t\tif (incrementalNaming !== 'disabled') {\n\t\t\tname = incrementFileName(name, !!fileToPaste.isDirectory, incrementalNaming);\n\t\t}\n\t\tcandidate = resources.joinPath(targetFolder.resource, name);\n\t}\n\n\treturn candidate;\n}\n\nexport function incrementFileName(name: string, isFolder: boolean, incrementalNaming: 'simple' | 'smart'): string {\n\tif (incrementalNaming === 'simple') {\n\t\tlet namePrefix = name;\n\t\tlet extSuffix = '';\n\t\tif (!isFolder) {\n\t\t\textSuffix = extname(name);\n\t\t\tnamePrefix = basename(name, extSuffix);\n\t\t}\n\n\t\t// name copy 5(.txt) => name copy 6(.txt)\n\t\t// name copy(.txt) => name copy 2(.txt)\n\t\tconst suffixRegex = /^(.+ copy)( \\d+)?$/;\n\t\tif (suffixRegex.test(namePrefix)) {\n\t\t\treturn namePrefix.replace(suffixRegex, (match, g1?, g2?) => {\n\t\t\t\tconst number = (g2 ? parseInt(g2) : 1);\n\t\t\t\treturn number === 0\n\t\t\t\t\t? `${g1}`\n\t\t\t\t\t: (number < Constants.MAX_SAFE_SMALL_INTEGER\n\t\t\t\t\t\t? `${g1} ${number + 1}`\n\t\t\t\t\t\t: `${g1}${g2} copy`);\n\t\t\t}) + extSuffix;\n\t\t}\n\n\t\t// name(.txt) => name copy(.txt)\n\t\treturn `${namePrefix} copy${extSuffix}`;\n\t}\n\n\tconst separators = '[\\\\.\\\\-_]';\n\tconst maxNumber = Constants.MAX_SAFE_SMALL_INTEGER;\n\n\t// file.1.txt=>file.2.txt\n\tconst suffixFileRegex = RegExp('(.*' + separators + ')(\\\\d+)(\\\\..*)$');\n\tif (!isFolder && name.match(suffixFileRegex)) {\n\t\treturn name.replace(suffixFileRegex, (match, g1?, g2?, g3?) => {\n\t\t\tconst number = parseInt(g2);\n\t\t\treturn number < maxNumber\n\t\t\t\t? g1 + String(number + 1).padStart(g2.length, '0') + g3\n\t\t\t\t: `${g1}${g2}.1${g3}`;\n\t\t});\n\t}\n\n\t// 1.file.txt=>2.file.txt\n\tconst prefixFileRegex = RegExp('(\\\\d+)(' + separators + '.*)(\\\\..*)$');\n\tif (!isFolder && name.match(prefixFileRegex)) {\n\t\treturn name.replace(prefixFileRegex, (match, g1?, g2?, g3?) => {\n\t\t\tconst number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0') + g2 + g3\n\t\t\t\t: `${g1}${g2}.1${g3}`;\n\t\t});\n\t}\n\n\t// 1.txt=>2.txt\n\tconst prefixFileNoNameRegex = RegExp('(\\\\d+)(\\\\..*)$');\n\tif (!isFolder && name.match(prefixFileNoNameRegex)) {\n\t\treturn name.replace(prefixFileNoNameRegex, (match, g1?, g2?) => {\n\t\t\tconst number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0') + g2\n\t\t\t\t: `${g1}.1${g2}`;\n\t\t});\n\t}\n\n\t// file.txt=>file.1.txt\n\tconst lastIndexOfDot = name.lastIndexOf('.');\n\tif (!isFolder && lastIndexOfDot >= 0) {\n\t\treturn `${name.substr(0, lastIndexOfDot)}.1${name.substr(lastIndexOfDot)}`;\n\t}\n\n\t// 123 => 124\n\tconst noNameNoExtensionRegex = RegExp('(\\\\d+)$');\n\tif (!isFolder && lastIndexOfDot === -1 && name.match(noNameNoExtensionRegex)) {\n\t\treturn name.replace(noNameNoExtensionRegex, (match, g1?) => {\n\t\t\tconst number = parseInt(g1);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(g1.length, '0')\n\t\t\t\t: `${g1}.1`;\n\t\t});\n\t}\n\n\t// file => file1\n\t// file1 => file2\n\tconst noExtensionRegex = RegExp('(.*)(\\\\d*)$');\n\tif (!isFolder && lastIndexOfDot === -1 && name.match(noExtensionRegex)) {\n\t\treturn name.replace(noExtensionRegex, (match, g1?, g2?) => {\n\t\t\tlet number = parseInt(g2);\n\t\t\tif (isNaN(number)) {\n\t\t\t\tnumber = 0;\n\t\t\t}\n\t\t\treturn number < maxNumber\n\t\t\t\t? g1 + String(number + 1).padStart(g2.length, '0')\n\t\t\t\t: `${g1}${g2}.1`;\n\t\t});\n\t}\n\n\t// folder.1=>folder.2\n\tif (isFolder && name.match(/(\\d+)$/)) {\n\t\treturn name.replace(/(\\d+)$/, (match, ...groups) => {\n\t\t\tconst number = parseInt(groups[0]);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(groups[0].length, '0')\n\t\t\t\t: `${groups[0]}.1`;\n\t\t});\n\t}\n\n\t// 1.folder=>2.folder\n\tif (isFolder && name.match(/^(\\d+)/)) {\n\t\treturn name.replace(/^(\\d+)(.*)$/, (match, ...groups) => {\n\t\t\tconst number = parseInt(groups[0]);\n\t\t\treturn number < maxNumber\n\t\t\t\t? String(number + 1).padStart(groups[0].length, '0') + groups[1]\n\t\t\t\t: `${groups[0]}${groups[1]}.1`;\n\t\t});\n\t}\n\n\t// file/folder=>file.1/folder.1\n\treturn `${name}.1`;\n}\n\n/**\n * Checks to see if the resource already exists, if so prompts the user if they would be ok with it being overwritten\n * @param fileService The file service\n * @param dialogService The dialog service\n * @param targetResource The resource to be overwritten\n * @return A boolean indicating if the user is ok with resource being overwritten, if the resource does not exist it returns true.\n */\nasync function askForOverwrite(fileService: IFileService, dialogService: IDialogService, targetResource: URI): Promise<boolean> {\n\tconst exists = await fileService.exists(targetResource);\n\tif (!exists) {\n\t\treturn true;\n\t}\n\t// Ask for overwrite confirmation\n\tconst { confirmed } = await dialogService.confirm({\n\t\ttype: Severity.Warning,\n\t\tmessage: nls.localize('confirmOverwrite', \"A file or folder with the name '{0}' already exists in the destination folder. Do you want to replace it?\", basename(targetResource.path)),\n\t\tprimaryButton: nls.localize('replaceButtonLabel', \"&&Replace\")\n\t});\n\treturn confirmed;\n}\n\n// Global Compare with\nexport class GlobalCompareResourcesAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.compareFileWith';\n\tstatic readonly LABEL = nls.localize2('globalCompareFile', \"Compare Active File With...\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GlobalCompareResourcesAction.ID,\n\t\t\ttitle: GlobalCompareResourcesAction.LABEL,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tprecondition: ActiveEditorContext,\n\t\t\tmetadata: {\n\t\t\t\tdescription: nls.localize2('compareFileWithMeta', \"Opens a picker to select a file to diff with the active editor.\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst textModelService = accessor.get(ITextModelService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\n\t\tconst activeInput = editorService.activeEditor;\n\t\tconst activeResource = EditorResourceAccessor.getOriginalUri(activeInput);\n\t\tif (activeResource && textModelService.canHandleResource(activeResource)) {\n\t\t\tconst picks = await quickInputService.quickAccess.pick('', { itemActivation: ItemActivation.SECOND });\n\t\t\tif (picks?.length === 1) {\n\t\t\t\tconst resource = (picks[0] as unknown as { resource: unknown }).resource;\n\t\t\t\tif (URI.isUri(resource) && textModelService.canHandleResource(resource)) {\n\t\t\t\t\teditorService.openEditor({\n\t\t\t\t\t\toriginal: { resource: activeResource },\n\t\t\t\t\t\tmodified: { resource: resource },\n\t\t\t\t\t\toptions: { pinned: true }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class ToggleAutoSaveAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.toggleAutoSave';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ToggleAutoSaveAction.ID,\n\t\t\ttitle: nls.localize2('toggleAutoSave', \"Toggle Auto Save\"),\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tmetadata: { description: nls.localize2('toggleAutoSaveDescription', \"Toggle the ability to save files automatically after typing\") }\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst filesConfigurationService = accessor.get(IFilesConfigurationService);\n\t\treturn filesConfigurationService.toggleAutoSave();\n\t}\n}\n\nabstract class BaseSaveAllAction extends Action {\n\tprivate lastDirtyState: boolean;\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@ICommandService protected commandService: ICommandService,\n\t\t@INotificationService private notificationService: INotificationService,\n\t\t@IWorkingCopyService private readonly workingCopyService: IWorkingCopyService\n\t) {\n\t\tsuper(id, label);\n\n\t\tthis.lastDirtyState = this.workingCopyService.hasDirty;\n\t\tthis.enabled = this.lastDirtyState;\n\n\t\tthis.registerListeners();\n\t}\n\n\tprotected abstract doRun(context: unknown): Promise<void>;\n\n\tprivate registerListeners(): void {\n\n\t\t// update enablement based on working copy changes\n\t\tthis._register(this.workingCopyService.onDidChangeDirty(workingCopy => this.updateEnablement(workingCopy)));\n\t}\n\n\tprivate updateEnablement(workingCopy: IWorkingCopy): void {\n\t\tconst hasDirty = workingCopy.isDirty() || this.workingCopyService.hasDirty;\n\t\tif (this.lastDirtyState !== hasDirty) {\n\t\t\tthis.enabled = hasDirty;\n\t\t\tthis.lastDirtyState = this.enabled;\n\t\t}\n\t}\n\n\toverride async run(context?: unknown): Promise<void> {\n\t\ttry {\n\t\t\tawait this.doRun(context);\n\t\t} catch (error) {\n\t\t\tthis.notificationService.error(toErrorMessage(error, false));\n\t\t}\n\t}\n}\n\nexport class SaveAllInGroupAction extends BaseSaveAllAction {\n\n\tstatic readonly ID = 'workbench.files.action.saveAllInGroup';\n\tstatic readonly LABEL = nls.localize('saveAllInGroup', \"Save All in Group\");\n\n\toverride get class(): string {\n\t\treturn 'explorer-action ' + ThemeIcon.asClassName(Codicon.saveAll);\n\t}\n\n\tprotected doRun(context: unknown): Promise<void> {\n\t\treturn this.commandService.executeCommand(SAVE_ALL_IN_GROUP_COMMAND_ID, {}, context);\n\t}\n}\n\nexport class CloseGroupAction extends Action {\n\n\tstatic readonly ID = 'workbench.files.action.closeGroup';\n\tstatic readonly LABEL = nls.localize('closeGroup', \"Close Group\");\n\n\tconstructor(id: string, label: string, @ICommandService private readonly commandService: ICommandService) {\n\t\tsuper(id, label, ThemeIcon.asClassName(Codicon.closeAll));\n\t}\n\n\toverride run(context?: unknown): Promise<void> {\n\t\treturn this.commandService.executeCommand(CLOSE_EDITORS_AND_GROUP_COMMAND_ID, {}, context);\n\t}\n}\n\nexport class FocusFilesExplorer extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.focusFilesExplorer';\n\tstatic readonly LABEL = nls.localize2('focusFilesExplorer', \"Focus on Files Explorer\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: FocusFilesExplorer.ID,\n\t\t\ttitle: FocusFilesExplorer.LABEL,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tmetadata: {\n\t\t\t\tdescription: nls.localize2('focusFilesExplorerMetadata', \"Moves focus to the file explorer view container.\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst paneCompositeService = accessor.get(IPaneCompositePartService);\n\t\tawait paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar, true);\n\t}\n}\n\nexport class ShowActiveFileInExplorer extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.showActiveFileInExplorer';\n\tstatic readonly LABEL = nls.localize2('showInExplorer', \"Reveal Active File in Explorer View\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ShowActiveFileInExplorer.ID,\n\t\t\ttitle: ShowActiveFileInExplorer.LABEL,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tmetadata: {\n\t\t\t\tdescription: nls.localize2('showInExplorerMetadata', \"Reveals and selects the active file within the explorer view.\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (resource) {\n\t\t\tcommandService.executeCommand(REVEAL_IN_EXPLORER_COMMAND_ID, resource);\n\t\t}\n\t}\n}\n\nexport class OpenActiveFileInEmptyWorkspace extends Action2 {\n\n\tstatic readonly ID = 'workbench.action.files.showOpenedFileInNewWindow';\n\tstatic readonly LABEL = nls.localize2('openFileInEmptyWorkspace', \"Open Active Editor in New Empty Workspace\");\n\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: OpenActiveFileInEmptyWorkspace.ID,\n\t\t\ttitle: OpenActiveFileInEmptyWorkspace.LABEL,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tprecondition: EmptyWorkspaceSupportContext,\n\t\t\tmetadata: {\n\t\t\t\tdescription: nls.localize2('openFileInEmptyWorkspaceMetadata', \"Opens the active editor in a new window with no folders open.\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst hostService = accessor.get(IHostService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\t\tconst fileService = accessor.get(IFileService);\n\n\t\tconst fileResource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (fileResource && fileService.hasProvider(fileResource)) {\n\t\t\thostService.openWindow([{ fileUri: fileResource }], { forceNewWindow: true });\n\t\t} else {\n\t\t\tdialogService.error(nls.localize('openFileToShowInNewWindow.unsupportedschema', \"The active editor must contain an openable resource.\"));\n\t\t}\n\t}\n}\n\nexport function validateFileName(pathService: IPathService, item: ExplorerItem, name: string, os: OperatingSystem): { content: string; severity: Severity } | null {\n\t// Produce a well formed file name\n\tname = getWellFormedFileName(name);\n\n\t// Name not provided\n\tif (!name || name.length === 0 || /^\\s+$/.test(name)) {\n\t\treturn {\n\t\t\tcontent: nls.localize('emptyFileNameError', \"A file or folder name must be provided.\"),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\t// Relative paths only\n\tif (name[0] === '/' || name[0] === '\\\\') {\n\t\treturn {\n\t\t\tcontent: nls.localize('fileNameStartsWithSlashError', \"A file or folder name cannot start with a slash.\"),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\tconst names = coalesce(name.split(/[\\\\/]/));\n\tconst parent = item.parent;\n\n\tif (name !== item.name) {\n\t\t// Do not allow to overwrite existing file\n\t\tconst child = parent?.getChild(name);\n\t\tif (child && child !== item) {\n\t\t\treturn {\n\t\t\t\tcontent: nls.localize('fileNameExistsError', \"A file or folder **{0}** already exists at this location. Please choose a different name.\", name),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\t}\n\n\t// Check for invalid file name.\n\tif (names.some(folderName => !pathService.hasValidBasename(item.resource, os, folderName))) {\n\t\t// Escape * characters\n\t\tconst escapedName = name.replace(/\\*/g, '\\\\*'); // CodeQL [SM02383] This only processes filenames which are enforced against having backslashes in them farther up in the stack.\n\t\treturn {\n\t\t\tcontent: nls.localize('invalidFileNameError', \"The name **{0}** is not valid as a file or folder name. Please choose a different name.\", trimLongName(escapedName)),\n\t\t\tseverity: Severity.Error\n\t\t};\n\t}\n\n\tif (names.some(name => /^\\s|\\s$/.test(name))) {\n\t\treturn {\n\t\t\tcontent: nls.localize('fileNameWhitespaceWarning', \"Leading or trailing whitespace detected in file or folder name.\"),\n\t\t\tseverity: Severity.Warning\n\t\t};\n\t}\n\n\treturn null;\n}\n\nfunction trimLongName(name: string): string {\n\tif (name?.length > 255) {\n\t\treturn `${name.substr(0, 255)}...`;\n\t}\n\n\treturn name;\n}\n\nfunction getWellFormedFileName(filename: string): string {\n\tif (!filename) {\n\t\treturn filename;\n\t}\n\n\t// Trim tabs\n\tfilename = trim(filename, '\\t');\n\n\t// Remove trailing slashes\n\tfilename = rtrim(filename, '/');\n\tfilename = rtrim(filename, '\\\\');\n\n\treturn filename;\n}\n\nexport class CompareNewUntitledTextFilesAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.compareNewUntitledTextFiles';\n\tstatic readonly LABEL = nls.localize2('compareNewUntitledTextFiles', \"Compare New Untitled Text Files\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CompareNewUntitledTextFilesAction.ID,\n\t\t\ttitle: CompareNewUntitledTextFilesAction.LABEL,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tmetadata: {\n\t\t\t\tdescription: nls.localize2('compareNewUntitledTextFilesMeta', \"Opens a new diff editor with two untitled files.\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tawait editorService.openEditor({\n\t\t\toriginal: { resource: undefined },\n\t\t\tmodified: { resource: undefined },\n\t\t\toptions: { pinned: true }\n\t\t});\n\t}\n}\n\nexport class CompareWithClipboardAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.files.action.compareWithClipboard';\n\tstatic readonly LABEL = nls.localize2('compareWithClipboard', \"Compare Active File with Clipboard\");\n\n\tprivate registrationDisposal: IDisposable | undefined;\n\tprivate static SCHEME_COUNTER = 0;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CompareWithClipboardAction.ID,\n\t\t\ttitle: CompareWithClipboardAction.LABEL,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tkeybinding: { primary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyC), weight: KeybindingWeight.WorkbenchContrib },\n\t\t\tmetadata: {\n\t\t\t\tdescription: nls.localize2('compareWithClipboardMeta', \"Opens a new diff editor to compare the active file with the contents of the clipboard.\")\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst textModelService = accessor.get(ITextModelService);\n\t\tconst fileService = accessor.get(IFileService);\n\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tconst scheme = `clipboardCompare${CompareWithClipboardAction.SCHEME_COUNTER++}`;\n\t\tif (resource && (fileService.hasProvider(resource) || resource.scheme === Schemas.untitled)) {\n\t\t\tif (!this.registrationDisposal) {\n\t\t\t\tconst provider = instantiationService.createInstance(ClipboardContentProvider);\n\t\t\t\tthis.registrationDisposal = textModelService.registerTextModelContentProvider(scheme, provider);\n\t\t\t}\n\n\t\t\tconst name = resources.basename(resource);\n\t\t\tconst editorLabel = nls.localize('clipboardComparisonLabel', \"Clipboard  {0}\", name);\n\n\t\t\tawait editorService.openEditor({\n\t\t\t\toriginal: { resource: resource.with({ scheme }) },\n\t\t\t\tmodified: { resource: resource },\n\t\t\t\tlabel: editorLabel,\n\t\t\t\toptions: { pinned: true }\n\t\t\t}).finally(() => {\n\t\t\t\tdispose(this.registrationDisposal);\n\t\t\t\tthis.registrationDisposal = undefined;\n\t\t\t});\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.registrationDisposal);\n\t\tthis.registrationDisposal = undefined;\n\t}\n}\n\nclass ClipboardContentProvider implements ITextModelContentProvider {\n\tconstructor(\n\t\t@IClipboardService private readonly clipboardService: IClipboardService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IModelService private readonly modelService: IModelService\n\t) { }\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel> {\n\t\tconst text = await this.clipboardService.readText();\n\t\tconst model = this.modelService.createModel(text, this.languageService.createByFilepathOrFirstLine(resource), resource);\n\n\t\treturn model;\n\t}\n}\n\nfunction onErrorWithRetry(notificationService: INotificationService, error: unknown, retry: () => Promise<unknown>): void {\n\tnotificationService.prompt(Severity.Error, toErrorMessage(error, false),\n\t\t[{\n\t\t\tlabel: nls.localize('retry', \"Retry\"),\n\t\t\trun: () => retry()\n\t\t}]\n\t);\n}\n\nasync function openExplorerAndCreate(accessor: ServicesAccessor, isFolder: boolean): Promise<void> {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst fileService = accessor.get(IFileService);\n\tconst configService = accessor.get(IConfigurationService);\n\tconst filesConfigService = accessor.get(IFilesConfigurationService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst viewsService = accessor.get(IViewsService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst remoteAgentService = accessor.get(IRemoteAgentService);\n\tconst commandService = accessor.get(ICommandService);\n\tconst pathService = accessor.get(IPathService);\n\n\tconst wasHidden = !viewsService.isViewVisible(VIEW_ID);\n\tconst view = await viewsService.openView(VIEW_ID, true);\n\tif (wasHidden) {\n\t\t// Give explorer some time to resolve itself #111218\n\t\tawait timeout(500);\n\t}\n\tif (!view) {\n\t\t// Can happen in empty workspace case (https://github.com/microsoft/vscode/issues/100604)\n\n\t\tif (isFolder) {\n\t\t\tthrow new Error('Open a folder or workspace first.');\n\t\t}\n\n\t\treturn commandService.executeCommand(NEW_UNTITLED_FILE_COMMAND_ID);\n\t}\n\n\tconst stats = explorerService.getContext(false);\n\tconst stat = stats.length > 0 ? stats[0] : undefined;\n\tlet folder: ExplorerItem;\n\tif (stat) {\n\t\tfolder = stat.isDirectory ? stat : (stat.parent || explorerService.roots[0]);\n\t} else {\n\t\tfolder = explorerService.roots[0];\n\t}\n\n\tif (folder.isReadonly) {\n\t\tthrow new Error('Parent folder is readonly.');\n\t}\n\n\tconst newStat = new NewExplorerItem(fileService, configService, filesConfigService, folder, isFolder);\n\tfolder.addChild(newStat);\n\n\tconst onSuccess = async (value: string): Promise<void> => {\n\t\ttry {\n\t\t\tconst resourceToCreate = resources.joinPath(folder.resource, value);\n\t\t\tif (value.endsWith('/')) {\n\t\t\t\tisFolder = true;\n\t\t\t}\n\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(undefined, resourceToCreate, { folder: isFolder })], {\n\t\t\t\tundoLabel: nls.localize('createBulkEdit', \"Create {0}\", value),\n\t\t\t\tprogressLabel: nls.localize('creatingBulkEdit', \"Creating {0}\", value),\n\t\t\t\tconfirmBeforeUndo: true\n\t\t\t});\n\t\t\tawait refreshIfSeparator(value, explorerService);\n\n\t\t\tif (isFolder) {\n\t\t\t\tawait explorerService.select(resourceToCreate, true);\n\t\t\t} else {\n\t\t\t\tawait editorService.openEditor({ resource: resourceToCreate, options: { pinned: true } });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tonErrorWithRetry(notificationService, error, () => onSuccess(value));\n\t\t}\n\t};\n\n\tconst os = (await remoteAgentService.getEnvironment())?.os ?? OS;\n\n\tawait explorerService.setEditable(newStat, {\n\t\tvalidationMessage: value => validateFileName(pathService, newStat, value, os),\n\t\tonFinish: async (value, success) => {\n\t\t\tfolder.removeChild(newStat);\n\t\t\tawait explorerService.setEditable(newStat, null);\n\t\t\tif (success) {\n\t\t\t\tonSuccess(value);\n\t\t\t}\n\t\t}\n\t});\n}\n\nCommandsRegistry.registerCommand({\n\tid: NEW_FILE_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tawait openExplorerAndCreate(accessor, false);\n\t}\n});\n\nCommandsRegistry.registerCommand({\n\tid: NEW_FOLDER_COMMAND_ID,\n\thandler: async (accessor) => {\n\t\tawait openExplorerAndCreate(accessor, true);\n\t}\n});\n\nexport const renameHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst remoteAgentService = accessor.get(IRemoteAgentService);\n\tconst pathService = accessor.get(IPathService);\n\tconst configurationService = accessor.get(IConfigurationService);\n\n\tconst stats = explorerService.getContext(false);\n\tconst stat = stats.length > 0 ? stats[0] : undefined;\n\tif (!stat) {\n\t\treturn;\n\t}\n\n\tconst os = (await remoteAgentService.getEnvironment())?.os ?? OS;\n\n\tawait explorerService.setEditable(stat, {\n\t\tvalidationMessage: value => validateFileName(pathService, stat, value, os),\n\t\tonFinish: async (value, success) => {\n\t\t\tif (success) {\n\t\t\t\tconst parentResource = stat.parent!.resource;\n\t\t\t\tconst targetResource = resources.joinPath(parentResource, value);\n\t\t\t\tif (stat.resource.toString() !== targetResource.toString()) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait explorerService.applyBulkEdit([new ResourceFileEdit(stat.resource, targetResource)], {\n\t\t\t\t\t\t\tconfirmBeforeUndo: configurationService.getValue<IFilesConfiguration>().explorer.confirmUndo === UndoConfirmLevel.Verbose,\n\t\t\t\t\t\t\tundoLabel: nls.localize('renameBulkEdit', \"Rename {0} to {1}\", stat.name, value),\n\t\t\t\t\t\t\tprogressLabel: nls.localize('renamingBulkEdit', \"Renaming {0} to {1}\", stat.name, value),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait refreshIfSeparator(value, explorerService);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tnotificationService.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait explorerService.setEditable(stat, null);\n\t\t}\n\t});\n};\n\nexport const moveFileToTrashHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true).filter(s => !s.isRoot);\n\tif (stats.length) {\n\t\tawait deleteFiles(accessor.get(IExplorerService), accessor.get(IWorkingCopyFileService), accessor.get(IDialogService), accessor.get(IConfigurationService), accessor.get(IFilesConfigurationService), stats, true);\n\t}\n};\n\nexport const deleteFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true).filter(s => !s.isRoot);\n\n\tif (stats.length) {\n\t\tawait deleteFiles(accessor.get(IExplorerService), accessor.get(IWorkingCopyFileService), accessor.get(IDialogService), accessor.get(IConfigurationService), accessor.get(IFilesConfigurationService), stats, false);\n\t}\n};\n\nlet pasteShouldMove = false;\nexport const copyFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\tif (stats.length > 0) {\n\t\tawait explorerService.setToCopy(stats, false);\n\t\tpasteShouldMove = false;\n\t}\n};\n\nexport const cutFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\tif (stats.length > 0) {\n\t\tawait explorerService.setToCopy(stats, true);\n\t\tpasteShouldMove = true;\n\t}\n};\n\nconst downloadFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst instantiationService = accessor.get(IInstantiationService);\n\n\tconst context = explorerService.getContext(true);\n\tconst explorerItems = context.length ? context : explorerService.roots;\n\n\tconst downloadHandler = instantiationService.createInstance(FileDownload);\n\n\ttry {\n\t\tawait downloadHandler.download(explorerItems);\n\t} catch (error) {\n\t\tnotificationService.error(error);\n\n\t\tthrow error;\n\t}\n};\n\nCommandsRegistry.registerCommand({\n\tid: DOWNLOAD_COMMAND_ID,\n\thandler: downloadFileHandler\n});\n\nconst uploadFileHandler = async (accessor: ServicesAccessor) => {\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst instantiationService = accessor.get(IInstantiationService);\n\n\tconst context = explorerService.getContext(false);\n\tconst element = context.length ? context[0] : explorerService.roots[0];\n\n\ttry {\n\t\tconst files = await triggerUpload();\n\t\tif (files) {\n\t\t\tconst browserUpload = instantiationService.createInstance(BrowserFileUpload);\n\t\t\tawait browserUpload.upload(element, files);\n\t\t}\n\t} catch (error) {\n\t\tnotificationService.error(error);\n\n\t\tthrow error;\n\t}\n};\n\nCommandsRegistry.registerCommand({\n\tid: UPLOAD_COMMAND_ID,\n\thandler: uploadFileHandler\n});\n\nexport const pasteFileHandler = async (accessor: ServicesAccessor, fileList?: FileList) => {\n\tconst clipboardService = accessor.get(IClipboardService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst fileService = accessor.get(IFileService);\n\tconst notificationService = accessor.get(INotificationService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst uriIdentityService = accessor.get(IUriIdentityService);\n\tconst dialogService = accessor.get(IDialogService);\n\tconst hostService = accessor.get(IHostService);\n\n\tconst context = explorerService.getContext(false);\n\tconst hasNativeFilesToPaste = fileList && fileList.length > 0;\n\tconst confirmPasteNative = hasNativeFilesToPaste && configurationService.getValue<boolean>('explorer.confirmPasteNative');\n\n\tconst toPaste = await getFilesToPaste(fileList, clipboardService, hostService);\n\n\tif (confirmPasteNative && toPaste.files.length >= 1) {\n\t\tconst message = toPaste.files.length > 1 ?\n\t\t\tnls.localize('confirmMultiPasteNative', \"Are you sure you want to paste the following {0} items?\", toPaste.files.length) :\n\t\t\tnls.localize('confirmPasteNative', \"Are you sure you want to paste '{0}'?\", basename(toPaste.type === 'paths' ? toPaste.files[0].fsPath : toPaste.files[0].name));\n\t\tconst detail = toPaste.files.length > 1 ? getFileNamesMessage(toPaste.files.map(item => {\n\t\t\tif (URI.isUri(item)) {\n\t\t\t\treturn item.fsPath;\n\t\t\t}\n\n\t\t\tif (toPaste.type === 'paths') {\n\t\t\t\tconst path = getPathForFile(item);\n\t\t\t\tif (path) {\n\t\t\t\t\treturn path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn item.name;\n\t\t})) : undefined;\n\t\tconst confirmation = await dialogService.confirm({\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tcheckbox: {\n\t\t\t\tlabel: nls.localize('doNotAskAgain', \"Do not ask me again\")\n\t\t\t},\n\t\t\tprimaryButton: nls.localize({ key: 'pasteButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Paste\")\n\t\t});\n\n\t\tif (!confirmation.confirmed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check for confirmation checkbox\n\t\tif (confirmation.checkboxChecked === true) {\n\t\t\tawait configurationService.updateValue('explorer.confirmPasteNative', false);\n\t\t}\n\t}\n\tconst element = context.length ? context[0] : explorerService.roots[0];\n\tconst incrementalNaming = configurationService.getValue<IFilesConfiguration>().explorer.incrementalNaming;\n\n\tconst editableItem = explorerService.getEditable();\n\t// If it's an editable item, just do nothing\n\tif (editableItem) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tlet targets: URI[] = [];\n\n\t\tif (toPaste.type === 'paths') { // Pasting from files on disk\n\n\t\t\t// Check if target is ancestor of pasted folder\n\t\t\tconst sourceTargetPairs = coalesce(await Promise.all(toPaste.files.map(async fileToPaste => {\n\t\t\t\tif (element.resource.toString() !== fileToPaste.toString() && resources.isEqualOrParent(element.resource, fileToPaste)) {\n\t\t\t\t\tthrow new Error(nls.localize('fileIsAncestor', \"File to paste is an ancestor of the destination folder\"));\n\t\t\t\t}\n\t\t\t\tconst fileToPasteStat = await fileService.stat(fileToPaste);\n\n\t\t\t\t// Find target\n\t\t\t\tlet target: ExplorerItem;\n\t\t\t\tif (uriIdentityService.extUri.isEqual(element.resource, fileToPaste)) {\n\t\t\t\t\ttarget = element.parent!;\n\t\t\t\t} else {\n\t\t\t\t\ttarget = element.isDirectory ? element : element.parent!;\n\t\t\t\t}\n\n\t\t\t\tconst targetFile = await findValidPasteFileTarget(\n\t\t\t\t\texplorerService,\n\t\t\t\t\tfileService,\n\t\t\t\t\tdialogService,\n\t\t\t\t\ttarget,\n\t\t\t\t\t{ resource: fileToPaste, isDirectory: fileToPasteStat.isDirectory, allowOverwrite: pasteShouldMove || incrementalNaming === 'disabled' },\n\t\t\t\t\tincrementalNaming\n\t\t\t\t);\n\n\t\t\t\tif (!targetFile) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\treturn { source: fileToPaste, target: targetFile };\n\t\t\t})));\n\n\t\t\tif (sourceTargetPairs.length >= 1) {\n\t\t\t\t// Move/Copy File\n\t\t\t\tif (pasteShouldMove) {\n\t\t\t\t\tconst resourceFileEdits = sourceTargetPairs.map(pair => new ResourceFileEdit(pair.source, pair.target, { overwrite: incrementalNaming === 'disabled' }));\n\t\t\t\t\tconst options = {\n\t\t\t\t\t\tconfirmBeforeUndo: configurationService.getValue<IFilesConfiguration>().explorer.confirmUndo === UndoConfirmLevel.Verbose,\n\t\t\t\t\t\tprogressLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'movingBulkEdit', comment: ['Placeholder will be replaced by the number of files being moved'] }, \"Moving {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t\t: nls.localize({ key: 'movingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file moved.'] }, \"Moving {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target)),\n\t\t\t\t\t\tundoLabel: sourceTargetPairs.length > 1 ? nls.localize({ key: 'moveBulkEdit', comment: ['Placeholder will be replaced by the number of files being moved'] }, \"Move {0} files\", sourceTargetPairs.length)\n\t\t\t\t\t\t\t: nls.localize({ key: 'moveFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file moved.'] }, \"Move {0}\", resources.basenameOrAuthority(sourceTargetPairs[0].target))\n\t\t\t\t\t};\n\t\t\t\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t\t\t\t} else {\n\t\t\t\t\tconst resourceFileEdits = sourceTargetPairs.map(pair => new ResourceFileEdit(pair.source, pair.target, { copy: true, overwrite: incrementalNaming === 'disabled' }));\n\t\t\t\t\tawait applyCopyResourceEdit(sourceTargetPairs.map(pair => pair.target), resourceFileEdits);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttargets = sourceTargetPairs.map(pair => pair.target);\n\n\t\t} else { // Pasting from file data\n\t\t\tconst targetAndEdits = coalesce(await Promise.all(toPaste.files.map(async file => {\n\t\t\t\tconst target = element.isDirectory ? element : element.parent!;\n\n\t\t\t\tconst targetFile = await findValidPasteFileTarget(\n\t\t\t\t\texplorerService,\n\t\t\t\t\tfileService,\n\t\t\t\t\tdialogService,\n\t\t\t\t\ttarget,\n\t\t\t\t\t{ resource: file.name, isDirectory: false, allowOverwrite: pasteShouldMove || incrementalNaming === 'disabled' },\n\t\t\t\t\tincrementalNaming\n\t\t\t\t);\n\t\t\t\tif (!targetFile) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttarget: targetFile,\n\t\t\t\t\tedit: new ResourceFileEdit(undefined, targetFile, {\n\t\t\t\t\t\toverwrite: incrementalNaming === 'disabled',\n\t\t\t\t\t\tcontents: (async () => VSBuffer.wrap(new Uint8Array(await file.arrayBuffer())))(),\n\t\t\t\t\t})\n\t\t\t\t};\n\t\t\t})));\n\n\t\t\tawait applyCopyResourceEdit(targetAndEdits.map(pair => pair.target), targetAndEdits.map(pair => pair.edit));\n\t\t\ttargets = targetAndEdits.map(pair => pair.target);\n\t\t}\n\n\t\tif (targets.length) {\n\t\t\tconst firstTarget = targets[0];\n\t\t\tawait explorerService.select(firstTarget);\n\t\t\tif (targets.length === 1) {\n\t\t\t\tconst item = explorerService.findClosest(firstTarget);\n\t\t\t\tif (item && !item.isDirectory) {\n\t\t\t\t\tawait editorService.openEditor({ resource: item.resource, options: { pinned: true, preserveFocus: true } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tnotificationService.error(toErrorMessage(new Error(nls.localize('fileDeleted', \"The file(s) to paste have been deleted or moved since you copied them. {0}\", getErrorMessage(e))), false));\n\t} finally {\n\t\tif (pasteShouldMove) {\n\t\t\t// Cut is done. Make sure to clear cut state.\n\t\t\tawait explorerService.setToCopy([], false);\n\t\t\tpasteShouldMove = false;\n\t\t}\n\t}\n\n\tasync function applyCopyResourceEdit(targets: readonly URI[], resourceFileEdits: ResourceFileEdit[]) {\n\t\tconst undoLevel = configurationService.getValue<IFilesConfiguration>().explorer.confirmUndo;\n\t\tconst options = {\n\t\t\tconfirmBeforeUndo: undoLevel === UndoConfirmLevel.Default || undoLevel === UndoConfirmLevel.Verbose,\n\t\t\tprogressLabel: targets.length > 1 ? nls.localize({ key: 'copyingBulkEdit', comment: ['Placeholder will be replaced by the number of files being copied'] }, \"Copying {0} files\", targets.length)\n\t\t\t\t: nls.localize({ key: 'copyingFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file copied.'] }, \"Copying {0}\", resources.basenameOrAuthority(targets[0])),\n\t\t\tundoLabel: targets.length > 1 ? nls.localize({ key: 'copyBulkEdit', comment: ['Placeholder will be replaced by the number of files being copied'] }, \"Paste {0} files\", targets.length)\n\t\t\t\t: nls.localize({ key: 'copyFileBulkEdit', comment: ['Placeholder will be replaced by the name of the file copied.'] }, \"Paste {0}\", resources.basenameOrAuthority(targets[0]))\n\t\t};\n\t\tawait explorerService.applyBulkEdit(resourceFileEdits, options);\n\t}\n};\n\ntype FilesToPaste =\n\t| { type: 'paths'; files: URI[] }\n\t| { type: 'data'; files: File[] };\n\nasync function getFilesToPaste(fileList: FileList | undefined, clipboardService: IClipboardService, hostService: IHostService): Promise<FilesToPaste> {\n\tif (fileList && fileList.length > 0) {\n\t\t// with a `fileList` we support natively pasting file from disk from clipboard\n\t\tconst resources = [...fileList].map(file => getPathForFile(file)).filter(filePath => !!filePath && isAbsolute(filePath)).map((filePath) => URI.file(filePath!));\n\t\tif (resources.length) {\n\t\t\treturn { type: 'paths', files: resources, };\n\t\t}\n\n\t\t// Support pasting files that we can't read from disk\n\t\treturn { type: 'data', files: [...fileList].filter(file => !getPathForFile(file)) };\n\t} else {\n\t\t// otherwise we fallback to reading resources from our clipboard service\n\t\treturn { type: 'paths', files: resources.distinctParents(await clipboardService.readResources(), resource => resource) };\n\t}\n}\n\nexport const openFilePreserveFocusHandler = async (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst explorerService = accessor.get(IExplorerService);\n\tconst stats = explorerService.getContext(true);\n\n\tawait editorService.openEditors(stats.filter(s => !s.isDirectory).map(s => ({\n\t\tresource: s.resource,\n\t\toptions: { preserveFocus: true }\n\t})));\n};\n\nclass BaseSetActiveEditorReadonlyInSession extends Action2 {\n\n\tconstructor(\n\t\tid: string,\n\t\ttitle: ILocalizedString,\n\t\tprivate readonly newReadonlyState: true | false | 'toggle' | 'reset'\n\t) {\n\t\tsuper({\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tf1: true,\n\t\t\tcategory: Categories.File,\n\t\t\tprecondition: ActiveEditorCanToggleReadonlyContext\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst filesConfigurationService = accessor.get(IFilesConfigurationService);\n\n\t\tconst fileResource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (!fileResource) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait filesConfigurationService.updateReadonly(fileResource, this.newReadonlyState);\n\t}\n}\n\nexport class SetActiveEditorReadonlyInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.setActiveEditorReadonlyInSession';\n\tstatic readonly LABEL = nls.localize2('setActiveEditorReadonlyInSession', \"Set Active Editor Read-only in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tSetActiveEditorReadonlyInSession.ID,\n\t\t\tSetActiveEditorReadonlyInSession.LABEL,\n\t\t\ttrue\n\t\t);\n\t}\n}\n\nexport class SetActiveEditorWriteableInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.setActiveEditorWriteableInSession';\n\tstatic readonly LABEL = nls.localize2('setActiveEditorWriteableInSession', \"Set Active Editor Writeable in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tSetActiveEditorWriteableInSession.ID,\n\t\t\tSetActiveEditorWriteableInSession.LABEL,\n\t\t\tfalse\n\t\t);\n\t}\n}\n\nexport class ToggleActiveEditorReadonlyInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.toggleActiveEditorReadonlyInSession';\n\tstatic readonly LABEL = nls.localize2('toggleActiveEditorReadonlyInSession', \"Toggle Active Editor Read-only in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tToggleActiveEditorReadonlyInSession.ID,\n\t\t\tToggleActiveEditorReadonlyInSession.LABEL,\n\t\t\t'toggle'\n\t\t);\n\t}\n}\n\nexport class ResetActiveEditorReadonlyInSession extends BaseSetActiveEditorReadonlyInSession {\n\n\tstatic readonly ID = 'workbench.action.files.resetActiveEditorReadonlyInSession';\n\tstatic readonly LABEL = nls.localize2('resetActiveEditorReadonlyInSession', \"Reset Active Editor Read-only in Session\");\n\n\tconstructor() {\n\t\tsuper(\n\t\t\tResetActiveEditorReadonlyInSession.ID,\n\t\t\tResetActiveEditorReadonlyInSession.LABEL,\n\t\t\t'reset'\n\t\t);\n\t}\n}\n"]}