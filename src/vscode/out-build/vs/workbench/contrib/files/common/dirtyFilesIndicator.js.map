{"version":3,"sources":["vs/workbench/contrib/files/common/dirtyFilesIndicator.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,oBAAoB,CAAC;AAE1C,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AACxC,OAAO,EAAE,UAAU,EAAE,iBAAiB,EAAE,MAAM,sCAAsC,CAAC;AACrF,OAAO,EAAE,gBAAgB,EAAE,WAAW,EAAE,MAAM,+CAA+C,CAAC;AAC9F,OAAO,EAAE,mBAAmB,EAAE,MAAM,4DAA4D,CAAC;AAEjG,OAAO,EAAE,0BAA0B,EAAE,MAAM,0EAA0E,CAAC;AAE/G,IAAM,mBAAmB,GAAzB,MAAM,mBAAoB,SAAQ,UAAU;aAElC,OAAE,GAAG,uCAAH,AAA0C,CAAC;IAM7D,YACmB,eAAkD,EAC/C,kBAAwD,EACjD,yBAAsE;QAElG,KAAK,EAAE,CAAC;QAJ2B,oBAAe,GAAf,eAAe,CAAkB;QAC9B,uBAAkB,GAAlB,kBAAkB,CAAqB;QAChC,8BAAyB,GAAzB,yBAAyB,CAA4B;QAPlF,gBAAW,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,iBAAiB,EAAE,CAAC,CAAC;QAE/D,wBAAmB,GAAG,CAAC,CAAC;QAS/B,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE3B,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC1B,CAAC;IAEO,iBAAiB;QAExB,+BAA+B;QAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,2BAA2B,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IACxH,CAAC;IAEO,2BAA2B,CAAC,WAAyB;QAC5D,MAAM,QAAQ,GAAG,WAAW,CAAC,OAAO,EAAE,CAAC;QACvC,IAAI,QAAQ,IAAI,CAAC,CAAC,WAAW,CAAC,YAAY,2CAAmC,CAAC,IAAI,IAAI,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,CAAC;YAC9J,OAAO,CAAC,gFAAgF;QACzF,CAAC;QAED,IAAI,QAAQ,IAAI,IAAI,CAAC,mBAAmB,GAAG,CAAC,EAAE,CAAC;YAC9C,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC5B,CAAC;IACF,CAAC;IAEO,mBAAmB;QAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC;QAEjF,uCAAuC;QACvC,IAAI,UAAU,GAAG,CAAC,EAAE,CAAC;YACpB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,yBAAyB,CACtE,UAAU,EACV;gBACC,KAAK,EAAE,IAAI,WAAW,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAW,EAAE,IAAgB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAY,EAAE,IAAmB,EAAE,UAAU,CAAC,CAAC;aAChK,CACD,CAAC;QACH,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;QAC1B,CAAC;IACF,CAAC;;AAnDW,mBAAmB;IAS7B,WAAA,gBAAgB,CAAA;IAChB,WAAA,mBAAmB,CAAA;IACnB,WAAA,0BAA0B,CAAA;GAXhB,mBAAmB,CAoD/B","file":"dirtyFilesIndicator.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { VIEWLET_ID } from './files.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IWorkingCopyService } from '../../../services/workingCopy/common/workingCopyService.js';\nimport { IWorkingCopy, WorkingCopyCapabilities } from '../../../services/workingCopy/common/workingCopy.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\n\nexport class DirtyFilesIndicator extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.dirtyFilesIndicator';\n\n\tprivate readonly badgeHandle = this._register(new MutableDisposable());\n\n\tprivate lastKnownDirtyCount = 0;\n\n\tconstructor(\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IWorkingCopyService private readonly workingCopyService: IWorkingCopyService,\n\t\t@IFilesConfigurationService private readonly filesConfigurationService: IFilesConfigurationService\n\t) {\n\t\tsuper();\n\n\t\tthis.updateActivityBadge();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Working copy dirty indicator\n\t\tthis._register(this.workingCopyService.onDidChangeDirty(workingCopy => this.onWorkingCopyDidChangeDirty(workingCopy)));\n\t}\n\n\tprivate onWorkingCopyDidChangeDirty(workingCopy: IWorkingCopy): void {\n\t\tconst gotDirty = workingCopy.isDirty();\n\t\tif (gotDirty && !(workingCopy.capabilities & WorkingCopyCapabilities.Untitled) && this.filesConfigurationService.hasShortAutoSaveDelay(workingCopy.resource)) {\n\t\t\treturn; // do not indicate dirty of working copies that are auto saved after short delay\n\t\t}\n\n\t\tif (gotDirty || this.lastKnownDirtyCount > 0) {\n\t\t\tthis.updateActivityBadge();\n\t\t}\n\t}\n\n\tprivate updateActivityBadge(): void {\n\t\tconst dirtyCount = this.lastKnownDirtyCount = this.workingCopyService.dirtyCount;\n\n\t\t// Indicate dirty count in badge if any\n\t\tif (dirtyCount > 0) {\n\t\t\tthis.badgeHandle.value = this.activityService.showViewContainerActivity(\n\t\t\t\tVIEWLET_ID,\n\t\t\t\t{\n\t\t\t\t\tbadge: new NumberBadge(dirtyCount, num => num === 1 ? nls.localize('dirtyFile', \"1 unsaved file\") : nls.localize('dirtyFiles', \"{0} unsaved files\", dirtyCount)),\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tthis.badgeHandle.clear();\n\t\t}\n\t}\n}\n"]}