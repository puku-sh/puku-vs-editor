{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/chatAgentTools/test/electron-browser/treeSitterCommandParser.test.ts","vs/workbench/contrib/terminalContrib/chatAgentTools/test/electron-browser/treeSitterCommandParser.test.ts"],"names":[],"mappings":"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","file":"treeSitterCommandParser.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual } from 'assert';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ITreeSitterLibraryService } from '../../../../../../editor/common/services/treeSitter/treeSitterLibraryService.js';\nimport { FileService } from '../../../../../../platform/files/common/fileService.js';\nimport type { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { TreeSitterLibraryService } from '../../../../../services/treeSitter/browser/treeSitterLibraryService.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { TestIPCFileSystemProvider } from '../../../../../test/electron-browser/workbenchTestServices.js';\nimport { TreeSitterCommandParser, TreeSitterCommandParserLanguage } from '../../browser/treeSitterCommandParser.js';\n\nsuite('TreeSitterCommandParser', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet parser: TreeSitterCommandParser;\n\n\tsetup(() => {\n\t\tconst fileService = store.add(new FileService(new NullLogService()));\n\t\tconst fileSystemProvider = new TestIPCFileSystemProvider();\n\t\tstore.add(fileService.registerProvider(Schemas.file, fileSystemProvider));\n\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tfileService: () => fileService,\n\t\t}, store);\n\n\t\tconst treeSitterLibraryService = store.add(instantiationService.createInstance(TreeSitterLibraryService));\n\t\ttreeSitterLibraryService.isTest = true;\n\t\tinstantiationService.stub(ITreeSitterLibraryService, treeSitterLibraryService);\n\n\t\tparser = store.add(instantiationService.createInstance(TreeSitterCommandParser));\n\t});\n\n\tsuite('extractSubCommands', () => {\n\t\tsuite('bash', () => {\n\t\t\tasync function t(commandLine: string, expectedCommands: string[]) {\n\t\t\t\tconst result = await parser.extractSubCommands(TreeSitterCommandParserLanguage.Bash, commandLine);\n\t\t\t\tdeepStrictEqual(result, expectedCommands);\n\t\t\t}\n\n\t\t\ttest('simple commands', () => t('ls -la', ['ls -la']));\n\t\t\ttest('commands with &&', () => t('echo hello && ls -la', ['echo hello', 'ls -la']));\n\t\t\ttest('commands with ||', () => t('test -f file.txt || touch file.txt', ['test -f file.txt', 'touch file.txt']));\n\t\t\ttest('commands with semicolons', () => t('cd /tmp; ls; pwd', ['cd /tmp', 'ls', 'pwd']));\n\t\t\ttest('pipe chains', () => t('cat file.txt | grep pattern | sort | uniq', ['cat file.txt', 'grep pattern', 'sort', 'uniq']));\n\t\t\ttest('commands with subshells', () => t('echo $(date +%Y) && ls', ['echo $(date +%Y)', 'date +%Y', 'ls']));\n\t\t\ttest('complex quoting', () => t('echo \"hello && world\" && echo \\'test\\'', ['echo \"hello && world\"', 'echo \\'test\\'']));\n\t\t\ttest('escaped characters', () => t('echo hello\\\\ world && ls', ['echo hello\\\\ world', 'ls']));\n\t\t\ttest('background commands', () => t('sleep 10 & echo done', ['sleep 10', 'echo done']));\n\t\t\ttest('variable assignments', () => t('VAR=value command1 && echo $VAR', ['VAR=value command1', 'echo $VAR']));\n\t\t\ttest('redirections', () => t('echo hello > file.txt && cat < file.txt', ['echo hello', 'cat']));\n\t\t\ttest('arithmetic expansion', () => t('echo $((1 + 2)) && ls', ['echo $((1 + 2))', 'ls']));\n\t\t\ttest('nested command substitution', () => t('echo $(cat $(echo file.txt)) && ls', ['echo $(cat $(echo file.txt))', 'cat $(echo file.txt)', 'echo file.txt', 'ls']));\n\t\t\ttest('mixed operators', () => t('cmd1 && cmd2 || cmd3; cmd4 | cmd5 & cmd6', ['cmd1', 'cmd2', 'cmd3', 'cmd4', 'cmd5', 'cmd6']));\n\t\t\ttest('parameter expansion', () => t('echo ${VAR:-default} && echo ${#VAR}', ['echo ${VAR:-default}', 'echo ${#VAR}']));\n\t\t\ttest('process substitution', () => t('diff <(sort file1) <(sort file2) && echo done', ['diff <(sort file1) <(sort file2)', 'sort file1', 'sort file2', 'echo done']));\n\t\t\ttest('brace expansion', () => t('echo {a,b,c}.txt && ls', ['echo {a,b,c}.txt', 'ls']));\n\t\t\ttest('tilde expansion', () => t('cd ~/Documents && ls ~/.bashrc', ['cd ~/Documents', 'ls ~/.bashrc']));\n\n\t\t\tsuite('control flow and structures', () => {\n\t\t\t\ttest('if-then-else', () => t('if [ -f file.txt ]; then cat file.txt; else echo \"not found\"; fi', ['cat file.txt', 'echo \"not found\"']));\n\t\t\t\ttest('simple iteration', () => t('for file in *.txt; do cat \"$file\"; done', ['cat \"$file\"']));\n\t\t\t\ttest('function declaration and call', () => t('function test_func() { echo \"inside function\"; } && test_func', ['echo \"inside function\"', 'test_func']));\n\t\t\t\ttest('heredoc with commands', () => t('cat << EOF\\nhello\\nworld\\nEOF\\necho done', ['cat', 'echo done']));\n\t\t\t\ttest('while loop', () => t('while read line; do echo \"$line\"; done < file.txt', ['read line', 'echo \"$line\"']));\n\t\t\t\ttest('case statement', () => t('case $var in pattern1) echo \"match1\" ;; pattern2) echo \"match2\" ;; esac', ['echo \"match1\"', 'echo \"match2\"']));\n\t\t\t\ttest('until loop', () => t('until [ -f ready.txt ]; do sleep 1; done && echo ready', ['sleep 1', 'echo ready']));\n\t\t\t\ttest('nested conditionals', () => t('if [ -f file ]; then if [ -r file ]; then cat file; fi; fi', ['cat file']));\n\t\t\t\ttest('test command alternatives', () => t('[[ -f file ]] && cat file || echo missing', ['cat file', 'echo missing']));\n\t\t\t});\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('malformed syntax', () => t('echo \"unclosed quote && ls', ['echo']));\n\t\t\t\ttest('unmatched parentheses', () => t('echo $(missing closing && ls', ['echo $(missing closing && ls', 'missing closing', 'ls']));\n\t\t\t\ttest('very long command lines', () => t('echo ' + 'a'.repeat(10000) + ' && ls', ['echo ' + 'a'.repeat(10000), 'ls']));\n\t\t\t\ttest('special characters', () => t('echo \"Ï€Î»Î±Ï‚Îµ æµ‹è¯• ðŸš€\" && ls', ['echo \"Ï€Î»Î±Ï‚Îµ æµ‹è¯• ðŸš€\"', 'ls']));\n\t\t\t\ttest('multiline with continuations', () => t('echo hello \\\\\\n&& echo world \\\\\\n&& ls', ['echo hello', 'echo world', 'ls']));\n\t\t\t\ttest('commands with comments', () => t('echo hello # this is a comment\\nls # another comment', ['echo hello', 'ls']));\n\t\t\t\ttest('empty command in chain', () => t('echo hello && && echo world', ['echo hello', 'echo world']));\n\t\t\t\ttest('trailing operators', () => t('echo hello &&', ['echo hello', '']));\n\t\t\t\ttest('only operators', () => t('&& || ;', []));\n\t\t\t\ttest('nested quotes', () => t('echo \"outer \\\"inner\\\" outer\" && ls', ['echo \"outer \\\"inner\\\" outer\"', 'ls']));\n\t\t\t\ttest('incomplete escape sequences', () => t('echo hello\\\\ && ls', ['echo hello\\\\ ', 'ls']));\n\t\t\t\ttest('mixed quote types', () => t('echo \"hello \\`world\\`\" && echo \\'test\\'', ['echo \"hello \\`world\\`\"', 'world', 'echo \\'test\\'']));\n\t\t\t\ttest('deeply nested structures', () => t('echo $(echo $(echo $(echo nested))) && ls', ['echo $(echo $(echo $(echo nested)))', 'echo $(echo $(echo nested))', 'echo $(echo nested)', 'echo nested', 'ls']));\n\t\t\t\ttest('unicode command names', () => t('æµ‹è¯•å‘½ä»¤ && echo done', ['æµ‹è¯•å‘½ä»¤', 'echo done']));\n\t\t\t\ttest('multi-line', () => t('echo a\\necho b', ['echo a', 'echo b']));\n\t\t\t});\n\n\t\t\t// TODO: These should be common but the pwsh grammar doesn't handle && yet https://github.com/microsoft/vscode/issues/272704\n\t\t\tsuite('real-world scenarios', () => {\n\t\t\t\ttest('complex Docker commands', () => t('docker run -it --rm -v $(pwd):/app ubuntu:latest bash -c \"cd /app && npm install && npm test\"', ['docker run -it --rm -v $(pwd):/app ubuntu:latest bash -c \"cd /app && npm install && npm test\"', 'pwd']));\n\t\t\t\ttest('Git workflow commands', () => t('git add . && git commit -m \"Update feature\" && git push origin main', [\n\t\t\t\t\t'git add .',\n\t\t\t\t\t'git commit -m \"Update feature\"',\n\t\t\t\t\t'git push origin main'\n\t\t\t\t]));\n\t\t\t\ttest('npm/yarn workflow commands', () => t('npm ci && npm run build && npm test && npm run lint', [\n\t\t\t\t\t'npm ci',\n\t\t\t\t\t'npm run build',\n\t\t\t\t\t'npm test',\n\t\t\t\t\t'npm run lint'\n\t\t\t\t]));\n\t\t\t\ttest('build system commands', () => t('make clean && make -j$(nproc) && make install PREFIX=/usr/local', [\n\t\t\t\t\t'make clean',\n\t\t\t\t\t'make -j$(nproc)',\n\t\t\t\t\t'nproc',\n\t\t\t\t\t'make install PREFIX=/usr/local'\n\t\t\t\t]));\n\t\t\t\ttest('deployment script', () => t('rsync -avz --delete src/ user@server:/path/ && ssh user@server \"systemctl restart service\" && echo \"Deployed successfully\"', [\n\t\t\t\t\t'rsync -avz --delete src/ user@server:/path/',\n\t\t\t\t\t'ssh user@server \"systemctl restart service\"',\n\t\t\t\t\t'echo \"Deployed successfully\"'\n\t\t\t\t]));\n\t\t\t\ttest('database backup script', () => t('mysqldump -u user -p database > backup_$(date +%Y%m%d).sql && gzip backup_$(date +%Y%m%d).sql && echo \"Backup complete\"', [\n\t\t\t\t\t'mysqldump -u user -p database',\n\t\t\t\t\t'date +%Y%m%d',\n\t\t\t\t\t'gzip backup_$(date +%Y%m%d).sql',\n\t\t\t\t\t'date +%Y%m%d',\n\t\t\t\t\t'echo \"Backup complete\"'\n\t\t\t\t]));\n\t\t\t\ttest('log analysis pipeline', () => t('tail -f /var/log/app.log | grep ERROR | while read line; do echo \"$(date): $line\" >> error.log; done', [\n\t\t\t\t\t'tail -f /var/log/app.log',\n\t\t\t\t\t'grep ERROR',\n\t\t\t\t\t'read line',\n\t\t\t\t\t'echo \"$(date): $line\"',\n\t\t\t\t\t'date'\n\t\t\t\t]));\n\t\t\t\ttest('conditional installation', () => t('which docker || (curl -fsSL https://get.docker.com | sh && systemctl enable docker) && docker --version', [\n\t\t\t\t\t'which docker',\n\t\t\t\t\t'curl -fsSL https://get.docker.com',\n\t\t\t\t\t'sh',\n\t\t\t\t\t'systemctl enable docker',\n\t\t\t\t\t'docker --version'\n\t\t\t\t]));\n\t\t\t});\n\t\t});\n\n\t\tsuite('pwsh', () => {\n\t\t\tasync function t(commandLine: string, expectedCommands: string[]) {\n\t\t\t\tconst result = await parser.extractSubCommands(TreeSitterCommandParserLanguage.PowerShell, commandLine);\n\t\t\t\tdeepStrictEqual(result, expectedCommands);\n\t\t\t}\n\n\t\t\ttest('simple commands', () => t('Get-ChildItem -Path C:\\\\', ['Get-ChildItem -Path C:\\\\']));\n\t\t\ttest('commands with semicolons', () => t('Get-Date; Get-Location; Write-Host \"done\"', ['Get-Date', 'Get-Location', 'Write-Host \"done\"']));\n\t\t\ttest('pipeline commands', () => t('Get-Process | Where-Object {$_.CPU -gt 100} | Sort-Object CPU', ['Get-Process ', 'Where-Object {$_.CPU -gt 100} ', 'Sort-Object CPU']));\n\t\t\ttest('command substitution', () => t('Write-Host $(Get-Date) ; Get-Location', ['Write-Host $(Get-Date)', 'Get-Date', 'Get-Location']));\n\t\t\ttest('complex parameters', () => t('Get-ChildItem -Path \"C:\\\\Program Files\" -Recurse -Include \"*.exe\"', ['Get-ChildItem -Path \"C:\\\\Program Files\" -Recurse -Include \"*.exe\"']));\n\t\t\ttest('splatting', () => t('$params = @{Path=\"C:\\\\\"; Recurse=$true}; Get-ChildItem @params', ['Get-ChildItem @params']));\n\t\t\ttest('here-strings', () => t('Write-Host @\"\\nhello\\nworld\\n\"@ ; Get-Date', ['Write-Host @\"\\nhello\\nworld\\n\"@', 'Get-Date']));\n\t\t\ttest('method calls', () => t('\"hello\".ToUpper() ; Get-Date', ['Get-Date']));\n\t\t\ttest('complex quoting', () => t('Write-Host \"She said `\"Hello`\"\" ; Write-Host \\'Single quotes\\'', ['Write-Host \"She said `\"Hello`\"\"', 'Write-Host \\'Single quotes\\'']));\n\t\t\ttest('array operations', () => t('$arr = @(1,2,3); $arr | ForEach-Object { $_ * 2 }', ['ForEach-Object { $_ * 2 }']));\n\t\t\ttest('hashtable operations', () => t('$hash = @{key=\"value\"}; Write-Host $hash.key', ['Write-Host $hash.key']));\n\t\t\ttest('type casting', () => t('[int]\"123\" + [int]\"456\" ; Write-Host \"done\"', ['Write-Host \"done\"']));\n\t\t\ttest('regex operations', () => t('\"hello world\" -match \"w.*d\" ; Get-Date', ['Get-Date']));\n\t\t\ttest('comparison operators', () => t('5 -gt 3 -and \"hello\" -like \"h*\" ; Write-Host \"true\"', ['Write-Host \"true\"']));\n\t\t\ttest('null-conditional operators', () => t('$obj?.Property?.SubProperty ; Get-Date', ['Get-Date']));\n\t\t\ttest('string interpolation', () => t('$name=\"World\"; \"Hello $name\" ; Get-Date', ['Get-Date']));\n\t\t\ttest('expandable strings', () => t('$var=\"test\"; \"Value: $($var.ToUpper())\" ; Get-Date', ['Get-Date']));\n\n\t\t\tsuite('Control flow and structures', () => {\n\t\t\t\ttest('logical and', () => t('Test-Path \"file.txt\" -and Get-Content \"file.txt\"', ['Test-Path \"file.txt\" -and Get-Content \"file.txt\"']));\n\t\t\t\ttest('foreach with script block', () => t('ForEach-Object { Write-Host $_.Name } ; Get-Date', ['ForEach-Object { Write-Host $_.Name }', 'Write-Host $_.Name', 'Get-Date']));\n\t\t\t\ttest('if-else', () => t('if (Test-Path \"file.txt\") { Get-Content \"file.txt\" } else { Write-Host \"not found\" }', ['Test-Path \"file.txt\"', 'Get-Content \"file.txt\"', 'Write-Host \"not found\"']));\n\t\t\t\ttest('error handling', () => t('try { Get-Content \"file.txt\" } catch { Write-Error \"failed\" }', ['Get-Content \"file.txt\"', 'Write-Error \"failed\"']));\n\t\t\t\ttest('switch statement', () => t('switch ($var) { 1 { \"one\" } 2 { \"two\" } default { \"other\" } } ; Get-Date', ['Get-Date']));\n\t\t\t\ttest('do-while loop', () => t('do { Write-Host $i; $i++ } while ($i -lt 5) ; Get-Date', ['Write-Host $i', 'Get-Date']));\n\t\t\t\ttest('for loop', () => t('for ($i=0; $i -lt 5; $i++) { Write-Host $i } ; Get-Date', ['Write-Host $i', 'Get-Date']));\n\t\t\t\ttest('foreach loop with range', () => t('foreach ($i in 1..5) { Write-Host $i } ; Get-Date', ['1..5', 'Write-Host $i', 'Get-Date']));\n\t\t\t\ttest('break and continue', () => t('while ($true) { if ($condition) { break } ; Write-Host \"running\" } ; Get-Date', ['Write-Host \"running\"', 'Get-Date']));\n\t\t\t\ttest('nested try-catch-finally', () => t('try { try { Get-Content \"file\" } catch { throw } } catch { Write-Error \"outer\" } finally { Write-Host \"cleanup\" }', ['Get-Content \"file\"', 'Write-Error \"outer\"', 'Write-Host \"cleanup\"']));\n\t\t\t\ttest('parallel processing', () => t('1..10 | ForEach-Object -Parallel { Start-Sleep 1; Write-Host $_ } ; Get-Date', ['1..10 ', 'ForEach-Object -Parallel { Start-Sleep 1; Write-Host $_ }', 'Start-Sleep 1', 'Write-Host $_', 'Get-Date']));\n\t\t\t});\n\t\t});\n\n\t\tsuite('all shells', () => {\n\t\t\tasync function t(commandLine: string, expectedCommands: string[]) {\n\t\t\t\tfor (const shell of [TreeSitterCommandParserLanguage.Bash, TreeSitterCommandParserLanguage.PowerShell]) {\n\t\t\t\t\tconst result = await parser.extractSubCommands(shell, commandLine);\n\t\t\t\t\tdeepStrictEqual(result, expectedCommands);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('empty strings', () => t('', []));\n\t\t\t\ttest('whitespace-only strings', () => t('   \\n\\t  ', []));\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('extractPwshDoubleAmpersandChainOperators', () => {\n\t\tasync function t(commandLine: string, expectedMatches: string[]) {\n\t\t\tconst result = await parser.extractPwshDoubleAmpersandChainOperators(commandLine);\n\t\t\tconst actualMatches = result.map(capture => capture.node.text);\n\t\t\tdeepStrictEqual(actualMatches, expectedMatches);\n\t\t}\n\n\t\ttest('simple command with &&', () => t('Get-Date && Get-Location', ['&&']));\n\t\ttest('multiple && operators', () => t('echo first && echo second && echo third', ['&&', '&&']));\n\t\ttest('mixed operators - && and ;', () => t('echo hello && echo world ; echo done', ['&&']));\n\t\ttest('no && operators', () => t('Get-Date ; Get-Location', []));\n\t\ttest('&& in string literal should not match', () => t('Write-Host \"test && test\"', []));\n\t\ttest('&& in single quotes should not match', () => t('Write-Host \\'test && test\\'', []));\n\t\ttest('&& with complex commands', () => t('Get-ChildItem -Path C:\\\\ && Set-Location C:\\\\Users', ['&&']));\n\t\ttest('&& with parameters', () => t('Get-Process -Name notepad && Stop-Process -Name notepad', ['&&']));\n\t\ttest('&& with pipeline inside', () => t('Get-Process | Where-Object {$_.Name -eq \"notepad\"} && Write-Host \"Found\"', ['&&']));\n\t\ttest('nested && in script blocks', () => t('if ($true) { echo hello && echo world }', ['&&']));\n\t\ttest('&& with method calls', () => t('\"hello\".ToUpper() && \"world\".ToLower()', ['&&']));\n\t\ttest('&& with array operations', () => t('@(1,2,3) | ForEach-Object { $_ } && Write-Host \"done\"', ['&&']));\n\t\ttest('&& with hashtable', () => t('@{key=\"value\"} && Write-Host \"created\"', ['&&']));\n\t\ttest('&& with type casting', () => t('[int]\"123\" && [string]456', ['&&']));\n\t\ttest('&& with comparison operators', () => t('5 -gt 3 && \"hello\" -like \"h*\"', ['&&']));\n\t\ttest('&& with variable assignment', () => t('$var = \"test\" && Write-Host $var', ['&&']));\n\t\ttest('&& with expandable strings', () => t('$name=\"World\" && \"Hello $name\"', ['&&']));\n\t\ttest('&& with subexpressions', () => t('Write-Host $(Get-Date) && Get-Location', ['&&']));\n\t\ttest('&& with here-strings', () => t('Write-Host @\"\\nhello\\nworld\\n\"@ && Get-Date', ['&&']));\n\t\ttest('&& with splatting', () => t('$params = @{Path=\"C:\\\\\"}; Get-ChildItem @params && Write-Host \"done\"', ['&&']));\n\n\t\tsuite('complex scenarios', () => {\n\t\t\ttest('multiple && with different command types', () => t('Get-Service && Start-Service spooler && Get-Process', ['&&', '&&']));\n\t\t\ttest('&& with error handling', () => t('try { Get-Content \"file.txt\" && Write-Host \"success\" } catch { Write-Error \"failed\" }', ['&&']));\n\t\t\ttest('&& inside foreach', () => t('ForEach-Object { Write-Host $_.Name && Write-Host $_.Length }', ['&&']));\n\t\t\ttest('&& with conditional logic', () => t('if (Test-Path \"file.txt\") { Get-Content \"file.txt\" && Write-Host \"read\" }', ['&&']));\n\t\t\ttest('&& with switch statement', () => t('switch ($var) { 1 { \"one\" && \"first\" } 2 { \"two\" && \"second\" } }', ['&&', '&&']));\n\t\t\ttest('&& in do-while', () => t('do { Write-Host $i && $i++ } while ($i -lt 5)', ['&&']));\n\t\t\ttest('&& in for loop', () => t('for ($i=0; $i -lt 5; $i++) { Write-Host $i && Start-Sleep 1 }', ['&&']));\n\t\t\ttest('&& with parallel processing', () => t('1..10 | ForEach-Object -Parallel { Write-Host $_ && Start-Sleep 1 }', ['&&']));\n\t\t});\n\n\t\tsuite('edge cases', () => {\n\t\t\ttest('empty string', () => t('', []));\n\t\t\ttest('whitespace only', () => t('   \\n\\t  ', []));\n\t\t\ttest('triple &&&', () => t('echo hello &&& echo world', ['&&']));\n\t\t\ttest('spaced && operators', () => t('echo hello & & echo world', []));\n\t\t\ttest('&& with unicode', () => t('Write-Host \"æµ‹è¯•\" && Write-Host \"ðŸš€\"', ['&&']));\n\t\t\ttest('very long command with &&', () => t('Write-Host \"' + 'a'.repeat(1000) + '\" && Get-Date', ['&&']));\n\t\t\ttest('deeply nested with &&', () => t('if ($true) { if ($true) { if ($true) { echo nested && echo deep } } }', ['&&']));\n\t\t\ttest('&& with escaped characters', () => t('Write-Host \"hello`\"world\" && Get-Date', ['&&']));\n\t\t\ttest('&& with backticks', () => t('Write-Host `hello && Get-Date', ['&&']));\n\t\t});\n\n\t\tsuite('real-world scenarios', () => {\n\t\t\ttest('git workflow', () => t('git add . && git commit -m \"message\" && git push', ['&&', '&&']));\n\t\t\ttest('build and test', () => t('dotnet build && dotnet test && dotnet publish', ['&&', '&&']));\n\t\t\ttest('file operations', () => t('New-Item -Type File \"test.txt\" && Add-Content \"test.txt\" \"hello\" && Get-Content \"test.txt\"', ['&&', '&&']));\n\t\t\ttest('service management', () => t('Stop-Service spooler && Set-Service spooler -StartupType Manual && Start-Service spooler', ['&&', '&&']));\n\t\t\ttest('registry operations', () => t('New-Item -Path \"HKCU:\\\\Software\\\\Test\" && Set-ItemProperty -Path \"HKCU:\\\\Software\\\\Test\" -Name \"Value\" -Value \"Data\"', ['&&']));\n\t\t\ttest('module import and usage', () => t('Import-Module ActiveDirectory && Get-ADUser -Filter *', ['&&']));\n\t\t\ttest('remote operations', () => t('Enter-PSSession -ComputerName server && Get-Process && Exit-PSSession', ['&&', '&&']));\n\t\t\ttest('scheduled task', () => t('Register-ScheduledTask -TaskName \"MyTask\" -Action (New-ScheduledTaskAction -Execute \"powershell.exe\") && Start-ScheduledTask \"MyTask\"', ['&&']));\n\t\t});\n\t});\n\n\tsuite('getFileWrites', () => {\n\t\tsuite('bash', () => {\n\t\t\tasync function t(commandLine: string, expectedFiles: string[]) {\n\t\t\t\tconst actualFiles = await parser.getFileWrites(TreeSitterCommandParserLanguage.Bash, commandLine);\n\t\t\t\tdeepStrictEqual(actualFiles, expectedFiles);\n\t\t\t}\n\n\t\t\ttest('simple output redirection', () => t('echo hello > file.txt', ['file.txt']));\n\t\t\ttest('append redirection', () => t('echo hello >> file.txt', ['file.txt']));\n\t\t\ttest('multiple redirections', () => t('echo hello > file1.txt && echo world > file2.txt', ['file1.txt', 'file2.txt']));\n\t\t\ttest('error redirection', () => t('command 2> error.log', ['error.log']));\n\t\t\ttest('combined stdout and stderr', () => t('command > output.txt 2>&1', ['output.txt']));\n\t\t\ttest('here document', () => t('cat > file.txt << EOF\\nhello\\nworld\\nEOF', ['file.txt']));\n\t\t\ttest('quoted filenames', () => t('echo hello > \"file with spaces.txt\"', ['\"file with spaces.txt\"']));\n\t\t\ttest('single quoted filenames', () => t('echo hello > \\'file.txt\\'', ['\\'file.txt\\'']));\n\t\t\ttest('variable in filename', () => t('echo hello > $HOME/file.txt', ['$HOME/file.txt']));\n\t\t\ttest('command substitution in filename', () => t('echo hello > $(date +%Y%m%d).log', ['$(date +%Y%m%d).log']));\n\t\t\ttest('tilde expansion in filename', () => t('echo hello > ~/file.txt', ['~/file.txt']));\n\t\t\ttest('absolute path', () => t('echo hello > /tmp/file.txt', ['/tmp/file.txt']));\n\t\t\ttest('relative path', () => t('echo hello > ./output/file.txt', ['./output/file.txt']));\n\t\t\ttest('file descriptor redirection', () => t('command 3> file.txt', ['file.txt']));\n\t\t\ttest('redirection with numeric file descriptor', () => t('command 1> stdout.txt 2> stderr.txt', ['stdout.txt', 'stderr.txt']));\n\t\t\ttest('append with error redirection', () => t('command >> output.log 2>> error.log', ['output.log', 'error.log']));\n\n\t\t\tsuite('complex scenarios', () => {\n\t\t\t\ttest('multiple commands with redirections', () => t('echo first > file1.txt; echo second > file2.txt; echo third > file3.txt', ['file1.txt', 'file2.txt', 'file3.txt']));\n\t\t\t\ttest('pipeline with redirection', () => t('cat input.txt | grep pattern > output.txt', ['output.txt']));\n\t\t\t\ttest('redirection in subshell', () => t('(echo hello; echo world) > combined.txt', ['combined.txt']));\n\t\t\t\ttest('redirection with background job', () => t('long_command > output.txt &', ['output.txt']));\n\t\t\t\ttest('conditional redirection', () => t('test -f input.txt && cat input.txt > output.txt || echo \"not found\" > error.txt', ['output.txt', 'error.txt']));\n\t\t\t\ttest('loop with redirection', () => t('for file in *.txt; do cat \"$file\" >> combined.txt; done', ['combined.txt']));\n\t\t\t\ttest('function with redirection', () => t('function backup() { cp \"$1\" > backup_\"$1\"; }', ['backup_\"$1\"']));\n\t\t\t});\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('no redirections', () => t('echo hello', []));\n\t\t\t\ttest('input redirection only', () => t('sort < input.txt', ['input.txt']));\n\t\t\t\ttest('pipe without redirection', () => t('echo hello | grep hello', []));\n\t\t\t\ttest('redirection to /dev/null', () => t('command > /dev/null', ['/dev/null']));\n\t\t\t\ttest('redirection to device', () => t('echo hello > /dev/tty', ['/dev/tty']));\n\t\t\t\ttest('special characters in filename', () => t('echo hello > file-with_special.chars123.txt', ['file-with_special.chars123.txt']));\n\t\t\t\ttest('unicode filename', () => t('echo hello > æµ‹è¯•æ–‡ä»¶.txt', ['æµ‹è¯•æ–‡ä»¶.txt']));\n\t\t\t\ttest('very long filename', () => t('echo hello > ' + 'a'.repeat(100) + '.txt', [Array(100).fill('a').join('') + '.txt']));\n\t\t\t});\n\t\t});\n\n\t\tsuite('pwsh', () => {\n\t\t\tasync function t(commandLine: string, expectedFiles: string[]) {\n\t\t\t\tconst actualFiles = await parser.getFileWrites(TreeSitterCommandParserLanguage.PowerShell, commandLine);\n\t\t\t\tdeepStrictEqual(actualFiles, expectedFiles);\n\t\t\t}\n\n\t\t\ttest('simple output redirection', () => t('Write-Host \"hello\" > file.txt', ['file.txt']));\n\t\t\ttest('append redirection', () => t('Write-Host \"hello\" >> file.txt', ['file.txt']));\n\t\t\ttest('multiple redirections', () => t('Write-Host \"hello\" > file1.txt ; Write-Host \"world\" > file2.txt', ['file1.txt', 'file2.txt']));\n\t\t\ttest('error redirection', () => t('Get-Content missing.txt 2> error.log', ['error.log']));\n\t\t\ttest('warning redirection', () => t('Write-Warning \"test\" 3> warning.log', ['warning.log']));\n\t\t\ttest('verbose redirection', () => t('Write-Verbose \"test\" 4> verbose.log', ['verbose.log']));\n\t\t\ttest('debug redirection', () => t('Write-Debug \"test\" 5> debug.log', ['debug.log']));\n\t\t\ttest('information redirection', () => t('Write-Information \"test\" 6> info.log', ['info.log']));\n\t\t\ttest('all streams redirection', () => t('Get-Process *> all.log', ['all.log']));\n\t\t\ttest('quoted filenames', () => t('Write-Host \"hello\" > \"file with spaces.txt\"', ['\"file with spaces.txt\"']));\n\t\t\ttest('single quoted filenames', () => t('Write-Host \"hello\" > \\'file.txt\\'', ['\\'file.txt\\'']));\n\t\t\ttest('variable in filename', () => t('Write-Host \"hello\" > $env:TEMP\\\\file.txt', ['$env:TEMP\\\\file.txt']));\n\t\t\ttest('subexpression in filename', () => t('Write-Host \"hello\" > $(Get-Date -Format \"yyyyMMdd\").log', ['$(Get-Date -Format \"yyyyMMdd\").log']));\n\t\t\ttest('Windows path', () => t('Write-Host \"hello\" > C:\\\\temp\\\\file.txt', ['C:\\\\temp\\\\file.txt']));\n\t\t\ttest('UNC path', () => t('Write-Host \"hello\" > \\\\\\\\server\\\\share\\\\file.txt', ['\\\\\\\\server\\\\share\\\\file.txt']));\n\t\t\ttest('relative path', () => t('Write-Host \"hello\" > .\\\\output\\\\file.txt', ['.\\\\output\\\\file.txt']));\n\n\t\t\tsuite('complex scenarios', () => {\n\t\t\t\ttest('pipeline with redirection', () => t('Get-Process | Where-Object {$_.CPU -gt 100} > processes.txt', ['processes.txt']));\n\t\t\t\ttest('multiple streams to different files', () => t('Get-Content missing.txt > output.txt 2> error.txt 3> warning.txt', ['output.txt', 'error.txt', 'warning.txt']));\n\t\t\t\ttest('redirection in script block', () => t('ForEach-Object { Write-Host $_.Name > names.txt }', ['names.txt']));\n\t\t\t\ttest('conditional redirection', () => t('if (Test-Path \"file.txt\") { Get-Content \"file.txt\" > output.txt } else { Write-Host \"not found\" > error.txt }', ['output.txt', 'error.txt']));\n\t\t\t\ttest('try-catch with redirection', () => t('try { Get-Content \"file.txt\" > output.txt } catch { $_.Exception.Message > error.txt }', ['output.txt', 'error.txt']));\n\t\t\t\ttest('foreach loop with redirection', () => t('foreach ($file in Get-ChildItem) { $file.Name >> filelist.txt }', ['filelist.txt']));\n\t\t\t\ttest('switch with redirection', () => t('switch ($var) { 1 { \"one\" > output1.txt } 2 { \"two\" > output2.txt } }', ['output1.txt', 'output2.txt']));\n\t\t\t});\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('no redirections', () => t('Write-Host \"hello\"', []));\n\t\t\t\ttest('redirection to null', () => t('Write-Host \"hello\" > $null', ['$null']));\n\t\t\t\ttest('redirection to console', () => t('Write-Host \"hello\" > CON', ['CON']));\n\t\t\t\ttest('special characters in filename', () => t('Write-Host \"hello\" > file-with_special.chars123.txt', ['file-with_special.chars123.txt']));\n\t\t\t\ttest('unicode filename', () => t('Write-Host \"hello\" > æµ‹è¯•æ–‡ä»¶.txt', ['æµ‹è¯•æ–‡ä»¶.txt']));\n\t\t\t\ttest('very long filename', () => t('Write-Host \"hello\" > ' + 'a'.repeat(100) + '.txt', [Array(100).fill('a').join('') + '.txt']));\n\t\t\t\ttest('redirection operator in string', () => t('Write-Host \"test > redirect\" > file.txt', ['file.txt']));\n\t\t\t\ttest('multiple redirection operators', () => t('Write-Host \"hello\" >> file.txt > otherfile.txt', ['file.txt', 'otherfile.txt']));\n\t\t\t});\n\n\t\t\tsuite('real-world scenarios', () => {\n\t\t\t\ttest('logging script output', () => t('Get-EventLog -LogName System -Newest 100 > system_events.log', ['system_events.log']));\n\t\t\t\ttest('error logging', () => t('Start-Process -FilePath \"nonexistent.exe\" 2> process_errors.log', ['process_errors.log']));\n\t\t\t\ttest('backup script with logging', () => t('Copy-Item -Path \"source/*\" -Destination \"backup/\" -Recurse > backup.log 2> backup_errors.log', ['backup.log', 'backup_errors.log']));\n\t\t\t\ttest('system information export', () => t('Get-ComputerInfo | Out-String > system_info.txt', ['system_info.txt']));\n\t\t\t\ttest('service status report', () => t('Get-Service | Where-Object {$_.Status -eq \"Running\"} | Select-Object Name, Status > running_services.csv', ['running_services.csv']));\n\t\t\t\ttest('registry export', () => t('Get-ItemProperty -Path \"HKLM:\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\" > registry_info.txt', ['registry_info.txt']));\n\t\t\t\ttest('process monitoring', () => t('while ($true) { Get-Process | Measure-Object WorkingSet -Sum >> memory_usage.log; Start-Sleep 60 }', ['memory_usage.log']));\n\t\t\t});\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual } from 'assert';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ITreeSitterLibraryService } from '../../../../../../editor/common/services/treeSitter/treeSitterLibraryService.js';\nimport { FileService } from '../../../../../../platform/files/common/fileService.js';\nimport type { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { TreeSitterLibraryService } from '../../../../../services/treeSitter/browser/treeSitterLibraryService.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { TestIPCFileSystemProvider } from '../../../../../test/electron-browser/workbenchTestServices.js';\nimport { TreeSitterCommandParser, TreeSitterCommandParserLanguage } from '../../browser/treeSitterCommandParser.js';\n\nsuite('TreeSitterCommandParser', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet parser: TreeSitterCommandParser;\n\n\tsetup(() => {\n\t\tconst fileService = store.add(new FileService(new NullLogService()));\n\t\tconst fileSystemProvider = new TestIPCFileSystemProvider();\n\t\tstore.add(fileService.registerProvider(Schemas.file, fileSystemProvider));\n\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tfileService: () => fileService,\n\t\t}, store);\n\n\t\tconst treeSitterLibraryService = store.add(instantiationService.createInstance(TreeSitterLibraryService));\n\t\ttreeSitterLibraryService.isTest = true;\n\t\tinstantiationService.stub(ITreeSitterLibraryService, treeSitterLibraryService);\n\n\t\tparser = store.add(instantiationService.createInstance(TreeSitterCommandParser));\n\t});\n\n\tsuite('extractSubCommands', () => {\n\t\tsuite('bash', () => {\n\t\t\tasync function t(commandLine: string, expectedCommands: string[]) {\n\t\t\t\tconst result = await parser.extractSubCommands(TreeSitterCommandParserLanguage.Bash, commandLine);\n\t\t\t\tdeepStrictEqual(result, expectedCommands);\n\t\t\t}\n\n\t\t\ttest('simple commands', () => t('ls -la', ['ls -la']));\n\t\t\ttest('commands with &&', () => t('echo hello && ls -la', ['echo hello', 'ls -la']));\n\t\t\ttest('commands with ||', () => t('test -f file.txt || touch file.txt', ['test -f file.txt', 'touch file.txt']));\n\t\t\ttest('commands with semicolons', () => t('cd /tmp; ls; pwd', ['cd /tmp', 'ls', 'pwd']));\n\t\t\ttest('pipe chains', () => t('cat file.txt | grep pattern | sort | uniq', ['cat file.txt', 'grep pattern', 'sort', 'uniq']));\n\t\t\ttest('commands with subshells', () => t('echo $(date +%Y) && ls', ['echo $(date +%Y)', 'date +%Y', 'ls']));\n\t\t\ttest('complex quoting', () => t('echo \"hello && world\" && echo \\'test\\'', ['echo \"hello && world\"', 'echo \\'test\\'']));\n\t\t\ttest('escaped characters', () => t('echo hello\\\\ world && ls', ['echo hello\\\\ world', 'ls']));\n\t\t\ttest('background commands', () => t('sleep 10 & echo done', ['sleep 10', 'echo done']));\n\t\t\ttest('variable assignments', () => t('VAR=value command1 && echo $VAR', ['VAR=value command1', 'echo $VAR']));\n\t\t\ttest('redirections', () => t('echo hello > file.txt && cat < file.txt', ['echo hello', 'cat']));\n\t\t\ttest('arithmetic expansion', () => t('echo $((1 + 2)) && ls', ['echo $((1 + 2))', 'ls']));\n\t\t\ttest('nested command substitution', () => t('echo $(cat $(echo file.txt)) && ls', ['echo $(cat $(echo file.txt))', 'cat $(echo file.txt)', 'echo file.txt', 'ls']));\n\t\t\ttest('mixed operators', () => t('cmd1 && cmd2 || cmd3; cmd4 | cmd5 & cmd6', ['cmd1', 'cmd2', 'cmd3', 'cmd4', 'cmd5', 'cmd6']));\n\t\t\ttest('parameter expansion', () => t('echo ${VAR:-default} && echo ${#VAR}', ['echo ${VAR:-default}', 'echo ${#VAR}']));\n\t\t\ttest('process substitution', () => t('diff <(sort file1) <(sort file2) && echo done', ['diff <(sort file1) <(sort file2)', 'sort file1', 'sort file2', 'echo done']));\n\t\t\ttest('brace expansion', () => t('echo {a,b,c}.txt && ls', ['echo {a,b,c}.txt', 'ls']));\n\t\t\ttest('tilde expansion', () => t('cd ~/Documents && ls ~/.bashrc', ['cd ~/Documents', 'ls ~/.bashrc']));\n\n\t\t\tsuite('control flow and structures', () => {\n\t\t\t\ttest('if-then-else', () => t('if [ -f file.txt ]; then cat file.txt; else echo \"not found\"; fi', ['cat file.txt', 'echo \"not found\"']));\n\t\t\t\ttest('simple iteration', () => t('for file in *.txt; do cat \"$file\"; done', ['cat \"$file\"']));\n\t\t\t\ttest('function declaration and call', () => t('function test_func() { echo \"inside function\"; } && test_func', ['echo \"inside function\"', 'test_func']));\n\t\t\t\ttest('heredoc with commands', () => t('cat << EOF\\nhello\\nworld\\nEOF\\necho done', ['cat', 'echo done']));\n\t\t\t\ttest('while loop', () => t('while read line; do echo \"$line\"; done < file.txt', ['read line', 'echo \"$line\"']));\n\t\t\t\ttest('case statement', () => t('case $var in pattern1) echo \"match1\" ;; pattern2) echo \"match2\" ;; esac', ['echo \"match1\"', 'echo \"match2\"']));\n\t\t\t\ttest('until loop', () => t('until [ -f ready.txt ]; do sleep 1; done && echo ready', ['sleep 1', 'echo ready']));\n\t\t\t\ttest('nested conditionals', () => t('if [ -f file ]; then if [ -r file ]; then cat file; fi; fi', ['cat file']));\n\t\t\t\ttest('test command alternatives', () => t('[[ -f file ]] && cat file || echo missing', ['cat file', 'echo missing']));\n\t\t\t});\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('malformed syntax', () => t('echo \"unclosed quote && ls', ['echo']));\n\t\t\t\ttest('unmatched parentheses', () => t('echo $(missing closing && ls', ['echo $(missing closing && ls', 'missing closing', 'ls']));\n\t\t\t\ttest('very long command lines', () => t('echo ' + 'a'.repeat(10000) + ' && ls', ['echo ' + 'a'.repeat(10000), 'ls']));\n\t\t\t\ttest('special characters', () => t('echo \"Ï€Î»Î±Ï‚Îµ æµ‹è¯• ðŸš€\" && ls', ['echo \"Ï€Î»Î±Ï‚Îµ æµ‹è¯• ðŸš€\"', 'ls']));\n\t\t\t\ttest('multiline with continuations', () => t('echo hello \\\\\\n&& echo world \\\\\\n&& ls', ['echo hello', 'echo world', 'ls']));\n\t\t\t\ttest('commands with comments', () => t('echo hello # this is a comment\\nls # another comment', ['echo hello', 'ls']));\n\t\t\t\ttest('empty command in chain', () => t('echo hello && && echo world', ['echo hello', 'echo world']));\n\t\t\t\ttest('trailing operators', () => t('echo hello &&', ['echo hello', '']));\n\t\t\t\ttest('only operators', () => t('&& || ;', []));\n\t\t\t\ttest('nested quotes', () => t('echo \"outer \\\"inner\\\" outer\" && ls', ['echo \"outer \\\"inner\\\" outer\"', 'ls']));\n\t\t\t\ttest('incomplete escape sequences', () => t('echo hello\\\\ && ls', ['echo hello\\\\ ', 'ls']));\n\t\t\t\ttest('mixed quote types', () => t('echo \"hello \\`world\\`\" && echo \\'test\\'', ['echo \"hello \\`world\\`\"', 'world', 'echo \\'test\\'']));\n\t\t\t\ttest('deeply nested structures', () => t('echo $(echo $(echo $(echo nested))) && ls', ['echo $(echo $(echo $(echo nested)))', 'echo $(echo $(echo nested))', 'echo $(echo nested)', 'echo nested', 'ls']));\n\t\t\t\ttest('unicode command names', () => t('æµ‹è¯•å‘½ä»¤ && echo done', ['æµ‹è¯•å‘½ä»¤', 'echo done']));\n\t\t\t\ttest('multi-line', () => t('echo a\\necho b', ['echo a', 'echo b']));\n\t\t\t});\n\n\t\t\t// TODO: These should be common but the pwsh grammar doesn't handle && yet https://github.com/microsoft/vscode/issues/272704\n\t\t\tsuite('real-world scenarios', () => {\n\t\t\t\ttest('complex Docker commands', () => t('docker run -it --rm -v $(pwd):/app ubuntu:latest bash -c \"cd /app && npm install && npm test\"', ['docker run -it --rm -v $(pwd):/app ubuntu:latest bash -c \"cd /app && npm install && npm test\"', 'pwd']));\n\t\t\t\ttest('Git workflow commands', () => t('git add . && git commit -m \"Update feature\" && git push origin main', [\n\t\t\t\t\t'git add .',\n\t\t\t\t\t'git commit -m \"Update feature\"',\n\t\t\t\t\t'git push origin main'\n\t\t\t\t]));\n\t\t\t\ttest('npm/yarn workflow commands', () => t('npm ci && npm run build && npm test && npm run lint', [\n\t\t\t\t\t'npm ci',\n\t\t\t\t\t'npm run build',\n\t\t\t\t\t'npm test',\n\t\t\t\t\t'npm run lint'\n\t\t\t\t]));\n\t\t\t\ttest('build system commands', () => t('make clean && make -j$(nproc) && make install PREFIX=/usr/local', [\n\t\t\t\t\t'make clean',\n\t\t\t\t\t'make -j$(nproc)',\n\t\t\t\t\t'nproc',\n\t\t\t\t\t'make install PREFIX=/usr/local'\n\t\t\t\t]));\n\t\t\t\ttest('deployment script', () => t('rsync -avz --delete src/ user@server:/path/ && ssh user@server \"systemctl restart service\" && echo \"Deployed successfully\"', [\n\t\t\t\t\t'rsync -avz --delete src/ user@server:/path/',\n\t\t\t\t\t'ssh user@server \"systemctl restart service\"',\n\t\t\t\t\t'echo \"Deployed successfully\"'\n\t\t\t\t]));\n\t\t\t\ttest('database backup script', () => t('mysqldump -u user -p database > backup_$(date +%Y%m%d).sql && gzip backup_$(date +%Y%m%d).sql && echo \"Backup complete\"', [\n\t\t\t\t\t'mysqldump -u user -p database',\n\t\t\t\t\t'date +%Y%m%d',\n\t\t\t\t\t'gzip backup_$(date +%Y%m%d).sql',\n\t\t\t\t\t'date +%Y%m%d',\n\t\t\t\t\t'echo \"Backup complete\"'\n\t\t\t\t]));\n\t\t\t\ttest('log analysis pipeline', () => t('tail -f /var/log/app.log | grep ERROR | while read line; do echo \"$(date): $line\" >> error.log; done', [\n\t\t\t\t\t'tail -f /var/log/app.log',\n\t\t\t\t\t'grep ERROR',\n\t\t\t\t\t'read line',\n\t\t\t\t\t'echo \"$(date): $line\"',\n\t\t\t\t\t'date'\n\t\t\t\t]));\n\t\t\t\ttest('conditional installation', () => t('which docker || (curl -fsSL https://get.docker.com | sh && systemctl enable docker) && docker --version', [\n\t\t\t\t\t'which docker',\n\t\t\t\t\t'curl -fsSL https://get.docker.com',\n\t\t\t\t\t'sh',\n\t\t\t\t\t'systemctl enable docker',\n\t\t\t\t\t'docker --version'\n\t\t\t\t]));\n\t\t\t});\n\t\t});\n\n\t\tsuite('pwsh', () => {\n\t\t\tasync function t(commandLine: string, expectedCommands: string[]) {\n\t\t\t\tconst result = await parser.extractSubCommands(TreeSitterCommandParserLanguage.PowerShell, commandLine);\n\t\t\t\tdeepStrictEqual(result, expectedCommands);\n\t\t\t}\n\n\t\t\ttest('simple commands', () => t('Get-ChildItem -Path C:\\\\', ['Get-ChildItem -Path C:\\\\']));\n\t\t\ttest('commands with semicolons', () => t('Get-Date; Get-Location; Write-Host \"done\"', ['Get-Date', 'Get-Location', 'Write-Host \"done\"']));\n\t\t\ttest('pipeline commands', () => t('Get-Process | Where-Object {$_.CPU -gt 100} | Sort-Object CPU', ['Get-Process ', 'Where-Object {$_.CPU -gt 100} ', 'Sort-Object CPU']));\n\t\t\ttest('command substitution', () => t('Write-Host $(Get-Date) ; Get-Location', ['Write-Host $(Get-Date)', 'Get-Date', 'Get-Location']));\n\t\t\ttest('complex parameters', () => t('Get-ChildItem -Path \"C:\\\\Program Files\" -Recurse -Include \"*.exe\"', ['Get-ChildItem -Path \"C:\\\\Program Files\" -Recurse -Include \"*.exe\"']));\n\t\t\ttest('splatting', () => t('$params = @{Path=\"C:\\\\\"; Recurse=$true}; Get-ChildItem @params', ['Get-ChildItem @params']));\n\t\t\ttest('here-strings', () => t('Write-Host @\"\\nhello\\nworld\\n\"@ ; Get-Date', ['Write-Host @\"\\nhello\\nworld\\n\"@', 'Get-Date']));\n\t\t\ttest('method calls', () => t('\"hello\".ToUpper() ; Get-Date', ['Get-Date']));\n\t\t\ttest('complex quoting', () => t('Write-Host \"She said `\"Hello`\"\" ; Write-Host \\'Single quotes\\'', ['Write-Host \"She said `\"Hello`\"\"', 'Write-Host \\'Single quotes\\'']));\n\t\t\ttest('array operations', () => t('$arr = @(1,2,3); $arr | ForEach-Object { $_ * 2 }', ['ForEach-Object { $_ * 2 }']));\n\t\t\ttest('hashtable operations', () => t('$hash = @{key=\"value\"}; Write-Host $hash.key', ['Write-Host $hash.key']));\n\t\t\ttest('type casting', () => t('[int]\"123\" + [int]\"456\" ; Write-Host \"done\"', ['Write-Host \"done\"']));\n\t\t\ttest('regex operations', () => t('\"hello world\" -match \"w.*d\" ; Get-Date', ['Get-Date']));\n\t\t\ttest('comparison operators', () => t('5 -gt 3 -and \"hello\" -like \"h*\" ; Write-Host \"true\"', ['Write-Host \"true\"']));\n\t\t\ttest('null-conditional operators', () => t('$obj?.Property?.SubProperty ; Get-Date', ['Get-Date']));\n\t\t\ttest('string interpolation', () => t('$name=\"World\"; \"Hello $name\" ; Get-Date', ['Get-Date']));\n\t\t\ttest('expandable strings', () => t('$var=\"test\"; \"Value: $($var.ToUpper())\" ; Get-Date', ['Get-Date']));\n\n\t\t\tsuite('Control flow and structures', () => {\n\t\t\t\ttest('logical and', () => t('Test-Path \"file.txt\" -and Get-Content \"file.txt\"', ['Test-Path \"file.txt\" -and Get-Content \"file.txt\"']));\n\t\t\t\ttest('foreach with script block', () => t('ForEach-Object { Write-Host $_.Name } ; Get-Date', ['ForEach-Object { Write-Host $_.Name }', 'Write-Host $_.Name', 'Get-Date']));\n\t\t\t\ttest('if-else', () => t('if (Test-Path \"file.txt\") { Get-Content \"file.txt\" } else { Write-Host \"not found\" }', ['Test-Path \"file.txt\"', 'Get-Content \"file.txt\"', 'Write-Host \"not found\"']));\n\t\t\t\ttest('error handling', () => t('try { Get-Content \"file.txt\" } catch { Write-Error \"failed\" }', ['Get-Content \"file.txt\"', 'Write-Error \"failed\"']));\n\t\t\t\ttest('switch statement', () => t('switch ($var) { 1 { \"one\" } 2 { \"two\" } default { \"other\" } } ; Get-Date', ['Get-Date']));\n\t\t\t\ttest('do-while loop', () => t('do { Write-Host $i; $i++ } while ($i -lt 5) ; Get-Date', ['Write-Host $i', 'Get-Date']));\n\t\t\t\ttest('for loop', () => t('for ($i=0; $i -lt 5; $i++) { Write-Host $i } ; Get-Date', ['Write-Host $i', 'Get-Date']));\n\t\t\t\ttest('foreach loop with range', () => t('foreach ($i in 1..5) { Write-Host $i } ; Get-Date', ['1..5', 'Write-Host $i', 'Get-Date']));\n\t\t\t\ttest('break and continue', () => t('while ($true) { if ($condition) { break } ; Write-Host \"running\" } ; Get-Date', ['Write-Host \"running\"', 'Get-Date']));\n\t\t\t\ttest('nested try-catch-finally', () => t('try { try { Get-Content \"file\" } catch { throw } } catch { Write-Error \"outer\" } finally { Write-Host \"cleanup\" }', ['Get-Content \"file\"', 'Write-Error \"outer\"', 'Write-Host \"cleanup\"']));\n\t\t\t\ttest('parallel processing', () => t('1..10 | ForEach-Object -Parallel { Start-Sleep 1; Write-Host $_ } ; Get-Date', ['1..10 ', 'ForEach-Object -Parallel { Start-Sleep 1; Write-Host $_ }', 'Start-Sleep 1', 'Write-Host $_', 'Get-Date']));\n\t\t\t});\n\t\t});\n\n\t\tsuite('all shells', () => {\n\t\t\tasync function t(commandLine: string, expectedCommands: string[]) {\n\t\t\t\tfor (const shell of [TreeSitterCommandParserLanguage.Bash, TreeSitterCommandParserLanguage.PowerShell]) {\n\t\t\t\t\tconst result = await parser.extractSubCommands(shell, commandLine);\n\t\t\t\t\tdeepStrictEqual(result, expectedCommands);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('empty strings', () => t('', []));\n\t\t\t\ttest('whitespace-only strings', () => t('   \\n\\t  ', []));\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('extractPwshDoubleAmpersandChainOperators', () => {\n\t\tasync function t(commandLine: string, expectedMatches: string[]) {\n\t\t\tconst result = await parser.extractPwshDoubleAmpersandChainOperators(commandLine);\n\t\t\tconst actualMatches = result.map(capture => capture.node.text);\n\t\t\tdeepStrictEqual(actualMatches, expectedMatches);\n\t\t}\n\n\t\ttest('simple command with &&', () => t('Get-Date && Get-Location', ['&&']));\n\t\ttest('multiple && operators', () => t('echo first && echo second && echo third', ['&&', '&&']));\n\t\ttest('mixed operators - && and ;', () => t('echo hello && echo world ; echo done', ['&&']));\n\t\ttest('no && operators', () => t('Get-Date ; Get-Location', []));\n\t\ttest('&& in string literal should not match', () => t('Write-Host \"test && test\"', []));\n\t\ttest('&& in single quotes should not match', () => t('Write-Host \\'test && test\\'', []));\n\t\ttest('&& with complex commands', () => t('Get-ChildItem -Path C:\\\\ && Set-Location C:\\\\Users', ['&&']));\n\t\ttest('&& with parameters', () => t('Get-Process -Name notepad && Stop-Process -Name notepad', ['&&']));\n\t\ttest('&& with pipeline inside', () => t('Get-Process | Where-Object {$_.Name -eq \"notepad\"} && Write-Host \"Found\"', ['&&']));\n\t\ttest('nested && in script blocks', () => t('if ($true) { echo hello && echo world }', ['&&']));\n\t\ttest('&& with method calls', () => t('\"hello\".ToUpper() && \"world\".ToLower()', ['&&']));\n\t\ttest('&& with array operations', () => t('@(1,2,3) | ForEach-Object { $_ } && Write-Host \"done\"', ['&&']));\n\t\ttest('&& with hashtable', () => t('@{key=\"value\"} && Write-Host \"created\"', ['&&']));\n\t\ttest('&& with type casting', () => t('[int]\"123\" && [string]456', ['&&']));\n\t\ttest('&& with comparison operators', () => t('5 -gt 3 && \"hello\" -like \"h*\"', ['&&']));\n\t\ttest('&& with variable assignment', () => t('$var = \"test\" && Write-Host $var', ['&&']));\n\t\ttest('&& with expandable strings', () => t('$name=\"World\" && \"Hello $name\"', ['&&']));\n\t\ttest('&& with subexpressions', () => t('Write-Host $(Get-Date) && Get-Location', ['&&']));\n\t\ttest('&& with here-strings', () => t('Write-Host @\"\\nhello\\nworld\\n\"@ && Get-Date', ['&&']));\n\t\ttest('&& with splatting', () => t('$params = @{Path=\"C:\\\\\"}; Get-ChildItem @params && Write-Host \"done\"', ['&&']));\n\n\t\tsuite('complex scenarios', () => {\n\t\t\ttest('multiple && with different command types', () => t('Get-Service && Start-Service spooler && Get-Process', ['&&', '&&']));\n\t\t\ttest('&& with error handling', () => t('try { Get-Content \"file.txt\" && Write-Host \"success\" } catch { Write-Error \"failed\" }', ['&&']));\n\t\t\ttest('&& inside foreach', () => t('ForEach-Object { Write-Host $_.Name && Write-Host $_.Length }', ['&&']));\n\t\t\ttest('&& with conditional logic', () => t('if (Test-Path \"file.txt\") { Get-Content \"file.txt\" && Write-Host \"read\" }', ['&&']));\n\t\t\ttest('&& with switch statement', () => t('switch ($var) { 1 { \"one\" && \"first\" } 2 { \"two\" && \"second\" } }', ['&&', '&&']));\n\t\t\ttest('&& in do-while', () => t('do { Write-Host $i && $i++ } while ($i -lt 5)', ['&&']));\n\t\t\ttest('&& in for loop', () => t('for ($i=0; $i -lt 5; $i++) { Write-Host $i && Start-Sleep 1 }', ['&&']));\n\t\t\ttest('&& with parallel processing', () => t('1..10 | ForEach-Object -Parallel { Write-Host $_ && Start-Sleep 1 }', ['&&']));\n\t\t});\n\n\t\tsuite('edge cases', () => {\n\t\t\ttest('empty string', () => t('', []));\n\t\t\ttest('whitespace only', () => t('   \\n\\t  ', []));\n\t\t\ttest('triple &&&', () => t('echo hello &&& echo world', ['&&']));\n\t\t\ttest('spaced && operators', () => t('echo hello & & echo world', []));\n\t\t\ttest('&& with unicode', () => t('Write-Host \"æµ‹è¯•\" && Write-Host \"ðŸš€\"', ['&&']));\n\t\t\ttest('very long command with &&', () => t('Write-Host \"' + 'a'.repeat(1000) + '\" && Get-Date', ['&&']));\n\t\t\ttest('deeply nested with &&', () => t('if ($true) { if ($true) { if ($true) { echo nested && echo deep } } }', ['&&']));\n\t\t\ttest('&& with escaped characters', () => t('Write-Host \"hello`\"world\" && Get-Date', ['&&']));\n\t\t\ttest('&& with backticks', () => t('Write-Host `hello && Get-Date', ['&&']));\n\t\t});\n\n\t\tsuite('real-world scenarios', () => {\n\t\t\ttest('git workflow', () => t('git add . && git commit -m \"message\" && git push', ['&&', '&&']));\n\t\t\ttest('build and test', () => t('dotnet build && dotnet test && dotnet publish', ['&&', '&&']));\n\t\t\ttest('file operations', () => t('New-Item -Type File \"test.txt\" && Add-Content \"test.txt\" \"hello\" && Get-Content \"test.txt\"', ['&&', '&&']));\n\t\t\ttest('service management', () => t('Stop-Service spooler && Set-Service spooler -StartupType Manual && Start-Service spooler', ['&&', '&&']));\n\t\t\ttest('registry operations', () => t('New-Item -Path \"HKCU:\\\\Software\\\\Test\" && Set-ItemProperty -Path \"HKCU:\\\\Software\\\\Test\" -Name \"Value\" -Value \"Data\"', ['&&']));\n\t\t\ttest('module import and usage', () => t('Import-Module ActiveDirectory && Get-ADUser -Filter *', ['&&']));\n\t\t\ttest('remote operations', () => t('Enter-PSSession -ComputerName server && Get-Process && Exit-PSSession', ['&&', '&&']));\n\t\t\ttest('scheduled task', () => t('Register-ScheduledTask -TaskName \"MyTask\" -Action (New-ScheduledTaskAction -Execute \"powershell.exe\") && Start-ScheduledTask \"MyTask\"', ['&&']));\n\t\t});\n\t});\n\n\tsuite('getFileWrites', () => {\n\t\tsuite('bash', () => {\n\t\t\tasync function t(commandLine: string, expectedFiles: string[]) {\n\t\t\t\tconst actualFiles = await parser.getFileWrites(TreeSitterCommandParserLanguage.Bash, commandLine);\n\t\t\t\tdeepStrictEqual(actualFiles, expectedFiles);\n\t\t\t}\n\n\t\t\ttest('simple output redirection', () => t('echo hello > file.txt', ['file.txt']));\n\t\t\ttest('append redirection', () => t('echo hello >> file.txt', ['file.txt']));\n\t\t\ttest('multiple redirections', () => t('echo hello > file1.txt && echo world > file2.txt', ['file1.txt', 'file2.txt']));\n\t\t\ttest('error redirection', () => t('command 2> error.log', ['error.log']));\n\t\t\ttest('combined stdout and stderr', () => t('command > output.txt 2>&1', ['output.txt']));\n\t\t\ttest('here document', () => t('cat > file.txt << EOF\\nhello\\nworld\\nEOF', ['file.txt']));\n\t\t\ttest('quoted filenames', () => t('echo hello > \"file with spaces.txt\"', ['\"file with spaces.txt\"']));\n\t\t\ttest('single quoted filenames', () => t('echo hello > \\'file.txt\\'', ['\\'file.txt\\'']));\n\t\t\ttest('variable in filename', () => t('echo hello > $HOME/file.txt', ['$HOME/file.txt']));\n\t\t\ttest('command substitution in filename', () => t('echo hello > $(date +%Y%m%d).log', ['$(date +%Y%m%d).log']));\n\t\t\ttest('tilde expansion in filename', () => t('echo hello > ~/file.txt', ['~/file.txt']));\n\t\t\ttest('absolute path', () => t('echo hello > /tmp/file.txt', ['/tmp/file.txt']));\n\t\t\ttest('relative path', () => t('echo hello > ./output/file.txt', ['./output/file.txt']));\n\t\t\ttest('file descriptor redirection', () => t('command 3> file.txt', ['file.txt']));\n\t\t\ttest('redirection with numeric file descriptor', () => t('command 1> stdout.txt 2> stderr.txt', ['stdout.txt', 'stderr.txt']));\n\t\t\ttest('append with error redirection', () => t('command >> output.log 2>> error.log', ['output.log', 'error.log']));\n\n\t\t\tsuite('complex scenarios', () => {\n\t\t\t\ttest('multiple commands with redirections', () => t('echo first > file1.txt; echo second > file2.txt; echo third > file3.txt', ['file1.txt', 'file2.txt', 'file3.txt']));\n\t\t\t\ttest('pipeline with redirection', () => t('cat input.txt | grep pattern > output.txt', ['output.txt']));\n\t\t\t\ttest('redirection in subshell', () => t('(echo hello; echo world) > combined.txt', ['combined.txt']));\n\t\t\t\ttest('redirection with background job', () => t('long_command > output.txt &', ['output.txt']));\n\t\t\t\ttest('conditional redirection', () => t('test -f input.txt && cat input.txt > output.txt || echo \"not found\" > error.txt', ['output.txt', 'error.txt']));\n\t\t\t\ttest('loop with redirection', () => t('for file in *.txt; do cat \"$file\" >> combined.txt; done', ['combined.txt']));\n\t\t\t\ttest('function with redirection', () => t('function backup() { cp \"$1\" > backup_\"$1\"; }', ['backup_\"$1\"']));\n\t\t\t});\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('no redirections', () => t('echo hello', []));\n\t\t\t\ttest('input redirection only', () => t('sort < input.txt', ['input.txt']));\n\t\t\t\ttest('pipe without redirection', () => t('echo hello | grep hello', []));\n\t\t\t\ttest('redirection to /dev/null', () => t('command > /dev/null', ['/dev/null']));\n\t\t\t\ttest('redirection to device', () => t('echo hello > /dev/tty', ['/dev/tty']));\n\t\t\t\ttest('special characters in filename', () => t('echo hello > file-with_special.chars123.txt', ['file-with_special.chars123.txt']));\n\t\t\t\ttest('unicode filename', () => t('echo hello > æµ‹è¯•æ–‡ä»¶.txt', ['æµ‹è¯•æ–‡ä»¶.txt']));\n\t\t\t\ttest('very long filename', () => t('echo hello > ' + 'a'.repeat(100) + '.txt', [Array(100).fill('a').join('') + '.txt']));\n\t\t\t});\n\t\t});\n\n\t\tsuite('pwsh', () => {\n\t\t\tasync function t(commandLine: string, expectedFiles: string[]) {\n\t\t\t\tconst actualFiles = await parser.getFileWrites(TreeSitterCommandParserLanguage.PowerShell, commandLine);\n\t\t\t\tdeepStrictEqual(actualFiles, expectedFiles);\n\t\t\t}\n\n\t\t\ttest('simple output redirection', () => t('Write-Host \"hello\" > file.txt', ['file.txt']));\n\t\t\ttest('append redirection', () => t('Write-Host \"hello\" >> file.txt', ['file.txt']));\n\t\t\ttest('multiple redirections', () => t('Write-Host \"hello\" > file1.txt ; Write-Host \"world\" > file2.txt', ['file1.txt', 'file2.txt']));\n\t\t\ttest('error redirection', () => t('Get-Content missing.txt 2> error.log', ['error.log']));\n\t\t\ttest('warning redirection', () => t('Write-Warning \"test\" 3> warning.log', ['warning.log']));\n\t\t\ttest('verbose redirection', () => t('Write-Verbose \"test\" 4> verbose.log', ['verbose.log']));\n\t\t\ttest('debug redirection', () => t('Write-Debug \"test\" 5> debug.log', ['debug.log']));\n\t\t\ttest('information redirection', () => t('Write-Information \"test\" 6> info.log', ['info.log']));\n\t\t\ttest('all streams redirection', () => t('Get-Process *> all.log', ['all.log']));\n\t\t\ttest('quoted filenames', () => t('Write-Host \"hello\" > \"file with spaces.txt\"', ['\"file with spaces.txt\"']));\n\t\t\ttest('single quoted filenames', () => t('Write-Host \"hello\" > \\'file.txt\\'', ['\\'file.txt\\'']));\n\t\t\ttest('variable in filename', () => t('Write-Host \"hello\" > $env:TEMP\\\\file.txt', ['$env:TEMP\\\\file.txt']));\n\t\t\ttest('subexpression in filename', () => t('Write-Host \"hello\" > $(Get-Date -Format \"yyyyMMdd\").log', ['$(Get-Date -Format \"yyyyMMdd\").log']));\n\t\t\ttest('Windows path', () => t('Write-Host \"hello\" > C:\\\\temp\\\\file.txt', ['C:\\\\temp\\\\file.txt']));\n\t\t\ttest('UNC path', () => t('Write-Host \"hello\" > \\\\\\\\server\\\\share\\\\file.txt', ['\\\\\\\\server\\\\share\\\\file.txt']));\n\t\t\ttest('relative path', () => t('Write-Host \"hello\" > .\\\\output\\\\file.txt', ['.\\\\output\\\\file.txt']));\n\n\t\t\tsuite('complex scenarios', () => {\n\t\t\t\ttest('pipeline with redirection', () => t('Get-Process | Where-Object {$_.CPU -gt 100} > processes.txt', ['processes.txt']));\n\t\t\t\ttest('multiple streams to different files', () => t('Get-Content missing.txt > output.txt 2> error.txt 3> warning.txt', ['output.txt', 'error.txt', 'warning.txt']));\n\t\t\t\ttest('redirection in script block', () => t('ForEach-Object { Write-Host $_.Name > names.txt }', ['names.txt']));\n\t\t\t\ttest('conditional redirection', () => t('if (Test-Path \"file.txt\") { Get-Content \"file.txt\" > output.txt } else { Write-Host \"not found\" > error.txt }', ['output.txt', 'error.txt']));\n\t\t\t\ttest('try-catch with redirection', () => t('try { Get-Content \"file.txt\" > output.txt } catch { $_.Exception.Message > error.txt }', ['output.txt', 'error.txt']));\n\t\t\t\ttest('foreach loop with redirection', () => t('foreach ($file in Get-ChildItem) { $file.Name >> filelist.txt }', ['filelist.txt']));\n\t\t\t\ttest('switch with redirection', () => t('switch ($var) { 1 { \"one\" > output1.txt } 2 { \"two\" > output2.txt } }', ['output1.txt', 'output2.txt']));\n\t\t\t});\n\n\t\t\tsuite('edge cases', () => {\n\t\t\t\ttest('no redirections', () => t('Write-Host \"hello\"', []));\n\t\t\t\ttest('redirection to null', () => t('Write-Host \"hello\" > $null', ['$null']));\n\t\t\t\ttest('redirection to console', () => t('Write-Host \"hello\" > CON', ['CON']));\n\t\t\t\ttest('special characters in filename', () => t('Write-Host \"hello\" > file-with_special.chars123.txt', ['file-with_special.chars123.txt']));\n\t\t\t\ttest('unicode filename', () => t('Write-Host \"hello\" > æµ‹è¯•æ–‡ä»¶.txt', ['æµ‹è¯•æ–‡ä»¶.txt']));\n\t\t\t\ttest('very long filename', () => t('Write-Host \"hello\" > ' + 'a'.repeat(100) + '.txt', [Array(100).fill('a').join('') + '.txt']));\n\t\t\t\ttest('redirection operator in string', () => t('Write-Host \"test > redirect\" > file.txt', ['file.txt']));\n\t\t\t\ttest('multiple redirection operators', () => t('Write-Host \"hello\" >> file.txt > otherfile.txt', ['file.txt', 'otherfile.txt']));\n\t\t\t});\n\n\t\t\tsuite('real-world scenarios', () => {\n\t\t\t\ttest('logging script output', () => t('Get-EventLog -LogName System -Newest 100 > system_events.log', ['system_events.log']));\n\t\t\t\ttest('error logging', () => t('Start-Process -FilePath \"nonexistent.exe\" 2> process_errors.log', ['process_errors.log']));\n\t\t\t\ttest('backup script with logging', () => t('Copy-Item -Path \"source/*\" -Destination \"backup/\" -Recurse > backup.log 2> backup_errors.log', ['backup.log', 'backup_errors.log']));\n\t\t\t\ttest('system information export', () => t('Get-ComputerInfo | Out-String > system_info.txt', ['system_info.txt']));\n\t\t\t\ttest('service status report', () => t('Get-Service | Where-Object {$_.Status -eq \"Running\"} | Select-Object Name, Status > running_services.csv', ['running_services.csv']));\n\t\t\t\ttest('registry export', () => t('Get-ItemProperty -Path \"HKLM:\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\" > registry_info.txt', ['registry_info.txt']));\n\t\t\t\ttest('process monitoring', () => t('while ($true) { Get-Process | Measure-Object WorkingSet -Sum >> memory_usage.log; Start-Sleep 60 }', ['memory_usage.log']));\n\t\t\t});\n\t\t});\n\t});\n});\n"]}