{"version":3,"sources":["vs/workbench/contrib/terminalContrib/chatAgentTools/browser/tools/task/taskHelpers.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAMhG,OAAO,EAAE,QAAQ,EAAE,MAAM,6BAA6B,CAAC;AACvD,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAC;AAC5D,OAAO,EAAE,cAAc,EAAE,MAAM,iDAAiD,CAAC;AAEjF,MAAM,UAAU,6BAA6B,CAAC,eAAkE;IAC/G,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CACxB,eAAe;SACb,OAAO,CAAC,CAAC,CAAC,EAAE,CACZ,CAAC,CAAC,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;QAC7C,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;QACxB,MAAM,IAAI,GAAG,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;QACrE,MAAM,GAAG,GAAG,KAAK,KAAK,SAAS;YAC9B,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAI,KAAK,CAAC,QAAQ,EAAE,EAAE;YAC7C,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC;QAC3B,OAAO,CAAC,GAAG,EAAE,IAAI,CAA6B,CAAC;IAChD,CAAC,CAAC,IAAI,EAAE,CACR,CACF,CAAC,MAAM,EAAE,CAAC,CAAC;AACb,CAAC;AAED,MAAM,UAAU,6BAA6B,CAAC,MAAgC,EAAE,SAAiB,EAAE,iBAAqC,EAAE,eAA6F,EAAE,aAAuB;IAC/P,IAAI,aAAa,GAAG,EAAE,CAAC;IACvB,IAAI,MAAM,EAAE,QAAQ,EAAE,CAAC;QACtB,aAAa,GAAG,QAAQ,CAAC,KAAoC,EAAE,IAAuC,EAAE,SAAS,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;IACrI,CAAC;SAAM,CAAC;QACP,aAAa,IAAI,KAAK,SAAS,UAAU,CAAC;QAC1C,MAAM,YAAY,GAAG,iBAAiB,CAAC,MAAM,CAAC;QAC9C,IAAI,aAAa,EAAE,CAAC;YACnB,OAAO,YAAY,CAAC,CAAC,CAAC,IAAI,cAAc,CAAC,kBAAkB,aAAa,WAAW,YAAY,aAAa,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,cAAc,CAAC,kBAAkB,aAAa,EAAE,CAAC,CAAC;QACtM,CAAC;aAAM,CAAC;YACP,MAAM,YAAY,GAAG,iBAAiB,CAAC,MAAM,CAAC;YAC9C,aAAa,IAAI,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,kBAAkB,CAAC,IAAI,CAAC;gBAC/E,CAAC,CAAC,CAAC,YAAY;oBACd,CAAC,CAAC,mBAAmB,YAAY,aAAa,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE;oBAC7E,CAAC,CAAC,UAAU,CAAC;gBACd,CAAC,CAAC,CAAC,YAAY;oBACd,CAAC,CAAC,6DAA6D,YAAY,aAAa,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE;oBACvH,CAAC,CAAC,oDAAoD,CAAC,CAAC;QAC3D,CAAC;IACF,CAAC;IACD,OAAO,IAAI,cAAc,CAAC,aAAa,CAAC,CAAC;AAC1C,CAAC","file":"taskHelpers.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../../../base/common/uri.js';\nimport { Location } from '../../../../../../../editor/common/languages.js';\nimport { Range } from '../../../../../../../editor/common/core/range.js';\nimport { ITaskSummary } from '../../../../../tasks/common/taskService.js';\nimport { localize } from '../../../../../../../nls.js';\nimport { OutputMonitorState } from '../monitoring/types.js';\nimport { MarkdownString } from '../../../../../../../base/common/htmlContent.js';\n\nexport function toolResultDetailsFromResponse(terminalResults: { output: string; resources?: ILinkLocation[] }[]): (URI | Location)[] {\n\treturn Array.from(new Map(\n\t\tterminalResults\n\t\t\t.flatMap(r =>\n\t\t\t\tr.resources?.filter(res => res.uri).map(res => {\n\t\t\t\t\tconst range = res.range;\n\t\t\t\t\tconst item = range !== undefined ? { uri: res.uri, range } : res.uri;\n\t\t\t\t\tconst key = range !== undefined\n\t\t\t\t\t\t? `${res.uri.toString()}-${range.toString()}`\n\t\t\t\t\t\t: `${res.uri.toString()}`;\n\t\t\t\t\treturn [key, item] as [string, URI | Location];\n\t\t\t\t}) ?? []\n\t\t\t)\n\t).values());\n}\n\nexport function toolResultMessageFromResponse(result: ITaskSummary | undefined, taskLabel: string, toolResultDetails: (URI | Location)[], terminalResults: { output: string; resources?: ILinkLocation[]; state: OutputMonitorState }[], getOutputTool?: boolean): MarkdownString {\n\tlet resultSummary = '';\n\tif (result?.exitCode) {\n\t\tresultSummary = localize('copilotChat.taskFailedWithExitCode', 'Task `{0}` failed with exit code {1}.', taskLabel, result.exitCode);\n\t} else {\n\t\tresultSummary += `\\`${taskLabel}\\` task `;\n\t\tconst problemCount = toolResultDetails.length;\n\t\tif (getOutputTool) {\n\t\t\treturn problemCount ? new MarkdownString(`Got output for ${resultSummary} with \\`${problemCount}\\` problem${problemCount === 1 ? '' : 's'}`) : new MarkdownString(`Got output for ${resultSummary}`);\n\t\t} else {\n\t\t\tconst problemCount = toolResultDetails.length;\n\t\t\tresultSummary += terminalResults.every(r => r.state === OutputMonitorState.Idle)\n\t\t\t\t? (problemCount\n\t\t\t\t\t? `finished with \\`${problemCount}\\` problem${problemCount === 1 ? '' : 's'}`\n\t\t\t\t\t: 'finished')\n\t\t\t\t: (problemCount\n\t\t\t\t\t? `started and will continue to run in the background with \\`${problemCount}\\` problem${problemCount === 1 ? '' : 's'}`\n\t\t\t\t\t: 'started and will continue to run in the background');\n\t\t}\n\t}\n\treturn new MarkdownString(resultSummary);\n}\n\nexport interface ILinkLocation { uri: URI; range?: Range }\n"]}