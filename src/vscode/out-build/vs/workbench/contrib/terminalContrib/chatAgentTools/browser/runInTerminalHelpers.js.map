{"version":3,"sources":["vs/workbench/contrib/terminalContrib/chatAgentTools/browser/runInTerminalHelpers.ts"],"names":[],"mappings":"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","file":"runInTerminalHelpers.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Separator } from '../../../../../base/common/actions.js';\nimport { coalesce } from '../../../../../base/common/arrays.js';\nimport { posix as pathPosix, win32 as pathWin32 } from '../../../../../base/common/path.js';\nimport { OperatingSystem } from '../../../../../base/common/platform.js';\nimport { escapeRegExpCharacters, removeAnsiEscapeCodes } from '../../../../../base/common/strings.js';\nimport { localize } from '../../../../../nls.js';\nimport type { TerminalNewAutoApproveButtonData } from '../../../chat/browser/chatContentParts/toolInvocationParts/chatTerminalToolConfirmationSubPart.js';\nimport type { ToolConfirmationAction } from '../../../chat/common/languageModelToolsService.js';\nimport type { ICommandApprovalResultWithReason } from './commandLineAutoApprover.js';\n\nexport function isPowerShell(envShell: string, os: OperatingSystem): boolean {\n\tif (os === OperatingSystem.Windows) {\n\t\treturn /^(?:powershell|pwsh)(?:-preview)?$/i.test(pathWin32.basename(envShell).replace(/\\.exe$/i, ''));\n\n\t}\n\treturn /^(?:powershell|pwsh)(?:-preview)?$/.test(pathPosix.basename(envShell));\n}\n\nexport function isWindowsPowerShell(envShell: string): boolean {\n\treturn envShell.endsWith('System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe');\n}\n\nexport function isZsh(envShell: string, os: OperatingSystem): boolean {\n\tif (os === OperatingSystem.Windows) {\n\t\treturn /^zsh(?:\\.exe)?$/i.test(pathWin32.basename(envShell));\n\t}\n\treturn /^zsh$/.test(pathPosix.basename(envShell));\n}\n\nexport function isFish(envShell: string, os: OperatingSystem): boolean {\n\tif (os === OperatingSystem.Windows) {\n\t\treturn /^fish(?:\\.exe)?$/i.test(pathWin32.basename(envShell));\n\t}\n\treturn /^fish$/.test(pathPosix.basename(envShell));\n}\n\n// Maximum output length to prevent context overflow\nconst MAX_OUTPUT_LENGTH = 60000; // ~60KB limit to keep context manageable\nconst TRUNCATION_MESSAGE = '\\n\\n[... MIDDLE OF OUTPUT TRUNCATED ...]\\n\\n';\n\nexport function sanitizeTerminalOutput(output: string): string {\n\tlet sanitized = removeAnsiEscapeCodes(output)\n\t\t// Trim trailing \\r\\n characters\n\t\t.trimEnd();\n\n\t// Truncate if output is too long to prevent context overflow\n\tif (sanitized.length > MAX_OUTPUT_LENGTH) {\n\t\tconst truncationMessageLength = TRUNCATION_MESSAGE.length;\n\t\tconst availableLength = MAX_OUTPUT_LENGTH - truncationMessageLength;\n\t\tconst startLength = Math.floor(availableLength * 0.4); // Keep 40% from start\n\t\tconst endLength = availableLength - startLength; // Keep 60% from end\n\n\t\tconst startPortion = sanitized.substring(0, startLength);\n\t\tconst endPortion = sanitized.substring(sanitized.length - endLength);\n\n\t\tsanitized = startPortion + TRUNCATION_MESSAGE + endPortion;\n\t}\n\n\treturn sanitized;\n}\n\nexport function generateAutoApproveActions(commandLine: string, subCommands: string[], autoApproveResult: { subCommandResults: ICommandApprovalResultWithReason[]; commandLineResult: ICommandApprovalResultWithReason }): ToolConfirmationAction[] {\n\tconst actions: ToolConfirmationAction[] = [];\n\n\t// We shouldn't offer configuring rules for commands that are explicitly denied since it\n\t// wouldn't get auto approved with a new rule\n\tconst canCreateAutoApproval = (\n\t\tautoApproveResult.subCommandResults.every(e => e.result !== 'denied') &&\n\t\tautoApproveResult.commandLineResult.result !== 'denied'\n\t);\n\tif (canCreateAutoApproval) {\n\t\tconst unapprovedSubCommands = subCommands.filter((_, index) => {\n\t\t\treturn autoApproveResult.subCommandResults[index].result !== 'approved';\n\t\t});\n\n\t\t// Some commands should not be recommended as they are too permissive generally. This only\n\t\t// applies to sub-commands, we still want to offer approving of the exact the command line\n\t\t// however as it's very specific.\n\t\tconst neverAutoApproveCommands = new Set([\n\t\t\t// Shell interpreters\n\t\t\t'bash', 'sh', 'zsh', 'fish', 'ksh', 'csh', 'tcsh', 'dash',\n\t\t\t'pwsh', 'powershell', 'powershell.exe', 'cmd', 'cmd.exe',\n\t\t\t// Script interpreters\n\t\t\t'python', 'python3', 'node', 'ruby', 'perl', 'php', 'lua',\n\t\t\t// Direct execution commands\n\t\t\t'eval', 'exec', 'source', 'sudo', 'su', 'doas',\n\t\t\t// Network tools that can download and execute code\n\t\t\t'curl', 'wget', 'invoke-restmethod', 'invoke-webrequest', 'irm', 'iwr',\n\t\t]);\n\n\t\t// Commands where we want to suggest the sub-command (eg. `foo bar` instead of `foo`)\n\t\tconst commandsWithSubcommands = new Set(['git', 'npm', 'yarn', 'docker', 'kubectl', 'cargo', 'dotnet', 'mvn', 'gradle']);\n\n\t\t// Commands where we want to suggest the sub-command of a sub-command (eg. `foo bar baz`\n\t\t// instead of `foo`)\n\t\tconst commandsWithSubSubCommands = new Set(['npm run', 'yarn run']);\n\n\t\t// For each unapproved sub-command (within the overall command line), decide whether to\n\t\t// suggest new rules for the command, a sub-command, a sub-command of a sub-command or to\n\t\t// not suggest at all.\n\t\tconst subCommandsToSuggest = Array.from(new Set(coalesce(unapprovedSubCommands.map(command => {\n\t\t\tconst parts = command.trim().split(/\\s+/);\n\t\t\tconst baseCommand = parts[0].toLowerCase();\n\t\t\tconst baseSubCommand = parts.length > 1 ? `${parts[0]} ${parts[1]}`.toLowerCase() : '';\n\n\t\t\t// Security check: Never suggest auto-approval for dangerous interpreter commands\n\t\t\tif (neverAutoApproveCommands.has(baseCommand)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (commandsWithSubSubCommands.has(baseSubCommand)) {\n\t\t\t\tif (parts.length >= 3 && !parts[2].startsWith('-')) {\n\t\t\t\t\treturn `${parts[0]} ${parts[1]} ${parts[2]}`;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t} else if (commandsWithSubcommands.has(baseCommand)) {\n\t\t\t\tif (parts.length >= 2 && !parts[1].startsWith('-')) {\n\t\t\t\t\treturn `${parts[0]} ${parts[1]}`;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t} else {\n\t\t\t\treturn parts[0];\n\t\t\t}\n\t\t}))));\n\n\t\tif (subCommandsToSuggest.length > 0) {\n\t\t\tlet subCommandLabel: string;\n\t\t\tif (subCommandsToSuggest.length === 1) {\n\t\t\t\tsubCommandLabel = localize('autoApprove.baseCommandSingle', 'Always Allow Command: {0}', subCommandsToSuggest[0]);\n\t\t\t} else {\n\t\t\t\tconst commandSeparated = subCommandsToSuggest.join(', ');\n\t\t\t\tsubCommandLabel = localize('autoApprove.baseCommand', 'Always Allow Commands: {0}', commandSeparated);\n\t\t\t}\n\n\t\t\tactions.push({\n\t\t\t\tlabel: subCommandLabel,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'newRule',\n\t\t\t\t\trule: subCommandsToSuggest.map(key => ({\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tvalue: true\n\t\t\t\t\t}))\n\t\t\t\t} satisfies TerminalNewAutoApproveButtonData\n\t\t\t});\n\t\t}\n\n\t\t// Allow exact command line, don't do this if it's just the first sub-command's first\n\t\t// word or if it's an exact match for special sub-commands\n\t\tconst firstSubcommandFirstWord = unapprovedSubCommands.length > 0 ? unapprovedSubCommands[0].split(' ')[0] : '';\n\t\tif (\n\t\t\tfirstSubcommandFirstWord !== commandLine &&\n\t\t\t!commandsWithSubcommands.has(commandLine) &&\n\t\t\t!commandsWithSubSubCommands.has(commandLine)\n\t\t) {\n\t\t\tactions.push({\n\t\t\t\tlabel: localize('autoApprove.exactCommand', 'Always Allow Exact Command Line'),\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'newRule',\n\t\t\t\t\trule: {\n\t\t\t\t\t\tkey: `/^${escapeRegExpCharacters(commandLine)}$/`,\n\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\tapprove: true,\n\t\t\t\t\t\t\tmatchCommandLine: true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} satisfies TerminalNewAutoApproveButtonData\n\t\t\t});\n\t\t}\n\t}\n\n\tif (actions.length > 0) {\n\t\tactions.push(new Separator());\n\t}\n\n\n\t// Allow all commands for this session\n\tactions.push({\n\t\tlabel: localize('allowSession', 'Allow All Commands in this Session'),\n\t\ttooltip: localize('allowSessionTooltip', 'Allow this tool to run in this session without confirmation.'),\n\t\tdata: {\n\t\t\ttype: 'sessionApproval'\n\t\t} satisfies TerminalNewAutoApproveButtonData\n\t});\n\n\tactions.push(new Separator());\n\n\t// Always show configure option\n\tactions.push({\n\t\tlabel: localize('autoApprove.configure', 'Configure Auto Approve...'),\n\t\tdata: {\n\t\t\ttype: 'configure'\n\t\t} satisfies TerminalNewAutoApproveButtonData\n\t});\n\n\treturn actions;\n}\n\nexport function dedupeRules(rules: ICommandApprovalResultWithReason[]): ICommandApprovalResultWithReason[] {\n\treturn rules.filter((result, index, array) => {\n\t\treturn result.rule && array.findIndex(r => r.rule && r.rule.sourceText === result.rule!.sourceText) === index;\n\t});\n}\n"]}