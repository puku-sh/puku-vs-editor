{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/chatAgentTools/test/browser/commandLineAutoApprover.test.ts","vs/workbench/contrib/terminalContrib/chatAgentTools/test/browser/commandLineAutoApprover.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,uCAAuC,EAAE,MAAM,6CAA6C,CAAC;AACtG,OAAO,EAAE,wBAAwB,EAAE,MAAM,kFAAkF,CAAC;AAE5H,OAAO,EAAE,6BAA6B,EAAE,MAAM,sDAAsD,CAAC;AAErG,OAAO,EAAE,uBAAuB,EAAE,MAAM,0CAA0C,CAAC;AAEnF,OAAO,EAAE,EAAE,EAAE,WAAW,EAAE,MAAM,QAAQ,CAAC;AAEzC,KAAK,CAAC,yBAAyB,EAAE,GAAG,EAAE;IACrC,MAAM,KAAK,GAAG,uCAAuC,EAAE,CAAC;IAExD,IAAI,oBAA2C,CAAC;IAChD,IAAI,oBAA8C,CAAC;IAEnD,IAAI,uBAAgD,CAAC;IACrD,IAAI,KAAa,CAAC;IAClB,IAAI,EAAmB,CAAC;IAExB,KAAK,CAAC,GAAG,EAAE;QACV,oBAAoB,GAAG,IAAI,wBAAwB,EAAE,CAAC;QACtD,oBAAoB,GAAG,6BAA6B,CAAC;YACpD,oBAAoB,EAAE,GAAG,EAAE,CAAC,oBAAoB;SAChD,EAAE,KAAK,CAAC,CAAC;QAEV,KAAK,GAAG,MAAM,CAAC;QACf,EAAE,gCAAwB,CAAC;QAC3B,uBAAuB,GAAG,KAAK,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;IACnG,CAAC,CAAC,CAAC;IAEH,SAAS,cAAc,CAAC,KAAiC;QACxD,SAAS,sFAA8C,KAAK,CAAC,CAAC;IAC/D,CAAC;IAED,SAAS,6BAA6B,CAAC,KAAoF;QAC1H,SAAS,sFAA8C,KAAK,CAAC,CAAC;IAC/D,CAAC;IAED,SAAS,SAAS,CAAC,GAAW,EAAE,KAAc;QAC7C,oBAAoB,CAAC,oBAAoB,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QACtD,oBAAoB,CAAC,+BAA+B,CAAC,IAAI,CAAC;YACzD,oBAAoB,EAAE,GAAG,EAAE,CAAC,IAAI;YAChC,YAAY,EAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YAC5B,MAAM,kCAA0B;YAChC,MAAM,EAAE,IAAK;SACb,CAAC,CAAC;IACJ,CAAC;IAED,SAAS,cAAc,CAAC,WAAmB;QAC1C,OAAO,uBAAuB,CAAC,qBAAqB,CAAC,WAAW,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM,KAAK,UAAU,CAAC;IACpG,CAAC;IAED,SAAS,yBAAyB,CAAC,WAAmB;QACrD,OAAO,uBAAuB,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,MAAM,KAAK,UAAU,CAAC;IAC7F,CAAC;IAED,KAAK,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAClD,IAAI,CAAC,yCAAyC,EAAE,GAAG,EAAE;YACpD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4CAA4C,EAAE,GAAG,EAAE;YACvD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,EAAE,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gDAAgD,EAAE,GAAG,EAAE;YAC3D,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,GAAG,EAAE;YAC5D,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gDAAgD,EAAE,GAAG,EAAE;YAC3D,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,IAAI;aACX,CAAC,CAAC;YACH,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,qCAAqC,EAAE,GAAG,EAAE;QACjD,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAChD,cAAc,CAAC;gBACd,IAAI,EAAE,KAAK;gBACX,KAAK,EAAE,KAAK;aACZ,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0EAA0E,EAAE,GAAG,EAAE;YACrF,cAAc,CAAC;gBACd,IAAI,EAAE,KAAK;aACX,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,gDAAgD,EAAE,GAAG,EAAE;QAC5D,IAAI,CAAC,0EAA0E,EAAE,GAAG,EAAE;YACrF,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAE,KAAK;aACX,CAAC,CAAC;YACH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE;YAChE,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,IAAI;gBACX,IAAI,EAAE,KAAK;gBACX,KAAK,EAAE,KAAK;aACZ,CAAC,CAAC;YACH,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC5B,IAAI,CAAC,oBAAoB,EAAE,GAAG,EAAE;YAC/B,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6CAA6C,EAAE,GAAG,EAAE;YACxD,cAAc,CAAC;gBACd,SAAS,EAAE,IAAI;gBACf,OAAO,EAAE,IAAI;gBACb,KAAK,EAAE,IAAI;aACX,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uCAAuC,EAAE,GAAG,EAAE;YAClD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAE,IAAI;gBACV,WAAW,EAAE,KAAK;gBAClB,YAAY,EAAE,KAAK;aACnB,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sCAAsC,EAAE,GAAG,EAAE;YACjD,cAAc,CAAC;gBACd,qBAAqB,EAAE,IAAI;gBAC3B,4BAA4B,EAAE,IAAI;gBAClC,eAAe,EAAE,KAAK;aACtB,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,GAAG,EAAE;YACnB,IAAI,CAAC,2DAA2D,EAAE,GAAG,EAAE;gBACtE,cAAc,CAAC;oBACd,UAAU,EAAE,IAAI;oBAChB,QAAQ,EAAE,IAAI;oBACd,WAAW,EAAE,KAAK;iBAClB,CAAC,CAAC;gBAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;gBAC7B,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC/B,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC/B,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;gBAChC,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;YACjC,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,oCAAoC,EAAE,GAAG,EAAE;gBAC/C,cAAc,CAAC;oBACd,eAAe,EAAE,IAAI;oBACrB,gBAAgB,EAAE,KAAK;iBACvB,CAAC,CAAC;gBAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC1C,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,mCAAmC,EAAE,GAAG,EAAE;gBAC9C,cAAc,CAAC;oBACd,YAAY,EAAE,IAAI,EAAG,cAAc;oBACnC,aAAa,EAAE,IAAI,EAAE,wBAAwB;oBAC7C,WAAW,EAAE,KAAK,CAAG,cAAc;iBACnC,CAAC,CAAC;gBAEH,EAAE,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACxC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC/B,EAAE,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;YACjC,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,4CAA4C,EAAE,GAAG,EAAE;gBACvD,cAAc,CAAC;oBACd,SAAS,EAAE,IAAI;oBACf,UAAU,EAAE,KAAK;iBACjB,CAAC,CAAC;gBAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,yCAAyC,CAAC,CAAC;gBAC7E,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;gBAC/B,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE,yCAAyC,CAAC,CAAC;YAC3E,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,YAAY,EAAE,GAAG,EAAE;QACxB,IAAI,CAAC,iCAAiC,EAAE,GAAG,EAAE;YAC5C,cAAc,CAAC,EAAE,CAAC,CAAC;YAEnB,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAChD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YAEH,EAAE,CAAC,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sCAAsC,EAAE,GAAG,EAAE;YACjD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAChD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,oDAAoD;QACpD,IAAI,CAAC,iEAAiE,EAAE,GAAG,EAAE;YAC5E,cAAc,CAAC;gBACd,0CAA0C,EAAE,IAAI;aAChD,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,0CAA0C,CAAC,CAAC,CAAC;YAC/D,EAAE,CAAC,cAAc,CAAC,sDAAsD,CAAC,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oCAAoC,EAAE,GAAG,EAAE;YAC/C,cAAc,CAAC;gBACd,EAAE,EAAE,IAAI;aACR,CAAC,CAAC;YAEH,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mEAAmE,EAAE,GAAG,EAAE;YAC9E,cAAc,CAAC;gBACd,IAAI,EAAE,IAAI;gBACV,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAE,IAAI,EAAa,wBAAwB;gBAChD,OAAO,EAAE,IAAI,CAAW,wBAAwB;aAChD,CAAC,CAAC;YAEH,kFAAkF;YAClF,uEAAuE;YACvE,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6DAA6D,EAAE,GAAG,EAAE;YACxE,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,IAAI;gBACZ,SAAS,EAAE,IAAI;gBACf,SAAS,EAAE,IAAI;aACf,CAAC,CAAC;YAEH,sFAAsF;YACtF,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0DAA0D,EAAE,GAAG,EAAE;YACrE,cAAc,CAAC;gBACd,SAAS,EAAE,IAAI,EAAS,gBAAgB;gBACxC,IAAI,EAAE,IAAI,EAAc,gBAAgB;gBACxC,OAAO,EAAE,IAAI,EAAW,gBAAgB;gBACxC,MAAM,EAAE,IAAI,EAAY,yBAAyB;gBACjD,KAAK,EAAE,IAAI,CAAa,uBAAuB;aAC/C,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7B,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,GAAG,EAAE;YAC5D,cAAc,CAAC;gBACd,KAAK,EAAE,IAAI,EAAqB,oCAAoC;gBACpE,QAAQ,EAAE,IAAI,EAAkB,wCAAwC;gBACxE,KAAK,EAAE,IAAI,EAAqB,2CAA2C;gBAC3E,SAAS,EAAE,IAAI,EAAiB,gBAAgB;gBAChD,IAAI,EAAE,IAAI,CAAsB,uBAAuB;aACvD,CAAC,CAAC;YAEH,mCAAmC;YACnC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC7B,mEAAmE;YACnE,EAAE,CAAC,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,0BAA0B,EAAE,GAAG,EAAE;QACtC,IAAI,CAAC,oDAAoD,EAAE,GAAG,EAAE;YAC/D,cAAc,CAAC;gBACd,SAAS,EAAE,IAAI;aACf,CAAC,CAAC;YAEH,iCAAiC;YACjC,EAAE,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC;YAC9B,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YAEpC,0CAA0C;YAC1C,EAAE,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAErC,iDAAiD;YACjD,EAAE,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;YAChC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YACjC,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YAElC,qCAAqC;YACrC,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gDAAgD,EAAE,GAAG,EAAE;YAC3D,cAAc,CAAC;gBACd,iBAAiB,EAAE,IAAI;aACvB,CAAC,CAAC;YAEH,iCAAiC;YACjC,EAAE,CAAC,cAAc,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACtC,EAAE,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC;YAE7C,sCAAsC;YACtC,EAAE,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACrC,EAAE,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAE5C,iDAAiD;YACjD,EAAE,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACxC,EAAE,CAAC,cAAc,CAAC,oBAAoB,CAAC,CAAC,CAAC;YACzC,EAAE,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;YACvC,EAAE,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0BAA0B,EAAE,GAAG,EAAE;YACrC,cAAc,CAAC;gBACd,qBAAqB,EAAE,IAAI;aAC3B,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC,CAAC;YAC1C,EAAE,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,cAAc,CAAC,0BAA0B,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAChD,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI,EAAG,aAAa;gBAC5B,IAAI,EAAE,IAAI,EAAK,aAAa;gBAC5B,KAAK,EAAE,IAAI,CAAI,aAAa;aAC5B,CAAC,CAAC;YAEH,kEAAkE;YAClE,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;YAC3B,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAE1B,mEAAmE;YACnE,EAAE,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC9B,EAAE,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE;YAChE,cAAc,CAAC;gBACd,cAAc,EAAE,IAAI,CAAE,6BAA6B;aACnD,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACrC,EAAE,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uDAAuD,EAAE,GAAG,EAAE;YAClE,6BAA6B,CAAC;gBAC7B,YAAY,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACvD,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACnD,EAAE,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC,CAAC;YACpD,EAAE,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,CAAC,CAAC;YACrD,EAAE,CAAC,yBAAyB,CAAC,uBAAuB,CAAC,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2CAA2C,EAAE,GAAG,EAAE;YACtD,cAAc,CAAC;gBACd,kBAAkB,EAAE,IAAI;gBACxB,sBAAsB,EAAE,IAAI;gBAC5B,uBAAuB,EAAE,IAAI;aAC7B,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;YACvC,EAAE,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACxC,EAAE,CAAC,cAAc,CAAC,oBAAoB,CAAC,CAAC,CAAC;YAEzC,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAE5C,EAAE,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,8BAA8B,EAAE,GAAG,EAAE;QAC1C,KAAK,CAAC,GAAG,EAAE;YACV,KAAK,GAAG,MAAM,CAAC;QAChB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2CAA2C,EAAE,GAAG,EAAE;YACtD,cAAc,CAAC;gBACd,eAAe,EAAE,IAAI;gBACrB,aAAa,EAAE,IAAI;gBACnB,cAAc,EAAE,IAAI;gBACpB,aAAa,EAAE,KAAK;gBACpB,KAAK,EAAE,KAAK;aACZ,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0BAA0B,EAAE,GAAG,EAAE;YACrC,cAAc,CAAC;gBACd,aAAa,EAAE,IAAI;aACnB,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,uBAAuB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oDAAoD,EAAE,GAAG,EAAE;YAC/D,cAAc,CAAC;gBACd,eAAe,EAAE,IAAI;gBACrB,aAAa,EAAE,IAAI;gBACnB,aAAa,EAAE,KAAK;aACpB,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YAEpC,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC3C,EAAE,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAE3C,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mDAAmD,EAAE,GAAG,EAAE;YAC9D,cAAc,CAAC;gBACd,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,IAAI;gBACX,IAAI,EAAE,KAAK;gBACX,KAAK,EAAE,KAAK;aACZ,CAAC,CAAC;YAEH,6CAA6C;YAC7C,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YACzB,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC;YAEzB,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAC1B,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAE1B,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YAEnC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gDAAgD,EAAE,GAAG,EAAE;YAC3D,cAAc,CAAC;gBACd,SAAS,EAAE,IAAI;gBACf,kBAAkB,EAAE,KAAK;aACzB,CAAC,CAAC;YAEH,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YAClC,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC;YAEnC,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,sBAAsB,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oEAAoE,EAAE,GAAG,EAAE;YAC/E,cAAc,CAAC;gBACd,aAAa,EAAE,IAAI;gBACnB,cAAc,EAAE,KAAK;aACrB,CAAC,CAAC;YAEH,KAAK,MAAM,SAAS,IAAI,mGAA2E,EAAE,CAAC;gBACrG,EAAE,GAAG,SAAS,CAAC;gBACf,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;gBAC9C,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;gBAC9C,EAAE,CAAC,cAAc,CAAC,aAAa,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;gBAC9C,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;gBAChD,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;YACjD,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,4DAA4D,EAAE,GAAG,EAAE;QACxE,IAAI,CAAC,uEAAuE,EAAE,GAAG,EAAE;YAClF,6BAA6B,CAAC;gBAC7B,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACjD,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE;YACpF,cAAc,CAAC;gBACd,MAAM,EAAE,IAAI;aACZ,CAAC,CAAC;YAEH,sEAAsE;YACtE,EAAE,CAAC,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0DAA0D,EAAE,GAAG,EAAE;YACrE,6BAA6B,CAAC;gBAC7B,eAAe,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAC1D,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,CAAC,CAAC;YAClD,EAAE,CAAC,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kEAAkE,EAAE,GAAG,EAAE;YAC7E,6BAA6B,CAAC;gBAC7B,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACpD,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6CAA6C,EAAE,GAAG,EAAE;YACxD,6BAA6B,CAAC;gBAC7B,kBAAkB,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBAC7D,UAAU,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACrD,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,4BAA4B,CAAC,CAAC,CAAC;YAC5D,EAAE,CAAC,yBAAyB,CAAC,6BAA6B,CAAC,CAAC,CAAC;YAC7D,EAAE,CAAC,yBAAyB,CAAC,uBAAuB,CAAC,CAAC,CAAC;YACvD,EAAE,CAAC,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4CAA4C,EAAE,GAAG,EAAE;YACvD,6BAA6B,CAAC;gBAC7B,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACjD,CAAC,CAAC;YAEH,EAAE,CAAC,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,CAAC;YACnC,EAAE,CAAC,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iEAAiE,EAAE,GAAG,EAAE;YAC5E,6BAA6B,CAAC;gBAC7B,MAAM,EAAE,IAAI,EAAG,kBAAkB;gBACjC,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAG,uBAAuB;gBACzE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE,CAAE,2BAA2B;aAC7E,CAAC,CAAC;YAEH,mFAAmF;YACnF,EAAE,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxC,EAAE,CAAC,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yDAAyD,EAAE,GAAG,EAAE;YACpE,6BAA6B,CAAC;gBAC7B,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACjD,aAAa,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACzD,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,CAAC,CAAC;YACzD,EAAE,CAAC,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,CAAC,CAAC;QACvD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uEAAuE,EAAE,GAAG,EAAE;YAClF,6BAA6B,CAAC;gBAC7B,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACnD,mBAAmB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAC/D,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,CAAC,CAAC;QAC1D,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2DAA2D,EAAE,GAAG,EAAE;YACtE,6BAA6B,CAAC;gBAC7B,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBAChD,gBAAgB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBAC5D,4BAA4B,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACxE,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,aAAa,CAAC,CAAC,CAAC;YAC7C,EAAE,CAAC,yBAAyB,CAAC,eAAe,CAAC,CAAC,CAAC;YAC/C,EAAE,CAAC,CAAC,yBAAyB,CAAC,qBAAqB,CAAC,CAAC,CAAC;YACtD,EAAE,CAAC,CAAC,yBAAyB,CAAC,qDAAqD,CAAC,CAAC,CAAC;QACvF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yFAAyF,EAAE,GAAG,EAAE;YACpG,6BAA6B,CAAC;gBAC7B,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBAC/C,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACnD,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAa,wBAAwB;gBACrF,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAW,wBAAwB;aACrF,CAAC,CAAC;YAEH,kFAAkF;YAClF,uEAAuE;YACvE,EAAE,CAAC,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC;YACrC,EAAE,CAAC,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mFAAmF,EAAE,GAAG,EAAE;YAC9F,6BAA6B,CAAC;gBAC7B,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACjD,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACjD,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACpD,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACpD,CAAC,CAAC;YAEH,sFAAsF;YACtF,EAAE,CAAC,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC7C,EAAE,CAAC,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC;YACrC,EAAE,CAAC,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,CAAC;YACpC,EAAE,CAAC,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gFAAgF,EAAE,GAAG,EAAE;YAC3F,6BAA6B,CAAC;gBAC7B,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAS,gBAAgB;gBAC7E,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAc,gBAAgB;gBAC7E,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAW,gBAAgB;gBAC7E,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAY,yBAAyB;gBACtF,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAa,uBAAuB;aACpF,CAAC,CAAC;YAEH,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxC,EAAE,CAAC,yBAAyB,CAAC,KAAK,CAAC,CAAC,CAAC;YACrC,EAAE,CAAC,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uEAAuE,EAAE,GAAG,EAAE;YAClF,6BAA6B,CAAC;gBAC7B,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAqB,oCAAoC;gBACzG,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAkB,wCAAwC;gBAC7G,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAqB,2CAA2C;gBAChH,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAiB,gBAAgB;gBACrF,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAsB,uBAAuB;aAC5F,CAAC,CAAC;YAEH,mCAAmC;YACnC,EAAE,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5C,EAAE,CAAC,yBAAyB,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxC,mEAAmE;YACnE,EAAE,CAAC,CAAC,yBAAyB,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,SAAS,EAAE,GAAG,EAAE;QACrB,SAAS,gBAAgB,CAAC,OAAe;YACxC,OAAO,uBAAuB,CAAC,qBAAqB,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC;QACjF,CAAC;QAED,SAAS,oBAAoB,CAAC,WAAmB;YAChD,OAAO,uBAAuB,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC;QAC9E,CAAC;QAED,KAAK,CAAC,SAAS,EAAE,GAAG,EAAE;YACrB,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;gBACrB,cAAc,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC/B,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,2DAA2D,CAAC,CAAC;YAC1G,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE;gBACzB,cAAc,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;gBAChC,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,wDAAwD,CAAC,CAAC;YACvG,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;gBACrB,cAAc,CAAC,EAAE,CAAC,CAAC;gBACnB,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,2DAA2D,CAAC,CAAC;YAC1G,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,cAAc,EAAE,GAAG,EAAE;YAC1B,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;gBACrB,6BAA6B,CAAC,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;gBACnF,WAAW,CAAC,oBAAoB,CAAC,YAAY,CAAC,EAAE,gEAAgE,CAAC,CAAC;YACnH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE;gBACzB,6BAA6B,CAAC,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;gBACpF,WAAW,CAAC,oBAAoB,CAAC,YAAY,CAAC,EAAE,6DAA6D,CAAC,CAAC;YAChH,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;gBACrB,6BAA6B,CAAC,EAAE,CAAC,CAAC;gBAClC,WAAW,CAAC,oBAAoB,CAAC,YAAY,CAAC,EAAE,gEAAgE,CAAC,CAAC;YACnH,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,qBAAqB,EAAE,GAAG,EAAE;QACjC,SAAS,gBAAgB,CAAC,OAAe;YACxC,OAAO,uBAAuB,CAAC,qBAAqB,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,aAAa,CAAC;QAC9F,CAAC;QAED,SAAS,2BAA2B,CAAC,WAAmB;YACvD,OAAO,uBAAuB,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,aAAa,CAAC;QAC3F,CAAC;QAED,SAAS,0BAA0B,CAAC,UAAsC,EAAE,aAAyC;YACpH,gDAAgD;YAChD,oBAAoB,CAAC,oBAAoB,sFAA8C,UAAU,CAAC,CAAC;YAEnG,mDAAmD;YACnD,MAAM,eAAe,GAAG,oBAAoB,CAAC,OAAO,CAAC;YACrD,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,QAAQ,CAAC;YAEvD,oBAAoB,CAAC,OAAO,GAAG,CAAC,GAAW,EAAO,EAAE;gBACnD,IAAI,GAAG,wFAAgD,EAAE,CAAC;oBACzD,OAAO;wBACN,OAAO,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE;wBACjC,IAAI,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE;wBAC3B,SAAS,EAAE,SAAS;wBACpB,eAAe,EAAE,SAAS;wBAC1B,WAAW,EAAE,SAAS;wBACtB,MAAM,EAAE,SAAS;wBACjB,MAAM,EAAE,SAAS;wBACjB,KAAK,EAAE,EAAE,GAAG,aAAa,EAAE,GAAG,UAAU,EAAE;qBAC1C,CAAC;gBACH,CAAC;gBACD,OAAO,eAAe,CAAC,IAAI,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,oBAAoB,CAAC,QAAQ,GAAG,CAAC,GAAW,EAAO,EAAE;gBACpD,IAAI,GAAG,wFAAgD,EAAE,CAAC;oBACzD,OAAO,EAAE,GAAG,aAAa,EAAE,GAAG,UAAU,EAAE,CAAC;gBAC5C,CAAC;gBACD,OAAO,gBAAgB,CAAC,IAAI,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC;YACzD,CAAC,CAAC;YAEF,+BAA+B;YAC/B,oBAAoB,CAAC,+BAA+B,CAAC,IAAI,CAAC;gBACzD,oBAAoB,EAAE,GAAG,EAAE,CAAC,IAAI;gBAChC,YAAY,EAAE,IAAI,GAAG,CAAC,qFAA6C,CAAC;gBACpE,MAAM,kCAA0B;gBAChC,MAAM,EAAE,IAAK;aACb,CAAC,CAAC;QACJ,CAAC;QAED,SAAS,qCAAqC,CAC7C,UAAyF,EACzF,aAA4F;YAE5F,uEAAuE;YACvE,oBAAoB,CAAC,oBAAoB,sFAA8C,UAAU,CAAC,CAAC;YAEnG,mDAAmD;YACnD,MAAM,eAAe,GAAG,oBAAoB,CAAC,OAAO,CAAC;YACrD,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,QAAQ,CAAC;YAEvD,oBAAoB,CAAC,OAAO,GAAG,CAAI,GAAW,EAAO,EAAE;gBACtD,IAAI,GAAG,wFAAgD,EAAE,CAAC;oBACzD,OAAO;wBACN,OAAO,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE;wBACjC,IAAI,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE;wBAC3B,SAAS,EAAE,SAAS;wBACpB,eAAe,EAAE,SAAS;wBAC1B,WAAW,EAAE,SAAS;wBACtB,MAAM,EAAE,SAAS;wBACjB,MAAM,EAAE,SAAS;wBACjB,KAAK,EAAE,EAAE,GAAG,aAAa,EAAE,GAAG,UAAU,EAAE;qBAC1C,CAAC;gBACH,CAAC;gBACD,OAAO,eAAe,CAAC,IAAI,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,oBAAoB,CAAC,QAAQ,GAAG,CAAC,GAAW,EAAO,EAAE;gBACpD,IAAI,GAAG,wFAAgD,EAAE,CAAC;oBACzD,OAAO,EAAE,GAAG,aAAa,EAAE,GAAG,UAAU,EAAE,CAAC;gBAC5C,CAAC;gBACD,OAAO,gBAAgB,CAAC,IAAI,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC;YACzD,CAAC,CAAC;YAEF,+BAA+B;YAC/B,oBAAoB,CAAC,+BAA+B,CAAC,IAAI,CAAC;gBACzD,oBAAoB,EAAE,GAAG,EAAE,CAAC,IAAI;gBAChC,YAAY,EAAE,IAAI,GAAG,CAAC,qFAA6C,CAAC;gBACpE,MAAM,kCAA0B;gBAChC,MAAM,EAAE,IAAK;aACb,CAAC,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,+DAA+D,EAAE,GAAG,EAAE;YAC1E,0BAA0B,CACzB,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,EAC1C,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAC7B,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,uFAAuF,CAAC,CAAC;YAC3I,WAAW,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,8DAA8D,CAAC,CAAC;YAC/G,WAAW,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,+DAA+D,CAAC,CAAC;YAC7G,WAAW,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,sFAAsF,CAAC,CAAC;QAC7I,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sFAAsF,EAAE,GAAG,EAAE;YACjG,0BAA0B,CACzB,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAG,gCAAgC;YAC/D,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAE,+BAA+B;aAC9D,CAAC;YAEF,gDAAgD;YAChD,WAAW,CAAC,uBAAuB,CAAC,qBAAqB,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,yBAAyB,CAAC,CAAC;YAC5H,WAAW,CAAC,uBAAuB,CAAC,qBAAqB,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,uBAAuB,CAAC,CAAC;YAExH,2DAA2D;YAC3D,MAAM,SAAS,GAAG,uBAAuB,CAAC,qBAAqB,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;YAClF,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,UAAU,EAAE,4CAA4C,CAAC,CAAC;YAExF,+EAA+E;YAC/E,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,iFAAiF,CAAC,CAAC;QACrI,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mDAAmD,EAAE,GAAG,EAAE;YAC9D,0BAA0B,CACzB,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAC5B,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,CAC7B,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,iFAAiF,CAAC,CAAC;YACtI,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,yDAAyD,CAAC,CAAC;QAC/G,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+CAA+C,EAAE,GAAG,EAAE;YAC1D,0BAA0B,CACzB,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,EACnC,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,CACrC,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,2DAA2D,CAAC,CAAC;YAC/G,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE,KAAK,EAAE,6DAA6D,CAAC,CAAC;QACpH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+CAA+C,EAAE,GAAG,EAAE;YAC1D,0BAA0B,CACzB,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,EAChC,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAC7B,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,iCAAiC,CAAC,CAAC;YACrF,WAAW,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,4BAA4B,CAAC,CAAC;QAC9E,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE;YAChE,qCAAqC,CACpC;gBACC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACjD,IAAI,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAChD,EACD;gBACC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACjD,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAChD,CACD,CAAC;YAEF,WAAW,CAAC,2BAA2B,CAAC,kBAAkB,CAAC,EAAE,IAAI,EAAE,6FAA6F,CAAC,CAAC;YAClK,WAAW,CAAC,2BAA2B,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,4DAA4D,CAAC,CAAC;QACzH,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE;YACpF,qCAAqC,CACpC;gBACC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBACjD,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE;aAChD,EACD;gBACC,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE;gBAClD,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE;aAChD,CACD,CAAC;YAEF,WAAW,CAAC,2BAA2B,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,oEAAoE,CAAC,CAAC;YACpI,WAAW,CAAC,2BAA2B,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,8GAA8G,CAAC,CAAC;QAC/K,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oDAAoD,EAAE,GAAG,EAAE;YAC/D,qCAAqC,CACpC;gBACC,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAC/C,EACD;gBACC,MAAM,EAAE,IAAI;gBACZ,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAC/C,CACD,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,6CAA6C,CAAC,CAAC;YACjG,WAAW,CAAC,2BAA2B,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,sEAAsE,CAAC,CAAC;QAClI,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2CAA2C,EAAE,GAAG,EAAE;YACtD,0BAA0B,CACzB,EAAE,MAAM,EAAE,IAAI,EAAE,EAChB,EAAE,KAAK,EAAE,IAAI,EAAE,CACf,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,EAAE,SAAS,EAAE,sDAAsD,CAAC,CAAC;YACpH,WAAW,CAAC,2BAA2B,CAAC,iBAAiB,CAAC,EAAE,SAAS,EAAE,sDAAsD,CAAC,CAAC;QAChI,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oCAAoC,EAAE,GAAG,EAAE;YAC/C,0BAA0B,CACzB,EAAE,EACF,EAAE,CACF,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,SAAS,CAAC,CAAC;YACvD,WAAW,CAAC,2BAA2B,CAAC,YAAY,CAAC,EAAE,SAAS,CAAC,CAAC;QACnE,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,0DAA0D,EAAE,GAAG,EAAE;YACrE,0BAA0B,CACzB,EAAE,EACF,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAC7B,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,0FAA0F,CAAC,CAAC;YAC9I,WAAW,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,0FAA0F,CAAC,CAAC;QAC3I,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2CAA2C,EAAE,GAAG,EAAE;YACtD,qCAAqC,CACpC;gBACC,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBAChD,KAAK,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,KAAK,EAAE;aAClD,EACD;gBACC,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;gBAChD,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE;aACnD,CACD,CAAC;YAEF,WAAW,CAAC,2BAA2B,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,2EAA2E,CAAC,CAAC;YAC3I,WAAW,CAAC,2BAA2B,CAAC,YAAY,CAAC,EAAE,SAAS,EAAE,8GAA8G,CAAC,CAAC;QACnL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kEAAkE,EAAE,GAAG,EAAE;YAC7E,KAAK,GAAG,MAAM,CAAC;YACf,EAAE,kCAA0B,CAAC;YAE7B,0BAA0B,CACzB,EAAE,aAAa,EAAE,IAAI,EAAE,EACvB,EAAE,aAAa,EAAE,IAAI,EAAE,CACvB,CAAC;YAEF,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,sDAAsD,CAAC,CAAC;YAC3G,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,sDAAsD,CAAC,CAAC;YAC3G,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,EAAE,IAAI,EAAE,sDAAsD,CAAC,CAAC;QAC5G,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sDAAsD,EAAE,GAAG,EAAE;YACjE,mFAAmF;YACnF,MAAM,UAAU,GAAG,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAE,CAAC;YACzE,MAAM,aAAa,GAAG,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAE,CAAC;YAE5E,qCAAqC,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;YAEjE,WAAW,CAAC,2BAA2B,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,mJAAmJ,CAAC,CAAC;QACrN,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,GAAG,EAAE;YAC5D,MAAM,UAAU,GAAG,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,EAAE,CAAC;YACzE,MAAM,aAAa,GAAG,EAAE,MAAM,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,KAAK,EAAE,EAAE,CAAC;YAE7E,qCAAqC,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;YAEjE,WAAW,CAAC,2BAA2B,CAAC,cAAc,CAAC,EAAE,KAAK,EAAE,2EAA2E,CAAC,CAAC;QAC9I,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAChD,MAAM,UAAU,GAAG;gBAClB,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAClD,CAAC;YACF,MAAM,aAAa,GAAG;gBACrB,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE;aAClD,CAAC;YAEF,qCAAqC,CAAC,UAAU,EAAE,aAAa,CAAC,CAAC;YAEjE,WAAW,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,mCAAmC,CAAC,CAAC;YACrF,WAAW,CAAC,2BAA2B,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,4FAA4F,CAAC,CAAC;QAC1J,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC3C,SAAS,0BAA0B,CAAC,UAAsC,EAAE,aAAyC;YACpH,gDAAgD;YAChD,oBAAoB,CAAC,oBAAoB,sFAA8C,UAAU,CAAC,CAAC;YAEnG,mDAAmD;YACnD,MAAM,eAAe,GAAG,oBAAoB,CAAC,OAAO,CAAC;YACrD,MAAM,gBAAgB,GAAG,oBAAoB,CAAC,QAAQ,CAAC;YAEvD,oBAAoB,CAAC,OAAO,GAAG,CAAC,GAAW,EAAO,EAAE;gBACnD,IAAI,GAAG,wFAAgD,EAAE,CAAC;oBACzD,OAAO;wBACN,OAAO,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE;wBACjC,IAAI,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE;wBAC3B,SAAS,EAAE,SAAS;wBACpB,eAAe,EAAE,SAAS;wBAC1B,WAAW,EAAE,SAAS;wBACtB,MAAM,EAAE,SAAS;wBACjB,MAAM,EAAE,SAAS;wBACjB,KAAK,EAAE,EAAE,GAAG,aAAa,EAAE,GAAG,UAAU,EAAE;qBAC1C,CAAC;gBACH,CAAC;gBACD,OAAO,eAAe,CAAC,IAAI,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,oBAAoB,CAAC,QAAQ,GAAG,CAAC,GAAW,EAAO,EAAE;gBACpD,IAAI,GAAG,wFAAgD,EAAE,CAAC;oBACzD,OAAO,EAAE,GAAG,aAAa,EAAE,GAAG,UAAU,EAAE,CAAC;gBAC5C,CAAC;gBACD,OAAO,gBAAgB,CAAC,IAAI,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAC;YACzD,CAAC,CAAC;YAEF,+BAA+B;YAC/B,oBAAoB,CAAC,+BAA+B,CAAC,IAAI,CAAC;gBACzD,oBAAoB,EAAE,GAAG,EAAE,CAAC,IAAI;gBAChC,YAAY,EAAE,IAAI,GAAG,CAAC,qFAA6C,CAAC;gBACpE,MAAM,kCAA0B;gBAChC,MAAM,EAAE,IAAK;aACb,CAAC,CAAC;QACJ,CAAC;QAED,SAAS,gCAAgC,CAAC,KAAc;YACvD,SAAS,0HAAgE,KAAK,CAAC,CAAC;QACjF,CAAC;QAED,IAAI,CAAC,6FAA6F,EAAE,GAAG,EAAE;YACxG,0BAA0B,CACzB,EAAE,IAAI,EAAE,IAAI,EAAE,EACd,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAC7B,CAAC;YACF,gCAAgC,CAAC,KAAK,CAAC,CAAC;YAExC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,+BAA+B,CAAC,CAAC;YAC9D,EAAE,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,2CAA2C,CAAC,CAAC;YAC9E,EAAE,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE,2CAA2C,CAAC,CAAC;QACjF,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE;YACpF,0BAA0B,CACzB,EAAE,IAAI,EAAE,IAAI,EAAE,EACd,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAC7B,CAAC;YACF,gCAAgC,CAAC,IAAI,CAAC,CAAC;YAEvC,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,qCAAqC,CAAC,CAAC;YACpE,EAAE,CAAC,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,gCAAgC,CAAC,CAAC;YACpE,EAAE,CAAC,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE,gCAAgC,CAAC,CAAC;QACvE,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"commandLineAutoApprover.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { OperatingSystem } from '../../../../../../base/common/platform.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport type { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { TerminalChatAgentToolsSettingId } from '../../common/terminalChatAgentToolsConfiguration.js';\nimport { CommandLineAutoApprover } from '../../browser/commandLineAutoApprover.js';\nimport { ConfigurationTarget } from '../../../../../../platform/configuration/common/configuration.js';\nimport { ok, strictEqual } from 'assert';\n\nsuite('CommandLineAutoApprover', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: IInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\n\tlet commandLineAutoApprover: CommandLineAutoApprover;\n\tlet shell: string;\n\tlet os: OperatingSystem;\n\n\tsetup(() => {\n\t\tconfigurationService = new TestConfigurationService();\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tconfigurationService: () => configurationService\n\t\t}, store);\n\n\t\tshell = 'bash';\n\t\tos = OperatingSystem.Linux;\n\t\tcommandLineAutoApprover = store.add(instantiationService.createInstance(CommandLineAutoApprover));\n\t});\n\n\tfunction setAutoApprove(value: { [key: string]: boolean }) {\n\t\tsetConfig(TerminalChatAgentToolsSettingId.AutoApprove, value);\n\t}\n\n\tfunction setAutoApproveWithCommandLine(value: { [key: string]: { approve: boolean; matchCommandLine?: boolean } | boolean }) {\n\t\tsetConfig(TerminalChatAgentToolsSettingId.AutoApprove, value);\n\t}\n\n\tfunction setConfig(key: string, value: unknown) {\n\t\tconfigurationService.setUserConfiguration(key, value);\n\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\taffectsConfiguration: () => true,\n\t\t\taffectedKeys: new Set([key]),\n\t\t\tsource: ConfigurationTarget.USER,\n\t\t\tchange: null!,\n\t\t});\n\t}\n\n\tfunction isAutoApproved(commandLine: string): boolean {\n\t\treturn commandLineAutoApprover.isCommandAutoApproved(commandLine, shell, os).result === 'approved';\n\t}\n\n\tfunction isCommandLineAutoApproved(commandLine: string): boolean {\n\t\treturn commandLineAutoApprover.isCommandLineAutoApproved(commandLine).result === 'approved';\n\t}\n\n\tsuite('autoApprove with allow patterns only', () => {\n\t\ttest('should auto-approve exact command match', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(isAutoApproved('echo'));\n\t\t});\n\n\t\ttest('should auto-approve command with arguments', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(isAutoApproved('echo hello world'));\n\t\t});\n\n\t\ttest('should not auto-approve when there is no match', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(!isAutoApproved('ls'));\n\t\t});\n\n\t\ttest('should not auto-approve partial command matches', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(!isAutoApproved('echotest'));\n\t\t});\n\n\t\ttest('should handle multiple commands in autoApprove', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'ls': true,\n\t\t\t\t'pwd': true\n\t\t\t});\n\t\t\tok(isAutoApproved('echo'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm'));\n\t\t});\n\t});\n\n\tsuite('autoApprove with deny patterns only', () => {\n\t\ttest('should deny commands in autoApprove', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'rm': false,\n\t\t\t\t'del': false\n\t\t\t});\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('del file.txt'));\n\t\t});\n\n\t\ttest('should not auto-approve safe commands when no allow patterns are present', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'rm': false\n\t\t\t});\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t});\n\t});\n\n\tsuite('autoApprove with mixed allow and deny patterns', () => {\n\t\ttest('should deny commands set to false even if other commands are set to true', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'rm': false\n\t\t\t});\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t});\n\n\t\ttest('should auto-approve allow patterns not set to false', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'ls': true,\n\t\t\t\t'pwd': true,\n\t\t\t\t'rm': false,\n\t\t\t\t'del': false\n\t\t\t});\n\t\t\tok(isAutoApproved('echo'));\n\t\t\tok(isAutoApproved('ls'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm'));\n\t\t\tok(!isAutoApproved('del'));\n\t\t});\n\t});\n\n\tsuite('regex patterns', () => {\n\t\ttest('should handle /.*/', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/.*/': true,\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle regex patterns in autoApprove', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^echo/': true,\n\t\t\t\t'/^ls/': true,\n\t\t\t\t'pwd': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle regex patterns for deny', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'rm': true,\n\t\t\t\t'/^rm\\\\s+/': false,\n\t\t\t\t'/^del\\\\s+/': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('rm'));\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('del file.txt'));\n\t\t});\n\n\t\ttest('should handle complex regex patterns', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^(echo|ls|pwd)\\\\b/': true,\n\t\t\t\t'/^git (status|show\\\\b.*)$/': true,\n\t\t\t\t'/rm|del|kill/': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo test'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(isAutoApproved('git status'));\n\t\t\tok(isAutoApproved('git show'));\n\t\t\tok(isAutoApproved('git show HEAD'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t\tok(!isAutoApproved('del file'));\n\t\t\tok(!isAutoApproved('kill process'));\n\t\t});\n\n\t\tsuite('flags', () => {\n\t\t\ttest('should handle case-insensitive regex patterns with i flag', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^echo/i': true,\n\t\t\t\t\t'/^ls/i': true,\n\t\t\t\t\t'/rm|del/i': false\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('echo hello'));\n\t\t\t\tok(isAutoApproved('ECHO hello'));\n\t\t\t\tok(isAutoApproved('Echo hello'));\n\t\t\t\tok(isAutoApproved('ls -la'));\n\t\t\t\tok(isAutoApproved('LS -la'));\n\t\t\t\tok(isAutoApproved('Ls -la'));\n\t\t\t\tok(!isAutoApproved('rm file'));\n\t\t\t\tok(!isAutoApproved('RM file'));\n\t\t\t\tok(!isAutoApproved('del file'));\n\t\t\t\tok(!isAutoApproved('DEL file'));\n\t\t\t});\n\n\t\t\ttest('should handle multiple regex flags', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^git\\\\s+/gim': true,\n\t\t\t\t\t'/dangerous/gim': false\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('git status'));\n\t\t\t\tok(isAutoApproved('GIT status'));\n\t\t\t\tok(isAutoApproved('Git status'));\n\t\t\t\tok(!isAutoApproved('dangerous command'));\n\t\t\t\tok(!isAutoApproved('DANGEROUS command'));\n\t\t\t});\n\n\t\t\ttest('should handle various regex flags', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^echo.*/s': true,  // dotall flag\n\t\t\t\t\t'/^git\\\\s+/i': true, // case-insensitive flag\n\t\t\t\t\t'/rm|del/g': false   // global flag\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('echo hello\\nworld'));\n\t\t\t\tok(isAutoApproved('git status'));\n\t\t\t\tok(isAutoApproved('GIT status'));\n\t\t\t\tok(!isAutoApproved('rm file'));\n\t\t\t\tok(!isAutoApproved('del file'));\n\t\t\t});\n\n\t\t\ttest('should handle regex patterns without flags', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^echo/': true,\n\t\t\t\t\t'/rm|del/': false\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('echo hello'));\n\t\t\t\tok(!isAutoApproved('ECHO hello'), 'Should be case-sensitive without i flag');\n\t\t\t\tok(!isAutoApproved('rm file'));\n\t\t\t\tok(!isAutoApproved('RM file'), 'Should be case-sensitive without i flag');\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('edge cases', () => {\n\t\ttest('should handle empty autoApprove', () => {\n\t\t\tsetAutoApprove({});\n\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle empty command strings', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\tok(!isAutoApproved(''));\n\t\t\tok(!isAutoApproved('   '));\n\t\t});\n\n\t\ttest('should handle whitespace in commands', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo   hello   world'));\n\t\t});\n\n\t\ttest('should be case-sensitive by default', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ECHO hello'));\n\t\t\tok(!isAutoApproved('Echo hello'));\n\t\t});\n\n\t\t// https://github.com/microsoft/vscode/issues/252411\n\t\ttest('should handle string-based values with special regex characters', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'pwsh.exe -File D:\\\\foo.bar\\\\a-script.ps1': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('pwsh.exe -File D:\\\\foo.bar\\\\a-script.ps1'));\n\t\t\tok(isAutoApproved('pwsh.exe -File D:\\\\foo.bar\\\\a-script.ps1 -AnotherArg'));\n\t\t});\n\n\t\ttest('should ignore the empty string key', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'': true\n\t\t\t});\n\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle empty regex patterns that could cause endless loops', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'//': true,\n\t\t\t\t'/(?:)/': true,\n\t\t\t\t'/*/': true,            // Invalid regex pattern\n\t\t\t\t'/.**/': true           // Invalid regex pattern\n\t\t\t});\n\n\t\t\t// These patterns should not cause endless loops and should not match any commands\n\t\t\t// Invalid patterns should be handled gracefully and not match anything\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t\tok(!isAutoApproved(''));\n\t\t});\n\n\t\ttest('should handle regex patterns that would cause endless loops', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/a*/': true,\n\t\t\t\t'/b?/': true,\n\t\t\t\t'/(x|)*/': true,\n\t\t\t\t'/(?:)*/': true\n\t\t\t});\n\n\t\t\t// Commands should still work normally, endless loop patterns should be safely handled\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t\tok(!isAutoApproved('a'));\n\t\t\tok(!isAutoApproved('b'));\n\t\t});\n\n\t\ttest('should handle mixed valid and problematic regex patterns', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^echo/': true,        // Valid pattern\n\t\t\t\t'//': true,             // Empty pattern\n\t\t\t\t'/^ls/': true,          // Valid pattern\n\t\t\t\t'/a*/': true,           // Potential endless loop\n\t\t\t\t'pwd': true             // Valid string pattern\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle invalid regex patterns gracefully', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/*/': true,                    // Invalid regex - nothing to repeat\n\t\t\t\t'/(?:+/': true,                 // Invalid regex - incomplete quantifier\n\t\t\t\t'/[/': true,                    // Invalid regex - unclosed character class\n\t\t\t\t'/^echo/': true,                // Valid pattern\n\t\t\t\t'ls': true                      // Valid string pattern\n\t\t\t});\n\n\t\t\t// Valid patterns should still work\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\t// Invalid patterns should not match anything and not cause crashes\n\t\t\tok(!isAutoApproved('random command'));\n\t\t});\n\t});\n\n\tsuite('path-aware auto approval', () => {\n\t\ttest('should handle path variations with forward slashes', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin/foo': true\n\t\t\t});\n\n\t\t\t// Should approve the exact match\n\t\t\tok(isAutoApproved('bin/foo'));\n\t\t\tok(isAutoApproved('bin/foo --arg'));\n\n\t\t\t// Should approve with Windows backslashes\n\t\t\tok(isAutoApproved('bin\\\\foo'));\n\t\t\tok(isAutoApproved('bin\\\\foo --arg'));\n\n\t\t\t// Should approve with current directory prefixes\n\t\t\tok(isAutoApproved('./bin/foo'));\n\t\t\tok(isAutoApproved('.\\\\bin/foo'));\n\t\t\tok(isAutoApproved('./bin\\\\foo'));\n\t\t\tok(isAutoApproved('.\\\\bin\\\\foo'));\n\n\t\t\t// Should not approve partial matches\n\t\t\tok(!isAutoApproved('bin/foobar'));\n\t\t\tok(!isAutoApproved('notbin/foo'));\n\t\t});\n\n\t\ttest('should handle path variations with backslashes', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin\\\\script.bat': true\n\t\t\t});\n\n\t\t\t// Should approve the exact match\n\t\t\tok(isAutoApproved('bin\\\\script.bat'));\n\t\t\tok(isAutoApproved('bin\\\\script.bat --help'));\n\n\t\t\t// Should approve with forward slashes\n\t\t\tok(isAutoApproved('bin/script.bat'));\n\t\t\tok(isAutoApproved('bin/script.bat --help'));\n\n\t\t\t// Should approve with current directory prefixes\n\t\t\tok(isAutoApproved('./bin\\\\script.bat'));\n\t\t\tok(isAutoApproved('.\\\\bin\\\\script.bat'));\n\t\t\tok(isAutoApproved('./bin/script.bat'));\n\t\t\tok(isAutoApproved('.\\\\bin/script.bat'));\n\t\t});\n\n\t\ttest('should handle deep paths', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'src/utils/helper.js': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('src/utils/helper.js'));\n\t\t\tok(isAutoApproved('src\\\\utils\\\\helper.js'));\n\t\t\tok(isAutoApproved('src/utils\\\\helper.js'));\n\t\t\tok(isAutoApproved('src\\\\utils/helper.js'));\n\t\t\tok(isAutoApproved('./src/utils/helper.js'));\n\t\t\tok(isAutoApproved('.\\\\src\\\\utils\\\\helper.js'));\n\t\t});\n\n\t\ttest('should not treat non-paths as paths', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,  // Not a path\n\t\t\t\t'ls': true,    // Not a path\n\t\t\t\t'git': true    // Not a path\n\t\t\t});\n\n\t\t\t// These should work as normal command matching, not path matching\n\t\t\tok(isAutoApproved('echo'));\n\t\t\tok(isAutoApproved('ls'));\n\t\t\tok(isAutoApproved('git'));\n\n\t\t\t// Should not be treated as paths, so these prefixes shouldn't work\n\t\t\tok(!isAutoApproved('./echo'));\n\t\t\tok(!isAutoApproved('.\\\\ls'));\n\t\t});\n\n\t\ttest('should handle paths with mixed separators in config', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin/foo\\\\bar': true  // Mixed separators in config\n\t\t\t});\n\n\t\t\tok(isAutoApproved('bin/foo\\\\bar'));\n\t\t\tok(isAutoApproved('bin\\\\foo/bar'));\n\t\t\tok(isAutoApproved('bin/foo/bar'));\n\t\t\tok(isAutoApproved('bin\\\\foo\\\\bar'));\n\t\t\tok(isAutoApproved('./bin/foo\\\\bar'));\n\t\t\tok(isAutoApproved('.\\\\bin\\\\foo\\\\bar'));\n\t\t});\n\n\t\ttest('should work with command line auto approval for paths', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'bin/deploy': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('bin/deploy --prod'));\n\t\t\tok(isCommandLineAutoApproved('bin\\\\deploy --prod'));\n\t\t\tok(isCommandLineAutoApproved('./bin/deploy --prod'));\n\t\t\tok(isCommandLineAutoApproved('.\\\\bin\\\\deploy --prod'));\n\t\t});\n\n\t\ttest('should handle special characters in paths', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin/my-script.sh': true,\n\t\t\t\t'scripts/build_all.py': true,\n\t\t\t\t'tools/run (debug).exe': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('bin/my-script.sh'));\n\t\t\tok(isAutoApproved('bin\\\\my-script.sh'));\n\t\t\tok(isAutoApproved('./bin/my-script.sh'));\n\n\t\t\tok(isAutoApproved('scripts/build_all.py'));\n\t\t\tok(isAutoApproved('scripts\\\\build_all.py'));\n\n\t\t\tok(isAutoApproved('tools/run (debug).exe'));\n\t\t\tok(isAutoApproved('tools\\\\run (debug).exe'));\n\t\t});\n\t});\n\n\tsuite('PowerShell-specific commands', () => {\n\t\tsetup(() => {\n\t\t\tshell = 'pwsh';\n\t\t});\n\n\t\ttest('should handle Windows PowerShell commands', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-ChildItem': true,\n\t\t\t\t'Get-Content': true,\n\t\t\t\t'Get-Location': true,\n\t\t\t\t'Remove-Item': false,\n\t\t\t\t'del': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-ChildItem'));\n\t\t\tok(isAutoApproved('Get-Content file.txt'));\n\t\t\tok(isAutoApproved('Get-Location'));\n\t\t\tok(!isAutoApproved('Remove-Item file.txt'));\n\t\t});\n\n\t\ttest('should handle ( prefixes', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-Content': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-Content file.txt'));\n\t\t\tok(isAutoApproved('(Get-Content file.txt'));\n\t\t\tok(!isAutoApproved('[Get-Content'));\n\t\t\tok(!isAutoApproved('foo'));\n\t\t});\n\n\t\ttest('should be case-insensitive for PowerShell commands', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-ChildItem': true,\n\t\t\t\t'Get-Content': true,\n\t\t\t\t'Remove-Item': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-ChildItem'));\n\t\t\tok(isAutoApproved('get-childitem'));\n\t\t\tok(isAutoApproved('GET-CHILDITEM'));\n\t\t\tok(isAutoApproved('Get-childitem'));\n\t\t\tok(isAutoApproved('get-ChildItem'));\n\n\t\t\tok(isAutoApproved('Get-Content file.txt'));\n\t\t\tok(isAutoApproved('get-content file.txt'));\n\t\t\tok(isAutoApproved('GET-CONTENT file.txt'));\n\t\t\tok(isAutoApproved('Get-content file.txt'));\n\n\t\t\tok(!isAutoApproved('Remove-Item file.txt'));\n\t\t\tok(!isAutoApproved('remove-item file.txt'));\n\t\t\tok(!isAutoApproved('REMOVE-ITEM file.txt'));\n\t\t\tok(!isAutoApproved('Remove-item file.txt'));\n\t\t});\n\n\t\ttest('should be case-insensitive for PowerShell aliases', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'ls': true,\n\t\t\t\t'dir': true,\n\t\t\t\t'rm': false,\n\t\t\t\t'del': false\n\t\t\t});\n\n\t\t\t// Test case-insensitive matching for aliases\n\t\t\tok(isAutoApproved('ls'));\n\t\t\tok(isAutoApproved('LS'));\n\t\t\tok(isAutoApproved('Ls'));\n\n\t\t\tok(isAutoApproved('dir'));\n\t\t\tok(isAutoApproved('DIR'));\n\t\t\tok(isAutoApproved('Dir'));\n\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('RM file.txt'));\n\t\t\tok(!isAutoApproved('Rm file.txt'));\n\n\t\t\tok(!isAutoApproved('del file.txt'));\n\t\t\tok(!isAutoApproved('DEL file.txt'));\n\t\t\tok(!isAutoApproved('Del file.txt'));\n\t\t});\n\n\t\ttest('should be case-insensitive with regex patterns', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^Get-/': true,\n\t\t\t\t'/Remove-Item|rm/': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-ChildItem'));\n\t\t\tok(isAutoApproved('get-childitem'));\n\t\t\tok(isAutoApproved('GET-PROCESS'));\n\t\t\tok(isAutoApproved('Get-Location'));\n\n\t\t\tok(!isAutoApproved('Remove-Item file.txt'));\n\t\t\tok(!isAutoApproved('remove-item file.txt'));\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('RM file.txt'));\n\t\t});\n\n\t\ttest('should handle case-insensitive PowerShell commands on different OS', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-Process': true,\n\t\t\t\t'Stop-Process': false\n\t\t\t});\n\n\t\t\tfor (const currnetOS of [OperatingSystem.Windows, OperatingSystem.Linux, OperatingSystem.Macintosh]) {\n\t\t\t\tos = currnetOS;\n\t\t\t\tok(isAutoApproved('Get-Process'), `os=${os}`);\n\t\t\t\tok(isAutoApproved('get-process'), `os=${os}`);\n\t\t\t\tok(isAutoApproved('GET-PROCESS'), `os=${os}`);\n\t\t\t\tok(!isAutoApproved('Stop-Process'), `os=${os}`);\n\t\t\t\tok(!isAutoApproved('stop-process'), `os=${os}`);\n\t\t\t}\n\t\t});\n\t});\n\n\tsuite('isCommandLineAutoApproved - matchCommandLine functionality', () => {\n\t\ttest('should auto-approve command line patterns with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('echo test && ls'));\n\t\t});\n\n\t\ttest('should not auto-approve regular patterns with isCommandLineAutoApproved', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\t// Regular patterns should not be matched by isCommandLineAutoApproved\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle regex patterns with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/echo.*world/': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello world'));\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle case-insensitive regex with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/echo/i': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('ECHO hello'));\n\t\t\tok(isCommandLineAutoApproved('Echo hello'));\n\t\t});\n\n\t\ttest('should handle complex command line patterns', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/^npm run build/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/\\.ps1/i': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('npm run build --production'));\n\t\t\tok(isCommandLineAutoApproved('powershell -File script.ps1'));\n\t\t\tok(isCommandLineAutoApproved('pwsh -File SCRIPT.PS1'));\n\t\t\tok(!isCommandLineAutoApproved('npm install'));\n\t\t});\n\n\t\ttest('should return false for empty command line', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(!isCommandLineAutoApproved(''));\n\t\t\tok(!isCommandLineAutoApproved('   '));\n\t\t});\n\n\t\ttest('should handle mixed configuration with matchCommandLine entries', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': true,  // Regular pattern\n\t\t\t\t'ls': { approve: true, matchCommandLine: true },  // Command line pattern\n\t\t\t\t'rm': { approve: true, matchCommandLine: false }  // Explicit regular pattern\n\t\t\t});\n\n\t\t\t// Only the matchCommandLine: true entry should work with isCommandLineAutoApproved\n\t\t\tok(isCommandLineAutoApproved('ls -la'));\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('rm file.txt'));\n\t\t});\n\n\t\ttest('should handle deny patterns with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t'/dangerous/': { approve: false, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('echo dangerous command'));\n\t\t\tok(!isCommandLineAutoApproved('dangerous operation'));\n\t\t});\n\n\t\ttest('should prioritize deny list over allow list for command line patterns', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/echo/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/echo.*dangerous/': { approve: false, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('echo dangerous command'));\n\t\t});\n\n\t\ttest('should handle complex deny patterns with matchCommandLine', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'npm': { approve: true, matchCommandLine: true },\n\t\t\t\t'/npm.*--force/': { approve: false, matchCommandLine: true },\n\t\t\t\t'/\\.ps1.*-ExecutionPolicy/i': { approve: false, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('npm install'));\n\t\t\tok(isCommandLineAutoApproved('npm run build'));\n\t\t\tok(!isCommandLineAutoApproved('npm install --force'));\n\t\t\tok(!isCommandLineAutoApproved('powershell -File script.ps1 -ExecutionPolicy Bypass'));\n\t\t});\n\n\t\ttest('should handle empty regex patterns with matchCommandLine that could cause endless loops', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'//': { approve: true, matchCommandLine: true },\n\t\t\t\t'/(?:)/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/*/': { approve: true, matchCommandLine: true },            // Invalid regex pattern\n\t\t\t\t'/.**/': { approve: true, matchCommandLine: true }           // Invalid regex pattern\n\t\t\t});\n\n\t\t\t// These patterns should not cause endless loops and should not match any commands\n\t\t\t// Invalid patterns should be handled gracefully and not match anything\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('ls'));\n\t\t\tok(!isCommandLineAutoApproved(''));\n\t\t});\n\n\t\ttest('should handle regex patterns with matchCommandLine that would cause endless loops', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/a*/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/b?/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/(x|)*/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/(?:)*/': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\t// Commands should still work normally, endless loop patterns should be safely handled\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('ls'));\n\t\t\tok(!isCommandLineAutoApproved('a'));\n\t\t\tok(!isCommandLineAutoApproved('b'));\n\t\t});\n\n\t\ttest('should handle mixed valid and problematic regex patterns with matchCommandLine', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/^echo/': { approve: true, matchCommandLine: true },        // Valid pattern\n\t\t\t\t'//': { approve: true, matchCommandLine: true },             // Empty pattern\n\t\t\t\t'/^ls/': { approve: true, matchCommandLine: true },          // Valid pattern\n\t\t\t\t'/a*/': { approve: true, matchCommandLine: true },           // Potential endless loop\n\t\t\t\t'pwd': { approve: true, matchCommandLine: true }             // Valid string pattern\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('ls -la'));\n\t\t\tok(isCommandLineAutoApproved('pwd'));\n\t\t\tok(!isCommandLineAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle invalid regex patterns with matchCommandLine gracefully', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/*/': { approve: true, matchCommandLine: true },                    // Invalid regex - nothing to repeat\n\t\t\t\t'/(?:+/': { approve: true, matchCommandLine: true },                 // Invalid regex - incomplete quantifier\n\t\t\t\t'/[/': { approve: true, matchCommandLine: true },                    // Invalid regex - unclosed character class\n\t\t\t\t'/^echo/': { approve: true, matchCommandLine: true },                // Valid pattern\n\t\t\t\t'ls': { approve: true, matchCommandLine: true }                      // Valid string pattern\n\t\t\t});\n\n\t\t\t// Valid patterns should still work\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('ls -la'));\n\t\t\t// Invalid patterns should not match anything and not cause crashes\n\t\t\tok(!isCommandLineAutoApproved('random command'));\n\t\t});\n\t});\n\n\tsuite('reasons', () => {\n\t\tfunction getCommandReason(command: string): string {\n\t\t\treturn commandLineAutoApprover.isCommandAutoApproved(command, shell, os).reason;\n\t\t}\n\n\t\tfunction getCommandLineReason(commandLine: string): string {\n\t\t\treturn commandLineAutoApprover.isCommandLineAutoApproved(commandLine).reason;\n\t\t}\n\n\t\tsuite('command', () => {\n\t\t\ttest('approved', () => {\n\t\t\t\tsetAutoApprove({ echo: true });\n\t\t\t\tstrictEqual(getCommandReason('echo hello'), `Command 'echo hello' is approved by allow list rule: echo`);\n\t\t\t});\n\t\t\ttest('not approved', () => {\n\t\t\t\tsetAutoApprove({ echo: false });\n\t\t\t\tstrictEqual(getCommandReason('echo hello'), `Command 'echo hello' is denied by deny list rule: echo`);\n\t\t\t});\n\t\t\ttest('no match', () => {\n\t\t\t\tsetAutoApprove({});\n\t\t\t\tstrictEqual(getCommandReason('echo hello'), `Command 'echo hello' has no matching auto approve entries`);\n\t\t\t});\n\t\t});\n\n\t\tsuite('command line', () => {\n\t\t\ttest('approved', () => {\n\t\t\t\tsetAutoApproveWithCommandLine({ echo: { approve: true, matchCommandLine: true } });\n\t\t\t\tstrictEqual(getCommandLineReason('echo hello'), `Command line 'echo hello' is approved by allow list rule: echo`);\n\t\t\t});\n\t\t\ttest('not approved', () => {\n\t\t\t\tsetAutoApproveWithCommandLine({ echo: { approve: false, matchCommandLine: true } });\n\t\t\t\tstrictEqual(getCommandLineReason('echo hello'), `Command line 'echo hello' is denied by deny list rule: echo`);\n\t\t\t});\n\t\t\ttest('no match', () => {\n\t\t\t\tsetAutoApproveWithCommandLine({});\n\t\t\t\tstrictEqual(getCommandLineReason('echo hello'), `Command line 'echo hello' has no matching auto approve entries`);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('isDefaultRule logic', () => {\n\t\tfunction getIsDefaultRule(command: string): boolean | undefined {\n\t\t\treturn commandLineAutoApprover.isCommandAutoApproved(command, shell, os).rule?.isDefaultRule;\n\t\t}\n\n\t\tfunction getCommandLineIsDefaultRule(commandLine: string): boolean | undefined {\n\t\t\treturn commandLineAutoApprover.isCommandLineAutoApproved(commandLine).rule?.isDefaultRule;\n\t\t}\n\n\t\tfunction setAutoApproveWithDefaults(userConfig: { [key: string]: boolean }, defaultConfig: { [key: string]: boolean }) {\n\t\t\t// Set up mock configuration with default values\n\t\t\tconfigurationService.setUserConfiguration(TerminalChatAgentToolsSettingId.AutoApprove, userConfig);\n\n\t\t\t// Mock the inspect method to return default values\n\t\t\tconst originalInspect = configurationService.inspect;\n\t\t\tconst originalGetValue = configurationService.getValue;\n\n\t\t\tconfigurationService.inspect = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdefault: { value: defaultConfig },\n\t\t\t\t\t\tuser: { value: userConfig },\n\t\t\t\t\t\tworkspace: undefined,\n\t\t\t\t\t\tworkspaceFolder: undefined,\n\t\t\t\t\t\tapplication: undefined,\n\t\t\t\t\t\tpolicy: undefined,\n\t\t\t\t\t\tmemory: undefined,\n\t\t\t\t\t\tvalue: { ...defaultConfig, ...userConfig }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn originalInspect.call(configurationService, key);\n\t\t\t};\n\n\t\t\tconfigurationService.getValue = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn { ...defaultConfig, ...userConfig };\n\t\t\t\t}\n\t\t\t\treturn originalGetValue.call(configurationService, key);\n\t\t\t};\n\n\t\t\t// Trigger configuration update\n\t\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\t\taffectsConfiguration: () => true,\n\t\t\t\taffectedKeys: new Set([TerminalChatAgentToolsSettingId.AutoApprove]),\n\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\tchange: null!,\n\t\t\t});\n\t\t}\n\n\t\tfunction setAutoApproveWithDefaultsCommandLine(\n\t\t\tuserConfig: { [key: string]: { approve: boolean; matchCommandLine?: boolean } | boolean },\n\t\t\tdefaultConfig: { [key: string]: { approve: boolean; matchCommandLine?: boolean } | boolean }\n\t\t) {\n\t\t\t// Set up mock configuration with default values for command line rules\n\t\t\tconfigurationService.setUserConfiguration(TerminalChatAgentToolsSettingId.AutoApprove, userConfig);\n\n\t\t\t// Mock the inspect method to return default values\n\t\t\tconst originalInspect = configurationService.inspect;\n\t\t\tconst originalGetValue = configurationService.getValue;\n\n\t\t\tconfigurationService.inspect = <T>(key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdefault: { value: defaultConfig },\n\t\t\t\t\t\tuser: { value: userConfig },\n\t\t\t\t\t\tworkspace: undefined,\n\t\t\t\t\t\tworkspaceFolder: undefined,\n\t\t\t\t\t\tapplication: undefined,\n\t\t\t\t\t\tpolicy: undefined,\n\t\t\t\t\t\tmemory: undefined,\n\t\t\t\t\t\tvalue: { ...defaultConfig, ...userConfig }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn originalInspect.call(configurationService, key);\n\t\t\t};\n\n\t\t\tconfigurationService.getValue = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn { ...defaultConfig, ...userConfig };\n\t\t\t\t}\n\t\t\t\treturn originalGetValue.call(configurationService, key);\n\t\t\t};\n\n\t\t\t// Trigger configuration update\n\t\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\t\taffectsConfiguration: () => true,\n\t\t\t\taffectedKeys: new Set([TerminalChatAgentToolsSettingId.AutoApprove]),\n\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\tchange: null!,\n\t\t\t});\n\t\t}\n\n\t\ttest('should correctly identify default rules vs user-defined rules', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, 'ls': true, 'pwd': false },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'echo is in both default and user config with same value - should be marked as default');\n\t\t\tstrictEqual(getIsDefaultRule('ls -la'), false, 'ls is only in user config - should be marked as user-defined');\n\t\t\tstrictEqual(getIsDefaultRule('pwd'), false, 'pwd is only in user config - should be marked as user-defined');\n\t\t\tstrictEqual(getIsDefaultRule('cat file.txt'), true, 'cat is in both default and user config with same value - should be marked as default');\n\t\t});\n\n\t\ttest('should mark as default when command is only in default config but not in user config', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, 'ls': true },  // User config (cat is NOT here)\n\t\t\t\t{ 'echo': true, 'cat': true }  // Default config (cat IS here)\n\t\t\t);\n\n\t\t\t// Test that merged config includes all commands\n\t\t\tstrictEqual(commandLineAutoApprover.isCommandAutoApproved('echo', shell, os).result, 'approved', 'echo should be approved');\n\t\t\tstrictEqual(commandLineAutoApprover.isCommandAutoApproved('ls', shell, os).result, 'approved', 'ls should be approved');\n\n\t\t\t// cat should be approved because it's in the merged config\n\t\t\tconst catResult = commandLineAutoApprover.isCommandAutoApproved('cat', shell, os);\n\t\t\tstrictEqual(catResult.result, 'approved', 'cat should be approved from default config');\n\n\t\t\t// cat should be marked as default rule since it comes from default config only\n\t\t\tstrictEqual(catResult.rule?.isDefaultRule, true, 'cat is only in default config, not in user config - should be marked as default');\n\t\t});\n\n\t\ttest('should handle default rules with different values', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, 'rm': true },\n\t\t\t\t{ 'echo': false, 'rm': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), false, 'echo has different values in default vs user - should be marked as user-defined');\n\t\t\tstrictEqual(getIsDefaultRule('rm file.txt'), true, 'rm has same value in both - should be marked as default');\n\t\t});\n\n\t\ttest('should handle regex patterns as default rules', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ '/^git/': true, '/^npm/': false },\n\t\t\t\t{ '/^git/': true, '/^docker/': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('git status'), true, 'git pattern matches default - should be marked as default');\n\t\t\tstrictEqual(getIsDefaultRule('npm install'), false, 'npm pattern is user-only - should be marked as user-defined');\n\t\t});\n\n\t\ttest('should handle mixed string and regex patterns', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, '/^ls/': false },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'String pattern matching default');\n\t\t\tstrictEqual(getIsDefaultRule('ls -la'), false, 'Regex pattern user-defined');\n\t\t});\n\n\t\ttest('should handle command line rules with isDefaultRule', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'ls': { approve: false, matchCommandLine: true }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'cat': { approve: true, matchCommandLine: true }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('echo hello world'), true, 'echo matches default config exactly using structural equality - should be marked as default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('ls -la'), false, 'ls is user-defined only - should be marked as user-defined');\n\t\t});\n\n\t\ttest('should handle command line rules with different matchCommandLine values', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: false }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: false },\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: false }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('echo hello'), false, 'echo has different matchCommandLine value - should be user-defined');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('ls -la'), undefined, 'ls matches exactly - should be default (but won\\'t match command line check since matchCommandLine is false)');\n\t\t});\n\n\t\ttest('should handle boolean vs object format consistency', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'echo': true,\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: true }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'echo': true,\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: true }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'Boolean format matching - should be default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('ls -la'), true, 'Object format matching using structural equality - should be default');\n\t\t});\n\n\t\ttest('should return undefined for noMatch cases', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true },\n\t\t\t\t{ 'cat': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('unknown-command'), undefined, 'Command that matches neither user nor default config');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('unknown-command'), undefined, 'Command that matches neither user nor default config');\n\t\t});\n\n\t\ttest('should handle empty configurations', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), undefined);\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('echo hello'), undefined);\n\t\t});\n\n\t\ttest('should handle only default config with no user overrides', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{},\n\t\t\t\t{ 'echo': true, 'ls': false }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'Commands in default config should be marked as default rules even with empty user config');\n\t\t\tstrictEqual(getIsDefaultRule('ls -la'), true, 'Commands in default config should be marked as default rules even with empty user config');\n\t\t});\n\n\t\ttest('should handle complex nested object rules', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'npm': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'git': { approve: false, matchCommandLine: false }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'npm': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'docker': { approve: true, matchCommandLine: true }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('npm install'), true, 'npm matches default exactly using structural equality - should be default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('git status'), undefined, 'git is user-defined - should be user-defined (but won\\'t match command line since matchCommandLine is false)');\n\t\t});\n\n\t\ttest('should handle PowerShell case-insensitive matching with defaults', () => {\n\t\t\tshell = 'pwsh';\n\t\t\tos = OperatingSystem.Windows;\n\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'Get-Process': true },\n\t\t\t\t{ 'Get-Process': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('Get-Process'), true, 'Case-insensitive PowerShell command matching default');\n\t\t\tstrictEqual(getIsDefaultRule('get-process'), true, 'Case-insensitive PowerShell command matching default');\n\t\t\tstrictEqual(getIsDefaultRule('GET-PROCESS'), true, 'Case-insensitive PowerShell command matching default');\n\t\t});\n\n\t\ttest('should use structural equality for object comparison', () => {\n\t\t\t// Test that objects with same content but different instances are treated as equal\n\t\t\tconst userConfig = { 'test': { approve: true, matchCommandLine: true } };\n\t\t\tconst defaultConfig = { 'test': { approve: true, matchCommandLine: true } };\n\n\t\t\tsetAutoApproveWithDefaultsCommandLine(userConfig, defaultConfig);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('test command'), true, 'Even though userConfig and defaultConfig are different object instances, they have the same structure and values, so should be considered default');\n\t\t});\n\n\t\ttest('should detect structural differences in objects', () => {\n\t\t\tconst userConfig = { 'test': { approve: true, matchCommandLine: true } };\n\t\t\tconst defaultConfig = { 'test': { approve: true, matchCommandLine: false } };\n\n\t\t\tsetAutoApproveWithDefaultsCommandLine(userConfig, defaultConfig);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('test command'), false, 'Objects have different matchCommandLine values, so should be user-defined');\n\t\t});\n\n\t\ttest('should handle mixed types correctly', () => {\n\t\t\tconst userConfig = {\n\t\t\t\t'cmd1': true,\n\t\t\t\t'cmd2': { approve: false, matchCommandLine: true }\n\t\t\t};\n\t\t\tconst defaultConfig = {\n\t\t\t\t'cmd1': true,\n\t\t\t\t'cmd2': { approve: false, matchCommandLine: true }\n\t\t\t};\n\n\t\t\tsetAutoApproveWithDefaultsCommandLine(userConfig, defaultConfig);\n\n\t\t\tstrictEqual(getIsDefaultRule('cmd1 arg'), true, 'Boolean type should match default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('cmd2 arg'), true, 'Object type should match default using structural equality (even though it\\'s a deny rule)');\n\t\t});\n\t});\n\n\tsuite('ignoreDefaultAutoApproveRules', () => {\n\t\tfunction setAutoApproveWithDefaults(userConfig: { [key: string]: boolean }, defaultConfig: { [key: string]: boolean }) {\n\t\t\t// Set up mock configuration with default values\n\t\t\tconfigurationService.setUserConfiguration(TerminalChatAgentToolsSettingId.AutoApprove, userConfig);\n\n\t\t\t// Mock the inspect method to return default values\n\t\t\tconst originalInspect = configurationService.inspect;\n\t\t\tconst originalGetValue = configurationService.getValue;\n\n\t\t\tconfigurationService.inspect = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdefault: { value: defaultConfig },\n\t\t\t\t\t\tuser: { value: userConfig },\n\t\t\t\t\t\tworkspace: undefined,\n\t\t\t\t\t\tworkspaceFolder: undefined,\n\t\t\t\t\t\tapplication: undefined,\n\t\t\t\t\t\tpolicy: undefined,\n\t\t\t\t\t\tmemory: undefined,\n\t\t\t\t\t\tvalue: { ...defaultConfig, ...userConfig }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn originalInspect.call(configurationService, key);\n\t\t\t};\n\n\t\t\tconfigurationService.getValue = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn { ...defaultConfig, ...userConfig };\n\t\t\t\t}\n\t\t\t\treturn originalGetValue.call(configurationService, key);\n\t\t\t};\n\n\t\t\t// Trigger configuration update\n\t\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\t\taffectsConfiguration: () => true,\n\t\t\t\taffectedKeys: new Set([TerminalChatAgentToolsSettingId.AutoApprove]),\n\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\tchange: null!,\n\t\t\t});\n\t\t}\n\n\t\tfunction setIgnoreDefaultAutoApproveRules(value: boolean) {\n\t\t\tsetConfig(TerminalChatAgentToolsSettingId.IgnoreDefaultAutoApproveRules, value);\n\t\t}\n\n\t\ttest('should include default rules when ignoreDefaultAutoApproveRules is false (default behavior)', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'ls': true },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\t\t\tsetIgnoreDefaultAutoApproveRules(false);\n\n\t\t\tok(isAutoApproved('ls -la'), 'User-defined rule should work');\n\t\t\tok(isAutoApproved('echo hello'), 'Default rule should work when not ignored');\n\t\t\tok(isAutoApproved('cat file.txt'), 'Default rule should work when not ignored');\n\t\t});\n\n\t\ttest('should exclude default rules when ignoreDefaultAutoApproveRules is true', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'ls': true },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\t\t\tsetIgnoreDefaultAutoApproveRules(true);\n\n\t\t\tok(isAutoApproved('ls -la'), 'User-defined rule should still work');\n\t\t\tok(!isAutoApproved('echo hello'), 'Default rule should be ignored');\n\t\t\tok(!isAutoApproved('cat file.txt'), 'Default rule should be ignored');\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { OperatingSystem } from '../../../../../../base/common/platform.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport type { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { TerminalChatAgentToolsSettingId } from '../../common/terminalChatAgentToolsConfiguration.js';\nimport { CommandLineAutoApprover } from '../../browser/commandLineAutoApprover.js';\nimport { ConfigurationTarget } from '../../../../../../platform/configuration/common/configuration.js';\nimport { ok, strictEqual } from 'assert';\n\nsuite('CommandLineAutoApprover', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: IInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\n\tlet commandLineAutoApprover: CommandLineAutoApprover;\n\tlet shell: string;\n\tlet os: OperatingSystem;\n\n\tsetup(() => {\n\t\tconfigurationService = new TestConfigurationService();\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tconfigurationService: () => configurationService\n\t\t}, store);\n\n\t\tshell = 'bash';\n\t\tos = OperatingSystem.Linux;\n\t\tcommandLineAutoApprover = store.add(instantiationService.createInstance(CommandLineAutoApprover));\n\t});\n\n\tfunction setAutoApprove(value: { [key: string]: boolean }) {\n\t\tsetConfig(TerminalChatAgentToolsSettingId.AutoApprove, value);\n\t}\n\n\tfunction setAutoApproveWithCommandLine(value: { [key: string]: { approve: boolean; matchCommandLine?: boolean } | boolean }) {\n\t\tsetConfig(TerminalChatAgentToolsSettingId.AutoApprove, value);\n\t}\n\n\tfunction setConfig(key: string, value: unknown) {\n\t\tconfigurationService.setUserConfiguration(key, value);\n\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\taffectsConfiguration: () => true,\n\t\t\taffectedKeys: new Set([key]),\n\t\t\tsource: ConfigurationTarget.USER,\n\t\t\tchange: null!,\n\t\t});\n\t}\n\n\tfunction isAutoApproved(commandLine: string): boolean {\n\t\treturn commandLineAutoApprover.isCommandAutoApproved(commandLine, shell, os).result === 'approved';\n\t}\n\n\tfunction isCommandLineAutoApproved(commandLine: string): boolean {\n\t\treturn commandLineAutoApprover.isCommandLineAutoApproved(commandLine).result === 'approved';\n\t}\n\n\tsuite('autoApprove with allow patterns only', () => {\n\t\ttest('should auto-approve exact command match', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(isAutoApproved('echo'));\n\t\t});\n\n\t\ttest('should auto-approve command with arguments', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(isAutoApproved('echo hello world'));\n\t\t});\n\n\t\ttest('should not auto-approve when there is no match', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(!isAutoApproved('ls'));\n\t\t});\n\n\t\ttest('should not auto-approve partial command matches', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\t\t\tok(!isAutoApproved('echotest'));\n\t\t});\n\n\t\ttest('should handle multiple commands in autoApprove', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'ls': true,\n\t\t\t\t'pwd': true\n\t\t\t});\n\t\t\tok(isAutoApproved('echo'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm'));\n\t\t});\n\t});\n\n\tsuite('autoApprove with deny patterns only', () => {\n\t\ttest('should deny commands in autoApprove', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'rm': false,\n\t\t\t\t'del': false\n\t\t\t});\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('del file.txt'));\n\t\t});\n\n\t\ttest('should not auto-approve safe commands when no allow patterns are present', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'rm': false\n\t\t\t});\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t});\n\t});\n\n\tsuite('autoApprove with mixed allow and deny patterns', () => {\n\t\ttest('should deny commands set to false even if other commands are set to true', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'rm': false\n\t\t\t});\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t});\n\n\t\ttest('should auto-approve allow patterns not set to false', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'ls': true,\n\t\t\t\t'pwd': true,\n\t\t\t\t'rm': false,\n\t\t\t\t'del': false\n\t\t\t});\n\t\t\tok(isAutoApproved('echo'));\n\t\t\tok(isAutoApproved('ls'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm'));\n\t\t\tok(!isAutoApproved('del'));\n\t\t});\n\t});\n\n\tsuite('regex patterns', () => {\n\t\ttest('should handle /.*/', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/.*/': true,\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle regex patterns in autoApprove', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^echo/': true,\n\t\t\t\t'/^ls/': true,\n\t\t\t\t'pwd': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle regex patterns for deny', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,\n\t\t\t\t'rm': true,\n\t\t\t\t'/^rm\\\\s+/': false,\n\t\t\t\t'/^del\\\\s+/': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('rm'));\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('del file.txt'));\n\t\t});\n\n\t\ttest('should handle complex regex patterns', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^(echo|ls|pwd)\\\\b/': true,\n\t\t\t\t'/^git (status|show\\\\b.*)$/': true,\n\t\t\t\t'/rm|del|kill/': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo test'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(isAutoApproved('git status'));\n\t\t\tok(isAutoApproved('git show'));\n\t\t\tok(isAutoApproved('git show HEAD'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t\tok(!isAutoApproved('del file'));\n\t\t\tok(!isAutoApproved('kill process'));\n\t\t});\n\n\t\tsuite('flags', () => {\n\t\t\ttest('should handle case-insensitive regex patterns with i flag', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^echo/i': true,\n\t\t\t\t\t'/^ls/i': true,\n\t\t\t\t\t'/rm|del/i': false\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('echo hello'));\n\t\t\t\tok(isAutoApproved('ECHO hello'));\n\t\t\t\tok(isAutoApproved('Echo hello'));\n\t\t\t\tok(isAutoApproved('ls -la'));\n\t\t\t\tok(isAutoApproved('LS -la'));\n\t\t\t\tok(isAutoApproved('Ls -la'));\n\t\t\t\tok(!isAutoApproved('rm file'));\n\t\t\t\tok(!isAutoApproved('RM file'));\n\t\t\t\tok(!isAutoApproved('del file'));\n\t\t\t\tok(!isAutoApproved('DEL file'));\n\t\t\t});\n\n\t\t\ttest('should handle multiple regex flags', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^git\\\\s+/gim': true,\n\t\t\t\t\t'/dangerous/gim': false\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('git status'));\n\t\t\t\tok(isAutoApproved('GIT status'));\n\t\t\t\tok(isAutoApproved('Git status'));\n\t\t\t\tok(!isAutoApproved('dangerous command'));\n\t\t\t\tok(!isAutoApproved('DANGEROUS command'));\n\t\t\t});\n\n\t\t\ttest('should handle various regex flags', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^echo.*/s': true,  // dotall flag\n\t\t\t\t\t'/^git\\\\s+/i': true, // case-insensitive flag\n\t\t\t\t\t'/rm|del/g': false   // global flag\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('echo hello\\nworld'));\n\t\t\t\tok(isAutoApproved('git status'));\n\t\t\t\tok(isAutoApproved('GIT status'));\n\t\t\t\tok(!isAutoApproved('rm file'));\n\t\t\t\tok(!isAutoApproved('del file'));\n\t\t\t});\n\n\t\t\ttest('should handle regex patterns without flags', () => {\n\t\t\t\tsetAutoApprove({\n\t\t\t\t\t'/^echo/': true,\n\t\t\t\t\t'/rm|del/': false\n\t\t\t\t});\n\n\t\t\t\tok(isAutoApproved('echo hello'));\n\t\t\t\tok(!isAutoApproved('ECHO hello'), 'Should be case-sensitive without i flag');\n\t\t\t\tok(!isAutoApproved('rm file'));\n\t\t\t\tok(!isAutoApproved('RM file'), 'Should be case-sensitive without i flag');\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('edge cases', () => {\n\t\ttest('should handle empty autoApprove', () => {\n\t\t\tsetAutoApprove({});\n\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle empty command strings', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\tok(!isAutoApproved(''));\n\t\t\tok(!isAutoApproved('   '));\n\t\t});\n\n\t\ttest('should handle whitespace in commands', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo   hello   world'));\n\t\t});\n\n\t\ttest('should be case-sensitive by default', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ECHO hello'));\n\t\t\tok(!isAutoApproved('Echo hello'));\n\t\t});\n\n\t\t// https://github.com/microsoft/vscode/issues/252411\n\t\ttest('should handle string-based values with special regex characters', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'pwsh.exe -File D:\\\\foo.bar\\\\a-script.ps1': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('pwsh.exe -File D:\\\\foo.bar\\\\a-script.ps1'));\n\t\t\tok(isAutoApproved('pwsh.exe -File D:\\\\foo.bar\\\\a-script.ps1 -AnotherArg'));\n\t\t});\n\n\t\ttest('should ignore the empty string key', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'': true\n\t\t\t});\n\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle empty regex patterns that could cause endless loops', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'//': true,\n\t\t\t\t'/(?:)/': true,\n\t\t\t\t'/*/': true,            // Invalid regex pattern\n\t\t\t\t'/.**/': true           // Invalid regex pattern\n\t\t\t});\n\n\t\t\t// These patterns should not cause endless loops and should not match any commands\n\t\t\t// Invalid patterns should be handled gracefully and not match anything\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t\tok(!isAutoApproved(''));\n\t\t});\n\n\t\ttest('should handle regex patterns that would cause endless loops', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/a*/': true,\n\t\t\t\t'/b?/': true,\n\t\t\t\t'/(x|)*/': true,\n\t\t\t\t'/(?:)*/': true\n\t\t\t});\n\n\t\t\t// Commands should still work normally, endless loop patterns should be safely handled\n\t\t\tok(!isAutoApproved('echo hello'));\n\t\t\tok(!isAutoApproved('ls'));\n\t\t\tok(!isAutoApproved('a'));\n\t\t\tok(!isAutoApproved('b'));\n\t\t});\n\n\t\ttest('should handle mixed valid and problematic regex patterns', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^echo/': true,        // Valid pattern\n\t\t\t\t'//': true,             // Empty pattern\n\t\t\t\t'/^ls/': true,          // Valid pattern\n\t\t\t\t'/a*/': true,           // Potential endless loop\n\t\t\t\t'pwd': true             // Valid string pattern\n\t\t\t});\n\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\tok(isAutoApproved('pwd'));\n\t\t\tok(!isAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle invalid regex patterns gracefully', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/*/': true,                    // Invalid regex - nothing to repeat\n\t\t\t\t'/(?:+/': true,                 // Invalid regex - incomplete quantifier\n\t\t\t\t'/[/': true,                    // Invalid regex - unclosed character class\n\t\t\t\t'/^echo/': true,                // Valid pattern\n\t\t\t\t'ls': true                      // Valid string pattern\n\t\t\t});\n\n\t\t\t// Valid patterns should still work\n\t\t\tok(isAutoApproved('echo hello'));\n\t\t\tok(isAutoApproved('ls -la'));\n\t\t\t// Invalid patterns should not match anything and not cause crashes\n\t\t\tok(!isAutoApproved('random command'));\n\t\t});\n\t});\n\n\tsuite('path-aware auto approval', () => {\n\t\ttest('should handle path variations with forward slashes', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin/foo': true\n\t\t\t});\n\n\t\t\t// Should approve the exact match\n\t\t\tok(isAutoApproved('bin/foo'));\n\t\t\tok(isAutoApproved('bin/foo --arg'));\n\n\t\t\t// Should approve with Windows backslashes\n\t\t\tok(isAutoApproved('bin\\\\foo'));\n\t\t\tok(isAutoApproved('bin\\\\foo --arg'));\n\n\t\t\t// Should approve with current directory prefixes\n\t\t\tok(isAutoApproved('./bin/foo'));\n\t\t\tok(isAutoApproved('.\\\\bin/foo'));\n\t\t\tok(isAutoApproved('./bin\\\\foo'));\n\t\t\tok(isAutoApproved('.\\\\bin\\\\foo'));\n\n\t\t\t// Should not approve partial matches\n\t\t\tok(!isAutoApproved('bin/foobar'));\n\t\t\tok(!isAutoApproved('notbin/foo'));\n\t\t});\n\n\t\ttest('should handle path variations with backslashes', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin\\\\script.bat': true\n\t\t\t});\n\n\t\t\t// Should approve the exact match\n\t\t\tok(isAutoApproved('bin\\\\script.bat'));\n\t\t\tok(isAutoApproved('bin\\\\script.bat --help'));\n\n\t\t\t// Should approve with forward slashes\n\t\t\tok(isAutoApproved('bin/script.bat'));\n\t\t\tok(isAutoApproved('bin/script.bat --help'));\n\n\t\t\t// Should approve with current directory prefixes\n\t\t\tok(isAutoApproved('./bin\\\\script.bat'));\n\t\t\tok(isAutoApproved('.\\\\bin\\\\script.bat'));\n\t\t\tok(isAutoApproved('./bin/script.bat'));\n\t\t\tok(isAutoApproved('.\\\\bin/script.bat'));\n\t\t});\n\n\t\ttest('should handle deep paths', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'src/utils/helper.js': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('src/utils/helper.js'));\n\t\t\tok(isAutoApproved('src\\\\utils\\\\helper.js'));\n\t\t\tok(isAutoApproved('src/utils\\\\helper.js'));\n\t\t\tok(isAutoApproved('src\\\\utils/helper.js'));\n\t\t\tok(isAutoApproved('./src/utils/helper.js'));\n\t\t\tok(isAutoApproved('.\\\\src\\\\utils\\\\helper.js'));\n\t\t});\n\n\t\ttest('should not treat non-paths as paths', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true,  // Not a path\n\t\t\t\t'ls': true,    // Not a path\n\t\t\t\t'git': true    // Not a path\n\t\t\t});\n\n\t\t\t// These should work as normal command matching, not path matching\n\t\t\tok(isAutoApproved('echo'));\n\t\t\tok(isAutoApproved('ls'));\n\t\t\tok(isAutoApproved('git'));\n\n\t\t\t// Should not be treated as paths, so these prefixes shouldn't work\n\t\t\tok(!isAutoApproved('./echo'));\n\t\t\tok(!isAutoApproved('.\\\\ls'));\n\t\t});\n\n\t\ttest('should handle paths with mixed separators in config', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin/foo\\\\bar': true  // Mixed separators in config\n\t\t\t});\n\n\t\t\tok(isAutoApproved('bin/foo\\\\bar'));\n\t\t\tok(isAutoApproved('bin\\\\foo/bar'));\n\t\t\tok(isAutoApproved('bin/foo/bar'));\n\t\t\tok(isAutoApproved('bin\\\\foo\\\\bar'));\n\t\t\tok(isAutoApproved('./bin/foo\\\\bar'));\n\t\t\tok(isAutoApproved('.\\\\bin\\\\foo\\\\bar'));\n\t\t});\n\n\t\ttest('should work with command line auto approval for paths', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'bin/deploy': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('bin/deploy --prod'));\n\t\t\tok(isCommandLineAutoApproved('bin\\\\deploy --prod'));\n\t\t\tok(isCommandLineAutoApproved('./bin/deploy --prod'));\n\t\t\tok(isCommandLineAutoApproved('.\\\\bin\\\\deploy --prod'));\n\t\t});\n\n\t\ttest('should handle special characters in paths', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'bin/my-script.sh': true,\n\t\t\t\t'scripts/build_all.py': true,\n\t\t\t\t'tools/run (debug).exe': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('bin/my-script.sh'));\n\t\t\tok(isAutoApproved('bin\\\\my-script.sh'));\n\t\t\tok(isAutoApproved('./bin/my-script.sh'));\n\n\t\t\tok(isAutoApproved('scripts/build_all.py'));\n\t\t\tok(isAutoApproved('scripts\\\\build_all.py'));\n\n\t\t\tok(isAutoApproved('tools/run (debug).exe'));\n\t\t\tok(isAutoApproved('tools\\\\run (debug).exe'));\n\t\t});\n\t});\n\n\tsuite('PowerShell-specific commands', () => {\n\t\tsetup(() => {\n\t\t\tshell = 'pwsh';\n\t\t});\n\n\t\ttest('should handle Windows PowerShell commands', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-ChildItem': true,\n\t\t\t\t'Get-Content': true,\n\t\t\t\t'Get-Location': true,\n\t\t\t\t'Remove-Item': false,\n\t\t\t\t'del': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-ChildItem'));\n\t\t\tok(isAutoApproved('Get-Content file.txt'));\n\t\t\tok(isAutoApproved('Get-Location'));\n\t\t\tok(!isAutoApproved('Remove-Item file.txt'));\n\t\t});\n\n\t\ttest('should handle ( prefixes', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-Content': true\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-Content file.txt'));\n\t\t\tok(isAutoApproved('(Get-Content file.txt'));\n\t\t\tok(!isAutoApproved('[Get-Content'));\n\t\t\tok(!isAutoApproved('foo'));\n\t\t});\n\n\t\ttest('should be case-insensitive for PowerShell commands', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-ChildItem': true,\n\t\t\t\t'Get-Content': true,\n\t\t\t\t'Remove-Item': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-ChildItem'));\n\t\t\tok(isAutoApproved('get-childitem'));\n\t\t\tok(isAutoApproved('GET-CHILDITEM'));\n\t\t\tok(isAutoApproved('Get-childitem'));\n\t\t\tok(isAutoApproved('get-ChildItem'));\n\n\t\t\tok(isAutoApproved('Get-Content file.txt'));\n\t\t\tok(isAutoApproved('get-content file.txt'));\n\t\t\tok(isAutoApproved('GET-CONTENT file.txt'));\n\t\t\tok(isAutoApproved('Get-content file.txt'));\n\n\t\t\tok(!isAutoApproved('Remove-Item file.txt'));\n\t\t\tok(!isAutoApproved('remove-item file.txt'));\n\t\t\tok(!isAutoApproved('REMOVE-ITEM file.txt'));\n\t\t\tok(!isAutoApproved('Remove-item file.txt'));\n\t\t});\n\n\t\ttest('should be case-insensitive for PowerShell aliases', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'ls': true,\n\t\t\t\t'dir': true,\n\t\t\t\t'rm': false,\n\t\t\t\t'del': false\n\t\t\t});\n\n\t\t\t// Test case-insensitive matching for aliases\n\t\t\tok(isAutoApproved('ls'));\n\t\t\tok(isAutoApproved('LS'));\n\t\t\tok(isAutoApproved('Ls'));\n\n\t\t\tok(isAutoApproved('dir'));\n\t\t\tok(isAutoApproved('DIR'));\n\t\t\tok(isAutoApproved('Dir'));\n\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('RM file.txt'));\n\t\t\tok(!isAutoApproved('Rm file.txt'));\n\n\t\t\tok(!isAutoApproved('del file.txt'));\n\t\t\tok(!isAutoApproved('DEL file.txt'));\n\t\t\tok(!isAutoApproved('Del file.txt'));\n\t\t});\n\n\t\ttest('should be case-insensitive with regex patterns', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'/^Get-/': true,\n\t\t\t\t'/Remove-Item|rm/': false\n\t\t\t});\n\n\t\t\tok(isAutoApproved('Get-ChildItem'));\n\t\t\tok(isAutoApproved('get-childitem'));\n\t\t\tok(isAutoApproved('GET-PROCESS'));\n\t\t\tok(isAutoApproved('Get-Location'));\n\n\t\t\tok(!isAutoApproved('Remove-Item file.txt'));\n\t\t\tok(!isAutoApproved('remove-item file.txt'));\n\t\t\tok(!isAutoApproved('rm file.txt'));\n\t\t\tok(!isAutoApproved('RM file.txt'));\n\t\t});\n\n\t\ttest('should handle case-insensitive PowerShell commands on different OS', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'Get-Process': true,\n\t\t\t\t'Stop-Process': false\n\t\t\t});\n\n\t\t\tfor (const currnetOS of [OperatingSystem.Windows, OperatingSystem.Linux, OperatingSystem.Macintosh]) {\n\t\t\t\tos = currnetOS;\n\t\t\t\tok(isAutoApproved('Get-Process'), `os=${os}`);\n\t\t\t\tok(isAutoApproved('get-process'), `os=${os}`);\n\t\t\t\tok(isAutoApproved('GET-PROCESS'), `os=${os}`);\n\t\t\t\tok(!isAutoApproved('Stop-Process'), `os=${os}`);\n\t\t\t\tok(!isAutoApproved('stop-process'), `os=${os}`);\n\t\t\t}\n\t\t});\n\t});\n\n\tsuite('isCommandLineAutoApproved - matchCommandLine functionality', () => {\n\t\ttest('should auto-approve command line patterns with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('echo test && ls'));\n\t\t});\n\n\t\ttest('should not auto-approve regular patterns with isCommandLineAutoApproved', () => {\n\t\t\tsetAutoApprove({\n\t\t\t\t'echo': true\n\t\t\t});\n\n\t\t\t// Regular patterns should not be matched by isCommandLineAutoApproved\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle regex patterns with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/echo.*world/': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello world'));\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t});\n\n\t\ttest('should handle case-insensitive regex with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/echo/i': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('ECHO hello'));\n\t\t\tok(isCommandLineAutoApproved('Echo hello'));\n\t\t});\n\n\t\ttest('should handle complex command line patterns', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/^npm run build/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/\\.ps1/i': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('npm run build --production'));\n\t\t\tok(isCommandLineAutoApproved('powershell -File script.ps1'));\n\t\t\tok(isCommandLineAutoApproved('pwsh -File SCRIPT.PS1'));\n\t\t\tok(!isCommandLineAutoApproved('npm install'));\n\t\t});\n\n\t\ttest('should return false for empty command line', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(!isCommandLineAutoApproved(''));\n\t\t\tok(!isCommandLineAutoApproved('   '));\n\t\t});\n\n\t\ttest('should handle mixed configuration with matchCommandLine entries', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': true,  // Regular pattern\n\t\t\t\t'ls': { approve: true, matchCommandLine: true },  // Command line pattern\n\t\t\t\t'rm': { approve: true, matchCommandLine: false }  // Explicit regular pattern\n\t\t\t});\n\n\t\t\t// Only the matchCommandLine: true entry should work with isCommandLineAutoApproved\n\t\t\tok(isCommandLineAutoApproved('ls -la'));\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('rm file.txt'));\n\t\t});\n\n\t\ttest('should handle deny patterns with matchCommandLine: true', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t'/dangerous/': { approve: false, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('echo dangerous command'));\n\t\t\tok(!isCommandLineAutoApproved('dangerous operation'));\n\t\t});\n\n\t\ttest('should prioritize deny list over allow list for command line patterns', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/echo/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/echo.*dangerous/': { approve: false, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('echo dangerous command'));\n\t\t});\n\n\t\ttest('should handle complex deny patterns with matchCommandLine', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'npm': { approve: true, matchCommandLine: true },\n\t\t\t\t'/npm.*--force/': { approve: false, matchCommandLine: true },\n\t\t\t\t'/\\.ps1.*-ExecutionPolicy/i': { approve: false, matchCommandLine: true }\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('npm install'));\n\t\t\tok(isCommandLineAutoApproved('npm run build'));\n\t\t\tok(!isCommandLineAutoApproved('npm install --force'));\n\t\t\tok(!isCommandLineAutoApproved('powershell -File script.ps1 -ExecutionPolicy Bypass'));\n\t\t});\n\n\t\ttest('should handle empty regex patterns with matchCommandLine that could cause endless loops', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'//': { approve: true, matchCommandLine: true },\n\t\t\t\t'/(?:)/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/*/': { approve: true, matchCommandLine: true },            // Invalid regex pattern\n\t\t\t\t'/.**/': { approve: true, matchCommandLine: true }           // Invalid regex pattern\n\t\t\t});\n\n\t\t\t// These patterns should not cause endless loops and should not match any commands\n\t\t\t// Invalid patterns should be handled gracefully and not match anything\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('ls'));\n\t\t\tok(!isCommandLineAutoApproved(''));\n\t\t});\n\n\t\ttest('should handle regex patterns with matchCommandLine that would cause endless loops', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/a*/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/b?/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/(x|)*/': { approve: true, matchCommandLine: true },\n\t\t\t\t'/(?:)*/': { approve: true, matchCommandLine: true }\n\t\t\t});\n\n\t\t\t// Commands should still work normally, endless loop patterns should be safely handled\n\t\t\tok(!isCommandLineAutoApproved('echo hello'));\n\t\t\tok(!isCommandLineAutoApproved('ls'));\n\t\t\tok(!isCommandLineAutoApproved('a'));\n\t\t\tok(!isCommandLineAutoApproved('b'));\n\t\t});\n\n\t\ttest('should handle mixed valid and problematic regex patterns with matchCommandLine', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/^echo/': { approve: true, matchCommandLine: true },        // Valid pattern\n\t\t\t\t'//': { approve: true, matchCommandLine: true },             // Empty pattern\n\t\t\t\t'/^ls/': { approve: true, matchCommandLine: true },          // Valid pattern\n\t\t\t\t'/a*/': { approve: true, matchCommandLine: true },           // Potential endless loop\n\t\t\t\t'pwd': { approve: true, matchCommandLine: true }             // Valid string pattern\n\t\t\t});\n\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('ls -la'));\n\t\t\tok(isCommandLineAutoApproved('pwd'));\n\t\t\tok(!isCommandLineAutoApproved('rm file'));\n\t\t});\n\n\t\ttest('should handle invalid regex patterns with matchCommandLine gracefully', () => {\n\t\t\tsetAutoApproveWithCommandLine({\n\t\t\t\t'/*/': { approve: true, matchCommandLine: true },                    // Invalid regex - nothing to repeat\n\t\t\t\t'/(?:+/': { approve: true, matchCommandLine: true },                 // Invalid regex - incomplete quantifier\n\t\t\t\t'/[/': { approve: true, matchCommandLine: true },                    // Invalid regex - unclosed character class\n\t\t\t\t'/^echo/': { approve: true, matchCommandLine: true },                // Valid pattern\n\t\t\t\t'ls': { approve: true, matchCommandLine: true }                      // Valid string pattern\n\t\t\t});\n\n\t\t\t// Valid patterns should still work\n\t\t\tok(isCommandLineAutoApproved('echo hello'));\n\t\t\tok(isCommandLineAutoApproved('ls -la'));\n\t\t\t// Invalid patterns should not match anything and not cause crashes\n\t\t\tok(!isCommandLineAutoApproved('random command'));\n\t\t});\n\t});\n\n\tsuite('reasons', () => {\n\t\tfunction getCommandReason(command: string): string {\n\t\t\treturn commandLineAutoApprover.isCommandAutoApproved(command, shell, os).reason;\n\t\t}\n\n\t\tfunction getCommandLineReason(commandLine: string): string {\n\t\t\treturn commandLineAutoApprover.isCommandLineAutoApproved(commandLine).reason;\n\t\t}\n\n\t\tsuite('command', () => {\n\t\t\ttest('approved', () => {\n\t\t\t\tsetAutoApprove({ echo: true });\n\t\t\t\tstrictEqual(getCommandReason('echo hello'), `Command 'echo hello' is approved by allow list rule: echo`);\n\t\t\t});\n\t\t\ttest('not approved', () => {\n\t\t\t\tsetAutoApprove({ echo: false });\n\t\t\t\tstrictEqual(getCommandReason('echo hello'), `Command 'echo hello' is denied by deny list rule: echo`);\n\t\t\t});\n\t\t\ttest('no match', () => {\n\t\t\t\tsetAutoApprove({});\n\t\t\t\tstrictEqual(getCommandReason('echo hello'), `Command 'echo hello' has no matching auto approve entries`);\n\t\t\t});\n\t\t});\n\n\t\tsuite('command line', () => {\n\t\t\ttest('approved', () => {\n\t\t\t\tsetAutoApproveWithCommandLine({ echo: { approve: true, matchCommandLine: true } });\n\t\t\t\tstrictEqual(getCommandLineReason('echo hello'), `Command line 'echo hello' is approved by allow list rule: echo`);\n\t\t\t});\n\t\t\ttest('not approved', () => {\n\t\t\t\tsetAutoApproveWithCommandLine({ echo: { approve: false, matchCommandLine: true } });\n\t\t\t\tstrictEqual(getCommandLineReason('echo hello'), `Command line 'echo hello' is denied by deny list rule: echo`);\n\t\t\t});\n\t\t\ttest('no match', () => {\n\t\t\t\tsetAutoApproveWithCommandLine({});\n\t\t\t\tstrictEqual(getCommandLineReason('echo hello'), `Command line 'echo hello' has no matching auto approve entries`);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('isDefaultRule logic', () => {\n\t\tfunction getIsDefaultRule(command: string): boolean | undefined {\n\t\t\treturn commandLineAutoApprover.isCommandAutoApproved(command, shell, os).rule?.isDefaultRule;\n\t\t}\n\n\t\tfunction getCommandLineIsDefaultRule(commandLine: string): boolean | undefined {\n\t\t\treturn commandLineAutoApprover.isCommandLineAutoApproved(commandLine).rule?.isDefaultRule;\n\t\t}\n\n\t\tfunction setAutoApproveWithDefaults(userConfig: { [key: string]: boolean }, defaultConfig: { [key: string]: boolean }) {\n\t\t\t// Set up mock configuration with default values\n\t\t\tconfigurationService.setUserConfiguration(TerminalChatAgentToolsSettingId.AutoApprove, userConfig);\n\n\t\t\t// Mock the inspect method to return default values\n\t\t\tconst originalInspect = configurationService.inspect;\n\t\t\tconst originalGetValue = configurationService.getValue;\n\n\t\t\tconfigurationService.inspect = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdefault: { value: defaultConfig },\n\t\t\t\t\t\tuser: { value: userConfig },\n\t\t\t\t\t\tworkspace: undefined,\n\t\t\t\t\t\tworkspaceFolder: undefined,\n\t\t\t\t\t\tapplication: undefined,\n\t\t\t\t\t\tpolicy: undefined,\n\t\t\t\t\t\tmemory: undefined,\n\t\t\t\t\t\tvalue: { ...defaultConfig, ...userConfig }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn originalInspect.call(configurationService, key);\n\t\t\t};\n\n\t\t\tconfigurationService.getValue = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn { ...defaultConfig, ...userConfig };\n\t\t\t\t}\n\t\t\t\treturn originalGetValue.call(configurationService, key);\n\t\t\t};\n\n\t\t\t// Trigger configuration update\n\t\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\t\taffectsConfiguration: () => true,\n\t\t\t\taffectedKeys: new Set([TerminalChatAgentToolsSettingId.AutoApprove]),\n\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\tchange: null!,\n\t\t\t});\n\t\t}\n\n\t\tfunction setAutoApproveWithDefaultsCommandLine(\n\t\t\tuserConfig: { [key: string]: { approve: boolean; matchCommandLine?: boolean } | boolean },\n\t\t\tdefaultConfig: { [key: string]: { approve: boolean; matchCommandLine?: boolean } | boolean }\n\t\t) {\n\t\t\t// Set up mock configuration with default values for command line rules\n\t\t\tconfigurationService.setUserConfiguration(TerminalChatAgentToolsSettingId.AutoApprove, userConfig);\n\n\t\t\t// Mock the inspect method to return default values\n\t\t\tconst originalInspect = configurationService.inspect;\n\t\t\tconst originalGetValue = configurationService.getValue;\n\n\t\t\tconfigurationService.inspect = <T>(key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdefault: { value: defaultConfig },\n\t\t\t\t\t\tuser: { value: userConfig },\n\t\t\t\t\t\tworkspace: undefined,\n\t\t\t\t\t\tworkspaceFolder: undefined,\n\t\t\t\t\t\tapplication: undefined,\n\t\t\t\t\t\tpolicy: undefined,\n\t\t\t\t\t\tmemory: undefined,\n\t\t\t\t\t\tvalue: { ...defaultConfig, ...userConfig }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn originalInspect.call(configurationService, key);\n\t\t\t};\n\n\t\t\tconfigurationService.getValue = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn { ...defaultConfig, ...userConfig };\n\t\t\t\t}\n\t\t\t\treturn originalGetValue.call(configurationService, key);\n\t\t\t};\n\n\t\t\t// Trigger configuration update\n\t\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\t\taffectsConfiguration: () => true,\n\t\t\t\taffectedKeys: new Set([TerminalChatAgentToolsSettingId.AutoApprove]),\n\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\tchange: null!,\n\t\t\t});\n\t\t}\n\n\t\ttest('should correctly identify default rules vs user-defined rules', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, 'ls': true, 'pwd': false },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'echo is in both default and user config with same value - should be marked as default');\n\t\t\tstrictEqual(getIsDefaultRule('ls -la'), false, 'ls is only in user config - should be marked as user-defined');\n\t\t\tstrictEqual(getIsDefaultRule('pwd'), false, 'pwd is only in user config - should be marked as user-defined');\n\t\t\tstrictEqual(getIsDefaultRule('cat file.txt'), true, 'cat is in both default and user config with same value - should be marked as default');\n\t\t});\n\n\t\ttest('should mark as default when command is only in default config but not in user config', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, 'ls': true },  // User config (cat is NOT here)\n\t\t\t\t{ 'echo': true, 'cat': true }  // Default config (cat IS here)\n\t\t\t);\n\n\t\t\t// Test that merged config includes all commands\n\t\t\tstrictEqual(commandLineAutoApprover.isCommandAutoApproved('echo', shell, os).result, 'approved', 'echo should be approved');\n\t\t\tstrictEqual(commandLineAutoApprover.isCommandAutoApproved('ls', shell, os).result, 'approved', 'ls should be approved');\n\n\t\t\t// cat should be approved because it's in the merged config\n\t\t\tconst catResult = commandLineAutoApprover.isCommandAutoApproved('cat', shell, os);\n\t\t\tstrictEqual(catResult.result, 'approved', 'cat should be approved from default config');\n\n\t\t\t// cat should be marked as default rule since it comes from default config only\n\t\t\tstrictEqual(catResult.rule?.isDefaultRule, true, 'cat is only in default config, not in user config - should be marked as default');\n\t\t});\n\n\t\ttest('should handle default rules with different values', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, 'rm': true },\n\t\t\t\t{ 'echo': false, 'rm': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), false, 'echo has different values in default vs user - should be marked as user-defined');\n\t\t\tstrictEqual(getIsDefaultRule('rm file.txt'), true, 'rm has same value in both - should be marked as default');\n\t\t});\n\n\t\ttest('should handle regex patterns as default rules', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ '/^git/': true, '/^npm/': false },\n\t\t\t\t{ '/^git/': true, '/^docker/': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('git status'), true, 'git pattern matches default - should be marked as default');\n\t\t\tstrictEqual(getIsDefaultRule('npm install'), false, 'npm pattern is user-only - should be marked as user-defined');\n\t\t});\n\n\t\ttest('should handle mixed string and regex patterns', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true, '/^ls/': false },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'String pattern matching default');\n\t\t\tstrictEqual(getIsDefaultRule('ls -la'), false, 'Regex pattern user-defined');\n\t\t});\n\n\t\ttest('should handle command line rules with isDefaultRule', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'ls': { approve: false, matchCommandLine: true }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'cat': { approve: true, matchCommandLine: true }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('echo hello world'), true, 'echo matches default config exactly using structural equality - should be marked as default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('ls -la'), false, 'ls is user-defined only - should be marked as user-defined');\n\t\t});\n\n\t\ttest('should handle command line rules with different matchCommandLine values', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: false }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'echo': { approve: true, matchCommandLine: false },\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: false }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('echo hello'), false, 'echo has different matchCommandLine value - should be user-defined');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('ls -la'), undefined, 'ls matches exactly - should be default (but won\\'t match command line check since matchCommandLine is false)');\n\t\t});\n\n\t\ttest('should handle boolean vs object format consistency', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'echo': true,\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: true }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'echo': true,\n\t\t\t\t\t'ls': { approve: true, matchCommandLine: true }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'Boolean format matching - should be default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('ls -la'), true, 'Object format matching using structural equality - should be default');\n\t\t});\n\n\t\ttest('should return undefined for noMatch cases', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'echo': true },\n\t\t\t\t{ 'cat': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('unknown-command'), undefined, 'Command that matches neither user nor default config');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('unknown-command'), undefined, 'Command that matches neither user nor default config');\n\t\t});\n\n\t\ttest('should handle empty configurations', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), undefined);\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('echo hello'), undefined);\n\t\t});\n\n\t\ttest('should handle only default config with no user overrides', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{},\n\t\t\t\t{ 'echo': true, 'ls': false }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('echo hello'), true, 'Commands in default config should be marked as default rules even with empty user config');\n\t\t\tstrictEqual(getIsDefaultRule('ls -la'), true, 'Commands in default config should be marked as default rules even with empty user config');\n\t\t});\n\n\t\ttest('should handle complex nested object rules', () => {\n\t\t\tsetAutoApproveWithDefaultsCommandLine(\n\t\t\t\t{\n\t\t\t\t\t'npm': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'git': { approve: false, matchCommandLine: false }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'npm': { approve: true, matchCommandLine: true },\n\t\t\t\t\t'docker': { approve: true, matchCommandLine: true }\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('npm install'), true, 'npm matches default exactly using structural equality - should be default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('git status'), undefined, 'git is user-defined - should be user-defined (but won\\'t match command line since matchCommandLine is false)');\n\t\t});\n\n\t\ttest('should handle PowerShell case-insensitive matching with defaults', () => {\n\t\t\tshell = 'pwsh';\n\t\t\tos = OperatingSystem.Windows;\n\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'Get-Process': true },\n\t\t\t\t{ 'Get-Process': true }\n\t\t\t);\n\n\t\t\tstrictEqual(getIsDefaultRule('Get-Process'), true, 'Case-insensitive PowerShell command matching default');\n\t\t\tstrictEqual(getIsDefaultRule('get-process'), true, 'Case-insensitive PowerShell command matching default');\n\t\t\tstrictEqual(getIsDefaultRule('GET-PROCESS'), true, 'Case-insensitive PowerShell command matching default');\n\t\t});\n\n\t\ttest('should use structural equality for object comparison', () => {\n\t\t\t// Test that objects with same content but different instances are treated as equal\n\t\t\tconst userConfig = { 'test': { approve: true, matchCommandLine: true } };\n\t\t\tconst defaultConfig = { 'test': { approve: true, matchCommandLine: true } };\n\n\t\t\tsetAutoApproveWithDefaultsCommandLine(userConfig, defaultConfig);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('test command'), true, 'Even though userConfig and defaultConfig are different object instances, they have the same structure and values, so should be considered default');\n\t\t});\n\n\t\ttest('should detect structural differences in objects', () => {\n\t\t\tconst userConfig = { 'test': { approve: true, matchCommandLine: true } };\n\t\t\tconst defaultConfig = { 'test': { approve: true, matchCommandLine: false } };\n\n\t\t\tsetAutoApproveWithDefaultsCommandLine(userConfig, defaultConfig);\n\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('test command'), false, 'Objects have different matchCommandLine values, so should be user-defined');\n\t\t});\n\n\t\ttest('should handle mixed types correctly', () => {\n\t\t\tconst userConfig = {\n\t\t\t\t'cmd1': true,\n\t\t\t\t'cmd2': { approve: false, matchCommandLine: true }\n\t\t\t};\n\t\t\tconst defaultConfig = {\n\t\t\t\t'cmd1': true,\n\t\t\t\t'cmd2': { approve: false, matchCommandLine: true }\n\t\t\t};\n\n\t\t\tsetAutoApproveWithDefaultsCommandLine(userConfig, defaultConfig);\n\n\t\t\tstrictEqual(getIsDefaultRule('cmd1 arg'), true, 'Boolean type should match default');\n\t\t\tstrictEqual(getCommandLineIsDefaultRule('cmd2 arg'), true, 'Object type should match default using structural equality (even though it\\'s a deny rule)');\n\t\t});\n\t});\n\n\tsuite('ignoreDefaultAutoApproveRules', () => {\n\t\tfunction setAutoApproveWithDefaults(userConfig: { [key: string]: boolean }, defaultConfig: { [key: string]: boolean }) {\n\t\t\t// Set up mock configuration with default values\n\t\t\tconfigurationService.setUserConfiguration(TerminalChatAgentToolsSettingId.AutoApprove, userConfig);\n\n\t\t\t// Mock the inspect method to return default values\n\t\t\tconst originalInspect = configurationService.inspect;\n\t\t\tconst originalGetValue = configurationService.getValue;\n\n\t\t\tconfigurationService.inspect = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdefault: { value: defaultConfig },\n\t\t\t\t\t\tuser: { value: userConfig },\n\t\t\t\t\t\tworkspace: undefined,\n\t\t\t\t\t\tworkspaceFolder: undefined,\n\t\t\t\t\t\tapplication: undefined,\n\t\t\t\t\t\tpolicy: undefined,\n\t\t\t\t\t\tmemory: undefined,\n\t\t\t\t\t\tvalue: { ...defaultConfig, ...userConfig }\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn originalInspect.call(configurationService, key);\n\t\t\t};\n\n\t\t\tconfigurationService.getValue = (key: string): any => {\n\t\t\t\tif (key === TerminalChatAgentToolsSettingId.AutoApprove) {\n\t\t\t\t\treturn { ...defaultConfig, ...userConfig };\n\t\t\t\t}\n\t\t\t\treturn originalGetValue.call(configurationService, key);\n\t\t\t};\n\n\t\t\t// Trigger configuration update\n\t\t\tconfigurationService.onDidChangeConfigurationEmitter.fire({\n\t\t\t\taffectsConfiguration: () => true,\n\t\t\t\taffectedKeys: new Set([TerminalChatAgentToolsSettingId.AutoApprove]),\n\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\tchange: null!,\n\t\t\t});\n\t\t}\n\n\t\tfunction setIgnoreDefaultAutoApproveRules(value: boolean) {\n\t\t\tsetConfig(TerminalChatAgentToolsSettingId.IgnoreDefaultAutoApproveRules, value);\n\t\t}\n\n\t\ttest('should include default rules when ignoreDefaultAutoApproveRules is false (default behavior)', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'ls': true },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\t\t\tsetIgnoreDefaultAutoApproveRules(false);\n\n\t\t\tok(isAutoApproved('ls -la'), 'User-defined rule should work');\n\t\t\tok(isAutoApproved('echo hello'), 'Default rule should work when not ignored');\n\t\t\tok(isAutoApproved('cat file.txt'), 'Default rule should work when not ignored');\n\t\t});\n\n\t\ttest('should exclude default rules when ignoreDefaultAutoApproveRules is true', () => {\n\t\t\tsetAutoApproveWithDefaults(\n\t\t\t\t{ 'ls': true },\n\t\t\t\t{ 'echo': true, 'cat': true }\n\t\t\t);\n\t\t\tsetIgnoreDefaultAutoApproveRules(true);\n\n\t\t\tok(isAutoApproved('ls -la'), 'User-defined rule should still work');\n\t\t\tok(!isAutoApproved('echo hello'), 'Default rule should be ignored');\n\t\t\tok(!isAutoApproved('cat file.txt'), 'Default rule should be ignored');\n\t\t});\n\t});\n});\n"]}