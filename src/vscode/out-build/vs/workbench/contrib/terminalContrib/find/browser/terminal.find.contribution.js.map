{"version":3,"sources":["vs/workbench/contrib/terminalContrib/find/browser/terminal.find.contribution.ts"],"names":[],"mappings":"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","file":"terminal.find.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { IDimension } from '../../../../../base/browser/dom.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { Lazy } from '../../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { findInFilesCommand } from '../../../search/browser/searchActionsFind.js';\nimport { IDetachedTerminalInstance, ITerminalContribution, ITerminalInstance, ITerminalService, IXtermTerminal, isDetachedTerminalInstance } from '../../../terminal/browser/terminal.js';\nimport { registerActiveInstanceAction, registerActiveXtermAction } from '../../../terminal/browser/terminalActions.js';\nimport { registerTerminalContribution, type IDetachedCompatibleTerminalContributionContext, type ITerminalContributionContext } from '../../../terminal/browser/terminalExtensions.js';\nimport { TerminalContextKeys } from '../../../terminal/common/terminalContextKey.js';\nimport { TerminalFindCommandId } from '../common/terminal.find.js';\nimport './media/terminalFind.css';\nimport { TerminalFindWidget } from './terminalFindWidget.js';\n\n// #region Terminal Contributions\n\nclass TerminalFindContribution extends Disposable implements ITerminalContribution {\n\tstatic readonly ID = 'terminal.find';\n\n\t/**\n\t * Currently focused find widget. This is used to track action context since\n\t * 'active terminals' are only tracked for non-detached terminal instanecs.\n\t */\n\tstatic activeFindWidget?: TerminalFindContribution;\n\n\tstatic get(instance: ITerminalInstance | IDetachedTerminalInstance): TerminalFindContribution | null {\n\t\treturn instance.getContribution<TerminalFindContribution>(TerminalFindContribution.ID);\n\t}\n\n\tprivate _findWidget: Lazy<TerminalFindWidget>;\n\tprivate _lastLayoutDimensions: IDimension | undefined;\n\n\tget findWidget(): TerminalFindWidget { return this._findWidget.value; }\n\n\tconstructor(\n\t\tctx: ITerminalContributionContext | IDetachedCompatibleTerminalContributionContext,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ITerminalService terminalService: ITerminalService,\n\t) {\n\t\tsuper();\n\n\t\tthis._findWidget = new Lazy(() => {\n\t\t\tconst findWidget = instantiationService.createInstance(TerminalFindWidget, ctx.instance);\n\n\t\t\t// Track focus and set state so we can force the scroll bar to be visible\n\t\t\tfindWidget.focusTracker.onDidFocus(() => {\n\t\t\t\tTerminalFindContribution.activeFindWidget = this;\n\t\t\t\tctx.instance.forceScrollbarVisibility();\n\t\t\t\tif (!isDetachedTerminalInstance(ctx.instance)) {\n\t\t\t\t\tterminalService.setActiveInstance(ctx.instance);\n\t\t\t\t}\n\t\t\t});\n\t\t\tfindWidget.focusTracker.onDidBlur(() => {\n\t\t\t\tTerminalFindContribution.activeFindWidget = undefined;\n\t\t\t\tctx.instance.resetScrollbarVisibility();\n\t\t\t});\n\n\t\t\tif (!ctx.instance.domElement) {\n\t\t\t\tthrow new Error('FindWidget expected terminal DOM to be initialized');\n\t\t\t}\n\n\t\t\tctx.instance.domElement?.appendChild(findWidget.getDomNode());\n\t\t\tif (this._lastLayoutDimensions) {\n\t\t\t\tfindWidget.layout(this._lastLayoutDimensions.width);\n\t\t\t}\n\n\t\t\treturn findWidget;\n\t\t});\n\t}\n\n\tlayout(_xterm: IXtermTerminal & { raw: RawXtermTerminal }, dimension: IDimension): void {\n\t\tthis._lastLayoutDimensions = dimension;\n\t\tthis._findWidget.rawValue?.layout(dimension.width);\n\t}\n\n\txtermReady(xterm: IXtermTerminal & { raw: RawXtermTerminal }): void {\n\t\tthis._register(xterm.onDidChangeFindResults(() => this._findWidget.rawValue?.updateResultCount()));\n\t}\n\n\toverride dispose() {\n\t\tif (TerminalFindContribution.activeFindWidget === this) {\n\t\t\tTerminalFindContribution.activeFindWidget = undefined;\n\t\t}\n\t\tsuper.dispose();\n\t\tthis._findWidget.rawValue?.dispose();\n\t}\n\n}\nregisterTerminalContribution(TerminalFindContribution.ID, TerminalFindContribution, true);\n\n// #endregion\n\n// #region Actions\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.FindFocus,\n\ttitle: localize2('workbench.action.terminal.focusFind', 'Focus Find'),\n\tkeybinding: {\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyF,\n\t\twhen: ContextKeyExpr.or(TerminalContextKeys.findFocus, TerminalContextKeys.focusInAny),\n\t\tweight: KeybindingWeight.WorkbenchContrib\n\t},\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tcontr?.findWidget.reveal();\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.FindHide,\n\ttitle: localize2('workbench.action.terminal.hideFind', 'Hide Find'),\n\tkeybinding: {\n\t\tprimary: KeyCode.Escape,\n\t\tsecondary: [KeyMod.Shift | KeyCode.Escape],\n\t\twhen: ContextKeyExpr.and(TerminalContextKeys.focusInAny, TerminalContextKeys.findVisible),\n\t\tweight: KeybindingWeight.WorkbenchContrib\n\t},\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tcontr?.findWidget.hide();\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.ToggleFindRegex,\n\ttitle: localize2('workbench.action.terminal.toggleFindRegex', 'Toggle Find Using Regex'),\n\tkeybinding: {\n\t\tprimary: KeyMod.Alt | KeyCode.KeyR,\n\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyR },\n\t\twhen: TerminalContextKeys.findVisible,\n\t\tweight: KeybindingWeight.WorkbenchContrib\n\t},\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tconst state = contr?.findWidget.state;\n\t\tstate?.change({ isRegex: !state.isRegex }, false);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.ToggleFindWholeWord,\n\ttitle: localize2('workbench.action.terminal.toggleFindWholeWord', 'Toggle Find Using Whole Word'),\n\tkeybinding: {\n\t\tprimary: KeyMod.Alt | KeyCode.KeyW,\n\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyW },\n\t\twhen: TerminalContextKeys.findVisible,\n\t\tweight: KeybindingWeight.WorkbenchContrib\n\t},\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tconst state = contr?.findWidget.state;\n\t\tstate?.change({ wholeWord: !state.wholeWord }, false);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.ToggleFindCaseSensitive,\n\ttitle: localize2('workbench.action.terminal.toggleFindCaseSensitive', 'Toggle Find Using Case Sensitive'),\n\tkeybinding: {\n\t\tprimary: KeyMod.Alt | KeyCode.KeyC,\n\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyC },\n\t\twhen: TerminalContextKeys.findVisible,\n\t\tweight: KeybindingWeight.WorkbenchContrib\n\t},\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tconst state = contr?.findWidget.state;\n\t\tstate?.change({ matchCase: !state.matchCase }, false);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.FindNext,\n\ttitle: localize2('workbench.action.terminal.findNext', 'Find Next'),\n\tkeybinding: [\n\t\t{\n\t\t\tprimary: KeyCode.F3,\n\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyCode.KeyG, secondary: [KeyCode.F3] },\n\t\t\twhen: ContextKeyExpr.or(TerminalContextKeys.focusInAny, TerminalContextKeys.findFocus),\n\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t},\n\t\t{\n\t\t\tprimary: KeyMod.Shift | KeyCode.Enter,\n\t\t\twhen: TerminalContextKeys.findInputFocus,\n\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t}\n\t],\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tconst widget = contr?.findWidget;\n\t\tif (widget) {\n\t\t\twidget.show();\n\t\t\twidget.find(false);\n\t\t}\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalFindCommandId.FindPrevious,\n\ttitle: localize2('workbench.action.terminal.findPrevious', 'Find Previous'),\n\tkeybinding: [\n\t\t{\n\t\t\tprimary: KeyMod.Shift | KeyCode.F3,\n\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyG, secondary: [KeyMod.Shift | KeyCode.F3] },\n\t\t\twhen: ContextKeyExpr.or(TerminalContextKeys.focusInAny, TerminalContextKeys.findFocus),\n\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t},\n\t\t{\n\t\t\tprimary: KeyCode.Enter,\n\t\t\twhen: TerminalContextKeys.findInputFocus,\n\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t}\n\t],\n\tprecondition: ContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tconst contr = TerminalFindContribution.activeFindWidget || TerminalFindContribution.get(activeInstance);\n\t\tconst widget = contr?.findWidget;\n\t\tif (widget) {\n\t\t\twidget.show();\n\t\t\twidget.find(true);\n\t\t}\n\t}\n});\n\n// Global workspace file search\nregisterActiveInstanceAction({\n\tid: TerminalFindCommandId.SearchWorkspace,\n\ttitle: localize2('workbench.action.terminal.searchWorkspace', 'Search Workspace'),\n\tkeybinding: [\n\t\t{\n\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyF,\n\t\t\twhen: ContextKeyExpr.and(TerminalContextKeys.processSupported, TerminalContextKeys.focus, TerminalContextKeys.textSelected),\n\t\t\tweight: KeybindingWeight.WorkbenchContrib + 50\n\t\t}\n\t],\n\trun: (activeInstance, c, accessor) => findInFilesCommand(accessor, { query: activeInstance.selection })\n});\n\n// #endregion\n"]}