{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/chat/test/browser/terminalInitialHint.test.ts","vs/workbench/contrib/terminalContrib/chat/test/browser/terminalInitialHint.test.ts"],"names":[],"mappings":"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","file":"terminalInitialHint.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal } from '@xterm/xterm';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ShellIntegrationAddon } from '../../../../../../platform/terminal/common/xterm/shellIntegrationAddon.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { InitialHintAddon } from '../../browser/terminal.initialHint.contribution.js';\nimport { getActiveDocument } from '../../../../../../base/browser/dom.js';\nimport { Emitter } from '../../../../../../base/common/event.js';\nimport { strictEqual } from 'assert';\nimport { ExtensionIdentifier } from '../../../../../../platform/extensions/common/extensions.js';\nimport { IChatAgent } from '../../../../chat/common/chatAgents.js';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { ChatAgentLocation, ChatModeKind } from '../../../../chat/common/constants.js';\n\nsuite('Terminal Initial Hint Addon', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet eventCount = 0;\n\tlet xterm: Terminal;\n\tlet initialHintAddon: InitialHintAddon;\n\tconst onDidChangeAgentsEmitter: Emitter<IChatAgent | undefined> = new Emitter();\n\tconst onDidChangeAgents = onDidChangeAgentsEmitter.event;\n\tconst agent: IChatAgent = {\n\t\tid: 'termminal',\n\t\tname: 'terminal',\n\t\textensionId: new ExtensionIdentifier('test'),\n\t\textensionVersion: undefined,\n\t\textensionPublisherId: 'test',\n\t\textensionDisplayName: 'test',\n\t\tmetadata: {},\n\t\tslashCommands: [{ name: 'test', description: 'test' }],\n\t\tdisambiguation: [],\n\t\tlocations: [ChatAgentLocation.fromRaw('terminal')],\n\t\tmodes: [ChatModeKind.Ask],\n\t\tinvoke: async () => { return {}; }\n\t};\n\tconst editorAgent: IChatAgent = {\n\t\tid: 'editor',\n\t\tname: 'editor',\n\t\textensionId: new ExtensionIdentifier('test-editor'),\n\t\textensionVersion: undefined,\n\t\textensionPublisherId: 'test-editor',\n\t\textensionDisplayName: 'test-editor',\n\t\tmetadata: {},\n\t\tslashCommands: [{ name: 'test', description: 'test' }],\n\t\tlocations: [ChatAgentLocation.fromRaw('editor')],\n\t\tmodes: [ChatModeKind.Ask],\n\t\tdisambiguation: [],\n\t\tinvoke: async () => { return {}; }\n\t};\n\tsetup(async () => {\n\t\tconst instantiationService = workbenchInstantiationService({}, store);\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\txterm = store.add(new TerminalCtor());\n\t\tconst shellIntegrationAddon = store.add(new ShellIntegrationAddon('', true, undefined, undefined, new NullLogService));\n\t\tinitialHintAddon = store.add(instantiationService.createInstance(InitialHintAddon, shellIntegrationAddon.capabilities, onDidChangeAgents));\n\t\tstore.add(initialHintAddon.onDidRequestCreateHint(() => eventCount++));\n\t\tconst testContainer = document.createElement('div');\n\t\tgetActiveDocument().body.append(testContainer);\n\t\txterm.open(testContainer);\n\n\t\txterm.loadAddon(shellIntegrationAddon);\n\t\txterm.loadAddon(initialHintAddon);\n\t});\n\n\tsuite('Chat providers', () => {\n\t\ttest('hint is not shown when there are no chat providers', () => {\n\t\t\teventCount = 0;\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 0);\n\t\t});\n\t\ttest('hint is not shown when there is just an editor agent', () => {\n\t\t\teventCount = 0;\n\t\t\tonDidChangeAgentsEmitter.fire(editorAgent);\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 0);\n\t\t});\n\t\ttest('hint is shown when there is a terminal chat agent', () => {\n\t\t\teventCount = 0;\n\t\t\tonDidChangeAgentsEmitter.fire(editorAgent);\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 0);\n\t\t\tonDidChangeAgentsEmitter.fire(agent);\n\t\t\tstrictEqual(eventCount, 1);\n\t\t});\n\t\ttest('hint is not shown again when another terminal chat agent is added if it has already shown', () => {\n\t\t\teventCount = 0;\n\t\t\tonDidChangeAgentsEmitter.fire(agent);\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 1);\n\t\t\tonDidChangeAgentsEmitter.fire(agent);\n\t\t\tstrictEqual(eventCount, 1);\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal } from '@xterm/xterm';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ShellIntegrationAddon } from '../../../../../../platform/terminal/common/xterm/shellIntegrationAddon.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { InitialHintAddon } from '../../browser/terminal.initialHint.contribution.js';\nimport { getActiveDocument } from '../../../../../../base/browser/dom.js';\nimport { Emitter } from '../../../../../../base/common/event.js';\nimport { strictEqual } from 'assert';\nimport { ExtensionIdentifier } from '../../../../../../platform/extensions/common/extensions.js';\nimport { IChatAgent } from '../../../../chat/common/chatAgents.js';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { ChatAgentLocation, ChatModeKind } from '../../../../chat/common/constants.js';\n\nsuite('Terminal Initial Hint Addon', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet eventCount = 0;\n\tlet xterm: Terminal;\n\tlet initialHintAddon: InitialHintAddon;\n\tconst onDidChangeAgentsEmitter: Emitter<IChatAgent | undefined> = new Emitter();\n\tconst onDidChangeAgents = onDidChangeAgentsEmitter.event;\n\tconst agent: IChatAgent = {\n\t\tid: 'termminal',\n\t\tname: 'terminal',\n\t\textensionId: new ExtensionIdentifier('test'),\n\t\textensionVersion: undefined,\n\t\textensionPublisherId: 'test',\n\t\textensionDisplayName: 'test',\n\t\tmetadata: {},\n\t\tslashCommands: [{ name: 'test', description: 'test' }],\n\t\tdisambiguation: [],\n\t\tlocations: [ChatAgentLocation.fromRaw('terminal')],\n\t\tmodes: [ChatModeKind.Ask],\n\t\tinvoke: async () => { return {}; }\n\t};\n\tconst editorAgent: IChatAgent = {\n\t\tid: 'editor',\n\t\tname: 'editor',\n\t\textensionId: new ExtensionIdentifier('test-editor'),\n\t\textensionVersion: undefined,\n\t\textensionPublisherId: 'test-editor',\n\t\textensionDisplayName: 'test-editor',\n\t\tmetadata: {},\n\t\tslashCommands: [{ name: 'test', description: 'test' }],\n\t\tlocations: [ChatAgentLocation.fromRaw('editor')],\n\t\tmodes: [ChatModeKind.Ask],\n\t\tdisambiguation: [],\n\t\tinvoke: async () => { return {}; }\n\t};\n\tsetup(async () => {\n\t\tconst instantiationService = workbenchInstantiationService({}, store);\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\txterm = store.add(new TerminalCtor());\n\t\tconst shellIntegrationAddon = store.add(new ShellIntegrationAddon('', true, undefined, undefined, new NullLogService));\n\t\tinitialHintAddon = store.add(instantiationService.createInstance(InitialHintAddon, shellIntegrationAddon.capabilities, onDidChangeAgents));\n\t\tstore.add(initialHintAddon.onDidRequestCreateHint(() => eventCount++));\n\t\tconst testContainer = document.createElement('div');\n\t\tgetActiveDocument().body.append(testContainer);\n\t\txterm.open(testContainer);\n\n\t\txterm.loadAddon(shellIntegrationAddon);\n\t\txterm.loadAddon(initialHintAddon);\n\t});\n\n\tsuite('Chat providers', () => {\n\t\ttest('hint is not shown when there are no chat providers', () => {\n\t\t\teventCount = 0;\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 0);\n\t\t});\n\t\ttest('hint is not shown when there is just an editor agent', () => {\n\t\t\teventCount = 0;\n\t\t\tonDidChangeAgentsEmitter.fire(editorAgent);\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 0);\n\t\t});\n\t\ttest('hint is shown when there is a terminal chat agent', () => {\n\t\t\teventCount = 0;\n\t\t\tonDidChangeAgentsEmitter.fire(editorAgent);\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 0);\n\t\t\tonDidChangeAgentsEmitter.fire(agent);\n\t\t\tstrictEqual(eventCount, 1);\n\t\t});\n\t\ttest('hint is not shown again when another terminal chat agent is added if it has already shown', () => {\n\t\t\teventCount = 0;\n\t\t\tonDidChangeAgentsEmitter.fire(agent);\n\t\t\txterm.focus();\n\t\t\tstrictEqual(eventCount, 1);\n\t\t\tonDidChangeAgentsEmitter.fire(agent);\n\t\t\tstrictEqual(eventCount, 1);\n\t\t});\n\t});\n});\n"]}