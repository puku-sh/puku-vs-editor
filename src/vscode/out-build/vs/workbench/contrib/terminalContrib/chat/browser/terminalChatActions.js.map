{"version":3,"sources":["vs/workbench/contrib/terminalContrib/chat/browser/terminalChatActions.ts"],"names":[],"mappings":"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","file":"terminalChatActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ChatViewId, IChatWidgetService } from '../../../chat/browser/chat.js';\nimport { ChatContextKeys } from '../../../chat/common/chatContextKeys.js';\nimport { IChatService } from '../../../chat/common/chatService.js';\nimport { LocalChatSessionUri } from '../../../chat/common/chatUri.js';\nimport { ChatAgentLocation } from '../../../chat/common/constants.js';\nimport { AbstractInline1ChatAction } from '../../../inlineChat/browser/inlineChatActions.js';\nimport { isDetachedTerminalInstance, ITerminalChatService, ITerminalEditorService, ITerminalGroupService, ITerminalInstance, ITerminalService } from '../../../terminal/browser/terminal.js';\nimport { registerActiveXtermAction } from '../../../terminal/browser/terminalActions.js';\nimport { TerminalContextMenuGroup } from '../../../terminal/browser/terminalMenus.js';\nimport { TerminalContextKeys } from '../../../terminal/common/terminalContextKey.js';\nimport { MENU_TERMINAL_CHAT_WIDGET_STATUS, TerminalChatCommandId, TerminalChatContextKeys } from './terminalChat.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { getIconId } from '../../../terminal/browser/terminalIcon.js';\nimport { TerminalChatController } from './terminalChatController.js';\nimport { TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { isString } from '../../../../../base/common/types.js';\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.Start,\n\ttitle: localize2('startChat', 'Open Inline Chat'),\n\tcategory: localize2('terminalCategory', \"Terminal\"),\n\tkeybinding: {\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyI,\n\t\twhen: ContextKeyExpr.and(TerminalContextKeys.focusInAny),\n\t\t// HACK: Force weight to be higher than the extension contributed keybinding to override it until it gets replaced\n\t\tweight: KeybindingWeight.ExternalExtension + 1, // KeybindingWeight.WorkbenchContrib,\n\t},\n\tf1: true,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.hasChatAgent\n\t),\n\tmenu: {\n\t\tid: MenuId.TerminalInstanceContext,\n\t\tgroup: TerminalContextMenuGroup.Chat,\n\t\torder: 2,\n\t\twhen: ChatContextKeys.enabled\n\t},\n\trun: (_xterm, _accessor, activeInstance, opts?: unknown) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tif (!contr) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (opts) {\n\t\t\tfunction isValidOptionsObject(obj: unknown): obj is { query: string; isPartialQuery?: boolean } {\n\t\t\t\treturn typeof obj === 'object' && obj !== null && 'query' in obj && isString(obj.query);\n\t\t\t}\n\t\t\topts = isString(opts) ? { query: opts } : opts;\n\t\t\tif (isValidOptionsObject(opts)) {\n\t\t\t\tcontr.updateInput(opts.query, false);\n\t\t\t\tif (!opts.isPartialQuery) {\n\t\t\t\t\tcontr.terminalChatWidget?.acceptInput();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tcontr.terminalChatWidget?.reveal();\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.Close,\n\ttitle: localize2('closeChat', 'Close'),\n\tcategory: AbstractInline1ChatAction.category,\n\tkeybinding: {\n\t\tprimary: KeyCode.Escape,\n\t\twhen: ContextKeyExpr.and(\n\t\t\tContextKeyExpr.or(TerminalContextKeys.focus, TerminalChatContextKeys.focused),\n\t\t\tTerminalChatContextKeys.visible\n\t\t),\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t},\n\tmenu: [{\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: '0_main',\n\t\torder: 2,\n\t}],\n\ticon: Codicon.close,\n\tf1: true,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tTerminalChatContextKeys.visible,\n\t),\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tcontr?.terminalChatWidget?.clear();\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.RunCommand,\n\ttitle: localize2('runCommand', 'Run Chat Command'),\n\tshortTitle: localize2('run', 'Run'),\n\tcategory: AbstractInline1ChatAction.category,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.requestActive.negate(),\n\t\tTerminalChatContextKeys.responseContainsCodeBlock,\n\t\tTerminalChatContextKeys.responseContainsMultipleCodeBlocks.negate()\n\t),\n\ticon: Codicon.play,\n\tkeybinding: {\n\t\twhen: TerminalChatContextKeys.requestActive.negate(),\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t},\n\tmenu: {\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: '0_main',\n\t\torder: 0,\n\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.responseContainsCodeBlock, TerminalChatContextKeys.responseContainsMultipleCodeBlocks.negate(), TerminalChatContextKeys.requestActive.negate())\n\t},\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tcontr?.terminalChatWidget?.acceptCommand(true);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.RunFirstCommand,\n\ttitle: localize2('runFirstCommand', 'Run First Chat Command'),\n\tshortTitle: localize2('runFirst', 'Run First'),\n\tcategory: AbstractInline1ChatAction.category,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.requestActive.negate(),\n\t\tTerminalChatContextKeys.responseContainsMultipleCodeBlocks\n\t),\n\ticon: Codicon.play,\n\tkeybinding: {\n\t\twhen: TerminalChatContextKeys.requestActive.negate(),\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t},\n\tmenu: {\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: '0_main',\n\t\torder: 0,\n\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.responseContainsMultipleCodeBlocks, TerminalChatContextKeys.requestActive.negate())\n\t},\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tcontr?.terminalChatWidget?.acceptCommand(true);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.InsertCommand,\n\ttitle: localize2('insertCommand', 'Insert Chat Command'),\n\tshortTitle: localize2('insert', 'Insert'),\n\tcategory: AbstractInline1ChatAction.category,\n\ticon: Codicon.insert,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.requestActive.negate(),\n\t\tTerminalChatContextKeys.responseContainsCodeBlock,\n\t\tTerminalChatContextKeys.responseContainsMultipleCodeBlocks.negate()\n\t),\n\tkeybinding: {\n\t\twhen: TerminalChatContextKeys.requestActive.negate(),\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\tprimary: KeyMod.Alt | KeyCode.Enter,\n\t\tsecondary: [KeyMod.CtrlCmd | KeyCode.Enter | KeyMod.Alt]\n\t},\n\tmenu: {\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: '0_main',\n\t\torder: 1,\n\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.responseContainsCodeBlock, TerminalChatContextKeys.responseContainsMultipleCodeBlocks.negate(), TerminalChatContextKeys.requestActive.negate())\n\t},\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tcontr?.terminalChatWidget?.acceptCommand(false);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.InsertFirstCommand,\n\ttitle: localize2('insertFirstCommand', 'Insert First Chat Command'),\n\tshortTitle: localize2('insertFirst', 'Insert First'),\n\tcategory: AbstractInline1ChatAction.category,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.requestActive.negate(),\n\t\tTerminalChatContextKeys.responseContainsMultipleCodeBlocks\n\t),\n\tkeybinding: {\n\t\twhen: TerminalChatContextKeys.requestActive.negate(),\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\tprimary: KeyMod.Alt | KeyCode.Enter,\n\t\tsecondary: [KeyMod.CtrlCmd | KeyCode.Enter | KeyMod.Alt]\n\t},\n\tmenu: {\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: '0_main',\n\t\torder: 1,\n\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.responseContainsMultipleCodeBlocks, TerminalChatContextKeys.requestActive.negate())\n\t},\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tcontr?.terminalChatWidget?.acceptCommand(false);\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.RerunRequest,\n\ttitle: localize2('chat.rerun.label', \"Rerun Request\"),\n\tf1: false,\n\ticon: Codicon.refresh,\n\tcategory: AbstractInline1ChatAction.category,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.requestActive.negate(),\n\t),\n\tkeybinding: {\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyR,\n\t\twhen: TerminalChatContextKeys.focused\n\t},\n\tmenu: {\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: '0_main',\n\t\torder: 5,\n\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.inputHasText.toNegated(), TerminalChatContextKeys.requestActive.negate())\n\t},\n\trun: async (_xterm, _accessor, activeInstance) => {\n\t\tconst chatService = _accessor.get(IChatService);\n\t\tconst chatWidgetService = _accessor.get(IChatWidgetService);\n\t\tconst contr = TerminalChatController.activeChatController;\n\t\tconst model = contr?.terminalChatWidget?.inlineChatWidget.chatWidget.viewModel?.model;\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastRequest = model.getRequests().at(-1);\n\t\tif (lastRequest) {\n\t\t\tconst widget = chatWidgetService.getWidgetBySessionResource(model.sessionResource);\n\t\t\tawait chatService.resendRequest(lastRequest, {\n\t\t\t\tnoCommandDetection: false,\n\t\t\t\tattempt: lastRequest.attempt + 1,\n\t\t\t\tlocation: ChatAgentLocation.Terminal,\n\t\t\t\tuserSelectedModelId: widget?.input.currentLanguageModel\n\t\t\t});\n\t\t}\n\t}\n});\n\nregisterActiveXtermAction({\n\tid: TerminalChatCommandId.ViewInChat,\n\ttitle: localize2('viewInChat', 'View in Chat'),\n\tcategory: AbstractInline1ChatAction.category,\n\tprecondition: ContextKeyExpr.and(\n\t\tChatContextKeys.enabled,\n\t\tContextKeyExpr.or(TerminalContextKeys.processSupported, TerminalContextKeys.terminalHasBeenCreated),\n\t\tTerminalChatContextKeys.requestActive.negate(),\n\t),\n\ticon: Codicon.chatSparkle,\n\tmenu: [{\n\t\tid: MENU_TERMINAL_CHAT_WIDGET_STATUS,\n\t\tgroup: 'zzz',\n\t\torder: 1,\n\t\tisHiddenByDefault: true,\n\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.responseContainsCodeBlock, TerminalChatContextKeys.requestActive.negate()),\n\t}],\n\trun: (_xterm, _accessor, activeInstance) => {\n\t\tif (isDetachedTerminalInstance(activeInstance)) {\n\t\t\treturn;\n\t\t}\n\t\tconst contr = TerminalChatController.activeChatController || TerminalChatController.get(activeInstance);\n\t\tcontr?.viewInChat();\n\t}\n});\n\nregisterAction2(class ShowChatTerminalsAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TerminalChatCommandId.ViewHiddenChatTerminals,\n\t\t\ttitle: localize2('viewHiddenChatTerminals', 'View Hidden Chat Terminals'),\n\t\t\tcategory: localize2('terminalCategory2', 'Terminal'),\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(TerminalChatContextKeys.hasHiddenChatTerminals, ChatContextKeys.enabled),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\twhen: ContextKeyExpr.and(TerminalChatContextKeys.hasHiddenChatTerminals, ContextKeyExpr.equals('view', ChatViewId)),\n\t\t\t\tgroup: 'terminal',\n\t\t\t\torder: 0,\n\t\t\t\tisHiddenByDefault: true\n\t\t\t}]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst terminalService = accessor.get(ITerminalService);\n\t\tconst groupService = accessor.get(ITerminalGroupService);\n\t\tconst editorService = accessor.get(ITerminalEditorService);\n\t\tconst terminalChatService = accessor.get(ITerminalChatService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst chatService = accessor.get(IChatService);\n\n\t\tconst visible = new Set<ITerminalInstance>([...groupService.instances, ...editorService.instances]);\n\t\tconst toolInstances = terminalChatService.getToolSessionTerminalInstances();\n\n\t\tif (toolInstances.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst all = new Map<number, ITerminalInstance>();\n\n\t\tfor (const i of toolInstances) {\n\t\t\tif (!visible.has(i)) {\n\t\t\t\tall.set(i.instanceId, i);\n\t\t\t}\n\t\t}\n\n\t\tconst items: IQuickPickItem[] = [];\n\t\tinterface IItemMeta {\n\t\t\tlabel: string;\n\t\t\tdescription: string | undefined;\n\t\t\tdetail: string | undefined;\n\t\t\tid: string;\n\t\t}\n\t\tconst lastCommandLocalized = (command: string) => localize2('chatTerminal.lastCommand', 'Last: {0}', command).value;\n\n\t\tconst metas: IItemMeta[] = [];\n\t\tfor (const instance of all.values()) {\n\t\t\tconst iconId = instantiationService.invokeFunction(getIconId, instance);\n\t\t\tconst label = `$(${iconId}) ${instance.title}`;\n\t\t\tconst lastCommand = instance.capabilities.get(TerminalCapability.CommandDetection)?.commands.at(-1)?.command;\n\n\t\t\t// Get the chat session title\n\t\t\tconst chatSessionId = terminalChatService.getChatSessionIdForInstance(instance);\n\t\t\tlet chatSessionTitle: string | undefined;\n\t\t\tif (chatSessionId) {\n\t\t\t\tconst sessionUri = LocalChatSessionUri.forSession(chatSessionId);\n\t\t\t\t// Try to get title from active session first, then fall back to persisted title\n\t\t\t\tchatSessionTitle = chatService.getSession(sessionUri)?.title || chatService.getPersistedSessionTitle(sessionUri);\n\t\t\t}\n\n\t\t\tlet description: string | undefined;\n\t\t\tif (chatSessionTitle) {\n\t\t\t\tdescription = `${chatSessionTitle}`;\n\t\t\t}\n\n\t\t\tmetas.push({\n\t\t\t\tlabel,\n\t\t\t\tdescription,\n\t\t\t\tdetail: lastCommand ? lastCommandLocalized(lastCommand) : undefined,\n\t\t\t\tid: String(instance.instanceId),\n\t\t\t});\n\t\t}\n\n\t\tfor (const m of metas) {\n\t\t\titems.push({\n\t\t\t\tlabel: m.label,\n\t\t\t\tdescription: m.description,\n\t\t\t\tdetail: m.detail,\n\t\t\t\tid: m.id\n\t\t\t});\n\t\t}\n\n\t\tconst qp = quickInputService.createQuickPick<IQuickPickItem>();\n\t\tqp.placeholder = localize2('selectChatTerminal', 'Select a chat terminal to show and focus').value;\n\t\tqp.items = items;\n\t\tqp.canSelectMany = false;\n\t\tqp.title = localize2('showChatTerminals.title', 'Chat Terminals').value;\n\t\tqp.matchOnDescription = true;\n\t\tqp.matchOnDetail = true;\n\t\tqp.onDidAccept(async () => {\n\t\t\tconst sel = qp.selectedItems[0];\n\t\t\tif (sel) {\n\t\t\t\tconst instance = all.get(Number(sel.id));\n\t\t\t\tif (instance) {\n\t\t\t\t\tterminalService.setActiveInstance(instance);\n\t\t\t\t\tawait terminalService.revealTerminal(instance);\n\t\t\t\t\tqp.hide();\n\t\t\t\t\tterminalService.focusInstance(instance);\n\t\t\t\t} else {\n\t\t\t\t\tqp.hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tqp.hide();\n\t\t\t}\n\t\t});\n\t\tqp.onDidHide(() => qp.dispose());\n\t\tqp.show();\n\t}\n});\n"]}