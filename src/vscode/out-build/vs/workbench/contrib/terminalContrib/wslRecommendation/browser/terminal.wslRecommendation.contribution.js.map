{"version":3,"sources":["vs/workbench/contrib/terminalContrib/wslRecommendation/browser/terminal.wslRecommendation.contribution.ts"],"names":[],"mappings":"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","file":"terminal.wslRecommendation.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, type IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../../base/common/path.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { localize } from '../../../../../nls.js';\nimport { IExtensionManagementService } from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService, NeverShowAgainScope, NotificationPriority, Severity } from '../../../../../platform/notification/common/notification.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { registerWorkbenchContribution2, WorkbenchPhase, type IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { InstallRecommendedExtensionAction } from '../../../extensions/browser/extensionsActions.js';\nimport { ITerminalService } from '../../../terminal/browser/terminal.js';\n\nexport class TerminalWslRecommendationContribution extends Disposable implements IWorkbenchContribution {\n\tstatic ID = 'terminalWslRecommendation';\n\n\tconstructor(\n\t\t@IExtensionManagementService extensionManagementService: IExtensionManagementService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IProductService productService: IProductService,\n\t\t@ITerminalService terminalService: ITerminalService,\n\t) {\n\t\tsuper();\n\n\t\tif (!isWindows) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst exeBasedExtensionTips = productService.exeBasedExtensionTips;\n\t\tif (!exeBasedExtensionTips || !exeBasedExtensionTips.wsl) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet listener: IDisposable | undefined = terminalService.onDidCreateInstance(async instance => {\n\t\t\tasync function isExtensionInstalled(id: string): Promise<boolean> {\n\t\t\t\tconst extensions = await extensionManagementService.getInstalled();\n\t\t\t\treturn extensions.some(e => e.identifier.id === id);\n\t\t\t}\n\n\t\t\tif (!instance.shellLaunchConfig.executable || basename(instance.shellLaunchConfig.executable).toLowerCase() !== 'wsl.exe') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlistener?.dispose();\n\t\t\tlistener = undefined;\n\n\t\t\tconst extId = Object.keys(exeBasedExtensionTips.wsl.recommendations).find(extId => exeBasedExtensionTips.wsl.recommendations[extId].important);\n\t\t\tif (!extId || await isExtensionInstalled(extId)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnotificationService.prompt(\n\t\t\t\tSeverity.Info,\n\t\t\t\tlocalize('useWslExtension.title', \"The '{0}' extension is recommended for opening a terminal in WSL.\", exeBasedExtensionTips.wsl.friendlyName),\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize('install', 'Install'),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tinstantiationService.createInstance(InstallRecommendedExtensionAction, extId).run();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tpriority: NotificationPriority.OPTIONAL,\n\t\t\t\t\tneverShowAgain: { id: 'terminalConfigHelper/launchRecommendationsIgnore', scope: NeverShowAgainScope.APPLICATION },\n\t\t\t\t\tonCancel: () => { }\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n\nregisterWorkbenchContribution2(TerminalWslRecommendationContribution.ID, TerminalWslRecommendationContribution, WorkbenchPhase.Eventually);\n"]}