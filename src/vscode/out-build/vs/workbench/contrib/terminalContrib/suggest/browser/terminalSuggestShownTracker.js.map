{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/suggest/browser/terminalSuggestShownTracker.ts","vs/workbench/contrib/terminalContrib/suggest/browser/terminalSuggestShownTracker.ts"],"names":[],"mappings":"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","file":"terminalSuggestShownTracker.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { TimeoutTimer } from '../../../../../base/common/async.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { TerminalShellType } from '../../../../../platform/terminal/common/terminal.js';\nimport { IExtensionService } from '../../../../services/extensions/common/extensions.js';\n\n\nexport const TERMINAL_SUGGEST_DISCOVERABILITY_KEY = 'terminal.suggest.increasedDiscoverability';\nexport const TERMINAL_SUGGEST_DISCOVERABILITY_COUNT_KEY = 'terminal.suggest.increasedDiscoverabilityCount';\nconst TERMINAL_SUGGEST_DISCOVERABILITY_MAX_COUNT = 10;\nconst TERMINAL_SUGGEST_DISCOVERABILITY_MIN_MS = 10000;\n\ninterface ITerminalSuggestShownTracker extends IDisposable {\n\tgetFirstShown(shellType: TerminalShellType): { window: boolean; shell: boolean };\n\tupdateShown(): void;\n\tresetState(): void;\n}\n\nexport class TerminalSuggestShownTracker extends Disposable implements ITerminalSuggestShownTracker {\n\tprivate _done: boolean;\n\tprivate _count: number;\n\tprivate _timeout: TimeoutTimer | undefined;\n\tprivate _start: number | undefined;\n\n\tprivate _firstShownTracker: { shell: Set<TerminalShellType | undefined>; window: boolean } | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _shellType: TerminalShellType | undefined,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService\n\n\t) {\n\t\tsuper();\n\t\tthis._done = this._storageService.getBoolean(TERMINAL_SUGGEST_DISCOVERABILITY_KEY, StorageScope.APPLICATION, false);\n\t\tthis._count = this._storageService.getNumber(TERMINAL_SUGGEST_DISCOVERABILITY_COUNT_KEY, StorageScope.APPLICATION, 0);\n\t\tthis._register(this._extensionService.onWillStop(() => this._firstShownTracker = undefined));\n\t}\n\n\tget done(): boolean {\n\t\treturn this._done;\n\t}\n\n\tresetState(): void {\n\t\tthis._done = false;\n\t\tthis._count = 0;\n\t\tthis._start = undefined;\n\t\tthis._firstShownTracker = undefined;\n\t}\n\n\tresetTimer(): void {\n\t\tif (this._timeout) {\n\t\t\tthis._timeout.cancel();\n\t\t\tthis._timeout = undefined;\n\t\t}\n\t\tthis._start = undefined;\n\t}\n\n\tupdate(widgetElt: HTMLElement | undefined): void {\n\t\tif (this._done) {\n\t\t\treturn;\n\t\t}\n\t\tthis._count++;\n\t\tthis._storageService.store(TERMINAL_SUGGEST_DISCOVERABILITY_COUNT_KEY, this._count, StorageScope.APPLICATION, StorageTarget.USER);\n\t\tif (widgetElt && !widgetElt.classList.contains('increased-discoverability')) {\n\t\t\twidgetElt.classList.add('increased-discoverability');\n\t\t}\n\t\tif (this._count >= TERMINAL_SUGGEST_DISCOVERABILITY_MAX_COUNT) {\n\t\t\tthis._setDone(widgetElt);\n\t\t} else if (!this._start) {\n\t\t\tthis.resetTimer();\n\t\t\tthis._start = Date.now();\n\t\t\tthis._timeout = this._register(new TimeoutTimer(() => {\n\t\t\t\tthis._setDone(widgetElt);\n\t\t\t}, TERMINAL_SUGGEST_DISCOVERABILITY_MIN_MS));\n\t\t}\n\t}\n\n\tprivate _setDone(widgetElt: HTMLElement | undefined) {\n\t\tthis._done = true;\n\t\tthis._storageService.store(TERMINAL_SUGGEST_DISCOVERABILITY_KEY, true, StorageScope.APPLICATION, StorageTarget.USER);\n\t\tif (widgetElt) {\n\t\t\twidgetElt.classList.remove('increased-discoverability');\n\t\t}\n\t\tif (this._timeout) {\n\t\t\tthis._timeout.cancel();\n\t\t\tthis._timeout = undefined;\n\t\t}\n\t\tthis._start = undefined;\n\t}\n\n\tgetFirstShown(shellType: TerminalShellType | undefined): { window: boolean; shell: boolean } {\n\t\tif (!this._firstShownTracker) {\n\t\t\tthis._firstShownTracker = {\n\t\t\t\twindow: true,\n\t\t\t\tshell: new Set([shellType])\n\t\t\t};\n\t\t\treturn { window: true, shell: true };\n\t\t}\n\n\t\tconst isFirstForWindow = this._firstShownTracker.window;\n\t\tconst isFirstForShell = !this._firstShownTracker.shell.has(shellType);\n\n\t\tif (isFirstForWindow || isFirstForShell) {\n\t\t\tthis.updateShown();\n\t\t}\n\n\t\treturn {\n\t\t\twindow: isFirstForWindow,\n\t\t\tshell: isFirstForShell\n\t\t};\n\t}\n\n\tupdateShown(): void {\n\t\tif (!this._shellType || !this._firstShownTracker) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._firstShownTracker.window = false;\n\t\tthis._firstShownTracker.shell.add(this._shellType);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { TimeoutTimer } from '../../../../../base/common/async.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { TerminalShellType } from '../../../../../platform/terminal/common/terminal.js';\nimport { IExtensionService } from '../../../../services/extensions/common/extensions.js';\n\n\nexport const TERMINAL_SUGGEST_DISCOVERABILITY_KEY = 'terminal.suggest.increasedDiscoverability';\nexport const TERMINAL_SUGGEST_DISCOVERABILITY_COUNT_KEY = 'terminal.suggest.increasedDiscoverabilityCount';\nconst TERMINAL_SUGGEST_DISCOVERABILITY_MAX_COUNT = 10;\nconst TERMINAL_SUGGEST_DISCOVERABILITY_MIN_MS = 10000;\n\ninterface ITerminalSuggestShownTracker extends IDisposable {\n\tgetFirstShown(shellType: TerminalShellType): { window: boolean; shell: boolean };\n\tupdateShown(): void;\n\tresetState(): void;\n}\n\nexport class TerminalSuggestShownTracker extends Disposable implements ITerminalSuggestShownTracker {\n\tprivate _done: boolean;\n\tprivate _count: number;\n\tprivate _timeout: TimeoutTimer | undefined;\n\tprivate _start: number | undefined;\n\n\tprivate _firstShownTracker: { shell: Set<TerminalShellType | undefined>; window: boolean } | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly _shellType: TerminalShellType | undefined,\n\t\t@IStorageService private readonly _storageService: IStorageService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService\n\n\t) {\n\t\tsuper();\n\t\tthis._done = this._storageService.getBoolean(TERMINAL_SUGGEST_DISCOVERABILITY_KEY, StorageScope.APPLICATION, false);\n\t\tthis._count = this._storageService.getNumber(TERMINAL_SUGGEST_DISCOVERABILITY_COUNT_KEY, StorageScope.APPLICATION, 0);\n\t\tthis._register(this._extensionService.onWillStop(() => this._firstShownTracker = undefined));\n\t}\n\n\tget done(): boolean {\n\t\treturn this._done;\n\t}\n\n\tresetState(): void {\n\t\tthis._done = false;\n\t\tthis._count = 0;\n\t\tthis._start = undefined;\n\t\tthis._firstShownTracker = undefined;\n\t}\n\n\tresetTimer(): void {\n\t\tif (this._timeout) {\n\t\t\tthis._timeout.cancel();\n\t\t\tthis._timeout = undefined;\n\t\t}\n\t\tthis._start = undefined;\n\t}\n\n\tupdate(widgetElt: HTMLElement | undefined): void {\n\t\tif (this._done) {\n\t\t\treturn;\n\t\t}\n\t\tthis._count++;\n\t\tthis._storageService.store(TERMINAL_SUGGEST_DISCOVERABILITY_COUNT_KEY, this._count, StorageScope.APPLICATION, StorageTarget.USER);\n\t\tif (widgetElt && !widgetElt.classList.contains('increased-discoverability')) {\n\t\t\twidgetElt.classList.add('increased-discoverability');\n\t\t}\n\t\tif (this._count >= TERMINAL_SUGGEST_DISCOVERABILITY_MAX_COUNT) {\n\t\t\tthis._setDone(widgetElt);\n\t\t} else if (!this._start) {\n\t\t\tthis.resetTimer();\n\t\t\tthis._start = Date.now();\n\t\t\tthis._timeout = this._register(new TimeoutTimer(() => {\n\t\t\t\tthis._setDone(widgetElt);\n\t\t\t}, TERMINAL_SUGGEST_DISCOVERABILITY_MIN_MS));\n\t\t}\n\t}\n\n\tprivate _setDone(widgetElt: HTMLElement | undefined) {\n\t\tthis._done = true;\n\t\tthis._storageService.store(TERMINAL_SUGGEST_DISCOVERABILITY_KEY, true, StorageScope.APPLICATION, StorageTarget.USER);\n\t\tif (widgetElt) {\n\t\t\twidgetElt.classList.remove('increased-discoverability');\n\t\t}\n\t\tif (this._timeout) {\n\t\t\tthis._timeout.cancel();\n\t\t\tthis._timeout = undefined;\n\t\t}\n\t\tthis._start = undefined;\n\t}\n\n\tgetFirstShown(shellType: TerminalShellType | undefined): { window: boolean; shell: boolean } {\n\t\tif (!this._firstShownTracker) {\n\t\t\tthis._firstShownTracker = {\n\t\t\t\twindow: true,\n\t\t\t\tshell: new Set([shellType])\n\t\t\t};\n\t\t\treturn { window: true, shell: true };\n\t\t}\n\n\t\tconst isFirstForWindow = this._firstShownTracker.window;\n\t\tconst isFirstForShell = !this._firstShownTracker.shell.has(shellType);\n\n\t\tif (isFirstForWindow || isFirstForShell) {\n\t\t\tthis.updateShown();\n\t\t}\n\n\t\treturn {\n\t\t\twindow: isFirstForWindow,\n\t\t\tshell: isFirstForShell\n\t\t};\n\t}\n\n\tupdateShown(): void {\n\t\tif (!this._shellType || !this._firstShownTracker) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._firstShownTracker.window = false;\n\t\tthis._firstShownTracker.shell.add(this._shellType);\n\t}\n}\n"]}