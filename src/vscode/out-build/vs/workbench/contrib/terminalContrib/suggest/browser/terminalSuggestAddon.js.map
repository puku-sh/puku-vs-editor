{"version":3,"sources":["vs/workbench/contrib/terminalContrib/suggest/browser/terminalSuggestAddon.ts"],"names":[],"mappings":"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","file":"terminalSuggestAddon.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { ITerminalAddon, Terminal } from '@xterm/xterm';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { combinedDisposable, Disposable, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { sep } from '../../../../../base/common/path.js';\nimport { commonPrefixLength } from '../../../../../base/common/strings.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { TerminalCapability, type ITerminalCapabilityStore } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport type { IPromptInputModel, IPromptInputModelState } from '../../../../../platform/terminal/common/capabilities/commandDetection/promptInputModel.js';\nimport type { IXtermCore } from '../../../terminal/browser/xterm-private.js';\nimport { TerminalStorageKeys } from '../../../terminal/common/terminalStorageKeys.js';\nimport { terminalSuggestConfigSection, TerminalSuggestSettingId, type ITerminalSuggestConfiguration } from '../common/terminalSuggestConfiguration.js';\nimport { LineContext } from '../../../../services/suggest/browser/simpleCompletionModel.js';\nimport { ISimpleSelectedSuggestion, SimpleSuggestWidget } from '../../../../services/suggest/browser/simpleSuggestWidget.js';\nimport { ITerminalCompletionService } from './terminalCompletionService.js';\nimport { TerminalSettingId, TerminalShellType, PosixShellType, WindowsShellType, GeneralShellType, ITerminalLogService } from '../../../../../platform/terminal/common/terminal.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { createCancelablePromise, CancelablePromise, IntervalTimer, TimeoutTimer } from '../../../../../base/common/async.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { ISimpleSuggestWidgetFontInfo } from '../../../../services/suggest/browser/simpleSuggestWidgetRenderer.js';\nimport { ITerminalConfigurationService } from '../../../terminal/browser/terminal.js';\nimport { GOLDEN_LINE_HEIGHT_RATIO } from '../../../../../editor/common/config/fontInfo.js';\nimport { TerminalCompletionModel } from './terminalCompletionModel.js';\nimport { TerminalCompletionItem, TerminalCompletionItemKind, type ITerminalCompletion } from './terminalCompletionItem.js';\nimport { localize } from '../../../../../nls.js';\nimport { TerminalSuggestTelemetry } from './terminalSuggestTelemetry.js';\nimport { terminalSymbolAliasIcon, terminalSymbolArgumentIcon, terminalSymbolEnumMember, terminalSymbolFileIcon, terminalSymbolFlagIcon, terminalSymbolInlineSuggestionIcon, terminalSymbolMethodIcon, terminalSymbolOptionIcon, terminalSymbolFolderIcon, terminalSymbolSymbolicLinkFileIcon, terminalSymbolSymbolicLinkFolderIcon, terminalSymbolCommitIcon, terminalSymbolBranchIcon, terminalSymbolTagIcon, terminalSymbolStashIcon, terminalSymbolRemoteIcon, terminalSymbolPullRequestIcon, terminalSymbolPullRequestDoneIcon, terminalSymbolSymbolTextIcon } from './terminalSymbolIcons.js';\nimport { TerminalSuggestShownTracker } from './terminalSuggestShownTracker.js';\nimport { SimpleSuggestDetailsPlacement } from '../../../../services/suggest/browser/simpleSuggestWidgetDetails.js';\nimport { isString } from '../../../../../base/common/types.js';\n\nexport interface ISuggestController {\n\tisPasting: boolean;\n\tselectPreviousSuggestion(): void;\n\tselectPreviousPageSuggestion(): void;\n\tselectNextSuggestion(): void;\n\tselectNextPageSuggestion(): void;\n\tacceptSelectedSuggestion(suggestion?: Pick<ISimpleSelectedSuggestion<TerminalCompletionItem>, 'item' | 'model'>): void;\n\thideSuggestWidget(cancelAnyRequests: boolean, wasClosedByUser?: boolean): void;\n}\n\nexport function isInlineCompletionSupported(shellType: TerminalShellType | undefined): boolean {\n\tif (!shellType) {\n\t\treturn false;\n\t}\n\treturn shellType === PosixShellType.Bash ||\n\t\tshellType === PosixShellType.Zsh ||\n\t\tshellType === PosixShellType.Fish ||\n\t\tshellType === GeneralShellType.PowerShell ||\n\t\tshellType === WindowsShellType.GitBash;\n}\n\nexport class SuggestAddon extends Disposable implements ITerminalAddon, ISuggestController {\n\tprivate _terminal?: Terminal;\n\n\tprivate _promptInputModel?: IPromptInputModel;\n\tprivate readonly _promptInputModelSubscriptions = this._register(new MutableDisposable());\n\n\tprivate _mostRecentPromptInputState?: IPromptInputModelState;\n\tprivate _currentPromptInputState?: IPromptInputModelState;\n\tprivate _model?: TerminalCompletionModel;\n\n\tprivate _container?: HTMLElement;\n\tprivate _screen?: HTMLElement;\n\tprivate _suggestWidget?: SimpleSuggestWidget<TerminalCompletionModel, TerminalCompletionItem>;\n\tprivate _cachedFontInfo: ISimpleSuggestWidgetFontInfo | undefined;\n\tprivate _enableWidget: boolean = true;\n\tprivate _pathSeparator: string = sep;\n\tprivate _isFilteringDirectories: boolean = false;\n\n\t// TODO: Remove these in favor of prompt input state\n\tprivate _leadingLineContent?: string;\n\tprivate _cursorIndexDelta: number = 0;\n\tprivate _requestedCompletionsIndex: number = 0;\n\n\tprivate _lastUserData?: string;\n\tstatic lastAcceptedCompletionTimestamp: number = 0;\n\tprivate _lastUserDataTimestamp: number = 0;\n\n\tprivate _cancellationTokenSource: CancellationTokenSource | undefined;\n\n\tprivate _discoverability: TerminalSuggestShownTracker | undefined;\n\n\t// Terminal suggest resolution tracking (similar to editor's suggest widget)\n\tprivate _currentSuggestionDetails?: CancelablePromise<void>;\n\tprivate _focusedItem?: TerminalCompletionItem;\n\tprivate _ignoreFocusEvents: boolean = false;\n\tprivate _requestCompletionsOnNextSync: boolean = false;\n\n\tisPasting: boolean = false;\n\tshellType: TerminalShellType | undefined;\n\tprivate readonly _shellTypeInit: Promise<void>;\n\n\tprivate readonly _onBell = this._register(new Emitter<void>());\n\treadonly onBell = this._onBell.event;\n\tprivate readonly _onAcceptedCompletion = this._register(new Emitter<string>());\n\treadonly onAcceptedCompletion = this._onAcceptedCompletion.event;\n\tprivate readonly _onDidReceiveCompletions = this._register(new Emitter<void>());\n\treadonly onDidReceiveCompletions = this._onDidReceiveCompletions.event;\n\tprivate readonly _onDidFontConfigurationChange = this._register(new Emitter<void>());\n\treadonly onDidFontConfigurationChange = this._onDidFontConfigurationChange.event;\n\n\tprivate _kindToIconMap = new Map<number, ThemeIcon>([\n\t\t[TerminalCompletionItemKind.File, terminalSymbolFileIcon],\n\t\t[TerminalCompletionItemKind.Folder, terminalSymbolFolderIcon],\n\t\t[TerminalCompletionItemKind.SymbolicLinkFile, terminalSymbolSymbolicLinkFileIcon],\n\t\t[TerminalCompletionItemKind.SymbolicLinkFolder, terminalSymbolSymbolicLinkFolderIcon],\n\t\t[TerminalCompletionItemKind.Method, terminalSymbolMethodIcon],\n\t\t[TerminalCompletionItemKind.Alias, terminalSymbolAliasIcon],\n\t\t[TerminalCompletionItemKind.Argument, terminalSymbolArgumentIcon],\n\t\t[TerminalCompletionItemKind.Option, terminalSymbolOptionIcon],\n\t\t[TerminalCompletionItemKind.OptionValue, terminalSymbolEnumMember],\n\t\t[TerminalCompletionItemKind.Flag, terminalSymbolFlagIcon],\n\t\t[TerminalCompletionItemKind.Commit, terminalSymbolCommitIcon],\n\t\t[TerminalCompletionItemKind.Branch, terminalSymbolBranchIcon],\n\t\t[TerminalCompletionItemKind.Tag, terminalSymbolTagIcon],\n\t\t[TerminalCompletionItemKind.Stash, terminalSymbolStashIcon],\n\t\t[TerminalCompletionItemKind.Remote, terminalSymbolRemoteIcon],\n\t\t[TerminalCompletionItemKind.PullRequest, terminalSymbolPullRequestIcon],\n\t\t[TerminalCompletionItemKind.PullRequestDone, terminalSymbolPullRequestDoneIcon],\n\t\t[TerminalCompletionItemKind.InlineSuggestion, terminalSymbolInlineSuggestionIcon],\n\t\t[TerminalCompletionItemKind.InlineSuggestionAlwaysOnTop, terminalSymbolInlineSuggestionIcon],\n\t]);\n\n\tprivate _kindToKindLabelMap = new Map<number, string>([\n\t\t[TerminalCompletionItemKind.File, localize('file', 'File')],\n\t\t[TerminalCompletionItemKind.Folder, localize('folder', 'Folder')],\n\t\t[TerminalCompletionItemKind.SymbolicLinkFile, localize('symbolicLinkFile', 'Symbolic Link File')],\n\t\t[TerminalCompletionItemKind.SymbolicLinkFolder, localize('symbolicLinkFolder', 'Symbolic Link Folder')],\n\t\t[TerminalCompletionItemKind.Method, localize('method', 'Method')],\n\t\t[TerminalCompletionItemKind.Alias, localize('alias', 'Alias')],\n\t\t[TerminalCompletionItemKind.Argument, localize('argument', 'Argument')],\n\t\t[TerminalCompletionItemKind.Option, localize('option', 'Option')],\n\t\t[TerminalCompletionItemKind.OptionValue, localize('optionValue', 'Option Value')],\n\t\t[TerminalCompletionItemKind.Flag, localize('flag', 'Flag')],\n\t\t[TerminalCompletionItemKind.Commit, localize('commit', 'Commit')],\n\t\t[TerminalCompletionItemKind.Branch, localize('branch', 'Branch')],\n\t\t[TerminalCompletionItemKind.Tag, localize('tag', 'Tag')],\n\t\t[TerminalCompletionItemKind.Stash, localize('stash', 'Stash')],\n\t\t[TerminalCompletionItemKind.Remote, localize('remote', 'Remote')],\n\t\t[TerminalCompletionItemKind.PullRequest, localize('pullRequest', 'Pull Request')],\n\t\t[TerminalCompletionItemKind.PullRequestDone, localize('pullRequestDone', 'Pull Request (Done)')],\n\t\t[TerminalCompletionItemKind.InlineSuggestion, localize('inlineSuggestion', 'Inline Suggestion')],\n\t\t[TerminalCompletionItemKind.InlineSuggestionAlwaysOnTop, localize('inlineSuggestionAlwaysOnTop', 'Inline Suggestion')],\n\t]);\n\n\tprivate readonly _inlineCompletion: ITerminalCompletion = {\n\t\tlabel: '',\n\t\t// Right arrow is used to accept the completion. This is a common keybinding in pwsh, zsh\n\t\t// and fish.\n\t\tinputData: '\\x1b[C',\n\t\treplacementRange: [0, 0],\n\t\tprovider: 'core:inlineSuggestion',\n\t\tdetail: 'Inline suggestion',\n\t\tkind: TerminalCompletionItemKind.InlineSuggestion,\n\t\tkindLabel: 'Inline suggestion',\n\t\ticon: this._kindToIconMap.get(TerminalCompletionItemKind.InlineSuggestion),\n\t};\n\tprivate readonly _inlineCompletionItem = new TerminalCompletionItem(this._inlineCompletion);\n\n\tprivate _shouldSyncWhenReady: boolean = false;\n\tprivate _suggestTelemetry: TerminalSuggestTelemetry | undefined;\n\n\tprivate _completionRequestTimestamp: number | undefined;\n\n\tconstructor(\n\t\tprivate readonly _sessionId: string,\n\t\tshellType: TerminalShellType | undefined,\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\tprivate readonly _terminalSuggestWidgetVisibleContextKey: IContextKey<boolean>,\n\t\t@ITerminalCompletionService private readonly _terminalCompletionService: ITerminalCompletionService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalConfigurationService private readonly _terminalConfigurationService: ITerminalConfigurationService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService,\n\t) {\n\t\tsuper();\n\n\t\t// Initialize shell type, including a promise that completions can await for that resolves:\n\t\t// - immediately if shell type\n\t\t// - after a short delay if shell type gets set\n\t\t// - after a long delay if it doesn't get set\n\t\tthis.shellType = shellType;\n\t\tif (this.shellType) {\n\t\t\tthis._shellTypeInit = Promise.resolve();\n\t\t} else {\n\t\t\tconst intervalTimer = this._register(new IntervalTimer());\n\t\t\tconst timeoutTimer = this._register(new TimeoutTimer());\n\t\t\tthis._shellTypeInit = new Promise<void>(r => {\n\t\t\t\tintervalTimer.cancelAndSet(() => {\n\t\t\t\t\tif (this.shellType) {\n\t\t\t\t\t\tr();\n\t\t\t\t\t}\n\t\t\t\t}, 50);\n\t\t\t\ttimeoutTimer.cancelAndSet(r, 5000);\n\t\t\t}).then(() => {\n\t\t\t\tthis._store.delete(intervalTimer);\n\t\t\t\tthis._store.delete(timeoutTimer);\n\t\t\t});\n\t\t}\n\n\t\tthis._register(Event.runAndSubscribe(this._capabilities.onDidChangeCapabilities, () => {\n\t\t\tconst commandDetection = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\t\tif (commandDetection) {\n\t\t\t\tif (this._promptInputModel !== commandDetection.promptInputModel) {\n\t\t\t\t\tthis._promptInputModel = commandDetection.promptInputModel;\n\t\t\t\t\tthis._suggestTelemetry = this._register(this._instantiationService.createInstance(TerminalSuggestTelemetry, commandDetection, this._promptInputModel));\n\t\t\t\t\tthis._promptInputModelSubscriptions.value = combinedDisposable(\n\t\t\t\t\t\tthis._promptInputModel.onDidChangeInput(e => this._sync(e)),\n\t\t\t\t\t\tthis._promptInputModel.onDidFinishInput(() => {\n\t\t\t\t\t\t\tthis.hideSuggestWidget(true);\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t\tif (this._shouldSyncWhenReady) {\n\t\t\t\t\t\tthis._sync(this._promptInputModel);\n\t\t\t\t\t\tthis._shouldSyncWhenReady = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._promptInputModel = undefined;\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._terminalConfigurationService.onConfigChanged(() => this._cachedFontInfo = undefined));\n\t\tthis._register(Event.runAndSubscribe(this._configurationService.onDidChangeConfiguration, e => {\n\t\t\tif (!e || e.affectsConfiguration(TerminalSuggestSettingId.InlineSuggestion)) {\n\t\t\t\tconst value = this._configurationService.getValue<ITerminalSuggestConfiguration>(terminalSuggestConfigSection).inlineSuggestion;\n\t\t\t\tthis._inlineCompletionItem.isInvalid = value === 'off';\n\t\t\t\tswitch (value) {\n\t\t\t\t\tcase 'alwaysOnTopExceptExactMatch': {\n\t\t\t\t\t\tthis._inlineCompletion.kind = TerminalCompletionItemKind.InlineSuggestion;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'alwaysOnTop':\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tthis._inlineCompletion.kind = TerminalCompletionItemKind.InlineSuggestionAlwaysOnTop;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._model?.forceRefilterAll();\n\t\t\t}\n\t\t}));\n\t}\n\n\tactivate(xterm: Terminal): void {\n\t\tthis._terminal = xterm;\n\t\tthis._register(xterm.onKey(async e => {\n\t\t\tthis._lastUserData = e.key;\n\t\t\tthis._lastUserDataTimestamp = Date.now();\n\t\t}));\n\t\tthis._register(xterm.onScroll(() => this.hideSuggestWidget(true)));\n\t}\n\n\tprivate async _handleCompletionProviders(terminal: Terminal | undefined, token: CancellationToken, explicitlyInvoked?: boolean): Promise<void> {\n\t\tthis._logService.trace('SuggestAddon#_handleCompletionProviders');\n\n\t\t// Nothing to handle if the terminal is not attached\n\t\tif (!terminal?.element || !this._enableWidget || !this._promptInputModel) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only show the suggest widget if the terminal is focused\n\t\tif (!dom.isAncestorOfActiveElement(terminal.element)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Wait for the shell type to initialize. This will wait a short period after launching to\n\t\t// allow the shell type to be set if possible. This prevents user requests sometimes getting\n\t\t// lost if requested shortly after the terminal is created. Completion providers can still\n\t\t// work with undefined shell types such as Pseudoterminal-based extension terminals.\n\t\tawait this._shellTypeInit;\n\n\t\tlet doNotRequestExtensionCompletions = false;\n\t\t// Ensure that a key has been pressed since the last accepted completion in order to prevent\n\t\t// completions being requested again right after accepting a completion\n\t\tif (this._promptInputModel.value !== '' && this._lastUserDataTimestamp < SuggestAddon.lastAcceptedCompletionTimestamp) {\n\t\t\tdoNotRequestExtensionCompletions = true;\n\t\t}\n\n\t\tthis._currentPromptInputState = {\n\t\t\tvalue: this._promptInputModel.value,\n\t\t\tprefix: this._promptInputModel.prefix,\n\t\t\tsuffix: this._promptInputModel.suffix,\n\t\t\tcursorIndex: this._promptInputModel.cursorIndex,\n\t\t\tghostTextIndex: this._promptInputModel.ghostTextIndex\n\t\t};\n\t\tthis._requestedCompletionsIndex = this._currentPromptInputState.cursorIndex;\n\n\t\t// Show loading indicator before making async completion request (only for explicit invocations)\n\t\tif (explicitlyInvoked) {\n\t\t\tconst suggestWidget = this._ensureSuggestWidget(terminal);\n\t\t\tconst cursorPosition = this._getCursorPosition(terminal);\n\t\t\tif (cursorPosition) {\n\t\t\t\tsuggestWidget.showTriggered(true, cursorPosition);\n\t\t\t}\n\t\t}\n\n\t\tconst quickSuggestionsConfig = this._configurationService.getValue<ITerminalSuggestConfiguration>(terminalSuggestConfigSection).quickSuggestions;\n\t\tconst allowFallbackCompletions = explicitlyInvoked || quickSuggestionsConfig.unknown === 'on';\n\t\tthis._logService.trace('SuggestAddon#_handleCompletionProviders provideCompletions');\n\t\tconst providedCompletions = await this._terminalCompletionService.provideCompletions(this._currentPromptInputState.value, this._currentPromptInputState.cursorIndex, allowFallbackCompletions, this.shellType, this._capabilities, token, false, doNotRequestExtensionCompletions, explicitlyInvoked);\n\t\tthis._logService.trace('SuggestAddon#_handleCompletionProviders provideCompletions done');\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tthis._onDidReceiveCompletions.fire();\n\n\t\tthis._cursorIndexDelta = this._promptInputModel.cursorIndex - this._requestedCompletionsIndex;\n\t\tthis._leadingLineContent = this._promptInputModel.prefix.substring(0, this._requestedCompletionsIndex + this._cursorIndexDelta);\n\n\t\tconst completions = providedCompletions?.flat() || [];\n\t\tif (!explicitlyInvoked && !completions.length) {\n\t\t\tthis.hideSuggestWidget(true);\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstChar = this._leadingLineContent.length === 0 ? '' : this._leadingLineContent[0];\n\t\t// This is a TabExpansion2 result\n\t\tif (this._leadingLineContent.includes(' ') || firstChar === '[') {\n\t\t\tthis._leadingLineContent = this._promptInputModel.prefix;\n\t\t}\n\n\t\tlet normalizedLeadingLineContent = this._leadingLineContent;\n\n\t\t// If there is a single directory in the completions:\n\t\t// - `\\` and `/` are normalized such that either can be used\n\t\t// - Using `\\` or `/` will request new completions. It's important that this only occurs\n\t\t//   when a directory is present, if not completions like git branches could be requested\n\t\t//   which leads to flickering\n\t\tthis._isFilteringDirectories = completions.some(e => e.kind === TerminalCompletionItemKind.Folder);\n\t\tif (this._isFilteringDirectories) {\n\t\t\tconst firstDir = completions.find(e => e.kind === TerminalCompletionItemKind.Folder);\n\t\t\tconst textLabel = isString(firstDir?.label) ? firstDir.label : firstDir?.label.label;\n\t\t\tthis._pathSeparator = textLabel?.match(/(?<sep>[\\\\\\/])/)?.groups?.sep ?? sep;\n\t\t\tnormalizedLeadingLineContent = normalizePathSeparator(normalizedLeadingLineContent, this._pathSeparator);\n\t\t}\n\n\t\t// Add any \"ghost text\" suggestion suggested by the shell. This aligns with behavior of the\n\t\t// editor and how it interacts with inline completions. This object is tracked and reused as\n\t\t// it may change on input.\n\t\tthis._refreshInlineCompletion(completions);\n\n\t\t// Add any missing icons based on the completion item kind\n\t\tfor (const completion of completions) {\n\t\t\tif (!completion.icon) {\n\t\t\t\tif (completion.kind !== undefined) {\n\t\t\t\t\tcompletion.icon = this._kindToIconMap.get(completion.kind);\n\t\t\t\t\tcompletion.kindLabel = this._kindToKindLabelMap.get(completion.kind);\n\t\t\t\t} else {\n\t\t\t\t\tcompletion.icon = terminalSymbolSymbolTextIcon;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst lineContext = new LineContext(normalizedLeadingLineContent, this._cursorIndexDelta);\n\t\tconst items = completions.filter(c => !!c.label).map(c => new TerminalCompletionItem(c));\n\t\tif (isInlineCompletionSupported(this.shellType)) {\n\t\t\titems.push(this._inlineCompletionItem);\n\t\t}\n\n\t\tthis._logService.trace('TerminalCompletionService#_collectCompletions create model');\n\t\tconst model = new TerminalCompletionModel(\n\t\t\titems,\n\t\t\tlineContext\n\t\t);\n\t\tthis._logService.trace('TerminalCompletionService#_collectCompletions create model done');\n\n\t\tif (token.isCancellationRequested) {\n\t\t\tthis._completionRequestTimestamp = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._showCompletions(model, explicitlyInvoked);\n\t}\n\n\tsetContainerWithOverflow(container: HTMLElement): void {\n\t\tthis._container = container;\n\t}\n\n\tsetScreen(screen: HTMLElement): void {\n\t\tthis._screen = screen;\n\t}\n\n\ttoggleExplainMode(): void {\n\t\tthis._suggestWidget?.toggleExplainMode();\n\t}\n\n\ttoggleSuggestionFocus(): void {\n\t\tthis._suggestWidget?.toggleDetailsFocus();\n\t}\n\n\ttoggleSuggestionDetails(): void {\n\t\tthis._suggestWidget?.toggleDetails();\n\t}\n\n\tresetWidgetSize(): void {\n\t\tthis._suggestWidget?.resetWidgetSize();\n\t}\n\n\tasync requestCompletions(explicitlyInvoked?: boolean): Promise<void> {\n\t\tthis._logService.trace('SuggestAddon#requestCompletions');\n\t\tif (!this._promptInputModel) {\n\t\t\tthis._shouldSyncWhenReady = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isPasting) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._cancellationTokenSource) {\n\t\t\tthis._cancellationTokenSource.cancel();\n\t\t\tthis._cancellationTokenSource.dispose();\n\t\t}\n\t\tthis._cancellationTokenSource = new CancellationTokenSource();\n\t\tconst token = this._cancellationTokenSource.token;\n\n\t\t// Track the time when completions are requested\n\t\tthis._completionRequestTimestamp = Date.now();\n\n\t\tawait this._handleCompletionProviders(this._terminal, token, explicitlyInvoked);\n\n\t\t// If completions are not shown (widget not visible), reset the tracker\n\t\tif (!this._terminalSuggestWidgetVisibleContextKey.get()) {\n\t\t\tthis._completionRequestTimestamp = undefined;\n\t\t}\n\t}\n\n\tprivate _addPropertiesToInlineCompletionItem(completions: ITerminalCompletion[]): void {\n\t\tconst inlineCompletionLabel = (isString(this._inlineCompletionItem.completion.label) ? this._inlineCompletionItem.completion.label : this._inlineCompletionItem.completion.label.label).trim();\n\t\tconst inlineCompletionMatchIndex = completions.findIndex(c => isString(c.label) ? c.label === inlineCompletionLabel : c.label.label === inlineCompletionLabel);\n\t\tif (inlineCompletionMatchIndex !== -1) {\n\t\t\t// Remove the existing inline completion item from the completions list\n\t\t\tconst richCompletionMatchingInline = completions.splice(inlineCompletionMatchIndex, 1)[0];\n\t\t\t// Apply its properties to the inline completion item\n\t\t\tthis._inlineCompletionItem.completion.label = richCompletionMatchingInline.label;\n\t\t\tthis._inlineCompletionItem.completion.detail = richCompletionMatchingInline.detail;\n\t\t\tthis._inlineCompletionItem.completion.documentation = richCompletionMatchingInline.documentation;\n\t\t} else if (this._inlineCompletionItem.completion) {\n\t\t\tthis._inlineCompletionItem.completion.detail = undefined;\n\t\t\tthis._inlineCompletionItem.completion.documentation = undefined;\n\t\t}\n\t}\n\n\tprivate _requestTriggerCharQuickSuggestCompletions(): boolean {\n\t\tif (!this._wasLastInputVerticalArrowKey() && !this._wasLastInputTabKey()) {\n\t\t\t// Only request on trigger character when it's a regular input, or on an arrow if the widget\n\t\t\t// is already visible\n\t\t\tif (!this._wasLastInputIncludedEscape() || this._terminalSuggestWidgetVisibleContextKey.get()) {\n\t\t\t\tthis.requestCompletions();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _checkProviderTriggerCharacters(char: string): boolean {\n\t\tfor (const provider of this._terminalCompletionService.providers) {\n\t\t\tif (!provider.triggerCharacters) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (const triggerChar of provider.triggerCharacters) {\n\t\t\t\tif (char === triggerChar) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _wasLastInputRightArrowKey(): boolean {\n\t\treturn !!this._lastUserData?.match(/^\\x1b[\\[O]?C$/);\n\t}\n\n\tprivate _wasLastInputVerticalArrowKey(): boolean {\n\t\treturn !!this._lastUserData?.match(/^\\x1b[\\[O]?[A-B]$/);\n\t}\n\n\t/**\n\t * Whether the last input included the escape character. Typically this will mean it was more\n\t * than just a simple character, such as arrow keys, home, end, etc.\n\t */\n\tprivate _wasLastInputIncludedEscape(): boolean {\n\t\treturn !!this._lastUserData?.includes('\\x1b');\n\t}\n\n\tprivate _wasLastInputArrowKey(): boolean {\n\t\t// Never request completions if the last key sequence was up or down as the user was likely\n\t\t// navigating history\n\t\treturn !!this._lastUserData?.match(/^\\x1b[\\[O]?[A-D]$/);\n\t}\n\n\tprivate _wasLastInputTabKey(): boolean {\n\t\treturn this._lastUserData === '\\t';\n\t}\n\n\tprivate _sync(promptInputState: IPromptInputModelState): void {\n\t\tconst config = this._configurationService.getValue<ITerminalSuggestConfiguration>(terminalSuggestConfigSection);\n\t\t{\n\t\t\tlet sent = false;\n\n\t\t\t// If completions were requested from the addon\n\t\t\tif (this._requestCompletionsOnNextSync) {\n\t\t\t\tthis._requestCompletionsOnNextSync = false;\n\t\t\t\tsent = this._requestTriggerCharQuickSuggestCompletions();\n\t\t\t}\n\n\t\t\t// If the cursor moved to the right\n\t\t\tif (!this._mostRecentPromptInputState || promptInputState.cursorIndex > this._mostRecentPromptInputState.cursorIndex) {\n\t\t\t\t// Quick suggestions - Trigger whenever a new non-whitespace character is used\n\t\t\t\tif (!this._terminalSuggestWidgetVisibleContextKey.get()) {\n\t\t\t\t\tconst commandLineHasSpace = promptInputState.prefix.trim().match(/\\s/);\n\t\t\t\t\tif (\n\t\t\t\t\t\t(!commandLineHasSpace && config.quickSuggestions.commands !== 'off') ||\n\t\t\t\t\t\t(commandLineHasSpace && config.quickSuggestions.arguments !== 'off')\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (promptInputState.prefix.match(/[^\\s]$/)) {\n\t\t\t\t\t\t\tsent = this._requestTriggerCharQuickSuggestCompletions();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Trigger characters - this happens even if the widget is showing\n\t\t\t\tif (config.suggestOnTriggerCharacters && !sent) {\n\t\t\t\t\tconst prefix = promptInputState.prefix;\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Only trigger on `-` if it's after a space. This is required to not clear\n\t\t\t\t\t\t// completions when typing the `-` in `git cherry-pick`\n\t\t\t\t\t\tprefix?.match(/\\s[\\-]$/) ||\n\t\t\t\t\t\t// Only trigger on `\\` and `/` if it's a directory. Not doing so causes problems\n\t\t\t\t\t\t// with git branches in particular\n\t\t\t\t\t\tthis._isFilteringDirectories && prefix?.match(/[\\\\\\/]$/)\n\t\t\t\t\t) {\n\t\t\t\t\t\tsent = this._requestTriggerCharQuickSuggestCompletions();\n\t\t\t\t\t}\n\t\t\t\t\tif (!sent) {\n\t\t\t\t\t\tfor (const provider of this._terminalCompletionService.providers) {\n\t\t\t\t\t\t\tif (!provider.triggerCharacters) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor (const char of provider.triggerCharacters) {\n\t\t\t\t\t\t\t\tif (prefix?.endsWith(char)) {\n\t\t\t\t\t\t\t\t\tsent = this._requestTriggerCharQuickSuggestCompletions();\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the cursor moved to the left\n\t\t\tif (this._mostRecentPromptInputState && promptInputState.cursorIndex < this._mostRecentPromptInputState.cursorIndex && promptInputState.cursorIndex > 0) {\n\t\t\t\t// We only want to refresh via trigger characters in this case if the widget is\n\t\t\t\t// already visible\n\t\t\t\tif (this._terminalSuggestWidgetVisibleContextKey.get()) {\n\t\t\t\t\t// Backspace or left past a trigger character\n\t\t\t\t\tif (config.suggestOnTriggerCharacters && !sent && this._mostRecentPromptInputState.cursorIndex > 0) {\n\t\t\t\t\t\tconst char = this._mostRecentPromptInputState.value[this._mostRecentPromptInputState.cursorIndex - 1];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t// Only trigger on `\\` and `/` if it's a directory. Not doing so causes problems\n\t\t\t\t\t\t\t// with git branches in particular\n\t\t\t\t\t\t\tthis._isFilteringDirectories && char.match(/[\\\\\\/]$/) ||\n\t\t\t\t\t\t\t// Check if the character is a trigger character from providers\n\t\t\t\t\t\t\tthis._checkProviderTriggerCharacters(char)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tsent = this._requestTriggerCharQuickSuggestCompletions();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Hide the widget if ghost text was just completed via right arrow\n\t\tif (\n\t\t\tthis._wasLastInputRightArrowKey() &&\n\t\t\tthis._mostRecentPromptInputState?.ghostTextIndex !== -1 &&\n\t\t\tpromptInputState.ghostTextIndex === -1 &&\n\t\t\tthis._mostRecentPromptInputState?.value === promptInputState.value\n\t\t) {\n\t\t\tthis.hideSuggestWidget(false);\n\t\t}\n\n\t\tthis._mostRecentPromptInputState = promptInputState;\n\t\tif (!this._promptInputModel || !this._terminal || !this._suggestWidget || this._leadingLineContent === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst previousPromptInputState = this._currentPromptInputState;\n\t\tthis._currentPromptInputState = promptInputState;\n\n\t\t// Hide the widget if the latest character was a space\n\t\tif (this._currentPromptInputState.cursorIndex > 1 && this._currentPromptInputState.value.at(this._currentPromptInputState.cursorIndex - 1) === ' ') {\n\t\t\tif (!this._wasLastInputArrowKey()) {\n\t\t\t\tthis.hideSuggestWidget(false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Hide the widget if the cursor moves to the left and invalidates the completions.\n\t\t// Originally this was to the left of the initial position that the completions were\n\t\t// requested, but since extensions are expected to allow the client-side to filter, they are\n\t\t// only invalidated when whitespace is encountered.\n\t\tif (this._currentPromptInputState && this._currentPromptInputState.cursorIndex < this._leadingLineContent.length) {\n\t\t\tif (this._currentPromptInputState.cursorIndex <= 0 || previousPromptInputState?.value[this._currentPromptInputState.cursorIndex]?.match(/[\\\\\\/\\s]/)) {\n\t\t\t\tthis.hideSuggestWidget(false);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._terminalSuggestWidgetVisibleContextKey.get()) {\n\t\t\tthis._cursorIndexDelta = this._currentPromptInputState.cursorIndex - (this._requestedCompletionsIndex);\n\t\t\tlet normalizedLeadingLineContent = this._currentPromptInputState.value.substring(0, this._requestedCompletionsIndex + this._cursorIndexDelta);\n\t\t\tif (this._isFilteringDirectories) {\n\t\t\t\tnormalizedLeadingLineContent = normalizePathSeparator(normalizedLeadingLineContent, this._pathSeparator);\n\t\t\t}\n\t\t\tconst lineContext = new LineContext(normalizedLeadingLineContent, this._cursorIndexDelta);\n\t\t\tthis._suggestWidget.setLineContext(lineContext);\n\t\t}\n\n\t\tthis._refreshInlineCompletion(this._model?.items.map(i => i.completion) || []);\n\n\t\t// Hide and clear model if there are no more items\n\t\tif (!this._suggestWidget.hasCompletions()) {\n\t\t\tthis.hideSuggestWidget(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst cursorPosition = this._getCursorPosition(this._terminal);\n\t\tif (!cursorPosition) {\n\t\t\treturn;\n\t\t}\n\t\tthis._suggestWidget.showSuggestions(0, false, true, cursorPosition);\n\t}\n\n\tprivate _refreshInlineCompletion(completions: ITerminalCompletion[]): void {\n\t\tif (!isInlineCompletionSupported(this.shellType)) {\n\t\t\t// If the shell type is not supported, the inline completion item is invalid\n\t\t\treturn;\n\t\t}\n\t\tconst oldIsInvalid = this._inlineCompletionItem.isInvalid;\n\t\tif (!this._currentPromptInputState || this._currentPromptInputState.ghostTextIndex === -1) {\n\t\t\tthis._inlineCompletionItem.isInvalid = true;\n\t\t} else {\n\t\t\tthis._inlineCompletionItem.isInvalid = false;\n\t\t\t// Update properties\n\t\t\tconst spaceIndex = this._currentPromptInputState.value.lastIndexOf(' ', this._currentPromptInputState.ghostTextIndex - 1);\n\t\t\tconst replacementIndex = spaceIndex === -1 ? 0 : spaceIndex + 1;\n\t\t\tconst suggestion = this._currentPromptInputState.value.substring(replacementIndex);\n\t\t\tthis._inlineCompletion.label = suggestion;\n\t\t\t// Update replacementRange (inclusive start, exclusive end) for replacement\n\t\t\tconst end = this._currentPromptInputState.cursorIndex - this._cursorIndexDelta;\n\t\t\tthis._inlineCompletion.replacementRange = [replacementIndex, end];\n\t\t\t// Reset the completion item as the object reference must remain the same but its\n\t\t\t// contents will differ across syncs. This is done so we don't need to reassign the\n\t\t\t// model and the slowdown/flickering that could potentially cause.\n\t\t\tthis._addPropertiesToInlineCompletionItem(completions);\n\n\t\t\tconst x = new TerminalCompletionItem(this._inlineCompletion);\n\t\t\tthis._inlineCompletionItem.idx = x.idx;\n\t\t\tthis._inlineCompletionItem.score = x.score;\n\t\t\tthis._inlineCompletionItem.labelLow = x.labelLow;\n\t\t\tthis._inlineCompletionItem.textLabel = x.textLabel;\n\t\t\tthis._inlineCompletionItem.fileExtLow = x.fileExtLow;\n\t\t\tthis._inlineCompletionItem.labelLowExcludeFileExt = x.labelLowExcludeFileExt;\n\t\t\tthis._inlineCompletionItem.labelLowNormalizedPath = x.labelLowNormalizedPath;\n\t\t\tthis._inlineCompletionItem.punctuationPenalty = x.punctuationPenalty;\n\t\t\tthis._inlineCompletionItem.word = x.word;\n\t\t\tthis._model?.forceRefilterAll();\n\t\t}\n\n\t\t// Force a filter all in order to re-evaluate the inline completion\n\t\tif (this._inlineCompletionItem.isInvalid !== oldIsInvalid) {\n\t\t\tthis._model?.forceRefilterAll();\n\t\t}\n\t}\n\n\tprivate _getTerminalDimensions(): { width: number; height: number } {\n\t\tinterface XtermWithCore extends Terminal {\n\t\t\t_core: IXtermCore;\n\t\t}\n\t\tconst cssCellDims = (this._terminal as XtermWithCore)._core._renderService.dimensions.css.cell;\n\t\treturn {\n\t\t\twidth: cssCellDims.width,\n\t\t\theight: cssCellDims.height,\n\t\t};\n\t}\n\n\tprivate _getCursorPosition(terminal: Terminal): { top: number; left: number; height: number } | undefined {\n\t\tconst dimensions = this._getTerminalDimensions();\n\t\tif (!dimensions.width || !dimensions.height) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst xtermBox = this._screen!.getBoundingClientRect();\n\t\treturn {\n\t\t\tleft: xtermBox.left + terminal.buffer.active.cursorX * dimensions.width,\n\t\t\ttop: xtermBox.top + terminal.buffer.active.cursorY * dimensions.height,\n\t\t\theight: dimensions.height\n\t\t};\n\t}\n\n\tprivate _getFontInfo(): ISimpleSuggestWidgetFontInfo {\n\t\tif (this._cachedFontInfo) {\n\t\t\treturn this._cachedFontInfo;\n\t\t}\n\n\t\tinterface XtermWithCore extends Terminal {\n\t\t\t_core: IXtermCore;\n\t\t}\n\t\tconst core = (this._terminal as XtermWithCore)._core;\n\t\tconst font = this._terminalConfigurationService.getFont(dom.getActiveWindow(), core);\n\t\tlet lineHeight: number = font.lineHeight;\n\t\tconst fontSize: number = font.fontSize;\n\t\tconst fontFamily: string = font.fontFamily;\n\t\tconst letterSpacing: number = font.letterSpacing;\n\t\tconst fontWeight: string = this._configurationService.getValue('editor.fontWeight');\n\n\t\t// Unlike editor suggestions, line height in terminal is always multiplied to the font size.\n\t\t// Make sure that we still enforce a minimum line height to avoid content from being clipped.\n\t\t// See https://github.com/microsoft/vscode/issues/255851\n\t\tlineHeight = lineHeight * fontSize;\n\n\t\t// Enforce integer, minimum constraints\n\t\tlineHeight = Math.round(lineHeight);\n\t\tconst minTerminalLineHeight = GOLDEN_LINE_HEIGHT_RATIO * fontSize;\n\t\tif (lineHeight < minTerminalLineHeight) {\n\t\t\tlineHeight = minTerminalLineHeight;\n\t\t}\n\n\t\tconst fontInfo = {\n\t\t\tfontSize,\n\t\t\tlineHeight,\n\t\t\tfontWeight: fontWeight.toString(),\n\t\t\tletterSpacing,\n\t\t\tfontFamily\n\t\t};\n\n\t\tthis._cachedFontInfo = fontInfo;\n\n\t\treturn fontInfo;\n\t}\n\n\tprivate _getAdvancedExplainModeDetails(): string | undefined {\n\t\treturn `promptInputModel: ${this._promptInputModel?.getCombinedString()}`;\n\t}\n\n\tprivate _showCompletions(model: TerminalCompletionModel, explicitlyInvoked?: boolean): void {\n\t\tthis._logService.trace('SuggestAddon#_showCompletions');\n\t\tif (!this._terminal?.element) {\n\t\t\treturn;\n\t\t}\n\t\tconst suggestWidget = this._ensureSuggestWidget(this._terminal);\n\n\t\tthis._logService.trace('SuggestAddon#_showCompletions setCompletionModel');\n\t\tsuggestWidget.setCompletionModel(model);\n\n\t\tthis._register(suggestWidget.onDidFocus(() => this._terminal?.focus()));\n\t\tif (!this._promptInputModel || !explicitlyInvoked && model.items.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tthis._model = model;\n\t\tconst cursorPosition = this._getCursorPosition(this._terminal);\n\t\tif (!cursorPosition) {\n\t\t\treturn;\n\t\t}\n\t\t// Track the time when completions are shown for the first time\n\t\tif (this._completionRequestTimestamp !== undefined) {\n\t\t\tconst completionLatency = Date.now() - this._completionRequestTimestamp;\n\t\t\tif (this._suggestTelemetry && this._discoverability) {\n\t\t\t\tconst firstShown = this._discoverability.getFirstShown(this.shellType);\n\t\t\t\tthis._discoverability.updateShown();\n\t\t\t\tthis._suggestTelemetry.logCompletionLatency(this._sessionId, completionLatency, firstShown);\n\t\t\t}\n\t\t\tthis._completionRequestTimestamp = undefined;\n\t\t}\n\t\tthis._logService.trace('SuggestAddon#_showCompletions suggestWidget.showSuggestions');\n\t\tsuggestWidget.showSuggestions(0, false, !explicitlyInvoked, cursorPosition);\n\t}\n\n\n\tprivate _ensureSuggestWidget(terminal: Terminal): SimpleSuggestWidget<TerminalCompletionModel, TerminalCompletionItem> {\n\t\tif (!this._suggestWidget) {\n\t\t\tthis._suggestWidget = this._register(this._instantiationService.createInstance(\n\t\t\t\tSimpleSuggestWidget,\n\t\t\t\tthis._container!,\n\t\t\t\tthis._instantiationService.createInstance(PersistedWidgetSize),\n\t\t\t\t{\n\t\t\t\t\tstatusBarMenuId: MenuId.MenubarTerminalSuggestStatusMenu,\n\t\t\t\t\tshowStatusBarSettingId: TerminalSuggestSettingId.ShowStatusBar,\n\t\t\t\t\tselectionModeSettingId: TerminalSuggestSettingId.SelectionMode,\n\t\t\t\t\tpreventDetailsPlacements: [SimpleSuggestDetailsPlacement.West],\n\t\t\t\t},\n\t\t\t\tthis._getFontInfo.bind(this),\n\t\t\t\tthis._onDidFontConfigurationChange.event.bind(this),\n\t\t\t\tthis._getAdvancedExplainModeDetails.bind(this)\n\t\t\t)) as unknown as SimpleSuggestWidget<TerminalCompletionModel, TerminalCompletionItem>;\n\t\t\tthis._register(this._suggestWidget.onDidSelect(async e => this.acceptSelectedSuggestion(e)));\n\t\t\tthis._register(this._suggestWidget.onDidHide(() => this._terminalSuggestWidgetVisibleContextKey.reset()));\n\t\t\tthis._register(this._suggestWidget.onDidShow(() => this._terminalSuggestWidgetVisibleContextKey.set(true)));\n\t\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration(TerminalSettingId.FontFamily) || e.affectsConfiguration(TerminalSettingId.FontSize) || e.affectsConfiguration(TerminalSettingId.LineHeight) || e.affectsConfiguration(TerminalSettingId.FontFamily) || e.affectsConfiguration('editor.fontSize') || e.affectsConfiguration('editor.fontFamily')) {\n\t\t\t\t\tthis._onDidFontConfigurationChange.fire();\n\t\t\t\t}\n\t\t\t}\n\t\t\t));\n\n\t\t\tthis._register(this._suggestWidget.onDidFocus(async e => {\n\t\t\t\tif (this._ignoreFocusEvents) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst focusedItem = e.item;\n\t\t\t\tconst focusedIndex = e.index;\n\n\t\t\t\tif (focusedItem === this._focusedItem) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Cancel any previous resolution\n\t\t\t\tthis._currentSuggestionDetails?.cancel();\n\t\t\t\tthis._currentSuggestionDetails = undefined;\n\t\t\t\tthis._focusedItem = focusedItem;\n\n\t\t\t\t// Check if the item needs resolution and hasn't been resolved yet\n\t\t\t\tif (focusedItem && (!focusedItem.completion.documentation || !focusedItem.completion.detail)) {\n\n\t\t\t\t\tthis._currentSuggestionDetails = createCancelablePromise(async token => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait focusedItem.resolve(token);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t// Silently fail - the item is still usable without details\n\t\t\t\t\t\t\tthis._logService.warn(`Failed to resolve suggestion details for item ${focusedItem} at index ${focusedIndex}`, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._currentSuggestionDetails.then(() => {\n\t\t\t\t\t\t// Check if this is still the focused item and it's still in the list\n\t\t\t\t\t\tif (focusedItem !== this._focusedItem || !this._suggestWidget?.list || focusedIndex >= this._suggestWidget.list.length) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Re-render the specific item to show resolved details (like editor does)\n\t\t\t\t\t\tthis._ignoreFocusEvents = true;\n\t\t\t\t\t\t// Use splice to replace the item and trigger re-render\n\t\t\t\t\t\tthis._suggestWidget.list.splice(focusedIndex, 1, [focusedItem]);\n\t\t\t\t\t\tthis._suggestWidget.list.setFocus([focusedIndex]);\n\t\t\t\t\t\tthis._ignoreFocusEvents = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}));\n\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst element = this._terminal?.element?.querySelector('.xterm-helper-textarea');\n\t\t\tif (element) {\n\t\t\t\tthis._register(dom.addDisposableListener(dom.getActiveDocument(), 'click', (event) => {\n\t\t\t\t\tconst target = event.target as HTMLElement;\n\t\t\t\t\tif (this._terminal?.element?.contains(target)) {\n\t\t\t\t\t\tthis._suggestWidget?.hide();\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tthis._register(this._suggestWidget.onDidShow(() => this._updateDiscoverabilityState()));\n\t\t\tthis._register(this._suggestWidget.onDidBlurDetails((e) => {\n\t\t\t\tconst elt = e.relatedTarget as HTMLElement;\n\t\t\t\tif (this._terminal?.element?.contains(elt)) {\n\t\t\t\t\t// Do nothing, just the terminal getting focused\n\t\t\t\t\t// If there was a mouse click, the suggest widget will be\n\t\t\t\t\t// hidden above\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._suggestWidget?.hide();\n\t\t\t}));\n\t\t\tthis._terminalSuggestWidgetVisibleContextKey.set(false);\n\t\t}\n\t\treturn this._suggestWidget;\n\t}\n\n\tprivate _updateDiscoverabilityState(): void {\n\t\tif (!this._discoverability) {\n\t\t\tthis._discoverability = this._register(this._instantiationService.createInstance(TerminalSuggestShownTracker, this.shellType));\n\t\t}\n\n\t\tif (!this._suggestWidget || this._discoverability?.done) {\n\t\t\treturn;\n\t\t}\n\t\tthis._discoverability?.update(this._suggestWidget.element.domNode);\n\t}\n\n\tresetDiscoverability(): void {\n\t\tthis._discoverability?.resetState();\n\t}\n\n\tselectPreviousSuggestion(): void {\n\t\tthis._suggestWidget?.selectPrevious();\n\t}\n\n\tselectPreviousPageSuggestion(): void {\n\t\tthis._suggestWidget?.selectPreviousPage();\n\t}\n\n\tselectNextSuggestion(): void {\n\t\tthis._suggestWidget?.selectNext();\n\t}\n\n\tselectNextPageSuggestion(): void {\n\t\tthis._suggestWidget?.selectNextPage();\n\t}\n\n\tacceptSelectedSuggestion(suggestion?: Pick<ISimpleSelectedSuggestion<TerminalCompletionItem>, 'item' | 'model'>, respectRunOnEnter?: boolean): void {\n\t\tif (!suggestion) {\n\t\t\tsuggestion = this._suggestWidget?.getFocusedItem();\n\t\t}\n\n\t\tconst initialPromptInputState = this._mostRecentPromptInputState;\n\t\tif (!suggestion?.item || !initialPromptInputState || this._leadingLineContent === undefined || !this._model) {\n\t\t\tthis._suggestTelemetry?.acceptCompletion(this._sessionId, undefined, this._mostRecentPromptInputState?.value);\n\t\t\treturn;\n\t\t}\n\t\tSuggestAddon.lastAcceptedCompletionTimestamp = Date.now();\n\t\tthis._suggestWidget?.hide();\n\n\t\tconst currentPromptInputState = this._currentPromptInputState ?? initialPromptInputState;\n\n\t\t// The replacement text is any text after the replacement index for the completions, this\n\t\t// includes any text that was there before the completions were requested and any text added\n\t\t// since to refine the completion.\n\t\tconst startIndex = suggestion.item.completion.replacementRange?.[0] ?? currentPromptInputState.cursorIndex;\n\t\tconst replacementText = currentPromptInputState.value.substring(startIndex, currentPromptInputState.cursorIndex);\n\n\t\t// Right side of replacement text in the same word\n\t\tlet rightSideReplacementText = '';\n\t\tif (\n\t\t\t// The line didn't end with ghost text\n\t\t\t(currentPromptInputState.ghostTextIndex === -1 || currentPromptInputState.ghostTextIndex > currentPromptInputState.cursorIndex) &&\n\t\t\t// There is more than one charatcer\n\t\t\tcurrentPromptInputState.value.length > currentPromptInputState.cursorIndex + 1 &&\n\t\t\t// THe next character is not a space\n\t\t\tcurrentPromptInputState.value.at(currentPromptInputState.cursorIndex) !== ' '\n\t\t) {\n\t\t\tconst spaceIndex = currentPromptInputState.value.substring(currentPromptInputState.cursorIndex, currentPromptInputState.ghostTextIndex === -1 ? undefined : currentPromptInputState.ghostTextIndex).indexOf(' ');\n\t\t\trightSideReplacementText = currentPromptInputState.value.substring(currentPromptInputState.cursorIndex, spaceIndex === -1 ? undefined : currentPromptInputState.cursorIndex + spaceIndex);\n\t\t}\n\n\t\tconst completion = suggestion.item.completion;\n\t\tlet resultSequence = completion.inputData;\n\n\t\t// Use for amend the label if inputData is not defined\n\t\tif (resultSequence === undefined) {\n\t\t\tlet completionText = isString(completion.label) ? completion.label : completion.label.label;\n\t\t\tif ((completion.kind === TerminalCompletionItemKind.Folder || completion.isFileOverride) && completionText.includes(' ')) {\n\t\t\t\t// Escape spaces in files or folders so they're valid paths\n\t\t\t\tcompletionText = completionText.replaceAll(' ', '\\\\ ');\n\t\t\t}\n\t\t\tlet runOnEnter = false;\n\t\t\tif (respectRunOnEnter) {\n\t\t\t\tconst runOnEnterConfig = this._configurationService.getValue<ITerminalSuggestConfiguration>(terminalSuggestConfigSection).runOnEnter;\n\t\t\t\tswitch (runOnEnterConfig) {\n\t\t\t\t\tcase 'always': {\n\t\t\t\t\t\trunOnEnter = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'exactMatch': {\n\t\t\t\t\t\trunOnEnter = replacementText.toLowerCase() === completionText.toLowerCase();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'exactMatchIgnoreExtension': {\n\t\t\t\t\t\trunOnEnter = replacementText.toLowerCase() === completionText.toLowerCase();\n\t\t\t\t\t\tif (completion.isFileOverride) {\n\t\t\t\t\t\t\trunOnEnter ||= replacementText.toLowerCase() === completionText.toLowerCase().replace(/\\.[^\\.]+$/, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst commonPrefixLen = commonPrefixLength(replacementText, completionText);\n\t\t\tconst commonPrefix = replacementText.substring(replacementText.length - 1 - commonPrefixLen, replacementText.length - 1);\n\t\t\tconst completionSuffix = completionText.substring(commonPrefixLen);\n\t\t\tif (currentPromptInputState.suffix.length > 0 && currentPromptInputState.prefix.endsWith(commonPrefix) && currentPromptInputState.suffix.startsWith(completionSuffix)) {\n\t\t\t\t// Move right to the end of the completion\n\t\t\t\tresultSequence = '\\x1bOC'.repeat(completionText.length - commonPrefixLen);\n\t\t\t} else {\n\t\t\t\tresultSequence = [\n\t\t\t\t\t// Backspace (left) to remove all additional input\n\t\t\t\t\t'\\x7F'.repeat(replacementText.length - commonPrefixLen),\n\t\t\t\t\t// Delete (right) to remove any additional text in the same word\n\t\t\t\t\t'\\x1b[3~'.repeat(rightSideReplacementText.length),\n\t\t\t\t\t// Write the completion\n\t\t\t\t\tcompletionSuffix,\n\t\t\t\t\t// Run on enter if needed\n\t\t\t\t\trunOnEnter ? '\\r' : ''\n\t\t\t\t].join('');\n\t\t\t}\n\t\t}\n\n\t\t// For folders, allow the next completion request to get completions for that folder\n\t\tif (completion.kind === TerminalCompletionItemKind.Folder) {\n\t\t\tSuggestAddon.lastAcceptedCompletionTimestamp = 0;\n\t\t}\n\n\t\t// Add trailing space if enabled and not a folder or symbolic link folder\n\t\tconst config = this._configurationService.getValue<ITerminalSuggestConfiguration>(terminalSuggestConfigSection);\n\t\tif (config.insertTrailingSpace && completion.kind !== TerminalCompletionItemKind.Folder && completion.kind !== TerminalCompletionItemKind.SymbolicLinkFolder) {\n\t\t\tresultSequence += ' ';\n\t\t\tthis._lastUserDataTimestamp = Date.now();\n\t\t\tthis._requestCompletionsOnNextSync = true;\n\t\t}\n\n\t\t// Send the completion\n\t\tthis._onAcceptedCompletion.fire(resultSequence);\n\t\tthis._suggestTelemetry?.acceptCompletion(this._sessionId, completion, this._mostRecentPromptInputState?.value);\n\t\tthis.hideSuggestWidget(true);\n\t}\n\n\thideSuggestWidget(cancelAnyRequest: boolean): void {\n\t\tthis._discoverability?.resetTimer();\n\t\tif (cancelAnyRequest) {\n\t\t\tthis._cancellationTokenSource?.cancel();\n\t\t\tthis._cancellationTokenSource = undefined;\n\t\t\t// Also cancel any pending resolution requests\n\t\t\tthis._currentSuggestionDetails?.cancel();\n\t\t\tthis._currentSuggestionDetails = undefined;\n\t\t}\n\t\tthis._currentPromptInputState = undefined;\n\t\tthis._leadingLineContent = undefined;\n\t\tthis._focusedItem = undefined;\n\t\tthis._suggestWidget?.hide();\n\t}\n}\n\nclass PersistedWidgetSize {\n\n\tprivate readonly _key = TerminalStorageKeys.TerminalSuggestSize;\n\n\tconstructor(\n\t\t@IStorageService private readonly _storageService: IStorageService\n\t) {\n\t}\n\n\trestore(): dom.Dimension | undefined {\n\t\tconst raw = this._storageService.get(this._key, StorageScope.PROFILE) ?? '';\n\t\ttry {\n\t\t\tconst obj = JSON.parse(raw);\n\t\t\tif (dom.Dimension.is(obj)) {\n\t\t\t\treturn dom.Dimension.lift(obj);\n\t\t\t}\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tstore(size: dom.Dimension) {\n\t\tthis._storageService.store(this._key, JSON.stringify(size), StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n\n\treset(): void {\n\t\tthis._storageService.remove(this._key, StorageScope.PROFILE);\n\t}\n}\n\nexport function normalizePathSeparator(path: string, sep: string): string {\n\tif (sep === '/') {\n\t\treturn path.replaceAll('\\\\', '/');\n\t}\n\treturn path.replaceAll('/', '\\\\');\n}\n\n"]}