{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/suggest/test/browser/terminalCompletionService.test.ts","vs/workbench/contrib/terminalContrib/suggest/test/browser/terminalCompletionService.test.ts"],"names":[],"mappings":"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","file":"terminalCompletionService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { IFileService, IFileStatWithMetadata, IResolveMetadataFileOptions } from '../../../../../../platform/files/common/files.js';\nimport { TerminalCompletionService, TerminalCompletionResourceOptions, type ITerminalCompletionProvider } from '../../browser/terminalCompletionService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport assert, { fail } from 'assert';\nimport { isWindows, type IProcessEnvironment } from '../../../../../../base/common/platform.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { createFileStat } from '../../../../../test/common/workbenchTestServices.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { ShellEnvDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/shellEnvDetectionCapability.js';\nimport { TerminalCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { ITerminalCompletion, TerminalCompletionItemKind } from '../../browser/terminalCompletionItem.js';\nimport { count } from '../../../../../../base/common/strings.js';\nimport { ITerminalLogService, WindowsShellType } from '../../../../../../platform/terminal/common/terminal.js';\nimport { gitBashToWindowsPath, windowsToGitBashPath } from '../../browser/terminalGitBashHelpers.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { TerminalSuggestSettingId } from '../../common/terminalSuggestConfiguration.js';\nimport { TestPathService, workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\n\nconst pathSeparator = isWindows ? '\\\\' : '/';\n\ninterface IAssertionTerminalCompletion {\n\tlabel: string;\n\tdetail?: string;\n\tkind?: TerminalCompletionItemKind;\n}\n\ninterface IAssertionCommandLineConfig {\n\treplacementRange: [number, number];\n}\n\n/**\n * Assert the set of completions exist exactly, including their order.\n */\nfunction assertCompletions(actual: ITerminalCompletion[] | undefined, expected: IAssertionTerminalCompletion[], expectedConfig: IAssertionCommandLineConfig, pathSep?: string) {\n\tconst sep = pathSep ?? pathSeparator;\n\tassert.deepStrictEqual(\n\t\tactual?.map(e => ({\n\t\t\tlabel: e.label,\n\t\t\tdetail: e.detail ?? '',\n\t\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\t\treplacementRange: e.replacementRange,\n\t\t})), expected.map(e => ({\n\t\t\tlabel: e.label.replaceAll('/', sep),\n\t\t\tdetail: e.detail ? e.detail.replaceAll('/', sep) : '',\n\t\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\t\treplacementRange: expectedConfig.replacementRange,\n\t\t}))\n\t);\n}\n\n/**\n * Assert a set of completions exist within the actual set.\n */\nfunction assertPartialCompletionsExist(actual: ITerminalCompletion[] | undefined, expectedPartial: IAssertionTerminalCompletion[], expectedConfig: IAssertionCommandLineConfig) {\n\tif (!actual) {\n\t\tfail();\n\t}\n\tconst expectedMapped = expectedPartial.map(e => ({\n\t\tlabel: e.label.replaceAll('/', pathSeparator),\n\t\tdetail: e.detail ? e.detail.replaceAll('/', pathSeparator) : '',\n\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\treplacementRange: expectedConfig.replacementRange,\n\t}));\n\tfor (const expectedItem of expectedMapped) {\n\t\tassert.deepStrictEqual(actual.map(e => ({\n\t\t\tlabel: e.label,\n\t\t\tdetail: e.detail ?? '',\n\t\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\t\treplacementRange: e.replacementRange,\n\t\t})).find(e => e.detail === expectedItem.detail), expectedItem);\n\t}\n}\n\nconst testEnv: IProcessEnvironment = {\n\tHOME: '/home/user',\n\tUSERPROFILE: '/home/user'\n};\n\nlet homeDir = isWindows ? testEnv['USERPROFILE'] : testEnv['HOME'];\nif (!homeDir!.endsWith('/')) {\n\thomeDir += '/';\n}\nconst standardTildeItem = Object.freeze({ label: '~', detail: homeDir });\n\nsuite('TerminalCompletionService', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet instantiationService: TestInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\tlet capabilities: TerminalCapabilityStore;\n\tlet validResources: URI[];\n\tlet childResources: { resource: URI; isFile?: boolean; isDirectory?: boolean; isSymbolicLink?: boolean }[];\n\tlet terminalCompletionService: TerminalCompletionService;\n\tconst provider = 'testProvider';\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tpathService: () => new TestPathService(URI.file(homeDir ?? '/')),\n\t\t}, store);\n\t\tconfigurationService = new TestConfigurationService();\n\t\tinstantiationService.stub(ITerminalLogService, new NullLogService());\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\tinstantiationService.stub(IFileService, {\n\t\t\tasync stat(resource) {\n\t\t\t\tif (!validResources.map(e => e.path).includes(resource.path)) {\n\t\t\t\t\tthrow new Error('Doesn\\'t exist');\n\t\t\t\t}\n\t\t\t\treturn createFileStat(resource);\n\t\t\t},\n\t\t\tasync resolve(resource: URI, options: IResolveMetadataFileOptions): Promise<IFileStatWithMetadata> {\n\t\t\t\tconst children = childResources.filter(child => {\n\t\t\t\t\tconst childFsPath = child.resource.path.replace(/\\/$/, '');\n\t\t\t\t\tconst parentFsPath = resource.path.replace(/\\/$/, '');\n\t\t\t\t\treturn (\n\t\t\t\t\t\tchildFsPath.startsWith(parentFsPath) &&\n\t\t\t\t\t\tcount(childFsPath, '/') === count(parentFsPath, '/') + 1\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\treturn createFileStat(resource, undefined, undefined, undefined, undefined, children);\n\t\t\t},\n\t\t\tasync realpath(resource: URI): Promise<URI | undefined> {\n\t\t\t\tif (resource.path.includes('symlink-file')) {\n\t\t\t\t\treturn resource.with({ path: '/target/actual-file.txt' });\n\t\t\t\t} else if (resource.path.includes('symlink-folder')) {\n\t\t\t\t\treturn resource.with({ path: '/target/actual-folder' });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\t\tterminalCompletionService = store.add(instantiationService.createInstance(TerminalCompletionService));\n\t\tterminalCompletionService.processEnv = testEnv;\n\t\tvalidResources = [];\n\t\tchildResources = [];\n\t\tcapabilities = store.add(new TerminalCapabilityStore());\n\t});\n\n\tsuite('resolveResources should return undefined', () => {\n\t\ttest('if neither showFiles nor showFolders are true', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\t\t\tassert(!result);\n\t\t});\n\t});\n\n\tsuite('resolveResources should return folder completions', () => {\n\t\tsetup(() => {\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true, isFile: false },\n\t\t\t\t{ resource: URI.parse('file:///test/file1.txt'), isDirectory: false, isFile: true },\n\t\t\t];\n\t\t});\n\n\t\ttest('| should return root-level completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '', 1, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [1, 1] });\n\t\t});\n\n\t\ttest('./| should return folder completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 3, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [1, 3] });\n\t\t});\n\n\t\ttest('cd ./| should return folder completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ./', 5, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [3, 5] });\n\t\t});\n\t\ttest('cd ./f| should return folder completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ./f', 6, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [3, 6] });\n\t\t});\n\t});\n\n\tsuite('resolveResources should handle file and folder completion requests correctly', () => {\n\t\tsetup(() => {\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/.hiddenFile'), isFile: true },\n\t\t\t\t{ resource: URI.parse('file:///test/.hiddenFolder/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/file1.txt'), isFile: true },\n\t\t\t];\n\t\t});\n\n\t\ttest('./| should handle hidden files and folders', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 2, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './.hiddenFile', detail: '/test/.hiddenFile', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './.hiddenFolder/', detail: '/test/.hiddenFolder/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './file1.txt', detail: '/test/file1.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [0, 2] });\n\t\t});\n\n\t\ttest('./h| should handle hidden files and folders', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './h', 3, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './.hiddenFile', detail: '/test/.hiddenFile', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './.hiddenFolder/', detail: '/test/.hiddenFolder/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './file1.txt', detail: '/test/file1.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [0, 3] });\n\t\t});\n\t});\n\n\tsuite('~ -> $HOME', () => {\n\t\tlet resourceOptions: TerminalCompletionResourceOptions;\n\t\tlet shellEnvDetection: ShellEnvDetectionCapability;\n\n\t\tsetup(() => {\n\t\t\tshellEnvDetection = store.add(new ShellEnvDetectionCapability());\n\t\t\tshellEnvDetection.setEnvironment({\n\t\t\t\tHOME: '/home',\n\t\t\t\tUSERPROFILE: '/home'\n\t\t\t}, true);\n\t\t\tcapabilities.add(TerminalCapability.ShellEnvDetection, shellEnvDetection);\n\n\t\t\tresourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test/folder1'),// Updated to reflect home directory\n\t\t\t\tshowFiles: true,\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [\n\t\t\t\tURI.parse('file:///test'),\n\t\t\t\tURI.parse('file:///test/folder1'),\n\t\t\t\tURI.parse('file:///home'),\n\t\t\t\tURI.parse('file:///home/vscode'),\n\t\t\t\tURI.parse('file:///home/vscode/foo'),\n\t\t\t\tURI.parse('file:///home/vscode/bar.txt'),\n\t\t\t];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///home/vscode'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///home/vscode/foo'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///home/vscode/bar.txt'), isFile: true },\n\t\t\t];\n\t\t});\n\n\t\ttest('~| should return completion for ~', async () => {\n\t\t\tassertPartialCompletionsExist(await terminalCompletionService.resolveResources(resourceOptions, '~', 1, provider, capabilities), [\n\t\t\t\t{ label: '~', detail: '/home/' },\n\t\t\t], { replacementRange: [0, 1] });\n\t\t});\n\n\t\ttest('~/| should return folder completions relative to $HOME', async () => {\n\t\t\tassertCompletions(await terminalCompletionService.resolveResources(resourceOptions, '~/', 2, provider, capabilities), [\n\t\t\t\t{ label: '~/', detail: '/home/' },\n\t\t\t\t{ label: '~/vscode/', detail: '/home/vscode/' },\n\t\t\t], { replacementRange: [0, 2] });\n\t\t});\n\n\t\ttest('~/vscode/| should return folder completions relative to $HOME/vscode', async () => {\n\t\t\tassertCompletions(await terminalCompletionService.resolveResources(resourceOptions, '~/vscode/', 9, provider, capabilities), [\n\t\t\t\t{ label: '~/vscode/', detail: '/home/vscode/' },\n\t\t\t\t{ label: '~/vscode/foo/', detail: '/home/vscode/foo/' },\n\t\t\t\t{ label: '~/vscode/bar.txt', detail: '/home/vscode/bar.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t], { replacementRange: [0, 9] });\n\t\t});\n\t});\n\n\tsuite('resolveResources edge cases and advanced scenarios', () => {\n\t\tsetup(() => {\n\t\t\tvalidResources = [];\n\t\t\tchildResources = [];\n\t\t});\n\n\t\tif (isWindows) {\n\t\t\ttest('C:/Foo/| absolute paths on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///C:'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///C:/Foo')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///C:/Foo/Bar'), isDirectory: true, isFile: false },\n\t\t\t\t\t{ resource: URI.parse('file:///C:/Foo/Baz.txt'), isDirectory: false, isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'C:/Foo/', 7, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: 'C:/Foo/', detail: 'C:/Foo/' },\n\t\t\t\t\t{ label: 'C:/Foo/Bar/', detail: 'C:/Foo/Bar/' },\n\t\t\t\t], { replacementRange: [0, 7] });\n\t\t\t});\n\t\t\ttest('c:/foo/| case insensitivity on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///c:'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///c:/foo')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///c:/foo/Bar'), isDirectory: true, isFile: false }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'c:/foo/', 7, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t// Note that the detail is normalizes drive letters to capital case intentionally\n\t\t\t\t\t{ label: 'c:/foo/', detail: 'C:/foo/' },\n\t\t\t\t\t{ label: 'c:/foo/Bar/', detail: 'C:/foo/Bar/' },\n\t\t\t\t], { replacementRange: [0, 7] });\n\t\t\t});\n\t\t} else {\n\t\t\ttest('/foo/| absolute paths NOT on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///foo')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///foo/Bar'), isDirectory: true, isFile: false },\n\t\t\t\t\t{ resource: URI.parse('file:///foo/Baz.txt'), isDirectory: false, isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '/foo/', 5, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: '/foo/', detail: '/foo/' },\n\t\t\t\t\t{ label: '/foo/Bar/', detail: '/foo/Bar/' },\n\t\t\t\t], { replacementRange: [0, 5] });\n\t\t\t});\n\t\t}\n\n\t\tif (isWindows) {\n\t\t\ttest('.\\\\folder | Case insensitivity should resolve correctly on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///C:/test'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator: '\\\\'\n\t\t\t\t};\n\n\t\t\t\tvalidResources = [URI.parse('file:///C:/test')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///C:/test/FolderA/'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.parse('file:///C:/test/anotherFolder/'), isDirectory: true }\n\t\t\t\t];\n\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '.\\\\folder', 8, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: '.\\\\', detail: 'C:\\\\test\\\\' },\n\t\t\t\t\t{ label: '.\\\\FolderA\\\\', detail: 'C:\\\\test\\\\FolderA\\\\' },\n\t\t\t\t\t{ label: '.\\\\anotherFolder\\\\', detail: 'C:\\\\test\\\\anotherFolder\\\\' },\n\t\t\t\t\t{ label: '.\\\\..\\\\', detail: 'C:\\\\' },\n\t\t\t\t], { replacementRange: [0, 8] });\n\t\t\t});\n\t\t} else {\n\t\t\ttest('./folder | Case sensitivity should resolve correctly on Mac/Unix', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///test/FolderA/'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/foldera/'), isDirectory: true }\n\t\t\t\t];\n\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './folder', 8, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t\t{ label: './FolderA/', detail: '/test/FolderA/' },\n\t\t\t\t\t{ label: './foldera/', detail: '/test/foldera/' },\n\t\t\t\t\t{ label: './../', detail: '/' }\n\t\t\t\t], { replacementRange: [0, 8] });\n\t\t\t});\n\n\t\t}\n\t\ttest('| Empty input should resolve to current directory', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '', 0, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [0, 0] });\n\t\t});\n\n\t\ttest('should ignore environment variable setting prefixes', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'FOO=./', 2, provider, capabilities);\n\n\t\t\t// Must not include FOO= prefix in completions\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [0, 2] });\n\t\t});\n\n\t\ttest('./| should handle large directories with many results gracefully', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = Array.from({ length: 1000 }, (_, i) => ({\n\t\t\t\tresource: URI.parse(`file:///test/folder${i}/`),\n\t\t\t\tisDirectory: true\n\t\t\t}));\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 2, provider, capabilities);\n\n\t\t\tassert(result);\n\t\t\t// includes the 1000 folders + ./ and ./../\n\t\t\tassert.strictEqual(result?.length, 1002);\n\t\t\tassert.strictEqual(result[0].label, `.${pathSeparator}`);\n\t\t\tassert.strictEqual(result.at(-1)?.label, `.${pathSeparator}..${pathSeparator}`);\n\t\t});\n\n\t\ttest('./folder| should include current folder with trailing / is missing', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './folder1', 10, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: './../', detail: '/' }\n\t\t\t], { replacementRange: [1, 10] });\n\t\t});\n\t\ttest('test/| should normalize current and parent folders', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [\n\t\t\t\tURI.parse('file:///test'),\n\t\t\t\tURI.parse('file:///test/folder1'),\n\t\t\t\tURI.parse('file:///test/folder2')\n\t\t\t];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'test/', 5, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './test/', detail: '/test/' },\n\t\t\t\t{ label: './test/folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './test/folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: './test/../', detail: '/' }\n\t\t\t], { replacementRange: [0, 5] });\n\t\t});\n\t});\n\n\tsuite('cdpath', () => {\n\t\tlet shellEnvDetection: ShellEnvDetectionCapability;\n\n\t\tsetup(() => {\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///cdpath_value/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///cdpath_value/file1.txt'), isFile: true },\n\t\t\t];\n\n\t\t\tshellEnvDetection = store.add(new ShellEnvDetectionCapability());\n\t\t\tshellEnvDetection.setEnvironment({ CDPATH: '/cdpath_value' }, true);\n\t\t\tcapabilities.add(TerminalCapability.ShellEnvDetection, shellEnvDetection);\n\t\t});\n\n\t\ttest('cd | should show paths from $CDPATH (relative)', async () => {\n\t\t\tconfigurationService.setUserConfiguration('terminal.integrated.suggest.cdPath', 'relative');\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\n\t\t\tassertPartialCompletionsExist(result, [\n\t\t\t\t{ label: 'folder1', detail: 'CDPATH /cdpath_value/folder1/' },\n\t\t\t], { replacementRange: [3, 3] });\n\t\t});\n\n\t\ttest('cd | should show paths from $CDPATH (absolute)', async () => {\n\t\t\tconfigurationService.setUserConfiguration('terminal.integrated.suggest.cdPath', 'absolute');\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\n\t\t\tassertPartialCompletionsExist(result, [\n\t\t\t\t{ label: '/cdpath_value/folder1/', detail: 'CDPATH' },\n\t\t\t], { replacementRange: [3, 3] });\n\t\t});\n\n\t\ttest('cd | should support pulling from multiple paths in $CDPATH', async () => {\n\t\t\tconfigurationService.setUserConfiguration('terminal.integrated.suggest.cdPath', 'relative');\n\t\t\tconst pathPrefix = isWindows ? 'c:\\\\' : '/';\n\t\t\tconst delimeter = isWindows ? ';' : ':';\n\t\t\tconst separator = isWindows ? '\\\\' : '/';\n\t\t\tshellEnvDetection.setEnvironment({ CDPATH: `${pathPrefix}cdpath1_value${delimeter}${pathPrefix}cdpath2_value${separator}inner_dir` }, true);\n\n\t\t\tconst uriPathPrefix = isWindows ? 'file:///c:/' : 'file:///';\n\t\t\tvalidResources = [\n\t\t\t\tURI.parse(`${uriPathPrefix}test`),\n\t\t\t\tURI.parse(`${uriPathPrefix}cdpath1_value`),\n\t\t\t\tURI.parse(`${uriPathPrefix}cdpath2_value`),\n\t\t\t\tURI.parse(`${uriPathPrefix}cdpath2_value/inner_dir`)\n\t\t\t];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath1_value/folder1/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath1_value/folder2/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath1_value/file1.txt`), isFile: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath2_value/inner_dir/folder1/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath2_value/inner_dir/folder2/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath2_value/inner_dir/file1.txt`), isFile: true },\n\t\t\t];\n\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse(`${uriPathPrefix}test`),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\n\t\t\tconst finalPrefix = isWindows ? 'C:\\\\' : '/';\n\t\t\tassertPartialCompletionsExist(result, [\n\t\t\t\t{ label: 'folder1', detail: `CDPATH ${finalPrefix}cdpath1_value/folder1/` },\n\t\t\t\t{ label: 'folder2', detail: `CDPATH ${finalPrefix}cdpath1_value/folder2/` },\n\t\t\t\t{ label: 'folder1', detail: `CDPATH ${finalPrefix}cdpath2_value/inner_dir/folder1/` },\n\t\t\t\t{ label: 'folder2', detail: `CDPATH ${finalPrefix}cdpath2_value/inner_dir/folder2/` },\n\t\t\t], { replacementRange: [3, 3] });\n\t\t});\n\t});\n\n\tif (isWindows) {\n\t\tsuite('gitbash', () => {\n\t\t\ttest('should convert Git Bash absolute path to Windows absolute path', () => {\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/'), 'C:\\\\');\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/c/'), 'C:\\\\');\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/c/Users/foo'), 'C:\\\\Users\\\\foo');\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/d/bar'), 'D:\\\\bar');\n\t\t\t});\n\n\t\t\ttest('should convert Windows absolute path to Git Bash absolute path', () => {\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('C:\\\\'), '/c/');\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('C:\\\\Users\\\\foo'), '/c/Users/foo');\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('D:\\\\bar'), '/d/bar');\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('E:\\\\some\\\\path'), '/e/some/path');\n\t\t\t});\n\n\t\t\ttest('resolveResources with c:/ style absolute path for Git Bash', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\bar'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\baz.txt')\n\t\t\t\t];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\bar'), isDirectory: true, isFile: false },\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\baz.txt'), isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'C:/Users/foo/', 13, provider, capabilities, WindowsShellType.GitBash);\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: 'C:/Users/foo/', detail: 'C:\\\\Users\\\\foo\\\\' },\n\t\t\t\t\t{ label: 'C:/Users/foo/bar/', detail: 'C:\\\\Users\\\\foo\\\\bar\\\\' },\n\t\t\t\t\t{ label: 'C:/Users/foo/baz.txt', detail: 'C:\\\\Users\\\\foo\\\\baz.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t], { replacementRange: [0, 13] }, '/');\n\t\t\t});\n\t\t\ttest('resolveResources with cwd as Windows path (relative)', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\bar'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\baz.txt')\n\t\t\t\t];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\bar'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\baz.txt'), isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 2, provider, capabilities, WindowsShellType.GitBash);\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: './', detail: 'C:\\\\Users\\\\foo\\\\' },\n\t\t\t\t\t{ label: './bar/', detail: 'C:\\\\Users\\\\foo\\\\bar\\\\' },\n\t\t\t\t\t{ label: './baz.txt', detail: 'C:\\\\Users\\\\foo\\\\baz.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t\t{ label: './../', detail: 'C:\\\\Users\\\\' }\n\t\t\t\t], { replacementRange: [0, 2] }, '/');\n\t\t\t});\n\n\t\t\ttest('resolveResources with cwd as Windows path (absolute)', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\bar'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\baz.txt')\n\t\t\t\t];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\bar'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\baz.txt'), isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '/c/Users/foo/', 13, provider, capabilities, WindowsShellType.GitBash);\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: '/c/Users/foo/', detail: 'C:\\\\Users\\\\foo\\\\' },\n\t\t\t\t\t{ label: '/c/Users/foo/bar/', detail: 'C:\\\\Users\\\\foo\\\\bar\\\\' },\n\t\t\t\t\t{ label: '/c/Users/foo/baz.txt', detail: 'C:\\\\Users\\\\foo\\\\baz.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t], { replacementRange: [0, 13] }, '/');\n\t\t\t});\n\t\t});\n\t}\n\tif (!isWindows) {\n\t\tsuite('symlink support', () => {\n\t\t\ttest('should include symlink target information in completions', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\t\tpathSeparator,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tshowDirectories: true\n\t\t\t\t};\n\n\t\t\t\tvalidResources = [URI.parse('file:///test')];\n\n\t\t\t\t// Create mock children including a symbolic link\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///test/regular-file.txt'), isFile: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/symlink-file'), isFile: true, isSymbolicLink: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/symlink-folder'), isDirectory: true, isSymbolicLink: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/regular-folder'), isDirectory: true },\n\t\t\t\t];\n\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'ls ', 3, provider, capabilities);\n\n\t\t\t\t// Find the symlink completion\n\t\t\t\tconst symlinkFileCompletion = result?.find(c => c.label === './symlink-file');\n\t\t\t\tconst symlinkFolderCompletion = result?.find(c => c.label === './symlink-folder/');\n\t\t\t\tassert.strictEqual(symlinkFileCompletion?.detail, '/test/symlink-file -> /target/actual-file.txt', 'Symlink file detail should match target');\n\t\t\t\tassert.strictEqual(symlinkFolderCompletion?.detail, '/test/symlink-folder -> /target/actual-folder', 'Symlink folder detail should match target');\n\t\t\t});\n\t\t});\n\t}\n\tsuite('completion label escaping', () => {\n\t\ttest('| should escape special characters in file/folder names for POSIX shells', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/[folder1]/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder 2/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/!special$chars&/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/!special$chars2&'), isFile: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '', 0, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './[folder1]/', detail: '/test/\\[folder1]\\/' },\n\t\t\t\t{ label: './folder\\ 2/', detail: '/test/folder\\ 2/' },\n\t\t\t\t{ label: './\\!special\\$chars\\&/', detail: '/test/\\!special\\$chars\\&/' },\n\t\t\t\t{ label: './\\!special\\$chars2\\&', detail: '/test/\\!special\\$chars2\\&', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [0, 0] });\n\t\t});\n\n\t});\n\n\tsuite('Provider Configuration', () => {\n\t\t// Test class that extends TerminalCompletionService to access protected methods\n\t\tclass TestTerminalCompletionService extends TerminalCompletionService {\n\t\t\tpublic getEnabledProviders(providers: ITerminalCompletionProvider[]): ITerminalCompletionProvider[] {\n\t\t\t\treturn super._getEnabledProviders(providers);\n\t\t\t}\n\t\t}\n\n\t\tlet testTerminalCompletionService: TestTerminalCompletionService;\n\n\t\tsetup(() => {\n\t\t\ttestTerminalCompletionService = store.add(instantiationService.createInstance(TestTerminalCompletionService));\n\t\t});\n\n\t\t// Mock provider for testing\n\t\tfunction createMockProvider(id: string): ITerminalCompletionProvider {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tprovideCompletions: async () => [{\n\t\t\t\t\tlabel: `completion-from-${id}`,\n\t\t\t\t\tkind: TerminalCompletionItemKind.Method,\n\t\t\t\t\treplacementRange: [0, 0],\n\t\t\t\t\tprovider: id\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\n\t\ttest('should enable providers by default when no configuration exists', () => {\n\t\t\tconst defaultProvider = createMockProvider('terminal-suggest');\n\t\t\tconst newProvider = createMockProvider('new-extension-provider');\n\t\t\tconst providers = [defaultProvider, newProvider];\n\n\t\t\t// Set empty configuration (no provider keys)\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// Both providers should be enabled since they're not explicitly disabled\n\t\t\tassert.strictEqual(result.length, 2, 'Should enable both providers by default');\n\t\t\tassert.ok(result.includes(defaultProvider), 'Should include default provider');\n\t\t\tassert.ok(result.includes(newProvider), 'Should include new provider');\n\t\t});\n\n\t\ttest('should disable providers when explicitly set to false', () => {\n\t\t\tconst provider1 = createMockProvider('provider1');\n\t\t\tconst provider2 = createMockProvider('provider2');\n\t\t\tconst providers = [provider1, provider2];\n\n\t\t\t// Disable provider1, leave provider2 unconfigured\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {\n\t\t\t\t'provider1': false\n\t\t\t});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// Only provider2 should be enabled\n\t\t\tassert.strictEqual(result.length, 1, 'Should enable only one provider');\n\t\t\tassert.ok(result.includes(provider2), 'Should include unconfigured provider');\n\t\t\tassert.ok(!result.includes(provider1), 'Should not include disabled provider');\n\t\t});\n\n\t\ttest('should enable providers when explicitly set to true', () => {\n\t\t\tconst provider1 = createMockProvider('provider1');\n\t\t\tconst provider2 = createMockProvider('provider2');\n\t\t\tconst providers = [provider1, provider2];\n\n\t\t\t// Explicitly enable provider1, leave provider2 unconfigured\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {\n\t\t\t\t'provider1': true\n\t\t\t});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// Both providers should be enabled\n\t\t\tassert.strictEqual(result.length, 2, 'Should enable both providers');\n\t\t\tassert.ok(result.includes(provider1), 'Should include explicitly enabled provider');\n\t\t\tassert.ok(result.includes(provider2), 'Should include unconfigured provider');\n\t\t});\n\n\t\ttest('should handle mixed configuration correctly', () => {\n\t\t\tconst provider1 = createMockProvider('provider1');\n\t\t\tconst provider2 = createMockProvider('provider2');\n\t\t\tconst provider3 = createMockProvider('provider3');\n\t\t\tconst providers = [provider1, provider2, provider3];\n\n\t\t\t// Mixed configuration: enable provider1, disable provider2, leave provider3 unconfigured\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {\n\t\t\t\t'provider1': true,\n\t\t\t\t'provider2': false\n\t\t\t});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// provider1 and provider3 should be enabled, provider2 should be disabled\n\t\t\tassert.strictEqual(result.length, 2, 'Should enable two providers');\n\t\t\tassert.ok(result.includes(provider1), 'Should include explicitly enabled provider');\n\t\t\tassert.ok(result.includes(provider3), 'Should include unconfigured provider');\n\t\t\tassert.ok(!result.includes(provider2), 'Should not include disabled provider');\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { IFileService, IFileStatWithMetadata, IResolveMetadataFileOptions } from '../../../../../../platform/files/common/files.js';\nimport { TerminalCompletionService, TerminalCompletionResourceOptions, type ITerminalCompletionProvider } from '../../browser/terminalCompletionService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport assert, { fail } from 'assert';\nimport { isWindows, type IProcessEnvironment } from '../../../../../../base/common/platform.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { createFileStat } from '../../../../../test/common/workbenchTestServices.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { ShellEnvDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/shellEnvDetectionCapability.js';\nimport { TerminalCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { ITerminalCompletion, TerminalCompletionItemKind } from '../../browser/terminalCompletionItem.js';\nimport { count } from '../../../../../../base/common/strings.js';\nimport { ITerminalLogService, WindowsShellType } from '../../../../../../platform/terminal/common/terminal.js';\nimport { gitBashToWindowsPath, windowsToGitBashPath } from '../../browser/terminalGitBashHelpers.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { TerminalSuggestSettingId } from '../../common/terminalSuggestConfiguration.js';\nimport { TestPathService, workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\n\nconst pathSeparator = isWindows ? '\\\\' : '/';\n\ninterface IAssertionTerminalCompletion {\n\tlabel: string;\n\tdetail?: string;\n\tkind?: TerminalCompletionItemKind;\n}\n\ninterface IAssertionCommandLineConfig {\n\treplacementRange: [number, number];\n}\n\n/**\n * Assert the set of completions exist exactly, including their order.\n */\nfunction assertCompletions(actual: ITerminalCompletion[] | undefined, expected: IAssertionTerminalCompletion[], expectedConfig: IAssertionCommandLineConfig, pathSep?: string) {\n\tconst sep = pathSep ?? pathSeparator;\n\tassert.deepStrictEqual(\n\t\tactual?.map(e => ({\n\t\t\tlabel: e.label,\n\t\t\tdetail: e.detail ?? '',\n\t\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\t\treplacementRange: e.replacementRange,\n\t\t})), expected.map(e => ({\n\t\t\tlabel: e.label.replaceAll('/', sep),\n\t\t\tdetail: e.detail ? e.detail.replaceAll('/', sep) : '',\n\t\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\t\treplacementRange: expectedConfig.replacementRange,\n\t\t}))\n\t);\n}\n\n/**\n * Assert a set of completions exist within the actual set.\n */\nfunction assertPartialCompletionsExist(actual: ITerminalCompletion[] | undefined, expectedPartial: IAssertionTerminalCompletion[], expectedConfig: IAssertionCommandLineConfig) {\n\tif (!actual) {\n\t\tfail();\n\t}\n\tconst expectedMapped = expectedPartial.map(e => ({\n\t\tlabel: e.label.replaceAll('/', pathSeparator),\n\t\tdetail: e.detail ? e.detail.replaceAll('/', pathSeparator) : '',\n\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\treplacementRange: expectedConfig.replacementRange,\n\t}));\n\tfor (const expectedItem of expectedMapped) {\n\t\tassert.deepStrictEqual(actual.map(e => ({\n\t\t\tlabel: e.label,\n\t\t\tdetail: e.detail ?? '',\n\t\t\tkind: e.kind ?? TerminalCompletionItemKind.Folder,\n\t\t\treplacementRange: e.replacementRange,\n\t\t})).find(e => e.detail === expectedItem.detail), expectedItem);\n\t}\n}\n\nconst testEnv: IProcessEnvironment = {\n\tHOME: '/home/user',\n\tUSERPROFILE: '/home/user'\n};\n\nlet homeDir = isWindows ? testEnv['USERPROFILE'] : testEnv['HOME'];\nif (!homeDir!.endsWith('/')) {\n\thomeDir += '/';\n}\nconst standardTildeItem = Object.freeze({ label: '~', detail: homeDir });\n\nsuite('TerminalCompletionService', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet instantiationService: TestInstantiationService;\n\tlet configurationService: TestConfigurationService;\n\tlet capabilities: TerminalCapabilityStore;\n\tlet validResources: URI[];\n\tlet childResources: { resource: URI; isFile?: boolean; isDirectory?: boolean; isSymbolicLink?: boolean }[];\n\tlet terminalCompletionService: TerminalCompletionService;\n\tconst provider = 'testProvider';\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tpathService: () => new TestPathService(URI.file(homeDir ?? '/')),\n\t\t}, store);\n\t\tconfigurationService = new TestConfigurationService();\n\t\tinstantiationService.stub(ITerminalLogService, new NullLogService());\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\t\tinstantiationService.stub(IFileService, {\n\t\t\tasync stat(resource) {\n\t\t\t\tif (!validResources.map(e => e.path).includes(resource.path)) {\n\t\t\t\t\tthrow new Error('Doesn\\'t exist');\n\t\t\t\t}\n\t\t\t\treturn createFileStat(resource);\n\t\t\t},\n\t\t\tasync resolve(resource: URI, options: IResolveMetadataFileOptions): Promise<IFileStatWithMetadata> {\n\t\t\t\tconst children = childResources.filter(child => {\n\t\t\t\t\tconst childFsPath = child.resource.path.replace(/\\/$/, '');\n\t\t\t\t\tconst parentFsPath = resource.path.replace(/\\/$/, '');\n\t\t\t\t\treturn (\n\t\t\t\t\t\tchildFsPath.startsWith(parentFsPath) &&\n\t\t\t\t\t\tcount(childFsPath, '/') === count(parentFsPath, '/') + 1\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t\treturn createFileStat(resource, undefined, undefined, undefined, undefined, children);\n\t\t\t},\n\t\t\tasync realpath(resource: URI): Promise<URI | undefined> {\n\t\t\t\tif (resource.path.includes('symlink-file')) {\n\t\t\t\t\treturn resource.with({ path: '/target/actual-file.txt' });\n\t\t\t\t} else if (resource.path.includes('symlink-folder')) {\n\t\t\t\t\treturn resource.with({ path: '/target/actual-folder' });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\t\tterminalCompletionService = store.add(instantiationService.createInstance(TerminalCompletionService));\n\t\tterminalCompletionService.processEnv = testEnv;\n\t\tvalidResources = [];\n\t\tchildResources = [];\n\t\tcapabilities = store.add(new TerminalCapabilityStore());\n\t});\n\n\tsuite('resolveResources should return undefined', () => {\n\t\ttest('if neither showFiles nor showFolders are true', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\t\t\tassert(!result);\n\t\t});\n\t});\n\n\tsuite('resolveResources should return folder completions', () => {\n\t\tsetup(() => {\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true, isFile: false },\n\t\t\t\t{ resource: URI.parse('file:///test/file1.txt'), isDirectory: false, isFile: true },\n\t\t\t];\n\t\t});\n\n\t\ttest('| should return root-level completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '', 1, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [1, 1] });\n\t\t});\n\n\t\ttest('./| should return folder completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 3, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [1, 3] });\n\t\t});\n\n\t\ttest('cd ./| should return folder completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ./', 5, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [3, 5] });\n\t\t});\n\t\ttest('cd ./f| should return folder completions', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ./f', 6, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [3, 6] });\n\t\t});\n\t});\n\n\tsuite('resolveResources should handle file and folder completion requests correctly', () => {\n\t\tsetup(() => {\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/.hiddenFile'), isFile: true },\n\t\t\t\t{ resource: URI.parse('file:///test/.hiddenFolder/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/file1.txt'), isFile: true },\n\t\t\t];\n\t\t});\n\n\t\ttest('./| should handle hidden files and folders', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 2, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './.hiddenFile', detail: '/test/.hiddenFile', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './.hiddenFolder/', detail: '/test/.hiddenFolder/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './file1.txt', detail: '/test/file1.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [0, 2] });\n\t\t});\n\n\t\ttest('./h| should handle hidden files and folders', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './h', 3, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './.hiddenFile', detail: '/test/.hiddenFile', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './.hiddenFolder/', detail: '/test/.hiddenFolder/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './file1.txt', detail: '/test/file1.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: './../', detail: '/' },\n\t\t\t], { replacementRange: [0, 3] });\n\t\t});\n\t});\n\n\tsuite('~ -> $HOME', () => {\n\t\tlet resourceOptions: TerminalCompletionResourceOptions;\n\t\tlet shellEnvDetection: ShellEnvDetectionCapability;\n\n\t\tsetup(() => {\n\t\t\tshellEnvDetection = store.add(new ShellEnvDetectionCapability());\n\t\t\tshellEnvDetection.setEnvironment({\n\t\t\t\tHOME: '/home',\n\t\t\t\tUSERPROFILE: '/home'\n\t\t\t}, true);\n\t\t\tcapabilities.add(TerminalCapability.ShellEnvDetection, shellEnvDetection);\n\n\t\t\tresourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test/folder1'),// Updated to reflect home directory\n\t\t\t\tshowFiles: true,\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [\n\t\t\t\tURI.parse('file:///test'),\n\t\t\t\tURI.parse('file:///test/folder1'),\n\t\t\t\tURI.parse('file:///home'),\n\t\t\t\tURI.parse('file:///home/vscode'),\n\t\t\t\tURI.parse('file:///home/vscode/foo'),\n\t\t\t\tURI.parse('file:///home/vscode/bar.txt'),\n\t\t\t];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///home/vscode'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///home/vscode/foo'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///home/vscode/bar.txt'), isFile: true },\n\t\t\t];\n\t\t});\n\n\t\ttest('~| should return completion for ~', async () => {\n\t\t\tassertPartialCompletionsExist(await terminalCompletionService.resolveResources(resourceOptions, '~', 1, provider, capabilities), [\n\t\t\t\t{ label: '~', detail: '/home/' },\n\t\t\t], { replacementRange: [0, 1] });\n\t\t});\n\n\t\ttest('~/| should return folder completions relative to $HOME', async () => {\n\t\t\tassertCompletions(await terminalCompletionService.resolveResources(resourceOptions, '~/', 2, provider, capabilities), [\n\t\t\t\t{ label: '~/', detail: '/home/' },\n\t\t\t\t{ label: '~/vscode/', detail: '/home/vscode/' },\n\t\t\t], { replacementRange: [0, 2] });\n\t\t});\n\n\t\ttest('~/vscode/| should return folder completions relative to $HOME/vscode', async () => {\n\t\t\tassertCompletions(await terminalCompletionService.resolveResources(resourceOptions, '~/vscode/', 9, provider, capabilities), [\n\t\t\t\t{ label: '~/vscode/', detail: '/home/vscode/' },\n\t\t\t\t{ label: '~/vscode/foo/', detail: '/home/vscode/foo/' },\n\t\t\t\t{ label: '~/vscode/bar.txt', detail: '/home/vscode/bar.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t], { replacementRange: [0, 9] });\n\t\t});\n\t});\n\n\tsuite('resolveResources edge cases and advanced scenarios', () => {\n\t\tsetup(() => {\n\t\t\tvalidResources = [];\n\t\t\tchildResources = [];\n\t\t});\n\n\t\tif (isWindows) {\n\t\t\ttest('C:/Foo/| absolute paths on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///C:'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///C:/Foo')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///C:/Foo/Bar'), isDirectory: true, isFile: false },\n\t\t\t\t\t{ resource: URI.parse('file:///C:/Foo/Baz.txt'), isDirectory: false, isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'C:/Foo/', 7, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: 'C:/Foo/', detail: 'C:/Foo/' },\n\t\t\t\t\t{ label: 'C:/Foo/Bar/', detail: 'C:/Foo/Bar/' },\n\t\t\t\t], { replacementRange: [0, 7] });\n\t\t\t});\n\t\t\ttest('c:/foo/| case insensitivity on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///c:'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///c:/foo')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///c:/foo/Bar'), isDirectory: true, isFile: false }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'c:/foo/', 7, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t// Note that the detail is normalizes drive letters to capital case intentionally\n\t\t\t\t\t{ label: 'c:/foo/', detail: 'C:/foo/' },\n\t\t\t\t\t{ label: 'c:/foo/Bar/', detail: 'C:/foo/Bar/' },\n\t\t\t\t], { replacementRange: [0, 7] });\n\t\t\t});\n\t\t} else {\n\t\t\ttest('/foo/| absolute paths NOT on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///foo')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///foo/Bar'), isDirectory: true, isFile: false },\n\t\t\t\t\t{ resource: URI.parse('file:///foo/Baz.txt'), isDirectory: false, isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '/foo/', 5, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: '/foo/', detail: '/foo/' },\n\t\t\t\t\t{ label: '/foo/Bar/', detail: '/foo/Bar/' },\n\t\t\t\t], { replacementRange: [0, 5] });\n\t\t\t});\n\t\t}\n\n\t\tif (isWindows) {\n\t\t\ttest('.\\\\folder | Case insensitivity should resolve correctly on Windows', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///C:/test'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator: '\\\\'\n\t\t\t\t};\n\n\t\t\t\tvalidResources = [URI.parse('file:///C:/test')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///C:/test/FolderA/'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.parse('file:///C:/test/anotherFolder/'), isDirectory: true }\n\t\t\t\t];\n\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '.\\\\folder', 8, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: '.\\\\', detail: 'C:\\\\test\\\\' },\n\t\t\t\t\t{ label: '.\\\\FolderA\\\\', detail: 'C:\\\\test\\\\FolderA\\\\' },\n\t\t\t\t\t{ label: '.\\\\anotherFolder\\\\', detail: 'C:\\\\test\\\\anotherFolder\\\\' },\n\t\t\t\t\t{ label: '.\\\\..\\\\', detail: 'C:\\\\' },\n\t\t\t\t], { replacementRange: [0, 8] });\n\t\t\t});\n\t\t} else {\n\t\t\ttest('./folder | Case sensitivity should resolve correctly on Mac/Unix', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///test/FolderA/'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/foldera/'), isDirectory: true }\n\t\t\t\t];\n\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './folder', 8, provider, capabilities);\n\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t\t{ label: './FolderA/', detail: '/test/FolderA/' },\n\t\t\t\t\t{ label: './foldera/', detail: '/test/foldera/' },\n\t\t\t\t\t{ label: './../', detail: '/' }\n\t\t\t\t], { replacementRange: [0, 8] });\n\t\t\t});\n\n\t\t}\n\t\ttest('| Empty input should resolve to current directory', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '', 0, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [0, 0] });\n\t\t});\n\n\t\ttest('should ignore environment variable setting prefixes', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'FOO=./', 2, provider, capabilities);\n\n\t\t\t// Must not include FOO= prefix in completions\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [0, 2] });\n\t\t});\n\n\t\ttest('./| should handle large directories with many results gracefully', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = Array.from({ length: 1000 }, (_, i) => ({\n\t\t\t\tresource: URI.parse(`file:///test/folder${i}/`),\n\t\t\t\tisDirectory: true\n\t\t\t}));\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 2, provider, capabilities);\n\n\t\t\tassert(result);\n\t\t\t// includes the 1000 folders + ./ and ./../\n\t\t\tassert.strictEqual(result?.length, 1002);\n\t\t\tassert.strictEqual(result[0].label, `.${pathSeparator}`);\n\t\t\tassert.strictEqual(result.at(-1)?.label, `.${pathSeparator}..${pathSeparator}`);\n\t\t});\n\n\t\ttest('./folder| should include current folder with trailing / is missing', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './folder1', 10, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './', detail: '/test/' },\n\t\t\t\t{ label: './folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: './../', detail: '/' }\n\t\t\t], { replacementRange: [1, 10] });\n\t\t});\n\t\ttest('test/| should normalize current and parent folders', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [\n\t\t\t\tURI.parse('file:///test'),\n\t\t\t\tURI.parse('file:///test/folder1'),\n\t\t\t\tURI.parse('file:///test/folder2')\n\t\t\t];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder2/'), isDirectory: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'test/', 5, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: './test/', detail: '/test/' },\n\t\t\t\t{ label: './test/folder1/', detail: '/test/folder1/' },\n\t\t\t\t{ label: './test/folder2/', detail: '/test/folder2/' },\n\t\t\t\t{ label: './test/../', detail: '/' }\n\t\t\t], { replacementRange: [0, 5] });\n\t\t});\n\t});\n\n\tsuite('cdpath', () => {\n\t\tlet shellEnvDetection: ShellEnvDetectionCapability;\n\n\t\tsetup(() => {\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///cdpath_value/folder1/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///cdpath_value/file1.txt'), isFile: true },\n\t\t\t];\n\n\t\t\tshellEnvDetection = store.add(new ShellEnvDetectionCapability());\n\t\t\tshellEnvDetection.setEnvironment({ CDPATH: '/cdpath_value' }, true);\n\t\t\tcapabilities.add(TerminalCapability.ShellEnvDetection, shellEnvDetection);\n\t\t});\n\n\t\ttest('cd | should show paths from $CDPATH (relative)', async () => {\n\t\t\tconfigurationService.setUserConfiguration('terminal.integrated.suggest.cdPath', 'relative');\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\n\t\t\tassertPartialCompletionsExist(result, [\n\t\t\t\t{ label: 'folder1', detail: 'CDPATH /cdpath_value/folder1/' },\n\t\t\t], { replacementRange: [3, 3] });\n\t\t});\n\n\t\ttest('cd | should show paths from $CDPATH (absolute)', async () => {\n\t\t\tconfigurationService.setUserConfiguration('terminal.integrated.suggest.cdPath', 'absolute');\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\n\t\t\tassertPartialCompletionsExist(result, [\n\t\t\t\t{ label: '/cdpath_value/folder1/', detail: 'CDPATH' },\n\t\t\t], { replacementRange: [3, 3] });\n\t\t});\n\n\t\ttest('cd | should support pulling from multiple paths in $CDPATH', async () => {\n\t\t\tconfigurationService.setUserConfiguration('terminal.integrated.suggest.cdPath', 'relative');\n\t\t\tconst pathPrefix = isWindows ? 'c:\\\\' : '/';\n\t\t\tconst delimeter = isWindows ? ';' : ':';\n\t\t\tconst separator = isWindows ? '\\\\' : '/';\n\t\t\tshellEnvDetection.setEnvironment({ CDPATH: `${pathPrefix}cdpath1_value${delimeter}${pathPrefix}cdpath2_value${separator}inner_dir` }, true);\n\n\t\t\tconst uriPathPrefix = isWindows ? 'file:///c:/' : 'file:///';\n\t\t\tvalidResources = [\n\t\t\t\tURI.parse(`${uriPathPrefix}test`),\n\t\t\t\tURI.parse(`${uriPathPrefix}cdpath1_value`),\n\t\t\t\tURI.parse(`${uriPathPrefix}cdpath2_value`),\n\t\t\t\tURI.parse(`${uriPathPrefix}cdpath2_value/inner_dir`)\n\t\t\t];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath1_value/folder1/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath1_value/folder2/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath1_value/file1.txt`), isFile: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath2_value/inner_dir/folder1/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath2_value/inner_dir/folder2/`), isDirectory: true },\n\t\t\t\t{ resource: URI.parse(`${uriPathPrefix}cdpath2_value/inner_dir/file1.txt`), isFile: true },\n\t\t\t];\n\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse(`${uriPathPrefix}test`),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'cd ', 3, provider, capabilities);\n\n\t\t\tconst finalPrefix = isWindows ? 'C:\\\\' : '/';\n\t\t\tassertPartialCompletionsExist(result, [\n\t\t\t\t{ label: 'folder1', detail: `CDPATH ${finalPrefix}cdpath1_value/folder1/` },\n\t\t\t\t{ label: 'folder2', detail: `CDPATH ${finalPrefix}cdpath1_value/folder2/` },\n\t\t\t\t{ label: 'folder1', detail: `CDPATH ${finalPrefix}cdpath2_value/inner_dir/folder1/` },\n\t\t\t\t{ label: 'folder2', detail: `CDPATH ${finalPrefix}cdpath2_value/inner_dir/folder2/` },\n\t\t\t], { replacementRange: [3, 3] });\n\t\t});\n\t});\n\n\tif (isWindows) {\n\t\tsuite('gitbash', () => {\n\t\t\ttest('should convert Git Bash absolute path to Windows absolute path', () => {\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/'), 'C:\\\\');\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/c/'), 'C:\\\\');\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/c/Users/foo'), 'C:\\\\Users\\\\foo');\n\t\t\t\tassert.strictEqual(gitBashToWindowsPath('/d/bar'), 'D:\\\\bar');\n\t\t\t});\n\n\t\t\ttest('should convert Windows absolute path to Git Bash absolute path', () => {\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('C:\\\\'), '/c/');\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('C:\\\\Users\\\\foo'), '/c/Users/foo');\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('D:\\\\bar'), '/d/bar');\n\t\t\t\tassert.strictEqual(windowsToGitBashPath('E:\\\\some\\\\path'), '/e/some/path');\n\t\t\t});\n\n\t\t\ttest('resolveResources with c:/ style absolute path for Git Bash', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\bar'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\baz.txt')\n\t\t\t\t];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\bar'), isDirectory: true, isFile: false },\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\baz.txt'), isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'C:/Users/foo/', 13, provider, capabilities, WindowsShellType.GitBash);\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: 'C:/Users/foo/', detail: 'C:\\\\Users\\\\foo\\\\' },\n\t\t\t\t\t{ label: 'C:/Users/foo/bar/', detail: 'C:\\\\Users\\\\foo\\\\bar\\\\' },\n\t\t\t\t\t{ label: 'C:/Users/foo/baz.txt', detail: 'C:\\\\Users\\\\foo\\\\baz.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t], { replacementRange: [0, 13] }, '/');\n\t\t\t});\n\t\t\ttest('resolveResources with cwd as Windows path (relative)', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\bar'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\baz.txt')\n\t\t\t\t];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\bar'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\baz.txt'), isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, './', 2, provider, capabilities, WindowsShellType.GitBash);\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: './', detail: 'C:\\\\Users\\\\foo\\\\' },\n\t\t\t\t\t{ label: './bar/', detail: 'C:\\\\Users\\\\foo\\\\bar\\\\' },\n\t\t\t\t\t{ label: './baz.txt', detail: 'C:\\\\Users\\\\foo\\\\baz.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t\t{ label: './../', detail: 'C:\\\\Users\\\\' }\n\t\t\t\t], { replacementRange: [0, 2] }, '/');\n\t\t\t});\n\n\t\t\ttest('resolveResources with cwd as Windows path (absolute)', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tshowDirectories: true,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tpathSeparator: '/'\n\t\t\t\t};\n\t\t\t\tvalidResources = [\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\bar'),\n\t\t\t\t\tURI.file('C:\\\\Users\\\\foo\\\\baz.txt')\n\t\t\t\t];\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\bar'), isDirectory: true },\n\t\t\t\t\t{ resource: URI.file('C:\\\\Users\\\\foo\\\\baz.txt'), isFile: true }\n\t\t\t\t];\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '/c/Users/foo/', 13, provider, capabilities, WindowsShellType.GitBash);\n\t\t\t\tassertCompletions(result, [\n\t\t\t\t\t{ label: '/c/Users/foo/', detail: 'C:\\\\Users\\\\foo\\\\' },\n\t\t\t\t\t{ label: '/c/Users/foo/bar/', detail: 'C:\\\\Users\\\\foo\\\\bar\\\\' },\n\t\t\t\t\t{ label: '/c/Users/foo/baz.txt', detail: 'C:\\\\Users\\\\foo\\\\baz.txt', kind: TerminalCompletionItemKind.File },\n\t\t\t\t], { replacementRange: [0, 13] }, '/');\n\t\t\t});\n\t\t});\n\t}\n\tif (!isWindows) {\n\t\tsuite('symlink support', () => {\n\t\t\ttest('should include symlink target information in completions', async () => {\n\t\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\t\tpathSeparator,\n\t\t\t\t\tshowFiles: true,\n\t\t\t\t\tshowDirectories: true\n\t\t\t\t};\n\n\t\t\t\tvalidResources = [URI.parse('file:///test')];\n\n\t\t\t\t// Create mock children including a symbolic link\n\t\t\t\tchildResources = [\n\t\t\t\t\t{ resource: URI.parse('file:///test/regular-file.txt'), isFile: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/symlink-file'), isFile: true, isSymbolicLink: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/symlink-folder'), isDirectory: true, isSymbolicLink: true },\n\t\t\t\t\t{ resource: URI.parse('file:///test/regular-folder'), isDirectory: true },\n\t\t\t\t];\n\n\t\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, 'ls ', 3, provider, capabilities);\n\n\t\t\t\t// Find the symlink completion\n\t\t\t\tconst symlinkFileCompletion = result?.find(c => c.label === './symlink-file');\n\t\t\t\tconst symlinkFolderCompletion = result?.find(c => c.label === './symlink-folder/');\n\t\t\t\tassert.strictEqual(symlinkFileCompletion?.detail, '/test/symlink-file -> /target/actual-file.txt', 'Symlink file detail should match target');\n\t\t\t\tassert.strictEqual(symlinkFolderCompletion?.detail, '/test/symlink-folder -> /target/actual-folder', 'Symlink folder detail should match target');\n\t\t\t});\n\t\t});\n\t}\n\tsuite('completion label escaping', () => {\n\t\ttest('| should escape special characters in file/folder names for POSIX shells', async () => {\n\t\t\tconst resourceOptions: TerminalCompletionResourceOptions = {\n\t\t\t\tcwd: URI.parse('file:///test'),\n\t\t\t\tshowDirectories: true,\n\t\t\t\tshowFiles: true,\n\t\t\t\tpathSeparator\n\t\t\t};\n\t\t\tvalidResources = [URI.parse('file:///test')];\n\t\t\tchildResources = [\n\t\t\t\t{ resource: URI.parse('file:///test/[folder1]/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/folder 2/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/!special$chars&/'), isDirectory: true },\n\t\t\t\t{ resource: URI.parse('file:///test/!special$chars2&'), isFile: true }\n\t\t\t];\n\t\t\tconst result = await terminalCompletionService.resolveResources(resourceOptions, '', 0, provider, capabilities);\n\n\t\t\tassertCompletions(result, [\n\t\t\t\t{ label: '.', detail: '/test/' },\n\t\t\t\t{ label: './[folder1]/', detail: '/test/\\[folder1]\\/' },\n\t\t\t\t{ label: './folder\\ 2/', detail: '/test/folder\\ 2/' },\n\t\t\t\t{ label: './\\!special\\$chars\\&/', detail: '/test/\\!special\\$chars\\&/' },\n\t\t\t\t{ label: './\\!special\\$chars2\\&', detail: '/test/\\!special\\$chars2\\&', kind: TerminalCompletionItemKind.File },\n\t\t\t\t{ label: '../', detail: '/' },\n\t\t\t\tstandardTildeItem,\n\t\t\t], { replacementRange: [0, 0] });\n\t\t});\n\n\t});\n\n\tsuite('Provider Configuration', () => {\n\t\t// Test class that extends TerminalCompletionService to access protected methods\n\t\tclass TestTerminalCompletionService extends TerminalCompletionService {\n\t\t\tpublic getEnabledProviders(providers: ITerminalCompletionProvider[]): ITerminalCompletionProvider[] {\n\t\t\t\treturn super._getEnabledProviders(providers);\n\t\t\t}\n\t\t}\n\n\t\tlet testTerminalCompletionService: TestTerminalCompletionService;\n\n\t\tsetup(() => {\n\t\t\ttestTerminalCompletionService = store.add(instantiationService.createInstance(TestTerminalCompletionService));\n\t\t});\n\n\t\t// Mock provider for testing\n\t\tfunction createMockProvider(id: string): ITerminalCompletionProvider {\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tprovideCompletions: async () => [{\n\t\t\t\t\tlabel: `completion-from-${id}`,\n\t\t\t\t\tkind: TerminalCompletionItemKind.Method,\n\t\t\t\t\treplacementRange: [0, 0],\n\t\t\t\t\tprovider: id\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\n\t\ttest('should enable providers by default when no configuration exists', () => {\n\t\t\tconst defaultProvider = createMockProvider('terminal-suggest');\n\t\t\tconst newProvider = createMockProvider('new-extension-provider');\n\t\t\tconst providers = [defaultProvider, newProvider];\n\n\t\t\t// Set empty configuration (no provider keys)\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// Both providers should be enabled since they're not explicitly disabled\n\t\t\tassert.strictEqual(result.length, 2, 'Should enable both providers by default');\n\t\t\tassert.ok(result.includes(defaultProvider), 'Should include default provider');\n\t\t\tassert.ok(result.includes(newProvider), 'Should include new provider');\n\t\t});\n\n\t\ttest('should disable providers when explicitly set to false', () => {\n\t\t\tconst provider1 = createMockProvider('provider1');\n\t\t\tconst provider2 = createMockProvider('provider2');\n\t\t\tconst providers = [provider1, provider2];\n\n\t\t\t// Disable provider1, leave provider2 unconfigured\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {\n\t\t\t\t'provider1': false\n\t\t\t});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// Only provider2 should be enabled\n\t\t\tassert.strictEqual(result.length, 1, 'Should enable only one provider');\n\t\t\tassert.ok(result.includes(provider2), 'Should include unconfigured provider');\n\t\t\tassert.ok(!result.includes(provider1), 'Should not include disabled provider');\n\t\t});\n\n\t\ttest('should enable providers when explicitly set to true', () => {\n\t\t\tconst provider1 = createMockProvider('provider1');\n\t\t\tconst provider2 = createMockProvider('provider2');\n\t\t\tconst providers = [provider1, provider2];\n\n\t\t\t// Explicitly enable provider1, leave provider2 unconfigured\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {\n\t\t\t\t'provider1': true\n\t\t\t});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// Both providers should be enabled\n\t\t\tassert.strictEqual(result.length, 2, 'Should enable both providers');\n\t\t\tassert.ok(result.includes(provider1), 'Should include explicitly enabled provider');\n\t\t\tassert.ok(result.includes(provider2), 'Should include unconfigured provider');\n\t\t});\n\n\t\ttest('should handle mixed configuration correctly', () => {\n\t\t\tconst provider1 = createMockProvider('provider1');\n\t\t\tconst provider2 = createMockProvider('provider2');\n\t\t\tconst provider3 = createMockProvider('provider3');\n\t\t\tconst providers = [provider1, provider2, provider3];\n\n\t\t\t// Mixed configuration: enable provider1, disable provider2, leave provider3 unconfigured\n\t\t\tconfigurationService.setUserConfiguration(TerminalSuggestSettingId.Providers, {\n\t\t\t\t'provider1': true,\n\t\t\t\t'provider2': false\n\t\t\t});\n\n\t\t\tconst result = testTerminalCompletionService.getEnabledProviders(providers);\n\n\t\t\t// provider1 and provider3 should be enabled, provider2 should be disabled\n\t\t\tassert.strictEqual(result.length, 2, 'Should enable two providers');\n\t\t\tassert.ok(result.includes(provider1), 'Should include explicitly enabled provider');\n\t\t\tassert.ok(result.includes(provider3), 'Should include unconfigured provider');\n\t\t\tassert.ok(!result.includes(provider2), 'Should not include disabled provider');\n\t\t});\n\t});\n});\n"]}