{"version":3,"sources":["vs/workbench/contrib/terminalContrib/sendSequence/browser/terminal.sendSequence.contribution.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,OAAO,EAAE,MAAM,uCAAuC,CAAC;AAChE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,wCAAwC,CAAC;AACvF,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,qCAAqC,CAAC;AACzE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAC5D,OAAO,EAAE,kCAAkC,EAAE,MAAM,+DAA+D,CAAC;AACnH,OAAO,EAAE,cAAc,EAA6B,MAAM,yDAAyD,CAAC;AAEpH,OAAO,EAAE,mBAAmB,EAAuC,MAAM,kEAAkE,CAAC;AAC5I,OAAO,EAAE,kBAAkB,EAAE,MAAM,yDAAyD,CAAC;AAE7F,OAAO,EAAE,wBAAwB,EAAE,MAAM,uDAAuD,CAAC;AACjG,OAAO,EAAE,6BAA6B,EAAE,MAAM,4EAA4E,CAAC;AAC3H,OAAO,EAAE,eAAe,EAAE,MAAM,gDAAgD,CAAC;AACjF,OAAO,EAAE,gBAAgB,EAAE,MAAM,uCAAuC,CAAC;AACzE,OAAO,EAAE,sBAAsB,EAAE,MAAM,8CAA8C,CAAC;AACtF,OAAO,EAAE,mBAAmB,EAA6B,MAAM,gDAAgD,CAAC;AAEhH,MAAM,CAAN,IAAkB,6BAEjB;AAFD,WAAkB,6BAA6B;IAC9C,wFAAuD,CAAA;AACxD,CAAC,EAFiB,6BAA6B,KAA7B,6BAA6B,QAE9C;AAED,SAAS,gBAAgB,CAAC,GAAY;IACrC,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;AACxC,CAAC;AAED,MAAM,CAAC,MAAM,2BAA2B,GAAG,KAAK,EAAE,QAA0B,EAAE,IAAa,EAAE,EAAE;IAC9F,MAAM,iBAAiB,GAAG,QAAQ,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;IAC3D,MAAM,4BAA4B,GAAG,QAAQ,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;IACjF,MAAM,uBAAuB,GAAG,QAAQ,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;IACvE,MAAM,cAAc,GAAG,QAAQ,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;IACrD,MAAM,eAAe,GAAG,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;IAEvD,MAAM,QAAQ,GAAG,eAAe,CAAC,cAAc,CAAC;IAChD,IAAI,QAAQ,EAAE,CAAC;QACd,SAAS,SAAS,CAAC,GAAY;YAC9B,OAAO,QAAQ,CAAC,GAAG,CAAC,IAAI,MAAM,IAAI,GAAG,CAAC;QACvC,CAAC;QACD,IAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAErE,4EAA4E;QAC5E,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,IAAI,GAAG,MAAM,iBAAiB,CAAC,KAAK,CAAC;gBACpC,KAAK,EAAE,EAAE;gBACT,WAAW,EAAE,mDAAmD;gBAChE,MAAM,EAAE,QAAQ,CAAC,KAA+C,EAAE,IAAwC,CAAC;aAC3G,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,EAAE,CAAC;gBACX,OAAO;YACR,CAAC;YACD,2BAA2B;YAC3B,IAAI,aAAa,GAAG,IAAI;iBACtB,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC;iBACrB,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAExB,sCAAsC;YACtC,OAAO,IAAI,EAAE,CAAC;gBACb,MAAM,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;gBACzD,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,CAAC,KAAK,KAAK,SAAS,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;oBACrE,MAAM;gBACP,CAAC;gBACD,aAAa,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YAC1I,CAAC;YAED,IAAI,GAAG,aAAa,CAAC;QACtB,CAAC;QAED,MAAM,sBAAsB,GAAG,cAAc,CAAC,0BAA0B,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC5I,MAAM,uBAAuB,GAAG,sBAAsB,CAAC,CAAC,CAAC,uBAAuB,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC;QACrJ,MAAM,YAAY,GAAG,MAAM,4BAA4B,CAAC,YAAY,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;QACpG,QAAQ,CAAC,QAAQ,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;IACxC,CAAC;AACF,CAAC,CAAC;AAEF,MAAM,kBAAkB,GAAG,SAAS,CAAC,KAAc,EAAE,eAAe,CAAC,CAAC;AACtE,sBAAsB,CAAC;IACtB,EAAE,2FAA4C;IAC9C,KAAK,EAAE,kBAAkB;IACzB,EAAE,EAAE,IAAI;IACR,QAAQ,EAAE;QACT,WAAW,EAAE,kBAAkB,CAAC,KAAK;QACrC,IAAI,EAAE,CAAC;gBACN,IAAI,EAAE,MAAM;gBACZ,MAAM,EAAE;oBACP,IAAI,EAAE,QAAQ;oBACd,QAAQ,EAAE,CAAC,MAAM,CAAC;oBAClB,UAAU,EAAE;wBACX,IAAI,EAAE;4BACL,WAAW,EAAE,QAAQ,CAAC,KAAwB,EAAE,IAA8C,CAAC;4BAC/F,IAAI,EAAE,QAAQ;yBACd;qBACD;iBACD;aACD,CAAC;KACF;IACD,GAAG,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,CAAC,2BAA2B,CAAC,QAAQ,EAAE,IAAI,CAAC;CACvE,CAAC,CAAC;AAEH,MAAM,UAAU,8BAA8B,CAAC,IAAY,EAAE,IAAoD;IAChH,mBAAmB,CAAC,gCAAgC,CAAC;QACpD,EAAE,2FAA4C;QAC9C,MAAM,6CAAmC;QACzC,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,mBAAmB,CAAC,KAAK;QAC5C,OAAO,EAAE,IAAI,CAAC,OAAO;QACrB,GAAG,EAAE,IAAI,CAAC,GAAG;QACb,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,GAAG,EAAE,IAAI,CAAC,GAAG;QACb,OAAO,EAAE,2BAA2B;QACpC,IAAI,EAAE,EAAE,IAAI,EAAE;KACd,CAAC,CAAC;AACJ,CAAC;AAID,IAAW,SAGV;AAHD,WAAW,SAAS;IACnB,yEAAyE;IACzE,kEAAqB,CAAA;AACtB,CAAC,EAHU,SAAS,KAAT,SAAS,QAGnB;AAED,6FAA6F;AAC7F,2FAA2F;AAC3F,gGAAgG;AAChG,oEAAoE;AACpE,IAAI,SAAS,EAAE,CAAC;IACf,8BAA8B,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,sCAA6B,CAAC,EAAE;QACnG,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,yGAAkE,EAAE,kCAAkC,CAAC,MAAM,EAAE,CAAC;QACzL,OAAO,EAAE,iDAA6B;KACtC,CAAC,CAAC;AACJ,CAAC;AAED,iGAAiG;AACjG,iGAAiG;AACjG,8EAA8E;AAC9E,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,yGAAkE,EAAE,mBAAmB,CAAC,+BAA+B,EAAE,kCAAkC,CAAC,MAAM,EAAE,CAAC;IAC9O,OAAO,EAAE,kDAA8B;IACvC,GAAG,EAAE,EAAE,OAAO,EAAE,iDAA8B,EAAE;CAChD,CAAC,CAAC;AACH,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,yGAAkE,EAAE,mBAAmB,CAAC,+BAA+B,EAAE,kCAAkC,CAAC,MAAM,EAAE,CAAC;IAC9O,OAAO,EAAE,6CAA0B;CACnC,CAAC,CAAC;AACH,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,yGAAkE,EAAE,mBAAmB,CAAC,+BAA+B,EAAE,kCAAkC,CAAC,MAAM,EAAE,CAAC;IAC9O,OAAO,EAAE,+CAA4B;CACrC,CAAC,CAAC;AACH,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,yGAAkE,EAAE,mBAAmB,CAAC,+BAA+B,EAAE,kCAAkC,CAAC,MAAM,EAAE,CAAC;IAC9O,GAAG,EAAE,EAAE,OAAO,EAAE,mDAA6B,8BAAqB,EAAE;CACpE,CAAC,CAAC;AAEH,6BAA6B;AAC7B,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,yGAAkE,CAAC;IAC5I,GAAG,EAAE,EAAE,OAAO,EAAE,mDAA6B,6BAAoB,EAAE;CACnE,CAAC,CAAC;AAEH,kGAAkG;AAClG,sEAAsE;AACtE,oGAAoG;AACpG,+BAA+B;AAC/B,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC;IACnD,OAAO,EAAE,+CAA4B;CACrC,CAAC,CAAC;AACH,8BAA8B,CAAC,WAAW,EAAE;IAC3C,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC;IACnD,OAAO,EAAE,iDAA8B;CACvC,CAAC,CAAC;AACH,8BAA8B,CAAC,MAAM,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE;IACtE,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC;IACnD,OAAO,EAAE,kDAA+B;CACxC,CAAC,CAAC;AACH,8BAA8B,CAAC,MAAM,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE;IACtE,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC;IACnD,OAAO,EAAE,iDAA8B;CACvC,CAAC,CAAC;AAEH,mGAAmG;AACnG,8BAA8B,CAAC,MAAM,EAAE;IACtC,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,kCAAkC,CAAC;IACvF,OAAO,EAAE,gDAA2B,wBAAe;IACnD,GAAG,EAAE,EAAE,OAAO,EAAE,+CAA2B,wBAAe,EAAE;CAC5D,CAAC,CAAC;AAEH,4EAA4E;AAC5E,8BAA8B,CAAC,MAAM,EAAE;IACtC,IAAI,EAAE,mBAAmB,CAAC,KAAK;IAC/B,OAAO,EAAE,gDAA2B,wBAAe;IACnD,GAAG,EAAE,EAAE,OAAO,EAAE,+CAA2B,wBAAe,EAAE;CAC5D,CAAC,CAAC;AAEH,2HAA2H;AAC3H,IAAI,KAAK,EAAE,CAAC;IACX,8BAA8B,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,sCAA6B,CAAC,EAAE;QACnG,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,CAAC;QACnD,OAAO,EAAE,gDAA6B;KACtC,CAAC,CAAC;AACJ,CAAC;AAED,2BAA2B;AAC3B,8BAA8B,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,sCAA6B,CAAC,EAAE;IACnG,OAAO,EAAE,qDAAkC;IAC3C,GAAG,EAAE,EAAE,OAAO,EAAE,gDAA8B,EAAE;CAChD,CAAC,CAAC;AACH,IAAI,SAAS,EAAE,CAAC;IACf,2BAA2B;IAC3B,uDAAuD;IACvD,8BAA8B,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,sCAA6B,CAAC,EAAE;QACnG,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,2GAAqE,CAAC;QAC/I,OAAO,EAAE,qDAAkC;KAC3C,CAAC,CAAC;AACJ,CAAC;AACD,qCAAqC;AACrC,8BAA8B,CAAC,SAAS,EAAE;IACzC,OAAO,EAAE,mDAA+B;IACxC,GAAG,EAAE,EAAE,OAAO,EAAE,8CAA2B,EAAE;CAC7C,CAAC,CAAC;AACH,+BAA+B;AAC/B,8BAA8B,CAAC,QAAQ,EAAE;IACxC,GAAG,EAAE,EAAE,OAAO,EAAE,qDAAkC,EAAE;CACpD,CAAC,CAAC;AACH,6BAA6B;AAC7B,8BAA8B,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE;IAC3E,GAAG,EAAE,EAAE,OAAO,EAAE,sDAAkC,EAAE;CACpD,CAAC,CAAC;AACH,2BAA2B;AAC3B,8BAA8B,CAAC,MAAM,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE;IAC3E,GAAG,EAAE,EAAE,OAAO,EAAE,uDAAmC,EAAE;CACrD,CAAC,CAAC;AACH,oBAAoB;AACpB,8BAA8B,CAAC,QAAQ,EAAE;IACxC,OAAO,EAAE,mDAA6B,0BAAiB;IACvD,GAAG,EAAE,EAAE,OAAO,EAAE,kDAA6B,0BAAiB,EAAE;CAChE,CAAC,CAAC;AACH,mBAAmB;AACnB,8BAA8B,CAAC,QAAQ,EAAE;IACxC,OAAO,EAAE,mDAA6B,0BAAiB;IACvD,GAAG,EAAE,EAAE,OAAO,EAAE,kDAA6B,0BAAiB,EAAE;CAChE,CAAC,CAAC;AACH,oBAAoB;AACpB,8BAA8B,CAAC,QAAQ,EAAE;IACxC,OAAO,EAAE,kDAA8B;IACvC,GAAG,EAAE,EAAE,OAAO,EAAE,iDAA8B,EAAE;CAChD,CAAC,CAAC","file":"terminal.sendSequence.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { isIOS, isMacintosh, isWindows } from '../../../../../base/common/platform.js';\nimport { isObject, isString } from '../../../../../base/common/types.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { ContextKeyExpr, type ContextKeyExpression } from '../../../../../platform/contextkey/common/contextkey.js';\nimport type { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry, KeybindingWeight, type IKeybindings } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IQuickInputService } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { GeneralShellType, WindowsShellType } from '../../../../../platform/terminal/common/terminal.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IConfigurationResolverService } from '../../../../services/configurationResolver/common/configurationResolver.js';\nimport { IHistoryService } from '../../../../services/history/common/history.js';\nimport { ITerminalService } from '../../../terminal/browser/terminal.js';\nimport { registerTerminalAction } from '../../../terminal/browser/terminalActions.js';\nimport { TerminalContextKeys, TerminalContextKeyStrings } from '../../../terminal/common/terminalContextKey.js';\n\nexport const enum TerminalSendSequenceCommandId {\n\tSendSequence = 'workbench.action.terminal.sendSequence',\n}\n\nfunction toOptionalString(obj: unknown): string | undefined {\n\treturn isString(obj) ? obj : undefined;\n}\n\nexport const terminalSendSequenceCommand = async (accessor: ServicesAccessor, args: unknown) => {\n\tconst quickInputService = accessor.get(IQuickInputService);\n\tconst configurationResolverService = accessor.get(IConfigurationResolverService);\n\tconst workspaceContextService = accessor.get(IWorkspaceContextService);\n\tconst historyService = accessor.get(IHistoryService);\n\tconst terminalService = accessor.get(ITerminalService);\n\n\tconst instance = terminalService.activeInstance;\n\tif (instance) {\n\t\tfunction isTextArg(obj: unknown): obj is { text: string } {\n\t\t\treturn isObject(obj) && 'text' in obj;\n\t\t}\n\t\tlet text = isTextArg(args) ? toOptionalString(args.text) : undefined;\n\n\t\t// If no text provided, prompt user for input and process special characters\n\t\tif (!text) {\n\t\t\ttext = await quickInputService.input({\n\t\t\t\tvalue: '',\n\t\t\t\tplaceHolder: 'Enter sequence to send (supports \\\\n, \\\\r, \\\\xAB)',\n\t\t\t\tprompt: localize('workbench.action.terminal.sendSequence.prompt', \"Enter sequence to send to the terminal\"),\n\t\t\t});\n\t\t\tif (!text) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Process escape sequences\n\t\t\tlet processedText = text\n\t\t\t\t.replace(/\\\\n/g, '\\n')\n\t\t\t\t.replace(/\\\\r/g, '\\r');\n\n\t\t\t// Process hex escape sequences (\\xNN)\n\t\t\twhile (true) {\n\t\t\t\tconst match = processedText.match(/\\\\x([0-9a-fA-F]{2})/);\n\t\t\t\tif (match === null || match.index === undefined || match.length < 2) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tprocessedText = processedText.slice(0, match.index) + String.fromCharCode(parseInt(match[1], 16)) + processedText.slice(match.index + 4);\n\t\t\t}\n\n\t\t\ttext = processedText;\n\t\t}\n\n\t\tconst activeWorkspaceRootUri = historyService.getLastActiveWorkspaceRoot(instance.hasRemoteAuthority ? Schemas.vscodeRemote : Schemas.file);\n\t\tconst lastActiveWorkspaceRoot = activeWorkspaceRootUri ? workspaceContextService.getWorkspaceFolder(activeWorkspaceRootUri) ?? undefined : undefined;\n\t\tconst resolvedText = await configurationResolverService.resolveAsync(lastActiveWorkspaceRoot, text);\n\t\tinstance.sendText(resolvedText, false);\n\t}\n};\n\nconst sendSequenceString = localize2('sendSequence', \"Send Sequence\");\nregisterTerminalAction({\n\tid: TerminalSendSequenceCommandId.SendSequence,\n\ttitle: sendSequenceString,\n\tf1: true,\n\tmetadata: {\n\t\tdescription: sendSequenceString.value,\n\t\targs: [{\n\t\t\tname: 'args',\n\t\t\tschema: {\n\t\t\t\ttype: 'object',\n\t\t\t\trequired: ['text'],\n\t\t\t\tproperties: {\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tdescription: localize('sendSequence.text.desc', \"The sequence of text to send to the terminal\"),\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t}]\n\t},\n\trun: (c, accessor, args) => terminalSendSequenceCommand(accessor, args)\n});\n\nexport function registerSendSequenceKeybinding(text: string, rule: { when?: ContextKeyExpression } & IKeybindings): void {\n\tKeybindingsRegistry.registerCommandAndKeybindingRule({\n\t\tid: TerminalSendSequenceCommandId.SendSequence,\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\twhen: rule.when || TerminalContextKeys.focus,\n\t\tprimary: rule.primary,\n\t\tmac: rule.mac,\n\t\tlinux: rule.linux,\n\t\twin: rule.win,\n\t\thandler: terminalSendSequenceCommand,\n\t\targs: { text }\n\t});\n}\n\n\n\nconst enum Constants {\n\t/** The text representation of `^<letter>` is `'A'.charCodeAt(0) + 1`. */\n\tCtrlLetterOffset = 64\n}\n\n// An extra Windows-only ctrl+v keybinding is used for pwsh that sends ctrl+v directly to the\n// shell, this gets handled by PSReadLine which properly handles multi-line pastes. This is\n// disabled in accessibility mode as PowerShell does not run PSReadLine when it detects a screen\n// reader. This works even when clipboard.readText is not supported.\nif (isWindows) {\n\tregisterSendSequenceKeybinding(String.fromCharCode('V'.charCodeAt(0) - Constants.CtrlLetterOffset), { // ctrl+v\n\t\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, GeneralShellType.PowerShell), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyV\n\t});\n}\n\n// Map certain keybindings in pwsh to unused keys which get handled by PSReadLine handlers in the\n// shell integration script. This allows keystrokes that cannot be sent via VT sequences to work.\n// See https://github.com/microsoft/terminal/issues/879#issuecomment-497775007\nregisterSendSequenceKeybinding('\\x1b[24~a', { // F12,a -> ctrl+space (MenuComplete)\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, GeneralShellType.PowerShell), TerminalContextKeys.terminalShellIntegrationEnabled, CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\tprimary: KeyMod.CtrlCmd | KeyCode.Space,\n\tmac: { primary: KeyMod.WinCtrl | KeyCode.Space }\n});\nregisterSendSequenceKeybinding('\\x1b[24~b', { // F12,b -> alt+space (SetMark)\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, GeneralShellType.PowerShell), TerminalContextKeys.terminalShellIntegrationEnabled, CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\tprimary: KeyMod.Alt | KeyCode.Space\n});\nregisterSendSequenceKeybinding('\\x1b[24~c', { // F12,c -> shift+enter (AddLine)\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, GeneralShellType.PowerShell), TerminalContextKeys.terminalShellIntegrationEnabled, CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\tprimary: KeyMod.Shift | KeyCode.Enter\n});\nregisterSendSequenceKeybinding('\\x1b[24~d', { // F12,d -> shift+end (SelectLine) - HACK: \\x1b[1;2F is supposed to work but it doesn't\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, GeneralShellType.PowerShell), TerminalContextKeys.terminalShellIntegrationEnabled, CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\tmac: { primary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.RightArrow }\n});\n\n// Always on pwsh keybindings\nregisterSendSequenceKeybinding('\\x1b[1;2H', { // Shift+home\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, GeneralShellType.PowerShell)),\n\tmac: { primary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.LeftArrow }\n});\n\n// Map alt+arrow to ctrl+arrow to allow word navigation in most shells to just work with alt. This\n// is non-standard behavior, but a lot of terminals act like this (see\n// https://github.com/microsoft/vscode/issues/190629). Note that macOS uses different sequences here\n// to get the desired behavior.\nregisterSendSequenceKeybinding('\\x1b[1;5A', {\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus),\n\tprimary: KeyMod.Alt | KeyCode.UpArrow\n});\nregisterSendSequenceKeybinding('\\x1b[1;5B', {\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus),\n\tprimary: KeyMod.Alt | KeyCode.DownArrow\n});\nregisterSendSequenceKeybinding('\\x1b' + (isMacintosh ? 'f' : '[1;5C'), {\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus),\n\tprimary: KeyMod.Alt | KeyCode.RightArrow\n});\nregisterSendSequenceKeybinding('\\x1b' + (isMacintosh ? 'b' : '[1;5D'), {\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus),\n\tprimary: KeyMod.Alt | KeyCode.LeftArrow\n});\n\n// Map ctrl+alt+r -> ctrl+r when in accessibility mode due to default run recent command keybinding\nregisterSendSequenceKeybinding('\\x12', {\n\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, CONTEXT_ACCESSIBILITY_MODE_ENABLED),\n\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyR,\n\tmac: { primary: KeyMod.WinCtrl | KeyMod.Alt | KeyCode.KeyR }\n});\n\n// Map ctrl+alt+g -> ctrl+g due to default go to recent directory keybinding\nregisterSendSequenceKeybinding('\\x07', {\n\twhen: TerminalContextKeys.focus,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyG,\n\tmac: { primary: KeyMod.WinCtrl | KeyMod.Alt | KeyCode.KeyG }\n});\n\n// send ctrl+c to the iPad when the terminal is focused and ctrl+c is pressed to kill the process (work around for #114009)\nif (isIOS) {\n\tregisterSendSequenceKeybinding(String.fromCharCode('C'.charCodeAt(0) - Constants.CtrlLetterOffset), { // ctrl+c\n\t\twhen: ContextKeyExpr.and(TerminalContextKeys.focus),\n\t\tprimary: KeyMod.WinCtrl | KeyCode.KeyC\n\t});\n}\n\n// Delete word left: ctrl+w\nregisterSendSequenceKeybinding(String.fromCharCode('W'.charCodeAt(0) - Constants.CtrlLetterOffset), {\n\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\tmac: { primary: KeyMod.Alt | KeyCode.Backspace }\n});\nif (isWindows) {\n\t// Delete word left: ctrl+h\n\t// Windows cmd.exe requires ^H to delete full word left\n\tregisterSendSequenceKeybinding(String.fromCharCode('H'.charCodeAt(0) - Constants.CtrlLetterOffset), {\n\t\twhen: ContextKeyExpr.and(TerminalContextKeys.focus, ContextKeyExpr.equals(TerminalContextKeyStrings.ShellType, WindowsShellType.CommandPrompt)),\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t});\n}\n// Delete word right: alt+d [27, 100]\nregisterSendSequenceKeybinding('\\u001bd', {\n\tprimary: KeyMod.CtrlCmd | KeyCode.Delete,\n\tmac: { primary: KeyMod.Alt | KeyCode.Delete }\n});\n// Delete to line start: ctrl+u\nregisterSendSequenceKeybinding('\\u0015', {\n\tmac: { primary: KeyMod.CtrlCmd | KeyCode.Backspace }\n});\n// Move to line start: ctrl+A\nregisterSendSequenceKeybinding(String.fromCharCode('A'.charCodeAt(0) - 64), {\n\tmac: { primary: KeyMod.CtrlCmd | KeyCode.LeftArrow }\n});\n// Move to line end: ctrl+E\nregisterSendSequenceKeybinding(String.fromCharCode('E'.charCodeAt(0) - 64), {\n\tmac: { primary: KeyMod.CtrlCmd | KeyCode.RightArrow }\n});\n// NUL: ctrl+shift+2\nregisterSendSequenceKeybinding('\\u0000', {\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Digit2,\n\tmac: { primary: KeyMod.WinCtrl | KeyMod.Shift | KeyCode.Digit2 }\n});\n// RS: ctrl+shift+6\nregisterSendSequenceKeybinding('\\u001e', {\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Digit6,\n\tmac: { primary: KeyMod.WinCtrl | KeyMod.Shift | KeyCode.Digit6 }\n});\n// US (Undo): ctrl+/\nregisterSendSequenceKeybinding('\\u001f', {\n\tprimary: KeyMod.CtrlCmd | KeyCode.Slash,\n\tmac: { primary: KeyMod.WinCtrl | KeyCode.Slash }\n});\n"]}