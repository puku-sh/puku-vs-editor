{"version":3,"sources":["vs/workbench/contrib/terminalContrib/voice/browser/terminalVoiceActions.ts"],"names":[],"mappings":"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","file":"terminalVoiceActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IExtensionManagementService } from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { EnablementState, IWorkbenchExtensionEnablementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { HasSpeechProvider, SpeechToTextInProgress } from '../../../speech/common/speechService.js';\nimport { registerActiveInstanceAction, sharedWhenClause } from '../../../terminal/browser/terminalActions.js';\nimport { TerminalCommandId } from '../../../terminal/common/terminal.js';\nimport { TerminalContextKeys } from '../../../terminal/common/terminalContextKey.js';\nimport { TerminalVoiceSession } from './terminalVoice.js';\n\nexport function registerTerminalVoiceActions() {\n\tregisterActiveInstanceAction({\n\t\tid: TerminalCommandId.StartVoice,\n\t\ttitle: localize2('workbench.action.terminal.startDictation', \"Start Dictation in Terminal\"),\n\t\tprecondition: ContextKeyExpr.and(\n\t\t\tSpeechToTextInProgress.toNegated(),\n\t\t\tsharedWhenClause.terminalAvailable\n\t\t),\n\t\tf1: true,\n\t\trun: async (activeInstance, c, accessor) => {\n\t\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\tconst workbenchExtensionEnablementService = accessor.get(IWorkbenchExtensionEnablementService);\n\t\t\tconst extensionManagementService = accessor.get(IExtensionManagementService);\n\t\t\tif (HasSpeechProvider.getValue(contextKeyService)) {\n\t\t\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\t\t\tTerminalVoiceSession.getInstance(instantiationService).start();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst extensions = await extensionManagementService.getInstalled();\n\t\t\tconst extension = extensions.find(extension => extension.identifier.id === 'ms-vscode.vscode-speech');\n\t\t\tconst extensionIsDisabled = extension && !workbenchExtensionEnablementService.isEnabled(extension);\n\t\t\tlet run: () => Promise<unknown>;\n\t\t\tlet message: string;\n\t\t\tlet primaryButton: string;\n\t\t\tif (extensionIsDisabled) {\n\t\t\t\tmessage = localize('terminal.voice.enableSpeechExtension', \"Would you like to enable the speech extension?\");\n\t\t\t\tprimaryButton = localize('enableExtension', \"Enable Extension\");\n\t\t\t\trun = () => workbenchExtensionEnablementService.setEnablement([extension], EnablementState.EnabledWorkspace);\n\t\t\t} else {\n\t\t\t\tmessage = localize('terminal.voice.installSpeechExtension', \"Would you like to install 'VS Code Speech' extension from 'Microsoft'?\");\n\t\t\t\trun = () => commandService.executeCommand('workbench.extensions.installExtension', 'ms-vscode.vscode-speech');\n\t\t\t\tprimaryButton = localize('installExtension', \"Install Extension\");\n\t\t\t}\n\t\t\tconst detail = localize('terminal.voice.detail', \"Microphone support requires this extension.\");\n\t\t\tconst confirmed = await dialogService.confirm({ message, primaryButton, type: 'info', detail });\n\t\t\tif (confirmed.confirmed) {\n\t\t\t\tawait run();\n\t\t\t}\n\t\t},\n\t});\n\n\tregisterActiveInstanceAction({\n\t\tid: TerminalCommandId.StopVoice,\n\t\ttitle: localize2('workbench.action.terminal.stopDictation', \"Stop Dictation in Terminal\"),\n\t\tprecondition: TerminalContextKeys.terminalDictationInProgress,\n\t\tf1: true,\n\t\tkeybinding: {\n\t\t\tprimary: KeyCode.Escape,\n\t\t\tweight: KeybindingWeight.WorkbenchContrib + 100\n\t\t},\n\t\trun: (activeInstance, c, accessor) => {\n\t\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\t\tTerminalVoiceSession.getInstance(instantiationService).stop(true);\n\t\t}\n\t});\n}\n"]}