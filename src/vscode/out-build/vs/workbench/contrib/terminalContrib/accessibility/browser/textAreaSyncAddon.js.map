{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/accessibility/browser/textAreaSyncAddon.ts","vs/workbench/contrib/terminalContrib/accessibility/browser/textAreaSyncAddon.ts"],"names":[],"mappings":"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","file":"textAreaSyncAddon.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { ITerminalAddon, Terminal } from '@xterm/xterm';\nimport { debounce } from '../../../../../base/common/decorators.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ITerminalCapabilityStore, TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { ITerminalLogService, TerminalSettingId } from '../../../../../platform/terminal/common/terminal.js';\n\nexport class TextAreaSyncAddon extends Disposable implements ITerminalAddon {\n\tprivate _terminal: Terminal | undefined;\n\tprivate readonly _listeners = this._register(new MutableDisposable());\n\n\tactivate(terminal: Terminal): void {\n\t\tthis._terminal = terminal;\n\t\tthis._refreshListeners();\n\t}\n\n\tconstructor(\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(Event.runAndSubscribe(Event.any(\n\t\t\tthis._capabilities.onDidChangeCapabilities,\n\t\t\tthis._accessibilityService.onDidChangeScreenReaderOptimized,\n\t\t), () => {\n\t\t\tthis._refreshListeners();\n\t\t}));\n\t}\n\n\tprivate _refreshListeners(): void {\n\t\tconst commandDetection = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\tif (this._shouldBeActive() && commandDetection) {\n\t\t\tif (!this._listeners.value) {\n\t\t\t\tconst textarea = this._terminal?.textarea;\n\t\t\t\tif (textarea) {\n\t\t\t\t\tthis._listeners.value = Event.runAndSubscribe(commandDetection.promptInputModel.onDidChangeInput, () => this._sync(textarea));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis._listeners.clear();\n\t\t}\n\t}\n\n\tprivate _shouldBeActive(): boolean {\n\t\treturn this._accessibilityService.isScreenReaderOptimized() || this._configurationService.getValue(TerminalSettingId.DevMode);\n\t}\n\n\t@debounce(50)\n\tprivate _sync(textArea: HTMLTextAreaElement): void {\n\t\tconst commandCapability = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\tif (!commandCapability) {\n\t\t\treturn;\n\t\t}\n\n\t\ttextArea.value = commandCapability.promptInputModel.value;\n\t\ttextArea.selectionStart = commandCapability.promptInputModel.cursorIndex;\n\t\ttextArea.selectionEnd = commandCapability.promptInputModel.cursorIndex;\n\n\t\tthis._logService.debug(`TextAreaSyncAddon#sync: text changed to \"${textArea.value}\"`);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { ITerminalAddon, Terminal } from '@xterm/xterm';\nimport { debounce } from '../../../../../base/common/decorators.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ITerminalCapabilityStore, TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { ITerminalLogService, TerminalSettingId } from '../../../../../platform/terminal/common/terminal.js';\n\nexport class TextAreaSyncAddon extends Disposable implements ITerminalAddon {\n\tprivate _terminal: Terminal | undefined;\n\tprivate readonly _listeners = this._register(new MutableDisposable());\n\n\tactivate(terminal: Terminal): void {\n\t\tthis._terminal = terminal;\n\t\tthis._refreshListeners();\n\t}\n\n\tconstructor(\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(Event.runAndSubscribe(Event.any(\n\t\t\tthis._capabilities.onDidChangeCapabilities,\n\t\t\tthis._accessibilityService.onDidChangeScreenReaderOptimized,\n\t\t), () => {\n\t\t\tthis._refreshListeners();\n\t\t}));\n\t}\n\n\tprivate _refreshListeners(): void {\n\t\tconst commandDetection = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\tif (this._shouldBeActive() && commandDetection) {\n\t\t\tif (!this._listeners.value) {\n\t\t\t\tconst textarea = this._terminal?.textarea;\n\t\t\t\tif (textarea) {\n\t\t\t\t\tthis._listeners.value = Event.runAndSubscribe(commandDetection.promptInputModel.onDidChangeInput, () => this._sync(textarea));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis._listeners.clear();\n\t\t}\n\t}\n\n\tprivate _shouldBeActive(): boolean {\n\t\treturn this._accessibilityService.isScreenReaderOptimized() || this._configurationService.getValue(TerminalSettingId.DevMode);\n\t}\n\n\t@debounce(50)\n\tprivate _sync(textArea: HTMLTextAreaElement): void {\n\t\tconst commandCapability = this._capabilities.get(TerminalCapability.CommandDetection);\n\t\tif (!commandCapability) {\n\t\t\treturn;\n\t\t}\n\n\t\ttextArea.value = commandCapability.promptInputModel.value;\n\t\ttextArea.selectionStart = commandCapability.promptInputModel.cursorIndex;\n\t\ttextArea.selectionEnd = commandCapability.promptInputModel.cursorIndex;\n\n\t\tthis._logService.debug(`TextAreaSyncAddon#sync: text changed to \"${textArea.value}\"`);\n\t}\n}\n"]}