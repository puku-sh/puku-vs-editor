{"version":3,"sources":["vs/workbench/contrib/terminalContrib/commandGuide/browser/terminal.commandGuide.contribution.ts"],"names":[],"mappings":"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","file":"terminal.commandGuide.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { addDisposableListener } from '../../../../../base/browser/dom.js';\nimport { combinedDisposable, Disposable, MutableDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../../nls.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { listInactiveSelectionBackground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { registerColor, transparent } from '../../../../../platform/theme/common/colorUtils.js';\nimport { PANEL_BORDER } from '../../../../common/theme.js';\nimport { IDetachedTerminalInstance, ITerminalContribution, ITerminalInstance, IXtermTerminal } from '../../../terminal/browser/terminal.js';\nimport { registerTerminalContribution, type IDetachedCompatibleTerminalContributionContext, type ITerminalContributionContext } from '../../../terminal/browser/terminalExtensions.js';\nimport { terminalCommandGuideConfigSection, TerminalCommandGuideSettingId, type ITerminalCommandGuideConfiguration } from '../common/terminalCommandGuideConfiguration.js';\nimport { isFullTerminalCommand } from '../../../../../platform/terminal/common/capabilities/commandDetection/terminalCommand.js';\n\n// #region Terminal Contributions\n\nclass TerminalCommandGuideContribution extends Disposable implements ITerminalContribution {\n\tstatic readonly ID = 'terminal.commandGuide';\n\n\tstatic get(instance: ITerminalInstance | IDetachedTerminalInstance): TerminalCommandGuideContribution | null {\n\t\treturn instance.getContribution<TerminalCommandGuideContribution>(TerminalCommandGuideContribution.ID);\n\t}\n\n\tprivate _xterm: IXtermTerminal & { raw: RawXtermTerminal } | undefined;\n\tprivate readonly _activeCommandGuide = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _ctx: ITerminalContributionContext | IDetachedCompatibleTerminalContributionContext,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t}\n\n\txtermOpen(xterm: IXtermTerminal & { raw: RawXtermTerminal }): void {\n\t\tthis._xterm = xterm;\n\t\tthis._refreshActivatedState();\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TerminalCommandGuideSettingId.ShowCommandGuide)) {\n\t\t\t\tthis._refreshActivatedState();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _refreshActivatedState() {\n\t\tconst xterm = this._xterm;\n\t\tif (!xterm) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst showCommandGuide = this._configurationService.getValue<ITerminalCommandGuideConfiguration>(terminalCommandGuideConfigSection).showCommandGuide;\n\t\tif (!!this._activeCommandGuide.value === showCommandGuide) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!showCommandGuide) {\n\t\t\tthis._activeCommandGuide.clear();\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst screenElement = xterm.raw.element!.querySelector('.xterm-screen')!;\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst viewportElement = xterm.raw.element!.querySelector('.xterm-viewport')!;\n\t\t\tthis._activeCommandGuide.value = combinedDisposable(\n\t\t\t\taddDisposableListener(screenElement, 'mousemove', (e: MouseEvent) => this._tryShowHighlight(screenElement, xterm, e)),\n\t\t\t\taddDisposableListener(viewportElement, 'mousemove', (e: MouseEvent) => this._tryShowHighlight(screenElement, xterm, e)),\n\t\t\t\taddDisposableListener(xterm.raw.element!, 'mouseleave', () => xterm.markTracker.showCommandGuide(undefined)),\n\t\t\t\txterm.raw.onData(() => xterm.markTracker.showCommandGuide(undefined)),\n\t\t\t\ttoDisposable(() => xterm.markTracker.showCommandGuide(undefined)),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _tryShowHighlight(element: Element, xterm: IXtermTerminal & { raw: RawXtermTerminal }, e: MouseEvent) {\n\t\tconst rect = element.getBoundingClientRect();\n\t\tif (!rect) {\n\t\t\treturn;\n\t\t}\n\t\tconst mouseCursorY = Math.floor((e.clientY - rect.top) / (rect.height / xterm.raw.rows));\n\t\tconst command = this._ctx.instance.capabilities.get(TerminalCapability.CommandDetection)?.getCommandForLine(xterm.raw.buffer.active.viewportY + mouseCursorY);\n\t\tif (command && isFullTerminalCommand(command)) {\n\t\t\txterm.markTracker.showCommandGuide(command);\n\t\t} else {\n\t\t\txterm.markTracker.showCommandGuide(undefined);\n\t\t}\n\t}\n}\n\nregisterTerminalContribution(TerminalCommandGuideContribution.ID, TerminalCommandGuideContribution, false);\n\nexport const TERMINAL_COMMAND_GUIDE_COLOR = registerColor('terminalCommandGuide.foreground', {\n\tdark: transparent(listInactiveSelectionBackground, 1),\n\tlight: transparent(listInactiveSelectionBackground, 1),\n\thcDark: PANEL_BORDER,\n\thcLight: PANEL_BORDER\n}, localize('terminalCommandGuide.foreground', 'The foreground color of the terminal command guide that appears to the left of a command and its output on hover.'));\n\n// #endregion\n"]}