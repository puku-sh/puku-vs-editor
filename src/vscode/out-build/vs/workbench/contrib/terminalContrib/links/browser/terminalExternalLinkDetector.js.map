{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/links/browser/terminalExternalLinkDetector.ts","vs/workbench/contrib/terminalContrib/links/browser/terminalExternalLinkDetector.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,wBAAwB,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAIzF,MAAM,OAAO,4BAA4B;IAGxC,YACU,EAAU,EACV,KAAe,EACP,aAA0E;QAFlF,OAAE,GAAF,EAAE,CAAQ;QACV,UAAK,GAAL,KAAK,CAAU;QACP,kBAAa,GAAb,aAAa,CAA6D;QALnF,kBAAa,GAAG,IAAI,CAAC;IAO9B,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,KAAoB,EAAE,SAAiB,EAAE,OAAe;QACpE,kDAAkD;QAClD,MAAM,IAAI,GAAG,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAChG,IAAI,IAAI,KAAK,EAAE,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YACrD,OAAO,EAAE,CAAC;QACX,CAAC;QAED,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,aAAa,EAAE,CAAC;YACpB,OAAO,EAAE,CAAC;QACX,CAAC;QAED,MAAM,MAAM,GAAG,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACvC,MAAM,WAAW,GAAG,wBAAwB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBACpE,WAAW,EAAE,IAAI,CAAC,UAAU,GAAG,CAAC;gBAChC,eAAe,EAAE,CAAC;gBAClB,SAAS,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC;gBAC5C,aAAa,EAAE,CAAC;aAChB,EAAE,SAAS,CAAC,CAAC;YACd,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAE1F,MAAM,CAAC,GAAwB;gBAC9B,IAAI,EAAE,YAAY;gBAClB,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,WAAW;gBACX,IAAI,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE;gBACrB,QAAQ,EAAE,IAAI,CAAC,QAAQ;aACvB,CAAC;YACF,OAAO,CAAC,CAAC;QACV,CAAC,CAAC,CAAC;QAEH,OAAO,MAAM,CAAC;IACf,CAAC;CACD","file":"terminalExternalLinkDetector.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITerminalLinkDetector, ITerminalSimpleLink, OmitFirstArg } from './links.js';\nimport { convertLinkRangeToBuffer, getXtermLineContent } from './terminalLinkHelpers.js';\nimport { ITerminalExternalLinkProvider } from '../../../terminal/browser/terminal.js';\nimport type { IBufferLine, Terminal } from '@xterm/xterm';\n\nexport class TerminalExternalLinkDetector implements ITerminalLinkDetector {\n\treadonly maxLinkLength = 2000;\n\n\tconstructor(\n\t\treadonly id: string,\n\t\treadonly xterm: Terminal,\n\t\tprivate readonly _provideLinks: OmitFirstArg<ITerminalExternalLinkProvider['provideLinks']>\n\t) {\n\t}\n\n\tasync detect(lines: IBufferLine[], startLine: number, endLine: number): Promise<ITerminalSimpleLink[]> {\n\t\t// Get the text representation of the wrapped line\n\t\tconst text = getXtermLineContent(this.xterm.buffer.active, startLine, endLine, this.xterm.cols);\n\t\tif (text === '' || text.length > this.maxLinkLength) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst externalLinks = await this._provideLinks(text);\n\t\tif (!externalLinks) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result = externalLinks.map(link => {\n\t\t\tconst bufferRange = convertLinkRangeToBuffer(lines, this.xterm.cols, {\n\t\t\t\tstartColumn: link.startIndex + 1,\n\t\t\t\tstartLineNumber: 1,\n\t\t\t\tendColumn: link.startIndex + link.length + 1,\n\t\t\t\tendLineNumber: 1\n\t\t\t}, startLine);\n\t\t\tconst matchingText = text.substring(link.startIndex, link.startIndex + link.length) || '';\n\n\t\t\tconst l: ITerminalSimpleLink = {\n\t\t\t\ttext: matchingText,\n\t\t\t\tlabel: link.label,\n\t\t\t\tbufferRange,\n\t\t\t\ttype: { id: this.id },\n\t\t\t\tactivate: link.activate\n\t\t\t};\n\t\t\treturn l;\n\t\t});\n\n\t\treturn result;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITerminalLinkDetector, ITerminalSimpleLink, OmitFirstArg } from './links.js';\nimport { convertLinkRangeToBuffer, getXtermLineContent } from './terminalLinkHelpers.js';\nimport { ITerminalExternalLinkProvider } from '../../../terminal/browser/terminal.js';\nimport type { IBufferLine, Terminal } from '@xterm/xterm';\n\nexport class TerminalExternalLinkDetector implements ITerminalLinkDetector {\n\treadonly maxLinkLength = 2000;\n\n\tconstructor(\n\t\treadonly id: string,\n\t\treadonly xterm: Terminal,\n\t\tprivate readonly _provideLinks: OmitFirstArg<ITerminalExternalLinkProvider['provideLinks']>\n\t) {\n\t}\n\n\tasync detect(lines: IBufferLine[], startLine: number, endLine: number): Promise<ITerminalSimpleLink[]> {\n\t\t// Get the text representation of the wrapped line\n\t\tconst text = getXtermLineContent(this.xterm.buffer.active, startLine, endLine, this.xterm.cols);\n\t\tif (text === '' || text.length > this.maxLinkLength) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst externalLinks = await this._provideLinks(text);\n\t\tif (!externalLinks) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result = externalLinks.map(link => {\n\t\t\tconst bufferRange = convertLinkRangeToBuffer(lines, this.xterm.cols, {\n\t\t\t\tstartColumn: link.startIndex + 1,\n\t\t\t\tstartLineNumber: 1,\n\t\t\t\tendColumn: link.startIndex + link.length + 1,\n\t\t\t\tendLineNumber: 1\n\t\t\t}, startLine);\n\t\t\tconst matchingText = text.substring(link.startIndex, link.startIndex + link.length) || '';\n\n\t\t\tconst l: ITerminalSimpleLink = {\n\t\t\t\ttext: matchingText,\n\t\t\t\tlabel: link.label,\n\t\t\t\tbufferRange,\n\t\t\t\ttype: { id: this.id },\n\t\t\t\tactivate: link.activate\n\t\t\t};\n\t\t\treturn l;\n\t\t});\n\n\t\treturn result;\n\t}\n}\n"]}