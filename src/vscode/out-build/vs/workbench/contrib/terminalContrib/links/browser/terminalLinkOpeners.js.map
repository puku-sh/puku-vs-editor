{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/links/browser/terminalLinkOpeners.ts","vs/workbench/contrib/terminalContrib/links/browser/terminalLinkOpeners.ts"],"names":[],"mappings":"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","file":"terminalLinkOpeners.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { OperatingSystem } from '../../../../../base/common/platform.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { ITextEditorSelection } from '../../../../../platform/editor/common/editor.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { ITerminalLinkOpener, ITerminalSimpleLink, TerminalBuiltinLinkType } from './links.js';\nimport { osPathModule, updateLinkWithRelativeCwd } from './terminalLinkHelpers.js';\nimport { getTerminalLinkType } from './terminalLocalLinkDetector.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ITerminalCapabilityStore, TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../../services/environment/common/environmentService.js';\nimport { IHostService } from '../../../../services/host/browser/host.js';\nimport { QueryBuilder } from '../../../../services/search/common/queryBuilder.js';\nimport { ISearchService } from '../../../../services/search/common/search.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { detectLinks, getLinkSuffix } from './terminalLinkParsing.js';\nimport { ITerminalLogService } from '../../../../../platform/terminal/common/terminal.js';\n\nexport class TerminalLocalFileLinkOpener implements ITerminalLinkOpener {\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open file link without a resolved URI');\n\t\t}\n\t\tconst linkSuffix = link.parsedLink ? link.parsedLink.suffix : getLinkSuffix(link.text);\n\t\tlet selection: ITextEditorSelection | undefined = link.selection;\n\t\tif (!selection) {\n\t\t\tselection = linkSuffix?.row === undefined ? undefined : {\n\t\t\t\tstartLineNumber: linkSuffix.row ?? 1,\n\t\t\t\tstartColumn: linkSuffix.col ?? 1,\n\t\t\t\tendLineNumber: linkSuffix.rowEnd,\n\t\t\t\tendColumn: linkSuffix.colEnd\n\t\t\t};\n\t\t}\n\t\tawait this._editorService.openEditor({\n\t\t\tresource: link.uri,\n\t\t\toptions: { pinned: true, selection, revealIfOpened: true }\n\t\t});\n\t}\n}\n\nexport class TerminalLocalFolderInWorkspaceLinkOpener implements ITerminalLinkOpener {\n\tconstructor(@ICommandService private readonly _commandService: ICommandService) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open folder in workspace link without a resolved URI');\n\t\t}\n\t\tawait this._commandService.executeCommand('revealInExplorer', link.uri);\n\t}\n}\n\nexport class TerminalLocalFolderOutsideWorkspaceLinkOpener implements ITerminalLinkOpener {\n\tconstructor(@IHostService private readonly _hostService: IHostService) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open folder in workspace link without a resolved URI');\n\t\t}\n\t\tthis._hostService.openWindow([{ folderUri: link.uri }], { forceNewWindow: true });\n\t}\n}\n\nexport class TerminalSearchLinkOpener implements ITerminalLinkOpener {\n\tprotected _fileQueryBuilder: QueryBuilder;\n\n\tconstructor(\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\tprivate readonly _initialCwd: string,\n\t\tprivate readonly _localFileOpener: TerminalLocalFileLinkOpener,\n\t\tprivate readonly _localFolderInWorkspaceOpener: TerminalLocalFolderInWorkspaceLinkOpener,\n\t\tprivate readonly _getOS: () => OperatingSystem,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@ISearchService private readonly _searchService: ISearchService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService,\n\t\t@IWorkbenchEnvironmentService private readonly _workbenchEnvironmentService: IWorkbenchEnvironmentService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t) {\n\t\tthis._fileQueryBuilder = instantiationService.createInstance(QueryBuilder);\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tconst osPath = osPathModule(this._getOS());\n\t\tconst pathSeparator = osPath.sep;\n\n\t\t// Remove file:/// and any leading ./ or ../ since quick access doesn't understand that format\n\t\tlet text = link.text.replace(/^file:\\/\\/\\/?/, '');\n\t\ttext = osPath.normalize(text).replace(/^(\\.+[\\\\/])+/, '');\n\n\t\t// Try extract any trailing line and column numbers by matching the text against parsed\n\t\t// links. This will give a search link `foo` on a line like `\"foo\", line 10` to open the\n\t\t// quick pick with `foo:10` as the contents.\n\t\t//\n\t\t// This also normalizes the path to remove suffixes like :10 or :5.0-4\n\t\tif (link.contextLine) {\n\t\t\tconst parsedLinks = detectLinks(link.contextLine, this._getOS());\n\t\t\t// Optimistically check that the link _starts with_ the parsed link text. If so,\n\t\t\t// continue to use the parsed link\n\t\t\tconst matchingParsedLink = parsedLinks.find(parsedLink => parsedLink.suffix && link.text.startsWith(parsedLink.path.text));\n\t\t\tif (matchingParsedLink) {\n\t\t\t\tif (matchingParsedLink.suffix?.row !== undefined) {\n\t\t\t\t\t// Normalize the path based on the parsed link\n\t\t\t\t\ttext = matchingParsedLink.path.text;\n\t\t\t\t\ttext += `:${matchingParsedLink.suffix.row}`;\n\t\t\t\t\tif (matchingParsedLink.suffix?.col !== undefined) {\n\t\t\t\t\t\ttext += `:${matchingParsedLink.suffix.col}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Remove `:<one or more non number characters>` from the end of the link.\n\t\t// Examples:\n\t\t// - Ruby stack traces: <link>:in ...\n\t\t// - Grep output: <link>:<result line>\n\t\t// This only happens when the colon is _not_ followed by a forward- or back-slash as that\n\t\t// would break absolute Windows paths (eg. `C:/Users/...`).\n\t\ttext = text.replace(/:[^\\\\/\\d][^\\d]*$/, '');\n\n\t\t// Remove any trailing periods after the line/column numbers, to prevent breaking the search feature, #200257\n\t\t// Examples:\n\t\t// \"Check your code Test.tsx:12:45.\" -> Test.tsx:12:45\n\t\t// \"Check your code Test.tsx:12.\" -> Test.tsx:12\n\n\t\ttext = text.replace(/\\.$/, '');\n\n\t\t// If any of the names of the folders in the workspace matches\n\t\t// a prefix of the link, remove that prefix and continue\n\t\tthis._workspaceContextService.getWorkspace().folders.forEach((folder) => {\n\t\t\tif (text.substring(0, folder.name.length + 1) === folder.name + pathSeparator) {\n\t\t\t\ttext = text.substring(folder.name.length + 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t\tlet cwdResolvedText = text;\n\t\tif (this._capabilities.has(TerminalCapability.CommandDetection)) {\n\t\t\tcwdResolvedText = updateLinkWithRelativeCwd(this._capabilities, link.bufferRange.start.y, text, osPath, this._logService)?.[0] || text;\n\t\t}\n\n\t\t// Try open the cwd resolved link first\n\t\tif (await this._tryOpenExactLink(cwdResolvedText, link)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the cwd resolved text didn't match, try find the link without the cwd resolved, for\n\t\t// example when a command prints paths in a sub-directory of the current cwd\n\t\tif (text !== cwdResolvedText) {\n\t\t\tif (await this._tryOpenExactLink(text, link)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Fallback to searching quick access\n\t\treturn this._quickInputService.quickAccess.show(text);\n\t}\n\n\tprivate async _getExactMatch(sanitizedLink: string): Promise<IResourceMatch | undefined> {\n\t\t// Make the link relative to the cwd if it isn't absolute\n\t\tconst os = this._getOS();\n\t\tconst pathModule = osPathModule(os);\n\t\tconst isAbsolute = pathModule.isAbsolute(sanitizedLink);\n\t\tlet absolutePath: string | undefined = isAbsolute ? sanitizedLink : undefined;\n\t\tif (!isAbsolute && this._initialCwd.length > 0) {\n\t\t\tabsolutePath = pathModule.join(this._initialCwd, sanitizedLink);\n\t\t}\n\n\t\t// Try open as an absolute link\n\t\tlet resourceMatch: IResourceMatch | undefined;\n\t\tif (absolutePath) {\n\t\t\tlet normalizedAbsolutePath: string = absolutePath;\n\t\t\tif (os === OperatingSystem.Windows) {\n\t\t\t\tnormalizedAbsolutePath = absolutePath.replace(/\\\\/g, '/');\n\t\t\t\tif (normalizedAbsolutePath.match(/[a-z]:/i)) {\n\t\t\t\t\tnormalizedAbsolutePath = `/${normalizedAbsolutePath}`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet uri: URI;\n\t\t\tif (this._workbenchEnvironmentService.remoteAuthority) {\n\t\t\t\turi = URI.from({\n\t\t\t\t\tscheme: Schemas.vscodeRemote,\n\t\t\t\t\tauthority: this._workbenchEnvironmentService.remoteAuthority,\n\t\t\t\t\tpath: normalizedAbsolutePath\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\turi = URI.file(normalizedAbsolutePath);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst fileStat = await this._fileService.stat(uri);\n\t\t\t\tresourceMatch = { uri, isDirectory: fileStat.isDirectory };\n\t\t\t} catch {\n\t\t\t\t// File or dir doesn't exist, continue on\n\t\t\t}\n\t\t}\n\n\t\t// Search the workspace if an exact match based on the absolute path was not found\n\t\tif (!resourceMatch) {\n\t\t\tconst results = await this._searchService.fileSearch(\n\t\t\t\tthis._fileQueryBuilder.file(this._workspaceContextService.getWorkspace().folders, {\n\t\t\t\t\tfilePattern: sanitizedLink,\n\t\t\t\t\tmaxResults: 2\n\t\t\t\t})\n\t\t\t);\n\t\t\tif (results.results.length > 0) {\n\t\t\t\tif (results.results.length === 1) {\n\t\t\t\t\t// If there's exactly 1 search result, return it regardless of whether it's\n\t\t\t\t\t// exact or partial.\n\t\t\t\t\tresourceMatch = { uri: results.results[0].resource };\n\t\t\t\t} else if (!isAbsolute) {\n\t\t\t\t\t// For non-absolute links, exact link matching is allowed only if there is a single an exact\n\t\t\t\t\t// file match. For example searching for `foo.txt` when there is no cwd information\n\t\t\t\t\t// available (ie. only the initial cwd) should open the file directly only if there is a\n\t\t\t\t\t// single file names `foo.txt` anywhere within the folder. These same rules apply to\n\t\t\t\t\t// relative paths with folders such as `src/foo.txt`.\n\t\t\t\t\tconst results = await this._searchService.fileSearch(\n\t\t\t\t\t\tthis._fileQueryBuilder.file(this._workspaceContextService.getWorkspace().folders, {\n\t\t\t\t\t\t\tfilePattern: `**/${sanitizedLink}`\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\t// Find an exact match if it exists\n\t\t\t\t\tconst exactMatches = results.results.filter(e => e.resource.toString().endsWith(sanitizedLink));\n\t\t\t\t\tif (exactMatches.length === 1) {\n\t\t\t\t\t\tresourceMatch = { uri: exactMatches[0].resource };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resourceMatch;\n\t}\n\n\tprivate async _tryOpenExactLink(text: string, link: ITerminalSimpleLink): Promise<boolean> {\n\t\tconst sanitizedLink = text.replace(/:\\d+(:\\d+)?$/, '');\n\t\ttry {\n\t\t\tconst result = await this._getExactMatch(sanitizedLink);\n\t\t\tif (result) {\n\t\t\t\tconst { uri, isDirectory } = result;\n\t\t\t\tconst linkToOpen = {\n\t\t\t\t\t// Use the absolute URI's path here so the optional line/col get detected\n\t\t\t\t\ttext: result.uri.path + (text.match(/:\\d+(:\\d+)?$/)?.[0] || ''),\n\t\t\t\t\turi,\n\t\t\t\t\tbufferRange: link.bufferRange,\n\t\t\t\t\ttype: link.type\n\t\t\t\t};\n\t\t\t\tif (uri) {\n\t\t\t\t\tawait (isDirectory ? this._localFolderInWorkspaceOpener.open(linkToOpen) : this._localFileOpener.open(linkToOpen));\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch {\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t}\n}\n\ninterface IResourceMatch {\n\turi: URI;\n\tisDirectory?: boolean;\n}\n\nexport class TerminalUrlLinkOpener implements ITerminalLinkOpener {\n\tconstructor(\n\t\tprivate readonly _isRemote: boolean,\n\t\tprivate readonly _localFileOpener: TerminalLocalFileLinkOpener,\n\t\tprivate readonly _localFolderInWorkspaceOpener: TerminalLocalFolderInWorkspaceLinkOpener,\n\t\tprivate readonly _localFolderOutsideWorkspaceOpener: TerminalLocalFolderOutsideWorkspaceLinkOpener,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IUriIdentityService private readonly _uriIdentityService: IUriIdentityService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService,\n\t) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open a url without a resolved URI');\n\t\t}\n\t\t// Handle file:// URIs by delegating to appropriate file/folder openers\n\t\tif (link.uri.scheme === Schemas.file) {\n\t\t\treturn this._openFileSchemeLink(link);\n\t\t}\n\t\t// It's important to use the raw string value here to avoid converting pre-encoded values\n\t\t// from the URL like `%2B` -> `+`.\n\t\tthis._openerService.open(link.text, {\n\t\t\tallowTunneling: this._isRemote && this._configurationService.getValue('remote.forwardOnOpen'),\n\t\t\tallowContributedOpeners: true,\n\t\t\topenExternal: true\n\t\t});\n\t}\n\n\tprivate async _openFileSchemeLink(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst stat = await this._fileService.stat(link.uri);\n\t\t\tconst isDirectory = stat.isDirectory;\n\t\t\tconst linkType = getTerminalLinkType(\n\t\t\t\tlink.uri,\n\t\t\t\tisDirectory,\n\t\t\t\tthis._uriIdentityService,\n\t\t\t\tthis._workspaceContextService\n\t\t\t);\n\n\t\t\t// Delegate to appropriate opener based on link type\n\t\t\tswitch (linkType) {\n\t\t\t\tcase TerminalBuiltinLinkType.LocalFile:\n\t\t\t\t\tawait this._localFileOpener.open(link);\n\t\t\t\t\treturn;\n\t\t\t\tcase TerminalBuiltinLinkType.LocalFolderInWorkspace:\n\t\t\t\t\tawait this._localFolderInWorkspaceOpener.open(link);\n\t\t\t\t\treturn;\n\t\t\t\tcase TerminalBuiltinLinkType.LocalFolderOutsideWorkspace:\n\t\t\t\t\tawait this._localFolderOutsideWorkspaceOpener.open(link);\n\t\t\t\t\treturn;\n\t\t\t\tcase TerminalBuiltinLinkType.Url:\n\t\t\t\t\tawait this.open(link);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis._logService.warn('Open file via native file explorer');\n\t\t}\n\t\tthis._openerService.open(link.text, {\n\t\t\tallowTunneling: this._isRemote && this._configurationService.getValue('remote.forwardOnOpen'),\n\t\t\tallowContributedOpeners: true,\n\t\t\topenExternal: true\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { OperatingSystem } from '../../../../../base/common/platform.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { ITextEditorSelection } from '../../../../../platform/editor/common/editor.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { ITerminalLinkOpener, ITerminalSimpleLink, TerminalBuiltinLinkType } from './links.js';\nimport { osPathModule, updateLinkWithRelativeCwd } from './terminalLinkHelpers.js';\nimport { getTerminalLinkType } from './terminalLocalLinkDetector.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ITerminalCapabilityStore, TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../../services/environment/common/environmentService.js';\nimport { IHostService } from '../../../../services/host/browser/host.js';\nimport { QueryBuilder } from '../../../../services/search/common/queryBuilder.js';\nimport { ISearchService } from '../../../../services/search/common/search.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { detectLinks, getLinkSuffix } from './terminalLinkParsing.js';\nimport { ITerminalLogService } from '../../../../../platform/terminal/common/terminal.js';\n\nexport class TerminalLocalFileLinkOpener implements ITerminalLinkOpener {\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open file link without a resolved URI');\n\t\t}\n\t\tconst linkSuffix = link.parsedLink ? link.parsedLink.suffix : getLinkSuffix(link.text);\n\t\tlet selection: ITextEditorSelection | undefined = link.selection;\n\t\tif (!selection) {\n\t\t\tselection = linkSuffix?.row === undefined ? undefined : {\n\t\t\t\tstartLineNumber: linkSuffix.row ?? 1,\n\t\t\t\tstartColumn: linkSuffix.col ?? 1,\n\t\t\t\tendLineNumber: linkSuffix.rowEnd,\n\t\t\t\tendColumn: linkSuffix.colEnd\n\t\t\t};\n\t\t}\n\t\tawait this._editorService.openEditor({\n\t\t\tresource: link.uri,\n\t\t\toptions: { pinned: true, selection, revealIfOpened: true }\n\t\t});\n\t}\n}\n\nexport class TerminalLocalFolderInWorkspaceLinkOpener implements ITerminalLinkOpener {\n\tconstructor(@ICommandService private readonly _commandService: ICommandService) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open folder in workspace link without a resolved URI');\n\t\t}\n\t\tawait this._commandService.executeCommand('revealInExplorer', link.uri);\n\t}\n}\n\nexport class TerminalLocalFolderOutsideWorkspaceLinkOpener implements ITerminalLinkOpener {\n\tconstructor(@IHostService private readonly _hostService: IHostService) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open folder in workspace link without a resolved URI');\n\t\t}\n\t\tthis._hostService.openWindow([{ folderUri: link.uri }], { forceNewWindow: true });\n\t}\n}\n\nexport class TerminalSearchLinkOpener implements ITerminalLinkOpener {\n\tprotected _fileQueryBuilder: QueryBuilder;\n\n\tconstructor(\n\t\tprivate readonly _capabilities: ITerminalCapabilityStore,\n\t\tprivate readonly _initialCwd: string,\n\t\tprivate readonly _localFileOpener: TerminalLocalFileLinkOpener,\n\t\tprivate readonly _localFolderInWorkspaceOpener: TerminalLocalFolderInWorkspaceLinkOpener,\n\t\tprivate readonly _getOS: () => OperatingSystem,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@ISearchService private readonly _searchService: ISearchService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService,\n\t\t@IWorkbenchEnvironmentService private readonly _workbenchEnvironmentService: IWorkbenchEnvironmentService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t) {\n\t\tthis._fileQueryBuilder = instantiationService.createInstance(QueryBuilder);\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tconst osPath = osPathModule(this._getOS());\n\t\tconst pathSeparator = osPath.sep;\n\n\t\t// Remove file:/// and any leading ./ or ../ since quick access doesn't understand that format\n\t\tlet text = link.text.replace(/^file:\\/\\/\\/?/, '');\n\t\ttext = osPath.normalize(text).replace(/^(\\.+[\\\\/])+/, '');\n\n\t\t// Try extract any trailing line and column numbers by matching the text against parsed\n\t\t// links. This will give a search link `foo` on a line like `\"foo\", line 10` to open the\n\t\t// quick pick with `foo:10` as the contents.\n\t\t//\n\t\t// This also normalizes the path to remove suffixes like :10 or :5.0-4\n\t\tif (link.contextLine) {\n\t\t\tconst parsedLinks = detectLinks(link.contextLine, this._getOS());\n\t\t\t// Optimistically check that the link _starts with_ the parsed link text. If so,\n\t\t\t// continue to use the parsed link\n\t\t\tconst matchingParsedLink = parsedLinks.find(parsedLink => parsedLink.suffix && link.text.startsWith(parsedLink.path.text));\n\t\t\tif (matchingParsedLink) {\n\t\t\t\tif (matchingParsedLink.suffix?.row !== undefined) {\n\t\t\t\t\t// Normalize the path based on the parsed link\n\t\t\t\t\ttext = matchingParsedLink.path.text;\n\t\t\t\t\ttext += `:${matchingParsedLink.suffix.row}`;\n\t\t\t\t\tif (matchingParsedLink.suffix?.col !== undefined) {\n\t\t\t\t\t\ttext += `:${matchingParsedLink.suffix.col}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Remove `:<one or more non number characters>` from the end of the link.\n\t\t// Examples:\n\t\t// - Ruby stack traces: <link>:in ...\n\t\t// - Grep output: <link>:<result line>\n\t\t// This only happens when the colon is _not_ followed by a forward- or back-slash as that\n\t\t// would break absolute Windows paths (eg. `C:/Users/...`).\n\t\ttext = text.replace(/:[^\\\\/\\d][^\\d]*$/, '');\n\n\t\t// Remove any trailing periods after the line/column numbers, to prevent breaking the search feature, #200257\n\t\t// Examples:\n\t\t// \"Check your code Test.tsx:12:45.\" -> Test.tsx:12:45\n\t\t// \"Check your code Test.tsx:12.\" -> Test.tsx:12\n\n\t\ttext = text.replace(/\\.$/, '');\n\n\t\t// If any of the names of the folders in the workspace matches\n\t\t// a prefix of the link, remove that prefix and continue\n\t\tthis._workspaceContextService.getWorkspace().folders.forEach((folder) => {\n\t\t\tif (text.substring(0, folder.name.length + 1) === folder.name + pathSeparator) {\n\t\t\t\ttext = text.substring(folder.name.length + 1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t\tlet cwdResolvedText = text;\n\t\tif (this._capabilities.has(TerminalCapability.CommandDetection)) {\n\t\t\tcwdResolvedText = updateLinkWithRelativeCwd(this._capabilities, link.bufferRange.start.y, text, osPath, this._logService)?.[0] || text;\n\t\t}\n\n\t\t// Try open the cwd resolved link first\n\t\tif (await this._tryOpenExactLink(cwdResolvedText, link)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If the cwd resolved text didn't match, try find the link without the cwd resolved, for\n\t\t// example when a command prints paths in a sub-directory of the current cwd\n\t\tif (text !== cwdResolvedText) {\n\t\t\tif (await this._tryOpenExactLink(text, link)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Fallback to searching quick access\n\t\treturn this._quickInputService.quickAccess.show(text);\n\t}\n\n\tprivate async _getExactMatch(sanitizedLink: string): Promise<IResourceMatch | undefined> {\n\t\t// Make the link relative to the cwd if it isn't absolute\n\t\tconst os = this._getOS();\n\t\tconst pathModule = osPathModule(os);\n\t\tconst isAbsolute = pathModule.isAbsolute(sanitizedLink);\n\t\tlet absolutePath: string | undefined = isAbsolute ? sanitizedLink : undefined;\n\t\tif (!isAbsolute && this._initialCwd.length > 0) {\n\t\t\tabsolutePath = pathModule.join(this._initialCwd, sanitizedLink);\n\t\t}\n\n\t\t// Try open as an absolute link\n\t\tlet resourceMatch: IResourceMatch | undefined;\n\t\tif (absolutePath) {\n\t\t\tlet normalizedAbsolutePath: string = absolutePath;\n\t\t\tif (os === OperatingSystem.Windows) {\n\t\t\t\tnormalizedAbsolutePath = absolutePath.replace(/\\\\/g, '/');\n\t\t\t\tif (normalizedAbsolutePath.match(/[a-z]:/i)) {\n\t\t\t\t\tnormalizedAbsolutePath = `/${normalizedAbsolutePath}`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet uri: URI;\n\t\t\tif (this._workbenchEnvironmentService.remoteAuthority) {\n\t\t\t\turi = URI.from({\n\t\t\t\t\tscheme: Schemas.vscodeRemote,\n\t\t\t\t\tauthority: this._workbenchEnvironmentService.remoteAuthority,\n\t\t\t\t\tpath: normalizedAbsolutePath\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\turi = URI.file(normalizedAbsolutePath);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst fileStat = await this._fileService.stat(uri);\n\t\t\t\tresourceMatch = { uri, isDirectory: fileStat.isDirectory };\n\t\t\t} catch {\n\t\t\t\t// File or dir doesn't exist, continue on\n\t\t\t}\n\t\t}\n\n\t\t// Search the workspace if an exact match based on the absolute path was not found\n\t\tif (!resourceMatch) {\n\t\t\tconst results = await this._searchService.fileSearch(\n\t\t\t\tthis._fileQueryBuilder.file(this._workspaceContextService.getWorkspace().folders, {\n\t\t\t\t\tfilePattern: sanitizedLink,\n\t\t\t\t\tmaxResults: 2\n\t\t\t\t})\n\t\t\t);\n\t\t\tif (results.results.length > 0) {\n\t\t\t\tif (results.results.length === 1) {\n\t\t\t\t\t// If there's exactly 1 search result, return it regardless of whether it's\n\t\t\t\t\t// exact or partial.\n\t\t\t\t\tresourceMatch = { uri: results.results[0].resource };\n\t\t\t\t} else if (!isAbsolute) {\n\t\t\t\t\t// For non-absolute links, exact link matching is allowed only if there is a single an exact\n\t\t\t\t\t// file match. For example searching for `foo.txt` when there is no cwd information\n\t\t\t\t\t// available (ie. only the initial cwd) should open the file directly only if there is a\n\t\t\t\t\t// single file names `foo.txt` anywhere within the folder. These same rules apply to\n\t\t\t\t\t// relative paths with folders such as `src/foo.txt`.\n\t\t\t\t\tconst results = await this._searchService.fileSearch(\n\t\t\t\t\t\tthis._fileQueryBuilder.file(this._workspaceContextService.getWorkspace().folders, {\n\t\t\t\t\t\t\tfilePattern: `**/${sanitizedLink}`\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\t// Find an exact match if it exists\n\t\t\t\t\tconst exactMatches = results.results.filter(e => e.resource.toString().endsWith(sanitizedLink));\n\t\t\t\t\tif (exactMatches.length === 1) {\n\t\t\t\t\t\tresourceMatch = { uri: exactMatches[0].resource };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resourceMatch;\n\t}\n\n\tprivate async _tryOpenExactLink(text: string, link: ITerminalSimpleLink): Promise<boolean> {\n\t\tconst sanitizedLink = text.replace(/:\\d+(:\\d+)?$/, '');\n\t\ttry {\n\t\t\tconst result = await this._getExactMatch(sanitizedLink);\n\t\t\tif (result) {\n\t\t\t\tconst { uri, isDirectory } = result;\n\t\t\t\tconst linkToOpen = {\n\t\t\t\t\t// Use the absolute URI's path here so the optional line/col get detected\n\t\t\t\t\ttext: result.uri.path + (text.match(/:\\d+(:\\d+)?$/)?.[0] || ''),\n\t\t\t\t\turi,\n\t\t\t\t\tbufferRange: link.bufferRange,\n\t\t\t\t\ttype: link.type\n\t\t\t\t};\n\t\t\t\tif (uri) {\n\t\t\t\t\tawait (isDirectory ? this._localFolderInWorkspaceOpener.open(linkToOpen) : this._localFileOpener.open(linkToOpen));\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch {\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t}\n}\n\ninterface IResourceMatch {\n\turi: URI;\n\tisDirectory?: boolean;\n}\n\nexport class TerminalUrlLinkOpener implements ITerminalLinkOpener {\n\tconstructor(\n\t\tprivate readonly _isRemote: boolean,\n\t\tprivate readonly _localFileOpener: TerminalLocalFileLinkOpener,\n\t\tprivate readonly _localFolderInWorkspaceOpener: TerminalLocalFolderInWorkspaceLinkOpener,\n\t\tprivate readonly _localFolderOutsideWorkspaceOpener: TerminalLocalFolderOutsideWorkspaceLinkOpener,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IUriIdentityService private readonly _uriIdentityService: IUriIdentityService,\n\t\t@IWorkspaceContextService private readonly _workspaceContextService: IWorkspaceContextService,\n\t\t@ITerminalLogService private readonly _logService: ITerminalLogService,\n\t) {\n\t}\n\n\tasync open(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\tthrow new Error('Tried to open a url without a resolved URI');\n\t\t}\n\t\t// Handle file:// URIs by delegating to appropriate file/folder openers\n\t\tif (link.uri.scheme === Schemas.file) {\n\t\t\treturn this._openFileSchemeLink(link);\n\t\t}\n\t\t// It's important to use the raw string value here to avoid converting pre-encoded values\n\t\t// from the URL like `%2B` -> `+`.\n\t\tthis._openerService.open(link.text, {\n\t\t\tallowTunneling: this._isRemote && this._configurationService.getValue('remote.forwardOnOpen'),\n\t\t\tallowContributedOpeners: true,\n\t\t\topenExternal: true\n\t\t});\n\t}\n\n\tprivate async _openFileSchemeLink(link: ITerminalSimpleLink): Promise<void> {\n\t\tif (!link.uri) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst stat = await this._fileService.stat(link.uri);\n\t\t\tconst isDirectory = stat.isDirectory;\n\t\t\tconst linkType = getTerminalLinkType(\n\t\t\t\tlink.uri,\n\t\t\t\tisDirectory,\n\t\t\t\tthis._uriIdentityService,\n\t\t\t\tthis._workspaceContextService\n\t\t\t);\n\n\t\t\t// Delegate to appropriate opener based on link type\n\t\t\tswitch (linkType) {\n\t\t\t\tcase TerminalBuiltinLinkType.LocalFile:\n\t\t\t\t\tawait this._localFileOpener.open(link);\n\t\t\t\t\treturn;\n\t\t\t\tcase TerminalBuiltinLinkType.LocalFolderInWorkspace:\n\t\t\t\t\tawait this._localFolderInWorkspaceOpener.open(link);\n\t\t\t\t\treturn;\n\t\t\t\tcase TerminalBuiltinLinkType.LocalFolderOutsideWorkspace:\n\t\t\t\t\tawait this._localFolderOutsideWorkspaceOpener.open(link);\n\t\t\t\t\treturn;\n\t\t\t\tcase TerminalBuiltinLinkType.Url:\n\t\t\t\t\tawait this.open(link);\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis._logService.warn('Open file via native file explorer');\n\t\t}\n\t\tthis._openerService.open(link.text, {\n\t\t\tallowTunneling: this._isRemote && this._configurationService.getValue('remote.forwardOnOpen'),\n\t\t\tallowContributedOpeners: true,\n\t\t\topenExternal: true\n\t\t});\n\t}\n}\n"]}