{"version":3,"sources":["vs/workbench/contrib/terminalContrib/links/browser/terminal.links.contribution.ts"],"names":[],"mappings":"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","file":"terminal.links.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { Event } from '../../../../../base/common/event.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { AccessibleViewProviderId } from '../../../../../platform/accessibility/browser/accessibleView.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { InstantiationType, registerSingleton } from '../../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { accessibleViewCurrentProviderId, accessibleViewIsShown } from '../../../accessibility/browser/accessibilityConfiguration.js';\nimport { ITerminalContribution, ITerminalInstance, IXtermTerminal, isDetachedTerminalInstance } from '../../../terminal/browser/terminal.js';\nimport { registerActiveInstanceAction } from '../../../terminal/browser/terminalActions.js';\nimport { registerTerminalContribution, type IDetachedCompatibleTerminalContributionContext, type ITerminalContributionContext } from '../../../terminal/browser/terminalExtensions.js';\nimport { isTerminalProcessManager } from '../../../terminal/common/terminal.js';\nimport { TerminalContextKeys } from '../../../terminal/common/terminalContextKey.js';\nimport { terminalStrings } from '../../../terminal/common/terminalStrings.js';\nimport { TerminalLinksCommandId } from '../common/terminal.links.js';\nimport { ITerminalLinkProviderService } from './links.js';\nimport { IDetectedLinks, TerminalLinkManager } from './terminalLinkManager.js';\nimport { TerminalLinkProviderService } from './terminalLinkProviderService.js';\nimport { TerminalLinkQuickpick } from './terminalLinkQuickpick.js';\nimport { TerminalLinkResolver } from './terminalLinkResolver.js';\n\n// #region Services\n\nregisterSingleton(ITerminalLinkProviderService, TerminalLinkProviderService, InstantiationType.Delayed);\n\n// #endregion\n\n// #region Terminal Contributions\n\nclass TerminalLinkContribution extends DisposableStore implements ITerminalContribution {\n\tstatic readonly ID = 'terminal.link';\n\n\tstatic get(instance: ITerminalInstance): TerminalLinkContribution | null {\n\t\treturn instance.getContribution<TerminalLinkContribution>(TerminalLinkContribution.ID);\n\t}\n\n\tprivate _linkManager: TerminalLinkManager | undefined;\n\tprivate _terminalLinkQuickpick: TerminalLinkQuickpick | undefined;\n\tprivate _linkResolver: TerminalLinkResolver;\n\n\tconstructor(\n\t\tprivate readonly _ctx: ITerminalContributionContext | IDetachedCompatibleTerminalContributionContext,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalLinkProviderService private readonly _terminalLinkProviderService: ITerminalLinkProviderService,\n\t) {\n\t\tsuper();\n\t\tthis._linkResolver = this._instantiationService.createInstance(TerminalLinkResolver);\n\t}\n\n\txtermReady(xterm: IXtermTerminal & { raw: RawXtermTerminal }): void {\n\t\tconst linkManager = this._linkManager = this.add(this._instantiationService.createInstance(TerminalLinkManager, xterm.raw, this._ctx.processManager, this._ctx.instance.capabilities, this._linkResolver));\n\n\t\t// Set widget manager\n\t\tif (isTerminalProcessManager(this._ctx.processManager)) {\n\t\t\tconst disposable = linkManager.add(Event.once(this._ctx.processManager.onProcessReady)(() => {\n\t\t\t\tlinkManager.setWidgetManager(this._ctx.widgetManager);\n\t\t\t\tthis.delete(disposable);\n\t\t\t}));\n\t\t} else {\n\t\t\tlinkManager.setWidgetManager(this._ctx.widgetManager);\n\t\t}\n\n\t\t// Attach the external link provider to the instance and listen for changes\n\t\tif (!isDetachedTerminalInstance(this._ctx.instance)) {\n\t\t\tfor (const linkProvider of this._terminalLinkProviderService.linkProviders) {\n\t\t\t\tlinkManager.externalProvideLinksCb = linkProvider.provideLinks.bind(linkProvider, this._ctx.instance);\n\t\t\t}\n\t\t\tlinkManager.add(this._terminalLinkProviderService.onDidAddLinkProvider(e => {\n\t\t\t\tlinkManager.externalProvideLinksCb = e.provideLinks.bind(e, this._ctx.instance as ITerminalInstance);\n\t\t\t}));\n\t\t}\n\t\tlinkManager.add(this._terminalLinkProviderService.onDidRemoveLinkProvider(() => linkManager.externalProvideLinksCb = undefined));\n\t}\n\n\tasync showLinkQuickpick(extended?: boolean): Promise<void> {\n\t\tif (!this._terminalLinkQuickpick) {\n\t\t\tthis._terminalLinkQuickpick = this.add(this._instantiationService.createInstance(TerminalLinkQuickpick));\n\t\t\tthis._terminalLinkQuickpick.onDidRequestMoreLinks(() => {\n\t\t\t\tthis.showLinkQuickpick(true);\n\t\t\t});\n\t\t}\n\t\tconst links = await this._getLinks();\n\t\treturn await this._terminalLinkQuickpick.show(this._ctx.instance, links);\n\t}\n\n\tprivate async _getLinks(): Promise<{ viewport: IDetectedLinks; all: Promise<IDetectedLinks> }> {\n\t\tif (!this._linkManager) {\n\t\t\tthrow new Error('terminal links are not ready, cannot generate link quick pick');\n\t\t}\n\t\treturn this._linkManager.getLinks();\n\t}\n\n\tasync openRecentLink(type: 'localFile' | 'url'): Promise<void> {\n\t\tif (!this._linkManager) {\n\t\t\tthrow new Error('terminal links are not ready, cannot open a link');\n\t\t}\n\t\tthis._linkManager.openRecentLink(type);\n\t}\n}\n\nregisterTerminalContribution(TerminalLinkContribution.ID, TerminalLinkContribution, true);\n\n// #endregion\n\n// #region Actions\n\nconst category = terminalStrings.actionCategory;\n\nregisterActiveInstanceAction({\n\tid: TerminalLinksCommandId.OpenDetectedLink,\n\ttitle: localize2('workbench.action.terminal.openDetectedLink', 'Open Detected Link...'),\n\tf1: true,\n\tcategory,\n\tprecondition: TerminalContextKeys.terminalHasBeenCreated,\n\tkeybinding: [{\n\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyO,\n\t\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\t\twhen: TerminalContextKeys.focus\n\t}, {\n\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyG,\n\t\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\t\twhen: ContextKeyExpr.and(accessibleViewIsShown, ContextKeyExpr.equals(accessibleViewCurrentProviderId.key, AccessibleViewProviderId.Terminal))\n\t},\n\t],\n\trun: (activeInstance) => TerminalLinkContribution.get(activeInstance)?.showLinkQuickpick()\n});\nregisterActiveInstanceAction({\n\tid: TerminalLinksCommandId.OpenWebLink,\n\ttitle: localize2('workbench.action.terminal.openLastUrlLink', 'Open Last URL Link'),\n\tmetadata: {\n\t\tdescription: localize2('workbench.action.terminal.openLastUrlLink.description', 'Opens the last detected URL/URI link in the terminal')\n\t},\n\tf1: true,\n\tcategory,\n\tprecondition: TerminalContextKeys.terminalHasBeenCreated,\n\trun: (activeInstance) => TerminalLinkContribution.get(activeInstance)?.openRecentLink('url')\n});\nregisterActiveInstanceAction({\n\tid: TerminalLinksCommandId.OpenFileLink,\n\ttitle: localize2('workbench.action.terminal.openLastLocalFileLink', 'Open Last Local File Link'),\n\tf1: true,\n\tcategory,\n\tprecondition: TerminalContextKeys.terminalHasBeenCreated,\n\trun: (activeInstance) => TerminalLinkContribution.get(activeInstance)?.openRecentLink('localFile')\n});\n\n// #endregion\n"]}