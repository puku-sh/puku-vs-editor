{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/terminalContrib/links/test/browser/terminalLinkOpeners.test.ts","vs/workbench/contrib/terminalContrib/links/test/browser/terminalLinkOpeners.test.ts"],"names":[],"mappings":"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","file":"terminalLinkOpeners.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual } from 'assert';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport { OperatingSystem } from '../../../../../../base/common/platform.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { ITextEditorSelection, ITextResourceEditorInput } from '../../../../../../platform/editor/common/editor.js';\nimport { IFileService, IFileStatWithPartialMetadata } from '../../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../../platform/files/common/fileService.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILogService, NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { IQuickInputService } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { IWorkspaceContextService } from '../../../../../../platform/workspace/common/workspace.js';\nimport { CommandDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/commandDetectionCapability.js';\nimport { TerminalBuiltinLinkType } from '../../browser/links.js';\nimport { TerminalLocalFileLinkOpener, TerminalLocalFolderInWorkspaceLinkOpener, TerminalSearchLinkOpener } from '../../browser/terminalLinkOpeners.js';\nimport { TerminalCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../../../services/environment/common/environmentService.js';\nimport { TestContextService } from '../../../../../test/common/workbenchTestServices.js';\nimport type { Terminal } from '@xterm/xterm';\nimport { IFileQuery, ISearchComplete, ISearchService } from '../../../../../services/search/common/search.js';\nimport { SearchService } from '../../../../../services/search/common/searchService.js';\nimport { ITerminalLogService } from '../../../../../../platform/terminal/common/terminal.js';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TerminalCommand } from '../../../../../../platform/terminal/common/capabilities/commandDetection/terminalCommand.js';\nimport type { IMarker } from '@xterm/headless';\nimport { generateUuid } from '../../../../../../base/common/uuid.js';\n\ninterface ITerminalLinkActivationResult {\n\tsource: 'editor' | 'search';\n\tlink: string;\n\tselection?: ITextEditorSelection;\n}\n\nclass TestCommandDetectionCapability extends CommandDetectionCapability {\n\tsetCommands(commands: TerminalCommand[]) {\n\t\tthis._commands = commands;\n\t}\n}\n\nclass TestFileService extends FileService {\n\tprivate _files: URI[] | '*' = '*';\n\toverride async stat(resource: URI): Promise<IFileStatWithPartialMetadata> {\n\t\tif (this._files === '*' || this._files.some(e => e.toString() === resource.toString())) {\n\t\t\treturn { isFile: true, isDirectory: false, isSymbolicLink: false } as IFileStatWithPartialMetadata;\n\t\t}\n\t\tthrow new Error('ENOENT');\n\t}\n\tsetFiles(files: URI[] | '*'): void {\n\t\tthis._files = files;\n\t}\n}\n\nclass TestSearchService extends SearchService {\n\tprivate _searchResult: ISearchComplete | undefined;\n\toverride async fileSearch(query: IFileQuery): Promise<ISearchComplete> {\n\t\treturn this._searchResult!;\n\t}\n\tsetSearchResult(result: ISearchComplete) {\n\t\tthis._searchResult = result;\n\t}\n}\n\nclass TestTerminalSearchLinkOpener extends TerminalSearchLinkOpener {\n\tsetFileQueryBuilder(value: any) {\n\t\tthis._fileQueryBuilder = value;\n\t}\n}\n\nsuite('Workbench - TerminalLinkOpeners', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet fileService: TestFileService;\n\tlet searchService: TestSearchService;\n\tlet activationResult: ITerminalLinkActivationResult | undefined;\n\tlet xterm: Terminal;\n\n\tsetup(async () => {\n\t\tinstantiationService = store.add(new TestInstantiationService());\n\t\tfileService = store.add(new TestFileService(new NullLogService()));\n\t\tsearchService = store.add(new TestSearchService(null!, null!, null!, null!, null!, null!, null!));\n\t\tinstantiationService.set(IFileService, fileService);\n\t\tinstantiationService.set(ILogService, new NullLogService());\n\t\tinstantiationService.set(ISearchService, searchService);\n\t\tinstantiationService.set(IWorkspaceContextService, new TestContextService());\n\t\tinstantiationService.stub(ITerminalLogService, new NullLogService());\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, {\n\t\t\tremoteAuthority: undefined\n\t\t} as Partial<IWorkbenchEnvironmentService>);\n\t\t// Allow intercepting link activations\n\t\tactivationResult = undefined;\n\t\tinstantiationService.stub(IQuickInputService, {\n\t\t\tquickAccess: {\n\t\t\t\tshow(link: string) {\n\t\t\t\t\tactivationResult = { link, source: 'search' };\n\t\t\t\t}\n\t\t\t}\n\t\t} as Partial<IQuickInputService>);\n\t\tinstantiationService.stub(IEditorService, {\n\t\t\tasync openEditor(editor: ITextResourceEditorInput): Promise<any> {\n\t\t\t\tactivationResult = {\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tlink: editor.resource?.toString()\n\t\t\t\t};\n\t\t\t\t// Only assert on selection if it's not the default value\n\t\t\t\tif (editor.options?.selection && (editor.options.selection.startColumn !== 1 || editor.options.selection.startLineNumber !== 1)) {\n\t\t\t\t\tactivationResult.selection = editor.options.selection;\n\t\t\t\t}\n\t\t\t}\n\t\t} as Partial<IEditorService>);\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\txterm = store.add(new TerminalCtor({ allowProposedApi: true }));\n\t});\n\n\tsuite('TerminalSearchLinkOpener', () => {\n\t\tlet opener: TestTerminalSearchLinkOpener;\n\t\tlet capabilities: TerminalCapabilityStore;\n\t\tlet commandDetection: TestCommandDetectionCapability;\n\t\tlet localFileOpener: TerminalLocalFileLinkOpener;\n\n\t\tsetup(() => {\n\t\t\tcapabilities = store.add(new TerminalCapabilityStore());\n\t\t\tcommandDetection = store.add(instantiationService.createInstance(TestCommandDetectionCapability, xterm));\n\t\t\tcapabilities.add(TerminalCapability.CommandDetection, commandDetection);\n\t\t});\n\n\t\ttest('should open single exact match against cwd when searching if it exists when command detection cwd is available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t// Set a fake detected command starting as line 0 to establish the cwd\n\t\t\tcommandDetection.setCommands([new TerminalCommand(xterm, {\n\t\t\t\tcommand: '',\n\t\t\t\tcommandLineConfidence: 'low',\n\t\t\t\texitCode: 0,\n\t\t\t\tcommandStartLineContent: '',\n\t\t\t\tmarkProperties: {},\n\t\t\t\tisTrusted: true,\n\t\t\t\tcwd: '/initial/cwd',\n\t\t\t\ttimestamp: 0,\n\t\t\t\tduration: 0,\n\t\t\t\texecutedX: undefined,\n\t\t\t\tstartX: undefined,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tmarker: {\n\t\t\t\t\tline: 0\n\t\t\t\t} as Partial<IMarker> as any,\n\t\t\t\tid: generateUuid()\n\t\t\t})]);\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.txt' })\n\t\t\t]);\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'foo/bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should open single exact match against cwd for paths containing a separator when searching if it exists, even when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.txt' })\n\t\t\t]);\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'foo/bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should open single exact match against any folder for paths not containing a separator when there is a single search result, even when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tcapabilities.remove(TerminalCapability.CommandDetection);\n\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/baz.txt' })\n\t\t\t]);\n\t\t\tsearchService.setSearchResult({\n\t\t\t\tmessages: [],\n\t\t\t\tresults: [\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }) }\n\t\t\t\t]\n\t\t\t});\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should open single exact match against any folder for paths not containing a separator when there are multiple search results, even when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tcapabilities.remove(TerminalCapability.CommandDetection);\n\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.test.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.test.txt' })\n\t\t\t]);\n\t\t\tsearchService.setSearchResult({\n\t\t\t\tmessages: [],\n\t\t\t\tresults: [\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }) },\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.test.txt' }) },\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.test.txt' }) }\n\t\t\t\t]\n\t\t\t});\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should not open single exact match for paths not containing a when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.txt' })\n\t\t\t]);\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'bar.txt',\n\t\t\t\tsource: 'search'\n\t\t\t});\n\t\t});\n\n\t\tsuite('macOS/Linux', () => {\n\t\t\tsetup(() => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t});\n\n\t\t\ttest('should apply the cwd to the link only when the file exists and cwdDetection is enabled', async () => {\n\t\t\t\tconst cwd = '/Users/home/folder';\n\t\t\t\tconst absoluteFile = '/Users/home/folder/file.txt';\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: absoluteFile }),\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/Users/home/folder/other/file.txt' })\n\t\t\t\t]);\n\n\t\t\t\t// Set a fake detected command starting as line 0 to establish the cwd\n\t\t\t\tcommandDetection.setCommands([new TerminalCommand(xterm, {\n\t\t\t\t\tcommand: '',\n\t\t\t\t\tcommandLineConfidence: 'low',\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tcwd,\n\t\t\t\t\ttimestamp: 0,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\texecutedX: undefined,\n\t\t\t\t\tstartX: undefined,\n\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\tmarker: {\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t} as Partial<IMarker> as any,\n\t\t\t\t\texitCode: 0,\n\t\t\t\t\tcommandStartLineContent: '',\n\t\t\t\t\tmarkProperties: {},\n\t\t\t\t\tid: generateUuid()\n\t\t\t\t})]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///Users/home/folder/file.txt',\n\t\t\t\t\tsource: 'editor'\n\t\t\t\t});\n\n\t\t\t\t// Clear detected commands and ensure the same request results in a search since there are 2 matches\n\t\t\t\tcommandDetection.setCommands([]);\n\t\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\t\tsearchService.setSearchResult({\n\t\t\t\t\tmessages: [],\n\t\t\t\t\tresults: [\n\t\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: 'file:///Users/home/folder/file.txt' }) },\n\t\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: 'file:///Users/home/folder/other/file.txt' }) }\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file.txt',\n\t\t\t\t\tsource: 'search'\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links in a workspace containing spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/space folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/space folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove trailing periods', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Test for https://github.com/microsoft/vscode/pull/200919#discussion_r1428124196\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines incl singular spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract line numbers from links and remove ruby stack traces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.rb' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.rb:30:in `<main>`',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.rb',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 30,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t});\n\n\t\tsuite('Windows', () => {\n\t\t\tsetup(() => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t});\n\n\t\t\ttest('should apply the cwd to the link only when the file exists and cwdDetection is enabled', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:\\\\Users', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\n\t\t\t\tconst cwd = 'c:\\\\Users\\\\home\\\\folder';\n\t\t\t\tconst absoluteFile = 'c:\\\\Users\\\\home\\\\folder\\\\file.txt';\n\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.file('/c:/Users/home/folder/file.txt')\n\t\t\t\t]);\n\n\t\t\t\t// Set a fake detected command starting as line 0 to establish the cwd\n\t\t\t\tcommandDetection.setCommands([new TerminalCommand(xterm, {\n\t\t\t\t\texitCode: 0,\n\t\t\t\t\tcommandStartLineContent: '',\n\t\t\t\t\tmarkProperties: {},\n\t\t\t\t\tcommand: '',\n\t\t\t\t\tcommandLineConfidence: 'low',\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tcwd,\n\t\t\t\t\texecutedX: undefined,\n\t\t\t\t\tstartX: undefined,\n\t\t\t\t\ttimestamp: 0,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\tmarker: {\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t} as Partial<IMarker> as any,\n\t\t\t\t\tid: generateUuid()\n\t\t\t\t})]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/Users/home/folder/file.txt',\n\t\t\t\t\tsource: 'editor'\n\t\t\t\t});\n\n\t\t\t\t// Clear detected commands and ensure the same request results in a search\n\t\t\t\tcommandDetection.setCommands([]);\n\t\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\t\tsearchService.setSearchResult({\n\t\t\t\t\tmessages: [],\n\t\t\t\t\tresults: [\n\t\t\t\t\t\t{ resource: URI.file(absoluteFile) },\n\t\t\t\t\t\t{ resource: URI.file('/c:/Users/home/folder/other/file.txt') }\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file.txt',\n\t\t\t\t\tsource: 'search'\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links in a workspace containing spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/space folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/space folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:5',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove trailing periods', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:2:5.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 2,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:2.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 2,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:5:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Test for https://github.com/microsoft/vscode/pull/200919#discussion_r1428124196\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines incl singular spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:5: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract line numbers from links and remove ruby stack traces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.rb' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.rb:30:in `<main>`',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.rb',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1, // Since Ruby doesn't appear to put columns in stack traces, this should be 1\n\t\t\t\t\t\tstartLineNumber: 30,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.rb:30:in `<main>`',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.rb',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1, // Since Ruby doesn't appear to put columns in stack traces, this should be 1\n\t\t\t\t\t\tstartLineNumber: 30,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual } from 'assert';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport { OperatingSystem } from '../../../../../../base/common/platform.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { ITextEditorSelection, ITextResourceEditorInput } from '../../../../../../platform/editor/common/editor.js';\nimport { IFileService, IFileStatWithPartialMetadata } from '../../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../../platform/files/common/fileService.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILogService, NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { IQuickInputService } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { IWorkspaceContextService } from '../../../../../../platform/workspace/common/workspace.js';\nimport { CommandDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/commandDetectionCapability.js';\nimport { TerminalBuiltinLinkType } from '../../browser/links.js';\nimport { TerminalLocalFileLinkOpener, TerminalLocalFolderInWorkspaceLinkOpener, TerminalSearchLinkOpener } from '../../browser/terminalLinkOpeners.js';\nimport { TerminalCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../../../services/environment/common/environmentService.js';\nimport { TestContextService } from '../../../../../test/common/workbenchTestServices.js';\nimport type { Terminal } from '@xterm/xterm';\nimport { IFileQuery, ISearchComplete, ISearchService } from '../../../../../services/search/common/search.js';\nimport { SearchService } from '../../../../../services/search/common/searchService.js';\nimport { ITerminalLogService } from '../../../../../../platform/terminal/common/terminal.js';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TerminalCommand } from '../../../../../../platform/terminal/common/capabilities/commandDetection/terminalCommand.js';\nimport type { IMarker } from '@xterm/headless';\nimport { generateUuid } from '../../../../../../base/common/uuid.js';\n\ninterface ITerminalLinkActivationResult {\n\tsource: 'editor' | 'search';\n\tlink: string;\n\tselection?: ITextEditorSelection;\n}\n\nclass TestCommandDetectionCapability extends CommandDetectionCapability {\n\tsetCommands(commands: TerminalCommand[]) {\n\t\tthis._commands = commands;\n\t}\n}\n\nclass TestFileService extends FileService {\n\tprivate _files: URI[] | '*' = '*';\n\toverride async stat(resource: URI): Promise<IFileStatWithPartialMetadata> {\n\t\tif (this._files === '*' || this._files.some(e => e.toString() === resource.toString())) {\n\t\t\treturn { isFile: true, isDirectory: false, isSymbolicLink: false } as IFileStatWithPartialMetadata;\n\t\t}\n\t\tthrow new Error('ENOENT');\n\t}\n\tsetFiles(files: URI[] | '*'): void {\n\t\tthis._files = files;\n\t}\n}\n\nclass TestSearchService extends SearchService {\n\tprivate _searchResult: ISearchComplete | undefined;\n\toverride async fileSearch(query: IFileQuery): Promise<ISearchComplete> {\n\t\treturn this._searchResult!;\n\t}\n\tsetSearchResult(result: ISearchComplete) {\n\t\tthis._searchResult = result;\n\t}\n}\n\nclass TestTerminalSearchLinkOpener extends TerminalSearchLinkOpener {\n\tsetFileQueryBuilder(value: any) {\n\t\tthis._fileQueryBuilder = value;\n\t}\n}\n\nsuite('Workbench - TerminalLinkOpeners', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet fileService: TestFileService;\n\tlet searchService: TestSearchService;\n\tlet activationResult: ITerminalLinkActivationResult | undefined;\n\tlet xterm: Terminal;\n\n\tsetup(async () => {\n\t\tinstantiationService = store.add(new TestInstantiationService());\n\t\tfileService = store.add(new TestFileService(new NullLogService()));\n\t\tsearchService = store.add(new TestSearchService(null!, null!, null!, null!, null!, null!, null!));\n\t\tinstantiationService.set(IFileService, fileService);\n\t\tinstantiationService.set(ILogService, new NullLogService());\n\t\tinstantiationService.set(ISearchService, searchService);\n\t\tinstantiationService.set(IWorkspaceContextService, new TestContextService());\n\t\tinstantiationService.stub(ITerminalLogService, new NullLogService());\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, {\n\t\t\tremoteAuthority: undefined\n\t\t} as Partial<IWorkbenchEnvironmentService>);\n\t\t// Allow intercepting link activations\n\t\tactivationResult = undefined;\n\t\tinstantiationService.stub(IQuickInputService, {\n\t\t\tquickAccess: {\n\t\t\t\tshow(link: string) {\n\t\t\t\t\tactivationResult = { link, source: 'search' };\n\t\t\t\t}\n\t\t\t}\n\t\t} as Partial<IQuickInputService>);\n\t\tinstantiationService.stub(IEditorService, {\n\t\t\tasync openEditor(editor: ITextResourceEditorInput): Promise<any> {\n\t\t\t\tactivationResult = {\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tlink: editor.resource?.toString()\n\t\t\t\t};\n\t\t\t\t// Only assert on selection if it's not the default value\n\t\t\t\tif (editor.options?.selection && (editor.options.selection.startColumn !== 1 || editor.options.selection.startLineNumber !== 1)) {\n\t\t\t\t\tactivationResult.selection = editor.options.selection;\n\t\t\t\t}\n\t\t\t}\n\t\t} as Partial<IEditorService>);\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\txterm = store.add(new TerminalCtor({ allowProposedApi: true }));\n\t});\n\n\tsuite('TerminalSearchLinkOpener', () => {\n\t\tlet opener: TestTerminalSearchLinkOpener;\n\t\tlet capabilities: TerminalCapabilityStore;\n\t\tlet commandDetection: TestCommandDetectionCapability;\n\t\tlet localFileOpener: TerminalLocalFileLinkOpener;\n\n\t\tsetup(() => {\n\t\t\tcapabilities = store.add(new TerminalCapabilityStore());\n\t\t\tcommandDetection = store.add(instantiationService.createInstance(TestCommandDetectionCapability, xterm));\n\t\t\tcapabilities.add(TerminalCapability.CommandDetection, commandDetection);\n\t\t});\n\n\t\ttest('should open single exact match against cwd when searching if it exists when command detection cwd is available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t// Set a fake detected command starting as line 0 to establish the cwd\n\t\t\tcommandDetection.setCommands([new TerminalCommand(xterm, {\n\t\t\t\tcommand: '',\n\t\t\t\tcommandLineConfidence: 'low',\n\t\t\t\texitCode: 0,\n\t\t\t\tcommandStartLineContent: '',\n\t\t\t\tmarkProperties: {},\n\t\t\t\tisTrusted: true,\n\t\t\t\tcwd: '/initial/cwd',\n\t\t\t\ttimestamp: 0,\n\t\t\t\tduration: 0,\n\t\t\t\texecutedX: undefined,\n\t\t\t\tstartX: undefined,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tmarker: {\n\t\t\t\t\tline: 0\n\t\t\t\t} as Partial<IMarker> as any,\n\t\t\t\tid: generateUuid()\n\t\t\t})]);\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.txt' })\n\t\t\t]);\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'foo/bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should open single exact match against cwd for paths containing a separator when searching if it exists, even when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.txt' })\n\t\t\t]);\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'foo/bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should open single exact match against any folder for paths not containing a separator when there is a single search result, even when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tcapabilities.remove(TerminalCapability.CommandDetection);\n\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/baz.txt' })\n\t\t\t]);\n\t\t\tsearchService.setSearchResult({\n\t\t\t\tmessages: [],\n\t\t\t\tresults: [\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }) }\n\t\t\t\t]\n\t\t\t});\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should open single exact match against any folder for paths not containing a separator when there are multiple search results, even when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tcapabilities.remove(TerminalCapability.CommandDetection);\n\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.test.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.test.txt' })\n\t\t\t]);\n\t\t\tsearchService.setSearchResult({\n\t\t\t\tmessages: [],\n\t\t\t\tresults: [\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }) },\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.test.txt' }) },\n\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.test.txt' }) }\n\t\t\t\t]\n\t\t\t});\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'file:///initial/cwd/foo/bar.txt',\n\t\t\t\tsource: 'editor'\n\t\t\t});\n\t\t});\n\n\t\ttest('should not open single exact match for paths not containing a when command detection isn\\'t available', async () => {\n\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/initial/cwd', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\tfileService.setFiles([\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo/bar.txt' }),\n\t\t\t\tURI.from({ scheme: Schemas.file, path: '/initial/cwd/foo2/bar.txt' })\n\t\t\t]);\n\t\t\tawait opener.open({\n\t\t\t\ttext: 'bar.txt',\n\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t});\n\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\tlink: 'bar.txt',\n\t\t\t\tsource: 'search'\n\t\t\t});\n\t\t});\n\n\t\tsuite('macOS/Linux', () => {\n\t\t\tsetup(() => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t});\n\n\t\t\ttest('should apply the cwd to the link only when the file exists and cwdDetection is enabled', async () => {\n\t\t\t\tconst cwd = '/Users/home/folder';\n\t\t\t\tconst absoluteFile = '/Users/home/folder/file.txt';\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: absoluteFile }),\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/Users/home/folder/other/file.txt' })\n\t\t\t\t]);\n\n\t\t\t\t// Set a fake detected command starting as line 0 to establish the cwd\n\t\t\t\tcommandDetection.setCommands([new TerminalCommand(xterm, {\n\t\t\t\t\tcommand: '',\n\t\t\t\t\tcommandLineConfidence: 'low',\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tcwd,\n\t\t\t\t\ttimestamp: 0,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\texecutedX: undefined,\n\t\t\t\t\tstartX: undefined,\n\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\tmarker: {\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t} as Partial<IMarker> as any,\n\t\t\t\t\texitCode: 0,\n\t\t\t\t\tcommandStartLineContent: '',\n\t\t\t\t\tmarkProperties: {},\n\t\t\t\t\tid: generateUuid()\n\t\t\t\t})]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///Users/home/folder/file.txt',\n\t\t\t\t\tsource: 'editor'\n\t\t\t\t});\n\n\t\t\t\t// Clear detected commands and ensure the same request results in a search since there are 2 matches\n\t\t\t\tcommandDetection.setCommands([]);\n\t\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\t\tsearchService.setSearchResult({\n\t\t\t\t\tmessages: [],\n\t\t\t\t\tresults: [\n\t\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: 'file:///Users/home/folder/file.txt' }) },\n\t\t\t\t\t\t{ resource: URI.from({ scheme: Schemas.file, path: 'file:///Users/home/folder/other/file.txt' }) }\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file.txt',\n\t\t\t\t\tsource: 'search'\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links in a workspace containing spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/space folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/space folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove trailing periods', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Test for https://github.com/microsoft/vscode/pull/200919#discussion_r1428124196\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines incl singular spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract line numbers from links and remove ruby stack traces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Linux);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: '/folder/foo/bar.rb' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.rb:30:in `<main>`',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///folder/foo/bar.rb',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 30,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t});\n\n\t\tsuite('Windows', () => {\n\t\t\tsetup(() => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, '', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t});\n\n\t\t\ttest('should apply the cwd to the link only when the file exists and cwdDetection is enabled', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:\\\\Users', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\n\t\t\t\tconst cwd = 'c:\\\\Users\\\\home\\\\folder';\n\t\t\t\tconst absoluteFile = 'c:\\\\Users\\\\home\\\\folder\\\\file.txt';\n\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.file('/c:/Users/home/folder/file.txt')\n\t\t\t\t]);\n\n\t\t\t\t// Set a fake detected command starting as line 0 to establish the cwd\n\t\t\t\tcommandDetection.setCommands([new TerminalCommand(xterm, {\n\t\t\t\t\texitCode: 0,\n\t\t\t\t\tcommandStartLineContent: '',\n\t\t\t\t\tmarkProperties: {},\n\t\t\t\t\tcommand: '',\n\t\t\t\t\tcommandLineConfidence: 'low',\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tcwd,\n\t\t\t\t\texecutedX: undefined,\n\t\t\t\t\tstartX: undefined,\n\t\t\t\t\ttimestamp: 0,\n\t\t\t\t\tduration: 0,\n\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\tmarker: {\n\t\t\t\t\t\tline: 0\n\t\t\t\t\t} as Partial<IMarker> as any,\n\t\t\t\t\tid: generateUuid()\n\t\t\t\t})]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/Users/home/folder/file.txt',\n\t\t\t\t\tsource: 'editor'\n\t\t\t\t});\n\n\t\t\t\t// Clear detected commands and ensure the same request results in a search\n\t\t\t\tcommandDetection.setCommands([]);\n\t\t\t\topener.setFileQueryBuilder({ file: () => null! });\n\t\t\t\tsearchService.setSearchResult({\n\t\t\t\t\tmessages: [],\n\t\t\t\t\tresults: [\n\t\t\t\t\t\t{ resource: URI.file(absoluteFile) },\n\t\t\t\t\t\t{ resource: URI.file('/c:/Users/home/folder/other/file.txt') }\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: 'file.txt',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file.txt',\n\t\t\t\t\tsource: 'search'\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links in a workspace containing spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/space folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/space folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:5',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/space%20folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove trailing periods', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:2:5.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 2,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:2.',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 2,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:5:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:import { ILoveVSCode } from \\'./foo/bar.ts\\';',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Test for https://github.com/microsoft/vscode/pull/200919#discussion_r1428124196\n\t\t\ttest('should extract column and/or line numbers from links and remove grepped lines incl singular spaces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.txt' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10:5: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.txt:10: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10:5: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 5,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.txt:10: ',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.txt',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tstartLineNumber: 10,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttest('should extract line numbers from links and remove ruby stack traces', async () => {\n\t\t\t\tlocalFileOpener = instantiationService.createInstance(TerminalLocalFileLinkOpener);\n\t\t\t\tconst localFolderOpener = instantiationService.createInstance(TerminalLocalFolderInWorkspaceLinkOpener);\n\t\t\t\topener = instantiationService.createInstance(TestTerminalSearchLinkOpener, capabilities, 'c:/folder', localFileOpener, localFolderOpener, () => OperatingSystem.Windows);\n\t\t\t\tfileService.setFiles([\n\t\t\t\t\tURI.from({ scheme: Schemas.file, path: 'c:/folder/foo/bar.rb' })\n\t\t\t\t]);\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: './foo/bar.rb:30:in `<main>`',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.rb',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1, // Since Ruby doesn't appear to put columns in stack traces, this should be 1\n\t\t\t\t\t\tstartLineNumber: 30,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tawait opener.open({\n\t\t\t\t\ttext: '.\\\\foo\\\\bar.rb:30:in `<main>`',\n\t\t\t\t\tbufferRange: { start: { x: 1, y: 1 }, end: { x: 8, y: 1 } },\n\t\t\t\t\ttype: TerminalBuiltinLinkType.Search\n\t\t\t\t});\n\t\t\t\tdeepStrictEqual(activationResult, {\n\t\t\t\t\tlink: 'file:///c%3A/folder/foo/bar.rb',\n\t\t\t\t\tsource: 'editor',\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: 1, // Since Ruby doesn't appear to put columns in stack traces, this should be 1\n\t\t\t\t\t\tstartLineNumber: 30,\n\t\t\t\t\t\tendColumn: undefined,\n\t\t\t\t\t\tendLineNumber: undefined\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n});\n"]}