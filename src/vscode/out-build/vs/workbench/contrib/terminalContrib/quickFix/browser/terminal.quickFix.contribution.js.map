{"version":3,"sources":["vs/workbench/contrib/terminalContrib/quickFix/browser/terminal.quickFix.contribution.ts"],"names":[],"mappings":"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","file":"terminal.quickFix.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { InstantiationType, registerSingleton } from '../../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ITerminalContribution, ITerminalInstance, IXtermTerminal } from '../../../terminal/browser/terminal.js';\nimport { registerActiveInstanceAction } from '../../../terminal/browser/terminalActions.js';\nimport { registerTerminalContribution, type ITerminalContributionContext } from '../../../terminal/browser/terminalExtensions.js';\nimport { TerminalContextKeys } from '../../../terminal/common/terminalContextKey.js';\nimport './media/terminalQuickFix.css';\nimport { ITerminalQuickFixService } from './quickFix.js';\nimport { TerminalQuickFixAddon } from './quickFixAddon.js';\nimport { freePort, gitCreatePr, gitFastForwardPull, gitPushSetUpstream, gitSimilar, gitTwoDashes, pwshGeneralError, pwshUnixCommandNotFoundError } from './terminalQuickFixBuiltinActions.js';\nimport { TerminalQuickFixService } from './terminalQuickFixService.js';\n\n// #region Services\n\nregisterSingleton(ITerminalQuickFixService, TerminalQuickFixService, InstantiationType.Delayed);\n\n// #endregion\n\n// #region Contributions\n\nclass TerminalQuickFixContribution extends DisposableStore implements ITerminalContribution {\n\tstatic readonly ID = 'quickFix';\n\n\tstatic get(instance: ITerminalInstance): TerminalQuickFixContribution | null {\n\t\treturn instance.getContribution<TerminalQuickFixContribution>(TerminalQuickFixContribution.ID);\n\t}\n\n\tprivate _addon?: TerminalQuickFixAddon;\n\tget addon(): TerminalQuickFixAddon | undefined { return this._addon; }\n\n\tprivate readonly _quickFixMenuItems = this.add(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _ctx: ITerminalContributionContext,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t}\n\n\txtermReady(xterm: IXtermTerminal & { raw: RawXtermTerminal }): void {\n\t\t// Create addon\n\t\tthis._addon = this._instantiationService.createInstance(TerminalQuickFixAddon, this._ctx.instance.sessionId, undefined, this._ctx.instance.capabilities);\n\t\txterm.raw.loadAddon(this._addon);\n\n\t\t// Hook up listeners\n\t\tthis.add(this._addon.onDidRequestRerunCommand((e) => this._ctx.instance.runCommand(e.command, e.shouldExecute || false)));\n\t\tthis.add(this._addon.onDidUpdateQuickFixes(e => {\n\t\t\t// Only track the latest command's quick fixes\n\t\t\tthis._quickFixMenuItems.value = e.actions ? xterm.decorationAddon.registerMenuItems(e.command, e.actions) : undefined;\n\t\t}));\n\n\t\t// Register quick fixes\n\t\tfor (const actionOption of [\n\t\t\tgitTwoDashes(),\n\t\t\tgitFastForwardPull(),\n\t\t\tfreePort((port: string, command: string) => this._ctx.instance.freePortKillProcess(port, command)),\n\t\t\tgitSimilar(),\n\t\t\tgitPushSetUpstream(),\n\t\t\tgitCreatePr(),\n\t\t\tpwshUnixCommandNotFoundError(),\n\t\t\tpwshGeneralError()\n\t\t]) {\n\t\t\tthis._addon.registerCommandFinishedListener(actionOption);\n\t\t}\n\t}\n}\nregisterTerminalContribution(TerminalQuickFixContribution.ID, TerminalQuickFixContribution);\n\n// #endregion\n\n// #region Actions\n\nconst enum TerminalQuickFixCommandId {\n\tShowQuickFixes = 'workbench.action.terminal.showQuickFixes',\n}\n\nregisterActiveInstanceAction({\n\tid: TerminalQuickFixCommandId.ShowQuickFixes,\n\ttitle: localize2('workbench.action.terminal.showQuickFixes', 'Show Terminal Quick Fixes'),\n\tprecondition: TerminalContextKeys.focus,\n\tkeybinding: {\n\t\tprimary: KeyMod.CtrlCmd | KeyCode.Period,\n\t\tweight: KeybindingWeight.WorkbenchContrib\n\t},\n\trun: (activeInstance) => TerminalQuickFixContribution.get(activeInstance)?.addon?.showMenu()\n});\n\n// #endregion\n"]}