{"version":3,"sources":["vs/workbench/contrib/terminalContrib/clipboard/browser/terminalClipboard.ts"],"names":[],"mappings":"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","file":"terminalClipboard.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isString } from '../../../../../base/common/types.js';\nimport { localize } from '../../../../../nls.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TerminalSettingId } from '../../../../../platform/terminal/common/terminal.js';\n\nexport async function shouldPasteTerminalText(accessor: ServicesAccessor, text: string, bracketedPasteMode: boolean | undefined): Promise<boolean | { modifiedText: string }> {\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst dialogService = accessor.get(IDialogService);\n\n\t// If the clipboard has only one line, a warning should never show\n\tconst textForLines = text.split(/\\r?\\n/);\n\tif (textForLines.length === 1) {\n\t\treturn true;\n\t}\n\n\t// Get config value\n\tfunction parseConfigValue(value: unknown): 'auto' | 'always' | 'never' {\n\t\t// Valid value\n\t\tif (isString(value)) {\n\t\t\tif (value === 'auto' || value === 'always' || value === 'never') {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\t\t// Legacy backwards compatibility\n\t\tif (typeof value === 'boolean') {\n\t\t\treturn value ? 'auto' : 'never';\n\t\t}\n\t\t// Invalid value fallback\n\t\treturn 'auto';\n\t}\n\tconst configValue = parseConfigValue(configurationService.getValue(TerminalSettingId.EnableMultiLinePasteWarning));\n\n\t// Never show it\n\tif (configValue === 'never') {\n\t\treturn true;\n\t}\n\n\t// Special edge cases to not show for auto\n\tif (configValue === 'auto') {\n\t\t// Ignore check if the shell is in bracketed paste mode (ie. the shell can handle multi-line\n\t\t// text).\n\t\tif (bracketedPasteMode) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst textForLines = text.split(/\\r?\\n/);\n\t\t// Ignore check when a command is copied with a trailing new line\n\t\tif (textForLines.length === 2 && textForLines[1].trim().length === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tconst displayItemsCount = 3;\n\tconst maxPreviewLineLength = 30;\n\n\tlet detail = localize('preview', \"Preview:\");\n\tfor (let i = 0; i < Math.min(textForLines.length, displayItemsCount); i++) {\n\t\tconst line = textForLines[i];\n\t\tconst cleanedLine = line.length > maxPreviewLineLength ? `${line.slice(0, maxPreviewLineLength)}…` : line;\n\t\tdetail += `\\n${cleanedLine}`;\n\t}\n\n\tif (textForLines.length > displayItemsCount) {\n\t\tdetail += `\\n…`;\n\t}\n\n\tconst { result, checkboxChecked } = await dialogService.prompt<{ confirmed: boolean; singleLine: boolean }>({\n\t\tmessage: localize('confirmMoveTrashMessageFilesAndDirectories', \"Are you sure you want to paste {0} lines of text into the terminal?\", textForLines.length),\n\t\tdetail,\n\t\ttype: 'warning',\n\t\tbuttons: [\n\t\t\t{\n\t\t\t\tlabel: localize({ key: 'multiLinePasteButton', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n\t\t\t\trun: () => ({ confirmed: true, singleLine: false })\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: localize({ key: 'multiLinePasteButton.oneLine', comment: ['&& denotes a mnemonic'] }, \"Paste as &&one line\"),\n\t\t\t\trun: () => ({ confirmed: true, singleLine: true })\n\t\t\t}\n\t\t],\n\t\tcancelButton: true,\n\t\tcheckbox: {\n\t\t\tlabel: localize('doNotAskAgain', \"Do not ask me again\")\n\t\t}\n\t});\n\n\tif (!result) {\n\t\treturn false;\n\t}\n\n\tif (result.confirmed && checkboxChecked) {\n\t\tawait configurationService.updateValue(TerminalSettingId.EnableMultiLinePasteWarning, 'never');\n\t}\n\n\tif (result.singleLine) {\n\t\treturn { modifiedText: text.replace(/\\r?\\n/g, '') };\n\t}\n\n\treturn result.confirmed;\n}\n"]}