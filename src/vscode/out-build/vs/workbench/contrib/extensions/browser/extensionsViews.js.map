{"version":3,"sources":["vs/workbench/contrib/extensions/browser/extensionsViews.ts"],"names":[],"mappings":"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","file":"extensionsViews.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { isCancellationError, getErrorMessage, CancellationError } from '../../../../base/common/errors.js';\nimport { PagedModel, IPagedModel, DelayedPagedModel, IPager } from '../../../../base/common/paging.js';\nimport { SortOrder, IQueryOptions as IGalleryQueryOptions, SortBy as GallerySortBy, InstallExtensionInfo, ExtensionGalleryErrorCode, ExtensionGalleryError } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IExtensionManagementServer, IExtensionManagementServerService, EnablementState, IWorkbenchExtensionManagementService, IWorkbenchExtensionEnablementService } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService } from '../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { areSameExtensions, getExtensionDependencies } from '../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { append, $ } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ExtensionResultsListFocused, ExtensionState, IExtension, IExtensionsViewState, IExtensionsWorkbenchService, IWorkspaceRecommendedExtensionsView } from '../common/extensions.js';\nimport { Query } from '../common/extensionQuery.js';\nimport { IExtensionService, toExtension } from '../../../services/extensions/common/extensions.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IViewletViewOptions } from '../../../browser/parts/views/viewsViewlet.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CountBadge } from '../../../../base/browser/ui/countBadge/countBadge.js';\nimport { WorkbenchPagedList } from '../../../../platform/list/browser/listService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { ViewPane, IViewPaneOptions, ViewPaneShowActions } from '../../../browser/parts/views/viewPane.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { coalesce, distinct, range } from '../../../../base/common/arrays.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ActionRunner } from '../../../../base/common/actions.js';\nimport { ExtensionIdentifier, ExtensionIdentifierMap, ExtensionUntrustedWorkspaceSupportType, ExtensionVirtualWorkspaceSupportType, IExtensionDescription, IExtensionIdentifier, isLanguagePackExtension } from '../../../../platform/extensions/common/extensions.js';\nimport { CancelablePromise, createCancelablePromise, ThrottledDelayer } from '../../../../base/common/async.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { SeverityIcon } from '../../../../base/browser/ui/severityIcon/severityIcon.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionManifestPropertiesService } from '../../../services/extensions/common/extensionManifestPropertiesService.js';\nimport { isVirtualWorkspace } from '../../../../platform/workspace/common/virtualWorkspace.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { isOfflineError } from '../../../../base/parts/request/common/request.js';\nimport { defaultCountBadgeStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions, IExtensionFeatureRenderer, IExtensionFeaturesManagementService, IExtensionFeaturesRegistry } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { isString } from '../../../../base/common/types.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { ExtensionsList } from './extensionsViewer.js';\n\nexport const NONE_CATEGORY = 'none';\n\ntype Message = {\n\treadonly text: string;\n\treadonly severity: Severity;\n};\n\nclass ExtensionsViewState extends Disposable implements IExtensionsViewState {\n\n\tprivate readonly _onFocus: Emitter<IExtension> = this._register(new Emitter<IExtension>());\n\treadonly onFocus: Event<IExtension> = this._onFocus.event;\n\n\tprivate readonly _onBlur: Emitter<IExtension> = this._register(new Emitter<IExtension>());\n\treadonly onBlur: Event<IExtension> = this._onBlur.event;\n\n\tprivate currentlyFocusedItems: IExtension[] = [];\n\n\tfilters: {\n\t\tfeatureId?: string;\n\t} = {};\n\n\tonFocusChange(extensions: IExtension[]): void {\n\t\tthis.currentlyFocusedItems.forEach(extension => this._onBlur.fire(extension));\n\t\tthis.currentlyFocusedItems = extensions;\n\t\tthis.currentlyFocusedItems.forEach(extension => this._onFocus.fire(extension));\n\t}\n}\n\nexport interface ExtensionsListViewOptions {\n\tserver?: IExtensionManagementServer;\n\tflexibleHeight?: boolean;\n\treadonly onDidChangeTitle?: Event<string>;\n\thideBadge?: boolean;\n}\n\ninterface IQueryResult {\n\tmodel: IPagedModel<IExtension>;\n\tmessage?: { text: string; severity: Severity };\n\treadonly onDidChangeModel?: Event<IPagedModel<IExtension>>;\n\treadonly disposables: DisposableStore;\n}\n\nconst enum LocalSortBy {\n\tUpdateDate = 'UpdateDate',\n}\n\nfunction isLocalSortBy(value: any): value is LocalSortBy {\n\tswitch (value as LocalSortBy) {\n\t\tcase LocalSortBy.UpdateDate: return true;\n\t}\n}\n\ntype SortBy = LocalSortBy | GallerySortBy;\ntype IQueryOptions = Omit<IGalleryQueryOptions, 'sortBy'> & { sortBy?: SortBy };\n\nexport abstract class AbstractExtensionsListView<T> extends ViewPane {\n\tabstract show(query: string, refresh?: boolean): Promise<IPagedModel<T>>;\n}\n\nexport class ExtensionsListView extends AbstractExtensionsListView<IExtension> {\n\n\tprivate static RECENT_UPDATE_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days\n\n\tprivate bodyTemplate: {\n\t\tmessageContainer: HTMLElement;\n\t\tmessageSeverityIcon: HTMLElement;\n\t\tmessageBox: HTMLElement;\n\t\textensionsList: HTMLElement;\n\t} | undefined;\n\tprivate badge: CountBadge | undefined;\n\tprivate list: WorkbenchPagedList<IExtension> | null = null;\n\tprivate queryRequest: { query: string; request: CancelablePromise<IPagedModel<IExtension>> } | null = null;\n\tprivate queryResult: IQueryResult | undefined;\n\tprivate extensionsViewState: ExtensionsViewState | undefined;\n\n\tprivate readonly contextMenuActionRunner = this._register(new ActionRunner());\n\n\tconstructor(\n\t\tprotected readonly options: ExtensionsListViewOptions,\n\t\tviewletViewOptions: IViewletViewOptions,\n\t\t@INotificationService protected notificationService: INotificationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IExtensionsWorkbenchService protected extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionRecommendationsService protected extensionRecommendationsService: IExtensionRecommendationsService,\n\t\t@ITelemetryService protected readonly telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService,\n\t\t@IExtensionManagementServerService protected readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService private readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkbenchExtensionManagementService protected readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService protected readonly workspaceService: IWorkspaceContextService,\n\t\t@IProductService protected readonly productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IExtensionFeaturesManagementService private readonly extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IUriIdentityService protected readonly uriIdentityService: IUriIdentityService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper({\n\t\t\t...(viewletViewOptions as IViewPaneOptions),\n\t\t\tshowActions: ViewPaneShowActions.Always,\n\t\t\tmaximumBodySize: options.flexibleHeight ? (storageService.getNumber(`${viewletViewOptions.id}.size`, StorageScope.PROFILE, 0) ? undefined : 0) : undefined\n\t\t}, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\t\tif (this.options.onDidChangeTitle) {\n\t\t\tthis._register(this.options.onDidChangeTitle(title => this.updateTitle(title)));\n\t\t}\n\n\t\tthis._register(this.contextMenuActionRunner.onDidRun(({ error }) => error && this.notificationService.error(error)));\n\t\tthis.registerActions();\n\t}\n\n\tprotected registerActions(): void { }\n\n\tprotected override renderHeader(container: HTMLElement): void {\n\t\tcontainer.classList.add('extension-view-header');\n\t\tsuper.renderHeader(container);\n\n\t\tif (!this.options.hideBadge) {\n\t\t\tthis.badge = this._register(new CountBadge(append(container, $('.count-badge-wrapper')), {}, defaultCountBadgeStyles));\n\t\t}\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tconst messageContainer = append(container, $('.message-container'));\n\t\tconst messageSeverityIcon = append(messageContainer, $(''));\n\t\tconst messageBox = append(messageContainer, $('.message'));\n\t\tconst extensionsList = append(container, $('.extensions-list'));\n\t\tthis.extensionsViewState = this._register(new ExtensionsViewState());\n\t\tthis.list = this._register(this.instantiationService.createInstance(ExtensionsList, extensionsList, this.id, {}, this.extensionsViewState)).list;\n\t\tExtensionResultsListFocused.bindTo(this.list.contextKeyService);\n\t\tthis._register(this.list.onDidChangeFocus(e => this.extensionsViewState?.onFocusChange(coalesce(e.elements)), this));\n\n\t\tthis.bodyTemplate = {\n\t\t\textensionsList,\n\t\t\tmessageBox,\n\t\t\tmessageContainer,\n\t\t\tmessageSeverityIcon\n\t\t};\n\n\t\tif (this.queryResult) {\n\t\t\tthis.setModel(this.queryResult.model);\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tif (this.bodyTemplate) {\n\t\t\tthis.bodyTemplate.extensionsList.style.height = height + 'px';\n\t\t}\n\t\tthis.list?.layout(height, width);\n\t}\n\n\tasync show(query: string, refresh?: boolean): Promise<IPagedModel<IExtension>> {\n\t\tif (this.queryRequest) {\n\t\t\tif (!refresh && this.queryRequest.query === query) {\n\t\t\t\treturn this.queryRequest.request;\n\t\t\t}\n\t\t\tthis.queryRequest.request.cancel();\n\t\t\tthis.queryRequest = null;\n\t\t}\n\n\t\tif (this.queryResult) {\n\t\t\tthis.queryResult.disposables.dispose();\n\t\t\tthis.queryResult = undefined;\n\t\t\tif (this.extensionsViewState) {\n\t\t\t\tthis.extensionsViewState.filters = {};\n\t\t\t}\n\t\t}\n\n\t\tconst parsedQuery = Query.parse(query);\n\n\t\tconst options: IQueryOptions = {\n\t\t\tsortOrder: SortOrder.Default\n\t\t};\n\n\t\tswitch (parsedQuery.sortBy) {\n\t\t\tcase 'installs': options.sortBy = GallerySortBy.InstallCount; break;\n\t\t\tcase 'rating': options.sortBy = GallerySortBy.WeightedRating; break;\n\t\t\tcase 'name': options.sortBy = GallerySortBy.Title; break;\n\t\t\tcase 'publishedDate': options.sortBy = GallerySortBy.PublishedDate; break;\n\t\t\tcase 'updateDate': options.sortBy = LocalSortBy.UpdateDate; break;\n\t\t}\n\n\t\tconst request = createCancelablePromise(async token => {\n\t\t\ttry {\n\t\t\t\tthis.queryResult = await this.query(parsedQuery, options, token);\n\t\t\t\tconst model = this.queryResult.model;\n\t\t\t\tthis.setModel(model, this.queryResult.message);\n\t\t\t\tif (this.queryResult.onDidChangeModel) {\n\t\t\t\t\tthis.queryResult.disposables.add(this.queryResult.onDidChangeModel(model => {\n\t\t\t\t\t\tif (this.queryResult) {\n\t\t\t\t\t\t\tthis.queryResult.model = model;\n\t\t\t\t\t\t\tthis.updateModel(model);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t} catch (e) {\n\t\t\t\tconst model = new PagedModel([]);\n\t\t\t\tif (!isCancellationError(e)) {\n\t\t\t\t\tthis.logService.error(e);\n\t\t\t\t\tthis.setModel(model, this.getMessage(e));\n\t\t\t\t}\n\t\t\t\treturn this.list ? this.list.model : model;\n\t\t\t}\n\t\t});\n\n\t\trequest.finally(() => this.queryRequest = null);\n\t\tthis.queryRequest = { query, request };\n\t\treturn request;\n\t}\n\n\tcount(): number {\n\t\treturn this.queryResult?.model.length ?? 0;\n\t}\n\n\tprotected showEmptyModel(): Promise<IPagedModel<IExtension>> {\n\t\tconst emptyModel = new PagedModel([]);\n\t\tthis.setModel(emptyModel);\n\t\treturn Promise.resolve(emptyModel);\n\t}\n\n\tprivate async query(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IQueryResult> {\n\t\tconst idRegex = /@id:(([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*))/g;\n\t\tconst ids: string[] = [];\n\t\tlet idMatch;\n\t\twhile ((idMatch = idRegex.exec(query.value)) !== null) {\n\t\t\tconst name = idMatch[1];\n\t\t\tids.push(name);\n\t\t}\n\t\tif (ids.length) {\n\t\t\tconst model = await this.queryByIds(ids, options, token);\n\t\t\treturn { model, disposables: new DisposableStore() };\n\t\t}\n\n\t\tif (ExtensionsListView.isLocalExtensionsQuery(query.value, query.sortBy)) {\n\t\t\treturn this.queryLocal(query, options);\n\t\t}\n\n\t\tif (ExtensionsListView.isSearchPopularQuery(query.value)) {\n\t\t\tquery.value = query.value.replace('@popular', '');\n\t\t\toptions.sortBy = !options.sortBy ? GallerySortBy.InstallCount : options.sortBy;\n\t\t}\n\t\telse if (ExtensionsListView.isSearchRecentlyPublishedQuery(query.value)) {\n\t\t\tquery.value = query.value.replace('@recentlyPublished', '');\n\t\t\toptions.sortBy = !options.sortBy ? GallerySortBy.PublishedDate : options.sortBy;\n\t\t}\n\n\t\tconst galleryQueryOptions: IGalleryQueryOptions = { ...options, sortBy: isLocalSortBy(options.sortBy) ? undefined : options.sortBy };\n\t\treturn this.queryGallery(query, galleryQueryOptions, token);\n\t}\n\n\tprivate async queryByIds(ids: string[], options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst idsSet: Set<string> = ids.reduce((result, id) => { result.add(id.toLowerCase()); return result; }, new Set<string>());\n\t\tconst result = (await this.extensionsWorkbenchService.queryLocal(this.options.server))\n\t\t\t.filter(e => idsSet.has(e.identifier.id.toLowerCase()));\n\n\t\tconst galleryIds = result.length ? ids.filter(id => result.every(r => !areSameExtensions(r.identifier, { id }))) : ids;\n\n\t\tif (galleryIds.length) {\n\t\t\tconst galleryResult = await this.extensionsWorkbenchService.getExtensions(galleryIds.map(id => ({ id })), { source: 'queryById' }, token);\n\t\t\tresult.push(...galleryResult);\n\t\t}\n\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async queryLocal(query: Query, options: IQueryOptions): Promise<IQueryResult> {\n\t\tconst local = await this.extensionsWorkbenchService.queryLocal(this.options.server);\n\t\tlet { extensions, canIncludeInstalledExtensions, description } = await this.filterLocal(local, this.extensionService.extensions, query, options);\n\t\tconst disposables = new DisposableStore();\n\t\tconst onDidChangeModel = disposables.add(new Emitter<IPagedModel<IExtension>>());\n\n\t\tif (canIncludeInstalledExtensions) {\n\t\t\tlet isDisposed: boolean = false;\n\t\t\tdisposables.add(toDisposable(() => isDisposed = true));\n\t\t\tdisposables.add(Event.debounce(Event.any(\n\t\t\t\tEvent.filter(this.extensionsWorkbenchService.onChange, e => e?.state === ExtensionState.Installed),\n\t\t\t\tthis.extensionService.onDidChangeExtensions\n\t\t\t), () => undefined)(async () => {\n\t\t\t\tconst local = this.options.server ? this.extensionsWorkbenchService.installed.filter(e => e.server === this.options.server) : this.extensionsWorkbenchService.local;\n\t\t\t\tconst { extensions: newExtensions } = await this.filterLocal(local, this.extensionService.extensions, query, options);\n\t\t\t\tif (!isDisposed) {\n\t\t\t\t\tconst mergedExtensions = this.mergeAddedExtensions(extensions, newExtensions);\n\t\t\t\t\tif (mergedExtensions) {\n\t\t\t\t\t\textensions = mergedExtensions;\n\t\t\t\t\t\tonDidChangeModel.fire(new PagedModel(extensions));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\treturn {\n\t\t\tmodel: new PagedModel(extensions),\n\t\t\tmessage: description ? { text: description, severity: Severity.Info } : undefined,\n\t\t\tonDidChangeModel: onDidChangeModel.event,\n\t\t\tdisposables\n\t\t};\n\t}\n\n\tprivate async filterLocal(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions): Promise<{ extensions: IExtension[]; canIncludeInstalledExtensions: boolean; description?: string }> {\n\t\tconst value = query.value;\n\t\tlet extensions: IExtension[] = [];\n\t\tlet description: string | undefined;\n\t\tconst includeBuiltin = /@builtin/i.test(value);\n\t\tconst canIncludeInstalledExtensions = !includeBuiltin;\n\n\t\tif (/@installed/i.test(value)) {\n\t\t\textensions = this.filterInstalledExtensions(local, runningExtensions, query, options);\n\t\t}\n\n\t\telse if (/@outdated/i.test(value)) {\n\t\t\textensions = this.filterOutdatedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@disabled/i.test(value)) {\n\t\t\textensions = this.filterDisabledExtensions(local, runningExtensions, query, options, includeBuiltin);\n\t\t}\n\n\t\telse if (/@enabled/i.test(value)) {\n\t\t\textensions = this.filterEnabledExtensions(local, runningExtensions, query, options, includeBuiltin);\n\t\t}\n\n\t\telse if (/@workspaceUnsupported/i.test(value)) {\n\t\t\textensions = this.filterWorkspaceUnsupportedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@deprecated/i.test(query.value)) {\n\t\t\textensions = await this.filterDeprecatedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@recentlyUpdated/i.test(query.value)) {\n\t\t\textensions = this.filterRecentlyUpdatedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@feature:/i.test(query.value)) {\n\t\t\tconst result = this.filterExtensionsByFeature(local, query);\n\t\t\tif (result) {\n\t\t\t\textensions = result.extensions;\n\t\t\t\tdescription = result.description;\n\t\t\t}\n\t\t}\n\n\t\telse if (includeBuiltin) {\n\t\t\textensions = this.filterBuiltinExtensions(local, query, options);\n\t\t}\n\n\t\treturn { extensions, canIncludeInstalledExtensions, description };\n\t}\n\n\tprivate filterBuiltinExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\t\tvalue = value.replaceAll(/@builtin/gi, '').replaceAll(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local\n\t\t\t.filter(e => e.isBuiltin && (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterExtensionByCategory(e: IExtension, includedCategories: string[], excludedCategories: string[]): boolean {\n\t\tif (!includedCategories.length && !excludedCategories.length) {\n\t\t\treturn true;\n\t\t}\n\t\tif (e.categories.length) {\n\t\t\tif (excludedCategories.length && e.categories.some(category => excludedCategories.includes(category.toLowerCase()))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn e.categories.some(category => includedCategories.includes(category.toLowerCase()));\n\t\t} else {\n\t\t\treturn includedCategories.includes(NONE_CATEGORY);\n\t\t}\n\t}\n\n\tprivate parseCategories(value: string): { value: string; includedCategories: string[]; excludedCategories: string[] } {\n\t\tconst includedCategories: string[] = [];\n\t\tconst excludedCategories: string[] = [];\n\t\tvalue = value.replace(/\\bcategory:(\"([^\"]*)\"|([^\"]\\S*))(\\s+|\\b|$)/g, (_, quotedCategory, category) => {\n\t\t\tconst entry = (category || quotedCategory || '').toLowerCase();\n\t\t\tif (entry.startsWith('-')) {\n\t\t\t\tif (excludedCategories.indexOf(entry) === -1) {\n\t\t\t\t\texcludedCategories.push(entry);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (includedCategories.indexOf(entry) === -1) {\n\t\t\t\t\tincludedCategories.push(entry);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn '';\n\t\t});\n\t\treturn { value, includedCategories, excludedCategories };\n\t}\n\n\tprivate filterInstalledExtensions(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value.replace(/@installed/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst matchingText = (e: IExtension) => (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1 || e.description.toLowerCase().indexOf(value) > -1)\n\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories);\n\t\tlet result;\n\n\t\tif (options.sortBy !== undefined) {\n\t\t\tresult = local.filter(e => !e.isBuiltin && matchingText(e));\n\t\t\tresult = this.sortExtensions(result, options);\n\t\t} else {\n\t\t\tresult = local.filter(e => (!e.isBuiltin || e.outdated || e.runtimeState !== undefined) && matchingText(e));\n\t\t\tconst runningExtensionsById = runningExtensions.reduce((result, e) => { result.set(e.identifier.value, e); return result; }, new ExtensionIdentifierMap<IExtensionDescription>());\n\n\t\t\tconst defaultSort = (e1: IExtension, e2: IExtension) => {\n\t\t\t\tconst running1 = runningExtensionsById.get(e1.identifier.id);\n\t\t\t\tconst isE1Running = !!running1 && this.extensionManagementServerService.getExtensionManagementServer(toExtension(running1)) === e1.server;\n\t\t\t\tconst running2 = runningExtensionsById.get(e2.identifier.id);\n\t\t\t\tconst isE2Running = running2 && this.extensionManagementServerService.getExtensionManagementServer(toExtension(running2)) === e2.server;\n\t\t\t\tif ((isE1Running && isE2Running)) {\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\tconst isE1LanguagePackExtension = e1.local && isLanguagePackExtension(e1.local.manifest);\n\t\t\t\tconst isE2LanguagePackExtension = e2.local && isLanguagePackExtension(e2.local.manifest);\n\t\t\t\tif (!isE1Running && !isE2Running) {\n\t\t\t\t\tif (isE1LanguagePackExtension) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (isE2LanguagePackExtension) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\tif ((isE1Running && isE2LanguagePackExtension) || (isE2Running && isE1LanguagePackExtension)) {\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\treturn isE1Running ? -1 : 1;\n\t\t\t};\n\n\t\t\tconst incompatible: IExtension[] = [];\n\t\t\tconst deprecated: IExtension[] = [];\n\t\t\tconst outdated: IExtension[] = [];\n\t\t\tconst actionRequired: IExtension[] = [];\n\t\t\tconst noActionRequired: IExtension[] = [];\n\n\t\t\tfor (const e of result) {\n\t\t\t\tif (e.enablementState === EnablementState.DisabledByInvalidExtension) {\n\t\t\t\t\tincompatible.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.deprecationInfo) {\n\t\t\t\t\tdeprecated.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.outdated && this.extensionEnablementService.isEnabledEnablementState(e.enablementState)) {\n\t\t\t\t\toutdated.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.runtimeState) {\n\t\t\t\t\tactionRequired.push(e);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnoActionRequired.push(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = [\n\t\t\t\t...incompatible.sort(defaultSort),\n\t\t\t\t...deprecated.sort(defaultSort),\n\t\t\t\t...outdated.sort(defaultSort),\n\t\t\t\t...actionRequired.sort(defaultSort),\n\t\t\t\t...noActionRequired.sort(defaultSort)\n\t\t\t];\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate filterOutdatedExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value.replace(/@outdated/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(extension => extension.outdated\n\t\t\t\t&& (extension.name.toLowerCase().indexOf(value) > -1 || extension.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(extension, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterDisabledExtensions(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions, includeBuiltin: boolean): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value.replaceAll(/@disabled|@builtin/gi, '').replaceAll(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tif (includeBuiltin) {\n\t\t\tlocal = local.filter(e => e.isBuiltin);\n\t\t}\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(e => runningExtensions.every(r => !areSameExtensions({ id: r.identifier.value, uuid: r.uuid }, e.identifier))\n\t\t\t\t&& (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterEnabledExtensions(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions, includeBuiltin: boolean): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value ? value.replaceAll(/@enabled|@builtin/gi, '').replaceAll(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase() : '';\n\n\t\tlocal = local.filter(e => e.isBuiltin === includeBuiltin);\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(e => runningExtensions.some(r => areSameExtensions({ id: r.identifier.value, uuid: r.uuid }, e.identifier))\n\t\t\t\t&& (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterWorkspaceUnsupportedExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\t// shows local extensions which are restricted or disabled in the current workspace because of the extension's capability\n\n\t\tconst queryString = query.value; // @sortby is already filtered out\n\n\t\tconst match = queryString.match(/^\\s*@workspaceUnsupported(?::(untrusted|virtual)(Partial)?)?(?:\\s+([^\\s]*))?/i);\n\t\tif (!match) {\n\t\t\treturn [];\n\t\t}\n\t\tconst type = match[1]?.toLowerCase();\n\t\tconst partial = !!match[2];\n\t\tconst nameFilter = match[3]?.toLowerCase();\n\n\t\tif (nameFilter) {\n\t\t\tlocal = local.filter(extension => extension.name.toLowerCase().indexOf(nameFilter) > -1 || extension.displayName.toLowerCase().indexOf(nameFilter) > -1);\n\t\t}\n\n\t\tconst hasVirtualSupportType = (extension: IExtension, supportType: ExtensionVirtualWorkspaceSupportType) => {\n\t\t\treturn extension.local && this.extensionManifestPropertiesService.getExtensionVirtualWorkspaceSupportType(extension.local.manifest) === supportType;\n\t\t};\n\n\t\tconst hasRestrictedSupportType = (extension: IExtension, supportType: ExtensionUntrustedWorkspaceSupportType) => {\n\t\t\tif (!extension.local) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst enablementState = this.extensionEnablementService.getEnablementState(extension.local);\n\t\t\tif (enablementState !== EnablementState.EnabledGlobally && enablementState !== EnablementState.EnabledWorkspace &&\n\t\t\t\tenablementState !== EnablementState.DisabledByTrustRequirement && enablementState !== EnablementState.DisabledByExtensionDependency) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(extension.local.manifest) === supportType) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (supportType === false) {\n\t\t\t\tconst dependencies = getExtensionDependencies(local.map(ext => ext.local!), extension.local);\n\t\t\t\treturn dependencies.some(ext => this.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(ext.manifest) === supportType);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst inVirtualWorkspace = isVirtualWorkspace(this.workspaceService.getWorkspace());\n\t\tconst inRestrictedWorkspace = !this.workspaceTrustManagementService.isWorkspaceTrusted();\n\n\t\tif (type === 'virtual') {\n\t\t\t// show limited and disabled extensions unless disabled because of a untrusted workspace\n\t\t\tlocal = local.filter(extension => inVirtualWorkspace && hasVirtualSupportType(extension, partial ? 'limited' : false) && !(inRestrictedWorkspace && hasRestrictedSupportType(extension, false)));\n\t\t} else if (type === 'untrusted') {\n\t\t\t// show limited and disabled extensions unless disabled because of a virtual workspace\n\t\t\tlocal = local.filter(extension => hasRestrictedSupportType(extension, partial ? 'limited' : false) && !(inVirtualWorkspace && hasVirtualSupportType(extension, false)));\n\t\t} else {\n\t\t\t// show extensions that are restricted or disabled in the current workspace\n\t\t\tlocal = local.filter(extension => inVirtualWorkspace && !hasVirtualSupportType(extension, true) || inRestrictedWorkspace && !hasRestrictedSupportType(extension, true));\n\t\t}\n\t\treturn this.sortExtensions(local, options);\n\t}\n\n\tprivate async filterDeprecatedExtensions(local: IExtension[], query: Query, options: IQueryOptions): Promise<IExtension[]> {\n\t\tconst value = query.value.replace(/@deprecated/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\t\tconst extensionsControlManifest = await this.extensionManagementService.getExtensionsControlManifest();\n\t\tconst deprecatedExtensionIds = Object.keys(extensionsControlManifest.deprecated);\n\t\tlocal = local.filter(e => deprecatedExtensionIds.includes(e.identifier.id) && (!value || e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1));\n\t\treturn this.sortExtensions(local, options);\n\t}\n\n\tprivate filterRecentlyUpdatedExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\t\tconst currentTime = Date.now();\n\t\tlocal = local.filter(e => !e.isBuiltin && !e.outdated && e.local?.updated && e.local?.installedTimestamp !== undefined && currentTime - e.local.installedTimestamp < ExtensionsListView.RECENT_UPDATE_DURATION);\n\n\t\tvalue = value.replace(/@recentlyUpdated/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local.filter(e =>\n\t\t\t(e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\toptions.sortBy = options.sortBy ?? LocalSortBy.UpdateDate;\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterExtensionsByFeature(local: IExtension[], query: Query): { extensions: IExtension[]; description: string } | undefined {\n\t\tconst value = query.value.replace(/@feature:/g, '').trim();\n\t\tconst featureId = value.split(' ')[0];\n\t\tconst feature = Registry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).getExtensionFeature(featureId);\n\t\tif (!feature) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (this.extensionsViewState) {\n\t\t\tthis.extensionsViewState.filters.featureId = featureId;\n\t\t}\n\t\tconst renderer = feature.renderer ? this.instantiationService.createInstance<IExtensionFeatureRenderer>(feature.renderer) : undefined;\n\t\ttry {\n\t\t\tconst result: [IExtension, number][] = [];\n\t\t\tfor (const e of local) {\n\t\t\t\tif (!e.local) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst accessData = this.extensionFeaturesManagementService.getAccessData(new ExtensionIdentifier(e.identifier.id), featureId);\n\t\t\t\tconst shouldRender = renderer?.shouldRender(e.local.manifest);\n\t\t\t\tif (accessData || shouldRender) {\n\t\t\t\t\tresult.push([e, accessData?.accessTimes.length ?? 0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\textensions: result.sort(([, a], [, b]) => b - a).map(([e]) => e),\n\t\t\t\tdescription: localize('showingExtensionsForFeature', \"Extensions using {0} in the last 30 days\", feature.label)\n\t\t\t};\n\t\t} finally {\n\t\t\trenderer?.dispose();\n\t\t}\n\t}\n\n\tprivate mergeAddedExtensions(extensions: IExtension[], newExtensions: IExtension[]): IExtension[] | undefined {\n\t\tconst oldExtensions = [...extensions];\n\t\tconst findPreviousExtensionIndex = (from: number): number => {\n\t\t\tlet index = -1;\n\t\t\tconst previousExtensionInNew = newExtensions[from];\n\t\t\tif (previousExtensionInNew) {\n\t\t\t\tindex = oldExtensions.findIndex(e => areSameExtensions(e.identifier, previousExtensionInNew.identifier));\n\t\t\t\tif (index === -1) {\n\t\t\t\t\treturn findPreviousExtensionIndex(from - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn index;\n\t\t};\n\n\t\tlet hasChanged: boolean = false;\n\t\tfor (let index = 0; index < newExtensions.length; index++) {\n\t\t\tconst extension = newExtensions[index];\n\t\t\tif (extensions.every(r => !areSameExtensions(r.identifier, extension.identifier))) {\n\t\t\t\thasChanged = true;\n\t\t\t\textensions.splice(findPreviousExtensionIndex(index - 1) + 1, 0, extension);\n\t\t\t}\n\t\t}\n\n\t\treturn hasChanged ? extensions : undefined;\n\t}\n\n\tprivate async queryGallery(query: Query, options: IGalleryQueryOptions, token: CancellationToken): Promise<IQueryResult> {\n\t\tconst hasUserDefinedSortOrder = options.sortBy !== undefined;\n\t\tif (!hasUserDefinedSortOrder && !query.value.trim()) {\n\t\t\toptions.sortBy = GallerySortBy.InstallCount;\n\t\t}\n\n\t\tif (this.isRecommendationsQuery(query)) {\n\t\t\tconst model = await this.queryRecommendations(query, options, token);\n\t\t\treturn { model, disposables: new DisposableStore() };\n\t\t}\n\n\t\tconst text = query.value;\n\n\t\tif (!text) {\n\t\t\toptions.source = 'viewlet';\n\t\t\tconst pager = await this.extensionsWorkbenchService.queryGallery(options, token);\n\t\t\treturn { model: new PagedModel(pager), disposables: new DisposableStore() };\n\t\t}\n\n\t\tif (/\\bext:([^\\s]+)\\b/g.test(text)) {\n\t\t\toptions.text = text;\n\t\t\toptions.source = 'file-extension-tags';\n\t\t\tconst pager = await this.extensionsWorkbenchService.queryGallery(options, token);\n\t\t\treturn { model: new PagedModel(pager), disposables: new DisposableStore() };\n\t\t}\n\n\t\toptions.text = text.substring(0, 350);\n\t\toptions.source = 'searchText';\n\n\t\tif (hasUserDefinedSortOrder || /\\b(category|tag):([^\\s]+)\\b/gi.test(text) || /\\bfeatured(\\s+|\\b|$)/gi.test(text)) {\n\t\t\tconst pager = await this.extensionsWorkbenchService.queryGallery(options, token);\n\t\t\treturn { model: new PagedModel(pager), disposables: new DisposableStore() };\n\t\t}\n\n\t\ttry {\n\t\t\tconst [pager, preferredExtensions] = await Promise.all([\n\t\t\t\tthis.extensionsWorkbenchService.queryGallery(options, token),\n\t\t\t\tthis.getPreferredExtensions(options.text.toLowerCase(), token).catch(() => [])\n\t\t\t]);\n\n\t\t\tconst model = preferredExtensions.length ? new PreferredExtensionsPagedModel(preferredExtensions, pager) : new PagedModel(pager);\n\t\t\treturn { model, disposables: new DisposableStore() };\n\t\t} catch (error) {\n\t\t\tif (isCancellationError(error)) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tif (!(error instanceof ExtensionGalleryError)) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tconst searchText = options.text.toLowerCase();\n\t\t\tconst localExtensions = this.extensionsWorkbenchService.local.filter(e => !e.isBuiltin && (e.name.toLowerCase().indexOf(searchText) > -1 || e.displayName.toLowerCase().indexOf(searchText) > -1 || e.description.toLowerCase().indexOf(searchText) > -1));\n\t\t\tif (localExtensions.length) {\n\t\t\t\tconst message = this.getMessage(error);\n\t\t\t\treturn { model: new PagedModel(localExtensions), disposables: new DisposableStore(), message: { text: localize('showing local extensions only', \"{0} Showing local extensions.\", message.text), severity: message.severity } };\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate async getPreferredExtensions(searchText: string, token: CancellationToken): Promise<IExtension[]> {\n\t\tconst preferredExtensions = this.extensionsWorkbenchService.local.filter(e => !e.isBuiltin && (e.name.toLowerCase().indexOf(searchText) > -1 || e.displayName.toLowerCase().indexOf(searchText) > -1 || e.description.toLowerCase().indexOf(searchText) > -1));\n\t\tconst preferredExtensionUUIDs = new Set<string>();\n\n\t\tif (preferredExtensions.length) {\n\t\t\t// Update gallery data for preferred extensions if they are not yet fetched\n\t\t\tconst extesionsToFetch: IExtensionIdentifier[] = [];\n\t\t\tfor (const extension of preferredExtensions) {\n\t\t\t\tif (extension.identifier.uuid) {\n\t\t\t\t\tpreferredExtensionUUIDs.add(extension.identifier.uuid);\n\t\t\t\t}\n\t\t\t\tif (!extension.gallery && extension.identifier.uuid) {\n\t\t\t\t\textesionsToFetch.push(extension.identifier);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extesionsToFetch.length) {\n\t\t\t\tthis.extensionsWorkbenchService.getExtensions(extesionsToFetch, CancellationToken.None).catch(e => null/*ignore error*/);\n\t\t\t}\n\t\t}\n\n\t\tconst preferredResults: string[] = [];\n\t\ttry {\n\t\t\tconst manifest = await this.extensionManagementService.getExtensionsControlManifest();\n\t\t\tif (Array.isArray(manifest.search)) {\n\t\t\t\tfor (const s of manifest.search) {\n\t\t\t\t\tif (s.query && s.query.toLowerCase() === searchText && Array.isArray(s.preferredResults)) {\n\t\t\t\t\t\tpreferredResults.push(...s.preferredResults);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (preferredResults.length) {\n\t\t\t\tconst result = await this.extensionsWorkbenchService.getExtensions(preferredResults.map(id => ({ id })), token);\n\t\t\t\tfor (const extension of result) {\n\t\t\t\t\tif (extension.identifier.uuid && !preferredExtensionUUIDs.has(extension.identifier.uuid)) {\n\t\t\t\t\t\tpreferredExtensions.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.logService.warn('Failed to get preferred results from the extensions control manifest.', e);\n\t\t}\n\n\t\treturn preferredExtensions;\n\t}\n\n\tprivate sortExtensions(extensions: IExtension[], options: IQueryOptions): IExtension[] {\n\t\tswitch (options.sortBy) {\n\t\t\tcase GallerySortBy.InstallCount:\n\t\t\t\textensions = extensions.sort((e1, e2) => typeof e2.installCount === 'number' && typeof e1.installCount === 'number' ? e2.installCount - e1.installCount : NaN);\n\t\t\t\tbreak;\n\t\t\tcase LocalSortBy.UpdateDate:\n\t\t\t\textensions = extensions.sort((e1, e2) =>\n\t\t\t\t\ttypeof e2.local?.installedTimestamp === 'number' && typeof e1.local?.installedTimestamp === 'number' ? e2.local.installedTimestamp - e1.local.installedTimestamp :\n\t\t\t\t\t\ttypeof e2.local?.installedTimestamp === 'number' ? 1 :\n\t\t\t\t\t\t\ttypeof e1.local?.installedTimestamp === 'number' ? -1 : NaN);\n\t\t\t\tbreak;\n\t\t\tcase GallerySortBy.AverageRating:\n\t\t\tcase GallerySortBy.WeightedRating:\n\t\t\t\textensions = extensions.sort((e1, e2) => typeof e2.rating === 'number' && typeof e1.rating === 'number' ? e2.rating - e1.rating : NaN);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\textensions = extensions.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName));\n\t\t\t\tbreak;\n\t\t}\n\t\tif (options.sortOrder === SortOrder.Descending) {\n\t\t\textensions = extensions.reverse();\n\t\t}\n\t\treturn extensions;\n\t}\n\n\tprivate isRecommendationsQuery(query: Query): boolean {\n\t\treturn ExtensionsListView.isWorkspaceRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isKeymapsRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isLanguageRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isExeRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isRemoteRecommendedExtensionsQuery(query.value)\n\t\t\t|| /@recommended:all/i.test(query.value)\n\t\t\t|| ExtensionsListView.isSearchRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isRecommendedExtensionsQuery(query.value);\n\t}\n\n\tprivate async queryRecommendations(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\t// Workspace recommendations\n\t\tif (ExtensionsListView.isWorkspaceRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getWorkspaceRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Keymap recommendations\n\t\tif (ExtensionsListView.isKeymapsRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getKeymapRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Language recommendations\n\t\tif (ExtensionsListView.isLanguageRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getLanguageRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Exe recommendations\n\t\tif (ExtensionsListView.isExeRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getExeRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Remote recommendations\n\t\tif (ExtensionsListView.isRemoteRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getRemoteRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// All recommendations\n\t\tif (/@recommended:all/i.test(query.value)) {\n\t\t\treturn this.getAllRecommendationsModel(options, token);\n\t\t}\n\n\t\t// Search recommendations\n\t\tif (ExtensionsListView.isSearchRecommendedExtensionsQuery(query.value) ||\n\t\t\t(ExtensionsListView.isRecommendedExtensionsQuery(query.value) && options.sortBy !== undefined)) {\n\t\t\treturn this.searchRecommendations(query, options, token);\n\t\t}\n\n\t\t// Other recommendations\n\t\tif (ExtensionsListView.isRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getOtherRecommendationsModel(query, options, token);\n\t\t}\n\n\t\treturn new PagedModel([]);\n\t}\n\n\tprotected async getInstallableRecommendations(recommendations: Array<string | URI>, options: IQueryOptions, token: CancellationToken): Promise<IExtension[]> {\n\t\tconst result: IExtension[] = [];\n\t\tif (recommendations.length) {\n\t\t\tconst galleryExtensions: string[] = [];\n\t\t\tconst resourceExtensions: URI[] = [];\n\t\t\tfor (const recommendation of recommendations) {\n\t\t\t\tif (typeof recommendation === 'string') {\n\t\t\t\t\tgalleryExtensions.push(recommendation);\n\t\t\t\t} else {\n\t\t\t\t\tresourceExtensions.push(recommendation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (galleryExtensions.length) {\n\t\t\t\ttry {\n\t\t\t\t\tconst extensions = await this.extensionsWorkbenchService.getExtensions(galleryExtensions.map(id => ({ id })), { source: options.source }, token);\n\t\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\t\tif (extension.gallery && !extension.deprecationInfo\n\t\t\t\t\t\t\t&& await this.extensionManagementService.canInstall(extension.gallery) === true) {\n\t\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!resourceExtensions.length || !this.isOfflineError(error)) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (resourceExtensions.length) {\n\t\t\t\tconst extensions = await this.extensionsWorkbenchService.getResourceExtensions(resourceExtensions, true);\n\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\tif (await this.extensionsWorkbenchService.canInstall(extension) === true) {\n\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected async getWorkspaceRecommendations(): Promise<Array<string | URI>> {\n\t\tconst recommendations = await this.extensionRecommendationsService.getWorkspaceRecommendations();\n\t\tconst { important } = await this.extensionRecommendationsService.getConfigBasedRecommendations();\n\t\tfor (const configBasedRecommendation of important) {\n\t\t\tif (!recommendations.find(extensionId => extensionId === configBasedRecommendation)) {\n\t\t\t\trecommendations.push(configBasedRecommendation);\n\t\t\t}\n\t\t}\n\t\treturn recommendations;\n\t}\n\n\tprivate async getWorkspaceRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst recommendations = await this.getWorkspaceRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-workspace' }, token));\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getKeymapRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended:keymaps/g, '').trim().toLowerCase();\n\t\tconst recommendations = this.extensionRecommendationsService.getKeymapRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-keymaps' }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getLanguageRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended:languages/g, '').trim().toLowerCase();\n\t\tconst recommendations = this.extensionRecommendationsService.getLanguageRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-languages' }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getRemoteRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended:remotes/g, '').trim().toLowerCase();\n\t\tconst recommendations = this.extensionRecommendationsService.getRemoteRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-remotes' }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getExeRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst exe = query.value.replace(/@exe:/g, '').trim().toLowerCase();\n\t\tconst { important, others } = await this.extensionRecommendationsService.getExeBasedRecommendations(exe.startsWith('\"') ? exe.substring(1, exe.length - 1) : exe);\n\t\tconst installableRecommendations = await this.getInstallableRecommendations([...important, ...others], { ...options, source: 'recommendations-exe' }, token);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getOtherRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst otherRecommendations = await this.getOtherRecommendations();\n\t\tconst installableRecommendations = await this.getInstallableRecommendations(otherRecommendations, { ...options, source: 'recommendations-other', sortBy: undefined }, token);\n\t\tconst result = coalesce(otherRecommendations.map(id => installableRecommendations.find(i => areSameExtensions(i.identifier, { id }))));\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async getOtherRecommendations(): Promise<string[]> {\n\t\tconst local = (await this.extensionsWorkbenchService.queryLocal(this.options.server))\n\t\t\t.map(e => e.identifier.id.toLowerCase());\n\t\tconst workspaceRecommendations = (await this.getWorkspaceRecommendations())\n\t\t\t.map(extensionId => isString(extensionId) ? extensionId.toLowerCase() : extensionId);\n\n\t\treturn distinct(\n\t\t\t(await Promise.all([\n\t\t\t\t// Order is important\n\t\t\t\tthis.extensionRecommendationsService.getImportantRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getFileBasedRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getOtherRecommendations()\n\t\t\t])).flat().filter(extensionId => !local.includes(extensionId.toLowerCase()) && !workspaceRecommendations.includes(extensionId.toLowerCase())\n\t\t\t), extensionId => extensionId.toLowerCase());\n\t}\n\n\t// Get All types of recommendations, trimmed to show a max of 8 at any given time\n\tprivate async getAllRecommendationsModel(options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst localExtensions = await this.extensionsWorkbenchService.queryLocal(this.options.server);\n\t\tconst localExtensionIds = localExtensions.map(e => e.identifier.id.toLowerCase());\n\n\t\tconst allRecommendations = distinct(\n\t\t\t(await Promise.all([\n\t\t\t\t// Order is important\n\t\t\t\tthis.getWorkspaceRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getImportantRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getFileBasedRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getOtherRecommendations()\n\t\t\t])).flat().filter(extensionId => {\n\t\t\t\tif (isString(extensionId)) {\n\t\t\t\t\treturn !localExtensionIds.includes(extensionId.toLowerCase());\n\t\t\t\t}\n\t\t\t\treturn !localExtensions.some(localExtension => localExtension.local && this.uriIdentityService.extUri.isEqual(localExtension.local.location, extensionId));\n\t\t\t}));\n\n\t\tconst installableRecommendations = await this.getInstallableRecommendations(allRecommendations, { ...options, source: 'recommendations-all', sortBy: undefined }, token);\n\n\t\tconst result: IExtension[] = [];\n\t\tfor (let i = 0; i < installableRecommendations.length && result.length < 8; i++) {\n\t\t\tconst recommendation = allRecommendations[i];\n\t\t\tif (isString(recommendation)) {\n\t\t\t\tconst extension = installableRecommendations.find(extension => areSameExtensions(extension.identifier, { id: recommendation }));\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst extension = installableRecommendations.find(extension => extension.resourceExtension && this.uriIdentityService.extUri.isEqual(extension.resourceExtension.location, recommendation));\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async searchRecommendations(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended/g, '').trim().toLowerCase();\n\t\tconst recommendations = distinct([...await this.getWorkspaceRecommendations(), ...await this.getOtherRecommendations()]);\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations', sortBy: undefined }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(this.sortExtensions(installableRecommendations, options));\n\t}\n\n\tprivate setModel(model: IPagedModel<IExtension>, message?: Message, donotResetScrollTop?: boolean) {\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(model);\n\t\t\tthis.updateBody(message);\n\t\t\tif (!donotResetScrollTop) {\n\t\t\t\tthis.list.scrollTop = 0;\n\t\t\t}\n\t\t}\n\t\tif (this.badge) {\n\t\t\tthis.badge.setCount(this.count());\n\t\t}\n\t}\n\n\tprivate updateModel(model: IPagedModel<IExtension>) {\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(model);\n\t\t\tthis.updateBody();\n\t\t}\n\t\tif (this.badge) {\n\t\t\tthis.badge.setCount(this.count());\n\t\t}\n\t}\n\n\tprivate updateBody(message?: Message): void {\n\t\tif (this.bodyTemplate) {\n\n\t\t\tconst count = this.count();\n\t\t\tthis.bodyTemplate.extensionsList.classList.toggle('hidden', count === 0);\n\t\t\tthis.bodyTemplate.messageContainer.classList.toggle('hidden', !message && count > 0);\n\n\t\t\tif (this.isBodyVisible()) {\n\t\t\t\tif (message) {\n\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = SeverityIcon.className(message.severity);\n\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = message.text;\n\t\t\t\t} else if (this.count() === 0) {\n\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = '';\n\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize('no extensions found', \"No extensions found.\");\n\t\t\t\t}\n\t\t\t\tif (this.bodyTemplate.messageBox.textContent) {\n\t\t\t\t\talert(this.bodyTemplate.messageBox.textContent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.updateSize();\n\t}\n\n\tprivate getMessage(error: any): Message {\n\t\tif (this.isOfflineError(error)) {\n\t\t\treturn { text: localize('offline error', \"Unable to search the Marketplace when offline, please check your network connection.\"), severity: Severity.Warning };\n\t\t} else {\n\t\t\treturn { text: localize('error', \"Error while fetching extensions. {0}\", getErrorMessage(error)), severity: Severity.Error };\n\t\t}\n\t}\n\n\tprivate isOfflineError(error: Error): boolean {\n\t\tif (error instanceof ExtensionGalleryError) {\n\t\t\treturn error.code === ExtensionGalleryErrorCode.Offline;\n\t\t}\n\t\treturn isOfflineError(error);\n\t}\n\n\tprotected updateSize() {\n\t\tif (this.options.flexibleHeight) {\n\t\t\tthis.maximumBodySize = this.list?.model.length ? Number.POSITIVE_INFINITY : 0;\n\t\t\tthis.storageService.store(`${this.id}.size`, this.list?.model.length || 0, StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tif (this.queryRequest) {\n\t\t\tthis.queryRequest.request.cancel();\n\t\t\tthis.queryRequest = null;\n\t\t}\n\t\tif (this.queryResult) {\n\t\t\tthis.queryResult.disposables.dispose();\n\t\t\tthis.queryResult = undefined;\n\t\t}\n\t\tthis.list = null;\n\t}\n\n\tstatic isLocalExtensionsQuery(query: string, sortBy?: string): boolean {\n\t\treturn this.isInstalledExtensionsQuery(query)\n\t\t\t|| this.isSearchInstalledExtensionsQuery(query)\n\t\t\t|| this.isOutdatedExtensionsQuery(query)\n\t\t\t|| this.isEnabledExtensionsQuery(query)\n\t\t\t|| this.isDisabledExtensionsQuery(query)\n\t\t\t|| this.isBuiltInExtensionsQuery(query)\n\t\t\t|| this.isSearchBuiltInExtensionsQuery(query)\n\t\t\t|| this.isBuiltInGroupExtensionsQuery(query)\n\t\t\t|| this.isSearchDeprecatedExtensionsQuery(query)\n\t\t\t|| this.isSearchWorkspaceUnsupportedExtensionsQuery(query)\n\t\t\t|| this.isSearchRecentlyUpdatedQuery(query)\n\t\t\t|| this.isSearchExtensionUpdatesQuery(query)\n\t\t\t|| this.isSortInstalledExtensionsQuery(query, sortBy)\n\t\t\t|| this.isFeatureExtensionsQuery(query);\n\t}\n\n\tstatic isSearchBuiltInExtensionsQuery(query: string): boolean {\n\t\treturn /@builtin\\s.+|.+\\s@builtin/i.test(query);\n\t}\n\n\tstatic isBuiltInExtensionsQuery(query: string): boolean {\n\t\treturn /^@builtin$/i.test(query.trim());\n\t}\n\n\tstatic isBuiltInGroupExtensionsQuery(query: string): boolean {\n\t\treturn /^@builtin:.+$/i.test(query.trim());\n\t}\n\n\tstatic isSearchWorkspaceUnsupportedExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@workspaceUnsupported(:(untrusted|virtual)(Partial)?)?(\\s|$)/i.test(query);\n\t}\n\n\tstatic isInstalledExtensionsQuery(query: string): boolean {\n\t\treturn /@installed$/i.test(query);\n\t}\n\n\tstatic isSearchInstalledExtensionsQuery(query: string): boolean {\n\t\treturn /@installed\\s./i.test(query) || this.isFeatureExtensionsQuery(query);\n\t}\n\n\tstatic isOutdatedExtensionsQuery(query: string): boolean {\n\t\treturn /@outdated/i.test(query);\n\t}\n\n\tstatic isEnabledExtensionsQuery(query: string): boolean {\n\t\treturn /@enabled/i.test(query) && !/@builtin/i.test(query);\n\t}\n\n\tstatic isDisabledExtensionsQuery(query: string): boolean {\n\t\treturn /@disabled/i.test(query) && !/@builtin/i.test(query);\n\t}\n\n\tstatic isSearchDeprecatedExtensionsQuery(query: string): boolean {\n\t\treturn /@deprecated\\s?.*/i.test(query);\n\t}\n\n\tstatic isRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /^@recommended$/i.test(query.trim());\n\t}\n\n\tstatic isSearchRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended\\s.+/i.test(query);\n\t}\n\n\tstatic isWorkspaceRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:workspace/i.test(query);\n\t}\n\n\tstatic isExeRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@exe:.+/i.test(query);\n\t}\n\n\tstatic isRemoteRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:remotes/i.test(query);\n\t}\n\n\tstatic isKeymapsRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:keymaps/i.test(query);\n\t}\n\n\tstatic isLanguageRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:languages/i.test(query);\n\t}\n\n\tstatic isSortInstalledExtensionsQuery(query: string, sortBy?: string): boolean {\n\t\treturn (sortBy !== undefined && sortBy !== '' && query === '') || (!sortBy && /^@sort:\\S*$/i.test(query));\n\t}\n\n\tstatic isSearchPopularQuery(query: string): boolean {\n\t\treturn /@popular/i.test(query);\n\t}\n\n\tstatic isSearchRecentlyPublishedQuery(query: string): boolean {\n\t\treturn /@recentlyPublished/i.test(query);\n\t}\n\n\tstatic isSearchRecentlyUpdatedQuery(query: string): boolean {\n\t\treturn /@recentlyUpdated/i.test(query);\n\t}\n\n\tstatic isSearchExtensionUpdatesQuery(query: string): boolean {\n\t\treturn /@updates/i.test(query);\n\t}\n\n\tstatic isSortUpdateDateQuery(query: string): boolean {\n\t\treturn /@sort:updateDate/i.test(query);\n\t}\n\n\tstatic isFeatureExtensionsQuery(query: string): boolean {\n\t\treturn /@feature:/i.test(query);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tif (!this.list) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(this.list.getFocus().length || this.list.getSelection().length)) {\n\t\t\tthis.list.focusNext();\n\t\t}\n\t\tthis.list.domFocus();\n\t}\n}\n\nexport class DefaultPopularExtensionsView extends ExtensionsListView {\n\n\toverride async show(): Promise<IPagedModel<IExtension>> {\n\t\tconst query = this.extensionManagementServerService.webExtensionManagementServer && !this.extensionManagementServerService.localExtensionManagementServer && !this.extensionManagementServerService.remoteExtensionManagementServer ? '@web' : '';\n\t\treturn super.show(query);\n\t}\n\n}\n\nexport class ServerInstalledExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : '@installed';\n\t\tif (!ExtensionsListView.isLocalExtensionsQuery(query) || ExtensionsListView.isSortInstalledExtensionsQuery(query)) {\n\t\t\tquery = query += ' @installed';\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n}\n\nexport class EnabledExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query || '@enabled';\n\t\treturn ExtensionsListView.isEnabledExtensionsQuery(query) ? super.show(query) :\n\t\t\tExtensionsListView.isSortInstalledExtensionsQuery(query) ? super.show('@enabled ' + query) : this.showEmptyModel();\n\t}\n}\n\nexport class DisabledExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query || '@disabled';\n\t\treturn ExtensionsListView.isDisabledExtensionsQuery(query) ? super.show(query) :\n\t\t\tExtensionsListView.isSortInstalledExtensionsQuery(query) ? super.show('@disabled ' + query) : this.showEmptyModel();\n\t}\n}\n\nexport class OutdatedExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : '@outdated';\n\t\tif (ExtensionsListView.isSearchExtensionUpdatesQuery(query)) {\n\t\t\tquery = query.replace('@updates', '@outdated');\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n\tprotected override updateSize() {\n\t\tsuper.updateSize();\n\t\tthis.setExpanded(this.count() > 0);\n\t}\n\n}\n\nexport class RecentlyUpdatedExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : '@recentlyUpdated';\n\t\tif (ExtensionsListView.isSearchExtensionUpdatesQuery(query)) {\n\t\t\tquery = query.replace('@updates', '@recentlyUpdated');\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n}\n\nexport interface StaticQueryExtensionsViewOptions extends ExtensionsListViewOptions {\n\treadonly query: string;\n}\n\nexport class StaticQueryExtensionsView extends ExtensionsListView {\n\n\tconstructor(\n\t\tprotected override readonly options: StaticQueryExtensionsViewOptions,\n\t\tviewletViewOptions: IViewletViewOptions,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionRecommendationsService extensionRecommendationsService: IExtensionRecommendationsService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IExtensionManagementServerService extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService workspaceService: IWorkspaceContextService,\n\t\t@IProductService productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkspaceTrustManagementService workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkbenchExtensionEnablementService extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IExtensionFeaturesManagementService extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(options, viewletViewOptions, notificationService, keybindingService, contextMenuService, instantiationService, themeService, extensionService,\n\t\t\textensionsWorkbenchService, extensionRecommendationsService, telemetryService, hoverService, configurationService, contextService, extensionManagementServerService,\n\t\t\textensionManifestPropertiesService, extensionManagementService, workspaceService, productService, contextKeyService, viewDescriptorService, openerService,\n\t\t\tstorageService, workspaceTrustManagementService, extensionEnablementService, extensionFeaturesManagementService,\n\t\t\turiIdentityService, logService);\n\t}\n\n\toverride show(): Promise<IPagedModel<IExtension>> {\n\t\treturn super.show(this.options.query);\n\t}\n}\n\nfunction toSpecificWorkspaceUnsupportedQuery(query: string, qualifier: string): string | undefined {\n\tif (!query) {\n\t\treturn '@workspaceUnsupported:' + qualifier;\n\t}\n\tconst match = query.match(new RegExp(`@workspaceUnsupported(:${qualifier})?(\\\\s|$)`, 'i'));\n\tif (match) {\n\t\tif (!match[1]) {\n\t\t\treturn query.replace(/@workspaceUnsupported/gi, '@workspaceUnsupported:' + qualifier);\n\t\t}\n\t\treturn query;\n\t}\n\treturn undefined;\n}\n\n\nexport class UntrustedWorkspaceUnsupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'untrusted');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class UntrustedWorkspacePartiallySupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'untrustedPartial');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class VirtualWorkspaceUnsupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'virtual');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class VirtualWorkspacePartiallySupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'virtualPartial');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class DeprecatedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\treturn ExtensionsListView.isSearchDeprecatedExtensionsQuery(query) ? super.show(query) : this.showEmptyModel();\n\t}\n}\n\nexport class SearchMarketplaceExtensionsView extends ExtensionsListView {\n\n\tprivate readonly reportSearchFinishedDelayer = this._register(new ThrottledDelayer(2000));\n\tprivate searchWaitPromise: Promise<void> = Promise.resolve();\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst queryPromise = super.show(query);\n\t\tthis.reportSearchFinishedDelayer.trigger(() => this.reportSearchFinished());\n\t\tthis.searchWaitPromise = queryPromise.then(null, null);\n\t\treturn queryPromise;\n\t}\n\n\tprivate async reportSearchFinished(): Promise<void> {\n\t\tawait this.searchWaitPromise;\n\t\tthis.telemetryService.publicLog2('extensionsView:MarketplaceSearchFinished');\n\t}\n}\n\nexport class DefaultRecommendedExtensionsView extends ExtensionsListView {\n\tprivate readonly recommendedExtensionsQuery = '@recommended:all';\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(this.extensionRecommendationsService.onDidChangeRecommendations(() => {\n\t\t\tthis.show('');\n\t\t}));\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tif (query && query.trim() !== this.recommendedExtensionsQuery) {\n\t\t\treturn this.showEmptyModel();\n\t\t}\n\t\tconst model = await super.show(this.recommendedExtensionsQuery);\n\t\tif (!this.extensionsWorkbenchService.local.some(e => !e.isBuiltin)) {\n\t\t\t// This is part of popular extensions view. Collapse if no installed extensions.\n\t\t\tthis.setExpanded(model.length > 0);\n\t\t}\n\t\treturn model;\n\t}\n\n}\n\nexport class RecommendedExtensionsView extends ExtensionsListView {\n\tprivate readonly recommendedExtensionsQuery = '@recommended';\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(this.extensionRecommendationsService.onDidChangeRecommendations(() => {\n\t\t\tthis.show('');\n\t\t}));\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\treturn (query && query.trim() !== this.recommendedExtensionsQuery) ? this.showEmptyModel() : super.show(this.recommendedExtensionsQuery);\n\t}\n}\n\nexport class WorkspaceRecommendedExtensionsView extends ExtensionsListView implements IWorkspaceRecommendedExtensionsView {\n\tprivate readonly recommendedExtensionsQuery = '@recommended:workspace';\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(this.extensionRecommendationsService.onDidChangeRecommendations(() => this.show(this.recommendedExtensionsQuery)));\n\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => this.show(this.recommendedExtensionsQuery)));\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst shouldShowEmptyView = query && query.trim() !== '@recommended' && query.trim() !== '@recommended:workspace';\n\t\tconst model = await (shouldShowEmptyView ? this.showEmptyModel() : super.show(this.recommendedExtensionsQuery));\n\t\tthis.setExpanded(model.length > 0);\n\t\treturn model;\n\t}\n\n\tprivate async getInstallableWorkspaceRecommendations(): Promise<IExtension[]> {\n\t\tconst installed = (await this.extensionsWorkbenchService.queryLocal())\n\t\t\t.filter(l => l.enablementState !== EnablementState.DisabledByExtensionKind); // Filter extensions disabled by kind\n\t\tconst recommendations = (await this.getWorkspaceRecommendations())\n\t\t\t.filter(recommendation => installed.every(local => isString(recommendation) ? !areSameExtensions({ id: recommendation }, local.identifier) : !this.uriIdentityService.extUri.isEqual(recommendation, local.local?.location)));\n\t\treturn this.getInstallableRecommendations(recommendations, { source: 'install-all-workspace-recommendations' }, CancellationToken.None);\n\t}\n\n\tasync installWorkspaceRecommendations(): Promise<void> {\n\t\tconst installableRecommendations = await this.getInstallableWorkspaceRecommendations();\n\t\tif (installableRecommendations.length) {\n\t\t\tconst galleryExtensions: InstallExtensionInfo[] = [];\n\t\t\tconst resourceExtensions: IExtension[] = [];\n\t\t\tfor (const recommendation of installableRecommendations) {\n\t\t\t\tif (recommendation.gallery) {\n\t\t\t\t\tgalleryExtensions.push({ extension: recommendation.gallery, options: {} });\n\t\t\t\t} else {\n\t\t\t\t\tresourceExtensions.push(recommendation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait Promise.all([\n\t\t\t\tthis.extensionManagementService.installGalleryExtensions(galleryExtensions),\n\t\t\t\t...resourceExtensions.map(extension => this.extensionsWorkbenchService.install(extension))\n\t\t\t]);\n\t\t} else {\n\t\t\tthis.notificationService.notify({\n\t\t\t\tseverity: Severity.Info,\n\t\t\t\tmessage: localize('no local extensions', \"There are no extensions to install.\")\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nexport class PreferredExtensionsPagedModel implements IPagedModel<IExtension> {\n\n\tprivate readonly resolved = new Map<number, IExtension>();\n\tprivate preferredGalleryExtensions = new Set<string>();\n\tprivate resolvedGalleryExtensionsFromQuery: IExtension[] = [];\n\tprivate readonly pages: Array<{\n\t\tpromise: Promise<void> | null;\n\t\tcts: CancellationTokenSource | null;\n\t\tpromiseIndexes: Set<number>;\n\t}>;\n\n\tpublic readonly length: number;\n\n\tget onDidIncrementLength(): Event<number> {\n\t\treturn Event.None;\n\t}\n\n\tconstructor(\n\t\tprivate readonly preferredExtensions: IExtension[],\n\t\tprivate readonly pager: IPager<IExtension>,\n\t) {\n\t\tfor (let i = 0; i < this.preferredExtensions.length; i++) {\n\t\t\tthis.resolved.set(i, this.preferredExtensions[i]);\n\t\t}\n\n\t\tfor (const e of preferredExtensions) {\n\t\t\tif (e.identifier.uuid) {\n\t\t\t\tthis.preferredGalleryExtensions.add(e.identifier.uuid);\n\t\t\t}\n\t\t}\n\n\t\t// expected that all preferred gallery extensions will be part of the query results\n\t\tthis.length = (preferredExtensions.length - this.preferredGalleryExtensions.size) + this.pager.total;\n\n\t\tconst totalPages = Math.ceil(this.pager.total / this.pager.pageSize);\n\t\tthis.populateResolvedExtensions(0, this.pager.firstPage);\n\t\tthis.pages = range(totalPages - 1).map(() => ({\n\t\t\tpromise: null,\n\t\t\tcts: null,\n\t\t\tpromiseIndexes: new Set<number>(),\n\t\t}));\n\t}\n\n\tisResolved(index: number): boolean {\n\t\treturn this.resolved.has(index);\n\t}\n\n\tget(index: number): IExtension {\n\t\treturn this.resolved.get(index)!;\n\t}\n\n\tasync resolve(index: number, cancellationToken: CancellationToken): Promise<IExtension> {\n\t\tif (cancellationToken.isCancellationRequested) {\n\t\t\tthrow new CancellationError();\n\t\t}\n\n\t\tif (this.isResolved(index)) {\n\t\t\treturn this.get(index);\n\t\t}\n\n\t\tconst indexInPagedModel = index - this.preferredExtensions.length + this.resolvedGalleryExtensionsFromQuery.length;\n\t\tconst pageIndex = Math.floor(indexInPagedModel / this.pager.pageSize);\n\t\tconst page = this.pages[pageIndex];\n\n\t\tif (!page.promise) {\n\t\t\tpage.cts = new CancellationTokenSource();\n\t\t\tpage.promise = this.pager.getPage(pageIndex, page.cts.token)\n\t\t\t\t.then(extensions => this.populateResolvedExtensions(pageIndex, extensions))\n\t\t\t\t.catch(e => { page.promise = null; throw e; })\n\t\t\t\t.finally(() => page.cts = null);\n\t\t}\n\n\t\tconst listener = cancellationToken.onCancellationRequested(() => {\n\t\t\tif (!page.cts) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpage.promiseIndexes.delete(index);\n\t\t\tif (page.promiseIndexes.size === 0) {\n\t\t\t\tpage.cts.cancel();\n\t\t\t}\n\t\t});\n\n\t\tpage.promiseIndexes.add(index);\n\n\t\ttry {\n\t\t\tawait page.promise;\n\t\t} finally {\n\t\t\tlistener.dispose();\n\t\t}\n\n\t\treturn this.get(index);\n\t}\n\n\tprivate populateResolvedExtensions(pageIndex: number, extensions: IExtension[]): void {\n\t\tlet adjustIndexOfNextPagesBy = 0;\n\t\tconst pageStartIndex = pageIndex * this.pager.pageSize;\n\t\tfor (let i = 0; i < extensions.length; i++) {\n\t\t\tconst e = extensions[i];\n\t\t\tif (e.gallery?.identifier.uuid && this.preferredGalleryExtensions.has(e.gallery.identifier.uuid)) {\n\t\t\t\tthis.resolvedGalleryExtensionsFromQuery.push(e);\n\t\t\t\tadjustIndexOfNextPagesBy++;\n\t\t\t} else {\n\t\t\t\tthis.resolved.set(this.preferredExtensions.length - this.resolvedGalleryExtensionsFromQuery.length + pageStartIndex + i, e);\n\t\t\t}\n\t\t}\n\t\t// If this page has preferred gallery extensions, then adjust the index of the next pages\n\t\t// by the number of preferred gallery extensions found in this page. Because these preferred extensions\n\t\t// are already in the resolved list and since we did not add them now, we need to adjust the indices of the next pages.\n\t\t// Skip first page as the preferred extensions are always in the first page\n\t\tif (pageIndex !== 0 && adjustIndexOfNextPagesBy) {\n\t\t\tconst nextPageStartIndex = (pageIndex + 1) * this.pager.pageSize;\n\t\t\tconst indices = [...this.resolved.keys()].sort();\n\t\t\tfor (const index of indices) {\n\t\t\t\tif (index >= nextPageStartIndex) {\n\t\t\t\t\tconst e = this.resolved.get(index);\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\tthis.resolved.delete(index);\n\t\t\t\t\t\tthis.resolved.set(index - adjustIndexOfNextPagesBy, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"]}