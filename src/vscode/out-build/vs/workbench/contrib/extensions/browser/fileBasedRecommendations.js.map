{"version":3,"sources":["vs/workbench/contrib/extensions/browser/fileBasedRecommendations.ts"],"names":[],"mappings":"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","file":"fileBasedRecommendations.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ExtensionRecommendations, GalleryExtensionRecommendation } from './extensionRecommendations.js';\nimport { EnablementState } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { ExtensionRecommendationReason, IExtensionIgnoredRecommendationsService } from '../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { IExtensionsWorkbenchService, IExtension } from '../common/extensions.js';\nimport { localize } from '../../../../nls.js';\nimport { StorageScope, IStorageService, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IFileContentCondition, IFilePathCondition, IFileLanguageCondition, IFileOpenCondition } from '../../../../base/common/product.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { match } from '../../../../base/common/glob.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IExtensionRecommendationNotificationService, RecommendationsNotificationResult, RecommendationSource } from '../../../../platform/extensionRecommendations/common/extensionRecommendations.js';\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CellUri } from '../../notebook/common/notebookCommon.js';\nimport { disposableTimeout } from '../../../../base/common/async.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { areSameExtensions } from '../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { isEmptyObject } from '../../../../base/common/types.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../editor/common/languages/modesRegistry.js';\nimport { IUntitledTextEditorService } from '../../../services/untitled/common/untitledTextEditorService.js';\n\nconst promptedRecommendationsStorageKey = 'fileBasedRecommendations/promptedRecommendations';\nconst recommendationsStorageKey = 'extensionsAssistant/recommendations';\nconst milliSecondsInADay = 1000 * 60 * 60 * 24;\n\n// Minimum length of untitled file to allow triggering extension recommendations for auto-detected language.\nconst untitledFileRecommendationsMinLength = 1000;\n\nexport class FileBasedRecommendations extends ExtensionRecommendations {\n\n\tprivate readonly fileOpenRecommendations: IStringDictionary<IFileOpenCondition[]>;\n\tprivate readonly recommendationsByPattern = new Map<string, IStringDictionary<IFileOpenCondition[]>>();\n\tprivate readonly fileBasedRecommendations = new Map<string, { recommendedTime: number }>();\n\tprivate readonly fileBasedImportantRecommendations = new Set<string>();\n\n\tget recommendations(): ReadonlyArray<GalleryExtensionRecommendation> {\n\t\tconst recommendations: GalleryExtensionRecommendation[] = [];\n\t\t[...this.fileBasedRecommendations.keys()]\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (this.fileBasedRecommendations.get(a)!.recommendedTime === this.fileBasedRecommendations.get(b)!.recommendedTime) {\n\t\t\t\t\tif (this.fileBasedImportantRecommendations.has(a)) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.fileBasedImportantRecommendations.has(b)) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.fileBasedRecommendations.get(a)!.recommendedTime > this.fileBasedRecommendations.get(b)!.recommendedTime ? -1 : 1;\n\t\t\t})\n\t\t\t.forEach(extensionId => {\n\t\t\t\trecommendations.push({\n\t\t\t\t\textension: extensionId,\n\t\t\t\t\treason: {\n\t\t\t\t\t\treasonId: ExtensionRecommendationReason.File,\n\t\t\t\t\t\treasonText: localize('fileBasedRecommendation', \"This extension is recommended based on the files you recently opened.\")\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\treturn recommendations;\n\t}\n\n\tget importantRecommendations(): ReadonlyArray<GalleryExtensionRecommendation> {\n\t\treturn this.recommendations.filter(e => this.fileBasedImportantRecommendations.has(e.extension));\n\t}\n\n\tget otherRecommendations(): ReadonlyArray<GalleryExtensionRecommendation> {\n\t\treturn this.recommendations.filter(e => !this.fileBasedImportantRecommendations.has(e.extension));\n\t}\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService private readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IProductService productService: IProductService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IExtensionRecommendationNotificationService private readonly extensionRecommendationNotificationService: IExtensionRecommendationNotificationService,\n\t\t@IExtensionIgnoredRecommendationsService private readonly extensionIgnoredRecommendationsService: IExtensionIgnoredRecommendationsService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IUntitledTextEditorService private readonly untitledTextEditorService: IUntitledTextEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.fileOpenRecommendations = {};\n\t\tif (productService.extensionRecommendations) {\n\t\t\tfor (const [extensionId, recommendation] of Object.entries(productService.extensionRecommendations)) {\n\t\t\t\tif (recommendation.onFileOpen) {\n\t\t\t\t\tthis.fileOpenRecommendations[extensionId.toLowerCase()] = recommendation.onFileOpen;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected async doActivate(): Promise<void> {\n\t\tif (isEmptyObject(this.fileOpenRecommendations)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.extensionsWorkbenchService.whenInitialized;\n\n\t\tconst cachedRecommendations = this.getCachedRecommendations();\n\t\tconst now = Date.now();\n\t\t// Retire existing recommendations if they are older than a week or are not part of this.productService.extensionTips anymore\n\t\tObject.entries(cachedRecommendations).forEach(([key, value]) => {\n\t\t\tconst diff = (now - value) / milliSecondsInADay;\n\t\t\tif (diff <= 7 && this.fileOpenRecommendations[key]) {\n\t\t\t\tthis.fileBasedRecommendations.set(key.toLowerCase(), { recommendedTime: value });\n\t\t\t}\n\t\t});\n\n\t\tthis._register(this.modelService.onModelAdded(model => this.onModelAdded(model)));\n\t\tthis.modelService.getModels().forEach(model => this.onModelAdded(model));\n\t}\n\n\tprivate onModelAdded(model: ITextModel): void {\n\t\tconst uri = model.uri.scheme === Schemas.vscodeNotebookCell ? CellUri.parse(model.uri)?.notebook : model.uri;\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst supportedSchemes = distinct([Schemas.untitled, Schemas.file, Schemas.vscodeRemote, ...this.workspaceContextService.getWorkspace().folders.map(folder => folder.uri.scheme)]);\n\t\tif (!uri || !supportedSchemes.includes(uri.scheme)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// re-schedule this bit of the operation to be off the critical path - in case glob-match is slow\n\t\tdisposableTimeout(() => this.promptImportantRecommendations(uri, model), 0, this._store);\n\t}\n\n\t/**\n\t * Prompt the user to either install the recommended extension for the file type in the current editor model\n\t * or prompt to search the marketplace if it has extensions that can support the file type\n\t */\n\tprivate promptImportantRecommendations(uri: URI, model: ITextModel, extensionRecommendations?: IStringDictionary<IFileOpenCondition[]>): void {\n\t\tif (model.isDisposed()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst pattern = extname(uri).toLowerCase();\n\t\textensionRecommendations = extensionRecommendations ?? this.recommendationsByPattern.get(pattern) ?? this.fileOpenRecommendations;\n\t\tconst extensionRecommendationEntries = Object.entries(extensionRecommendations);\n\t\tif (extensionRecommendationEntries.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst processedPathGlobs = new Map<string, boolean>();\n\t\tconst installed = this.extensionsWorkbenchService.local;\n\t\tconst recommendationsByPattern: IStringDictionary<IFileOpenCondition[]> = {};\n\t\tconst matchedRecommendations: IStringDictionary<IFileOpenCondition[]> = {};\n\t\tconst unmatchedRecommendations: IStringDictionary<IFileOpenCondition[]> = {};\n\t\tlet listenOnLanguageChange = false;\n\t\tconst languageId = model.getLanguageId();\n\n\t\t// Allow language-specific recommendations for untitled files when language is auto-detected only when the file is large.\n\t\tconst untitledModel = this.untitledTextEditorService.get(uri);\n\t\tconst allowLanguageMatch =\n\t\t\t!untitledModel ||\n\t\t\tuntitledModel.hasLanguageSetExplicitly ||\n\t\t\tmodel.getValueLength() > untitledFileRecommendationsMinLength;\n\n\t\tfor (const [extensionId, conditions] of extensionRecommendationEntries) {\n\t\t\tconst conditionsByPattern: IFileOpenCondition[] = [];\n\t\t\tconst matchedConditions: IFileOpenCondition[] = [];\n\t\t\tconst unmatchedConditions: IFileOpenCondition[] = [];\n\t\t\tfor (const condition of conditions) {\n\t\t\t\tlet languageMatched = false;\n\t\t\t\tlet pathGlobMatched = false;\n\n\t\t\t\tconst isLanguageCondition = !!(<IFileLanguageCondition>condition).languages;\n\t\t\t\tconst isFileContentCondition = !!(<IFileContentCondition>condition).contentPattern;\n\t\t\t\tif (isLanguageCondition || isFileContentCondition) {\n\t\t\t\t\tconditionsByPattern.push(condition);\n\t\t\t\t}\n\n\t\t\t\tif (isLanguageCondition && allowLanguageMatch) {\n\t\t\t\t\tif ((<IFileLanguageCondition>condition).languages.includes(languageId)) {\n\t\t\t\t\t\tlanguageMatched = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst pathGlob = (<IFilePathCondition>condition).pathGlob;\n\t\t\t\tif (pathGlob) {\n\t\t\t\t\tif (processedPathGlobs.get(pathGlob) ?? match(pathGlob, uri.with({ fragment: '' }).toString(), { ignoreCase: true })) {\n\t\t\t\t\t\tpathGlobMatched = true;\n\t\t\t\t\t}\n\t\t\t\t\tprocessedPathGlobs.set(pathGlob, pathGlobMatched);\n\t\t\t\t}\n\n\t\t\t\tlet matched = languageMatched || pathGlobMatched;\n\n\t\t\t\t// If the resource has pattern (extension) and not matched, then we don't need to check the other conditions\n\t\t\t\tif (pattern && !matched) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (matched && condition.whenInstalled) {\n\t\t\t\t\tif (!condition.whenInstalled.every(id => installed.some(local => areSameExtensions({ id }, local.identifier)))) {\n\t\t\t\t\t\tmatched = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (matched && condition.whenNotInstalled) {\n\t\t\t\t\tif (installed.some(local => condition.whenNotInstalled?.some(id => areSameExtensions({ id }, local.identifier)))) {\n\t\t\t\t\t\tmatched = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (matched && isFileContentCondition) {\n\t\t\t\t\tif (!model.findMatches((<IFileContentCondition>condition).contentPattern, false, true, false, null, false).length) {\n\t\t\t\t\t\tmatched = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (matched) {\n\t\t\t\t\tmatchedConditions.push(condition);\n\t\t\t\t\tconditionsByPattern.pop();\n\t\t\t\t} else {\n\t\t\t\t\tif (isLanguageCondition || isFileContentCondition) {\n\t\t\t\t\t\tunmatchedConditions.push(condition);\n\t\t\t\t\t\tif (isLanguageCondition) {\n\t\t\t\t\t\t\tlistenOnLanguageChange = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif (matchedConditions.length) {\n\t\t\t\tmatchedRecommendations[extensionId] = matchedConditions;\n\t\t\t}\n\t\t\tif (unmatchedConditions.length) {\n\t\t\t\tunmatchedRecommendations[extensionId] = unmatchedConditions;\n\t\t\t}\n\t\t\tif (conditionsByPattern.length) {\n\t\t\t\trecommendationsByPattern[extensionId] = conditionsByPattern;\n\t\t\t}\n\t\t}\n\n\t\tif (pattern) {\n\t\t\tthis.recommendationsByPattern.set(pattern, recommendationsByPattern);\n\t\t}\n\t\tif (Object.keys(unmatchedRecommendations).length) {\n\t\t\tif (listenOnLanguageChange) {\n\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\tdisposables.add(model.onDidChangeLanguage(() => {\n\t\t\t\t\t// re-schedule this bit of the operation to be off the critical path - in case glob-match is slow\n\t\t\t\t\tdisposableTimeout(() => {\n\t\t\t\t\t\tif (!disposables.isDisposed) {\n\t\t\t\t\t\t\tthis.promptImportantRecommendations(uri, model, unmatchedRecommendations);\n\t\t\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 0, disposables);\n\t\t\t\t}));\n\t\t\t\tdisposables.add(model.onWillDispose(() => disposables.dispose()));\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(matchedRecommendations).length) {\n\t\t\tthis.promptFromRecommendations(uri, model, matchedRecommendations);\n\t\t}\n\t}\n\n\tprivate promptFromRecommendations(uri: URI, model: ITextModel, extensionRecommendations: IStringDictionary<IFileOpenCondition[]>): void {\n\t\tlet isImportantRecommendationForLanguage = false;\n\t\tconst importantRecommendations = new Set<string>();\n\t\tconst fileBasedRecommendations = new Set<string>();\n\t\tfor (const [extensionId, conditions] of Object.entries(extensionRecommendations)) {\n\t\t\tfor (const condition of conditions) {\n\t\t\t\tfileBasedRecommendations.add(extensionId);\n\t\t\t\tif (condition.important) {\n\t\t\t\t\timportantRecommendations.add(extensionId);\n\t\t\t\t\tthis.fileBasedImportantRecommendations.add(extensionId);\n\t\t\t\t}\n\t\t\t\tif ((<IFileLanguageCondition>condition).languages) {\n\t\t\t\t\tisImportantRecommendationForLanguage = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Update file based recommendations\n\t\tfor (const recommendation of fileBasedRecommendations) {\n\t\t\tconst filedBasedRecommendation = this.fileBasedRecommendations.get(recommendation) || { recommendedTime: Date.now(), sources: [] };\n\t\t\tfiledBasedRecommendation.recommendedTime = Date.now();\n\t\t\tthis.fileBasedRecommendations.set(recommendation, filedBasedRecommendation);\n\t\t}\n\n\t\tthis.storeCachedRecommendations();\n\n\t\tif (this.extensionRecommendationNotificationService.hasToIgnoreRecommendationNotifications()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst language = model.getLanguageId();\n\t\tconst languageName = this.languageService.getLanguageName(language);\n\t\tif (importantRecommendations.size &&\n\t\t\tthis.promptRecommendedExtensionForFileType(languageName && isImportantRecommendationForLanguage && language !== PLAINTEXT_LANGUAGE_ID ? localize('languageName', \"the {0} language\", languageName) : basename(uri), language, [...importantRecommendations])) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate promptRecommendedExtensionForFileType(name: string, language: string, recommendations: string[]): boolean {\n\t\trecommendations = this.filterIgnoredOrNotAllowed(recommendations);\n\t\tif (recommendations.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\trecommendations = this.filterInstalled(recommendations, this.extensionsWorkbenchService.local)\n\t\t\t.filter(extensionId => this.fileBasedImportantRecommendations.has(extensionId));\n\n\t\tconst promptedRecommendations = language !== PLAINTEXT_LANGUAGE_ID ? this.getPromptedRecommendations()[language] : undefined;\n\t\tif (promptedRecommendations) {\n\t\t\trecommendations = recommendations.filter(extensionId => !promptedRecommendations.includes(extensionId));\n\t\t}\n\n\t\tif (recommendations.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.promptImportantExtensionsInstallNotification(recommendations, name, language);\n\t\treturn true;\n\t}\n\n\tprivate async promptImportantExtensionsInstallNotification(extensions: string[], name: string, language: string): Promise<void> {\n\t\ttry {\n\t\t\tconst result = await this.extensionRecommendationNotificationService.promptImportantExtensionsInstallNotification({ extensions, name, source: RecommendationSource.FILE });\n\t\t\tif (result === RecommendationsNotificationResult.Accepted) {\n\t\t\t\tthis.addToPromptedRecommendations(language, extensions);\n\t\t\t}\n\t\t} catch (error) { /* Ignore */ }\n\t}\n\n\tprivate getPromptedRecommendations(): IStringDictionary<string[]> {\n\t\treturn JSON.parse(this.storageService.get(promptedRecommendationsStorageKey, StorageScope.PROFILE, '{}'));\n\t}\n\n\tprivate addToPromptedRecommendations(language: string, extensions: string[]) {\n\t\tconst promptedRecommendations = this.getPromptedRecommendations();\n\t\tpromptedRecommendations[language] = distinct([...(promptedRecommendations[language] ?? []), ...extensions]);\n\t\tthis.storageService.store(promptedRecommendationsStorageKey, JSON.stringify(promptedRecommendations), StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tprivate filterIgnoredOrNotAllowed(recommendationsToSuggest: string[]): string[] {\n\t\tconst ignoredRecommendations = [...this.extensionIgnoredRecommendationsService.ignoredRecommendations, ...this.extensionRecommendationNotificationService.ignoredRecommendations];\n\t\treturn recommendationsToSuggest.filter(id => !ignoredRecommendations.includes(id));\n\t}\n\n\tprivate filterInstalled(recommendationsToSuggest: string[], installed: IExtension[]): string[] {\n\t\tconst installedExtensionsIds = installed.reduce((result, i) => {\n\t\t\tif (i.enablementState !== EnablementState.DisabledByExtensionKind) {\n\t\t\t\tresult.add(i.identifier.id.toLowerCase());\n\t\t\t}\n\t\t\treturn result;\n\t\t}, new Set<string>());\n\t\treturn recommendationsToSuggest.filter(id => !installedExtensionsIds.has(id.toLowerCase()));\n\t}\n\n\tprivate getCachedRecommendations(): IStringDictionary<number> {\n\t\tlet storedRecommendations = JSON.parse(this.storageService.get(recommendationsStorageKey, StorageScope.PROFILE, '[]'));\n\t\tif (Array.isArray(storedRecommendations)) {\n\t\t\tstoredRecommendations = storedRecommendations.reduce<IStringDictionary<number>>((result, id) => { result[id] = Date.now(); return result; }, {});\n\t\t}\n\t\tconst result: IStringDictionary<number> = {};\n\t\tObject.entries(storedRecommendations).forEach(([key, value]) => {\n\t\t\tif (typeof value === 'number') {\n\t\t\t\tresult[key.toLowerCase()] = value;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tprivate storeCachedRecommendations(): void {\n\t\tconst storedRecommendations: IStringDictionary<number> = {};\n\t\tthis.fileBasedRecommendations.forEach((value, key) => storedRecommendations[key] = value.recommendedTime);\n\t\tthis.storageService.store(recommendationsStorageKey, JSON.stringify(storedRecommendations), StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n}\n"]}