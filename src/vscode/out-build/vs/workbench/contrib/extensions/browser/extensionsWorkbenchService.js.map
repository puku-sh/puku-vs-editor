{"version":3,"sources":["vs/workbench/contrib/extensions/browser/extensionsWorkbenchService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,oBAAoB,CAAC;AAC1C,OAAO,KAAK,MAAM,MAAM,0CAA0C,CAAC;AACnE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,KAAK,EAAE,MAAM,mCAAmC,CAAC;AAC1D,OAAO,EAAqB,QAAQ,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,MAAM,kCAAkC,CAAC;AAC1H,OAAO,EAAE,iBAAiB,EAAE,eAAe,EAAE,mBAAmB,EAAE,MAAM,mCAAmC,CAAC;AAC5G,OAAO,EAAE,UAAU,EAAE,iBAAiB,EAAE,YAAY,EAAE,MAAM,sCAAsC,CAAC;AACnG,OAAO,EAAU,eAAe,EAAE,MAAM,mCAAmC,CAAC;AAC5E,OAAO,EAAE,iBAAiB,EAAE,MAAM,oDAAoD,CAAC;AACvF,OAAO,EACN,wBAAwB,EAC6C,iBAAiB,EACA,0BAA0B,EAAwB,0BAA0B,EAGlK,sBAAsB,EACtB,yBAAyB,EACzB,0BAA0B,EAC1B,8CAA8C,EAC9C,wBAAwB,EAGxB,mCAAmC,EAEnC,MAAM,wEAAwE,CAAC;AAChF,OAAO,EAAE,oCAAoC,EAAmB,iCAAiC,EAA8B,oCAAoC,EAAsB,MAAM,qEAAqE,CAAC;AACrQ,OAAO,EAAE,gCAAgC,EAAE,8BAA8B,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,qBAAqB,EAAE,0BAA0B,EAAE,MAAM,4EAA4E,CAAC;AACtP,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,YAAY,EAAE,MAAM,wCAAwC,CAAC;AACtE,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAA2D,0BAA0B,EAAE,gCAAgC,EAAE,4BAA4B,EAA4G,2BAA2B,EAAE,UAAU,EAAyD,MAAM,yBAAyB,CAAC;AACxY,OAAO,EAAE,cAAc,EAAE,UAAU,EAAE,YAAY,EAAE,MAAM,kDAAkD,CAAC;AAC5G,OAAO,EAAE,WAAW,EAAgC,MAAM,wCAAwC,CAAC;AACnG,OAAO,EAAE,eAAe,EAA2B,MAAM,8BAA8B,CAAC;AACxF,OAAO,EAAE,WAAW,EAAE,MAAM,wCAAwC,CAAC;AACrE,OAAO,EAAoB,gBAAgB,EAAoB,MAAM,kDAAkD,CAAC;AACxH,OAAO,EAAE,oBAAoB,EAAE,oBAAoB,EAAE,QAAQ,EAAE,MAAM,0DAA0D,CAAC;AAChI,OAAO,KAAK,SAAS,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAAE,iBAAiB,EAAE,MAAM,yCAAyC,CAAC;AAC5E,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAC9G,OAAO,EAAE,YAAY,EAAE,MAAM,4CAA4C,CAAC;AAC1E,OAAO,EAAuF,mBAAmB,EAA+C,4BAA4B,EAAE,MAAM,sDAAsD,CAAC;AAC3P,OAAO,EAAE,gBAAgB,EAAE,MAAM,iDAAiD,CAAC;AACnF,OAAO,EAAE,eAAe,EAAE,MAAM,uDAAuD,CAAC;AACxF,OAAO,EAAE,UAAU,EAAE,MAAM,oCAAoC,CAAC;AAChE,OAAO,EAAE,mCAAmC,EAAE,MAAM,+DAA+D,CAAC;AACpH,OAAO,EAAE,wBAAwB,EAAE,8BAA8B,EAAgB,MAAM,0DAA0D,CAAC;AAClJ,OAAO,EAAe,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AACvG,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,kCAAkC,CAAC;AAC/F,OAAO,EAAE,mCAAmC,EAAE,MAAM,2EAA2E,CAAC;AAChI,OAAO,EAAE,iBAAiB,EAAgD,WAAW,EAAE,sBAAsB,EAAE,MAAM,mDAAmD,CAAC;AACzK,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,qCAAqC,CAAC;AACtE,OAAO,EAAE,SAAS,EAAE,MAAM,4DAA4D,CAAC;AACvF,OAAO,EAAE,cAAc,EAAE,MAAM,iDAAiD,CAAC;AACjF,OAAO,EAAE,qBAAqB,EAAE,MAAM,yDAAyD,CAAC;AAChG,OAAO,EAAE,iBAAiB,EAAkB,MAAM,iDAAiD,CAAC;AACpG,OAAO,EAAE,uBAAuB,EAAE,MAAM,6DAA6D,CAAC;AACtG,OAAO,EAAE,UAAU,EAAE,MAAM,oCAAoC,CAAC;AAChE,OAAO,EAAE,cAAc,EAAE,kBAAkB,EAAiB,MAAM,gDAAgD,CAAC;AACnH,OAAO,EAAE,cAAc,EAAa,MAAM,8CAA8C,CAAC;AACzF,OAAO,EAAE,yBAAyB,EAAE,aAAa,EAAE,MAAM,8DAA8D,CAAC;AACxH,OAAO,EAAE,mBAAmB,EAAE,MAAM,wDAAwD,CAAC;AAC7F,OAAO,EAAE,wBAAwB,EAAE,MAAM,oDAAoD,CAAC;AAC9F,OAAO,EAAE,+BAA+B,EAAE,MAAM,+BAA+B,CAAC;AAChF,OAAO,EAAE,aAAa,EAAE,MAAM,gDAAgD,CAAC;AAC/E,OAAO,EAAE,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AAC1F,OAAO,EAAmB,cAAc,EAAE,MAAM,wCAAwC,CAAC;AACzF,OAAO,EAAgC,sCAAsC,EAAE,gCAAgC,EAAE,MAAM,6EAA6E,CAAC;AACrM,OAAO,EAAE,OAAO,EAAE,MAAM,iCAAiC,CAAC;AAC1D,OAAO,EAAE,wBAAwB,EAAE,MAAM,gEAAgE,CAAC;AAiBnG,IAAM,SAAS,GAAf,MAAM,SAAS;IAQrB,YACS,aAAsD,EACtD,oBAAgF,EACxE,MAA8C,EACvD,KAAkC,EACjC,QAAuC,EAC9B,qBAAwG,EAC/F,cAAyD,EAChE,gBAAoD,EAC1D,UAAwC,EACvC,WAA0C,EACvC,cAAgD;QAVzD,kBAAa,GAAb,aAAa,CAAyC;QACtD,yBAAoB,GAApB,oBAAoB,CAA4D;QACxE,WAAM,GAAN,MAAM,CAAwC;QACvD,UAAK,GAAL,KAAK,CAA6B;QACjC,aAAQ,GAAR,QAAQ,CAA+B;QAC9B,0BAAqB,GAArB,qBAAqB,CAAmF;QAC9E,mBAAc,GAAd,cAAc,CAA0B;QAC/C,qBAAgB,GAAhB,gBAAgB,CAAmB;QACzC,eAAU,GAAV,UAAU,CAAa;QACtB,gBAAW,GAAX,WAAW,CAAc;QACtB,mBAAc,GAAd,cAAc,CAAiB;QAjB3D,oBAAe,4CAAoD;QAElE,0BAAqB,GAAG,IAAI,GAAG,EAAe,CAAC;IAiBvD,CAAC;IAED,IAAI,iBAAiB;QACpB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChC,OAAO,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC;QACrD,CAAC;QACD,IAAI,IAAI,CAAC,KAAK,EAAE,iBAAiB,EAAE,CAAC;YACnC,OAAO;gBACN,IAAI,EAAE,UAAU;gBAChB,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU;gBACjC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ;gBAC7B,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ;gBAC7B,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY;gBACrC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS;aAC/B,CAAC;QACH,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,IAAI,OAAO,CAAC,OAAsC;QACjD,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,CAAC;IACpC,CAAC;IAED,IAAI,kBAAkB;QACrB,OAAO,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC;IACnC,CAAC;IAED,IAAI,kBAAkB,CAAC,OAAgB;QACtC,IAAI,CAAC,mBAAmB,GAAG,OAAO,CAAC;IACpC,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,2BAAmB,CAAC;IAC1D,CAAC;IAED,IAAI,SAAS;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC;IAClD,CAAC;IAED,IAAI,iBAAiB;QACpB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC;QACrC,CAAC;QACD,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAChC,OAAO,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC;QACrD,CAAC;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IAED,IAAI,IAAI;QACP,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;QAC1B,CAAC;QACD,OAAO,IAAI,CAAC,8BAA8B,EAAE,EAAE,IAAI,IAAI,EAAE,CAAC;IAC1D,CAAC;IAED,IAAI,WAAW;QACd,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;QACtD,CAAC;QAED,OAAO,IAAI,CAAC,8BAA8B,EAAE,EAAE,WAAW,IAAI,IAAI,CAAC,IAAI,CAAC;IACxE,CAAC;IAED,IAAI,UAAU;QACb,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;QAChC,CAAC;QACD,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC5B,OAAO,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC;QAC1C,CAAC;QACD,OAAO,IAAI,CAAC,KAAK,EAAE,UAAU,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IAC7C,CAAC;IAED,IAAI,IAAI;QACP,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC;IAClF,CAAC;IAED,IAAI,SAAS;QACZ,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;QAC/B,CAAC;QACD,OAAO,IAAI,CAAC,8BAA8B,EAAE,EAAE,SAAS,IAAI,EAAE,CAAC;IAC/D,CAAC;IAED,IAAI,oBAAoB;QACvB,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO,IAAI,CAAC,OAAO,CAAC,oBAAoB,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;QACpE,CAAC;QAED,IAAI,IAAI,CAAC,KAAK,EAAE,oBAAoB,EAAE,CAAC;YACtC,OAAO,IAAI,CAAC,KAAK,CAAC,oBAAoB,CAAC;QACxC,CAAC;QAED,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IACxF,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC;IACtC,CAAC;IAED,IAAI,oBAAoB;QACvB,OAAO,IAAI,CAAC,OAAO,EAAE,oBAAoB,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IACtG,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC;IACtE,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC;IACtF,CAAC;IAED,IAAI,MAAM;QACT,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,MAAM,CAAC;IAC7B,CAAC;IAED,IAAI,aAAa;QAChB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,8BAA8B,EAAE,EAAE,OAAO,IAAI,EAAE,CAAC;IACnG,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,8BAA8B,EAAE,EAAE,WAAW,IAAI,EAAE,CAAC;IAC3G,CAAC;IAED,IAAI,GAAG;QACN,OAAO,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;IAClC,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,cAAc,CAAC;IACzG,CAAC;IAED,IAAI,eAAe;QAClB,OAAO,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,EAAE,WAAW,CAAC;IAC/C,CAAC;IAED,IAAY,YAAY;QACvB,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;YAC5C,OAAO,UAAU,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACrH,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,IAAY,wBAAwB;QACnC,IAAI,IAAI,CAAC,iBAAiB,EAAE,QAAQ,CAAC,IAAI,EAAE,CAAC;YAC3C,OAAO,UAAU,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC7I,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,IAAY,cAAc;QACzB,OAAO,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC;IACvC,CAAC;IAED,IAAY,cAAc;QACzB,IAAI,IAAI,CAAC,IAAI,iCAAyB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACtD,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;gBAC5D,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;oBAC5G,OAAO,UAAU,CAAC,YAAY,CAAC,8DAA8D,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAC/G,CAAC;gBACD,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;oBAChH,OAAO,UAAU,CAAC,YAAY,CAAC,iEAAiE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBAClH,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;IACxG,CAAC;IAED,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;IAClG,CAAC;IAED,IAAI,UAAU;QACb,OAAO,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC;IACxF,CAAC;IAED,IAAI,KAAK;QACR,OAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAGD,IAAW,WAAW;QACrB,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,eAAe,gDAAwC,CAAC;IACzF,CAAC;IAED,IAAW,iBAAiB;QAC3B,OAAO,IAAI,CAAC,SAAS,EAAE,aAAa,CAAC;IACtC,CAAC;IAID,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS,CAAC;IAC7D,CAAC;IAED,IAAI,MAAM;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC;IACvD,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC;IAC5D,CAAC;IAED,IAAI,SAAS;QACZ,OAAO,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC;IACjC,CAAC;IAED,IAAI,QAAQ;QACX,IAAI,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;gBAClC,OAAO,KAAK,CAAC;YACd,CAAC;YACD,oDAAoD;YACpD,IAAI,IAAI,CAAC,IAAI,iCAAyB,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,KAAK,QAAQ,EAAE,CAAC;gBACpF,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;gBAC3E,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;gBACjD,OAAO,IAAI,CAAC;YACb,CAAC;YACD,IAAI,IAAI,CAAC,sBAAsB,EAAE,CAAC;gBACjC,OAAO,IAAI,CAAC;YACb,CAAC;QACF,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,YAAY;QACb,CAAC;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IAED,IAAI,sBAAsB;QACzB,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO;eACjC,CAAC,4EAA8C,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC;eACnF,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,cAAc,mCAAuB;eAC7D,IAAI,CAAC,KAAK,CAAC,cAAc,KAAK,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,cAAc;eACpE,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IACjD,CAAC;IAED,IAAI,YAAY;QACf,OAAO,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,IAAI,aAAa;QAChB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC;QAEhC,IAAI,OAAO,EAAE,CAAC;YACb,OAAO,gCAAgC,CAAC,OAAO,CAAC,CAAC;QAClD,CAAC;aAAM,IAAI,KAAK,EAAE,CAAC;YAClB,OAAO,8BAA8B,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC;aAAM,CAAC;YACP,OAAO,EAAE,CAAC;QACX,CAAC;IACF,CAAC;IAED,IAAI,OAAO;QACV,OAAO,IAAI,CAAC,KAAK,EAAE,QAAQ,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,KAAK,CAAC;IACvE,CAAC;IAED,IAAI,UAAU;QACb,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC;IACjC,CAAC;IAED,IAAI,mBAAmB;QACtB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC;QACvC,CAAC;QACD,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,mBAAmB,CAAC;IACvD,CAAC;IAED,IAAI,oBAAoB;QACvB,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,oBAAoB,CAAC;IAC9F,CAAC;IAED,IAAI,iBAAiB;QACpB,OAAO,CAAC,CAAC,IAAI,CAAC,iBAAiB,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC;IACtE,CAAC;IAEO,QAAQ;QACf,OAAO,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC;IAC9D,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,KAAwB;QACzC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,IAAI,KAAK,EAAE,CAAC;YACX,OAAO,KAAK,CAAC,QAAQ,CAAC;QACvB,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACvC,CAAC;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC5B,OAAO,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC;QACxC,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAED,KAAK,CAAC,kBAAkB,CAAC,QAA2B,iBAAiB,CAAC,IAAI;QACzE,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,IAAI,KAAK,GAAG,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACvD,IAAI,CAAC,KAAK,EAAE,CAAC;gBACZ,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;oBAClC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;yBACrG,KAAK,CAAC,CAAC,CAAC,EAAE;wBACV,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;wBAC9C,MAAM,CAAC,CAAC;oBACT,CAAC,CAAC,CAAC,CAAC;gBACN,CAAC;qBAAM,CAAC;oBACP,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAAuB,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBAC3G,CAAC;YACF,CAAC;YACD,OAAO,KAAK,CAAC;QACd,CAAC;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAED,SAAS;QACR,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;YACxC,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;YAChD,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE,SAAS,EAAE,CAAC;YACvC,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO,IAAI,CAAC,IAAI,iCAAyB,CAAC;IAC3C,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,KAAwB;QACvC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,IAAI,KAAK,EAAE,SAAS,EAAE,CAAC;YACtB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACjE,OAAO,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjC,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;YAClB,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;gBAChC,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;YAC3D,CAAC;YACD,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,2BAA2B,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClF,CAAC;QAED,IAAI,IAAI,CAAC,IAAI,iCAAyB,EAAE,CAAC;YACxC,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,IAAI;;;EAG1D,IAAI,CAAC,WAAW;CACjB,CAAC,CAAC;QACD,CAAC;QAED,IAAI,IAAI,CAAC,iBAAiB,EAAE,SAAS,EAAE,CAAC;YACvC,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,iBAAiB,EAAE,SAAS,CAAC,CAAC;YACnF,OAAO,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjC,CAAC;QAED,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;IACnD,CAAC;IAED,YAAY;QACX,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;YAC3C,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;YACnD,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO,IAAI,CAAC,IAAI,iCAAyB,CAAC;IAC3C,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,KAAwB;QAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,IAAI,KAAK,EAAE,YAAY,EAAE,CAAC;YACzB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;YACpE,OAAO,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjC,CAAC;QAED,IAAI,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,SAAS,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC9D,CAAC;QAED,IAAI,IAAI,CAAC,IAAI,iCAAyB,EAAE,CAAC;YACxC,OAAO,OAAO,CAAC,OAAO,CAAC,oDAAoD,+BAA+B,2CAA2C,CAAC,CAAC;QACxJ,CAAC;QAED,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;IACnD,CAAC;IAED,IAAI,UAAU;QACb,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC;QACnD,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC1D,OAAO,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC;QAClC,CAAC;QACD,IAAI,OAAO,EAAE,CAAC;YACb,OAAO,OAAO,CAAC,UAAU,CAAC;QAC3B,CAAC;QACD,IAAI,iBAAiB,EAAE,CAAC;YACvB,OAAO,iBAAiB,CAAC,QAAQ,CAAC,UAAU,IAAI,EAAE,CAAC;QACpD,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAED,IAAI,IAAI;QACP,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC;QACzB,IAAI,OAAO,EAAE,CAAC;YACb,OAAO,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;QACzD,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAED,IAAI,YAAY;QACf,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC;QACnD,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,qBAAqB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrE,OAAO,KAAK,CAAC,QAAQ,CAAC,qBAAqB,CAAC;QAC7C,CAAC;QACD,IAAI,OAAO,EAAE,CAAC;YACb,OAAO,OAAO,CAAC,UAAU,CAAC,YAAY,IAAI,EAAE,CAAC;QAC9C,CAAC;QACD,IAAI,iBAAiB,EAAE,CAAC;YACvB,OAAO,iBAAiB,CAAC,QAAQ,CAAC,qBAAqB,IAAI,EAAE,CAAC;QAC/D,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAED,IAAI,aAAa;QAChB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,iBAAiB,EAAE,GAAG,IAAI,CAAC;QACnD,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC7D,OAAO,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC;QACrC,CAAC;QACD,IAAI,OAAO,EAAE,CAAC;YACb,OAAO,OAAO,CAAC,UAAU,CAAC,aAAa,IAAI,EAAE,CAAC;QAC/C,CAAC;QACD,IAAI,iBAAiB,EAAE,CAAC;YACvB,OAAO,iBAAiB,CAAC,QAAQ,CAAC,aAAa,IAAI,EAAE,CAAC;QACvD,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAED,4BAA4B,CAAC,yBAAqD;QACjF,IAAI,CAAC,SAAS,GAAG,0BAA0B,CAAC,IAAI,CAAC,UAAU,EAAE,yBAAyB,CAAC,SAAS,CAAC,CAAC;QAClG,IAAI,CAAC,eAAe,GAAG,yBAAyB,CAAC,UAAU,CAAC,CAAC,CAAC,yBAAyB,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IAClJ,CAAC;IAEO,8BAA8B;QACrC,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAChB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QAC5B,CAAC;QACD,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC5B,OAAO,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC;QACxC,CAAC;QACD,OAAO,IAAI,CAAC;IACb,CAAC;CACD,CAAA;AA7eY,SAAS;IAenB,WAAA,wBAAwB,CAAA;IACxB,WAAA,iBAAiB,CAAA;IACjB,WAAA,WAAW,CAAA;IACX,WAAA,YAAY,CAAA;IACZ,YAAA,eAAe,CAAA;GAnBL,SAAS,CA6erB;;AAED,MAAM,0BAA0B,GAAG,uBAAuB,CAAC;AAC3D,MAAM,gCAAgC,GAAG,4BAA4B,CAAC;AACtE,MAAM,sCAAsC,GAAG,mCAAmC,CAAC;AAEnF,IAAM,UAAU,GAAhB,MAAM,UAAW,SAAQ,UAAU;IAGlC,IAAI,QAAQ,KAAK,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAG/C,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;IAM7C,YACU,MAAkC,EAC1B,aAAsD,EACtD,oBAAgF,EAChF,iBAA0B,EACjB,cAAyD,EAC7C,0BAAiF,EACjF,mCAA0F,EAC7G,gBAAoD,EAChD,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QAVC,WAAM,GAAN,MAAM,CAA4B;QAC1B,kBAAa,GAAb,aAAa,CAAyC;QACtD,yBAAoB,GAApB,oBAAoB,CAA4D;QAChF,sBAAiB,GAAjB,iBAAiB,CAAS;QACA,mBAAc,GAAd,cAAc,CAA0B;QAC5B,+BAA0B,GAA1B,0BAA0B,CAAsC;QAChE,wCAAmC,GAAnC,mCAAmC,CAAsC;QAC5F,qBAAgB,GAAhB,gBAAgB,CAAmB;QAC/B,yBAAoB,GAApB,oBAAoB,CAAuB;QAnBnE,cAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAsE,CAAC,CAAC;QAG9G,aAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QAGxD,eAAU,GAAgB,EAAE,CAAC;QAC7B,iBAAY,GAAgB,EAAE,CAAC;QAC/B,cAAS,GAAgB,EAAE,CAAC;QAcnC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9G,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACrH,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,4BAA4B,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAChI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACzF,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC;QACtF,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,mCAAmC,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE;gBAC9E,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;oBACvB,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;gBAC5B,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,mCAAmC,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAAE;gBAClF,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC;gBAChD,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC;oBACnB,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;gBACrC,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,mCAAmC,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE;gBAChF,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;oBACvB,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gBACzC,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,mCAAmC,CAAC,uBAAuB,CAAC,CAAC,CAAC,EAAE;gBACnF,IAAI,CAAC,CAAC,eAAe,EAAE,CAAC;oBACvB,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC;gBACjC,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;IACF,CAAC;IAGD,IAAI,KAAK;QACR,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YAClB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;gBACxC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC7B,CAAC;YACD,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;gBACzC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,iBAAiB,CAAC,SAAS,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;oBACtG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC7B,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACpB,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,cAA+B;QACnD,MAAM,IAAI,CAAC,wBAAwB,CAAC,cAAc,CAAC,CAAC;QACpD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC/B,OAAO,IAAI,CAAC,KAAK,CAAC;IACnB,CAAC;IAED,KAAK,CAAC,kCAAkC,CAAC,iBAAsC,EAAE,cAA+B,EAAE,gCAAmD;QACpK,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,mDAAmD,CAAC,iBAAiB,EAAE,cAAc,CAAC,CAAC;QACrH,KAAK,MAAM,CAAC,SAAS,EAAE,OAAO,CAAC,IAAI,UAAU,EAAE,CAAC;YAC/C,wDAAwD;YACxD,IAAI,SAAS,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;gBACzD,SAAS,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;YACvE,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,SAAS,CAAC,OAAO,CAAC,OAAO,KAAK,OAAO,CAAC,OAAO,IAAI,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,cAAc,KAAK,OAAO,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;gBAC9J,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC;gBAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;YACpC,CAAC;QACF,CAAC;QACD,oEAAoE;QACpE,IAAI,gCAAgC,EAAE,CAAC;YACtC,MAAM,iBAAiB,GAAG,EAAE,CAAC;YAC7B,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;gBACpC,oDAAoD;gBACpD,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;oBACvB,SAAS;gBACV,CAAC;gBACD,0CAA0C;gBAC1C,IAAI,SAAS,CAAC,kBAAkB,EAAE,CAAC;oBAClC,SAAS;gBACV,CAAC;gBACD,qDAAqD;gBACrD,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;oBAChC,SAAS;gBACV,CAAC;gBACD,6DAA6D;gBAC7D,IAAI,CAAC,gCAAgC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;oBAC7F,SAAS;gBACV,CAAC;gBACD,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACnC,CAAC;YACD,IAAI,iBAAiB,CAAC,MAAM,EAAE,CAAC;gBAC9B,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,UAAU,EAAE,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;gBAC3J,MAAM,UAAU,GAAa,EAAE,CAAC;gBAChC,MAAM,UAAU,GAAa,EAAE,CAAC;gBAChC,KAAK,MAAM,SAAS,IAAI,iBAAiB,EAAE,CAAC;oBAC3C,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBACzC,MAAM,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;oBAC7F,IAAI,OAAO,EAAE,CAAC;wBACb,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC7B,CAAC;yBAAM,CAAC;wBACP,SAAS,CAAC,kBAAkB,GAAG,IAAI,CAAC;wBACpC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;oBAC1C,CAAC;oBACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;gBACpC,CAAC;gBAWD,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAA4D,+BAA+B,EAAE;oBAC5H,UAAU,EAAE,IAAI,qBAAqB,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC3D,UAAU,EAAE,IAAI,qBAAqB,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBAC3D,CAAC,CAAC;YACJ,CAAC;QACF,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,mDAAmD,CAAC,iBAAsC,EAAE,cAA+B;QACxI,MAAM,gBAAgB,GAAG,IAAI,CAAC,yCAAyC,CAAC,iBAAiB,CAAC,CAAC;QAC3F,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAC,iBAAiB,EAAE,CAAC;QACxF,MAAM,2BAA2B,GAAwB,EAAE,CAAC;QAC5D,MAAM,kCAAkC,GAAqB,EAAE,CAAC;QAChE,MAAM,OAAO,CAAC,UAAU,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,EAAE,EAAE;YAC5E,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;gBACrB,IAAI,MAAM,IAAI,CAAC,cAAc,CAAC,qBAAqB,CAAC,OAAO,EAAE,SAAS,CAAC,KAAK,CAAC,UAAU,EAAE,cAAc,EAAE,cAAc,CAAC,EAAE,CAAC;oBAC1H,2BAA2B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC3C,CAAC;qBAAM,CAAC;oBACP,kCAAkC,CAAC,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC,KAAK,CAAC,UAAU,EAAE,UAAU,EAAE,SAAS,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC;gBACpH,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,kCAAkC,CAAC,MAAM,EAAE,CAAC;YAC/C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,kCAAkC,EAAE,EAAE,cAAc,EAAE,UAAU,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,cAAc,EAAE,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACjM,2BAA2B,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;QAC7C,CAAC;QACD,OAAO,IAAI,CAAC,yCAAyC,CAAC,2BAA2B,CAAC,CAAC;IACpF,CAAC;IAEO,yCAAyC,CAAC,iBAAsC;QACvF,MAAM,gBAAgB,GAAqC,EAAE,CAAC;QAC9D,MAAM,MAAM,GAAG,IAAI,GAAG,EAA6B,EAAE,IAAI,GAAG,IAAI,GAAG,EAA6B,CAAC;QACjG,KAAK,MAAM,OAAO,IAAI,iBAAiB,EAAE,CAAC;YACzC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;YAC7C,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,OAAO,CAAC,CAAC;QACxD,CAAC;QACD,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACxC,IAAI,SAAS,CAAC,IAAI,EAAE,CAAC;gBACpB,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBAC3C,IAAI,OAAO,EAAE,CAAC;oBACb,gBAAgB,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;oBAC5C,SAAS;gBACV,CAAC;YACF,CAAC;YACD,IAAI,SAAS,CAAC,KAAK,EAAE,MAAM,KAAK,UAAU,EAAE,CAAC;gBAC5C,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC;gBAChE,IAAI,OAAO,EAAE,CAAC;oBACb,gBAAgB,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;gBAC7C,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,gBAAgB,CAAC;IACzB,CAAC;IAEO,KAAK,CAAC,cAAc,CAAC,cAA+B,EAAE,OAA0B;QACvF,IAAI,mBAAmB,GAAG,KAAK,CAAC;QAChC,IAAI,cAAc,CAAC,QAAQ,CAAC,OAAO,KAAK,OAAO,CAAC,OAAO,EAAE,CAAC;YAKzD,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAA0D,+BAA+B,CAAC,CAAC;YAC3H,MAAM,uBAAuB,GAAkC,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,EAAE,GAAG,cAAc,CAAC,UAAU,EAAE,OAAO,EAAE,cAAc,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAClN,mBAAmB,GAAG,CAAC,CAAC,uBAAuB,EAAE,UAAU,EAAE,mBAAmB,CAAC;QAClF,CAAC;QACD,OAAO,IAAI,CAAC,mCAAmC,CAAC,cAAc,CAAC,cAAc,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,oBAAoB,EAAE,OAAO,CAAC,oBAAoB,EAAE,WAAW,EAAE,OAAO,CAAC,WAAW,EAAE,mBAAmB,EAAE,CAAC,CAAC;IAC5N,CAAC;IAED,UAAU,CAAC,gBAAmC;QAC7C,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC;IAC5E,CAAC;IAEO,kBAAkB,CAAC,KAA4B;QACtD,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;QACzB,IAAI,MAAM,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;YAClC,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC;mBAC1F,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;YAClJ,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAChC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;QACpC,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,wBAAwB,CAAC,cAAgC;QACtE,MAAM,yBAAyB,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAC,4BAA4B,EAAE,CAAC;QAC9G,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAC,YAAY,CAAC,SAAS,EAAE,SAAS,EAAE,cAAc,CAAC,CAAC;QAC5G,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC5B,GAAG,CAAC,IAAI,CAAC,GAAG,MAAM,IAAI,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,IAAI,CAAC,CAAC,CAAC;QACnG,CAAC;QAED,gHAAgH;QAChH,MAAM,SAAS,GAAG,gBAAgB,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,UAAU,EAAE,EAAE;YACxF,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBAC7B,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5B,CAAC;iBAAM,CAAC;gBACP,IAAI,kBAA+C,EAClD,aAA0C,EAC1C,eAA4C,CAAC;gBAC9C,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE,CAAC;oBACpC,IAAI,SAAS,CAAC,iBAAiB,EAAE,CAAC;wBACjC,kBAAkB,GAAG,SAAS,CAAC;oBAChC,CAAC;yBAAM,IAAI,SAAS,CAAC,IAAI,+BAAuB,EAAE,CAAC;wBAClD,aAAa,GAAG,SAAS,CAAC;oBAC3B,CAAC;yBAAM,CAAC;wBACP,eAAe,GAAG,SAAS,CAAC;oBAC7B,CAAC;gBACF,CAAC;gBACD,MAAM,SAAS,GAAG,kBAAkB,IAAI,aAAa,IAAI,eAAe,CAAC;gBACzE,IAAI,SAAS,EAAE,CAAC;oBACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACxB,CAAC;YACF,CAAC;YACD,OAAO,MAAM,CAAC;QACf,CAAC,EAAE,EAAE,CAAC,CAAC;QAEP,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAC3F,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACtC,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;YAC5L,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;YACxB,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YACtF,SAAS,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,CAAC;YAClE,OAAO,SAAS,CAAC;QAClB,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,KAAK;QAClB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;QACvB,MAAM,IAAI,CAAC,wBAAwB,EAAE,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAEO,KAAK,CAAC,sBAAsB,CAAC,OAA0C;QAC9E,MAAM,UAAU,GAAgB,EAAE,CAAC;QACnC,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE,CAAC;YAC7B,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;YAChC,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC;YAClE,MAAM,QAAQ,GAAG,MAAM,IAAI,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC;YAClE,MAAM,mBAAmB,GAAG,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACjI,IAAI,CAAC,UAAU,GAAG,mBAAmB,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,mBAAmB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;YAEjH,IAAI,SAAS,GAA0B,mBAAmB,CAAC,CAAC,CAAC,mBAAmB;gBAC/E,CAAC,CAAC,CAAC,QAAQ,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,CAAC;oBACnK,CAAC,CAAC,SAAS,CAAC;YACd,IAAI,SAAS,EAAE,CAAC;gBACf,IAAI,KAAK,EAAE,CAAC;oBACX,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACxG,IAAI,SAAS,EAAE,CAAC;wBACf,SAAS,GAAG,SAAS,CAAC;oBACvB,CAAC;yBAAM,CAAC;wBACP,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAChC,CAAC;oBACD,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;wBACxB,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC7B,CAAC;oBACD,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBACvF,CAAC;gBACD,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC5B,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC;QACnG,CAAC;QAED,IAAI,UAAU,CAAC,MAAM,EAAE,CAAC;YACvB,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAC,4BAA4B,EAAE,CAAC;YAC7F,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE,CAAC;gBACpC,SAAS,CAAC,4BAA4B,CAAC,QAAQ,CAAC,CAAC;YAClD,CAAC;YACD,IAAI,CAAC,mCAAmC,CAAC,UAAU,CAAC,CAAC;QACtD,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,4BAA4B,CAAC,KAAsB;QAChE,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;QAC9F,IAAI,SAAS,EAAE,KAAK,EAAE,CAAC;YACtB,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;QACpC,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,mCAAmC,CAAC,UAAuB;QACxE,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,UAAU,CAAC,CAAC;QAC/F,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;YACrB,OAAO;QACR,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC;YACtC,OAAO;QACR,CAAC;QACD,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,UAAU,EAAE,UAAU,EAAE,CAAC,CAAC,KAAK,EAAE,UAAU,EAAE,CAAC,CAAC,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,cAAc,EAAE,MAAM,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAC,iBAAiB,EAAE,EAAE,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC5Q,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE,CAAC;YACpC,MAAM,UAAU,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;YACtG,IAAI,UAAU,EAAE,CAAC;gBAChB,SAAS,CAAC,OAAO,GAAG,UAAU,CAAC;gBAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;YACpC,CAAC;QACF,CAAC;IACF,CAAC;IAEO,oBAAoB,CAAC,UAAgC;QAC5D,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7F,IAAI,SAAS,EAAE,CAAC;YACf,MAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;YAChH,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;YACnH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,YAAY,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;QAC7E,CAAC;IACF,CAAC;IAEO,uBAAuB,CAAC,EAAE,UAAU,EAAE,KAAK,EAA8B;QAChF,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;QACtK,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;QAChG,IAAI,CAAC,KAAK,EAAE,CAAC;YACZ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;QAC3F,CAAC;QACD,IAAI,WAAW,EAAE,CAAC;YACjB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,WAAW,EAAE,CAAC,CAAC;QACjD,CAAC;IACF,CAAC;IAEO,mBAAmB,CAAC,kBAAiD;QAC5E,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QACvH,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE,CAAC;YACpC,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;gBACrB,MAAM,eAAe,GAAG,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBAC5F,IAAI,eAAe,KAAK,SAAS,CAAC,eAAe,EAAE,CAAC;oBACnD,SAAS,CAAC,eAAe,GAAG,eAAe,CAAC;oBAC5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;gBACpC,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAED,iBAAiB,CAAC,SAAoB;QACrC,IAAI,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,CAAC,OAAQ,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;YAC3I,yCAAiC;QAClC,CAAC;QACD,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;YACxF,2CAAmC;QACpC,CAAC;QACD,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,SAAS,IAAI,CAAC,CAAC,CAAC,OAAO,IAAI,SAAS,CAAC,OAAO,IAAI,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1K,OAAO,KAAK,CAAC,CAAC,kCAA0B,CAAC,mCAA2B,CAAC;IACtE,CAAC;CACD,CAAA;AA3XK,UAAU;IAiBb,WAAA,wBAAwB,CAAA;IACxB,WAAA,oCAAoC,CAAA;IACpC,WAAA,oCAAoC,CAAA;IACpC,WAAA,iBAAiB,CAAA;IACjB,WAAA,qBAAqB,CAAA;GArBlB,UAAU,CA2Xf;AAEM,IAAM,0BAA0B,GAAhC,MAAM,0BAA2B,SAAQ,UAAU;;aAEjC,yBAAoB,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAApB,AAAsB,CAAC,GAAC,WAAW;IAc/E,IAAI,QAAQ,KAAoC,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAO9E,IAAI,OAAO,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;IAO7C,YACwB,oBAA4D,EACnE,aAA8C,EACxB,0BAAiF,EAC7F,cAAyD,EACjD,+BAAkF,EAC7F,oBAA4D,EAChE,gBAAoD,EACjD,mBAA0D,EACnE,UAAuB,EACE,0BAAiF,EACzG,WAA0C,EACtC,eAAkD,EACjC,gCAAoF,EACrG,eAAkD,EAC/B,+BAAqF,EAChG,uBAAkE,EAC3E,cAAgD,EAC7C,iBAAqC,EACpB,kCAAwF,EAChH,UAAwC,EAClC,gBAAoD,EACvD,aAA8C,EAC3C,gBAAoD,EACzD,WAA0C,EAC/B,sBAAgE,EAC/D,uBAAkE,EAC3E,cAAgD,EACjD,aAA8C,EAC9B,6BAA8E,EAC9F,aAA8C,EACzC,kBAAwD,EACnD,uBAAkE,EAC7E,YAA4C,EACvC,iBAAsD,EACtD,iBAAsD,EAC/C,wBAAoE;QAE/F,KAAK,EAAE,CAAC;QArCgC,yBAAoB,GAApB,oBAAoB,CAAuB;QAClD,kBAAa,GAAb,aAAa,CAAgB;QACP,+BAA0B,GAA1B,0BAA0B,CAAsC;QAC5E,mBAAc,GAAd,cAAc,CAA0B;QAChC,oCAA+B,GAA/B,+BAA+B,CAAkC;QAC5E,yBAAoB,GAApB,oBAAoB,CAAuB;QAC/C,qBAAgB,GAAhB,gBAAgB,CAAmB;QAChC,wBAAmB,GAAnB,mBAAmB,CAAsB;QAEzB,+BAA0B,GAA1B,0BAA0B,CAAsC;QACxF,gBAAW,GAAX,WAAW,CAAc;QACrB,oBAAe,GAAf,eAAe,CAAkB;QAChB,qCAAgC,GAAhC,gCAAgC,CAAmC;QACpF,oBAAe,GAAf,eAAe,CAAkB;QACd,oCAA+B,GAA/B,+BAA+B,CAAqC;QAC/E,4BAAuB,GAAvB,uBAAuB,CAA0B;QAC1D,mBAAc,GAAd,cAAc,CAAiB;QAEX,uCAAkC,GAAlC,kCAAkC,CAAqC;QAC/F,eAAU,GAAV,UAAU,CAAa;QACjB,qBAAgB,GAAhB,gBAAgB,CAAmB;QACtC,kBAAa,GAAb,aAAa,CAAgB;QAC1B,qBAAgB,GAAhB,gBAAgB,CAAmB;QACxC,gBAAW,GAAX,WAAW,CAAc;QACd,2BAAsB,GAAtB,sBAAsB,CAAyB;QAC9C,4BAAuB,GAAvB,uBAAuB,CAA0B;QAC1D,mBAAc,GAAd,cAAc,CAAiB;QAChC,kBAAa,GAAb,aAAa,CAAgB;QACb,kCAA6B,GAA7B,6BAA6B,CAAgC;QAC7E,kBAAa,GAAb,aAAa,CAAgB;QACxB,uBAAkB,GAAlB,kBAAkB,CAAqB;QAClC,4BAAuB,GAAvB,uBAAuB,CAA0B;QAC5D,iBAAY,GAAZ,YAAY,CAAe;QACtB,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,sBAAiB,GAAjB,iBAAiB,CAAoB;QAC9B,6BAAwB,GAAxB,wBAAwB,CAA2B;QA3D/E,oBAAe,GAAsB,IAAI,CAAC;QAC1C,qBAAgB,GAAsB,IAAI,CAAC;QAC3C,kBAAa,GAAsB,IAAI,CAAC;QACxC,sBAAiB,GAAiB,EAAE,CAAC;QAKrC,cAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAA0B,CAAC,CAAC;QAIlE,uCAAkC,GAAG,IAAI,OAAO,EAAuC,CAAC;QAChG,sCAAiC,GAAG,IAAI,CAAC,kCAAkC,CAAC,KAAK,CAAC;QAE1E,aAAQ,GAAG,IAAI,OAAO,EAAQ,CAAC;QAGxC,eAAU,GAAiB,EAAE,CAAC;QAC9B,oBAAe,GAA6B,EAAE,CAAC;QAyNtC,kCAA6B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,iBAAiB,EAAE,CAAC,CAAC;QA7KxF,IAAI,CAAC,+BAA+B,GAAG,4BAA4B,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC9F,IAAI,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;YACrE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,cAAc,CAAC,UAAU,EACnF,gCAAgC,CAAC,8BAA8B,EAC/D,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAClC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAChC,CAAC,gCAAgC,CAAC,+BAA+B,CACjE,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;YAC7F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAChE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACnD,CAAC;QACD,IAAI,gCAAgC,CAAC,+BAA+B,EAAE,CAAC;YACtE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,cAAc,CAAC,UAAU,EACpF,gCAAgC,CAAC,+BAA+B,EAChE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAClC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAChC,IAAI,CACJ,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;YAC9F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACjE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACpD,CAAC;QACD,IAAI,gCAAgC,CAAC,4BAA4B,EAAE,CAAC;YACnE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,cAAc,CAAC,UAAU,EACjF,gCAAgC,CAAC,4BAA4B,EAC7D,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAClC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAChC,CAAC,CAAC,gCAAgC,CAAC,+BAA+B,IAAI,gCAAgC,CAAC,8BAA8B,CAAC,CACtI,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;YAC3F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC9D,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjD,CAAC;QAED,IAAI,CAAC,mBAAmB,GAAG,IAAI,gBAAgB,CAAO,4BAA0B,CAAC,oBAAoB,CAAC,CAAC;QACvG,IAAI,CAAC,iBAAiB,GAAG,IAAI,gBAAgB,CAAO,IAAI,CAAC,CAAC;QAC1D,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE;YAChC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC;YAClC,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;QACjC,CAAC,CAAC,CAAC,CAAC;QAEJ,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAEjC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;IAC1C,CAAC;IAEO,KAAK,CAAC,UAAU;QACvB,8BAA8B;QAC9B,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,IAAI,CAAC,gBAAgB,CAAC,iCAAiC,EAAE,CAAC,CAAC,CAAC;QAClG,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;YAC5B,OAAO;QACR,CAAC;QACD,IAAI,CAAC,4BAA4B,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,4BAA4B,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;QAEvI,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI,mCAA2B,CAAC;QAC5D,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;YAC5B,OAAO;QACR,CAAC;QAED,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACpC,IAAI,CAAC,kCAAkC,EAAE,CAAC;QAC1C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,+BAAuB,sCAAsC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,sCAAsC,EAAE,CAAC,CAAC,CAAC;QACpL,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,oCAA2B,0BAA0B,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,6CAA6C,EAAE,CAAC,CAAC,CAAC;QACnL,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,oCAA2B,gCAAgC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,6CAA6C,EAAE,CAAC,CAAC,CAAC;QACzL,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE;YACvE,IAAI,CAAC,4BAA4B,EAAE,CAAC;YACpC,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACvC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,oBAAoB;QAC3B,sCAAsC;QACtC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;YACrE,IAAI,CAAC,CAAC,oBAAoB,CAAC,0BAA0B,CAAC,EAAE,CAAC;gBACxD,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC;oBAChC,IAAI,CAAC,8BAA8B,EAAE,CAAC;gBACvC,CAAC;YACF,CAAC;YACD,IAAI,CAAC,CAAC,oBAAoB,CAAC,gCAAgC,CAAC,EAAE,CAAC;gBAC9D,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;oBACtC,IAAI,CAAC,eAAe,CAAC,4BAA4B,CAAC,CAAC;gBACpD,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,EAAE;YACvF,IAAI,IAAI,CAAC,kBAAkB,EAAE,KAAK,uBAAuB,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBACzI,IAAI,CAAC,eAAe,CAAC,8BAA8B,CAAC,CAAC;YACtD,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,+BAA+B,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9I,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE;YACnD,IAAI,CAAC,CAAC,CAAC,IAAI,8DAAiC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,kEAAmC,IAAI,CAAC,CAAC,IAAI,4CAAyB,EAAE,CAAC;gBAC7I,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAG7B,uCAAuC,CAAC,CAAC;gBAC5C,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;oBACtC,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;gBACxC,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,wBAAwB,CAAC,uCAAuC,CAAC,GAAG,EAAE;YACzF,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;gBACtC,IAAI,CAAC,eAAe,CAAC,4BAA4B,CAAC,CAAC;YACpD,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,6BAA6B;QAC7B,IAAI,CAAC,+BAA+B,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAEnE,oBAAoB;QACpB,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;QAErC,IAAI,KAAK,EAAE,CAAC;YACX,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACnC,+CAA+C;YAC/C,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC;gBACjC,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACpC,CAAC;QACF,CAAC;QAED,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;YACrE,IAAI,CAAC,CAAC,oBAAoB,CAAC,2BAA2B,CAAC,EAAE,CAAC;gBACzD,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACpC,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,mBAAmB;QAC1B,OAAO,IAAI,CAAC,kBAAkB,EAAE,KAAK,KAAK,CAAC;IAC5C,CAAC;IAED,kBAAkB;QACjB,MAAM,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAA+B,0BAA0B,CAAC,CAAC;QAChH,mDAAmD;QACnD,IAAS,UAAU,KAAK,wBAAwB,EAAE,CAAC;YAClD,OAAO,KAAK,CAAC;QACd,CAAC;QACD,OAAO,SAAS,CAAC,UAAU,CAAC,IAAI,UAAU,KAAK,uBAAuB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC;IAC5F,CAAC;IAED,KAAK,CAAC,gCAAgC,CAAC,mBAA4B;QAClE,MAAM,oBAAoB,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACxD,IAAI,oBAAoB,KAAK,mBAAmB,EAAE,CAAC;YAClD,OAAO;QACR,CAAC;QAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;YAC/C,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAgC,EAAE,IAAwB,CAAC;YAC/E,OAAO,EAAE,mBAAmB;gBAC3B,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAuD,CAAC;gBAClG,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAA0B,EAAE,IAAwD,CAAC;YACrG,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsC,EAAE,IAAkF,CAAC;SAChJ,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;YACvB,OAAO;QACR,CAAC;QAED,oFAAoF;QACpF,IAAI,CAAC,8BAA8B,CAAC,EAAE,CAAC,CAAC;QAExC,MAAM,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,0BAA0B,EAAE,mBAAmB,CAAC,CAAC;QAE7F,IAAI,CAAC,+BAA+B,CAAC,EAAE,CAAC,CAAC;QACzC,MAAM,IAAI,CAAC,2BAA2B,CAAC,CAAC,mBAAmB,CAAC,CAAC;QAC7D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IAGO,2BAA2B;QAClC,IAAI,CAAC,6BAA6B,CAAC,KAAK,GAAG,SAAS,CAAC;QACrD,IAAI,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,2BAA2B,CAAC,KAAK,IAAI,EAAE,CAAC;YAC9E,IAAI,CAAC,6BAA6B,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE;gBACpF,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,2BAA2B,CAAC,KAAK,IAAI,EAAE,CAAC;oBACxF,IAAI,CAAC,uBAAuB,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;gBAC/C,CAAC;YACF,CAAC,CAAC,CAAC;QACJ,CAAC;IACF,CAAC;IAEO,kCAAkC;QACzC,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CACtD,CAAC,SAAS,CAAC,SAAS;YACpB,CAAC,SAAS,CAAC,eAAe,8CAAqC;gBAC9D,SAAS,CAAC,eAAe,6CAAoC,CAAC,CAAC;aAC/D,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,mBAAmB,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;QACvE,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAyD,qBAAqB,EAAE,EAAE,YAAY,EAAE,IAAI,qBAAqB,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,YAAY,CAAC,MAAM,EAAE,CAAC,CAAC;IAClN,CAAC;IAEO,KAAK,CAAC,4BAA4B,CAAC,KAA2C,EAAE,OAA6C;QACpI,MAAM,iBAAiB,GAAiB,EAAE,CAAC;QAC3C,MAAM,iBAAiB,GAA4B,EAAE,CAAC;QACtD,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;YAC1B,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAC5H,IAAI,SAAS,EAAE,CAAC;gBACf,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACnC,CAAC;iBAAM,CAAC;gBACP,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9B,CAAC;QACF,CAAC;QACD,MAAM,mBAAmB,GAA4B,EAAE,CAAC;QACxD,KAAK,MAAM,IAAI,IAAI,OAAO,EAAE,CAAC;YAC5B,IAAI,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,CAAC;gBAC5E,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChC,CAAC;iBAAM,CAAC;gBACP,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9B,CAAC;QACF,CAAC;QACD,IAAI,iBAAiB,CAAC,MAAM,EAAE,CAAC;YAC9B,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC5I,iBAAiB,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC;QACvC,CAAC;QACD,IAAI,mBAAmB,CAAC,MAAM,EAAE,CAAC;YAChC,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAAC,EAAE,IAAI,CAAC,CAAC;YAC7G,iBAAiB,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC;QACvC,CAAC;QACD,KAAK,MAAM,gBAAgB,IAAI,iBAAiB,EAAE,CAAC;YAClD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACvC,CAAC;IACF,CAAC;IAEO,2BAA2B,CAAC,MAAe;QAClD,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;YACxC,QAAQ,qCAA6B;YACrC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAoB,EAAE,IAAuC,CAAC;SAClF,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,oCAAoC,CAAC,MAAM,CAAC,CAAC,CAAC;IACxF,CAAC;IAEO,KAAK;QACZ,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YACzC,IAAI,CAAC,MAAM,EAAE,CAAC;QACf,CAAC;QACD,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACtB,CAAC;IAEO,qBAAqB,CAAC,SAAsB;QACnD,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QACxB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAChC,CAAC;IAGD,IAAI,KAAK;QACR,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YAClB,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACzC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC;YAC9B,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;gBACjB,MAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;gBACjE,KAAK,MAAM,UAAU,IAAI,IAAI,EAAE,CAAC;oBAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC,CAAC;gBACxD,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACpB,CAAC;IAGD,IAAI,SAAS;QACZ,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;YACtB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,KAAK,MAAM,UAAU,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBACjD,KAAK,MAAM,SAAS,IAAI,UAAU,CAAC,KAAK,EAAE,CAAC;oBAC1C,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACjC,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC,UAAU,CAAC;IACxB,CAAC;IAED,IAAI,QAAQ;QACX,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,qCAA6B,CAAC,CAAC;IAClG,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,MAAmC;QACnD,IAAI,MAAM,EAAE,CAAC;YACZ,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,KAAK,MAAM,EAAE,CAAC;gBAC7G,OAAO,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACtE,CAAC;YACD,IAAI,IAAI,CAAC,gBAAgB,IAAI,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,KAAK,MAAM,EAAE,CAAC;gBAC/G,OAAO,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACvE,CAAC;YACD,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,KAAK,MAAM,EAAE,CAAC;gBACzG,OAAO,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACpE,CAAC;QACF,CAAC;QAED,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,IAAI,CAAC;gBACJ,MAAM,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACrE,CAAC;YACD,OAAO,KAAK,EAAE,CAAC;gBACd,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC;QACF,CAAC;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,IAAI,CAAC;gBACJ,MAAM,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACtE,CAAC;YACD,OAAO,KAAK,EAAE,CAAC;gBACd,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC;QACF,CAAC;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,IAAI,CAAC;gBACJ,MAAM,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC;YACnE,CAAC;YACD,OAAO,KAAK,EAAE,CAAC;gBACd,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC,KAAK,CAAC;IACnB,CAAC;IAID,KAAK,CAAC,YAAY,CAAC,IAAS,EAAE,IAAU;QACvC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC;YACtC,OAAO,eAAe,CAAC,EAAE,CAAC,CAAC;QAC5B,CAAC;QAED,MAAM,OAAO,GAAkB,iBAAiB,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;QACvF,MAAM,KAAK,GAAsB,iBAAiB,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;QAC3F,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC;QACjF,OAAO,CAAC,iBAAiB,GAAG,WAAW,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,CAAC,CAAC,OAAO,CAAC,iBAAiB,CAAC;QAEnJ,MAAM,yBAAyB,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,4BAA4B,EAAE,CAAC;QACvG,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAC9D,IAAI,CAAC,kCAAkC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACzD,OAAO;YACN,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,yBAAyB,CAAC,CAAC;YAC/F,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,QAAQ,EAAE,KAAK,CAAC,QAAQ;YACxB,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE;gBACnC,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;gBACnD,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,CAAC;gBAC9C,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,yBAAyB,CAAC,CAAC,CAAC;YAClF,CAAC;SACD,CAAC;IACH,CAAC;IAID,KAAK,CAAC,aAAa,CAAC,cAAgC,EAAE,IAAS,EAAE,IAAU;QAC1E,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC;YACtC,OAAO,EAAE,CAAC;QACX,CAAC;QAED,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,CAAC;QAC9G,MAAM,yBAAyB,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,4BAA4B,EAAE,CAAC;QACvG,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,cAAc,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9F,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,CAAC;QAC3D,OAAO,iBAAiB,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,yBAAyB,CAAC,CAAC,CAAC;IAC/F,CAAC;IAED,KAAK,CAAC,qBAAqB,CAAC,SAAgB,EAAE,iBAA0B;QACvE,MAAM,kBAAkB,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAC1F,OAAO,kBAAkB,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,CAAC,IAAI,CAAC,qCAAqC,CAAC,iBAAiB,CAAC,QAAQ,CAAC;eACrH,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,CAAC,CAAC,CAAC;IAC3M,CAAC;IAEO,sCAAsC;QAC7C,IACC,IAAI,CAAC,2BAA2B,KAAK,IAAI,CAAC,8BAA8B,EAAE,CAAC,4DAA4D,EACtI,CAAC;YACF,IAAI,CAAC,4BAA4B,GAAG,SAAS,CAAC;YAC9C,IAAI,CAAC,4BAA4B,EAAE,CAAC;QACrC,CAAC;IACF,CAAC;IAEO,4BAA4B;QACnC,MAAM,sBAAsB,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACrE,MAAM,sBAAsB,GAAa,EAAE,CAAC;QAE5C,IAAI,sBAA6E,CAAC;QAClF,IAAI,sBAAsB,CAAC,MAAM,EAAE,CAAC;YACnC,sEAAsE;YACtE,KAAK,MAAM,qBAAqB,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;gBACtE,IAAI,sBAAsB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,qBAAqB,CAAC,EAAE,CAAC;oBACvE,sBAAsB,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;gBACpD,CAAC;YACF,CAAC;YACD,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;gBACrE,sBAAsB,GAAG;oBACxB,OAAO,EAAE,sBAAsB,CAAC,CAAC,CAAC,CAAC,OAAO;oBAC1C,QAAQ,EAAE,sBAAsB,CAAC,CAAC,CAAC,CAAC,QAAQ;oBAC5C,UAAU,EAAE,sBAAsB,CAAC,CAAC,CAAC,CAAC,UAAU;oBAChD,GAAG,EAAE,sBAAsB,CAAC,CAAC,CAAC,CAAC,GAAG;oBAClC,OAAO,EAAE,GAAG,EAAE;wBACb,IAAI,CAAC,yBAAyB,CAAC,CAAC,GAAG,IAAI,CAAC,yBAAyB,EAAE,EAAE,sBAAsB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;wBACrG,IAAI,CAAC,4BAA4B,EAAE,CAAC;oBACrC,CAAC;iBACD,CAAC;YACH,CAAC;QACF,CAAC;QACD,IAAI,CAAC,yBAAyB,CAAC,sBAAsB,CAAC,CAAC;QAEvD,IAAI,IAAI,CAAC,sBAAsB,EAAE,GAAG,KAAK,sBAAsB,EAAE,GAAG,EAAE,CAAC;YACtE,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAC;YACrD,IAAI,CAAC,kCAAkC,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAC3E,CAAC;IACF,CAAC;IAEO,8BAA8B;QACrC,MAAM,sBAAsB,GAAsE,EAAE,CAAC;QAErG,MAAM,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,gDAAwC,CAAC,CAAC;QAC/G,IAAI,oBAAoB,CAAC,MAAM,EAAE,CAAC;YACjC,sBAAsB,CAAC,IAAI,CAAC;gBAC3B,OAAO,EAAE,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,MAAM;oBAC5E,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAiC,EAAE,IAAyF,CAAC;oBAC5I,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAA6E,CAAC;gBACvH,QAAQ,EAAE,QAAQ,CAAC,OAAO;gBAC1B,UAAU,EAAE,oBAAoB;gBAChC,GAAG,EAAE,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;aACpK,CAAC,CAAC;QACJ,CAAC;QAED,MAAM,iBAAiB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,eAAe,uDAA+C,IAAI,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC;QAC3I,IAAI,iBAAiB,CAAC,MAAM,EAAE,CAAC;YAC9B,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM;gBAC1E,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,yBAAyB,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,mBAAmB,IAAI,EAAE,CAAC,CAAC,CAAC,CACtL,EAAE,CAAC;gBACH,sBAAsB,CAAC,IAAI,CAAC;oBAC3B,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAAsF,CAAC;oBACvI,QAAQ,EAAE,QAAQ,CAAC,OAAO;oBAC1B,UAAU,EAAE,iBAAiB;oBAC7B,GAAG,EAAE,yBAAyB,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;iBACrM,CAAC,CAAC;YACJ,CAAC;iBAAM,CAAC;gBACP,sBAAsB,CAAC,IAAI,CAAC;oBAC3B,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAA2C,CAAC;oBACvF,QAAQ,EAAE,QAAQ,CAAC,OAAO;oBAC1B,UAAU,EAAE,iBAAiB;oBAC7B,GAAG,EAAE,oBAAoB,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,KAAK,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;iBAChM,CAAC,CAAC;YACJ,CAAC;QACF,CAAC;QAED,MAAM,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QAC1I,IAAI,oBAAoB,CAAC,MAAM,EAAE,CAAC;YACjC,sBAAsB,CAAC,IAAI,CAAC;gBAC3B,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAA0E,CAAC;gBAC1H,QAAQ,EAAE,QAAQ,CAAC,OAAO;gBAC1B,UAAU,EAAE,oBAAoB;gBAChC,GAAG,EAAE,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;aACpK,CAAC,CAAC;QACJ,CAAC;QAED,OAAO,sBAAsB,CAAC;IAC/B,CAAC;IAED,yBAAyB;QACxB,OAAO,IAAI,CAAC,sBAAsB,CAAC;IACpC,CAAC;IAEO,gBAAgB,CAAC,IAAY;QACpC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,iBAAiB,GAAG,CAAC,CAAC;QAE3D,MAAM,cAAc,GAAG,mBAAmB,CAAC;QAC3C,IAAI,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;YAC/B,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE;gBAE9C,uBAAuB;gBACvB,MAAM,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,iBAAiB,IAAI,EAAE,CAAC;gBAC3D,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;gBAEnC,gBAAgB;gBAChB,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,oCAAoC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;gBAClG,MAAM,YAAY,GAAG,UAAU,IAAI,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC;gBACpF,MAAM,WAAW,GAAG,YAAY,CAAC,CAAC,CAAC,SAAS,YAAY,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;gBAEjE,yBAAyB;gBACzB,OAAO,cAAc,GAAG,iBAAiB,GAAG,KAAK,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,WAAW,SAAS,GAAG,GAAG,CAAC;YAC7H,CAAC,CAAC,CAAC;QACJ,CAAC;QACD,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC5B,CAAC;IAEO,WAAW,CAAC,OAA0B,EAAE,yBAAqD;QACpG,IAAI,SAAS,GAAG,IAAI,CAAC,oCAAoC,CAAC,OAAO,CAAC,CAAC;QACnE,IAAI,CAAC,SAAS,EAAE,CAAC;YAChB,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;YACpK,SAAU,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,CAAC;QAChF,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAEO,oCAAoC,CAAC,OAA0B;QACtE,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACpC,IAAI,SAAS,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,yBAAyB;gBACzD,IAAI,SAAS,CAAC,UAAU,CAAC,IAAI,KAAK,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;oBAC3D,OAAO,SAAS,CAAC;gBAClB,CAAC;YACF,CAAC;iBAAM,IAAI,SAAS,CAAC,KAAK,EAAE,MAAM,KAAK,UAAU,EAAE,CAAC;gBACnD,IAAI,iBAAiB,CAAC,SAAS,CAAC,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,+BAA+B;oBACjG,OAAO,SAAS,CAAC;gBAClB,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAEO,qCAAqC,CAAC,QAAa;QAC1D,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC;IAC7H,CAAC;IAED,KAAK,CAAC,IAAI,CAAC,SAA8B,EAAE,OAAiC;QAC3E,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE,CAAC;YACnC,MAAM,EAAE,GAAG,SAAS,CAAC;YACrB,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,CAAC,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7J,CAAC;QACD,IAAI,CAAC,SAAS,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CAAC,wBAAwB,SAAS,EAAE,CAAC,CAAC;QACtD,CAAC;QACD,MAAM,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,eAAe,EAAE,SAAS,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;IACrK,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,WAAmB,EAAE,aAAuB;QAC5D,MAAM,iBAAiB,GAAG,CAAC,MAAM,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,EAAE,oBAAoB,EAAkC,CAAC;QAChJ,iBAAiB,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QACtC,IAAI,CAAC,aAAa,EAAE,CAAC;YACpB,iBAAiB,CAAC,KAAK,EAAE,CAAC;QAC3B,CAAC;IACF,CAAC;IAED,yBAAyB,CAAC,SAAqB;QAC9C,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC;QACrE,KAAK,MAAM,EAAE,IAAI,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC;YAChD,IAAI,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC;gBACrD,OAAO,gBAAgB,CAAC,EAAE,CAAC,CAAC;YAC7B,CAAC;QACF,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,KAAK,CAAC,uBAAuB,CAAC,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAS,EAAE,IAA+B,CAAC,EAAE,OAAgB,KAAK;QACtH,MAAM,KAAK,GAAsB,EAAE,CAAC;QACpC,MAAM,QAAQ,GAAa,EAAE,CAAC;QAE9B,MAAM,iBAAiB,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1C,KAAK,MAAM,SAAS,IAAI,iBAAiB,EAAE,CAAC;YAC3C,MAAM,YAAY,GAAG,SAAS,CAAC,YAAY,CAAC;YAC5C,IAAI,CAAC,YAAY,IAAI,YAAY,CAAC,MAAM,2EAAiD,EAAE,CAAC;gBAC3F,SAAS;YACV,CAAC;YACD,IAAI,SAAS,CAAC,KAAK,uCAA+B,EAAE,CAAC;gBACpD,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACvC,SAAS;YACV,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;gBACtB,SAAS;YACV,CAAC;YACD,MAAM,SAAS,GAAG,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAC7E,IAAI,SAAS,EAAE,CAAC;gBACf,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;gBACvJ,IAAI,gBAAgB,EAAE,CAAC;oBACtB,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBAClD,CAAC;gBACD,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAC7B,CAAC;iBAAM,CAAC;gBACP,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;YACxC,CAAC;QACF,CAAC;QAED,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,CAAC;YAC1D,IAAI,SAAS,CAAC,kBAAkB,EAAE,CAAC;gBAClC,SAAS;YACV,CAAC;YACD,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,SAAS,CAAC,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE,SAAS,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,UAAU,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;gBACnJ,SAAS;YACV,CAAC;YACD,qFAAqF;YACrF,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC3C,CAAC;QAED,IAAI,KAAK,CAAC,MAAM,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;YACrC,IAAI,MAAM,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC;gBACnE,MAAM,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;gBACrE,IAAI,IAAI,EAAE,CAAC;oBACV,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;wBAC/B,QAAQ,EAAE,QAAQ,CAAC,IAAI;wBACvB,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAAmD,CAAC;wBACnG,QAAQ,EAAE,oBAAoB,CAAC,MAAM;qBACrC,CAAC,CAAC;gBACJ,CAAC;gBAWD,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAkE,wBAAwB,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YAC9K,CAAC;QACF,CAAC;IACF,CAAC;IAEO,eAAe,CAAC,SAAqB;QAC5C,MAAM,aAAa,GAAG,SAAS,CAAC,KAAK,uCAA+B,CAAC;QACrE,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;QACzI,MAAM,YAAY,GAAG,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,CAAC,CAAC,8DAAyC,CAAC,uEAA6C,CAAC;QACpL,MAAM,iBAAiB,GAAG,YAAY,iEAA4C,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAQ,EAAE,IAAe,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAoB,EAAE,IAAoB,CAAC,CAAC;QAExL,IAAI,aAAa,EAAE,CAAC;YACnB,MAAM,yBAAyB,GAAG,gBAAgB,IAAI,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC;YACjH,MAAM,sBAAsB,GAAG,gBAAgB;mBAC3C,CAAC,CAAC,SAAS,CAAC,MAAM,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC,CAAC;mBAC7I,CAAC,CAAC,SAAS,CAAC,iBAAiB,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,iBAAiB,CAAC,QAAQ,EAAE,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACvJ,IAAI,CAAC,yBAAyB,IAAI,sBAAsB,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,CAAC;gBAClG,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAA8D,EAAE,iBAAiB,CAAC,EAAE,CAAC;YAClK,CAAC;YACD,OAAO,SAAS,CAAC;QAClB,CAAC;QACD,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;YACrB,MAAM,sBAAsB,GAAG,gBAAgB,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1K,MAAM,SAAS,GAAG,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAE7E,uBAAuB;YACvB,IAAI,gBAAgB,EAAE,CAAC;gBACtB,IAAI,SAAS,EAAE,CAAC;oBACf,4DAA4D;oBAC5D,IAAI,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,sBAAsB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;wBACpF,OAAO,SAAS,CAAC;oBAClB,CAAC;oBACD,MAAM,sBAAsB,GAAG,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC,CAAC;oBAEjI,IAAI,sBAAsB,EAAE,CAAC;wBAC5B,gHAAgH;wBAChH,IAAI,CAAC,gBAAgB,CAAC,kBAAkB,IAAI,CAAC,SAAS,CAAC,OAAO,KAAK,gBAAgB,CAAC,OAAO,IAAI,SAAS,CAAC,KAAK,CAAC,cAAc,KAAK,gBAAgB,CAAC,cAAc,CAAC,EAAE,CAAC;4BACpK,MAAM,qBAAqB,GAAG,IAAI,CAAC,wBAAwB,EAAE,CAAC;4BAC9D,MAAM,oBAAoB,GAAG,IAAI,CAAC,uBAAuB,EAAE,CAAC;4BAC5D,IAAI,oBAAoB;mCACpB,CAAC,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE,qBAAqB,CAAC,OAAO,EAAE,qBAAqB,CAAC,IAAI,CAAC;mCAClH,aAAa,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE,oBAAoB,CAAC,OAAO,EAAE,oBAAoB,CAAC,IAAI,CAAC,EACjH,CAAC;gCACF,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;gCACvC,IAAI,KAAK,CAAC,IAAI,kEAAmC,EAAE,CAAC;oCACnD,OAAO,EAAE,MAAM,kEAA2C,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAA2B,EAAE,IAAoD,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC;gCACrM,CAAC;gCACD,IAAI,KAAK,CAAC,IAAI,4CAAyB,EAAE,CAAC;oCACzC,OAAO,EAAE,MAAM,4DAAwC,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAoD,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC;gCAChM,CAAC;gCACD,IAAI,KAAK,CAAC,IAAI,kCAAoB,EAAE,CAAC;oCACpC,OAAO,EAAE,MAAM,kEAA2C,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAA0B,EAAE,IAAqD,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC;gCACrM,CAAC;gCACD,OAAO,SAAS,CAAC;4BAClB,CAAC;4BACD,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAA6C,EAAE,iBAAiB,CAAC,EAAE,CAAC;wBAC9I,CAAC;wBAED,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;4BACvC,MAAM,sBAAsB,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;4BACrJ,IAAI,sBAAsB,EAAE,CAAC;gCAC5B,0EAA0E;gCAC1E,IAAI,sBAAsB,KAAK,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,IAAI,IAAI,CAAC,kCAAkC,CAAC,kBAAkB,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,sBAAsB,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;oCACxS,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAgB,EAAE,IAA8C,EAAE,iBAAiB,CAAC,EAAE,CAAC;gCAC5I,CAAC;gCAED,iFAAiF;gCACjF,IAAI,sBAAsB,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,IAAI,IAAI,CAAC,kCAAkC,CAAC,yBAAyB,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,sBAAsB,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,EAAE,CAAC;oCAC/S,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAe,EAAE,IAA6C,EAAE,iBAAiB,EAAE,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,EAAE,KAAK,CAAC,EAAE,CAAC;gCACxN,CAAC;4BACF,CAAC;wBACF,CAAC;oBAEF,CAAC;yBAAM,CAAC;wBAEP,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,IAAI,sBAAsB,KAAK,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,EAAE,CAAC;4BACnM,0EAA0E;4BAC1E,IAAI,IAAI,CAAC,kCAAkC,CAAC,kBAAkB,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC;gCAC1F,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAAsC,EAAE,iBAAiB,CAAC,EAAE,CAAC;4BACvI,CAAC;wBACF,CAAC;wBACD,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,IAAI,sBAAsB,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;4BACnM,iFAAiF;4BACjF,IAAI,IAAI,CAAC,kCAAkC,CAAC,yBAAyB,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC;gCACjG,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAAsC,EAAE,iBAAiB,CAAC,EAAE,CAAC;4BACvI,CAAC;wBACF,CAAC;oBACF,CAAC;oBACD,OAAO,SAAS,CAAC;gBAClB,CAAC;qBAAM,CAAC;oBACP,IAAI,sBAAsB,EAAE,CAAC;wBAC5B,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAoB,EAAE,IAAuC,EAAE,iBAAiB,CAAC,EAAE,CAAC;oBACzI,CAAC;gBACF,CAAC;gBACD,OAAO,SAAS,CAAC;YAClB,CAAC;YAED,2BAA2B;iBACtB,CAAC;gBACL,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,sBAAsB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;oBAClG,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAAsC,EAAE,iBAAiB,CAAC,EAAE,CAAC;gBACvI,CAAC;gBAED,MAAM,WAAW,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,CAAC,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,CAAC,CAAC,CAAC,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,CAAC,CAAC,CAAC,IAAI,CAAC;gBACvR,IAAI,WAAW,IAAI,SAAS,CAAC,eAAe,oDAA4C,EAAE,CAAC;oBAC1F,MAAM,sBAAsB,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5I,4CAA4C;oBAC5C,IAAI,sBAAsB,IAAI,sBAAsB,CAAC,KAAK,IAAI,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,sBAAsB,CAAC,KAAK,CAAC,EAAE,CAAC;wBACvI,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAAsC,EAAE,iBAAiB,CAAC,EAAE,CAAC;oBACvI,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAEO,mBAAmB,CAAC,UAAwB;QACnD,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,OAAO,UAAU,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC;QAED,MAAM,iBAAiB,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACpC,OAAO,iBAAiB,CAAC,CAAC,CAAC,CAAC;QAC7B,CAAC;QAED,MAAM,kBAAkB,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,CAAC;QACrF,MAAM,QAAQ,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,QAAQ,CAAC;QAE5F,iDAAiD;QACjD,4CAA4C;QAC5C,IAAI,CAAC,QAAQ,EAAE,CAAC;YACf,OAAO,kBAAkB,CAAC,CAAC,CAAC,CAAC;QAC9B,CAAC;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,kCAAkC,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;QAE1F,IAAI,SAAS,GAAG,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACnD,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE,CAAC;gBAC5C,QAAQ,aAAa,EAAE,CAAC;oBACvB,KAAK,IAAI;wBACR,4DAA4D;wBAC5D,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;4BAC/F,OAAO,IAAI,CAAC;wBACb,CAAC;wBACD,OAAO,KAAK,CAAC;oBACd,KAAK,WAAW;wBACf,iDAAiD;wBACjD,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,EAAE,CAAC;4BAChG,OAAO,IAAI,CAAC;wBACb,CAAC;wBACD,OAAO,KAAK,CAAC;oBACd,KAAK,KAAK;wBACT,oCAAoC;wBACpC,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,EAAE,CAAC;4BAC7F,OAAO,IAAI,CAAC;wBACb,CAAC;wBACD,OAAO,KAAK,CAAC;gBACf,CAAC;YACF,CAAC;YACD,OAAO,KAAK,CAAC;QACd,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;YACxF,SAAS,GAAG,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC/C,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE,CAAC;oBAC5C,QAAQ,aAAa,EAAE,CAAC;wBACvB,KAAK,WAAW;4BACf,gDAAgD;4BAChD,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;gCAC/F,OAAO,IAAI,CAAC;4BACb,CAAC;4BACD,OAAO,KAAK,CAAC;wBACd,KAAK,KAAK;4BACT,0CAA0C;4BAC1C,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,8BAA8B,EAAE,CAAC;gCAC/F,OAAO,IAAI,CAAC;4BACb,CAAC;4BACD,OAAO,KAAK,CAAC;oBACf,CAAC;gBACF,CAAC;gBACD,OAAO,KAAK,CAAC;YACd,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,EAAE,CAAC;YACtF,SAAS,GAAG,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC/C,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE,CAAC;oBAC5C,QAAQ,aAAa,EAAE,CAAC;wBACvB,KAAK,KAAK;4BACT,oCAAoC;4BACpC,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,EAAE,CAAC;gCAC7F,OAAO,IAAI,CAAC;4BACb,CAAC;4BACD,OAAO,KAAK,CAAC;oBACf,CAAC;gBACF,CAAC;gBACD,OAAO,KAAK,CAAC;YACd,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,EAAE,CAAC;YACzF,SAAS,GAAG,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC/C,KAAK,MAAM,aAAa,IAAI,cAAc,EAAE,CAAC;oBAC5C,QAAQ,aAAa,EAAE,CAAC;wBACvB,KAAK,KAAK;4BACT,2CAA2C;4BAC3C,IAAI,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,gCAAgC,CAAC,+BAA+B,EAAE,CAAC;gCAChG,OAAO,IAAI,CAAC;4BACb,CAAC;4BACD,OAAO,KAAK,CAAC;oBACf,CAAC;gBACF,CAAC;gBACD,OAAO,KAAK,CAAC;YACd,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,OAAO,SAAS,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC;IAEO,iBAAiB,CAAC,SAAoB;QAC7C,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;YAC9I,yCAAiC;QAClC,CAAC;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YACjE,IAAI,KAAK,uCAA+B,EAAE,CAAC;gBAC1C,OAAO,KAAK,CAAC;YACd,CAAC;QACF,CAAC;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YAC9D,IAAI,KAAK,uCAA+B,EAAE,CAAC;gBAC1C,OAAO,KAAK,CAAC;YACd,CAAC;QACF,CAAC;QACD,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,OAAO,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAC1D,CAAC;QACD,0CAAkC;IACnC,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAe,EAAE,WAAqB;QAC3D,IAAI,MAAM,EAAE,CAAC;YACZ,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,+CAA+C,MAAM,EAAE,CAAC,CAAC;QAChF,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,oCAAoC,CAAC,CAAC;QAC7D,CAAC;QACD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC;YACtC,OAAO;QACR,CAAC;QACD,MAAM,UAAU,GAAiB,EAAE,CAAC;QACpC,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACvC,CAAC;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACxC,CAAC;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrC,CAAC;QACD,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;YACxB,OAAO;QACR,CAAC;QACD,MAAM,KAAK,GAAqB,EAAE,CAAC;QACnC,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACpC,IAAI,WAAW,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC;gBACzC,0FAA0F;gBAC1F,SAAS;YACV,CAAC;YACD,IAAI,SAAS,CAAC,SAAS,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,iCAAyB,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;gBACvI,yHAAyH;gBACzH,SAAS;YACV,CAAC;YACD,IAAI,SAAS,CAAC,KAAK,EAAE,MAAM,KAAK,UAAU,EAAE,CAAC;gBAC5C,SAAS;YACV,CAAC;YACD,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC,UAAU,EAAE,UAAU,EAAE,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,UAAU,EAAE,CAAC,CAAC;QACpF,CAAC;QACD,IAAI,KAAK,CAAC,MAAM,EAAE,CAAC;YAClB,MAAM,cAAc,GAAG,MAAM,UAAU,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,0BAA0B,CAAC,iBAAiB,EAAE,CAAC;YASjG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAA4E,mCAAmC,EAAE;gBAChJ,KAAK,EAAE,KAAK,CAAC,MAAM;aACnB,CAAC,CAAC;YACH,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,iCAAiC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC1F,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,EAAE,EAAE,cAAc,EAAE,UAAU,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,iBAAiB,EAAE,EAAE,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACjL,IAAI,iBAAiB,CAAC,MAAM,EAAE,CAAC;gBAC9B,MAAM,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;YACzE,CAAC;QACF,CAAC;IACF,CAAC;IAED,KAAK,CAAC,SAAS;QACd,MAAM,QAAQ,GAA2B,EAAE,CAAC;QAC5C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE;YACnC,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;gBACvB,QAAQ,CAAC,IAAI,CAAC;oBACb,SAAS,EAAE,SAAS,CAAC,OAAO;oBAC5B,OAAO,EAAE;wBACR,SAAS,iCAAyB;wBAClC,wBAAwB,EAAE,SAAS,CAAC,KAAK,EAAE,mBAAmB;wBAC9D,eAAe,EAAE,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,kBAAkB;wBAC9E,mBAAmB,EAAE,SAAS,CAAC,KAAK,EAAE,mBAAmB;wBACzD,OAAO,EAAE,EAAE,CAAC,8CAA8C,CAAC,EAAE,IAAI,EAAE;qBACnE;iBACD,CAAC,CAAC;YACJ,CAAC;QACF,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,0BAA0B,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;IAC3E,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,WAAmB,EAAE,WAA6C;QACpF,IAAI,OAA6C,CAAC;QAClD,IAAI,WAAW,KAAK,KAAK,EAAE,CAAC;YAC3B,OAAO,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAC;YACxD,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO;YACR,CAAC;QACF,CAAC;QAED,MAAM,aAAa,GAAG,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,OAAO,EAAE,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,UAAU,EAAE,WAAW,KAAK,YAAY,EAAE,CAAC;QAC9I,MAAM,YAAY,GAA2B,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;QAEjF,IAAI,CAAC,gBAAgB,CAAC,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,EAAE,YAAY,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACxH,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACvB,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAqB,EAAE,IAA4B,EAAE,WAAW,CAAC,CAAC,CAAC;QACjG,CAAC;QAED,IAAI,cAAc,GAAG,gBAAgB,CAAC,UAAU,CAAC,cAAc,CAAC;QAChE,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,KAAK,MAAM,cAAc,IAAI,OAAO,EAAE,eAAe,IAAI,gBAAgB,CAAC,kBAAkB,EAAE,CAAC;YAC9F,IAAI,cAAc,2CAA2B,IAAI,cAAc,+CAA6B,EAAE,CAAC;gBAC9F,OAAO,CAAC,IAAI,CAAC;oBACZ,KAAK,EAAE,cAAc,+CAA6B,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAc,EAAE,IAAe,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,cAAc,CAAC;oBAC3I,EAAE,EAAE,cAAc;iBAClB,CAAC,CAAC;YACJ,CAAC;QACF,CAAC;QACD,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACxB,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAoE,CAAC,CAAC;YAC3H,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,WAAW,EAAE,OAAO,EAAE,CAAC,CAAC;YACnI,IAAI,CAAC,MAAM,EAAE,CAAC;gBACb,OAAO;YACR,CAAC;YACD,cAAc,GAAG,MAAM,CAAC,EAAE,CAAC;QAC5B,CAAC;QAED,IAAI,cAAc,KAAK,gBAAgB,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;YACnE,CAAC,gBAAgB,CAAC,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,EAAE,EAAE,GAAG,YAAY,EAAE,cAAc,EAAE,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC5I,CAAC;QAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC;YAC1D,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAgB,EAAE,IAAoC,CAAC;YAC3E,cAAc,EAAE,KAAK;YACrB,gBAAgB,EAAE,IAAI;YACtB,aAAa,EAAE,KAAK;YACpB,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAU,EAAE,IAAU,CAAC;SAC/C,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAClB,OAAO;QACR,CAAC;QAED,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,QAAQ,wCAA+B,EAAE,EAAE,KAAK,EAAC,QAAQ,EAAC,EAAE;YAC/F,IAAI,CAAC;gBACJ,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAgB,EAAE,IAAqB,CAAC,EAAE,CAAC,CAAC;gBACpF,MAAM,IAAI,GAAG,GAAG,gBAAgB,CAAC,UAAU,CAAC,EAAE,IAAI,gBAAgB,CAAC,OAAO,GAAG,cAAc,+CAA6B,IAAI,cAAc,+CAA6B,IAAI,cAAc,2CAA2B,CAAC,CAAC,CAAC,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC;gBACxP,MAAM,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,gBAAgB,EAAE,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,gCAAwB,CAAC;gBACtI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAoB,EAAE,IAAkC,CAAC,CAAC,CAAC;YACvG,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBAChB,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAiB,EAAE,IAAuC,EAAE,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAClI,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,qBAAqB,CAAC,WAAmB;QACtD,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,CAAC;QAClF,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAa,EAAE,IAAuC,CAAC,CAAC,CAAC;YACpG,OAAO;QACR,CAAC;QAED,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACtC,OAAO;gBACN,EAAE,EAAE,CAAC,CAAC,OAAO;gBACb,KAAK,EAAE,CAAC,CAAC,OAAO;gBAChB,WAAW,EAAE,GAAG,OAAO,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,QAAQ,CAAC,IAAa,EAAE,IAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;gBAC/I,SAAS,EAAE,GAAG,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,iBAAiB,IAAI,CAAC,CAAC,OAAO,EAAE;gBAC9F,IAAI,EAAE,CAAC;aACP,CAAC;QACH,CAAC,CAAC,CAAC;QACH,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EACnD;YACC,WAAW,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAe,EAAE,IAA4B,CAAC;YACxE,aAAa,EAAE,IAAI;SACnB,CAAC,CAAC;QACJ,OAAO,IAAI,EAAE,IAAI,CAAC;IACnB,CAAC;IAEO,KAAK,CAAC,kCAAkC,CAAC,OAA4B,EAAE,gCAAmD;QACjI,MAAM,UAAU,GAAiB,EAAE,CAAC;QACpC,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACvC,CAAC;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACxC,CAAC;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrC,CAAC;QACD,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;YACxB,OAAO;QACR,CAAC;QACD,MAAM,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,kCAAkC,CAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB,EAAE,EAAE,gCAAgC,CAAC,CAAC,CAAC,CAAC;QAC3K,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAC1B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,oCAAoC,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC/G,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACvC,CAAC;IACF,CAAC;IAEO,yBAAyB;QAChC,OAAO,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC;IAC7E,CAAC;IAEO,yBAAyB,CAAC,SAAS,GAAG,KAAK;QAClD,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC;QAClC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE;YAC3C,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;gBACtC,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;YAC9B,CAAC;YACD,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAClC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;IACjF,CAAC;IAEO,uBAAuB;QAC9B,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,KAAK,SAAS,IAAI,IAAI,CAAC,uBAAuB,EAAE,EAAE,CAAC;YACjF,OAAO,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,SAAS;QACrC,CAAC;QACD,OAAO,4BAA0B,CAAC,oBAAoB,CAAC;IACxD,CAAC;IAEO,8BAA8B;QACrC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;aAC/D,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAEO,KAAK,CAAC,2BAA2B;QACxC,MAAM,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC5C,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;QACxD,MAAM,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,wBAAwB,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAClI,CAAC;IAEO,KAAK,CAAC,2BAA2B;QACxC,MAAM,KAAK,GAAqB,EAAE,CAAC;QACnC,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YACpC,IAAI,SAAS,CAAC,SAAS,IAAI,SAAS,CAAC,KAAK,EAAE,MAAM,IAAI,SAAS,CAAC,KAAK,EAAE,UAAU,CAAC,IAAI,EAAE,CAAC;gBACxF,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC,UAAU,EAAE,OAAO,EAAE,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC;YACrE,CAAC;QACF,CAAC;QACD,IAAI,KAAK,CAAC,MAAM,EAAE,CAAC;YAClB,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACjG,IAAI,iBAAiB,CAAC,MAAM,EAAE,CAAC;gBAC9B,MAAM,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,CAAC;YAClE,CAAC;QACF,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,oBAAoB;QACjC,MAAM,QAAQ,GAAiB,EAAE,CAAC;QAClC,MAAM,kBAAkB,GAAG,EAAE,CAAC;QAC9B,MAAM,eAAe,GAAG,EAAE,CAAC;QAC3B,KAAK,MAAM,SAAS,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACvC,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,SAAS,CAAC,EAAE,CAAC;gBAChD,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACjD,SAAS;YACV,CAAC;YACD,IAAI,MAAM,IAAI,CAAC,4BAA4B,CAAC,SAAS,CAAC,EAAE,CAAC;gBACxD,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBAC9C,SAAS;YACV,CAAC;YACD,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC1B,CAAC;QAED,IAAI,kBAAkB,CAAC,MAAM,EAAE,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,qCAAqC,EAAE,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7F,CAAC;QAED,IAAI,eAAe,CAAC,MAAM,EAAE,CAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,6CAA6C,EAAE,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACjG,CAAC;QAED,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;YACtB,OAAO;QACR,CAAC;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAChD,MAAM,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,EAAE,wBAAwB,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC;IAC3J,CAAC;IAEO,iBAAiB;QACxB,OAAO,IAAI,CAAC,uBAAuB,EAAE,IAAI,IAAI,CAAC,wBAAwB,EAAE,CAAC;IAC1E,CAAC;IAEO,wBAAwB;QAC/B,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;IACjF,CAAC;IAEO,uBAAuB;QAC9B,QAAQ,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;YACvC,mEAAoC;YACpC,6CAA0B;YAC1B,yCAAwB;YACxB,kCAAoB,CAAC,CAAC,CAAC;gBACtB,MAAM,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC;gBAC/D,IAAI,OAAO,IAAI,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC;oBACtC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;gBACrJ,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAEO,yBAAyB,CAAC,SAAqB;QACtD,IAAI,SAAS,CAAC,eAAe,EAAE,eAAe,EAAE,CAAC;YAChD,OAAO,KAAK,CAAC;QACd,CAAC;QAED,MAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAElD,IAAI,eAAe,KAAK,KAAK,EAAE,CAAC;YAC/B,MAAM,sBAAsB,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;YACrE,MAAM,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC;YAC1D,IAAI,sBAAsB,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE,CAAC;gBAClD,OAAO,IAAI,CAAC;YACb,CAAC;YACD,IAAI,IAAI,CAAC,+BAA+B,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,QAAQ,CAAC,IAAI,WAAW,EAAE,CAAC,EAAE,CAAC;gBACtH,OAAO,IAAI,CAAC;YACb,CAAC;YACD,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,SAAS,CAAC,MAAM,EAAE,CAAC;YACtB,OAAO,KAAK,CAAC;QACd,CAAC;QAED,MAAM,4BAA4B,GAAG,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAC5E,IAAI,4BAA4B,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC;YAClF,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,eAAe,KAAK,IAAI,EAAE,CAAC;YAC9B,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,eAAe,KAAK,uBAAuB,EAAE,CAAC;YACjD,OAAO,SAAS,CAAC,eAAe,8CAAqC,IAAI,SAAS,CAAC,eAAe,+CAAsC,CAAC;QAC1I,CAAC;QAED,OAAO,KAAK,CAAC;IACd,CAAC;IAED,KAAK,CAAC,4BAA4B,CAAC,SAAqB;QACvD,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;YACzB,OAAO;QACR,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YAC5C,OAAO;QACR,CAAC;QAED,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,KAAK,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;YAC9G,OAAO,GAAG,CAAC,QAAQ,CAAC,IAA6C,EAAE,IAAiF,CAAC,CAAC;QACvJ,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,IAAI,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;YACnH,OAAO;QACR,CAAC;QAED,IAAI,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,CAAC,EAAE,CAAC;YAC3D,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;gBAChD,OAAO;YACR,CAAC;QACF,CAAC;aAAM,CAAC;YACP,MAAM,QAAQ,GAAG,SAAS,YAAY,SAAS;gBAC9C,CAAC,CAAC,MAAM,SAAS,CAAC,kBAAkB,EAAE;gBACtC,CAAC,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;YACpF,IAAI,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,CAAC;gBAC3C,OAAO;YACR,CAAC;QACF,CAAC;QAED,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAmH,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC;IAC5L,CAAC;IAED,sBAAsB,CAAC,oBAAyC;QAC/D,IAAI,QAAQ,CAAC,oBAAoB,CAAC,EAAE,CAAC;YACpC,IAAI,0BAA0B,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC;gBAC3D,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;YAC1E,CAAC;YACD,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC;gBAChC,OAAO,IAAI,CAAC;YACb,CAAC;YACD,OAAO,IAAI,CAAC,+BAA+B,CAAC,oBAAoB,CAAC,CAAC;QACnE,CAAC;QACD,OAAO,IAAI,CAAC,yBAAyB,CAAC,oBAAoB,CAAC,CAAC;IAC7D,CAAC;IAEO,+BAA+B,CAAC,SAAiB;QACxD,MAAM,sBAAsB,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAChE,OAAO,sBAAsB,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;IACjE,CAAC;IAED,KAAK,CAAC,6BAA6B,CAAC,oBAAyC,EAAE,MAAe;QAC7F,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAAE,CAAC;YAChC,IAAI,QAAQ,CAAC,oBAAoB,CAAC,EAAE,CAAC;gBACpC,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;YAC/D,CAAC;YACD,MAAM,4BAA4B,GAAG,IAAI,CAAC,+BAA+B,EAAE,CAAC;YAC5E,MAAM,WAAW,GAAG,oBAAoB,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC;YACrE,MAAM,cAAc,GAAG,4BAA4B,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACzE,IAAI,MAAM,EAAE,CAAC;gBACZ,IAAI,cAAc,KAAK,CAAC,CAAC,EAAE,CAAC;oBAC3B,4BAA4B,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;gBACxD,CAAC;YACF,CAAC;iBACI,CAAC;gBACL,IAAI,cAAc,KAAK,CAAC,CAAC,EAAE,CAAC;oBAC3B,4BAA4B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAChD,CAAC;YACF,CAAC;YACD,IAAI,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,CAAC;YACnE,IAAI,MAAM,IAAI,oBAAoB,CAAC,KAAK,IAAI,oBAAoB,CAAC,MAAM,EAAE,CAAC;gBACzE,MAAM,IAAI,CAAC,0BAA0B,CAAC,cAAc,CAAC,oBAAoB,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;YACrG,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC3C,CAAC;aAEI,CAAC;YACL,MAAM,2BAA2B,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;YAC1E,IAAI,QAAQ,CAAC,oBAAoB,CAAC,EAAE,CAAC;gBACpC,IAAI,0BAA0B,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,CAAC;oBAC3D,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;gBAC1E,CAAC;gBACD,oBAAoB,GAAG,oBAAoB,CAAC,WAAW,EAAE,CAAC;gBAC1D,IAAI,IAAI,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,KAAK,MAAM,EAAE,CAAC;oBAClE,IAAI,MAAM,EAAE,CAAC;wBACZ,2BAA2B,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;oBACxD,CAAC;yBAAM,CAAC;wBACP,IAAI,2BAA2B,CAAC,QAAQ,CAAC,oBAAoB,CAAC,EAAE,CAAC;4BAChE,2BAA2B,CAAC,MAAM,CAAC,2BAA2B,CAAC,OAAO,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC,CAAC;wBAClG,CAAC;oBACF,CAAC;gBACF,CAAC;gBACD,IAAI,CAAC,8BAA8B,CAAC,2BAA2B,CAAC,CAAC;gBACjE,KAAK,MAAM,CAAC,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;oBAChC,IAAI,CAAC,CAAC,SAAS,CAAC,WAAW,EAAE,KAAK,oBAAoB,EAAE,CAAC;wBACxD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACxB,CAAC;gBACF,CAAC;YACF,CAAC;iBAAM,CAAC;gBACP,MAAM,WAAW,GAAG,oBAAoB,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC;gBACrE,MAAM,6BAA6B,GAAG,IAAI,CAAC,sBAAsB,CAAC,oBAAoB,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;gBAChH,MAAM,6BAA6B,GAAG,2BAA2B,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;gBACxF,MAAM,8BAA8B,GAAG,2BAA2B,CAAC,QAAQ,CAAC,IAAI,WAAW,EAAE,CAAC,CAAC;gBAE/F,IAAI,MAAM,EAAE,CAAC;oBACZ,IAAI,8BAA8B,EAAE,CAAC;wBACpC,2BAA2B,CAAC,MAAM,CAAC,2BAA2B,CAAC,OAAO,CAAC,IAAI,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBAC/F,CAAC;oBACD,IAAI,6BAA6B,EAAE,CAAC;wBACnC,IAAI,6BAA6B,EAAE,CAAC;4BACnC,2BAA2B,CAAC,MAAM,CAAC,2BAA2B,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;wBACzF,CAAC;oBACF,CAAC;yBAAM,CAAC;wBACP,IAAI,CAAC,6BAA6B,EAAE,CAAC;4BACpC,2BAA2B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;wBAC/C,CAAC;oBACF,CAAC;gBACF,CAAC;gBACD,uBAAuB;qBAClB,CAAC;oBACL,IAAI,6BAA6B,EAAE,CAAC;wBACnC,2BAA2B,CAAC,MAAM,CAAC,2BAA2B,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;oBACzF,CAAC;oBACD,IAAI,6BAA6B,EAAE,CAAC;wBACnC,IAAI,CAAC,8BAA8B,EAAE,CAAC;4BACrC,2BAA2B,CAAC,IAAI,CAAC,IAAI,WAAW,EAAE,CAAC,CAAC;wBACrD,CAAC;oBACF,CAAC;yBAAM,CAAC;wBACP,IAAI,8BAA8B,EAAE,CAAC;4BACpC,2BAA2B,CAAC,MAAM,CAAC,2BAA2B,CAAC,OAAO,CAAC,IAAI,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;wBAC/F,CAAC;oBACF,CAAC;gBACF,CAAC;gBACD,IAAI,CAAC,8BAA8B,CAAC,2BAA2B,CAAC,CAAC;gBACjE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC3C,CAAC;QACF,CAAC;QAED,IAAI,MAAM,EAAE,CAAC;YACZ,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC7B,CAAC;IACF,CAAC;IAEO,6CAA6C;QACpD,IACC,IAAI,CAAC,gCAAgC,KAAK,IAAI,CAAC,mCAAmC,EAAE,CAAC,4DAA4D;eAC9I,IAAI,CAAC,iCAAiC,KAAK,IAAI,CAAC,oCAAoC,EAAE,CAAC,4DAA4D,EACrJ,CAAC;YACF,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAChE,MAAM,OAAO,GAAG,CAAC,UAAwB,EAAkB,EAAE;gBAC5D,MAAM,gBAAgB,GAAiB,EAAE,CAAC;gBAC1C,MAAM,mBAAmB,GAAiB,EAAE,CAAC;gBAC7C,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE,CAAC;oBACpC,IAAI,IAAI,CAAC,yBAAyB,CAAC,SAAS,CAAC,EAAE,CAAC;wBAC/C,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAClC,CAAC;yBAAM,CAAC;wBACP,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBACrC,CAAC;gBACF,CAAC;gBACD,OAAO,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,CAAC;YAChD,CAAC,CAAC;YAEF,MAAM,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;YAC9E,IAAI,CAAC,iCAAiC,GAAG,SAAS,CAAC;YACnD,IAAI,CAAC,kCAAkC,GAAG,SAAS,CAAC;YACpD,MAAM,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;YAExE,KAAK,MAAM,CAAC,IAAI,mBAAmB,IAAI,EAAE,EAAE,CAAC;gBAC3C,IAAI,mBAAmB,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;oBACtC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACxB,CAAC;YACF,CAAC;YACD,KAAK,MAAM,CAAC,IAAI,sBAAsB,IAAI,EAAE,EAAE,CAAC;gBAC9C,IAAI,gBAAgB,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC;oBACnC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACxB,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAED,KAAK,CAAC,UAAU,CAAC,SAAqB;QACrC,IAAI,CAAC,CAAC,SAAS,YAAY,SAAS,CAAC,EAAE,CAAC;YACvC,OAAO,IAAI,cAAc,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAkB,EAAE,IAA0C,CAAC,CAAC,CAAC;QACtH,CAAC;QAED,IAAI,SAAS,CAAC,WAAW,EAAE,CAAC;YAC3B,OAAO,IAAI,cAAc,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAW,EAAE,IAA+C,CAAC,CAAC,CAAC;QACpH,CAAC;QAED,IAAI,SAAS,CAAC,eAAe,EAAE,eAAe,EAAE,CAAC;YAChD,OAAO,IAAI,cAAc,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAY,EAAE,IAA+C,CAAC,CAAC,CAAC;QACrH,CAAC;QAED,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,IAAI,mCAAmC,CAAC,SAAS,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,+BAA+B,CAAC,2BAA2B,EAAE,CAAC,EAAE,CAAC;gBACrK,OAAO,IAAI,cAAc,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAY,EAAE,IAA+B,CAAC,CAAC,CAAC;YACrG,CAAC;YAED,MAAM,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAChH,IAAI,WAAW,KAAK,IAAI,EAAE,CAAC;gBAC1B,OAAO,IAAI,CAAC;YACb,CAAC;YAED,MAAM,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YACnH,IAAI,YAAY,KAAK,IAAI,EAAE,CAAC;gBAC3B,OAAO,IAAI,CAAC;YACb,CAAC;YAED,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC1G,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC;gBACxB,OAAO,IAAI,CAAC;YACb,CAAC;YAED,OAAO,WAAW,IAAI,YAAY,IAAI,SAAS,IAAI,IAAI,cAAc,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAqB,EAAE,IAA+E,EAAE,SAAS,CAAC,WAAW,IAAI,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5P,CAAC;QAED,IAAI,SAAS,CAAC,iBAAiB,IAAI,MAAM,IAAI,CAAC,0BAA0B,CAAC,UAAU,CAAC,SAAS,CAAC,iBAAiB,CAAC,KAAK,IAAI,EAAE,CAAC;YAC3H,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO,IAAI,cAAc,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAqB,EAAE,IAA+E,EAAE,SAAS,CAAC,WAAW,IAAI,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;IAChN,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,GAA8B,EAAE,iBAA0C,EAAE,EAAE,gBAA4C;QACvI,IAAI,WAAqE,CAAC;QAC1E,IAAI,SAAiC,CAAC;QACtC,IAAI,OAAiD,CAAC;QAEtD,IAAI,GAAG,YAAY,GAAG,EAAE,CAAC;YACxB,WAAW,GAAG,GAAG,CAAC;QACnB,CAAC;aAAM,CAAC;YACP,IAAI,eAA2C,CAAC;YAChD,IAAI,OAAsC,CAAC;YAE3C,gBAAgB;YAChB,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBACnB,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;gBAC/E,IAAI,CAAC,SAAS,EAAE,SAAS,EAAE,CAAC;oBAC3B,eAAe,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE,cAAc,CAAC,OAAO,EAAE,UAAU,EAAE,cAAc,CAAC,wBAAwB,IAAI,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,EAAE,CAAC;gBAC1K,CAAC;YACF,CAAC;YACD,qBAAqB;iBAChB,IAAI,GAAG,CAAC,OAAO,EAAE,CAAC;gBACtB,SAAS,GAAG,GAAG,CAAC;gBAChB,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;gBACtB,IAAI,cAAc,CAAC,OAAO,IAAI,cAAc,CAAC,OAAO,KAAK,OAAO,EAAE,OAAO,EAAE,CAAC;oBAC3E,eAAe,GAAG,EAAE,EAAE,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,OAAO,EAAE,cAAc,CAAC,OAAO,EAAE,CAAC;gBACpF,CAAC;YACF,CAAC;YACD,sBAAsB;iBACjB,IAAI,GAAG,CAAC,iBAAiB,EAAE,CAAC;gBAChC,SAAS,GAAG,GAAG,CAAC;gBAChB,WAAW,GAAG,GAAG,CAAC,iBAAiB,CAAC;YACrC,CAAC;YAED,IAAI,eAAe,EAAE,CAAC;gBACrB,MAAM,cAAc,GAAG,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC,MAAM,SAAS,CAAC,MAAM,CAAC,0BAA0B,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;gBAC7H,OAAO,GAAG,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,eAAe,CAAC,EAAE,EAAE,cAAc,EAAE,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC1H,CAAC;YAED,IAAI,CAAC,SAAS,IAAI,OAAO,EAAE,CAAC;gBAC3B,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;gBACpK,SAAU,CAAC,4BAA4B,CAAC,MAAM,IAAI,CAAC,0BAA0B,CAAC,4BAA4B,EAAE,CAAC,CAAC;YAC3H,CAAC;YAED,IAAI,SAAS,EAAE,WAAW,EAAE,CAAC;gBAC5B,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAW,EAAE,IAA+C,CAAC,CAAC,CAAC;YAC7F,CAAC;YAED,IAAI,OAAO,EAAE,CAAC;gBACb,qCAAqC;gBACrC,0EAA0E;gBAC1E,IAAI,cAAc,CAAC,iBAAiB,EAAE,CAAC;oBACtC,OAAO,GAAG,EAAE,CAAC;oBACb,MAAM,kBAAkB,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;oBAChG,KAAK,MAAM,gBAAgB,IAAI,IAAI,CAAC,iBAAiB,EAAE,CAAC;wBACvD,IAAI,kBAAkB,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;4BACpJ,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;wBACvC,CAAC;oBACF,CAAC;gBACF,CAAC;gBACD,4DAA4D;gBAC5D,+DAA+D;gBAC/D,iEAAiE;qBAC5D,IAAI,cAAc,CAAC,MAAM,IAAI,SAAS,EAAE,KAAK,EAAE,CAAC;oBACpD,OAAO,GAAG,EAAE,CAAC;oBACb,IAAI,SAAS,CAAC,eAAe,oDAA4C,EAAE,CAAC;wBAC3E,MAAM,CAAC,iBAAiB,CAAC,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;wBACjG,IAAI,iBAAiB,EAAE,CAAC;4BACvB,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;wBACjC,CAAC;oBACF,CAAC;gBACF,CAAC;YACF,CAAC;YAED,IAAI,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;gBAChC,IAAI,CAAC,WAAW,EAAE,CAAC;oBAClB,IAAI,CAAC,OAAO,EAAE,CAAC;wBACd,MAAM,EAAE,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAc,GAAI,CAAC,UAAU,CAAC,EAAE,CAAC;wBACjE,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,+BAA+B,CAAC,2BAA2B,EAAE,CAAC;wBAC1F,MAAM,cAAc,GAAG,QAAQ,CAAC,CAAC,CAAC,sCAAsC,CAAC,QAAQ,2EAAiD,CAAC,CAAC,CAAC,SAAS,CAAC;wBAC/I,MAAM,kBAAkB,GAAG,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAc,EAAE,IAAiD,EAAE,cAAc,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;wBAC5J,IAAI,cAAc,CAAC,OAAO,EAAE,CAAC;4BAC5B,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAA4F,EAAE,EAAE,EAAE,cAAc,CAAC,OAAO,CAAC,CAAC;4BAC5K,MAAM,IAAI,wBAAwB,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,OAAO,IAAI,kBAAkB,EAAE,CAAC,CAAC,CAAC,OAAO,yDAAwC,CAAC;wBAC9I,CAAC;6BAAM,CAAC;4BACP,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAW,EAAE,IAAmE,EAAE,EAAE,CAAC,CAAC;4BACnH,MAAM,IAAI,wBAAwB,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,OAAO,IAAI,kBAAkB,EAAE,CAAC,CAAC,CAAC,OAAO,yDAAwC,CAAC;wBAC9I,CAAC;oBACF,CAAC;oBACD,WAAW,GAAG,OAAO,CAAC;gBACvB,CAAC;gBACD,IAAI,cAAc,CAAC,OAAO,EAAE,CAAC;oBAC5B,cAAc,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAC3C,CAAC;gBACD,IAAI,SAAS,EAAE,iBAAiB,EAAE,CAAC;oBAClC,cAAc,CAAC,iBAAiB,GAAG,IAAI,CAAC;gBACzC,CAAC;YACF,CAAC;QACF,CAAC;QAED,IAAI,WAAW,EAAE,CAAC;YACjB,IAAI,cAAc,CAAC,aAAa,EAAE,CAAC;gBAClC,MAAM,SAAS,GAAG,WAAW,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,6BAA6B,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,6BAA6B,CAAC,iBAAiB,4CAAyB,CAAC;gBACjM,MAAM,OAAO,GAA6B,EAAE,CAAC;gBAC7C,OAAO,CAAC,IAAI,CAAC;oBACZ,KAAK,EAAE,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,MAAM;wBACpF,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,EAA+D,CAA5D,CAA8D,CAA5D,GAAiF,CAAC,gBAA9D,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;wBAC9E,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,EAAyE,CAAtE,CAAwE,CAAtE,GAAmG,EAAE,cAAc,CAAC,UAAtF,EAAE,CAAiG,CAAC,KAA3F,CAAiG,CAA/F,AAAgG,CAA/F,CAAiG,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,OAAzF,CAAC;iBACzF,CAAC,CAAC;gBACH,IAAI,CAAC,SAAS,EAAE,CAAC;oBAChB,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAM,EAAE,IAAgB,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,SAAU,CAAC,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;gBACtH,CAAC;gBACD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAU;oBACvD,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAAmB,CAAC;oBACjE,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAuD,EAAE,SAAS,CAAC,WAAW,EAAE,SAAS,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAoB,EAAE,IAA0C,CAAC;oBAC7P,MAAM,EAAE,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,MAAM;oBACnH,YAAY,EAAE,IAAI;oBAClB,OAAO;oBACP,QAAQ,EAAE,SAAS,CAAC,CAAC,CAAC;wBACrB,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAgB,EAAE,IAAqB,CAAC;wBAC5D,OAAO,EAAE,IAAI;qBACb,CAAC,CAAC,CAAC,SAAS;iBACb,CAAC,CAAC;gBACH,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;oBACpB,MAAM,IAAI,iBAAiB,EAAE,CAAC;gBAC/B,CAAC;gBACD,IAAI,SAAS,EAAE,CAAC;oBACf,cAAc,CAAC,eAAe,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC;gBAC1D,CAAC;YACF,CAAC;YACD,IAAI,WAAW,YAAY,GAAG,EAAE,CAAC;gBAChC,SAAS,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,cAAc,CAAC,EAAE,gBAAgB,CAAC,CAAC;YACxH,CAAC;iBAAM,IAAI,SAAS,EAAE,CAAC;gBACtB,IAAI,SAAS,CAAC,iBAAiB,EAAE,CAAC;oBACjC,SAAS,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,wBAAwB,CAAC,WAAiC,EAAE,cAAc,CAAC,EAAE,gBAAgB,CAAC,CAAC;gBAClL,CAAC;qBAAM,CAAC;oBACP,SAAS,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,SAAU,EAAE,WAAgC,EAAE,cAAc,EAAE,OAAO,CAAC,EAAE,gBAAgB,CAAC,CAAC;gBACrK,CAAC;YACF,CAAC;QACF,CAAC;QAED,IAAI,CAAC,SAAS,EAAE,CAAC;YAChB,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAS,EAAE,IAA6B,CAAC,CAAC,CAAC;QACzE,CAAC;QAED,IAAI,cAAc,CAAC,MAAM,EAAE,CAAC;YAC3B,IAAI,SAAS,CAAC,eAAe,+CAAsC,IAAI,SAAS,CAAC,eAAe,8CAAqC,EAAE,CAAC;gBACvI,IAAI,cAAc,CAAC,aAAa,EAAE,CAAC;oBAClC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;wBAC/C,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAkB,CAAC;wBAC/D,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAA2C,EAAE,SAAS,CAAC,WAAW,CAAC;wBACnH,MAAM,EAAE,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc,CAAC,aAAa,CAAC,MAAM;wBACnH,aAAa,EAAE,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,EAA8D,CAA3D,CAA6D,CAA3D,GAA+E,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAApE,AAA4E,CAAC,CAA3E,CAA6E,EAAwE,CAArE,CAAuE,CAArE,CAA3E,EAAE,AAA0K,CAAzK,CAA2K,cAAc,CAAC,OAAnK,CAAC,CAA6E,EAAE,EAAgG,CAAC,IAA1F,EAAE,AAA8F,CAA7F,AAA8F,uBAAvE,CAAC;qBACpP,CAAC,CAAC;oBACH,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;wBACvB,MAAM,IAAI,iBAAiB,EAAE,CAAC;oBAC/B,CAAC;gBACF,CAAC;gBACD,MAAM,IAAI,CAAC,aAAa,CAAC,SAAS,EAAE,SAAS,CAAC,eAAe,+CAAsC,CAAC,CAAC,2CAAkC,CAAC,yCAAgC,CAAC,CAAC;YAC3K,CAAC;YACD,MAAM,IAAI,CAAC,2BAA2B,CAAC,SAAS,CAAC,CAAC;QACnD,CAAC;QAED,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,SAAqB,EAAE,MAAkC,EAAE,cAA+B;QAC/G,MAAM,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;YAC9B,IAAI,CAAC,KAAK,EAAE,CAAC;gBACZ,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;YACxC,CAAC;YACD,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;gBACxB,SAAS,GAAG,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,GAAG,SAAS,CAAC,UAAU,EAAE,UAAU,EAAE,KAAK,CAAC,UAAU,EAAE,CAAC,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,SAAS,CAAC;YAC7I,CAAC;YACD,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;gBACvB,OAAO,MAAM,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,SAAS,CAAC,OAAO,EAAE,EAAE,wBAAwB,EAAE,KAAK,CAAC,UAAU,EAAE,GAAG,cAAc,EAAE,CAAC,CAAC;YACnJ,CAAC;YAED,MAAM,cAAc,GAAG,MAAM,MAAM,CAAC,0BAA0B,CAAC,iBAAiB,EAAE,CAAC;YACnF,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE,cAAc,CAAC,EAAE,CAAC;gBAC/F,MAAM,IAAI,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAc,EAAE,IAA6D,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;YACvI,CAAC;YAED,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAC9D,IAAI,CAAC;gBACJ,OAAO,MAAM,MAAM,CAAC,0BAA0B,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9D,CAAC;oBAAS,CAAC;gBACV,IAAI,CAAC;oBACJ,MAAM,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;gBAClC,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBAC9B,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,SAAqB;QACnC,IAAI,CAAC,KAAK,EAAE,CAAC;YACZ,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;YACxB,OAAO,KAAK,CAAC;QACd,CAAC;QAED,MAAM,MAAM,GAAG,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QAC5C,IAAI,CAAC,MAAM,EAAE,CAAC;YACb,OAAO,KAAK,CAAC;QACd,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,SAAqB;QACtC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE,CAAC;YACrC,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QACzC,CAAC;QACD,MAAM,MAAM,GAAG,SAAS,CAAC,SAAS,CAAC,OAAQ,CAAC,CAAC;QAC7C,IAAI,MAAM,KAAK,QAAQ,EAAE,CAAC;YACzB,OAAO;QACR,CAAC;QACD,MAAM,qBAAqB,GAAG,SAAS,CAAC,OAAO,EAAE,UAAU,EAAE,kBAAkB,EAAE,CAAC,CAAC,CAAC,CAAC;QACrF,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,gBAAgB,EAAE,SAAS,CAAC,OAAO,EAAE,WAAW,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,KAAK,EAAE,qBAAqB,IAAI,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;IACvL,CAAC;IAED,aAAa,CAAC,UAAqC,EAAE,eAAgC;QACpF,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC;QACnE,OAAO,IAAI,CAAC,sBAAsB,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;IACjE,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,CAAa;QAC5B,MAAM,SAAS,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QAC5G,IAAI,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC;YACvB,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;QAClC,CAAC;QAED,IAAI,SAAS,CAAC,KAAK,CAAC,mBAAmB,IAAI,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC7F,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;gBACtD,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAA4B,EAAE,IAAqB,CAAC;gBACxE,IAAI,EAAE,QAAQ,CAAC,IAAI;gBACnB,OAAO,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmC,EAAE,IAAoD,EAAE,SAAS,CAAC,WAAW,CAAC;gBACvI,aAAa,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAA0B,CAAC;aAC/E,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,EAAE,CAAC;gBAChB,MAAM,IAAI,iBAAiB,EAAE,CAAC;YAC/B,CAAC;QACF,CAAC;QAED,MAAM,qBAAqB,GAA6B,CAAC,EAAE,SAAS,EAAE,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC;QACzF,KAAK,MAAM,aAAa,IAAI,IAAI,CAAC,sBAAsB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YAChF,IAAI,aAAa,CAAC,KAAK,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC,UAAU,EAAE,aAAa,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;gBAClI,qBAAqB,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,KAAK,EAAE,CAAC,CAAC;YAChE,CAAC;QACF,CAAC;QAED,MAAM,UAAU,GAAsB,EAAE,CAAC;QACzC,IAAI,yBAA+D,CAAC;QACpE,KAAK,MAAM,EAAE,SAAS,EAAE,IAAI,qBAAqB,EAAE,CAAC;YACnD,MAAM,mBAAmB,GAAyC,EAAE,CAAC;YACrE,IAAI,SAAS,CAAC,mBAAmB,IAAI,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACvF,IAAI,CAAC,yBAAyB,EAAE,CAAC;oBAChC,yBAAyB,GAAG,EAAE,CAAC;oBAC/B,MAAM,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAC,OAAO,EAAC,EAAE;wBAClF,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,YAAY,6BAAqB,OAAO,CAAC,kBAAkB,CAAC,CAAC;wBACrH,KAAK,MAAM,KAAK,IAAI,SAAS,EAAE,CAAC;4BAC/B,yBAAyB,EAAE,IAAI,CAAC,CAAC,KAAK,EAAE,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;wBACtE,CAAC;oBACF,CAAC,CAAC,CAAC,CAAC;gBACL,CAAC;gBACD,mBAAmB,CAAC,IAAI,CAAC,GAAG,yBAAyB,CAAC,CAAC;YACxD,CAAC;iBAAM,CAAC;gBACP,KAAK,MAAM,EAAE,KAAK,EAAE,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;oBACpC,IAAI,KAAK,EAAE,CAAC;wBACX,mBAAmB,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC,CAAC;oBAC9C,CAAC;gBACF,CAAC;YACF,CAAC;YACD,KAAK,MAAM,CAAC,KAAK,EAAE,eAAe,CAAC,IAAI,mBAAmB,EAAE,CAAC;gBAC5D,IAAI,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC;oBAC/D,SAAS;gBACV,CAAC;gBACD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,qBAAqB,IAAI,KAAK,CAAC,QAAQ,CAAC,qBAAqB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBAChG,SAAS;gBACV,CAAC;gBACD,IAAI,SAAS,CAAC,QAAQ,CAAC,aAAa,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;oBAC/F,SAAS;gBACV,CAAC;gBACD,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,aAAa,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC;oBAC7G,SAAS;gBACV,CAAC;gBACD,IAAI,KAAK,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,iBAAiB,CAAC,SAAS,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC;oBAC5G,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACvB,qBAAqB,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,eAAe,EAAE,EAAE,CAAC,CAAC;gBAChF,CAAC;YACF,CAAC;QACF,CAAC;QAED,IAAI,UAAU,CAAC,MAAM,EAAE,CAAC;YACvB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;gBAClD,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAqB,EAAE,IAAqC,CAAC;gBACjF,IAAI,EAAE,QAAQ,CAAC,OAAO;gBACtB,OAAO,EAAE,IAAI,CAAC,uDAAuD,CAAC,SAAS,EAAE,UAAU,CAAC;gBAC5F,OAAO,EAAE,CAAC;wBACT,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAc,EAAE,IAAe,CAAC;wBACpD,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI;qBACf,CAAC;gBACF,YAAY,EAAE;oBACb,GAAG,EAAE,GAAG,EAAE,CAAC,KAAK;iBAChB;aACD,CAAC,CAAC;YACH,IAAI,CAAC,MAAM,EAAE,CAAC;gBACb,MAAM,IAAI,iBAAiB,EAAE,CAAC;YAC/B,CAAC;QACF,CAAC;QAED,OAAO,IAAI,CAAC,YAAY,CAAC;YACxB,QAAQ,qCAA6B;YACrC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAuB,EAAE,IAA2B,CAAC;YACzE,MAAM,EAAE,GAAG,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE;SACpC,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAC5G,CAAC;IAEO,sBAAsB,CAAC,SAAqB,EAAE,SAAuB,EAAE,UAAwB,EAAE;QACxG,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;YAC9E,OAAO,EAAE,CAAC;QACX,CAAC;QACD,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACxB,MAAM,cAAc,GAAG,SAAS,CAAC,aAAa,IAAI,EAAE,CAAC;QACrD,IAAI,cAAc,CAAC,MAAM,EAAE,CAAC;YAC3B,MAAM,gBAAgB,GAAiB,EAAE,CAAC;YAC1C,KAAK,MAAM,CAAC,IAAI,SAAS,EAAE,CAAC;gBAC3B,IAAI,CAAC,CAAC,CAAC,SAAS,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC;oBACxF,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBAC1B,CAAC;YACF,CAAC;YACD,MAAM,sBAAsB,GAAiB,EAAE,CAAC;YAChD,KAAK,MAAM,eAAe,IAAI,gBAAgB,EAAE,CAAC;gBAChD,sBAAsB,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,eAAe,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;YAClG,CAAC;YACD,OAAO,CAAC,GAAG,gBAAgB,EAAE,GAAG,sBAAsB,CAAC,CAAC;QACzD,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAEO,uDAAuD,CAAC,SAAqB,EAAE,UAA6B;QACnH,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,OAAO,GAAG,CAAC,QAAQ,CAAC,IAA+B,EAAE,IAAyH,EAAE,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAC5O,CAAC;QACD,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,OAAO,GAAG,CAAC,QAAQ,CAAC,IAA6B,EAAE,IAAmI,EACrL,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QACjG,CAAC;QACD,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAkC,EAAE,IAA0I,EACjM,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;IACjG,CAAC;IAED,wBAAwB,CAAC,SAAqB;QAC7C,OAAO,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,KAAK,CAAC;YACzE,CAAC,CAAC,IAAI,CAAC,+BAA+B,CAAC,uBAAuB,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IAC1F,CAAC;IAED,KAAK,CAAC,gBAAgB,CAAC,SAAqB;QAC3C,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;YACtB,OAAO;QACR,CAAC;QACD,IAAI,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,mBAAmB,EAAE,CAAC;YAC5D,MAAM,IAAI,CAAC,0BAA0B,CAAC,cAAc,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,CAAC;YAC7G,OAAO;QACR,CAAC;QACD,MAAM,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,wBAAwB,EAAE,CAAC,SAAS,CAAC,UAAU,EAAE,UAAU,EAAE,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,CAAC;IACvH,CAAC;IAED,KAAK,CAAC,4BAA4B,CAAC,SAAqB;QACvD,MAAM,mCAAmC,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,sBAAsB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAC/G,6CAA6C;QAC7C,KAAK,MAAM,CAAC,IAAI,mCAAmC,EAAE,CAAC;YACrD,MAAM,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;YACnD,IAAI,CAAC,CAAC,KAAK,IAAI,SAAS,IAAI,CAAC,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;gBACrD,MAAM,IAAI,CAAC,0BAA0B,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC;YAC3F,CAAC;iBAAM,CAAC;gBACP,MAAM,IAAI,CAAC,+BAA+B,CAAC,uBAAuB,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE,CAAC,SAAS,CAAC,CAAC;YACjG,CAAC;QACF,CAAC;QACD,MAAM,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC;IAC9E,CAAC;IAED,KAAK,CAAC,iCAAiC,CAAC,SAAqB;QAC5D,MAAM,mCAAmC,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,sBAAsB,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAC/G,MAAM,mBAAmB,GAAG,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAC1D,MAAM,OAAO,CAAC,UAAU,CAAC,mCAAmC,CAAC,GAAG,CAAC,KAAK,EAAC,CAAC,EAAC,EAAE;YAC1E,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,4BAA4B,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC;gBAC/E,OAAO;YACR,CAAC;YACD,MAAM,mBAAmB,GAAG,CAAC,CAAC,KAAK,CAAC,mBAAmB,CAAC;YACxD,MAAM,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,GAAG,CAAC,KAAK,EAAC,eAAe,EAAC,EAAE;gBACjE,MAAM,KAAK,GAAG,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC;gBAC5G,IAAI,KAAK,IAAI,KAAK,CAAC,mBAAmB,KAAK,mBAAmB,EAAE,CAAC;oBAChE,MAAM,IAAI,CAAC,0BAA0B,CAAC,sBAAsB,CAAC,KAAK,EAAE,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;gBACpI,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,sBAAsB;QAC7B,MAAM,UAAU,GAAiB,EAAE,CAAC;QACpC,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACvC,CAAC;QACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACxC,CAAC;QACD,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrC,CAAC;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,0BAA0B,CAAC,SAA0B;QAC5D,IAAI,SAAS,CAAC,eAAe,EAAE,CAAC;YAC/B,OAAO,KAAK,CAAC;QACd,CAAC;QACD,IAAI,IAAI,CAAC,+BAA+B,CAAC,wBAAwB,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC;YAC5F,OAAO,IAAI,CAAC;QACb,CAAC;QACD,OAAO,CAAC,IAAI,CAAC,+BAA+B,CAAC,uBAAuB,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;IAC/F,CAAC;IAEO,SAAS,CAAC,SAAiC,EAAE,WAA2C,EAAE,gBAA4C;QAC7I,MAAM,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAA4B,EAAE,IAA+B,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAyB,CAAC,CAAC;QAC/L,OAAO,IAAI,CAAC,YAAY,CAAC;YACxB,QAAQ,EAAE,gBAAgB,uCAA+B;YACzD,KAAK;SACL,EAAE,KAAK,IAAI,EAAE;YACb,IAAI,CAAC;gBACJ,IAAI,SAAS,EAAE,CAAC;oBACf,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAChC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAChC,CAAC;gBACD,MAAM,KAAK,GAAG,MAAM,WAAW,EAAE,CAAC;gBAClC,OAAO,MAAM,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAClE,CAAC;oBAAS,CAAC;gBACV,IAAI,SAAS,EAAE,CAAC;oBACf,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,SAAS,CAAC,CAAC;oBAC/D,6FAA6F;oBAC7F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAChC,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,eAAe,CAAC,IAAS,EAAE,cAA8B;QACtE,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,0BAA0B,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzE,MAAM,iBAAiB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,qBAAqB,CAAC,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1J,IAAI,iBAAiB,EAAE,CAAC;YACvB,cAAc,GAAG,cAAc,IAAI,EAAE,CAAC;YACtC,IAAI,iBAAiB,CAAC,aAAa,KAAK,QAAQ,CAAC,OAAO,EAAE,CAAC;gBAC1D,cAAc,CAAC,MAAM,GAAG,cAAc,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAC1I,CAAC;iBAAM,CAAC;gBACP,cAAc,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAC3C,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC,0BAA0B,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,EAAE,cAAc,CAAC,CAAC;IACpF,CAAC;IAEO,kBAAkB,CAAC,SAAqB,EAAE,OAA0B,EAAE,cAAuC,EAAE,OAAiD;QACvK,cAAc,GAAG,cAAc,IAAI,EAAE,CAAC;QACtC,cAAc,CAAC,MAAM,GAAG,cAAc,CAAC,MAAM,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,IAAI,CAAC,IAAI,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC,CAAC;QACzH,IAAI,SAAS,CAAC,KAAK,IAAI,CAAC,OAAO,EAAE,CAAC;YACjC,cAAc,CAAC,cAAc,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzD,cAAc,CAAC,SAAS,kCAA0B,CAAC;YACnD,OAAO,IAAI,CAAC,0BAA0B,CAAC,iBAAiB,CAAC,OAAO,EAAE,SAAS,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;QACpG,CAAC;aAAM,CAAC;YACP,OAAO,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,OAAO,EAAE,cAAc,EAAE,OAAO,CAAC,CAAC;QAC7F,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,4BAA4B,CAAC,UAAgC;QAC1E,IAAI,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;QACnG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YACzB,MAAM,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3I,CAAC;QACD,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,kBAAkB,EAAE,CAAC;YACzB,yBAAyB;YACzB,MAAM,IAAI,KAAK,CAAC,sCAAsC,CAAC,CAAC;QACzD,CAAC;QACD,OAAO,kBAAkB,CAAC;IAC3B,CAAC;IAEO,KAAK,CAAC,2BAA2B,CAAC,SAAqB;QAC9D,IAAI,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;YACnH,OAAO;QACR,CAAC;QACD,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,sBAAsB,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;YACzG,OAAO;QACR,CAAC;QACD,MAAM,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAChC,MAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,GAAG,EAAE;gBACnE,IAAI,CAAC;oBACJ,IAAI,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC,CAAC,UAAU,EAAE,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;wBACnH,UAAU,CAAC,OAAO,EAAE,CAAC;wBACrB,CAAC,EAAE,CAAC;oBACL,CAAC;gBACF,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,sBAAsB,CAAC,UAAwB,EAAE,eAAgC;QACxF,MAAM,MAAM,GAAG,eAAe,6CAAoC,IAAI,eAAe,8CAAqC,CAAC;QAC3H,IAAI,MAAM,EAAE,CAAC;YACZ,MAAM,kCAAkC,GAAG,IAAI,CAAC,wBAAwB,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,EAAE,eAAe,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;YACtJ,OAAO,IAAI,CAAC,qBAAqB,CAAC,UAAU,EAAE,kCAAkC,EAAE,eAAe,CAAC,CAAC;QACpG,CAAC;aAAM,CAAC;YACP,MAAM,gBAAgB,GAAG,IAAI,CAAC,wBAAwB,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,EAAE,eAAe,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;YACrI,IAAI,gBAAgB,CAAC,MAAM,EAAE,CAAC;gBAC7B,OAAO,IAAI,CAAC,qBAAqB,CAAC,UAAU,EAAE,gBAAgB,EAAE,eAAe,CAAC,CAAC;YAClF,CAAC;YACD,OAAO,IAAI,CAAC,qBAAqB,CAAC,UAAU,EAAE,EAAE,EAAE,eAAe,CAAC,CAAC;QACpE,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,qBAAqB,CAAC,UAAwB,EAAE,eAA6B,EAAE,eAAgC;QAC5H,MAAM,aAAa,GAAG,CAAC,GAAG,UAAU,EAAE,GAAG,eAAe,CAAC,CAAC;QAC1D,MAAM,MAAM,GAAG,eAAe,6CAAoC,IAAI,eAAe,8CAAqC,CAAC;QAC3H,IAAI,CAAC,MAAM,EAAE,CAAC;YACb,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE,CAAC;gBACpC,MAAM,UAAU,GAAG,IAAI,CAAC,6BAA6B,CAAC,SAAS,EAAE,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC5F,IAAI,UAAU,CAAC,MAAM,EAAE,CAAC;oBACvB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;wBAClD,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAmB,EAAE,IAAmC,CAAC;wBAC7E,IAAI,EAAE,QAAQ,CAAC,OAAO;wBACtB,OAAO,EAAE,IAAI,CAAC,uCAAuC,CAAC,SAAS,EAAE,aAAa,EAAE,UAAU,CAAC;wBAC3F,OAAO,EAAE,CAAC;gCACT,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAa,EAAE,IAAa,CAAC;gCACjD,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI;6BACf,CAAC;wBACF,YAAY,EAAE;4BACb,GAAG,EAAE,GAAG,EAAE,CAAC,KAAK;yBAChB;qBACD,CAAC,CAAC;oBACH,IAAI,CAAC,MAAM,EAAE,CAAC;wBACb,MAAM,IAAI,iBAAiB,EAAE,CAAC;oBAC/B,CAAC;oBACD,MAAM,IAAI,CAAC,qBAAqB,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,EAAE,eAAe,CAAC,CAAC;gBAC5E,CAAC;YACF,CAAC;QACF,CAAC;QACD,OAAO,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;IAC7D,CAAC;IAEO,wBAAwB,CAAC,UAAwB,EAAE,SAAuB,EAAE,eAAgC,EAAE,OAAiD,EAAE,UAAwB,EAAE;QAClM,MAAM,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAClE,IAAI,OAAO,CAAC,MAAM,EAAE,CAAC;YACpB,KAAK,MAAM,SAAS,IAAI,OAAO,EAAE,CAAC;gBACjC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACzB,CAAC;YACD,MAAM,2BAA2B,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;gBACxD,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;oBAC/B,OAAO,KAAK,CAAC;gBACd,CAAC;gBACD,MAAM,MAAM,GAAG,eAAe,6CAAoC,IAAI,eAAe,8CAAqC,CAAC;gBAC3H,MAAM,kBAAkB,GAAG,CAAC,CAAC,eAAe,6CAAoC,IAAI,CAAC,CAAC,eAAe,8CAAqC,CAAC;gBAC3I,IAAI,MAAM,KAAK,kBAAkB,EAAE,CAAC;oBACnC,OAAO,KAAK,CAAC;gBACd,CAAC;gBACD,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,wFAAwF;uBACpH,CAAC,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,IAAI,CAAC;uBACtC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAC9B,CAAC,OAAO,CAAC,YAAY,IAAI,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;2BACjG,CAAC,OAAO,CAAC,IAAI,IAAI,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAChG,CAAC;YACJ,CAAC,CAAC,CAAC;YACH,IAAI,2BAA2B,CAAC,MAAM,EAAE,CAAC;gBACxC,2BAA2B,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,wBAAwB,CAAC,2BAA2B,EAAE,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;YAC/I,CAAC;YACD,OAAO,2BAA2B,CAAC;QACpC,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAEO,6BAA6B,CAAC,SAAqB,EAAE,mBAAiC,EAAE,SAAuB;QACtH,OAAO,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAC3B,IAAI,CAAC,CAAC,YAAY,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACjC,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,CAAC,KAAK,SAAS,EAAE,CAAC;gBACrB,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,wBAAwB,CAAC,CAAC,CAAC,eAAe,CAAC,EAAE,CAAC;gBAClF,OAAO,KAAK,CAAC;YACd,CAAC;YACD,IAAI,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;gBAC3C,OAAO,KAAK,CAAC;YACd,CAAC;YACD,OAAO,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,SAAS,EAAE,GAAG,mBAAmB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;QAChI,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,uCAAuC,CAAC,SAAqB,EAAE,qBAAmC,EAAE,UAAwB;QACnI,KAAK,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,qBAAqB,CAAC,EAAE,CAAC;YACvD,MAAM,wBAAwB,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC5H,IAAI,wBAAwB,CAAC,MAAM,EAAE,CAAC;gBACrC,OAAO,IAAI,CAAC,oDAAoD,CAAC,CAAC,EAAE,wBAAwB,CAAC,CAAC;YAC/F,CAAC;QACF,CAAC;QACD,OAAO,EAAE,CAAC;IACX,CAAC;IAEO,oDAAoD,CAAC,SAAqB,EAAE,UAAwB;QAC3G,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAqH,EAAE,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QACtN,CAAC;QACD,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAoB,EAAE,IAA+H,EACxK,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QAC/E,CAAC;QACD,OAAO,GAAG,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAsI,EACpL,SAAS,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;IAC/E,CAAC;IAEO,KAAK,CAAC,eAAe,CAAC,UAAwB,EAAE,eAAgC;QACvF,OAAO,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAM,CAAC,EAAE,eAAe,CAAC,CAAC;IAC5G,CAAC;IAMO,8BAA8B;QACrC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,sCAA8B,IAAI,CAAC,CAAC,KAAK,wCAAgC,CAAC,EAAE,CAAC;YAChH,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,EAAE,QAAQ,qCAA6B,EAAE,EAAE,GAAG,EAAE,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,OAAO,CAAC,CAAC,CAAC;YAC9H,CAAC;QACF,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,iBAAiB,EAAE,EAAE,CAAC;YAC3B,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;QACpC,CAAC;IACF,CAAC;IAEO,YAAY,CAAI,OAAyB,EAAE,IAAsB;QACxE,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,OAAO,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,cAAc,GAAG,uBAAuB,CAAC,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;YAC7D,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC1C,IAAI,CAAC;gBACJ,OAAO,MAAM,cAAc,CAAC;YAC7B,CAAC;oBAAS,CAAC;gBACV,MAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;gBAC3D,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;oBAClB,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACvC,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,OAAO,CAAC,GAAQ;QACvB,IAAI,mBAAmB,CAAC,GAAG,CAAC,EAAE,CAAC;YAC9B,OAAO;QACR,CAAC;QAED,MAAM,OAAO,GAAG,GAAG,IAAI,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC;QAEzC,IAAI,8EAA8E,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;YAClG,OAAO;QACR,CAAC;QAED,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACrC,CAAC;IAED,SAAS,CAAC,GAAQ,EAAE,OAAyB;QAC5C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC;YAClC,OAAO,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC;QAED,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;QAC7B,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAEO,kBAAkB,CAAC,GAAQ;QAClC,MAAM,KAAK,GAAG,sBAAsB,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAEpD,IAAI,CAAC,KAAK,EAAE,CAAC;YACZ,OAAO;QACR,CAAC;QAED,MAAM,WAAW,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QAE7B,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,KAAK,EAAC,KAAK,EAAC,EAAE;YACpC,IAAI,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,iBAAiB,CAAC,KAAK,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC;YAC9F,IAAI,CAAC,SAAS,EAAE,CAAC;gBAChB,CAAC,SAAS,CAAC,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC1G,CAAC;YACD,IAAI,SAAS,EAAE,CAAC;gBACf,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;gBACzC,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC5B,CAAC;QACF,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IAClD,CAAC;IAEO,yBAAyB;QAChC,OAAO,IAAI,CAAC,8BAA8B,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,0BAA0B,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;IACjG,CAAC;IAED,8BAA8B;QAC7B,IAAI,CAAC;YACJ,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;YACtE,IAAI,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC;gBAChC,OAAO,WAAW,CAAC;YACpB,CAAC;QACF,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;QAC5B,OAAO,EAAE,CAAC;IACX,CAAC;IAEO,8BAA8B,CAAC,2BAAqC;QAC3E,IAAI,CAAC,gCAAgC,GAAG,IAAI,CAAC,SAAS,CAAC,2BAA2B,CAAC,CAAC;IACrF,CAAC;IAGD,IAAY,gCAAgC;QAC3C,IAAI,CAAC,IAAI,CAAC,iCAAiC,EAAE,CAAC;YAC7C,IAAI,CAAC,iCAAiC,GAAG,IAAI,CAAC,mCAAmC,EAAE,CAAC;QACrF,CAAC;QAED,OAAO,IAAI,CAAC,iCAAiC,CAAC;IAC/C,CAAC;IAED,IAAY,gCAAgC,CAAC,gCAAwC;QACpF,IAAI,IAAI,CAAC,gCAAgC,KAAK,gCAAgC,EAAE,CAAC;YAChF,IAAI,CAAC,iCAAiC,GAAG,gCAAgC,CAAC;YAC1E,IAAI,CAAC,mCAAmC,CAAC,gCAAgC,CAAC,CAAC;QAC5E,CAAC;IACF,CAAC;IAEO,mCAAmC;QAC1C,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,0BAA0B,qCAA4B,IAAI,CAAC,CAAC;IAC5F,CAAC;IAEO,mCAAmC,CAAC,KAAa;QACxD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,0BAA0B,EAAE,KAAK,gEAA+C,CAAC;IAC5G,CAAC;IAED,+BAA+B;QAC9B,IAAI,CAAC;YACJ,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;YACvE,IAAI,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC;gBAChC,OAAO,WAAW,CAAC;YACpB,CAAC;QACF,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;QAC5B,OAAO,EAAE,CAAC;IACX,CAAC;IAEO,+BAA+B,CAAC,4BAAsC;QAC7E,IAAI,CAAC,iCAAiC,GAAG,IAAI,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC;IACvF,CAAC;IAGD,IAAY,iCAAiC;QAC5C,IAAI,CAAC,IAAI,CAAC,kCAAkC,EAAE,CAAC;YAC9C,IAAI,CAAC,kCAAkC,GAAG,IAAI,CAAC,oCAAoC,EAAE,CAAC;QACvF,CAAC;QAED,OAAO,IAAI,CAAC,kCAAkC,CAAC;IAChD,CAAC;IAED,IAAY,iCAAiC,CAAC,iCAAyC;QACtF,IAAI,IAAI,CAAC,iCAAiC,KAAK,iCAAiC,EAAE,CAAC;YAClF,IAAI,CAAC,kCAAkC,GAAG,iCAAiC,CAAC;YAC5E,IAAI,CAAC,oCAAoC,CAAC,iCAAiC,CAAC,CAAC;QAC9E,CAAC;IACF,CAAC;IAEO,oCAAoC;QAC3C,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,gCAAgC,qCAA4B,IAAI,CAAC,CAAC;IAClG,CAAC;IAEO,oCAAoC,CAAC,KAAa;QACzD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,gEAA+C,CAAC;IAClH,CAAC;IAEO,yBAAyB;QAChC,IAAI,CAAC;YACJ,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;YACjE,IAAI,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE,CAAC;gBAChC,OAAO,WAAW,CAAC;YACpB,CAAC;QACF,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC;QAC5B,OAAO,EAAE,CAAC;IACX,CAAC;IAEO,yBAAyB,CAAC,sBAAgC;QACjE,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;IAC3E,CAAC;IAGD,IAAY,2BAA2B;QACtC,IAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE,CAAC;YACxC,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;QAC3E,CAAC;QAED,OAAO,IAAI,CAAC,4BAA4B,CAAC;IAC1C,CAAC;IAED,IAAY,2BAA2B,CAAC,2BAAmC;QAC1E,IAAI,IAAI,CAAC,2BAA2B,KAAK,2BAA2B,EAAE,CAAC;YACtE,IAAI,CAAC,4BAA4B,GAAG,2BAA2B,CAAC;YAChE,IAAI,CAAC,8BAA8B,CAAC,2BAA2B,CAAC,CAAC;QAClE,CAAC;IACF,CAAC;IAEO,8BAA8B;QACrC,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,sCAAsC,gCAAwB,IAAI,CAAC,CAAC;IACpG,CAAC;IAEO,8BAA8B,CAAC,KAAa;QACnD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,2DAA2C,CAAC;IACpH,CAAC;;AA1uEW,0BAA0B;IA+BpC,WAAA,qBAAqB,CAAA;IACrB,WAAA,cAAc,CAAA;IACd,WAAA,oCAAoC,CAAA;IACpC,WAAA,wBAAwB,CAAA;IACxB,WAAA,gCAAgC,CAAA;IAChC,WAAA,qBAAqB,CAAA;IACrB,WAAA,iBAAiB,CAAA;IACjB,WAAA,oBAAoB,CAAA;IACpB,WAAA,WAAW,CAAA;IACX,WAAA,oCAAoC,CAAA;IACpC,YAAA,YAAY,CAAA;IACZ,YAAA,gBAAgB,CAAA;IAChB,YAAA,iCAAiC,CAAA;IACjC,YAAA,gBAAgB,CAAA;IAChB,YAAA,mCAAmC,CAAA;IACnC,YAAA,wBAAwB,CAAA;IACxB,YAAA,eAAe,CAAA;IACf,YAAA,kBAAkB,CAAA;IAClB,YAAA,mCAAmC,CAAA;IACnC,YAAA,WAAW,CAAA;IACX,YAAA,iBAAiB,CAAA;IACjB,YAAA,cAAc,CAAA;IACd,YAAA,iBAAiB,CAAA;IACjB,YAAA,YAAY,CAAA;IACZ,YAAA,uBAAuB,CAAA;IACvB,YAAA,wBAAwB,CAAA;IACxB,YAAA,eAAe,CAAA;IACf,YAAA,cAAc,CAAA;IACd,YAAA,8BAA8B,CAAA;IAC9B,YAAA,cAAc,CAAA;IACd,YAAA,mBAAmB,CAAA;IACnB,YAAA,wBAAwB,CAAA;IACxB,YAAA,aAAa,CAAA;IACb,YAAA,kBAAkB,CAAA;IAClB,YAAA,kBAAkB,CAAA;IAClB,YAAA,yBAAyB,CAAA;GAlEf,0BAA0B,CA4uEtC","file":"extensionsWorkbenchService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as semver from '../../../../base/common/semver/semver.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { index } from '../../../../base/common/arrays.js';\nimport { CancelablePromise, Promises, ThrottledDelayer, createCancelablePromise } from '../../../../base/common/async.js';\nimport { CancellationError, getErrorMessage, isCancellationError } from '../../../../base/common/errors.js';\nimport { Disposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IPager, singlePagePager } from '../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport {\n\tIExtensionGalleryService, ILocalExtension, IGalleryExtension, IQueryOptions,\n\tInstallExtensionEvent, DidUninstallExtensionEvent, InstallOperation, WEB_EXTENSION_TAG, InstallExtensionResult,\n\tIExtensionsControlManifest, IExtensionInfo, IExtensionQueryOptions, IDeprecationInfo, isTargetPlatformCompatible, InstallExtensionInfo, EXTENSION_IDENTIFIER_REGEX,\n\tInstallOptions, IProductVersion,\n\tUninstallExtensionInfo,\n\tTargetPlatformToString,\n\tIAllowedExtensionsService,\n\tAllowedExtensionsConfigKey,\n\tEXTENSION_INSTALL_SKIP_PUBLISHER_TRUST_CONTEXT,\n\tExtensionManagementError,\n\tExtensionManagementErrorCode,\n\tMaliciousExtensionInfo,\n\tshouldRequireRepositorySignatureFor,\n\tIGalleryExtensionVersion\n} from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, IWorkbenchExtensionManagementService, IResourceExtension } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { getGalleryExtensionTelemetryData, getLocalExtensionTelemetryData, areSameExtensions, groupByExtension, getGalleryExtensionId, findMatchingMaliciousEntry } from '../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IExtension, ExtensionState, IExtensionsWorkbenchService, AutoUpdateConfigurationKey, AutoCheckUpdatesConfigurationKey, HasOutdatedExtensionsContext, AutoUpdateConfigurationValue, InstallExtensionOptions, ExtensionRuntimeState, ExtensionRuntimeActionType, AutoRestartConfigurationKey, VIEWLET_ID, IExtensionsViewPaneContainer, IExtensionsNotification } from '../common/extensions.js';\nimport { IEditorService, SIDE_GROUP, ACTIVE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IURLService, IURLHandler, IOpenURLOptions } from '../../../../platform/url/common/url.js';\nimport { ExtensionsInput, IExtensionEditorOptions } from '../common/extensionsInput.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IProgressOptions, IProgressService, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { INotificationService, NotificationPriority, Severity } from '../../../../platform/notification/common/notification.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IExtensionManifest, ExtensionType, IExtension as IPlatformExtension, TargetPlatform, ExtensionIdentifier, IExtensionIdentifier, IExtensionDescription, isApplicationScopedExtension } from '../../../../platform/extensions/common/extensions.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { FileAccess } from '../../../../base/common/network.js';\nimport { IIgnoredExtensionsManagementService } from '../../../../platform/userDataSync/common/ignoredExtensions.js';\nimport { IUserDataAutoSyncService, IUserDataSyncEnablementService, SyncResource } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { isBoolean, isDefined, isString, isUndefined } from '../../../../base/common/types.js';\nimport { IExtensionManifestPropertiesService } from '../../../services/extensions/common/extensionManifestPropertiesService.js';\nimport { IExtensionService, IExtensionsStatus as IExtensionRuntimeStatus, toExtension, toExtensionDescription } from '../../../services/extensions/common/extensions.js';\nimport { isWeb, language } from '../../../../base/common/platform.js';\nimport { getLocale } from '../../../../platform/languagePacks/common/languagePacks.js';\nimport { ILocaleService } from '../../../services/localization/common/locale.js';\nimport { TelemetryTrustedValue } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { ILifecycleService, LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IUserDataProfileService } from '../../../services/userDataProfile/common/userDataProfile.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { IDialogService, IFileDialogService, IPromptButton } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IUpdateService, StateType } from '../../../../platform/update/common/update.js';\nimport { areApiProposalsCompatible, isEngineValid } from '../../../../platform/extensions/common/extensionValidator.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { ShowCurrentReleaseNotesActionId } from '../../update/common/update.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { ExtensionGalleryResourceType, getExtensionGalleryManifestResourceUri, IExtensionGalleryManifestService } from '../../../../platform/extensionManagement/common/extensionGalleryManifest.js';\nimport { fromNow } from '../../../../base/common/date.js';\nimport { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\n\ninterface IExtensionStateProvider<T> {\n\t(extension: Extension): T;\n}\n\ninterface InstalledExtensionsEvent {\n\treadonly extensionIds: TelemetryTrustedValue<string>;\n\treadonly count: number;\n}\ntype ExtensionsLoadClassification = {\n\towner: 'digitarald';\n\tcomment: 'Helps to understand which extensions are the most actively used.';\n\treadonly extensionIds: { classification: 'PublicNonPersonalData'; purpose: 'FeatureInsight'; comment: 'The list of extension ids that are installed.' };\n\treadonly count: { classification: 'PublicNonPersonalData'; purpose: 'FeatureInsight'; comment: 'The number of extensions that are installed.' };\n};\n\nexport class Extension implements IExtension {\n\n\tpublic enablementState: EnablementState = EnablementState.EnabledGlobally;\n\n\tprivate galleryResourcesCache = new Map<string, any>();\n\n\tprivate _missingFromGallery: boolean | undefined;\n\n\tconstructor(\n\t\tprivate stateProvider: IExtensionStateProvider<ExtensionState>,\n\t\tprivate runtimeStateProvider: IExtensionStateProvider<ExtensionRuntimeState | undefined>,\n\t\tpublic readonly server: IExtensionManagementServer | undefined,\n\t\tpublic local: ILocalExtension | undefined,\n\t\tprivate _gallery: IGalleryExtension | undefined,\n\t\tprivate readonly resourceExtensionInfo: { resourceExtension: IResourceExtension; isWorkspaceScoped: boolean } | undefined,\n\t\t@IExtensionGalleryService private readonly galleryService: IExtensionGalleryService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IProductService private readonly productService: IProductService\n\t) {\n\t}\n\n\tget resourceExtension(): IResourceExtension | undefined {\n\t\tif (this.resourceExtensionInfo) {\n\t\t\treturn this.resourceExtensionInfo.resourceExtension;\n\t\t}\n\t\tif (this.local?.isWorkspaceScoped) {\n\t\t\treturn {\n\t\t\t\ttype: 'resource',\n\t\t\t\tidentifier: this.local.identifier,\n\t\t\t\tlocation: this.local.location,\n\t\t\t\tmanifest: this.local.manifest,\n\t\t\t\tchangelogUri: this.local.changelogUrl,\n\t\t\t\treadmeUri: this.local.readmeUrl,\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tget gallery(): IGalleryExtension | undefined {\n\t\treturn this._gallery;\n\t}\n\n\tset gallery(gallery: IGalleryExtension | undefined) {\n\t\tthis._gallery = gallery;\n\t\tthis.galleryResourcesCache.clear();\n\t}\n\n\tget missingFromGallery(): boolean {\n\t\treturn !!this._missingFromGallery;\n\t}\n\n\tset missingFromGallery(missing: boolean) {\n\t\tthis._missingFromGallery = missing;\n\t}\n\n\tget type(): ExtensionType {\n\t\treturn this.local ? this.local.type : ExtensionType.User;\n\t}\n\n\tget isBuiltin(): boolean {\n\t\treturn this.local ? this.local.isBuiltin : false;\n\t}\n\n\tget isWorkspaceScoped(): boolean {\n\t\tif (this.local) {\n\t\t\treturn this.local.isWorkspaceScoped;\n\t\t}\n\t\tif (this.resourceExtensionInfo) {\n\t\t\treturn this.resourceExtensionInfo.isWorkspaceScoped;\n\t\t}\n\t\treturn false;\n\t}\n\n\tget name(): string {\n\t\tif (this.gallery) {\n\t\t\treturn this.gallery.name;\n\t\t}\n\t\treturn this.getManifestFromLocalOrResource()?.name ?? '';\n\t}\n\n\tget displayName(): string {\n\t\tif (this.gallery) {\n\t\t\treturn this.gallery.displayName || this.gallery.name;\n\t\t}\n\n\t\treturn this.getManifestFromLocalOrResource()?.displayName ?? this.name;\n\t}\n\n\tget identifier(): IExtensionIdentifier {\n\t\tif (this.gallery) {\n\t\t\treturn this.gallery.identifier;\n\t\t}\n\t\tif (this.resourceExtension) {\n\t\t\treturn this.resourceExtension.identifier;\n\t\t}\n\t\treturn this.local?.identifier ?? { id: '' };\n\t}\n\n\tget uuid(): string | undefined {\n\t\treturn this.gallery ? this.gallery.identifier.uuid : this.local?.identifier.uuid;\n\t}\n\n\tget publisher(): string {\n\t\tif (this.gallery) {\n\t\t\treturn this.gallery.publisher;\n\t\t}\n\t\treturn this.getManifestFromLocalOrResource()?.publisher ?? '';\n\t}\n\n\tget publisherDisplayName(): string {\n\t\tif (this.gallery) {\n\t\t\treturn this.gallery.publisherDisplayName || this.gallery.publisher;\n\t\t}\n\n\t\tif (this.local?.publisherDisplayName) {\n\t\t\treturn this.local.publisherDisplayName;\n\t\t}\n\n\t\treturn this.publisher;\n\t}\n\n\tget publisherUrl(): URI | undefined {\n\t\treturn this.gallery?.publisherLink ? URI.parse(this.gallery.publisherLink) : undefined;\n\t}\n\n\tget publisherDomain(): { link: string; verified: boolean } | undefined {\n\t\treturn this.gallery?.publisherDomain;\n\t}\n\n\tget publisherSponsorLink(): URI | undefined {\n\t\treturn this.gallery?.publisherSponsorLink ? URI.parse(this.gallery.publisherSponsorLink) : undefined;\n\t}\n\n\tget version(): string {\n\t\treturn this.local ? this.local.manifest.version : this.latestVersion;\n\t}\n\n\tget private(): boolean {\n\t\treturn this.gallery ? this.gallery.private : this.local ? this.local.private : false;\n\t}\n\n\tget pinned(): boolean {\n\t\treturn !!this.local?.pinned;\n\t}\n\n\tget latestVersion(): string {\n\t\treturn this.gallery ? this.gallery.version : this.getManifestFromLocalOrResource()?.version ?? '';\n\t}\n\n\tget description(): string {\n\t\treturn this.gallery ? this.gallery.description : this.getManifestFromLocalOrResource()?.description ?? '';\n\t}\n\n\tget url(): string | undefined {\n\t\treturn this.gallery?.detailsLink;\n\t}\n\n\tget iconUrl(): string | undefined {\n\t\treturn this.galleryIconUrl || this.resourceExtensionIconUrl || this.localIconUrl || this.defaultIconUrl;\n\t}\n\n\tget iconUrlFallback(): string | undefined {\n\t\treturn this.gallery?.assets.icon?.fallbackUri;\n\t}\n\n\tprivate get localIconUrl(): string | undefined {\n\t\tif (this.local && this.local.manifest.icon) {\n\t\t\treturn FileAccess.uriToBrowserUri(resources.joinPath(this.local.location, this.local.manifest.icon)).toString(true);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate get resourceExtensionIconUrl(): string | undefined {\n\t\tif (this.resourceExtension?.manifest.icon) {\n\t\t\treturn FileAccess.uriToBrowserUri(resources.joinPath(this.resourceExtension.location, this.resourceExtension.manifest.icon)).toString(true);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate get galleryIconUrl(): string | undefined {\n\t\treturn this.gallery?.assets.icon?.uri;\n\t}\n\n\tprivate get defaultIconUrl(): string | undefined {\n\t\tif (this.type === ExtensionType.System && this.local) {\n\t\t\tif (this.local.manifest && this.local.manifest.contributes) {\n\t\t\t\tif (Array.isArray(this.local.manifest.contributes.themes) && this.local.manifest.contributes.themes.length) {\n\t\t\t\t\treturn FileAccess.asBrowserUri('vs/workbench/contrib/extensions/browser/media/theme-icon.png').toString(true);\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(this.local.manifest.contributes.grammars) && this.local.manifest.contributes.grammars.length) {\n\t\t\t\t\treturn FileAccess.asBrowserUri('vs/workbench/contrib/extensions/browser/media/language-icon.svg').toString(true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tget repository(): string | undefined {\n\t\treturn this.gallery && this.gallery.assets.repository ? this.gallery.assets.repository.uri : undefined;\n\t}\n\n\tget licenseUrl(): string | undefined {\n\t\treturn this.gallery && this.gallery.assets.license ? this.gallery.assets.license.uri : undefined;\n\t}\n\n\tget supportUrl(): string | undefined {\n\t\treturn this.gallery && this.gallery.supportLink ? this.gallery.supportLink : undefined;\n\t}\n\n\tget state(): ExtensionState {\n\t\treturn this.stateProvider(this);\n\t}\n\n\tprivate malicious: MaliciousExtensionInfo | undefined;\n\tpublic get isMalicious(): boolean | undefined {\n\t\treturn !!this.malicious || this.enablementState === EnablementState.DisabledByMalicious;\n\t}\n\n\tpublic get maliciousInfoLink(): string | undefined {\n\t\treturn this.malicious?.learnMoreLink;\n\t}\n\n\tpublic deprecationInfo: IDeprecationInfo | undefined;\n\n\tget installCount(): number | undefined {\n\t\treturn this.gallery ? this.gallery.installCount : undefined;\n\t}\n\n\tget rating(): number | undefined {\n\t\treturn this.gallery ? this.gallery.rating : undefined;\n\t}\n\n\tget ratingCount(): number | undefined {\n\t\treturn this.gallery ? this.gallery.ratingCount : undefined;\n\t}\n\n\tget ratingUrl(): string | undefined {\n\t\treturn this.gallery?.ratingLink;\n\t}\n\n\tget outdated(): boolean {\n\t\ttry {\n\t\t\tif (!this.gallery || !this.local) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Do not allow updating system extensions in stable\n\t\t\tif (this.type === ExtensionType.System && this.productService.quality === 'stable') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!this.local.preRelease && this.gallery.properties.isPreReleaseVersion) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (semver.gt(this.latestVersion, this.version)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (this.outdatedTargetPlatform) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t/* Ignore */\n\t\t}\n\t\treturn false;\n\t}\n\n\tget outdatedTargetPlatform(): boolean {\n\t\treturn !!this.local && !!this.gallery\n\t\t\t&& ![TargetPlatform.UNDEFINED, TargetPlatform.WEB].includes(this.local.targetPlatform)\n\t\t\t&& this.gallery.properties.targetPlatform !== TargetPlatform.WEB\n\t\t\t&& this.local.targetPlatform !== this.gallery.properties.targetPlatform\n\t\t\t&& semver.eq(this.latestVersion, this.version);\n\t}\n\n\tget runtimeState(): ExtensionRuntimeState | undefined {\n\t\treturn this.runtimeStateProvider(this);\n\t}\n\n\tget telemetryData(): any {\n\t\tconst { local, gallery } = this;\n\n\t\tif (gallery) {\n\t\t\treturn getGalleryExtensionTelemetryData(gallery);\n\t\t} else if (local) {\n\t\t\treturn getLocalExtensionTelemetryData(local);\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t}\n\n\tget preview(): boolean {\n\t\treturn this.local?.manifest.preview ?? this.gallery?.preview ?? false;\n\t}\n\n\tget preRelease(): boolean {\n\t\treturn !!this.local?.preRelease;\n\t}\n\n\tget isPreReleaseVersion(): boolean {\n\t\tif (this.local) {\n\t\t\treturn this.local.isPreReleaseVersion;\n\t\t}\n\t\treturn !!this.gallery?.properties.isPreReleaseVersion;\n\t}\n\n\tget hasPreReleaseVersion(): boolean {\n\t\treturn this.gallery ? this.gallery.hasPreReleaseVersion : !!this.local?.hasPreReleaseVersion;\n\t}\n\n\tget hasReleaseVersion(): boolean {\n\t\treturn !!this.resourceExtension || !!this.gallery?.hasReleaseVersion;\n\t}\n\n\tprivate getLocal(): ILocalExtension | undefined {\n\t\treturn this.local && !this.outdated ? this.local : undefined;\n\t}\n\n\tasync getManifest(token: CancellationToken): Promise<IExtensionManifest | null> {\n\t\tconst local = this.getLocal();\n\t\tif (local) {\n\t\t\treturn local.manifest;\n\t\t}\n\n\t\tif (this.gallery) {\n\t\t\treturn this.getGalleryManifest(token);\n\t\t}\n\n\t\tif (this.resourceExtension) {\n\t\t\treturn this.resourceExtension.manifest;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tasync getGalleryManifest(token: CancellationToken = CancellationToken.None): Promise<IExtensionManifest | null> {\n\t\tif (this.gallery) {\n\t\t\tlet cache = this.galleryResourcesCache.get('manifest');\n\t\t\tif (!cache) {\n\t\t\t\tif (this.gallery.assets.manifest) {\n\t\t\t\t\tthis.galleryResourcesCache.set('manifest', cache = this.galleryService.getManifest(this.gallery, token)\n\t\t\t\t\t\t.catch(e => {\n\t\t\t\t\t\t\tthis.galleryResourcesCache.delete('manifest');\n\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t}));\n\t\t\t\t} else {\n\t\t\t\t\tthis.logService.error(nls.localize('Manifest is not found', \"Manifest is not found\"), this.identifier.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cache;\n\t\t}\n\t\treturn null;\n\t}\n\n\thasReadme(): boolean {\n\t\tif (this.local && this.local.readmeUrl) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.gallery && this.gallery.assets.readme) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.resourceExtension?.readmeUri) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.type === ExtensionType.System;\n\t}\n\n\tasync getReadme(token: CancellationToken): Promise<string> {\n\t\tconst local = this.getLocal();\n\t\tif (local?.readmeUrl) {\n\t\t\tconst content = await this.fileService.readFile(local.readmeUrl);\n\t\t\treturn content.value.toString();\n\t\t}\n\n\t\tif (this.gallery) {\n\t\t\tif (this.gallery.assets.readme) {\n\t\t\t\treturn this.galleryService.getReadme(this.gallery, token);\n\t\t\t}\n\t\t\tthis.telemetryService.publicLog('extensions:NotFoundReadMe', this.telemetryData);\n\t\t}\n\n\t\tif (this.type === ExtensionType.System) {\n\t\t\treturn Promise.resolve(`# ${this.displayName || this.name}\n**Notice:** This extension is bundled with Visual Studio Code. It can be disabled but not uninstalled.\n## Features\n${this.description}\n`);\n\t\t}\n\n\t\tif (this.resourceExtension?.readmeUri) {\n\t\t\tconst content = await this.fileService.readFile(this.resourceExtension?.readmeUri);\n\t\t\treturn content.value.toString();\n\t\t}\n\n\t\treturn Promise.reject(new Error('not available'));\n\t}\n\n\thasChangelog(): boolean {\n\t\tif (this.local && this.local.changelogUrl) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.gallery && this.gallery.assets.changelog) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.type === ExtensionType.System;\n\t}\n\n\tasync getChangelog(token: CancellationToken): Promise<string> {\n\t\tconst local = this.getLocal();\n\t\tif (local?.changelogUrl) {\n\t\t\tconst content = await this.fileService.readFile(local.changelogUrl);\n\t\t\treturn content.value.toString();\n\t\t}\n\n\t\tif (this.gallery?.assets.changelog) {\n\t\t\treturn this.galleryService.getChangelog(this.gallery, token);\n\t\t}\n\n\t\tif (this.type === ExtensionType.System) {\n\t\t\treturn Promise.resolve(`Please check the [VS Code Release Notes](command:${ShowCurrentReleaseNotesActionId}) for changes to the built-in extensions.`);\n\t\t}\n\n\t\treturn Promise.reject(new Error('not available'));\n\t}\n\n\tget categories(): readonly string[] {\n\t\tconst { local, gallery, resourceExtension } = this;\n\t\tif (local && local.manifest.categories && !this.outdated) {\n\t\t\treturn local.manifest.categories;\n\t\t}\n\t\tif (gallery) {\n\t\t\treturn gallery.categories;\n\t\t}\n\t\tif (resourceExtension) {\n\t\t\treturn resourceExtension.manifest.categories ?? [];\n\t\t}\n\t\treturn [];\n\t}\n\n\tget tags(): readonly string[] {\n\t\tconst { gallery } = this;\n\t\tif (gallery) {\n\t\t\treturn gallery.tags.filter(tag => !tag.startsWith('_'));\n\t\t}\n\t\treturn [];\n\t}\n\n\tget dependencies(): string[] {\n\t\tconst { local, gallery, resourceExtension } = this;\n\t\tif (local && local.manifest.extensionDependencies && !this.outdated) {\n\t\t\treturn local.manifest.extensionDependencies;\n\t\t}\n\t\tif (gallery) {\n\t\t\treturn gallery.properties.dependencies || [];\n\t\t}\n\t\tif (resourceExtension) {\n\t\t\treturn resourceExtension.manifest.extensionDependencies || [];\n\t\t}\n\t\treturn [];\n\t}\n\n\tget extensionPack(): string[] {\n\t\tconst { local, gallery, resourceExtension } = this;\n\t\tif (local && local.manifest.extensionPack && !this.outdated) {\n\t\t\treturn local.manifest.extensionPack;\n\t\t}\n\t\tif (gallery) {\n\t\t\treturn gallery.properties.extensionPack || [];\n\t\t}\n\t\tif (resourceExtension) {\n\t\t\treturn resourceExtension.manifest.extensionPack || [];\n\t\t}\n\t\treturn [];\n\t}\n\n\tsetExtensionsControlManifest(extensionsControlManifest: IExtensionsControlManifest): void {\n\t\tthis.malicious = findMatchingMaliciousEntry(this.identifier, extensionsControlManifest.malicious);\n\t\tthis.deprecationInfo = extensionsControlManifest.deprecated ? extensionsControlManifest.deprecated[this.identifier.id.toLowerCase()] : undefined;\n\t}\n\n\tprivate getManifestFromLocalOrResource(): IExtensionManifest | null {\n\t\tif (this.local) {\n\t\t\treturn this.local.manifest;\n\t\t}\n\t\tif (this.resourceExtension) {\n\t\t\treturn this.resourceExtension.manifest;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nconst EXTENSIONS_AUTO_UPDATE_KEY = 'extensions.autoUpdate';\nconst EXTENSIONS_DONOT_AUTO_UPDATE_KEY = 'extensions.donotAutoUpdate';\nconst EXTENSIONS_DISMISSED_NOTIFICATIONS_KEY = 'extensions.dismissedNotifications';\n\nclass Extensions extends Disposable {\n\n\tprivate readonly _onChange = this._register(new Emitter<{ extension: Extension; operation?: InstallOperation } | undefined>());\n\tget onChange() { return this._onChange.event; }\n\n\tprivate readonly _onReset = this._register(new Emitter<void>());\n\tget onReset() { return this._onReset.event; }\n\n\tprivate installing: Extension[] = [];\n\tprivate uninstalling: Extension[] = [];\n\tprivate installed: Extension[] = [];\n\n\tconstructor(\n\t\treadonly server: IExtensionManagementServer,\n\t\tprivate readonly stateProvider: IExtensionStateProvider<ExtensionState>,\n\t\tprivate readonly runtimeStateProvider: IExtensionStateProvider<ExtensionRuntimeState | undefined>,\n\t\tprivate readonly isWorkspaceServer: boolean,\n\t\t@IExtensionGalleryService private readonly galleryService: IExtensionGalleryService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IWorkbenchExtensionManagementService private readonly workbenchExtensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._register(server.extensionManagementService.onInstallExtension(e => this.onInstallExtension(e)));\n\t\tthis._register(server.extensionManagementService.onDidInstallExtensions(e => this.onDidInstallExtensions(e)));\n\t\tthis._register(server.extensionManagementService.onUninstallExtension(e => this.onUninstallExtension(e.identifier)));\n\t\tthis._register(server.extensionManagementService.onDidUninstallExtension(e => this.onDidUninstallExtension(e)));\n\t\tthis._register(server.extensionManagementService.onDidUpdateExtensionMetadata(e => this.onDidUpdateExtensionMetadata(e.local)));\n\t\tthis._register(server.extensionManagementService.onDidChangeProfile(() => this.reset()));\n\t\tthis._register(extensionEnablementService.onEnablementChanged(e => this.onEnablementChanged(e)));\n\t\tthis._register(Event.any(this.onChange, this.onReset)(() => this._local = undefined));\n\t\tif (this.isWorkspaceServer) {\n\t\t\tthis._register(this.workbenchExtensionManagementService.onInstallExtension(e => {\n\t\t\t\tif (e.workspaceScoped) {\n\t\t\t\t\tthis.onInstallExtension(e);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._register(this.workbenchExtensionManagementService.onDidInstallExtensions(e => {\n\t\t\t\tconst result = e.filter(e => e.workspaceScoped);\n\t\t\t\tif (result.length) {\n\t\t\t\t\tthis.onDidInstallExtensions(result);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._register(this.workbenchExtensionManagementService.onUninstallExtension(e => {\n\t\t\t\tif (e.workspaceScoped) {\n\t\t\t\t\tthis.onUninstallExtension(e.identifier);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._register(this.workbenchExtensionManagementService.onDidUninstallExtension(e => {\n\t\t\t\tif (e.workspaceScoped) {\n\t\t\t\t\tthis.onDidUninstallExtension(e);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate _local: Extension[] | undefined;\n\tget local(): Extension[] {\n\t\tif (!this._local) {\n\t\t\tthis._local = [];\n\t\t\tfor (const extension of this.installed) {\n\t\t\t\tthis._local.push(extension);\n\t\t\t}\n\t\t\tfor (const extension of this.installing) {\n\t\t\t\tif (!this.installed.some(installed => areSameExtensions(installed.identifier, extension.identifier))) {\n\t\t\t\t\tthis._local.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._local;\n\t}\n\n\tasync queryInstalled(productVersion: IProductVersion): Promise<IExtension[]> {\n\t\tawait this.fetchInstalledExtensions(productVersion);\n\t\tthis._onChange.fire(undefined);\n\t\treturn this.local;\n\t}\n\n\tasync syncInstalledExtensionsWithGallery(galleryExtensions: IGalleryExtension[], productVersion: IProductVersion, flagExtensionsMissingFromGallery?: IExtensionInfo[]): Promise<void> {\n\t\tconst extensions = await this.mapInstalledExtensionWithCompatibleGalleryExtension(galleryExtensions, productVersion);\n\t\tfor (const [extension, gallery] of extensions) {\n\t\t\t// update metadata of the extension if it does not exist\n\t\t\tif (extension.local && !extension.local.identifier.uuid) {\n\t\t\t\textension.local = await this.updateMetadata(extension.local, gallery);\n\t\t\t}\n\t\t\tif (!extension.gallery || extension.gallery.version !== gallery.version || extension.gallery.properties.targetPlatform !== gallery.properties.targetPlatform) {\n\t\t\t\textension.gallery = gallery;\n\t\t\t\tthis._onChange.fire({ extension });\n\t\t\t}\n\t\t}\n\t\t// Detect extensions that do not have a corresponding gallery entry.\n\t\tif (flagExtensionsMissingFromGallery) {\n\t\t\tconst extensionsToQuery = [];\n\t\t\tfor (const extension of this.local) {\n\t\t\t\t// Extension is already paired with a gallery object\n\t\t\t\tif (extension.gallery) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// Already flagged as missing from gallery\n\t\t\t\tif (extension.missingFromGallery) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// A UUID indicates extension originated from gallery\n\t\t\t\tif (!extension.identifier.uuid) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// Extension is not present in the set we are concerned about\n\t\t\t\tif (!flagExtensionsMissingFromGallery.some(f => areSameExtensions(f, extension.identifier))) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\textensionsToQuery.push(extension);\n\t\t\t}\n\t\t\tif (extensionsToQuery.length) {\n\t\t\t\tconst queryResult = await this.galleryService.getExtensions(extensionsToQuery.map(e => ({ ...e.identifier, version: e.version })), CancellationToken.None);\n\t\t\t\tconst queriedIds: string[] = [];\n\t\t\t\tconst missingIds: string[] = [];\n\t\t\t\tfor (const extension of extensionsToQuery) {\n\t\t\t\t\tqueriedIds.push(extension.identifier.id);\n\t\t\t\t\tconst gallery = queryResult.find(g => areSameExtensions(g.identifier, extension.identifier));\n\t\t\t\t\tif (gallery) {\n\t\t\t\t\t\textension.gallery = gallery;\n\t\t\t\t\t} else {\n\t\t\t\t\t\textension.missingFromGallery = true;\n\t\t\t\t\t\tmissingIds.push(extension.identifier.id);\n\t\t\t\t\t}\n\t\t\t\t\tthis._onChange.fire({ extension });\n\t\t\t\t}\n\t\t\t\ttype MissingFromGalleryClassification = {\n\t\t\t\t\towner: 'joshspicer';\n\t\t\t\t\tcomment: 'Report when installed extensions are no longer available in the gallery';\n\t\t\t\t\tqueriedIds: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Extensions queried as potentially missing from gallery' };\n\t\t\t\t\tmissingIds: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Extensions determined missing from gallery' };\n\t\t\t\t};\n\t\t\t\ttype MissingFromGalleryEvent = {\n\t\t\t\t\treadonly queriedIds: TelemetryTrustedValue<string>;\n\t\t\t\t\treadonly missingIds: TelemetryTrustedValue<string>;\n\t\t\t\t};\n\t\t\t\tthis.telemetryService.publicLog2<MissingFromGalleryEvent, MissingFromGalleryClassification>('extensions:missingFromGallery', {\n\t\t\t\t\tqueriedIds: new TelemetryTrustedValue(queriedIds.join(';')),\n\t\t\t\t\tmissingIds: new TelemetryTrustedValue(missingIds.join(';'))\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async mapInstalledExtensionWithCompatibleGalleryExtension(galleryExtensions: IGalleryExtension[], productVersion: IProductVersion): Promise<[Extension, IGalleryExtension][]> {\n\t\tconst mappedExtensions = this.mapInstalledExtensionWithGalleryExtension(galleryExtensions);\n\t\tconst targetPlatform = await this.server.extensionManagementService.getTargetPlatform();\n\t\tconst compatibleGalleryExtensions: IGalleryExtension[] = [];\n\t\tconst compatibleGalleryExtensionsToFetch: IExtensionInfo[] = [];\n\t\tawait Promise.allSettled(mappedExtensions.map(async ([extension, gallery]) => {\n\t\t\tif (extension.local) {\n\t\t\t\tif (await this.galleryService.isExtensionCompatible(gallery, extension.local.preRelease, targetPlatform, productVersion)) {\n\t\t\t\t\tcompatibleGalleryExtensions.push(gallery);\n\t\t\t\t} else {\n\t\t\t\t\tcompatibleGalleryExtensionsToFetch.push({ ...extension.local.identifier, preRelease: extension.local.preRelease });\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tif (compatibleGalleryExtensionsToFetch.length) {\n\t\t\tconst result = await this.galleryService.getExtensions(compatibleGalleryExtensionsToFetch, { targetPlatform, compatible: true, queryAllVersions: true, productVersion }, CancellationToken.None);\n\t\t\tcompatibleGalleryExtensions.push(...result);\n\t\t}\n\t\treturn this.mapInstalledExtensionWithGalleryExtension(compatibleGalleryExtensions);\n\t}\n\n\tprivate mapInstalledExtensionWithGalleryExtension(galleryExtensions: IGalleryExtension[]): [Extension, IGalleryExtension][] {\n\t\tconst mappedExtensions: [Extension, IGalleryExtension][] = [];\n\t\tconst byUUID = new Map<string, IGalleryExtension>(), byID = new Map<string, IGalleryExtension>();\n\t\tfor (const gallery of galleryExtensions) {\n\t\t\tbyUUID.set(gallery.identifier.uuid, gallery);\n\t\t\tbyID.set(gallery.identifier.id.toLowerCase(), gallery);\n\t\t}\n\t\tfor (const installed of this.installed) {\n\t\t\tif (installed.uuid) {\n\t\t\t\tconst gallery = byUUID.get(installed.uuid);\n\t\t\t\tif (gallery) {\n\t\t\t\t\tmappedExtensions.push([installed, gallery]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (installed.local?.source !== 'resource') {\n\t\t\t\tconst gallery = byID.get(installed.identifier.id.toLowerCase());\n\t\t\t\tif (gallery) {\n\t\t\t\t\tmappedExtensions.push([installed, gallery]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn mappedExtensions;\n\t}\n\n\tprivate async updateMetadata(localExtension: ILocalExtension, gallery: IGalleryExtension): Promise<ILocalExtension> {\n\t\tlet isPreReleaseVersion = false;\n\t\tif (localExtension.manifest.version !== gallery.version) {\n\t\t\ttype GalleryServiceMatchInstalledExtensionClassification = {\n\t\t\t\towner: 'sandy081';\n\t\t\t\tcomment: 'Report when a request is made to update metadata of an installed extension';\n\t\t\t};\n\t\t\tthis.telemetryService.publicLog2<{}, GalleryServiceMatchInstalledExtensionClassification>('galleryService:updateMetadata');\n\t\t\tconst galleryWithLocalVersion: IGalleryExtension | undefined = (await this.galleryService.getExtensions([{ ...localExtension.identifier, version: localExtension.manifest.version }], CancellationToken.None))[0];\n\t\t\tisPreReleaseVersion = !!galleryWithLocalVersion?.properties?.isPreReleaseVersion;\n\t\t}\n\t\treturn this.workbenchExtensionManagementService.updateMetadata(localExtension, { id: gallery.identifier.uuid, publisherDisplayName: gallery.publisherDisplayName, publisherId: gallery.publisherId, isPreReleaseVersion });\n\t}\n\n\tcanInstall(galleryExtension: IGalleryExtension): Promise<true | IMarkdownString> {\n\t\treturn this.server.extensionManagementService.canInstall(galleryExtension);\n\t}\n\n\tprivate onInstallExtension(event: InstallExtensionEvent): void {\n\t\tconst { source } = event;\n\t\tif (source && !URI.isUri(source)) {\n\t\t\tconst extension = this.installed.find(e => areSameExtensions(e.identifier, source.identifier))\n\t\t\t\t?? this.instantiationService.createInstance(Extension, this.stateProvider, this.runtimeStateProvider, this.server, undefined, source, undefined);\n\t\t\tthis.installing.push(extension);\n\t\t\tthis._onChange.fire({ extension });\n\t\t}\n\t}\n\n\tprivate async fetchInstalledExtensions(productVersion?: IProductVersion): Promise<void> {\n\t\tconst extensionsControlManifest = await this.server.extensionManagementService.getExtensionsControlManifest();\n\t\tconst all = await this.server.extensionManagementService.getInstalled(undefined, undefined, productVersion);\n\t\tif (this.isWorkspaceServer) {\n\t\t\tall.push(...await this.workbenchExtensionManagementService.getInstalledWorkspaceExtensions(true));\n\t\t}\n\n\t\t// dedup workspace, user and system extensions by giving priority to workspace first and then to user extension.\n\t\tconst installed = groupByExtension(all, r => r.identifier).reduce((result, extensions) => {\n\t\t\tif (extensions.length === 1) {\n\t\t\t\tresult.push(extensions[0]);\n\t\t\t} else {\n\t\t\t\tlet workspaceExtension: ILocalExtension | undefined,\n\t\t\t\t\tuserExtension: ILocalExtension | undefined,\n\t\t\t\t\tsystemExtension: ILocalExtension | undefined;\n\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\tif (extension.isWorkspaceScoped) {\n\t\t\t\t\t\tworkspaceExtension = extension;\n\t\t\t\t\t} else if (extension.type === ExtensionType.User) {\n\t\t\t\t\t\tuserExtension = extension;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsystemExtension = extension;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst extension = workspaceExtension ?? userExtension ?? systemExtension;\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}, []);\n\n\t\tconst byId = index(this.installed, e => e.local ? e.local.identifier.id : e.identifier.id);\n\t\tthis.installed = installed.map(local => {\n\t\t\tconst extension = byId[local.identifier.id] || this.instantiationService.createInstance(Extension, this.stateProvider, this.runtimeStateProvider, this.server, local, undefined, undefined);\n\t\t\textension.local = local;\n\t\t\textension.enablementState = this.extensionEnablementService.getEnablementState(local);\n\t\t\textension.setExtensionsControlManifest(extensionsControlManifest);\n\t\t\treturn extension;\n\t\t});\n\t}\n\n\tprivate async reset(): Promise<void> {\n\t\tthis.installed = [];\n\t\tthis.installing = [];\n\t\tthis.uninstalling = [];\n\t\tawait this.fetchInstalledExtensions();\n\t\tthis._onReset.fire();\n\t}\n\n\tprivate async onDidInstallExtensions(results: readonly InstallExtensionResult[]): Promise<void> {\n\t\tconst extensions: Extension[] = [];\n\t\tfor (const event of results) {\n\t\t\tconst { local, source } = event;\n\t\t\tconst gallery = source && !URI.isUri(source) ? source : undefined;\n\t\t\tconst location = source && URI.isUri(source) ? source : undefined;\n\t\t\tconst installingExtension = gallery ? this.installing.filter(e => areSameExtensions(e.identifier, gallery.identifier))[0] : null;\n\t\t\tthis.installing = installingExtension ? this.installing.filter(e => e !== installingExtension) : this.installing;\n\n\t\t\tlet extension: Extension | undefined = installingExtension ? installingExtension\n\t\t\t\t: (location || local) ? this.instantiationService.createInstance(Extension, this.stateProvider, this.runtimeStateProvider, this.server, local, undefined, undefined)\n\t\t\t\t\t: undefined;\n\t\t\tif (extension) {\n\t\t\t\tif (local) {\n\t\t\t\t\tconst installed = this.installed.filter(e => areSameExtensions(e.identifier, extension!.identifier))[0];\n\t\t\t\t\tif (installed) {\n\t\t\t\t\t\textension = installed;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.installed.push(extension);\n\t\t\t\t\t}\n\t\t\t\t\textension.local = local;\n\t\t\t\t\tif (!extension.gallery) {\n\t\t\t\t\t\textension.gallery = gallery;\n\t\t\t\t\t}\n\t\t\t\t\textension.enablementState = this.extensionEnablementService.getEnablementState(local);\n\t\t\t\t}\n\t\t\t\textensions.push(extension);\n\t\t\t}\n\t\t\tthis._onChange.fire(!local || !extension ? undefined : { extension, operation: event.operation });\n\t\t}\n\n\t\tif (extensions.length) {\n\t\t\tconst manifest = await this.server.extensionManagementService.getExtensionsControlManifest();\n\t\t\tfor (const extension of extensions) {\n\t\t\t\textension.setExtensionsControlManifest(manifest);\n\t\t\t}\n\t\t\tthis.matchInstalledExtensionsWithGallery(extensions);\n\t\t}\n\t}\n\n\tprivate async onDidUpdateExtensionMetadata(local: ILocalExtension): Promise<void> {\n\t\tconst extension = this.installed.find(e => areSameExtensions(e.identifier, local.identifier));\n\t\tif (extension?.local) {\n\t\t\textension.local = local;\n\t\t\tthis._onChange.fire({ extension });\n\t\t}\n\t}\n\n\tprivate async matchInstalledExtensionsWithGallery(extensions: Extension[]): Promise<void> {\n\t\tconst toMatch = extensions.filter(e => e.local && !e.gallery && e.local.source !== 'resource');\n\t\tif (!toMatch.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.galleryService.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tconst galleryExtensions = await this.galleryService.getExtensions(toMatch.map(e => ({ ...e.identifier, preRelease: e.local?.preRelease })), { compatible: true, targetPlatform: await this.server.extensionManagementService.getTargetPlatform() }, CancellationToken.None);\n\t\tfor (const extension of extensions) {\n\t\t\tconst compatible = galleryExtensions.find(e => areSameExtensions(e.identifier, extension.identifier));\n\t\t\tif (compatible) {\n\t\t\t\textension.gallery = compatible;\n\t\t\t\tthis._onChange.fire({ extension });\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onUninstallExtension(identifier: IExtensionIdentifier): void {\n\t\tconst extension = this.installed.filter(e => areSameExtensions(e.identifier, identifier))[0];\n\t\tif (extension) {\n\t\t\tconst uninstalling = this.uninstalling.filter(e => areSameExtensions(e.identifier, identifier))[0] || extension;\n\t\t\tthis.uninstalling = [uninstalling, ...this.uninstalling.filter(e => !areSameExtensions(e.identifier, identifier))];\n\t\t\tthis._onChange.fire(uninstalling ? { extension: uninstalling } : undefined);\n\t\t}\n\t}\n\n\tprivate onDidUninstallExtension({ identifier, error }: DidUninstallExtensionEvent): void {\n\t\tconst uninstalled = this.uninstalling.find(e => areSameExtensions(e.identifier, identifier)) || this.installed.find(e => areSameExtensions(e.identifier, identifier));\n\t\tthis.uninstalling = this.uninstalling.filter(e => !areSameExtensions(e.identifier, identifier));\n\t\tif (!error) {\n\t\t\tthis.installed = this.installed.filter(e => !areSameExtensions(e.identifier, identifier));\n\t\t}\n\t\tif (uninstalled) {\n\t\t\tthis._onChange.fire({ extension: uninstalled });\n\t\t}\n\t}\n\n\tprivate onEnablementChanged(platformExtensions: readonly IPlatformExtension[]) {\n\t\tconst extensions = this.local.filter(e => platformExtensions.some(p => areSameExtensions(e.identifier, p.identifier)));\n\t\tfor (const extension of extensions) {\n\t\t\tif (extension.local) {\n\t\t\t\tconst enablementState = this.extensionEnablementService.getEnablementState(extension.local);\n\t\t\t\tif (enablementState !== extension.enablementState) {\n\t\t\t\t\textension.enablementState = enablementState;\n\t\t\t\t\tthis._onChange.fire({ extension });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetExtensionState(extension: Extension): ExtensionState {\n\t\tif (extension.gallery && this.installing.some(e => !!e.gallery && areSameExtensions(e.gallery.identifier, extension.gallery!.identifier))) {\n\t\t\treturn ExtensionState.Installing;\n\t\t}\n\t\tif (this.uninstalling.some(e => areSameExtensions(e.identifier, extension.identifier))) {\n\t\t\treturn ExtensionState.Uninstalling;\n\t\t}\n\t\tconst local = this.installed.filter(e => e === extension || (e.gallery && extension.gallery && areSameExtensions(e.gallery.identifier, extension.gallery.identifier)))[0];\n\t\treturn local ? ExtensionState.Installed : ExtensionState.Uninstalled;\n\t}\n}\n\nexport class ExtensionsWorkbenchService extends Disposable implements IExtensionsWorkbenchService, IURLHandler {\n\n\tprivate static readonly UpdatesCheckInterval = 1000 * 60 * 60 * 12; // 12 hours\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate hasOutdatedExtensionsContextKey: IContextKey<boolean>;\n\n\tprivate readonly localExtensions: Extensions | null = null;\n\tprivate readonly remoteExtensions: Extensions | null = null;\n\tprivate readonly webExtensions: Extensions | null = null;\n\tprivate readonly extensionsServers: Extensions[] = [];\n\n\tprivate updatesCheckDelayer: ThrottledDelayer<void>;\n\tprivate autoUpdateDelayer: ThrottledDelayer<void>;\n\n\tprivate readonly _onChange = this._register(new Emitter<IExtension | undefined>());\n\tget onChange(): Event<IExtension | undefined> { return this._onChange.event; }\n\n\tprivate extensionsNotification: IExtensionsNotification & { readonly key: string } | undefined;\n\tprivate readonly _onDidChangeExtensionsNotification = new Emitter<IExtensionsNotification | undefined>();\n\treadonly onDidChangeExtensionsNotification = this._onDidChangeExtensionsNotification.event;\n\n\tprivate readonly _onReset = new Emitter<void>();\n\tget onReset() { return this._onReset.event; }\n\n\tprivate installing: IExtension[] = [];\n\tprivate tasksInProgress: CancelablePromise<any>[] = [];\n\n\treadonly whenInitialized: Promise<void>;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IWorkbenchExtensionManagementService private readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IExtensionGalleryService private readonly galleryService: IExtensionGalleryService,\n\t\t@IExtensionGalleryManifestService private readonly extensionGalleryManifestService: IExtensionGalleryManifestService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IURLService urlService: IURLService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IExtensionManagementServerService private readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IIgnoredExtensionsManagementService private readonly extensionsSyncManagementService: IIgnoredExtensionsManagementService,\n\t\t@IUserDataAutoSyncService private readonly userDataAutoSyncService: IUserDataAutoSyncService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IExtensionManifestPropertiesService private readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@ILocaleService private readonly localeService: ILocaleService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IUserDataSyncEnablementService private readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IUpdateService private readonly updateService: IUpdateService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IFileDialogService private readonly fileDialogService: IFileDialogService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IAllowedExtensionsService private readonly allowedExtensionsService: IAllowedExtensionsService,\n\t) {\n\t\tsuper();\n\n\t\tthis.hasOutdatedExtensionsContextKey = HasOutdatedExtensionsContext.bindTo(contextKeyService);\n\t\tif (extensionManagementServerService.localExtensionManagementServer) {\n\t\t\tthis.localExtensions = this._register(instantiationService.createInstance(Extensions,\n\t\t\t\textensionManagementServerService.localExtensionManagementServer,\n\t\t\t\text => this.getExtensionState(ext),\n\t\t\t\text => this.getRuntimeState(ext),\n\t\t\t\t!extensionManagementServerService.remoteExtensionManagementServer\n\t\t\t));\n\t\t\tthis._register(this.localExtensions.onChange(e => this.onDidChangeExtensions(e?.extension)));\n\t\t\tthis._register(this.localExtensions.onReset(e => this.reset()));\n\t\t\tthis.extensionsServers.push(this.localExtensions);\n\t\t}\n\t\tif (extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\tthis.remoteExtensions = this._register(instantiationService.createInstance(Extensions,\n\t\t\t\textensionManagementServerService.remoteExtensionManagementServer,\n\t\t\t\text => this.getExtensionState(ext),\n\t\t\t\text => this.getRuntimeState(ext),\n\t\t\t\ttrue\n\t\t\t));\n\t\t\tthis._register(this.remoteExtensions.onChange(e => this.onDidChangeExtensions(e?.extension)));\n\t\t\tthis._register(this.remoteExtensions.onReset(e => this.reset()));\n\t\t\tthis.extensionsServers.push(this.remoteExtensions);\n\t\t}\n\t\tif (extensionManagementServerService.webExtensionManagementServer) {\n\t\t\tthis.webExtensions = this._register(instantiationService.createInstance(Extensions,\n\t\t\t\textensionManagementServerService.webExtensionManagementServer,\n\t\t\t\text => this.getExtensionState(ext),\n\t\t\t\text => this.getRuntimeState(ext),\n\t\t\t\t!(extensionManagementServerService.remoteExtensionManagementServer || extensionManagementServerService.localExtensionManagementServer)\n\t\t\t));\n\t\t\tthis._register(this.webExtensions.onChange(e => this.onDidChangeExtensions(e?.extension)));\n\t\t\tthis._register(this.webExtensions.onReset(e => this.reset()));\n\t\t\tthis.extensionsServers.push(this.webExtensions);\n\t\t}\n\n\t\tthis.updatesCheckDelayer = new ThrottledDelayer<void>(ExtensionsWorkbenchService.UpdatesCheckInterval);\n\t\tthis.autoUpdateDelayer = new ThrottledDelayer<void>(1000);\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.updatesCheckDelayer.cancel();\n\t\t\tthis.autoUpdateDelayer.cancel();\n\t\t}));\n\n\t\turlService.registerHandler(this);\n\n\t\tthis.whenInitialized = this.initialize();\n\t}\n\n\tprivate async initialize(): Promise<void> {\n\t\t// initialize local extensions\n\t\tawait Promise.all([this.queryLocal(), this.extensionService.whenInstalledExtensionsRegistered()]);\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tthis.onDidChangeRunningExtensions(this.extensionService.extensions, []);\n\t\tthis._register(this.extensionService.onDidChangeExtensions(({ added, removed }) => this.onDidChangeRunningExtensions(added, removed)));\n\n\t\tawait this.lifecycleService.when(LifecyclePhase.Eventually);\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initializeAutoUpdate();\n\t\tthis.updateExtensionsNotificaiton();\n\t\tthis.reportInstalledExtensionsTelemetry();\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.PROFILE, EXTENSIONS_DISMISSED_NOTIFICATIONS_KEY, this._store)(e => this.onDidDismissedNotificationsValueChange()));\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.APPLICATION, EXTENSIONS_AUTO_UPDATE_KEY, this._store)(e => this.onDidSelectedExtensionToAutoUpdateValueChange()));\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.APPLICATION, EXTENSIONS_DONOT_AUTO_UPDATE_KEY, this._store)(e => this.onDidSelectedExtensionToAutoUpdateValueChange()));\n\t\tthis._register(Event.debounce(this.onChange, () => undefined, 100)(() => {\n\t\t\tthis.updateExtensionsNotificaiton();\n\t\t\tthis.reportProgressFromOtherSources();\n\t\t}));\n\t}\n\n\tprivate initializeAutoUpdate(): void {\n\t\t// Register listeners for auto updates\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AutoUpdateConfigurationKey)) {\n\t\t\t\tif (this.isAutoUpdateEnabled()) {\n\t\t\t\t\tthis.eventuallyAutoUpdateExtensions();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (e.affectsConfiguration(AutoCheckUpdatesConfigurationKey)) {\n\t\t\t\tif (this.isAutoCheckUpdatesEnabled()) {\n\t\t\t\t\tthis.checkForUpdates(`Enabled auto check updates`);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.extensionEnablementService.onEnablementChanged(platformExtensions => {\n\t\t\tif (this.getAutoUpdateValue() === 'onlyEnabledExtensions' && platformExtensions.some(e => this.extensionEnablementService.isEnabled(e))) {\n\t\t\t\tthis.checkForUpdates('Extension enablement changed');\n\t\t\t}\n\t\t}));\n\t\tthis._register(Event.debounce(this.onChange, () => undefined, 100)(() => this.hasOutdatedExtensionsContextKey.set(this.outdated.length > 0)));\n\t\tthis._register(this.updateService.onStateChange(e => {\n\t\t\tif ((e.type === StateType.CheckingForUpdates && e.explicit) || e.type === StateType.AvailableForDownload || e.type === StateType.Downloaded) {\n\t\t\t\tthis.telemetryService.publicLog2<{}, {\n\t\t\t\t\towner: 'sandy081';\n\t\t\t\t\tcomment: 'Report when update check is triggered on product update';\n\t\t\t\t}>('extensions:updatecheckonproductupdate');\n\t\t\t\tif (this.isAutoCheckUpdatesEnabled()) {\n\t\t\t\t\tthis.checkForUpdates('Product update');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.allowedExtensionsService.onDidChangeAllowedExtensionsConfigValue(() => {\n\t\t\tif (this.isAutoCheckUpdatesEnabled()) {\n\t\t\t\tthis.checkForUpdates('Allowed extensions changed');\n\t\t\t}\n\t\t}));\n\n\t\t// Update AutoUpdate Contexts\n\t\tthis.hasOutdatedExtensionsContextKey.set(this.outdated.length > 0);\n\n\t\t// Check for updates\n\t\tthis.eventuallyCheckForUpdates(true);\n\n\t\tif (isWeb) {\n\t\t\tthis.syncPinnedBuiltinExtensions();\n\t\t\t// Always auto update builtin extensions in web\n\t\t\tif (!this.isAutoUpdateEnabled()) {\n\t\t\t\tthis.autoUpdateBuiltinExtensions();\n\t\t\t}\n\t\t}\n\n\t\tthis.registerAutoRestartListener();\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AutoRestartConfigurationKey)) {\n\t\t\t\tthis.registerAutoRestartListener();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate isAutoUpdateEnabled(): boolean {\n\t\treturn this.getAutoUpdateValue() !== false;\n\t}\n\n\tgetAutoUpdateValue(): AutoUpdateConfigurationValue {\n\t\tconst autoUpdate = this.configurationService.getValue<AutoUpdateConfigurationValue>(AutoUpdateConfigurationKey);\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tif (<any>autoUpdate === 'onlySelectedExtensions') {\n\t\t\treturn false;\n\t\t}\n\t\treturn isBoolean(autoUpdate) || autoUpdate === 'onlyEnabledExtensions' ? autoUpdate : true;\n\t}\n\n\tasync updateAutoUpdateForAllExtensions(isAutoUpdateEnabled: boolean): Promise<void> {\n\t\tconst wasAutoUpdateEnabled = this.isAutoUpdateEnabled();\n\t\tif (wasAutoUpdateEnabled === isAutoUpdateEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = await this.dialogService.confirm({\n\t\t\ttitle: nls.localize('confirmEnableDisableAutoUpdate', \"Auto Update Extensions\"),\n\t\t\tmessage: isAutoUpdateEnabled\n\t\t\t\t? nls.localize('confirmEnableAutoUpdate', \"Do you want to enable auto update for all extensions?\")\n\t\t\t\t: nls.localize('confirmDisableAutoUpdate', \"Do you want to disable auto update for all extensions?\"),\n\t\t\tdetail: nls.localize('confirmEnableDisableAutoUpdateDetail', \"This will reset any auto update settings you have set for individual extensions.\"),\n\t\t});\n\t\tif (!result.confirmed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Reset extensions enabled for auto update first to prevent them from being updated\n\t\tthis.setEnabledAutoUpdateExtensions([]);\n\n\t\tawait this.configurationService.updateValue(AutoUpdateConfigurationKey, isAutoUpdateEnabled);\n\n\t\tthis.setDisabledAutoUpdateExtensions([]);\n\t\tawait this.updateExtensionsPinnedState(!isAutoUpdateEnabled);\n\t\tthis._onChange.fire(undefined);\n\t}\n\n\tprivate readonly autoRestartListenerDisposable = this._register(new MutableDisposable());\n\tprivate registerAutoRestartListener(): void {\n\t\tthis.autoRestartListenerDisposable.value = undefined;\n\t\tif (this.configurationService.getValue(AutoRestartConfigurationKey) === true) {\n\t\t\tthis.autoRestartListenerDisposable.value = this.hostService.onDidChangeFocus(focus => {\n\t\t\t\tif (!focus && this.configurationService.getValue(AutoRestartConfigurationKey) === true) {\n\t\t\t\t\tthis.updateRunningExtensions(undefined, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate reportInstalledExtensionsTelemetry() {\n\t\tconst extensionIds = this.installed.filter(extension =>\n\t\t\t!extension.isBuiltin &&\n\t\t\t(extension.enablementState === EnablementState.EnabledWorkspace ||\n\t\t\t\textension.enablementState === EnablementState.EnabledGlobally))\n\t\t\t.map(extension => ExtensionIdentifier.toKey(extension.identifier.id));\n\t\tthis.telemetryService.publicLog2<InstalledExtensionsEvent, ExtensionsLoadClassification>('installedExtensions', { extensionIds: new TelemetryTrustedValue(extensionIds.join(';')), count: extensionIds.length });\n\t}\n\n\tprivate async onDidChangeRunningExtensions(added: ReadonlyArray<IExtensionDescription>, removed: ReadonlyArray<IExtensionDescription>): Promise<void> {\n\t\tconst changedExtensions: IExtension[] = [];\n\t\tconst extensionsToFetch: IExtensionDescription[] = [];\n\t\tfor (const desc of added) {\n\t\t\tconst extension = this.installed.find(e => areSameExtensions({ id: desc.identifier.value, uuid: desc.uuid }, e.identifier));\n\t\t\tif (extension) {\n\t\t\t\tchangedExtensions.push(extension);\n\t\t\t} else {\n\t\t\t\textensionsToFetch.push(desc);\n\t\t\t}\n\t\t}\n\t\tconst workspaceExtensions: IExtensionDescription[] = [];\n\t\tfor (const desc of removed) {\n\t\t\tif (this.workspaceContextService.isInsideWorkspace(desc.extensionLocation)) {\n\t\t\t\tworkspaceExtensions.push(desc);\n\t\t\t} else {\n\t\t\t\textensionsToFetch.push(desc);\n\t\t\t}\n\t\t}\n\t\tif (extensionsToFetch.length) {\n\t\t\tconst extensions = await this.getExtensions(extensionsToFetch.map(e => ({ id: e.identifier.value, uuid: e.uuid })), CancellationToken.None);\n\t\t\tchangedExtensions.push(...extensions);\n\t\t}\n\t\tif (workspaceExtensions.length) {\n\t\t\tconst extensions = await this.getResourceExtensions(workspaceExtensions.map(e => e.extensionLocation), true);\n\t\t\tchangedExtensions.push(...extensions);\n\t\t}\n\t\tfor (const changedExtension of changedExtensions) {\n\t\t\tthis._onChange.fire(changedExtension);\n\t\t}\n\t}\n\n\tprivate updateExtensionsPinnedState(pinned: boolean): Promise<void> {\n\t\treturn this.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Extensions,\n\t\t\ttitle: nls.localize('updatingExtensions', \"Updating Extensions Auto Update State\"),\n\t\t}, () => this.extensionManagementService.resetPinnedStateForAllUserExtensions(pinned));\n\t}\n\n\tprivate reset(): void {\n\t\tfor (const task of this.tasksInProgress) {\n\t\t\ttask.cancel();\n\t\t}\n\t\tthis.tasksInProgress = [];\n\t\tthis.installing = [];\n\t\tthis.onDidChangeExtensions();\n\t\tthis._onReset.fire();\n\t}\n\n\tprivate onDidChangeExtensions(extension?: IExtension): void {\n\t\tthis._installed = undefined;\n\t\tthis._local = undefined;\n\t\tthis._onChange.fire(extension);\n\t}\n\n\tprivate _local: IExtension[] | undefined;\n\tget local(): IExtension[] {\n\t\tif (!this._local) {\n\t\t\tif (this.extensionsServers.length === 1) {\n\t\t\t\tthis._local = this.installed;\n\t\t\t} else {\n\t\t\t\tthis._local = [];\n\t\t\t\tconst byId = groupByExtension(this.installed, r => r.identifier);\n\t\t\t\tfor (const extensions of byId) {\n\t\t\t\t\tthis._local.push(this.getPrimaryExtension(extensions));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._local;\n\t}\n\n\tprivate _installed: IExtension[] | undefined;\n\tget installed(): IExtension[] {\n\t\tif (!this._installed) {\n\t\t\tthis._installed = [];\n\t\t\tfor (const extensions of this.extensionsServers) {\n\t\t\t\tfor (const extension of extensions.local) {\n\t\t\t\t\tthis._installed.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._installed;\n\t}\n\n\tget outdated(): IExtension[] {\n\t\treturn this.installed.filter(e => e.outdated && e.local && e.state === ExtensionState.Installed);\n\t}\n\n\tasync queryLocal(server?: IExtensionManagementServer): Promise<IExtension[]> {\n\t\tif (server) {\n\t\t\tif (this.localExtensions && this.extensionManagementServerService.localExtensionManagementServer === server) {\n\t\t\t\treturn this.localExtensions.queryInstalled(this.getProductVersion());\n\t\t\t}\n\t\t\tif (this.remoteExtensions && this.extensionManagementServerService.remoteExtensionManagementServer === server) {\n\t\t\t\treturn this.remoteExtensions.queryInstalled(this.getProductVersion());\n\t\t\t}\n\t\t\tif (this.webExtensions && this.extensionManagementServerService.webExtensionManagementServer === server) {\n\t\t\t\treturn this.webExtensions.queryInstalled(this.getProductVersion());\n\t\t\t}\n\t\t}\n\n\t\tif (this.localExtensions) {\n\t\t\ttry {\n\t\t\t\tawait this.localExtensions.queryInstalled(this.getProductVersion());\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t\tif (this.remoteExtensions) {\n\t\t\ttry {\n\t\t\t\tawait this.remoteExtensions.queryInstalled(this.getProductVersion());\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t\tif (this.webExtensions) {\n\t\t\ttry {\n\t\t\t\tawait this.webExtensions.queryInstalled(this.getProductVersion());\n\t\t\t}\n\t\t\tcatch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t\treturn this.local;\n\t}\n\n\tqueryGallery(token: CancellationToken): Promise<IPager<IExtension>>;\n\tqueryGallery(options: IQueryOptions, token: CancellationToken): Promise<IPager<IExtension>>;\n\tasync queryGallery(arg1: any, arg2?: any): Promise<IPager<IExtension>> {\n\t\tif (!this.galleryService.isEnabled()) {\n\t\t\treturn singlePagePager([]);\n\t\t}\n\n\t\tconst options: IQueryOptions = CancellationToken.isCancellationToken(arg1) ? {} : arg1;\n\t\tconst token: CancellationToken = CancellationToken.isCancellationToken(arg1) ? arg1 : arg2;\n\t\toptions.text = options.text ? this.resolveQueryText(options.text) : options.text;\n\t\toptions.includePreRelease = isUndefined(options.includePreRelease) ? this.extensionManagementService.preferPreReleases : options.includePreRelease;\n\n\t\tconst extensionsControlManifest = await this.extensionManagementService.getExtensionsControlManifest();\n\t\tconst pager = await this.galleryService.query(options, token);\n\t\tthis.syncInstalledExtensionsWithGallery(pager.firstPage);\n\t\treturn {\n\t\t\tfirstPage: pager.firstPage.map(gallery => this.fromGallery(gallery, extensionsControlManifest)),\n\t\t\ttotal: pager.total,\n\t\t\tpageSize: pager.pageSize,\n\t\t\tgetPage: async (pageIndex, token) => {\n\t\t\t\tconst page = await pager.getPage(pageIndex, token);\n\t\t\t\tthis.syncInstalledExtensionsWithGallery(page);\n\t\t\t\treturn page.map(gallery => this.fromGallery(gallery, extensionsControlManifest));\n\t\t\t}\n\t\t};\n\t}\n\n\tgetExtensions(extensionInfos: IExtensionInfo[], token: CancellationToken): Promise<IExtension[]>;\n\tgetExtensions(extensionInfos: IExtensionInfo[], options: IExtensionQueryOptions, token: CancellationToken): Promise<IExtension[]>;\n\tasync getExtensions(extensionInfos: IExtensionInfo[], arg1: any, arg2?: any): Promise<IExtension[]> {\n\t\tif (!this.galleryService.isEnabled()) {\n\t\t\treturn [];\n\t\t}\n\n\t\textensionInfos.forEach(e => e.preRelease = e.preRelease ?? this.extensionManagementService.preferPreReleases);\n\t\tconst extensionsControlManifest = await this.extensionManagementService.getExtensionsControlManifest();\n\t\tconst galleryExtensions = await this.galleryService.getExtensions(extensionInfos, arg1, arg2);\n\t\tthis.syncInstalledExtensionsWithGallery(galleryExtensions);\n\t\treturn galleryExtensions.map(gallery => this.fromGallery(gallery, extensionsControlManifest));\n\t}\n\n\tasync getResourceExtensions(locations: URI[], isWorkspaceScoped: boolean): Promise<IExtension[]> {\n\t\tconst resourceExtensions = await this.extensionManagementService.getExtensions(locations);\n\t\treturn resourceExtensions.map(resourceExtension => this.getInstalledExtensionMatchingLocation(resourceExtension.location)\n\t\t\t?? this.instantiationService.createInstance(Extension, ext => this.getExtensionState(ext), ext => this.getRuntimeState(ext), undefined, undefined, undefined, { resourceExtension, isWorkspaceScoped }));\n\t}\n\n\tprivate onDidDismissedNotificationsValueChange(): void {\n\t\tif (\n\t\t\tthis.dismissedNotificationsValue !== this.getDismissedNotificationsValue() /* This checks if current window changed the value or not */\n\t\t) {\n\t\t\tthis._dismissedNotificationsValue = undefined;\n\t\t\tthis.updateExtensionsNotificaiton();\n\t\t}\n\t}\n\n\tprivate updateExtensionsNotificaiton(): void {\n\t\tconst computedNotificiations = this.computeExtensionsNotifications();\n\t\tconst dismissedNotifications: string[] = [];\n\n\t\tlet extensionsNotification: IExtensionsNotification & { key: string } | undefined;\n\t\tif (computedNotificiations.length) {\n\t\t\t// populate dismissed notifications with the ones that are still valid\n\t\t\tfor (const dismissedNotification of this.getDismissedNotifications()) {\n\t\t\t\tif (computedNotificiations.some(e => e.key === dismissedNotification)) {\n\t\t\t\t\tdismissedNotifications.push(dismissedNotification);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!dismissedNotifications.includes(computedNotificiations[0].key)) {\n\t\t\t\textensionsNotification = {\n\t\t\t\t\tmessage: computedNotificiations[0].message,\n\t\t\t\t\tseverity: computedNotificiations[0].severity,\n\t\t\t\t\textensions: computedNotificiations[0].extensions,\n\t\t\t\t\tkey: computedNotificiations[0].key,\n\t\t\t\t\tdismiss: () => {\n\t\t\t\t\t\tthis.setDismissedNotifications([...this.getDismissedNotifications(), computedNotificiations[0].key]);\n\t\t\t\t\t\tthis.updateExtensionsNotificaiton();\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tthis.setDismissedNotifications(dismissedNotifications);\n\n\t\tif (this.extensionsNotification?.key !== extensionsNotification?.key) {\n\t\t\tthis.extensionsNotification = extensionsNotification;\n\t\t\tthis._onDidChangeExtensionsNotification.fire(this.extensionsNotification);\n\t\t}\n\t}\n\n\tprivate computeExtensionsNotifications(): Array<Omit<IExtensionsNotification, 'dismiss'> & { key: string }> {\n\t\tconst computedNotificiations: Array<Omit<IExtensionsNotification, 'dismiss'> & { key: string }> = [];\n\n\t\tconst disallowedExtensions = this.local.filter(e => e.enablementState === EnablementState.DisabledByAllowlist);\n\t\tif (disallowedExtensions.length) {\n\t\t\tcomputedNotificiations.push({\n\t\t\t\tmessage: this.configurationService.inspect(AllowedExtensionsConfigKey).policy\n\t\t\t\t\t? nls.localize('disallowed extensions by policy', \"Some extensions are disabled because they are not allowed by your system administrator.\")\n\t\t\t\t\t: nls.localize('disallowed extensions', \"Some extensions are disabled because they are configured not to be allowed.\"),\n\t\t\t\tseverity: Severity.Warning,\n\t\t\t\textensions: disallowedExtensions,\n\t\t\t\tkey: 'disallowedExtensions:' + disallowedExtensions.sort((a, b) => a.identifier.id.localeCompare(b.identifier.id)).map(e => e.identifier.id.toLowerCase()).join('-'),\n\t\t\t});\n\t\t}\n\n\t\tconst invalidExtensions = this.local.filter(e => e.enablementState === EnablementState.DisabledByInvalidExtension && !e.isWorkspaceScoped);\n\t\tif (invalidExtensions.length) {\n\t\t\tif (invalidExtensions.some(e => e.local && e.local.manifest.engines?.vscode &&\n\t\t\t\t(!isEngineValid(e.local.manifest.engines.vscode, this.productService.version, this.productService.date) || areApiProposalsCompatible([...e.local.manifest.enabledApiProposals ?? []]))\n\t\t\t)) {\n\t\t\t\tcomputedNotificiations.push({\n\t\t\t\t\tmessage: nls.localize('incompatibleExtensions', \"Some extensions are disabled due to version incompatibility. Review and update them.\"),\n\t\t\t\t\tseverity: Severity.Warning,\n\t\t\t\t\textensions: invalidExtensions,\n\t\t\t\t\tkey: 'incompatibleExtensions:' + invalidExtensions.sort((a, b) => a.identifier.id.localeCompare(b.identifier.id)).map(e => `${e.identifier.id.toLowerCase()}@${e.local?.manifest.version}`).join('-'),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcomputedNotificiations.push({\n\t\t\t\t\tmessage: nls.localize('invalidExtensions', \"Invalid extensions detected. Review them.\"),\n\t\t\t\t\tseverity: Severity.Warning,\n\t\t\t\t\textensions: invalidExtensions,\n\t\t\t\t\tkey: 'invalidExtensions:' + invalidExtensions.sort((a, b) => a.identifier.id.localeCompare(b.identifier.id)).map(e => `${e.identifier.id.toLowerCase()}@${e.local?.manifest.version}`).join('-'),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst deprecatedExtensions = this.local.filter(e => !!e.deprecationInfo && e.local && this.extensionEnablementService.isEnabled(e.local));\n\t\tif (deprecatedExtensions.length) {\n\t\t\tcomputedNotificiations.push({\n\t\t\t\tmessage: nls.localize('deprecated extensions', \"Deprecated extensions detected. Review them and migrate to alternatives.\"),\n\t\t\t\tseverity: Severity.Warning,\n\t\t\t\textensions: deprecatedExtensions,\n\t\t\t\tkey: 'deprecatedExtensions:' + deprecatedExtensions.sort((a, b) => a.identifier.id.localeCompare(b.identifier.id)).map(e => e.identifier.id.toLowerCase()).join('-'),\n\t\t\t});\n\t\t}\n\n\t\treturn computedNotificiations;\n\t}\n\n\tgetExtensionsNotification(): IExtensionsNotification | undefined {\n\t\treturn this.extensionsNotification;\n\t}\n\n\tprivate resolveQueryText(text: string): string {\n\t\ttext = text.replace(/@web/g, `tag:\"${WEB_EXTENSION_TAG}\"`);\n\n\t\tconst extensionRegex = /\\bext:([^\\s]+)\\b/g;\n\t\tif (extensionRegex.test(text)) {\n\t\t\ttext = text.replace(extensionRegex, (m, ext) => {\n\n\t\t\t\t// Get curated keywords\n\t\t\t\tconst lookup = this.productService.extensionKeywords || {};\n\t\t\t\tconst keywords = lookup[ext] || [];\n\n\t\t\t\t// Get mode name\n\t\t\t\tconst languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(URI.file(`.${ext}`));\n\t\t\t\tconst languageName = languageId && this.languageService.getLanguageName(languageId);\n\t\t\t\tconst languageTag = languageName ? ` tag:\"${languageName}\"` : '';\n\n\t\t\t\t// Construct a rich query\n\t\t\t\treturn `tag:\"__ext_${ext}\" tag:\"__ext_.${ext}\" ${keywords.map(tag => `tag:\"${tag}\"`).join(' ')}${languageTag} tag:\"${ext}\"`;\n\t\t\t});\n\t\t}\n\t\treturn text.substr(0, 350);\n\t}\n\n\tprivate fromGallery(gallery: IGalleryExtension, extensionsControlManifest: IExtensionsControlManifest): IExtension {\n\t\tlet extension = this.getInstalledExtensionMatchingGallery(gallery);\n\t\tif (!extension) {\n\t\t\textension = this.instantiationService.createInstance(Extension, ext => this.getExtensionState(ext), ext => this.getRuntimeState(ext), undefined, undefined, gallery, undefined);\n\t\t\t(<Extension>extension).setExtensionsControlManifest(extensionsControlManifest);\n\t\t}\n\t\treturn extension;\n\t}\n\n\tprivate getInstalledExtensionMatchingGallery(gallery: IGalleryExtension): IExtension | null {\n\t\tfor (const installed of this.local) {\n\t\t\tif (installed.identifier.uuid) { // Installed from Gallery\n\t\t\t\tif (installed.identifier.uuid === gallery.identifier.uuid) {\n\t\t\t\t\treturn installed;\n\t\t\t\t}\n\t\t\t} else if (installed.local?.source !== 'resource') {\n\t\t\t\tif (areSameExtensions(installed.identifier, gallery.identifier)) { // Installed from other sources\n\t\t\t\t\treturn installed;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate getInstalledExtensionMatchingLocation(location: URI): IExtension | null {\n\t\treturn this.local.find(e => e.local && this.uriIdentityService.extUri.isEqualOrParent(location, e.local?.location)) ?? null;\n\t}\n\n\tasync open(extension: IExtension | string, options?: IExtensionEditorOptions): Promise<void> {\n\t\tif (typeof extension === 'string') {\n\t\t\tconst id = extension;\n\t\t\textension = this.installed.find(e => areSameExtensions(e.identifier, { id })) ?? (await this.getExtensions([{ id: extension }], CancellationToken.None))[0];\n\t\t}\n\t\tif (!extension) {\n\t\t\tthrow new Error(`Extension not found. ${extension}`);\n\t\t}\n\t\tawait this.editorService.openEditor(this.instantiationService.createInstance(ExtensionsInput, extension), options, options?.sideByside ? SIDE_GROUP : ACTIVE_GROUP);\n\t}\n\n\tasync openSearch(searchValue: string, preserveFoucs?: boolean): Promise<void> {\n\t\tconst viewPaneContainer = (await this.viewsService.openViewContainer(VIEWLET_ID, true))?.getViewPaneContainer() as IExtensionsViewPaneContainer;\n\t\tviewPaneContainer.search(searchValue);\n\t\tif (!preserveFoucs) {\n\t\t\tviewPaneContainer.focus();\n\t\t}\n\t}\n\n\tgetExtensionRuntimeStatus(extension: IExtension): IExtensionRuntimeStatus | undefined {\n\t\tconst extensionsStatus = this.extensionService.getExtensionsStatus();\n\t\tfor (const id of Object.keys(extensionsStatus)) {\n\t\t\tif (areSameExtensions({ id }, extension.identifier)) {\n\t\t\t\treturn extensionsStatus[id];\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync updateRunningExtensions(message = nls.localize('restart', \"Changing extension enablement\"), auto: boolean = false): Promise<void> {\n\t\tconst toAdd: ILocalExtension[] = [];\n\t\tconst toRemove: string[] = [];\n\n\t\tconst extensionsToCheck = [...this.local];\n\t\tfor (const extension of extensionsToCheck) {\n\t\t\tconst runtimeState = extension.runtimeState;\n\t\t\tif (!runtimeState || runtimeState.action !== ExtensionRuntimeActionType.RestartExtensions) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (extension.state === ExtensionState.Uninstalled) {\n\t\t\t\ttoRemove.push(extension.identifier.id);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!extension.local) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst isEnabled = this.extensionEnablementService.isEnabled(extension.local);\n\t\t\tif (isEnabled) {\n\t\t\t\tconst runningExtension = this.extensionService.extensions.find(e => areSameExtensions({ id: e.identifier.value, uuid: e.uuid }, extension.identifier));\n\t\t\t\tif (runningExtension) {\n\t\t\t\t\ttoRemove.push(runningExtension.identifier.value);\n\t\t\t\t}\n\t\t\t\ttoAdd.push(extension.local);\n\t\t\t} else {\n\t\t\t\ttoRemove.push(extension.identifier.id);\n\t\t\t}\n\t\t}\n\n\t\tfor (const extension of this.extensionService.extensions) {\n\t\t\tif (extension.isUnderDevelopment) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (extensionsToCheck.some(e => areSameExtensions({ id: extension.identifier.value, uuid: extension.uuid }, e.local?.identifier ?? e.identifier))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// Extension is running but doesn't exist locally. Remove it from running extensions.\n\t\t\ttoRemove.push(extension.identifier.value);\n\t\t}\n\n\t\tif (toAdd.length || toRemove.length) {\n\t\t\tif (await this.extensionService.stopExtensionHosts(message, auto)) {\n\t\t\t\tawait this.extensionService.startExtensionHosts({ toAdd, toRemove });\n\t\t\t\tif (auto) {\n\t\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\t\tseverity: Severity.Info,\n\t\t\t\t\t\tmessage: nls.localize('extensionsAutoRestart', \"Extensions were auto restarted to enable updates.\"),\n\t\t\t\t\t\tpriority: NotificationPriority.SILENT\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\ttype ExtensionsAutoRestartClassification = {\n\t\t\t\t\towner: 'sandy081';\n\t\t\t\t\tcomment: 'Report when extensions are auto restarted';\n\t\t\t\t\tcount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of extensions auto restarted' };\n\t\t\t\t\tauto: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the restart was triggered automatically' };\n\t\t\t\t};\n\t\t\t\ttype ExtensionsAutoRestartEvent = {\n\t\t\t\t\tcount: number;\n\t\t\t\t\tauto: boolean;\n\t\t\t\t};\n\t\t\t\tthis.telemetryService.publicLog2<ExtensionsAutoRestartEvent, ExtensionsAutoRestartClassification>('extensions:autorestart', { count: toAdd.length + toRemove.length, auto });\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getRuntimeState(extension: IExtension): ExtensionRuntimeState | undefined {\n\t\tconst isUninstalled = extension.state === ExtensionState.Uninstalled;\n\t\tconst runningExtension = this.extensionService.extensions.find(e => areSameExtensions({ id: e.identifier.value }, extension.identifier));\n\t\tconst reloadAction = this.extensionManagementServerService.remoteExtensionManagementServer ? ExtensionRuntimeActionType.ReloadWindow : ExtensionRuntimeActionType.RestartExtensions;\n\t\tconst reloadActionLabel = reloadAction === ExtensionRuntimeActionType.ReloadWindow ? nls.localize('reload', \"reload window\") : nls.localize('restart extensions', \"restart extensions\");\n\n\t\tif (isUninstalled) {\n\t\t\tconst canRemoveRunningExtension = runningExtension && this.extensionService.canRemoveExtension(runningExtension);\n\t\t\tconst isSameExtensionRunning = runningExtension\n\t\t\t\t&& (!extension.server || extension.server === this.extensionManagementServerService.getExtensionManagementServer(toExtension(runningExtension)))\n\t\t\t\t&& (!extension.resourceExtension || this.uriIdentityService.extUri.isEqual(extension.resourceExtension.location, runningExtension.extensionLocation));\n\t\t\tif (!canRemoveRunningExtension && isSameExtensionRunning && !runningExtension.isUnderDevelopment) {\n\t\t\t\treturn { action: reloadAction, reason: nls.localize('postUninstallTooltip', \"Please {0} to complete the uninstallation of this extension.\", reloadActionLabel) };\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t\tif (extension.local) {\n\t\t\tconst isSameExtensionRunning = runningExtension && extension.server === this.extensionManagementServerService.getExtensionManagementServer(toExtension(runningExtension));\n\t\t\tconst isEnabled = this.extensionEnablementService.isEnabled(extension.local);\n\n\t\t\t// Extension is running\n\t\t\tif (runningExtension) {\n\t\t\t\tif (isEnabled) {\n\t\t\t\t\t// No Reload is required if extension can run without reload\n\t\t\t\t\tif (this.extensionService.canAddExtension(toExtensionDescription(extension.local))) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tconst runningExtensionServer = this.extensionManagementServerService.getExtensionManagementServer(toExtension(runningExtension));\n\n\t\t\t\t\tif (isSameExtensionRunning) {\n\t\t\t\t\t\t// Different version or target platform of same extension is running. Requires reload to run the current version\n\t\t\t\t\t\tif (!runningExtension.isUnderDevelopment && (extension.version !== runningExtension.version || extension.local.targetPlatform !== runningExtension.targetPlatform)) {\n\t\t\t\t\t\t\tconst productCurrentVersion = this.getProductCurrentVersion();\n\t\t\t\t\t\t\tconst productUpdateVersion = this.getProductUpdateVersion();\n\t\t\t\t\t\t\tif (productUpdateVersion\n\t\t\t\t\t\t\t\t&& !isEngineValid(extension.local.manifest.engines.vscode, productCurrentVersion.version, productCurrentVersion.date)\n\t\t\t\t\t\t\t\t&& isEngineValid(extension.local.manifest.engines.vscode, productUpdateVersion.version, productUpdateVersion.date)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst state = this.updateService.state;\n\t\t\t\t\t\t\t\tif (state.type === StateType.AvailableForDownload) {\n\t\t\t\t\t\t\t\t\treturn { action: ExtensionRuntimeActionType.DownloadUpdate, reason: nls.localize('postUpdateDownloadTooltip', \"Please update {0} to enable the updated extension.\", this.productService.nameLong) };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (state.type === StateType.Downloaded) {\n\t\t\t\t\t\t\t\t\treturn { action: ExtensionRuntimeActionType.ApplyUpdate, reason: nls.localize('postUpdateUpdateTooltip', \"Please update {0} to enable the updated extension.\", this.productService.nameLong) };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (state.type === StateType.Ready) {\n\t\t\t\t\t\t\t\t\treturn { action: ExtensionRuntimeActionType.QuitAndInstall, reason: nls.localize('postUpdateRestartTooltip', \"Please restart {0} to enable the updated extension.\", this.productService.nameLong) };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('postUpdateTooltip', \"Please {0} to enable the updated extension.\", reloadActionLabel) };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.extensionsServers.length > 1) {\n\t\t\t\t\t\t\tconst extensionInOtherServer = this.installed.filter(e => areSameExtensions(e.identifier, extension.identifier) && e.server !== extension.server)[0];\n\t\t\t\t\t\t\tif (extensionInOtherServer) {\n\t\t\t\t\t\t\t\t// This extension prefers to run on UI/Local side but is running in remote\n\t\t\t\t\t\t\t\tif (runningExtensionServer === this.extensionManagementServerService.remoteExtensionManagementServer && this.extensionManifestPropertiesService.prefersExecuteOnUI(extension.local.manifest) && extensionInOtherServer.server === this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('enable locally', \"Please {0} to enable this extension locally.\", reloadActionLabel) };\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// This extension prefers to run on Workspace/Remote side but is running in local\n\t\t\t\t\t\t\t\tif (runningExtensionServer === this.extensionManagementServerService.localExtensionManagementServer && this.extensionManifestPropertiesService.prefersExecuteOnWorkspace(extension.local.manifest) && extensionInOtherServer.server === this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\t\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('enable remote', \"Please {0} to enable this extension in {1}.\", reloadActionLabel, this.extensionManagementServerService.remoteExtensionManagementServer?.label) };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.localExtensionManagementServer && runningExtensionServer === this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\t\t\t\t\t// This extension prefers to run on UI/Local side but is running in remote\n\t\t\t\t\t\t\tif (this.extensionManifestPropertiesService.prefersExecuteOnUI(extension.local.manifest)) {\n\t\t\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('postEnableTooltip', \"Please {0} to enable this extension.\", reloadActionLabel) };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.remoteExtensionManagementServer && runningExtensionServer === this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\t\t\t\t// This extension prefers to run on Workspace/Remote side but is running in local\n\t\t\t\t\t\t\tif (this.extensionManifestPropertiesService.prefersExecuteOnWorkspace(extension.local.manifest)) {\n\t\t\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('postEnableTooltip', \"Please {0} to enable this extension.\", reloadActionLabel) };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\tif (isSameExtensionRunning) {\n\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('postDisableTooltip', \"Please {0} to disable this extension.\", reloadActionLabel) };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// Extension is not running\n\t\t\telse {\n\t\t\t\tif (isEnabled && !this.extensionService.canAddExtension(toExtensionDescription(extension.local))) {\n\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('postEnableTooltip', \"Please {0} to enable this extension.\", reloadActionLabel) };\n\t\t\t\t}\n\n\t\t\t\tconst otherServer = extension.server ? extension.server === this.extensionManagementServerService.localExtensionManagementServer ? this.extensionManagementServerService.remoteExtensionManagementServer : this.extensionManagementServerService.localExtensionManagementServer : null;\n\t\t\t\tif (otherServer && extension.enablementState === EnablementState.DisabledByExtensionKind) {\n\t\t\t\t\tconst extensionInOtherServer = this.local.filter(e => areSameExtensions(e.identifier, extension.identifier) && e.server === otherServer)[0];\n\t\t\t\t\t// Same extension in other server exists and\n\t\t\t\t\tif (extensionInOtherServer && extensionInOtherServer.local && this.extensionEnablementService.isEnabled(extensionInOtherServer.local)) {\n\t\t\t\t\t\treturn { action: reloadAction, reason: nls.localize('postEnableTooltip', \"Please {0} to enable this extension.\", reloadActionLabel) };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getPrimaryExtension(extensions: IExtension[]): IExtension {\n\t\tif (extensions.length === 1) {\n\t\t\treturn extensions[0];\n\t\t}\n\n\t\tconst enabledExtensions = extensions.filter(e => e.local && this.extensionEnablementService.isEnabled(e.local));\n\t\tif (enabledExtensions.length === 1) {\n\t\t\treturn enabledExtensions[0];\n\t\t}\n\n\t\tconst extensionsToChoose = enabledExtensions.length ? enabledExtensions : extensions;\n\t\tconst manifest = extensionsToChoose.find(e => e.local && e.local.manifest)?.local?.manifest;\n\n\t\t// Manifest is not found which should not happen.\n\t\t// In which case return the first extension.\n\t\tif (!manifest) {\n\t\t\treturn extensionsToChoose[0];\n\t\t}\n\n\t\tconst extensionKinds = this.extensionManifestPropertiesService.getExtensionKind(manifest);\n\n\t\tlet extension = extensionsToChoose.find(extension => {\n\t\t\tfor (const extensionKind of extensionKinds) {\n\t\t\t\tswitch (extensionKind) {\n\t\t\t\t\tcase 'ui':\n\t\t\t\t\t\t/* UI extension is chosen only if it is installed locally */\n\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tcase 'workspace':\n\t\t\t\t\t\t/* Choose remote workspace extension if exists */\n\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tcase 'web':\n\t\t\t\t\t\t/* Choose web extension if exists */\n\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tif (!extension && this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\textension = extensionsToChoose.find(extension => {\n\t\t\t\tfor (const extensionKind of extensionKinds) {\n\t\t\t\t\tswitch (extensionKind) {\n\t\t\t\t\t\tcase 'workspace':\n\t\t\t\t\t\t\t/* Choose local workspace extension if exists */\n\t\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\tcase 'web':\n\t\t\t\t\t\t\t/* Choose local web extension if exists */\n\t\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\n\t\tif (!extension && this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\textension = extensionsToChoose.find(extension => {\n\t\t\t\tfor (const extensionKind of extensionKinds) {\n\t\t\t\t\tswitch (extensionKind) {\n\t\t\t\t\t\tcase 'web':\n\t\t\t\t\t\t\t/* Choose web extension if exists */\n\t\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\n\t\tif (!extension && this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\textension = extensionsToChoose.find(extension => {\n\t\t\t\tfor (const extensionKind of extensionKinds) {\n\t\t\t\t\tswitch (extensionKind) {\n\t\t\t\t\t\tcase 'web':\n\t\t\t\t\t\t\t/* Choose remote web extension if exists */\n\t\t\t\t\t\t\tif (extension.server === this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\n\t\treturn extension || extensions[0];\n\t}\n\n\tprivate getExtensionState(extension: Extension): ExtensionState {\n\t\tif (this.installing.some(i => areSameExtensions(i.identifier, extension.identifier) && (!extension.server || i.server === extension.server))) {\n\t\t\treturn ExtensionState.Installing;\n\t\t}\n\t\tif (this.remoteExtensions) {\n\t\t\tconst state = this.remoteExtensions.getExtensionState(extension);\n\t\t\tif (state !== ExtensionState.Uninstalled) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t}\n\t\tif (this.webExtensions) {\n\t\t\tconst state = this.webExtensions.getExtensionState(extension);\n\t\t\tif (state !== ExtensionState.Uninstalled) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t}\n\t\tif (this.localExtensions) {\n\t\t\treturn this.localExtensions.getExtensionState(extension);\n\t\t}\n\t\treturn ExtensionState.Uninstalled;\n\t}\n\n\tasync checkForUpdates(reason?: string, onlyBuiltin?: boolean): Promise<void> {\n\t\tif (reason) {\n\t\t\tthis.logService.trace(`[Extensions]: Checking for updates. Reason: ${reason}`);\n\t\t} else {\n\t\t\tthis.logService.trace(`[Extensions]: Checking for updates`);\n\t\t}\n\t\tif (!this.galleryService.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tconst extensions: Extensions[] = [];\n\t\tif (this.localExtensions) {\n\t\t\textensions.push(this.localExtensions);\n\t\t}\n\t\tif (this.remoteExtensions) {\n\t\t\textensions.push(this.remoteExtensions);\n\t\t}\n\t\tif (this.webExtensions) {\n\t\t\textensions.push(this.webExtensions);\n\t\t}\n\t\tif (!extensions.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst infos: IExtensionInfo[] = [];\n\t\tfor (const installed of this.local) {\n\t\t\tif (onlyBuiltin && !installed.isBuiltin) {\n\t\t\t\t// Skip if check updates only for builtin extensions and current extension is not builtin.\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (installed.isBuiltin && !installed.local?.pinned && (installed.type === ExtensionType.System || !installed.local?.identifier.uuid)) {\n\t\t\t\t// Skip checking updates for a builtin extension if it is a system extension or if it does not has Marketplace identifier\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (installed.local?.source === 'resource') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tinfos.push({ ...installed.identifier, preRelease: !!installed.local?.preRelease });\n\t\t}\n\t\tif (infos.length) {\n\t\t\tconst targetPlatform = await extensions[0].server.extensionManagementService.getTargetPlatform();\n\t\t\ttype GalleryServiceUpdatesCheckClassification = {\n\t\t\t\towner: 'sandy081';\n\t\t\t\tcomment: 'Report when a request is made to check for updates of extensions';\n\t\t\t\tcount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of extensions to check update' };\n\t\t\t};\n\t\t\ttype GalleryServiceUpdatesCheckEvent = {\n\t\t\t\tcount: number;\n\t\t\t};\n\t\t\tthis.telemetryService.publicLog2<GalleryServiceUpdatesCheckEvent, GalleryServiceUpdatesCheckClassification>('galleryService:checkingForUpdates', {\n\t\t\t\tcount: infos.length,\n\t\t\t});\n\t\t\tthis.logService.trace(`Checking updates for extensions`, infos.map(e => e.id).join(', '));\n\t\t\tconst galleryExtensions = await this.galleryService.getExtensions(infos, { targetPlatform, compatible: true, productVersion: this.getProductVersion() }, CancellationToken.None);\n\t\t\tif (galleryExtensions.length) {\n\t\t\t\tawait this.syncInstalledExtensionsWithGallery(galleryExtensions, infos);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync updateAll(): Promise<InstallExtensionResult[]> {\n\t\tconst toUpdate: InstallExtensionInfo[] = [];\n\t\tthis.outdated.forEach((extension) => {\n\t\t\tif (extension.gallery) {\n\t\t\t\ttoUpdate.push({\n\t\t\t\t\textension: extension.gallery,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toperation: InstallOperation.Update,\n\t\t\t\t\t\tinstallPreReleaseVersion: extension.local?.isPreReleaseVersion,\n\t\t\t\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource,\n\t\t\t\t\t\tisApplicationScoped: extension.local?.isApplicationScoped,\n\t\t\t\t\t\tcontext: { [EXTENSION_INSTALL_SKIP_PUBLISHER_TRUST_CONTEXT]: true }\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\treturn this.extensionManagementService.installGalleryExtensions(toUpdate);\n\t}\n\n\tasync downloadVSIX(extensionId: string, versionKind: 'prerelease' | 'release' | 'any'): Promise<void> {\n\t\tlet version: IGalleryExtensionVersion | undefined;\n\t\tif (versionKind === 'any') {\n\t\t\tversion = await this.pickVersionToDownload(extensionId);\n\t\t\tif (!version) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst extensionInfo = version ? { id: extensionId, version: version.version } : { id: extensionId, preRelease: versionKind === 'prerelease' };\n\t\tconst queryOptions: IExtensionQueryOptions = version ? {} : { compatible: true };\n\n\t\tlet [galleryExtension] = await this.galleryService.getExtensions([extensionInfo], queryOptions, CancellationToken.None);\n\t\tif (!galleryExtension) {\n\t\t\tthrow new Error(nls.localize('extension not found', \"Extension '{0}' not found.\", extensionId));\n\t\t}\n\n\t\tlet targetPlatform = galleryExtension.properties.targetPlatform;\n\t\tconst options = [];\n\t\tfor (const targetPlatform of version?.targetPlatforms ?? galleryExtension.allTargetPlatforms) {\n\t\t\tif (targetPlatform !== TargetPlatform.UNKNOWN && targetPlatform !== TargetPlatform.UNIVERSAL) {\n\t\t\t\toptions.push({\n\t\t\t\t\tlabel: targetPlatform === TargetPlatform.UNDEFINED ? nls.localize('allplatforms', \"All Platforms\") : TargetPlatformToString(targetPlatform),\n\t\t\t\t\tid: targetPlatform\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (options.length > 1) {\n\t\t\tconst message = nls.localize('platform placeholder', \"Please select the platform for which you want to download the VSIX\");\n\t\t\tconst option = await this.quickInputService.pick(options.sort((a, b) => a.label.localeCompare(b.label)), { placeHolder: message });\n\t\t\tif (!option) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttargetPlatform = option.id;\n\t\t}\n\n\t\tif (targetPlatform !== galleryExtension.properties.targetPlatform) {\n\t\t\t[galleryExtension] = await this.galleryService.getExtensions([extensionInfo], { ...queryOptions, targetPlatform }, CancellationToken.None);\n\t\t}\n\n\t\tconst result = await this.fileDialogService.showOpenDialog({\n\t\t\ttitle: nls.localize('download title', \"Select folder to download the VSIX\"),\n\t\t\tcanSelectFiles: false,\n\t\t\tcanSelectFolders: true,\n\t\t\tcanSelectMany: false,\n\t\t\topenLabel: nls.localize('download', \"Download\"),\n\t\t});\n\n\t\tif (!result?.[0]) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.progressService.withProgress({ location: ProgressLocation.Notification }, async progress => {\n\t\t\ttry {\n\t\t\t\tprogress.report({ message: nls.localize('downloading...', \"Downloading VSIX...\") });\n\t\t\t\tconst name = `${galleryExtension.identifier.id}-${galleryExtension.version}${targetPlatform !== TargetPlatform.UNDEFINED && targetPlatform !== TargetPlatform.UNIVERSAL && targetPlatform !== TargetPlatform.UNKNOWN ? `-${targetPlatform}` : ''}.vsix`;\n\t\t\t\tawait this.galleryService.download(galleryExtension, this.uriIdentityService.extUri.joinPath(result[0], name), InstallOperation.None);\n\t\t\t\tthis.notificationService.info(nls.localize('download.completed', \"Successfully downloaded the VSIX\"));\n\t\t\t} catch (error) {\n\t\t\t\tthis.notificationService.error(nls.localize('download.failed', \"Error while downloading the VSIX: {0}\", getErrorMessage(error)));\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async pickVersionToDownload(extensionId: string): Promise<IGalleryExtensionVersion | undefined> {\n\t\tconst allVersions = await this.galleryService.getAllVersions({ id: extensionId });\n\t\tif (!allVersions.length) {\n\t\t\tawait this.dialogService.info(nls.localize('no versions', \"This extension has no other versions.\"));\n\t\t\treturn;\n\t\t}\n\n\t\tconst picks = allVersions.map((v, i) => {\n\t\t\treturn {\n\t\t\t\tid: v.version,\n\t\t\t\tlabel: v.version,\n\t\t\t\tdescription: `${fromNow(new Date(Date.parse(v.date)), true)}${v.isPreReleaseVersion ? ` (${nls.localize('pre-release', \"pre-release\")})` : ''}`,\n\t\t\t\tariaLabel: `${v.isPreReleaseVersion ? 'Pre-Release version' : 'Release version'} ${v.version}`,\n\t\t\t\tdata: v,\n\t\t\t};\n\t\t});\n\t\tconst pick = await this.quickInputService.pick(picks,\n\t\t\t{\n\t\t\t\tplaceHolder: nls.localize('selectVersion', \"Select Version to Download\"),\n\t\t\t\tmatchOnDetail: true\n\t\t\t});\n\t\treturn pick?.data;\n\t}\n\n\tprivate async syncInstalledExtensionsWithGallery(gallery: IGalleryExtension[], flagExtensionsMissingFromGallery?: IExtensionInfo[]): Promise<void> {\n\t\tconst extensions: Extensions[] = [];\n\t\tif (this.localExtensions) {\n\t\t\textensions.push(this.localExtensions);\n\t\t}\n\t\tif (this.remoteExtensions) {\n\t\t\textensions.push(this.remoteExtensions);\n\t\t}\n\t\tif (this.webExtensions) {\n\t\t\textensions.push(this.webExtensions);\n\t\t}\n\t\tif (!extensions.length) {\n\t\t\treturn;\n\t\t}\n\t\tawait Promise.allSettled(extensions.map(extensions => extensions.syncInstalledExtensionsWithGallery(gallery, this.getProductVersion(), flagExtensionsMissingFromGallery)));\n\t\tif (this.outdated.length) {\n\t\t\tthis.logService.info(`Auto updating outdated extensions.`, this.outdated.map(e => e.identifier.id).join(', '));\n\t\t\tthis.eventuallyAutoUpdateExtensions();\n\t\t}\n\t}\n\n\tprivate isAutoCheckUpdatesEnabled(): boolean {\n\t\treturn this.configurationService.getValue(AutoCheckUpdatesConfigurationKey);\n\t}\n\n\tprivate eventuallyCheckForUpdates(immediate = false): void {\n\t\tthis.updatesCheckDelayer.cancel();\n\t\tthis.updatesCheckDelayer.trigger(async () => {\n\t\t\tif (this.isAutoCheckUpdatesEnabled()) {\n\t\t\t\tawait this.checkForUpdates();\n\t\t\t}\n\t\t\tthis.eventuallyCheckForUpdates();\n\t\t}, immediate ? 0 : this.getUpdatesCheckInterval()).then(undefined, err => null);\n\t}\n\n\tprivate getUpdatesCheckInterval(): number {\n\t\tif (this.productService.quality === 'insider' && this.getProductUpdateVersion()) {\n\t\t\treturn 1000 * 60 * 60 * 1; // 1 hour\n\t\t}\n\t\treturn ExtensionsWorkbenchService.UpdatesCheckInterval;\n\t}\n\n\tprivate eventuallyAutoUpdateExtensions(): void {\n\t\tthis.autoUpdateDelayer.trigger(() => this.autoUpdateExtensions())\n\t\t\t.then(undefined, err => null);\n\t}\n\n\tprivate async autoUpdateBuiltinExtensions(): Promise<void> {\n\t\tawait this.checkForUpdates(undefined, true);\n\t\tconst toUpdate = this.outdated.filter(e => e.isBuiltin);\n\t\tawait Promises.settled(toUpdate.map(e => this.install(e, e.local?.preRelease ? { installPreReleaseVersion: true } : undefined)));\n\t}\n\n\tprivate async syncPinnedBuiltinExtensions(): Promise<void> {\n\t\tconst infos: IExtensionInfo[] = [];\n\t\tfor (const installed of this.local) {\n\t\t\tif (installed.isBuiltin && installed.local?.pinned && installed.local?.identifier.uuid) {\n\t\t\t\tinfos.push({ ...installed.identifier, version: installed.version });\n\t\t\t}\n\t\t}\n\t\tif (infos.length) {\n\t\t\tconst galleryExtensions = await this.galleryService.getExtensions(infos, CancellationToken.None);\n\t\t\tif (galleryExtensions.length) {\n\t\t\t\tawait this.syncInstalledExtensionsWithGallery(galleryExtensions);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async autoUpdateExtensions(): Promise<void> {\n\t\tconst toUpdate: IExtension[] = [];\n\t\tconst disabledAutoUpdate = [];\n\t\tconst consentRequired = [];\n\t\tfor (const extension of this.outdated) {\n\t\t\tif (!this.shouldAutoUpdateExtension(extension)) {\n\t\t\t\tdisabledAutoUpdate.push(extension.identifier.id);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (await this.shouldRequireConsentToUpdate(extension)) {\n\t\t\t\tconsentRequired.push(extension.identifier.id);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\ttoUpdate.push(extension);\n\t\t}\n\n\t\tif (disabledAutoUpdate.length) {\n\t\t\tthis.logService.trace('Auto update disabled for extensions', disabledAutoUpdate.join(', '));\n\t\t}\n\n\t\tif (consentRequired.length) {\n\t\t\tthis.logService.info('Auto update consent required for extensions', consentRequired.join(', '));\n\t\t}\n\n\t\tif (!toUpdate.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst productVersion = this.getProductVersion();\n\t\tawait Promises.settled(toUpdate.map(e => this.install(e, e.local?.preRelease ? { installPreReleaseVersion: true, productVersion } : { productVersion })));\n\t}\n\n\tprivate getProductVersion(): IProductVersion {\n\t\treturn this.getProductUpdateVersion() ?? this.getProductCurrentVersion();\n\t}\n\n\tprivate getProductCurrentVersion(): IProductVersion {\n\t\treturn { version: this.productService.version, date: this.productService.date };\n\t}\n\n\tprivate getProductUpdateVersion(): IProductVersion | undefined {\n\t\tswitch (this.updateService.state.type) {\n\t\t\tcase StateType.AvailableForDownload:\n\t\t\tcase StateType.Downloaded:\n\t\t\tcase StateType.Updating:\n\t\t\tcase StateType.Ready: {\n\t\t\t\tconst version = this.updateService.state.update.productVersion;\n\t\t\t\tif (version && semver.valid(version)) {\n\t\t\t\t\treturn { version, date: this.updateService.state.update.timestamp ? new Date(this.updateService.state.update.timestamp).toISOString() : undefined };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate shouldAutoUpdateExtension(extension: IExtension): boolean {\n\t\tif (extension.deprecationInfo?.disallowInstall) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst autoUpdateValue = this.getAutoUpdateValue();\n\n\t\tif (autoUpdateValue === false) {\n\t\t\tconst extensionsToAutoUpdate = this.getEnabledAutoUpdateExtensions();\n\t\t\tconst extensionId = extension.identifier.id.toLowerCase();\n\t\t\tif (extensionsToAutoUpdate.includes(extensionId)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (this.isAutoUpdateEnabledForPublisher(extension.publisher) && !extensionsToAutoUpdate.includes(`-${extensionId}`)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tif (extension.pinned) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst disabledAutoUpdateExtensions = this.getDisabledAutoUpdateExtensions();\n\t\tif (disabledAutoUpdateExtensions.includes(extension.identifier.id.toLowerCase())) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (autoUpdateValue === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (autoUpdateValue === 'onlyEnabledExtensions') {\n\t\t\treturn extension.enablementState !== EnablementState.DisabledGlobally && extension.enablementState !== EnablementState.DisabledWorkspace;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tasync shouldRequireConsentToUpdate(extension: IExtension): Promise<string | undefined> {\n\t\tif (!extension.outdated) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!extension.gallery || !extension.local) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (extension.local.identifier.uuid && extension.local.identifier.uuid !== extension.gallery.identifier.uuid) {\n\t\t\treturn nls.localize('consentRequiredToUpdateRepublishedExtension', \"The marketplace metadata of this extension changed, likely due to a re-publish.\");\n\t\t}\n\n\t\tif (!extension.local.manifest.engines.vscode || extension.local.manifest.main || extension.local.manifest.browser) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDefined(extension.gallery.properties?.executesCode)) {\n\t\t\tif (!extension.gallery.properties.executesCode) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tconst manifest = extension instanceof Extension\n\t\t\t\t? await extension.getGalleryManifest()\n\t\t\t\t: await this.galleryService.getManifest(extension.gallery, CancellationToken.None);\n\t\t\tif (!manifest?.main && !manifest?.browser) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\treturn nls.localize('consentRequiredToUpdate', \"The update for {0} extension introduces executable code, which is not present in the currently installed version.\", extension.displayName);\n\t}\n\n\tisAutoUpdateEnabledFor(extensionOrPublisher: IExtension | string): boolean {\n\t\tif (isString(extensionOrPublisher)) {\n\t\t\tif (EXTENSION_IDENTIFIER_REGEX.test(extensionOrPublisher)) {\n\t\t\t\tthrow new Error('Expected publisher string, found extension identifier');\n\t\t\t}\n\t\t\tif (this.isAutoUpdateEnabled()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn this.isAutoUpdateEnabledForPublisher(extensionOrPublisher);\n\t\t}\n\t\treturn this.shouldAutoUpdateExtension(extensionOrPublisher);\n\t}\n\n\tprivate isAutoUpdateEnabledForPublisher(publisher: string): boolean {\n\t\tconst publishersToAutoUpdate = this.getPublishersToAutoUpdate();\n\t\treturn publishersToAutoUpdate.includes(publisher.toLowerCase());\n\t}\n\n\tasync updateAutoUpdateEnablementFor(extensionOrPublisher: IExtension | string, enable: boolean): Promise<void> {\n\t\tif (this.isAutoUpdateEnabled()) {\n\t\t\tif (isString(extensionOrPublisher)) {\n\t\t\t\tthrow new Error('Expected extension, found publisher string');\n\t\t\t}\n\t\t\tconst disabledAutoUpdateExtensions = this.getDisabledAutoUpdateExtensions();\n\t\t\tconst extensionId = extensionOrPublisher.identifier.id.toLowerCase();\n\t\t\tconst extensionIndex = disabledAutoUpdateExtensions.indexOf(extensionId);\n\t\t\tif (enable) {\n\t\t\t\tif (extensionIndex !== -1) {\n\t\t\t\t\tdisabledAutoUpdateExtensions.splice(extensionIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (extensionIndex === -1) {\n\t\t\t\t\tdisabledAutoUpdateExtensions.push(extensionId);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setDisabledAutoUpdateExtensions(disabledAutoUpdateExtensions);\n\t\t\tif (enable && extensionOrPublisher.local && extensionOrPublisher.pinned) {\n\t\t\t\tawait this.extensionManagementService.updateMetadata(extensionOrPublisher.local, { pinned: false });\n\t\t\t}\n\t\t\tthis._onChange.fire(extensionOrPublisher);\n\t\t}\n\n\t\telse {\n\t\t\tconst enabledAutoUpdateExtensions = this.getEnabledAutoUpdateExtensions();\n\t\t\tif (isString(extensionOrPublisher)) {\n\t\t\t\tif (EXTENSION_IDENTIFIER_REGEX.test(extensionOrPublisher)) {\n\t\t\t\t\tthrow new Error('Expected publisher string, found extension identifier');\n\t\t\t\t}\n\t\t\t\textensionOrPublisher = extensionOrPublisher.toLowerCase();\n\t\t\t\tif (this.isAutoUpdateEnabledFor(extensionOrPublisher) !== enable) {\n\t\t\t\t\tif (enable) {\n\t\t\t\t\t\tenabledAutoUpdateExtensions.push(extensionOrPublisher);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (enabledAutoUpdateExtensions.includes(extensionOrPublisher)) {\n\t\t\t\t\t\t\tenabledAutoUpdateExtensions.splice(enabledAutoUpdateExtensions.indexOf(extensionOrPublisher), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setEnabledAutoUpdateExtensions(enabledAutoUpdateExtensions);\n\t\t\t\tfor (const e of this.installed) {\n\t\t\t\t\tif (e.publisher.toLowerCase() === extensionOrPublisher) {\n\t\t\t\t\t\tthis._onChange.fire(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst extensionId = extensionOrPublisher.identifier.id.toLowerCase();\n\t\t\t\tconst enableAutoUpdatesForPublisher = this.isAutoUpdateEnabledFor(extensionOrPublisher.publisher.toLowerCase());\n\t\t\t\tconst enableAutoUpdatesForExtension = enabledAutoUpdateExtensions.includes(extensionId);\n\t\t\t\tconst disableAutoUpdatesForExtension = enabledAutoUpdateExtensions.includes(`-${extensionId}`);\n\n\t\t\t\tif (enable) {\n\t\t\t\t\tif (disableAutoUpdatesForExtension) {\n\t\t\t\t\t\tenabledAutoUpdateExtensions.splice(enabledAutoUpdateExtensions.indexOf(`-${extensionId}`), 1);\n\t\t\t\t\t}\n\t\t\t\t\tif (enableAutoUpdatesForPublisher) {\n\t\t\t\t\t\tif (enableAutoUpdatesForExtension) {\n\t\t\t\t\t\t\tenabledAutoUpdateExtensions.splice(enabledAutoUpdateExtensions.indexOf(extensionId), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!enableAutoUpdatesForExtension) {\n\t\t\t\t\t\t\tenabledAutoUpdateExtensions.push(extensionId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Disable Auto Updates\n\t\t\t\telse {\n\t\t\t\t\tif (enableAutoUpdatesForExtension) {\n\t\t\t\t\t\tenabledAutoUpdateExtensions.splice(enabledAutoUpdateExtensions.indexOf(extensionId), 1);\n\t\t\t\t\t}\n\t\t\t\t\tif (enableAutoUpdatesForPublisher) {\n\t\t\t\t\t\tif (!disableAutoUpdatesForExtension) {\n\t\t\t\t\t\t\tenabledAutoUpdateExtensions.push(`-${extensionId}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (disableAutoUpdatesForExtension) {\n\t\t\t\t\t\t\tenabledAutoUpdateExtensions.splice(enabledAutoUpdateExtensions.indexOf(`-${extensionId}`), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setEnabledAutoUpdateExtensions(enabledAutoUpdateExtensions);\n\t\t\t\tthis._onChange.fire(extensionOrPublisher);\n\t\t\t}\n\t\t}\n\n\t\tif (enable) {\n\t\t\tthis.autoUpdateExtensions();\n\t\t}\n\t}\n\n\tprivate onDidSelectedExtensionToAutoUpdateValueChange(): void {\n\t\tif (\n\t\t\tthis.enabledAuotUpdateExtensionsValue !== this.getEnabledAutoUpdateExtensionsValue() /* This checks if current window changed the value or not */\n\t\t\t|| this.disabledAutoUpdateExtensionsValue !== this.getDisabledAutoUpdateExtensionsValue() /* This checks if current window changed the value or not */\n\t\t) {\n\t\t\tconst userExtensions = this.installed.filter(e => !e.isBuiltin);\n\t\t\tconst groupBy = (extensions: IExtension[]): IExtension[][] => {\n\t\t\t\tconst shouldAutoUpdate: IExtension[] = [];\n\t\t\t\tconst shouldNotAutoUpdate: IExtension[] = [];\n\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\tif (this.shouldAutoUpdateExtension(extension)) {\n\t\t\t\t\t\tshouldAutoUpdate.push(extension);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshouldNotAutoUpdate.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [shouldAutoUpdate, shouldNotAutoUpdate];\n\t\t\t};\n\n\t\t\tconst [wasShouldAutoUpdate, wasShouldNotAutoUpdate] = groupBy(userExtensions);\n\t\t\tthis._enabledAutoUpdateExtensionsValue = undefined;\n\t\t\tthis._disabledAutoUpdateExtensionsValue = undefined;\n\t\t\tconst [shouldAutoUpdate, shouldNotAutoUpdate] = groupBy(userExtensions);\n\n\t\t\tfor (const e of wasShouldAutoUpdate ?? []) {\n\t\t\t\tif (shouldNotAutoUpdate?.includes(e)) {\n\t\t\t\t\tthis._onChange.fire(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const e of wasShouldNotAutoUpdate ?? []) {\n\t\t\t\tif (shouldAutoUpdate?.includes(e)) {\n\t\t\t\t\tthis._onChange.fire(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync canInstall(extension: IExtension): Promise<true | IMarkdownString> {\n\t\tif (!(extension instanceof Extension)) {\n\t\t\treturn new MarkdownString().appendText(nls.localize('not an extension', \"The provided object is not an extension.\"));\n\t\t}\n\n\t\tif (extension.isMalicious) {\n\t\t\treturn new MarkdownString().appendText(nls.localize('malicious', \"This extension is reported to be problematic.\"));\n\t\t}\n\n\t\tif (extension.deprecationInfo?.disallowInstall) {\n\t\t\treturn new MarkdownString().appendText(nls.localize('disallowed', \"This extension is disallowed to be installed.\"));\n\t\t}\n\n\t\tif (extension.gallery) {\n\t\t\tif (!extension.gallery.isSigned && shouldRequireRepositorySignatureFor(extension.private, await this.extensionGalleryManifestService.getExtensionGalleryManifest())) {\n\t\t\t\treturn new MarkdownString().appendText(nls.localize('not signed', \"This extension is not signed.\"));\n\t\t\t}\n\n\t\t\tconst localResult = this.localExtensions ? await this.localExtensions.canInstall(extension.gallery) : undefined;\n\t\t\tif (localResult === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst remoteResult = this.remoteExtensions ? await this.remoteExtensions.canInstall(extension.gallery) : undefined;\n\t\t\tif (remoteResult === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst webResult = this.webExtensions ? await this.webExtensions.canInstall(extension.gallery) : undefined;\n\t\t\tif (webResult === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn localResult ?? remoteResult ?? webResult ?? new MarkdownString().appendText(nls.localize('cannot be installed', \"Cannot install the '{0}' extension because it is not available in this setup.\", extension.displayName ?? extension.identifier.id));\n\t\t}\n\n\t\tif (extension.resourceExtension && await this.extensionManagementService.canInstall(extension.resourceExtension) === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn new MarkdownString().appendText(nls.localize('cannot be installed', \"Cannot install the '{0}' extension because it is not available in this setup.\", extension.displayName ?? extension.identifier.id));\n\t}\n\n\tasync install(arg: string | URI | IExtension, installOptions: InstallExtensionOptions = {}, progressLocation?: ProgressLocation | string): Promise<IExtension> {\n\t\tlet installable: URI | IGalleryExtension | IResourceExtension | undefined;\n\t\tlet extension: IExtension | undefined;\n\t\tlet servers: IExtensionManagementServer[] | undefined;\n\n\t\tif (arg instanceof URI) {\n\t\t\tinstallable = arg;\n\t\t} else {\n\t\t\tlet installableInfo: IExtensionInfo | undefined;\n\t\t\tlet gallery: IGalleryExtension | undefined;\n\n\t\t\t// Install by id\n\t\t\tif (isString(arg)) {\n\t\t\t\textension = this.local.find(e => areSameExtensions(e.identifier, { id: arg }));\n\t\t\t\tif (!extension?.isBuiltin) {\n\t\t\t\t\tinstallableInfo = { id: arg, version: installOptions.version, preRelease: installOptions.installPreReleaseVersion ?? this.extensionManagementService.preferPreReleases };\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Install by gallery\n\t\t\telse if (arg.gallery) {\n\t\t\t\textension = arg;\n\t\t\t\tgallery = arg.gallery;\n\t\t\t\tif (installOptions.version && installOptions.version !== gallery?.version) {\n\t\t\t\t\tinstallableInfo = { id: extension.identifier.id, version: installOptions.version };\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Install by resource\n\t\t\telse if (arg.resourceExtension) {\n\t\t\t\textension = arg;\n\t\t\t\tinstallable = arg.resourceExtension;\n\t\t\t}\n\n\t\t\tif (installableInfo) {\n\t\t\t\tconst targetPlatform = extension?.server ? await extension.server.extensionManagementService.getTargetPlatform() : undefined;\n\t\t\t\tgallery = (await this.galleryService.getExtensions([installableInfo], { targetPlatform }, CancellationToken.None)).at(0);\n\t\t\t}\n\n\t\t\tif (!extension && gallery) {\n\t\t\t\textension = this.instantiationService.createInstance(Extension, ext => this.getExtensionState(ext), ext => this.getRuntimeState(ext), undefined, undefined, gallery, undefined);\n\t\t\t\t(<Extension>extension).setExtensionsControlManifest(await this.extensionManagementService.getExtensionsControlManifest());\n\t\t\t}\n\n\t\t\tif (extension?.isMalicious) {\n\t\t\t\tthrow new Error(nls.localize('malicious', \"This extension is reported to be problematic.\"));\n\t\t\t}\n\n\t\t\tif (gallery) {\n\t\t\t\t// If requested to install everywhere\n\t\t\t\t// then install the extension in all the servers where it is not installed\n\t\t\t\tif (installOptions.installEverywhere) {\n\t\t\t\t\tservers = [];\n\t\t\t\t\tconst installableServers = await this.extensionManagementService.getInstallableServers(gallery);\n\t\t\t\t\tfor (const extensionsServer of this.extensionsServers) {\n\t\t\t\t\t\tif (installableServers.includes(extensionsServer.server) && !extensionsServer.local.find(e => areSameExtensions(e.identifier, gallery.identifier))) {\n\t\t\t\t\t\t\tservers.push(extensionsServer.server);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// If requested to enable and extension is already installed\n\t\t\t\t// Check if the extension is disabled because of extension kind\n\t\t\t\t// If so, install the extension in the server that is compatible.\n\t\t\t\telse if (installOptions.enable && extension?.local) {\n\t\t\t\t\tservers = [];\n\t\t\t\t\tif (extension.enablementState === EnablementState.DisabledByExtensionKind) {\n\t\t\t\t\t\tconst [installableServer] = await this.extensionManagementService.getInstallableServers(gallery);\n\t\t\t\t\t\tif (installableServer) {\n\t\t\t\t\t\t\tservers.push(installableServer);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!servers || servers.length) {\n\t\t\t\tif (!installable) {\n\t\t\t\t\tif (!gallery) {\n\t\t\t\t\t\tconst id = isString(arg) ? arg : (<IExtension>arg).identifier.id;\n\t\t\t\t\t\tconst manifest = await this.extensionGalleryManifestService.getExtensionGalleryManifest();\n\t\t\t\t\t\tconst reportIssueUri = manifest ? getExtensionGalleryManifestResourceUri(manifest, ExtensionGalleryResourceType.ContactSupportUri) : undefined;\n\t\t\t\t\t\tconst reportIssueMessage = reportIssueUri ? nls.localize('report issue', \"If this issue persists, please report it at {0}\", reportIssueUri.toString()) : '';\n\t\t\t\t\t\tif (installOptions.version) {\n\t\t\t\t\t\t\tconst message = nls.localize('not found version', \"The extension '{0}' cannot be installed because the requested version '{1}' was not found.\", id, installOptions.version);\n\t\t\t\t\t\t\tthrow new ExtensionManagementError(reportIssueMessage ? `${message} ${reportIssueMessage}` : message, ExtensionManagementErrorCode.NotFound);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst message = nls.localize('not found', \"The extension '{0}' cannot be installed because it was not found.\", id);\n\t\t\t\t\t\t\tthrow new ExtensionManagementError(reportIssueMessage ? `${message} ${reportIssueMessage}` : message, ExtensionManagementErrorCode.NotFound);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinstallable = gallery;\n\t\t\t\t}\n\t\t\t\tif (installOptions.version) {\n\t\t\t\t\tinstallOptions.installGivenVersion = true;\n\t\t\t\t}\n\t\t\t\tif (extension?.isWorkspaceScoped) {\n\t\t\t\t\tinstallOptions.isWorkspaceScoped = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (installable) {\n\t\t\tif (installOptions.justification) {\n\t\t\t\tconst syncCheck = isUndefined(installOptions.isMachineScoped) && this.userDataSyncEnablementService.isEnabled() && this.userDataSyncEnablementService.isResourceEnabled(SyncResource.Extensions);\n\t\t\t\tconst buttons: IPromptButton<boolean>[] = [];\n\t\t\t\tbuttons.push({\n\t\t\t\t\tlabel: isString(installOptions.justification) || !installOptions.justification.action\n\t\t\t\t\t\t? nls.localize({ key: 'installButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Install Extension\")\n\t\t\t\t\t\t: nls.localize({ key: 'installButtonLabelWithAction', comment: ['&& denotes a mnemonic'] }, \"&&Install Extension and {0}\", installOptions.justification.action), run: () => true\n\t\t\t\t});\n\t\t\t\tif (!extension) {\n\t\t\t\t\tbuttons.push({ label: nls.localize('open', \"Open Extension\"), run: () => { this.open(extension!); return false; } });\n\t\t\t\t}\n\t\t\t\tconst result = await this.dialogService.prompt<boolean>({\n\t\t\t\t\ttitle: nls.localize('installExtensionTitle', \"Install Extension\"),\n\t\t\t\t\tmessage: extension ? nls.localize('installExtensionMessage', \"Would you like to install '{0}' extension from '{1}'?\", extension.displayName, extension.publisherDisplayName) : nls.localize('installVSIXMessage', \"Would you like to install the extension?\"),\n\t\t\t\t\tdetail: isString(installOptions.justification) ? installOptions.justification : installOptions.justification.reason,\n\t\t\t\t\tcancelButton: true,\n\t\t\t\t\tbuttons,\n\t\t\t\t\tcheckbox: syncCheck ? {\n\t\t\t\t\t\tlabel: nls.localize('sync extension', \"Sync this extension\"),\n\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t} : undefined,\n\t\t\t\t});\n\t\t\t\tif (!result.result) {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t\tif (syncCheck) {\n\t\t\t\t\tinstallOptions.isMachineScoped = !result.checkboxChecked;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (installable instanceof URI) {\n\t\t\t\textension = await this.doInstall(undefined, () => this.installFromVSIX(installable, installOptions), progressLocation);\n\t\t\t} else if (extension) {\n\t\t\t\tif (extension.resourceExtension) {\n\t\t\t\t\textension = await this.doInstall(extension, () => this.extensionManagementService.installResourceExtension(installable as IResourceExtension, installOptions), progressLocation);\n\t\t\t\t} else {\n\t\t\t\t\textension = await this.doInstall(extension, () => this.installFromGallery(extension!, installable as IGalleryExtension, installOptions, servers), progressLocation);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!extension) {\n\t\t\tthrow new Error(nls.localize('unknown', \"Unable to install extension\"));\n\t\t}\n\n\t\tif (installOptions.enable) {\n\t\t\tif (extension.enablementState === EnablementState.DisabledWorkspace || extension.enablementState === EnablementState.DisabledGlobally) {\n\t\t\t\tif (installOptions.justification) {\n\t\t\t\t\tconst result = await this.dialogService.confirm({\n\t\t\t\t\t\ttitle: nls.localize('enableExtensionTitle', \"Enable Extension\"),\n\t\t\t\t\t\tmessage: nls.localize('enableExtensionMessage', \"Would you like to enable '{0}' extension?\", extension.displayName),\n\t\t\t\t\t\tdetail: isString(installOptions.justification) ? installOptions.justification : installOptions.justification.reason,\n\t\t\t\t\t\tprimaryButton: isString(installOptions.justification) ? nls.localize({ key: 'enableButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Enable Extension\") : nls.localize({ key: 'enableButtonLabelWithAction', comment: ['&& denotes a mnemonic'] }, \"&&Enable Extension and {0}\", installOptions.justification.action),\n\t\t\t\t\t});\n\t\t\t\t\tif (!result.confirmed) {\n\t\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tawait this.setEnablement(extension, extension.enablementState === EnablementState.DisabledWorkspace ? EnablementState.EnabledWorkspace : EnablementState.EnabledGlobally);\n\t\t\t}\n\t\t\tawait this.waitUntilExtensionIsEnabled(extension);\n\t\t}\n\n\t\treturn extension;\n\t}\n\n\tasync installInServer(extension: IExtension, server: IExtensionManagementServer, installOptions?: InstallOptions): Promise<void> {\n\t\tawait this.doInstall(extension, async () => {\n\t\t\tconst local = extension.local;\n\t\t\tif (!local) {\n\t\t\t\tthrow new Error('Extension not found');\n\t\t\t}\n\t\t\tif (!extension.gallery) {\n\t\t\t\textension = (await this.getExtensions([{ ...extension.identifier, preRelease: local.preRelease }], CancellationToken.None))[0] ?? extension;\n\t\t\t}\n\t\t\tif (extension.gallery) {\n\t\t\t\treturn server.extensionManagementService.installFromGallery(extension.gallery, { installPreReleaseVersion: local.preRelease, ...installOptions });\n\t\t\t}\n\n\t\t\tconst targetPlatform = await server.extensionManagementService.getTargetPlatform();\n\t\t\tif (!isTargetPlatformCompatible(local.targetPlatform, [local.targetPlatform], targetPlatform)) {\n\t\t\t\tthrow new Error(nls.localize('incompatible', \"Can't install '{0}' extension because it is not compatible.\", extension.identifier.id));\n\t\t\t}\n\n\t\t\tconst vsix = await this.extensionManagementService.zip(local);\n\t\t\ttry {\n\t\t\t\treturn await server.extensionManagementService.install(vsix);\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.fileService.del(vsix);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.error(error);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcanSetLanguage(extension: IExtension): boolean {\n\t\tif (!isWeb) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!extension.gallery) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst locale = getLocale(extension.gallery);\n\t\tif (!locale) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tasync setLanguage(extension: IExtension): Promise<void> {\n\t\tif (!this.canSetLanguage(extension)) {\n\t\t\tthrow new Error('Can not set language');\n\t\t}\n\t\tconst locale = getLocale(extension.gallery!);\n\t\tif (locale === language) {\n\t\t\treturn;\n\t\t}\n\t\tconst localizedLanguageName = extension.gallery?.properties?.localizedLanguages?.[0];\n\t\treturn this.localeService.setLocale({ id: locale, galleryExtension: extension.gallery, extensionId: extension.identifier.id, label: localizedLanguageName ?? extension.displayName });\n\t}\n\n\tsetEnablement(extensions: IExtension | IExtension[], enablementState: EnablementState): Promise<void> {\n\t\textensions = Array.isArray(extensions) ? extensions : [extensions];\n\t\treturn this.promptAndSetEnablement(extensions, enablementState);\n\t}\n\n\tasync uninstall(e: IExtension): Promise<void> {\n\t\tconst extension = e.local ? e : this.local.find(local => areSameExtensions(local.identifier, e.identifier));\n\t\tif (!extension?.local) {\n\t\t\tthrow new Error('Missing local');\n\t\t}\n\n\t\tif (extension.local.isApplicationScoped && this.userDataProfilesService.profiles.length > 1) {\n\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\ttitle: nls.localize('uninstallApplicationScoped', \"Uninstall Extension\"),\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage: nls.localize('uninstallApplicationScopedMessage', \"Would you like to Uninstall {0} from all profiles?\", extension.displayName),\n\t\t\t\tprimaryButton: nls.localize('uninstallAllProfiles', \"Uninstall (All Profiles)\")\n\t\t\t});\n\t\t\tif (!confirmed) {\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\t\t}\n\n\t\tconst extensionsToUninstall: UninstallExtensionInfo[] = [{ extension: extension.local }];\n\t\tfor (const packExtension of this.getAllPackedExtensions(extension, this.local)) {\n\t\t\tif (packExtension.local && !extensionsToUninstall.some(e => areSameExtensions(e.extension.identifier, packExtension.identifier))) {\n\t\t\t\textensionsToUninstall.push({ extension: packExtension.local });\n\t\t\t}\n\t\t}\n\n\t\tconst dependents: ILocalExtension[] = [];\n\t\tlet extensionsFromAllProfiles: [ILocalExtension, URI][] | undefined;\n\t\tfor (const { extension } of extensionsToUninstall) {\n\t\t\tconst installedExtensions: [ILocalExtension, URI | undefined][] = [];\n\t\t\tif (extension.isApplicationScoped && this.userDataProfilesService.profiles.length > 1) {\n\t\t\t\tif (!extensionsFromAllProfiles) {\n\t\t\t\t\textensionsFromAllProfiles = [];\n\t\t\t\t\tawait Promise.allSettled(this.userDataProfilesService.profiles.map(async profile => {\n\t\t\t\t\t\tconst installed = await this.extensionManagementService.getInstalled(ExtensionType.User, profile.extensionsResource);\n\t\t\t\t\t\tfor (const local of installed) {\n\t\t\t\t\t\t\textensionsFromAllProfiles?.push([local, profile.extensionsResource]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tinstalledExtensions.push(...extensionsFromAllProfiles);\n\t\t\t} else {\n\t\t\t\tfor (const { local } of this.local) {\n\t\t\t\t\tif (local) {\n\t\t\t\t\t\tinstalledExtensions.push([local, undefined]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const [local, profileLocation] of installedExtensions) {\n\t\t\t\tif (areSameExtensions(local.identifier, extension.identifier)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (!local.manifest.extensionDependencies || local.manifest.extensionDependencies.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (extension.manifest.extensionPack?.some(id => areSameExtensions({ id }, local.identifier))) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (dependents.some(d => d.manifest.extensionPack?.some(id => areSameExtensions({ id }, local.identifier)))) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (local.manifest.extensionDependencies.some(dep => areSameExtensions(extension.identifier, { id: dep }))) {\n\t\t\t\t\tdependents.push(local);\n\t\t\t\t\textensionsToUninstall.push({ extension: local, options: { profileLocation } });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (dependents.length) {\n\t\t\tconst { result } = await this.dialogService.prompt({\n\t\t\t\ttitle: nls.localize('uninstallDependents', \"Uninstall Extension with Dependents\"),\n\t\t\t\ttype: Severity.Warning,\n\t\t\t\tmessage: this.getErrorMessageForUninstallingAnExtensionWithDependents(extension, dependents),\n\t\t\t\tbuttons: [{\n\t\t\t\t\tlabel: nls.localize('uninstallAll', \"Uninstall All\"),\n\t\t\t\t\trun: () => true\n\t\t\t\t}],\n\t\t\t\tcancelButton: {\n\t\t\t\t\trun: () => false\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!result) {\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\t\t}\n\n\t\treturn this.withProgress({\n\t\t\tlocation: ProgressLocation.Extensions,\n\t\t\ttitle: nls.localize('uninstallingExtension', 'Uninstalling extension...'),\n\t\t\tsource: `${extension.identifier.id}`\n\t\t}, () => this.extensionManagementService.uninstallExtensions(extensionsToUninstall).then(() => undefined));\n\t}\n\n\tprivate getAllPackedExtensions(extension: IExtension, installed: IExtension[], checked: IExtension[] = []): IExtension[] {\n\t\tif (checked.some(e => areSameExtensions(e.identifier, extension.identifier))) {\n\t\t\treturn [];\n\t\t}\n\t\tchecked.push(extension);\n\t\tconst extensionsPack = extension.extensionPack ?? [];\n\t\tif (extensionsPack.length) {\n\t\t\tconst packedExtensions: IExtension[] = [];\n\t\t\tfor (const i of installed) {\n\t\t\t\tif (!i.isBuiltin && extensionsPack.some(id => areSameExtensions({ id }, i.identifier))) {\n\t\t\t\t\tpackedExtensions.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst packOfPackedExtensions: IExtension[] = [];\n\t\t\tfor (const packedExtension of packedExtensions) {\n\t\t\t\tpackOfPackedExtensions.push(...this.getAllPackedExtensions(packedExtension, installed, checked));\n\t\t\t}\n\t\t\treturn [...packedExtensions, ...packOfPackedExtensions];\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate getErrorMessageForUninstallingAnExtensionWithDependents(extension: IExtension, dependents: ILocalExtension[]): string {\n\t\tif (dependents.length === 1) {\n\t\t\treturn nls.localize('singleDependentUninstallError', \"Cannot uninstall '{0}' extension alone. '{1}' extension depends on this. Do you want to uninstall all these extensions?\", extension.displayName, dependents[0].manifest.displayName);\n\t\t}\n\t\tif (dependents.length === 2) {\n\t\t\treturn nls.localize('twoDependentsUninstallError', \"Cannot uninstall '{0}' extension alone. '{1}' and '{2}' extensions depend on this. Do you want to uninstall all these extensions?\",\n\t\t\t\textension.displayName, dependents[0].manifest.displayName, dependents[1].manifest.displayName);\n\t\t}\n\t\treturn nls.localize('multipleDependentsUninstallError', \"Cannot uninstall '{0}' extension alone. '{1}', '{2}' and other extensions depend on this. Do you want to uninstall all these extensions?\",\n\t\t\textension.displayName, dependents[0].manifest.displayName, dependents[1].manifest.displayName);\n\t}\n\n\tisExtensionIgnoredToSync(extension: IExtension): boolean {\n\t\treturn extension.local ? !this.isInstalledExtensionSynced(extension.local)\n\t\t\t: this.extensionsSyncManagementService.hasToNeverSyncExtension(extension.identifier.id);\n\t}\n\n\tasync togglePreRelease(extension: IExtension): Promise<void> {\n\t\tif (!extension.local) {\n\t\t\treturn;\n\t\t}\n\t\tif (extension.preRelease !== extension.isPreReleaseVersion) {\n\t\t\tawait this.extensionManagementService.updateMetadata(extension.local, { preRelease: !extension.preRelease });\n\t\t\treturn;\n\t\t}\n\t\tawait this.install(extension, { installPreReleaseVersion: !extension.preRelease, preRelease: !extension.preRelease });\n\t}\n\n\tasync toggleExtensionIgnoredToSync(extension: IExtension): Promise<void> {\n\t\tconst extensionsIncludingPackedExtensions = [extension, ...this.getAllPackedExtensions(extension, this.local)];\n\t\t// Updated in sync to prevent race conditions\n\t\tfor (const e of extensionsIncludingPackedExtensions) {\n\t\t\tconst isIgnored = this.isExtensionIgnoredToSync(e);\n\t\t\tif (e.local && isIgnored && e.local.isMachineScoped) {\n\t\t\t\tawait this.extensionManagementService.updateMetadata(e.local, { isMachineScoped: false });\n\t\t\t} else {\n\t\t\t\tawait this.extensionsSyncManagementService.updateIgnoredExtensions(e.identifier.id, !isIgnored);\n\t\t\t}\n\t\t}\n\t\tawait this.userDataAutoSyncService.triggerSync(['IgnoredExtensionsUpdated']);\n\t}\n\n\tasync toggleApplyExtensionToAllProfiles(extension: IExtension): Promise<void> {\n\t\tconst extensionsIncludingPackedExtensions = [extension, ...this.getAllPackedExtensions(extension, this.local)];\n\t\tconst allExtensionServers = this.getAllExtensionServers();\n\t\tawait Promise.allSettled(extensionsIncludingPackedExtensions.map(async e => {\n\t\t\tif (!e.local || isApplicationScopedExtension(e.local.manifest) || e.isBuiltin) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst isApplicationScoped = e.local.isApplicationScoped;\n\t\t\tawait Promise.all(allExtensionServers.map(async extensionServer => {\n\t\t\t\tconst local = extensionServer.local.find(local => areSameExtensions(e.identifier, local.identifier))?.local;\n\t\t\t\tif (local && local.isApplicationScoped === isApplicationScoped) {\n\t\t\t\t\tawait this.extensionManagementService.toggleApplicationScope(local, this.userDataProfileService.currentProfile.extensionsResource);\n\t\t\t\t}\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate getAllExtensionServers(): Extensions[] {\n\t\tconst extensions: Extensions[] = [];\n\t\tif (this.localExtensions) {\n\t\t\textensions.push(this.localExtensions);\n\t\t}\n\t\tif (this.remoteExtensions) {\n\t\t\textensions.push(this.remoteExtensions);\n\t\t}\n\t\tif (this.webExtensions) {\n\t\t\textensions.push(this.webExtensions);\n\t\t}\n\t\treturn extensions;\n\t}\n\n\tprivate isInstalledExtensionSynced(extension: ILocalExtension): boolean {\n\t\tif (extension.isMachineScoped) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.extensionsSyncManagementService.hasToAlwaysSyncExtension(extension.identifier.id)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn !this.extensionsSyncManagementService.hasToNeverSyncExtension(extension.identifier.id);\n\t}\n\n\tprivate doInstall(extension: IExtension | undefined, installTask: () => Promise<ILocalExtension>, progressLocation?: ProgressLocation | string): Promise<IExtension> {\n\t\tconst title = extension ? nls.localize('installing named extension', \"Installing '{0}' extension...\", extension.displayName) : nls.localize('installing extension', 'Installing extension...');\n\t\treturn this.withProgress({\n\t\t\tlocation: progressLocation ?? ProgressLocation.Extensions,\n\t\t\ttitle\n\t\t}, async () => {\n\t\t\ttry {\n\t\t\t\tif (extension) {\n\t\t\t\t\tthis.installing.push(extension);\n\t\t\t\t\tthis._onChange.fire(extension);\n\t\t\t\t}\n\t\t\t\tconst local = await installTask();\n\t\t\t\treturn await this.waitAndGetInstalledExtension(local.identifier);\n\t\t\t} finally {\n\t\t\t\tif (extension) {\n\t\t\t\t\tthis.installing = this.installing.filter(e => e !== extension);\n\t\t\t\t\t// Trigger the change without passing the extension because it is replaced by a new instance.\n\t\t\t\t\tthis._onChange.fire(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async installFromVSIX(vsix: URI, installOptions: InstallOptions): Promise<ILocalExtension> {\n\t\tconst manifest = await this.extensionManagementService.getManifest(vsix);\n\t\tconst existingExtension = this.local.find(local => areSameExtensions(local.identifier, { id: getGalleryExtensionId(manifest.publisher, manifest.name) }));\n\t\tif (existingExtension) {\n\t\t\tinstallOptions = installOptions || {};\n\t\t\tif (existingExtension.latestVersion === manifest.version) {\n\t\t\t\tinstallOptions.pinned = installOptions.pinned ?? (existingExtension.local?.pinned || !this.shouldAutoUpdateExtension(existingExtension));\n\t\t\t} else {\n\t\t\t\tinstallOptions.installGivenVersion = true;\n\t\t\t}\n\t\t}\n\t\treturn this.extensionManagementService.installVSIX(vsix, manifest, installOptions);\n\t}\n\n\tprivate installFromGallery(extension: IExtension, gallery: IGalleryExtension, installOptions: InstallExtensionOptions, servers: IExtensionManagementServer[] | undefined): Promise<ILocalExtension> {\n\t\tinstallOptions = installOptions ?? {};\n\t\tinstallOptions.pinned = installOptions.pinned ?? (extension.local?.pinned || !this.shouldAutoUpdateExtension(extension));\n\t\tif (extension.local && !servers) {\n\t\t\tinstallOptions.productVersion = this.getProductVersion();\n\t\t\tinstallOptions.operation = InstallOperation.Update;\n\t\t\treturn this.extensionManagementService.updateFromGallery(gallery, extension.local, installOptions);\n\t\t} else {\n\t\t\treturn this.extensionManagementService.installFromGallery(gallery, installOptions, servers);\n\t\t}\n\t}\n\n\tprivate async waitAndGetInstalledExtension(identifier: IExtensionIdentifier): Promise<IExtension> {\n\t\tlet installedExtension = this.local.find(local => areSameExtensions(local.identifier, identifier));\n\t\tif (!installedExtension) {\n\t\t\tawait Event.toPromise(Event.filter(this.onChange, e => !!e && this.local.some(local => areSameExtensions(local.identifier, identifier))));\n\t\t}\n\t\tinstalledExtension = this.local.find(local => areSameExtensions(local.identifier, identifier));\n\t\tif (!installedExtension) {\n\t\t\t// This should not happen\n\t\t\tthrow new Error('Extension should have been installed');\n\t\t}\n\t\treturn installedExtension;\n\t}\n\n\tprivate async waitUntilExtensionIsEnabled(extension: IExtension): Promise<void> {\n\t\tif (this.extensionService.extensions.find(e => ExtensionIdentifier.equals(e.identifier, extension.identifier.id))) {\n\t\t\treturn;\n\t\t}\n\t\tif (!extension.local || !this.extensionService.canAddExtension(toExtensionDescription(extension.local))) {\n\t\t\treturn;\n\t\t}\n\t\tawait new Promise<void>((c, e) => {\n\t\t\tconst disposable = this.extensionService.onDidChangeExtensions(() => {\n\t\t\t\ttry {\n\t\t\t\t\tif (this.extensionService.extensions.find(e => ExtensionIdentifier.equals(e.identifier, extension.identifier.id))) {\n\t\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\t\tc();\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate promptAndSetEnablement(extensions: IExtension[], enablementState: EnablementState): Promise<any> {\n\t\tconst enable = enablementState === EnablementState.EnabledGlobally || enablementState === EnablementState.EnabledWorkspace;\n\t\tif (enable) {\n\t\t\tconst allDependenciesAndPackedExtensions = this.getExtensionsRecursively(extensions, this.local, enablementState, { dependencies: true, pack: true });\n\t\t\treturn this.checkAndSetEnablement(extensions, allDependenciesAndPackedExtensions, enablementState);\n\t\t} else {\n\t\t\tconst packedExtensions = this.getExtensionsRecursively(extensions, this.local, enablementState, { dependencies: false, pack: true });\n\t\t\tif (packedExtensions.length) {\n\t\t\t\treturn this.checkAndSetEnablement(extensions, packedExtensions, enablementState);\n\t\t\t}\n\t\t\treturn this.checkAndSetEnablement(extensions, [], enablementState);\n\t\t}\n\t}\n\n\tprivate async checkAndSetEnablement(extensions: IExtension[], otherExtensions: IExtension[], enablementState: EnablementState): Promise<any> {\n\t\tconst allExtensions = [...extensions, ...otherExtensions];\n\t\tconst enable = enablementState === EnablementState.EnabledGlobally || enablementState === EnablementState.EnabledWorkspace;\n\t\tif (!enable) {\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tconst dependents = this.getDependentsAfterDisablement(extension, allExtensions, this.local);\n\t\t\t\tif (dependents.length) {\n\t\t\t\t\tconst { result } = await this.dialogService.prompt({\n\t\t\t\t\t\ttitle: nls.localize('disableDependents', \"Disable Extension with Dependents\"),\n\t\t\t\t\t\ttype: Severity.Warning,\n\t\t\t\t\t\tmessage: this.getDependentsErrorMessageForDisablement(extension, allExtensions, dependents),\n\t\t\t\t\t\tbuttons: [{\n\t\t\t\t\t\t\tlabel: nls.localize('disable all', 'Disable All'),\n\t\t\t\t\t\t\trun: () => true\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tcancelButton: {\n\t\t\t\t\t\t\trun: () => false\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!result) {\n\t\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t\t}\n\t\t\t\t\tawait this.checkAndSetEnablement(dependents, [extension], enablementState);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.doSetEnablement(allExtensions, enablementState);\n\t}\n\n\tprivate getExtensionsRecursively(extensions: IExtension[], installed: IExtension[], enablementState: EnablementState, options: { dependencies: boolean; pack: boolean }, checked: IExtension[] = []): IExtension[] {\n\t\tconst toCheck = extensions.filter(e => checked.indexOf(e) === -1);\n\t\tif (toCheck.length) {\n\t\t\tfor (const extension of toCheck) {\n\t\t\t\tchecked.push(extension);\n\t\t\t}\n\t\t\tconst extensionsToEanbleOrDisable = installed.filter(i => {\n\t\t\t\tif (checked.indexOf(i) !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst enable = enablementState === EnablementState.EnabledGlobally || enablementState === EnablementState.EnabledWorkspace;\n\t\t\t\tconst isExtensionEnabled = i.enablementState === EnablementState.EnabledGlobally || i.enablementState === EnablementState.EnabledWorkspace;\n\t\t\t\tif (enable === isExtensionEnabled) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn (enable || !i.isBuiltin) // Include all Extensions for enablement and only non builtin extensions for disablement\n\t\t\t\t\t&& (options.dependencies || options.pack)\n\t\t\t\t\t&& extensions.some(extension =>\n\t\t\t\t\t\t(options.dependencies && extension.dependencies.some(id => areSameExtensions({ id }, i.identifier)))\n\t\t\t\t\t\t|| (options.pack && extension.extensionPack.some(id => areSameExtensions({ id }, i.identifier)))\n\t\t\t\t\t);\n\t\t\t});\n\t\t\tif (extensionsToEanbleOrDisable.length) {\n\t\t\t\textensionsToEanbleOrDisable.push(...this.getExtensionsRecursively(extensionsToEanbleOrDisable, installed, enablementState, options, checked));\n\t\t\t}\n\t\t\treturn extensionsToEanbleOrDisable;\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate getDependentsAfterDisablement(extension: IExtension, extensionsToDisable: IExtension[], installed: IExtension[]): IExtension[] {\n\t\treturn installed.filter(i => {\n\t\t\tif (i.dependencies.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (i === extension) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!this.extensionEnablementService.isEnabledEnablementState(i.enablementState)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (extensionsToDisable.indexOf(i) !== -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn i.dependencies.some(dep => [extension, ...extensionsToDisable].some(d => areSameExtensions(d.identifier, { id: dep })));\n\t\t});\n\t}\n\n\tprivate getDependentsErrorMessageForDisablement(extension: IExtension, allDisabledExtensions: IExtension[], dependents: IExtension[]): string {\n\t\tfor (const e of [extension, ...allDisabledExtensions]) {\n\t\t\tconst dependentsOfTheExtension = dependents.filter(d => d.dependencies.some(id => areSameExtensions({ id }, e.identifier)));\n\t\t\tif (dependentsOfTheExtension.length) {\n\t\t\t\treturn this.getErrorMessageForDisablingAnExtensionWithDependents(e, dependentsOfTheExtension);\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate getErrorMessageForDisablingAnExtensionWithDependents(extension: IExtension, dependents: IExtension[]): string {\n\t\tif (dependents.length === 1) {\n\t\t\treturn nls.localize('singleDependentError', \"Cannot disable '{0}' extension alone. '{1}' extension depends on this. Do you want to disable all these extensions?\", extension.displayName, dependents[0].displayName);\n\t\t}\n\t\tif (dependents.length === 2) {\n\t\t\treturn nls.localize('twoDependentsError', \"Cannot disable '{0}' extension alone. '{1}' and '{2}' extensions depend on this. Do you want to disable all these extensions?\",\n\t\t\t\textension.displayName, dependents[0].displayName, dependents[1].displayName);\n\t\t}\n\t\treturn nls.localize('multipleDependentsError', \"Cannot disable '{0}' extension alone. '{1}', '{2}' and other extensions depend on this. Do you want to disable all these extensions?\",\n\t\t\textension.displayName, dependents[0].displayName, dependents[1].displayName);\n\t}\n\n\tprivate async doSetEnablement(extensions: IExtension[], enablementState: EnablementState): Promise<boolean[]> {\n\t\treturn await this.extensionEnablementService.setEnablement(extensions.map(e => e.local!), enablementState);\n\t}\n\n\t// Current service reports progress when installing/uninstalling extensions\n\t// This is to report progress for other sources of extension install/uninstall changes\n\t// Since we cannot differentiate between the two, we report progress for all extension install/uninstall changes\n\tprivate _activityCallBack: ((value: void) => void) | undefined;\n\tprivate reportProgressFromOtherSources(): void {\n\t\tif (this.installed.some(e => e.state === ExtensionState.Installing || e.state === ExtensionState.Uninstalling)) {\n\t\t\tif (!this._activityCallBack) {\n\t\t\t\tthis.withProgress({ location: ProgressLocation.Extensions }, () => new Promise(resolve => this._activityCallBack = resolve));\n\t\t\t}\n\t\t} else {\n\t\t\tthis._activityCallBack?.();\n\t\t\tthis._activityCallBack = undefined;\n\t\t}\n\t}\n\n\tprivate withProgress<T>(options: IProgressOptions, task: () => Promise<T>): Promise<T> {\n\t\treturn this.progressService.withProgress(options, async () => {\n\t\t\tconst cancelableTask = createCancelablePromise(() => task());\n\t\t\tthis.tasksInProgress.push(cancelableTask);\n\t\t\ttry {\n\t\t\t\treturn await cancelableTask;\n\t\t\t} finally {\n\t\t\t\tconst index = this.tasksInProgress.indexOf(cancelableTask);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.tasksInProgress.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate onError(err: any): void {\n\t\tif (isCancellationError(err)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = err && err.message || '';\n\n\t\tif (/getaddrinfo ENOTFOUND|getaddrinfo ENOENT|connect EACCES|connect ECONNREFUSED/.test(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.notificationService.error(err);\n\t}\n\n\thandleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\tif (!/^extension/.test(uri.path)) {\n\t\t\treturn Promise.resolve(false);\n\t\t}\n\n\t\tthis.onOpenExtensionUrl(uri);\n\t\treturn Promise.resolve(true);\n\t}\n\n\tprivate onOpenExtensionUrl(uri: URI): void {\n\t\tconst match = /^extension\\/([^/]+)$/.exec(uri.path);\n\n\t\tif (!match) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst extensionId = match[1];\n\n\t\tthis.queryLocal().then(async local => {\n\t\t\tlet extension = local.find(local => areSameExtensions(local.identifier, { id: extensionId }));\n\t\t\tif (!extension) {\n\t\t\t\t[extension] = await this.getExtensions([{ id: extensionId }], { source: 'uri' }, CancellationToken.None);\n\t\t\t}\n\t\t\tif (extension) {\n\t\t\t\tawait this.hostService.focus(mainWindow);\n\t\t\t\tawait this.open(extension);\n\t\t\t}\n\t\t}).then(undefined, error => this.onError(error));\n\t}\n\n\tprivate getPublishersToAutoUpdate(): string[] {\n\t\treturn this.getEnabledAutoUpdateExtensions().filter(id => !EXTENSION_IDENTIFIER_REGEX.test(id));\n\t}\n\n\tgetEnabledAutoUpdateExtensions(): string[] {\n\t\ttry {\n\t\t\tconst parsedValue = JSON.parse(this.enabledAuotUpdateExtensionsValue);\n\t\t\tif (Array.isArray(parsedValue)) {\n\t\t\t\treturn parsedValue;\n\t\t\t}\n\t\t} catch (e) { /* Ignore */ }\n\t\treturn [];\n\t}\n\n\tprivate setEnabledAutoUpdateExtensions(enabledAutoUpdateExtensions: string[]): void {\n\t\tthis.enabledAuotUpdateExtensionsValue = JSON.stringify(enabledAutoUpdateExtensions);\n\t}\n\n\tprivate _enabledAutoUpdateExtensionsValue: string | undefined;\n\tprivate get enabledAuotUpdateExtensionsValue(): string {\n\t\tif (!this._enabledAutoUpdateExtensionsValue) {\n\t\t\tthis._enabledAutoUpdateExtensionsValue = this.getEnabledAutoUpdateExtensionsValue();\n\t\t}\n\n\t\treturn this._enabledAutoUpdateExtensionsValue;\n\t}\n\n\tprivate set enabledAuotUpdateExtensionsValue(enabledAuotUpdateExtensionsValue: string) {\n\t\tif (this.enabledAuotUpdateExtensionsValue !== enabledAuotUpdateExtensionsValue) {\n\t\t\tthis._enabledAutoUpdateExtensionsValue = enabledAuotUpdateExtensionsValue;\n\t\t\tthis.setEnabledAutoUpdateExtensionsValue(enabledAuotUpdateExtensionsValue);\n\t\t}\n\t}\n\n\tprivate getEnabledAutoUpdateExtensionsValue(): string {\n\t\treturn this.storageService.get(EXTENSIONS_AUTO_UPDATE_KEY, StorageScope.APPLICATION, '[]');\n\t}\n\n\tprivate setEnabledAutoUpdateExtensionsValue(value: string): void {\n\t\tthis.storageService.store(EXTENSIONS_AUTO_UPDATE_KEY, value, StorageScope.APPLICATION, StorageTarget.USER);\n\t}\n\n\tgetDisabledAutoUpdateExtensions(): string[] {\n\t\ttry {\n\t\t\tconst parsedValue = JSON.parse(this.disabledAutoUpdateExtensionsValue);\n\t\t\tif (Array.isArray(parsedValue)) {\n\t\t\t\treturn parsedValue;\n\t\t\t}\n\t\t} catch (e) { /* Ignore */ }\n\t\treturn [];\n\t}\n\n\tprivate setDisabledAutoUpdateExtensions(disabledAutoUpdateExtensions: string[]): void {\n\t\tthis.disabledAutoUpdateExtensionsValue = JSON.stringify(disabledAutoUpdateExtensions);\n\t}\n\n\tprivate _disabledAutoUpdateExtensionsValue: string | undefined;\n\tprivate get disabledAutoUpdateExtensionsValue(): string {\n\t\tif (!this._disabledAutoUpdateExtensionsValue) {\n\t\t\tthis._disabledAutoUpdateExtensionsValue = this.getDisabledAutoUpdateExtensionsValue();\n\t\t}\n\n\t\treturn this._disabledAutoUpdateExtensionsValue;\n\t}\n\n\tprivate set disabledAutoUpdateExtensionsValue(disabledAutoUpdateExtensionsValue: string) {\n\t\tif (this.disabledAutoUpdateExtensionsValue !== disabledAutoUpdateExtensionsValue) {\n\t\t\tthis._disabledAutoUpdateExtensionsValue = disabledAutoUpdateExtensionsValue;\n\t\t\tthis.setDisabledAutoUpdateExtensionsValue(disabledAutoUpdateExtensionsValue);\n\t\t}\n\t}\n\n\tprivate getDisabledAutoUpdateExtensionsValue(): string {\n\t\treturn this.storageService.get(EXTENSIONS_DONOT_AUTO_UPDATE_KEY, StorageScope.APPLICATION, '[]');\n\t}\n\n\tprivate setDisabledAutoUpdateExtensionsValue(value: string): void {\n\t\tthis.storageService.store(EXTENSIONS_DONOT_AUTO_UPDATE_KEY, value, StorageScope.APPLICATION, StorageTarget.USER);\n\t}\n\n\tprivate getDismissedNotifications(): string[] {\n\t\ttry {\n\t\t\tconst parsedValue = JSON.parse(this.dismissedNotificationsValue);\n\t\t\tif (Array.isArray(parsedValue)) {\n\t\t\t\treturn parsedValue;\n\t\t\t}\n\t\t} catch (e) { /* Ignore */ }\n\t\treturn [];\n\t}\n\n\tprivate setDismissedNotifications(dismissedNotifications: string[]): void {\n\t\tthis.dismissedNotificationsValue = JSON.stringify(dismissedNotifications);\n\t}\n\n\tprivate _dismissedNotificationsValue: string | undefined;\n\tprivate get dismissedNotificationsValue(): string {\n\t\tif (!this._dismissedNotificationsValue) {\n\t\t\tthis._dismissedNotificationsValue = this.getDismissedNotificationsValue();\n\t\t}\n\n\t\treturn this._dismissedNotificationsValue;\n\t}\n\n\tprivate set dismissedNotificationsValue(dismissedNotificationsValue: string) {\n\t\tif (this.dismissedNotificationsValue !== dismissedNotificationsValue) {\n\t\t\tthis._dismissedNotificationsValue = dismissedNotificationsValue;\n\t\t\tthis.setDismissedNotificationsValue(dismissedNotificationsValue);\n\t\t}\n\t}\n\n\tprivate getDismissedNotificationsValue(): string {\n\t\treturn this.storageService.get(EXTENSIONS_DISMISSED_NOTIFICATIONS_KEY, StorageScope.PROFILE, '[]');\n\t}\n\n\tprivate setDismissedNotificationsValue(value: string): void {\n\t\tthis.storageService.store(EXTENSIONS_DISMISSED_NOTIFICATIONS_KEY, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n}\n"]}