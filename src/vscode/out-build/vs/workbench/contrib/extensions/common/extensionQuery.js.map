{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/extensions/common/extensionQuery.ts","vs/workbench/contrib/extensions/common/extensionQuery.ts"],"names":[],"mappings":"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","file":"extensionQuery.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IExtensionGalleryManifest } from '../../../../platform/extensionManagement/common/extensionGalleryManifest.js';\nimport { FilterType, SortBy } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { EXTENSION_CATEGORIES } from '../../../../platform/extensions/common/extensions.js';\n\nexport class Query {\n\n\tconstructor(public value: string, public sortBy: string) {\n\t\tthis.value = value.trim();\n\t}\n\n\tstatic suggestions(query: string, galleryManifest: IExtensionGalleryManifest | null): string[] {\n\n\t\tconst commands = ['installed', 'updates', 'enabled', 'disabled', 'builtin'];\n\t\tif (galleryManifest?.capabilities.extensionQuery?.filtering?.some(c => c.name === FilterType.Featured)) {\n\t\t\tcommands.push('featured');\n\t\t}\n\n\t\tcommands.push(...['mcp', 'popular', 'recommended', 'recentlyPublished', 'workspaceUnsupported', 'deprecated', 'sort']);\n\t\tconst isCategoriesEnabled = galleryManifest?.capabilities.extensionQuery?.filtering?.some(c => c.name === FilterType.Category);\n\t\tif (isCategoriesEnabled) {\n\t\t\tcommands.push('category');\n\t\t}\n\n\t\tcommands.push(...['tag', 'ext', 'id', 'outdated', 'recentlyUpdated']);\n\t\tconst sortCommands = [];\n\t\tif (galleryManifest?.capabilities.extensionQuery?.sorting?.some(c => c.name === SortBy.InstallCount)) {\n\t\t\tsortCommands.push('installs');\n\t\t}\n\t\tif (galleryManifest?.capabilities.extensionQuery?.sorting?.some(c => c.name === SortBy.WeightedRating)) {\n\t\t\tsortCommands.push('rating');\n\t\t}\n\t\tsortCommands.push('name', 'publishedDate', 'updateDate');\n\n\t\tconst subcommands = {\n\t\t\t'sort': sortCommands,\n\t\t\t'category': isCategoriesEnabled ? EXTENSION_CATEGORIES.map(c => `\"${c.toLowerCase()}\"`) : [],\n\t\t\t'tag': [''],\n\t\t\t'ext': [''],\n\t\t\t'id': ['']\n\t\t} as const;\n\n\t\tconst queryContains = (substr: string) => query.indexOf(substr) > -1;\n\t\tconst hasSort = subcommands.sort.some(subcommand => queryContains(`@sort:${subcommand}`));\n\t\tconst hasCategory = subcommands.category.some(subcommand => queryContains(`@category:${subcommand}`));\n\n\t\treturn commands.flatMap(command => {\n\t\t\tif (hasSort && command === 'sort' || hasCategory && command === 'category') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tif (command in subcommands) {\n\t\t\t\treturn (subcommands as Record<string, readonly string[]>)[command]\n\t\t\t\t\t.map(subcommand => `@${command}:${subcommand}${subcommand === '' ? '' : ' '}`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn queryContains(`@${command}`) ? [] : [`@${command} `];\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic parse(value: string): Query {\n\t\tlet sortBy = '';\n\t\tvalue = value.replace(/@sort:(\\w+)(-\\w*)?/g, (match, by: string, order: string) => {\n\t\t\tsortBy = by;\n\n\t\t\treturn '';\n\t\t});\n\t\treturn new Query(value, sortBy);\n\t}\n\n\ttoString(): string {\n\t\tlet result = this.value;\n\n\t\tif (this.sortBy) {\n\t\t\tresult = `${result}${result ? ' ' : ''}@sort:${this.sortBy}`;\n\t\t}\n\t\treturn result;\n\t}\n\n\tisValid(): boolean {\n\t\treturn !/@outdated/.test(this.value);\n\t}\n\n\tequals(other: Query): boolean {\n\t\treturn this.value === other.value && this.sortBy === other.sortBy;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IExtensionGalleryManifest } from '../../../../platform/extensionManagement/common/extensionGalleryManifest.js';\nimport { FilterType, SortBy } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { EXTENSION_CATEGORIES } from '../../../../platform/extensions/common/extensions.js';\n\nexport class Query {\n\n\tconstructor(public value: string, public sortBy: string) {\n\t\tthis.value = value.trim();\n\t}\n\n\tstatic suggestions(query: string, galleryManifest: IExtensionGalleryManifest | null): string[] {\n\n\t\tconst commands = ['installed', 'updates', 'enabled', 'disabled', 'builtin'];\n\t\tif (galleryManifest?.capabilities.extensionQuery?.filtering?.some(c => c.name === FilterType.Featured)) {\n\t\t\tcommands.push('featured');\n\t\t}\n\n\t\tcommands.push(...['mcp', 'popular', 'recommended', 'recentlyPublished', 'workspaceUnsupported', 'deprecated', 'sort']);\n\t\tconst isCategoriesEnabled = galleryManifest?.capabilities.extensionQuery?.filtering?.some(c => c.name === FilterType.Category);\n\t\tif (isCategoriesEnabled) {\n\t\t\tcommands.push('category');\n\t\t}\n\n\t\tcommands.push(...['tag', 'ext', 'id', 'outdated', 'recentlyUpdated']);\n\t\tconst sortCommands = [];\n\t\tif (galleryManifest?.capabilities.extensionQuery?.sorting?.some(c => c.name === SortBy.InstallCount)) {\n\t\t\tsortCommands.push('installs');\n\t\t}\n\t\tif (galleryManifest?.capabilities.extensionQuery?.sorting?.some(c => c.name === SortBy.WeightedRating)) {\n\t\t\tsortCommands.push('rating');\n\t\t}\n\t\tsortCommands.push('name', 'publishedDate', 'updateDate');\n\n\t\tconst subcommands = {\n\t\t\t'sort': sortCommands,\n\t\t\t'category': isCategoriesEnabled ? EXTENSION_CATEGORIES.map(c => `\"${c.toLowerCase()}\"`) : [],\n\t\t\t'tag': [''],\n\t\t\t'ext': [''],\n\t\t\t'id': ['']\n\t\t} as const;\n\n\t\tconst queryContains = (substr: string) => query.indexOf(substr) > -1;\n\t\tconst hasSort = subcommands.sort.some(subcommand => queryContains(`@sort:${subcommand}`));\n\t\tconst hasCategory = subcommands.category.some(subcommand => queryContains(`@category:${subcommand}`));\n\n\t\treturn commands.flatMap(command => {\n\t\t\tif (hasSort && command === 'sort' || hasCategory && command === 'category') {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\tif (command in subcommands) {\n\t\t\t\treturn (subcommands as Record<string, readonly string[]>)[command]\n\t\t\t\t\t.map(subcommand => `@${command}:${subcommand}${subcommand === '' ? '' : ' '}`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn queryContains(`@${command}`) ? [] : [`@${command} `];\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic parse(value: string): Query {\n\t\tlet sortBy = '';\n\t\tvalue = value.replace(/@sort:(\\w+)(-\\w*)?/g, (match, by: string, order: string) => {\n\t\t\tsortBy = by;\n\n\t\t\treturn '';\n\t\t});\n\t\treturn new Query(value, sortBy);\n\t}\n\n\ttoString(): string {\n\t\tlet result = this.value;\n\n\t\tif (this.sortBy) {\n\t\t\tresult = `${result}${result ? ' ' : ''}@sort:${this.sortBy}`;\n\t\t}\n\t\treturn result;\n\t}\n\n\tisValid(): boolean {\n\t\treturn !/@outdated/.test(this.value);\n\t}\n\n\tequals(other: Query): boolean {\n\t\treturn this.value === other.value && this.sortBy === other.sortBy;\n\t}\n}\n"]}