{"version":3,"sources":["vs/workbench/contrib/extensions/electron-browser/runtimeExtensionsEditor.ts"],"names":[],"mappings":"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","file":"runtimeExtensionsEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Action } from '../../../../base/common/actions.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService, ServicesAccessor, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IV8Profile, Utils } from '../../../../platform/profiling/common/profiling.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ActiveEditorContext } from '../../../common/contextkeys.js';\nimport { IEditorGroup } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IExtensionFeaturesManagementService } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { IExtensionHostProfile, IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { AbstractRuntimeExtensionsEditor, IRuntimeExtension } from '../browser/abstractRuntimeExtensionsEditor.js';\nimport { IExtensionsWorkbenchService } from '../common/extensions.js';\nimport { ReportExtensionIssueAction } from '../common/reportExtensionIssueAction.js';\nimport { SlowExtensionAction } from './extensionsSlowActions.js';\n\nexport const IExtensionHostProfileService = createDecorator<IExtensionHostProfileService>('extensionHostProfileService');\nexport const CONTEXT_PROFILE_SESSION_STATE = new RawContextKey<string>('profileSessionState', 'none');\nexport const CONTEXT_EXTENSION_HOST_PROFILE_RECORDED = new RawContextKey<boolean>('extensionHostProfileRecorded', false);\n\nexport enum ProfileSessionState {\n\tNone = 0,\n\tStarting = 1,\n\tRunning = 2,\n\tStopping = 3\n}\n\nexport interface IExtensionHostProfileService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeState: Event<void>;\n\treadonly onDidChangeLastProfile: Event<void>;\n\n\treadonly state: ProfileSessionState;\n\treadonly lastProfile: IExtensionHostProfile | null;\n\tlastProfileSavedTo: URI | undefined;\n\n\tstartProfiling(): void;\n\tstopProfiling(): void;\n\n\tgetUnresponsiveProfile(extensionId: ExtensionIdentifier): IExtensionHostProfile | undefined;\n\tsetUnresponsiveProfile(extensionId: ExtensionIdentifier, profile: IExtensionHostProfile): void;\n}\n\nexport class RuntimeExtensionsEditor extends AbstractRuntimeExtensionsEditor {\n\n\tprivate _profileInfo: IExtensionHostProfile | null;\n\tprivate _extensionsHostRecorded: IContextKey<boolean>;\n\tprivate _profileSessionState: IContextKey<string>;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IClipboardService clipboardService: IClipboardService,\n\t\t@IExtensionHostProfileService private readonly _extensionHostProfileService: IExtensionHostProfileService,\n\t\t@IExtensionFeaturesManagementService extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IMenuService menuService: IMenuService,\n\t) {\n\t\tsuper(group, telemetryService, themeService, contextKeyService, extensionsWorkbenchService, extensionService, notificationService, contextMenuService, instantiationService, storageService, labelService, environmentService, clipboardService, extensionFeaturesManagementService, hoverService, menuService);\n\t\tthis._profileInfo = this._extensionHostProfileService.lastProfile;\n\t\tthis._extensionsHostRecorded = CONTEXT_EXTENSION_HOST_PROFILE_RECORDED.bindTo(contextKeyService);\n\t\tthis._profileSessionState = CONTEXT_PROFILE_SESSION_STATE.bindTo(contextKeyService);\n\n\t\tthis._register(this._extensionHostProfileService.onDidChangeLastProfile(() => {\n\t\t\tthis._profileInfo = this._extensionHostProfileService.lastProfile;\n\t\t\tthis._extensionsHostRecorded.set(!!this._profileInfo);\n\t\t\tthis._updateExtensions();\n\t\t}));\n\t\tthis._register(this._extensionHostProfileService.onDidChangeState(() => {\n\t\t\tconst state = this._extensionHostProfileService.state;\n\t\t\tthis._profileSessionState.set(ProfileSessionState[state].toLowerCase());\n\t\t}));\n\t}\n\n\tprotected _getProfileInfo(): IExtensionHostProfile | null {\n\t\treturn this._profileInfo;\n\t}\n\n\tprotected _getUnresponsiveProfile(extensionId: ExtensionIdentifier): IExtensionHostProfile | undefined {\n\t\treturn this._extensionHostProfileService.getUnresponsiveProfile(extensionId);\n\t}\n\n\tprotected _createSlowExtensionAction(element: IRuntimeExtension): Action | null {\n\t\tif (element.unresponsiveProfile) {\n\t\t\treturn this._instantiationService.createInstance(SlowExtensionAction, element.description, element.unresponsiveProfile);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected _createReportExtensionIssueAction(element: IRuntimeExtension): Action | null {\n\t\tif (element.marketplaceInfo) {\n\t\t\treturn this._instantiationService.createInstance(ReportExtensionIssueAction, element.description);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport class StartExtensionHostProfileAction extends Action2 {\n\tstatic readonly ID = 'workbench.extensions.action.extensionHostProfile';\n\tstatic readonly LABEL = nls.localize('extensionHostProfileStart', \"Start Extension Host Profile\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: StartExtensionHostProfileAction.ID,\n\t\t\ttitle: { value: StartExtensionHostProfileAction.LABEL, original: 'Start Extension Host Profile' },\n\t\t\tprecondition: CONTEXT_PROFILE_SESSION_STATE.isEqualTo('none'),\n\t\t\ticon: Codicon.circleFilled,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\twhen: ContextKeyExpr.and(ActiveEditorContext.isEqualTo(RuntimeExtensionsEditor.ID), CONTEXT_PROFILE_SESSION_STATE.notEqualsTo('running')),\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ExtensionEditorContextMenu,\n\t\t\t\twhen: CONTEXT_PROFILE_SESSION_STATE.notEqualsTo('running'),\n\t\t\t\tgroup: 'profiling',\n\t\t\t}]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): Promise<any> {\n\t\tconst extensionHostProfileService = accessor.get(IExtensionHostProfileService);\n\t\textensionHostProfileService.startProfiling();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class StopExtensionHostProfileAction extends Action2 {\n\tstatic readonly ID = 'workbench.extensions.action.stopExtensionHostProfile';\n\tstatic readonly LABEL = nls.localize('stopExtensionHostProfileStart', \"Stop Extension Host Profile\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: StopExtensionHostProfileAction.ID,\n\t\t\ttitle: { value: StopExtensionHostProfileAction.LABEL, original: 'Stop Extension Host Profile' },\n\t\t\ticon: Codicon.debugStop,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\twhen: ContextKeyExpr.and(ActiveEditorContext.isEqualTo(RuntimeExtensionsEditor.ID), CONTEXT_PROFILE_SESSION_STATE.isEqualTo('running')),\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ExtensionEditorContextMenu,\n\t\t\t\twhen: CONTEXT_PROFILE_SESSION_STATE.isEqualTo('running'),\n\t\t\t\tgroup: 'profiling',\n\t\t\t}]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): Promise<any> {\n\t\tconst extensionHostProfileService = accessor.get(IExtensionHostProfileService);\n\t\textensionHostProfileService.stopProfiling();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class OpenExtensionHostProfileACtion extends Action2 {\n\tstatic readonly LABEL = nls.localize('openExtensionHostProfile', \"Open Extension Host Profile\");\n\tstatic readonly ID = 'workbench.extensions.action.openExtensionHostProfile';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenExtensionHostProfileACtion.ID,\n\t\t\ttitle: { value: OpenExtensionHostProfileACtion.LABEL, original: 'Open Extension Host Profile' },\n\t\t\tprecondition: CONTEXT_EXTENSION_HOST_PROFILE_RECORDED,\n\t\t\ticon: Codicon.graph,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\twhen: ContextKeyExpr.and(ActiveEditorContext.isEqualTo(RuntimeExtensionsEditor.ID)),\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ExtensionEditorContextMenu,\n\t\t\t\twhen: CONTEXT_EXTENSION_HOST_PROFILE_RECORDED,\n\t\t\t\tgroup: 'profiling',\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst extensionHostProfileService = accessor.get(IExtensionHostProfileService);\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tif (!extensionHostProfileService.lastProfileSavedTo) {\n\t\t\tawait commandService.executeCommand(SaveExtensionHostProfileAction.ID);\n\t\t}\n\t\tif (!extensionHostProfileService.lastProfileSavedTo) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait editorService.openEditor({\n\t\t\tresource: extensionHostProfileService.lastProfileSavedTo,\n\t\t\toptions: {\n\t\t\t\trevealIfOpened: true,\n\t\t\t\toverride: 'jsProfileVisualizer.cpuprofile.table',\n\t\t\t},\n\t\t}, SIDE_GROUP);\n\t}\n\n}\n\nexport class SaveExtensionHostProfileAction extends Action2 {\n\n\tstatic readonly LABEL = nls.localize('saveExtensionHostProfile', \"Save Extension Host Profile\");\n\tstatic readonly ID = 'workbench.extensions.action.saveExtensionHostProfile';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SaveExtensionHostProfileAction.ID,\n\t\t\ttitle: { value: SaveExtensionHostProfileAction.LABEL, original: 'Save Extension Host Profile' },\n\t\t\tprecondition: CONTEXT_EXTENSION_HOST_PROFILE_RECORDED,\n\t\t\ticon: Codicon.saveAll,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\twhen: ContextKeyExpr.and(ActiveEditorContext.isEqualTo(RuntimeExtensionsEditor.ID)),\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ExtensionEditorContextMenu,\n\t\t\t\twhen: CONTEXT_EXTENSION_HOST_PROFILE_RECORDED,\n\t\t\t\tgroup: 'profiling',\n\t\t\t}]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): Promise<any> {\n\t\tconst environmentService = accessor.get(IWorkbenchEnvironmentService);\n\t\tconst extensionHostProfileService = accessor.get(IExtensionHostProfileService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst fileDialogService = accessor.get(IFileDialogService);\n\t\treturn this._asyncRun(environmentService, extensionHostProfileService, fileService, fileDialogService);\n\t}\n\n\tprivate async _asyncRun(\n\t\tenvironmentService: IWorkbenchEnvironmentService,\n\t\textensionHostProfileService: IExtensionHostProfileService,\n\t\tfileService: IFileService,\n\t\tfileDialogService: IFileDialogService\n\t): Promise<any> {\n\t\tconst picked = await fileDialogService.showSaveDialog({\n\t\t\ttitle: nls.localize('saveprofile.dialogTitle', \"Save Extension Host Profile\"),\n\t\t\tavailableFileSystems: [Schemas.file],\n\t\t\tdefaultUri: joinPath(await fileDialogService.defaultFilePath(), `CPU-${new Date().toISOString().replace(/[\\-:]/g, '')}.cpuprofile`),\n\t\t\tfilters: [{\n\t\t\t\tname: 'CPU Profiles',\n\t\t\t\textensions: ['cpuprofile', 'txt']\n\t\t\t}]\n\t\t});\n\n\t\tif (!picked) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst profileInfo = extensionHostProfileService.lastProfile;\n\t\tlet dataToWrite: object = profileInfo ? profileInfo.data : {};\n\n\t\tlet savePath = picked.fsPath;\n\n\t\tif (environmentService.isBuilt) {\n\t\t\t// when running from a not-development-build we remove\n\t\t\t// absolute filenames because we don't want to reveal anything\n\t\t\t// about users. We also append the `.txt` suffix to make it\n\t\t\t// easier to attach these files to GH issues\n\t\t\tdataToWrite = Utils.rewriteAbsolutePaths(dataToWrite as IV8Profile, 'piiRemoved');\n\n\t\t\tsavePath = savePath + '.txt';\n\t\t}\n\n\t\tconst saveURI = URI.file(savePath);\n\t\textensionHostProfileService.lastProfileSavedTo = saveURI;\n\t\treturn fileService.writeFile(saveURI, VSBuffer.fromString(JSON.stringify(profileInfo ? profileInfo.data : {}, null, '\\t')));\n\t}\n}\n\n"]}