{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/extensions/test/electron-browser/extensionsActions.test.ts","vs/workbench/contrib/extensions/test/electron-browser/extensionsActions.test.ts"],"names":[],"mappings":"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","file":"extensionsActions.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { IExtensionsWorkbenchService, ExtensionContainers } from '../../common/extensions.js';\nimport * as ExtensionsActions from '../../browser/extensionsActions.js';\nimport { ExtensionsWorkbenchService } from '../../browser/extensionsWorkbenchService.js';\nimport {\n\tIExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension,\n\tDidUninstallExtensionEvent, InstallExtensionEvent, IExtensionIdentifier, InstallOperation, IExtensionTipsService, InstallExtensionResult, getTargetPlatform, IExtensionsControlManifest, UninstallExtensionEvent, Metadata\n} from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, ExtensionInstallLocation, IProfileAwareExtensionManagementService, IWorkbenchExtensionManagementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService } from '../../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { getGalleryExtensionId } from '../../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { TestExtensionEnablementService } from '../../../../services/extensionManagement/test/browser/extensionEnablementService.test.js';\nimport { ExtensionGalleryService } from '../../../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { IPager } from '../../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IExtensionService, toExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestContextService, TestWorkspaceTrustManagementService } from '../../../../test/common/workbenchTestServices.js';\nimport { TestExtensionTipsService, TestSharedProcessService } from '../../../../test/electron-browser/workbenchTestServices.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { NativeURLService } from '../../../../../platform/url/common/urlService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { RemoteAgentService } from '../../../../services/remote/electron-browser/remoteAgentService.js';\nimport { IExtensionContributions, ExtensionType, IExtensionDescription, IExtension } from '../../../../../platform/extensions/common/extensions.js';\nimport { ISharedProcessService } from '../../../../../platform/ipc/electron-browser/services.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ILabelService, IFormatterChangeEvent } from '../../../../../platform/label/common/label.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { IProgressService } from '../../../../../platform/progress/common/progress.js';\nimport { ProgressService } from '../../../../services/progress/browser/progressService.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { TestEnvironmentService, TestLifecycleService } from '../../../../test/browser/workbenchTestServices.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { INativeWorkbenchEnvironmentService } from '../../../../services/environment/electron-browser/environmentService.js';\nimport { IWorkbenchEnvironmentService } from '../../../../services/environment/common/environmentService.js';\nimport { IUserDataSyncEnablementService } from '../../../../../platform/userDataSync/common/userDataSync.js';\nimport { UserDataSyncEnablementService } from '../../../../../platform/userDataSync/common/userDataSyncEnablementService.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { IWorkspaceTrustManagementService } from '../../../../../platform/workspace/common/workspaceTrust.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { platform } from '../../../../../base/common/platform.js';\nimport { arch } from '../../../../../base/common/process.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IUpdateService, State } from '../../../../../platform/update/common/update.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { IUserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfile.js';\nimport { UserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfileService.js';\nimport { toUserDataProfile } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\n\nlet instantiationService: TestInstantiationService;\nlet installEvent: Emitter<InstallExtensionEvent>,\n\tdidInstallEvent: Emitter<readonly InstallExtensionResult[]>,\n\tuninstallEvent: Emitter<UninstallExtensionEvent>,\n\tdidUninstallEvent: Emitter<DidUninstallExtensionEvent>;\n\nfunction setupTest(disposables: Pick<DisposableStore, 'add'>) {\n\tinstallEvent = disposables.add(new Emitter<InstallExtensionEvent>());\n\tdidInstallEvent = disposables.add(new Emitter<readonly InstallExtensionResult[]>());\n\tuninstallEvent = disposables.add(new Emitter<UninstallExtensionEvent>());\n\tdidUninstallEvent = disposables.add(new Emitter<DidUninstallExtensionEvent>());\n\n\tinstantiationService = disposables.add(new TestInstantiationService());\n\n\tinstantiationService.stub(IEnvironmentService, TestEnvironmentService);\n\tinstantiationService.stub(IWorkbenchEnvironmentService, TestEnvironmentService);\n\n\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\tinstantiationService.stub(ILogService, NullLogService);\n\n\tinstantiationService.stub(IWorkspaceContextService, new TestContextService());\n\tinstantiationService.stub(IFileService, disposables.add(new FileService(new NullLogService())));\n\tinstantiationService.stub(IConfigurationService, new TestConfigurationService());\n\tinstantiationService.stub(IProgressService, ProgressService);\n\tinstantiationService.stub(IProductService, {});\n\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\n\tinstantiationService.stub(IExtensionGalleryService, ExtensionGalleryService);\n\tinstantiationService.stub(ISharedProcessService, TestSharedProcessService);\n\n\tinstantiationService.stub(IWorkbenchExtensionManagementService, {\n\t\tonDidInstallExtensions: didInstallEvent.event,\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tonInstallExtension: installEvent.event as any,\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tonUninstallExtension: uninstallEvent.event as any,\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tonDidUninstallExtension: didUninstallEvent.event as any,\n\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\tonDidChangeProfile: Event.None,\n\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\tasync getInstalled() { return []; },\n\t\tasync getInstalledWorkspaceExtensions() { return []; },\n\t\tasync getExtensionsControlManifest() { return { malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\tasync updateMetadata(local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) {\n\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\treturn local;\n\t\t},\n\t\tasync canInstall() { return true; },\n\t\tasync getTargetPlatform() { return getTargetPlatform(platform, arch); },\n\t});\n\n\tinstantiationService.stub(IRemoteAgentService, RemoteAgentService);\n\n\tconst localExtensionManagementServer = { extensionManagementService: instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService, label: 'local', id: 'vscode-local' };\n\tinstantiationService.stub(IExtensionManagementServerService, {\n\t\tget localExtensionManagementServer(): IExtensionManagementServer {\n\t\t\treturn localExtensionManagementServer;\n\t\t},\n\t\tgetExtensionManagementServer(extension: IExtension): IExtensionManagementServer | null {\n\t\t\tif (extension.location.scheme === Schemas.file) {\n\t\t\t\treturn localExtensionManagementServer;\n\t\t\t}\n\t\t\tthrow new Error(`Invalid Extension ${extension.location}`);\n\t\t}\n\t});\n\n\tinstantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(toUserDataProfile('test', 'test', URI.file('foo'), URI.file('cache')))));\n\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\tinstantiationService.stub(ILabelService, { onDidChangeFormatters: disposables.add(new Emitter<IFormatterChangeEvent>()).event });\n\n\tinstantiationService.stub(ILifecycleService, disposables.add(new TestLifecycleService()));\n\tinstantiationService.stub(IExtensionTipsService, disposables.add(instantiationService.createInstance(TestExtensionTipsService)));\n\tinstantiationService.stub(IExtensionRecommendationsService, {});\n\tinstantiationService.stub(IURLService, NativeURLService);\n\n\tinstantiationService.stub(IExtensionGalleryService, 'isEnabled', true);\n\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', []);\n\tinstantiationService.stub(IExtensionService, { extensions: [], onDidChangeExtensions: Event.None, canAddExtension: (extension: IExtensionDescription) => false, canRemoveExtension: (extension: IExtensionDescription) => false, whenInstalledExtensionsRegistered: () => Promise.resolve(true) });\n\t(<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).reset();\n\n\tinstantiationService.stub(IUserDataSyncEnablementService, disposables.add(instantiationService.createInstance(UserDataSyncEnablementService)));\n\n\tinstantiationService.stub(IUpdateService, { onStateChange: Event.None, state: State.Uninitialized });\n\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\tinstantiationService.stub(IWorkspaceTrustManagementService, disposables.add(new TestWorkspaceTrustManagementService()));\n}\n\n\nsuite('ExtensionsActions', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tsetup(() => setupTest(disposables));\n\n\ttest('Install action is disabled when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Install action when state is installed', () => {\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\treturn workbenchService.queryLocal()\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: local.identifier })));\n\t\t\t\treturn workbenchService.queryGallery(CancellationToken.None)\n\t\t\t\t\t.then((paged) => {\n\t\t\t\t\t\ttestObject.extension = paged.firstPage[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t\tassert.strictEqual('Install', testObject.label);\n\t\t\t\t\t\tassert.strictEqual('extension-action label prominent install hide', testObject.class);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test InstallingLabelAction when state is installing', () => {\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallingLabelAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\treturn workbenchService.queryGallery(CancellationToken.None)\n\t\t\t.then((paged) => {\n\t\t\t\ttestObject.extension = paged.firstPage[0];\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('Installing', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label install installing', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Install action when state is uninstalled', async () => {\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst paged = await workbenchService.queryGallery(CancellationToken.None);\n\t\tconst promise = Event.toPromise(Event.filter(testObject.onDidChange, e => e.enabled === true));\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install', testObject.label);\n\t});\n\n\ttest('Test Install action when extension is system action', () => {\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test Install action when extension doesnot has gallery', () => {\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Uninstall action is disabled when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Uninstall action when state is uninstalling', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('Uninstalling', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label uninstall uninstalling', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action when state is installed and is user extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\tassert.strictEqual('Uninstall', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label uninstall', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action when state is installed and is system extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('Uninstall', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label uninstall', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action when state is installing and is user extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst gallery = aGalleryExtension('a');\n\t\t\t\tconst extension = extensions[0];\n\t\t\t\textension.gallery = gallery;\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\ttestObject.extension = extension;\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action after extension is installed', async () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Uninstall', testObject.label);\n\t\tassert.strictEqual('extension-action label uninstall', testObject.class);\n\t});\n\n\ttest('Test UpdateAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test UpdateAction when extension is uninstalled', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then((paged) => {\n\t\t\t\ttestObject.extension = paged.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installed and not outdated', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: local.identifier, version: local.manifest.version })));\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t\t\t.then(extensions => assert.ok(!testObject.enabled));\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installed outdated and system extension', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: local.identifier, version: '1.0.1' })));\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t\t\t.then(extensions => assert.ok(!testObject.enabled));\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installed outdated and user extension', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\treturn workbenchService.queryLocal()\n\t\t\t.then(async extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.1' });\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery);\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery]);\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\treturn new Promise<void>(c => {\n\t\t\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\t\t\tif (testObject.enabled) {\n\t\t\t\t\t\t\tc();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t\tinstantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installing and outdated and user extension', async () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.1' });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery]);\n\t\tawait new Promise<void>(c => {\n\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\tif (testObject.enabled) {\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tinstantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\t});\n\t\tawait new Promise<void>(c => {\n\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\tif (!testObject.enabled) {\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tinstallEvent.fire({ identifier: local.identifier, source: gallery, profileLocation: null! });\n\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test ManageExtensionAction when extension is installed', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is uninstalled', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage hide', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is installing', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage hide', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is queried from gallery and installed', async () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t});\n\n\ttest('Test ManageExtensionAction when extension is system extension', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is uninstalling', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test EnableForWorkspaceAction when there extension is not disabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when extension is disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when the extension is disabled globally and workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace))\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is not disabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is disabled in both', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace))\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installed and enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installed and disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installed and disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is uninstalled', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installing', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is uninstalling', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableForWorkspaceAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test DisableForWorkspaceAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableForWorkspaceAction when the extension is disabled workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableForWorkspaceAction when extension is enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test DisableGloballyAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when the extension is disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when the extension is enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is installed and enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is installed and disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is uninstalled', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is installing', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is uninstalling', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n});\n\nsuite('ExtensionRuntimeStateAction', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => setupTest(disposables));\n\n\ttest('Test Runtime State when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension state is installing', async () => {\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst paged = await workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension state is uninstalling', async () => {\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is newly installed', async () => {\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tassert.ok(!testObject.enabled);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please restart extensions to enable this extension.`);\n\t});\n\n\ttest('Test Runtime State when extension is newly installed and ext host restart is not required', async () => {\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => true,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tassert.ok(!testObject.enabled);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is installed and uninstalled', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tconst identifier = gallery.identifier;\n\t\tinstallEvent.fire({ identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, { identifier }), profileLocation: null! }]);\n\t\tuninstallEvent.fire({ identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier, profileLocation: null! });\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.0' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please restart extensions to complete the uninstallation of this extension.`);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled and can be removed', async () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => true,\n\t\t\tcanAddExtension: (extension) => true,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled and installed', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.0' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\n\t\ttestObject.extension = extensions[0];\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst identifier = gallery.identifier;\n\t\tinstallEvent.fire({ identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier, source: gallery, operation: InstallOperation.Install, local, profileLocation: null! }]);\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is updated while running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.1' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => true,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' });\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\treturn new Promise<void>(c => {\n\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\tif (testObject.enabled && testObject.tooltip === `Please restart extensions to enable the updated extension.`) {\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tconst gallery = aGalleryExtension('a', { uuid: local.identifier.id, version: '1.0.2' });\n\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\t});\n\t});\n\n\ttest('Test Runtime State when extension is updated when not running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.2' });\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Update, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is disabled when running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.DisabledGlobally);\n\t\tawait testObject.update();\n\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(`Please restart extensions to disable this extension.`, testObject.tooltip);\n\t});\n\n\ttest('Test Runtime State when extension enablement is toggled when running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.0' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.DisabledGlobally);\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is enabled when not running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tawait testObject.update();\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(`Please restart extensions to enable this extension.`, testObject.tooltip);\n\t});\n\n\ttest('Test Runtime State when extension enablement is toggled when not running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.DisabledGlobally);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is updated when not running and enabled', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.2' });\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tawait testObject.update();\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(`Please restart extensions to enable this extension.`, testObject.tooltip);\n\t});\n\n\ttest('Test Runtime State when a localization extension is newly installed', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tassert.ok(!testObject.enabled);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', { ...gallery, ...{ contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } } }, gallery), profileLocation: null! }]);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when a localization extension is updated while running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.1' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.1', contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } });\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tconst gallery = aGalleryExtension('a', { uuid: local.identifier.id, version: '1.0.2' });\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', { ...gallery, ...{ contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } } }, gallery), profileLocation: null! }]);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is not installed but extension from different server is installed and running', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled but extension from different server is installed and running', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst uninstallEvent = new Emitter<UninstallExtensionEvent>();\n\t\tconst onDidUninstallEvent = new Emitter<{ identifier: IExtensionIdentifier; profileLocation: URI }>();\n\t\tlocalExtensionManagementService.onUninstallExtension = uninstallEvent.event;\n\t\tlocalExtensionManagementService.onDidUninstallExtension = onDidUninstallEvent.event;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\n\t\tuninstallEvent.fire({ identifier: localExtension.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: localExtension.identifier, profileLocation: null! });\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when workspace extension is disabled on local server and installed in remote server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst remoteExtensionManagementService = createExtensionManagementService([]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a') });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tonDidInstallEvent.fire([{ identifier: remoteExtension.identifier, local: remoteExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please reload window to enable this extension.`);\n\t});\n\n\ttest('Test Runtime State when ui extension is disabled on remote server and installed in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtensionManagementService = createExtensionManagementService([]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a') });\n\t\tconst promise = Event.toPromise(Event.filter(testObject.onDidChange, () => testObject.enabled));\n\t\tonDidInstallEvent.fire([{ identifier: localExtension.identifier, local: localExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please reload window to enable this extension.`);\n\t});\n\n\ttest('Test Runtime State for remote ui extension is disabled when it is installed and enabled in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a') });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for remote workspace+ui extension is enabled when it is installed and enabled in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a') });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for local ui+workspace extension is enabled when it is installed and enabled in remote server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst remoteExtensionManagementService = createExtensionManagementService([remoteExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for local workspace+ui extension is enabled when it is installed in both servers but running in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a') });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for remote ui+workspace extension is enabled when it is installed on both servers but running in remote server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst remoteExtensionManagementService = createExtensionManagementService([remoteExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when ui+workspace+web extension is installed in web and remote and running in remote', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst webExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'], 'browser': 'browser.js' }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeUserData }) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'], 'browser': 'browser.js' }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, null, createExtensionManagementService([remoteExtension]), createExtensionManagementService([webExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when workspace+ui+web extension is installed in web and local and running in local', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst webExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'], 'browser': 'browser.js' }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeUserData }) });\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'], 'browser': 'browser.js' }, { location: URI.file('pub.a') });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), null, createExtensionManagementService([webExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n});\n\nsuite('RemoteInstallAction', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => setupTest(disposables));\n\n\ttest('Test remote install action is enabled for local workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action when installing local workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tremoteExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: localWorkspaceExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\t});\n\n\ttest('Test remote install action when installing local workspace extension is finished', async () => {\n\t\t// multi server setup\n\t\tconst remoteExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tremoteExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: localWorkspaceExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\n\t\tconst installedExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tonDidInstallEvent.fire([{ identifier: installedExtension.identifier, local: installedExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\t\tawait promise;\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is enabled for disabled local workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([remoteWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is enabled local workspace+ui extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is enabled for local ui+workapace extension if can install is true', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, true));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is disabled for local ui+workapace extension if can install is false', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled when extension is not set', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tawait workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for extension which is not installed', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a')));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst pager = await workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = pager.firstPage[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace extension which is disabled in env', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tconst environmentService = { disableExtensions: true } as INativeWorkbenchEnvironmentService;\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled when remote server is not available', async () => {\n\t\t// single server setup\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst extensionManagementServerService = instantiationService.get(IExtensionManagementServerService);\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localWorkspaceExtension]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace extension if it is uninstalled locally', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localWorkspaceExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: localWorkspaceExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace extension if it is installed in remote', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), createExtensionManagementService([remoteWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is enabled for local workspace extension if it has not gallery', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace system extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceSystemExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`), type: ExtensionType.System });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceSystemExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceSystemExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local ui extension if it is not installed in remote', async () => {\n\t\t// multi server setup\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local ui extension if it is also installed in remote', async () => {\n\t\t// multi server setup\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localUIExtension]), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is enabled for locally installed language pack extension', async () => {\n\t\t// multi server setup\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([languagePackExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is disabled if local language pack extension is uninstalled', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [languagePackExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: languagePackExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n});\n\nsuite('LocalInstallAction', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => setupTest(disposables));\n\n\ttest('Test local install action is enabled for remote ui extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action is enabled for remote ui+workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action when installing remote ui extension', async () => {\n\t\t// multi server setup\n\t\tconst localExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tlocalExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: remoteUIExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: remoteUIExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\t});\n\n\ttest('Test local install action when installing remote ui extension is finished', async () => {\n\t\t// multi server setup\n\t\tconst localExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tlocalExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: remoteUIExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: remoteUIExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\n\t\tconst installedExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tonDidInstallEvent.fire([{ identifier: installedExtension.identifier, local: installedExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\t\tawait promise;\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is enabled for disabled remote ui extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localUIExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action is disabled when extension is not set', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tawait workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for extension which is not installed', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a')));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst pager = await workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = pager.firstPage[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote ui extension which is disabled in env', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst environmentService = { disableExtensions: true } as INativeWorkbenchEnvironmentService;\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeWorkbenchEnvironmentService, environmentService);\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled when local server is not available', async () => {\n\t\t// single server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aSingleRemoteExtensionManagementServerService(instantiationService, createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote ui extension if it is installed in local', async () => {\n\t\t// multi server setup\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localUIExtension]), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remoteUI extension if it is uninstalled locally', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [remoteUIExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: remoteUIExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is enabled for remote UI extension if it has gallery', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote UI system extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUISystemExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }), type: ExtensionType.System });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUISystemExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUISystemExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote workspace extension if it is not installed in local', async () => {\n\t\t// multi server setup\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote workspace extension if it is also installed in local', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspae'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), createExtensionManagementService([remoteWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is enabled for remotely installed language pack extension', async () => {\n\t\t// multi server setup\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([languagePackExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action is disabled if remote language pack extension is uninstalled', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [languagePackExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: languagePackExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n});\n\nfunction aLocalExtension(name: string = 'someext', manifest: any = {}, properties: any = {}): ILocalExtension {\n\tmanifest = { name, publisher: 'pub', version: '1.0.0', ...manifest };\n\tproperties = {\n\t\ttype: ExtensionType.User,\n\t\tlocation: URI.file(`pub.${name}`),\n\t\tidentifier: { id: getGalleryExtensionId(manifest.publisher, manifest.name) },\n\t\t...properties,\n\t\tisValid: properties.isValid ?? true,\n\t};\n\tproperties.isBuiltin = properties.type === ExtensionType.System;\n\treturn <ILocalExtension>Object.create({ manifest, ...properties });\n}\n\nfunction aGalleryExtension(name: string, properties: any = {}, galleryExtensionProperties: any = {}, assets: any = {}): IGalleryExtension {\n\tconst targetPlatform = getTargetPlatform(platform, arch);\n\tconst galleryExtension = <IGalleryExtension>Object.create({ name, publisher: 'pub', version: '1.0.0', allTargetPlatforms: [targetPlatform], properties: {}, assets: {}, isSigned: true, ...properties });\n\tgalleryExtension.properties = { ...galleryExtension.properties, dependencies: [], targetPlatform, ...galleryExtensionProperties };\n\tgalleryExtension.assets = { ...galleryExtension.assets, ...assets };\n\tgalleryExtension.identifier = { id: getGalleryExtensionId(galleryExtension.publisher, galleryExtension.name), uuid: generateUuid() };\n\tgalleryExtension.hasReleaseVersion = true;\n\treturn <IGalleryExtension>galleryExtension;\n}\n\nfunction aPage<T>(...objects: T[]): IPager<T> {\n\treturn { firstPage: objects, total: objects.length, pageSize: objects.length, getPage: () => null! };\n}\n\nfunction aSingleRemoteExtensionManagementServerService(instantiationService: TestInstantiationService, remoteExtensionManagementService?: IProfileAwareExtensionManagementService): IExtensionManagementServerService {\n\tconst remoteExtensionManagementServer: IExtensionManagementServer = {\n\t\tid: 'vscode-remote',\n\t\tlabel: 'remote',\n\t\textensionManagementService: remoteExtensionManagementService || createExtensionManagementService(),\n\t};\n\treturn {\n\t\t_serviceBrand: undefined,\n\t\tlocalExtensionManagementServer: null,\n\t\tremoteExtensionManagementServer,\n\t\twebExtensionManagementServer: null,\n\t\tgetExtensionManagementServer: (extension: IExtension) => {\n\t\t\tif (extension.location.scheme === Schemas.vscodeRemote) {\n\t\t\t\treturn remoteExtensionManagementServer;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetExtensionInstallLocation(extension: IExtension): ExtensionInstallLocation | null {\n\t\t\tconst server = this.getExtensionManagementServer(extension);\n\t\t\treturn server === remoteExtensionManagementServer ? ExtensionInstallLocation.Remote : ExtensionInstallLocation.Local;\n\t\t}\n\t};\n}\n\nfunction aMultiExtensionManagementServerService(instantiationService: TestInstantiationService, localExtensionManagementService?: IProfileAwareExtensionManagementService | null, remoteExtensionManagementService?: IProfileAwareExtensionManagementService | null, webExtensionManagementService?: IProfileAwareExtensionManagementService): IExtensionManagementServerService {\n\tconst localExtensionManagementServer: IExtensionManagementServer | null = localExtensionManagementService === null ? null : {\n\t\tid: 'vscode-local',\n\t\tlabel: 'local',\n\t\textensionManagementService: localExtensionManagementService || createExtensionManagementService(),\n\t};\n\tconst remoteExtensionManagementServer: IExtensionManagementServer | null = remoteExtensionManagementService === null ? null : {\n\t\tid: 'vscode-remote',\n\t\tlabel: 'remote',\n\t\textensionManagementService: remoteExtensionManagementService || createExtensionManagementService(),\n\t};\n\tconst webExtensionManagementServer: IExtensionManagementServer | null = webExtensionManagementService ? {\n\t\tid: 'vscode-web',\n\t\tlabel: 'web',\n\t\textensionManagementService: webExtensionManagementService,\n\t} : null;\n\treturn {\n\t\t_serviceBrand: undefined,\n\t\tlocalExtensionManagementServer,\n\t\tremoteExtensionManagementServer,\n\t\twebExtensionManagementServer,\n\t\tgetExtensionManagementServer: (extension: IExtension) => {\n\t\t\tif (extension.location.scheme === Schemas.file) {\n\t\t\t\treturn localExtensionManagementServer;\n\t\t\t}\n\t\t\tif (extension.location.scheme === Schemas.vscodeRemote) {\n\t\t\t\treturn remoteExtensionManagementServer;\n\t\t\t}\n\t\t\tif (extension.location.scheme === Schemas.vscodeUserData) {\n\t\t\t\treturn webExtensionManagementServer;\n\t\t\t}\n\t\t\tthrow new Error('');\n\t\t},\n\t\tgetExtensionInstallLocation(extension: IExtension): ExtensionInstallLocation | null {\n\t\t\tconst server = this.getExtensionManagementServer(extension);\n\t\t\tif (server === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (server === remoteExtensionManagementServer) {\n\t\t\t\treturn ExtensionInstallLocation.Remote;\n\t\t\t}\n\t\t\tif (server === webExtensionManagementServer) {\n\t\t\t\treturn ExtensionInstallLocation.Web;\n\t\t\t}\n\t\t\treturn ExtensionInstallLocation.Local;\n\t\t}\n\t};\n}\n\nfunction createExtensionManagementService(installed: ILocalExtension[] = []): IProfileAwareExtensionManagementService {\n\treturn <IProfileAwareExtensionManagementService>{\n\t\tonInstallExtension: Event.None,\n\t\tonDidInstallExtensions: Event.None,\n\t\tonUninstallExtension: Event.None,\n\t\tonDidUninstallExtension: Event.None,\n\t\tonDidChangeProfile: Event.None,\n\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\tgetInstalled: () => Promise.resolve<ILocalExtension[]>(installed),\n\t\tcanInstall: async (extension: IGalleryExtension) => { return true; },\n\t\tinstallFromGallery: (extension: IGalleryExtension) => Promise.reject(new Error('not supported')),\n\t\tupdateMetadata: async (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>, profileLocation: URI) => {\n\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\treturn local;\n\t\t},\n\t\tasync getTargetPlatform() { return getTargetPlatform(platform, arch); },\n\t\tasync getExtensionsControlManifest() { return <IExtensionsControlManifest>{ malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { IExtensionsWorkbenchService, ExtensionContainers } from '../../common/extensions.js';\nimport * as ExtensionsActions from '../../browser/extensionsActions.js';\nimport { ExtensionsWorkbenchService } from '../../browser/extensionsWorkbenchService.js';\nimport {\n\tIExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension,\n\tDidUninstallExtensionEvent, InstallExtensionEvent, IExtensionIdentifier, InstallOperation, IExtensionTipsService, InstallExtensionResult, getTargetPlatform, IExtensionsControlManifest, UninstallExtensionEvent, Metadata\n} from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, ExtensionInstallLocation, IProfileAwareExtensionManagementService, IWorkbenchExtensionManagementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService } from '../../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { getGalleryExtensionId } from '../../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { TestExtensionEnablementService } from '../../../../services/extensionManagement/test/browser/extensionEnablementService.test.js';\nimport { ExtensionGalleryService } from '../../../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { IPager } from '../../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IExtensionService, toExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestContextService, TestWorkspaceTrustManagementService } from '../../../../test/common/workbenchTestServices.js';\nimport { TestExtensionTipsService, TestSharedProcessService } from '../../../../test/electron-browser/workbenchTestServices.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { NativeURLService } from '../../../../../platform/url/common/urlService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { RemoteAgentService } from '../../../../services/remote/electron-browser/remoteAgentService.js';\nimport { IExtensionContributions, ExtensionType, IExtensionDescription, IExtension } from '../../../../../platform/extensions/common/extensions.js';\nimport { ISharedProcessService } from '../../../../../platform/ipc/electron-browser/services.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ILabelService, IFormatterChangeEvent } from '../../../../../platform/label/common/label.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { IProgressService } from '../../../../../platform/progress/common/progress.js';\nimport { ProgressService } from '../../../../services/progress/browser/progressService.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { TestEnvironmentService, TestLifecycleService } from '../../../../test/browser/workbenchTestServices.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { INativeWorkbenchEnvironmentService } from '../../../../services/environment/electron-browser/environmentService.js';\nimport { IWorkbenchEnvironmentService } from '../../../../services/environment/common/environmentService.js';\nimport { IUserDataSyncEnablementService } from '../../../../../platform/userDataSync/common/userDataSync.js';\nimport { UserDataSyncEnablementService } from '../../../../../platform/userDataSync/common/userDataSyncEnablementService.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { IWorkspaceTrustManagementService } from '../../../../../platform/workspace/common/workspaceTrust.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { platform } from '../../../../../base/common/platform.js';\nimport { arch } from '../../../../../base/common/process.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IUpdateService, State } from '../../../../../platform/update/common/update.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { IUserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfile.js';\nimport { UserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfileService.js';\nimport { toUserDataProfile } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\n\nlet instantiationService: TestInstantiationService;\nlet installEvent: Emitter<InstallExtensionEvent>,\n\tdidInstallEvent: Emitter<readonly InstallExtensionResult[]>,\n\tuninstallEvent: Emitter<UninstallExtensionEvent>,\n\tdidUninstallEvent: Emitter<DidUninstallExtensionEvent>;\n\nfunction setupTest(disposables: Pick<DisposableStore, 'add'>) {\n\tinstallEvent = disposables.add(new Emitter<InstallExtensionEvent>());\n\tdidInstallEvent = disposables.add(new Emitter<readonly InstallExtensionResult[]>());\n\tuninstallEvent = disposables.add(new Emitter<UninstallExtensionEvent>());\n\tdidUninstallEvent = disposables.add(new Emitter<DidUninstallExtensionEvent>());\n\n\tinstantiationService = disposables.add(new TestInstantiationService());\n\n\tinstantiationService.stub(IEnvironmentService, TestEnvironmentService);\n\tinstantiationService.stub(IWorkbenchEnvironmentService, TestEnvironmentService);\n\n\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\tinstantiationService.stub(ILogService, NullLogService);\n\n\tinstantiationService.stub(IWorkspaceContextService, new TestContextService());\n\tinstantiationService.stub(IFileService, disposables.add(new FileService(new NullLogService())));\n\tinstantiationService.stub(IConfigurationService, new TestConfigurationService());\n\tinstantiationService.stub(IProgressService, ProgressService);\n\tinstantiationService.stub(IProductService, {});\n\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\n\tinstantiationService.stub(IExtensionGalleryService, ExtensionGalleryService);\n\tinstantiationService.stub(ISharedProcessService, TestSharedProcessService);\n\n\tinstantiationService.stub(IWorkbenchExtensionManagementService, {\n\t\tonDidInstallExtensions: didInstallEvent.event,\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tonInstallExtension: installEvent.event as any,\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tonUninstallExtension: uninstallEvent.event as any,\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tonDidUninstallExtension: didUninstallEvent.event as any,\n\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\tonDidChangeProfile: Event.None,\n\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\tasync getInstalled() { return []; },\n\t\tasync getInstalledWorkspaceExtensions() { return []; },\n\t\tasync getExtensionsControlManifest() { return { malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\tasync updateMetadata(local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) {\n\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\treturn local;\n\t\t},\n\t\tasync canInstall() { return true; },\n\t\tasync getTargetPlatform() { return getTargetPlatform(platform, arch); },\n\t});\n\n\tinstantiationService.stub(IRemoteAgentService, RemoteAgentService);\n\n\tconst localExtensionManagementServer = { extensionManagementService: instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService, label: 'local', id: 'vscode-local' };\n\tinstantiationService.stub(IExtensionManagementServerService, {\n\t\tget localExtensionManagementServer(): IExtensionManagementServer {\n\t\t\treturn localExtensionManagementServer;\n\t\t},\n\t\tgetExtensionManagementServer(extension: IExtension): IExtensionManagementServer | null {\n\t\t\tif (extension.location.scheme === Schemas.file) {\n\t\t\t\treturn localExtensionManagementServer;\n\t\t\t}\n\t\t\tthrow new Error(`Invalid Extension ${extension.location}`);\n\t\t}\n\t});\n\n\tinstantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(toUserDataProfile('test', 'test', URI.file('foo'), URI.file('cache')))));\n\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\tinstantiationService.stub(ILabelService, { onDidChangeFormatters: disposables.add(new Emitter<IFormatterChangeEvent>()).event });\n\n\tinstantiationService.stub(ILifecycleService, disposables.add(new TestLifecycleService()));\n\tinstantiationService.stub(IExtensionTipsService, disposables.add(instantiationService.createInstance(TestExtensionTipsService)));\n\tinstantiationService.stub(IExtensionRecommendationsService, {});\n\tinstantiationService.stub(IURLService, NativeURLService);\n\n\tinstantiationService.stub(IExtensionGalleryService, 'isEnabled', true);\n\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', []);\n\tinstantiationService.stub(IExtensionService, { extensions: [], onDidChangeExtensions: Event.None, canAddExtension: (extension: IExtensionDescription) => false, canRemoveExtension: (extension: IExtensionDescription) => false, whenInstalledExtensionsRegistered: () => Promise.resolve(true) });\n\t(<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).reset();\n\n\tinstantiationService.stub(IUserDataSyncEnablementService, disposables.add(instantiationService.createInstance(UserDataSyncEnablementService)));\n\n\tinstantiationService.stub(IUpdateService, { onStateChange: Event.None, state: State.Uninitialized });\n\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\tinstantiationService.stub(IWorkspaceTrustManagementService, disposables.add(new TestWorkspaceTrustManagementService()));\n}\n\n\nsuite('ExtensionsActions', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tsetup(() => setupTest(disposables));\n\n\ttest('Install action is disabled when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Install action when state is installed', () => {\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\treturn workbenchService.queryLocal()\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: local.identifier })));\n\t\t\t\treturn workbenchService.queryGallery(CancellationToken.None)\n\t\t\t\t\t.then((paged) => {\n\t\t\t\t\t\ttestObject.extension = paged.firstPage[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t\tassert.strictEqual('Install', testObject.label);\n\t\t\t\t\t\tassert.strictEqual('extension-action label prominent install hide', testObject.class);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test InstallingLabelAction when state is installing', () => {\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallingLabelAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\treturn workbenchService.queryGallery(CancellationToken.None)\n\t\t\t.then((paged) => {\n\t\t\t\ttestObject.extension = paged.firstPage[0];\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('Installing', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label install installing', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Install action when state is uninstalled', async () => {\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst paged = await workbenchService.queryGallery(CancellationToken.None);\n\t\tconst promise = Event.toPromise(Event.filter(testObject.onDidChange, e => e.enabled === true));\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install', testObject.label);\n\t});\n\n\ttest('Test Install action when extension is system action', () => {\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test Install action when extension doesnot has gallery', () => {\n\t\tconst testObject: ExtensionsActions.InstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.InstallAction, { installPreReleaseVersion: false }));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Uninstall action is disabled when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Uninstall action when state is uninstalling', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('Uninstalling', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label uninstall uninstalling', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action when state is installed and is user extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\tassert.strictEqual('Uninstall', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label uninstall', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action when state is installed and is system extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('Uninstall', testObject.label);\n\t\t\t\tassert.strictEqual('extension-action label uninstall', testObject.class);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action when state is installing and is user extension', () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst gallery = aGalleryExtension('a');\n\t\t\t\tconst extension = extensions[0];\n\t\t\t\textension.gallery = gallery;\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\ttestObject.extension = extension;\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test Uninstall action after extension is installed', async () => {\n\t\tconst testObject: ExtensionsActions.UninstallAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UninstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Uninstall', testObject.label);\n\t\tassert.strictEqual('extension-action label uninstall', testObject.class);\n\t});\n\n\ttest('Test UpdateAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test UpdateAction when extension is uninstalled', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then((paged) => {\n\t\t\t\ttestObject.extension = paged.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installed and not outdated', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: local.identifier, version: local.manifest.version })));\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t\t\t.then(extensions => assert.ok(!testObject.enabled));\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installed outdated and system extension', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: local.identifier, version: '1.0.1' })));\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t\t\t.then(extensions => assert.ok(!testObject.enabled));\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installed outdated and user extension', () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\treturn workbenchService.queryLocal()\n\t\t\t.then(async extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.1' });\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery);\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery]);\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\treturn new Promise<void>(c => {\n\t\t\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\t\t\tif (testObject.enabled) {\n\t\t\t\t\t\t\tc();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t\tinstantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test UpdateAction when extension is installing and outdated and user extension', async () => {\n\t\tconst testObject: ExtensionsActions.UpdateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.UpdateAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.0' });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.1' });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery]);\n\t\tawait new Promise<void>(c => {\n\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\tif (testObject.enabled) {\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tinstantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\t});\n\t\tawait new Promise<void>(c => {\n\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\tif (!testObject.enabled) {\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tinstallEvent.fire({ identifier: local.identifier, source: gallery, profileLocation: null! });\n\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test ManageExtensionAction when extension is installed', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is uninstalled', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage hide', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is installing', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage hide', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is queried from gallery and installed', async () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t});\n\n\ttest('Test ManageExtensionAction when extension is system extension', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test ManageExtensionAction when extension is uninstalling', () => {\n\t\tconst testObject: ExtensionsActions.ManageExtensionAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ManageExtensionAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\tassert.strictEqual('extension-action icon manage codicon codicon-extensions-manage', testObject.class);\n\t\t\t\tassert.strictEqual('Manage', testObject.tooltip);\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test EnableForWorkspaceAction when there extension is not disabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when extension is disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableForWorkspaceAction when the extension is disabled globally and workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace))\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is not disabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableGloballyAction when the extension is disabled in both', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace))\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installed and enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installed and disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installed and disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is uninstalled', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is installing', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test EnableDropDownAction when extension is uninstalling', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.EnableDropDownAction = disposables.add(instantiationService.createInstance(ExtensionsActions.EnableDropDownAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableForWorkspaceAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test DisableForWorkspaceAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableForWorkspaceAction when the extension is disabled workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableForWorkspaceAction when extension is enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableForWorkspaceAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableForWorkspaceAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test DisableGloballyAction when the extension is disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when the extension is disabled for workspace', () => {\n\t\tconst local = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when the extension is enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is installed and enabled', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tassert.ok(testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is installed and disabled globally', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\t\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t\t\t.then(extensions => {\n\t\t\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is uninstalled', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is installing', () => {\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None)\n\t\t\t.then(page => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = page.firstPage[0];\n\t\t\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n\ttest('Test DisableGloballyAction when extension is uninstalling', () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\n\t\treturn instantiationService.get(IExtensionsWorkbenchService).queryLocal()\n\t\t\t.then(extensions => {\n\t\t\t\tconst testObject: ExtensionsActions.DisableGloballyAction = disposables.add(instantiationService.createInstance(ExtensionsActions.DisableGloballyAction));\n\t\t\t\ttestObject.extension = extensions[0];\n\t\t\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\t\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\t\t\tassert.ok(!testObject.enabled);\n\t\t\t});\n\t});\n\n});\n\nsuite('ExtensionRuntimeStateAction', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => setupTest(disposables));\n\n\ttest('Test Runtime State when there is no extension', () => {\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension state is installing', async () => {\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst paged = await workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension state is uninstalling', async () => {\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is newly installed', async () => {\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tassert.ok(!testObject.enabled);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please restart extensions to enable this extension.`);\n\t});\n\n\ttest('Test Runtime State when extension is newly installed and ext host restart is not required', async () => {\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => true,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tassert.ok(!testObject.enabled);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is installed and uninstalled', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tconst identifier = gallery.identifier;\n\t\tinstallEvent.fire({ identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, { identifier }), profileLocation: null! }]);\n\t\tuninstallEvent.fire({ identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier, profileLocation: null! });\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.0' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please restart extensions to complete the uninstallation of this extension.`);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled and can be removed', async () => {\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(local)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => true,\n\t\t\tcanAddExtension: (extension) => true,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled and installed', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.0' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await instantiationService.get(IExtensionsWorkbenchService).queryLocal();\n\n\t\ttestObject.extension = extensions[0];\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst identifier = gallery.identifier;\n\t\tinstallEvent.fire({ identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier, source: gallery, operation: InstallOperation.Install, local, profileLocation: null! }]);\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is updated while running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.1' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => true,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' });\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\treturn new Promise<void>(c => {\n\t\t\tdisposables.add(testObject.onDidChange(() => {\n\t\t\t\tif (testObject.enabled && testObject.tooltip === `Please restart extensions to enable the updated extension.`) {\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tconst gallery = aGalleryExtension('a', { uuid: local.identifier.id, version: '1.0.2' });\n\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\t});\n\t});\n\n\ttest('Test Runtime State when extension is updated when not running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.2' });\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Update, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is disabled when running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.DisabledGlobally);\n\t\tawait testObject.update();\n\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(`Please restart extensions to disable this extension.`, testObject.tooltip);\n\t});\n\n\ttest('Test Runtime State when extension enablement is toggled when running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.0' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a');\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.DisabledGlobally);\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is enabled when not running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tawait testObject.update();\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(`Please restart extensions to enable this extension.`, testObject.tooltip);\n\t});\n\n\ttest('Test Runtime State when extension enablement is toggled when not running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.DisabledGlobally);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is updated when not running and enabled', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: local.identifier, version: '1.0.2' });\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', gallery, gallery), profileLocation: null! }]);\n\t\tawait workbenchService.setEnablement(extensions[0], EnablementState.EnabledGlobally);\n\t\tawait testObject.update();\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(`Please restart extensions to enable this extension.`, testObject.tooltip);\n\t});\n\n\ttest('Test Runtime State when a localization extension is newly installed', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('b'))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst gallery = aGalleryExtension('a');\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst paged = await instantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\ttestObject.extension = paged.firstPage[0];\n\t\tassert.ok(!testObject.enabled);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', { ...gallery, ...{ contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } } }, gallery), profileLocation: null! }]);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when a localization extension is updated while running', async () => {\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(aLocalExtension('a', { version: '1.0.1' }))],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanRemoveExtension: (extension) => false,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tconst local = aLocalExtension('a', { version: '1.0.1', contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } });\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst extensions = await workbenchService.queryLocal();\n\t\ttestObject.extension = extensions[0];\n\n\t\tconst gallery = aGalleryExtension('a', { uuid: local.identifier.id, version: '1.0.2' });\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension('a', { ...gallery, ...{ contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } } }, gallery), profileLocation: null! }]);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is not installed but extension from different server is installed and running', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when extension is uninstalled but extension from different server is installed and running', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst uninstallEvent = new Emitter<UninstallExtensionEvent>();\n\t\tconst onDidUninstallEvent = new Emitter<{ identifier: IExtensionIdentifier; profileLocation: URI }>();\n\t\tlocalExtensionManagementService.onUninstallExtension = uninstallEvent.event;\n\t\tlocalExtensionManagementService.onDidUninstallExtension = onDidUninstallEvent.event;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\n\t\tuninstallEvent.fire({ identifier: localExtension.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: localExtension.identifier, profileLocation: null! });\n\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when workspace extension is disabled on local server and installed in remote server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst remoteExtensionManagementService = createExtensionManagementService([]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a') });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tonDidInstallEvent.fire([{ identifier: remoteExtension.identifier, local: remoteExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please reload window to enable this extension.`);\n\t});\n\n\ttest('Test Runtime State when ui extension is disabled on remote server and installed in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtensionManagementService = createExtensionManagementService([]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a') });\n\t\tconst promise = Event.toPromise(Event.filter(testObject.onDidChange, () => testObject.enabled));\n\t\tonDidInstallEvent.fire([{ identifier: localExtension.identifier, local: localExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\n\t\tawait promise;\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual(testObject.tooltip, `Please reload window to enable this extension.`);\n\t});\n\n\ttest('Test Runtime State for remote ui extension is disabled when it is installed and enabled in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a') });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for remote workspace+ui extension is enabled when it is installed and enabled in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a') });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for local ui+workspace extension is enabled when it is installed and enabled in remote server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst remoteExtensionManagementService = createExtensionManagementService([remoteExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for local workspace+ui extension is enabled when it is installed in both servers but running in local server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a') });\n\t\tconst localExtensionManagementService = createExtensionManagementService([localExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State for remote ui+workspace extension is enabled when it is installed on both servers but running in remote server', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a') });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst remoteExtensionManagementService = createExtensionManagementService([remoteExtension]);\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst onDidChangeExtensionsEmitter = new Emitter<{ added: IExtensionDescription[]; removed: IExtensionDescription[] }>();\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: onDidChangeExtensionsEmitter.event,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when ui+workspace+web extension is installed in web and remote and running in remote', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst webExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'], 'browser': 'browser.js' }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeUserData }) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'], 'browser': 'browser.js' }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, null, createExtensionManagementService([remoteExtension]), createExtensionManagementService([webExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(remoteExtension)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test Runtime State when workspace+ui+web extension is installed in web and local and running in local', async () => {\n\t\t// multi server setup\n\t\tconst gallery = aGalleryExtension('a');\n\t\tconst webExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'], 'browser': 'browser.js' }, { location: URI.file('pub.a').with({ scheme: Schemas.vscodeUserData }) });\n\t\tconst localExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'], 'browser': 'browser.js' }, { location: URI.file('pub.a') });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), null, createExtensionManagementService([webExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\textensions: [toExtensionDescription(localExtension)],\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\tcanAddExtension: (extension) => false,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst testObject: ExtensionsActions.ExtensionRuntimeStateAction = disposables.add(instantiationService.createInstance(ExtensionsActions.ExtensionRuntimeStateAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n});\n\nsuite('RemoteInstallAction', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => setupTest(disposables));\n\n\ttest('Test remote install action is enabled for local workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action when installing local workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tremoteExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: localWorkspaceExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\t});\n\n\ttest('Test remote install action when installing local workspace extension is finished', async () => {\n\t\t// multi server setup\n\t\tconst remoteExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tremoteExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tremoteExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), remoteExtensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: localWorkspaceExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\n\t\tconst installedExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tonDidInstallEvent.fire([{ identifier: installedExtension.identifier, local: installedExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\t\tawait promise;\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is enabled for disabled local workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([remoteWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is enabled local workspace+ui extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace', 'ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is enabled for local ui+workapace extension if can install is true', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, true));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is disabled for local ui+workapace extension if can install is false', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localWorkspaceExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled when extension is not set', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tawait workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for extension which is not installed', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a')));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst pager = await workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = pager.firstPage[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace extension which is disabled in env', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tconst environmentService = { disableExtensions: true } as INativeWorkbenchEnvironmentService;\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled when remote server is not available', async () => {\n\t\t// single server setup\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst extensionManagementServerService = instantiationService.get(IExtensionManagementServerService);\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localWorkspaceExtension]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace extension if it is uninstalled locally', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localWorkspaceExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: localWorkspaceExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace extension if it is installed in remote', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), createExtensionManagementService([remoteWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is enabled for local workspace extension if it has not gallery', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local workspace system extension', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceSystemExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`), type: ExtensionType.System });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceSystemExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceSystemExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local ui extension if it is not installed in remote', async () => {\n\t\t// multi server setup\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is disabled for local ui extension if it is also installed in remote', async () => {\n\t\t// multi server setup\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localUIExtension]), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test remote install action is enabled for locally installed language pack extension', async () => {\n\t\t// multi server setup\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([languagePackExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test remote install action is disabled if local language pack extension is uninstalled', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [languagePackExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.RemoteInstallAction, false));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.localExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install in remote', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: languagePackExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n});\n\nsuite('LocalInstallAction', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => setupTest(disposables));\n\n\ttest('Test local install action is enabled for remote ui extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action is enabled for remote ui+workspace extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui', 'workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action when installing remote ui extension', async () => {\n\t\t// multi server setup\n\t\tconst localExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tlocalExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: remoteUIExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: remoteUIExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\t});\n\n\ttest('Test local install action when installing remote ui extension is finished', async () => {\n\t\t// multi server setup\n\t\tconst localExtensionManagementService = createExtensionManagementService();\n\t\tconst onInstallExtension = new Emitter<InstallExtensionEvent>();\n\t\tlocalExtensionManagementService.onInstallExtension = onInstallExtension.event;\n\t\tconst onDidInstallEvent = new Emitter<readonly InstallExtensionResult[]>();\n\t\tlocalExtensionManagementService.onDidInstallExtensions = onDidInstallEvent.event;\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, localExtensionManagementService, createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.stub(IExtensionsWorkbenchService, workbenchService, 'open', undefined);\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst gallery = aGalleryExtension('a', { identifier: remoteUIExtension.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\n\t\tonInstallExtension.fire({ identifier: remoteUIExtension.identifier, source: gallery, profileLocation: null! });\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Installing', testObject.label);\n\t\tassert.strictEqual('extension-action label install-other-server installing', testObject.class);\n\n\t\tconst installedExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst promise = Event.toPromise(testObject.onDidChange);\n\t\tonDidInstallEvent.fire([{ identifier: installedExtension.identifier, local: installedExtension, operation: InstallOperation.Install, profileLocation: null! }]);\n\t\tawait promise;\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is enabled for disabled remote ui extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localUIExtension], EnablementState.DisabledGlobally);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action is disabled when extension is not set', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tawait workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for extension which is not installed', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a')));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst pager = await workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = pager.firstPage[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote ui extension which is disabled in env', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst environmentService = { disableExtensions: true } as INativeWorkbenchEnvironmentService;\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(INativeWorkbenchEnvironmentService, environmentService);\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled when local server is not available', async () => {\n\t\t// single server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aSingleRemoteExtensionManagementServerService(instantiationService, createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote ui extension if it is installed in local', async () => {\n\t\t// multi server setup\n\t\tconst localUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localUIExtension]), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remoteUI extension if it is uninstalled locally', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [remoteUIExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: remoteUIExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is enabled for remote UI extension if it has gallery', async () => {\n\t\t// multi server setup\n\t\tconst remoteUIExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUIExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUIExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote UI system extension', async () => {\n\t\t// multi server setup\n\t\tconst remoteUISystemExtension = aLocalExtension('a', { extensionKind: ['ui'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }), type: ExtensionType.System });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteUISystemExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteUISystemExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote workspace extension if it is not installed in local', async () => {\n\t\t// multi server setup\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: remoteWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is disabled for remote workspace extension if it is also installed in local', async () => {\n\t\t// multi server setup\n\t\tconst localWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspae'] }, { location: URI.file(`pub.a`) });\n\t\tconst remoteWorkspaceExtension = aLocalExtension('a', { extensionKind: ['workspace'] }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localWorkspaceExtension]), createExtensionManagementService([remoteWorkspaceExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: localWorkspaceExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.extension);\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n\ttest('Test local install action is enabled for remotely installed language pack extension', async () => {\n\t\t// multi server setup\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([languagePackExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\t\tassert.strictEqual('extension-action label prominent install-other-server', testObject.class);\n\t});\n\n\ttest('Test local install action is disabled if remote language pack extension is uninstalled', async () => {\n\t\t// multi server setup\n\t\tconst extensionManagementService = instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService;\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), extensionManagementService);\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposables.add(new TestExtensionEnablementService(instantiationService)));\n\t\tconst languagePackExtension = aLocalExtension('a', { contributes: <IExtensionContributions>{ localizations: [{ languageId: 'de', translations: [] }] } }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [languagePackExtension]);\n\t\tconst workbenchService: IExtensionsWorkbenchService = disposables.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tinstantiationService.set(IExtensionsWorkbenchService, workbenchService);\n\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a', { identifier: languagePackExtension.identifier })));\n\t\tconst testObject = disposables.add(instantiationService.createInstance(ExtensionsActions.LocalInstallAction));\n\t\tdisposables.add(instantiationService.createInstance(ExtensionContainers, [testObject]));\n\n\t\tconst extensions = await workbenchService.queryLocal(extensionManagementServerService.remoteExtensionManagementServer!);\n\t\tawait workbenchService.queryGallery(CancellationToken.None);\n\t\ttestObject.extension = extensions[0];\n\t\tassert.ok(testObject.enabled);\n\t\tassert.strictEqual('Install Locally', testObject.label);\n\n\t\tuninstallEvent.fire({ identifier: languagePackExtension.identifier, profileLocation: null! });\n\t\tassert.ok(!testObject.enabled);\n\t});\n\n});\n\nfunction aLocalExtension(name: string = 'someext', manifest: any = {}, properties: any = {}): ILocalExtension {\n\tmanifest = { name, publisher: 'pub', version: '1.0.0', ...manifest };\n\tproperties = {\n\t\ttype: ExtensionType.User,\n\t\tlocation: URI.file(`pub.${name}`),\n\t\tidentifier: { id: getGalleryExtensionId(manifest.publisher, manifest.name) },\n\t\t...properties,\n\t\tisValid: properties.isValid ?? true,\n\t};\n\tproperties.isBuiltin = properties.type === ExtensionType.System;\n\treturn <ILocalExtension>Object.create({ manifest, ...properties });\n}\n\nfunction aGalleryExtension(name: string, properties: any = {}, galleryExtensionProperties: any = {}, assets: any = {}): IGalleryExtension {\n\tconst targetPlatform = getTargetPlatform(platform, arch);\n\tconst galleryExtension = <IGalleryExtension>Object.create({ name, publisher: 'pub', version: '1.0.0', allTargetPlatforms: [targetPlatform], properties: {}, assets: {}, isSigned: true, ...properties });\n\tgalleryExtension.properties = { ...galleryExtension.properties, dependencies: [], targetPlatform, ...galleryExtensionProperties };\n\tgalleryExtension.assets = { ...galleryExtension.assets, ...assets };\n\tgalleryExtension.identifier = { id: getGalleryExtensionId(galleryExtension.publisher, galleryExtension.name), uuid: generateUuid() };\n\tgalleryExtension.hasReleaseVersion = true;\n\treturn <IGalleryExtension>galleryExtension;\n}\n\nfunction aPage<T>(...objects: T[]): IPager<T> {\n\treturn { firstPage: objects, total: objects.length, pageSize: objects.length, getPage: () => null! };\n}\n\nfunction aSingleRemoteExtensionManagementServerService(instantiationService: TestInstantiationService, remoteExtensionManagementService?: IProfileAwareExtensionManagementService): IExtensionManagementServerService {\n\tconst remoteExtensionManagementServer: IExtensionManagementServer = {\n\t\tid: 'vscode-remote',\n\t\tlabel: 'remote',\n\t\textensionManagementService: remoteExtensionManagementService || createExtensionManagementService(),\n\t};\n\treturn {\n\t\t_serviceBrand: undefined,\n\t\tlocalExtensionManagementServer: null,\n\t\tremoteExtensionManagementServer,\n\t\twebExtensionManagementServer: null,\n\t\tgetExtensionManagementServer: (extension: IExtension) => {\n\t\t\tif (extension.location.scheme === Schemas.vscodeRemote) {\n\t\t\t\treturn remoteExtensionManagementServer;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tgetExtensionInstallLocation(extension: IExtension): ExtensionInstallLocation | null {\n\t\t\tconst server = this.getExtensionManagementServer(extension);\n\t\t\treturn server === remoteExtensionManagementServer ? ExtensionInstallLocation.Remote : ExtensionInstallLocation.Local;\n\t\t}\n\t};\n}\n\nfunction aMultiExtensionManagementServerService(instantiationService: TestInstantiationService, localExtensionManagementService?: IProfileAwareExtensionManagementService | null, remoteExtensionManagementService?: IProfileAwareExtensionManagementService | null, webExtensionManagementService?: IProfileAwareExtensionManagementService): IExtensionManagementServerService {\n\tconst localExtensionManagementServer: IExtensionManagementServer | null = localExtensionManagementService === null ? null : {\n\t\tid: 'vscode-local',\n\t\tlabel: 'local',\n\t\textensionManagementService: localExtensionManagementService || createExtensionManagementService(),\n\t};\n\tconst remoteExtensionManagementServer: IExtensionManagementServer | null = remoteExtensionManagementService === null ? null : {\n\t\tid: 'vscode-remote',\n\t\tlabel: 'remote',\n\t\textensionManagementService: remoteExtensionManagementService || createExtensionManagementService(),\n\t};\n\tconst webExtensionManagementServer: IExtensionManagementServer | null = webExtensionManagementService ? {\n\t\tid: 'vscode-web',\n\t\tlabel: 'web',\n\t\textensionManagementService: webExtensionManagementService,\n\t} : null;\n\treturn {\n\t\t_serviceBrand: undefined,\n\t\tlocalExtensionManagementServer,\n\t\tremoteExtensionManagementServer,\n\t\twebExtensionManagementServer,\n\t\tgetExtensionManagementServer: (extension: IExtension) => {\n\t\t\tif (extension.location.scheme === Schemas.file) {\n\t\t\t\treturn localExtensionManagementServer;\n\t\t\t}\n\t\t\tif (extension.location.scheme === Schemas.vscodeRemote) {\n\t\t\t\treturn remoteExtensionManagementServer;\n\t\t\t}\n\t\t\tif (extension.location.scheme === Schemas.vscodeUserData) {\n\t\t\t\treturn webExtensionManagementServer;\n\t\t\t}\n\t\t\tthrow new Error('');\n\t\t},\n\t\tgetExtensionInstallLocation(extension: IExtension): ExtensionInstallLocation | null {\n\t\t\tconst server = this.getExtensionManagementServer(extension);\n\t\t\tif (server === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (server === remoteExtensionManagementServer) {\n\t\t\t\treturn ExtensionInstallLocation.Remote;\n\t\t\t}\n\t\t\tif (server === webExtensionManagementServer) {\n\t\t\t\treturn ExtensionInstallLocation.Web;\n\t\t\t}\n\t\t\treturn ExtensionInstallLocation.Local;\n\t\t}\n\t};\n}\n\nfunction createExtensionManagementService(installed: ILocalExtension[] = []): IProfileAwareExtensionManagementService {\n\treturn <IProfileAwareExtensionManagementService>{\n\t\tonInstallExtension: Event.None,\n\t\tonDidInstallExtensions: Event.None,\n\t\tonUninstallExtension: Event.None,\n\t\tonDidUninstallExtension: Event.None,\n\t\tonDidChangeProfile: Event.None,\n\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\tgetInstalled: () => Promise.resolve<ILocalExtension[]>(installed),\n\t\tcanInstall: async (extension: IGalleryExtension) => { return true; },\n\t\tinstallFromGallery: (extension: IGalleryExtension) => Promise.reject(new Error('not supported')),\n\t\tupdateMetadata: async (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>, profileLocation: URI) => {\n\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\treturn local;\n\t\t},\n\t\tasync getTargetPlatform() { return getTargetPlatform(platform, arch); },\n\t\tasync getExtensionsControlManifest() { return <IExtensionsControlManifest>{ malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t};\n}\n"]}