{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/extensions/test/electron-browser/extensionsViews.test.ts","vs/workbench/contrib/extensions/test/electron-browser/extensionsViews.test.ts"],"names":[],"mappings":"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","file":"extensionsViews.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ExtensionsListView } from '../../browser/extensionsViews.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IExtensionsWorkbenchService } from '../../common/extensions.js';\nimport { ExtensionsWorkbenchService } from '../../browser/extensionsWorkbenchService.js';\nimport {\n\tIExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension, IQueryOptions,\n\tgetTargetPlatform, SortBy\n} from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, IProfileAwareExtensionManagementService, IWorkbenchExtensionManagementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService, ExtensionRecommendationReason } from '../../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { getGalleryExtensionId } from '../../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { TestExtensionEnablementService } from '../../../../services/extensionManagement/test/browser/extensionEnablementService.test.js';\nimport { ExtensionGalleryService } from '../../../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { IPager } from '../../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IExtensionService, toExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestMenuService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestSharedProcessService } from '../../../../test/electron-browser/workbenchTestServices.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { NativeURLService } from '../../../../../platform/url/common/urlService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { SinonStub } from 'sinon';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { RemoteAgentService } from '../../../../services/remote/electron-browser/remoteAgentService.js';\nimport { ExtensionType, IExtension } from '../../../../../platform/extensions/common/extensions.js';\nimport { ISharedProcessService } from '../../../../../platform/ipc/electron-browser/services.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { IMenuService } from '../../../../../platform/actions/common/actions.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../../common/views.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { platform } from '../../../../../base/common/platform.js';\nimport { arch } from '../../../../../base/common/process.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IUpdateService, State } from '../../../../../platform/update/common/update.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { IUserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfile.js';\nimport { UserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfileService.js';\nimport { toUserDataProfile } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\n\nsuite('ExtensionsViews Tests', () => {\n\n\tconst disposableStore = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet testableView: ExtensionsListView;\n\n\tconst localEnabledTheme = aLocalExtension('first-enabled-extension', { categories: ['Themes', 'random'] }, { installedTimestamp: 123456 });\n\tconst localEnabledLanguage = aLocalExtension('second-enabled-extension', { categories: ['Programming languages'], version: '1.0.0' }, { installedTimestamp: Date.now(), updated: false });\n\tconst localDisabledTheme = aLocalExtension('first-disabled-extension', { categories: ['themes'] }, { installedTimestamp: 234567 });\n\tconst localDisabledLanguage = aLocalExtension('second-disabled-extension', { categories: ['programming languages'] }, { installedTimestamp: Date.now() - 50000, updated: true });\n\tconst localRandom = aLocalExtension('random-enabled-extension', { categories: ['random'] }, { installedTimestamp: 345678 });\n\tconst builtInTheme = aLocalExtension('my-theme', { categories: ['Themes'], contributes: { themes: ['my-theme'] } }, { type: ExtensionType.System, installedTimestamp: 222 });\n\tconst builtInBasic = aLocalExtension('my-lang', { categories: ['Programming Languages'], contributes: { grammars: [{ language: 'my-language' }] } }, { type: ExtensionType.System, installedTimestamp: 666666 });\n\n\tlet queryPage = aPage([]);\n\tconst galleryExtensions: IGalleryExtension[] = [];\n\n\tconst workspaceRecommendationA = aGalleryExtension('workspace-recommendation-A');\n\tconst workspaceRecommendationB = aGalleryExtension('workspace-recommendation-B');\n\tconst configBasedRecommendationA = aGalleryExtension('configbased-recommendation-A');\n\tconst configBasedRecommendationB = aGalleryExtension('configbased-recommendation-B');\n\tconst fileBasedRecommendationA = aGalleryExtension('filebased-recommendation-A');\n\tconst fileBasedRecommendationB = aGalleryExtension('filebased-recommendation-B');\n\tconst otherRecommendationA = aGalleryExtension('other-recommendation-A');\n\n\tsetup(async () => {\n\t\tinstantiationService = disposableStore.add(new TestInstantiationService());\n\t\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\t\tinstantiationService.stub(ILogService, NullLogService);\n\t\tinstantiationService.stub(IFileService, disposableStore.add(new FileService(new NullLogService())));\n\t\tinstantiationService.stub(IProductService, {});\n\n\t\tinstantiationService.stub(IWorkspaceContextService, new TestContextService());\n\t\tinstantiationService.stub(IConfigurationService, new TestConfigurationService());\n\n\t\tinstantiationService.stub(IExtensionGalleryService, ExtensionGalleryService);\n\t\tinstantiationService.stub(ISharedProcessService, TestSharedProcessService);\n\n\t\tinstantiationService.stub(IWorkbenchExtensionManagementService, {\n\t\t\tonInstallExtension: Event.None,\n\t\t\tonDidInstallExtensions: Event.None,\n\t\t\tonUninstallExtension: Event.None,\n\t\t\tonDidUninstallExtension: Event.None,\n\t\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\t\tonDidChangeProfile: Event.None,\n\t\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\t\tasync getInstalled() { return []; },\n\t\t\tasync getInstalledWorkspaceExtensions() { return []; },\n\t\t\tasync canInstall() { return true; },\n\t\t\tasync getExtensionsControlManifest() { return { malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\t\tasync getTargetPlatform() { return getTargetPlatform(platform, arch); },\n\t\t\tasync updateMetadata(local) { return local; }\n\t\t});\n\t\tinstantiationService.stub(IRemoteAgentService, RemoteAgentService);\n\t\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\t\tinstantiationService.stub(IMenuService, new TestMenuService());\n\n\t\tconst localExtensionManagementServer = { extensionManagementService: instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService, label: 'local', id: 'vscode-local' };\n\t\tinstantiationService.stub(IExtensionManagementServerService, {\n\t\t\tget localExtensionManagementServer(): IExtensionManagementServer {\n\t\t\t\treturn localExtensionManagementServer;\n\t\t\t},\n\t\t\tgetExtensionManagementServer(extension: IExtension): IExtensionManagementServer | null {\n\t\t\t\tif (extension.location.scheme === Schemas.file) {\n\t\t\t\t\treturn localExtensionManagementServer;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Invalid Extension ${extension.location}`);\n\t\t\t}\n\t\t});\n\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tinstantiationService.stub(IUserDataProfileService, disposableStore.add(new UserDataProfileService(toUserDataProfile('test', 'test', URI.file('foo'), URI.file('cache')))));\n\n\t\tconst reasons: { [key: string]: any } = {};\n\t\treasons[workspaceRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.Workspace };\n\t\treasons[workspaceRecommendationB.identifier.id] = { reasonId: ExtensionRecommendationReason.Workspace };\n\t\treasons[fileBasedRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.File };\n\t\treasons[fileBasedRecommendationB.identifier.id] = { reasonId: ExtensionRecommendationReason.File };\n\t\treasons[otherRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.Executable };\n\t\treasons[configBasedRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.WorkspaceConfig };\n\t\tinstantiationService.stub(IExtensionRecommendationsService, {\n\t\t\tgetWorkspaceRecommendations() {\n\t\t\t\treturn Promise.resolve([\n\t\t\t\t\tworkspaceRecommendationA.identifier.id,\n\t\t\t\t\tworkspaceRecommendationB.identifier.id]);\n\t\t\t},\n\t\t\tgetConfigBasedRecommendations() {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\timportant: [configBasedRecommendationA.identifier.id],\n\t\t\t\t\tothers: [configBasedRecommendationB.identifier.id],\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetImportantRecommendations(): Promise<string[]> {\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t},\n\t\t\tgetFileBasedRecommendations() {\n\t\t\t\treturn [\n\t\t\t\t\tfileBasedRecommendationA.identifier.id,\n\t\t\t\t\tfileBasedRecommendationB.identifier.id\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetOtherRecommendations() {\n\t\t\t\treturn Promise.resolve([\n\t\t\t\t\tconfigBasedRecommendationB.identifier.id,\n\t\t\t\t\totherRecommendationA.identifier.id\n\t\t\t\t]);\n\t\t\t},\n\t\t\tgetAllRecommendationsWithReason() {\n\t\t\t\treturn reasons;\n\t\t\t}\n\t\t});\n\t\tinstantiationService.stub(IURLService, NativeURLService);\n\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localEnabledTheme, localEnabledLanguage, localRandom, localDisabledTheme, localDisabledLanguage, builtInTheme, builtInBasic]);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getExtensgetExtensionsControlManifestionsReport', {});\n\n\t\tinstantiationService.stub(IExtensionGalleryService, <Partial<IExtensionGalleryService>>{\n\t\t\tquery: async () => {\n\t\t\t\treturn queryPage;\n\t\t\t},\n\t\t\tgetCompatibleExtension: async (gallery) => {\n\t\t\t\treturn gallery;\n\t\t\t},\n\t\t\tgetExtensions: async (infos) => {\n\t\t\t\tconst result: IGalleryExtension[] = [];\n\t\t\t\tfor (const info of infos) {\n\t\t\t\t\tconst extension = galleryExtensions.find(e => e.identifier.id === info.id);\n\t\t\t\t\tif (extension) {\n\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tisEnabled: () => true,\n\t\t\tisExtensionCompatible: async () => true,\n\t\t});\n\n\t\tinstantiationService.stub(IViewDescriptorService, {\n\t\t\tgetViewLocationById(): ViewContainerLocation {\n\t\t\t\treturn ViewContainerLocation.Sidebar;\n\t\t\t},\n\t\t\tonDidChangeLocation: Event.None\n\t\t});\n\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\textensions: [\n\t\t\t\ttoExtensionDescription(localEnabledTheme),\n\t\t\t\ttoExtensionDescription(localEnabledLanguage),\n\t\t\t\ttoExtensionDescription(localRandom),\n\t\t\t\ttoExtensionDescription(builtInTheme),\n\t\t\t\ttoExtensionDescription(builtInBasic)\n\t\t\t],\n\t\t\tcanAddExtension: (extension) => true,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tawait (<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).setEnablement([localDisabledTheme], EnablementState.DisabledGlobally);\n\t\tawait (<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).setEnablement([localDisabledLanguage], EnablementState.DisabledGlobally);\n\n\t\tinstantiationService.stub(IUpdateService, { onStateChange: Event.None, state: State.Uninitialized });\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposableStore.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\ttestableView = disposableStore.add(instantiationService.createInstance(ExtensionsListView, {}, { id: '', title: '' }));\n\t\tqueryPage = aPage([]);\n\n\t\tgalleryExtensions.splice(0, galleryExtensions.length, ...[\n\t\t\tworkspaceRecommendationA,\n\t\t\tworkspaceRecommendationB,\n\t\t\tconfigBasedRecommendationA,\n\t\t\tconfigBasedRecommendationB,\n\t\t\tfileBasedRecommendationA,\n\t\t\tfileBasedRecommendationB,\n\t\t\totherRecommendationA\n\t\t]);\n\t});\n\n\ttest('Test query types', () => {\n\t\tassert.strictEqual(ExtensionsListView.isBuiltInExtensionsQuery('@builtin'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@installed'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@enabled'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@disabled'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@outdated'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@updates'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@sort:name'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@sort:updateDate'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@installed searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@enabled searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@disabled searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@outdated searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@updates searchText'), true);\n\t});\n\n\ttest('Test empty query equates to sort by install count', async () => {\n\t\tconst target = <SinonStub>instantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tawait testableView.show('');\n\t\tassert.ok(target.calledOnce);\n\t\tconst options: IQueryOptions = target.args[0][0];\n\t\tassert.strictEqual(options.sortBy, SortBy.InstallCount);\n\t});\n\n\ttest('Test non empty query without sort doesnt use sortBy', async () => {\n\t\tconst target = <SinonStub>instantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tawait testableView.show('some extension');\n\t\tassert.ok(target.calledOnce);\n\t\tconst options: IQueryOptions = target.args[0][0];\n\t\tassert.strictEqual(options.sortBy, undefined);\n\t});\n\n\ttest('Test query with sort uses sortBy', async () => {\n\t\tconst target = <SinonStub>instantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tawait testableView.show('some extension @sort:rating');\n\t\tassert.ok(target.calledOnce);\n\t\tconst options: IQueryOptions = target.args[0][0];\n\t\tassert.strictEqual(options.sortBy, SortBy.WeightedRating);\n\t});\n\n\ttest('Test default view actions required sorting', async () => {\n\t\tqueryPage = aPage([aGalleryExtension(localEnabledLanguage.manifest.name, { ...localEnabledLanguage.manifest, version: '1.0.1', identifier: localDisabledLanguage.identifier })]);\n\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst extension = (await workbenchService.queryLocal()).find(ex => ex.identifier.id === localEnabledLanguage.identifier.id);\n\n\t\tawait new Promise<void>(c => {\n\t\t\tconst disposable = workbenchService.onChange(() => {\n\t\t\t\tif (extension?.outdated) {\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t});\n\t\t\tinstantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\t});\n\n\t\tconst result = await testableView.show('@installed');\n\t\tassert.strictEqual(result.length, 5, 'Unexpected number of results for @installed query');\n\t\tconst actual = [result.get(0).name, result.get(1).name, result.get(2).name, result.get(3).name, result.get(4).name];\n\t\tconst expected = [localEnabledLanguage.manifest.name, localEnabledTheme.manifest.name, localRandom.manifest.name, localDisabledTheme.manifest.name, localDisabledLanguage.manifest.name];\n\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\tassert.strictEqual(actual[i], expected[i], 'Unexpected extension for @installed query with outadted extension.');\n\t\t}\n\t});\n\n\ttest('Test installed query results', async () => {\n\t\tawait testableView.show('@installed').then(result => {\n\t\t\tassert.strictEqual(result.length, 5, 'Unexpected number of results for @installed query');\n\t\t\tconst actual = [result.get(0).name, result.get(1).name, result.get(2).name, result.get(3).name, result.get(4).name].sort();\n\t\t\tconst expected = [localDisabledTheme.manifest.name, localEnabledTheme.manifest.name, localRandom.manifest.name, localDisabledLanguage.manifest.name, localEnabledLanguage.manifest.name];\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i], 'Unexpected extension for @installed query.');\n\t\t\t}\n\t\t});\n\n\t\tawait testableView.show('@installed first').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with search text.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with search text.');\n\t\t});\n\n\t\tawait testableView.show('@disabled').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @disabled query');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledTheme.manifest.name, 'Unexpected extension for @disabled query.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledLanguage.manifest.name, 'Unexpected extension for @disabled query.');\n\t\t});\n\n\t\tawait testableView.show('@enabled').then(result => {\n\t\t\tassert.strictEqual(result.length, 3, 'Unexpected number of results for @enabled query');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @enabled query.');\n\t\t\tassert.strictEqual(result.get(1).name, localRandom.manifest.name, 'Unexpected extension for @enabled query.');\n\t\t\tassert.strictEqual(result.get(2).name, localEnabledLanguage.manifest.name, 'Unexpected extension for @enabled query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @builtin category:themes query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInTheme.manifest.name, 'Unexpected extension for @builtin:themes query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @builtin:basics query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInBasic.manifest.name, 'Unexpected extension for @builtin:basics query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @builtin query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInBasic.manifest.name, 'Unexpected extension for @builtin query.');\n\t\t\tassert.strictEqual(result.get(1).name, builtInTheme.manifest.name, 'Unexpected extension for @builtin query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin my-theme').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @builtin query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInTheme.manifest.name, 'Unexpected extension for @builtin query.');\n\t\t});\n\t});\n\n\ttest('Test installed query with category', async () => {\n\t\tawait testableView.show('@installed category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query with category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with category.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with category.');\n\t\t});\n\n\t\tawait testableView.show('@installed category:\"themes\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query with quoted category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with quoted category.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with quoted category.');\n\t\t});\n\n\t\tawait testableView.show('@installed category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query with quoted category including space');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledLanguage.manifest.name, 'Unexpected extension for @installed query with quoted category including space.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledLanguage.manifest.name, 'Unexpected extension for @installed query with quoted category inlcuding space.');\n\t\t});\n\n\t\tawait testableView.show('@installed category:themes category:random').then(result => {\n\t\t\tassert.strictEqual(result.length, 3, 'Unexpected number of results for @installed query with multiple category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with multiple category.');\n\t\t\tassert.strictEqual(result.get(1).name, localRandom.manifest.name, 'Unexpected extension for @installed query with multiple category.');\n\t\t\tassert.strictEqual(result.get(2).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with multiple category.');\n\t\t});\n\n\t\tawait testableView.show('@enabled category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @enabled query with category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @enabled query with category.');\n\t\t});\n\n\t\tawait testableView.show('@enabled category:\"themes\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @enabled query with quoted category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @enabled query with quoted category.');\n\t\t});\n\n\t\tawait testableView.show('@enabled category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @enabled query with quoted category inlcuding space');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledLanguage.manifest.name, 'Unexpected extension for @enabled query with quoted category including space.');\n\t\t});\n\n\t\tawait testableView.show('@disabled category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @disabled query with category');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledTheme.manifest.name, 'Unexpected extension for @disabled query with category.');\n\t\t});\n\n\t\tawait testableView.show('@disabled category:\"themes\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @disabled query with quoted category');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledTheme.manifest.name, 'Unexpected extension for @disabled query with quoted category.');\n\t\t});\n\n\t\tawait testableView.show('@disabled category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @disabled query with quoted category inlcuding space');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledLanguage.manifest.name, 'Unexpected extension for @disabled query with quoted category including space.');\n\t\t});\n\t});\n\n\ttest('Test local query with sorting order', async () => {\n\t\tawait testableView.show('@recentlyUpdated').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @recentlyUpdated');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledLanguage.manifest.name, 'Unexpected default sort order of extensions for @recentlyUpdate query');\n\t\t});\n\n\t\tawait testableView.show('@installed @sort:updateDate').then(result => {\n\t\t\tassert.strictEqual(result.length, 5, 'Unexpected number of results for @sort:updateDate. Expected all localy installed Extension which are not builtin');\n\t\t\tconst actual = [result.get(0).local?.installedTimestamp, result.get(1).local?.installedTimestamp, result.get(2).local?.installedTimestamp, result.get(3).local?.installedTimestamp, result.get(4).local?.installedTimestamp];\n\t\t\tconst expected = [localEnabledLanguage.installedTimestamp, localDisabledLanguage.installedTimestamp, localRandom.installedTimestamp, localDisabledTheme.installedTimestamp, localEnabledTheme.installedTimestamp];\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i], 'Unexpected extension sorting for @sort:updateDate query.');\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('Test @recommended:workspace query', () => {\n\t\tconst workspaceRecommendedExtensions = [\n\t\t\tworkspaceRecommendationA,\n\t\t\tworkspaceRecommendationB,\n\t\t\tconfigBasedRecommendationA,\n\t\t];\n\n\t\treturn testableView.show('@recommended:workspace').then(result => {\n\t\t\tassert.strictEqual(result.length, workspaceRecommendedExtensions.length);\n\t\t\tfor (let i = 0; i < workspaceRecommendedExtensions.length; i++) {\n\t\t\t\tassert.strictEqual(result.get(i).identifier.id, workspaceRecommendedExtensions[i].identifier.id);\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('Test @recommended query', async () => {\n\t\tconst allRecommendedExtensions = [\n\t\t\tfileBasedRecommendationA,\n\t\t\tfileBasedRecommendationB,\n\t\t\tconfigBasedRecommendationB,\n\t\t\totherRecommendationA\n\t\t];\n\n\t\tconst result = await testableView.show('@recommended');\n\t\tassert.strictEqual(result.length, allRecommendedExtensions.length);\n\t\tfor (let i = 0; i < allRecommendedExtensions.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, allRecommendedExtensions[i].identifier.id);\n\t\t}\n\t});\n\n\n\ttest('Test @recommended:all query', async () => {\n\t\tconst allRecommendedExtensions = [\n\t\t\tworkspaceRecommendationA,\n\t\t\tworkspaceRecommendationB,\n\t\t\tconfigBasedRecommendationA,\n\t\t\tfileBasedRecommendationA,\n\t\t\tfileBasedRecommendationB,\n\t\t\tconfigBasedRecommendationB,\n\t\t\totherRecommendationA,\n\t\t];\n\n\t\tconst result = await testableView.show('@recommended:all');\n\t\tassert.strictEqual(result.length, allRecommendedExtensions.length);\n\t\tfor (let i = 0; i < allRecommendedExtensions.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, allRecommendedExtensions[i].identifier.id);\n\t\t}\n\t});\n\n\ttest('Test search', async () => {\n\t\tconst results = [\n\t\t\tfileBasedRecommendationA,\n\t\t\tworkspaceRecommendationA,\n\t\t\totherRecommendationA,\n\t\t\tworkspaceRecommendationB\n\t\t];\n\t\tqueryPage = aPage(results);\n\t\tconst result = await testableView.show('search-me');\n\t\tassert.strictEqual(result.length, results.length);\n\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, results[i].identifier.id);\n\t\t}\n\t});\n\n\ttest('Test preferred search experiment', async () => {\n\t\tqueryPage = aPage([\n\t\t\tfileBasedRecommendationA,\n\t\t\tworkspaceRecommendationA,\n\t\t\totherRecommendationA,\n\t\t\tworkspaceRecommendationB\n\t\t], 5);\n\t\tconst notInFirstPage = aGalleryExtension('not-in-first-page');\n\t\tgalleryExtensions.push(notInFirstPage);\n\t\tconst expected = [\n\t\t\tworkspaceRecommendationA,\n\t\t\tnotInFirstPage,\n\t\t\tworkspaceRecommendationB,\n\t\t\tfileBasedRecommendationA,\n\t\t\totherRecommendationA,\n\t\t];\n\n\t\tinstantiationService.stubPromise(IWorkbenchExtensionManagementService, 'getExtensionsControlManifest', {\n\t\t\tmalicious: [], deprecated: {},\n\t\t\tsearch: [{\n\t\t\t\tquery: 'search-me',\n\t\t\t\tpreferredResults: [\n\t\t\t\t\tworkspaceRecommendationA.identifier.id,\n\t\t\t\t\tnotInFirstPage.identifier.id,\n\t\t\t\t\tworkspaceRecommendationB.identifier.id\n\t\t\t\t]\n\t\t\t}]\n\t\t});\n\n\t\tconst testObject = disposableStore.add(instantiationService.createInstance(ExtensionsListView, {}, { id: '', title: '' }));\n\t\tconst result = await testObject.show('search-me');\n\t\tassert.strictEqual(result.length, expected.length);\n\t\tfor (let i = 0; i < expected.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, expected[i].identifier.id);\n\t\t}\n\t});\n\n\ttest('Skip preferred search experiment when user defines sort order', async () => {\n\t\tconst realResults = [\n\t\t\tfileBasedRecommendationA,\n\t\t\tworkspaceRecommendationA,\n\t\t\totherRecommendationA,\n\t\t\tworkspaceRecommendationB\n\t\t];\n\t\tqueryPage = aPage(realResults);\n\n\t\tconst result = await testableView.show('search-me @sort:installs');\n\t\tassert.strictEqual(result.length, realResults.length);\n\t\tfor (let i = 0; i < realResults.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, realResults[i].identifier.id);\n\t\t}\n\t});\n\n\tfunction aLocalExtension(name: string = 'someext', manifest: any = {}, properties: any = {}): ILocalExtension {\n\t\tmanifest = { name, publisher: 'pub', version: '1.0.0', ...manifest };\n\t\tproperties = {\n\t\t\ttype: ExtensionType.User,\n\t\t\tlocation: URI.file(`pub.${name}`),\n\t\t\tidentifier: { id: getGalleryExtensionId(manifest.publisher, manifest.name) },\n\t\t\tmetadata: { id: getGalleryExtensionId(manifest.publisher, manifest.name), publisherId: manifest.publisher, publisherDisplayName: 'somename' },\n\t\t\t...properties,\n\t\t\tisValid: properties.isValid ?? true,\n\t\t};\n\t\tproperties.isBuiltin = properties.type === ExtensionType.System;\n\t\treturn <ILocalExtension>Object.create({ manifest, ...properties });\n\t}\n\n\tfunction aGalleryExtension(name: string, properties: any = {}, galleryExtensionProperties: any = {}, assets: any = {}): IGalleryExtension {\n\t\tconst targetPlatform = getTargetPlatform(platform, arch);\n\t\tconst galleryExtension = <IGalleryExtension>Object.create({ name, publisher: 'pub', version: '1.0.0', allTargetPlatforms: [targetPlatform], properties: {}, assets: {}, ...properties });\n\t\tgalleryExtension.properties = { ...galleryExtension.properties, dependencies: [], targetPlatform, ...galleryExtensionProperties };\n\t\tgalleryExtension.assets = { ...galleryExtension.assets, ...assets };\n\t\tgalleryExtension.identifier = { id: getGalleryExtensionId(galleryExtension.publisher, galleryExtension.name), uuid: generateUuid() };\n\t\treturn <IGalleryExtension>galleryExtension;\n\t}\n\n\tfunction aPage<T>(objects: IGalleryExtension[] = [], total?: number): IPager<IGalleryExtension> {\n\t\treturn { firstPage: objects, total: total ?? objects.length, pageSize: objects.length, getPage: () => null! };\n\t}\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ExtensionsListView } from '../../browser/extensionsViews.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IExtensionsWorkbenchService } from '../../common/extensions.js';\nimport { ExtensionsWorkbenchService } from '../../browser/extensionsWorkbenchService.js';\nimport {\n\tIExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension, IQueryOptions,\n\tgetTargetPlatform, SortBy\n} from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, IProfileAwareExtensionManagementService, IWorkbenchExtensionManagementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService, ExtensionRecommendationReason } from '../../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { getGalleryExtensionId } from '../../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { TestExtensionEnablementService } from '../../../../services/extensionManagement/test/browser/extensionEnablementService.test.js';\nimport { ExtensionGalleryService } from '../../../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { IPager } from '../../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IExtensionService, toExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestMenuService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestSharedProcessService } from '../../../../test/electron-browser/workbenchTestServices.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { NativeURLService } from '../../../../../platform/url/common/urlService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { SinonStub } from 'sinon';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { RemoteAgentService } from '../../../../services/remote/electron-browser/remoteAgentService.js';\nimport { ExtensionType, IExtension } from '../../../../../platform/extensions/common/extensions.js';\nimport { ISharedProcessService } from '../../../../../platform/ipc/electron-browser/services.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { IMenuService } from '../../../../../platform/actions/common/actions.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../../common/views.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { platform } from '../../../../../base/common/platform.js';\nimport { arch } from '../../../../../base/common/process.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IUpdateService, State } from '../../../../../platform/update/common/update.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { IUserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfile.js';\nimport { UserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfileService.js';\nimport { toUserDataProfile } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\n\nsuite('ExtensionsViews Tests', () => {\n\n\tconst disposableStore = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instantiationService: TestInstantiationService;\n\tlet testableView: ExtensionsListView;\n\n\tconst localEnabledTheme = aLocalExtension('first-enabled-extension', { categories: ['Themes', 'random'] }, { installedTimestamp: 123456 });\n\tconst localEnabledLanguage = aLocalExtension('second-enabled-extension', { categories: ['Programming languages'], version: '1.0.0' }, { installedTimestamp: Date.now(), updated: false });\n\tconst localDisabledTheme = aLocalExtension('first-disabled-extension', { categories: ['themes'] }, { installedTimestamp: 234567 });\n\tconst localDisabledLanguage = aLocalExtension('second-disabled-extension', { categories: ['programming languages'] }, { installedTimestamp: Date.now() - 50000, updated: true });\n\tconst localRandom = aLocalExtension('random-enabled-extension', { categories: ['random'] }, { installedTimestamp: 345678 });\n\tconst builtInTheme = aLocalExtension('my-theme', { categories: ['Themes'], contributes: { themes: ['my-theme'] } }, { type: ExtensionType.System, installedTimestamp: 222 });\n\tconst builtInBasic = aLocalExtension('my-lang', { categories: ['Programming Languages'], contributes: { grammars: [{ language: 'my-language' }] } }, { type: ExtensionType.System, installedTimestamp: 666666 });\n\n\tlet queryPage = aPage([]);\n\tconst galleryExtensions: IGalleryExtension[] = [];\n\n\tconst workspaceRecommendationA = aGalleryExtension('workspace-recommendation-A');\n\tconst workspaceRecommendationB = aGalleryExtension('workspace-recommendation-B');\n\tconst configBasedRecommendationA = aGalleryExtension('configbased-recommendation-A');\n\tconst configBasedRecommendationB = aGalleryExtension('configbased-recommendation-B');\n\tconst fileBasedRecommendationA = aGalleryExtension('filebased-recommendation-A');\n\tconst fileBasedRecommendationB = aGalleryExtension('filebased-recommendation-B');\n\tconst otherRecommendationA = aGalleryExtension('other-recommendation-A');\n\n\tsetup(async () => {\n\t\tinstantiationService = disposableStore.add(new TestInstantiationService());\n\t\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\t\tinstantiationService.stub(ILogService, NullLogService);\n\t\tinstantiationService.stub(IFileService, disposableStore.add(new FileService(new NullLogService())));\n\t\tinstantiationService.stub(IProductService, {});\n\n\t\tinstantiationService.stub(IWorkspaceContextService, new TestContextService());\n\t\tinstantiationService.stub(IConfigurationService, new TestConfigurationService());\n\n\t\tinstantiationService.stub(IExtensionGalleryService, ExtensionGalleryService);\n\t\tinstantiationService.stub(ISharedProcessService, TestSharedProcessService);\n\n\t\tinstantiationService.stub(IWorkbenchExtensionManagementService, {\n\t\t\tonInstallExtension: Event.None,\n\t\t\tonDidInstallExtensions: Event.None,\n\t\t\tonUninstallExtension: Event.None,\n\t\t\tonDidUninstallExtension: Event.None,\n\t\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\t\tonDidChangeProfile: Event.None,\n\t\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\t\tasync getInstalled() { return []; },\n\t\t\tasync getInstalledWorkspaceExtensions() { return []; },\n\t\t\tasync canInstall() { return true; },\n\t\t\tasync getExtensionsControlManifest() { return { malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\t\tasync getTargetPlatform() { return getTargetPlatform(platform, arch); },\n\t\t\tasync updateMetadata(local) { return local; }\n\t\t});\n\t\tinstantiationService.stub(IRemoteAgentService, RemoteAgentService);\n\t\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\t\tinstantiationService.stub(IMenuService, new TestMenuService());\n\n\t\tconst localExtensionManagementServer = { extensionManagementService: instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService, label: 'local', id: 'vscode-local' };\n\t\tinstantiationService.stub(IExtensionManagementServerService, {\n\t\t\tget localExtensionManagementServer(): IExtensionManagementServer {\n\t\t\t\treturn localExtensionManagementServer;\n\t\t\t},\n\t\t\tgetExtensionManagementServer(extension: IExtension): IExtensionManagementServer | null {\n\t\t\t\tif (extension.location.scheme === Schemas.file) {\n\t\t\t\t\treturn localExtensionManagementServer;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Invalid Extension ${extension.location}`);\n\t\t\t}\n\t\t});\n\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tinstantiationService.stub(IUserDataProfileService, disposableStore.add(new UserDataProfileService(toUserDataProfile('test', 'test', URI.file('foo'), URI.file('cache')))));\n\n\t\tconst reasons: { [key: string]: any } = {};\n\t\treasons[workspaceRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.Workspace };\n\t\treasons[workspaceRecommendationB.identifier.id] = { reasonId: ExtensionRecommendationReason.Workspace };\n\t\treasons[fileBasedRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.File };\n\t\treasons[fileBasedRecommendationB.identifier.id] = { reasonId: ExtensionRecommendationReason.File };\n\t\treasons[otherRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.Executable };\n\t\treasons[configBasedRecommendationA.identifier.id] = { reasonId: ExtensionRecommendationReason.WorkspaceConfig };\n\t\tinstantiationService.stub(IExtensionRecommendationsService, {\n\t\t\tgetWorkspaceRecommendations() {\n\t\t\t\treturn Promise.resolve([\n\t\t\t\t\tworkspaceRecommendationA.identifier.id,\n\t\t\t\t\tworkspaceRecommendationB.identifier.id]);\n\t\t\t},\n\t\t\tgetConfigBasedRecommendations() {\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\timportant: [configBasedRecommendationA.identifier.id],\n\t\t\t\t\tothers: [configBasedRecommendationB.identifier.id],\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetImportantRecommendations(): Promise<string[]> {\n\t\t\t\treturn Promise.resolve([]);\n\t\t\t},\n\t\t\tgetFileBasedRecommendations() {\n\t\t\t\treturn [\n\t\t\t\t\tfileBasedRecommendationA.identifier.id,\n\t\t\t\t\tfileBasedRecommendationB.identifier.id\n\t\t\t\t];\n\t\t\t},\n\t\t\tgetOtherRecommendations() {\n\t\t\t\treturn Promise.resolve([\n\t\t\t\t\tconfigBasedRecommendationB.identifier.id,\n\t\t\t\t\totherRecommendationA.identifier.id\n\t\t\t\t]);\n\t\t\t},\n\t\t\tgetAllRecommendationsWithReason() {\n\t\t\t\treturn reasons;\n\t\t\t}\n\t\t});\n\t\tinstantiationService.stub(IURLService, NativeURLService);\n\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localEnabledTheme, localEnabledLanguage, localRandom, localDisabledTheme, localDisabledLanguage, builtInTheme, builtInBasic]);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getExtensgetExtensionsControlManifestionsReport', {});\n\n\t\tinstantiationService.stub(IExtensionGalleryService, <Partial<IExtensionGalleryService>>{\n\t\t\tquery: async () => {\n\t\t\t\treturn queryPage;\n\t\t\t},\n\t\t\tgetCompatibleExtension: async (gallery) => {\n\t\t\t\treturn gallery;\n\t\t\t},\n\t\t\tgetExtensions: async (infos) => {\n\t\t\t\tconst result: IGalleryExtension[] = [];\n\t\t\t\tfor (const info of infos) {\n\t\t\t\t\tconst extension = galleryExtensions.find(e => e.identifier.id === info.id);\n\t\t\t\t\tif (extension) {\n\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\tisEnabled: () => true,\n\t\t\tisExtensionCompatible: async () => true,\n\t\t});\n\n\t\tinstantiationService.stub(IViewDescriptorService, {\n\t\t\tgetViewLocationById(): ViewContainerLocation {\n\t\t\t\treturn ViewContainerLocation.Sidebar;\n\t\t\t},\n\t\t\tonDidChangeLocation: Event.None\n\t\t});\n\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\textensions: [\n\t\t\t\ttoExtensionDescription(localEnabledTheme),\n\t\t\t\ttoExtensionDescription(localEnabledLanguage),\n\t\t\t\ttoExtensionDescription(localRandom),\n\t\t\t\ttoExtensionDescription(builtInTheme),\n\t\t\t\ttoExtensionDescription(builtInBasic)\n\t\t\t],\n\t\t\tcanAddExtension: (extension) => true,\n\t\t\twhenInstalledExtensionsRegistered: () => Promise.resolve(true)\n\t\t});\n\t\tawait (<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).setEnablement([localDisabledTheme], EnablementState.DisabledGlobally);\n\t\tawait (<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).setEnablement([localDisabledLanguage], EnablementState.DisabledGlobally);\n\n\t\tinstantiationService.stub(IUpdateService, { onStateChange: Event.None, state: State.Uninitialized });\n\t\tinstantiationService.set(IExtensionsWorkbenchService, disposableStore.add(instantiationService.createInstance(ExtensionsWorkbenchService)));\n\t\ttestableView = disposableStore.add(instantiationService.createInstance(ExtensionsListView, {}, { id: '', title: '' }));\n\t\tqueryPage = aPage([]);\n\n\t\tgalleryExtensions.splice(0, galleryExtensions.length, ...[\n\t\t\tworkspaceRecommendationA,\n\t\t\tworkspaceRecommendationB,\n\t\t\tconfigBasedRecommendationA,\n\t\t\tconfigBasedRecommendationB,\n\t\t\tfileBasedRecommendationA,\n\t\t\tfileBasedRecommendationB,\n\t\t\totherRecommendationA\n\t\t]);\n\t});\n\n\ttest('Test query types', () => {\n\t\tassert.strictEqual(ExtensionsListView.isBuiltInExtensionsQuery('@builtin'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@installed'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@enabled'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@disabled'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@outdated'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@updates'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@sort:name'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@sort:updateDate'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@installed searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@enabled searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@disabled searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@outdated searchText'), true);\n\t\tassert.strictEqual(ExtensionsListView.isLocalExtensionsQuery('@updates searchText'), true);\n\t});\n\n\ttest('Test empty query equates to sort by install count', async () => {\n\t\tconst target = <SinonStub>instantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tawait testableView.show('');\n\t\tassert.ok(target.calledOnce);\n\t\tconst options: IQueryOptions = target.args[0][0];\n\t\tassert.strictEqual(options.sortBy, SortBy.InstallCount);\n\t});\n\n\ttest('Test non empty query without sort doesnt use sortBy', async () => {\n\t\tconst target = <SinonStub>instantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tawait testableView.show('some extension');\n\t\tassert.ok(target.calledOnce);\n\t\tconst options: IQueryOptions = target.args[0][0];\n\t\tassert.strictEqual(options.sortBy, undefined);\n\t});\n\n\ttest('Test query with sort uses sortBy', async () => {\n\t\tconst target = <SinonStub>instantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tawait testableView.show('some extension @sort:rating');\n\t\tassert.ok(target.calledOnce);\n\t\tconst options: IQueryOptions = target.args[0][0];\n\t\tassert.strictEqual(options.sortBy, SortBy.WeightedRating);\n\t});\n\n\ttest('Test default view actions required sorting', async () => {\n\t\tqueryPage = aPage([aGalleryExtension(localEnabledLanguage.manifest.name, { ...localEnabledLanguage.manifest, version: '1.0.1', identifier: localDisabledLanguage.identifier })]);\n\n\t\tconst workbenchService = instantiationService.get(IExtensionsWorkbenchService);\n\t\tconst extension = (await workbenchService.queryLocal()).find(ex => ex.identifier.id === localEnabledLanguage.identifier.id);\n\n\t\tawait new Promise<void>(c => {\n\t\t\tconst disposable = workbenchService.onChange(() => {\n\t\t\t\tif (extension?.outdated) {\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\tc();\n\t\t\t\t}\n\t\t\t});\n\t\t\tinstantiationService.get(IExtensionsWorkbenchService).queryGallery(CancellationToken.None);\n\t\t});\n\n\t\tconst result = await testableView.show('@installed');\n\t\tassert.strictEqual(result.length, 5, 'Unexpected number of results for @installed query');\n\t\tconst actual = [result.get(0).name, result.get(1).name, result.get(2).name, result.get(3).name, result.get(4).name];\n\t\tconst expected = [localEnabledLanguage.manifest.name, localEnabledTheme.manifest.name, localRandom.manifest.name, localDisabledTheme.manifest.name, localDisabledLanguage.manifest.name];\n\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\tassert.strictEqual(actual[i], expected[i], 'Unexpected extension for @installed query with outadted extension.');\n\t\t}\n\t});\n\n\ttest('Test installed query results', async () => {\n\t\tawait testableView.show('@installed').then(result => {\n\t\t\tassert.strictEqual(result.length, 5, 'Unexpected number of results for @installed query');\n\t\t\tconst actual = [result.get(0).name, result.get(1).name, result.get(2).name, result.get(3).name, result.get(4).name].sort();\n\t\t\tconst expected = [localDisabledTheme.manifest.name, localEnabledTheme.manifest.name, localRandom.manifest.name, localDisabledLanguage.manifest.name, localEnabledLanguage.manifest.name];\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i], 'Unexpected extension for @installed query.');\n\t\t\t}\n\t\t});\n\n\t\tawait testableView.show('@installed first').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with search text.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with search text.');\n\t\t});\n\n\t\tawait testableView.show('@disabled').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @disabled query');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledTheme.manifest.name, 'Unexpected extension for @disabled query.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledLanguage.manifest.name, 'Unexpected extension for @disabled query.');\n\t\t});\n\n\t\tawait testableView.show('@enabled').then(result => {\n\t\t\tassert.strictEqual(result.length, 3, 'Unexpected number of results for @enabled query');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @enabled query.');\n\t\t\tassert.strictEqual(result.get(1).name, localRandom.manifest.name, 'Unexpected extension for @enabled query.');\n\t\t\tassert.strictEqual(result.get(2).name, localEnabledLanguage.manifest.name, 'Unexpected extension for @enabled query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @builtin category:themes query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInTheme.manifest.name, 'Unexpected extension for @builtin:themes query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @builtin:basics query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInBasic.manifest.name, 'Unexpected extension for @builtin:basics query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @builtin query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInBasic.manifest.name, 'Unexpected extension for @builtin query.');\n\t\t\tassert.strictEqual(result.get(1).name, builtInTheme.manifest.name, 'Unexpected extension for @builtin query.');\n\t\t});\n\n\t\tawait testableView.show('@builtin my-theme').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @builtin query');\n\t\t\tassert.strictEqual(result.get(0).name, builtInTheme.manifest.name, 'Unexpected extension for @builtin query.');\n\t\t});\n\t});\n\n\ttest('Test installed query with category', async () => {\n\t\tawait testableView.show('@installed category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query with category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with category.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with category.');\n\t\t});\n\n\t\tawait testableView.show('@installed category:\"themes\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query with quoted category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with quoted category.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with quoted category.');\n\t\t});\n\n\t\tawait testableView.show('@installed category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 2, 'Unexpected number of results for @installed query with quoted category including space');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledLanguage.manifest.name, 'Unexpected extension for @installed query with quoted category including space.');\n\t\t\tassert.strictEqual(result.get(1).name, localDisabledLanguage.manifest.name, 'Unexpected extension for @installed query with quoted category inlcuding space.');\n\t\t});\n\n\t\tawait testableView.show('@installed category:themes category:random').then(result => {\n\t\t\tassert.strictEqual(result.length, 3, 'Unexpected number of results for @installed query with multiple category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @installed query with multiple category.');\n\t\t\tassert.strictEqual(result.get(1).name, localRandom.manifest.name, 'Unexpected extension for @installed query with multiple category.');\n\t\t\tassert.strictEqual(result.get(2).name, localDisabledTheme.manifest.name, 'Unexpected extension for @installed query with multiple category.');\n\t\t});\n\n\t\tawait testableView.show('@enabled category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @enabled query with category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @enabled query with category.');\n\t\t});\n\n\t\tawait testableView.show('@enabled category:\"themes\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @enabled query with quoted category');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledTheme.manifest.name, 'Unexpected extension for @enabled query with quoted category.');\n\t\t});\n\n\t\tawait testableView.show('@enabled category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @enabled query with quoted category inlcuding space');\n\t\t\tassert.strictEqual(result.get(0).name, localEnabledLanguage.manifest.name, 'Unexpected extension for @enabled query with quoted category including space.');\n\t\t});\n\n\t\tawait testableView.show('@disabled category:themes').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @disabled query with category');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledTheme.manifest.name, 'Unexpected extension for @disabled query with category.');\n\t\t});\n\n\t\tawait testableView.show('@disabled category:\"themes\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @disabled query with quoted category');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledTheme.manifest.name, 'Unexpected extension for @disabled query with quoted category.');\n\t\t});\n\n\t\tawait testableView.show('@disabled category:\"programming languages\"').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @disabled query with quoted category inlcuding space');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledLanguage.manifest.name, 'Unexpected extension for @disabled query with quoted category including space.');\n\t\t});\n\t});\n\n\ttest('Test local query with sorting order', async () => {\n\t\tawait testableView.show('@recentlyUpdated').then(result => {\n\t\t\tassert.strictEqual(result.length, 1, 'Unexpected number of results for @recentlyUpdated');\n\t\t\tassert.strictEqual(result.get(0).name, localDisabledLanguage.manifest.name, 'Unexpected default sort order of extensions for @recentlyUpdate query');\n\t\t});\n\n\t\tawait testableView.show('@installed @sort:updateDate').then(result => {\n\t\t\tassert.strictEqual(result.length, 5, 'Unexpected number of results for @sort:updateDate. Expected all localy installed Extension which are not builtin');\n\t\t\tconst actual = [result.get(0).local?.installedTimestamp, result.get(1).local?.installedTimestamp, result.get(2).local?.installedTimestamp, result.get(3).local?.installedTimestamp, result.get(4).local?.installedTimestamp];\n\t\t\tconst expected = [localEnabledLanguage.installedTimestamp, localDisabledLanguage.installedTimestamp, localRandom.installedTimestamp, localDisabledTheme.installedTimestamp, localEnabledTheme.installedTimestamp];\n\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i], 'Unexpected extension sorting for @sort:updateDate query.');\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('Test @recommended:workspace query', () => {\n\t\tconst workspaceRecommendedExtensions = [\n\t\t\tworkspaceRecommendationA,\n\t\t\tworkspaceRecommendationB,\n\t\t\tconfigBasedRecommendationA,\n\t\t];\n\n\t\treturn testableView.show('@recommended:workspace').then(result => {\n\t\t\tassert.strictEqual(result.length, workspaceRecommendedExtensions.length);\n\t\t\tfor (let i = 0; i < workspaceRecommendedExtensions.length; i++) {\n\t\t\t\tassert.strictEqual(result.get(i).identifier.id, workspaceRecommendedExtensions[i].identifier.id);\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('Test @recommended query', async () => {\n\t\tconst allRecommendedExtensions = [\n\t\t\tfileBasedRecommendationA,\n\t\t\tfileBasedRecommendationB,\n\t\t\tconfigBasedRecommendationB,\n\t\t\totherRecommendationA\n\t\t];\n\n\t\tconst result = await testableView.show('@recommended');\n\t\tassert.strictEqual(result.length, allRecommendedExtensions.length);\n\t\tfor (let i = 0; i < allRecommendedExtensions.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, allRecommendedExtensions[i].identifier.id);\n\t\t}\n\t});\n\n\n\ttest('Test @recommended:all query', async () => {\n\t\tconst allRecommendedExtensions = [\n\t\t\tworkspaceRecommendationA,\n\t\t\tworkspaceRecommendationB,\n\t\t\tconfigBasedRecommendationA,\n\t\t\tfileBasedRecommendationA,\n\t\t\tfileBasedRecommendationB,\n\t\t\tconfigBasedRecommendationB,\n\t\t\totherRecommendationA,\n\t\t];\n\n\t\tconst result = await testableView.show('@recommended:all');\n\t\tassert.strictEqual(result.length, allRecommendedExtensions.length);\n\t\tfor (let i = 0; i < allRecommendedExtensions.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, allRecommendedExtensions[i].identifier.id);\n\t\t}\n\t});\n\n\ttest('Test search', async () => {\n\t\tconst results = [\n\t\t\tfileBasedRecommendationA,\n\t\t\tworkspaceRecommendationA,\n\t\t\totherRecommendationA,\n\t\t\tworkspaceRecommendationB\n\t\t];\n\t\tqueryPage = aPage(results);\n\t\tconst result = await testableView.show('search-me');\n\t\tassert.strictEqual(result.length, results.length);\n\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, results[i].identifier.id);\n\t\t}\n\t});\n\n\ttest('Test preferred search experiment', async () => {\n\t\tqueryPage = aPage([\n\t\t\tfileBasedRecommendationA,\n\t\t\tworkspaceRecommendationA,\n\t\t\totherRecommendationA,\n\t\t\tworkspaceRecommendationB\n\t\t], 5);\n\t\tconst notInFirstPage = aGalleryExtension('not-in-first-page');\n\t\tgalleryExtensions.push(notInFirstPage);\n\t\tconst expected = [\n\t\t\tworkspaceRecommendationA,\n\t\t\tnotInFirstPage,\n\t\t\tworkspaceRecommendationB,\n\t\t\tfileBasedRecommendationA,\n\t\t\totherRecommendationA,\n\t\t];\n\n\t\tinstantiationService.stubPromise(IWorkbenchExtensionManagementService, 'getExtensionsControlManifest', {\n\t\t\tmalicious: [], deprecated: {},\n\t\t\tsearch: [{\n\t\t\t\tquery: 'search-me',\n\t\t\t\tpreferredResults: [\n\t\t\t\t\tworkspaceRecommendationA.identifier.id,\n\t\t\t\t\tnotInFirstPage.identifier.id,\n\t\t\t\t\tworkspaceRecommendationB.identifier.id\n\t\t\t\t]\n\t\t\t}]\n\t\t});\n\n\t\tconst testObject = disposableStore.add(instantiationService.createInstance(ExtensionsListView, {}, { id: '', title: '' }));\n\t\tconst result = await testObject.show('search-me');\n\t\tassert.strictEqual(result.length, expected.length);\n\t\tfor (let i = 0; i < expected.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, expected[i].identifier.id);\n\t\t}\n\t});\n\n\ttest('Skip preferred search experiment when user defines sort order', async () => {\n\t\tconst realResults = [\n\t\t\tfileBasedRecommendationA,\n\t\t\tworkspaceRecommendationA,\n\t\t\totherRecommendationA,\n\t\t\tworkspaceRecommendationB\n\t\t];\n\t\tqueryPage = aPage(realResults);\n\n\t\tconst result = await testableView.show('search-me @sort:installs');\n\t\tassert.strictEqual(result.length, realResults.length);\n\t\tfor (let i = 0; i < realResults.length; i++) {\n\t\t\tassert.strictEqual(result.get(i).identifier.id, realResults[i].identifier.id);\n\t\t}\n\t});\n\n\tfunction aLocalExtension(name: string = 'someext', manifest: any = {}, properties: any = {}): ILocalExtension {\n\t\tmanifest = { name, publisher: 'pub', version: '1.0.0', ...manifest };\n\t\tproperties = {\n\t\t\ttype: ExtensionType.User,\n\t\t\tlocation: URI.file(`pub.${name}`),\n\t\t\tidentifier: { id: getGalleryExtensionId(manifest.publisher, manifest.name) },\n\t\t\tmetadata: { id: getGalleryExtensionId(manifest.publisher, manifest.name), publisherId: manifest.publisher, publisherDisplayName: 'somename' },\n\t\t\t...properties,\n\t\t\tisValid: properties.isValid ?? true,\n\t\t};\n\t\tproperties.isBuiltin = properties.type === ExtensionType.System;\n\t\treturn <ILocalExtension>Object.create({ manifest, ...properties });\n\t}\n\n\tfunction aGalleryExtension(name: string, properties: any = {}, galleryExtensionProperties: any = {}, assets: any = {}): IGalleryExtension {\n\t\tconst targetPlatform = getTargetPlatform(platform, arch);\n\t\tconst galleryExtension = <IGalleryExtension>Object.create({ name, publisher: 'pub', version: '1.0.0', allTargetPlatforms: [targetPlatform], properties: {}, assets: {}, ...properties });\n\t\tgalleryExtension.properties = { ...galleryExtension.properties, dependencies: [], targetPlatform, ...galleryExtensionProperties };\n\t\tgalleryExtension.assets = { ...galleryExtension.assets, ...assets };\n\t\tgalleryExtension.identifier = { id: getGalleryExtensionId(galleryExtension.publisher, galleryExtension.name), uuid: generateUuid() };\n\t\treturn <IGalleryExtension>galleryExtension;\n\t}\n\n\tfunction aPage<T>(objects: IGalleryExtension[] = [], total?: number): IPager<IGalleryExtension> {\n\t\treturn { firstPage: objects, total: total ?? objects.length, pageSize: objects.length, getPage: () => null! };\n\t}\n\n});\n"]}