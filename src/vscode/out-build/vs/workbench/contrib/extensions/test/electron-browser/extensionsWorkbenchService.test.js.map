{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/extensions/test/electron-browser/extensionsWorkbenchService.test.ts","vs/workbench/contrib/extensions/test/electron-browser/extensionsWorkbenchService.test.ts"],"names":[],"mappings":"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","file":"extensionsWorkbenchService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as sinon from 'sinon';\nimport assert from 'assert';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ExtensionState, AutoCheckUpdatesConfigurationKey, AutoUpdateConfigurationKey } from '../../common/extensions.js';\nimport { ExtensionsWorkbenchService } from '../../browser/extensionsWorkbenchService.js';\nimport {\n\tIExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension,\n\tDidUninstallExtensionEvent, InstallExtensionEvent, IGalleryExtensionAssets, InstallOperation, IExtensionTipsService, InstallExtensionResult, getTargetPlatform, IExtensionsControlManifest, UninstallExtensionEvent, Metadata\n} from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, IProfileAwareExtensionManagementService, IWorkbenchExtensionManagementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService } from '../../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { getGalleryExtensionId } from '../../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { anExtensionManagementServerService, TestExtensionEnablementService } from '../../../../services/extensionManagement/test/browser/extensionEnablementService.test.js';\nimport { ExtensionGalleryService } from '../../../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { Event, Emitter } from '../../../../../base/common/event.js';\nimport { IPager } from '../../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestExtensionTipsService, TestSharedProcessService } from '../../../../test/electron-browser/workbenchTestServices.js';\nimport { ConfigurationTarget, IConfigurationChangeEvent, IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IProgressService } from '../../../../../platform/progress/common/progress.js';\nimport { ProgressService } from '../../../../services/progress/browser/progressService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { NativeURLService } from '../../../../../platform/url/common/urlService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ExtensionType } from '../../../../../platform/extensions/common/extensions.js';\nimport { ExtensionKind } from '../../../../../platform/environment/common/environment.js';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { RemoteAgentService } from '../../../../services/remote/electron-browser/remoteAgentService.js';\nimport { ISharedProcessService } from '../../../../../platform/ipc/electron-browser/services.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { TestLifecycleService } from '../../../../test/browser/workbenchTestServices.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { platform } from '../../../../../base/common/platform.js';\nimport { arch } from '../../../../../base/common/process.js';\nimport { IExtensionService } from '../../../../services/extensions/common/extensions.js';\nimport { toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { IUpdateService, State } from '../../../../../platform/update/common/update.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { UserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfile.js';\nimport { toUserDataProfile } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\n\nsuite('ExtensionsWorkbenchServiceTest', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tlet testObject: ExtensionsWorkbenchService;\n\tconst disposableStore = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet installEvent: Emitter<InstallExtensionEvent>,\n\t\tdidInstallEvent: Emitter<readonly InstallExtensionResult[]>,\n\t\tuninstallEvent: Emitter<UninstallExtensionEvent>,\n\t\tdidUninstallEvent: Emitter<DidUninstallExtensionEvent>;\n\n\tsetup(async () => {\n\t\tdisposableStore.add(toDisposable(() => sinon.restore()));\n\t\tinstallEvent = disposableStore.add(new Emitter<InstallExtensionEvent>());\n\t\tdidInstallEvent = disposableStore.add(new Emitter<readonly InstallExtensionResult[]>());\n\t\tuninstallEvent = disposableStore.add(new Emitter<UninstallExtensionEvent>());\n\t\tdidUninstallEvent = disposableStore.add(new Emitter<DidUninstallExtensionEvent>());\n\n\t\tinstantiationService = disposableStore.add(new TestInstantiationService());\n\t\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\t\tinstantiationService.stub(ILogService, NullLogService);\n\t\tinstantiationService.stub(IFileService, disposableStore.add(new FileService(new NullLogService())));\n\t\tinstantiationService.stub(IProgressService, ProgressService);\n\t\tinstantiationService.stub(IProductService, {});\n\n\t\tinstantiationService.stub(IExtensionGalleryService, ExtensionGalleryService);\n\t\tinstantiationService.stub(IURLService, NativeURLService);\n\t\tinstantiationService.stub(ISharedProcessService, TestSharedProcessService);\n\t\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\n\t\tinstantiationService.stub(IWorkspaceContextService, new TestContextService());\n\t\tstubConfiguration();\n\n\t\tinstantiationService.stub(IRemoteAgentService, RemoteAgentService);\n\t\tinstantiationService.stub(IUserDataProfileService, disposableStore.add(new UserDataProfileService(toUserDataProfile('test', 'test', URI.file('foo'), URI.file('cache')))));\n\n\t\tinstantiationService.stub(IWorkbenchExtensionManagementService, {\n\t\t\tonDidInstallExtensions: didInstallEvent.event,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tonInstallExtension: installEvent.event as any,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tonUninstallExtension: uninstallEvent.event as any,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tonDidUninstallExtension: didUninstallEvent.event as any,\n\t\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\t\tonDidChangeProfile: Event.None,\n\t\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\t\tasync getInstalled() { return []; },\n\t\t\tasync getInstalledWorkspaceExtensions() { return []; },\n\t\t\tasync getExtensionsControlManifest() { return { malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\t\tasync updateMetadata(local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) {\n\t\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\t\treturn local;\n\t\t\t},\n\t\t\tasync canInstall() { return true; },\n\t\t\tgetTargetPlatform: async () => getTargetPlatform(platform, arch),\n\t\t\tasync resetPinnedStateForAllUserExtensions(pinned: boolean) { }\n\t\t});\n\n\t\tinstantiationService.stub(IExtensionManagementServerService, anExtensionManagementServerService({\n\t\t\tid: 'local',\n\t\t\tlabel: 'local',\n\t\t\textensionManagementService: instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService,\n\t\t}, null, null));\n\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\n\t\tinstantiationService.stub(ILifecycleService, disposableStore.add(new TestLifecycleService()));\n\t\tinstantiationService.stub(IExtensionTipsService, disposableStore.add(instantiationService.createInstance(TestExtensionTipsService)));\n\t\tinstantiationService.stub(IExtensionRecommendationsService, {});\n\n\t\tinstantiationService.stub(INotificationService, { prompt: () => null! });\n\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\textensions: [],\n\t\t\tasync whenInstalledExtensionsRegistered() { return true; }\n\t\t});\n\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', []);\n\t\tinstantiationService.stub(IExtensionGalleryService, 'isEnabled', true);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', []);\n\t\tinstantiationService.stubPromise(INotificationService, 'prompt', 0);\n\t\t(<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).reset();\n\t\tinstantiationService.stub(IUpdateService, { onStateChange: Event.None, state: State.Uninitialized });\n\t});\n\n\ttest('test gallery extension', async () => {\n\t\tconst expected = aGalleryExtension('expectedName', {\n\t\t\tdisplayName: 'expectedDisplayName',\n\t\t\tversion: '1.5.0',\n\t\t\tpublisherId: 'expectedPublisherId',\n\t\t\tpublisher: 'expectedPublisher',\n\t\t\tpublisherDisplayName: 'expectedPublisherDisplayName',\n\t\t\tdescription: 'expectedDescription',\n\t\t\tinstallCount: 1000,\n\t\t\trating: 4,\n\t\t\tratingCount: 100\n\t\t}, {\n\t\t\tdependencies: ['pub.1', 'pub.2'],\n\t\t}, {\n\t\t\tmanifest: { uri: 'uri:manifest', fallbackUri: 'fallback:manifest' },\n\t\t\treadme: { uri: 'uri:readme', fallbackUri: 'fallback:readme' },\n\t\t\tchangelog: { uri: 'uri:changelog', fallbackUri: 'fallback:changlog' },\n\t\t\tdownload: { uri: 'uri:download', fallbackUri: 'fallback:download' },\n\t\t\ticon: { uri: 'uri:icon', fallbackUri: 'fallback:icon' },\n\t\t\tlicense: { uri: 'uri:license', fallbackUri: 'fallback:license' },\n\t\t\trepository: { uri: 'uri:repository', fallbackUri: 'fallback:repository' },\n\t\t\tsignature: { uri: 'uri:signature', fallbackUri: 'fallback:signature' },\n\t\t\tcoreTranslations: []\n\t\t});\n\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(expected));\n\n\t\treturn testObject.queryGallery(CancellationToken.None).then(pagedResponse => {\n\t\t\tassert.strictEqual(1, pagedResponse.firstPage.length);\n\t\t\tconst actual = pagedResponse.firstPage[0];\n\n\t\t\tassert.strictEqual(ExtensionType.User, actual.type);\n\t\t\tassert.strictEqual('expectedName', actual.name);\n\t\t\tassert.strictEqual('expectedDisplayName', actual.displayName);\n\t\t\tassert.strictEqual('expectedpublisher.expectedname', actual.identifier.id);\n\t\t\tassert.strictEqual('expectedPublisher', actual.publisher);\n\t\t\tassert.strictEqual('expectedPublisherDisplayName', actual.publisherDisplayName);\n\t\t\tassert.strictEqual('1.5.0', actual.version);\n\t\t\tassert.strictEqual('1.5.0', actual.latestVersion);\n\t\t\tassert.strictEqual('expectedDescription', actual.description);\n\t\t\tassert.strictEqual('uri:icon', actual.iconUrl);\n\t\t\tassert.strictEqual('fallback:icon', actual.iconUrlFallback);\n\t\t\tassert.strictEqual('uri:license', actual.licenseUrl);\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, actual.state);\n\t\t\tassert.strictEqual(1000, actual.installCount);\n\t\t\tassert.strictEqual(4, actual.rating);\n\t\t\tassert.strictEqual(100, actual.ratingCount);\n\t\t\tassert.strictEqual(false, actual.outdated);\n\t\t\tassert.deepStrictEqual(['pub.1', 'pub.2'], actual.dependencies);\n\t\t});\n\t});\n\n\ttest('test for empty installed extensions', async () => {\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.deepStrictEqual([], testObject.local);\n\t});\n\n\ttest('test for installed extensions', async () => {\n\t\tconst expected1 = aLocalExtension('local1', {\n\t\t\tpublisher: 'localPublisher1',\n\t\t\tversion: '1.1.0',\n\t\t\tdisplayName: 'localDisplayName1',\n\t\t\tdescription: 'localDescription1',\n\t\t\ticon: 'localIcon1',\n\t\t\textensionDependencies: ['pub.1', 'pub.2'],\n\t\t}, {\n\t\t\ttype: ExtensionType.User,\n\t\t\treadmeUrl: 'localReadmeUrl1',\n\t\t\tchangelogUrl: 'localChangelogUrl1',\n\t\t\tlocation: URI.file('localPath1')\n\t\t});\n\t\tconst expected2 = aLocalExtension('local2', {\n\t\t\tpublisher: 'localPublisher2',\n\t\t\tversion: '1.2.0',\n\t\t\tdisplayName: 'localDisplayName2',\n\t\t\tdescription: 'localDescription2',\n\t\t}, {\n\t\t\ttype: ExtensionType.System,\n\t\t\treadmeUrl: 'localReadmeUrl2',\n\t\t\tchangelogUrl: 'localChangelogUrl2',\n\t\t});\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [expected1, expected2]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actuals = testObject.local;\n\t\tassert.strictEqual(2, actuals.length);\n\n\t\tlet actual = actuals[0];\n\t\tassert.strictEqual(ExtensionType.User, actual.type);\n\t\tassert.strictEqual('local1', actual.name);\n\t\tassert.strictEqual('localDisplayName1', actual.displayName);\n\t\tassert.strictEqual('localpublisher1.local1', actual.identifier.id);\n\t\tassert.strictEqual('localPublisher1', actual.publisher);\n\t\tassert.strictEqual('1.1.0', actual.version);\n\t\tassert.strictEqual('1.1.0', actual.latestVersion);\n\t\tassert.strictEqual('localDescription1', actual.description);\n\t\tassert.ok(actual.iconUrl === 'file:///localPath1/localIcon1' || actual.iconUrl === 'vscode-file://vscode-app/localPath1/localIcon1');\n\t\tassert.ok(actual.iconUrlFallback === undefined);\n\t\tassert.strictEqual(undefined, actual.licenseUrl);\n\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\tassert.strictEqual(undefined, actual.installCount);\n\t\tassert.strictEqual(undefined, actual.rating);\n\t\tassert.strictEqual(undefined, actual.ratingCount);\n\t\tassert.strictEqual(false, actual.outdated);\n\t\tassert.deepStrictEqual(['pub.1', 'pub.2'], actual.dependencies);\n\n\t\tactual = actuals[1];\n\t\tassert.strictEqual(ExtensionType.System, actual.type);\n\t\tassert.strictEqual('local2', actual.name);\n\t\tassert.strictEqual('localDisplayName2', actual.displayName);\n\t\tassert.strictEqual('localpublisher2.local2', actual.identifier.id);\n\t\tassert.strictEqual('localPublisher2', actual.publisher);\n\t\tassert.strictEqual('1.2.0', actual.version);\n\t\tassert.strictEqual('1.2.0', actual.latestVersion);\n\t\tassert.strictEqual('localDescription2', actual.description);\n\t\tassert.strictEqual(undefined, actual.licenseUrl);\n\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\tassert.strictEqual(undefined, actual.installCount);\n\t\tassert.strictEqual(undefined, actual.rating);\n\t\tassert.strictEqual(undefined, actual.ratingCount);\n\t\tassert.strictEqual(false, actual.outdated);\n\t\tassert.deepStrictEqual([], actual.dependencies);\n\t});\n\n\ttest('test installed extensions get syncs with gallery', async () => {\n\t\tconst local1 = aLocalExtension('local1', {\n\t\t\tpublisher: 'localPublisher1',\n\t\t\tversion: '1.1.0',\n\t\t\tdisplayName: 'localDisplayName1',\n\t\t\tdescription: 'localDescription1',\n\t\t\ticon: 'localIcon1',\n\t\t\textensionDependencies: ['pub.1', 'pub.2'],\n\t\t}, {\n\t\t\ttype: ExtensionType.User,\n\t\t\treadmeUrl: 'localReadmeUrl1',\n\t\t\tchangelogUrl: 'localChangelogUrl1',\n\t\t\tlocation: URI.file('localPath1')\n\t\t});\n\t\tconst local2 = aLocalExtension('local2', {\n\t\t\tpublisher: 'localPublisher2',\n\t\t\tversion: '1.2.0',\n\t\t\tdisplayName: 'localDisplayName2',\n\t\t\tdescription: 'localDescription2',\n\t\t}, {\n\t\t\ttype: ExtensionType.System,\n\t\t\treadmeUrl: 'localReadmeUrl2',\n\t\t\tchangelogUrl: 'localChangelogUrl2',\n\t\t});\n\t\tconst gallery1 = aGalleryExtension(local1.manifest.name, {\n\t\t\tidentifier: local1.identifier,\n\t\t\tdisplayName: 'expectedDisplayName',\n\t\t\tversion: '1.5.0',\n\t\t\tpublisherId: 'expectedPublisherId',\n\t\t\tpublisher: local1.manifest.publisher,\n\t\t\tpublisherDisplayName: 'expectedPublisherDisplayName',\n\t\t\tdescription: 'expectedDescription',\n\t\t\tinstallCount: 1000,\n\t\t\trating: 4,\n\t\t\tratingCount: 100\n\t\t}, {\n\t\t\tdependencies: ['pub.1'],\n\t\t}, {\n\t\t\tmanifest: { uri: 'uri:manifest', fallbackUri: 'fallback:manifest' },\n\t\t\treadme: { uri: 'uri:readme', fallbackUri: 'fallback:readme' },\n\t\t\tchangelog: { uri: 'uri:changelog', fallbackUri: 'fallback:changlog' },\n\t\t\tdownload: { uri: 'uri:download', fallbackUri: 'fallback:download' },\n\t\t\ticon: { uri: 'uri:icon', fallbackUri: 'fallback:icon' },\n\t\t\tlicense: { uri: 'uri:license', fallbackUri: 'fallback:license' },\n\t\t\trepository: { uri: 'uri:repository', fallbackUri: 'fallback:repository' },\n\t\t\tsignature: { uri: 'uri:signature', fallbackUri: 'fallback:signature' },\n\t\t\tcoreTranslations: []\n\t\t});\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local1, local2]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery1));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery1);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery1]);\n\t\ttestObject = await aWorkbenchService();\n\t\tawait testObject.queryLocal();\n\n\t\treturn Event.toPromise(testObject.onChange).then(() => {\n\t\t\tconst actuals = testObject.local;\n\t\t\tassert.strictEqual(2, actuals.length);\n\n\t\t\tlet actual = actuals[0];\n\t\t\tassert.strictEqual(ExtensionType.User, actual.type);\n\t\t\tassert.strictEqual('local1', actual.name);\n\t\t\tassert.strictEqual('expectedDisplayName', actual.displayName);\n\t\t\tassert.strictEqual('localpublisher1.local1', actual.identifier.id);\n\t\t\tassert.strictEqual('localPublisher1', actual.publisher);\n\t\t\tassert.strictEqual('1.1.0', actual.version);\n\t\t\tassert.strictEqual('1.5.0', actual.latestVersion);\n\t\t\tassert.strictEqual('expectedDescription', actual.description);\n\t\t\tassert.strictEqual('uri:icon', actual.iconUrl);\n\t\t\tassert.strictEqual('fallback:icon', actual.iconUrlFallback);\n\t\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\t\tassert.strictEqual('uri:license', actual.licenseUrl);\n\t\t\tassert.strictEqual(1000, actual.installCount);\n\t\t\tassert.strictEqual(4, actual.rating);\n\t\t\tassert.strictEqual(100, actual.ratingCount);\n\t\t\tassert.strictEqual(true, actual.outdated);\n\t\t\tassert.deepStrictEqual(['pub.1'], actual.dependencies);\n\n\t\t\tactual = actuals[1];\n\t\t\tassert.strictEqual(ExtensionType.System, actual.type);\n\t\t\tassert.strictEqual('local2', actual.name);\n\t\t\tassert.strictEqual('localDisplayName2', actual.displayName);\n\t\t\tassert.strictEqual('localpublisher2.local2', actual.identifier.id);\n\t\t\tassert.strictEqual('localPublisher2', actual.publisher);\n\t\t\tassert.strictEqual('1.2.0', actual.version);\n\t\t\tassert.strictEqual('1.2.0', actual.latestVersion);\n\t\t\tassert.strictEqual('localDescription2', actual.description);\n\t\t\tassert.strictEqual(undefined, actual.licenseUrl);\n\t\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\t\tassert.strictEqual(undefined, actual.installCount);\n\t\t\tassert.strictEqual(undefined, actual.rating);\n\t\t\tassert.strictEqual(undefined, actual.ratingCount);\n\t\t\tassert.strictEqual(false, actual.outdated);\n\t\t\tassert.deepStrictEqual([], actual.dependencies);\n\t\t});\n\t});\n\n\ttest('test extension state computation', async () => {\n\t\tconst gallery = aGalleryExtension('gallery1');\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn testObject.queryGallery(CancellationToken.None).then(page => {\n\t\t\tconst extension = page.firstPage[0];\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, extension.state);\n\n\t\t\tconst identifier = gallery.identifier;\n\n\t\t\t// Installing\n\t\t\tinstallEvent.fire({ identifier, source: gallery, profileLocation: null! });\n\t\t\tconst local = testObject.local;\n\t\t\tassert.strictEqual(1, local.length);\n\t\t\tconst actual = local[0];\n\t\t\tassert.strictEqual(`${gallery.publisher}.${gallery.name}`, actual.identifier.id);\n\t\t\tassert.strictEqual(ExtensionState.Installing, actual.state);\n\n\t\t\t// Installed\n\t\t\tdidInstallEvent.fire([{ identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension(gallery.name, gallery, { identifier }), profileLocation: null! }]);\n\t\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\t\tassert.strictEqual(1, testObject.local.length);\n\n\t\t\ttestObject.uninstall(actual);\n\n\t\t\t// Uninstalling\n\t\t\tuninstallEvent.fire({ identifier, profileLocation: null! });\n\t\t\tassert.strictEqual(ExtensionState.Uninstalling, actual.state);\n\n\t\t\t// Uninstalled\n\t\t\tdidUninstallEvent.fire({ identifier, profileLocation: null! });\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, actual.state);\n\n\t\t\tassert.strictEqual(0, testObject.local.length);\n\t\t});\n\t});\n\n\ttest('test extension doesnot show outdated for system extensions', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension(local.manifest.name, { identifier: local.identifier, version: '1.0.2' })));\n\t\ttestObject = await aWorkbenchService();\n\t\tawait testObject.queryLocal();\n\n\t\tassert.ok(!testObject.local[0].outdated);\n\t});\n\n\ttest('test canInstall returns false for extensions with out gallery', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = testObject.local[0];\n\t\ttestObject.uninstall(target);\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tassert.ok(await testObject.canInstall(target) !== true);\n\t});\n\n\ttest('test canInstall returns false for a system extension', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension(local.manifest.name, { identifier: local.identifier })));\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = testObject.local[0];\n\n\t\tassert.ok(await testObject.canInstall(target) !== true);\n\t});\n\n\ttest('test canInstall returns true for extensions with gallery', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.User });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst gallery = aGalleryExtension(local.manifest.name, { identifier: local.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = testObject.local[0];\n\n\t\tawait Event.toPromise(Event.filter(testObject.onChange, e => !!e?.gallery));\n\t\tassert.equal(await testObject.canInstall(target), true);\n\t});\n\n\ttest('test onchange event is triggered while installing', async () => {\n\t\tconst gallery = aGalleryExtension('gallery1');\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst page = await testObject.queryGallery(CancellationToken.None);\n\t\tconst extension = page.firstPage[0];\n\t\tassert.strictEqual(ExtensionState.Uninstalled, extension.state);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onChange);\n\n\t\t// Installed\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension(gallery.name, gallery, gallery), profileLocation: null! }]);\n\n\t\tawait promise;\n\t});\n\n\ttest('test onchange event is triggered when installation is finished', async () => {\n\t\tconst gallery = aGalleryExtension('gallery1');\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst target = sinon.spy();\n\n\t\treturn testObject.queryGallery(CancellationToken.None).then(page => {\n\t\t\tconst extension = page.firstPage[0];\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, extension.state);\n\n\t\t\tdisposableStore.add(testObject.onChange(target));\n\n\t\t\t// Installing\n\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\n\t\t\tassert.ok(target.calledOnce);\n\t\t});\n\t});\n\n\ttest('test onchange event is triggered while uninstalling', async () => {\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = sinon.spy();\n\n\t\ttestObject.uninstall(testObject.local[0]);\n\t\tdisposableStore.add(testObject.onChange(target));\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tassert.ok(target.calledOnce);\n\t});\n\n\ttest('test onchange event is triggered when uninstalling is finished', async () => {\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = sinon.spy();\n\n\t\ttestObject.uninstall(testObject.local[0]);\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdisposableStore.add(testObject.onChange(target));\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tassert.ok(target.calledOnce);\n\t});\n\n\ttest('test uninstalled extensions are always enabled', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a')));\n\t\t\t\treturn testObject.queryGallery(CancellationToken.None).then(pagedResponse => {\n\t\t\t\t\tconst actual = pagedResponse.firstPage[0];\n\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enablement state installed enabled extension', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\tconst actual = testObject.local[0];\n\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.EnabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test workspace disabled extension', async () => {\n\t\tconst extensionA = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('d')], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledWorkspace))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('e')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\tconst actual = testObject.local[0];\n\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledWorkspace);\n\t\t\t});\n\t});\n\n\ttest('test globally disabled extension', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('d')], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\tconst actual = testObject.local[0];\n\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test enablement state is updated for user extensions', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledWorkspace)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledWorkspace);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension globally when extension is disabled for workspace', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledWorkspace)\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension globally', async () => {\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test system extensions can be disabled', async () => {\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a', {}, { type: ExtensionType.System })]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test enablement state is updated on change from outside', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension with dependencies disable only itself', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension pack disables the pack', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionPack: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension pack disable all', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionPack: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension fails if extension is a dependent of other', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\tinstantiationService.stub(INotificationService, {\n\t\t\tprompt(severity, message, choices, options) {\n\t\t\t\toptions!.onCancel!();\n\t\t\t\treturn null!;\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[1], EnablementState.DisabledGlobally).then(() => assert.fail('Should fail'), error => assert.ok(true));\n\t\t\t});\n\t});\n\n\ttest('test disable extension disables all dependents when chosen to disable all', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\tinstantiationService.stub(IDialogService, {\n\t\t\tprompt() {\n\t\t\t\treturn Promise.resolve({ result: true });\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tawait testObject.setEnablement(testObject.local[1], EnablementState.DisabledGlobally);\n\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test disable extension when extension is part of a pack', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionPack: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[1], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable both dependency and dependent do not promot and do not fail', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement([testObject.local[1], testObject.local[0]], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable both dependency and dependent do not promot and do not fail', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement([testObject.local[1], testObject.local[0]], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension does not fail if its dependency is a dependent of other but chosen to disable only itself', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.b'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension if its dependency is a dependent of other disabled extension', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.b'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension if its dependencys dependency is itself', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b', { extensionDependencies: ['pub.a'] });\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\tinstantiationService.stub(INotificationService, {\n\t\t\tprompt(severity, message, choices, options) {\n\t\t\t\toptions!.onCancel!();\n\t\t\t\treturn null!;\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.fail('An extension with dependent should not be disabled'), () => null);\n\t\t\t});\n\t});\n\n\ttest('test disable extension if its dependency is dependent and is disabled', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.b'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally));\n\t\t\t});\n\t});\n\n\ttest('test disable extension with cyclic dependencies', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b', { extensionDependencies: ['pub.c'] });\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.a'] });\n\n\t\tinstantiationService.stub(INotificationService, {\n\t\t\tprompt(severity, message, choices, options) {\n\t\t\t\toptions!.onCancel!();\n\t\t\t\treturn null!;\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.fail('An extension with dependent should not be disabled'), () => null);\n\t\t\t});\n\t});\n\n\ttest('test enable extension with dependencies enable all', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension with dependencies does not prompt if dependency is enabled already', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension with dependency does not prompt if both are enabled', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement([testObject.local[1], testObject.local[0]], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension with cyclic dependencies', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b', { extensionDependencies: ['pub.c'] });\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.a'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[2].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test change event is fired when disablement flags are changed', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\tdisposableStore.add(testObject.onChange(target));\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.ok(target.calledOnce));\n\t\t\t});\n\t});\n\n\ttest('test change event is fired when disablement flags are changed from outside', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\tdisposableStore.add(testObject.onChange(target));\n\n\t\t\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.ok(target.calledOnce));\n\t\t\t});\n\t});\n\n\ttest('test updating an extension does not re-eanbles it when disabled globally', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst local = aLocalExtension('pub.a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tdidInstallEvent.fire([{ local, identifier: local.identifier, operation: InstallOperation.Update, profileLocation: null! }]);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst actual = await testObject.queryLocal();\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('test updating an extension does not re-eanbles it when workspace disabled', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst local = aLocalExtension('pub.a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace);\n\t\tdidInstallEvent.fire([{ local, identifier: local.identifier, operation: InstallOperation.Update, profileLocation: null! }]);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst actual = await testObject.queryLocal();\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledWorkspace);\n\t});\n\n\ttest('test user extension is preferred when the same extension exists as system and user extension', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst userExtension = aLocalExtension('pub.a');\n\t\tconst systemExtension = aLocalExtension('pub.a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [systemExtension, userExtension]);\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, userExtension);\n\t});\n\n\ttest('test user extension is disabled when the same extension exists as system and user extension and system extension is disabled', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst systemExtension = aLocalExtension('pub.a', {}, { type: ExtensionType.System });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([systemExtension], EnablementState.DisabledGlobally);\n\t\tconst userExtension = aLocalExtension('pub.a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [systemExtension, userExtension]);\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, userExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('Test local ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local web extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace,ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace', 'ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,workspace,web extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace', 'web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,web,workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'web', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local web,ui,workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web', 'ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local web,workspace,ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web', 'workspace', 'ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace,web,ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace', 'web', 'ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace,ui,web extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace', 'ui', 'web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local UI extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,workspace extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in remote server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in both servers and local is disabled', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([remoteExtension], EnablementState.DisabledGlobally);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in both servers and remote is disabled in workspace', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([remoteExtension], EnablementState.DisabledWorkspace);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledWorkspace);\n\t});\n\n\ttest('Test local ui, workspace extension is chosen if it exists in both servers and local is disabled', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('Test local ui, workspace extension is chosen if it exists in both servers and local is disabled in workspace', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledWorkspace);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledWorkspace);\n\t});\n\n\ttest('Test local web extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test remote web extension is chosen if it exists only in remote', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web'];\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t});\n\n\ttest('Test disable autoupdate for extension when auto update is enabled for all', async () => {\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), ['pub.a']);\n\t});\n\n\ttest('Test disable autoupdate for extension when auto update is enabled for enabled extensions', async () => {\n\t\tstubConfiguration('onlyEnabledExtensions');\n\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), ['pub.a']);\n\t});\n\n\ttest('Test enable autoupdate for extension when auto update is enabled for all', async () => {\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test enable autoupdate for pinned extension when auto update is enabled', async () => {\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, true);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, false);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test updateAutoUpdateEnablementFor throws error when auto update is disabled', async () => {\n\t\tstubConfiguration(false);\n\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\ttry {\n\t\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\t\t\tassert.fail('error expected');\n\t\t} catch (error) {\n\t\t\t// expected\n\t\t}\n\t});\n\n\ttest('Test updateAutoUpdateEnablementFor throws error for publisher when auto update is enabled', async () => {\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\ttry {\n\t\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0].publisher, true);\n\t\t\tassert.fail('error expected');\n\t\t} catch (error) {\n\t\t\t// expected\n\t\t}\n\t});\n\n\ttest('Test enable autoupdate for extension when auto update is disabled', async () => {\n\t\tstubConfiguration(false);\n\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b', undefined, { pinned: true });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, true);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, true);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, true);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, true);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), ['pub.a']);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test reset autoupdate extensions state when auto update is disabled', async () => {\n\t\tinstantiationService.stub(IDialogService, {\n\t\t\tconfirm: () => Promise.resolve({ confirmed: true })\n\t\t});\n\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b', undefined, { pinned: true });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), ['pub.a']);\n\n\t\tawait testObject.updateAutoUpdateForAllExtensions(false);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test reset autoupdate extensions state when auto update is enabled', async () => {\n\t\tstubConfiguration(false);\n\t\tinstantiationService.stub(IDialogService, {\n\t\t\tconfirm: () => Promise.resolve({ confirmed: true })\n\t\t});\n\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b', undefined, { pinned: true });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), ['pub.a']);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\n\t\tawait testObject.updateAutoUpdateForAllExtensions(true);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\tasync function aWorkbenchService(): Promise<ExtensionsWorkbenchService> {\n\t\tconst workbenchService: ExtensionsWorkbenchService = disposableStore.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tawait workbenchService.queryLocal();\n\t\treturn workbenchService;\n\t}\n\n\tfunction stubConfiguration(autoUpdateValue?: any, autoCheckUpdatesValue?: any): void {\n\t\tconst values: any = {\n\t\t\t[AutoUpdateConfigurationKey]: autoUpdateValue ?? true,\n\t\t\t[AutoCheckUpdatesConfigurationKey]: autoCheckUpdatesValue ?? true\n\t\t};\n\t\tconst emitter = disposableStore.add(new Emitter<IConfigurationChangeEvent>());\n\t\tinstantiationService.stub(IConfigurationService, {\n\t\t\tonDidChangeConfiguration: emitter.event,\n\t\t\tgetValue: (key?: any) => {\n\t\t\t\treturn key ? values[key] : undefined;\n\t\t\t},\n\t\t\tupdateValue: async (key: string, value: any) => {\n\t\t\t\tvalues[key] = value;\n\t\t\t\temitter.fire({\n\t\t\t\t\taffectedKeys: new Set([key]),\n\t\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\t\tchange: { keys: [], overrides: [] },\n\t\t\t\t\taffectsConfiguration(configuration, overrides) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\tinspect: (key: string) => {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction aLocalExtension(name: string = 'someext', manifest: any = {}, properties: any = {}): ILocalExtension {\n\t\tmanifest = { name, publisher: 'pub', version: '1.0.0', ...manifest };\n\t\tproperties = {\n\t\t\ttype: ExtensionType.User,\n\t\t\tlocation: URI.file(`pub.${name}`),\n\t\t\tidentifier: { id: getGalleryExtensionId(manifest.publisher, manifest.name) },\n\t\t\t...properties,\n\t\t\tisValid: properties.isValid ?? true,\n\t\t};\n\t\treturn <ILocalExtension>Object.create({ manifest, ...properties });\n\t}\n\n\tconst noAssets: IGalleryExtensionAssets = {\n\t\tchangelog: null,\n\t\tdownload: null!,\n\t\ticon: null!,\n\t\tlicense: null,\n\t\tmanifest: null,\n\t\treadme: null,\n\t\trepository: null,\n\t\tsignature: null,\n\t\tcoreTranslations: []\n\t};\n\n\tfunction aGalleryExtension(name: string, properties: any = {}, galleryExtensionProperties: any = {}, assets: IGalleryExtensionAssets = noAssets): IGalleryExtension {\n\t\tconst targetPlatform = getTargetPlatform(platform, arch);\n\t\tconst galleryExtension = <IGalleryExtension>Object.create({ name, publisher: 'pub', version: '1.0.0', allTargetPlatforms: [targetPlatform], properties: {}, assets: {}, isSigned: true, ...properties });\n\t\tgalleryExtension.properties = { ...galleryExtension.properties, dependencies: [], targetPlatform, ...galleryExtensionProperties };\n\t\tgalleryExtension.assets = { ...galleryExtension.assets, ...assets };\n\t\tgalleryExtension.identifier = { id: getGalleryExtensionId(galleryExtension.publisher, galleryExtension.name), uuid: generateUuid() };\n\t\treturn <IGalleryExtension>galleryExtension;\n\t}\n\n\tfunction aPage<T>(...objects: T[]): IPager<T> {\n\t\treturn { firstPage: objects, total: objects.length, pageSize: objects.length, getPage: () => null! };\n\t}\n\n\tfunction aMultiExtensionManagementServerService(instantiationService: TestInstantiationService, localExtensionManagementService?: IProfileAwareExtensionManagementService, remoteExtensionManagementService?: IProfileAwareExtensionManagementService): IExtensionManagementServerService {\n\t\tconst localExtensionManagementServer: IExtensionManagementServer = {\n\t\t\tid: 'vscode-local',\n\t\t\tlabel: 'local',\n\t\t\textensionManagementService: localExtensionManagementService || createExtensionManagementService(),\n\t\t};\n\t\tconst remoteExtensionManagementServer: IExtensionManagementServer = {\n\t\t\tid: 'vscode-remote',\n\t\t\tlabel: 'remote',\n\t\t\textensionManagementService: remoteExtensionManagementService || createExtensionManagementService(),\n\t\t};\n\t\treturn anExtensionManagementServerService(localExtensionManagementServer, remoteExtensionManagementServer, null);\n\t}\n\n\tfunction createExtensionManagementService(installed: ILocalExtension[] = []): IProfileAwareExtensionManagementService {\n\t\treturn <IProfileAwareExtensionManagementService>{\n\t\t\tonInstallExtension: Event.None,\n\t\t\tonDidInstallExtensions: Event.None,\n\t\t\tonUninstallExtension: Event.None,\n\t\t\tonDidUninstallExtension: Event.None,\n\t\t\tonDidChangeProfile: Event.None,\n\t\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\t\tgetInstalled: () => Promise.resolve<ILocalExtension[]>(installed),\n\t\t\tinstallFromGallery: (extension: IGalleryExtension) => Promise.reject(new Error('not supported')),\n\t\t\tupdateMetadata: async (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>, profileLocation: URI) => {\n\t\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\t\treturn local;\n\t\t\t},\n\t\t\tgetTargetPlatform: async () => getTargetPlatform(platform, arch),\n\t\t\tasync getExtensionsControlManifest() { return <IExtensionsControlManifest>{ malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\t\tasync resetPinnedStateForAllUserExtensions(pinned: boolean) { }\n\t\t};\n\t}\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as sinon from 'sinon';\nimport assert from 'assert';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ExtensionState, AutoCheckUpdatesConfigurationKey, AutoUpdateConfigurationKey } from '../../common/extensions.js';\nimport { ExtensionsWorkbenchService } from '../../browser/extensionsWorkbenchService.js';\nimport {\n\tIExtensionManagementService, IExtensionGalleryService, ILocalExtension, IGalleryExtension,\n\tDidUninstallExtensionEvent, InstallExtensionEvent, IGalleryExtensionAssets, InstallOperation, IExtensionTipsService, InstallExtensionResult, getTargetPlatform, IExtensionsControlManifest, UninstallExtensionEvent, Metadata\n} from '../../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IWorkbenchExtensionEnablementService, EnablementState, IExtensionManagementServerService, IExtensionManagementServer, IProfileAwareExtensionManagementService, IWorkbenchExtensionManagementService } from '../../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService } from '../../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { getGalleryExtensionId } from '../../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { anExtensionManagementServerService, TestExtensionEnablementService } from '../../../../services/extensionManagement/test/browser/extensionEnablementService.test.js';\nimport { ExtensionGalleryService } from '../../../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { Event, Emitter } from '../../../../../base/common/event.js';\nimport { IPager } from '../../../../../base/common/paging.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestExtensionTipsService, TestSharedProcessService } from '../../../../test/electron-browser/workbenchTestServices.js';\nimport { ConfigurationTarget, IConfigurationChangeEvent, IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IProgressService } from '../../../../../platform/progress/common/progress.js';\nimport { ProgressService } from '../../../../services/progress/browser/progressService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { NativeURLService } from '../../../../../platform/url/common/urlService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ExtensionType } from '../../../../../platform/extensions/common/extensions.js';\nimport { ExtensionKind } from '../../../../../platform/environment/common/environment.js';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { RemoteAgentService } from '../../../../services/remote/electron-browser/remoteAgentService.js';\nimport { ISharedProcessService } from '../../../../../platform/ipc/electron-browser/services.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { ILifecycleService } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { TestLifecycleService } from '../../../../test/browser/workbenchTestServices.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { platform } from '../../../../../base/common/platform.js';\nimport { arch } from '../../../../../base/common/process.js';\nimport { IExtensionService } from '../../../../services/extensions/common/extensions.js';\nimport { toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { IUpdateService, State } from '../../../../../platform/update/common/update.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { UserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../../services/userDataProfile/common/userDataProfile.js';\nimport { toUserDataProfile } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\n\nsuite('ExtensionsWorkbenchServiceTest', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tlet testObject: ExtensionsWorkbenchService;\n\tconst disposableStore = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet installEvent: Emitter<InstallExtensionEvent>,\n\t\tdidInstallEvent: Emitter<readonly InstallExtensionResult[]>,\n\t\tuninstallEvent: Emitter<UninstallExtensionEvent>,\n\t\tdidUninstallEvent: Emitter<DidUninstallExtensionEvent>;\n\n\tsetup(async () => {\n\t\tdisposableStore.add(toDisposable(() => sinon.restore()));\n\t\tinstallEvent = disposableStore.add(new Emitter<InstallExtensionEvent>());\n\t\tdidInstallEvent = disposableStore.add(new Emitter<readonly InstallExtensionResult[]>());\n\t\tuninstallEvent = disposableStore.add(new Emitter<UninstallExtensionEvent>());\n\t\tdidUninstallEvent = disposableStore.add(new Emitter<DidUninstallExtensionEvent>());\n\n\t\tinstantiationService = disposableStore.add(new TestInstantiationService());\n\t\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\t\tinstantiationService.stub(ILogService, NullLogService);\n\t\tinstantiationService.stub(IFileService, disposableStore.add(new FileService(new NullLogService())));\n\t\tinstantiationService.stub(IProgressService, ProgressService);\n\t\tinstantiationService.stub(IProductService, {});\n\n\t\tinstantiationService.stub(IExtensionGalleryService, ExtensionGalleryService);\n\t\tinstantiationService.stub(IURLService, NativeURLService);\n\t\tinstantiationService.stub(ISharedProcessService, TestSharedProcessService);\n\t\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\n\t\tinstantiationService.stub(IWorkspaceContextService, new TestContextService());\n\t\tstubConfiguration();\n\n\t\tinstantiationService.stub(IRemoteAgentService, RemoteAgentService);\n\t\tinstantiationService.stub(IUserDataProfileService, disposableStore.add(new UserDataProfileService(toUserDataProfile('test', 'test', URI.file('foo'), URI.file('cache')))));\n\n\t\tinstantiationService.stub(IWorkbenchExtensionManagementService, {\n\t\t\tonDidInstallExtensions: didInstallEvent.event,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tonInstallExtension: installEvent.event as any,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tonUninstallExtension: uninstallEvent.event as any,\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\tonDidUninstallExtension: didUninstallEvent.event as any,\n\t\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\t\tonDidChangeProfile: Event.None,\n\t\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\t\tasync getInstalled() { return []; },\n\t\t\tasync getInstalledWorkspaceExtensions() { return []; },\n\t\t\tasync getExtensionsControlManifest() { return { malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\t\tasync updateMetadata(local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) {\n\t\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\t\treturn local;\n\t\t\t},\n\t\t\tasync canInstall() { return true; },\n\t\t\tgetTargetPlatform: async () => getTargetPlatform(platform, arch),\n\t\t\tasync resetPinnedStateForAllUserExtensions(pinned: boolean) { }\n\t\t});\n\n\t\tinstantiationService.stub(IExtensionManagementServerService, anExtensionManagementServerService({\n\t\t\tid: 'local',\n\t\t\tlabel: 'local',\n\t\t\textensionManagementService: instantiationService.get(IExtensionManagementService) as IProfileAwareExtensionManagementService,\n\t\t}, null, null));\n\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\n\t\tinstantiationService.stub(ILifecycleService, disposableStore.add(new TestLifecycleService()));\n\t\tinstantiationService.stub(IExtensionTipsService, disposableStore.add(instantiationService.createInstance(TestExtensionTipsService)));\n\t\tinstantiationService.stub(IExtensionRecommendationsService, {});\n\n\t\tinstantiationService.stub(INotificationService, { prompt: () => null! });\n\n\t\tinstantiationService.stub(IExtensionService, {\n\t\t\tonDidChangeExtensions: Event.None,\n\t\t\textensions: [],\n\t\t\tasync whenInstalledExtensionsRegistered() { return true; }\n\t\t});\n\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', []);\n\t\tinstantiationService.stub(IExtensionGalleryService, 'isEnabled', true);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage());\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', []);\n\t\tinstantiationService.stubPromise(INotificationService, 'prompt', 0);\n\t\t(<TestExtensionEnablementService>instantiationService.get(IWorkbenchExtensionEnablementService)).reset();\n\t\tinstantiationService.stub(IUpdateService, { onStateChange: Event.None, state: State.Uninitialized });\n\t});\n\n\ttest('test gallery extension', async () => {\n\t\tconst expected = aGalleryExtension('expectedName', {\n\t\t\tdisplayName: 'expectedDisplayName',\n\t\t\tversion: '1.5.0',\n\t\t\tpublisherId: 'expectedPublisherId',\n\t\t\tpublisher: 'expectedPublisher',\n\t\t\tpublisherDisplayName: 'expectedPublisherDisplayName',\n\t\t\tdescription: 'expectedDescription',\n\t\t\tinstallCount: 1000,\n\t\t\trating: 4,\n\t\t\tratingCount: 100\n\t\t}, {\n\t\t\tdependencies: ['pub.1', 'pub.2'],\n\t\t}, {\n\t\t\tmanifest: { uri: 'uri:manifest', fallbackUri: 'fallback:manifest' },\n\t\t\treadme: { uri: 'uri:readme', fallbackUri: 'fallback:readme' },\n\t\t\tchangelog: { uri: 'uri:changelog', fallbackUri: 'fallback:changlog' },\n\t\t\tdownload: { uri: 'uri:download', fallbackUri: 'fallback:download' },\n\t\t\ticon: { uri: 'uri:icon', fallbackUri: 'fallback:icon' },\n\t\t\tlicense: { uri: 'uri:license', fallbackUri: 'fallback:license' },\n\t\t\trepository: { uri: 'uri:repository', fallbackUri: 'fallback:repository' },\n\t\t\tsignature: { uri: 'uri:signature', fallbackUri: 'fallback:signature' },\n\t\t\tcoreTranslations: []\n\t\t});\n\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(expected));\n\n\t\treturn testObject.queryGallery(CancellationToken.None).then(pagedResponse => {\n\t\t\tassert.strictEqual(1, pagedResponse.firstPage.length);\n\t\t\tconst actual = pagedResponse.firstPage[0];\n\n\t\t\tassert.strictEqual(ExtensionType.User, actual.type);\n\t\t\tassert.strictEqual('expectedName', actual.name);\n\t\t\tassert.strictEqual('expectedDisplayName', actual.displayName);\n\t\t\tassert.strictEqual('expectedpublisher.expectedname', actual.identifier.id);\n\t\t\tassert.strictEqual('expectedPublisher', actual.publisher);\n\t\t\tassert.strictEqual('expectedPublisherDisplayName', actual.publisherDisplayName);\n\t\t\tassert.strictEqual('1.5.0', actual.version);\n\t\t\tassert.strictEqual('1.5.0', actual.latestVersion);\n\t\t\tassert.strictEqual('expectedDescription', actual.description);\n\t\t\tassert.strictEqual('uri:icon', actual.iconUrl);\n\t\t\tassert.strictEqual('fallback:icon', actual.iconUrlFallback);\n\t\t\tassert.strictEqual('uri:license', actual.licenseUrl);\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, actual.state);\n\t\t\tassert.strictEqual(1000, actual.installCount);\n\t\t\tassert.strictEqual(4, actual.rating);\n\t\t\tassert.strictEqual(100, actual.ratingCount);\n\t\t\tassert.strictEqual(false, actual.outdated);\n\t\t\tassert.deepStrictEqual(['pub.1', 'pub.2'], actual.dependencies);\n\t\t});\n\t});\n\n\ttest('test for empty installed extensions', async () => {\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.deepStrictEqual([], testObject.local);\n\t});\n\n\ttest('test for installed extensions', async () => {\n\t\tconst expected1 = aLocalExtension('local1', {\n\t\t\tpublisher: 'localPublisher1',\n\t\t\tversion: '1.1.0',\n\t\t\tdisplayName: 'localDisplayName1',\n\t\t\tdescription: 'localDescription1',\n\t\t\ticon: 'localIcon1',\n\t\t\textensionDependencies: ['pub.1', 'pub.2'],\n\t\t}, {\n\t\t\ttype: ExtensionType.User,\n\t\t\treadmeUrl: 'localReadmeUrl1',\n\t\t\tchangelogUrl: 'localChangelogUrl1',\n\t\t\tlocation: URI.file('localPath1')\n\t\t});\n\t\tconst expected2 = aLocalExtension('local2', {\n\t\t\tpublisher: 'localPublisher2',\n\t\t\tversion: '1.2.0',\n\t\t\tdisplayName: 'localDisplayName2',\n\t\t\tdescription: 'localDescription2',\n\t\t}, {\n\t\t\ttype: ExtensionType.System,\n\t\t\treadmeUrl: 'localReadmeUrl2',\n\t\t\tchangelogUrl: 'localChangelogUrl2',\n\t\t});\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [expected1, expected2]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actuals = testObject.local;\n\t\tassert.strictEqual(2, actuals.length);\n\n\t\tlet actual = actuals[0];\n\t\tassert.strictEqual(ExtensionType.User, actual.type);\n\t\tassert.strictEqual('local1', actual.name);\n\t\tassert.strictEqual('localDisplayName1', actual.displayName);\n\t\tassert.strictEqual('localpublisher1.local1', actual.identifier.id);\n\t\tassert.strictEqual('localPublisher1', actual.publisher);\n\t\tassert.strictEqual('1.1.0', actual.version);\n\t\tassert.strictEqual('1.1.0', actual.latestVersion);\n\t\tassert.strictEqual('localDescription1', actual.description);\n\t\tassert.ok(actual.iconUrl === 'file:///localPath1/localIcon1' || actual.iconUrl === 'vscode-file://vscode-app/localPath1/localIcon1');\n\t\tassert.ok(actual.iconUrlFallback === undefined);\n\t\tassert.strictEqual(undefined, actual.licenseUrl);\n\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\tassert.strictEqual(undefined, actual.installCount);\n\t\tassert.strictEqual(undefined, actual.rating);\n\t\tassert.strictEqual(undefined, actual.ratingCount);\n\t\tassert.strictEqual(false, actual.outdated);\n\t\tassert.deepStrictEqual(['pub.1', 'pub.2'], actual.dependencies);\n\n\t\tactual = actuals[1];\n\t\tassert.strictEqual(ExtensionType.System, actual.type);\n\t\tassert.strictEqual('local2', actual.name);\n\t\tassert.strictEqual('localDisplayName2', actual.displayName);\n\t\tassert.strictEqual('localpublisher2.local2', actual.identifier.id);\n\t\tassert.strictEqual('localPublisher2', actual.publisher);\n\t\tassert.strictEqual('1.2.0', actual.version);\n\t\tassert.strictEqual('1.2.0', actual.latestVersion);\n\t\tassert.strictEqual('localDescription2', actual.description);\n\t\tassert.strictEqual(undefined, actual.licenseUrl);\n\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\tassert.strictEqual(undefined, actual.installCount);\n\t\tassert.strictEqual(undefined, actual.rating);\n\t\tassert.strictEqual(undefined, actual.ratingCount);\n\t\tassert.strictEqual(false, actual.outdated);\n\t\tassert.deepStrictEqual([], actual.dependencies);\n\t});\n\n\ttest('test installed extensions get syncs with gallery', async () => {\n\t\tconst local1 = aLocalExtension('local1', {\n\t\t\tpublisher: 'localPublisher1',\n\t\t\tversion: '1.1.0',\n\t\t\tdisplayName: 'localDisplayName1',\n\t\t\tdescription: 'localDescription1',\n\t\t\ticon: 'localIcon1',\n\t\t\textensionDependencies: ['pub.1', 'pub.2'],\n\t\t}, {\n\t\t\ttype: ExtensionType.User,\n\t\t\treadmeUrl: 'localReadmeUrl1',\n\t\t\tchangelogUrl: 'localChangelogUrl1',\n\t\t\tlocation: URI.file('localPath1')\n\t\t});\n\t\tconst local2 = aLocalExtension('local2', {\n\t\t\tpublisher: 'localPublisher2',\n\t\t\tversion: '1.2.0',\n\t\t\tdisplayName: 'localDisplayName2',\n\t\t\tdescription: 'localDescription2',\n\t\t}, {\n\t\t\ttype: ExtensionType.System,\n\t\t\treadmeUrl: 'localReadmeUrl2',\n\t\t\tchangelogUrl: 'localChangelogUrl2',\n\t\t});\n\t\tconst gallery1 = aGalleryExtension(local1.manifest.name, {\n\t\t\tidentifier: local1.identifier,\n\t\t\tdisplayName: 'expectedDisplayName',\n\t\t\tversion: '1.5.0',\n\t\t\tpublisherId: 'expectedPublisherId',\n\t\t\tpublisher: local1.manifest.publisher,\n\t\t\tpublisherDisplayName: 'expectedPublisherDisplayName',\n\t\t\tdescription: 'expectedDescription',\n\t\t\tinstallCount: 1000,\n\t\t\trating: 4,\n\t\t\tratingCount: 100\n\t\t}, {\n\t\t\tdependencies: ['pub.1'],\n\t\t}, {\n\t\t\tmanifest: { uri: 'uri:manifest', fallbackUri: 'fallback:manifest' },\n\t\t\treadme: { uri: 'uri:readme', fallbackUri: 'fallback:readme' },\n\t\t\tchangelog: { uri: 'uri:changelog', fallbackUri: 'fallback:changlog' },\n\t\t\tdownload: { uri: 'uri:download', fallbackUri: 'fallback:download' },\n\t\t\ticon: { uri: 'uri:icon', fallbackUri: 'fallback:icon' },\n\t\t\tlicense: { uri: 'uri:license', fallbackUri: 'fallback:license' },\n\t\t\trepository: { uri: 'uri:repository', fallbackUri: 'fallback:repository' },\n\t\t\tsignature: { uri: 'uri:signature', fallbackUri: 'fallback:signature' },\n\t\t\tcoreTranslations: []\n\t\t});\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local1, local2]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery1));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery1);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery1]);\n\t\ttestObject = await aWorkbenchService();\n\t\tawait testObject.queryLocal();\n\n\t\treturn Event.toPromise(testObject.onChange).then(() => {\n\t\t\tconst actuals = testObject.local;\n\t\t\tassert.strictEqual(2, actuals.length);\n\n\t\t\tlet actual = actuals[0];\n\t\t\tassert.strictEqual(ExtensionType.User, actual.type);\n\t\t\tassert.strictEqual('local1', actual.name);\n\t\t\tassert.strictEqual('expectedDisplayName', actual.displayName);\n\t\t\tassert.strictEqual('localpublisher1.local1', actual.identifier.id);\n\t\t\tassert.strictEqual('localPublisher1', actual.publisher);\n\t\t\tassert.strictEqual('1.1.0', actual.version);\n\t\t\tassert.strictEqual('1.5.0', actual.latestVersion);\n\t\t\tassert.strictEqual('expectedDescription', actual.description);\n\t\t\tassert.strictEqual('uri:icon', actual.iconUrl);\n\t\t\tassert.strictEqual('fallback:icon', actual.iconUrlFallback);\n\t\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\t\tassert.strictEqual('uri:license', actual.licenseUrl);\n\t\t\tassert.strictEqual(1000, actual.installCount);\n\t\t\tassert.strictEqual(4, actual.rating);\n\t\t\tassert.strictEqual(100, actual.ratingCount);\n\t\t\tassert.strictEqual(true, actual.outdated);\n\t\t\tassert.deepStrictEqual(['pub.1'], actual.dependencies);\n\n\t\t\tactual = actuals[1];\n\t\t\tassert.strictEqual(ExtensionType.System, actual.type);\n\t\t\tassert.strictEqual('local2', actual.name);\n\t\t\tassert.strictEqual('localDisplayName2', actual.displayName);\n\t\t\tassert.strictEqual('localpublisher2.local2', actual.identifier.id);\n\t\t\tassert.strictEqual('localPublisher2', actual.publisher);\n\t\t\tassert.strictEqual('1.2.0', actual.version);\n\t\t\tassert.strictEqual('1.2.0', actual.latestVersion);\n\t\t\tassert.strictEqual('localDescription2', actual.description);\n\t\t\tassert.strictEqual(undefined, actual.licenseUrl);\n\t\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\t\tassert.strictEqual(undefined, actual.installCount);\n\t\t\tassert.strictEqual(undefined, actual.rating);\n\t\t\tassert.strictEqual(undefined, actual.ratingCount);\n\t\t\tassert.strictEqual(false, actual.outdated);\n\t\t\tassert.deepStrictEqual([], actual.dependencies);\n\t\t});\n\t});\n\n\ttest('test extension state computation', async () => {\n\t\tconst gallery = aGalleryExtension('gallery1');\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\treturn testObject.queryGallery(CancellationToken.None).then(page => {\n\t\t\tconst extension = page.firstPage[0];\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, extension.state);\n\n\t\t\tconst identifier = gallery.identifier;\n\n\t\t\t// Installing\n\t\t\tinstallEvent.fire({ identifier, source: gallery, profileLocation: null! });\n\t\t\tconst local = testObject.local;\n\t\t\tassert.strictEqual(1, local.length);\n\t\t\tconst actual = local[0];\n\t\t\tassert.strictEqual(`${gallery.publisher}.${gallery.name}`, actual.identifier.id);\n\t\t\tassert.strictEqual(ExtensionState.Installing, actual.state);\n\n\t\t\t// Installed\n\t\t\tdidInstallEvent.fire([{ identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension(gallery.name, gallery, { identifier }), profileLocation: null! }]);\n\t\t\tassert.strictEqual(ExtensionState.Installed, actual.state);\n\t\t\tassert.strictEqual(1, testObject.local.length);\n\n\t\t\ttestObject.uninstall(actual);\n\n\t\t\t// Uninstalling\n\t\t\tuninstallEvent.fire({ identifier, profileLocation: null! });\n\t\t\tassert.strictEqual(ExtensionState.Uninstalling, actual.state);\n\n\t\t\t// Uninstalled\n\t\t\tdidUninstallEvent.fire({ identifier, profileLocation: null! });\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, actual.state);\n\n\t\t\tassert.strictEqual(0, testObject.local.length);\n\t\t});\n\t});\n\n\ttest('test extension doesnot show outdated for system extensions', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension(local.manifest.name, { identifier: local.identifier, version: '1.0.2' })));\n\t\ttestObject = await aWorkbenchService();\n\t\tawait testObject.queryLocal();\n\n\t\tassert.ok(!testObject.local[0].outdated);\n\t});\n\n\ttest('test canInstall returns false for extensions with out gallery', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = testObject.local[0];\n\t\ttestObject.uninstall(target);\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tassert.ok(await testObject.canInstall(target) !== true);\n\t});\n\n\ttest('test canInstall returns false for a system extension', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension(local.manifest.name, { identifier: local.identifier })));\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = testObject.local[0];\n\n\t\tassert.ok(await testObject.canInstall(target) !== true);\n\t});\n\n\ttest('test canInstall returns true for extensions with gallery', async () => {\n\t\tconst local = aLocalExtension('a', { version: '1.0.1' }, { type: ExtensionType.User });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst gallery = aGalleryExtension(local.manifest.name, { identifier: local.identifier });\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getCompatibleExtension', gallery);\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'getExtensions', [gallery]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = testObject.local[0];\n\n\t\tawait Event.toPromise(Event.filter(testObject.onChange, e => !!e?.gallery));\n\t\tassert.equal(await testObject.canInstall(target), true);\n\t});\n\n\ttest('test onchange event is triggered while installing', async () => {\n\t\tconst gallery = aGalleryExtension('gallery1');\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\n\t\tconst page = await testObject.queryGallery(CancellationToken.None);\n\t\tconst extension = page.firstPage[0];\n\t\tassert.strictEqual(ExtensionState.Uninstalled, extension.state);\n\n\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\t\tconst promise = Event.toPromise(testObject.onChange);\n\n\t\t// Installed\n\t\tdidInstallEvent.fire([{ identifier: gallery.identifier, source: gallery, operation: InstallOperation.Install, local: aLocalExtension(gallery.name, gallery, gallery), profileLocation: null! }]);\n\n\t\tawait promise;\n\t});\n\n\ttest('test onchange event is triggered when installation is finished', async () => {\n\t\tconst gallery = aGalleryExtension('gallery1');\n\t\ttestObject = await aWorkbenchService();\n\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(gallery));\n\t\tconst target = sinon.spy();\n\n\t\treturn testObject.queryGallery(CancellationToken.None).then(page => {\n\t\t\tconst extension = page.firstPage[0];\n\t\t\tassert.strictEqual(ExtensionState.Uninstalled, extension.state);\n\n\t\t\tdisposableStore.add(testObject.onChange(target));\n\n\t\t\t// Installing\n\t\t\tinstallEvent.fire({ identifier: gallery.identifier, source: gallery, profileLocation: null! });\n\n\t\t\tassert.ok(target.calledOnce);\n\t\t});\n\t});\n\n\ttest('test onchange event is triggered while uninstalling', async () => {\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = sinon.spy();\n\n\t\ttestObject.uninstall(testObject.local[0]);\n\t\tdisposableStore.add(testObject.onChange(target));\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tassert.ok(target.calledOnce);\n\t});\n\n\ttest('test onchange event is triggered when uninstalling is finished', async () => {\n\t\tconst local = aLocalExtension('a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\ttestObject = await aWorkbenchService();\n\t\tconst target = sinon.spy();\n\n\t\ttestObject.uninstall(testObject.local[0]);\n\t\tuninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\t\tdisposableStore.add(testObject.onChange(target));\n\t\tdidUninstallEvent.fire({ identifier: local.identifier, profileLocation: null! });\n\n\t\tassert.ok(target.calledOnce);\n\t});\n\n\ttest('test uninstalled extensions are always enabled', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tinstantiationService.stubPromise(IExtensionGalleryService, 'query', aPage(aGalleryExtension('a')));\n\t\t\t\treturn testObject.queryGallery(CancellationToken.None).then(pagedResponse => {\n\t\t\t\t\tconst actual = pagedResponse.firstPage[0];\n\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enablement state installed enabled extension', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\tconst actual = testObject.local[0];\n\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.EnabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test workspace disabled extension', async () => {\n\t\tconst extensionA = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('d')], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledWorkspace))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('e')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\tconst actual = testObject.local[0];\n\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledWorkspace);\n\t\t\t});\n\t});\n\n\ttest('test globally disabled extension', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('d')], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\tconst actual = testObject.local[0];\n\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test enablement state is updated for user extensions', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledWorkspace)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledWorkspace);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension globally when extension is disabled for workspace', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledWorkspace)\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension globally', async () => {\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test system extensions can be disabled', async () => {\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a', {}, { type: ExtensionType.System })]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t.then(() => {\n\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test enablement state is updated on change from outside', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tconst actual = testObject.local[0];\n\t\t\t\t\t\tassert.strictEqual(actual.enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension with dependencies disable only itself', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension pack disables the pack', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionPack: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension pack disable all', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionPack: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension fails if extension is a dependent of other', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\tinstantiationService.stub(INotificationService, {\n\t\t\tprompt(severity, message, choices, options) {\n\t\t\t\toptions!.onCancel!();\n\t\t\t\treturn null!;\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[1], EnablementState.DisabledGlobally).then(() => assert.fail('Should fail'), error => assert.ok(true));\n\t\t\t});\n\t});\n\n\ttest('test disable extension disables all dependents when chosen to disable all', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\tinstantiationService.stub(IDialogService, {\n\t\t\tprompt() {\n\t\t\t\treturn Promise.resolve({ result: true });\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tawait testObject.setEnablement(testObject.local[1], EnablementState.DisabledGlobally);\n\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t});\n\t});\n\n\ttest('test disable extension when extension is part of a pack', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionPack: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[1], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable both dependency and dependent do not promot and do not fail', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement([testObject.local[1], testObject.local[0]], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable both dependency and dependent do not promot and do not fail', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement([testObject.local[1], testObject.local[0]], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension does not fail if its dependency is a dependent of other but chosen to disable only itself', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.b'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension if its dependency is a dependent of other disabled extension', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.b'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test disable extension if its dependencys dependency is itself', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b', { extensionDependencies: ['pub.a'] });\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\tinstantiationService.stub(INotificationService, {\n\t\t\tprompt(severity, message, choices, options) {\n\t\t\t\toptions!.onCancel!();\n\t\t\t\treturn null!;\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.fail('An extension with dependent should not be disabled'), () => null);\n\t\t\t});\n\t});\n\n\ttest('test disable extension if its dependency is dependent and is disabled', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.b'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.strictEqual(testObject.local[0].enablementState, EnablementState.DisabledGlobally));\n\t\t\t});\n\t});\n\n\ttest('test disable extension with cyclic dependencies', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b', { extensionDependencies: ['pub.c'] });\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.a'] });\n\n\t\tinstantiationService.stub(INotificationService, {\n\t\t\tprompt(severity, message, choices, options) {\n\t\t\t\toptions!.onCancel!();\n\t\t\t\treturn null!;\n\t\t\t}\n\t\t});\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.EnabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.EnabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.fail('An extension with dependent should not be disabled'), () => null);\n\t\t\t});\n\t});\n\n\ttest('test enable extension with dependencies enable all', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension with dependencies does not prompt if dependency is enabled already', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.EnabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension with dependency does not prompt if both are enabled', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b');\n\t\tconst extensionC = aLocalExtension('c');\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement([testObject.local[1], testObject.local[0]], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.ok(!target.called);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test enable extension with cyclic dependencies', async () => {\n\t\tconst extensionA = aLocalExtension('a', { extensionDependencies: ['pub.b'] });\n\t\tconst extensionB = aLocalExtension('b', { extensionDependencies: ['pub.c'] });\n\t\tconst extensionC = aLocalExtension('c', { extensionDependencies: ['pub.a'] });\n\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionA], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionB], EnablementState.DisabledGlobally))\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([extensionC], EnablementState.DisabledGlobally))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extensionA, extensionB, extensionC]);\n\n\t\t\t\ttestObject = await aWorkbenchService();\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.EnabledGlobally)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tassert.strictEqual(testObject.local[0].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[1].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t\tassert.strictEqual(testObject.local[2].enablementState, EnablementState.EnabledGlobally);\n\t\t\t\t\t});\n\t\t\t});\n\t});\n\n\ttest('test change event is fired when disablement flags are changed', async () => {\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [aLocalExtension('a')]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\tdisposableStore.add(testObject.onChange(target));\n\n\t\t\t\treturn testObject.setEnablement(testObject.local[0], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.ok(target.calledOnce));\n\t\t\t});\n\t});\n\n\ttest('test change event is fired when disablement flags are changed from outside', async () => {\n\t\tconst localExtension = aLocalExtension('a');\n\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('c')], EnablementState.DisabledGlobally)\n\t\t\t.then(() => instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([aLocalExtension('b')], EnablementState.DisabledWorkspace))\n\t\t\t.then(async () => {\n\t\t\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [localExtension]);\n\t\t\t\ttestObject = await aWorkbenchService();\n\t\t\t\tconst target = sinon.spy();\n\t\t\t\tdisposableStore.add(testObject.onChange(target));\n\n\t\t\t\treturn instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally)\n\t\t\t\t\t.then(() => assert.ok(target.calledOnce));\n\t\t\t});\n\t});\n\n\ttest('test updating an extension does not re-eanbles it when disabled globally', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst local = aLocalExtension('pub.a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledGlobally);\n\t\tdidInstallEvent.fire([{ local, identifier: local.identifier, operation: InstallOperation.Update, profileLocation: null! }]);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst actual = await testObject.queryLocal();\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('test updating an extension does not re-eanbles it when workspace disabled', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst local = aLocalExtension('pub.a');\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([local], EnablementState.DisabledWorkspace);\n\t\tdidInstallEvent.fire([{ local, identifier: local.identifier, operation: InstallOperation.Update, profileLocation: null! }]);\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [local]);\n\t\tconst actual = await testObject.queryLocal();\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledWorkspace);\n\t});\n\n\ttest('test user extension is preferred when the same extension exists as system and user extension', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst userExtension = aLocalExtension('pub.a');\n\t\tconst systemExtension = aLocalExtension('pub.a', {}, { type: ExtensionType.System });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [systemExtension, userExtension]);\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, userExtension);\n\t});\n\n\ttest('test user extension is disabled when the same extension exists as system and user extension and system extension is disabled', async () => {\n\t\ttestObject = await aWorkbenchService();\n\t\tconst systemExtension = aLocalExtension('pub.a', {}, { type: ExtensionType.System });\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([systemExtension], EnablementState.DisabledGlobally);\n\t\tconst userExtension = aLocalExtension('pub.a');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [systemExtension, userExtension]);\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, userExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('Test local ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local web extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace,ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace', 'ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,workspace,web extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace', 'web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,web,workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'web', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local web,ui,workspace extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web', 'ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local web,workspace,ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web', 'workspace', 'ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace,web,ui extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace', 'web', 'ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local workspace,ui,web extension is chosen if it exists only in local server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace', 'ui', 'web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local UI extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test local ui,workspace extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in remote server', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService(), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in both servers and local is disabled', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([remoteExtension], EnablementState.DisabledGlobally);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('Test remote workspace extension is chosen if it exists in both servers and remote is disabled in workspace', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([remoteExtension], EnablementState.DisabledWorkspace);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledWorkspace);\n\t});\n\n\ttest('Test local ui, workspace extension is chosen if it exists in both servers and local is disabled', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledGlobally);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledGlobally);\n\t});\n\n\ttest('Test local ui, workspace extension is chosen if it exists in both servers and local is disabled in workspace', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['ui', 'workspace'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\tawait instantiationService.get(IWorkbenchExtensionEnablementService).setEnablement([localExtension], EnablementState.DisabledWorkspace);\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t\tassert.strictEqual(actual[0].enablementState, EnablementState.DisabledWorkspace);\n\t});\n\n\ttest('Test local web extension is chosen if it exists in both servers', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web'];\n\t\tconst localExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`) });\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([localExtension]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, localExtension);\n\t});\n\n\ttest('Test remote web extension is chosen if it exists only in remote', async () => {\n\t\t// multi server setup\n\t\tconst extensionKind: ExtensionKind[] = ['web'];\n\t\tconst remoteExtension = aLocalExtension('a', { extensionKind }, { location: URI.file(`pub.a`).with({ scheme: Schemas.vscodeRemote }) });\n\n\t\tconst extensionManagementServerService = aMultiExtensionManagementServerService(instantiationService, createExtensionManagementService([]), createExtensionManagementService([remoteExtension]));\n\t\tinstantiationService.stub(IExtensionManagementServerService, extensionManagementServerService);\n\t\tinstantiationService.stub(IWorkbenchExtensionEnablementService, disposableStore.add(new TestExtensionEnablementService(instantiationService)));\n\t\ttestObject = await aWorkbenchService();\n\n\t\tconst actual = await testObject.queryLocal();\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(actual[0].local, remoteExtension);\n\t});\n\n\ttest('Test disable autoupdate for extension when auto update is enabled for all', async () => {\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), ['pub.a']);\n\t});\n\n\ttest('Test disable autoupdate for extension when auto update is enabled for enabled extensions', async () => {\n\t\tstubConfiguration('onlyEnabledExtensions');\n\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), ['pub.a']);\n\t});\n\n\ttest('Test enable autoupdate for extension when auto update is enabled for all', async () => {\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, undefined);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test enable autoupdate for pinned extension when auto update is enabled', async () => {\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, true);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, false);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, undefined);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test updateAutoUpdateEnablementFor throws error when auto update is disabled', async () => {\n\t\tstubConfiguration(false);\n\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\ttry {\n\t\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\t\t\tassert.fail('error expected');\n\t\t} catch (error) {\n\t\t\t// expected\n\t\t}\n\t});\n\n\ttest('Test updateAutoUpdateEnablementFor throws error for publisher when auto update is enabled', async () => {\n\t\tconst extension1 = aLocalExtension('a');\n\t\tconst extension2 = aLocalExtension('b');\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\ttestObject = await aWorkbenchService();\n\n\t\ttry {\n\t\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0].publisher, true);\n\t\t\tassert.fail('error expected');\n\t\t} catch (error) {\n\t\t\t// expected\n\t\t}\n\t});\n\n\ttest('Test enable autoupdate for extension when auto update is disabled', async () => {\n\t\tstubConfiguration(false);\n\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b', undefined, { pinned: true });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, true);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, true);\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.strictEqual(testObject.local[0].local?.pinned, true);\n\t\tassert.strictEqual(testObject.local[1].local?.pinned, true);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), ['pub.a']);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test reset autoupdate extensions state when auto update is disabled', async () => {\n\t\tinstantiationService.stub(IDialogService, {\n\t\t\tconfirm: () => Promise.resolve({ confirmed: true })\n\t\t});\n\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b', undefined, { pinned: true });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], false);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), ['pub.a']);\n\n\t\tawait testObject.updateAutoUpdateForAllExtensions(false);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\ttest('Test reset autoupdate extensions state when auto update is enabled', async () => {\n\t\tstubConfiguration(false);\n\t\tinstantiationService.stub(IDialogService, {\n\t\t\tconfirm: () => Promise.resolve({ confirmed: true })\n\t\t});\n\n\t\tconst extension1 = aLocalExtension('a', undefined, { pinned: true });\n\t\tconst extension2 = aLocalExtension('b', undefined, { pinned: true });\n\t\tinstantiationService.stubPromise(IExtensionManagementService, 'getInstalled', [extension1, extension2]);\n\t\tinstantiationService.stub(IExtensionManagementService, 'updateMetadata', (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>) => {\n\t\t\tlocal.pinned = !!metadata.pinned;\n\t\t\treturn local;\n\t\t});\n\t\ttestObject = await aWorkbenchService();\n\n\t\tawait testObject.updateAutoUpdateEnablementFor(testObject.local[0], true);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), ['pub.a']);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\n\t\tawait testObject.updateAutoUpdateForAllExtensions(true);\n\n\t\tassert.deepStrictEqual(testObject.getEnabledAutoUpdateExtensions(), []);\n\t\tassert.deepStrictEqual(testObject.getDisabledAutoUpdateExtensions(), []);\n\t});\n\n\tasync function aWorkbenchService(): Promise<ExtensionsWorkbenchService> {\n\t\tconst workbenchService: ExtensionsWorkbenchService = disposableStore.add(instantiationService.createInstance(ExtensionsWorkbenchService));\n\t\tawait workbenchService.queryLocal();\n\t\treturn workbenchService;\n\t}\n\n\tfunction stubConfiguration(autoUpdateValue?: any, autoCheckUpdatesValue?: any): void {\n\t\tconst values: any = {\n\t\t\t[AutoUpdateConfigurationKey]: autoUpdateValue ?? true,\n\t\t\t[AutoCheckUpdatesConfigurationKey]: autoCheckUpdatesValue ?? true\n\t\t};\n\t\tconst emitter = disposableStore.add(new Emitter<IConfigurationChangeEvent>());\n\t\tinstantiationService.stub(IConfigurationService, {\n\t\t\tonDidChangeConfiguration: emitter.event,\n\t\t\tgetValue: (key?: any) => {\n\t\t\t\treturn key ? values[key] : undefined;\n\t\t\t},\n\t\t\tupdateValue: async (key: string, value: any) => {\n\t\t\t\tvalues[key] = value;\n\t\t\t\temitter.fire({\n\t\t\t\t\taffectedKeys: new Set([key]),\n\t\t\t\t\tsource: ConfigurationTarget.USER,\n\t\t\t\t\tchange: { keys: [], overrides: [] },\n\t\t\t\t\taffectsConfiguration(configuration, overrides) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\tinspect: (key: string) => {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction aLocalExtension(name: string = 'someext', manifest: any = {}, properties: any = {}): ILocalExtension {\n\t\tmanifest = { name, publisher: 'pub', version: '1.0.0', ...manifest };\n\t\tproperties = {\n\t\t\ttype: ExtensionType.User,\n\t\t\tlocation: URI.file(`pub.${name}`),\n\t\t\tidentifier: { id: getGalleryExtensionId(manifest.publisher, manifest.name) },\n\t\t\t...properties,\n\t\t\tisValid: properties.isValid ?? true,\n\t\t};\n\t\treturn <ILocalExtension>Object.create({ manifest, ...properties });\n\t}\n\n\tconst noAssets: IGalleryExtensionAssets = {\n\t\tchangelog: null,\n\t\tdownload: null!,\n\t\ticon: null!,\n\t\tlicense: null,\n\t\tmanifest: null,\n\t\treadme: null,\n\t\trepository: null,\n\t\tsignature: null,\n\t\tcoreTranslations: []\n\t};\n\n\tfunction aGalleryExtension(name: string, properties: any = {}, galleryExtensionProperties: any = {}, assets: IGalleryExtensionAssets = noAssets): IGalleryExtension {\n\t\tconst targetPlatform = getTargetPlatform(platform, arch);\n\t\tconst galleryExtension = <IGalleryExtension>Object.create({ name, publisher: 'pub', version: '1.0.0', allTargetPlatforms: [targetPlatform], properties: {}, assets: {}, isSigned: true, ...properties });\n\t\tgalleryExtension.properties = { ...galleryExtension.properties, dependencies: [], targetPlatform, ...galleryExtensionProperties };\n\t\tgalleryExtension.assets = { ...galleryExtension.assets, ...assets };\n\t\tgalleryExtension.identifier = { id: getGalleryExtensionId(galleryExtension.publisher, galleryExtension.name), uuid: generateUuid() };\n\t\treturn <IGalleryExtension>galleryExtension;\n\t}\n\n\tfunction aPage<T>(...objects: T[]): IPager<T> {\n\t\treturn { firstPage: objects, total: objects.length, pageSize: objects.length, getPage: () => null! };\n\t}\n\n\tfunction aMultiExtensionManagementServerService(instantiationService: TestInstantiationService, localExtensionManagementService?: IProfileAwareExtensionManagementService, remoteExtensionManagementService?: IProfileAwareExtensionManagementService): IExtensionManagementServerService {\n\t\tconst localExtensionManagementServer: IExtensionManagementServer = {\n\t\t\tid: 'vscode-local',\n\t\t\tlabel: 'local',\n\t\t\textensionManagementService: localExtensionManagementService || createExtensionManagementService(),\n\t\t};\n\t\tconst remoteExtensionManagementServer: IExtensionManagementServer = {\n\t\t\tid: 'vscode-remote',\n\t\t\tlabel: 'remote',\n\t\t\textensionManagementService: remoteExtensionManagementService || createExtensionManagementService(),\n\t\t};\n\t\treturn anExtensionManagementServerService(localExtensionManagementServer, remoteExtensionManagementServer, null);\n\t}\n\n\tfunction createExtensionManagementService(installed: ILocalExtension[] = []): IProfileAwareExtensionManagementService {\n\t\treturn <IProfileAwareExtensionManagementService>{\n\t\t\tonInstallExtension: Event.None,\n\t\t\tonDidInstallExtensions: Event.None,\n\t\t\tonUninstallExtension: Event.None,\n\t\t\tonDidUninstallExtension: Event.None,\n\t\t\tonDidChangeProfile: Event.None,\n\t\t\tonDidUpdateExtensionMetadata: Event.None,\n\t\t\tonProfileAwareDidInstallExtensions: Event.None,\n\t\t\tgetInstalled: () => Promise.resolve<ILocalExtension[]>(installed),\n\t\t\tinstallFromGallery: (extension: IGalleryExtension) => Promise.reject(new Error('not supported')),\n\t\t\tupdateMetadata: async (local: Mutable<ILocalExtension>, metadata: Partial<Metadata>, profileLocation: URI) => {\n\t\t\t\tlocal.identifier.uuid = metadata.id;\n\t\t\t\tlocal.publisherDisplayName = metadata.publisherDisplayName!;\n\t\t\t\tlocal.publisherId = metadata.publisherId!;\n\t\t\t\treturn local;\n\t\t\t},\n\t\t\tgetTargetPlatform: async () => getTargetPlatform(platform, arch),\n\t\t\tasync getExtensionsControlManifest() { return <IExtensionsControlManifest>{ malicious: [], deprecated: {}, search: [], publisherMapping: {} }; },\n\t\t\tasync resetPinnedStateForAllUserExtensions(pinned: boolean) { }\n\t\t};\n\t}\n});\n"]}