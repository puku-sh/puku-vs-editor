{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/notebookVariablesDataSource.test.ts","vs/workbench/contrib/notebook/test/browser/notebookVariablesDataSource.test.ts"],"names":[],"mappings":"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","file":"notebookVariablesDataSource.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { AsyncIterableProducer } from '../../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { INotebookVariableElement, NotebookVariableDataSource } from '../../browser/contrib/notebookVariables/notebookVariablesDataSource.js';\nimport { NotebookTextModel } from '../../common/model/notebookTextModel.js';\nimport { INotebookKernel, INotebookKernelService, VariablesResult } from '../../common/notebookKernelService.js';\n\n\nsuite('NotebookVariableDataSource', () => {\n\tlet dataSource: NotebookVariableDataSource;\n\tconst notebookModel = { uri: 'one.ipynb', languages: ['python'] } as unknown as NotebookTextModel;\n\tlet provideVariablesCalled: boolean;\n\n\ttype VariablesResultWithAction = VariablesResult & { action?: () => void };\n\tlet results: VariablesResultWithAction[];\n\n\tconst kernel = new class extends mock<INotebookKernel>() {\n\t\toverride hasVariableProvider = true;\n\t\toverride provideVariables(\n\t\t\tnotebookUri: URI,\n\t\t\tparentId: number | undefined,\n\t\t\tkind: 'named' | 'indexed',\n\t\t\tstart: number,\n\t\t\ttoken: CancellationToken\n\t\t): AsyncIterableProducer<VariablesResult> {\n\t\t\tprovideVariablesCalled = true;\n\t\t\treturn new AsyncIterableProducer<VariablesResult>((emitter) => {\n\t\t\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (results[i].action) {\n\t\t\t\t\t\tresults[i].action!();\n\t\t\t\t\t}\n\t\t\t\t\temitter.emitOne(results[i]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst kernelService = new class extends mock<INotebookKernelService>() {\n\t\toverride getMatchingKernel(notebook: NotebookTextModel) {\n\t\t\treturn { selected: kernel, all: [], suggestions: [], hidden: [] };\n\t\t}\n\t};\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tprovideVariablesCalled = false;\n\t\tdataSource = new NotebookVariableDataSource(kernelService);\n\t\tresults = [\n\t\t\t{ id: 1, name: 'a', value: '1', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t];\n\t});\n\n\ttest('Root element should return children', async () => {\n\t\tconst variables = await dataSource.getChildren({ kind: 'root', notebook: notebookModel });\n\n\t\tassert.strictEqual(variables.length, 1);\n\t});\n\n\ttest('Get children of list element', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 5 } as INotebookVariableElement;\n\t\tresults = [\n\t\t\t{ id: 2, name: 'first', value: '1', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 3, name: 'second', value: '2', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 4, name: 'third', value: '3', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 5, name: 'fourth', value: '4', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 6, name: 'fifth', value: '5', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t];\n\n\t\tconst variables = await dataSource.getChildren(parent);\n\n\t\tassert.strictEqual(variables.length, 5);\n\t});\n\n\ttest('Get children for large list', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 2000 } as INotebookVariableElement;\n\t\tresults = [];\n\n\t\tconst variables = await dataSource.getChildren(parent);\n\n\t\tassert(variables.length > 1, 'We should have results for groups of children');\n\t\tassert(!provideVariablesCalled, 'provideVariables should not be called');\n\t\tassert.equal(variables[0].extHostId, parent.extHostId, 'ExtHostId should match the parent since we will use it to get the real children');\n\t});\n\n\ttest('Get children for very large list', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 1_000_000 } as INotebookVariableElement;\n\t\tresults = [];\n\n\t\tconst groups = await dataSource.getChildren(parent);\n\t\tconst children = await dataSource.getChildren(groups[99]);\n\n\t\tassert(children.length === 100, 'We should have a full page of child groups');\n\t\tassert(!provideVariablesCalled, 'provideVariables should not be called');\n\t\tassert.equal(children[0].extHostId, parent.extHostId, 'ExtHostId should match the parent since we will use it to get the real children');\n\t});\n\n\ttest('Cancel while enumerating through children', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 10 } as INotebookVariableElement;\n\t\tresults = [\n\t\t\t{ id: 2, name: 'first', value: '1', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 3, name: 'second', value: '2', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 4, name: 'third', value: '3', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 5, name: 'fourth', value: '4', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 5, name: 'fifth', value: '4', hasNamedChildren: false, indexedChildrenCount: 0, action: () => dataSource.cancel() } as VariablesResult,\n\t\t\t{ id: 7, name: 'sixth', value: '6', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 8, name: 'seventh', value: '7', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 9, name: 'eighth', value: '8', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 10, name: 'ninth', value: '9', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 11, name: 'tenth', value: '10', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t];\n\n\t\tconst variables = await dataSource.getChildren(parent);\n\n\t\tassert.equal(variables.length, 5, 'Iterating should have been cancelled');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { AsyncIterableProducer } from '../../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { INotebookVariableElement, NotebookVariableDataSource } from '../../browser/contrib/notebookVariables/notebookVariablesDataSource.js';\nimport { NotebookTextModel } from '../../common/model/notebookTextModel.js';\nimport { INotebookKernel, INotebookKernelService, VariablesResult } from '../../common/notebookKernelService.js';\n\n\nsuite('NotebookVariableDataSource', () => {\n\tlet dataSource: NotebookVariableDataSource;\n\tconst notebookModel = { uri: 'one.ipynb', languages: ['python'] } as unknown as NotebookTextModel;\n\tlet provideVariablesCalled: boolean;\n\n\ttype VariablesResultWithAction = VariablesResult & { action?: () => void };\n\tlet results: VariablesResultWithAction[];\n\n\tconst kernel = new class extends mock<INotebookKernel>() {\n\t\toverride hasVariableProvider = true;\n\t\toverride provideVariables(\n\t\t\tnotebookUri: URI,\n\t\t\tparentId: number | undefined,\n\t\t\tkind: 'named' | 'indexed',\n\t\t\tstart: number,\n\t\t\ttoken: CancellationToken\n\t\t): AsyncIterableProducer<VariablesResult> {\n\t\t\tprovideVariablesCalled = true;\n\t\t\treturn new AsyncIterableProducer<VariablesResult>((emitter) => {\n\t\t\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (results[i].action) {\n\t\t\t\t\t\tresults[i].action!();\n\t\t\t\t\t}\n\t\t\t\t\temitter.emitOne(results[i]);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tconst kernelService = new class extends mock<INotebookKernelService>() {\n\t\toverride getMatchingKernel(notebook: NotebookTextModel) {\n\t\t\treturn { selected: kernel, all: [], suggestions: [], hidden: [] };\n\t\t}\n\t};\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tprovideVariablesCalled = false;\n\t\tdataSource = new NotebookVariableDataSource(kernelService);\n\t\tresults = [\n\t\t\t{ id: 1, name: 'a', value: '1', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t];\n\t});\n\n\ttest('Root element should return children', async () => {\n\t\tconst variables = await dataSource.getChildren({ kind: 'root', notebook: notebookModel });\n\n\t\tassert.strictEqual(variables.length, 1);\n\t});\n\n\ttest('Get children of list element', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 5 } as INotebookVariableElement;\n\t\tresults = [\n\t\t\t{ id: 2, name: 'first', value: '1', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 3, name: 'second', value: '2', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 4, name: 'third', value: '3', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 5, name: 'fourth', value: '4', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 6, name: 'fifth', value: '5', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t];\n\n\t\tconst variables = await dataSource.getChildren(parent);\n\n\t\tassert.strictEqual(variables.length, 5);\n\t});\n\n\ttest('Get children for large list', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 2000 } as INotebookVariableElement;\n\t\tresults = [];\n\n\t\tconst variables = await dataSource.getChildren(parent);\n\n\t\tassert(variables.length > 1, 'We should have results for groups of children');\n\t\tassert(!provideVariablesCalled, 'provideVariables should not be called');\n\t\tassert.equal(variables[0].extHostId, parent.extHostId, 'ExtHostId should match the parent since we will use it to get the real children');\n\t});\n\n\ttest('Get children for very large list', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 1_000_000 } as INotebookVariableElement;\n\t\tresults = [];\n\n\t\tconst groups = await dataSource.getChildren(parent);\n\t\tconst children = await dataSource.getChildren(groups[99]);\n\n\t\tassert(children.length === 100, 'We should have a full page of child groups');\n\t\tassert(!provideVariablesCalled, 'provideVariables should not be called');\n\t\tassert.equal(children[0].extHostId, parent.extHostId, 'ExtHostId should match the parent since we will use it to get the real children');\n\t});\n\n\ttest('Cancel while enumerating through children', async () => {\n\t\tconst parent = { kind: 'variable', notebook: notebookModel, id: '1', extHostId: 1, name: 'list', value: '[...]', hasNamedChildren: false, indexedChildrenCount: 10 } as INotebookVariableElement;\n\t\tresults = [\n\t\t\t{ id: 2, name: 'first', value: '1', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 3, name: 'second', value: '2', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 4, name: 'third', value: '3', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 5, name: 'fourth', value: '4', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 5, name: 'fifth', value: '4', hasNamedChildren: false, indexedChildrenCount: 0, action: () => dataSource.cancel() } as VariablesResult,\n\t\t\t{ id: 7, name: 'sixth', value: '6', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 8, name: 'seventh', value: '7', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 9, name: 'eighth', value: '8', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 10, name: 'ninth', value: '9', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t\t{ id: 11, name: 'tenth', value: '10', hasNamedChildren: false, indexedChildrenCount: 0 },\n\t\t];\n\n\t\tconst variables = await dataSource.getChildren(parent);\n\n\t\tassert.equal(variables.length, 5, 'Iterating should have been cancelled');\n\t});\n});\n"]}