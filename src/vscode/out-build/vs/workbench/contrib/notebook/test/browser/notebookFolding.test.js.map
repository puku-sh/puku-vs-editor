{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/notebookFolding.test.ts","vs/workbench/contrib/notebook/test/browser/notebookFolding.test.ts"],"names":[],"mappings":"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","file":"notebookFolding.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CellKind } from '../../common/notebookCommon.js';\nimport { setupInstantiationService, withTestNotebook } from './testNotebookEditor.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FoldingModel, updateFoldingStateAtIndex } from '../../browser/viewModel/foldingModel.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('Notebook Folding', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\n\tteardown(() => disposables.dispose());\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.spy(IUndoRedoService, 'pushElement');\n\t});\n\n\n\ttest('Folding based on markdown cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding not based on code cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# comment 1', 'python', CellKind.Code, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3\\n```\\n## comment 2\\n```', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 4', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'python', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(8), 1);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Top level header in a cell wins', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1\\n# header3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(0), 2);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(1), 7);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(2), 7);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 4 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Nested Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 5, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 6, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\t// viewModel.insertCell(7, new TestCell(viewModel.viewType, 7, ['var c = 8;'], 'markdown', CellKind.Code, []), true);\n\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t{ start: 1, end: 1 },\n\t\t\t\t// \t{ start: 6, end: 7 }\n\t\t\t\t// ]);\n\n\t\t\t\t// viewModel.insertCell(1, new TestCell(viewModel.viewType, 8, ['var c = 9;'], 'markdown', CellKind.Code, []), true);\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t// the first collapsed range is now expanded as we insert content into it.\n\t\t\t\t// \t// { start: 1,},\n\t\t\t\t// \t{ start: 7, end: 8 }\n\t\t\t\t// ]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding Memento', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 7, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 8, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('View Index', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(1), 2);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(2), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(3), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(7), 8);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\n\t\t\t\t// folding ranges\n\t\t\t\t// [5, 6]\n\t\t\t\t// [10, 11]\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 5);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(9), 10);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(10), 12);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(11), 12);\n\t\t\t}\n\t\t);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CellKind } from '../../common/notebookCommon.js';\nimport { setupInstantiationService, withTestNotebook } from './testNotebookEditor.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FoldingModel, updateFoldingStateAtIndex } from '../../browser/viewModel/foldingModel.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('Notebook Folding', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\n\tteardown(() => disposables.dispose());\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.spy(IUndoRedoService, 'pushElement');\n\t});\n\n\n\ttest('Folding based on markdown cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding not based on code cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# comment 1', 'python', CellKind.Code, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3\\n```\\n## comment 2\\n```', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 4', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'python', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(8), 1);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Top level header in a cell wins', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1\\n# header3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingController = ds.add(new FoldingModel());\n\t\t\t\tfoldingController.attachViewModel(viewModel);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(1), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(2), 0);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(0), 2);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(3), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(4), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(5), 1);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(1), 7);\n\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(6), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.findRange(7), 2);\n\t\t\t\tassert.strictEqual(foldingController.regions.getEndLineNumber(2), 7);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 4 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Nested Folding', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 5, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, false);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 1, end: 1 },\n\t\t\t\t\t{ start: 6, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\t// viewModel.insertCell(7, new TestCell(viewModel.viewType, 7, ['var c = 8;'], 'markdown', CellKind.Code, []), true);\n\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t{ start: 1, end: 1 },\n\t\t\t\t// \t{ start: 6, end: 7 }\n\t\t\t\t// ]);\n\n\t\t\t\t// viewModel.insertCell(1, new TestCell(viewModel.viewType, 8, ['var c = 9;'], 'markdown', CellKind.Code, []), true);\n\t\t\t\t// assert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t// \t// the first collapsed range is now expanded as we insert content into it.\n\t\t\t\t// \t// { start: 1,},\n\t\t\t\t// \t{ start: 7, end: 8 }\n\t\t\t\t// ]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Folding Memento', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 7, end: 11 },\n\t\t\t\t]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 8, end: 11 }\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('View Index', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([{ start: 2, end: 6 }]);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 3, end: 6 }\n\t\t\t\t]);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(1), 2);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(2), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(3), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(7), 8);\n\t\t\t}\n\t\t);\n\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['# header 2.1\\n', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['body 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header 2.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 7;', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\t(editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tfoldingModel.applyMemento([\n\t\t\t\t\t{ start: 5, end: 6 },\n\t\t\t\t\t{ start: 10, end: 11 },\n\t\t\t\t]);\n\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\n\t\t\t\t// Note that hidden ranges !== folding ranges\n\t\t\t\tassert.deepStrictEqual(viewModel.getHiddenRanges(), [\n\t\t\t\t\t{ start: 6, end: 6 },\n\t\t\t\t\t{ start: 11, end: 11 }\n\t\t\t\t]);\n\n\t\t\t\t// folding ranges\n\t\t\t\t// [5, 6]\n\t\t\t\t// [10, 11]\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(4), 5);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(5), 7);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(6), 7);\n\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(9), 10);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(10), 12);\n\t\t\t\tassert.strictEqual(viewModel.getNextVisibleCellIndex(11), 12);\n\t\t\t}\n\t\t);\n\t});\n});\n"]}