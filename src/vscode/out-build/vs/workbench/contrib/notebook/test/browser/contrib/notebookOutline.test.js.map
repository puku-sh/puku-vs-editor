{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/contrib/notebookOutline.test.ts","vs/workbench/contrib/notebook/test/browser/contrib/notebookOutline.test.ts"],"names":[],"mappings":"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","file":"notebookOutline.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { setupInstantiationService, withTestNotebook } from '../testNotebookEditor.js';\nimport { OutlineTarget } from '../../../../../services/outline/browser/outline.js';\nimport { IFileIconTheme, IThemeService } from '../../../../../../platform/theme/common/themeService.js';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { Event } from '../../../../../../base/common/event.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IMarkerService } from '../../../../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../../../../platform/markers/common/markerService.js';\nimport { CellKind, IOutputDto, NotebookCellMetadata } from '../../../common/notebookCommon.js';\nimport { IActiveNotebookEditor, INotebookEditorPane } from '../../../browser/notebookBrowser.js';\nimport { DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { NotebookCellOutline, NotebookOutlineCreator } from '../../../browser/contrib/outline/notebookOutline.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ILanguageFeaturesService } from '../../../../../../editor/common/services/languageFeatures.js';\nimport { LanguageFeaturesService } from '../../../../../../editor/common/services/languageFeaturesService.js';\nimport { IEditorPaneSelectionChangeEvent } from '../../../../../common/editor.js';\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { INotebookOutlineEntryFactory, NotebookOutlineEntryFactory } from '../../../browser/viewModel/notebookOutlineEntryFactory.js';\n\nsuite('Notebook Outline', function () {\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet symbolsCached: boolean;\n\n\tteardown(() => disposables.dispose());\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tsymbolsCached = false;\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.set(IEditorService, new class extends mock<IEditorService>() { });\n\t\tinstantiationService.set(ILanguageFeaturesService, new LanguageFeaturesService());\n\t\tinstantiationService.set(IMarkerService, disposables.add(new MarkerService()));\n\t\tinstantiationService.set(IThemeService, new class extends mock<IThemeService>() {\n\t\t\toverride onDidFileIconThemeChange = Event.None;\n\t\t\toverride getFileIconTheme(): IFileIconTheme {\n\t\t\t\treturn { hasFileIcons: true, hasFolderIcons: true, hidesExplorerArrows: false };\n\t\t\t}\n\t\t});\n\t});\n\n\n\tasync function withNotebookOutline<R = any>(\n\t\tcells: [source: string, lang: string, kind: CellKind, output?: IOutputDto[], metadata?: NotebookCellMetadata][],\n\t\ttarget: OutlineTarget,\n\t\tcallback: (outline: NotebookCellOutline, editor: IActiveNotebookEditor) => R,\n\t): Promise<R> {\n\n\t\treturn withTestNotebook(cells, async (editor) => {\n\t\t\tif (!editor.hasModel()) {\n\t\t\t\tassert.ok(false, 'MUST have active text editor');\n\t\t\t}\n\t\t\tconst notebookEditorPane = new class extends mock<INotebookEditorPane>() {\n\t\t\t\toverride getControl() {\n\t\t\t\t\treturn editor;\n\t\t\t\t}\n\t\t\t\toverride onDidChangeModel: Event<void> = Event.None;\n\t\t\t\toverride onDidChangeSelection: Event<IEditorPaneSelectionChangeEvent> = Event.None;\n\t\t\t};\n\n\n\t\t\tconst testOutlineEntryFactory = instantiationService.createInstance(NotebookOutlineEntryFactory) as NotebookOutlineEntryFactory;\n\t\t\ttestOutlineEntryFactory.cacheSymbols = async () => { symbolsCached = true; };\n\t\t\tinstantiationService.stub(INotebookOutlineEntryFactory, testOutlineEntryFactory);\n\n\t\t\tconst outline = await instantiationService.createInstance(NotebookOutlineCreator).createOutline(notebookEditorPane, target, CancellationToken.None);\n\n\t\t\tdisposables.add(outline!);\n\t\t\treturn callback(outline as NotebookCellOutline, editor);\n\t\t});\n\n\t}\n\n\ttest('basic', async function () {\n\t\tawait withNotebookOutline([], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements(), []);\n\t\t});\n\t});\n\n\ttest('special characters in heading', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['# Hellö & Hällo', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'Hellö & Hällo');\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['# bo<i>ld</i>', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'bold');\n\t\t});\n\t});\n\n\ttest('Notebook falsely detects \"empty cells\"', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['  的时代   ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '的时代',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '的时代',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['   ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, 'empty cell',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up as an empty cell in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'empty cell',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up as an empty cell in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['+++++[]{}--)(0  ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '+++++[]{}--)(0',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '+++++[]{}--)(0',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['+++++[]{}--)(0 Hello **&^ ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '+++++[]{}--)(0 Hello **&^',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '+++++[]{}--)(0 Hello **&^',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['!@#$\\n Überschrïft', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '!@#$',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '!@#$',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\t});\n\n\ttest('Heading text defines entry label', async function () {\n\t\treturn await withNotebookOutline([\n\t\t\t['foo\\n # h1', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'h1');\n\t\t});\n\t});\n\n\ttest('Notebook outline ignores markdown headings #115200', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['## h2 \\n# h1', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 2);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'h2');\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[1].label, 'h1');\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['## h2', 'md', CellKind.Markup],\n\t\t\t['# h1', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 2);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'h2');\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[1].label, 'h1');\n\t\t});\n\t});\n\n\ttest('Symbols for goto quickpick are pre-cached', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['a = 1\\nb = 2', 'python', CellKind.Code]\n\t\t], OutlineTarget.QuickPick, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.strictEqual(symbolsCached, true);\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { setupInstantiationService, withTestNotebook } from '../testNotebookEditor.js';\nimport { OutlineTarget } from '../../../../../services/outline/browser/outline.js';\nimport { IFileIconTheme, IThemeService } from '../../../../../../platform/theme/common/themeService.js';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { Event } from '../../../../../../base/common/event.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IMarkerService } from '../../../../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../../../../platform/markers/common/markerService.js';\nimport { CellKind, IOutputDto, NotebookCellMetadata } from '../../../common/notebookCommon.js';\nimport { IActiveNotebookEditor, INotebookEditorPane } from '../../../browser/notebookBrowser.js';\nimport { DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { NotebookCellOutline, NotebookOutlineCreator } from '../../../browser/contrib/outline/notebookOutline.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ILanguageFeaturesService } from '../../../../../../editor/common/services/languageFeatures.js';\nimport { LanguageFeaturesService } from '../../../../../../editor/common/services/languageFeaturesService.js';\nimport { IEditorPaneSelectionChangeEvent } from '../../../../../common/editor.js';\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { INotebookOutlineEntryFactory, NotebookOutlineEntryFactory } from '../../../browser/viewModel/notebookOutlineEntryFactory.js';\n\nsuite('Notebook Outline', function () {\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet symbolsCached: boolean;\n\n\tteardown(() => disposables.dispose());\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tsymbolsCached = false;\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.set(IEditorService, new class extends mock<IEditorService>() { });\n\t\tinstantiationService.set(ILanguageFeaturesService, new LanguageFeaturesService());\n\t\tinstantiationService.set(IMarkerService, disposables.add(new MarkerService()));\n\t\tinstantiationService.set(IThemeService, new class extends mock<IThemeService>() {\n\t\t\toverride onDidFileIconThemeChange = Event.None;\n\t\t\toverride getFileIconTheme(): IFileIconTheme {\n\t\t\t\treturn { hasFileIcons: true, hasFolderIcons: true, hidesExplorerArrows: false };\n\t\t\t}\n\t\t});\n\t});\n\n\n\tasync function withNotebookOutline<R = any>(\n\t\tcells: [source: string, lang: string, kind: CellKind, output?: IOutputDto[], metadata?: NotebookCellMetadata][],\n\t\ttarget: OutlineTarget,\n\t\tcallback: (outline: NotebookCellOutline, editor: IActiveNotebookEditor) => R,\n\t): Promise<R> {\n\n\t\treturn withTestNotebook(cells, async (editor) => {\n\t\t\tif (!editor.hasModel()) {\n\t\t\t\tassert.ok(false, 'MUST have active text editor');\n\t\t\t}\n\t\t\tconst notebookEditorPane = new class extends mock<INotebookEditorPane>() {\n\t\t\t\toverride getControl() {\n\t\t\t\t\treturn editor;\n\t\t\t\t}\n\t\t\t\toverride onDidChangeModel: Event<void> = Event.None;\n\t\t\t\toverride onDidChangeSelection: Event<IEditorPaneSelectionChangeEvent> = Event.None;\n\t\t\t};\n\n\n\t\t\tconst testOutlineEntryFactory = instantiationService.createInstance(NotebookOutlineEntryFactory) as NotebookOutlineEntryFactory;\n\t\t\ttestOutlineEntryFactory.cacheSymbols = async () => { symbolsCached = true; };\n\t\t\tinstantiationService.stub(INotebookOutlineEntryFactory, testOutlineEntryFactory);\n\n\t\t\tconst outline = await instantiationService.createInstance(NotebookOutlineCreator).createOutline(notebookEditorPane, target, CancellationToken.None);\n\n\t\t\tdisposables.add(outline!);\n\t\t\treturn callback(outline as NotebookCellOutline, editor);\n\t\t});\n\n\t}\n\n\ttest('basic', async function () {\n\t\tawait withNotebookOutline([], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements(), []);\n\t\t});\n\t});\n\n\ttest('special characters in heading', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['# Hellö & Hällo', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'Hellö & Hällo');\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['# bo<i>ld</i>', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'bold');\n\t\t});\n\t});\n\n\ttest('Notebook falsely detects \"empty cells\"', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['  的时代   ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '的时代',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '的时代',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['   ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, 'empty cell',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up as an empty cell in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'empty cell',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up as an empty cell in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['+++++[]{}--)(0  ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '+++++[]{}--)(0',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '+++++[]{}--)(0',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['+++++[]{}--)(0 Hello **&^ ', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '+++++[]{}--)(0 Hello **&^',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '+++++[]{}--)(0 Hello **&^',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['!@#$\\n Überschrïft', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, (outline, notebookEditor) => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.entries[0].label, '!@#$',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in outline label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, '!@#$',\n\t\t\t\t`cell content: ${notebookEditor.cellAt(0).model.getValue()} did not show up correctly in quickpick entry label. \\n Cell text buffer line 1: ${outline.entries[0].cell.textBuffer.getLineContent(1)}`\n\t\t\t);\n\t\t});\n\t});\n\n\ttest('Heading text defines entry label', async function () {\n\t\treturn await withNotebookOutline([\n\t\t\t['foo\\n # h1', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 1);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'h1');\n\t\t});\n\t});\n\n\ttest('Notebook outline ignores markdown headings #115200', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['## h2 \\n# h1', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 2);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'h2');\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[1].label, 'h1');\n\t\t});\n\n\t\tawait withNotebookOutline([\n\t\t\t['## h2', 'md', CellKind.Markup],\n\t\t\t['# h1', 'md', CellKind.Markup]\n\t\t], OutlineTarget.OutlinePane, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements().length, 2);\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[0].label, 'h2');\n\t\t\tassert.deepStrictEqual(outline.config.quickPickDataSource.getQuickPickElements()[1].label, 'h1');\n\t\t});\n\t});\n\n\ttest('Symbols for goto quickpick are pre-cached', async function () {\n\t\tawait withNotebookOutline([\n\t\t\t['a = 1\\nb = 2', 'python', CellKind.Code]\n\t\t], OutlineTarget.QuickPick, outline => {\n\t\t\tassert.ok(outline instanceof NotebookCellOutline);\n\t\t\tassert.strictEqual(symbolsCached, true);\n\t\t});\n\t});\n});\n"]}