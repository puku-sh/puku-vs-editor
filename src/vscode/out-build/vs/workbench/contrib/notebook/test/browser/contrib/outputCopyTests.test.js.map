{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/contrib/outputCopyTests.test.ts","vs/workbench/contrib/notebook/test/browser/contrib/outputCopyTests.test.ts"],"names":[],"mappings":"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","file":"outputCopyTests.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ICellOutputViewModel, ICellViewModel } from '../../../browser/notebookBrowser.js';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { ILogService } from '../../../../../../platform/log/common/log.js';\nimport assert from 'assert';\nimport { VSBuffer } from '../../../../../../base/common/buffer.js';\nimport { IOutputItemDto } from '../../../common/notebookCommon.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { copyCellOutput } from '../../../browser/viewModel/cellOutputTextHelper.js';\n\nsuite('Cell Output Clipboard Tests', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tclass ClipboardService {\n\t\tprivate _clipboardContent = '';\n\t\tpublic get clipboardContent() {\n\t\t\treturn this._clipboardContent;\n\t\t}\n\t\tpublic async writeText(value: string) {\n\t\t\tthis._clipboardContent = value;\n\t\t}\n\t}\n\n\tconst logService = new class extends mock<ILogService>() { };\n\n\tfunction createOutputViewModel(outputs: IOutputItemDto[], cellViewModel?: ICellViewModel) {\n\t\tconst outputViewModel = { model: { outputs: outputs } } as ICellOutputViewModel;\n\n\t\tif (cellViewModel) {\n\t\t\tcellViewModel.outputsViewModels.push(outputViewModel);\n\t\t\tcellViewModel.model.outputs.push(outputViewModel.model);\n\t\t} else {\n\t\t\tcellViewModel = {\n\t\t\t\toutputsViewModels: [outputViewModel],\n\t\t\t\tmodel: { outputs: [outputViewModel.model] }\n\t\t\t} as ICellViewModel;\n\t\t}\n\n\t\toutputViewModel.cellViewModel = cellViewModel;\n\n\t\treturn outputViewModel;\n\t}\n\n\ttest('Copy text/plain output', async () => {\n\t\tconst mimeType = 'text/plain';\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDto = { data: VSBuffer.fromString('output content'), mime: 'text/plain' };\n\t\tconst output = createOutputViewModel([outputDto]);\n\n\t\tawait copyCellOutput(mimeType, output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'output content');\n\t});\n\n\ttest('Nothing copied for invalid mimetype', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDtos = [\n\t\t\t{ data: VSBuffer.fromString('output content'), mime: 'bad' },\n\t\t\t{ data: VSBuffer.fromString('output 2'), mime: 'unknown' }];\n\t\tconst output = createOutputViewModel(outputDtos);\n\n\t\tawait copyCellOutput('bad', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, '');\n\t});\n\n\ttest('Text copied if available instead of invalid mime type', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDtos = [\n\t\t\t{ data: VSBuffer.fromString('output content'), mime: 'bad' },\n\t\t\t{ data: VSBuffer.fromString('text content'), mime: 'text/plain' }];\n\t\tconst output = createOutputViewModel(outputDtos);\n\n\t\tawait copyCellOutput('bad', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'text content');\n\t});\n\n\ttest('Selected mimetype is preferred', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDtos = [\n\t\t\t{ data: VSBuffer.fromString('plain text'), mime: 'text/plain' },\n\t\t\t{ data: VSBuffer.fromString('html content'), mime: 'text/html' }];\n\t\tconst output = createOutputViewModel(outputDtos);\n\n\t\tawait copyCellOutput('text/html', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'html content');\n\t});\n\n\ttest('copy subsequent output', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst output = createOutputViewModel([{ data: VSBuffer.fromString('first'), mime: 'text/plain' }]);\n\t\tconst output2 = createOutputViewModel([{ data: VSBuffer.fromString('second'), mime: 'text/plain' }], output.cellViewModel as ICellViewModel);\n\t\tconst output3 = createOutputViewModel([{ data: VSBuffer.fromString('third'), mime: 'text/plain' }], output.cellViewModel as ICellViewModel);\n\n\t\tawait copyCellOutput('text/plain', output2, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'second');\n\n\t\tawait copyCellOutput('text/plain', output3, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'third');\n\t});\n\n\ttest('adjacent stream outputs are concanented', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst output = createOutputViewModel([{ data: VSBuffer.fromString('stdout'), mime: 'application/vnd.code.notebook.stdout' }]);\n\t\tcreateOutputViewModel([{ data: VSBuffer.fromString('stderr'), mime: 'application/vnd.code.notebook.stderr' }], output.cellViewModel as ICellViewModel);\n\t\tcreateOutputViewModel([{ data: VSBuffer.fromString('text content'), mime: 'text/plain' }], output.cellViewModel as ICellViewModel);\n\t\tcreateOutputViewModel([{ data: VSBuffer.fromString('non-adjacent'), mime: 'application/vnd.code.notebook.stdout' }], output.cellViewModel as ICellViewModel);\n\n\t\tawait copyCellOutput('application/vnd.code.notebook.stdout', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'stdoutstderr');\n\t});\n\n\ttest('error output uses the value in the stack', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst data = VSBuffer.fromString(`{\"name\":\"Error Name\",\"message\":\"error message\",\"stack\":\"error stack\"}`);\n\t\tconst output = createOutputViewModel([{ data, mime: 'application/vnd.code.notebook.error' }]);\n\n\t\tawait copyCellOutput('application/vnd.code.notebook.error', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'error stack');\n\t});\n\n\ttest('error without stack uses the name and message', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst data = VSBuffer.fromString(`{\"name\":\"Error Name\",\"message\":\"error message\"}`);\n\t\tconst output = createOutputViewModel([{ data, mime: 'application/vnd.code.notebook.error' }]);\n\n\t\tawait copyCellOutput('application/vnd.code.notebook.error', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'Error Name: error message');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ICellOutputViewModel, ICellViewModel } from '../../../browser/notebookBrowser.js';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { ILogService } from '../../../../../../platform/log/common/log.js';\nimport assert from 'assert';\nimport { VSBuffer } from '../../../../../../base/common/buffer.js';\nimport { IOutputItemDto } from '../../../common/notebookCommon.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { copyCellOutput } from '../../../browser/viewModel/cellOutputTextHelper.js';\n\nsuite('Cell Output Clipboard Tests', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tclass ClipboardService {\n\t\tprivate _clipboardContent = '';\n\t\tpublic get clipboardContent() {\n\t\t\treturn this._clipboardContent;\n\t\t}\n\t\tpublic async writeText(value: string) {\n\t\t\tthis._clipboardContent = value;\n\t\t}\n\t}\n\n\tconst logService = new class extends mock<ILogService>() { };\n\n\tfunction createOutputViewModel(outputs: IOutputItemDto[], cellViewModel?: ICellViewModel) {\n\t\tconst outputViewModel = { model: { outputs: outputs } } as ICellOutputViewModel;\n\n\t\tif (cellViewModel) {\n\t\t\tcellViewModel.outputsViewModels.push(outputViewModel);\n\t\t\tcellViewModel.model.outputs.push(outputViewModel.model);\n\t\t} else {\n\t\t\tcellViewModel = {\n\t\t\t\toutputsViewModels: [outputViewModel],\n\t\t\t\tmodel: { outputs: [outputViewModel.model] }\n\t\t\t} as ICellViewModel;\n\t\t}\n\n\t\toutputViewModel.cellViewModel = cellViewModel;\n\n\t\treturn outputViewModel;\n\t}\n\n\ttest('Copy text/plain output', async () => {\n\t\tconst mimeType = 'text/plain';\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDto = { data: VSBuffer.fromString('output content'), mime: 'text/plain' };\n\t\tconst output = createOutputViewModel([outputDto]);\n\n\t\tawait copyCellOutput(mimeType, output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'output content');\n\t});\n\n\ttest('Nothing copied for invalid mimetype', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDtos = [\n\t\t\t{ data: VSBuffer.fromString('output content'), mime: 'bad' },\n\t\t\t{ data: VSBuffer.fromString('output 2'), mime: 'unknown' }];\n\t\tconst output = createOutputViewModel(outputDtos);\n\n\t\tawait copyCellOutput('bad', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, '');\n\t});\n\n\ttest('Text copied if available instead of invalid mime type', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDtos = [\n\t\t\t{ data: VSBuffer.fromString('output content'), mime: 'bad' },\n\t\t\t{ data: VSBuffer.fromString('text content'), mime: 'text/plain' }];\n\t\tconst output = createOutputViewModel(outputDtos);\n\n\t\tawait copyCellOutput('bad', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'text content');\n\t});\n\n\ttest('Selected mimetype is preferred', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst outputDtos = [\n\t\t\t{ data: VSBuffer.fromString('plain text'), mime: 'text/plain' },\n\t\t\t{ data: VSBuffer.fromString('html content'), mime: 'text/html' }];\n\t\tconst output = createOutputViewModel(outputDtos);\n\n\t\tawait copyCellOutput('text/html', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'html content');\n\t});\n\n\ttest('copy subsequent output', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst output = createOutputViewModel([{ data: VSBuffer.fromString('first'), mime: 'text/plain' }]);\n\t\tconst output2 = createOutputViewModel([{ data: VSBuffer.fromString('second'), mime: 'text/plain' }], output.cellViewModel as ICellViewModel);\n\t\tconst output3 = createOutputViewModel([{ data: VSBuffer.fromString('third'), mime: 'text/plain' }], output.cellViewModel as ICellViewModel);\n\n\t\tawait copyCellOutput('text/plain', output2, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'second');\n\n\t\tawait copyCellOutput('text/plain', output3, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'third');\n\t});\n\n\ttest('adjacent stream outputs are concanented', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst output = createOutputViewModel([{ data: VSBuffer.fromString('stdout'), mime: 'application/vnd.code.notebook.stdout' }]);\n\t\tcreateOutputViewModel([{ data: VSBuffer.fromString('stderr'), mime: 'application/vnd.code.notebook.stderr' }], output.cellViewModel as ICellViewModel);\n\t\tcreateOutputViewModel([{ data: VSBuffer.fromString('text content'), mime: 'text/plain' }], output.cellViewModel as ICellViewModel);\n\t\tcreateOutputViewModel([{ data: VSBuffer.fromString('non-adjacent'), mime: 'application/vnd.code.notebook.stdout' }], output.cellViewModel as ICellViewModel);\n\n\t\tawait copyCellOutput('application/vnd.code.notebook.stdout', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'stdoutstderr');\n\t});\n\n\ttest('error output uses the value in the stack', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst data = VSBuffer.fromString(`{\"name\":\"Error Name\",\"message\":\"error message\",\"stack\":\"error stack\"}`);\n\t\tconst output = createOutputViewModel([{ data, mime: 'application/vnd.code.notebook.error' }]);\n\n\t\tawait copyCellOutput('application/vnd.code.notebook.error', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'error stack');\n\t});\n\n\ttest('error without stack uses the name and message', async () => {\n\t\tconst clipboard = new ClipboardService();\n\n\t\tconst data = VSBuffer.fromString(`{\"name\":\"Error Name\",\"message\":\"error message\"}`);\n\t\tconst output = createOutputViewModel([{ data, mime: 'application/vnd.code.notebook.error' }]);\n\n\t\tawait copyCellOutput('application/vnd.code.notebook.error', output, clipboard as unknown as IClipboardService, logService);\n\n\t\tassert.strictEqual(clipboard.clipboardContent, 'Error Name: error message');\n\t});\n});\n"]}