{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/notebookStickyScroll.test.ts","vs/workbench/contrib/notebook/test/browser/notebookStickyScroll.test.ts"],"names":[],"mappings":"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","file":"notebookStickyScroll.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { assertSnapshot } from '../../../../../base/test/common/snapshot.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ILanguageFeaturesService } from '../../../../../editor/common/services/languageFeatures.js';\nimport { LanguageFeaturesService } from '../../../../../editor/common/services/languageFeaturesService.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IEditorPaneSelectionChangeEvent } from '../../../../common/editor.js';\nimport { NotebookCellOutline } from '../../browser/contrib/outline/notebookOutline.js';\nimport { INotebookEditor, INotebookEditorPane } from '../../browser/notebookBrowser.js';\nimport { INotebookCellList } from '../../browser/view/notebookRenderingCommon.js';\nimport { OutlineEntry } from '../../browser/viewModel/OutlineEntry.js';\nimport { NotebookStickyLine, computeContent } from '../../browser/viewParts/notebookEditorStickyScroll.js';\nimport { CellKind } from '../../common/notebookCommon.js';\nimport { createNotebookCellList, setupInstantiationService, withTestNotebook } from './testNotebookEditor.js';\nimport { OutlineTarget } from '../../../../services/outline/browser/outline.js';\n\nsuite('NotebookEditorStickyScroll', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\n\tconst domNode: HTMLElement = document.createElement('div');\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.set(ILanguageFeaturesService, new LanguageFeaturesService());\n\t});\n\n\tfunction getOutline(editor: any) {\n\t\tif (!editor.hasModel()) {\n\t\t\tassert.ok(false, 'MUST have active text editor');\n\t\t}\n\t\tconst outline = store.add(instantiationService.createInstance(NotebookCellOutline, new class extends mock<INotebookEditorPane>() {\n\t\t\toverride getControl() {\n\t\t\t\treturn editor;\n\t\t\t}\n\t\t\toverride onDidChangeModel: Event<void> = Event.None;\n\t\t\toverride onDidChangeSelection: Event<IEditorPaneSelectionChangeEvent> = Event.None;\n\t\t}, OutlineTarget.QuickPick));\n\t\treturn outline;\n\t}\n\n\tfunction nbStickyTestHelper(domNode: HTMLElement, notebookEditor: INotebookEditor, notebookCellList: INotebookCellList, notebookOutlineEntries: OutlineEntry[], disposables: Pick<DisposableStore, 'add'>) {\n\t\tconst output = computeContent(notebookEditor, notebookCellList, notebookOutlineEntries, 0);\n\t\tfor (const stickyLine of output.values()) {\n\t\t\tdisposables.add(stickyLine.line);\n\t\t}\n\t\treturn createStickyTestElement(output.values());\n\t}\n\n\tfunction createStickyTestElement(stickyLines: IterableIterator<{ line: NotebookStickyLine; rendered: boolean }>) {\n\t\tconst outputElements = [];\n\t\tfor (const stickyLine of stickyLines) {\n\t\t\tif (stickyLine.rendered) {\n\t\t\t\toutputElements.unshift(stickyLine.line.element.innerText);\n\t\t\t}\n\t\t}\n\t\treturn outputElements;\n\t}\n\n\ttest('test0: should render empty, \tscrollTop at 0', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = disposables.add(createNotebookCellList(instantiationService, disposables));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(0);\n\t\t\t\teditor.visibleRanges = [{ start: 0, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, disposables);\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test1: should render 0->1, \tvisible range 3->8', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 300\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 350\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(175);\n\t\t\t\teditor.visibleRanges = [{ start: 3, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test2: should render 0, \t\tvisible range 6->9 so collapsing next 2 against following section', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 300\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 350\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 400\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 9 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 9 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 9 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(325); // room for a single header\n\t\t\t\teditor.visibleRanges = [{ start: 6, end: 9 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test3: should render 0->2, \tcollapsing against equivalent level header', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['### header aab', 'markdown', CellKind.Markup, [], {}],// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 300\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 350\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 400\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 450\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(175); // room for a single header\n\t\t\t\teditor.visibleRanges = [{ start: 3, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\t// outdated/improper behavior\n\ttest('test4: should render 0, \t\tscrolltop halfway through cell 0', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(50);\n\t\t\t\teditor.visibleRanges = [{ start: 0, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test5: should render 0->2, \tscrolltop halfway through cell 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['#### header aaaa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(125);\n\t\t\t\teditor.visibleRanges = [{ start: 2, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test6: should render 6->7, \tscrolltop halfway through cell 7', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header bb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['### header bbb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(375);\n\t\t\t\teditor.visibleRanges = [{ start: 7, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test7: should render 0->1, \tcollapsing against next section', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}], \t\t//0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}], \t\t//50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}], \t//100\n\t\t\t\t['#### header aaaa', 'markdown', CellKind.Markup, [], {}], \t//150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//300\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//350\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}], \t\t//400\n\t\t\t\t['## header bb', 'markdown', CellKind.Markup, [], {}], \t\t//450\n\t\t\t\t['### header bbb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 12 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 12 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 12 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(350);\n\t\t\t\teditor.visibleRanges = [{ start: 7, end: 12 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { assertSnapshot } from '../../../../../base/test/common/snapshot.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ILanguageFeaturesService } from '../../../../../editor/common/services/languageFeatures.js';\nimport { LanguageFeaturesService } from '../../../../../editor/common/services/languageFeaturesService.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IEditorPaneSelectionChangeEvent } from '../../../../common/editor.js';\nimport { NotebookCellOutline } from '../../browser/contrib/outline/notebookOutline.js';\nimport { INotebookEditor, INotebookEditorPane } from '../../browser/notebookBrowser.js';\nimport { INotebookCellList } from '../../browser/view/notebookRenderingCommon.js';\nimport { OutlineEntry } from '../../browser/viewModel/OutlineEntry.js';\nimport { NotebookStickyLine, computeContent } from '../../browser/viewParts/notebookEditorStickyScroll.js';\nimport { CellKind } from '../../common/notebookCommon.js';\nimport { createNotebookCellList, setupInstantiationService, withTestNotebook } from './testNotebookEditor.js';\nimport { OutlineTarget } from '../../../../services/outline/browser/outline.js';\n\nsuite('NotebookEditorStickyScroll', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\n\tconst domNode: HTMLElement = document.createElement('div');\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = setupInstantiationService(disposables);\n\t\tinstantiationService.set(ILanguageFeaturesService, new LanguageFeaturesService());\n\t});\n\n\tfunction getOutline(editor: any) {\n\t\tif (!editor.hasModel()) {\n\t\t\tassert.ok(false, 'MUST have active text editor');\n\t\t}\n\t\tconst outline = store.add(instantiationService.createInstance(NotebookCellOutline, new class extends mock<INotebookEditorPane>() {\n\t\t\toverride getControl() {\n\t\t\t\treturn editor;\n\t\t\t}\n\t\t\toverride onDidChangeModel: Event<void> = Event.None;\n\t\t\toverride onDidChangeSelection: Event<IEditorPaneSelectionChangeEvent> = Event.None;\n\t\t}, OutlineTarget.QuickPick));\n\t\treturn outline;\n\t}\n\n\tfunction nbStickyTestHelper(domNode: HTMLElement, notebookEditor: INotebookEditor, notebookCellList: INotebookCellList, notebookOutlineEntries: OutlineEntry[], disposables: Pick<DisposableStore, 'add'>) {\n\t\tconst output = computeContent(notebookEditor, notebookCellList, notebookOutlineEntries, 0);\n\t\tfor (const stickyLine of output.values()) {\n\t\t\tdisposables.add(stickyLine.line);\n\t\t}\n\t\treturn createStickyTestElement(output.values());\n\t}\n\n\tfunction createStickyTestElement(stickyLines: IterableIterator<{ line: NotebookStickyLine; rendered: boolean }>) {\n\t\tconst outputElements = [];\n\t\tfor (const stickyLine of stickyLines) {\n\t\t\tif (stickyLine.rendered) {\n\t\t\t\toutputElements.unshift(stickyLine.line.element.innerText);\n\t\t\t}\n\t\t}\n\t\treturn outputElements;\n\t}\n\n\ttest('test0: should render empty, \tscrollTop at 0', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = disposables.add(createNotebookCellList(instantiationService, disposables));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(0);\n\t\t\t\teditor.visibleRanges = [{ start: 0, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, disposables);\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test1: should render 0->1, \tvisible range 3->8', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 300\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 350\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(175);\n\t\t\t\teditor.visibleRanges = [{ start: 3, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test2: should render 0, \t\tvisible range 6->9 so collapsing next 2 against following section', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 300\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 350\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 400\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 9 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 9 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 9 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(325); // room for a single header\n\t\t\t\teditor.visibleRanges = [{ start: 6, end: 9 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test3: should render 0->2, \tcollapsing against equivalent level header', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\t// 0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\t// 50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],// 100\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 150\n\t\t\t\t['### header aab', 'markdown', CellKind.Markup, [], {}],// 200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 300\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\t// 350\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\t// 400\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\t\t// 450\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(175); // room for a single header\n\t\t\t\teditor.visibleRanges = [{ start: 3, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\t// outdated/improper behavior\n\ttest('test4: should render 0, \t\tscrolltop halfway through cell 0', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 8 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 8 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 8 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(50);\n\t\t\t\teditor.visibleRanges = [{ start: 0, end: 8 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test5: should render 0->2, \tscrolltop halfway through cell 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['#### header aaaa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(125);\n\t\t\t\teditor.visibleRanges = [{ start: 2, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test6: should render 6->7, \tscrolltop halfway through cell 7', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['## header bb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['### header bbb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 10 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 10 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 10 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(375);\n\t\t\t\teditor.visibleRanges = [{ start: 7, end: 10 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n\n\ttest('test7: should render 0->1, \tcollapsing against next section', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}], \t\t//0\n\t\t\t\t['## header aa', 'markdown', CellKind.Markup, [], {}], \t\t//50\n\t\t\t\t['### header aaa', 'markdown', CellKind.Markup, [], {}], \t//100\n\t\t\t\t['#### header aaaa', 'markdown', CellKind.Markup, [], {}], \t//150\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//200\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//250\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//300\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}], \t\t//350\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}], \t\t//400\n\t\t\t\t['## header bb', 'markdown', CellKind.Markup, [], {}], \t\t//450\n\t\t\t\t['### header bbb', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var c = 2;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tviewModel.restoreEditorViewState({\n\t\t\t\t\teditingCells: Array.from({ length: 12 }, () => false),\n\t\t\t\t\teditorViewStates: Array.from({ length: 12 }, () => null),\n\t\t\t\t\tcellTotalHeights: Array.from({ length: 12 }, () => 50),\n\t\t\t\t\tcellLineNumberStates: {},\n\t\t\t\t\tcollapsedInputCells: {},\n\t\t\t\t\tcollapsedOutputCells: {},\n\t\t\t\t});\n\n\t\t\t\tconst cellList = ds.add(createNotebookCellList(instantiationService, ds));\n\t\t\t\tcellList.attachViewModel(viewModel);\n\t\t\t\tcellList.layout(400, 100);\n\n\t\t\t\teditor.setScrollTop(350);\n\t\t\t\teditor.visibleRanges = [{ start: 7, end: 12 }];\n\n\t\t\t\tconst outline = getOutline(editor);\n\t\t\t\tconst notebookOutlineEntries = outline.entries;\n\t\t\t\tconst resultingMap = nbStickyTestHelper(domNode, editor, cellList, notebookOutlineEntries, ds);\n\n\t\t\t\tawait assertSnapshot(resultingMap);\n\t\t\t\toutline.dispose();\n\t\t\t});\n\t});\n});\n"]}