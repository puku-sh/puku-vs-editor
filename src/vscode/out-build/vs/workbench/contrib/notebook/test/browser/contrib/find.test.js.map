{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/contrib/find.test.ts","vs/workbench/contrib/notebook/test/browser/contrib/find.test.ts"],"names":[],"mappings":"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","file":"find.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { FindMatch, ITextBuffer, ValidAnnotatedEditOperation } from '../../../../../../editor/common/model.js';\nimport { USUAL_WORD_SEPARATORS } from '../../../../../../editor/common/core/wordHelper.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { FindReplaceState } from '../../../../../../editor/contrib/find/browser/findState.js';\nimport { IConfigurationService, IConfigurationValue } from '../../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { NotebookFindFilters } from '../../../browser/contrib/find/findFilters.js';\nimport { CellFindMatchModel, FindModel } from '../../../browser/contrib/find/findModel.js';\nimport { IActiveNotebookEditor, ICellModelDecorations, ICellModelDeltaDecorations } from '../../../browser/notebookBrowser.js';\nimport { NotebookViewModel } from '../../../browser/viewModel/notebookViewModelImpl.js';\nimport { CellEditType, CellKind } from '../../../common/notebookCommon.js';\nimport { TestCell, withTestNotebook } from '../testNotebookEditor.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\n\nsuite('Notebook Find', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst configurationValue: IConfigurationValue<any> = {\n\t\tvalue: USUAL_WORD_SEPARATORS\n\t};\n\tconst configurationService = new class extends TestConfigurationService {\n\t\toverride inspect() {\n\t\t\treturn configurationValue;\n\t\t}\n\t}();\n\n\tconst setupEditorForTest = (editor: IActiveNotebookEditor, viewModel: NotebookViewModel) => {\n\t\teditor.changeModelDecorations = (callback) => {\n\t\t\treturn callback({\n\t\t\t\tdeltaDecorations: (oldDecorations: ICellModelDecorations[], newDecorations: ICellModelDeltaDecorations[]) => {\n\t\t\t\t\tconst ret: ICellModelDecorations[] = [];\n\t\t\t\t\tnewDecorations.forEach(dec => {\n\t\t\t\t\t\tconst cell = viewModel.viewCells.find(cell => cell.handle === dec.ownerId);\n\t\t\t\t\t\tconst decorations = cell?.deltaModelDecorations([], dec.decorations) ?? [];\n\n\t\t\t\t\t\tif (decorations.length > 0) {\n\t\t\t\t\t\t\tret.push({ ownerId: dec.ownerId, decorations: decorations });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t};\n\n\ttest('Update find matches basics', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 2);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\n\t\t\t\tassert.strictEqual(editor.textModel.length, 3);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 3, count: 0, cells: [\n\t\t\t\t\t\tdisposables.add(new TestCell(viewModel.viewType, 3, '# next paragraph 1', 'markdown', CellKind.Code, [], accessor.get(ILanguageService))),\n\t\t\t\t\t]\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(editor.textModel.length, 4);\n\t\t\t\tassert.strictEqual(model.findMatches.length, 3);\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t});\n\t});\n\n\ttest('Update find matches basics 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tsetupEditorForTest(editor, viewModel);\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\t// find matches is not necessarily find results\n\t\t\t\tassert.strictEqual(model.findMatches.length, 4);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 2);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 2, count: 1, cells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 3);\n\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 2);\n\t\t\t});\n\t});\n\n\ttest('Update find matches basics 3', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tsetupEditorForTest(editor, viewModel);\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\t// find matches is not necessarily find results\n\t\t\t\tassert.strictEqual(model.findMatches.length, 4);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 4);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 2, count: 1, cells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 3);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 2);\n\t\t\t});\n\t});\n\n\ttest('Update find matches, #112748', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tsetupEditorForTest(editor, viewModel);\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\t// find matches is not necessarily find results\n\t\t\t\tassert.strictEqual(model.findMatches.length, 4);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\t(viewModel.viewCells[1].textBuffer as ITextBuffer).applyEdits([\n\t\t\t\t\tnew ValidAnnotatedEditOperation(null, new Range(1, 1, 1, 14), '', false, false, false)\n\t\t\t\t], false, true);\n\t\t\t\t// cell content updates, recompute\n\t\t\t\tmodel.research();\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t});\n\t});\n\n\ttest('Reset when match not found, #127198', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 2);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\n\t\t\t\tassert.strictEqual(editor.textModel.length, 3);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ searchString: '3' }, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.currentMatch, -1);\n\t\t\t\tassert.strictEqual(model.findMatches.length, 0);\n\t\t\t});\n\t});\n\n\ttest('CellFindMatchModel', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['print(1)', 'typescript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor) => {\n\t\t\t\tconst mdCell = editor.cellAt(0);\n\t\t\t\tconst mdModel = new CellFindMatchModel(mdCell, 0, [], []);\n\t\t\t\tassert.strictEqual(mdModel.length, 0);\n\n\t\t\t\tmdModel.contentMatches.push(new FindMatch(new Range(1, 1, 1, 2), []));\n\t\t\t\tassert.strictEqual(mdModel.length, 1);\n\t\t\t\tmdModel.webviewMatches.push({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tsearchPreviewInfo: {\n\t\t\t\t\t\tline: '',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\t\tend: 0,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tsearchPreviewInfo: {\n\t\t\t\t\t\tline: '',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\t\tend: 0,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tassert.strictEqual(mdModel.length, 3);\n\t\t\t\tassert.strictEqual(mdModel.getMatch(0), mdModel.contentMatches[0]);\n\t\t\t\tassert.strictEqual(mdModel.getMatch(1), mdModel.webviewMatches[0]);\n\t\t\t\tassert.strictEqual(mdModel.getMatch(2), mdModel.webviewMatches[1]);\n\t\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { FindMatch, ITextBuffer, ValidAnnotatedEditOperation } from '../../../../../../editor/common/model.js';\nimport { USUAL_WORD_SEPARATORS } from '../../../../../../editor/common/core/wordHelper.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { FindReplaceState } from '../../../../../../editor/contrib/find/browser/findState.js';\nimport { IConfigurationService, IConfigurationValue } from '../../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { NotebookFindFilters } from '../../../browser/contrib/find/findFilters.js';\nimport { CellFindMatchModel, FindModel } from '../../../browser/contrib/find/findModel.js';\nimport { IActiveNotebookEditor, ICellModelDecorations, ICellModelDeltaDecorations } from '../../../browser/notebookBrowser.js';\nimport { NotebookViewModel } from '../../../browser/viewModel/notebookViewModelImpl.js';\nimport { CellEditType, CellKind } from '../../../common/notebookCommon.js';\nimport { TestCell, withTestNotebook } from '../testNotebookEditor.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\n\nsuite('Notebook Find', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst configurationValue: IConfigurationValue<any> = {\n\t\tvalue: USUAL_WORD_SEPARATORS\n\t};\n\tconst configurationService = new class extends TestConfigurationService {\n\t\toverride inspect() {\n\t\t\treturn configurationValue;\n\t\t}\n\t}();\n\n\tconst setupEditorForTest = (editor: IActiveNotebookEditor, viewModel: NotebookViewModel) => {\n\t\teditor.changeModelDecorations = (callback) => {\n\t\t\treturn callback({\n\t\t\t\tdeltaDecorations: (oldDecorations: ICellModelDecorations[], newDecorations: ICellModelDeltaDecorations[]) => {\n\t\t\t\t\tconst ret: ICellModelDecorations[] = [];\n\t\t\t\t\tnewDecorations.forEach(dec => {\n\t\t\t\t\t\tconst cell = viewModel.viewCells.find(cell => cell.handle === dec.ownerId);\n\t\t\t\t\t\tconst decorations = cell?.deltaModelDecorations([], dec.decorations) ?? [];\n\n\t\t\t\t\t\tif (decorations.length > 0) {\n\t\t\t\t\t\t\tret.push({ ownerId: dec.ownerId, decorations: decorations });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t};\n\n\ttest('Update find matches basics', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 2);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\n\t\t\t\tassert.strictEqual(editor.textModel.length, 3);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 3, count: 0, cells: [\n\t\t\t\t\t\tdisposables.add(new TestCell(viewModel.viewType, 3, '# next paragraph 1', 'markdown', CellKind.Code, [], accessor.get(ILanguageService))),\n\t\t\t\t\t]\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(editor.textModel.length, 4);\n\t\t\t\tassert.strictEqual(model.findMatches.length, 3);\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t});\n\t});\n\n\ttest('Update find matches basics 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tsetupEditorForTest(editor, viewModel);\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\t// find matches is not necessarily find results\n\t\t\t\tassert.strictEqual(model.findMatches.length, 4);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 2);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 2, count: 1, cells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 3);\n\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 2);\n\t\t\t});\n\t});\n\n\ttest('Update find matches basics 3', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tsetupEditorForTest(editor, viewModel);\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\t// find matches is not necessarily find results\n\t\t\t\tassert.strictEqual(model.findMatches.length, 4);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 4);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\teditor.textModel.applyEdits([{\n\t\t\t\t\teditType: CellEditType.Replace, index: 2, count: 1, cells: []\n\t\t\t\t}], true, undefined, () => undefined, undefined, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 3);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\t\t\t\tmodel.find({ previous: true });\n\t\t\t\tassert.strictEqual(model.currentMatch, 2);\n\t\t\t});\n\t});\n\n\ttest('Update find matches, #112748', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1.3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tsetupEditorForTest(editor, viewModel);\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\t// find matches is not necessarily find results\n\t\t\t\tassert.strictEqual(model.findMatches.length, 4);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 3);\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\t(viewModel.viewCells[1].textBuffer as ITextBuffer).applyEdits([\n\t\t\t\t\tnew ValidAnnotatedEditOperation(null, new Range(1, 1, 1, 14), '', false, false, false)\n\t\t\t\t], false, true);\n\t\t\t\t// cell content updates, recompute\n\t\t\t\tmodel.research();\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t});\n\t});\n\n\ttest('Reset when match not found, #127198', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(IConfigurationService, configurationService);\n\t\t\t\tconst state = disposables.add(new FindReplaceState<NotebookFindFilters>());\n\t\t\t\tconst model = disposables.add(new FindModel(editor, state, accessor.get(IConfigurationService)));\n\t\t\t\tconst found = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ isRevealed: true }, true);\n\t\t\t\tstate.change({ searchString: '1' }, true);\n\t\t\t\tawait found;\n\t\t\t\tassert.strictEqual(model.findMatches.length, 2);\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 0);\n\t\t\t\tmodel.find({ previous: false });\n\t\t\t\tassert.strictEqual(model.currentMatch, 1);\n\n\t\t\t\tassert.strictEqual(editor.textModel.length, 3);\n\n\t\t\t\tconst found2 = new Promise<boolean>(resolve => disposables.add(state.onFindReplaceStateChange(e => {\n\t\t\t\t\tif (e.matchesCount) { resolve(true); }\n\t\t\t\t})));\n\t\t\t\tstate.change({ searchString: '3' }, true);\n\t\t\t\tawait found2;\n\t\t\t\tassert.strictEqual(model.currentMatch, -1);\n\t\t\t\tassert.strictEqual(model.findMatches.length, 0);\n\t\t\t});\n\t});\n\n\ttest('CellFindMatchModel', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['print(1)', 'typescript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor) => {\n\t\t\t\tconst mdCell = editor.cellAt(0);\n\t\t\t\tconst mdModel = new CellFindMatchModel(mdCell, 0, [], []);\n\t\t\t\tassert.strictEqual(mdModel.length, 0);\n\n\t\t\t\tmdModel.contentMatches.push(new FindMatch(new Range(1, 1, 1, 2), []));\n\t\t\t\tassert.strictEqual(mdModel.length, 1);\n\t\t\t\tmdModel.webviewMatches.push({\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tsearchPreviewInfo: {\n\t\t\t\t\t\tline: '',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\t\tend: 0,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tsearchPreviewInfo: {\n\t\t\t\t\t\tline: '',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstart: 0,\n\t\t\t\t\t\t\tend: 0,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tassert.strictEqual(mdModel.length, 3);\n\t\t\t\tassert.strictEqual(mdModel.getMatch(0), mdModel.contentMatches[0]);\n\t\t\t\tassert.strictEqual(mdModel.getMatch(1), mdModel.webviewMatches[0]);\n\t\t\t\tassert.strictEqual(mdModel.getMatch(2), mdModel.webviewMatches[1]);\n\t\t\t});\n\t});\n});\n"]}