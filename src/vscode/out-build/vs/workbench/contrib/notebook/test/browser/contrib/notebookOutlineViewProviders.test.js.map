{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/contrib/notebookOutlineViewProviders.test.ts","vs/workbench/contrib/notebook/test/browser/contrib/notebookOutlineViewProviders.test.ts"],"names":[],"mappings":"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","file":"notebookOutlineViewProviders.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IDataSource } from '../../../../../../base/browser/ui/tree/tree.js';\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { IReference } from '../../../../../../base/common/lifecycle.js';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { IOutlineModelService, OutlineModel } from '../../../../../../editor/contrib/documentSymbols/browser/outlineModel.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestThemeService } from '../../../../../../platform/theme/test/common/testThemeService.js';\nimport { NotebookBreadcrumbsProvider, NotebookCellOutline, NotebookOutlinePaneProvider, NotebookQuickPickProvider } from '../../../browser/contrib/outline/notebookOutline.js';\nimport { ICellViewModel } from '../../../browser/notebookBrowser.js';\nimport { INotebookCellOutlineDataSource } from '../../../browser/viewModel/notebookOutlineDataSource.js';\nimport { NotebookOutlineEntryFactory } from '../../../browser/viewModel/notebookOutlineEntryFactory.js';\nimport { OutlineEntry } from '../../../browser/viewModel/OutlineEntry.js';\nimport { INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { MockDocumentSymbol } from '../testNotebookEditor.js';\nimport { IResolvedTextEditorModel, ITextModelService } from '../../../../../../editor/common/services/resolverService.js';\nimport { URI } from '../../../../../../base/common/uri.js';\n\nsuite('Notebook Outline View Providers', function () {\n\n\t// #region Setup\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst configurationService = new TestConfigurationService();\n\tconst themeService = new TestThemeService();\n\n\tconst symbolsPerTextModel: Record<string, MockDocumentSymbol[]> = {};\n\tfunction setSymbolsForTextModel(symbols: MockDocumentSymbol[], textmodelId = 'textId') {\n\t\tsymbolsPerTextModel[textmodelId] = symbols;\n\t}\n\n\tconst executionService = new class extends mock<INotebookExecutionStateService>() {\n\t\toverride getCellExecution() { return undefined; }\n\t};\n\n\tclass OutlineModelStub {\n\t\tconstructor(private textId: string) { }\n\n\t\tgetTopLevelSymbols() {\n\t\t\treturn symbolsPerTextModel[this.textId];\n\t\t}\n\t}\n\tconst outlineModelService = new class extends mock<IOutlineModelService>() {\n\t\toverride getOrCreate(model: ITextModel, arg1: any) {\n\t\t\tconst outline = new OutlineModelStub(model.id) as unknown as OutlineModel;\n\t\t\treturn Promise.resolve(outline);\n\t\t}\n\t\toverride getDebounceValue(arg0: any) {\n\t\t\treturn 0;\n\t\t}\n\t};\n\tconst textModelService = new class extends mock<ITextModelService>() {\n\t\toverride createModelReference(uri: URI) {\n\t\t\treturn Promise.resolve({\n\t\t\t\tobject: {\n\t\t\t\t\ttextEditorModel: {\n\t\t\t\t\t\tid: uri.toString(),\n\t\t\t\t\t\tgetVersionId() { return 1; }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdispose() { }\n\t\t\t} as IReference<IResolvedTextEditorModel>);\n\t\t}\n\t};\n\n\t// #endregion\n\t// #region Helpers\n\n\tfunction createCodeCellViewModel(version: number = 1, source = '# code', textmodelId = 'textId') {\n\t\treturn {\n\t\t\turi: { toString() { return textmodelId; } },\n\t\t\tid: textmodelId,\n\t\t\ttextBuffer: {\n\t\t\t\tgetLineCount() { return 0; }\n\t\t\t},\n\t\t\tgetText() {\n\t\t\t\treturn source;\n\t\t\t},\n\t\t\tmodel: {\n\t\t\t\ttextModel: {\n\t\t\t\t\tid: textmodelId,\n\t\t\t\t\tgetVersionId() { return version; }\n\t\t\t\t}\n\t\t\t},\n\t\t\tresolveTextModel() {\n\t\t\t\treturn this.model.textModel as unknown;\n\t\t\t},\n\t\t\tcellKind: 2\n\t\t} as ICellViewModel;\n\t}\n\n\tfunction createMockOutlineDataSource(entries: OutlineEntry[], activeElement: OutlineEntry | undefined = undefined) {\n\t\treturn new class extends mock<IReference<INotebookCellOutlineDataSource>>() {\n\t\t\toverride object: INotebookCellOutlineDataSource = {\n\t\t\t\tentries: entries,\n\t\t\t\tactiveElement: activeElement,\n\t\t\t};\n\t\t};\n\t}\n\n\tfunction createMarkupCellViewModel(version: number = 1, source = 'markup', textmodelId = 'textId', alternativeId = 1) {\n\t\treturn {\n\t\t\ttextBuffer: {\n\t\t\t\tgetLineCount() { return 0; }\n\t\t\t},\n\t\t\tgetText() {\n\t\t\t\treturn source;\n\t\t\t},\n\t\t\tgetAlternativeId() {\n\t\t\t\treturn alternativeId;\n\t\t\t},\n\t\t\tmodel: {\n\t\t\t\ttextModel: {\n\t\t\t\t\tid: textmodelId,\n\t\t\t\t\tgetVersionId() { return version; }\n\t\t\t\t}\n\t\t\t},\n\t\t\tresolveTextModel() {\n\t\t\t\treturn this.model.textModel as unknown;\n\t\t\t},\n\t\t\tcellKind: 1\n\t\t} as ICellViewModel;\n\t}\n\n\tfunction flatten(element: OutlineEntry, dataSource: IDataSource<NotebookCellOutline, OutlineEntry>): OutlineEntry[] {\n\t\tconst elements: OutlineEntry[] = [];\n\n\t\tconst children = dataSource.getChildren(element);\n\t\tfor (const child of children) {\n\t\t\telements.push(child);\n\t\t\telements.push(...flatten(child, dataSource));\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\tfunction buildOutlineTree(entries: OutlineEntry[]): OutlineEntry[] | undefined {\n\t\tif (entries.length > 0) {\n\t\t\tconst result: OutlineEntry[] = [entries[0]];\n\t\t\tconst parentStack: OutlineEntry[] = [entries[0]];\n\n\t\t\tfor (let i = 1; i < entries.length; i++) {\n\t\t\t\tconst entry = entries[i];\n\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst len = parentStack.length;\n\t\t\t\t\tif (len === 0) {\n\t\t\t\t\t\t// root node\n\t\t\t\t\t\tresult.push(entry);\n\t\t\t\t\t\tparentStack.push(entry);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst parentCandidate = parentStack[len - 1];\n\t\t\t\t\t\tif (parentCandidate.level < entry.level) {\n\t\t\t\t\t\t\tparentCandidate.addChild(entry);\n\t\t\t\t\t\t\tparentStack.push(entry);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparentStack.pop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Set the configuration settings relevant to various outline views (OutlinePane, QuickPick, Breadcrumbs)\n\t *\n\t * @param outlineShowMarkdownHeadersOnly: boolean \t(notebook.outline.showMarkdownHeadersOnly)\n\t * @param outlineShowCodeCells: boolean \t\t\t(notebook.outline.showCodeCells)\n\t * @param outlineShowCodeCellSymbols: boolean \t\t(notebook.outline.showCodeCellSymbols)\n\t * @param quickPickShowAllSymbols: boolean \t\t\t(notebook.gotoSymbols.showAllSymbols)\n\t * @param breadcrumbsShowCodeCells: boolean \t\t(notebook.breadcrumbs.showCodeCells)\n\t */\n\tasync function setOutlineViewConfiguration(config: {\n\t\toutlineShowMarkdownHeadersOnly: boolean;\n\t\toutlineShowCodeCells: boolean;\n\t\toutlineShowCodeCellSymbols: boolean;\n\t\tquickPickShowAllSymbols: boolean;\n\t\tbreadcrumbsShowCodeCells: boolean;\n\t}) {\n\t\tawait configurationService.setUserConfiguration('notebook.outline.showMarkdownHeadersOnly', config.outlineShowMarkdownHeadersOnly);\n\t\tawait configurationService.setUserConfiguration('notebook.outline.showCodeCells', config.outlineShowCodeCells);\n\t\tawait configurationService.setUserConfiguration('notebook.outline.showCodeCellSymbols', config.outlineShowCodeCellSymbols);\n\t\tawait configurationService.setUserConfiguration('notebook.gotoSymbols.showAllSymbols', config.quickPickShowAllSymbols);\n\t\tawait configurationService.setUserConfiguration('notebook.breadcrumbs.showCodeCells', config.breadcrumbsShowCodeCells);\n\t}\n\n\t// #endregion\n\t// #region OutlinePane\n\n\ttest('OutlinePane 0: Default Settings (Headers Only ON, Code cells OFF, Symbols ON)', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: true,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\t// Validate\n\t\tassert.equal(results.length, 1);\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\t});\n\n\ttest('OutlinePane 1: ALL Markdown', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\tassert.equal(results.length, 2);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\n\t\tassert.equal(results[1].label, 'plaintext');\n\t\tassert.equal(results[1].level, 7);\n\t});\n\n\ttest('OutlinePane 2: Only Headers', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\tassert.equal(results.length, 1);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\t});\n\n\ttest('OutlinePane 3: Only Headers + Code Cells', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: true,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\tassert.equal(results.length, 3);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\n\t\tassert.equal(results[1].label, '# code cell 2');\n\t\tassert.equal(results[1].level, 7);\n\n\t\tassert.equal(results[2].label, '# code cell 3');\n\t\tassert.equal(results[2].level, 7);\n\t});\n\n\ttest('OutlinePane 4: Only Headers + Code Cells + Symbols', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: true,\n\t\t\toutlineShowCodeCellSymbols: true,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\t// validate\n\t\tassert.equal(results.length, 5);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\n\t\tassert.equal(results[1].label, '# code cell 2');\n\t\tassert.equal(results[1].level, 7);\n\n\t\tassert.equal(results[2].label, 'var2');\n\t\tassert.equal(results[2].level, 8);\n\n\t\tassert.equal(results[3].label, '# code cell 3');\n\t\tassert.equal(results[3].level, 7);\n\n\t\tassert.equal(results[4].label, 'var3');\n\t\tassert.equal(results[4].level, 8);\n\t});\n\n\t// #endregion\n\t// #region QuickPick\n\n\ttest('QuickPick 0: Symbols On + 2 cells WITH symbols', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: true,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst quickPickProvider = store.add(new NotebookQuickPickProvider(createMockOutlineDataSource([...outlineModel.children]), configurationService, themeService));\n\t\tconst results = quickPickProvider.getQuickPickElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 4);\n\n\t\tassert.equal(results[0].label, '$(markdown) h1');\n\t\tassert.equal(results[0].element.level, 1);\n\n\t\tassert.equal(results[1].label, '$(markdown) plaintext');\n\t\tassert.equal(results[1].element.level, 7);\n\n\t\tassert.equal(results[2].label, '$(symbol-variable) var2');\n\t\tassert.equal(results[2].element.level, 8);\n\n\t\tassert.equal(results[3].label, '$(symbol-variable) var3');\n\t\tassert.equal(results[3].element.level, 8);\n\t});\n\n\ttest('QuickPick 1: Symbols On + 1 cell WITH symbol + 1 cell WITHOUT symbol', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: true,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst quickPickProvider = store.add(new NotebookQuickPickProvider(createMockOutlineDataSource([...outlineModel.children]), configurationService, themeService));\n\t\tconst results = quickPickProvider.getQuickPickElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 4);\n\n\t\tassert.equal(results[0].label, '$(markdown) h1');\n\t\tassert.equal(results[0].element.level, 1);\n\n\t\tassert.equal(results[1].label, '$(markdown) plaintext');\n\t\tassert.equal(results[1].element.level, 7);\n\n\t\tassert.equal(results[2].label, '$(code) # code cell 2');\n\t\tassert.equal(results[2].element.level, 7);\n\n\t\tassert.equal(results[3].label, '$(symbol-variable) var3');\n\t\tassert.equal(results[3].element.level, 8);\n\t});\n\n\ttest('QuickPick 3: Symbols Off', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst quickPickProvider = store.add(new NotebookQuickPickProvider(createMockOutlineDataSource([...outlineModel.children]), configurationService, themeService));\n\t\tconst results = quickPickProvider.getQuickPickElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 4);\n\n\t\tassert.equal(results[0].label, '$(markdown) h1');\n\t\tassert.equal(results[0].element.level, 1);\n\n\t\tassert.equal(results[1].label, '$(markdown) plaintext');\n\t\tassert.equal(results[1].element.level, 7);\n\n\t\tassert.equal(results[2].label, '$(code) # code cell 2');\n\t\tassert.equal(results[2].element.level, 7);\n\n\t\tassert.equal(results[3].label, '$(code) # code cell 3');\n\t\tassert.equal(results[3].element.level, 7);\n\t});\n\n\t// #endregion\n\t// #region Breadcrumbs\n\n\ttest('Breadcrumbs 0: Code Cells On ', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: true\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createMarkupCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\t\tconst outlineTree = buildOutlineTree([...outlineModel.children]);\n\n\t\t// Generate filtered outline (view model)\n\t\tconst breadcrumbsProvider = store.add(new NotebookBreadcrumbsProvider(createMockOutlineDataSource([], [...outlineTree![0].children][1]), configurationService));\n\t\tconst results = breadcrumbsProvider.getBreadcrumbElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 3);\n\n\t\tassert.equal(results[0].label, 'fakeRoot');\n\t\tassert.equal(results[0].level, -1);\n\n\t\tassert.equal(results[1].label, 'h1');\n\t\tassert.equal(results[1].level, 1);\n\n\t\tassert.equal(results[2].label, '# code cell 2');\n\t\tassert.equal(results[2].level, 7);\n\t});\n\n\ttest('Breadcrumbs 1: Code Cells Off ', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createMarkupCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\t\tconst outlineTree = buildOutlineTree([...outlineModel.children]);\n\n\t\t// Generate filtered outline (view model)\n\t\tconst breadcrumbsProvider = store.add(new NotebookBreadcrumbsProvider(createMockOutlineDataSource([], [...outlineTree![0].children][1]), configurationService));\n\t\tconst results = breadcrumbsProvider.getBreadcrumbElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 2);\n\n\t\tassert.equal(results[0].label, 'fakeRoot');\n\t\tassert.equal(results[0].level, -1);\n\n\t\tassert.equal(results[1].label, 'h1');\n\t\tassert.equal(results[1].level, 1);\n\t});\n\n\t// #endregion\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IDataSource } from '../../../../../../base/browser/ui/tree/tree.js';\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { IReference } from '../../../../../../base/common/lifecycle.js';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { IOutlineModelService, OutlineModel } from '../../../../../../editor/contrib/documentSymbols/browser/outlineModel.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestThemeService } from '../../../../../../platform/theme/test/common/testThemeService.js';\nimport { NotebookBreadcrumbsProvider, NotebookCellOutline, NotebookOutlinePaneProvider, NotebookQuickPickProvider } from '../../../browser/contrib/outline/notebookOutline.js';\nimport { ICellViewModel } from '../../../browser/notebookBrowser.js';\nimport { INotebookCellOutlineDataSource } from '../../../browser/viewModel/notebookOutlineDataSource.js';\nimport { NotebookOutlineEntryFactory } from '../../../browser/viewModel/notebookOutlineEntryFactory.js';\nimport { OutlineEntry } from '../../../browser/viewModel/OutlineEntry.js';\nimport { INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { MockDocumentSymbol } from '../testNotebookEditor.js';\nimport { IResolvedTextEditorModel, ITextModelService } from '../../../../../../editor/common/services/resolverService.js';\nimport { URI } from '../../../../../../base/common/uri.js';\n\nsuite('Notebook Outline View Providers', function () {\n\n\t// #region Setup\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst configurationService = new TestConfigurationService();\n\tconst themeService = new TestThemeService();\n\n\tconst symbolsPerTextModel: Record<string, MockDocumentSymbol[]> = {};\n\tfunction setSymbolsForTextModel(symbols: MockDocumentSymbol[], textmodelId = 'textId') {\n\t\tsymbolsPerTextModel[textmodelId] = symbols;\n\t}\n\n\tconst executionService = new class extends mock<INotebookExecutionStateService>() {\n\t\toverride getCellExecution() { return undefined; }\n\t};\n\n\tclass OutlineModelStub {\n\t\tconstructor(private textId: string) { }\n\n\t\tgetTopLevelSymbols() {\n\t\t\treturn symbolsPerTextModel[this.textId];\n\t\t}\n\t}\n\tconst outlineModelService = new class extends mock<IOutlineModelService>() {\n\t\toverride getOrCreate(model: ITextModel, arg1: any) {\n\t\t\tconst outline = new OutlineModelStub(model.id) as unknown as OutlineModel;\n\t\t\treturn Promise.resolve(outline);\n\t\t}\n\t\toverride getDebounceValue(arg0: any) {\n\t\t\treturn 0;\n\t\t}\n\t};\n\tconst textModelService = new class extends mock<ITextModelService>() {\n\t\toverride createModelReference(uri: URI) {\n\t\t\treturn Promise.resolve({\n\t\t\t\tobject: {\n\t\t\t\t\ttextEditorModel: {\n\t\t\t\t\t\tid: uri.toString(),\n\t\t\t\t\t\tgetVersionId() { return 1; }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdispose() { }\n\t\t\t} as IReference<IResolvedTextEditorModel>);\n\t\t}\n\t};\n\n\t// #endregion\n\t// #region Helpers\n\n\tfunction createCodeCellViewModel(version: number = 1, source = '# code', textmodelId = 'textId') {\n\t\treturn {\n\t\t\turi: { toString() { return textmodelId; } },\n\t\t\tid: textmodelId,\n\t\t\ttextBuffer: {\n\t\t\t\tgetLineCount() { return 0; }\n\t\t\t},\n\t\t\tgetText() {\n\t\t\t\treturn source;\n\t\t\t},\n\t\t\tmodel: {\n\t\t\t\ttextModel: {\n\t\t\t\t\tid: textmodelId,\n\t\t\t\t\tgetVersionId() { return version; }\n\t\t\t\t}\n\t\t\t},\n\t\t\tresolveTextModel() {\n\t\t\t\treturn this.model.textModel as unknown;\n\t\t\t},\n\t\t\tcellKind: 2\n\t\t} as ICellViewModel;\n\t}\n\n\tfunction createMockOutlineDataSource(entries: OutlineEntry[], activeElement: OutlineEntry | undefined = undefined) {\n\t\treturn new class extends mock<IReference<INotebookCellOutlineDataSource>>() {\n\t\t\toverride object: INotebookCellOutlineDataSource = {\n\t\t\t\tentries: entries,\n\t\t\t\tactiveElement: activeElement,\n\t\t\t};\n\t\t};\n\t}\n\n\tfunction createMarkupCellViewModel(version: number = 1, source = 'markup', textmodelId = 'textId', alternativeId = 1) {\n\t\treturn {\n\t\t\ttextBuffer: {\n\t\t\t\tgetLineCount() { return 0; }\n\t\t\t},\n\t\t\tgetText() {\n\t\t\t\treturn source;\n\t\t\t},\n\t\t\tgetAlternativeId() {\n\t\t\t\treturn alternativeId;\n\t\t\t},\n\t\t\tmodel: {\n\t\t\t\ttextModel: {\n\t\t\t\t\tid: textmodelId,\n\t\t\t\t\tgetVersionId() { return version; }\n\t\t\t\t}\n\t\t\t},\n\t\t\tresolveTextModel() {\n\t\t\t\treturn this.model.textModel as unknown;\n\t\t\t},\n\t\t\tcellKind: 1\n\t\t} as ICellViewModel;\n\t}\n\n\tfunction flatten(element: OutlineEntry, dataSource: IDataSource<NotebookCellOutline, OutlineEntry>): OutlineEntry[] {\n\t\tconst elements: OutlineEntry[] = [];\n\n\t\tconst children = dataSource.getChildren(element);\n\t\tfor (const child of children) {\n\t\t\telements.push(child);\n\t\t\telements.push(...flatten(child, dataSource));\n\t\t}\n\n\t\treturn elements;\n\t}\n\n\tfunction buildOutlineTree(entries: OutlineEntry[]): OutlineEntry[] | undefined {\n\t\tif (entries.length > 0) {\n\t\t\tconst result: OutlineEntry[] = [entries[0]];\n\t\t\tconst parentStack: OutlineEntry[] = [entries[0]];\n\n\t\t\tfor (let i = 1; i < entries.length; i++) {\n\t\t\t\tconst entry = entries[i];\n\n\t\t\t\twhile (true) {\n\t\t\t\t\tconst len = parentStack.length;\n\t\t\t\t\tif (len === 0) {\n\t\t\t\t\t\t// root node\n\t\t\t\t\t\tresult.push(entry);\n\t\t\t\t\t\tparentStack.push(entry);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst parentCandidate = parentStack[len - 1];\n\t\t\t\t\t\tif (parentCandidate.level < entry.level) {\n\t\t\t\t\t\t\tparentCandidate.addChild(entry);\n\t\t\t\t\t\t\tparentStack.push(entry);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tparentStack.pop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Set the configuration settings relevant to various outline views (OutlinePane, QuickPick, Breadcrumbs)\n\t *\n\t * @param outlineShowMarkdownHeadersOnly: boolean \t(notebook.outline.showMarkdownHeadersOnly)\n\t * @param outlineShowCodeCells: boolean \t\t\t(notebook.outline.showCodeCells)\n\t * @param outlineShowCodeCellSymbols: boolean \t\t(notebook.outline.showCodeCellSymbols)\n\t * @param quickPickShowAllSymbols: boolean \t\t\t(notebook.gotoSymbols.showAllSymbols)\n\t * @param breadcrumbsShowCodeCells: boolean \t\t(notebook.breadcrumbs.showCodeCells)\n\t */\n\tasync function setOutlineViewConfiguration(config: {\n\t\toutlineShowMarkdownHeadersOnly: boolean;\n\t\toutlineShowCodeCells: boolean;\n\t\toutlineShowCodeCellSymbols: boolean;\n\t\tquickPickShowAllSymbols: boolean;\n\t\tbreadcrumbsShowCodeCells: boolean;\n\t}) {\n\t\tawait configurationService.setUserConfiguration('notebook.outline.showMarkdownHeadersOnly', config.outlineShowMarkdownHeadersOnly);\n\t\tawait configurationService.setUserConfiguration('notebook.outline.showCodeCells', config.outlineShowCodeCells);\n\t\tawait configurationService.setUserConfiguration('notebook.outline.showCodeCellSymbols', config.outlineShowCodeCellSymbols);\n\t\tawait configurationService.setUserConfiguration('notebook.gotoSymbols.showAllSymbols', config.quickPickShowAllSymbols);\n\t\tawait configurationService.setUserConfiguration('notebook.breadcrumbs.showCodeCells', config.breadcrumbsShowCodeCells);\n\t}\n\n\t// #endregion\n\t// #region OutlinePane\n\n\ttest('OutlinePane 0: Default Settings (Headers Only ON, Code cells OFF, Symbols ON)', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: true,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\t// Validate\n\t\tassert.equal(results.length, 1);\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\t});\n\n\ttest('OutlinePane 1: ALL Markdown', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\tassert.equal(results.length, 2);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\n\t\tassert.equal(results[1].label, 'plaintext');\n\t\tassert.equal(results[1].level, 7);\n\t});\n\n\ttest('OutlinePane 2: Only Headers', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\tassert.equal(results.length, 1);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\t});\n\n\ttest('OutlinePane 3: Only Headers + Code Cells', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: true,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\tassert.equal(results.length, 3);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\n\t\tassert.equal(results[1].label, '# code cell 2');\n\t\tassert.equal(results[1].level, 7);\n\n\t\tassert.equal(results[2].label, '# code cell 3');\n\t\tassert.equal(results[2].level, 7);\n\t});\n\n\ttest('OutlinePane 4: Only Headers + Code Cells + Symbols', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: true,\n\t\t\toutlineShowCodeCells: true,\n\t\t\toutlineShowCodeCellSymbols: true,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {} }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {} }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst outlinePaneProvider = store.add(new NotebookOutlinePaneProvider(undefined, configurationService));\n\t\tconst results = flatten(outlineModel, outlinePaneProvider);\n\n\t\t// validate\n\t\tassert.equal(results.length, 5);\n\n\t\tassert.equal(results[0].label, 'h1');\n\t\tassert.equal(results[0].level, 1);\n\n\t\tassert.equal(results[1].label, '# code cell 2');\n\t\tassert.equal(results[1].level, 7);\n\n\t\tassert.equal(results[2].label, 'var2');\n\t\tassert.equal(results[2].level, 8);\n\n\t\tassert.equal(results[3].label, '# code cell 3');\n\t\tassert.equal(results[3].level, 7);\n\n\t\tassert.equal(results[4].label, 'var3');\n\t\tassert.equal(results[4].level, 8);\n\t});\n\n\t// #endregion\n\t// #region QuickPick\n\n\ttest('QuickPick 0: Symbols On + 2 cells WITH symbols', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: true,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst quickPickProvider = store.add(new NotebookQuickPickProvider(createMockOutlineDataSource([...outlineModel.children]), configurationService, themeService));\n\t\tconst results = quickPickProvider.getQuickPickElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 4);\n\n\t\tassert.equal(results[0].label, '$(markdown) h1');\n\t\tassert.equal(results[0].element.level, 1);\n\n\t\tassert.equal(results[1].label, '$(markdown) plaintext');\n\t\tassert.equal(results[1].element.level, 7);\n\n\t\tassert.equal(results[2].label, '$(symbol-variable) var2');\n\t\tassert.equal(results[2].element.level, 8);\n\n\t\tassert.equal(results[3].label, '$(symbol-variable) var3');\n\t\tassert.equal(results[3].element.level, 8);\n\t});\n\n\ttest('QuickPick 1: Symbols On + 1 cell WITH symbol + 1 cell WITHOUT symbol', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: true,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst quickPickProvider = store.add(new NotebookQuickPickProvider(createMockOutlineDataSource([...outlineModel.children]), configurationService, themeService));\n\t\tconst results = quickPickProvider.getQuickPickElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 4);\n\n\t\tassert.equal(results[0].label, '$(markdown) h1');\n\t\tassert.equal(results[0].element.level, 1);\n\n\t\tassert.equal(results[1].label, '$(markdown) plaintext');\n\t\tassert.equal(results[1].element.level, 7);\n\n\t\tassert.equal(results[2].label, '$(code) # code cell 2');\n\t\tassert.equal(results[2].element.level, 7);\n\n\t\tassert.equal(results[3].label, '$(symbol-variable) var3');\n\t\tassert.equal(results[3].element.level, 8);\n\t});\n\n\ttest('QuickPick 3: Symbols Off', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createCodeCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\n\t\t// Generate filtered outline (view model)\n\t\tconst quickPickProvider = store.add(new NotebookQuickPickProvider(createMockOutlineDataSource([...outlineModel.children]), configurationService, themeService));\n\t\tconst results = quickPickProvider.getQuickPickElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 4);\n\n\t\tassert.equal(results[0].label, '$(markdown) h1');\n\t\tassert.equal(results[0].element.level, 1);\n\n\t\tassert.equal(results[1].label, '$(markdown) plaintext');\n\t\tassert.equal(results[1].element.level, 7);\n\n\t\tassert.equal(results[2].label, '$(code) # code cell 2');\n\t\tassert.equal(results[2].element.level, 7);\n\n\t\tassert.equal(results[3].label, '$(code) # code cell 3');\n\t\tassert.equal(results[3].element.level, 7);\n\t});\n\n\t// #endregion\n\t// #region Breadcrumbs\n\n\ttest('Breadcrumbs 0: Code Cells On ', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: true\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createMarkupCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\t\tconst outlineTree = buildOutlineTree([...outlineModel.children]);\n\n\t\t// Generate filtered outline (view model)\n\t\tconst breadcrumbsProvider = store.add(new NotebookBreadcrumbsProvider(createMockOutlineDataSource([], [...outlineTree![0].children][1]), configurationService));\n\t\tconst results = breadcrumbsProvider.getBreadcrumbElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 3);\n\n\t\tassert.equal(results[0].label, 'fakeRoot');\n\t\tassert.equal(results[0].level, -1);\n\n\t\tassert.equal(results[1].label, 'h1');\n\t\tassert.equal(results[1].level, 1);\n\n\t\tassert.equal(results[2].label, '# code cell 2');\n\t\tassert.equal(results[2].level, 7);\n\t});\n\n\ttest('Breadcrumbs 1: Code Cells Off ', async function () {\n\t\tawait setOutlineViewConfiguration({\n\t\t\toutlineShowMarkdownHeadersOnly: false,\n\t\t\toutlineShowCodeCells: false,\n\t\t\toutlineShowCodeCellSymbols: false,\n\t\t\tquickPickShowAllSymbols: false,\n\t\t\tbreadcrumbsShowCodeCells: false\n\t\t});\n\n\t\t// Create models + symbols\n\t\tconst cells = [\n\t\t\tcreateMarkupCellViewModel(1, '# h1', '$0', 0),\n\t\t\tcreateMarkupCellViewModel(1, 'plaintext', '$1', 0),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 2', '$2'),\n\t\t\tcreateCodeCellViewModel(1, '# code cell 3', '$3')\n\t\t];\n\t\tsetSymbolsForTextModel([], '$0');\n\t\tsetSymbolsForTextModel([], '$1');\n\t\tsetSymbolsForTextModel([{ name: 'var2', range: {}, kind: 12 }], '$2');\n\t\tsetSymbolsForTextModel([{ name: 'var3', range: {}, kind: 12 }], '$3');\n\n\t\t// Cache symbols\n\t\tconst entryFactory = new NotebookOutlineEntryFactory(executionService, outlineModelService, textModelService);\n\t\tfor (const cell of cells) {\n\t\t\tawait entryFactory.cacheSymbols(cell, CancellationToken.None);\n\t\t}\n\n\t\t// Generate raw outline\n\t\tconst outlineModel = new OutlineEntry(-1, -1, createMarkupCellViewModel(), 'fakeRoot', false, false, undefined, undefined);\n\t\tfor (const cell of cells) {\n\t\t\tentryFactory.getOutlineEntries(cell, 0).forEach(entry => outlineModel.addChild(entry));\n\t\t}\n\t\tconst outlineTree = buildOutlineTree([...outlineModel.children]);\n\n\t\t// Generate filtered outline (view model)\n\t\tconst breadcrumbsProvider = store.add(new NotebookBreadcrumbsProvider(createMockOutlineDataSource([], [...outlineTree![0].children][1]), configurationService));\n\t\tconst results = breadcrumbsProvider.getBreadcrumbElements();\n\n\t\t// Validate\n\t\tassert.equal(results.length, 2);\n\n\t\tassert.equal(results[0].label, 'fakeRoot');\n\t\tassert.equal(results[0].level, -1);\n\n\t\tassert.equal(results[1].label, 'h1');\n\t\tassert.equal(results[1].level, 1);\n\t});\n\n\t// #endregion\n});\n"]}