{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/cellOperations.test.ts","vs/workbench/contrib/notebook/test/browser/cellOperations.test.ts"],"names":[],"mappings":"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","file":"cellOperations.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { FoldingModel, updateFoldingStateAtIndex } from '../../browser/viewModel/foldingModel.js';\nimport { changeCellToKind, computeCellLinesContents, copyCellRange, insertCell, joinNotebookCells, moveCellRange, runDeleteAction } from '../../browser/controller/cellOperations.js';\nimport { CellEditType, CellKind, SelectionStateType } from '../../common/notebookCommon.js';\nimport { withTestNotebook } from './testNotebookEditor.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { ResourceTextEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { ResourceNotebookCellEdit } from '../../../bulkEdit/browser/bulkCellEdits.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { ITextBuffer, ValidAnnotatedEditOperation } from '../../../../../editor/common/model.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('CellOperations', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Move cells - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tconst cell = viewModel.cellAt(1);\n\t\t\t\tassert.ok(cell);\n\t\t\t\tawait moveCellRange({ notebookEditor: editor, cell: cell }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(cell, viewModel.cellAt(2));\n\t\t\t});\n\t});\n\n\ttest('Move cells - multiple cells in a selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 0, end: 2 }] });\n\t\t\t\tawait moveCellRange({ notebookEditor: editor }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header b');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Move cells - move with folding ranges', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 1, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas([{ start: 1, end: 2 }]);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] });\n\t\t\t\tawait moveCellRange({ notebookEditor: editor }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header b');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\n\ttest('Copy/duplicate cells - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 6);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - target and selection are different, #119769', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)!, ui: true }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 6);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - multiple cells in a selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 0, end: 2 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - move with folding ranges', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 1, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas([{ start: 1, end: 2 }]);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - should not share the same text buffer #102423', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tconst cell1 = viewModel.cellAt(1);\n\t\t\t\tconst cell2 = viewModel.cellAt(2);\n\t\t\t\tassert.ok(cell1);\n\t\t\t\tassert.ok(cell2);\n\t\t\t\tassert.strictEqual(cell1.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\n\t\t\t\t(cell1.textBuffer as ITextBuffer).applyEdits([\n\t\t\t\t\tnew ValidAnnotatedEditOperation(null, new Range(1, 1, 1, 4), '', false, false, false)\n\t\t\t\t], false, true);\n\t\t\t\tassert.notStrictEqual(cell1.getText(), cell2.getText());\n\t\t\t});\n\t});\n\n\ttest('Join cell with below - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 3, end: 4 }, selections: [{ start: 3, end: 4 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 3, end: 4 }, 'below');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(3)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(4)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 4,\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Join cell with above - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 3, end: 4 }, selections: [{ start: 3, end: 4 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 4, end: 5 }, 'above');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(3)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(4)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 4,\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Join cell with below - multiple cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 0, end: 2 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 0, end: 2 }, 'below');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(0)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(1)!.textBuffer.getEOL() + 'var b = 2;' + viewModel.cellAt(2)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Join cell with above - multiple cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 1, end: 3 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 1, end: 3 }, 'above');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(0)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(1)!.textBuffer.getEOL() + 'var b = 2;' + viewModel.cellAt(2)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Delete focus cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t});\n\t});\n\n\ttest('Delete selected cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 2 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 1);\n\t\t\t});\n\t});\n\n\ttest('Delete focus cell out of a selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 2, end: 4 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t});\n\t});\n\n\ttest('Delete UI target', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(2)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), 'var a = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 2;');\n\t\t\t});\n\t});\n\n\ttest('Delete UI target 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }, { start: 3, end: 5 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(1)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }, { start: 2, end: 4 }]);\n\t\t\t});\n\t});\n\n\ttest('Delete UI target 3', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 2, end: 3 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\ttest('Delete UI target 4', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 2, end: 3 });\n\t\t\t\teditor.setSelections([{ start: 3, end: 5 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 2, end: 4 }]);\n\t\t\t});\n\t});\n\n\n\ttest('Delete last cell sets selection correctly', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 2, end: 3 });\n\t\t\t\teditor.setSelections([{ start: 2, end: 3 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(2)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 1, end: 2 });\n\t\t\t});\n\t});\n\n\ttest('#120187. Delete should work on multiple distinct selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }, { start: 3, end: 4 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 0, end: 1 });\n\t\t\t});\n\t});\n\n\ttest('#120187. Delete should work on multiple distinct selection 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 1, end: 2 });\n\t\t\t\teditor.setSelections([{ start: 1, end: 2 }, { start: 3, end: 5 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(1)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 1, end: 2 });\n\t\t\t});\n\t});\n\n\ttest('Change cell kind - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait changeCellToKind(CellKind.Markup, { notebookEditor: editor, cell: viewModel.cellAt(1)!, ui: true });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.cellKind, CellKind.Markup);\n\t\t\t});\n\t});\n\n\ttest('Change cell kind - multi cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait changeCellToKind(CellKind.Markup, { notebookEditor: editor, selectedCells: [viewModel.cellAt(3)!, viewModel.cellAt(4)!], ui: false });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.cellKind, CellKind.Markup);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(4)?.cellKind, CellKind.Markup);\n\t\t\t});\n\t});\n\n\n\ttest('split cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel) => {\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 4 }]), [\n\t\t\t\t\t'var',\n\t\t\t\t\t' b = 1;'\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 4 }, { lineNumber: 1, column: 6 }]), [\n\t\t\t\t\t'var',\n\t\t\t\t\t' b',\n\t\t\t\t\t' = 1;'\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 1 }]), [\n\t\t\t\t\t'',\n\t\t\t\t\t'var b = 1;'\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 11 }]), [\n\t\t\t\t\t'var b = 1;',\n\t\t\t\t\t'',\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Insert cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tconst languageService = accessor.get(ILanguageService);\n\n\t\t\t\tconst insertedCellAbove = insertCell(languageService, editor, 4, CellKind.Code, 'above', 'var a = 0;');\n\t\t\t\tassert.strictEqual(viewModel.length, 6);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(4), insertedCellAbove);\n\n\t\t\t\tconst insertedCellBelow = insertCell(languageService, editor, 1, CellKind.Code, 'below', 'var a = 0;');\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2), insertedCellBelow);\n\t\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { FoldingModel, updateFoldingStateAtIndex } from '../../browser/viewModel/foldingModel.js';\nimport { changeCellToKind, computeCellLinesContents, copyCellRange, insertCell, joinNotebookCells, moveCellRange, runDeleteAction } from '../../browser/controller/cellOperations.js';\nimport { CellEditType, CellKind, SelectionStateType } from '../../common/notebookCommon.js';\nimport { withTestNotebook } from './testNotebookEditor.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { ResourceTextEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { ResourceNotebookCellEdit } from '../../../bulkEdit/browser/bulkCellEdits.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { ITextBuffer, ValidAnnotatedEditOperation } from '../../../../../editor/common/model.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('CellOperations', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Move cells - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tconst cell = viewModel.cellAt(1);\n\t\t\t\tassert.ok(cell);\n\t\t\t\tawait moveCellRange({ notebookEditor: editor, cell: cell }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(cell, viewModel.cellAt(2));\n\t\t\t});\n\t});\n\n\ttest('Move cells - multiple cells in a selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 0, end: 2 }] });\n\t\t\t\tawait moveCellRange({ notebookEditor: editor }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header b');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Move cells - move with folding ranges', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 1, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas([{ start: 1, end: 2 }]);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] });\n\t\t\t\tawait moveCellRange({ notebookEditor: editor }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header b');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\n\ttest('Copy/duplicate cells - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 6);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - target and selection are different, #119769', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)!, ui: true }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 6);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - multiple cells in a selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 0, end: 2 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - move with folding ranges', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, ds) => {\n\t\t\t\tconst foldingModel = ds.add(new FoldingModel());\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 1, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas([{ start: 1, end: 2 }]);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), '# header a');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest('Copy/duplicate cells - should not share the same text buffer #102423', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait copyCellRange({ notebookEditor: editor, cell: viewModel.cellAt(1)! }, 'down');\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tconst cell1 = viewModel.cellAt(1);\n\t\t\t\tconst cell2 = viewModel.cellAt(2);\n\t\t\t\tassert.ok(cell1);\n\t\t\t\tassert.ok(cell2);\n\t\t\t\tassert.strictEqual(cell1.getText(), 'var b = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'var b = 1;');\n\n\t\t\t\t(cell1.textBuffer as ITextBuffer).applyEdits([\n\t\t\t\t\tnew ValidAnnotatedEditOperation(null, new Range(1, 1, 1, 4), '', false, false, false)\n\t\t\t\t], false, true);\n\t\t\t\tassert.notStrictEqual(cell1.getText(), cell2.getText());\n\t\t\t});\n\t});\n\n\ttest('Join cell with below - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 3, end: 4 }, selections: [{ start: 3, end: 4 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 3, end: 4 }, 'below');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(3)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(4)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 4,\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Join cell with above - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 3, end: 4 }, selections: [{ start: 3, end: 4 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 4, end: 5 }, 'above');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(3)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(4)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 4,\n\t\t\t\t\t\tcount: 1,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Join cell with below - multiple cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 0, end: 2 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 0, end: 2 }, 'below');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(0)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(1)!.textBuffer.getEOL() + 'var b = 2;' + viewModel.cellAt(2)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Join cell with above - multiple cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, accessor) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 1, end: 3 }] });\n\t\t\t\tconst ret = await joinNotebookCells(editor, { start: 1, end: 3 }, 'above');\n\t\t\t\tassert.strictEqual(ret?.edits.length, 2);\n\t\t\t\tassert.deepStrictEqual(ret?.edits[0], new ResourceTextEdit(viewModel.cellAt(0)!.uri, {\n\t\t\t\t\trange: new Range(1, 11, 1, 11), text: viewModel.cellAt(1)!.textBuffer.getEOL() + 'var b = 2;' + viewModel.cellAt(2)!.textBuffer.getEOL() + 'var c = 3;'\n\t\t\t\t}));\n\t\t\t\tassert.deepStrictEqual(ret?.edits[1], new ResourceNotebookCellEdit(editor.textModel.uri,\n\t\t\t\t\t{\n\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\tindex: 1,\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tcells: []\n\t\t\t\t\t}\n\t\t\t\t));\n\t\t\t});\n\t});\n\n\ttest('Delete focus cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t});\n\t});\n\n\ttest('Delete selected cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 2 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 1);\n\t\t\t});\n\t});\n\n\ttest('Delete focus cell out of a selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 2, end: 4 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t});\n\t});\n\n\ttest('Delete UI target', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(2)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), 'var a = 1;');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'var b = 2;');\n\t\t\t});\n\t});\n\n\ttest('Delete UI target 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }, { start: 3, end: 5 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(1)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 1 }, { start: 2, end: 4 }]);\n\t\t\t});\n\t});\n\n\ttest('Delete UI target 3', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 2, end: 3 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 2 }]);\n\t\t\t});\n\t});\n\n\ttest('Delete UI target 4', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 2, end: 3 });\n\t\t\t\teditor.setSelections([{ start: 3, end: 5 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 2, end: 4 }]);\n\t\t\t});\n\t});\n\n\n\ttest('Delete last cell sets selection correctly', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 2, end: 3 });\n\t\t\t\teditor.setSelections([{ start: 2, end: 3 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(2)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 1, end: 2 });\n\t\t\t});\n\t});\n\n\ttest('#120187. Delete should work on multiple distinct selection', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 0, end: 1 });\n\t\t\t\teditor.setSelections([{ start: 0, end: 1 }, { start: 3, end: 4 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(0)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 0, end: 1 });\n\t\t\t});\n\t});\n\n\ttest('#120187. Delete should work on multiple distinct selection 2', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var a = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var d = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var e = 5;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\teditor.setFocus({ start: 1, end: 2 });\n\t\t\t\teditor.setSelections([{ start: 1, end: 2 }, { start: 3, end: 5 }]);\n\t\t\t\trunDeleteAction(editor, viewModel.cellAt(1)!);\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: 1, end: 2 });\n\t\t\t});\n\t});\n\n\ttest('Change cell kind - single cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait changeCellToKind(CellKind.Markup, { notebookEditor: editor, cell: viewModel.cellAt(1)!, ui: true });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.cellKind, CellKind.Markup);\n\t\t\t});\n\t});\n\n\ttest('Change cell kind - multi cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel) => {\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 1, end: 2 }, selections: [{ start: 1, end: 2 }] });\n\t\t\t\tawait changeCellToKind(CellKind.Markup, { notebookEditor: editor, selectedCells: [viewModel.cellAt(3)!, viewModel.cellAt(4)!], ui: false });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.cellKind, CellKind.Markup);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(4)?.cellKind, CellKind.Markup);\n\t\t\t});\n\t});\n\n\n\ttest('split cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\t(editor, viewModel) => {\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 4 }]), [\n\t\t\t\t\t'var',\n\t\t\t\t\t' b = 1;'\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 4 }, { lineNumber: 1, column: 6 }]), [\n\t\t\t\t\t'var',\n\t\t\t\t\t' b',\n\t\t\t\t\t' = 1;'\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 1 }]), [\n\t\t\t\t\t'',\n\t\t\t\t\t'var b = 1;'\n\t\t\t\t]);\n\n\t\t\t\tassert.deepStrictEqual(computeCellLinesContents(viewModel.cellAt(0)!, [{ lineNumber: 1, column: 11 }]), [\n\t\t\t\t\t'var b = 1;',\n\t\t\t\t\t'',\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('Insert cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3;', 'javascript', CellKind.Code, [], {}]\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tconst languageService = accessor.get(ILanguageService);\n\n\t\t\t\tconst insertedCellAbove = insertCell(languageService, editor, 4, CellKind.Code, 'above', 'var a = 0;');\n\t\t\t\tassert.strictEqual(viewModel.length, 6);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(4), insertedCellAbove);\n\n\t\t\t\tconst insertedCellBelow = insertCell(languageService, editor, 1, CellKind.Code, 'below', 'var a = 0;');\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2), insertedCellBelow);\n\t\t\t});\n\t});\n});\n"]}