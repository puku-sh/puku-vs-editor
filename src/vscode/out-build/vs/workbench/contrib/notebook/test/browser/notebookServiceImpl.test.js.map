{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/notebookServiceImpl.test.ts","vs/workbench/contrib/notebook/test/browser/notebookServiceImpl.test.ts"],"names":[],"mappings":"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","file":"notebookServiceImpl.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { NotebookProviderInfoStore } from '../../browser/services/notebookServiceImpl.js';\nimport { INotebookEditorModelResolverService } from '../../common/notebookEditorModelResolverService.js';\nimport { NotebookProviderInfo } from '../../common/notebookProvider.js';\nimport { EditorResolverService } from '../../../../services/editor/browser/editorResolverService.js';\nimport { RegisteredEditorPriority } from '../../../../services/editor/common/editorResolverService.js';\nimport { IExtensionService, nullExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('NotebookProviderInfoStore', function () {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite() as Pick<DisposableStore, 'add'>;\n\n\ttest('Can\\'t open untitled notebooks in test #119363', function () {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst store = new NotebookProviderInfoStore(\n\t\t\tnew class extends mock<IStorageService>() {\n\t\t\t\toverride get() { return ''; }\n\t\t\t\toverride store() { }\n\t\t\t\toverride getObject() { return {}; }\n\t\t\t},\n\t\t\tnew class extends mock<IExtensionService>() {\n\t\t\t\toverride onDidRegisterExtensions = Event.None;\n\t\t\t},\n\t\t\tdisposables.add(instantiationService.createInstance(EditorResolverService)),\n\t\t\tnew TestConfigurationService(),\n\t\t\tnew class extends mock<IAccessibilityService>() {\n\t\t\t\toverride onDidChangeScreenReaderOptimized: Event<void> = Event.None;\n\t\t\t},\n\t\t\tinstantiationService,\n\t\t\tnew class extends mock<IFileService>() {\n\t\t\t\toverride hasProvider() { return true; }\n\t\t\t},\n\t\t\tnew class extends mock<INotebookEditorModelResolverService>() { },\n\t\t\tnew class extends mock<IUriIdentityService>() { }\n\t\t);\n\t\tdisposables.add(store);\n\n\t\tconst fooInfo = new NotebookProviderInfo({\n\t\t\textension: nullExtensionDescription.identifier,\n\t\t\tid: 'foo',\n\t\t\tdisplayName: 'foo',\n\t\t\tselectors: [{ filenamePattern: '*.foo' }],\n\t\t\tpriority: RegisteredEditorPriority.default,\n\t\t\tproviderDisplayName: 'foo',\n\t\t});\n\t\tconst barInfo = new NotebookProviderInfo({\n\t\t\textension: nullExtensionDescription.identifier,\n\t\t\tid: 'bar',\n\t\t\tdisplayName: 'bar',\n\t\t\tselectors: [{ filenamePattern: '*.bar' }],\n\t\t\tpriority: RegisteredEditorPriority.default,\n\t\t\tproviderDisplayName: 'bar',\n\t\t});\n\n\t\tstore.add(fooInfo);\n\t\tstore.add(barInfo);\n\n\t\tassert.ok(store.get('foo'));\n\t\tassert.ok(store.get('bar'));\n\t\tassert.ok(!store.get('barfoo'));\n\n\t\tlet providers = store.getContributedNotebook(URI.parse('file:///test/nb.foo'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === fooInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('file:///test/nb.bar'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === barInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('untitled:///Untitled-1'));\n\t\tassert.strictEqual(providers.length, 2);\n\t\tassert.strictEqual(providers[0] === fooInfo, true);\n\t\tassert.strictEqual(providers[1] === barInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('untitled:///test/nb.bar'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === barInfo, true);\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { NotebookProviderInfoStore } from '../../browser/services/notebookServiceImpl.js';\nimport { INotebookEditorModelResolverService } from '../../common/notebookEditorModelResolverService.js';\nimport { NotebookProviderInfo } from '../../common/notebookProvider.js';\nimport { EditorResolverService } from '../../../../services/editor/browser/editorResolverService.js';\nimport { RegisteredEditorPriority } from '../../../../services/editor/common/editorResolverService.js';\nimport { IExtensionService, nullExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('NotebookProviderInfoStore', function () {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite() as Pick<DisposableStore, 'add'>;\n\n\ttest('Can\\'t open untitled notebooks in test #119363', function () {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst store = new NotebookProviderInfoStore(\n\t\t\tnew class extends mock<IStorageService>() {\n\t\t\t\toverride get() { return ''; }\n\t\t\t\toverride store() { }\n\t\t\t\toverride getObject() { return {}; }\n\t\t\t},\n\t\t\tnew class extends mock<IExtensionService>() {\n\t\t\t\toverride onDidRegisterExtensions = Event.None;\n\t\t\t},\n\t\t\tdisposables.add(instantiationService.createInstance(EditorResolverService)),\n\t\t\tnew TestConfigurationService(),\n\t\t\tnew class extends mock<IAccessibilityService>() {\n\t\t\t\toverride onDidChangeScreenReaderOptimized: Event<void> = Event.None;\n\t\t\t},\n\t\t\tinstantiationService,\n\t\t\tnew class extends mock<IFileService>() {\n\t\t\t\toverride hasProvider() { return true; }\n\t\t\t},\n\t\t\tnew class extends mock<INotebookEditorModelResolverService>() { },\n\t\t\tnew class extends mock<IUriIdentityService>() { }\n\t\t);\n\t\tdisposables.add(store);\n\n\t\tconst fooInfo = new NotebookProviderInfo({\n\t\t\textension: nullExtensionDescription.identifier,\n\t\t\tid: 'foo',\n\t\t\tdisplayName: 'foo',\n\t\t\tselectors: [{ filenamePattern: '*.foo' }],\n\t\t\tpriority: RegisteredEditorPriority.default,\n\t\t\tproviderDisplayName: 'foo',\n\t\t});\n\t\tconst barInfo = new NotebookProviderInfo({\n\t\t\textension: nullExtensionDescription.identifier,\n\t\t\tid: 'bar',\n\t\t\tdisplayName: 'bar',\n\t\t\tselectors: [{ filenamePattern: '*.bar' }],\n\t\t\tpriority: RegisteredEditorPriority.default,\n\t\t\tproviderDisplayName: 'bar',\n\t\t});\n\n\t\tstore.add(fooInfo);\n\t\tstore.add(barInfo);\n\n\t\tassert.ok(store.get('foo'));\n\t\tassert.ok(store.get('bar'));\n\t\tassert.ok(!store.get('barfoo'));\n\n\t\tlet providers = store.getContributedNotebook(URI.parse('file:///test/nb.foo'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === fooInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('file:///test/nb.bar'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === barInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('untitled:///Untitled-1'));\n\t\tassert.strictEqual(providers.length, 2);\n\t\tassert.strictEqual(providers[0] === fooInfo, true);\n\t\tassert.strictEqual(providers[1] === barInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('untitled:///test/nb.bar'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === barInfo, true);\n\t});\n\n});\n"]}