{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/test/browser/contrib/notebookClipboard.test.ts","vs/workbench/contrib/notebook/test/browser/contrib/notebookClipboard.test.ts"],"names":[],"mappings":"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","file":"notebookClipboard.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { NotebookClipboardContribution, runCopyCells, runCutCells } from '../../../browser/contrib/clipboard/notebookClipboard.js';\nimport { CellKind, NOTEBOOK_EDITOR_ID, SelectionStateType } from '../../../common/notebookCommon.js';\nimport { withTestNotebook } from '../testNotebookEditor.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IActiveNotebookEditor, INotebookEditor } from '../../../browser/notebookBrowser.js';\nimport { IVisibleEditorPane } from '../../../../../common/editor.js';\nimport { INotebookService } from '../../../common/notebookService.js';\nimport { FoldingModel, updateFoldingStateAtIndex } from '../../../browser/viewModel/foldingModel.js';\nimport { NotebookCellTextModel } from '../../../common/model/notebookCellTextModel.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\n\nsuite('Notebook Clipboard', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst createEditorService = (editor: IActiveNotebookEditor) => {\n\t\tconst visibleEditorPane = new class extends mock<IVisibleEditorPane>() {\n\t\t\toverride getId(): string {\n\t\t\t\treturn NOTEBOOK_EDITOR_ID;\n\t\t\t}\n\t\t\toverride getControl(): INotebookEditor {\n\t\t\t\treturn editor;\n\t\t\t}\n\t\t};\n\n\t\tconst editorService: IEditorService = new class extends mock<IEditorService>() {\n\t\t\toverride get activeEditorPane(): IVisibleEditorPane | undefined {\n\t\t\t\treturn visibleEditorPane;\n\t\t\t}\n\t\t};\n\n\t\treturn editorService;\n\t};\n\n\ttest.skip('Cut multiple selected cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() { override setToCopy() { } });\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 2 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(clipboardContrib.runCutAction(accessor));\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.strictEqual(viewModel.length, 1);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), 'paragraph 2');\n\t\t\t});\n\t});\n\n\ttest.skip('Cut should take folding info into account', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3', 'javascript', CellKind.Markup, [], {}],\n\t\t\t\t['# header d', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] }, 'model');\n\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() { override setToCopy() { } });\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\t\t\t\tclipboardContrib.runCutAction(accessor);\n\t\t\t\tassert.strictEqual(viewModel.length, 5);\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t});\n\t});\n\n\ttest.skip('Copy should take folding info into account', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3', 'javascript', CellKind.Markup, [], {}],\n\t\t\t\t['# header d', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] }, 'model');\n\n\t\t\t\tlet _cells: NotebookCellTextModel[] = [];\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy(cells: NotebookCellTextModel[]) { _cells = cells; }\n\t\t\t\t\toverride getToCopy() { return { items: _cells, isCopy: true }; }\n\t\t\t\t});\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\t\t\t\tclipboardContrib.runCopyAction(accessor);\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 6, end: 7 }, selections: [{ start: 6, end: 7 }] }, 'model');\n\t\t\t\tclipboardContrib.runPasteAction(accessor);\n\n\t\t\t\tassert.strictEqual(viewModel.length, 9);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(8)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest.skip('#119773, cut last item should not focus on the top first cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() { override setToCopy() { } });\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 2, end: 3 }] }, 'model');\n\t\t\t\tassert.ok(clipboardContrib.runCutAction(accessor));\n\t\t\t\t// it should be the last cell, other than the first one.\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t});\n\t});\n\n\ttest.skip('#119771, undo paste should restore selections', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\tviewModel.cellAt(0)!.model\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tisCopy: true\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 2, end: 3 }] }, 'model');\n\t\t\t\tassert.ok(clipboardContrib.runPasteAction(accessor));\n\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 3, end: 4 });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.getText(), '# header 1');\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t});\n\t});\n\n\ttest('copy cell from ui still works if the target cell is not part of a selection', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tlet _toCopy: NotebookCellTextModel[] = [];\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy(toCopy: NotebookCellTextModel[]) { _toCopy = toCopy; }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\titems: _toCopy,\n\t\t\t\t\t\t\tisCopy: true\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(runCopyCells(accessor, editor, viewModel.cellAt(0)));\n\t\t\t\tassert.deepStrictEqual(_toCopy, [viewModel.cellAt(0)!.model, viewModel.cellAt(1)!.model]);\n\n\t\t\t\tassert.ok(runCopyCells(accessor, editor, viewModel.cellAt(2)));\n\t\t\t\tassert.deepStrictEqual(_toCopy.length, 1);\n\t\t\t\tassert.deepStrictEqual(_toCopy, [viewModel.cellAt(2)!.model]);\n\t\t\t});\n\t});\n\n\ttest('cut cell from ui still works if the target cell is not part of a selection', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn { items: [], isCopy: true };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(runCutCells(accessor, editor, viewModel.cellAt(0)));\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 2 }]);\n\t\t\t\tassert.ok(runCutCells(accessor, editor, viewModel.cellAt(2)));\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header 1');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'paragraph 1');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'paragraph 3');\n\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 2, end: 4 }] }, 'model');\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.ok(runCutCells(accessor, editor, viewModel.cellAt(0)));\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\t\t\t});\n\t});\n\n\ttest('cut focus cell still works if the focus is not part of any selection', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn { items: [], isCopy: true };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 2, end: 4 }] }, 'model');\n\t\t\t\tassert.ok(runCutCells(accessor, editor, undefined));\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\t\t\t});\n\t});\n\n\ttest('cut focus cell still works if the focus is not part of any selection 2', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn { items: [], isCopy: true };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 3, end: 4 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(runCutCells(accessor, editor, undefined));\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 2 }]);\n\t\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { mock } from '../../../../../../base/test/common/mock.js';\nimport { NotebookClipboardContribution, runCopyCells, runCutCells } from '../../../browser/contrib/clipboard/notebookClipboard.js';\nimport { CellKind, NOTEBOOK_EDITOR_ID, SelectionStateType } from '../../../common/notebookCommon.js';\nimport { withTestNotebook } from '../testNotebookEditor.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IActiveNotebookEditor, INotebookEditor } from '../../../browser/notebookBrowser.js';\nimport { IVisibleEditorPane } from '../../../../../common/editor.js';\nimport { INotebookService } from '../../../common/notebookService.js';\nimport { FoldingModel, updateFoldingStateAtIndex } from '../../../browser/viewModel/foldingModel.js';\nimport { NotebookCellTextModel } from '../../../common/model/notebookCellTextModel.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\n\nsuite('Notebook Clipboard', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst createEditorService = (editor: IActiveNotebookEditor) => {\n\t\tconst visibleEditorPane = new class extends mock<IVisibleEditorPane>() {\n\t\t\toverride getId(): string {\n\t\t\t\treturn NOTEBOOK_EDITOR_ID;\n\t\t\t}\n\t\t\toverride getControl(): INotebookEditor {\n\t\t\t\treturn editor;\n\t\t\t}\n\t\t};\n\n\t\tconst editorService: IEditorService = new class extends mock<IEditorService>() {\n\t\t\toverride get activeEditorPane(): IVisibleEditorPane | undefined {\n\t\t\t\treturn visibleEditorPane;\n\t\t\t}\n\t\t};\n\n\t\treturn editorService;\n\t};\n\n\ttest.skip('Cut multiple selected cells', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() { override setToCopy() { } });\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 2 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(clipboardContrib.runCutAction(accessor));\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.strictEqual(viewModel.length, 1);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), 'paragraph 2');\n\t\t\t});\n\t});\n\n\ttest.skip('Cut should take folding info into account', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3', 'javascript', CellKind.Markup, [], {}],\n\t\t\t\t['# header d', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] }, 'model');\n\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() { override setToCopy() { } });\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\t\t\t\tclipboardContrib.runCutAction(accessor);\n\t\t\t\tassert.strictEqual(viewModel.length, 5);\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 7);\n\t\t\t});\n\t});\n\n\ttest.skip('Copy should take folding info into account', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header a', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 1;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['# header b', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var b = 2;', 'javascript', CellKind.Code, [], {}],\n\t\t\t\t['var c = 3', 'javascript', CellKind.Markup, [], {}],\n\t\t\t\t['# header d', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['var e = 4;', 'javascript', CellKind.Code, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tconst foldingModel = new FoldingModel();\n\t\t\t\tfoldingModel.attachViewModel(viewModel);\n\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 0, true);\n\t\t\t\tupdateFoldingStateAtIndex(foldingModel, 2, true);\n\t\t\t\tviewModel.updateFoldingRanges(foldingModel.regions);\n\t\t\t\teditor.setHiddenAreas(viewModel.getHiddenRanges());\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 1 }] }, 'model');\n\n\t\t\t\tlet _cells: NotebookCellTextModel[] = [];\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy(cells: NotebookCellTextModel[]) { _cells = cells; }\n\t\t\t\t\toverride getToCopy() { return { items: _cells, isCopy: true }; }\n\t\t\t\t});\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\t\t\t\tclipboardContrib.runCopyAction(accessor);\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 6, end: 7 }, selections: [{ start: 6, end: 7 }] }, 'model');\n\t\t\t\tclipboardContrib.runPasteAction(accessor);\n\n\t\t\t\tassert.strictEqual(viewModel.length, 9);\n\t\t\t\tassert.strictEqual(viewModel.cellAt(8)?.getText(), 'var b = 1;');\n\t\t\t});\n\t});\n\n\ttest.skip('#119773, cut last item should not focus on the top first cell', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() { override setToCopy() { } });\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 2, end: 3 }] }, 'model');\n\t\t\t\tassert.ok(clipboardContrib.runCutAction(accessor));\n\t\t\t\t// it should be the last cell, other than the first one.\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t});\n\t});\n\n\ttest.skip('#119771, undo paste should restore selections', async function () {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\tviewModel.cellAt(0)!.model\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tisCopy: true\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst clipboardContrib = new NotebookClipboardContribution(createEditorService(editor));\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 2, end: 3 }] }, 'model');\n\t\t\t\tassert.ok(clipboardContrib.runPasteAction(accessor));\n\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 3, end: 4 });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(3)?.getText(), '# header 1');\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t});\n\t});\n\n\ttest('copy cell from ui still works if the target cell is not part of a selection', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\tlet _toCopy: NotebookCellTextModel[] = [];\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy(toCopy: NotebookCellTextModel[]) { _toCopy = toCopy; }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\titems: _toCopy,\n\t\t\t\t\t\t\tisCopy: true\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(runCopyCells(accessor, editor, viewModel.cellAt(0)));\n\t\t\t\tassert.deepStrictEqual(_toCopy, [viewModel.cellAt(0)!.model, viewModel.cellAt(1)!.model]);\n\n\t\t\t\tassert.ok(runCopyCells(accessor, editor, viewModel.cellAt(2)));\n\t\t\t\tassert.deepStrictEqual(_toCopy.length, 1);\n\t\t\t\tassert.deepStrictEqual(_toCopy, [viewModel.cellAt(2)!.model]);\n\t\t\t});\n\t});\n\n\ttest('cut cell from ui still works if the target cell is not part of a selection', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn { items: [], isCopy: true };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(runCutCells(accessor, editor, viewModel.cellAt(0)));\n\t\t\t\tassert.strictEqual(viewModel.length, 2);\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 2 }]);\n\t\t\t\tassert.ok(runCutCells(accessor, editor, viewModel.cellAt(2)));\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.strictEqual(viewModel.cellAt(0)?.getText(), '# header 1');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(1)?.getText(), 'paragraph 1');\n\t\t\t\tassert.strictEqual(viewModel.cellAt(2)?.getText(), 'paragraph 3');\n\n\t\t\t\tawait viewModel.undo();\n\t\t\t\tassert.strictEqual(viewModel.length, 4);\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 2, end: 3 }, selections: [{ start: 2, end: 4 }] }, 'model');\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.ok(runCutCells(accessor, editor, viewModel.cellAt(0)));\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 1, end: 2 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\t\t\t});\n\t});\n\n\ttest('cut focus cell still works if the focus is not part of any selection', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn { items: [], isCopy: true };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 0, end: 1 }, selections: [{ start: 2, end: 4 }] }, 'model');\n\t\t\t\tassert.ok(runCutCells(accessor, editor, undefined));\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 0, end: 1 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 1, end: 3 }]);\n\t\t\t});\n\t});\n\n\ttest('cut focus cell still works if the focus is not part of any selection 2', async () => {\n\t\tawait withTestNotebook(\n\t\t\t[\n\t\t\t\t['# header 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 1', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 2', 'markdown', CellKind.Markup, [], {}],\n\t\t\t\t['paragraph 3', 'markdown', CellKind.Markup, [], {}],\n\t\t\t],\n\t\t\tasync (editor, viewModel, _ds, accessor) => {\n\t\t\t\taccessor.stub(INotebookService, new class extends mock<INotebookService>() {\n\t\t\t\t\toverride setToCopy() { }\n\t\t\t\t\toverride getToCopy() {\n\t\t\t\t\t\treturn { items: [], isCopy: true };\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tviewModel.updateSelectionsState({ kind: SelectionStateType.Index, focus: { start: 3, end: 4 }, selections: [{ start: 0, end: 2 }] }, 'model');\n\t\t\t\tassert.ok(runCutCells(accessor, editor, undefined));\n\t\t\t\tassert.strictEqual(viewModel.length, 3);\n\t\t\t\tassert.deepStrictEqual(viewModel.getFocus(), { start: 2, end: 3 });\n\t\t\t\tassert.deepStrictEqual(viewModel.getSelections(), [{ start: 0, end: 2 }]);\n\t\t\t});\n\t});\n});\n"]}