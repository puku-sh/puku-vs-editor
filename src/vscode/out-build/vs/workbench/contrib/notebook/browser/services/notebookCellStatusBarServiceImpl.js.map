{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/services/notebookCellStatusBarServiceImpl.ts","vs/workbench/contrib/notebook/browser/services/notebookCellStatusBarServiceImpl.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,yBAAyB,EAAE,MAAM,sCAAsC,CAAC;AACjF,OAAO,EAAE,OAAO,EAAS,MAAM,qCAAqC,CAAC;AACrE,OAAO,EAAE,UAAU,EAAe,YAAY,EAAE,MAAM,yCAAyC,CAAC;AAKhG,MAAM,OAAO,4BAA6B,SAAQ,UAAU;IAA5D;;QAIkB,0BAAqB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QACpE,yBAAoB,GAAgB,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC;QAE7D,sBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QAChE,qBAAgB,GAAgB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;QAErD,eAAU,GAAyC,EAAE,CAAC;IA6BxE,CAAC;IA3BA,iCAAiC,CAAC,QAA4C;QAC7E,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/B,IAAI,cAAuC,CAAC;QAC5C,IAAI,QAAQ,CAAC,yBAAyB,EAAE,CAAC;YACxC,cAAc,GAAG,QAAQ,CAAC,yBAAyB,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC,CAAC;QAC1F,CAAC;QAED,IAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,CAAC;QAElC,OAAO,YAAY,CAAC,GAAG,EAAE;YACxB,cAAc,EAAE,OAAO,EAAE,CAAC;YAC1B,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC;YAC3D,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,wBAAwB,CAAC,MAAW,EAAE,SAAiB,EAAE,QAAgB,EAAE,KAAwB;QACxG,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,QAAQ,IAAI,CAAC,CAAC,QAAQ,KAAK,GAAG,CAAC,CAAC;QAC7F,OAAO,MAAM,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAC,CAAC,EAAC,EAAE;YAChD,IAAI,CAAC;gBACJ,OAAO,MAAM,CAAC,CAAC,yBAAyB,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;YACrF,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACZ,yBAAyB,CAAC,CAAC,CAAC,CAAC;gBAC7B,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;YACtB,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;CACD","file":"notebookCellStatusBarServiceImpl.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { INotebookCellStatusBarService } from '../../common/notebookCellStatusBarService.js';\nimport { INotebookCellStatusBarItemList, INotebookCellStatusBarItemProvider } from '../../common/notebookCommon.js';\n\nexport class NotebookCellStatusBarService extends Disposable implements INotebookCellStatusBarService {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeProviders = this._register(new Emitter<void>());\n\treadonly onDidChangeProviders: Event<void> = this._onDidChangeProviders.event;\n\n\tprivate readonly _onDidChangeItems = this._register(new Emitter<void>());\n\treadonly onDidChangeItems: Event<void> = this._onDidChangeItems.event;\n\n\tprivate readonly _providers: INotebookCellStatusBarItemProvider[] = [];\n\n\tregisterCellStatusBarItemProvider(provider: INotebookCellStatusBarItemProvider): IDisposable {\n\t\tthis._providers.push(provider);\n\t\tlet changeListener: IDisposable | undefined;\n\t\tif (provider.onDidChangeStatusBarItems) {\n\t\t\tchangeListener = provider.onDidChangeStatusBarItems(() => this._onDidChangeItems.fire());\n\t\t}\n\n\t\tthis._onDidChangeProviders.fire();\n\n\t\treturn toDisposable(() => {\n\t\t\tchangeListener?.dispose();\n\t\t\tconst idx = this._providers.findIndex(p => p === provider);\n\t\t\tthis._providers.splice(idx, 1);\n\t\t});\n\t}\n\n\tasync getStatusBarItemsForCell(docUri: URI, cellIndex: number, viewType: string, token: CancellationToken): Promise<INotebookCellStatusBarItemList[]> {\n\t\tconst providers = this._providers.filter(p => p.viewType === viewType || p.viewType === '*');\n\t\treturn await Promise.all(providers.map(async p => {\n\t\t\ttry {\n\t\t\t\treturn await p.provideCellStatusBarItems(docUri, cellIndex, token) ?? { items: [] };\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedExternalError(e);\n\t\t\t\treturn { items: [] };\n\t\t\t}\n\t\t}));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { INotebookCellStatusBarService } from '../../common/notebookCellStatusBarService.js';\nimport { INotebookCellStatusBarItemList, INotebookCellStatusBarItemProvider } from '../../common/notebookCommon.js';\n\nexport class NotebookCellStatusBarService extends Disposable implements INotebookCellStatusBarService {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeProviders = this._register(new Emitter<void>());\n\treadonly onDidChangeProviders: Event<void> = this._onDidChangeProviders.event;\n\n\tprivate readonly _onDidChangeItems = this._register(new Emitter<void>());\n\treadonly onDidChangeItems: Event<void> = this._onDidChangeItems.event;\n\n\tprivate readonly _providers: INotebookCellStatusBarItemProvider[] = [];\n\n\tregisterCellStatusBarItemProvider(provider: INotebookCellStatusBarItemProvider): IDisposable {\n\t\tthis._providers.push(provider);\n\t\tlet changeListener: IDisposable | undefined;\n\t\tif (provider.onDidChangeStatusBarItems) {\n\t\t\tchangeListener = provider.onDidChangeStatusBarItems(() => this._onDidChangeItems.fire());\n\t\t}\n\n\t\tthis._onDidChangeProviders.fire();\n\n\t\treturn toDisposable(() => {\n\t\t\tchangeListener?.dispose();\n\t\t\tconst idx = this._providers.findIndex(p => p === provider);\n\t\t\tthis._providers.splice(idx, 1);\n\t\t});\n\t}\n\n\tasync getStatusBarItemsForCell(docUri: URI, cellIndex: number, viewType: string, token: CancellationToken): Promise<INotebookCellStatusBarItemList[]> {\n\t\tconst providers = this._providers.filter(p => p.viewType === viewType || p.viewType === '*');\n\t\treturn await Promise.all(providers.map(async p => {\n\t\t\ttry {\n\t\t\t\treturn await p.provideCellStatusBarItems(docUri, cellIndex, token) ?? { items: [] };\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedExternalError(e);\n\t\t\t\treturn { items: [] };\n\t\t\t}\n\t\t}));\n\t}\n}\n"]}