{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/cellDiagnostics/diagnosticCellStatusBarContrib.ts"],"names":[],"mappings":"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","file":"diagnosticCellStatusBarContrib.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { autorun } from '../../../../../../base/common/observable.js';\nimport { localize } from '../../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\nimport { OPEN_CELL_FAILURE_ACTIONS_COMMAND_ID } from './cellDiagnosticsActions.js';\nimport { NotebookStatusBarController } from '../cellStatusBar/executionStatusBarItemController.js';\nimport { INotebookEditor, INotebookEditorContribution, INotebookViewModel } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\nimport { CodeCellViewModel } from '../../viewModel/codeCellViewModel.js';\nimport { INotebookCellStatusBarItem, CellStatusbarAlignment } from '../../../common/notebookCommon.js';\nimport { ICellExecutionError } from '../../../common/notebookExecutionStateService.js';\nimport { IChatAgentService } from '../../../../chat/common/chatAgents.js';\nimport { ChatAgentLocation } from '../../../../chat/common/constants.js';\n\nexport class DiagnosticCellStatusBarContrib extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.statusBar.diagtnostic';\n\n\tconstructor(\n\t\tnotebookEditor: INotebookEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._register(new NotebookStatusBarController(notebookEditor, (vm, cell) =>\n\t\t\tcell instanceof CodeCellViewModel ?\n\t\t\t\tinstantiationService.createInstance(DiagnosticCellStatusBarItem, vm, cell) :\n\t\t\t\tDisposable.None\n\t\t));\n\t}\n}\nregisterNotebookContribution(DiagnosticCellStatusBarContrib.id, DiagnosticCellStatusBarContrib);\n\n\nclass DiagnosticCellStatusBarItem extends Disposable {\n\tprivate _currentItemIds: string[] = [];\n\n\tconstructor(\n\t\tprivate readonly _notebookViewModel: INotebookViewModel,\n\t\tprivate readonly cell: CodeCellViewModel,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IChatAgentService private readonly chatAgentService: IChatAgentService,\n\t) {\n\t\tsuper();\n\t\tthis._register(autorun((reader) => this.updateSparkleItem(reader.readObservable(cell.executionErrorDiagnostic))));\n\t}\n\n\tprivate hasNotebookAgent(): boolean {\n\t\tconst agents = this.chatAgentService.getAgents();\n\t\treturn !!agents.find(agent => agent.locations.includes(ChatAgentLocation.Notebook));\n\t}\n\n\tprivate async updateSparkleItem(error: ICellExecutionError | undefined) {\n\t\tlet item: INotebookCellStatusBarItem | undefined;\n\n\t\tif (error?.location && this.hasNotebookAgent()) {\n\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(OPEN_CELL_FAILURE_ACTIONS_COMMAND_ID)?.getLabel();\n\t\t\tconst tooltip = localize('notebook.cell.status.diagnostic', \"Quick Actions {0}\", `(${keybinding})`);\n\n\t\t\titem = {\n\t\t\t\ttext: `$(sparkle)`,\n\t\t\t\ttooltip,\n\t\t\t\talignment: CellStatusbarAlignment.Left,\n\t\t\t\tcommand: OPEN_CELL_FAILURE_ACTIONS_COMMAND_ID,\n\t\t\t\tpriority: Number.MAX_SAFE_INTEGER - 1\n\t\t\t};\n\t\t}\n\n\t\tconst items = item ? [item] : [];\n\t\tthis._currentItemIds = this._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this.cell.handle, items }]);\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this.cell.handle, items: [] }]);\n\t}\n}\n"]}