{"version":3,"sources":["vs/workbench/contrib/notebook/browser/outputEditor/notebookOutputEditorInput.ts"],"names":[],"mappings":"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","file":"notebookOutputEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../../nls.js';\nimport { IDisposable, IReference } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { EditorInputCapabilities } from '../../../../common/editor.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { IResolvedNotebookEditorModel } from '../../common/notebookCommon.js';\nimport { INotebookEditorModelResolverService } from '../../common/notebookEditorModelResolverService.js';\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { NotebookCellTextModel } from '../../common/model/notebookCellTextModel.js';\n\n\nclass ResolvedNotebookOutputEditorInputModel implements IDisposable {\n\tconstructor(\n\t\treadonly resolvedNotebookEditorModel: IResolvedNotebookEditorModel,\n\t\treadonly notebookUri: URI,\n\t\treadonly cell: NotebookCellTextModel,\n\t\treadonly outputId: string,\n\t) { }\n\n\tdispose(): void {\n\t\tthis.resolvedNotebookEditorModel.dispose();\n\t}\n}\n\n// TODO @Yoyokrazy -- future feat. for viewing static outputs -- encode mime + data\n// export class NotebookOutputViewerInput extends EditorInput {\n// \tstatic readonly ID: string = 'workbench.input.notebookOutputViewerInput';\n// }\n\nexport class NotebookOutputEditorInput extends EditorInput {\n\tstatic readonly ID: string = 'workbench.input.notebookOutputEditorInput';\n\n\tprivate _notebookRef: IReference<IResolvedNotebookEditorModel> | undefined;\n\tprivate readonly _notebookUri: URI;\n\n\treadonly cellIndex: number;\n\n\tpublic cellUri: URI | undefined;\n\n\treadonly outputIndex: number;\n\tprivate outputId: string | undefined;\n\n\tconstructor(\n\t\tnotebookUri: URI,\n\t\tcellIndex: number,\n\t\toutputId: string | undefined,\n\t\toutputIndex: number,\n\t\t@INotebookEditorModelResolverService private readonly notebookEditorModelResolverService: INotebookEditorModelResolverService,\n\t) {\n\t\tsuper();\n\t\tthis._notebookUri = notebookUri;\n\n\t\tthis.cellUri = undefined;\n\t\tthis.cellIndex = cellIndex;\n\n\t\tthis.outputId = outputId;\n\t\tthis.outputIndex = outputIndex;\n\t}\n\n\toverride get typeId(): string {\n\t\treturn NotebookOutputEditorInput.ID;\n\t}\n\n\toverride async resolve(): Promise<ResolvedNotebookOutputEditorInputModel> {\n\t\tif (!this._notebookRef) {\n\t\t\tthis._notebookRef = await this.notebookEditorModelResolverService.resolve(this._notebookUri);\n\t\t}\n\n\t\tconst cell = this._notebookRef.object.notebook.cells[this.cellIndex];\n\t\tif (!cell) {\n\t\t\tthrow new Error('Cell not found');\n\t\t}\n\n\t\tthis.cellUri = cell.uri;\n\n\t\tconst resolvedOutputId = cell.outputs[this.outputIndex]?.outputId;\n\t\tif (!resolvedOutputId) {\n\t\t\tthrow new Error('Output not found');\n\t\t}\n\n\t\tif (!this.outputId) {\n\t\t\tthis.outputId = resolvedOutputId;\n\t\t}\n\n\t\treturn new ResolvedNotebookOutputEditorInputModel(\n\t\t\tthis._notebookRef.object,\n\t\t\tthis._notebookUri,\n\t\t\tcell,\n\t\t\tresolvedOutputId,\n\t\t);\n\t}\n\n\tpublic getSerializedData(): { notebookUri: URI; cellIndex: number; outputIndex: number } | undefined {\n\t\t// need to translate from uris -> current indexes\n\t\t// uris aren't deterministic across reloads, so indices are best option\n\n\t\tif (!this._notebookRef) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellIndex = this._notebookRef.object.notebook.cells.findIndex(c => isEqual(c.uri, this.cellUri));\n\t\tconst cell = this._notebookRef.object.notebook.cells[cellIndex];\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst outputIndex = cell.outputs.findIndex(o => o.outputId === this.outputId);\n\t\tif (outputIndex === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\tnotebookUri: this._notebookUri,\n\t\t\tcellIndex: cellIndex,\n\t\t\toutputIndex: outputIndex,\n\t\t};\n\t}\n\n\toverride getName(): string {\n\t\treturn nls.localize('notebookOutputEditorInput', \"Notebook Output Preview\");\n\t}\n\n\toverride get editorId(): string {\n\t\treturn 'notebookOutputEditor';\n\t}\n\n\toverride get resource(): URI | undefined {\n\t\treturn;\n\t}\n\n\toverride get capabilities() {\n\t\treturn EditorInputCapabilities.Readonly;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t}\n}\n"]}