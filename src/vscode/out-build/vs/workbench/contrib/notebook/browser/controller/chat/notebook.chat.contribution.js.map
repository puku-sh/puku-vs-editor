{"version":3,"sources":["vs/workbench/contrib/notebook/browser/controller/chat/notebook.chat.contribution.ts"],"names":[],"mappings":"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","file":"notebook.chat.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { codiconsLibrary } from '../../../../../../base/common/codiconsLibrary.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport { Position } from '../../../../../../editor/common/core/position.js';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { IWordAtPosition } from '../../../../../../editor/common/core/wordHelper.js';\nimport { CompletionContext, CompletionItemKind, CompletionList } from '../../../../../../editor/common/languages.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { ILanguageFeaturesService } from '../../../../../../editor/common/services/languageFeatures.js';\nimport { localize } from '../../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { IWorkbenchContribution, registerWorkbenchContribution2, WorkbenchPhase } from '../../../../../common/contributions.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { IChatWidget, IChatWidgetService } from '../../../../chat/browser/chat.js';\nimport { IChatContextPicker, IChatContextPickerItem, IChatContextPickerPickItem, IChatContextPickService } from '../../../../chat/browser/chatContextPickService.js';\nimport { ChatDynamicVariableModel } from '../../../../chat/browser/contrib/chatDynamicVariables.js';\nimport { computeCompletionRanges } from '../../../../chat/browser/contrib/chatInputCompletions.js';\nimport { IChatAgentService } from '../../../../chat/common/chatAgents.js';\nimport { ChatContextKeys } from '../../../../chat/common/chatContextKeys.js';\nimport { chatVariableLeader } from '../../../../chat/common/chatParserTypes.js';\nimport { ChatAgentLocation } from '../../../../chat/common/constants.js';\nimport { NOTEBOOK_CELL_HAS_OUTPUTS, NOTEBOOK_CELL_OUTPUT_MIME_TYPE_LIST_FOR_CHAT, NOTEBOOK_CELL_OUTPUT_MIMETYPE } from '../../../common/notebookContextKeys.js';\nimport { INotebookKernelService } from '../../../common/notebookKernelService.js';\nimport { createNotebookOutputVariableEntry, NOTEBOOK_CELL_OUTPUT_MIME_TYPE_LIST_FOR_CHAT_CONST } from '../../contrib/chat/notebookChatUtils.js';\nimport { getNotebookEditorFromEditorPane, ICellOutputViewModel, INotebookEditor } from '../../notebookBrowser.js';\nimport * as icons from '../../notebookIcons.js';\nimport { getOutputViewModelFromId } from '../cellOutputActions.js';\nimport { INotebookOutputActionContext, NOTEBOOK_ACTIONS_CATEGORY } from '../coreActions.js';\nimport './cellChatActions.js';\nimport { CTX_NOTEBOOK_CHAT_HAS_AGENT } from './notebookChatContext.js';\n\nconst NotebookKernelVariableKey = 'kernelVariable';\n\nclass NotebookChatContribution extends Disposable implements IWorkbenchContribution {\n\tstatic readonly ID = 'workbench.contrib.notebookChatContribution';\n\n\tprivate readonly _ctxHasProvider: IContextKey<boolean>;\n\n\tconstructor(\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IChatAgentService chatAgentService: IChatAgentService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IChatWidgetService private readonly chatWidgetService: IChatWidgetService,\n\t\t@INotebookKernelService private readonly notebookKernelService: INotebookKernelService,\n\t\t@ILanguageFeaturesService private readonly languageFeaturesService: ILanguageFeaturesService,\n\t\t@IChatContextPickService chatContextPickService: IChatContextPickService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(chatContextPickService.registerChatContextItem(new KernelVariableContextPicker(this.editorService, this.notebookKernelService)));\n\n\t\tthis._ctxHasProvider = CTX_NOTEBOOK_CHAT_HAS_AGENT.bindTo(contextKeyService);\n\n\t\tconst updateNotebookAgentStatus = () => {\n\t\t\tconst hasNotebookAgent = Boolean(chatAgentService.getDefaultAgent(ChatAgentLocation.Notebook));\n\t\t\tthis._ctxHasProvider.set(hasNotebookAgent);\n\t\t};\n\n\t\tupdateNotebookAgentStatus();\n\t\tthis._register(chatAgentService.onDidChangeAgents(updateNotebookAgentStatus));\n\n\t\tthis._register(this.languageFeaturesService.completionProvider.register({ scheme: Schemas.vscodeChatInput, hasAccessToAllModels: true }, {\n\t\t\t_debugDisplayName: 'chatKernelDynamicCompletions',\n\t\t\ttriggerCharacters: [chatVariableLeader],\n\t\t\tprovideCompletionItems: async (model: ITextModel, position: Position, _context: CompletionContext, token: CancellationToken) => {\n\t\t\t\tconst widget = this.chatWidgetService.getWidgetByInputUri(model.uri);\n\t\t\t\tif (!widget || !widget.supportsFileReferences) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (widget.location !== ChatAgentLocation.Notebook) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tconst variableNameDef = new RegExp(`${chatVariableLeader}\\\\w*`, 'g');\n\t\t\t\tconst range = computeCompletionRanges(model, position, variableNameDef, true);\n\t\t\t\tif (!range) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tconst result: CompletionList = { suggestions: [] };\n\n\t\t\t\tconst afterRange = new Range(position.lineNumber, range.replace.startColumn, position.lineNumber, range.replace.startColumn + `${chatVariableLeader}${NotebookKernelVariableKey}:`.length);\n\t\t\t\tresult.suggestions.push({\n\t\t\t\t\tlabel: `${chatVariableLeader}${NotebookKernelVariableKey}`,\n\t\t\t\t\tinsertText: `${chatVariableLeader}${NotebookKernelVariableKey}:`,\n\t\t\t\t\tdetail: localize('pickKernelVariableLabel', \"Pick a variable from the kernel\"),\n\t\t\t\t\trange,\n\t\t\t\t\tkind: CompletionItemKind.Text,\n\t\t\t\t\tcommand: { id: SelectAndInsertKernelVariableAction.ID, title: SelectAndInsertKernelVariableAction.ID, arguments: [{ widget, range: afterRange }] },\n\t\t\t\t\tsortText: 'z'\n\t\t\t\t});\n\n\t\t\t\tawait this.addKernelVariableCompletion(widget, result, range, token);\n\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}));\n\n\t\t// output context\n\t\tNOTEBOOK_CELL_OUTPUT_MIME_TYPE_LIST_FOR_CHAT.bindTo(contextKeyService).set(NOTEBOOK_CELL_OUTPUT_MIME_TYPE_LIST_FOR_CHAT_CONST);\n\t}\n\n\tprivate async addKernelVariableCompletion(widget: IChatWidget, result: CompletionList, info: { insert: Range; replace: Range; varWord: IWordAtPosition | null }, token: CancellationToken) {\n\t\tlet pattern: string | undefined;\n\t\tif (info.varWord?.word && info.varWord.word.startsWith(chatVariableLeader)) {\n\t\t\tpattern = info.varWord.word.toLowerCase().slice(1);\n\t\t}\n\n\t\tconst notebook = getNotebookEditorFromEditorPane(this.editorService.activeEditorPane)?.getViewModel()?.notebookDocument;\n\n\t\tif (!notebook) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedKernel = this.notebookKernelService.getMatchingKernel(notebook).selected;\n\t\tconst hasVariableProvider = selectedKernel?.hasVariableProvider;\n\n\t\tif (!hasVariableProvider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst variables = selectedKernel.provideVariables(notebook.uri, undefined, 'named', 0, CancellationToken.None);\n\n\t\tfor await (const variable of variables) {\n\t\t\tif (pattern && !variable.name.toLowerCase().includes(pattern)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult.suggestions.push({\n\t\t\t\tlabel: { label: variable.name, description: variable.type },\n\t\t\t\tinsertText: `${chatVariableLeader}${NotebookKernelVariableKey}:${variable.name} `,\n\t\t\t\tfilterText: `${chatVariableLeader}${variable.name}`,\n\t\t\t\trange: info,\n\t\t\t\tkind: CompletionItemKind.Variable,\n\t\t\t\tsortText: 'z',\n\t\t\t\tcommand: { id: SelectAndInsertKernelVariableAction.ID, title: SelectAndInsertKernelVariableAction.ID, arguments: [{ widget, range: info.insert, variable: variable.name }] },\n\t\t\t\tdetail: variable.type,\n\t\t\t\tdocumentation: variable.value,\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class SelectAndInsertKernelVariableAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SelectAndInsertKernelVariableAction.ID,\n\t\t\ttitle: '' // not displayed\n\t\t});\n\t}\n\n\tstatic readonly ID = 'notebook.chat.selectAndInsertKernelVariable';\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst notebookKernelService = accessor.get(INotebookKernelService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\n\t\tconst notebook = getNotebookEditorFromEditorPane(editorService.activeEditorPane)?.getViewModel()?.notebookDocument;\n\n\t\tif (!notebook) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst context = args[0] as { widget: IChatWidget; range?: Range; variable?: string } | undefined;\n\t\tif (!context || !('widget' in context) || !('range' in context)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst widget = context.widget;\n\t\tconst range = context.range;\n\t\tconst variable = context.variable;\n\n\t\tif (variable !== undefined) {\n\t\t\tthis.addVariableReference(widget, variable, range, false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedKernel = notebookKernelService.getMatchingKernel(notebook).selected;\n\t\tconst hasVariableProvider = selectedKernel?.hasVariableProvider;\n\n\t\tif (!hasVariableProvider) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst variables = selectedKernel.provideVariables(notebook.uri, undefined, 'named', 0, CancellationToken.None);\n\n\t\tconst quickPickItems: IQuickPickItem[] = [];\n\t\tfor await (const variable of variables) {\n\t\t\tquickPickItems.push({\n\t\t\t\tlabel: variable.name,\n\t\t\t\tdescription: variable.value,\n\t\t\t\tdetail: variable.type,\n\t\t\t});\n\t\t}\n\n\t\tconst placeHolder = quickPickItems.length > 0\n\t\t\t? localize('selectKernelVariablePlaceholder', \"Select a kernel variable\")\n\t\t\t: localize('noKernelVariables', \"No kernel variables found\");\n\n\t\tconst pickedVariable = await quickInputService.pick(quickPickItems, { placeHolder });\n\t\tif (!pickedVariable) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.addVariableReference(widget, pickedVariable.label, range, true);\n\t}\n\n\tprivate addVariableReference(widget: IChatWidget, variableName: string, range?: Range, updateText?: boolean) {\n\t\tif (range) {\n\t\t\tconst text = `#kernelVariable:${variableName}`;\n\n\t\t\tif (updateText) {\n\t\t\t\tconst editor = widget.inputEditor;\n\t\t\t\tconst success = editor.executeEdits('chatInsertFile', [{ range, text: text + ' ' }]);\n\t\t\t\tif (!success) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twidget.getContrib<ChatDynamicVariableModel>(ChatDynamicVariableModel.ID)?.addReference({\n\t\t\t\tid: 'vscode.notebook.variable',\n\t\t\t\trange: { startLineNumber: range.startLineNumber, startColumn: range.startColumn, endLineNumber: range.endLineNumber, endColumn: range.startColumn + text.length },\n\t\t\t\tdata: variableName,\n\t\t\t\tfullName: variableName,\n\t\t\t\ticon: codiconsLibrary.variable,\n\t\t\t});\n\t\t} else {\n\t\t\twidget.attachmentModel.addContext({\n\t\t\t\tid: 'vscode.notebook.variable',\n\t\t\t\tname: variableName,\n\t\t\t\tvalue: variableName,\n\t\t\t\ticon: codiconsLibrary.variable,\n\t\t\t\tkind: 'generic'\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass KernelVariableContextPicker implements IChatContextPickerItem {\n\n\treadonly type = 'pickerPick';\n\treadonly label = localize('chatContext.notebook.kernelVariable', 'Kernel Variable...');\n\treadonly icon = Codicon.serverEnvironment;\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@INotebookKernelService private readonly notebookKernelService: INotebookKernelService,\n\t) { }\n\n\tisEnabled(widget: IChatWidget): Promise<boolean> | boolean {\n\t\treturn widget.location === ChatAgentLocation.Notebook && Boolean(getNotebookEditorFromEditorPane(this.editorService.activeEditorPane)?.getViewModel()?.notebookDocument);\n\t}\n\n\tasPicker(): IChatContextPicker {\n\n\t\tconst picks = (async () => {\n\n\t\t\tconst notebook = getNotebookEditorFromEditorPane(this.editorService.activeEditorPane)?.getViewModel()?.notebookDocument;\n\n\t\t\tif (!notebook) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst selectedKernel = this.notebookKernelService.getMatchingKernel(notebook).selected;\n\t\t\tconst hasVariableProvider = selectedKernel?.hasVariableProvider;\n\n\t\t\tif (!hasVariableProvider) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst variables = selectedKernel.provideVariables(notebook.uri, undefined, 'named', 0, CancellationToken.None);\n\n\t\t\tconst result: IChatContextPickerPickItem[] = [];\n\t\t\tfor await (const variable of variables) {\n\t\t\t\tresult.push({\n\t\t\t\t\tlabel: variable.name,\n\t\t\t\t\tdescription: variable.value,\n\t\t\t\t\tasAttachment: () => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tkind: 'generic',\n\t\t\t\t\t\t\tid: 'vscode.notebook.variable',\n\t\t\t\t\t\t\tname: variable.name,\n\t\t\t\t\t\t\tvalue: variable.value,\n\t\t\t\t\t\t\ticon: codiconsLibrary.variable,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t})();\n\n\t\treturn {\n\t\t\tplaceholder: localize('chatContext.notebook.kernelVariable.placeholder', 'Select a kernel variable'),\n\t\t\tpicks\n\t\t};\n\t}\n}\n\n\nregisterAction2(class CopyCellOutputAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.cellOutput.addToChat',\n\t\t\ttitle: localize('notebookActions.addOutputToChat', \"Add Cell Output to Chat\"),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.NotebookOutputToolbar,\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_CELL_HAS_OUTPUTS, ContextKeyExpr.in(NOTEBOOK_CELL_OUTPUT_MIMETYPE.key, NOTEBOOK_CELL_OUTPUT_MIME_TYPE_LIST_FOR_CHAT.key)),\n\t\t\t\torder: 10,\n\t\t\t\tgroup: 'notebook_chat_actions'\n\t\t\t},\n\t\t\tcategory: NOTEBOOK_ACTIONS_CATEGORY,\n\t\t\ticon: icons.copyIcon,\n\t\t\tprecondition: ChatContextKeys.enabled\n\t\t});\n\t}\n\n\tprivate getNoteboookEditor(editorService: IEditorService, outputContext: INotebookOutputActionContext | { outputViewModel: ICellOutputViewModel } | undefined): INotebookEditor | undefined {\n\t\tif (outputContext && 'notebookEditor' in outputContext) {\n\t\t\treturn outputContext.notebookEditor;\n\t\t}\n\t\treturn getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\t}\n\n\tasync run(accessor: ServicesAccessor, outputContext: INotebookOutputActionContext | { outputViewModel: ICellOutputViewModel } | undefined): Promise<void> {\n\t\tconst notebookEditor = this.getNoteboookEditor(accessor.get(IEditorService), outputContext);\n\n\t\tif (!notebookEditor) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet outputViewModel: ICellOutputViewModel | undefined;\n\t\tif (outputContext && 'outputId' in outputContext && typeof outputContext.outputId === 'string') {\n\t\t\toutputViewModel = getOutputViewModelFromId(outputContext.outputId, notebookEditor);\n\t\t} else if (outputContext && 'outputViewModel' in outputContext) {\n\t\t\toutputViewModel = outputContext.outputViewModel;\n\t\t}\n\n\t\tif (!outputViewModel) {\n\t\t\t// not able to find the output from the provided context, use the active cell\n\t\t\tconst activeCell = notebookEditor.getActiveCell();\n\t\t\tif (!activeCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (activeCell.focusedOutputId !== undefined) {\n\t\t\t\toutputViewModel = activeCell.outputsViewModels.find(output => {\n\t\t\t\t\treturn output.model.outputId === activeCell.focusedOutputId;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutputViewModel = activeCell.outputsViewModels.find(output => output.pickedMimeType?.isTrusted);\n\t\t\t}\n\t\t}\n\n\t\tif (!outputViewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst mimeType = outputViewModel.pickedMimeType?.mimeType;\n\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tlet widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\tconst widgets = chatWidgetService.getWidgetsByLocations(ChatAgentLocation.Chat);\n\t\t\tif (widgets.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twidget = widgets[0];\n\t\t}\n\t\tif (mimeType && NOTEBOOK_CELL_OUTPUT_MIME_TYPE_LIST_FOR_CHAT_CONST.includes(mimeType)) {\n\n\t\t\tconst entry = createNotebookOutputVariableEntry(outputViewModel, mimeType, notebookEditor);\n\t\t\tif (!entry) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twidget.attachmentModel.addContext(entry);\n\t\t\t(await chatWidgetService.revealWidget())?.focusInput();\n\t\t}\n\t}\n\n});\n\nregisterAction2(SelectAndInsertKernelVariableAction);\nregisterWorkbenchContribution2(NotebookChatContribution.ID, NotebookChatContribution, WorkbenchPhase.BlockRestore);\n"]}