{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/viewModel/cellOutputViewModel.ts","vs/workbench/contrib/notebook/browser/viewModel/cellOutputViewModel.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAE,UAAU,EAAE,MAAM,yCAAyC,CAAC;AACrE,OAAO,EAAE,eAAe,EAAE,MAAM,0CAA0C,CAAC;AAG3E,OAAO,EAAiC,sBAAsB,EAAE,MAAM,gCAAgC,CAAC;AAGvG,IAAI,MAAM,GAAG,CAAC,CAAC;AACf,MAAM,OAAO,mBAAoB,SAAQ,UAAU;IAMlD,UAAU,CAAC,OAAO,GAAG,IAAI,EAAE,QAAiB,KAAK;QAChD,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC;YACjC,kCAAkC;YAClC,OAAO;QACR,CAAC;QAED,IAAI,KAAK,IAAI,OAAO,EAAE,CAAC;YACtB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACxB,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IACtC,CAAC;IAGD,IAAI,KAAK;QACR,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAGD,IAAI,cAAc;QACjB,OAAO,IAAI,CAAC,eAAe,CAAC;IAC7B,CAAC;IAED,IAAI,cAAc,CAAC,KAAmC;QACrD,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IAC9B,CAAC;IAED,YACU,aAAoC,EAC5B,cAA2B,EAC3B,gBAAkC;QAEnD,KAAK,EAAE,CAAC;QAJC,kBAAa,GAAb,aAAa,CAAuB;QAC5B,mBAAc,GAAd,cAAc,CAAa;QAC3B,qBAAgB,GAAhB,gBAAgB,CAAkB;QAnC5C,+BAA0B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QAChE,uBAAkB,GAAG,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC;QAE5D,eAAU,GAAG,KAAK,CAAC;QAC3B,YAAO,GAAG,eAAe,CAAU,eAAe,EAAE,KAAK,CAAC,CAAC;QAc3D,iBAAY,GAAG,MAAM,EAAE,CAAC;IAoBxB,CAAC;IAED,gBAAgB;QACf,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAC5C,OAAO,KAAK,CAAC;QACd,CAAC;QAED,MAAM,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC1D,OAAO,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,aAAa,CAAC,CAAC;IAClF,CAAC;IAED,gBAAgB,CAAC,SAA4B,EAAE,cAA6C;QAC3F,MAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,SAAS,EAAE,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACrG,MAAM,KAAK,GAAG,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,UAAU,KAAK,sBAAsB,IAAI,QAAQ,CAAC,SAAS,CAAC,CAAC;QAEpH,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC;IAED,aAAa;QACZ,4BAA4B;QAC5B,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;QACjC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QACzB,IAAI,CAAC,0BAA0B,CAAC,IAAI,EAAE,CAAC;IACxC,CAAC;IAED,SAAS;QACR,OAAO;YACN,OAAO,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO;YACpC,+BAA+B;SAC/B,CAAC;IACH,CAAC;CACD","file":"cellOutputViewModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { observableValue } from '../../../../../base/common/observable.js';\nimport { ICellOutputViewModel, IGenericCellViewModel } from '../notebookBrowser.js';\nimport { NotebookTextModel } from '../../common/model/notebookTextModel.js';\nimport { ICellOutput, IOrderedMimeType, RENDERER_NOT_AVAILABLE } from '../../common/notebookCommon.js';\nimport { INotebookService } from '../../common/notebookService.js';\n\nlet handle = 0;\nexport class CellOutputViewModel extends Disposable implements ICellOutputViewModel {\n\tprivate _onDidResetRendererEmitter = this._register(new Emitter<void>());\n\treadonly onDidResetRenderer = this._onDidResetRendererEmitter.event;\n\n\tprivate alwaysShow = false;\n\tvisible = observableValue<boolean>('outputVisible', false);\n\tsetVisible(visible = true, force: boolean = false) {\n\t\tif (!visible && this.alwaysShow) {\n\t\t\t// we are forced to show, so no-op\n\t\t\treturn;\n\t\t}\n\n\t\tif (force && visible) {\n\t\t\tthis.alwaysShow = true;\n\t\t}\n\n\t\tthis.visible.set(visible, undefined);\n\t}\n\n\toutputHandle = handle++;\n\tget model(): ICellOutput {\n\t\treturn this._outputRawData;\n\t}\n\n\tprivate _pickedMimeType: IOrderedMimeType | undefined;\n\tget pickedMimeType() {\n\t\treturn this._pickedMimeType;\n\t}\n\n\tset pickedMimeType(value: IOrderedMimeType | undefined) {\n\t\tthis._pickedMimeType = value;\n\t}\n\n\tconstructor(\n\t\treadonly cellViewModel: IGenericCellViewModel,\n\t\tprivate readonly _outputRawData: ICellOutput,\n\t\tprivate readonly _notebookService: INotebookService\n\t) {\n\t\tsuper();\n\t}\n\n\thasMultiMimeType() {\n\t\tif (this._outputRawData.outputs.length < 2) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst firstMimeType = this._outputRawData.outputs[0].mime;\n\t\treturn this._outputRawData.outputs.some(output => output.mime !== firstMimeType);\n\t}\n\n\tresolveMimeTypes(textModel: NotebookTextModel, kernelProvides: readonly string[] | undefined): [readonly IOrderedMimeType[], number] {\n\t\tconst mimeTypes = this._notebookService.getOutputMimeTypeInfo(textModel, kernelProvides, this.model);\n\t\tconst index = mimeTypes.findIndex(mimeType => mimeType.rendererId !== RENDERER_NOT_AVAILABLE && mimeType.isTrusted);\n\n\t\treturn [mimeTypes, Math.max(index, 0)];\n\t}\n\n\tresetRenderer() {\n\t\t// reset the output renderer\n\t\tthis._pickedMimeType = undefined;\n\t\tthis.model.bumpVersion();\n\t\tthis._onDidResetRendererEmitter.fire();\n\t}\n\n\ttoRawJSON() {\n\t\treturn {\n\t\t\toutputs: this._outputRawData.outputs,\n\t\t\t// TODO@rebronix, no id, right?\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { observableValue } from '../../../../../base/common/observable.js';\nimport { ICellOutputViewModel, IGenericCellViewModel } from '../notebookBrowser.js';\nimport { NotebookTextModel } from '../../common/model/notebookTextModel.js';\nimport { ICellOutput, IOrderedMimeType, RENDERER_NOT_AVAILABLE } from '../../common/notebookCommon.js';\nimport { INotebookService } from '../../common/notebookService.js';\n\nlet handle = 0;\nexport class CellOutputViewModel extends Disposable implements ICellOutputViewModel {\n\tprivate _onDidResetRendererEmitter = this._register(new Emitter<void>());\n\treadonly onDidResetRenderer = this._onDidResetRendererEmitter.event;\n\n\tprivate alwaysShow = false;\n\tvisible = observableValue<boolean>('outputVisible', false);\n\tsetVisible(visible = true, force: boolean = false) {\n\t\tif (!visible && this.alwaysShow) {\n\t\t\t// we are forced to show, so no-op\n\t\t\treturn;\n\t\t}\n\n\t\tif (force && visible) {\n\t\t\tthis.alwaysShow = true;\n\t\t}\n\n\t\tthis.visible.set(visible, undefined);\n\t}\n\n\toutputHandle = handle++;\n\tget model(): ICellOutput {\n\t\treturn this._outputRawData;\n\t}\n\n\tprivate _pickedMimeType: IOrderedMimeType | undefined;\n\tget pickedMimeType() {\n\t\treturn this._pickedMimeType;\n\t}\n\n\tset pickedMimeType(value: IOrderedMimeType | undefined) {\n\t\tthis._pickedMimeType = value;\n\t}\n\n\tconstructor(\n\t\treadonly cellViewModel: IGenericCellViewModel,\n\t\tprivate readonly _outputRawData: ICellOutput,\n\t\tprivate readonly _notebookService: INotebookService\n\t) {\n\t\tsuper();\n\t}\n\n\thasMultiMimeType() {\n\t\tif (this._outputRawData.outputs.length < 2) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst firstMimeType = this._outputRawData.outputs[0].mime;\n\t\treturn this._outputRawData.outputs.some(output => output.mime !== firstMimeType);\n\t}\n\n\tresolveMimeTypes(textModel: NotebookTextModel, kernelProvides: readonly string[] | undefined): [readonly IOrderedMimeType[], number] {\n\t\tconst mimeTypes = this._notebookService.getOutputMimeTypeInfo(textModel, kernelProvides, this.model);\n\t\tconst index = mimeTypes.findIndex(mimeType => mimeType.rendererId !== RENDERER_NOT_AVAILABLE && mimeType.isTrusted);\n\n\t\treturn [mimeTypes, Math.max(index, 0)];\n\t}\n\n\tresetRenderer() {\n\t\t// reset the output renderer\n\t\tthis._pickedMimeType = undefined;\n\t\tthis.model.bumpVersion();\n\t\tthis._onDidResetRendererEmitter.fire();\n\t}\n\n\ttoRawJSON() {\n\t\treturn {\n\t\t\toutputs: this._outputRawData.outputs,\n\t\t\t// TODO@rebronix, no id, right?\n\t\t};\n\t}\n}\n"]}