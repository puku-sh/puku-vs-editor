{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/contrib/multicursor/notebookSelectionHighlight.ts","vs/workbench/contrib/notebook/browser/contrib/multicursor/notebookSelectionHighlight.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,KAAK,EAAE,MAAM,wCAAwC,CAAC;AAC/D,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,4CAA4C,CAAC;AAEzF,OAAO,EAAE,SAAS,EAAsB,MAAM,mDAAmD,CAAC;AAGlG,OAAO,EAAE,qBAAqB,EAAE,MAAM,kEAAkE,CAAC;AAEzG,OAAO,EAAE,4BAA4B,EAAE,MAAM,mCAAmC,CAAC;AAEjF,IAAM,4BAA4B,GAAlC,MAAM,4BAA6B,SAAQ,UAAU;aAEpC,OAAE,GAAW,+BAAX,AAA0C,CAAC;IAO7D,0HAA0H;IAC1H,oFAAoF;IACpF,qFAAqF;IAErF,YACkB,cAA+B,EACzB,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QAHS,mBAAc,GAAd,cAAc,CAAiB;QACR,yBAAoB,GAApB,oBAAoB,CAAuB;QAZ5E,cAAS,GAAY,KAAK,CAAC;QAE3B,sBAAiB,GAAG,IAAI,GAAG,EAA4B,CAAC;QAE/C,sBAAiB,GAAG,IAAI,eAAe,EAAE,CAAC;QAY1D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAU,2BAA2B,CAAC,CAAC;QAC1F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;YACrE,IAAI,CAAC,CAAC,oBAAoB,CAAC,2BAA2B,CAAC,EAAE,CAAC;gBACzD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAU,2BAA2B,CAAC,CAAC;YAC3F,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,qBAAqB,CAAC,KAAK,IAAI,EAAE;YACnE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACrB,OAAO;YACR,CAAC;YAED,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC;YAC9D,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;gBACtB,OAAO;YACR,CAAC;YAED,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;YACvD,IAAI,CAAC,UAAU,EAAE,CAAC;gBACjB,OAAO;YACR,CAAC;YAED,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;gBAChC,MAAM,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,4BAA4B,CAAC,CAAC;YAChE,CAAC;YAED,IAAI,CAAC,iCAAiC,EAAE,CAAC;YAEzC,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;YAC/B,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC,CAAC,EAAE,EAAE;gBAC7E,IAAI,CAAC,CAAC,MAAM,wCAAgC,EAAE,CAAC;oBAC9C,IAAI,CAAC,iCAAiC,EAAE,CAAC;oBACzC,OAAO;gBACR,CAAC;gBAED,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;oBACtB,OAAO;gBACR,CAAC;gBAED,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC;oBACpC,IAAI,CAAC,iCAAiC,EAAE,CAAC;oBACzC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBACnC,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,IAAI,IAAI,CAAC,cAAc,CAAC,kBAAkB,EAAE,CAAC,aAAa,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC;gBAC9F,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YACnC,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,OAAO,CAAC,MAA6B;QAC5C,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YACzC,OAAO;QACR,CAAC;QAED,8DAA8D;QAC9D,4DAA4D;QAE5D,eAAe;QACf,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAC/C,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,yBAAyB,EAAE,EAAE,CAAC;YACzD,OAAO;QACR,CAAC;QACD,MAAM,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,CAAC,eAAe,KAAK,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC;YAC1D,8BAA8B;YAC9B,uCAAuC;YACvC,OAAO;QACR,CAAC;QACD,MAAM,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;QACpD,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,OAAO;QACR,CAAC;QAED,MAAM,OAAO,GAAG,MAAM,CAAC,SAAS,CAAC,WAAW,CAC3C,UAAU,EACV,KAAK,EACL,IAAI,EACJ,IAAI,CACJ,CAAC;QAEF,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE,CAAC;YAC3B,MAAM,IAAI,GAAG,MAAM,CAAC,eAAe,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACrD,IAAI,CAAC,IAAI,EAAE,CAAC;gBACX,SAAS;YACV,CAAC;YAED,IAAI,CAAC,qBAAqB,CAAC,IAAI,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC;QAC/C,CAAC;IACF,CAAC;IAEO,qBAAqB,CAAC,IAAoB,EAAE,OAAoB;QACvE,MAAM,UAAU,GAAgB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;YAC/C,OAAO,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,iCAAyB,CAAC;QAC7D,CAAC,CAAC,CAAC;QAEH,MAAM,cAAc,GAA4B,EAAE,CAAC;QACnD,UAAU,EAAE,GAAG,CAAC,SAAS,CAAC,EAAE;YAC3B,MAAM,OAAO,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC;YAEpC,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,cAAc,CAAC,IAAI,CAAC;oBACnB,KAAK,EAAE,SAAS;oBAChB,OAAO,EAAE;wBACR,WAAW,EAAE,EAAE;wBACf,SAAS,EAAE,yBAAyB;qBACpC;iBACD,CAAC,CAAC;YACJ,CAAC;QACF,CAAC,CAAC,CAAC;QAEH,MAAM,cAAc,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;QAC9D,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,qBAAqB,CAC1D,cAAc,EACd,cAAc,CACd,CAAC,CAAC;IACJ,CAAC;IAEO,iCAAiC;QACxC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE;YAC1C,MAAM,eAAe,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;YAC/D,IAAI,eAAe,EAAE,CAAC;gBACrB,IAAI,CAAC,qBAAqB,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;gBAChD,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACrC,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,aAAa,CAAC,SAAoB,EAAE,KAAiB;QAC5D,OAAO,KAAK,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAChE,CAAC;IAEQ,OAAO;QACf,KAAK,CAAC,OAAO,EAAE,CAAC;QAChB,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,CAAC;IAClC,CAAC;;AA3JI,4BAA4B;IAe/B,WAAA,qBAAqB,CAAA;GAflB,4BAA4B,CA4JjC;AAED,4BAA4B,CAAC,4BAA4B,CAAC,EAAE,EAAE,4BAA4B,CAAC,CAAC","file":"notebookSelectionHighlight.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../../../editor/browser/editorBrowser.js';\nimport { Selection, SelectionDirection } from '../../../../../../editor/common/core/selection.js';\nimport { CursorChangeReason } from '../../../../../../editor/common/cursorEvents.js';\nimport { FindMatch, IModelDeltaDecoration, ITextModel } from '../../../../../../editor/common/model.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IActiveNotebookEditor, ICellViewModel, INotebookEditor, INotebookEditorContribution } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\n\nclass NotebookSelectionHighlighter extends Disposable implements INotebookEditorContribution {\n\n\tstatic readonly id: string = 'notebook.selectionHighlighter';\n\tprivate isEnabled: boolean = false;\n\n\tprivate cellDecorationIds = new Map<ICellViewModel, string[]>();\n\tprivate anchorCell: [ICellViewModel, ICodeEditor] | undefined;\n\tprivate readonly anchorDisposables = new DisposableStore();\n\n\t// right now this lets us mimic the more performant cache implementation of the text editor (doesn't need to be a delayer)\n\t// todo: in the future, implement caching and change to a 250ms delay upon recompute\n\t// private readonly runDelayer: Delayer<void> = this._register(new Delayer<void>(0));\n\n\tconstructor(\n\t\tprivate readonly notebookEditor: INotebookEditor,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.isEnabled = this.configurationService.getValue<boolean>('editor.selectionHighlight');\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.selectionHighlight')) {\n\t\t\t\tthis.isEnabled = this.configurationService.getValue<boolean>('editor.selectionHighlight');\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.notebookEditor.onDidChangeActiveCell(async () => {\n\t\t\tif (!this.isEnabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.anchorCell = this.notebookEditor.activeCellAndCodeEditor;\n\t\t\tif (!this.anchorCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst activeCell = this.notebookEditor.getActiveCell();\n\t\t\tif (!activeCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeCell.editorAttached) {\n\t\t\t\tawait Event.toPromise(activeCell.onDidChangeEditorAttachState);\n\t\t\t}\n\n\t\t\tthis.clearNotebookSelectionDecorations();\n\n\t\t\tthis.anchorDisposables.clear();\n\t\t\tthis.anchorDisposables.add(this.anchorCell[1].onDidChangeCursorPosition((e) => {\n\t\t\t\tif (e.reason !== CursorChangeReason.Explicit) {\n\t\t\t\t\tthis.clearNotebookSelectionDecorations();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.anchorCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.notebookEditor.hasModel()) {\n\t\t\t\t\tthis.clearNotebookSelectionDecorations();\n\t\t\t\t\tthis._update(this.notebookEditor);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (this.notebookEditor.getEditorViewState().editorFocused && this.notebookEditor.hasModel()) {\n\t\t\t\tthis._update(this.notebookEditor);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _update(editor: IActiveNotebookEditor) {\n\t\tif (!this.anchorCell || !this.isEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: isTooLargeForTokenization check, notebook equivalent?\n\t\t// unlikely that any one cell's textmodel would be too large\n\n\t\t// get the word\n\t\tconst textModel = this.anchorCell[0].textModel;\n\t\tif (!textModel || textModel.isTooLargeForTokenization()) {\n\t\t\treturn;\n\t\t}\n\t\tconst s = this.anchorCell[0].getSelections()[0];\n\t\tif (s.startLineNumber !== s.endLineNumber || s.isEmpty()) {\n\t\t\t// empty selections do nothing\n\t\t\t// multiline forbidden for perf reasons\n\t\t\treturn;\n\t\t}\n\t\tconst searchText = this.getSearchText(s, textModel);\n\t\tif (!searchText) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst results = editor.textModel.findMatches(\n\t\t\tsearchText,\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t\tnull,\n\t\t);\n\n\t\tfor (const res of results) {\n\t\t\tconst cell = editor.getCellByHandle(res.cell.handle);\n\t\t\tif (!cell) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.updateCellDecorations(cell, res.matches);\n\t\t}\n\t}\n\n\tprivate updateCellDecorations(cell: ICellViewModel, matches: FindMatch[]) {\n\t\tconst selections: Selection[] = matches.map(m => {\n\t\t\treturn Selection.fromRange(m.range, SelectionDirection.LTR);\n\t\t});\n\n\t\tconst newDecorations: IModelDeltaDecoration[] = [];\n\t\tselections?.map(selection => {\n\t\t\tconst isEmpty = selection.isEmpty();\n\n\t\t\tif (!isEmpty) {\n\t\t\t\tnewDecorations.push({\n\t\t\t\t\trange: selection,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tdescription: '',\n\t\t\t\t\t\tclassName: '.nb-selection-highlight',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst oldDecorations = this.cellDecorationIds.get(cell) ?? [];\n\t\tthis.cellDecorationIds.set(cell, cell.deltaModelDecorations(\n\t\t\toldDecorations,\n\t\t\tnewDecorations\n\t\t));\n\t}\n\n\tprivate clearNotebookSelectionDecorations() {\n\t\tthis.cellDecorationIds.forEach((_, cell) => {\n\t\t\tconst cellDecorations = this.cellDecorationIds.get(cell) ?? [];\n\t\t\tif (cellDecorations) {\n\t\t\t\tcell.deltaModelDecorations(cellDecorations, []);\n\t\t\t\tthis.cellDecorationIds.delete(cell);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getSearchText(selection: Selection, model: ITextModel): string {\n\t\treturn model.getValueInRange(selection).replace(/\\r\\n/g, '\\n');\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.anchorDisposables.dispose();\n\t}\n}\n\nregisterNotebookContribution(NotebookSelectionHighlighter.id, NotebookSelectionHighlighter);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../../../editor/browser/editorBrowser.js';\nimport { Selection, SelectionDirection } from '../../../../../../editor/common/core/selection.js';\nimport { CursorChangeReason } from '../../../../../../editor/common/cursorEvents.js';\nimport { FindMatch, IModelDeltaDecoration, ITextModel } from '../../../../../../editor/common/model.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IActiveNotebookEditor, ICellViewModel, INotebookEditor, INotebookEditorContribution } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\n\nclass NotebookSelectionHighlighter extends Disposable implements INotebookEditorContribution {\n\n\tstatic readonly id: string = 'notebook.selectionHighlighter';\n\tprivate isEnabled: boolean = false;\n\n\tprivate cellDecorationIds = new Map<ICellViewModel, string[]>();\n\tprivate anchorCell: [ICellViewModel, ICodeEditor] | undefined;\n\tprivate readonly anchorDisposables = new DisposableStore();\n\n\t// right now this lets us mimic the more performant cache implementation of the text editor (doesn't need to be a delayer)\n\t// todo: in the future, implement caching and change to a 250ms delay upon recompute\n\t// private readonly runDelayer: Delayer<void> = this._register(new Delayer<void>(0));\n\n\tconstructor(\n\t\tprivate readonly notebookEditor: INotebookEditor,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.isEnabled = this.configurationService.getValue<boolean>('editor.selectionHighlight');\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.selectionHighlight')) {\n\t\t\t\tthis.isEnabled = this.configurationService.getValue<boolean>('editor.selectionHighlight');\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.notebookEditor.onDidChangeActiveCell(async () => {\n\t\t\tif (!this.isEnabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.anchorCell = this.notebookEditor.activeCellAndCodeEditor;\n\t\t\tif (!this.anchorCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst activeCell = this.notebookEditor.getActiveCell();\n\t\t\tif (!activeCell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeCell.editorAttached) {\n\t\t\t\tawait Event.toPromise(activeCell.onDidChangeEditorAttachState);\n\t\t\t}\n\n\t\t\tthis.clearNotebookSelectionDecorations();\n\n\t\t\tthis.anchorDisposables.clear();\n\t\t\tthis.anchorDisposables.add(this.anchorCell[1].onDidChangeCursorPosition((e) => {\n\t\t\t\tif (e.reason !== CursorChangeReason.Explicit) {\n\t\t\t\t\tthis.clearNotebookSelectionDecorations();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.anchorCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.notebookEditor.hasModel()) {\n\t\t\t\t\tthis.clearNotebookSelectionDecorations();\n\t\t\t\t\tthis._update(this.notebookEditor);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (this.notebookEditor.getEditorViewState().editorFocused && this.notebookEditor.hasModel()) {\n\t\t\t\tthis._update(this.notebookEditor);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _update(editor: IActiveNotebookEditor) {\n\t\tif (!this.anchorCell || !this.isEnabled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: isTooLargeForTokenization check, notebook equivalent?\n\t\t// unlikely that any one cell's textmodel would be too large\n\n\t\t// get the word\n\t\tconst textModel = this.anchorCell[0].textModel;\n\t\tif (!textModel || textModel.isTooLargeForTokenization()) {\n\t\t\treturn;\n\t\t}\n\t\tconst s = this.anchorCell[0].getSelections()[0];\n\t\tif (s.startLineNumber !== s.endLineNumber || s.isEmpty()) {\n\t\t\t// empty selections do nothing\n\t\t\t// multiline forbidden for perf reasons\n\t\t\treturn;\n\t\t}\n\t\tconst searchText = this.getSearchText(s, textModel);\n\t\tif (!searchText) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst results = editor.textModel.findMatches(\n\t\t\tsearchText,\n\t\t\tfalse,\n\t\t\ttrue,\n\t\t\tnull,\n\t\t);\n\n\t\tfor (const res of results) {\n\t\t\tconst cell = editor.getCellByHandle(res.cell.handle);\n\t\t\tif (!cell) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.updateCellDecorations(cell, res.matches);\n\t\t}\n\t}\n\n\tprivate updateCellDecorations(cell: ICellViewModel, matches: FindMatch[]) {\n\t\tconst selections: Selection[] = matches.map(m => {\n\t\t\treturn Selection.fromRange(m.range, SelectionDirection.LTR);\n\t\t});\n\n\t\tconst newDecorations: IModelDeltaDecoration[] = [];\n\t\tselections?.map(selection => {\n\t\t\tconst isEmpty = selection.isEmpty();\n\n\t\t\tif (!isEmpty) {\n\t\t\t\tnewDecorations.push({\n\t\t\t\t\trange: selection,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tdescription: '',\n\t\t\t\t\t\tclassName: '.nb-selection-highlight',\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tconst oldDecorations = this.cellDecorationIds.get(cell) ?? [];\n\t\tthis.cellDecorationIds.set(cell, cell.deltaModelDecorations(\n\t\t\toldDecorations,\n\t\t\tnewDecorations\n\t\t));\n\t}\n\n\tprivate clearNotebookSelectionDecorations() {\n\t\tthis.cellDecorationIds.forEach((_, cell) => {\n\t\t\tconst cellDecorations = this.cellDecorationIds.get(cell) ?? [];\n\t\t\tif (cellDecorations) {\n\t\t\t\tcell.deltaModelDecorations(cellDecorations, []);\n\t\t\t\tthis.cellDecorationIds.delete(cell);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate getSearchText(selection: Selection, model: ITextModel): string {\n\t\treturn model.getValueInRange(selection).replace(/\\r\\n/g, '\\n');\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.anchorDisposables.dispose();\n\t}\n}\n\nregisterNotebookContribution(NotebookSelectionHighlighter.id, NotebookSelectionHighlighter);\n"]}