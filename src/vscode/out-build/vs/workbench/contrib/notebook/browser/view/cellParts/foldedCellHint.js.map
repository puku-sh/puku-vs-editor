{"version":3,"sources":["vs/workbench/contrib/notebook/browser/view/cellParts/foldedCellHint.ts"],"names":[],"mappings":"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","file":"foldedCellHint.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { localize } from '../../../../../../nls.js';\nimport { FoldingController } from '../../controller/foldingController.js';\nimport { CellEditState, CellFoldingState, INotebookEditor } from '../../notebookBrowser.js';\nimport { CellContentPart } from '../cellPart.js';\nimport { MarkupCellViewModel } from '../../viewModel/markupCellViewModel.js';\nimport { ICellRange } from '../../../common/notebookRange.js';\nimport { executingStateIcon } from '../../notebookIcons.js';\nimport { INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { CellKind, NotebookCellExecutionState } from '../../../common/notebookCommon.js';\nimport { MutableDisposable } from '../../../../../../base/common/lifecycle.js';\n\nexport class FoldedCellHint extends CellContentPart {\n\n\tprivate readonly _runButtonListener = this._register(new MutableDisposable());\n\tprivate readonly _cellExecutionListener = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\tprivate readonly _container: HTMLElement,\n\t\t@INotebookExecutionStateService private readonly _notebookExecutionStateService: INotebookExecutionStateService\n\t) {\n\t\tsuper();\n\t}\n\n\toverride didRenderCell(element: MarkupCellViewModel): void {\n\t\tthis.update(element);\n\t}\n\n\tprivate update(element: MarkupCellViewModel) {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\tthis._cellExecutionListener.clear();\n\t\t\tthis._runButtonListener.clear();\n\t\t\treturn;\n\t\t}\n\n\t\tif (element.isInputCollapsed || element.getEditState() === CellEditState.Editing) {\n\t\t\tthis._cellExecutionListener.clear();\n\t\t\tthis._runButtonListener.clear();\n\t\t\tDOM.hide(this._container);\n\t\t} else if (element.foldingState === CellFoldingState.Collapsed) {\n\t\t\tconst idx = this._notebookEditor.getViewModel().getCellIndex(element);\n\t\t\tconst length = this._notebookEditor.getViewModel().getFoldedLength(idx);\n\n\t\t\tconst runSectionButton = this.getRunFoldedSectionButton({ start: idx, end: idx + length + 1 });\n\t\t\tif (!runSectionButton) {\n\t\t\t\tDOM.reset(this._container, this.getHiddenCellsLabel(length), this.getHiddenCellHintButton(element));\n\t\t\t} else {\n\t\t\t\tDOM.reset(this._container, runSectionButton, this.getHiddenCellsLabel(length), this.getHiddenCellHintButton(element));\n\t\t\t}\n\n\t\t\tDOM.show(this._container);\n\n\t\t\tconst foldHintTop = element.layoutInfo.previewHeight;\n\t\t\tthis._container.style.top = `${foldHintTop}px`;\n\t\t} else {\n\t\t\tthis._cellExecutionListener.clear();\n\t\t\tthis._runButtonListener.clear();\n\t\t\tDOM.hide(this._container);\n\t\t}\n\t}\n\n\tprivate getHiddenCellsLabel(num: number): HTMLElement {\n\t\tconst label = num === 1 ?\n\t\t\tlocalize('hiddenCellsLabel', \"1 cell hidden\") :\n\t\t\tlocalize('hiddenCellsLabelPlural', \"{0} cells hidden\", num);\n\n\t\treturn DOM.$('span.notebook-folded-hint-label', undefined, label);\n\t}\n\n\tprivate getHiddenCellHintButton(element: MarkupCellViewModel): HTMLElement {\n\t\tconst expandIcon = DOM.$('span.cell-expand-part-button');\n\t\texpandIcon.classList.add(...ThemeIcon.asClassNameArray(Codicon.more));\n\t\tthis._register(DOM.addDisposableListener(expandIcon, DOM.EventType.CLICK, () => {\n\t\t\tconst controller = this._notebookEditor.getContribution<FoldingController>(FoldingController.id);\n\t\t\tconst idx = this._notebookEditor.getCellIndex(element);\n\t\t\tif (typeof idx === 'number') {\n\t\t\t\tcontroller.setFoldingStateDown(idx, CellFoldingState.Expanded, 1);\n\t\t\t}\n\t\t}));\n\n\t\treturn expandIcon;\n\t}\n\n\tprivate getRunFoldedSectionButton(range: ICellRange): HTMLElement | undefined {\n\t\tconst runAllContainer = DOM.$('span.folded-cell-run-section-button');\n\t\tconst cells = this._notebookEditor.getCellsInRange(range);\n\n\t\t// Check if any cells are code cells, if not, we won't show the run button\n\t\tconst hasCodeCells = cells.some(cell => cell.cellKind === CellKind.Code);\n\t\tif (!hasCodeCells) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst isRunning = cells.some(cell => {\n\t\t\tconst cellExecution = this._notebookExecutionStateService.getCellExecution(cell.uri);\n\t\t\treturn cellExecution && cellExecution.state === NotebookCellExecutionState.Executing;\n\t\t});\n\n\t\tconst runAllIcon = isRunning ?\n\t\t\tThemeIcon.modify(executingStateIcon, 'spin') :\n\t\t\tCodicon.play;\n\t\trunAllContainer.classList.add(...ThemeIcon.asClassNameArray(runAllIcon));\n\n\t\tthis._runButtonListener.value = DOM.addDisposableListener(runAllContainer, DOM.EventType.CLICK, () => {\n\t\t\tthis._notebookEditor.executeNotebookCells(cells);\n\t\t});\n\n\t\tthis._cellExecutionListener.value = this._notebookExecutionStateService.onDidChangeExecution(() => {\n\t\t\tconst isRunning = cells.some(cell => {\n\t\t\t\tconst cellExecution = this._notebookExecutionStateService.getCellExecution(cell.uri);\n\t\t\t\treturn cellExecution && cellExecution.state === NotebookCellExecutionState.Executing;\n\t\t\t});\n\n\t\t\tconst runAllIcon = isRunning ?\n\t\t\t\tThemeIcon.modify(executingStateIcon, 'spin') :\n\t\t\t\tCodicon.play;\n\t\t\trunAllContainer.className = '';\n\t\t\trunAllContainer.classList.add('folded-cell-run-section-button', ...ThemeIcon.asClassNameArray(runAllIcon));\n\t\t});\n\n\t\treturn runAllContainer;\n\t}\n\n\toverride updateInternalLayoutNow(element: MarkupCellViewModel) {\n\t\tthis.update(element);\n\t}\n}\n"]}