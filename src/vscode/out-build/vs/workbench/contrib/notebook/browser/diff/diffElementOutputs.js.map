{"version":3,"sources":["vs/workbench/contrib/notebook/browser/diff/diffElementOutputs.ts"],"names":[],"mappings":"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","file":"diffElementOutputs.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../base/browser/dom.js';\nimport * as nls from '../../../../../nls.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { DiffElementCellViewModelBase, SideBySideDiffElementViewModel } from './diffElementViewModel.js';\nimport { DiffSide, INotebookTextDiffEditor } from './notebookDiffEditorBrowser.js';\nimport { ICellOutputViewModel, IInsetRenderOutput, RenderOutputType } from '../notebookBrowser.js';\nimport { NotebookTextModel } from '../../common/model/notebookTextModel.js';\nimport { NotebookCellOutputsSplice } from '../../common/notebookCommon.js';\nimport { INotebookService } from '../../common/notebookService.js';\nimport { DiffNestedCellViewModel } from './diffNestedCellViewModel.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { mimetypeIcon } from '../notebookIcons.js';\nimport { StandardKeyboardEvent } from '../../../../../base/browser/keyboardEvent.js';\nimport { KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../../platform/quickinput/common/quickInput.js';\n\ninterface IMimeTypeRenderer extends IQuickPickItem {\n\tindex: number;\n}\n\nexport class OutputElement extends Disposable {\n\treadonly resizeListener = this._register(new DisposableStore());\n\tdomNode!: HTMLElement;\n\trenderResult?: IInsetRenderOutput;\n\n\tconstructor(\n\t\tprivate _notebookEditor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _notebookService: INotebookService,\n\t\tprivate _quickInputService: IQuickInputService,\n\t\tprivate _diffElementViewModel: DiffElementCellViewModelBase,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _nestedCell: DiffNestedCellViewModel,\n\t\tprivate _outputContainer: HTMLElement,\n\t\treadonly output: ICellOutputViewModel\n\t) {\n\t\tsuper();\n\t}\n\n\trender(index: number, beforeElement?: HTMLElement) {\n\t\tconst outputItemDiv = document.createElement('div');\n\t\tlet result: IInsetRenderOutput | undefined = undefined;\n\n\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(this._notebookTextModel, undefined);\n\t\tconst pickedMimeTypeRenderer = this.output.pickedMimeType || mimeTypes[pick];\n\t\tif (mimeTypes.length > 1) {\n\t\t\toutputItemDiv.style.position = 'relative';\n\t\t\tconst mimeTypePicker = DOM.$('.multi-mimetype-output');\n\t\t\tmimeTypePicker.classList.add(...ThemeIcon.asClassNameArray(mimetypeIcon));\n\t\t\tmimeTypePicker.tabIndex = 0;\n\t\t\tmimeTypePicker.title = nls.localize('mimeTypePicker', \"Choose a different output mimetype, available mimetypes: {0}\", mimeTypes.map(mimeType => mimeType.mimeType).join(', '));\n\t\t\toutputItemDiv.appendChild(mimeTypePicker);\n\t\t\tthis.resizeListener.add(DOM.addStandardDisposableListener(mimeTypePicker, 'mousedown', async e => {\n\t\t\t\tif (e.leftButton) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(this._notebookTextModel, this.output);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.resizeListener.add((DOM.addDisposableListener(mimeTypePicker, DOM.EventType.KEY_DOWN, async e => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\tif ((event.equals(KeyCode.Enter) || event.equals(KeyCode.Space))) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(this._notebookTextModel, this.output);\n\t\t\t\t}\n\t\t\t})));\n\t\t}\n\n\t\tconst innerContainer = DOM.$('.output-inner-container');\n\t\tDOM.append(outputItemDiv, innerContainer);\n\n\n\t\tif (mimeTypes.length !== 0) {\n\t\t\tconst renderer = this._notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\t\t\tresult = renderer\n\t\t\t\t? { type: RenderOutputType.Extension, renderer, source: this.output, mimeType: pickedMimeTypeRenderer.mimeType }\n\t\t\t\t: this._renderMissingRenderer(this.output, pickedMimeTypeRenderer.mimeType);\n\n\t\t\tthis.output.pickedMimeType = pickedMimeTypeRenderer;\n\t\t}\n\n\t\tthis.domNode = outputItemDiv;\n\t\tthis.renderResult = result;\n\n\t\tif (!result) {\n\t\t\t// this.viewCell.updateOutputHeight(index, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeElement) {\n\t\t\tthis._outputContainer.insertBefore(outputItemDiv, beforeElement);\n\t\t} else {\n\t\t\tthis._outputContainer.appendChild(outputItemDiv);\n\t\t}\n\n\t\tthis._notebookEditor.createOutput(\n\t\t\tthis._diffElementViewModel,\n\t\t\tthis._nestedCell,\n\t\t\tresult,\n\t\t\t() => this.getOutputOffsetInCell(index),\n\t\t\tthis._diffElementViewModel instanceof SideBySideDiffElementViewModel\n\t\t\t\t? this._diffSide\n\t\t\t\t: this._diffElementViewModel.type === 'insert' ? DiffSide.Modified : DiffSide.Original\n\t\t);\n\t}\n\n\tprivate _renderMissingRenderer(viewModel: ICellOutputViewModel, preferredMimeType: string | undefined): IInsetRenderOutput {\n\t\tif (!viewModel.model.outputs.length) {\n\t\t\treturn this._renderMessage(viewModel, nls.localize('empty', \"Cell has no output\"));\n\t\t}\n\n\t\tif (!preferredMimeType) {\n\t\t\tconst mimeTypes = viewModel.model.outputs.map(op => op.mime);\n\t\t\tconst mimeTypesMessage = mimeTypes.join(', ');\n\t\t\treturn this._renderMessage(viewModel, nls.localize('noRenderer.2', \"No renderer could be found for output. It has the following mimetypes: {0}\", mimeTypesMessage));\n\t\t}\n\n\t\treturn this._renderSearchForMimetype(viewModel, preferredMimeType);\n\t}\n\n\tprivate _renderSearchForMimetype(viewModel: ICellOutputViewModel, mimeType: string): IInsetRenderOutput {\n\t\tconst query = `@tag:notebookRenderer ${mimeType}`;\n\n\t\tconst p = DOM.$('p', undefined, `No renderer could be found for mimetype \"${mimeType}\", but one might be available on the Marketplace.`);\n\t\tconst a = DOM.$('a', { href: `command:workbench.extensions.search?%22${query}%22`, class: 'monaco-button monaco-text-button', tabindex: 0, role: 'button', style: 'padding: 8px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(14, 99, 156); max-width: 200px;' }, `Search Marketplace`);\n\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: p.outerHTML + a.outerHTML,\n\t\t};\n\t}\n\n\tprivate _renderMessage(viewModel: ICellOutputViewModel, message: string): IInsetRenderOutput {\n\t\tconst el = DOM.$('p', undefined, message);\n\t\treturn { type: RenderOutputType.Html, source: viewModel, htmlContent: el.outerHTML };\n\t}\n\n\tprivate async pickActiveMimeTypeRenderer(notebookTextModel: NotebookTextModel, viewModel: ICellOutputViewModel) {\n\t\tconst [mimeTypes, currIndex] = viewModel.resolveMimeTypes(notebookTextModel, undefined);\n\n\t\tconst items = mimeTypes.filter(mimeType => mimeType.isTrusted).map((mimeType, index): IMimeTypeRenderer => ({\n\t\t\tlabel: mimeType.mimeType,\n\t\t\tid: mimeType.mimeType,\n\t\t\tindex: index,\n\t\t\tpicked: index === currIndex,\n\t\t\tdetail: this.generateRendererInfo(mimeType.rendererId),\n\t\t\tdescription: index === currIndex ? nls.localize('curruentActiveMimeType', \"Currently Active\") : undefined\n\t\t}));\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst picker = disposables.add(this._quickInputService.createQuickPick());\n\t\tpicker.items = items;\n\t\tpicker.activeItems = items.filter(item => !!item.picked);\n\t\tpicker.placeholder = items.length !== mimeTypes.length\n\t\t\t? nls.localize('promptChooseMimeTypeInSecure.placeHolder', \"Select mimetype to render for current output. Rich mimetypes are available only when the notebook is trusted\")\n\t\t\t: nls.localize('promptChooseMimeType.placeHolder', \"Select mimetype to render for current output\");\n\n\t\tconst pick = await new Promise<number | undefined>(resolve => {\n\t\t\tdisposables.add(picker.onDidAccept(() => {\n\t\t\t\tresolve(picker.selectedItems.length === 1 ? (picker.selectedItems[0] as IMimeTypeRenderer).index : undefined);\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\t\t\tpicker.show();\n\t\t});\n\n\t\tif (pick === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (pick !== currIndex) {\n\t\t\t// user chooses another mimetype\n\t\t\tconst index = this._nestedCell.outputsViewModels.indexOf(viewModel);\n\t\t\tconst nextElement = this.domNode.nextElementSibling;\n\t\t\tthis.resizeListener.clear();\n\t\t\tconst element = this.domNode;\n\t\t\tif (element) {\n\t\t\t\telement.remove();\n\t\t\t\tthis._notebookEditor.removeInset(\n\t\t\t\t\tthis._diffElementViewModel,\n\t\t\t\t\tthis._nestedCell,\n\t\t\t\t\tviewModel,\n\t\t\t\t\tthis._diffSide\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tviewModel.pickedMimeType = mimeTypes[pick];\n\t\t\tthis.render(index, nextElement as HTMLElement);\n\t\t}\n\t}\n\n\tprivate generateRendererInfo(renderId: string): string {\n\t\tconst renderInfo = this._notebookService.getRendererInfo(renderId);\n\n\t\tif (renderInfo) {\n\t\t\tconst displayName = renderInfo.displayName !== '' ? renderInfo.displayName : renderInfo.id;\n\t\t\treturn `${displayName} (${renderInfo.extensionId.value})`;\n\t\t}\n\n\t\treturn nls.localize('builtinRenderInfo', \"built-in\");\n\t}\n\n\tgetCellOutputCurrentIndex() {\n\t\treturn this._diffElementViewModel.getNestedCellViewModel(this._diffSide).outputs.indexOf(this.output.model);\n\t}\n\n\tupdateHeight(index: number, height: number) {\n\t\tthis._diffElementViewModel.updateOutputHeight(this._diffSide, index, height);\n\t}\n\n\tgetOutputOffsetInContainer(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t}\n\n\tgetOutputOffsetInCell(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInCell(this._diffSide, index);\n\t}\n}\n\nexport class OutputContainer extends Disposable {\n\tprivate _outputEntries = new Map<ICellOutputViewModel, OutputElement>();\n\tconstructor(\n\t\tprivate _editor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _diffElementViewModel: DiffElementCellViewModelBase,\n\t\tprivate _nestedCellViewModel: DiffNestedCellViewModel,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _outputContainer: HTMLElement,\n\t\t@INotebookService private _notebookService: INotebookService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t) {\n\t\tsuper();\n\t\tthis._register(this._diffElementViewModel.onDidLayoutChange(() => {\n\t\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\t\tconst index = _nestedCellViewModel.outputs.indexOf(key.model);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tconst top = this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t\t\t\t\tvalue.domNode.style.top = `${top}px`;\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this._nestedCellViewModel.textModel.onDidChangeOutputs(splice => {\n\t\t\tthis._updateOutputs(splice);\n\t\t}));\n\t}\n\n\tprivate _updateOutputs(splice: NotebookCellOutputsSplice) {\n\t\tconst removedKeys: ICellOutputViewModel[] = [];\n\n\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\tif (this._nestedCellViewModel.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t// already removed\n\t\t\t\tremovedKeys.push(key);\n\t\t\t\t// remove element from DOM\n\t\t\t\tvalue.domNode.remove();\n\t\t\t\tthis._editor.removeInset(this._diffElementViewModel, this._nestedCellViewModel, key, this._diffSide);\n\t\t\t}\n\t\t});\n\n\t\tremovedKeys.forEach(key => {\n\t\t\tthis._outputEntries.get(key)?.dispose();\n\t\t\tthis._outputEntries.delete(key);\n\t\t});\n\n\t\tlet prevElement: HTMLElement | undefined = undefined;\n\t\tconst outputsToRender = this._nestedCellViewModel.outputsViewModels;\n\n\t\toutputsToRender.reverse().forEach(output => {\n\t\t\tif (this._outputEntries.has(output)) {\n\t\t\t\t// already exist\n\t\t\t\tprevElement = this._outputEntries.get(output)!.domNode;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// newly added element\n\t\t\tconst currIndex = this._nestedCellViewModel.outputsViewModels.indexOf(output);\n\t\t\tthis._renderOutput(output, currIndex, prevElement);\n\t\t\tprevElement = this._outputEntries.get(output)?.domNode;\n\t\t});\n\t}\n\trender() {\n\t\t// TODO, outputs to render (should have a limit)\n\t\tfor (let index = 0; index < this._nestedCellViewModel.outputsViewModels.length; index++) {\n\t\t\tconst currOutput = this._nestedCellViewModel.outputsViewModels[index];\n\n\t\t\t// always add to the end\n\t\t\tthis._renderOutput(currOutput, index, undefined);\n\t\t}\n\t}\n\n\tshowOutputs() {\n\t\tfor (let index = 0; index < this._nestedCellViewModel.outputsViewModels.length; index++) {\n\t\t\tconst currOutput = this._nestedCellViewModel.outputsViewModels[index];\n\t\t\t// always add to the end\n\t\t\tthis._editor.showInset(this._diffElementViewModel, currOutput.cellViewModel, currOutput, this._diffSide);\n\t\t}\n\t}\n\n\thideOutputs() {\n\t\tthis._outputEntries.forEach((outputElement, cellOutputViewModel) => {\n\t\t\tthis._editor.hideInset(this._diffElementViewModel, this._nestedCellViewModel, cellOutputViewModel);\n\t\t});\n\t}\n\n\tprivate _renderOutput(currOutput: ICellOutputViewModel, index: number, beforeElement?: HTMLElement) {\n\t\tif (!this._outputEntries.has(currOutput)) {\n\t\t\tthis._outputEntries.set(currOutput, new OutputElement(this._editor, this._notebookTextModel, this._notebookService, this._quickInputService, this._diffElementViewModel, this._diffSide, this._nestedCellViewModel, this._outputContainer, currOutput));\n\t\t}\n\n\t\tconst renderElement = this._outputEntries.get(currOutput)!;\n\t\trenderElement.render(index, beforeElement);\n\t}\n}\n"]}