{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/diff/inlineDiff/notebookOriginalCellModelFactory.ts","vs/workbench/contrib/notebook/browser/diff/inlineDiff/notebookOriginalCellModelFactory.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAc,mBAAmB,EAAE,MAAM,4CAA4C,CAAC;AAC7F,OAAO,EAAE,eAAe,EAAE,qBAAqB,EAAE,MAAM,kEAAkE,CAAC;AAE1H,OAAO,EAAE,QAAQ,EAAE,MAAM,mCAAmC,CAAC;AAC7D,OAAO,EAAE,GAAG,EAAE,MAAM,sCAAsC,CAAC;AAC3D,OAAO,EAAE,gBAAgB,EAAE,MAAM,uDAAuD,CAAC;AACzF,OAAO,EAAE,aAAa,EAAE,MAAM,mDAAmD,CAAC;AAGlF,MAAM,CAAC,MAAM,iCAAiC,GAAG,eAAe,CAAoC,mCAAmC,CAAC,CAAC;AAQlI,IAAM,4CAA4C,GAAlD,MAAM,4CAA6C,SAAQ,mBAA+B;IAChG,YAA4C,YAA2B,EACnC,gBAAkC;QAErE,KAAK,EAAE,CAAC;QAHmC,iBAAY,GAAZ,YAAY,CAAe;QACnC,qBAAgB,GAAhB,gBAAgB,CAAkB;IAGtE,CAAC;IAEkB,sBAAsB,CAAC,IAAY,EAAE,GAAQ,EAAE,SAAiB,EAAE,QAAgB,EAAE,QAAkB;QACxH,MAAM,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,YAAY,CAAC;QACzC,MAAM,eAAe,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;QACrF,MAAM,iBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC,2BAA2B,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QACxN,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,SAAS,EAAE,iBAAiB,EAAE,eAAe,CAAC,CAAC;IACrF,CAAC;IACkB,uBAAuB,CAAC,IAAY,EAAE,KAAiB;QACzE,KAAK,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;CACD,CAAA;AAhBY,4CAA4C;IAC3C,WAAA,aAAa,CAAA;IACxB,WAAA,gBAAgB,CAAA;GAFN,4CAA4C,CAgBxD;;AAEM,IAAM,gCAAgC,GAAtC,MAAM,gCAAgC;IAG5C,YAAmC,oBAA2C;QAC7E,IAAI,CAAC,KAAK,GAAG,oBAAoB,CAAC,cAAc,CAAC,4CAA4C,CAAC,CAAC;IAChG,CAAC;IAED,WAAW,CAAC,GAAQ,EAAE,SAAiB,EAAE,QAAgB,EAAE,QAAkB;QAC5E,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAC/E,CAAC;CACD,CAAA;AAVY,gCAAgC;IAG/B,WAAA,qBAAqB,CAAA;GAHtB,gCAAgC,CAU5C","file":"notebookOriginalCellModelFactory.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IReference, ReferenceCollection } from '../../../../../../base/common/lifecycle.js';\nimport { createDecorator, IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { CellKind } from '../../../common/notebookCommon.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../../../../editor/common/services/model.js';\n\n\nexport const INotebookOriginalCellModelFactory = createDecorator<INotebookOriginalCellModelFactory>('INotebookOriginalCellModelFactory');\n\nexport interface INotebookOriginalCellModelFactory {\n\treadonly _serviceBrand: undefined;\n\tgetOrCreate(uri: URI, cellValue: string, language: string, cellKind: CellKind): IReference<ITextModel>;\n}\n\n\nexport class OriginalNotebookCellModelReferenceCollection extends ReferenceCollection<ITextModel> {\n\tconstructor(@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\t}\n\n\tprotected override createReferencedObject(_key: string, uri: URI, cellValue: string, language: string, cellKind: CellKind): ITextModel {\n\t\tconst scheme = `${uri.scheme}-chat-edit`;\n\t\tconst originalCellUri = URI.from({ scheme, fragment: uri.fragment, path: uri.path });\n\t\tconst languageSelection = this._languageService.getLanguageIdByLanguageName(language) ? this._languageService.createById(language) : cellKind === CellKind.Markup ? this._languageService.createById('markdown') : null;\n\t\treturn this.modelService.createModel(cellValue, languageSelection, originalCellUri);\n\t}\n\tprotected override destroyReferencedObject(_key: string, model: ITextModel): void {\n\t\tmodel.dispose();\n\t}\n}\n\nexport class OriginalNotebookCellModelFactory implements INotebookOriginalCellModelFactory {\n\treadonly _serviceBrand: undefined;\n\tprivate readonly _data: OriginalNotebookCellModelReferenceCollection;\n\tconstructor(@IInstantiationService instantiationService: IInstantiationService) {\n\t\tthis._data = instantiationService.createInstance(OriginalNotebookCellModelReferenceCollection);\n\t}\n\n\tgetOrCreate(uri: URI, cellValue: string, language: string, cellKind: CellKind): IReference<ITextModel> {\n\t\treturn this._data.acquire(uri.toString(), uri, cellValue, language, cellKind);\n\t}\n}\n\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IReference, ReferenceCollection } from '../../../../../../base/common/lifecycle.js';\nimport { createDecorator, IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { CellKind } from '../../../common/notebookCommon.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../../../../editor/common/services/model.js';\n\n\nexport const INotebookOriginalCellModelFactory = createDecorator<INotebookOriginalCellModelFactory>('INotebookOriginalCellModelFactory');\n\nexport interface INotebookOriginalCellModelFactory {\n\treadonly _serviceBrand: undefined;\n\tgetOrCreate(uri: URI, cellValue: string, language: string, cellKind: CellKind): IReference<ITextModel>;\n}\n\n\nexport class OriginalNotebookCellModelReferenceCollection extends ReferenceCollection<ITextModel> {\n\tconstructor(@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\t}\n\n\tprotected override createReferencedObject(_key: string, uri: URI, cellValue: string, language: string, cellKind: CellKind): ITextModel {\n\t\tconst scheme = `${uri.scheme}-chat-edit`;\n\t\tconst originalCellUri = URI.from({ scheme, fragment: uri.fragment, path: uri.path });\n\t\tconst languageSelection = this._languageService.getLanguageIdByLanguageName(language) ? this._languageService.createById(language) : cellKind === CellKind.Markup ? this._languageService.createById('markdown') : null;\n\t\treturn this.modelService.createModel(cellValue, languageSelection, originalCellUri);\n\t}\n\tprotected override destroyReferencedObject(_key: string, model: ITextModel): void {\n\t\tmodel.dispose();\n\t}\n}\n\nexport class OriginalNotebookCellModelFactory implements INotebookOriginalCellModelFactory {\n\treadonly _serviceBrand: undefined;\n\tprivate readonly _data: OriginalNotebookCellModelReferenceCollection;\n\tconstructor(@IInstantiationService instantiationService: IInstantiationService) {\n\t\tthis._data = instantiationService.createInstance(OriginalNotebookCellModelReferenceCollection);\n\t}\n\n\tgetOrCreate(uri: URI, cellValue: string, language: string, cellKind: CellKind): IReference<ITextModel> {\n\t\treturn this._data.acquire(uri.toString(), uri, cellValue, language, cellKind);\n\t}\n}\n\n\n"]}