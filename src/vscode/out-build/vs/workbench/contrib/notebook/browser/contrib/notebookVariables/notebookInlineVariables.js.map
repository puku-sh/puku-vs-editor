{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/notebookVariables/notebookInlineVariables.ts"],"names":[],"mappings":"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","file":"notebookInlineVariables.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationTokenSource } from '../../../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../../../base/common/errors.js';\nimport { Event } from '../../../../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../../../base/common/map.js';\nimport { isEqual } from '../../../../../../base/common/resources.js';\nimport { format } from '../../../../../../base/common/strings.js';\nimport { Position } from '../../../../../../editor/common/core/position.js';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { StandardTokenType } from '../../../../../../editor/common/encodedTokenAttributes.js';\nimport { InlineValueContext, InlineValueText, InlineValueVariableLookup } from '../../../../../../editor/common/languages.js';\nimport { IModelDeltaDecoration, ITextModel } from '../../../../../../editor/common/model.js';\nimport { ILanguageFeaturesService } from '../../../../../../editor/common/services/languageFeatures.js';\nimport { localize } from '../../../../../../nls.js';\nimport { registerAction2 } from '../../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { ServicesAccessor } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { createInlineValueDecoration } from '../../../../debug/browser/debugEditorContribution.js';\nimport { IDebugService, State } from '../../../../debug/common/debug.js';\nimport { NotebookSetting } from '../../../common/notebookCommon.js';\nimport { ICellExecutionStateChangedEvent, INotebookExecutionStateService, NotebookExecutionType } from '../../../common/notebookExecutionStateService.js';\nimport { INotebookKernelService, VariablesResult } from '../../../common/notebookKernelService.js';\nimport { INotebookActionContext, NotebookAction } from '../../controller/coreActions.js';\nimport { ICellViewModel, INotebookEditor, INotebookEditorContribution } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\n\nclass InlineSegment {\n\tconstructor(public column: number, public text: string) {\n\t}\n}\n\nexport class NotebookInlineVariablesController extends Disposable implements INotebookEditorContribution {\n\n\tstatic readonly id: string = 'notebook.inlineVariablesController';\n\n\tprivate cellDecorationIds = new Map<ICellViewModel, string[]>();\n\tprivate cellContentListeners = new ResourceMap<IDisposable>();\n\n\tprivate currentCancellationTokenSources = new ResourceMap<CancellationTokenSource>();\n\n\tprivate static readonly MAX_CELL_LINES = 5000; // Skip extremely large cells\n\n\tconstructor(\n\t\tprivate readonly notebookEditor: INotebookEditor,\n\t\t@INotebookKernelService private readonly notebookKernelService: INotebookKernelService,\n\t\t@INotebookExecutionStateService private readonly notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@ILanguageFeaturesService private readonly languageFeaturesService: ILanguageFeaturesService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this.notebookExecutionStateService.onDidChangeExecution(async e => {\n\t\t\tconst inlineValuesSetting = this.configurationService.getValue<'on' | 'auto' | 'off'>(NotebookSetting.notebookInlineValues);\n\t\t\tif (inlineValuesSetting === 'off') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.type === NotebookExecutionType.cell) {\n\t\t\t\tawait this.updateInlineVariables(e);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.runAndSubscribe(this.configurationService.onDidChangeConfiguration, e => {\n\t\t\tif (!e || e.affectsConfiguration(NotebookSetting.notebookInlineValues)) {\n\t\t\t\tif (this.configurationService.getValue<'on' | 'auto' | 'off'>(NotebookSetting.notebookInlineValues) === 'off') {\n\t\t\t\t\tthis.clearNotebookInlineDecorations();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async updateInlineVariables(event: ICellExecutionStateChangedEvent): Promise<void> {\n\t\tif (event.changed) { // undefined -> execution was completed, so return on all else. no code should execute until we know it's an execution completion\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = this.notebookEditor.getCellByHandle(event.cellHandle);\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Cancel any ongoing request in this cell\n\t\tconst existingSource = this.currentCancellationTokenSources.get(cell.uri);\n\t\tif (existingSource) {\n\t\t\texistingSource.cancel();\n\t\t}\n\n\t\t// Create a new CancellationTokenSource for the new request per cell\n\t\tthis.currentCancellationTokenSources.set(cell.uri, new CancellationTokenSource());\n\t\tconst token = this.currentCancellationTokenSources.get(cell.uri)!.token;\n\n\t\tif (this.debugService.state !== State.Inactive) {\n\t\t\tthis._clearNotebookInlineDecorations();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.notebookEditor.textModel?.uri || !isEqual(this.notebookEditor.textModel.uri, event.notebook)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = await cell.resolveTextModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst inlineValuesSetting = this.configurationService.getValue<'on' | 'auto' | 'off'>(NotebookSetting.notebookInlineValues);\n\t\tconst hasInlineValueProvider = this.languageFeaturesService.inlineValuesProvider.has(model);\n\n\t\t// Skip if setting is off or if auto and no provider is registered\n\t\tif (inlineValuesSetting === 'off' || (inlineValuesSetting === 'auto' && !hasInlineValueProvider)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearCellInlineDecorations(cell);\n\n\t\tconst inlineDecorations: IModelDeltaDecoration[] = [];\n\n\t\tif (hasInlineValueProvider) {\n\t\t\t// use extension based provider, borrowed from https://github.com/microsoft/vscode/blob/main/src/vs/workbench/contrib/debug/browser/debugEditorContribution.ts#L679\n\t\t\tconst lastLine = model.getLineCount();\n\t\t\tconst lastColumn = model.getLineMaxColumn(lastLine);\n\t\t\tconst ctx: InlineValueContext = {\n\t\t\t\tframeId: 0, // ignored, we won't have a stack from since not in a debug session\n\t\t\t\tstoppedLocation: new Range(lastLine, lastColumn, lastLine, lastColumn) // executing cell by cell, so \"stopped\" location would just be the end of document\n\t\t\t};\n\n\t\t\tconst providers = this.languageFeaturesService.inlineValuesProvider.ordered(model).reverse();\n\t\t\tconst lineDecorations = new Map<number, InlineSegment[]>();\n\n\t\t\tconst fullCellRange = new Range(1, 1, lastLine, lastColumn);\n\n\t\t\tconst promises = providers.flatMap(provider => Promise.resolve(provider.provideInlineValues(model, fullCellRange, ctx, token)).then(async (result) => {\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst notebook = this.notebookEditor.textModel;\n\t\t\t\tif (!notebook) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst kernel = this.notebookKernelService.getMatchingKernel(notebook);\n\t\t\t\tconst kernelVars: VariablesResult[] = [];\n\t\t\t\tif (result.some(iv => iv.type === 'variable')) { // if anyone will need a lookup, get vars now to avoid needing to do it multiple times\n\t\t\t\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\t\t\t\treturn; // should not happen, a cell will be executed\n\t\t\t\t\t}\n\t\t\t\t\tconst variables = kernel.selected?.provideVariables(event.notebook, undefined, 'named', 0, token);\n\t\t\t\t\tif (variables) {\n\t\t\t\t\t\tfor await (const v of variables) {\n\t\t\t\t\t\t\tkernelVars.push(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const iv of result) {\n\t\t\t\t\tlet text: string | undefined = undefined;\n\t\t\t\t\tswitch (iv.type) {\n\t\t\t\t\t\tcase 'text':\n\t\t\t\t\t\t\ttext = (iv as InlineValueText).text;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'variable': {\n\t\t\t\t\t\t\tconst name = (iv as InlineValueVariableLookup).variableName;\n\t\t\t\t\t\t\tif (!name) {\n\t\t\t\t\t\t\t\tcontinue; // skip to next var, no valid name to lookup with\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst value = kernelVars.find(v => v.name === name)?.value;\n\t\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttext = format('{0} = {1}', name, value);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase 'expression': {\n\t\t\t\t\t\t\tcontinue; // no active debug session, so evaluate would break\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (text) {\n\t\t\t\t\t\tconst line = iv.range.startLineNumber;\n\t\t\t\t\t\tlet lineSegments = lineDecorations.get(line);\n\t\t\t\t\t\tif (!lineSegments) {\n\t\t\t\t\t\t\tlineSegments = [];\n\t\t\t\t\t\t\tlineDecorations.set(line, lineSegments);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!lineSegments.some(iv => iv.text === text)) { // de-dupe\n\t\t\t\t\t\t\tlineSegments.push(new InlineSegment(iv.range.startColumn, text));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, err => {\n\t\t\t\tonUnexpectedExternalError(err);\n\t\t\t}));\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// sort line segments and concatenate them into a decoration\n\t\t\tlineDecorations.forEach((segments, line) => {\n\t\t\t\tif (segments.length > 0) {\n\t\t\t\t\tsegments.sort((a, b) => a.column - b.column);\n\t\t\t\t\tconst text = segments.map(s => s.text).join(', ');\n\t\t\t\t\tconst editorWidth = cell.layoutInfo.editorWidth;\n\t\t\t\t\tconst fontInfo = cell.layoutInfo.fontInfo;\n\t\t\t\t\tif (fontInfo && cell.textModel) {\n\t\t\t\t\t\tconst base = Math.floor((editorWidth - 50) / fontInfo.typicalHalfwidthCharacterWidth);\n\t\t\t\t\t\tconst lineLength = cell.textModel.getLineLength(line);\n\t\t\t\t\t\tconst available = Math.max(0, base - lineLength);\n\t\t\t\t\t\tinlineDecorations.push(...createInlineValueDecoration(line, text, 'nb', undefined, available));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinlineDecorations.push(...createInlineValueDecoration(line, text, 'nb'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else if (inlineValuesSetting === 'on') { // fallback approach only when setting is 'on'\n\t\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\t\treturn; // should not happen, a cell will be executed\n\t\t\t}\n\t\t\tconst kernel = this.notebookKernelService.getMatchingKernel(this.notebookEditor.textModel);\n\t\t\tconst variables = kernel?.selected?.provideVariables(event.notebook, undefined, 'named', 0, token);\n\t\t\tif (!variables) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst vars: VariablesResult[] = [];\n\t\t\tfor await (const v of variables) {\n\t\t\t\tvars.push(v);\n\t\t\t}\n\t\t\tconst varNames: string[] = vars.map(v => v.name);\n\n\t\t\tconst document = cell.textModel;\n\t\t\tif (!document) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Skip processing for extremely large cells\n\t\t\tif (document.getLineCount() > NotebookInlineVariablesController.MAX_CELL_LINES) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst processedVars = new Set<string>();\n\n\t\t\t// Get both function ranges and comment ranges\n\t\t\tconst functionRanges = this.getFunctionRanges(document);\n\t\t\tconst commentedRanges = this.getCommentedRanges(document);\n\t\t\tconst ignoredRanges = [...functionRanges, ...commentedRanges];\n\t\t\tconst lineDecorations = new Map<number, InlineSegment[]>();\n\n\t\t\t// For each variable name found in the kernel results\n\t\t\tfor (const varName of varNames) {\n\t\t\t\tif (processedVars.has(varName)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Look for variable usage globally - using word boundaries to ensure exact matches\n\t\t\t\tconst regex = new RegExp(`\\\\b${varName}\\\\b(?!\\\\w)`, 'g');\n\t\t\t\tlet lastMatchOutsideIgnored: { line: number; column: number } | null = null;\n\t\t\t\tlet foundMatch = false;\n\n\t\t\t\t// Scan lines in reverse to find last occurrence first\n\t\t\t\tconst lines = document.getValue().split('\\n');\n\t\t\t\tfor (let lineNumber = lines.length - 1; lineNumber >= 0; lineNumber--) {\n\t\t\t\t\tconst line = lines[lineNumber];\n\t\t\t\t\tlet match: RegExpExecArray | null;\n\n\t\t\t\t\twhile ((match = regex.exec(line)) !== null) {\n\t\t\t\t\t\tconst startIndex = match.index;\n\t\t\t\t\t\tconst pos = new Position(lineNumber + 1, startIndex + 1);\n\n\t\t\t\t\t\t// Check if this position is in any ignored range (function or comment)\n\t\t\t\t\t\tif (!this.isPositionInRanges(pos, ignoredRanges)) {\n\t\t\t\t\t\t\tlastMatchOutsideIgnored = {\n\t\t\t\t\t\t\t\tline: lineNumber + 1,\n\t\t\t\t\t\t\t\tcolumn: startIndex + 1\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tfoundMatch = true;\n\t\t\t\t\t\t\tbreak; // Take first match in reverse order (which is last chronologically)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (foundMatch) {\n\t\t\t\t\t\tbreak; // We found our last valid occurrence, no need to check earlier lines\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lastMatchOutsideIgnored) {\n\t\t\t\t\tconst inlineVal = varName + ' = ' + vars.find(v => v.name === varName)?.value;\n\n\t\t\t\t\tlet lineSegments = lineDecorations.get(lastMatchOutsideIgnored.line);\n\t\t\t\t\tif (!lineSegments) {\n\t\t\t\t\t\tlineSegments = [];\n\t\t\t\t\t\tlineDecorations.set(lastMatchOutsideIgnored.line, lineSegments);\n\t\t\t\t\t}\n\t\t\t\t\tif (!lineSegments.some(iv => iv.text === inlineVal)) { // de-dupe\n\t\t\t\t\t\tlineSegments.push(new InlineSegment(lastMatchOutsideIgnored.column, inlineVal));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprocessedVars.add(varName);\n\t\t\t}\n\n\t\t\t// sort line segments and concatenate them into a decoration\n\t\t\tlineDecorations.forEach((segments, line) => {\n\t\t\t\tif (segments.length > 0) {\n\t\t\t\t\tsegments.sort((a, b) => a.column - b.column);\n\t\t\t\t\tconst text = segments.map(s => s.text).join(', ');\n\t\t\t\t\tconst editorWidth = cell.layoutInfo.editorWidth;\n\t\t\t\t\tconst fontInfo = cell.layoutInfo.fontInfo;\n\t\t\t\t\tif (fontInfo && cell.textModel) {\n\t\t\t\t\t\tconst base = Math.floor((editorWidth - 50) / fontInfo.typicalHalfwidthCharacterWidth);\n\t\t\t\t\t\tconst lineLength = cell.textModel.getLineLength(line);\n\t\t\t\t\t\tconst available = Math.max(0, base - lineLength);\n\t\t\t\t\t\tinlineDecorations.push(...createInlineValueDecoration(line, text, 'nb', undefined, available));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinlineDecorations.push(...createInlineValueDecoration(line, text, 'nb'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (inlineDecorations.length > 0) {\n\t\t\tthis.updateCellInlineDecorations(cell, inlineDecorations);\n\t\t\tthis.initCellContentListener(cell);\n\t\t}\n\t}\n\n\tprivate getFunctionRanges(document: ITextModel): Range[] {\n\t\treturn document.getLanguageId() === 'python'\n\t\t\t? this.getPythonFunctionRanges(document.getValue())\n\t\t\t: this.getBracedFunctionRanges(document.getValue());\n\t}\n\n\tprivate getPythonFunctionRanges(code: string): Range[] {\n\t\tconst functionRanges: Range[] = [];\n\t\tconst lines = code.split('\\n');\n\t\tlet functionStartLine = -1;\n\t\tlet inFunction = false;\n\t\tlet pythonIndentLevel = -1;\n\t\tconst pythonFunctionDeclRegex = /^(\\s*)(async\\s+)?(?:def\\s+\\w+|class\\s+\\w+)\\s*\\([^)]*\\)\\s*:/;\n\n\t\tfor (let lineNumber = 0; lineNumber < lines.length; lineNumber++) {\n\t\t\tconst line = lines[lineNumber];\n\n\t\t\t// Check for Python function/class declarations\n\t\t\tconst pythonMatch = line.match(pythonFunctionDeclRegex);\n\t\t\tif (pythonMatch) {\n\t\t\t\tif (inFunction) {\n\t\t\t\t\t// If we're already in a function and find another at the same or lower indent, close the current one\n\t\t\t\t\tconst currentIndent = pythonMatch[1].length;\n\t\t\t\t\tif (currentIndent <= pythonIndentLevel) {\n\t\t\t\t\t\tfunctionRanges.push(new Range(functionStartLine + 1, 1, lineNumber, line.length + 1));\n\t\t\t\t\t\tinFunction = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!inFunction) {\n\t\t\t\t\tinFunction = true;\n\t\t\t\t\tfunctionStartLine = lineNumber;\n\t\t\t\t\tpythonIndentLevel = pythonMatch[1].length;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check indentation for Python functions\n\t\t\tif (inFunction) {\n\t\t\t\t// Skip empty lines\n\t\t\t\tif (line.trim() === '') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Get the indentation of the current line\n\t\t\t\tconst currentIndent = line.match(/^\\s*/)?.[0].length ?? 0;\n\n\t\t\t\t// If we hit a line with same or lower indentation than where the function started,\n\t\t\t\t// we've exited the function\n\t\t\t\tif (currentIndent <= pythonIndentLevel) {\n\t\t\t\t\tfunctionRanges.push(new Range(functionStartLine + 1, 1, lineNumber, line.length + 1));\n\t\t\t\t\tinFunction = false;\n\t\t\t\t\tpythonIndentLevel = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Handle case where Python function is at the end of the document\n\t\tif (inFunction) {\n\t\t\tfunctionRanges.push(new Range(functionStartLine + 1, 1, lines.length, lines[lines.length - 1].length + 1));\n\t\t}\n\n\t\treturn functionRanges;\n\t}\n\n\tprivate getBracedFunctionRanges(code: string): Range[] {\n\t\tconst functionRanges: Range[] = [];\n\t\tconst lines = code.split('\\n');\n\t\tlet braceDepth = 0;\n\t\tlet functionStartLine = -1;\n\t\tlet inFunction = false;\n\t\tconst functionDeclRegex = /\\b(?:function\\s+\\w+|(?:async\\s+)?(?:\\w+\\s*=\\s*)?\\([^)]*\\)\\s*=>|class\\s+\\w+|(?:public|private|protected|static)?\\s*\\w+\\s*\\([^)]*\\)\\s*{)/;\n\n\t\tfor (let lineNumber = 0; lineNumber < lines.length; lineNumber++) {\n\t\t\tconst line = lines[lineNumber];\n\t\t\tfor (const char of line) {\n\t\t\t\tif (char === '{') {\n\t\t\t\t\tif (!inFunction && functionDeclRegex.test(line)) {\n\t\t\t\t\t\tinFunction = true;\n\t\t\t\t\t\tfunctionStartLine = lineNumber;\n\t\t\t\t\t}\n\t\t\t\t\tbraceDepth++;\n\t\t\t\t} else if (char === '}') {\n\t\t\t\t\tbraceDepth--;\n\t\t\t\t\tif (braceDepth === 0 && inFunction) {\n\t\t\t\t\t\tfunctionRanges.push(new Range(functionStartLine + 1, 1, lineNumber + 1, line.length + 1));\n\t\t\t\t\t\tinFunction = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn functionRanges;\n\t}\n\n\tprivate getCommentedRanges(document: ITextModel): Range[] {\n\t\treturn this._getCommentedRanges(document);\n\t}\n\n\tprivate _getCommentedRanges(document: ITextModel): Range[] {\n\t\ttry {\n\t\t\treturn this.getCommentedRangesByAccurateTokenization(document);\n\t\t} catch (e) {\n\t\t\t// Fall back to manual parsing if tokenization fails\n\t\t\treturn this.getCommentedRangesByManualParsing(document);\n\t\t}\n\t}\n\n\tprivate getCommentedRangesByAccurateTokenization(document: ITextModel): Range[] {\n\t\tconst commentRanges: Range[] = [];\n\t\tconst lineCount = document.getLineCount();\n\n\t\t// Skip processing for extremely large documents\n\t\tif (lineCount > NotebookInlineVariablesController.MAX_CELL_LINES) {\n\t\t\treturn commentRanges;\n\t\t}\n\n\t\t// Process each line - force tokenization if needed and process tokens in a single pass\n\t\tfor (let lineNumber = 1; lineNumber <= lineCount; lineNumber++) {\n\t\t\t// Force tokenization if needed\n\t\t\tif (!document.tokenization.hasAccurateTokensForLine(lineNumber)) {\n\t\t\t\tdocument.tokenization.forceTokenization(lineNumber);\n\t\t\t}\n\n\t\t\tconst lineTokens = document.tokenization.getLineTokens(lineNumber);\n\n\t\t\t// Skip lines with no tokens\n\t\t\tif (lineTokens.getCount() === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet startCharacter: number | undefined;\n\n\t\t\t// Check each token in the line\n\t\t\tfor (let tokenIndex = 0; tokenIndex < lineTokens.getCount(); tokenIndex++) {\n\t\t\t\tconst tokenType = lineTokens.getStandardTokenType(tokenIndex);\n\n\t\t\t\tif (tokenType === StandardTokenType.Comment || tokenType === StandardTokenType.String || tokenType === StandardTokenType.RegEx) {\n\t\t\t\t\tif (startCharacter === undefined) {\n\t\t\t\t\t\t// Start of a comment or string\n\t\t\t\t\t\tstartCharacter = lineTokens.getStartOffset(tokenIndex);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst endCharacter = lineTokens.getEndOffset(tokenIndex);\n\n\t\t\t\t\t// Check if this is the end of the comment/string section (either end of line or different token type follows)\n\t\t\t\t\tconst isLastToken = tokenIndex === lineTokens.getCount() - 1;\n\t\t\t\t\tconst nextTokenDifferent = !isLastToken &&\n\t\t\t\t\t\tlineTokens.getStandardTokenType(tokenIndex + 1) !== tokenType;\n\n\t\t\t\t\tif (isLastToken || nextTokenDifferent) {\n\t\t\t\t\t\t// End of comment/string section\n\t\t\t\t\t\tcommentRanges.push(new Range(lineNumber, startCharacter + 1, lineNumber, endCharacter + 1));\n\t\t\t\t\t\tstartCharacter = undefined;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Reset when we hit a non-comment, non-string token\n\t\t\t\t\tstartCharacter = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn commentRanges;\n\t}\n\n\tprivate getCommentedRangesByManualParsing(document: ITextModel): Range[] {\n\t\tconst commentRanges: Range[] = [];\n\t\tconst lines = document.getValue().split('\\n');\n\t\tconst languageId = document.getLanguageId();\n\n\t\t// Different comment patterns by language\n\t\tconst lineCommentToken =\n\t\t\tlanguageId === 'python' ? '#' :\n\t\t\t\tlanguageId === 'javascript' || languageId === 'typescript' ? '//' :\n\t\t\t\t\tnull;\n\n\t\tconst blockComments =\n\t\t\t(languageId === 'javascript' || languageId === 'typescript') ? { start: '/*', end: '*/' } :\n\t\t\t\tnull;\n\n\t\tlet inBlockComment = false;\n\t\tlet blockCommentStartLine = -1;\n\t\tlet blockCommentStartCol = -1;\n\n\t\tfor (let lineNumber = 0; lineNumber < lines.length; lineNumber++) {\n\t\t\tconst line = lines[lineNumber];\n\t\t\tconst trimmedLine = line.trim();\n\n\t\t\t// Skip empty lines\n\t\t\tif (trimmedLine.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (blockComments) {\n\t\t\t\tif (!inBlockComment) {\n\t\t\t\t\tconst startIndex = line.indexOf(blockComments.start);\n\t\t\t\t\tif (startIndex !== -1) {\n\t\t\t\t\t\tinBlockComment = true;\n\t\t\t\t\t\tblockCommentStartLine = lineNumber;\n\t\t\t\t\t\tblockCommentStartCol = startIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (inBlockComment) {\n\t\t\t\t\tconst endIndex = line.indexOf(blockComments.end);\n\t\t\t\t\tif (endIndex !== -1) {\n\t\t\t\t\t\tcommentRanges.push(new Range(\n\t\t\t\t\t\t\tblockCommentStartLine + 1,\n\t\t\t\t\t\t\tblockCommentStartCol + 1,\n\t\t\t\t\t\t\tlineNumber + 1,\n\t\t\t\t\t\t\tendIndex + blockComments.end.length + 1\n\t\t\t\t\t\t));\n\t\t\t\t\t\tinBlockComment = false;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!inBlockComment && lineCommentToken && line.trimLeft().startsWith(lineCommentToken)) {\n\t\t\t\tconst startCol = line.indexOf(lineCommentToken);\n\t\t\t\tcommentRanges.push(new Range(\n\t\t\t\t\tlineNumber + 1,\n\t\t\t\t\tstartCol + 1,\n\t\t\t\t\tlineNumber + 1,\n\t\t\t\t\tline.length + 1\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\t// Handle block comment at end of file\n\t\tif (inBlockComment) {\n\t\t\tcommentRanges.push(new Range(\n\t\t\t\tblockCommentStartLine + 1,\n\t\t\t\tblockCommentStartCol + 1,\n\t\t\t\tlines.length,\n\t\t\t\tlines[lines.length - 1].length + 1\n\t\t\t));\n\t\t}\n\n\t\treturn commentRanges;\n\t}\n\n\tprivate isPositionInRanges(position: Position, ranges: Range[]): boolean {\n\t\treturn ranges.some(range => range.containsPosition(position));\n\t}\n\n\tprivate updateCellInlineDecorations(cell: ICellViewModel, decorations: IModelDeltaDecoration[]) {\n\t\tconst oldDecorations = this.cellDecorationIds.get(cell) ?? [];\n\t\tthis.cellDecorationIds.set(cell, cell.deltaModelDecorations(\n\t\t\toldDecorations,\n\t\t\tdecorations\n\t\t));\n\t}\n\n\tprivate initCellContentListener(cell: ICellViewModel) {\n\t\tconst cellModel = cell.textModel;\n\t\tif (!cellModel) {\n\t\t\treturn; // should not happen\n\t\t}\n\n\t\t// Clear decorations on content change\n\t\tthis.cellContentListeners.set(cell.uri, cellModel.onDidChangeContent(() => {\n\t\t\tthis.clearCellInlineDecorations(cell);\n\t\t}));\n\t}\n\n\tprivate clearCellInlineDecorations(cell: ICellViewModel) {\n\t\tconst cellDecorations = this.cellDecorationIds.get(cell) ?? [];\n\t\tif (cellDecorations) {\n\t\t\tcell.deltaModelDecorations(cellDecorations, []);\n\t\t\tthis.cellDecorationIds.delete(cell);\n\t\t}\n\n\t\tconst listener = this.cellContentListeners.get(cell.uri);\n\t\tif (listener) {\n\t\t\tlistener.dispose();\n\t\t\tthis.cellContentListeners.delete(cell.uri);\n\t\t}\n\t}\n\n\tprivate _clearNotebookInlineDecorations() {\n\t\tthis.cellDecorationIds.forEach((_, cell) => {\n\t\t\tthis.clearCellInlineDecorations(cell);\n\t\t});\n\t}\n\n\tpublic clearNotebookInlineDecorations() {\n\t\tthis._clearNotebookInlineDecorations();\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._clearNotebookInlineDecorations();\n\t\tthis.currentCancellationTokenSources.forEach(source => source.cancel());\n\t\tthis.currentCancellationTokenSources.clear();\n\t\tthis.cellContentListeners.forEach(listener => listener.dispose());\n\t\tthis.cellContentListeners.clear();\n\t}\n}\n\nregisterNotebookContribution(NotebookInlineVariablesController.id, NotebookInlineVariablesController);\n\nregisterAction2(class ClearNotebookInlineValues extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.clearAllInlineValues',\n\t\t\ttitle: localize('clearAllInlineValues', 'Clear All Inline Values'),\n\t\t});\n\t}\n\n\toverride runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst editor = context.notebookEditor;\n\t\tconst controller = editor.getContribution<NotebookInlineVariablesController>(NotebookInlineVariablesController.id);\n\t\tcontroller.clearNotebookInlineDecorations();\n\t\treturn Promise.resolve();\n\t}\n\n});\n"]}