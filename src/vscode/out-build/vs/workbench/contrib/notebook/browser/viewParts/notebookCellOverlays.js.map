{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/viewParts/notebookCellOverlays.ts","vs/workbench/contrib/notebook/browser/viewParts/notebookCellOverlays.ts"],"names":[],"mappings":"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","file":"notebookCellOverlays.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createFastDomNode, FastDomNode } from '../../../../../base/browser/fastDomNode.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { INotebookCellOverlay, INotebookCellOverlayChangeAccessor, INotebookViewCellsUpdateEvent } from '../notebookBrowser.js';\nimport { NotebookCellListView } from '../view/notebookCellListView.js';\nimport { CellViewModel } from '../viewModel/notebookViewModelImpl.js';\n\ninterface INotebookCellOverlayWidget {\n\toverlayId: string;\n\toverlay: INotebookCellOverlay;\n\tdomNode: FastDomNode<HTMLElement>;\n}\n\nexport class NotebookCellOverlays extends Disposable {\n\tprivate _lastOverlayId = 0;\n\tpublic domNode: FastDomNode<HTMLElement>;\n\tprivate _overlays: { [key: string]: INotebookCellOverlayWidget } = Object.create(null);\n\n\tconstructor(\n\t\tprivate readonly listView: NotebookCellListView<CellViewModel>\n\t) {\n\t\tsuper();\n\t\tthis.domNode = createFastDomNode(document.createElement('div'));\n\t\tthis.domNode.setClassName('cell-overlays');\n\t\tthis.domNode.setPosition('absolute');\n\t\tthis.domNode.setAttribute('role', 'presentation');\n\t\tthis.domNode.setAttribute('aria-hidden', 'true');\n\t\tthis.domNode.setWidth('100%');\n\n\t\tthis.listView.containerDomNode.appendChild(this.domNode.domNode);\n\t}\n\n\tchangeCellOverlays(callback: (changeAccessor: INotebookCellOverlayChangeAccessor) => void): boolean {\n\t\tlet overlaysHaveChanged = false;\n\t\tconst changeAccessor: INotebookCellOverlayChangeAccessor = {\n\t\t\taddOverlay: (overlay: INotebookCellOverlay): string => {\n\t\t\t\toverlaysHaveChanged = true;\n\t\t\t\treturn this._addOverlay(overlay);\n\t\t\t},\n\t\t\tremoveOverlay: (id: string): void => {\n\t\t\t\toverlaysHaveChanged = true;\n\t\t\t\tthis._removeOverlay(id);\n\t\t\t},\n\t\t\tlayoutOverlay: (id: string): void => {\n\t\t\t\toverlaysHaveChanged = true;\n\t\t\t\tthis._layoutOverlay(id);\n\t\t\t}\n\t\t};\n\n\t\tcallback(changeAccessor);\n\n\t\treturn overlaysHaveChanged;\n\t}\n\n\tonCellsChanged(e: INotebookViewCellsUpdateEvent): void {\n\t\tthis.layout();\n\t}\n\n\tonHiddenRangesChange() {\n\t\tthis.layout();\n\t}\n\n\tlayout() {\n\t\tfor (const id in this._overlays) {\n\t\t\tthis._layoutOverlay(id);\n\t\t}\n\t}\n\n\tprivate _addOverlay(overlay: INotebookCellOverlay): string {\n\t\tconst overlayId = `${++this._lastOverlayId}`;\n\n\t\tconst overlayWidget = {\n\t\t\toverlayId,\n\t\t\toverlay,\n\t\t\tdomNode: createFastDomNode(overlay.domNode)\n\t\t};\n\n\t\tthis._overlays[overlayId] = overlayWidget;\n\t\toverlayWidget.domNode.setClassName('cell-overlay');\n\t\toverlayWidget.domNode.setPosition('absolute');\n\t\tthis.domNode.appendChild(overlayWidget.domNode);\n\n\t\treturn overlayId;\n\t}\n\n\tprivate _removeOverlay(id: string): void {\n\t\tconst overlay = this._overlays[id];\n\t\tif (overlay) {\n\t\t\t// overlay.overlay.dispose();\n\t\t\ttry {\n\t\t\t\tthis.domNode.removeChild(overlay.domNode);\n\t\t\t} catch {\n\t\t\t\t// no op\n\t\t\t}\n\n\t\t\tdelete this._overlays[id];\n\t\t}\n\t}\n\n\tprivate _layoutOverlay(id: string): void {\n\t\tconst overlay = this._overlays[id];\n\t\tif (!overlay) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isInHiddenRanges = this._isInHiddenRanges(overlay);\n\t\tif (isInHiddenRanges) {\n\t\t\toverlay.domNode.setDisplay('none');\n\t\t\treturn;\n\t\t}\n\n\t\toverlay.domNode.setDisplay('block');\n\t\tconst index = this.listView.indexOf(overlay.overlay.cell as CellViewModel);\n\t\tif (index === -1) {\n\t\t\t// should not happen\n\t\t\treturn;\n\t\t}\n\n\t\tconst top = this.listView.elementTop(index);\n\t\toverlay.domNode.setTop(top);\n\t}\n\n\tprivate _isInHiddenRanges(zone: INotebookCellOverlayWidget) {\n\t\tconst index = this.listView.indexOf(zone.overlay.cell as CellViewModel);\n\t\tif (index === -1) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createFastDomNode, FastDomNode } from '../../../../../base/browser/fastDomNode.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { INotebookCellOverlay, INotebookCellOverlayChangeAccessor, INotebookViewCellsUpdateEvent } from '../notebookBrowser.js';\nimport { NotebookCellListView } from '../view/notebookCellListView.js';\nimport { CellViewModel } from '../viewModel/notebookViewModelImpl.js';\n\ninterface INotebookCellOverlayWidget {\n\toverlayId: string;\n\toverlay: INotebookCellOverlay;\n\tdomNode: FastDomNode<HTMLElement>;\n}\n\nexport class NotebookCellOverlays extends Disposable {\n\tprivate _lastOverlayId = 0;\n\tpublic domNode: FastDomNode<HTMLElement>;\n\tprivate _overlays: { [key: string]: INotebookCellOverlayWidget } = Object.create(null);\n\n\tconstructor(\n\t\tprivate readonly listView: NotebookCellListView<CellViewModel>\n\t) {\n\t\tsuper();\n\t\tthis.domNode = createFastDomNode(document.createElement('div'));\n\t\tthis.domNode.setClassName('cell-overlays');\n\t\tthis.domNode.setPosition('absolute');\n\t\tthis.domNode.setAttribute('role', 'presentation');\n\t\tthis.domNode.setAttribute('aria-hidden', 'true');\n\t\tthis.domNode.setWidth('100%');\n\n\t\tthis.listView.containerDomNode.appendChild(this.domNode.domNode);\n\t}\n\n\tchangeCellOverlays(callback: (changeAccessor: INotebookCellOverlayChangeAccessor) => void): boolean {\n\t\tlet overlaysHaveChanged = false;\n\t\tconst changeAccessor: INotebookCellOverlayChangeAccessor = {\n\t\t\taddOverlay: (overlay: INotebookCellOverlay): string => {\n\t\t\t\toverlaysHaveChanged = true;\n\t\t\t\treturn this._addOverlay(overlay);\n\t\t\t},\n\t\t\tremoveOverlay: (id: string): void => {\n\t\t\t\toverlaysHaveChanged = true;\n\t\t\t\tthis._removeOverlay(id);\n\t\t\t},\n\t\t\tlayoutOverlay: (id: string): void => {\n\t\t\t\toverlaysHaveChanged = true;\n\t\t\t\tthis._layoutOverlay(id);\n\t\t\t}\n\t\t};\n\n\t\tcallback(changeAccessor);\n\n\t\treturn overlaysHaveChanged;\n\t}\n\n\tonCellsChanged(e: INotebookViewCellsUpdateEvent): void {\n\t\tthis.layout();\n\t}\n\n\tonHiddenRangesChange() {\n\t\tthis.layout();\n\t}\n\n\tlayout() {\n\t\tfor (const id in this._overlays) {\n\t\t\tthis._layoutOverlay(id);\n\t\t}\n\t}\n\n\tprivate _addOverlay(overlay: INotebookCellOverlay): string {\n\t\tconst overlayId = `${++this._lastOverlayId}`;\n\n\t\tconst overlayWidget = {\n\t\t\toverlayId,\n\t\t\toverlay,\n\t\t\tdomNode: createFastDomNode(overlay.domNode)\n\t\t};\n\n\t\tthis._overlays[overlayId] = overlayWidget;\n\t\toverlayWidget.domNode.setClassName('cell-overlay');\n\t\toverlayWidget.domNode.setPosition('absolute');\n\t\tthis.domNode.appendChild(overlayWidget.domNode);\n\n\t\treturn overlayId;\n\t}\n\n\tprivate _removeOverlay(id: string): void {\n\t\tconst overlay = this._overlays[id];\n\t\tif (overlay) {\n\t\t\t// overlay.overlay.dispose();\n\t\t\ttry {\n\t\t\t\tthis.domNode.removeChild(overlay.domNode);\n\t\t\t} catch {\n\t\t\t\t// no op\n\t\t\t}\n\n\t\t\tdelete this._overlays[id];\n\t\t}\n\t}\n\n\tprivate _layoutOverlay(id: string): void {\n\t\tconst overlay = this._overlays[id];\n\t\tif (!overlay) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isInHiddenRanges = this._isInHiddenRanges(overlay);\n\t\tif (isInHiddenRanges) {\n\t\t\toverlay.domNode.setDisplay('none');\n\t\t\treturn;\n\t\t}\n\n\t\toverlay.domNode.setDisplay('block');\n\t\tconst index = this.listView.indexOf(overlay.overlay.cell as CellViewModel);\n\t\tif (index === -1) {\n\t\t\t// should not happen\n\t\t\treturn;\n\t\t}\n\n\t\tconst top = this.listView.elementTop(index);\n\t\toverlay.domNode.setTop(top);\n\t}\n\n\tprivate _isInHiddenRanges(zone: INotebookCellOverlayWidget) {\n\t\tconst index = this.listView.indexOf(zone.overlay.cell as CellViewModel);\n\t\tif (index === -1) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n\n"]}