{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/view/notebookCellEditorPool.ts","vs/workbench/contrib/notebook/browser/view/notebookCellEditorPool.ts"],"names":[],"mappings":"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","file":"notebookCellEditorPool.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../base/browser/dom.js';\nimport { CancelablePromise, createCancelablePromise } from '../../../../../base/common/async.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { CodeEditorWidget } from '../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, IScopedContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { CellFocusMode, ICellViewModel, INotebookEditorDelegate } from '../notebookBrowser.js';\nimport { CellEditorOptions } from './cellParts/cellEditorOptions.js';\n\nexport class NotebookCellEditorPool extends Disposable {\n\tprivate readonly _focusedEditorDOM: HTMLElement;\n\tprivate readonly _editorDisposable = this._register(new MutableDisposable());\n\tprivate _editorContextKeyService!: IScopedContextKeyService;\n\tprivate _editor!: CodeEditorWidget;\n\tprivate _focusEditorCancellablePromise: CancelablePromise<void> | undefined;\n\tprivate _isInitialized = false;\n\tprivate _isDisposed = false;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\tprivate readonly contextKeyServiceProvider: (container: HTMLElement) => IScopedContextKeyService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._focusedEditorDOM = this.notebookEditor.getDomNode().appendChild(DOM.$('.cell-editor-part-cache'));\n\t\tthis._focusedEditorDOM.style.position = 'absolute';\n\t\tthis._focusedEditorDOM.style.top = '-50000px';\n\t\tthis._focusedEditorDOM.style.width = '1px';\n\t\tthis._focusedEditorDOM.style.height = '1px';\n\t}\n\n\tprivate _initializeEditor(cell: ICellViewModel) {\n\t\tthis._editorContextKeyService = this._register(this.contextKeyServiceProvider(this._focusedEditorDOM));\n\n\t\tconst editorContainer = DOM.prepend(this._focusedEditorDOM, DOM.$('.cell-editor-container'));\n\t\tconst editorInstaService = this._register(this._instantiationService.createChild(new ServiceCollection([IContextKeyService, this._editorContextKeyService])));\n\t\tEditorContextKeys.inCompositeEditor.bindTo(this._editorContextKeyService).set(true);\n\t\tconst editorOptions = new CellEditorOptions(this.notebookEditor.getBaseCellEditorOptions(cell.language), this.notebookEditor.notebookOptions, this._configurationService);\n\n\t\tthis._editor = this._register(editorInstaService.createInstance(CodeEditorWidget, editorContainer, {\n\t\t\t...editorOptions.getDefaultValue(),\n\t\t\tdimension: {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t},\n\t\t\tscrollbar: {\n\t\t\t\tvertical: 'hidden',\n\t\t\t\thorizontal: 'auto',\n\t\t\t\thandleMouseWheel: false,\n\t\t\t\tuseShadows: false,\n\t\t\t},\n\t\t\tallowVariableLineHeights: false,\n\t\t}, {\n\t\t\tcontributions: this.notebookEditor.creationOptions.cellEditorContributions\n\t\t}));\n\t\teditorOptions.dispose();\n\t\tthis._isInitialized = true;\n\t}\n\n\tpreserveFocusedEditor(cell: ICellViewModel): void {\n\t\tif (!this._isInitialized) {\n\t\t\tthis._initializeEditor(cell);\n\t\t}\n\n\t\tthis._editorDisposable.clear();\n\t\tthis._focusEditorCancellablePromise?.cancel();\n\n\t\tthis._focusEditorCancellablePromise = createCancelablePromise(async token => {\n\t\t\tconst ref = await this.textModelService.createModelReference(cell.uri);\n\n\t\t\tif (this._isDisposed || token.isCancellationRequested) {\n\t\t\t\tref.dispose();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst editorDisposable = new DisposableStore();\n\t\t\teditorDisposable.add(ref);\n\t\t\tthis._editor.setModel(ref.object.textEditorModel);\n\t\t\tthis._editor.setSelections(cell.getSelections());\n\t\t\tthis._editor.focus();\n\n\t\t\tconst _update = () => {\n\t\t\t\tconst editorSelections = this._editor.getSelections();\n\t\t\t\tif (editorSelections) {\n\t\t\t\t\tcell.setSelections(editorSelections);\n\t\t\t\t}\n\n\t\t\t\tthis.notebookEditor.revealInView(cell);\n\t\t\t\tthis._editor.setModel(null);\n\t\t\t\tref.dispose();\n\t\t\t};\n\n\t\t\teditorDisposable.add(this._editor.onDidChangeModelContent((e) => {\n\t\t\t\t_update();\n\t\t\t}));\n\n\t\t\teditorDisposable.add(this._editor.onDidChangeCursorSelection(e => {\n\t\t\t\tif (e.source === 'keyboard' || e.source === 'mouse') {\n\t\t\t\t\t_update();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\teditorDisposable.add(this.notebookEditor.onDidChangeActiveEditor(() => {\n\t\t\t\tconst latestActiveCell = this.notebookEditor.getActiveCell();\n\n\t\t\t\tif (latestActiveCell !== cell || latestActiveCell.focusMode !== CellFocusMode.Editor) {\n\t\t\t\t\t// focus moves to another cell or cell container\n\t\t\t\t\t// we should stop preserving the editor\n\t\t\t\t\tthis._editorDisposable.clear();\n\t\t\t\t\tthis._editor.setModel(null);\n\t\t\t\t\tref.dispose();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._editorDisposable.value = editorDisposable;\n\t\t});\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\tthis._focusEditorCancellablePromise?.cancel();\n\n\t\tsuper.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../base/browser/dom.js';\nimport { CancelablePromise, createCancelablePromise } from '../../../../../base/common/async.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { CodeEditorWidget } from '../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, IScopedContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { CellFocusMode, ICellViewModel, INotebookEditorDelegate } from '../notebookBrowser.js';\nimport { CellEditorOptions } from './cellParts/cellEditorOptions.js';\n\nexport class NotebookCellEditorPool extends Disposable {\n\tprivate readonly _focusedEditorDOM: HTMLElement;\n\tprivate readonly _editorDisposable = this._register(new MutableDisposable());\n\tprivate _editorContextKeyService!: IScopedContextKeyService;\n\tprivate _editor!: CodeEditorWidget;\n\tprivate _focusEditorCancellablePromise: CancelablePromise<void> | undefined;\n\tprivate _isInitialized = false;\n\tprivate _isDisposed = false;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\tprivate readonly contextKeyServiceProvider: (container: HTMLElement) => IScopedContextKeyService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._focusedEditorDOM = this.notebookEditor.getDomNode().appendChild(DOM.$('.cell-editor-part-cache'));\n\t\tthis._focusedEditorDOM.style.position = 'absolute';\n\t\tthis._focusedEditorDOM.style.top = '-50000px';\n\t\tthis._focusedEditorDOM.style.width = '1px';\n\t\tthis._focusedEditorDOM.style.height = '1px';\n\t}\n\n\tprivate _initializeEditor(cell: ICellViewModel) {\n\t\tthis._editorContextKeyService = this._register(this.contextKeyServiceProvider(this._focusedEditorDOM));\n\n\t\tconst editorContainer = DOM.prepend(this._focusedEditorDOM, DOM.$('.cell-editor-container'));\n\t\tconst editorInstaService = this._register(this._instantiationService.createChild(new ServiceCollection([IContextKeyService, this._editorContextKeyService])));\n\t\tEditorContextKeys.inCompositeEditor.bindTo(this._editorContextKeyService).set(true);\n\t\tconst editorOptions = new CellEditorOptions(this.notebookEditor.getBaseCellEditorOptions(cell.language), this.notebookEditor.notebookOptions, this._configurationService);\n\n\t\tthis._editor = this._register(editorInstaService.createInstance(CodeEditorWidget, editorContainer, {\n\t\t\t...editorOptions.getDefaultValue(),\n\t\t\tdimension: {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t},\n\t\t\tscrollbar: {\n\t\t\t\tvertical: 'hidden',\n\t\t\t\thorizontal: 'auto',\n\t\t\t\thandleMouseWheel: false,\n\t\t\t\tuseShadows: false,\n\t\t\t},\n\t\t\tallowVariableLineHeights: false,\n\t\t}, {\n\t\t\tcontributions: this.notebookEditor.creationOptions.cellEditorContributions\n\t\t}));\n\t\teditorOptions.dispose();\n\t\tthis._isInitialized = true;\n\t}\n\n\tpreserveFocusedEditor(cell: ICellViewModel): void {\n\t\tif (!this._isInitialized) {\n\t\t\tthis._initializeEditor(cell);\n\t\t}\n\n\t\tthis._editorDisposable.clear();\n\t\tthis._focusEditorCancellablePromise?.cancel();\n\n\t\tthis._focusEditorCancellablePromise = createCancelablePromise(async token => {\n\t\t\tconst ref = await this.textModelService.createModelReference(cell.uri);\n\n\t\t\tif (this._isDisposed || token.isCancellationRequested) {\n\t\t\t\tref.dispose();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst editorDisposable = new DisposableStore();\n\t\t\teditorDisposable.add(ref);\n\t\t\tthis._editor.setModel(ref.object.textEditorModel);\n\t\t\tthis._editor.setSelections(cell.getSelections());\n\t\t\tthis._editor.focus();\n\n\t\t\tconst _update = () => {\n\t\t\t\tconst editorSelections = this._editor.getSelections();\n\t\t\t\tif (editorSelections) {\n\t\t\t\t\tcell.setSelections(editorSelections);\n\t\t\t\t}\n\n\t\t\t\tthis.notebookEditor.revealInView(cell);\n\t\t\t\tthis._editor.setModel(null);\n\t\t\t\tref.dispose();\n\t\t\t};\n\n\t\t\teditorDisposable.add(this._editor.onDidChangeModelContent((e) => {\n\t\t\t\t_update();\n\t\t\t}));\n\n\t\t\teditorDisposable.add(this._editor.onDidChangeCursorSelection(e => {\n\t\t\t\tif (e.source === 'keyboard' || e.source === 'mouse') {\n\t\t\t\t\t_update();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\teditorDisposable.add(this.notebookEditor.onDidChangeActiveEditor(() => {\n\t\t\t\tconst latestActiveCell = this.notebookEditor.getActiveCell();\n\n\t\t\t\tif (latestActiveCell !== cell || latestActiveCell.focusMode !== CellFocusMode.Editor) {\n\t\t\t\t\t// focus moves to another cell or cell container\n\t\t\t\t\t// we should stop preserving the editor\n\t\t\t\t\tthis._editorDisposable.clear();\n\t\t\t\t\tthis._editor.setModel(null);\n\t\t\t\t\tref.dispose();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._editorDisposable.value = editorDisposable;\n\t\t});\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\tthis._focusEditorCancellablePromise?.cancel();\n\n\t\tsuper.dispose();\n\t}\n}\n"]}