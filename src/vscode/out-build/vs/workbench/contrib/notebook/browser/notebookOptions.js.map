{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/notebookOptions.ts","vs/workbench/contrib/notebook/browser/notebookOptions.ts"],"names":[],"mappings":"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","file":"notebookOptions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PixelRatio } from '../../../../base/browser/pixelRatio.js';\nimport { CodeWindow } from '../../../../base/browser/window.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { observableValue } from '../../../../base/common/observable.js';\nimport { isObject } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { FontMeasurements } from '../../../../editor/browser/config/fontMeasurements.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { createBareFontInfoFromRawSettings } from '../../../../editor/common/config/fontInfoFromSettings.js';\nimport { ConfigurationTarget, IConfigurationChangeEvent, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { NotebookTextModel } from '../common/model/notebookTextModel.js';\nimport { InteractiveWindowCollapseCodeCells, NotebookCellDefaultCollapseConfig, NotebookCellInternalMetadata, NotebookSetting, ShowCellStatusBarType } from '../common/notebookCommon.js';\nimport { INotebookExecutionStateService } from '../common/notebookExecutionStateService.js';\n\nconst SCROLLABLE_ELEMENT_PADDING_TOP = 18;\n\nexport const OutputInnerContainerTopPadding = 4;\n\nexport interface NotebookDisplayOptions { // TODO @Yoyokrazy rename to a more generic name, not display\n\tshowCellStatusBar: ShowCellStatusBarType;\n\tcellToolbarLocation: string | { [key: string]: string };\n\tcellToolbarInteraction: string;\n\tcompactView: boolean;\n\tfocusIndicator: 'border' | 'gutter';\n\tinsertToolbarPosition: 'betweenCells' | 'notebookToolbar' | 'both' | 'hidden';\n\tinsertToolbarAlignment: 'left' | 'center';\n\tglobalToolbar: boolean;\n\tstickyScrollEnabled: boolean;\n\tstickyScrollMode: 'flat' | 'indented';\n\tconsolidatedOutputButton: boolean;\n\tconsolidatedRunButton: boolean;\n\tshowFoldingControls: 'always' | 'never' | 'mouseover';\n\tdragAndDropEnabled: boolean;\n\tinteractiveWindowCollapseCodeCells: InteractiveWindowCollapseCodeCells;\n\toutputScrolling: boolean;\n\toutputWordWrap: boolean;\n\toutputLineLimit: number;\n\toutputLinkifyFilePaths: boolean;\n\toutputMinimalError: boolean;\n\tfontSize: number;\n\toutputFontSize: number;\n\toutputFontFamily: string;\n\toutputLineHeight: number;\n\tmarkupFontSize: number;\n\tmarkdownLineHeight: number;\n\teditorOptionsCustomizations: Partial<{\n\t\t'editor.indentSize': 'tabSize' | number;\n\t\t'editor.tabSize': number;\n\t\t'editor.insertSpaces': boolean;\n\t}> | undefined;\n\tmarkupFontFamily: string;\n\tdisableRulers: boolean | undefined;\n}\n\nexport interface NotebookLayoutConfiguration {\n\tcellRightMargin: number;\n\tcellRunGutter: number;\n\tcellTopMargin: number;\n\tcellBottomMargin: number;\n\tcellOutputPadding: number;\n\tcodeCellLeftMargin: number;\n\tmarkdownCellLeftMargin: number;\n\tmarkdownCellGutter: number;\n\tmarkdownCellTopMargin: number;\n\tmarkdownCellBottomMargin: number;\n\tmarkdownPreviewPadding: number;\n\tmarkdownFoldHintHeight: number;\n\teditorToolbarHeight: number;\n\teditorTopPadding: number;\n\teditorBottomPadding: number;\n\teditorBottomPaddingWithoutStatusBar: number;\n\tcollapsedIndicatorHeight: number;\n\tcellStatusBarHeight: number;\n\tfocusIndicatorLeftMargin: number;\n\tfocusIndicatorGap: number;\n}\n\nexport interface NotebookOptionsChangeEvent {\n\treadonly cellStatusBarVisibility?: boolean;\n\treadonly cellToolbarLocation?: boolean;\n\treadonly cellToolbarInteraction?: boolean;\n\treadonly editorTopPadding?: boolean;\n\treadonly compactView?: boolean;\n\treadonly focusIndicator?: boolean;\n\treadonly insertToolbarPosition?: boolean;\n\treadonly insertToolbarAlignment?: boolean;\n\treadonly globalToolbar?: boolean;\n\treadonly stickyScrollEnabled?: boolean;\n\treadonly stickyScrollMode?: boolean;\n\treadonly showFoldingControls?: boolean;\n\treadonly consolidatedOutputButton?: boolean;\n\treadonly consolidatedRunButton?: boolean;\n\treadonly dragAndDropEnabled?: boolean;\n\treadonly fontSize?: boolean;\n\treadonly outputFontSize?: boolean;\n\treadonly markupFontSize?: boolean;\n\treadonly markdownLineHeight?: boolean;\n\treadonly fontFamily?: boolean;\n\treadonly outputFontFamily?: boolean;\n\treadonly editorOptionsCustomizations?: boolean;\n\treadonly interactiveWindowCollapseCodeCells?: boolean;\n\treadonly outputLineHeight?: boolean;\n\treadonly outputWordWrap?: boolean;\n\treadonly outputScrolling?: boolean;\n\treadonly outputLinkifyFilePaths?: boolean;\n\treadonly minimalError?: boolean;\n\treadonly readonly?: boolean;\n\treadonly markupFontFamily?: boolean;\n}\n\nconst defaultConfigConstants = Object.freeze({\n\tcodeCellLeftMargin: 28,\n\tcellRunGutter: 32,\n\tmarkdownCellTopMargin: 8,\n\tmarkdownCellBottomMargin: 8,\n\tmarkdownCellLeftMargin: 0,\n\tmarkdownCellGutter: 32,\n\tfocusIndicatorLeftMargin: 4\n});\n\nconst compactConfigConstants = Object.freeze({\n\tcodeCellLeftMargin: 8,\n\tcellRunGutter: 36,\n\tmarkdownCellTopMargin: 6,\n\tmarkdownCellBottomMargin: 6,\n\tmarkdownCellLeftMargin: 8,\n\tmarkdownCellGutter: 36,\n\tfocusIndicatorLeftMargin: 4\n});\n\nexport class NotebookOptions extends Disposable {\n\tprivate _layoutConfiguration: NotebookLayoutConfiguration & NotebookDisplayOptions;\n\tprotected readonly _onDidChangeOptions = this._register(new Emitter<NotebookOptionsChangeEvent>());\n\treadonly onDidChangeOptions = this._onDidChangeOptions.event;\n\tprivate _editorTopPadding: number = 12;\n\n\treadonly previousModelToCompare = observableValue<NotebookTextModel | undefined>('previousModelToCompare', undefined);\n\n\tconstructor(\n\t\treadonly targetWindow: CodeWindow,\n\t\tprivate isReadonly: boolean,\n\t\tprivate readonly overrides: { cellToolbarInteraction: string; globalToolbar: boolean; stickyScrollEnabled: boolean; dragAndDropEnabled: boolean; disableRulers: boolean } | undefined,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@INotebookExecutionStateService private readonly notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t) {\n\t\tsuper();\n\t\tconst showCellStatusBar = this.configurationService.getValue<ShowCellStatusBarType>(NotebookSetting.showCellStatusBar);\n\t\tconst globalToolbar = overrides?.globalToolbar ?? this.configurationService.getValue<boolean | undefined>(NotebookSetting.globalToolbar) ?? true;\n\t\tconst stickyScrollEnabled = overrides?.stickyScrollEnabled ?? this.configurationService.getValue<boolean | undefined>(NotebookSetting.stickyScrollEnabled) ?? false;\n\t\tconst stickyScrollMode = this._computeStickyScrollModeOption();\n\t\tconst consolidatedOutputButton = this.configurationService.getValue<boolean | undefined>(NotebookSetting.consolidatedOutputButton) ?? true;\n\t\tconst consolidatedRunButton = this.configurationService.getValue<boolean | undefined>(NotebookSetting.consolidatedRunButton) ?? false;\n\t\tconst dragAndDropEnabled = overrides?.dragAndDropEnabled ?? this.configurationService.getValue<boolean | undefined>(NotebookSetting.dragAndDropEnabled) ?? true;\n\t\tconst cellToolbarLocation = this.configurationService.getValue<string | { [key: string]: string }>(NotebookSetting.cellToolbarLocation) ?? { 'default': 'right' };\n\t\tconst cellToolbarInteraction = overrides?.cellToolbarInteraction ?? this.configurationService.getValue<string>(NotebookSetting.cellToolbarVisibility);\n\t\tconst compactView = this.configurationService.getValue<boolean | undefined>(NotebookSetting.compactView) ?? true;\n\t\tconst focusIndicator = this._computeFocusIndicatorOption();\n\t\tconst insertToolbarPosition = this._computeInsertToolbarPositionOption(this.isReadonly);\n\t\tconst insertToolbarAlignment = this._computeInsertToolbarAlignmentOption();\n\t\tconst showFoldingControls = this._computeShowFoldingControlsOption();\n\t\t// const { bottomToolbarGap, bottomToolbarHeight } = this._computeBottomToolbarDimensions(compactView, insertToolbarPosition, insertToolbarAlignment);\n\t\tconst fontSize = this.configurationService.getValue<number>('editor.fontSize');\n\t\tconst markupFontSize = this.configurationService.getValue<number>(NotebookSetting.markupFontSize);\n\t\tconst markdownLineHeight = this.configurationService.getValue<number>(NotebookSetting.markdownLineHeight);\n\t\tlet editorOptionsCustomizations = this.configurationService.getValue<Partial<{\n\t\t\t'editor.indentSize': 'tabSize' | number;\n\t\t\t'editor.tabSize': number;\n\t\t\t'editor.insertSpaces': boolean;\n\t\t}>>(NotebookSetting.cellEditorOptionsCustomizations) ?? {};\n\t\teditorOptionsCustomizations = isObject(editorOptionsCustomizations) ? editorOptionsCustomizations : {};\n\t\tconst interactiveWindowCollapseCodeCells: InteractiveWindowCollapseCodeCells = this.configurationService.getValue(NotebookSetting.interactiveWindowCollapseCodeCells);\n\n\t\t// TOOD @rebornix remove after a few iterations of deprecated setting\n\t\tlet outputLineHeightSettingValue: number;\n\t\tconst deprecatedOutputLineHeightSetting = this.configurationService.getValue<number>(NotebookSetting.outputLineHeightDeprecated);\n\t\tif (deprecatedOutputLineHeightSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputLineHeightDeprecated, NotebookSetting.outputLineHeight);\n\t\t\toutputLineHeightSettingValue = deprecatedOutputLineHeightSetting;\n\t\t} else {\n\t\t\toutputLineHeightSettingValue = this.configurationService.getValue<number>(NotebookSetting.outputLineHeight);\n\t\t}\n\n\t\tlet outputFontSize: number;\n\t\tconst deprecatedOutputFontSizeSetting = this.configurationService.getValue<number>(NotebookSetting.outputFontSizeDeprecated);\n\t\tif (deprecatedOutputFontSizeSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputFontSizeDeprecated, NotebookSetting.outputFontSize);\n\t\t\toutputFontSize = deprecatedOutputFontSizeSetting;\n\t\t} else {\n\t\t\toutputFontSize = this.configurationService.getValue<number>(NotebookSetting.outputFontSize) || fontSize;\n\t\t}\n\n\t\tlet outputFontFamily: string;\n\t\tconst deprecatedOutputFontFamilySetting = this.configurationService.getValue<string>(NotebookSetting.outputFontFamilyDeprecated);\n\t\tif (deprecatedOutputFontFamilySetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputFontFamilyDeprecated, NotebookSetting.outputFontFamily);\n\t\t\toutputFontFamily = deprecatedOutputFontFamilySetting;\n\t\t} else {\n\t\t\toutputFontFamily = this.configurationService.getValue<string>(NotebookSetting.outputFontFamily);\n\t\t}\n\n\t\tlet outputScrolling: boolean;\n\t\tconst deprecatedOutputScrollingSetting = this.configurationService.getValue<boolean>(NotebookSetting.outputScrollingDeprecated);\n\t\tif (deprecatedOutputScrollingSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputScrollingDeprecated, NotebookSetting.outputScrolling);\n\t\t\toutputScrolling = deprecatedOutputScrollingSetting;\n\t\t} else {\n\t\t\toutputScrolling = this.configurationService.getValue<boolean>(NotebookSetting.outputScrolling);\n\t\t}\n\n\t\tconst outputLineHeight = this._computeOutputLineHeight(outputLineHeightSettingValue, outputFontSize);\n\t\tconst outputWordWrap = this.configurationService.getValue<boolean>(NotebookSetting.outputWordWrap);\n\t\tconst outputLineLimit = this.configurationService.getValue<number>(NotebookSetting.textOutputLineLimit) ?? 30;\n\t\tconst linkifyFilePaths = this.configurationService.getValue<boolean>(NotebookSetting.LinkifyOutputFilePaths) ?? true;\n\t\tconst minimalErrors = this.configurationService.getValue<boolean>(NotebookSetting.minimalErrorRendering);\n\t\tconst markupFontFamily = this.configurationService.getValue<string>(NotebookSetting.markupFontFamily);\n\n\t\tconst editorTopPadding = this._computeEditorTopPadding();\n\n\t\tthis._layoutConfiguration = {\n\t\t\t...(compactView ? compactConfigConstants : defaultConfigConstants),\n\t\t\tcellTopMargin: 6,\n\t\t\tcellBottomMargin: 6,\n\t\t\tcellRightMargin: 16,\n\t\t\tcellStatusBarHeight: 22,\n\t\t\tcellOutputPadding: 8,\n\t\t\tmarkdownPreviewPadding: 8,\n\t\t\t// bottomToolbarHeight: bottomToolbarHeight,\n\t\t\t// bottomToolbarGap: bottomToolbarGap,\n\t\t\teditorToolbarHeight: 0,\n\t\t\teditorTopPadding: editorTopPadding,\n\t\t\teditorBottomPadding: 4,\n\t\t\teditorBottomPaddingWithoutStatusBar: 12,\n\t\t\tcollapsedIndicatorHeight: 28,\n\t\t\tshowCellStatusBar,\n\t\t\tglobalToolbar,\n\t\t\tstickyScrollEnabled,\n\t\t\tstickyScrollMode,\n\t\t\tconsolidatedOutputButton,\n\t\t\tconsolidatedRunButton,\n\t\t\tdragAndDropEnabled,\n\t\t\tcellToolbarLocation,\n\t\t\tcellToolbarInteraction,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tshowFoldingControls,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\toutputFontFamily,\n\t\t\toutputLineHeight,\n\t\t\tmarkupFontSize,\n\t\t\tmarkdownLineHeight,\n\t\t\teditorOptionsCustomizations,\n\t\t\tfocusIndicatorGap: 3,\n\t\t\tinteractiveWindowCollapseCodeCells,\n\t\t\tmarkdownFoldHintHeight: 22,\n\t\t\toutputScrolling: outputScrolling,\n\t\t\toutputWordWrap: outputWordWrap,\n\t\t\toutputLineLimit: outputLineLimit,\n\t\t\toutputLinkifyFilePaths: linkifyFilePaths,\n\t\t\toutputMinimalError: minimalErrors,\n\t\t\tmarkupFontFamily,\n\t\t\tdisableRulers: overrides?.disableRulers,\n\t\t};\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tthis._updateConfiguration(e);\n\t\t}));\n\t}\n\n\tupdateOptions(isReadonly: boolean) {\n\t\tif (this.isReadonly !== isReadonly) {\n\t\t\tthis.isReadonly = isReadonly;\n\n\t\t\tthis._updateConfiguration({\n\t\t\t\taffectsConfiguration(configuration: string): boolean {\n\t\t\t\t\treturn configuration === NotebookSetting.insertToolbarLocation;\n\t\t\t\t},\n\t\t\t\tsource: ConfigurationTarget.DEFAULT,\n\t\t\t\taffectedKeys: new Set([NotebookSetting.insertToolbarLocation]),\n\t\t\t\tchange: { keys: [NotebookSetting.insertToolbarLocation], overrides: [] },\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _computeEditorTopPadding(): number {\n\t\tlet decorationTriggeredAdjustment = false;\n\n\t\tconst updateEditorTopPadding = (top: number) => {\n\t\t\tthis._editorTopPadding = top;\n\t\t\tconst configuration = Object.assign({}, this._layoutConfiguration);\n\t\t\tconfiguration.editorTopPadding = this._editorTopPadding;\n\t\t\tthis._layoutConfiguration = configuration;\n\t\t\tthis._onDidChangeOptions.fire({ editorTopPadding: true });\n\t\t};\n\n\t\tconst decorationCheckSet = new Set<string>();\n\t\tconst onDidAddDecorationType = (e: string) => {\n\t\t\tif (decorationTriggeredAdjustment) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (decorationCheckSet.has(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst options = this.codeEditorService.resolveDecorationOptions(e, true);\n\t\t\t\tif (options.afterContentClassName || options.beforeContentClassName) {\n\t\t\t\t\tconst cssRules = this.codeEditorService.resolveDecorationCSSRules(e);\n\t\t\t\t\tif (cssRules !== null) {\n\t\t\t\t\t\tfor (let i = 0; i < cssRules.length; i++) {\n\t\t\t\t\t\t\t// The following ways to index into the list are equivalent\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t((cssRules[i] as CSSStyleRule).selectorText.endsWith('::after') || (cssRules[i] as CSSStyleRule).selectorText.endsWith('::after'))\n\t\t\t\t\t\t\t\t&& (cssRules[i] as CSSStyleRule).cssText.indexOf('top:') > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// there is a `::before` or `::after` text decoration whose position is above or below current line\n\t\t\t\t\t\t\t\t// we at least make sure that the editor top padding is at least one line\n\t\t\t\t\t\t\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\t\t\t\t\t\t\tupdateEditorTopPadding(createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(this.targetWindow).value).lineHeight + 2);\n\t\t\t\t\t\t\t\tdecorationTriggeredAdjustment = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdecorationCheckSet.add(e);\n\t\t\t} catch (_ex) {\n\t\t\t\t// do not throw and break notebook\n\t\t\t}\n\n\t\t};\n\t\tthis._register(this.codeEditorService.onDecorationTypeRegistered(onDidAddDecorationType));\n\t\tthis.codeEditorService.listDecorationTypes().forEach(onDidAddDecorationType);\n\n\t\treturn this._editorTopPadding;\n\t}\n\n\tprivate _migrateDeprecatedSetting(deprecatedKey: string, key: string): void {\n\t\tconst deprecatedSetting = this.configurationService.inspect(deprecatedKey);\n\n\t\tif (deprecatedSetting.application !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.APPLICATION);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.application.value, ConfigurationTarget.APPLICATION);\n\t\t}\n\n\t\tif (deprecatedSetting.user !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.USER);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.user.value, ConfigurationTarget.USER);\n\t\t}\n\n\t\tif (deprecatedSetting.userLocal !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.USER_LOCAL);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.userLocal.value, ConfigurationTarget.USER_LOCAL);\n\t\t}\n\n\t\tif (deprecatedSetting.userRemote !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.USER_REMOTE);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.userRemote.value, ConfigurationTarget.USER_REMOTE);\n\t\t}\n\n\t\tif (deprecatedSetting.workspace !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.WORKSPACE);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.workspace.value, ConfigurationTarget.WORKSPACE);\n\t\t}\n\n\t\tif (deprecatedSetting.workspaceFolder !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.workspaceFolder.value, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t}\n\t}\n\n\tprivate _computeOutputLineHeight(lineHeight: number, outputFontSize: number): number {\n\t\tconst minimumLineHeight = 9;\n\n\t\tif (lineHeight === 0) {\n\t\t\t// use editor line height\n\t\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\t\tconst fontInfo = FontMeasurements.readFontInfo(this.targetWindow, createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(this.targetWindow).value));\n\t\t\tlineHeight = fontInfo.lineHeight;\n\t\t} else if (lineHeight < minimumLineHeight) {\n\t\t\t// Values too small to be line heights in pixels are in ems.\n\t\t\tlet fontSize = outputFontSize;\n\t\t\tif (fontSize === 0) {\n\t\t\t\tfontSize = this.configurationService.getValue<number>('editor.fontSize');\n\t\t\t}\n\n\t\t\tlineHeight = lineHeight * fontSize;\n\t\t}\n\n\t\t// Enforce integer, minimum constraints\n\t\tlineHeight = Math.round(lineHeight);\n\t\tif (lineHeight < minimumLineHeight) {\n\t\t\tlineHeight = minimumLineHeight;\n\t\t}\n\n\t\treturn lineHeight;\n\t}\n\n\tprivate _updateConfiguration(e: IConfigurationChangeEvent) {\n\t\tconst cellStatusBarVisibility = e.affectsConfiguration(NotebookSetting.showCellStatusBar);\n\t\tconst cellToolbarLocation = e.affectsConfiguration(NotebookSetting.cellToolbarLocation);\n\t\tconst cellToolbarInteraction = e.affectsConfiguration(NotebookSetting.cellToolbarVisibility);\n\t\tconst compactView = e.affectsConfiguration(NotebookSetting.compactView);\n\t\tconst focusIndicator = e.affectsConfiguration(NotebookSetting.focusIndicator);\n\t\tconst insertToolbarPosition = e.affectsConfiguration(NotebookSetting.insertToolbarLocation);\n\t\tconst insertToolbarAlignment = e.affectsConfiguration(NotebookSetting.experimentalInsertToolbarAlignment);\n\t\tconst globalToolbar = e.affectsConfiguration(NotebookSetting.globalToolbar);\n\t\tconst stickyScrollEnabled = e.affectsConfiguration(NotebookSetting.stickyScrollEnabled);\n\t\tconst stickyScrollMode = e.affectsConfiguration(NotebookSetting.stickyScrollMode);\n\t\tconst consolidatedOutputButton = e.affectsConfiguration(NotebookSetting.consolidatedOutputButton);\n\t\tconst consolidatedRunButton = e.affectsConfiguration(NotebookSetting.consolidatedRunButton);\n\t\tconst showFoldingControls = e.affectsConfiguration(NotebookSetting.showFoldingControls);\n\t\tconst dragAndDropEnabled = e.affectsConfiguration(NotebookSetting.dragAndDropEnabled);\n\t\tconst fontSize = e.affectsConfiguration('editor.fontSize');\n\t\tconst outputFontSize = e.affectsConfiguration(NotebookSetting.outputFontSize);\n\t\tconst markupFontSize = e.affectsConfiguration(NotebookSetting.markupFontSize);\n\t\tconst markdownLineHeight = e.affectsConfiguration(NotebookSetting.markdownLineHeight);\n\t\tconst fontFamily = e.affectsConfiguration('editor.fontFamily');\n\t\tconst outputFontFamily = e.affectsConfiguration(NotebookSetting.outputFontFamily);\n\t\tconst editorOptionsCustomizations = e.affectsConfiguration(NotebookSetting.cellEditorOptionsCustomizations);\n\t\tconst interactiveWindowCollapseCodeCells = e.affectsConfiguration(NotebookSetting.interactiveWindowCollapseCodeCells);\n\t\tconst outputLineHeight = e.affectsConfiguration(NotebookSetting.outputLineHeight);\n\t\tconst outputScrolling = e.affectsConfiguration(NotebookSetting.outputScrolling);\n\t\tconst outputWordWrap = e.affectsConfiguration(NotebookSetting.outputWordWrap);\n\t\tconst outputLinkifyFilePaths = e.affectsConfiguration(NotebookSetting.LinkifyOutputFilePaths);\n\t\tconst minimalError = e.affectsConfiguration(NotebookSetting.minimalErrorRendering);\n\t\tconst markupFontFamily = e.affectsConfiguration(NotebookSetting.markupFontFamily);\n\n\t\tif (\n\t\t\t!cellStatusBarVisibility\n\t\t\t&& !cellToolbarLocation\n\t\t\t&& !cellToolbarInteraction\n\t\t\t&& !compactView\n\t\t\t&& !focusIndicator\n\t\t\t&& !insertToolbarPosition\n\t\t\t&& !insertToolbarAlignment\n\t\t\t&& !globalToolbar\n\t\t\t&& !stickyScrollEnabled\n\t\t\t&& !stickyScrollMode\n\t\t\t&& !consolidatedOutputButton\n\t\t\t&& !consolidatedRunButton\n\t\t\t&& !showFoldingControls\n\t\t\t&& !dragAndDropEnabled\n\t\t\t&& !fontSize\n\t\t\t&& !outputFontSize\n\t\t\t&& !markupFontSize\n\t\t\t&& !markdownLineHeight\n\t\t\t&& !fontFamily\n\t\t\t&& !outputFontFamily\n\t\t\t&& !editorOptionsCustomizations\n\t\t\t&& !interactiveWindowCollapseCodeCells\n\t\t\t&& !outputLineHeight\n\t\t\t&& !outputScrolling\n\t\t\t&& !outputWordWrap\n\t\t\t&& !outputLinkifyFilePaths\n\t\t\t&& !minimalError\n\t\t\t&& !markupFontFamily) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet configuration = Object.assign({}, this._layoutConfiguration);\n\n\t\tif (cellStatusBarVisibility) {\n\t\t\tconfiguration.showCellStatusBar = this.configurationService.getValue<ShowCellStatusBarType>(NotebookSetting.showCellStatusBar);\n\t\t}\n\n\t\tif (cellToolbarLocation) {\n\t\t\tconfiguration.cellToolbarLocation = this.configurationService.getValue<string | { [key: string]: string }>(NotebookSetting.cellToolbarLocation) ?? { 'default': 'right' };\n\t\t}\n\n\t\tif (cellToolbarInteraction && !this.overrides?.cellToolbarInteraction) {\n\t\t\tconfiguration.cellToolbarInteraction = this.configurationService.getValue<string>(NotebookSetting.cellToolbarVisibility);\n\t\t}\n\n\t\tif (focusIndicator) {\n\t\t\tconfiguration.focusIndicator = this._computeFocusIndicatorOption();\n\t\t}\n\n\t\tif (compactView) {\n\t\t\tconst compactViewValue = this.configurationService.getValue<boolean | undefined>(NotebookSetting.compactView) ?? true;\n\t\t\tconfiguration = Object.assign(configuration, {\n\t\t\t\t...(compactViewValue ? compactConfigConstants : defaultConfigConstants),\n\t\t\t});\n\t\t\tconfiguration.compactView = compactViewValue;\n\t\t}\n\n\t\tif (insertToolbarAlignment) {\n\t\t\tconfiguration.insertToolbarAlignment = this._computeInsertToolbarAlignmentOption();\n\t\t}\n\n\t\tif (insertToolbarPosition) {\n\t\t\tconfiguration.insertToolbarPosition = this._computeInsertToolbarPositionOption(this.isReadonly);\n\t\t}\n\n\t\tif (globalToolbar && this.overrides?.globalToolbar === undefined) {\n\t\t\tconfiguration.globalToolbar = this.configurationService.getValue<boolean>(NotebookSetting.globalToolbar) ?? true;\n\t\t}\n\n\t\tif (stickyScrollEnabled && this.overrides?.stickyScrollEnabled === undefined) {\n\t\t\tconfiguration.stickyScrollEnabled = this.configurationService.getValue<boolean>(NotebookSetting.stickyScrollEnabled) ?? false;\n\t\t}\n\n\t\tif (stickyScrollMode) {\n\t\t\tconfiguration.stickyScrollMode = this.configurationService.getValue<'flat' | 'indented'>(NotebookSetting.stickyScrollMode) ?? 'flat';\n\t\t}\n\n\t\tif (consolidatedOutputButton) {\n\t\t\tconfiguration.consolidatedOutputButton = this.configurationService.getValue<boolean>(NotebookSetting.consolidatedOutputButton) ?? true;\n\t\t}\n\n\t\tif (consolidatedRunButton) {\n\t\t\tconfiguration.consolidatedRunButton = this.configurationService.getValue<boolean>(NotebookSetting.consolidatedRunButton) ?? true;\n\t\t}\n\n\t\tif (showFoldingControls) {\n\t\t\tconfiguration.showFoldingControls = this._computeShowFoldingControlsOption();\n\t\t}\n\n\t\tif (dragAndDropEnabled) {\n\t\t\tconfiguration.dragAndDropEnabled = this.configurationService.getValue<boolean>(NotebookSetting.dragAndDropEnabled) ?? true;\n\t\t}\n\n\t\tif (fontSize) {\n\t\t\tconfiguration.fontSize = this.configurationService.getValue<number>('editor.fontSize');\n\t\t}\n\n\t\tif (outputFontSize || fontSize) {\n\t\t\tconfiguration.outputFontSize = this.configurationService.getValue<number>(NotebookSetting.outputFontSize) || configuration.fontSize;\n\t\t}\n\n\t\tif (markupFontSize) {\n\t\t\tconfiguration.markupFontSize = this.configurationService.getValue<number>(NotebookSetting.markupFontSize);\n\t\t}\n\n\t\tif (markdownLineHeight) {\n\t\t\tconfiguration.markdownLineHeight = this.configurationService.getValue<number>(NotebookSetting.markdownLineHeight);\n\t\t}\n\n\t\tif (outputFontFamily) {\n\t\t\tconfiguration.outputFontFamily = this.configurationService.getValue<string>(NotebookSetting.outputFontFamily);\n\t\t}\n\n\t\tif (editorOptionsCustomizations) {\n\t\t\tconfiguration.editorOptionsCustomizations = this.configurationService.getValue(NotebookSetting.cellEditorOptionsCustomizations);\n\t\t}\n\n\t\tif (interactiveWindowCollapseCodeCells) {\n\t\t\tconfiguration.interactiveWindowCollapseCodeCells = this.configurationService.getValue(NotebookSetting.interactiveWindowCollapseCodeCells);\n\t\t}\n\n\t\tif (outputLineHeight || fontSize || outputFontSize) {\n\t\t\tconst lineHeight = this.configurationService.getValue<number>(NotebookSetting.outputLineHeight);\n\t\t\tconfiguration.outputLineHeight = this._computeOutputLineHeight(lineHeight, configuration.outputFontSize);\n\t\t}\n\n\t\tif (outputWordWrap) {\n\t\t\tconfiguration.outputWordWrap = this.configurationService.getValue<boolean>(NotebookSetting.outputWordWrap);\n\t\t}\n\n\t\tif (outputScrolling) {\n\t\t\tconfiguration.outputScrolling = this.configurationService.getValue<boolean>(NotebookSetting.outputScrolling);\n\t\t}\n\n\t\tif (outputLinkifyFilePaths) {\n\t\t\tconfiguration.outputLinkifyFilePaths = this.configurationService.getValue<boolean>(NotebookSetting.LinkifyOutputFilePaths);\n\t\t}\n\n\t\tif (minimalError) {\n\t\t\tconfiguration.outputMinimalError = this.configurationService.getValue<boolean>(NotebookSetting.minimalErrorRendering);\n\t\t}\n\n\t\tif (markupFontFamily) {\n\t\t\tconfiguration.markupFontFamily = this.configurationService.getValue<string>(NotebookSetting.markupFontFamily);\n\t\t}\n\n\t\tthis._layoutConfiguration = Object.freeze(configuration);\n\n\t\t// trigger event\n\t\tthis._onDidChangeOptions.fire({\n\t\t\tcellStatusBarVisibility,\n\t\t\tcellToolbarLocation,\n\t\t\tcellToolbarInteraction,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tglobalToolbar,\n\t\t\tstickyScrollEnabled,\n\t\t\tstickyScrollMode,\n\t\t\tshowFoldingControls,\n\t\t\tconsolidatedOutputButton,\n\t\t\tconsolidatedRunButton,\n\t\t\tdragAndDropEnabled,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\tmarkupFontSize,\n\t\t\tmarkdownLineHeight,\n\t\t\tfontFamily,\n\t\t\toutputFontFamily,\n\t\t\teditorOptionsCustomizations,\n\t\t\tinteractiveWindowCollapseCodeCells,\n\t\t\toutputLineHeight,\n\t\t\toutputScrolling,\n\t\t\toutputWordWrap,\n\t\t\toutputLinkifyFilePaths,\n\t\t\tminimalError,\n\t\t\tmarkupFontFamily\n\t\t});\n\t}\n\n\tprivate _computeInsertToolbarPositionOption(isReadOnly: boolean) {\n\t\treturn isReadOnly ? 'hidden' : this.configurationService.getValue<'betweenCells' | 'notebookToolbar' | 'both' | 'hidden'>(NotebookSetting.insertToolbarLocation) ?? 'both';\n\t}\n\n\tprivate _computeInsertToolbarAlignmentOption() {\n\t\treturn this.configurationService.getValue<'left' | 'center'>(NotebookSetting.experimentalInsertToolbarAlignment) ?? 'center';\n\t}\n\n\tprivate _computeShowFoldingControlsOption() {\n\t\treturn this.configurationService.getValue<'always' | 'never' | 'mouseover'>(NotebookSetting.showFoldingControls) ?? 'mouseover';\n\t}\n\n\tprivate _computeFocusIndicatorOption() {\n\t\treturn this.configurationService.getValue<'border' | 'gutter'>(NotebookSetting.focusIndicator) ?? 'gutter';\n\t}\n\n\tprivate _computeStickyScrollModeOption() {\n\t\treturn this.configurationService.getValue<'flat' | 'indented'>(NotebookSetting.stickyScrollMode) ?? 'flat';\n\t}\n\n\tgetCellCollapseDefault(): NotebookCellDefaultCollapseConfig {\n\t\treturn this._layoutConfiguration.interactiveWindowCollapseCodeCells === 'never' ?\n\t\t\t{\n\t\t\t\tcodeCell: {\n\t\t\t\t\tinputCollapsed: false\n\t\t\t\t}\n\t\t\t} : {\n\t\t\t\tcodeCell: {\n\t\t\t\t\tinputCollapsed: true\n\t\t\t\t}\n\t\t\t};\n\t}\n\n\tgetLayoutConfiguration(): NotebookLayoutConfiguration & NotebookDisplayOptions {\n\t\treturn this._layoutConfiguration;\n\t}\n\n\tgetDisplayOptions(): NotebookDisplayOptions {\n\t\treturn this._layoutConfiguration;\n\t}\n\n\tgetCellEditorContainerLeftMargin() {\n\t\tconst {\n\t\t\tcodeCellLeftMargin,\n\t\t\tcellRunGutter\n\t\t} = this._layoutConfiguration;\n\t\treturn codeCellLeftMargin + cellRunGutter;\n\t}\n\n\tcomputeCollapsedMarkdownCellHeight(viewType: string): number {\n\t\tconst { bottomToolbarGap } = this.computeBottomToolbarDimensions(viewType);\n\t\treturn this._layoutConfiguration.markdownCellTopMargin\n\t\t\t+ this._layoutConfiguration.collapsedIndicatorHeight\n\t\t\t+ bottomToolbarGap\n\t\t\t+ this._layoutConfiguration.markdownCellBottomMargin;\n\t}\n\n\tcomputeBottomToolbarOffset(totalHeight: number, viewType: string) {\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } = this.computeBottomToolbarDimensions(viewType);\n\n\t\treturn totalHeight\n\t\t\t- bottomToolbarGap\n\t\t\t- bottomToolbarHeight / 2;\n\t}\n\n\tcomputeCodeCellEditorWidth(outerWidth: number): number {\n\t\treturn outerWidth - (\n\t\t\tthis._layoutConfiguration.codeCellLeftMargin\n\t\t\t+ this._layoutConfiguration.cellRunGutter\n\t\t\t+ this._layoutConfiguration.cellRightMargin\n\t\t);\n\t}\n\n\tcomputeMarkdownCellEditorWidth(outerWidth: number): number {\n\t\treturn outerWidth\n\t\t\t- this._layoutConfiguration.markdownCellGutter\n\t\t\t- this._layoutConfiguration.markdownCellLeftMargin\n\t\t\t- this._layoutConfiguration.cellRightMargin;\n\t}\n\n\tcomputeStatusBarHeight(): number {\n\t\treturn this._layoutConfiguration.cellStatusBarHeight;\n\t}\n\n\tprivate _computeBottomToolbarDimensions(compactView: boolean, insertToolbarPosition: 'betweenCells' | 'notebookToolbar' | 'both' | 'hidden', insertToolbarAlignment: 'left' | 'center', cellToolbar: 'right' | 'left' | 'hidden'): { bottomToolbarGap: number; bottomToolbarHeight: number } {\n\t\tif (insertToolbarAlignment === 'left' || cellToolbar !== 'hidden') {\n\t\t\treturn {\n\t\t\t\tbottomToolbarGap: 18,\n\t\t\t\tbottomToolbarHeight: 18\n\t\t\t};\n\t\t}\n\n\t\tif (insertToolbarPosition === 'betweenCells' || insertToolbarPosition === 'both') {\n\t\t\treturn compactView ? {\n\t\t\t\tbottomToolbarGap: 12,\n\t\t\t\tbottomToolbarHeight: 20\n\t\t\t} : {\n\t\t\t\tbottomToolbarGap: 20,\n\t\t\t\tbottomToolbarHeight: 20\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tbottomToolbarGap: 0,\n\t\t\t\tbottomToolbarHeight: 0\n\t\t\t};\n\t\t}\n\t}\n\n\tcomputeBottomToolbarDimensions(viewType?: string): { bottomToolbarGap: number; bottomToolbarHeight: number } {\n\t\tconst configuration = this._layoutConfiguration;\n\t\tconst cellToolbarPosition = this.computeCellToolbarLocation(viewType);\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } = this._computeBottomToolbarDimensions(configuration.compactView, configuration.insertToolbarPosition, configuration.insertToolbarAlignment, cellToolbarPosition);\n\t\treturn {\n\t\t\tbottomToolbarGap,\n\t\t\tbottomToolbarHeight\n\t\t};\n\t}\n\n\tcomputeCellToolbarLocation(viewType?: string): 'right' | 'left' | 'hidden' {\n\t\tconst cellToolbarLocation = this._layoutConfiguration.cellToolbarLocation;\n\n\t\tif (typeof cellToolbarLocation === 'string') {\n\t\t\tif (cellToolbarLocation === 'left' || cellToolbarLocation === 'right' || cellToolbarLocation === 'hidden') {\n\t\t\t\treturn cellToolbarLocation;\n\t\t\t}\n\t\t} else {\n\t\t\tif (viewType) {\n\t\t\t\tconst notebookSpecificSetting = cellToolbarLocation[viewType] ?? cellToolbarLocation['default'];\n\t\t\t\tlet cellToolbarLocationForCurrentView: 'right' | 'left' | 'hidden' = 'right';\n\n\t\t\t\tswitch (notebookSpecificSetting) {\n\t\t\t\t\tcase 'left':\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'left';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'right':\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'right';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hidden':\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'hidden';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'right';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn cellToolbarLocationForCurrentView;\n\t\t\t}\n\t\t}\n\n\t\treturn 'right';\n\t}\n\n\tcomputeTopInsertToolbarHeight(viewType?: string): number {\n\t\tif (this._layoutConfiguration.insertToolbarPosition === 'betweenCells' || this._layoutConfiguration.insertToolbarPosition === 'both') {\n\t\t\treturn SCROLLABLE_ELEMENT_PADDING_TOP;\n\t\t}\n\n\t\tconst cellToolbarLocation = this.computeCellToolbarLocation(viewType);\n\n\t\tif (cellToolbarLocation === 'left' || cellToolbarLocation === 'right') {\n\t\t\treturn SCROLLABLE_ELEMENT_PADDING_TOP;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcomputeEditorPadding(internalMetadata: NotebookCellInternalMetadata, cellUri: URI) {\n\t\treturn {\n\t\t\ttop: this._editorTopPadding,\n\t\t\tbottom: this.statusBarIsVisible(internalMetadata, cellUri)\n\t\t\t\t? this._layoutConfiguration.editorBottomPadding\n\t\t\t\t: this._layoutConfiguration.editorBottomPaddingWithoutStatusBar\n\t\t};\n\t}\n\n\n\tcomputeEditorStatusbarHeight(internalMetadata: NotebookCellInternalMetadata, cellUri: URI) {\n\t\treturn this.statusBarIsVisible(internalMetadata, cellUri) ? this.computeStatusBarHeight() : 0;\n\t}\n\n\tprivate statusBarIsVisible(internalMetadata: NotebookCellInternalMetadata, cellUri: URI): boolean {\n\t\tconst exe = this.notebookExecutionStateService.getCellExecution(cellUri);\n\t\tif (this._layoutConfiguration.showCellStatusBar === 'visible') {\n\t\t\treturn true;\n\t\t} else if (this._layoutConfiguration.showCellStatusBar === 'visibleAfterExecute') {\n\t\t\treturn typeof internalMetadata.lastRunSuccess === 'boolean' || exe !== undefined;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcomputeWebviewOptions() {\n\t\treturn {\n\t\t\toutputNodePadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\toutputNodeLeftPadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\tpreviewNodePadding: this._layoutConfiguration.markdownPreviewPadding,\n\t\t\tmarkdownLeftMargin: this._layoutConfiguration.markdownCellGutter + this._layoutConfiguration.markdownCellLeftMargin,\n\t\t\tleftMargin: this._layoutConfiguration.codeCellLeftMargin,\n\t\t\trightMargin: this._layoutConfiguration.cellRightMargin,\n\t\t\trunGutter: this._layoutConfiguration.cellRunGutter,\n\t\t\tdragAndDropEnabled: this._layoutConfiguration.dragAndDropEnabled,\n\t\t\tfontSize: this._layoutConfiguration.fontSize,\n\t\t\toutputFontSize: this._layoutConfiguration.outputFontSize,\n\t\t\toutputFontFamily: this._layoutConfiguration.outputFontFamily,\n\t\t\tmarkupFontSize: this._layoutConfiguration.markupFontSize,\n\t\t\tmarkdownLineHeight: this._layoutConfiguration.markdownLineHeight,\n\t\t\toutputLineHeight: this._layoutConfiguration.outputLineHeight,\n\t\t\toutputScrolling: this._layoutConfiguration.outputScrolling,\n\t\t\toutputWordWrap: this._layoutConfiguration.outputWordWrap,\n\t\t\toutputLineLimit: this._layoutConfiguration.outputLineLimit,\n\t\t\toutputLinkifyFilePaths: this._layoutConfiguration.outputLinkifyFilePaths,\n\t\t\tminimalError: this._layoutConfiguration.outputMinimalError,\n\t\t\tmarkupFontFamily: this._layoutConfiguration.markupFontFamily\n\t\t};\n\t}\n\n\tcomputeDiffWebviewOptions() {\n\t\treturn {\n\t\t\toutputNodePadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\toutputNodeLeftPadding: 0,\n\t\t\tpreviewNodePadding: this._layoutConfiguration.markdownPreviewPadding,\n\t\t\tmarkdownLeftMargin: 0,\n\t\t\tleftMargin: 32,\n\t\t\trightMargin: 0,\n\t\t\trunGutter: 0,\n\t\t\tdragAndDropEnabled: false,\n\t\t\tfontSize: this._layoutConfiguration.fontSize,\n\t\t\toutputFontSize: this._layoutConfiguration.outputFontSize,\n\t\t\toutputFontFamily: this._layoutConfiguration.outputFontFamily,\n\t\t\tmarkupFontSize: this._layoutConfiguration.markupFontSize,\n\t\t\tmarkdownLineHeight: this._layoutConfiguration.markdownLineHeight,\n\t\t\toutputLineHeight: this._layoutConfiguration.outputLineHeight,\n\t\t\toutputScrolling: this._layoutConfiguration.outputScrolling,\n\t\t\toutputWordWrap: this._layoutConfiguration.outputWordWrap,\n\t\t\toutputLineLimit: this._layoutConfiguration.outputLineLimit,\n\t\t\toutputLinkifyFilePaths: false,\n\t\t\tminimalError: false,\n\t\t\tmarkupFontFamily: this._layoutConfiguration.markupFontFamily\n\t\t};\n\t}\n\n\tcomputeIndicatorPosition(totalHeight: number, foldHintHeight: number, viewType?: string) {\n\t\tconst { bottomToolbarGap } = this.computeBottomToolbarDimensions(viewType);\n\n\t\treturn {\n\t\t\tbottomIndicatorTop: totalHeight - bottomToolbarGap - this._layoutConfiguration.cellBottomMargin - foldHintHeight,\n\t\t\tverticalIndicatorHeight: totalHeight - bottomToolbarGap - foldHintHeight\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PixelRatio } from '../../../../base/browser/pixelRatio.js';\nimport { CodeWindow } from '../../../../base/browser/window.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { observableValue } from '../../../../base/common/observable.js';\nimport { isObject } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { FontMeasurements } from '../../../../editor/browser/config/fontMeasurements.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { createBareFontInfoFromRawSettings } from '../../../../editor/common/config/fontInfoFromSettings.js';\nimport { ConfigurationTarget, IConfigurationChangeEvent, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { NotebookTextModel } from '../common/model/notebookTextModel.js';\nimport { InteractiveWindowCollapseCodeCells, NotebookCellDefaultCollapseConfig, NotebookCellInternalMetadata, NotebookSetting, ShowCellStatusBarType } from '../common/notebookCommon.js';\nimport { INotebookExecutionStateService } from '../common/notebookExecutionStateService.js';\n\nconst SCROLLABLE_ELEMENT_PADDING_TOP = 18;\n\nexport const OutputInnerContainerTopPadding = 4;\n\nexport interface NotebookDisplayOptions { // TODO @Yoyokrazy rename to a more generic name, not display\n\tshowCellStatusBar: ShowCellStatusBarType;\n\tcellToolbarLocation: string | { [key: string]: string };\n\tcellToolbarInteraction: string;\n\tcompactView: boolean;\n\tfocusIndicator: 'border' | 'gutter';\n\tinsertToolbarPosition: 'betweenCells' | 'notebookToolbar' | 'both' | 'hidden';\n\tinsertToolbarAlignment: 'left' | 'center';\n\tglobalToolbar: boolean;\n\tstickyScrollEnabled: boolean;\n\tstickyScrollMode: 'flat' | 'indented';\n\tconsolidatedOutputButton: boolean;\n\tconsolidatedRunButton: boolean;\n\tshowFoldingControls: 'always' | 'never' | 'mouseover';\n\tdragAndDropEnabled: boolean;\n\tinteractiveWindowCollapseCodeCells: InteractiveWindowCollapseCodeCells;\n\toutputScrolling: boolean;\n\toutputWordWrap: boolean;\n\toutputLineLimit: number;\n\toutputLinkifyFilePaths: boolean;\n\toutputMinimalError: boolean;\n\tfontSize: number;\n\toutputFontSize: number;\n\toutputFontFamily: string;\n\toutputLineHeight: number;\n\tmarkupFontSize: number;\n\tmarkdownLineHeight: number;\n\teditorOptionsCustomizations: Partial<{\n\t\t'editor.indentSize': 'tabSize' | number;\n\t\t'editor.tabSize': number;\n\t\t'editor.insertSpaces': boolean;\n\t}> | undefined;\n\tmarkupFontFamily: string;\n\tdisableRulers: boolean | undefined;\n}\n\nexport interface NotebookLayoutConfiguration {\n\tcellRightMargin: number;\n\tcellRunGutter: number;\n\tcellTopMargin: number;\n\tcellBottomMargin: number;\n\tcellOutputPadding: number;\n\tcodeCellLeftMargin: number;\n\tmarkdownCellLeftMargin: number;\n\tmarkdownCellGutter: number;\n\tmarkdownCellTopMargin: number;\n\tmarkdownCellBottomMargin: number;\n\tmarkdownPreviewPadding: number;\n\tmarkdownFoldHintHeight: number;\n\teditorToolbarHeight: number;\n\teditorTopPadding: number;\n\teditorBottomPadding: number;\n\teditorBottomPaddingWithoutStatusBar: number;\n\tcollapsedIndicatorHeight: number;\n\tcellStatusBarHeight: number;\n\tfocusIndicatorLeftMargin: number;\n\tfocusIndicatorGap: number;\n}\n\nexport interface NotebookOptionsChangeEvent {\n\treadonly cellStatusBarVisibility?: boolean;\n\treadonly cellToolbarLocation?: boolean;\n\treadonly cellToolbarInteraction?: boolean;\n\treadonly editorTopPadding?: boolean;\n\treadonly compactView?: boolean;\n\treadonly focusIndicator?: boolean;\n\treadonly insertToolbarPosition?: boolean;\n\treadonly insertToolbarAlignment?: boolean;\n\treadonly globalToolbar?: boolean;\n\treadonly stickyScrollEnabled?: boolean;\n\treadonly stickyScrollMode?: boolean;\n\treadonly showFoldingControls?: boolean;\n\treadonly consolidatedOutputButton?: boolean;\n\treadonly consolidatedRunButton?: boolean;\n\treadonly dragAndDropEnabled?: boolean;\n\treadonly fontSize?: boolean;\n\treadonly outputFontSize?: boolean;\n\treadonly markupFontSize?: boolean;\n\treadonly markdownLineHeight?: boolean;\n\treadonly fontFamily?: boolean;\n\treadonly outputFontFamily?: boolean;\n\treadonly editorOptionsCustomizations?: boolean;\n\treadonly interactiveWindowCollapseCodeCells?: boolean;\n\treadonly outputLineHeight?: boolean;\n\treadonly outputWordWrap?: boolean;\n\treadonly outputScrolling?: boolean;\n\treadonly outputLinkifyFilePaths?: boolean;\n\treadonly minimalError?: boolean;\n\treadonly readonly?: boolean;\n\treadonly markupFontFamily?: boolean;\n}\n\nconst defaultConfigConstants = Object.freeze({\n\tcodeCellLeftMargin: 28,\n\tcellRunGutter: 32,\n\tmarkdownCellTopMargin: 8,\n\tmarkdownCellBottomMargin: 8,\n\tmarkdownCellLeftMargin: 0,\n\tmarkdownCellGutter: 32,\n\tfocusIndicatorLeftMargin: 4\n});\n\nconst compactConfigConstants = Object.freeze({\n\tcodeCellLeftMargin: 8,\n\tcellRunGutter: 36,\n\tmarkdownCellTopMargin: 6,\n\tmarkdownCellBottomMargin: 6,\n\tmarkdownCellLeftMargin: 8,\n\tmarkdownCellGutter: 36,\n\tfocusIndicatorLeftMargin: 4\n});\n\nexport class NotebookOptions extends Disposable {\n\tprivate _layoutConfiguration: NotebookLayoutConfiguration & NotebookDisplayOptions;\n\tprotected readonly _onDidChangeOptions = this._register(new Emitter<NotebookOptionsChangeEvent>());\n\treadonly onDidChangeOptions = this._onDidChangeOptions.event;\n\tprivate _editorTopPadding: number = 12;\n\n\treadonly previousModelToCompare = observableValue<NotebookTextModel | undefined>('previousModelToCompare', undefined);\n\n\tconstructor(\n\t\treadonly targetWindow: CodeWindow,\n\t\tprivate isReadonly: boolean,\n\t\tprivate readonly overrides: { cellToolbarInteraction: string; globalToolbar: boolean; stickyScrollEnabled: boolean; dragAndDropEnabled: boolean; disableRulers: boolean } | undefined,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@INotebookExecutionStateService private readonly notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t) {\n\t\tsuper();\n\t\tconst showCellStatusBar = this.configurationService.getValue<ShowCellStatusBarType>(NotebookSetting.showCellStatusBar);\n\t\tconst globalToolbar = overrides?.globalToolbar ?? this.configurationService.getValue<boolean | undefined>(NotebookSetting.globalToolbar) ?? true;\n\t\tconst stickyScrollEnabled = overrides?.stickyScrollEnabled ?? this.configurationService.getValue<boolean | undefined>(NotebookSetting.stickyScrollEnabled) ?? false;\n\t\tconst stickyScrollMode = this._computeStickyScrollModeOption();\n\t\tconst consolidatedOutputButton = this.configurationService.getValue<boolean | undefined>(NotebookSetting.consolidatedOutputButton) ?? true;\n\t\tconst consolidatedRunButton = this.configurationService.getValue<boolean | undefined>(NotebookSetting.consolidatedRunButton) ?? false;\n\t\tconst dragAndDropEnabled = overrides?.dragAndDropEnabled ?? this.configurationService.getValue<boolean | undefined>(NotebookSetting.dragAndDropEnabled) ?? true;\n\t\tconst cellToolbarLocation = this.configurationService.getValue<string | { [key: string]: string }>(NotebookSetting.cellToolbarLocation) ?? { 'default': 'right' };\n\t\tconst cellToolbarInteraction = overrides?.cellToolbarInteraction ?? this.configurationService.getValue<string>(NotebookSetting.cellToolbarVisibility);\n\t\tconst compactView = this.configurationService.getValue<boolean | undefined>(NotebookSetting.compactView) ?? true;\n\t\tconst focusIndicator = this._computeFocusIndicatorOption();\n\t\tconst insertToolbarPosition = this._computeInsertToolbarPositionOption(this.isReadonly);\n\t\tconst insertToolbarAlignment = this._computeInsertToolbarAlignmentOption();\n\t\tconst showFoldingControls = this._computeShowFoldingControlsOption();\n\t\t// const { bottomToolbarGap, bottomToolbarHeight } = this._computeBottomToolbarDimensions(compactView, insertToolbarPosition, insertToolbarAlignment);\n\t\tconst fontSize = this.configurationService.getValue<number>('editor.fontSize');\n\t\tconst markupFontSize = this.configurationService.getValue<number>(NotebookSetting.markupFontSize);\n\t\tconst markdownLineHeight = this.configurationService.getValue<number>(NotebookSetting.markdownLineHeight);\n\t\tlet editorOptionsCustomizations = this.configurationService.getValue<Partial<{\n\t\t\t'editor.indentSize': 'tabSize' | number;\n\t\t\t'editor.tabSize': number;\n\t\t\t'editor.insertSpaces': boolean;\n\t\t}>>(NotebookSetting.cellEditorOptionsCustomizations) ?? {};\n\t\teditorOptionsCustomizations = isObject(editorOptionsCustomizations) ? editorOptionsCustomizations : {};\n\t\tconst interactiveWindowCollapseCodeCells: InteractiveWindowCollapseCodeCells = this.configurationService.getValue(NotebookSetting.interactiveWindowCollapseCodeCells);\n\n\t\t// TOOD @rebornix remove after a few iterations of deprecated setting\n\t\tlet outputLineHeightSettingValue: number;\n\t\tconst deprecatedOutputLineHeightSetting = this.configurationService.getValue<number>(NotebookSetting.outputLineHeightDeprecated);\n\t\tif (deprecatedOutputLineHeightSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputLineHeightDeprecated, NotebookSetting.outputLineHeight);\n\t\t\toutputLineHeightSettingValue = deprecatedOutputLineHeightSetting;\n\t\t} else {\n\t\t\toutputLineHeightSettingValue = this.configurationService.getValue<number>(NotebookSetting.outputLineHeight);\n\t\t}\n\n\t\tlet outputFontSize: number;\n\t\tconst deprecatedOutputFontSizeSetting = this.configurationService.getValue<number>(NotebookSetting.outputFontSizeDeprecated);\n\t\tif (deprecatedOutputFontSizeSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputFontSizeDeprecated, NotebookSetting.outputFontSize);\n\t\t\toutputFontSize = deprecatedOutputFontSizeSetting;\n\t\t} else {\n\t\t\toutputFontSize = this.configurationService.getValue<number>(NotebookSetting.outputFontSize) || fontSize;\n\t\t}\n\n\t\tlet outputFontFamily: string;\n\t\tconst deprecatedOutputFontFamilySetting = this.configurationService.getValue<string>(NotebookSetting.outputFontFamilyDeprecated);\n\t\tif (deprecatedOutputFontFamilySetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputFontFamilyDeprecated, NotebookSetting.outputFontFamily);\n\t\t\toutputFontFamily = deprecatedOutputFontFamilySetting;\n\t\t} else {\n\t\t\toutputFontFamily = this.configurationService.getValue<string>(NotebookSetting.outputFontFamily);\n\t\t}\n\n\t\tlet outputScrolling: boolean;\n\t\tconst deprecatedOutputScrollingSetting = this.configurationService.getValue<boolean>(NotebookSetting.outputScrollingDeprecated);\n\t\tif (deprecatedOutputScrollingSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(NotebookSetting.outputScrollingDeprecated, NotebookSetting.outputScrolling);\n\t\t\toutputScrolling = deprecatedOutputScrollingSetting;\n\t\t} else {\n\t\t\toutputScrolling = this.configurationService.getValue<boolean>(NotebookSetting.outputScrolling);\n\t\t}\n\n\t\tconst outputLineHeight = this._computeOutputLineHeight(outputLineHeightSettingValue, outputFontSize);\n\t\tconst outputWordWrap = this.configurationService.getValue<boolean>(NotebookSetting.outputWordWrap);\n\t\tconst outputLineLimit = this.configurationService.getValue<number>(NotebookSetting.textOutputLineLimit) ?? 30;\n\t\tconst linkifyFilePaths = this.configurationService.getValue<boolean>(NotebookSetting.LinkifyOutputFilePaths) ?? true;\n\t\tconst minimalErrors = this.configurationService.getValue<boolean>(NotebookSetting.minimalErrorRendering);\n\t\tconst markupFontFamily = this.configurationService.getValue<string>(NotebookSetting.markupFontFamily);\n\n\t\tconst editorTopPadding = this._computeEditorTopPadding();\n\n\t\tthis._layoutConfiguration = {\n\t\t\t...(compactView ? compactConfigConstants : defaultConfigConstants),\n\t\t\tcellTopMargin: 6,\n\t\t\tcellBottomMargin: 6,\n\t\t\tcellRightMargin: 16,\n\t\t\tcellStatusBarHeight: 22,\n\t\t\tcellOutputPadding: 8,\n\t\t\tmarkdownPreviewPadding: 8,\n\t\t\t// bottomToolbarHeight: bottomToolbarHeight,\n\t\t\t// bottomToolbarGap: bottomToolbarGap,\n\t\t\teditorToolbarHeight: 0,\n\t\t\teditorTopPadding: editorTopPadding,\n\t\t\teditorBottomPadding: 4,\n\t\t\teditorBottomPaddingWithoutStatusBar: 12,\n\t\t\tcollapsedIndicatorHeight: 28,\n\t\t\tshowCellStatusBar,\n\t\t\tglobalToolbar,\n\t\t\tstickyScrollEnabled,\n\t\t\tstickyScrollMode,\n\t\t\tconsolidatedOutputButton,\n\t\t\tconsolidatedRunButton,\n\t\t\tdragAndDropEnabled,\n\t\t\tcellToolbarLocation,\n\t\t\tcellToolbarInteraction,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tshowFoldingControls,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\toutputFontFamily,\n\t\t\toutputLineHeight,\n\t\t\tmarkupFontSize,\n\t\t\tmarkdownLineHeight,\n\t\t\teditorOptionsCustomizations,\n\t\t\tfocusIndicatorGap: 3,\n\t\t\tinteractiveWindowCollapseCodeCells,\n\t\t\tmarkdownFoldHintHeight: 22,\n\t\t\toutputScrolling: outputScrolling,\n\t\t\toutputWordWrap: outputWordWrap,\n\t\t\toutputLineLimit: outputLineLimit,\n\t\t\toutputLinkifyFilePaths: linkifyFilePaths,\n\t\t\toutputMinimalError: minimalErrors,\n\t\t\tmarkupFontFamily,\n\t\t\tdisableRulers: overrides?.disableRulers,\n\t\t};\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tthis._updateConfiguration(e);\n\t\t}));\n\t}\n\n\tupdateOptions(isReadonly: boolean) {\n\t\tif (this.isReadonly !== isReadonly) {\n\t\t\tthis.isReadonly = isReadonly;\n\n\t\t\tthis._updateConfiguration({\n\t\t\t\taffectsConfiguration(configuration: string): boolean {\n\t\t\t\t\treturn configuration === NotebookSetting.insertToolbarLocation;\n\t\t\t\t},\n\t\t\t\tsource: ConfigurationTarget.DEFAULT,\n\t\t\t\taffectedKeys: new Set([NotebookSetting.insertToolbarLocation]),\n\t\t\t\tchange: { keys: [NotebookSetting.insertToolbarLocation], overrides: [] },\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _computeEditorTopPadding(): number {\n\t\tlet decorationTriggeredAdjustment = false;\n\n\t\tconst updateEditorTopPadding = (top: number) => {\n\t\t\tthis._editorTopPadding = top;\n\t\t\tconst configuration = Object.assign({}, this._layoutConfiguration);\n\t\t\tconfiguration.editorTopPadding = this._editorTopPadding;\n\t\t\tthis._layoutConfiguration = configuration;\n\t\t\tthis._onDidChangeOptions.fire({ editorTopPadding: true });\n\t\t};\n\n\t\tconst decorationCheckSet = new Set<string>();\n\t\tconst onDidAddDecorationType = (e: string) => {\n\t\t\tif (decorationTriggeredAdjustment) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (decorationCheckSet.has(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst options = this.codeEditorService.resolveDecorationOptions(e, true);\n\t\t\t\tif (options.afterContentClassName || options.beforeContentClassName) {\n\t\t\t\t\tconst cssRules = this.codeEditorService.resolveDecorationCSSRules(e);\n\t\t\t\t\tif (cssRules !== null) {\n\t\t\t\t\t\tfor (let i = 0; i < cssRules.length; i++) {\n\t\t\t\t\t\t\t// The following ways to index into the list are equivalent\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t((cssRules[i] as CSSStyleRule).selectorText.endsWith('::after') || (cssRules[i] as CSSStyleRule).selectorText.endsWith('::after'))\n\t\t\t\t\t\t\t\t&& (cssRules[i] as CSSStyleRule).cssText.indexOf('top:') > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// there is a `::before` or `::after` text decoration whose position is above or below current line\n\t\t\t\t\t\t\t\t// we at least make sure that the editor top padding is at least one line\n\t\t\t\t\t\t\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\t\t\t\t\t\t\tupdateEditorTopPadding(createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(this.targetWindow).value).lineHeight + 2);\n\t\t\t\t\t\t\t\tdecorationTriggeredAdjustment = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdecorationCheckSet.add(e);\n\t\t\t} catch (_ex) {\n\t\t\t\t// do not throw and break notebook\n\t\t\t}\n\n\t\t};\n\t\tthis._register(this.codeEditorService.onDecorationTypeRegistered(onDidAddDecorationType));\n\t\tthis.codeEditorService.listDecorationTypes().forEach(onDidAddDecorationType);\n\n\t\treturn this._editorTopPadding;\n\t}\n\n\tprivate _migrateDeprecatedSetting(deprecatedKey: string, key: string): void {\n\t\tconst deprecatedSetting = this.configurationService.inspect(deprecatedKey);\n\n\t\tif (deprecatedSetting.application !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.APPLICATION);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.application.value, ConfigurationTarget.APPLICATION);\n\t\t}\n\n\t\tif (deprecatedSetting.user !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.USER);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.user.value, ConfigurationTarget.USER);\n\t\t}\n\n\t\tif (deprecatedSetting.userLocal !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.USER_LOCAL);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.userLocal.value, ConfigurationTarget.USER_LOCAL);\n\t\t}\n\n\t\tif (deprecatedSetting.userRemote !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.USER_REMOTE);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.userRemote.value, ConfigurationTarget.USER_REMOTE);\n\t\t}\n\n\t\tif (deprecatedSetting.workspace !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.WORKSPACE);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.workspace.value, ConfigurationTarget.WORKSPACE);\n\t\t}\n\n\t\tif (deprecatedSetting.workspaceFolder !== undefined) {\n\t\t\tthis.configurationService.updateValue(deprecatedKey, undefined, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t\tthis.configurationService.updateValue(key, deprecatedSetting.workspaceFolder.value, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t}\n\t}\n\n\tprivate _computeOutputLineHeight(lineHeight: number, outputFontSize: number): number {\n\t\tconst minimumLineHeight = 9;\n\n\t\tif (lineHeight === 0) {\n\t\t\t// use editor line height\n\t\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\t\tconst fontInfo = FontMeasurements.readFontInfo(this.targetWindow, createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(this.targetWindow).value));\n\t\t\tlineHeight = fontInfo.lineHeight;\n\t\t} else if (lineHeight < minimumLineHeight) {\n\t\t\t// Values too small to be line heights in pixels are in ems.\n\t\t\tlet fontSize = outputFontSize;\n\t\t\tif (fontSize === 0) {\n\t\t\t\tfontSize = this.configurationService.getValue<number>('editor.fontSize');\n\t\t\t}\n\n\t\t\tlineHeight = lineHeight * fontSize;\n\t\t}\n\n\t\t// Enforce integer, minimum constraints\n\t\tlineHeight = Math.round(lineHeight);\n\t\tif (lineHeight < minimumLineHeight) {\n\t\t\tlineHeight = minimumLineHeight;\n\t\t}\n\n\t\treturn lineHeight;\n\t}\n\n\tprivate _updateConfiguration(e: IConfigurationChangeEvent) {\n\t\tconst cellStatusBarVisibility = e.affectsConfiguration(NotebookSetting.showCellStatusBar);\n\t\tconst cellToolbarLocation = e.affectsConfiguration(NotebookSetting.cellToolbarLocation);\n\t\tconst cellToolbarInteraction = e.affectsConfiguration(NotebookSetting.cellToolbarVisibility);\n\t\tconst compactView = e.affectsConfiguration(NotebookSetting.compactView);\n\t\tconst focusIndicator = e.affectsConfiguration(NotebookSetting.focusIndicator);\n\t\tconst insertToolbarPosition = e.affectsConfiguration(NotebookSetting.insertToolbarLocation);\n\t\tconst insertToolbarAlignment = e.affectsConfiguration(NotebookSetting.experimentalInsertToolbarAlignment);\n\t\tconst globalToolbar = e.affectsConfiguration(NotebookSetting.globalToolbar);\n\t\tconst stickyScrollEnabled = e.affectsConfiguration(NotebookSetting.stickyScrollEnabled);\n\t\tconst stickyScrollMode = e.affectsConfiguration(NotebookSetting.stickyScrollMode);\n\t\tconst consolidatedOutputButton = e.affectsConfiguration(NotebookSetting.consolidatedOutputButton);\n\t\tconst consolidatedRunButton = e.affectsConfiguration(NotebookSetting.consolidatedRunButton);\n\t\tconst showFoldingControls = e.affectsConfiguration(NotebookSetting.showFoldingControls);\n\t\tconst dragAndDropEnabled = e.affectsConfiguration(NotebookSetting.dragAndDropEnabled);\n\t\tconst fontSize = e.affectsConfiguration('editor.fontSize');\n\t\tconst outputFontSize = e.affectsConfiguration(NotebookSetting.outputFontSize);\n\t\tconst markupFontSize = e.affectsConfiguration(NotebookSetting.markupFontSize);\n\t\tconst markdownLineHeight = e.affectsConfiguration(NotebookSetting.markdownLineHeight);\n\t\tconst fontFamily = e.affectsConfiguration('editor.fontFamily');\n\t\tconst outputFontFamily = e.affectsConfiguration(NotebookSetting.outputFontFamily);\n\t\tconst editorOptionsCustomizations = e.affectsConfiguration(NotebookSetting.cellEditorOptionsCustomizations);\n\t\tconst interactiveWindowCollapseCodeCells = e.affectsConfiguration(NotebookSetting.interactiveWindowCollapseCodeCells);\n\t\tconst outputLineHeight = e.affectsConfiguration(NotebookSetting.outputLineHeight);\n\t\tconst outputScrolling = e.affectsConfiguration(NotebookSetting.outputScrolling);\n\t\tconst outputWordWrap = e.affectsConfiguration(NotebookSetting.outputWordWrap);\n\t\tconst outputLinkifyFilePaths = e.affectsConfiguration(NotebookSetting.LinkifyOutputFilePaths);\n\t\tconst minimalError = e.affectsConfiguration(NotebookSetting.minimalErrorRendering);\n\t\tconst markupFontFamily = e.affectsConfiguration(NotebookSetting.markupFontFamily);\n\n\t\tif (\n\t\t\t!cellStatusBarVisibility\n\t\t\t&& !cellToolbarLocation\n\t\t\t&& !cellToolbarInteraction\n\t\t\t&& !compactView\n\t\t\t&& !focusIndicator\n\t\t\t&& !insertToolbarPosition\n\t\t\t&& !insertToolbarAlignment\n\t\t\t&& !globalToolbar\n\t\t\t&& !stickyScrollEnabled\n\t\t\t&& !stickyScrollMode\n\t\t\t&& !consolidatedOutputButton\n\t\t\t&& !consolidatedRunButton\n\t\t\t&& !showFoldingControls\n\t\t\t&& !dragAndDropEnabled\n\t\t\t&& !fontSize\n\t\t\t&& !outputFontSize\n\t\t\t&& !markupFontSize\n\t\t\t&& !markdownLineHeight\n\t\t\t&& !fontFamily\n\t\t\t&& !outputFontFamily\n\t\t\t&& !editorOptionsCustomizations\n\t\t\t&& !interactiveWindowCollapseCodeCells\n\t\t\t&& !outputLineHeight\n\t\t\t&& !outputScrolling\n\t\t\t&& !outputWordWrap\n\t\t\t&& !outputLinkifyFilePaths\n\t\t\t&& !minimalError\n\t\t\t&& !markupFontFamily) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet configuration = Object.assign({}, this._layoutConfiguration);\n\n\t\tif (cellStatusBarVisibility) {\n\t\t\tconfiguration.showCellStatusBar = this.configurationService.getValue<ShowCellStatusBarType>(NotebookSetting.showCellStatusBar);\n\t\t}\n\n\t\tif (cellToolbarLocation) {\n\t\t\tconfiguration.cellToolbarLocation = this.configurationService.getValue<string | { [key: string]: string }>(NotebookSetting.cellToolbarLocation) ?? { 'default': 'right' };\n\t\t}\n\n\t\tif (cellToolbarInteraction && !this.overrides?.cellToolbarInteraction) {\n\t\t\tconfiguration.cellToolbarInteraction = this.configurationService.getValue<string>(NotebookSetting.cellToolbarVisibility);\n\t\t}\n\n\t\tif (focusIndicator) {\n\t\t\tconfiguration.focusIndicator = this._computeFocusIndicatorOption();\n\t\t}\n\n\t\tif (compactView) {\n\t\t\tconst compactViewValue = this.configurationService.getValue<boolean | undefined>(NotebookSetting.compactView) ?? true;\n\t\t\tconfiguration = Object.assign(configuration, {\n\t\t\t\t...(compactViewValue ? compactConfigConstants : defaultConfigConstants),\n\t\t\t});\n\t\t\tconfiguration.compactView = compactViewValue;\n\t\t}\n\n\t\tif (insertToolbarAlignment) {\n\t\t\tconfiguration.insertToolbarAlignment = this._computeInsertToolbarAlignmentOption();\n\t\t}\n\n\t\tif (insertToolbarPosition) {\n\t\t\tconfiguration.insertToolbarPosition = this._computeInsertToolbarPositionOption(this.isReadonly);\n\t\t}\n\n\t\tif (globalToolbar && this.overrides?.globalToolbar === undefined) {\n\t\t\tconfiguration.globalToolbar = this.configurationService.getValue<boolean>(NotebookSetting.globalToolbar) ?? true;\n\t\t}\n\n\t\tif (stickyScrollEnabled && this.overrides?.stickyScrollEnabled === undefined) {\n\t\t\tconfiguration.stickyScrollEnabled = this.configurationService.getValue<boolean>(NotebookSetting.stickyScrollEnabled) ?? false;\n\t\t}\n\n\t\tif (stickyScrollMode) {\n\t\t\tconfiguration.stickyScrollMode = this.configurationService.getValue<'flat' | 'indented'>(NotebookSetting.stickyScrollMode) ?? 'flat';\n\t\t}\n\n\t\tif (consolidatedOutputButton) {\n\t\t\tconfiguration.consolidatedOutputButton = this.configurationService.getValue<boolean>(NotebookSetting.consolidatedOutputButton) ?? true;\n\t\t}\n\n\t\tif (consolidatedRunButton) {\n\t\t\tconfiguration.consolidatedRunButton = this.configurationService.getValue<boolean>(NotebookSetting.consolidatedRunButton) ?? true;\n\t\t}\n\n\t\tif (showFoldingControls) {\n\t\t\tconfiguration.showFoldingControls = this._computeShowFoldingControlsOption();\n\t\t}\n\n\t\tif (dragAndDropEnabled) {\n\t\t\tconfiguration.dragAndDropEnabled = this.configurationService.getValue<boolean>(NotebookSetting.dragAndDropEnabled) ?? true;\n\t\t}\n\n\t\tif (fontSize) {\n\t\t\tconfiguration.fontSize = this.configurationService.getValue<number>('editor.fontSize');\n\t\t}\n\n\t\tif (outputFontSize || fontSize) {\n\t\t\tconfiguration.outputFontSize = this.configurationService.getValue<number>(NotebookSetting.outputFontSize) || configuration.fontSize;\n\t\t}\n\n\t\tif (markupFontSize) {\n\t\t\tconfiguration.markupFontSize = this.configurationService.getValue<number>(NotebookSetting.markupFontSize);\n\t\t}\n\n\t\tif (markdownLineHeight) {\n\t\t\tconfiguration.markdownLineHeight = this.configurationService.getValue<number>(NotebookSetting.markdownLineHeight);\n\t\t}\n\n\t\tif (outputFontFamily) {\n\t\t\tconfiguration.outputFontFamily = this.configurationService.getValue<string>(NotebookSetting.outputFontFamily);\n\t\t}\n\n\t\tif (editorOptionsCustomizations) {\n\t\t\tconfiguration.editorOptionsCustomizations = this.configurationService.getValue(NotebookSetting.cellEditorOptionsCustomizations);\n\t\t}\n\n\t\tif (interactiveWindowCollapseCodeCells) {\n\t\t\tconfiguration.interactiveWindowCollapseCodeCells = this.configurationService.getValue(NotebookSetting.interactiveWindowCollapseCodeCells);\n\t\t}\n\n\t\tif (outputLineHeight || fontSize || outputFontSize) {\n\t\t\tconst lineHeight = this.configurationService.getValue<number>(NotebookSetting.outputLineHeight);\n\t\t\tconfiguration.outputLineHeight = this._computeOutputLineHeight(lineHeight, configuration.outputFontSize);\n\t\t}\n\n\t\tif (outputWordWrap) {\n\t\t\tconfiguration.outputWordWrap = this.configurationService.getValue<boolean>(NotebookSetting.outputWordWrap);\n\t\t}\n\n\t\tif (outputScrolling) {\n\t\t\tconfiguration.outputScrolling = this.configurationService.getValue<boolean>(NotebookSetting.outputScrolling);\n\t\t}\n\n\t\tif (outputLinkifyFilePaths) {\n\t\t\tconfiguration.outputLinkifyFilePaths = this.configurationService.getValue<boolean>(NotebookSetting.LinkifyOutputFilePaths);\n\t\t}\n\n\t\tif (minimalError) {\n\t\t\tconfiguration.outputMinimalError = this.configurationService.getValue<boolean>(NotebookSetting.minimalErrorRendering);\n\t\t}\n\n\t\tif (markupFontFamily) {\n\t\t\tconfiguration.markupFontFamily = this.configurationService.getValue<string>(NotebookSetting.markupFontFamily);\n\t\t}\n\n\t\tthis._layoutConfiguration = Object.freeze(configuration);\n\n\t\t// trigger event\n\t\tthis._onDidChangeOptions.fire({\n\t\t\tcellStatusBarVisibility,\n\t\t\tcellToolbarLocation,\n\t\t\tcellToolbarInteraction,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tglobalToolbar,\n\t\t\tstickyScrollEnabled,\n\t\t\tstickyScrollMode,\n\t\t\tshowFoldingControls,\n\t\t\tconsolidatedOutputButton,\n\t\t\tconsolidatedRunButton,\n\t\t\tdragAndDropEnabled,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\tmarkupFontSize,\n\t\t\tmarkdownLineHeight,\n\t\t\tfontFamily,\n\t\t\toutputFontFamily,\n\t\t\teditorOptionsCustomizations,\n\t\t\tinteractiveWindowCollapseCodeCells,\n\t\t\toutputLineHeight,\n\t\t\toutputScrolling,\n\t\t\toutputWordWrap,\n\t\t\toutputLinkifyFilePaths,\n\t\t\tminimalError,\n\t\t\tmarkupFontFamily\n\t\t});\n\t}\n\n\tprivate _computeInsertToolbarPositionOption(isReadOnly: boolean) {\n\t\treturn isReadOnly ? 'hidden' : this.configurationService.getValue<'betweenCells' | 'notebookToolbar' | 'both' | 'hidden'>(NotebookSetting.insertToolbarLocation) ?? 'both';\n\t}\n\n\tprivate _computeInsertToolbarAlignmentOption() {\n\t\treturn this.configurationService.getValue<'left' | 'center'>(NotebookSetting.experimentalInsertToolbarAlignment) ?? 'center';\n\t}\n\n\tprivate _computeShowFoldingControlsOption() {\n\t\treturn this.configurationService.getValue<'always' | 'never' | 'mouseover'>(NotebookSetting.showFoldingControls) ?? 'mouseover';\n\t}\n\n\tprivate _computeFocusIndicatorOption() {\n\t\treturn this.configurationService.getValue<'border' | 'gutter'>(NotebookSetting.focusIndicator) ?? 'gutter';\n\t}\n\n\tprivate _computeStickyScrollModeOption() {\n\t\treturn this.configurationService.getValue<'flat' | 'indented'>(NotebookSetting.stickyScrollMode) ?? 'flat';\n\t}\n\n\tgetCellCollapseDefault(): NotebookCellDefaultCollapseConfig {\n\t\treturn this._layoutConfiguration.interactiveWindowCollapseCodeCells === 'never' ?\n\t\t\t{\n\t\t\t\tcodeCell: {\n\t\t\t\t\tinputCollapsed: false\n\t\t\t\t}\n\t\t\t} : {\n\t\t\t\tcodeCell: {\n\t\t\t\t\tinputCollapsed: true\n\t\t\t\t}\n\t\t\t};\n\t}\n\n\tgetLayoutConfiguration(): NotebookLayoutConfiguration & NotebookDisplayOptions {\n\t\treturn this._layoutConfiguration;\n\t}\n\n\tgetDisplayOptions(): NotebookDisplayOptions {\n\t\treturn this._layoutConfiguration;\n\t}\n\n\tgetCellEditorContainerLeftMargin() {\n\t\tconst {\n\t\t\tcodeCellLeftMargin,\n\t\t\tcellRunGutter\n\t\t} = this._layoutConfiguration;\n\t\treturn codeCellLeftMargin + cellRunGutter;\n\t}\n\n\tcomputeCollapsedMarkdownCellHeight(viewType: string): number {\n\t\tconst { bottomToolbarGap } = this.computeBottomToolbarDimensions(viewType);\n\t\treturn this._layoutConfiguration.markdownCellTopMargin\n\t\t\t+ this._layoutConfiguration.collapsedIndicatorHeight\n\t\t\t+ bottomToolbarGap\n\t\t\t+ this._layoutConfiguration.markdownCellBottomMargin;\n\t}\n\n\tcomputeBottomToolbarOffset(totalHeight: number, viewType: string) {\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } = this.computeBottomToolbarDimensions(viewType);\n\n\t\treturn totalHeight\n\t\t\t- bottomToolbarGap\n\t\t\t- bottomToolbarHeight / 2;\n\t}\n\n\tcomputeCodeCellEditorWidth(outerWidth: number): number {\n\t\treturn outerWidth - (\n\t\t\tthis._layoutConfiguration.codeCellLeftMargin\n\t\t\t+ this._layoutConfiguration.cellRunGutter\n\t\t\t+ this._layoutConfiguration.cellRightMargin\n\t\t);\n\t}\n\n\tcomputeMarkdownCellEditorWidth(outerWidth: number): number {\n\t\treturn outerWidth\n\t\t\t- this._layoutConfiguration.markdownCellGutter\n\t\t\t- this._layoutConfiguration.markdownCellLeftMargin\n\t\t\t- this._layoutConfiguration.cellRightMargin;\n\t}\n\n\tcomputeStatusBarHeight(): number {\n\t\treturn this._layoutConfiguration.cellStatusBarHeight;\n\t}\n\n\tprivate _computeBottomToolbarDimensions(compactView: boolean, insertToolbarPosition: 'betweenCells' | 'notebookToolbar' | 'both' | 'hidden', insertToolbarAlignment: 'left' | 'center', cellToolbar: 'right' | 'left' | 'hidden'): { bottomToolbarGap: number; bottomToolbarHeight: number } {\n\t\tif (insertToolbarAlignment === 'left' || cellToolbar !== 'hidden') {\n\t\t\treturn {\n\t\t\t\tbottomToolbarGap: 18,\n\t\t\t\tbottomToolbarHeight: 18\n\t\t\t};\n\t\t}\n\n\t\tif (insertToolbarPosition === 'betweenCells' || insertToolbarPosition === 'both') {\n\t\t\treturn compactView ? {\n\t\t\t\tbottomToolbarGap: 12,\n\t\t\t\tbottomToolbarHeight: 20\n\t\t\t} : {\n\t\t\t\tbottomToolbarGap: 20,\n\t\t\t\tbottomToolbarHeight: 20\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tbottomToolbarGap: 0,\n\t\t\t\tbottomToolbarHeight: 0\n\t\t\t};\n\t\t}\n\t}\n\n\tcomputeBottomToolbarDimensions(viewType?: string): { bottomToolbarGap: number; bottomToolbarHeight: number } {\n\t\tconst configuration = this._layoutConfiguration;\n\t\tconst cellToolbarPosition = this.computeCellToolbarLocation(viewType);\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } = this._computeBottomToolbarDimensions(configuration.compactView, configuration.insertToolbarPosition, configuration.insertToolbarAlignment, cellToolbarPosition);\n\t\treturn {\n\t\t\tbottomToolbarGap,\n\t\t\tbottomToolbarHeight\n\t\t};\n\t}\n\n\tcomputeCellToolbarLocation(viewType?: string): 'right' | 'left' | 'hidden' {\n\t\tconst cellToolbarLocation = this._layoutConfiguration.cellToolbarLocation;\n\n\t\tif (typeof cellToolbarLocation === 'string') {\n\t\t\tif (cellToolbarLocation === 'left' || cellToolbarLocation === 'right' || cellToolbarLocation === 'hidden') {\n\t\t\t\treturn cellToolbarLocation;\n\t\t\t}\n\t\t} else {\n\t\t\tif (viewType) {\n\t\t\t\tconst notebookSpecificSetting = cellToolbarLocation[viewType] ?? cellToolbarLocation['default'];\n\t\t\t\tlet cellToolbarLocationForCurrentView: 'right' | 'left' | 'hidden' = 'right';\n\n\t\t\t\tswitch (notebookSpecificSetting) {\n\t\t\t\t\tcase 'left':\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'left';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'right':\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'right';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hidden':\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'hidden';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcellToolbarLocationForCurrentView = 'right';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn cellToolbarLocationForCurrentView;\n\t\t\t}\n\t\t}\n\n\t\treturn 'right';\n\t}\n\n\tcomputeTopInsertToolbarHeight(viewType?: string): number {\n\t\tif (this._layoutConfiguration.insertToolbarPosition === 'betweenCells' || this._layoutConfiguration.insertToolbarPosition === 'both') {\n\t\t\treturn SCROLLABLE_ELEMENT_PADDING_TOP;\n\t\t}\n\n\t\tconst cellToolbarLocation = this.computeCellToolbarLocation(viewType);\n\n\t\tif (cellToolbarLocation === 'left' || cellToolbarLocation === 'right') {\n\t\t\treturn SCROLLABLE_ELEMENT_PADDING_TOP;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcomputeEditorPadding(internalMetadata: NotebookCellInternalMetadata, cellUri: URI) {\n\t\treturn {\n\t\t\ttop: this._editorTopPadding,\n\t\t\tbottom: this.statusBarIsVisible(internalMetadata, cellUri)\n\t\t\t\t? this._layoutConfiguration.editorBottomPadding\n\t\t\t\t: this._layoutConfiguration.editorBottomPaddingWithoutStatusBar\n\t\t};\n\t}\n\n\n\tcomputeEditorStatusbarHeight(internalMetadata: NotebookCellInternalMetadata, cellUri: URI) {\n\t\treturn this.statusBarIsVisible(internalMetadata, cellUri) ? this.computeStatusBarHeight() : 0;\n\t}\n\n\tprivate statusBarIsVisible(internalMetadata: NotebookCellInternalMetadata, cellUri: URI): boolean {\n\t\tconst exe = this.notebookExecutionStateService.getCellExecution(cellUri);\n\t\tif (this._layoutConfiguration.showCellStatusBar === 'visible') {\n\t\t\treturn true;\n\t\t} else if (this._layoutConfiguration.showCellStatusBar === 'visibleAfterExecute') {\n\t\t\treturn typeof internalMetadata.lastRunSuccess === 'boolean' || exe !== undefined;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcomputeWebviewOptions() {\n\t\treturn {\n\t\t\toutputNodePadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\toutputNodeLeftPadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\tpreviewNodePadding: this._layoutConfiguration.markdownPreviewPadding,\n\t\t\tmarkdownLeftMargin: this._layoutConfiguration.markdownCellGutter + this._layoutConfiguration.markdownCellLeftMargin,\n\t\t\tleftMargin: this._layoutConfiguration.codeCellLeftMargin,\n\t\t\trightMargin: this._layoutConfiguration.cellRightMargin,\n\t\t\trunGutter: this._layoutConfiguration.cellRunGutter,\n\t\t\tdragAndDropEnabled: this._layoutConfiguration.dragAndDropEnabled,\n\t\t\tfontSize: this._layoutConfiguration.fontSize,\n\t\t\toutputFontSize: this._layoutConfiguration.outputFontSize,\n\t\t\toutputFontFamily: this._layoutConfiguration.outputFontFamily,\n\t\t\tmarkupFontSize: this._layoutConfiguration.markupFontSize,\n\t\t\tmarkdownLineHeight: this._layoutConfiguration.markdownLineHeight,\n\t\t\toutputLineHeight: this._layoutConfiguration.outputLineHeight,\n\t\t\toutputScrolling: this._layoutConfiguration.outputScrolling,\n\t\t\toutputWordWrap: this._layoutConfiguration.outputWordWrap,\n\t\t\toutputLineLimit: this._layoutConfiguration.outputLineLimit,\n\t\t\toutputLinkifyFilePaths: this._layoutConfiguration.outputLinkifyFilePaths,\n\t\t\tminimalError: this._layoutConfiguration.outputMinimalError,\n\t\t\tmarkupFontFamily: this._layoutConfiguration.markupFontFamily\n\t\t};\n\t}\n\n\tcomputeDiffWebviewOptions() {\n\t\treturn {\n\t\t\toutputNodePadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\toutputNodeLeftPadding: 0,\n\t\t\tpreviewNodePadding: this._layoutConfiguration.markdownPreviewPadding,\n\t\t\tmarkdownLeftMargin: 0,\n\t\t\tleftMargin: 32,\n\t\t\trightMargin: 0,\n\t\t\trunGutter: 0,\n\t\t\tdragAndDropEnabled: false,\n\t\t\tfontSize: this._layoutConfiguration.fontSize,\n\t\t\toutputFontSize: this._layoutConfiguration.outputFontSize,\n\t\t\toutputFontFamily: this._layoutConfiguration.outputFontFamily,\n\t\t\tmarkupFontSize: this._layoutConfiguration.markupFontSize,\n\t\t\tmarkdownLineHeight: this._layoutConfiguration.markdownLineHeight,\n\t\t\toutputLineHeight: this._layoutConfiguration.outputLineHeight,\n\t\t\toutputScrolling: this._layoutConfiguration.outputScrolling,\n\t\t\toutputWordWrap: this._layoutConfiguration.outputWordWrap,\n\t\t\toutputLineLimit: this._layoutConfiguration.outputLineLimit,\n\t\t\toutputLinkifyFilePaths: false,\n\t\t\tminimalError: false,\n\t\t\tmarkupFontFamily: this._layoutConfiguration.markupFontFamily\n\t\t};\n\t}\n\n\tcomputeIndicatorPosition(totalHeight: number, foldHintHeight: number, viewType?: string) {\n\t\tconst { bottomToolbarGap } = this.computeBottomToolbarDimensions(viewType);\n\n\t\treturn {\n\t\t\tbottomIndicatorTop: totalHeight - bottomToolbarGap - this._layoutConfiguration.cellBottomMargin - foldHintHeight,\n\t\t\tverticalIndicatorHeight: totalHeight - bottomToolbarGap - foldHintHeight\n\t\t};\n\t}\n}\n"]}