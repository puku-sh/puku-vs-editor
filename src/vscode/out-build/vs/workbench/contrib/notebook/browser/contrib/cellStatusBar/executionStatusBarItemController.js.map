{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/cellStatusBar/executionStatusBarItemController.ts"],"names":[],"mappings":"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","file":"executionStatusBarItemController.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { disposableTimeout, RunOnceScheduler } from '../../../../../../base/common/async.js';\nimport { Disposable, dispose, IDisposable, MutableDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { language } from '../../../../../../base/common/platform.js';\nimport { localize } from '../../../../../../nls.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { themeColorFromId } from '../../../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { ICellVisibilityChangeEvent, NotebookVisibleCellObserver } from './notebookVisibleCellObserver.js';\nimport { ICellViewModel, INotebookEditor, INotebookEditorContribution, INotebookViewModel } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\nimport { cellStatusIconError, cellStatusIconSuccess } from '../../notebookEditorWidget.js';\nimport { errorStateIcon, executingStateIcon, pendingStateIcon, successStateIcon } from '../../notebookIcons.js';\nimport { CellStatusbarAlignment, INotebookCellStatusBarItem, NotebookCellExecutionState, NotebookCellInternalMetadata, NotebookSetting } from '../../../common/notebookCommon.js';\nimport { INotebookCellExecution, INotebookExecutionStateService, NotebookExecutionType } from '../../../common/notebookExecutionStateService.js';\nimport { INotebookService } from '../../../common/notebookService.js';\nimport { IMarkdownString } from '../../../../../../base/common/htmlContent.js';\n\nexport function formatCellDuration(duration: number, showMilliseconds: boolean = true): string {\n\tif (showMilliseconds && duration < 1000) {\n\t\treturn `${duration}ms`;\n\t}\n\n\tconst minutes = Math.floor(duration / 1000 / 60);\n\tconst seconds = Math.floor(duration / 1000) % 60;\n\tconst tenths = Math.floor((duration % 1000) / 100);\n\n\tif (minutes > 0) {\n\t\treturn `${minutes}m ${seconds}.${tenths}s`;\n\t} else {\n\t\treturn `${seconds}.${tenths}s`;\n\t}\n}\n\nexport class NotebookStatusBarController extends Disposable {\n\tprivate readonly _visibleCells = new Map<number, IDisposable>();\n\tprivate readonly _observer: NotebookVisibleCellObserver;\n\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\tprivate readonly _itemFactory: (vm: INotebookViewModel, cell: ICellViewModel) => IDisposable,\n\t) {\n\t\tsuper();\n\t\tthis._observer = this._register(new NotebookVisibleCellObserver(this._notebookEditor));\n\t\tthis._register(this._observer.onDidChangeVisibleCells(this._updateVisibleCells, this));\n\n\t\tthis._updateEverything();\n\t}\n\n\tprivate _updateEverything(): void {\n\t\tthis._visibleCells.forEach(dispose);\n\t\tthis._visibleCells.clear();\n\t\tthis._updateVisibleCells({ added: this._observer.visibleCells, removed: [] });\n\t}\n\n\tprivate _updateVisibleCells(e: ICellVisibilityChangeEvent): void {\n\t\tconst vm = this._notebookEditor.getViewModel();\n\t\tif (!vm) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const oldCell of e.removed) {\n\t\t\tthis._visibleCells.get(oldCell.handle)?.dispose();\n\t\t\tthis._visibleCells.delete(oldCell.handle);\n\t\t}\n\n\t\tfor (const newCell of e.added) {\n\t\t\tthis._visibleCells.set(newCell.handle, this._itemFactory(vm, newCell));\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis._visibleCells.forEach(dispose);\n\t\tthis._visibleCells.clear();\n\t}\n}\n\nexport class ExecutionStateCellStatusBarContrib extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.statusBar.execState';\n\n\tconstructor(notebookEditor: INotebookEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis._register(new NotebookStatusBarController(notebookEditor, (vm, cell) => instantiationService.createInstance(ExecutionStateCellStatusBarItem, vm, cell)));\n\t}\n}\nregisterNotebookContribution(ExecutionStateCellStatusBarContrib.id, ExecutionStateCellStatusBarContrib);\n\n/**\n * Shows the cell's execution state in the cell status bar. When the \"executing\" state is shown, it will be shown for a minimum brief time.\n */\nclass ExecutionStateCellStatusBarItem extends Disposable {\n\tprivate static readonly MIN_SPINNER_TIME = 500;\n\n\tprivate _currentItemIds: string[] = [];\n\n\tprivate _showedExecutingStateTime: number | undefined;\n\tprivate readonly _clearExecutingStateTimer = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _notebookViewModel: INotebookViewModel,\n\t\tprivate readonly _cell: ICellViewModel,\n\t\t@INotebookExecutionStateService private readonly _executionStateService: INotebookExecutionStateService\n\t) {\n\t\tsuper();\n\n\t\tthis._update();\n\t\tthis._register(this._executionStateService.onDidChangeExecution(e => {\n\t\t\tif (e.type === NotebookExecutionType.cell && e.affectsCell(this._cell.uri)) {\n\t\t\t\tthis._update();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._cell.model.onDidChangeInternalMetadata(() => this._update()));\n\t}\n\n\tprivate async _update() {\n\t\tconst items = this._getItemsForCell();\n\t\tif (Array.isArray(items)) {\n\t\t\tthis._currentItemIds = this._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this._cell.handle, items }]);\n\t\t}\n\t}\n\n\t/**\n\t *\tReturns undefined if there should be no change, and an empty array if all items should be removed.\n\t */\n\tprivate _getItemsForCell(): INotebookCellStatusBarItem[] | undefined {\n\t\tconst runState = this._executionStateService.getCellExecution(this._cell.uri);\n\n\t\t// Show the execution spinner for a minimum time\n\t\tif (runState?.state === NotebookCellExecutionState.Executing && typeof this._showedExecutingStateTime !== 'number') {\n\t\t\tthis._showedExecutingStateTime = Date.now();\n\t\t} else if (runState?.state !== NotebookCellExecutionState.Executing && typeof this._showedExecutingStateTime === 'number') {\n\t\t\tconst timeUntilMin = ExecutionStateCellStatusBarItem.MIN_SPINNER_TIME - (Date.now() - this._showedExecutingStateTime);\n\t\t\tif (timeUntilMin > 0) {\n\t\t\t\tif (!this._clearExecutingStateTimer.value) {\n\t\t\t\t\tthis._clearExecutingStateTimer.value = disposableTimeout(() => {\n\t\t\t\t\t\tthis._showedExecutingStateTime = undefined;\n\t\t\t\t\t\tthis._clearExecutingStateTimer.clear();\n\t\t\t\t\t\tthis._update();\n\t\t\t\t\t}, timeUntilMin);\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t} else {\n\t\t\t\tthis._showedExecutingStateTime = undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst items = this._getItemForState(runState, this._cell.internalMetadata);\n\t\treturn items;\n\t}\n\n\tprivate _getItemForState(runState: INotebookCellExecution | undefined, internalMetadata: NotebookCellInternalMetadata): INotebookCellStatusBarItem[] {\n\t\tconst state = runState?.state;\n\t\tconst { lastRunSuccess } = internalMetadata;\n\t\tif (!state && lastRunSuccess) {\n\t\t\treturn [{\n\t\t\t\ttext: `$(${successStateIcon.id})`,\n\t\t\t\tcolor: themeColorFromId(cellStatusIconSuccess),\n\t\t\t\ttooltip: localize('notebook.cell.status.success', \"Success\"),\n\t\t\t\talignment: CellStatusbarAlignment.Left,\n\t\t\t\tpriority: Number.MAX_SAFE_INTEGER\n\t\t\t} satisfies INotebookCellStatusBarItem];\n\t\t} else if (!state && lastRunSuccess === false) {\n\t\t\treturn [{\n\t\t\t\ttext: `$(${errorStateIcon.id})`,\n\t\t\t\tcolor: themeColorFromId(cellStatusIconError),\n\t\t\t\ttooltip: localize('notebook.cell.status.failed', \"Failed\"),\n\t\t\t\talignment: CellStatusbarAlignment.Left,\n\t\t\t\tpriority: Number.MAX_SAFE_INTEGER\n\t\t\t}];\n\t\t} else if (state === NotebookCellExecutionState.Pending || state === NotebookCellExecutionState.Unconfirmed) {\n\t\t\treturn [{\n\t\t\t\ttext: `$(${pendingStateIcon.id})`,\n\t\t\t\ttooltip: localize('notebook.cell.status.pending', \"Pending\"),\n\t\t\t\talignment: CellStatusbarAlignment.Left,\n\t\t\t\tpriority: Number.MAX_SAFE_INTEGER\n\t\t\t} satisfies INotebookCellStatusBarItem];\n\t\t} else if (state === NotebookCellExecutionState.Executing) {\n\t\t\tconst icon = runState?.didPause ?\n\t\t\t\texecutingStateIcon :\n\t\t\t\tThemeIcon.modify(executingStateIcon, 'spin');\n\t\t\treturn [{\n\t\t\t\ttext: `$(${icon.id})`,\n\t\t\t\ttooltip: localize('notebook.cell.status.executing', \"Executing\"),\n\t\t\t\talignment: CellStatusbarAlignment.Left,\n\t\t\t\tpriority: Number.MAX_SAFE_INTEGER\n\t\t\t} satisfies INotebookCellStatusBarItem];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\n\t\tthis._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this._cell.handle, items: [] }]);\n\t}\n}\n\nexport class TimerCellStatusBarContrib extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.statusBar.execTimer';\n\n\tconstructor(\n\t\tnotebookEditor: INotebookEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService) {\n\t\tsuper();\n\t\tthis._register(new NotebookStatusBarController(notebookEditor, (vm, cell) => instantiationService.createInstance(TimerCellStatusBarItem, vm, cell)));\n\t}\n}\nregisterNotebookContribution(TimerCellStatusBarContrib.id, TimerCellStatusBarContrib);\n\nconst UPDATE_TIMER_GRACE_PERIOD = 200;\n\nclass TimerCellStatusBarItem extends Disposable {\n\tprivate static UPDATE_INTERVAL = 100;\n\tprivate _currentItemIds: string[] = [];\n\n\tprivate _scheduler: RunOnceScheduler;\n\n\tprivate _deferredUpdate: IDisposable | undefined;\n\n\tprivate _isVerbose: boolean;\n\n\tconstructor(\n\t\tprivate readonly _notebookViewModel: INotebookViewModel,\n\t\tprivate readonly _cell: ICellViewModel,\n\t\t@INotebookExecutionStateService private readonly _executionStateService: INotebookExecutionStateService,\n\t\t@INotebookService private readonly _notebookService: INotebookService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t\tthis._isVerbose = this._configurationService.getValue(NotebookSetting.cellExecutionTimeVerbosity) === 'verbose';\n\n\t\tthis._scheduler = this._register(new RunOnceScheduler(() => this._update(), TimerCellStatusBarItem.UPDATE_INTERVAL));\n\t\tthis._update();\n\t\tthis._register(this._cell.model.onDidChangeInternalMetadata(() => this._update()));\n\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(NotebookSetting.cellExecutionTimeVerbosity)) {\n\t\t\t\tthis._isVerbose = this._configurationService.getValue(NotebookSetting.cellExecutionTimeVerbosity) === 'verbose';\n\t\t\t\tthis._update();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async _update() {\n\t\tlet timerItem: INotebookCellStatusBarItem | undefined;\n\t\tconst runState = this._executionStateService.getCellExecution(this._cell.uri);\n\t\tconst state = runState?.state;\n\t\tconst startTime = this._cell.internalMetadata.runStartTime;\n\t\tconst adjustment = this._cell.internalMetadata.runStartTimeAdjustment ?? 0;\n\t\tconst endTime = this._cell.internalMetadata.runEndTime;\n\n\t\tif (runState?.didPause) {\n\t\t\ttimerItem = undefined;\n\t\t} else if (state === NotebookCellExecutionState.Executing) {\n\t\t\tif (typeof startTime === 'number') {\n\t\t\t\ttimerItem = this._getTimeItem(startTime, Date.now(), adjustment);\n\t\t\t\tthis._scheduler.schedule();\n\t\t\t}\n\t\t} else if (!state) {\n\t\t\tif (typeof startTime === 'number' && typeof endTime === 'number') {\n\t\t\t\tconst timerDuration = Date.now() - startTime + adjustment;\n\t\t\t\tconst executionDuration = endTime - startTime;\n\t\t\t\tconst renderDuration = this._cell.internalMetadata.renderDuration ?? {};\n\n\t\t\t\ttimerItem = this._getTimeItem(startTime, endTime, undefined, {\n\t\t\t\t\ttimerDuration,\n\t\t\t\t\texecutionDuration,\n\t\t\t\t\trenderDuration\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst items = timerItem ? [timerItem] : [];\n\n\t\tif (!items.length && !!runState) {\n\t\t\tif (!this._deferredUpdate) {\n\t\t\t\tthis._deferredUpdate = disposableTimeout(() => {\n\t\t\t\t\tthis._deferredUpdate = undefined;\n\t\t\t\t\tthis._currentItemIds = this._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this._cell.handle, items }]);\n\t\t\t\t}, UPDATE_TIMER_GRACE_PERIOD, this._store);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._deferredUpdate?.dispose();\n\t\t\tthis._deferredUpdate = undefined;\n\t\t\tthis._currentItemIds = this._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this._cell.handle, items }]);\n\t\t}\n\t}\n\n\tprivate _getTimeItem(startTime: number, endTime: number, adjustment: number = 0, runtimeInformation?: { renderDuration: { [key: string]: number }; executionDuration: number; timerDuration: number }): INotebookCellStatusBarItem {\n\t\tconst duration = endTime - startTime + adjustment;\n\n\t\tlet tooltip: IMarkdownString | undefined;\n\n\t\tconst lastExecution = new Date(endTime).toLocaleTimeString(language);\n\n\t\tif (runtimeInformation) {\n\t\t\tconst { renderDuration, executionDuration, timerDuration } = runtimeInformation;\n\n\t\t\tlet renderTimes = '';\n\t\t\tfor (const key in renderDuration) {\n\t\t\t\tconst rendererInfo = this._notebookService.getRendererInfo(key);\n\n\t\t\t\tconst args = encodeURIComponent(JSON.stringify({\n\t\t\t\t\textensionId: rendererInfo?.extensionId.value ?? '',\n\t\t\t\t\tissueBody:\n\t\t\t\t\t\t`Auto-generated text from notebook cell performance - Please add an explanation for the performance issue, including cell content if possible.\\n` +\n\t\t\t\t\t\t`The duration for the renderer, ${rendererInfo?.displayName ?? key}, is slower than expected.\\n` +\n\t\t\t\t\t\t`Execution Time: ${formatCellDuration(executionDuration)}\\n` +\n\t\t\t\t\t\t`Renderer Duration: ${formatCellDuration(renderDuration[key])}\\n`\n\t\t\t\t}));\n\n\t\t\t\t// Show a link to create an issue if the renderer was slow compared to the execution duration, or just exceptionally slow on its own\n\t\t\t\tconst renderIssueLink = (renderDuration[key] > 200 && executionDuration < 2000) || renderDuration[key] > 1000;\n\t\t\t\tconst linkText = rendererInfo?.displayName ?? key;\n\t\t\t\tconst rendererTitle = renderIssueLink ? `[${linkText}](command:workbench.action.openIssueReporter?${args})` : `**${linkText}**`;\n\t\t\t\trenderTimes += `- ${rendererTitle} ${formatCellDuration(renderDuration[key])}\\n`;\n\t\t\t}\n\n\t\t\trenderTimes += `\\n*${localize('notebook.cell.statusBar.timerTooltip.reportIssueFootnote', \"Use the links above to file an issue using the issue reporter.\")}*\\n`;\n\n\t\t\ttooltip = {\n\t\t\t\tvalue: localize('notebook.cell.statusBar.timerTooltip', \"**Last Execution** {0}\\n\\n**Execution Time** {1}\\n\\n**Overhead Time** {2}\\n\\n**Render Times**\\n\\n{3}\", lastExecution, formatCellDuration(executionDuration), formatCellDuration(timerDuration - executionDuration), renderTimes),\n\t\t\t\tisTrusted: true\n\t\t\t};\n\n\t\t}\n\n\t\tconst executionText = this._isVerbose ?\n\t\t\tlocalize('notebook.cell.statusBar.timerVerbose', \"Last Execution: {0}, Duration: {1}\", lastExecution, formatCellDuration(duration, false)) :\n\t\t\tformatCellDuration(duration, false);\n\n\t\treturn {\n\t\t\ttext: executionText,\n\t\t\talignment: CellStatusbarAlignment.Left,\n\t\t\tpriority: Number.MAX_SAFE_INTEGER - 5,\n\t\t\ttooltip\n\t\t} satisfies INotebookCellStatusBarItem;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\n\t\tthis._deferredUpdate?.dispose();\n\t\tthis._notebookViewModel.deltaCellStatusBarItems(this._currentItemIds, [{ handle: this._cell.handle, items: [] }]);\n\t}\n}\n"]}