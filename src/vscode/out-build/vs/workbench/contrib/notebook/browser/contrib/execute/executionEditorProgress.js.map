{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/contrib/execute/executionEditorProgress.ts","vs/workbench/contrib/notebook/browser/contrib/execute/executionEditorProgress.ts"],"names":[],"mappings":"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","file":"executionEditorProgress.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { throttle } from '../../../../../../base/common/decorators.js';\nimport { Disposable, MutableDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { INotebookEditor, INotebookEditorContribution } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\nimport { NotebookCellExecutionState } from '../../../common/notebookCommon.js';\nimport { INotebookCellExecution, INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { IUserActivityService } from '../../../../../services/userActivity/common/userActivityService.js';\n\nexport class ExecutionEditorProgressController extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.executionEditorProgress';\n\n\tprivate readonly _activityMutex = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\t@INotebookExecutionStateService private readonly _notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IUserActivityService private readonly _userActivity: IUserActivityService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(_notebookEditor.onDidScroll(() => this._update()));\n\n\t\tthis._register(_notebookExecutionStateService.onDidChangeExecution(e => {\n\t\t\tif (e.notebook.toString() !== this._notebookEditor.textModel?.uri.toString()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._update();\n\t\t}));\n\n\t\tthis._register(_notebookEditor.onDidChangeModel(() => this._update()));\n\t}\n\n\t@throttle(100)\n\tprivate _update() {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellExecutions = this._notebookExecutionStateService.getCellExecutionsForNotebook(this._notebookEditor.textModel?.uri)\n\t\t\t.filter(exe => exe.state === NotebookCellExecutionState.Executing);\n\t\tconst notebookExecution = this._notebookExecutionStateService.getExecution(this._notebookEditor.textModel?.uri);\n\t\tconst executionIsVisible = (exe: INotebookCellExecution) => {\n\t\t\tfor (const range of this._notebookEditor.visibleRanges) {\n\t\t\t\tfor (const cell of this._notebookEditor.getCellsInRange(range)) {\n\t\t\t\t\tif (cell.handle === exe.cellHandle) {\n\t\t\t\t\t\tconst top = this._notebookEditor.getAbsoluteTopOfElement(cell);\n\t\t\t\t\t\tif (this._notebookEditor.scrollTop < top + 5) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst hasAnyExecution = cellExecutions.length || notebookExecution;\n\t\tif (hasAnyExecution && !this._activityMutex.value) {\n\t\t\tthis._activityMutex.value = this._userActivity.markActive();\n\t\t} else if (!hasAnyExecution && this._activityMutex.value) {\n\t\t\tthis._activityMutex.clear();\n\t\t}\n\n\t\tconst shouldShowEditorProgressbarForCellExecutions = cellExecutions.length && !cellExecutions.some(executionIsVisible) && !cellExecutions.some(e => e.isPaused);\n\t\tconst showEditorProgressBar = !!notebookExecution || shouldShowEditorProgressbarForCellExecutions;\n\t\tif (showEditorProgressBar) {\n\t\t\tthis._notebookEditor.showProgress();\n\t\t} else {\n\t\t\tthis._notebookEditor.hideProgress();\n\t\t}\n\t}\n}\n\n\nregisterNotebookContribution(ExecutionEditorProgressController.id, ExecutionEditorProgressController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { throttle } from '../../../../../../base/common/decorators.js';\nimport { Disposable, MutableDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { INotebookEditor, INotebookEditorContribution } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\nimport { NotebookCellExecutionState } from '../../../common/notebookCommon.js';\nimport { INotebookCellExecution, INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { IUserActivityService } from '../../../../../services/userActivity/common/userActivityService.js';\n\nexport class ExecutionEditorProgressController extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.executionEditorProgress';\n\n\tprivate readonly _activityMutex = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\t@INotebookExecutionStateService private readonly _notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IUserActivityService private readonly _userActivity: IUserActivityService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(_notebookEditor.onDidScroll(() => this._update()));\n\n\t\tthis._register(_notebookExecutionStateService.onDidChangeExecution(e => {\n\t\t\tif (e.notebook.toString() !== this._notebookEditor.textModel?.uri.toString()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._update();\n\t\t}));\n\n\t\tthis._register(_notebookEditor.onDidChangeModel(() => this._update()));\n\t}\n\n\t@throttle(100)\n\tprivate _update() {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellExecutions = this._notebookExecutionStateService.getCellExecutionsForNotebook(this._notebookEditor.textModel?.uri)\n\t\t\t.filter(exe => exe.state === NotebookCellExecutionState.Executing);\n\t\tconst notebookExecution = this._notebookExecutionStateService.getExecution(this._notebookEditor.textModel?.uri);\n\t\tconst executionIsVisible = (exe: INotebookCellExecution) => {\n\t\t\tfor (const range of this._notebookEditor.visibleRanges) {\n\t\t\t\tfor (const cell of this._notebookEditor.getCellsInRange(range)) {\n\t\t\t\t\tif (cell.handle === exe.cellHandle) {\n\t\t\t\t\t\tconst top = this._notebookEditor.getAbsoluteTopOfElement(cell);\n\t\t\t\t\t\tif (this._notebookEditor.scrollTop < top + 5) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst hasAnyExecution = cellExecutions.length || notebookExecution;\n\t\tif (hasAnyExecution && !this._activityMutex.value) {\n\t\t\tthis._activityMutex.value = this._userActivity.markActive();\n\t\t} else if (!hasAnyExecution && this._activityMutex.value) {\n\t\t\tthis._activityMutex.clear();\n\t\t}\n\n\t\tconst shouldShowEditorProgressbarForCellExecutions = cellExecutions.length && !cellExecutions.some(executionIsVisible) && !cellExecutions.some(e => e.isPaused);\n\t\tconst showEditorProgressBar = !!notebookExecution || shouldShowEditorProgressbarForCellExecutions;\n\t\tif (showEditorProgressBar) {\n\t\t\tthis._notebookEditor.showProgress();\n\t\t} else {\n\t\t\tthis._notebookEditor.hideProgress();\n\t\t}\n\t}\n}\n\n\nregisterNotebookContribution(ExecutionEditorProgressController.id, ExecutionEditorProgressController);\n"]}