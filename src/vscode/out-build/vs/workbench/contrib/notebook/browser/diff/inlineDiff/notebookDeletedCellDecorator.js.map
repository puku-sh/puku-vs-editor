{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/diff/inlineDiff/notebookDeletedCellDecorator.ts","vs/workbench/contrib/notebook/browser/diff/inlineDiff/notebookDeletedCellDecorator.ts"],"names":[],"mappings":"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","file":"notebookDeletedCellDecorator.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createTrustedTypesPolicy } from '../../../../../../base/browser/trustedTypes.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { splitLines } from '../../../../../../base/common/strings.js';\nimport { EditorOption } from '../../../../../../editor/common/config/editorOptions.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { tokenizeToString } from '../../../../../../editor/common/languages/textToHtmlTokenizer.js';\nimport { NotebookCellTextModel } from '../../../common/model/notebookCellTextModel.js';\nimport { NotebookTextModel } from '../../../common/model/notebookTextModel.js';\nimport { DefaultLineHeight } from '../diffElementViewModel.js';\nimport { CellDiffInfo } from '../notebookDiffViewModel.js';\nimport { INotebookEditor, NotebookOverviewRulerLane } from '../../notebookBrowser.js';\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { MenuWorkbenchToolBar, HiddenItemStrategy } from '../../../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerDeletedForeground } from '../../../../scm/common/quickDiff.js';\nimport { IActionViewItemProvider } from '../../../../../../base/browser/ui/actionbar/actionbar.js';\n\nconst ttPolicy = createTrustedTypesPolicy('notebookRenderer', { createHTML: value => value });\n\nexport interface INotebookDeletedCellDecorator {\n\tgetTop(deletedIndex: number): number | undefined;\n}\n\n\nexport class NotebookDeletedCellDecorator extends Disposable implements INotebookDeletedCellDecorator {\n\tprivate readonly zoneRemover = this._register(new DisposableStore());\n\tprivate readonly createdViewZones = new Map<number, string>();\n\tprivate readonly deletedCellInfos = new Map<number, { height: number; previousIndex: number; offset: number }>();\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\tprivate readonly toolbar: { menuId: MenuId; className: string; telemetrySource?: string; argFactory: (deletedCellIndex: number) => any; actionViewItemProvider?: IActionViewItemProvider } | undefined,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic getTop(deletedIndex: number) {\n\t\tconst info = this.deletedCellInfos.get(deletedIndex);\n\t\tif (!info) {\n\t\t\treturn;\n\t\t}\n\t\tif (info.previousIndex === -1) {\n\t\t\t// deleted cell is before the first real cell\n\t\t\treturn 0;\n\t\t}\n\t\tconst cells = this._notebookEditor.getCellsInRange({ start: info.previousIndex, end: info.previousIndex + 1 });\n\t\tif (!cells.length) {\n\t\t\treturn this._notebookEditor.getLayoutInfo().height + info.offset;\n\t\t}\n\t\tconst cell = cells[0];\n\t\tconst cellHeight = this._notebookEditor.getHeightOfElement(cell);\n\t\tconst top = this._notebookEditor.getAbsoluteTopOfElement(cell);\n\t\treturn top + cellHeight + info.offset;\n\t}\n\n\treveal(deletedIndex: number) {\n\t\tconst top = this.getTop(deletedIndex);\n\t\tif (typeof top === 'number') {\n\t\t\tthis._notebookEditor.focusContainer();\n\t\t\tthis._notebookEditor.revealOffsetInCenterIfOutsideViewport(top);\n\n\t\t\tconst info = this.deletedCellInfos.get(deletedIndex);\n\n\t\t\tif (info) {\n\t\t\t\tconst prevIndex = info.previousIndex === -1 ? 0 : info.previousIndex;\n\t\t\t\tthis._notebookEditor.setFocus({ start: prevIndex, end: prevIndex });\n\t\t\t\tthis._notebookEditor.setSelections([{ start: prevIndex, end: prevIndex }]);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic apply(diffInfo: CellDiffInfo[], original: NotebookTextModel): void {\n\t\tthis.clear();\n\n\t\tlet currentIndex = -1;\n\t\tconst deletedCellsToRender: { cells: { cell: NotebookCellTextModel; originalIndex: number; previousIndex: number }[]; index: number } = { cells: [], index: 0 };\n\t\tdiffInfo.forEach(diff => {\n\t\t\tif (diff.type === 'delete') {\n\t\t\t\tconst deletedCell = original.cells[diff.originalCellIndex];\n\t\t\t\tif (deletedCell) {\n\t\t\t\t\tdeletedCellsToRender.cells.push({ cell: deletedCell, originalIndex: diff.originalCellIndex, previousIndex: currentIndex });\n\t\t\t\t\tdeletedCellsToRender.index = currentIndex;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (deletedCellsToRender.cells.length) {\n\t\t\t\t\tthis._createWidget(deletedCellsToRender.index + 1, deletedCellsToRender.cells);\n\t\t\t\t\tdeletedCellsToRender.cells.length = 0;\n\t\t\t\t}\n\t\t\t\tcurrentIndex = diff.modifiedCellIndex;\n\t\t\t}\n\t\t});\n\t\tif (deletedCellsToRender.cells.length) {\n\t\t\tthis._createWidget(deletedCellsToRender.index + 1, deletedCellsToRender.cells);\n\t\t}\n\t}\n\n\tpublic clear() {\n\t\tthis.deletedCellInfos.clear();\n\t\tthis.zoneRemover.clear();\n\t}\n\n\n\tprivate _createWidget(index: number, cells: { cell: NotebookCellTextModel; originalIndex: number; previousIndex: number }[]) {\n\t\tthis._createWidgetImpl(index, cells);\n\t}\n\tprivate async _createWidgetImpl(index: number, cells: { cell: NotebookCellTextModel; originalIndex: number; previousIndex: number }[]) {\n\t\tconst rootContainer = document.createElement('div');\n\t\tconst widgets: NotebookDeletedCellWidget[] = [];\n\t\tconst heights = await Promise.all(cells.map(async cell => {\n\t\t\tconst widget = new NotebookDeletedCellWidget(this._notebookEditor, this.toolbar, cell.cell.getValue(), cell.cell.language, rootContainer, cell.originalIndex, this.languageService, this.instantiationService);\n\t\t\twidgets.push(widget);\n\t\t\tconst height = await widget.render();\n\t\t\tthis.deletedCellInfos.set(cell.originalIndex, { height, previousIndex: cell.previousIndex, offset: 0 });\n\t\t\treturn height;\n\t\t}));\n\n\t\tArray.from(this.deletedCellInfos.keys()).sort((a, b) => a - b).forEach((originalIndex) => {\n\t\t\tconst previousDeletedCell = this.deletedCellInfos.get(originalIndex - 1);\n\t\t\tif (previousDeletedCell) {\n\t\t\t\tconst deletedCell = this.deletedCellInfos.get(originalIndex);\n\t\t\t\tif (deletedCell) {\n\t\t\t\t\tdeletedCell.offset = previousDeletedCell.height + previousDeletedCell.offset;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst totalHeight = heights.reduce<number>((prev, curr) => prev + curr, 0);\n\n\t\tthis._notebookEditor.changeViewZones(accessor => {\n\t\t\tconst notebookViewZone = {\n\t\t\t\tafterModelPosition: index,\n\t\t\t\theightInPx: totalHeight + 4,\n\t\t\t\tdomNode: rootContainer\n\t\t\t};\n\n\t\t\tconst id = accessor.addZone(notebookViewZone);\n\t\t\taccessor.layoutZone(id);\n\t\t\tthis.createdViewZones.set(index, id);\n\n\t\t\tconst deletedCellOverviewRulereDecorationIds = this._notebookEditor.deltaCellDecorations([], [{\n\t\t\t\tviewZoneId: id,\n\t\t\t\toptions: {\n\t\t\t\t\toverviewRuler: {\n\t\t\t\t\t\tcolor: overviewRulerDeletedForeground,\n\t\t\t\t\t\tposition: NotebookOverviewRulerLane.Center,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]);\n\t\t\tthis.zoneRemover.add(toDisposable(() => {\n\t\t\t\tif (this.createdViewZones.get(index) === id) {\n\t\t\t\t\tthis.createdViewZones.delete(index);\n\t\t\t\t}\n\t\t\t\tif (!this._notebookEditor.isDisposed) {\n\t\t\t\t\tthis._notebookEditor.changeViewZones(accessor => {\n\t\t\t\t\t\taccessor.removeZone(id);\n\t\t\t\t\t\tdispose(widgets);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._notebookEditor.deltaCellDecorations(deletedCellOverviewRulereDecorationIds, []);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t}\n\n}\n\nexport class NotebookDeletedCellWidget extends Disposable {\n\tprivate readonly container: HTMLElement;\n\t// private readonly toolbar: HTMLElement;\n\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\tprivate readonly _toolbarOptions: { menuId: MenuId; className: string; telemetrySource?: string; argFactory: (deletedCellIndex: number) => any; actionViewItemProvider?: IActionViewItemProvider } | undefined,\n\t\tprivate readonly code: string,\n\t\tprivate readonly language: string,\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly _originalIndex: number,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tthis.container = DOM.append(container, document.createElement('div'));\n\t\tthis._register(toDisposable(() => {\n\t\t\tcontainer.removeChild(this.container);\n\t\t}));\n\t}\n\n\tpublic async render() {\n\t\tconst code = this.code;\n\t\tconst languageId = this.language;\n\t\tconst codeHtml = await tokenizeToString(this.languageService, code, languageId);\n\n\t\t// const colorMap = this.getDefaultColorMap();\n\t\tconst fontInfo = this._notebookEditor.getBaseCellEditorOptions(languageId).value;\n\t\tconst fontFamilyVar = '--notebook-editor-font-family';\n\t\tconst fontSizeVar = '--notebook-editor-font-size';\n\t\tconst fontWeightVar = '--notebook-editor-font-weight';\n\t\t// If we have any editors, then use left layout of one of those.\n\t\tconst editor = this._notebookEditor.codeEditors.map(c => c[1]).find(c => c);\n\t\tconst layoutInfo = editor?.getOptions().get(EditorOption.layoutInfo);\n\n\t\tconst style = ``\n\t\t\t+ `font-family: var(${fontFamilyVar});`\n\t\t\t+ `font-weight: var(${fontWeightVar});`\n\t\t\t+ `font-size: var(${fontSizeVar});`\n\t\t\t+ fontInfo.lineHeight ? `line-height: ${fontInfo.lineHeight}px;` : ''\n\t\t\t\t+ layoutInfo?.contentLeft ? `margin-left: ${layoutInfo}px;` : ''\n\t\t+ `white-space: pre;`;\n\n\t\tconst rootContainer = this.container;\n\t\trootContainer.classList.add('code-cell-row');\n\n\t\tif (this._toolbarOptions) {\n\t\t\tconst toolbar = document.createElement('div');\n\t\t\ttoolbar.className = this._toolbarOptions.className;\n\t\t\trootContainer.appendChild(toolbar);\n\n\t\t\tconst scopedInstaService = this._register(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, this._notebookEditor.scopedContextKeyService])));\n\t\t\tconst toolbarWidget = scopedInstaService.createInstance(MenuWorkbenchToolBar, toolbar, this._toolbarOptions.menuId, {\n\t\t\t\ttelemetrySource: this._toolbarOptions.telemetrySource,\n\t\t\t\thiddenItemStrategy: HiddenItemStrategy.NoHide,\n\t\t\t\ttoolbarOptions: { primaryGroup: () => true },\n\t\t\t\tmenuOptions: {\n\t\t\t\t\trenderShortTitle: true,\n\t\t\t\t\targ: this._toolbarOptions.argFactory(this._originalIndex),\n\t\t\t\t},\n\t\t\t\tactionViewItemProvider: this._toolbarOptions.actionViewItemProvider\n\t\t\t});\n\t\t\tthis._store.add(toolbarWidget);\n\n\t\t\ttoolbar.style.position = 'absolute';\n\t\t\ttoolbar.style.right = '40px';\n\t\t\ttoolbar.style.zIndex = '10';\n\t\t\ttoolbar.classList.add('hover'); // Show by default\n\t\t}\n\n\t\tconst container = DOM.append(rootContainer, DOM.$('.cell-inner-container'));\n\t\tcontainer.style.position = 'relative'; // Add this line\n\n\t\tconst focusIndicatorLeft = DOM.append(container, DOM.$('.cell-focus-indicator.cell-focus-indicator-side.cell-focus-indicator-left'));\n\t\tconst cellContainer = DOM.append(container, DOM.$('.cell.code'));\n\t\tDOM.append(focusIndicatorLeft, DOM.$('div.execution-count-label'));\n\t\tconst editorPart = DOM.append(cellContainer, DOM.$('.cell-editor-part'));\n\t\tlet editorContainer = DOM.append(editorPart, DOM.$('.cell-editor-container'));\n\t\teditorContainer = DOM.append(editorContainer, DOM.$('.code', { style }));\n\t\tif (fontInfo.fontFamily) {\n\t\t\teditorContainer.style.setProperty(fontFamilyVar, fontInfo.fontFamily);\n\t\t}\n\t\tif (fontInfo.fontSize) {\n\t\t\teditorContainer.style.setProperty(fontSizeVar, `${fontInfo.fontSize}px`);\n\t\t}\n\t\tif (fontInfo.fontWeight) {\n\t\t\teditorContainer.style.setProperty(fontWeightVar, fontInfo.fontWeight);\n\t\t}\n\t\teditorContainer.innerHTML = (ttPolicy?.createHTML(codeHtml) || codeHtml) as string;\n\n\t\tconst lineCount = splitLines(code).length;\n\t\tconst height = (lineCount * (fontInfo.lineHeight || DefaultLineHeight)) + 12 + 12; // We have 12px top and bottom in generated code HTML;\n\t\tconst totalHeight = height + 16 + 16;\n\n\t\treturn totalHeight;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createTrustedTypesPolicy } from '../../../../../../base/browser/trustedTypes.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { splitLines } from '../../../../../../base/common/strings.js';\nimport { EditorOption } from '../../../../../../editor/common/config/editorOptions.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { tokenizeToString } from '../../../../../../editor/common/languages/textToHtmlTokenizer.js';\nimport { NotebookCellTextModel } from '../../../common/model/notebookCellTextModel.js';\nimport { NotebookTextModel } from '../../../common/model/notebookTextModel.js';\nimport { DefaultLineHeight } from '../diffElementViewModel.js';\nimport { CellDiffInfo } from '../notebookDiffViewModel.js';\nimport { INotebookEditor, NotebookOverviewRulerLane } from '../../notebookBrowser.js';\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { MenuWorkbenchToolBar, HiddenItemStrategy } from '../../../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { overviewRulerDeletedForeground } from '../../../../scm/common/quickDiff.js';\nimport { IActionViewItemProvider } from '../../../../../../base/browser/ui/actionbar/actionbar.js';\n\nconst ttPolicy = createTrustedTypesPolicy('notebookRenderer', { createHTML: value => value });\n\nexport interface INotebookDeletedCellDecorator {\n\tgetTop(deletedIndex: number): number | undefined;\n}\n\n\nexport class NotebookDeletedCellDecorator extends Disposable implements INotebookDeletedCellDecorator {\n\tprivate readonly zoneRemover = this._register(new DisposableStore());\n\tprivate readonly createdViewZones = new Map<number, string>();\n\tprivate readonly deletedCellInfos = new Map<number, { height: number; previousIndex: number; offset: number }>();\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\tprivate readonly toolbar: { menuId: MenuId; className: string; telemetrySource?: string; argFactory: (deletedCellIndex: number) => any; actionViewItemProvider?: IActionViewItemProvider } | undefined,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic getTop(deletedIndex: number) {\n\t\tconst info = this.deletedCellInfos.get(deletedIndex);\n\t\tif (!info) {\n\t\t\treturn;\n\t\t}\n\t\tif (info.previousIndex === -1) {\n\t\t\t// deleted cell is before the first real cell\n\t\t\treturn 0;\n\t\t}\n\t\tconst cells = this._notebookEditor.getCellsInRange({ start: info.previousIndex, end: info.previousIndex + 1 });\n\t\tif (!cells.length) {\n\t\t\treturn this._notebookEditor.getLayoutInfo().height + info.offset;\n\t\t}\n\t\tconst cell = cells[0];\n\t\tconst cellHeight = this._notebookEditor.getHeightOfElement(cell);\n\t\tconst top = this._notebookEditor.getAbsoluteTopOfElement(cell);\n\t\treturn top + cellHeight + info.offset;\n\t}\n\n\treveal(deletedIndex: number) {\n\t\tconst top = this.getTop(deletedIndex);\n\t\tif (typeof top === 'number') {\n\t\t\tthis._notebookEditor.focusContainer();\n\t\t\tthis._notebookEditor.revealOffsetInCenterIfOutsideViewport(top);\n\n\t\t\tconst info = this.deletedCellInfos.get(deletedIndex);\n\n\t\t\tif (info) {\n\t\t\t\tconst prevIndex = info.previousIndex === -1 ? 0 : info.previousIndex;\n\t\t\t\tthis._notebookEditor.setFocus({ start: prevIndex, end: prevIndex });\n\t\t\t\tthis._notebookEditor.setSelections([{ start: prevIndex, end: prevIndex }]);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic apply(diffInfo: CellDiffInfo[], original: NotebookTextModel): void {\n\t\tthis.clear();\n\n\t\tlet currentIndex = -1;\n\t\tconst deletedCellsToRender: { cells: { cell: NotebookCellTextModel; originalIndex: number; previousIndex: number }[]; index: number } = { cells: [], index: 0 };\n\t\tdiffInfo.forEach(diff => {\n\t\t\tif (diff.type === 'delete') {\n\t\t\t\tconst deletedCell = original.cells[diff.originalCellIndex];\n\t\t\t\tif (deletedCell) {\n\t\t\t\t\tdeletedCellsToRender.cells.push({ cell: deletedCell, originalIndex: diff.originalCellIndex, previousIndex: currentIndex });\n\t\t\t\t\tdeletedCellsToRender.index = currentIndex;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (deletedCellsToRender.cells.length) {\n\t\t\t\t\tthis._createWidget(deletedCellsToRender.index + 1, deletedCellsToRender.cells);\n\t\t\t\t\tdeletedCellsToRender.cells.length = 0;\n\t\t\t\t}\n\t\t\t\tcurrentIndex = diff.modifiedCellIndex;\n\t\t\t}\n\t\t});\n\t\tif (deletedCellsToRender.cells.length) {\n\t\t\tthis._createWidget(deletedCellsToRender.index + 1, deletedCellsToRender.cells);\n\t\t}\n\t}\n\n\tpublic clear() {\n\t\tthis.deletedCellInfos.clear();\n\t\tthis.zoneRemover.clear();\n\t}\n\n\n\tprivate _createWidget(index: number, cells: { cell: NotebookCellTextModel; originalIndex: number; previousIndex: number }[]) {\n\t\tthis._createWidgetImpl(index, cells);\n\t}\n\tprivate async _createWidgetImpl(index: number, cells: { cell: NotebookCellTextModel; originalIndex: number; previousIndex: number }[]) {\n\t\tconst rootContainer = document.createElement('div');\n\t\tconst widgets: NotebookDeletedCellWidget[] = [];\n\t\tconst heights = await Promise.all(cells.map(async cell => {\n\t\t\tconst widget = new NotebookDeletedCellWidget(this._notebookEditor, this.toolbar, cell.cell.getValue(), cell.cell.language, rootContainer, cell.originalIndex, this.languageService, this.instantiationService);\n\t\t\twidgets.push(widget);\n\t\t\tconst height = await widget.render();\n\t\t\tthis.deletedCellInfos.set(cell.originalIndex, { height, previousIndex: cell.previousIndex, offset: 0 });\n\t\t\treturn height;\n\t\t}));\n\n\t\tArray.from(this.deletedCellInfos.keys()).sort((a, b) => a - b).forEach((originalIndex) => {\n\t\t\tconst previousDeletedCell = this.deletedCellInfos.get(originalIndex - 1);\n\t\t\tif (previousDeletedCell) {\n\t\t\t\tconst deletedCell = this.deletedCellInfos.get(originalIndex);\n\t\t\t\tif (deletedCell) {\n\t\t\t\t\tdeletedCell.offset = previousDeletedCell.height + previousDeletedCell.offset;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst totalHeight = heights.reduce<number>((prev, curr) => prev + curr, 0);\n\n\t\tthis._notebookEditor.changeViewZones(accessor => {\n\t\t\tconst notebookViewZone = {\n\t\t\t\tafterModelPosition: index,\n\t\t\t\theightInPx: totalHeight + 4,\n\t\t\t\tdomNode: rootContainer\n\t\t\t};\n\n\t\t\tconst id = accessor.addZone(notebookViewZone);\n\t\t\taccessor.layoutZone(id);\n\t\t\tthis.createdViewZones.set(index, id);\n\n\t\t\tconst deletedCellOverviewRulereDecorationIds = this._notebookEditor.deltaCellDecorations([], [{\n\t\t\t\tviewZoneId: id,\n\t\t\t\toptions: {\n\t\t\t\t\toverviewRuler: {\n\t\t\t\t\t\tcolor: overviewRulerDeletedForeground,\n\t\t\t\t\t\tposition: NotebookOverviewRulerLane.Center,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]);\n\t\t\tthis.zoneRemover.add(toDisposable(() => {\n\t\t\t\tif (this.createdViewZones.get(index) === id) {\n\t\t\t\t\tthis.createdViewZones.delete(index);\n\t\t\t\t}\n\t\t\t\tif (!this._notebookEditor.isDisposed) {\n\t\t\t\t\tthis._notebookEditor.changeViewZones(accessor => {\n\t\t\t\t\t\taccessor.removeZone(id);\n\t\t\t\t\t\tdispose(widgets);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._notebookEditor.deltaCellDecorations(deletedCellOverviewRulereDecorationIds, []);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t}\n\n}\n\nexport class NotebookDeletedCellWidget extends Disposable {\n\tprivate readonly container: HTMLElement;\n\t// private readonly toolbar: HTMLElement;\n\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\tprivate readonly _toolbarOptions: { menuId: MenuId; className: string; telemetrySource?: string; argFactory: (deletedCellIndex: number) => any; actionViewItemProvider?: IActionViewItemProvider } | undefined,\n\t\tprivate readonly code: string,\n\t\tprivate readonly language: string,\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly _originalIndex: number,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tthis.container = DOM.append(container, document.createElement('div'));\n\t\tthis._register(toDisposable(() => {\n\t\t\tcontainer.removeChild(this.container);\n\t\t}));\n\t}\n\n\tpublic async render() {\n\t\tconst code = this.code;\n\t\tconst languageId = this.language;\n\t\tconst codeHtml = await tokenizeToString(this.languageService, code, languageId);\n\n\t\t// const colorMap = this.getDefaultColorMap();\n\t\tconst fontInfo = this._notebookEditor.getBaseCellEditorOptions(languageId).value;\n\t\tconst fontFamilyVar = '--notebook-editor-font-family';\n\t\tconst fontSizeVar = '--notebook-editor-font-size';\n\t\tconst fontWeightVar = '--notebook-editor-font-weight';\n\t\t// If we have any editors, then use left layout of one of those.\n\t\tconst editor = this._notebookEditor.codeEditors.map(c => c[1]).find(c => c);\n\t\tconst layoutInfo = editor?.getOptions().get(EditorOption.layoutInfo);\n\n\t\tconst style = ``\n\t\t\t+ `font-family: var(${fontFamilyVar});`\n\t\t\t+ `font-weight: var(${fontWeightVar});`\n\t\t\t+ `font-size: var(${fontSizeVar});`\n\t\t\t+ fontInfo.lineHeight ? `line-height: ${fontInfo.lineHeight}px;` : ''\n\t\t\t\t+ layoutInfo?.contentLeft ? `margin-left: ${layoutInfo}px;` : ''\n\t\t+ `white-space: pre;`;\n\n\t\tconst rootContainer = this.container;\n\t\trootContainer.classList.add('code-cell-row');\n\n\t\tif (this._toolbarOptions) {\n\t\t\tconst toolbar = document.createElement('div');\n\t\t\ttoolbar.className = this._toolbarOptions.className;\n\t\t\trootContainer.appendChild(toolbar);\n\n\t\t\tconst scopedInstaService = this._register(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, this._notebookEditor.scopedContextKeyService])));\n\t\t\tconst toolbarWidget = scopedInstaService.createInstance(MenuWorkbenchToolBar, toolbar, this._toolbarOptions.menuId, {\n\t\t\t\ttelemetrySource: this._toolbarOptions.telemetrySource,\n\t\t\t\thiddenItemStrategy: HiddenItemStrategy.NoHide,\n\t\t\t\ttoolbarOptions: { primaryGroup: () => true },\n\t\t\t\tmenuOptions: {\n\t\t\t\t\trenderShortTitle: true,\n\t\t\t\t\targ: this._toolbarOptions.argFactory(this._originalIndex),\n\t\t\t\t},\n\t\t\t\tactionViewItemProvider: this._toolbarOptions.actionViewItemProvider\n\t\t\t});\n\t\t\tthis._store.add(toolbarWidget);\n\n\t\t\ttoolbar.style.position = 'absolute';\n\t\t\ttoolbar.style.right = '40px';\n\t\t\ttoolbar.style.zIndex = '10';\n\t\t\ttoolbar.classList.add('hover'); // Show by default\n\t\t}\n\n\t\tconst container = DOM.append(rootContainer, DOM.$('.cell-inner-container'));\n\t\tcontainer.style.position = 'relative'; // Add this line\n\n\t\tconst focusIndicatorLeft = DOM.append(container, DOM.$('.cell-focus-indicator.cell-focus-indicator-side.cell-focus-indicator-left'));\n\t\tconst cellContainer = DOM.append(container, DOM.$('.cell.code'));\n\t\tDOM.append(focusIndicatorLeft, DOM.$('div.execution-count-label'));\n\t\tconst editorPart = DOM.append(cellContainer, DOM.$('.cell-editor-part'));\n\t\tlet editorContainer = DOM.append(editorPart, DOM.$('.cell-editor-container'));\n\t\teditorContainer = DOM.append(editorContainer, DOM.$('.code', { style }));\n\t\tif (fontInfo.fontFamily) {\n\t\t\teditorContainer.style.setProperty(fontFamilyVar, fontInfo.fontFamily);\n\t\t}\n\t\tif (fontInfo.fontSize) {\n\t\t\teditorContainer.style.setProperty(fontSizeVar, `${fontInfo.fontSize}px`);\n\t\t}\n\t\tif (fontInfo.fontWeight) {\n\t\t\teditorContainer.style.setProperty(fontWeightVar, fontInfo.fontWeight);\n\t\t}\n\t\teditorContainer.innerHTML = (ttPolicy?.createHTML(codeHtml) || codeHtml) as string;\n\n\t\tconst lineCount = splitLines(code).length;\n\t\tconst height = (lineCount * (fontInfo.lineHeight || DefaultLineHeight)) + 12 + 12; // We have 12px top and bottom in generated code HTML;\n\t\tconst totalHeight = height + 16 + 16;\n\n\t\treturn totalHeight;\n\t}\n}\n"]}