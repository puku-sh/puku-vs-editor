{"version":3,"sources":["vs/workbench/contrib/notebook/browser/controller/insertCellActions.ts"],"names":[],"mappings":"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","file":"insertCellActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { localize } from '../../../../../nls.js';\nimport { IAction2Options, MenuId, MenuRegistry, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { InputFocusedContext } from '../../../../../platform/contextkey/common/contextkeys.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { insertCell } from './cellOperations.js';\nimport { INotebookActionContext, NotebookAction } from './coreActions.js';\nimport { NOTEBOOK_CELL_LIST_FOCUSED, NOTEBOOK_EDITOR_EDITABLE } from '../../common/notebookContextKeys.js';\nimport { CellViewModel } from '../viewModel/notebookViewModelImpl.js';\nimport { CellKind, NotebookSetting } from '../../common/notebookCommon.js';\nimport { INotebookKernelHistoryService } from '../../common/notebookKernelService.js';\n\nconst INSERT_CODE_CELL_ABOVE_COMMAND_ID = 'notebook.cell.insertCodeCellAbove';\nconst INSERT_CODE_CELL_BELOW_COMMAND_ID = 'notebook.cell.insertCodeCellBelow';\nconst INSERT_CODE_CELL_ABOVE_AND_FOCUS_CONTAINER_COMMAND_ID = 'notebook.cell.insertCodeCellAboveAndFocusContainer';\nconst INSERT_CODE_CELL_BELOW_AND_FOCUS_CONTAINER_COMMAND_ID = 'notebook.cell.insertCodeCellBelowAndFocusContainer';\nconst INSERT_CODE_CELL_AT_TOP_COMMAND_ID = 'notebook.cell.insertCodeCellAtTop';\nconst INSERT_MARKDOWN_CELL_ABOVE_COMMAND_ID = 'notebook.cell.insertMarkdownCellAbove';\nconst INSERT_MARKDOWN_CELL_BELOW_COMMAND_ID = 'notebook.cell.insertMarkdownCellBelow';\nconst INSERT_MARKDOWN_CELL_AT_TOP_COMMAND_ID = 'notebook.cell.insertMarkdownCellAtTop';\n\nexport function insertNewCell(accessor: ServicesAccessor, context: INotebookActionContext, kind: CellKind, direction: 'above' | 'below', focusEditor: boolean) {\n\tlet newCell: CellViewModel | null = null;\n\tif (context.ui) {\n\t\tcontext.notebookEditor.focus();\n\t}\n\n\tconst languageService = accessor.get(ILanguageService);\n\tconst kernelHistoryService = accessor.get(INotebookKernelHistoryService);\n\n\tif (context.cell) {\n\t\tconst idx = context.notebookEditor.getCellIndex(context.cell);\n\t\tnewCell = insertCell(languageService, context.notebookEditor, idx, kind, direction, undefined, true, kernelHistoryService);\n\t} else {\n\t\tconst focusRange = context.notebookEditor.getFocus();\n\t\tconst next = Math.max(focusRange.end - 1, 0);\n\t\tnewCell = insertCell(languageService, context.notebookEditor, next, kind, direction, undefined, true, kernelHistoryService);\n\t}\n\n\treturn newCell;\n}\n\nexport abstract class InsertCellCommand extends NotebookAction {\n\tconstructor(\n\t\tdesc: Readonly<IAction2Options>,\n\t\tprivate kind: CellKind,\n\t\tprivate direction: 'above' | 'below',\n\t\tprivate focusEditor: boolean\n\t) {\n\t\tsuper(desc);\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst newCell = await insertNewCell(accessor, context, this.kind, this.direction, this.focusEditor);\n\n\t\tif (newCell) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, this.focusEditor ? 'editor' : 'container');\n\t\t}\n\t}\n}\n\nregisterAction2(class InsertCodeCellAboveAction extends InsertCellCommand {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_CODE_CELL_ABOVE_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertCodeCellAbove', \"Insert Code Cell Above\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter,\n\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_CELL_LIST_FOCUSED, InputFocusedContext.toNegated()),\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellInsert,\n\t\t\t\t\torder: 0\n\t\t\t\t}\n\t\t\t},\n\t\t\tCellKind.Code,\n\t\t\t'above',\n\t\t\ttrue);\n\t}\n});\n\n\n\nregisterAction2(class InsertCodeCellAboveAndFocusContainerAction extends InsertCellCommand {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_CODE_CELL_ABOVE_AND_FOCUS_CONTAINER_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertCodeCellAboveAndFocusContainer', \"Insert Code Cell Above and Focus Container\")\n\t\t\t},\n\t\t\tCellKind.Code,\n\t\t\t'above',\n\t\t\tfalse);\n\t}\n});\n\nregisterAction2(class InsertCodeCellBelowAction extends InsertCellCommand {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_CODE_CELL_BELOW_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertCodeCellBelow', \"Insert Code Cell Below\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_CELL_LIST_FOCUSED, InputFocusedContext.toNegated()),\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellInsert,\n\t\t\t\t\torder: 1\n\t\t\t\t}\n\t\t\t},\n\t\t\tCellKind.Code,\n\t\t\t'below',\n\t\t\ttrue);\n\t}\n});\n\nregisterAction2(class InsertCodeCellBelowAndFocusContainerAction extends InsertCellCommand {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_CODE_CELL_BELOW_AND_FOCUS_CONTAINER_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertCodeCellBelowAndFocusContainer', \"Insert Code Cell Below and Focus Container\"),\n\t\t\t},\n\t\t\tCellKind.Code,\n\t\t\t'below',\n\t\t\tfalse);\n\t}\n});\n\n\nregisterAction2(class InsertMarkdownCellAboveAction extends InsertCellCommand {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_MARKDOWN_CELL_ABOVE_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertMarkdownCellAbove', \"Insert Markdown Cell Above\"),\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellInsert,\n\t\t\t\t\torder: 2\n\t\t\t\t}\n\t\t\t},\n\t\t\tCellKind.Markup,\n\t\t\t'above',\n\t\t\ttrue);\n\t}\n});\n\nregisterAction2(class InsertMarkdownCellBelowAction extends InsertCellCommand {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_MARKDOWN_CELL_BELOW_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertMarkdownCellBelow', \"Insert Markdown Cell Below\"),\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellInsert,\n\t\t\t\t\torder: 3\n\t\t\t\t}\n\t\t\t},\n\t\t\tCellKind.Markup,\n\t\t\t'below',\n\t\t\ttrue);\n\t}\n});\n\n\nregisterAction2(class InsertCodeCellAtTopAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_CODE_CELL_AT_TOP_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertCodeCellAtTop', \"Add Code Cell At Top\"),\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, context?: INotebookActionContext): Promise<void> {\n\t\tcontext = context ?? this.getEditorContextFromArgsOrActive(accessor);\n\t\tif (context) {\n\t\t\tthis.runWithContext(accessor, context);\n\t\t}\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst languageService = accessor.get(ILanguageService);\n\t\tconst kernelHistoryService = accessor.get(INotebookKernelHistoryService);\n\t\tconst newCell = insertCell(languageService, context.notebookEditor, 0, CellKind.Code, 'above', undefined, true, kernelHistoryService);\n\n\t\tif (newCell) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, 'editor');\n\t\t}\n\t}\n});\n\nregisterAction2(class InsertMarkdownCellAtTopAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: INSERT_MARKDOWN_CELL_AT_TOP_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.insertMarkdownCellAtTop', \"Add Markdown Cell At Top\"),\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, context?: INotebookActionContext): Promise<void> {\n\t\tcontext = context ?? this.getEditorContextFromArgsOrActive(accessor);\n\t\tif (context) {\n\t\t\tthis.runWithContext(accessor, context);\n\t\t}\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst languageService = accessor.get(ILanguageService);\n\t\tconst kernelHistoryService = accessor.get(INotebookKernelHistoryService);\n\n\t\tconst newCell = insertCell(languageService, context.notebookEditor, 0, CellKind.Markup, 'above', undefined, true, kernelHistoryService);\n\n\t\tif (newCell) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, 'editor');\n\t\t}\n\t}\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookCellBetween, {\n\tcommand: {\n\t\tid: INSERT_CODE_CELL_BELOW_COMMAND_ID,\n\t\ttitle: '$(add) ' + localize('notebookActions.menu.insertCode', \"Code\"),\n\t\ttooltip: localize('notebookActions.menu.insertCode.tooltip', \"Add Code Cell\")\n\t},\n\torder: 0,\n\tgroup: 'inline',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.experimental.insertToolbarAlignment', 'left')\n\t)\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookCellBetween, {\n\tcommand: {\n\t\tid: INSERT_CODE_CELL_BELOW_COMMAND_ID,\n\t\ttitle: localize('notebookActions.menu.insertCode.minimalToolbar', \"Add Code\"),\n\t\ticon: Codicon.add,\n\t\ttooltip: localize('notebookActions.menu.insertCode.tooltip', \"Add Code Cell\")\n\t},\n\torder: 0,\n\tgroup: 'inline',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.equals('config.notebook.experimental.insertToolbarAlignment', 'left')\n\t)\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookToolbar, {\n\tcommand: {\n\t\tid: INSERT_CODE_CELL_BELOW_COMMAND_ID,\n\t\ticon: Codicon.add,\n\t\ttitle: localize('notebookActions.menu.insertCode.ontoolbar', \"Code\"),\n\t\ttooltip: localize('notebookActions.menu.insertCode.tooltip', \"Add Code Cell\")\n\t},\n\torder: -5,\n\tgroup: 'navigation/add',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.insertToolbarLocation', 'betweenCells'),\n\t\tContextKeyExpr.notEquals('config.notebook.insertToolbarLocation', 'hidden')\n\t)\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookCellListTop, {\n\tcommand: {\n\t\tid: INSERT_CODE_CELL_AT_TOP_COMMAND_ID,\n\t\ttitle: '$(add) ' + localize('notebookActions.menu.insertCode', \"Code\"),\n\t\ttooltip: localize('notebookActions.menu.insertCode.tooltip', \"Add Code Cell\")\n\t},\n\torder: 0,\n\tgroup: 'inline',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.experimental.insertToolbarAlignment', 'left')\n\t)\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookCellListTop, {\n\tcommand: {\n\t\tid: INSERT_CODE_CELL_AT_TOP_COMMAND_ID,\n\t\ttitle: localize('notebookActions.menu.insertCode.minimaltoolbar', \"Add Code\"),\n\t\ticon: Codicon.add,\n\t\ttooltip: localize('notebookActions.menu.insertCode.tooltip', \"Add Code Cell\")\n\t},\n\torder: 0,\n\tgroup: 'inline',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.equals('config.notebook.experimental.insertToolbarAlignment', 'left')\n\t)\n});\n\n\nMenuRegistry.appendMenuItem(MenuId.NotebookCellBetween, {\n\tcommand: {\n\t\tid: INSERT_MARKDOWN_CELL_BELOW_COMMAND_ID,\n\t\ttitle: '$(add) ' + localize('notebookActions.menu.insertMarkdown', \"Markdown\"),\n\t\ttooltip: localize('notebookActions.menu.insertMarkdown.tooltip', \"Add Markdown Cell\")\n\t},\n\torder: 1,\n\tgroup: 'inline',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.experimental.insertToolbarAlignment', 'left')\n\t)\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookToolbar, {\n\tcommand: {\n\t\tid: INSERT_MARKDOWN_CELL_BELOW_COMMAND_ID,\n\t\ticon: Codicon.add,\n\t\ttitle: localize('notebookActions.menu.insertMarkdown.ontoolbar', \"Markdown\"),\n\t\ttooltip: localize('notebookActions.menu.insertMarkdown.tooltip', \"Add Markdown Cell\")\n\t},\n\torder: -5,\n\tgroup: 'navigation/add',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.insertToolbarLocation', 'betweenCells'),\n\t\tContextKeyExpr.notEquals('config.notebook.insertToolbarLocation', 'hidden'),\n\t\tContextKeyExpr.notEquals(`config.${NotebookSetting.globalToolbarShowLabel}`, false),\n\t\tContextKeyExpr.notEquals(`config.${NotebookSetting.globalToolbarShowLabel}`, 'never')\n\t)\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookCellListTop, {\n\tcommand: {\n\t\tid: INSERT_MARKDOWN_CELL_AT_TOP_COMMAND_ID,\n\t\ttitle: '$(add) ' + localize('notebookActions.menu.insertMarkdown', \"Markdown\"),\n\t\ttooltip: localize('notebookActions.menu.insertMarkdown.tooltip', \"Add Markdown Cell\")\n\t},\n\torder: 1,\n\tgroup: 'inline',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.experimental.insertToolbarAlignment', 'left')\n\t)\n});\n"]}