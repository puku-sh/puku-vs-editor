{"version":3,"sources":["vs/workbench/contrib/notebook/browser/controller/editActions.ts"],"names":[],"mappings":"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","file":"editActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyChord, KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { Mimes } from '../../../../../base/common/mime.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ICodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { Selection } from '../../../../../editor/common/core/selection.js';\nimport { CommandExecutor } from '../../../../../editor/common/cursor/cursor.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { ILanguageConfigurationService } from '../../../../../editor/common/languages/languageConfigurationRegistry.js';\nimport { TrackedRangeStickiness } from '../../../../../editor/common/model.js';\nimport { getIconClasses } from '../../../../../editor/common/services/getIconClasses.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { LineCommentCommand, Type } from '../../../../../editor/contrib/comment/browser/lineCommentCommand.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { InputFocusedContext, InputFocusedContextKey } from '../../../../../platform/contextkey/common/contextkeys.js';\nimport { IConfirmationResult, IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IQuickInputService, IQuickPickItem, QuickPickInput } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { InlineChatController } from '../../../inlineChat/browser/inlineChatController.js';\nimport { CTX_INLINE_CHAT_FOCUSED } from '../../../inlineChat/common/inlineChat.js';\nimport { changeCellToKind, runDeleteAction } from './cellOperations.js';\nimport { CELL_TITLE_CELL_GROUP_ID, CELL_TITLE_OUTPUT_GROUP_ID, CellToolbarOrder, INotebookActionContext, INotebookCellActionContext, INotebookCommandContext, NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT, NotebookAction, NotebookCellAction, NotebookMultiCellAction, executeNotebookCondition, findTargetCellEditor } from './coreActions.js';\nimport { NotebookChangeTabDisplaySize, NotebookIndentUsingSpaces, NotebookIndentUsingTabs, NotebookIndentationToSpacesAction, NotebookIndentationToTabsAction } from './notebookIndentationActions.js';\nimport { CHANGE_CELL_LANGUAGE, CellEditState, DETECT_CELL_LANGUAGE, QUIT_EDIT_CELL_COMMAND_ID, getNotebookEditorFromEditorPane } from '../notebookBrowser.js';\nimport * as icons from '../notebookIcons.js';\nimport { CellEditType, CellKind, ICellEditOperation, NotebookCellExecutionState, NotebookSetting } from '../../common/notebookCommon.js';\nimport { NOTEBOOK_CELL_EDITABLE, NOTEBOOK_CELL_HAS_OUTPUTS, NOTEBOOK_CELL_IS_FIRST_OUTPUT, NOTEBOOK_CELL_LIST_FOCUSED, NOTEBOOK_CELL_MARKDOWN_EDIT_MODE, NOTEBOOK_CELL_TYPE, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_EDITOR_FOCUSED, NOTEBOOK_HAS_OUTPUTS, NOTEBOOK_IS_ACTIVE_EDITOR, NOTEBOOK_OUTPUT_FOCUSED, NOTEBOOK_OUTPUT_INPUT_FOCUSED, NOTEBOOK_USE_CONSOLIDATED_OUTPUT_BUTTON } from '../../common/notebookContextKeys.js';\nimport { INotebookExecutionStateService } from '../../common/notebookExecutionStateService.js';\nimport { INotebookKernelService } from '../../common/notebookKernelService.js';\nimport { ICellRange } from '../../common/notebookRange.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { ILanguageDetectionService } from '../../../../services/languageDetection/common/languageDetectionWorkerService.js';\nimport { NotebookInlineVariablesController } from '../contrib/notebookVariables/notebookInlineVariables.js';\n\nconst CLEAR_ALL_CELLS_OUTPUTS_COMMAND_ID = 'notebook.clearAllCellsOutputs';\nconst EDIT_CELL_COMMAND_ID = 'notebook.cell.edit';\nconst DELETE_CELL_COMMAND_ID = 'notebook.cell.delete';\nconst QUIT_EDIT_ALL_CELLS_COMMAND_ID = 'notebook.quitEditAllCells';\nexport const CLEAR_CELL_OUTPUTS_COMMAND_ID = 'notebook.cell.clearOutputs';\nexport const SELECT_NOTEBOOK_INDENTATION_ID = 'notebook.selectIndentation';\nexport const COMMENT_SELECTED_CELLS_ID = 'notebook.commentSelectedCells';\n\nregisterAction2(class EditCellAction extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: EDIT_CELL_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.editCell', \"Edit Cell\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\t\t\tContextKeyExpr.not(InputFocusedContextKey),\n\t\t\t\t\t\tEditorContextKeys.hoverFocused.toNegated(),\n\t\t\t\t\t\tNOTEBOOK_OUTPUT_INPUT_FOCUSED.toNegated()\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\t\t\t\t\tNOTEBOOK_CELL_TYPE.isEqualTo('markup'),\n\t\t\t\t\t\tNOTEBOOK_CELL_MARKDOWN_EDIT_MODE.toNegated(),\n\t\t\t\t\t\tNOTEBOOK_CELL_EDITABLE),\n\t\t\t\t\torder: CellToolbarOrder.EditCell,\n\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID\n\t\t\t\t},\n\t\t\t\ticon: icons.editIcon,\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext): Promise<void> {\n\t\tif (!context.notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'editor');\n\t\tconst foundEditor: ICodeEditor | undefined = context.cell ? findTargetCellEditor(context, context.cell) : undefined;\n\t\tif (foundEditor && foundEditor.hasTextFocus() && InlineChatController.get(foundEditor)?.getWidgetPosition()?.lineNumber === foundEditor.getPosition()?.lineNumber) {\n\t\t\tInlineChatController.get(foundEditor)?.focus();\n\t\t}\n\t}\n});\n\nconst quitEditCondition = ContextKeyExpr.and(\n\tNOTEBOOK_EDITOR_FOCUSED,\n\tInputFocusedContext,\n\tCTX_INLINE_CHAT_FOCUSED.toNegated()\n);\nregisterAction2(class QuitEditCellAction extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: QUIT_EDIT_CELL_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.quitEdit', \"Stop Editing Cell\"),\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_CELL_TYPE.isEqualTo('markup'),\n\t\t\t\t\t\tNOTEBOOK_CELL_MARKDOWN_EDIT_MODE,\n\t\t\t\t\t\tNOTEBOOK_CELL_EDITABLE),\n\t\t\t\t\torder: CellToolbarOrder.SaveCell,\n\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID\n\t\t\t\t},\n\t\t\t\ticon: icons.stopEditIcon,\n\t\t\t\tkeybinding: [\n\t\t\t\t\t{\n\t\t\t\t\t\twhen: ContextKeyExpr.and(quitEditCondition,\n\t\t\t\t\t\t\tEditorContextKeys.hoverVisible.toNegated(),\n\t\t\t\t\t\t\tEditorContextKeys.hasNonEmptySelection.toNegated(),\n\t\t\t\t\t\t\tEditorContextKeys.hasMultipleSelections.toNegated()),\n\t\t\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT - 5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\t\tNOTEBOOK_OUTPUT_FOCUSED),\n\t\t\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tquitEditCondition,\n\t\t\t\t\t\t\tNOTEBOOK_CELL_TYPE.isEqualTo('markup')),\n\t\t\t\t\t\tprimary: KeyMod.WinCtrl | KeyCode.Enter,\n\t\t\t\t\t\twin: {\n\t\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Enter\n\t\t\t\t\t\t},\n\t\t\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT - 5\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext) {\n\t\tif (context.cell.cellKind === CellKind.Markup) {\n\t\t\tcontext.cell.updateEditState(CellEditState.Preview, QUIT_EDIT_CELL_COMMAND_ID);\n\t\t}\n\n\t\tawait context.notebookEditor.focusNotebookCell(context.cell, 'container', { skipReveal: true });\n\t}\n});\n\nregisterAction2(class QuitEditAllCellsAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: QUIT_EDIT_ALL_CELLS_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.quitEditAllCells', \"Stop Editing All Cells\")\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tif (!context.notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewModel = context.notebookEditor.getViewModel();\n\t\tif (!viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activeCell = context.notebookEditor.getActiveCell();\n\n\t\tconst editingCells = viewModel.viewCells.filter(cell =>\n\t\t\tcell.cellKind === CellKind.Markup && cell.getEditState() === CellEditState.Editing\n\t\t);\n\n\t\teditingCells.forEach(cell => {\n\t\t\tcell.updateEditState(CellEditState.Preview, QUIT_EDIT_ALL_CELLS_COMMAND_ID);\n\t\t});\n\n\t\tif (activeCell) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(activeCell, 'container', { skipReveal: true });\n\t\t}\n\t}\n});\n\nregisterAction2(class DeleteCellAction extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: DELETE_CELL_COMMAND_ID,\n\t\t\t\ttitle: localize('notebookActions.deleteCell', \"Delete Cell\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyCode.Delete,\n\t\t\t\t\tmac: {\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace\n\t\t\t\t\t},\n\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, ContextKeyExpr.not(InputFocusedContextKey), NOTEBOOK_OUTPUT_INPUT_FOCUSED.toNegated()),\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t},\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellDelete,\n\t\t\t\t\t\twhen: NOTEBOOK_EDITOR_EDITABLE,\n\t\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.InteractiveCellDelete,\n\t\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ticon: icons.deleteCellIcon\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext) {\n\t\tif (!context.notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet confirmation: IConfirmationResult;\n\t\tconst notebookExecutionStateService = accessor.get(INotebookExecutionStateService);\n\t\tconst runState = notebookExecutionStateService.getCellExecution(context.cell.uri)?.state;\n\t\tconst configService = accessor.get(IConfigurationService);\n\n\t\tif (runState === NotebookCellExecutionState.Executing && configService.getValue(NotebookSetting.confirmDeleteRunningCell)) {\n\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\tconst primaryButton = localize('confirmDeleteButton', \"Delete\");\n\n\t\t\tconfirmation = await dialogService.confirm({\n\t\t\t\ttype: 'question',\n\t\t\t\tmessage: localize('confirmDeleteButtonMessage', \"This cell is running, are you sure you want to delete it?\"),\n\t\t\t\tprimaryButton: primaryButton,\n\t\t\t\tcheckbox: {\n\t\t\t\t\tlabel: localize('doNotAskAgain', \"Do not ask me again\")\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else {\n\t\t\tconfirmation = { confirmed: true };\n\t\t}\n\n\t\tif (!confirmation.confirmed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (confirmation.checkboxChecked === true) {\n\t\t\tawait configService.updateValue(NotebookSetting.confirmDeleteRunningCell, false);\n\t\t}\n\n\t\trunDeleteAction(context.notebookEditor, context.cell);\n\t}\n});\n\nregisterAction2(class ClearCellOutputsAction extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CLEAR_CELL_OUTPUTS_COMMAND_ID,\n\t\t\ttitle: localize('clearCellOutputs', 'Clear Cell Outputs'),\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_CELL_TYPE.isEqualTo('code'), executeNotebookCondition, NOTEBOOK_CELL_HAS_OUTPUTS, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_CELL_EDITABLE, NOTEBOOK_USE_CONSOLIDATED_OUTPUT_BUTTON.toNegated()),\n\t\t\t\t\torder: CellToolbarOrder.ClearCellOutput,\n\t\t\t\t\tgroup: CELL_TITLE_OUTPUT_GROUP_ID\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookOutputToolbar,\n\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_CELL_HAS_OUTPUTS, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_CELL_EDITABLE, NOTEBOOK_CELL_IS_FIRST_OUTPUT, NOTEBOOK_USE_CONSOLIDATED_OUTPUT_BUTTON)\n\t\t\t\t},\n\t\t\t],\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, ContextKeyExpr.not(InputFocusedContextKey), NOTEBOOK_CELL_HAS_OUTPUTS, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_CELL_EDITABLE),\n\t\t\t\tprimary: KeyMod.Alt | KeyCode.Delete,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\ticon: icons.clearIcon\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext): Promise<void> {\n\t\tconst notebookExecutionStateService = accessor.get(INotebookExecutionStateService);\n\t\tconst editor = context.notebookEditor;\n\t\tif (!editor.hasModel() || !editor.textModel.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = context.cell;\n\t\tconst index = editor.textModel.cells.indexOf(cell.model);\n\n\t\tif (index < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst computeUndoRedo = !editor.isReadOnly;\n\t\teditor.textModel.applyEdits([{ editType: CellEditType.Output, index, outputs: [] }], true, undefined, () => undefined, undefined, computeUndoRedo);\n\n\t\tconst runState = notebookExecutionStateService.getCellExecution(context.cell.uri)?.state;\n\t\tif (runState !== NotebookCellExecutionState.Executing) {\n\t\t\tcontext.notebookEditor.textModel.applyEdits([{\n\t\t\t\teditType: CellEditType.PartialInternalMetadata, index, internalMetadata: {\n\t\t\t\t\trunStartTime: null,\n\t\t\t\t\trunStartTimeAdjustment: null,\n\t\t\t\t\trunEndTime: null,\n\t\t\t\t\texecutionOrder: null,\n\t\t\t\t\tlastRunSuccess: null\n\t\t\t\t}\n\t\t\t}], true, undefined, () => undefined, undefined, computeUndoRedo);\n\t\t}\n\t}\n});\n\nregisterAction2(class ClearAllCellOutputsAction extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CLEAR_ALL_CELLS_OUTPUTS_COMMAND_ID,\n\t\t\ttitle: localize('clearAllCellsOutputs', 'Clear All Outputs'),\n\t\t\tprecondition: NOTEBOOK_HAS_OUTPUTS,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\tContextKeyExpr.notEquals('config.notebook.globalToolbar', true)\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 0\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\texecuteNotebookCondition,\n\t\t\t\t\t\tContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation/execute',\n\t\t\t\t\torder: 10\n\t\t\t\t}\n\t\t\t],\n\t\t\ticon: icons.clearIcon\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tconst notebookExecutionStateService = accessor.get(INotebookExecutionStateService);\n\t\tconst editor = context.notebookEditor;\n\t\tif (!editor.hasModel() || !editor.textModel.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst computeUndoRedo = !editor.isReadOnly;\n\t\teditor.textModel.applyEdits(\n\t\t\teditor.textModel.cells.map((cell, index) => ({\n\t\t\t\teditType: CellEditType.Output, index, outputs: []\n\t\t\t})), true, undefined, () => undefined, undefined, computeUndoRedo);\n\n\t\tconst clearExecutionMetadataEdits = editor.textModel.cells.map((cell, index) => {\n\t\t\tconst runState = notebookExecutionStateService.getCellExecution(cell.uri)?.state;\n\t\t\tif (runState !== NotebookCellExecutionState.Executing) {\n\t\t\t\treturn {\n\t\t\t\t\teditType: CellEditType.PartialInternalMetadata, index, internalMetadata: {\n\t\t\t\t\t\trunStartTime: null,\n\t\t\t\t\t\trunStartTimeAdjustment: null,\n\t\t\t\t\t\trunEndTime: null,\n\t\t\t\t\t\texecutionOrder: null,\n\t\t\t\t\t\tlastRunSuccess: null\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}).filter(edit => !!edit) as ICellEditOperation[];\n\t\tif (clearExecutionMetadataEdits.length) {\n\t\t\tcontext.notebookEditor.textModel.applyEdits(clearExecutionMetadataEdits, true, undefined, () => undefined, undefined, computeUndoRedo);\n\t\t}\n\n\t\tconst controller = editor.getContribution<NotebookInlineVariablesController>(NotebookInlineVariablesController.id);\n\t\tcontroller.clearNotebookInlineDecorations();\n\t}\n});\n\ninterface ILanguagePickInput extends IQuickPickItem {\n\tlanguageId: string;\n\tdescription: string;\n}\n\ninterface IChangeCellContext extends INotebookCellActionContext {\n\t// TODO@rebornix : `cells`\n\t// range: ICellRange;\n\tlanguage?: string;\n}\n\nregisterAction2(class ChangeCellLanguageAction extends NotebookCellAction<ICellRange> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CHANGE_CELL_LANGUAGE,\n\t\t\ttitle: localize('changeLanguage', 'Change Cell Language'),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyM),\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_CELL_EDITABLE)\n\t\t\t},\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize('changeLanguage', 'Change Cell Language'),\n\t\t\t\targs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'range',\n\t\t\t\t\t\tdescription: 'The cell range',\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t'type': 'object',\n\t\t\t\t\t\t\t'required': ['start', 'end'],\n\t\t\t\t\t\t\t'properties': {\n\t\t\t\t\t\t\t\t'start': {\n\t\t\t\t\t\t\t\t\t'type': 'number'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'end': {\n\t\t\t\t\t\t\t\t\t'type': 'number'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'language',\n\t\t\t\t\t\tdescription: 'The target cell language',\n\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t'type': 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected override getCellContextFromArgs(accessor: ServicesAccessor, context?: ICellRange, ...additionalArgs: any[]): IChangeCellContext | undefined {\n\t\tif (!context || typeof context.start !== 'number' || typeof context.end !== 'number' || context.start >= context.end) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst language = additionalArgs.length && typeof additionalArgs[0] === 'string' ? additionalArgs[0] : undefined;\n\t\tconst activeEditorContext = this.getEditorContextFromArgsOrActive(accessor);\n\n\t\tif (!activeEditorContext || !activeEditorContext.notebookEditor.hasModel() || context.start >= activeEditorContext.notebookEditor.getLength()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO@rebornix, support multiple cells\n\t\treturn {\n\t\t\tnotebookEditor: activeEditorContext.notebookEditor,\n\t\t\tcell: activeEditorContext.notebookEditor.cellAt(context.start)!,\n\t\t\tlanguage\n\t\t};\n\t}\n\n\n\tasync runWithContext(accessor: ServicesAccessor, context: IChangeCellContext): Promise<void> {\n\t\tif (context.language) {\n\t\t\tawait this.setLanguage(context, context.language);\n\t\t} else {\n\t\t\tawait this.showLanguagePicker(accessor, context);\n\t\t}\n\t}\n\n\tprivate async showLanguagePicker(accessor: ServicesAccessor, context: IChangeCellContext) {\n\t\tconst topItems: ILanguagePickInput[] = [];\n\t\tconst mainItems: ILanguagePickInput[] = [];\n\n\t\tconst languageService = accessor.get(ILanguageService);\n\t\tconst modelService = accessor.get(IModelService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst languageDetectionService = accessor.get(ILanguageDetectionService);\n\t\tconst kernelService = accessor.get(INotebookKernelService);\n\n\t\tlet languages = context.notebookEditor.activeKernel?.supportedLanguages;\n\t\tif (!languages) {\n\t\t\tconst matchResult = kernelService.getMatchingKernel(context.notebookEditor.textModel);\n\t\t\tconst allSupportedLanguages = matchResult.all.flatMap(kernel => kernel.supportedLanguages);\n\t\t\tlanguages = allSupportedLanguages.length > 0 ? allSupportedLanguages : languageService.getRegisteredLanguageIds();\n\t\t}\n\n\t\tconst providerLanguages = new Set([\n\t\t\t...languages,\n\t\t\t'markdown'\n\t\t]);\n\n\t\tproviderLanguages.forEach(languageId => {\n\t\t\tlet description: string;\n\t\t\tif (context.cell.cellKind === CellKind.Markup ? (languageId === 'markdown') : (languageId === context.cell.language)) {\n\t\t\t\tdescription = localize('languageDescription', \"({0}) - Current Language\", languageId);\n\t\t\t} else {\n\t\t\t\tdescription = localize('languageDescriptionConfigured', \"({0})\", languageId);\n\t\t\t}\n\n\t\t\tconst languageName = languageService.getLanguageName(languageId);\n\t\t\tif (!languageName) {\n\t\t\t\t// Notebook has unrecognized language\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst item: ILanguagePickInput = {\n\t\t\t\tlabel: languageName,\n\t\t\t\ticonClasses: getIconClasses(modelService, languageService, this.getFakeResource(languageName, languageService)),\n\t\t\t\tdescription,\n\t\t\t\tlanguageId\n\t\t\t};\n\n\t\t\tif (languageId === 'markdown' || languageId === context.cell.language) {\n\t\t\t\ttopItems.push(item);\n\t\t\t} else {\n\t\t\t\tmainItems.push(item);\n\t\t\t}\n\t\t});\n\n\t\tmainItems.sort((a, b) => {\n\t\t\treturn a.description.localeCompare(b.description);\n\t\t});\n\n\t\t// Offer to \"Auto Detect\"\n\t\tconst autoDetectMode: IQuickPickItem = {\n\t\t\tlabel: localize('autoDetect', \"Auto Detect\")\n\t\t};\n\n\t\tconst picks: QuickPickInput[] = [\n\t\t\tautoDetectMode,\n\t\t\t{ type: 'separator', label: localize('languagesPicks', \"languages (identifier)\") },\n\t\t\t...topItems,\n\t\t\t{ type: 'separator' },\n\t\t\t...mainItems\n\t\t];\n\n\t\tconst selection = await quickInputService.pick(picks, { placeHolder: localize('pickLanguageToConfigure', \"Select Language Mode\") });\n\t\tconst languageId = selection === autoDetectMode\n\t\t\t? await languageDetectionService.detectLanguage(context.cell.uri)\n\t\t\t: (selection as ILanguagePickInput)?.languageId;\n\n\t\tif (languageId) {\n\t\t\tawait this.setLanguage(context, languageId);\n\t\t}\n\t}\n\n\tprivate async setLanguage(context: IChangeCellContext, languageId: string) {\n\t\tawait setCellToLanguage(languageId, context);\n\t}\n\n\t/**\n\t * Copied from editorStatus.ts\n\t */\n\tprivate getFakeResource(lang: string, languageService: ILanguageService): URI | undefined {\n\t\tlet fakeResource: URI | undefined;\n\n\t\tconst languageId = languageService.getLanguageIdByLanguageName(lang);\n\t\tif (languageId) {\n\t\t\tconst extensions = languageService.getExtensions(languageId);\n\t\t\tif (extensions.length) {\n\t\t\t\tfakeResource = URI.file(extensions[0]);\n\t\t\t} else {\n\t\t\t\tconst filenames = languageService.getFilenames(languageId);\n\t\t\t\tif (filenames.length) {\n\t\t\t\t\tfakeResource = URI.file(filenames[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn fakeResource;\n\t}\n});\n\nregisterAction2(class DetectCellLanguageAction extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: DETECT_CELL_LANGUAGE,\n\t\t\ttitle: localize2('detectLanguage', \"Accept Detected Language for Cell\"),\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_CELL_EDITABLE),\n\t\t\tkeybinding: { primary: KeyCode.KeyD | KeyMod.Alt | KeyMod.Shift, weight: KeybindingWeight.WorkbenchContrib }\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext): Promise<void> {\n\t\tconst languageDetectionService = accessor.get(ILanguageDetectionService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tconst kernelService = accessor.get(INotebookKernelService);\n\t\tconst kernel = kernelService.getSelectedOrSuggestedKernel(context.notebookEditor.textModel);\n\t\tconst providerLanguages = [...kernel?.supportedLanguages ?? []];\n\t\tproviderLanguages.push('markdown');\n\t\tconst detection = await languageDetectionService.detectLanguage(context.cell.uri, providerLanguages);\n\t\tif (detection) {\n\t\t\tsetCellToLanguage(detection, context);\n\t\t} else {\n\t\t\tnotificationService.warn(localize('noDetection', \"Unable to detect cell language\"));\n\t\t}\n\t}\n});\n\nasync function setCellToLanguage(languageId: string, context: IChangeCellContext) {\n\tif (languageId === 'markdown' && context.cell?.language !== 'markdown') {\n\t\tconst idx = context.notebookEditor.getCellIndex(context.cell);\n\t\tawait changeCellToKind(CellKind.Markup, { cell: context.cell, notebookEditor: context.notebookEditor, ui: true }, 'markdown', Mimes.markdown);\n\t\tconst newCell = context.notebookEditor.cellAt(idx);\n\n\t\tif (newCell) {\n\t\t\tawait context.notebookEditor.focusNotebookCell(newCell, 'editor');\n\t\t}\n\t} else if (languageId !== 'markdown' && context.cell?.cellKind === CellKind.Markup) {\n\t\tawait changeCellToKind(CellKind.Code, { cell: context.cell, notebookEditor: context.notebookEditor, ui: true }, languageId);\n\t} else {\n\t\tconst index = context.notebookEditor.textModel.cells.indexOf(context.cell.model);\n\t\tcontext.notebookEditor.textModel.applyEdits(\n\t\t\t[{ editType: CellEditType.CellLanguage, index, language: languageId }],\n\t\t\ttrue, undefined, () => undefined, undefined, !context.notebookEditor.isReadOnly\n\t\t);\n\t}\n}\n\nregisterAction2(class SelectNotebookIndentation extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SELECT_NOTEBOOK_INDENTATION_ID,\n\t\t\ttitle: localize2('selectNotebookIndentation', 'Select Indentation'),\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(NOTEBOOK_IS_ACTIVE_EDITOR, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_CELL_EDITABLE),\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tawait this.showNotebookIndentationPicker(accessor, context);\n\t}\n\n\tprivate async showNotebookIndentationPicker(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\n\t\tconst activeNotebook = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\t\tif (!activeNotebook || activeNotebook.isDisposed) {\n\t\t\treturn quickInputService.pick([{ label: localize('noNotebookEditor', \"No notebook editor active at this time\") }]);\n\t\t}\n\n\t\tif (activeNotebook.isReadOnly) {\n\t\t\treturn quickInputService.pick([{ label: localize('noWritableCodeEditor', \"The active notebook editor is read-only.\") }]);\n\t\t}\n\n\t\tconst picks: QuickPickInput<IQuickPickItem & { run(): void }>[] = [\n\t\t\tnew NotebookIndentUsingTabs(), // indent using tabs\n\t\t\tnew NotebookIndentUsingSpaces(), // indent using spaces\n\t\t\tnew NotebookChangeTabDisplaySize(), // change tab size\n\t\t\tnew NotebookIndentationToTabsAction(), // convert indentation to tabs\n\t\t\tnew NotebookIndentationToSpacesAction() // convert indentation to spaces\n\t\t].map(item => {\n\t\t\treturn {\n\t\t\t\tid: item.desc.id,\n\t\t\t\tlabel: item.desc.title.toString(),\n\t\t\t\trun: () => {\n\t\t\t\t\tinstantiationService.invokeFunction(item.run);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\n\t\tpicks.splice(3, 0, { type: 'separator', label: localize('indentConvert', \"convert file\") });\n\t\tpicks.unshift({ type: 'separator', label: localize('indentView', \"change view\") });\n\n\t\tconst action = await quickInputService.pick(picks, { placeHolder: localize('pickAction', \"Select Action\"), matchOnDetail: true });\n\t\tif (!action) {\n\t\t\treturn;\n\t\t}\n\t\taction.run();\n\t\tcontext.notebookEditor.focus();\n\t\treturn;\n\t}\n});\n\nregisterAction2(class CommentSelectedCellsAction extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: COMMENT_SELECTED_CELLS_ID,\n\t\t\ttitle: localize('commentSelectedCells', \"Comment Selected Cells\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\tNOTEBOOK_EDITOR_EDITABLE,\n\t\t\t\t\tContextKeyExpr.not(InputFocusedContextKey),\n\t\t\t\t),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Slash,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext): Promise<void> {\n\t\tconst languageConfigurationService = accessor.get(ILanguageConfigurationService);\n\n\t\tcontext.selectedCells.forEach(async cellViewModel => {\n\t\t\tconst textModel = await cellViewModel.resolveTextModel();\n\n\t\t\tconst commentsOptions = cellViewModel.commentOptions;\n\t\t\tconst cellCommentCommand = new LineCommentCommand(\n\t\t\t\tlanguageConfigurationService,\n\t\t\t\tnew Selection(1, 1, textModel.getLineCount(), textModel.getLineMaxColumn(textModel.getLineCount())), // comment the entire cell\n\t\t\t\ttextModel.getOptions().tabSize,\n\t\t\t\tType.Toggle,\n\t\t\t\tcommentsOptions.insertSpace ?? true,\n\t\t\t\tcommentsOptions.ignoreEmptyLines ?? true,\n\t\t\t\tfalse\n\t\t\t);\n\n\t\t\t// store any selections that are in the cell, allows them to be shifted by comments and preserved\n\t\t\tconst cellEditorSelections = cellViewModel.getSelections();\n\t\t\tconst initialTrackedRangesIDs: string[] = cellEditorSelections.map(selection => {\n\t\t\t\treturn textModel._setTrackedRange(null, selection, TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges);\n\t\t\t});\n\n\t\t\tCommandExecutor.executeCommands(textModel, cellEditorSelections, [cellCommentCommand]);\n\n\t\t\tconst newTrackedSelections = initialTrackedRangesIDs.map(i => {\n\t\t\t\treturn textModel._getTrackedRange(i);\n\t\t\t}).filter(r => !!r).map((range,) => {\n\t\t\t\treturn new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n\t\t\t});\n\t\t\tcellViewModel.setSelections(newTrackedSelections ?? []);\n\t\t}); // end of cells forEach\n\t}\n\n});\n"]}