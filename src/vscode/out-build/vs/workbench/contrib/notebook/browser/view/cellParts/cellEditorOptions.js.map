{"version":3,"sources":["vs/workbench/contrib/notebook/browser/view/cellParts/cellEditorOptions.ts"],"names":[],"mappings":"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","file":"cellEditorOptions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../../base/common/event.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { IEditorOptions } from '../../../../../../editor/common/config/editorOptions.js';\nimport { localize, localize2 } from '../../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { Extensions as ConfigurationExtensions, IConfigurationRegistry } from '../../../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { Registry } from '../../../../../../platform/registry/common/platform.js';\nimport { ActiveEditorContext } from '../../../../../common/contextkeys.js';\nimport { INotebookCellToolbarActionContext, INotebookCommandContext, NotebookMultiCellAction, NOTEBOOK_ACTIONS_CATEGORY } from '../../controller/coreActions.js';\nimport { IBaseCellEditorOptions, ICellViewModel } from '../../notebookBrowser.js';\nimport { NOTEBOOK_CELL_LINE_NUMBERS, NOTEBOOK_EDITOR_FOCUSED } from '../../../common/notebookContextKeys.js';\nimport { CellContentPart } from '../cellPart.js';\nimport { NotebookCellInternalMetadata, NOTEBOOK_EDITOR_ID } from '../../../common/notebookCommon.js';\nimport { NotebookOptions } from '../../notebookOptions.js';\nimport { CellViewModelStateChangeEvent } from '../../notebookViewEvents.js';\nimport { ITextModelUpdateOptions } from '../../../../../../editor/common/model.js';\n\n//todo@Yoyokrazy implenets is needed or not?\nexport class CellEditorOptions extends CellContentPart implements ITextModelUpdateOptions {\n\tprivate _lineNumbers: 'on' | 'off' | 'inherit' = 'inherit';\n\tprivate _tabSize?: number;\n\tprivate _indentSize?: number | 'tabSize';\n\tprivate _insertSpaces?: boolean;\n\n\tset tabSize(value: number | undefined) {\n\t\tif (this._tabSize !== value) {\n\t\t\tthis._tabSize = value;\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\t}\n\n\tget tabSize() {\n\t\treturn this._tabSize;\n\t}\n\n\tset indentSize(value: number | 'tabSize' | undefined) {\n\t\tif (this._indentSize !== value) {\n\t\t\tthis._indentSize = value;\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\t}\n\n\tget indentSize() {\n\t\treturn this._indentSize;\n\t}\n\n\tset insertSpaces(value: boolean | undefined) {\n\t\tif (this._insertSpaces !== value) {\n\t\t\tthis._insertSpaces = value;\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\t}\n\n\tget insertSpaces() {\n\t\treturn this._insertSpaces;\n\t}\n\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\tprivate _value: IEditorOptions;\n\n\tconstructor(\n\t\tprivate readonly base: IBaseCellEditorOptions,\n\t\treadonly notebookOptions: NotebookOptions,\n\t\treadonly configurationService: IConfigurationService) {\n\t\tsuper();\n\n\t\tthis._register(base.onDidChange(() => {\n\t\t\tthis._recomputeOptions();\n\t\t}));\n\n\t\tthis._value = this._computeEditorOptions();\n\t}\n\n\toverride updateState(element: ICellViewModel, e: CellViewModelStateChangeEvent) {\n\t\tif (e.cellLineNumberChanged) {\n\t\t\tthis.setLineNumbers(element.lineNumbers);\n\t\t}\n\t}\n\n\tprivate _recomputeOptions(): void {\n\t\tthis._value = this._computeEditorOptions();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate _computeEditorOptions() {\n\t\tconst value = this.base.value; // base IEditorOptions\n\n\t\t// TODO @Yoyokrazy find a different way to get the editor overrides, this is not the right way\n\t\tconst cellEditorOverridesRaw = this.notebookOptions.getDisplayOptions().editorOptionsCustomizations;\n\t\tconst indentSize = cellEditorOverridesRaw?.['editor.indentSize'];\n\t\tif (indentSize !== undefined) {\n\t\t\tthis.indentSize = indentSize;\n\t\t}\n\t\tconst insertSpaces = cellEditorOverridesRaw?.['editor.insertSpaces'];\n\t\tif (insertSpaces !== undefined) {\n\t\t\tthis.insertSpaces = insertSpaces;\n\t\t}\n\t\tconst tabSize = cellEditorOverridesRaw?.['editor.tabSize'];\n\t\tif (tabSize !== undefined) {\n\t\t\tthis.tabSize = tabSize;\n\t\t}\n\n\t\tlet cellRenderLineNumber = value.lineNumbers;\n\n\t\tswitch (this._lineNumbers) {\n\t\t\tcase 'inherit':\n\t\t\t\t// inherit from the notebook setting\n\t\t\t\tif (this.configurationService.getValue<'on' | 'off'>('notebook.lineNumbers') === 'on') {\n\t\t\t\t\tif (value.lineNumbers === 'off') {\n\t\t\t\t\t\tcellRenderLineNumber = 'on';\n\t\t\t\t\t} // otherwise just use the editor setting\n\t\t\t\t} else {\n\t\t\t\t\tcellRenderLineNumber = 'off';\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'on':\n\t\t\t\t// should turn on, ignore the editor line numbers off options\n\t\t\t\tif (value.lineNumbers === 'off') {\n\t\t\t\t\tcellRenderLineNumber = 'on';\n\t\t\t\t} // otherwise just use the editor setting\n\t\t\t\tbreak;\n\t\t\tcase 'off':\n\t\t\t\tcellRenderLineNumber = 'off';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst overrides: Partial<IEditorOptions> = {};\n\t\tif (value.lineNumbers !== cellRenderLineNumber) {\n\t\t\toverrides.lineNumbers = cellRenderLineNumber;\n\t\t}\n\n\t\tif (this.notebookOptions.getLayoutConfiguration().disableRulers) {\n\t\t\toverrides.rulers = [];\n\t\t}\n\n\t\treturn {\n\t\t\t...value,\n\t\t\t...overrides,\n\t\t};\n\t}\n\n\tgetUpdatedValue(internalMetadata: NotebookCellInternalMetadata, cellUri: URI): IEditorOptions {\n\t\tconst options = this.getValue(internalMetadata, cellUri);\n\t\tdelete options.hover; // This is toggled by a debug editor contribution\n\n\t\treturn options;\n\t}\n\n\tgetValue(internalMetadata: NotebookCellInternalMetadata, cellUri: URI): IEditorOptions {\n\t\treturn {\n\t\t\t...this._value,\n\t\t\t...{\n\t\t\t\tpadding: this.notebookOptions.computeEditorPadding(internalMetadata, cellUri)\n\t\t\t}\n\t\t};\n\t}\n\n\tgetDefaultValue(): IEditorOptions {\n\t\treturn {\n\t\t\t...this._value,\n\t\t\t...{\n\t\t\t\tpadding: { top: 12, bottom: 12 }\n\t\t\t}\n\t\t};\n\t}\n\n\tsetLineNumbers(lineNumbers: 'on' | 'off' | 'inherit'): void {\n\t\tthis._lineNumbers = lineNumbers;\n\t\tthis._recomputeOptions();\n\t}\n}\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\tid: 'notebook',\n\torder: 100,\n\ttype: 'object',\n\t'properties': {\n\t\t'notebook.lineNumbers': {\n\t\t\ttype: 'string',\n\t\t\tenum: ['off', 'on'],\n\t\t\tdefault: 'off',\n\t\t\tmarkdownDescription: localize('notebook.lineNumbers', \"Controls the display of line numbers in the cell editor.\")\n\t\t}\n\t}\n});\n\nregisterAction2(class ToggleLineNumberAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.toggleLineNumbers',\n\t\t\ttitle: localize2('notebook.toggleLineNumbers', 'Toggle Notebook Line Numbers'),\n\t\t\tprecondition: NOTEBOOK_EDITOR_FOCUSED,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\tgroup: 'notebookLayout',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.equals('config.notebook.globalToolbar', true)\n\t\t\t\t}],\n\t\t\tcategory: NOTEBOOK_ACTIONS_CATEGORY,\n\t\t\tf1: true,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ContextKeyExpr.notEquals('config.notebook.lineNumbers', 'off'),\n\t\t\t\ttitle: localize('notebook.showLineNumbers', \"Notebook Line Numbers\"),\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst renderLiNumbers = configurationService.getValue<'on' | 'off'>('notebook.lineNumbers') === 'on';\n\n\t\tif (renderLiNumbers) {\n\t\t\tconfigurationService.updateValue('notebook.lineNumbers', 'off');\n\t\t} else {\n\t\t\tconfigurationService.updateValue('notebook.lineNumbers', 'on');\n\t\t}\n\t}\n});\n\nregisterAction2(class ToggleActiveLineNumberAction extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.cell.toggleLineNumbers',\n\t\t\ttitle: localize('notebook.cell.toggleLineNumbers.title', \"Show Cell Line Numbers\"),\n\t\t\tprecondition: ActiveEditorContext.isEqualTo(NOTEBOOK_EDITOR_ID),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\tgroup: 'View',\n\t\t\t\torder: 1\n\t\t\t}],\n\t\t\ttoggled: ContextKeyExpr.or(\n\t\t\t\tNOTEBOOK_CELL_LINE_NUMBERS.isEqualTo('on'),\n\t\t\t\tContextKeyExpr.and(NOTEBOOK_CELL_LINE_NUMBERS.isEqualTo('inherit'), ContextKeyExpr.equals('config.notebook.lineNumbers', 'on'))\n\t\t\t)\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext | INotebookCellToolbarActionContext): Promise<void> {\n\t\tif (context.ui) {\n\t\t\tthis.updateCell(accessor.get(IConfigurationService), context.cell);\n\t\t} else {\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tcontext.selectedCells.forEach(cell => {\n\t\t\t\tthis.updateCell(configurationService, cell);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate updateCell(configurationService: IConfigurationService, cell: ICellViewModel) {\n\t\tconst renderLineNumbers = configurationService.getValue<'on' | 'off'>('notebook.lineNumbers') === 'on';\n\t\tconst cellLineNumbers = cell.lineNumbers;\n\t\t// 'on', 'inherit' \t-> 'on'\n\t\t// 'on', 'off'\t\t-> 'off'\n\t\t// 'on', 'on'\t\t-> 'on'\n\t\t// 'off', 'inherit'\t-> 'off'\n\t\t// 'off', 'off'\t\t-> 'off'\n\t\t// 'off', 'on'\t\t-> 'on'\n\t\tconst currentLineNumberIsOn = cellLineNumbers === 'on' || (cellLineNumbers === 'inherit' && renderLineNumbers);\n\n\t\tif (currentLineNumberIsOn) {\n\t\t\tcell.lineNumbers = 'off';\n\t\t} else {\n\t\t\tcell.lineNumbers = 'on';\n\t\t}\n\n\t}\n});\n"]}