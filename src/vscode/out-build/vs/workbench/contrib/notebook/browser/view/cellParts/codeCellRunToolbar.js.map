{"version":3,"sources":["vs/workbench/contrib/notebook/browser/view/cellParts/codeCellRunToolbar.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,sDAAsD,CAAC;AAC/E,OAAO,EAAE,MAAM,EAAW,MAAM,0CAA0C,CAAC;AAC3E,OAAO,EAAE,eAAe,EAAE,MAAM,4CAA4C,CAAC;AAE7E,OAAO,EAAE,iBAAiB,EAAE,MAAM,sDAAsD,CAAC;AACzF,OAAO,EAAE,QAAQ,EAAE,MAAM,0BAA0B,CAAC;AACpD,OAAO,EAAE,iCAAiC,EAAE,MAAM,iFAAiF,CAAC;AACpI,OAAO,EAAE,mBAAmB,EAAE,MAAM,uEAAuE,CAAC;AAC5G,OAAO,EAAS,YAAY,EAAU,cAAc,EAAE,MAAM,sDAAsD,CAAC;AAEnH,OAAO,EAAE,mBAAmB,EAAE,MAAM,6DAA6D,CAAC;AAClG,OAAO,EAAE,mBAAmB,EAAE,MAAM,+DAA+D,CAAC;AACpG,OAAO,EAAE,qBAAqB,EAAE,MAAM,kEAAkE,CAAC;AACzG,OAAO,EAAE,kBAAkB,EAAE,MAAM,4DAA4D,CAAC;AAGhG,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AACjD,OAAO,EAAE,+BAA+B,EAAE,MAAM,8BAA8B,CAAC;AAC/E,OAAO,EAAE,6BAA6B,EAAE,0BAA0B,EAAE,kBAAkB,EAAE,uBAAuB,EAAE,MAAM,wCAAwC,CAAC;AAEzJ,IAAM,UAAU,GAAhB,MAAM,UAAW,SAAQ,eAAe;IAM9C,YACU,cAAuC,EACvC,iBAAqC,EACrC,aAA0B,EAC1B,kBAA+B,EACxC,aAAqB,EACrB,eAAuB,EACT,WAAyB,EACF,iBAAqC,EACpC,kBAAuC,EACrC,oBAA2C;QAEnF,KAAK,EAAE,CAAC;QAXC,mBAAc,GAAd,cAAc,CAAyB;QACvC,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,kBAAa,GAAb,aAAa,CAAa;QAC1B,uBAAkB,GAAlB,kBAAkB,CAAa;QAIH,sBAAiB,GAAjB,iBAAiB,CAAoB;QACpC,uBAAkB,GAAlB,kBAAkB,CAAqB;QACrC,yBAAoB,GAApB,oBAAoB,CAAuB;QAInF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,UAAU,CAAC,aAAa,EAAE,iBAAiB,CAAC,CAAC,CAAC;QAC5F,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,UAAU,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAC,CAAC;QAChG,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAAE,aAAa,EAAE,iBAAiB,CAAC,CAAC;QAChF,MAAM,aAAa,GAAG,GAAG,EAAE;YAC1B,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAC7D,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,gCAAgC;YACpE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACnD,CAAC,CAAC;QACF,aAAa,EAAE,CAAC;QAChB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC;QAC5D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC;QAC9D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC,CAAC;IACvF,CAAC;IAEQ,aAAa,CAAC,OAAuB;QAC7C,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,+BAA+B,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;QAEjH,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC;YACpC,MAAM,OAAO,GAAkD;gBAC9D,EAAE,EAAE,IAAI;gBACR,IAAI,EAAE,OAAO;gBACb,cAAc,EAAE,IAAI,CAAC,cAAc;gBACnC,IAAI,iDAAwC;aAC5C,CAAC;YACF,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC;QAChC,CAAC;IACF,CAAC;IAED,qBAAqB,CAAC,IAAW;QAChC,OAAO,mBAAmB,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IAClG,CAAC;IAEO,oBAAoB,CAAC,SAAsB,EAAE,aAA0B,EAAE,iBAAqC;QACrH,MAAM,yBAAyB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,eAAe,EAAE,CAAC,CAAC;QACxE,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,yBAAyB,EAAE,QAAQ,CAAC,KAA8B,EAAE,IAAS,CAAC,EAAE,sBAAsB,EAAE,IAAI,CAAC,CAAC,CAAC;QAEhK,MAAM,kBAAkB,GAAG,CAAC,MAAe,EAAE,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE,EAAE,0BAA0B,CAAC,CAAC;QAC/H,MAAM,0BAA0B,GAAG,IAAI,CAAC,SAAS,CAAC,qCAAqC,CAAC,iBAAiB,CAAC,CAAC,CAAC;QAC5G,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,kBAAkB,EAAE;YAC7E,aAAa,EAAE,kBAAkB;YACjC,sBAAsB,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE;gBAC7C,yBAAyB,CAAC,KAAK,EAAE,CAAC;gBAElC,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBACxE,IAAI,CAAC,CAAC,OAAO,YAAY,cAAc,CAAC,EAAE,CAAC;oBAC1C,OAAO,SAAS,CAAC;gBAClB,CAAC;gBAED,MAAM,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC;gBAC3E,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;oBACvB,OAAO,SAAS,CAAC;gBAClB,CAAC;gBAED,MAAM,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iCAAiC,EACtF,OAAO,EACP,cAAc,EACd,SAAS,EACT,2BAA2B,EAC3B;oBACC,GAAG,QAAQ;oBACX,aAAa,EAAE,kBAAkB;iBACjC,CAAC,CAAC;gBACJ,yBAAyB,CAAC,GAAG,CAAC,IAAI,CAAC,6BAA6B,CAAC,OAAO,CAAC,EAAE;oBAC1E,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,kCAAkC,EAAE,OAAO,CAAC,CAAC;gBAC7E,CAAC,CAAC,CAAC,CAAC;gBAEJ,OAAO,IAAI,CAAC;YACb,CAAC;YACD,4BAA4B,EAAE,IAAI;SAClC,CAAC,CAAC,CAAC;IACL,CAAC;CACD,CAAA;AA3FY,UAAU;IAapB,WAAA,YAAY,CAAA;IACZ,WAAA,kBAAkB,CAAA;IAClB,WAAA,mBAAmB,CAAA;IACnB,WAAA,qBAAqB,CAAA;GAhBX,UAAU,CA2FtB;;AAED,MAAM,UAAU,qCAAqC,CAAC,iBAAqC;IAC1F,oFAAoF;IACpF,MAAM,0BAA0B,GAAG,iBAAiB,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IACjG,mBAAmB,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACjE,iBAAiB,CAAC,eAAe,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC/E,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACrE,iBAAiB,CAAC,cAAc,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC9E,6BAA6B,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC7E,0BAA0B,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACxE,uBAAuB,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACrE,kBAAkB,CAAC,MAAM,CAAC,0BAA0B,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAElE,OAAO,0BAA0B,CAAC;AACnC,CAAC","file":"codeCellRunToolbar.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ToolBar } from '../../../../../../base/browser/ui/toolbar/toolbar.js';\nimport { Action, IAction } from '../../../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../../../base/common/marshallingIds.js';\nimport { EditorContextKeys } from '../../../../../../editor/common/editorContextKeys.js';\nimport { localize } from '../../../../../../nls.js';\nimport { DropdownWithPrimaryActionViewItem } from '../../../../../../platform/actions/browser/dropdownWithPrimaryActionViewItem.js';\nimport { getActionBarActions } from '../../../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenu, IMenuService, MenuId, MenuItemAction } from '../../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, IScopedContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { InputFocusedContext } from '../../../../../../platform/contextkey/common/contextkeys.js';\nimport { IContextMenuService } from '../../../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\nimport { INotebookCellActionContext } from '../../controller/coreActions.js';\nimport { ICellViewModel, INotebookEditorDelegate } from '../../notebookBrowser.js';\nimport { CellContentPart } from '../cellPart.js';\nimport { registerCellToolbarStickyScroll } from './cellToolbarStickyScroll.js';\nimport { NOTEBOOK_CELL_EXECUTION_STATE, NOTEBOOK_CELL_LIST_FOCUSED, NOTEBOOK_CELL_TYPE, NOTEBOOK_EDITOR_FOCUSED } from '../../../common/notebookContextKeys.js';\n\nexport class RunToolbar extends CellContentPart {\n\tprivate toolbar!: ToolBar;\n\n\tprivate primaryMenu: IMenu;\n\tprivate secondaryMenu: IMenu;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\treadonly contextKeyService: IContextKeyService,\n\t\treadonly cellContainer: HTMLElement,\n\t\treadonly runButtonContainer: HTMLElement,\n\t\tprimaryMenuId: MenuId,\n\t\tsecondaryMenuId: MenuId,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.primaryMenu = this._register(menuService.createMenu(primaryMenuId, contextKeyService));\n\t\tthis.secondaryMenu = this._register(menuService.createMenu(secondaryMenuId, contextKeyService));\n\t\tthis.createRunCellToolbar(runButtonContainer, cellContainer, contextKeyService);\n\t\tconst updateActions = () => {\n\t\t\tconst actions = this.getCellToolbarActions(this.primaryMenu);\n\t\t\tconst primary = actions.primary[0]; // Only allow one primary action\n\t\t\tthis.toolbar.setActions(primary ? [primary] : []);\n\t\t};\n\t\tupdateActions();\n\t\tthis._register(this.primaryMenu.onDidChange(updateActions));\n\t\tthis._register(this.secondaryMenu.onDidChange(updateActions));\n\t\tthis._register(this.notebookEditor.notebookOptions.onDidChangeOptions(updateActions));\n\t}\n\n\toverride didRenderCell(element: ICellViewModel): void {\n\t\tthis.cellDisposables.add(registerCellToolbarStickyScroll(this.notebookEditor, element, this.runButtonContainer));\n\n\t\tif (this.notebookEditor.hasModel()) {\n\t\t\tconst context: INotebookCellActionContext & { $mid: number } = {\n\t\t\t\tui: true,\n\t\t\t\tcell: element,\n\t\t\t\tnotebookEditor: this.notebookEditor,\n\t\t\t\t$mid: MarshalledId.NotebookCellActionContext\n\t\t\t};\n\t\t\tthis.toolbar.context = context;\n\t\t}\n\t}\n\n\tgetCellToolbarActions(menu: IMenu): { primary: IAction[]; secondary: IAction[] } {\n\t\treturn getActionBarActions(menu.getActions({ shouldForwardArgs: true }), g => /^inline/.test(g));\n\t}\n\n\tprivate createRunCellToolbar(container: HTMLElement, cellContainer: HTMLElement, contextKeyService: IContextKeyService) {\n\t\tconst actionViewItemDisposables = this._register(new DisposableStore());\n\t\tconst dropdownAction = this._register(new Action('notebook.moreRunActions', localize('notebook.moreRunActionsLabel', \"More...\"), 'codicon-chevron-down', true));\n\n\t\tconst keybindingProvider = (action: IAction) => this.keybindingService.lookupKeybinding(action.id, executionContextKeyService);\n\t\tconst executionContextKeyService = this._register(getCodeCellExecutionContextKeyService(contextKeyService));\n\t\tthis.toolbar = this._register(new ToolBar(container, this.contextMenuService, {\n\t\t\tgetKeyBinding: keybindingProvider,\n\t\t\tactionViewItemProvider: (_action, _options) => {\n\t\t\t\tactionViewItemDisposables.clear();\n\n\t\t\t\tconst primary = this.getCellToolbarActions(this.primaryMenu).primary[0];\n\t\t\t\tif (!(primary instanceof MenuItemAction)) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tconst secondary = this.getCellToolbarActions(this.secondaryMenu).secondary;\n\t\t\t\tif (!secondary.length) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tconst item = this.instantiationService.createInstance(DropdownWithPrimaryActionViewItem,\n\t\t\t\t\tprimary,\n\t\t\t\t\tdropdownAction,\n\t\t\t\t\tsecondary,\n\t\t\t\t\t'notebook-cell-run-toolbar',\n\t\t\t\t\t{\n\t\t\t\t\t\t..._options,\n\t\t\t\t\t\tgetKeyBinding: keybindingProvider\n\t\t\t\t\t});\n\t\t\t\tactionViewItemDisposables.add(item.onDidChangeDropdownVisibility(visible => {\n\t\t\t\t\tcellContainer.classList.toggle('cell-run-toolbar-dropdown-active', visible);\n\t\t\t\t}));\n\n\t\t\t\treturn item;\n\t\t\t},\n\t\t\trenderDropdownAsChildElement: true\n\t\t}));\n\t}\n}\n\nexport function getCodeCellExecutionContextKeyService(contextKeyService: IContextKeyService): IScopedContextKeyService {\n\t// Create a fake ContextKeyService, and look up the keybindings within this context.\n\tconst executionContextKeyService = contextKeyService.createScoped(document.createElement('div'));\n\tInputFocusedContext.bindTo(executionContextKeyService).set(true);\n\tEditorContextKeys.editorTextFocus.bindTo(executionContextKeyService).set(true);\n\tEditorContextKeys.focus.bindTo(executionContextKeyService).set(true);\n\tEditorContextKeys.textInputFocus.bindTo(executionContextKeyService).set(true);\n\tNOTEBOOK_CELL_EXECUTION_STATE.bindTo(executionContextKeyService).set('idle');\n\tNOTEBOOK_CELL_LIST_FOCUSED.bindTo(executionContextKeyService).set(true);\n\tNOTEBOOK_EDITOR_FOCUSED.bindTo(executionContextKeyService).set(true);\n\tNOTEBOOK_CELL_TYPE.bindTo(executionContextKeyService).set('code');\n\n\treturn executionContextKeyService;\n}\n"]}