{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/notebookVariables/notebookVariables.ts"],"names":[],"mappings":"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","file":"notebookVariables.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport * as nls from '../../../../../../nls.js';\nimport { IConfigurationChangeEvent, IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { SyncDescriptor } from '../../../../../../platform/instantiation/common/descriptors.js';\nimport { Registry } from '../../../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution } from '../../../../../common/contributions.js';\nimport { Extensions, IViewDescriptorService, IViewsRegistry } from '../../../../../common/views.js';\nimport { VIEWLET_ID as debugContainerId } from '../../../../debug/common/debug.js';\nimport { NOTEBOOK_VARIABLE_VIEW_ENABLED } from './notebookVariableContextKeys.js';\nimport { NotebookVariablesView } from './notebookVariablesView.js';\nimport { getNotebookEditorFromEditorPane } from '../../notebookBrowser.js';\nimport { variablesViewIcon } from '../../notebookIcons.js';\nimport { NotebookSetting } from '../../../common/notebookCommon.js';\nimport { INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { INotebookKernelService } from '../../../common/notebookKernelService.js';\nimport { INotebookService } from '../../../common/notebookService.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\n\nexport class NotebookVariables extends Disposable implements IWorkbenchContribution {\n\tprivate listeners: IDisposable[] = [];\n\tprivate configListener: IDisposable;\n\tprivate initialized = false;\n\n\tprivate viewEnabled: IContextKey<boolean>;\n\n\tconstructor(\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@INotebookExecutionStateService private readonly notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@INotebookKernelService private readonly notebookKernelService: INotebookKernelService,\n\t\t@INotebookService private readonly notebookDocumentService: INotebookService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService\n\t) {\n\t\tsuper();\n\n\t\tthis.viewEnabled = NOTEBOOK_VARIABLE_VIEW_ENABLED.bindTo(contextKeyService);\n\n\t\tthis.listeners.push(this.editorService.onDidActiveEditorChange(() => this.handleInitEvent()));\n\t\tthis.listeners.push(this.notebookExecutionStateService.onDidChangeExecution((e) => this.handleInitEvent(e.notebook)));\n\n\t\tthis.configListener = configurationService.onDidChangeConfiguration((e) => this.handleConfigChange(e));\n\t}\n\n\tprivate handleConfigChange(e: IConfigurationChangeEvent) {\n\t\tif (e.affectsConfiguration(NotebookSetting.notebookVariablesView)) {\n\t\t\tthis.handleInitEvent();\n\t\t}\n\t}\n\n\tprivate handleInitEvent(notebook?: URI) {\n\t\tconst enabled =\n\t\t\tthis.editorService.activeEditorPane?.getId() === 'workbench.editor.repl' ||\n\t\t\tthis.configurationService.getValue(NotebookSetting.notebookVariablesView) ||\n\t\t\t// old setting key\n\t\t\tthis.configurationService.getValue('notebook.experimental.variablesView');\n\t\tif (enabled && (!!notebook || this.editorService.activeEditorPane?.getId() === 'workbench.editor.notebook')) {\n\t\t\tif (this.hasVariableProvider(notebook) && !this.initialized && this.initializeView()) {\n\t\t\t\tthis.viewEnabled.set(true);\n\t\t\t\tthis.initialized = true;\n\t\t\t\tthis.listeners.forEach(listener => listener.dispose());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate hasVariableProvider(notebookUri?: URI) {\n\t\tconst notebook = notebookUri ?\n\t\t\tthis.notebookDocumentService.getNotebookTextModel(notebookUri) :\n\t\t\tgetNotebookEditorFromEditorPane(this.editorService.activeEditorPane)?.getViewModel()?.notebookDocument;\n\t\treturn notebook && this.notebookKernelService.getMatchingKernel(notebook).selected?.hasVariableProvider;\n\t}\n\n\tprivate initializeView() {\n\t\tconst debugViewContainer = this.viewDescriptorService.getViewContainerById(debugContainerId);\n\n\t\tif (debugViewContainer) {\n\t\t\tconst viewsRegistry = Registry.as<IViewsRegistry>(Extensions.ViewsRegistry);\n\t\t\tconst viewDescriptor = {\n\t\t\t\tid: 'workbench.notebook.variables', name: nls.localize2('notebookVariables', \"Notebook Variables\"),\n\t\t\t\tcontainerIcon: variablesViewIcon, ctorDescriptor: new SyncDescriptor(NotebookVariablesView),\n\t\t\t\torder: 50, weight: 5, canToggleVisibility: true, canMoveView: true, collapsed: false, when: NOTEBOOK_VARIABLE_VIEW_ENABLED\n\t\t\t};\n\n\t\t\tviewsRegistry.registerViews([viewDescriptor], debugViewContainer);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.listeners.forEach(listener => listener.dispose());\n\t\tthis.configListener.dispose();\n\t}\n\n}\n"]}