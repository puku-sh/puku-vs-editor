{"version":3,"sources":["vs/workbench/contrib/notebook/browser/contrib/find/notebookFind.ts"],"names":[],"mappings":"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","file":"notebookFind.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/notebookFind.css';\nimport { KeyCode, KeyMod } from '../../../../../../base/common/keyCodes.js';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport { isEqual } from '../../../../../../base/common/resources.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { ICodeEditor } from '../../../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../../../editor/browser/services/codeEditorService.js';\nimport { EditorOption } from '../../../../../../editor/common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../../../../editor/common/editorContextKeys.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { FindStartFocusAction, getSelectionSearchString, IFindStartOptions, NextMatchFindAction, PreviousMatchFindAction, StartFindAction, StartFindReplaceAction } from '../../../../../../editor/contrib/find/browser/findController.js';\nimport { localize2 } from '../../../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../../../platform/actions/common/actions.js';\n\nimport { ContextKeyExpr } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IShowNotebookFindWidgetOptions, NotebookFindContrib } from './notebookFindWidget.js';\nimport { INotebookCommandContext, NotebookMultiCellAction } from '../../controller/coreActions.js';\nimport { getNotebookEditorFromEditorPane, INotebookEditor } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\nimport { CellUri, NotebookFindScopeType } from '../../../common/notebookCommon.js';\nimport { INTERACTIVE_WINDOW_IS_ACTIVE_EDITOR, NOTEBOOK_EDITOR_FOCUSED, NOTEBOOK_IS_ACTIVE_EDITOR } from '../../../common/notebookContextKeys.js';\nimport { IEditorService } from '../../../../../services/editor/common/editorService.js';\nimport { CONTEXT_FIND_WIDGET_VISIBLE } from '../../../../../../editor/contrib/find/browser/findModel.js';\n\nregisterNotebookContribution(NotebookFindContrib.id, NotebookFindContrib);\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.hideFind',\n\t\t\ttitle: localize2('notebookActions.hideFind', 'Hide Find in Notebook'),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE),\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\tweight: KeybindingWeight.EditorContrib + 5\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst controller = editor.getContribution<NotebookFindContrib>(NotebookFindContrib.id);\n\t\tcontroller.hide();\n\t\teditor.focus();\n\t}\n});\n\nregisterAction2(class extends NotebookMultiCellAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.find',\n\t\t\ttitle: localize2('notebookActions.findInNotebook', 'Find in Notebook'),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, ContextKeyExpr.or(NOTEBOOK_IS_ACTIVE_EDITOR, INTERACTIVE_WINDOW_IS_ACTIVE_EDITOR), EditorContextKeys.focus.toNegated()),\n\t\t\t\tprimary: KeyCode.KeyF | KeyMod.CtrlCmd,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCommandContext): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst controller = editor.getContribution<NotebookFindContrib>(NotebookFindContrib.id);\n\t\tcontroller.show(undefined, { findScope: { findScopeType: NotebookFindScopeType.None } });\n\t}\n});\n\nfunction notebookContainsTextModel(uri: URI, textModel: ITextModel) {\n\tif (textModel.uri.scheme === Schemas.vscodeNotebookCell) {\n\t\tconst cellUri = CellUri.parse(textModel.uri);\n\t\tif (cellUri && isEqual(cellUri.notebook, uri)) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction getSearchStringOptions(editor: ICodeEditor, opts: IFindStartOptions) {\n\t// Get the search string result, following the same logic in _start function in 'vs/editor/contrib/find/browser/findController'\n\tif (opts.seedSearchStringFromSelection === 'single') {\n\t\tconst selectionSearchString = getSelectionSearchString(editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n\t\tif (selectionSearchString) {\n\t\t\treturn {\n\t\t\t\tsearchString: selectionSearchString,\n\t\t\t\tselection: editor.getSelection()\n\t\t\t};\n\t\t}\n\t} else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n\t\tconst selectionSearchString = getSelectionSearchString(editor, opts.seedSearchStringFromSelection);\n\t\tif (selectionSearchString) {\n\t\t\treturn {\n\t\t\t\tsearchString: selectionSearchString,\n\t\t\t\tselection: editor.getSelection()\n\t\t\t};\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\nfunction isNotebookEditorValidForSearch(accessor: ServicesAccessor, editor: INotebookEditor | undefined, codeEditor: ICodeEditor) {\n\tif (!editor) {\n\t\treturn false;\n\t}\n\n\tif (!codeEditor.hasModel()) {\n\t\treturn false;\n\t}\n\n\tif (!editor.hasEditorFocus() && !editor.hasWebviewFocus()) {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\t// check if the active pane contains the active text editor\n\t\tconst textEditor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n\t\tif (editor.hasModel() && textEditor && textEditor.hasModel() && notebookContainsTextModel(editor.textModel.uri, textEditor.getModel())) {\n\t\t\t// the active text editor is in notebook editor\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction openFindWidget(controller: NotebookFindContrib | undefined, editor: INotebookEditor | undefined, codeEditor: ICodeEditor | undefined, focusWidget: boolean = true) {\n\tif (!editor || !codeEditor || !controller) {\n\t\treturn false;\n\t}\n\n\tif (!codeEditor.hasModel()) {\n\t\treturn false;\n\t}\n\n\tconst searchStringOptions = getSearchStringOptions(codeEditor, {\n\t\tforceRevealReplace: false,\n\t\tseedSearchStringFromSelection: codeEditor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n\t\tseedSearchStringFromNonEmptySelection: codeEditor.getOption(EditorOption.find).seedSearchStringFromSelection === 'selection',\n\t\tseedSearchStringFromGlobalClipboard: codeEditor.getOption(EditorOption.find).globalFindClipboard,\n\t\tshouldFocus: FindStartFocusAction.FocusFindInput,\n\t\tshouldAnimate: true,\n\t\tupdateSearchScope: false,\n\t\tloop: codeEditor.getOption(EditorOption.find).loop\n\t});\n\n\tlet options: IShowNotebookFindWidgetOptions | undefined = undefined;\n\tconst uri = codeEditor.getModel().uri;\n\tconst data = CellUri.parse(uri);\n\tif (searchStringOptions?.selection && data) {\n\t\tconst cell = editor.getCellByHandle(data.handle);\n\t\tif (cell) {\n\t\t\toptions = {\n\t\t\t\tsearchStringSeededFrom: { cell, range: searchStringOptions.selection },\n\t\t\t\tfocus: focusWidget\n\t\t\t};\n\t\t}\n\t} else {\n\t\toptions = { focus: focusWidget };\n\t}\n\n\tcontroller.show(searchStringOptions?.searchString, options);\n\treturn true;\n}\n\nfunction findWidgetAction(accessor: ServicesAccessor, codeEditor: ICodeEditor, next: boolean): boolean {\n\tconst editorService = accessor.get(IEditorService);\n\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\n\tif (!isNotebookEditorValidForSearch(accessor, editor, codeEditor)) {\n\t\treturn false;\n\t}\n\n\tconst controller = editor?.getContribution<NotebookFindContrib>(NotebookFindContrib.id);\n\tif (!controller) {\n\t\treturn false;\n\t}\n\n\t// Check if find widget is already visible\n\tif (controller.isVisible()) {\n\t\t// Find widget is open, navigate\n\t\tnext ? controller.findNext() : controller.findPrevious();\n\t\treturn true;\n\t} else {\n\t\t// Find widget is not open, open it without focusing the widget (keep focus in editor)\n\t\treturn openFindWidget(controller, editor, codeEditor, false);\n\t}\n}\n\nasync function runFind(accessor: ServicesAccessor, next: boolean): Promise<void> {\n\tconst editorService = accessor.get(IEditorService);\n\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\n\tif (!editor) {\n\t\treturn;\n\t}\n\n\tconst controller = editor.getContribution<NotebookFindContrib>(NotebookFindContrib.id);\n\tif (controller && controller.isVisible()) {\n\t\tnext ? controller.findNext() : controller.findPrevious();\n\t}\n}\n\nStartFindAction.addImplementation(100, (accessor: ServicesAccessor, codeEditor: ICodeEditor, args: any) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\n\tif (!isNotebookEditorValidForSearch(accessor, editor, codeEditor)) {\n\t\treturn false;\n\t}\n\n\tconst controller = editor?.getContribution<NotebookFindContrib>(NotebookFindContrib.id);\n\treturn openFindWidget(controller, editor, codeEditor, true);\n});\n\nStartFindReplaceAction.addImplementation(100, (accessor: ServicesAccessor, codeEditor: ICodeEditor, args: any) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\n\tif (!editor) {\n\t\treturn false;\n\t}\n\n\tif (!codeEditor.hasModel()) {\n\t\treturn false;\n\t}\n\n\tconst controller = editor.getContribution<NotebookFindContrib>(NotebookFindContrib.id);\n\n\tconst searchStringOptions = getSearchStringOptions(codeEditor, {\n\t\tforceRevealReplace: false,\n\t\tseedSearchStringFromSelection: codeEditor.getOption(EditorOption.find).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n\t\tseedSearchStringFromNonEmptySelection: codeEditor.getOption(EditorOption.find).seedSearchStringFromSelection === 'selection',\n\t\tseedSearchStringFromGlobalClipboard: codeEditor.getOption(EditorOption.find).globalFindClipboard,\n\t\tshouldFocus: FindStartFocusAction.FocusFindInput,\n\t\tshouldAnimate: true,\n\t\tupdateSearchScope: false,\n\t\tloop: codeEditor.getOption(EditorOption.find).loop\n\t});\n\n\tif (controller) {\n\t\tcontroller.replace(searchStringOptions?.searchString);\n\t\treturn true;\n\t}\n\n\treturn false;\n});\n\nNextMatchFindAction.addImplementation(100, (accessor: ServicesAccessor, codeEditor: ICodeEditor, args: any) => {\n\treturn findWidgetAction(accessor, codeEditor, true);\n});\n\nPreviousMatchFindAction.addImplementation(100, (accessor: ServicesAccessor, codeEditor: ICodeEditor, args: any) => {\n\treturn findWidgetAction(accessor, codeEditor, false);\n});\n\n// Widget-focused keybindings - these handle F3/Shift+F3 when the notebook find widget has focus\n// This follows the same pattern as the text editor which has separate keybindings for widget focus\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.findNext.fromWidget',\n\t\t\ttitle: localize2('notebook.findNext.fromWidget', 'Find Next'),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\tCONTEXT_FIND_WIDGET_VISIBLE\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.F3,\n\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyCode.KeyG, secondary: [KeyCode.F3] },\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 1\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\treturn runFind(accessor, true);\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.findPrevious.fromWidget',\n\t\t\ttitle: localize2('notebook.findPrevious.fromWidget', 'Find Previous'),\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\tCONTEXT_FIND_WIDGET_VISIBLE\n\t\t\t\t),\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F3,\n\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyG, secondary: [KeyMod.Shift | KeyCode.F3] },\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 1\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\treturn runFind(accessor, false);\n\t}\n});\n\n"]}