{"version":3,"sources":["vs/workbench/contrib/notebook/browser/view/cellParts/cellOutput.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,uCAAuC,CAAC;AAE7D,OAAO,EAAE,cAAc,EAAE,MAAM,oDAAoD,CAAC;AACpF,OAAO,EAAE,MAAM,EAAE,MAAM,0CAA0C,CAAC;AAElE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,4CAA4C,CAAC;AAEzF,OAAO,KAAK,GAAG,MAAM,0BAA0B,CAAC;AAChD,OAAO,EAAE,mBAAmB,EAAE,MAAM,uEAAuE,CAAC;AAC5G,OAAO,EAAE,gBAAgB,EAAE,MAAM,uDAAuD,CAAC;AACzF,OAAO,EAAE,YAAY,EAAE,MAAM,EAAE,MAAM,sDAAsD,CAAC;AAC5F,OAAO,EAAE,kBAAkB,EAAE,MAAM,4DAA4D,CAAC;AAChG,OAAO,EAAE,qBAAqB,EAAE,MAAM,kEAAkE,CAAC;AACzG,OAAO,EAAE,cAAc,EAAE,MAAM,oDAAoD,CAAC;AACpF,OAAO,EAAE,kBAAkB,EAAkB,MAAM,4DAA4D,CAAC;AAChH,OAAO,EAAE,SAAS,EAAE,MAAM,4CAA4C,CAAC;AACvE,OAAO,EAAE,2BAA2B,EAAE,MAAM,6CAA6C,CAAC;AAC1F,OAAO,EAAqF,oBAAoB,EAAoB,MAAM,0BAA0B,CAAC;AACrK,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AAIjD,OAAO,EAAE,OAAO,EAAoB,0BAA0B,EAA6B,sBAAsB,EAAE,MAAM,mCAAmC,CAAC;AAC7J,OAAO,EAAE,gBAAgB,EAAE,MAAM,uCAAuC,CAAC;AACzE,OAAO,EAAE,8BAA8B,EAAE,MAAM,kDAAkD,CAAC;AAElG,OAAO,EAAE,gBAAgB,EAAE,MAAM,oCAAoC,CAAC;AACtE,OAAO,EAAE,sBAAsB,EAAE,MAAM,uCAAuC,CAAC;AAC/E,OAAO,EAAE,OAAO,EAAE,eAAe,EAAE,MAAM,6CAA6C,CAAC;AACvF,OAAO,EAAE,gCAAgC,EAAE,6BAA6B,EAAE,6BAA6B,EAAE,MAAM,wCAAwC,CAAC;AACxJ,OAAO,EAAE,oBAAoB,EAAE,MAAM,yCAAyC,CAAC;AAU/E,gBAAgB;AAChB,EAAE;AACF,WAAW;AACX,KAAK;AACL,8BAA8B;AAC9B,oDAAoD;AACpD,+CAA+C;AAC/C,+CAA+C;AAC/C,+CAA+C;AAC/C,8BAA8B;AAC9B,oDAAoD;AACpD,+CAA+C;AAC/C,8BAA8B;AAC9B,oDAAoD;AACpD,+CAA+C;AAC/C,IAAM,iBAAiB,GAAvB,MAAM,iBAAkB,SAAQ,UAAU;IAUzC,YACS,cAAuC,EACvC,QAA2B,EAC3B,mBAAwC,EACxC,eAAyC,EACxC,MAA4B,EACnB,eAAkD,EAChD,iBAAsD,EACtD,uBAA2C,EACjD,WAA0C,EAC3B,0BAAwE,EAC9E,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QAZA,mBAAc,GAAd,cAAc,CAAyB;QACvC,aAAQ,GAAR,QAAQ,CAAmB;QAC3B,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,oBAAe,GAAf,eAAe,CAA0B;QACxC,WAAM,GAAN,MAAM,CAAsB;QACF,oBAAe,GAAf,eAAe,CAAkB;QAC/B,sBAAiB,GAAjB,iBAAiB,CAAoB;QAE3C,gBAAW,GAAX,WAAW,CAAc;QACV,+BAA0B,GAA1B,0BAA0B,CAA6B;QAC7D,yBAAoB,GAApB,oBAAoB,CAAuB;QApBnE,uBAAkB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,eAAe,EAAE,CAAC,CAAC;QAOpE,oBAAe,GAAG,KAAK,CAAC;QAsXxB,uBAAkB,GAAmB,IAAI,CAAC;QArWjD,IAAI,CAAC,iBAAiB,GAAG,uBAAuB,CAAC;QAEjD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,EAAE;YACrD,IAAI,CAAC,QAAQ,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAClD,IAAI,CAAC,QAAQ,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,MAAM;QACL,IAAI,CAAC,uBAAuB,EAAE,MAAM,EAAE,CAAC;QAEvC,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBAChE,IAAK,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAiB,CAAC,SAAS,KAAK,iBAAiB,EAAE,CAAC;oBACxF,KAAK,EAAE,CAAC;gBACT,CAAC;gBAED,IAAI,KAAK,GAAG,CAAC,EAAE,CAAC;oBACf,MAAM;gBACP,CAAC;YACF,CAAC;YAED,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC;gBACjB,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;YAC9B,CAAC;QACF,CAAC;QAED,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC9C,CAAC;IAED,YAAY,CAAC,GAAW;QACvB,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACzB,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;QAC5C,CAAC;IACF,CAAC;IAED,QAAQ;QACP,IACC,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE;YAC9B,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,YAAY;YACjB,IAAI,CAAC,YAAY,CAAC,IAAI,uCAA+B,EACpD,CAAC;YACF,sDAAsD;YACtD,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;YACzI,MAAM,cAAc,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YACvC,IAAI,cAAc,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,CAAC,QAAQ,IAAI,cAAc,CAAC,UAAU,KAAK,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC;gBAC3H,sEAAsE;gBACtE,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBACnE,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;gBACzG,OAAO;YACR,CAAC;QACF,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;YAC1B,+BAA+B;YAC/B,MAAM,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC;YAClH,MAAM,eAAe,GAAG,eAAe,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,aAAa,CAAC;gBAC3J,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,qBAAqB,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc;gBAC5F,CAAC,CAAC,SAAS,CAAC;YACb,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAC9B,CAAC;aAAM,CAAC;YACP,4FAA4F;YAC5F,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC;YAC3D,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;YAChC,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC;YACpC,IAAI,OAAO,EAAE,CAAC;gBACb,OAAO,CAAC,MAAM,EAAE,CAAC;gBACjB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC9C,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,WAA0B,CAAC,CAAC;QACzC,CAAC;QAED,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IAED,+BAA+B;IACvB,6BAA6B,CAAC,eAAwC,EAAE,sBAAwC;QACvH,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC,yBAAyB,CAAC,CAAC;QAEvD,IAAI,eAAe,IAAI,eAAe,CAAC,kBAAkB,EAAE,CAAC;YAC3D,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,EAAE,eAAe,CAAC,kBAAkB,CAAC,CAAC;QACpG,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC/D,CAAC;QAED,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,kBAAkB,EAAE,sBAAsB,CAAC,QAAQ,CAAC,CAAC;QACtF,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAED,MAAM,CAAC,eAAwC;QAC9C,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEnE,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC;YACxE,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC;YACvC,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,MAAM,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC;QAC/D,IAAI,CAAC,WAAW,EAAE,CAAC;YAClB,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,MAAM,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;QAExD,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;QAC7H,MAAM,eAAe,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QACxC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC/E,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC,EAAE,8BAA8B,CAAC,CAAC;YAC3E,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,MAAM,oBAAoB,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAC7C,IAAI,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;QACrF,IAAI,CAAC,QAAQ,IAAI,oBAAoB,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;YACtE,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,yBAAyB,CAAC,CAAC;QAC5E,CAAC;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,6BAA6B,CAAC,eAAe,EAAE,oBAAoB,CAAC,CAAC;QACjG,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;YAC9C,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,iBAAiB,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,KAAK,EAAE,eAAe,EAAE,SAAS,CAAC,CAAC;QAC7H,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,EAAE;gBACjC,MAAM,OAAO,GAAG,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAC3D,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;oBACtC,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,iBAAiB,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,KAAK,EAAE,eAAe,EAAE,SAAS,CAAC,CAAC;gBAC7H,CAAC;qBAAM,IAAI,CAAC,OAAO,EAAE,CAAC;oBACrB,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;gBACjC,CAAC;gBACD,IAAI,CAAC,mBAAmB,CAAC,qBAAqB,EAAE,CAAC;YAClD,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAChE,CAAC;QAED,IAAI,CAAC,uBAAuB,GAAG,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;QAGrF,IAAI,CAAC,YAAY,GAAG,QAAQ;YAC3B,CAAC,CAAC,EAAE,IAAI,oCAA4B,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,oBAAoB,CAAC,QAAQ,EAAE;YAC9G,CAAC,CAAC,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,MAAM,EAAE,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QAE3E,IAAI,CAAC,MAAM,CAAC,cAAc,GAAG,oBAAoB,CAAC;QAElD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACxB,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC,EAAE,yCAAyC,CAAC,CAAC;YACtF,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;QAChH,cAAc,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAE3C,OAAO,EAAE,uBAAuB,EAAE,KAAK,EAAE,CAAC;IAC3C,CAAC;IAEO,sBAAsB,CAAC,SAA+B,EAAE,iBAAqC;QACpG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;YACrC,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAO,EAAE,IAAoB,CAAC,CAAC,CAAC;QACpF,CAAC;QAED,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACxB,MAAM,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;YAC7D,MAAM,gBAAgB,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC9C,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAc,EAAE,IAA4E,EAAE,gBAAgB,CAAC,CAAC,CAAC;QACrK,CAAC;QAED,OAAO,IAAI,CAAC,wBAAwB,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;IACpE,CAAC;IAEO,wBAAwB,CAAC,SAA+B,EAAE,QAAgB;QACjF,MAAM,KAAK,GAAG,yBAAyB,QAAQ,EAAE,CAAC;QAElD,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,4CAA4C,QAAQ,mDAAmD,CAAC,CAAC;QACzI,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,0CAA0C,KAAK,KAAK,EAAE,KAAK,EAAE,kCAAkC,EAAE,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,uHAAuH,EAAE,EAAE,oBAAoB,CAAC,CAAC;QAEnT,OAAO;YACN,IAAI,+BAAuB;YAC3B,MAAM,EAAE,SAAS;YACjB,WAAW,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS;SACtC,CAAC;IACH,CAAC;IAEO,cAAc,CAAC,SAA+B,EAAE,OAAe;QACtE,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAC1C,OAAO,EAAE,IAAI,+BAAuB,EAAE,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,EAAE,CAAC,SAAS,EAAE,CAAC;IACtF,CAAC;IAEO,gBAAgB,CAAC,SAAsC;QAC9D,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,oBAAoB,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC;YAC5H,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;YAC7C,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAA+B,CAAC;YAClE,MAAM,KAAK,GAAG,aAAa,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACnE,IAAI,KAAK,GAAG,CAAC,EAAE,CAAC;gBACf,MAAM,cAAc,GAAG,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBAC9D,4FAA4F;gBAC5F,OAAO,CAAC,gBAAgB,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YAC1D,CAAC;QACF,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAEO,KAAK,CAAC,cAAc,CAAC,aAA0B,EAAE,iBAAoC,EAAE,MAAmC,EAAE,KAAa,EAAE,eAAiC,EAAE,SAAsC;QAC3N,MAAM,oBAAoB,GAAG,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;QACzF,MAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;QACvD,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,oBAAoB,IAAI,CAAC,aAAa,EAAE,CAAC;YAC1D,gCAAgC;YAChC,OAAO;QACR,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,CAAC;YACrC,OAAO;QACR,CAAC;QAED,aAAa,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QAC1C,MAAM,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC;QAErD,aAAa,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;QAE1C,MAAM,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,gBAAgB,EAAE,cAAc,EAAE;YACtH,4BAA4B,EAAE,KAAK;SACnC,CAAC,CAAC,CAAC;QACJ,OAAO,CAAC,OAAO,GAAG;YACjB,EAAE,EAAE,IAAI;YACR,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,aAA+B;YACjD,eAAe,EAAE,IAAI,CAAC,MAAM;YAC5B,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,IAAI,iDAAwC;SAC5C,CAAC;QAEF,mGAAmG;QACnG,MAAM,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,8BAA8B,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAc,EAAE,IAAqB,CAAC,EAAE,SAAS,CAAC,WAAW,CAAC,YAAY,CAAC,EAAE,SAAS,EAC5L,KAAK,EAAC,QAAQ,EAAC,EAAE,CAAC,IAAI,CAAC,2BAA2B,CAAC,aAAa,EAAE,iBAAiB,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAE7G,MAAM,qBAAqB,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;QAC9G,MAAM,gBAAgB,GAAG,gCAAgC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACxF,MAAM,iBAAiB,GAAG,6BAA6B,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACtF,MAAM,kBAAkB,GAAG,6BAA6B,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACvF,iBAAiB,CAAC,GAAG,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;QACnC,kBAAkB,CAAC,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QACjD,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1H,MAAM,IAAI,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC,qBAAqB,EAAE,qBAAqB,CAAC,CAAC,CAAC;QAE3H,MAAM,iBAAiB,GAAG,GAAG,EAAE;YAC9B,IAAI,EAAE,SAAS,EAAE,GAAG,mBAAmB,CAAC,IAAK,CAAC,UAAU,CAAC,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC;YACpG,IAAI,CAAC,aAAa,EAAE,CAAC;gBACpB,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,KAAK,sBAAsB,CAAC,CAAC;YAChF,CAAC;YACD,IAAI,oBAAoB,EAAE,CAAC;gBAC1B,SAAS,GAAG,CAAC,UAAU,EAAE,GAAG,SAAS,CAAC,CAAC;YACxC,CAAC;YAED,OAAO,CAAC,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;QACnC,CAAC,CAAC;QACF,iBAAiB,EAAE,CAAC;QACpB,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAClE,CAAC;IAEO,KAAK,CAAC,2BAA2B,CAAC,aAA0B,EAAE,iBAAoC,EAAE,MAAmC,EAAE,SAA+B;QAC/K,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,GAAG,SAAS,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,MAAM,EAAE,eAAe,CAAC,CAAC;QAEtG,MAAM,KAAK,GAAwB,EAAE,CAAC;QACtC,MAAM,gBAAgB,GAAwB,EAAE,CAAC;QACjD,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;YACrC,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;gBACxB,MAAM,GAAG,GAAG,QAAQ,CAAC,UAAU,KAAK,sBAAsB,CAAC,CAAC;oBAC3D,gBAAgB,CAAC,CAAC;oBAClB,KAAK,CAAC;gBACP,GAAG,CAAC,IAAI,CAAC;oBACR,KAAK,EAAE,QAAQ,CAAC,QAAQ;oBACxB,EAAE,EAAE,QAAQ,CAAC,QAAQ;oBACrB,KAAK,EAAE,KAAK;oBACZ,MAAM,EAAE,KAAK,KAAK,SAAS;oBAC3B,MAAM,EAAE,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,UAAU,CAAC;oBACvD,WAAW,EAAE,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAwB,EAAE,IAAkB,CAAC,CAAC,CAAC,CAAC,SAAS;iBACzG,CAAC,CAAC;YACJ,CAAC;QACF,CAAC,CAAC,CAAC;QAEH,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC,EAAE,CAAC;YAC5E,gBAAgB,CAAC,IAAI,CAAC;gBACrB,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAsB,EAAE,IAAmD,CAAC;gBAChG,EAAE,EAAE,kBAAkB;gBACtB,KAAK,EAAE,SAAS,CAAC,MAAM;aACvB,CAAC,CAAC;QACJ,CAAC;QAED,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAChG,MAAM,CAAC,KAAK,GAAG;YACd,GAAG,KAAK;YACR,EAAE,IAAI,EAAE,WAAW,EAAE;YACrB,GAAG,gBAAgB;SACnB,CAAC;QACF,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACzD,MAAM,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM;YACrD,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,KAA0C,EAAE,IAA8C,CAAC;YAC1G,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAkC,EAAE,IAA8C,CAAC,CAAC;QAEpG,MAAM,IAAI,GAAG,MAAM,IAAI,OAAO,CAAgC,OAAO,CAAC,EAAE;YACvE,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;gBACvC,OAAO,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAE,MAAM,CAAC,aAAa,CAAC,CAAC,CAAuB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBACxG,WAAW,CAAC,OAAO,EAAE,CAAC;YACvB,CAAC,CAAC,CAAC,CAAC;YACJ,MAAM,CAAC,IAAI,EAAE,CAAC;QACf,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE,CAAC;YACpD,OAAO;QACR,CAAC;QAED,IAAI,IAAI,CAAC,EAAE,KAAK,kBAAkB,EAAE,CAAC;YACpC,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,OAAO;QACR,CAAC;QAED,gCAAgC;QAChC,MAAM,WAAW,GAAG,aAAa,CAAC,kBAAkB,CAAC;QACrD,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;QAChC,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC;QACpC,IAAI,OAAO,EAAE,CAAC;YACb,OAAO,CAAC,MAAM,EAAE,CAAC;YACjB,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QAC5C,CAAC;QAED,SAAS,CAAC,cAAc,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;QAEhF,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvD,IAAI,CAAC,eAAe,CAAC,2BAA2B,CAAC,iBAAiB,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACnI,IAAI,CAAC,MAAM,CAAC,WAA0B,CAAC,CAAC;QACxC,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IAEO,KAAK,CAAC,qBAAqB;QAClC,MAAM,IAAI,CAAC,0BAA0B,CAAC,UAAU,CAAC,OAAO,oBAAoB,EAAE,CAAC,CAAC;IACjF,CAAC;IAEO,qBAAqB,CAAC,QAAgB;QAC7C,MAAM,UAAU,GAAG,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QAElE,IAAI,UAAU,EAAE,CAAC;YAChB,MAAM,WAAW,GAAG,UAAU,CAAC,WAAW,KAAK,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,CAAC;YAC3F,OAAO,GAAG,WAAW,KAAK,UAAU,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC;QAC3D,CAAC;QAED,OAAO,GAAG,CAAC,QAAQ,CAAC,KAAuB,EAAE,IAAwB,CAAC,CAAC;IACxE,CAAC;IAIO,0BAA0B,CAAC,WAAoB;QACtD,IAAI,IAAI,CAAC,kBAAkB,KAAK,IAAI,EAAE,CAAC;YACtC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACvC,CAAC;QAED,IAAI,WAAW,EAAE,CAAC;YACjB,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;QACpC,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC,GAAG,EAAE;gBACzC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;YACpC,CAAC,EAAE,IAAI,CAAC,CAAC;QACV,CAAC;IACF,CAAC;IAEO,aAAa;QACpB,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;IAC7F,CAAC;IAEQ,OAAO;QACf,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC7B,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;YACnC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACvC,CAAC;QAED,KAAK,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;CACD,CAAA;AA1ZK,iBAAiB;IAgBpB,WAAA,gBAAgB,CAAA;IAChB,WAAA,kBAAkB,CAAA;IAClB,WAAA,kBAAkB,CAAA;IAClB,WAAA,YAAY,CAAA;IACZ,WAAA,2BAA2B,CAAA;IAC3B,YAAA,qBAAqB,CAAA;GArBlB,iBAAiB,CA0ZtB;AAED,MAAM,sBAAsB;IAC3B,YACU,KAA2B,EAC3B,OAA0B;QAD1B,UAAK,GAAL,KAAK,CAAsB;QAC3B,YAAO,GAAP,OAAO,CAAmB;IAGpC,CAAC;CACD;AAED,IAAW,uBAGV;AAHD,WAAW,uBAAuB;IACjC,+EAAa,CAAA;IACb,uEAAS,CAAA;AACV,CAAC,EAHU,uBAAuB,KAAvB,uBAAuB,QAGjC;AAEM,IAAM,mBAAmB,GAAzB,MAAM,mBAAoB,SAAQ,eAAe;IAKvD,qBAAqB;QACpB,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAC/E,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAC5C,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAC7C,CAAC;IACF,CAAC;IAED,IAAI,qBAAqB;QACxB,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAED,YACS,cAAuC,EACvC,QAA2B,EAClB,YAAoC,EAC7C,OAA0B,EAClB,aAA8C,EAC9B,8BAA+E,EACxF,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QARA,mBAAc,GAAd,cAAc,CAAyB;QACvC,aAAQ,GAAR,QAAQ,CAAmB;QAClB,iBAAY,GAAZ,YAAY,CAAwB;QAC7C,YAAO,GAAP,OAAO,CAAmB;QACD,kBAAa,GAAb,aAAa,CAAgB;QACb,mCAA8B,GAA9B,8BAA8B,CAAgC;QACvE,yBAAoB,GAApB,oBAAoB,CAAuB;QAvB5E,mBAAc,GAA6B,EAAE,CAAC;QAC9C,qBAAgB,GAAY,KAAK,CAAC;QAE1C,qBAAgB,GAAG,eAAe,CAAU,kBAAkB,EAAE,KAAK,CAAC,CAAC;QAqI/D,uBAAkB,GAAmB,IAAI,CAAC;QA7GjD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,mBAAmB,CAAC,GAAG,EAAE;YAChD,QAAQ,CAAC,qBAAqB,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;QACvE,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC/C,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE;YACnD,MAAM,cAAc,GAAG,IAAI,CAAC,8BAA8B,CAAC,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;YAC1F,MAAM,OAAO,GAAG,cAAc,CAAC,CAAC,2CAAmC,CAAC,sCAA8B,CAAC;YACnG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,iBAAiB,CAAC,GAAG,EAAE;YAC9C,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEQ,uBAAuB,CAAC,QAA2B;QAC3D,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC;QACpF,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,6BAA6B,CAAC,CAAC;QAEpG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACnC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACnE,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;gBAChB,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;gBAC5D,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YACjC,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,MAAM;QACL,IAAI,CAAC;YACJ,IAAI,CAAC,SAAS,EAAE,CAAC;QAClB,CAAC;gBAAS,CAAC;YACV,4GAA4G;YAC5G,IAAI,CAAC,aAAa,EAAE,CAAC;QACtB,CAAC;IACF,CAAC;IAED;;OAEG;IACH,WAAW;QACV,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAEO,SAAS;QAChB,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAChD,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,KAAK,CAAC,EAAE,CAAC;gBACtD,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC;YACjF,CAAC;YAED,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;YACpD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;gBAC3G,MAAM,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;gBAC1D,MAAM,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;gBACnK,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,sBAAsB,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC;gBACxE,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YACzB,CAAC;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBACjE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;gBAC5D,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,EAAE,CAAC,CAAC;YACvD,CAAC;YAED,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;QACxC,CAAC;aAAM,CAAC;YACP,OAAO;YACP,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QACrD,CAAC;QAED,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE,CAAC;QACjE,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YACjE,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC,CAAC;QACrI,CAAC;aAAM,CAAC;YACP,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;YAC5D,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC;IACF,CAAC;IAED,qBAAqB,CAAC,aAAsB;QAC3C,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC3B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;YAC9B,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACnC,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YAC1B,CAAC,CAAC,CAAC;QACJ,CAAC;QAED,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;YACjE,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAC/C,MAAM,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC;YACxC,IAAI,WAAW,CAAC,YAAY,EAAE,CAAC;gBAC9B,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,YAAkC,EAAE,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC;YAC9I,CAAC;iBAAM,CAAC;gBACP,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAC/B,CAAC;QACF,CAAC;QAED,IAAI,CAAC,aAAa,EAAE,CAAC;IACtB,CAAC;IAED,oBAAoB;QACnB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;YACjE,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;QACjE,CAAC;IACF,CAAC;IAIO,0BAA0B,CAAC,WAAoB;QACtD,IAAI,IAAI,CAAC,kBAAkB,KAAK,IAAI,EAAE,CAAC;YACtC,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACvC,CAAC;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,8BAA8B,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QAE/F,IAAI,WAAW,EAAE,CAAC;YACjB,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;QACpC,CAAC;aAAM,IAAI,cAAc,EAAE,KAAK,KAAK,0BAA0B,CAAC,SAAS,EAAE,CAAC;YAC3E,IAAI,CAAC,kBAAkB,GAAG,UAAU,CAAC,GAAG,EAAE;gBACzC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,CAAC;YACpC,CAAC,EAAE,GAAG,CAAC,CAAC;QACT,CAAC;IACF,CAAC;IAEO,cAAc,CAAC,MAAiC,EAAE,+CAAgE;QACzH,MAAM,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,iBAAiB,CAAC;QAExE,qGAAqG;QACrG,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,CAAC;QAE1D,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;YAC5C,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QACrD,CAAC;aAAM,CAAC;YACP,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;QACrD,CAAC;QAED,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,WAAW,EAAE,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACnG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAClC,CAAC;IAEO,UAAU,CAAC,MAAiC,EAAE,OAAgC;QACrF,IAAI,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YACxC,4BAA4B;YAC5B,OAAO;QACR,CAAC;QAED,MAAM,iBAAiB,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;QACrE,MAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;QAClG,MAAM,kBAAkB,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;QACxF,IAAI,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QAEjH,8EAA8E;QAC9E,wEAAwE;QACxE,IAAI,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YACtG,sBAAsB;YACtB,IAAI,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBAC1E,CAAC,GAAG,cAAc,EAAE,GAAG,kBAAkB,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBAC1D,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;oBACvB,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;gBAEH,aAAa,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,iBAAiB,CAAC,MAAM,CAAC,CAAC;gBACtF,MAAM,oBAAoB,GAAG,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;oBACvD,OAAO,IAAI,sBAAsB,CAAC,MAAM,EAAE,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC;gBAC7L,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,cAAc,GAAG,CAAC,GAAG,iBAAiB,EAAE,GAAG,oBAAoB,CAAC,CAAC;gBAEtE,gCAAgC;gBAChC,KAAK,IAAI,CAAC,GAAG,iBAAiB,CAAC,MAAM,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC5E,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;gBAClD,CAAC;YACF,CAAC;iBAAM,CAAC;gBACP,oDAAoD;gBACpD,sFAAsF;gBACtF,MAAM,uBAAuB,GAAG,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC/H,CAAC,GAAG,cAAc,EAAE,GAAG,uBAAuB,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBAC/D,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;oBACvB,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;gBACzB,CAAC,CAAC,CAAC;gBAEH,YAAY;gBACZ,MAAM,qBAAqB,GAAG,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;gBAE9E,MAAM,oBAAoB,GAAG,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;oBACvD,OAAO,IAAI,sBAAsB,CAAC,MAAM,EAAE,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC;gBAC7L,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,cAAc,GAAG,CAAC,GAAG,iBAAiB,EAAE,GAAG,oBAAoB,EAAE,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;gBAE5K,KAAK,IAAI,CAAC,GAAG,iBAAiB,CAAC,MAAM,EAAE,CAAC,GAAG,qBAAqB,EAAE,CAAC,EAAE,EAAE,CAAC;oBACvE,MAAM,eAAe,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC;oBACzM,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;gBACxD,CAAC;YACF,CAAC;QACF,CAAC;aAAM,CAAC;YACP,kCAAkC;YAClC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBAC9B,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;gBACvB,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACzB,CAAC,CAAC,CAAC;YAEH,MAAM,qBAAqB,GAAG,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC;YAE9E,MAAM,oBAAoB,GAAG,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;gBACvD,OAAO,IAAI,sBAAsB,CAAC,MAAM,EAAE,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC;YAC7L,CAAC,CAAC,CAAC;YAEH,IAAI,qBAAqB,GAA6B,EAAE,CAAC;YAEzD,IAAI,iBAAiB,CAAC,MAAM,GAAG,oBAAoB,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC;gBACjI,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;gBAClF,qBAAqB,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAC,iBAAiB,CAAC,MAAM,GAAG,oBAAoB,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;oBACpK,OAAO,IAAI,sBAAsB,CAAC,MAAM,EAAE,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iBAAiB,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC,CAAC;gBAC7L,CAAC,CAAC,CAAC;YACJ,CAAC;YAED,IAAI,CAAC,cAAc,GAAG,CAAC,GAAG,iBAAiB,EAAE,GAAG,oBAAoB,EAAE,GAAG,kBAAkB,EAAE,GAAG,qBAAqB,CAAC,CAAC;YAEvH,KAAK,IAAI,CAAC,GAAG,iBAAiB,CAAC,MAAM,EAAE,CAAC,GAAG,qBAAqB,EAAE,CAAC,EAAE,EAAE,CAAC;gBACvE,MAAM,eAAe,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC;gBACzM,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;YACxD,CAAC;YAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,qBAAqB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACvD,IAAI,CAAC,cAAc,CAAC,iBAAiB,CAAC,MAAM,GAAG,aAAa,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;YAChI,CAAC;QACF,CAAC;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YACjE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;gBACxE,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC,CAAC;YACrI,CAAC;YACD,IAAI,CAAC,QAAQ,CAAC,mCAAmC,CAAC,EAAE,CAAC,CAAC;QACvD,CAAC;aAAM,CAAC;YACP,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;QAC7D,CAAC;QAED,IAAI,CAAC,aAAa,EAAE,CAAC;QACrB,0EAA0E;QAC1E,8DAA8D;QAC9D,6FAA6F;QAC7F,IAAI,CAAC,0BAA0B,CAAC,OAAO,0CAAkC,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;IAC5H,CAAC;IAEO,wBAAwB,CAAC,WAA4B;QAC5D,MAAM,EAAE,GAAoB;YAC3B,KAAK,EAAE,uBAAuB,IAAI,CAAC,OAAO,CAAC,KAAK,iHAAiH;YACjK,SAAS,EAAE,IAAI;YACf,iBAAiB,EAAE,IAAI;SACvB,CAAC;QAEF,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,EAAE;YACnD,aAAa,EAAE,CAAC,OAAO,EAAE,EAAE;gBAC1B,IAAI,OAAO,KAAK,0CAA0C,EAAE,CAAC;oBAC5D,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,IAAI,CAAC,cAAc,CAAC,SAAU,CAAC,GAAG,CAAC,CAAC,CAAC;gBAClG,CAAC;YACF,CAAC;SACD,CAAC,CAAC,CAAC;QAEJ,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QACnD,OAAO,QAAQ,CAAC,OAAO,CAAC;IACzB,CAAC;IAEO,aAAa;QACpB,IAAI,CAAC,cAAc,CAAC,kBAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;IAC7F,CAAC;IAEQ,OAAO;QACf,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;QAEvC,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC7B,YAAY,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACvC,CAAC;QAED,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACnC,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;CACD,CAAA;AAzTY,mBAAmB;IAsB7B,WAAA,cAAc,CAAA;IACd,WAAA,8BAA8B,CAAA;IAC9B,WAAA,qBAAqB,CAAA;GAxBX,mBAAmB,CAyT/B;;AAED,MAAM,0BAA0B,GAAG;IAClC,sBAAsB;IACtB,0BAA0B;IAC1B,mCAAmC;IACnC,gCAAgC;IAChC,8BAA8B;IAC9B,8BAA8B;IAC9B,8BAA8B;IAC9B,8BAA8B;IAC9B,kCAAkC;IAClC,kCAAkC;IAClC,kCAAkC;IAClC,kCAAkC;IAClC,wCAAwC;IACxC,eAAe;IACf,YAAY;IACZ,yBAAyB;IACzB,0CAA0C;IAC1C,qCAAqC;CACrC,CAAC","file":"cellOutput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { FastDomNode } from '../../../../../../base/browser/fastDomNode.js';\nimport { renderMarkdown } from '../../../../../../base/browser/markdownRenderer.js';\nimport { Action } from '../../../../../../base/common/actions.js';\nimport { IMarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../../../base/common/marshallingIds.js';\nimport * as nls from '../../../../../../nls.js';\nimport { getActionBarActions } from '../../../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { WorkbenchToolBar } from '../../../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../../../platform/opener/common/opener.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { IExtensionsWorkbenchService } from '../../../../extensions/common/extensions.js';\nimport { ICellOutputViewModel, ICellViewModel, IInsetRenderOutput, INotebookEditorDelegate, JUPYTER_EXTENSION_ID, RenderOutputType } from '../../notebookBrowser.js';\nimport { mimetypeIcon } from '../../notebookIcons.js';\nimport { CellContentPart } from '../cellPart.js';\nimport { CodeCellRenderTemplate } from '../notebookRenderingCommon.js';\nimport { CodeCellViewModel } from '../../viewModel/codeCellViewModel.js';\nimport { NotebookTextModel } from '../../../common/model/notebookTextModel.js';\nimport { CellUri, IOrderedMimeType, NotebookCellExecutionState, NotebookCellOutputsSplice, RENDERER_NOT_AVAILABLE } from '../../../common/notebookCommon.js';\nimport { isTextStreamMime } from '../../../../../../base/common/mime.js';\nimport { INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { INotebookKernel } from '../../../common/notebookKernelService.js';\nimport { INotebookService } from '../../../common/notebookService.js';\nimport { COPY_OUTPUT_COMMAND_ID } from '../../controller/cellOutputActions.js';\nimport { autorun, observableValue } from '../../../../../../base/common/observable.js';\nimport { NOTEBOOK_CELL_HAS_HIDDEN_OUTPUTS, NOTEBOOK_CELL_IS_FIRST_OUTPUT, NOTEBOOK_CELL_OUTPUT_MIMETYPE } from '../../../common/notebookContextKeys.js';\nimport { TEXT_BASED_MIMETYPES } from '../../viewModel/cellOutputTextHelper.js';\n\ninterface IMimeTypeRenderer extends IQuickPickItem {\n\tindex: number;\n}\n\ninterface IRenderResult {\n\tinitRenderIsSynchronous: false;\n}\n\n// DOM structure\n//\n//  #output\n//  |\n//  |  #output-inner-container\n//  |                        |  #cell-output-toolbar\n//  |                        |  #output-element\n//  |                        |  #output-element\n//  |                        |  #output-element\n//  |  #output-inner-container\n//  |                        |  #cell-output-toolbar\n//  |                        |  #output-element\n//  |  #output-inner-container\n//  |                        |  #cell-output-toolbar\n//  |                        |  #output-element\nclass CellOutputElement extends Disposable {\n\tprivate readonly toolbarDisposables = this._register(new DisposableStore());\n\n\tinnerContainer?: HTMLElement;\n\trenderedOutputContainer!: HTMLElement;\n\trenderResult?: IInsetRenderOutput;\n\n\tprivate readonly contextKeyService: IContextKeyService;\n\tprivate toolbarAttached = false;\n\n\tconstructor(\n\t\tprivate notebookEditor: INotebookEditorDelegate,\n\t\tprivate viewCell: CodeCellViewModel,\n\t\tprivate cellOutputContainer: CellOutputContainer,\n\t\tprivate outputContainer: FastDomNode<HTMLElement>,\n\t\treadonly output: ICellOutputViewModel,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IContextKeyService parentContextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IExtensionsWorkbenchService private readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.contextKeyService = parentContextKeyService;\n\n\t\tthis._register(this.output.model.onDidChangeData(() => {\n\t\t\tthis.rerender();\n\t\t}));\n\n\t\tthis._register(this.output.onDidResetRenderer(() => {\n\t\t\tthis.rerender();\n\t\t}));\n\t}\n\n\tdetach() {\n\t\tthis.renderedOutputContainer?.remove();\n\n\t\tlet count = 0;\n\t\tif (this.innerContainer) {\n\t\t\tfor (let i = 0; i < this.innerContainer.childNodes.length; i++) {\n\t\t\t\tif ((this.innerContainer.childNodes[i] as HTMLElement).className === 'rendered-output') {\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\n\t\t\t\tif (count > 1) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (count === 0) {\n\t\t\t\tthis.innerContainer.remove();\n\t\t\t}\n\t\t}\n\n\t\tthis.notebookEditor.removeInset(this.output);\n\t}\n\n\tupdateDOMTop(top: number) {\n\t\tif (this.innerContainer) {\n\t\t\tthis.innerContainer.style.top = `${top}px`;\n\t\t}\n\t}\n\n\trerender() {\n\t\tif (\n\t\t\tthis.notebookEditor.hasModel() &&\n\t\t\tthis.innerContainer &&\n\t\t\tthis.renderResult &&\n\t\t\tthis.renderResult.type === RenderOutputType.Extension\n\t\t) {\n\t\t\t// Output rendered by extension renderer got an update\n\t\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(this.notebookEditor.textModel, this.notebookEditor.activeKernel?.preloadProvides);\n\t\t\tconst pickedMimeType = mimeTypes[pick];\n\t\t\tif (pickedMimeType.mimeType === this.renderResult.mimeType && pickedMimeType.rendererId === this.renderResult.renderer.id) {\n\t\t\t\t// Same mimetype, same renderer, call the extension renderer to update\n\t\t\t\tconst index = this.viewCell.outputsViewModels.indexOf(this.output);\n\t\t\t\tthis.notebookEditor.updateOutput(this.viewCell, this.renderResult, this.viewCell.getOutputOffset(index));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.innerContainer) {\n\t\t\t// init rendering didn't happen\n\t\t\tconst currOutputIndex = this.cellOutputContainer.renderedOutputEntries.findIndex(entry => entry.element === this);\n\t\t\tconst previousSibling = currOutputIndex > 0 && !!(this.cellOutputContainer.renderedOutputEntries[currOutputIndex - 1].element.innerContainer?.parentElement)\n\t\t\t\t? this.cellOutputContainer.renderedOutputEntries[currOutputIndex - 1].element.innerContainer\n\t\t\t\t: undefined;\n\t\t\tthis.render(previousSibling);\n\t\t} else {\n\t\t\t// Another mimetype or renderer is picked, we need to clear the current output and re-render\n\t\t\tconst nextElement = this.innerContainer.nextElementSibling;\n\t\t\tthis.toolbarDisposables.clear();\n\t\t\tconst element = this.innerContainer;\n\t\t\tif (element) {\n\t\t\t\telement.remove();\n\t\t\t\tthis.notebookEditor.removeInset(this.output);\n\t\t\t}\n\n\t\t\tthis.render(nextElement as HTMLElement);\n\t\t}\n\n\t\tthis._relayoutCell();\n\t}\n\n\t// insert after previousSibling\n\tprivate _generateInnerOutputContainer(previousSibling: HTMLElement | undefined, pickedMimeTypeRenderer: IOrderedMimeType) {\n\t\tthis.innerContainer = DOM.$('.output-inner-container');\n\n\t\tif (previousSibling && previousSibling.nextElementSibling) {\n\t\t\tthis.outputContainer.domNode.insertBefore(this.innerContainer, previousSibling.nextElementSibling);\n\t\t} else {\n\t\t\tthis.outputContainer.domNode.appendChild(this.innerContainer);\n\t\t}\n\n\t\tthis.innerContainer.setAttribute('output-mime-type', pickedMimeTypeRenderer.mimeType);\n\t\treturn this.innerContainer;\n\t}\n\n\trender(previousSibling: HTMLElement | undefined): IRenderResult | undefined {\n\t\tconst index = this.viewCell.outputsViewModels.indexOf(this.output);\n\n\t\tif (this.viewCell.isOutputCollapsed || !this.notebookEditor.hasModel()) {\n\t\t\tthis.cellOutputContainer.flagAsStale();\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst notebookUri = CellUri.parse(this.viewCell.uri)?.notebook;\n\t\tif (!notebookUri) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst notebookTextModel = this.notebookEditor.textModel;\n\n\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(notebookTextModel, this.notebookEditor.activeKernel?.preloadProvides);\n\t\tconst currentMimeType = mimeTypes[pick];\n\t\tif (!mimeTypes.find(mimeType => mimeType.isTrusted) || mimeTypes.length === 0) {\n\t\t\tthis.viewCell.updateOutputHeight(index, 0, 'CellOutputElement#noMimeType');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst selectedPresentation = mimeTypes[pick];\n\t\tlet renderer = this.notebookService.getRendererInfo(selectedPresentation.rendererId);\n\t\tif (!renderer && selectedPresentation.mimeType.indexOf('text/') > -1) {\n\t\t\trenderer = this.notebookService.getRendererInfo('vscode.builtin-renderer');\n\t\t}\n\n\t\tconst innerContainer = this._generateInnerOutputContainer(previousSibling, selectedPresentation);\n\t\tif (index === 0 || this.output.visible.get()) {\n\t\t\tthis._attachToolbar(innerContainer, notebookTextModel, this.notebookEditor.activeKernel, index, currentMimeType, mimeTypes);\n\t\t} else {\n\t\t\tthis._register(autorun((reader) => {\n\t\t\t\tconst visible = reader.readObservable(this.output.visible);\n\t\t\t\tif (visible && !this.toolbarAttached) {\n\t\t\t\t\tthis._attachToolbar(innerContainer, notebookTextModel, this.notebookEditor.activeKernel, index, currentMimeType, mimeTypes);\n\t\t\t\t} else if (!visible) {\n\t\t\t\t\tthis.toolbarDisposables.clear();\n\t\t\t\t}\n\t\t\t\tthis.cellOutputContainer.checkForHiddenOutputs();\n\t\t\t}));\n\t\t\tthis.cellOutputContainer.hasHiddenOutputs.set(true, undefined);\n\t\t}\n\n\t\tthis.renderedOutputContainer = DOM.append(innerContainer, DOM.$('.rendered-output'));\n\n\n\t\tthis.renderResult = renderer\n\t\t\t? { type: RenderOutputType.Extension, renderer, source: this.output, mimeType: selectedPresentation.mimeType }\n\t\t\t: this._renderMissingRenderer(this.output, selectedPresentation.mimeType);\n\n\t\tthis.output.pickedMimeType = selectedPresentation;\n\n\t\tif (!this.renderResult) {\n\t\t\tthis.viewCell.updateOutputHeight(index, 0, 'CellOutputElement#renderResultUndefined');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.notebookEditor.createOutput(this.viewCell, this.renderResult, this.viewCell.getOutputOffset(index), false);\n\t\tinnerContainer.classList.add('background');\n\n\t\treturn { initRenderIsSynchronous: false };\n\t}\n\n\tprivate _renderMissingRenderer(viewModel: ICellOutputViewModel, preferredMimeType: string | undefined): IInsetRenderOutput {\n\t\tif (!viewModel.model.outputs.length) {\n\t\t\treturn this._renderMessage(viewModel, nls.localize('empty', \"Cell has no output\"));\n\t\t}\n\n\t\tif (!preferredMimeType) {\n\t\t\tconst mimeTypes = viewModel.model.outputs.map(op => op.mime);\n\t\t\tconst mimeTypesMessage = mimeTypes.join(', ');\n\t\t\treturn this._renderMessage(viewModel, nls.localize('noRenderer.2', \"No renderer could be found for output. It has the following mimetypes: {0}\", mimeTypesMessage));\n\t\t}\n\n\t\treturn this._renderSearchForMimetype(viewModel, preferredMimeType);\n\t}\n\n\tprivate _renderSearchForMimetype(viewModel: ICellOutputViewModel, mimeType: string): IInsetRenderOutput {\n\t\tconst query = `@tag:notebookRenderer ${mimeType}`;\n\n\t\tconst p = DOM.$('p', undefined, `No renderer could be found for mimetype \"${mimeType}\", but one might be available on the Marketplace.`);\n\t\tconst a = DOM.$('a', { href: `command:workbench.extensions.search?%22${query}%22`, class: 'monaco-button monaco-text-button', tabindex: 0, role: 'button', style: 'padding: 8px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(14, 99, 156); max-width: 200px;' }, `Search Marketplace`);\n\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: p.outerHTML + a.outerHTML\n\t\t};\n\t}\n\n\tprivate _renderMessage(viewModel: ICellOutputViewModel, message: string): IInsetRenderOutput {\n\t\tconst el = DOM.$('p', undefined, message);\n\t\treturn { type: RenderOutputType.Html, source: viewModel, htmlContent: el.outerHTML };\n\t}\n\n\tprivate shouldEnableCopy(mimeTypes: readonly IOrderedMimeType[]) {\n\t\tif (!mimeTypes.find(mimeType => TEXT_BASED_MIMETYPES.indexOf(mimeType.mimeType) || mimeType.mimeType.startsWith('image/'))) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isTextStreamMime(mimeTypes[0].mimeType)) {\n\t\t\tconst cellViewModel = this.output.cellViewModel as ICellViewModel;\n\t\t\tconst index = cellViewModel.outputsViewModels.indexOf(this.output);\n\t\t\tif (index > 0) {\n\t\t\t\tconst previousOutput = cellViewModel.model.outputs[index - 1];\n\t\t\t\t// if the previous output was also a stream, the copy command will be in that output instead\n\t\t\t\treturn !isTextStreamMime(previousOutput.outputs[0].mime);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate async _attachToolbar(outputItemDiv: HTMLElement, notebookTextModel: NotebookTextModel, kernel: INotebookKernel | undefined, index: number, currentMimeType: IOrderedMimeType, mimeTypes: readonly IOrderedMimeType[]) {\n\t\tconst hasMultipleMimeTypes = mimeTypes.filter(mimeType => mimeType.isTrusted).length > 1;\n\t\tconst isCopyEnabled = this.shouldEnableCopy(mimeTypes);\n\t\tif (index > 0 && !hasMultipleMimeTypes && !isCopyEnabled) {\n\t\t\t// nothing to put in the toolbar\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\toutputItemDiv.style.position = 'relative';\n\t\tconst mimeTypePicker = DOM.$('.cell-output-toolbar');\n\n\t\toutputItemDiv.appendChild(mimeTypePicker);\n\n\t\tconst toolbar = this.toolbarDisposables.add(this.instantiationService.createInstance(WorkbenchToolBar, mimeTypePicker, {\n\t\t\trenderDropdownAsChildElement: false\n\t\t}));\n\t\ttoolbar.context = {\n\t\t\tui: true,\n\t\t\tcell: this.output.cellViewModel as ICellViewModel,\n\t\t\toutputViewModel: this.output,\n\t\t\tnotebookEditor: this.notebookEditor,\n\t\t\t$mid: MarshalledId.NotebookCellActionContext\n\t\t};\n\n\t\t// TODO: This could probably be a real registered action, but it has to talk to this output element\n\t\tconst pickAction = this.toolbarDisposables.add(new Action('notebook.output.pickMimetype', nls.localize('pickMimeType', \"Change Presentation\"), ThemeIcon.asClassName(mimetypeIcon), undefined,\n\t\t\tasync _context => this._pickActiveMimeTypeRenderer(outputItemDiv, notebookTextModel, kernel, this.output)));\n\n\t\tconst menuContextKeyService = this.toolbarDisposables.add(this.contextKeyService.createScoped(outputItemDiv));\n\t\tconst hasHiddenOutputs = NOTEBOOK_CELL_HAS_HIDDEN_OUTPUTS.bindTo(menuContextKeyService);\n\t\tconst isFirstCellOutput = NOTEBOOK_CELL_IS_FIRST_OUTPUT.bindTo(menuContextKeyService);\n\t\tconst cellOutputMimetype = NOTEBOOK_CELL_OUTPUT_MIMETYPE.bindTo(menuContextKeyService);\n\t\tisFirstCellOutput.set(index === 0);\n\t\tcellOutputMimetype.set(currentMimeType.mimeType);\n\t\tthis.toolbarDisposables.add(autorun((r) => { hasHiddenOutputs.set(this.cellOutputContainer.hasHiddenOutputs.read(r)); }));\n\t\tconst menu = this.toolbarDisposables.add(this.menuService.createMenu(MenuId.NotebookOutputToolbar, menuContextKeyService));\n\n\t\tconst updateMenuToolbar = () => {\n\t\t\tlet { secondary } = getActionBarActions(menu!.getActions({ shouldForwardArgs: true }), () => false);\n\t\t\tif (!isCopyEnabled) {\n\t\t\t\tsecondary = secondary.filter((action) => action.id !== COPY_OUTPUT_COMMAND_ID);\n\t\t\t}\n\t\t\tif (hasMultipleMimeTypes) {\n\t\t\t\tsecondary = [pickAction, ...secondary];\n\t\t\t}\n\n\t\t\ttoolbar.setActions([], secondary);\n\t\t};\n\t\tupdateMenuToolbar();\n\t\tthis.toolbarDisposables.add(menu.onDidChange(updateMenuToolbar));\n\t}\n\n\tprivate async _pickActiveMimeTypeRenderer(outputItemDiv: HTMLElement, notebookTextModel: NotebookTextModel, kernel: INotebookKernel | undefined, viewModel: ICellOutputViewModel) {\n\t\tconst [mimeTypes, currIndex] = viewModel.resolveMimeTypes(notebookTextModel, kernel?.preloadProvides);\n\n\t\tconst items: IMimeTypeRenderer[] = [];\n\t\tconst unsupportedItems: IMimeTypeRenderer[] = [];\n\t\tmimeTypes.forEach((mimeType, index) => {\n\t\t\tif (mimeType.isTrusted) {\n\t\t\t\tconst arr = mimeType.rendererId === RENDERER_NOT_AVAILABLE ?\n\t\t\t\t\tunsupportedItems :\n\t\t\t\t\titems;\n\t\t\t\tarr.push({\n\t\t\t\t\tlabel: mimeType.mimeType,\n\t\t\t\t\tid: mimeType.mimeType,\n\t\t\t\t\tindex: index,\n\t\t\t\t\tpicked: index === currIndex,\n\t\t\t\t\tdetail: this._generateRendererInfo(mimeType.rendererId),\n\t\t\t\t\tdescription: index === currIndex ? nls.localize('curruentActiveMimeType', \"Currently Active\") : undefined\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (unsupportedItems.some(m => JUPYTER_RENDERER_MIMETYPES.includes(m.id!))) {\n\t\t\tunsupportedItems.push({\n\t\t\t\tlabel: nls.localize('installJupyterPrompt', \"Install additional renderers from the marketplace\"),\n\t\t\t\tid: 'installRenderers',\n\t\t\t\tindex: mimeTypes.length\n\t\t\t});\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst picker = disposables.add(this.quickInputService.createQuickPick({ useSeparators: true }));\n\t\tpicker.items = [\n\t\t\t...items,\n\t\t\t{ type: 'separator' },\n\t\t\t...unsupportedItems\n\t\t];\n\t\tpicker.activeItems = items.filter(item => !!item.picked);\n\t\tpicker.placeholder = items.length !== mimeTypes.length\n\t\t\t? nls.localize('promptChooseMimeTypeInSecure.placeHolder', \"Select mimetype to render for current output\")\n\t\t\t: nls.localize('promptChooseMimeType.placeHolder', \"Select mimetype to render for current output\");\n\n\t\tconst pick = await new Promise<IMimeTypeRenderer | undefined>(resolve => {\n\t\t\tdisposables.add(picker.onDidAccept(() => {\n\t\t\t\tresolve(picker.selectedItems.length === 1 ? (picker.selectedItems[0] as IMimeTypeRenderer) : undefined);\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\t\t\tpicker.show();\n\t\t});\n\n\t\tif (pick === undefined || pick.index === currIndex) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (pick.id === 'installRenderers') {\n\t\t\tthis._showJupyterExtension();\n\t\t\treturn;\n\t\t}\n\n\t\t// user chooses another mimetype\n\t\tconst nextElement = outputItemDiv.nextElementSibling;\n\t\tthis.toolbarDisposables.clear();\n\t\tconst element = this.innerContainer;\n\t\tif (element) {\n\t\t\telement.remove();\n\t\t\tthis.notebookEditor.removeInset(viewModel);\n\t\t}\n\n\t\tviewModel.pickedMimeType = mimeTypes[pick.index];\n\t\tthis.viewCell.updateOutputMinHeight(this.viewCell.layoutInfo.outputTotalHeight);\n\n\t\tconst { mimeType, rendererId } = mimeTypes[pick.index];\n\t\tthis.notebookService.updateMimePreferredRenderer(notebookTextModel.viewType, mimeType, rendererId, mimeTypes.map(m => m.mimeType));\n\t\tthis.render(nextElement as HTMLElement);\n\t\tthis._validateFinalOutputHeight(false);\n\t\tthis._relayoutCell();\n\t}\n\n\tprivate async _showJupyterExtension() {\n\t\tawait this.extensionsWorkbenchService.openSearch(`@id:${JUPYTER_EXTENSION_ID}`);\n\t}\n\n\tprivate _generateRendererInfo(renderId: string): string {\n\t\tconst renderInfo = this.notebookService.getRendererInfo(renderId);\n\n\t\tif (renderInfo) {\n\t\t\tconst displayName = renderInfo.displayName !== '' ? renderInfo.displayName : renderInfo.id;\n\t\t\treturn `${displayName} (${renderInfo.extensionId.value})`;\n\t\t}\n\n\t\treturn nls.localize('unavailableRenderInfo', \"renderer not available\");\n\t}\n\n\tprivate _outputHeightTimer: Timeout | null = null;\n\n\tprivate _validateFinalOutputHeight(synchronous: boolean) {\n\t\tif (this._outputHeightTimer !== null) {\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tif (synchronous) {\n\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t} else {\n\t\t\tthis._outputHeightTimer = setTimeout(() => {\n\t\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tprivate _relayoutCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(this.viewCell, this.viewCell.layoutInfo.totalHeight);\n\t}\n\n\toverride dispose() {\n\t\tif (this._outputHeightTimer) {\n\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nclass OutputEntryViewHandler {\n\tconstructor(\n\t\treadonly model: ICellOutputViewModel,\n\t\treadonly element: CellOutputElement\n\t) {\n\n\t}\n}\n\nconst enum CellOutputUpdateContext {\n\tExecution = 1,\n\tOther = 2\n}\n\nexport class CellOutputContainer extends CellContentPart {\n\tprivate _outputEntries: OutputEntryViewHandler[] = [];\n\tprivate _hasStaleOutputs: boolean = false;\n\n\thasHiddenOutputs = observableValue<boolean>('hasHiddenOutputs', false);\n\tcheckForHiddenOutputs() {\n\t\tif (this._outputEntries.find(entry => { return !entry.model.visible.get(); })) {\n\t\t\tthis.hasHiddenOutputs.set(true, undefined);\n\t\t} else {\n\t\t\tthis.hasHiddenOutputs.set(false, undefined);\n\t\t}\n\t}\n\n\tget renderedOutputEntries() {\n\t\treturn this._outputEntries;\n\t}\n\n\tconstructor(\n\t\tprivate notebookEditor: INotebookEditorDelegate,\n\t\tprivate viewCell: CodeCellViewModel,\n\t\tprivate readonly templateData: CodeCellRenderTemplate,\n\t\tprivate options: { limit: number },\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@INotebookExecutionStateService private readonly _notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(viewCell.onDidStartExecution(() => {\n\t\t\tviewCell.updateOutputMinHeight(viewCell.layoutInfo.outputTotalHeight);\n\t\t}));\n\n\t\tthis._register(viewCell.onDidStopExecution(() => {\n\t\t\tthis._validateFinalOutputHeight(false);\n\t\t}));\n\n\t\tthis._register(viewCell.onDidChangeOutputs(splice => {\n\t\t\tconst executionState = this._notebookExecutionStateService.getCellExecution(viewCell.uri);\n\t\t\tconst context = executionState ? CellOutputUpdateContext.Execution : CellOutputUpdateContext.Other;\n\t\t\tthis._updateOutputs(splice, context);\n\t\t}));\n\n\t\tthis._register(viewCell.onDidChangeLayout(() => {\n\t\t\tthis.updateInternalLayoutNow(viewCell);\n\t\t}));\n\t}\n\n\toverride updateInternalLayoutNow(viewCell: CodeCellViewModel) {\n\t\tthis.templateData.outputContainer.setTop(viewCell.layoutInfo.outputContainerOffset);\n\t\tthis.templateData.outputShowMoreContainer.setTop(viewCell.layoutInfo.outputShowMoreContainerOffset);\n\n\t\tthis._outputEntries.forEach(entry => {\n\t\t\tconst index = this.viewCell.outputsViewModels.indexOf(entry.model);\n\t\t\tif (index >= 0) {\n\t\t\t\tconst top = this.viewCell.getOutputOffsetInContainer(index);\n\t\t\t\tentry.element.updateDOMTop(top);\n\t\t\t}\n\t\t});\n\t}\n\n\trender() {\n\t\ttry {\n\t\t\tthis._doRender();\n\t\t} finally {\n\t\t\t// TODO@rebornix, this is probably not necessary at all as cell layout change would send the update request.\n\t\t\tthis._relayoutCell();\n\t\t}\n\t}\n\n\t/**\n\t * Notify that an output may have been swapped out without the model getting rendered.\n\t */\n\tflagAsStale() {\n\t\tthis._hasStaleOutputs = true;\n\t}\n\n\tprivate _doRender() {\n\t\tif (this.viewCell.outputsViewModels.length > 0) {\n\t\t\tif (this.viewCell.layoutInfo.outputTotalHeight !== 0) {\n\t\t\t\tthis.viewCell.updateOutputMinHeight(this.viewCell.layoutInfo.outputTotalHeight);\n\t\t\t}\n\n\t\t\tDOM.show(this.templateData.outputContainer.domNode);\n\t\t\tfor (let index = 0; index < Math.min(this.options.limit, this.viewCell.outputsViewModels.length); index++) {\n\t\t\t\tconst currOutput = this.viewCell.outputsViewModels[index];\n\t\t\t\tconst entry = this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, currOutput);\n\t\t\t\tthis._outputEntries.push(new OutputEntryViewHandler(currOutput, entry));\n\t\t\t\tentry.render(undefined);\n\t\t\t}\n\n\t\t\tif (this.viewCell.outputsViewModels.length > this.options.limit) {\n\t\t\t\tDOM.show(this.templateData.outputShowMoreContainer.domNode);\n\t\t\t\tthis.viewCell.updateOutputShowMoreContainerHeight(46);\n\t\t\t}\n\n\t\t\tthis._validateFinalOutputHeight(false);\n\t\t} else {\n\t\t\t// noop\n\t\t\tDOM.hide(this.templateData.outputContainer.domNode);\n\t\t}\n\n\t\tthis.templateData.outputShowMoreContainer.domNode.innerText = '';\n\t\tif (this.viewCell.outputsViewModels.length > this.options.limit) {\n\t\t\tthis.templateData.outputShowMoreContainer.domNode.appendChild(this._generateShowMoreElement(this.templateData.templateDisposables));\n\t\t} else {\n\t\t\tDOM.hide(this.templateData.outputShowMoreContainer.domNode);\n\t\t\tthis.viewCell.updateOutputShowMoreContainerHeight(0);\n\t\t}\n\t}\n\n\tviewUpdateShowOutputs(initRendering: boolean): void {\n\t\tif (this._hasStaleOutputs) {\n\t\t\tthis._hasStaleOutputs = false;\n\t\t\tthis._outputEntries.forEach(entry => {\n\t\t\t\tentry.element.rerender();\n\t\t\t});\n\t\t}\n\n\t\tfor (let index = 0; index < this._outputEntries.length; index++) {\n\t\t\tconst viewHandler = this._outputEntries[index];\n\t\t\tconst outputEntry = viewHandler.element;\n\t\t\tif (outputEntry.renderResult) {\n\t\t\t\tthis.notebookEditor.createOutput(this.viewCell, outputEntry.renderResult as IInsetRenderOutput, this.viewCell.getOutputOffset(index), false);\n\t\t\t} else {\n\t\t\t\toutputEntry.render(undefined);\n\t\t\t}\n\t\t}\n\n\t\tthis._relayoutCell();\n\t}\n\n\tviewUpdateHideOuputs(): void {\n\t\tfor (let index = 0; index < this._outputEntries.length; index++) {\n\t\t\tthis.notebookEditor.hideInset(this._outputEntries[index].model);\n\t\t}\n\t}\n\n\tprivate _outputHeightTimer: Timeout | null = null;\n\n\tprivate _validateFinalOutputHeight(synchronous: boolean) {\n\t\tif (this._outputHeightTimer !== null) {\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tconst executionState = this._notebookExecutionStateService.getCellExecution(this.viewCell.uri);\n\n\t\tif (synchronous) {\n\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t} else if (executionState?.state !== NotebookCellExecutionState.Executing) {\n\t\t\tthis._outputHeightTimer = setTimeout(() => {\n\t\t\t\tthis.viewCell.unlockOutputHeight();\n\t\t\t}, 200);\n\t\t}\n\t}\n\n\tprivate _updateOutputs(splice: NotebookCellOutputsSplice, context: CellOutputUpdateContext = CellOutputUpdateContext.Other) {\n\t\tconst previousOutputHeight = this.viewCell.layoutInfo.outputTotalHeight;\n\n\t\t// for cell output update, we make sure the cell does not shrink before the new outputs are rendered.\n\t\tthis.viewCell.updateOutputMinHeight(previousOutputHeight);\n\n\t\tif (this.viewCell.outputsViewModels.length) {\n\t\t\tDOM.show(this.templateData.outputContainer.domNode);\n\t\t} else {\n\t\t\tDOM.hide(this.templateData.outputContainer.domNode);\n\t\t}\n\n\t\tthis.viewCell.spliceOutputHeights(splice.start, splice.deleteCount, splice.newOutputs.map(_ => 0));\n\t\tthis._renderNow(splice, context);\n\t}\n\n\tprivate _renderNow(splice: NotebookCellOutputsSplice, context: CellOutputUpdateContext) {\n\t\tif (splice.start >= this.options.limit) {\n\t\t\t// splice items out of limit\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstGroupEntries = this._outputEntries.slice(0, splice.start);\n\t\tconst deletedEntries = this._outputEntries.slice(splice.start, splice.start + splice.deleteCount);\n\t\tconst secondGroupEntries = this._outputEntries.slice(splice.start + splice.deleteCount);\n\t\tlet newlyInserted = this.viewCell.outputsViewModels.slice(splice.start, splice.start + splice.newOutputs.length);\n\n\t\t// [...firstGroup, ...deletedEntries, ...secondGroupEntries]  [...restInModel]\n\t\t// [...firstGroup, ...newlyInserted, ...secondGroupEntries, restInModel]\n\t\tif (firstGroupEntries.length + newlyInserted.length + secondGroupEntries.length > this.options.limit) {\n\t\t\t// exceeds limit again\n\t\t\tif (firstGroupEntries.length + newlyInserted.length > this.options.limit) {\n\t\t\t\t[...deletedEntries, ...secondGroupEntries].forEach(entry => {\n\t\t\t\t\tentry.element.detach();\n\t\t\t\t\tentry.element.dispose();\n\t\t\t\t});\n\n\t\t\t\tnewlyInserted = newlyInserted.slice(0, this.options.limit - firstGroupEntries.length);\n\t\t\t\tconst newlyInsertedEntries = newlyInserted.map(insert => {\n\t\t\t\t\treturn new OutputEntryViewHandler(insert, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, insert));\n\t\t\t\t});\n\n\t\t\t\tthis._outputEntries = [...firstGroupEntries, ...newlyInsertedEntries];\n\n\t\t\t\t// render newly inserted outputs\n\t\t\t\tfor (let i = firstGroupEntries.length; i < this._outputEntries.length; i++) {\n\t\t\t\t\tthis._outputEntries[i].element.render(undefined);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// part of secondGroupEntries are pushed out of view\n\t\t\t\t// now we have to be creative as secondGroupEntries might not use dedicated containers\n\t\t\t\tconst elementsPushedOutOfView = secondGroupEntries.slice(this.options.limit - firstGroupEntries.length - newlyInserted.length);\n\t\t\t\t[...deletedEntries, ...elementsPushedOutOfView].forEach(entry => {\n\t\t\t\t\tentry.element.detach();\n\t\t\t\t\tentry.element.dispose();\n\t\t\t\t});\n\n\t\t\t\t// exclusive\n\t\t\t\tconst reRenderRightBoundary = firstGroupEntries.length + newlyInserted.length;\n\n\t\t\t\tconst newlyInsertedEntries = newlyInserted.map(insert => {\n\t\t\t\t\treturn new OutputEntryViewHandler(insert, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, insert));\n\t\t\t\t});\n\n\t\t\t\tthis._outputEntries = [...firstGroupEntries, ...newlyInsertedEntries, ...secondGroupEntries.slice(0, this.options.limit - firstGroupEntries.length - newlyInserted.length)];\n\n\t\t\t\tfor (let i = firstGroupEntries.length; i < reRenderRightBoundary; i++) {\n\t\t\t\t\tconst previousSibling = i - 1 >= 0 && this._outputEntries[i - 1] && !!(this._outputEntries[i - 1].element.innerContainer?.parentElement) ? this._outputEntries[i - 1].element.innerContainer : undefined;\n\t\t\t\t\tthis._outputEntries[i].element.render(previousSibling);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// after splice, it doesn't exceed\n\t\t\tdeletedEntries.forEach(entry => {\n\t\t\t\tentry.element.detach();\n\t\t\t\tentry.element.dispose();\n\t\t\t});\n\n\t\t\tconst reRenderRightBoundary = firstGroupEntries.length + newlyInserted.length;\n\n\t\t\tconst newlyInsertedEntries = newlyInserted.map(insert => {\n\t\t\t\treturn new OutputEntryViewHandler(insert, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, insert));\n\t\t\t});\n\n\t\t\tlet outputsNewlyAvailable: OutputEntryViewHandler[] = [];\n\n\t\t\tif (firstGroupEntries.length + newlyInsertedEntries.length + secondGroupEntries.length < this.viewCell.outputsViewModels.length) {\n\t\t\t\tconst last = Math.min(this.options.limit, this.viewCell.outputsViewModels.length);\n\t\t\t\toutputsNewlyAvailable = this.viewCell.outputsViewModels.slice(firstGroupEntries.length + newlyInsertedEntries.length + secondGroupEntries.length, last).map(output => {\n\t\t\t\t\treturn new OutputEntryViewHandler(output, this.instantiationService.createInstance(CellOutputElement, this.notebookEditor, this.viewCell, this, this.templateData.outputContainer, output));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._outputEntries = [...firstGroupEntries, ...newlyInsertedEntries, ...secondGroupEntries, ...outputsNewlyAvailable];\n\n\t\t\tfor (let i = firstGroupEntries.length; i < reRenderRightBoundary; i++) {\n\t\t\t\tconst previousSibling = i - 1 >= 0 && this._outputEntries[i - 1] && !!(this._outputEntries[i - 1].element.innerContainer?.parentElement) ? this._outputEntries[i - 1].element.innerContainer : undefined;\n\t\t\t\tthis._outputEntries[i].element.render(previousSibling);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < outputsNewlyAvailable.length; i++) {\n\t\t\t\tthis._outputEntries[firstGroupEntries.length + newlyInserted.length + secondGroupEntries.length + i].element.render(undefined);\n\t\t\t}\n\t\t}\n\n\t\tif (this.viewCell.outputsViewModels.length > this.options.limit) {\n\t\t\tDOM.show(this.templateData.outputShowMoreContainer.domNode);\n\t\t\tif (!this.templateData.outputShowMoreContainer.domNode.hasChildNodes()) {\n\t\t\t\tthis.templateData.outputShowMoreContainer.domNode.appendChild(this._generateShowMoreElement(this.templateData.templateDisposables));\n\t\t\t}\n\t\t\tthis.viewCell.updateOutputShowMoreContainerHeight(46);\n\t\t} else {\n\t\t\tDOM.hide(this.templateData.outputShowMoreContainer.domNode);\n\t\t}\n\n\t\tthis._relayoutCell();\n\t\t// if it's clearing all outputs, or outputs are all rendered synchronously\n\t\t// shrink immediately as the final output height will be zero.\n\t\t// if it's rerun, then the output clearing might be temporary, so we don't shrink immediately\n\t\tthis._validateFinalOutputHeight(context === CellOutputUpdateContext.Other && this.viewCell.outputsViewModels.length === 0);\n\t}\n\n\tprivate _generateShowMoreElement(disposables: DisposableStore): HTMLElement {\n\t\tconst md: IMarkdownString = {\n\t\t\tvalue: `There are more than ${this.options.limit} outputs, [show more (open the raw output data in a text editor) ...](command:workbench.action.openLargeOutput)`,\n\t\t\tisTrusted: true,\n\t\t\tsupportThemeIcons: true\n\t\t};\n\n\t\tconst rendered = disposables.add(renderMarkdown(md, {\n\t\t\tactionHandler: (content) => {\n\t\t\t\tif (content === 'command:workbench.action.openLargeOutput') {\n\t\t\t\t\tthis.openerService.open(CellUri.generateCellOutputUriWithId(this.notebookEditor.textModel!.uri));\n\t\t\t\t}\n\t\t\t},\n\t\t}));\n\n\t\trendered.element.classList.add('output-show-more');\n\t\treturn rendered.element;\n\t}\n\n\tprivate _relayoutCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(this.viewCell, this.viewCell.layoutInfo.totalHeight);\n\t}\n\n\toverride dispose() {\n\t\tthis.viewCell.updateOutputMinHeight(0);\n\n\t\tif (this._outputHeightTimer) {\n\t\t\tclearTimeout(this._outputHeightTimer);\n\t\t}\n\n\t\tthis._outputEntries.forEach(entry => {\n\t\t\tentry.element.dispose();\n\t\t});\n\n\t\tsuper.dispose();\n\t}\n}\n\nconst JUPYTER_RENDERER_MIMETYPES = [\n\t'application/geo+json',\n\t'application/vdom.v1+json',\n\t'application/vnd.dataresource+json',\n\t'application/vnd.plotly.v1+json',\n\t'application/vnd.vega.v2+json',\n\t'application/vnd.vega.v3+json',\n\t'application/vnd.vega.v4+json',\n\t'application/vnd.vega.v5+json',\n\t'application/vnd.vegalite.v1+json',\n\t'application/vnd.vegalite.v2+json',\n\t'application/vnd.vegalite.v3+json',\n\t'application/vnd.vegalite.v4+json',\n\t'application/x-nteract-model-debug+json',\n\t'image/svg+xml',\n\t'text/latex',\n\t'text/vnd.plotly.v1+html',\n\t'application/vnd.jupyter.widget-view+json',\n\t'application/vnd.code.notebook.error'\n];\n"]}