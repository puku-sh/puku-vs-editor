{"version":3,"sources":["vs/workbench/contrib/notebook/browser/view/cellParts/markupCell.ts"],"names":[],"mappings":"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","file":"markupCell.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport * as domSanitize from '../../../../../../base/browser/domSanitize.js';\nimport { renderIcon } from '../../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { disposableTimeout, raceCancellation } from '../../../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { Disposable, DisposableStore, MutableDisposable, toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../../../editor/browser/editorBrowser.js';\nimport { CodeEditorWidget } from '../../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { IEditorOptions } from '../../../../../../editor/common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../../../../editor/common/editorContextKeys.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { tokenizeToStringSync } from '../../../../../../editor/common/languages/textToHtmlTokenizer.js';\nimport { IReadonlyTextBuffer } from '../../../../../../editor/common/model.js';\nimport { localize } from '../../../../../../nls.js';\nimport { IAccessibilityService } from '../../../../../../platform/accessibility/common/accessibility.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\nimport { CellEditState, CellFocusMode, CellFoldingState, EXPAND_CELL_INPUT_COMMAND_ID, IActiveNotebookEditorDelegate, ICellViewModel } from '../../notebookBrowser.js';\nimport { collapsedIcon, expandedIcon } from '../../notebookIcons.js';\nimport { CellEditorOptions } from './cellEditorOptions.js';\nimport { collapsedCellTTPolicy, MarkdownCellRenderTemplate } from '../notebookRenderingCommon.js';\nimport { MarkupCellViewModel } from '../../viewModel/markupCellViewModel.js';\nimport { WordHighlighterContribution } from '../../../../../../editor/contrib/wordHighlighter/browser/wordHighlighter.js';\n\nexport class MarkupCell extends Disposable {\n\n\tprivate editor: CodeEditorWidget | null = null;\n\n\tprivate markdownAccessibilityContainer!: HTMLElement;\n\tprivate editorPart: HTMLElement;\n\n\tprivate readonly localDisposables = this._register(new DisposableStore());\n\tprivate readonly focusSwitchDisposable = this._register(new MutableDisposable());\n\tprivate readonly editorDisposables = this._register(new DisposableStore());\n\tprivate foldingState: CellFoldingState;\n\tprivate cellEditorOptions: CellEditorOptions;\n\tprivate editorOptions: IEditorOptions;\n\tprivate _isDisposed: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly notebookEditor: IActiveNotebookEditorDelegate,\n\t\tprivate readonly viewCell: MarkupCellViewModel,\n\t\tprivate readonly templateData: MarkdownCellRenderTemplate,\n\t\tprivate readonly renderedEditors: Map<ICellViewModel, ICodeEditor | undefined>,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IKeybindingService private keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\n\t\tthis.constructDOM();\n\t\tthis.editorPart = templateData.editorPart;\n\t\tthis.cellEditorOptions = this._register(new CellEditorOptions(this.notebookEditor.getBaseCellEditorOptions(viewCell.language), this.notebookEditor.notebookOptions, this.configurationService));\n\t\tthis.cellEditorOptions.setLineNumbers(this.viewCell.lineNumbers);\n\t\tthis.editorOptions = this.cellEditorOptions.getValue(this.viewCell.internalMetadata, this.viewCell.uri);\n\n\t\tthis._register(toDisposable(() => renderedEditors.delete(this.viewCell)));\n\t\tthis.registerListeners();\n\n\t\t// update for init state\n\t\tthis.templateData.cellParts.scheduleRenderCell(this.viewCell);\n\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.templateData.cellParts.unrenderCell(this.viewCell);\n\t\t}));\n\n\t\tthis._register(this.accessibilityService.onDidChangeScreenReaderOptimized(() => {\n\t\t\tthis.viewUpdate();\n\t\t}));\n\n\t\tthis.updateForHover();\n\t\tthis.updateForFocusModeChange();\n\t\tthis.foldingState = viewCell.foldingState;\n\t\tthis.layoutFoldingIndicator();\n\t\tthis.updateFoldingIconShowClass();\n\n\t\t// the markdown preview's height might already be updated after the renderer calls `element.getHeight()`\n\t\tif (this.viewCell.layoutInfo.totalHeight > 0) {\n\t\t\tthis.relayoutCell();\n\t\t}\n\n\t\tthis.viewUpdate();\n\n\t\tthis.layoutCellParts();\n\t\tthis._register(this.viewCell.onDidChangeLayout(() => {\n\t\t\tthis.layoutCellParts();\n\t\t}));\n\t}\n\n\tlayoutCellParts() {\n\t\tthis.templateData.cellParts.updateInternalLayoutNow(this.viewCell);\n\t}\n\n\tprivate constructDOM() {\n\t\t// Create an element that is only used to announce markup cell content to screen readers\n\t\tconst id = `aria-markup-cell-${this.viewCell.id}`;\n\t\tthis.markdownAccessibilityContainer = this.templateData.cellContainer;\n\t\tthis.markdownAccessibilityContainer.id = id;\n\t\t// Hide the element from non-screen readers\n\t\tthis.markdownAccessibilityContainer.style.height = '1px';\n\t\tthis.markdownAccessibilityContainer.style.overflow = 'hidden';\n\t\tthis.markdownAccessibilityContainer.style.position = 'absolute';\n\t\tthis.markdownAccessibilityContainer.style.top = '100000px';\n\t\tthis.markdownAccessibilityContainer.style.left = '10000px';\n\t\tthis.markdownAccessibilityContainer.ariaHidden = 'false';\n\n\t\tthis.templateData.rootContainer.setAttribute('aria-describedby', id);\n\t\tthis.templateData.container.classList.toggle('webview-backed-markdown-cell', true);\n\t}\n\n\tprivate registerListeners() {\n\t\tthis._register(this.viewCell.onDidChangeState(e => {\n\t\t\tthis.templateData.cellParts.updateState(this.viewCell, e);\n\t\t}));\n\n\t\tthis._register(this.viewCell.model.onDidChangeMetadata(() => {\n\t\t\tthis.viewUpdate();\n\t\t}));\n\n\t\tthis._register(this.viewCell.onDidChangeState((e) => {\n\t\t\tif (e.editStateChanged || e.contentChanged) {\n\t\t\t\tthis.viewUpdate();\n\t\t\t}\n\n\t\t\tif (e.focusModeChanged) {\n\t\t\t\tthis.updateForFocusModeChange();\n\t\t\t}\n\n\t\t\tif (e.foldingStateChanged) {\n\t\t\t\tconst foldingState = this.viewCell.foldingState;\n\n\t\t\t\tif (foldingState !== this.foldingState) {\n\t\t\t\t\tthis.foldingState = foldingState;\n\t\t\t\t\tthis.layoutFoldingIndicator();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.cellIsHoveredChanged) {\n\t\t\t\tthis.updateForHover();\n\t\t\t}\n\n\t\t\tif (e.inputCollapsedChanged) {\n\t\t\t\tthis.updateCollapsedState();\n\t\t\t\tthis.viewUpdate();\n\t\t\t}\n\n\t\t\tif (e.cellLineNumberChanged) {\n\t\t\t\tthis.cellEditorOptions.setLineNumbers(this.viewCell.lineNumbers);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.notebookEditor.notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.showFoldingControls) {\n\t\t\t\tthis.updateFoldingIconShowClass();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.viewCell.onDidChangeLayout((e) => {\n\t\t\tconst layoutInfo = this.editor?.getLayoutInfo();\n\t\t\tif (e.outerWidth && this.viewCell.getEditState() === CellEditState.Editing && layoutInfo && layoutInfo.width !== this.viewCell.layoutInfo.editorWidth) {\n\t\t\t\tthis.onCellEditorWidthChange();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.cellEditorOptions.onDidChange(() => this.updateMarkupCellOptions()));\n\t}\n\n\tprivate updateMarkupCellOptions(): void {\n\t\tthis.updateEditorOptions(this.cellEditorOptions.getUpdatedValue(this.viewCell.internalMetadata, this.viewCell.uri));\n\n\t\tif (this.editor) {\n\t\t\tthis.editor.updateOptions(this.cellEditorOptions.getUpdatedValue(this.viewCell.internalMetadata, this.viewCell.uri));\n\n\t\t\tconst cts = new CancellationTokenSource();\n\t\t\tthis._register({ dispose() { cts.dispose(true); } });\n\t\t\traceCancellation(this.viewCell.resolveTextModel(), cts.token).then(model => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (model) {\n\t\t\t\t\tmodel.updateOptions({\n\t\t\t\t\t\tindentSize: this.cellEditorOptions.indentSize,\n\t\t\t\t\t\ttabSize: this.cellEditorOptions.tabSize,\n\t\t\t\t\t\tinsertSpaces: this.cellEditorOptions.insertSpaces,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate updateCollapsedState() {\n\t\tif (this.viewCell.isInputCollapsed) {\n\t\t\tthis.notebookEditor.hideMarkupPreviews([this.viewCell]);\n\t\t} else {\n\t\t\tthis.notebookEditor.unhideMarkupPreviews([this.viewCell]);\n\t\t}\n\t}\n\n\tprivate updateForHover(): void {\n\t\tthis.templateData.container.classList.toggle('markdown-cell-hover', this.viewCell.cellIsHovered);\n\t}\n\n\tprivate updateForFocusModeChange() {\n\t\tif (this.viewCell.focusMode === CellFocusMode.Editor) {\n\t\t\tthis.focusEditorIfNeeded();\n\t\t}\n\n\t\tthis.templateData.container.classList.toggle('cell-editor-focus', this.viewCell.focusMode === CellFocusMode.Editor);\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\n\t\t// move focus back to the cell list otherwise the focus goes to body\n\t\tif (this.notebookEditor.getActiveCell() === this.viewCell && this.viewCell.focusMode === CellFocusMode.Editor && (this.notebookEditor.hasEditorFocus() || this.notebookEditor.getDomNode().ownerDocument.activeElement === this.notebookEditor.getDomNode().ownerDocument.body)) {\n\t\t\tthis.notebookEditor.focusContainer();\n\t\t}\n\n\t\tthis.viewCell.detachTextEditor();\n\t\tsuper.dispose();\n\t}\n\n\tprivate updateFoldingIconShowClass() {\n\t\tconst showFoldingIcon = this.notebookEditor.notebookOptions.getDisplayOptions().showFoldingControls;\n\t\tthis.templateData.foldingIndicator.classList.remove('mouseover', 'always');\n\t\tthis.templateData.foldingIndicator.classList.add(showFoldingIcon);\n\t}\n\n\tprivate viewUpdate(): void {\n\t\tif (this.viewCell.isInputCollapsed) {\n\t\t\tthis.viewUpdateCollapsed();\n\t\t} else if (this.viewCell.getEditState() === CellEditState.Editing) {\n\t\t\tthis.viewUpdateEditing();\n\t\t} else {\n\t\t\tthis.viewUpdatePreview();\n\t\t}\n\t}\n\n\tprivate viewUpdateCollapsed(): void {\n\t\tDOM.show(this.templateData.cellInputCollapsedContainer);\n\t\tDOM.hide(this.editorPart);\n\n\t\tthis.templateData.cellInputCollapsedContainer.innerText = '';\n\n\t\tconst markdownIcon = DOM.append(this.templateData.cellInputCollapsedContainer, DOM.$('span'));\n\t\tmarkdownIcon.classList.add(...ThemeIcon.asClassNameArray(Codicon.markdown));\n\n\t\tconst element = DOM.$('div');\n\t\telement.classList.add('cell-collapse-preview');\n\t\tconst richEditorText = this.getRichText(this.viewCell.textBuffer, this.viewCell.language);\n\t\telement.innerText = richEditorText;\n\t\telement.innerHTML = (collapsedCellTTPolicy?.createHTML(richEditorText) ?? richEditorText) as string;\n\t\tthis.templateData.cellInputCollapsedContainer.appendChild(element);\n\n\t\tconst expandIcon = DOM.append(element, DOM.$('span.expandInputIcon'));\n\t\texpandIcon.classList.add(...ThemeIcon.asClassNameArray(Codicon.more));\n\t\tconst keybinding = this.keybindingService.lookupKeybinding(EXPAND_CELL_INPUT_COMMAND_ID);\n\t\tif (keybinding) {\n\t\t\telement.title = localize('cellExpandInputButtonLabelWithDoubleClick', \"Double-click to expand cell input ({0})\", keybinding.getLabel());\n\t\t\texpandIcon.title = localize('cellExpandInputButtonLabel', \"Expand Cell Input ({0})\", keybinding.getLabel());\n\t\t}\n\n\t\tthis.markdownAccessibilityContainer.ariaHidden = 'true';\n\n\t\tthis.templateData.container.classList.toggle('input-collapsed', true);\n\t\tthis.viewCell.renderedMarkdownHeight = 0;\n\t\tthis.viewCell.layoutChange({});\n\t}\n\n\n\tprivate getRichText(buffer: IReadonlyTextBuffer, language: string) {\n\t\treturn tokenizeToStringSync(this.languageService, buffer.getLineContent(1), language);\n\t}\n\n\tprivate viewUpdateEditing(): void {\n\t\t// switch to editing mode\n\t\tlet editorHeight: number;\n\n\t\tDOM.show(this.editorPart);\n\t\tthis.markdownAccessibilityContainer.ariaHidden = 'true';\n\t\tDOM.hide(this.templateData.cellInputCollapsedContainer);\n\n\t\tthis.notebookEditor.hideMarkupPreviews([this.viewCell]);\n\n\t\tthis.templateData.container.classList.toggle('input-collapsed', false);\n\t\tthis.templateData.container.classList.toggle('markdown-cell-edit-mode', true);\n\n\t\tif (this.editor && this.editor.hasModel()) {\n\t\t\teditorHeight = this.editor.getContentHeight();\n\n\t\t\t// not first time, we don't need to create editor\n\t\t\tthis.viewCell.attachTextEditor(this.editor);\n\t\t\tthis.focusEditorIfNeeded();\n\n\t\t\tthis.bindEditorListeners(this.editor);\n\n\t\t\tthis.editor.layout({\n\t\t\t\twidth: this.viewCell.layoutInfo.editorWidth,\n\t\t\t\theight: editorHeight\n\t\t\t});\n\t\t} else {\n\t\t\tthis.editorDisposables.clear();\n\t\t\tconst width = this.notebookEditor.notebookOptions.computeMarkdownCellEditorWidth(this.notebookEditor.getLayoutInfo().width);\n\t\t\tconst lineNum = this.viewCell.lineCount;\n\t\t\tconst lineHeight = this.viewCell.layoutInfo.fontInfo?.lineHeight || 17;\n\t\t\tconst editorPadding = this.notebookEditor.notebookOptions.computeEditorPadding(this.viewCell.internalMetadata, this.viewCell.uri);\n\t\t\teditorHeight = Math.max(lineNum, 1) * lineHeight + editorPadding.top + editorPadding.bottom;\n\n\t\t\tthis.templateData.editorContainer.innerText = '';\n\n\t\t\t// create a special context key service that set the inCompositeEditor-contextkey\n\t\t\tconst editorContextKeyService = this.contextKeyService.createScoped(this.templateData.editorPart);\n\t\t\tEditorContextKeys.inCompositeEditor.bindTo(editorContextKeyService).set(true);\n\t\t\tconst editorInstaService = this.editorDisposables.add(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, editorContextKeyService])));\n\t\t\tthis.editorDisposables.add(editorContextKeyService);\n\n\t\t\tthis.editor = this.editorDisposables.add(editorInstaService.createInstance(CodeEditorWidget, this.templateData.editorContainer, {\n\t\t\t\t...this.editorOptions,\n\t\t\t\tdimension: {\n\t\t\t\t\twidth: width,\n\t\t\t\t\theight: editorHeight\n\t\t\t\t},\n\t\t\t\tallowVariableLineHeights: false,\n\t\t\t\t// overflowWidgetsDomNode: this.notebookEditor.getOverflowContainerDomNode()\n\t\t\t}, {\n\t\t\t\tcontributions: this.notebookEditor.creationOptions.cellEditorContributions\n\t\t\t}));\n\t\t\tthis.templateData.currentEditor = this.editor;\n\t\t\tthis.editorDisposables.add(this.editor.onDidBlurEditorWidget(() => {\n\t\t\t\tif (this.editor) {\n\t\t\t\t\tWordHighlighterContribution.get(this.editor)?.stopHighlighting();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.editorDisposables.add(this.editor.onDidFocusEditorWidget(() => {\n\t\t\t\tif (this.editor) {\n\t\t\t\t\tWordHighlighterContribution.get(this.editor)?.restoreViewState(true);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tconst cts = new CancellationTokenSource();\n\t\t\tthis.editorDisposables.add({ dispose() { cts.dispose(true); } });\n\t\t\traceCancellation(this.viewCell.resolveTextModel(), cts.token).then(model => {\n\t\t\t\tif (!model) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.editor!.setModel(model);\n\t\t\t\tmodel.updateOptions({\n\t\t\t\t\tindentSize: this.cellEditorOptions.indentSize,\n\t\t\t\t\ttabSize: this.cellEditorOptions.tabSize,\n\t\t\t\t\tinsertSpaces: this.cellEditorOptions.insertSpaces,\n\t\t\t\t});\n\n\t\t\t\tconst realContentHeight = this.editor!.getContentHeight();\n\t\t\t\tif (realContentHeight !== editorHeight) {\n\t\t\t\t\tthis.editor!.layout(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\t\theight: realContentHeight\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\teditorHeight = realContentHeight;\n\t\t\t\t}\n\n\t\t\t\tthis.viewCell.attachTextEditor(this.editor!);\n\n\t\t\t\tif (this.viewCell.getEditState() === CellEditState.Editing) {\n\t\t\t\t\tthis.focusEditorIfNeeded();\n\t\t\t\t}\n\n\t\t\t\tthis.bindEditorListeners(this.editor!);\n\n\t\t\t\tthis.viewCell.editorHeight = editorHeight;\n\t\t\t});\n\t\t}\n\n\t\tthis.viewCell.editorHeight = editorHeight;\n\t\tthis.focusEditorIfNeeded();\n\t\tthis.renderedEditors.set(this.viewCell, this.editor);\n\t}\n\n\tprivate viewUpdatePreview(): void {\n\t\tthis.viewCell.detachTextEditor();\n\t\tDOM.hide(this.editorPart);\n\t\tDOM.hide(this.templateData.cellInputCollapsedContainer);\n\t\tthis.markdownAccessibilityContainer.ariaHidden = 'false';\n\t\tthis.templateData.container.classList.toggle('input-collapsed', false);\n\t\tthis.templateData.container.classList.toggle('markdown-cell-edit-mode', false);\n\n\t\tthis.renderedEditors.delete(this.viewCell);\n\n\t\tthis.markdownAccessibilityContainer.innerText = '';\n\t\tif (this.viewCell.renderedHtml) {\n\t\t\tif (this.accessibilityService.isScreenReaderOptimized()) {\n\t\t\t\tdomSanitize.safeSetInnerHtml(this.markdownAccessibilityContainer, this.viewCell.renderedHtml);\n\t\t\t} else {\n\t\t\t\tDOM.clearNode(this.markdownAccessibilityContainer);\n\t\t\t}\n\t\t}\n\n\t\tthis.notebookEditor.createMarkupPreview(this.viewCell);\n\t}\n\n\tprivate focusEditorIfNeeded() {\n\t\tif (this.viewCell.focusMode === CellFocusMode.Editor &&\n\t\t\t(this.notebookEditor.hasEditorFocus() || this.notebookEditor.getDomNode().ownerDocument.activeElement === this.notebookEditor.getDomNode().ownerDocument.body)\n\t\t) { // Don't steal focus from other workbench parts, but if body has focus, we can take it\n\t\t\tif (!this.editor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.editor.focus();\n\n\t\t\tconst primarySelection = this.editor.getSelection();\n\t\t\tif (!primarySelection) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.notebookEditor.revealRangeInViewAsync(this.viewCell, primarySelection);\n\t\t}\n\t}\n\n\tprivate layoutEditor(dimension: DOM.IDimension): void {\n\t\tthis.editor?.layout(dimension);\n\t}\n\n\tprivate onCellEditorWidthChange(): void {\n\t\tconst realContentHeight = this.editor!.getContentHeight();\n\t\tthis.layoutEditor(\n\t\t\t{\n\t\t\t\twidth: this.viewCell.layoutInfo.editorWidth,\n\t\t\t\theight: realContentHeight\n\t\t\t}\n\t\t);\n\n\t\t// LET the content size observer to handle it\n\t\t// this.viewCell.editorHeight = realContentHeight;\n\t\t// this.relayoutCell();\n\t}\n\n\trelayoutCell(): void {\n\t\tthis.notebookEditor.layoutNotebookCell(this.viewCell, this.viewCell.layoutInfo.totalHeight);\n\t\tthis.layoutFoldingIndicator();\n\t}\n\n\tupdateEditorOptions(newValue: IEditorOptions): void {\n\t\tthis.editorOptions = newValue;\n\t\tthis.editor?.updateOptions(this.editorOptions);\n\t}\n\n\tprivate layoutFoldingIndicator() {\n\t\tswitch (this.foldingState) {\n\t\t\tcase CellFoldingState.None:\n\t\t\t\tthis.templateData.foldingIndicator.style.display = 'none';\n\t\t\t\tthis.templateData.foldingIndicator.innerText = '';\n\t\t\t\tbreak;\n\t\t\tcase CellFoldingState.Collapsed:\n\t\t\t\tthis.templateData.foldingIndicator.style.display = '';\n\t\t\t\tDOM.reset(this.templateData.foldingIndicator, renderIcon(collapsedIcon));\n\t\t\t\tbreak;\n\t\t\tcase CellFoldingState.Expanded:\n\t\t\t\tthis.templateData.foldingIndicator.style.display = '';\n\t\t\t\tDOM.reset(this.templateData.foldingIndicator, renderIcon(expandedIcon));\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate bindEditorListeners(editor: CodeEditorWidget) {\n\n\t\tthis.localDisposables.clear();\n\t\tthis.focusSwitchDisposable.clear();\n\n\t\tthis.localDisposables.add(editor.onDidContentSizeChange(e => {\n\t\t\tif (e.contentHeightChanged) {\n\t\t\t\tthis.onCellEditorHeightChange(editor, e.contentHeight);\n\t\t\t}\n\t\t}));\n\n\t\tthis.localDisposables.add(editor.onDidChangeCursorSelection((e) => {\n\t\t\tif (e.source === 'restoreState') {\n\t\t\t\t// do not reveal the cell into view if this selection change was caused by restoring editors...\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selections = editor.getSelections();\n\n\t\t\tif (selections?.length) {\n\t\t\t\tconst contentHeight = editor.getContentHeight();\n\t\t\t\tconst layoutContentHeight = this.viewCell.layoutInfo.editorHeight;\n\n\t\t\t\tif (contentHeight !== layoutContentHeight) {\n\t\t\t\t\tthis.onCellEditorHeightChange(editor, contentHeight);\n\t\t\t\t}\n\t\t\t\tconst lastSelection = selections[selections.length - 1];\n\t\t\t\tthis.notebookEditor.revealRangeInViewAsync(this.viewCell, lastSelection);\n\t\t\t}\n\t\t}));\n\n\t\tconst updateFocusMode = () => this.viewCell.focusMode = editor.hasWidgetFocus() ? CellFocusMode.Editor : CellFocusMode.Container;\n\t\tthis.localDisposables.add(editor.onDidFocusEditorWidget(() => {\n\t\t\tupdateFocusMode();\n\t\t}));\n\n\t\tthis.localDisposables.add(editor.onDidBlurEditorWidget(() => {\n\t\t\t// this is for a special case:\n\t\t\t// users click the status bar empty space, which we will then focus the editor\n\t\t\t// so we don't want to update the focus state too eagerly\n\t\t\tif (this.templateData.container.ownerDocument.activeElement?.contains(this.templateData.container)) {\n\t\t\t\tthis.focusSwitchDisposable.value = disposableTimeout(() => updateFocusMode(), 300);\n\t\t\t} else {\n\t\t\t\tupdateFocusMode();\n\t\t\t}\n\t\t}));\n\n\t\tupdateFocusMode();\n\t}\n\n\tprivate onCellEditorHeightChange(editor: CodeEditorWidget, newHeight: number): void {\n\t\tconst viewLayout = editor.getLayoutInfo();\n\t\tthis.viewCell.editorHeight = newHeight;\n\t\teditor.layout(\n\t\t\t{\n\t\t\t\twidth: viewLayout.width,\n\t\t\t\theight: newHeight\n\t\t\t}\n\t\t);\n\t}\n}\n"]}