{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/notebookAccessibleView.ts","vs/workbench/contrib/notebook/browser/notebookAccessibleView.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAChG,OAAO,EAAgD,yBAAyB,EAAE,MAAM,8DAA8D,CAAC;AAEvJ,OAAO,EAAE,cAAc,EAAE,MAAM,sDAAsD,CAAC;AAGtF,OAAO,EAAE,+BAA+B,EAAE,MAAM,sBAAsB,CAAC;AACvE,OAAO,EAAE,0BAA0B,EAAE,MAAM,kCAAkC,CAAC;AAC9E,OAAO,EAAE,cAAc,EAAE,MAAM,kDAAkD,CAAC;AAClF,OAAO,EAAE,mBAAmB,EAAE,MAAM,uDAAuD,CAAC;AAC5F,OAAO,EAAE,iBAAiB,EAAE,MAAM,qCAAqC,CAAC;AAExE,MAAM,OAAO,sBAAsB;IAAnC;QACU,aAAQ,GAAG,GAAG,CAAC;QACf,SAAI,GAAG,UAAU,CAAC;QAClB,SAAI,wCAA2B;QAC/B,SAAI,GAAG,cAAc,CAAC,GAAG,CAAC,0BAA0B,EAAE,mBAAmB,CAAC,SAAS,EAAE,CAAC,CAAC;IAKjG,CAAC;IAJA,WAAW,CAAC,QAA0B;QACrC,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QACnD,OAAO,2BAA2B,CAAC,aAAa,CAAC,CAAC;IACnD,CAAC;CACD;AAED,MAAM,UAAU,2BAA2B,CAAC,aAA6B;IACxE,MAAM,UAAU,GAAG,aAAa,CAAC,gBAAgB,CAAC;IAClD,MAAM,cAAc,GAAG,+BAA+B,CAAC,UAAU,CAAC,CAAC;IACnE,MAAM,iBAAiB,GAAG,cAAc,EAAE,YAAY,EAAE,CAAC;IACzD,MAAM,UAAU,GAAG,iBAAiB,EAAE,aAAa,EAAE,CAAC;IACtD,MAAM,gBAAgB,GAAG,iBAAiB,EAAE,gBAAgB,CAAC;IAE7D,IAAI,CAAC,UAAU,IAAI,CAAC,gBAAgB,IAAI,CAAC,cAAc,EAAE,SAAS,EAAE,CAAC;QACpE,OAAO;IACR,CAAC;IAED,MAAM,QAAQ,GAAG,iBAAiB,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAClE,MAAM,aAAa,GAAG,iBAAiB,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC;IAEpE,IAAI,CAAC,aAAa,EAAE,CAAC;QACpB,OAAO;IACR,CAAC;IAED,OAAO,IAAI,yBAAyB,qDAEnC,EAAE,IAAI,sCAAyB,EAAE,EACjC,GAAG,EAAE,GAAG,OAAO,aAAa,CAAC,CAAC,CAAC,EAC/B,GAAG,EAAE;QACJ,cAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QACxC,cAAc,CAAC,KAAK,EAAE,CAAC;IACxB,CAAC,oFAED,CAAC;AACH,CAAC","file":"notebookAccessibleView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AccessibleViewProviderId, AccessibleViewType, AccessibleContentProvider } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { getNotebookEditorFromEditorPane } from './notebookBrowser.js';\nimport { NOTEBOOK_CELL_LIST_FOCUSED } from '../common/notebookContextKeys.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { InputFocusedContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { getAllOutputsText } from './viewModel/cellOutputTextHelper.js';\n\nexport class NotebookAccessibleView implements IAccessibleViewImplementation {\n\treadonly priority = 100;\n\treadonly name = 'notebook';\n\treadonly type = AccessibleViewType.View;\n\treadonly when = ContextKeyExpr.and(NOTEBOOK_CELL_LIST_FOCUSED, InputFocusedContext.toNegated());\n\tgetProvider(accessor: ServicesAccessor) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\treturn getAccessibleOutputProvider(editorService);\n\t}\n}\n\nexport function getAccessibleOutputProvider(editorService: IEditorService) {\n\tconst activePane = editorService.activeEditorPane;\n\tconst notebookEditor = getNotebookEditorFromEditorPane(activePane);\n\tconst notebookViewModel = notebookEditor?.getViewModel();\n\tconst selections = notebookViewModel?.getSelections();\n\tconst notebookDocument = notebookViewModel?.notebookDocument;\n\n\tif (!selections || !notebookDocument || !notebookEditor?.textModel) {\n\t\treturn;\n\t}\n\n\tconst viewCell = notebookViewModel.viewCells[selections[0].start];\n\tconst outputContent = getAllOutputsText(notebookDocument, viewCell);\n\n\tif (!outputContent) {\n\t\treturn;\n\t}\n\n\treturn new AccessibleContentProvider(\n\t\tAccessibleViewProviderId.Notebook,\n\t\t{ type: AccessibleViewType.View },\n\t\t() => { return outputContent; },\n\t\t() => {\n\t\t\tnotebookEditor?.setFocus(selections[0]);\n\t\t\tnotebookEditor.focus();\n\t\t},\n\t\tAccessibilityVerbositySettingId.Notebook,\n\t);\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AccessibleViewProviderId, AccessibleViewType, AccessibleContentProvider } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { getNotebookEditorFromEditorPane } from './notebookBrowser.js';\nimport { NOTEBOOK_CELL_LIST_FOCUSED } from '../common/notebookContextKeys.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { InputFocusedContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { getAllOutputsText } from './viewModel/cellOutputTextHelper.js';\n\nexport class NotebookAccessibleView implements IAccessibleViewImplementation {\n\treadonly priority = 100;\n\treadonly name = 'notebook';\n\treadonly type = AccessibleViewType.View;\n\treadonly when = ContextKeyExpr.and(NOTEBOOK_CELL_LIST_FOCUSED, InputFocusedContext.toNegated());\n\tgetProvider(accessor: ServicesAccessor) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\treturn getAccessibleOutputProvider(editorService);\n\t}\n}\n\nexport function getAccessibleOutputProvider(editorService: IEditorService) {\n\tconst activePane = editorService.activeEditorPane;\n\tconst notebookEditor = getNotebookEditorFromEditorPane(activePane);\n\tconst notebookViewModel = notebookEditor?.getViewModel();\n\tconst selections = notebookViewModel?.getSelections();\n\tconst notebookDocument = notebookViewModel?.notebookDocument;\n\n\tif (!selections || !notebookDocument || !notebookEditor?.textModel) {\n\t\treturn;\n\t}\n\n\tconst viewCell = notebookViewModel.viewCells[selections[0].start];\n\tconst outputContent = getAllOutputsText(notebookDocument, viewCell);\n\n\tif (!outputContent) {\n\t\treturn;\n\t}\n\n\treturn new AccessibleContentProvider(\n\t\tAccessibleViewProviderId.Notebook,\n\t\t{ type: AccessibleViewType.View },\n\t\t() => { return outputContent; },\n\t\t() => {\n\t\t\tnotebookEditor?.setFocus(selections[0]);\n\t\t\tnotebookEditor.focus();\n\t\t},\n\t\tAccessibilityVerbositySettingId.Notebook,\n\t);\n}\n\n"]}