{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/viewModel/markupCellViewModel.ts","vs/workbench/contrib/notebook/browser/viewModel/markupCellViewModel.ts"],"names":[],"mappings":"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","file":"markupCellViewModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport * as UUID from '../../../../../base/common/uuid.js';\nimport * as editorCommon from '../../../../../editor/common/editorCommon.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { CellEditState, CellFindMatch, CellFoldingState, CellLayoutContext, CellLayoutState, EditorFoldingStateDelegate, ICellOutputViewModel, ICellViewModel, MarkupCellLayoutChangeEvent, MarkupCellLayoutInfo } from '../notebookBrowser.js';\nimport { BaseCellViewModel } from './baseCellViewModel.js';\nimport { NotebookCellTextModel } from '../../common/model/notebookCellTextModel.js';\nimport { CellKind, INotebookFindOptions } from '../../common/notebookCommon.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { ViewContext } from './viewContext.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { NotebookOptionsChangeEvent } from '../notebookOptions.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { NotebookCellStateChangedEvent, NotebookLayoutInfo } from '../notebookViewEvents.js';\nimport { IInlineChatSessionService } from '../../../inlineChat/browser/inlineChatSessionService.js';\n\nexport class MarkupCellViewModel extends BaseCellViewModel implements ICellViewModel {\n\n\treadonly cellKind = CellKind.Markup;\n\n\tprivate _layoutInfo: MarkupCellLayoutInfo;\n\n\tprivate _renderedHtml?: string;\n\n\tpublic get renderedHtml(): string | undefined { return this._renderedHtml; }\n\tpublic set renderedHtml(value: string | undefined) {\n\t\tif (this._renderedHtml !== value) {\n\t\t\tthis._renderedHtml = value;\n\t\t\tthis._onDidChangeState.fire({ contentChanged: true });\n\t\t}\n\t}\n\n\tget layoutInfo() {\n\t\treturn this._layoutInfo;\n\t}\n\n\tprivate _previewHeight = 0;\n\n\tset renderedMarkdownHeight(newHeight: number) {\n\t\tthis._previewHeight = newHeight;\n\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t}\n\n\tprivate _chatHeight = 0;\n\n\tset chatHeight(newHeight: number) {\n\t\tthis._chatHeight = newHeight;\n\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t}\n\n\tget chatHeight() {\n\t\treturn this._chatHeight;\n\t}\n\n\tprivate _editorHeight = 0;\n\tprivate _statusBarHeight = 0;\n\tset editorHeight(newHeight: number) {\n\t\tthis._editorHeight = newHeight;\n\t\tthis._statusBarHeight = this.viewContext.notebookOptions.computeStatusBarHeight();\n\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t}\n\n\tget editorHeight() {\n\t\tthrow new Error('MarkdownCellViewModel.editorHeight is write only');\n\t}\n\n\tprotected readonly _onDidChangeLayout = this._register(new Emitter<MarkupCellLayoutChangeEvent>());\n\treadonly onDidChangeLayout = this._onDidChangeLayout.event;\n\n\tget foldingState() {\n\t\treturn this.foldingDelegate.getFoldingState(this.foldingDelegate.getCellIndex(this));\n\t}\n\n\tprivate _hoveringOutput: boolean = false;\n\tpublic get outputIsHovered(): boolean {\n\t\treturn this._hoveringOutput;\n\t}\n\n\tpublic set outputIsHovered(v: boolean) {\n\t\tthis._hoveringOutput = v;\n\t}\n\n\tprivate _focusOnOutput: boolean = false;\n\tpublic get outputIsFocused(): boolean {\n\t\treturn this._focusOnOutput;\n\t}\n\n\tpublic set outputIsFocused(v: boolean) {\n\t\tthis._focusOnOutput = v;\n\t}\n\n\tpublic get inputInOutputIsFocused(): boolean {\n\t\treturn false;\n\t}\n\n\tpublic set inputInOutputIsFocused(_: boolean) {\n\t\t//\n\t}\n\n\tprivate _hoveringCell = false;\n\tpublic get cellIsHovered(): boolean {\n\t\treturn this._hoveringCell;\n\t}\n\n\tpublic set cellIsHovered(v: boolean) {\n\t\tthis._hoveringCell = v;\n\t\tthis._onDidChangeState.fire({ cellIsHoveredChanged: true });\n\t}\n\n\tconstructor(\n\t\tviewType: string,\n\t\tmodel: NotebookCellTextModel,\n\t\tinitialNotebookLayoutInfo: NotebookLayoutInfo | null,\n\t\treadonly foldingDelegate: EditorFoldingStateDelegate,\n\t\treadonly viewContext: ViewContext,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IUndoRedoService undoRedoService: IUndoRedoService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IInlineChatSessionService inlineChatSessionService: IInlineChatSessionService\n\t) {\n\t\tsuper(viewType, model, UUID.generateUuid(), viewContext, configurationService, textModelService, undoRedoService, codeEditorService, inlineChatSessionService);\n\n\t\tconst { bottomToolbarGap } = this.viewContext.notebookOptions.computeBottomToolbarDimensions(this.viewType);\n\t\tconst layoutConfiguration = this.viewContext.notebookOptions.getLayoutConfiguration();\n\t\tthis._layoutInfo = {\n\t\t\tchatHeight: 0,\n\t\t\teditorHeight: 0,\n\t\t\tpreviewHeight: 0,\n\t\t\tfontInfo: initialNotebookLayoutInfo?.fontInfo || null,\n\t\t\teditorWidth: initialNotebookLayoutInfo?.width\n\t\t\t\t? this.viewContext.notebookOptions.computeMarkdownCellEditorWidth(initialNotebookLayoutInfo.width)\n\t\t\t\t: 0,\n\t\t\tcommentOffset: 0,\n\t\t\tcommentHeight: 0,\n\t\t\tbottomToolbarOffset: bottomToolbarGap,\n\t\t\ttotalHeight: 100,\n\t\t\tlayoutState: CellLayoutState.Uninitialized,\n\t\t\tfoldHintHeight: 0,\n\t\t\tstatusBarHeight: 0,\n\t\t\toutlineWidth: 1,\n\t\t\tbottomMargin: layoutConfiguration.markdownCellBottomMargin,\n\t\t\ttopMargin: layoutConfiguration.markdownCellTopMargin,\n\t\t};\n\n\t\tthis._register(this.onDidChangeState(e => {\n\t\t\tthis.viewContext.eventDispatcher.emit([new NotebookCellStateChangedEvent(e, this.model)]);\n\n\t\t\tif (e.foldingStateChanged) {\n\t\t\t\tthis._updateTotalHeight(this._computeTotalHeight(), CellLayoutContext.Fold);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _computeTotalHeight(): number {\n\t\tconst layoutConfiguration = this.viewContext.notebookOptions.getLayoutConfiguration();\n\t\tconst { bottomToolbarGap } = this.viewContext.notebookOptions.computeBottomToolbarDimensions(this.viewType);\n\t\tconst foldHintHeight = this._computeFoldHintHeight();\n\n\t\tif (this.getEditState() === CellEditState.Editing) {\n\t\t\treturn this._editorHeight\n\t\t\t\t+ layoutConfiguration.markdownCellTopMargin\n\t\t\t\t+ layoutConfiguration.markdownCellBottomMargin\n\t\t\t\t+ bottomToolbarGap\n\t\t\t\t+ this._statusBarHeight\n\t\t\t\t+ this._commentHeight;\n\t\t} else {\n\t\t\t// @rebornix\n\t\t\t// On file open, the previewHeight + bottomToolbarGap for a cell out of viewport can be 0\n\t\t\t// When it's 0, the list view will never try to render it anymore even if we scroll the cell into view.\n\t\t\t// Thus we make sure it's greater than 0\n\t\t\treturn Math.max(1, this._previewHeight + bottomToolbarGap + foldHintHeight + this._commentHeight);\n\t\t}\n\t}\n\n\tprivate _computeFoldHintHeight(): number {\n\t\treturn (this.getEditState() === CellEditState.Editing || this.foldingState !== CellFoldingState.Collapsed) ?\n\t\t\t0 : this.viewContext.notebookOptions.getLayoutConfiguration().markdownFoldHintHeight;\n\t}\n\n\toverride updateOptions(e: NotebookOptionsChangeEvent) {\n\t\tsuper.updateOptions(e);\n\t\tif (e.cellStatusBarVisibility || e.insertToolbarPosition || e.cellToolbarLocation) {\n\t\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t\t}\n\t}\n\n\t/**\n\t * we put outputs stuff here to make compiler happy\n\t */\n\toutputsViewModels: ICellOutputViewModel[] = [];\n\tgetOutputOffset(index: number): number {\n\t\t// throw new Error('Method not implemented.');\n\t\treturn -1;\n\t}\n\tupdateOutputHeight(index: number, height: number): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\ttriggerFoldingStateChange() {\n\t\tthis._onDidChangeState.fire({ foldingStateChanged: true });\n\t}\n\n\tprivate _updateTotalHeight(newHeight: number, context?: CellLayoutContext) {\n\t\tif (newHeight !== this.layoutInfo.totalHeight) {\n\t\t\tthis.layoutChange({ totalHeight: newHeight, context });\n\t\t}\n\t}\n\n\tlayoutChange(state: MarkupCellLayoutChangeEvent) {\n\t\tlet totalHeight: number;\n\t\tlet foldHintHeight: number;\n\t\tif (!this.isInputCollapsed) {\n\t\t\ttotalHeight = state.totalHeight === undefined ?\n\t\t\t\t(this._layoutInfo.layoutState ===\n\t\t\t\t\tCellLayoutState.Uninitialized ?\n\t\t\t\t\t100 :\n\t\t\t\t\tthis._layoutInfo.totalHeight) :\n\t\t\t\tstate.totalHeight;\n\t\t\t// recompute\n\t\t\tfoldHintHeight = this._computeFoldHintHeight();\n\t\t} else {\n\t\t\ttotalHeight =\n\t\t\t\tthis.viewContext.notebookOptions\n\t\t\t\t\t.computeCollapsedMarkdownCellHeight(this.viewType);\n\t\t\tstate.totalHeight = totalHeight;\n\n\t\t\tfoldHintHeight = 0;\n\t\t}\n\t\tlet commentOffset: number;\n\t\tconst notebookLayoutConfiguration = this.viewContext.notebookOptions.getLayoutConfiguration();\n\t\tif (this.getEditState() === CellEditState.Editing) {\n\t\t\tcommentOffset = notebookLayoutConfiguration.editorToolbarHeight\n\t\t\t\t+ notebookLayoutConfiguration.cellTopMargin // CELL_TOP_MARGIN\n\t\t\t\t+ this._chatHeight\n\t\t\t\t+ this._editorHeight\n\t\t\t\t+ this._statusBarHeight;\n\t\t} else {\n\t\t\tcommentOffset = this._previewHeight;\n\t\t}\n\n\t\tthis._layoutInfo = {\n\t\t\tfontInfo: state.font || this._layoutInfo.fontInfo,\n\t\t\teditorWidth: state.outerWidth !== undefined ?\n\t\t\t\tthis.viewContext.notebookOptions\n\t\t\t\t\t.computeMarkdownCellEditorWidth(state.outerWidth) :\n\t\t\t\tthis._layoutInfo.editorWidth,\n\t\t\tchatHeight: this._chatHeight,\n\t\t\teditorHeight: this._editorHeight,\n\t\t\tstatusBarHeight: this._statusBarHeight,\n\t\t\tpreviewHeight: this._previewHeight,\n\t\t\tbottomToolbarOffset: this.viewContext.notebookOptions\n\t\t\t\t.computeBottomToolbarOffset(\n\t\t\t\t\ttotalHeight, this.viewType),\n\t\t\ttotalHeight,\n\t\t\tlayoutState: CellLayoutState.Measured,\n\t\t\tfoldHintHeight,\n\t\t\tcommentOffset,\n\t\t\tcommentHeight: state.commentHeight ?\n\t\t\t\tthis._commentHeight :\n\t\t\t\tthis._layoutInfo.commentHeight,\n\t\t\toutlineWidth: 1,\n\t\t\tbottomMargin: notebookLayoutConfiguration.markdownCellBottomMargin,\n\t\t\ttopMargin: notebookLayoutConfiguration.markdownCellTopMargin,\n\t\t};\n\n\t\tthis._onDidChangeLayout.fire(state);\n\t}\n\n\toverride restoreEditorViewState(editorViewStates: editorCommon.ICodeEditorViewState | null, totalHeight?: number) {\n\t\tsuper.restoreEditorViewState(editorViewStates);\n\t\t// we might already warmup the viewport so the cell has a total height computed\n\t\tif (totalHeight !== undefined && this.layoutInfo.layoutState === CellLayoutState.Uninitialized) {\n\t\t\tthis._layoutInfo = {\n\t\t\t\t...this.layoutInfo,\n\t\t\t\ttotalHeight: totalHeight,\n\t\t\t\tchatHeight: this._chatHeight,\n\t\t\t\teditorHeight: this._editorHeight,\n\t\t\t\tstatusBarHeight: this._statusBarHeight,\n\t\t\t\tlayoutState: CellLayoutState.FromCache,\n\t\t\t};\n\t\t\tthis.layoutChange({});\n\t\t}\n\t}\n\n\tgetDynamicHeight() {\n\t\treturn null;\n\t}\n\n\tgetHeight(lineHeight: number) {\n\t\tif (this._layoutInfo.layoutState === CellLayoutState.Uninitialized) {\n\t\t\treturn 100;\n\t\t} else {\n\t\t\treturn this._layoutInfo.totalHeight;\n\t\t}\n\t}\n\n\tprotected onDidChangeTextModelContent(): void {\n\t\tthis._onDidChangeState.fire({ contentChanged: true });\n\t}\n\n\tonDeselect() {\n\t}\n\n\n\tprivate readonly _hasFindResult = this._register(new Emitter<boolean>());\n\tpublic readonly hasFindResult: Event<boolean> = this._hasFindResult.event;\n\n\tstartFind(value: string, options: INotebookFindOptions): CellFindMatch | null {\n\t\tconst matches = super.cellStartFind(value, options);\n\n\t\tif (matches === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tcell: this,\n\t\t\tcontentMatches: matches\n\t\t};\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\t(this.foldingDelegate as unknown) = null;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport * as UUID from '../../../../../base/common/uuid.js';\nimport * as editorCommon from '../../../../../editor/common/editorCommon.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { CellEditState, CellFindMatch, CellFoldingState, CellLayoutContext, CellLayoutState, EditorFoldingStateDelegate, ICellOutputViewModel, ICellViewModel, MarkupCellLayoutChangeEvent, MarkupCellLayoutInfo } from '../notebookBrowser.js';\nimport { BaseCellViewModel } from './baseCellViewModel.js';\nimport { NotebookCellTextModel } from '../../common/model/notebookCellTextModel.js';\nimport { CellKind, INotebookFindOptions } from '../../common/notebookCommon.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { ViewContext } from './viewContext.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { NotebookOptionsChangeEvent } from '../notebookOptions.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { NotebookCellStateChangedEvent, NotebookLayoutInfo } from '../notebookViewEvents.js';\nimport { IInlineChatSessionService } from '../../../inlineChat/browser/inlineChatSessionService.js';\n\nexport class MarkupCellViewModel extends BaseCellViewModel implements ICellViewModel {\n\n\treadonly cellKind = CellKind.Markup;\n\n\tprivate _layoutInfo: MarkupCellLayoutInfo;\n\n\tprivate _renderedHtml?: string;\n\n\tpublic get renderedHtml(): string | undefined { return this._renderedHtml; }\n\tpublic set renderedHtml(value: string | undefined) {\n\t\tif (this._renderedHtml !== value) {\n\t\t\tthis._renderedHtml = value;\n\t\t\tthis._onDidChangeState.fire({ contentChanged: true });\n\t\t}\n\t}\n\n\tget layoutInfo() {\n\t\treturn this._layoutInfo;\n\t}\n\n\tprivate _previewHeight = 0;\n\n\tset renderedMarkdownHeight(newHeight: number) {\n\t\tthis._previewHeight = newHeight;\n\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t}\n\n\tprivate _chatHeight = 0;\n\n\tset chatHeight(newHeight: number) {\n\t\tthis._chatHeight = newHeight;\n\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t}\n\n\tget chatHeight() {\n\t\treturn this._chatHeight;\n\t}\n\n\tprivate _editorHeight = 0;\n\tprivate _statusBarHeight = 0;\n\tset editorHeight(newHeight: number) {\n\t\tthis._editorHeight = newHeight;\n\t\tthis._statusBarHeight = this.viewContext.notebookOptions.computeStatusBarHeight();\n\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t}\n\n\tget editorHeight() {\n\t\tthrow new Error('MarkdownCellViewModel.editorHeight is write only');\n\t}\n\n\tprotected readonly _onDidChangeLayout = this._register(new Emitter<MarkupCellLayoutChangeEvent>());\n\treadonly onDidChangeLayout = this._onDidChangeLayout.event;\n\n\tget foldingState() {\n\t\treturn this.foldingDelegate.getFoldingState(this.foldingDelegate.getCellIndex(this));\n\t}\n\n\tprivate _hoveringOutput: boolean = false;\n\tpublic get outputIsHovered(): boolean {\n\t\treturn this._hoveringOutput;\n\t}\n\n\tpublic set outputIsHovered(v: boolean) {\n\t\tthis._hoveringOutput = v;\n\t}\n\n\tprivate _focusOnOutput: boolean = false;\n\tpublic get outputIsFocused(): boolean {\n\t\treturn this._focusOnOutput;\n\t}\n\n\tpublic set outputIsFocused(v: boolean) {\n\t\tthis._focusOnOutput = v;\n\t}\n\n\tpublic get inputInOutputIsFocused(): boolean {\n\t\treturn false;\n\t}\n\n\tpublic set inputInOutputIsFocused(_: boolean) {\n\t\t//\n\t}\n\n\tprivate _hoveringCell = false;\n\tpublic get cellIsHovered(): boolean {\n\t\treturn this._hoveringCell;\n\t}\n\n\tpublic set cellIsHovered(v: boolean) {\n\t\tthis._hoveringCell = v;\n\t\tthis._onDidChangeState.fire({ cellIsHoveredChanged: true });\n\t}\n\n\tconstructor(\n\t\tviewType: string,\n\t\tmodel: NotebookCellTextModel,\n\t\tinitialNotebookLayoutInfo: NotebookLayoutInfo | null,\n\t\treadonly foldingDelegate: EditorFoldingStateDelegate,\n\t\treadonly viewContext: ViewContext,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IUndoRedoService undoRedoService: IUndoRedoService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IInlineChatSessionService inlineChatSessionService: IInlineChatSessionService\n\t) {\n\t\tsuper(viewType, model, UUID.generateUuid(), viewContext, configurationService, textModelService, undoRedoService, codeEditorService, inlineChatSessionService);\n\n\t\tconst { bottomToolbarGap } = this.viewContext.notebookOptions.computeBottomToolbarDimensions(this.viewType);\n\t\tconst layoutConfiguration = this.viewContext.notebookOptions.getLayoutConfiguration();\n\t\tthis._layoutInfo = {\n\t\t\tchatHeight: 0,\n\t\t\teditorHeight: 0,\n\t\t\tpreviewHeight: 0,\n\t\t\tfontInfo: initialNotebookLayoutInfo?.fontInfo || null,\n\t\t\teditorWidth: initialNotebookLayoutInfo?.width\n\t\t\t\t? this.viewContext.notebookOptions.computeMarkdownCellEditorWidth(initialNotebookLayoutInfo.width)\n\t\t\t\t: 0,\n\t\t\tcommentOffset: 0,\n\t\t\tcommentHeight: 0,\n\t\t\tbottomToolbarOffset: bottomToolbarGap,\n\t\t\ttotalHeight: 100,\n\t\t\tlayoutState: CellLayoutState.Uninitialized,\n\t\t\tfoldHintHeight: 0,\n\t\t\tstatusBarHeight: 0,\n\t\t\toutlineWidth: 1,\n\t\t\tbottomMargin: layoutConfiguration.markdownCellBottomMargin,\n\t\t\ttopMargin: layoutConfiguration.markdownCellTopMargin,\n\t\t};\n\n\t\tthis._register(this.onDidChangeState(e => {\n\t\t\tthis.viewContext.eventDispatcher.emit([new NotebookCellStateChangedEvent(e, this.model)]);\n\n\t\t\tif (e.foldingStateChanged) {\n\t\t\t\tthis._updateTotalHeight(this._computeTotalHeight(), CellLayoutContext.Fold);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _computeTotalHeight(): number {\n\t\tconst layoutConfiguration = this.viewContext.notebookOptions.getLayoutConfiguration();\n\t\tconst { bottomToolbarGap } = this.viewContext.notebookOptions.computeBottomToolbarDimensions(this.viewType);\n\t\tconst foldHintHeight = this._computeFoldHintHeight();\n\n\t\tif (this.getEditState() === CellEditState.Editing) {\n\t\t\treturn this._editorHeight\n\t\t\t\t+ layoutConfiguration.markdownCellTopMargin\n\t\t\t\t+ layoutConfiguration.markdownCellBottomMargin\n\t\t\t\t+ bottomToolbarGap\n\t\t\t\t+ this._statusBarHeight\n\t\t\t\t+ this._commentHeight;\n\t\t} else {\n\t\t\t// @rebornix\n\t\t\t// On file open, the previewHeight + bottomToolbarGap for a cell out of viewport can be 0\n\t\t\t// When it's 0, the list view will never try to render it anymore even if we scroll the cell into view.\n\t\t\t// Thus we make sure it's greater than 0\n\t\t\treturn Math.max(1, this._previewHeight + bottomToolbarGap + foldHintHeight + this._commentHeight);\n\t\t}\n\t}\n\n\tprivate _computeFoldHintHeight(): number {\n\t\treturn (this.getEditState() === CellEditState.Editing || this.foldingState !== CellFoldingState.Collapsed) ?\n\t\t\t0 : this.viewContext.notebookOptions.getLayoutConfiguration().markdownFoldHintHeight;\n\t}\n\n\toverride updateOptions(e: NotebookOptionsChangeEvent) {\n\t\tsuper.updateOptions(e);\n\t\tif (e.cellStatusBarVisibility || e.insertToolbarPosition || e.cellToolbarLocation) {\n\t\t\tthis._updateTotalHeight(this._computeTotalHeight());\n\t\t}\n\t}\n\n\t/**\n\t * we put outputs stuff here to make compiler happy\n\t */\n\toutputsViewModels: ICellOutputViewModel[] = [];\n\tgetOutputOffset(index: number): number {\n\t\t// throw new Error('Method not implemented.');\n\t\treturn -1;\n\t}\n\tupdateOutputHeight(index: number, height: number): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\ttriggerFoldingStateChange() {\n\t\tthis._onDidChangeState.fire({ foldingStateChanged: true });\n\t}\n\n\tprivate _updateTotalHeight(newHeight: number, context?: CellLayoutContext) {\n\t\tif (newHeight !== this.layoutInfo.totalHeight) {\n\t\t\tthis.layoutChange({ totalHeight: newHeight, context });\n\t\t}\n\t}\n\n\tlayoutChange(state: MarkupCellLayoutChangeEvent) {\n\t\tlet totalHeight: number;\n\t\tlet foldHintHeight: number;\n\t\tif (!this.isInputCollapsed) {\n\t\t\ttotalHeight = state.totalHeight === undefined ?\n\t\t\t\t(this._layoutInfo.layoutState ===\n\t\t\t\t\tCellLayoutState.Uninitialized ?\n\t\t\t\t\t100 :\n\t\t\t\t\tthis._layoutInfo.totalHeight) :\n\t\t\t\tstate.totalHeight;\n\t\t\t// recompute\n\t\t\tfoldHintHeight = this._computeFoldHintHeight();\n\t\t} else {\n\t\t\ttotalHeight =\n\t\t\t\tthis.viewContext.notebookOptions\n\t\t\t\t\t.computeCollapsedMarkdownCellHeight(this.viewType);\n\t\t\tstate.totalHeight = totalHeight;\n\n\t\t\tfoldHintHeight = 0;\n\t\t}\n\t\tlet commentOffset: number;\n\t\tconst notebookLayoutConfiguration = this.viewContext.notebookOptions.getLayoutConfiguration();\n\t\tif (this.getEditState() === CellEditState.Editing) {\n\t\t\tcommentOffset = notebookLayoutConfiguration.editorToolbarHeight\n\t\t\t\t+ notebookLayoutConfiguration.cellTopMargin // CELL_TOP_MARGIN\n\t\t\t\t+ this._chatHeight\n\t\t\t\t+ this._editorHeight\n\t\t\t\t+ this._statusBarHeight;\n\t\t} else {\n\t\t\tcommentOffset = this._previewHeight;\n\t\t}\n\n\t\tthis._layoutInfo = {\n\t\t\tfontInfo: state.font || this._layoutInfo.fontInfo,\n\t\t\teditorWidth: state.outerWidth !== undefined ?\n\t\t\t\tthis.viewContext.notebookOptions\n\t\t\t\t\t.computeMarkdownCellEditorWidth(state.outerWidth) :\n\t\t\t\tthis._layoutInfo.editorWidth,\n\t\t\tchatHeight: this._chatHeight,\n\t\t\teditorHeight: this._editorHeight,\n\t\t\tstatusBarHeight: this._statusBarHeight,\n\t\t\tpreviewHeight: this._previewHeight,\n\t\t\tbottomToolbarOffset: this.viewContext.notebookOptions\n\t\t\t\t.computeBottomToolbarOffset(\n\t\t\t\t\ttotalHeight, this.viewType),\n\t\t\ttotalHeight,\n\t\t\tlayoutState: CellLayoutState.Measured,\n\t\t\tfoldHintHeight,\n\t\t\tcommentOffset,\n\t\t\tcommentHeight: state.commentHeight ?\n\t\t\t\tthis._commentHeight :\n\t\t\t\tthis._layoutInfo.commentHeight,\n\t\t\toutlineWidth: 1,\n\t\t\tbottomMargin: notebookLayoutConfiguration.markdownCellBottomMargin,\n\t\t\ttopMargin: notebookLayoutConfiguration.markdownCellTopMargin,\n\t\t};\n\n\t\tthis._onDidChangeLayout.fire(state);\n\t}\n\n\toverride restoreEditorViewState(editorViewStates: editorCommon.ICodeEditorViewState | null, totalHeight?: number) {\n\t\tsuper.restoreEditorViewState(editorViewStates);\n\t\t// we might already warmup the viewport so the cell has a total height computed\n\t\tif (totalHeight !== undefined && this.layoutInfo.layoutState === CellLayoutState.Uninitialized) {\n\t\t\tthis._layoutInfo = {\n\t\t\t\t...this.layoutInfo,\n\t\t\t\ttotalHeight: totalHeight,\n\t\t\t\tchatHeight: this._chatHeight,\n\t\t\t\teditorHeight: this._editorHeight,\n\t\t\t\tstatusBarHeight: this._statusBarHeight,\n\t\t\t\tlayoutState: CellLayoutState.FromCache,\n\t\t\t};\n\t\t\tthis.layoutChange({});\n\t\t}\n\t}\n\n\tgetDynamicHeight() {\n\t\treturn null;\n\t}\n\n\tgetHeight(lineHeight: number) {\n\t\tif (this._layoutInfo.layoutState === CellLayoutState.Uninitialized) {\n\t\t\treturn 100;\n\t\t} else {\n\t\t\treturn this._layoutInfo.totalHeight;\n\t\t}\n\t}\n\n\tprotected onDidChangeTextModelContent(): void {\n\t\tthis._onDidChangeState.fire({ contentChanged: true });\n\t}\n\n\tonDeselect() {\n\t}\n\n\n\tprivate readonly _hasFindResult = this._register(new Emitter<boolean>());\n\tpublic readonly hasFindResult: Event<boolean> = this._hasFindResult.event;\n\n\tstartFind(value: string, options: INotebookFindOptions): CellFindMatch | null {\n\t\tconst matches = super.cellStartFind(value, options);\n\n\t\tif (matches === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tcell: this,\n\t\t\tcontentMatches: matches\n\t\t};\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\t(this.foldingDelegate as unknown) = null;\n\t}\n}\n"]}