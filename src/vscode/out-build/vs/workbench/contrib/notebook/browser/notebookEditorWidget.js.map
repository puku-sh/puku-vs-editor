{"version":3,"sources":["vs/workbench/contrib/notebook/browser/notebookEditorWidget.ts"],"names":[],"mappings":"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","file":"notebookEditorWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/notebook.css';\nimport './media/notebookCellChat.css';\nimport './media/notebookCellEditorHint.css';\nimport './media/notebookCellInsertToolbar.css';\nimport './media/notebookCellStatusBar.css';\nimport './media/notebookCellTitleToolbar.css';\nimport './media/notebookFocusIndicator.css';\nimport './media/notebookToolbar.css';\nimport './media/notebookDnd.css';\nimport './media/notebookFolding.css';\nimport './media/notebookCellOutput.css';\nimport './media/notebookEditorStickyScroll.css';\nimport './media/notebookKernelActionViewItem.css';\nimport './media/notebookOutline.css';\nimport './media/notebookChatEditController.css';\nimport './media/notebookChatEditorOverlay.css';\nimport * as DOM from '../../../../base/browser/dom.js';\nimport * as domStylesheets from '../../../../base/browser/domStylesheets.js';\nimport { IMouseWheelEvent, StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { IListContextMenuEvent } from '../../../../base/browser/ui/list/list.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { SequencerByKey } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { combinedDisposable, Disposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { setTimeout0 } from '../../../../base/common/platform.js';\nimport { extname, isEqual } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { FontMeasurements } from '../../../../editor/browser/config/fontMeasurements.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { FontInfo } from '../../../../editor/common/config/fontInfo.js';\nimport { createBareFontInfoFromRawSettings } from '../../../../editor/common/config/fontInfoFromSettings.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { Selection } from '../../../../editor/common/core/selection.js';\nimport { SuggestController } from '../../../../editor/contrib/suggest/browser/suggestController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\nimport { registerZIndex, ZIndex } from '../../../../platform/layout/browser/zIndexRegistry.js';\nimport { IEditorProgressService, IProgressRunner } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { contrastBorder, errorForeground, focusBorder, foreground, listInactiveSelectionBackground, registerColor, scrollbarSliderActiveBackground, scrollbarSliderBackground, scrollbarSliderHoverBackground, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { EDITOR_PANE_BACKGROUND, PANEL_BORDER, SIDE_BAR_BACKGROUND } from '../../../common/theme.js';\nimport { debugIconStartForeground } from '../../debug/browser/debugColors.js';\nimport { CellEditState, CellFindMatchWithIndex, CellFocusMode, CellLayoutContext, CellRevealRangeType, CellRevealType, IActiveNotebookEditorDelegate, IBaseCellEditorOptions, ICellOutputViewModel, ICellViewModel, ICommonCellInfo, IDisplayOutputLayoutUpdateRequest, IFocusNotebookCellOptions, IInsetRenderOutput, IModelDecorationsChangeAccessor, INotebookCellOverlayChangeAccessor, INotebookDeltaDecoration, INotebookEditor, INotebookEditorContribution, INotebookEditorContributionDescription, INotebookEditorCreationOptions, INotebookEditorDelegate, INotebookEditorMouseEvent, INotebookEditorOptions, INotebookEditorViewState, INotebookViewCellsUpdateEvent, INotebookViewZoneChangeAccessor, INotebookWebviewMessage, RenderOutputType, ScrollToRevealBehavior } from './notebookBrowser.js';\nimport { NotebookEditorExtensionsRegistry } from './notebookEditorExtensions.js';\nimport { INotebookEditorService } from './services/notebookEditorService.js';\nimport { notebookDebug } from './notebookLogger.js';\nimport { NotebookCellStateChangedEvent, NotebookLayoutChangedEvent, NotebookLayoutInfo } from './notebookViewEvents.js';\nimport { CellContextKeyManager } from './view/cellParts/cellContextKeys.js';\nimport { CellDragAndDropController } from './view/cellParts/cellDnd.js';\nimport { ListViewInfoAccessor, NotebookCellList, NOTEBOOK_WEBVIEW_BOUNDARY } from './view/notebookCellList.js';\nimport { INotebookCellList } from './view/notebookRenderingCommon.js';\nimport { BackLayerWebView } from './view/renderers/backLayerWebView.js';\nimport { CodeCellRenderer, MarkupCellRenderer, NotebookCellListDelegate } from './view/renderers/cellRenderer.js';\nimport { IAckOutputHeight, IMarkupCellInitialization } from './view/renderers/webviewMessages.js';\nimport { CodeCellViewModel, outputDisplayLimit } from './viewModel/codeCellViewModel.js';\nimport { NotebookEventDispatcher } from './viewModel/eventDispatcher.js';\nimport { MarkupCellViewModel } from './viewModel/markupCellViewModel.js';\nimport { CellViewModel, NotebookViewModel } from './viewModel/notebookViewModelImpl.js';\nimport { ViewContext } from './viewModel/viewContext.js';\nimport { NotebookEditorWorkbenchToolbar } from './viewParts/notebookEditorToolbar.js';\nimport { NotebookEditorContextKeys } from './viewParts/notebookEditorWidgetContextKeys.js';\nimport { NotebookOverviewRuler } from './viewParts/notebookOverviewRuler.js';\nimport { ListTopCellToolbar } from './viewParts/notebookTopCellToolbar.js';\nimport { NotebookTextModel } from '../common/model/notebookTextModel.js';\nimport { CellEditType, CellKind, INotebookFindOptions, NotebookFindScopeType, RENDERER_NOT_AVAILABLE, SelectionStateType } from '../common/notebookCommon.js';\nimport { NOTEBOOK_CURSOR_NAVIGATION_MODE, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_EDITOR_FOCUSED, NOTEBOOK_OUTPUT_FOCUSED, NOTEBOOK_OUTPUT_INPUT_FOCUSED } from '../common/notebookContextKeys.js';\nimport { INotebookExecutionService } from '../common/notebookExecutionService.js';\nimport { INotebookKernelService } from '../common/notebookKernelService.js';\nimport { NotebookOptions, OutputInnerContainerTopPadding } from './notebookOptions.js';\nimport { cellRangesToIndexes, ICellRange } from '../common/notebookRange.js';\nimport { INotebookRendererMessagingService } from '../common/notebookRendererMessagingService.js';\nimport { INotebookService } from '../common/notebookService.js';\nimport { IWebviewElement } from '../../webview/browser/webview.js';\nimport { EditorExtensionsRegistry } from '../../../../editor/browser/editorExtensions.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { NotebookPerfMarks } from '../common/notebookPerformance.js';\nimport { BaseCellEditorOptions } from './viewModel/cellEditorOptions.js';\nimport { FloatingEditorClickMenu } from '../../../browser/codeeditor.js';\nimport { IDimension } from '../../../../editor/common/core/2d/dimension.js';\nimport { CellFindMatchModel } from './contrib/find/findModel.js';\nimport { INotebookLoggingService } from '../common/notebookLoggingService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { DropIntoEditorController } from '../../../../editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js';\nimport { CopyPasteController } from '../../../../editor/contrib/dropOrPasteInto/browser/copyPasteController.js';\nimport { NotebookStickyScroll } from './viewParts/notebookEditorStickyScroll.js';\nimport { PixelRatio } from '../../../../base/browser/pixelRatio.js';\nimport { PreventDefaultContextMenuItemsContextKeyName } from '../../webview/browser/webview.contribution.js';\nimport { NotebookAccessibilityProvider } from './notebookAccessibilityProvider.js';\nimport { NotebookHorizontalTracker } from './viewParts/notebookHorizontalTracker.js';\nimport { NotebookCellEditorPool } from './view/notebookCellEditorPool.js';\nimport { InlineCompletionsController } from '../../../../editor/contrib/inlineCompletions/browser/controller/inlineCompletionsController.js';\nimport { NotebookCellLayoutManager } from './notebookCellLayoutManager.js';\nimport { FloatingEditorToolbar } from '../../../../editor/contrib/floatingMenu/browser/floatingMenu.js';\n\nconst $ = DOM.$;\n\nexport function getDefaultNotebookCreationOptions(): INotebookEditorCreationOptions {\n\t// We inlined the id to avoid loading comment contrib in tests\n\tconst skipContributions = [\n\t\t'editor.contrib.review',\n\t\tFloatingEditorClickMenu.ID,\n\t\tFloatingEditorToolbar.ID,\n\t\t'editor.contrib.dirtydiff',\n\t\t'editor.contrib.testingOutputPeek',\n\t\t'editor.contrib.testingDecorations',\n\t\t'store.contrib.stickyScrollController',\n\t\t'editor.contrib.findController',\n\t\t'editor.contrib.emptyTextEditorHint'\n\t];\n\tconst contributions = EditorExtensionsRegistry.getEditorContributions().filter(c => skipContributions.indexOf(c.id) === -1);\n\n\treturn {\n\t\tmenuIds: {\n\t\t\tnotebookToolbar: MenuId.NotebookToolbar,\n\t\t\tcellTitleToolbar: MenuId.NotebookCellTitle,\n\t\t\tcellDeleteToolbar: MenuId.NotebookCellDelete,\n\t\t\tcellInsertToolbar: MenuId.NotebookCellBetween,\n\t\t\tcellTopInsertToolbar: MenuId.NotebookCellListTop,\n\t\t\tcellExecuteToolbar: MenuId.NotebookCellExecute,\n\t\t\tcellExecutePrimary: MenuId.NotebookCellExecutePrimary,\n\t\t},\n\t\tcellEditorContributions: contributions\n\t};\n}\n\nexport class NotebookEditorWidget extends Disposable implements INotebookEditorDelegate, INotebookEditor {\n\t//#region Eventing\n\tprivate readonly _onDidChangeCellState = this._register(new Emitter<NotebookCellStateChangedEvent>());\n\treadonly onDidChangeCellState = this._onDidChangeCellState.event;\n\tprivate readonly _onDidChangeViewCells = this._register(new Emitter<INotebookViewCellsUpdateEvent>());\n\treadonly onDidChangeViewCells: Event<INotebookViewCellsUpdateEvent> = this._onDidChangeViewCells.event;\n\tprivate readonly _onWillChangeModel = this._register(new Emitter<NotebookTextModel | undefined>());\n\treadonly onWillChangeModel: Event<NotebookTextModel | undefined> = this._onWillChangeModel.event;\n\tprivate readonly _onDidChangeModel = this._register(new Emitter<NotebookTextModel | undefined>());\n\treadonly onDidChangeModel: Event<NotebookTextModel | undefined> = this._onDidChangeModel.event;\n\tprivate readonly _onDidAttachViewModel = this._register(new Emitter<void>());\n\treadonly onDidAttachViewModel: Event<void> = this._onDidAttachViewModel.event;\n\tprivate readonly _onDidChangeOptions = this._register(new Emitter<void>());\n\treadonly onDidChangeOptions: Event<void> = this._onDidChangeOptions.event;\n\tprivate readonly _onDidChangeDecorations = this._register(new Emitter<void>());\n\treadonly onDidChangeDecorations: Event<void> = this._onDidChangeDecorations.event;\n\tprivate readonly _onDidScroll = this._register(new Emitter<void>());\n\treadonly onDidScroll: Event<void> = this._onDidScroll.event;\n\tprivate readonly _onDidChangeLayout = this._register(new Emitter<void>());\n\treadonly onDidChangeLayout: Event<void> = this._onDidChangeLayout.event;\n\tprivate readonly _onDidChangeActiveCell = this._register(new Emitter<void>());\n\treadonly onDidChangeActiveCell: Event<void> = this._onDidChangeActiveCell.event;\n\tprivate readonly _onDidChangeFocus = this._register(new Emitter<void>());\n\treadonly onDidChangeFocus: Event<void> = this._onDidChangeFocus.event;\n\tprivate readonly _onDidChangeSelection = this._register(new Emitter<void>());\n\treadonly onDidChangeSelection: Event<void> = this._onDidChangeSelection.event;\n\tprivate readonly _onDidChangeVisibleRanges = this._register(new Emitter<void>());\n\treadonly onDidChangeVisibleRanges: Event<void> = this._onDidChangeVisibleRanges.event;\n\tprivate readonly _onDidFocusEmitter = this._register(new Emitter<void>());\n\treadonly onDidFocusWidget = this._onDidFocusEmitter.event;\n\tprivate readonly _onDidBlurEmitter = this._register(new Emitter<void>());\n\treadonly onDidBlurWidget = this._onDidBlurEmitter.event;\n\tprivate readonly _onDidChangeActiveEditor = this._register(new Emitter<this>());\n\treadonly onDidChangeActiveEditor: Event<this> = this._onDidChangeActiveEditor.event;\n\tprivate readonly _onDidChangeActiveKernel = this._register(new Emitter<void>());\n\treadonly onDidChangeActiveKernel: Event<void> = this._onDidChangeActiveKernel.event;\n\tprivate readonly _onMouseUp: Emitter<INotebookEditorMouseEvent> = this._register(new Emitter<INotebookEditorMouseEvent>());\n\treadonly onMouseUp: Event<INotebookEditorMouseEvent> = this._onMouseUp.event;\n\tprivate readonly _onMouseDown: Emitter<INotebookEditorMouseEvent> = this._register(new Emitter<INotebookEditorMouseEvent>());\n\treadonly onMouseDown: Event<INotebookEditorMouseEvent> = this._onMouseDown.event;\n\tprivate readonly _onDidReceiveMessage = this._register(new Emitter<INotebookWebviewMessage>());\n\treadonly onDidReceiveMessage: Event<INotebookWebviewMessage> = this._onDidReceiveMessage.event;\n\tprivate readonly _onDidRenderOutput = this._register(new Emitter<ICellOutputViewModel>());\n\tprivate readonly onDidRenderOutput = this._onDidRenderOutput.event;\n\tprivate readonly _onDidRemoveOutput = this._register(new Emitter<ICellOutputViewModel>());\n\tprivate readonly onDidRemoveOutput = this._onDidRemoveOutput.event;\n\tprivate readonly _onDidResizeOutputEmitter = this._register(new Emitter<ICellViewModel>());\n\treadonly onDidResizeOutput = this._onDidResizeOutputEmitter.event;\n\n\t//#endregion\n\tprivate _overlayContainer!: HTMLElement;\n\tprivate _notebookTopToolbarContainer!: HTMLElement;\n\tprivate _notebookTopToolbar!: NotebookEditorWorkbenchToolbar;\n\tprivate _notebookStickyScrollContainer!: HTMLElement;\n\tprivate _notebookStickyScroll!: NotebookStickyScroll;\n\tprivate _notebookOverviewRulerContainer!: HTMLElement;\n\tprivate _notebookOverviewRuler!: NotebookOverviewRuler;\n\tprivate _body!: HTMLElement;\n\tprivate _styleElement!: HTMLStyleElement;\n\tprivate _overflowContainer!: HTMLElement;\n\tprivate _webview: BackLayerWebView<ICommonCellInfo> | null = null;\n\tprivate _webviewResolvePromise: Promise<BackLayerWebView<ICommonCellInfo> | null> | null = null;\n\tprivate _webviewTransparentCover: HTMLElement | null = null;\n\tprivate _listDelegate: NotebookCellListDelegate | null = null;\n\tprivate _list!: INotebookCellList;\n\tprivate _listViewInfoAccessor!: ListViewInfoAccessor;\n\tprivate _dndController: CellDragAndDropController | null = null;\n\tprivate _listTopCellToolbar: ListTopCellToolbar | null = null;\n\tprivate _renderedEditors: Map<ICellViewModel, ICodeEditor> = new Map();\n\tprivate _editorPool!: NotebookCellEditorPool;\n\tprivate _viewContext: ViewContext;\n\tprivate _notebookViewModel: NotebookViewModel | undefined;\n\tprivate readonly _localStore: DisposableStore = this._register(new DisposableStore());\n\tprivate _localCellStateListeners: DisposableStore[] = [];\n\tprivate _fontInfo: FontInfo | undefined;\n\tprivate _dimension?: DOM.Dimension;\n\tprivate _position?: DOM.IDomPosition;\n\tprivate _shadowElement?: HTMLElement;\n\tprivate _shadowElementViewInfo: { height: number; width: number; top: number; left: number } | null = null;\n\tprivate _cellLayoutManager: NotebookCellLayoutManager | undefined;\n\n\tprivate readonly _editorFocus: IContextKey<boolean>;\n\tprivate readonly _outputFocus: IContextKey<boolean>;\n\tprivate readonly _editorEditable: IContextKey<boolean>;\n\tprivate readonly _cursorNavMode: IContextKey<boolean>;\n\tprivate readonly _outputInputFocus: IContextKey<boolean>;\n\tprotected readonly _contributions = new Map<string, INotebookEditorContribution>();\n\tprivate _scrollBeyondLastLine: boolean;\n\tprivate readonly _insetModifyQueueByOutputId = new SequencerByKey<string>();\n\tprivate _cellContextKeyManager: CellContextKeyManager | null = null;\n\tprivate readonly _uuid = generateUuid();\n\tprivate _focusTracker!: DOM.IFocusTracker;\n\tprivate _webviewFocused: boolean = false;\n\tprivate _isVisible = false;\n\tget isVisible() {\n\t\treturn this._isVisible;\n\t}\n\n\tprivate _isDisposed: boolean = false;\n\n\tget isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n\n\tset viewModel(newModel: NotebookViewModel | undefined) {\n\t\tthis._onWillChangeModel.fire(this._notebookViewModel?.notebookDocument);\n\t\tthis._notebookViewModel = newModel;\n\t\tthis._onDidChangeModel.fire(newModel?.notebookDocument);\n\t}\n\n\tget viewModel() {\n\t\treturn this._notebookViewModel;\n\t}\n\n\tget textModel() {\n\t\treturn this._notebookViewModel?.notebookDocument;\n\t}\n\n\tget isReadOnly() {\n\t\treturn this._notebookViewModel?.options.isReadOnly ?? false;\n\t}\n\n\tget activeCodeEditor(): ICodeEditor | undefined {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [focused] = this._list.getFocusedElements();\n\t\treturn this._renderedEditors.get(focused);\n\t}\n\n\tget activeCellAndCodeEditor(): [ICellViewModel, ICodeEditor] | undefined {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [focused] = this._list.getFocusedElements();\n\t\tconst editor = this._renderedEditors.get(focused);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\treturn [focused, editor];\n\t}\n\n\tget codeEditors(): [ICellViewModel, ICodeEditor][] {\n\t\treturn [...this._renderedEditors];\n\t}\n\n\tget visibleRanges() {\n\t\treturn this._list ? (this._list.visibleRanges || []) : [];\n\t}\n\n\tprivate _baseCellEditorOptions = new Map<string, IBaseCellEditorOptions>();\n\n\treadonly isReplHistory: boolean;\n\tprivate _readOnly: boolean;\n\n\tpublic readonly scopedContextKeyService: IContextKeyService;\n\tprivate readonly instantiationService: IInstantiationService;\n\tprivate readonly _notebookOptions: NotebookOptions;\n\n\tprivate _currentProgress: IProgressRunner | undefined;\n\n\tget notebookOptions() {\n\t\treturn this._notebookOptions;\n\t}\n\n\tconstructor(\n\t\treadonly creationOptions: INotebookEditorCreationOptions,\n\t\tdimension: DOM.Dimension | undefined,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@INotebookRendererMessagingService private readonly notebookRendererMessaging: INotebookRendererMessagingService,\n\t\t@INotebookEditorService private readonly notebookEditorService: INotebookEditorService,\n\t\t@INotebookKernelService private readonly notebookKernelService: INotebookKernelService,\n\t\t@INotebookService private readonly _notebookService: INotebookService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ILayoutService private readonly layoutService: ILayoutService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@INotebookExecutionService private readonly notebookExecutionService: INotebookExecutionService,\n\t\t@IEditorProgressService private editorProgressService: IEditorProgressService,\n\t\t@INotebookLoggingService private readonly logService: INotebookLoggingService,\n\t) {\n\t\tsuper();\n\n\t\tthis._dimension = dimension;\n\n\t\tthis.isReplHistory = creationOptions.isReplHistory ?? false;\n\t\tthis._readOnly = creationOptions.isReadOnly ?? false;\n\n\t\tthis._overlayContainer = document.createElement('div');\n\t\tthis.scopedContextKeyService = this._register(contextKeyService.createScoped(this._overlayContainer));\n\t\tthis.instantiationService = this._register(instantiationService.createChild(new ServiceCollection([IContextKeyService, this.scopedContextKeyService])));\n\n\t\tthis._notebookOptions = creationOptions.options ??\n\t\t\tthis.instantiationService.createInstance(NotebookOptions, this.creationOptions?.codeWindow ?? mainWindow, this._readOnly, undefined);\n\t\tthis._register(this._notebookOptions);\n\t\tconst eventDispatcher = this._register(new NotebookEventDispatcher());\n\t\tthis._viewContext = new ViewContext(\n\t\t\tthis._notebookOptions,\n\t\t\teventDispatcher,\n\t\t\tlanguage => this.getBaseCellEditorOptions(language));\n\t\tthis._register(this._viewContext.eventDispatcher.onDidChangeLayout(() => {\n\t\t\tthis._onDidChangeLayout.fire();\n\t\t}));\n\t\tthis._register(this._viewContext.eventDispatcher.onDidChangeCellState(e => {\n\t\t\tthis._onDidChangeCellState.fire(e);\n\t\t}));\n\n\n\t\tthis._register(_notebookService.onDidChangeOutputRenderers(() => {\n\t\t\tthis._updateOutputRenderers();\n\t\t}));\n\n\t\tthis._register(this.instantiationService.createInstance(NotebookEditorContextKeys, this));\n\n\t\tthis._register(notebookKernelService.onDidChangeSelectedNotebooks(e => {\n\t\t\tif (isEqual(e.notebook, this.viewModel?.uri)) {\n\t\t\t\tthis._loadKernelPreloads();\n\t\t\t\tthis._onDidChangeActiveKernel.fire();\n\t\t\t}\n\t\t}));\n\n\t\tthis._scrollBeyondLastLine = this.configurationService.getValue<boolean>('editor.scrollBeyondLastLine');\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.scrollBeyondLastLine')) {\n\t\t\t\tthis._scrollBeyondLastLine = this.configurationService.getValue<boolean>('editor.scrollBeyondLastLine');\n\t\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\t\tthis.layout(this._dimension);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.cellStatusBarVisibility || e.cellToolbarLocation || e.cellToolbarInteraction) {\n\t\t\t\tthis._updateForNotebookConfiguration();\n\t\t\t}\n\n\t\t\tif (e.fontFamily) {\n\t\t\t\tthis._generateFontInfo();\n\t\t\t}\n\n\t\t\tif (e.compactView\n\t\t\t\t|| e.focusIndicator\n\t\t\t\t|| e.insertToolbarPosition\n\t\t\t\t|| e.cellToolbarLocation\n\t\t\t\t|| e.dragAndDropEnabled\n\t\t\t\t|| e.fontSize\n\t\t\t\t|| e.markupFontSize\n\t\t\t\t|| e.markdownLineHeight\n\t\t\t\t|| e.fontFamily\n\t\t\t\t|| e.insertToolbarAlignment\n\t\t\t\t|| e.outputFontSize\n\t\t\t\t|| e.outputLineHeight\n\t\t\t\t|| e.outputFontFamily\n\t\t\t\t|| e.outputWordWrap\n\t\t\t\t|| e.outputScrolling\n\t\t\t\t|| e.outputLinkifyFilePaths\n\t\t\t\t|| e.minimalError\n\t\t\t) {\n\t\t\t\tthis._styleElement?.remove();\n\t\t\t\tthis._createLayoutStyles();\n\t\t\t\tthis._webview?.updateOptions({\n\t\t\t\t\t...this.notebookOptions.computeWebviewOptions(),\n\t\t\t\t\tfontFamily: this._generateFontFamily()\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\tthis.layout(this._dimension);\n\t\t\t}\n\t\t}));\n\n\t\tconst container = creationOptions.codeWindow ? this.layoutService.getContainer(creationOptions.codeWindow) : this.layoutService.mainContainer;\n\t\tthis._register(editorGroupsService.getPart(container).onDidScroll(e => {\n\t\t\tif (!this._shadowElement || !this._isVisible) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateShadowElement(this._shadowElement, this._dimension);\n\t\t\tthis.layoutContainerOverShadowElement(this._dimension, this._position);\n\t\t}));\n\n\t\tthis.notebookEditorService.addNotebookEditor(this);\n\n\t\tconst id = generateUuid();\n\t\tthis._overlayContainer.id = `notebook-${id}`;\n\t\tthis._overlayContainer.className = 'notebookOverlay';\n\t\tthis._overlayContainer.classList.add('notebook-editor');\n\t\tthis._overlayContainer.inert = true;\n\t\tthis._overlayContainer.style.visibility = 'hidden';\n\n\t\tcontainer.appendChild(this._overlayContainer);\n\n\t\tthis._createBody(this._overlayContainer);\n\t\tthis._generateFontInfo();\n\t\tthis._isVisible = true;\n\t\tthis._editorFocus = NOTEBOOK_EDITOR_FOCUSED.bindTo(this.scopedContextKeyService);\n\t\tthis._outputFocus = NOTEBOOK_OUTPUT_FOCUSED.bindTo(this.scopedContextKeyService);\n\t\tthis._outputInputFocus = NOTEBOOK_OUTPUT_INPUT_FOCUSED.bindTo(this.scopedContextKeyService);\n\t\tthis._editorEditable = NOTEBOOK_EDITOR_EDITABLE.bindTo(this.scopedContextKeyService);\n\t\tthis._cursorNavMode = NOTEBOOK_CURSOR_NAVIGATION_MODE.bindTo(this.scopedContextKeyService);\n\t\t// Never display the native cut/copy context menu items in notebooks\n\t\tnew RawContextKey<boolean>(PreventDefaultContextMenuItemsContextKeyName, false).bindTo(this.scopedContextKeyService).set(true);\n\n\t\tthis._editorEditable.set(!creationOptions.isReadOnly);\n\n\t\tlet contributions: INotebookEditorContributionDescription[];\n\t\tif (Array.isArray(this.creationOptions.contributions)) {\n\t\t\tcontributions = this.creationOptions.contributions;\n\t\t} else {\n\t\t\tcontributions = NotebookEditorExtensionsRegistry.getEditorContributions();\n\t\t}\n\t\tfor (const desc of contributions) {\n\t\t\tlet contribution: INotebookEditorContribution | undefined;\n\t\t\ttry {\n\t\t\t\tcontribution = this.instantiationService.createInstance(desc.ctor, this);\n\t\t\t} catch (err) {\n\t\t\t\tonUnexpectedError(err);\n\t\t\t}\n\t\t\tif (contribution) {\n\t\t\t\tif (!this._contributions.has(desc.id)) {\n\t\t\t\t\tthis._contributions.set(desc.id, contribution);\n\t\t\t\t} else {\n\t\t\t\t\tcontribution.dispose();\n\t\t\t\t\tthrow new Error(`DUPLICATE notebook editor contribution: '${desc.id}'`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._updateForNotebookConfiguration();\n\t}\n\n\tprivate _debugFlag: boolean = false;\n\n\tprivate _debug(...args: unknown[]) {\n\t\tif (!this._debugFlag) {\n\t\t\treturn;\n\t\t}\n\n\t\tnotebookDebug(...args);\n\t}\n\n\t/**\n\t * EditorId\n\t */\n\tpublic getId(): string {\n\t\treturn this._uuid;\n\t}\n\n\tgetViewModel(): NotebookViewModel | undefined {\n\t\treturn this.viewModel;\n\t}\n\n\tgetLength() {\n\t\treturn this.viewModel?.length ?? 0;\n\t}\n\n\tgetSelections() {\n\t\treturn this.viewModel?.getSelections() ?? [{ start: 0, end: 0 }];\n\t}\n\n\tsetSelections(selections: ICellRange[]) {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = this.viewModel.getFocus();\n\t\tthis.viewModel.updateSelectionsState({\n\t\t\tkind: SelectionStateType.Index,\n\t\t\tfocus: focus,\n\t\t\tselections: selections\n\t\t});\n\t}\n\n\tgetFocus() {\n\t\treturn this.viewModel?.getFocus() ?? { start: 0, end: 0 };\n\t}\n\n\tsetFocus(focus: ICellRange) {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selections = this.viewModel.getSelections();\n\t\tthis.viewModel.updateSelectionsState({\n\t\t\tkind: SelectionStateType.Index,\n\t\t\tfocus: focus,\n\t\t\tselections: selections\n\t\t});\n\t}\n\n\tgetSelectionViewModels(): ICellViewModel[] {\n\t\tif (!this.viewModel) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst cellsSet = new Set<number>();\n\n\t\treturn this.viewModel.getSelections().map(range => this.viewModel!.viewCells.slice(range.start, range.end)).reduce((a, b) => {\n\t\t\tb.forEach(cell => {\n\t\t\t\tif (!cellsSet.has(cell.handle)) {\n\t\t\t\t\tcellsSet.add(cell.handle);\n\t\t\t\t\ta.push(cell);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn a;\n\t\t}, [] as ICellViewModel[]);\n\t}\n\n\thasModel(): this is IActiveNotebookEditorDelegate {\n\t\treturn !!this._notebookViewModel;\n\t}\n\n\tshowProgress(): void {\n\t\tthis._currentProgress = this.editorProgressService.show(true);\n\t}\n\n\thideProgress(): void {\n\t\tif (this._currentProgress) {\n\t\t\tthis._currentProgress.done();\n\t\t\tthis._currentProgress = undefined;\n\t\t}\n\t}\n\n\t//#region Editor Core\n\n\tgetBaseCellEditorOptions(language: string): IBaseCellEditorOptions {\n\t\tconst existingOptions = this._baseCellEditorOptions.get(language);\n\n\t\tif (existingOptions) {\n\t\t\treturn existingOptions;\n\t\t} else {\n\t\t\tconst options = new BaseCellEditorOptions(this, this.notebookOptions, this.configurationService, language);\n\t\t\tthis._baseCellEditorOptions.set(language, options);\n\t\t\treturn options;\n\t\t}\n\t}\n\n\tprivate _updateForNotebookConfiguration() {\n\t\tif (!this._overlayContainer) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._overlayContainer.classList.remove('cell-title-toolbar-left');\n\t\tthis._overlayContainer.classList.remove('cell-title-toolbar-right');\n\t\tthis._overlayContainer.classList.remove('cell-title-toolbar-hidden');\n\t\tconst cellToolbarLocation = this._notebookOptions.computeCellToolbarLocation(this.viewModel?.viewType);\n\t\tthis._overlayContainer.classList.add(`cell-title-toolbar-${cellToolbarLocation}`);\n\n\t\tconst cellToolbarInteraction = this._notebookOptions.getDisplayOptions().cellToolbarInteraction;\n\t\tlet cellToolbarInteractionState = 'hover';\n\t\tthis._overlayContainer.classList.remove('cell-toolbar-hover');\n\t\tthis._overlayContainer.classList.remove('cell-toolbar-click');\n\n\t\tif (cellToolbarInteraction === 'hover' || cellToolbarInteraction === 'click') {\n\t\t\tcellToolbarInteractionState = cellToolbarInteraction;\n\t\t}\n\t\tthis._overlayContainer.classList.add(`cell-toolbar-${cellToolbarInteractionState}`);\n\n\t}\n\n\tprivate _generateFontInfo(): void {\n\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\tconst targetWindow = DOM.getWindow(this.getDomNode());\n\t\tthis._fontInfo = FontMeasurements.readFontInfo(targetWindow, createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(targetWindow).value));\n\t}\n\n\tprivate _createBody(parent: HTMLElement): void {\n\t\tthis._notebookTopToolbarContainer = document.createElement('div');\n\t\tthis._notebookTopToolbarContainer.classList.add('notebook-toolbar-container');\n\t\tthis._notebookTopToolbarContainer.style.display = 'none';\n\t\tDOM.append(parent, this._notebookTopToolbarContainer);\n\n\t\tthis._notebookStickyScrollContainer = document.createElement('div');\n\t\tthis._notebookStickyScrollContainer.classList.add('notebook-sticky-scroll-container');\n\t\tDOM.append(parent, this._notebookStickyScrollContainer);\n\n\t\tthis._body = document.createElement('div');\n\t\tDOM.append(parent, this._body);\n\n\t\tthis._body.classList.add('cell-list-container');\n\t\tthis._createLayoutStyles();\n\t\tthis._createCellList();\n\n\t\tthis._notebookOverviewRulerContainer = document.createElement('div');\n\t\tthis._notebookOverviewRulerContainer.classList.add('notebook-overview-ruler-container');\n\t\tthis._list.scrollableElement.appendChild(this._notebookOverviewRulerContainer);\n\t\tthis._registerNotebookOverviewRuler();\n\n\t\tthis._register(this.instantiationService.createInstance(NotebookHorizontalTracker, this, this._list.scrollableElement));\n\n\t\tthis._overflowContainer = document.createElement('div');\n\t\tthis._overflowContainer.classList.add('notebook-overflow-widget-container', 'monaco-editor');\n\t\tDOM.append(parent, this._overflowContainer);\n\t}\n\n\tprivate _generateFontFamily() {\n\t\treturn this._fontInfo?.fontFamily ?? `\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`;\n\t}\n\n\tprivate _createLayoutStyles(): void {\n\t\tthis._styleElement = domStylesheets.createStyleSheet(this._body);\n\t\tconst {\n\t\t\tcellRightMargin,\n\t\t\tcellTopMargin,\n\t\t\tcellRunGutter,\n\t\t\tcellBottomMargin,\n\t\t\tcodeCellLeftMargin,\n\t\t\tmarkdownCellGutter,\n\t\t\tmarkdownCellLeftMargin,\n\t\t\tmarkdownCellBottomMargin,\n\t\t\tmarkdownCellTopMargin,\n\t\t\tcollapsedIndicatorHeight,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\toutputFontSize,\n\t\t\tfocusIndicatorLeftMargin,\n\t\t\tfocusIndicatorGap\n\t\t} = this._notebookOptions.getLayoutConfiguration();\n\n\t\tconst {\n\t\t\tinsertToolbarAlignment,\n\t\t\tcompactView,\n\t\t\tfontSize\n\t\t} = this._notebookOptions.getDisplayOptions();\n\n\t\tconst getCellEditorContainerLeftMargin = this._notebookOptions.getCellEditorContainerLeftMargin();\n\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\n\t\tconst styleSheets: string[] = [];\n\t\tif (!this._fontInfo) {\n\t\t\tthis._generateFontInfo();\n\t\t}\n\n\t\tconst fontFamily = this._generateFontFamily();\n\n\t\tstyleSheets.push(`\n\t\t.notebook-editor {\n\t\t\t--notebook-cell-output-font-size: ${outputFontSize}px;\n\t\t\t--notebook-cell-input-preview-font-size: ${fontSize}px;\n\t\t\t--notebook-cell-input-preview-font-family: ${fontFamily};\n\t\t}\n\t\t`);\n\n\t\tif (compactView) {\n\t\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row div.cell.code { margin-left: ${getCellEditorContainerLeftMargin}px; }`);\n\t\t} else {\n\t\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row div.cell.code { margin-left: ${codeCellLeftMargin}px; }`);\n\t\t}\n\n\t\t// focus indicator\n\t\tif (focusIndicator === 'border') {\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-top:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-bottom:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .markdown-cell-row .cell-inner-container:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .markdown-cell-row .cell-inner-container:after {\n\t\t\t\tcontent: \"\";\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 1px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-right:before {\n\t\t\t\tcontent: \"\";\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 1px;\n\t\t\t\theight: 100%;\n\t\t\t\tz-index: 10;\n\t\t\t}\n\n\t\t\t/* top border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-top:before {\n\t\t\t\tborder-top: 1px solid transparent;\n\t\t\t}\n\n\t\t\t/* left border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left:before {\n\t\t\t\tborder-left: 1px solid transparent;\n\t\t\t}\n\n\t\t\t/* bottom border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-bottom:before {\n\t\t\t\tborder-bottom: 1px solid transparent;\n\t\t\t}\n\n\t\t\t/* right border */\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-right:before {\n\t\t\t\tborder-right: 1px solid transparent;\n\t\t\t}\n\t\t\t`);\n\n\t\t\t// left and right border margins\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.code-cell-row.focused .cell-focus-indicator-left:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.code-cell-row.focused .cell-focus-indicator-right:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list.selection-multiple .monaco-list-row.code-cell-row.selected .cell-focus-indicator-left:before,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list.selection-multiple .monaco-list-row.code-cell-row.selected .cell-focus-indicator-right:before {\n\t\t\t\ttop: -${cellTopMargin}px; height: calc(100% + ${cellTopMargin + cellBottomMargin}px)\n\t\t\t}`);\n\t\t} else {\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left .codeOutput-focus-indicator {\n\t\t\t\tborder-left: 3px solid transparent;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\twidth: 0px;\n\t\t\t\tmargin-left: ${focusIndicatorLeftMargin}px;\n\t\t\t\tborder-color: var(--vscode-notebook-inactiveFocusedCellBorder) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.focused .cell-focus-indicator-left .codeOutput-focus-indicator-container,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-output-hover .cell-focus-indicator-left .codeOutput-focus-indicator-container,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .markdown-cell-hover .cell-focus-indicator-left .codeOutput-focus-indicator-container,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row:hover .cell-focus-indicator-left .codeOutput-focus-indicator-container {\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-left .codeOutput-focus-indicator-container:hover .codeOutput-focus-indicator {\n\t\t\t\tborder-left: 5px solid transparent;\n\t\t\t\tmargin-left: ${focusIndicatorLeftMargin - 1}px;\n\t\t\t}\n\t\t\t`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row.focused .cell-inner-container.cell-output-focus .cell-focus-indicator-left .codeOutput-focus-indicator,\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list:focus-within .monaco-list-row.focused .cell-inner-container .cell-focus-indicator-left .codeOutput-focus-indicator {\n\t\t\t\tborder-color: var(--vscode-notebook-focusedCellBorder) !important;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay .monaco-list .monaco-list-row .cell-inner-container .cell-focus-indicator-left .output-focus-indicator {\n\t\t\t\tmargin-top: ${focusIndicatorGap}px;\n\t\t\t}\n\t\t\t`);\n\t\t}\n\n\t\t// between cell insert toolbar\n\t\tif (insertToolbarPosition === 'betweenCells' || insertToolbarPosition === 'both') {\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container { display: flex; }`);\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .view-zones .cell-list-top-cell-toolbar-container { display: flex; }`);\n\t\t} else {\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container { display: none; }`);\n\t\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .view-zones .cell-list-top-cell-toolbar-container { display: none; }`);\n\t\t}\n\n\t\tif (insertToolbarAlignment === 'left') {\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .action-item:first-child,\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .action-item:first-child, .monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container .action-item:first-child {\n\t\t\t\tmargin-right: 0px !important;\n\t\t\t}`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .monaco-toolbar .action-label,\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container .monaco-toolbar .action-label, .monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container .monaco-toolbar .action-label {\n\t\t\t\tpadding: 0px !important;\n\t\t\t\tjustify-content: center;\n\t\t\t\tborder-radius: 4px;\n\t\t\t}`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container,\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container, .monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container {\n\t\t\t\talign-items: flex-start;\n\t\t\t\tjustify-content: left;\n\t\t\t\tmargin: 0 16px 0 ${8 + codeCellLeftMargin}px;\n\t\t\t}`);\n\n\t\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay .cell-list-top-cell-toolbar-container,\n\t\t\t.notebookOverlay .cell-bottom-toolbar-container .action-item {\n\t\t\t\tborder: 0px;\n\t\t\t}`);\n\t\t}\n\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .code-cell-row div.cell.code { margin-left: ${getCellEditorContainerLeftMargin}px; }`);\n\t\t// Chat Edit, deleted Cell Overlay\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .view-zones .code-cell-row div.cell.code { margin-left: ${getCellEditorContainerLeftMargin}px; }`);\n\t\t// Chat Edit, deleted Cell Overlay\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .view-zones .code-cell-row div.cell { margin-right: ${cellRightMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row div.cell { margin-right: ${cellRightMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row > .cell-inner-container { padding-top: ${cellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row > .cell-inner-container { padding-bottom: ${markdownCellBottomMargin}px; padding-top: ${markdownCellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row > .cell-inner-container.webview-backed-markdown-cell { padding: 0; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .markdown-cell-row > .webview-backed-markdown-cell.markdown-cell-edit-mode .cell.code { padding-bottom: ${markdownCellBottomMargin}px; padding-top: ${markdownCellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .output { margin: 0px ${cellRightMargin}px 0px ${getCellEditorContainerLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .output { width: calc(100% - ${getCellEditorContainerLeftMargin + cellRightMargin}px); }`);\n\n\t\t// comment\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-comment-container { left: ${getCellEditorContainerLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-comment-container { width: calc(100% - ${getCellEditorContainerLeftMargin + cellRightMargin}px); }`);\n\n\t\t// output collapse button\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay .output .output-collapse-container .expandButton { left: -${cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay .output .output-collapse-container .expandButton {\n\t\t\tposition: absolute;\n\t\t\twidth: ${cellRunGutter}px;\n\t\t\tpadding: 6px 0px;\n\t\t}`);\n\n\t\t// show more container\n\t\tstyleSheets.push(`.notebookOverlay .output-show-more-container { margin: 0px ${cellRightMargin}px 0px ${getCellEditorContainerLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .output-show-more-container { width: calc(100% - ${getCellEditorContainerLeftMargin + cellRightMargin}px); }`);\n\n\t\tstyleSheets.push(`.notebookOverlay .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row div.cell.markdown { padding-left: ${cellRunGutter}px; }`);\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container .notebook-folding-indicator { left: ${(markdownCellGutter - 20) / 2 + markdownCellLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay > .cell-list-container .notebook-folded-hint { left: ${markdownCellGutter + markdownCellLeftMargin + 8}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row :not(.webview-backed-markdown-cell) .cell-focus-indicator-top { height: ${cellTopMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-side { bottom: ${bottomToolbarGap}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row.code-cell-row .cell-focus-indicator-left { width: ${getCellEditorContainerLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row.markdown-cell-row .cell-focus-indicator-left { width: ${codeCellLeftMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator.cell-focus-indicator-right { width: ${cellRightMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-focus-indicator-bottom { height: ${cellBottomMargin}px; }`);\n\t\tstyleSheets.push(`.notebookOverlay .monaco-list .monaco-list-row .cell-shadow-container-bottom { top: ${cellBottomMargin}px; }`);\n\n\t\tstyleSheets.push(`\n\t\t\t.notebookOverlay .monaco-list.selection-multiple .monaco-list-row:has(+ .monaco-list-row.selected) .cell-focus-indicator-bottom {\n\t\t\t\theight: ${bottomToolbarGap + cellBottomMargin}px;\n\t\t\t}\n\t\t`);\n\n\t\tstyleSheets.push(`\n\t\t\t.notebookOverlay .monaco-list .monaco-list-row.code-cell-row.nb-multiCellHighlight:has(+ .monaco-list-row.nb-multiCellHighlight) .cell-focus-indicator-bottom {\n\t\t\t\theight: ${bottomToolbarGap + cellBottomMargin}px;\n\t\t\t\tbackground-color: var(--vscode-notebook-symbolHighlightBackground) !important;\n\t\t\t}\n\n\t\t\t.notebookOverlay .monaco-list .monaco-list-row.markdown-cell-row.nb-multiCellHighlight:has(+ .monaco-list-row.nb-multiCellHighlight) .cell-focus-indicator-bottom {\n\t\t\t\theight: ${bottomToolbarGap + cellBottomMargin - 6}px;\n\t\t\t\tbackground-color: var(--vscode-notebook-symbolHighlightBackground) !important;\n\t\t\t}\n\t\t`);\n\n\n\t\tstyleSheets.push(`\n\t\t\t.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .input-collapse-container .cell-collapse-preview {\n\t\t\t\tline-height: ${collapsedIndicatorHeight}px;\n\t\t\t}\n\n\t\t\t.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .input-collapse-container .cell-collapse-preview .monaco-tokenized-source {\n\t\t\t\tmax-height: ${collapsedIndicatorHeight}px;\n\t\t\t}\n\t\t`);\n\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-bottom-toolbar-container .monaco-toolbar { height: ${bottomToolbarHeight}px }`);\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .view-zones .cell-list-top-cell-toolbar-container .monaco-toolbar { height: ${bottomToolbarHeight}px }`);\n\n\t\t// cell toolbar\n\t\tstyleSheets.push(`.monaco-workbench .notebookOverlay.cell-title-toolbar-right > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-title-toolbar {\n\t\t\tright: ${cellRightMargin + 26}px;\n\t\t}\n\t\t.monaco-workbench .notebookOverlay.cell-title-toolbar-left > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-title-toolbar {\n\t\t\tleft: ${getCellEditorContainerLeftMargin + 16}px;\n\t\t}\n\t\t.monaco-workbench .notebookOverlay.cell-title-toolbar-hidden > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .cell-title-toolbar {\n\t\t\tdisplay: none;\n\t\t}`);\n\n\t\t// cell output innert container\n\t\tstyleSheets.push(`\n\t\t.monaco-workbench .notebookOverlay .output > div.foreground.output-inner-container {\n\t\t\tpadding: ${OutputInnerContainerTopPadding}px 8px;\n\t\t}\n\t\t.monaco-workbench .notebookOverlay > .cell-list-container > .monaco-list > .monaco-scrollable-element > .monaco-list-rows > .monaco-list-row .output-collapse-container {\n\t\t\tpadding: ${OutputInnerContainerTopPadding}px 8px;\n\t\t}\n\t\t`);\n\n\t\t// chat\n\t\tstyleSheets.push(`\n\t\t.monaco-workbench .notebookOverlay .cell-chat-part {\n\t\t\tmargin: 0 ${cellRightMargin}px 6px 4px;\n\t\t}\n\t\t`);\n\n\t\tthis._styleElement.textContent = styleSheets.join('\\n');\n\t}\n\n\tprivate _createCellList(): void {\n\t\tthis._body.classList.add('cell-list-container');\n\t\tthis._dndController = this._register(new CellDragAndDropController(this, this._body));\n\t\tconst getScopedContextKeyService = (container: HTMLElement) => this._list.contextKeyService.createScoped(container);\n\t\tthis._editorPool = this._register(this.instantiationService.createInstance(NotebookCellEditorPool, this, getScopedContextKeyService));\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(CodeCellRenderer, this, this._renderedEditors, this._editorPool, this._dndController, getScopedContextKeyService),\n\t\t\tthis.instantiationService.createInstance(MarkupCellRenderer, this, this._dndController, this._renderedEditors, getScopedContextKeyService),\n\t\t];\n\n\t\trenderers.forEach(renderer => {\n\t\t\tthis._register(renderer);\n\t\t});\n\n\t\tthis._listDelegate = this.instantiationService.createInstance(NotebookCellListDelegate, DOM.getWindow(this.getDomNode()));\n\t\tthis._register(this._listDelegate);\n\n\t\tconst accessibilityProvider = this.instantiationService.createInstance(NotebookAccessibilityProvider, () => this.viewModel, this.isReplHistory);\n\t\tthis._register(accessibilityProvider);\n\n\t\tthis._list = this.instantiationService.createInstance(\n\t\t\tNotebookCellList,\n\t\t\t'NotebookCellList',\n\t\t\tthis._body,\n\t\t\tthis._viewContext.notebookOptions,\n\t\t\tthis._listDelegate,\n\t\t\trenderers,\n\t\t\tthis.scopedContextKeyService,\n\t\t\t{\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tsetRowHeight: false,\n\t\t\t\tsupportDynamicHeights: true,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tmouseSupport: true,\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\ttypeNavigationEnabled: true,\n\t\t\t\tpaddingTop: 0,\n\t\t\t\tpaddingBottom: 0,\n\t\t\t\ttransformOptimization: false, //(isMacintosh && isNative) || getTitleBarStyle(this.configurationService, this.environmentService) === 'native',\n\t\t\t\tinitialSize: this._dimension,\n\t\t\t\tstyleController: (_suffix: string) => { return this._list; },\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: notebookEditorBackground,\n\t\t\t\t\tlistActiveSelectionBackground: notebookEditorBackground,\n\t\t\t\t\tlistActiveSelectionForeground: foreground,\n\t\t\t\t\tlistFocusAndSelectionBackground: notebookEditorBackground,\n\t\t\t\t\tlistFocusAndSelectionForeground: foreground,\n\t\t\t\t\tlistFocusBackground: notebookEditorBackground,\n\t\t\t\t\tlistFocusForeground: foreground,\n\t\t\t\t\tlistHoverForeground: foreground,\n\t\t\t\t\tlistHoverBackground: notebookEditorBackground,\n\t\t\t\t\tlistHoverOutline: focusBorder,\n\t\t\t\t\tlistFocusOutline: focusBorder,\n\t\t\t\t\tlistInactiveSelectionBackground: notebookEditorBackground,\n\t\t\t\t\tlistInactiveSelectionForeground: foreground,\n\t\t\t\t\tlistInactiveFocusBackground: notebookEditorBackground,\n\t\t\t\t\tlistInactiveFocusOutline: notebookEditorBackground,\n\t\t\t\t},\n\t\t\t\taccessibilityProvider\n\t\t\t},\n\t\t);\n\t\tthis._cellLayoutManager = new NotebookCellLayoutManager(this, this._list, this.logService);\n\t\tthis._dndController.setList(this._list);\n\n\t\t// create Webview\n\n\t\tthis._register(this._list);\n\t\tthis._listViewInfoAccessor = new ListViewInfoAccessor(this._list);\n\t\tthis._register(this._listViewInfoAccessor);\n\n\t\tthis._register(combinedDisposable(...renderers));\n\n\t\t// top cell toolbar\n\t\tthis._listTopCellToolbar = this._register(this.instantiationService.createInstance(ListTopCellToolbar, this, this.notebookOptions));\n\n\t\t// transparent cover\n\t\tthis._webviewTransparentCover = DOM.append(this._list.rowsContainer, $('.webview-cover'));\n\t\tthis._webviewTransparentCover.style.display = 'none';\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseDownListener(this._overlayContainer, (e: StandardMouseEvent) => {\n\t\t\tif (e.target.classList.contains('slider') && this._webviewTransparentCover) {\n\t\t\t\tthis._webviewTransparentCover.style.display = 'block';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseUpListener(this._overlayContainer, () => {\n\t\t\tif (this._webviewTransparentCover) {\n\t\t\t\t// no matter when\n\t\t\t\tthis._webviewTransparentCover.style.display = 'none';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onMouseDown(e => {\n\t\t\tif (e.element) {\n\t\t\t\tthis._onMouseDown.fire({ event: e.browserEvent, target: e.element });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onMouseUp(e => {\n\t\t\tif (e.element) {\n\t\t\t\tthis._onMouseUp.fire({ event: e.browserEvent, target: e.element });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onDidChangeFocus(_e => {\n\t\t\tthis._onDidChangeActiveEditor.fire(this);\n\t\t\tthis._onDidChangeActiveCell.fire();\n\t\t\tthis._onDidChangeFocus.fire();\n\t\t\tthis._cursorNavMode.set(false);\n\t\t}));\n\n\t\tthis._register(this._list.onContextMenu(e => {\n\t\t\tthis.showListContextMenu(e);\n\t\t}));\n\n\t\tthis._register(this._list.onDidChangeVisibleRanges(() => {\n\t\t\tthis._onDidChangeVisibleRanges.fire();\n\t\t}));\n\n\t\tthis._register(this._list.onDidScroll((e) => {\n\t\t\tif (e.scrollTop !== e.oldScrollTop) {\n\t\t\t\tthis._onDidScroll.fire();\n\t\t\t\tthis.clearActiveCellWidgets();\n\t\t\t}\n\n\t\t\tif (e.scrollTop === e.oldScrollTop && e.scrollHeightChanged) {\n\t\t\t\tthis._onDidChangeLayout.fire();\n\t\t\t}\n\t\t}));\n\n\t\tthis._focusTracker = this._register(DOM.trackFocus(this.getDomNode()));\n\t\tthis._register(this._focusTracker.onDidBlur(() => {\n\t\t\tthis._editorFocus.set(false);\n\t\t\tthis.viewModel?.setEditorFocus(false);\n\t\t\tthis._onDidBlurEmitter.fire();\n\t\t}));\n\t\tthis._register(this._focusTracker.onDidFocus(() => {\n\t\t\tthis._editorFocus.set(true);\n\t\t\tthis.viewModel?.setEditorFocus(true);\n\t\t\tthis._onDidFocusEmitter.fire();\n\t\t}));\n\n\t\tthis._registerNotebookActionsToolbar();\n\t\tthis._registerNotebookStickyScroll();\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(accessibilityProvider.verbositySettingId)) {\n\t\t\t\tthis._list.ariaLabel = accessibilityProvider?.getWidgetAriaLabel();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate showListContextMenu(e: IListContextMenuEvent<CellViewModel>) {\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tmenuId: MenuId.NotebookCellTitle,\n\t\t\tmenuActionOptions: {\n\t\t\t\tshouldForwardArgs: true\n\t\t\t},\n\t\t\tcontextKeyService: this.scopedContextKeyService,\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActionsContext: () => {\n\t\t\t\treturn {\n\t\t\t\t\tfrom: 'cellContainer'\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _registerNotebookOverviewRuler() {\n\t\tthis._notebookOverviewRuler = this._register(this.instantiationService.createInstance(NotebookOverviewRuler, this, this._notebookOverviewRulerContainer));\n\t}\n\n\tprivate _registerNotebookActionsToolbar() {\n\t\tthis._notebookTopToolbar = this._register(this.instantiationService.createInstance(NotebookEditorWorkbenchToolbar, this, this.scopedContextKeyService, this._notebookOptions, this._notebookTopToolbarContainer));\n\t\tthis._register(this._notebookTopToolbar.onDidChangeVisibility(() => {\n\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\tthis.layout(this._dimension);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _registerNotebookStickyScroll() {\n\t\tthis._notebookStickyScroll = this._register(this.instantiationService.createInstance(NotebookStickyScroll, this._notebookStickyScrollContainer, this, this._list, (sizeDelta) => {\n\t\t\tif (this.isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._dimension && this._isVisible) {\n\t\t\t\tif (sizeDelta > 0) { // delta > 0 ==> sticky is growing, cell list shrinking\n\t\t\t\t\tthis.layout(this._dimension);\n\t\t\t\t\tthis.setScrollTop(this.scrollTop + sizeDelta);\n\t\t\t\t} else if (sizeDelta < 0) { // delta < 0 ==> sticky is shrinking, cell list growing\n\t\t\t\t\tthis.setScrollTop(this.scrollTop + sizeDelta);\n\t\t\t\t\tthis.layout(this._dimension);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._onDidScroll.fire();\n\t\t}));\n\t}\n\n\tprivate _updateOutputRenderers() {\n\t\tif (!this.viewModel || !this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._webview.updateOutputRenderers();\n\t\tthis.viewModel.viewCells.forEach(cell => {\n\t\t\tcell.outputsViewModels.forEach(output => {\n\t\t\t\tif (output.pickedMimeType?.rendererId === RENDERER_NOT_AVAILABLE) {\n\t\t\t\t\toutput.resetRenderer();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDomNode() {\n\t\treturn this._overlayContainer;\n\t}\n\n\tgetOverflowContainerDomNode() {\n\t\treturn this._overflowContainer;\n\t}\n\n\tgetInnerWebview(): IWebviewElement | undefined {\n\t\treturn this._webview?.webview;\n\t}\n\n\tsetEditorProgressService(editorProgressService: IEditorProgressService): void {\n\t\tthis.editorProgressService = editorProgressService;\n\t}\n\n\tsetParentContextKeyService(parentContextKeyService: IContextKeyService): void {\n\t\tthis.scopedContextKeyService.updateParent(parentContextKeyService);\n\t}\n\n\tasync setModel(textModel: NotebookTextModel, viewState: INotebookEditorViewState | undefined, perf?: NotebookPerfMarks, viewType?: string): Promise<void> {\n\t\tif (this.viewModel === undefined || !this.viewModel.equal(textModel)) {\n\t\t\tconst oldBottomToolbarDimensions = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\t\t\tthis._detachModel();\n\t\t\tawait this._attachModel(textModel, viewType ?? textModel.viewType, viewState, perf);\n\t\t\tconst newBottomToolbarDimensions = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\n\t\t\tif (oldBottomToolbarDimensions.bottomToolbarGap !== newBottomToolbarDimensions.bottomToolbarGap\n\t\t\t\t|| oldBottomToolbarDimensions.bottomToolbarHeight !== newBottomToolbarDimensions.bottomToolbarHeight) {\n\t\t\t\tthis._styleElement?.remove();\n\t\t\t\tthis._createLayoutStyles();\n\t\t\t\tthis._webview?.updateOptions({\n\t\t\t\t\t...this.notebookOptions.computeWebviewOptions(),\n\t\t\t\t\tfontFamily: this._generateFontFamily()\n\t\t\t\t});\n\t\t\t}\n\t\t\ttype WorkbenchNotebookOpenClassification = {\n\t\t\t\towner: 'rebornix';\n\t\t\t\tcomment: 'Identify the notebook editor view type';\n\t\t\t\tscheme: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'File system provider scheme for the resource' };\n\t\t\t\text: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'File extension for the resource' };\n\t\t\t\tviewType: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'View type of the notebook editor' };\n\t\t\t\tisRepl: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the notebook editor is within a REPL editor' };\n\t\t\t};\n\n\t\t\ttype WorkbenchNotebookOpenEvent = {\n\t\t\t\tscheme: string;\n\t\t\t\text: string;\n\t\t\t\tviewType: string;\n\t\t\t\tisRepl: boolean;\n\t\t\t};\n\n\t\t\tthis.telemetryService.publicLog2<WorkbenchNotebookOpenEvent, WorkbenchNotebookOpenClassification>('notebook/editorOpened', {\n\t\t\t\tscheme: textModel.uri.scheme,\n\t\t\t\text: extname(textModel.uri),\n\t\t\t\tviewType: textModel.viewType,\n\t\t\t\tisRepl: this.isReplHistory\n\t\t\t});\n\t\t} else {\n\t\t\tthis.restoreListViewState(viewState);\n\t\t}\n\n\t\tthis._restoreSelectedKernel(viewState);\n\n\t\t// load preloads for matching kernel\n\t\tthis._loadKernelPreloads();\n\n\t\t// clear state\n\t\tthis._dndController?.clearGlobalDragState();\n\n\t\tthis._localStore.add(this._list.onDidChangeFocus(() => {\n\t\t\tthis.updateContextKeysOnFocusChange();\n\t\t}));\n\n\t\tthis.updateContextKeysOnFocusChange();\n\t\t// render markdown top down on idle\n\t\tthis._backgroundMarkdownRendering();\n\t}\n\n\tprivate _backgroundMarkdownRenderRunning = false;\n\tprivate _backgroundMarkdownRendering() {\n\t\tif (this._backgroundMarkdownRenderRunning) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._backgroundMarkdownRenderRunning = true;\n\t\tDOM.runWhenWindowIdle(DOM.getWindow(this.getDomNode()), (deadline) => {\n\t\t\tthis._backgroundMarkdownRenderingWithDeadline(deadline);\n\t\t});\n\t}\n\n\tprivate _backgroundMarkdownRenderingWithDeadline(deadline: IdleDeadline) {\n\t\tconst endTime = Date.now() + deadline.timeRemaining();\n\n\t\tconst execute = () => {\n\t\t\ttry {\n\t\t\t\tthis._backgroundMarkdownRenderRunning = true;\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.viewModel) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst firstMarkupCell = this.viewModel.viewCells.find(cell => cell.cellKind === CellKind.Markup && !this._webview?.markupPreviewMapping.has(cell.id) && !this.cellIsHidden(cell)) as MarkupCellViewModel | undefined;\n\t\t\t\tif (!firstMarkupCell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.createMarkupPreview(firstMarkupCell);\n\t\t\t} finally {\n\t\t\t\tthis._backgroundMarkdownRenderRunning = false;\n\t\t\t}\n\n\t\t\tif (Date.now() < endTime) {\n\t\t\t\tsetTimeout0(execute);\n\t\t\t} else {\n\t\t\t\tthis._backgroundMarkdownRendering();\n\t\t\t}\n\t\t};\n\n\t\texecute();\n\t}\n\n\tprivate updateContextKeysOnFocusChange() {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focused = this._list.getFocusedElements()[0];\n\t\tif (focused) {\n\t\t\tif (!this._cellContextKeyManager) {\n\t\t\t\tthis._cellContextKeyManager = this._localStore.add(this.instantiationService.createInstance(CellContextKeyManager, this, focused as CellViewModel));\n\t\t\t}\n\n\t\t\tthis._cellContextKeyManager.updateForElement(focused as CellViewModel);\n\t\t}\n\t}\n\n\tasync setOptions(options: INotebookEditorOptions | undefined) {\n\t\tif (options?.isReadOnly !== undefined) {\n\t\t\tthis._readOnly = options?.isReadOnly;\n\t\t}\n\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.viewModel.updateOptions({ isReadOnly: this._readOnly });\n\t\tthis.notebookOptions.updateOptions(this._readOnly);\n\n\t\t// reveal cell if editor options tell to do so\n\t\tconst cellOptions = options?.cellOptions ?? this._parseIndexedCellOptions(options);\n\t\tif (cellOptions) {\n\t\t\tconst cell = this.viewModel.viewCells.find(cell => cell.uri.toString() === cellOptions.resource.toString());\n\t\t\tif (cell) {\n\t\t\t\tthis.focusElement(cell);\n\t\t\t\tconst selection = cellOptions.options?.selection;\n\t\t\t\tif (selection) {\n\t\t\t\t\tcell.updateEditState(CellEditState.Editing, 'setOptions');\n\t\t\t\t\tcell.focusMode = CellFocusMode.Editor;\n\t\t\t\t\tawait this.revealRangeInCenterIfOutsideViewportAsync(cell, new Range(selection.startLineNumber, selection.startColumn, selection.endLineNumber || selection.startLineNumber, selection.endColumn || selection.startColumn));\n\t\t\t\t} else {\n\t\t\t\t\tthis._list.revealCell(cell, options?.cellRevealType ?? CellRevealType.CenterIfOutsideViewport);\n\t\t\t\t}\n\n\t\t\t\tconst editor = this._renderedEditors.get(cell)!;\n\t\t\t\tif (editor) {\n\t\t\t\t\tif (cellOptions.options?.selection) {\n\t\t\t\t\t\tconst { selection } = cellOptions.options;\n\t\t\t\t\t\tconst editorSelection = new Range(selection.startLineNumber, selection.startColumn, selection.endLineNumber || selection.startLineNumber, selection.endColumn || selection.startColumn);\n\t\t\t\t\t\teditor.setSelection(editorSelection);\n\t\t\t\t\t\teditor.revealPositionInCenterIfOutsideViewport({\n\t\t\t\t\t\t\tlineNumber: selection.startLineNumber,\n\t\t\t\t\t\t\tcolumn: selection.startColumn\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait this.revealRangeInCenterIfOutsideViewportAsync(cell, editorSelection);\n\t\t\t\t\t}\n\t\t\t\t\tif (!cellOptions.options?.preserveFocus) {\n\t\t\t\t\t\teditor.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// select cells if options tell to do so\n\t\t// todo@rebornix https://github.com/microsoft/vscode/issues/118108 support selections not just focus\n\t\t// todo@rebornix support multipe selections\n\t\tif (options?.cellSelections) {\n\t\t\tconst focusCellIndex = options.cellSelections[0].start;\n\t\t\tconst focusedCell = this.viewModel.cellAt(focusCellIndex);\n\t\t\tif (focusedCell) {\n\t\t\t\tthis.viewModel.updateSelectionsState({\n\t\t\t\t\tkind: SelectionStateType.Index,\n\t\t\t\t\tfocus: { start: focusCellIndex, end: focusCellIndex + 1 },\n\t\t\t\t\tselections: options.cellSelections\n\t\t\t\t});\n\t\t\t\tthis.revealInCenterIfOutsideViewport(focusedCell);\n\t\t\t}\n\t\t}\n\n\t\tthis._updateForOptions();\n\t\tthis._onDidChangeOptions.fire();\n\t}\n\n\tprivate _parseIndexedCellOptions(options: INotebookEditorOptions | undefined) {\n\t\tif (options?.indexedCellOptions) {\n\t\t\t// convert index based selections\n\t\t\tconst cell = this.cellAt(options.indexedCellOptions.index);\n\t\t\tif (cell) {\n\t\t\t\treturn {\n\t\t\t\t\tresource: cell.uri,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselection: options.indexedCellOptions.selection,\n\t\t\t\t\t\tpreserveFocus: false\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate _detachModel() {\n\t\tthis._localStore.clear();\n\t\tdispose(this._localCellStateListeners);\n\t\tthis._list.detachViewModel();\n\t\tthis.viewModel?.dispose();\n\t\t// avoid event\n\t\tthis.viewModel = undefined;\n\t\tthis._webview?.dispose();\n\t\tthis._webview?.element.remove();\n\t\tthis._webview = null;\n\t\tthis._list.clear();\n\t}\n\n\n\tprivate _updateForOptions(): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._editorEditable.set(!this.viewModel.options.isReadOnly);\n\t\tthis._overflowContainer.classList.toggle('notebook-editor-editable', !this.viewModel.options.isReadOnly);\n\t\tthis.getDomNode().classList.toggle('notebook-editor-editable', !this.viewModel.options.isReadOnly);\n\t}\n\n\tprivate async _resolveWebview(): Promise<BackLayerWebView<ICommonCellInfo> | null> {\n\t\tif (!this.textModel) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this._webviewResolvePromise) {\n\t\t\treturn this._webviewResolvePromise;\n\t\t}\n\n\t\tif (!this._webview) {\n\t\t\tthis._ensureWebview(this.getId(), this.textModel.viewType, this.textModel.uri);\n\t\t}\n\n\t\tthis._webviewResolvePromise = (async () => {\n\t\t\tif (!this._webview) {\n\t\t\t\tthrow new Error('Notebook output webview object is not created successfully.');\n\t\t\t}\n\n\t\t\tawait this._webview.createWebview(this.creationOptions.codeWindow ?? mainWindow);\n\t\t\tif (!this._webview.webview) {\n\t\t\t\tthrow new Error('Notebook output webview element was not created successfully.');\n\t\t\t}\n\n\t\t\tthis._localStore.add(this._webview.webview.onDidBlur(() => {\n\t\t\t\tthis._outputFocus.set(false);\n\t\t\t\tthis._webviewFocused = false;\n\n\t\t\t\tthis.updateEditorFocus();\n\t\t\t\tthis.updateCellFocusMode();\n\t\t\t}));\n\n\t\t\tthis._localStore.add(this._webview.webview.onDidFocus(() => {\n\t\t\t\tthis._outputFocus.set(true);\n\t\t\t\tthis.updateEditorFocus();\n\t\t\t\tthis._webviewFocused = true;\n\t\t\t}));\n\n\t\t\tthis._localStore.add(this._webview.onMessage(e => {\n\t\t\t\tthis._onDidReceiveMessage.fire(e);\n\t\t\t}));\n\n\t\t\treturn this._webview;\n\t\t})();\n\n\t\treturn this._webviewResolvePromise;\n\t}\n\n\tprivate _ensureWebview(id: string, viewType: string, resource: URI) {\n\t\tif (this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst that = this;\n\n\t\tthis._webview = this.instantiationService.createInstance(BackLayerWebView, {\n\t\t\tget creationOptions() { return that.creationOptions; },\n\t\t\tsetScrollTop(scrollTop: number) { that._list.scrollTop = scrollTop; },\n\t\t\ttriggerScroll(event: IMouseWheelEvent) { that._list.triggerScrollFromMouseWheelEvent(event); },\n\t\t\tgetCellByInfo: that.getCellByInfo.bind(that),\n\t\t\tgetCellById: that._getCellById.bind(that),\n\t\t\ttoggleNotebookCellSelection: that._toggleNotebookCellSelection.bind(that),\n\t\t\tfocusNotebookCell: that.focusNotebookCell.bind(that),\n\t\t\tfocusNextNotebookCell: that.focusNextNotebookCell.bind(that),\n\t\t\tupdateOutputHeight: that._updateOutputHeight.bind(that),\n\t\t\tscheduleOutputHeightAck: that._scheduleOutputHeightAck.bind(that),\n\t\t\tupdateMarkupCellHeight: that._updateMarkupCellHeight.bind(that),\n\t\t\tsetMarkupCellEditState: that._setMarkupCellEditState.bind(that),\n\t\t\tdidStartDragMarkupCell: that._didStartDragMarkupCell.bind(that),\n\t\t\tdidDragMarkupCell: that._didDragMarkupCell.bind(that),\n\t\t\tdidDropMarkupCell: that._didDropMarkupCell.bind(that),\n\t\t\tdidEndDragMarkupCell: that._didEndDragMarkupCell.bind(that),\n\t\t\tdidResizeOutput: that._didResizeOutput.bind(that),\n\t\t\tupdatePerformanceMetadata: that._updatePerformanceMetadata.bind(that),\n\t\t\tdidFocusOutputInputChange: that._didFocusOutputInputChange.bind(that),\n\t\t}, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, this.notebookRendererMessaging.getScoped(this._uuid));\n\n\t\tthis._webview.element.style.width = '100%';\n\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.attachWebview(this._webview.element);\n\t}\n\n\tprivate async _attachModel(textModel: NotebookTextModel, viewType: string, viewState: INotebookEditorViewState | undefined, perf?: NotebookPerfMarks) {\n\t\tthis._ensureWebview(this.getId(), textModel.viewType, textModel.uri);\n\n\t\tthis.viewModel = this.instantiationService.createInstance(NotebookViewModel, viewType, textModel, this._viewContext, this.getLayoutInfo(), { isReadOnly: this._readOnly });\n\t\tthis._viewContext.eventDispatcher.emit([new NotebookLayoutChangedEvent({ width: true, fontInfo: true }, this.getLayoutInfo())]);\n\t\tthis.notebookOptions.updateOptions(this._readOnly);\n\n\t\tthis._updateForOptions();\n\t\tthis._updateForNotebookConfiguration();\n\n\t\t// restore view states, including contributions\n\n\t\t{\n\t\t\t// restore view state\n\t\t\tthis.viewModel.restoreEditorViewState(viewState);\n\n\t\t\t// contribution state restore\n\n\t\t\tconst contributionsState = viewState?.contributionsState || {};\n\t\t\tfor (const [id, contribution] of this._contributions) {\n\t\t\t\tif (typeof contribution.restoreViewState === 'function') {\n\t\t\t\t\tcontribution.restoreViewState(contributionsState[id]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._localStore.add(this.viewModel.onDidChangeViewCells(e => {\n\t\t\tthis._onDidChangeViewCells.fire(e);\n\t\t}));\n\n\t\tthis._localStore.add(this.viewModel.onDidChangeSelection(() => {\n\t\t\tthis._onDidChangeSelection.fire();\n\t\t\tthis.updateSelectedMarkdownPreviews();\n\t\t}));\n\n\t\tthis._localStore.add(this._list.onWillScroll(e => {\n\t\t\tif (this._webview?.isResolved()) {\n\t\t\t\tthis._webviewTransparentCover!.style.transform = `translateY(${e.scrollTop})`;\n\t\t\t}\n\t\t}));\n\n\t\tlet hasPendingChangeContentHeight = false;\n\t\tthis._localStore.add(this._list.onDidChangeContentHeight(() => {\n\t\t\tif (hasPendingChangeContentHeight) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thasPendingChangeContentHeight = true;\n\n\t\t\tthis._localStore.add(DOM.scheduleAtNextAnimationFrame(DOM.getWindow(this.getDomNode()), () => {\n\t\t\t\thasPendingChangeContentHeight = false;\n\t\t\t\tthis._updateScrollHeight();\n\t\t\t}, 100));\n\t\t}));\n\n\t\tthis._localStore.add(this._list.onDidRemoveOutputs(outputs => {\n\t\t\toutputs.forEach(output => this.removeInset(output));\n\t\t}));\n\t\tthis._localStore.add(this._list.onDidHideOutputs(outputs => {\n\t\t\toutputs.forEach(output => this.hideInset(output));\n\t\t}));\n\t\tthis._localStore.add(this._list.onDidRemoveCellsFromView(cells => {\n\t\t\tconst hiddenCells: MarkupCellViewModel[] = [];\n\t\t\tconst deletedCells: MarkupCellViewModel[] = [];\n\n\t\t\tfor (const cell of cells) {\n\t\t\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\t\t\tconst mdCell = cell as MarkupCellViewModel;\n\t\t\t\t\tif (this.viewModel?.viewCells.find(cell => cell.handle === mdCell.handle)) {\n\t\t\t\t\t\t// Cell has been folded but is still in model\n\t\t\t\t\t\thiddenCells.push(mdCell);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Cell was deleted\n\t\t\t\t\t\tdeletedCells.push(mdCell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.hideMarkupPreviews(hiddenCells);\n\t\t\tthis.deleteMarkupPreviews(deletedCells);\n\t\t}));\n\n\t\t// init rendering\n\t\tawait this._warmupWithMarkdownRenderer(this.viewModel, viewState, perf);\n\n\t\tperf?.mark('customMarkdownLoaded');\n\n\t\t// model attached\n\t\tthis._localCellStateListeners = this.viewModel.viewCells.map(cell => this._bindCellListener(cell));\n\t\tthis._lastCellWithEditorFocus = this.viewModel.viewCells.find(viewCell => this.getActiveCell() === viewCell && viewCell.focusMode === CellFocusMode.Editor) ?? null;\n\n\t\tthis._localStore.add(this.viewModel.onDidChangeViewCells((e) => {\n\t\t\tif (this._isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// update cell listener\n\t\t\t[...e.splices].reverse().forEach(splice => {\n\t\t\t\tconst [start, deleted, newCells] = splice;\n\t\t\t\tconst deletedCells = this._localCellStateListeners.splice(start, deleted, ...newCells.map(cell => this._bindCellListener(cell)));\n\n\t\t\t\tdispose(deletedCells);\n\t\t\t});\n\n\t\t\tif (e.splices.some(s => s[2].some(cell => cell.cellKind === CellKind.Markup))) {\n\t\t\t\tthis._backgroundMarkdownRendering();\n\t\t\t}\n\t\t}));\n\n\t\tif (this._dimension) {\n\t\t\tthis._list.layout(this.getBodyHeight(this._dimension.height), this._dimension.width);\n\t\t} else {\n\t\t\tthis._list.layout();\n\t\t}\n\n\t\tthis._dndController?.clearGlobalDragState();\n\n\t\t// restore list state at last, it must be after list layout\n\t\tthis.restoreListViewState(viewState);\n\t}\n\n\tprivate _bindCellListener(cell: ICellViewModel) {\n\t\tconst store = new DisposableStore();\n\n\t\tstore.add(cell.onDidChangeLayout(e => {\n\t\t\t// e.totalHeight will be false it's not changed\n\t\t\tif (e.totalHeight || e.outerWidth) {\n\t\t\t\tthis.layoutNotebookCell(cell, cell.layoutInfo.totalHeight, e.context);\n\t\t\t}\n\t\t}));\n\n\t\tif (cell.cellKind === CellKind.Code) {\n\t\t\tstore.add((cell as CodeCellViewModel).onDidRemoveOutputs((outputs) => {\n\t\t\t\toutputs.forEach(output => this.removeInset(output));\n\t\t\t}));\n\t\t}\n\n\t\tstore.add((cell as CellViewModel).onDidChangeState(e => {\n\t\t\tif (e.inputCollapsedChanged && cell.isInputCollapsed && cell.cellKind === CellKind.Markup) {\n\t\t\t\tthis.hideMarkupPreviews([(cell as MarkupCellViewModel)]);\n\t\t\t}\n\n\t\t\tif (e.outputCollapsedChanged && cell.isOutputCollapsed && cell.cellKind === CellKind.Code) {\n\t\t\t\tcell.outputsViewModels.forEach(output => this.hideInset(output));\n\t\t\t}\n\n\t\t\tif (e.focusModeChanged) {\n\t\t\t\tthis._validateCellFocusMode(cell);\n\t\t\t}\n\t\t}));\n\n\t\tstore.add(cell.onCellDecorationsChanged(e => {\n\t\t\te.added.forEach(options => {\n\t\t\t\tif (options.className) {\n\t\t\t\t\tthis.deltaCellContainerClassNames(cell.id, [options.className], [], cell.cellKind);\n\t\t\t\t}\n\n\t\t\t\tif (options.outputClassName) {\n\t\t\t\t\tthis.deltaCellContainerClassNames(cell.id, [options.outputClassName], [], cell.cellKind);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\te.removed.forEach(options => {\n\t\t\t\tif (options.className) {\n\t\t\t\t\tthis.deltaCellContainerClassNames(cell.id, [], [options.className], cell.cellKind);\n\t\t\t\t}\n\n\t\t\t\tif (options.outputClassName) {\n\t\t\t\t\tthis.deltaCellContainerClassNames(cell.id, [], [options.outputClassName], cell.cellKind);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\treturn store;\n\t}\n\n\n\tprivate _lastCellWithEditorFocus: ICellViewModel | null = null;\n\tprivate _validateCellFocusMode(cell: ICellViewModel) {\n\t\tif (cell.focusMode !== CellFocusMode.Editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._lastCellWithEditorFocus && this._lastCellWithEditorFocus !== cell) {\n\t\t\tthis._lastCellWithEditorFocus.focusMode = CellFocusMode.Container;\n\t\t}\n\n\t\tthis._lastCellWithEditorFocus = cell;\n\t}\n\n\tprivate async _warmupWithMarkdownRenderer(viewModel: NotebookViewModel, viewState: INotebookEditorViewState | undefined, perf?: NotebookPerfMarks) {\n\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup ' + this.viewModel?.uri.toString());\n\t\tawait this._resolveWebview();\n\t\tperf?.mark('webviewCommLoaded');\n\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup - webview resolved');\n\n\t\t// make sure that the webview is not visible otherwise users will see pre-rendered markdown cells in wrong position as the list view doesn't have a correct `top` offset yet\n\t\tthis._webview!.element.style.visibility = 'hidden';\n\t\t// warm up can take around 200ms to load markdown libraries, etc.\n\t\tawait this._warmupViewportMarkdownCells(viewModel, viewState);\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup - viewport warmed up');\n\n\t\t// todo@rebornix @mjbvz, is this too complicated?\n\n\t\t/* now the webview is ready, and requests to render markdown are fast enough\n\t\t * we can start rendering the list view\n\t\t * render\n\t\t *   - markdown cell -> request to webview to (10ms, basically just latency between UI and iframe)\n\t\t *   - code cell -> render in place\n\t\t */\n\t\tthis._list.layout(0, 0);\n\t\tthis._list.attachViewModel(viewModel);\n\n\t\t// now the list widget has a correct contentHeight/scrollHeight\n\t\t// setting scrollTop will work properly\n\t\t// after setting scroll top, the list view will update `top` of the scrollable element, e.g. `top: -584px`\n\t\tthis._list.scrollTop = viewState?.scrollPosition?.top ?? 0;\n\t\tthis._debug('finish initial viewport warmup and view state restore.');\n\t\tthis._webview!.element.style.visibility = 'visible';\n\t\tthis.logService.debug('NotebookEditorWidget', 'warmup - list view model attached, set to visible');\n\t\tthis._onDidAttachViewModel.fire();\n\t}\n\n\tprivate async _warmupViewportMarkdownCells(viewModel: NotebookViewModel, viewState: INotebookEditorViewState | undefined) {\n\t\tif (viewState && viewState.cellTotalHeights) {\n\t\t\tconst totalHeightCache = viewState.cellTotalHeights;\n\t\t\tconst scrollTop = viewState.scrollPosition?.top ?? 0;\n\t\t\tconst scrollBottom = scrollTop + Math.max(this._dimension?.height ?? 0, 1080);\n\n\t\t\tlet offset = 0;\n\t\t\tconst requests: [ICellViewModel, number][] = [];\n\n\t\t\tfor (let i = 0; i < viewModel.length; i++) {\n\t\t\t\tconst cell = viewModel.cellAt(i)!;\n\t\t\t\tconst cellHeight = totalHeightCache[i] ?? 0;\n\n\t\t\t\tif (offset + cellHeight < scrollTop) {\n\t\t\t\t\toffset += cellHeight;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\t\t\trequests.push([cell, offset]);\n\t\t\t\t}\n\n\t\t\t\toffset += cellHeight;\n\n\t\t\t\tif (offset > scrollBottom) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._webview!.initializeMarkup(requests.map(([model, offset]) => this.createMarkupCellInitialization(model, offset)));\n\t\t} else {\n\t\t\tconst initRequests = viewModel.viewCells\n\t\t\t\t.filter(cell => cell.cellKind === CellKind.Markup)\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.map(cell => this.createMarkupCellInitialization(cell, -10000));\n\n\t\t\tawait this._webview!.initializeMarkup(initRequests);\n\n\t\t\t// no cached view state so we are rendering the first viewport\n\t\t\t// after above async call, we already get init height for markdown cells, we can update their offset\n\t\t\tlet offset = 0;\n\t\t\tconst offsetUpdateRequests: { id: string; top: number }[] = [];\n\t\t\tconst scrollBottom = Math.max(this._dimension?.height ?? 0, 1080);\n\t\t\tfor (const cell of viewModel.viewCells) {\n\t\t\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\t\t\toffsetUpdateRequests.push({ id: cell.id, top: offset });\n\t\t\t\t}\n\n\t\t\t\toffset += cell.getHeight(this.getLayoutInfo().fontInfo.lineHeight);\n\n\t\t\t\tif (offset > scrollBottom) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._webview?.updateScrollTops([], offsetUpdateRequests);\n\t\t}\n\t}\n\n\tprivate createMarkupCellInitialization(model: ICellViewModel, offset: number): IMarkupCellInitialization {\n\t\treturn ({\n\t\t\tmime: model.mime,\n\t\t\tcellId: model.id,\n\t\t\tcellHandle: model.handle,\n\t\t\tcontent: model.getText(),\n\t\t\toffset: offset,\n\t\t\tvisible: false,\n\t\t\tmetadata: model.metadata,\n\t\t});\n\t}\n\n\trestoreListViewState(viewState: INotebookEditorViewState | undefined): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (viewState?.scrollPosition !== undefined) {\n\t\t\tthis._list.scrollTop = viewState.scrollPosition.top;\n\t\t\tthis._list.scrollLeft = viewState.scrollPosition.left;\n\t\t} else {\n\t\t\tthis._list.scrollTop = 0;\n\t\t\tthis._list.scrollLeft = 0;\n\t\t}\n\n\t\tconst focusIdx = typeof viewState?.focus === 'number' ? viewState.focus : 0;\n\t\tif (focusIdx < this.viewModel.length) {\n\t\t\tconst element = this.viewModel.cellAt(focusIdx);\n\t\t\tif (element) {\n\t\t\t\tthis.viewModel?.updateSelectionsState({\n\t\t\t\t\tkind: SelectionStateType.Handle,\n\t\t\t\t\tprimary: element.handle,\n\t\t\t\t\tselections: [element.handle]\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (this._list.length > 0) {\n\t\t\tthis.viewModel.updateSelectionsState({\n\t\t\t\tkind: SelectionStateType.Index,\n\t\t\t\tfocus: { start: 0, end: 1 },\n\t\t\t\tselections: [{ start: 0, end: 1 }]\n\t\t\t});\n\t\t}\n\n\t\tif (viewState?.editorFocused) {\n\t\t\tconst cell = this.viewModel.cellAt(focusIdx);\n\t\t\tif (cell) {\n\t\t\t\tcell.focusMode = CellFocusMode.Editor;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _restoreSelectedKernel(viewState: INotebookEditorViewState | undefined): void {\n\t\tif (viewState?.selectedKernelId && this.textModel) {\n\t\t\tconst matching = this.notebookKernelService.getMatchingKernel(this.textModel);\n\t\t\tconst kernel = matching.all.find(k => k.id === viewState.selectedKernelId);\n\t\t\t// Selected kernel may have already been picked prior to the view state loading\n\t\t\t// If so, don't overwrite it with the saved kernel.\n\t\t\tif (kernel && !matching.selected) {\n\t\t\t\tthis.notebookKernelService.selectKernelForNotebook(kernel, this.textModel);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetEditorViewState(): INotebookEditorViewState {\n\t\tconst state = this.viewModel?.getEditorViewState();\n\t\tif (!state) {\n\t\t\treturn {\n\t\t\t\teditingCells: {},\n\t\t\t\tcellLineNumberStates: {},\n\t\t\t\teditorViewStates: {},\n\t\t\t\tcollapsedInputCells: {},\n\t\t\t\tcollapsedOutputCells: {},\n\t\t\t};\n\t\t}\n\n\t\tif (this._list) {\n\t\t\tstate.scrollPosition = { left: this._list.scrollLeft, top: this._list.scrollTop };\n\t\t\tconst cellHeights: { [key: number]: number } = {};\n\t\t\tfor (let i = 0; i < this.viewModel!.length; i++) {\n\t\t\t\tconst elm = this.viewModel!.cellAt(i) as CellViewModel;\n\t\t\t\tcellHeights[i] = elm.layoutInfo.totalHeight;\n\t\t\t}\n\n\t\t\tstate.cellTotalHeights = cellHeights;\n\n\t\t\tif (this.viewModel) {\n\t\t\t\tconst focusRange = this.viewModel.getFocus();\n\t\t\t\tconst element = this.viewModel.cellAt(focusRange.start);\n\t\t\t\tif (element) {\n\t\t\t\t\tconst itemDOM = this._list.domElementOfElement(element);\n\t\t\t\t\tconst editorFocused = element.getEditState() === CellEditState.Editing && !!(itemDOM && itemDOM.ownerDocument.activeElement && itemDOM.contains(itemDOM.ownerDocument.activeElement));\n\n\t\t\t\t\tstate.editorFocused = editorFocused;\n\t\t\t\t\tstate.focus = focusRange.start;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Save contribution view states\n\t\tconst contributionsState: { [key: string]: unknown } = {};\n\t\tfor (const [id, contribution] of this._contributions) {\n\t\t\tif (typeof contribution.saveViewState === 'function') {\n\t\t\t\tcontributionsState[id] = contribution.saveViewState();\n\t\t\t}\n\t\t}\n\t\tstate.contributionsState = contributionsState;\n\t\tif (this.textModel?.uri.scheme === Schemas.untitled) {\n\t\t\tstate.selectedKernelId = this.activeKernel?.id;\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tprivate _allowScrollBeyondLastLine() {\n\t\treturn this._scrollBeyondLastLine && !this.isReplHistory;\n\t}\n\n\tprivate getBodyHeight(dimensionHeight: number) {\n\t\treturn Math.max(dimensionHeight - (this._notebookTopToolbar?.useGlobalToolbar ? /** Toolbar height */ 26 : 0), 0);\n\t}\n\n\tlayout(dimension: DOM.Dimension, shadowElement?: HTMLElement, position?: DOM.IDomPosition): void {\n\t\tif (!shadowElement && this._shadowElementViewInfo === null) {\n\t\t\tthis._dimension = dimension;\n\t\t\tthis._position = position;\n\t\t\treturn;\n\t\t}\n\n\t\tif (dimension.width <= 0 || dimension.height <= 0) {\n\t\t\tthis.onWillHide();\n\t\t\treturn;\n\t\t}\n\n\t\tconst whenContainerStylesLoaded = this.layoutService.whenContainerStylesLoaded(DOM.getWindow(this.getDomNode()));\n\t\tif (whenContainerStylesLoaded) {\n\t\t\t// In floating windows, we need to ensure that the\n\t\t\t// container is ready for us to compute certain\n\t\t\t// layout related properties.\n\t\t\twhenContainerStylesLoaded.then(() => this.layoutNotebook(dimension, shadowElement, position));\n\t\t} else {\n\t\t\tthis.layoutNotebook(dimension, shadowElement, position);\n\t\t}\n\n\t}\n\n\tprivate layoutNotebook(dimension: DOM.Dimension, shadowElement?: HTMLElement, position?: DOM.IDomPosition) {\n\t\tif (shadowElement) {\n\t\t\tthis.updateShadowElement(shadowElement, dimension, position);\n\t\t}\n\n\t\tif (this._shadowElementViewInfo && this._shadowElementViewInfo.width <= 0 && this._shadowElementViewInfo.height <= 0) {\n\t\t\tthis.onWillHide();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._dimension = dimension;\n\t\tthis._position = position;\n\t\tconst newBodyHeight = this.getBodyHeight(dimension.height) - this.getLayoutInfo().stickyHeight;\n\t\tDOM.size(this._body, dimension.width, newBodyHeight);\n\n\t\tconst newCellListHeight = newBodyHeight;\n\t\tif (this._list.getRenderHeight() < newCellListHeight) {\n\t\t\t// the new dimension is larger than the list viewport, update its additional height first, otherwise the list view will move down a bit (as the `scrollBottom` will move down)\n\t\t\tthis._list.updateOptions({ paddingBottom: this._allowScrollBeyondLastLine() ? Math.max(0, (newCellListHeight - 50)) : 0, paddingTop: 0 });\n\t\t\tthis._list.layout(newCellListHeight, dimension.width);\n\t\t} else {\n\t\t\t// the new dimension is smaller than the list viewport, if we update the additional height, the `scrollBottom` will move up, which moves the whole list view upwards a bit. So we run a layout first.\n\t\t\tthis._list.layout(newCellListHeight, dimension.width);\n\t\t\tthis._list.updateOptions({ paddingBottom: this._allowScrollBeyondLastLine() ? Math.max(0, (newCellListHeight - 50)) : 0, paddingTop: 0 });\n\t\t}\n\n\t\tthis._overlayContainer.inert = false;\n\t\tthis._overlayContainer.style.visibility = 'visible';\n\t\tthis._overlayContainer.style.display = 'block';\n\t\tthis._overlayContainer.style.position = 'absolute';\n\t\tthis._overlayContainer.style.overflow = 'hidden';\n\n\t\tthis.layoutContainerOverShadowElement(dimension, position);\n\n\t\tif (this._webviewTransparentCover) {\n\t\t\tthis._webviewTransparentCover.style.height = `${dimension.height}px`;\n\t\t\tthis._webviewTransparentCover.style.width = `${dimension.width}px`;\n\t\t}\n\n\t\tthis._notebookTopToolbar.layout(this._dimension);\n\t\tthis._notebookOverviewRuler.layout();\n\n\t\tthis._viewContext?.eventDispatcher.emit([new NotebookLayoutChangedEvent({ width: true, fontInfo: true }, this.getLayoutInfo())]);\n\t}\n\n\tprivate updateShadowElement(shadowElement: HTMLElement, dimension?: IDimension, position?: DOM.IDomPosition) {\n\t\tthis._shadowElement = shadowElement;\n\t\tif (dimension && position) {\n\t\t\tthis._shadowElementViewInfo = {\n\t\t\t\theight: dimension.height,\n\t\t\t\twidth: dimension.width,\n\t\t\t\ttop: position.top,\n\t\t\t\tleft: position.left,\n\t\t\t};\n\t\t} else {\n\t\t\t// We have to recompute position and size ourselves (which is slow)\n\t\t\tconst containerRect = shadowElement.getBoundingClientRect();\n\t\t\tthis._shadowElementViewInfo = {\n\t\t\t\theight: containerRect.height,\n\t\t\t\twidth: containerRect.width,\n\t\t\t\ttop: containerRect.top,\n\t\t\t\tleft: containerRect.left\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate layoutContainerOverShadowElement(dimension?: DOM.Dimension, position?: DOM.IDomPosition): void {\n\t\tif (dimension && position) {\n\t\t\tthis._overlayContainer.style.top = `${position.top}px`;\n\t\t\tthis._overlayContainer.style.left = `${position.left}px`;\n\t\t\tthis._overlayContainer.style.width = `${dimension.width}px`;\n\t\t\tthis._overlayContainer.style.height = `${dimension.height}px`;\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._shadowElementViewInfo) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elementContainerRect = this._overlayContainer.parentElement?.getBoundingClientRect();\n\t\tthis._overlayContainer.style.top = `${this._shadowElementViewInfo.top - (elementContainerRect?.top || 0)}px`;\n\t\tthis._overlayContainer.style.left = `${this._shadowElementViewInfo.left - (elementContainerRect?.left || 0)}px`;\n\t\tthis._overlayContainer.style.width = `${dimension ? dimension.width : this._shadowElementViewInfo.width}px`;\n\t\tthis._overlayContainer.style.height = `${dimension ? dimension.height : this._shadowElementViewInfo.height}px`;\n\t}\n\n\t//#endregion\n\n\t//#region Focus tracker\n\tfocus() {\n\t\tthis._isVisible = true;\n\t\tthis._editorFocus.set(true);\n\n\t\tif (this._webviewFocused) {\n\t\t\tthis._webview?.focusWebview();\n\t\t} else {\n\t\t\tif (this.viewModel) {\n\t\t\t\tconst focusRange = this.viewModel.getFocus();\n\t\t\t\tconst element = this.viewModel.cellAt(focusRange.start);\n\n\t\t\t\t// The notebook editor doesn't have focus yet\n\t\t\t\tif (!this.hasEditorFocus()) {\n\t\t\t\t\tthis.focusContainer();\n\t\t\t\t\t// trigger editor to update as FocusTracker might not emit focus change event\n\t\t\t\t\tthis.updateEditorFocus();\n\t\t\t\t}\n\n\t\t\t\tif (element && element.focusMode === CellFocusMode.Editor) {\n\t\t\t\t\telement.updateEditState(CellEditState.Editing, 'editorWidget.focus');\n\t\t\t\t\telement.focusMode = CellFocusMode.Editor;\n\t\t\t\t\tthis.focusEditor(element);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._list.domFocus();\n\t\t}\n\n\t\tif (this._currentProgress) {\n\t\t\t// The editor forces progress to hide when switching editors. So if progress should be visible, force it to show when the editor is focused.\n\t\t\tthis.showProgress();\n\t\t}\n\t}\n\n\tonShow() {\n\t\tthis._isVisible = true;\n\t}\n\n\tprivate focusEditor(activeElement: CellViewModel): void {\n\t\tfor (const [element, editor] of this._renderedEditors.entries()) {\n\t\t\tif (element === activeElement) {\n\t\t\t\teditor.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tfocusContainer(clearSelection: boolean = false) {\n\t\tif (this._webviewFocused) {\n\t\t\tthis._webview?.focusWebview();\n\t\t} else {\n\t\t\tthis._list.focusContainer(clearSelection);\n\t\t}\n\t}\n\n\tselectOutputContent(cell: ICellViewModel) {\n\t\tthis._webview?.selectOutputContents(cell);\n\t}\n\n\tselectInputContents(cell: ICellViewModel) {\n\t\tthis._webview?.selectInputContents(cell);\n\t}\n\n\tonWillHide() {\n\t\tthis._isVisible = false;\n\t\tthis._editorFocus.set(false);\n\t\tthis._overlayContainer.inert = true;\n\t\tthis._overlayContainer.style.visibility = 'hidden';\n\t\tthis._overlayContainer.style.left = '-50000px';\n\t\tthis._notebookTopToolbarContainer.style.display = 'none';\n\t\tthis.clearActiveCellWidgets();\n\t}\n\n\tprivate clearActiveCellWidgets() {\n\t\tthis._renderedEditors.forEach((editor, cell) => {\n\t\t\tif (this.getActiveCell() === cell && editor) {\n\t\t\t\tSuggestController.get(editor)?.cancelSuggestWidget();\n\t\t\t\tDropIntoEditorController.get(editor)?.clearWidgets();\n\t\t\t\tCopyPasteController.get(editor)?.clearWidgets();\n\t\t\t}\n\t\t});\n\n\t\tthis._renderedEditors.forEach((editor, cell) => {\n\t\t\tconst controller = InlineCompletionsController.get(editor);\n\t\t\tif (controller?.model.get()?.inlineEditState.get()) {\n\t\t\t\teditor.render(true);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate editorHasDomFocus(): boolean {\n\t\treturn DOM.isAncestorOfActiveElement(this.getDomNode());\n\t}\n\n\tupdateEditorFocus() {\n\t\t// Note - focus going to the webview will fire 'blur', but the webview element will be\n\t\t// a descendent of the notebook editor root.\n\t\tthis._focusTracker.refreshState();\n\t\tconst focused = this.editorHasDomFocus();\n\t\tthis._editorFocus.set(focused);\n\t\tthis.viewModel?.setEditorFocus(focused);\n\t}\n\n\tupdateCellFocusMode() {\n\t\tconst activeCell = this.getActiveCell();\n\n\t\tif (activeCell?.focusMode === CellFocusMode.Output && !this._webviewFocused) {\n\t\t\t// output previously has focus, but now it's blurred.\n\t\t\tactiveCell.focusMode = CellFocusMode.Container;\n\t\t}\n\t}\n\n\thasEditorFocus() {\n\t\t// _editorFocus is driven by the FocusTracker, which is only guaranteed to _eventually_ fire blur.\n\t\t// If we need to know whether we have focus at this instant, we need to check the DOM manually.\n\t\tthis.updateEditorFocus();\n\t\treturn this.editorHasDomFocus();\n\t}\n\n\thasWebviewFocus() {\n\t\treturn this._webviewFocused;\n\t}\n\n\thasOutputTextSelection() {\n\t\tif (!this.hasEditorFocus()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst windowSelection = DOM.getWindow(this.getDomNode()).getSelection();\n\t\tif (windowSelection?.rangeCount !== 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst activeSelection = windowSelection.getRangeAt(0);\n\t\tif (activeSelection.startContainer === activeSelection.endContainer && activeSelection.endOffset - activeSelection.startOffset === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet container: Node | null = activeSelection.commonAncestorContainer;\n\n\t\tif (!this._body.contains(container)) {\n\t\t\treturn false;\n\t\t}\n\n\t\twhile (container\n\t\t\t&&\n\t\t\tcontainer !== this._body) {\n\t\t\tif ((container as HTMLElement).classList && (container as HTMLElement).classList.contains('output')) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcontainer = container.parentNode;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t_didFocusOutputInputChange(hasFocus: boolean) {\n\t\tthis._outputInputFocus.set(hasFocus);\n\t}\n\n\t//#endregion\n\n\t//#region Editor Features\n\n\tfocusElement(cell: ICellViewModel) {\n\t\tthis.viewModel?.updateSelectionsState({\n\t\t\tkind: SelectionStateType.Handle,\n\t\t\tprimary: cell.handle,\n\t\t\tselections: [cell.handle]\n\t\t});\n\t}\n\n\tget scrollTop() {\n\t\treturn this._list.scrollTop;\n\t}\n\n\tget scrollBottom() {\n\t\treturn this._list.scrollTop + this._list.getRenderHeight();\n\t}\n\n\tgetAbsoluteTopOfElement(cell: ICellViewModel) {\n\t\treturn this._list.getCellViewScrollTop(cell);\n\t}\n\n\tgetAbsoluteBottomOfElement(cell: ICellViewModel) {\n\t\treturn this._list.getCellViewScrollBottom(cell);\n\t}\n\n\tgetHeightOfElement(cell: ICellViewModel) {\n\t\treturn this._list.elementHeight(cell);\n\t}\n\n\tscrollToBottom() {\n\t\tthis._list.scrollToBottom();\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\t\tthis._list.scrollTop = scrollTop;\n\t}\n\n\trevealCellRangeInView(range: ICellRange) {\n\t\treturn this._list.revealCells(range);\n\t}\n\n\trevealInView(cell: ICellViewModel) {\n\t\treturn this._list.revealCell(cell, CellRevealType.Default);\n\t}\n\n\trevealInViewAtTop(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealType.Top);\n\t}\n\n\trevealInCenter(cell: ICellViewModel) {\n\t\tthis._list.revealCell(cell, CellRevealType.Center);\n\t}\n\n\tasync revealInCenterIfOutsideViewport(cell: ICellViewModel) {\n\t\tawait this._list.revealCell(cell, CellRevealType.CenterIfOutsideViewport);\n\t}\n\n\tasync revealFirstLineIfOutsideViewport(cell: ICellViewModel) {\n\t\tawait this._list.revealCell(cell, CellRevealType.FirstLineIfOutsideViewport);\n\t}\n\n\tasync revealLineInViewAsync(cell: ICellViewModel, line: number): Promise<void> {\n\t\treturn this._list.revealRangeInCell(cell, new Range(line, 1, line, 1), CellRevealRangeType.Default);\n\t}\n\n\tasync revealLineInCenterAsync(cell: ICellViewModel, line: number): Promise<void> {\n\t\treturn this._list.revealRangeInCell(cell, new Range(line, 1, line, 1), CellRevealRangeType.Center);\n\t}\n\n\tasync revealLineInCenterIfOutsideViewportAsync(cell: ICellViewModel, line: number): Promise<void> {\n\t\treturn this._list.revealRangeInCell(cell, new Range(line, 1, line, 1), CellRevealRangeType.CenterIfOutsideViewport);\n\t}\n\n\tasync revealRangeInViewAsync(cell: ICellViewModel, range: Selection | Range): Promise<void> {\n\t\treturn this._list.revealRangeInCell(cell, range, CellRevealRangeType.Default);\n\t}\n\n\tasync revealRangeInCenterAsync(cell: ICellViewModel, range: Selection | Range): Promise<void> {\n\t\treturn this._list.revealRangeInCell(cell, range, CellRevealRangeType.Center);\n\t}\n\n\tasync revealRangeInCenterIfOutsideViewportAsync(cell: ICellViewModel, range: Selection | Range): Promise<void> {\n\t\treturn this._list.revealRangeInCell(cell, range, CellRevealRangeType.CenterIfOutsideViewport);\n\t}\n\n\trevealCellOffsetInCenter(cell: ICellViewModel, offset: number) {\n\t\treturn this._list.revealCellOffsetInCenter(cell, offset);\n\t}\n\n\trevealOffsetInCenterIfOutsideViewport(offset: number) {\n\t\treturn this._list.revealOffsetInCenterIfOutsideViewport(offset);\n\t}\n\n\tgetViewIndexByModelIndex(index: number): number {\n\t\tif (!this._listViewInfoAccessor) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst cell = this.viewModel?.viewCells[index];\n\t\tif (!cell) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn this._listViewInfoAccessor.getViewIndex(cell);\n\t}\n\n\tgetViewHeight(cell: ICellViewModel): number {\n\t\tif (!this._listViewInfoAccessor) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn this._listViewInfoAccessor.getViewHeight(cell);\n\t}\n\n\tgetCellRangeFromViewRange(startIndex: number, endIndex: number): ICellRange | undefined {\n\t\treturn this._listViewInfoAccessor.getCellRangeFromViewRange(startIndex, endIndex);\n\t}\n\n\tgetCellsInRange(range?: ICellRange): ReadonlyArray<ICellViewModel> {\n\t\treturn this._listViewInfoAccessor.getCellsInRange(range);\n\t}\n\n\tsetCellEditorSelection(cell: ICellViewModel, range: Range): void {\n\t\tthis._list.setCellEditorSelection(cell, range);\n\t}\n\n\tsetHiddenAreas(_ranges: ICellRange[]): boolean {\n\t\treturn this._list.setHiddenAreas(_ranges, true);\n\t}\n\n\tgetVisibleRangesPlusViewportAboveAndBelow(): ICellRange[] {\n\t\treturn this._listViewInfoAccessor.getVisibleRangesPlusViewportAboveAndBelow();\n\t}\n\n\t//#endregion\n\n\t//#region Decorations\n\n\tdeltaCellDecorations(oldDecorations: string[], newDecorations: INotebookDeltaDecoration[]): string[] {\n\t\tconst ret = this.viewModel?.deltaCellDecorations(oldDecorations, newDecorations) || [];\n\t\tthis._onDidChangeDecorations.fire();\n\t\treturn ret;\n\t}\n\n\tdeltaCellContainerClassNames(cellId: string, added: string[], removed: string[], cellkind: CellKind): void {\n\t\tif (cellkind === CellKind.Markup) {\n\t\t\tthis._webview?.deltaMarkupPreviewClassNames(cellId, added, removed);\n\t\t} else {\n\t\t\tthis._webview?.deltaCellOutputContainerClassNames(cellId, added, removed);\n\t\t}\n\t}\n\n\tchangeModelDecorations<T>(callback: (changeAccessor: IModelDecorationsChangeAccessor) => T): T | null {\n\t\treturn this.viewModel?.changeModelDecorations<T>(callback) || null;\n\t}\n\n\t//#endregion\n\n\t//#region View Zones\n\tchangeViewZones(callback: (accessor: INotebookViewZoneChangeAccessor) => void): void {\n\t\tthis._list.changeViewZones(callback);\n\t\tthis._onDidChangeLayout.fire();\n\t}\n\n\tgetViewZoneLayoutInfo(id: string): { top: number; height: number } | null {\n\t\treturn this._list.getViewZoneLayoutInfo(id);\n\t}\n\t//#endregion\n\n\t//#region Overlay\n\tchangeCellOverlays(callback: (accessor: INotebookCellOverlayChangeAccessor) => void): void {\n\t\tthis._list.changeCellOverlays(callback);\n\t}\n\t//#endregion\n\n\t//#region Kernel/Execution\n\n\tprivate async _loadKernelPreloads(): Promise<void> {\n\t\tif (!this.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst { selected } = this.notebookKernelService.getMatchingKernel(this.textModel);\n\t\tif (!this._webview?.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\t\tthis._webview?.updateKernelPreloads(selected);\n\t}\n\n\tget activeKernel() {\n\t\treturn this.textModel && this.notebookKernelService.getSelectedOrSuggestedKernel(this.textModel);\n\t}\n\n\tasync cancelNotebookCells(cells?: Iterable<ICellViewModel>): Promise<void> {\n\t\tif (!this.viewModel || !this.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tif (!cells) {\n\t\t\tcells = this.viewModel.viewCells;\n\t\t}\n\t\treturn this.notebookExecutionService.cancelNotebookCellHandles(this.textModel, Array.from(cells).map(cell => cell.handle));\n\t}\n\n\tasync executeNotebookCells(cells?: Iterable<ICellViewModel>): Promise<void> {\n\t\tif (!this.viewModel || !this.hasModel()) {\n\t\t\tthis.logService.info('notebookEditorWidget', 'No NotebookViewModel, cannot execute cells');\n\t\t\treturn;\n\t\t}\n\t\tif (!cells) {\n\t\t\tcells = this.viewModel.viewCells;\n\t\t}\n\t\treturn this.notebookExecutionService.executeNotebookCells(this.textModel, Array.from(cells).map(c => c.model), this.scopedContextKeyService);\n\t}\n\n\t//#endregion\n\n\tasync layoutNotebookCell(cell: ICellViewModel, height: number, context?: CellLayoutContext): Promise<void> {\n\t\treturn this._cellLayoutManager?.layoutNotebookCell(cell, height);\n\t}\n\n\tgetActiveCell() {\n\t\tconst elements = this._list.getFocusedElements();\n\n\t\tif (elements && elements.length) {\n\t\t\treturn elements[0];\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate _toggleNotebookCellSelection(selectedCell: ICellViewModel, selectFromPrevious: boolean): void {\n\t\tconst currentSelections = this._list.getSelectedElements();\n\t\tconst isSelected = currentSelections.includes(selectedCell);\n\n\t\tconst previousSelection = selectFromPrevious ? currentSelections[currentSelections.length - 1] ?? selectedCell : selectedCell;\n\t\tconst selectedIndex = this._list.getViewIndex(selectedCell)!;\n\t\tconst previousIndex = this._list.getViewIndex(previousSelection)!;\n\n\t\tconst cellsInSelectionRange = this.getCellsInViewRange(selectedIndex, previousIndex);\n\t\tif (isSelected) {\n\t\t\t// Deselect\n\t\t\tthis._list.selectElements(currentSelections.filter(current => !cellsInSelectionRange.includes(current)));\n\t\t} else {\n\t\t\t// Add to selection\n\t\t\tthis.focusElement(selectedCell);\n\t\t\tthis._list.selectElements([...currentSelections.filter(current => !cellsInSelectionRange.includes(current)), ...cellsInSelectionRange]);\n\t\t}\n\t}\n\n\tprivate getCellsInViewRange(fromInclusive: number, toInclusive: number): ICellViewModel[] {\n\t\tconst selectedCellsInRange: ICellViewModel[] = [];\n\t\tfor (let index = 0; index < this._list.length; ++index) {\n\t\t\tconst cell = this._list.element(index);\n\t\t\tif (cell) {\n\t\t\t\tif ((index >= fromInclusive && index <= toInclusive) || (index >= toInclusive && index <= fromInclusive)) {\n\t\t\t\t\tselectedCellsInRange.push(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn selectedCellsInRange;\n\t}\n\n\tasync focusNotebookCell(cell: ICellViewModel, focusItem: 'editor' | 'container' | 'output', options?: IFocusNotebookCellOptions) {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tcell.focusedOutputId = undefined;\n\n\t\tif (focusItem === 'editor') {\n\t\t\tcell.isInputCollapsed = false;\n\t\t\tthis.focusElement(cell);\n\t\t\tthis._list.focusView();\n\n\t\t\tcell.updateEditState(CellEditState.Editing, 'focusNotebookCell');\n\t\t\tcell.focusMode = CellFocusMode.Editor;\n\t\t\tif (!options?.skipReveal) {\n\t\t\t\tif (typeof options?.focusEditorLine === 'number') {\n\t\t\t\t\tthis._cursorNavMode.set(true);\n\t\t\t\t\tawait this.revealLineInViewAsync(cell, options.focusEditorLine);\n\t\t\t\t\tconst editor = this._renderedEditors.get(cell)!;\n\t\t\t\t\tconst focusEditorLine = options.focusEditorLine;\n\t\t\t\t\teditor?.setSelection({\n\t\t\t\t\t\tstartLineNumber: focusEditorLine,\n\t\t\t\t\t\tstartColumn: 1,\n\t\t\t\t\t\tendLineNumber: focusEditorLine,\n\t\t\t\t\t\tendColumn: 1\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst selectionsStartPosition = cell.getSelectionsStartPosition();\n\t\t\t\t\tif (selectionsStartPosition?.length) {\n\t\t\t\t\t\tconst firstSelectionPosition = selectionsStartPosition[0];\n\t\t\t\t\t\tawait this.revealRangeInViewAsync(cell, Range.fromPositions(firstSelectionPosition, firstSelectionPosition));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.revealInView(cell);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t} else if (focusItem === 'output') {\n\t\t\tthis.focusElement(cell);\n\n\t\t\tif (!this.hasEditorFocus()) {\n\t\t\t\tthis._list.focusView();\n\t\t\t}\n\n\t\t\tif (!this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst firstOutputId = cell.outputsViewModels.find(o => o.model.alternativeOutputId)?.model.alternativeOutputId;\n\t\t\tconst focusElementId = options?.outputId ?? firstOutputId ?? cell.id;\n\t\t\tthis._webview.focusOutput(focusElementId, options?.altOutputId, options?.outputWebviewFocused || this._webviewFocused);\n\n\t\t\tcell.updateEditState(CellEditState.Preview, 'focusNotebookCell');\n\t\t\tcell.focusMode = CellFocusMode.Output;\n\t\t\tcell.focusedOutputId = options?.outputId;\n\t\t\tthis._outputFocus.set(true);\n\t\t\tif (!options?.skipReveal) {\n\t\t\t\tthis.revealInCenterIfOutsideViewport(cell);\n\t\t\t}\n\t\t} else {\n\t\t\t// focus container\n\t\t\tconst itemDOM = this._list.domElementOfElement(cell);\n\t\t\tif (itemDOM && itemDOM.ownerDocument.activeElement && itemDOM.contains(itemDOM.ownerDocument.activeElement)) {\n\t\t\t\t(itemDOM.ownerDocument.activeElement as HTMLElement).blur();\n\t\t\t}\n\n\t\t\tthis._webview?.blurOutput();\n\n\t\t\tcell.updateEditState(CellEditState.Preview, 'focusNotebookCell');\n\t\t\tcell.focusMode = CellFocusMode.Container;\n\n\t\t\tthis.focusElement(cell);\n\t\t\tif (!options?.skipReveal) {\n\t\t\t\tif (typeof options?.focusEditorLine === 'number') {\n\t\t\t\t\tthis._cursorNavMode.set(true);\n\t\t\t\t\tawait this.revealInView(cell);\n\t\t\t\t} else if (options?.revealBehavior === ScrollToRevealBehavior.firstLine) {\n\t\t\t\t\tawait this.revealFirstLineIfOutsideViewport(cell);\n\t\t\t\t} else if (options?.revealBehavior === ScrollToRevealBehavior.fullCell) {\n\t\t\t\t\tawait this.revealInView(cell);\n\t\t\t\t} else {\n\t\t\t\t\tawait this.revealInCenterIfOutsideViewport(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._list.focusView();\n\t\t\tthis.updateEditorFocus();\n\t\t}\n\t}\n\n\tasync focusNextNotebookCell(cell: ICellViewModel, focusItem: 'editor' | 'container' | 'output') {\n\t\tconst idx = this.viewModel?.getCellIndex(cell);\n\t\tif (typeof idx !== 'number') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCell = this.viewModel?.cellAt(idx + 1);\n\t\tif (!newCell) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.focusNotebookCell(newCell, focusItem);\n\t}\n\n\t//#endregion\n\n\t//#region Find\n\n\tprivate async _warmupCell(viewCell: CodeCellViewModel) {\n\t\tif (viewCell.isOutputCollapsed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst outputs = viewCell.outputsViewModels;\n\t\tfor (const output of outputs.slice(0, outputDisplayLimit)) {\n\t\t\tconst [mimeTypes, pick] = output.resolveMimeTypes(this.textModel!, undefined);\n\t\t\tif (!mimeTypes.find(mimeType => mimeType.isTrusted) || mimeTypes.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst pickedMimeTypeRenderer = mimeTypes[pick];\n\n\t\t\tif (!pickedMimeTypeRenderer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst renderer = this._notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\n\t\t\tif (!renderer) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst result: IInsetRenderOutput = { type: RenderOutputType.Extension, renderer, source: output, mimeType: pickedMimeTypeRenderer.mimeType };\n\t\t\tconst inset = this._webview?.insetMapping.get(result.source);\n\t\t\tif (!inset || !inset.initialized) {\n\t\t\t\tconst p = new Promise<void>(resolve => {\n\t\t\t\t\tthis._register(Event.any(this.onDidRenderOutput, this.onDidRemoveOutput)(e => {\n\t\t\t\t\t\tif (e.model === result.source.model) {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t\tthis.createOutput(viewCell, result, 0, false);\n\t\t\t\tawait p;\n\t\t\t} else {\n\t\t\t\t// request to update its visibility\n\t\t\t\tthis.createOutput(viewCell, result, 0, false);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t}\n\n\tprivate async _warmupAll(includeOutput: boolean) {\n\t\tif (!this.hasModel() || !this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cells = this.viewModel.viewCells;\n\t\tconst requests = [];\n\n\t\tfor (let i = 0; i < cells.length; i++) {\n\t\t\tif (cells[i].cellKind === CellKind.Markup && !this._webview!.markupPreviewMapping.has(cells[i].id)) {\n\t\t\t\trequests.push(this.createMarkupPreview(cells[i]));\n\t\t\t}\n\t\t}\n\n\t\tif (includeOutput && this._list) {\n\t\t\tfor (let i = 0; i < this._list.length; i++) {\n\t\t\t\tconst cell = this._list.element(i);\n\n\t\t\t\tif (cell?.cellKind === CellKind.Code) {\n\t\t\t\t\trequests.push(this._warmupCell((cell as CodeCellViewModel)));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all(requests);\n\t}\n\n\tprivate async _warmupSelection(includeOutput: boolean, selectedCellRanges: ICellRange[]) {\n\t\tif (!this.hasModel() || !this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cells = this.viewModel.viewCells;\n\t\tconst requests = [];\n\n\t\tfor (const range of selectedCellRanges) {\n\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\tif (cells[i].cellKind === CellKind.Markup && !this._webview!.markupPreviewMapping.has(cells[i].id)) {\n\t\t\t\t\trequests.push(this.createMarkupPreview(cells[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (includeOutput && this._list) {\n\t\t\tfor (const range of selectedCellRanges) {\n\t\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\t\tconst cell = this._list.element(i);\n\n\t\t\t\t\tif (cell?.cellKind === CellKind.Code) {\n\t\t\t\t\t\trequests.push(this._warmupCell((cell as CodeCellViewModel)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all(requests);\n\t}\n\n\tasync find(query: string, options: INotebookFindOptions, token: CancellationToken, skipWarmup: boolean = false, shouldGetSearchPreviewInfo = false, ownerID?: string): Promise<CellFindMatchWithIndex[]> {\n\t\tif (!this._notebookViewModel) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!ownerID) {\n\t\t\townerID = this.getId();\n\t\t}\n\n\t\tconst findMatches = this._notebookViewModel.find(query, options).filter(match => match.length > 0);\n\n\t\tif ((!options.includeMarkupPreview && !options.includeOutput) || options.findScope?.findScopeType === NotebookFindScopeType.Text) {\n\t\t\tthis._webview?.findStop(ownerID);\n\t\t\treturn findMatches;\n\t\t}\n\n\t\t// search in webview enabled\n\n\t\tconst matchMap: { [key: string]: CellFindMatchWithIndex } = {};\n\t\tfindMatches.forEach(match => {\n\t\t\tmatchMap[match.cell.id] = match;\n\t\t});\n\n\t\tif (this._webview) {\n\t\t\t// request all or some outputs to be rendered\n\t\t\t// measure perf\n\t\t\tconst start = Date.now();\n\t\t\tif (options.findScope && options.findScope.findScopeType === NotebookFindScopeType.Cells && options.findScope.selectedCellRanges) {\n\t\t\t\tawait this._warmupSelection(!!options.includeOutput, options.findScope.selectedCellRanges);\n\t\t\t} else {\n\t\t\t\tawait this._warmupAll(!!options.includeOutput);\n\t\t\t}\n\t\t\tconst end = Date.now();\n\t\t\tthis.logService.debug('Find', `Warmup time: ${end - start}ms`);\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tlet findIds: string[] = [];\n\t\t\tif (options.findScope && options.findScope.findScopeType === NotebookFindScopeType.Cells && options.findScope.selectedCellRanges) {\n\t\t\t\tconst selectedIndexes = cellRangesToIndexes(options.findScope.selectedCellRanges);\n\t\t\t\tfindIds = selectedIndexes.map<string>(index => this._notebookViewModel?.viewCells[index].id ?? '');\n\t\t\t}\n\n\t\t\tconst webviewMatches = await this._webview.find(query, { caseSensitive: options.caseSensitive, wholeWord: options.wholeWord, includeMarkup: !!options.includeMarkupPreview, includeOutput: !!options.includeOutput, shouldGetSearchPreviewInfo, ownerID, findIds: findIds });\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\t// attach webview matches to model find matches\n\t\t\twebviewMatches.forEach(match => {\n\t\t\t\tconst cell = this._notebookViewModel!.viewCells.find(cell => cell.id === match.cellId);\n\n\t\t\t\tif (!cell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (match.type === 'preview') {\n\t\t\t\t\t// markup preview\n\t\t\t\t\tif (cell.getEditState() === CellEditState.Preview && !options.includeMarkupPreview) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cell.getEditState() === CellEditState.Editing && options.includeMarkupInput) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!options.includeOutput) {\n\t\t\t\t\t\t// skip outputs if not included\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst exisitingMatch = matchMap[match.cellId];\n\n\t\t\t\tif (exisitingMatch) {\n\t\t\t\t\texisitingMatch.webviewMatches.push(match);\n\t\t\t\t} else {\n\n\t\t\t\t\tmatchMap[match.cellId] = new CellFindMatchModel(\n\t\t\t\t\t\tthis._notebookViewModel!.viewCells.find(cell => cell.id === match.cellId)!,\n\t\t\t\t\t\tthis._notebookViewModel!.viewCells.findIndex(cell => cell.id === match.cellId)!,\n\t\t\t\t\t\t[],\n\t\t\t\t\t\t[match]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst ret: CellFindMatchWithIndex[] = [];\n\t\tthis._notebookViewModel.viewCells.forEach((cell, index) => {\n\t\t\tif (matchMap[cell.id]) {\n\t\t\t\tret.push(new CellFindMatchModel(cell, index, matchMap[cell.id].contentMatches, matchMap[cell.id].webviewMatches));\n\t\t\t}\n\t\t});\n\n\t\treturn ret;\n\t}\n\n\tasync findHighlightCurrent(matchIndex: number, ownerID?: string): Promise<number> {\n\t\tif (!this._webview) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this._webview?.findHighlightCurrent(matchIndex, ownerID ?? this.getId());\n\t}\n\n\tasync findUnHighlightCurrent(matchIndex: number, ownerID?: string): Promise<void> {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this._webview?.findUnHighlightCurrent(matchIndex, ownerID ?? this.getId());\n\t}\n\n\tfindStop(ownerID?: string) {\n\t\tthis._webview?.findStop(ownerID ?? this.getId());\n\t}\n\n\t//#endregion\n\n\t//#region MISC\n\n\tgetLayoutInfo(): NotebookLayoutInfo {\n\t\tif (!this._list) {\n\t\t\tthrow new Error('Editor is not initalized successfully');\n\t\t}\n\n\t\tif (!this._fontInfo) {\n\t\t\tthis._generateFontInfo();\n\t\t}\n\n\t\tlet listViewOffset = 0;\n\t\tif (this._dimension) {\n\t\t\tlistViewOffset = (this._notebookTopToolbar?.useGlobalToolbar ? /** Toolbar height */ 26 : 0) + (this._notebookStickyScroll?.getCurrentStickyHeight() ?? 0);\n\t\t}\n\n\t\treturn {\n\t\t\twidth: this._dimension?.width ?? 0,\n\t\t\theight: this._dimension?.height ?? 0,\n\t\t\tscrollHeight: this._list?.getScrollHeight() ?? 0,\n\t\t\tfontInfo: this._fontInfo!,\n\t\t\tstickyHeight: this._notebookStickyScroll?.getCurrentStickyHeight() ?? 0,\n\t\t\tlistViewOffsetTop: listViewOffset\n\t\t};\n\t}\n\n\tasync createMarkupPreview(cell: MarkupCellViewModel) {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tif (!this._webview || !this._list.webviewElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.viewModel || !this._list.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.viewModel.getCellIndex(cell) === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.cellIsHidden(cell)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\tconst cellTop = this._list.getCellViewScrollTop(cell);\n\t\tawait this._webview.showMarkupPreview({\n\t\t\tmime: cell.mime,\n\t\t\tcellHandle: cell.handle,\n\t\t\tcellId: cell.id,\n\t\t\tcontent: cell.getText(),\n\t\t\toffset: cellTop + top,\n\t\t\tvisible: true,\n\t\t\tmetadata: cell.metadata,\n\t\t});\n\t}\n\n\tprivate cellIsHidden(cell: ICellViewModel): boolean {\n\t\tconst modelIndex = this.viewModel!.getCellIndex(cell);\n\t\tconst foldedRanges = this.viewModel!.getHiddenRanges();\n\t\treturn foldedRanges.some(range => modelIndex >= range.start && modelIndex <= range.end);\n\t}\n\n\tasync unhideMarkupPreviews(cells: readonly MarkupCellViewModel[]) {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tawait this._webview?.unhideMarkupPreviews(cells.map(cell => cell.id));\n\t}\n\n\tasync hideMarkupPreviews(cells: readonly MarkupCellViewModel[]) {\n\t\tif (!this._webview || !cells.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tawait this._webview?.hideMarkupPreviews(cells.map(cell => cell.id));\n\t}\n\n\tasync deleteMarkupPreviews(cells: readonly MarkupCellViewModel[]) {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tawait this._webview?.deleteMarkupPreviews(cells.map(cell => cell.id));\n\t}\n\n\tprivate async updateSelectedMarkdownPreviews(): Promise<void> {\n\t\tif (!this._webview) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._webview.isResolved()) {\n\t\t\tawait this._resolveWebview();\n\t\t}\n\n\t\tconst selectedCells = this.getSelectionViewModels().map(cell => cell.id);\n\n\t\t// Only show selection when there is more than 1 cell selected\n\t\tawait this._webview?.updateMarkupPreviewSelections(selectedCells.length > 1 ? selectedCells : []);\n\t}\n\n\tasync createOutput(cell: CodeCellViewModel, output: IInsetRenderOutput, offset: number, createWhenIdle: boolean): Promise<void> {\n\t\tthis._insetModifyQueueByOutputId.queue(output.source.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._webview.isResolved()) {\n\t\t\t\tawait this._resolveWebview();\n\t\t\t}\n\n\t\t\tif (!this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._list.webviewElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (output.type === RenderOutputType.Extension) {\n\t\t\t\tthis.notebookRendererMessaging.prepare(output.renderer.id);\n\t\t\t}\n\n\t\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell) + top;\n\n\t\t\tconst existingOutput = this._webview.insetMapping.get(output.source);\n\t\t\tif (!existingOutput\n\t\t\t\t|| (!existingOutput.renderer && output.type === RenderOutputType.Extension)\n\t\t\t) {\n\t\t\t\tif (createWhenIdle) {\n\t\t\t\t\tthis._webview.requestCreateOutputWhenWebviewIdle({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri, executionId: cell.internalMetadata.executionId }, output, cellTop, offset);\n\t\t\t\t} else {\n\t\t\t\t\tthis._webview.createOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri, executionId: cell.internalMetadata.executionId }, output, cellTop, offset);\n\t\t\t\t}\n\t\t\t} else if (existingOutput.renderer\n\t\t\t\t&& output.type === RenderOutputType.Extension\n\t\t\t\t&& existingOutput.renderer.id !== output.renderer.id) {\n\t\t\t\t// switch mimetype\n\t\t\t\tthis._webview.removeInsets([output.source]);\n\t\t\t\tthis._webview.createOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri }, output, cellTop, offset);\n\t\t\t} else if (existingOutput.versionId !== output.source.model.versionId) {\n\t\t\t\tthis._webview.updateOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri, executionId: cell.internalMetadata.executionId }, output, cellTop, offset);\n\t\t\t} else {\n\t\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(output.source);\n\t\t\t\tconst outputOffset = cell.getOutputOffset(outputIndex);\n\t\t\t\tthis._webview.updateScrollTops([{\n\t\t\t\t\tcell,\n\t\t\t\t\toutput: output.source,\n\t\t\t\t\tcellTop,\n\t\t\t\t\toutputOffset,\n\t\t\t\t\tforceDisplay: !cell.isOutputCollapsed,\n\t\t\t\t}], []);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync updateOutput(cell: CodeCellViewModel, output: IInsetRenderOutput, offset: number): Promise<void> {\n\t\tthis._insetModifyQueueByOutputId.queue(output.source.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview || cell.isOutputCollapsed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._webview.isResolved()) {\n\t\t\t\tawait this._resolveWebview();\n\t\t\t}\n\n\t\t\tif (!this._webview || !this._list.webviewElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this._webview.insetMapping.has(output.source)) {\n\t\t\t\treturn this.createOutput(cell, output, offset, false);\n\t\t\t}\n\n\t\t\tif (output.type === RenderOutputType.Extension) {\n\t\t\t\tthis.notebookRendererMessaging.prepare(output.renderer.id);\n\t\t\t}\n\n\t\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell) + top;\n\t\t\tthis._webview.updateOutput({ cellId: cell.id, cellHandle: cell.handle, cellUri: cell.uri }, output, cellTop, offset);\n\t\t});\n\t}\n\n\tasync copyOutputImage(cellOutput: ICellOutputViewModel): Promise<void> {\n\t\tthis._webview?.copyImage(cellOutput);\n\t}\n\n\tremoveInset(output: ICellOutputViewModel) {\n\t\tthis._insetModifyQueueByOutputId.queue(output.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._webview?.isResolved()) {\n\t\t\t\tthis._webview.removeInsets([output]);\n\t\t\t}\n\n\t\t\tthis._onDidRemoveOutput.fire(output);\n\t\t});\n\t}\n\n\thideInset(output: ICellOutputViewModel) {\n\t\tthis._insetModifyQueueByOutputId.queue(output.model.outputId, async () => {\n\t\t\tif (this._isDisposed || !this._webview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._webview?.isResolved()) {\n\t\t\t\tthis._webview.hideInset(output);\n\t\t\t}\n\t\t});\n\t}\n\n\t//#region --- webview IPC ----\n\tpostMessage(message: unknown) {\n\t\tif (this._webview?.isResolved()) {\n\t\t\tthis._webview.postKernelMessage(message);\n\t\t}\n\t}\n\n\t//#endregion\n\n\taddClassName(className: string) {\n\t\tthis._overlayContainer.classList.add(className);\n\t}\n\n\tremoveClassName(className: string) {\n\t\tthis._overlayContainer.classList.remove(className);\n\t}\n\n\tcellAt(index: number): ICellViewModel | undefined {\n\t\treturn this.viewModel?.cellAt(index);\n\t}\n\n\tgetCellByInfo(cellInfo: ICommonCellInfo): ICellViewModel {\n\t\tconst { cellHandle } = cellInfo;\n\t\treturn this.viewModel?.viewCells.find(vc => vc.handle === cellHandle) as CodeCellViewModel;\n\t}\n\n\tgetCellByHandle(handle: number): ICellViewModel | undefined {\n\t\treturn this.viewModel?.getCellByHandle(handle);\n\t}\n\n\tgetCellIndex(cell: ICellViewModel) {\n\t\treturn this.viewModel?.getCellIndexByHandle(cell.handle);\n\t}\n\n\tgetNextVisibleCellIndex(index: number): number | undefined {\n\t\treturn this.viewModel?.getNextVisibleCellIndex(index);\n\t}\n\n\tgetPreviousVisibleCellIndex(index: number): number | undefined {\n\t\treturn this.viewModel?.getPreviousVisibleCellIndex(index);\n\t}\n\n\tprivate _updateScrollHeight() {\n\t\tif (this._isDisposed || !this._webview?.isResolved()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._list.webviewElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollHeight = this._list.scrollHeight;\n\t\tthis._webview.element.style.height = `${scrollHeight + NOTEBOOK_WEBVIEW_BOUNDARY * 2}px`;\n\n\t\tconst webviewTop = parseInt(this._list.webviewElement.domNode.style.top, 10);\n\t\tconst top = !!webviewTop ? (0 - webviewTop) : 0;\n\n\t\tconst updateItems: IDisplayOutputLayoutUpdateRequest[] = [];\n\t\tconst removedItems: ICellOutputViewModel[] = [];\n\t\tthis._webview?.insetMapping.forEach((value, key) => {\n\t\t\tconst cell = this.viewModel?.getCellByHandle(value.cellInfo.cellHandle);\n\t\t\tif (!cell || !(cell instanceof CodeCellViewModel)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.viewModel?.viewCells.find(cell => cell.handle === value.cellInfo.cellHandle);\n\t\t\tconst viewIndex = this._list.getViewIndex(cell);\n\n\t\t\tif (viewIndex === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (cell.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t// output is already gone\n\t\t\t\tremovedItems.push(key);\n\t\t\t}\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell);\n\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(key);\n\t\t\tconst outputOffset = cell.getOutputOffset(outputIndex);\n\t\t\tupdateItems.push({\n\t\t\t\tcell,\n\t\t\t\toutput: key,\n\t\t\t\tcellTop: cellTop + top,\n\t\t\t\toutputOffset,\n\t\t\t\tforceDisplay: false,\n\t\t\t});\n\t\t});\n\n\t\tthis._webview.removeInsets(removedItems);\n\n\t\tconst markdownUpdateItems: { id: string; top: number }[] = [];\n\t\tfor (const cellId of this._webview.markupPreviewMapping.keys()) {\n\t\t\tconst cell = this.viewModel?.viewCells.find(cell => cell.id === cellId);\n\t\t\tif (cell) {\n\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(cell);\n\t\t\t\t// markdownUpdateItems.push({ id: cellId, top: cellTop });\n\t\t\t\tmarkdownUpdateItems.push({ id: cellId, top: cellTop + top });\n\t\t\t}\n\t\t}\n\n\t\tif (markdownUpdateItems.length || updateItems.length) {\n\t\t\tthis._debug('_list.onDidChangeContentHeight/markdown', markdownUpdateItems);\n\t\t\tthis._webview?.updateScrollTops(updateItems, markdownUpdateItems);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region BacklayerWebview delegate\n\tprivate _updateOutputHeight(cellInfo: ICommonCellInfo, output: ICellOutputViewModel, outputHeight: number, isInit: boolean, source?: string): void {\n\t\tconst cell = this.viewModel?.viewCells.find(vc => vc.handle === cellInfo.cellHandle);\n\t\tif (cell && cell instanceof CodeCellViewModel) {\n\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(output);\n\t\t\tif (outputIndex > -1) {\n\t\t\t\tthis._debug('update cell output', cell.handle, outputHeight);\n\t\t\t\tcell.updateOutputHeight(outputIndex, outputHeight, source);\n\t\t\t\tthis.layoutNotebookCell(cell, cell.layoutInfo.totalHeight);\n\n\t\t\t\tif (isInit) {\n\t\t\t\t\tthis._onDidRenderOutput.fire(output);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._debug('tried to update cell output that does not exist');\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _pendingOutputHeightAcks = new Map</* outputId */ string, IAckOutputHeight>();\n\n\tprivate _scheduleOutputHeightAck(cellInfo: ICommonCellInfo, outputId: string, height: number) {\n\t\tconst wasEmpty = this._pendingOutputHeightAcks.size === 0;\n\t\tthis._pendingOutputHeightAcks.set(outputId, { cellId: cellInfo.cellId, outputId, height });\n\n\t\tif (wasEmpty) {\n\t\t\tDOM.scheduleAtNextAnimationFrame(DOM.getWindow(this.getDomNode()), () => {\n\t\t\t\tthis._debug('ack height');\n\t\t\t\tthis._updateScrollHeight();\n\n\t\t\t\tthis._webview?.ackHeight([...this._pendingOutputHeightAcks.values()]);\n\n\t\t\t\tthis._pendingOutputHeightAcks.clear();\n\t\t\t}, -1); // -1 priority because this depends on calls to layoutNotebookCell, and that may be called multiple times before this runs\n\t\t}\n\t}\n\n\tprivate _getCellById(cellId: string): ICellViewModel | undefined {\n\t\treturn this.viewModel?.viewCells.find(vc => vc.id === cellId);\n\t}\n\n\tprivate _updateMarkupCellHeight(cellId: string, height: number, isInit: boolean) {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell && cell instanceof MarkupCellViewModel) {\n\t\t\tconst { bottomToolbarGap } = this._notebookOptions.computeBottomToolbarDimensions(this.viewModel?.viewType);\n\t\t\tthis._debug('updateMarkdownCellHeight', cell.handle, height + bottomToolbarGap, isInit);\n\t\t\tcell.renderedMarkdownHeight = height;\n\t\t}\n\t}\n\n\tprivate _setMarkupCellEditState(cellId: string, editState: CellEditState): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tthis.revealInView(cell);\n\t\t\tcell.updateEditState(editState, 'setMarkdownCellEditState');\n\t\t}\n\t}\n\n\tprivate _didStartDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tconst webviewOffset = this._list.webviewElement ? -parseInt(this._list.webviewElement.domNode.style.top, 10) : 0;\n\t\t\tthis._dndController?.startExplicitDrag(cell, event.dragOffsetY - webviewOffset);\n\t\t}\n\t}\n\n\tprivate _didDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tconst webviewOffset = this._list.webviewElement ? -parseInt(this._list.webviewElement.domNode.style.top, 10) : 0;\n\t\t\tthis._dndController?.explicitDrag(cell, event.dragOffsetY - webviewOffset);\n\t\t}\n\t}\n\n\tprivate _didDropMarkupCell(cellId: string, event: { dragOffsetY: number; ctrlKey: boolean; altKey: boolean }): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tconst webviewOffset = this._list.webviewElement ? -parseInt(this._list.webviewElement.domNode.style.top, 10) : 0;\n\t\t\tevent.dragOffsetY -= webviewOffset;\n\t\t\tthis._dndController?.explicitDrop(cell, event);\n\t\t}\n\t}\n\n\tprivate _didEndDragMarkupCell(cellId: string): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell instanceof MarkupCellViewModel) {\n\t\t\tthis._dndController?.endExplicitDrag(cell);\n\t\t}\n\t}\n\n\tprivate _didResizeOutput(cellId: string): void {\n\t\tconst cell = this._getCellById(cellId);\n\t\tif (cell) {\n\t\t\tthis._onDidResizeOutputEmitter.fire(cell);\n\t\t}\n\t}\n\n\tprivate _updatePerformanceMetadata(cellId: string, executionId: string, duration: number, rendererId: string): void {\n\t\tif (!this.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cell = this._getCellById(cellId);\n\t\tconst cellIndex = !cell ? undefined : this.getCellIndex(cell);\n\t\tif (cell?.internalMetadata.executionId === executionId && cellIndex !== undefined) {\n\t\t\tconst renderDurationMap = cell.internalMetadata.renderDuration || {};\n\t\t\trenderDurationMap[rendererId] = (renderDurationMap[rendererId] ?? 0) + duration;\n\n\t\t\tthis.textModel.applyEdits([\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.PartialInternalMetadata,\n\t\t\t\t\tindex: cellIndex,\n\t\t\t\t\tinternalMetadata: {\n\t\t\t\t\t\texecutionId: executionId,\n\t\t\t\t\t\trenderDuration: renderDurationMap\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t], true, undefined, () => undefined, undefined, false);\n\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region Editor Contributions\n\tgetContribution<T extends INotebookEditorContribution>(id: string): T {\n\t\treturn <T>(this._contributions.get(id) || null);\n\t}\n\n\t//#endregion\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\t// dispose webview first\n\t\tthis._webview?.dispose();\n\t\tthis._webview = null;\n\n\t\tthis.notebookEditorService.removeNotebookEditor(this);\n\t\tdispose(this._contributions.values());\n\t\tthis._contributions.clear();\n\n\t\tthis._localStore.clear();\n\t\tdispose(this._localCellStateListeners);\n\t\tthis._list.dispose();\n\t\tthis._cellLayoutManager?.dispose();\n\t\tthis._listTopCellToolbar?.dispose();\n\n\t\tthis._overlayContainer.remove();\n\t\tthis.viewModel?.dispose();\n\n\t\tthis._renderedEditors.clear();\n\t\tthis._baseCellEditorOptions.forEach(v => v.dispose());\n\t\tthis._baseCellEditorOptions.clear();\n\n\t\tthis._notebookOverviewRulerContainer.remove();\n\n\t\tsuper.dispose();\n\n\t\t// unref\n\t\tthis._webview = null;\n\t\tthis._webviewResolvePromise = null;\n\t\tthis._webviewTransparentCover = null;\n\t\tthis._dndController = null;\n\t\tthis._listTopCellToolbar = null;\n\t\tthis._notebookViewModel = undefined;\n\t\tthis._cellContextKeyManager = null;\n\t\tthis._notebookTopToolbar = null!;\n\t\tthis._list = null!;\n\t\tthis._listViewInfoAccessor = null!;\n\t\tthis._listDelegate = null;\n\t}\n\n\ttoJSON(): { notebookUri: URI | undefined } {\n\t\treturn {\n\t\t\tnotebookUri: this.viewModel?.uri,\n\t\t};\n\t}\n}\n\nregisterZIndex(ZIndex.Base, 5, 'notebook-progress-bar',);\nregisterZIndex(ZIndex.Base, 10, 'notebook-list-insertion-indicator');\nregisterZIndex(ZIndex.Base, 20, 'notebook-cell-editor-outline');\nregisterZIndex(ZIndex.Base, 25, 'notebook-scrollbar');\nregisterZIndex(ZIndex.Base, 26, 'notebook-cell-status');\nregisterZIndex(ZIndex.Base, 26, 'notebook-folding-indicator');\nregisterZIndex(ZIndex.Base, 27, 'notebook-output');\nregisterZIndex(ZIndex.Base, 28, 'notebook-cell-bottom-toolbar-container');\nregisterZIndex(ZIndex.Base, 29, 'notebook-run-button-container');\nregisterZIndex(ZIndex.Base, 29, 'notebook-input-collapse-condicon');\nregisterZIndex(ZIndex.Base, 30, 'notebook-cell-output-toolbar');\nregisterZIndex(ZIndex.Sash, 1, 'notebook-cell-expand-part-button');\nregisterZIndex(ZIndex.Sash, 2, 'notebook-cell-toolbar');\nregisterZIndex(ZIndex.Sash, 3, 'notebook-cell-toolbar-dropdown-active');\n\nexport const notebookCellBorder = registerColor('notebook.cellBorderColor', {\n\tdark: transparent(listInactiveSelectionBackground, 1),\n\tlight: transparent(listInactiveSelectionBackground, 1),\n\thcDark: PANEL_BORDER,\n\thcLight: PANEL_BORDER\n}, nls.localize('notebook.cellBorderColor', \"The border color for notebook cells.\"));\n\nexport const focusedEditorBorderColor = registerColor('notebook.focusedEditorBorder', focusBorder, nls.localize('notebook.focusedEditorBorder', \"The color of the notebook cell editor border.\"));\n\nexport const cellStatusIconSuccess = registerColor('notebookStatusSuccessIcon.foreground', debugIconStartForeground, nls.localize('notebookStatusSuccessIcon.foreground', \"The error icon color of notebook cells in the cell status bar.\"));\n\nexport const runningCellRulerDecorationColor = registerColor('notebookEditorOverviewRuler.runningCellForeground', debugIconStartForeground, nls.localize('notebookEditorOverviewRuler.runningCellForeground', \"The color of the running cell decoration in the notebook editor overview ruler.\"));\n\nexport const cellStatusIconError = registerColor('notebookStatusErrorIcon.foreground', errorForeground, nls.localize('notebookStatusErrorIcon.foreground', \"The error icon color of notebook cells in the cell status bar.\"));\n\nexport const cellStatusIconRunning = registerColor('notebookStatusRunningIcon.foreground', foreground, nls.localize('notebookStatusRunningIcon.foreground', \"The running icon color of notebook cells in the cell status bar.\"));\n\nexport const notebookOutputContainerBorderColor = registerColor('notebook.outputContainerBorderColor', null, nls.localize('notebook.outputContainerBorderColor', \"The border color of the notebook output container.\"));\n\nexport const notebookOutputContainerColor = registerColor('notebook.outputContainerBackgroundColor', null, nls.localize('notebook.outputContainerBackgroundColor', \"The color of the notebook output container background.\"));\n\n// TODO@rebornix currently also used for toolbar border, if we keep all of this, pick a generic name\nexport const CELL_TOOLBAR_SEPERATOR = registerColor('notebook.cellToolbarSeparator', {\n\tdark: Color.fromHex('#808080').transparent(0.35),\n\tlight: Color.fromHex('#808080').transparent(0.35),\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, nls.localize('notebook.cellToolbarSeparator', \"The color of the separator in the cell bottom toolbar\"));\n\nexport const focusedCellBackground = registerColor('notebook.focusedCellBackground', null, nls.localize('focusedCellBackground', \"The background color of a cell when the cell is focused.\"));\n\nexport const selectedCellBackground = registerColor('notebook.selectedCellBackground', {\n\tdark: listInactiveSelectionBackground,\n\tlight: listInactiveSelectionBackground,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('selectedCellBackground', \"The background color of a cell when the cell is selected.\"));\n\n\nexport const cellHoverBackground = registerColor('notebook.cellHoverBackground', {\n\tdark: transparent(focusedCellBackground, .5),\n\tlight: transparent(focusedCellBackground, .7),\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.cellHoverBackground', \"The background color of a cell when the cell is hovered.\"));\n\nexport const selectedCellBorder = registerColor('notebook.selectedCellBorder', {\n\tdark: notebookCellBorder,\n\tlight: notebookCellBorder,\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, nls.localize('notebook.selectedCellBorder', \"The color of the cell's top and bottom border when the cell is selected but not focused.\"));\n\nexport const inactiveSelectedCellBorder = registerColor('notebook.inactiveSelectedCellBorder', {\n\tdark: null,\n\tlight: null,\n\thcDark: focusBorder,\n\thcLight: focusBorder\n}, nls.localize('notebook.inactiveSelectedCellBorder', \"The color of the cell's borders when multiple cells are selected.\"));\n\nexport const focusedCellBorder = registerColor('notebook.focusedCellBorder', focusBorder, nls.localize('notebook.focusedCellBorder', \"The color of the cell's focus indicator borders when the cell is focused.\"));\n\nexport const inactiveFocusedCellBorder = registerColor('notebook.inactiveFocusedCellBorder', notebookCellBorder, nls.localize('notebook.inactiveFocusedCellBorder', \"The color of the cell's top and bottom border when a cell is focused while the primary focus is outside of the editor.\"));\n\nexport const cellStatusBarItemHover = registerColor('notebook.cellStatusBarItemHoverBackground', {\n\tlight: new Color(new RGBA(0, 0, 0, 0.08)),\n\tdark: new Color(new RGBA(255, 255, 255, 0.15)),\n\thcDark: new Color(new RGBA(255, 255, 255, 0.15)),\n\thcLight: new Color(new RGBA(0, 0, 0, 0.08)),\n}, nls.localize('notebook.cellStatusBarItemHoverBackground', \"The background color of notebook cell status bar items.\"));\n\nexport const cellInsertionIndicator = registerColor('notebook.cellInsertionIndicator', focusBorder, nls.localize('notebook.cellInsertionIndicator', \"The color of the notebook cell insertion indicator.\"));\n\nexport const listScrollbarSliderBackground = registerColor('notebookScrollbarSlider.background', scrollbarSliderBackground, nls.localize('notebookScrollbarSliderBackground', \"Notebook scrollbar slider background color.\"));\n\nexport const listScrollbarSliderHoverBackground = registerColor('notebookScrollbarSlider.hoverBackground', scrollbarSliderHoverBackground, nls.localize('notebookScrollbarSliderHoverBackground', \"Notebook scrollbar slider background color when hovering.\"));\n\nexport const listScrollbarSliderActiveBackground = registerColor('notebookScrollbarSlider.activeBackground', scrollbarSliderActiveBackground, nls.localize('notebookScrollbarSliderActiveBackground', \"Notebook scrollbar slider background color when clicked on.\"));\n\nexport const cellSymbolHighlight = registerColor('notebook.symbolHighlightBackground', {\n\tdark: Color.fromHex('#ffffff0b'),\n\tlight: Color.fromHex('#fdff0033'),\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.symbolHighlightBackground', \"Background color of highlighted cell\"));\n\nexport const cellEditorBackground = registerColor('notebook.cellEditorBackground', {\n\tlight: SIDE_BAR_BACKGROUND,\n\tdark: SIDE_BAR_BACKGROUND,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.cellEditorBackground', \"Cell editor background color.\"));\n\nconst notebookEditorBackground = registerColor('notebook.editorBackground', {\n\tlight: EDITOR_PANE_BACKGROUND,\n\tdark: EDITOR_PANE_BACKGROUND,\n\thcDark: null,\n\thcLight: null\n}, nls.localize('notebook.editorBackground', \"Notebook background color.\"));\n"]}