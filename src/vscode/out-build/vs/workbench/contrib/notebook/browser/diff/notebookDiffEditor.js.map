{"version":3,"sources":["vs/workbench/contrib/notebook/browser/diff/notebookDiffEditor.ts"],"names":[],"mappings":"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","file":"notebookDiffEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../../nls.js';\nimport * as DOM from '../../../../../base/browser/dom.js';\nimport { findLastIdx } from '../../../../../base/common/arraysFind.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../../platform/theme/common/themeService.js';\nimport { EditorPaneSelectionChangeReason, EditorPaneSelectionCompareResult, IEditorOpenContext, IEditorPaneScrollPosition, IEditorPaneSelection, IEditorPaneSelectionChangeEvent, IEditorPaneWithScrolling, IEditorPaneWithSelection } from '../../../../common/editor.js';\nimport { getDefaultNotebookCreationOptions } from '../notebookEditorWidget.js';\nimport { IEditorGroup } from '../../../../services/editor/common/editorGroupsService.js';\nimport { NotebookDiffEditorInput } from '../../common/notebookDiffEditorInput.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { DiffElementCellViewModelBase, IDiffElementViewModelBase, SideBySideDiffElementViewModel } from './diffElementViewModel.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { CellDiffPlaceholderRenderer, CellDiffSideBySideRenderer, CellDiffSingleSideRenderer, NotebookCellTextDiffListDelegate, NotebookDocumentMetadataDiffRenderer, NotebookTextDiffList } from './notebookDiffList.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { diffDiagonalFill, editorBackground, focusBorder, foreground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { INotebookEditorWorkerService } from '../../common/services/notebookWorkerService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IEditorOptions as ICodeEditorOptions } from '../../../../../editor/common/config/editorOptions.js';\nimport { FontInfo } from '../../../../../editor/common/config/fontInfo.js';\nimport { createBareFontInfoFromRawSettings } from '../../../../../editor/common/config/fontInfoFromSettings.js';\nimport { PixelRatio } from '../../../../../base/browser/pixelRatio.js';\nimport { CellEditState, ICellOutputViewModel, IDisplayOutputLayoutUpdateRequest, IGenericCellViewModel, IInsetRenderOutput, INotebookEditorCreationOptions, INotebookEditorOptions } from '../notebookBrowser.js';\nimport { DiffSide, DIFF_CELL_MARGIN, IDiffCellInfo, INotebookTextDiffEditor, INotebookDiffViewModel } from './notebookDiffEditorBrowser.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { EditorPane } from '../../../../browser/parts/editor/editorPane.js';\nimport { CellUri, INotebookDiffEditorModel, NOTEBOOK_DIFF_EDITOR_ID, NotebookSetting } from '../../common/notebookCommon.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { SequencerByKey } from '../../../../../base/common/async.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { IMouseWheelEvent, StandardMouseEvent } from '../../../../../base/browser/mouseEvent.js';\nimport { DiffNestedCellViewModel } from './diffNestedCellViewModel.js';\nimport { BackLayerWebView, INotebookDelegateForWebview } from '../view/renderers/backLayerWebView.js';\nimport { NotebookDiffEditorEventDispatcher, NotebookDiffLayoutChangedEvent } from './eventDispatcher.js';\nimport { FontMeasurements } from '../../../../../editor/browser/config/fontMeasurements.js';\nimport { NotebookOptions } from '../notebookOptions.js';\nimport { NotebookLayoutInfo } from '../notebookViewEvents.js';\nimport { IEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { cellIndexesToRanges, cellRangesToIndexes } from '../../common/notebookRange.js';\nimport { NotebookDiffOverviewRuler } from './notebookDiffOverviewRuler.js';\nimport { registerZIndex, ZIndex } from '../../../../../platform/layout/browser/zIndexRegistry.js';\nimport { NotebookDiffViewModel } from './notebookDiffViewModel.js';\nimport { INotebookService } from '../../common/notebookService.js';\nimport { DiffEditorHeightCalculatorService, IDiffEditorHeightCalculatorService } from './editorHeightCalculator.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { NotebookInlineDiffWidget } from './inlineDiff/notebookInlineDiffWidget.js';\nimport { IObservable, observableValue } from '../../../../../base/common/observable.js';\n\nconst $ = DOM.$;\n\nclass NotebookDiffEditorSelection implements IEditorPaneSelection {\n\n\tconstructor(\n\t\tprivate readonly selections: number[]\n\t) { }\n\n\tcompare(other: IEditorPaneSelection): EditorPaneSelectionCompareResult {\n\t\tif (!(other instanceof NotebookDiffEditorSelection)) {\n\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t}\n\n\t\tif (this.selections.length !== other.selections.length) {\n\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t}\n\n\t\tfor (let i = 0; i < this.selections.length; i++) {\n\t\t\tif (this.selections[i] !== other.selections[i]) {\n\t\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t\t}\n\t\t}\n\n\t\treturn EditorPaneSelectionCompareResult.IDENTICAL;\n\t}\n\n\trestore(options: IEditorOptions): INotebookEditorOptions {\n\t\tconst notebookOptions: INotebookEditorOptions = {\n\t\t\tcellSelections: cellIndexesToRanges(this.selections)\n\t\t};\n\n\t\tObject.assign(notebookOptions, options);\n\t\treturn notebookOptions;\n\t}\n}\n\nexport class NotebookTextDiffEditor extends EditorPane implements INotebookTextDiffEditor, INotebookDelegateForWebview, IEditorPaneWithSelection, IEditorPaneWithScrolling {\n\tpublic static readonly ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\n\tcreationOptions: INotebookEditorCreationOptions = getDefaultNotebookCreationOptions();\n\tstatic readonly ID: string = NOTEBOOK_DIFF_EDITOR_ID;\n\n\tprivate _rootElement!: HTMLElement;\n\tprivate _listViewContainer!: HTMLElement;\n\tprivate _overflowContainer!: HTMLElement;\n\tprivate _overviewRulerContainer!: HTMLElement;\n\tprivate _overviewRuler!: NotebookDiffOverviewRuler;\n\tprivate _dimension: DOM.Dimension | undefined = undefined;\n\tprivate notebookDiffViewModel?: INotebookDiffViewModel;\n\tprivate _list!: NotebookTextDiffList;\n\tprivate _modifiedWebview: BackLayerWebView<IDiffCellInfo> | null = null;\n\tprivate _originalWebview: BackLayerWebView<IDiffCellInfo> | null = null;\n\tprivate _webviewTransparentCover: HTMLElement | null = null;\n\tprivate _fontInfo: FontInfo | undefined;\n\tprivate _inlineView = false;\n\tprivate _lastLayoutProperties: { dimension: DOM.Dimension; position: DOM.IDomPosition } | undefined;\n\n\tprivate readonly _onMouseUp = this._register(new Emitter<{ readonly event: MouseEvent; readonly target: IDiffElementViewModelBase }>());\n\tpublic readonly onMouseUp = this._onMouseUp.event;\n\tprivate readonly _onDidScroll = this._register(new Emitter<void>());\n\treadonly onDidScroll: Event<void> = this._onDidScroll.event;\n\treadonly onDidChangeScroll: Event<void> = this._onDidScroll.event;\n\tprivate _eventDispatcher: NotebookDiffEditorEventDispatcher | undefined;\n\tprotected _scopeContextKeyService!: IContextKeyService;\n\tprivate _model: INotebookDiffEditorModel | null = null;\n\tprivate readonly diffEditorCalcuator: IDiffEditorHeightCalculatorService;\n\tprivate readonly _modifiedResourceDisposableStore = this._register(new DisposableStore());\n\tprivate inlineDiffWidget: NotebookInlineDiffWidget | undefined;\n\n\tget textModel() {\n\t\treturn this._model?.modified.notebook;\n\t}\n\n\tget inlineNotebookEditor() {\n\t\tif (this._inlineView) {\n\t\t\treturn this.inlineDiffWidget?.editorWidget;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate _revealFirst: boolean;\n\tprivate readonly _insetModifyQueueByOutputId = new SequencerByKey<string>();\n\n\tprotected _onDidDynamicOutputRendered = this._register(new Emitter<{ cell: IGenericCellViewModel; output: ICellOutputViewModel }>());\n\tonDidDynamicOutputRendered = this._onDidDynamicOutputRendered.event;\n\n\tprivate readonly _notebookOptions: NotebookOptions;\n\n\tget notebookOptions() {\n\t\treturn this._notebookOptions;\n\t}\n\n\tprivate readonly _localStore = this._register(new DisposableStore());\n\n\tprivate _layoutCancellationTokenSource?: CancellationTokenSource;\n\n\tprivate readonly _onDidChangeSelection = this._register(new Emitter<IEditorPaneSelectionChangeEvent>());\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\n\tprivate _isDisposed: boolean = false;\n\n\tget isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n\tprivate readonly _currentChangedIndex = observableValue(this, -1);\n\treadonly currentChangedIndex: IObservable<number> = this._currentChangedIndex;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@INotebookEditorWorkerService private readonly notebookEditorWorkerService: INotebookEditorWorkerService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper(NotebookTextDiffEditor.ID, group, telemetryService, themeService, storageService);\n\t\tthis.diffEditorCalcuator = this.instantiationService.createInstance(DiffEditorHeightCalculatorService, this.fontInfo.lineHeight);\n\t\tthis._notebookOptions = instantiationService.createInstance(NotebookOptions, this.window, false, undefined);\n\t\tthis._register(this._notebookOptions);\n\t\tthis._revealFirst = true;\n\t}\n\n\tprivate get fontInfo() {\n\t\tif (!this._fontInfo) {\n\t\t\tthis._fontInfo = this.createFontInfo();\n\t\t}\n\n\t\treturn this._fontInfo;\n\t}\n\n\tprivate createFontInfo() {\n\t\tconst editorOptions = this.configurationService.getValue<ICodeEditorOptions>('editor');\n\t\treturn FontMeasurements.readFontInfo(this.window, createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(this.window).value));\n\t}\n\n\tprivate isOverviewRulerEnabled(): boolean {\n\t\treturn this.configurationService.getValue(NotebookSetting.diffOverviewRuler) ?? false;\n\t}\n\n\tgetSelection(): IEditorPaneSelection | undefined {\n\t\tconst selections = this._list.getFocus();\n\t\treturn new NotebookDiffEditorSelection(selections);\n\t}\n\n\ttoggleNotebookCellSelection(cell: IGenericCellViewModel) {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tupdatePerformanceMetadata(cellId: string, executionId: string, duration: number, rendererId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync focusNotebookCell(cell: IGenericCellViewModel, focus: 'output' | 'editor' | 'container'): Promise<void> {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync focusNextNotebookCell(cell: IGenericCellViewModel, focus: 'output' | 'editor' | 'container'): Promise<void> {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tdidFocusOutputInputChange(inputFocused: boolean): void {\n\t\t// noop\n\t}\n\n\tgetScrollTop() {\n\t\treturn this._list?.scrollTop ?? 0;\n\t}\n\n\tgetScrollHeight() {\n\t\treturn this._list?.scrollHeight ?? 0;\n\t}\n\n\tgetScrollPosition(): IEditorPaneScrollPosition {\n\t\treturn {\n\t\t\tscrollTop: this.getScrollTop(),\n\t\t\tscrollLeft: this._list?.scrollLeft ?? 0\n\t\t};\n\t}\n\n\tsetScrollPosition(scrollPosition: IEditorPaneScrollPosition): void {\n\t\tif (!this._list) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._list.scrollTop = scrollPosition.scrollTop;\n\t\tif (scrollPosition.scrollLeft !== undefined) {\n\t\t\tthis._list.scrollLeft = scrollPosition.scrollLeft;\n\t\t}\n\t}\n\n\tdelegateVerticalScrollbarPointerDown(browserEvent: PointerEvent) {\n\t\tthis._list?.delegateVerticalScrollbarPointerDown(browserEvent);\n\t}\n\n\tupdateOutputHeight(cellInfo: IDiffCellInfo, output: ICellOutputViewModel, outputHeight: number, isInit: boolean): void {\n\t\tconst diffElement = cellInfo.diffElement;\n\t\tconst cell = this.getCellByInfo(cellInfo);\n\t\tconst outputIndex = cell.outputsViewModels.indexOf(output);\n\n\t\tif (diffElement instanceof SideBySideDiffElementViewModel) {\n\t\t\tconst info = CellUri.parse(cellInfo.cellUri);\n\t\t\tif (!info) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiffElement.updateOutputHeight(info.notebook.toString() === this._model?.original.resource.toString() ? DiffSide.Original : DiffSide.Modified, outputIndex, outputHeight);\n\t\t} else {\n\t\t\tdiffElement.updateOutputHeight(diffElement.type === 'insert' ? DiffSide.Modified : DiffSide.Original, outputIndex, outputHeight);\n\t\t}\n\n\t\tif (isInit) {\n\t\t\tthis._onDidDynamicOutputRendered.fire({ cell, output });\n\t\t}\n\t}\n\n\tsetMarkupCellEditState(cellId: string, editState: CellEditState): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidStartDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidEndDragMarkupCell(cellId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidDropMarkupCell(cellId: string) {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidResizeOutput(cellId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync toggleInlineView(): Promise<void> {\n\t\tthis._layoutCancellationTokenSource?.dispose();\n\n\t\tthis._inlineView = !this._inlineView;\n\n\t\tif (!this._lastLayoutProperties) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._inlineView) {\n\t\t\tthis.layout(this._lastLayoutProperties?.dimension, this._lastLayoutProperties?.position);\n\t\t\tthis.inlineDiffWidget?.show(this.input as NotebookDiffEditorInput, this._model?.modified.notebook, this._model?.original.notebook, this._options as INotebookEditorOptions | undefined);\n\t\t} else {\n\t\t\tthis.layout(this._lastLayoutProperties?.dimension, this._lastLayoutProperties?.position);\n\t\t\tthis.inlineDiffWidget?.hide();\n\t\t}\n\n\t\tthis._layoutCancellationTokenSource = new CancellationTokenSource();\n\t\tthis.updateLayout(this._layoutCancellationTokenSource.token);\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._rootElement = DOM.append(parent, DOM.$('.notebook-text-diff-editor'));\n\t\tthis._overflowContainer = document.createElement('div');\n\t\tthis._overflowContainer.classList.add('notebook-overflow-widget-container', 'monaco-editor');\n\t\tDOM.append(parent, this._overflowContainer);\n\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(CellDiffSingleSideRenderer, this),\n\t\t\tthis.instantiationService.createInstance(CellDiffSideBySideRenderer, this),\n\t\t\tthis.instantiationService.createInstance(CellDiffPlaceholderRenderer, this),\n\t\t\tthis.instantiationService.createInstance(NotebookDocumentMetadataDiffRenderer, this),\n\t\t];\n\n\t\tthis._listViewContainer = DOM.append(this._rootElement, DOM.$('.notebook-diff-list-view'));\n\n\t\tthis._list = this.instantiationService.createInstance(\n\t\t\tNotebookTextDiffList,\n\t\t\t'NotebookTextDiff',\n\t\t\tthis._listViewContainer,\n\t\t\tthis.instantiationService.createInstance(NotebookCellTextDiffListDelegate, this.window),\n\t\t\trenderers,\n\t\t\tthis.contextKeyService,\n\t\t\t{\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tsetRowHeight: false,\n\t\t\t\tsupportDynamicHeights: true,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tmouseSupport: true,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\ttypeNavigationEnabled: true,\n\t\t\t\tpaddingBottom: 0,\n\t\t\t\t// transformOptimization: (isMacintosh && isNative) || getTitleBarStyle(this.configurationService, this.environmentService) === 'native',\n\t\t\t\tstyleController: (_suffix: string) => { return this._list; },\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: editorBackground,\n\t\t\t\t\tlistActiveSelectionBackground: editorBackground,\n\t\t\t\t\tlistActiveSelectionForeground: foreground,\n\t\t\t\t\tlistFocusAndSelectionBackground: editorBackground,\n\t\t\t\t\tlistFocusAndSelectionForeground: foreground,\n\t\t\t\t\tlistFocusBackground: editorBackground,\n\t\t\t\t\tlistFocusForeground: foreground,\n\t\t\t\t\tlistHoverForeground: foreground,\n\t\t\t\t\tlistHoverBackground: editorBackground,\n\t\t\t\t\tlistHoverOutline: focusBorder,\n\t\t\t\t\tlistFocusOutline: focusBorder,\n\t\t\t\t\tlistInactiveSelectionBackground: editorBackground,\n\t\t\t\t\tlistInactiveSelectionForeground: foreground,\n\t\t\t\t\tlistInactiveFocusBackground: editorBackground,\n\t\t\t\t\tlistInactiveFocusOutline: editorBackground,\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel() { return null; },\n\t\t\t\t\tgetWidgetAriaLabel() {\n\t\t\t\t\t\treturn nls.localize('notebookTreeAriaLabel', \"Notebook Text Diff\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// focusNextPreviousDelegate: {\n\t\t\t\t// \tonFocusNext: (applyFocusNext: () => void) => this._updateForCursorNavigationMode(applyFocusNext),\n\t\t\t\t// \tonFocusPrevious: (applyFocusPrevious: () => void) => this._updateForCursorNavigationMode(applyFocusPrevious),\n\t\t\t\t// }\n\t\t\t}\n\t\t);\n\n\t\tthis.inlineDiffWidget = this._register(this.instantiationService.createInstance(NotebookInlineDiffWidget, this._rootElement, this.group.id, this.window, this.notebookOptions, this._dimension));\n\n\t\tthis._register(this._list);\n\t\tthis._register(this._list.onMouseUp(e => {\n\t\t\tif (e.element) {\n\t\t\t\tif (typeof e.index === 'number') {\n\t\t\t\t\tthis._list.setFocus([e.index]);\n\t\t\t\t}\n\t\t\t\tthis._onMouseUp.fire({ event: e.browserEvent, target: e.element });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onDidScroll(() => {\n\t\t\tthis._onDidScroll.fire();\n\t\t}));\n\n\t\tthis._register(this._list.onDidChangeFocus(() => this._onDidChangeSelection.fire({ reason: EditorPaneSelectionChangeReason.USER })));\n\n\t\tthis._overviewRulerContainer = document.createElement('div');\n\t\tthis._overviewRulerContainer.classList.add('notebook-overview-ruler-container');\n\t\tthis._rootElement.appendChild(this._overviewRulerContainer);\n\t\tthis._registerOverviewRuler();\n\n\t\t// transparent cover\n\t\tthis._webviewTransparentCover = DOM.append(this._list.rowsContainer, $('.webview-cover'));\n\t\tthis._webviewTransparentCover.style.display = 'none';\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseDownListener(this._overflowContainer, (e: StandardMouseEvent) => {\n\t\t\tif (e.target.classList.contains('slider') && this._webviewTransparentCover) {\n\t\t\t\tthis._webviewTransparentCover.style.display = 'block';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseUpListener(this._overflowContainer, () => {\n\t\t\tif (this._webviewTransparentCover) {\n\t\t\t\t// no matter when\n\t\t\t\tthis._webviewTransparentCover.style.display = 'none';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onDidScroll(e => {\n\t\t\tthis._webviewTransparentCover!.style.top = `${e.scrollTop}px`;\n\t\t}));\n\t}\n\n\tprivate _registerOverviewRuler() {\n\t\tthis._overviewRuler = this._register(this.instantiationService.createInstance(NotebookDiffOverviewRuler, this, NotebookTextDiffEditor.ENTIRE_DIFF_OVERVIEW_WIDTH, this._overviewRulerContainer));\n\t}\n\n\tprivate _updateOutputsOffsetsInWebview(scrollTop: number, scrollHeight: number, activeWebview: BackLayerWebView<IDiffCellInfo>, getActiveNestedCell: (diffElement: DiffElementCellViewModelBase) => DiffNestedCellViewModel | undefined, diffSide: DiffSide) {\n\t\tactiveWebview.element.style.height = `${scrollHeight}px`;\n\n\t\tif (activeWebview.insetMapping) {\n\t\t\tconst updateItems: IDisplayOutputLayoutUpdateRequest[] = [];\n\t\t\tconst removedItems: ICellOutputViewModel[] = [];\n\t\t\tactiveWebview.insetMapping.forEach((value, key) => {\n\t\t\t\tconst cell = getActiveNestedCell(value.cellInfo.diffElement);\n\t\t\t\tif (!cell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst viewIndex = this._list.indexOf(value.cellInfo.diffElement);\n\n\t\t\t\tif (viewIndex === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (cell.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t\t// output is already gone\n\t\t\t\t\tremovedItems.push(key);\n\t\t\t\t} else {\n\t\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(value.cellInfo.diffElement);\n\t\t\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(key);\n\t\t\t\t\tconst outputOffset = value.cellInfo.diffElement.getOutputOffsetInCell(diffSide, outputIndex);\n\t\t\t\t\tupdateItems.push({\n\t\t\t\t\t\tcell,\n\t\t\t\t\t\toutput: key,\n\t\t\t\t\t\tcellTop: cellTop,\n\t\t\t\t\t\toutputOffset: outputOffset,\n\t\t\t\t\t\tforceDisplay: false\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tactiveWebview.removeInsets(removedItems);\n\n\t\t\tif (updateItems.length) {\n\t\t\t\tactiveWebview.updateScrollTops(updateItems, []);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride async setInput(input: NotebookDiffEditorInput, options: INotebookEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tthis.inlineDiffWidget?.hide();\n\n\t\tawait super.setInput(input, options, context, token);\n\n\t\tconst model = await input.resolve();\n\t\tif (this._model !== model) {\n\t\t\tthis._detachModel();\n\t\t\tthis._attachModel(model);\n\t\t}\n\n\t\tthis._model = model;\n\t\tif (this._model === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._inlineView) {\n\t\t\tthis._listViewContainer.style.display = 'none';\n\t\t\tthis.inlineDiffWidget?.show(input, model.modified.notebook, model.original.notebook, options);\n\t\t} else {\n\t\t\tthis._listViewContainer.style.display = 'block';\n\t\t\tthis.inlineDiffWidget?.hide();\n\t\t}\n\n\t\tthis._revealFirst = true;\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\n\t\tthis._layoutCancellationTokenSource = new CancellationTokenSource();\n\n\t\tthis._modifiedResourceDisposableStore.add(Event.any(this._model.original.notebook.onDidChangeContent, this._model.modified.notebook.onDidChangeContent)(e => {\n\t\t\t// If the user has made changes to the notebook whilst in the diff editor,\n\t\t\t// then do not re-compute the diff of the notebook,\n\t\t\t// As change will result in re-computing diff and re-building entire diff view.\n\t\t\tif (this._model !== null && this.editorService.activeEditor !== input) {\n\t\t\t\tthis._layoutCancellationTokenSource?.dispose();\n\t\t\t\tthis._layoutCancellationTokenSource = new CancellationTokenSource();\n\t\t\t\tthis.updateLayout(this._layoutCancellationTokenSource.token);\n\t\t\t}\n\t\t}));\n\n\t\tawait this._createOriginalWebview(generateUuid(), this._model.original.viewType, this._model.original.resource);\n\t\tif (this._originalWebview) {\n\t\t\tthis._modifiedResourceDisposableStore.add(this._originalWebview);\n\t\t}\n\t\tawait this._createModifiedWebview(generateUuid(), this._model.modified.viewType, this._model.modified.resource);\n\t\tif (this._modifiedWebview) {\n\t\t\tthis._modifiedResourceDisposableStore.add(this._modifiedWebview);\n\t\t}\n\n\t\tawait this.updateLayout(this._layoutCancellationTokenSource.token, options?.cellSelections ? cellRangesToIndexes(options.cellSelections) : undefined);\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tsuper.setVisible(visible);\n\t\tif (!visible) {\n\t\t\tthis.inlineDiffWidget?.hide();\n\t\t}\n\t}\n\n\tprivate _detachModel() {\n\t\tthis._localStore.clear();\n\t\tthis._originalWebview?.dispose();\n\t\tthis._originalWebview?.element.remove();\n\t\tthis._originalWebview = null;\n\t\tthis._modifiedWebview?.dispose();\n\t\tthis._modifiedWebview?.element.remove();\n\t\tthis._modifiedWebview = null;\n\n\t\tthis.notebookDiffViewModel?.dispose();\n\t\tthis.notebookDiffViewModel = undefined;\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\t\tthis._list.clear();\n\n\t}\n\tprivate _attachModel(model: INotebookDiffEditorModel) {\n\t\tthis._model = model;\n\t\tthis._eventDispatcher = new NotebookDiffEditorEventDispatcher();\n\t\tconst updateInsets = () => {\n\t\t\tDOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this._modifiedWebview) {\n\t\t\t\t\tthis._updateOutputsOffsetsInWebview(this._list.scrollTop, this._list.scrollHeight, this._modifiedWebview, (diffElement: DiffElementCellViewModelBase) => {\n\t\t\t\t\t\treturn diffElement.modified;\n\t\t\t\t\t}, DiffSide.Modified);\n\t\t\t\t}\n\n\t\t\t\tif (this._originalWebview) {\n\t\t\t\t\tthis._updateOutputsOffsetsInWebview(this._list.scrollTop, this._list.scrollHeight, this._originalWebview, (diffElement: DiffElementCellViewModelBase) => {\n\t\t\t\t\t\treturn diffElement.original;\n\t\t\t\t\t}, DiffSide.Original);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis._localStore.add(this._list.onDidChangeContentHeight(() => {\n\t\t\tupdateInsets();\n\t\t}));\n\n\t\tthis._localStore.add(this._list.onDidChangeFocus((e) => {\n\t\t\tif (e.indexes.length && this.notebookDiffViewModel && e.indexes[0] < this.notebookDiffViewModel.items.length) {\n\t\t\t\tconst selectedItem = this.notebookDiffViewModel.items[e.indexes[0]];\n\t\t\t\tconst changedItems = this.notebookDiffViewModel.items.filter(item => item.type !== 'unchanged' && item.type !== 'unchangedMetadata' && item.type !== 'placeholder');\n\t\t\t\tif (selectedItem && selectedItem?.type !== 'placeholder' && selectedItem?.type !== 'unchanged' && selectedItem?.type !== 'unchangedMetadata') {\n\t\t\t\t\treturn this._currentChangedIndex.set(changedItems.indexOf(selectedItem), undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this._currentChangedIndex.set(-1, undefined);\n\t\t}));\n\n\t\tthis._localStore.add(this._eventDispatcher.onDidChangeCellLayout(() => {\n\t\t\tupdateInsets();\n\t\t}));\n\n\t\tconst vm = this.notebookDiffViewModel = this._register(new NotebookDiffViewModel(this._model, this.notebookEditorWorkerService, this.configurationService, this._eventDispatcher!, this.notebookService, this.diffEditorCalcuator, this.fontInfo, undefined));\n\t\tthis._localStore.add(this.notebookDiffViewModel.onDidChangeItems(e => {\n\t\t\tthis._originalWebview?.removeInsets([...this._originalWebview?.insetMapping.keys()]);\n\t\t\tthis._modifiedWebview?.removeInsets([...this._modifiedWebview?.insetMapping.keys()]);\n\n\t\t\tif (this._revealFirst && typeof e.firstChangeIndex === 'number' && e.firstChangeIndex > -1 && e.firstChangeIndex < this._list.length) {\n\t\t\t\tthis._revealFirst = false;\n\t\t\t\tthis._list.setFocus([e.firstChangeIndex]);\n\t\t\t\tthis._list.reveal(e.firstChangeIndex, 0.3);\n\t\t\t}\n\n\t\t\tthis._list.splice(e.start, e.deleteCount, e.elements);\n\n\t\t\tif (this.isOverviewRulerEnabled()) {\n\t\t\t\tthis._overviewRuler.updateViewModels(vm.items, this._eventDispatcher);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async _createModifiedWebview(id: string, viewType: string, resource: URI): Promise<void> {\n\t\tthis._modifiedWebview?.dispose();\n\n\t\tthis._modifiedWebview = this.instantiationService.createInstance(BackLayerWebView, this, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, undefined) as BackLayerWebView<IDiffCellInfo>;\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.rowsContainer.insertAdjacentElement('afterbegin', this._modifiedWebview.element);\n\t\tthis._modifiedWebview.createWebview(this.window);\n\t\tthis._modifiedWebview.element.style.width = `calc(50% - 16px)`;\n\t\tthis._modifiedWebview.element.style.left = `calc(50%)`;\n\t}\n\t_generateFontFamily(): string {\n\t\treturn this.fontInfo.fontFamily ?? `\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`;\n\t}\n\n\tprivate async _createOriginalWebview(id: string, viewType: string, resource: URI): Promise<void> {\n\t\tthis._originalWebview?.dispose();\n\n\t\tthis._originalWebview = this.instantiationService.createInstance(BackLayerWebView, this, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, undefined) as BackLayerWebView<IDiffCellInfo>;\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.rowsContainer.insertAdjacentElement('afterbegin', this._originalWebview.element);\n\t\tthis._originalWebview.createWebview(this.window);\n\t\tthis._originalWebview.element.style.width = `calc(50% - 16px)`;\n\t\tthis._originalWebview.element.style.left = `16px`;\n\t}\n\n\toverride setOptions(options: INotebookEditorOptions | undefined): void {\n\t\tconst selections = options?.cellSelections ? cellRangesToIndexes(options.cellSelections) : undefined;\n\t\tif (selections) {\n\t\t\tthis._list.setFocus(selections);\n\t\t}\n\t}\n\n\tasync updateLayout(token: CancellationToken, selections?: number[]) {\n\t\tif (!this._model || !this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.notebookDiffViewModel.computeDiff(token);\n\t\tif (token.isCancellationRequested) {\n\t\t\t// after await the editor might be disposed.\n\t\t\treturn;\n\t\t}\n\n\t\tif (selections) {\n\t\t\tthis._list.setFocus(selections);\n\t\t}\n\t}\n\n\tscheduleOutputHeightAck(cellInfo: IDiffCellInfo, outputId: string, height: number) {\n\t\tconst diffElement = cellInfo.diffElement;\n\t\t// const activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\tlet diffSide = DiffSide.Original;\n\n\t\tif (diffElement instanceof SideBySideDiffElementViewModel) {\n\t\t\tconst info = CellUri.parse(cellInfo.cellUri);\n\t\t\tif (!info) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiffSide = info.notebook.toString() === this._model?.original.resource.toString() ? DiffSide.Original : DiffSide.Modified;\n\t\t} else {\n\t\t\tdiffSide = diffElement.type === 'insert' ? DiffSide.Modified : DiffSide.Original;\n\t\t}\n\n\t\tconst webview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\n\t\tDOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\twebview?.ackHeight([{ cellId: cellInfo.cellId, outputId, height }]);\n\t\t}, 10);\n\t}\n\n\tprivate pendingLayouts = new WeakMap<IDiffElementViewModelBase, IDisposable>();\n\n\n\tlayoutNotebookCell(cell: IDiffElementViewModelBase, height: number) {\n\t\tconst relayout = (cell: IDiffElementViewModelBase, height: number) => {\n\t\t\tthis._list.updateElementHeight2(cell, height);\n\t\t};\n\n\t\tlet disposable = this.pendingLayouts.get(cell);\n\t\tif (disposable) {\n\t\t\tthis._localStore.delete(disposable);\n\t\t}\n\n\t\tlet r: () => void;\n\t\tconst layoutDisposable = DOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\tthis.pendingLayouts.delete(cell);\n\n\t\t\trelayout(cell, height);\n\t\t\tr();\n\t\t});\n\t\tdisposable = toDisposable(() => {\n\t\t\tlayoutDisposable.dispose();\n\t\t\tr();\n\t\t});\n\t\tthis._localStore.add(disposable);\n\n\t\tthis.pendingLayouts.set(cell, disposable);\n\n\t\treturn new Promise<void>(resolve => { r = resolve; });\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\t\tthis._list.scrollTop = scrollTop;\n\t}\n\n\ttriggerScroll(event: IMouseWheelEvent) {\n\t\tthis._list.triggerScrollFromMouseWheelEvent(event);\n\t}\n\n\tfirstChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\t// go to the first one\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\tconst index = currentViewModels.findIndex(vm => vm.type !== 'unchanged' && vm.type !== 'unchangedMetadata' && vm.type !== 'placeholder');\n\t\tif (index >= 0) {\n\t\t\tthis._list.setFocus([index]);\n\t\t\tthis._list.reveal(index);\n\t\t}\n\t}\n\n\tlastChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\t// go to the first one\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\tconst item = currentViewModels.slice().reverse().find(vm => vm.type !== 'unchanged' && vm.type !== 'unchangedMetadata' && vm.type !== 'placeholder');\n\t\tconst index = item ? currentViewModels.indexOf(item) : -1;\n\t\tif (index >= 0) {\n\t\t\tthis._list.setFocus([index]);\n\t\t\tthis._list.reveal(index);\n\t\t}\n\t}\n\n\tpreviousChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\tlet currFocus = this._list.getFocus()[0];\n\n\t\tif (isNaN(currFocus) || currFocus < 0) {\n\t\t\tcurrFocus = 0;\n\t\t}\n\n\t\t// find the index of previous change\n\t\tlet prevChangeIndex = currFocus - 1;\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\twhile (prevChangeIndex >= 0) {\n\t\t\tconst vm = currentViewModels[prevChangeIndex];\n\t\t\tif (vm.type !== 'unchanged' && vm.type !== 'unchangedMetadata' && vm.type !== 'placeholder') {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tprevChangeIndex--;\n\t\t}\n\n\t\tif (prevChangeIndex >= 0) {\n\t\t\tthis._list.setFocus([prevChangeIndex]);\n\t\t\tthis._list.reveal(prevChangeIndex);\n\t\t} else {\n\t\t\t// go to the last one\n\t\t\tconst index = findLastIdx(currentViewModels, vm => vm.type !== 'unchanged' && vm.type !== 'unchangedMetadata' && vm.type !== 'placeholder');\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._list.reveal(index);\n\t\t\t}\n\t\t}\n\t}\n\n\tnextChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\tlet currFocus = this._list.getFocus()[0];\n\n\t\tif (isNaN(currFocus) || currFocus < 0) {\n\t\t\tcurrFocus = 0;\n\t\t}\n\n\t\t// find the index of next change\n\t\tlet nextChangeIndex = currFocus + 1;\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\twhile (nextChangeIndex < currentViewModels.length) {\n\t\t\tconst vm = currentViewModels[nextChangeIndex];\n\t\t\tif (vm.type !== 'unchanged' && vm.type !== 'unchangedMetadata' && vm.type !== 'placeholder') {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnextChangeIndex++;\n\t\t}\n\n\t\tif (nextChangeIndex < currentViewModels.length) {\n\t\t\tthis._list.setFocus([nextChangeIndex]);\n\t\t\tthis._list.reveal(nextChangeIndex);\n\t\t} else {\n\t\t\t// go to the first one\n\t\t\tconst index = currentViewModels.findIndex(vm => vm.type !== 'unchanged' && vm.type !== 'unchangedMetadata' && vm.type !== 'placeholder');\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._list.reveal(index);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateOutput(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, output: IInsetRenderOutput, getOffset: () => number, diffSide: DiffSide): void {\n\t\tthis._insetModifyQueueByOutputId.queue(output.source.model.outputId + (diffSide === DiffSide.Modified ? '-right' : 'left'), async () => {\n\t\t\tconst activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\t\tif (!activeWebview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeWebview.insetMapping.has(output.source)) {\n\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\tawait activeWebview.createOutput({ diffElement: cellDiffViewModel, cellHandle: cellViewModel.handle, cellId: cellViewModel.id, cellUri: cellViewModel.uri }, output, cellTop, getOffset());\n\t\t\t} else {\n\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\tconst outputIndex = cellViewModel.outputsViewModels.indexOf(output.source);\n\t\t\t\tconst outputOffset = cellDiffViewModel.getOutputOffsetInCell(diffSide, outputIndex);\n\t\t\t\tactiveWebview.updateScrollTops([{\n\t\t\t\t\tcell: cellViewModel,\n\t\t\t\t\toutput: output.source,\n\t\t\t\t\tcellTop,\n\t\t\t\t\toutputOffset,\n\t\t\t\t\tforceDisplay: true\n\t\t\t\t}], []);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateMarkupCellHeight() {\n\t\t// TODO\n\t}\n\n\tgetCellByInfo(cellInfo: IDiffCellInfo): IGenericCellViewModel {\n\t\treturn cellInfo.diffElement.getCellByUri(cellInfo.cellUri);\n\t}\n\n\tgetCellById(cellId: string): IGenericCellViewModel | undefined {\n\t\tthrow new Error('Not implemented');\n\t}\n\n\tremoveInset(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, displayOutput: ICellOutputViewModel, diffSide: DiffSide) {\n\t\tthis._insetModifyQueueByOutputId.queue(displayOutput.model.outputId + (diffSide === DiffSide.Modified ? '-right' : 'left'), async () => {\n\t\t\tconst activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\t\tif (!activeWebview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeWebview.insetMapping.has(displayOutput)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tactiveWebview.removeInsets([displayOutput]);\n\t\t});\n\t}\n\n\tshowInset(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, displayOutput: ICellOutputViewModel, diffSide: DiffSide) {\n\t\tthis._insetModifyQueueByOutputId.queue(displayOutput.model.outputId + (diffSide === DiffSide.Modified ? '-right' : 'left'), async () => {\n\t\t\tconst activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\t\tif (!activeWebview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeWebview.insetMapping.has(displayOutput)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\tconst outputIndex = cellViewModel.outputsViewModels.indexOf(displayOutput);\n\t\t\tconst outputOffset = cellDiffViewModel.getOutputOffsetInCell(diffSide, outputIndex);\n\t\t\tactiveWebview.updateScrollTops([{\n\t\t\t\tcell: cellViewModel,\n\t\t\t\toutput: displayOutput,\n\t\t\t\tcellTop,\n\t\t\t\toutputOffset,\n\t\t\t\tforceDisplay: true,\n\t\t\t}], []);\n\t\t});\n\t}\n\n\thideInset(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, output: ICellOutputViewModel) {\n\t\tthis._modifiedWebview?.hideInset(output);\n\t\tthis._originalWebview?.hideInset(output);\n\t}\n\n\t// private async _resolveWebview(rightEditor: boolean): Promise<BackLayerWebView | null> {\n\t// \tif (rightEditor) {\n\n\t// \t}\n\t// }\n\n\tgetDomNode() {\n\t\treturn this._rootElement;\n\t}\n\n\tgetOverflowContainerDomNode(): HTMLElement {\n\t\treturn this._overflowContainer;\n\t}\n\n\toverride getControl(): INotebookTextDiffEditor | undefined {\n\t\treturn this;\n\t}\n\n\toverride clearInput(): void {\n\t\tthis.inlineDiffWidget?.hide();\n\n\t\tsuper.clearInput();\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\t\tthis._list?.splice(0, this._list?.length || 0);\n\t\tthis._model = null;\n\t\tthis.notebookDiffViewModel?.dispose();\n\t\tthis.notebookDiffViewModel = undefined;\n\t}\n\n\tdeltaCellOutputContainerClassNames(diffSide: DiffSide, cellId: string, added: string[], removed: string[]) {\n\t\tif (diffSide === DiffSide.Original) {\n\t\t\tthis._originalWebview?.deltaCellOutputContainerClassNames(cellId, added, removed);\n\t\t} else {\n\t\t\tthis._modifiedWebview?.deltaCellOutputContainerClassNames(cellId, added, removed);\n\t\t}\n\t}\n\n\tgetLayoutInfo(): NotebookLayoutInfo {\n\t\tif (!this._list) {\n\t\t\tthrow new Error('Editor is not initalized successfully');\n\t\t}\n\n\t\treturn {\n\t\t\twidth: this._dimension!.width,\n\t\t\theight: this._dimension!.height,\n\t\t\tfontInfo: this.fontInfo,\n\t\t\tscrollHeight: this._list?.getScrollHeight() ?? 0,\n\t\t\tstickyHeight: 0,\n\t\t\tlistViewOffsetTop: 0,\n\t\t};\n\t}\n\n\tlayout(dimension: DOM.Dimension, position: DOM.IDomPosition): void {\n\t\tthis._rootElement.classList.toggle('mid-width', dimension.width < 1000 && dimension.width >= 600);\n\t\tthis._rootElement.classList.toggle('narrow-width', dimension.width < 600);\n\t\tconst overviewRulerEnabled = this.isOverviewRulerEnabled();\n\t\tthis._dimension = dimension.with(dimension.width - (overviewRulerEnabled ? NotebookTextDiffEditor.ENTIRE_DIFF_OVERVIEW_WIDTH : 0));\n\n\t\tthis._listViewContainer.style.height = `${dimension.height}px`;\n\t\tthis._listViewContainer.style.width = `${this._dimension.width}px`;\n\n\t\tif (this._inlineView) {\n\t\t\tthis._listViewContainer.style.display = 'none';\n\t\t\tthis.inlineDiffWidget?.setLayout(dimension, position);\n\t\t} else {\n\t\t\tthis.inlineDiffWidget?.hide();\n\t\t\tthis._listViewContainer.style.display = 'block';\n\t\t\tthis._list?.layout(this._dimension.height, this._dimension.width);\n\n\t\t\tif (this._modifiedWebview) {\n\t\t\t\tthis._modifiedWebview.element.style.width = `calc(50% - 16px)`;\n\t\t\t\tthis._modifiedWebview.element.style.left = `calc(50%)`;\n\t\t\t}\n\n\t\t\tif (this._originalWebview) {\n\t\t\t\tthis._originalWebview.element.style.width = `calc(50% - 16px)`;\n\t\t\t\tthis._originalWebview.element.style.left = `16px`;\n\t\t\t}\n\n\t\t\tif (this._webviewTransparentCover) {\n\t\t\t\tthis._webviewTransparentCover.style.height = `${this._dimension.height}px`;\n\t\t\t\tthis._webviewTransparentCover.style.width = `${this._dimension.width}px`;\n\t\t\t}\n\n\t\t\tif (overviewRulerEnabled) {\n\t\t\t\tthis._overviewRuler.layout();\n\t\t\t}\n\t\t}\n\n\t\tthis._lastLayoutProperties = { dimension, position };\n\n\t\tthis._eventDispatcher?.emit([new NotebookDiffLayoutChangedEvent({ width: true, fontInfo: true }, this.getLayoutInfo())]);\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\tthis._layoutCancellationTokenSource?.dispose();\n\t\tthis._detachModel();\n\t\tsuper.dispose();\n\t}\n}\n\nregisterZIndex(ZIndex.Base, 10, 'notebook-diff-view-viewport-slider');\n\nregisterThemingParticipant((theme, collector) => {\n\tconst diffDiagonalFillColor = theme.getColor(diffDiagonalFill);\n\tcollector.addRule(`\n\t.notebook-text-diff-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${diffDiagonalFillColor} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${diffDiagonalFillColor} 50%, ${diffDiagonalFillColor} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`);\n\n\tcollector.addRule(`.notebook-text-diff-editor .cell-body { margin: ${DIFF_CELL_MARGIN}px; }`);\n\t// We do not want a left margin, as we add an overlay for expanind the collapsed/hidden cells.\n\tcollector.addRule(`.notebook-text-diff-editor .cell-placeholder-body { margin: ${DIFF_CELL_MARGIN}px 0; }`);\n});\n"]}