{"version":3,"sources":["vs/workbench/contrib/notebook/browser/outputEditor/notebookOutputEditor.ts"],"names":[],"mappings":"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","file":"notebookOutputEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../base/browser/dom.js';\nimport * as nls from '../../../../../nls.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { IEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { EditorPane } from '../../../../browser/parts/editor/editorPane.js';\nimport { IWorkbenchContribution, registerWorkbenchContribution2, WorkbenchPhase } from '../../../../common/contributions.js';\nimport { IEditorOpenContext } from '../../../../common/editor.js';\nimport { IEditorGroup } from '../../../../services/editor/common/editorGroupsService.js';\nimport { IEditorResolverService, RegisteredEditorPriority } from '../../../../services/editor/common/editorResolverService.js';\nimport { CellUri, NOTEBOOK_OUTPUT_EDITOR_ID } from '../../common/notebookCommon.js';\nimport { INotebookService } from '../../common/notebookService.js';\nimport { CellEditState, IBaseCellEditorOptions, ICellOutputViewModel, ICommonCellInfo, IGenericCellViewModel, IInsetRenderOutput, INotebookEditorCreationOptions, RenderOutputType } from '../notebookBrowser.js';\nimport { getDefaultNotebookCreationOptions } from '../notebookEditorWidget.js';\nimport { NotebookOptions } from '../notebookOptions.js';\nimport { BackLayerWebView, INotebookDelegateForWebview } from '../view/renderers/backLayerWebView.js';\nimport { NotebookOutputEditorInput } from './notebookOutputEditorInput.js';\nimport { FontInfo } from '../../../../../editor/common/config/fontInfo.js';\nimport { createBareFontInfoFromRawSettings } from '../../../../../editor/common/config/fontInfoFromSettings.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IEditorOptions as ICodeEditorOptions } from '../../../../../editor/common/config/editorOptions.js';\nimport { FontMeasurements } from '../../../../../editor/browser/config/fontMeasurements.js';\nimport { PixelRatio } from '../../../../../base/browser/pixelRatio.js';\nimport { NotebookViewModel } from '../viewModel/notebookViewModelImpl.js';\nimport { NotebookEventDispatcher } from '../viewModel/eventDispatcher.js';\nimport { ViewContext } from '../viewModel/viewContext.js';\n\nexport class NoopCellEditorOptions extends Disposable implements IBaseCellEditorOptions {\n\tprivate static fixedEditorOptions: ICodeEditorOptions = {\n\t\tscrollBeyondLastLine: false,\n\t\tscrollbar: {\n\t\t\tverticalScrollbarSize: 14,\n\t\t\thorizontal: 'auto',\n\t\t\tuseShadows: true,\n\t\t\tverticalHasArrows: false,\n\t\t\thorizontalHasArrows: false,\n\t\t\talwaysConsumeMouseWheel: false\n\t\t},\n\t\trenderLineHighlightOnlyWhenFocus: true,\n\t\toverviewRulerLanes: 0,\n\t\tlineDecorationsWidth: 0,\n\t\tfolding: true,\n\t\tfixedOverflowWidgets: true,\n\t\tminimap: { enabled: false },\n\t\trenderValidationDecorations: 'on',\n\t\tlineNumbersMinChars: 3\n\t};\n\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\tprivate _value: ICodeEditorOptions;\n\n\tget value(): Readonly<ICodeEditorOptions> {\n\t\treturn this._value;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._value = Object.freeze({\n\t\t\t...NoopCellEditorOptions.fixedEditorOptions,\n\t\t\tpadding: { top: 12, bottom: 12 },\n\t\t\treadOnly: true\n\t\t});\n\t}\n}\n\nexport class NotebookOutputEditor extends EditorPane implements INotebookDelegateForWebview {\n\n\tstatic readonly ID: string = NOTEBOOK_OUTPUT_EDITOR_ID;\n\n\tcreationOptions: INotebookEditorCreationOptions = getDefaultNotebookCreationOptions();\n\n\tprivate _rootElement!: HTMLElement;\n\tprivate _outputWebview: BackLayerWebView<ICommonCellInfo> | null = null;\n\n\tprivate _fontInfo: FontInfo | undefined;\n\n\tprivate _notebookOptions: NotebookOptions;\n\tprivate _notebookViewModel: NotebookViewModel | undefined;\n\n\tprivate _isDisposed: boolean = false;\n\tget isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\n\t) {\n\t\tsuper(NotebookOutputEditor.ID, group, telemetryService, themeService, storageService);\n\t\tthis._notebookOptions = this.instantiationService.createInstance(NotebookOptions, this.window, false, undefined);\n\t\tthis._register(this._notebookOptions);\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._rootElement = DOM.append(parent, DOM.$('.notebook-output-editor'));\n\t}\n\n\tprivate get fontInfo() {\n\t\tif (!this._fontInfo) {\n\t\t\tthis._fontInfo = this.createFontInfo();\n\t\t}\n\n\t\treturn this._fontInfo;\n\t}\n\n\tprivate createFontInfo() {\n\t\tconst editorOptions = this.configurationService.getValue<ICodeEditorOptions>('editor');\n\t\treturn FontMeasurements.readFontInfo(this.window, createBareFontInfoFromRawSettings(editorOptions, PixelRatio.getInstance(this.window).value));\n\t}\n\n\tprivate async _createOriginalWebview(id: string, viewType: string, resource: URI): Promise<void> {\n\t\tthis._outputWebview?.dispose();\n\n\t\tthis._outputWebview = this.instantiationService.createInstance(BackLayerWebView, this, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, undefined) as BackLayerWebView<ICommonCellInfo>;\n\n\t\t// attach the webview container to the DOM tree first\n\t\tDOM.append(this._rootElement, this._outputWebview.element);\n\n\t\tthis._outputWebview.createWebview(this.window);\n\t\tthis._outputWebview.element.style.width = `calc(100% - 16px)`;\n\t\tthis._outputWebview.element.style.left = `16px`;\n\n\t}\n\n\tprivate _generateFontFamily(): string {\n\t\treturn this.fontInfo.fontFamily ?? `\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`;\n\t}\n\n\toverride getTitle(): string {\n\t\tif (this.input) {\n\t\t\treturn this.input.getName();\n\t\t}\n\n\t\treturn nls.localize('notebookOutputEditor', \"Notebook Output Editor\");\n\t}\n\n\toverride async setInput(input: NotebookOutputEditorInput, options: IEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(input, options, context, token);\n\n\t\tconst model = await input.resolve();\n\t\tif (!model) {\n\t\t\tthrow new Error('Invalid notebook output editor input');\n\t\t}\n\n\t\tconst resolvedNotebookEditorModel = model.resolvedNotebookEditorModel;\n\n\t\tawait this._createOriginalWebview(generateUuid(), resolvedNotebookEditorModel.viewType, URI.from({ scheme: Schemas.vscodeNotebookCellOutput, path: '', query: 'openIn=notebookOutputEditor' }));\n\n\t\tconst notebookTextModel = resolvedNotebookEditorModel.notebook;\n\t\tconst eventDispatcher = this._register(new NotebookEventDispatcher());\n\t\tconst editorOptions = this._register(new NoopCellEditorOptions());\n\t\tconst viewContext = new ViewContext(\n\t\t\tthis._notebookOptions,\n\t\t\teventDispatcher,\n\t\t\t_language => editorOptions\n\t\t);\n\n\t\tthis._notebookViewModel = this.instantiationService.createInstance(NotebookViewModel, notebookTextModel.viewType, notebookTextModel, viewContext, null, { isReadOnly: true });\n\n\t\tconst cellViewModel = this._notebookViewModel.getCellByHandle(model.cell.handle);\n\t\tif (!cellViewModel) {\n\t\t\tthrow new Error('Invalid NotebookOutputEditorInput, no matching cell view model');\n\t\t}\n\n\t\tconst cellOutputViewModel = cellViewModel.outputsViewModels.find(outputViewModel => outputViewModel.model.outputId === model.outputId);\n\t\tif (!cellOutputViewModel) {\n\t\t\tthrow new Error('Invalid NotebookOutputEditorInput, no matching cell output view model');\n\t\t}\n\n\t\tlet result: IInsetRenderOutput | undefined = undefined;\n\n\t\tconst [mimeTypes, pick] = cellOutputViewModel.resolveMimeTypes(notebookTextModel, undefined);\n\t\tconst pickedMimeTypeRenderer = cellOutputViewModel.pickedMimeType || mimeTypes[pick];\n\t\tif (mimeTypes.length !== 0) {\n\t\t\tconst renderer = this.notebookService.getRendererInfo(pickedMimeTypeRenderer.rendererId);\n\t\t\tresult = renderer\n\t\t\t\t? { type: RenderOutputType.Extension, renderer, source: cellOutputViewModel, mimeType: pickedMimeTypeRenderer.mimeType }\n\t\t\t\t: this._renderMissingRenderer(cellOutputViewModel, pickedMimeTypeRenderer.mimeType);\n\n\t\t}\n\n\t\tif (!result) {\n\t\t\tthrow new Error('No InsetRenderInfo for output');\n\t\t}\n\n\t\tconst cellInfo: ICommonCellInfo = {\n\t\t\tcellId: cellViewModel.id,\n\t\t\tcellHandle: model.cell.handle,\n\t\t\tcellUri: model.cell.uri,\n\t\t};\n\n\t\tthis._outputWebview?.createOutput(cellInfo, result, 0, 0);\n\t}\n\n\tprivate _renderMissingRenderer(viewModel: ICellOutputViewModel, preferredMimeType: string | undefined): IInsetRenderOutput {\n\t\tif (!viewModel.model.outputs.length) {\n\t\t\treturn this._renderMessage(viewModel, nls.localize('empty', \"Cell has no output\"));\n\t\t}\n\n\t\tif (!preferredMimeType) {\n\t\t\tconst mimeTypes = viewModel.model.outputs.map(op => op.mime);\n\t\t\tconst mimeTypesMessage = mimeTypes.join(', ');\n\t\t\treturn this._renderMessage(viewModel, nls.localize('noRenderer.2', \"No renderer could be found for output. It has the following mimetypes: {0}\", mimeTypesMessage));\n\t\t}\n\n\t\treturn this._renderSearchForMimetype(viewModel, preferredMimeType);\n\t}\n\n\tprivate _renderMessage(viewModel: ICellOutputViewModel, message: string): IInsetRenderOutput {\n\t\tconst el = DOM.$('p', undefined, message);\n\t\treturn { type: RenderOutputType.Html, source: viewModel, htmlContent: el.outerHTML };\n\t}\n\n\tprivate _renderSearchForMimetype(viewModel: ICellOutputViewModel, mimeType: string): IInsetRenderOutput {\n\t\tconst query = `@tag:notebookRenderer ${mimeType}`;\n\n\t\tconst p = DOM.$('p', undefined, `No renderer could be found for mimetype \"${mimeType}\", but one might be available on the Marketplace.`);\n\t\tconst a = DOM.$('a', { href: `command:workbench.extensions.search?%22${query}%22`, class: 'monaco-button monaco-text-button', tabindex: 0, role: 'button', style: 'padding: 8px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(14, 99, 156); max-width: 200px;' }, `Search Marketplace`);\n\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: p.outerHTML + a.outerHTML,\n\t\t};\n\t}\n\n\tscheduleOutputHeightAck(cellInfo: ICommonCellInfo, outputId: string, height: number): void {\n\t\tDOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\tthis._outputWebview?.ackHeight([{ cellId: cellInfo.cellId, outputId, height }]);\n\t\t}, 10);\n\t}\n\n\tasync focusNotebookCell(cell: IGenericCellViewModel, focus: 'output' | 'editor' | 'container'): Promise<void> {\n\n\t}\n\n\tasync focusNextNotebookCell(cell: IGenericCellViewModel, focus: 'output' | 'editor' | 'container'): Promise<void> {\n\n\t}\n\n\ttoggleNotebookCellSelection(cell: IGenericCellViewModel) {\n\t\tthrow new Error('Not implemented.');\n\t}\n\n\tgetCellById(cellId: string): IGenericCellViewModel | undefined {\n\t\tthrow new Error('Not implemented');\n\t}\n\n\tgetCellByInfo(cellInfo: ICommonCellInfo): IGenericCellViewModel {\n\t\treturn this._notebookViewModel?.getCellByHandle(cellInfo.cellHandle) as IGenericCellViewModel;\n\t}\n\n\tlayout(dimension: DOM.Dimension, position: DOM.IDomPosition): void {\n\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\n\t}\n\n\ttriggerScroll(event: any): void {\n\n\t}\n\n\tgetOutputRenderer(): any {\n\n\t}\n\n\tupdateOutputHeight(cellInfo: ICommonCellInfo, output: ICellOutputViewModel, height: number, isInit: boolean, source?: string): void {\n\n\t}\n\n\tupdateMarkupCellHeight(cellId: string, height: number, isInit: boolean): void {\n\n\t}\n\n\tsetMarkupCellEditState(cellId: string, editState: CellEditState): void {\n\n\t}\n\n\tdidResizeOutput(cellId: string): void {\n\n\t}\n\n\tdidStartDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\n\t}\n\n\tdidDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\n\t}\n\n\tdidDropMarkupCell(cellId: string, event: { dragOffsetY: number; ctrlKey: boolean; altKey: boolean }): void {\n\n\t}\n\n\tdidEndDragMarkupCell(cellId: string): void {\n\n\t}\n\n\tupdatePerformanceMetadata(cellId: string, executionId: string, duration: number, rendererId: string): void {\n\n\t}\n\n\tdidFocusOutputInputChange(inputFocused: boolean): void {\n\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\tsuper.dispose();\n\t}\n}\n\nexport class NotebookOutputEditorContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contribution.notebookOutputEditorContribution';\n\n\tconstructor(\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,) {\n\t\teditorResolverService.registerEditor(\n\t\t\t`${Schemas.vscodeNotebookCellOutput}:/**`,\n\t\t\t{\n\t\t\t\tid: 'notebookOutputEditor',\n\t\t\t\tlabel: 'Notebook Output Editor',\n\t\t\t\tpriority: RegisteredEditorPriority.default\n\t\t\t},\n\t\t\t{\n\t\t\t\tcanSupportResource: (resource: URI) => {\n\t\t\t\t\tif (resource.scheme === Schemas.vscodeNotebookCellOutput) {\n\t\t\t\t\t\tconst params = new URLSearchParams(resource.query);\n\t\t\t\t\t\treturn params.get('openIn') === 'notebookOutputEditor';\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tcreateEditorInput: async ({ resource, options }) => {\n\t\t\t\t\tconst outputUriData = CellUri.parseCellOutputUri(resource);\n\t\t\t\t\tif (!outputUriData || !outputUriData.notebook || outputUriData.cellIndex === undefined || outputUriData.outputIndex === undefined || !outputUriData.outputId) {\n\t\t\t\t\t\tthrow new Error('Invalid output uri for notebook output editor');\n\t\t\t\t\t}\n\n\t\t\t\t\tconst notebookUri = this.uriIdentityService.asCanonicalUri(outputUriData.notebook);\n\t\t\t\t\tconst cellIndex = outputUriData.cellIndex;\n\t\t\t\t\tconst outputId = outputUriData.outputId;\n\t\t\t\t\tconst outputIndex = outputUriData.outputIndex;\n\n\t\t\t\t\tconst editorInput = this.instantiationService.createInstance(NotebookOutputEditorInput, notebookUri, cellIndex, outputId, outputIndex);\n\t\t\t\t\treturn {\n\t\t\t\t\t\teditor: editorInput,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n}\n\nregisterWorkbenchContribution2(NotebookOutputEditorContribution.ID, NotebookOutputEditorContribution, WorkbenchPhase.BlockRestore);\n"]}