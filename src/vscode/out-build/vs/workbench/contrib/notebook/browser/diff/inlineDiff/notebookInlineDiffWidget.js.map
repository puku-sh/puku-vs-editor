{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/browser/diff/inlineDiff/notebookInlineDiffWidget.ts","vs/workbench/contrib/notebook/browser/diff/inlineDiff/notebookInlineDiffWidget.ts"],"names":[],"mappings":"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","file":"notebookInlineDiffWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { CodeWindow } from '../../../../../../base/browser/window.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { EditorExtensionsRegistry } from '../../../../../../editor/browser/editorExtensions.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { NotebookTextModel } from '../../../common/model/notebookTextModel.js';\nimport { NotebookDiffEditorInput } from '../../../common/notebookDiffEditorInput.js';\nimport { NotebookInlineDiffDecorationContribution } from './notebookInlineDiff.js';\nimport { INotebookEditorOptions } from '../../notebookBrowser.js';\nimport { NotebookEditorExtensionsRegistry } from '../../notebookEditorExtensions.js';\nimport { NotebookEditorWidget } from '../../notebookEditorWidget.js';\nimport { NotebookOptions } from '../../notebookOptions.js';\nimport { IBorrowValue, INotebookEditorService } from '../../services/notebookEditorService.js';\n\nexport class NotebookInlineDiffWidget extends Disposable {\n\n\tprivate widget: IBorrowValue<NotebookEditorWidget> = { value: undefined };\n\tprivate position: DOM.IDomPosition | undefined;\n\n\tget editorWidget() {\n\t\treturn this.widget.value;\n\t}\n\n\tconstructor(\n\t\tprivate readonly rootElement: HTMLElement,\n\t\tprivate readonly groupId: number,\n\t\tprivate readonly window: CodeWindow,\n\t\tprivate readonly options: NotebookOptions,\n\t\tprivate dimension: DOM.Dimension | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@INotebookEditorService private readonly widgetService: INotebookEditorService) {\n\t\tsuper();\n\t}\n\n\tasync show(input: NotebookDiffEditorInput, model: NotebookTextModel | undefined, previousModel: NotebookTextModel | undefined, options: INotebookEditorOptions | undefined) {\n\t\tif (!this.widget.value) {\n\t\t\tthis.createNotebookWidget(input, this.groupId, this.rootElement);\n\t\t}\n\n\t\tif (this.dimension) {\n\t\t\tthis.widget.value?.layout(this.dimension, this.rootElement, this.position);\n\t\t}\n\n\t\tif (model) {\n\t\t\tawait this.widget.value?.setOptions({ ...options });\n\t\t\tthis.widget.value?.notebookOptions.previousModelToCompare.set(previousModel, undefined);\n\n\t\t\tawait this.widget.value!.setModel(model, options?.viewState);\n\t\t}\n\t}\n\n\thide() {\n\t\tif (this.widget.value) {\n\t\t\tthis.widget.value.notebookOptions.previousModelToCompare.set(undefined, undefined);\n\t\t\tthis.widget.value.onWillHide();\n\t\t}\n\t}\n\n\tsetLayout(dimension: DOM.Dimension, position: DOM.IDomPosition) {\n\t\tthis.dimension = dimension;\n\t\tthis.position = position;\n\t}\n\n\tprivate createNotebookWidget(input: NotebookDiffEditorInput, groupId: number, rootElement: HTMLElement | undefined) {\n\t\tconst contributions = NotebookEditorExtensionsRegistry.getSomeEditorContributions([NotebookInlineDiffDecorationContribution.ID]);\n\t\tconst menuIds = {\n\t\t\tnotebookToolbar: MenuId.NotebookToolbar,\n\t\t\tcellTitleToolbar: MenuId.NotebookCellTitle,\n\t\t\tcellDeleteToolbar: MenuId.NotebookCellDelete,\n\t\t\tcellInsertToolbar: MenuId.NotebookCellBetween,\n\t\t\tcellTopInsertToolbar: MenuId.NotebookCellListTop,\n\t\t\tcellExecuteToolbar: MenuId.NotebookCellExecute,\n\t\t\tcellExecutePrimary: undefined,\n\t\t};\n\t\tconst skipContributions = [\n\t\t\t'editor.contrib.review',\n\t\t\t'editor.contrib.floatingClickMenu',\n\t\t\t'editor.contrib.dirtydiff',\n\t\t\t'editor.contrib.testingOutputPeek',\n\t\t\t'editor.contrib.testingDecorations',\n\t\t\t'store.contrib.stickyScrollController',\n\t\t\t'editor.contrib.findController',\n\t\t\t'editor.contrib.emptyTextEditorHint',\n\t\t];\n\t\tconst cellEditorContributions = EditorExtensionsRegistry.getEditorContributions().filter(c => skipContributions.indexOf(c.id) === -1);\n\n\t\tthis.widget = <IBorrowValue<NotebookEditorWidget>>this.instantiationService.invokeFunction(this.widgetService.retrieveWidget,\n\t\t\tgroupId, input, { contributions, menuIds, cellEditorContributions, options: this.options }, this.dimension, this.window);\n\t\tif (this.rootElement && this.widget.value!.getDomNode()) {\n\t\t\tthis.rootElement.setAttribute('aria-flowto', this.widget.value!.getDomNode().id || '');\n\t\t\tDOM.setParentFlowTo(this.widget.value!.getDomNode(), this.rootElement);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tif (this.widget.value) {\n\t\t\tthis.widget.value.dispose();\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { CodeWindow } from '../../../../../../base/browser/window.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { EditorExtensionsRegistry } from '../../../../../../editor/browser/editorExtensions.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { NotebookTextModel } from '../../../common/model/notebookTextModel.js';\nimport { NotebookDiffEditorInput } from '../../../common/notebookDiffEditorInput.js';\nimport { NotebookInlineDiffDecorationContribution } from './notebookInlineDiff.js';\nimport { INotebookEditorOptions } from '../../notebookBrowser.js';\nimport { NotebookEditorExtensionsRegistry } from '../../notebookEditorExtensions.js';\nimport { NotebookEditorWidget } from '../../notebookEditorWidget.js';\nimport { NotebookOptions } from '../../notebookOptions.js';\nimport { IBorrowValue, INotebookEditorService } from '../../services/notebookEditorService.js';\n\nexport class NotebookInlineDiffWidget extends Disposable {\n\n\tprivate widget: IBorrowValue<NotebookEditorWidget> = { value: undefined };\n\tprivate position: DOM.IDomPosition | undefined;\n\n\tget editorWidget() {\n\t\treturn this.widget.value;\n\t}\n\n\tconstructor(\n\t\tprivate readonly rootElement: HTMLElement,\n\t\tprivate readonly groupId: number,\n\t\tprivate readonly window: CodeWindow,\n\t\tprivate readonly options: NotebookOptions,\n\t\tprivate dimension: DOM.Dimension | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@INotebookEditorService private readonly widgetService: INotebookEditorService) {\n\t\tsuper();\n\t}\n\n\tasync show(input: NotebookDiffEditorInput, model: NotebookTextModel | undefined, previousModel: NotebookTextModel | undefined, options: INotebookEditorOptions | undefined) {\n\t\tif (!this.widget.value) {\n\t\t\tthis.createNotebookWidget(input, this.groupId, this.rootElement);\n\t\t}\n\n\t\tif (this.dimension) {\n\t\t\tthis.widget.value?.layout(this.dimension, this.rootElement, this.position);\n\t\t}\n\n\t\tif (model) {\n\t\t\tawait this.widget.value?.setOptions({ ...options });\n\t\t\tthis.widget.value?.notebookOptions.previousModelToCompare.set(previousModel, undefined);\n\n\t\t\tawait this.widget.value!.setModel(model, options?.viewState);\n\t\t}\n\t}\n\n\thide() {\n\t\tif (this.widget.value) {\n\t\t\tthis.widget.value.notebookOptions.previousModelToCompare.set(undefined, undefined);\n\t\t\tthis.widget.value.onWillHide();\n\t\t}\n\t}\n\n\tsetLayout(dimension: DOM.Dimension, position: DOM.IDomPosition) {\n\t\tthis.dimension = dimension;\n\t\tthis.position = position;\n\t}\n\n\tprivate createNotebookWidget(input: NotebookDiffEditorInput, groupId: number, rootElement: HTMLElement | undefined) {\n\t\tconst contributions = NotebookEditorExtensionsRegistry.getSomeEditorContributions([NotebookInlineDiffDecorationContribution.ID]);\n\t\tconst menuIds = {\n\t\t\tnotebookToolbar: MenuId.NotebookToolbar,\n\t\t\tcellTitleToolbar: MenuId.NotebookCellTitle,\n\t\t\tcellDeleteToolbar: MenuId.NotebookCellDelete,\n\t\t\tcellInsertToolbar: MenuId.NotebookCellBetween,\n\t\t\tcellTopInsertToolbar: MenuId.NotebookCellListTop,\n\t\t\tcellExecuteToolbar: MenuId.NotebookCellExecute,\n\t\t\tcellExecutePrimary: undefined,\n\t\t};\n\t\tconst skipContributions = [\n\t\t\t'editor.contrib.review',\n\t\t\t'editor.contrib.floatingClickMenu',\n\t\t\t'editor.contrib.dirtydiff',\n\t\t\t'editor.contrib.testingOutputPeek',\n\t\t\t'editor.contrib.testingDecorations',\n\t\t\t'store.contrib.stickyScrollController',\n\t\t\t'editor.contrib.findController',\n\t\t\t'editor.contrib.emptyTextEditorHint',\n\t\t];\n\t\tconst cellEditorContributions = EditorExtensionsRegistry.getEditorContributions().filter(c => skipContributions.indexOf(c.id) === -1);\n\n\t\tthis.widget = <IBorrowValue<NotebookEditorWidget>>this.instantiationService.invokeFunction(this.widgetService.retrieveWidget,\n\t\t\tgroupId, input, { contributions, menuIds, cellEditorContributions, options: this.options }, this.dimension, this.window);\n\t\tif (this.rootElement && this.widget.value!.getDomNode()) {\n\t\t\tthis.rootElement.setAttribute('aria-flowto', this.widget.value!.getDomNode().id || '');\n\t\t\tDOM.setParentFlowTo(this.widget.value!.getDomNode(), this.rootElement);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tif (this.widget.value) {\n\t\t\tthis.widget.value.dispose();\n\t\t}\n\t}\n}\n"]}