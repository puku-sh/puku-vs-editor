{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/common/notebookDiffEditorInput.ts","vs/workbench/contrib/notebook/common/notebookDiffEditorInput.ts"],"names":[],"mappings":"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","file":"notebookDiffEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceDiffEditorInput, IResourceSideBySideEditorInput, isResourceDiffEditorInput, IUntypedEditorInput } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { EditorModel } from '../../../common/editor/editorModel.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotebookDiffEditorModel, IResolvedNotebookEditorModel } from './notebookCommon.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { NotebookEditorInput } from './notebookEditorInput.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\n\nclass NotebookDiffEditorModel extends EditorModel implements INotebookDiffEditorModel {\n\tconstructor(\n\t\treadonly original: IResolvedNotebookEditorModel,\n\t\treadonly modified: IResolvedNotebookEditorModel,\n\t) {\n\t\tsuper();\n\t}\n}\n\nexport class NotebookDiffEditorInput extends DiffEditorInput {\n\tstatic create(instantiationService: IInstantiationService, resource: URI, name: string | undefined, description: string | undefined, originalResource: URI, viewType: string) {\n\t\tconst original = NotebookEditorInput.getOrCreate(instantiationService, originalResource, undefined, viewType);\n\t\tconst modified = NotebookEditorInput.getOrCreate(instantiationService, resource, undefined, viewType);\n\t\treturn instantiationService.createInstance(NotebookDiffEditorInput, name, description, original, modified, viewType);\n\t}\n\n\tstatic override readonly ID: string = 'workbench.input.diffNotebookInput';\n\n\tprivate _modifiedTextModel: IResolvedNotebookEditorModel | null = null;\n\tprivate _originalTextModel: IResolvedNotebookEditorModel | null = null;\n\n\toverride get resource() {\n\t\treturn this.modified.resource;\n\t}\n\n\toverride get editorId() {\n\t\treturn this.viewType;\n\t}\n\n\tprivate _cachedModel: NotebookDiffEditorModel | undefined = undefined;\n\n\tconstructor(\n\t\tname: string | undefined,\n\t\tdescription: string | undefined,\n\t\toverride readonly original: NotebookEditorInput,\n\t\toverride readonly modified: NotebookEditorInput,\n\t\tpublic readonly viewType: string,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\tdescription,\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\tundefined,\n\t\t\teditorService\n\t\t);\n\t}\n\n\toverride get typeId(): string {\n\t\treturn NotebookDiffEditorInput.ID;\n\t}\n\n\toverride async resolve(): Promise<NotebookDiffEditorModel> {\n\t\tconst [originalEditorModel, modifiedEditorModel] = await Promise.all([\n\t\t\tthis.original.resolve(),\n\t\t\tthis.modified.resolve(),\n\t\t]);\n\n\t\tthis._cachedModel?.dispose();\n\n\t\t// TODO@rebornix check how we restore the editor in text diff editor\n\t\tif (!modifiedEditorModel) {\n\t\t\tthrow new Error(`Fail to resolve modified editor model for resource ${this.modified.resource} with notebookType ${this.viewType}`);\n\t\t}\n\n\t\tif (!originalEditorModel) {\n\t\t\tthrow new Error(`Fail to resolve original editor model for resource ${this.original.resource} with notebookType ${this.viewType}`);\n\t\t}\n\n\t\tthis._originalTextModel = originalEditorModel;\n\t\tthis._modifiedTextModel = modifiedEditorModel;\n\t\tthis._cachedModel = new NotebookDiffEditorModel(this._originalTextModel, this._modifiedTextModel);\n\t\treturn this._cachedModel;\n\t}\n\n\toverride toUntyped(): IResourceDiffEditorInput & IResourceSideBySideEditorInput {\n\t\tconst original = { resource: this.original.resource };\n\t\tconst modified = { resource: this.resource };\n\t\treturn {\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\tprimary: modified,\n\t\t\tsecondary: original,\n\t\t\toptions: {\n\t\t\t\toverride: this.viewType\n\t\t\t}\n\t\t};\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (this === otherInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherInput instanceof NotebookDiffEditorInput) {\n\t\t\treturn this.modified.matches(otherInput.modified)\n\t\t\t\t&& this.original.matches(otherInput.original)\n\t\t\t\t&& this.viewType === otherInput.viewType;\n\t\t}\n\n\t\tif (isResourceDiffEditorInput(otherInput)) {\n\t\t\treturn this.modified.matches(otherInput.modified)\n\t\t\t\t&& this.original.matches(otherInput.original)\n\t\t\t\t&& this.editorId !== undefined\n\t\t\t\t&& (this.editorId === otherInput.options?.override || otherInput.options?.override === undefined);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._cachedModel?.dispose();\n\t\tthis._cachedModel = undefined;\n\t\tthis.original.dispose();\n\t\tthis.modified.dispose();\n\t\tthis._originalTextModel = null;\n\t\tthis._modifiedTextModel = null;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceDiffEditorInput, IResourceSideBySideEditorInput, isResourceDiffEditorInput, IUntypedEditorInput } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { EditorModel } from '../../../common/editor/editorModel.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotebookDiffEditorModel, IResolvedNotebookEditorModel } from './notebookCommon.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { NotebookEditorInput } from './notebookEditorInput.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\n\nclass NotebookDiffEditorModel extends EditorModel implements INotebookDiffEditorModel {\n\tconstructor(\n\t\treadonly original: IResolvedNotebookEditorModel,\n\t\treadonly modified: IResolvedNotebookEditorModel,\n\t) {\n\t\tsuper();\n\t}\n}\n\nexport class NotebookDiffEditorInput extends DiffEditorInput {\n\tstatic create(instantiationService: IInstantiationService, resource: URI, name: string | undefined, description: string | undefined, originalResource: URI, viewType: string) {\n\t\tconst original = NotebookEditorInput.getOrCreate(instantiationService, originalResource, undefined, viewType);\n\t\tconst modified = NotebookEditorInput.getOrCreate(instantiationService, resource, undefined, viewType);\n\t\treturn instantiationService.createInstance(NotebookDiffEditorInput, name, description, original, modified, viewType);\n\t}\n\n\tstatic override readonly ID: string = 'workbench.input.diffNotebookInput';\n\n\tprivate _modifiedTextModel: IResolvedNotebookEditorModel | null = null;\n\tprivate _originalTextModel: IResolvedNotebookEditorModel | null = null;\n\n\toverride get resource() {\n\t\treturn this.modified.resource;\n\t}\n\n\toverride get editorId() {\n\t\treturn this.viewType;\n\t}\n\n\tprivate _cachedModel: NotebookDiffEditorModel | undefined = undefined;\n\n\tconstructor(\n\t\tname: string | undefined,\n\t\tdescription: string | undefined,\n\t\toverride readonly original: NotebookEditorInput,\n\t\toverride readonly modified: NotebookEditorInput,\n\t\tpublic readonly viewType: string,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\tdescription,\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\tundefined,\n\t\t\teditorService\n\t\t);\n\t}\n\n\toverride get typeId(): string {\n\t\treturn NotebookDiffEditorInput.ID;\n\t}\n\n\toverride async resolve(): Promise<NotebookDiffEditorModel> {\n\t\tconst [originalEditorModel, modifiedEditorModel] = await Promise.all([\n\t\t\tthis.original.resolve(),\n\t\t\tthis.modified.resolve(),\n\t\t]);\n\n\t\tthis._cachedModel?.dispose();\n\n\t\t// TODO@rebornix check how we restore the editor in text diff editor\n\t\tif (!modifiedEditorModel) {\n\t\t\tthrow new Error(`Fail to resolve modified editor model for resource ${this.modified.resource} with notebookType ${this.viewType}`);\n\t\t}\n\n\t\tif (!originalEditorModel) {\n\t\t\tthrow new Error(`Fail to resolve original editor model for resource ${this.original.resource} with notebookType ${this.viewType}`);\n\t\t}\n\n\t\tthis._originalTextModel = originalEditorModel;\n\t\tthis._modifiedTextModel = modifiedEditorModel;\n\t\tthis._cachedModel = new NotebookDiffEditorModel(this._originalTextModel, this._modifiedTextModel);\n\t\treturn this._cachedModel;\n\t}\n\n\toverride toUntyped(): IResourceDiffEditorInput & IResourceSideBySideEditorInput {\n\t\tconst original = { resource: this.original.resource };\n\t\tconst modified = { resource: this.resource };\n\t\treturn {\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\tprimary: modified,\n\t\t\tsecondary: original,\n\t\t\toptions: {\n\t\t\t\toverride: this.viewType\n\t\t\t}\n\t\t};\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (this === otherInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherInput instanceof NotebookDiffEditorInput) {\n\t\t\treturn this.modified.matches(otherInput.modified)\n\t\t\t\t&& this.original.matches(otherInput.original)\n\t\t\t\t&& this.viewType === otherInput.viewType;\n\t\t}\n\n\t\tif (isResourceDiffEditorInput(otherInput)) {\n\t\t\treturn this.modified.matches(otherInput.modified)\n\t\t\t\t&& this.original.matches(otherInput.original)\n\t\t\t\t&& this.editorId !== undefined\n\t\t\t\t&& (this.editorId === otherInput.options?.override || otherInput.options?.override === undefined);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._cachedModel?.dispose();\n\t\tthis._cachedModel = undefined;\n\t\tthis.original.dispose();\n\t\tthis.modified.dispose();\n\t\tthis._originalTextModel = null;\n\t\tthis._modifiedTextModel = null;\n\t}\n}\n"]}