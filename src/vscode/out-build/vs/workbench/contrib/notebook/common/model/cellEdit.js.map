{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/common/model/cellEdit.ts","vs/workbench/contrib/notebook/common/model/cellEdit.ts"],"names":[],"mappings":"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","file":"cellEdit.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceUndoRedoElement, UndoRedoElementType } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { NotebookCellTextModel } from './notebookCellTextModel.js';\nimport { ISelectionState, NotebookCellMetadata } from '../notebookCommon.js';\n\n/**\n * It should not modify Undo/Redo stack\n */\nexport interface ITextCellEditingDelegate {\n\tinsertCell?(index: number, cell: NotebookCellTextModel, endSelections?: ISelectionState): void;\n\tdeleteCell?(index: number, endSelections?: ISelectionState): void;\n\treplaceCell?(index: number, count: number, cells: NotebookCellTextModel[], endSelections?: ISelectionState): void;\n\tmoveCell?(fromIndex: number, length: number, toIndex: number, beforeSelections: ISelectionState | undefined, endSelections?: ISelectionState): void;\n\tupdateCellMetadata?(index: number, newMetadata: NotebookCellMetadata): void;\n}\n\nexport class MoveCellEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tget label() {\n\t\treturn this.length === 1 ? 'Move Cell' : 'Move Cells';\n\t}\n\tcode: string = 'undoredo.textBufferEdit';\n\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate fromIndex: number,\n\t\tprivate length: number,\n\t\tprivate toIndex: number,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforedSelections: ISelectionState | undefined,\n\t\tprivate endSelections: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.toIndex, this.length, this.fromIndex, this.endSelections, this.beforedSelections);\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.fromIndex, this.length, this.toIndex, this.beforedSelections, this.endSelections);\n\t}\n}\n\nexport class SpliceCellsEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tget label() {\n\t\t// Compute the most appropriate labels\n\t\tif (this.diffs.length === 1 && this.diffs[0][1].length === 0) {\n\t\t\treturn this.diffs[0][2].length > 1 ? 'Insert Cells' : 'Insert Cell';\n\t\t}\n\t\tif (this.diffs.length === 1 && this.diffs[0][2].length === 0) {\n\t\t\treturn this.diffs[0][1].length > 1 ? 'Delete Cells' : 'Delete Cell';\n\t\t}\n\t\t// Default to Insert Cell\n\t\treturn 'Insert Cell';\n\t}\n\tcode: string = 'undoredo.textBufferEdit';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate diffs: [number, NotebookCellTextModel[], NotebookCellTextModel[]][],\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforeHandles: ISelectionState | undefined,\n\t\tprivate endHandles: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[2].length, diff[1], this.beforeHandles);\n\t\t});\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.reverse().forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[1].length, diff[2], this.endHandles);\n\t\t});\n\t}\n}\n\nexport class CellMetadataEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tlabel: string = 'Update Cell Metadata';\n\tcode: string = 'undoredo.textBufferEdit';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\treadonly index: number,\n\t\treadonly oldMetadata: NotebookCellMetadata,\n\t\treadonly newMetadata: NotebookCellMetadata,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t) {\n\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.oldMetadata);\n\t}\n\n\tredo(): void | Promise<void> {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.newMetadata);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceUndoRedoElement, UndoRedoElementType } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { NotebookCellTextModel } from './notebookCellTextModel.js';\nimport { ISelectionState, NotebookCellMetadata } from '../notebookCommon.js';\n\n/**\n * It should not modify Undo/Redo stack\n */\nexport interface ITextCellEditingDelegate {\n\tinsertCell?(index: number, cell: NotebookCellTextModel, endSelections?: ISelectionState): void;\n\tdeleteCell?(index: number, endSelections?: ISelectionState): void;\n\treplaceCell?(index: number, count: number, cells: NotebookCellTextModel[], endSelections?: ISelectionState): void;\n\tmoveCell?(fromIndex: number, length: number, toIndex: number, beforeSelections: ISelectionState | undefined, endSelections?: ISelectionState): void;\n\tupdateCellMetadata?(index: number, newMetadata: NotebookCellMetadata): void;\n}\n\nexport class MoveCellEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tget label() {\n\t\treturn this.length === 1 ? 'Move Cell' : 'Move Cells';\n\t}\n\tcode: string = 'undoredo.textBufferEdit';\n\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate fromIndex: number,\n\t\tprivate length: number,\n\t\tprivate toIndex: number,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforedSelections: ISelectionState | undefined,\n\t\tprivate endSelections: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.toIndex, this.length, this.fromIndex, this.endSelections, this.beforedSelections);\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.fromIndex, this.length, this.toIndex, this.beforedSelections, this.endSelections);\n\t}\n}\n\nexport class SpliceCellsEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tget label() {\n\t\t// Compute the most appropriate labels\n\t\tif (this.diffs.length === 1 && this.diffs[0][1].length === 0) {\n\t\t\treturn this.diffs[0][2].length > 1 ? 'Insert Cells' : 'Insert Cell';\n\t\t}\n\t\tif (this.diffs.length === 1 && this.diffs[0][2].length === 0) {\n\t\t\treturn this.diffs[0][1].length > 1 ? 'Delete Cells' : 'Delete Cell';\n\t\t}\n\t\t// Default to Insert Cell\n\t\treturn 'Insert Cell';\n\t}\n\tcode: string = 'undoredo.textBufferEdit';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate diffs: [number, NotebookCellTextModel[], NotebookCellTextModel[]][],\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforeHandles: ISelectionState | undefined,\n\t\tprivate endHandles: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[2].length, diff[1], this.beforeHandles);\n\t\t});\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.reverse().forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[1].length, diff[2], this.endHandles);\n\t\t});\n\t}\n}\n\nexport class CellMetadataEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tlabel: string = 'Update Cell Metadata';\n\tcode: string = 'undoredo.textBufferEdit';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\treadonly index: number,\n\t\treadonly oldMetadata: NotebookCellMetadata,\n\t\treadonly newMetadata: NotebookCellMetadata,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t) {\n\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.oldMetadata);\n\t}\n\n\tredo(): void | Promise<void> {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.newMetadata);\n\t}\n}\n"]}