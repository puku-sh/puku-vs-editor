{"version":3,"sources":["vs/workbench/contrib/notebook/common/notebookEditorInput.ts"],"names":[],"mappings":"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","file":"notebookEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as glob from '../../../../base/common/glob.js';\nimport { GroupIdentifier, ISaveOptions, IMoveResult, IRevertOptions, EditorInputCapabilities, Verbosity, IUntypedEditorInput, IFileLimitedEditorInputOptions, isResourceEditorInput } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { INotebookService, SimpleNotebookProviderInfo } from './notebookService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { isEqual, toLocalResource } from '../../../../base/common/resources.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { INotebookEditorModelResolverService } from './notebookEditorModelResolverService.js';\nimport { IDisposable, IReference } from '../../../../base/common/lifecycle.js';\nimport { CellEditType, CellUri, IResolvedNotebookEditorModel } from './notebookCommon.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { AbstractResourceEditorInput } from '../../../common/editor/resourceEditorInput.js';\nimport { IResourceEditorInput } from '../../../../platform/editor/common/editor.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { IWorkingCopyIdentifier } from '../../../services/workingCopy/common/workingCopy.js';\nimport { NotebookProviderInfo } from './notebookProvider.js';\nimport { NotebookPerfMarks } from './notebookPerformance.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { localize } from '../../../../nls.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { ICustomEditorLabelService } from '../../../services/editor/common/customEditorLabelService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { isAbsolute } from '../../../../base/common/path.js';\n\nexport interface NotebookEditorInputOptions {\n\tstartDirty?: boolean;\n\t/**\n\t * backupId for webview\n\t */\n\t_backupId?: string;\n\t_workingCopy?: IWorkingCopyIdentifier;\n}\n\nexport class NotebookEditorInput extends AbstractResourceEditorInput {\n\n\tstatic getOrCreate(instantiationService: IInstantiationService, resource: URI, preferredResource: URI | undefined, viewType: string, options: NotebookEditorInputOptions = {}) {\n\t\tconst editor = instantiationService.createInstance(NotebookEditorInput, resource, preferredResource, viewType, options);\n\t\tif (preferredResource) {\n\t\t\teditor.setPreferredResource(preferredResource);\n\t\t}\n\t\treturn editor;\n\t}\n\n\tstatic readonly ID: string = 'workbench.input.notebook';\n\n\tprotected editorModelReference: IReference<IResolvedNotebookEditorModel> | null = null;\n\tprivate _sideLoadedListener: IDisposable;\n\tprivate _defaultDirtyState: boolean = false;\n\n\tconstructor(\n\t\tresource: URI,\n\t\tpreferredResource: URI | undefined,\n\t\tpublic readonly viewType: string,\n\t\tpublic readonly options: NotebookEditorInputOptions,\n\t\t@INotebookService private readonly _notebookService: INotebookService,\n\t\t@INotebookEditorModelResolverService private readonly _notebookModelResolverService: INotebookEditorModelResolverService,\n\t\t@IFileDialogService private readonly _fileDialogService: IFileDialogService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IFilesConfigurationService filesConfigurationService: IFilesConfigurationService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@ICustomEditorLabelService customEditorLabelService: ICustomEditorLabelService,\n\t\t@IWorkbenchEnvironmentService protected readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IPathService private readonly pathService: IPathService\n\t) {\n\t\tsuper(resource, preferredResource, labelService, fileService, filesConfigurationService, textResourceConfigurationService, customEditorLabelService);\n\t\tthis._defaultDirtyState = !!options.startDirty;\n\n\t\t// Automatically resolve this input when the \"wanted\" model comes to life via\n\t\t// some other way. This happens only once per input and resolve disposes\n\t\t// this listener\n\t\tthis._sideLoadedListener = _notebookService.onDidAddNotebookDocument(e => {\n\t\t\tif (e.viewType === this.viewType && e.uri.toString() === this.resource.toString()) {\n\t\t\t\tthis.resolve().catch(onUnexpectedError);\n\t\t\t}\n\t\t});\n\n\t\tthis._register(extensionService.onWillStop(e => {\n\t\t\tif (!e.auto && !this.isDirty()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst reason = e.auto\n\t\t\t\t? localize('vetoAutoExtHostRestart', \"An extension provided notebook for '{0}' is still open that would close otherwise.\", this.getName())\n\t\t\t\t: localize('vetoExtHostRestart', \"An extension provided notebook for '{0}' could not be saved.\", this.getName());\n\n\t\t\te.veto((async () => {\n\t\t\t\tconst editors = editorService.findEditors(this);\n\t\t\t\tif (e.auto) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (editors.length > 0) {\n\t\t\t\t\tconst result = await editorService.save(editors[0]);\n\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\treturn false; // Don't Veto\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true; // Veto\n\t\t\t})(), reason);\n\t\t}));\n\t}\n\n\toverride dispose() {\n\t\tthis._sideLoadedListener.dispose();\n\t\tthis.editorModelReference?.dispose();\n\t\tthis.editorModelReference = null;\n\t\tsuper.dispose();\n\t}\n\n\toverride get typeId(): string {\n\t\treturn NotebookEditorInput.ID;\n\t}\n\n\toverride get editorId(): string | undefined {\n\t\treturn this.viewType;\n\t}\n\n\toverride get capabilities(): EditorInputCapabilities {\n\t\tlet capabilities = EditorInputCapabilities.None;\n\n\t\tif (this.resource.scheme === Schemas.untitled) {\n\t\t\tcapabilities |= EditorInputCapabilities.Untitled;\n\t\t}\n\n\t\tif (this.editorModelReference) {\n\t\t\tif (this.editorModelReference.object.isReadonly()) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.filesConfigurationService.isReadonly(this.resource)) {\n\t\t\t\tcapabilities |= EditorInputCapabilities.Readonly;\n\t\t\t}\n\t\t}\n\n\t\tif (!(capabilities & EditorInputCapabilities.Readonly)) {\n\t\t\tcapabilities |= EditorInputCapabilities.CanDropIntoEditor;\n\t\t}\n\n\t\treturn capabilities;\n\t}\n\n\toverride getDescription(verbosity = Verbosity.MEDIUM): string | undefined {\n\t\tif (!this.hasCapability(EditorInputCapabilities.Untitled) || this.editorModelReference?.object.hasAssociatedFilePath()) {\n\t\t\treturn super.getDescription(verbosity);\n\t\t}\n\n\t\treturn undefined; // no description for untitled notebooks without associated file path\n\t}\n\n\toverride isReadonly(): boolean | IMarkdownString {\n\t\tif (!this.editorModelReference) {\n\t\t\treturn this.filesConfigurationService.isReadonly(this.resource);\n\t\t}\n\t\treturn this.editorModelReference.object.isReadonly();\n\t}\n\n\toverride isDirty() {\n\t\tif (!this.editorModelReference) {\n\t\t\treturn this._defaultDirtyState;\n\t\t}\n\t\treturn this.editorModelReference.object.isDirty();\n\t}\n\n\toverride isSaving(): boolean {\n\t\tconst model = this.editorModelReference?.object;\n\t\tif (!model || !model.isDirty() || model.hasErrorState || this.hasCapability(EditorInputCapabilities.Untitled)) {\n\t\t\treturn false; // require the model to be dirty, file-backed and not in an error state\n\t\t}\n\n\t\t// if a short auto save is configured, treat this as being saved\n\t\treturn this.filesConfigurationService.hasShortAutoSaveDelay(this);\n\t}\n\n\toverride async save(group: GroupIdentifier, options?: ISaveOptions): Promise<EditorInput | IUntypedEditorInput | undefined> {\n\t\tif (this.editorModelReference) {\n\n\t\t\tif (this.hasCapability(EditorInputCapabilities.Untitled)) {\n\t\t\t\treturn this.saveAs(group, options);\n\t\t\t} else {\n\t\t\t\tawait this.editorModelReference.object.save(options);\n\t\t\t}\n\n\t\t\treturn this;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\toverride async saveAs(group: GroupIdentifier, options?: ISaveOptions): Promise<IUntypedEditorInput | undefined> {\n\t\tif (!this.editorModelReference) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst provider = this._notebookService.getContributedNotebookType(this.viewType);\n\n\t\tif (!provider) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst pathCandidate = this.hasCapability(EditorInputCapabilities.Untitled)\n\t\t\t? await this._suggestName(provider)\n\t\t\t: this.editorModelReference.object.resource;\n\n\t\tlet target: URI | undefined;\n\t\tif (this.editorModelReference.object.hasAssociatedFilePath()) {\n\t\t\ttarget = pathCandidate;\n\t\t} else {\n\t\t\ttarget = await this._fileDialogService.pickFileToSave(pathCandidate, options?.availableFileSystems);\n\t\t\tif (!target) {\n\t\t\t\treturn undefined; // save cancelled\n\t\t\t}\n\t\t}\n\n\t\tif (!provider.matches(target)) {\n\t\t\tconst patterns = provider.selectors.map(pattern => {\n\t\t\t\tif (typeof pattern === 'string') {\n\t\t\t\t\treturn pattern;\n\t\t\t\t}\n\n\t\t\t\tif (glob.isRelativePattern(pattern)) {\n\t\t\t\t\treturn `${pattern} (base ${pattern.base})`;\n\t\t\t\t}\n\n\t\t\t\tif (pattern.exclude) {\n\t\t\t\t\treturn `${pattern.include} (exclude: ${pattern.exclude})`;\n\t\t\t\t} else {\n\t\t\t\t\treturn `${pattern.include}`;\n\t\t\t\t}\n\n\t\t\t}).join(', ');\n\t\t\tthrow new Error(`File name ${target} is not supported by ${provider.providerDisplayName}.\\n\\nPlease make sure the file name matches following patterns:\\n${patterns}`);\n\t\t}\n\n\t\treturn await this.editorModelReference.object.saveAs(target);\n\t}\n\n\tprivate async _suggestName(provider: NotebookProviderInfo) {\n\t\tconst resource = await this.ensureAbsolutePath(this.ensureProviderExtension(provider));\n\t\tconst remoteAuthority = this.environmentService.remoteAuthority;\n\t\treturn toLocalResource(resource, remoteAuthority, this.pathService.defaultUriScheme);\n\t}\n\n\tprivate async ensureAbsolutePath(resource: URI): Promise<URI> {\n\t\tif (resource.scheme !== Schemas.untitled || isAbsolute(resource.path)) {\n\t\t\treturn resource;\n\t\t}\n\n\t\tconst defaultFilePath = await this._fileDialogService.defaultFilePath();\n\t\treturn URI.joinPath(defaultFilePath, resource.path);\n\t}\n\n\tprivate ensureProviderExtension(provider: NotebookProviderInfo) {\n\t\tconst firstSelector = provider.selectors[0];\n\t\tlet selectorStr = firstSelector && typeof firstSelector === 'string' ? firstSelector : undefined;\n\t\tif (!selectorStr && firstSelector) {\n\t\t\tconst include = (firstSelector as { include?: string }).include;\n\t\t\tif (typeof include === 'string') {\n\t\t\t\tselectorStr = include;\n\t\t\t}\n\t\t}\n\n\t\tconst resource = this.resource;\n\t\tif (selectorStr) {\n\t\t\tconst matches = /^\\*\\.([A-Za-z_-]*)$/.exec(selectorStr);\n\t\t\tif (matches && matches.length > 1) {\n\t\t\t\tconst fileExt = matches[1];\n\t\t\t\tif (!resource.path.endsWith(fileExt)) {\n\t\t\t\t\treturn resource.with({ path: resource.path + '.' + fileExt });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn resource;\n\t}\n\n\t// called when users rename a notebook document\n\toverride async rename(group: GroupIdentifier, target: URI): Promise<IMoveResult | undefined> {\n\t\tif (this.editorModelReference) {\n\t\t\treturn { editor: { resource: target }, options: { override: this.viewType } };\n\n\t\t}\n\t\treturn undefined;\n\t}\n\n\toverride async revert(_group: GroupIdentifier, options?: IRevertOptions): Promise<void> {\n\t\tif (this.editorModelReference && this.editorModelReference.object.isDirty()) {\n\t\t\tawait this.editorModelReference.object.revert(options);\n\t\t}\n\t}\n\n\toverride async resolve(_options?: IFileLimitedEditorInputOptions, perf?: NotebookPerfMarks): Promise<IResolvedNotebookEditorModel | null> {\n\t\tif (!await this._notebookService.canResolve(this.viewType)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tperf?.mark('extensionActivated');\n\n\t\t// we are now loading the notebook and don't need to listen to\n\t\t// \"other\" loading anymore\n\t\tthis._sideLoadedListener.dispose();\n\n\t\tif (!this.editorModelReference) {\n\t\t\tconst scratchpad = this.capabilities & EditorInputCapabilities.Scratchpad ? true : false;\n\t\t\tconst ref = await this._notebookModelResolverService.resolve(this.resource, this.viewType, { limits: this.ensureLimits(_options), scratchpad, viewType: this.editorId });\n\t\t\tif (this.editorModelReference) {\n\t\t\t\t// Re-entrant, double resolve happened. Dispose the addition references and proceed\n\t\t\t\t// with the truth.\n\t\t\t\tref.dispose();\n\t\t\t\treturn (<IReference<IResolvedNotebookEditorModel>>this.editorModelReference).object;\n\t\t\t}\n\t\t\tthis.editorModelReference = ref;\n\t\t\tif (this.isDisposed()) {\n\t\t\t\tthis.editorModelReference.dispose();\n\t\t\t\tthis.editorModelReference = null;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tthis._register(this.editorModelReference.object.onDidChangeDirty(() => this._onDidChangeDirty.fire()));\n\t\t\tthis._register(this.editorModelReference.object.onDidChangeReadonly(() => this._onDidChangeCapabilities.fire()));\n\t\t\tthis._register(this.editorModelReference.object.onDidRevertUntitled(() => this.dispose()));\n\t\t\tif (this.editorModelReference.object.isDirty()) {\n\t\t\t\tthis._onDidChangeDirty.fire();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.editorModelReference.object.load({ limits: this.ensureLimits(_options) });\n\t\t}\n\n\t\tif (this.options._backupId) {\n\t\t\tconst info = await this._notebookService.withNotebookDataProvider(this.editorModelReference.object.notebook.viewType);\n\t\t\tif (!(info instanceof SimpleNotebookProviderInfo)) {\n\t\t\t\tthrow new Error('CANNOT open file notebook with this provider');\n\t\t\t}\n\n\t\t\tconst data = await info.serializer.dataToNotebook(VSBuffer.fromString(JSON.stringify({ __webview_backup: this.options._backupId })));\n\t\t\tthis.editorModelReference.object.notebook.applyEdits([\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tcount: this.editorModelReference.object.notebook.length,\n\t\t\t\t\tcells: data.cells\n\t\t\t\t}\n\t\t\t], true, undefined, () => undefined, undefined, false);\n\n\t\t\tif (this.options._workingCopy) {\n\t\t\t\tthis.options._backupId = undefined;\n\t\t\t\tthis.options._workingCopy = undefined;\n\t\t\t\tthis.options.startDirty = undefined;\n\t\t\t}\n\t\t}\n\n\t\treturn this.editorModelReference.object;\n\t}\n\n\toverride toUntyped(): IResourceEditorInput {\n\t\treturn {\n\t\t\tresource: this.resource,\n\t\t\toptions: {\n\t\t\t\toverride: this.viewType\n\t\t\t}\n\t\t};\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (super.matches(otherInput)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (otherInput instanceof NotebookEditorInput) {\n\t\t\treturn this.viewType === otherInput.viewType && isEqual(this.resource, otherInput.resource);\n\t\t}\n\t\tif (isResourceEditorInput(otherInput) && otherInput.resource.scheme === CellUri.scheme) {\n\t\t\treturn isEqual(this.resource, CellUri.parse(otherInput.resource)?.notebook);\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport interface ICompositeNotebookEditorInput {\n\treadonly editorInputs: NotebookEditorInput[];\n}\n\nexport function isCompositeNotebookEditorInput(thing: unknown): thing is ICompositeNotebookEditorInput {\n\treturn !!thing\n\t\t&& typeof thing === 'object'\n\t\t&& Array.isArray((<ICompositeNotebookEditorInput>thing).editorInputs)\n\t\t&& ((<ICompositeNotebookEditorInput>thing).editorInputs.every(input => input instanceof NotebookEditorInput));\n}\n\nexport function isNotebookEditorInput(thing: EditorInput | undefined): thing is NotebookEditorInput {\n\treturn !!thing\n\t\t&& typeof thing === 'object'\n\t\t&& thing.typeId === NotebookEditorInput.ID;\n}\n"]}