{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/notebook/common/notebookProvider.ts","vs/workbench/contrib/notebook/common/notebookProvider.ts"],"names":[],"mappings":"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","file":"notebookProvider.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as glob from '../../../../base/common/glob.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { basename } from '../../../../base/common/path.js';\nimport { INotebookExclusiveDocumentFilter, isDocumentExcludePattern, TransientOptions } from './notebookCommon.js';\nimport { RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\n\ntype NotebookSelector = string | glob.IRelativePattern | INotebookExclusiveDocumentFilter;\n\nexport interface NotebookEditorDescriptor {\n\treadonly extension?: ExtensionIdentifier;\n\treadonly id: string;\n\treadonly displayName: string;\n\treadonly selectors: readonly { filenamePattern?: string; excludeFileNamePattern?: string }[];\n\treadonly priority: RegisteredEditorPriority;\n\treadonly providerDisplayName: string;\n}\n\ninterface INotebookEditorDescriptorDto {\n\treadonly _selectors: readonly NotebookSelector[];\n}\n\nexport class NotebookProviderInfo {\n\n\treadonly extension?: ExtensionIdentifier;\n\treadonly id: string;\n\treadonly displayName: string;\n\treadonly priority: RegisteredEditorPriority;\n\treadonly providerDisplayName: string;\n\n\tpublic _selectors: NotebookSelector[];\n\tget selectors() {\n\t\treturn this._selectors;\n\t}\n\tprivate _options: TransientOptions;\n\tget options() {\n\t\treturn this._options;\n\t}\n\n\tconstructor(descriptor: NotebookEditorDescriptor) {\n\t\tthis.extension = descriptor.extension;\n\t\tthis.id = descriptor.id;\n\t\tthis.displayName = descriptor.displayName;\n\t\tthis._selectors = descriptor.selectors?.map(selector => ({\n\t\t\tinclude: selector.filenamePattern,\n\t\t\texclude: selector.excludeFileNamePattern || ''\n\t\t}))\n\t\t\t|| (descriptor as unknown as INotebookEditorDescriptorDto)._selectors\n\t\t\t|| [];\n\t\tthis.priority = descriptor.priority;\n\t\tthis.providerDisplayName = descriptor.providerDisplayName;\n\t\tthis._options = {\n\t\t\ttransientCellMetadata: {},\n\t\t\ttransientDocumentMetadata: {},\n\t\t\ttransientOutputs: false,\n\t\t\tcellContentMetadata: {}\n\t\t};\n\t}\n\n\tupdate(args: { selectors?: NotebookSelector[]; options?: TransientOptions }) {\n\t\tif (args.selectors) {\n\t\t\tthis._selectors = args.selectors;\n\t\t}\n\n\t\tif (args.options) {\n\t\t\tthis._options = args.options;\n\t\t}\n\t}\n\n\tmatches(resource: URI): boolean {\n\t\treturn this.selectors?.some(selector => NotebookProviderInfo.selectorMatches(selector, resource));\n\t}\n\n\tstatic selectorMatches(selector: NotebookSelector, resource: URI): boolean {\n\t\tif (typeof selector === 'string' || glob.isRelativePattern(selector)) {\n\t\t\tif (glob.match(selector, basename(resource.fsPath), { ignoreCase: true })) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (!isDocumentExcludePattern(selector)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst filenamePattern = selector.include;\n\t\tconst excludeFilenamePattern = selector.exclude;\n\n\t\tif (glob.match(filenamePattern, basename(resource.fsPath), { ignoreCase: true })) {\n\t\t\tif (excludeFilenamePattern) {\n\t\t\t\tif (glob.match(excludeFilenamePattern, basename(resource.fsPath), { ignoreCase: true })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic possibleFileEnding(selectors: NotebookSelector[]): string | undefined {\n\t\tfor (const selector of selectors) {\n\t\t\tconst ending = NotebookProviderInfo._possibleFileEnding(selector);\n\t\t\tif (ending) {\n\t\t\t\treturn ending;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate static _possibleFileEnding(selector: NotebookSelector): string | undefined {\n\n\t\tconst pattern = /^.*(\\.[a-zA-Z0-9_-]+)$/;\n\n\t\tlet candidate: string | undefined;\n\n\t\tif (typeof selector === 'string') {\n\t\t\tcandidate = selector;\n\t\t} else if (glob.isRelativePattern(selector)) {\n\t\t\tcandidate = selector.pattern;\n\t\t} else if (selector.include) {\n\t\t\treturn NotebookProviderInfo._possibleFileEnding(selector.include);\n\t\t}\n\n\t\tif (candidate) {\n\t\t\tconst match = pattern.exec(candidate);\n\t\t\tif (match) {\n\t\t\t\treturn match[1];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as glob from '../../../../base/common/glob.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { basename } from '../../../../base/common/path.js';\nimport { INotebookExclusiveDocumentFilter, isDocumentExcludePattern, TransientOptions } from './notebookCommon.js';\nimport { RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\n\ntype NotebookSelector = string | glob.IRelativePattern | INotebookExclusiveDocumentFilter;\n\nexport interface NotebookEditorDescriptor {\n\treadonly extension?: ExtensionIdentifier;\n\treadonly id: string;\n\treadonly displayName: string;\n\treadonly selectors: readonly { filenamePattern?: string; excludeFileNamePattern?: string }[];\n\treadonly priority: RegisteredEditorPriority;\n\treadonly providerDisplayName: string;\n}\n\ninterface INotebookEditorDescriptorDto {\n\treadonly _selectors: readonly NotebookSelector[];\n}\n\nexport class NotebookProviderInfo {\n\n\treadonly extension?: ExtensionIdentifier;\n\treadonly id: string;\n\treadonly displayName: string;\n\treadonly priority: RegisteredEditorPriority;\n\treadonly providerDisplayName: string;\n\n\tpublic _selectors: NotebookSelector[];\n\tget selectors() {\n\t\treturn this._selectors;\n\t}\n\tprivate _options: TransientOptions;\n\tget options() {\n\t\treturn this._options;\n\t}\n\n\tconstructor(descriptor: NotebookEditorDescriptor) {\n\t\tthis.extension = descriptor.extension;\n\t\tthis.id = descriptor.id;\n\t\tthis.displayName = descriptor.displayName;\n\t\tthis._selectors = descriptor.selectors?.map(selector => ({\n\t\t\tinclude: selector.filenamePattern,\n\t\t\texclude: selector.excludeFileNamePattern || ''\n\t\t}))\n\t\t\t|| (descriptor as unknown as INotebookEditorDescriptorDto)._selectors\n\t\t\t|| [];\n\t\tthis.priority = descriptor.priority;\n\t\tthis.providerDisplayName = descriptor.providerDisplayName;\n\t\tthis._options = {\n\t\t\ttransientCellMetadata: {},\n\t\t\ttransientDocumentMetadata: {},\n\t\t\ttransientOutputs: false,\n\t\t\tcellContentMetadata: {}\n\t\t};\n\t}\n\n\tupdate(args: { selectors?: NotebookSelector[]; options?: TransientOptions }) {\n\t\tif (args.selectors) {\n\t\t\tthis._selectors = args.selectors;\n\t\t}\n\n\t\tif (args.options) {\n\t\t\tthis._options = args.options;\n\t\t}\n\t}\n\n\tmatches(resource: URI): boolean {\n\t\treturn this.selectors?.some(selector => NotebookProviderInfo.selectorMatches(selector, resource));\n\t}\n\n\tstatic selectorMatches(selector: NotebookSelector, resource: URI): boolean {\n\t\tif (typeof selector === 'string' || glob.isRelativePattern(selector)) {\n\t\t\tif (glob.match(selector, basename(resource.fsPath), { ignoreCase: true })) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (!isDocumentExcludePattern(selector)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst filenamePattern = selector.include;\n\t\tconst excludeFilenamePattern = selector.exclude;\n\n\t\tif (glob.match(filenamePattern, basename(resource.fsPath), { ignoreCase: true })) {\n\t\t\tif (excludeFilenamePattern) {\n\t\t\t\tif (glob.match(excludeFilenamePattern, basename(resource.fsPath), { ignoreCase: true })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic possibleFileEnding(selectors: NotebookSelector[]): string | undefined {\n\t\tfor (const selector of selectors) {\n\t\t\tconst ending = NotebookProviderInfo._possibleFileEnding(selector);\n\t\t\tif (ending) {\n\t\t\t\treturn ending;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate static _possibleFileEnding(selector: NotebookSelector): string | undefined {\n\n\t\tconst pattern = /^.*(\\.[a-zA-Z0-9_-]+)$/;\n\n\t\tlet candidate: string | undefined;\n\n\t\tif (typeof selector === 'string') {\n\t\t\tcandidate = selector;\n\t\t} else if (glob.isRelativePattern(selector)) {\n\t\t\tcandidate = selector.pattern;\n\t\t} else if (selector.include) {\n\t\t\treturn NotebookProviderInfo._possibleFileEnding(selector.include);\n\t\t}\n\n\t\tif (candidate) {\n\t\t\tconst match = pattern.exec(candidate);\n\t\t\tif (match) {\n\t\t\t\treturn match[1];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n"]}