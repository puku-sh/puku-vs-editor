{"version":3,"sources":["vs/workbench/contrib/dropOrPasteInto/browser/configurationSchema.ts"],"names":[],"mappings":"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","file":"configurationSchema.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { IJSONSchema } from '../../../../base/common/jsonSchema.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { editorConfigurationBaseNode } from '../../../../editor/common/config/editorConfigurationSchema.js';\nimport { ILanguageFeaturesService } from '../../../../editor/common/services/languageFeatures.js';\nimport { pasteAsCommandId } from '../../../../editor/contrib/dropOrPasteInto/browser/copyPasteContribution.js';\nimport { pasteAsPreferenceConfig } from '../../../../editor/contrib/dropOrPasteInto/browser/copyPasteController.js';\nimport { dropAsPreferenceConfig } from '../../../../editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js';\nimport * as nls from '../../../../nls.js';\nimport { ConfigurationScope, Extensions, IConfigurationNode, IConfigurationPropertySchema, IConfigurationRegistry } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\n\nconst dropEnumValues: string[] = [];\n\nconst dropAsPreferenceSchema: IConfigurationPropertySchema = {\n\ttype: 'array',\n\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE,\n\tdescription: nls.localize('dropPreferredDescription', \"Configures the preferred type of edit to use when dropping content.\\n\\nThis is an ordered list of edit kinds. The first available edit of a preferred kind will be used.\"),\n\tdefault: [],\n\titems: {\n\t\tdescription: nls.localize('dropKind', \"The kind identifier of the drop edit.\"),\n\t\tanyOf: [\n\t\t\t{ type: 'string' },\n\t\t\t{ enum: dropEnumValues }\n\t\t],\n\t}\n};\n\nconst pasteEnumValues: string[] = [];\n\nconst pasteAsPreferenceSchema: IConfigurationPropertySchema = {\n\ttype: 'array',\n\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE,\n\tdescription: nls.localize('pastePreferredDescription', \"Configures the preferred type of edit to use when pasting content.\\n\\nThis is an ordered list of edit kinds. The first available edit of a preferred kind will be used.\"),\n\tdefault: [],\n\titems: {\n\t\tdescription: nls.localize('pasteKind', \"The kind identifier of the paste edit.\"),\n\t\tanyOf: [\n\t\t\t{ type: 'string' },\n\t\t\t{ enum: pasteEnumValues }\n\t\t]\n\t}\n};\n\nexport const editorConfiguration = Object.freeze<IConfigurationNode>({\n\t...editorConfigurationBaseNode,\n\tproperties: {\n\t\t[pasteAsPreferenceConfig]: pasteAsPreferenceSchema,\n\t\t[dropAsPreferenceConfig]: dropAsPreferenceSchema,\n\t}\n});\n\nexport class DropOrPasteSchemaContribution extends Disposable implements IWorkbenchContribution {\n\n\tpublic static ID = 'workbench.contrib.dropOrPasteIntoSchema';\n\n\tprivate readonly _onDidChangeSchemaContributions = this._register(new Emitter<void>());\n\n\tprivate _allProvidedDropKinds: HierarchicalKind[] = [];\n\tprivate _allProvidedPasteKinds: HierarchicalKind[] = [];\n\n\tconstructor(\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@ILanguageFeaturesService private readonly languageFeatures: ILanguageFeaturesService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(\n\t\t\tEvent.runAndSubscribe(\n\t\t\t\tEvent.debounce(\n\t\t\t\t\tEvent.any(languageFeatures.documentPasteEditProvider.onDidChange, languageFeatures.documentPasteEditProvider.onDidChange),\n\t\t\t\t\t() => { },\n\t\t\t\t\t1000,\n\t\t\t\t), () => {\n\t\t\t\t\tthis.updateProvidedKinds();\n\t\t\t\t\tthis.updateConfigurationSchema();\n\n\t\t\t\t\tthis._onDidChangeSchemaContributions.fire();\n\t\t\t\t}));\n\n\t\tthis._register(keybindingService.registerSchemaContribution({\n\t\t\tgetSchemaAdditions: () => this.getKeybindingSchemaAdditions(),\n\t\t\tonDidChange: this._onDidChangeSchemaContributions.event,\n\t\t}));\n\t}\n\n\tprivate updateProvidedKinds(): void {\n\t\t// Drop\n\t\tconst dropKinds = new Map<string, HierarchicalKind>();\n\t\tfor (const provider of this.languageFeatures.documentDropEditProvider.allNoModel()) {\n\t\t\tfor (const kind of provider.providedDropEditKinds ?? []) {\n\t\t\t\tdropKinds.set(kind.value, kind);\n\t\t\t}\n\t\t}\n\t\tthis._allProvidedDropKinds = Array.from(dropKinds.values());\n\n\t\t// Paste\n\t\tconst pasteKinds = new Map<string, HierarchicalKind>();\n\t\tfor (const provider of this.languageFeatures.documentPasteEditProvider.allNoModel()) {\n\t\t\tfor (const kind of provider.providedPasteEditKinds ?? []) {\n\t\t\t\tpasteKinds.set(kind.value, kind);\n\t\t\t}\n\t\t}\n\t\tthis._allProvidedPasteKinds = Array.from(pasteKinds.values());\n\t}\n\n\tprivate updateConfigurationSchema(): void {\n\t\tpasteEnumValues.length = 0;\n\t\tfor (const codeActionKind of this._allProvidedPasteKinds) {\n\t\t\tpasteEnumValues.push(codeActionKind.value);\n\t\t}\n\n\t\tdropEnumValues.length = 0;\n\t\tfor (const codeActionKind of this._allProvidedDropKinds) {\n\t\t\tdropEnumValues.push(codeActionKind.value);\n\t\t}\n\n\t\tRegistry.as<IConfigurationRegistry>(Extensions.Configuration)\n\t\t\t.notifyConfigurationSchemaUpdated(editorConfiguration);\n\t}\n\n\tprivate getKeybindingSchemaAdditions(): IJSONSchema[] {\n\t\treturn [\n\t\t\t{\n\t\t\t\tif: {\n\t\t\t\t\trequired: ['command'],\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'command': { const: pasteAsCommandId }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthen: {\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t'args': {\n\t\t\t\t\t\t\toneOf: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: ['kind'],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t'kind': {\n\t\t\t\t\t\t\t\t\t\t\tanyOf: [\n\t\t\t\t\t\t\t\t\t\t\t\t{ enum: Array.from(this._allProvidedPasteKinds.map(x => x.value)) },\n\t\t\t\t\t\t\t\t\t\t\t\t{ type: 'string' },\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: ['preferences'],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t'preferences': {\n\t\t\t\t\t\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\t\t\t\tanyOf: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ enum: Array.from(this._allProvidedPasteKinds.map(x => x.value)) },\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ type: 'string' },\n\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t];\n\t}\n}\n"]}