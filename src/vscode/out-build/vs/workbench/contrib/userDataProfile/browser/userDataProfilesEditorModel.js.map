{"version":3,"sources":["vs/workbench/contrib/userDataProfile/browser/userDataProfilesEditorModel.ts"],"names":[],"mappings":"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","file":"userDataProfilesEditorModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Action, IAction, Separator, toAction } from '../../../../base/common/actions.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { localize } from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { DidChangeProfilesEvent, isUserDataProfile, IUserDataProfile, IUserDataProfilesService, ProfileResourceType, ProfileResourceTypeFlags, toUserDataProfile, UseDefaultProfileFlags } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IProfileResourceChildTreeItem, IProfileTemplateInfo, isProfileURL, IUserDataProfileImportExportService, IUserDataProfileManagementService, IUserDataProfileService, IUserDataProfileTemplate } from '../../../services/userDataProfile/common/userDataProfile.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { EditorModel } from '../../../common/editor/editorModel.js';\nimport { ExtensionsResourceExportTreeItem, ExtensionsResourceImportTreeItem } from '../../../services/userDataProfile/browser/extensionsResource.js';\nimport { SettingsResource, SettingsResourceTreeItem } from '../../../services/userDataProfile/browser/settingsResource.js';\nimport { KeybindingsResource, KeybindingsResourceTreeItem } from '../../../services/userDataProfile/browser/keybindingsResource.js';\nimport { TasksResource, TasksResourceTreeItem } from '../../../services/userDataProfile/browser/tasksResource.js';\nimport { SnippetsResource, SnippetsResourceTreeItem } from '../../../services/userDataProfile/browser/snippetsResource.js';\nimport { McpProfileResource, McpResourceTreeItem } from '../../../services/userDataProfile/browser/mcpProfileResource.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { InMemoryFileSystemProvider } from '../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { CancelablePromise, createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ITreeItemCheckboxState } from '../../../common/views.js';\nimport { API_OPEN_EDITOR_COMMAND_ID } from '../../../browser/parts/editor/editorCommands.js';\nimport { SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { CONFIG_NEW_WINDOW_PROFILE } from '../../../common/configuration.js';\nimport { ResourceMap, ResourceSet } from '../../../../base/common/map.js';\nimport { getErrorMessage } from '../../../../base/common/errors.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IWorkspaceContextService, WORKSPACE_SUFFIX } from '../../../../platform/workspace/common/workspace.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { isString } from '../../../../base/common/types.js';\nimport { IWorkbenchExtensionManagementService } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { areSameExtensions } from '../../../../platform/extensionManagement/common/extensionManagementUtil.js';\n\nexport type ChangeEvent = {\n\treadonly name?: boolean;\n\treadonly icon?: boolean;\n\treadonly flags?: boolean;\n\treadonly workspaces?: boolean;\n\treadonly active?: boolean;\n\treadonly message?: boolean;\n\treadonly copyFrom?: boolean;\n\treadonly copyFromInfo?: boolean;\n\treadonly copyFlags?: boolean;\n\treadonly preview?: boolean;\n\treadonly profile?: boolean;\n\treadonly extensions?: boolean;\n\treadonly snippets?: boolean;\n\treadonly disabled?: boolean;\n\treadonly newWindowProfile?: boolean;\n};\n\nexport interface IProfileChildElement {\n\treadonly handle: string;\n\treadonly openAction?: IAction;\n\treadonly actions?: {\n\t\treadonly primary?: IAction[];\n\t\treadonly contextMenu?: IAction[];\n\t};\n\treadonly checkbox?: ITreeItemCheckboxState;\n}\n\nexport interface IProfileResourceTypeElement extends IProfileChildElement {\n\treadonly resourceType: ProfileResourceType;\n}\n\nexport interface IProfileResourceTypeChildElement extends IProfileChildElement {\n\treadonly label: string;\n\treadonly description?: string;\n\treadonly resource?: URI;\n\treadonly icon?: ThemeIcon;\n}\n\nexport function isProfileResourceTypeElement(element: IProfileChildElement): element is IProfileResourceTypeElement {\n\treturn (element as IProfileResourceTypeElement).resourceType !== undefined;\n}\n\nexport function isProfileResourceChildElement(element: IProfileChildElement): element is IProfileResourceTypeChildElement {\n\treturn (element as IProfileResourceTypeChildElement).label !== undefined;\n}\n\nexport abstract class AbstractUserDataProfileElement extends Disposable {\n\n\tprotected readonly _onDidChange = this._register(new Emitter<ChangeEvent>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate readonly saveScheduler = this._register(new RunOnceScheduler(() => this.doSave(), 500));\n\n\tconstructor(\n\t\tname: string,\n\t\ticon: string | undefined,\n\t\tflags: UseDefaultProfileFlags | undefined,\n\t\tworkspaces: readonly URI[] | undefined,\n\t\tisActive: boolean,\n\t\t@IUserDataProfileManagementService protected readonly userDataProfileManagementService: IUserDataProfileManagementService,\n\t\t@IUserDataProfilesService protected readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@ICommandService protected readonly commandService: ICommandService,\n\t\t@IWorkspaceContextService protected readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IHostService protected readonly hostService: IHostService,\n\t\t@IUriIdentityService protected readonly uriIdentityService: IUriIdentityService,\n\t\t@IFileService protected readonly fileService: IFileService,\n\t\t@IWorkbenchExtensionManagementService protected readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tthis._name = name;\n\t\tthis._icon = icon;\n\t\tthis._flags = flags;\n\t\tthis._workspaces = workspaces;\n\t\tthis._active = isActive;\n\t\tthis._register(this.onDidChange(e => {\n\t\t\tif (!e.message) {\n\t\t\t\tthis.validate();\n\t\t\t}\n\t\t\tthis.save();\n\t\t}));\n\t\tthis._register(this.extensionManagementService.onProfileAwareDidInstallExtensions(results => {\n\t\t\tconst profile = this.getProfileToWatch();\n\t\t\tif (profile && results.some(r => !r.error && (r.applicationScoped || this.uriIdentityService.extUri.isEqual(r.profileLocation, profile.extensionsResource)))) {\n\t\t\t\tthis._onDidChange.fire({ extensions: true });\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.extensionManagementService.onProfileAwareDidUninstallExtension(e => {\n\t\t\tconst profile = this.getProfileToWatch();\n\t\t\tif (profile && !e.error && (e.applicationScoped || this.uriIdentityService.extUri.isEqual(e.profileLocation, profile.extensionsResource))) {\n\t\t\t\tthis._onDidChange.fire({ extensions: true });\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.extensionManagementService.onProfileAwareDidUpdateExtensionMetadata(e => {\n\t\t\tconst profile = this.getProfileToWatch();\n\t\t\tif (profile && e.local.isApplicationScoped || this.uriIdentityService.extUri.isEqual(e.profileLocation, profile?.extensionsResource)) {\n\t\t\t\tthis._onDidChange.fire({ extensions: true });\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _name = '';\n\tget name(): string { return this._name; }\n\tset name(name: string) {\n\t\tname = name.trim();\n\t\tif (this._name !== name) {\n\t\t\tthis._name = name;\n\t\t\tthis._onDidChange.fire({ name: true });\n\t\t}\n\t}\n\n\tprivate _icon: string | undefined;\n\tget icon(): string | undefined { return this._icon; }\n\tset icon(icon: string | undefined) {\n\t\tif (this._icon !== icon) {\n\t\t\tthis._icon = icon;\n\t\t\tthis._onDidChange.fire({ icon: true });\n\t\t}\n\t}\n\n\tprivate _workspaces: readonly URI[] | undefined;\n\tget workspaces(): readonly URI[] | undefined { return this._workspaces; }\n\tset workspaces(workspaces: readonly URI[] | undefined) {\n\t\tif (!arrays.equals(this._workspaces, workspaces, (a, b) => a.toString() === b.toString())) {\n\t\t\tthis._workspaces = workspaces;\n\t\t\tthis._onDidChange.fire({ workspaces: true });\n\t\t}\n\t}\n\n\tprivate _flags: UseDefaultProfileFlags | undefined;\n\tget flags(): UseDefaultProfileFlags | undefined { return this._flags; }\n\tset flags(flags: UseDefaultProfileFlags | undefined) {\n\t\tif (!equals(this._flags, flags)) {\n\t\t\tthis._flags = flags;\n\t\t\tthis._onDidChange.fire({ flags: true });\n\t\t}\n\t}\n\n\tprivate _active: boolean = false;\n\tget active(): boolean { return this._active; }\n\tset active(active: boolean) {\n\t\tif (this._active !== active) {\n\t\t\tthis._active = active;\n\t\t\tthis._onDidChange.fire({ active: true });\n\t\t}\n\t}\n\n\tprivate _message: string | undefined;\n\tget message(): string | undefined { return this._message; }\n\tset message(message: string | undefined) {\n\t\tif (this._message !== message) {\n\t\t\tthis._message = message;\n\t\t\tthis._onDidChange.fire({ message: true });\n\t\t}\n\t}\n\n\tprivate _disabled: boolean = false;\n\tget disabled(): boolean { return this._disabled; }\n\tset disabled(saving: boolean) {\n\t\tif (this._disabled !== saving) {\n\t\t\tthis._disabled = saving;\n\t\t\tthis._onDidChange.fire({ disabled: true });\n\t\t}\n\t}\n\n\tgetFlag(key: ProfileResourceType): boolean {\n\t\treturn this.flags?.[key] ?? false;\n\t}\n\n\tsetFlag(key: ProfileResourceType, value: boolean): void {\n\t\tconst flags = this.flags ? { ...this.flags } : {};\n\t\tif (value) {\n\t\t\tflags[key] = true;\n\t\t} else {\n\t\t\tdelete flags[key];\n\t\t}\n\t\tthis.flags = flags;\n\t}\n\n\tvalidate(): void {\n\t\tif (!this.name) {\n\t\t\tthis.message = localize('name required', \"Profile name is required and must be a non-empty value.\");\n\t\t\treturn;\n\t\t}\n\t\tif (this.shouldValidateName() && this.name !== this.getInitialName() && this.userDataProfilesService.profiles.some(p => p.name === this.name)) {\n\t\t\tthis.message = localize('profileExists', \"Profile with name {0} already exists.\", this.name);\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.flags && this.flags.settings && this.flags.keybindings && this.flags.tasks && this.flags.snippets && this.flags.extensions\n\t\t) {\n\t\t\tthis.message = localize('invalid configurations', \"The profile should contain at least one configuration.\");\n\t\t\treturn;\n\t\t}\n\t\tthis.message = undefined;\n\t}\n\n\tasync getChildren(resourceType?: ProfileResourceType): Promise<IProfileChildElement[]> {\n\t\tif (resourceType === undefined) {\n\t\t\tconst resourceTypes = [\n\t\t\t\tProfileResourceType.Settings,\n\t\t\t\tProfileResourceType.Keybindings,\n\t\t\t\tProfileResourceType.Tasks,\n\t\t\t\tProfileResourceType.Mcp,\n\t\t\t\tProfileResourceType.Snippets,\n\t\t\t\tProfileResourceType.Extensions\n\t\t\t];\n\t\t\treturn Promise.all(resourceTypes.map<Promise<IProfileResourceTypeElement>>(async r => {\n\t\t\t\tconst children = (r === ProfileResourceType.Settings\n\t\t\t\t\t|| r === ProfileResourceType.Keybindings\n\t\t\t\t\t|| r === ProfileResourceType.Tasks\n\t\t\t\t\t|| r === ProfileResourceType.Mcp) ? await this.getChildrenForResourceType(r) : [];\n\t\t\t\treturn {\n\t\t\t\t\thandle: r,\n\t\t\t\t\tcheckbox: undefined,\n\t\t\t\t\tresourceType: r,\n\t\t\t\t\topenAction: children.length\n\t\t\t\t\t\t? toAction({\n\t\t\t\t\t\t\tid: '_open',\n\t\t\t\t\t\t\tlabel: localize('open', \"Open to the Side\"),\n\t\t\t\t\t\t\tclass: ThemeIcon.asClassName(Codicon.goToFile),\n\t\t\t\t\t\t\trun: () => children[0]?.openAction?.run()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t: undefined\n\t\t\t\t};\n\t\t\t}));\n\t\t}\n\t\treturn this.getChildrenForResourceType(resourceType);\n\t}\n\n\tprotected async getChildrenForResourceType(resourceType: ProfileResourceType): Promise<IProfileChildElement[]> {\n\t\treturn [];\n\t}\n\n\tprotected async getChildrenFromProfile(profile: IUserDataProfile, resourceType: ProfileResourceType): Promise<IProfileResourceTypeChildElement[]> {\n\t\tprofile = this.getFlag(resourceType) ? this.userDataProfilesService.defaultProfile : profile;\n\t\tlet children: IProfileResourceChildTreeItem[] = [];\n\t\tswitch (resourceType) {\n\t\t\tcase ProfileResourceType.Settings:\n\t\t\t\tchildren = await this.instantiationService.createInstance(SettingsResourceTreeItem, profile).getChildren();\n\t\t\t\tbreak;\n\t\t\tcase ProfileResourceType.Keybindings:\n\t\t\t\tchildren = await this.instantiationService.createInstance(KeybindingsResourceTreeItem, profile).getChildren();\n\t\t\t\tbreak;\n\t\t\tcase ProfileResourceType.Snippets:\n\t\t\t\tchildren = (await this.instantiationService.createInstance(SnippetsResourceTreeItem, profile).getChildren()) ?? [];\n\t\t\t\tbreak;\n\t\t\tcase ProfileResourceType.Tasks:\n\t\t\t\tchildren = await this.instantiationService.createInstance(TasksResourceTreeItem, profile).getChildren();\n\t\t\t\tbreak;\n\t\t\tcase ProfileResourceType.Mcp:\n\t\t\t\tchildren = await this.instantiationService.createInstance(McpResourceTreeItem, profile).getChildren();\n\t\t\t\tbreak;\n\t\t\tcase ProfileResourceType.Extensions:\n\t\t\t\tchildren = await this.instantiationService.createInstance(ExtensionsResourceExportTreeItem, profile).getChildren();\n\t\t\t\tbreak;\n\t\t}\n\t\treturn children.map<IProfileResourceTypeChildElement>(child => this.toUserDataProfileResourceChildElement(child));\n\t}\n\n\tprotected toUserDataProfileResourceChildElement(child: IProfileResourceChildTreeItem, primaryActions?: IAction[], contextMenuActions?: IAction[]): IProfileResourceTypeChildElement {\n\t\treturn {\n\t\t\thandle: child.handle,\n\t\t\tcheckbox: child.checkbox,\n\t\t\tlabel: child.label ? (isMarkdownString(child.label.label) ? child.label.label.value : child.label.label) : '',\n\t\t\tdescription: isString(child.description) ? child.description : undefined,\n\t\t\tresource: URI.revive(child.resourceUri),\n\t\t\ticon: child.themeIcon,\n\t\t\topenAction: toAction({\n\t\t\t\tid: '_openChild',\n\t\t\t\tlabel: localize('open', \"Open to the Side\"),\n\t\t\t\tclass: ThemeIcon.asClassName(Codicon.goToFile),\n\t\t\t\trun: async () => {\n\t\t\t\t\tif (child.parent.type === ProfileResourceType.Extensions) {\n\t\t\t\t\t\tawait this.commandService.executeCommand('extension.open', child.handle, undefined, true, undefined, true);\n\t\t\t\t\t} else if (child.resourceUri) {\n\t\t\t\t\t\tawait this.commandService.executeCommand(API_OPEN_EDITOR_COMMAND_ID, child.resourceUri, [SIDE_GROUP], undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tactions: {\n\t\t\t\tprimary: primaryActions,\n\t\t\t\tcontextMenu: contextMenuActions,\n\t\t\t}\n\t\t};\n\n\t}\n\n\tgetInitialName(): string {\n\t\treturn '';\n\t}\n\n\tshouldValidateName(): boolean {\n\t\treturn true;\n\t}\n\n\tgetCurrentWorkspace(): URI | undefined {\n\t\tconst workspace = this.workspaceContextService.getWorkspace();\n\t\treturn workspace.configuration ?? workspace.folders[0]?.uri;\n\t}\n\n\topenWorkspace(workspace: URI): void {\n\t\tif (this.uriIdentityService.extUri.extname(workspace) === WORKSPACE_SUFFIX) {\n\t\t\tthis.hostService.openWindow([{ workspaceUri: workspace }], { forceNewWindow: true });\n\t\t} else {\n\t\t\tthis.hostService.openWindow([{ folderUri: workspace }], { forceNewWindow: true });\n\t\t}\n\t}\n\n\tsave(): void {\n\t\tthis.saveScheduler.schedule();\n\t}\n\n\tprivate hasUnsavedChanges(profile: IUserDataProfile): boolean {\n\t\tif (this.name !== profile.name) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.icon !== profile.icon) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!equals(this.flags ?? {}, profile.useDefaultFlags ?? {})) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!arrays.equals(this.workspaces ?? [], profile.workspaces ?? [], (a, b) => a.toString() === b.toString())) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected async saveProfile(profile: IUserDataProfile): Promise<IUserDataProfile | undefined> {\n\t\tif (!this.hasUnsavedChanges(profile)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.validate();\n\t\tif (this.message) {\n\t\t\treturn;\n\t\t}\n\t\tconst useDefaultFlags: UseDefaultProfileFlags | undefined = this.flags\n\t\t\t? this.flags.settings && this.flags.keybindings && this.flags.tasks && this.flags.globalState && this.flags.extensions ? undefined : this.flags\n\t\t\t: undefined;\n\n\t\treturn await this.userDataProfileManagementService.updateProfile(profile, {\n\t\t\tname: this.name,\n\t\t\ticon: this.icon,\n\t\t\tuseDefaultFlags: profile.useDefaultFlags && !useDefaultFlags ? {} : useDefaultFlags,\n\t\t\tworkspaces: this.workspaces\n\t\t});\n\t}\n\n\tabstract readonly titleButtons: [Action[], Action[]];\n\tabstract readonly actions: [IAction[], IAction[]];\n\n\tprotected abstract doSave(): Promise<void>;\n\tprotected abstract getProfileToWatch(): IUserDataProfile | undefined;\n}\n\nexport class UserDataProfileElement extends AbstractUserDataProfileElement {\n\n\tget profile(): IUserDataProfile { return this._profile; }\n\n\tconstructor(\n\t\tprivate _profile: IUserDataProfile,\n\t\treadonly titleButtons: [Action[], Action[]],\n\t\treadonly actions: [IAction[], IAction[]],\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IUserDataProfileManagementService userDataProfileManagementService: IUserDataProfileManagementService,\n\t\t@IUserDataProfilesService userDataProfilesService: IUserDataProfilesService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IWorkspaceContextService workspaceContextService: IWorkspaceContextService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\n\t\t\t_profile.name,\n\t\t\t_profile.icon,\n\t\t\t_profile.useDefaultFlags,\n\t\t\t_profile.workspaces,\n\t\t\tuserDataProfileService.currentProfile.id === _profile.id,\n\t\t\tuserDataProfileManagementService,\n\t\t\tuserDataProfilesService,\n\t\t\tcommandService,\n\t\t\tworkspaceContextService,\n\t\t\thostService,\n\t\t\turiIdentityService,\n\t\t\tfileService,\n\t\t\textensionManagementService,\n\t\t\tinstantiationService,\n\t\t);\n\t\tthis._isNewWindowProfile = this.configurationService.getValue(CONFIG_NEW_WINDOW_PROFILE) === this.profile.name;\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(CONFIG_NEW_WINDOW_PROFILE)) {\n\t\t\t\tthis.isNewWindowProfile = this.configurationService.getValue(CONFIG_NEW_WINDOW_PROFILE) === this.profile.name;\n\t\t\t}\n\t\t}\n\t\t));\n\t\tthis._register(this.userDataProfileService.onDidChangeCurrentProfile(() => this.active = this.userDataProfileService.currentProfile.id === this.profile.id));\n\t\tthis._register(this.userDataProfilesService.onDidChangeProfiles(({ updated }) => {\n\t\t\tconst profile = updated.find(p => p.id === this.profile.id);\n\t\t\tif (profile) {\n\t\t\t\tthis._profile = profile;\n\t\t\t\tthis.reset();\n\t\t\t\tthis._onDidChange.fire({ profile: true });\n\t\t\t}\n\t\t}));\n\t\tthis._register(fileService.watch(this.profile.snippetsHome));\n\t\tthis._register(fileService.onDidFilesChange(e => {\n\t\t\tif (e.affects(this.profile.snippetsHome)) {\n\t\t\t\tthis._onDidChange.fire({ snippets: true });\n\t\t\t}\n\t\t}));\n\t}\n\n\tprotected getProfileToWatch(): IUserDataProfile | undefined {\n\t\treturn this.profile;\n\t}\n\n\treset(): void {\n\t\tthis.name = this._profile.name;\n\t\tthis.icon = this._profile.icon;\n\t\tthis.flags = this._profile.useDefaultFlags;\n\t\tthis.workspaces = this._profile.workspaces;\n\t}\n\n\tpublic updateWorkspaces(toAdd: URI[], toRemove: URI[]): void {\n\t\tconst workspaces = new ResourceSet(this.workspaces ?? []);\n\t\tfor (const workspace of toAdd) {\n\t\t\tworkspaces.add(workspace);\n\t\t}\n\t\tfor (const workspace of toRemove) {\n\t\t\tworkspaces.delete(workspace);\n\t\t}\n\t\tthis.workspaces = [...workspaces.values()];\n\t}\n\n\tpublic async toggleNewWindowProfile(): Promise<void> {\n\t\tif (this._isNewWindowProfile) {\n\t\t\tawait this.configurationService.updateValue(CONFIG_NEW_WINDOW_PROFILE, null);\n\t\t} else {\n\t\t\tawait this.configurationService.updateValue(CONFIG_NEW_WINDOW_PROFILE, this.profile.name);\n\t\t}\n\t}\n\n\tprivate _isNewWindowProfile: boolean = false;\n\tget isNewWindowProfile(): boolean { return this._isNewWindowProfile; }\n\tset isNewWindowProfile(isNewWindowProfile: boolean) {\n\t\tif (this._isNewWindowProfile !== isNewWindowProfile) {\n\t\t\tthis._isNewWindowProfile = isNewWindowProfile;\n\t\t\tthis._onDidChange.fire({ newWindowProfile: true });\n\t\t}\n\t}\n\n\tpublic async toggleCurrentWindowProfile(): Promise<void> {\n\t\tif (this.userDataProfileService.currentProfile.id === this.profile.id) {\n\t\t\tawait this.userDataProfileManagementService.switchProfile(this.userDataProfilesService.defaultProfile);\n\t\t} else {\n\t\t\tawait this.userDataProfileManagementService.switchProfile(this.profile);\n\t\t}\n\t}\n\n\tprotected override async doSave(): Promise<void> {\n\t\tawait this.saveProfile(this.profile);\n\t}\n\n\tprotected override async getChildrenForResourceType(resourceType: ProfileResourceType): Promise<IProfileChildElement[]> {\n\t\tif (resourceType === ProfileResourceType.Extensions) {\n\t\t\tconst children = await this.instantiationService.createInstance(ExtensionsResourceExportTreeItem, this.profile).getChildren();\n\t\t\treturn children.map<IProfileResourceTypeChildElement>(child =>\n\t\t\t\tthis.toUserDataProfileResourceChildElement(\n\t\t\t\t\tchild,\n\t\t\t\t\tundefined,\n\t\t\t\t\t[{\n\t\t\t\t\t\tid: 'applyToAllProfiles',\n\t\t\t\t\t\tlabel: localize('applyToAllProfiles', \"Apply Extension to all Profiles\"),\n\t\t\t\t\t\tchecked: child.applicationScoped,\n\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\tclass: '',\n\t\t\t\t\t\ttooltip: '',\n\t\t\t\t\t\trun: async () => {\n\t\t\t\t\t\t\tconst extensions = await this.extensionManagementService.getInstalled(undefined, this.profile.extensionsResource);\n\t\t\t\t\t\t\tconst extension = extensions.find(e => areSameExtensions(e.identifier, child.identifier));\n\t\t\t\t\t\t\tif (extension) {\n\t\t\t\t\t\t\t\tawait this.extensionManagementService.toggleApplicationScope(extension, this.profile.extensionsResource);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t));\n\t\t}\n\t\treturn this.getChildrenFromProfile(this.profile, resourceType);\n\t}\n\n\toverride getInitialName(): string {\n\t\treturn this.profile.name;\n\t}\n\n}\n\nconst USER_DATA_PROFILE_TEMPLATE_PREVIEW_SCHEME = 'userdataprofiletemplatepreview';\n\nexport class NewProfileElement extends AbstractUserDataProfileElement {\n\n\tprivate _copyFromTemplates = new ResourceMap<string>();\n\tget copyFromTemplates(): ResourceMap<string> { return this._copyFromTemplates; }\n\n\tprivate templatePromise: CancelablePromise<void> | undefined;\n\tprivate template: IUserDataProfileTemplate | null = null;\n\n\tprivate defaultName: string;\n\tprivate defaultIcon: string | undefined;\n\n\tconstructor(\n\t\tcopyFrom: URI | IUserDataProfile | undefined,\n\t\treadonly titleButtons: [Action[], Action[]],\n\t\treadonly actions: [IAction[], IAction[]],\n\n\t\t@IUserDataProfileImportExportService private readonly userDataProfileImportExportService: IUserDataProfileImportExportService,\n\t\t@IUserDataProfileManagementService userDataProfileManagementService: IUserDataProfileManagementService,\n\t\t@IUserDataProfilesService userDataProfilesService: IUserDataProfilesService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IWorkspaceContextService workspaceContextService: IWorkspaceContextService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\n\t\t\t'',\n\t\t\tundefined,\n\t\t\tundefined,\n\t\t\tundefined,\n\t\t\tfalse,\n\t\t\tuserDataProfileManagementService,\n\t\t\tuserDataProfilesService,\n\t\t\tcommandService,\n\t\t\tworkspaceContextService,\n\t\t\thostService,\n\t\t\turiIdentityService,\n\t\t\tfileService,\n\t\t\textensionManagementService,\n\t\t\tinstantiationService,\n\t\t);\n\t\tthis.name = this.defaultName = this.getNewProfileName();\n\t\tthis._copyFrom = copyFrom;\n\t\tthis._copyFlags = this.getCopyFlagsFrom(copyFrom);\n\t\tthis.initialize();\n\t\tthis._register(this.fileService.registerProvider(USER_DATA_PROFILE_TEMPLATE_PREVIEW_SCHEME, this._register(new InMemoryFileSystemProvider())));\n\t\tthis._register(toDisposable(() => {\n\t\t\tif (this.previewProfile) {\n\t\t\t\tthis.userDataProfilesService.removeProfile(this.previewProfile);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _copyFrom: IUserDataProfile | URI | undefined;\n\tget copyFrom(): IUserDataProfile | URI | undefined { return this._copyFrom; }\n\tset copyFrom(copyFrom: IUserDataProfile | URI | undefined) {\n\t\tif (this._copyFrom !== copyFrom) {\n\t\t\tthis._copyFrom = copyFrom;\n\t\t\tthis._onDidChange.fire({ copyFrom: true });\n\t\t\tthis.flags = undefined;\n\t\t\tthis.copyFlags = this.getCopyFlagsFrom(copyFrom);\n\t\t\tif (copyFrom instanceof URI) {\n\t\t\t\tthis.templatePromise?.cancel();\n\t\t\t\tthis.templatePromise = undefined;\n\t\t\t}\n\t\t\tthis.initialize();\n\t\t}\n\t}\n\n\tprivate _copyFlags: ProfileResourceTypeFlags | undefined;\n\tget copyFlags(): ProfileResourceTypeFlags | undefined { return this._copyFlags; }\n\tset copyFlags(flags: ProfileResourceTypeFlags | undefined) {\n\t\tif (!equals(this._copyFlags, flags)) {\n\t\t\tthis._copyFlags = flags;\n\t\t\tthis._onDidChange.fire({ copyFlags: true });\n\t\t}\n\t}\n\n\tprivate readonly previewProfileWatchDisposables = this._register(new DisposableStore());\n\tprivate _previewProfile: IUserDataProfile | undefined;\n\tget previewProfile(): IUserDataProfile | undefined { return this._previewProfile; }\n\tset previewProfile(profile: IUserDataProfile | undefined) {\n\t\tif (this._previewProfile !== profile) {\n\t\t\tthis._previewProfile = profile;\n\t\t\tthis._onDidChange.fire({ preview: true });\n\t\t\tthis.previewProfileWatchDisposables.clear();\n\t\t\tif (this._previewProfile) {\n\t\t\t\tthis.previewProfileWatchDisposables.add(this.fileService.watch(this._previewProfile.snippetsHome));\n\t\t\t\tthis.previewProfileWatchDisposables.add(this.fileService.onDidFilesChange(e => {\n\t\t\t\t\tif (!this._previewProfile) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.affects(this._previewProfile.snippetsHome)) {\n\t\t\t\t\t\tthis._onDidChange.fire({ snippets: true });\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getProfileToWatch(): IUserDataProfile | undefined {\n\t\treturn this.previewProfile;\n\t}\n\n\tprivate getCopyFlagsFrom(copyFrom: URI | IUserDataProfile | undefined): ProfileResourceTypeFlags | undefined {\n\t\treturn copyFrom ? {\n\t\t\tsettings: true,\n\t\t\tkeybindings: true,\n\t\t\tsnippets: true,\n\t\t\ttasks: true,\n\t\t\textensions: true,\n\t\t\tmcp: true\n\t\t} : undefined;\n\t}\n\n\tprivate async initialize(): Promise<void> {\n\t\tthis.disabled = true;\n\t\ttry {\n\t\t\tif (this.copyFrom instanceof URI) {\n\t\t\t\tawait this.resolveTemplate(this.copyFrom);\n\t\t\t\tif (this.template) {\n\t\t\t\t\tthis.copyFromTemplates.set(this.copyFrom, this.template.name);\n\t\t\t\t\tif (this.defaultName === this.name) {\n\t\t\t\t\t\tthis.name = this.defaultName = this.template.name ?? '';\n\t\t\t\t\t}\n\t\t\t\t\tif (this.defaultIcon === this.icon) {\n\t\t\t\t\t\tthis.icon = this.defaultIcon = this.template.icon;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setCopyFlag(ProfileResourceType.Settings, !!this.template.settings);\n\t\t\t\t\tthis.setCopyFlag(ProfileResourceType.Keybindings, !!this.template.keybindings);\n\t\t\t\t\tthis.setCopyFlag(ProfileResourceType.Tasks, !!this.template.tasks);\n\t\t\t\t\tthis.setCopyFlag(ProfileResourceType.Snippets, !!this.template.snippets);\n\t\t\t\t\tthis.setCopyFlag(ProfileResourceType.Extensions, !!this.template.extensions);\n\t\t\t\t\tthis.setCopyFlag(ProfileResourceType.Mcp, !!this.template.mcp);\n\t\t\t\t\tthis._onDidChange.fire({ copyFromInfo: true });\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (isUserDataProfile(this.copyFrom)) {\n\t\t\t\tif (this.defaultName === this.name) {\n\t\t\t\t\tthis.name = this.defaultName = localize('copy from', \"{0} (Copy)\", this.copyFrom.name);\n\t\t\t\t}\n\t\t\t\tif (this.defaultIcon === this.icon) {\n\t\t\t\t\tthis.icon = this.defaultIcon = this.copyFrom.icon;\n\t\t\t\t}\n\t\t\t\tthis.setCopyFlag(ProfileResourceType.Settings, true);\n\t\t\t\tthis.setCopyFlag(ProfileResourceType.Keybindings, true);\n\t\t\t\tthis.setCopyFlag(ProfileResourceType.Tasks, true);\n\t\t\t\tthis.setCopyFlag(ProfileResourceType.Snippets, true);\n\t\t\t\tthis.setCopyFlag(ProfileResourceType.Extensions, true);\n\t\t\t\tthis.setCopyFlag(ProfileResourceType.Mcp, true);\n\t\t\t\tthis._onDidChange.fire({ copyFromInfo: true });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.defaultName === this.name) {\n\t\t\t\tthis.name = this.defaultName = this.getNewProfileName();\n\t\t\t}\n\t\t\tif (this.defaultIcon === this.icon) {\n\t\t\t\tthis.icon = this.defaultIcon = undefined;\n\t\t\t}\n\t\t\tthis.setCopyFlag(ProfileResourceType.Settings, false);\n\t\t\tthis.setCopyFlag(ProfileResourceType.Keybindings, false);\n\t\t\tthis.setCopyFlag(ProfileResourceType.Tasks, false);\n\t\t\tthis.setCopyFlag(ProfileResourceType.Snippets, false);\n\t\t\tthis.setCopyFlag(ProfileResourceType.Extensions, false);\n\t\t\tthis.setCopyFlag(ProfileResourceType.Mcp, false);\n\t\t\tthis._onDidChange.fire({ copyFromInfo: true });\n\t\t} finally {\n\t\t\tthis.disabled = false;\n\t\t}\n\t}\n\n\tprivate getNewProfileName(): string {\n\t\tconst name = localize('untitled', \"Untitled\");\n\t\tconst nameRegEx = new RegExp(`${name}\\\\s(\\\\d+)`);\n\t\tlet nameIndex = 0;\n\t\tfor (const profile of this.userDataProfilesService.profiles) {\n\t\t\tconst matches = nameRegEx.exec(profile.name);\n\t\t\tconst index = matches ? parseInt(matches[1]) : 0;\n\t\t\tnameIndex = index > nameIndex ? index : nameIndex;\n\t\t}\n\t\treturn `${name} ${nameIndex + 1}`;\n\t}\n\n\tasync resolveTemplate(uri: URI): Promise<IUserDataProfileTemplate | null> {\n\t\tif (!this.templatePromise) {\n\t\t\tthis.templatePromise = createCancelablePromise(async token => {\n\t\t\t\tconst template = await this.userDataProfileImportExportService.resolveProfileTemplate(uri);\n\t\t\t\tif (!token.isCancellationRequested) {\n\t\t\t\t\tthis.template = template;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tawait this.templatePromise;\n\t\treturn this.template;\n\t}\n\n\thasResource(resourceType: ProfileResourceType): boolean {\n\t\tif (this.template) {\n\t\t\tswitch (resourceType) {\n\t\t\t\tcase ProfileResourceType.Settings:\n\t\t\t\t\treturn !!this.template.settings;\n\t\t\t\tcase ProfileResourceType.Keybindings:\n\t\t\t\t\treturn !!this.template.keybindings;\n\t\t\t\tcase ProfileResourceType.Snippets:\n\t\t\t\t\treturn !!this.template.snippets;\n\t\t\t\tcase ProfileResourceType.Tasks:\n\t\t\t\t\treturn !!this.template.tasks;\n\t\t\t\tcase ProfileResourceType.Extensions:\n\t\t\t\t\treturn !!this.template.extensions;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tgetCopyFlag(key: ProfileResourceType): boolean {\n\t\treturn this.copyFlags?.[key] ?? false;\n\t}\n\n\tsetCopyFlag(key: ProfileResourceType, value: boolean): void {\n\t\tconst flags = this.copyFlags ? { ...this.copyFlags } : {};\n\t\tflags[key] = value;\n\t\tthis.copyFlags = flags;\n\t}\n\n\tgetCopyFromName(): string | undefined {\n\t\tif (isUserDataProfile(this.copyFrom)) {\n\t\t\treturn this.copyFrom.name;\n\t\t}\n\t\tif (this.copyFrom instanceof URI) {\n\t\t\treturn this.copyFromTemplates.get(this.copyFrom);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprotected override async getChildrenForResourceType(resourceType: ProfileResourceType): Promise<IProfileChildElement[]> {\n\t\tif (this.getFlag(resourceType)) {\n\t\t\treturn this.getChildrenFromProfile(this.userDataProfilesService.defaultProfile, resourceType);\n\t\t}\n\t\tif (!this.getCopyFlag(resourceType)) {\n\t\t\treturn [];\n\t\t}\n\t\tif (this.previewProfile) {\n\t\t\treturn this.getChildrenFromProfile(this.previewProfile, resourceType);\n\t\t}\n\t\tif (this.copyFrom instanceof URI) {\n\t\t\tawait this.resolveTemplate(this.copyFrom);\n\t\t\tif (!this.template) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn this.getChildrenFromProfileTemplate(this.template, resourceType);\n\t\t}\n\t\tif (this.copyFrom) {\n\t\t\treturn this.getChildrenFromProfile(this.copyFrom, resourceType);\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate async getChildrenFromProfileTemplate(profileTemplate: IUserDataProfileTemplate, resourceType: ProfileResourceType): Promise<IProfileResourceTypeChildElement[]> {\n\t\tconst location = URI.from({ scheme: USER_DATA_PROFILE_TEMPLATE_PREVIEW_SCHEME, path: `/root/profiles/${profileTemplate.name}` });\n\t\tconst cacheLocation = URI.from({ scheme: USER_DATA_PROFILE_TEMPLATE_PREVIEW_SCHEME, path: `/root/cache/${profileTemplate.name}` });\n\t\tconst profile = toUserDataProfile(generateUuid(), this.name, location, cacheLocation);\n\t\tswitch (resourceType) {\n\t\t\tcase ProfileResourceType.Settings:\n\t\t\t\tif (profileTemplate.settings) {\n\t\t\t\t\tawait this.instantiationService.createInstance(SettingsResource).apply(profileTemplate.settings, profile);\n\t\t\t\t\treturn this.getChildrenFromProfile(profile, resourceType);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\tcase ProfileResourceType.Keybindings:\n\t\t\t\tif (profileTemplate.keybindings) {\n\t\t\t\t\tawait this.instantiationService.createInstance(KeybindingsResource).apply(profileTemplate.keybindings, profile);\n\t\t\t\t\treturn this.getChildrenFromProfile(profile, resourceType);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\tcase ProfileResourceType.Snippets:\n\t\t\t\tif (profileTemplate.snippets) {\n\t\t\t\t\tawait this.instantiationService.createInstance(SnippetsResource).apply(profileTemplate.snippets, profile);\n\t\t\t\t\treturn this.getChildrenFromProfile(profile, resourceType);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\tcase ProfileResourceType.Tasks:\n\t\t\t\tif (profileTemplate.tasks) {\n\t\t\t\t\tawait this.instantiationService.createInstance(TasksResource).apply(profileTemplate.tasks, profile);\n\t\t\t\t\treturn this.getChildrenFromProfile(profile, resourceType);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\tcase ProfileResourceType.Mcp:\n\t\t\t\tif (profileTemplate.mcp) {\n\t\t\t\t\tawait this.instantiationService.createInstance(McpProfileResource).apply(profileTemplate.mcp, profile);\n\t\t\t\t\treturn this.getChildrenFromProfile(profile, resourceType);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\tcase ProfileResourceType.Extensions:\n\t\t\t\tif (profileTemplate.extensions) {\n\t\t\t\t\tconst children = await this.instantiationService.createInstance(ExtensionsResourceImportTreeItem, profileTemplate.extensions).getChildren();\n\t\t\t\t\treturn children.map(child => this.toUserDataProfileResourceChildElement(child));\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t}\n\t\treturn [];\n\t}\n\n\toverride shouldValidateName(): boolean {\n\t\treturn !this.copyFrom;\n\t}\n\n\toverride getInitialName(): string {\n\t\treturn this.previewProfile?.name ?? '';\n\t}\n\n\tprotected override async doSave(): Promise<void> {\n\t\tif (this.previewProfile) {\n\t\t\tconst profile = await this.saveProfile(this.previewProfile);\n\t\t\tif (profile) {\n\t\t\t\tthis.previewProfile = profile;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class UserDataProfilesEditorModel extends EditorModel {\n\n\tprivate static INSTANCE: UserDataProfilesEditorModel | undefined;\n\tstatic getInstance(instantiationService: IInstantiationService): UserDataProfilesEditorModel {\n\t\tif (!UserDataProfilesEditorModel.INSTANCE) {\n\t\t\tUserDataProfilesEditorModel.INSTANCE = instantiationService.createInstance(UserDataProfilesEditorModel);\n\t\t}\n\t\treturn UserDataProfilesEditorModel.INSTANCE;\n\t}\n\n\tprivate _profiles: [AbstractUserDataProfileElement, DisposableStore][] = [];\n\tget profiles(): AbstractUserDataProfileElement[] {\n\t\treturn this._profiles\n\t\t\t.map(([profile]) => profile)\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (a instanceof NewProfileElement) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif (b instanceof NewProfileElement) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a instanceof UserDataProfileElement && a.profile.isDefault) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (b instanceof UserDataProfileElement && b.profile.isDefault) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn a.name.localeCompare(b.name);\n\t\t\t});\n\t}\n\n\tprivate newProfileElement: NewProfileElement | undefined;\n\n\tprivate _onDidChange = this._register(new Emitter<AbstractUserDataProfileElement | undefined>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate templates: Promise<readonly IProfileTemplateInfo[]> | undefined;\n\n\tconstructor(\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IUserDataProfileManagementService private readonly userDataProfileManagementService: IUserDataProfileManagementService,\n\t\t@IUserDataProfileImportExportService private readonly userDataProfileImportExportService: IUserDataProfileImportExportService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tfor (const profile of userDataProfilesService.profiles) {\n\t\t\tif (!profile.isTransient) {\n\t\t\t\tthis._profiles.push(this.createProfileElement(profile));\n\t\t\t}\n\t\t}\n\t\tthis._register(toDisposable(() => this._profiles.splice(0, this._profiles.length).map(([, disposables]) => disposables.dispose())));\n\t\tthis._register(userDataProfilesService.onDidChangeProfiles(e => this.onDidChangeProfiles(e)));\n\t}\n\n\tprivate onDidChangeProfiles(e: DidChangeProfilesEvent): void {\n\t\tlet changed = false;\n\t\tfor (const profile of e.added) {\n\t\t\tif (!profile.isTransient && profile.name !== this.newProfileElement?.name) {\n\t\t\t\tchanged = true;\n\t\t\t\tthis._profiles.push(this.createProfileElement(profile));\n\t\t\t}\n\t\t}\n\t\tfor (const profile of e.removed) {\n\t\t\tif (profile.id === this.newProfileElement?.previewProfile?.id) {\n\t\t\t\tthis.newProfileElement.previewProfile = undefined;\n\t\t\t}\n\t\t\tconst index = this._profiles.findIndex(([p]) => p instanceof UserDataProfileElement && p.profile.id === profile.id);\n\t\t\tif (index !== -1) {\n\t\t\t\tchanged = true;\n\t\t\t\tthis._profiles.splice(index, 1).map(([, disposables]) => disposables.dispose());\n\t\t\t}\n\t\t}\n\t\tif (changed) {\n\t\t\tthis._onDidChange.fire(undefined);\n\t\t}\n\t}\n\n\tgetTemplates(): Promise<readonly IProfileTemplateInfo[]> {\n\t\tif (!this.templates) {\n\t\t\tthis.templates = this.userDataProfileManagementService.getBuiltinProfileTemplates();\n\t\t}\n\t\treturn this.templates;\n\t}\n\n\tprivate createProfileElement(profile: IUserDataProfile): [UserDataProfileElement, DisposableStore] {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst activateAction = disposables.add(new Action(\n\t\t\t'userDataProfile.activate',\n\t\t\tlocalize('active', \"Use this Profile for Current Window\"),\n\t\t\tThemeIcon.asClassName(Codicon.check),\n\t\t\ttrue,\n\t\t\t() => this.userDataProfileManagementService.switchProfile(profileElement.profile)\n\t\t));\n\n\t\tconst copyFromProfileAction = disposables.add(new Action(\n\t\t\t'userDataProfile.copyFromProfile',\n\t\t\tlocalize('copyFromProfile', \"Duplicate...\"),\n\t\t\tThemeIcon.asClassName(Codicon.copy),\n\t\t\ttrue, () => this.createNewProfile(profileElement.profile)\n\t\t));\n\n\t\tconst exportAction = disposables.add(new Action(\n\t\t\t'userDataProfile.export',\n\t\t\tlocalize('export', \"Export...\"),\n\t\t\tThemeIcon.asClassName(Codicon.export),\n\t\t\ttrue,\n\t\t\t() => this.userDataProfileImportExportService.exportProfile(profile)\n\t\t));\n\n\t\tconst deleteAction = disposables.add(new Action(\n\t\t\t'userDataProfile.delete',\n\t\t\tlocalize('delete', \"Delete\"),\n\t\t\tThemeIcon.asClassName(Codicon.trash),\n\t\t\ttrue,\n\t\t\t() => this.removeProfile(profileElement.profile)\n\t\t));\n\n\t\tconst newWindowAction = disposables.add(new Action(\n\t\t\t'userDataProfile.newWindow',\n\t\t\tlocalize('open new window', \"Open New Window with this Profile\"),\n\t\t\tThemeIcon.asClassName(Codicon.emptyWindow),\n\t\t\ttrue,\n\t\t\t() => this.openWindow(profileElement.profile)\n\t\t));\n\n\t\tconst primaryActions: IAction[] = [];\n\t\tprimaryActions.push(activateAction);\n\t\tprimaryActions.push(newWindowAction);\n\t\tconst secondaryActions: IAction[] = [];\n\t\tsecondaryActions.push(copyFromProfileAction);\n\t\tsecondaryActions.push(exportAction);\n\t\tif (!profile.isDefault) {\n\t\t\tsecondaryActions.push(new Separator());\n\t\t\tsecondaryActions.push(deleteAction);\n\t\t}\n\n\t\tconst profileElement = disposables.add(this.instantiationService.createInstance(UserDataProfileElement,\n\t\t\tprofile,\n\t\t\t[[], []],\n\t\t\t[primaryActions, secondaryActions]\n\t\t));\n\n\t\tactivateAction.enabled = this.userDataProfileService.currentProfile.id !== profileElement.profile.id;\n\t\tdisposables.add(this.userDataProfileService.onDidChangeCurrentProfile(() =>\n\t\t\tactivateAction.enabled = this.userDataProfileService.currentProfile.id !== profileElement.profile.id));\n\n\t\treturn [profileElement, disposables];\n\t}\n\n\tasync createNewProfile(copyFrom?: URI | IUserDataProfile): Promise<AbstractUserDataProfileElement | undefined> {\n\t\tif (this.newProfileElement) {\n\t\t\tconst result = await this.dialogService.confirm({\n\t\t\t\ttype: 'info',\n\t\t\t\tmessage: localize('new profile exists', \"A new profile is already being created. Do you want to discard it and create a new one?\"),\n\t\t\t\tprimaryButton: localize('discard', \"Discard & Create\"),\n\t\t\t\tcancelButton: localize('cancel', \"Cancel\")\n\t\t\t});\n\t\t\tif (!result.confirmed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.revert();\n\t\t}\n\n\t\tif (copyFrom instanceof URI) {\n\t\t\ttry {\n\t\t\t\tawait this.userDataProfileImportExportService.resolveProfileTemplate(copyFrom);\n\t\t\t} catch (error) {\n\t\t\t\tthis.dialogService.error(getErrorMessage(error));\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.newProfileElement) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\t\t\tdisposables.add(toDisposable(() => cancellationTokenSource.dispose(true)));\n\t\t\tconst primaryActions: Action[] = [];\n\t\t\tconst secondaryActions: Action[] = [];\n\t\t\tconst createAction = disposables.add(new Action(\n\t\t\t\t'userDataProfile.create',\n\t\t\t\tlocalize('create', \"Create\"),\n\t\t\t\tundefined,\n\t\t\t\ttrue,\n\t\t\t\t() => this.saveNewProfile(false, cancellationTokenSource.token)\n\t\t\t));\n\t\t\tprimaryActions.push(createAction);\n\t\t\tif (isWeb && copyFrom instanceof URI && isProfileURL(copyFrom)) {\n\t\t\t\tprimaryActions.push(disposables.add(new Action(\n\t\t\t\t\t'userDataProfile.createInDesktop',\n\t\t\t\t\tlocalize('import in desktop', \"Create in {0}\", this.productService.nameLong),\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t\t() => this.openerService.open(copyFrom, { openExternal: true })\n\t\t\t\t)));\n\t\t\t}\n\t\t\tconst cancelAction = disposables.add(new Action(\n\t\t\t\t'userDataProfile.cancel',\n\t\t\t\tlocalize('cancel', \"Cancel\"),\n\t\t\t\tThemeIcon.asClassName(Codicon.trash),\n\t\t\t\ttrue,\n\t\t\t\t() => this.discardNewProfile()\n\t\t\t));\n\t\t\tsecondaryActions.push(cancelAction);\n\t\t\tconst previewProfileAction = disposables.add(new Action(\n\t\t\t\t'userDataProfile.preview',\n\t\t\t\tlocalize('preview', \"Preview\"),\n\t\t\t\tThemeIcon.asClassName(Codicon.openPreview),\n\t\t\t\ttrue,\n\t\t\t\t() => this.previewNewProfile(cancellationTokenSource.token)\n\t\t\t));\n\t\t\tsecondaryActions.push(previewProfileAction);\n\t\t\tconst exportAction = disposables.add(new Action(\n\t\t\t\t'userDataProfile.export',\n\t\t\t\tlocalize('export', \"Export...\"),\n\t\t\t\tThemeIcon.asClassName(Codicon.export),\n\t\t\t\tisUserDataProfile(copyFrom),\n\t\t\t\t() => this.exportNewProfile(cancellationTokenSource.token)\n\t\t\t));\n\t\t\tthis.newProfileElement = disposables.add(this.instantiationService.createInstance(NewProfileElement,\n\t\t\t\tcopyFrom,\n\t\t\t\t[primaryActions, secondaryActions],\n\t\t\t\t[[cancelAction], [exportAction]],\n\t\t\t));\n\t\t\tconst updateCreateActionLabel = () => {\n\t\t\t\tif (createAction.enabled) {\n\t\t\t\t\tif (this.newProfileElement?.copyFrom && this.userDataProfilesService.profiles.some(p => !p.isTransient && p.name === this.newProfileElement?.name)) {\n\t\t\t\t\t\tcreateAction.label = localize('replace', \"Replace\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcreateAction.label = localize('create', \"Create\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tupdateCreateActionLabel();\n\t\t\tdisposables.add(this.newProfileElement.onDidChange(e => {\n\t\t\t\tif (e.preview || e.disabled || e.message) {\n\t\t\t\t\tcreateAction.enabled = !this.newProfileElement?.disabled && !this.newProfileElement?.message;\n\t\t\t\t\tpreviewProfileAction.enabled = !this.newProfileElement?.previewProfile && !this.newProfileElement?.disabled && !this.newProfileElement?.message;\n\t\t\t\t}\n\t\t\t\tif (e.name || e.copyFrom) {\n\t\t\t\t\tupdateCreateActionLabel();\n\t\t\t\t\texportAction.enabled = isUserDataProfile(this.newProfileElement?.copyFrom);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tdisposables.add(this.userDataProfilesService.onDidChangeProfiles((e) => {\n\t\t\t\tupdateCreateActionLabel();\n\t\t\t\tthis.newProfileElement?.validate();\n\t\t\t}));\n\t\t\tthis._profiles.push([this.newProfileElement, disposables]);\n\t\t\tthis._onDidChange.fire(this.newProfileElement);\n\t\t}\n\t\treturn this.newProfileElement;\n\t}\n\n\trevert(): void {\n\t\tthis.removeNewProfile();\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\tprivate removeNewProfile(): void {\n\t\tif (this.newProfileElement) {\n\t\t\tconst index = this._profiles.findIndex(([p]) => p === this.newProfileElement);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis._profiles.splice(index, 1).map(([, disposables]) => disposables.dispose());\n\t\t\t}\n\t\t\tthis.newProfileElement = undefined;\n\t\t}\n\t}\n\n\tprivate async previewNewProfile(token: CancellationToken): Promise<void> {\n\t\tif (!this.newProfileElement) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.newProfileElement.previewProfile) {\n\t\t\treturn;\n\t\t}\n\t\tconst profile = await this.saveNewProfile(true, token);\n\t\tif (profile) {\n\t\t\tthis.newProfileElement.previewProfile = profile;\n\t\t\tif (isWeb) {\n\t\t\t\tawait this.userDataProfileManagementService.switchProfile(profile);\n\t\t\t} else {\n\t\t\t\tawait this.openWindow(profile);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async exportNewProfile(token: CancellationToken): Promise<void> {\n\t\tif (!this.newProfileElement) {\n\t\t\treturn;\n\t\t}\n\t\tif (!isUserDataProfile(this.newProfileElement.copyFrom)) {\n\t\t\treturn;\n\t\t}\n\t\tconst profile = toUserDataProfile(\n\t\t\tgenerateUuid(),\n\t\t\tthis.newProfileElement.name,\n\t\t\tthis.newProfileElement.copyFrom.location,\n\t\t\tthis.newProfileElement.copyFrom.cacheHome,\n\t\t\t{\n\t\t\t\ticon: this.newProfileElement.icon,\n\t\t\t\tuseDefaultFlags: this.newProfileElement.flags,\n\t\t\t},\n\t\t\tthis.userDataProfilesService.defaultProfile\n\t\t);\n\t\tawait this.userDataProfileImportExportService.exportProfile(profile, this.newProfileElement.copyFlags);\n\t}\n\n\tasync saveNewProfile(transient?: boolean, token?: CancellationToken): Promise<IUserDataProfile | undefined> {\n\t\tif (!this.newProfileElement) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.newProfileElement.validate();\n\t\tif (this.newProfileElement.message) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.newProfileElement.disabled = true;\n\t\tlet profile: IUserDataProfile | undefined;\n\n\t\ttry {\n\t\t\tif (this.newProfileElement.previewProfile) {\n\t\t\t\tif (!transient) {\n\t\t\t\t\tprofile = await this.userDataProfileManagementService.updateProfile(this.newProfileElement.previewProfile, { transient: false });\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst { flags, icon, name, copyFrom } = this.newProfileElement;\n\t\t\t\tconst useDefaultFlags: UseDefaultProfileFlags | undefined = flags\n\t\t\t\t\t? flags.settings && flags.keybindings && flags.tasks && flags.globalState && flags.extensions ? undefined : flags\n\t\t\t\t\t: undefined;\n\n\t\t\t\ttype CreateProfileInfoClassification = {\n\t\t\t\t\towner: 'sandy081';\n\t\t\t\t\tcomment: 'Report when profile is about to be created';\n\t\t\t\t\tsource: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Type of profile source' };\n\t\t\t\t};\n\t\t\t\ttype CreateProfileInfoEvent = {\n\t\t\t\t\tsource: string | undefined;\n\t\t\t\t};\n\t\t\t\tconst createProfileTelemetryData: CreateProfileInfoEvent = { source: copyFrom instanceof URI ? 'template' : isUserDataProfile(copyFrom) ? 'profile' : copyFrom ? 'external' : undefined };\n\n\t\t\t\tif (copyFrom instanceof URI) {\n\t\t\t\t\tconst template = await this.newProfileElement.resolveTemplate(copyFrom);\n\t\t\t\t\tif (template) {\n\t\t\t\t\t\tthis.telemetryService.publicLog2<CreateProfileInfoEvent, CreateProfileInfoClassification>('userDataProfile.createFromTemplate', createProfileTelemetryData);\n\t\t\t\t\t\tprofile = await this.userDataProfileImportExportService.createProfileFromTemplate(\n\t\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tuseDefaultFlags,\n\t\t\t\t\t\t\t\ticon,\n\t\t\t\t\t\t\t\tresourceTypeFlags: this.newProfileElement.copyFlags,\n\t\t\t\t\t\t\t\ttransient\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttoken ?? CancellationToken.None\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else if (isUserDataProfile(copyFrom)) {\n\t\t\t\t\tprofile = await this.userDataProfileImportExportService.createFromProfile(\n\t\t\t\t\t\tcopyFrom,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tuseDefaultFlags,\n\t\t\t\t\t\t\ticon: icon,\n\t\t\t\t\t\t\tresourceTypeFlags: this.newProfileElement.copyFlags,\n\t\t\t\t\t\t\ttransient\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken ?? CancellationToken.None\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tprofile = await this.userDataProfileManagementService.createProfile(name, { useDefaultFlags, icon, transient });\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tif (this.newProfileElement) {\n\t\t\t\tthis.newProfileElement.disabled = false;\n\t\t\t}\n\t\t}\n\n\t\tif (token?.isCancellationRequested) {\n\t\t\tif (profile) {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.userDataProfileManagementService.removeProfile(profile);\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// ignore\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (profile && !profile.isTransient && this.newProfileElement) {\n\t\t\tthis.removeNewProfile();\n\t\t\tconst existing = this._profiles.find(([p]) => p.name === profile.name);\n\t\t\tif (existing) {\n\t\t\t\tthis._onDidChange.fire(existing[0]);\n\t\t\t} else {\n\t\t\t\tthis.onDidChangeProfiles({ added: [profile], removed: [], updated: [], all: this.userDataProfilesService.profiles });\n\t\t\t}\n\t\t}\n\n\t\treturn profile;\n\t}\n\n\tprivate async discardNewProfile(): Promise<void> {\n\t\tif (!this.newProfileElement) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.newProfileElement.previewProfile) {\n\t\t\tawait this.userDataProfileManagementService.removeProfile(this.newProfileElement.previewProfile);\n\t\t\treturn;\n\t\t}\n\t\tthis.removeNewProfile();\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\tprivate async removeProfile(profile: IUserDataProfile): Promise<void> {\n\t\tconst result = await this.dialogService.confirm({\n\t\t\ttype: 'info',\n\t\t\tmessage: localize('deleteProfile', \"Are you sure you want to delete the profile '{0}'?\", profile.name),\n\t\t\tprimaryButton: localize('delete', \"Delete\"),\n\t\t\tcancelButton: localize('cancel', \"Cancel\")\n\t\t});\n\t\tif (result.confirmed) {\n\t\t\tawait this.userDataProfileManagementService.removeProfile(profile);\n\t\t}\n\t}\n\n\tprivate async openWindow(profile: IUserDataProfile): Promise<void> {\n\t\tawait this.hostService.openWindow({ forceProfile: profile.name });\n\t}\n}\n"]}