{"version":3,"sources":["vs/workbench/contrib/replNotebook/browser/replEditorInput.ts"],"names":[],"mappings":"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","file":"replEditorInput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IReference } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IResolvedTextEditorModel, ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { EditorInputCapabilities } from '../../../common/editor.js';\nimport { IInteractiveHistoryService } from '../../interactive/browser/interactiveHistoryService.js';\nimport { NotebookTextModel } from '../../notebook/common/model/notebookTextModel.js';\nimport { CellEditType, CellKind, NotebookSetting } from '../../notebook/common/notebookCommon.js';\nimport { ICompositeNotebookEditorInput, NotebookEditorInput } from '../../notebook/common/notebookEditorInput.js';\nimport { INotebookEditorModelResolverService } from '../../notebook/common/notebookEditorModelResolverService.js';\nimport { INotebookService } from '../../notebook/common/notebookService.js';\nimport { ICustomEditorLabelService } from '../../../services/editor/common/customEditorLabelService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IFilesConfigurationService } from '../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\n\nconst replTabIcon = registerIcon('repl-editor-label-icon', Codicon.debugLineByLine, localize('replEditorLabelIcon', 'Icon of the REPL editor label.'));\n\nexport class ReplEditorInput extends NotebookEditorInput implements ICompositeNotebookEditorInput {\n\tstatic override ID: string = 'workbench.editorinputs.replEditorInput';\n\n\tprivate inputModelRef: IReference<IResolvedTextEditorModel> | undefined;\n\tprivate isScratchpad: boolean;\n\tprivate label: string;\n\tprivate isDisposing = false;\n\n\tconstructor(\n\t\tresource: URI,\n\t\tlabel: string | undefined,\n\t\t@INotebookService _notebookService: INotebookService,\n\t\t@INotebookEditorModelResolverService _notebookModelResolverService: INotebookEditorModelResolverService,\n\t\t@IFileDialogService _fileDialogService: IFileDialogService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IFilesConfigurationService filesConfigurationService: IFilesConfigurationService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@ICustomEditorLabelService customEditorLabelService: ICustomEditorLabelService,\n\t\t@IInteractiveHistoryService public readonly historyService: IInteractiveHistoryService,\n\t\t@ITextModelService private readonly _textModelService: ITextModelService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IPathService pathService: IPathService\n\t) {\n\t\tsuper(resource, undefined, 'jupyter-notebook', {}, _notebookService, _notebookModelResolverService, _fileDialogService, labelService, fileService, filesConfigurationService, extensionService, editorService, textResourceConfigurationService, customEditorLabelService, environmentService, pathService);\n\t\tthis.isScratchpad = resource.scheme === 'untitled' && configurationService.getValue<boolean>(NotebookSetting.InteractiveWindowPromptToSave) !== true;\n\t\tthis.label = label ?? this.createEditorLabel(resource);\n\t}\n\n\toverride getIcon(): ThemeIcon | undefined {\n\t\treturn replTabIcon;\n\t}\n\n\tprivate createEditorLabel(resource: URI | undefined): string {\n\t\tif (!resource) {\n\t\t\treturn 'REPL';\n\t\t}\n\n\t\tif (resource.scheme === 'untitled') {\n\t\t\tconst match = new RegExp('Untitled-(\\\\d+)\\.').exec(resource.path);\n\t\t\tif (match?.length === 2) {\n\t\t\t\treturn `REPL - ${match[1]}`;\n\t\t\t}\n\t\t}\n\n\t\tconst filename = resource.path.split('/').pop();\n\t\treturn filename ? `REPL - ${filename}` : 'REPL';\n\t}\n\n\toverride get typeId(): string {\n\t\treturn ReplEditorInput.ID;\n\t}\n\n\toverride get editorId(): string | undefined {\n\t\treturn 'repl';\n\t}\n\n\toverride getName() {\n\t\treturn this.label;\n\t}\n\n\tget editorInputs() {\n\t\treturn [this];\n\t}\n\n\toverride get capabilities() {\n\t\tconst capabilities = super.capabilities;\n\t\tconst scratchPad = this.isScratchpad ? EditorInputCapabilities.Scratchpad : 0;\n\n\t\treturn capabilities\n\t\t\t| EditorInputCapabilities.Readonly\n\t\t\t| scratchPad;\n\t}\n\n\toverride async resolve() {\n\t\tconst model = await super.resolve();\n\t\tif (model) {\n\t\t\tthis.ensureInputBoxCell(model.notebook);\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tprivate ensureInputBoxCell(notebook: NotebookTextModel) {\n\t\tconst lastCell = notebook.cells[notebook.cells.length - 1];\n\n\t\tif (!lastCell || lastCell.cellKind === CellKind.Markup || lastCell.outputs.length > 0 || lastCell.internalMetadata.executionOrder !== undefined) {\n\t\t\tnotebook.applyEdits([\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: notebook.cells.length,\n\t\t\t\t\tcount: 0,\n\t\t\t\t\tcells: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\t\tsource: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t], true, undefined, () => undefined, undefined, false);\n\t\t}\n\t}\n\n\tasync resolveInput(notebook: NotebookTextModel) {\n\t\tif (this.inputModelRef) {\n\t\t\treturn this.inputModelRef.object.textEditorModel;\n\t\t}\n\t\tconst lastCell = notebook.cells[notebook.cells.length - 1];\n\t\tif (!lastCell) {\n\t\t\tthrow new Error('The REPL editor requires at least one cell for the input box.');\n\t\t}\n\n\t\tthis.inputModelRef = await this._textModelService.createModelReference(lastCell.uri);\n\t\treturn this.inputModelRef.object.textEditorModel;\n\t}\n\n\toverride dispose() {\n\t\tif (!this.isDisposing) {\n\t\t\tthis.isDisposing = true;\n\t\t\tthis.editorModelReference?.object.revert({ soft: true });\n\t\t\tthis.inputModelRef?.dispose();\n\t\t\tsuper.dispose();\n\t\t}\n\t}\n}\n"]}