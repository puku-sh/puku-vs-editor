{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/issue/browser/issueService.ts","vs/workbench/contrib/issue/browser/issueService.ts"],"names":[],"mappings":"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","file":"issueService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getZoomLevel } from '../../../../base/browser/browser.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { userAgent } from '../../../../base/common/platform.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IExtensionManagementService } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { ExtensionType, IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { normalizeGitHubUrl } from '../common/issueReporterUtil.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { buttonBackground, buttonForeground, buttonHoverBackground, foreground, inputActiveOptionBorder, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, scrollbarSliderActiveBackground, scrollbarSliderBackground, scrollbarSliderHoverBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IColorTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { SIDE_BAR_BACKGROUND } from '../../../common/theme.js';\nimport { IIssueFormService, IssueReporterData, IssueReporterExtensionData, IssueReporterStyles, IWorkbenchIssueService } from '../common/issue.js';\nimport { IWorkbenchAssignmentService } from '../../../services/assignment/common/assignmentService.js';\nimport { IAuthenticationService } from '../../../services/authentication/common/authentication.js';\nimport { IWorkbenchExtensionEnablementService } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IIntegrityService } from '../../../services/integrity/common/integrity.js';\n\n\nexport class BrowserIssueService implements IWorkbenchIssueService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IIssueFormService private readonly issueFormService: IIssueFormService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IWorkbenchAssignmentService private readonly experimentService: IWorkbenchAssignmentService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IIntegrityService private readonly integrityService: IIntegrityService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IAuthenticationService private readonly authenticationService: IAuthenticationService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IOpenerService private readonly openerService: IOpenerService\n\t) { }\n\n\tasync openReporter(options: Partial<IssueReporterData>): Promise<void> {\n\t\t// If web reporter setting is false open the old GitHub issue reporter\n\t\tif (!this.configurationService.getValue<boolean>('issueReporter.experimental.webReporter')) {\n\t\t\tconst extensionId = options.extensionId;\n\t\t\t// If we don't have a extensionId, treat this as a Core issue\n\t\t\tif (!extensionId) {\n\t\t\t\tif (this.productService.reportIssueUrl) {\n\t\t\t\t\tconst uri = this.getIssueUriFromStaticContent(this.productService.reportIssueUrl);\n\t\t\t\t\tawait this.openerService.open(uri, { openExternal: true });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`No issue reporting URL configured for ${this.productService.nameLong}.`);\n\t\t\t}\n\n\t\t\tconst selectedExtension = this.extensionService.extensions.filter(ext => ext.identifier.value === options.extensionId)[0];\n\t\t\tconst extensionGitHubUrl = this.getExtensionGitHubUrl(selectedExtension);\n\t\t\tif (!extensionGitHubUrl) {\n\t\t\t\tthrow new Error(`Unable to find issue reporting url for ${extensionId}`);\n\t\t\t}\n\t\t\tconst uri = this.getIssueUriFromStaticContent(`${extensionGitHubUrl}/issues/new`, selectedExtension);\n\t\t\tawait this.openerService.open(uri, { openExternal: true });\n\t\t}\n\n\t\tif (this.productService.reportIssueUrl) {\n\t\t\tconst theme = this.themeService.getColorTheme();\n\t\t\tconst experiments = await this.experimentService.getCurrentExperiments();\n\n\t\t\tlet githubAccessToken = '';\n\t\t\ttry {\n\t\t\t\tconst githubSessions = await this.authenticationService.getSessions('github');\n\t\t\t\tconst potentialSessions = githubSessions.filter(session => session.scopes.includes('repo'));\n\t\t\t\tgithubAccessToken = potentialSessions[0]?.accessToken;\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\t// air on the side of caution and have false be the default\n\t\t\tlet isUnsupported = false;\n\t\t\ttry {\n\t\t\t\tisUnsupported = !(await this.integrityService.isPure()).isPure;\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\tconst extensionData: IssueReporterExtensionData[] = [];\n\t\t\ttry {\n\t\t\t\tconst extensions = await this.extensionManagementService.getInstalled();\n\t\t\t\tconst enabledExtensions = extensions.filter(extension => this.extensionEnablementService.isEnabled(extension) || (options.extensionId && extension.identifier.id === options.extensionId));\n\t\t\t\textensionData.push(...enabledExtensions.map((extension): IssueReporterExtensionData => {\n\t\t\t\t\tconst { manifest } = extension;\n\t\t\t\t\tconst manifestKeys = manifest.contributes ? Object.keys(manifest.contributes) : [];\n\t\t\t\t\tconst isTheme = !manifest.main && !manifest.browser && manifestKeys.length === 1 && manifestKeys[0] === 'themes';\n\t\t\t\t\tconst isBuiltin = extension.type === ExtensionType.System;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: manifest.name,\n\t\t\t\t\t\tpublisher: manifest.publisher,\n\t\t\t\t\t\tversion: manifest.version,\n\t\t\t\t\t\trepositoryUrl: manifest.repository && manifest.repository.url,\n\t\t\t\t\t\tbugsUrl: manifest.bugs && manifest.bugs.url,\n\t\t\t\t\t\tdisplayName: manifest.displayName,\n\t\t\t\t\t\tid: extension.identifier.id,\n\t\t\t\t\t\tdata: options.data,\n\t\t\t\t\t\turi: options.uri,\n\t\t\t\t\t\tisTheme,\n\t\t\t\t\t\tisBuiltin,\n\t\t\t\t\t\textensionData: 'Extensions data loading',\n\t\t\t\t\t};\n\t\t\t\t}));\n\t\t\t} catch (e) {\n\t\t\t\textensionData.push({\n\t\t\t\t\tname: 'Workbench Issue Service',\n\t\t\t\t\tpublisher: 'Unknown',\n\t\t\t\t\tversion: 'Unknown',\n\t\t\t\t\trepositoryUrl: undefined,\n\t\t\t\t\tbugsUrl: undefined,\n\t\t\t\t\textensionData: `Extensions not loaded: ${e}`,\n\t\t\t\t\tdisplayName: `Extensions not loaded: ${e}`,\n\t\t\t\t\tid: 'workbench.issue',\n\t\t\t\t\tisTheme: false,\n\t\t\t\t\tisBuiltin: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst issueReporterData: IssueReporterData = Object.assign({\n\t\t\t\tstyles: getIssueReporterStyles(theme),\n\t\t\t\tzoomLevel: getZoomLevel(mainWindow),\n\t\t\t\tenabledExtensions: extensionData,\n\t\t\t\texperiments: experiments?.join('\\n'),\n\t\t\t\trestrictedMode: !this.workspaceTrustManagementService.isWorkspaceTrusted(),\n\t\t\t\tisUnsupported,\n\t\t\t\tgithubAccessToken\n\t\t\t}, options);\n\n\t\t\treturn this.issueFormService.openReporter(issueReporterData);\n\t\t}\n\t\tthrow new Error(`No issue reporting URL configured for ${this.productService.nameLong}.`);\n\n\t}\n\n\tprivate getExtensionGitHubUrl(extension: IExtensionDescription): string {\n\t\tif (extension.isBuiltin && this.productService.reportIssueUrl) {\n\t\t\treturn normalizeGitHubUrl(this.productService.reportIssueUrl);\n\t\t}\n\n\t\tlet repositoryUrl = '';\n\n\t\tconst bugsUrl = extension?.bugs?.url;\n\t\tconst extensionUrl = extension?.repository?.url;\n\n\t\t// If given, try to match the extension's bug url\n\t\tif (bugsUrl && bugsUrl.match(/^https?:\\/\\/github\\.com\\/(.*)/)) {\n\t\t\trepositoryUrl = normalizeGitHubUrl(bugsUrl);\n\t\t} else if (extensionUrl && extensionUrl.match(/^https?:\\/\\/github\\.com\\/(.*)/)) {\n\t\t\trepositoryUrl = normalizeGitHubUrl(extensionUrl);\n\t\t}\n\n\t\treturn repositoryUrl;\n\t}\n\n\tprivate getIssueUriFromStaticContent(baseUri: string, extension?: IExtensionDescription): string {\n\t\tconst issueDescription = `ADD ISSUE DESCRIPTION HERE\n\nVersion: ${this.productService.version}\nCommit: ${this.productService.commit ?? 'unknown'}\nUser Agent: ${userAgent ?? 'unknown'}\nEmbedder: ${this.productService.embedderIdentifier ?? 'unknown'}\n${extension?.version ? `\\nExtension version: ${extension.version}` : ''}\n<!-- generated by web issue reporter -->`;\n\n\t\treturn `${baseUri}?body=${encodeURIComponent(issueDescription)}&labels=web`;\n\t}\n}\n\nexport function getIssueReporterStyles(theme: IColorTheme): IssueReporterStyles {\n\treturn {\n\t\tbackgroundColor: getColor(theme, SIDE_BAR_BACKGROUND),\n\t\tcolor: getColor(theme, foreground),\n\t\ttextLinkColor: getColor(theme, textLinkForeground),\n\t\ttextLinkActiveForeground: getColor(theme, textLinkActiveForeground),\n\t\tinputBackground: getColor(theme, inputBackground),\n\t\tinputForeground: getColor(theme, inputForeground),\n\t\tinputBorder: getColor(theme, inputBorder),\n\t\tinputActiveBorder: getColor(theme, inputActiveOptionBorder),\n\t\tinputErrorBorder: getColor(theme, inputValidationErrorBorder),\n\t\tinputErrorBackground: getColor(theme, inputValidationErrorBackground),\n\t\tinputErrorForeground: getColor(theme, inputValidationErrorForeground),\n\t\tbuttonBackground: getColor(theme, buttonBackground),\n\t\tbuttonForeground: getColor(theme, buttonForeground),\n\t\tbuttonHoverBackground: getColor(theme, buttonHoverBackground),\n\t\tsliderActiveColor: getColor(theme, scrollbarSliderActiveBackground),\n\t\tsliderBackgroundColor: getColor(theme, scrollbarSliderBackground),\n\t\tsliderHoverColor: getColor(theme, scrollbarSliderHoverBackground),\n\t};\n}\n\nfunction getColor(theme: IColorTheme, key: string): string | undefined {\n\tconst color = theme.getColor(key);\n\treturn color ? color.toString() : undefined;\n}\n\nregisterSingleton(IWorkbenchIssueService, BrowserIssueService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getZoomLevel } from '../../../../base/browser/browser.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { userAgent } from '../../../../base/common/platform.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IExtensionManagementService } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { ExtensionType, IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { normalizeGitHubUrl } from '../common/issueReporterUtil.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { buttonBackground, buttonForeground, buttonHoverBackground, foreground, inputActiveOptionBorder, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, scrollbarSliderActiveBackground, scrollbarSliderBackground, scrollbarSliderHoverBackground, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IColorTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { SIDE_BAR_BACKGROUND } from '../../../common/theme.js';\nimport { IIssueFormService, IssueReporterData, IssueReporterExtensionData, IssueReporterStyles, IWorkbenchIssueService } from '../common/issue.js';\nimport { IWorkbenchAssignmentService } from '../../../services/assignment/common/assignmentService.js';\nimport { IAuthenticationService } from '../../../services/authentication/common/authentication.js';\nimport { IWorkbenchExtensionEnablementService } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IIntegrityService } from '../../../services/integrity/common/integrity.js';\n\n\nexport class BrowserIssueService implements IWorkbenchIssueService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IIssueFormService private readonly issueFormService: IIssueFormService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IWorkbenchAssignmentService private readonly experimentService: IWorkbenchAssignmentService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IIntegrityService private readonly integrityService: IIntegrityService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IAuthenticationService private readonly authenticationService: IAuthenticationService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IOpenerService private readonly openerService: IOpenerService\n\t) { }\n\n\tasync openReporter(options: Partial<IssueReporterData>): Promise<void> {\n\t\t// If web reporter setting is false open the old GitHub issue reporter\n\t\tif (!this.configurationService.getValue<boolean>('issueReporter.experimental.webReporter')) {\n\t\t\tconst extensionId = options.extensionId;\n\t\t\t// If we don't have a extensionId, treat this as a Core issue\n\t\t\tif (!extensionId) {\n\t\t\t\tif (this.productService.reportIssueUrl) {\n\t\t\t\t\tconst uri = this.getIssueUriFromStaticContent(this.productService.reportIssueUrl);\n\t\t\t\t\tawait this.openerService.open(uri, { openExternal: true });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`No issue reporting URL configured for ${this.productService.nameLong}.`);\n\t\t\t}\n\n\t\t\tconst selectedExtension = this.extensionService.extensions.filter(ext => ext.identifier.value === options.extensionId)[0];\n\t\t\tconst extensionGitHubUrl = this.getExtensionGitHubUrl(selectedExtension);\n\t\t\tif (!extensionGitHubUrl) {\n\t\t\t\tthrow new Error(`Unable to find issue reporting url for ${extensionId}`);\n\t\t\t}\n\t\t\tconst uri = this.getIssueUriFromStaticContent(`${extensionGitHubUrl}/issues/new`, selectedExtension);\n\t\t\tawait this.openerService.open(uri, { openExternal: true });\n\t\t}\n\n\t\tif (this.productService.reportIssueUrl) {\n\t\t\tconst theme = this.themeService.getColorTheme();\n\t\t\tconst experiments = await this.experimentService.getCurrentExperiments();\n\n\t\t\tlet githubAccessToken = '';\n\t\t\ttry {\n\t\t\t\tconst githubSessions = await this.authenticationService.getSessions('github');\n\t\t\t\tconst potentialSessions = githubSessions.filter(session => session.scopes.includes('repo'));\n\t\t\t\tgithubAccessToken = potentialSessions[0]?.accessToken;\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\t// air on the side of caution and have false be the default\n\t\t\tlet isUnsupported = false;\n\t\t\ttry {\n\t\t\t\tisUnsupported = !(await this.integrityService.isPure()).isPure;\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\tconst extensionData: IssueReporterExtensionData[] = [];\n\t\t\ttry {\n\t\t\t\tconst extensions = await this.extensionManagementService.getInstalled();\n\t\t\t\tconst enabledExtensions = extensions.filter(extension => this.extensionEnablementService.isEnabled(extension) || (options.extensionId && extension.identifier.id === options.extensionId));\n\t\t\t\textensionData.push(...enabledExtensions.map((extension): IssueReporterExtensionData => {\n\t\t\t\t\tconst { manifest } = extension;\n\t\t\t\t\tconst manifestKeys = manifest.contributes ? Object.keys(manifest.contributes) : [];\n\t\t\t\t\tconst isTheme = !manifest.main && !manifest.browser && manifestKeys.length === 1 && manifestKeys[0] === 'themes';\n\t\t\t\t\tconst isBuiltin = extension.type === ExtensionType.System;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: manifest.name,\n\t\t\t\t\t\tpublisher: manifest.publisher,\n\t\t\t\t\t\tversion: manifest.version,\n\t\t\t\t\t\trepositoryUrl: manifest.repository && manifest.repository.url,\n\t\t\t\t\t\tbugsUrl: manifest.bugs && manifest.bugs.url,\n\t\t\t\t\t\tdisplayName: manifest.displayName,\n\t\t\t\t\t\tid: extension.identifier.id,\n\t\t\t\t\t\tdata: options.data,\n\t\t\t\t\t\turi: options.uri,\n\t\t\t\t\t\tisTheme,\n\t\t\t\t\t\tisBuiltin,\n\t\t\t\t\t\textensionData: 'Extensions data loading',\n\t\t\t\t\t};\n\t\t\t\t}));\n\t\t\t} catch (e) {\n\t\t\t\textensionData.push({\n\t\t\t\t\tname: 'Workbench Issue Service',\n\t\t\t\t\tpublisher: 'Unknown',\n\t\t\t\t\tversion: 'Unknown',\n\t\t\t\t\trepositoryUrl: undefined,\n\t\t\t\t\tbugsUrl: undefined,\n\t\t\t\t\textensionData: `Extensions not loaded: ${e}`,\n\t\t\t\t\tdisplayName: `Extensions not loaded: ${e}`,\n\t\t\t\t\tid: 'workbench.issue',\n\t\t\t\t\tisTheme: false,\n\t\t\t\t\tisBuiltin: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst issueReporterData: IssueReporterData = Object.assign({\n\t\t\t\tstyles: getIssueReporterStyles(theme),\n\t\t\t\tzoomLevel: getZoomLevel(mainWindow),\n\t\t\t\tenabledExtensions: extensionData,\n\t\t\t\texperiments: experiments?.join('\\n'),\n\t\t\t\trestrictedMode: !this.workspaceTrustManagementService.isWorkspaceTrusted(),\n\t\t\t\tisUnsupported,\n\t\t\t\tgithubAccessToken\n\t\t\t}, options);\n\n\t\t\treturn this.issueFormService.openReporter(issueReporterData);\n\t\t}\n\t\tthrow new Error(`No issue reporting URL configured for ${this.productService.nameLong}.`);\n\n\t}\n\n\tprivate getExtensionGitHubUrl(extension: IExtensionDescription): string {\n\t\tif (extension.isBuiltin && this.productService.reportIssueUrl) {\n\t\t\treturn normalizeGitHubUrl(this.productService.reportIssueUrl);\n\t\t}\n\n\t\tlet repositoryUrl = '';\n\n\t\tconst bugsUrl = extension?.bugs?.url;\n\t\tconst extensionUrl = extension?.repository?.url;\n\n\t\t// If given, try to match the extension's bug url\n\t\tif (bugsUrl && bugsUrl.match(/^https?:\\/\\/github\\.com\\/(.*)/)) {\n\t\t\trepositoryUrl = normalizeGitHubUrl(bugsUrl);\n\t\t} else if (extensionUrl && extensionUrl.match(/^https?:\\/\\/github\\.com\\/(.*)/)) {\n\t\t\trepositoryUrl = normalizeGitHubUrl(extensionUrl);\n\t\t}\n\n\t\treturn repositoryUrl;\n\t}\n\n\tprivate getIssueUriFromStaticContent(baseUri: string, extension?: IExtensionDescription): string {\n\t\tconst issueDescription = `ADD ISSUE DESCRIPTION HERE\n\nVersion: ${this.productService.version}\nCommit: ${this.productService.commit ?? 'unknown'}\nUser Agent: ${userAgent ?? 'unknown'}\nEmbedder: ${this.productService.embedderIdentifier ?? 'unknown'}\n${extension?.version ? `\\nExtension version: ${extension.version}` : ''}\n<!-- generated by web issue reporter -->`;\n\n\t\treturn `${baseUri}?body=${encodeURIComponent(issueDescription)}&labels=web`;\n\t}\n}\n\nexport function getIssueReporterStyles(theme: IColorTheme): IssueReporterStyles {\n\treturn {\n\t\tbackgroundColor: getColor(theme, SIDE_BAR_BACKGROUND),\n\t\tcolor: getColor(theme, foreground),\n\t\ttextLinkColor: getColor(theme, textLinkForeground),\n\t\ttextLinkActiveForeground: getColor(theme, textLinkActiveForeground),\n\t\tinputBackground: getColor(theme, inputBackground),\n\t\tinputForeground: getColor(theme, inputForeground),\n\t\tinputBorder: getColor(theme, inputBorder),\n\t\tinputActiveBorder: getColor(theme, inputActiveOptionBorder),\n\t\tinputErrorBorder: getColor(theme, inputValidationErrorBorder),\n\t\tinputErrorBackground: getColor(theme, inputValidationErrorBackground),\n\t\tinputErrorForeground: getColor(theme, inputValidationErrorForeground),\n\t\tbuttonBackground: getColor(theme, buttonBackground),\n\t\tbuttonForeground: getColor(theme, buttonForeground),\n\t\tbuttonHoverBackground: getColor(theme, buttonHoverBackground),\n\t\tsliderActiveColor: getColor(theme, scrollbarSliderActiveBackground),\n\t\tsliderBackgroundColor: getColor(theme, scrollbarSliderBackground),\n\t\tsliderHoverColor: getColor(theme, scrollbarSliderHoverBackground),\n\t};\n}\n\nfunction getColor(theme: IColorTheme, key: string): string | undefined {\n\tconst color = theme.getColor(key);\n\treturn color ? color.toString() : undefined;\n}\n\nregisterSingleton(IWorkbenchIssueService, BrowserIssueService, InstantiationType.Delayed);\n"]}