{"version":3,"sources":["vs/workbench/contrib/issue/browser/issueFormService.ts"],"names":[],"mappings":"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","file":"issueFormService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { safeSetInnerHtml } from '../../../../base/browser/domSanitize.js';\nimport { createStyleSheet } from '../../../../base/browser/domStylesheets.js';\nimport { getMenuWidgetCSS, Menu, unthemedMenuStyles } from '../../../../base/browser/ui/menu/menu.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isLinux, isWindows } from '../../../../base/common/platform.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { localize } from '../../../../nls.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { ExtensionIdentifier, ExtensionIdentifierSet } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport product from '../../../../platform/product/common/product.js';\nimport { IRectangle } from '../../../../platform/window/common/window.js';\nimport { AuxiliaryWindowMode, IAuxiliaryWindowService } from '../../../services/auxiliaryWindow/browser/auxiliaryWindowService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IIssueFormService, IssueReporterData } from '../common/issue.js';\nimport BaseHtml from './issueReporterPage.js';\nimport { IssueWebReporter } from './issueReporterService.js';\nimport './media/issueReporter.css';\n\nexport interface IssuePassData {\n\tissueTitle: string;\n\tissueBody: string;\n}\n\nexport class IssueFormService implements IIssueFormService {\n\n\treadonly _serviceBrand: undefined;\n\n\tprotected currentData: IssueReporterData | undefined;\n\n\tprotected issueReporterWindow: Window | null = null;\n\tprotected extensionIdentifierSet: ExtensionIdentifierSet = new ExtensionIdentifierSet();\n\n\tprotected arch: string = '';\n\tprotected release: string = '';\n\tprotected type: string = '';\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IAuxiliaryWindowService protected readonly auxiliaryWindowService: IAuxiliaryWindowService,\n\t\t@IMenuService protected readonly menuService: IMenuService,\n\t\t@IContextKeyService protected readonly contextKeyService: IContextKeyService,\n\t\t@ILogService protected readonly logService: ILogService,\n\t\t@IDialogService protected readonly dialogService: IDialogService,\n\t\t@IHostService protected readonly hostService: IHostService\n\t) { }\n\n\tasync openReporter(data: IssueReporterData): Promise<void> {\n\t\tif (this.hasToReload(data)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.openAuxIssueReporter(data);\n\n\t\tif (this.issueReporterWindow) {\n\t\t\tconst issueReporter = this.instantiationService.createInstance(IssueWebReporter, false, data, { type: this.type, arch: this.arch, release: this.release }, product, this.issueReporterWindow);\n\t\t\tissueReporter.render();\n\t\t}\n\t}\n\n\tasync openAuxIssueReporter(data: IssueReporterData, bounds?: IRectangle): Promise<void> {\n\n\t\tlet issueReporterBounds: Partial<IRectangle> = { width: 700, height: 800 };\n\n\t\t// Center Issue Reporter Window based on bounds from native host service\n\t\tif (bounds && bounds.x && bounds.y) {\n\t\t\tconst centerX = bounds.x + bounds.width / 2;\n\t\t\tconst centerY = bounds.y + bounds.height / 2;\n\t\t\tissueReporterBounds = { ...issueReporterBounds, x: centerX - 350, y: centerY - 400 };\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\t// Auxiliary Window\n\t\tconst auxiliaryWindow = disposables.add(await this.auxiliaryWindowService.open({ mode: AuxiliaryWindowMode.Normal, bounds: issueReporterBounds, nativeTitlebar: true, disableFullscreen: true }));\n\n\t\tconst platformClass = isWindows ? 'windows' : isLinux ? 'linux' : 'mac';\n\n\t\tif (auxiliaryWindow) {\n\t\t\tawait auxiliaryWindow.whenStylesHaveLoaded;\n\t\t\tauxiliaryWindow.window.document.title = 'Issue Reporter';\n\t\t\tauxiliaryWindow.window.document.body.classList.add('issue-reporter-body', 'monaco-workbench', platformClass);\n\n\t\t\t// removes preset monaco-workbench container\n\t\t\tauxiliaryWindow.container.remove();\n\n\t\t\t// The Menu class uses a static globalStyleSheet that's created lazily on first menu creation.\n\t\t\t// Since auxiliary windows clone stylesheets from main window, but Menu.globalStyleSheet\n\t\t\t// may not exist yet in main window, we need to ensure menu styles are available here.\n\t\t\tif (!Menu.globalStyleSheet) {\n\t\t\t\tconst menuStyleSheet = createStyleSheet(auxiliaryWindow.window.document.head);\n\t\t\t\tmenuStyleSheet.textContent = getMenuWidgetCSS(unthemedMenuStyles, false);\n\t\t\t}\n\n\t\t\t// custom issue reporter wrapper that preserves critical auxiliary window container styles\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.classList.add('monaco-workbench');\n\t\t\tauxiliaryWindow.window.document.body.appendChild(div);\n\t\t\tsafeSetInnerHtml(div, BaseHtml(), {\n\t\t\t\t// Also allow input elements\n\t\t\t\tallowedTags: {\n\t\t\t\t\taugment: [\n\t\t\t\t\t\t'input',\n\t\t\t\t\t\t'select',\n\t\t\t\t\t\t'checkbox',\n\t\t\t\t\t\t'textarea',\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tallowedAttributes: {\n\t\t\t\t\taugment: [\n\t\t\t\t\t\t'id',\n\t\t\t\t\t\t'class',\n\t\t\t\t\t\t'style',\n\t\t\t\t\t\t'textarea',\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.issueReporterWindow = auxiliaryWindow.window;\n\t\t} else {\n\t\t\tconsole.error('Failed to open auxiliary window');\n\t\t\tdisposables.dispose();\n\t\t}\n\n\t\t// handle closing issue reporter\n\t\tthis.issueReporterWindow?.addEventListener('beforeunload', () => {\n\t\t\tauxiliaryWindow.window.close();\n\t\t\tdisposables.dispose();\n\t\t\tthis.issueReporterWindow = null;\n\t\t});\n\t}\n\n\tasync sendReporterMenu(extensionId: string): Promise<IssueReporterData | undefined> {\n\t\tconst menu = this.menuService.createMenu(MenuId.IssueReporter, this.contextKeyService);\n\n\t\t// render menu and dispose\n\t\tconst actions = menu.getActions({ renderShortTitle: true }).flatMap(entry => entry[1]);\n\t\tfor (const action of actions) {\n\t\t\ttry {\n\t\t\t\tif (action.item && 'source' in action.item && action.item.source?.id.toLowerCase() === extensionId.toLowerCase()) {\n\t\t\t\t\tthis.extensionIdentifierSet.add(extensionId.toLowerCase());\n\t\t\t\t\tawait action.run();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.extensionIdentifierSet.has(extensionId)) {\n\t\t\t// send undefined to indicate no action was taken\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// we found the extension, now we clean up the menu and remove it from the set. This is to ensure that we do duplicate extension identifiers\n\t\tthis.extensionIdentifierSet.delete(new ExtensionIdentifier(extensionId));\n\t\tmenu.dispose();\n\n\t\tconst result = this.currentData;\n\n\t\t// reset current data.\n\t\tthis.currentData = undefined;\n\n\t\treturn result ?? undefined;\n\t}\n\n\t//#region used by issue reporter\n\n\tasync closeReporter(): Promise<void> {\n\t\tthis.issueReporterWindow?.close();\n\t}\n\n\tasync reloadWithExtensionsDisabled(): Promise<void> {\n\t\tif (this.issueReporterWindow) {\n\t\t\ttry {\n\t\t\t\tawait this.hostService.reload({ disableExtensions: true });\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync showConfirmCloseDialog(): Promise<void> {\n\t\tawait this.dialogService.prompt({\n\t\t\ttype: Severity.Warning,\n\t\t\tmessage: localize('confirmCloseIssueReporter', \"Your input will not be saved. Are you sure you want to close this window?\"),\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: localize({ key: 'yes', comment: ['&& denotes a mnemonic'] }, \"&&Yes\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthis.closeReporter();\n\t\t\t\t\t\tthis.issueReporterWindow = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('cancel', \"Cancel\"),\n\t\t\t\t\trun: () => { }\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync showClipboardDialog(): Promise<boolean> {\n\t\tlet result = false;\n\n\t\tawait this.dialogService.prompt({\n\t\t\ttype: Severity.Warning,\n\t\t\tmessage: localize('issueReporterWriteToClipboard', \"There is too much data to send to GitHub directly. The data will be copied to the clipboard, please paste it into the GitHub issue page that is opened.\"),\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: localize({ key: 'ok', comment: ['&& denotes a mnemonic'] }, \"&&OK\"),\n\t\t\t\t\trun: () => { result = true; }\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('cancel', \"Cancel\"),\n\t\t\t\t\trun: () => { result = false; }\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\treturn result;\n\t}\n\n\thasToReload(data: IssueReporterData): boolean {\n\t\tif (data.extensionId && this.extensionIdentifierSet.has(data.extensionId)) {\n\t\t\tthis.currentData = data;\n\t\t\tthis.issueReporterWindow?.focus();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.issueReporterWindow) {\n\t\t\tthis.issueReporterWindow.focus();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n"]}