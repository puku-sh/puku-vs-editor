{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/issue/browser/issueReporterModel.ts","vs/workbench/contrib/issue/browser/issueReporterModel.ts"],"names":[],"mappings":"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","file":"issueReporterModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { isRemoteDiagnosticError, SystemInfo } from '../../../../platform/diagnostics/common/diagnostics.js';\nimport { ISettingSearchResult, IssueReporterExtensionData, IssueType } from '../common/issue.js';\n\nexport interface IssueReporterData {\n\tissueType: IssueType;\n\tissueDescription?: string;\n\tissueTitle?: string;\n\textensionData?: string;\n\n\tversionInfo?: any;\n\tsystemInfo?: SystemInfo;\n\tsystemInfoWeb?: string;\n\tprocessInfo?: string;\n\tworkspaceInfo?: string;\n\n\tincludeSystemInfo: boolean;\n\tincludeWorkspaceInfo: boolean;\n\tincludeProcessInfo: boolean;\n\tincludeExtensions: boolean;\n\tincludeExperiments: boolean;\n\tincludeExtensionData: boolean;\n\n\tnumberOfThemeExtesions?: number;\n\tallExtensions: IssueReporterExtensionData[];\n\tenabledNonThemeExtesions?: IssueReporterExtensionData[];\n\textensionsDisabled?: boolean;\n\tfileOnExtension?: boolean;\n\tfileOnMarketplace?: boolean;\n\tfileOnProduct?: boolean;\n\tselectedExtension?: IssueReporterExtensionData;\n\tactualSearchResults?: ISettingSearchResult[];\n\tquery?: string;\n\tfilterResultCount?: number;\n\texperimentInfo?: string;\n\trestrictedMode?: boolean;\n\tisUnsupported?: boolean;\n}\n\nexport class IssueReporterModel {\n\tprivate readonly _data: IssueReporterData;\n\n\tconstructor(initialData?: Partial<IssueReporterData>) {\n\t\tconst defaultData = {\n\t\t\tissueType: IssueType.Bug,\n\t\t\tincludeSystemInfo: true,\n\t\t\tincludeWorkspaceInfo: true,\n\t\t\tincludeProcessInfo: true,\n\t\t\tincludeExtensions: true,\n\t\t\tincludeExperiments: true,\n\t\t\tincludeExtensionData: true,\n\t\t\tallExtensions: []\n\t\t};\n\n\t\tthis._data = initialData ? Object.assign(defaultData, initialData) : defaultData;\n\n\t\tmainWindow.addEventListener('message', async (event) => {\n\t\t\tif (event.data && event.data.sendChannel === 'vscode:triggerIssueData') {\n\t\t\t\tmainWindow.postMessage({\n\t\t\t\t\tdata: { issueBody: this._data.issueDescription, issueTitle: this._data.issueTitle },\n\t\t\t\t\treplyChannel: 'vscode:triggerIssueDataResponse'\n\t\t\t\t}, '*');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(): IssueReporterData {\n\t\treturn this._data;\n\t}\n\n\tupdate(newData: Partial<IssueReporterData>): void {\n\t\tObject.assign(this._data, newData);\n\t}\n\n\tserialize(): string {\n\t\tconst modes = [];\n\t\tif (this._data.restrictedMode) {\n\t\t\tmodes.push('Restricted');\n\t\t}\n\t\tif (this._data.isUnsupported) {\n\t\t\tmodes.push('Unsupported');\n\t\t}\n\t\treturn `\nType: <b>${this.getIssueTypeTitle()}</b>\n\n${this._data.issueDescription}\n${this.getExtensionVersion()}\nVS Code version: ${this._data.versionInfo && this._data.versionInfo.vscodeVersion}\nOS version: ${this._data.versionInfo && this._data.versionInfo.os}\nModes:${modes.length ? ' ' + modes.join(', ') : ''}\n${this.getRemoteOSes()}\n${this.getInfos()}\n<!-- generated by issue reporter -->`;\n\t}\n\n\tprivate getRemoteOSes(): string {\n\t\tif (this._data.systemInfo && this._data.systemInfo.remoteData.length) {\n\t\t\treturn this._data.systemInfo.remoteData\n\t\t\t\t.map(remote => isRemoteDiagnosticError(remote) ? remote.errorMessage : `Remote OS version: ${remote.machineInfo.os}`).join('\\n') + '\\n';\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tfileOnExtension(): boolean | undefined {\n\t\tconst fileOnExtensionSupported = this._data.issueType === IssueType.Bug\n\t\t\t|| this._data.issueType === IssueType.PerformanceIssue\n\t\t\t|| this._data.issueType === IssueType.FeatureRequest;\n\n\t\treturn fileOnExtensionSupported && this._data.fileOnExtension;\n\t}\n\n\tprivate getExtensionVersion(): string {\n\t\tif (this.fileOnExtension() && this._data.selectedExtension) {\n\t\t\treturn `\\nExtension version: ${this._data.selectedExtension.version}`;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tprivate getIssueTypeTitle(): string {\n\t\tif (this._data.issueType === IssueType.Bug) {\n\t\t\treturn 'Bug';\n\t\t} else if (this._data.issueType === IssueType.PerformanceIssue) {\n\t\t\treturn 'Performance Issue';\n\t\t} else {\n\t\t\treturn 'Feature Request';\n\t\t}\n\t}\n\n\tprivate getInfos(): string {\n\t\tlet info = '';\n\n\t\tif (this._data.fileOnMarketplace) {\n\t\t\treturn info;\n\t\t}\n\n\t\tconst isBugOrPerformanceIssue = this._data.issueType === IssueType.Bug || this._data.issueType === IssueType.PerformanceIssue;\n\n\t\tif (isBugOrPerformanceIssue) {\n\t\t\tif (this._data.includeExtensionData && this._data.extensionData) {\n\t\t\t\tinfo += this.getExtensionData();\n\t\t\t}\n\n\t\t\tif (this._data.includeSystemInfo && this._data.systemInfo) {\n\t\t\t\tinfo += this.generateSystemInfoMd();\n\t\t\t}\n\n\t\t\tif (this._data.includeSystemInfo && this._data.systemInfoWeb) {\n\t\t\t\tinfo += 'System Info: ' + this._data.systemInfoWeb;\n\t\t\t}\n\t\t}\n\n\t\tif (this._data.issueType === IssueType.PerformanceIssue) {\n\t\t\tif (this._data.includeProcessInfo) {\n\t\t\t\tinfo += this.generateProcessInfoMd();\n\t\t\t}\n\n\t\t\tif (this._data.includeWorkspaceInfo) {\n\t\t\t\tinfo += this.generateWorkspaceInfoMd();\n\t\t\t}\n\t\t}\n\n\t\tif (isBugOrPerformanceIssue) {\n\t\t\tif (!this._data.fileOnExtension && this._data.includeExtensions) {\n\t\t\t\tinfo += this.generateExtensionsMd();\n\t\t\t}\n\n\t\t\tif (this._data.includeExperiments && this._data.experimentInfo) {\n\t\t\t\tinfo += this.generateExperimentsInfoMd();\n\t\t\t}\n\t\t}\n\n\t\treturn info;\n\t}\n\n\tprivate getExtensionData(): string {\n\t\treturn this._data.extensionData ?? '';\n\t}\n\n\tprivate generateSystemInfoMd(): string {\n\t\tlet md = `<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n`;\n\n\t\tif (this._data.systemInfo) {\n\n\t\t\tmd += `|CPUs|${this._data.systemInfo.cpus}|\n|GPU Status|${Object.keys(this._data.systemInfo.gpuStatus).map(key => `${key}: ${this._data.systemInfo!.gpuStatus[key]}`).join('<br>')}|\n|Load (avg)|${this._data.systemInfo.load}|\n|Memory (System)|${this._data.systemInfo.memory}|\n|Process Argv|${this._data.systemInfo.processArgs.replace(/\\\\/g, '\\\\\\\\')}|\n|Screen Reader|${this._data.systemInfo.screenReader}|\n|VM|${this._data.systemInfo.vmHint}|`;\n\n\t\t\tif (this._data.systemInfo.linuxEnv) {\n\t\t\t\tmd += `\\n|DESKTOP_SESSION|${this._data.systemInfo.linuxEnv.desktopSession}|\n|XDG_CURRENT_DESKTOP|${this._data.systemInfo.linuxEnv.xdgCurrentDesktop}|\n|XDG_SESSION_DESKTOP|${this._data.systemInfo.linuxEnv.xdgSessionDesktop}|\n|XDG_SESSION_TYPE|${this._data.systemInfo.linuxEnv.xdgSessionType}|`;\n\t\t\t}\n\n\t\t\tthis._data.systemInfo.remoteData.forEach(remote => {\n\t\t\t\tif (isRemoteDiagnosticError(remote)) {\n\t\t\t\t\tmd += `\\n\\n${remote.errorMessage}`;\n\t\t\t\t} else {\n\t\t\t\t\tmd += `\n\n|Item|Value|\n|---|---|\n|Remote|${remote.latency ? `${remote.hostName} (latency: ${remote.latency.current.toFixed(2)}ms last, ${remote.latency.average.toFixed(2)}ms average)` : remote.hostName}|\n|OS|${remote.machineInfo.os}|\n|CPUs|${remote.machineInfo.cpus}|\n|Memory (System)|${remote.machineInfo.memory}|\n|VM|${remote.machineInfo.vmHint}|`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tmd += '\\n</details>';\n\n\t\treturn md;\n\t}\n\n\tprivate generateProcessInfoMd(): string {\n\t\treturn `<details>\n<summary>Process Info</summary>\n\n\\`\\`\\`\n${this._data.processInfo}\n\\`\\`\\`\n\n</details>\n`;\n\t}\n\n\tprivate generateWorkspaceInfoMd(): string {\n\t\treturn `<details>\n<summary>Workspace Info</summary>\n\n\\`\\`\\`\n${this._data.workspaceInfo};\n\\`\\`\\`\n\n</details>\n`;\n\t}\n\n\tprivate generateExperimentsInfoMd(): string {\n\t\treturn `<details>\n<summary>A/B Experiments</summary>\n\n\\`\\`\\`\n${this._data.experimentInfo}\n\\`\\`\\`\n\n</details>\n`;\n\t}\n\n\tprivate generateExtensionsMd(): string {\n\t\tif (this._data.extensionsDisabled) {\n\t\t\treturn 'Extensions disabled';\n\t\t}\n\n\t\tconst themeExclusionStr = this._data.numberOfThemeExtesions ? `\\n(${this._data.numberOfThemeExtesions} theme extensions excluded)` : '';\n\n\t\tif (!this._data.enabledNonThemeExtesions) {\n\t\t\treturn 'Extensions: none' + themeExclusionStr;\n\t\t}\n\n\t\tconst tableHeader = `Extension|Author (truncated)|Version\n---|---|---`;\n\t\tconst table = this._data.enabledNonThemeExtesions.map(e => {\n\t\t\treturn `${e.name}|${e.publisher?.substr(0, 3) ?? 'N/A'}|${e.version}`;\n\t\t}).join('\\n');\n\n\t\treturn `<details><summary>Extensions (${this._data.enabledNonThemeExtesions.length})</summary>\n\n${tableHeader}\n${table}\n${themeExclusionStr}\n\n</details>`;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { isRemoteDiagnosticError, SystemInfo } from '../../../../platform/diagnostics/common/diagnostics.js';\nimport { ISettingSearchResult, IssueReporterExtensionData, IssueType } from '../common/issue.js';\n\nexport interface IssueReporterData {\n\tissueType: IssueType;\n\tissueDescription?: string;\n\tissueTitle?: string;\n\textensionData?: string;\n\n\tversionInfo?: any;\n\tsystemInfo?: SystemInfo;\n\tsystemInfoWeb?: string;\n\tprocessInfo?: string;\n\tworkspaceInfo?: string;\n\n\tincludeSystemInfo: boolean;\n\tincludeWorkspaceInfo: boolean;\n\tincludeProcessInfo: boolean;\n\tincludeExtensions: boolean;\n\tincludeExperiments: boolean;\n\tincludeExtensionData: boolean;\n\n\tnumberOfThemeExtesions?: number;\n\tallExtensions: IssueReporterExtensionData[];\n\tenabledNonThemeExtesions?: IssueReporterExtensionData[];\n\textensionsDisabled?: boolean;\n\tfileOnExtension?: boolean;\n\tfileOnMarketplace?: boolean;\n\tfileOnProduct?: boolean;\n\tselectedExtension?: IssueReporterExtensionData;\n\tactualSearchResults?: ISettingSearchResult[];\n\tquery?: string;\n\tfilterResultCount?: number;\n\texperimentInfo?: string;\n\trestrictedMode?: boolean;\n\tisUnsupported?: boolean;\n}\n\nexport class IssueReporterModel {\n\tprivate readonly _data: IssueReporterData;\n\n\tconstructor(initialData?: Partial<IssueReporterData>) {\n\t\tconst defaultData = {\n\t\t\tissueType: IssueType.Bug,\n\t\t\tincludeSystemInfo: true,\n\t\t\tincludeWorkspaceInfo: true,\n\t\t\tincludeProcessInfo: true,\n\t\t\tincludeExtensions: true,\n\t\t\tincludeExperiments: true,\n\t\t\tincludeExtensionData: true,\n\t\t\tallExtensions: []\n\t\t};\n\n\t\tthis._data = initialData ? Object.assign(defaultData, initialData) : defaultData;\n\n\t\tmainWindow.addEventListener('message', async (event) => {\n\t\t\tif (event.data && event.data.sendChannel === 'vscode:triggerIssueData') {\n\t\t\t\tmainWindow.postMessage({\n\t\t\t\t\tdata: { issueBody: this._data.issueDescription, issueTitle: this._data.issueTitle },\n\t\t\t\t\treplyChannel: 'vscode:triggerIssueDataResponse'\n\t\t\t\t}, '*');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetData(): IssueReporterData {\n\t\treturn this._data;\n\t}\n\n\tupdate(newData: Partial<IssueReporterData>): void {\n\t\tObject.assign(this._data, newData);\n\t}\n\n\tserialize(): string {\n\t\tconst modes = [];\n\t\tif (this._data.restrictedMode) {\n\t\t\tmodes.push('Restricted');\n\t\t}\n\t\tif (this._data.isUnsupported) {\n\t\t\tmodes.push('Unsupported');\n\t\t}\n\t\treturn `\nType: <b>${this.getIssueTypeTitle()}</b>\n\n${this._data.issueDescription}\n${this.getExtensionVersion()}\nVS Code version: ${this._data.versionInfo && this._data.versionInfo.vscodeVersion}\nOS version: ${this._data.versionInfo && this._data.versionInfo.os}\nModes:${modes.length ? ' ' + modes.join(', ') : ''}\n${this.getRemoteOSes()}\n${this.getInfos()}\n<!-- generated by issue reporter -->`;\n\t}\n\n\tprivate getRemoteOSes(): string {\n\t\tif (this._data.systemInfo && this._data.systemInfo.remoteData.length) {\n\t\t\treturn this._data.systemInfo.remoteData\n\t\t\t\t.map(remote => isRemoteDiagnosticError(remote) ? remote.errorMessage : `Remote OS version: ${remote.machineInfo.os}`).join('\\n') + '\\n';\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tfileOnExtension(): boolean | undefined {\n\t\tconst fileOnExtensionSupported = this._data.issueType === IssueType.Bug\n\t\t\t|| this._data.issueType === IssueType.PerformanceIssue\n\t\t\t|| this._data.issueType === IssueType.FeatureRequest;\n\n\t\treturn fileOnExtensionSupported && this._data.fileOnExtension;\n\t}\n\n\tprivate getExtensionVersion(): string {\n\t\tif (this.fileOnExtension() && this._data.selectedExtension) {\n\t\t\treturn `\\nExtension version: ${this._data.selectedExtension.version}`;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tprivate getIssueTypeTitle(): string {\n\t\tif (this._data.issueType === IssueType.Bug) {\n\t\t\treturn 'Bug';\n\t\t} else if (this._data.issueType === IssueType.PerformanceIssue) {\n\t\t\treturn 'Performance Issue';\n\t\t} else {\n\t\t\treturn 'Feature Request';\n\t\t}\n\t}\n\n\tprivate getInfos(): string {\n\t\tlet info = '';\n\n\t\tif (this._data.fileOnMarketplace) {\n\t\t\treturn info;\n\t\t}\n\n\t\tconst isBugOrPerformanceIssue = this._data.issueType === IssueType.Bug || this._data.issueType === IssueType.PerformanceIssue;\n\n\t\tif (isBugOrPerformanceIssue) {\n\t\t\tif (this._data.includeExtensionData && this._data.extensionData) {\n\t\t\t\tinfo += this.getExtensionData();\n\t\t\t}\n\n\t\t\tif (this._data.includeSystemInfo && this._data.systemInfo) {\n\t\t\t\tinfo += this.generateSystemInfoMd();\n\t\t\t}\n\n\t\t\tif (this._data.includeSystemInfo && this._data.systemInfoWeb) {\n\t\t\t\tinfo += 'System Info: ' + this._data.systemInfoWeb;\n\t\t\t}\n\t\t}\n\n\t\tif (this._data.issueType === IssueType.PerformanceIssue) {\n\t\t\tif (this._data.includeProcessInfo) {\n\t\t\t\tinfo += this.generateProcessInfoMd();\n\t\t\t}\n\n\t\t\tif (this._data.includeWorkspaceInfo) {\n\t\t\t\tinfo += this.generateWorkspaceInfoMd();\n\t\t\t}\n\t\t}\n\n\t\tif (isBugOrPerformanceIssue) {\n\t\t\tif (!this._data.fileOnExtension && this._data.includeExtensions) {\n\t\t\t\tinfo += this.generateExtensionsMd();\n\t\t\t}\n\n\t\t\tif (this._data.includeExperiments && this._data.experimentInfo) {\n\t\t\t\tinfo += this.generateExperimentsInfoMd();\n\t\t\t}\n\t\t}\n\n\t\treturn info;\n\t}\n\n\tprivate getExtensionData(): string {\n\t\treturn this._data.extensionData ?? '';\n\t}\n\n\tprivate generateSystemInfoMd(): string {\n\t\tlet md = `<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n`;\n\n\t\tif (this._data.systemInfo) {\n\n\t\t\tmd += `|CPUs|${this._data.systemInfo.cpus}|\n|GPU Status|${Object.keys(this._data.systemInfo.gpuStatus).map(key => `${key}: ${this._data.systemInfo!.gpuStatus[key]}`).join('<br>')}|\n|Load (avg)|${this._data.systemInfo.load}|\n|Memory (System)|${this._data.systemInfo.memory}|\n|Process Argv|${this._data.systemInfo.processArgs.replace(/\\\\/g, '\\\\\\\\')}|\n|Screen Reader|${this._data.systemInfo.screenReader}|\n|VM|${this._data.systemInfo.vmHint}|`;\n\n\t\t\tif (this._data.systemInfo.linuxEnv) {\n\t\t\t\tmd += `\\n|DESKTOP_SESSION|${this._data.systemInfo.linuxEnv.desktopSession}|\n|XDG_CURRENT_DESKTOP|${this._data.systemInfo.linuxEnv.xdgCurrentDesktop}|\n|XDG_SESSION_DESKTOP|${this._data.systemInfo.linuxEnv.xdgSessionDesktop}|\n|XDG_SESSION_TYPE|${this._data.systemInfo.linuxEnv.xdgSessionType}|`;\n\t\t\t}\n\n\t\t\tthis._data.systemInfo.remoteData.forEach(remote => {\n\t\t\t\tif (isRemoteDiagnosticError(remote)) {\n\t\t\t\t\tmd += `\\n\\n${remote.errorMessage}`;\n\t\t\t\t} else {\n\t\t\t\t\tmd += `\n\n|Item|Value|\n|---|---|\n|Remote|${remote.latency ? `${remote.hostName} (latency: ${remote.latency.current.toFixed(2)}ms last, ${remote.latency.average.toFixed(2)}ms average)` : remote.hostName}|\n|OS|${remote.machineInfo.os}|\n|CPUs|${remote.machineInfo.cpus}|\n|Memory (System)|${remote.machineInfo.memory}|\n|VM|${remote.machineInfo.vmHint}|`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tmd += '\\n</details>';\n\n\t\treturn md;\n\t}\n\n\tprivate generateProcessInfoMd(): string {\n\t\treturn `<details>\n<summary>Process Info</summary>\n\n\\`\\`\\`\n${this._data.processInfo}\n\\`\\`\\`\n\n</details>\n`;\n\t}\n\n\tprivate generateWorkspaceInfoMd(): string {\n\t\treturn `<details>\n<summary>Workspace Info</summary>\n\n\\`\\`\\`\n${this._data.workspaceInfo};\n\\`\\`\\`\n\n</details>\n`;\n\t}\n\n\tprivate generateExperimentsInfoMd(): string {\n\t\treturn `<details>\n<summary>A/B Experiments</summary>\n\n\\`\\`\\`\n${this._data.experimentInfo}\n\\`\\`\\`\n\n</details>\n`;\n\t}\n\n\tprivate generateExtensionsMd(): string {\n\t\tif (this._data.extensionsDisabled) {\n\t\t\treturn 'Extensions disabled';\n\t\t}\n\n\t\tconst themeExclusionStr = this._data.numberOfThemeExtesions ? `\\n(${this._data.numberOfThemeExtesions} theme extensions excluded)` : '';\n\n\t\tif (!this._data.enabledNonThemeExtesions) {\n\t\t\treturn 'Extensions: none' + themeExclusionStr;\n\t\t}\n\n\t\tconst tableHeader = `Extension|Author (truncated)|Version\n---|---|---`;\n\t\tconst table = this._data.enabledNonThemeExtesions.map(e => {\n\t\t\treturn `${e.name}|${e.publisher?.substr(0, 3) ?? 'N/A'}|${e.version}`;\n\t\t}).join('\\n');\n\n\t\treturn `<details><summary>Extensions (${this._data.enabledNonThemeExtesions.length})</summary>\n\n${tableHeader}\n${table}\n${themeExclusionStr}\n\n</details>`;\n\t}\n}\n"]}