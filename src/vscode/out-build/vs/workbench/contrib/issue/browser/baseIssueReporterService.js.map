{"version":3,"sources":["vs/workbench/contrib/issue/browser/baseIssueReporterService.ts"],"names":[],"mappings":"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","file":"baseIssueReporterService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, isHTMLInputElement, isHTMLTextAreaElement, reset } from '../../../../base/browser/dom.js';\nimport { createStyleSheet } from '../../../../base/browser/domStylesheets.js';\nimport { Button, ButtonWithDropdown, unthemedButtonStyles } from '../../../../base/browser/ui/button/button.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { groupBy } from '../../../../base/common/collections.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { CancellationError } from '../../../../base/common/errors.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { isLinuxSnap, isMacintosh } from '../../../../base/common/platform.js';\nimport { IProductConfiguration } from '../../../../base/common/product.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { escape } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { localize } from '../../../../nls.js';\nimport { IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { getIconsStyleSheet } from '../../../../platform/theme/browser/iconsStyleSheet.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IIssueFormService, IssueReporterData, IssueReporterExtensionData, IssueType } from '../common/issue.js';\nimport { normalizeGitHubUrl } from '../common/issueReporterUtil.js';\nimport { IssueReporterModel, IssueReporterData as IssueReporterModelData } from './issueReporterModel.js';\nimport { IAuthenticationService } from '../../../services/authentication/common/authentication.js';\n\nconst MAX_URL_LENGTH = 7500;\n\n// Github API and issues on web has a limit of 65536. If extension data is too large, we will allow users to downlaod and attach it as a file.\n// We round down to be safe.\n// ref https://github.com/github/issues/issues/12858\n\nconst MAX_EXTENSION_DATA_LENGTH = 60000;\n\ninterface SearchResult {\n\thtml_url: string;\n\ttitle: string;\n\tstate?: string;\n}\n\nenum IssueSource {\n\tVSCode = 'vscode',\n\tExtension = 'extension',\n\tMarketplace = 'marketplace',\n\tUnknown = 'unknown'\n}\n\n\nexport class BaseIssueReporterService extends Disposable {\n\tpublic issueReporterModel: IssueReporterModel;\n\tpublic receivedSystemInfo = false;\n\tpublic numberOfSearchResultsDisplayed = 0;\n\tpublic receivedPerformanceInfo = false;\n\tpublic shouldQueueSearch = false;\n\tpublic hasBeenSubmitted = false;\n\tpublic openReporter = false;\n\tpublic loadingExtensionData = false;\n\tpublic selectedExtension = '';\n\tpublic delayedSubmit = new Delayer<void>(300);\n\tpublic publicGithubButton!: Button | ButtonWithDropdown;\n\tpublic internalGithubButton!: Button | ButtonWithDropdown;\n\tpublic nonGitHubIssueUrl = false;\n\tpublic needsUpdate = false;\n\tpublic acknowledged = false;\n\tprivate createAction: Action;\n\tprivate previewAction: Action;\n\tprivate privateAction: Action;\n\n\tconstructor(\n\t\tpublic disableExtensions: boolean,\n\t\tpublic data: IssueReporterData,\n\t\tpublic os: {\n\t\t\ttype: string;\n\t\t\tarch: string;\n\t\t\trelease: string;\n\t\t},\n\t\tpublic product: IProductConfiguration,\n\t\tpublic readonly window: Window,\n\t\tpublic readonly isWeb: boolean,\n\t\t@IIssueFormService public readonly issueFormService: IIssueFormService,\n\t\t@IThemeService public readonly themeService: IThemeService,\n\t\t@IFileService public readonly fileService: IFileService,\n\t\t@IFileDialogService public readonly fileDialogService: IFileDialogService,\n\t\t@IContextMenuService public readonly contextMenuService: IContextMenuService,\n\t\t@IAuthenticationService public readonly authenticationService: IAuthenticationService,\n\t\t@IOpenerService public readonly openerService: IOpenerService\n\t) {\n\t\tsuper();\n\t\tconst targetExtension = data.extensionId ? data.enabledExtensions.find(extension => extension.id.toLocaleLowerCase() === data.extensionId?.toLocaleLowerCase()) : undefined;\n\t\tthis.issueReporterModel = new IssueReporterModel({\n\t\t\t...data,\n\t\t\tissueType: data.issueType || IssueType.Bug,\n\t\t\tversionInfo: {\n\t\t\t\tvscodeVersion: `${product.nameShort} ${!!product.darwinUniversalAssetId ? `${product.version} (Universal)` : product.version} (${product.commit || 'Commit unknown'}, ${product.date || 'Date unknown'})`,\n\t\t\t\tos: `${this.os.type} ${this.os.arch} ${this.os.release}${isLinuxSnap ? ' snap' : ''}`\n\t\t\t},\n\t\t\textensionsDisabled: !!this.disableExtensions,\n\t\t\tfileOnExtension: data.extensionId ? !targetExtension?.isBuiltin : undefined,\n\t\t\tselectedExtension: targetExtension\n\t\t});\n\n\t\tthis._register(this.authenticationService.onDidChangeSessions(async () => {\n\t\t\tconst previousAuthState = !!this.data.githubAccessToken;\n\n\t\t\tlet githubAccessToken = '';\n\t\t\ttry {\n\t\t\t\tconst githubSessions = await this.authenticationService.getSessions('github');\n\t\t\t\tconst potentialSessions = githubSessions.filter(session => session.scopes.includes('repo'));\n\t\t\t\tgithubAccessToken = potentialSessions[0]?.accessToken;\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore\n\t\t\t}\n\n\t\t\tthis.data.githubAccessToken = githubAccessToken;\n\n\t\t\tconst currentAuthState = !!githubAccessToken;\n\t\t\tif (previousAuthState !== currentAuthState) {\n\t\t\t\tthis.updateButtonStates();\n\t\t\t}\n\t\t}));\n\n\t\tconst fileOnMarketplace = data.issueSource === IssueSource.Marketplace;\n\t\tconst fileOnProduct = data.issueSource === IssueSource.VSCode;\n\t\tthis.issueReporterModel.update({ fileOnMarketplace, fileOnProduct });\n\n\t\tthis.createAction = this._register(new Action('issueReporter.create', localize('create', \"Create on GitHub\"), undefined, true, async () => {\n\t\t\tthis.delayedSubmit.trigger(async () => {\n\t\t\t\tthis.createIssue(true); // create issue\n\t\t\t});\n\t\t}));\n\t\tthis.previewAction = this._register(new Action('issueReporter.preview', localize('preview', \"Preview on GitHub\"), undefined, true, async () => {\n\t\t\tthis.delayedSubmit.trigger(async () => {\n\t\t\t\tthis.createIssue(false); // preview issue\n\t\t\t});\n\t\t}));\n\t\tthis.privateAction = this._register(new Action('issueReporter.privateCreate', localize('privateCreate', \"Create Internally\"), undefined, true, async () => {\n\t\t\tthis.delayedSubmit.trigger(async () => {\n\t\t\t\tthis.createIssue(true, true); // create private issue\n\t\t\t});\n\t\t}));\n\n\t\tconst issueTitle = data.issueTitle;\n\t\tif (issueTitle) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst issueTitleElement = this.getElementById<HTMLInputElement>('issue-title');\n\t\t\tif (issueTitleElement) {\n\t\t\t\tissueTitleElement.value = issueTitle;\n\t\t\t}\n\t\t}\n\n\t\tconst issueBody = data.issueBody;\n\t\tif (issueBody) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst description = this.getElementById<HTMLTextAreaElement>('description');\n\t\t\tif (description) {\n\t\t\t\tdescription.value = issueBody;\n\t\t\t\tthis.issueReporterModel.update({ issueDescription: issueBody });\n\t\t\t}\n\t\t}\n\n\t\tif (this.window.document.documentElement.lang !== 'en') {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tshow(this.getElementById('english'));\n\t\t}\n\n\t\tconst codiconStyleSheet = createStyleSheet();\n\t\tcodiconStyleSheet.id = 'codiconStyles';\n\n\t\tconst iconsStyleSheet = this._register(getIconsStyleSheet(this.themeService));\n\t\tfunction updateAll() {\n\t\t\tcodiconStyleSheet.textContent = iconsStyleSheet.getCSS();\n\t\t}\n\n\t\tconst delayer = new RunOnceScheduler(updateAll, 0);\n\t\tthis._register(iconsStyleSheet.onDidChange(() => delayer.schedule()));\n\t\tdelayer.schedule();\n\n\t\tthis.handleExtensionData(data.enabledExtensions);\n\t\tthis.setUpTypes();\n\n\t\t// Handle case where extension is pre-selected through the command\n\t\tif ((data.data || data.uri) && targetExtension) {\n\t\t\tthis.updateExtensionStatus(targetExtension);\n\t\t}\n\n\t\t// initialize the reporting button(s)\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst issueReporterElement = this.getElementById('issue-reporter');\n\t\tif (issueReporterElement) {\n\t\t\tthis.updateButtonStates();\n\t\t}\n\t}\n\n\trender(): void {\n\t\tthis.renderBlocks();\n\t}\n\n\tsetInitialFocus() {\n\t\tconst { fileOnExtension } = this.issueReporterModel.getData();\n\t\tif (fileOnExtension) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst issueTitle = this.window.document.getElementById('issue-title');\n\t\t\tissueTitle?.focus();\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst issueType = this.window.document.getElementById('issue-type');\n\t\t\tissueType?.focus();\n\t\t}\n\t}\n\n\tpublic updateButtonStates() {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst issueReporterElement = this.getElementById('issue-reporter');\n\t\tif (!issueReporterElement) {\n\t\t\t// shouldn't occur -- throw?\n\t\t\treturn;\n\t\t}\n\n\n\t\t// public elements section\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tlet publicElements = this.getElementById('public-elements');\n\t\tif (!publicElements) {\n\t\t\tpublicElements = document.createElement('div');\n\t\t\tpublicElements.id = 'public-elements';\n\t\t\tpublicElements.classList.add('public-elements');\n\t\t\tissueReporterElement.appendChild(publicElements);\n\t\t}\n\t\tthis.updatePublicGithubButton(publicElements);\n\t\tthis.updatePublicRepoLink(publicElements);\n\n\n\t\t// private filing section\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tlet internalElements = this.getElementById('internal-elements');\n\t\tif (!internalElements) {\n\t\t\tinternalElements = document.createElement('div');\n\t\t\tinternalElements.id = 'internal-elements';\n\t\t\tinternalElements.classList.add('internal-elements');\n\t\t\tinternalElements.classList.add('hidden');\n\t\t\tissueReporterElement.appendChild(internalElements);\n\t\t}\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tlet filingRow = this.getElementById('internal-top-row');\n\t\tif (!filingRow) {\n\t\t\tfilingRow = document.createElement('div');\n\t\t\tfilingRow.id = 'internal-top-row';\n\t\t\tfilingRow.classList.add('internal-top-row');\n\t\t\tinternalElements.appendChild(filingRow);\n\t\t}\n\t\tthis.updateInternalFilingNote(filingRow);\n\t\tthis.updateInternalGithubButton(filingRow);\n\t\tthis.updateInternalElementsVisibility();\n\t}\n\n\tprivate updateInternalFilingNote(container: HTMLElement) {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tlet filingNote = this.getElementById('internal-preview-message');\n\t\tif (!filingNote) {\n\t\t\tfilingNote = document.createElement('span');\n\t\t\tfilingNote.id = 'internal-preview-message';\n\t\t\tfilingNote.classList.add('internal-preview-message');\n\t\t\tcontainer.appendChild(filingNote);\n\t\t}\n\n\t\tfilingNote.textContent = escape(localize('internalPreviewMessage', 'If your copilot debug logs contain private information:'));\n\t}\n\n\tprivate updatePublicGithubButton(container: HTMLElement): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst issueReporterElement = this.getElementById('issue-reporter');\n\t\tif (!issueReporterElement) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Dispose of the existing button\n\t\tif (this.publicGithubButton) {\n\t\t\tthis.publicGithubButton.dispose();\n\t\t}\n\n\t\t// setup button + dropdown if applicable\n\t\tif (!this.acknowledged && this.needsUpdate) { // * old version and hasn't ack'd\n\t\t\tthis.publicGithubButton = this._register(new Button(container, unthemedButtonStyles));\n\t\t\tthis.publicGithubButton.label = localize('acknowledge', \"Confirm Version Acknowledgement\");\n\t\t\tthis.publicGithubButton.enabled = false;\n\t\t} else if (this.data.githubAccessToken && this.isPreviewEnabled()) { // * has access token, create by default, preview dropdown\n\t\t\tthis.publicGithubButton = this._register(new ButtonWithDropdown(container, {\n\t\t\t\tcontextMenuProvider: this.contextMenuService,\n\t\t\t\tactions: [this.previewAction],\n\t\t\t\taddPrimaryActionToDropdown: false,\n\t\t\t\t...unthemedButtonStyles\n\t\t\t}));\n\t\t\tthis._register(this.publicGithubButton.onDidClick(() => {\n\t\t\t\tthis.createAction.run();\n\t\t\t}));\n\t\t\tthis.publicGithubButton.label = localize('createOnGitHub', \"Create on GitHub\");\n\t\t\tthis.publicGithubButton.enabled = true;\n\t\t} else if (this.data.githubAccessToken && !this.isPreviewEnabled()) { // * Access token but invalid preview state: simple Button (create only)\n\t\t\tthis.publicGithubButton = this._register(new Button(container, unthemedButtonStyles));\n\t\t\tthis._register(this.publicGithubButton.onDidClick(() => {\n\t\t\t\tthis.createAction.run();\n\t\t\t}));\n\t\t\tthis.publicGithubButton.label = localize('createOnGitHub', \"Create on GitHub\");\n\t\t\tthis.publicGithubButton.enabled = true;\n\t\t} else { // * No access token: simple Button (preview only)\n\t\t\tthis.publicGithubButton = this._register(new Button(container, unthemedButtonStyles));\n\t\t\tthis._register(this.publicGithubButton.onDidClick(() => {\n\t\t\t\tthis.previewAction.run();\n\t\t\t}));\n\t\t\tthis.publicGithubButton.label = localize('previewOnGitHub', \"Preview on GitHub\");\n\t\t\tthis.publicGithubButton.enabled = true;\n\t\t}\n\n\t\t// make sure that the repo link is after the button\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst repoLink = this.getElementById('show-repo-name');\n\t\tif (repoLink) {\n\t\t\tcontainer.insertBefore(this.publicGithubButton.element, repoLink);\n\t\t}\n\t}\n\n\tprivate updatePublicRepoLink(container: HTMLElement): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tlet issueRepoName = this.getElementById('show-repo-name') as HTMLAnchorElement;\n\t\tif (!issueRepoName) {\n\t\t\tissueRepoName = document.createElement('a');\n\t\t\tissueRepoName.id = 'show-repo-name';\n\t\t\tissueRepoName.classList.add('hidden');\n\t\t\tcontainer.appendChild(issueRepoName);\n\t\t}\n\n\n\t\tconst selectedExtension = this.issueReporterModel.getData().selectedExtension;\n\t\tif (selectedExtension && selectedExtension.uri) {\n\t\t\tconst urlString = URI.revive(selectedExtension.uri).toString();\n\t\t\tissueRepoName.href = urlString;\n\t\t\tissueRepoName.addEventListener('click', (e) => this.openLink(e));\n\t\t\tissueRepoName.addEventListener('auxclick', (e) => this.openLink(<MouseEvent>e));\n\t\t\tconst gitHubInfo = this.parseGitHubUrl(urlString);\n\t\t\tissueRepoName.textContent = gitHubInfo ? gitHubInfo.owner + '/' + gitHubInfo.repositoryName : urlString;\n\t\t\tObject.assign(issueRepoName.style, {\n\t\t\t\talignSelf: 'flex-end',\n\t\t\t\tdisplay: 'block',\n\t\t\t\tfontSize: '13px',\n\t\t\t\tpadding: '4px 0px',\n\t\t\t\ttextDecoration: 'none',\n\t\t\t\twidth: 'auto'\n\t\t\t});\n\t\t\tshow(issueRepoName);\n\t\t} else if (issueRepoName) {\n\t\t\t// clear styles\n\t\t\tissueRepoName.removeAttribute('style');\n\t\t\thide(issueRepoName);\n\t\t}\n\t}\n\n\tprivate updateInternalGithubButton(container: HTMLElement): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst issueReporterElement = this.getElementById('issue-reporter');\n\t\tif (!issueReporterElement) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Dispose of the existing button\n\t\tif (this.internalGithubButton) {\n\t\t\tthis.internalGithubButton.dispose();\n\t\t}\n\n\t\tif (this.data.githubAccessToken && this.data.privateUri) {\n\t\t\tthis.internalGithubButton = this._register(new Button(container, unthemedButtonStyles));\n\t\t\tthis._register(this.internalGithubButton.onDidClick(() => {\n\t\t\t\tthis.privateAction.run();\n\t\t\t}));\n\n\t\t\tthis.internalGithubButton.element.id = 'internal-create-btn';\n\t\t\tthis.internalGithubButton.element.classList.add('internal-create-subtle');\n\t\t\tthis.internalGithubButton.label = localize('createInternally', \"Create Internally\");\n\t\t\tthis.internalGithubButton.enabled = true;\n\t\t\tthis.internalGithubButton.setTitle(this.data.privateUri.path!.slice(1));\n\t\t}\n\t}\n\n\tprivate updateInternalElementsVisibility(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst container = this.getElementById('internal-elements');\n\t\tif (!container) {\n\t\t\t// shouldn't happen\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.data.githubAccessToken && this.data.privateUri) {\n\t\t\tshow(container);\n\t\t\tcontainer.style.display = ''; //todo: necessary even with show?\n\t\t\tif (this.internalGithubButton) {\n\t\t\t\tthis.internalGithubButton.enabled = this.publicGithubButton?.enabled ?? false;\n\t\t\t}\n\t\t} else {\n\t\t\thide(container);\n\t\t\tcontainer.style.display = 'none'; //todo: necessary even with hide?\n\t\t}\n\t}\n\n\tprivate async updateIssueReporterUri(extension: IssueReporterExtensionData): Promise<void> {\n\t\ttry {\n\t\t\tif (extension.uri) {\n\t\t\t\tconst uri = URI.revive(extension.uri);\n\t\t\t\textension.bugsUrl = uri.toString();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.renderBlocks();\n\t\t}\n\t}\n\n\tprivate handleExtensionData(extensions: IssueReporterExtensionData[]) {\n\t\tconst installedExtensions = extensions.filter(x => !x.isBuiltin);\n\t\tconst { nonThemes, themes } = groupBy(installedExtensions, ext => {\n\t\t\treturn ext.isTheme ? 'themes' : 'nonThemes';\n\t\t});\n\n\t\tconst numberOfThemeExtesions = (themes && themes.length) ?? 0;\n\t\tthis.issueReporterModel.update({ numberOfThemeExtesions, enabledNonThemeExtesions: nonThemes, allExtensions: installedExtensions });\n\t\tthis.updateExtensionTable(nonThemes ?? [], numberOfThemeExtesions);\n\t\tif (this.disableExtensions || installedExtensions.length === 0) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t(<HTMLButtonElement>this.getElementById('disableExtensions')).disabled = true;\n\t\t}\n\n\t\tthis.updateExtensionSelector(installedExtensions);\n\t}\n\n\tprivate updateExtensionSelector(extensions: IssueReporterExtensionData[]): void {\n\t\tinterface IOption {\n\t\t\tname: string;\n\t\t\tid: string;\n\t\t}\n\n\t\tconst extensionOptions: IOption[] = extensions.map(extension => {\n\t\t\treturn {\n\t\t\t\tname: extension.displayName || extension.name || '',\n\t\t\t\tid: extension.id\n\t\t\t};\n\t\t});\n\n\t\t// Sort extensions by name\n\t\textensionOptions.sort((a, b) => {\n\t\t\tconst aName = a.name.toLowerCase();\n\t\t\tconst bName = b.name.toLowerCase();\n\t\t\tif (aName > bName) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\tif (aName < bName) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t});\n\n\t\tconst makeOption = (extension: IOption, selectedExtension?: IssueReporterExtensionData): HTMLOptionElement => {\n\t\t\tconst selected = selectedExtension && extension.id === selectedExtension.id;\n\t\t\treturn $<HTMLOptionElement>('option', {\n\t\t\t\t'value': extension.id,\n\t\t\t\t'selected': selected || ''\n\t\t\t}, extension.name);\n\t\t};\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionsSelector = this.getElementById<HTMLSelectElement>('extension-selector');\n\t\tif (extensionsSelector) {\n\t\t\tconst { selectedExtension } = this.issueReporterModel.getData();\n\t\t\treset(extensionsSelector, this.makeOption('', localize('selectExtension', \"Select extension\"), true), ...extensionOptions.map(extension => makeOption(extension, selectedExtension)));\n\n\t\t\tif (!selectedExtension) {\n\t\t\t\textensionsSelector.selectedIndex = 0;\n\t\t\t}\n\n\t\t\tthis.addEventListener('extension-selector', 'change', async (e: Event) => {\n\t\t\t\tthis.clearExtensionData();\n\t\t\t\tconst selectedExtensionId = (<HTMLInputElement>e.target).value;\n\t\t\t\tthis.selectedExtension = selectedExtensionId;\n\t\t\t\tconst extensions = this.issueReporterModel.getData().allExtensions;\n\t\t\t\tconst matches = extensions.filter(extension => extension.id === selectedExtensionId);\n\t\t\t\tif (matches.length) {\n\t\t\t\t\tthis.issueReporterModel.update({ selectedExtension: matches[0] });\n\t\t\t\t\tconst selectedExtension = this.issueReporterModel.getData().selectedExtension;\n\t\t\t\t\tif (selectedExtension) {\n\t\t\t\t\t\tconst iconElement = document.createElement('span');\n\t\t\t\t\t\ticonElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.loading), 'codicon-modifier-spin');\n\t\t\t\t\t\tthis.setLoading(iconElement);\n\t\t\t\t\t\tconst openReporterData = await this.sendReporterMenu(selectedExtension);\n\t\t\t\t\t\tif (openReporterData) {\n\t\t\t\t\t\t\tif (this.selectedExtension === selectedExtensionId) {\n\t\t\t\t\t\t\t\tthis.removeLoading(iconElement, true);\n\t\t\t\t\t\t\t\tthis.data = openReporterData;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (!this.loadingExtensionData) {\n\t\t\t\t\t\t\t\ticonElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.loading), 'codicon-modifier-spin');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.removeLoading(iconElement);\n\t\t\t\t\t\t\t// if not using command, should have no configuration data in fields we care about and check later.\n\t\t\t\t\t\t\tthis.clearExtensionData();\n\n\t\t\t\t\t\t\t// case when previous extension was opened from normal openIssueReporter command\n\t\t\t\t\t\t\tselectedExtension.data = undefined;\n\t\t\t\t\t\t\tselectedExtension.uri = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.selectedExtension === selectedExtensionId) {\n\t\t\t\t\t\t\t// repopulates the fields with the new data given the selected extension.\n\t\t\t\t\t\t\tthis.updateExtensionStatus(matches[0]);\n\t\t\t\t\t\t\tthis.openReporter = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.issueReporterModel.update({ selectedExtension: undefined });\n\t\t\t\t\t\tthis.clearSearchResults();\n\t\t\t\t\t\tthis.clearExtensionData();\n\t\t\t\t\t\tthis.validateSelectedExtension();\n\t\t\t\t\t\tthis.updateExtensionStatus(matches[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update internal action visibility after explicit selection\n\t\t\t\tthis.updateInternalElementsVisibility();\n\t\t\t});\n\t\t}\n\n\t\tthis.addEventListener('problem-source', 'change', (_) => {\n\t\t\tthis.clearExtensionData();\n\t\t\tthis.validateSelectedExtension();\n\t\t});\n\t}\n\n\tprivate async sendReporterMenu(extension: IssueReporterExtensionData): Promise<IssueReporterData | undefined> {\n\t\ttry {\n\t\t\tconst timeoutPromise = new Promise<undefined>((_, reject) =>\n\t\t\t\tsetTimeout(() => reject(new Error('sendReporterMenu timed out')), 10000)\n\t\t\t);\n\t\t\tconst data = await Promise.race([\n\t\t\t\tthis.issueFormService.sendReporterMenu(extension.id),\n\t\t\t\ttimeoutPromise\n\t\t\t]);\n\t\t\treturn data;\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate updateAcknowledgementState() {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst acknowledgementCheckbox = this.getElementById<HTMLInputElement>('includeAcknowledgement');\n\t\tif (acknowledgementCheckbox) {\n\t\t\tthis.acknowledged = acknowledgementCheckbox.checked;\n\t\t\tthis.updateButtonStates();\n\t\t}\n\t}\n\n\tpublic setEventHandlers(): void {\n\t\t(['includeSystemInfo', 'includeProcessInfo', 'includeWorkspaceInfo', 'includeExtensions', 'includeExperiments', 'includeExtensionData'] as const).forEach(elementId => {\n\t\t\tthis.addEventListener(elementId, 'click', (event: Event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.issueReporterModel.update({ [elementId]: !this.issueReporterModel.getData()[elementId] });\n\t\t\t});\n\t\t});\n\n\t\tthis.addEventListener('includeAcknowledgement', 'click', (event: Event) => {\n\t\t\tevent.stopPropagation();\n\t\t\tthis.updateAcknowledgementState();\n\t\t});\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst showInfoElements = this.window.document.getElementsByClassName('showInfo');\n\t\tfor (let i = 0; i < showInfoElements.length; i++) {\n\t\t\tconst showInfo = showInfoElements.item(i)!;\n\t\t\t(showInfo as HTMLAnchorElement).addEventListener('click', (e: MouseEvent) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tconst label = (<HTMLDivElement>e.target);\n\t\t\t\tif (label) {\n\t\t\t\t\tconst containingElement = label.parentElement && label.parentElement.parentElement;\n\t\t\t\t\tconst info = containingElement && containingElement.lastElementChild;\n\t\t\t\t\tif (info && info.classList.contains('hidden')) {\n\t\t\t\t\t\tshow(info);\n\t\t\t\t\t\tlabel.textContent = localize('hide', \"hide\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\thide(info);\n\t\t\t\t\t\tlabel.textContent = localize('show', \"show\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.addEventListener('issue-source', 'change', (e: Event) => {\n\t\t\tconst value = (<HTMLInputElement>e.target).value;\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst problemSourceHelpText = this.getElementById('problem-source-help-text')!;\n\t\t\tif (value === '') {\n\t\t\t\tthis.issueReporterModel.update({ fileOnExtension: undefined });\n\t\t\t\tshow(problemSourceHelpText);\n\t\t\t\tthis.clearSearchResults();\n\t\t\t\tthis.render();\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\thide(problemSourceHelpText);\n\t\t\t}\n\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst descriptionTextArea = <HTMLInputElement>this.getElementById('issue-title');\n\t\t\tif (value === IssueSource.VSCode) {\n\t\t\t\tdescriptionTextArea.placeholder = localize('vscodePlaceholder', \"E.g Workbench is missing problems panel\");\n\t\t\t} else if (value === IssueSource.Extension) {\n\t\t\t\tdescriptionTextArea.placeholder = localize('extensionPlaceholder', \"E.g. Missing alt text on extension readme image\");\n\t\t\t} else if (value === IssueSource.Marketplace) {\n\t\t\t\tdescriptionTextArea.placeholder = localize('marketplacePlaceholder', \"E.g Cannot disable installed extension\");\n\t\t\t} else {\n\t\t\t\tdescriptionTextArea.placeholder = localize('undefinedPlaceholder', \"Please enter a title\");\n\t\t\t}\n\n\t\t\tlet fileOnExtension, fileOnMarketplace, fileOnProduct = false;\n\t\t\tif (value === IssueSource.Extension) {\n\t\t\t\tfileOnExtension = true;\n\t\t\t} else if (value === IssueSource.Marketplace) {\n\t\t\t\tfileOnMarketplace = true;\n\t\t\t} else if (value === IssueSource.VSCode) {\n\t\t\t\tfileOnProduct = true;\n\t\t\t}\n\n\t\t\tthis.issueReporterModel.update({ fileOnExtension, fileOnMarketplace, fileOnProduct });\n\t\t\tthis.render();\n\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst title = (<HTMLInputElement>this.getElementById('issue-title')).value;\n\t\t\tthis.searchIssues(title, fileOnExtension, fileOnMarketplace);\n\t\t});\n\n\t\tthis.addEventListener('description', 'input', (e: Event) => {\n\t\t\tconst issueDescription = (<HTMLInputElement>e.target).value;\n\t\t\tthis.issueReporterModel.update({ issueDescription });\n\n\t\t\t// Only search for extension issues on title change\n\t\t\tif (this.issueReporterModel.fileOnExtension() === false) {\n\t\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t\tconst title = (<HTMLInputElement>this.getElementById('issue-title')).value;\n\t\t\t\tthis.searchVSCodeIssues(title, issueDescription);\n\t\t\t}\n\t\t});\n\n\t\tthis.addEventListener('issue-title', 'input', _ => {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst titleElement = this.getElementById('issue-title') as HTMLInputElement;\n\t\t\tif (titleElement) {\n\t\t\t\tconst title = titleElement.value;\n\t\t\t\tthis.issueReporterModel.update({ issueTitle: title });\n\t\t\t}\n\t\t});\n\n\t\tthis.addEventListener('issue-title', 'input', (e: Event) => {\n\t\t\tconst title = (<HTMLInputElement>e.target).value;\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst lengthValidationMessage = this.getElementById('issue-title-length-validation-error');\n\t\t\tconst issueUrl = this.getIssueUrl();\n\t\t\tif (title && this.getIssueUrlWithTitle(title, issueUrl).length > MAX_URL_LENGTH) {\n\t\t\t\tshow(lengthValidationMessage);\n\t\t\t} else {\n\t\t\t\thide(lengthValidationMessage);\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst issueSource = this.getElementById<HTMLSelectElement>('issue-source');\n\t\t\tif (!issueSource || issueSource.value === '') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { fileOnExtension, fileOnMarketplace } = this.issueReporterModel.getData();\n\t\t\tthis.searchIssues(title, fileOnExtension, fileOnMarketplace);\n\t\t});\n\n\t\t// We handle clicks in the dropdown actions now\n\n\t\tthis.addEventListener('disableExtensions', 'click', () => {\n\t\t\tthis.issueFormService.reloadWithExtensionsDisabled();\n\t\t});\n\n\t\tthis.addEventListener('extensionBugsLink', 'click', (e: Event) => {\n\t\t\tconst url = (<HTMLElement>e.target).innerText;\n\t\t\tthis.openLink(url);\n\t\t});\n\n\t\tthis.addEventListener('disableExtensions', 'keydown', (e: Event) => {\n\t\t\te.stopPropagation();\n\t\t\tif ((e as KeyboardEvent).key === 'Enter' || (e as KeyboardEvent).key === ' ') {\n\t\t\t\tthis.issueFormService.reloadWithExtensionsDisabled();\n\t\t\t}\n\t\t});\n\n\t\tthis.window.document.onkeydown = async (e: KeyboardEvent) => {\n\t\t\tconst cmdOrCtrlKey = isMacintosh ? e.metaKey : e.ctrlKey;\n\t\t\t// Cmd/Ctrl+Enter previews issue and closes window\n\t\t\tif (cmdOrCtrlKey && e.key === 'Enter') {\n\t\t\t\tthis.delayedSubmit.trigger(async () => {\n\t\t\t\t\tif (await this.createIssue()) {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Cmd/Ctrl + w closes issue window\n\t\t\tif (cmdOrCtrlKey && e.key === 'w') {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t\tconst issueTitle = (<HTMLInputElement>this.getElementById('issue-title'))!.value;\n\t\t\t\tconst { issueDescription } = this.issueReporterModel.getData();\n\t\t\t\tif (!this.hasBeenSubmitted && (issueTitle || issueDescription)) {\n\t\t\t\t\t// fire and forget\n\t\t\t\t\tthis.issueFormService.showConfirmCloseDialog();\n\t\t\t\t} else {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// With latest electron upgrade, cmd+a is no longer propagating correctly for inputs in this window on mac\n\t\t\t// Manually perform the selection\n\t\t\tif (isMacintosh) {\n\t\t\t\tif (cmdOrCtrlKey && e.key === 'a' && e.target) {\n\t\t\t\t\tif (isHTMLInputElement(e.target) || isHTMLTextAreaElement(e.target)) {\n\t\t\t\t\t\t(<HTMLInputElement>e.target).select();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Handle the guidance link specifically to use openerService\n\t\tthis.addEventListener('review-guidance-help-text', 'click', (e: Event) => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\tif (target.tagName === 'A' && target.getAttribute('target') === '_blank') {\n\t\t\t\tthis.openLink(<MouseEvent>e);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic updatePerformanceInfo(info: Partial<IssueReporterData>) {\n\t\tthis.issueReporterModel.update(info);\n\t\tthis.receivedPerformanceInfo = true;\n\n\t\tconst state = this.issueReporterModel.getData();\n\t\tthis.updateProcessInfo(state);\n\t\tthis.updateWorkspaceInfo(state);\n\t\tthis.updateButtonStates();\n\t}\n\n\tprivate isPreviewEnabled() {\n\t\tconst issueType = this.issueReporterModel.getData().issueType;\n\n\t\tif (this.loadingExtensionData) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isWeb) {\n\t\t\tif (issueType === IssueType.FeatureRequest || issueType === IssueType.PerformanceIssue || issueType === IssueType.Bug) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif (issueType === IssueType.Bug && this.receivedSystemInfo) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (issueType === IssueType.PerformanceIssue && this.receivedSystemInfo && this.receivedPerformanceInfo) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (issueType === IssueType.FeatureRequest) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate getExtensionRepositoryUrl(): string | undefined {\n\t\tconst selectedExtension = this.issueReporterModel.getData().selectedExtension;\n\t\treturn selectedExtension && selectedExtension.repositoryUrl;\n\t}\n\n\tpublic getExtensionBugsUrl(): string | undefined {\n\t\tconst selectedExtension = this.issueReporterModel.getData().selectedExtension;\n\t\treturn selectedExtension && selectedExtension.bugsUrl;\n\t}\n\n\tpublic searchVSCodeIssues(title: string, issueDescription?: string): void {\n\t\tif (title) {\n\t\t\tthis.searchDuplicates(title, issueDescription);\n\t\t} else {\n\t\t\tthis.clearSearchResults();\n\t\t}\n\t}\n\n\tpublic searchIssues(title: string, fileOnExtension: boolean | undefined, fileOnMarketplace: boolean | undefined): void {\n\t\tif (fileOnExtension) {\n\t\t\treturn this.searchExtensionIssues(title);\n\t\t}\n\n\t\tif (fileOnMarketplace) {\n\t\t\treturn this.searchMarketplaceIssues(title);\n\t\t}\n\n\t\tconst description = this.issueReporterModel.getData().issueDescription;\n\t\tthis.searchVSCodeIssues(title, description);\n\t}\n\n\tprivate searchExtensionIssues(title: string): void {\n\t\tconst url = this.getExtensionGitHubUrl();\n\t\tif (title) {\n\t\t\tconst matches = /^https?:\\/\\/github\\.com\\/(.*)/.exec(url);\n\t\t\tif (matches && matches.length) {\n\t\t\t\tconst repo = matches[1];\n\t\t\t\treturn this.searchGitHub(repo, title);\n\t\t\t}\n\n\t\t\t// If the extension has no repository, display empty search results\n\t\t\tif (this.issueReporterModel.getData().selectedExtension) {\n\t\t\t\tthis.clearSearchResults();\n\t\t\t\treturn this.displaySearchResults([]);\n\n\t\t\t}\n\t\t}\n\n\t\tthis.clearSearchResults();\n\t}\n\n\tprivate searchMarketplaceIssues(title: string): void {\n\t\tif (title) {\n\t\t\tconst gitHubInfo = this.parseGitHubUrl(this.product.reportMarketplaceIssueUrl!);\n\t\t\tif (gitHubInfo) {\n\t\t\t\treturn this.searchGitHub(`${gitHubInfo.owner}/${gitHubInfo.repositoryName}`, title);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async close(): Promise<void> {\n\t\tawait this.issueFormService.closeReporter();\n\t}\n\n\tpublic clearSearchResults(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst similarIssues = this.getElementById('similar-issues')!;\n\t\tsimilarIssues.innerText = '';\n\t\tthis.numberOfSearchResultsDisplayed = 0;\n\t}\n\n\t@debounce(300)\n\tprivate searchGitHub(repo: string, title: string): void {\n\t\tconst query = `is:issue+repo:${repo}+${title}`;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst similarIssues = this.getElementById('similar-issues')!;\n\n\t\tfetch(`https://api.github.com/search/issues?q=${query}`).then((response) => {\n\t\t\tresponse.json().then(result => {\n\t\t\t\tsimilarIssues.innerText = '';\n\t\t\t\tif (result && result.items) {\n\t\t\t\t\tthis.displaySearchResults(result.items);\n\t\t\t\t}\n\t\t\t}).catch(_ => {\n\t\t\t\tconsole.warn('Timeout or query limit exceeded');\n\t\t\t});\n\t\t}).catch(_ => {\n\t\t\tconsole.warn('Error fetching GitHub issues');\n\t\t});\n\t}\n\n\t@debounce(300)\n\tprivate searchDuplicates(title: string, body?: string): void {\n\t\tconst url = 'https://vscode-probot.westus.cloudapp.azure.com:7890/duplicate_candidates';\n\t\tconst init = {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\ttitle,\n\t\t\t\tbody\n\t\t\t}),\n\t\t\theaders: new Headers({\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t})\n\t\t};\n\n\t\tfetch(url, init).then((response) => {\n\t\t\tresponse.json().then(result => {\n\t\t\t\tthis.clearSearchResults();\n\n\t\t\t\tif (result && result.candidates) {\n\t\t\t\t\tthis.displaySearchResults(result.candidates);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unexpected response, no candidates property');\n\t\t\t\t}\n\t\t\t}).catch(_ => {\n\t\t\t\t// Ignore\n\t\t\t});\n\t\t}).catch(_ => {\n\t\t\t// Ignore\n\t\t});\n\t}\n\n\tprivate displaySearchResults(results: SearchResult[]) {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst similarIssues = this.getElementById('similar-issues')!;\n\t\tif (results.length) {\n\t\t\tconst issues = $('div.issues-container');\n\t\t\tconst issuesText = $('div.list-title');\n\t\t\tissuesText.textContent = localize('similarIssues', \"Similar issues\");\n\n\t\t\tthis.numberOfSearchResultsDisplayed = results.length < 5 ? results.length : 5;\n\t\t\tfor (let i = 0; i < this.numberOfSearchResultsDisplayed; i++) {\n\t\t\t\tconst issue = results[i];\n\t\t\t\tconst link = $('a.issue-link', { href: issue.html_url });\n\t\t\t\tlink.textContent = issue.title;\n\t\t\t\tlink.title = issue.title;\n\t\t\t\tlink.addEventListener('click', (e) => this.openLink(e));\n\t\t\t\tlink.addEventListener('auxclick', (e) => this.openLink(<MouseEvent>e));\n\n\t\t\t\tlet issueState: HTMLElement;\n\t\t\t\tlet item: HTMLElement;\n\t\t\t\tif (issue.state) {\n\t\t\t\t\tissueState = $('span.issue-state');\n\n\t\t\t\t\tconst issueIcon = $('span.issue-icon');\n\t\t\t\t\tissueIcon.appendChild(renderIcon(issue.state === 'open' ? Codicon.issueOpened : Codicon.issueClosed));\n\n\t\t\t\t\tconst issueStateLabel = $('span.issue-state.label');\n\t\t\t\t\tissueStateLabel.textContent = issue.state === 'open' ? localize('open', \"Open\") : localize('closed', \"Closed\");\n\n\t\t\t\t\tissueState.title = issue.state === 'open' ? localize('open', \"Open\") : localize('closed', \"Closed\");\n\t\t\t\t\tissueState.appendChild(issueIcon);\n\t\t\t\t\tissueState.appendChild(issueStateLabel);\n\n\t\t\t\t\titem = $('div.issue', undefined, issueState, link);\n\t\t\t\t} else {\n\t\t\t\t\titem = $('div.issue', undefined, link);\n\t\t\t\t}\n\n\t\t\t\tissues.appendChild(item);\n\t\t\t}\n\n\t\t\tsimilarIssues.appendChild(issuesText);\n\t\t\tsimilarIssues.appendChild(issues);\n\t\t}\n\t}\n\n\tprivate setUpTypes(): void {\n\t\tconst makeOption = (issueType: IssueType, description: string) => $('option', { 'value': issueType.valueOf() }, escape(description));\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst typeSelect = this.getElementById('issue-type')! as HTMLSelectElement;\n\t\tconst { issueType } = this.issueReporterModel.getData();\n\t\treset(typeSelect,\n\t\t\tmakeOption(IssueType.Bug, localize('bugReporter', \"Bug Report\")),\n\t\t\tmakeOption(IssueType.FeatureRequest, localize('featureRequest', \"Feature Request\")),\n\t\t\tmakeOption(IssueType.PerformanceIssue, localize('performanceIssue', \"Performance Issue (freeze, slow, crash)\"))\n\t\t);\n\n\t\ttypeSelect.value = issueType.toString();\n\n\t\tthis.setSourceOptions();\n\t}\n\n\tpublic makeOption(value: string, description: string, disabled: boolean): HTMLOptionElement {\n\t\tconst option: HTMLOptionElement = document.createElement('option');\n\t\toption.disabled = disabled;\n\t\toption.value = value;\n\t\toption.textContent = description;\n\n\t\treturn option;\n\t}\n\n\tpublic setSourceOptions(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst sourceSelect = this.getElementById('issue-source')! as HTMLSelectElement;\n\t\tconst { issueType, fileOnExtension, selectedExtension, fileOnMarketplace, fileOnProduct } = this.issueReporterModel.getData();\n\t\tlet selected = sourceSelect.selectedIndex;\n\t\tif (selected === -1) {\n\t\t\tif (fileOnExtension !== undefined) {\n\t\t\t\tselected = fileOnExtension ? 2 : 1;\n\t\t\t} else if (selectedExtension?.isBuiltin) {\n\t\t\t\tselected = 1;\n\t\t\t} else if (fileOnMarketplace) {\n\t\t\t\tselected = 3;\n\t\t\t} else if (fileOnProduct) {\n\t\t\t\tselected = 1;\n\t\t\t}\n\t\t}\n\n\t\tsourceSelect.innerText = '';\n\t\tsourceSelect.append(this.makeOption('', localize('selectSource', \"Select source\"), true));\n\t\tsourceSelect.append(this.makeOption(IssueSource.VSCode, localize('vscode', \"Visual Studio Code\"), false));\n\t\tsourceSelect.append(this.makeOption(IssueSource.Extension, localize('extension', \"A VS Code extension\"), false));\n\t\tif (this.product.reportMarketplaceIssueUrl) {\n\t\t\tsourceSelect.append(this.makeOption(IssueSource.Marketplace, localize('marketplace', \"Extensions Marketplace\"), false));\n\t\t}\n\n\t\tif (issueType !== IssueType.FeatureRequest) {\n\t\t\tsourceSelect.append(this.makeOption(IssueSource.Unknown, localize('unknown', \"Don't know\"), false));\n\t\t}\n\n\t\tif (selected !== -1 && selected < sourceSelect.options.length) {\n\t\t\tsourceSelect.selectedIndex = selected;\n\t\t} else {\n\t\t\tsourceSelect.selectedIndex = 0;\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\thide(this.getElementById('problem-source-help-text'));\n\t\t}\n\t}\n\n\tpublic async renderBlocks(): Promise<void> {\n\t\t// Depending on Issue Type, we render different blocks and text\n\t\tconst { issueType, fileOnExtension, fileOnMarketplace, selectedExtension } = this.issueReporterModel.getData();\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst blockContainer = this.getElementById('block-container');\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst systemBlock = this.window.document.querySelector('.block-system');\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst processBlock = this.window.document.querySelector('.block-process');\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst workspaceBlock = this.window.document.querySelector('.block-workspace');\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionsBlock = this.window.document.querySelector('.block-extensions');\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst experimentsBlock = this.window.document.querySelector('.block-experiments');\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionDataBlock = this.window.document.querySelector('.block-extension-data');\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst problemSource = this.getElementById('problem-source')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst descriptionTitle = this.getElementById('issue-description-label')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst descriptionSubtitle = this.getElementById('issue-description-subtitle')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionSelector = this.getElementById('extension-selection')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst downloadExtensionDataLink = <HTMLAnchorElement>this.getElementById('extension-data-download')!;\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst titleTextArea = this.getElementById('issue-title-container')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst descriptionTextArea = this.getElementById('description')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionDataTextArea = this.getElementById('extension-data')!;\n\n\t\t// Hide all by default\n\t\thide(blockContainer);\n\t\thide(systemBlock);\n\t\thide(processBlock);\n\t\thide(workspaceBlock);\n\t\thide(extensionsBlock);\n\t\thide(experimentsBlock);\n\t\thide(extensionSelector);\n\t\thide(extensionDataTextArea);\n\t\thide(extensionDataBlock);\n\t\thide(downloadExtensionDataLink);\n\n\t\tshow(problemSource);\n\t\tshow(titleTextArea);\n\t\tshow(descriptionTextArea);\n\n\t\tif (fileOnExtension) {\n\t\t\tshow(extensionSelector);\n\t\t}\n\n\t\tconst extensionData = this.issueReporterModel.getData().extensionData;\n\t\tif (extensionData && extensionData.length > MAX_EXTENSION_DATA_LENGTH) {\n\t\t\tshow(downloadExtensionDataLink);\n\t\t\tconst date = new Date();\n\t\t\tconst formattedDate = date.toISOString().split('T')[0]; // YYYY-MM-DD\n\t\t\tconst formattedTime = date.toTimeString().split(' ')[0].replace(/:/g, '-'); // HH-MM-SS\n\t\t\tconst fileName = `extensionData_${formattedDate}_${formattedTime}.md`;\n\t\t\tconst handleLinkClick = async () => {\n\t\t\t\tconst downloadPath = await this.fileDialogService.showSaveDialog({\n\t\t\t\t\ttitle: localize('saveExtensionData', \"Save Extension Data\"),\n\t\t\t\t\tavailableFileSystems: [Schemas.file],\n\t\t\t\t\tdefaultUri: joinPath(await this.fileDialogService.defaultFilePath(Schemas.file), fileName),\n\t\t\t\t});\n\n\t\t\t\tif (downloadPath) {\n\t\t\t\t\tawait this.fileService.writeFile(downloadPath, VSBuffer.fromString(extensionData));\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdownloadExtensionDataLink.addEventListener('click', handleLinkClick);\n\n\t\t\tthis._register({\n\t\t\t\tdispose: () => downloadExtensionDataLink.removeEventListener('click', handleLinkClick)\n\t\t\t});\n\t\t}\n\n\t\tif (selectedExtension && this.nonGitHubIssueUrl) {\n\t\t\thide(titleTextArea);\n\t\t\thide(descriptionTextArea);\n\t\t\treset(descriptionTitle, localize('handlesIssuesElsewhere', \"This extension handles issues outside of VS Code\"));\n\t\t\treset(descriptionSubtitle, localize('elsewhereDescription', \"The '{0}' extension prefers to use an external issue reporter. To be taken to that issue reporting experience, click the button below.\", selectedExtension.displayName));\n\t\t\tthis.publicGithubButton.label = localize('openIssueReporter', \"Open External Issue Reporter\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (fileOnExtension && selectedExtension?.data) {\n\t\t\tconst data = selectedExtension?.data;\n\t\t\t(extensionDataTextArea as HTMLElement).innerText = data.toString();\n\t\t\t(extensionDataTextArea as HTMLTextAreaElement).readOnly = true;\n\t\t\tshow(extensionDataBlock);\n\t\t}\n\n\t\t// only if we know comes from the open reporter command\n\t\tif (fileOnExtension && this.openReporter) {\n\t\t\t(extensionDataTextArea as HTMLTextAreaElement).readOnly = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\t// delay to make sure from command or not\n\t\t\t\tif (this.openReporter) {\n\t\t\t\t\tshow(extensionDataBlock);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t\tshow(extensionDataBlock);\n\t\t}\n\n\t\tif (issueType === IssueType.Bug) {\n\t\t\tif (!fileOnMarketplace) {\n\t\t\t\tshow(blockContainer);\n\t\t\t\tshow(systemBlock);\n\t\t\t\tshow(experimentsBlock);\n\t\t\t\tif (!fileOnExtension) {\n\t\t\t\t\tshow(extensionsBlock);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treset(descriptionTitle, localize('stepsToReproduce', \"Steps to Reproduce\") + ' ', $('span.required-input', undefined, '*'));\n\t\t\treset(descriptionSubtitle, localize('bugDescription', \"Share the steps needed to reliably reproduce the problem. Please include actual and expected results. We support GitHub-flavored Markdown. You will be able to edit your issue and add screenshots when we preview it on GitHub.\"));\n\t\t} else if (issueType === IssueType.PerformanceIssue) {\n\t\t\tif (!fileOnMarketplace) {\n\t\t\t\tshow(blockContainer);\n\t\t\t\tshow(systemBlock);\n\t\t\t\tshow(processBlock);\n\t\t\t\tshow(workspaceBlock);\n\t\t\t\tshow(experimentsBlock);\n\t\t\t}\n\n\t\t\tif (fileOnExtension) {\n\t\t\t\tshow(extensionSelector);\n\t\t\t} else if (!fileOnMarketplace) {\n\t\t\t\tshow(extensionsBlock);\n\t\t\t}\n\n\t\t\treset(descriptionTitle, localize('stepsToReproduce', \"Steps to Reproduce\") + ' ', $('span.required-input', undefined, '*'));\n\t\t\treset(descriptionSubtitle, localize('performanceIssueDesciption', \"When did this performance issue happen? Does it occur on startup or after a specific series of actions? We support GitHub-flavored Markdown. You will be able to edit your issue and add screenshots when we preview it on GitHub.\"));\n\t\t} else if (issueType === IssueType.FeatureRequest) {\n\t\t\treset(descriptionTitle, localize('description', \"Description\") + ' ', $('span.required-input', undefined, '*'));\n\t\t\treset(descriptionSubtitle, localize('featureRequestDescription', \"Please describe the feature you would like to see. We support GitHub-flavored Markdown. You will be able to edit your issue and add screenshots when we preview it on GitHub.\"));\n\t\t}\n\t}\n\n\tpublic validateInput(inputId: string): boolean {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst inputElement = (<HTMLInputElement>this.getElementById(inputId));\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst inputValidationMessage = this.getElementById(`${inputId}-empty-error`);\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst descriptionShortMessage = this.getElementById(`description-short-error`);\n\t\tif (inputId === 'description' && this.nonGitHubIssueUrl && this.data.extensionId) {\n\t\t\treturn true;\n\t\t} else if (!inputElement.value) {\n\t\t\tinputElement.classList.add('invalid-input');\n\t\t\tinputValidationMessage?.classList.remove('hidden');\n\t\t\tdescriptionShortMessage?.classList.add('hidden');\n\t\t\treturn false;\n\t\t} else if (inputId === 'description' && inputElement.value.length < 10) {\n\t\t\tinputElement.classList.add('invalid-input');\n\t\t\tdescriptionShortMessage?.classList.remove('hidden');\n\t\t\tinputValidationMessage?.classList.add('hidden');\n\t\t\treturn false;\n\t\t} else {\n\t\t\tinputElement.classList.remove('invalid-input');\n\t\t\tinputValidationMessage?.classList.add('hidden');\n\t\t\tif (inputId === 'description') {\n\t\t\t\tdescriptionShortMessage?.classList.add('hidden');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic validateInputs(): boolean {\n\t\tlet isValid = true;\n\t\t['issue-title', 'description', 'issue-source'].forEach(elementId => {\n\t\t\tisValid = this.validateInput(elementId) && isValid;\n\t\t});\n\n\t\tif (this.issueReporterModel.fileOnExtension()) {\n\t\t\tisValid = this.validateInput('extension-selector') && isValid;\n\t\t}\n\n\t\treturn isValid;\n\t}\n\n\tpublic async submitToGitHub(issueTitle: string, issueBody: string, gitHubDetails: { owner: string; repositoryName: string }): Promise<boolean> {\n\t\tconst url = `https://api.github.com/repos/${gitHubDetails.owner}/${gitHubDetails.repositoryName}/issues`;\n\t\tconst init = {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\ttitle: issueTitle,\n\t\t\t\tbody: issueBody\n\t\t\t}),\n\t\t\theaders: new Headers({\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': `Bearer ${this.data.githubAccessToken}`,\n\t\t\t\t'User-Agent': 'request'\n\t\t\t})\n\t\t};\n\n\t\tconst response = await fetch(url, init);\n\t\tif (!response.ok) {\n\t\t\tconsole.error('Invalid GitHub URL provided.');\n\t\t\treturn false;\n\t\t}\n\t\tconst result = await response.json();\n\t\tawait this.openLink(result.html_url);\n\t\tthis.close();\n\t\treturn true;\n\t}\n\n\tpublic async createIssue(shouldCreate?: boolean, privateUri?: boolean): Promise<boolean> {\n\t\tconst selectedExtension = this.issueReporterModel.getData().selectedExtension;\n\t\t// Short circuit if the extension provides a custom issue handler\n\t\tif (this.nonGitHubIssueUrl) {\n\t\t\tconst url = this.getExtensionBugsUrl();\n\t\t\tif (url) {\n\t\t\t\tthis.hasBeenSubmitted = true;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.validateInputs()) {\n\t\t\t// If inputs are invalid, set focus to the first one and add listeners on them\n\t\t\t// to detect further changes\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst invalidInput = this.window.document.getElementsByClassName('invalid-input');\n\t\t\tif (invalidInput.length) {\n\t\t\t\t(<HTMLInputElement>invalidInput[0]).focus();\n\t\t\t}\n\n\t\t\tthis.addEventListener('issue-title', 'input', _ => {\n\t\t\t\tthis.validateInput('issue-title');\n\t\t\t});\n\n\t\t\tthis.addEventListener('description', 'input', _ => {\n\t\t\t\tthis.validateInput('description');\n\t\t\t});\n\n\t\t\tthis.addEventListener('issue-source', 'change', _ => {\n\t\t\t\tthis.validateInput('issue-source');\n\t\t\t});\n\n\t\t\tif (this.issueReporterModel.fileOnExtension()) {\n\t\t\t\tthis.addEventListener('extension-selector', 'change', _ => {\n\t\t\t\t\tthis.validateInput('extension-selector');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.hasBeenSubmitted = true;\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst issueTitle = (<HTMLInputElement>this.getElementById('issue-title')).value;\n\t\tconst issueBody = this.issueReporterModel.serialize();\n\n\t\tlet issueUrl = privateUri ? this.getPrivateIssueUrl() : this.getIssueUrl();\n\t\tif (!issueUrl) {\n\t\t\tconsole.error(`No ${privateUri ? 'private ' : ''}issue url found`);\n\t\t\treturn false;\n\t\t}\n\t\tif (selectedExtension?.uri) {\n\t\t\tconst uri = URI.revive(selectedExtension.uri);\n\t\t\tissueUrl = uri.toString();\n\t\t}\n\n\t\tconst gitHubDetails = this.parseGitHubUrl(issueUrl);\n\t\tif (this.data.githubAccessToken && gitHubDetails && shouldCreate) {\n\t\t\treturn this.submitToGitHub(issueTitle, issueBody, gitHubDetails);\n\t\t}\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst baseUrl = this.getIssueUrlWithTitle((<HTMLInputElement>this.getElementById('issue-title')).value, issueUrl);\n\t\tlet url = baseUrl + `&body=${encodeURIComponent(issueBody)}`;\n\n\t\turl = this.addTemplateToUrl(url, gitHubDetails?.owner, gitHubDetails?.repositoryName);\n\n\t\tif (url.length > MAX_URL_LENGTH) {\n\t\t\ttry {\n\t\t\t\turl = await this.writeToClipboard(baseUrl, issueBody);\n\t\t\t\turl = this.addTemplateToUrl(url, gitHubDetails?.owner, gitHubDetails?.repositoryName);\n\t\t\t} catch (_) {\n\t\t\t\tconsole.error('Writing to clipboard failed');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tawait this.openLink(url);\n\n\t\treturn true;\n\t}\n\n\tpublic async writeToClipboard(baseUrl: string, issueBody: string): Promise<string> {\n\t\tconst shouldWrite = await this.issueFormService.showClipboardDialog();\n\t\tif (!shouldWrite) {\n\t\t\tthrow new CancellationError();\n\t\t}\n\n\t\treturn baseUrl + `&body=${encodeURIComponent(localize('pasteData', \"We have written the needed data into your clipboard because it was too large to send. Please paste.\"))}`;\n\t}\n\n\tpublic addTemplateToUrl(baseUrl: string, owner?: string, repositoryName?: string): string {\n\t\tconst isVscode = this.issueReporterModel.getData().fileOnProduct;\n\t\tconst isMicrosoft = owner?.toLowerCase() === 'microsoft';\n\t\tconst needsTemplate = isVscode || (isMicrosoft && (repositoryName === 'vscode' || repositoryName === 'vscode-python'));\n\n\t\tif (needsTemplate) {\n\t\t\ttry {\n\t\t\t\tconst url = new URL(baseUrl);\n\t\t\t\turl.searchParams.set('template', 'bug_report.md');\n\t\t\t\treturn url.toString();\n\t\t\t} catch {\n\t\t\t\t// fallback if baseUrl is not a valid URL\n\t\t\t\treturn baseUrl + '&template=bug_report.md';\n\t\t\t}\n\t\t}\n\t\treturn baseUrl;\n\t}\n\n\tpublic getIssueUrl(): string {\n\t\treturn this.issueReporterModel.fileOnExtension()\n\t\t\t? this.getExtensionGitHubUrl()\n\t\t\t: this.issueReporterModel.getData().fileOnMarketplace\n\t\t\t\t? this.product.reportMarketplaceIssueUrl!\n\t\t\t\t: this.product.reportIssueUrl!;\n\t}\n\n\t// for when command 'workbench.action.openIssueReporter' passes along a\n\t// `privateUri` UriComponents value\n\tpublic getPrivateIssueUrl(): string | undefined {\n\t\treturn URI.revive(this.data.privateUri)?.toString();\n\t}\n\n\tpublic parseGitHubUrl(url: string): undefined | { repositoryName: string; owner: string } {\n\t\t// Assumes a GitHub url to a particular repo, https://github.com/repositoryName/owner.\n\t\t// Repository name and owner cannot contain '/'\n\t\tconst match = /^https?:\\/\\/github\\.com\\/([^\\/]*)\\/([^\\/]*).*/.exec(url);\n\t\tif (match && match.length) {\n\t\t\treturn {\n\t\t\t\towner: match[1],\n\t\t\t\trepositoryName: match[2]\n\t\t\t};\n\t\t} else {\n\t\t\tconsole.error('No GitHub issues match');\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getExtensionGitHubUrl(): string {\n\t\tlet repositoryUrl = '';\n\t\tconst bugsUrl = this.getExtensionBugsUrl();\n\t\tconst extensionUrl = this.getExtensionRepositoryUrl();\n\t\t// If given, try to match the extension's bug url\n\t\tif (bugsUrl && bugsUrl.match(/^https?:\\/\\/github\\.com\\/([^\\/]*)\\/([^\\/]*)\\/?(\\/issues)?$/)) {\n\t\t\t// matches exactly: https://github.com/owner/repo/issues\n\t\t\trepositoryUrl = normalizeGitHubUrl(bugsUrl);\n\t\t} else if (extensionUrl && extensionUrl.match(/^https?:\\/\\/github\\.com\\/([^\\/]*)\\/([^\\/]*)$/)) {\n\t\t\t// matches exactly: https://github.com/owner/repo\n\t\t\trepositoryUrl = normalizeGitHubUrl(extensionUrl);\n\t\t} else {\n\t\t\tthis.nonGitHubIssueUrl = true;\n\t\t\trepositoryUrl = bugsUrl || extensionUrl || '';\n\t\t}\n\n\t\treturn repositoryUrl;\n\t}\n\n\tpublic getIssueUrlWithTitle(issueTitle: string, repositoryUrl: string): string {\n\t\tif (this.issueReporterModel.fileOnExtension()) {\n\t\t\trepositoryUrl = repositoryUrl + '/issues/new';\n\t\t}\n\n\t\tconst queryStringPrefix = repositoryUrl.indexOf('?') === -1 ? '?' : '&';\n\t\treturn `${repositoryUrl}${queryStringPrefix}title=${encodeURIComponent(issueTitle)}`;\n\t}\n\n\tpublic clearExtensionData(): void {\n\t\tthis.nonGitHubIssueUrl = false;\n\t\tthis.issueReporterModel.update({ extensionData: undefined });\n\t\tthis.data.issueBody = this.data.issueBody || '';\n\t\tthis.data.data = undefined;\n\t\tthis.data.uri = undefined;\n\t\tthis.data.privateUri = undefined;\n\t}\n\n\tpublic async updateExtensionStatus(extension: IssueReporterExtensionData) {\n\t\tthis.issueReporterModel.update({ selectedExtension: extension });\n\n\t\t// uses this.configuuration.data to ensure that data is coming from `openReporter` command.\n\t\tconst template = this.data.issueBody;\n\t\tif (template) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst descriptionTextArea = this.getElementById('description')!;\n\t\t\tconst descriptionText = (descriptionTextArea as HTMLTextAreaElement).value;\n\t\t\tif (descriptionText === '' || !descriptionText.includes(template.toString())) {\n\t\t\t\tconst fullTextArea = descriptionText + (descriptionText === '' ? '' : '\\n') + template.toString();\n\t\t\t\t(descriptionTextArea as HTMLTextAreaElement).value = fullTextArea;\n\t\t\t\tthis.issueReporterModel.update({ issueDescription: fullTextArea });\n\t\t\t}\n\t\t}\n\n\t\tconst data = this.data.data;\n\t\tif (data) {\n\t\t\tthis.issueReporterModel.update({ extensionData: data });\n\t\t\textension.data = data;\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst extensionDataBlock = this.window.document.querySelector('.block-extension-data')!;\n\t\t\tshow(extensionDataBlock);\n\t\t\tthis.renderBlocks();\n\t\t}\n\n\t\tconst uri = this.data.uri;\n\t\tif (uri) {\n\t\t\textension.uri = uri;\n\t\t\tthis.updateIssueReporterUri(extension);\n\t\t}\n\n\t\tthis.validateSelectedExtension();\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst title = (<HTMLInputElement>this.getElementById('issue-title')).value;\n\t\tthis.searchExtensionIssues(title);\n\n\t\tthis.updateButtonStates();\n\t\tthis.renderBlocks();\n\t}\n\n\tpublic validateSelectedExtension(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionValidationMessage = this.getElementById('extension-selection-validation-error')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionValidationNoUrlsMessage = this.getElementById('extension-selection-validation-error-no-url')!;\n\t\thide(extensionValidationMessage);\n\t\thide(extensionValidationNoUrlsMessage);\n\n\t\tconst extension = this.issueReporterModel.getData().selectedExtension;\n\t\tif (!extension) {\n\t\t\tthis.publicGithubButton.enabled = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.loadingExtensionData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst hasValidGitHubUrl = this.getExtensionGitHubUrl();\n\t\tif (hasValidGitHubUrl) {\n\t\t\tthis.publicGithubButton.enabled = true;\n\t\t} else {\n\t\t\tthis.setExtensionValidationMessage();\n\t\t\tthis.publicGithubButton.enabled = false;\n\t\t}\n\t}\n\n\tpublic setLoading(element: HTMLElement) {\n\t\t// Show loading\n\t\tthis.openReporter = true;\n\t\tthis.loadingExtensionData = true;\n\t\tthis.updateButtonStates();\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionDataCaption = this.getElementById('extension-id')!;\n\t\thide(extensionDataCaption);\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionDataCaption2 = Array.from(this.window.document.querySelectorAll('.ext-parens'));\n\t\textensionDataCaption2.forEach(extensionDataCaption2 => hide(extensionDataCaption2));\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst showLoading = this.getElementById('ext-loading')!;\n\t\tshow(showLoading);\n\t\twhile (showLoading.firstChild) {\n\t\t\tshowLoading.firstChild.remove();\n\t\t}\n\t\tshowLoading.append(element);\n\n\t\tthis.renderBlocks();\n\t}\n\n\tpublic removeLoading(element: HTMLElement, fromReporter: boolean = false) {\n\t\tthis.openReporter = fromReporter;\n\t\tthis.loadingExtensionData = false;\n\t\tthis.updateButtonStates();\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionDataCaption = this.getElementById('extension-id')!;\n\t\tshow(extensionDataCaption);\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionDataCaption2 = Array.from(this.window.document.querySelectorAll('.ext-parens'));\n\t\textensionDataCaption2.forEach(extensionDataCaption2 => show(extensionDataCaption2));\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst hideLoading = this.getElementById('ext-loading')!;\n\t\thide(hideLoading);\n\t\tif (hideLoading.firstChild) {\n\t\t\telement.remove();\n\t\t}\n\t\tthis.renderBlocks();\n\t}\n\n\tprivate setExtensionValidationMessage(): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionValidationMessage = this.getElementById('extension-selection-validation-error')!;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst extensionValidationNoUrlsMessage = this.getElementById('extension-selection-validation-error-no-url')!;\n\t\tconst bugsUrl = this.getExtensionBugsUrl();\n\t\tif (bugsUrl) {\n\t\t\tshow(extensionValidationMessage);\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst link = this.getElementById('extensionBugsLink')!;\n\t\t\tlink.textContent = bugsUrl;\n\t\t\treturn;\n\t\t}\n\n\t\tconst extensionUrl = this.getExtensionRepositoryUrl();\n\t\tif (extensionUrl) {\n\t\t\tshow(extensionValidationMessage);\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst link = this.getElementById('extensionBugsLink');\n\t\t\tlink!.textContent = extensionUrl;\n\t\t\treturn;\n\t\t}\n\n\t\tshow(extensionValidationNoUrlsMessage);\n\t}\n\n\tprivate updateProcessInfo(state: IssueReporterModelData) {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst target = this.window.document.querySelector('.block-process .block-info') as HTMLElement;\n\t\tif (target) {\n\t\t\treset(target, $('code', undefined, state.processInfo ?? ''));\n\t\t}\n\t}\n\n\tprivate updateWorkspaceInfo(state: IssueReporterModelData) {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tthis.window.document.querySelector('.block-workspace .block-info code')!.textContent = '\\n' + state.workspaceInfo;\n\t}\n\n\tpublic updateExtensionTable(extensions: IssueReporterExtensionData[], numThemeExtensions: number): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst target = this.window.document.querySelector<HTMLElement>('.block-extensions .block-info');\n\t\tif (target) {\n\t\t\tif (this.disableExtensions) {\n\t\t\t\treset(target, localize('disabledExtensions', \"Extensions are disabled\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst themeExclusionStr = numThemeExtensions ? `\\n(${numThemeExtensions} theme extensions excluded)` : '';\n\t\t\textensions = extensions || [];\n\n\t\t\tif (!extensions.length) {\n\t\t\t\ttarget.innerText = 'Extensions: none' + themeExclusionStr;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treset(target, this.getExtensionTableHtml(extensions), document.createTextNode(themeExclusionStr));\n\t\t}\n\t}\n\n\tprivate getExtensionTableHtml(extensions: IssueReporterExtensionData[]): HTMLTableElement {\n\t\treturn $('table', undefined,\n\t\t\t$('tr', undefined,\n\t\t\t\t$('th', undefined, 'Extension'),\n\t\t\t\t$('th', undefined, 'Author (truncated)' as string),\n\t\t\t\t$('th', undefined, 'Version')\n\t\t\t),\n\t\t\t...extensions.map(extension => $('tr', undefined,\n\t\t\t\t$('td', undefined, extension.name),\n\t\t\t\t$('td', undefined, extension.publisher?.substr(0, 3) ?? 'N/A'),\n\t\t\t\t$('td', undefined, extension.version)\n\t\t\t))\n\t\t);\n\t}\n\n\tprivate async openLink(eventOrUrl: MouseEvent | string): Promise<void> {\n\t\tif (typeof eventOrUrl === 'string') {\n\t\t\t// Direct URL call\n\t\t\tawait this.openerService.open(eventOrUrl, { openExternal: true });\n\t\t} else {\n\t\t\t// MouseEvent call\n\t\t\tconst event = eventOrUrl;\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\t// Exclude right click\n\t\t\tif (event.which < 3) {\n\t\t\t\tawait this.openerService.open((<HTMLAnchorElement>event.target).href, { openExternal: true });\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic getElementById<T extends HTMLElement = HTMLElement>(elementId: string): T | undefined {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst element = this.window.document.getElementById(elementId) as T | undefined;\n\t\tif (element) {\n\t\t\treturn element;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tpublic addEventListener(elementId: string, eventType: string, handler: (event: Event) => void): void {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst element = this.getElementById(elementId);\n\t\telement?.addEventListener(eventType, handler);\n\t}\n}\n\n// helper functions\n\nexport function hide(el: Element | undefined | null) {\n\tel?.classList.add('hidden');\n}\nexport function show(el: Element | undefined | null) {\n\tel?.classList.remove('hidden');\n}\n"]}