{"version":3,"sources":["vs/workbench/contrib/workspace/browser/workspace.contribution.ts"],"names":[],"mappings":"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","file":"workspace.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/workspaceTrustEditor.css';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ConfigurationScope, Extensions as ConfigurationExtensions, IConfigurationRegistry } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Severity } from '../../../../platform/notification/common/notification.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkspaceTrustEnablementService, IWorkspaceTrustManagementService, IWorkspaceTrustRequestService, WorkspaceTrustUriResponse } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { Extensions as WorkbenchExtensions, IWorkbenchContribution, IWorkbenchContributionsRegistry, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IStatusbarEntry, IStatusbarEntryAccessor, IStatusbarService, StatusbarAlignment } from '../../../services/statusbar/browser/statusbar.js';\nimport { IEditorPaneRegistry, EditorPaneDescriptor } from '../../../browser/editor.js';\nimport { shieldIcon, WorkspaceTrustEditor } from './workspaceTrustEditor.js';\nimport { WorkspaceTrustEditorInput } from '../../../services/workspaces/browser/workspaceTrustEditorInput.js';\nimport { WORKSPACE_TRUST_BANNER, WORKSPACE_TRUST_EMPTY_WINDOW, WORKSPACE_TRUST_ENABLED, WORKSPACE_TRUST_STARTUP_PROMPT, WORKSPACE_TRUST_UNTRUSTED_FILES } from '../../../services/workspaces/common/workspaceTrust.js';\nimport { IEditorSerializer, IEditorFactoryRegistry, EditorExtensions } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { isEmptyWorkspaceIdentifier, ISingleFolderWorkspaceIdentifier, isSingleFolderWorkspaceIdentifier, IWorkspaceContextService, IWorkspaceFoldersWillChangeEvent, toWorkspaceIdentifier, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { dirname, resolve } from '../../../../base/common/path.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IBannerItem, IBannerService } from '../../../services/banner/browser/bannerService.js';\nimport { isVirtualWorkspace } from '../../../../platform/workspace/common/virtualWorkspace.js';\nimport { LIST_WORKSPACE_UNSUPPORTED_EXTENSIONS_COMMAND_ID } from '../../extensions/common/extensions.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { WORKSPACE_TRUST_SETTING_TAG } from '../../preferences/common/preferences.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { ILabelService, Verbosity } from '../../../../platform/label/common/label.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { MANAGE_TRUST_COMMAND_ID, WorkspaceTrustContext } from '../common/workspace.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { securityConfigurationNodeBase } from '../../../common/configuration.js';\nimport { basename, dirname as uriDirname } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\n\nconst BANNER_RESTRICTED_MODE = 'workbench.banner.restrictedMode';\nconst STARTUP_PROMPT_SHOWN_KEY = 'workspace.trust.startupPrompt.shown';\nconst BANNER_RESTRICTED_MODE_DISMISSED_KEY = 'workbench.banner.restrictedMode.dismissed';\n\nexport class WorkspaceTrustContextKeys extends Disposable implements IWorkbenchContribution {\n\n\tprivate readonly _ctxWorkspaceTrustEnabled: IContextKey<boolean>;\n\tprivate readonly _ctxWorkspaceTrustState: IContextKey<boolean>;\n\n\tconstructor(\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IWorkspaceTrustEnablementService workspaceTrustEnablementService: IWorkspaceTrustEnablementService,\n\t\t@IWorkspaceTrustManagementService workspaceTrustManagementService: IWorkspaceTrustManagementService\n\t) {\n\t\tsuper();\n\n\t\tthis._ctxWorkspaceTrustEnabled = WorkspaceTrustContext.IsEnabled.bindTo(contextKeyService);\n\t\tthis._ctxWorkspaceTrustEnabled.set(workspaceTrustEnablementService.isWorkspaceTrustEnabled());\n\n\t\tthis._ctxWorkspaceTrustState = WorkspaceTrustContext.IsTrusted.bindTo(contextKeyService);\n\t\tthis._ctxWorkspaceTrustState.set(workspaceTrustManagementService.isWorkspaceTrusted());\n\n\t\tthis._register(workspaceTrustManagementService.onDidChangeTrust(trusted => this._ctxWorkspaceTrustState.set(trusted)));\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(WorkspaceTrustContextKeys, LifecyclePhase.Restored);\n\n\n/*\n * Trust Request via Service UX handler\n */\n\nexport class WorkspaceTrustRequestHandler extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.workspaceTrustRequestHandler';\n\n\tconstructor(\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkspaceTrustRequestService private readonly workspaceTrustRequestService: IWorkspaceTrustRequestService) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate get useWorkspaceLanguage(): boolean {\n\t\treturn !isSingleFolderWorkspaceIdentifier(toWorkspaceIdentifier(this.workspaceContextService.getWorkspace()));\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Open files trust request\n\t\tthis._register(this.workspaceTrustRequestService.onDidInitiateOpenFilesTrustRequest(async () => {\n\t\t\tawait this.workspaceTrustManagementService.workspaceResolved;\n\n\t\t\t// Details\n\t\t\tconst markdownDetails = [\n\t\t\t\tthis.workspaceContextService.getWorkbenchState() !== WorkbenchState.EMPTY ?\n\t\t\t\t\tlocalize('openLooseFileWorkspaceDetails', \"You are trying to open untrusted files in a workspace which is trusted.\") :\n\t\t\t\t\tlocalize('openLooseFileWindowDetails', \"You are trying to open untrusted files in a window which is trusted.\"),\n\t\t\t\tlocalize('openLooseFileLearnMore', \"If you don't want to open untrusted files, we recommend to open them in Restricted Mode in a new window as the files may be malicious. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more.\")\n\t\t\t];\n\n\t\t\t// Dialog\n\t\t\tawait this.dialogService.prompt<void>({\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage: this.workspaceContextService.getWorkbenchState() !== WorkbenchState.EMPTY ?\n\t\t\t\t\tlocalize('openLooseFileWorkspaceMesssage', \"Do you want to allow untrusted files in this workspace?\") :\n\t\t\t\t\tlocalize('openLooseFileWindowMesssage', \"Do you want to allow untrusted files in this window?\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize({ key: 'open', comment: ['&& denotes a mnemonic'] }, \"&&Open\"),\n\t\t\t\t\t\trun: ({ checkboxChecked }) => this.workspaceTrustRequestService.completeOpenFilesTrustRequest(WorkspaceTrustUriResponse.Open, !!checkboxChecked)\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize({ key: 'newWindow', comment: ['&& denotes a mnemonic'] }, \"Open in &&Restricted Mode\"),\n\t\t\t\t\t\trun: ({ checkboxChecked }) => this.workspaceTrustRequestService.completeOpenFilesTrustRequest(WorkspaceTrustUriResponse.OpenInNewWindow, !!checkboxChecked)\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tcancelButton: {\n\t\t\t\t\trun: () => this.workspaceTrustRequestService.completeOpenFilesTrustRequest(WorkspaceTrustUriResponse.Cancel)\n\t\t\t\t},\n\t\t\t\tcheckbox: {\n\t\t\t\t\tlabel: localize('openLooseFileWorkspaceCheckbox', \"Remember my decision for all workspaces\"),\n\t\t\t\t\tchecked: false\n\t\t\t\t},\n\t\t\t\tcustom: {\n\t\t\t\t\ticon: Codicon.shield,\n\t\t\t\t\tmarkdownDetails: markdownDetails.map(md => { return { markdown: new MarkdownString(md) }; })\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\t// Workspace trust request\n\t\tthis._register(this.workspaceTrustRequestService.onDidInitiateWorkspaceTrustRequest(async requestOptions => {\n\t\t\tawait this.workspaceTrustManagementService.workspaceResolved;\n\n\t\t\t// Title\n\t\t\tconst message = this.useWorkspaceLanguage ?\n\t\t\t\tlocalize('workspaceTrust', \"Do you trust the authors of the files in this workspace?\") :\n\t\t\t\tlocalize('folderTrust', \"Do you trust the authors of the files in this folder?\");\n\n\t\t\t// Message\n\t\t\tconst defaultDetails = localize('immediateTrustRequestMessage', \"A feature you are trying to use may be a security risk if you do not trust the source of the files or folders you currently have open.\");\n\t\t\tconst details = requestOptions?.message ?? defaultDetails;\n\n\t\t\t// Buttons\n\t\t\tconst buttons = requestOptions?.buttons ?? [\n\t\t\t\t{ label: this.useWorkspaceLanguage ? localize({ key: 'grantWorkspaceTrustButton', comment: ['&& denotes a mnemonic'] }, \"&&Trust Workspace & Continue\") : localize({ key: 'grantFolderTrustButton', comment: ['&& denotes a mnemonic'] }, \"&&Trust Folder & Continue\"), type: 'ContinueWithTrust' },\n\t\t\t\t{ label: localize({ key: 'manageWorkspaceTrustButton', comment: ['&& denotes a mnemonic'] }, \"&&Manage\"), type: 'Manage' }\n\t\t\t];\n\n\t\t\t// Add Cancel button if not provided\n\t\t\tif (!buttons.some(b => b.type === 'Cancel')) {\n\t\t\t\tbuttons.push({ label: localize('cancelWorkspaceTrustButton', \"Cancel\"), type: 'Cancel' });\n\t\t\t}\n\n\t\t\t// Dialog\n\t\t\tconst { result } = await this.dialogService.prompt({\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage,\n\t\t\t\tcustom: {\n\t\t\t\t\ticon: Codicon.shield,\n\t\t\t\t\tmarkdownDetails: [\n\t\t\t\t\t\t{ markdown: new MarkdownString(details) },\n\t\t\t\t\t\t{ markdown: new MarkdownString(localize('immediateTrustRequestLearnMore', \"If you don't trust the authors of these files, we do not recommend continuing as the files may be malicious. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more.\")) }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tbuttons: buttons.filter(b => b.type !== 'Cancel').map(button => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: button.label,\n\t\t\t\t\t\trun: () => button.type\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\tcancelButton: (() => {\n\t\t\t\t\tconst cancelButton = buttons.find(b => b.type === 'Cancel');\n\t\t\t\t\tif (!cancelButton) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: cancelButton.label,\n\t\t\t\t\t\trun: () => cancelButton.type\n\t\t\t\t\t};\n\t\t\t\t})()\n\t\t\t});\n\n\n\t\t\t// Dialog result\n\t\t\tswitch (result) {\n\t\t\t\tcase 'ContinueWithTrust':\n\t\t\t\t\tawait this.workspaceTrustRequestService.completeWorkspaceTrustRequest(true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ContinueWithoutTrust':\n\t\t\t\t\tawait this.workspaceTrustRequestService.completeWorkspaceTrustRequest(undefined);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Manage':\n\t\t\t\t\tthis.workspaceTrustRequestService.cancelWorkspaceTrustRequest();\n\t\t\t\t\tawait this.commandService.executeCommand(MANAGE_TRUST_COMMAND_ID);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Cancel':\n\t\t\t\t\tthis.workspaceTrustRequestService.cancelWorkspaceTrustRequest();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}));\n\t}\n}\n\n\n/*\n * Trust UX and Startup Handler\n */\nexport class WorkspaceTrustUXHandler extends Disposable implements IWorkbenchContribution {\n\n\tprivate readonly entryId = `status.workspaceTrust`;\n\n\tprivate readonly statusbarEntryAccessor: MutableDisposable<IStatusbarEntryAccessor>;\n\n\tconstructor(\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IWorkspaceTrustEnablementService private readonly workspaceTrustEnablementService: IWorkspaceTrustEnablementService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceTrustRequestService private readonly workspaceTrustRequestService: IWorkspaceTrustRequestService,\n\t\t@IBannerService private readonly bannerService: IBannerService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IRemoteAgentService private readonly remoteAgentService: IRemoteAgentService,\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t) {\n\t\tsuper();\n\n\t\tthis.statusbarEntryAccessor = this._register(new MutableDisposable<IStatusbarEntryAccessor>());\n\n\t\t(async () => {\n\n\t\t\tawait this.workspaceTrustManagementService.workspaceTrustInitialized;\n\n\t\t\tif (this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()) {\n\t\t\t\tthis.registerListeners();\n\t\t\t\tthis.updateStatusbarEntry(this.workspaceTrustManagementService.isWorkspaceTrusted());\n\n\t\t\t\t// Show modal dialog\n\t\t\t\tif (this.hostService.hasFocus) {\n\t\t\t\t\tthis.showModalOnStart();\n\t\t\t\t} else {\n\t\t\t\t\tconst focusDisposable = this.hostService.onDidChangeFocus(focused => {\n\t\t\t\t\t\tif (focused) {\n\t\t\t\t\t\t\tfocusDisposable.dispose();\n\t\t\t\t\t\t\tthis.showModalOnStart();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.workspaceContextService.onWillChangeWorkspaceFolders(e => {\n\t\t\tif (e.fromCache) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst addWorkspaceFolder = async (e: IWorkspaceFoldersWillChangeEvent): Promise<void> => {\n\t\t\t\tconst trusted = this.workspaceTrustManagementService.isWorkspaceTrusted();\n\n\t\t\t\t// Workspace is trusted and there are added/changed folders\n\t\t\t\tif (trusted && (e.changes.added.length || e.changes.changed.length)) {\n\t\t\t\t\tconst addedFoldersTrustInfo = await Promise.all(e.changes.added.map(folder => this.workspaceTrustManagementService.getUriTrustInfo(folder.uri)));\n\n\t\t\t\t\tif (!addedFoldersTrustInfo.map(info => info.trusted).every(trusted => trusted)) {\n\t\t\t\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\t\t\t\ttype: Severity.Info,\n\t\t\t\t\t\t\tmessage: localize('addWorkspaceFolderMessage', \"Do you trust the authors of the files in this folder?\"),\n\t\t\t\t\t\t\tdetail: localize('addWorkspaceFolderDetail', \"You are adding files that are not currently trusted to a trusted workspace. Do you trust the authors of these new files?\"),\n\t\t\t\t\t\t\tcancelButton: localize('no', 'No'),\n\t\t\t\t\t\t\tcustom: { icon: Codicon.shield }\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Mark added/changed folders as trusted\n\t\t\t\t\t\tawait this.workspaceTrustManagementService.setUrisTrust(addedFoldersTrustInfo.map(i => i.uri), confirmed);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn e.join(addWorkspaceFolder(e));\n\t\t}));\n\n\t\tthis._register(this.workspaceTrustManagementService.onDidChangeTrust(trusted => {\n\t\t\tthis.updateWorkbenchIndicators(trusted);\n\t\t}));\n\n\t\tthis._register(this.workspaceTrustRequestService.onDidInitiateWorkspaceTrustRequestOnStartup(async () => {\n\n\t\t\tlet titleString: string | undefined;\n\t\t\tlet learnMoreString: string | undefined;\n\t\t\tlet trustOption: string | undefined;\n\t\t\tlet dontTrustOption: string | undefined;\n\t\t\tconst isAiGeneratedWorkspace = await this.isAiGeneratedWorkspace();\n\t\t\tif (isAiGeneratedWorkspace && this.productService.aiGeneratedWorkspaceTrust) {\n\t\t\t\ttitleString = this.productService.aiGeneratedWorkspaceTrust.title;\n\t\t\t\tlearnMoreString = this.productService.aiGeneratedWorkspaceTrust.startupTrustRequestLearnMore;\n\t\t\t\ttrustOption = this.productService.aiGeneratedWorkspaceTrust.trustOption;\n\t\t\t\tdontTrustOption = this.productService.aiGeneratedWorkspaceTrust.dontTrustOption;\n\t\t\t} else {\n\t\t\t\tconsole.warn('AI generated workspace trust dialog contents not available.');\n\t\t\t}\n\n\t\t\tconst title = titleString ?? (this.useWorkspaceLanguage ?\n\t\t\t\tlocalize('workspaceTrust', \"Do you trust the authors of the files in this workspace?\") :\n\t\t\t\tlocalize('folderTrust', \"Do you trust the authors of the files in this folder?\"));\n\n\t\t\tlet checkboxText: string | undefined;\n\t\t\tconst workspaceIdentifier = toWorkspaceIdentifier(this.workspaceContextService.getWorkspace());\n\t\t\tconst isSingleFolderWorkspace = isSingleFolderWorkspaceIdentifier(workspaceIdentifier);\n\t\t\tconst isEmptyWindow = isEmptyWorkspaceIdentifier(workspaceIdentifier);\n\t\t\tif (!isAiGeneratedWorkspace && this.workspaceTrustManagementService.canSetParentFolderTrust()) {\n\t\t\t\tconst name = basename(uriDirname((workspaceIdentifier as ISingleFolderWorkspaceIdentifier).uri));\n\t\t\t\tcheckboxText = localize('checkboxString', \"Trust the authors of all files in the parent folder '{0}'\", name);\n\t\t\t}\n\n\t\t\t// Show Workspace Trust Start Dialog\n\t\t\tthis.doShowModal(\n\t\t\t\ttitle,\n\t\t\t\t{ label: trustOption ?? localize({ key: 'trustOption', comment: ['&& denotes a mnemonic'] }, \"&&Yes, I trust the authors\"), sublabel: isSingleFolderWorkspace ? localize('trustFolderOptionDescription', \"Trust folder and enable all features\") : localize('trustWorkspaceOptionDescription', \"Trust workspace and enable all features\") },\n\t\t\t\t{ label: dontTrustOption ?? localize({ key: 'dontTrustOption', comment: ['&& denotes a mnemonic'] }, \"&&No, I don't trust the authors\"), sublabel: isSingleFolderWorkspace ? localize('dontTrustFolderOptionDescription', \"Browse folder in restricted mode\") : localize('dontTrustWorkspaceOptionDescription', \"Browse workspace in restricted mode\") },\n\t\t\t\t[\n\t\t\t\t\t!isSingleFolderWorkspace ?\n\t\t\t\t\t\tlocalize('workspaceStartupTrustDetails', \"{0} provides features that may automatically execute files in this workspace.\", this.productService.nameShort) :\n\t\t\t\t\t\tlocalize('folderStartupTrustDetails', \"{0} provides features that may automatically execute files in this folder.\", this.productService.nameShort),\n\t\t\t\t\tlearnMoreString ?? localize('startupTrustRequestLearnMore', \"If you don't trust the authors of these files, we recommend to continue in restricted mode as the files may be malicious. See [our docs](https://aka.ms/vscode-workspace-trust) to learn more.\"),\n\t\t\t\t\t!isEmptyWindow ?\n\t\t\t\t\t\t`\\`${this.labelService.getWorkspaceLabel(workspaceIdentifier, { verbose: Verbosity.LONG })}\\`` : '',\n\t\t\t\t],\n\t\t\t\tcheckboxText\n\t\t\t);\n\t\t}));\n\t}\n\n\tprivate updateWorkbenchIndicators(trusted: boolean): void {\n\t\tconst bannerItem = this.getBannerItem(!trusted);\n\n\t\tthis.updateStatusbarEntry(trusted);\n\n\t\tif (bannerItem) {\n\t\t\tif (!trusted) {\n\t\t\t\tthis.bannerService.show(bannerItem);\n\t\t\t} else {\n\t\t\t\tthis.bannerService.hide(BANNER_RESTRICTED_MODE);\n\t\t\t}\n\t\t}\n\t}\n\n\t//#region Dialog\n\n\tprivate async doShowModal(question: string, trustedOption: { label: string; sublabel: string }, untrustedOption: { label: string; sublabel: string }, markdownStrings: string[], trustParentString?: string): Promise<void> {\n\t\tawait this.dialogService.prompt({\n\t\t\ttype: Severity.Info,\n\t\t\tmessage: question,\n\t\t\tcheckbox: trustParentString ? {\n\t\t\t\tlabel: trustParentString\n\t\t\t} : undefined,\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: trustedOption.label,\n\t\t\t\t\trun: async ({ checkboxChecked }) => {\n\t\t\t\t\t\tif (checkboxChecked) {\n\t\t\t\t\t\t\tawait this.workspaceTrustManagementService.setParentFolderTrust(true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tawait this.workspaceTrustRequestService.completeWorkspaceTrustRequest(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: untrustedOption.label,\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthis.updateWorkbenchIndicators(false);\n\t\t\t\t\t\tthis.workspaceTrustRequestService.cancelWorkspaceTrustRequest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tcustom: {\n\t\t\t\tbuttonDetails: [\n\t\t\t\t\ttrustedOption.sublabel,\n\t\t\t\t\tuntrustedOption.sublabel\n\t\t\t\t],\n\t\t\t\tdisableCloseAction: true,\n\t\t\t\ticon: Codicon.shield,\n\t\t\t\tmarkdownDetails: markdownStrings.map(md => { return { markdown: new MarkdownString(md) }; })\n\t\t\t}\n\t\t});\n\n\t\tthis.storageService.store(STARTUP_PROMPT_SHOWN_KEY, true, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\tprivate async showModalOnStart(): Promise<void> {\n\t\tif (this.workspaceTrustManagementService.isWorkspaceTrusted()) {\n\t\t\tthis.updateWorkbenchIndicators(true);\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't show modal prompt if workspace trust cannot be changed\n\t\tif (!(this.workspaceTrustManagementService.canSetWorkspaceTrust())) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't show modal prompt for virtual workspaces by default\n\t\tif (isVirtualWorkspace(this.workspaceContextService.getWorkspace())) {\n\t\t\tthis.updateWorkbenchIndicators(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't show modal prompt for empty workspaces by default\n\t\tif (this.workspaceContextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\tthis.updateWorkbenchIndicators(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.startupPromptSetting === 'never') {\n\t\t\tthis.updateWorkbenchIndicators(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.startupPromptSetting === 'once' && this.storageService.getBoolean(STARTUP_PROMPT_SHOWN_KEY, StorageScope.WORKSPACE, false)) {\n\t\t\tthis.updateWorkbenchIndicators(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Use the workspace trust request service to show modal dialog\n\t\tthis.workspaceTrustRequestService.requestWorkspaceTrustOnStartup();\n\t}\n\n\tprivate get startupPromptSetting(): 'always' | 'once' | 'never' {\n\t\treturn this.configurationService.getValue(WORKSPACE_TRUST_STARTUP_PROMPT);\n\t}\n\n\tprivate get useWorkspaceLanguage(): boolean {\n\t\treturn !isSingleFolderWorkspaceIdentifier(toWorkspaceIdentifier(this.workspaceContextService.getWorkspace()));\n\t}\n\n\tprivate async isAiGeneratedWorkspace(): Promise<boolean> {\n\t\tconst aiGeneratedWorkspaces = URI.joinPath(this.environmentService.workspaceStorageHome, 'aiGeneratedWorkspaces.json');\n\t\treturn await this.fileService.exists(aiGeneratedWorkspaces).then(async result => {\n\t\t\tif (result) {\n\t\t\t\ttry {\n\t\t\t\t\tconst content = await this.fileService.readFile(aiGeneratedWorkspaces);\n\t\t\t\t\tconst workspaces = JSON.parse(content.value.toString()) as string[];\n\t\t\t\t\tif (workspaces.indexOf(this.workspaceContextService.getWorkspace().folders[0].uri.toString()) > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// Ignore errors when resolving file contents\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t//#endregion\n\n\t//#region Banner\n\n\tprivate getBannerItem(restrictedMode: boolean): IBannerItem | undefined {\n\t\tconst dismissedRestricted = this.storageService.getBoolean(BANNER_RESTRICTED_MODE_DISMISSED_KEY, StorageScope.WORKSPACE, false);\n\n\t\t// never show the banner\n\t\tif (this.bannerSetting === 'never') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// info has been dismissed\n\t\tif (this.bannerSetting === 'untilDismissed' && dismissedRestricted) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst actions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('restrictedModeBannerManage', \"Manage\"),\n\t\t\t\t\thref: 'command:' + MANAGE_TRUST_COMMAND_ID\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('restrictedModeBannerLearnMore', \"Learn More\"),\n\t\t\t\t\thref: 'https://aka.ms/vscode-workspace-trust'\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn {\n\t\t\tid: BANNER_RESTRICTED_MODE,\n\t\t\ticon: shieldIcon,\n\t\t\tariaLabel: this.getBannerItemAriaLabels(),\n\t\t\tmessage: this.getBannerItemMessages(),\n\t\t\tactions,\n\t\t\tonClose: () => {\n\t\t\t\tif (restrictedMode) {\n\t\t\t\t\tthis.storageService.store(BANNER_RESTRICTED_MODE_DISMISSED_KEY, true, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate getBannerItemAriaLabels(): string {\n\t\tswitch (this.workspaceContextService.getWorkbenchState()) {\n\t\t\tcase WorkbenchState.EMPTY:\n\t\t\t\treturn localize('restrictedModeBannerAriaLabelWindow', \"Restricted Mode is intended for safe code browsing. Trust this window to enable all features. Use navigation keys to access banner actions.\");\n\t\t\tcase WorkbenchState.FOLDER:\n\t\t\t\treturn localize('restrictedModeBannerAriaLabelFolder', \"Restricted Mode is intended for safe code browsing. Trust this folder to enable all features. Use navigation keys to access banner actions.\");\n\t\t\tcase WorkbenchState.WORKSPACE:\n\t\t\t\treturn localize('restrictedModeBannerAriaLabelWorkspace', \"Restricted Mode is intended for safe code browsing. Trust this workspace to enable all features. Use navigation keys to access banner actions.\");\n\t\t}\n\t}\n\n\tprivate getBannerItemMessages(): string {\n\t\tswitch (this.workspaceContextService.getWorkbenchState()) {\n\t\t\tcase WorkbenchState.EMPTY:\n\t\t\t\treturn localize('restrictedModeBannerMessageWindow', \"Restricted Mode is intended for safe code browsing. Trust this window to enable all features.\");\n\t\t\tcase WorkbenchState.FOLDER:\n\t\t\t\treturn localize('restrictedModeBannerMessageFolder', \"Restricted Mode is intended for safe code browsing. Trust this folder to enable all features.\");\n\t\t\tcase WorkbenchState.WORKSPACE:\n\t\t\t\treturn localize('restrictedModeBannerMessageWorkspace', \"Restricted Mode is intended for safe code browsing. Trust this workspace to enable all features.\");\n\t\t}\n\t}\n\n\n\tprivate get bannerSetting(): 'always' | 'untilDismissed' | 'never' {\n\t\tconst result = this.configurationService.getValue<'always' | 'untilDismissed' | 'never'>(WORKSPACE_TRUST_BANNER);\n\n\t\t// In serverless environments, we don't need to aggressively show the banner\n\t\tif (result !== 'always' && isWeb && !this.remoteAgentService.getConnection()?.remoteAuthority) {\n\t\t\treturn 'never';\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t//#endregion\n\n\t//#region Statusbar\n\n\tprivate getRestrictedModeStatusbarEntry(): IStatusbarEntry {\n\t\tlet ariaLabel = '';\n\t\tlet toolTip: IMarkdownString | string | undefined;\n\t\tswitch (this.workspaceContextService.getWorkbenchState()) {\n\t\t\tcase WorkbenchState.EMPTY: {\n\t\t\t\tariaLabel = localize('status.ariaUntrustedWindow', \"Restricted Mode: Some features are disabled because this window is not trusted.\");\n\t\t\t\ttoolTip = {\n\t\t\t\t\tvalue: localize(\n\t\t\t\t\t\t{ key: 'status.tooltipUntrustedWindow2', comment: ['[abc]({n}) are links.  Only translate `features are disabled` and `window is not trusted`. Do not change brackets and parentheses or {n}'] },\n\t\t\t\t\t\t\"Running in Restricted Mode\\n\\nSome [features are disabled]({0}) because this [window is not trusted]({1}).\",\n\t\t\t\t\t\t`command:${LIST_WORKSPACE_UNSUPPORTED_EXTENSIONS_COMMAND_ID}`,\n\t\t\t\t\t\t`command:${MANAGE_TRUST_COMMAND_ID}`\n\t\t\t\t\t),\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase WorkbenchState.FOLDER: {\n\t\t\t\tariaLabel = localize('status.ariaUntrustedFolder', \"Restricted Mode: Some features are disabled because this folder is not trusted.\");\n\t\t\t\ttoolTip = {\n\t\t\t\t\tvalue: localize(\n\t\t\t\t\t\t{ key: 'status.tooltipUntrustedFolder2', comment: ['[abc]({n}) are links.  Only translate `features are disabled` and `folder is not trusted`. Do not change brackets and parentheses or {n}'] },\n\t\t\t\t\t\t\"Running in Restricted Mode\\n\\nSome [features are disabled]({0}) because this [folder is not trusted]({1}).\",\n\t\t\t\t\t\t`command:${LIST_WORKSPACE_UNSUPPORTED_EXTENSIONS_COMMAND_ID}`,\n\t\t\t\t\t\t`command:${MANAGE_TRUST_COMMAND_ID}`\n\t\t\t\t\t),\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase WorkbenchState.WORKSPACE: {\n\t\t\t\tariaLabel = localize('status.ariaUntrustedWorkspace', \"Restricted Mode: Some features are disabled because this workspace is not trusted.\");\n\t\t\t\ttoolTip = {\n\t\t\t\t\tvalue: localize(\n\t\t\t\t\t\t{ key: 'status.tooltipUntrustedWorkspace2', comment: ['[abc]({n}) are links. Only translate `features are disabled` and `workspace is not trusted`. Do not change brackets and parentheses or {n}'] },\n\t\t\t\t\t\t\"Running in Restricted Mode\\n\\nSome [features are disabled]({0}) because this [workspace is not trusted]({1}).\",\n\t\t\t\t\t\t`command:${LIST_WORKSPACE_UNSUPPORTED_EXTENSIONS_COMMAND_ID}`,\n\t\t\t\t\t\t`command:${MANAGE_TRUST_COMMAND_ID}`\n\t\t\t\t\t),\n\t\t\t\t\tisTrusted: true,\n\t\t\t\t\tsupportThemeIcons: true\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tname: localize('status.WorkspaceTrust', \"Workspace Trust\"),\n\t\t\ttext: `$(shield) ${localize('untrusted', \"Restricted Mode\")}`,\n\t\t\tariaLabel: ariaLabel,\n\t\t\ttooltip: toolTip,\n\t\t\tcommand: MANAGE_TRUST_COMMAND_ID,\n\t\t\tkind: 'prominent'\n\t\t};\n\t}\n\n\tprivate updateStatusbarEntry(trusted: boolean): void {\n\t\tif (trusted && this.statusbarEntryAccessor.value) {\n\t\t\tthis.statusbarEntryAccessor.clear();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!trusted && !this.statusbarEntryAccessor.value) {\n\t\t\tconst entry = this.getRestrictedModeStatusbarEntry();\n\t\t\tthis.statusbarEntryAccessor.value = this.statusbarService.addEntry(entry, this.entryId, StatusbarAlignment.LEFT, { location: { id: 'status.host', priority: Number.POSITIVE_INFINITY }, alignment: StatusbarAlignment.RIGHT });\n\t\t}\n\t}\n\n\t//#endregion\n}\n\nregisterWorkbenchContribution2(WorkspaceTrustRequestHandler.ID, WorkspaceTrustRequestHandler, WorkbenchPhase.BlockRestore);\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(WorkspaceTrustUXHandler, LifecyclePhase.Restored);\n\n\n/**\n * Trusted Workspace GUI Editor\n */\nclass WorkspaceTrustEditorInputSerializer implements IEditorSerializer {\n\n\tcanSerialize(editorInput: EditorInput): boolean {\n\t\treturn true;\n\t}\n\n\tserialize(input: WorkspaceTrustEditorInput): string {\n\t\treturn '';\n\t}\n\n\tdeserialize(instantiationService: IInstantiationService): WorkspaceTrustEditorInput {\n\t\treturn instantiationService.createInstance(WorkspaceTrustEditorInput);\n\t}\n}\n\nRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory)\n\t.registerEditorSerializer(WorkspaceTrustEditorInput.ID, WorkspaceTrustEditorInputSerializer);\n\nRegistry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane).registerEditorPane(\n\tEditorPaneDescriptor.create(\n\t\tWorkspaceTrustEditor,\n\t\tWorkspaceTrustEditor.ID,\n\t\tlocalize('workspaceTrustEditor', \"Workspace Trust Editor\")\n\t),\n\t[\n\t\tnew SyncDescriptor(WorkspaceTrustEditorInput)\n\t]\n);\n\n\n/*\n * Actions\n */\n\n// Configure Workspace Trust Settings\n\nconst CONFIGURE_TRUST_COMMAND_ID = 'workbench.trust.configure';\nconst WORKSPACES_CATEGORY = localize2('workspacesCategory', 'Workspaces');\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CONFIGURE_TRUST_COMMAND_ID,\n\t\t\ttitle: localize2('configureWorkspaceTrustSettings', \"Configure Workspace Trust Settings\"),\n\t\t\tprecondition: ContextKeyExpr.and(WorkspaceTrustContext.IsEnabled, ContextKeyExpr.equals(`config.${WORKSPACE_TRUST_ENABLED}`, true)),\n\t\t\tcategory: WORKSPACES_CATEGORY,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\taccessor.get(IPreferencesService).openUserSettings({ jsonEditor: false, query: `@tag:${WORKSPACE_TRUST_SETTING_TAG}` });\n\t}\n});\n\n// Manage Workspace Trust\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: MANAGE_TRUST_COMMAND_ID,\n\t\t\ttitle: localize2('manageWorkspaceTrust', \"Manage Workspace Trust\"),\n\t\t\tprecondition: ContextKeyExpr.and(WorkspaceTrustContext.IsEnabled, ContextKeyExpr.equals(`config.${WORKSPACE_TRUST_ENABLED}`, true)),\n\t\t\tcategory: WORKSPACES_CATEGORY,\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\n\t\tconst input = instantiationService.createInstance(WorkspaceTrustEditorInput);\n\n\t\teditorService.openEditor(input, { pinned: true });\n\t\treturn;\n\t}\n});\n\n\n/*\n * Configuration\n */\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration)\n\t.registerConfiguration({\n\t\t...securityConfigurationNodeBase,\n\t\tproperties: {\n\t\t\t[WORKSPACE_TRUST_ENABLED]: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true,\n\t\t\t\tdescription: localize('workspace.trust.description', \"Controls whether or not Workspace Trust is enabled within VS Code.\"),\n\t\t\t\ttags: [WORKSPACE_TRUST_SETTING_TAG],\n\t\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\t},\n\t\t\t[WORKSPACE_TRUST_STARTUP_PROMPT]: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: 'once',\n\t\t\t\tdescription: localize('workspace.trust.startupPrompt.description', \"Controls when the startup prompt to trust a workspace is shown.\"),\n\t\t\t\ttags: [WORKSPACE_TRUST_SETTING_TAG],\n\t\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\t\tenum: ['always', 'once', 'never'],\n\t\t\t\tenumDescriptions: [\n\t\t\t\t\tlocalize('workspace.trust.startupPrompt.always', \"Ask for trust every time an untrusted workspace is opened.\"),\n\t\t\t\t\tlocalize('workspace.trust.startupPrompt.once', \"Ask for trust the first time an untrusted workspace is opened.\"),\n\t\t\t\t\tlocalize('workspace.trust.startupPrompt.never', \"Do not ask for trust when an untrusted workspace is opened.\"),\n\t\t\t\t]\n\t\t\t},\n\t\t\t[WORKSPACE_TRUST_BANNER]: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: 'untilDismissed',\n\t\t\t\tdescription: localize('workspace.trust.banner.description', \"Controls when the restricted mode banner is shown.\"),\n\t\t\t\ttags: [WORKSPACE_TRUST_SETTING_TAG],\n\t\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\t\tenum: ['always', 'untilDismissed', 'never'],\n\t\t\t\tenumDescriptions: [\n\t\t\t\t\tlocalize('workspace.trust.banner.always', \"Show the banner every time an untrusted workspace is open.\"),\n\t\t\t\t\tlocalize('workspace.trust.banner.untilDismissed', \"Show the banner when an untrusted workspace is opened until dismissed.\"),\n\t\t\t\t\tlocalize('workspace.trust.banner.never', \"Do not show the banner when an untrusted workspace is open.\"),\n\t\t\t\t]\n\t\t\t},\n\t\t\t[WORKSPACE_TRUST_UNTRUSTED_FILES]: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: 'prompt',\n\t\t\t\tmarkdownDescription: localize('workspace.trust.untrustedFiles.description', \"Controls how to handle opening untrusted files in a trusted workspace. This setting also applies to opening files in an empty window which is trusted via `#{0}#`.\", WORKSPACE_TRUST_EMPTY_WINDOW),\n\t\t\t\ttags: [WORKSPACE_TRUST_SETTING_TAG],\n\t\t\t\tscope: ConfigurationScope.APPLICATION,\n\t\t\t\tenum: ['prompt', 'open', 'newWindow'],\n\t\t\t\tenumDescriptions: [\n\t\t\t\t\tlocalize('workspace.trust.untrustedFiles.prompt', \"Ask how to handle untrusted files for each workspace. Once untrusted files are introduced to a trusted workspace, you will not be prompted again.\"),\n\t\t\t\t\tlocalize('workspace.trust.untrustedFiles.open', \"Always allow untrusted files to be introduced to a trusted workspace without prompting.\"),\n\t\t\t\t\tlocalize('workspace.trust.untrustedFiles.newWindow', \"Always open untrusted files in a separate window in restricted mode without prompting.\"),\n\t\t\t\t]\n\t\t\t},\n\t\t\t[WORKSPACE_TRUST_EMPTY_WINDOW]: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: true,\n\t\t\t\tmarkdownDescription: localize('workspace.trust.emptyWindow.description', \"Controls whether or not the empty window is trusted by default within VS Code. When used with `#{0}#`, you can enable the full functionality of VS Code without prompting in an empty window.\", WORKSPACE_TRUST_UNTRUSTED_FILES),\n\t\t\t\ttags: [WORKSPACE_TRUST_SETTING_TAG],\n\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t}\n\t\t}\n\t});\n\nclass WorkspaceTrustTelemetryContribution extends Disposable implements IWorkbenchContribution {\n\tconstructor(\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IWorkspaceTrustEnablementService private readonly workspaceTrustEnablementService: IWorkspaceTrustEnablementService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t) {\n\t\tsuper();\n\n\t\tthis.workspaceTrustManagementService.workspaceTrustInitialized\n\t\t\t.then(() => {\n\t\t\t\tthis.logInitialWorkspaceTrustInfo();\n\t\t\t\tthis.logWorkspaceTrust(this.workspaceTrustManagementService.isWorkspaceTrusted());\n\n\t\t\t\tthis._register(this.workspaceTrustManagementService.onDidChangeTrust(isTrusted => this.logWorkspaceTrust(isTrusted)));\n\t\t\t});\n\t}\n\n\tprivate logInitialWorkspaceTrustInfo(): void {\n\t\tif (!this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()) {\n\t\t\tconst disabledByCliFlag = this.environmentService.disableWorkspaceTrust;\n\n\t\t\ttype WorkspaceTrustDisabledEventClassification = {\n\t\t\t\towner: 'sbatten';\n\t\t\t\tcomment: 'Logged when workspace trust is disabled';\n\t\t\t\treason: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The reason workspace trust is disabled. e.g. cli or setting' };\n\t\t\t};\n\n\t\t\ttype WorkspaceTrustDisabledEvent = {\n\t\t\t\treason: 'setting' | 'cli';\n\t\t\t};\n\n\t\t\tthis.telemetryService.publicLog2<WorkspaceTrustDisabledEvent, WorkspaceTrustDisabledEventClassification>('workspaceTrustDisabled', {\n\t\t\t\treason: disabledByCliFlag ? 'cli' : 'setting'\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\ttype WorkspaceTrustInfoEventClassification = {\n\t\t\towner: 'sbatten';\n\t\t\tcomment: 'Information about the workspaces trusted on the machine';\n\t\t\ttrustedFoldersCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The number of trusted folders on the machine' };\n\t\t};\n\n\t\ttype WorkspaceTrustInfoEvent = {\n\t\t\ttrustedFoldersCount: number;\n\t\t};\n\n\t\tthis.telemetryService.publicLog2<WorkspaceTrustInfoEvent, WorkspaceTrustInfoEventClassification>('workspaceTrustFolderCounts', {\n\t\t\ttrustedFoldersCount: this.workspaceTrustManagementService.getTrustedUris().length,\n\t\t});\n\t}\n\n\tprivate async logWorkspaceTrust(isTrusted: boolean): Promise<void> {\n\t\tif (!this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\ttype WorkspaceTrustStateChangedEvent = {\n\t\t\tworkspaceId: string;\n\t\t\tisTrusted: boolean;\n\t\t};\n\n\t\ttype WorkspaceTrustStateChangedEventClassification = {\n\t\t\towner: 'sbatten';\n\t\t\tcomment: 'Logged when the workspace transitions between trusted and restricted modes';\n\t\t\tworkspaceId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'An id of the workspace' };\n\t\t\tisTrusted: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'true if the workspace is trusted' };\n\t\t};\n\n\t\tthis.telemetryService.publicLog2<WorkspaceTrustStateChangedEvent, WorkspaceTrustStateChangedEventClassification>('workspaceTrustStateChanged', {\n\t\t\tworkspaceId: this.workspaceContextService.getWorkspace().id,\n\t\t\tisTrusted: isTrusted\n\t\t});\n\n\t\tif (isTrusted) {\n\t\t\ttype WorkspaceTrustFolderInfoEventClassification = {\n\t\t\t\towner: 'sbatten';\n\t\t\t\tcomment: 'Some metrics on the trusted workspaces folder structure';\n\t\t\t\ttrustedFolderDepth: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The number of directories deep of the trusted path' };\n\t\t\t\tworkspaceFolderDepth: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The number of directories deep of the workspace path' };\n\t\t\t\tdelta: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The difference between the trusted path and the workspace path directories depth' };\n\t\t\t};\n\n\t\t\ttype WorkspaceTrustFolderInfoEvent = {\n\t\t\t\ttrustedFolderDepth: number;\n\t\t\t\tworkspaceFolderDepth: number;\n\t\t\t\tdelta: number;\n\t\t\t};\n\n\t\t\tconst getDepth = (folder: string): number => {\n\t\t\t\tlet resolvedPath = resolve(folder);\n\n\t\t\t\tlet depth = 0;\n\t\t\t\twhile (dirname(resolvedPath) !== resolvedPath && depth < 100) {\n\t\t\t\t\tresolvedPath = dirname(resolvedPath);\n\t\t\t\t\tdepth++;\n\t\t\t\t}\n\n\t\t\t\treturn depth;\n\t\t\t};\n\n\t\t\tfor (const folder of this.workspaceContextService.getWorkspace().folders) {\n\t\t\t\tconst { trusted, uri } = await this.workspaceTrustManagementService.getUriTrustInfo(folder.uri);\n\t\t\t\tif (!trusted) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst workspaceFolderDepth = getDepth(folder.uri.fsPath);\n\t\t\t\tconst trustedFolderDepth = getDepth(uri.fsPath);\n\t\t\t\tconst delta = workspaceFolderDepth - trustedFolderDepth;\n\n\t\t\t\tthis.telemetryService.publicLog2<WorkspaceTrustFolderInfoEvent, WorkspaceTrustFolderInfoEventClassification>('workspaceFolderDepthBelowTrustedFolder', { workspaceFolderDepth, trustedFolderDepth, delta });\n\t\t\t}\n\t\t}\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench)\n\t.registerWorkbenchContribution(WorkspaceTrustTelemetryContribution, LifecyclePhase.Restored);\n"]}