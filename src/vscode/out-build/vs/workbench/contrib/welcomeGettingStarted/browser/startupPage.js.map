{"version":3,"sources":["vs/workbench/contrib/welcomeGettingStarted/browser/startupPage.ts"],"names":[],"mappings":"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","file":"startupPage.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { IWorkspaceContextService, UNKNOWN_EMPTY_WINDOW_WORKSPACE, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ILifecycleService, LifecyclePhase, StartupKind } from '../../../services/lifecycle/common/lifecycle.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { IWorkbenchLayoutService } from '../../../services/layout/browser/layoutService.js';\nimport { GettingStartedEditorOptions, GettingStartedInput, gettingStartedInputTypeId } from './gettingStartedInput.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { getTelemetryLevel } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { TelemetryLevel } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { localize } from '../../../../nls.js';\nimport { IEditorResolverService, RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { TerminalCommandId } from '../../terminal/common/terminal.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { AuxiliaryBarMaximizedContext } from '../../../common/contextkeys.js';\n\nexport const restoreWalkthroughsConfigurationKey = 'workbench.welcomePage.restorableWalkthroughs';\nexport type RestoreWalkthroughsConfigurationValue = { folder: string; category?: string; step?: string };\n\nconst configurationKey = 'workbench.startupEditor';\nconst oldConfigurationKey = 'workbench.welcome.enabled';\nconst telemetryOptOutStorageKey = 'workbench.telemetryOptOutShown';\n\nexport class StartupPageEditorResolverContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.startupPageEditorResolver';\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService\n\t) {\n\t\tsuper();\n\t\tconst disposables = new DisposableStore();\n\t\tthis._register(disposables);\n\n\t\teditorResolverService.registerEditor(\n\t\t\t`${GettingStartedInput.RESOURCE.scheme}:/**`,\n\t\t\t{\n\t\t\t\tid: GettingStartedInput.ID,\n\t\t\t\tlabel: localize('welcome.displayName', \"Welcome Page\"),\n\t\t\t\tpriority: RegisteredEditorPriority.builtin,\n\t\t\t},\n\t\t\t{\n\t\t\t\tsinglePerResource: false,\n\t\t\t\tcanSupportResource: uri => uri.scheme === GettingStartedInput.RESOURCE.scheme,\n\t\t\t},\n\t\t\t{\n\t\t\t\tcreateEditorInput: ({ resource, options }) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\teditor: disposables.add(this.instantiationService.createInstance(GettingStartedInput, options as GettingStartedEditorOptions)),\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t...options,\n\t\t\t\t\t\t\tpinned: false\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n}\n\nexport class StartupPageRunnerContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.startupPageRunner';\n\n\tconstructor(\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t\tthis.run().then(undefined, onUnexpectedError);\n\t\tthis._register(this.editorService.onDidCloseEditor((e) => {\n\t\t\tif (e.editor instanceof GettingStartedInput) {\n\t\t\t\te.editor.selectedCategory = undefined;\n\t\t\t\te.editor.selectedStep = undefined;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async run() {\n\n\t\t// Wait for resolving startup editor until we are restored to reduce startup pressure\n\t\tawait this.lifecycleService.when(LifecyclePhase.Restored);\n\n\t\tif (AuxiliaryBarMaximizedContext.getValue(this.contextKeyService)) {\n\t\t\t// If the auxiliary bar is maximized, we do not show the welcome page.\n\t\t\treturn;\n\t\t}\n\n\t\t// Always open Welcome page for first-launch, no matter what is open or which startupEditor is set.\n\t\tif (\n\t\t\tthis.productService.enableTelemetry\n\t\t\t&& this.productService.showTelemetryOptOut\n\t\t\t&& getTelemetryLevel(this.configurationService) !== TelemetryLevel.NONE\n\t\t\t&& !this.environmentService.skipWelcome\n\t\t\t&& !this.storageService.get(telemetryOptOutStorageKey, StorageScope.PROFILE)\n\t\t) {\n\t\t\tthis.storageService.store(telemetryOptOutStorageKey, true, StorageScope.PROFILE, StorageTarget.USER);\n\t\t}\n\n\t\tif (this.tryOpenWalkthroughForFolder()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst enabled = isStartupPageEnabled(this.configurationService, this.contextService, this.environmentService, this.logService);\n\t\tif (enabled && this.lifecycleService.startupKind !== StartupKind.ReloadedWindow) {\n\n\t\t\t// Open the welcome even if we opened a set of default editors\n\t\t\tif (!this.editorService.activeEditor || this.layoutService.openedDefaultEditors) {\n\t\t\t\tconst startupEditorSetting = this.configurationService.inspect<string>(configurationKey);\n\n\t\t\t\tif (startupEditorSetting.value === 'readme') {\n\t\t\t\t\tawait this.openReadme();\n\t\t\t\t} else if (startupEditorSetting.value === 'welcomePage' || startupEditorSetting.value === 'welcomePageInEmptyWorkbench') {\n\t\t\t\t\tawait this.openGettingStarted(true);\n\t\t\t\t} else if (startupEditorSetting.value === 'terminal') {\n\t\t\t\t\tthis.commandService.executeCommand(TerminalCommandId.CreateTerminalEditor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate tryOpenWalkthroughForFolder(): boolean {\n\t\tconst toRestore = this.storageService.get(restoreWalkthroughsConfigurationKey, StorageScope.PROFILE);\n\t\tif (!toRestore) {\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\tconst restoreData: RestoreWalkthroughsConfigurationValue = JSON.parse(toRestore);\n\t\t\tconst currentWorkspace = this.contextService.getWorkspace();\n\t\t\tif (restoreData.folder === UNKNOWN_EMPTY_WINDOW_WORKSPACE.id || restoreData.folder === currentWorkspace.folders[0].uri.toString()) {\n\t\t\t\tconst options: GettingStartedEditorOptions = { selectedCategory: restoreData.category, selectedStep: restoreData.step, pinned: false };\n\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\tresource: GettingStartedInput.RESOURCE,\n\t\t\t\t\toptions\n\t\t\t\t});\n\t\t\t\tthis.storageService.remove(restoreWalkthroughsConfigurationKey, StorageScope.PROFILE);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate async openReadme() {\n\t\tconst readmes = arrays.coalesce(\n\t\t\tawait Promise.all(this.contextService.getWorkspace().folders.map(\n\t\t\t\tasync folder => {\n\t\t\t\t\tconst folderUri = folder.uri;\n\t\t\t\t\tconst folderStat = await this.fileService.resolve(folderUri).catch(onUnexpectedError);\n\t\t\t\t\tconst files = folderStat?.children ? folderStat.children.map(child => child.name).sort() : [];\n\t\t\t\t\tconst file = files.find(file => file.toLowerCase() === 'readme.md') || files.find(file => file.toLowerCase().startsWith('readme'));\n\t\t\t\t\tif (file) { return joinPath(folderUri, file); }\n\t\t\t\t\telse { return undefined; }\n\t\t\t\t})));\n\n\t\tif (!this.editorService.activeEditor) {\n\t\t\tif (readmes.length) {\n\t\t\t\tconst isMarkDown = (readme: URI) => readme.path.toLowerCase().endsWith('.md');\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tthis.commandService.executeCommand('markdown.showPreview', null, readmes.filter(isMarkDown), { locked: true }).catch(error => {\n\t\t\t\t\t\tthis.notificationService.error(localize('startupPage.markdownPreviewError', 'Could not open markdown preview: {0}.\\n\\nPlease make sure the markdown extension is enabled.', error.message));\n\t\t\t\t\t}),\n\t\t\t\t\tthis.editorService.openEditors(readmes.filter(readme => !isMarkDown(readme)).map(readme => ({ resource: readme }))),\n\t\t\t\t]);\n\t\t\t} else {\n\t\t\t\t// If no readme is found, default to showing the welcome page.\n\t\t\t\tawait this.openGettingStarted();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async openGettingStarted(showTelemetryNotice?: boolean) {\n\t\tconst startupEditorTypeID = gettingStartedInputTypeId;\n\t\tconst editor = this.editorService.activeEditor;\n\n\t\t// Ensure that the welcome editor won't get opened more than once\n\t\tif (editor?.typeId === startupEditorTypeID || this.editorService.editors.some(e => e.typeId === startupEditorTypeID)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options: GettingStartedEditorOptions = editor ? { pinned: false, index: 0, showTelemetryNotice } : { pinned: false, showTelemetryNotice };\n\t\tif (startupEditorTypeID === gettingStartedInputTypeId) {\n\t\t\tthis.editorService.openEditor({\n\t\t\t\tresource: GettingStartedInput.RESOURCE,\n\t\t\t\toptions,\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction isStartupPageEnabled(configurationService: IConfigurationService, contextService: IWorkspaceContextService, environmentService: IWorkbenchEnvironmentService, logService: ILogService) {\n\tif (environmentService.skipWelcome) {\n\t\treturn false;\n\t}\n\n\tconst startupEditor = configurationService.inspect<string>(configurationKey);\n\tif (!startupEditor.userValue && !startupEditor.workspaceValue) {\n\t\tconst welcomeEnabled = configurationService.inspect(oldConfigurationKey);\n\t\tif (welcomeEnabled.value !== undefined && welcomeEnabled.value !== null) {\n\t\t\treturn welcomeEnabled.value;\n\t\t}\n\t}\n\n\treturn startupEditor.value === 'welcomePage'\n\t\t|| startupEditor.value === 'readme'\n\t\t|| (contextService.getWorkbenchState() === WorkbenchState.EMPTY && startupEditor.value === 'welcomePageInEmptyWorkbench')\n\t\t|| startupEditor.value === 'terminal';\n}\n"]}