{"version":3,"sources":["vs/workbench/contrib/welcomeGettingStarted/browser/gettingStartedService.ts"],"names":[],"mappings":"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","file":"gettingStartedService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createDecorator, IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { Memento } from '../../../common/memento.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, ContextKeyExpression, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IUserDataSyncEnablementService } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { FileAccess } from '../../../../base/common/network.js';\nimport { EXTENSION_INSTALL_DEP_PACK_CONTEXT, EXTENSION_INSTALL_SKIP_WALKTHROUGH_CONTEXT, IExtensionManagementService } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { walkthroughs } from '../common/gettingStartedContent.js';\nimport { IWorkbenchAssignmentService } from '../../../services/assignment/common/assignmentService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ILink, LinkedText, parseLinkedText } from '../../../../base/common/linkedText.js';\nimport { walkthroughsExtensionPoint } from './gettingStartedExtensionPoint.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { dirname } from '../../../../base/common/path.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { checkGlobFileExists } from '../../../services/extensions/common/workspaceContains.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { asWebviewUri } from '../../webview/common/webview.js';\nimport { IWorkbenchLayoutService, Parts } from '../../../services/layout/browser/layoutService.js';\nimport { extensionDefaultIcon } from '../../../services/extensionManagement/common/extensionsIcons.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { GettingStartedInput } from './gettingStartedInput.js';\n\nexport const HasMultipleNewFileEntries = new RawContextKey<boolean>('hasMultipleNewFileEntries', false);\n\nexport const IWalkthroughsService = createDecorator<IWalkthroughsService>('walkthroughsService');\n\nexport const hiddenEntriesConfigurationKey = 'workbench.welcomePage.hiddenCategories';\n\nexport const walkthroughMetadataConfigurationKey = 'workbench.welcomePage.walkthroughMetadata';\nexport type WalkthroughMetaDataType = Map<string, { firstSeen: number; stepIDs: string[]; manaullyOpened: boolean }>;\n\nconst BUILT_IN_SOURCE = localize('builtin', \"Built-In\");\n\nexport interface IWalkthrough {\n\tid: string;\n\ttitle: string;\n\tdescription: string;\n\torder: number;\n\tsource: string;\n\tisFeatured: boolean;\n\tnext?: string;\n\twhen: ContextKeyExpression;\n\tsteps: IWalkthroughStep[];\n\ticon:\n\t| { type: 'icon'; icon: ThemeIcon }\n\t| { type: 'image'; path: string };\n\twalkthroughPageTitle: string;\n}\n\nexport type IWalkthroughLoose = Omit<IWalkthrough, 'steps'> & { steps: (Omit<IWalkthroughStep, 'description'> & { description: string })[] };\n\nexport interface IResolvedWalkthrough extends IWalkthrough {\n\tsteps: IResolvedWalkthroughStep[];\n\tnewItems: boolean;\n\trecencyBonus: number;\n\tnewEntry: boolean;\n}\n\nexport interface IWalkthroughStep {\n\tid: string;\n\ttitle: string;\n\tdescription: LinkedText[];\n\tcategory: string;\n\twhen: ContextKeyExpression;\n\torder: number;\n\tcompletionEvents: string[];\n\tmedia:\n\t| { type: 'image'; path: { hcDark: URI; hcLight: URI; light: URI; dark: URI }; altText: string }\n\t| { type: 'svg'; path: URI; altText: string }\n\t| { type: 'markdown'; path: URI; base: URI; root: URI }\n\t| { type: 'video'; path: { hcDark: URI; hcLight: URI; light: URI; dark: URI }; poster?: { hcDark: URI; hcLight: URI; light: URI; dark: URI }; root: URI; altText: string };\n}\n\ntype StepProgress = { done: boolean };\n\nexport interface IResolvedWalkthroughStep extends IWalkthroughStep, StepProgress { }\n\nexport interface IWalkthroughsService {\n\t_serviceBrand: undefined;\n\n\treadonly onDidAddWalkthrough: Event<IResolvedWalkthrough>;\n\treadonly onDidRemoveWalkthrough: Event<string>;\n\treadonly onDidChangeWalkthrough: Event<IResolvedWalkthrough>;\n\treadonly onDidProgressStep: Event<IResolvedWalkthroughStep>;\n\n\tgetWalkthroughs(): IResolvedWalkthrough[];\n\tgetWalkthrough(id: string): IResolvedWalkthrough;\n\n\tregisterWalkthrough(descriptor: IWalkthroughLoose): void;\n\n\tprogressByEvent(eventName: string): void;\n\tprogressStep(id: string): void;\n\tdeprogressStep(id: string): void;\n\n\tmarkWalkthroughOpened(id: string): void;\n}\n\n// Show walkthrough as \"new\" for 7 days after first install\nconst DAYS = 24 * 60 * 60 * 1000;\nconst NEW_WALKTHROUGH_TIME = 7 * DAYS;\n\nexport class WalkthroughsService extends Disposable implements IWalkthroughsService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidAddWalkthrough = new Emitter<IResolvedWalkthrough>();\n\treadonly onDidAddWalkthrough: Event<IResolvedWalkthrough> = this._onDidAddWalkthrough.event;\n\tprivate readonly _onDidRemoveWalkthrough = new Emitter<string>();\n\treadonly onDidRemoveWalkthrough: Event<string> = this._onDidRemoveWalkthrough.event;\n\tprivate readonly _onDidChangeWalkthrough = new Emitter<IResolvedWalkthrough>();\n\treadonly onDidChangeWalkthrough: Event<IResolvedWalkthrough> = this._onDidChangeWalkthrough.event;\n\tprivate readonly _onDidProgressStep = new Emitter<IResolvedWalkthroughStep>();\n\treadonly onDidProgressStep: Event<IResolvedWalkthroughStep> = this._onDidProgressStep.event;\n\n\tprivate memento: Memento<Record<string, StepProgress | undefined>>;\n\tprivate stepProgress: Record<string, StepProgress | undefined>;\n\n\tprivate sessionEvents = new Set<string>();\n\tprivate completionListeners = new Map<string, Set<string>>();\n\n\tprivate gettingStartedContributions = new Map<string, IWalkthrough>();\n\tprivate steps = new Map<string, IWalkthroughStep>();\n\n\tprivate sessionInstalledExtensions: Set<string> = new Set<string>();\n\n\tprivate categoryVisibilityContextKeys = new Set<string>();\n\tprivate stepCompletionContextKeyExpressions = new Set<ContextKeyExpression>();\n\tprivate stepCompletionContextKeys = new Set<string>();\n\n\tprivate metadata: WalkthroughMetaDataType;\n\n\tconstructor(\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IContextKeyService private readonly contextService: IContextKeyService,\n\t\t@IUserDataSyncEnablementService private readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IWorkbenchAssignmentService private readonly tasExperimentService: IWorkbenchAssignmentService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IEditorService private readonly editorService: IEditorService\n\t) {\n\t\tsuper();\n\n\t\tthis.metadata = new Map(\n\t\t\tJSON.parse(\n\t\t\t\tthis.storageService.get(walkthroughMetadataConfigurationKey, StorageScope.PROFILE, '[]')));\n\n\t\tthis.memento = new Memento('gettingStartedService', this.storageService);\n\t\tthis.stepProgress = this.memento.getMemento(StorageScope.PROFILE, StorageTarget.USER);\n\n\t\tthis.initCompletionEventListeners();\n\n\t\tHasMultipleNewFileEntries.bindTo(this.contextService).set(false);\n\t\tthis.registerWalkthroughs();\n\n\t}\n\n\tprivate registerWalkthroughs() {\n\n\t\twalkthroughs.forEach(async (category, index) => {\n\n\t\t\tthis._registerWalkthrough({\n\t\t\t\t...category,\n\t\t\t\ticon: { type: 'icon', icon: category.icon },\n\t\t\t\torder: walkthroughs.length - index,\n\t\t\t\tsource: BUILT_IN_SOURCE,\n\t\t\t\twhen: ContextKeyExpr.deserialize(category.when) ?? ContextKeyExpr.true(),\n\t\t\t\tsteps:\n\t\t\t\t\tcategory.content.steps.map((step, index) => {\n\t\t\t\t\t\treturn ({\n\t\t\t\t\t\t\t...step,\n\t\t\t\t\t\t\tcompletionEvents: step.completionEvents ?? [],\n\t\t\t\t\t\t\tdescription: parseDescription(step.description),\n\t\t\t\t\t\t\tcategory: category.id,\n\t\t\t\t\t\t\torder: index,\n\t\t\t\t\t\t\twhen: ContextKeyExpr.deserialize(step.when) ?? ContextKeyExpr.true(),\n\t\t\t\t\t\t\tmedia: step.media.type === 'image'\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\t\t\taltText: step.media.altText,\n\t\t\t\t\t\t\t\t\tpath: convertInternalMediaPathsToBrowserURIs(step.media.path)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t: step.media.type === 'svg'\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\ttype: 'svg',\n\t\t\t\t\t\t\t\t\t\taltText: step.media.altText,\n\t\t\t\t\t\t\t\t\t\tpath: convertInternalMediaPathToFileURI(step.media.path).with({ query: JSON.stringify({ moduleId: 'vs/workbench/contrib/welcomeGettingStarted/common/media/' + step.media.path }) })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t: step.media.type === 'markdown'\n\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\ttype: 'markdown',\n\t\t\t\t\t\t\t\t\t\t\tpath: convertInternalMediaPathToFileURI(step.media.path).with({ query: JSON.stringify({ moduleId: 'vs/workbench/contrib/welcomeGettingStarted/common/media/' + step.media.path }) }),\n\t\t\t\t\t\t\t\t\t\t\tbase: FileAccess.asFileUri('vs/workbench/contrib/welcomeGettingStarted/common/media/'),\n\t\t\t\t\t\t\t\t\t\t\troot: FileAccess.asFileUri('vs/workbench/contrib/welcomeGettingStarted/common/media/'),\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\ttype: 'video',\n\t\t\t\t\t\t\t\t\t\t\tpath: convertRelativeMediaPathsToWebviewURIs(FileAccess.asFileUri('vs/workbench/contrib/welcomeGettingStarted/common/media/'), step.media.path),\n\t\t\t\t\t\t\t\t\t\t\taltText: step.media.altText,\n\t\t\t\t\t\t\t\t\t\t\troot: FileAccess.asFileUri('vs/workbench/contrib/welcomeGettingStarted/common/media/'),\n\t\t\t\t\t\t\t\t\t\t\tposter: step.media.poster ? convertRelativeMediaPathsToWebviewURIs(FileAccess.asFileUri('vs/workbench/contrib/welcomeGettingStarted/common/media/'), step.media.poster) : undefined\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t});\n\t\t});\n\n\t\twalkthroughsExtensionPoint.setHandler((_, { added, removed }) => {\n\t\t\tadded.map(e => this.registerExtensionWalkthroughContributions(e.description));\n\t\t\tremoved.map(e => this.unregisterExtensionWalkthroughContributions(e.description));\n\t\t});\n\t}\n\n\tprivate initCompletionEventListeners() {\n\t\tthis._register(this.commandService.onDidExecuteCommand(command => this.progressByEvent(`onCommand:${command.commandId}`)));\n\n\t\tthis.extensionManagementService.getInstalled().then(installed => {\n\t\t\tinstalled.forEach(ext => this.progressByEvent(`extensionInstalled:${ext.identifier.id.toLowerCase()}`));\n\t\t});\n\n\t\tthis._register(this.extensionManagementService.onDidInstallExtensions((result) => {\n\n\t\t\tfor (const e of result) {\n\t\t\t\tconst skipWalkthrough = e?.context?.[EXTENSION_INSTALL_SKIP_WALKTHROUGH_CONTEXT] || e?.context?.[EXTENSION_INSTALL_DEP_PACK_CONTEXT];\n\t\t\t\t// If the window had last focus and the install didn't specify to skip the walkthrough\n\t\t\t\t// Then add it to the sessionInstallExtensions to be opened\n\t\t\t\tif (!skipWalkthrough) {\n\t\t\t\t\tthis.sessionInstalledExtensions.add(e.identifier.id.toLowerCase());\n\t\t\t\t}\n\t\t\t\tthis.progressByEvent(`extensionInstalled:${e.identifier.id.toLowerCase()}`);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.contextService.onDidChangeContext(event => {\n\t\t\tif (event.affectsSome(this.stepCompletionContextKeys)) {\n\t\t\t\tthis.stepCompletionContextKeyExpressions.forEach(expression => {\n\t\t\t\t\tif (event.affectsSome(new Set(expression.keys())) && this.contextService.contextMatchesRules(expression)) {\n\t\t\t\t\t\tthis.progressByEvent(`onContext:` + expression.serialize());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.viewsService.onDidChangeViewVisibility(e => {\n\t\t\tif (e.visible) { this.progressByEvent('onView:' + e.id); }\n\t\t}));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\te.affectedKeys.forEach(key => { this.progressByEvent('onSettingChanged:' + key); });\n\t\t}));\n\n\t\tif (this.userDataSyncEnablementService.isEnabled()) { this.progressByEvent('onEvent:sync-enabled'); }\n\t\tthis._register(this.userDataSyncEnablementService.onDidChangeEnablement(() => {\n\t\t\tif (this.userDataSyncEnablementService.isEnabled()) { this.progressByEvent('onEvent:sync-enabled'); }\n\t\t}));\n\t}\n\n\tmarkWalkthroughOpened(id: string) {\n\t\tconst walkthrough = this.gettingStartedContributions.get(id);\n\t\tconst prior = this.metadata.get(id);\n\t\tif (prior && walkthrough) {\n\t\t\tthis.metadata.set(id, { ...prior, manaullyOpened: true, stepIDs: walkthrough.steps.map(s => s.id) });\n\t\t}\n\n\t\tthis.storageService.store(walkthroughMetadataConfigurationKey, JSON.stringify([...this.metadata.entries()]), StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tprivate async registerExtensionWalkthroughContributions(extension: IExtensionDescription) {\n\t\tconst convertExtensionPathToFileURI = (path: string) => path.startsWith('https://')\n\t\t\t? URI.parse(path, true)\n\t\t\t: FileAccess.uriToFileUri(joinPath(extension.extensionLocation, path));\n\n\t\tconst convertExtensionRelativePathsToBrowserURIs = (path: string | { hc: string; hcLight?: string; dark: string; light: string }): { hcDark: URI; hcLight: URI; dark: URI; light: URI } => {\n\t\t\tconst convertPath = (path: string) => path.startsWith('https://')\n\t\t\t\t? URI.parse(path, true)\n\t\t\t\t: FileAccess.uriToBrowserUri(joinPath(extension.extensionLocation, path));\n\n\t\t\tif (typeof path === 'string') {\n\t\t\t\tconst converted = convertPath(path);\n\t\t\t\treturn { hcDark: converted, hcLight: converted, dark: converted, light: converted };\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\thcDark: convertPath(path.hc),\n\t\t\t\t\thcLight: convertPath(path.hcLight ?? path.light),\n\t\t\t\t\tlight: convertPath(path.light),\n\t\t\t\t\tdark: convertPath(path.dark)\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tif (!(extension.contributes?.walkthroughs?.length)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet sectionToOpen: string | undefined;\n\t\tlet sectionToOpenIndex = Math.min(); // '+Infinity';\n\t\tawait Promise.all(extension.contributes?.walkthroughs?.map(async (walkthrough, index) => {\n\t\t\tconst categoryID = extension.identifier.value + '#' + walkthrough.id;\n\n\t\t\tconst isNewlyInstalled = !this.metadata.get(categoryID);\n\t\t\tif (isNewlyInstalled) {\n\t\t\t\tthis.metadata.set(categoryID, { firstSeen: +new Date(), stepIDs: walkthrough.steps?.map(s => s.id) ?? [], manaullyOpened: false });\n\t\t\t}\n\n\t\t\tconst override = await Promise.race([\n\t\t\t\tthis.tasExperimentService?.getTreatment<string>(`gettingStarted.overrideCategory.${extension.identifier.value + '.' + walkthrough.id}.when`),\n\t\t\t\tnew Promise<string | undefined>(resolve => setTimeout(() => resolve(walkthrough.when), 5000))\n\t\t\t]);\n\n\t\t\tif (this.sessionInstalledExtensions.has(extension.identifier.value.toLowerCase())\n\t\t\t\t&& this.contextService.contextMatchesRules(ContextKeyExpr.deserialize(override ?? walkthrough.when) ?? ContextKeyExpr.true())\n\t\t\t) {\n\t\t\t\tthis.sessionInstalledExtensions.delete(extension.identifier.value.toLowerCase());\n\t\t\t\tif (index < sectionToOpenIndex && isNewlyInstalled) {\n\t\t\t\t\tsectionToOpen = categoryID;\n\t\t\t\t\tsectionToOpenIndex = index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst steps = (walkthrough.steps ?? []).map((step, index) => {\n\t\t\t\tconst description = parseDescription(step.description || '');\n\t\t\t\tconst fullyQualifiedID = extension.identifier.value + '#' + walkthrough.id + '#' + step.id;\n\n\t\t\t\tlet media: IWalkthroughStep['media'];\n\n\t\t\t\tif (!step.media) {\n\t\t\t\t\tthrow Error('missing media in walkthrough step: ' + walkthrough.id + '@' + step.id);\n\t\t\t\t}\n\n\t\t\t\tif (step.media.image) {\n\t\t\t\t\tconst altText = step.media.altText;\n\t\t\t\t\tif (altText === undefined) {\n\t\t\t\t\t\tconsole.error('Walkthrough item:', fullyQualifiedID, 'is missing altText for its media element.');\n\t\t\t\t\t}\n\t\t\t\t\tmedia = { type: 'image', altText, path: convertExtensionRelativePathsToBrowserURIs(step.media.image) };\n\t\t\t\t}\n\t\t\t\telse if (step.media.markdown) {\n\t\t\t\t\tmedia = {\n\t\t\t\t\t\ttype: 'markdown',\n\t\t\t\t\t\tpath: convertExtensionPathToFileURI(step.media.markdown),\n\t\t\t\t\t\tbase: convertExtensionPathToFileURI(dirname(step.media.markdown)),\n\t\t\t\t\t\troot: FileAccess.uriToFileUri(extension.extensionLocation),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (step.media.svg) {\n\t\t\t\t\tmedia = {\n\t\t\t\t\t\ttype: 'svg',\n\t\t\t\t\t\tpath: convertExtensionPathToFileURI(step.media.svg),\n\t\t\t\t\t\taltText: step.media.svg,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (step.media.video) {\n\t\t\t\t\tconst baseURI = FileAccess.uriToFileUri(extension.extensionLocation);\n\t\t\t\t\tmedia = {\n\t\t\t\t\t\ttype: 'video',\n\t\t\t\t\t\tpath: convertRelativeMediaPathsToWebviewURIs(baseURI, step.media.video),\n\t\t\t\t\t\troot: FileAccess.uriToFileUri(extension.extensionLocation),\n\t\t\t\t\t\taltText: step.media.altText,\n\t\t\t\t\t\tposter: step.media.poster ? convertRelativeMediaPathsToWebviewURIs(baseURI, step.media.poster) : undefined\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Throw error for unknown walkthrough format\n\t\t\t\telse {\n\t\t\t\t\tthrow new Error('Unknown walkthrough format detected for ' + fullyQualifiedID);\n\t\t\t\t}\n\n\t\t\t\treturn ({\n\t\t\t\t\tdescription,\n\t\t\t\t\tmedia,\n\t\t\t\t\tcompletionEvents: step.completionEvents?.filter(x => typeof x === 'string') ?? [],\n\t\t\t\t\tid: fullyQualifiedID,\n\t\t\t\t\ttitle: step.title,\n\t\t\t\t\twhen: ContextKeyExpr.deserialize(step.when) ?? ContextKeyExpr.true(),\n\t\t\t\t\tcategory: categoryID,\n\t\t\t\t\torder: index,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tlet isFeatured = false;\n\t\t\tif (walkthrough.featuredFor) {\n\t\t\t\tconst folders = this.workspaceContextService.getWorkspace().folders.map(f => f.uri);\n\t\t\t\tconst token = new CancellationTokenSource();\n\t\t\t\tsetTimeout(() => token.cancel(), 2000);\n\t\t\t\tisFeatured = await this.instantiationService.invokeFunction(a => checkGlobFileExists(a, folders, walkthrough.featuredFor!, token.token));\n\t\t\t}\n\n\t\t\tconst iconStr = walkthrough.icon ?? extension.icon;\n\t\t\tconst walkthoughDescriptor: IWalkthrough = {\n\t\t\t\tdescription: walkthrough.description,\n\t\t\t\ttitle: walkthrough.title,\n\t\t\t\tid: categoryID,\n\t\t\t\tisFeatured,\n\t\t\t\tsource: extension.displayName ?? extension.name,\n\t\t\t\torder: 0,\n\t\t\t\twalkthroughPageTitle: extension.displayName ?? extension.name,\n\t\t\t\tsteps,\n\t\t\t\ticon: iconStr ? {\n\t\t\t\t\ttype: 'image',\n\t\t\t\t\tpath: FileAccess.uriToBrowserUri(joinPath(extension.extensionLocation, iconStr)).toString(true)\n\t\t\t\t} : {\n\t\t\t\t\ticon: extensionDefaultIcon,\n\t\t\t\t\ttype: 'icon'\n\t\t\t\t},\n\t\t\t\twhen: ContextKeyExpr.deserialize(override ?? walkthrough.when) ?? ContextKeyExpr.true(),\n\t\t\t} as const;\n\n\t\t\tthis._registerWalkthrough(walkthoughDescriptor);\n\n\t\t\tthis._onDidAddWalkthrough.fire(this.resolveWalkthrough(walkthoughDescriptor));\n\t\t}));\n\n\t\tthis.storageService.store(walkthroughMetadataConfigurationKey, JSON.stringify([...this.metadata.entries()]), StorageScope.PROFILE, StorageTarget.USER);\n\n\t\tconst hadLastFoucs = await this.hostService.hadLastFocus();\n\t\tif (hadLastFoucs && sectionToOpen && this.configurationService.getValue<string>('workbench.welcomePage.walkthroughs.openOnInstall')) {\n\t\t\ttype GettingStartedAutoOpenClassification = {\n\t\t\t\towner: 'lramos15';\n\t\t\t\tcomment: 'When a walkthrough is opened upon extension installation';\n\t\t\t\tid: {\n\t\t\t\t\tclassification: 'PublicNonPersonalData'; purpose: 'FeatureInsight';\n\t\t\t\t\towner: 'lramos15';\n\t\t\t\t\tcomment: 'Used to understand what walkthroughs are consulted most frequently';\n\t\t\t\t};\n\t\t\t};\n\t\t\ttype GettingStartedAutoOpenEvent = {\n\t\t\t\tid: string;\n\t\t\t};\n\t\t\tthis.telemetryService.publicLog2<GettingStartedAutoOpenEvent, GettingStartedAutoOpenClassification>('gettingStarted.didAutoOpenWalkthrough', { id: sectionToOpen });\n\t\t\tconst activeEditor = this.editorService.activeEditor;\n\t\t\tif (activeEditor instanceof GettingStartedInput) {\n\t\t\t\tthis.commandService.executeCommand('workbench.action.keepEditor');\n\t\t\t}\n\t\t\tthis.commandService.executeCommand('workbench.action.openWalkthrough', sectionToOpen, {\n\t\t\t\tinactive: this.layoutService.hasFocus(Parts.EDITOR_PART) // do not steal the active editor away\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate unregisterExtensionWalkthroughContributions(extension: IExtensionDescription) {\n\t\tif (!(extension.contributes?.walkthroughs?.length)) {\n\t\t\treturn;\n\t\t}\n\n\t\textension.contributes?.walkthroughs?.forEach(section => {\n\t\t\tconst categoryID = extension.identifier.value + '#' + section.id;\n\t\t\tsection.steps.forEach(step => {\n\t\t\t\tconst fullyQualifiedID = extension.identifier.value + '#' + section.id + '#' + step.id;\n\t\t\t\tthis.steps.delete(fullyQualifiedID);\n\t\t\t});\n\t\t\tthis.gettingStartedContributions.delete(categoryID);\n\t\t\tthis._onDidRemoveWalkthrough.fire(categoryID);\n\t\t});\n\t}\n\n\tgetWalkthrough(id: string): IResolvedWalkthrough {\n\n\t\tconst walkthrough = this.gettingStartedContributions.get(id);\n\t\tif (!walkthrough) { throw Error('Trying to get unknown walkthrough: ' + id); }\n\t\treturn this.resolveWalkthrough(walkthrough);\n\t}\n\n\tgetWalkthroughs(): IResolvedWalkthrough[] {\n\n\t\tconst registeredCategories = [...this.gettingStartedContributions.values()];\n\t\tconst categoriesWithCompletion = registeredCategories\n\t\t\t.map(category => {\n\t\t\t\treturn {\n\t\t\t\t\t...category,\n\t\t\t\t\tcontent: {\n\t\t\t\t\t\ttype: 'steps' as const,\n\t\t\t\t\t\tsteps: category.steps\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(category => category.content.type !== 'steps' || category.content.steps.length)\n\t\t\t.filter(category => category.id !== 'NewWelcomeExperience')\n\t\t\t.map(category => this.resolveWalkthrough(category));\n\n\t\treturn categoriesWithCompletion;\n\t}\n\n\tprivate resolveWalkthrough(category: IWalkthrough): IResolvedWalkthrough {\n\n\t\tconst stepsWithProgress = category.steps.map(step => this.getStepProgress(step));\n\n\t\tconst hasOpened = this.metadata.get(category.id)?.manaullyOpened;\n\t\tconst firstSeenDate = this.metadata.get(category.id)?.firstSeen;\n\t\tconst isNew = firstSeenDate && firstSeenDate > (+new Date() - NEW_WALKTHROUGH_TIME);\n\n\t\tconst lastStepIDs = this.metadata.get(category.id)?.stepIDs;\n\t\tconst rawCategory = this.gettingStartedContributions.get(category.id);\n\t\tif (!rawCategory) { throw Error('Could not find walkthrough with id ' + category.id); }\n\n\t\tconst currentStepIds: string[] = rawCategory.steps.map(s => s.id);\n\n\t\tconst hasNewSteps = lastStepIDs && (currentStepIds.length !== lastStepIDs.length || currentStepIds.some((id, index) => id !== lastStepIDs[index]));\n\n\t\tlet recencyBonus = 0;\n\t\tif (firstSeenDate) {\n\t\t\tconst currentDate = +new Date();\n\t\t\tconst timeSinceFirstSeen = currentDate - firstSeenDate;\n\t\t\trecencyBonus = Math.max(0, (NEW_WALKTHROUGH_TIME - timeSinceFirstSeen) / NEW_WALKTHROUGH_TIME);\n\t\t}\n\n\t\treturn {\n\t\t\t...category,\n\t\t\trecencyBonus,\n\t\t\tsteps: stepsWithProgress,\n\t\t\tnewItems: !!hasNewSteps,\n\t\t\tnewEntry: !!(isNew && !hasOpened),\n\t\t};\n\t}\n\n\tprivate getStepProgress(step: IWalkthroughStep): IResolvedWalkthroughStep {\n\t\treturn {\n\t\t\t...step,\n\t\t\tdone: false,\n\t\t\t...this.stepProgress[step.id]\n\t\t};\n\t}\n\n\tprogressStep(id: string) {\n\t\tconst oldProgress = this.stepProgress[id];\n\t\tif (!oldProgress || oldProgress.done !== true) {\n\t\t\tthis.stepProgress[id] = { done: true };\n\t\t\tthis.memento.saveMemento();\n\t\t\tconst step = this.getStep(id);\n\t\t\tif (!step) { throw Error('Tried to progress unknown step'); }\n\n\t\t\tthis._onDidProgressStep.fire(this.getStepProgress(step));\n\t\t}\n\t}\n\n\tdeprogressStep(id: string) {\n\t\tdelete this.stepProgress[id];\n\t\tthis.memento.saveMemento();\n\t\tconst step = this.getStep(id);\n\t\tthis._onDidProgressStep.fire(this.getStepProgress(step));\n\t}\n\n\tprogressByEvent(event: string): void {\n\t\tif (this.sessionEvents.has(event)) { return; }\n\n\t\tthis.sessionEvents.add(event);\n\t\tthis.completionListeners.get(event)?.forEach(id => this.progressStep(id));\n\t}\n\n\tregisterWalkthrough(walkthoughDescriptor: IWalkthroughLoose) {\n\t\tthis._registerWalkthrough({\n\t\t\t...walkthoughDescriptor,\n\t\t\tsteps: walkthoughDescriptor.steps.map(step => ({ ...step, description: parseDescription(step.description) }))\n\t\t});\n\t}\n\n\t_registerWalkthrough(walkthroughDescriptor: IWalkthrough): void {\n\t\tconst oldCategory = this.gettingStartedContributions.get(walkthroughDescriptor.id);\n\t\tif (oldCategory) {\n\t\t\tconsole.error(`Skipping attempt to overwrite walkthrough. (${walkthroughDescriptor.id})`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.gettingStartedContributions.set(walkthroughDescriptor.id, walkthroughDescriptor);\n\n\t\twalkthroughDescriptor.steps.forEach(step => {\n\t\t\tif (this.steps.has(step.id)) { throw Error('Attempting to register step with id ' + step.id + ' twice. Second is dropped.'); }\n\t\t\tthis.steps.set(step.id, step);\n\t\t\tstep.when.keys().forEach(key => this.categoryVisibilityContextKeys.add(key));\n\t\t\tthis.registerDoneListeners(step);\n\t\t});\n\n\t\twalkthroughDescriptor.when.keys().forEach(key => this.categoryVisibilityContextKeys.add(key));\n\t}\n\n\tprivate registerDoneListeners(step: IWalkthroughStep) {\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tif ((step as any).doneOn) {\n\t\t\tconsole.error(`wakthrough step`, step, `uses deprecated 'doneOn' property. Adopt 'completionEvents' to silence this warning`);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!step.completionEvents.length) {\n\t\t\tstep.completionEvents = coalesce(\n\t\t\t\tstep.description\n\t\t\t\t\t.filter(linkedText => linkedText.nodes.length === 1) // only buttons\n\t\t\t\t\t.flatMap(linkedText =>\n\t\t\t\t\t\tlinkedText.nodes\n\t\t\t\t\t\t\t.filter(((node): node is ILink => typeof node !== 'string'))\n\t\t\t\t\t\t\t.map(({ href }) => {\n\t\t\t\t\t\t\t\tif (href.startsWith('command:')) {\n\t\t\t\t\t\t\t\t\treturn 'onCommand:' + href.slice('command:'.length, href.includes('?') ? href.indexOf('?') : undefined);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (href.startsWith('https://') || href.startsWith('http://')) {\n\t\t\t\t\t\t\t\t\treturn 'onLink:' + href;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t})));\n\t\t}\n\n\t\tif (!step.completionEvents.length) {\n\t\t\tstep.completionEvents.push('stepSelected');\n\t\t}\n\n\t\tfor (let event of step.completionEvents) {\n\t\t\tconst [_, eventType, argument] = /^([^:]*):?(.*)$/.exec(event) ?? [];\n\n\t\t\tif (!eventType) {\n\t\t\t\tconsole.error(`Unknown completionEvent ${event} when registering step ${step.id}`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch (eventType) {\n\t\t\t\tcase 'onLink': case 'onEvent': case 'onView': case 'onSettingChanged':\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'onContext': {\n\t\t\t\t\tconst expression = ContextKeyExpr.deserialize(argument);\n\t\t\t\t\tif (expression) {\n\t\t\t\t\t\tthis.stepCompletionContextKeyExpressions.add(expression);\n\t\t\t\t\t\texpression.keys().forEach(key => this.stepCompletionContextKeys.add(key));\n\t\t\t\t\t\tevent = eventType + ':' + expression.serialize();\n\t\t\t\t\t\tif (this.contextService.contextMatchesRules(expression)) {\n\t\t\t\t\t\t\tthis.sessionEvents.add(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('Unable to parse context key expression:', expression, 'in walkthrough step', step.id);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'onStepSelected': case 'stepSelected':\n\t\t\t\t\tevent = 'stepSelected:' + step.id;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'onCommand':\n\t\t\t\t\tevent = eventType + ':' + argument.replace(/^toSide:/, '');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'onExtensionInstalled': case 'extensionInstalled':\n\t\t\t\t\tevent = 'extensionInstalled:' + argument.toLowerCase();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error(`Unknown completionEvent ${event} when registering step ${step.id}`);\n\t\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.registerCompletionListener(event, step);\n\t\t}\n\t}\n\n\tprivate registerCompletionListener(event: string, step: IWalkthroughStep) {\n\t\tif (!this.completionListeners.has(event)) {\n\t\t\tthis.completionListeners.set(event, new Set());\n\t\t}\n\t\tthis.completionListeners.get(event)?.add(step.id);\n\t}\n\n\tprivate getStep(id: string): IWalkthroughStep {\n\t\tconst step = this.steps.get(id);\n\t\tif (!step) { throw Error('Attempting to access step which does not exist in registry ' + id); }\n\t\treturn step;\n\t}\n}\n\nexport const parseDescription = (desc: string): LinkedText[] => desc.split('\\n').filter(x => x).map(text => parseLinkedText(text));\n\nexport const convertInternalMediaPathToFileURI = (path: string) => path.startsWith('https://')\n\t? URI.parse(path, true)\n\t: FileAccess.asFileUri(`vs/workbench/contrib/welcomeGettingStarted/common/media/${path}`);\n\nconst convertInternalMediaPathToBrowserURI = (path: string) => path.startsWith('https://')\n\t? URI.parse(path, true)\n\t: FileAccess.asBrowserUri(`vs/workbench/contrib/welcomeGettingStarted/common/media/${path}`);\nconst convertInternalMediaPathsToBrowserURIs = (path: string | { hc: string; hcLight?: string; dark: string; light: string }): { hcDark: URI; hcLight: URI; dark: URI; light: URI } => {\n\tif (typeof path === 'string') {\n\t\tconst converted = convertInternalMediaPathToBrowserURI(path);\n\t\treturn { hcDark: converted, hcLight: converted, dark: converted, light: converted };\n\t} else {\n\t\treturn {\n\t\t\thcDark: convertInternalMediaPathToBrowserURI(path.hc),\n\t\t\thcLight: convertInternalMediaPathToBrowserURI(path.hcLight ?? path.light),\n\t\t\tlight: convertInternalMediaPathToBrowserURI(path.light),\n\t\t\tdark: convertInternalMediaPathToBrowserURI(path.dark)\n\t\t};\n\t}\n};\n\nconst convertRelativeMediaPathsToWebviewURIs = (basePath: URI, path: string | { hc: string; hcLight?: string; dark: string; light: string }): { hcDark: URI; hcLight: URI; dark: URI; light: URI } => {\n\tconst convertPath = (path: string) => path.startsWith('https://')\n\t\t? URI.parse(path, true)\n\t\t: asWebviewUri(joinPath(basePath, path));\n\n\tif (typeof path === 'string') {\n\t\tconst converted = convertPath(path);\n\t\treturn { hcDark: converted, hcLight: converted, dark: converted, light: converted };\n\t} else {\n\t\treturn {\n\t\t\thcDark: convertPath(path.hc),\n\t\t\thcLight: convertPath(path.hcLight ?? path.light),\n\t\t\tlight: convertPath(path.light),\n\t\t\tdark: convertPath(path.dark)\n\t\t};\n\t}\n};\n\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'resetGettingStartedProgress',\n\t\t\tcategory: localize2('developer', \"Developer\"),\n\t\t\ttitle: localize2('resetWelcomePageWalkthroughProgress', \"Reset Welcome Page Walkthrough Progress\"),\n\t\t\tf1: true,\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize2('resetGettingStartedProgressDescription', 'Reset the progress of all Walkthrough steps on the Welcome Page to make them appear as if they are being viewed for the first time, providing a fresh start to the getting started experience.'),\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\tconst gettingStartedService = accessor.get(IWalkthroughsService);\n\t\tconst storageService = accessor.get(IStorageService);\n\n\t\tstorageService.store(\n\t\t\thiddenEntriesConfigurationKey,\n\t\t\tJSON.stringify([]),\n\t\t\tStorageScope.PROFILE,\n\t\t\tStorageTarget.USER);\n\n\t\tstorageService.store(\n\t\t\twalkthroughMetadataConfigurationKey,\n\t\t\tJSON.stringify([]),\n\t\t\tStorageScope.PROFILE,\n\t\t\tStorageTarget.USER);\n\n\t\tconst memento = new Memento('gettingStartedService', accessor.get(IStorageService));\n\t\tconst record = memento.getMemento(StorageScope.PROFILE, StorageTarget.USER);\n\t\tfor (const key in record) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(record, key)) {\n\t\t\t\ttry {\n\t\t\t\t\tgettingStartedService.deprogressStep(key);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmemento.saveMemento();\n\t}\n});\n\nregisterSingleton(IWalkthroughsService, WalkthroughsService, InstantiationType.Delayed);\n"]}