{"version":3,"sources":["vs/workbench/contrib/welcomeGettingStarted/browser/gettingStartedAccessibleView.ts"],"names":[],"mappings":"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","file":"gettingStartedAccessibleView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AccessibleViewType, AccessibleContentProvider, ExtensionContentProvider, IAccessibleViewContentProvider, AccessibleViewProviderId } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { GettingStartedPage, inWelcomeContext } from './gettingStarted.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IResolvedWalkthrough, IResolvedWalkthroughStep, IWalkthroughsService } from './gettingStartedService.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { GettingStartedInput } from './gettingStartedInput.js';\nimport { localize } from '../../../../nls.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport { ILink } from '../../../../base/common/linkedText.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { parse } from '../../../../base/common/marshalling.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\n\nexport class GettingStartedAccessibleView implements IAccessibleViewImplementation {\n\treadonly type = AccessibleViewType.View;\n\treadonly priority = 110;\n\treadonly name = 'walkthroughs';\n\treadonly when = inWelcomeContext;\n\n\tgetProvider = (accessor: ServicesAccessor): AccessibleContentProvider | ExtensionContentProvider | undefined => {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorPane = editorService.activeEditorPane;\n\t\tif (!(editorPane instanceof GettingStartedPage)) {\n\t\t\treturn;\n\t\t}\n\t\tconst gettingStartedInput = editorPane.input;\n\t\tif (!(gettingStartedInput instanceof GettingStartedInput) || !gettingStartedInput.selectedCategory) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst gettingStartedService = accessor.get(IWalkthroughsService);\n\t\tconst currentWalkthrough = gettingStartedService.getWalkthrough(gettingStartedInput.selectedCategory);\n\t\tconst currentStepIds = gettingStartedInput.selectedStep;\n\t\tif (currentWalkthrough) {\n\n\t\t\treturn new GettingStartedAccessibleProvider(\n\t\t\t\taccessor.get(IContextKeyService),\n\t\t\t\taccessor.get(ICommandService),\n\t\t\t\taccessor.get(IOpenerService),\n\t\t\t\teditorPane,\n\t\t\t\tcurrentWalkthrough,\n\t\t\t\tcurrentStepIds);\n\t\t}\n\t\treturn;\n\t};\n}\n\nclass GettingStartedAccessibleProvider extends Disposable implements IAccessibleViewContentProvider {\n\n\tprivate _currentStepIndex: number = 0;\n\tprivate _activeWalkthroughSteps: IResolvedWalkthroughStep[] = [];\n\n\tconstructor(\n\t\tprivate contextService: IContextKeyService,\n\t\tprivate commandService: ICommandService,\n\t\tprivate openerService: IOpenerService,\n\t\tprivate readonly _gettingStartedPage: GettingStartedPage,\n\t\tprivate readonly _walkthrough: IResolvedWalkthrough,\n\t\tprivate readonly _focusedStep?: string | undefined,\n\t) {\n\t\tsuper();\n\t\tthis._activeWalkthroughSteps = _walkthrough.steps.filter(step => !step.when || this.contextService.contextMatchesRules(step.when));\n\t}\n\n\treadonly id = AccessibleViewProviderId.Walkthrough;\n\treadonly verbositySettingKey = AccessibilityVerbositySettingId.Walkthrough;\n\treadonly options = { type: AccessibleViewType.View };\n\n\tpublic get actions(): IAction[] {\n\t\tconst actions: IAction[] = [];\n\t\tconst step = this._activeWalkthroughSteps[this._currentStepIndex];\n\t\tconst nodes = step.description.map(lt => lt.nodes.filter((node): node is ILink => typeof node !== 'string').map(node => ({ href: node.href, label: node.label }))).flat();\n\t\tif (nodes.length === 1) {\n\t\t\tconst node = nodes[0];\n\n\t\t\tactions.push(new Action('walthrough.step.action', node.label, ThemeIcon.asClassName(Codicon.run), true, () => {\n\n\t\t\t\tconst isCommand = node.href.startsWith('command:');\n\t\t\t\tconst command = node.href.replace(/command:(toSide:)?/, 'command:');\n\n\t\t\t\tif (isCommand) {\n\t\t\t\t\tconst commandURI = URI.parse(command);\n\n\t\t\t\t\tlet args: any = [];\n\t\t\t\t\ttry {\n\t\t\t\t\t\targs = parse(decodeURIComponent(commandURI.query));\n\t\t\t\t\t} catch {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\targs = parse(commandURI.query);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// ignore error\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!Array.isArray(args)) {\n\t\t\t\t\t\targs = [args];\n\t\t\t\t\t}\n\t\t\t\t\tthis.commandService.executeCommand(commandURI.path, ...args);\n\t\t\t\t} else {\n\t\t\t\t\tthis.openerService.open(command, { allowCommands: true });\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\treturn actions;\n\t}\n\n\tprovideContent(): string {\n\t\tif (this._focusedStep) {\n\t\t\tconst stepIndex = this._activeWalkthroughSteps.findIndex(step => step.id === this._focusedStep);\n\t\t\tif (stepIndex !== -1) {\n\t\t\t\tthis._currentStepIndex = stepIndex;\n\t\t\t}\n\t\t}\n\t\treturn this._getContent(this._walkthrough, this._activeWalkthroughSteps[this._currentStepIndex], /* includeTitle */true);\n\t}\n\n\tprivate _getContent(waltkrough: IResolvedWalkthrough, step: IResolvedWalkthroughStep, includeTitle?: boolean): string {\n\n\t\tconst description = step.description.map(lt => lt.nodes.filter(node => typeof node === 'string')).join('\\n');\n\t\tconst stepsContent =\n\t\t\tlocalize('gettingStarted.step', '{0}\\n{1}', step.title, description);\n\n\t\tif (includeTitle) {\n\t\t\treturn [\n\t\t\t\tlocalize('gettingStarted.title', 'Title: {0}', waltkrough.title),\n\t\t\t\tlocalize('gettingStarted.description', 'Description: {0}', waltkrough.description),\n\t\t\t\tstepsContent\n\t\t\t].join('\\n');\n\t\t}\n\t\telse {\n\t\t\treturn stepsContent;\n\t\t}\n\t}\n\n\tprovideNextContent(): string | undefined {\n\t\tif (++this._currentStepIndex >= this._activeWalkthroughSteps.length) {\n\t\t\t--this._currentStepIndex;\n\t\t\treturn;\n\t\t}\n\t\treturn this._getContent(this._walkthrough, this._activeWalkthroughSteps[this._currentStepIndex]);\n\t}\n\n\tprovidePreviousContent(): string | undefined {\n\t\tif (--this._currentStepIndex < 0) {\n\t\t\t++this._currentStepIndex;\n\t\t\treturn;\n\t\t}\n\t\treturn this._getContent(this._walkthrough, this._activeWalkthroughSteps[this._currentStepIndex]);\n\t}\n\n\tonClose(): void {\n\t\tif (this._currentStepIndex > -1) {\n\t\t\tconst currentStep = this._activeWalkthroughSteps[this._currentStepIndex];\n\t\t\tthis._gettingStartedPage.makeCategoryVisibleWhenAvailable(this._walkthrough.id, currentStep.id);\n\t\t}\n\t}\n}\n"]}