{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/mcp/common/discovery/nativeMcpRemoteDiscovery.ts","vs/workbench/contrib/mcp/common/discovery/nativeMcpRemoteDiscovery.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,YAAY,EAAE,MAAM,6CAA6C,CAAC;AAC3E,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AACtG,OAAO,EAAE,YAAY,EAAE,MAAM,+CAA+C,CAAC;AAC7E,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AACtG,OAAO,EAAE,aAAa,EAAE,MAAM,+CAA+C,CAAC;AAC9E,OAAO,EAAE,WAAW,EAAE,MAAM,2CAA2C,CAAC;AACxE,OAAO,EAAoC,mCAAmC,EAAE,MAAM,gEAAgE,CAAC;AACvJ,OAAO,EAAE,mBAAmB,EAAE,MAAM,0DAA0D,CAAC;AAC/F,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,4BAA4B,EAAE,MAAM,iCAAiC,CAAC;AAE/E;;GAEG;AACI,IAAM,wBAAwB,GAA9B,MAAM,wBAAyB,SAAQ,4BAA4B;IACzE,YACuC,WAAgC,EACxC,UAAuB,EACtC,YAA2B,EAC5B,WAAyB,EAChB,oBAA2C,EACpD,WAAyB,EAChB,oBAA2C;QAElE,KAAK,CAAC,WAAW,CAAC,aAAa,EAAE,EAAE,eAAe,IAAI,IAAI,EAAE,YAAY,EAAE,WAAW,EAAE,oBAAoB,EAAE,WAAW,EAAE,oBAAoB,CAAC,CAAC;QAR1G,gBAAW,GAAX,WAAW,CAAqB;QACxC,eAAU,GAAV,UAAU,CAAa;IAQtD,CAAC;IAEe,KAAK,CAAC,KAAK;QAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;QACpD,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QACnC,CAAC;QAED,MAAM,UAAU,CAAC,WAAW,CAAC,mCAAmC,EAAE,KAAK,EAAC,OAAO,EAAC,EAAE;YACjF,MAAM,OAAO,GAAG,YAAY,CAAC,SAAS,CAAmC,OAAO,CAAC,CAAC;YAElF,OAAO,CAAC,IAAI,EAAE,CAAC,IAAI,CAClB,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAC7B,GAAG,CAAC,EAAE;gBACL,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,8CAA8C,EAAE,GAAG,CAAC,CAAC;gBAC1E,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;YAC5B,CAAC,CACD,CAAC;QACH,CAAC,CAAC,CAAC;IACJ,CAAC;CACD,CAAA;AA/BY,wBAAwB;IAElC,WAAA,mBAAmB,CAAA;IACnB,WAAA,WAAW,CAAA;IACX,WAAA,aAAa,CAAA;IACb,WAAA,YAAY,CAAA;IACZ,WAAA,qBAAqB,CAAA;IACrB,WAAA,YAAY,CAAA;IACZ,WAAA,qBAAqB,CAAA;GARX,wBAAwB,CA+BpC","file":"nativeMcpRemoteDiscovery.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ProxyChannel } from '../../../../../base/parts/ipc/common/ipc.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { INativeMcpDiscoveryHelperService, NativeMcpDiscoveryHelperChannelName } from '../../../../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { IMcpRegistry } from '../mcpRegistryTypes.js';\nimport { NativeFilesystemMcpDiscovery } from './nativeMcpDiscoveryAbstract.js';\n\n/**\n * Discovers MCP servers on the remote filesystem, if any.\n */\nexport class RemoteNativeMpcDiscovery extends NativeFilesystemMcpDiscovery {\n\tconstructor(\n\t\t@IRemoteAgentService private readonly remoteAgent: IRemoteAgentService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IMcpRegistry mcpRegistry: IMcpRegistry,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(remoteAgent.getConnection()?.remoteAuthority || null, labelService, fileService, instantiationService, mcpRegistry, configurationService);\n\t}\n\n\tpublic override async start() {\n\t\tconst connection = this.remoteAgent.getConnection();\n\t\tif (!connection) {\n\t\t\treturn this.setDetails(undefined);\n\t\t}\n\n\t\tawait connection.withChannel(NativeMcpDiscoveryHelperChannelName, async channel => {\n\t\t\tconst service = ProxyChannel.toService<INativeMcpDiscoveryHelperService>(channel);\n\n\t\t\tservice.load().then(\n\t\t\t\tdata => this.setDetails(data),\n\t\t\t\terr => {\n\t\t\t\t\tthis.logService.warn('Error getting remote process MCP environment', err);\n\t\t\t\t\tthis.setDetails(undefined);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ProxyChannel } from '../../../../../base/parts/ipc/common/ipc.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { INativeMcpDiscoveryHelperService, NativeMcpDiscoveryHelperChannelName } from '../../../../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { IRemoteAgentService } from '../../../../services/remote/common/remoteAgentService.js';\nimport { IMcpRegistry } from '../mcpRegistryTypes.js';\nimport { NativeFilesystemMcpDiscovery } from './nativeMcpDiscoveryAbstract.js';\n\n/**\n * Discovers MCP servers on the remote filesystem, if any.\n */\nexport class RemoteNativeMpcDiscovery extends NativeFilesystemMcpDiscovery {\n\tconstructor(\n\t\t@IRemoteAgentService private readonly remoteAgent: IRemoteAgentService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IMcpRegistry mcpRegistry: IMcpRegistry,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(remoteAgent.getConnection()?.remoteAuthority || null, labelService, fileService, instantiationService, mcpRegistry, configurationService);\n\t}\n\n\tpublic override async start() {\n\t\tconst connection = this.remoteAgent.getConnection();\n\t\tif (!connection) {\n\t\t\treturn this.setDetails(undefined);\n\t\t}\n\n\t\tawait connection.withChannel(NativeMcpDiscoveryHelperChannelName, async channel => {\n\t\t\tconst service = ProxyChannel.toService<INativeMcpDiscoveryHelperService>(channel);\n\n\t\t\tservice.load().then(\n\t\t\t\tdata => this.setDetails(data),\n\t\t\t\terr => {\n\t\t\t\t\tthis.logService.warn('Error getting remote process MCP environment', err);\n\t\t\t\t\tthis.setDetails(undefined);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n}\n"]}