{"version":3,"sources":["vs/workbench/contrib/mcp/common/mcpConfiguration.ts"],"names":[],"mappings":"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","file":"mcpConfiguration.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { IJSONSchema, IJSONSchemaMap } from '../../../../base/common/jsonSchema.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { IExtensionManifest, IMcpCollectionContribution } from '../../../../platform/extensions/common/extensions.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { mcpSchemaId } from '../../../services/configuration/common/configuration.js';\nimport { inputsSchema } from '../../../services/configurationResolver/common/configurationResolverSchema.js';\nimport { Extensions, IExtensionFeaturesRegistry, IExtensionFeatureTableRenderer, IRenderedData, IRowData, ITableData } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { IExtensionPointDescriptor } from '../../../services/extensions/common/extensionsRegistry.js';\n\nconst mcpActivationEventPrefix = 'onMcpCollection:';\n\n/**\n * note: `contributedCollectionId` is _not_ the collection ID. The collection\n * ID is formed by passing the contributed ID through `extensionPrefixedIdentifier`\n */\nexport const mcpActivationEvent = (contributedCollectionId: string) =>\n\tmcpActivationEventPrefix + contributedCollectionId;\n\nexport const enum DiscoverySource {\n\tClaudeDesktop = 'claude-desktop',\n\tWindsurf = 'windsurf',\n\tCursorGlobal = 'cursor-global',\n\tCursorWorkspace = 'cursor-workspace',\n}\n\nexport const allDiscoverySources = Object.keys({\n\t[DiscoverySource.ClaudeDesktop]: true,\n\t[DiscoverySource.Windsurf]: true,\n\t[DiscoverySource.CursorGlobal]: true,\n\t[DiscoverySource.CursorWorkspace]: true,\n} satisfies Record<DiscoverySource, true>) as DiscoverySource[];\n\nexport const discoverySourceLabel: Record<DiscoverySource, string> = {\n\t[DiscoverySource.ClaudeDesktop]: localize('mcp.discovery.source.claude-desktop', \"Claude Desktop\"),\n\t[DiscoverySource.Windsurf]: localize('mcp.discovery.source.windsurf', \"Windsurf\"),\n\t[DiscoverySource.CursorGlobal]: localize('mcp.discovery.source.cursor-global', \"Cursor (Global)\"),\n\t[DiscoverySource.CursorWorkspace]: localize('mcp.discovery.source.cursor-workspace', \"Cursor (Workspace)\"),\n};\nexport const discoverySourceSettingsLabel: Record<DiscoverySource, string> = {\n\t[DiscoverySource.ClaudeDesktop]: localize('mcp.discovery.source.claude-desktop.config', \"Claude Desktop configuration (`claude_desktop_config.json`)\"),\n\t[DiscoverySource.Windsurf]: localize('mcp.discovery.source.windsurf.config', \"Windsurf configurations (`~/.codeium/windsurf/mcp_config.json`)\"),\n\t[DiscoverySource.CursorGlobal]: localize('mcp.discovery.source.cursor-global.config', \"Cursor global configuration (`~/.cursor/mcp.json`)\"),\n\t[DiscoverySource.CursorWorkspace]: localize('mcp.discovery.source.cursor-workspace.config', \"Cursor workspace configuration (`.cursor/mcp.json`)\"),\n};\n\nexport const mcpConfigurationSection = 'mcp';\nexport const mcpDiscoverySection = 'chat.mcp.discovery.enabled';\nexport const mcpServerSamplingSection = 'chat.mcp.serverSampling';\n\nexport interface IMcpServerSamplingConfiguration {\n\tallowedDuringChat?: boolean;\n\tallowedOutsideChat?: boolean;\n\tallowedModels?: string[];\n}\n\nexport const mcpSchemaExampleServers = {\n\t'mcp-server-time': {\n\t\tcommand: 'python',\n\t\targs: ['-m', 'mcp_server_time', '--local-timezone=America/Los_Angeles'],\n\t\tenv: {},\n\t}\n};\n\nconst httpSchemaExamples = {\n\t'my-mcp-server': {\n\t\turl: 'http://localhost:3001/mcp',\n\t\theaders: {},\n\t}\n};\n\nconst mcpDevModeProps = (stdio: boolean): IJSONSchemaMap => ({\n\tdev: {\n\t\ttype: 'object',\n\t\tmarkdownDescription: localize('app.mcp.dev', 'Enabled development mode for the server. When present, the server will be started eagerly and output will be included in its output. Properties inside the `dev` object can configure additional behavior.'),\n\t\texamples: [{ watch: 'src/**/*.ts', debug: { type: 'node' } }],\n\t\tproperties: {\n\t\t\twatch: {\n\t\t\t\tdescription: localize('app.mcp.dev.watch', 'A glob pattern or list of glob patterns relative to the workspace folder to watch. The MCP server will be restarted when these files change.'),\n\t\t\t\texamples: ['src/**/*.ts'],\n\t\t\t\toneOf: [{ type: 'string' }, { type: 'array', items: { type: 'string' } }],\n\t\t\t},\n\t\t\t...(stdio && {\n\t\t\t\tdebug: {\n\t\t\t\t\tmarkdownDescription: localize('app.mcp.dev.debug', 'If set, debugs the MCP server using the given runtime as it\\'s started.'),\n\t\t\t\t\toneOf: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: ['type'],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tenum: ['node'],\n\t\t\t\t\t\t\t\t\tdescription: localize('app.mcp.dev.debug.type.node', \"Debug the MCP server using Node.js.\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tadditionalProperties: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\trequired: ['type'],\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tenum: ['debugpy'],\n\t\t\t\t\t\t\t\t\tdescription: localize('app.mcp.dev.debug.type.python', \"Debug the MCP server using Python and debugpy.\")\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdebugpyPath: {\n\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\tdescription: localize('app.mcp.dev.debug.debugpyPath', \"Path to the debugpy executable.\")\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tadditionalProperties: false\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n});\n\nexport const mcpStdioServerSchema: IJSONSchema = {\n\ttype: 'object',\n\tadditionalProperties: false,\n\texamples: [mcpSchemaExampleServers['mcp-server-time']],\n\tproperties: {\n\t\ttype: {\n\t\t\ttype: 'string',\n\t\t\tenum: ['stdio'],\n\t\t\tdescription: localize('app.mcp.json.type', \"The type of the server.\")\n\t\t},\n\t\tcommand: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('app.mcp.json.command', \"The command to run the server.\")\n\t\t},\n\t\tcwd: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('app.mcp.json.cwd', \"The working directory for the server command. Defaults to the workspace folder when run in a workspace.\"),\n\t\t\texamples: ['${workspaceFolder}'],\n\t\t},\n\t\targs: {\n\t\t\ttype: 'array',\n\t\t\tdescription: localize('app.mcp.args.command', \"Arguments passed to the server.\"),\n\t\t\titems: {\n\t\t\t\ttype: 'string'\n\t\t\t},\n\t\t},\n\t\tenvFile: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('app.mcp.envFile.command', \"Path to a file containing environment variables for the server.\"),\n\t\t\texamples: ['${workspaceFolder}/.env'],\n\t\t},\n\t\tenv: {\n\t\t\tdescription: localize('app.mcp.env.command', \"Environment variables passed to the server.\"),\n\t\t\tadditionalProperties: {\n\t\t\t\tanyOf: [\n\t\t\t\t\t{ type: 'null' },\n\t\t\t\t\t{ type: 'string' },\n\t\t\t\t\t{ type: 'number' },\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t...mcpDevModeProps(true),\n\t}\n};\n\nexport const mcpServerSchema: IJSONSchema = {\n\tid: mcpSchemaId,\n\ttype: 'object',\n\ttitle: localize('app.mcp.json.title', \"Model Context Protocol Servers\"),\n\tallowTrailingCommas: true,\n\tallowComments: true,\n\tadditionalProperties: false,\n\tproperties: {\n\t\tservers: {\n\t\t\texamples: [\n\t\t\t\tmcpSchemaExampleServers,\n\t\t\t\thttpSchemaExamples,\n\t\t\t],\n\t\t\tadditionalProperties: {\n\t\t\t\toneOf: [\n\t\t\t\t\tmcpStdioServerSchema, {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tadditionalProperties: false,\n\t\t\t\t\t\trequired: ['url'],\n\t\t\t\t\t\texamples: [httpSchemaExamples['my-mcp-server']],\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tenum: ['http', 'sse'],\n\t\t\t\t\t\t\t\tdescription: localize('app.mcp.json.type', \"The type of the server.\")\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tformat: 'uri',\n\t\t\t\t\t\t\t\tpattern: '^https?:\\\\/\\\\/.+',\n\t\t\t\t\t\t\t\tpatternErrorMessage: localize('app.mcp.json.url.pattern', \"The URL must start with 'http://' or 'https://'.\"),\n\t\t\t\t\t\t\t\tdescription: localize('app.mcp.json.url', \"The URL of the Streamable HTTP or SSE endpoint.\")\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\tdescription: localize('app.mcp.json.headers', \"Additional headers sent to the server.\"),\n\t\t\t\t\t\t\t\tadditionalProperties: { type: 'string' },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...mcpDevModeProps(false),\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\tinputs: inputsSchema.definitions!.inputs\n\t}\n};\n\nexport const mcpContributionPoint: IExtensionPointDescriptor<IMcpCollectionContribution[]> = {\n\textensionPoint: 'mcpServerDefinitionProviders',\n\tactivationEventsGenerator: function* (contribs) {\n\t\tfor (const contrib of contribs) {\n\t\t\tif (contrib.id) {\n\t\t\t\tyield mcpActivationEvent(contrib.id);\n\t\t\t}\n\t\t}\n\t},\n\tjsonSchema: {\n\t\tdescription: localize('vscode.extension.contributes.mcp', 'Contributes Model Context Protocol servers. Users of this should also use `vscode.lm.registerMcpServerDefinitionProvider`.'),\n\t\ttype: 'array',\n\t\tdefaultSnippets: [{ body: [{ id: '', label: '' }] }],\n\t\titems: {\n\t\t\tadditionalProperties: false,\n\t\t\ttype: 'object',\n\t\t\tdefaultSnippets: [{ body: { id: '', label: '' } }],\n\t\t\tproperties: {\n\t\t\t\tid: {\n\t\t\t\t\tdescription: localize('vscode.extension.contributes.mcp.id', \"Unique ID for the collection.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tlabel: {\n\t\t\t\t\tdescription: localize('vscode.extension.contributes.mcp.label', \"Display name for the collection.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\twhen: {\n\t\t\t\t\tdescription: localize('vscode.extension.contributes.mcp.when', \"Condition which must be true to enable this collection.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nclass McpServerDefinitionsProviderRenderer extends Disposable implements IExtensionFeatureTableRenderer {\n\n\treadonly type = 'table';\n\n\tshouldRender(manifest: IExtensionManifest): boolean {\n\t\treturn !!manifest.contributes?.mcpServerDefinitionProviders && Array.isArray(manifest.contributes.mcpServerDefinitionProviders) && manifest.contributes.mcpServerDefinitionProviders.length > 0;\n\t}\n\n\trender(manifest: IExtensionManifest): IRenderedData<ITableData> {\n\t\tconst mcpServerDefinitionProviders = manifest.contributes?.mcpServerDefinitionProviders ?? [];\n\t\tconst headers = [localize('id', \"ID\"), localize('name', \"Name\")];\n\t\tconst rows: IRowData[][] = mcpServerDefinitionProviders\n\t\t\t.map(mcpServerDefinitionProvider => {\n\t\t\t\treturn [\n\t\t\t\t\tnew MarkdownString().appendMarkdown(`\\`${mcpServerDefinitionProvider.id}\\``),\n\t\t\t\t\tmcpServerDefinitionProvider.label\n\t\t\t\t];\n\t\t\t});\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\theaders,\n\t\t\t\trows\n\t\t\t},\n\t\t\tdispose: () => { }\n\t\t};\n\t}\n}\n\nRegistry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).registerExtensionFeature({\n\tid: mcpConfigurationSection,\n\tlabel: localize('mcpServerDefinitionProviders', \"MCP Servers\"),\n\taccess: {\n\t\tcanToggle: false\n\t},\n\trenderer: new SyncDescriptor(McpServerDefinitionsProviderRenderer),\n});\n\n"]}