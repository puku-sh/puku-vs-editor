{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/mcp/common/discovery/nativeMcpDiscoveryAdapters.ts","vs/workbench/contrib/mcp/common/discovery/nativeMcpDiscoveryAdapters.ts"],"names":[],"mappings":"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","file":"nativeMcpDiscoveryAdapters.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { Platform } from '../../../../../base/common/platform.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { INativeMcpDiscoveryData } from '../../../../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { DiscoverySource } from '../mcpConfiguration.js';\nimport { McpCollectionSortOrder, McpServerDefinition, McpServerLaunch, McpServerTransportType } from '../mcpTypes.js';\n\nexport interface NativeMpcDiscoveryAdapter {\n\treadonly remoteAuthority: string | null;\n\treadonly id: string;\n\treadonly order: number;\n\treadonly discoverySource: DiscoverySource;\n\n\tgetFilePath(details: INativeMcpDiscoveryData): URI | undefined;\n\tadaptFile(contents: VSBuffer, details: INativeMcpDiscoveryData): Promise<McpServerDefinition[] | undefined>;\n}\n\nexport async function claudeConfigToServerDefinition(idPrefix: string, contents: VSBuffer, cwd?: URI) {\n\tlet parsed: {\n\t\tmcpServers: Record<string, {\n\t\t\tcommand: string;\n\t\t\targs?: string[];\n\t\t\tenv?: Record<string, string>;\n\t\t\turl?: string;\n\t\t}>;\n\t};\n\n\ttry {\n\t\tparsed = JSON.parse(contents.toString());\n\t} catch {\n\t\treturn;\n\t}\n\n\treturn Promise.all(Object.entries(parsed.mcpServers).map(async ([name, server]): Promise<Mutable<McpServerDefinition>> => {\n\t\tconst launch: McpServerLaunch = server.url ? {\n\t\t\ttype: McpServerTransportType.HTTP,\n\t\t\turi: URI.parse(server.url),\n\t\t\theaders: [],\n\t\t} : {\n\t\t\ttype: McpServerTransportType.Stdio,\n\t\t\targs: server.args || [],\n\t\t\tcommand: server.command,\n\t\t\tenv: server.env || {},\n\t\t\tenvFile: undefined,\n\t\t\tcwd: cwd?.fsPath,\n\t\t};\n\n\t\treturn {\n\t\t\tid: `${idPrefix}.${name}`,\n\t\t\tlabel: name,\n\t\t\tlaunch,\n\t\t\tcacheNonce: await McpServerLaunch.hash(launch),\n\t\t};\n\t}));\n}\n\nexport class ClaudeDesktopMpcDiscoveryAdapter implements NativeMpcDiscoveryAdapter {\n\tpublic id: string;\n\tpublic readonly order = McpCollectionSortOrder.Filesystem;\n\tpublic readonly discoverySource: DiscoverySource = DiscoverySource.ClaudeDesktop;\n\n\tconstructor(public readonly remoteAuthority: string | null) {\n\t\tthis.id = `claude-desktop.${this.remoteAuthority}`;\n\t}\n\n\tgetFilePath({ platform, winAppData, xdgHome, homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\tif (platform === Platform.Windows) {\n\t\t\tconst appData = winAppData || URI.joinPath(homedir, 'AppData', 'Roaming');\n\t\t\treturn URI.joinPath(appData, 'Claude', 'claude_desktop_config.json');\n\t\t} else if (platform === Platform.Mac) {\n\t\t\treturn URI.joinPath(homedir, 'Library', 'Application Support', 'Claude', 'claude_desktop_config.json');\n\t\t} else {\n\t\t\tconst configDir = xdgHome || URI.joinPath(homedir, '.config');\n\t\t\treturn URI.joinPath(configDir, 'Claude', 'claude_desktop_config.json');\n\t\t}\n\t}\n\n\tadaptFile(contents: VSBuffer, { homedir }: INativeMcpDiscoveryData): Promise<McpServerDefinition[] | undefined> {\n\t\treturn claudeConfigToServerDefinition(this.id, contents, homedir);\n\t}\n}\n\nexport class WindsurfDesktopMpcDiscoveryAdapter extends ClaudeDesktopMpcDiscoveryAdapter {\n\tpublic override readonly discoverySource: DiscoverySource = DiscoverySource.Windsurf;\n\n\tconstructor(remoteAuthority: string | null) {\n\t\tsuper(remoteAuthority);\n\t\tthis.id = `windsurf.${this.remoteAuthority}`;\n\t}\n\n\toverride getFilePath({ homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\treturn URI.joinPath(homedir, '.codeium', 'windsurf', 'mcp_config.json');\n\t}\n}\n\nexport class CursorDesktopMpcDiscoveryAdapter extends ClaudeDesktopMpcDiscoveryAdapter {\n\tpublic override readonly discoverySource: DiscoverySource = DiscoverySource.CursorGlobal;\n\n\tconstructor(remoteAuthority: string | null) {\n\t\tsuper(remoteAuthority);\n\t\tthis.id = `cursor.${this.remoteAuthority}`;\n\t}\n\n\toverride getFilePath({ homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\treturn URI.joinPath(homedir, '.cursor', 'mcp.json');\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { Platform } from '../../../../../base/common/platform.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { INativeMcpDiscoveryData } from '../../../../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { DiscoverySource } from '../mcpConfiguration.js';\nimport { McpCollectionSortOrder, McpServerDefinition, McpServerLaunch, McpServerTransportType } from '../mcpTypes.js';\n\nexport interface NativeMpcDiscoveryAdapter {\n\treadonly remoteAuthority: string | null;\n\treadonly id: string;\n\treadonly order: number;\n\treadonly discoverySource: DiscoverySource;\n\n\tgetFilePath(details: INativeMcpDiscoveryData): URI | undefined;\n\tadaptFile(contents: VSBuffer, details: INativeMcpDiscoveryData): Promise<McpServerDefinition[] | undefined>;\n}\n\nexport async function claudeConfigToServerDefinition(idPrefix: string, contents: VSBuffer, cwd?: URI) {\n\tlet parsed: {\n\t\tmcpServers: Record<string, {\n\t\t\tcommand: string;\n\t\t\targs?: string[];\n\t\t\tenv?: Record<string, string>;\n\t\t\turl?: string;\n\t\t}>;\n\t};\n\n\ttry {\n\t\tparsed = JSON.parse(contents.toString());\n\t} catch {\n\t\treturn;\n\t}\n\n\treturn Promise.all(Object.entries(parsed.mcpServers).map(async ([name, server]): Promise<Mutable<McpServerDefinition>> => {\n\t\tconst launch: McpServerLaunch = server.url ? {\n\t\t\ttype: McpServerTransportType.HTTP,\n\t\t\turi: URI.parse(server.url),\n\t\t\theaders: [],\n\t\t} : {\n\t\t\ttype: McpServerTransportType.Stdio,\n\t\t\targs: server.args || [],\n\t\t\tcommand: server.command,\n\t\t\tenv: server.env || {},\n\t\t\tenvFile: undefined,\n\t\t\tcwd: cwd?.fsPath,\n\t\t};\n\n\t\treturn {\n\t\t\tid: `${idPrefix}.${name}`,\n\t\t\tlabel: name,\n\t\t\tlaunch,\n\t\t\tcacheNonce: await McpServerLaunch.hash(launch),\n\t\t};\n\t}));\n}\n\nexport class ClaudeDesktopMpcDiscoveryAdapter implements NativeMpcDiscoveryAdapter {\n\tpublic id: string;\n\tpublic readonly order = McpCollectionSortOrder.Filesystem;\n\tpublic readonly discoverySource: DiscoverySource = DiscoverySource.ClaudeDesktop;\n\n\tconstructor(public readonly remoteAuthority: string | null) {\n\t\tthis.id = `claude-desktop.${this.remoteAuthority}`;\n\t}\n\n\tgetFilePath({ platform, winAppData, xdgHome, homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\tif (platform === Platform.Windows) {\n\t\t\tconst appData = winAppData || URI.joinPath(homedir, 'AppData', 'Roaming');\n\t\t\treturn URI.joinPath(appData, 'Claude', 'claude_desktop_config.json');\n\t\t} else if (platform === Platform.Mac) {\n\t\t\treturn URI.joinPath(homedir, 'Library', 'Application Support', 'Claude', 'claude_desktop_config.json');\n\t\t} else {\n\t\t\tconst configDir = xdgHome || URI.joinPath(homedir, '.config');\n\t\t\treturn URI.joinPath(configDir, 'Claude', 'claude_desktop_config.json');\n\t\t}\n\t}\n\n\tadaptFile(contents: VSBuffer, { homedir }: INativeMcpDiscoveryData): Promise<McpServerDefinition[] | undefined> {\n\t\treturn claudeConfigToServerDefinition(this.id, contents, homedir);\n\t}\n}\n\nexport class WindsurfDesktopMpcDiscoveryAdapter extends ClaudeDesktopMpcDiscoveryAdapter {\n\tpublic override readonly discoverySource: DiscoverySource = DiscoverySource.Windsurf;\n\n\tconstructor(remoteAuthority: string | null) {\n\t\tsuper(remoteAuthority);\n\t\tthis.id = `windsurf.${this.remoteAuthority}`;\n\t}\n\n\toverride getFilePath({ homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\treturn URI.joinPath(homedir, '.codeium', 'windsurf', 'mcp_config.json');\n\t}\n}\n\nexport class CursorDesktopMpcDiscoveryAdapter extends ClaudeDesktopMpcDiscoveryAdapter {\n\tpublic override readonly discoverySource: DiscoverySource = DiscoverySource.CursorGlobal;\n\n\tconstructor(remoteAuthority: string | null) {\n\t\tsuper(remoteAuthority);\n\t\tthis.id = `cursor.${this.remoteAuthority}`;\n\t}\n\n\toverride getFilePath({ homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\treturn URI.joinPath(homedir, '.cursor', 'mcp.json');\n\t}\n}\n"]}