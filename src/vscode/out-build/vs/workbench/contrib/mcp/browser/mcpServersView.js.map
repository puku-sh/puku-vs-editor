{"version":3,"sources":["vs/workbench/contrib/mcp/browser/mcpServersView.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAEhG,OAAO,4BAA4B,CAAC;AACpC,OAAO,KAAK,GAAG,MAAM,iCAAiC,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,MAAM,oDAAoD,CAAC;AAE/E,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,yBAAyB,EAAE,cAAc,EAAE,MAAM,wCAAwC,CAAC;AACnG,OAAO,EAAE,kBAAkB,EAAE,UAAU,EAAE,eAAe,EAAE,OAAO,EAAe,YAAY,EAAE,MAAM,sCAAsC,CAAC;AAC3I,OAAO,EAAE,iBAAiB,EAAe,UAAU,EAAE,mBAAmB,EAAE,MAAM,mCAAmC,CAAC;AACpH,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAC;AACzD,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,qBAAqB,EAAE,cAAc,EAAE,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AACjI,OAAO,EAAE,mBAAmB,EAAE,MAAM,yDAAyD,CAAC;AAC9F,OAAO,EAAE,cAAc,EAAE,MAAM,gDAAgD,CAAC;AAChF,OAAO,EAAE,aAAa,EAAE,MAAM,6CAA6C,CAAC;AAC5E,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AAC1F,OAAO,EAAE,kBAAkB,EAAE,MAAM,kDAAkD,CAAC;AACtF,OAAO,EAAE,oBAAoB,EAAY,MAAM,0DAA0D,CAAC;AAC1G,OAAO,EAAE,cAAc,EAAE,MAAM,8CAA8C,CAAC;AAC9E,OAAO,EAAE,aAAa,EAAE,MAAM,mDAAmD,CAAC;AAClF,OAAO,EAAE,0BAA0B,EAAE,MAAM,0CAA0C,CAAC;AAEtF,OAAO,EAAE,sBAAsB,EAAyC,UAAU,IAAI,cAAc,EAAE,MAAM,0BAA0B,CAAC;AACvI,OAAO,EAAE,6BAA6B,EAAE,oBAAoB,EAAE,yBAAyB,EAAuB,mBAAmB,EAA4B,8BAA8B,EAAE,MAAM,uBAAuB,CAAC;AAC3N,OAAO,EAAE,cAAc,EAAE,qBAAqB,EAAE,aAAa,EAAE,qBAAqB,EAAE,qBAAqB,EAAE,qBAAqB,EAAE,MAAM,uBAAuB,CAAC;AAClK,OAAO,EAAE,eAAe,EAAE,aAAa,EAAE,mBAAmB,EAAE,oBAAoB,EAAE,yBAAyB,EAAE,MAAM,uBAAuB,CAAC;AAC7I,OAAO,EAAE,YAAY,EAAW,SAAS,EAAE,MAAM,oCAAoC,CAAC;AAEtF,OAAO,EAAE,iCAAiC,EAAE,0BAA0B,EAAE,MAAM,kDAAkD,CAAC;AACjI,OAAO,EAAE,SAAS,EAAE,MAAM,sCAAsC,CAAC;AACjE,OAAO,EAAE,KAAK,EAAE,MAAM,0CAA0C,CAAC;AACjE,OAAO,EAAE,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAE5E,OAAO,EAAE,cAAc,EAAE,MAAM,0DAA0D,CAAC;AAC1F,OAAO,EAAE,mBAAmB,EAAE,uBAAuB,EAAE,MAAM,uCAAuC,CAAC;AACrG,OAAO,EAAE,cAAc,EAAE,MAAM,qDAAqD,CAAC;AACrF,OAAO,EAAE,eAAe,EAAE,MAAM,sCAAsC,CAAC;AACvE,OAAO,EAAE,MAAM,EAAE,MAAM,8CAA8C,CAAC;AACtE,OAAO,EAAE,mBAAmB,EAAE,MAAM,qDAAqD,CAAC;AAC1F,OAAO,EAAE,0BAA0B,EAAE,MAAM,6CAA6C,CAAC;AAGzF,OAAO,EAAE,uBAAuB,EAAY,MAAM,mDAAmD,CAAC;AACtG,OAAO,EAAE,aAAa,EAAE,MAAM,qBAAqB,CAAC;AAEpD,OAAO,EAAE,0BAA0B,EAA4B,MAAM,uDAAuD,CAAC;AAC7H,OAAO,EAAE,qBAAqB,EAAE,MAAM,uDAAuD,CAAC;AAC9F,OAAO,EAAE,YAAY,EAAE,MAAM,0DAA0D,CAAC;AACxF,OAAO,EAAE,wBAAwB,EAAE,MAAM,2DAA2D,CAAC;AAkB9F,IAAM,kBAAkB,GAAxB,MAAM,kBAAmB,SAAQ,0BAA+C;IActF,YACkB,cAAwC,EACzD,OAA4B,EACR,iBAAqC,EACpC,kBAAuC,EACrC,oBAA2C,EACnD,YAA2B,EAC3B,YAA2B,EACnB,oBAA2C,EAC9C,iBAAqC,EACjC,qBAA6C,EACrD,aAA6B,EAC7B,aAA8C,EACxC,mBAA0D,EACpD,yBAAwE,EAC3E,aAAuD,EACtD,uBAAoE;QAE9F,KAAK,CAAC,OAAO,EAAE,iBAAiB,EAAE,kBAAkB,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,qBAAqB,EAAE,oBAAoB,EAAE,aAAa,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;QAjBtK,mBAAc,GAAd,cAAc,CAA0B;QAWxB,kBAAa,GAAb,aAAa,CAAgB;QACvB,wBAAmB,GAAnB,mBAAmB,CAAsB;QACjC,8BAAyB,GAAzB,yBAAyB,CAA4B;QAC1D,kBAAa,GAAb,aAAa,CAAyB;QACnC,4BAAuB,GAAvB,uBAAuB,CAA0B;QA5BvF,SAAI,GAAmD,IAAI,CAAC;QAC5D,kBAAa,GAAuB,IAAI,CAAC;QACzC,qBAAgB,GAAuB,IAAI,CAAC;QAOnC,4BAAuB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,YAAY,EAAE,CAAC,CAAC;IAsB9E,CAAC;IAEkB,UAAU,CAAC,SAAsB;QACnD,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAE5B,2BAA2B;QAC3B,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAAC;QACpF,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAEjD,MAAM,gBAAgB,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAC5E,MAAM,mBAAmB,GAAG,GAAG,CAAC,MAAM,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACpE,MAAM,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QACnE,MAAM,cAAc,GAAG,GAAG,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC;QAElD,IAAI,CAAC,YAAY,GAAG;YACnB,cAAc;YACd,UAAU;YACV,gBAAgB;YAChB,mBAAmB;SACnB,CAAC;QAEF,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,EACrF,GAAG,IAAI,CAAC,EAAE,cAAc,EACxB,IAAI,CAAC,aAAa,EAClB;YACC,SAAS,KAAK,OAAO,EAAE,CAAC,CAAC,CAAC;YAC1B,aAAa,EAAE,GAAG,EAAE,CAAC,iBAAiB,CAAC,UAAU;SACjD,EACD,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iBAAiB,EAAE;gBAC5D,YAAY,EAAE;oBACb,QAAQ,EAAE,GAAG,EAAE;wBACd,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;wBAC7E,IAAI,YAAY,0CAAkC,EAAE,CAAC;4BACpD,OAAO,IAAI,CAAC,aAAa,CAAC,kBAAkB,EAAE,0BAAkB,CAAC,CAAC,6BAAqB,CAAC,2BAAmB,CAAC;wBAC7G,CAAC;wBACD,IAAI,YAAY,+CAAuC,EAAE,CAAC;4BACzD,OAAO,IAAI,CAAC,aAAa,CAAC,kBAAkB,EAAE,0BAAkB,CAAC,CAAC,4BAAoB,CAAC,4BAAoB,CAAC;wBAC7G,CAAC;wBACD,mCAA2B;oBAC5B,CAAC;iBACD;aACD,CAAC,CAAC,EACH;YACC,wBAAwB,EAAE,KAAK;YAC/B,gBAAgB,EAAE,KAAK;YACvB,mBAAmB,EAAE,KAAK;YAC1B,qBAAqB,EAAE;gBACtB,YAAY,CAAC,SAAqC;oBACjD,OAAO,SAAS,EAAE,KAAK,IAAI,EAAE,CAAC;gBAC/B,CAAC;gBACD,kBAAkB;oBACjB,OAAO,QAAQ,CAAC,IAAa,EAAE,IAAa,CAAC,CAAC;gBAC/C,CAAC;aACD;YACD,cAAc,EAAE,0BAA0B,CAAC,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,kBAAkB;YACtH,iBAAiB,EAAE,IAAI;SACvB,CAA4C,CAAC,CAAC;QAChD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,EAAE;YAClI,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,OAAO,CAAC,OAAQ,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QAE1E,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAChB,IAAI,CAAC,WAAW,EAAE,CAAC;QACpB,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,aAAa,CAAC,CAA6C;QACxE,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;YACf,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;YAC1C,MAAM,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,CAAC,OAAQ,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,OAAO;gBAClH,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;YACb,MAAM,MAAM,GAAgB,qBAAqB,CAAC,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;YAC/F,MAAM,OAAO,GAAc,EAAE,CAAC;YAC9B,KAAK,MAAM,WAAW,IAAI,MAAM,EAAE,CAAC;gBAClC,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE,CAAC;oBACtC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBACzB,IAAI,YAAY,CAAC,UAAU,CAAC,EAAE,CAAC;wBAC9B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;oBAC7B,CAAC;gBACF,CAAC;gBACD,OAAO,CAAC,IAAI,CAAC,IAAI,SAAS,EAAE,CAAC,CAAC;YAC/B,CAAC;YACD,OAAO,CAAC,GAAG,EAAE,CAAC;YACd,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC;gBACvC,SAAS,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,MAAM;gBACzB,UAAU,EAAE,GAAG,EAAE,CAAC,OAAO;gBACzB,YAAY,EAAE,IAAI,CAAC,uBAAuB;gBAC1C,MAAM,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE;aACnC,CAAC,CAAC;QACJ,CAAC;IACF,CAAC;IAEkB,UAAU,CAAC,MAAc,EAAE,KAAa;QAC1D,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAClC,CAAC;IAED,KAAK,CAAC,IAAI,CAAC,KAAa;QACvB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;YAChB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YACjC,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACxB,CAAC;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC;YACrC,IAAI,CAAC,KAAK,GAAG,EAAE,KAAK,EAAE,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,WAAW,EAAE,IAAI,eAAe,EAAE,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC;QAC1G,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;QAC7C,CAAC;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,IAAI,IAAI,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;YACjC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE;gBAC9D,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;oBACjB,OAAO;gBACR,CAAC;gBACD,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;gBACzB,IAAI,CAAC,WAAW,EAAE,CAAC;YACpB,CAAC,CAAC,CAAC,CAAC;QACL,CAAC;QAED,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;IACzB,CAAC;IAEO,WAAW;QAClB,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;YACjB,OAAO;QACR,CAAC;QACD,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;YACf,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC3D,CAAC;QACD,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;QACzD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC;YACpC,IAAI,CAAC,UAAU,EAAE,CAAC;QACnB,CAAC;IACF,CAAC;IAEO,kBAAkB,CAAC,IAAa;QACvC,IAAI,CAAC,gBAAgB,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC;QACvD,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACpD,CAAC;IAEO,oBAAoB,CAAC,gBAA6B;QACzD,MAAM,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAEnF,MAAM,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;QAC7E,MAAM,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;QAE7D,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;QACtE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAmB,EAAE,IAAa,CAAC,CAAC;QAEjE,MAAM,mBAAmB,GAAG,yBAAyB,CAAC,EAAE,EAAE,EAAE,+BAA+B,EAAE,SAAS,EAAE,CAAC,OAAO,iCAAiC,EAAE,CAAC,EAAE,KAAK,EAAE,iCAAiC,EAAE,OAAO,EAAE,QAAQ,CAAC,IAA8B,EAAE,IAAe,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC;QACjR,MAAM,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC;QAClF,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CACxE,IAAI,cAAc,CACjB,QAAQ,CAAC,IAAiC,EAAE,IAA0Q,CAAC,EACvT,EAAE,SAAS,EAAE,EAAE,eAAe,EAAE,CAAC,+BAA+B,CAAC,EAAE,EAAE,CACrE;aACC,cAAc,CAAC,MAAM,CAAC;aACtB,cAAc,CAAC,QAAQ,CAAC,IAAkC,EAAE,IAAyF,EAAE,mBAAmB,CAAC,CAAC,CAC9K,CAAC,CAAC;QACH,WAAW,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAEhD,MAAM,eAAe,GAAG,GAAG,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,+BAA+B,CAAC,CAAC,CAAC;QAC3F,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,eAAe,EAAE;YACzD,KAAK,EAAE,QAAQ,CAAC,IAAiC,EAAE,IAAgC,CAAC;YACpF,GAAG,mBAAmB;SACtB,CAAC,CAAC,CAAC;QACJ,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAiC,EAAE,IAAgC,CAAC,CAAC;QAE7F,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,IAAI,EAAE;YAE3C,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;gBAClD,IAAI,EAAE,MAAM;gBACZ,OAAO,EAAE,QAAQ,CAAC,IAAgC,EAAE,IAAiC,CAAC;gBACtF,MAAM,EAAE;oBACP,eAAe,EAAE,CAAC;4BACjB,QAAQ,EAAE,IAAI,cAAc,CAAC,QAAQ,CAAC,IAAkC,EAAE,IAAyF,EAAE,mBAAmB,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;yBAC/M,CAAC;iBACF;gBACD,OAAO,EAAE;oBACR,EAAE,KAAK,EAAE,QAAQ,CAAC,IAAiC,EAAE,IAAQ,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE;oBACjF,EAAE,KAAK,EAAE,QAAQ,CAAC,IAAiC,EAAE,IAAQ,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,KAAK,EAAE;iBAClF;aACD,CAAC,CAAC;YAEH,IAAI,MAAM,EAAE,CAAC;gBACZ,MAAM,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,iCAAiC,EAAE,IAAI,CAAC,CAAC;YACtF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,UAAU,CAAC,OAAiB;QACnC,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YAEvB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;YACzE,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;YAErF,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC;gBAC1B,IAAI,OAAO,EAAE,CAAC;oBACb,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,SAAS,GAAG,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;oBAC3F,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC;gBACzD,CAAC;qBAAM,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC;oBACxB,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,SAAS,GAAG,EAAE,CAAC;oBACrD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAqB,EAAE,IAAuB,CAAC,CAAC;gBACrG,CAAC;gBACD,IAAI,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;oBAC9C,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;gBACjD,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,KAAK,CAAC,KAAa;QAChC,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,IAAI,KAAK,EAAE,CAAC;YACX,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;YACjG,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC;YAChE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC;QAC/B,CAAC;QAED,MAAM,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,OAAO,EAAoC,CAAC,CAAC;QAC1F,IAAI,OAAO,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,UAAU,EAAE,CAAC;QAC1D,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE;YACvF,MAAM,gBAAgB,GAAG,IAAI,CAAC,sBAAsB,CAAC,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC;YACnG,IAAI,gBAAgB,EAAE,CAAC;gBACtB,OAAO,GAAG,gBAAgB,CAAC;gBAC3B,gBAAgB,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;YAChD,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpI,OAAO,EAAE,KAAK,EAAE,IAAI,UAAU,CAAC,OAAO,CAAC,EAAE,gBAAgB,EAAE,gBAAgB,CAAC,KAAK,EAAE,WAAW,EAAE,CAAC;IAClG,CAAC;IAEO,sBAAsB,CAAC,UAAiC,EAAE,aAAoC;QACrG,MAAM,aAAa,GAAG,CAAC,GAAG,UAAU,CAAC,CAAC;QACtC,MAAM,0BAA0B,GAAG,CAAC,IAAY,EAAU,EAAE;YAC3D,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;YACf,MAAM,sBAAsB,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;YACnD,IAAI,sBAAsB,EAAE,CAAC;gBAC5B,KAAK,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,sBAAsB,CAAC,EAAE,CAAC,CAAC;gBACzE,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;oBAClB,OAAO,0BAA0B,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBAC7C,CAAC;YACF,CAAC;YACD,OAAO,KAAK,CAAC;QACd,CAAC,CAAC;QAEF,IAAI,UAAU,GAAY,KAAK,CAAC;QAChC,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;YAC3D,MAAM,YAAY,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;YAC1C,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,YAAY,CAAC,EAAE,CAAC,EAAE,CAAC;gBACrD,UAAU,GAAG,IAAI,CAAC;gBAClB,UAAU,CAAC,MAAM,CAAC,0BAA0B,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,YAAY,CAAC,CAAC;YAC/E,CAAC;QACF,CAAC;QAED,KAAK,IAAI,KAAK,GAAG,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,CAAC;YAC7D,MAAM,YAAY,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;YACvC,IAAI,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,YAAY,CAAC,EAAE,CAAC,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC;gBACjH,UAAU,GAAG,IAAI,CAAC;gBAClB,UAAU,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC7B,CAAC;QACF,CAAC;QAED,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,IAAI,UAAU,CAAC,MAAM,KAAK,aAAa,CAAC,MAAM,EAAE,CAAC;gBAChD,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC;oBAC3D,IAAI,UAAU,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,aAAa,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;wBACxD,UAAU,GAAG,IAAI,CAAC;wBAClB,UAAU,GAAG,aAAa,CAAC;wBAC3B,MAAM;oBACP,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;QAED,OAAO,UAAU,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC;IAC5C,CAAC;CACD,CAAA;AA5TY,kBAAkB;IAiB5B,WAAA,kBAAkB,CAAA;IAClB,WAAA,mBAAmB,CAAA;IACnB,WAAA,qBAAqB,CAAA;IACrB,WAAA,aAAa,CAAA;IACb,WAAA,aAAa,CAAA;IACb,WAAA,qBAAqB,CAAA;IACrB,WAAA,kBAAkB,CAAA;IAClB,WAAA,sBAAsB,CAAA;IACtB,YAAA,cAAc,CAAA;IACd,YAAA,cAAc,CAAA;IACd,YAAA,oBAAoB,CAAA;IACpB,YAAA,0BAA0B,CAAA;IAC1B,YAAA,uBAAuB,CAAA;IACvB,YAAA,wBAAwB,CAAA;GA9Bd,kBAAkB,CA4T9B;;AAcD,IAAM,iBAAiB,GAAvB,MAAM,iBAAiB;;aAEN,eAAU,GAAG,WAAH,AAAc,CAAC;IAGzC,YACkB,OAAqC,EAC/B,oBAA4D,EAC7D,mBAA0D,EAC1D,mBAA0D;QAH/D,YAAO,GAAP,OAAO,CAA8B;QACd,yBAAoB,GAApB,oBAAoB,CAAuB;QAC5C,wBAAmB,GAAnB,mBAAmB,CAAsB;QACzC,wBAAmB,GAAnB,mBAAmB,CAAsB;QANxE,eAAU,GAAG,mBAAiB,CAAC,UAAU,CAAC;IAO/C,CAAC;IAEL,cAAc,CAAC,IAAiB;QAC/B,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,sCAAsC,CAAC,CAAC,CAAC;QAChF,MAAM,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;QACpE,MAAM,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;QAChG,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QACvD,MAAM,eAAe,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;QACxE,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QAC7D,MAAM,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;QACpD,MAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;QAC1D,MAAM,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC;QACxE,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QACrD,MAAM,eAAe,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,eAAe,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QAC3I,MAAM,SAAS,GAAG,IAAI,SAAS,CAAC,MAAM,EAAE;YACvC,sBAAsB,EAAE,CAAC,MAAe,EAAE,OAA+B,EAAE,EAAE;gBAC5E,IAAI,MAAM,YAAY,cAAc,EAAE,CAAC;oBACtC,OAAO,MAAM,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;gBAC7C,CAAC;gBACD,OAAO,SAAS,CAAC;YAClB,CAAC;YACD,qBAAqB,EAAE,IAAI;SAC3B,CAAC,CAAC;QAEH,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC9B,MAAM,iBAAiB,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,KAAK,IAAI,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;QAC5G,MAAM,qBAAqB,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,qBAAqB,CAAC,CAAC;QAE9F,MAAM,OAAO,GAAG;YACf,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,aAAa,EAAE,IAAI,CAAC;YAC7D,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,qBAAqB,CAAC;YAC/D,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,qBAAqB,EAAE,KAAK,CAAC;YACtE,qBAAqB;SACrB,CAAC;QAEF,MAAM,OAAO,GAAG;YACf,UAAU;YACV,eAAe;YACf,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,aAAa,EAAE,OAAO,EAAE,IAAI,CAAC;YACtE,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,yBAAyB,EAAE,aAAa,CAAC;YAClF,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,oBAAoB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,qBAAqB,CAAC;SACrJ,CAAC;QACF,MAAM,mBAAmB,GAAwB,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,EAAE,CAAC,GAAG,OAAO,EAAE,GAAG,OAAO,CAAC,CAAC,CAAC;QAEzI,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,UAAU,GAAG,kBAAkB,CAAC,GAAG,OAAO,EAAE,GAAG,OAAO,EAAE,SAAS,EAAE,iBAAiB,EAAE,mBAAmB,CAAC,CAAC;QAEjH,OAAO;YACN,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC,UAAU,CAAC,EAAE,SAAS;YAC/E,oBAAoB,EAAE,EAAE;YACxB,IAAI,SAAS,CAAC,SAA8B;gBAC3C,mBAAmB,CAAC,SAAS,GAAG,SAAS,CAAC;YAC3C,CAAC;SACD,CAAC;IACH,CAAC;IAED,iBAAiB,CAAC,KAAa,EAAE,IAA4B;QAC5D,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAEtC,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,EAAE,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,aAAa,CAAC,SAA8B,EAAE,KAAa,EAAE,IAA4B;QACxF,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QACzC,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC/D,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,oBAAoB,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,KAAK,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,SAAS,CAAC,WAAW,CAAC;QAErD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;QAChC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAE3B,MAAM,gBAAgB,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,SAAS,CAAC,aAAa,EAAE,KAAK,IAAI,SAAS,CAAC,aAAa,CAAC,KAAK,6CAAqC,CAAC,CAAC;QAC9K,gBAAgB,EAAE,CAAC;QACnB,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;YACpE,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,EAAE,EAAE,CAAC;gBACjC,gBAAgB,EAAE,CAAC;YACpB,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc,CAAC,SAA8B,EAAE,KAAa,EAAE,IAA4B;QACzF,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;IAChE,CAAC;IAED,eAAe,CAAC,IAA4B;QAC3C,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;QAC/D,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC9C,CAAC;;AAtGI,iBAAiB;IAOpB,WAAA,qBAAqB,CAAA;IACrB,WAAA,oBAAoB,CAAA;IACpB,WAAA,oBAAoB,CAAA;GATjB,iBAAiB,CAuGtB;AAGD,MAAM,OAAO,2BAA4B,SAAQ,kBAAkB;IAE/C,UAAU,CAAC,SAAsB;QACnD,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;QAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,yBAAyB,CAAC,6BAA6B,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACjG,CAAC;IAEQ,KAAK,CAAC,IAAI;QAClB,OAAO,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC3B,CAAC;CACD;AAED,MAAM,OAAO,2BAA4B,SAAQ,UAAU;aAEnD,OAAE,GAAG,0CAA0C,CAAC;IAEvD;QACC,KAAK,EAAE,CAAC;QAER,QAAQ,CAAC,EAAE,CAAiB,cAAc,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC;YACvE;gBACC,EAAE,EAAE,yBAAyB;gBAC7B,IAAI,EAAE,SAAS,CAAC,IAAe,EAAE,yBAAyB,CAAC;gBAC3D,cAAc,EAAE,IAAI,cAAc,CAAC,kBAAkB,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5D,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,EAAE,6BAA6B,EAAE,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;gBACnH,MAAM,EAAE,EAAE;gBACV,KAAK,EAAE,CAAC;gBACR,mBAAmB,EAAE,IAAI;aACzB;YACD;gBACC,EAAE,EAAE,yCAAyC;gBAC7C,IAAI,EAAE,SAAS,CAAC,IAAK,EAAE,aAAa,CAAC;gBACrC,cAAc,EAAE,IAAI,cAAc,CAAC,2BAA2B,EAAE,CAAC,EAAE,CAAC,CAAC;gBACrE,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,EAAE,6BAA6B,CAAC,SAAS,EAAE,EAAE,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,8BAA8B,CAAC,SAAS,sDAAoC,EAAE,cAAc,CAAC,EAAE,CAAC,qBAAqB,CAAC,MAAM,CAAC,UAAU,0BAA0B,EAAE,CAAC,EAAE,qBAAqB,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,qBAAqB,CAAC,MAAM,CAAC,UAAU,iCAAiC,EAAE,CAAC,CAAC,CAAC;gBACha,MAAM,EAAE,EAAE;gBACV,KAAK,EAAE,CAAC;gBACR,mBAAmB,EAAE,IAAI;aACzB;YACD;gBACC,EAAE,EAAE,iCAAiC;gBACrC,IAAI,EAAE,SAAS,CAAC,IAAK,EAAE,aAAa,CAAC;gBACrC,cAAc,EAAE,IAAI,cAAc,CAAC,kBAAkB,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC5D,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,uBAAuB,EAAE,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,8BAA8B,CAAC,SAAS,sDAAoC,EAAE,cAAc,CAAC,EAAE,CAAC,qBAAqB,CAAC,MAAM,CAAC,UAAU,0BAA0B,EAAE,CAAC,EAAE,qBAAqB,CAAC,WAAW,CAAC,QAAQ,CAAC,EAAE,qBAAqB,CAAC,MAAM,CAAC,UAAU,iCAAiC,EAAE,CAAC,CAAC,CAAC;aACzX;YACD;gBACC,EAAE,EAAE,yCAAyC;gBAC7C,IAAI,EAAE,SAAS,CAAC,IAAK,EAAE,aAAa,CAAC;gBACrC,cAAc,EAAE,IAAI,cAAc,CAAC,2BAA2B,EAAE,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;gBACxF,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,mBAAmB,EAAE,6BAA6B,CAAC,SAAS,EAAE,EAAE,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,8BAA8B,CAAC,SAAS,sDAAoC,EAAE,qBAAqB,CAAC,MAAM,CAAC,UAAU,0BAA0B,EAAE,CAAC,CAAC,MAAM,EAAE,EAAE,qBAAqB,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,qBAAqB,CAAC,MAAM,CAAC,UAAU,iCAAiC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;gBAC7Z,MAAM,EAAE,EAAE;gBACV,KAAK,EAAE,CAAC;gBACR,mBAAmB,EAAE,IAAI;aACzB;YACD;gBACC,EAAE,EAAE,iCAAiC;gBACrC,IAAI,EAAE,SAAS,CAAC,IAAK,EAAE,aAAa,CAAC;gBACrC,cAAc,EAAE,IAAI,cAAc,CAAC,kBAAkB,EAAE,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;gBAC/E,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,uBAAuB,EAAE,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,8BAA8B,CAAC,SAAS,sDAAoC,EAAE,qBAAqB,CAAC,MAAM,CAAC,UAAU,0BAA0B,EAAE,CAAC,CAAC,MAAM,EAAE,EAAE,qBAAqB,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,qBAAqB,CAAC,MAAM,CAAC,UAAU,iCAAiC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;aACtX;SACD,EAAE,cAAc,CAAC,CAAC;IACpB,CAAC","file":"mcpServersView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/mcpServersView.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { IListContextMenuEvent } from '../../../../base/browser/ui/list/list.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { createMarkdownCommandLink, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { combinedDisposable, Disposable, DisposableStore, dispose, IDisposable, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { DelayedPagedModel, IPagedModel, PagedModel, IterativePagedModel } from '../../../../base/common/paging.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyDefinedExpr, ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { WorkbenchPagedList } from '../../../../platform/list/browser/listService.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { getLocationBasedViewColors } from '../../../browser/parts/views/viewPane.js';\nimport { IViewletViewOptions } from '../../../browser/parts/views/viewsViewlet.js';\nimport { IViewDescriptorService, IViewsRegistry, ViewContainerLocation, Extensions as ViewExtensions } from '../../../common/views.js';\nimport { HasInstalledMcpServersContext, IMcpWorkbenchService, InstalledMcpServersViewId, IWorkbenchMcpServer, McpServerContainers, McpServerEnablementState, McpServersGalleryStatusContext } from '../common/mcpTypes.js';\nimport { DropDownAction, getContextMenuActions, InstallAction, InstallingLabelAction, ManageMcpServerAction, McpServerStatusAction } from './mcpServerActions.js';\nimport { PublisherWidget, StarredWidget, McpServerIconWidget, McpServerHoverWidget, McpServerScopeBadgeWidget } from './mcpServerWidgets.js';\nimport { ActionRunner, IAction, Separator } from '../../../../base/common/actions.js';\nimport { IActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { mcpGalleryServiceEnablementConfig, mcpGalleryServiceUrlConfig } from '../../../../platform/mcp/common/mcpManagement.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { DefaultViewsContext, SearchMcpServersContext } from '../../extensions/common/extensions.js';\nimport { VIEW_CONTAINER } from '../../extensions/browser/extensions.contribution.js';\nimport { ChatContextKeys } from '../../chat/common/chatContextKeys.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { defaultButtonStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { AbstractExtensionsListView } from '../../extensions/browser/extensionsViews.js';\nimport { ExtensionListRendererOptions } from '../../extensions/browser/extensionsList.js';\nimport { HoverPosition } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { IWorkbenchLayoutService, Position } from '../../../services/layout/browser/layoutService.js';\nimport { mcpServerIcon } from './mcpServerIcons.js';\nimport { IPagedRenderer } from '../../../../base/browser/ui/list/listPaging.js';\nimport { IMcpGalleryManifestService, McpGalleryManifestStatus } from '../../../../platform/mcp/common/mcpGalleryManifest.js';\nimport { ProductQualityContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { SeverityIcon } from '../../../../base/browser/ui/severityIcon/severityIcon.js';\nimport { IMarkdownRendererService } from '../../../../platform/markdown/browser/markdownRenderer.js';\n\nexport interface McpServerListViewOptions {\n\tshowWelcome?: boolean;\n}\n\ninterface IQueryResult {\n\tmodel: IPagedModel<IWorkbenchMcpServer>;\n\tdisposables: DisposableStore;\n\tshowWelcomeContent?: boolean;\n\treadonly onDidChangeModel?: Event<IPagedModel<IWorkbenchMcpServer>>;\n}\n\ntype Message = {\n\treadonly text: string;\n\treadonly severity: Severity;\n};\n\nexport class McpServersListView extends AbstractExtensionsListView<IWorkbenchMcpServer> {\n\n\tprivate list: WorkbenchPagedList<IWorkbenchMcpServer> | null = null;\n\tprivate listContainer: HTMLElement | null = null;\n\tprivate welcomeContainer: HTMLElement | null = null;\n\tprivate bodyTemplate: {\n\t\tmessageContainer: HTMLElement;\n\t\tmessageSeverityIcon: HTMLElement;\n\t\tmessageBox: HTMLElement;\n\t\tmcpServersList: HTMLElement;\n\t} | undefined;\n\tprivate readonly contextMenuActionRunner = this._register(new ActionRunner());\n\tprivate input: IQueryResult | undefined;\n\n\tconstructor(\n\t\tprivate readonly mpcViewOptions: McpServerListViewOptions,\n\t\toptions: IViewletViewOptions,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@IMcpGalleryManifestService protected readonly mcpGalleryManifestService: IMcpGalleryManifestService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IMarkdownRendererService protected readonly markdownRendererService: IMarkdownRendererService,\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\t// Create welcome container\n\t\tthis.welcomeContainer = dom.append(container, dom.$('.mcp-welcome-container.hide'));\n\t\tthis.createWelcomeContent(this.welcomeContainer);\n\n\t\tconst messageContainer = dom.append(container, dom.$('.message-container'));\n\t\tconst messageSeverityIcon = dom.append(messageContainer, dom.$(''));\n\t\tconst messageBox = dom.append(messageContainer, dom.$('.message'));\n\t\tconst mcpServersList = dom.$('.mcp-servers-list');\n\n\t\tthis.bodyTemplate = {\n\t\t\tmcpServersList,\n\t\t\tmessageBox,\n\t\t\tmessageContainer,\n\t\t\tmessageSeverityIcon\n\t\t};\n\n\t\tthis.listContainer = dom.append(container, mcpServersList);\n\t\tthis.list = this._register(this.instantiationService.createInstance(WorkbenchPagedList,\n\t\t\t`${this.id}-MCP-Servers`,\n\t\t\tthis.listContainer,\n\t\t\t{\n\t\t\t\tgetHeight() { return 72; },\n\t\t\t\tgetTemplateId: () => McpServerRenderer.templateId,\n\t\t\t},\n\t\t\t[this.instantiationService.createInstance(McpServerRenderer, {\n\t\t\t\thoverOptions: {\n\t\t\t\t\tposition: () => {\n\t\t\t\t\t\tconst viewLocation = this.viewDescriptorService.getViewLocationById(this.id);\n\t\t\t\t\t\tif (viewLocation === ViewContainerLocation.Sidebar) {\n\t\t\t\t\t\t\treturn this.layoutService.getSideBarPosition() === Position.LEFT ? HoverPosition.RIGHT : HoverPosition.LEFT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (viewLocation === ViewContainerLocation.AuxiliaryBar) {\n\t\t\t\t\t\t\treturn this.layoutService.getSideBarPosition() === Position.LEFT ? HoverPosition.LEFT : HoverPosition.RIGHT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn HoverPosition.RIGHT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})],\n\t\t\t{\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel(mcpServer: IWorkbenchMcpServer | null): string {\n\t\t\t\t\t\treturn mcpServer?.label ?? '';\n\t\t\t\t\t},\n\t\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\t\treturn localize('mcp servers', \"MCP Servers\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\toverrideStyles: getLocationBasedViewColors(this.viewDescriptorService.getViewLocationById(this.id)).listOverrideStyles,\n\t\t\t\topenOnSingleClick: true,\n\t\t\t}) as WorkbenchPagedList<IWorkbenchMcpServer>);\n\t\tthis._register(Event.debounce(Event.filter(this.list.onDidOpen, e => e.element !== null), (_, event) => event, 75, true)(options => {\n\t\t\tthis.mcpWorkbenchService.open(options.element!, options.editorOptions);\n\t\t}));\n\t\tthis._register(this.list.onContextMenu(e => this.onContextMenu(e), this));\n\n\t\tif (this.input) {\n\t\t\tthis.renderInput();\n\t\t}\n\t}\n\n\tprivate async onContextMenu(e: IListContextMenuEvent<IWorkbenchMcpServer>): Promise<void> {\n\t\tif (e.element) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst mcpServer = e.element ? this.mcpWorkbenchService.local.find(local => local.id === e.element!.id) || e.element\n\t\t\t\t: e.element;\n\t\t\tconst groups: IAction[][] = getContextMenuActions(mcpServer, false, this.instantiationService);\n\t\t\tconst actions: IAction[] = [];\n\t\t\tfor (const menuActions of groups) {\n\t\t\t\tfor (const menuAction of menuActions) {\n\t\t\t\t\tactions.push(menuAction);\n\t\t\t\t\tif (isDisposable(menuAction)) {\n\t\t\t\t\t\tdisposables.add(menuAction);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tactions.push(new Separator());\n\t\t\t}\n\t\t\tactions.pop();\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tactionRunner: this.contextMenuActionRunner,\n\t\t\t\tonHide: () => disposables.dispose()\n\t\t\t});\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.list?.layout(height, width);\n\t}\n\n\tasync show(query: string): Promise<IPagedModel<IWorkbenchMcpServer>> {\n\t\tif (this.input) {\n\t\t\tthis.input.disposables.dispose();\n\t\t\tthis.input = undefined;\n\t\t}\n\n\t\tif (this.mpcViewOptions.showWelcome) {\n\t\t\tthis.input = { model: new PagedModel([]), disposables: new DisposableStore(), showWelcomeContent: true };\n\t\t} else {\n\t\t\tthis.input = await this.query(query.trim());\n\t\t}\n\n\t\tthis.renderInput();\n\n\t\tif (this.input.onDidChangeModel) {\n\t\t\tthis.input.disposables.add(this.input.onDidChangeModel(model => {\n\t\t\t\tif (!this.input) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.input.model = model;\n\t\t\t\tthis.renderInput();\n\t\t\t}));\n\t\t}\n\n\t\treturn this.input.model;\n\t}\n\n\tprivate renderInput() {\n\t\tif (!this.input) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(this.input.model);\n\t\t}\n\t\tthis.showWelcomeContent(!!this.input.showWelcomeContent);\n\t\tif (!this.input.showWelcomeContent) {\n\t\t\tthis.updateBody();\n\t\t}\n\t}\n\n\tprivate showWelcomeContent(show: boolean): void {\n\t\tthis.welcomeContainer?.classList.toggle('hide', !show);\n\t\tthis.listContainer?.classList.toggle('hide', show);\n\t}\n\n\tprivate createWelcomeContent(welcomeContainer: HTMLElement): void {\n\t\tconst welcomeContent = dom.append(welcomeContainer, dom.$('.mcp-welcome-content'));\n\n\t\tconst iconContainer = dom.append(welcomeContent, dom.$('.mcp-welcome-icon'));\n\t\tconst iconElement = dom.append(iconContainer, dom.$('span'));\n\t\ticonElement.className = ThemeIcon.asClassName(mcpServerIcon);\n\n\t\tconst title = dom.append(welcomeContent, dom.$('.mcp-welcome-title'));\n\t\ttitle.textContent = localize('mcp.welcome.title', \"MCP Servers\");\n\n\t\tconst settingsCommandLink = createMarkdownCommandLink({ id: 'workbench.action.openSettings', arguments: [`@id:${mcpGalleryServiceEnablementConfig}`], title: mcpGalleryServiceEnablementConfig, tooltip: localize('mcp.welcome.settings.tooltip', \"Open Settings\") }).toString();\n\t\tconst description = dom.append(welcomeContent, dom.$('.mcp-welcome-description'));\n\t\tconst markdownResult = this._register(this.markdownRendererService.render(\n\t\t\tnew MarkdownString(\n\t\t\t\tlocalize('mcp.welcome.descriptionWithLink', \"Browse and install [Model Context Protocol (MCP) servers](https://code.visualstudio.com/docs/copilot/customization/mcp-servers) directly from VS Code to extend agent mode with extra tools for connecting to databases, invoking APIs and performing specialized tasks.\"),\n\t\t\t\t{ isTrusted: { enabledCommands: ['workbench.action.openSettings'] } },\n\t\t\t)\n\t\t\t\t.appendMarkdown('\\n\\n')\n\t\t\t\t.appendMarkdown(localize('mcp.gallery.enableDialog.setting', \"This feature is currently in preview. You can disable it anytime using the setting {0}.\", settingsCommandLink)),\n\t\t));\n\t\tdescription.appendChild(markdownResult.element);\n\n\t\tconst buttonContainer = dom.append(welcomeContent, dom.$('.mcp-welcome-button-container'));\n\t\tconst button = this._register(new Button(buttonContainer, {\n\t\t\ttitle: localize('mcp.welcome.enableGalleryButton', \"Enable MCP Servers Marketplace\"),\n\t\t\t...defaultButtonStyles\n\t\t}));\n\t\tbutton.label = localize('mcp.welcome.enableGalleryButton', \"Enable MCP Servers Marketplace\");\n\n\t\tthis._register(button.onDidClick(async () => {\n\n\t\t\tconst { result } = await this.dialogService.prompt({\n\t\t\t\ttype: 'info',\n\t\t\t\tmessage: localize('mcp.gallery.enableDialog.title', \"Enable MCP Servers Marketplace?\"),\n\t\t\t\tcustom: {\n\t\t\t\t\tmarkdownDetails: [{\n\t\t\t\t\t\tmarkdown: new MarkdownString(localize('mcp.gallery.enableDialog.setting', \"This feature is currently in preview. You can disable it anytime using the setting {0}.\", settingsCommandLink), { isTrusted: true })\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\t{ label: localize('mcp.gallery.enableDialog.enable', \"Enable\"), run: () => true },\n\t\t\t\t\t{ label: localize('mcp.gallery.enableDialog.cancel', \"Cancel\"), run: () => false }\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tif (result) {\n\t\t\t\tawait this.configurationService.updateValue(mcpGalleryServiceEnablementConfig, true);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate updateBody(message?: Message): void {\n\t\tif (this.bodyTemplate) {\n\n\t\t\tconst count = this.input?.model.length ?? 0;\n\t\t\tthis.bodyTemplate.mcpServersList.classList.toggle('hidden', count === 0);\n\t\t\tthis.bodyTemplate.messageContainer.classList.toggle('hidden', !message && count > 0);\n\n\t\t\tif (this.isBodyVisible()) {\n\t\t\t\tif (message) {\n\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = SeverityIcon.className(message.severity);\n\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = message.text;\n\t\t\t\t} else if (count === 0) {\n\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = '';\n\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize('no extensions found', \"No MCP Servers found.\");\n\t\t\t\t}\n\t\t\t\tif (this.bodyTemplate.messageBox.textContent) {\n\t\t\t\t\talert(this.bodyTemplate.messageBox.textContent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async query(query: string): Promise<IQueryResult> {\n\t\tconst disposables = new DisposableStore();\n\t\tif (query) {\n\t\t\tconst servers = await this.mcpWorkbenchService.queryGallery({ text: query.replace('@mcp', '') });\n\t\t\tconst model = disposables.add(new IterativePagedModel(servers));\n\t\t\treturn { model, disposables };\n\t\t}\n\n\t\tconst onDidChangeModel = disposables.add(new Emitter<IPagedModel<IWorkbenchMcpServer>>());\n\t\tlet servers = await this.mcpWorkbenchService.queryLocal();\n\t\tdisposables.add(Event.debounce(this.mcpWorkbenchService.onChange, () => undefined)(() => {\n\t\t\tconst mergedMcpServers = this.mergeChangedMcpServers(servers, [...this.mcpWorkbenchService.local]);\n\t\t\tif (mergedMcpServers) {\n\t\t\t\tservers = mergedMcpServers;\n\t\t\t\tonDidChangeModel.fire(new PagedModel(servers));\n\t\t\t}\n\t\t}));\n\t\tdisposables.add(this.mcpWorkbenchService.onReset(() => onDidChangeModel.fire(new PagedModel([...this.mcpWorkbenchService.local]))));\n\t\treturn { model: new PagedModel(servers), onDidChangeModel: onDidChangeModel.event, disposables };\n\t}\n\n\tprivate mergeChangedMcpServers(mcpServers: IWorkbenchMcpServer[], newMcpServers: IWorkbenchMcpServer[]): IWorkbenchMcpServer[] | undefined {\n\t\tconst oldMcpServers = [...mcpServers];\n\t\tconst findPreviousMcpServerIndex = (from: number): number => {\n\t\t\tlet index = -1;\n\t\t\tconst previousMcpServerInNew = newMcpServers[from];\n\t\t\tif (previousMcpServerInNew) {\n\t\t\t\tindex = oldMcpServers.findIndex(e => e.id === previousMcpServerInNew.id);\n\t\t\t\tif (index === -1) {\n\t\t\t\t\treturn findPreviousMcpServerIndex(from - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn index;\n\t\t};\n\n\t\tlet hasChanged: boolean = false;\n\t\tfor (let index = 0; index < newMcpServers.length; index++) {\n\t\t\tconst newMcpServer = newMcpServers[index];\n\t\t\tif (mcpServers.every(r => r.id !== newMcpServer.id)) {\n\t\t\t\thasChanged = true;\n\t\t\t\tmcpServers.splice(findPreviousMcpServerIndex(index - 1) + 1, 0, newMcpServer);\n\t\t\t}\n\t\t}\n\n\t\tfor (let index = mcpServers.length - 1; index >= 0; index--) {\n\t\t\tconst oldMcpServer = mcpServers[index];\n\t\t\tif (newMcpServers.every(r => r.id !== oldMcpServer.id) && newMcpServers.some(r => r.name === oldMcpServer.name)) {\n\t\t\t\thasChanged = true;\n\t\t\t\tmcpServers.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (!hasChanged) {\n\t\t\tif (mcpServers.length === newMcpServers.length) {\n\t\t\t\tfor (let index = 0; index < newMcpServers.length; index++) {\n\t\t\t\t\tif (mcpServers[index]?.id !== newMcpServers[index]?.id) {\n\t\t\t\t\t\thasChanged = true;\n\t\t\t\t\t\tmcpServers = newMcpServers;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn hasChanged ? mcpServers : undefined;\n\t}\n}\n\ninterface IMcpServerTemplateData {\n\troot: HTMLElement;\n\telement: HTMLElement;\n\tname: HTMLElement;\n\tdescription: HTMLElement;\n\tstarred: HTMLElement;\n\tmcpServer: IWorkbenchMcpServer | null;\n\tdisposables: IDisposable[];\n\tmcpServerDisposables: IDisposable[];\n\tactionbar: ActionBar;\n}\n\nclass McpServerRenderer implements IPagedRenderer<IWorkbenchMcpServer, IMcpServerTemplateData> {\n\n\tstatic readonly templateId = 'mcpServer';\n\treadonly templateId = McpServerRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly options: ExtensionListRendererOptions,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t) { }\n\n\trenderTemplate(root: HTMLElement): IMcpServerTemplateData {\n\t\tconst element = dom.append(root, dom.$('.mcp-server-item.extension-list-item'));\n\t\tconst iconContainer = dom.append(element, dom.$('.icon-container'));\n\t\tconst iconWidget = this.instantiationService.createInstance(McpServerIconWidget, iconContainer);\n\t\tconst details = dom.append(element, dom.$('.details'));\n\t\tconst headerContainer = dom.append(details, dom.$('.header-container'));\n\t\tconst header = dom.append(headerContainer, dom.$('.header'));\n\t\tconst name = dom.append(header, dom.$('span.name'));\n\t\tconst starred = dom.append(header, dom.$('span.ratings'));\n\t\tconst description = dom.append(details, dom.$('.description.ellipsis'));\n\t\tconst footer = dom.append(details, dom.$('.footer'));\n\t\tconst publisherWidget = this.instantiationService.createInstance(PublisherWidget, dom.append(footer, dom.$('.publisher-container')), true);\n\t\tconst actionbar = new ActionBar(footer, {\n\t\t\tactionViewItemProvider: (action: IAction, options: IActionViewItemOptions) => {\n\t\t\t\tif (action instanceof DropDownAction) {\n\t\t\t\t\treturn action.createActionViewItem(options);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tfocusOnlyEnabledItems: true\n\t\t});\n\n\t\tactionbar.setFocusable(false);\n\t\tconst actionBarListener = actionbar.onDidRun(({ error }) => error && this.notificationService.error(error));\n\t\tconst mcpServerStatusAction = this.instantiationService.createInstance(McpServerStatusAction);\n\n\t\tconst actions = [\n\t\t\tthis.instantiationService.createInstance(InstallAction, true),\n\t\t\tthis.instantiationService.createInstance(InstallingLabelAction),\n\t\t\tthis.instantiationService.createInstance(ManageMcpServerAction, false),\n\t\t\tmcpServerStatusAction\n\t\t];\n\n\t\tconst widgets = [\n\t\t\ticonWidget,\n\t\t\tpublisherWidget,\n\t\t\tthis.instantiationService.createInstance(StarredWidget, starred, true),\n\t\t\tthis.instantiationService.createInstance(McpServerScopeBadgeWidget, iconContainer),\n\t\t\tthis.instantiationService.createInstance(McpServerHoverWidget, { target: root, position: this.options.hoverOptions.position }, mcpServerStatusAction)\n\t\t];\n\t\tconst extensionContainers: McpServerContainers = this.instantiationService.createInstance(McpServerContainers, [...actions, ...widgets]);\n\n\t\tactionbar.push(actions, { icon: true, label: true });\n\t\tconst disposable = combinedDisposable(...actions, ...widgets, actionbar, actionBarListener, extensionContainers);\n\n\t\treturn {\n\t\t\troot, element, name, description, starred, disposables: [disposable], actionbar,\n\t\t\tmcpServerDisposables: [],\n\t\t\tset mcpServer(mcpServer: IWorkbenchMcpServer) {\n\t\t\t\textensionContainers.mcpServer = mcpServer;\n\t\t\t}\n\t\t};\n\t}\n\n\trenderPlaceholder(index: number, data: IMcpServerTemplateData): void {\n\t\tdata.element.classList.add('loading');\n\n\t\tdata.mcpServerDisposables = dispose(data.mcpServerDisposables);\n\t\tdata.name.textContent = '';\n\t\tdata.description.textContent = '';\n\t\tdata.starred.style.display = 'none';\n\t\tdata.mcpServer = null;\n\t}\n\n\trenderElement(mcpServer: IWorkbenchMcpServer, index: number, data: IMcpServerTemplateData): void {\n\t\tdata.element.classList.remove('loading');\n\t\tdata.mcpServerDisposables = dispose(data.mcpServerDisposables);\n\t\tdata.root.setAttribute('data-mcp-server-id', mcpServer.id);\n\t\tdata.name.textContent = mcpServer.label;\n\t\tdata.description.textContent = mcpServer.description;\n\n\t\tdata.starred.style.display = '';\n\t\tdata.mcpServer = mcpServer;\n\n\t\tconst updateEnablement = () => data.root.classList.toggle('disabled', !!mcpServer.runtimeStatus?.state && mcpServer.runtimeStatus.state !== McpServerEnablementState.Enabled);\n\t\tupdateEnablement();\n\t\tdata.mcpServerDisposables.push(this.mcpWorkbenchService.onChange(e => {\n\t\t\tif (!e || e.id === mcpServer.id) {\n\t\t\t\tupdateEnablement();\n\t\t\t}\n\t\t}));\n\t}\n\n\tdisposeElement(mcpServer: IWorkbenchMcpServer, index: number, data: IMcpServerTemplateData): void {\n\t\tdata.mcpServerDisposables = dispose(data.mcpServerDisposables);\n\t}\n\n\tdisposeTemplate(data: IMcpServerTemplateData): void {\n\t\tdata.mcpServerDisposables = dispose(data.mcpServerDisposables);\n\t\tdata.disposables = dispose(data.disposables);\n\t}\n}\n\n\nexport class DefaultBrowseMcpServersView extends McpServersListView {\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\t\tthis._register(this.mcpGalleryManifestService.onDidChangeMcpGalleryManifest(() => this.show()));\n\t}\n\n\toverride async show(): Promise<IPagedModel<IWorkbenchMcpServer>> {\n\t\treturn super.show('@mcp');\n\t}\n}\n\nexport class McpServersViewsContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic ID = 'workbench.mcp.servers.views.contribution';\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tRegistry.as<IViewsRegistry>(ViewExtensions.ViewsRegistry).registerViews([\n\t\t\t{\n\t\t\t\tid: InstalledMcpServersViewId,\n\t\t\t\tname: localize2('mcp-installed', \"MCP Servers - Installed\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(McpServersListView, [{}]),\n\t\t\t\twhen: ContextKeyExpr.and(DefaultViewsContext, HasInstalledMcpServersContext, ChatContextKeys.Setup.hidden.negate()),\n\t\t\t\tweight: 40,\n\t\t\t\torder: 4,\n\t\t\t\tcanToggleVisibility: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'workbench.views.mcp.default.marketplace',\n\t\t\t\tname: localize2('mcp', \"MCP Servers\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(DefaultBrowseMcpServersView, [{}]),\n\t\t\t\twhen: ContextKeyExpr.and(DefaultViewsContext, HasInstalledMcpServersContext.toNegated(), ChatContextKeys.Setup.hidden.negate(), McpServersGalleryStatusContext.isEqualTo(McpGalleryManifestStatus.Available), ContextKeyExpr.or(ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceUrlConfig}`), ProductQualityContext.notEqualsTo('stable'), ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceEnablementConfig}`))),\n\t\t\t\tweight: 40,\n\t\t\t\torder: 4,\n\t\t\t\tcanToggleVisibility: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'workbench.views.mcp.marketplace',\n\t\t\t\tname: localize2('mcp', \"MCP Servers\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(McpServersListView, [{}]),\n\t\t\t\twhen: ContextKeyExpr.and(SearchMcpServersContext, ChatContextKeys.Setup.hidden.negate(), McpServersGalleryStatusContext.isEqualTo(McpGalleryManifestStatus.Available), ContextKeyExpr.or(ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceUrlConfig}`), ProductQualityContext.notEqualsTo('stable'), ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceEnablementConfig}`))),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'workbench.views.mcp.default.welcomeView',\n\t\t\t\tname: localize2('mcp', \"MCP Servers\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(DefaultBrowseMcpServersView, [{ showWelcome: true }]),\n\t\t\t\twhen: ContextKeyExpr.and(DefaultViewsContext, HasInstalledMcpServersContext.toNegated(), ChatContextKeys.Setup.hidden.negate(), McpServersGalleryStatusContext.isEqualTo(McpGalleryManifestStatus.Available), ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceUrlConfig}`).negate(), ProductQualityContext.isEqualTo('stable'), ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceEnablementConfig}`).negate()),\n\t\t\t\tweight: 40,\n\t\t\t\torder: 4,\n\t\t\t\tcanToggleVisibility: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'workbench.views.mcp.welcomeView',\n\t\t\t\tname: localize2('mcp', \"MCP Servers\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(McpServersListView, [{ showWelcome: true }]),\n\t\t\t\twhen: ContextKeyExpr.and(SearchMcpServersContext, ChatContextKeys.Setup.hidden.negate(), McpServersGalleryStatusContext.isEqualTo(McpGalleryManifestStatus.Available), ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceUrlConfig}`).negate(), ProductQualityContext.isEqualTo('stable'), ContextKeyDefinedExpr.create(`config.${mcpGalleryServiceEnablementConfig}`).negate()),\n\t\t\t}\n\t\t], VIEW_CONTAINER);\n\t}\n}\n"]}