{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/mcp/browser/mcpDiscovery.ts","vs/workbench/contrib/mcp/browser/mcpDiscovery.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,sCAAsC,CAAC;AACnF,OAAO,EAAE,OAAO,EAAE,MAAM,uCAAuC,CAAC;AAChE,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,eAAe,EAAkB,MAAM,kDAAkD,CAAC;AACnG,OAAO,EAAE,qBAAqB,EAAE,MAAM,mEAAmE,CAAC;AAE1G,OAAO,EAAE,oBAAoB,EAAE,MAAM,qCAAqC,CAAC;AAEpE,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,UAAU;aACpB,OAAE,GAAG,iCAAH,AAAoC,CAAC;IAE9D,YACwB,oBAA2C,EAC3C,oBAA2C;QAElE,KAAK,EAAE,CAAC;QAER,MAAM,cAAc,GAAG,qBAAqB,CAAC,eAAe,kCAAsB,oBAAoB,CAAC,CAAC;QACxG,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,eAAe,EAAE,CAAC,CAAC;QAEpD,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC/B,KAAK,CAAC,KAAK,EAAE,CAAC;YACd,MAAM,KAAK,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC1C,IAAI,KAAK,qCAAwB,EAAE,CAAC;gBACnC,OAAO;YACR,CAAC;YACD,KAAK,MAAM,UAAU,IAAI,oBAAoB,CAAC,MAAM,EAAE,EAAE,CAAC;gBACxD,MAAM,YAAY,GAAG,oBAAoB,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;gBACrE,IAAI,KAAK,6CAA4B,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;oBACpE,YAAY,CAAC,OAAO,EAAE,CAAC;oBACvB,SAAS;gBACV,CAAC;gBACD,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;gBACxB,YAAY,CAAC,KAAK,EAAE,CAAC;YACtB,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;;AA5BW,YAAY;IAItB,WAAA,qBAAqB,CAAA;IACrB,WAAA,qBAAqB,CAAA;GALX,YAAY,CA6BxB","file":"mcpDiscovery.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun } from '../../../../base/common/observable.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { mcpAccessConfig, McpAccessValue } from '../../../../platform/mcp/common/mcpManagement.js';\nimport { observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { mcpDiscoveryRegistry } from '../common/discovery/mcpDiscovery.js';\n\nexport class McpDiscovery extends Disposable implements IWorkbenchContribution {\n\tpublic static readonly ID = 'workbench.contrib.mcp.discovery';\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tconst mcpAccessValue = observableConfigValue(mcpAccessConfig, McpAccessValue.All, configurationService);\n\t\tconst store = this._register(new DisposableStore());\n\n\t\tthis._register(autorun(reader => {\n\t\t\tstore.clear();\n\t\t\tconst value = mcpAccessValue.read(reader);\n\t\t\tif (value === McpAccessValue.None) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (const descriptor of mcpDiscoveryRegistry.getAll()) {\n\t\t\t\tconst mcpDiscovery = instantiationService.createInstance(descriptor);\n\t\t\t\tif (value === McpAccessValue.Registry && !mcpDiscovery.fromGallery) {\n\t\t\t\t\tmcpDiscovery.dispose();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstore.add(mcpDiscovery);\n\t\t\t\tmcpDiscovery.start();\n\t\t\t}\n\t\t}));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun } from '../../../../base/common/observable.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { mcpAccessConfig, McpAccessValue } from '../../../../platform/mcp/common/mcpManagement.js';\nimport { observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { mcpDiscoveryRegistry } from '../common/discovery/mcpDiscovery.js';\n\nexport class McpDiscovery extends Disposable implements IWorkbenchContribution {\n\tpublic static readonly ID = 'workbench.contrib.mcp.discovery';\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tconst mcpAccessValue = observableConfigValue(mcpAccessConfig, McpAccessValue.All, configurationService);\n\t\tconst store = this._register(new DisposableStore());\n\n\t\tthis._register(autorun(reader => {\n\t\t\tstore.clear();\n\t\t\tconst value = mcpAccessValue.read(reader);\n\t\t\tif (value === McpAccessValue.None) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfor (const descriptor of mcpDiscoveryRegistry.getAll()) {\n\t\t\t\tconst mcpDiscovery = instantiationService.createInstance(descriptor);\n\t\t\t\tif (value === McpAccessValue.Registry && !mcpDiscovery.fromGallery) {\n\t\t\t\t\tmcpDiscovery.dispose();\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstore.add(mcpDiscovery);\n\t\t\t\tmcpDiscovery.start();\n\t\t\t}\n\t\t}));\n\t}\n}\n"]}