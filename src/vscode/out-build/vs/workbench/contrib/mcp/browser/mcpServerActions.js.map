{"version":3,"sources":["vs/workbench/contrib/mcp/browser/mcpServerActions.ts"],"names":[],"mappings":"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","file":"mcpServerActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { ActionViewItem, IActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Action, IAction, IActionChangeEvent, Separator } from '../../../../base/common/actions.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { disposeIfDisposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { localize } from '../../../../nls.js';\nimport { Location } from '../../../../editor/common/languages.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IAuthenticationService } from '../../../services/authentication/common/authentication.js';\nimport { IAccountQuery, IAuthenticationQueryService } from '../../../services/authentication/common/authenticationQuery.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { errorIcon, infoIcon, manageExtensionIcon, trustIcon, warningIcon } from '../../extensions/browser/extensionsIcons.js';\nimport { McpCommandIds } from '../common/mcpCommandIds.js';\nimport { IMcpRegistry } from '../common/mcpRegistryTypes.js';\nimport { IMcpSamplingService, IMcpServer, IMcpServerContainer, IMcpService, IMcpWorkbenchService, IWorkbenchMcpServer, McpCapability, McpConnectionState, McpServerEditorTab, McpServerInstallState } from '../common/mcpTypes.js';\nimport { startServerByFilter } from '../common/mcpTypesUtils.js';\nimport { ConfigurationTarget } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, IWorkspaceFolder, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { IQuickInputService, QuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { LocalMcpServerScope } from '../../../services/mcp/common/mcpWorkbenchManagementService.js';\nimport { ExtensionAction } from '../../extensions/browser/extensionsActions.js';\nimport { ActionWithDropdownActionViewItem, IActionWithDropdownActionViewItemOptions } from '../../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { IContextMenuProvider } from '../../../../base/browser/contextmenu.js';\nimport Severity from '../../../../base/common/severity.js';\n\nexport interface IMcpServerActionChangeEvent extends IActionChangeEvent {\n\treadonly hidden?: boolean;\n\treadonly menuActions?: IAction[];\n}\n\nexport abstract class McpServerAction extends Action implements IMcpServerContainer {\n\n\tprotected override _onDidChange = this._register(new Emitter<IMcpServerActionChangeEvent>());\n\toverride get onDidChange() { return this._onDidChange.event; }\n\n\tstatic readonly EXTENSION_ACTION_CLASS = 'extension-action';\n\tstatic readonly TEXT_ACTION_CLASS = `${McpServerAction.EXTENSION_ACTION_CLASS} text`;\n\tstatic readonly LABEL_ACTION_CLASS = `${McpServerAction.EXTENSION_ACTION_CLASS} label`;\n\tstatic readonly PROMINENT_LABEL_ACTION_CLASS = `${McpServerAction.LABEL_ACTION_CLASS} prominent`;\n\tstatic readonly ICON_ACTION_CLASS = `${McpServerAction.EXTENSION_ACTION_CLASS} icon`;\n\n\tprivate _hidden: boolean = false;\n\tget hidden(): boolean { return this._hidden; }\n\tset hidden(hidden: boolean) {\n\t\tif (this._hidden !== hidden) {\n\t\t\tthis._hidden = hidden;\n\t\t\tthis._onDidChange.fire({ hidden });\n\t\t}\n\t}\n\n\tprotected override _setEnabled(value: boolean): void {\n\t\tsuper._setEnabled(value);\n\t\tif (this.hideOnDisabled) {\n\t\t\tthis.hidden = !value;\n\t\t}\n\t}\n\n\tprotected hideOnDisabled: boolean = true;\n\n\tprivate _mcpServer: IWorkbenchMcpServer | null = null;\n\tget mcpServer(): IWorkbenchMcpServer | null { return this._mcpServer; }\n\tset mcpServer(mcpServer: IWorkbenchMcpServer | null) { this._mcpServer = mcpServer; this.update(); }\n\n\tabstract update(): void;\n}\n\nexport class ButtonWithDropDownExtensionAction extends McpServerAction {\n\n\tprivate primaryAction: IAction | undefined;\n\n\treadonly menuActionClassNames: string[] = [];\n\tprivate _menuActions: IAction[] = [];\n\tget menuActions(): IAction[] { return [...this._menuActions]; }\n\n\toverride get mcpServer(): IWorkbenchMcpServer | null {\n\t\treturn super.mcpServer;\n\t}\n\n\toverride set mcpServer(mcpServer: IWorkbenchMcpServer | null) {\n\t\tthis.actions.forEach(a => a.mcpServer = mcpServer);\n\t\tsuper.mcpServer = mcpServer;\n\t}\n\n\tprotected readonly actions: McpServerAction[];\n\n\tconstructor(\n\t\tid: string,\n\t\tclazz: string,\n\t\tprivate readonly actionsGroups: McpServerAction[][],\n\t) {\n\t\tclazz = `${clazz} action-dropdown`;\n\t\tsuper(id, undefined, clazz);\n\t\tthis.menuActionClassNames = clazz.split(' ');\n\t\tthis.hideOnDisabled = false;\n\t\tthis.actions = actionsGroups.flat();\n\t\tthis.update();\n\t\tthis._register(Event.any(...this.actions.map(a => a.onDidChange))(() => this.update(true)));\n\t\tthis.actions.forEach(a => this._register(a));\n\t}\n\n\tupdate(donotUpdateActions?: boolean): void {\n\t\tif (!donotUpdateActions) {\n\t\t\tthis.actions.forEach(a => a.update());\n\t\t}\n\n\t\tconst actionsGroups = this.actionsGroups.map(actionsGroup => actionsGroup.filter(a => !a.hidden));\n\n\t\tlet actions: IAction[] = [];\n\t\tfor (const visibleActions of actionsGroups) {\n\t\t\tif (visibleActions.length) {\n\t\t\t\tactions = [...actions, ...visibleActions, new Separator()];\n\t\t\t}\n\t\t}\n\t\tactions = actions.length ? actions.slice(0, actions.length - 1) : actions;\n\n\t\tthis.primaryAction = actions[0];\n\t\tthis._menuActions = actions.length > 1 ? actions : [];\n\t\tthis._onDidChange.fire({ menuActions: this._menuActions });\n\n\t\tif (this.primaryAction) {\n\t\t\tthis.enabled = this.primaryAction.enabled;\n\t\t\tthis.label = this.getLabel(this.primaryAction as ExtensionAction);\n\t\t\tthis.tooltip = this.primaryAction.tooltip;\n\t\t} else {\n\t\t\tthis.enabled = false;\n\t\t}\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (this.enabled) {\n\t\t\tawait this.primaryAction?.run();\n\t\t}\n\t}\n\n\tprotected getLabel(action: ExtensionAction): string {\n\t\treturn action.label;\n\t}\n}\n\nexport class ButtonWithDropdownExtensionActionViewItem extends ActionWithDropdownActionViewItem {\n\n\tconstructor(\n\t\taction: ButtonWithDropDownExtensionAction,\n\t\toptions: IActionViewItemOptions & IActionWithDropdownActionViewItemOptions,\n\t\tcontextMenuProvider: IContextMenuProvider\n\t) {\n\t\tsuper(null, action, options, contextMenuProvider);\n\t\tthis._register(action.onDidChange(e => {\n\t\t\tif (e.hidden !== undefined || e.menuActions !== undefined) {\n\t\t\t\tthis.updateClass();\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t\tthis.updateClass();\n\t}\n\n\tprotected override updateClass(): void {\n\t\tsuper.updateClass();\n\t\tif (this.element && this.dropdownMenuActionViewItem?.element) {\n\t\t\tthis.element.classList.toggle('hide', (<ButtonWithDropDownExtensionAction>this._action).hidden);\n\t\t\tconst isMenuEmpty = (<ButtonWithDropDownExtensionAction>this._action).menuActions.length === 0;\n\t\t\tthis.element.classList.toggle('empty', isMenuEmpty);\n\t\t\tthis.dropdownMenuActionViewItem.element.classList.toggle('hide', isMenuEmpty);\n\t\t}\n\t}\n\n}\n\nexport abstract class DropDownAction extends McpServerAction {\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\tcssClass: string,\n\t\tenabled: boolean,\n\t\t@IInstantiationService protected instantiationService: IInstantiationService\n\t) {\n\t\tsuper(id, label, cssClass, enabled);\n\t}\n\n\tprivate _actionViewItem: DropDownExtensionActionViewItem | null = null;\n\tcreateActionViewItem(options: IActionViewItemOptions): DropDownExtensionActionViewItem {\n\t\tthis._actionViewItem = this.instantiationService.createInstance(DropDownExtensionActionViewItem, this, options);\n\t\treturn this._actionViewItem;\n\t}\n\n\tpublic override run(actionGroups: IAction[][]): Promise<void> {\n\t\tthis._actionViewItem?.showMenu(actionGroups);\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class DropDownExtensionActionViewItem extends ActionViewItem {\n\n\tconstructor(\n\t\taction: IAction,\n\t\toptions: IActionViewItemOptions,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService\n\t) {\n\t\tsuper(null, action, { ...options, icon: true, label: true });\n\t}\n\n\tpublic showMenu(menuActionGroups: IAction[][]): void {\n\t\tif (this.element) {\n\t\t\tconst actions = this.getActions(menuActionGroups);\n\t\t\tconst elementPosition = getDomNodePagePosition(this.element);\n\t\t\tconst anchor = { x: elementPosition.left, y: elementPosition.top + elementPosition.height + 10 };\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\tonHide: () => disposeIfDisposable(actions)\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate getActions(menuActionGroups: IAction[][]): IAction[] {\n\t\tlet actions: IAction[] = [];\n\t\tfor (const menuActions of menuActionGroups) {\n\t\t\tactions = [...actions, ...menuActions, new Separator()];\n\t\t}\n\t\treturn actions.length ? actions.slice(0, actions.length - 1) : actions;\n\t}\n}\n\nexport class InstallAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent install`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\tprivate readonly open: boolean,\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.install', localize('install', \"Install\"), InstallAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = InstallAction.HIDE;\n\t\tif (!this.mcpServer?.gallery && !this.mcpServer?.installable) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.mcpServer.installState !== McpServerInstallState.Uninstalled) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = InstallAction.CLASS;\n\t\tthis.enabled = this.mcpWorkbenchService.canInstall(this.mcpServer) === true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.open) {\n\t\t\tthis.mcpWorkbenchService.open(this.mcpServer);\n\t\t\talert(localize('mcpServerInstallation', \"Installing MCP Server {0} started. An editor is now open with more details on this MCP Server\", this.mcpServer.label));\n\t\t}\n\n\t\ttype McpServerInstallClassification = {\n\t\t\towner: 'sandy081';\n\t\t\tcomment: 'Used to understand if the action to install the MCP server is used.';\n\t\t\tname?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The gallery name of the MCP server being installed' };\n\t\t};\n\t\ttype McpServerInstall = {\n\t\t\tname?: string;\n\t\t};\n\t\tthis.telemetryService.publicLog2<McpServerInstall, McpServerInstallClassification>('mcp:action:install', { name: this.mcpServer.gallery?.name });\n\n\t\tconst installed = await this.mcpWorkbenchService.install(this.mcpServer);\n\n\t\tawait startServerByFilter(this.mcpService, s => {\n\t\t\treturn s.definition.label === installed.name;\n\t\t});\n\t}\n}\n\nexport class InstallInWorkspaceAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent install`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\tprivate readonly open: boolean,\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@IWorkspaceContextService private readonly workspaceService: IWorkspaceContextService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.installWorkspace', localize('installInWorkspace', \"Install in Workspace\"), InstallAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = InstallInWorkspaceAction.HIDE;\n\t\tif (this.workspaceService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer?.gallery && !this.mcpServer?.installable) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.mcpServer.installState !== McpServerInstallState.Uninstalled && this.mcpServer.local?.scope === LocalMcpServerScope.Workspace) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = InstallAction.CLASS;\n\t\tthis.enabled = this.mcpWorkbenchService.canInstall(this.mcpServer) === true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.open) {\n\t\t\tthis.mcpWorkbenchService.open(this.mcpServer, { preserveFocus: true });\n\t\t\talert(localize('mcpServerInstallation', \"Installing MCP Server {0} started. An editor is now open with more details on this MCP Server\", this.mcpServer.label));\n\t\t}\n\n\t\tconst target = await this.getConfigurationTarget();\n\t\tif (!target) {\n\t\t\treturn;\n\t\t}\n\n\t\ttype McpServerInstallClassification = {\n\t\t\towner: 'sandy081';\n\t\t\tcomment: 'Used to understand if the action to install the MCP server is used.';\n\t\t\tname?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The gallery name of the MCP server being installed' };\n\t\t};\n\t\ttype McpServerInstall = {\n\t\t\tname?: string;\n\t\t};\n\t\tthis.telemetryService.publicLog2<McpServerInstall, McpServerInstallClassification>('mcp:action:install:workspace', { name: this.mcpServer.gallery?.name });\n\n\t\tconst installed = await this.mcpWorkbenchService.install(this.mcpServer, { target });\n\t\tawait startServerByFilter(this.mcpService, s => {\n\t\t\treturn s.definition.label === installed.name;\n\t\t});\n\t}\n\n\tprivate async getConfigurationTarget(): Promise<ConfigurationTarget | IWorkspaceFolder | undefined> {\n\t\ttype OptionQuickPickItem = QuickPickItem & { target?: ConfigurationTarget | IWorkspaceFolder };\n\t\tconst options: OptionQuickPickItem[] = [];\n\n\t\tfor (const folder of this.workspaceService.getWorkspace().folders) {\n\t\t\toptions.push({ target: folder, label: folder.name, description: localize('install in workspace folder', \"Workspace Folder\") });\n\t\t}\n\n\t\tif (this.workspaceService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\t\t\tif (options.length > 0) {\n\t\t\t\toptions.push({ type: 'separator' });\n\t\t\t}\n\t\t\toptions.push({ target: ConfigurationTarget.WORKSPACE, label: localize('mcp.target.workspace', \"Workspace\") });\n\t\t}\n\n\t\tif (options.length === 1) {\n\t\t\treturn options[0].target;\n\t\t}\n\n\t\tconst targetPick = await this.quickInputService.pick(options, {\n\t\t\ttitle: localize('mcp.target.title', \"Choose where to install the MCP server\"),\n\t\t});\n\n\t\treturn (targetPick as OptionQuickPickItem)?.target;\n\t}\n}\n\nexport class InstallInRemoteAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent install`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\tprivate readonly open: boolean,\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.installRemote', localize('installInRemote', \"Install (Remote)\"), InstallAction.CLASS, false);\n\t\tconst remoteLabel = this.labelService.getHostLabel(Schemas.vscodeRemote, this.environmentService.remoteAuthority);\n\t\tthis.label = localize('installInRemoteLabel', \"Install in {0}\", remoteLabel);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = InstallInRemoteAction.HIDE;\n\t\tif (!this.environmentService.remoteAuthority) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer?.gallery && !this.mcpServer?.installable) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.mcpServer.installState !== McpServerInstallState.Uninstalled) {\n\t\t\tif (this.mcpServer.local?.scope === LocalMcpServerScope.RemoteUser) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.mcpWorkbenchService.local.find(mcpServer => mcpServer.name === this.mcpServer?.name && mcpServer.local?.scope === LocalMcpServerScope.RemoteUser)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.class = InstallAction.CLASS;\n\t\tthis.enabled = this.mcpWorkbenchService.canInstall(this.mcpServer) === true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.open) {\n\t\t\tthis.mcpWorkbenchService.open(this.mcpServer);\n\t\t\talert(localize('mcpServerInstallation', \"Installing MCP Server {0} started. An editor is now open with more details on this MCP Server\", this.mcpServer.label));\n\t\t}\n\n\t\ttype McpServerInstallClassification = {\n\t\t\towner: 'sandy081';\n\t\t\tcomment: 'Used to understand if the action to install the MCP server is used.';\n\t\t\tname?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The gallery name of the MCP server being installed' };\n\t\t};\n\t\ttype McpServerInstall = {\n\t\t\tname?: string;\n\t\t};\n\t\tthis.telemetryService.publicLog2<McpServerInstall, McpServerInstallClassification>('mcp:action:install:remote', { name: this.mcpServer.gallery?.name });\n\n\t\tconst installed = await this.mcpWorkbenchService.install(this.mcpServer, { target: ConfigurationTarget.USER_REMOTE });\n\t\tawait startServerByFilter(this.mcpService, s => {\n\t\t\treturn s.definition.label === installed.name;\n\t\t});\n\t}\n\n}\n\nexport class InstallingLabelAction extends McpServerAction {\n\n\tprivate static readonly LABEL = localize('installing', \"Installing\");\n\tprivate static readonly CLASS = `${McpServerAction.LABEL_ACTION_CLASS} install installing`;\n\n\tconstructor() {\n\t\tsuper('extension.installing', InstallingLabelAction.LABEL, InstallingLabelAction.CLASS, false);\n\t}\n\n\tupdate(): void {\n\t\tthis.class = `${InstallingLabelAction.CLASS}${this.mcpServer && this.mcpServer.installState === McpServerInstallState.Installing ? '' : ' hide'}`;\n\t}\n}\n\nexport class UninstallAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent uninstall`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t) {\n\t\tsuper('extensions.uninstall', localize('uninstall', \"Uninstall\"), UninstallAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = UninstallAction.HIDE;\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.mcpServer.installState !== McpServerInstallState.Installed) {\n\t\t\tthis.enabled = false;\n\t\t\treturn;\n\t\t}\n\t\tthis.class = UninstallAction.CLASS;\n\t\tthis.enabled = true;\n\t\tthis.label = localize('uninstall', \"Uninstall\");\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tawait this.mcpWorkbenchService.uninstall(this.mcpServer);\n\t}\n}\n\nexport function getContextMenuActions(mcpServer: IWorkbenchMcpServer, isEditorAction: boolean, instantiationService: IInstantiationService): IAction[][] {\n\treturn instantiationService.invokeFunction(accessor => {\n\t\tconst workspaceService = accessor.get(IWorkspaceContextService);\n\t\tconst environmentService = accessor.get(IWorkbenchEnvironmentService);\n\n\t\tconst groups: McpServerAction[][] = [];\n\t\tconst isInstalled = mcpServer.installState === McpServerInstallState.Installed;\n\n\t\tif (isInstalled) {\n\t\t\tgroups.push([\n\t\t\t\tinstantiationService.createInstance(StartServerAction),\n\t\t\t]);\n\t\t\tgroups.push([\n\t\t\t\tinstantiationService.createInstance(StopServerAction),\n\t\t\t\tinstantiationService.createInstance(RestartServerAction),\n\t\t\t]);\n\t\t\tgroups.push([\n\t\t\t\tinstantiationService.createInstance(AuthServerAction),\n\t\t\t]);\n\t\t\tgroups.push([\n\t\t\t\tinstantiationService.createInstance(ShowServerOutputAction),\n\t\t\t\tinstantiationService.createInstance(ShowServerConfigurationAction),\n\t\t\t\tinstantiationService.createInstance(ShowServerJsonConfigurationAction),\n\t\t\t]);\n\t\t\tgroups.push([\n\t\t\t\tinstantiationService.createInstance(ConfigureModelAccessAction),\n\t\t\t\tinstantiationService.createInstance(ShowSamplingRequestsAction),\n\t\t\t]);\n\t\t\tgroups.push([\n\t\t\t\tinstantiationService.createInstance(BrowseResourcesAction),\n\t\t\t]);\n\t\t\tif (!isEditorAction) {\n\t\t\t\tconst installGroup: McpServerAction[] = [instantiationService.createInstance(UninstallAction)];\n\t\t\t\tif (workspaceService.getWorkbenchState() !== WorkbenchState.EMPTY) {\n\t\t\t\t\tinstallGroup.push(instantiationService.createInstance(InstallInWorkspaceAction, false));\n\t\t\t\t}\n\t\t\t\tif (environmentService.remoteAuthority && mcpServer.local?.scope !== LocalMcpServerScope.RemoteUser) {\n\t\t\t\t\tinstallGroup.push(instantiationService.createInstance(InstallInRemoteAction, false));\n\t\t\t\t}\n\t\t\t\tgroups.push(installGroup);\n\t\t\t}\n\t\t} else {\n\t\t\tconst installGroup = [];\n\t\t\tif (workspaceService.getWorkbenchState() !== WorkbenchState.EMPTY) {\n\t\t\t\tinstallGroup.push(instantiationService.createInstance(InstallInWorkspaceAction, !isEditorAction));\n\t\t\t}\n\t\t\tif (environmentService.remoteAuthority) {\n\t\t\t\tinstallGroup.push(instantiationService.createInstance(InstallInRemoteAction, !isEditorAction));\n\t\t\t}\n\t\t\tgroups.push(installGroup);\n\t\t}\n\t\tgroups.forEach(group => group.forEach(extensionAction => extensionAction.mcpServer = mcpServer));\n\n\t\treturn groups;\n\t});\n}\n\nexport class ManageMcpServerAction extends DropDownAction {\n\n\tstatic readonly ID = 'mcpServer.manage';\n\n\tprivate static readonly Class = `${McpServerAction.ICON_ACTION_CLASS} manage ` + ThemeIcon.asClassName(manageExtensionIcon);\n\tprivate static readonly HideManageExtensionClass = `${this.Class} hide`;\n\n\tconstructor(\n\t\tprivate readonly isEditorAction: boolean,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\n\t\tsuper(ManageMcpServerAction.ID, '', '', true, instantiationService);\n\t\tthis.tooltip = localize('manage', \"Manage\");\n\t\tthis.update();\n\t}\n\n\toverride async run(): Promise<void> {\n\t\treturn super.run(this.mcpServer ? getContextMenuActions(this.mcpServer, this.isEditorAction, this.instantiationService) : []);\n\t}\n\n\tupdate(): void {\n\t\tthis.class = ManageMcpServerAction.HideManageExtensionClass;\n\t\tthis.enabled = false;\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isEditorAction) {\n\t\t\tthis.enabled = true;\n\t\t\tthis.class = ManageMcpServerAction.Class;\n\t\t} else {\n\t\t\tthis.enabled = !!this.mcpServer.local;\n\t\t\tthis.class = this.enabled ? ManageMcpServerAction.Class : ManageMcpServerAction.HideManageExtensionClass;\n\t\t}\n\t}\n}\n\nexport class StartServerAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent start`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.start', localize('start', \"Start Server\"), StartServerAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = StartServerAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst serverState = server.connectionState.get();\n\t\tif (!McpConnectionState.canBeStarted(serverState.state)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = StartServerAction.CLASS;\n\t\tthis.enabled = true;\n\t\tthis.label = localize('start', \"Start Server\");\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tawait server.start({ promptType: 'all-untrusted' });\n\t\tserver.showOutput();\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport class StopServerAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent stop`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.stop', localize('stop', \"Stop Server\"), StopServerAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = StopServerAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst serverState = server.connectionState.get();\n\t\tif (McpConnectionState.canBeStarted(serverState.state)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = StopServerAction.CLASS;\n\t\tthis.enabled = true;\n\t\tthis.label = localize('stop', \"Stop Server\");\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tawait server.stop();\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport class RestartServerAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent restart`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.restart', localize('restart', \"Restart Server\"), RestartServerAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = RestartServerAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst serverState = server.connectionState.get();\n\t\tif (McpConnectionState.canBeStarted(serverState.state)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = RestartServerAction.CLASS;\n\t\tthis.enabled = true;\n\t\tthis.label = localize('restart', \"Restart Server\");\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tawait server.stop();\n\t\tawait server.start({ promptType: 'all-untrusted' });\n\t\tserver.showOutput();\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport class AuthServerAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent account`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tprivate static readonly SIGN_OUT = localize('mcp.signOut', 'Sign Out');\n\tprivate static readonly DISCONNECT = localize('mcp.disconnect', 'Disconnect Account');\n\n\tprivate _accountQuery: IAccountQuery | undefined;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t\t@IAuthenticationQueryService private readonly _authenticationQueryService: IAuthenticationQueryService,\n\t\t@IAuthenticationService private readonly _authenticationService: IAuthenticationService\n\t) {\n\t\tsuper('extensions.restart', localize('restart', \"Restart Server\"), RestartServerAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = AuthServerAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst accountQuery = this.getAccountQuery();\n\t\tif (!accountQuery) {\n\t\t\treturn;\n\t\t}\n\t\tthis._accountQuery = accountQuery;\n\t\tthis.class = AuthServerAction.CLASS;\n\t\tthis.enabled = true;\n\t\tlet label = accountQuery.entities().getEntityCount().total > 1 ? AuthServerAction.DISCONNECT : AuthServerAction.SIGN_OUT;\n\t\tlabel += ` (${accountQuery.accountName})`;\n\t\tthis.label = label;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst accountQuery = this.getAccountQuery();\n\t\tif (!accountQuery) {\n\t\t\treturn;\n\t\t}\n\t\tawait server.stop();\n\t\tconst { providerId, accountName } = accountQuery;\n\t\taccountQuery.mcpServer(server.definition.id).setAccessAllowed(false, server.definition.label);\n\t\tif (this.label === AuthServerAction.SIGN_OUT) {\n\t\t\tconst accounts = await this._authenticationService.getAccounts(providerId);\n\t\t\tconst account = accounts.find(a => a.label === accountName);\n\t\t\tif (account) {\n\t\t\t\tconst sessions = await this._authenticationService.getSessions(providerId, undefined, { account });\n\t\t\t\tfor (const session of sessions) {\n\t\t\t\t\tawait this._authenticationService.removeSession(providerId, session.id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n\n\tprivate getAccountQuery(): IAccountQuery | undefined {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (this._accountQuery) {\n\t\t\treturn this._accountQuery;\n\t\t}\n\t\tconst serverId = server.definition.id;\n\t\tconst preferences = this._authenticationQueryService.mcpServer(serverId).getAllAccountPreferences();\n\t\tif (!preferences.size) {\n\t\t\treturn undefined;\n\t\t}\n\t\tfor (const [providerId, accountName] of preferences) {\n\t\t\tconst accountQuery = this._authenticationQueryService.provider(providerId).account(accountName);\n\t\t\tif (!accountQuery.mcpServer(serverId).isAccessAllowed()) {\n\t\t\t\tcontinue; // skip accounts that are not allowed\n\t\t\t}\n\t\t\treturn accountQuery;\n\t\t}\n\t\treturn undefined;\n\t}\n\n}\n\nexport class ShowServerOutputAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent output`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t) {\n\t\tsuper('extensions.output', localize('output', \"Show Output\"), ShowServerOutputAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = ShowServerOutputAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = ShowServerOutputAction.CLASS;\n\t\tthis.enabled = true;\n\t\tthis.label = localize('output', \"Show Output\");\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tserver.showOutput();\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport class ShowServerConfigurationAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent config`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService\n\t) {\n\t\tsuper('extensions.config', localize('config', \"Show Configuration\"), ShowServerConfigurationAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = ShowServerConfigurationAction.HIDE;\n\t\tif (!this.mcpServer?.local) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = ShowServerConfigurationAction.CLASS;\n\t\tthis.enabled = true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (!this.mcpServer?.local) {\n\t\t\treturn;\n\t\t}\n\t\tthis.mcpWorkbenchService.open(this.mcpServer, { tab: McpServerEditorTab.Configuration });\n\t}\n\n}\n\nexport class ShowServerJsonConfigurationAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent config`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t\t@IMcpRegistry private readonly mcpRegistry: IMcpRegistry,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper('extensions.jsonConfig', localize('configJson', \"Show Configuration (JSON)\"), ShowServerJsonConfigurationAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = ShowServerJsonConfigurationAction.HIDE;\n\t\tconst configurationTarget = this.getConfigurationTarget();\n\t\tif (!configurationTarget) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = ShowServerConfigurationAction.CLASS;\n\t\tthis.enabled = true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst configurationTarget = this.getConfigurationTarget();\n\t\tif (!configurationTarget) {\n\t\t\treturn;\n\t\t}\n\t\tthis.editorService.openEditor({\n\t\t\tresource: URI.isUri(configurationTarget) ? configurationTarget : configurationTarget!.uri,\n\t\t\toptions: { selection: URI.isUri(configurationTarget) ? undefined : configurationTarget!.range }\n\t\t});\n\t}\n\n\tprivate getConfigurationTarget(): Location | URI | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\tconst server = this.mcpService.servers.get().find(s => s.definition.label === this.mcpServer?.name);\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst collection = this.mcpRegistry.collections.get().find(c => c.id === server.collection.id);\n\t\tconst serverDefinition = collection?.serverDefinitions.get().find(s => s.id === server.definition.id);\n\t\treturn serverDefinition?.presentation?.origin || collection?.presentation?.origin;\n\t}\n}\n\nexport class ConfigureModelAccessAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent config`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t) {\n\t\tsuper('extensions.config', localize('mcp.configAccess', 'Configure Model Access'), ConfigureModelAccessAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = ConfigureModelAccessAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = ConfigureModelAccessAction.CLASS;\n\t\tthis.enabled = true;\n\t\tthis.label = localize('mcp.configAccess', 'Configure Model Access');\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tthis.commandService.executeCommand(McpCommandIds.ConfigureSamplingModels, server);\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport class ShowSamplingRequestsAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent config`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t\t@IMcpSamplingService private readonly samplingService: IMcpSamplingService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper('extensions.config', localize('mcp.samplingLog', 'Show Sampling Requests'), ShowSamplingRequestsAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = ShowSamplingRequestsAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.samplingService.hasLogs(server)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = ShowSamplingRequestsAction.CLASS;\n\t\tthis.enabled = true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.samplingService.hasLogs(server)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.editorService.openEditor({\n\t\t\tresource: undefined,\n\t\t\tcontents: this.samplingService.getLogText(server),\n\t\t\tlabel: localize('mcp.samplingLog.title', 'MCP Sampling: {0}', server.definition.label),\n\t\t});\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport class BrowseResourcesAction extends McpServerAction {\n\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent config`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tconstructor(\n\t\t@IMcpService private readonly mcpService: IMcpService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t) {\n\t\tsuper('extensions.config', localize('mcp.resources', 'Browse Resources'), BrowseResourcesAction.CLASS, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = BrowseResourcesAction.HIDE;\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst capabilities = server.capabilities.get();\n\t\tif (capabilities !== undefined && !(capabilities & McpCapability.Resources)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.class = BrowseResourcesAction.CLASS;\n\t\tthis.enabled = true;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tconst server = this.getServer();\n\t\tif (!server) {\n\t\t\treturn;\n\t\t}\n\t\tconst capabilities = server.capabilities.get();\n\t\tif (capabilities !== undefined && !(capabilities & McpCapability.Resources)) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.commandService.executeCommand(McpCommandIds.BrowseResources, server);\n\t}\n\n\tprivate getServer(): IMcpServer | undefined {\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.mcpServer.local) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.mcpService.servers.get().find(s => s.definition.id === this.mcpServer?.id);\n\t}\n}\n\nexport type McpServerStatus = { readonly message: IMarkdownString; readonly icon?: ThemeIcon };\n\nexport class McpServerStatusAction extends McpServerAction {\n\n\tprivate static readonly CLASS = `${McpServerAction.ICON_ACTION_CLASS} extension-status`;\n\n\tprivate _status: McpServerStatus[] = [];\n\tget status(): McpServerStatus[] { return this._status; }\n\n\tprivate readonly _onDidChangeStatus = this._register(new Emitter<void>());\n\treadonly onDidChangeStatus = this._onDidChangeStatus.event;\n\n\tconstructor(\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t) {\n\t\tsuper('extensions.status', '', `${McpServerStatusAction.CLASS} hide`, false);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.computeAndUpdateStatus();\n\t}\n\n\tprivate computeAndUpdateStatus(): void {\n\t\tthis.updateStatus(undefined, true);\n\t\tthis.enabled = false;\n\n\t\tif (!this.mcpServer) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((this.mcpServer.gallery || this.mcpServer.installable) && this.mcpServer.installState === McpServerInstallState.Uninstalled) {\n\t\t\tconst result = this.mcpWorkbenchService.canInstall(this.mcpServer);\n\t\t\tif (result !== true) {\n\t\t\t\tthis.updateStatus({ icon: warningIcon, message: result }, true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst runtimeState = this.mcpServer.runtimeStatus;\n\t\tif (runtimeState?.message) {\n\t\t\tthis.updateStatus({ icon: runtimeState.message.severity === Severity.Warning ? warningIcon : runtimeState.message.severity === Severity.Error ? errorIcon : infoIcon, message: runtimeState.message.text }, true);\n\t\t}\n\t}\n\n\tprivate updateStatus(status: McpServerStatus | undefined, updateClass: boolean): void {\n\t\tif (status) {\n\t\t\tif (this._status.some(s => s.message.value === status.message.value && s.icon?.id === status.icon?.id)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._status.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._status = [];\n\t\t}\n\n\t\tif (status) {\n\t\t\tthis._status.push(status);\n\t\t\tthis._status.sort((a, b) =>\n\t\t\t\tb.icon === trustIcon ? -1 :\n\t\t\t\t\ta.icon === trustIcon ? 1 :\n\t\t\t\t\t\tb.icon === errorIcon ? -1 :\n\t\t\t\t\t\t\ta.icon === errorIcon ? 1 :\n\t\t\t\t\t\t\t\tb.icon === warningIcon ? -1 :\n\t\t\t\t\t\t\t\t\ta.icon === warningIcon ? 1 :\n\t\t\t\t\t\t\t\t\t\tb.icon === infoIcon ? -1 :\n\t\t\t\t\t\t\t\t\t\t\ta.icon === infoIcon ? 1 :\n\t\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t);\n\t\t}\n\n\t\tif (updateClass) {\n\t\t\tif (status?.icon === errorIcon) {\n\t\t\t\tthis.class = `${McpServerStatusAction.CLASS} extension-status-error ${ThemeIcon.asClassName(errorIcon)}`;\n\t\t\t}\n\t\t\telse if (status?.icon === warningIcon) {\n\t\t\t\tthis.class = `${McpServerStatusAction.CLASS} extension-status-warning ${ThemeIcon.asClassName(warningIcon)}`;\n\t\t\t}\n\t\t\telse if (status?.icon === infoIcon) {\n\t\t\t\tthis.class = `${McpServerStatusAction.CLASS} extension-status-info ${ThemeIcon.asClassName(infoIcon)}`;\n\t\t\t}\n\t\t\telse if (status?.icon === trustIcon) {\n\t\t\t\tthis.class = `${McpServerStatusAction.CLASS} ${ThemeIcon.asClassName(trustIcon)}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.class = `${McpServerStatusAction.CLASS} hide`;\n\t\t\t}\n\t\t}\n\t\tthis._onDidChangeStatus.fire();\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (this._status[0]?.icon === trustIcon) {\n\t\t\treturn this.commandService.executeCommand('workbench.trust.manage');\n\t\t}\n\t}\n}\n"]}