{"version":3,"sources":["vs/workbench/contrib/mcp/browser/mcpServerEditor.ts"],"names":[],"mappings":"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","file":"mcpServerEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/mcpServerEditor.css';\nimport { $, Dimension, append, clearNode, setParentFlowTo } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { Cache, CacheResult } from '../../../../base/common/cache.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore, MutableDisposable, dispose, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas, matchesScheme } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { TokenizationRegistry } from '../../../../editor/common/languages.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { generateTokensCSSForColorMap } from '../../../../editor/common/languages/supports/tokenization.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, IScopedContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { EditorPane } from '../../../browser/parts/editor/editorPane.js';\nimport { IEditorOpenContext } from '../../../common/editor.js';\nimport { DEFAULT_MARKDOWN_STYLES, renderMarkdownDocument } from '../../markdown/browser/markdownDocumentRenderer.js';\nimport { IWebview, IWebviewService } from '../../webview/browser/webview.js';\nimport { IEditorGroup } from '../../../services/editor/common/editorGroupsService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IMcpServerContainer, IMcpServerEditorOptions, IMcpWorkbenchService, IWorkbenchMcpServer, McpServerContainers, McpServerInstallState } from '../common/mcpTypes.js';\nimport { StarredWidget, McpServerIconWidget, McpServerStatusWidget, McpServerWidget, onClick, PublisherWidget, McpServerScopeBadgeWidget, LicenseWidget } from './mcpServerWidgets.js';\nimport { ButtonWithDropDownExtensionAction, ButtonWithDropdownExtensionActionViewItem, DropDownAction, InstallAction, InstallingLabelAction, InstallInRemoteAction, InstallInWorkspaceAction, ManageMcpServerAction, McpServerStatusAction, UninstallAction } from './mcpServerActions.js';\nimport { McpServerEditorInput } from './mcpServerEditorInput.js';\nimport { ILocalMcpServer, IGalleryMcpServerConfiguration, IMcpServerPackage, IMcpServerKeyValueInput, RegistryType } from '../../../../platform/mcp/common/mcpManagement.js';\nimport { IActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { McpServerType } from '../../../../platform/mcp/common/mcpPlatformTypes.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { getMcpGalleryManifestResourceUri, IMcpGalleryManifestService, McpGalleryResourceType } from '../../../../platform/mcp/common/mcpGalleryManifest.js';\nimport { fromNow } from '../../../../base/common/date.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n\nconst enum McpServerEditorTab {\n\tReadme = 'readme',\n\tConfiguration = 'configuration',\n\tManifest = 'manifest',\n}\n\nclass NavBar extends Disposable {\n\n\tprivate _onChange = this._register(new Emitter<{ id: string | null; focus: boolean }>());\n\tget onChange(): Event<{ id: string | null; focus: boolean }> { return this._onChange.event; }\n\n\tprivate _currentId: string | null = null;\n\tget currentId(): string | null { return this._currentId; }\n\n\tprivate actions: Action[];\n\tprivate actionbar: ActionBar;\n\n\tconstructor(container: HTMLElement) {\n\t\tsuper();\n\t\tconst element = append(container, $('.navbar'));\n\t\tthis.actions = [];\n\t\tthis.actionbar = this._register(new ActionBar(element));\n\t}\n\n\tpush(id: string, label: string, tooltip: string, index?: number): void {\n\t\tconst action = new Action(id, label, undefined, true, () => this.update(id, true));\n\n\t\taction.tooltip = tooltip;\n\n\t\tif (typeof index === 'number') {\n\t\t\tthis.actions.splice(index, 0, action);\n\t\t} else {\n\t\t\tthis.actions.push(action);\n\t\t}\n\t\tthis.actionbar.push(action, { index });\n\n\t\tif (this.actions.length === 1) {\n\t\t\tthis.update(id);\n\t\t}\n\t}\n\n\tremove(id: string): void {\n\t\tconst index = this.actions.findIndex(action => action.id === id);\n\t\tif (index !== -1) {\n\t\t\tthis.actions.splice(index, 1);\n\t\t\tthis.actionbar.pull(index);\n\t\t\tif (this._currentId === id) {\n\t\t\t\tthis.switch(this.actions[0]?.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tclear(): void {\n\t\tthis.actions = dispose(this.actions);\n\t\tthis.actionbar.clear();\n\t}\n\n\tswitch(id: string): boolean {\n\t\tconst action = this.actions.find(action => action.id === id);\n\t\tif (action) {\n\t\t\taction.run();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\thas(id: string): boolean {\n\t\treturn this.actions.some(action => action.id === id);\n\t}\n\n\tprivate update(id: string, focus?: boolean): void {\n\t\tthis._currentId = id;\n\t\tthis._onChange.fire({ id, focus: !!focus });\n\t\tthis.actions.forEach(a => a.checked = a.id === id);\n\t}\n}\n\ninterface ILayoutParticipant {\n\tlayout(): void;\n}\n\ninterface IActiveElement {\n\tfocus(): void;\n}\n\ninterface IExtensionEditorTemplate {\n\tname: HTMLElement;\n\tdescription: HTMLElement;\n\tactionsAndStatusContainer: HTMLElement;\n\tactionBar: ActionBar;\n\tnavbar: NavBar;\n\tcontent: HTMLElement;\n\theader: HTMLElement;\n\tmcpServer: IWorkbenchMcpServer;\n}\n\nconst enum WebviewIndex {\n\tReadme,\n\tChangelog\n}\n\nexport class McpServerEditor extends EditorPane {\n\n\tstatic readonly ID: string = 'workbench.editor.mcpServer';\n\n\tprivate readonly _scopedContextKeyService = this._register(new MutableDisposable<IScopedContextKeyService>());\n\tprivate template: IExtensionEditorTemplate | undefined;\n\n\tprivate mcpServerReadme: Cache<string> | null;\n\tprivate mcpServerManifest: Cache<IGalleryMcpServerConfiguration> | null;\n\n\t// Some action bar items use a webview whose vertical scroll position we track in this map\n\tprivate initialScrollProgress: Map<WebviewIndex, number> = new Map();\n\n\t// Spot when an ExtensionEditor instance gets reused for a different extension, in which case the vertical scroll positions must be zeroed\n\tprivate currentIdentifier: string = '';\n\n\tprivate layoutParticipants: ILayoutParticipant[] = [];\n\tprivate readonly contentDisposables = this._register(new DisposableStore());\n\tprivate readonly transientDisposables = this._register(new DisposableStore());\n\tprivate activeElement: IActiveElement | null = null;\n\tprivate dimension: Dimension | undefined;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IWebviewService private readonly webviewService: IWebviewService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IMcpWorkbenchService private readonly mcpWorkbenchService: IMcpWorkbenchService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(McpServerEditor.ID, group, telemetryService, themeService, storageService);\n\t\tthis.mcpServerReadme = null;\n\t\tthis.mcpServerManifest = null;\n\t}\n\n\toverride get scopedContextKeyService(): IContextKeyService | undefined {\n\t\treturn this._scopedContextKeyService.value;\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tconst root = append(parent, $('.extension-editor.mcp-server-editor'));\n\t\tthis._scopedContextKeyService.value = this.contextKeyService.createScoped(root);\n\t\tthis._scopedContextKeyService.value.createKey('inExtensionEditor', true);\n\n\t\troot.tabIndex = 0; // this is required for the focus tracker on the editor\n\t\troot.style.outline = 'none';\n\t\troot.setAttribute('role', 'document');\n\t\tconst header = append(root, $('.header'));\n\n\t\tconst iconContainer = append(header, $('.icon-container'));\n\t\tconst iconWidget = this.instantiationService.createInstance(McpServerIconWidget, iconContainer);\n\t\tconst scopeWidget = this.instantiationService.createInstance(McpServerScopeBadgeWidget, iconContainer);\n\n\t\tconst details = append(header, $('.details'));\n\t\tconst title = append(details, $('.title'));\n\t\tconst name = append(title, $('span.name.clickable', { role: 'heading', tabIndex: 0 }));\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), name, localize('name', \"Extension name\")));\n\n\t\tconst subtitle = append(details, $('.subtitle'));\n\t\tconst subTitleEntryContainers: HTMLElement[] = [];\n\n\t\tconst publisherContainer = append(subtitle, $('.subtitle-entry'));\n\t\tsubTitleEntryContainers.push(publisherContainer);\n\t\tconst publisherWidget = this.instantiationService.createInstance(PublisherWidget, publisherContainer, false);\n\n\t\tconst starredContainer = append(subtitle, $('.subtitle-entry'));\n\t\tsubTitleEntryContainers.push(starredContainer);\n\t\tconst installCountWidget = this.instantiationService.createInstance(StarredWidget, starredContainer, false);\n\n\t\tconst licenseContainer = append(subtitle, $('.subtitle-entry'));\n\t\tsubTitleEntryContainers.push(licenseContainer);\n\t\tconst licenseWidget = this.instantiationService.createInstance(LicenseWidget, licenseContainer);\n\n\t\tconst widgets: McpServerWidget[] = [\n\t\t\ticonWidget,\n\t\t\tpublisherWidget,\n\t\t\tinstallCountWidget,\n\t\t\tscopeWidget,\n\t\t\tlicenseWidget\n\t\t];\n\n\t\tconst description = append(details, $('.description'));\n\n\t\tconst actions = [\n\t\t\tthis.instantiationService.createInstance(InstallAction, false),\n\t\t\tthis.instantiationService.createInstance(InstallingLabelAction),\n\t\t\tthis.instantiationService.createInstance(ButtonWithDropDownExtensionAction, 'extensions.uninstall', UninstallAction.CLASS, [\n\t\t\t\t[\n\t\t\t\t\tthis.instantiationService.createInstance(UninstallAction),\n\t\t\t\t\tthis.instantiationService.createInstance(InstallInWorkspaceAction, false),\n\t\t\t\t\tthis.instantiationService.createInstance(InstallInRemoteAction, false)\n\t\t\t\t]\n\t\t\t]),\n\t\t\tthis.instantiationService.createInstance(ManageMcpServerAction, true),\n\t\t];\n\n\t\tconst actionsAndStatusContainer = append(details, $('.actions-status-container.mcp-server-actions'));\n\t\tconst actionBar = this._register(new ActionBar(actionsAndStatusContainer, {\n\t\t\tactionViewItemProvider: (action: IAction, options: IActionViewItemOptions) => {\n\t\t\t\tif (action instanceof DropDownAction) {\n\t\t\t\t\treturn action.createActionViewItem(options);\n\t\t\t\t}\n\t\t\t\tif (action instanceof ButtonWithDropDownExtensionAction) {\n\t\t\t\t\treturn new ButtonWithDropdownExtensionActionViewItem(\n\t\t\t\t\t\taction,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...options,\n\t\t\t\t\t\t\ticon: true,\n\t\t\t\t\t\t\tlabel: true,\n\t\t\t\t\t\t\tmenuActionsOrProvider: { getActions: () => action.menuActions },\n\t\t\t\t\t\t\tmenuActionClassNames: action.menuActionClassNames\n\t\t\t\t\t\t},\n\t\t\t\t\t\tthis.contextMenuService);\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tfocusOnlyEnabledItems: true\n\t\t}));\n\n\t\tactionBar.push(actions, { icon: true, label: true });\n\t\tactionBar.setFocusable(true);\n\t\t// update focusable elements when the enablement of an action changes\n\t\tthis._register(Event.any(...actions.map(a => Event.filter(a.onDidChange, e => e.enabled !== undefined)))(() => {\n\t\t\tactionBar.setFocusable(false);\n\t\t\tactionBar.setFocusable(true);\n\t\t}));\n\n\t\tconst otherContainers: IMcpServerContainer[] = [];\n\t\tconst mcpServerStatusAction = this.instantiationService.createInstance(McpServerStatusAction);\n\t\tconst mcpServerStatusWidget = this._register(this.instantiationService.createInstance(McpServerStatusWidget, append(actionsAndStatusContainer, $('.status')), mcpServerStatusAction));\n\t\tthis._register(Event.any(mcpServerStatusWidget.onDidRender)(() => {\n\t\t\tif (this.dimension) {\n\t\t\t\tthis.layout(this.dimension);\n\t\t\t}\n\t\t}));\n\n\t\totherContainers.push(mcpServerStatusAction, new class extends McpServerWidget {\n\t\t\trender() {\n\t\t\t\tactionsAndStatusContainer.classList.toggle('list-layout', this.mcpServer?.installState === McpServerInstallState.Installed);\n\t\t\t}\n\t\t}());\n\n\t\tconst mcpServerContainers: McpServerContainers = this.instantiationService.createInstance(McpServerContainers, [...actions, ...widgets, ...otherContainers]);\n\t\tfor (const disposable of [...actions, ...widgets, ...otherContainers, mcpServerContainers]) {\n\t\t\tthis._register(disposable);\n\t\t}\n\n\t\tconst onError = Event.chain(actionBar.onDidRun, $ =>\n\t\t\t$.map(({ error }) => error)\n\t\t\t\t.filter(error => !!error)\n\t\t);\n\n\t\tthis._register(onError(this.onError, this));\n\n\t\tconst body = append(root, $('.body'));\n\t\tconst navbar = new NavBar(body);\n\n\t\tconst content = append(body, $('.content'));\n\t\tcontent.id = generateUuid(); // An id is needed for the webview parent flow to\n\n\t\tthis.template = {\n\t\t\tcontent,\n\t\t\tdescription,\n\t\t\theader,\n\t\t\tname,\n\t\t\tnavbar,\n\t\t\tactionsAndStatusContainer,\n\t\t\tactionBar: actionBar,\n\t\t\tset mcpServer(mcpServer: IWorkbenchMcpServer) {\n\t\t\t\tmcpServerContainers.mcpServer = mcpServer;\n\t\t\t\tlet lastNonEmptySubtitleEntryContainer;\n\t\t\t\tfor (const subTitleEntryElement of subTitleEntryContainers) {\n\t\t\t\t\tsubTitleEntryElement.classList.remove('last-non-empty');\n\t\t\t\t\tif (subTitleEntryElement.children.length > 0) {\n\t\t\t\t\t\tlastNonEmptySubtitleEntryContainer = subTitleEntryElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (lastNonEmptySubtitleEntryContainer) {\n\t\t\t\t\tlastNonEmptySubtitleEntryContainer.classList.add('last-non-empty');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\toverride async setInput(input: McpServerEditorInput, options: IMcpServerEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(input, options, context, token);\n\t\tif (this.template) {\n\t\t\tawait this.render(input.mcpServer, this.template, !!options?.preserveFocus);\n\t\t}\n\t}\n\n\tprivate async render(mcpServer: IWorkbenchMcpServer, template: IExtensionEditorTemplate, preserveFocus: boolean): Promise<void> {\n\t\tthis.activeElement = null;\n\t\tthis.transientDisposables.clear();\n\n\t\tconst token = this.transientDisposables.add(new CancellationTokenSource()).token;\n\n\t\tthis.mcpServerReadme = new Cache(() => mcpServer.getReadme(token));\n\t\tthis.mcpServerManifest = new Cache(() => mcpServer.getManifest(token));\n\t\ttemplate.mcpServer = mcpServer;\n\n\t\ttemplate.name.textContent = mcpServer.label;\n\t\ttemplate.name.classList.toggle('clickable', !!mcpServer.gallery?.webUrl);\n\t\ttemplate.description.textContent = mcpServer.description;\n\t\tif (mcpServer.gallery?.webUrl) {\n\t\t\tthis.transientDisposables.add(onClick(template.name, () => this.openerService.open(URI.parse(mcpServer.gallery?.webUrl!))));\n\t\t}\n\n\t\tthis.renderNavbar(mcpServer, template, preserveFocus);\n\t}\n\n\toverride setOptions(options: IMcpServerEditorOptions | undefined): void {\n\t\tsuper.setOptions(options);\n\t\tif (options?.tab) {\n\t\t\tthis.template?.navbar.switch(options.tab);\n\t\t}\n\t}\n\n\tprivate renderNavbar(extension: IWorkbenchMcpServer, template: IExtensionEditorTemplate, preserveFocus: boolean): void {\n\t\ttemplate.content.innerText = '';\n\t\ttemplate.navbar.clear();\n\n\t\tif (this.currentIdentifier !== extension.id) {\n\t\t\tthis.initialScrollProgress.clear();\n\t\t\tthis.currentIdentifier = extension.id;\n\t\t}\n\n\t\tif (extension.readmeUrl || extension.gallery?.readme) {\n\t\t\ttemplate.navbar.push(McpServerEditorTab.Readme, localize('details', \"Details\"), localize('detailstooltip', \"Extension details, rendered from the extension's 'README.md' file\"));\n\t\t}\n\n\t\tif (extension.gallery || extension.local?.manifest) {\n\t\t\ttemplate.navbar.push(McpServerEditorTab.Manifest, localize('manifest', \"Manifest\"), localize('manifesttooltip', \"Server manifest details\"));\n\t\t}\n\n\t\tif (extension.config) {\n\t\t\ttemplate.navbar.push(McpServerEditorTab.Configuration, localize('configuration', \"Configuration\"), localize('configurationtooltip', \"Server configuration details\"));\n\t\t}\n\n\t\tthis.transientDisposables.add(this.mcpWorkbenchService.onChange(e => {\n\t\t\tif (e === extension) {\n\t\t\t\tif (e.config && !template.navbar.has(McpServerEditorTab.Configuration)) {\n\t\t\t\t\ttemplate.navbar.push(McpServerEditorTab.Configuration, localize('configuration', \"Configuration\"), localize('configurationtooltip', \"Server configuration details\"), extension.readmeUrl ? 1 : 0);\n\t\t\t\t}\n\t\t\t\tif (!e.config && template.navbar.has(McpServerEditorTab.Configuration)) {\n\t\t\t\t\ttemplate.navbar.remove(McpServerEditorTab.Configuration);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tif ((<IMcpServerEditorOptions | undefined>this.options)?.tab) {\n\t\t\ttemplate.navbar.switch((<IMcpServerEditorOptions>this.options).tab!);\n\t\t}\n\n\t\tif (template.navbar.currentId) {\n\t\t\tthis.onNavbarChange(extension, { id: template.navbar.currentId, focus: !preserveFocus }, template);\n\t\t}\n\t\ttemplate.navbar.onChange(e => this.onNavbarChange(extension, e, template), this, this.transientDisposables);\n\t}\n\n\toverride clearInput(): void {\n\t\tthis.contentDisposables.clear();\n\t\tthis.transientDisposables.clear();\n\n\t\tsuper.clearInput();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.activeElement?.focus();\n\t}\n\n\tshowFind(): void {\n\t\tthis.activeWebview?.showFind();\n\t}\n\n\trunFindAction(previous: boolean): void {\n\t\tthis.activeWebview?.runFindAction(previous);\n\t}\n\n\tpublic get activeWebview(): IWebview | undefined {\n\t\tif (!this.activeElement || !(this.activeElement as IWebview).runFindAction) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.activeElement as IWebview;\n\t}\n\n\tprivate onNavbarChange(extension: IWorkbenchMcpServer, { id, focus }: { id: string | null; focus: boolean }, template: IExtensionEditorTemplate): void {\n\t\tthis.contentDisposables.clear();\n\t\ttemplate.content.innerText = '';\n\t\tthis.activeElement = null;\n\t\tif (id) {\n\t\t\tconst cts = new CancellationTokenSource();\n\t\t\tthis.contentDisposables.add(toDisposable(() => cts.dispose(true)));\n\t\t\tthis.open(id, extension, template, cts.token)\n\t\t\t\t.then(activeElement => {\n\t\t\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.activeElement = activeElement;\n\t\t\t\t\tif (focus) {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}\n\n\tprivate open(id: string, extension: IWorkbenchMcpServer, template: IExtensionEditorTemplate, token: CancellationToken): Promise<IActiveElement | null> {\n\t\tswitch (id) {\n\t\t\tcase McpServerEditorTab.Configuration: return this.openConfiguration(extension, template, token);\n\t\t\tcase McpServerEditorTab.Readme: return this.openDetails(extension, template, token);\n\t\t\tcase McpServerEditorTab.Manifest: return extension.readmeUrl ? this.openManifest(extension, template.content, token) : this.openManifestWithAdditionalDetails(extension, template, token);\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n\n\tprivate async openMarkdown(extension: IWorkbenchMcpServer, cacheResult: CacheResult<string>, noContentCopy: string, container: HTMLElement, webviewIndex: WebviewIndex, title: string, token: CancellationToken): Promise<IActiveElement | null> {\n\t\ttry {\n\t\t\tconst body = await this.renderMarkdown(extension, cacheResult, container, token);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn Promise.resolve(null);\n\t\t\t}\n\n\t\t\tconst webview = this.contentDisposables.add(this.webviewService.createWebviewOverlay({\n\t\t\t\ttitle,\n\t\t\t\toptions: {\n\t\t\t\t\tenableFindWidget: true,\n\t\t\t\t\ttryRestoreScrollPosition: true,\n\t\t\t\t\tdisableServiceWorker: true,\n\t\t\t\t},\n\t\t\t\tcontentOptions: {},\n\t\t\t\textension: undefined,\n\t\t\t}));\n\n\t\t\twebview.initialScrollProgress = this.initialScrollProgress.get(webviewIndex) || 0;\n\n\t\t\twebview.claim(this, this.window, this.scopedContextKeyService);\n\t\t\tsetParentFlowTo(webview.container, container);\n\t\t\twebview.layoutWebviewOverElement(container);\n\n\t\t\twebview.setHtml(body);\n\t\t\twebview.claim(this, this.window, undefined);\n\n\t\t\tthis.contentDisposables.add(webview.onDidFocus(() => this._onDidFocus?.fire()));\n\n\t\t\tthis.contentDisposables.add(webview.onDidScroll(() => this.initialScrollProgress.set(webviewIndex, webview.initialScrollProgress)));\n\n\t\t\tconst removeLayoutParticipant = arrays.insert(this.layoutParticipants, {\n\t\t\t\tlayout: () => {\n\t\t\t\t\twebview.layoutWebviewOverElement(container);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.contentDisposables.add(toDisposable(removeLayoutParticipant));\n\n\t\t\tlet isDisposed = false;\n\t\t\tthis.contentDisposables.add(toDisposable(() => { isDisposed = true; }));\n\n\t\t\tthis.contentDisposables.add(this.themeService.onDidColorThemeChange(async () => {\n\t\t\t\t// Render again since syntax highlighting of code blocks may have changed\n\t\t\t\tconst body = await this.renderMarkdown(extension, cacheResult, container);\n\t\t\t\tif (!isDisposed) { // Make sure we weren't disposed of in the meantime\n\t\t\t\t\twebview.setHtml(body);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.contentDisposables.add(webview.onDidClickLink(link => {\n\t\t\t\tif (!link) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Only allow links with specific schemes\n\t\t\t\tif (matchesScheme(link, Schemas.http) || matchesScheme(link, Schemas.https) || matchesScheme(link, Schemas.mailto)) {\n\t\t\t\t\tthis.openerService.open(link);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\treturn webview;\n\t\t} catch (e) {\n\t\t\tconst p = append(container, $('p.nocontent'));\n\t\t\tp.textContent = noContentCopy;\n\t\t\treturn p;\n\t\t}\n\t}\n\n\tprivate async renderMarkdown(extension: IWorkbenchMcpServer, cacheResult: CacheResult<string>, container: HTMLElement, token?: CancellationToken): Promise<string> {\n\t\tconst contents = await this.loadContents(() => cacheResult, container);\n\t\tif (token?.isCancellationRequested) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst content = await renderMarkdownDocument(contents, this.extensionService, this.languageService, {}, token);\n\t\tif (token?.isCancellationRequested) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn this.renderBody(content);\n\t}\n\n\tprivate renderBody(body: TrustedHTML): string {\n\t\tconst nonce = generateUuid();\n\t\tconst colorMap = TokenizationRegistry.getColorMap();\n\t\tconst css = colorMap ? generateTokensCSSForColorMap(colorMap) : '';\n\t\treturn `<!DOCTYPE html>\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\">\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; img-src https: data:; media-src https:; script-src 'none'; style-src 'nonce-${nonce}';\">\n\t\t\t\t<style nonce=\"${nonce}\">\n\t\t\t\t\t${DEFAULT_MARKDOWN_STYLES}\n\n\t\t\t\t\t/* prevent scroll-to-top button from blocking the body text */\n\t\t\t\t\tbody {\n\t\t\t\t\t\tpadding-bottom: 75px;\n\t\t\t\t\t}\n\n\t\t\t\t\t#scroll-to-top {\n\t\t\t\t\t\tposition: fixed;\n\t\t\t\t\t\twidth: 32px;\n\t\t\t\t\t\theight: 32px;\n\t\t\t\t\t\tright: 25px;\n\t\t\t\t\t\tbottom: 25px;\n\t\t\t\t\t\tbackground-color: var(--vscode-button-secondaryBackground);\n\t\t\t\t\t\tborder-color: var(--vscode-button-border);\n\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tbox-shadow: 1px 1px 1px rgba(0,0,0,.25);\n\t\t\t\t\t\toutline: none;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t#scroll-to-top:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-button-secondaryHoverBackground);\n\t\t\t\t\t\tbox-shadow: 2px 2px 2px rgba(0,0,0,.25);\n\t\t\t\t\t}\n\n\t\t\t\t\tbody.vscode-high-contrast #scroll-to-top {\n\t\t\t\t\t\tborder-width: 2px;\n\t\t\t\t\t\tborder-style: solid;\n\t\t\t\t\t\tbox-shadow: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t#scroll-to-top span.icon::before {\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\tbackground: var(--vscode-button-secondaryForeground);\n\t\t\t\t\t\t/* Chevron up icon */\n\t\t\t\t\t\twebkit-mask-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNiAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KCS5zdDF7ZmlsbDpub25lO30KPC9zdHlsZT4KPHRpdGxlPnVwY2hldnJvbjwvdGl0bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik04LDUuMWwtNy4zLDcuM0wwLDExLjZsOC04bDgsOGwtMC43LDAuN0w4LDUuMXoiLz4KPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+Cjwvc3ZnPgo=');\n\t\t\t\t\t\t-webkit-mask-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNiAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KCS5zdDF7ZmlsbDpub25lO30KPC9zdHlsZT4KPHRpdGxlPnVwY2hldnJvbjwvdGl0bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik04LDUuMWwtNy4zLDcuM0wwLDExLjZsOC04bDgsOGwtMC43LDAuN0w4LDUuMXoiLz4KPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+Cjwvc3ZnPgo=');\n\t\t\t\t\t\twidth: 16px;\n\t\t\t\t\t\theight: 16px;\n\t\t\t\t\t}\n\t\t\t\t\t${css}\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<a id=\"scroll-to-top\" role=\"button\" aria-label=\"scroll to top\" href=\"#\"><span class=\"icon\"></span></a>\n\t\t\t\t${body}\n\t\t\t</body>\n\t\t</html>`;\n\t}\n\n\tprivate async openDetails(extension: IWorkbenchMcpServer, template: IExtensionEditorTemplate, token: CancellationToken): Promise<IActiveElement | null> {\n\t\tconst details = append(template.content, $('.details'));\n\t\tconst readmeContainer = append(details, $('.readme-container'));\n\t\tconst additionalDetailsContainer = append(details, $('.additional-details-container'));\n\n\t\tconst layout = () => details.classList.toggle('narrow', this.dimension && this.dimension.width < 500);\n\t\tlayout();\n\t\tthis.contentDisposables.add(toDisposable(arrays.insert(this.layoutParticipants, { layout })));\n\n\t\tconst activeElement = await this.openMarkdown(extension, this.mcpServerReadme!.get(), localize('noReadme', \"No README available.\"), readmeContainer, WebviewIndex.Readme, localize('Readme title', \"Readme\"), token);\n\t\tthis.renderAdditionalDetails(additionalDetailsContainer, extension);\n\t\treturn activeElement;\n\t}\n\n\tprivate async openConfiguration(mcpServer: IWorkbenchMcpServer, template: IExtensionEditorTemplate, token: CancellationToken): Promise<IActiveElement | null> {\n\t\tconst configContainer = append(template.content, $('.configuration'));\n\t\tconst content = $('div', { class: 'configuration-content' });\n\n\t\tthis.renderConfigurationDetails(content, mcpServer);\n\n\t\tconst scrollableContent = new DomScrollableElement(content, {});\n\t\tconst layout = () => scrollableContent.scanDomNode();\n\t\tthis.contentDisposables.add(toDisposable(arrays.insert(this.layoutParticipants, { layout })));\n\n\t\tappend(configContainer, scrollableContent.getDomNode());\n\n\t\treturn { focus: () => content.focus() };\n\t}\n\n\tprivate async openManifestWithAdditionalDetails(mcpServer: IWorkbenchMcpServer, template: IExtensionEditorTemplate, token: CancellationToken): Promise<IActiveElement | null> {\n\t\tconst details = append(template.content, $('.details'));\n\n\t\tconst readmeContainer = append(details, $('.readme-container'));\n\t\tconst additionalDetailsContainer = append(details, $('.additional-details-container'));\n\n\t\tconst layout = () => details.classList.toggle('narrow', this.dimension && this.dimension.width < 500);\n\t\tlayout();\n\t\tthis.contentDisposables.add(toDisposable(arrays.insert(this.layoutParticipants, { layout })));\n\n\t\tconst activeElement = await this.openManifest(mcpServer, readmeContainer, token);\n\n\t\tthis.renderAdditionalDetails(additionalDetailsContainer, mcpServer);\n\t\treturn activeElement;\n\t}\n\n\tprivate async openManifest(mcpServer: IWorkbenchMcpServer, parent: HTMLElement, token: CancellationToken): Promise<IActiveElement | null> {\n\t\tconst manifestContainer = append(parent, $('.manifest'));\n\t\tconst content = $('div', { class: 'manifest-content' });\n\n\t\ttry {\n\t\t\tconst manifest = await this.loadContents(() => this.mcpServerManifest!.get(), content);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tthis.renderManifestDetails(content, manifest);\n\t\t} catch (error) {\n\t\t\t// Handle error - show no manifest message\n\t\t\twhile (content.firstChild) {\n\t\t\t\tcontent.removeChild(content.firstChild);\n\t\t\t}\n\t\t\tconst noManifestMessage = append(content, $('.no-manifest'));\n\t\t\tnoManifestMessage.textContent = localize('noManifest', \"No manifest available for this MCP server.\");\n\t\t}\n\n\t\tconst scrollableContent = new DomScrollableElement(content, {});\n\t\tconst layout = () => scrollableContent.scanDomNode();\n\t\tthis.contentDisposables.add(toDisposable(arrays.insert(this.layoutParticipants, { layout })));\n\n\t\tappend(manifestContainer, scrollableContent.getDomNode());\n\n\t\treturn { focus: () => content.focus() };\n\t}\n\n\tprivate renderConfigurationDetails(container: HTMLElement, mcpServer: IWorkbenchMcpServer): void {\n\t\tclearNode(container);\n\n\t\tconst config = mcpServer.config;\n\n\t\tif (!config) {\n\t\t\tconst noConfigMessage = append(container, $('.no-config'));\n\t\t\tnoConfigMessage.textContent = localize('noConfig', \"No configuration available for this MCP server.\");\n\t\t\treturn;\n\t\t}\n\n\t\t// Server Name\n\t\tconst nameSection = append(container, $('.config-section'));\n\t\tconst nameLabel = append(nameSection, $('.config-label'));\n\t\tnameLabel.textContent = localize('serverName', \"Name:\");\n\t\tconst nameValue = append(nameSection, $('.config-value'));\n\t\tnameValue.textContent = mcpServer.name;\n\n\t\t// Server Type\n\t\tconst typeSection = append(container, $('.config-section'));\n\t\tconst typeLabel = append(typeSection, $('.config-label'));\n\t\ttypeLabel.textContent = localize('serverType', \"Type:\");\n\t\tconst typeValue = append(typeSection, $('.config-value'));\n\t\ttypeValue.textContent = config.type;\n\n\t\t// Type-specific configuration\n\t\tif (config.type === McpServerType.LOCAL) {\n\t\t\t// Command\n\t\t\tconst commandSection = append(container, $('.config-section'));\n\t\t\tconst commandLabel = append(commandSection, $('.config-label'));\n\t\t\tcommandLabel.textContent = localize('command', \"Command:\");\n\t\t\tconst commandValue = append(commandSection, $('code.config-value'));\n\t\t\tcommandValue.textContent = config.command;\n\n\t\t\t// Arguments (if present)\n\t\t\tif (config.args && config.args.length > 0) {\n\t\t\t\tconst argsSection = append(container, $('.config-section'));\n\t\t\t\tconst argsLabel = append(argsSection, $('.config-label'));\n\t\t\t\targsLabel.textContent = localize('arguments', \"Arguments:\");\n\t\t\t\tconst argsValue = append(argsSection, $('code.config-value'));\n\t\t\t\targsValue.textContent = config.args.join(' ');\n\t\t\t}\n\t\t} else if (config.type === McpServerType.REMOTE) {\n\t\t\t// URL\n\t\t\tconst urlSection = append(container, $('.config-section'));\n\t\t\tconst urlLabel = append(urlSection, $('.config-label'));\n\t\t\turlLabel.textContent = localize('url', \"URL:\");\n\t\t\tconst urlValue = append(urlSection, $('code.config-value'));\n\t\t\turlValue.textContent = config.url;\n\t\t}\n\t}\n\n\tprivate renderManifestDetails(container: HTMLElement, manifest: IGalleryMcpServerConfiguration): void {\n\t\tclearNode(container);\n\n\t\tif (manifest.packages && manifest.packages.length > 0) {\n\t\t\tconst packagesByType = new Map<RegistryType, IMcpServerPackage[]>();\n\t\t\tfor (const pkg of manifest.packages) {\n\t\t\t\tconst type = pkg.registryType;\n\t\t\t\tlet packages = packagesByType.get(type);\n\t\t\t\tif (!packages) {\n\t\t\t\t\tpackagesByType.set(type, packages = []);\n\t\t\t\t}\n\t\t\t\tpackages.push(pkg);\n\t\t\t}\n\n\t\t\tappend(container, $('.manifest-section', undefined, $('.manifest-section-title', undefined, localize('packages', \"Packages\"))));\n\n\t\t\tfor (const [packageType, packages] of packagesByType) {\n\t\t\t\tconst packageSection = append(container, $('.package-section', undefined, $('.package-section-title', undefined, packageType.toUpperCase())));\n\t\t\t\tconst packagesGrid = append(packageSection, $('.package-details'));\n\n\t\t\t\tfor (let i = 0; i < packages.length; i++) {\n\t\t\t\t\tconst pkg = packages[i];\n\t\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('packageName', \"Package:\")), $('.detail-value', undefined, pkg.identifier)));\n\t\t\t\t\tif (pkg.packageArguments && pkg.packageArguments.length > 0) {\n\t\t\t\t\t\tconst argStrings: string[] = [];\n\t\t\t\t\t\tfor (const arg of pkg.packageArguments) {\n\t\t\t\t\t\t\tif (arg.type === 'named') {\n\t\t\t\t\t\t\t\targStrings.push(arg.name);\n\t\t\t\t\t\t\t\tif (arg.value) {\n\t\t\t\t\t\t\t\t\targStrings.push(arg.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (arg.type === 'positional') {\n\t\t\t\t\t\t\t\tconst val = arg.value ?? arg.valueHint;\n\t\t\t\t\t\t\t\tif (val) {\n\t\t\t\t\t\t\t\t\targStrings.push(val);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('packagearguments', \"Package Arguments:\")), $('code.detail-value', undefined, argStrings.join(' '))));\n\t\t\t\t\t}\n\t\t\t\t\tif (pkg.runtimeArguments && pkg.runtimeArguments.length > 0) {\n\t\t\t\t\t\tconst argStrings: string[] = [];\n\t\t\t\t\t\tfor (const arg of pkg.runtimeArguments) {\n\t\t\t\t\t\t\tif (arg.type === 'named') {\n\t\t\t\t\t\t\t\targStrings.push(arg.name);\n\t\t\t\t\t\t\t\tif (arg.value) {\n\t\t\t\t\t\t\t\t\targStrings.push(arg.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (arg.type === 'positional') {\n\t\t\t\t\t\t\t\tconst val = arg.value ?? arg.valueHint;\n\t\t\t\t\t\t\t\tif (val) {\n\t\t\t\t\t\t\t\t\targStrings.push(val);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('runtimeargs', \"Runtime Arguments:\")), $('code.detail-value', undefined, argStrings.join(' '))));\n\t\t\t\t\t}\n\t\t\t\t\tif (pkg.environmentVariables && pkg.environmentVariables.length > 0) {\n\t\t\t\t\t\tconst envStrings = pkg.environmentVariables.map((envVar: IMcpServerKeyValueInput) => `${envVar.name}=${envVar.value ?? ''}`);\n\t\t\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('environmentVariables', \"Environment Variables:\")), $('code.detail-value', undefined, envStrings.join(' '))));\n\t\t\t\t\t}\n\t\t\t\t\tif (i < packages.length - 1) {\n\t\t\t\t\t\tappend(packagesGrid, $('.package-separator'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (manifest.remotes && manifest.remotes.length > 0) {\n\t\t\tconst packageSection = append(container, $('.package-section', undefined, $('.package-section-title', undefined, localize('remotes', \"Remote\").toLocaleUpperCase())));\n\t\t\tfor (const remote of manifest.remotes) {\n\t\t\t\tconst packagesGrid = append(packageSection, $('.package-details'));\n\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('url', \"URL:\")), $('.detail-value', undefined, remote.url)));\n\t\t\t\tif (remote.type) {\n\t\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('transport', \"Transport:\")), $('.detail-value', undefined, remote.type)));\n\t\t\t\t}\n\t\t\t\tif (remote.headers && remote.headers.length > 0) {\n\t\t\t\t\tconst headerStrings = remote.headers.map((header: IMcpServerKeyValueInput) => `${header.name}: ${header.value ?? ''}`);\n\t\t\t\t\tappend(packagesGrid, $('.package-detail', undefined, $('.detail-label', undefined, localize('headers', \"Headers:\")), $('.detail-value', undefined, headerStrings.join(', '))));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate renderAdditionalDetails(container: HTMLElement, extension: IWorkbenchMcpServer): void {\n\t\tconst content = $('div', { class: 'additional-details-content', tabindex: '0' });\n\t\tconst scrollableContent = new DomScrollableElement(content, {});\n\t\tconst layout = () => scrollableContent.scanDomNode();\n\t\tconst removeLayoutParticipant = arrays.insert(this.layoutParticipants, { layout });\n\t\tthis.contentDisposables.add(toDisposable(removeLayoutParticipant));\n\t\tthis.contentDisposables.add(scrollableContent);\n\n\t\tthis.contentDisposables.add(this.instantiationService.createInstance(AdditionalDetailsWidget, content, extension));\n\n\t\tappend(container, scrollableContent.getDomNode());\n\t\tscrollableContent.scanDomNode();\n\t}\n\n\tprivate loadContents<T>(loadingTask: () => CacheResult<T>, container: HTMLElement): Promise<T> {\n\t\tcontainer.classList.add('loading');\n\n\t\tconst result = this.contentDisposables.add(loadingTask());\n\t\tconst onDone = () => container.classList.remove('loading');\n\t\tresult.promise.then(onDone, onDone);\n\n\t\treturn result.promise;\n\t}\n\n\tlayout(dimension: Dimension): void {\n\t\tthis.dimension = dimension;\n\t\tthis.layoutParticipants.forEach(p => p.layout());\n\t}\n\n\tprivate onError(err: Error): void {\n\t\tif (isCancellationError(err)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.notificationService.error(err);\n\t}\n}\n\nclass AdditionalDetailsWidget extends Disposable {\n\n\tprivate readonly disposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tprivate readonly container: HTMLElement,\n\t\textension: IWorkbenchMcpServer,\n\t\t@IMcpGalleryManifestService private readonly mcpGalleryManifestService: IMcpGalleryManifestService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t) {\n\t\tsuper();\n\t\tthis.render(extension);\n\t\tthis._register(this.mcpGalleryManifestService.onDidChangeMcpGalleryManifest(() => this.render(extension)));\n\t}\n\n\tprivate render(extension: IWorkbenchMcpServer): void {\n\t\tthis.container.innerText = '';\n\t\tthis.disposables.clear();\n\n\t\tif (extension.local) {\n\t\t\tthis.renderInstallInfo(this.container, extension.local);\n\t\t}\n\n\t\tif (extension.gallery) {\n\t\t\tthis.renderMarketplaceInfo(this.container, extension);\n\t\t}\n\t\tthis.renderTags(this.container, extension);\n\t\tthis.renderExtensionResources(this.container, extension);\n\t}\n\n\tprivate renderTags(container: HTMLElement, extension: IWorkbenchMcpServer): void {\n\t\tif (extension.gallery?.topics?.length) {\n\t\t\tconst categoriesContainer = append(container, $('.categories-container.additional-details-element'));\n\t\t\tappend(categoriesContainer, $('.additional-details-title', undefined, localize('tags', \"Tags\")));\n\t\t\tconst categoriesElement = append(categoriesContainer, $('.categories'));\n\t\t\tfor (const category of extension.gallery.topics) {\n\t\t\t\tappend(categoriesElement, $('span.category', { tabindex: '0' }, category));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async renderExtensionResources(container: HTMLElement, extension: IWorkbenchMcpServer): Promise<void> {\n\t\tconst resources: [string, ThemeIcon, URI][] = [];\n\t\tconst manifest = await this.mcpGalleryManifestService.getMcpGalleryManifest();\n\t\tif (extension.repository) {\n\t\t\ttry {\n\t\t\t\tresources.push([localize('repository', \"Repository\"), ThemeIcon.fromId(Codicon.repo.id), URI.parse(extension.repository)]);\n\t\t\t} catch (error) {/* Ignore */ }\n\t\t}\n\t\tif (manifest) {\n\t\t\tconst supportUri = getMcpGalleryManifestResourceUri(manifest, McpGalleryResourceType.ContactSupportUri);\n\t\t\tif (supportUri) {\n\t\t\t\ttry {\n\t\t\t\t\tresources.push([localize('support', \"Contact Support\"), ThemeIcon.fromId(Codicon.commentDiscussion.id), URI.parse(supportUri)]);\n\t\t\t\t} catch (error) {/* Ignore */ }\n\t\t\t}\n\t\t}\n\t\tif (resources.length) {\n\t\t\tconst extensionResourcesContainer = append(container, $('.resources-container.additional-details-element'));\n\t\t\tappend(extensionResourcesContainer, $('.additional-details-title', undefined, localize('resources', \"Resources\")));\n\t\t\tconst resourcesElement = append(extensionResourcesContainer, $('.resources'));\n\t\t\tfor (const [label, icon, uri] of resources) {\n\t\t\t\tconst resourceElement = append(resourcesElement, $('.resource'));\n\t\t\t\tappend(resourceElement, $(ThemeIcon.asCSSSelector(icon)));\n\t\t\t\tappend(resourceElement, $('a', { tabindex: '0' }, label));\n\t\t\t\tthis.disposables.add(onClick(resourceElement, () => this.openerService.open(uri)));\n\t\t\t\tthis.disposables.add(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), resourceElement, uri.toString()));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate renderInstallInfo(container: HTMLElement, extension: ILocalMcpServer): void {\n\t\tconst installInfoContainer = append(container, $('.more-info-container.additional-details-element'));\n\t\tappend(installInfoContainer, $('.additional-details-title', undefined, localize('Install Info', \"Installation\")));\n\t\tconst installInfo = append(installInfoContainer, $('.more-info'));\n\t\tappend(installInfo,\n\t\t\t$('.more-info-entry', undefined,\n\t\t\t\t$('div.more-info-entry-name', undefined, localize('id', \"Identifier\")),\n\t\t\t\t$('code', undefined, extension.name)\n\t\t\t));\n\t\tif (extension.version) {\n\t\t\tappend(installInfo,\n\t\t\t\t$('.more-info-entry', undefined,\n\t\t\t\t\t$('div.more-info-entry-name', undefined, localize('Version', \"Version\")),\n\t\t\t\t\t$('code', undefined, extension.version)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate renderMarketplaceInfo(container: HTMLElement, extension: IWorkbenchMcpServer): void {\n\t\tconst gallery = extension.gallery;\n\t\tconst moreInfoContainer = append(container, $('.more-info-container.additional-details-element'));\n\t\tappend(moreInfoContainer, $('.additional-details-title', undefined, localize('Marketplace Info', \"Marketplace\")));\n\t\tconst moreInfo = append(moreInfoContainer, $('.more-info'));\n\t\tif (gallery) {\n\t\t\tif (!extension.local) {\n\t\t\t\tappend(moreInfo,\n\t\t\t\t\t$('.more-info-entry', undefined,\n\t\t\t\t\t\t$('div.more-info-entry-name', undefined, localize('id', \"Identifier\")),\n\t\t\t\t\t\t$('code', undefined, extension.name)\n\t\t\t\t\t));\n\t\t\t\tif (gallery.version) {\n\t\t\t\t\tappend(moreInfo,\n\t\t\t\t\t\t$('.more-info-entry', undefined,\n\t\t\t\t\t\t\t$('div.more-info-entry-name', undefined, localize('Version', \"Version\")),\n\t\t\t\t\t\t\t$('code', undefined, gallery.version)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (gallery.lastUpdated) {\n\t\t\t\tappend(moreInfo,\n\t\t\t\t\t$('.more-info-entry', undefined,\n\t\t\t\t\t\t$('div.more-info-entry-name', undefined, localize('last updated', \"Last Released\")),\n\t\t\t\t\t\t$('div', {\n\t\t\t\t\t\t\t'title': new Date(gallery.lastUpdated).toString()\n\t\t\t\t\t\t}, fromNow(gallery.lastUpdated, true, true, true))\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (gallery.publishDate) {\n\t\t\t\tappend(moreInfo,\n\t\t\t\t\t$('.more-info-entry', undefined,\n\t\t\t\t\t\t$('div.more-info-entry-name', undefined, localize('published', \"Published\")),\n\t\t\t\t\t\t$('div', {\n\t\t\t\t\t\t\t'title': new Date(gallery.publishDate).toString()\n\t\t\t\t\t\t}, fromNow(gallery.publishDate, true, true, true))\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n"]}