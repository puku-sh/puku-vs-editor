{"version":3,"sources":["vs/workbench/contrib/mcp/browser/mcp.contribution.ts"],"names":[],"mappings":"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","file":"mcp.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport * as jsonContributionRegistry from '../../../../platform/jsonschemas/common/jsonContributionRegistry.js';\nimport { mcpAccessConfig, McpAccessValue } from '../../../../platform/mcp/common/mcpManagement.js';\nimport { IQuickAccessRegistry, Extensions as QuickAccessExtensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { EditorPaneDescriptor, IEditorPaneRegistry } from '../../../browser/editor.js';\nimport { IConfigurationMigrationRegistry, Extensions as ConfigurationMigrationExtensions, ConfigurationKeyValuePairs } from '../../../common/configuration.js';\nimport { registerWorkbenchContribution2, WorkbenchPhase } from '../../../common/contributions.js';\nimport { EditorExtensions } from '../../../common/editor.js';\nimport { mcpSchemaId } from '../../../services/configuration/common/configuration.js';\nimport { ExtensionMcpDiscovery } from '../common/discovery/extensionMcpDiscovery.js';\nimport { InstalledMcpServersDiscovery } from '../common/discovery/installedMcpServersDiscovery.js';\nimport { mcpDiscoveryRegistry } from '../common/discovery/mcpDiscovery.js';\nimport { RemoteNativeMpcDiscovery } from '../common/discovery/nativeMcpRemoteDiscovery.js';\nimport { CursorWorkspaceMcpDiscoveryAdapter } from '../common/discovery/workspaceMcpDiscoveryAdapter.js';\nimport { McpCommandIds } from '../common/mcpCommandIds.js';\nimport { mcpServerSchema } from '../common/mcpConfiguration.js';\nimport { McpContextKeysController } from '../common/mcpContextKeys.js';\nimport { IMcpDevModeDebugging, McpDevModeDebugging } from '../common/mcpDevMode.js';\nimport { McpLanguageModelToolContribution } from '../common/mcpLanguageModelToolContribution.js';\nimport { McpRegistry } from '../common/mcpRegistry.js';\nimport { IMcpRegistry } from '../common/mcpRegistryTypes.js';\nimport { McpResourceFilesystem } from '../common/mcpResourceFilesystem.js';\nimport { McpSamplingService } from '../common/mcpSamplingService.js';\nimport { McpService } from '../common/mcpService.js';\nimport { IMcpElicitationService, IMcpSamplingService, IMcpService, IMcpWorkbenchService } from '../common/mcpTypes.js';\nimport { McpAddContextContribution } from './mcpAddContextContribution.js';\nimport { AddConfigurationAction, EditStoredInput, ListMcpServerCommand, McpBrowseCommand, McpBrowseResourcesCommand, McpConfigureSamplingModels, McpConfirmationServerOptionsCommand, MCPServerActionRendering, McpServerOptionsCommand, McpSkipCurrentAutostartCommand, McpStartPromptingServerCommand, OpenRemoteUserMcpResourceCommand, OpenUserMcpResourceCommand, OpenWorkspaceFolderMcpResourceCommand, OpenWorkspaceMcpResourceCommand, RemoveStoredInput, ResetMcpCachedTools, ResetMcpTrustCommand, RestartServer, ShowConfiguration, ShowInstalledMcpServersCommand, ShowOutput, StartServer, StopServer } from './mcpCommands.js';\nimport { McpDiscovery } from './mcpDiscovery.js';\nimport { McpElicitationService } from './mcpElicitationService.js';\nimport { McpLanguageFeatures } from './mcpLanguageFeatures.js';\nimport { McpConfigMigrationContribution } from './mcpMigration.js';\nimport { McpResourceQuickAccess } from './mcpResourceQuickAccess.js';\nimport { McpServerEditor } from './mcpServerEditor.js';\nimport { McpServerEditorInput } from './mcpServerEditorInput.js';\nimport { McpServersViewsContribution } from './mcpServersView.js';\nimport { MCPContextsInitialisation, McpWorkbenchService } from './mcpWorkbenchService.js';\n\nregisterSingleton(IMcpRegistry, McpRegistry, InstantiationType.Delayed);\nregisterSingleton(IMcpService, McpService, InstantiationType.Delayed);\nregisterSingleton(IMcpWorkbenchService, McpWorkbenchService, InstantiationType.Eager);\nregisterSingleton(IMcpDevModeDebugging, McpDevModeDebugging, InstantiationType.Delayed);\nregisterSingleton(IMcpSamplingService, McpSamplingService, InstantiationType.Delayed);\nregisterSingleton(IMcpElicitationService, McpElicitationService, InstantiationType.Delayed);\n\nmcpDiscoveryRegistry.register(new SyncDescriptor(RemoteNativeMpcDiscovery));\nmcpDiscoveryRegistry.register(new SyncDescriptor(InstalledMcpServersDiscovery));\nmcpDiscoveryRegistry.register(new SyncDescriptor(ExtensionMcpDiscovery));\nmcpDiscoveryRegistry.register(new SyncDescriptor(CursorWorkspaceMcpDiscoveryAdapter));\n\nregisterWorkbenchContribution2('mcpDiscovery', McpDiscovery, WorkbenchPhase.AfterRestored);\nregisterWorkbenchContribution2('mcpContextKeys', McpContextKeysController, WorkbenchPhase.BlockRestore);\nregisterWorkbenchContribution2('mcpLanguageFeatures', McpLanguageFeatures, WorkbenchPhase.Eventually);\nregisterWorkbenchContribution2('mcpResourceFilesystem', McpResourceFilesystem, WorkbenchPhase.BlockRestore);\nregisterWorkbenchContribution2(McpLanguageModelToolContribution.ID, McpLanguageModelToolContribution, WorkbenchPhase.AfterRestored);\n\nregisterAction2(ListMcpServerCommand);\nregisterAction2(McpServerOptionsCommand);\nregisterAction2(McpConfirmationServerOptionsCommand);\nregisterAction2(ResetMcpTrustCommand);\nregisterAction2(ResetMcpCachedTools);\nregisterAction2(AddConfigurationAction);\nregisterAction2(RemoveStoredInput);\nregisterAction2(EditStoredInput);\nregisterAction2(StartServer);\nregisterAction2(StopServer);\nregisterAction2(ShowOutput);\nregisterAction2(RestartServer);\nregisterAction2(ShowConfiguration);\nregisterAction2(McpBrowseCommand);\nregisterAction2(OpenUserMcpResourceCommand);\nregisterAction2(OpenRemoteUserMcpResourceCommand);\nregisterAction2(OpenWorkspaceMcpResourceCommand);\nregisterAction2(OpenWorkspaceFolderMcpResourceCommand);\nregisterAction2(ShowInstalledMcpServersCommand);\nregisterAction2(McpBrowseResourcesCommand);\nregisterAction2(McpConfigureSamplingModels);\nregisterAction2(McpStartPromptingServerCommand);\nregisterAction2(McpSkipCurrentAutostartCommand);\n\nregisterWorkbenchContribution2('mcpActionRendering', MCPServerActionRendering, WorkbenchPhase.BlockRestore);\nregisterWorkbenchContribution2('mcpAddContext', McpAddContextContribution, WorkbenchPhase.Eventually);\nregisterWorkbenchContribution2(MCPContextsInitialisation.ID, MCPContextsInitialisation, WorkbenchPhase.AfterRestored);\nregisterWorkbenchContribution2(McpConfigMigrationContribution.ID, McpConfigMigrationContribution, WorkbenchPhase.Eventually);\nregisterWorkbenchContribution2(McpServersViewsContribution.ID, McpServersViewsContribution, WorkbenchPhase.AfterRestored);\n\nconst jsonRegistry = <jsonContributionRegistry.IJSONContributionRegistry>Registry.as(jsonContributionRegistry.Extensions.JSONContribution);\njsonRegistry.registerSchema(mcpSchemaId, mcpServerSchema);\n\nRegistry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane).registerEditorPane(\n\tEditorPaneDescriptor.create(\n\t\tMcpServerEditor,\n\t\tMcpServerEditor.ID,\n\t\tlocalize('mcpServer', \"MCP Server\")\n\t),\n\t[\n\t\tnew SyncDescriptor(McpServerEditorInput)\n\t]);\n\nRegistry.as<IQuickAccessRegistry>(QuickAccessExtensions.Quickaccess).registerQuickAccessProvider({\n\tctor: McpResourceQuickAccess,\n\tprefix: McpResourceQuickAccess.PREFIX,\n\tplaceholder: localize('mcp.quickaccess.placeholder', \"Filter to an MCP resource\"),\n\thelpEntries: [{\n\t\tdescription: localize('mcp.quickaccess.add', \"MCP Server Resources\"),\n\t\tcommandId: McpCommandIds.AddConfiguration\n\t}]\n});\n\n\nRegistry.as<IConfigurationMigrationRegistry>(ConfigurationMigrationExtensions.ConfigurationMigration)\n\t.registerConfigurationMigrations([{\n\t\tkey: 'chat.mcp.enabled',\n\t\tmigrateFn: (value, accessor) => {\n\t\t\tconst result: ConfigurationKeyValuePairs = [['chat.mcp.enabled', { value: undefined }]];\n\t\t\tif (value === true) {\n\t\t\t\tresult.push([mcpAccessConfig, { value: McpAccessValue.All }]);\n\t\t\t}\n\t\t\tif (value === false) {\n\t\t\t\tresult.push([mcpAccessConfig, { value: McpAccessValue.None }]);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}]);\n"]}