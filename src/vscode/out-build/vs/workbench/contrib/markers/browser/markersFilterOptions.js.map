{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/markers/browser/markersFilterOptions.ts","vs/workbench/contrib/markers/browser/markersFilterOptions.ts"],"names":[],"mappings":"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","file":"markersFilterOptions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IFilter, matchesFuzzy, matchesFuzzy2 } from '../../../../base/common/filters.js';\nimport { IExpression, splitGlobAware, getEmptyExpression, ParsedExpression, parse } from '../../../../base/common/glob.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\n\nexport class ResourceGlobMatcher {\n\n\tprivate readonly globalExpression: ParsedExpression;\n\tprivate readonly expressionsByRoot: TernarySearchTree<URI, { root: URI; expression: ParsedExpression }>;\n\n\tconstructor(\n\t\tglobalExpression: IExpression,\n\t\trootExpressions: { root: URI; expression: IExpression }[],\n\t\turiIdentityService: IUriIdentityService\n\t) {\n\t\tthis.globalExpression = parse(globalExpression);\n\t\tthis.expressionsByRoot = TernarySearchTree.forUris<{ root: URI; expression: ParsedExpression }>(uri => uriIdentityService.extUri.ignorePathCasing(uri));\n\t\tfor (const expression of rootExpressions) {\n\t\t\tthis.expressionsByRoot.set(expression.root, { root: expression.root, expression: parse(expression.expression) });\n\t\t}\n\t}\n\n\tmatches(resource: URI): boolean {\n\t\tconst rootExpression = this.expressionsByRoot.findSubstr(resource);\n\t\tif (rootExpression) {\n\t\t\tconst path = relativePath(rootExpression.root, resource);\n\t\t\tif (path && !!rootExpression.expression(path)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn !!this.globalExpression(resource.path);\n\t}\n}\n\nexport class FilterOptions {\n\n\tstatic readonly _filter: IFilter = matchesFuzzy2;\n\tstatic readonly _messageFilter: IFilter = matchesFuzzy;\n\n\treadonly showWarnings: boolean = false;\n\treadonly showErrors: boolean = false;\n\treadonly showInfos: boolean = false;\n\treadonly textFilter: { readonly text: string; readonly negate: boolean };\n\treadonly excludesMatcher: ResourceGlobMatcher;\n\treadonly includesMatcher: ResourceGlobMatcher;\n\n\tstatic EMPTY(uriIdentityService: IUriIdentityService) { return new FilterOptions('', [], false, false, false, uriIdentityService); }\n\n\tconstructor(\n\t\treadonly filter: string,\n\t\tfilesExclude: { root: URI; expression: IExpression }[] | IExpression,\n\t\tshowWarnings: boolean,\n\t\tshowErrors: boolean,\n\t\tshowInfos: boolean,\n\t\turiIdentityService: IUriIdentityService\n\t) {\n\t\tfilter = filter.trim();\n\t\tthis.showWarnings = showWarnings;\n\t\tthis.showErrors = showErrors;\n\t\tthis.showInfos = showInfos;\n\n\t\tconst filesExcludeByRoot = Array.isArray(filesExclude) ? filesExclude : [];\n\t\tconst excludesExpression: IExpression = Array.isArray(filesExclude) ? getEmptyExpression() : filesExclude;\n\n\t\tfor (const { expression } of filesExcludeByRoot) {\n\t\t\tfor (const pattern of Object.keys(expression)) {\n\t\t\t\tif (!pattern.endsWith('/**')) {\n\t\t\t\t\t// Append `/**` to pattern to match a parent folder #103631\n\t\t\t\t\texpression[`${strings.rtrim(pattern, '/')}/**`] = expression[pattern];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst negate = filter.startsWith('!');\n\t\tthis.textFilter = { text: (negate ? strings.ltrim(filter, '!') : filter).trim(), negate };\n\t\tconst includeExpression: IExpression = getEmptyExpression();\n\n\t\tif (filter) {\n\t\t\tconst filters = splitGlobAware(filter, ',').map(s => s.trim()).filter(s => !!s.length);\n\t\t\tfor (const f of filters) {\n\t\t\t\tif (f.startsWith('!')) {\n\t\t\t\t\tconst filterText = strings.ltrim(f, '!');\n\t\t\t\t\tif (filterText) {\n\t\t\t\t\t\tthis.setPattern(excludesExpression, filterText);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.setPattern(includeExpression, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.excludesMatcher = new ResourceGlobMatcher(excludesExpression, filesExcludeByRoot, uriIdentityService);\n\t\tthis.includesMatcher = new ResourceGlobMatcher(includeExpression, [], uriIdentityService);\n\t}\n\n\tprivate setPattern(expression: IExpression, pattern: string) {\n\t\tif (pattern[0] === '.') {\n\t\t\tpattern = '*' + pattern; // convert \".js\" to \"*.js\"\n\t\t}\n\t\texpression[`**/${pattern}/**`] = true;\n\t\texpression[`**/${pattern}`] = true;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IFilter, matchesFuzzy, matchesFuzzy2 } from '../../../../base/common/filters.js';\nimport { IExpression, splitGlobAware, getEmptyExpression, ParsedExpression, parse } from '../../../../base/common/glob.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\n\nexport class ResourceGlobMatcher {\n\n\tprivate readonly globalExpression: ParsedExpression;\n\tprivate readonly expressionsByRoot: TernarySearchTree<URI, { root: URI; expression: ParsedExpression }>;\n\n\tconstructor(\n\t\tglobalExpression: IExpression,\n\t\trootExpressions: { root: URI; expression: IExpression }[],\n\t\turiIdentityService: IUriIdentityService\n\t) {\n\t\tthis.globalExpression = parse(globalExpression);\n\t\tthis.expressionsByRoot = TernarySearchTree.forUris<{ root: URI; expression: ParsedExpression }>(uri => uriIdentityService.extUri.ignorePathCasing(uri));\n\t\tfor (const expression of rootExpressions) {\n\t\t\tthis.expressionsByRoot.set(expression.root, { root: expression.root, expression: parse(expression.expression) });\n\t\t}\n\t}\n\n\tmatches(resource: URI): boolean {\n\t\tconst rootExpression = this.expressionsByRoot.findSubstr(resource);\n\t\tif (rootExpression) {\n\t\t\tconst path = relativePath(rootExpression.root, resource);\n\t\t\tif (path && !!rootExpression.expression(path)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn !!this.globalExpression(resource.path);\n\t}\n}\n\nexport class FilterOptions {\n\n\tstatic readonly _filter: IFilter = matchesFuzzy2;\n\tstatic readonly _messageFilter: IFilter = matchesFuzzy;\n\n\treadonly showWarnings: boolean = false;\n\treadonly showErrors: boolean = false;\n\treadonly showInfos: boolean = false;\n\treadonly textFilter: { readonly text: string; readonly negate: boolean };\n\treadonly excludesMatcher: ResourceGlobMatcher;\n\treadonly includesMatcher: ResourceGlobMatcher;\n\n\tstatic EMPTY(uriIdentityService: IUriIdentityService) { return new FilterOptions('', [], false, false, false, uriIdentityService); }\n\n\tconstructor(\n\t\treadonly filter: string,\n\t\tfilesExclude: { root: URI; expression: IExpression }[] | IExpression,\n\t\tshowWarnings: boolean,\n\t\tshowErrors: boolean,\n\t\tshowInfos: boolean,\n\t\turiIdentityService: IUriIdentityService\n\t) {\n\t\tfilter = filter.trim();\n\t\tthis.showWarnings = showWarnings;\n\t\tthis.showErrors = showErrors;\n\t\tthis.showInfos = showInfos;\n\n\t\tconst filesExcludeByRoot = Array.isArray(filesExclude) ? filesExclude : [];\n\t\tconst excludesExpression: IExpression = Array.isArray(filesExclude) ? getEmptyExpression() : filesExclude;\n\n\t\tfor (const { expression } of filesExcludeByRoot) {\n\t\t\tfor (const pattern of Object.keys(expression)) {\n\t\t\t\tif (!pattern.endsWith('/**')) {\n\t\t\t\t\t// Append `/**` to pattern to match a parent folder #103631\n\t\t\t\t\texpression[`${strings.rtrim(pattern, '/')}/**`] = expression[pattern];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst negate = filter.startsWith('!');\n\t\tthis.textFilter = { text: (negate ? strings.ltrim(filter, '!') : filter).trim(), negate };\n\t\tconst includeExpression: IExpression = getEmptyExpression();\n\n\t\tif (filter) {\n\t\t\tconst filters = splitGlobAware(filter, ',').map(s => s.trim()).filter(s => !!s.length);\n\t\t\tfor (const f of filters) {\n\t\t\t\tif (f.startsWith('!')) {\n\t\t\t\t\tconst filterText = strings.ltrim(f, '!');\n\t\t\t\t\tif (filterText) {\n\t\t\t\t\t\tthis.setPattern(excludesExpression, filterText);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.setPattern(includeExpression, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.excludesMatcher = new ResourceGlobMatcher(excludesExpression, filesExcludeByRoot, uriIdentityService);\n\t\tthis.includesMatcher = new ResourceGlobMatcher(includeExpression, [], uriIdentityService);\n\t}\n\n\tprivate setPattern(expression: IExpression, pattern: string) {\n\t\tif (pattern[0] === '.') {\n\t\t\tpattern = '*' + pattern; // convert \".js\" to \"*.js\"\n\t\t}\n\t\texpression[`**/${pattern}/**`] = true;\n\t\texpression[`**/${pattern}`] = true;\n\t}\n}\n"]}