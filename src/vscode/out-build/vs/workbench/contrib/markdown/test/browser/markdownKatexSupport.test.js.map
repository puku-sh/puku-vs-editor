{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/markdown/test/browser/markdownKatexSupport.test.ts","vs/workbench/contrib/markdown/test/browser/markdownKatexSupport.test.ts"],"names":[],"mappings":"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","file":"markdownKatexSupport.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { getWindow } from '../../../../../base/browser/dom.js';\nimport { basicMarkupHtmlTags, defaultAllowedAttrs } from '../../../../../base/browser/domSanitize.js';\nimport { renderMarkdown } from '../../../../../base/browser/markdownRenderer.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { assertSnapshot } from '../../../../../base/test/common/snapshot.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { MarkedKatexSupport } from '../../browser/markedKatexSupport.js';\n\n\nsuite('Markdown Katex Support Test', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tasync function renderMarkdownWithKatex(str: string) {\n\t\tconst katex = await MarkedKatexSupport.loadExtension(getWindow(document), {});\n\t\tconst rendered = store.add(renderMarkdown(new MarkdownString(str), {\n\t\t\tsanitizerConfig: MarkedKatexSupport.getSanitizerOptions({\n\t\t\t\tallowedTags: basicMarkupHtmlTags,\n\t\t\t\tallowedAttributes: defaultAllowedAttrs,\n\t\t\t}),\n\t\t\tmarkedExtensions: [katex],\n\t\t}));\n\t\treturn rendered;\n\t}\n\n\ttest('Basic inline equation', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('Hello $\\\\frac{1}{2}$ World!');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should support inline equation wrapped in parans', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('Hello ($\\\\frac{1}{2}$) World!');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should support blocks immediately after paragraph', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex([\n\t\t\t'Block example:',\n\t\t\t'$$',\n\t\t\t'\\\\int_{-\\\\infty}^{\\\\infty} e^{-x^2} dx = \\\\sqrt{\\\\pi}',\n\t\t\t'$$',\n\t\t].join('\\n'));\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should not render math when dollar sign is preceded by word character', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('for ($i = 1; $i -le 20; $i++) { echo \"hello world\"; Start-Sleep 1 }');\n\t\tassert.ok(!rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should not render math when dollar sign is followed by word character', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('The cost is $10dollars for this item');\n\t\tassert.ok(!rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should still render math with special characters around dollars', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('Hello ($\\\\frac{1}{2}$) and [$x^2$] work fine');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should still render math at start and end of line', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('$\\\\frac{1}{2}$ at start, and at end $x^2$');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should not render math when dollar signs appear in jQuery expressions', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('$.getJSON, $.ajax, $.get and $(\"#dialogDetalleZona\").dialog(...) / $(\"#dialogDetallePDC\").dialog(...)');\n\t\tassert.ok(!rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n});\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { getWindow } from '../../../../../base/browser/dom.js';\nimport { basicMarkupHtmlTags, defaultAllowedAttrs } from '../../../../../base/browser/domSanitize.js';\nimport { renderMarkdown } from '../../../../../base/browser/markdownRenderer.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { assertSnapshot } from '../../../../../base/test/common/snapshot.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { MarkedKatexSupport } from '../../browser/markedKatexSupport.js';\n\n\nsuite('Markdown Katex Support Test', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tasync function renderMarkdownWithKatex(str: string) {\n\t\tconst katex = await MarkedKatexSupport.loadExtension(getWindow(document), {});\n\t\tconst rendered = store.add(renderMarkdown(new MarkdownString(str), {\n\t\t\tsanitizerConfig: MarkedKatexSupport.getSanitizerOptions({\n\t\t\t\tallowedTags: basicMarkupHtmlTags,\n\t\t\t\tallowedAttributes: defaultAllowedAttrs,\n\t\t\t}),\n\t\t\tmarkedExtensions: [katex],\n\t\t}));\n\t\treturn rendered;\n\t}\n\n\ttest('Basic inline equation', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('Hello $\\\\frac{1}{2}$ World!');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should support inline equation wrapped in parans', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('Hello ($\\\\frac{1}{2}$) World!');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should support blocks immediately after paragraph', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex([\n\t\t\t'Block example:',\n\t\t\t'$$',\n\t\t\t'\\\\int_{-\\\\infty}^{\\\\infty} e^{-x^2} dx = \\\\sqrt{\\\\pi}',\n\t\t\t'$$',\n\t\t].join('\\n'));\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should not render math when dollar sign is preceded by word character', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('for ($i = 1; $i -le 20; $i++) { echo \"hello world\"; Start-Sleep 1 }');\n\t\tassert.ok(!rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should not render math when dollar sign is followed by word character', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('The cost is $10dollars for this item');\n\t\tassert.ok(!rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should still render math with special characters around dollars', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('Hello ($\\\\frac{1}{2}$) and [$x^2$] work fine');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should still render math at start and end of line', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('$\\\\frac{1}{2}$ at start, and at end $x^2$');\n\t\tassert.ok(rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n\n\ttest('Should not render math when dollar signs appear in jQuery expressions', async () => {\n\t\tconst rendered = await renderMarkdownWithKatex('$.getJSON, $.ajax, $.get and $(\"#dialogDetalleZona\").dialog(...) / $(\"#dialogDetallePDC\").dialog(...)');\n\t\tassert.ok(!rendered.element.innerHTML.includes('katex'));\n\t\tawait assertSnapshot(rendered.element.innerHTML);\n\t});\n});\n\n"]}