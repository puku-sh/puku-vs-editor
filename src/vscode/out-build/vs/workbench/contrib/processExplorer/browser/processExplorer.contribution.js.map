{"version":3,"sources":["vs/workbench/contrib/processExplorer/browser/processExplorer.contribution.ts"],"names":[],"mappings":"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","file":"processExplorer.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution, registerWorkbenchContribution2, WorkbenchPhase } from '../../../common/contributions.js';\nimport { IEditorSerializer, EditorExtensions, IEditorFactoryRegistry, GroupIdentifier } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IEditorResolverService, RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { ProcessExplorerEditorInput } from './processExplorerEditorInput.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { AUX_WINDOW_GROUP, IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IRectangle } from '../../../../platform/window/common/window.js';\nimport { IAuxiliaryWindowService } from '../../../services/auxiliaryWindow/browser/auxiliaryWindowService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { RemoteNameContext } from '../../../common/contextkeys.js';\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\n\n//#region --- process explorer\n\nclass ProcessExplorerEditorContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.processExplorerEditor';\n\n\tconstructor(\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService,\n\t\t@IInstantiationService instantiationService: IInstantiationService\n\t) {\n\t\teditorResolverService.registerEditor(\n\t\t\t`${ProcessExplorerEditorInput.RESOURCE.scheme}:**/**`,\n\t\t\t{\n\t\t\t\tid: ProcessExplorerEditorInput.ID,\n\t\t\t\tlabel: localize('promptOpenWith.processExplorer.displayName', \"Process Explorer\"),\n\t\t\t\tpriority: RegisteredEditorPriority.exclusive\n\t\t\t},\n\t\t\t{\n\t\t\t\tsinglePerResource: true,\n\t\t\t\tcanSupportResource: resource => resource.scheme === ProcessExplorerEditorInput.RESOURCE.scheme\n\t\t\t},\n\t\t\t{\n\t\t\t\tcreateEditorInput: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\teditor: instantiationService.createInstance(ProcessExplorerEditorInput),\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tpinned: true\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n}\n\nregisterWorkbenchContribution2(ProcessExplorerEditorContribution.ID, ProcessExplorerEditorContribution, WorkbenchPhase.BlockStartup);\n\nclass ProcessExplorerEditorInputSerializer implements IEditorSerializer {\n\n\tcanSerialize(editorInput: EditorInput): boolean {\n\t\treturn true;\n\t}\n\n\tserialize(editorInput: EditorInput): string {\n\t\treturn '';\n\t}\n\n\tdeserialize(instantiationService: IInstantiationService): EditorInput {\n\t\treturn ProcessExplorerEditorInput.instance;\n\t}\n}\n\nRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).registerEditorSerializer(ProcessExplorerEditorInput.ID, ProcessExplorerEditorInputSerializer);\n\n//#endregion\n\n//#region --- process explorer commands\n\nconst supported = ContextKeyExpr.or(IsWebContext.negate(), RemoteNameContext.notEqualsTo('')); // only on desktop or in web with a remote\n\ninterface IProcessExplorerWindowState {\n\treadonly bounds: Partial<IRectangle>;\n}\n\nclass OpenProcessExplorer extends Action2 {\n\n\tstatic readonly ID = 'workbench.action.openProcessExplorer';\n\n\tprivate static readonly STATE_KEY = 'workbench.processExplorerWindowState';\n\tprivate static readonly DEFAULT_STATE: IProcessExplorerWindowState = { bounds: { width: 800, height: 500 } };\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenProcessExplorer.ID,\n\t\t\ttitle: localize2('openProcessExplorer', 'Open Process Explorer'),\n\t\t\tcategory: Categories.Developer,\n\t\t\tprecondition: supported,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorGroupService = accessor.get(IEditorGroupsService);\n\t\tconst auxiliaryWindowService = accessor.get(IAuxiliaryWindowService);\n\t\tconst storageService = accessor.get(IStorageService);\n\n\t\tconst pane = await editorService.openEditor({\n\t\t\tresource: ProcessExplorerEditorInput.RESOURCE,\n\t\t\toptions: {\n\t\t\t\tpinned: true,\n\t\t\t\trevealIfOpened: true,\n\t\t\t\tauxiliary: {\n\t\t\t\t\t...this.loadState(storageService),\n\t\t\t\t\tcompact: true,\n\t\t\t\t\talwaysOnTop: true\n\t\t\t\t}\n\t\t\t}\n\t\t}, AUX_WINDOW_GROUP);\n\n\t\tif (pane) {\n\t\t\tconst listener = pane.input?.onWillDispose(() => {\n\t\t\t\tlistener?.dispose();\n\t\t\t\tthis.saveState(pane.group.id, storageService, editorGroupService, auxiliaryWindowService);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate loadState(storageService: IStorageService): IProcessExplorerWindowState {\n\t\tconst stateRaw = storageService.get(OpenProcessExplorer.STATE_KEY, StorageScope.APPLICATION);\n\t\tif (!stateRaw) {\n\t\t\treturn OpenProcessExplorer.DEFAULT_STATE;\n\t\t}\n\n\t\ttry {\n\t\t\treturn JSON.parse(stateRaw);\n\t\t} catch {\n\t\t\treturn OpenProcessExplorer.DEFAULT_STATE;\n\t\t}\n\t}\n\n\tprivate saveState(group: GroupIdentifier, storageService: IStorageService, editorGroupService: IEditorGroupsService, auxiliaryWindowService: IAuxiliaryWindowService): void {\n\t\tconst auxiliaryWindow = auxiliaryWindowService.getWindow(editorGroupService.getPart(group).windowId);\n\t\tif (!auxiliaryWindow) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst bounds = auxiliaryWindow.createState().bounds;\n\t\tif (!bounds) {\n\t\t\treturn;\n\t\t}\n\n\t\tstorageService.store(OpenProcessExplorer.STATE_KEY, JSON.stringify({ bounds }), StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t}\n}\n\nregisterAction2(OpenProcessExplorer);\n\nMenuRegistry.appendMenuItem(MenuId.MenubarHelpMenu, {\n\tgroup: '5_tools',\n\tcommand: {\n\t\tid: OpenProcessExplorer.ID,\n\t\ttitle: localize({ key: 'miOpenProcessExplorerer', comment: ['&& denotes a mnemonic'] }, \"Open &&Process Explorer\")\n\t},\n\twhen: supported,\n\torder: 2\n});\n\n//#endregion\n"]}