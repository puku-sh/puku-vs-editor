{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/webview/browser/themeing.ts","vs/workbench/contrib/webview/browser/themeing.ts"],"names":[],"mappings":"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","file":"themeing.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DEFAULT_FONT_FAMILY } from '../../../../base/browser/fonts.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IEditorOptions, EditorFontLigatures } from '../../../../editor/common/config/editorOptions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../../editor/common/config/fontInfo.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport * as colorRegistry from '../../../../platform/theme/common/colorRegistry.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nimport { IWorkbenchColorTheme, IWorkbenchThemeService } from '../../../services/themes/common/workbenchThemeService.js';\nimport { WebviewStyles } from './webview.js';\n\ninterface WebviewThemeData {\n\treadonly activeTheme: string;\n\treadonly themeLabel: string;\n\treadonly themeId: string;\n\treadonly styles: Readonly<WebviewStyles>;\n}\n\nexport class WebviewThemeDataProvider extends Disposable {\n\n\tprivate _cachedWebViewThemeData: WebviewThemeData | undefined = undefined;\n\n\tprivate readonly _onThemeDataChanged = this._register(new Emitter<void>());\n\tpublic readonly onThemeDataChanged = this._onThemeDataChanged.event;\n\n\tconstructor(\n\t\t@IWorkbenchThemeService private readonly _themeService: IWorkbenchThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => {\n\t\t\tthis._reset();\n\t\t}));\n\n\t\tconst webviewConfigurationKeys = ['editor.fontFamily', 'editor.fontWeight', 'editor.fontSize', 'editor.fontLigatures', 'accessibility.underlineLinks'];\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (webviewConfigurationKeys.some(key => e.affectsConfiguration(key))) {\n\t\t\t\tthis._reset();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getTheme(): IWorkbenchColorTheme {\n\t\treturn this._themeService.getColorTheme();\n\t}\n\n\tpublic getWebviewThemeData(): WebviewThemeData {\n\t\tif (!this._cachedWebViewThemeData) {\n\t\t\tconst configuration = this._configurationService.getValue<IEditorOptions>('editor');\n\t\t\tconst editorFontFamily = configuration.fontFamily || EDITOR_FONT_DEFAULTS.fontFamily;\n\t\t\tconst editorFontWeight = configuration.fontWeight || EDITOR_FONT_DEFAULTS.fontWeight;\n\t\t\tconst editorFontSize = configuration.fontSize || EDITOR_FONT_DEFAULTS.fontSize;\n\t\t\tconst editorFontLigatures = new EditorFontLigatures().validate(configuration.fontLigatures);\n\t\t\tconst linkUnderlines = this._configurationService.getValue('accessibility.underlineLinks');\n\n\t\t\tconst theme = this._themeService.getColorTheme();\n\t\t\tconst exportedColors = colorRegistry.getColorRegistry().getColors().reduce<Record<string, string>>((colors, entry) => {\n\t\t\t\tconst color = theme.getColor(entry.id);\n\t\t\t\tif (color) {\n\t\t\t\t\tcolors['vscode-' + entry.id.replace('.', '-')] = color.toString();\n\t\t\t\t}\n\t\t\t\treturn colors;\n\t\t\t}, {});\n\n\t\t\tconst styles = {\n\t\t\t\t'vscode-font-family': DEFAULT_FONT_FAMILY,\n\t\t\t\t'vscode-font-weight': 'normal',\n\t\t\t\t'vscode-font-size': '13px',\n\t\t\t\t'vscode-editor-font-family': editorFontFamily,\n\t\t\t\t'vscode-editor-font-weight': editorFontWeight,\n\t\t\t\t'vscode-editor-font-size': editorFontSize + 'px',\n\t\t\t\t'text-link-decoration': linkUnderlines ? 'underline' : 'none',\n\t\t\t\t...exportedColors,\n\t\t\t\t'vscode-editor-font-feature-settings': editorFontLigatures,\n\t\t\t};\n\n\t\t\tconst activeTheme = ApiThemeClassName.fromTheme(theme);\n\t\t\tthis._cachedWebViewThemeData = { styles, activeTheme, themeLabel: theme.label, themeId: theme.settingsId };\n\t\t}\n\n\t\treturn this._cachedWebViewThemeData;\n\t}\n\n\tprivate _reset() {\n\t\tthis._cachedWebViewThemeData = undefined;\n\t\tthis._onThemeDataChanged.fire();\n\t}\n}\n\nenum ApiThemeClassName {\n\tlight = 'vscode-light',\n\tdark = 'vscode-dark',\n\thighContrast = 'vscode-high-contrast',\n\thighContrastLight = 'vscode-high-contrast-light',\n}\n\nnamespace ApiThemeClassName {\n\texport function fromTheme(theme: IWorkbenchColorTheme): ApiThemeClassName {\n\t\tswitch (theme.type) {\n\t\t\tcase ColorScheme.LIGHT: return ApiThemeClassName.light;\n\t\t\tcase ColorScheme.DARK: return ApiThemeClassName.dark;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_DARK: return ApiThemeClassName.highContrast;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_LIGHT: return ApiThemeClassName.highContrastLight;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DEFAULT_FONT_FAMILY } from '../../../../base/browser/fonts.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IEditorOptions, EditorFontLigatures } from '../../../../editor/common/config/editorOptions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../../editor/common/config/fontInfo.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport * as colorRegistry from '../../../../platform/theme/common/colorRegistry.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nimport { IWorkbenchColorTheme, IWorkbenchThemeService } from '../../../services/themes/common/workbenchThemeService.js';\nimport { WebviewStyles } from './webview.js';\n\ninterface WebviewThemeData {\n\treadonly activeTheme: string;\n\treadonly themeLabel: string;\n\treadonly themeId: string;\n\treadonly styles: Readonly<WebviewStyles>;\n}\n\nexport class WebviewThemeDataProvider extends Disposable {\n\n\tprivate _cachedWebViewThemeData: WebviewThemeData | undefined = undefined;\n\n\tprivate readonly _onThemeDataChanged = this._register(new Emitter<void>());\n\tpublic readonly onThemeDataChanged = this._onThemeDataChanged.event;\n\n\tconstructor(\n\t\t@IWorkbenchThemeService private readonly _themeService: IWorkbenchThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => {\n\t\t\tthis._reset();\n\t\t}));\n\n\t\tconst webviewConfigurationKeys = ['editor.fontFamily', 'editor.fontWeight', 'editor.fontSize', 'editor.fontLigatures', 'accessibility.underlineLinks'];\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (webviewConfigurationKeys.some(key => e.affectsConfiguration(key))) {\n\t\t\t\tthis._reset();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getTheme(): IWorkbenchColorTheme {\n\t\treturn this._themeService.getColorTheme();\n\t}\n\n\tpublic getWebviewThemeData(): WebviewThemeData {\n\t\tif (!this._cachedWebViewThemeData) {\n\t\t\tconst configuration = this._configurationService.getValue<IEditorOptions>('editor');\n\t\t\tconst editorFontFamily = configuration.fontFamily || EDITOR_FONT_DEFAULTS.fontFamily;\n\t\t\tconst editorFontWeight = configuration.fontWeight || EDITOR_FONT_DEFAULTS.fontWeight;\n\t\t\tconst editorFontSize = configuration.fontSize || EDITOR_FONT_DEFAULTS.fontSize;\n\t\t\tconst editorFontLigatures = new EditorFontLigatures().validate(configuration.fontLigatures);\n\t\t\tconst linkUnderlines = this._configurationService.getValue('accessibility.underlineLinks');\n\n\t\t\tconst theme = this._themeService.getColorTheme();\n\t\t\tconst exportedColors = colorRegistry.getColorRegistry().getColors().reduce<Record<string, string>>((colors, entry) => {\n\t\t\t\tconst color = theme.getColor(entry.id);\n\t\t\t\tif (color) {\n\t\t\t\t\tcolors['vscode-' + entry.id.replace('.', '-')] = color.toString();\n\t\t\t\t}\n\t\t\t\treturn colors;\n\t\t\t}, {});\n\n\t\t\tconst styles = {\n\t\t\t\t'vscode-font-family': DEFAULT_FONT_FAMILY,\n\t\t\t\t'vscode-font-weight': 'normal',\n\t\t\t\t'vscode-font-size': '13px',\n\t\t\t\t'vscode-editor-font-family': editorFontFamily,\n\t\t\t\t'vscode-editor-font-weight': editorFontWeight,\n\t\t\t\t'vscode-editor-font-size': editorFontSize + 'px',\n\t\t\t\t'text-link-decoration': linkUnderlines ? 'underline' : 'none',\n\t\t\t\t...exportedColors,\n\t\t\t\t'vscode-editor-font-feature-settings': editorFontLigatures,\n\t\t\t};\n\n\t\t\tconst activeTheme = ApiThemeClassName.fromTheme(theme);\n\t\t\tthis._cachedWebViewThemeData = { styles, activeTheme, themeLabel: theme.label, themeId: theme.settingsId };\n\t\t}\n\n\t\treturn this._cachedWebViewThemeData;\n\t}\n\n\tprivate _reset() {\n\t\tthis._cachedWebViewThemeData = undefined;\n\t\tthis._onThemeDataChanged.fire();\n\t}\n}\n\nenum ApiThemeClassName {\n\tlight = 'vscode-light',\n\tdark = 'vscode-dark',\n\thighContrast = 'vscode-high-contrast',\n\thighContrastLight = 'vscode-high-contrast-light',\n}\n\nnamespace ApiThemeClassName {\n\texport function fromTheme(theme: IWorkbenchColorTheme): ApiThemeClassName {\n\t\tswitch (theme.type) {\n\t\t\tcase ColorScheme.LIGHT: return ApiThemeClassName.light;\n\t\t\tcase ColorScheme.DARK: return ApiThemeClassName.dark;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_DARK: return ApiThemeClassName.highContrast;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_LIGHT: return ApiThemeClassName.highContrastLight;\n\t\t}\n\t}\n}\n"]}