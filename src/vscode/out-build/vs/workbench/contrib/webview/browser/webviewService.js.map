{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/webview/browser/webviewService.ts","vs/workbench/contrib/webview/browser/webviewService.ts"],"names":[],"mappings":"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","file":"webviewService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { WebviewThemeDataProvider } from './themeing.js';\nimport { IOverlayWebview, IWebview, IWebviewElement, IWebviewService, WebviewInitInfo } from './webview.js';\nimport { WebviewElement } from './webviewElement.js';\nimport { OverlayWebview } from './overlayWebview.js';\n\nexport class WebviewService extends Disposable implements IWebviewService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprotected readonly _webviewThemeDataProvider: WebviewThemeDataProvider;\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tthis._webviewThemeDataProvider = this._instantiationService.createInstance(WebviewThemeDataProvider);\n\t}\n\n\tprivate _activeWebview?: IWebview;\n\n\tpublic get activeWebview() { return this._activeWebview; }\n\n\tprivate _updateActiveWebview(value: IWebview | undefined) {\n\t\tif (value !== this._activeWebview) {\n\t\t\tthis._activeWebview = value;\n\t\t\tthis._onDidChangeActiveWebview.fire(value);\n\t\t}\n\t}\n\n\tprivate _webviews = new Set<IWebview>();\n\n\tpublic get webviews(): Iterable<IWebview> {\n\t\treturn this._webviews.values();\n\t}\n\n\tprivate readonly _onDidChangeActiveWebview = this._register(new Emitter<IWebview | undefined>());\n\tpublic readonly onDidChangeActiveWebview = this._onDidChangeActiveWebview.event;\n\n\tcreateWebviewElement(initInfo: WebviewInitInfo): IWebviewElement {\n\t\tconst webview = this._instantiationService.createInstance(WebviewElement, initInfo, this._webviewThemeDataProvider);\n\t\tthis.registerNewWebview(webview);\n\t\treturn webview;\n\t}\n\n\tcreateWebviewOverlay(initInfo: WebviewInitInfo): IOverlayWebview {\n\t\tconst webview = this._instantiationService.createInstance(OverlayWebview, initInfo);\n\t\tthis.registerNewWebview(webview);\n\t\treturn webview;\n\t}\n\n\tprotected registerNewWebview(webview: IWebview) {\n\t\tthis._webviews.add(webview);\n\n\t\tconst store = new DisposableStore();\n\n\t\tstore.add(webview.onDidFocus(() => {\n\t\t\tthis._updateActiveWebview(webview);\n\t\t}));\n\n\t\tconst onBlur = () => {\n\t\t\tif (this._activeWebview === webview) {\n\t\t\t\tthis._updateActiveWebview(undefined);\n\t\t\t}\n\t\t};\n\n\t\tstore.add(webview.onDidBlur(onBlur));\n\t\tstore.add(webview.onDidDispose(() => {\n\t\t\tonBlur();\n\t\t\tstore.dispose();\n\t\t\tthis._webviews.delete(webview);\n\t\t}));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { WebviewThemeDataProvider } from './themeing.js';\nimport { IOverlayWebview, IWebview, IWebviewElement, IWebviewService, WebviewInitInfo } from './webview.js';\nimport { WebviewElement } from './webviewElement.js';\nimport { OverlayWebview } from './overlayWebview.js';\n\nexport class WebviewService extends Disposable implements IWebviewService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprotected readonly _webviewThemeDataProvider: WebviewThemeDataProvider;\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\t\tthis._webviewThemeDataProvider = this._instantiationService.createInstance(WebviewThemeDataProvider);\n\t}\n\n\tprivate _activeWebview?: IWebview;\n\n\tpublic get activeWebview() { return this._activeWebview; }\n\n\tprivate _updateActiveWebview(value: IWebview | undefined) {\n\t\tif (value !== this._activeWebview) {\n\t\t\tthis._activeWebview = value;\n\t\t\tthis._onDidChangeActiveWebview.fire(value);\n\t\t}\n\t}\n\n\tprivate _webviews = new Set<IWebview>();\n\n\tpublic get webviews(): Iterable<IWebview> {\n\t\treturn this._webviews.values();\n\t}\n\n\tprivate readonly _onDidChangeActiveWebview = this._register(new Emitter<IWebview | undefined>());\n\tpublic readonly onDidChangeActiveWebview = this._onDidChangeActiveWebview.event;\n\n\tcreateWebviewElement(initInfo: WebviewInitInfo): IWebviewElement {\n\t\tconst webview = this._instantiationService.createInstance(WebviewElement, initInfo, this._webviewThemeDataProvider);\n\t\tthis.registerNewWebview(webview);\n\t\treturn webview;\n\t}\n\n\tcreateWebviewOverlay(initInfo: WebviewInitInfo): IOverlayWebview {\n\t\tconst webview = this._instantiationService.createInstance(OverlayWebview, initInfo);\n\t\tthis.registerNewWebview(webview);\n\t\treturn webview;\n\t}\n\n\tprotected registerNewWebview(webview: IWebview) {\n\t\tthis._webviews.add(webview);\n\n\t\tconst store = new DisposableStore();\n\n\t\tstore.add(webview.onDidFocus(() => {\n\t\t\tthis._updateActiveWebview(webview);\n\t\t}));\n\n\t\tconst onBlur = () => {\n\t\t\tif (this._activeWebview === webview) {\n\t\t\t\tthis._updateActiveWebview(undefined);\n\t\t\t}\n\t\t};\n\n\t\tstore.add(webview.onDidBlur(onBlur));\n\t\tstore.add(webview.onDidDispose(() => {\n\t\t\tonBlur();\n\t\t\tstore.dispose();\n\t\t\tthis._webviews.delete(webview);\n\t\t}));\n\t}\n}\n"]}