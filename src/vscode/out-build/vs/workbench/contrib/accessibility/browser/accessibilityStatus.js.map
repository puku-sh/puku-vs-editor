{"version":3,"sources":["vs/workbench/contrib/accessibility/browser/accessibilityStatus.ts"],"names":[],"mappings":"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","file":"accessibilityStatus.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Event } from '../../../../base/common/event.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { localize } from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { INotificationHandle, INotificationService, NotificationPriority } from '../../../../platform/notification/common/notification.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IStatusbarEntryAccessor, IStatusbarService, StatusbarAlignment } from '../../../services/statusbar/browser/statusbar.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\n\nexport class AccessibilityStatus extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.accessibilityStatus';\n\n\tprivate screenReaderNotification: INotificationHandle | null = null;\n\tprivate promptedScreenReader: boolean = false;\n\tprivate readonly screenReaderModeElement = this._register(new MutableDisposable<IStatusbarEntryAccessor>());\n\n\tconstructor(\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(CommandsRegistry.registerCommand({ id: 'showEditorScreenReaderNotification', handler: () => this.showScreenReaderNotification() }));\n\n\t\tthis.updateScreenReaderModeElement(this.accessibilityService.isScreenReaderOptimized());\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.accessibilityService.onDidChangeScreenReaderOptimized(() => this.onScreenReaderModeChange()));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(c => {\n\t\t\tif (c.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\t\tthis.onScreenReaderModeChange();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate showScreenReaderNotification(): void {\n\t\tthis.screenReaderNotification = this.notificationService.prompt(\n\t\t\tSeverity.Info,\n\t\t\tlocalize('screenReaderDetectedExplanation.question', \"Screen reader usage detected. Do you want to enable {0} to optimize the editor for screen reader usage?\", 'editor.accessibilitySupport'),\n\t\t\t[{\n\t\t\t\tlabel: localize('screenReaderDetectedExplanation.answerYes', \"Yes\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis.configurationService.updateValue('editor.accessibilitySupport', 'on', ConfigurationTarget.USER);\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tlabel: localize('screenReaderDetectedExplanation.answerNo', \"No\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis.configurationService.updateValue('editor.accessibilitySupport', 'off', ConfigurationTarget.USER);\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: localize('screenReaderDetectedExplanation.answerLearnMore', \"Learn More\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis.openerService.open('https://code.visualstudio.com/docs/editor/accessibility#_screen-readers');\n\t\t\t\t}\n\t\t\t}],\n\t\t\t{\n\t\t\t\tsticky: true,\n\t\t\t\tpriority: NotificationPriority.URGENT\n\t\t\t}\n\t\t);\n\n\t\tEvent.once(this.screenReaderNotification.onDidClose)(() => this.screenReaderNotification = null);\n\t}\n\tprivate updateScreenReaderModeElement(visible: boolean): void {\n\t\tif (visible) {\n\t\t\tif (!this.screenReaderModeElement.value) {\n\t\t\t\tconst text = localize('screenReaderDetected', \"Screen Reader Optimized\");\n\t\t\t\tthis.screenReaderModeElement.value = this.statusbarService.addEntry({\n\t\t\t\t\tname: localize('status.editor.screenReaderMode', \"Screen Reader Mode\"),\n\t\t\t\t\ttext,\n\t\t\t\t\tariaLabel: text,\n\t\t\t\t\tcommand: 'showEditorScreenReaderNotification',\n\t\t\t\t\tkind: 'prominent',\n\t\t\t\t\tshowInAllWindows: true\n\t\t\t\t}, 'status.editor.screenReaderMode', StatusbarAlignment.RIGHT, 100.6);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.screenReaderModeElement.clear();\n\t\t}\n\t}\n\n\tprivate onScreenReaderModeChange(): void {\n\n\t\t// We only support text based editors\n\t\tconst screenReaderDetected = this.accessibilityService.isScreenReaderOptimized();\n\t\tif (screenReaderDetected) {\n\t\t\tconst screenReaderConfiguration = this.configurationService.getValue('editor.accessibilitySupport');\n\t\t\tif (screenReaderConfiguration === 'auto') {\n\t\t\t\tif (!this.promptedScreenReader) {\n\t\t\t\t\tthis.promptedScreenReader = true;\n\t\t\t\t\tsetTimeout(() => this.showScreenReaderNotification(), 100);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.screenReaderNotification) {\n\t\t\tthis.screenReaderNotification.close();\n\t\t}\n\t\tthis.updateScreenReaderModeElement(this.accessibilityService.isScreenReaderOptimized());\n\t}\n}\n"]}