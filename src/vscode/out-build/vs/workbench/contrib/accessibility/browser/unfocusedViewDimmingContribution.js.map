{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/accessibility/browser/unfocusedViewDimmingContribution.ts","vs/workbench/contrib/accessibility/browser/unfocusedViewDimmingContribution.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,gBAAgB,EAAE,MAAM,4CAA4C,CAAC;AAC9E,OAAO,EAAE,KAAK,EAAE,MAAM,kCAAkC,CAAC;AACzD,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,YAAY,EAAE,MAAM,sCAAsC,CAAC;AACjG,OAAO,EAAE,KAAK,EAAE,MAAM,oCAAoC,CAAC;AAC3D,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AAI5F,IAAM,gCAAgC,GAAtC,MAAM,gCAAiC,SAAQ,UAAU;IAI/D,YACwB,oBAA2C;QAElE,KAAK,EAAE,CAAC;QALD,6BAAwB,GAAgC,SAAS,CAAC;QAOzE,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC,CAAC,CAAC;QAE/D,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,eAAe,CAAC,oBAAoB,CAAC,wBAAwB,EAAE,CAAC,CAAC,EAAE;YACvF,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,oBAAoB,gGAAqD,IAAI,CAAC,CAAC,CAAC,oBAAoB,gGAAqD,EAAE,CAAC;gBACvK,OAAO;YACR,CAAC;YAED,IAAI,cAAc,GAAG,EAAE,CAAC;YAExB,MAAM,OAAO,GAAG,aAAa,CAAC,oBAAoB,CAAC,QAAQ,gGAAqD,EAAE,KAAK,CAAC,CAAC;YACzH,IAAI,OAAO,EAAE,CAAC;gBACb,MAAM,OAAO,GAAG,KAAK,CACpB,YAAY,CAAC,oBAAoB,CAAC,QAAQ,gGAAqD,uDAA4C,yGAG3I,CAAC;gBAEF,IAAI,OAAO,KAAK,CAAC,EAAE,CAAC;oBACnB,4EAA4E;oBAC5E,gFAAgF;oBAChF,MAAM,KAAK,GAAG,IAAI,GAAG,EAAU,CAAC;oBAChC,MAAM,UAAU,GAAG,mBAAmB,OAAO,IAAI,CAAC;oBAClD,gBAAgB;oBAChB,KAAK,CAAC,GAAG,CAAC,yFAAyF,UAAU,IAAI,CAAC,CAAC;oBACnH,YAAY;oBACZ,KAAK,CAAC,GAAG,CAAC,2FAA2F,UAAU,IAAI,CAAC,CAAC;oBACrH,eAAe;oBACf,KAAK,CAAC,GAAG,CAAC,0EAA0E,UAAU,IAAI,CAAC,CAAC;oBACpG,cAAc;oBACd,KAAK,CAAC,GAAG,CAAC,mFAAmF,UAAU,IAAI,CAAC,CAAC;oBAC7G,mBAAmB;oBACnB,KAAK,CAAC,GAAG,CAAC,6EAA6E,UAAU,IAAI,CAAC,CAAC;oBACvG,kBAAkB;oBAClB,KAAK,CAAC,GAAG,CAAC,4EAA4E,UAAU,IAAI,CAAC,CAAC;oBACtG,qBAAqB;oBACrB,KAAK,CAAC,GAAG,CAAC,+EAA+E,UAAU,IAAI,CAAC,CAAC;oBACzG,kCAAkC;oBAClC,KAAK,CAAC,GAAG,CAAC,2FAA2F,UAAU,IAAI,CAAC,CAAC;oBACrH,iBAAiB;oBACjB,KAAK,CAAC,GAAG,CAAC,oFAAoF,UAAU,IAAI,CAAC,CAAC;oBAC9G,cAAc,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACxC,CAAC;YAEF,CAAC;YAED,IAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACjC,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC5B,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,gBAAgB,EAAE,CAAC,WAAW,GAAG,cAAc,CAAC;YACtD,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,gBAAgB;QACvB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;YACzB,IAAI,CAAC,wBAAwB,GAAG,IAAI,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,SAAS,EAAE,SAAS,EAAE,IAAI,CAAC,wBAAwB,CAAC,CAAC;YAC3F,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,mCAAmC,CAAC;QACpE,CAAC;QACD,OAAO,IAAI,CAAC,aAAa,CAAC;IAC3B,CAAC;IAEO,mBAAmB;QAC1B,IAAI,CAAC,wBAAwB,EAAE,OAAO,EAAE,CAAC;QACzC,IAAI,CAAC,wBAAwB,GAAG,SAAS,CAAC;QAC1C,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;IAChC,CAAC;CACD,CAAA;AA5EY,gCAAgC;IAK1C,WAAA,qBAAqB,CAAA;GALX,gCAAgC,CA4E5C;;AAGD,SAAS,aAAa,CAAC,KAAc,EAAE,YAAqB;IAC3D,OAAO,OAAO,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC;AAC1D,CAAC;AAED,SAAS,YAAY,CAAC,KAAc,EAAE,YAAoB;IACzD,OAAO,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC;AACzD,CAAC","file":"unfocusedViewDimmingContribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createStyleSheet } from '../../../../base/browser/domStylesheets.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { AccessibilityWorkbenchSettingId, ViewDimUnfocusedOpacityProperties } from './accessibilityConfiguration.js';\n\nexport class UnfocusedViewDimmingContribution extends Disposable implements IWorkbenchContribution {\n\tprivate _styleElement?: HTMLStyleElement;\n\tprivate _styleElementDisposables: DisposableStore | undefined = undefined;\n\n\tconstructor(\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._removeStyleElement()));\n\n\t\tthis._register(Event.runAndSubscribe(configurationService.onDidChangeConfiguration, e => {\n\t\t\tif (e && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled) && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet cssTextContent = '';\n\n\t\t\tconst enabled = ensureBoolean(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled), false);\n\t\t\tif (enabled) {\n\t\t\t\tconst opacity = clamp(\n\t\t\t\t\tensureNumber(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity), ViewDimUnfocusedOpacityProperties.Default),\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Minimum,\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Maximum\n\t\t\t\t);\n\n\t\t\t\tif (opacity !== 1) {\n\t\t\t\t\t// These filter rules are more specific than may be expected as the `filter`\n\t\t\t\t\t// rule can cause problems if it's used inside the element like on editor hovers\n\t\t\t\t\tconst rules = new Set<string>();\n\t\t\t\t\tconst filterRule = `filter: opacity(${opacity});`;\n\t\t\t\t\t// Terminal tabs\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal:not(:focus-within) .tabs-container { ${filterRule} }`);\n\t\t\t\t\t// Terminals\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal .terminal-wrapper:not(:focus-within) { ${filterRule} }`);\n\t\t\t\t\t// Text editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor { ${filterRule} }`);\n\t\t\t\t\t// Breadcrumbs\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .breadcrumbs-below-tabs { ${filterRule} }`);\n\t\t\t\t\t// Terminal editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .terminal-wrapper { ${filterRule} }`);\n\t\t\t\t\t// Settings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .settings-editor { ${filterRule} }`);\n\t\t\t\t\t// Keybindings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .keybindings-editor { ${filterRule} }`);\n\t\t\t\t\t// Editor placeholder (error case)\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor-pane-placeholder { ${filterRule} }`);\n\t\t\t\t\t// Welcome editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .gettingStartedContainer { ${filterRule} }`);\n\t\t\t\t\tcssTextContent = [...rules].join('\\n');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (cssTextContent.length === 0) {\n\t\t\t\tthis._removeStyleElement();\n\t\t\t} else {\n\t\t\t\tthis._getStyleElement().textContent = cssTextContent;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _getStyleElement(): HTMLStyleElement {\n\t\tif (!this._styleElement) {\n\t\t\tthis._styleElementDisposables = new DisposableStore();\n\t\t\tthis._styleElement = createStyleSheet(undefined, undefined, this._styleElementDisposables);\n\t\t\tthis._styleElement.className = 'accessibilityUnfocusedViewOpacity';\n\t\t}\n\t\treturn this._styleElement;\n\t}\n\n\tprivate _removeStyleElement(): void {\n\t\tthis._styleElementDisposables?.dispose();\n\t\tthis._styleElementDisposables = undefined;\n\t\tthis._styleElement = undefined;\n\t}\n}\n\n\nfunction ensureBoolean(value: unknown, defaultValue: boolean): boolean {\n\treturn typeof value === 'boolean' ? value : defaultValue;\n}\n\nfunction ensureNumber(value: unknown, defaultValue: number): number {\n\treturn typeof value === 'number' ? value : defaultValue;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createStyleSheet } from '../../../../base/browser/domStylesheets.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { AccessibilityWorkbenchSettingId, ViewDimUnfocusedOpacityProperties } from './accessibilityConfiguration.js';\n\nexport class UnfocusedViewDimmingContribution extends Disposable implements IWorkbenchContribution {\n\tprivate _styleElement?: HTMLStyleElement;\n\tprivate _styleElementDisposables: DisposableStore | undefined = undefined;\n\n\tconstructor(\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._removeStyleElement()));\n\n\t\tthis._register(Event.runAndSubscribe(configurationService.onDidChangeConfiguration, e => {\n\t\t\tif (e && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled) && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet cssTextContent = '';\n\n\t\t\tconst enabled = ensureBoolean(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled), false);\n\t\t\tif (enabled) {\n\t\t\t\tconst opacity = clamp(\n\t\t\t\t\tensureNumber(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity), ViewDimUnfocusedOpacityProperties.Default),\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Minimum,\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Maximum\n\t\t\t\t);\n\n\t\t\t\tif (opacity !== 1) {\n\t\t\t\t\t// These filter rules are more specific than may be expected as the `filter`\n\t\t\t\t\t// rule can cause problems if it's used inside the element like on editor hovers\n\t\t\t\t\tconst rules = new Set<string>();\n\t\t\t\t\tconst filterRule = `filter: opacity(${opacity});`;\n\t\t\t\t\t// Terminal tabs\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal:not(:focus-within) .tabs-container { ${filterRule} }`);\n\t\t\t\t\t// Terminals\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal .terminal-wrapper:not(:focus-within) { ${filterRule} }`);\n\t\t\t\t\t// Text editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor { ${filterRule} }`);\n\t\t\t\t\t// Breadcrumbs\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .breadcrumbs-below-tabs { ${filterRule} }`);\n\t\t\t\t\t// Terminal editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .terminal-wrapper { ${filterRule} }`);\n\t\t\t\t\t// Settings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .settings-editor { ${filterRule} }`);\n\t\t\t\t\t// Keybindings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .keybindings-editor { ${filterRule} }`);\n\t\t\t\t\t// Editor placeholder (error case)\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor-pane-placeholder { ${filterRule} }`);\n\t\t\t\t\t// Welcome editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .gettingStartedContainer { ${filterRule} }`);\n\t\t\t\t\tcssTextContent = [...rules].join('\\n');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (cssTextContent.length === 0) {\n\t\t\t\tthis._removeStyleElement();\n\t\t\t} else {\n\t\t\t\tthis._getStyleElement().textContent = cssTextContent;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _getStyleElement(): HTMLStyleElement {\n\t\tif (!this._styleElement) {\n\t\t\tthis._styleElementDisposables = new DisposableStore();\n\t\t\tthis._styleElement = createStyleSheet(undefined, undefined, this._styleElementDisposables);\n\t\t\tthis._styleElement.className = 'accessibilityUnfocusedViewOpacity';\n\t\t}\n\t\treturn this._styleElement;\n\t}\n\n\tprivate _removeStyleElement(): void {\n\t\tthis._styleElementDisposables?.dispose();\n\t\tthis._styleElementDisposables = undefined;\n\t\tthis._styleElement = undefined;\n\t}\n}\n\n\nfunction ensureBoolean(value: unknown, defaultValue: boolean): boolean {\n\treturn typeof value === 'boolean' ? value : defaultValue;\n}\n\nfunction ensureNumber(value: unknown, defaultValue: number): number {\n\treturn typeof value === 'number' ? value : defaultValue;\n}\n"]}