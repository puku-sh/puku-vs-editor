{"version":3,"sources":["vs/workbench/contrib/codeEditor/browser/outline/documentSymbolsOutline.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,OAAO,EAAS,MAAM,qCAAqC,CAAC;AACrE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAe,YAAY,EAAE,MAAM,yCAAyC,CAAC;AACjH,OAAO,EAA2G,eAAe,GAAyD,MAAM,iDAAiD,CAAC;AAClP,OAAO,EAAmC,UAAU,IAAI,mBAAmB,EAAE,MAAM,qCAAqC,CAAC;AACzH,OAAO,EAAE,QAAQ,EAAE,MAAM,qDAAqD,CAAC;AAG/E,OAAO,EAAE,wBAAwB,EAAE,mCAAmC,EAAE,sBAAsB,EAAE,oBAAoB,EAAE,2BAA2B,EAAE,8BAA8B,EAAE,qCAAqC,EAAE,6BAA6B,EAAE,yBAAyB,EAAE,MAAM,0BAA0B,CAAC;AACrT,OAAO,EAAe,YAAY,EAAE,YAAY,EAAE,MAAM,gDAAgD,CAAC;AACzG,OAAO,EAAE,YAAY,EAAE,cAAc,EAAE,YAAY,EAAE,WAAW,EAAkB,oBAAoB,EAAE,MAAM,uEAAuE,CAAC;AACtL,OAAO,EAAqB,uBAAuB,EAAE,MAAM,4CAA4C,CAAC;AACxG,OAAO,EAAE,gBAAgB,EAAE,YAAY,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AACvG,OAAO,EAAE,iBAAiB,EAAE,MAAM,sCAAsC,CAAC;AAGzE,OAAO,EAAE,iCAAiC,EAAE,MAAM,oEAAoE,CAAC;AACvH,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AAGtG,OAAO,EAAE,KAAK,EAAE,MAAM,4CAA4C,CAAC;AAEnE,OAAO,EAAE,kBAAkB,EAAE,MAAM,6DAA6D,CAAC;AAGjG,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AACtG,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,yBAAyB,EAAE,MAAM,4DAA4D,CAAC;AACvG,OAAO,EAAE,cAAc,EAAE,MAAM,mDAAmD,CAAC;AACnF,OAAO,EAAE,OAAO,EAAE,MAAM,yCAAyC,CAAC;AAClE,OAAO,EAAE,wBAAwB,EAAE,MAAM,2DAA2D,CAAC;AAIrG,IAAM,+BAA+B,GAArC,MAAM,+BAA+B;IAIpC,YACkB,OAAoB,EACF,iCAAqF;QADvG,YAAO,GAAP,OAAO,CAAa;QACe,sCAAiC,GAAjC,iCAAiC,CAAmC;QAJjH,iBAAY,GAAsC,EAAE,CAAC;IAKzD,CAAC;IAEL,qBAAqB;QACpB,OAAO,IAAI,CAAC,YAAY,CAAC;IAC1B,CAAC;IAED,KAAK;QACJ,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IACxB,CAAC;IAED,MAAM,CAAC,KAAmB,EAAE,QAAmB;QAC9C,MAAM,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC9D,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;IACjC,CAAC;IAEO,mBAAmB,CAAC,KAAmB,EAAE,QAAmB;QACnE,IAAI,IAAI,GAA8C,KAAK,CAAC,wBAAwB,CAAC,QAAQ,CAAC,CAAC;QAC/F,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,OAAO,EAAE,CAAC;QACX,CAAC;QACD,MAAM,KAAK,GAAyC,EAAE,CAAC;QACvD,OAAO,IAAI,EAAE,CAAC;YACb,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjB,MAAM,MAAM,GAAQ,IAAI,CAAC,MAAM,CAAC;YAChC,IAAI,MAAM,YAAY,YAAY,EAAE,CAAC;gBACpC,MAAM;YACP,CAAC;YACD,IAAI,MAAM,YAAY,YAAY,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;gBAC1F,MAAM;YACP,CAAC;YACD,IAAI,GAAG,MAAM,CAAC;QACf,CAAC;QACD,MAAM,MAAM,GAAyC,EAAE,CAAC;QACxD,KAAK,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,MAAM,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;gBAC/B,MAAM;YACP,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACtB,CAAC;QACD,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YACzB,OAAO,EAAE,CAAC;QACX,CAAC;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAEO,WAAW,CAAC,OAAoB;QACvC,IAAI,CAAC,CAAC,OAAO,YAAY,cAAc,CAAC,EAAE,CAAC;YAC1C,OAAO,KAAK,CAAC;QACd,CAAC;QACD,MAAM,GAAG,GAAG,eAAe,oBAAoB,CAAC,gBAAgB,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;QACxF,IAAI,GAAoB,CAAC;QACzB,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;YAC7C,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAgB,CAAC;YACpD,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC;QACjB,CAAC;QACD,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,QAAQ,CAAU,GAAG,EAAE,GAAG,CAAC,CAAC;IAC5E,CAAC;CACD,CAAA;AAjEK,+BAA+B;IAMlC,WAAA,iCAAiC,CAAA;GAN9B,+BAA+B,CAiEpC;AAGD,IAAM,sBAAsB,GAA5B,MAAM,sBAAsB;IAgB3B,IAAI,aAAa;QAChB,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QAC7C,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;YACvC,OAAO,SAAS,CAAC;QAClB,CAAC;aAAM,CAAC;YACP,OAAO,IAAI,CAAC,aAAa,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;QAC/D,CAAC;IACF,CAAC;IAED,YACkB,OAAoB,EACrC,MAAqB,EACrB,gBAAyB,EACC,wBAAmE,EACzE,kBAAuD,EACrD,oBAA2D,EAC1D,qBAA6D,EACzD,yBAAqE,EAC7D,gCAAmE,EAC/E,oBAA2C;QATjD,YAAO,GAAP,OAAO,CAAa;QAGM,6BAAwB,GAAxB,wBAAwB,CAA0B;QACxD,uBAAkB,GAAlB,kBAAkB,CAAoB;QACpC,yBAAoB,GAApB,oBAAoB,CAAsB;QACzC,0BAAqB,GAArB,qBAAqB,CAAuB;QACxC,8BAAyB,GAAzB,yBAAyB,CAA2B;QA/BhF,iBAAY,GAAG,IAAI,eAAe,EAAE,CAAC;QACrC,iBAAY,GAAG,IAAI,OAAO,EAAsB,CAAC;QAEzD,gBAAW,GAA8B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;QAGzD,wBAAmB,GAAG,IAAI,eAAe,EAAE,CAAC;QAMpD,gBAAW,GAAG,iBAAiB,CAAC;QAwBxC,IAAI,CAAC,sBAAsB,GAAG,IAAI,+BAA+B,CAAC,OAAO,EAAE,gCAAgC,CAAC,CAAC;QAC7G,MAAM,QAAQ,GAAG,IAAI,6BAA6B,EAAE,CAAC;QACrD,MAAM,SAAS,GAAG,CAAC,IAAI,2BAA2B,EAAE,EAAE,oBAAoB,CAAC,cAAc,CAAC,sBAAsB,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;QACjI,MAAM,cAAc,GAA0C;YAC7D,WAAW,EAAE,CAAC,MAAM,EAAE,EAAE;gBACvB,IAAI,MAAM,YAAY,cAAc,IAAI,MAAM,YAAY,YAAY,EAAE,CAAC;oBACxE,OAAO,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBACjC,CAAC;gBACD,IAAI,MAAM,KAAK,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;oBAC3C,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC7C,CAAC;gBACD,OAAO,EAAE,CAAC;YACX,CAAC;SACD,CAAC;QACF,MAAM,UAAU,GAAG,IAAI,wBAAwB,EAAE,CAAC;QAClD,MAAM,YAAY,GAAG,gCAAgC,CAAC,QAAQ,CAAmC,OAAO,CAAC,QAAQ,EAAE,EAAE,GAAG,gEAAkC,CAAC;QAC3J,MAAM,OAAO,GAAG;YACf,iBAAiB,EAAE,MAAM,sCAA8B,IAAI,CAAC,MAAM,sCAA8B,IAAI,YAAY,sEAA+C,CAAC;YAChK,wBAAwB,EAAE,IAAI;YAC9B,wBAAwB,EAAE,KAAK;YAC/B,gBAAgB,EAAE,IAAI,8BAA8B,EAAE;YACtD,+BAA+B,EAAE,IAAI,qCAAqC,EAAE;YAC5E,qBAAqB,EAAE,IAAI,mCAAmC,CAAC,QAAQ,CAAC,IAAU,EAAE,IAAkB,CAAC,CAAC;YACxG,MAAM,EAAE,MAAM,sCAA8B;gBAC3C,CAAC,CAAC,oBAAoB,CAAC,cAAc,CAAC,oBAAoB,EAAE,SAAS,CAAC;gBACtE,CAAC,CAAC,MAAM,sCAA8B;oBACrC,CAAC,CAAC,oBAAoB,CAAC,cAAc,CAAC,oBAAoB,EAAE,aAAa,CAAC;oBAC1E,CAAC,CAAC,SAAS;YACb,GAAG,EAAE,oBAAoB,CAAC,cAAc,CAAC,yBAAyB,CAAC;SACnE,CAAC;QAEF,IAAI,CAAC,MAAM,GAAG;YACb,qBAAqB,EAAE,IAAI,CAAC,sBAAsB;YAClD,QAAQ;YACR,SAAS;YACT,cAAc;YACd,UAAU;YACV,OAAO;YACP,mBAAmB,EAAE,EAAE,oBAAoB,EAAE,GAAG,EAAE,GAAG,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,EAAE;SAC5F,CAAC;QAGF,+CAA+C;QAC/C,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,wBAAwB,CAAC,sBAAsB,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QAC/G,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QACjF,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QAEzF,0CAA0C;QAC1C,MAAM,UAAU,GAAG,IAAI,YAAY,EAAE,CAAC;QACtC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAClC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,uBAAuB,CAAC,KAAK,CAAC,EAAE;YAClE,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;YACtC,IAAI,KAAK,EAAE,CAAC;gBACX,MAAM,OAAO,GAAG,oBAAoB,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBAC7D,UAAU,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;YACpE,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,wBAAwB;QACxB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAEzF,eAAe;QACf,IAAI,CAAC,cAAc,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC,CAAC;IAC9D,CAAC;IAED,OAAO;QACN,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;QAC5B,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC;IACpC,CAAC;IAED,IAAI,OAAO;QACV,OAAO,CAAC,IAAI,CAAC,aAAa,IAAI,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACrE,CAAC;IAED,IAAI,GAAG;QACN,OAAO,IAAI,CAAC,aAAa,EAAE,GAAG,CAAC;IAChC,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,KAAyB,EAAE,OAAuB,EAAE,UAAmB,EAAE,MAAe;QACpG,MAAM,KAAK,GAAG,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,YAAY,cAAc,CAAC,EAAE,CAAC;YAClD,OAAO;QACR,CAAC;QACD,MAAM,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC;YAC5C,QAAQ,EAAE,KAAK,CAAC,GAAG;YACnB,OAAO,EAAE;gBACR,GAAG,OAAO;gBACV,SAAS,EAAE,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,cAAc,CAAC;gBAC3F,mBAAmB,gEAAwD;aAC3E;SACD,EAAE,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IAC9B,CAAC;IAED,OAAO,CAAC,KAAyB;QAChC,IAAI,CAAC,CAAC,KAAK,YAAY,cAAc,CAAC,EAAE,CAAC;YACxC,OAAO,UAAU,CAAC,IAAI,CAAC;QACxB,CAAC;QAED,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,oCAAoC,CAAC,MAAM,CAAC,KAAK,4BAAoB,CAAC;QACnF,MAAM,qBAAqB,GAAG,IAAI,CAAC,OAAO,CAAC,2BAA2B,CAAC,CAAC;gBACvE,KAAK,EAAE,MAAM,CAAC,KAAK;gBACnB,OAAO,EAAE;oBACR,WAAW,EAAE,0CAA0C;oBACvD,SAAS,EAAE,gBAAgB;oBAC3B,WAAW,EAAE,IAAI;iBACjB;aACD,CAAC,CAAC,CAAC;QACJ,OAAO,YAAY,CAAC,GAAG,EAAE,CAAC,qBAAqB,CAAC,KAAK,EAAE,CAAC,CAAC;IAC1D,CAAC;IAED,gBAAgB;QACf,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;QAC/C,OAAO,YAAY,CAAC,GAAG,EAAE;YACxB,IAAI,SAAS,EAAE,CAAC;gBACf,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;YAC1C,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,cAAc,CAAC,kBAA8C;QAE1E,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,CAAC;QACjC,IAAI,CAAC,kBAAkB,EAAE,CAAC;YACzB,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;QAClC,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;YAC9B,OAAO;QACR,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QACvC,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;YACvE,OAAO;QACR,CAAC;QAED,MAAM,GAAG,GAAG,IAAI,uBAAuB,EAAE,CAAC;QAC1C,MAAM,aAAa,GAAG,MAAM,CAAC,YAAY,EAAE,CAAC;QAC5C,MAAM,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;QAExC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC3C,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEpE,IAAI,CAAC;YACJ,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;YAC7E,IAAI,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE,CAAC;gBACvC,0BAA0B;gBAC1B,OAAO;YACR,CAAC;YAED,IAAI,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;gBAC1D,+BAA+B;gBAC/B,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBAC7B,OAAO;YACR,CAAC;YAED,0EAA0E;YAC1E,kEAAkE;YAClE,IAAI,kBAAkB,IAAI,IAAI,CAAC,aAAa,IAAI,MAAM,CAAC,YAAY,EAAE,IAAI,EAAE,EAAE,CAAC;gBAC7E,MAAM,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACxC,MAAM,SAAS,GAAG,MAAM,CAAC,cAAc,EAAE,CAAC;gBAC1C,MAAM,QAAQ,GAAG,OAAO,GAAG,SAAS,CAAC;gBACrC,MAAM,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;gBACrD,MAAM,SAAS,GAAG,SAAS,GAAG,kBAAkB,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,IAAI,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;gBAC9G,MAAM,QAAQ,GAAG,OAAO,GAAG,SAAS,CAAC;gBACrC,IAAI,QAAQ,IAAI,QAAQ,GAAG,GAAG,IAAI,QAAQ,IAAI,QAAQ,GAAG,GAAG,EAAE,CAAC;oBAC9D,6DAA6D;oBAC7D,sBAAsB;oBACtB,MAAM,KAAK,GAAG,MAAM,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;oBACvF,IAAI,CAAC,KAAK,EAAE,CAAC;wBACZ,OAAO;oBACR,CAAC;gBACF,CAAC;YACF,CAAC;YAED,6CAA6C;YAC7C,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;YACnC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC,iBAAiB,CAAC,SAAS,CAAC,EAAE;gBACzF,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC;oBACvC,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;oBACnC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5B,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;gBACpF,IAAI,CAAC,CAAC,oBAAoB,oEAAmC,IAAI,CAAC,CAAC,oBAAoB,CAAC,qBAAqB,CAAC,EAAE,CAAC;oBAChH,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;oBAC3E,MAAM,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,oEAAmC,CAAC;oBAEtF,IAAI,CAAC,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;wBACzB,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;oBACxB,CAAC;yBAAM,CAAC;wBACP,IAAI,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAC;oBACpC,CAAC;oBACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5B,CAAC;gBACD,IAAI,CAAC,CAAC,oBAAoB,CAAC,SAAS,CAAC,EAAE,CAAC;oBACvC,qCAAqC;oBACrC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5B,CAAC;gBACD,IAAI,CAAC,CAAC,oBAAoB,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;oBACtE,wBAAwB;oBACxB,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC;oBACtE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5B,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,wBAAwB;YACxB,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,qBAAqB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;gBACpF,IAAI,CAAC,CAAC,oBAAoB,+CAAyB,EAAE,CAAC;oBACrD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5B,CAAC;gBACD,IAAI,CAAC,CAAC,oBAAoB,CAAC,SAAS,CAAC,EAAE,CAAC;oBACvC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC5B,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,6CAA6C;YAC7C,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC,CAAC,EAAE;gBACvE,YAAY,CAAC,YAAY,CAAC,GAAG,EAAE;oBAC9B,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,aAAa,KAAK,MAAM,CAAC,YAAY,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;wBAChG,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,CAAC;wBACtE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,uBAAuB,EAAE,IAAI,EAAE,CAAC,CAAC;oBAC3D,CAAC;gBACF,CAAC,EAAE,GAAG,CAAC,CAAC;YACT,CAAC,CAAC,CAAC,CAAC;YAEJ,gCAAgC;YAChC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAE9B,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC;YACd,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;YACjC,iBAAiB,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC;IACF,CAAC;IAEO,sBAAsB,CAAC,KAA+B;QAC7D,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;QAC3E,MAAM,MAAM,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,oEAAmC,CAAC;QACtF,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO,IAAI,CAAC,MAAM,EAAE,CAAC;YACnC,OAAO;QACR,CAAC;QACD,MAAM,OAAO,GAAqB,EAAE,CAAC;QACrC,KAAK,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,IAAI,IAAI,CAAC,yBAAyB,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC;YACxF,IAAI,MAAM,CAAC,QAAQ,KAAK,cAAc,CAAC,KAAK,IAAI,MAAM,CAAC,QAAQ,KAAK,cAAc,CAAC,OAAO,EAAE,CAAC;gBAC5F,OAAO,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;YACvD,CAAC;QACF,CAAC;QACD,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC7B,CAAC;IAEO,gBAAgB,CAAC,KAA+B;QACvD,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QAC5C,IAAI,CAAC,QAAQ,IAAI,CAAC,KAAK,EAAE,CAAC;YACzB,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC;YAC/B,IAAI,CAAC,sBAAsB,CAAC,KAAK,EAAE,CAAC;QACrC,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC;gBACvC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC5B,CAAC;YACD,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrD,CAAC;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC;CACD,CAAA;AA5SK,sBAAsB;IA6BzB,WAAA,wBAAwB,CAAA;IACxB,WAAA,kBAAkB,CAAA;IAClB,WAAA,oBAAoB,CAAA;IACpB,WAAA,qBAAqB,CAAA;IACrB,WAAA,yBAAyB,CAAA;IACzB,WAAA,iCAAiC,CAAA;IACjC,WAAA,qBAAqB,CAAA;GAnClB,sBAAsB,CA4S3B;AAED,IAAM,6BAA6B,GAAnC,MAAM,6BAA6B;IAIlC,YACkB,cAA+B;QAEhD,MAAM,GAAG,GAAG,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;QACxD,IAAI,CAAC,OAAO,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;IACpC,CAAC;IAED,OAAO,CAAC,SAAsB;QAC7B,MAAM,IAAI,GAAG,SAAS,CAAC,UAAU,EAAE,CAAC;QACpC,OAAO,YAAY,CAAC,IAAI,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;IACjD,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,IAAiB,EAAE,MAAqB,EAAE,MAAyB;QACtF,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAClC,IAAI,MAA+B,CAAC;QACpC,IAAI,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC;YAC3B,MAAM,GAAG,OAAO,CAAC;QAClB,CAAC;aAAM,IAAI,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC;YAClC,MAAM,GAAG,OAAO,CAAC,iBAAiB,EAAE,CAAC;QACtC,CAAC;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;YACb,OAAO,SAAS,CAAC;QAClB,CAAC;QACD,MAAM,gBAAgB,GAAG,IAAI,OAAO,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,MAAM,CAAC,mBAAmB,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC,cAAc,CAAC,sBAAsB,EAAE,MAAM,EAAE,MAAM,EAAE,gBAAgB,CAAC,CAAC,CAAC;QACpK,MAAM,gBAAgB,CAAC,IAAI,EAAE,CAAC;QAC9B,OAAO,MAAM,CAAC;IACf,CAAC;CACD,CAAA;AAhCK,6BAA6B;IAKhC,WAAA,eAAe,CAAA;GALZ,6BAA6B,CAgClC;AAED,QAAQ,CAAC,EAAE,CAAkC,mBAAmB,CAAC,SAAS,CAAC,CAAC,6BAA6B,CAAC,6BAA6B,oCAA4B,CAAC","file":"documentSymbolsOutline.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { OutlineConfigCollapseItemsValues, IBreadcrumbsDataSource, IOutline, IOutlineCreator, IOutlineListConfig, IOutlineService, OutlineChangeEvent, OutlineConfigKeys, OutlineTarget, } from '../../../../services/outline/browser/outline.js';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from '../../../../common/contributions.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { LifecyclePhase } from '../../../../services/lifecycle/common/lifecycle.js';\nimport { IEditorPane } from '../../../../common/editor.js';\nimport { DocumentSymbolComparator, DocumentSymbolAccessibilityProvider, DocumentSymbolRenderer, DocumentSymbolFilter, DocumentSymbolGroupRenderer, DocumentSymbolIdentityProvider, DocumentSymbolNavigationLabelProvider, DocumentSymbolVirtualDelegate, DocumentSymbolDragAndDrop } from './documentSymbolsTree.js';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { OutlineGroup, OutlineElement, OutlineModel, TreeElement, IOutlineMarker, IOutlineModelService } from '../../../../../editor/contrib/documentSymbols/browser/outlineModel.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { raceCancellation, TimeoutTimer, timeout, Barrier } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { ITextResourceConfigurationService } from '../../../../../editor/common/services/textResourceConfiguration.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IPosition } from '../../../../../editor/common/core/position.js';\nimport { ScrollType } from '../../../../../editor/common/editorCommon.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { IEditorOptions, TextEditorSelectionRevealType } from '../../../../../platform/editor/common/editor.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { IModelContentChangedEvent } from '../../../../../editor/common/textModelEvents.js';\nimport { IDataSource } from '../../../../../base/browser/ui/tree/tree.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { localize } from '../../../../../nls.js';\nimport { IMarkerDecorationsService } from '../../../../../editor/common/services/markerDecorations.js';\nimport { MarkerSeverity } from '../../../../../platform/markers/common/markers.js';\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { ILanguageFeaturesService } from '../../../../../editor/common/services/languageFeatures.js';\n\ntype DocumentSymbolItem = OutlineGroup | OutlineElement;\n\nclass DocumentSymbolBreadcrumbsSource implements IBreadcrumbsDataSource<DocumentSymbolItem> {\n\n\tprivate _breadcrumbs: (OutlineGroup | OutlineElement)[] = [];\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@ITextResourceConfigurationService private readonly _textResourceConfigurationService: ITextResourceConfigurationService,\n\t) { }\n\n\tgetBreadcrumbElements(): readonly DocumentSymbolItem[] {\n\t\treturn this._breadcrumbs;\n\t}\n\n\tclear(): void {\n\t\tthis._breadcrumbs = [];\n\t}\n\n\tupdate(model: OutlineModel, position: IPosition): void {\n\t\tconst newElements = this._computeBreadcrumbs(model, position);\n\t\tthis._breadcrumbs = newElements;\n\t}\n\n\tprivate _computeBreadcrumbs(model: OutlineModel, position: IPosition): Array<OutlineGroup | OutlineElement> {\n\t\tlet item: OutlineGroup | OutlineElement | undefined = model.getItemEnclosingPosition(position);\n\t\tif (!item) {\n\t\t\treturn [];\n\t\t}\n\t\tconst chain: Array<OutlineGroup | OutlineElement> = [];\n\t\twhile (item) {\n\t\t\tchain.push(item);\n\t\t\tconst parent: any = item.parent;\n\t\t\tif (parent instanceof OutlineModel) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (parent instanceof OutlineGroup && parent.parent && parent.parent.children.size === 1) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\titem = parent;\n\t\t}\n\t\tconst result: Array<OutlineGroup | OutlineElement> = [];\n\t\tfor (let i = chain.length - 1; i >= 0; i--) {\n\t\t\tconst element = chain[i];\n\t\t\tif (this._isFiltered(element)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tresult.push(element);\n\t\t}\n\t\tif (result.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _isFiltered(element: TreeElement): boolean {\n\t\tif (!(element instanceof OutlineElement)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst key = `breadcrumbs.${DocumentSymbolFilter.kindToConfigName[element.symbol.kind]}`;\n\t\tlet uri: URI | undefined;\n\t\tif (this._editor && this._editor.getModel()) {\n\t\t\tconst model = this._editor.getModel() as ITextModel;\n\t\t\turi = model.uri;\n\t\t}\n\t\treturn !this._textResourceConfigurationService.getValue<boolean>(uri, key);\n\t}\n}\n\n\nclass DocumentSymbolsOutline implements IOutline<DocumentSymbolItem> {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _onDidChange = new Emitter<OutlineChangeEvent>();\n\n\treadonly onDidChange: Event<OutlineChangeEvent> = this._onDidChange.event;\n\n\tprivate _outlineModel?: OutlineModel;\n\tprivate readonly _outlineDisposables = new DisposableStore();\n\n\tprivate readonly _breadcrumbsDataSource: DocumentSymbolBreadcrumbsSource;\n\n\treadonly config: IOutlineListConfig<DocumentSymbolItem>;\n\n\treadonly outlineKind = 'documentSymbols';\n\n\tget activeElement(): DocumentSymbolItem | undefined {\n\t\tconst posistion = this._editor.getPosition();\n\t\tif (!posistion || !this._outlineModel) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\treturn this._outlineModel.getItemEnclosingPosition(posistion);\n\t\t}\n\t}\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\ttarget: OutlineTarget,\n\t\tfirstLoadBarrier: Barrier,\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t\t@ICodeEditorService private readonly _codeEditorService: ICodeEditorService,\n\t\t@IOutlineModelService private readonly _outlineModelService: IOutlineModelService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IMarkerDecorationsService private readonly _markerDecorationsService: IMarkerDecorationsService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\n\t\tthis._breadcrumbsDataSource = new DocumentSymbolBreadcrumbsSource(_editor, textResourceConfigurationService);\n\t\tconst delegate = new DocumentSymbolVirtualDelegate();\n\t\tconst renderers = [new DocumentSymbolGroupRenderer(), instantiationService.createInstance(DocumentSymbolRenderer, true, target)];\n\t\tconst treeDataSource: IDataSource<this, DocumentSymbolItem> = {\n\t\t\tgetChildren: (parent) => {\n\t\t\t\tif (parent instanceof OutlineElement || parent instanceof OutlineGroup) {\n\t\t\t\t\treturn parent.children.values();\n\t\t\t\t}\n\t\t\t\tif (parent === this && this._outlineModel) {\n\t\t\t\t\treturn this._outlineModel.children.values();\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t\tconst comparator = new DocumentSymbolComparator();\n\t\tconst initialState = textResourceConfigurationService.getValue<OutlineConfigCollapseItemsValues>(_editor.getModel()?.uri, OutlineConfigKeys.collapseItems);\n\t\tconst options = {\n\t\t\tcollapseByDefault: target === OutlineTarget.Breadcrumbs || (target === OutlineTarget.OutlinePane && initialState === OutlineConfigCollapseItemsValues.Collapsed),\n\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\tmultipleSelectionSupport: false,\n\t\t\tidentityProvider: new DocumentSymbolIdentityProvider(),\n\t\t\tkeyboardNavigationLabelProvider: new DocumentSymbolNavigationLabelProvider(),\n\t\t\taccessibilityProvider: new DocumentSymbolAccessibilityProvider(localize('document', \"Document Symbols\")),\n\t\t\tfilter: target === OutlineTarget.OutlinePane\n\t\t\t\t? instantiationService.createInstance(DocumentSymbolFilter, 'outline')\n\t\t\t\t: target === OutlineTarget.Breadcrumbs\n\t\t\t\t\t? instantiationService.createInstance(DocumentSymbolFilter, 'breadcrumbs')\n\t\t\t\t\t: undefined,\n\t\t\tdnd: instantiationService.createInstance(DocumentSymbolDragAndDrop),\n\t\t};\n\n\t\tthis.config = {\n\t\t\tbreadcrumbsDataSource: this._breadcrumbsDataSource,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\ttreeDataSource,\n\t\t\tcomparator,\n\t\t\toptions,\n\t\t\tquickPickDataSource: { getQuickPickElements: () => { throw new Error('not implemented'); } }\n\t\t};\n\n\n\t\t// update as language, model, providers changes\n\t\tthis._disposables.add(_languageFeaturesService.documentSymbolProvider.onDidChange(_ => this._createOutline()));\n\t\tthis._disposables.add(this._editor.onDidChangeModel(_ => this._createOutline()));\n\t\tthis._disposables.add(this._editor.onDidChangeModelLanguage(_ => this._createOutline()));\n\n\t\t// update soon'ish as model content change\n\t\tconst updateSoon = new TimeoutTimer();\n\t\tthis._disposables.add(updateSoon);\n\t\tthis._disposables.add(this._editor.onDidChangeModelContent(event => {\n\t\t\tconst model = this._editor.getModel();\n\t\t\tif (model) {\n\t\t\t\tconst timeout = _outlineModelService.getDebounceValue(model);\n\t\t\t\tupdateSoon.cancelAndSet(() => this._createOutline(event), timeout);\n\t\t\t}\n\t\t}));\n\n\t\t// stop when editor dies\n\t\tthis._disposables.add(this._editor.onDidDispose(() => this._outlineDisposables.clear()));\n\n\t\t// initial load\n\t\tthis._createOutline().finally(() => firstLoadBarrier.open());\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t\tthis._outlineDisposables.dispose();\n\t}\n\n\tget isEmpty(): boolean {\n\t\treturn !this._outlineModel || TreeElement.empty(this._outlineModel);\n\t}\n\n\tget uri() {\n\t\treturn this._outlineModel?.uri;\n\t}\n\n\tasync reveal(entry: DocumentSymbolItem, options: IEditorOptions, sideBySide: boolean, select: boolean): Promise<void> {\n\t\tconst model = OutlineModel.get(entry);\n\t\tif (!model || !(entry instanceof OutlineElement)) {\n\t\t\treturn;\n\t\t}\n\t\tawait this._codeEditorService.openCodeEditor({\n\t\t\tresource: model.uri,\n\t\t\toptions: {\n\t\t\t\t...options,\n\t\t\t\tselection: select ? entry.symbol.range : Range.collapseToStart(entry.symbol.selectionRange),\n\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.NearTopIfOutsideViewport,\n\t\t\t}\n\t\t}, this._editor, sideBySide);\n\t}\n\n\tpreview(entry: DocumentSymbolItem): IDisposable {\n\t\tif (!(entry instanceof OutlineElement)) {\n\t\t\treturn Disposable.None;\n\t\t}\n\n\t\tconst { symbol } = entry;\n\t\tthis._editor.revealRangeInCenterIfOutsideViewport(symbol.range, ScrollType.Smooth);\n\t\tconst decorationsCollection = this._editor.createDecorationsCollection([{\n\t\t\trange: symbol.range,\n\t\t\toptions: {\n\t\t\t\tdescription: 'document-symbols-outline-range-highlight',\n\t\t\t\tclassName: 'rangeHighlight',\n\t\t\t\tisWholeLine: true\n\t\t\t}\n\t\t}]);\n\t\treturn toDisposable(() => decorationsCollection.clear());\n\t}\n\n\tcaptureViewState(): IDisposable {\n\t\tconst viewState = this._editor.saveViewState();\n\t\treturn toDisposable(() => {\n\t\t\tif (viewState) {\n\t\t\t\tthis._editor.restoreViewState(viewState);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async _createOutline(contentChangeEvent?: IModelContentChangedEvent): Promise<void> {\n\n\t\tthis._outlineDisposables.clear();\n\t\tif (!contentChangeEvent) {\n\t\t\tthis._setOutlineModel(undefined);\n\t\t}\n\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst buffer = this._editor.getModel();\n\t\tif (!this._languageFeaturesService.documentSymbolProvider.has(buffer)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst versionIdThen = buffer.getVersionId();\n\t\tconst timeoutTimer = new TimeoutTimer();\n\n\t\tthis._outlineDisposables.add(timeoutTimer);\n\t\tthis._outlineDisposables.add(toDisposable(() => cts.dispose(true)));\n\n\t\ttry {\n\t\t\tconst model = await this._outlineModelService.getOrCreate(buffer, cts.token);\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\t// cancelled -> do nothing\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (TreeElement.empty(model) || !this._editor.hasModel()) {\n\t\t\t\t// empty -> no outline elements\n\t\t\t\tthis._setOutlineModel(model);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// heuristic: when the symbols-to-lines ratio changes by 50% between edits\n\t\t\t// wait a little (and hope that the next change isn't as drastic).\n\t\t\tif (contentChangeEvent && this._outlineModel && buffer.getLineCount() >= 25) {\n\t\t\t\tconst newSize = TreeElement.size(model);\n\t\t\t\tconst newLength = buffer.getValueLength();\n\t\t\t\tconst newRatio = newSize / newLength;\n\t\t\t\tconst oldSize = TreeElement.size(this._outlineModel);\n\t\t\t\tconst oldLength = newLength - contentChangeEvent.changes.reduce((prev, value) => prev + value.rangeLength, 0);\n\t\t\t\tconst oldRatio = oldSize / oldLength;\n\t\t\t\tif (newRatio <= oldRatio * 0.5 || newRatio >= oldRatio * 1.5) {\n\t\t\t\t\t// wait for a better state and ignore current model when more\n\t\t\t\t\t// typing has happened\n\t\t\t\t\tconst value = await raceCancellation(timeout(2000).then(() => true), cts.token, false);\n\t\t\t\t\tif (!value) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// feature: show markers with outline element\n\t\t\tthis._applyMarkersToOutline(model);\n\t\t\tthis._outlineDisposables.add(this._markerDecorationsService.onDidChangeMarker(textModel => {\n\t\t\t\tif (isEqual(model.uri, textModel.uri)) {\n\t\t\t\t\tthis._applyMarkersToOutline(model);\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis._outlineDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration(OutlineConfigKeys.problemsEnabled) || e.affectsConfiguration('problems.visibility')) {\n\t\t\t\t\tconst problem = this._configurationService.getValue('problems.visibility');\n\t\t\t\t\tconst config = this._configurationService.getValue(OutlineConfigKeys.problemsEnabled);\n\n\t\t\t\t\tif (!problem || !config) {\n\t\t\t\t\t\tmodel.updateMarker([]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._applyMarkersToOutline(model);\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration('outline')) {\n\t\t\t\t\t// outline filtering, problems on/off\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration('breadcrumbs') && this._editor.hasModel()) {\n\t\t\t\t\t// breadcrumbs filtering\n\t\t\t\t\tthis._breadcrumbsDataSource.update(model, this._editor.getPosition());\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// feature: toggle icons\n\t\t\tthis._outlineDisposables.add(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration(OutlineConfigKeys.icons)) {\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration('outline')) {\n\t\t\t\t\tthis._onDidChange.fire({});\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// feature: update active when cursor changes\n\t\t\tthis._outlineDisposables.add(this._editor.onDidChangeCursorPosition(_ => {\n\t\t\t\ttimeoutTimer.cancelAndSet(() => {\n\t\t\t\t\tif (!buffer.isDisposed() && versionIdThen === buffer.getVersionId() && this._editor.hasModel()) {\n\t\t\t\t\t\tthis._breadcrumbsDataSource.update(model, this._editor.getPosition());\n\t\t\t\t\t\tthis._onDidChange.fire({ affectOnlyActiveElement: true });\n\t\t\t\t\t}\n\t\t\t\t}, 150);\n\t\t\t}));\n\n\t\t\t// update properties, send event\n\t\t\tthis._setOutlineModel(model);\n\n\t\t} catch (err) {\n\t\t\tthis._setOutlineModel(undefined);\n\t\t\tonUnexpectedError(err);\n\t\t}\n\t}\n\n\tprivate _applyMarkersToOutline(model: OutlineModel | undefined): void {\n\t\tconst problem = this._configurationService.getValue('problems.visibility');\n\t\tconst config = this._configurationService.getValue(OutlineConfigKeys.problemsEnabled);\n\t\tif (!model || !problem || !config) {\n\t\t\treturn;\n\t\t}\n\t\tconst markers: IOutlineMarker[] = [];\n\t\tfor (const [range, marker] of this._markerDecorationsService.getLiveMarkers(model.uri)) {\n\t\t\tif (marker.severity === MarkerSeverity.Error || marker.severity === MarkerSeverity.Warning) {\n\t\t\t\tmarkers.push({ ...range, severity: marker.severity });\n\t\t\t}\n\t\t}\n\t\tmodel.updateMarker(markers);\n\t}\n\n\tprivate _setOutlineModel(model: OutlineModel | undefined) {\n\t\tconst position = this._editor.getPosition();\n\t\tif (!position || !model) {\n\t\t\tthis._outlineModel = undefined;\n\t\t\tthis._breadcrumbsDataSource.clear();\n\t\t} else {\n\t\t\tif (!this._outlineModel?.merge(model)) {\n\t\t\t\tthis._outlineModel = model;\n\t\t\t}\n\t\t\tthis._breadcrumbsDataSource.update(model, position);\n\t\t}\n\t\tthis._onDidChange.fire({});\n\t}\n}\n\nclass DocumentSymbolsOutlineCreator implements IOutlineCreator<IEditorPane, DocumentSymbolItem> {\n\n\treadonly dispose: () => void;\n\n\tconstructor(\n\t\t@IOutlineService outlineService: IOutlineService\n\t) {\n\t\tconst reg = outlineService.registerOutlineCreator(this);\n\t\tthis.dispose = () => reg.dispose();\n\t}\n\n\tmatches(candidate: IEditorPane): candidate is IEditorPane {\n\t\tconst ctrl = candidate.getControl();\n\t\treturn isCodeEditor(ctrl) || isDiffEditor(ctrl);\n\t}\n\n\tasync createOutline(pane: IEditorPane, target: OutlineTarget, _token: CancellationToken): Promise<IOutline<DocumentSymbolItem> | undefined> {\n\t\tconst control = pane.getControl();\n\t\tlet editor: ICodeEditor | undefined;\n\t\tif (isCodeEditor(control)) {\n\t\t\teditor = control;\n\t\t} else if (isDiffEditor(control)) {\n\t\t\teditor = control.getModifiedEditor();\n\t\t}\n\t\tif (!editor) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst firstLoadBarrier = new Barrier();\n\t\tconst result = editor.invokeWithinContext(accessor => accessor.get(IInstantiationService).createInstance(DocumentSymbolsOutline, editor, target, firstLoadBarrier));\n\t\tawait firstLoadBarrier.wait();\n\t\treturn result;\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(DocumentSymbolsOutlineCreator, LifecyclePhase.Eventually);\n"]}