{"version":3,"sources":["vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,oBAAoB,CAAC;AAC1C,OAAO,KAAK,IAAI,MAAM,iCAAiC,CAAC;AACxD,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAElE,OAAO,EAAmC,0BAA0B,EAAE,MAAM,gDAAgD,CAAC;AAE7H,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,MAAM,0DAA0D,CAAC;AAE1G;;GAEG;AACI,IAAM,4BAA4B,GAAlC,MAAM,4BAA6B,SAAQ,UAAU;aAEpC,OAAE,GAAG,6CAAH,AAAgD,CAAC;IAE1E,YACkB,OAAoB,EACE,oBAA0C,EACzC,qBAA4C;QAEpF,KAAK,EAAE,CAAC;QAJS,YAAO,GAAP,OAAO,CAAa;QACE,yBAAoB,GAApB,oBAAoB,CAAsB;QACzC,0BAAqB,GAArB,qBAAqB,CAAuB;QAIpF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,OAAO,EAAE,CAAC;IAChB,CAAC;IAEO,OAAO;QACd,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QACtC,IAAI,CAAC,KAAK,EAAE,CAAC;YACZ,OAAO;QACR,CAAC;QAED,IAAI,KAAK,CAAC,yBAAyB,EAAE,EAAE,CAAC;YACvC,MAAM,OAAO,GAAG,GAAG,CAAC,QAAQ,CAC3B;gBACC,GAAG,EAAE,WAAW;gBAChB,OAAO,EAAE;oBACR,iCAAiC;iBACjC;6CACD,EACD,IAA8L,EAC9L,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAC7B,CAAC;YAEF,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE;gBACxD;oBACC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAqB,EAAE,IAA4B,CAAC;oBACxE,GAAG,EAAE,GAAG,EAAE;wBACT,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;4BACxF,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAkB,EAAE,IAA8D,CAAC,CAAC,CAAC;wBAClI,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE;4BACV,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACtC,CAAC,CAAC,CAAC;oBACJ,CAAC;iBACD;aACD,EAAE,EAAE,cAAc,EAAE,EAAE,EAAE,EAAE,6CAA6C,EAAE,EAAE,CAAC,CAAC;QAC/E,CAAC;IACF,CAAC;;AA9CW,4BAA4B;IAMtC,WAAA,oBAAoB,CAAA;IACpB,WAAA,qBAAqB,CAAA;GAPX,4BAA4B,CA+CxC;;AAED,0BAA0B,CAAC,4BAA4B,CAAC,EAAE,EAAE,4BAA4B,2DAAmD,CAAC","file":"largeFileOptimizations.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as path from '../../../../base/common/path.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorContributionInstantiation, registerEditorContribution } from '../../../../editor/browser/editorExtensions.js';\nimport { IEditorContribution } from '../../../../editor/common/editorCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\n\n/**\n * Shows a message when opening a large file which has been memory optimized (and features disabled).\n */\nexport class LargeFileOptimizationsWarner extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.largeFileOptimizationsWarner';\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editor.onDidChangeModel((e) => this._update()));\n\t\tthis._update();\n\t}\n\n\tprivate _update(): void {\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (model.isTooLargeForTokenization()) {\n\t\t\tconst message = nls.localize(\n\t\t\t\t{\n\t\t\t\t\tkey: 'largeFile',\n\t\t\t\t\tcomment: [\n\t\t\t\t\t\t'Variable 0 will be a file name.'\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"{0}: tokenization, wrapping, folding, codelens, word highlighting and sticky scroll have been turned off for this large file in order to reduce memory usage and avoid freezing or crashing.\",\n\t\t\t\tpath.basename(model.uri.path)\n\t\t\t);\n\n\t\t\tthis._notificationService.prompt(Severity.Info, message, [\n\t\t\t\t{\n\t\t\t\t\tlabel: nls.localize('removeOptimizations', \"Forcefully Enable Features\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthis._configurationService.updateValue(`editor.largeFileOptimizations`, false).then(() => {\n\t\t\t\t\t\t\tthis._notificationService.info(nls.localize('reopenFilePrompt', \"Please reopen file in order for this setting to take effect.\"));\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tthis._notificationService.error(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t], { neverShowAgain: { id: 'editor.contrib.largeFileOptimizationsWarner' } });\n\t\t}\n\t}\n}\n\nregisterEditorContribution(LargeFileOptimizationsWarner.ID, LargeFileOptimizationsWarner, EditorContributionInstantiation.AfterFirstRender);\n"]}