{"version":3,"sources":["vs/workbench/contrib/codeEditor/browser/quickaccess/gotoSymbolQuickAccess.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAGhG,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;AAC5D,OAAO,EAAiC,kBAAkB,EAAc,cAAc,EAAE,MAAM,yDAAyD,CAAC;AACxJ,OAAO,EAAE,cAAc,EAAE,MAAM,qDAAqD,CAAC;AAErF,OAAO,EAAE,QAAQ,EAAE,MAAM,qDAAqD,CAAC;AAC/E,OAAO,EAAwB,UAAU,IAAI,qBAAqB,EAAE,MAAM,0DAA0D,CAAC;AACrI,OAAO,EAAE,qCAAqC,EAA4B,MAAM,4EAA4E,CAAC;AAC7J,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AAGtG,OAAO,EAAE,eAAe,EAAe,YAAY,EAAE,UAAU,EAAE,iBAAiB,EAAE,MAAM,yCAAyC,CAAC;AACpI,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAqB,uBAAuB,EAAE,MAAM,4CAA4C,CAAC;AACxG,OAAO,EAAE,eAAe,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,mDAAmD,CAAC;AAErG,OAAO,EAAE,YAAY,EAAE,MAAM,2CAA2C,CAAC;AAEzE,OAAO,EAAE,UAAU,EAAE,MAAM,uCAAuC,CAAC;AACnE,OAAO,EAAE,iBAAiB,EAAE,MAAM,sCAAsC,CAAC;AAIzE,OAAO,EAAE,eAAe,EAAiB,MAAM,iDAAiD,CAAC;AACjG,OAAO,EAAE,iBAAiB,EAAE,MAAM,gDAAgD,CAAC;AAEnF,OAAO,EAAE,oBAAoB,EAAE,MAAM,2DAA2D,CAAC;AACjG,OAAO,EAAE,oBAAoB,EAAE,MAAM,uEAAuE,CAAC;AAC7G,OAAO,EAAE,wBAAwB,EAAE,MAAM,2DAA2D,CAAC;AACrG,OAAO,EAAE,cAAc,EAAE,MAAM,yDAAyD,CAAC;AACzF,OAAO,EAAE,wBAAwB,EAAE,qBAAqB,EAAE,MAAM,8DAA8D,CAAC;AAC/H,OAAO,EAAE,qBAAqB,EAAE,mBAAmB,EAAE,MAAM,0CAA0C,CAAC;AAE/F,IAAM,6BAA6B,GAAnC,MAAM,6BAA8B,SAAQ,qCAAqC;;IAIvF,YACkC,aAA6B,EACvB,kBAAwC,EACvC,oBAA2C,EACzD,uBAAiD,EACzC,cAA+B,EAC3C,mBAAyC;QAE/D,KAAK,CAAC,uBAAuB,EAAE,mBAAmB,EAAE;YACnD,uBAAuB,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,uBAAuB;SACzE,CAAC,CAAC;QAT8B,kBAAa,GAAb,aAAa,CAAgB;QACvB,uBAAkB,GAAlB,kBAAkB,CAAsB;QACvC,yBAAoB,GAApB,oBAAoB,CAAuB;QAEjD,mBAAc,GAAd,cAAc,CAAiB;QAMjE,IAAI,CAAC,kCAAkC,GAAG,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC;IACtF,CAAC;IAED,gDAAgD;IAEhD,IAAY,aAAa;QACxB,MAAM,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,EAAiC,CAAC,SAAS,EAAE,MAAM,CAAC;QAE3G,OAAO;YACN,gBAAgB,EAAE,CAAC,YAAY,EAAE,0BAA0B,IAAI,CAAC,YAAY,EAAE,aAAa;YAC3F,uBAAuB,EAAE,YAAY,EAAE,uBAAuB;SAC9D,CAAC;IACH,CAAC;IAED,IAAc,uBAAuB;QAEpC,sEAAsE;QACtE,wEAAwE;QACxE,2EAA2E;QAC3E,yCAAyC;QACzC,IAAI,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC;YAC1E,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,OAAO,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC;IACnD,CAAC;IAEkB,YAAY,CAAC,OAAsC,EAAE,OAAiG;QAExK,2BAA2B;QAC3B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,gBAAgB,IAAI,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;YAC7J,OAAO,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC,+DAA+D;YAE7F,MAAM,aAAa,GAAuB;gBACzC,SAAS,EAAE,OAAO,CAAC,KAAK;gBACxB,MAAM,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,aAAa,CAAC,gBAAgB;gBACtE,aAAa,EAAE,OAAO,CAAC,aAAa;aACpC,CAAC;YAEF,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;QAC9F,CAAC;QAED,iCAAiC;aAC5B,CAAC;YACL,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACtC,CAAC;IACF,CAAC;IAED,YAAY;IAEZ,8DAA8D;aAEtC,yBAAoB,GAAG,IAAH,AAAO,CAAC;IAEpD,KAAK,CAAC,cAAc,CAAC,KAAiB,EAAE,MAAc,EAAE,OAAyC,EAAE,WAA4B,EAAE,KAAwB;QAExJ,kEAAkE;QAClE,8DAA8D;QAC9D,4DAA4D;QAC5D,qDAAqD;QACrD,MAAM,MAAM,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC;YACjC,IAAI,CAAC,6BAA6B,CAAC,KAAK,EAAE,WAAW,CAAC;YACtD,OAAO,CAAC,+BAA6B,CAAC,oBAAoB,CAAC;SAC3D,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,IAAI,KAAK,CAAC,uBAAuB,EAAE,CAAC;YAC9C,OAAO,EAAE,CAAC;QACX,CAAC;QAED,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,YAAY,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IAClH,CAAC;IAED,YAAY;IAEO,wBAAwB,CAAC,MAAqE;QAChH,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;YACtC,OAAO,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACvC,CAAC;QACD,OAAO,KAAK,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC;IAC/C,CAAC;IAEO,yBAAyB;QAChC,OAAO,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;IAChI,CAAC;IAEO,iBAAiB,CAAC,MAAqE;QAC9F,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC;QACjD,IAAI,CAAC,IAAI,EAAE,CAAC;YACX,OAAO,UAAU,CAAC,IAAI,CAAC;QACxB,CAAC;QACD,MAAM,GAAG,GAAG,IAAI,uBAAuB,EAAE,CAAC;QAE1C,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAEvD,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QAEnB,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,mCAA2B,GAAG,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;YAE1F,IAAI,CAAC,OAAO,EAAE,CAAC;gBACd,OAAO;YACR,CAAC;YACD,IAAI,GAAG,CAAC,KAAK,CAAC,uBAAuB,EAAE,CAAC;gBACvC,OAAO,CAAC,OAAO,EAAE,CAAC;gBAClB,OAAO;YACR,CAAC;YAED,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YAEzB,MAAM,SAAS,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC;YAC7C,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE;gBACjC,IAAI,MAAM,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBACvC,SAAS,CAAC,OAAO,EAAE,CAAC;gBACrB,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,MAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,CAAC;YAE1E,MAAM,KAAK,GAA+B,OAAO,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE;gBACpE,OAAO;oBACN,IAAI,yBAAiB;oBACrB,KAAK,EAAE,GAAG;oBACV,KAAK,EAAE,CAAC;oBACR,KAAK,EAAE,KAAK,CAAC,KAAK;oBAClB,WAAW,EAAE,KAAK,CAAC,WAAW;oBAC9B,SAAS,EAAE,KAAK,CAAC,SAAS;oBAC1B,WAAW,EAAE,KAAK,CAAC,WAAW;iBAC9B,CAAC;YACH,CAAC,CAAC,CAAC;YAEH,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE;gBACvC,MAAM,CAAC,IAAI,EAAE,CAAC;gBACd,MAAM,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,aAAa,CAAC;gBACrC,IAAI,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC;oBACnC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAChE,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YAEJ,MAAM,iBAAiB,GAAG,GAAG,EAAE;gBAC9B,MAAM,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBACzC,IAAI,MAAM,CAAC,KAAK,KAAK,GAAG,EAAE,CAAC;wBAC1B,oCAAoC;wBACpC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;wBACf,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;wBAC5B,OAAO,IAAI,CAAC;oBACb,CAAC;oBAED,MAAM,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,qCAAqC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;oBACxG,MAAM,WAAW,GAAG,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACpD,MAAM,KAAK,GAAG,UAAU,CAAC,YAAY,EAAE,YAAY,CAAC,WAAW,EAAE,EAAE,CAAC,EACnE,WAAW,CAAC,IAAI,EAAE,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,EACnD,EAAE,mBAAmB,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC;oBAEtD,IAAI,CAAC,KAAK,EAAE,CAAC;wBACZ,OAAO,KAAK,CAAC;oBACd,CAAC;oBAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,UAAU,GAAG,EAAE,KAAK,EAAE,qBAAqB,CAAC,YAAY,EAAE,WAAW,CAAC,IAAI,SAAS,EAAE,CAAC;oBAC3F,OAAO,IAAI,CAAC;gBACb,CAAC,CAAC,CAAC;gBAEH,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;oBAChC,MAAM,KAAK,GAAG,QAAQ,CAAC,IAAO,EAAE,IAAqB,CAAC,CAAC;oBACvD,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,IAAI,4BAAmB,EAAE,CAAC,CAAC;oBAC/D,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;gBAC1B,CAAC;qBAAM,CAAC;oBACP,MAAM,CAAC,KAAK,GAAG,aAAa,CAAC;gBAC9B,CAAC;YACF,CAAC,CAAC;YACF,iBAAiB,EAAE,CAAC;YACpB,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAC,CAAC;YAE5D,MAAM,iBAAiB,GAAG,IAAI,iBAAiB,EAAE,CAAC;YAClD,WAAW,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;YAEnC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;gBAC7C,MAAM,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC;gBACnC,IAAI,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC;oBACnC,iBAAiB,CAAC,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC;gBACzE,CAAC;qBAAM,CAAC;oBACP,iBAAiB,CAAC,KAAK,EAAE,CAAC;gBAC3B,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QAEL,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;YACd,iBAAiB,CAAC,GAAG,CAAC,CAAC;YACvB,MAAM,CAAC,IAAI,EAAE,CAAC;QACf,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE;YACf,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC;QACrB,CAAC,CAAC,CAAC;QAEH,OAAO,WAAW,CAAC;IACpB,CAAC;;AAhNW,6BAA6B;IAKvC,WAAA,cAAc,CAAA;IACd,WAAA,oBAAoB,CAAA;IACpB,WAAA,qBAAqB,CAAA;IACrB,WAAA,wBAAwB,CAAA;IACxB,WAAA,eAAe,CAAA;IACf,WAAA,oBAAoB,CAAA;GAVV,6BAA6B,CAiNzC;;AAED,MAAM,gBAAiB,SAAQ,OAAO;aAErB,OAAE,GAAG,6BAA6B,CAAC;IAEnD;QACC,KAAK,CAAC;YACL,EAAE,EAAE,gBAAgB,CAAC,EAAE;YACvB,KAAK,EAAE;gBACN,GAAG,SAAS,CAAC,IAAY,EAAE,2BAA2B,CAAC;gBACvD,aAAa,EAAE,QAAQ,CAAC,EAAE,EAAiE,CAA9D,CAAgE,CAA9D,GAA2F,CAAC,kBAAtE,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;aACzF;YACD,EAAE,EAAE,IAAI;YACR,UAAU,EAAE;gBACX,IAAI,EAAE,cAAc,CAAC,GAAG,CAAC,qBAAqB,CAAC,MAAM,EAAE,EAAE,wBAAwB,CAAC,MAAM,EAAE,CAAC;gBAC3F,MAAM,6CAAmC;gBACzC,OAAO,EAAE,mDAA6B,wBAAe;aACrD;YACD,IAAI,EAAE,CAAC;oBACN,EAAE,EAAE,MAAM,CAAC,aAAa;oBACxB,KAAK,EAAE,cAAc;oBACrB,KAAK,EAAE,CAAC;iBACR,CAAC;SACF,CAAC,CAAC;IACJ,CAAC;IAED,GAAG,CAAC,QAA0B;QAC7B,QAAQ,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,6BAA6B,CAAC,MAAM,EAAE,EAAE,cAAc,EAAE,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC;IAClI,CAAC;;AAGF,eAAe,CAAC,gBAAgB,CAAC,CAAC;AAElC,QAAQ,CAAC,EAAE,CAAuB,qBAAqB,CAAC,WAAW,CAAC,CAAC,2BAA2B,CAAC;IAChG,IAAI,EAAE,6BAA6B;IACnC,MAAM,EAAE,qCAAqC,CAAC,MAAM;IACpD,UAAU,EAAE,qBAAqB;IACjC,WAAW,EAAE,QAAQ,CAAC,IAAkC,EAAE,IAAqC,CAAC;IAChG,WAAW,EAAE;QACZ;YACC,WAAW,EAAE,QAAQ,CAAC,IAAuB,EAAE,IAAwB,CAAC;YACxE,MAAM,EAAE,qCAAqC,CAAC,MAAM;YACpD,SAAS,EAAE,gBAAgB,CAAC,EAAE;YAC9B,kBAAkB,EAAE,EAAE;SACtB;QACD;YACC,WAAW,EAAE,QAAQ,CAAC,IAAiC,EAAE,IAAoC,CAAC;YAC9F,MAAM,EAAE,qCAAqC,CAAC,kBAAkB;SAChE;KACD;CACD,CAAC,CAAC","file":"gotoSymbolQuickAccess.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../../base/common/event.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { IKeyMods, IQuickPickSeparator, IQuickInputService, IQuickPick, ItemActivation } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IRange } from '../../../../../editor/common/core/range.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IQuickAccessRegistry, Extensions as QuickaccessExtensions } from '../../../../../platform/quickinput/common/quickAccess.js';\nimport { AbstractGotoSymbolQuickAccessProvider, IGotoSymbolQuickPickItem } from '../../../../../editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IWorkbenchEditorConfiguration } from '../../../../common/editor.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { DisposableStore, IDisposable, toDisposable, Disposable, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { registerAction2, Action2, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { KeyMod, KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { prepareQuery } from '../../../../../base/common/fuzzyScorer.js';\nimport { SymbolKind } from '../../../../../editor/common/languages.js';\nimport { fuzzyScore } from '../../../../../base/common/filters.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IQuickAccessTextEditorContext } from '../../../../../editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js';\nimport { IOutlineService, OutlineTarget } from '../../../../services/outline/browser/outline.js';\nimport { isCompositeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { ITextEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { IOutlineModelService } from '../../../../../editor/contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../../../editor/common/services/languageFeatures.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { accessibilityHelpIsShown, accessibleViewIsShown } from '../../../accessibility/browser/accessibilityConfiguration.js';\nimport { matchesFuzzyIconAware, parseLabelWithIcons } from '../../../../../base/common/iconLabels.js';\n\nexport class GotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n\n\tprotected readonly onDidActiveTextEditorControlChange: Event<void>;\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t\t@IOutlineService private readonly outlineService: IOutlineService,\n\t\t@IOutlineModelService outlineModelService: IOutlineModelService,\n\t) {\n\t\tsuper(languageFeaturesService, outlineModelService, {\n\t\t\topenSideBySideDirection: () => this.configuration.openSideBySideDirection\n\t\t});\n\t\tthis.onDidActiveTextEditorControlChange = this.editorService.onDidActiveEditorChange;\n\t}\n\n\t//#region DocumentSymbols (text editor required)\n\n\tprivate get configuration() {\n\t\tconst editorConfig = this.configurationService.getValue<IWorkbenchEditorConfiguration>().workbench?.editor;\n\n\t\treturn {\n\t\t\topenEditorPinned: !editorConfig?.enablePreviewFromQuickOpen || !editorConfig?.enablePreview,\n\t\t\topenSideBySideDirection: editorConfig?.openSideBySideDirection\n\t\t};\n\t}\n\n\tprotected get activeTextEditorControl() {\n\n\t\t// TODO: this distinction should go away by adopting `IOutlineService`\n\t\t// for all editors (either text based ones or not). Currently text based\n\t\t// editors are not yet using the new outline service infrastructure but the\n\t\t// \"classical\" document symbols approach.\n\t\tif (isCompositeEditor(this.editorService.activeEditorPane?.getControl())) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn this.editorService.activeTextEditorControl;\n\t}\n\n\tprotected override gotoLocation(context: IQuickAccessTextEditorContext, options: { range: IRange; keyMods: IKeyMods; forceSideBySide?: boolean; preserveFocus?: boolean }): void {\n\n\t\t// Check for sideBySide use\n\t\tif ((options.keyMods.alt || (this.configuration.openEditorPinned && options.keyMods.ctrlCmd) || options.forceSideBySide) && this.editorService.activeEditor) {\n\t\t\tcontext.restoreViewState?.(); // since we open to the side, restore view state in this editor\n\n\t\t\tconst editorOptions: ITextEditorOptions = {\n\t\t\t\tselection: options.range,\n\t\t\t\tpinned: options.keyMods.ctrlCmd || this.configuration.openEditorPinned,\n\t\t\t\tpreserveFocus: options.preserveFocus\n\t\t\t};\n\n\t\t\tthis.editorGroupService.sideGroup.openEditor(this.editorService.activeEditor, editorOptions);\n\t\t}\n\n\t\t// Otherwise let parent handle it\n\t\telse {\n\t\t\tsuper.gotoLocation(context, options);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region public methods to use this picker from other pickers\n\n\tprivate static readonly SYMBOL_PICKS_TIMEOUT = 8000;\n\n\tasync getSymbolPicks(model: ITextModel, filter: string, options: { extraContainerLabel?: string }, disposables: DisposableStore, token: CancellationToken): Promise<Array<IGotoSymbolQuickPickItem | IQuickPickSeparator>> {\n\n\t\t// If the registry does not know the model, we wait for as long as\n\t\t// the registry knows it. This helps in cases where a language\n\t\t// registry was not activated yet for providing any symbols.\n\t\t// To not wait forever, we eventually timeout though.\n\t\tconst result = await Promise.race([\n\t\t\tthis.waitForLanguageSymbolRegistry(model, disposables),\n\t\t\ttimeout(GotoSymbolQuickAccessProvider.SYMBOL_PICKS_TIMEOUT)\n\t\t]);\n\n\t\tif (!result || token.isCancellationRequested) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn this.doGetSymbolPicks(this.getDocumentSymbols(model, token), prepareQuery(filter), options, token, model);\n\t}\n\n\t//#endregion\n\n\tprotected override provideWithoutTextEditor(picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>): IDisposable {\n\t\tif (this.canPickWithOutlineService()) {\n\t\t\treturn this.doGetOutlinePicks(picker);\n\t\t}\n\t\treturn super.provideWithoutTextEditor(picker);\n\t}\n\n\tprivate canPickWithOutlineService(): boolean {\n\t\treturn this.editorService.activeEditorPane ? this.outlineService.canCreateOutline(this.editorService.activeEditorPane) : false;\n\t}\n\n\tprivate doGetOutlinePicks(picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>): IDisposable {\n\t\tconst pane = this.editorService.activeEditorPane;\n\t\tif (!pane) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tconst cts = new CancellationTokenSource();\n\n\t\tconst disposables = new DisposableStore();\n\t\tdisposables.add(toDisposable(() => cts.dispose(true)));\n\n\t\tpicker.busy = true;\n\n\t\tthis.outlineService.createOutline(pane, OutlineTarget.QuickPick, cts.token).then(outline => {\n\n\t\t\tif (!outline) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\toutline.dispose();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdisposables.add(outline);\n\n\t\t\tconst viewState = outline.captureViewState();\n\t\t\tdisposables.add(toDisposable(() => {\n\t\t\t\tif (picker.selectedItems.length === 0) {\n\t\t\t\t\tviewState.dispose();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tconst entries = outline.config.quickPickDataSource.getQuickPickElements();\n\n\t\t\tconst items: IGotoSymbolQuickPickItem[] = entries.map((entry, idx) => {\n\t\t\t\treturn {\n\t\t\t\t\tkind: SymbolKind.File,\n\t\t\t\t\tindex: idx,\n\t\t\t\t\tscore: 0,\n\t\t\t\t\tlabel: entry.label,\n\t\t\t\t\tdescription: entry.description,\n\t\t\t\t\tariaLabel: entry.ariaLabel,\n\t\t\t\t\ticonClasses: entry.iconClasses\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tdisposables.add(picker.onDidAccept(() => {\n\t\t\t\tpicker.hide();\n\t\t\t\tconst [entry] = picker.selectedItems;\n\t\t\t\tif (entry && entries[entry.index]) {\n\t\t\t\t\toutline.reveal(entries[entry.index].element, {}, false, false);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tconst updatePickerItems = () => {\n\t\t\t\tconst filteredItems = items.filter(item => {\n\t\t\t\t\tif (picker.value === '@') {\n\t\t\t\t\t\t// default, no filtering, scoring...\n\t\t\t\t\t\titem.score = 0;\n\t\t\t\t\t\titem.highlights = undefined;\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst trimmedQuery = picker.value.substring(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim();\n\t\t\t\t\tconst parsedLabel = parseLabelWithIcons(item.label);\n\t\t\t\t\tconst score = fuzzyScore(trimmedQuery, trimmedQuery.toLowerCase(), 0,\n\t\t\t\t\t\tparsedLabel.text, parsedLabel.text.toLowerCase(), 0,\n\t\t\t\t\t\t{ firstMatchCanBeWeak: true, boostFullMatch: true });\n\n\t\t\t\t\tif (!score) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\titem.score = score[1];\n\t\t\t\t\titem.highlights = { label: matchesFuzzyIconAware(trimmedQuery, parsedLabel) ?? undefined };\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tif (filteredItems.length === 0) {\n\t\t\t\t\tconst label = localize('empty', 'No matching entries');\n\t\t\t\t\tpicker.items = [{ label, index: -1, kind: SymbolKind.String }];\n\t\t\t\t\tpicker.ariaLabel = label;\n\t\t\t\t} else {\n\t\t\t\t\tpicker.items = filteredItems;\n\t\t\t\t}\n\t\t\t};\n\t\t\tupdatePickerItems();\n\t\t\tdisposables.add(picker.onDidChangeValue(updatePickerItems));\n\n\t\t\tconst previewDisposable = new MutableDisposable();\n\t\t\tdisposables.add(previewDisposable);\n\n\t\t\tdisposables.add(picker.onDidChangeActive(() => {\n\t\t\t\tconst [entry] = picker.activeItems;\n\t\t\t\tif (entry && entries[entry.index]) {\n\t\t\t\t\tpreviewDisposable.value = outline.preview(entries[entry.index].element);\n\t\t\t\t} else {\n\t\t\t\t\tpreviewDisposable.clear();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t}).catch(err => {\n\t\t\tonUnexpectedError(err);\n\t\t\tpicker.hide();\n\t\t}).finally(() => {\n\t\t\tpicker.busy = false;\n\t\t});\n\n\t\treturn disposables;\n\t}\n}\n\nclass GotoSymbolAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.action.gotoSymbol';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GotoSymbolAction.ID,\n\t\t\ttitle: {\n\t\t\t\t...localize2('gotoSymbol', \"Go to Symbol in Editor...\"),\n\t\t\t\tmnemonicTitle: localize({ key: 'miGotoSymbolInEditor', comment: ['&& denotes a mnemonic'] }, \"Go to &&Symbol in Editor...\"),\n\t\t\t},\n\t\t\tf1: true,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(accessibleViewIsShown.negate(), accessibilityHelpIsShown.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyO\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.MenubarGoMenu,\n\t\t\t\tgroup: '4_symbol_nav',\n\t\t\t\torder: 1\n\t\t\t}]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor) {\n\t\taccessor.get(IQuickInputService).quickAccess.show(GotoSymbolQuickAccessProvider.PREFIX, { itemActivation: ItemActivation.NONE });\n\t}\n}\n\nregisterAction2(GotoSymbolAction);\n\nRegistry.as<IQuickAccessRegistry>(QuickaccessExtensions.Quickaccess).registerQuickAccessProvider({\n\tctor: GotoSymbolQuickAccessProvider,\n\tprefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n\tcontextKey: 'inFileSymbolsPicker',\n\tplaceholder: localize('gotoSymbolQuickAccessPlaceholder', \"Type the name of a symbol to go to.\"),\n\thelpEntries: [\n\t\t{\n\t\t\tdescription: localize('gotoSymbolQuickAccess', \"Go to Symbol in Editor\"),\n\t\t\tprefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n\t\t\tcommandId: GotoSymbolAction.ID,\n\t\t\tcommandCenterOrder: 40\n\t\t},\n\t\t{\n\t\t\tdescription: localize('gotoSymbolByCategoryQuickAccess', \"Go to Symbol in Editor by Category\"),\n\t\t\tprefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY\n\t\t}\n\t]\n});\n"]}