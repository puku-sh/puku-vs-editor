{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/codeEditor/test/node/autoindent.test.ts","vs/workbench/contrib/codeEditor/test/node/autoindent.test.ts"],"names":[],"mappings":"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","file":"autoindent.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { extname, join } from '../../../../../base/common/path.js';\nimport assert from 'assert';\nimport { DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ILanguageConfigurationService } from '../../../../../editor/common/languages/languageConfigurationRegistry.js';\nimport { getReindentEditOperations } from '../../../../../editor/contrib/indentation/common/indentation.js';\nimport { IRelaxedTextModelCreationOptions, createModelServices, instantiateTextModel } from '../../../../../editor/test/common/testTextModel.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILanguageConfiguration, LanguageConfigurationFileHandler } from '../../common/languageConfigurationExtensionPoint.js';\nimport { parse } from '../../../../../base/common/json.js';\nimport { IRange } from '../../../../../editor/common/core/range.js';\nimport { ISingleEditOperation } from '../../../../../editor/common/core/editOperation.js';\nimport { trimTrailingWhitespace } from '../../../../../editor/common/commands/trimTrailingWhitespaceCommand.js';\nimport { execSync } from 'child_process';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { EncodedTokenizationResult, IState, ITokenizationSupport, TokenizationRegistry } from '../../../../../editor/common/languages.js';\nimport { NullState } from '../../../../../editor/common/languages/nullTokenize.js';\nimport { MetadataConsts, StandardTokenType } from '../../../../../editor/common/encodedTokenAttributes.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { FileAccess } from '../../../../../base/common/network.js';\n\nfunction getIRange(range: IRange): IRange {\n\treturn {\n\t\tstartLineNumber: range.startLineNumber,\n\t\tstartColumn: range.startColumn,\n\t\tendLineNumber: range.endLineNumber,\n\t\tendColumn: range.endColumn\n\t};\n}\n\nconst enum LanguageId {\n\tTypeScript = 'ts-test'\n}\n\nfunction forceTokenizationFromLineToLine(model: ITextModel, startLine: number, endLine: number): void {\n\tfor (let line = startLine; line <= endLine; line++) {\n\t\tmodel.tokenization.forceTokenization(line);\n\t}\n}\n\nfunction registerLanguage(instantiationService: TestInstantiationService, languageId: LanguageId): IDisposable {\n\tconst disposables = new DisposableStore();\n\tconst languageService = instantiationService.get(ILanguageService);\n\tdisposables.add(registerLanguageConfiguration(instantiationService, languageId));\n\tdisposables.add(languageService.registerLanguage({ id: languageId }));\n\treturn disposables;\n}\n\nfunction registerLanguageConfiguration(instantiationService: TestInstantiationService, languageId: LanguageId): IDisposable {\n\tconst languageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\tlet configPath: string;\n\tswitch (languageId) {\n\t\tcase LanguageId.TypeScript:\n\t\t\tconfigPath = FileAccess.asFileUri('vs/workbench/contrib/codeEditor/test/node/language-configuration.json').fsPath;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Unknown languageId');\n\t}\n\tconst configContent = fs.readFileSync(configPath, { encoding: 'utf-8' });\n\tconst parsedConfig = <ILanguageConfiguration>parse(configContent, []);\n\tconst languageConfig = LanguageConfigurationFileHandler.extractValidConfig(languageId, parsedConfig);\n\treturn languageConfigurationService.register(languageId, languageConfig);\n}\n\ninterface StandardTokenTypeData {\n\tstartIndex: number;\n\tstandardTokenType: StandardTokenType;\n}\n\nfunction registerTokenizationSupport(instantiationService: TestInstantiationService, tokens: StandardTokenTypeData[][], languageId: LanguageId): IDisposable {\n\tlet lineIndex = 0;\n\tconst languageService = instantiationService.get(ILanguageService);\n\tconst tokenizationSupport: ITokenizationSupport = {\n\t\tgetInitialState: () => NullState,\n\t\ttokenize: undefined!,\n\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\tconst tokensOnLine = tokens[lineIndex++];\n\t\t\tconst encodedLanguageId = languageService.languageIdCodec.encodeLanguageId(languageId);\n\t\t\tconst result = new Uint32Array(2 * tokensOnLine.length);\n\t\t\tfor (let i = 0; i < tokensOnLine.length; i++) {\n\t\t\t\tresult[2 * i] = tokensOnLine[i].startIndex;\n\t\t\t\tresult[2 * i + 1] =\n\t\t\t\t\t((encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET)\n\t\t\t\t\t\t| (tokensOnLine[i].standardTokenType << MetadataConsts.TOKEN_TYPE_OFFSET));\n\t\t\t}\n\t\t\treturn new EncodedTokenizationResult(result, state);\n\t\t}\n\t};\n\treturn TokenizationRegistry.register(languageId, tokenizationSupport);\n}\n\nsuite('Auto-Reindentation - TypeScript/JavaScript', () => {\n\n\tconst languageId = LanguageId.TypeScript;\n\tconst options: IRelaxedTextModelCreationOptions = {};\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageConfigurationService: ILanguageConfigurationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createModelServices(disposables);\n\t\tlanguageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\t\tdisposables.add(instantiationService);\n\t\tdisposables.add(registerLanguage(instantiationService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(instantiationService, languageId));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\t// Test which can be ran to find cases of incorrect indentation...\n\ttest.skip('Find Cases of Incorrect Indentation with the Reindent Lines Command', () => {\n\n\t\t// ./scripts/test.sh --inspect --grep='Find Cases of Incorrect Indentation with the Reindent Lines Command' --timeout=15000\n\n\t\tfunction walkDirectoryAndReindent(directory: string, languageId: string) {\n\t\t\tconst files = fs.readdirSync(directory, { withFileTypes: true });\n\t\t\tconst directoriesToRecurseOn: string[] = [];\n\t\t\tfor (const file of files) {\n\t\t\t\tif (file.isDirectory()) {\n\t\t\t\t\tdirectoriesToRecurseOn.push(join(directory, file.name));\n\t\t\t\t} else {\n\t\t\t\t\tconst filePathName = join(directory, file.name);\n\t\t\t\t\tconst fileExtension = extname(filePathName);\n\t\t\t\t\tif (fileExtension !== '.ts') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tconst fileContents = fs.readFileSync(filePathName, { encoding: 'utf-8' });\n\t\t\t\t\tconst modelOptions: IRelaxedTextModelCreationOptions = {\n\t\t\t\t\t\ttabSize: 4,\n\t\t\t\t\t\tinsertSpaces: false\n\t\t\t\t\t};\n\t\t\t\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, modelOptions));\n\t\t\t\t\tconst lineCount = model.getLineCount();\n\t\t\t\t\tconst editOperations: ISingleEditOperation[] = [];\n\t\t\t\t\tfor (let line = 1; line <= lineCount - 1; line++) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tNOTE: Uncomment in order to ignore incorrect JS DOC indentation\n\t\t\t\t\t\tconst lineContent = model.getLineContent(line);\n\t\t\t\t\t\tconst trimmedLineContent = lineContent.trim();\n\t\t\t\t\t\tif (trimmedLineContent.length === 0 || trimmedLineContent.startsWith('*') || trimmedLineContent.startsWith('/*')) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst lineContent = model.getLineContent(line);\n\t\t\t\t\t\tconst trimmedLineContent = lineContent.trim();\n\t\t\t\t\t\tif (trimmedLineContent.length === 0) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst editOperation = getReindentEditOperations(model, languageConfigurationService, line, line + 1);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tNOTE: Uncomment in order to see actual incorrect indentation diff\n\t\t\t\t\t\tmodel.applyEdits(editOperation);\n\t\t\t\t\t\t*/\n\t\t\t\t\t\teditOperations.push(...editOperation);\n\t\t\t\t\t}\n\t\t\t\t\tmodel.applyEdits(editOperations);\n\t\t\t\t\tmodel.applyEdits(trimTrailingWhitespace(model, [], true));\n\t\t\t\t\tfs.writeFileSync(filePathName, model.getValue());\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const directory of directoriesToRecurseOn) {\n\t\t\t\twalkDirectoryAndReindent(directory, languageId);\n\t\t\t}\n\t\t}\n\n\t\twalkDirectoryAndReindent('/Users/aiday/Desktop/Test/vscode-test', 'ts-test');\n\t\tconst output = execSync('cd /Users/aiday/Desktop/Test/vscode-test && git diff --shortstat', { encoding: 'utf-8' });\n\t\tconsole.log('\\ngit diff --shortstat:\\n', output);\n\t});\n\n\t// Unit tests for increase and decrease indent patterns...\n\n\t/**\n\t * First increase indent and decrease indent patterns:\n\t *\n\t * - decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/\n\t *  - In (https://macromates.com/manual/en/appendix)\n\t * \t  Either we have white space before the closing bracket, or we have a multi line comment ending on that line followed by whitespaces\n\t *    This is followed by any character.\n\t *    Textmate decrease indent pattern is as follows: /^(.*\\*\\/)?\\s*\\}[;\\s]*$/\n\t *    Presumably allowing multi line comments ending on that line implies that } is itself not part of a multi line comment\n\t *\n\t * - increaseIndentPattern: /^.*\\{[^}\"']*$/\n\t *  - In (https://macromates.com/manual/en/appendix)\n\t *    This regex means that we increase the indent when we have any characters followed by the opening brace, followed by characters\n\t *    except for closing brace }, double quotes \" or single quote '.\n\t *    The } is checked in order to avoid the indentation in the following case `int arr[] = { 1, 2, 3 };`\n\t *    The double quote and single quote are checked in order to avoid the indentation in the following case: str = \"foo {\";\n\t */\n\n\ttest('Issue #25437', () => {\n\t\t// issue: https://github.com/microsoft/vscode/issues/25437\n\t\t// fix: https://github.com/microsoft/vscode/commit/8c82a6c6158574e098561c28d470711f1b484fc8\n\t\t// explanation: var foo = `{`; should not increase indentation\n\n\t\t// increaseIndentPattern: /^.*\\{[^}\"']*$/ -> /^.*\\{[^}\"'`]*$/\n\n\t\tconst fileContents = [\n\t\t\t'const foo = `{`;',\n\t\t\t'    ',\n\t\t].join('\\n');\n\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 5, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 6, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.String },\n\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.String },\n\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.String },\n\t\t\t\t{ startIndex: 15, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 16, standardTokenType: StandardTokenType.Other }\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 4, standardTokenType: StandardTokenType.Other }]\n\t\t];\n\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tforceTokenizationFromLineToLine(model, 1, 2);\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tconst operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 5,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '');\n\t});\n\n\ttest('Enriching the hover', () => {\n\t\t// issue: -\n\t\t// fix: https://github.com/microsoft/vscode/commit/19ae0932c45b1096443a8c1335cf1e02eb99e16d\n\t\t// explanation:\n\t\t//  - decrease indent on ) and ] also\n\t\t//  - increase indent on ( and [ also\n\n\t\t// decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/ -> /^(.*\\*\\/)?\\s*[\\}\\]\\)].*$/\n\t\t// increaseIndentPattern: /^.*\\{[^}\"'`]*$/ -> /^.*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/\n\n\t\tlet fileContents = [\n\t\t\t'function foo(',\n\t\t\t'    bar: string',\n\t\t\t'    ){}',\n\t\t].join('\\n');\n\t\tlet model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tlet editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tlet operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 3,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 3,\n\t\t\t'endColumn': 5,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '');\n\n\t\tfileContents = [\n\t\t\t'function foo(',\n\t\t\t'bar: string',\n\t\t\t'){}',\n\t\t].join('\\n');\n\t\tmodel = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\teditOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\toperation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 1,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '    ');\n\t});\n\n\ttest('Issue #86176', () => {\n\t\t// issue: https://github.com/microsoft/vscode/issues/86176\n\t\t// fix: https://github.com/microsoft/vscode/commit/d89e2e17a5d1ba37c99b1d3929eb6180a5bfc7a8\n\t\t// explanation: When quotation marks are present on the first line of an if statement or for loop, following line should not be indented\n\n\t\t// increaseIndentPattern: /^((?!\\/\\/).)*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/ -> /^((?!\\/\\/).)*(\\{([^}\"'`]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/\n\t\t// explanation: after open brace, do not decrease indent if it is followed on the same line by \"<whitespace characters> // <any characters>\"\n\t\t// todo@aiday-mar: should also apply for when it follows ( and [\n\n\t\tconst fileContents = [\n\t\t\t`if () { // '`,\n\t\t\t`x = 4`,\n\t\t\t`}`\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tconst operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 1,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '    ');\n\t});\n\n\ttest('Issue #141816', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/141816\n\t\t// fix: https://github.com/microsoft/vscode/pull/141997/files\n\t\t// explanation: if (, [, {, is followed by a forward slash then assume we are in a regex pattern, and do not indent\n\n\t\t// increaseIndentPattern: /^((?!\\/\\/).)*(\\{([^}\"'`]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/ -> /^((?!\\/\\/).)*(\\{([^}\"'`/]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`/]*|\\[[^\\]\"'`/]*)$/\n\t\t// -> Final current increase indent pattern at of writing\n\n\t\tconst fileContents = [\n\t\t\t'const r = /{/;',\n\t\t\t'   ',\n\t\t].join('\\n');\n\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 5, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 6, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 7, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other }\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 4, standardTokenType: StandardTokenType.Other }\n\t\t\t]\n\t\t];\n\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tforceTokenizationFromLineToLine(model, 1, 2);\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tconst operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 4,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '');\n\t});\n\n\ttest('Issue #29886', () => {\n\t\t// issue: https://github.com/microsoft/vscode/issues/29886\n\t\t// fix: https://github.com/microsoft/vscode/commit/7910b3d7bab8a721aae98dc05af0b5e1ea9d9782\n\n\t\t// decreaseIndentPattern: /^(.*\\*\\/)?\\s*[\\}\\]\\)].*$/ -> /^((?!.*?\\/\\*).*\\*\\/)?\\s*[\\}\\]\\)].*$/\n\t\t// -> Final current decrease indent pattern at the time of writing\n\n\t\t// explanation: Positive lookahead: (?= «pattern») matches if pattern matches what comes after the current location in the input string.\n\t\t// Negative lookahead: (?! «pattern») matches if pattern does not match what comes after the current location in the input string\n\t\t// The change proposed is to not decrease the indent if there is a multi-line comment ending on the same line before the closing parentheses\n\n\t\tconst fileContents = [\n\t\t\t'function foo() {',\n\t\t\t'    bar(/*  */)',\n\t\t\t'};',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest('Issue #209859: do not do reindentation for tokens inside of a string', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/209859\n\n\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.String },\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t]\n\t\t];\n\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\tconst fileContents = [\n\t\t\t'const foo = `some text',\n\t\t\t'         which is strangely',\n\t\t\t'    indented. It should',\n\t\t\t'   not be reindented.`'\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tforceTokenizationFromLineToLine(model, 1, 4);\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\t// Failing tests inferred from the current regexes...\n\n\ttest.skip('Incorrect deindentation after `*/}` string', () => {\n\n\t\t// explanation: If */ was not before the }, the regex does not allow characters before the }, so there would not be an indent\n\t\t// Here since there is */ before the }, the regex allows all the characters before, hence there is a deindent\n\n\t\tconst fileContents = [\n\t\t\t`const obj = {`,\n\t\t\t`    obj1: {`,\n\t\t\t`        brace : '*/}'`,\n\t\t\t`    }`,\n\t\t\t`}`,\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\t// Failing tests from issues...\n\n\ttest.skip('Issue #56275', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/56275\n\t\t// explanation: If */ was not before the }, the regex does not allow characters before the }, so there would not be an indent\n\t\t// Here since there is */ before the }, the regex allows all the characters before, hence there is a deindent\n\n\t\tlet fileContents = [\n\t\t\t'function foo() {',\n\t\t\t'    var bar = (/b*/);',\n\t\t\t'}',\n\t\t].join('\\n');\n\t\tlet model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tlet editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\n\t\tfileContents = [\n\t\t\t'function foo() {',\n\t\t\t'    var bar = \"/b*/)\";',\n\t\t\t'}',\n\t\t].join('\\n');\n\t\tmodel = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\teditOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest.skip('Issue #116843', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/116843\n\t\t// related: https://github.com/microsoft/vscode/issues/43244\n\t\t// explanation: When you have an arrow function, you don't have { or }, but you would expect indentation to still be done in that way\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst fileContents = [\n\t\t\t'const add1 = (n) =>',\n\t\t\t'\tn + 1;',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest.skip('Issue #185252', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/185252\n\t\t// explanation: Reindenting the comment correctly\n\n\t\tconst fileContents = [\n\t\t\t'/*',\n\t\t\t' * This is a comment.',\n\t\t\t' */',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest.skip('Issue 43244: incorrect indentation when signature of function call spans several lines', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/43244\n\n\t\tconst fileContents = [\n\t\t\t'function callSomeOtherFunction(one: number, two: number) { }',\n\t\t\t'function someFunction() {',\n\t\t\t'    callSomeOtherFunction(4,',\n\t\t\t'        5)',\n\t\t\t'}',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { extname, join } from '../../../../../base/common/path.js';\nimport assert from 'assert';\nimport { DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ILanguageConfigurationService } from '../../../../../editor/common/languages/languageConfigurationRegistry.js';\nimport { getReindentEditOperations } from '../../../../../editor/contrib/indentation/common/indentation.js';\nimport { IRelaxedTextModelCreationOptions, createModelServices, instantiateTextModel } from '../../../../../editor/test/common/testTextModel.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILanguageConfiguration, LanguageConfigurationFileHandler } from '../../common/languageConfigurationExtensionPoint.js';\nimport { parse } from '../../../../../base/common/json.js';\nimport { IRange } from '../../../../../editor/common/core/range.js';\nimport { ISingleEditOperation } from '../../../../../editor/common/core/editOperation.js';\nimport { trimTrailingWhitespace } from '../../../../../editor/common/commands/trimTrailingWhitespaceCommand.js';\nimport { execSync } from 'child_process';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { EncodedTokenizationResult, IState, ITokenizationSupport, TokenizationRegistry } from '../../../../../editor/common/languages.js';\nimport { NullState } from '../../../../../editor/common/languages/nullTokenize.js';\nimport { MetadataConsts, StandardTokenType } from '../../../../../editor/common/encodedTokenAttributes.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { FileAccess } from '../../../../../base/common/network.js';\n\nfunction getIRange(range: IRange): IRange {\n\treturn {\n\t\tstartLineNumber: range.startLineNumber,\n\t\tstartColumn: range.startColumn,\n\t\tendLineNumber: range.endLineNumber,\n\t\tendColumn: range.endColumn\n\t};\n}\n\nconst enum LanguageId {\n\tTypeScript = 'ts-test'\n}\n\nfunction forceTokenizationFromLineToLine(model: ITextModel, startLine: number, endLine: number): void {\n\tfor (let line = startLine; line <= endLine; line++) {\n\t\tmodel.tokenization.forceTokenization(line);\n\t}\n}\n\nfunction registerLanguage(instantiationService: TestInstantiationService, languageId: LanguageId): IDisposable {\n\tconst disposables = new DisposableStore();\n\tconst languageService = instantiationService.get(ILanguageService);\n\tdisposables.add(registerLanguageConfiguration(instantiationService, languageId));\n\tdisposables.add(languageService.registerLanguage({ id: languageId }));\n\treturn disposables;\n}\n\nfunction registerLanguageConfiguration(instantiationService: TestInstantiationService, languageId: LanguageId): IDisposable {\n\tconst languageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\tlet configPath: string;\n\tswitch (languageId) {\n\t\tcase LanguageId.TypeScript:\n\t\t\tconfigPath = FileAccess.asFileUri('vs/workbench/contrib/codeEditor/test/node/language-configuration.json').fsPath;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Unknown languageId');\n\t}\n\tconst configContent = fs.readFileSync(configPath, { encoding: 'utf-8' });\n\tconst parsedConfig = <ILanguageConfiguration>parse(configContent, []);\n\tconst languageConfig = LanguageConfigurationFileHandler.extractValidConfig(languageId, parsedConfig);\n\treturn languageConfigurationService.register(languageId, languageConfig);\n}\n\ninterface StandardTokenTypeData {\n\tstartIndex: number;\n\tstandardTokenType: StandardTokenType;\n}\n\nfunction registerTokenizationSupport(instantiationService: TestInstantiationService, tokens: StandardTokenTypeData[][], languageId: LanguageId): IDisposable {\n\tlet lineIndex = 0;\n\tconst languageService = instantiationService.get(ILanguageService);\n\tconst tokenizationSupport: ITokenizationSupport = {\n\t\tgetInitialState: () => NullState,\n\t\ttokenize: undefined!,\n\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\tconst tokensOnLine = tokens[lineIndex++];\n\t\t\tconst encodedLanguageId = languageService.languageIdCodec.encodeLanguageId(languageId);\n\t\t\tconst result = new Uint32Array(2 * tokensOnLine.length);\n\t\t\tfor (let i = 0; i < tokensOnLine.length; i++) {\n\t\t\t\tresult[2 * i] = tokensOnLine[i].startIndex;\n\t\t\t\tresult[2 * i + 1] =\n\t\t\t\t\t((encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET)\n\t\t\t\t\t\t| (tokensOnLine[i].standardTokenType << MetadataConsts.TOKEN_TYPE_OFFSET));\n\t\t\t}\n\t\t\treturn new EncodedTokenizationResult(result, state);\n\t\t}\n\t};\n\treturn TokenizationRegistry.register(languageId, tokenizationSupport);\n}\n\nsuite('Auto-Reindentation - TypeScript/JavaScript', () => {\n\n\tconst languageId = LanguageId.TypeScript;\n\tconst options: IRelaxedTextModelCreationOptions = {};\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageConfigurationService: ILanguageConfigurationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createModelServices(disposables);\n\t\tlanguageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\t\tdisposables.add(instantiationService);\n\t\tdisposables.add(registerLanguage(instantiationService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(instantiationService, languageId));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\t// Test which can be ran to find cases of incorrect indentation...\n\ttest.skip('Find Cases of Incorrect Indentation with the Reindent Lines Command', () => {\n\n\t\t// ./scripts/test.sh --inspect --grep='Find Cases of Incorrect Indentation with the Reindent Lines Command' --timeout=15000\n\n\t\tfunction walkDirectoryAndReindent(directory: string, languageId: string) {\n\t\t\tconst files = fs.readdirSync(directory, { withFileTypes: true });\n\t\t\tconst directoriesToRecurseOn: string[] = [];\n\t\t\tfor (const file of files) {\n\t\t\t\tif (file.isDirectory()) {\n\t\t\t\t\tdirectoriesToRecurseOn.push(join(directory, file.name));\n\t\t\t\t} else {\n\t\t\t\t\tconst filePathName = join(directory, file.name);\n\t\t\t\t\tconst fileExtension = extname(filePathName);\n\t\t\t\t\tif (fileExtension !== '.ts') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tconst fileContents = fs.readFileSync(filePathName, { encoding: 'utf-8' });\n\t\t\t\t\tconst modelOptions: IRelaxedTextModelCreationOptions = {\n\t\t\t\t\t\ttabSize: 4,\n\t\t\t\t\t\tinsertSpaces: false\n\t\t\t\t\t};\n\t\t\t\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, modelOptions));\n\t\t\t\t\tconst lineCount = model.getLineCount();\n\t\t\t\t\tconst editOperations: ISingleEditOperation[] = [];\n\t\t\t\t\tfor (let line = 1; line <= lineCount - 1; line++) {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tNOTE: Uncomment in order to ignore incorrect JS DOC indentation\n\t\t\t\t\t\tconst lineContent = model.getLineContent(line);\n\t\t\t\t\t\tconst trimmedLineContent = lineContent.trim();\n\t\t\t\t\t\tif (trimmedLineContent.length === 0 || trimmedLineContent.startsWith('*') || trimmedLineContent.startsWith('/*')) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst lineContent = model.getLineContent(line);\n\t\t\t\t\t\tconst trimmedLineContent = lineContent.trim();\n\t\t\t\t\t\tif (trimmedLineContent.length === 0) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst editOperation = getReindentEditOperations(model, languageConfigurationService, line, line + 1);\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tNOTE: Uncomment in order to see actual incorrect indentation diff\n\t\t\t\t\t\tmodel.applyEdits(editOperation);\n\t\t\t\t\t\t*/\n\t\t\t\t\t\teditOperations.push(...editOperation);\n\t\t\t\t\t}\n\t\t\t\t\tmodel.applyEdits(editOperations);\n\t\t\t\t\tmodel.applyEdits(trimTrailingWhitespace(model, [], true));\n\t\t\t\t\tfs.writeFileSync(filePathName, model.getValue());\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const directory of directoriesToRecurseOn) {\n\t\t\t\twalkDirectoryAndReindent(directory, languageId);\n\t\t\t}\n\t\t}\n\n\t\twalkDirectoryAndReindent('/Users/aiday/Desktop/Test/vscode-test', 'ts-test');\n\t\tconst output = execSync('cd /Users/aiday/Desktop/Test/vscode-test && git diff --shortstat', { encoding: 'utf-8' });\n\t\tconsole.log('\\ngit diff --shortstat:\\n', output);\n\t});\n\n\t// Unit tests for increase and decrease indent patterns...\n\n\t/**\n\t * First increase indent and decrease indent patterns:\n\t *\n\t * - decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/\n\t *  - In (https://macromates.com/manual/en/appendix)\n\t * \t  Either we have white space before the closing bracket, or we have a multi line comment ending on that line followed by whitespaces\n\t *    This is followed by any character.\n\t *    Textmate decrease indent pattern is as follows: /^(.*\\*\\/)?\\s*\\}[;\\s]*$/\n\t *    Presumably allowing multi line comments ending on that line implies that } is itself not part of a multi line comment\n\t *\n\t * - increaseIndentPattern: /^.*\\{[^}\"']*$/\n\t *  - In (https://macromates.com/manual/en/appendix)\n\t *    This regex means that we increase the indent when we have any characters followed by the opening brace, followed by characters\n\t *    except for closing brace }, double quotes \" or single quote '.\n\t *    The } is checked in order to avoid the indentation in the following case `int arr[] = { 1, 2, 3 };`\n\t *    The double quote and single quote are checked in order to avoid the indentation in the following case: str = \"foo {\";\n\t */\n\n\ttest('Issue #25437', () => {\n\t\t// issue: https://github.com/microsoft/vscode/issues/25437\n\t\t// fix: https://github.com/microsoft/vscode/commit/8c82a6c6158574e098561c28d470711f1b484fc8\n\t\t// explanation: var foo = `{`; should not increase indentation\n\n\t\t// increaseIndentPattern: /^.*\\{[^}\"']*$/ -> /^.*\\{[^}\"'`]*$/\n\n\t\tconst fileContents = [\n\t\t\t'const foo = `{`;',\n\t\t\t'    ',\n\t\t].join('\\n');\n\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 5, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 6, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.String },\n\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.String },\n\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.String },\n\t\t\t\t{ startIndex: 15, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 16, standardTokenType: StandardTokenType.Other }\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 4, standardTokenType: StandardTokenType.Other }]\n\t\t];\n\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tforceTokenizationFromLineToLine(model, 1, 2);\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tconst operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 5,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '');\n\t});\n\n\ttest('Enriching the hover', () => {\n\t\t// issue: -\n\t\t// fix: https://github.com/microsoft/vscode/commit/19ae0932c45b1096443a8c1335cf1e02eb99e16d\n\t\t// explanation:\n\t\t//  - decrease indent on ) and ] also\n\t\t//  - increase indent on ( and [ also\n\n\t\t// decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/ -> /^(.*\\*\\/)?\\s*[\\}\\]\\)].*$/\n\t\t// increaseIndentPattern: /^.*\\{[^}\"'`]*$/ -> /^.*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/\n\n\t\tlet fileContents = [\n\t\t\t'function foo(',\n\t\t\t'    bar: string',\n\t\t\t'    ){}',\n\t\t].join('\\n');\n\t\tlet model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tlet editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tlet operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 3,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 3,\n\t\t\t'endColumn': 5,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '');\n\n\t\tfileContents = [\n\t\t\t'function foo(',\n\t\t\t'bar: string',\n\t\t\t'){}',\n\t\t].join('\\n');\n\t\tmodel = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\teditOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\toperation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 1,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '    ');\n\t});\n\n\ttest('Issue #86176', () => {\n\t\t// issue: https://github.com/microsoft/vscode/issues/86176\n\t\t// fix: https://github.com/microsoft/vscode/commit/d89e2e17a5d1ba37c99b1d3929eb6180a5bfc7a8\n\t\t// explanation: When quotation marks are present on the first line of an if statement or for loop, following line should not be indented\n\n\t\t// increaseIndentPattern: /^((?!\\/\\/).)*(\\{[^}\"'`]*|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/ -> /^((?!\\/\\/).)*(\\{([^}\"'`]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/\n\t\t// explanation: after open brace, do not decrease indent if it is followed on the same line by \"<whitespace characters> // <any characters>\"\n\t\t// todo@aiday-mar: should also apply for when it follows ( and [\n\n\t\tconst fileContents = [\n\t\t\t`if () { // '`,\n\t\t\t`x = 4`,\n\t\t\t`}`\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tconst operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 1,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '    ');\n\t});\n\n\ttest('Issue #141816', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/141816\n\t\t// fix: https://github.com/microsoft/vscode/pull/141997/files\n\t\t// explanation: if (, [, {, is followed by a forward slash then assume we are in a regex pattern, and do not indent\n\n\t\t// increaseIndentPattern: /^((?!\\/\\/).)*(\\{([^}\"'`]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/ -> /^((?!\\/\\/).)*(\\{([^}\"'`/]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`/]*|\\[[^\\]\"'`/]*)$/\n\t\t// -> Final current increase indent pattern at of writing\n\n\t\tconst fileContents = [\n\t\t\t'const r = /{/;',\n\t\t\t'   ',\n\t\t].join('\\n');\n\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 5, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 6, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 7, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.RegEx },\n\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other }\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 4, standardTokenType: StandardTokenType.Other }\n\t\t\t]\n\t\t];\n\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tforceTokenizationFromLineToLine(model, 1, 2);\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 1);\n\t\tconst operation = editOperations[0];\n\t\tassert.deepStrictEqual(getIRange(operation.range), {\n\t\t\t'startLineNumber': 2,\n\t\t\t'startColumn': 1,\n\t\t\t'endLineNumber': 2,\n\t\t\t'endColumn': 4,\n\t\t});\n\t\tassert.deepStrictEqual(operation.text, '');\n\t});\n\n\ttest('Issue #29886', () => {\n\t\t// issue: https://github.com/microsoft/vscode/issues/29886\n\t\t// fix: https://github.com/microsoft/vscode/commit/7910b3d7bab8a721aae98dc05af0b5e1ea9d9782\n\n\t\t// decreaseIndentPattern: /^(.*\\*\\/)?\\s*[\\}\\]\\)].*$/ -> /^((?!.*?\\/\\*).*\\*\\/)?\\s*[\\}\\]\\)].*$/\n\t\t// -> Final current decrease indent pattern at the time of writing\n\n\t\t// explanation: Positive lookahead: (?= «pattern») matches if pattern matches what comes after the current location in the input string.\n\t\t// Negative lookahead: (?! «pattern») matches if pattern does not match what comes after the current location in the input string\n\t\t// The change proposed is to not decrease the indent if there is a multi-line comment ending on the same line before the closing parentheses\n\n\t\tconst fileContents = [\n\t\t\t'function foo() {',\n\t\t\t'    bar(/*  */)',\n\t\t\t'};',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest('Issue #209859: do not do reindentation for tokens inside of a string', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/209859\n\n\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.String },\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t],\n\t\t\t[\n\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t]\n\t\t];\n\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\tconst fileContents = [\n\t\t\t'const foo = `some text',\n\t\t\t'         which is strangely',\n\t\t\t'    indented. It should',\n\t\t\t'   not be reindented.`'\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tforceTokenizationFromLineToLine(model, 1, 4);\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\t// Failing tests inferred from the current regexes...\n\n\ttest.skip('Incorrect deindentation after `*/}` string', () => {\n\n\t\t// explanation: If */ was not before the }, the regex does not allow characters before the }, so there would not be an indent\n\t\t// Here since there is */ before the }, the regex allows all the characters before, hence there is a deindent\n\n\t\tconst fileContents = [\n\t\t\t`const obj = {`,\n\t\t\t`    obj1: {`,\n\t\t\t`        brace : '*/}'`,\n\t\t\t`    }`,\n\t\t\t`}`,\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\t// Failing tests from issues...\n\n\ttest.skip('Issue #56275', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/56275\n\t\t// explanation: If */ was not before the }, the regex does not allow characters before the }, so there would not be an indent\n\t\t// Here since there is */ before the }, the regex allows all the characters before, hence there is a deindent\n\n\t\tlet fileContents = [\n\t\t\t'function foo() {',\n\t\t\t'    var bar = (/b*/);',\n\t\t\t'}',\n\t\t].join('\\n');\n\t\tlet model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tlet editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\n\t\tfileContents = [\n\t\t\t'function foo() {',\n\t\t\t'    var bar = \"/b*/)\";',\n\t\t\t'}',\n\t\t].join('\\n');\n\t\tmodel = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\teditOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest.skip('Issue #116843', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/116843\n\t\t// related: https://github.com/microsoft/vscode/issues/43244\n\t\t// explanation: When you have an arrow function, you don't have { or }, but you would expect indentation to still be done in that way\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst fileContents = [\n\t\t\t'const add1 = (n) =>',\n\t\t\t'\tn + 1;',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest.skip('Issue #185252', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/185252\n\t\t// explanation: Reindenting the comment correctly\n\n\t\tconst fileContents = [\n\t\t\t'/*',\n\t\t\t' * This is a comment.',\n\t\t\t' */',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n\n\ttest.skip('Issue 43244: incorrect indentation when signature of function call spans several lines', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/43244\n\n\t\tconst fileContents = [\n\t\t\t'function callSomeOtherFunction(one: number, two: number) { }',\n\t\t\t'function someFunction() {',\n\t\t\t'    callSomeOtherFunction(4,',\n\t\t\t'        5)',\n\t\t\t'}',\n\t\t].join('\\n');\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, fileContents, languageId, options));\n\t\tconst editOperations = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n\t\tassert.deepStrictEqual(editOperations.length, 0);\n\t});\n});\n"]}