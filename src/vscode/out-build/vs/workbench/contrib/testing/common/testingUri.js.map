{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/testing/common/testingUri.ts","vs/workbench/contrib/testing/common/testingUri.ts"],"names":[],"mappings":"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","file":"testingUri.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { URI } from '../../../../base/common/uri.js';\n\nexport const TEST_DATA_SCHEME = 'vscode-test-data';\n\nexport const enum TestUriType {\n\t/** All console output for a task */\n\tTaskOutput,\n\t/** All console output for a test in a task */\n\tTestOutput,\n\t/** Specific message in a test */\n\tResultMessage,\n\t/** Specific actual output message in a test */\n\tResultActualOutput,\n\t/** Specific expected output message in a test */\n\tResultExpectedOutput,\n}\n\ninterface IAllOutputReference {\n\ttype: TestUriType.TaskOutput;\n\tresultId: string;\n\ttaskIndex: number;\n}\n\ninterface IResultTestUri {\n\tresultId: string;\n\ttaskIndex: number;\n\ttestExtId: string;\n}\n\ninterface ITestOutputReference extends IResultTestUri {\n\ttype: TestUriType.TestOutput;\n}\n\ninterface IResultTestMessageReference extends IResultTestUri {\n\ttype: TestUriType.ResultMessage;\n\tmessageIndex: number;\n}\n\ninterface ITestDiffOutputReference extends IResultTestUri {\n\ttype: TestUriType.ResultActualOutput | TestUriType.ResultExpectedOutput;\n\tmessageIndex: number;\n}\n\nexport type ParsedTestUri =\n\t| IAllOutputReference\n\t| IResultTestMessageReference\n\t| ITestDiffOutputReference\n\t| ITestOutputReference;\n\nconst enum TestUriParts {\n\tResults = 'results',\n\n\tAllOutput = 'output',\n\tMessages = 'message',\n\tText = 'TestFailureMessage',\n\tActualOutput = 'ActualOutput',\n\tExpectedOutput = 'ExpectedOutput',\n}\n\nexport const parseTestUri = (uri: URI): ParsedTestUri | undefined => {\n\tconst type = uri.authority;\n\tconst [resultId, ...request] = uri.path.slice(1).split('/');\n\n\tif (request[0] === TestUriParts.Messages) {\n\t\tconst taskIndex = Number(request[1]);\n\t\tconst testExtId = uri.query;\n\t\tconst index = Number(request[2]);\n\t\tconst part = request[3];\n\t\tif (type === TestUriParts.Results) {\n\t\t\tswitch (part) {\n\t\t\t\tcase TestUriParts.Text:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultMessage };\n\t\t\t\tcase TestUriParts.ActualOutput:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultActualOutput };\n\t\t\t\tcase TestUriParts.ExpectedOutput:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultExpectedOutput };\n\t\t\t\tcase TestUriParts.Messages:\n\t\t\t}\n\t\t}\n\t}\n\n\tif (request[0] === TestUriParts.AllOutput) {\n\t\tconst testExtId = uri.query;\n\t\tconst taskIndex = Number(request[1]);\n\t\treturn testExtId\n\t\t\t? { resultId, taskIndex, testExtId, type: TestUriType.TestOutput }\n\t\t\t: { resultId, taskIndex, type: TestUriType.TaskOutput };\n\t}\n\n\treturn undefined;\n};\n\nexport const buildTestUri = (parsed: ParsedTestUri): URI => {\n\tconst uriParts = {\n\t\tscheme: TEST_DATA_SCHEME,\n\t\tauthority: TestUriParts.Results\n\t};\n\n\tif (parsed.type === TestUriType.TaskOutput) {\n\t\treturn URI.from({\n\t\t\t...uriParts,\n\t\t\tpath: ['', parsed.resultId, TestUriParts.AllOutput, parsed.taskIndex].join('/'),\n\t\t});\n\t}\n\n\tconst msgRef = (resultId: string, ...remaining: (string | number)[]) =>\n\t\tURI.from({\n\t\t\t...uriParts,\n\t\t\tquery: parsed.testExtId,\n\t\t\tpath: ['', resultId, TestUriParts.Messages, ...remaining].join('/'),\n\t\t});\n\n\tswitch (parsed.type) {\n\t\tcase TestUriType.ResultActualOutput:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.ActualOutput);\n\t\tcase TestUriType.ResultExpectedOutput:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.ExpectedOutput);\n\t\tcase TestUriType.ResultMessage:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.Text);\n\t\tcase TestUriType.TestOutput:\n\t\t\treturn URI.from({\n\t\t\t\t...uriParts,\n\t\t\t\tquery: parsed.testExtId,\n\t\t\t\tpath: ['', parsed.resultId, TestUriParts.AllOutput, parsed.taskIndex].join('/'),\n\t\t\t});\n\t\tdefault:\n\t\t\tassertNever(parsed, 'Invalid test uri');\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { URI } from '../../../../base/common/uri.js';\n\nexport const TEST_DATA_SCHEME = 'vscode-test-data';\n\nexport const enum TestUriType {\n\t/** All console output for a task */\n\tTaskOutput,\n\t/** All console output for a test in a task */\n\tTestOutput,\n\t/** Specific message in a test */\n\tResultMessage,\n\t/** Specific actual output message in a test */\n\tResultActualOutput,\n\t/** Specific expected output message in a test */\n\tResultExpectedOutput,\n}\n\ninterface IAllOutputReference {\n\ttype: TestUriType.TaskOutput;\n\tresultId: string;\n\ttaskIndex: number;\n}\n\ninterface IResultTestUri {\n\tresultId: string;\n\ttaskIndex: number;\n\ttestExtId: string;\n}\n\ninterface ITestOutputReference extends IResultTestUri {\n\ttype: TestUriType.TestOutput;\n}\n\ninterface IResultTestMessageReference extends IResultTestUri {\n\ttype: TestUriType.ResultMessage;\n\tmessageIndex: number;\n}\n\ninterface ITestDiffOutputReference extends IResultTestUri {\n\ttype: TestUriType.ResultActualOutput | TestUriType.ResultExpectedOutput;\n\tmessageIndex: number;\n}\n\nexport type ParsedTestUri =\n\t| IAllOutputReference\n\t| IResultTestMessageReference\n\t| ITestDiffOutputReference\n\t| ITestOutputReference;\n\nconst enum TestUriParts {\n\tResults = 'results',\n\n\tAllOutput = 'output',\n\tMessages = 'message',\n\tText = 'TestFailureMessage',\n\tActualOutput = 'ActualOutput',\n\tExpectedOutput = 'ExpectedOutput',\n}\n\nexport const parseTestUri = (uri: URI): ParsedTestUri | undefined => {\n\tconst type = uri.authority;\n\tconst [resultId, ...request] = uri.path.slice(1).split('/');\n\n\tif (request[0] === TestUriParts.Messages) {\n\t\tconst taskIndex = Number(request[1]);\n\t\tconst testExtId = uri.query;\n\t\tconst index = Number(request[2]);\n\t\tconst part = request[3];\n\t\tif (type === TestUriParts.Results) {\n\t\t\tswitch (part) {\n\t\t\t\tcase TestUriParts.Text:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultMessage };\n\t\t\t\tcase TestUriParts.ActualOutput:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultActualOutput };\n\t\t\t\tcase TestUriParts.ExpectedOutput:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultExpectedOutput };\n\t\t\t\tcase TestUriParts.Messages:\n\t\t\t}\n\t\t}\n\t}\n\n\tif (request[0] === TestUriParts.AllOutput) {\n\t\tconst testExtId = uri.query;\n\t\tconst taskIndex = Number(request[1]);\n\t\treturn testExtId\n\t\t\t? { resultId, taskIndex, testExtId, type: TestUriType.TestOutput }\n\t\t\t: { resultId, taskIndex, type: TestUriType.TaskOutput };\n\t}\n\n\treturn undefined;\n};\n\nexport const buildTestUri = (parsed: ParsedTestUri): URI => {\n\tconst uriParts = {\n\t\tscheme: TEST_DATA_SCHEME,\n\t\tauthority: TestUriParts.Results\n\t};\n\n\tif (parsed.type === TestUriType.TaskOutput) {\n\t\treturn URI.from({\n\t\t\t...uriParts,\n\t\t\tpath: ['', parsed.resultId, TestUriParts.AllOutput, parsed.taskIndex].join('/'),\n\t\t});\n\t}\n\n\tconst msgRef = (resultId: string, ...remaining: (string | number)[]) =>\n\t\tURI.from({\n\t\t\t...uriParts,\n\t\t\tquery: parsed.testExtId,\n\t\t\tpath: ['', resultId, TestUriParts.Messages, ...remaining].join('/'),\n\t\t});\n\n\tswitch (parsed.type) {\n\t\tcase TestUriType.ResultActualOutput:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.ActualOutput);\n\t\tcase TestUriType.ResultExpectedOutput:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.ExpectedOutput);\n\t\tcase TestUriType.ResultMessage:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.Text);\n\t\tcase TestUriType.TestOutput:\n\t\t\treturn URI.from({\n\t\t\t\t...uriParts,\n\t\t\t\tquery: parsed.testExtId,\n\t\t\t\tpath: ['', parsed.resultId, TestUriParts.AllOutput, parsed.taskIndex].join('/'),\n\t\t\t});\n\t\tdefault:\n\t\t\tassertNever(parsed, 'Invalid test uri');\n\t}\n};\n"]}