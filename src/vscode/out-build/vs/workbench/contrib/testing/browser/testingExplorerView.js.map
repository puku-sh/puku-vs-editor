{"version":3,"sources":["vs/workbench/contrib/testing/browser/testingExplorerView.ts"],"names":[],"mappings":"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","file":"testingExplorerView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { IActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { ActionBar, IActionViewItem } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport type { IManagedHover } from '../../../../base/browser/ui/hover/hover.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { IIdentityProvider, IKeyboardNavigationLabelProvider, IListVirtualDelegate } from '../../../../base/browser/ui/list/list.js';\nimport { DefaultKeyboardNavigationDelegate, IListAccessibilityProvider } from '../../../../base/browser/ui/list/listWidget.js';\nimport { ITreeContextMenuEvent, ITreeFilter, ITreeNode, ITreeRenderer, ITreeSorter, TreeFilterResult, TreeVisibility } from '../../../../base/browser/ui/tree/tree.js';\nimport { Action, ActionRunner, IAction, Separator, toAction } from '../../../../base/common/actions.js';\nimport { mapFindFirst } from '../../../../base/common/arraysFind.js';\nimport { RunOnceScheduler, disposableTimeout } from '../../../../base/common/async.js';\nimport { groupBy } from '../../../../base/common/collections.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { compareFileNames } from '../../../../base/common/comparers.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, observableFromEvent } from '../../../../base/common/observable.js';\nimport { fuzzyContains } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IMarkdownRendererService } from '../../../../platform/markdown/browser/markdownRenderer.js';\nimport { localize } from '../../../../nls.js';\nimport { DropdownWithPrimaryActionViewItem } from '../../../../platform/actions/browser/dropdownWithPrimaryActionViewItem.js';\nimport { MenuEntryActionViewItem, createActionViewItem, getActionBarActions, getFlatContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { UnmanagedProgress } from '../../../../platform/progress/common/progress.js';\nimport { IStorageService, StorageScope, StorageTarget, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nimport { defaultButtonStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { spinningLoading } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { registerNavigableContainer } from '../../../browser/actions/widgetNavigationCommands.js';\nimport { ViewPane } from '../../../browser/parts/views/viewPane.js';\nimport { IViewletViewOptions } from '../../../browser/parts/views/viewsViewlet.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IActivityService, IconBadge, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { TestingConfigKeys, TestingCountBadge, getTestingConfiguration } from '../common/configuration.js';\nimport { TestCommandId, TestExplorerViewMode, TestExplorerViewSorting, Testing, labelForTestInState } from '../common/constants.js';\nimport { StoredValue } from '../common/storedValue.js';\nimport { ITestExplorerFilterState, TestExplorerFilterState, TestFilterTerm } from '../common/testExplorerFilterState.js';\nimport { TestId } from '../common/testId.js';\nimport { ITestProfileService, canUseProfileWithTest } from '../common/testProfileService.js';\nimport { LiveTestResult, TestResultItemChangeReason } from '../common/testResult.js';\nimport { ITestResultService } from '../common/testResultService.js';\nimport { IMainThreadTestCollection, ITestService, testCollectionIsEmpty } from '../common/testService.js';\nimport { ITestRunProfile, InternalTestItem, TestControllerCapability, TestItemExpandState, TestResultState, TestRunProfileBitset, testProfileBitset, testResultStateToContextValues } from '../common/testTypes.js';\nimport { TestingContextKeys } from '../common/testingContextKeys.js';\nimport { ITestingContinuousRunService } from '../common/testingContinuousRunService.js';\nimport { ITestingPeekOpener } from '../common/testingPeekOpener.js';\nimport { CountSummary, collectTestStateCounts, getTestProgressText } from '../common/testingProgressMessages.js';\nimport { cmpPriority, isFailedState, isStateWithResult, statesInOrder } from '../common/testingStates.js';\nimport { ITestTreeProjection, TestExplorerTreeElement, TestItemTreeElement, TestTreeErrorMessage } from './explorerProjections/index.js';\nimport { ListProjection } from './explorerProjections/listProjection.js';\nimport { getTestItemContextOverlay } from './explorerProjections/testItemContextOverlay.js';\nimport { TestingObjectTree } from './explorerProjections/testingObjectTree.js';\nimport { ISerializedTestTreeCollapseState } from './explorerProjections/testingViewState.js';\nimport { TreeProjection } from './explorerProjections/treeProjection.js';\nimport * as icons from './icons.js';\nimport './media/testing.css';\nimport { DebugLastRun, ReRunLastRun } from './testExplorerActions.js';\nimport { TestingExplorerFilter } from './testingExplorerFilter.js';\n\nconst enum LastFocusState {\n\tInput,\n\tTree,\n}\n\nexport class TestingExplorerView extends ViewPane {\n\tpublic viewModel!: TestingExplorerViewModel;\n\tprivate readonly filterActionBar = this._register(new MutableDisposable());\n\tprivate container!: HTMLElement;\n\tprivate treeHeader!: HTMLElement;\n\tprivate readonly discoveryProgress = this._register(new MutableDisposable<UnmanagedProgress>());\n\tprivate readonly filter = this._register(new MutableDisposable<TestingExplorerFilter>());\n\tprivate readonly filterFocusListener = this._register(new MutableDisposable());\n\tprivate readonly dimensions = { width: 0, height: 0 };\n\tprivate lastFocusState = LastFocusState.Input;\n\n\tpublic get focusedTreeElements() {\n\t\treturn this.viewModel.tree.getFocus().filter(isDefined);\n\t}\n\n\tconstructor(\n\t\toptions: IViewletViewOptions,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITestService private readonly testService: ITestService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@ITestProfileService private readonly testProfileService: ITestProfileService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@ITestingContinuousRunService private readonly crService: ITestingContinuousRunService,\n\t) {\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\n\t\tconst relayout = this._register(new RunOnceScheduler(() => this.layoutBody(), 1));\n\t\tthis._register(this.onDidChangeViewWelcomeState(() => {\n\t\t\tif (!this.shouldShowWelcome()) {\n\t\t\t\trelayout.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.any(crService.onDidChange, testProfileService.onDidChange)(() => {\n\t\t\tthis.updateActions();\n\t\t}));\n\n\t\tthis._register(testService.collection.onBusyProvidersChange(busy => {\n\t\t\tthis.updateDiscoveryProgress(busy);\n\t\t}));\n\n\t\tthis._register(testProfileService.onDidChange(() => this.updateActions()));\n\t}\n\n\tpublic override shouldShowWelcome() {\n\t\treturn this.viewModel?.welcomeExperience === WelcomeExperience.ForWorkspace;\n\t}\n\n\tpublic override focus() {\n\t\tsuper.focus();\n\t\tif (this.lastFocusState === LastFocusState.Tree) {\n\t\t\tthis.viewModel.tree.domFocus();\n\t\t} else {\n\t\t\tthis.filter.value?.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Gets include/exclude items in the tree, based either on visible tests\n\t * or a use selection. If a profile is given, only tests in that profile\n\t * are collected. If a bitset is given, any test that can run in that\n\t * bitset is collected.\n\t */\n\tpublic getTreeIncludeExclude(profileOrBitset: ITestRunProfile | TestRunProfileBitset, withinItems?: InternalTestItem[], filterToType: 'visible' | 'selected' = 'visible') {\n\t\tconst projection = this.viewModel.projection.value;\n\t\tif (!projection) {\n\t\t\treturn { include: [], exclude: [] };\n\t\t}\n\n\t\t// To calculate includes and excludes, we include the first children that\n\t\t// have a majority of their items included too, and then apply exclusions.\n\t\tconst include = new Set<InternalTestItem>();\n\t\tconst exclude: InternalTestItem[] = [];\n\n\t\tconst runnableWithProfileOrBitset = new Map<InternalTestItem, boolean>();\n\t\tconst isRunnableWithProfileOrBitset = (item: InternalTestItem) => {\n\t\t\tlet value = runnableWithProfileOrBitset.get(item);\n\t\t\tif (value === undefined) {\n\t\t\t\tvalue = typeof profileOrBitset === 'number'\n\t\t\t\t\t? !!this.testProfileService.getDefaultProfileForTest(profileOrBitset, item)\n\t\t\t\t\t: canUseProfileWithTest(profileOrBitset, item);\n\t\t\t\trunnableWithProfileOrBitset.set(item, value);\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\n\t\tconst attempt = (element: TestExplorerTreeElement, alreadyIncluded: boolean) => {\n\t\t\t// sanity check hasElement since updates are debounced and they may exist\n\t\t\t// but not be rendered yet\n\t\t\tif (!(element instanceof TestItemTreeElement) || !this.viewModel.tree.hasElement(element)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the current node is not visible or runnable in the current profile, it's excluded\n\t\t\tconst inTree = this.viewModel.tree.getNode(element);\n\t\t\tif (!inTree.visible) {\n\t\t\t\tif (alreadyIncluded) { exclude.push(element.test); }\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only count relevant children when deciding whether to include this node, #229120\n\t\t\tconst visibleRunnableChildren = inTree.children.filter(\n\t\t\t\tc => c.visible\n\t\t\t\t\t&& c.element instanceof TestItemTreeElement\n\t\t\t\t\t&& isRunnableWithProfileOrBitset(c.element.test),\n\t\t\t).length;\n\n\t\t\t// If it's not already included but most of its children are, then add it\n\t\t\t// if it can be run under the current profile (when specified)\n\t\t\tif (\n\t\t\t\t// If it's not already included...\n\t\t\t\t!alreadyIncluded\n\t\t\t\t// And it can be run using the current profile (if any)\n\t\t\t\t&& isRunnableWithProfileOrBitset(element.test)\n\t\t\t\t// And either it's a leaf node or most children are included, then include it.\n\t\t\t\t&& (visibleRunnableChildren === 0 || visibleRunnableChildren * 2 >= inTree.children.length)\n\t\t\t\t// And not if we're only showing a single of its children, since it\n\t\t\t\t// probably fans out later. (Worse case we'll directly include its single child)\n\t\t\t\t&& visibleRunnableChildren !== 1\n\t\t\t) {\n\t\t\t\tinclude.add(element.test);\n\t\t\t\talreadyIncluded = true;\n\t\t\t}\n\n\t\t\t// Recurse \n\t\t\tfor (const child of element.children) {\n\t\t\t\tattempt(child, alreadyIncluded);\n\t\t\t}\n\t\t};\n\n\t\tif (filterToType === 'selected') {\n\t\t\tconst sel = this.viewModel.tree.getSelection().filter(isDefined);\n\t\t\tif (sel.length) {\n\n\t\t\t\tL:\n\t\t\t\tfor (const node of sel) {\n\t\t\t\t\tif (node instanceof TestItemTreeElement) {\n\t\t\t\t\t\t// avoid adding an item if its parent is already included\n\t\t\t\t\t\tfor (let i: TestItemTreeElement | null = node; i; i = i.parent) {\n\t\t\t\t\t\t\tif (include.has(i.test)) {\n\t\t\t\t\t\t\t\tcontinue L;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinclude.add(node.test);\n\t\t\t\t\t\tnode.children.forEach(c => attempt(c, true));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { include: [...include], exclude };\n\t\t\t}\n\t\t}\n\n\t\tfor (const root of withinItems || this.testService.collection.rootItems) {\n\t\t\tconst element = projection.getElementByTestId(root.item.extId);\n\t\t\tif (!element) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (typeof profileOrBitset === 'object' && !canUseProfileWithTest(profileOrBitset, root)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tinclude.add(element.test);\n\t\t\telement.children.forEach(c => attempt(c, true));\n\t\t}\n\n\t\treturn { include: [...include], exclude };\n\t}\n\n\toverride render(): void {\n\t\tsuper.render();\n\t\tthis._register(registerNavigableContainer({\n\t\t\tname: 'testingExplorerView',\n\t\t\tfocusNotifiers: [this],\n\t\t\tfocusNextWidget: () => {\n\t\t\t\tif (!this.viewModel.tree.isDOMFocused()) {\n\t\t\t\t\tthis.viewModel.tree.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfocusPreviousWidget: () => {\n\t\t\t\tif (this.viewModel.tree.isDOMFocused()) {\n\t\t\t\t\tthis.filter.value?.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\t/**\n\t * @override\n\t */\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis.container = dom.append(container, dom.$('.test-explorer'));\n\t\tthis.treeHeader = dom.append(this.container, dom.$('.test-explorer-header'));\n\t\tthis.filterActionBar.value = this.createFilterActionBar();\n\n\t\tconst messagesContainer = dom.append(this.treeHeader, dom.$('.result-summary-container'));\n\t\tthis._register(this.instantiationService.createInstance(ResultSummaryView, messagesContainer));\n\n\t\tconst listContainer = dom.append(this.container, dom.$('.test-explorer-tree'));\n\t\tthis.viewModel = this.instantiationService.createInstance(TestingExplorerViewModel, listContainer, this.onDidChangeBodyVisibility);\n\t\tthis._register(this.viewModel.tree.onDidFocus(() => this.lastFocusState = LastFocusState.Tree));\n\t\tthis._register(this.viewModel.onChangeWelcomeVisibility(() => this._onDidChangeViewWelcomeState.fire()));\n\t\tthis._register(this.viewModel);\n\t\tthis._onDidChangeViewWelcomeState.fire();\n\t}\n\n\t/** @override  */\n\tpublic override createActionViewItem(action: IAction, options: IActionViewItemOptions): IActionViewItem | undefined {\n\t\tswitch (action.id) {\n\t\t\tcase TestCommandId.FilterAction:\n\t\t\t\tthis.filter.value = this.instantiationService.createInstance(TestingExplorerFilter, action, options);\n\t\t\t\tthis.filterFocusListener.value = this.filter.value.onDidFocus(() => this.lastFocusState = LastFocusState.Input);\n\t\t\t\treturn this.filter.value;\n\t\t\tcase TestCommandId.RunSelectedAction:\n\t\t\t\treturn this.getRunGroupDropdown(TestRunProfileBitset.Run, action, options);\n\t\t\tcase TestCommandId.DebugSelectedAction:\n\t\t\t\treturn this.getRunGroupDropdown(TestRunProfileBitset.Debug, action, options);\n\t\t\tcase TestCommandId.StartContinousRun:\n\t\t\tcase TestCommandId.StopContinousRun:\n\t\t\t\treturn this.getContinuousRunDropdown(action, options);\n\t\t\tdefault:\n\t\t\t\treturn super.createActionViewItem(action, options);\n\t\t}\n\t}\n\n\t/** @inheritdoc */\n\tprivate getTestConfigGroupActions(group: TestRunProfileBitset) {\n\t\tconst profileActions: IAction[] = [];\n\n\t\tlet participatingGroups = 0;\n\t\tlet participatingProfiles = 0;\n\t\tlet hasConfigurable = false;\n\t\tconst defaults = this.testProfileService.getGroupDefaultProfiles(group);\n\t\tfor (const { profiles, controller } of this.testProfileService.all()) {\n\t\t\tlet hasAdded = false;\n\n\t\t\tfor (const profile of profiles) {\n\t\t\t\tif (profile.group !== group) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!hasAdded) {\n\t\t\t\t\thasAdded = true;\n\t\t\t\t\tparticipatingGroups++;\n\t\t\t\t\tprofileActions.push(toAction({ id: `${controller.id}.$root`, label: controller.label.get(), enabled: false, checked: false, run: () => { } }));\n\t\t\t\t}\n\n\t\t\t\thasConfigurable = hasConfigurable || profile.hasConfigurationHandler;\n\t\t\t\tparticipatingProfiles++;\n\t\t\t\tprofileActions.push(toAction({\n\t\t\t\t\tid: `${controller.id}.${profile.profileId}`,\n\t\t\t\t\tlabel: defaults.includes(profile) ? localize('defaultTestProfile', '{0} (Default)', profile.label) : profile.label,\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tconst { include, exclude } = this.getTreeIncludeExclude(profile);\n\t\t\t\t\t\tthis.testService.runResolvedTests({\n\t\t\t\t\t\t\texclude: exclude.map(e => e.item.extId),\n\t\t\t\t\t\t\tgroup: profile.group,\n\t\t\t\t\t\t\ttargets: [{\n\t\t\t\t\t\t\t\tprofileId: profile.profileId,\n\t\t\t\t\t\t\t\tcontrollerId: profile.controllerId,\n\t\t\t\t\t\t\t\ttestIds: include.map(i => i.item.extId),\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\tconst contextKeys: [string, unknown][] = [];\n\t\t// allow extension author to define context for when to show the test menu actions for run or debug menus\n\t\tif (group === TestRunProfileBitset.Run) {\n\t\t\tcontextKeys.push(['testing.profile.context.group', 'run']);\n\t\t}\n\t\tif (group === TestRunProfileBitset.Debug) {\n\t\t\tcontextKeys.push(['testing.profile.context.group', 'debug']);\n\t\t}\n\t\tif (group === TestRunProfileBitset.Coverage) {\n\t\t\tcontextKeys.push(['testing.profile.context.group', 'coverage']);\n\t\t}\n\t\tconst key = this.contextKeyService.createOverlay(contextKeys);\n\t\tconst menu = this.menuService.getMenuActions(MenuId.TestProfilesContext, key);\n\n\t\t// fill if there are any actions\n\t\tconst menuActions = getFlatContextMenuActions(menu);\n\n\t\tconst postActions: IAction[] = [];\n\t\tif (participatingProfiles > 1) {\n\t\t\tpostActions.push(toAction({\n\t\t\t\tid: 'selectDefaultTestConfigurations',\n\t\t\t\tlabel: localize('selectDefaultConfigs', 'Select Default Profile'),\n\t\t\t\trun: () => this.commandService.executeCommand<ITestRunProfile>(TestCommandId.SelectDefaultTestProfiles, group),\n\t\t\t}));\n\t\t}\n\n\t\tif (hasConfigurable) {\n\t\t\tpostActions.push(toAction({\n\t\t\t\tid: 'configureTestProfiles',\n\t\t\t\tlabel: localize('configureTestProfiles', 'Configure Test Profiles'),\n\t\t\t\trun: () => this.commandService.executeCommand<ITestRunProfile>(TestCommandId.ConfigureTestProfilesAction, group),\n\t\t\t}));\n\t\t}\n\n\t\t// show menu actions if there are any otherwise don't\n\t\treturn {\n\t\t\tnumberOfProfiles: participatingProfiles,\n\t\t\tactions: menuActions.length > 0\n\t\t\t\t? Separator.join(profileActions, menuActions, postActions)\n\t\t\t\t: Separator.join(profileActions, postActions),\n\t\t};\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic override saveState() {\n\t\tthis.filter.value?.saveState();\n\t\tsuper.saveState();\n\t}\n\n\tprivate getRunGroupDropdown(group: TestRunProfileBitset, defaultAction: IAction, options: IActionViewItemOptions) {\n\t\tconst dropdownActions = this.getTestConfigGroupActions(group);\n\t\tif (dropdownActions.numberOfProfiles < 2) {\n\t\t\treturn super.createActionViewItem(defaultAction, options);\n\t\t}\n\n\t\tconst primaryAction = this.instantiationService.createInstance(MenuItemAction, {\n\t\t\tid: defaultAction.id,\n\t\t\ttitle: defaultAction.label,\n\t\t\ticon: group === TestRunProfileBitset.Run\n\t\t\t\t? icons.testingRunAllIcon\n\t\t\t\t: icons.testingDebugAllIcon,\n\t\t}, undefined, undefined, undefined, undefined);\n\n\t\treturn this.instantiationService.createInstance(\n\t\t\tDropdownWithPrimaryActionViewItem,\n\t\t\tprimaryAction, this.getDropdownAction(), dropdownActions.actions,\n\t\t\t'',\n\t\t\toptions\n\t\t);\n\t}\n\n\tprivate getDropdownAction() {\n\t\treturn new Action('selectRunConfig', localize('testingSelectConfig', 'Select Configuration...'), 'codicon-chevron-down', true);\n\t}\n\n\tprivate getContinuousRunDropdown(defaultAction: IAction, options: IActionViewItemOptions) {\n\t\tconst allProfiles = [...Iterable.flatMap(this.testProfileService.all(), (cr): Iterable<ITestRunProfile> => {\n\t\t\tif (this.testService.collection.getNodeById(cr.controller.id)?.children.size) {\n\t\t\t\treturn Iterable.filter(cr.profiles, p => p.supportsContinuousRun);\n\t\t\t}\n\t\t\treturn Iterable.empty();\n\t\t})];\n\n\t\tif (allProfiles.length <= 1) {\n\t\t\treturn super.createActionViewItem(defaultAction, options);\n\t\t}\n\n\t\tconst primaryAction = this.instantiationService.createInstance(MenuItemAction, {\n\t\t\tid: defaultAction.id,\n\t\t\ttitle: defaultAction.label,\n\t\t\ticon: defaultAction.id === TestCommandId.StartContinousRun ? icons.testingTurnContinuousRunOn : icons.testingTurnContinuousRunOff,\n\t\t}, undefined, undefined, undefined, undefined);\n\n\t\tconst dropdownActions: IAction[] = [];\n\t\tconst groups = groupBy(allProfiles, p => p.group);\n\t\tconst crService = this.crService;\n\t\tfor (const group of [TestRunProfileBitset.Run, TestRunProfileBitset.Debug, TestRunProfileBitset.Coverage] as const) {\n\t\t\tconst profiles = groups[group];\n\t\t\tif (!profiles) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (Object.keys(groups).length > 1) {\n\t\t\t\tdropdownActions.push({\n\t\t\t\t\tid: `${group}.label`,\n\t\t\t\t\tlabel: testProfileBitset[group],\n\t\t\t\t\tenabled: false,\n\t\t\t\t\tclass: undefined,\n\t\t\t\t\ttooltip: testProfileBitset[group],\n\t\t\t\t\trun: () => { },\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (const profile of profiles) {\n\t\t\t\tdropdownActions.push({\n\t\t\t\t\tid: `${group}.${profile.profileId}`,\n\t\t\t\t\tlabel: profile.label,\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tclass: undefined,\n\t\t\t\t\ttooltip: profile.label,\n\t\t\t\t\tchecked: crService.isEnabledForProfile(profile),\n\t\t\t\t\trun: () => crService.isEnabledForProfile(profile)\n\t\t\t\t\t\t? crService.stopProfile(profile)\n\t\t\t\t\t\t: crService.start([profile]),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.instantiationService.createInstance(\n\t\t\tDropdownWithPrimaryActionViewItem,\n\t\t\tprimaryAction, this.getDropdownAction(), dropdownActions,\n\t\t\t'',\n\t\t\toptions\n\t\t);\n\t}\n\n\tprivate createFilterActionBar() {\n\t\tconst bar = new ActionBar(this.treeHeader, {\n\t\t\tactionViewItemProvider: (action, options) => this.createActionViewItem(action, options),\n\t\t\ttriggerKeys: { keyDown: false, keys: [] },\n\t\t});\n\t\tbar.push(new Action(TestCommandId.FilterAction));\n\t\tbar.getContainer().classList.add('testing-filter-action-bar');\n\t\treturn bar;\n\t}\n\n\tprivate updateDiscoveryProgress(busy: number) {\n\t\tif (!busy && this.discoveryProgress) {\n\t\t\tthis.discoveryProgress.clear();\n\t\t} else if (busy && !this.discoveryProgress.value) {\n\t\t\tthis.discoveryProgress.value = this.instantiationService.createInstance(UnmanagedProgress, { location: this.getProgressLocation() });\n\t\t}\n\t}\n\n\t/**\n\t * @override\n\t */\n\tprotected override layoutBody(height = this.dimensions.height, width = this.dimensions.width): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.dimensions.height = height;\n\t\tthis.dimensions.width = width;\n\t\tthis.container.style.height = `${height}px`;\n\t\tthis.viewModel?.layout(height - this.treeHeader.clientHeight, width);\n\t\tthis.filter.value?.layout(width);\n\t}\n}\n\nconst SUMMARY_RENDER_INTERVAL = 200;\n\nclass ResultSummaryView extends Disposable {\n\tprivate elementsWereAttached = false;\n\tprivate badgeType: TestingCountBadge;\n\tprivate lastBadge?: NumberBadge | IconBadge;\n\tprivate countHover: IManagedHover;\n\tprivate readonly badgeDisposable = this._register(new MutableDisposable());\n\tprivate readonly renderLoop = this._register(new RunOnceScheduler(() => this.render(), SUMMARY_RENDER_INTERVAL));\n\tprivate readonly elements = dom.h('div.result-summary', [\n\t\tdom.h('div@status'),\n\t\tdom.h('div@count'),\n\t\tdom.h('div@count'),\n\t\tdom.h('span'),\n\t\tdom.h('duration@duration'),\n\t\tdom.h('a@rerun'),\n\t]);\n\n\tconstructor(\n\t\tprivate readonly container: HTMLElement,\n\t\t@ITestResultService private readonly resultService: ITestResultService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@ITestingContinuousRunService private readonly crService: ITestingContinuousRunService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IHoverService hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\n\t\tthis.badgeType = configurationService.getValue<TestingCountBadge>(TestingConfigKeys.CountBadge);\n\t\tthis._register(resultService.onResultsChanged(this.render, this));\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TestingConfigKeys.CountBadge)) {\n\t\t\t\tthis.badgeType = configurationService.getValue(TestingConfigKeys.CountBadge);\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}));\n\n\t\tthis.countHover = this._register(hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), this.elements.count, ''));\n\n\t\tconst ab = this._register(new ActionBar(this.elements.rerun, {\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(instantiationService, action, options),\n\t\t}));\n\t\tab.push(instantiationService.createInstance(MenuItemAction,\n\t\t\t{ ...new ReRunLastRun().desc, icon: icons.testingRerunIcon },\n\t\t\t{ ...new DebugLastRun().desc, icon: icons.testingDebugIcon },\n\t\t\t{},\n\t\t\tundefined, undefined\n\t\t), { icon: true, label: false });\n\n\t\tthis.render();\n\t}\n\n\tprivate render() {\n\t\tconst { results } = this.resultService;\n\t\tconst { count, root, status, duration, rerun } = this.elements;\n\t\tif (!results.length) {\n\t\t\tif (this.elementsWereAttached) {\n\t\t\t\troot.remove();\n\t\t\t\tthis.elementsWereAttached = false;\n\t\t\t}\n\t\t\tthis.container.innerText = localize('noResults', 'No test results yet.');\n\t\t\tthis.badgeDisposable.clear();\n\t\t\treturn;\n\t\t}\n\n\t\tconst live = results.filter(r => !r.completedAt) as LiveTestResult[];\n\t\tlet counts: CountSummary;\n\t\tif (live.length) {\n\t\t\tstatus.className = ThemeIcon.asClassName(spinningLoading);\n\t\t\tcounts = collectTestStateCounts(true, live);\n\t\t\tthis.renderLoop.schedule();\n\n\t\t\tconst last = live[live.length - 1];\n\t\t\tduration.textContent = formatDuration(Date.now() - last.startedAt);\n\t\t\trerun.style.display = 'none';\n\t\t} else {\n\t\t\tconst last = results[0];\n\t\t\tconst dominantState = mapFindFirst(statesInOrder, s => last.counts[s] > 0 ? s : undefined);\n\t\t\tstatus.className = ThemeIcon.asClassName(icons.testingStatesToIcons.get(dominantState ?? TestResultState.Unset)!);\n\t\t\tcounts = collectTestStateCounts(false, [last]);\n\t\t\tduration.textContent = last instanceof LiveTestResult ? formatDuration(last.completedAt! - last.startedAt) : '';\n\t\t\trerun.style.display = 'block';\n\t\t}\n\n\t\tcount.textContent = `${counts.passed}/${counts.totalWillBeRun}`;\n\t\tthis.countHover.update(getTestProgressText(counts));\n\t\tthis.renderActivityBadge(counts);\n\n\t\tif (!this.elementsWereAttached) {\n\t\t\tdom.clearNode(this.container);\n\t\t\tthis.container.appendChild(root);\n\t\t\tthis.elementsWereAttached = true;\n\t\t}\n\t}\n\n\tprivate renderActivityBadge(countSummary: CountSummary) {\n\t\tif (countSummary && this.badgeType !== TestingCountBadge.Off && countSummary[this.badgeType] !== 0) {\n\t\t\tif (this.lastBadge instanceof NumberBadge && this.lastBadge.number === countSummary[this.badgeType]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastBadge = new NumberBadge(countSummary[this.badgeType], num => this.getLocalizedBadgeString(this.badgeType, num));\n\t\t} else if (this.crService.isEnabled()) {\n\t\t\tif (this.lastBadge instanceof IconBadge && this.lastBadge.icon === icons.testingContinuousIsOn) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastBadge = new IconBadge(icons.testingContinuousIsOn, () => localize('testingContinuousBadge', 'Tests are being watched for changes'));\n\t\t} else {\n\t\t\tif (!this.lastBadge) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastBadge = undefined;\n\t\t}\n\n\t\tthis.badgeDisposable.value = this.lastBadge && this.activityService.showViewActivity(Testing.ExplorerViewId, { badge: this.lastBadge });\n\t}\n\n\tprivate getLocalizedBadgeString(countBadgeType: TestingCountBadge, count: number): string {\n\t\tswitch (countBadgeType) {\n\t\t\tcase TestingCountBadge.Passed:\n\t\t\t\treturn localize('testingCountBadgePassed', '{0} passed tests', count);\n\t\t\tcase TestingCountBadge.Skipped:\n\t\t\t\treturn localize('testingCountBadgeSkipped', '{0} skipped tests', count);\n\t\t\tdefault:\n\t\t\t\treturn localize('testingCountBadgeFailed', '{0} failed tests', count);\n\t\t}\n\t}\n}\n\nconst enum WelcomeExperience {\n\tNone,\n\tForWorkspace,\n\tForDocument,\n}\n\nclass TestingExplorerViewModel extends Disposable {\n\tpublic tree: TestingObjectTree<FuzzyScore>;\n\tprivate filter: TestsFilter;\n\tpublic readonly projection = this._register(new MutableDisposable<ITestTreeProjection>());\n\n\tprivate readonly revealTimeout = new MutableDisposable();\n\tprivate readonly _viewMode: IContextKey<TestExplorerViewMode>;\n\tprivate readonly _viewSorting: IContextKey<TestExplorerViewSorting>;\n\tprivate readonly welcomeVisibilityEmitter = new Emitter<WelcomeExperience>();\n\tprivate readonly actionRunner = this._register(new TestExplorerActionRunner(() => this.tree.getSelection().filter(isDefined)));\n\tprivate readonly lastViewState: StoredValue<ISerializedTestTreeCollapseState>;\n\tprivate readonly noTestForDocumentWidget: NoTestsForDocumentWidget;\n\n\t/**\n\t * Whether there's a reveal request which has not yet been delivered. This\n\t * can happen if the user asks to reveal before the test tree is loaded.\n\t * We check to see if the reveal request is present on each tree update,\n\t * and do it then if so.\n\t */\n\tprivate hasPendingReveal = false;\n\t/**\n\t * Fires when the visibility of the placeholder state changes.\n\t */\n\tpublic readonly onChangeWelcomeVisibility = this.welcomeVisibilityEmitter.event;\n\n\t/**\n\t * Gets whether the welcome should be visible.\n\t */\n\tpublic welcomeExperience = WelcomeExperience.None;\n\n\tpublic get viewMode() {\n\t\treturn this._viewMode.get() ?? TestExplorerViewMode.Tree;\n\t}\n\n\tpublic set viewMode(newMode: TestExplorerViewMode) {\n\t\tif (newMode === this._viewMode.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._viewMode.set(newMode);\n\t\tthis.updatePreferredProjection();\n\t\tthis.storageService.store('testing.viewMode', newMode, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\n\tpublic get viewSorting() {\n\t\treturn this._viewSorting.get() ?? TestExplorerViewSorting.ByStatus;\n\t}\n\n\tpublic set viewSorting(newSorting: TestExplorerViewSorting) {\n\t\tif (newSorting === this._viewSorting.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._viewSorting.set(newSorting);\n\t\tthis.tree.resort(null);\n\t\tthis.storageService.store('testing.viewSorting', newSorting, StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\tconstructor(\n\t\tlistContainer: HTMLElement,\n\t\tonDidChangeVisibility: Event<boolean>,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@ITestService private readonly testService: ITestService,\n\t\t@ITestExplorerFilterState private readonly filterState: TestExplorerFilterState,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ITestResultService private readonly testResults: ITestResultService,\n\t\t@ITestingPeekOpener private readonly peekOpener: ITestingPeekOpener,\n\t\t@ITestProfileService private readonly testProfileService: ITestProfileService,\n\t\t@ITestingContinuousRunService private readonly crService: ITestingContinuousRunService,\n\t\t@ICommandService commandService: ICommandService,\n\t) {\n\t\tsuper();\n\n\t\tthis.hasPendingReveal = !!filterState.reveal.get();\n\t\tthis.noTestForDocumentWidget = this._register(instantiationService.createInstance(NoTestsForDocumentWidget, listContainer));\n\t\tthis.lastViewState = this._register(new StoredValue<ISerializedTestTreeCollapseState>({\n\t\t\tkey: 'testing.treeState',\n\t\t\tscope: StorageScope.WORKSPACE,\n\t\t\ttarget: StorageTarget.MACHINE,\n\t\t}, this.storageService));\n\t\tthis._viewMode = TestingContextKeys.viewMode.bindTo(contextKeyService);\n\t\tthis._viewSorting = TestingContextKeys.viewSorting.bindTo(contextKeyService);\n\t\tthis._viewMode.set(this.storageService.get('testing.viewMode', StorageScope.WORKSPACE, TestExplorerViewMode.Tree) as TestExplorerViewMode);\n\t\tthis._viewSorting.set(this.storageService.get('testing.viewSorting', StorageScope.WORKSPACE, TestExplorerViewSorting.ByLocation) as TestExplorerViewSorting);\n\n\t\tthis.reevaluateWelcomeState();\n\t\tthis.filter = this.instantiationService.createInstance(TestsFilter, testService.collection);\n\t\tthis.tree = instantiationService.createInstance(\n\t\t\tTestingObjectTree,\n\t\t\t'Test Explorer List',\n\t\t\tlistContainer,\n\t\t\tnew ListDelegate(),\n\t\t\t[\n\t\t\t\tinstantiationService.createInstance(TestItemRenderer, this.actionRunner),\n\t\t\t\tinstantiationService.createInstance(ErrorRenderer),\n\t\t\t],\n\t\t\t{\n\t\t\t\tidentityProvider: instantiationService.createInstance(IdentityProvider),\n\t\t\t\thideTwistiesOfChildlessElements: false,\n\t\t\t\tsorter: instantiationService.createInstance(TreeSorter, this),\n\t\t\t\tkeyboardNavigationLabelProvider: instantiationService.createInstance(TreeKeyboardNavigationLabelProvider),\n\t\t\t\taccessibilityProvider: instantiationService.createInstance(ListAccessibilityProvider),\n\t\t\t\tfilter: this.filter,\n\t\t\t\tfindWidgetEnabled: false,\n\t\t\t}) as TestingObjectTree<FuzzyScore>;\n\n\n\t\t// saves the collapse state so that if items are removed or refreshed, they\n\t\t// retain the same state (#170169)\n\t\tconst collapseStateSaver = this._register(new RunOnceScheduler(() => {\n\t\t\t// reuse the last view state to avoid making a bunch of object garbage:\n\t\t\tconst state = this.tree.getOptimizedViewState(this.lastViewState.get({}));\n\t\t\tconst projection = this.projection.value;\n\t\t\tif (projection) {\n\t\t\t\tprojection.lastState = state;\n\t\t\t}\n\t\t}, 3000));\n\n\t\tthis._register(this.tree.onDidChangeCollapseState(evt => {\n\t\t\tif (evt.node.element instanceof TestItemTreeElement) {\n\t\t\t\tif (!evt.node.collapsed) {\n\t\t\t\t\tthis.projection.value?.expandElement(evt.node.element, evt.deep ? Infinity : 0);\n\t\t\t\t}\n\t\t\t\tcollapseStateSaver.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.crService.onDidChange(testId => {\n\t\t\tif (testId) {\n\t\t\t\t// a continuous run test will sort to the top:\n\t\t\t\tconst elem = this.projection.value?.getElementByTestId(testId);\n\t\t\t\tthis.tree.resort(elem?.parent && this.tree.hasElement(elem.parent) ? elem.parent : null, false);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(onDidChangeVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tthis.ensureProjection();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(e)));\n\n\t\tthis._register(Event.any(\n\t\t\tfilterState.text.onDidChange,\n\t\t\tfilterState.fuzzy.onDidChange,\n\t\t\ttestService.excluded.onTestExclusionsChanged,\n\t\t)(() => {\n\t\t\tif (!filterState.text.value) {\n\t\t\t\treturn this.tree.refilter();\n\t\t\t}\n\n\t\t\tconst items = this.filter.lastIncludedTests = new Set();\n\t\t\tthis.tree.refilter();\n\t\t\tthis.filter.lastIncludedTests = undefined;\n\n\t\t\tfor (const test of items) {\n\t\t\t\tthis.tree.expandTo(test);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onDidOpen(e => {\n\t\t\tif (!(e.element instanceof TestItemTreeElement)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfilterState.didSelectTestInExplorer(e.element.test.item.extId);\n\n\t\t\tif (!e.element.children.size && e.element.test.item.uri) {\n\t\t\t\tif (!this.tryPeekError(e.element)) {\n\t\t\t\t\tcommandService.executeCommand('vscode.revealTest', e.element.test.item.extId, {\n\t\t\t\t\t\topenToSide: e.sideBySide,\n\t\t\t\t\t\tpreserveFocus: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree);\n\n\t\tthis._register(this.onChangeWelcomeVisibility(e => {\n\t\t\tthis.noTestForDocumentWidget.setVisible(e === WelcomeExperience.ForDocument);\n\t\t}));\n\n\t\tthis._register(dom.addStandardDisposableListener(this.tree.getHTMLElement(), 'keydown', evt => {\n\t\t\tif (evt.equals(KeyCode.Enter)) {\n\t\t\t\tthis.handleExecuteKeypress(evt);\n\t\t\t} else if (DefaultKeyboardNavigationDelegate.mightProducePrintableCharacter(evt)) {\n\t\t\t\tfilterState.text.value = evt.browserEvent.key;\n\t\t\t\tfilterState.focusInput();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis.revealById(filterState.reveal.read(reader), undefined, false);\n\t\t}));\n\n\t\tthis._register(onDidChangeVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tfilterState.focusInput();\n\t\t\t}\n\t\t}));\n\n\t\tlet followRunningTests = getTestingConfiguration(configurationService, TestingConfigKeys.FollowRunningTest);\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TestingConfigKeys.FollowRunningTest)) {\n\t\t\t\tfollowRunningTests = getTestingConfiguration(configurationService, TestingConfigKeys.FollowRunningTest);\n\t\t\t}\n\t\t}));\n\n\t\tlet alwaysRevealTestAfterStateChange = getTestingConfiguration(configurationService, TestingConfigKeys.AlwaysRevealTestOnStateChange);\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TestingConfigKeys.AlwaysRevealTestOnStateChange)) {\n\t\t\t\talwaysRevealTestAfterStateChange = getTestingConfiguration(configurationService, TestingConfigKeys.AlwaysRevealTestOnStateChange);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(testResults.onTestChanged(evt => {\n\t\t\tif (!followRunningTests) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (evt.reason !== TestResultItemChangeReason.OwnStateChange) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.tree.selectionSize > 1) {\n\t\t\t\treturn; // don't change a multi-selection #180950\n\t\t\t}\n\n\t\t\t// follow running tests, or tests whose state changed. Tests that\n\t\t\t// complete very fast may not enter the running state at all.\n\t\t\tif (evt.item.ownComputedState !== TestResultState.Running && !(evt.previousState === TestResultState.Queued && isStateWithResult(evt.item.ownComputedState))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.revealById(evt.item.item.extId, alwaysRevealTestAfterStateChange, false);\n\t\t}));\n\n\t\tthis._register(testResults.onResultsChanged(() => {\n\t\t\tthis.tree.resort(null);\n\t\t}));\n\n\t\tthis._register(this.testProfileService.onDidChange(() => {\n\t\t\tthis.tree.rerender();\n\t\t}));\n\n\t\tconst allOpenEditorInputs = observableFromEvent(this,\n\t\t\teditorService.onDidEditorsChange,\n\t\t\t() => new Set(editorGroupsService.groups.flatMap(g => g.editors).map(e => e.resource).filter(isDefined)),\n\t\t);\n\n\t\tconst activeResource = observableFromEvent(this, editorService.onDidActiveEditorChange, () => {\n\t\t\tif (editorService.activeEditor instanceof DiffEditorInput) {\n\t\t\t\treturn editorService.activeEditor.primary.resource;\n\t\t\t} else {\n\t\t\t\treturn editorService.activeEditor?.resource;\n\t\t\t}\n\t\t});\n\n\t\tconst filterText = observableFromEvent(this.filterState.text.onDidChange, () => this.filterState.text);\n\t\tthis._register(autorun(reader => {\n\t\t\tfilterText.read(reader);\n\t\t\tif (this.filterState.isFilteringFor(TestFilterTerm.OpenedFiles)) {\n\t\t\t\tthis.filter.filterToDocumentUri([...allOpenEditorInputs.read(reader)]);\n\t\t\t} else {\n\t\t\t\tthis.filter.filterToDocumentUri([activeResource.read(reader)].filter(isDefined));\n\t\t\t}\n\n\t\t\tif (this.filterState.isFilteringFor(TestFilterTerm.CurrentDoc) || this.filterState.isFilteringFor(TestFilterTerm.OpenedFiles)) {\n\t\t\t\tthis.tree.refilter();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.storageService.onWillSaveState(({ reason, }) => {\n\t\t\tif (reason === WillSaveStateReason.SHUTDOWN) {\n\t\t\t\tthis.lastViewState.store(this.tree.getOptimizedViewState());\n\t\t\t}\n\t\t}));\n\t}\n\n\t/**\n\t * Re-layout the tree.\n\t */\n\tpublic layout(height?: number, width?: number): void {\n\t\tthis.tree.layout(height, width);\n\t}\n\n\t/**\n\t * Tries to reveal by extension ID. Queues the request if the extension\n\t * ID is not currently available.\n\t */\n\tprivate revealById(id: string | undefined, expand = true, focus = true) {\n\t\tif (!id) {\n\t\t\tthis.hasPendingReveal = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst projection = this.ensureProjection();\n\n\t\t// If the item itself is visible in the tree, show it. Otherwise, expand\n\t\t// its closest parent.\n\t\tlet expandToLevel = 0;\n\t\tconst idPath = [...TestId.fromString(id).idsFromRoot()];\n\t\tfor (let i = idPath.length - 1; i >= expandToLevel; i--) {\n\t\t\tconst element = projection.getElementByTestId(idPath[i].toString());\n\t\t\t// Skip all elements that aren't in the tree.\n\t\t\tif (!element || !this.tree.hasElement(element)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If this 'if' is true, we're at the closest-visible parent to the node\n\t\t\t// we want to expand. Expand that, and then start the loop again because\n\t\t\t// we might already have children for it.\n\t\t\tif (i < idPath.length - 1) {\n\t\t\t\tif (expand) {\n\t\t\t\t\tthis.tree.expand(element);\n\t\t\t\t\texpandToLevel = i + 1; // avoid an infinite loop if the test does not exist\n\t\t\t\t\ti = idPath.length - 1; // restart the loop since new children may now be visible\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Otherwise, we've arrived!\n\n\t\t\t// If the node or any of its children are excluded, flip on the 'show\n\t\t\t// excluded tests' checkbox automatically. If we didn't expand, then set\n\t\t\t// target focus target to the first collapsed element.\n\n\t\t\tlet focusTarget = element;\n\t\t\tfor (let n: TestItemTreeElement | null = element; n instanceof TestItemTreeElement; n = n.parent) {\n\t\t\t\tif (n.test && this.testService.excluded.contains(n.test)) {\n\t\t\t\t\tthis.filterState.toggleFilteringFor(TestFilterTerm.Hidden, true);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (!expand && (this.tree.hasElement(n) && this.tree.isCollapsed(n))) {\n\t\t\t\t\tfocusTarget = n;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.filterState.reveal.set(undefined, undefined);\n\t\t\tthis.hasPendingReveal = false;\n\t\t\tif (focus) {\n\t\t\t\tthis.tree.domFocus();\n\t\t\t}\n\n\t\t\tif (this.tree.getRelativeTop(focusTarget) === null) {\n\t\t\t\tthis.tree.reveal(focusTarget, 0.5);\n\t\t\t}\n\n\t\t\tthis.revealTimeout.value = disposableTimeout(() => {\n\t\t\t\tthis.tree.setFocus([focusTarget]);\n\t\t\t\tthis.tree.setSelection([focusTarget]);\n\t\t\t}, 1);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// If here, we've expanded all parents we can. Waiting on data to come\n\t\t// in to possibly show the revealed test.\n\t\tthis.hasPendingReveal = true;\n\t}\n\n\t/**\n\t * Collapse all items in the tree.\n\t */\n\tpublic async collapseAll() {\n\t\tthis.tree.collapseAll();\n\t}\n\n\t/**\n\t * Tries to peek the first test error, if the item is in a failed state.\n\t */\n\tprivate tryPeekError(item: TestItemTreeElement) {\n\t\tconst lookup = item.test && this.testResults.getStateById(item.test.item.extId);\n\t\treturn lookup && lookup[1].tasks.some(s => isFailedState(s.state))\n\t\t\t? this.peekOpener.tryPeekFirstError(lookup[0], lookup[1], { preserveFocus: true })\n\t\t\t: false;\n\t}\n\n\tprivate onContextMenu(evt: ITreeContextMenuEvent<TestExplorerTreeElement | null>) {\n\t\tconst element = evt.element;\n\t\tif (!(element instanceof TestItemTreeElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { actions } = getActionableElementActions(this.contextKeyService, this.menuService, this.testService, this.crService, this.testProfileService, element);\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => evt.anchor,\n\t\t\tgetActions: () => actions.secondary,\n\t\t\tgetActionsContext: () => element,\n\t\t\tactionRunner: this.actionRunner,\n\t\t});\n\t}\n\n\tprivate handleExecuteKeypress(evt: IKeyboardEvent) {\n\t\tconst focused = this.tree.getFocus();\n\t\tconst selected = this.tree.getSelection();\n\t\tlet targeted: (TestExplorerTreeElement | null)[];\n\t\tif (focused.length === 1 && selected.includes(focused[0])) {\n\t\t\tevt.browserEvent?.preventDefault();\n\t\t\ttargeted = selected;\n\t\t} else {\n\t\t\ttargeted = focused;\n\t\t}\n\n\t\tconst toRun = targeted\n\t\t\t.filter((e): e is TestItemTreeElement => e instanceof TestItemTreeElement);\n\n\t\tif (toRun.length) {\n\t\t\tthis.testService.runTests({\n\t\t\t\tgroup: TestRunProfileBitset.Run,\n\t\t\t\ttests: toRun.map(t => t.test),\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate reevaluateWelcomeState() {\n\t\tconst shouldShowWelcome = this.testService.collection.busyProviders === 0 && testCollectionIsEmpty(this.testService.collection);\n\t\tconst welcomeExperience = shouldShowWelcome\n\t\t\t? (this.filterState.isFilteringFor(TestFilterTerm.CurrentDoc) ? WelcomeExperience.ForDocument : WelcomeExperience.ForWorkspace)\n\t\t\t: WelcomeExperience.None;\n\n\t\tif (welcomeExperience !== this.welcomeExperience) {\n\t\t\tthis.welcomeExperience = welcomeExperience;\n\t\t\tthis.welcomeVisibilityEmitter.fire(welcomeExperience);\n\t\t}\n\t}\n\n\tprivate ensureProjection() {\n\t\treturn this.projection.value ?? this.updatePreferredProjection();\n\t}\n\n\tprivate updatePreferredProjection() {\n\t\tthis.projection.clear();\n\n\t\tconst lastState = this.lastViewState.get({});\n\t\tif (this._viewMode.get() === TestExplorerViewMode.List) {\n\t\t\tthis.projection.value = this.instantiationService.createInstance(ListProjection, lastState);\n\t\t} else {\n\t\t\tthis.projection.value = this.instantiationService.createInstance(TreeProjection, lastState);\n\t\t}\n\n\t\tconst scheduler = this._register(new RunOnceScheduler(() => this.applyProjectionChanges(), 200));\n\t\tthis.projection.value.onUpdate(() => {\n\t\t\tif (!scheduler.isScheduled()) {\n\t\t\t\tscheduler.schedule();\n\t\t\t}\n\t\t});\n\n\t\tthis.applyProjectionChanges();\n\t\treturn this.projection.value;\n\t}\n\n\tprivate applyProjectionChanges() {\n\t\tthis.reevaluateWelcomeState();\n\t\tthis.projection.value?.applyTo(this.tree);\n\n\t\tthis.tree.refilter();\n\n\t\tif (this.hasPendingReveal) {\n\t\t\tthis.revealById(this.filterState.reveal.get());\n\t\t}\n\t}\n\n\t/**\n\t * Gets the selected tests from the tree.\n\t */\n\tpublic getSelectedTests() {\n\t\treturn this.tree.getSelection();\n\t}\n}\n\nconst enum FilterResult {\n\tExclude,\n\tInherit,\n\tInclude,\n}\n\nconst hasNodeInOrParentOfUri = (collection: IMainThreadTestCollection, ident: IUriIdentityService, testUri: URI, fromNode?: string) => {\n\tconst queue: Iterable<string>[] = [fromNode ? [fromNode] : collection.rootIds];\n\twhile (queue.length) {\n\t\tfor (const id of queue.pop()!) {\n\t\t\tconst node = collection.getNodeById(id);\n\t\t\tif (!node) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!node.item.uri || !ident.extUri.isEqualOrParent(testUri, node.item.uri)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Only show nodes that can be expanded (and might have a child with\n\t\t\t// a range) or ones that have a physical location.\n\t\t\tif (node.item.range || node.expand === TestItemExpandState.Expandable) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tqueue.push(node.children);\n\t\t}\n\t}\n\n\treturn false;\n};\n\nclass TestsFilter implements ITreeFilter<TestExplorerTreeElement> {\n\tprivate documentUris: URI[] = [];\n\n\tpublic lastIncludedTests?: Set<TestExplorerTreeElement>;\n\n\tconstructor(\n\t\tprivate readonly collection: IMainThreadTestCollection,\n\t\t@ITestExplorerFilterState private readonly state: ITestExplorerFilterState,\n\t\t@ITestService private readonly testService: ITestService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t) { }\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic filter(element: TestItemTreeElement): TreeFilterResult<void> {\n\t\tif (element instanceof TestTreeErrorMessage) {\n\t\t\treturn TreeVisibility.Visible;\n\t\t}\n\n\t\tif (\n\t\t\telement.test\n\t\t\t&& !this.state.isFilteringFor(TestFilterTerm.Hidden)\n\t\t\t&& this.testService.excluded.contains(element.test)\n\t\t) {\n\t\t\treturn TreeVisibility.Hidden;\n\t\t}\n\n\t\tswitch (Math.min(this.testFilterText(element), this.testLocation(element), this.testState(element), this.testTags(element))) {\n\t\t\tcase FilterResult.Exclude:\n\t\t\t\treturn TreeVisibility.Hidden;\n\t\t\tcase FilterResult.Include:\n\t\t\t\tthis.lastIncludedTests?.add(element);\n\t\t\t\treturn TreeVisibility.Visible;\n\t\t\tdefault:\n\t\t\t\treturn TreeVisibility.Recurse;\n\t\t}\n\t}\n\n\tpublic filterToDocumentUri(uris: readonly URI[]) {\n\t\tthis.documentUris = [...uris];\n\t}\n\n\tprivate testTags(element: TestItemTreeElement): FilterResult {\n\t\tif (!this.state.includeTags.size && !this.state.excludeTags.size) {\n\t\t\treturn FilterResult.Include;\n\t\t}\n\n\t\treturn (this.state.includeTags.size ?\n\t\t\telement.test.item.tags.some(t => this.state.includeTags.has(t)) :\n\t\t\ttrue) && element.test.item.tags.every(t => !this.state.excludeTags.has(t))\n\t\t\t? FilterResult.Include\n\t\t\t: FilterResult.Inherit;\n\t}\n\n\tprivate testState(element: TestItemTreeElement): FilterResult {\n\t\tif (this.state.isFilteringFor(TestFilterTerm.Failed)) {\n\t\t\treturn isFailedState(element.state) ? FilterResult.Include : FilterResult.Inherit;\n\t\t}\n\n\t\tif (this.state.isFilteringFor(TestFilterTerm.Executed)) {\n\t\t\treturn element.state !== TestResultState.Unset ? FilterResult.Include : FilterResult.Inherit;\n\t\t}\n\n\t\treturn FilterResult.Include;\n\t}\n\n\tprivate testLocation(element: TestItemTreeElement): FilterResult {\n\t\tif (this.documentUris.length === 0) {\n\t\t\treturn FilterResult.Include;\n\t\t}\n\n\t\tif ((!this.state.isFilteringFor(TestFilterTerm.CurrentDoc) && !this.state.isFilteringFor(TestFilterTerm.OpenedFiles)) || !(element instanceof TestItemTreeElement)) {\n\t\t\treturn FilterResult.Include;\n\t\t}\n\n\t\tif (this.documentUris.some(uri => hasNodeInOrParentOfUri(this.collection, this.uriIdentityService, uri, element.test.item.extId))) {\n\t\t\treturn FilterResult.Include;\n\t\t}\n\n\t\treturn FilterResult.Inherit;\n\t}\n\n\tprivate testFilterText(element: TestItemTreeElement) {\n\t\tif (this.state.globList.length === 0) {\n\t\t\treturn FilterResult.Include;\n\t\t}\n\n\t\tconst fuzzy = this.state.fuzzy.value;\n\t\tfor (let e: TestItemTreeElement | null = element; e; e = e.parent) {\n\t\t\t// start as included if the first glob is a negation\n\t\t\tlet included = this.state.globList[0].include === false ? FilterResult.Include : FilterResult.Inherit;\n\t\t\tconst data = e.test.item.label.toLowerCase();\n\n\t\t\tfor (const { include, text } of this.state.globList) {\n\t\t\t\tif (fuzzy ? fuzzyContains(data, text) : data.includes(text)) {\n\t\t\t\t\tincluded = include ? FilterResult.Include : FilterResult.Exclude;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (included !== FilterResult.Inherit) {\n\t\t\t\treturn included;\n\t\t\t}\n\t\t}\n\n\t\treturn FilterResult.Inherit;\n\t}\n}\n\nclass TreeSorter implements ITreeSorter<TestExplorerTreeElement> {\n\tconstructor(\n\t\tprivate readonly viewModel: TestingExplorerViewModel,\n\t) { }\n\n\tpublic compare(a: TestExplorerTreeElement, b: TestExplorerTreeElement): number {\n\t\tif (a instanceof TestTreeErrorMessage || b instanceof TestTreeErrorMessage) {\n\t\t\treturn (a instanceof TestTreeErrorMessage ? -1 : 0) + (b instanceof TestTreeErrorMessage ? 1 : 0);\n\t\t}\n\n\t\tconst durationDelta = (b.duration || 0) - (a.duration || 0);\n\t\tif (this.viewModel.viewSorting === TestExplorerViewSorting.ByDuration && durationDelta !== 0) {\n\t\t\treturn durationDelta;\n\t\t}\n\n\t\tconst stateDelta = cmpPriority(a.state, b.state);\n\t\tif (this.viewModel.viewSorting === TestExplorerViewSorting.ByStatus && stateDelta !== 0) {\n\t\t\treturn stateDelta;\n\t\t}\n\n\t\tlet inSameLocation = false;\n\t\tif (a instanceof TestItemTreeElement && b instanceof TestItemTreeElement && a.test.item.uri && b.test.item.uri && a.test.item.uri.toString() === b.test.item.uri.toString() && a.test.item.range && b.test.item.range) {\n\t\t\tinSameLocation = true;\n\n\t\t\tconst delta = a.test.item.range.startLineNumber - b.test.item.range.startLineNumber;\n\t\t\tif (delta !== 0) {\n\t\t\t\treturn delta;\n\t\t\t}\n\t\t}\n\n\t\tconst sa = a.test.item.sortText;\n\t\tconst sb = b.test.item.sortText;\n\t\t// If tests are in the same location and there's no preferred sortText,\n\t\t// keep the extension's insertion order (#163449).\n\t\treturn inSameLocation && !sa && !sb\n\t\t\t? 0\n\t\t\t: compareFileNames(sa || a.test.item.label, sb || b.test.item.label);\n\t}\n}\n\nclass NoTestsForDocumentWidget extends Disposable {\n\tprivate readonly el: HTMLElement;\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\t@ITestExplorerFilterState filterState: ITestExplorerFilterState\n\t) {\n\t\tsuper();\n\t\tconst el = this.el = dom.append(container, dom.$('.testing-no-test-placeholder'));\n\t\tconst emptyParagraph = dom.append(el, dom.$('p'));\n\t\temptyParagraph.innerText = localize('testingNoTest', 'No tests were found in this file.');\n\t\tconst buttonLabel = localize('testingFindExtension', 'Show Workspace Tests');\n\t\tconst button = this._register(new Button(el, { title: buttonLabel, ...defaultButtonStyles }));\n\t\tbutton.label = buttonLabel;\n\t\tthis._register(button.onDidClick(() => filterState.toggleFilteringFor(TestFilterTerm.CurrentDoc, false)));\n\t}\n\n\tpublic setVisible(isVisible: boolean) {\n\t\tthis.el.classList.toggle('visible', isVisible);\n\t}\n}\n\nclass TestExplorerActionRunner extends ActionRunner {\n\tconstructor(private getSelectedTests: () => ReadonlyArray<TestExplorerTreeElement>) {\n\t\tsuper();\n\t}\n\n\tprotected override async runAction(action: IAction, context: TestExplorerTreeElement): Promise<void> {\n\t\tif (!(action instanceof MenuItemAction)) {\n\t\t\treturn super.runAction(action, context);\n\t\t}\n\n\t\tconst selection = this.getSelectedTests();\n\t\tconst contextIsSelected = selection.some(s => s === context);\n\t\tconst actualContext = contextIsSelected ? selection : [context];\n\t\tconst actionable = actualContext.filter((t): t is TestItemTreeElement => t instanceof TestItemTreeElement);\n\t\tawait action.run(...actionable);\n\t}\n}\n\nconst getLabelForTestTreeElement = (element: TestItemTreeElement) => {\n\tlet label = labelForTestInState(element.description || element.test.item.label, element.state);\n\n\tif (element instanceof TestItemTreeElement) {\n\t\tif (element.duration !== undefined) {\n\t\t\tlabel = localize({\n\t\t\t\tkey: 'testing.treeElementLabelDuration',\n\t\t\t\tcomment: ['{0} is the original label in testing.treeElementLabel, {1} is a duration'],\n\t\t\t}, '{0}, in {1}', label, formatDuration(element.duration));\n\t\t}\n\n\t\tif (element.retired) {\n\t\t\tlabel = localize({\n\t\t\t\tkey: 'testing.treeElementLabelOutdated',\n\t\t\t\tcomment: ['{0} is the original label in testing.treeElementLabel'],\n\t\t\t}, '{0}, outdated result', label);\n\t\t}\n\t}\n\n\treturn label;\n};\n\nclass ListAccessibilityProvider implements IListAccessibilityProvider<TestExplorerTreeElement> {\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('testExplorer', \"Test Explorer\");\n\t}\n\n\tgetAriaLabel(element: TestExplorerTreeElement): string {\n\t\treturn element instanceof TestTreeErrorMessage\n\t\t\t? element.description\n\t\t\t: getLabelForTestTreeElement(element);\n\t}\n}\n\nclass TreeKeyboardNavigationLabelProvider implements IKeyboardNavigationLabelProvider<TestExplorerTreeElement> {\n\tgetKeyboardNavigationLabel(element: TestExplorerTreeElement) {\n\t\treturn element instanceof TestTreeErrorMessage ? element.message : element.test.item.label;\n\t}\n}\n\nclass ListDelegate implements IListVirtualDelegate<TestExplorerTreeElement> {\n\tgetHeight(element: TestExplorerTreeElement) {\n\t\treturn element instanceof TestTreeErrorMessage ? 17 + 10 : 22;\n\t}\n\n\tgetTemplateId(element: TestExplorerTreeElement) {\n\t\tif (element instanceof TestTreeErrorMessage) {\n\t\t\treturn ErrorRenderer.ID;\n\t\t}\n\n\t\treturn TestItemRenderer.ID;\n\t}\n}\n\nclass IdentityProvider implements IIdentityProvider<TestExplorerTreeElement> {\n\tpublic getId(element: TestExplorerTreeElement) {\n\t\treturn element.treeId;\n\t}\n}\n\ninterface IErrorTemplateData {\n\tlabel: HTMLElement;\n\tdisposable: DisposableStore;\n}\n\nclass ErrorRenderer implements ITreeRenderer<TestTreeErrorMessage, FuzzyScore, IErrorTemplateData> {\n\tstatic readonly ID = 'error';\n\n\n\tconstructor(\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IMarkdownRendererService private readonly markdownRendererService: IMarkdownRendererService,\n\t) { }\n\n\tget templateId(): string {\n\t\treturn ErrorRenderer.ID;\n\t}\n\n\trenderTemplate(container: HTMLElement): IErrorTemplateData {\n\t\tconst label = dom.append(container, dom.$('.error'));\n\t\treturn { label, disposable: new DisposableStore() };\n\t}\n\n\trenderElement({ element }: ITreeNode<TestTreeErrorMessage, FuzzyScore>, _: number, data: IErrorTemplateData): void {\n\t\tdom.clearNode(data.label);\n\n\t\tif (typeof element.message === 'string') {\n\t\t\tdata.label.innerText = element.message;\n\t\t} else {\n\t\t\tconst result = this.markdownRendererService.render(element.message, undefined, document.createElement('span'));\n\t\t\tdata.label.appendChild(result.element);\n\t\t}\n\t\tdata.disposable.add(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), data.label, element.description));\n\t}\n\n\tdisposeTemplate(data: IErrorTemplateData): void {\n\t\tdata.disposable.dispose();\n\t}\n}\n\ninterface ITestElementTemplateData {\n\tcurrent?: TestItemTreeElement;\n\tlabel: HTMLElement;\n\ticon: HTMLElement;\n\twrapper: HTMLElement;\n\tactionBar: ActionBar;\n\telementDisposable: DisposableStore;\n\ttemplateDisposable: DisposableStore;\n}\n\nclass TestItemRenderer extends Disposable\n\timplements ITreeRenderer<TestItemTreeElement, FuzzyScore, ITestElementTemplateData> {\n\tpublic static readonly ID = 'testItem';\n\n\tconstructor(\n\t\tprivate readonly actionRunner: TestExplorerActionRunner,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@ITestService protected readonly testService: ITestService,\n\t\t@ITestProfileService protected readonly profiles: ITestProfileService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITestingContinuousRunService private readonly crService: ITestingContinuousRunService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic readonly templateId = TestItemRenderer.ID;\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic renderTemplate(wrapper: HTMLElement): ITestElementTemplateData {\n\t\twrapper.classList.add('testing-stdtree-container');\n\n\t\tconst icon = dom.append(wrapper, dom.$('.computed-state'));\n\t\tconst label = dom.append(wrapper, dom.$('.label'));\n\t\tconst disposable = new DisposableStore();\n\n\t\tdom.append(wrapper, dom.$(ThemeIcon.asCSSSelector(icons.testingHiddenIcon)));\n\t\tconst actionBar = disposable.add(new ActionBar(wrapper, {\n\t\t\tactionRunner: this.actionRunner,\n\t\t\tactionViewItemProvider: (action, options) =>\n\t\t\t\taction instanceof MenuItemAction\n\t\t\t\t\t? this.instantiationService.createInstance(MenuEntryActionViewItem, action, { hoverDelegate: options.hoverDelegate })\n\t\t\t\t\t: undefined\n\t\t}));\n\n\t\tdisposable.add(this.profiles.onDidChange(() => {\n\t\t\tif (templateData.current) {\n\t\t\t\tthis.fillActionBar(templateData.current, templateData);\n\t\t\t}\n\t\t}));\n\n\t\tdisposable.add(this.crService.onDidChange(changed => {\n\t\t\tconst id = templateData.current?.test.item.extId;\n\t\t\tif (id && (!changed || changed === id || TestId.isChild(id, changed))) {\n\t\t\t\tthis.fillActionBar(templateData.current!, templateData);\n\t\t\t}\n\t\t}));\n\n\t\tconst templateData: ITestElementTemplateData = { wrapper, label, actionBar, icon, elementDisposable: new DisposableStore(), templateDisposable: disposable };\n\t\treturn templateData;\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tdisposeTemplate(templateData: ITestElementTemplateData): void {\n\t\ttemplateData.templateDisposable.clear();\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tdisposeElement(_element: ITreeNode<TestItemTreeElement, FuzzyScore>, _: number, templateData: ITestElementTemplateData): void {\n\t\ttemplateData.elementDisposable.clear();\n\t}\n\n\tprivate fillActionBar(element: TestItemTreeElement, data: ITestElementTemplateData) {\n\t\tconst { actions, contextOverlay } = getActionableElementActions(this.contextKeyService, this.menuService, this.testService, this.crService, this.profiles, element);\n\t\tconst crSelf = !!contextOverlay.getContextKeyValue(TestingContextKeys.isContinuousModeOn.key);\n\t\tconst crChild = !crSelf && this.crService.isEnabledForAChildOf(element.test.item.extId);\n\t\tdata.actionBar.domNode.classList.toggle('testing-is-continuous-run', crSelf || crChild);\n\t\tdata.actionBar.clear();\n\t\tdata.actionBar.context = element;\n\t\tdata.actionBar.push(actions.primary, { icon: true, label: false });\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tpublic renderElement(node: ITreeNode<TestItemTreeElement, FuzzyScore>, _depth: number, data: ITestElementTemplateData): void {\n\t\tdata.elementDisposable.clear();\n\t\tdata.current = node.element;\n\n\t\tdata.elementDisposable.add(node.element.onChange(() => this._renderElement(node, data)));\n\t\tthis._renderElement(node, data);\n\t}\n\n\tpublic _renderElement(node: ITreeNode<TestItemTreeElement, FuzzyScore>, data: ITestElementTemplateData): void {\n\t\tthis.fillActionBar(node.element, data);\n\n\t\tconst testHidden = this.testService.excluded.contains(node.element.test);\n\t\tdata.wrapper.classList.toggle('test-is-hidden', testHidden);\n\n\t\tconst icon = icons.testingStatesToIcons.get(\n\t\t\tnode.element.test.expand === TestItemExpandState.BusyExpanding || node.element.test.item.busy\n\t\t\t\t? TestResultState.Running\n\t\t\t\t: node.element.state);\n\n\t\tdata.icon.className = 'computed-state ' + (icon ? ThemeIcon.asClassName(icon) : '');\n\t\tif (node.element.retired) {\n\t\t\tdata.icon.className += ' retired';\n\t\t}\n\n\t\tdata.elementDisposable.add(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), data.label, getLabelForTestTreeElement(node.element)));\n\t\tif (node.element.test.item.label.trim()) {\n\t\t\tdom.reset(data.label, ...renderLabelWithIcons(node.element.test.item.label));\n\t\t} else {\n\t\t\tdata.label.textContent = String.fromCharCode(0xA0); // &nbsp;\n\t\t}\n\n\t\tlet description = node.element.description;\n\t\tif (node.element.duration !== undefined) {\n\t\t\tdescription = description\n\t\t\t\t? `${description}: ${formatDuration(node.element.duration)}`\n\t\t\t\t: formatDuration(node.element.duration);\n\t\t}\n\n\t\tif (description) {\n\t\t\tdom.append(data.label, dom.$('span.test-label-description', {}, description));\n\t\t}\n\t}\n}\n\nconst formatDuration = (ms: number) => {\n\tif (ms < 10) {\n\t\treturn `${ms.toFixed(1)}ms`;\n\t}\n\n\tif (ms < 1_000) {\n\t\treturn `${ms.toFixed(0)}ms`;\n\t}\n\n\treturn `${(ms / 1000).toFixed(1)}s`;\n};\n\nconst getActionableElementActions = (\n\tcontextKeyService: IContextKeyService,\n\tmenuService: IMenuService,\n\ttestService: ITestService,\n\tcrService: ITestingContinuousRunService,\n\tprofiles: ITestProfileService,\n\telement: TestItemTreeElement,\n) => {\n\tconst test = element instanceof TestItemTreeElement ? element.test : undefined;\n\tconst contextKeys: [string, unknown][] = getTestItemContextOverlay(test, test ? profiles.capabilitiesForTest(test.item) : 0);\n\tcontextKeys.push(['view', Testing.ExplorerViewId]);\n\tif (test) {\n\t\tconst ctrl = testService.getTestController(test.controllerId);\n\t\tconst supportsCr = !!ctrl && profiles.getControllerProfiles(ctrl.id).some(p =>\n\t\t\tp.supportsContinuousRun && canUseProfileWithTest(p, test));\n\t\tcontextKeys.push([\n\t\t\tTestingContextKeys.canRefreshTests.key,\n\t\t\tctrl && !!(ctrl.capabilities.get() & TestControllerCapability.Refresh) && TestId.isRoot(test.item.extId),\n\t\t], [\n\t\t\tTestingContextKeys.testItemIsHidden.key,\n\t\t\ttestService.excluded.contains(test)\n\t\t], [\n\t\t\tTestingContextKeys.isContinuousModeOn.key,\n\t\t\tsupportsCr && crService.isSpecificallyEnabledFor(test.item.extId)\n\t\t], [\n\t\t\tTestingContextKeys.isParentRunningContinuously.key,\n\t\t\tsupportsCr && crService.isEnabledForAParentOf(test.item.extId)\n\t\t], [\n\t\t\tTestingContextKeys.supportsContinuousRun.key,\n\t\t\tsupportsCr,\n\t\t], [\n\t\t\tTestingContextKeys.testResultOutdated.key,\n\t\t\telement.retired,\n\t\t], [\n\t\t\tTestingContextKeys.testResultState.key,\n\t\t\ttestResultStateToContextValues[element.state],\n\t\t]);\n\t}\n\n\tconst contextOverlay = contextKeyService.createOverlay(contextKeys);\n\tconst menu = menuService.getMenuActions(MenuId.TestItem, contextOverlay, {\n\t\tshouldForwardArgs: true,\n\t});\n\n\tconst actions = getActionBarActions(menu, 'inline');\n\n\treturn { actions, contextOverlay };\n};\n\nregisterThemingParticipant((theme, collector) => {\n\tif (theme.type === 'dark') {\n\t\tconst foregroundColor = theme.getColor(foreground);\n\t\tif (foregroundColor) {\n\t\t\tconst fgWithOpacity = new Color(new RGBA(foregroundColor.rgba.r, foregroundColor.rgba.g, foregroundColor.rgba.b, 0.65));\n\t\t\tcollector.addRule(`.test-explorer .test-explorer-messages { color: ${fgWithOpacity}; }`);\n\t\t}\n\t}\n});\n"]}