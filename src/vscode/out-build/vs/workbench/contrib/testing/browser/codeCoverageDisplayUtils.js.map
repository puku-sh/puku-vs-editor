{"version":3,"sources":["vs/workbench/contrib/testing/browser/codeCoverageDisplayUtils.ts"],"names":[],"mappings":"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","file":"codeCoverageDisplayUtils.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport { localize } from '../../../../nls.js';\nimport { chartsGreen, chartsRed, chartsYellow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { asCssVariableName } from '../../../../platform/theme/common/colorUtils.js';\nimport { CoverageBarSource } from './testCoverageBars.js';\nimport { ITestingCoverageBarThresholds, TestingDisplayedCoveragePercent } from '../common/configuration.js';\nimport { getTotalCoveragePercent } from '../common/testCoverage.js';\nimport { TestId } from '../common/testId.js';\nimport { LiveTestResult } from '../common/testResult.js';\nimport { ICoverageCount } from '../common/testTypes.js';\n\nexport const percent = (cc: ICoverageCount) => clamp(cc.total === 0 ? 1 : cc.covered / cc.total, 0, 1);\n\nconst colorThresholds = [\n\t{ color: `var(${asCssVariableName(chartsRed)})`, key: 'red' },\n\t{ color: `var(${asCssVariableName(chartsYellow)})`, key: 'yellow' },\n\t{ color: `var(${asCssVariableName(chartsGreen)})`, key: 'green' },\n] as const;\n\nexport const getCoverageColor = (pct: number, thresholds: ITestingCoverageBarThresholds) => {\n\tlet best = colorThresholds[0].color; //  red\n\tlet distance = pct;\n\tfor (const { key, color } of colorThresholds) {\n\t\tconst t = thresholds[key] / 100;\n\t\tif (t && pct >= t && pct - t < distance) {\n\t\t\tbest = color;\n\t\t\tdistance = pct - t;\n\t\t}\n\t}\n\treturn best;\n};\n\n\nconst epsilon = 10e-8;\n\nexport const displayPercent = (value: number, precision = 2) => {\n\tconst display = (value * 100).toFixed(precision);\n\n\t// avoid showing 100% coverage if it just rounds up:\n\tif (value < 1 - epsilon && display === '100') {\n\t\treturn `${100 - (10 ** -precision)}%`;\n\t}\n\n\treturn `${display}%`;\n};\n\nexport const calculateDisplayedStat = (coverage: CoverageBarSource, method: TestingDisplayedCoveragePercent) => {\n\tswitch (method) {\n\t\tcase TestingDisplayedCoveragePercent.Statement:\n\t\t\treturn percent(coverage.statement);\n\t\tcase TestingDisplayedCoveragePercent.Minimum: {\n\t\t\tlet value = percent(coverage.statement);\n\t\t\tif (coverage.branch) { value = Math.min(value, percent(coverage.branch)); }\n\t\t\tif (coverage.declaration) { value = Math.min(value, percent(coverage.declaration)); }\n\t\t\treturn value;\n\t\t}\n\t\tcase TestingDisplayedCoveragePercent.TotalCoverage:\n\t\t\treturn getTotalCoveragePercent(coverage.statement, coverage.branch, coverage.declaration);\n\t\tdefault:\n\t\t\tassertNever(method);\n\t}\n};\n\nexport function getLabelForItem(result: LiveTestResult, testId: TestId, commonPrefixLen: number) {\n\tconst parts: string[] = [];\n\tfor (const id of testId.idsFromRoot()) {\n\t\tconst item = result.getTestById(id.toString());\n\t\tif (!item) {\n\t\t\tbreak;\n\t\t}\n\n\t\tparts.push(item.label);\n\t}\n\n\treturn parts.slice(commonPrefixLen).join(' \\u203a ');\n}\n\nexport namespace labels {\n\texport const showingFilterFor = (label: string) => localize('testing.coverageForTest', \"Showing \\\"{0}\\\"\", label);\n\texport const clickToChangeFiltering = localize('changePerTestFilter', 'Click to view coverage for a single test');\n\texport const percentCoverage = (percent: number, precision?: number) => localize('testing.percentCoverage', '{0} Coverage', displayPercent(percent, precision));\n\texport const allTests = localize('testing.allTests', 'All tests');\n\texport const pickShowCoverage = localize('testing.pickTest', 'Pick a test to show coverage for');\n}\n"]}