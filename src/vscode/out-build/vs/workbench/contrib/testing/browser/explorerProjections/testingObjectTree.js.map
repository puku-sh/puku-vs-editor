{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/testing/browser/explorerProjections/testingObjectTree.ts","vs/workbench/contrib/testing/browser/explorerProjections/testingObjectTree.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,mBAAmB,EAAE,MAAM,qDAAqD,CAAC;AAC1F,OAAO,EAA2B,mBAAmB,EAAE,MAAM,YAAY,CAAC;AAE1E,OAAO,EAAE,MAAM,EAAE,MAAM,wBAAwB,CAAC;AAGhD,MAAM,OAAO,iBAAsC,SAAQ,mBAAyD;IAEnH;;;;;OAKG;IACI,qBAAqB,CAAC,mBAAsD;QAClF,MAAM,IAAI,GAAqC,mBAAmB,IAAI,EAAE,CAAC;QAEzE;;;WAGG;QACH,MAAM,KAAK,GAAG,CAAC,IAAwD,EAAE,MAAwC,EAAW,EAAE;YAC7H,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,YAAY,mBAAmB,CAAC,EAAE,CAAC;gBACpD,OAAO,KAAK,CAAC;YACd,CAAC;YAED,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7D,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YAChD,sFAAsF;YACtF,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC;YAEpF,IAAI,qBAAqB,GAAG,MAAM,CAAC,SAAS,KAAK,SAAS,CAAC;YAC3D,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC1B,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACnC,qBAAqB,GAAG,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,IAAI,qBAAqB,CAAC;gBACvE,CAAC;YACF,CAAC;YAED,IAAI,qBAAqB,EAAE,CAAC;gBAC3B,MAAM,CAAC,QAAQ,KAAK,EAAE,CAAC;gBACvB,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,MAAM,CAAC;YACnC,CAAC;iBAAM,IAAI,MAAM,CAAC,QAAQ,EAAE,cAAc,CAAC,OAAO,CAAC,EAAE,CAAC;gBACrD,OAAO,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YACjC,CAAC;YAED,OAAO,qBAAqB,CAAC;QAC9B,CAAC,CAAC;QAEF,IAAI,CAAC,QAAQ,KAAK,EAAE,CAAC;QAErB,0EAA0E;QAC1E,yEAAyE;QACzE,kCAAkC;QAClC,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC;YAC5C,IAAI,IAAI,CAAC,OAAO,YAAY,mBAAmB,EAAE,CAAC;gBACjD,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;oBACrE,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;gBACnB,CAAC;qBAAM,CAAC;oBACP,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;oBACpF,KAAK,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;gBACvB,CAAC;YACF,CAAC;QACF,CAAC;QAED,OAAO,IAAI,CAAC;IACb,CAAC;CACD","file":"testingObjectTree.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITreeNode } from '../../../../../base/browser/ui/tree/tree.js';\nimport { WorkbenchObjectTree } from '../../../../../platform/list/browser/listService.js';\nimport { TestExplorerTreeElement, TestItemTreeElement } from './index.js';\nimport { ISerializedTestTreeCollapseState } from './testingViewState.js';\nimport { TestId } from '../../common/testId.js';\n\n\nexport class TestingObjectTree<TFilterData = void> extends WorkbenchObjectTree<TestExplorerTreeElement, TFilterData> {\n\n\t/**\n\t * Gets a serialized view state for the tree, optimized for storage.\n\t *\n\t * @param updatePreviousState Optional previous state to mutate and update\n\t * instead of creating a new one.\n\t */\n\tpublic getOptimizedViewState(updatePreviousState?: ISerializedTestTreeCollapseState): ISerializedTestTreeCollapseState {\n\t\tconst root: ISerializedTestTreeCollapseState = updatePreviousState || {};\n\n\t\t/**\n\t\t * Recursive builder function. Returns whether the subtree has any non-default\n\t\t * value. Adds itself to the parent children if it does.\n\t\t */\n\t\tconst build = (node: ITreeNode<TestExplorerTreeElement | null, unknown>, parent: ISerializedTestTreeCollapseState): boolean => {\n\t\t\tif (!(node.element instanceof TestItemTreeElement)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst localId = TestId.localId(node.element.test.item.extId);\n\t\t\tconst inTree = parent.children?.[localId] || {};\n\t\t\t// only saved collapsed state if it's not the default (not collapsed, or a root depth)\n\t\t\tinTree.collapsed = node.depth === 0 || !node.collapsed ? node.collapsed : undefined;\n\n\t\t\tlet hasAnyNonDefaultValue = inTree.collapsed !== undefined;\n\t\t\tif (node.children.length) {\n\t\t\t\tfor (const child of node.children) {\n\t\t\t\t\thasAnyNonDefaultValue = build(child, inTree) || hasAnyNonDefaultValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasAnyNonDefaultValue) {\n\t\t\t\tparent.children ??= {};\n\t\t\t\tparent.children[localId] = inTree;\n\t\t\t} else if (parent.children?.hasOwnProperty(localId)) {\n\t\t\t\tdelete parent.children[localId];\n\t\t\t}\n\n\t\t\treturn hasAnyNonDefaultValue;\n\t\t};\n\n\t\troot.children ??= {};\n\n\t\t// Controller IDs are hidden if there's only a single test controller, but\n\t\t// make sure they're added when the tree is built if this is the case, so\n\t\t// that the later ID lookup works.\n\t\tfor (const node of this.getNode().children) {\n\t\t\tif (node.element instanceof TestItemTreeElement) {\n\t\t\t\tif (node.element.test.controllerId === node.element.test.item.extId) {\n\t\t\t\t\tbuild(node, root);\n\t\t\t\t} else {\n\t\t\t\t\tconst ctrlNode = root.children[node.element.test.controllerId] ??= { children: {} };\n\t\t\t\t\tbuild(node, ctrlNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn root;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITreeNode } from '../../../../../base/browser/ui/tree/tree.js';\nimport { WorkbenchObjectTree } from '../../../../../platform/list/browser/listService.js';\nimport { TestExplorerTreeElement, TestItemTreeElement } from './index.js';\nimport { ISerializedTestTreeCollapseState } from './testingViewState.js';\nimport { TestId } from '../../common/testId.js';\n\n\nexport class TestingObjectTree<TFilterData = void> extends WorkbenchObjectTree<TestExplorerTreeElement, TFilterData> {\n\n\t/**\n\t * Gets a serialized view state for the tree, optimized for storage.\n\t *\n\t * @param updatePreviousState Optional previous state to mutate and update\n\t * instead of creating a new one.\n\t */\n\tpublic getOptimizedViewState(updatePreviousState?: ISerializedTestTreeCollapseState): ISerializedTestTreeCollapseState {\n\t\tconst root: ISerializedTestTreeCollapseState = updatePreviousState || {};\n\n\t\t/**\n\t\t * Recursive builder function. Returns whether the subtree has any non-default\n\t\t * value. Adds itself to the parent children if it does.\n\t\t */\n\t\tconst build = (node: ITreeNode<TestExplorerTreeElement | null, unknown>, parent: ISerializedTestTreeCollapseState): boolean => {\n\t\t\tif (!(node.element instanceof TestItemTreeElement)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst localId = TestId.localId(node.element.test.item.extId);\n\t\t\tconst inTree = parent.children?.[localId] || {};\n\t\t\t// only saved collapsed state if it's not the default (not collapsed, or a root depth)\n\t\t\tinTree.collapsed = node.depth === 0 || !node.collapsed ? node.collapsed : undefined;\n\n\t\t\tlet hasAnyNonDefaultValue = inTree.collapsed !== undefined;\n\t\t\tif (node.children.length) {\n\t\t\t\tfor (const child of node.children) {\n\t\t\t\t\thasAnyNonDefaultValue = build(child, inTree) || hasAnyNonDefaultValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasAnyNonDefaultValue) {\n\t\t\t\tparent.children ??= {};\n\t\t\t\tparent.children[localId] = inTree;\n\t\t\t} else if (parent.children?.hasOwnProperty(localId)) {\n\t\t\t\tdelete parent.children[localId];\n\t\t\t}\n\n\t\t\treturn hasAnyNonDefaultValue;\n\t\t};\n\n\t\troot.children ??= {};\n\n\t\t// Controller IDs are hidden if there's only a single test controller, but\n\t\t// make sure they're added when the tree is built if this is the case, so\n\t\t// that the later ID lookup works.\n\t\tfor (const node of this.getNode().children) {\n\t\t\tif (node.element instanceof TestItemTreeElement) {\n\t\t\t\tif (node.element.test.controllerId === node.element.test.item.extId) {\n\t\t\t\t\tbuild(node, root);\n\t\t\t\t} else {\n\t\t\t\t\tconst ctrlNode = root.children[node.element.test.controllerId] ??= { children: {} };\n\t\t\t\t\tbuild(node, ctrlNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn root;\n\t}\n}\n"]}