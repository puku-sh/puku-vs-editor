{"version":3,"sources":["vs/workbench/contrib/testing/browser/testResultsView/testResultsOutput.ts"],"names":[],"mappings":"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","file":"testResultsOutput.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Delayer } from '../../../../../base/common/async.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Iterable } from '../../../../../base/common/iterator.js';\nimport { Disposable, DisposableStore, IDisposable, IReference, MutableDisposable, combinedDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ScrollEvent } from '../../../../../base/common/scrollable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ICodeEditor, IDiffEditorConstructionOptions } from '../../../../../editor/browser/editorBrowser.js';\nimport { CodeEditorWidget } from '../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { DiffEditorWidget } from '../../../../../editor/browser/widget/diffEditor/diffEditorWidget.js';\nimport { EmbeddedDiffEditorWidget } from '../../../../../editor/browser/widget/diffEditor/embeddedDiffEditorWidget.js';\nimport { IMarkdownRendererService } from '../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IDiffEditorOptions, IEditorOptions } from '../../../../../editor/common/config/editorOptions.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { IResolvedTextEditorModel, ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { peekViewResultsBackground } from '../../../../../editor/contrib/peekView/browser/peekView.js';\nimport { localize } from '../../../../../nls.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TerminalCapability } from '../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { TerminalCapabilityStore } from '../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { formatMessageForTerminal } from '../../../../../platform/terminal/common/terminalStrings.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IEditorConfiguration } from '../../../../browser/parts/editor/textEditor.js';\nimport { EditorModel } from '../../../../common/editor/editorModel.js';\nimport { PANEL_BACKGROUND, SIDE_BAR_BACKGROUND } from '../../../../common/theme.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../../common/views.js';\nimport { CALL_STACK_WIDGET_HEADER_HEIGHT } from '../../../debug/browser/callStackWidget.js';\nimport { DetachedProcessInfo } from '../../../terminal/browser/detachedTerminal.js';\nimport { IDetachedTerminalInstance, ITerminalService } from '../../../terminal/browser/terminal.js';\nimport { getXtermScaledDimensions } from '../../../terminal/browser/xterm/xtermTerminal.js';\nimport { TERMINAL_BACKGROUND_COLOR } from '../../../terminal/common/terminalColorRegistry.js';\nimport { Testing } from '../../common/constants.js';\nimport { MutableObservableValue } from '../../common/observableValue.js';\nimport { ITaskRawOutput, ITestResult, ITestRunTaskResults, LiveTestResult, TestResultItemChangeReason } from '../../common/testResult.js';\nimport { ITestMessage, TestMessageType, getMarkId } from '../../common/testTypes.js';\nimport { colorizeTestMessageInEditor } from '../testMessageColorizer.js';\nimport { InspectSubject, MessageSubject, TaskSubject, TestOutputSubject } from './testResultsSubject.js';\n\n\nclass SimpleDiffEditorModel extends EditorModel {\n\tpublic readonly original: ITextModel;\n\tpublic readonly modified: ITextModel;\n\n\tconstructor(\n\t\tprivate readonly _original: IReference<IResolvedTextEditorModel>,\n\t\tprivate readonly _modified: IReference<IResolvedTextEditorModel>,\n\t) {\n\t\tsuper();\n\t\tthis.original = this._original.object.textEditorModel;\n\t\tthis.modified = this._modified.object.textEditorModel;\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\t\tthis._original.dispose();\n\t\tthis._modified.dispose();\n\t}\n}\n\n\nexport interface IPeekOutputRenderer extends IDisposable {\n\treadonly onDidContentSizeChange?: Event<void>;\n\tonScrolled?(evt: ScrollEvent): void;\n\t/** Updates the displayed test. Should clear if it cannot display the test. */\n\tupdate(subject: InspectSubject): Promise<boolean>;\n\t/** Recalculate content layout. Returns the height it should be rendered at. */\n\tlayout(dimension: dom.IDimension, hasMultipleFrames: boolean): number | undefined;\n\t/** Dispose the content provider. */\n\tdispose(): void;\n}\n\nconst commonEditorOptions: IEditorOptions = {\n\tscrollBeyondLastLine: false,\n\tlinks: true,\n\tlineNumbers: 'off',\n\tglyphMargin: false,\n\tscrollbar: {\n\t\tvertical: 'hidden',\n\t\thorizontal: 'auto',\n\t\tuseShadows: false,\n\t\tverticalHasArrows: false,\n\t\thorizontalHasArrows: false,\n\t\thandleMouseWheel: false,\n\t},\n\toverviewRulerLanes: 0,\n\tfixedOverflowWidgets: true,\n\treadOnly: true,\n\tstickyScroll: { enabled: false },\n\tminimap: { enabled: false },\n\tautomaticLayout: false,\n};\n\nconst diffEditorOptions: IDiffEditorConstructionOptions = {\n\t...commonEditorOptions,\n\tenableSplitViewResizing: true,\n\tisInEmbeddedEditor: true,\n\trenderOverviewRuler: false,\n\tignoreTrimWhitespace: false,\n\trenderSideBySide: true,\n\tuseInlineViewWhenSpaceIsLimited: false,\n\toriginalAriaLabel: localize('testingOutputExpected', 'Expected result'),\n\tmodifiedAriaLabel: localize('testingOutputActual', 'Actual result'),\n\tdiffAlgorithm: 'advanced',\n};\n\nfunction applyEditorMirrorOptions<T extends IEditorOptions>(base: T, cfg: IConfigurationService, update: (options: Partial<IEditorOptions>) => void) {\n\tconst immutable = new Set(Object.keys(base));\n\tfunction applyCurrent() {\n\t\tconst configuration = cfg.getValue<IEditorConfiguration>('editor');\n\n\t\tlet changed = false;\n\t\tconst patch: Partial<IEditorOptions> = {};\n\t\tfor (const [key, value] of Object.entries(configuration)) {\n\t\t\tif (!immutable.has(key) && (base as Record<string, unknown>)[key] !== value) {\n\t\t\t\t(patch as Record<string, unknown>)[key] = value;\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\treturn changed ? patch : undefined;\n\t}\n\n\tObject.assign(base, applyCurrent());\n\n\treturn cfg.onDidChangeConfiguration(e => {\n\t\tif (e.affectsConfiguration('editor')) {\n\t\t\tconst patch = applyCurrent();\n\t\t\tif (patch) {\n\t\t\t\tupdate(patch);\n\t\t\t\tObject.assign(base, patch);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport class DiffContentProvider extends Disposable implements IPeekOutputRenderer {\n\tprivate readonly widget = this._register(new MutableDisposable<DiffEditorWidget>());\n\tprivate readonly model = this._register(new MutableDisposable());\n\tprivate dimension?: dom.IDimension;\n\tprivate helper?: ScrollHelper;\n\n\tpublic get onDidContentSizeChange() {\n\t\treturn this.widget.value?.onDidContentSizeChange || Event.None;\n\t}\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor | undefined,\n\t\tprivate readonly container: HTMLElement,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITextModelService private readonly modelService: ITextModelService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic async update(subject: InspectSubject) {\n\t\tif (!(subject instanceof MessageSubject)) {\n\t\t\tthis.clear();\n\t\t\treturn false;\n\t\t}\n\t\tconst message = subject.message;\n\t\tif (!ITestMessage.isDiffable(message)) {\n\t\t\tthis.clear();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst [original, modified] = await Promise.all([\n\t\t\tthis.modelService.createModelReference(subject.expectedUri),\n\t\t\tthis.modelService.createModelReference(subject.actualUri),\n\t\t]);\n\n\t\tconst model = this.model.value = new SimpleDiffEditorModel(original, modified);\n\t\tif (!this.widget.value) {\n\t\t\tconst options = { ...diffEditorOptions };\n\t\t\tconst listener = applyEditorMirrorOptions(\n\t\t\t\toptions,\n\t\t\t\tthis.configurationService,\n\t\t\t\tu => editor.updateOptions(u)\n\t\t\t);\n\n\t\t\tconst editor = this.widget.value = this.editor ? this.instantiationService.createInstance(\n\t\t\t\tEmbeddedDiffEditorWidget,\n\t\t\t\tthis.container,\n\t\t\t\toptions,\n\t\t\t\t{},\n\t\t\t\tthis.editor,\n\t\t\t) : this.instantiationService.createInstance(\n\t\t\t\tDiffEditorWidget,\n\t\t\t\tthis.container,\n\t\t\t\toptions,\n\t\t\t\t{},\n\t\t\t);\n\n\t\t\tEvent.once(editor.onDidDispose)(() => {\n\t\t\t\tlistener.dispose();\n\t\t\t});\n\n\t\t\tif (this.dimension) {\n\t\t\t\teditor.layout(this.dimension);\n\t\t\t}\n\t\t}\n\n\t\tthis.widget.value.setModel(model);\n\t\tthis.widget.value.updateOptions(this.getOptions(\n\t\t\tisMultiline(message.expected) || isMultiline(message.actual)\n\t\t));\n\n\t\treturn true;\n\t}\n\n\tprivate clear() {\n\t\tthis.model.clear();\n\t\tthis.widget.clear();\n\t}\n\n\tpublic layout(dimensions: dom.IDimension, hasMultipleFrames: boolean) {\n\t\tthis.dimension = dimensions;\n\t\tconst editor = this.widget.value;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\teditor.layout(dimensions);\n\t\tconst height = Math.max(\n\t\t\teditor.getOriginalEditor().getContentHeight(),\n\t\t\teditor.getModifiedEditor().getContentHeight()\n\t\t);\n\t\teditor.updateOptions({ scrollbar: { ...commonEditorOptions.scrollbar, handleMouseWheel: !hasMultipleFrames } });\n\t\tthis.helper = new ScrollHelper(hasMultipleFrames, height, dimensions.height);\n\t\treturn height;\n\t}\n\n\tpublic onScrolled(evt: ScrollEvent): void {\n\t\tthis.helper?.onScrolled(evt, this.widget.value?.getDomNode(), this.widget.value?.getOriginalEditor());\n\t}\n\n\tprotected getOptions(isMultiline: boolean): IDiffEditorOptions {\n\t\treturn isMultiline\n\t\t\t? { ...diffEditorOptions, lineNumbers: 'on' }\n\t\t\t: { ...diffEditorOptions, lineNumbers: 'off' };\n\t}\n}\n\n\nexport class MarkdownTestMessagePeek extends Disposable implements IPeekOutputRenderer {\n\n\tprivate readonly rendered = this._register(new DisposableStore());\n\n\tprivate element?: HTMLElement;\n\n\tconstructor(\n\t\tprivate readonly container: HTMLElement,\n\t\t@IMarkdownRendererService private readonly markdownRendererService: IMarkdownRendererService,\n\t) {\n\t\tsuper();\n\t\tthis._register(toDisposable(() => this.clear()));\n\t}\n\n\tpublic async update(subject: InspectSubject) {\n\t\tthis.clear();\n\t\tif (!(subject instanceof MessageSubject)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst message = subject.message;\n\t\tif (ITestMessage.isDiffable(message) || typeof message.message === 'string') {\n\t\t\treturn false;\n\t\t}\n\n\n\t\tconst rendered = this.rendered.add(this.markdownRendererService.render(message.message, {}));\n\t\trendered.element.style.userSelect = 'text';\n\t\trendered.element.classList.add('preview-text');\n\t\tthis.container.appendChild(rendered.element);\n\t\tthis.element = rendered.element;\n\t\tthis.rendered.add(toDisposable(() => rendered.element.remove()));\n\n\t\treturn true;\n\t}\n\n\tpublic layout(dimension: dom.IDimension): number | undefined {\n\t\tif (!this.element) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis.element.style.width = `${dimension.width - 32}px`;\n\t\treturn this.element.clientHeight;\n\t}\n\n\tprivate clear() {\n\t\tthis.rendered.clear();\n\t\tthis.element = undefined;\n\t}\n}\n\nclass ScrollHelper {\n\tconstructor(\n\t\tprivate readonly hasMultipleFrames: boolean,\n\t\tprivate readonly contentHeight: number,\n\t\tprivate readonly viewHeight: number,\n\t) { }\n\n\tpublic onScrolled(evt: ScrollEvent, container: HTMLElement | undefined | null, editor: ICodeEditor | undefined) {\n\t\tif (!editor || !container) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet delta = Math.max(0, evt.scrollTop - (this.hasMultipleFrames ? CALL_STACK_WIDGET_HEADER_HEIGHT : 0));\n\t\tdelta = Math.min(Math.max(0, this.contentHeight - this.viewHeight), delta);\n\n\t\teditor.setScrollTop(delta);\n\t\tcontainer.style.transform = `translateY(${delta}px)`;\n\t}\n}\n\nexport class PlainTextMessagePeek extends Disposable implements IPeekOutputRenderer {\n\tprivate readonly widgetDecorations = this._register(new MutableDisposable());\n\tprivate readonly widget = this._register(new MutableDisposable<CodeEditorWidget>());\n\tprivate readonly model = this._register(new MutableDisposable());\n\tprivate dimension?: dom.IDimension;\n\tprivate helper?: ScrollHelper;\n\n\tpublic get onDidContentSizeChange() {\n\t\treturn this.widget.value?.onDidContentSizeChange || Event.None;\n\t}\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor | undefined,\n\t\tprivate readonly container: HTMLElement,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITextModelService private readonly modelService: ITextModelService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic async update(subject: InspectSubject): Promise<boolean> {\n\t\tif (!(subject instanceof MessageSubject)) {\n\t\t\tthis.clear();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst message = subject.message;\n\t\tif (ITestMessage.isDiffable(message) || message.type === TestMessageType.Output || typeof message.message !== 'string') {\n\t\t\tthis.clear();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst modelRef = this.model.value = await this.modelService.createModelReference(subject.messageUri);\n\t\tif (!this.widget.value) {\n\t\t\tconst options = { ...commonEditorOptions };\n\t\t\tconst listener = applyEditorMirrorOptions(\n\t\t\t\toptions,\n\t\t\t\tthis.configurationService,\n\t\t\t\tu => editor.updateOptions(u)\n\t\t\t);\n\n\t\t\tconst editor = this.widget.value = this.editor ? this.instantiationService.createInstance(\n\t\t\t\tEmbeddedCodeEditorWidget,\n\t\t\t\tthis.container,\n\t\t\t\toptions,\n\t\t\t\t{},\n\t\t\t\tthis.editor,\n\t\t\t) : this.instantiationService.createInstance(\n\t\t\t\tCodeEditorWidget,\n\t\t\t\tthis.container,\n\t\t\t\toptions,\n\t\t\t\t{ isSimpleWidget: true }\n\t\t\t);\n\n\t\t\tEvent.once(editor.onDidDispose)(() => {\n\t\t\t\tlistener.dispose();\n\t\t\t});\n\n\t\t\tif (this.dimension) {\n\t\t\t\teditor.layout(this.dimension);\n\t\t\t}\n\t\t}\n\n\t\tthis.widget.value.setModel(modelRef.object.textEditorModel);\n\t\tthis.widget.value.updateOptions(commonEditorOptions);\n\t\tthis.widgetDecorations.value = colorizeTestMessageInEditor(message.message, this.widget.value);\n\t\treturn true;\n\t}\n\n\tprivate clear() {\n\t\tthis.widgetDecorations.clear();\n\t\tthis.widget.clear();\n\t\tthis.model.clear();\n\t}\n\n\tonScrolled(evt: ScrollEvent): void {\n\t\tthis.helper?.onScrolled(evt, this.widget.value?.getDomNode(), this.widget.value);\n\t}\n\n\tpublic layout(dimensions: dom.IDimension, hasMultipleFrames: boolean) {\n\t\tthis.dimension = dimensions;\n\t\tconst editor = this.widget.value;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\teditor.layout(dimensions);\n\t\tconst height = editor.getContentHeight();\n\t\tthis.helper = new ScrollHelper(hasMultipleFrames, height, dimensions.height);\n\t\teditor.updateOptions({ scrollbar: { ...commonEditorOptions.scrollbar, handleMouseWheel: !hasMultipleFrames } });\n\n\t\treturn height;\n\t}\n}\n\nexport class TerminalMessagePeek extends Disposable implements IPeekOutputRenderer {\n\tprivate dimensions?: dom.IDimension;\n\tprivate readonly terminalCwd = this._register(new MutableObservableValue<string>(''));\n\tprivate readonly xtermLayoutDelayer = this._register(new Delayer(50));\n\n\t/** Active terminal instance. */\n\tprivate readonly terminal = this._register(new MutableDisposable<IDetachedTerminalInstance>());\n\t/** Listener for streaming result data */\n\tprivate readonly outputDataListener = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly container: HTMLElement,\n\t\tprivate readonly isInPeekView: boolean,\n\t\t@ITerminalService private readonly terminalService: ITerminalService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@IWorkspaceContextService private readonly workspaceContext: IWorkspaceContextService,\n\t) {\n\t\tsuper();\n\t}\n\n\tprivate async makeTerminal() {\n\t\tconst prev = this.terminal.value;\n\t\tif (prev) {\n\t\t\tprev.xterm.clearBuffer();\n\t\t\tprev.xterm.clearSearchDecorations();\n\t\t\t// clearBuffer tries to retain the prompt. Reset prompt, scrolling state, etc.\n\t\t\tprev.xterm.write(`\\x1bc`);\n\t\t\treturn prev;\n\t\t}\n\n\t\tconst capabilities = new TerminalCapabilityStore();\n\t\tconst cwd = this.terminalCwd;\n\t\tcapabilities.add(TerminalCapability.CwdDetection, {\n\t\t\ttype: TerminalCapability.CwdDetection,\n\t\t\tget cwds() { return [cwd.value]; },\n\t\t\tonDidChangeCwd: cwd.onDidChange,\n\t\t\tgetCwd: () => cwd.value,\n\t\t\tupdateCwd: () => { },\n\t\t});\n\n\t\treturn this.terminal.value = await this.terminalService.createDetachedTerminal({\n\t\t\trows: 10,\n\t\t\tcols: 80,\n\t\t\treadonly: true,\n\t\t\tcapabilities,\n\t\t\tprocessInfo: new DetachedProcessInfo({ initialCwd: cwd.value }),\n\t\t\tcolorProvider: {\n\t\t\t\tgetBackgroundColor: theme => {\n\t\t\t\t\tconst terminalBackground = theme.getColor(TERMINAL_BACKGROUND_COLOR);\n\t\t\t\t\tif (terminalBackground) {\n\t\t\t\t\t\treturn terminalBackground;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.isInPeekView) {\n\t\t\t\t\t\treturn theme.getColor(peekViewResultsBackground);\n\t\t\t\t\t}\n\t\t\t\t\tconst location = this.viewDescriptorService.getViewLocationById(Testing.ResultsViewId);\n\t\t\t\t\treturn location === ViewContainerLocation.Panel\n\t\t\t\t\t\t? theme.getColor(PANEL_BACKGROUND)\n\t\t\t\t\t\t: theme.getColor(SIDE_BAR_BACKGROUND);\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic async update(subject: InspectSubject): Promise<boolean> {\n\t\tthis.outputDataListener.clear();\n\t\tif (subject instanceof TaskSubject) {\n\t\t\tawait this.updateForTaskSubject(subject);\n\t\t} else if (subject instanceof TestOutputSubject || (subject instanceof MessageSubject && subject.message.type === TestMessageType.Output)) {\n\t\t\tawait this.updateForTestSubject(subject);\n\t\t} else {\n\t\t\tthis.clear();\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate async updateForTestSubject(subject: TestOutputSubject | MessageSubject) {\n\t\tconst that = this;\n\t\tconst testItem = subject instanceof TestOutputSubject ? subject.test.item : subject.test;\n\t\tconst terminal = await this.updateGenerically<ITaskRawOutput>({\n\t\t\tsubject,\n\t\t\tnoOutputMessage: localize('caseNoOutput', 'The test case did not report any output.'),\n\t\t\tgetTarget: result => result?.tasks[subject.taskIndex].output,\n\t\t\t*doInitialWrite(output, results) {\n\t\t\t\tthat.updateCwd(testItem.uri);\n\t\t\t\tconst state = subject instanceof TestOutputSubject ? subject.test : results.getStateById(testItem.extId);\n\t\t\t\tif (!state) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (const message of state.tasks[subject.taskIndex].messages) {\n\t\t\t\t\tif (message.type === TestMessageType.Output) {\n\t\t\t\t\t\tyield* output.getRangeIter(message.offset, message.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdoListenForMoreData: (output, result, write) => result.onChange(e => {\n\t\t\t\tif (e.reason === TestResultItemChangeReason.NewMessage && e.item.item.extId === testItem.extId && e.message.type === TestMessageType.Output) {\n\t\t\t\t\tfor (const chunk of output.getRangeIter(e.message.offset, e.message.length)) {\n\t\t\t\t\t\twrite(chunk.buffer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t});\n\n\t\tif (subject instanceof MessageSubject && subject.message.type === TestMessageType.Output && subject.message.marker !== undefined) {\n\t\t\tterminal?.xterm.selectMarkedRange(getMarkId(subject.message.marker, true), getMarkId(subject.message.marker, false), /* scrollIntoView= */ true);\n\t\t}\n\t}\n\n\tprivate updateForTaskSubject(subject: TaskSubject) {\n\t\treturn this.updateGenerically<ITestRunTaskResults>({\n\t\t\tsubject,\n\t\t\tnoOutputMessage: localize('runNoOutput', 'The test run did not record any output.'),\n\t\t\tgetTarget: result => result?.tasks[subject.taskIndex],\n\t\t\tdoInitialWrite: (task, result) => {\n\t\t\t\t// Update the cwd and use the first test to try to hint at the correct cwd,\n\t\t\t\t// but often this will fall back to the first workspace folder.\n\t\t\t\tthis.updateCwd(Iterable.find(result.tests, t => !!t.item.uri)?.item.uri);\n\t\t\t\treturn task.output.buffers;\n\t\t\t},\n\t\t\tdoListenForMoreData: (task, _result, write) => task.output.onDidWriteData(e => write(e.buffer)),\n\t\t});\n\t}\n\n\tprivate async updateGenerically<T>(opts: {\n\t\tsubject: InspectSubject;\n\t\tnoOutputMessage: string;\n\t\tgetTarget: (result: ITestResult) => T | undefined;\n\t\tdoInitialWrite: (target: T, result: LiveTestResult) => Iterable<VSBuffer>;\n\t\tdoListenForMoreData: (target: T, result: LiveTestResult, write: (s: Uint8Array) => void) => IDisposable;\n\t}) {\n\t\tconst result = opts.subject.result;\n\t\tconst target = opts.getTarget(result);\n\t\tif (!target) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst terminal = await this.makeTerminal();\n\t\tlet didWriteData = false;\n\n\t\tconst pendingWrites = new MutableObservableValue(0);\n\t\tif (result instanceof LiveTestResult) {\n\t\t\tfor (const chunk of opts.doInitialWrite(target, result)) {\n\t\t\t\tdidWriteData ||= chunk.byteLength > 0;\n\t\t\t\tpendingWrites.value++;\n\t\t\t\tterminal.xterm.write(chunk.buffer, () => pendingWrites.value--);\n\t\t\t}\n\t\t} else {\n\t\t\tdidWriteData = true;\n\t\t\tthis.writeNotice(terminal, localize('runNoOutputForPast', 'Test output is only available for new test runs.'));\n\t\t}\n\n\t\tthis.attachTerminalToDom(terminal);\n\t\tthis.outputDataListener.clear();\n\n\t\tif (result instanceof LiveTestResult && !result.completedAt) {\n\t\t\tconst l1 = result.onComplete(() => {\n\t\t\t\tif (!didWriteData) {\n\t\t\t\t\tthis.writeNotice(terminal, opts.noOutputMessage);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst l2 = opts.doListenForMoreData(target, result, data => {\n\t\t\t\tterminal.xterm.write(data);\n\t\t\t\tdidWriteData ||= data.byteLength > 0;\n\t\t\t});\n\n\t\t\tthis.outputDataListener.value = combinedDisposable(l1, l2);\n\t\t}\n\n\t\tif (!this.outputDataListener.value && !didWriteData) {\n\t\t\tthis.writeNotice(terminal, opts.noOutputMessage);\n\t\t}\n\n\t\t// Ensure pending writes finish, otherwise the selection in `updateForTestSubject`\n\t\t// can happen before the markers are processed.\n\t\tif (pendingWrites.value > 0) {\n\t\t\tawait new Promise<void>(resolve => {\n\t\t\t\tconst l = pendingWrites.onDidChange(() => {\n\t\t\t\t\tif (pendingWrites.value === 0) {\n\t\t\t\t\t\tl.dispose();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn terminal;\n\t}\n\n\tprivate updateCwd(testUri?: URI) {\n\t\tconst wf = (testUri && this.workspaceContext.getWorkspaceFolder(testUri))\n\t\t\t|| this.workspaceContext.getWorkspace().folders[0];\n\t\tif (wf) {\n\t\t\tthis.terminalCwd.value = wf.uri.fsPath;\n\t\t}\n\t}\n\n\tprivate writeNotice(terminal: IDetachedTerminalInstance, str: string) {\n\t\tterminal.xterm.write(formatMessageForTerminal(str));\n\t}\n\n\tprivate attachTerminalToDom(terminal: IDetachedTerminalInstance) {\n\t\tterminal.xterm.write('\\x1b[?25l'); // hide cursor\n\t\tdom.scheduleAtNextAnimationFrame(dom.getWindow(this.container), () => this.layoutTerminal(terminal));\n\t\tterminal.attachToElement(this.container, { enableGpu: false });\n\t}\n\n\tprivate clear() {\n\t\tthis.outputDataListener.clear();\n\t\tthis.xtermLayoutDelayer.cancel();\n\t\tthis.terminal.clear();\n\t}\n\n\tpublic layout(dimensions: dom.IDimension) {\n\t\tthis.dimensions = dimensions;\n\t\tif (this.terminal.value) {\n\t\t\tthis.layoutTerminal(this.terminal.value, dimensions.width, dimensions.height);\n\t\t\treturn dimensions.height;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate layoutTerminal(\n\t\t{ xterm }: IDetachedTerminalInstance,\n\t\twidth = this.dimensions?.width ?? this.container.clientWidth,\n\t\theight = this.dimensions?.height ?? this.container.clientHeight\n\t) {\n\t\twidth -= 10 + 20; // scrollbar width + margin\n\t\tthis.xtermLayoutDelayer.trigger(() => {\n\t\t\tconst scaled = getXtermScaledDimensions(dom.getWindow(this.container), xterm.getFont(), width, height);\n\t\t\tif (scaled) {\n\t\t\t\txterm.resize(scaled.cols, scaled.rows);\n\t\t\t}\n\t\t});\n\t}\n}\n\nconst isMultiline = (str: string | undefined) => !!str && str.includes('\\n');\n"]}