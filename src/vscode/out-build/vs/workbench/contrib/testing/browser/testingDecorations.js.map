{"version":3,"sources":["vs/workbench/contrib/testing/browser/testingDecorations.ts"],"names":[],"mappings":"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","file":"testingDecorations.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { renderAsPlaintext } from '../../../../base/browser/markdownRenderer.js';\nimport { Action, IAction, Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { mapFindFirst } from '../../../../base/common/arraysFind.js';\nimport { RunOnceScheduler, Throttler, timeout } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableMap, DisposableStore, IReference, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport { autorun } from '../../../../base/common/observable.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { count, truncateMiddle } from '../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Constants } from '../../../../base/common/uint.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition, IContentWidgetRenderedCoordinate, IEditorMouseEvent, MouseTargetType } from '../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { EditorOption } from '../../../../editor/common/config/editorOptions.js';\nimport { overviewRulerError, overviewRulerInfo } from '../../../../editor/common/core/editorColorRegistry.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { IEditorContribution } from '../../../../editor/common/editorCommon.js';\nimport { GlyphMarginLane, IModelDecorationOptions, IModelDecorationsChangeAccessor, IModelDeltaDecoration, ITextModel, OverviewRulerLane, TrackedRangeStickiness } from '../../../../editor/common/model.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { localize } from '../../../../nls.js';\nimport { getFlatContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { EditorLineNumberContextMenu, GutterActionsRegistry } from '../../codeEditor/browser/editorLineNumberMenu.js';\nimport { DefaultGutterClickAction, TestingConfigKeys, getTestingConfiguration } from '../common/configuration.js';\nimport { TestCommandId, Testing, labelForTestInState } from '../common/constants.js';\nimport { TestId } from '../common/testId.js';\nimport { ITestProfileService } from '../common/testProfileService.js';\nimport { ITestResult, LiveTestResult, TestResultItemChangeReason } from '../common/testResult.js';\nimport { ITestResultService } from '../common/testResultService.js';\nimport { ITestService, getContextForTestItem, simplifyTestsToExecute, testsInFile } from '../common/testService.js';\nimport { ITestErrorMessage, ITestMessage, ITestRunProfile, IncrementalTestCollectionItem, InternalTestItem, TestDiffOpType, TestMessageType, TestResultItem, TestResultState, TestRunProfileBitset } from '../common/testTypes.js';\nimport { ITestDecoration as IPublicTestDecoration, ITestingDecorationsService, TestDecorations } from '../common/testingDecorations.js';\nimport { ITestingPeekOpener } from '../common/testingPeekOpener.js';\nimport { isFailedState, maxPriority } from '../common/testingStates.js';\nimport { TestUriType, buildTestUri, parseTestUri } from '../common/testingUri.js';\nimport { getTestItemContextOverlay } from './explorerProjections/testItemContextOverlay.js';\nimport { testingDebugAllIcon, testingDebugIcon, testingRunAllIcon, testingRunIcon, testingStatesToIcons } from './icons.js';\nimport { renderTestMessageAsText } from './testMessageColorizer.js';\nimport { MessageSubject } from './testResultsView/testResultsSubject.js';\nimport { TestingOutputPeekController } from './testingOutputPeek.js';\n\nconst MAX_INLINE_MESSAGE_LENGTH = 128;\nconst MAX_TESTS_IN_SUBMENU = 30;\nconst GLYPH_MARGIN_LANE = GlyphMarginLane.Center;\n\nfunction isOriginalInDiffEditor(codeEditorService: ICodeEditorService, codeEditor: ICodeEditor): boolean {\n\tconst diffEditors = codeEditorService.listDiffEditors();\n\n\tfor (const diffEditor of diffEditors) {\n\t\tif (diffEditor.getOriginalEditor() === codeEditor) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\ninterface ITestDecoration extends IPublicTestDecoration {\n\tid: string;\n\tclick(e: IEditorMouseEvent): boolean;\n}\n\n/** Value for saved decorations, providing fast accessors for the hot 'syncDecorations' path */\nclass CachedDecorations {\n\tprivate readonly runByIdKey = new Map<string, RunTestDecoration>();\n\n\tpublic get size() {\n\t\treturn this.runByIdKey.size;\n\t}\n\n\t/** Gets a test run decoration that contains exactly the given test IDs */\n\tpublic getForExactTests(testIds: string[]) {\n\t\tconst key = testIds.sort().join('\\0\\0');\n\t\treturn this.runByIdKey.get(key);\n\t}\n\t/** Adds a new test run decroation */\n\tpublic addTest(d: RunTestDecoration) {\n\t\tconst key = d.testIds.sort().join('\\0\\0');\n\t\tthis.runByIdKey.set(key, d);\n\t}\n\n\t/** Finds an extension by VS Code event ID */\n\tpublic getById(decorationId: string) {\n\t\tfor (const d of this.runByIdKey.values()) {\n\t\t\tif (d.id === decorationId) {\n\t\t\t\treturn d;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/** Iterate over all decorations */\n\t*[Symbol.iterator](): IterableIterator<ITestDecoration> {\n\t\tfor (const d of this.runByIdKey.values()) {\n\t\t\tyield d;\n\t\t}\n\t}\n}\n\nexport class TestingDecorationService extends Disposable implements ITestingDecorationsService {\n\tdeclare public _serviceBrand: undefined;\n\n\tprivate generation = 0;\n\tprivate readonly changeEmitter = new Emitter<void>();\n\tprivate readonly decorationCache = new ResourceMap<{\n\t\t/** The document version at which ranges have been updated, requiring rerendering */\n\t\trangeUpdateVersionId?: number;\n\t\t/** Counter for the results rendered in the document */\n\t\tgeneration: number;\n\t\tisAlt?: boolean;\n\t\tvalue: CachedDecorations;\n\t}>();\n\n\t/**\n\t * List of messages that should be hidden because an editor changed their\n\t * underlying ranges. I think this is good enough, because:\n\t *  - Message decorations are never shown across reloads; this does not\n\t *    need to persist\n\t *  - Message instances are stable for any completed test results for\n\t *    the duration of the session.\n\t */\n\tprivate readonly invalidatedMessages = new WeakSet<ITestMessage>();\n\n\t/** @inheritdoc */\n\tpublic readonly onDidChange = this.changeEmitter.event;\n\n\tconstructor(\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITestService private readonly testService: ITestService,\n\t\t@ITestResultService private readonly results: ITestResultService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t) {\n\t\tsuper();\n\t\tcodeEditorService.registerDecorationType('test-message-decoration', TestMessageDecoration.decorationId, {}, undefined);\n\n\t\tthis._register(modelService.onModelRemoved(e => this.decorationCache.delete(e.uri)));\n\n\t\tconst debounceInvalidate = this._register(new RunOnceScheduler(() => this.invalidate(), 100));\n\n\t\t// If ranges were updated in the document, mark that we should explicitly\n\t\t// sync decorations to the published lines, since we assume that everything\n\t\t// is up to date. This prevents issues, as in #138632, #138835, #138922.\n\t\tthis._register(this.testService.onWillProcessDiff(diff => {\n\t\t\tfor (const entry of diff) {\n\t\t\t\tif (entry.op !== TestDiffOpType.DocumentSynced) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst rec = this.decorationCache.get(entry.uri);\n\t\t\t\tif (rec) {\n\t\t\t\t\trec.rangeUpdateVersionId = entry.docv;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!debounceInvalidate.isScheduled()) {\n\t\t\t\tdebounceInvalidate.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.any(\n\t\t\tthis.results.onResultsChanged,\n\t\t\tthis.results.onTestChanged,\n\t\t\tthis.testService.excluded.onTestExclusionsChanged,\n\t\t\tEvent.filter(configurationService.onDidChangeConfiguration, e => e.affectsConfiguration(TestingConfigKeys.GutterEnabled)),\n\t\t)(() => {\n\t\t\tif (!debounceInvalidate.isScheduled()) {\n\t\t\t\tdebounceInvalidate.schedule();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(GutterActionsRegistry.registerGutterActionsGenerator((context, result) => {\n\t\t\tconst model = context.editor.getModel();\n\t\t\tconst testingDecorations = TestingDecorations.get(context.editor);\n\t\t\tif (!model || !testingDecorations?.currentUri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst currentDecorations = this.syncDecorations(testingDecorations.currentUri);\n\t\t\tif (!currentDecorations.size) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst modelDecorations = model.getLinesDecorations(context.lineNumber, context.lineNumber);\n\t\t\tfor (const { id } of modelDecorations) {\n\t\t\t\tconst decoration = currentDecorations.getById(id);\n\t\t\t\tif (decoration) {\n\t\t\t\t\tconst { object: actions } = decoration.getContextMenuActions();\n\t\t\t\t\tfor (const action of actions) {\n\t\t\t\t\t\tresult.push(action, '1_testing');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\t/** @inheritdoc */\n\tpublic invalidateResultMessage(message: ITestMessage) {\n\t\tthis.invalidatedMessages.add(message);\n\t\tthis.invalidate();\n\t}\n\n\t/** @inheritdoc */\n\tpublic syncDecorations(resource: URI): CachedDecorations {\n\t\tconst model = this.modelService.getModel(resource);\n\t\tif (!model) {\n\t\t\treturn new CachedDecorations();\n\t\t}\n\n\t\tconst cached = this.decorationCache.get(resource);\n\t\tif (cached && cached.generation === this.generation && (cached.rangeUpdateVersionId === undefined || cached.rangeUpdateVersionId !== model.getVersionId())) {\n\t\t\treturn cached.value;\n\t\t}\n\n\t\treturn this.applyDecorations(model);\n\t}\n\n\t/** @inheritdoc */\n\tpublic getDecoratedTestPosition(resource: URI, testId: string) {\n\t\tconst model = this.modelService.getModel(resource);\n\t\tif (!model) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst decoration = Iterable.find(this.syncDecorations(resource), v => v instanceof RunTestDecoration && v.isForTest(testId));\n\t\tif (!decoration) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// decoration is collapsed, so the range is meaningless; only position matters.\n\t\treturn model.getDecorationRange(decoration.id)?.getStartPosition();\n\t}\n\n\tprivate invalidate() {\n\t\tthis.generation++;\n\t\tthis.changeEmitter.fire();\n\t}\n\n\t/**\n\t * Sets whether alternate actions are shown for the model.\n\t */\n\tpublic updateDecorationsAlternateAction(resource: URI, isAlt: boolean) {\n\t\tconst model = this.modelService.getModel(resource);\n\t\tconst cached = this.decorationCache.get(resource);\n\t\tif (!model || !cached || cached.isAlt === isAlt) {\n\t\t\treturn;\n\t\t}\n\n\t\tcached.isAlt = isAlt;\n\t\tmodel.changeDecorations(accessor => {\n\t\t\tfor (const decoration of cached.value) {\n\t\t\t\tif (decoration instanceof RunTestDecoration && decoration.editorDecoration.alternate) {\n\t\t\t\t\taccessor.changeDecorationOptions(\n\t\t\t\t\t\tdecoration.id,\n\t\t\t\t\t\tisAlt ? decoration.editorDecoration.alternate : decoration.editorDecoration.options,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Applies the current set of test decorations to the given text model.\n\t */\n\tprivate applyDecorations(model: ITextModel) {\n\t\tconst gutterEnabled = getTestingConfiguration(this.configurationService, TestingConfigKeys.GutterEnabled);\n\t\tconst cached = this.decorationCache.get(model.uri);\n\t\tconst testRangesUpdated = cached?.rangeUpdateVersionId === model.getVersionId();\n\t\tconst lastDecorations = cached?.value ?? new CachedDecorations();\n\n\t\tconst newDecorations = model.changeDecorations(accessor => {\n\t\t\tconst newDecorations = new CachedDecorations();\n\t\t\tconst runDecorations = new TestDecorations<{ line: number; id: ''; test: IncrementalTestCollectionItem; resultItem: TestResultItem | undefined }>();\n\t\t\tfor (const test of this.testService.collection.getNodeByUrl(model.uri)) {\n\t\t\t\tif (!test.item.range) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst stateLookup = this.results.getStateById(test.item.extId);\n\t\t\t\tconst line = test.item.range.startLineNumber;\n\t\t\t\trunDecorations.push({ line, id: '', test, resultItem: stateLookup?.[1] });\n\t\t\t}\n\n\t\t\tfor (const [line, tests] of runDecorations.lines()) {\n\t\t\t\tconst multi = tests.length > 1;\n\t\t\t\tlet existing = lastDecorations.getForExactTests(tests.map(t => t.test.item.extId));\n\n\t\t\t\t// see comment in the constructor for what's going on here\n\t\t\t\tif (existing && testRangesUpdated && model.getDecorationRange(existing.id)?.startLineNumber !== line) {\n\t\t\t\t\texisting = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (existing) {\n\t\t\t\t\tif (existing.replaceOptions(tests, gutterEnabled)) {\n\t\t\t\t\t\taccessor.changeDecorationOptions(existing.id, existing.editorDecoration.options);\n\t\t\t\t\t}\n\t\t\t\t\tnewDecorations.addTest(existing);\n\t\t\t\t} else {\n\t\t\t\t\tnewDecorations.addTest(multi\n\t\t\t\t\t\t? this.instantiationService.createInstance(MultiRunTestDecoration, tests, gutterEnabled, model)\n\t\t\t\t\t\t: this.instantiationService.createInstance(RunSingleTestDecoration, tests[0].test, tests[0].resultItem, model, gutterEnabled));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst saveFromRemoval = new Set<string>();\n\t\t\tfor (const decoration of newDecorations) {\n\t\t\t\tif (decoration.id === '') {\n\t\t\t\t\tdecoration.id = accessor.addDecoration(decoration.editorDecoration.range, decoration.editorDecoration.options);\n\t\t\t\t} else {\n\t\t\t\t\tsaveFromRemoval.add(decoration.id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const decoration of lastDecorations) {\n\t\t\t\tif (!saveFromRemoval.has(decoration.id)) {\n\t\t\t\t\taccessor.removeDecoration(decoration.id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.decorationCache.set(model.uri, {\n\t\t\t\tgeneration: this.generation,\n\t\t\t\trangeUpdateVersionId: cached?.rangeUpdateVersionId,\n\t\t\t\tvalue: newDecorations,\n\t\t\t});\n\n\t\t\treturn newDecorations;\n\t\t});\n\n\t\treturn newDecorations || lastDecorations;\n\t}\n}\n\nexport class TestingDecorations extends Disposable implements IEditorContribution {\n\t/**\n\t * Results invalidated by editor changes.\n\t */\n\tpublic static invalidatedTests = new WeakSet<TestResultItem | ITestMessage>();\n\n\t/**\n\t * Gets the decorations associated with the given code editor.\n\t */\n\tpublic static get(editor: ICodeEditor): TestingDecorations | null {\n\t\treturn editor.getContribution<TestingDecorations>(Testing.DecorationsContributionId);\n\t}\n\n\tpublic get currentUri() { return this._currentUri; }\n\n\tprivate _currentUri?: URI;\n\tprivate readonly expectedWidget = this._register(new MutableDisposable<ExpectedLensContentWidget>());\n\tprivate readonly actualWidget = this._register(new MutableDisposable<ActualLensContentWidget>());\n\n\tprivate readonly errorContentWidgets = this._register(new DisposableMap<ITestMessage, TestErrorContentWidget>());\n\tprivate readonly loggedMessageDecorations = new Map<ITestMessage, {\n\t\tid: string;\n\t\tline: number;\n\t\tresultItem: TestResultItem | undefined;\n\t}>();\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t\t@ITestService private readonly testService: ITestService,\n\t\t@ITestingDecorationsService private readonly decorations: ITestingDecorationsService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@ITestResultService private readonly results: ITestResultService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tcodeEditorService.registerDecorationType('test-message-decoration', TestMessageDecoration.decorationId, {}, undefined, editor);\n\n\t\tthis.attachModel(editor.getModel()?.uri);\n\t\tthis._register(decorations.onDidChange(() => {\n\t\t\tif (this._currentUri) {\n\t\t\t\tdecorations.syncDecorations(this._currentUri);\n\t\t\t}\n\t\t}));\n\n\t\tconst msgThrottler = this._register(new Throttler());\n\t\tthis._register(this.results.onTestChanged(ev => {\n\t\t\tif (ev.reason !== TestResultItemChangeReason.NewMessage) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmsgThrottler.queue(() => {\n\t\t\t\tthis.applyResults();\n\t\t\t\treturn timeout(100);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(Event.any(\n\t\t\tthis.results.onResultsChanged,\n\t\t\teditor.onDidChangeModel,\n\t\t\tthis.testService.showInlineOutput.onDidChange,\n\t\t)(() => this.applyResults()));\n\n\t\tconst win = dom.getWindow(editor.getDomNode());\n\t\tthis._register(dom.addDisposableListener(win, 'keydown', e => {\n\t\t\tif (new StandardKeyboardEvent(e).keyCode === KeyCode.Alt && this._currentUri) {\n\t\t\t\tdecorations.updateDecorationsAlternateAction(this._currentUri, true);\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(win, 'keyup', e => {\n\t\t\tif (new StandardKeyboardEvent(e).keyCode === KeyCode.Alt && this._currentUri) {\n\t\t\t\tdecorations.updateDecorationsAlternateAction(this._currentUri, false);\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(win, 'blur', () => {\n\t\t\tif (this._currentUri) {\n\t\t\t\tdecorations.updateDecorationsAlternateAction(this._currentUri, false);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.editor.onKeyUp(e => {\n\t\t\tif (e.keyCode === KeyCode.Alt && this._currentUri) {\n\t\t\t\tdecorations.updateDecorationsAlternateAction(this._currentUri!, false);\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.editor.onDidChangeModel(e => this.attachModel(e.newModelUrl || undefined)));\n\t\tthis._register(this.editor.onMouseDown(e => {\n\t\t\tif (e.target.position && this.currentUri) {\n\t\t\t\tconst modelDecorations = editor.getModel()?.getLineDecorations(e.target.position.lineNumber) ?? [];\n\t\t\t\tif (!modelDecorations.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst cache = decorations.syncDecorations(this.currentUri);\n\t\t\t\tfor (const { id } of modelDecorations) {\n\t\t\t\t\tif ((cache.getById(id) as ITestDecoration | undefined)?.click(e)) {\n\t\t\t\t\t\te.event.stopPropagation();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(Event.accumulate(this.editor.onDidChangeModelContent, 0, this._store)(evts => {\n\t\t\tconst model = editor.getModel();\n\t\t\tif (!this._currentUri || !model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet changed = false;\n\t\t\tfor (const [message, deco] of this.loggedMessageDecorations) {\n\t\t\t\t// invalidate decorations if either the line they're on was changed,\n\t\t\t\t// or if the range of the test was changed. The range of the test is\n\t\t\t\t// not always present, so check bo.\n\t\t\t\tconst invalidate = evts.some(e => e.changes.some(c =>\n\t\t\t\t\tc.range.startLineNumber <= deco.line && c.range.endLineNumber >= deco.line\n\t\t\t\t\t|| (deco.resultItem?.item.range && deco.resultItem.item.range.startLineNumber <= c.range.startLineNumber && deco.resultItem.item.range.endLineNumber >= c.range.endLineNumber)\n\t\t\t\t));\n\n\t\t\t\tif (invalidate) {\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tTestingDecorations.invalidatedTests.add(deco.resultItem || message);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (changed) {\n\t\t\t\tthis.applyResults();\n\t\t\t}\n\t\t}));\n\n\t\tconst updateFontFamilyVar = () => {\n\t\t\tthis.editor.getContainerDomNode().style.setProperty('--testMessageDecorationFontFamily', editor.getOption(EditorOption.fontFamily));\n\t\t\tthis.editor.getContainerDomNode().style.setProperty('--testMessageDecorationFontSize', `${editor.getOption(EditorOption.fontSize)}px`);\n\t\t};\n\t\tthis._register(this.editor.onDidChangeConfiguration((e) => {\n\t\t\tif (e.hasChanged(EditorOption.fontFamily)) {\n\t\t\t\tupdateFontFamilyVar();\n\t\t\t}\n\t\t}));\n\t\tupdateFontFamilyVar();\n\t}\n\n\tprivate attachModel(uri?: URI) {\n\t\tswitch (uri && parseTestUri(uri)?.type) {\n\t\t\tcase TestUriType.ResultExpectedOutput:\n\t\t\t\tthis.expectedWidget.value = new ExpectedLensContentWidget(this.editor);\n\t\t\t\tthis.actualWidget.clear();\n\t\t\t\tbreak;\n\t\t\tcase TestUriType.ResultActualOutput:\n\t\t\t\tthis.expectedWidget.clear();\n\t\t\t\tthis.actualWidget.value = new ActualLensContentWidget(this.editor);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.expectedWidget.clear();\n\t\t\t\tthis.actualWidget.clear();\n\t\t}\n\n\t\tif (isOriginalInDiffEditor(this.codeEditorService, this.editor)) {\n\t\t\turi = undefined;\n\t\t}\n\n\t\tthis._currentUri = uri;\n\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.decorations.syncDecorations(uri);\n\n\t\t(async () => {\n\t\t\tfor await (const _tests of testsInFile(this.testService, this.uriIdentityService, uri, false)) {\n\t\t\t\t// consume the iterator so that all tests in the file get expanded. Or\n\t\t\t\t// at least until the URI changes. If new items are requested, changes\n\t\t\t\t// will be trigged in the `onDidProcessDiff` callback.\n\t\t\t\tif (this._currentUri !== uri) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t}\n\n\tprivate applyResults() {\n\t\tconst model = this.editor.getModel();\n\t\tif (!model) {\n\t\t\treturn this.clearResults();\n\t\t}\n\n\t\tconst uriStr = model.uri.toString();\n\t\tconst seenLines = new Set<number>();\n\t\tthis.applyResultsContentWidgets(uriStr, seenLines);\n\t\tthis.applyResultsLoggedMessages(uriStr, seenLines);\n\t}\n\n\tprivate clearResults() {\n\t\tthis.errorContentWidgets.clearAndDisposeAll();\n\t}\n\n\tprivate isMessageInvalidated(message: ITestMessage) {\n\t\treturn TestingDecorations.invalidatedTests.has(message);\n\t}\n\n\tprivate applyResultsContentWidgets(uriStr: string, seenLines: Set<number>) {\n\t\tconst seen = new Set<ITestMessage>();\n\t\tif (getTestingConfiguration(this.configurationService, TestingConfigKeys.ShowAllMessages)) {\n\t\t\tthis.results.results.forEach(lastResult => this.applyContentWidgetsFromResult(lastResult, uriStr, seen, seenLines));\n\t\t} else if (this.results.results.length) {\n\t\t\tthis.applyContentWidgetsFromResult(this.results.results[0], uriStr, seen, seenLines);\n\t\t}\n\n\t\tfor (const message of this.errorContentWidgets.keys()) {\n\t\t\tif (!seen.has(message)) {\n\t\t\t\tthis.errorContentWidgets.deleteAndDispose(message);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate applyContentWidgetsFromResult(lastResult: ITestResult, uriStr: string, seen: Set<ITestMessage>, seenLines: Set<number>) {\n\t\tfor (const test of lastResult.tests) {\n\t\t\tif (TestingDecorations.invalidatedTests.has(test)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (let taskId = 0; taskId < test.tasks.length; taskId++) {\n\t\t\t\tconst state = test.tasks[taskId];\n\t\t\t\t// push error decorations first so they take precedence over normal output\n\t\t\t\tfor (let i = 0; i < state.messages.length; i++) {\n\t\t\t\t\tconst m = state.messages[i];\n\t\t\t\t\tif (m.type !== TestMessageType.Error || this.isMessageInvalidated(m)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst line: number | undefined = m.location?.uri.toString() === uriStr\n\t\t\t\t\t\t? m.location.range.startLineNumber\n\t\t\t\t\t\t: m.stackTrace && mapFindFirst(m.stackTrace, (f) => f.position && f.uri?.toString() === uriStr ? f.position.lineNumber : undefined);\n\t\t\t\t\tif (line === undefined || seenLines.has(line)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tseenLines.add(line);\n\t\t\t\t\tlet deco = this.errorContentWidgets.get(m);\n\t\t\t\t\tif (!deco) {\n\t\t\t\t\t\tconst lineLength = this.editor.getModel()?.getLineLength(line) ?? 100;\n\t\t\t\t\t\tdeco = this.instantiationService.createInstance(\n\t\t\t\t\t\t\tTestErrorContentWidget,\n\t\t\t\t\t\t\tthis.editor,\n\t\t\t\t\t\t\tnew Position(line, lineLength + 1),\n\t\t\t\t\t\t\tm,\n\t\t\t\t\t\t\ttest,\n\t\t\t\t\t\t\tbuildTestUri({\n\t\t\t\t\t\t\t\ttype: TestUriType.ResultActualOutput,\n\t\t\t\t\t\t\t\tmessageIndex: i,\n\t\t\t\t\t\t\t\ttaskIndex: taskId,\n\t\t\t\t\t\t\t\tresultId: lastResult.id,\n\t\t\t\t\t\t\t\ttestExtId: test.item.extId,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.errorContentWidgets.set(m, deco);\n\t\t\t\t\t}\n\t\t\t\t\tseen.add(m);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate applyResultsLoggedMessages(uriStr: string, messageLines: Set<number>) {\n\t\tthis.editor.changeDecorations(accessor => {\n\t\t\tconst seen = new Set<ITestMessage>();\n\t\t\tif (getTestingConfiguration(this.configurationService, TestingConfigKeys.ShowAllMessages)) {\n\t\t\t\tthis.results.results.forEach(r => this.applyLoggedMessageFromResult(r, uriStr, seen, messageLines, accessor));\n\t\t\t} else if (this.results.results.length) {\n\t\t\t\tthis.applyLoggedMessageFromResult(this.results.results[0], uriStr, seen, messageLines, accessor);\n\t\t\t}\n\n\t\t\tfor (const [message, { id }] of this.loggedMessageDecorations) {\n\t\t\t\tif (!seen.has(message)) {\n\t\t\t\t\taccessor.removeDecoration(id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate applyLoggedMessageFromResult(lastResult: ITestResult, uriStr: string, seen: Set<ITestMessage>, messageLines: Set<number>, accessor: IModelDecorationsChangeAccessor) {\n\t\tif (!this.testService.showInlineOutput.value || !(lastResult instanceof LiveTestResult)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tryAdd = (resultItem: TestResultItem | undefined, m: ITestMessage, uri?: URI) => {\n\t\t\tif (this.isMessageInvalidated(m) || m.location?.uri.toString() !== uriStr) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tseen.add(m);\n\t\t\tconst line = m.location.range.startLineNumber;\n\t\t\tif (messageLines.has(line) || this.loggedMessageDecorations.has(m)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst deco = this.instantiationService.createInstance(TestMessageDecoration, m, uri, this.editor.getModel()!);\n\n\t\t\tmessageLines.add(line);\n\t\t\tconst id = accessor.addDecoration(\n\t\t\t\tdeco.editorDecoration.range,\n\t\t\t\tdeco.editorDecoration.options,\n\t\t\t);\n\t\t\tthis.loggedMessageDecorations.set(m, { id, line, resultItem });\n\t\t};\n\n\t\tfor (const test of lastResult.tests) {\n\t\t\tif (TestingDecorations.invalidatedTests.has(test)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (let taskId = 0; taskId < test.tasks.length; taskId++) {\n\t\t\t\tconst state = test.tasks[taskId];\n\t\t\t\tfor (let i = state.messages.length - 1; i >= 0; i--) {\n\t\t\t\t\tconst m = state.messages[i];\n\t\t\t\t\tif (m.type === TestMessageType.Output) {\n\t\t\t\t\t\ttryAdd(test, m, buildTestUri({\n\t\t\t\t\t\t\ttype: TestUriType.ResultActualOutput,\n\t\t\t\t\t\t\tmessageIndex: i,\n\t\t\t\t\t\t\ttaskIndex: taskId,\n\t\t\t\t\t\t\tresultId: lastResult.id,\n\t\t\t\t\t\t\ttestExtId: test.item.extId,\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const task of lastResult.tasks) {\n\t\t\tfor (const m of task.otherMessages) {\n\t\t\t\ttryAdd(undefined, m);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst collapseRange = (originalRange: IRange) => ({\n\tstartLineNumber: originalRange.startLineNumber,\n\tendLineNumber: originalRange.startLineNumber,\n\tstartColumn: originalRange.startColumn,\n\tendColumn: originalRange.startColumn,\n});\n\nconst createRunTestDecoration = (\n\ttests: readonly IncrementalTestCollectionItem[],\n\tstates: readonly (TestResultItem | undefined)[],\n\tvisible: boolean,\n\tdefaultGutterAction: DefaultGutterClickAction,\n): IModelDeltaDecoration & { alternate?: IModelDecorationOptions } => {\n\tconst range = tests[0]?.item.range;\n\tif (!range) {\n\t\tthrow new Error('Test decorations can only be created for tests with a range');\n\t}\n\n\tif (!visible) {\n\t\treturn {\n\t\t\trange: collapseRange(range),\n\t\t\toptions: { isWholeLine: true, description: 'run-test-decoration' },\n\t\t};\n\t}\n\n\tlet computedState = TestResultState.Unset;\n\tconst hoverMessageParts: string[] = [];\n\tlet testIdWithMessages: string | undefined;\n\tlet retired = false;\n\tfor (let i = 0; i < tests.length; i++) {\n\t\tconst test = tests[i];\n\t\tconst resultItem = states[i];\n\t\tconst state = resultItem?.computedState ?? TestResultState.Unset;\n\t\tif (hoverMessageParts.length < 10) {\n\t\t\thoverMessageParts.push(labelForTestInState(test.item.label, state));\n\t\t}\n\t\tcomputedState = maxPriority(computedState, state);\n\t\tretired = retired || !!resultItem?.retired;\n\t\tif (!testIdWithMessages && resultItem?.tasks.some(t => t.messages.length)) {\n\t\t\ttestIdWithMessages = test.item.extId;\n\t\t}\n\t}\n\n\tconst hasMultipleTests = tests.length > 1 || tests[0].children.size > 0;\n\n\tconst primaryIcon = computedState === TestResultState.Unset\n\t\t? (hasMultipleTests ? testingRunAllIcon : testingRunIcon)\n\t\t: testingStatesToIcons.get(computedState)!;\n\n\tconst alternateIcon = defaultGutterAction === DefaultGutterClickAction.Debug\n\t\t? (hasMultipleTests ? testingRunAllIcon : testingRunIcon)\n\t\t: (hasMultipleTests ? testingDebugAllIcon : testingDebugIcon);\n\n\tlet hoverMessage: IMarkdownString | undefined;\n\n\tlet glyphMarginClassName = 'testing-run-glyph';\n\tif (retired) {\n\t\tglyphMarginClassName += ' retired';\n\t}\n\n\tconst defaultOptions: IModelDecorationOptions = {\n\t\tdescription: 'run-test-decoration',\n\t\tshowIfCollapsed: true,\n\t\tget hoverMessage() {\n\t\t\tif (!hoverMessage) {\n\t\t\t\tconst building = hoverMessage = new MarkdownString('', true).appendText(hoverMessageParts.join(', ') + '.');\n\t\t\t\tif (testIdWithMessages) {\n\t\t\t\t\tconst args = encodeURIComponent(JSON.stringify([testIdWithMessages]));\n\t\t\t\t\tbuilding.appendMarkdown(` [${localize('peekTestOutout', 'Peek Test Output')}](command:vscode.peekTestError?${args})`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn hoverMessage;\n\t\t},\n\t\tglyphMargin: { position: GLYPH_MARGIN_LANE },\n\t\tglyphMarginClassName: `${ThemeIcon.asClassName(primaryIcon)} ${glyphMarginClassName}`,\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tzIndex: 10000,\n\t};\n\n\tconst alternateOptions: IModelDecorationOptions = {\n\t\t...defaultOptions,\n\t\tglyphMarginClassName: `${ThemeIcon.asClassName(alternateIcon)} ${glyphMarginClassName}`,\n\t};\n\n\treturn {\n\t\trange: collapseRange(range),\n\t\toptions: defaultOptions,\n\t\talternate: alternateOptions,\n\t};\n};\n\nconst enum LensContentWidgetVars {\n\tFontFamily = 'testingDiffLensFontFamily',\n\tFontFeatures = 'testingDiffLensFontFeatures',\n}\n\nabstract class TitleLensContentWidget {\n\t/** @inheritdoc */\n\tpublic readonly allowEditorOverflow = false;\n\t/** @inheritdoc */\n\tpublic readonly suppressMouseDown = true;\n\n\tprivate readonly _domNode = dom.$('span');\n\tprivate viewZoneId?: string;\n\n\tconstructor(private readonly editor: ICodeEditor) {\n\t\tqueueMicrotask(() => {\n\t\t\tthis.applyStyling();\n\t\t\tthis.editor.addContentWidget(this);\n\t\t});\n\t}\n\n\tprivate applyStyling() {\n\t\tlet fontSize = this.editor.getOption(EditorOption.codeLensFontSize);\n\t\tlet height: number;\n\t\tif (!fontSize || fontSize < 5) {\n\t\t\tfontSize = (this.editor.getOption(EditorOption.fontSize) * .9) | 0;\n\t\t\theight = this.editor.getOption(EditorOption.lineHeight);\n\t\t} else {\n\t\t\theight = (fontSize * Math.max(1.3, this.editor.getOption(EditorOption.lineHeight) / this.editor.getOption(EditorOption.fontSize))) | 0;\n\t\t}\n\n\t\tconst editorFontInfo = this.editor.getOption(EditorOption.fontInfo);\n\t\tconst node = this._domNode;\n\t\tnode.classList.add('testing-diff-lens-widget');\n\t\tnode.textContent = this.getText();\n\t\tnode.style.lineHeight = `${height}px`;\n\t\tnode.style.fontSize = `${fontSize}px`;\n\t\tnode.style.fontFamily = `var(--${LensContentWidgetVars.FontFamily})`;\n\t\tnode.style.fontFeatureSettings = `var(--${LensContentWidgetVars.FontFeatures})`;\n\n\t\tconst containerStyle = this.editor.getContainerDomNode().style;\n\t\tcontainerStyle.setProperty(LensContentWidgetVars.FontFamily, this.editor.getOption(EditorOption.codeLensFontFamily) ?? 'inherit');\n\t\tcontainerStyle.setProperty(LensContentWidgetVars.FontFeatures, editorFontInfo.fontFeatureSettings);\n\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\tif (this.viewZoneId) {\n\t\t\t\taccessor.removeZone(this.viewZoneId);\n\t\t\t}\n\n\t\t\tthis.viewZoneId = accessor.addZone({\n\t\t\t\tafterLineNumber: 0,\n\t\t\t\tafterColumn: Constants.MAX_SAFE_SMALL_INTEGER,\n\t\t\t\tdomNode: document.createElement('div'),\n\t\t\t\theightInPx: 20,\n\t\t\t});\n\t\t});\n\t}\n\n\t/** @inheritdoc */\n\tpublic abstract getId(): string;\n\n\t/** @inheritdoc */\n\tpublic getDomNode() {\n\t\treturn this._domNode;\n\t}\n\n\t/** @inheritdoc */\n\tpublic dispose() {\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\tif (this.viewZoneId) {\n\t\t\t\taccessor.removeZone(this.viewZoneId);\n\t\t\t}\n\t\t});\n\n\t\tthis.editor.removeContentWidget(this);\n\t}\n\n\t/** @inheritdoc */\n\tpublic getPosition(): IContentWidgetPosition {\n\t\treturn {\n\t\t\tposition: { column: 0, lineNumber: 0 },\n\t\t\tpreference: [ContentWidgetPositionPreference.ABOVE],\n\t\t};\n\t}\n\n\tprotected abstract getText(): string;\n}\n\nclass ExpectedLensContentWidget extends TitleLensContentWidget {\n\tpublic getId() {\n\t\treturn 'expectedTestingLens';\n\t}\n\n\tprotected override getText() {\n\t\treturn localize('expected.title', 'Expected');\n\t}\n}\n\n\nclass ActualLensContentWidget extends TitleLensContentWidget {\n\tpublic getId() {\n\t\treturn 'actualTestingLens';\n\t}\n\n\tprotected override getText() {\n\t\treturn localize('actual.title', 'Actual');\n\t}\n}\n\nabstract class RunTestDecoration {\n\t/** @inheritdoc */\n\tpublic id = '';\n\n\tpublic get line() {\n\t\treturn this.editorDecoration.range.startLineNumber;\n\t}\n\n\tpublic get testIds() {\n\t\treturn this.tests.map(t => t.test.item.extId);\n\t}\n\n\tpublic editorDecoration: IModelDeltaDecoration & { alternate?: IModelDecorationOptions };\n\tpublic displayedStates: readonly (TestResultState | undefined)[];\n\n\tconstructor(\n\t\tprotected tests: readonly {\n\t\t\ttest: IncrementalTestCollectionItem;\n\t\t\tresultItem: TestResultItem | undefined;\n\t\t}[],\n\t\tprivate visible: boolean,\n\t\tprotected readonly model: ITextModel,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t\t@ITestService protected readonly testService: ITestService,\n\t\t@IContextMenuService protected readonly contextMenuService: IContextMenuService,\n\t\t@ICommandService protected readonly commandService: ICommandService,\n\t\t@IConfigurationService protected readonly configurationService: IConfigurationService,\n\t\t@ITestProfileService protected readonly testProfileService: ITestProfileService,\n\t\t@IContextKeyService protected readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService protected readonly menuService: IMenuService,\n\t) {\n\t\tthis.displayedStates = tests.map(t => t.resultItem?.computedState);\n\t\tthis.editorDecoration = createRunTestDecoration(\n\t\t\ttests.map(t => t.test),\n\t\t\ttests.map(t => t.resultItem),\n\t\t\tvisible,\n\t\t\tgetTestingConfiguration(this.configurationService, TestingConfigKeys.DefaultGutterClickAction),\n\t\t);\n\t\tthis.editorDecoration.options.glyphMarginHoverMessage = new MarkdownString().appendText(this.getGutterLabel());\n\t}\n\n\t/** @inheritdoc */\n\tpublic click(e: IEditorMouseEvent): boolean {\n\t\tif (e.target.type !== MouseTargetType.GUTTER_GLYPH_MARGIN\n\t\t\t|| e.target.detail.glyphMarginLane !== GLYPH_MARGIN_LANE\n\t\t\t// handled by editor gutter context menu\n\t\t\t|| e.event.rightButton\n\t\t\t|| isMacintosh && e.event.leftButton && e.event.ctrlKey\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst alternateAction = e.event.altKey;\n\t\tswitch (getTestingConfiguration(this.configurationService, TestingConfigKeys.DefaultGutterClickAction)) {\n\t\t\tcase DefaultGutterClickAction.ContextMenu:\n\t\t\t\tthis.showContextMenu(e);\n\t\t\t\tbreak;\n\t\t\tcase DefaultGutterClickAction.Debug:\n\t\t\t\tthis.runWith(alternateAction ? TestRunProfileBitset.Run : TestRunProfileBitset.Debug);\n\t\t\t\tbreak;\n\t\t\tcase DefaultGutterClickAction.Coverage:\n\t\t\t\tthis.runWith(alternateAction ? TestRunProfileBitset.Debug : TestRunProfileBitset.Coverage);\n\t\t\t\tbreak;\n\t\t\tcase DefaultGutterClickAction.Run:\n\t\t\tdefault:\n\t\t\t\tthis.runWith(alternateAction ? TestRunProfileBitset.Debug : TestRunProfileBitset.Run);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Updates the decoration to match the new set of tests.\n\t * @returns true if options were changed, false otherwise\n\t */\n\tpublic replaceOptions(newTests: readonly {\n\t\ttest: IncrementalTestCollectionItem;\n\t\tresultItem: TestResultItem | undefined;\n\t}[], visible: boolean): boolean {\n\t\tconst displayedStates = newTests.map(t => t.resultItem?.computedState);\n\t\tif (visible === this.visible && equals(this.displayedStates, displayedStates)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.tests = newTests;\n\t\tthis.displayedStates = displayedStates;\n\t\tthis.visible = visible;\n\n\t\tconst { options, alternate } = createRunTestDecoration(\n\t\t\tnewTests.map(t => t.test),\n\t\t\tnewTests.map(t => t.resultItem),\n\t\t\tvisible,\n\t\t\tgetTestingConfiguration(this.configurationService, TestingConfigKeys.DefaultGutterClickAction)\n\t\t);\n\n\t\tthis.editorDecoration.options = options;\n\t\tthis.editorDecoration.alternate = alternate;\n\t\tthis.editorDecoration.options.glyphMarginHoverMessage = new MarkdownString().appendText(this.getGutterLabel());\n\t\treturn true;\n\t}\n\n\t/**\n\t * Gets whether this decoration serves as the run button for the given test ID.\n\t */\n\tpublic isForTest(testId: string) {\n\t\treturn this.tests.some(t => t.test.item.extId === testId);\n\t}\n\n\t/**\n\t * Called when the decoration is clicked on.\n\t */\n\tabstract getContextMenuActions(): IReference<IAction[]>;\n\n\tprotected runWith(profile: TestRunProfileBitset) {\n\t\treturn this.testService.runTests({\n\t\t\ttests: simplifyTestsToExecute(this.testService.collection, this.tests.map(({ test }) => test)),\n\t\t\tgroup: profile,\n\t\t});\n\t}\n\n\tprivate showContextMenu(e: IEditorMouseEvent) {\n\t\tconst editor = this.codeEditorService.listCodeEditors().find(e => e.getModel() === this.model);\n\t\teditor?.getContribution<EditorLineNumberContextMenu>(EditorLineNumberContextMenu.ID)?.show(e);\n\t}\n\n\tprivate getGutterLabel() {\n\t\tswitch (getTestingConfiguration(this.configurationService, TestingConfigKeys.DefaultGutterClickAction)) {\n\t\t\tcase DefaultGutterClickAction.ContextMenu:\n\t\t\t\treturn localize('testing.gutterMsg.contextMenu', 'Click for test options');\n\t\t\tcase DefaultGutterClickAction.Debug:\n\t\t\t\treturn localize('testing.gutterMsg.debug', 'Click to debug tests, right click for more options');\n\t\t\tcase DefaultGutterClickAction.Coverage:\n\t\t\t\treturn localize('testing.gutterMsg.coverage', 'Click to run tests with coverage, right click for more options');\n\t\t\tcase DefaultGutterClickAction.Run:\n\t\t\tdefault:\n\t\t\t\treturn localize('testing.gutterMsg.run', 'Click to run tests, right click for more options');\n\t\t}\n\t}\n\n\t/**\n\t * Gets context menu actions relevant for a singel test.\n\t */\n\tprotected getTestContextMenuActions(test: InternalTestItem, resultItem?: TestResultItem): IReference<IAction[]> {\n\t\tconst testActions: Action[] = [];\n\t\tconst capabilities = this.testProfileService.capabilitiesForTest(test.item);\n\n\t\t[\n\t\t\t{ bitset: TestRunProfileBitset.Run, label: localize('run test', 'Run Test') },\n\t\t\t{ bitset: TestRunProfileBitset.Debug, label: localize('debug test', 'Debug Test') },\n\t\t\t{ bitset: TestRunProfileBitset.Coverage, label: localize('coverage test', 'Run with Coverage') },\n\t\t].forEach(({ bitset, label }) => {\n\t\t\tif (capabilities & bitset) {\n\t\t\t\ttestActions.push(new Action(`testing.gutter.${bitset}`, label, undefined, undefined,\n\t\t\t\t\t() => this.testService.runTests({ group: bitset, tests: [test] })));\n\t\t\t}\n\t\t});\n\n\t\tif (capabilities & TestRunProfileBitset.HasNonDefaultProfile) {\n\t\t\ttestActions.push(new Action('testing.runUsing', localize('testing.runUsing', 'Execute Using Profile...'), undefined, undefined, async () => {\n\t\t\t\tconst profile: ITestRunProfile | undefined = await this.commandService.executeCommand('vscode.pickTestProfile', { onlyForTest: test });\n\t\t\t\tif (!profile) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.testService.runResolvedTests({\n\t\t\t\t\tgroup: profile.group,\n\t\t\t\t\ttargets: [{\n\t\t\t\t\t\tprofileId: profile.profileId,\n\t\t\t\t\t\tcontrollerId: profile.controllerId,\n\t\t\t\t\t\ttestIds: [test.item.extId]\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\n\t\tif (resultItem && isFailedState(resultItem.computedState)) {\n\t\t\ttestActions.push(new Action('testing.gutter.peekFailure', localize('peek failure', 'Peek Error'), undefined, undefined,\n\t\t\t\t() => this.commandService.executeCommand('vscode.peekTestError', test.item.extId)));\n\t\t}\n\n\t\tif (resultItem?.computedState === TestResultState.Running) {\n\t\t\ttestActions.push(new Action('testing.gutter.cancel', localize('testing.cancelRun', 'Cancel Test Run'), undefined, undefined,\n\t\t\t\t() => this.commandService.executeCommand(TestCommandId.CancelTestRunAction)));\n\t\t}\n\n\t\ttestActions.push(new Action('testing.gutter.reveal', localize('reveal test', 'Reveal in Test Explorer'), undefined, undefined,\n\t\t\t() => this.commandService.executeCommand('_revealTestInExplorer', test.item.extId)));\n\n\t\tconst contributed = this.getContributedTestActions(test, capabilities);\n\t\treturn { object: Separator.join(testActions, contributed), dispose() { testActions.forEach(a => a.dispose()); } };\n\t}\n\n\tprivate getContributedTestActions(test: InternalTestItem, capabilities: number): IAction[] {\n\t\tconst contextOverlay = this.contextKeyService.createOverlay(getTestItemContextOverlay(test, capabilities));\n\n\t\tconst arg = getContextForTestItem(this.testService.collection, test.item.extId);\n\t\tconst menu = this.menuService.getMenuActions(MenuId.TestItemGutter, contextOverlay, { shouldForwardArgs: true, arg });\n\t\treturn getFlatContextMenuActions(menu);\n\t}\n}\n\ninterface IMultiRunTest {\n\tcurrentLabel: string;\n\tparent: TestId | undefined;\n\ttestItem: {\n\t\ttest: IncrementalTestCollectionItem;\n\t\tresultItem: TestResultItem | undefined;\n\t};\n}\n\nclass MultiRunTestDecoration extends RunTestDecoration implements ITestDecoration {\n\tconstructor(\n\t\ttests: readonly {\n\t\t\ttest: IncrementalTestCollectionItem;\n\t\t\tresultItem: TestResultItem | undefined;\n\t\t}[],\n\t\tvisible: boolean,\n\t\tmodel: ITextModel,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ITestService testService: ITestService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITestProfileService testProfileService: ITestProfileService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t) {\n\t\tsuper(tests, visible, model, codeEditorService, testService, contextMenuService, commandService, configurationService, testProfileService, contextKeyService, menuService);\n\t}\n\n\tpublic override getContextMenuActions() {\n\t\tconst disposable = new DisposableStore();\n\t\tconst allActions: Action[] = [];\n\t\t[\n\t\t\t{ bitset: TestRunProfileBitset.Run, label: localize('run all test', 'Run All Tests') },\n\t\t\t{ bitset: TestRunProfileBitset.Coverage, label: localize('run all test with coverage', 'Run All Tests with Coverage') },\n\t\t\t{ bitset: TestRunProfileBitset.Debug, label: localize('debug all test', 'Debug All Tests') },\n\t\t].forEach(({ bitset, label }, i) => {\n\t\t\tconst canRun = this.tests.some(({ test }) => this.testProfileService.capabilitiesForTest(test.item) & bitset);\n\t\t\tif (canRun) {\n\t\t\t\tallActions.push(new Action(`testing.gutter.run${i}`, label, undefined, undefined, () => this.runWith(bitset)));\n\t\t\t}\n\t\t});\n\n\t\tdisposable.add(toDisposable(() => allActions.forEach(a => a.dispose())));\n\n\t\tconst testItems = this.tests.map((testItem): IMultiRunTest => ({\n\t\t\tcurrentLabel: testItem.test.item.label,\n\t\t\ttestItem,\n\t\t\tparent: TestId.fromString(testItem.test.item.extId).parentId,\n\t\t}));\n\n\t\tconst getLabelConflicts = (tests: typeof testItems) => {\n\t\t\tconst labelCount = new Map<string, number>();\n\t\t\tfor (const test of tests) {\n\t\t\t\tlabelCount.set(test.currentLabel, (labelCount.get(test.currentLabel) || 0) + 1);\n\t\t\t}\n\n\t\t\treturn tests.filter(e => labelCount.get(e.currentLabel)! > 1);\n\t\t};\n\n\t\tlet conflicts, hasParent = true;\n\t\twhile ((conflicts = getLabelConflicts(testItems)).length && hasParent) {\n\t\t\tfor (const conflict of conflicts) {\n\t\t\t\tif (conflict.parent) {\n\t\t\t\t\tconst parent = this.testService.collection.getNodeById(conflict.parent.toString());\n\t\t\t\t\tconflict.currentLabel = parent?.item.label + ' > ' + conflict.currentLabel;\n\t\t\t\t\tconflict.parent = conflict.parent.parentId;\n\t\t\t\t} else {\n\t\t\t\t\thasParent = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttestItems.sort((a, b) => {\n\t\t\tconst ai = a.testItem.test.item;\n\t\t\tconst bi = b.testItem.test.item;\n\t\t\treturn (ai.sortText || ai.label).localeCompare(bi.sortText || bi.label);\n\t\t});\n\n\t\tlet testSubmenus: IAction[] = testItems.map(({ currentLabel, testItem }) => {\n\t\t\tconst actions = this.getTestContextMenuActions(testItem.test, testItem.resultItem);\n\t\t\tdisposable.add(actions);\n\t\t\tlet label = stripIcons(currentLabel);\n\t\t\tconst lf = label.indexOf('\\n');\n\t\t\tif (lf !== -1) {\n\t\t\t\tlabel = label.slice(0, lf);\n\t\t\t}\n\n\t\t\treturn new SubmenuAction(testItem.test.item.extId, label, actions.object);\n\t\t});\n\n\n\t\tconst overflow = testSubmenus.length - MAX_TESTS_IN_SUBMENU;\n\t\tif (overflow > 0) {\n\t\t\ttestSubmenus = testSubmenus.slice(0, MAX_TESTS_IN_SUBMENU);\n\t\t\ttestSubmenus.push(new Action(\n\t\t\t\t'testing.gutter.overflow',\n\t\t\t\tlocalize('testOverflowItems', '{0} more tests...', overflow),\n\t\t\t\tundefined,\n\t\t\t\tundefined,\n\t\t\t\t() => this.pickAndRun(testItems),\n\t\t\t));\n\t\t}\n\n\t\treturn { object: Separator.join(allActions, testSubmenus), dispose: () => disposable.dispose() };\n\t}\n\n\tprivate async pickAndRun(testItems: IMultiRunTest[]) {\n\t\tconst doPick = <T extends IQuickPickItem>(items: T[], title: string) => new Promise<T | undefined>(resolve => {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst pick = disposables.add(this.quickInputService.createQuickPick<T>());\n\t\t\tpick.placeholder = title;\n\t\t\tpick.items = items;\n\t\t\tdisposables.add(pick.onDidHide(() => {\n\t\t\t\tresolve(undefined);\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\t\t\tdisposables.add(pick.onDidAccept(() => {\n\t\t\t\tresolve(pick.selectedItems[0]);\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\t\t\tpick.show();\n\t\t});\n\n\t\tconst item = await doPick(\n\t\t\ttestItems.map(({ currentLabel, testItem }) => ({ label: currentLabel, test: testItem.test, result: testItem.resultItem })),\n\t\t\tlocalize('selectTestToRun', 'Select a test to run'),\n\t\t);\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst actions = this.getTestContextMenuActions(item.test, item.result);\n\t\ttry {\n\t\t\t(await doPick(actions.object, item.label))?.run();\n\t\t} finally {\n\t\t\tactions.dispose();\n\t\t}\n\t}\n}\n\nclass RunSingleTestDecoration extends RunTestDecoration implements ITestDecoration {\n\tconstructor(\n\t\ttest: IncrementalTestCollectionItem,\n\t\tresultItem: TestResultItem | undefined,\n\t\tmodel: ITextModel,\n\t\tvisible: boolean,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ITestService testService: ITestService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITestProfileService testProfiles: ITestProfileService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IMenuService menuService: IMenuService,\n\t) {\n\t\tsuper([{ test, resultItem }], visible, model, codeEditorService, testService, contextMenuService, commandService, configurationService, testProfiles, contextKeyService, menuService);\n\t}\n\n\toverride getContextMenuActions() {\n\t\treturn this.getTestContextMenuActions(this.tests[0].test, this.tests[0].resultItem);\n\t}\n}\n\nconst lineBreakRe = /\\r?\\n\\s*/g;\n\nclass TestMessageDecoration implements ITestDecoration {\n\tpublic static readonly inlineClassName = 'test-message-inline-content';\n\tpublic static readonly decorationId = `testmessage-${generateUuid()}`;\n\n\tpublic id = '';\n\n\tpublic readonly editorDecoration: IModelDeltaDecoration;\n\tpublic readonly line: number;\n\n\tprivate readonly contentIdClass = `test-message-inline-content-id${generateUuid()}`;\n\n\tconstructor(\n\t\tpublic readonly testMessage: ITestMessage,\n\t\tprivate readonly messageUri: URI | undefined,\n\t\ttextModel: ITextModel,\n\t\t@ITestingPeekOpener private readonly peekOpener: ITestingPeekOpener,\n\t\t@ICodeEditorService editorService: ICodeEditorService,\n\t) {\n\t\tconst location = testMessage.location!;\n\t\tthis.line = clamp(location.range.startLineNumber, 0, textModel.getLineCount());\n\t\tconst severity = testMessage.type;\n\t\tconst message = testMessage.message;\n\n\t\tconst options = editorService.resolveDecorationOptions(TestMessageDecoration.decorationId, true);\n\t\toptions.hoverMessage = typeof message === 'string' ? new MarkdownString().appendText(message) : message;\n\t\toptions.zIndex = 10; // todo: in spite of the z-index, this appears behind gitlens\n\t\toptions.className = `testing-inline-message-severity-${severity}`;\n\t\toptions.isWholeLine = true;\n\t\toptions.stickiness = TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n\t\toptions.collapseOnReplaceEdit = true;\n\n\t\tlet inlineText = renderTestMessageAsText(message).replace(lineBreakRe, ' ');\n\t\tif (inlineText.length > MAX_INLINE_MESSAGE_LENGTH) {\n\t\t\tinlineText = inlineText.slice(0, MAX_INLINE_MESSAGE_LENGTH - 1) + '';\n\t\t}\n\n\t\toptions.after = {\n\t\t\tcontent: inlineText,\n\t\t\tinlineClassName: `test-message-inline-content test-message-inline-content-s${severity} ${this.contentIdClass} ${messageUri ? 'test-message-inline-content-clickable' : ''}`\n\t\t};\n\t\toptions.showIfCollapsed = true;\n\n\t\tconst rulerColor = severity === TestMessageType.Error\n\t\t\t? overviewRulerError\n\t\t\t: overviewRulerInfo;\n\n\t\tif (rulerColor) {\n\t\t\toptions.overviewRuler = { color: themeColorFromId(rulerColor), position: OverviewRulerLane.Right };\n\t\t}\n\n\t\tconst lineLength = textModel.getLineLength(this.line);\n\t\tconst column = lineLength ? (lineLength + 1) : location.range.endColumn;\n\t\tthis.editorDecoration = {\n\t\t\toptions,\n\t\t\trange: {\n\t\t\t\tstartLineNumber: this.line,\n\t\t\t\tstartColumn: column,\n\t\t\t\tendColumn: column,\n\t\t\t\tendLineNumber: this.line,\n\t\t\t}\n\t\t};\n\t}\n\n\tclick(e: IEditorMouseEvent): boolean {\n\t\tif (e.event.rightButton) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.messageUri) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (e.target.element?.className.includes(this.contentIdClass)) {\n\t\t\tthis.peekOpener.peekUri(this.messageUri);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetContextMenuActions() {\n\t\treturn { object: [], dispose: () => { } };\n\t}\n}\n\nconst ERROR_CONTENT_WIDGET_HEIGHT = 20;\n\nclass TestErrorContentWidget extends Disposable implements IContentWidget {\n\tprivate readonly id = generateUuid();\n\n\t/** @inheritdoc */\n\tpublic readonly allowEditorOverflow = false;\n\n\tprivate readonly node = dom.h('div.test-error-content-widget', [\n\t\tdom.h('div.inner@inner', [\n\t\t\tdom.h('div.arrow@arrow'),\n\t\t\tdom.h(`span${ThemeIcon.asCSSSelector(testingStatesToIcons.get(TestResultState.Failed)!)}`),\n\t\t\tdom.h('span.content@name'),\n\t\t]),\n\t]);\n\n\tpublic get line() {\n\t\treturn this.position.lineNumber;\n\t}\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\tprivate position: Position,\n\t\tpublic readonly message: ITestErrorMessage,\n\t\tpublic readonly resultItem: TestResultItem,\n\t\turi: URI,\n\t\t@ITestingPeekOpener readonly peekOpener: ITestingPeekOpener,\n\t) {\n\t\tsuper();\n\n\t\tconst setMarginTop = () => {\n\t\t\tconst lineHeight = editor.getLineHeightForPosition(position);\n\t\t\tthis.node.root.style.marginTop = (lineHeight - ERROR_CONTENT_WIDGET_HEIGHT) / 2 + 'px';\n\t\t};\n\n\t\tsetMarginTop();\n\t\tthis._register(editor.onDidChangeLineHeight(e => {\n\t\t\tif (e.affects(position)) {\n\t\t\t\tsetMarginTop();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editor.onDidChangeConfiguration(e => {\n\t\t\tif (e.hasChanged(EditorOption.lineHeight)) {\n\t\t\t\tsetMarginTop();\n\t\t\t}\n\t\t}));\n\n\t\tlet text: string;\n\t\tif (message.expected !== undefined && message.actual !== undefined) {\n\t\t\ttext = `${truncateMiddle(message.actual.replace(/\\s+/g, ' '), 30)} != ${truncateMiddle(message.expected.replace(/\\s+/g, ' '), 30)}`;\n\t\t} else {\n\t\t\tconst msg = renderAsPlaintext(message.message);\n\t\t\tconst lf = msg.indexOf('\\n');\n\t\t\ttext = lf === -1 ? msg : msg.slice(0, lf);\n\t\t}\n\n\t\tthis._register(dom.addDisposableListener(this.node.root, dom.EventType.CLICK, e => {\n\t\t\tthis.peekOpener.peekUri(uri);\n\t\t\te.preventDefault();\n\t\t}));\n\n\t\tconst ctrl = TestingOutputPeekController.get(editor);\n\t\tif (ctrl) {\n\t\t\tthis._register(autorun(reader => {\n\t\t\t\tconst subject = ctrl.subject.read(reader);\n\t\t\t\tconst isCurrent = subject instanceof MessageSubject && subject.message === message;\n\t\t\t\tthis.node.root.classList.toggle('is-current', isCurrent);\n\t\t\t}));\n\t\t}\n\n\t\tthis.node.name.innerText = text || 'Test Failed';\n\n\t\tconst svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\t\tsvg.setAttribute('width', '15');\n\t\tsvg.setAttribute('height', '10');\n\t\tsvg.setAttribute('preserveAspectRatio', 'none');\n\t\tsvg.setAttribute('viewBox', '0 0 15 10');\n\n\t\tconst leftArrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\t\tleftArrow.setAttribute('d', 'M15 0 L10 0 L0 5 L10 10 L15 10 Z');\n\t\tsvg.append(leftArrow);\n\n\t\tthis.node.arrow.appendChild(svg);\n\n\t\tthis._register(editor.onDidChangeModelContent(e => {\n\t\t\tfor (const c of e.changes) {\n\t\t\t\tif (c.range.startLineNumber > this.line) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tc.range.startLineNumber <= this.line && c.range.endLineNumber >= this.line\n\t\t\t\t\t|| (resultItem.item.range && resultItem.item.range.startLineNumber <= c.range.startLineNumber && resultItem.item.range.endLineNumber >= c.range.endLineNumber)\n\t\t\t\t) {\n\t\t\t\t\tTestingDecorations.invalidatedTests.add(this.resultItem);\n\t\t\t\t\tthis.dispose(); // todo\n\t\t\t\t}\n\n\t\t\t\tconst adjust = count(c.text, '\\n') - (c.range.endLineNumber - c.range.startLineNumber);\n\t\t\t\tif (adjust !== 0) {\n\t\t\t\t\tthis.position = this.position.delta(adjust);\n\t\t\t\t\tthis.editor.layoutContentWidget(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\teditor.addContentWidget(this);\n\t\tthis._register(toDisposable(() => editor.removeContentWidget(this)));\n\t}\n\n\tpublic getId(): string {\n\t\treturn this.id;\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this.node.root;\n\t}\n\n\tpublic getPosition(): IContentWidgetPosition | null {\n\t\treturn {\n\t\t\tposition: this.position,\n\t\t\tpreference: [ContentWidgetPositionPreference.EXACT],\n\t\t};\n\t}\n\n\tafterRender(_position: ContentWidgetPositionPreference | null, coordinate: IContentWidgetRenderedCoordinate | null): void {\n\t\tif (coordinate) {\n\t\t\tconst { verticalScrollbarWidth } = this.editor.getLayoutInfo();\n\t\t\tconst scrollWidth = this.editor.getScrollWidth();\n\t\t\tthis.node.inner.style.maxWidth = `${scrollWidth - verticalScrollbarWidth - coordinate.left - 20}px`;\n\t\t}\n\t}\n}\n"]}