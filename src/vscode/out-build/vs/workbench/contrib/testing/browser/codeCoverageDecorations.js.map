{"version":3,"sources":["vs/workbench/contrib/testing/browser/codeCoverageDecorations.ts"],"names":[],"mappings":"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","file":"codeCoverageDecorations.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { ActionBar, ActionsOrientation } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { mapFindFirst } from '../../../../base/common/arraysFind.js';\nimport { assert, assertNever } from '../../../../base/common/assert.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isUriComponents, URI } from '../../../../base/common/uri.js';\nimport { ICodeEditor, IOverlayWidget, IOverlayWidgetPosition, isCodeEditor, MouseTargetType, OverlayWidgetPositionPreference } from '../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { EditorOption } from '../../../../editor/common/config/editorOptions.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { IEditorContribution } from '../../../../editor/common/editorCommon.js';\nimport { IModelDecorationOptions, InjectedTextCursorStops, InjectedTextOptions, ITextModel } from '../../../../editor/common/model.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { bindContextKey, observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { IQuickInputButton, IQuickInputService, QuickPickInput } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ActiveEditorContext } from '../../../common/contextkeys.js';\nimport { TEXT_FILE_EDITOR_ID } from '../../files/common/files.js';\nimport { getTestingConfiguration, TestingConfigKeys } from '../common/configuration.js';\nimport { TestCommandId, Testing } from '../common/constants.js';\nimport { FileCoverage } from '../common/testCoverage.js';\nimport { ITestCoverageService } from '../common/testCoverageService.js';\nimport { TestId } from '../common/testId.js';\nimport { ITestService } from '../common/testService.js';\nimport { CoverageDetails, DetailType, IDeclarationCoverage, IStatementCoverage } from '../common/testTypes.js';\nimport { TestingContextKeys } from '../common/testingContextKeys.js';\nimport * as coverUtils from './codeCoverageDisplayUtils.js';\nimport { testingCoverageMissingBranch, testingCoverageReport, testingFilterIcon, testingRerunIcon } from './icons.js';\nimport { ManagedTestCoverageBars } from './testCoverageBars.js';\n\nconst CLASS_HIT = 'coverage-deco-hit';\nconst CLASS_MISS = 'coverage-deco-miss';\nconst TOGGLE_INLINE_COMMAND_TEXT = localize('testing.toggleInlineCoverage', 'Toggle Inline');\nconst TOGGLE_INLINE_COMMAND_ID = 'testing.toggleInlineCoverage';\nconst BRANCH_MISS_INDICATOR_CHARS = 4;\nconst GO_TO_NEXT_MISSED_LINE_TITLE = localize2('testing.goToNextMissedLine', \"Go to Next Uncovered Line\");\nconst GO_TO_PREVIOUS_MISSED_LINE_TITLE = localize2('testing.goToPreviousMissedLine', \"Go to Previous Uncovered Line\");\n\nexport class CodeCoverageDecorations extends Disposable implements IEditorContribution {\n\tpublic static readonly ID = Testing.CoverageDecorationsContributionId;\n\n\tprivate loadingCancellation?: CancellationTokenSource;\n\tprivate readonly displayedStore = this._register(new DisposableStore());\n\tprivate readonly hoveredStore = this._register(new DisposableStore());\n\tprivate readonly summaryWidget: Lazy<CoverageToolbarWidget>;\n\tprivate decorationIds = new Map<string, {\n\t\tdetail: DetailRange;\n\t\toptions: IModelDecorationOptions;\n\t\tapplyHoverOptions(target: IModelDecorationOptions): void;\n\t}>();\n\tprivate hoveredSubject?: unknown;\n\tprivate details?: CoverageDetailsModel;\n\tprivate readonly hasInlineCoverageDetails = observableValue('hasInlineCoverageDetails', false);\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ITestCoverageService private readonly coverage: ITestCoverageService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILogService private readonly log: ILogService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\n\t\tthis.summaryWidget = new Lazy(() => this._register(instantiationService.createInstance(CoverageToolbarWidget, this.editor)));\n\n\t\tconst modelObs = observableFromEvent(this, editor.onDidChangeModel, () => editor.getModel());\n\t\tconst configObs = observableFromEvent(this, editor.onDidChangeConfiguration, i => i);\n\n\t\tconst fileCoverage = derived(reader => {\n\t\t\tconst report = coverage.selected.read(reader);\n\t\t\tif (!report) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst model = modelObs.read(reader);\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst file = report.getUri(model.uri);\n\t\t\tif (!file) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treport.didAddCoverage.read(reader); // re-read if changes when there's no report\n\t\t\treturn { file, testId: coverage.filterToTest.read(reader) };\n\t\t});\n\n\t\tthis._register(bindContextKey(\n\t\t\tTestingContextKeys.hasPerTestCoverage,\n\t\t\tcontextKeyService,\n\t\t\treader => !!fileCoverage.read(reader)?.file.perTestData?.size,\n\t\t));\n\n\t\tthis._register(bindContextKey(\n\t\t\tTestingContextKeys.hasCoverageInFile,\n\t\t\tcontextKeyService,\n\t\t\treader => !!fileCoverage.read(reader)?.file,\n\t\t));\n\n\t\tthis._register(bindContextKey(\n\t\t\tTestingContextKeys.hasInlineCoverageDetails,\n\t\t\tcontextKeyService,\n\t\t\treader => this.hasInlineCoverageDetails.read(reader),\n\t\t));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst c = fileCoverage.read(reader);\n\t\t\tif (c) {\n\t\t\t\tthis.apply(editor.getModel()!, c.file, c.testId, coverage.showInline.read(reader));\n\t\t\t} else {\n\t\t\t\tthis.clear();\n\t\t\t}\n\t\t}));\n\n\t\tconst toolbarEnabled = observableConfigValue(TestingConfigKeys.CoverageToolbarEnabled, true, configurationService);\n\t\tthis._register(autorun(reader => {\n\t\t\tconst c = fileCoverage.read(reader);\n\t\t\tif (c && toolbarEnabled.read(reader)) {\n\t\t\t\tthis.summaryWidget.value.setCoverage(c.file, c.testId);\n\t\t\t} else {\n\t\t\t\tthis.summaryWidget.rawValue?.clearCoverage();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst c = fileCoverage.read(reader);\n\t\t\tif (c) {\n\t\t\t\tconst evt = configObs.read(reader);\n\t\t\t\tif (evt?.hasChanged(EditorOption.lineHeight) !== false) {\n\t\t\t\t\tthis.updateEditorStyles();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editor.onMouseMove(e => {\n\t\t\tconst model = editor.getModel();\n\t\t\tif (e.target.type === MouseTargetType.GUTTER_LINE_NUMBERS && model) {\n\t\t\t\tthis.hoverLineNumber(editor.getModel()!);\n\t\t\t} else if (coverage.showInline.get() && e.target.type === MouseTargetType.CONTENT_TEXT && model) {\n\t\t\t\tthis.hoverInlineDecoration(model, e.target.position);\n\t\t\t} else {\n\t\t\t\tthis.hoveredStore.clear();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(editor.onWillChangeModel(() => {\n\t\t\tconst model = editor.getModel();\n\t\t\tif (!this.details || !model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Decorations adjust to local changes made in-editor, keep them synced in case the file is reopened:\n\t\t\tfor (const decoration of model.getAllDecorations()) {\n\t\t\t\tconst own = this.decorationIds.get(decoration.id);\n\t\t\t\tif (own) {\n\t\t\t\t\town.detail.range = decoration.range;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate updateEditorStyles() {\n\t\tconst lineHeight = this.editor.getOption(EditorOption.lineHeight);\n\t\tconst { style } = this.editor.getContainerDomNode();\n\t\tstyle.setProperty('--vscode-testing-coverage-lineHeight', `${lineHeight}px`);\n\t}\n\n\tprivate hoverInlineDecoration(model: ITextModel, position: Position) {\n\t\tconst allDecorations = model.getDecorationsInRange(Range.fromPositions(position));\n\t\tconst decoration = mapFindFirst(allDecorations, ({ id }) => this.decorationIds.has(id) ? { id, deco: this.decorationIds.get(id)! } : undefined);\n\t\tif (decoration === this.hoveredSubject) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hoveredStore.clear();\n\t\tthis.hoveredSubject = decoration;\n\n\t\tif (!decoration) {\n\t\t\treturn;\n\t\t}\n\n\t\tmodel.changeDecorations(e => {\n\t\t\te.changeDecorationOptions(decoration.id, {\n\t\t\t\t...decoration.deco.options,\n\t\t\t\tclassName: `${decoration.deco.options.className} coverage-deco-hovered`,\n\t\t\t});\n\t\t});\n\n\t\tthis.hoveredStore.add(toDisposable(() => {\n\t\t\tthis.hoveredSubject = undefined;\n\t\t\tmodel.changeDecorations(e => {\n\t\t\t\te.changeDecorationOptions(decoration!.id, decoration!.deco.options);\n\t\t\t});\n\t\t}));\n\t}\n\n\tprivate hoverLineNumber(model: ITextModel) {\n\t\tif (this.hoveredSubject === 'lineNo' || !this.details || this.coverage.showInline.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hoveredStore.clear();\n\t\tthis.hoveredSubject = 'lineNo';\n\n\t\tmodel.changeDecorations(e => {\n\t\t\tfor (const [id, decoration] of this.decorationIds) {\n\t\t\t\tconst { applyHoverOptions, options } = decoration;\n\t\t\t\tconst dup = { ...options };\n\t\t\t\tapplyHoverOptions(dup);\n\t\t\t\te.changeDecorationOptions(id, dup);\n\t\t\t}\n\t\t});\n\n\t\tthis.hoveredStore.add(this.editor.onMouseLeave(() => {\n\t\t\tthis.hoveredStore.clear();\n\t\t}));\n\n\t\tthis.hoveredStore.add(toDisposable(() => {\n\t\t\tthis.hoveredSubject = undefined;\n\n\t\t\tmodel.changeDecorations(e => {\n\t\t\t\tfor (const [id, decoration] of this.decorationIds) {\n\t\t\t\t\te.changeDecorationOptions(id, decoration.options);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\t}\n\n\t/**\n\t * Navigate to the next missed (uncovered) line from the current cursor position.\n\t * @returns true if navigation occurred, false if no missed line was found\n\t */\n\tpublic goToNextMissedLine(): boolean {\n\t\treturn this.navigateToMissedLine(true);\n\t}\n\n\t/**\n\t * Navigate to the previous missed (uncovered) line from the current cursor position.\n\t * @returns true if navigation occurred, false if no missed line was found\n\t */\n\tpublic goToPreviousMissedLine(): boolean {\n\t\treturn this.navigateToMissedLine(false);\n\t}\n\n\tprivate navigateToMissedLine(next: boolean): boolean {\n\t\tconst model = this.editor.getModel();\n\t\tconst position = this.editor.getPosition();\n\t\tif (!model || !position || !this.details) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst currentLine = position.lineNumber;\n\t\tlet closestBefore: { lineNumber: number; range: Range } | undefined;\n\t\tlet closestAfter: { lineNumber: number; range: Range } | undefined;\n\t\tlet firstMissed: { lineNumber: number; range: Range } | undefined;\n\t\tlet lastMissed: { lineNumber: number; range: Range } | undefined;\n\n\t\t// Find the closest missed line before and after the current position\n\t\tfor (const [, { detail, options }] of this.decorationIds) {\n\t\t\t// Check if this is a missed line (CLASS_MISS in lineNumberClassName)\n\t\t\tif (options.lineNumberClassName?.includes(CLASS_MISS)) {\n\t\t\t\tconst range = detail.range;\n\t\t\t\tif (range.isEmpty()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst lineNumber = range.startLineNumber;\n\t\t\t\tconst missedLine = { lineNumber, range };\n\n\t\t\t\t// Track first and last missed lines for wrap-around\n\t\t\t\tif (!firstMissed || lineNumber < firstMissed.lineNumber) {\n\t\t\t\t\tfirstMissed = missedLine;\n\t\t\t\t}\n\t\t\t\tif (!lastMissed || lineNumber > lastMissed.lineNumber) {\n\t\t\t\t\tlastMissed = missedLine;\n\t\t\t\t}\n\n\t\t\t\t// Track closest before and after current line\n\t\t\t\tif (lineNumber < currentLine) {\n\t\t\t\t\tif (!closestBefore || lineNumber > closestBefore.lineNumber) {\n\t\t\t\t\t\tclosestBefore = missedLine;\n\t\t\t\t\t}\n\t\t\t\t} else if (lineNumber > currentLine) {\n\t\t\t\t\tif (!closestAfter || lineNumber < closestAfter.lineNumber) {\n\t\t\t\t\t\tclosestAfter = missedLine;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Determine target line based on direction\n\t\tconst targetLine = next\n\t\t\t? (closestAfter || firstMissed)  // Next: closest after, or wrap to first\n\t\t\t: (closestBefore || lastMissed);  // Previous: closest before, or wrap to last\n\n\t\tif (targetLine) {\n\t\t\tthis.editor.setPosition(new Position(targetLine.lineNumber, 1));\n\t\t\tthis.editor.revealLineInCenter(targetLine.lineNumber);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate async apply(model: ITextModel, coverage: FileCoverage, testId: TestId | undefined, showInlineByDefault: boolean) {\n\t\tconst details = this.details = await this.loadDetails(coverage, testId, model);\n\t\tif (!details) {\n\t\t\tthis.hasInlineCoverageDetails.set(false, undefined);\n\t\t\treturn this.clear();\n\t\t}\n\n\t\t// Update context key to indicate inline coverage details are available\n\t\tthis.hasInlineCoverageDetails.set(details.ranges.length > 0, undefined);\n\n\t\tthis.displayedStore.clear();\n\n\t\tmodel.changeDecorations(e => {\n\t\t\tfor (const detailRange of details.ranges) {\n\t\t\t\tconst { metadata: { detail, description }, range, primary } = detailRange;\n\t\t\t\tif (detail.type === DetailType.Branch) {\n\t\t\t\t\tconst hits = detail.detail.branches![detail.branch].count;\n\t\t\t\t\tconst cls = hits ? CLASS_HIT : CLASS_MISS;\n\t\t\t\t\t// don't bother showing the miss indicator if the condition wasn't executed at all:\n\t\t\t\t\tconst showMissIndicator = !hits && range.isEmpty() && detail.detail.branches!.some(b => b.count);\n\t\t\t\t\tconst options: IModelDecorationOptions = {\n\t\t\t\t\t\tshowIfCollapsed: showMissIndicator, // only avoid collapsing if we want to show the miss indicator\n\t\t\t\t\t\tdescription: 'coverage-gutter',\n\t\t\t\t\t\tlineNumberClassName: `coverage-deco-gutter ${cls}`,\n\t\t\t\t\t};\n\n\t\t\t\t\tconst applyHoverOptions = (target: IModelDecorationOptions) => {\n\t\t\t\t\t\ttarget.hoverMessage = description;\n\t\t\t\t\t\tif (showMissIndicator) {\n\t\t\t\t\t\t\ttarget.after = {\n\t\t\t\t\t\t\t\tcontent: '\\xa0'.repeat(BRANCH_MISS_INDICATOR_CHARS), // nbsp\n\t\t\t\t\t\t\t\tinlineClassName: `coverage-deco-branch-miss-indicator ${ThemeIcon.asClassName(testingCoverageMissingBranch)}`,\n\t\t\t\t\t\t\t\tinlineClassNameAffectsLetterSpacing: true,\n\t\t\t\t\t\t\t\tcursorStops: InjectedTextCursorStops.None,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.className = `coverage-deco-inline ${cls}`;\n\t\t\t\t\t\t\tif (primary && typeof hits === 'number') {\n\t\t\t\t\t\t\t\ttarget.before = countBadge(hits);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (showInlineByDefault) {\n\t\t\t\t\t\tapplyHoverOptions(options);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.decorationIds.set(e.addDecoration(range, options), { options, applyHoverOptions, detail: detailRange });\n\t\t\t\t} else if (detail.type === DetailType.Statement) {\n\t\t\t\t\tconst cls = detail.count ? CLASS_HIT : CLASS_MISS;\n\t\t\t\t\tconst options: IModelDecorationOptions = {\n\t\t\t\t\t\tshowIfCollapsed: false,\n\t\t\t\t\t\tdescription: 'coverage-inline',\n\t\t\t\t\t\tlineNumberClassName: `coverage-deco-gutter ${cls}`,\n\t\t\t\t\t};\n\n\t\t\t\t\tconst applyHoverOptions = (target: IModelDecorationOptions) => {\n\t\t\t\t\t\ttarget.className = `coverage-deco-inline ${cls}`;\n\t\t\t\t\t\ttarget.hoverMessage = description;\n\t\t\t\t\t\tif (primary && typeof detail.count === 'number') {\n\t\t\t\t\t\t\ttarget.before = countBadge(detail.count);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (showInlineByDefault) {\n\t\t\t\t\t\tapplyHoverOptions(options);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.decorationIds.set(e.addDecoration(range, options), { options, applyHoverOptions, detail: detailRange });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.displayedStore.add(toDisposable(() => {\n\t\t\tmodel.changeDecorations(e => {\n\t\t\t\tfor (const decoration of this.decorationIds.keys()) {\n\t\t\t\t\te.removeDecoration(decoration);\n\t\t\t\t}\n\t\t\t\tthis.decorationIds.clear();\n\t\t\t});\n\t\t}));\n\t}\n\n\tprivate clear() {\n\t\tthis.loadingCancellation?.cancel();\n\t\tthis.loadingCancellation = undefined;\n\t\tthis.displayedStore.clear();\n\t\tthis.hoveredStore.clear();\n\t\tthis.hasInlineCoverageDetails.set(false, undefined);\n\t}\n\n\tprivate async loadDetails(coverage: FileCoverage, testId: TestId | undefined, textModel: ITextModel) {\n\t\tconst cts = this.loadingCancellation = new CancellationTokenSource();\n\t\tthis.displayedStore.add(this.loadingCancellation);\n\n\t\ttry {\n\t\t\tconst details = testId\n\t\t\t\t? await coverage.detailsForTest(testId, this.loadingCancellation.token)\n\t\t\t\t: await coverage.details(this.loadingCancellation.token);\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn new CoverageDetailsModel(details, textModel);\n\t\t} catch (e) {\n\t\t\tthis.log.error('Error loading coverage details', e);\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n\nconst countBadge = (count: number): InjectedTextOptions | undefined => {\n\tif (count === 0) {\n\t\treturn undefined;\n\t}\n\n\treturn {\n\t\tcontent: `${count > 99 ? '99+' : count}x`,\n\t\tcursorStops: InjectedTextCursorStops.None,\n\t\tinlineClassName: `coverage-deco-inline-count`,\n\t\tinlineClassNameAffectsLetterSpacing: true,\n\t};\n};\n\ntype CoverageDetailsWithBranch = CoverageDetails | { type: DetailType.Branch; branch: number; detail: IStatementCoverage };\ntype DetailRange = { range: Range; primary: boolean; metadata: { detail: CoverageDetailsWithBranch; description: IMarkdownString | undefined } };\n\nexport class CoverageDetailsModel {\n\tpublic readonly ranges: DetailRange[] = [];\n\n\tconstructor(public readonly details: CoverageDetails[], textModel: ITextModel) {\n\n\t\t//#region decoration generation\n\t\t// Coverage from a provider can have a range that contains smaller ranges,\n\t\t// such as a function declaration that has nested statements. In this we\n\t\t// make sequential, non-overlapping ranges for each detail for display in\n\t\t// the editor without ugly overlaps.\n\t\tconst detailRanges: DetailRange[] = details.map(detail => ({\n\t\t\trange: tidyLocation(detail.location),\n\t\t\tprimary: true,\n\t\t\tmetadata: { detail, description: this.describe(detail, textModel) }\n\t\t}));\n\n\t\tfor (const { range, metadata: { detail } } of detailRanges) {\n\t\t\tif (detail.type === DetailType.Statement && detail.branches) {\n\t\t\t\tfor (let i = 0; i < detail.branches.length; i++) {\n\t\t\t\t\tconst branch: CoverageDetailsWithBranch = { type: DetailType.Branch, branch: i, detail };\n\t\t\t\t\tdetailRanges.push({\n\t\t\t\t\t\trange: tidyLocation(detail.branches[i].location || Range.fromPositions(range.getEndPosition())),\n\t\t\t\t\t\tprimary: true,\n\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\tdetail: branch,\n\t\t\t\t\t\t\tdescription: this.describe(branch, textModel),\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// type ordering is done so that function declarations come first on a tie so that\n\t\t// single-statement functions (`() => foo()` for example) get inline decorations.\n\t\tdetailRanges.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range) || a.metadata.detail.type - b.metadata.detail.type);\n\n\t\tconst stack: DetailRange[] = [];\n\t\tconst result: DetailRange[] = this.ranges = [];\n\t\tconst pop = () => {\n\t\t\tconst next = stack.pop()!;\n\t\t\tconst prev = stack[stack.length - 1];\n\t\t\tif (prev) {\n\t\t\t\tprev.range = prev.range.setStartPosition(next.range.endLineNumber, next.range.endColumn);\n\t\t\t}\n\n\t\t\tresult.push(next);\n\t\t};\n\n\t\tfor (const item of detailRanges) {\n\t\t\t// 1. Ensure that any ranges in the stack that ended before this are flushed\n\t\t\tconst start = item.range.getStartPosition();\n\t\t\twhile (stack[stack.length - 1]?.range.containsPosition(start) === false) {\n\t\t\t\tpop();\n\t\t\t}\n\n\t\t\t// Empty ranges (usually representing missing branches) can be added\n\t\t\t// without worry about overlay.\n\t\t\tif (item.range.isEmpty()) {\n\t\t\t\tresult.push(item);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// 2. Take the last (overlapping) item in the stack, push range before\n\t\t\t// the `item.range` into the result and modify its stack to push the start\n\t\t\t// until after the `item.range` ends.\n\t\t\tconst prev = stack[stack.length - 1];\n\t\t\tif (prev) {\n\t\t\t\tconst primary = prev.primary;\n\t\t\t\tconst si = prev.range.setEndPosition(start.lineNumber, start.column);\n\t\t\t\tprev.range = prev.range.setStartPosition(item.range.endLineNumber, item.range.endColumn);\n\t\t\t\tprev.primary = false;\n\t\t\t\t// discard the previous range if it became empty, e.g. a nested statement\n\t\t\t\tif (prev.range.isEmpty()) { stack.pop(); }\n\t\t\t\tresult.push({ range: si, primary, metadata: prev.metadata });\n\t\t\t}\n\n\t\t\tstack.push(item);\n\t\t}\n\t\twhile (stack.length) {\n\t\t\tpop();\n\t\t}\n\t\t//#endregion\n\t}\n\n\t/** Gets the markdown description for the given detail */\n\tpublic describe(detail: CoverageDetailsWithBranch, model: ITextModel): IMarkdownString | undefined {\n\t\tif (detail.type === DetailType.Declaration) {\n\t\t\treturn namedDetailLabel(detail.name, detail);\n\t\t} else if (detail.type === DetailType.Statement) {\n\t\t\tconst text = wrapName(model.getValueInRange(tidyLocation(detail.location)).trim() || `<empty statement>`);\n\t\t\tif (detail.branches?.length) {\n\t\t\t\tconst covered = detail.branches.filter(b => !!b.count).length;\n\t\t\t\treturn new MarkdownString().appendMarkdown(localize('coverage.branches', '{0} of {1} of branches in {2} were covered.', covered, detail.branches.length, text));\n\t\t\t} else {\n\t\t\t\treturn namedDetailLabel(text, detail);\n\t\t\t}\n\t\t} else if (detail.type === DetailType.Branch) {\n\t\t\tconst text = wrapName(model.getValueInRange(tidyLocation(detail.detail.location)).trim() || `<empty statement>`);\n\t\t\tconst { count, label } = detail.detail.branches![detail.branch];\n\t\t\tconst label2 = label ? wrapInBackticks(label) : `#${detail.branch + 1}`;\n\t\t\tif (!count) {\n\t\t\t\treturn new MarkdownString().appendMarkdown(localize('coverage.branchNotCovered', 'Branch {0} in {1} was not covered.', label2, text));\n\t\t\t} else if (count === true) {\n\t\t\t\treturn new MarkdownString().appendMarkdown(localize('coverage.branchCoveredYes', 'Branch {0} in {1} was executed.', label2, text));\n\t\t\t} else {\n\t\t\t\treturn new MarkdownString().appendMarkdown(localize('coverage.branchCovered', 'Branch {0} in {1} was executed {2} time(s).', label2, text, count));\n\t\t\t}\n\t\t}\n\n\t\tassertNever(detail);\n\t}\n}\n\nfunction namedDetailLabel(name: string, detail: IStatementCoverage | IDeclarationCoverage) {\n\treturn new MarkdownString().appendMarkdown(\n\t\t!detail.count // 0 or false\n\t\t\t? localize('coverage.declExecutedNo', '`{0}` was not executed.', name)\n\t\t\t: typeof detail.count === 'number'\n\t\t\t\t? localize('coverage.declExecutedCount', '`{0}` was executed {1} time(s).', name, detail.count)\n\t\t\t\t: localize('coverage.declExecutedYes', '`{0}` was executed.', name)\n\t);\n}\n\n// 'tidies' the range by normalizing it into a range and removing leading\n// and trailing whitespace.\nfunction tidyLocation(location: Range | Position): Range {\n\tif (location instanceof Position) {\n\t\treturn Range.fromPositions(location, new Position(location.lineNumber, 0x7FFFFFFF));\n\t}\n\n\treturn location;\n}\n\nfunction wrapInBackticks(str: string) {\n\treturn '`' + str.replace(/[\\n\\r`]/g, '') + '`';\n}\n\nfunction wrapName(functionNameOrCode: string) {\n\tif (functionNameOrCode.length > 50) {\n\t\tfunctionNameOrCode = functionNameOrCode.slice(0, 40) + '...';\n\t}\n\treturn wrapInBackticks(functionNameOrCode);\n}\n\nclass CoverageToolbarWidget extends Disposable implements IOverlayWidget {\n\tprivate current: { coverage: FileCoverage; testId: TestId | undefined } | undefined;\n\tprivate registered = false;\n\tprivate isRunning = false;\n\tprivate readonly showStore = this._register(new DisposableStore());\n\tprivate readonly actionBar: ActionBar;\n\tprivate readonly _domNode = dom.h('div.coverage-summary-widget', [\n\t\tdom.h('div', [\n\t\t\tdom.h('span.bars@bars'),\n\t\t\tdom.h('span.toolbar@toolbar'),\n\t\t]),\n\t]);\n\n\tprivate readonly bars: ManagedTestCoverageBars;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@ITestService private readonly testService: ITestService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@ITestCoverageService private readonly coverage: ITestCoverageService,\n\t\t@IInstantiationService instaService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tthis.bars = this._register(instaService.createInstance(ManagedTestCoverageBars, {\n\t\t\tcompact: false,\n\t\t\toverall: false,\n\t\t\tcontainer: this._domNode.bars,\n\t\t}));\n\n\t\tthis.actionBar = this._register(instaService.createInstance(ActionBar, this._domNode.toolbar, {\n\t\t\torientation: ActionsOrientation.HORIZONTAL,\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\tconst vm = new CodiconActionViewItem(undefined, action, options);\n\t\t\t\tif (action instanceof ActionWithIcon) {\n\t\t\t\t\tvm.themeIcon = action.icon;\n\t\t\t\t}\n\t\t\t\treturn vm;\n\t\t\t}\n\t\t}));\n\n\n\t\tthis._register(autorun(reader => {\n\t\t\tcoverage.showInline.read(reader);\n\t\t\tthis.setActions();\n\t\t}));\n\n\t\tthis._register(dom.addStandardDisposableListener(this._domNode.root, dom.EventType.CONTEXT_MENU, e => {\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tmenuId: MenuId.StickyScrollContext,\n\t\t\t\tgetAnchor: () => e,\n\t\t\t});\n\t\t}));\n\t}\n\n\t/** @inheritdoc */\n\tpublic getId(): string {\n\t\treturn 'coverage-summary-widget';\n\t}\n\n\t/** @inheritdoc */\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode.root;\n\t}\n\n\t/** @inheritdoc */\n\tpublic getPosition(): IOverlayWidgetPosition | null {\n\t\treturn {\n\t\t\tpreference: OverlayWidgetPositionPreference.TOP_CENTER,\n\t\t\tstackOrdinal: 9,\n\t\t};\n\t}\n\n\tpublic clearCoverage() {\n\t\tthis.current = undefined;\n\t\tthis.bars.setCoverageInfo(undefined);\n\t\tthis.hide();\n\t}\n\n\tpublic setCoverage(coverage: FileCoverage, testId: TestId | undefined) {\n\t\tthis.current = { coverage, testId };\n\t\tthis.bars.setCoverageInfo(coverage);\n\n\t\tif (!coverage) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.setActions();\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tprivate setActions() {\n\t\tthis.actionBar.clear();\n\t\tconst current = this.current;\n\t\tif (!current) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst toggleAction = new ActionWithIcon(\n\t\t\t'toggleInline',\n\t\t\tthis.coverage.showInline.get()\n\t\t\t\t? localize('testing.hideInlineCoverage', 'Hide Inline Coverage')\n\t\t\t\t: localize('testing.showInlineCoverage', 'Show Inline Coverage'),\n\t\t\ttestingCoverageReport,\n\t\t\tundefined,\n\t\t\t() => this.coverage.showInline.set(!this.coverage.showInline.get(), undefined),\n\t\t);\n\n\t\tconst kb = this.keybindingService.lookupKeybinding(TOGGLE_INLINE_COMMAND_ID);\n\t\tif (kb) {\n\t\t\ttoggleAction.tooltip = `${TOGGLE_INLINE_COMMAND_TEXT} (${kb.getLabel()})`;\n\t\t}\n\n\t\tthis.actionBar.push(toggleAction);\n\n\t\t// Navigation buttons for missed coverage lines\n\t\tthis.actionBar.push(new ActionWithIcon(\n\t\t\t'goToPreviousMissed',\n\t\t\tGO_TO_PREVIOUS_MISSED_LINE_TITLE.value,\n\t\t\tCodicon.arrowUp,\n\t\t\tundefined,\n\t\t\t() => this.commandService.executeCommand(TestCommandId.CoverageGoToPreviousMissedLine),\n\t\t));\n\n\t\tthis.actionBar.push(new ActionWithIcon(\n\t\t\t'goToNextMissed',\n\t\t\tGO_TO_NEXT_MISSED_LINE_TITLE.value,\n\t\t\tCodicon.arrowDown,\n\t\t\tundefined,\n\t\t\t() => this.commandService.executeCommand(TestCommandId.CoverageGoToNextMissedLine),\n\t\t));\n\n\t\tif (current.testId) {\n\t\t\tconst testItem = current.coverage.fromResult.getTestById(current.testId.toString());\n\t\t\tassert(!!testItem, 'got coverage for an unreported test');\n\t\t\tthis.actionBar.push(new ActionWithIcon('perTestFilter',\n\t\t\t\tcoverUtils.labels.showingFilterFor(testItem.label),\n\t\t\t\ttestingFilterIcon,\n\t\t\t\tundefined,\n\t\t\t\t() => this.commandService.executeCommand(TestCommandId.CoverageFilterToTestInEditor, this.current, this.editor),\n\t\t\t));\n\t\t} else if (current.coverage.perTestData?.size) {\n\t\t\tthis.actionBar.push(new ActionWithIcon('perTestFilter',\n\t\t\t\tlocalize('testing.coverageForTestAvailable', \"{0} test(s) ran code in this file\", current.coverage.perTestData.size),\n\t\t\t\ttestingFilterIcon,\n\t\t\t\tundefined,\n\t\t\t\t() => this.commandService.executeCommand(TestCommandId.CoverageFilterToTestInEditor, this.current, this.editor),\n\t\t\t));\n\t\t}\n\n\t\tthis.actionBar.push(new ActionWithIcon(\n\t\t\t'rerun',\n\t\t\tlocalize('testing.rerun', 'Rerun'),\n\t\t\ttestingRerunIcon,\n\t\t\t!this.isRunning,\n\t\t\t() => this.rerunTest()\n\t\t));\n\t}\n\n\tprivate show() {\n\t\tif (this.registered) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.registered = true;\n\t\tlet viewZoneId: string;\n\t\tconst ds = this.showStore;\n\n\t\tthis.editor.addOverlayWidget(this);\n\t\tthis.editor.changeViewZones(accessor => {\n\t\t\tviewZoneId = accessor.addZone({ // make space for the widget\n\t\t\t\tafterLineNumber: 0,\n\t\t\t\tafterColumn: 0,\n\t\t\t\tdomNode: document.createElement('div'),\n\t\t\t\theightInPx: 30,\n\t\t\t\tordinal: -1, // show before code lenses\n\t\t\t});\n\t\t});\n\n\t\tds.add(toDisposable(() => {\n\t\t\tthis.registered = false;\n\t\t\tthis.editor.removeOverlayWidget(this);\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\taccessor.removeZone(viewZoneId);\n\t\t\t});\n\t\t}));\n\n\t\tds.add(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (this.current && (e.affectsConfiguration(TestingConfigKeys.CoverageBarThresholds) || e.affectsConfiguration(TestingConfigKeys.CoveragePercent))) {\n\t\t\t\tthis.setCoverage(this.current.coverage, this.current.testId);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate rerunTest() {\n\t\tconst current = this.current;\n\t\tif (current) {\n\t\t\tthis.isRunning = true;\n\t\t\tthis.setActions();\n\t\t\tthis.testService.runResolvedTests(current.coverage.fromResult.request).finally(() => {\n\t\t\t\tthis.isRunning = false;\n\t\t\t\tthis.setActions();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate hide() {\n\t\tthis.showStore.clear();\n\t}\n}\n\nregisterAction2(class ToggleInlineCoverage extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TOGGLE_INLINE_COMMAND_ID,\n\t\t\t// note: ideally this would be \"show inline\", but the command palette does\n\t\t\t// not use the 'toggled' titles, so we need to make this generic.\n\t\t\ttitle: localize2('coverage.toggleInline', \"Toggle Inline Coverage\"),\n\t\t\tcategory: Categories.Test,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyI),\n\t\t\t},\n\t\t\ttoggled: {\n\t\t\t\tcondition: TestingContextKeys.inlineCoverageEnabled,\n\t\t\t\ttitle: localize('coverage.hideInline', \"Hide Inline Coverage\"),\n\t\t\t},\n\t\t\ticon: testingCoverageReport,\n\t\t\tmenu: [\n\t\t\t\t{ id: MenuId.CommandPalette, when: TestingContextKeys.isTestCoverageOpen },\n\t\t\t\t{ id: MenuId.EditorTitle, when: ContextKeyExpr.and(TestingContextKeys.hasInlineCoverageDetails, TestingContextKeys.coverageToolbarEnabled.notEqualsTo(true)), group: 'navigation' },\n\t\t\t]\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor): void {\n\t\tconst coverage = accessor.get(ITestCoverageService);\n\t\tcoverage.showInline.set(!coverage.showInline.get(), undefined);\n\t}\n});\n\nregisterAction2(class ToggleCoverageToolbar extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageToggleToolbar,\n\t\t\ttitle: localize2('testing.toggleToolbarTitle', \"Test Coverage Toolbar\"),\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize2('testing.toggleToolbarDesc', 'Toggle the sticky coverage bar in the editor.')\n\t\t\t},\n\t\t\tcategory: Categories.Test,\n\t\t\ttoggled: {\n\t\t\t\tcondition: TestingContextKeys.coverageToolbarEnabled,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{ id: MenuId.CommandPalette, when: TestingContextKeys.isTestCoverageOpen },\n\t\t\t\t{ id: MenuId.StickyScrollContext, when: TestingContextKeys.isTestCoverageOpen },\n\t\t\t\t{ id: MenuId.EditorTitle, when: TestingContextKeys.hasCoverageInFile, group: 'coverage@1' },\n\t\t\t]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst config = accessor.get(IConfigurationService);\n\t\tconst value = getTestingConfiguration(config, TestingConfigKeys.CoverageToolbarEnabled);\n\t\tconfig.updateValue(TestingConfigKeys.CoverageToolbarEnabled, !value);\n\t}\n});\n\nregisterAction2(class FilterCoverageToTestInEditor extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageFilterToTestInEditor,\n\t\t\ttitle: localize2('testing.filterActionLabel', \"Filter Coverage to Test\"),\n\t\t\tcategory: Categories.Test,\n\t\t\ticon: Codicon.filter,\n\t\t\ttoggled: {\n\t\t\t\ticon: Codicon.filterFilled,\n\t\t\t\tcondition: TestingContextKeys.isCoverageFilteredToTest,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tTestingContextKeys.hasCoverageInFile,\n\t\t\t\t\t\tTestingContextKeys.coverageToolbarEnabled.notEqualsTo(true),\n\t\t\t\t\t\tTestingContextKeys.hasPerTestCoverage,\n\t\t\t\t\t\tActiveEditorContext.isEqualTo(TEXT_FILE_EDITOR_ID),\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, coverageOrUri?: FileCoverage | URI, editor?: ICodeEditor): void {\n\t\tconst testCoverageService = accessor.get(ITestCoverageService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst activeEditor = isCodeEditor(editor) ? editor : accessor.get(ICodeEditorService).getActiveCodeEditor();\n\t\tlet coverage: FileCoverage | undefined;\n\t\tif (coverageOrUri instanceof FileCoverage) {\n\t\t\tcoverage = coverageOrUri;\n\t\t} else if (isUriComponents(coverageOrUri)) {\n\t\t\tcoverage = testCoverageService.selected.get()?.getUri(URI.from(coverageOrUri));\n\t\t} else {\n\t\t\tconst uri = activeEditor?.getModel()?.uri;\n\t\t\tcoverage = uri && testCoverageService.selected.get()?.getUri(uri);\n\t\t}\n\n\t\tif (!coverage || !coverage.perTestData?.size) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tests = [...coverage.perTestData].map(TestId.fromString);\n\t\tconst commonPrefix = TestId.getLengthOfCommonPrefix(tests.length, i => tests[i]);\n\t\tconst result = coverage.fromResult;\n\t\tconst previousSelection = testCoverageService.filterToTest.get();\n\n\t\ttype TItem = { label: string; testId: TestId | undefined; buttons?: IQuickInputButton[] };\n\n\t\tconst buttons: IQuickInputButton[] = [{\n\t\t\ticonClass: 'codicon-go-to-file',\n\t\t\ttooltip: 'Go to Test',\n\t\t}];\n\t\tconst items: QuickPickInput<TItem>[] = [\n\t\t\t{ label: coverUtils.labels.allTests, testId: undefined },\n\t\t\t{ type: 'separator' },\n\t\t\t...tests.map(id => ({ label: coverUtils.getLabelForItem(result, id, commonPrefix), testId: id, buttons })),\n\t\t];\n\n\t\t// These handle the behavior that reveals the start of coverage when the\n\t\t// user picks from the quickpick. Scroll position is restored if the user\n\t\t// exits without picking an item, or picks \"all tests\".\n\t\tconst scrollTop = activeEditor?.getScrollTop() || 0;\n\t\tconst revealScrollCts = new MutableDisposable<CancellationTokenSource>();\n\n\t\tquickInputService.pick(items, {\n\t\t\tactiveItem: items.find((item): item is TItem => 'testId' in item && item.testId?.toString() === previousSelection?.toString()),\n\t\t\tplaceHolder: coverUtils.labels.pickShowCoverage,\n\t\t\tonDidTriggerItemButton: (context) => {\n\t\t\t\tcommandService.executeCommand('vscode.revealTest', context.item.testId?.toString());\n\t\t\t},\n\t\t\tonDidFocus: (entry) => {\n\t\t\t\tif (!entry.testId) {\n\t\t\t\t\trevealScrollCts.clear();\n\t\t\t\t\tactiveEditor?.setScrollTop(scrollTop);\n\t\t\t\t\ttestCoverageService.filterToTest.set(undefined, undefined);\n\t\t\t\t} else {\n\t\t\t\t\tconst cts = revealScrollCts.value = new CancellationTokenSource();\n\t\t\t\t\tcoverage.detailsForTest(entry.testId, cts.token).then(\n\t\t\t\t\t\tdetails => {\n\t\t\t\t\t\t\tconst first = details.find(d => d.type === DetailType.Statement);\n\t\t\t\t\t\t\tif (!cts.token.isCancellationRequested && first) {\n\t\t\t\t\t\t\t\tactiveEditor?.revealLineNearTop(first.location instanceof Position ? first.location.lineNumber : first.location.startLineNumber);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => { /* ignored */ }\n\t\t\t\t\t);\n\t\t\t\t\ttestCoverageService.filterToTest.set(entry.testId, undefined);\n\t\t\t\t}\n\t\t\t},\n\t\t}).then(selected => {\n\t\t\tif (!selected) {\n\t\t\t\tactiveEditor?.setScrollTop(scrollTop);\n\t\t\t}\n\n\t\t\trevealScrollCts.dispose();\n\t\t\ttestCoverageService.filterToTest.set(selected ? selected.testId : previousSelection, undefined);\n\t\t});\n\t}\n});\n\nregisterAction2(class ToggleCoverageInExplorer extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageToggleInExplorer,\n\t\t\ttitle: localize2('testing.toggleCoverageInExplorerTitle', \"Toggle Coverage in Explorer\"),\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize2('testing.toggleCoverageInExplorerDesc', 'Toggle the display of test coverage in the File Explorer view.')\n\t\t\t},\n\t\t\tcategory: Categories.Test,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ContextKeyExpr.equals('config.testing.showCoverageInExplorer', true),\n\t\t\t\ttitle: localize('testing.hideCoverageInExplorer', \"Hide Coverage in Explorer\"),\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{ id: MenuId.CommandPalette, when: TestingContextKeys.isTestCoverageOpen },\n\t\t\t]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst config = accessor.get(IConfigurationService);\n\t\tconst value = getTestingConfiguration(config, TestingConfigKeys.ShowCoverageInExplorer);\n\t\tconfig.updateValue(TestingConfigKeys.ShowCoverageInExplorer, !value);\n\t}\n});\n\nregisterAction2(class GoToNextMissedCoverageLine extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageGoToNextMissedLine,\n\t\t\ttitle: GO_TO_NEXT_MISSED_LINE_TITLE,\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize2('testing.goToNextMissedLineDesc', 'Navigate to the next line that is not covered by tests.')\n\t\t\t},\n\t\t\tcategory: Categories.Test,\n\t\t\ticon: Codicon.arrowDown,\n\t\t\tf1: true,\n\t\t\tprecondition: TestingContextKeys.hasCoverageInFile,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ActiveEditorContext,\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\tprimary: KeyMod.Alt | KeyCode.F9,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{ id: MenuId.CommandPalette, when: TestingContextKeys.isTestCoverageOpen },\n\t\t\t\t{ id: MenuId.EditorTitle, when: TestingContextKeys.hasCoverageInFile, group: 'coverage@2' },\n\t\t\t]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst activeEditor = codeEditorService.getActiveCodeEditor();\n\t\tif (!activeEditor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst contribution = activeEditor.getContribution<CodeCoverageDecorations>(CodeCoverageDecorations.ID);\n\t\tcontribution?.goToNextMissedLine();\n\t}\n});\n\nregisterAction2(class GoToPreviousMissedCoverageLine extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageGoToPreviousMissedLine,\n\t\t\ttitle: GO_TO_PREVIOUS_MISSED_LINE_TITLE,\n\t\t\tmetadata: {\n\t\t\t\tdescription: localize2('testing.goToPreviousMissedLineDesc', 'Navigate to the previous line that is not covered by tests.')\n\t\t\t},\n\t\t\tcategory: Categories.Test,\n\t\t\ticon: Codicon.arrowUp,\n\t\t\tf1: true,\n\t\t\tprecondition: TestingContextKeys.hasCoverageInFile,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ActiveEditorContext,\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\tprimary: KeyMod.Alt | KeyMod.Shift | KeyCode.F9,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{ id: MenuId.CommandPalette, when: TestingContextKeys.isTestCoverageOpen },\n\t\t\t\t{ id: MenuId.EditorTitle, when: TestingContextKeys.hasCoverageInFile, group: 'coverage@3' },\n\t\t\t]\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst activeEditor = codeEditorService.getActiveCodeEditor();\n\t\tif (!activeEditor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst contribution = activeEditor.getContribution<CodeCoverageDecorations>(CodeCoverageDecorations.ID);\n\t\tcontribution?.goToPreviousMissedLine();\n\t}\n});\n\nclass ActionWithIcon extends Action {\n\tconstructor(id: string, title: string, public readonly icon: ThemeIcon, enabled: boolean | undefined, run: () => void) {\n\t\tsuper(id, title, undefined, enabled, run);\n\t}\n}\n\nclass CodiconActionViewItem extends ActionViewItem {\n\n\tpublic themeIcon?: ThemeIcon;\n\n\tprotected override updateLabel(): void {\n\t\tif (this.options.label && this.label && this.themeIcon) {\n\t\t\tdom.reset(this.label, renderIcon(this.themeIcon), this.action.label);\n\t\t}\n\t}\n}\n"]}