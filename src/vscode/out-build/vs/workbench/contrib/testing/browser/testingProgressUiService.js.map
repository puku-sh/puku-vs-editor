{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/testing/browser/testingProgressUiService.ts","vs/workbench/contrib/testing/browser/testingProgressUiService.ts"],"names":[],"mappings":"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","file":"testingProgressUiService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun } from '../../../../base/common/observable.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { AutoOpenTesting, getTestingConfiguration, TestingConfigKeys } from '../common/configuration.js';\nimport { Testing } from '../common/constants.js';\nimport { ITestCoverageService } from '../common/testCoverageService.js';\nimport { isFailedState } from '../common/testingStates.js';\nimport { LiveTestResult, TestResultItemChangeReason } from '../common/testResult.js';\nimport { ITestResultService } from '../common/testResultService.js';\nimport { ExplorerTestCoverageBars } from './testCoverageBars.js';\n\n/** Workbench contribution that triggers updates in the TestingProgressUi service */\nexport class TestingProgressTrigger extends Disposable {\n\tpublic static readonly ID = 'workbench.contrib.testing.progressTrigger';\n\n\tconstructor(\n\t\t@ITestResultService resultService: ITestResultService,\n\t\t@ITestCoverageService testCoverageService: ITestCoverageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(resultService.onResultsChanged((e) => {\n\t\t\tif ('started' in e) {\n\t\t\t\tthis.attachAutoOpenForNewResults(e.started);\n\t\t\t}\n\t\t}));\n\n\t\tconst barContributionRegistration = autorun(reader => {\n\t\t\tconst hasCoverage = !!testCoverageService.selected.read(reader);\n\t\t\tif (!hasCoverage) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbarContributionRegistration.dispose();\n\t\t\tExplorerTestCoverageBars.register();\n\t\t});\n\n\t\tthis._register(barContributionRegistration);\n\t}\n\n\tprivate attachAutoOpenForNewResults(result: LiveTestResult) {\n\t\tif (result.request.preserveFocus === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cfg = getTestingConfiguration(this.configurationService, TestingConfigKeys.OpenResults);\n\t\tif (cfg === AutoOpenTesting.NeverOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (cfg === AutoOpenTesting.OpenExplorerOnTestStart) {\n\t\t\treturn this.openExplorerView();\n\t\t}\n\n\t\tif (cfg === AutoOpenTesting.OpenOnTestStart) {\n\t\t\treturn this.openResultsView();\n\t\t}\n\n\t\t// open on failure\n\t\tconst disposable = new DisposableStore();\n\t\tdisposable.add(result.onComplete(() => disposable.dispose()));\n\t\tdisposable.add(result.onChange(e => {\n\t\t\tif (e.reason === TestResultItemChangeReason.OwnStateChange && isFailedState(e.item.ownComputedState)) {\n\t\t\t\tthis.openResultsView();\n\t\t\t\tdisposable.dispose();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate openExplorerView() {\n\t\tthis.viewsService.openView(Testing.ExplorerViewId, false);\n\t}\n\n\tprivate openResultsView() {\n\t\tthis.viewsService.openView(Testing.ResultsViewId, false);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun } from '../../../../base/common/observable.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { AutoOpenTesting, getTestingConfiguration, TestingConfigKeys } from '../common/configuration.js';\nimport { Testing } from '../common/constants.js';\nimport { ITestCoverageService } from '../common/testCoverageService.js';\nimport { isFailedState } from '../common/testingStates.js';\nimport { LiveTestResult, TestResultItemChangeReason } from '../common/testResult.js';\nimport { ITestResultService } from '../common/testResultService.js';\nimport { ExplorerTestCoverageBars } from './testCoverageBars.js';\n\n/** Workbench contribution that triggers updates in the TestingProgressUi service */\nexport class TestingProgressTrigger extends Disposable {\n\tpublic static readonly ID = 'workbench.contrib.testing.progressTrigger';\n\n\tconstructor(\n\t\t@ITestResultService resultService: ITestResultService,\n\t\t@ITestCoverageService testCoverageService: ITestCoverageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(resultService.onResultsChanged((e) => {\n\t\t\tif ('started' in e) {\n\t\t\t\tthis.attachAutoOpenForNewResults(e.started);\n\t\t\t}\n\t\t}));\n\n\t\tconst barContributionRegistration = autorun(reader => {\n\t\t\tconst hasCoverage = !!testCoverageService.selected.read(reader);\n\t\t\tif (!hasCoverage) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbarContributionRegistration.dispose();\n\t\t\tExplorerTestCoverageBars.register();\n\t\t});\n\n\t\tthis._register(barContributionRegistration);\n\t}\n\n\tprivate attachAutoOpenForNewResults(result: LiveTestResult) {\n\t\tif (result.request.preserveFocus === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cfg = getTestingConfiguration(this.configurationService, TestingConfigKeys.OpenResults);\n\t\tif (cfg === AutoOpenTesting.NeverOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (cfg === AutoOpenTesting.OpenExplorerOnTestStart) {\n\t\t\treturn this.openExplorerView();\n\t\t}\n\n\t\tif (cfg === AutoOpenTesting.OpenOnTestStart) {\n\t\t\treturn this.openResultsView();\n\t\t}\n\n\t\t// open on failure\n\t\tconst disposable = new DisposableStore();\n\t\tdisposable.add(result.onComplete(() => disposable.dispose()));\n\t\tdisposable.add(result.onChange(e => {\n\t\t\tif (e.reason === TestResultItemChangeReason.OwnStateChange && isFailedState(e.item.ownComputedState)) {\n\t\t\t\tthis.openResultsView();\n\t\t\t\tdisposable.dispose();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate openExplorerView() {\n\t\tthis.viewsService.openView(Testing.ExplorerViewId, false);\n\t}\n\n\tprivate openResultsView() {\n\t\tthis.viewsService.openView(Testing.ResultsViewId, false);\n\t}\n}\n"]}