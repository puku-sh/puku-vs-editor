{"version":3,"sources":["vs/workbench/contrib/testing/browser/testExplorerActions.ts"],"names":[],"mappings":"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","file":"testExplorerActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IActiveCodeEditor, ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { EditorOption, GoToLocationValues } from '../../../../editor/common/config/editorOptions.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { EditorContextKeys } from '../../../../editor/common/editorContextKeys.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { SymbolNavigationAction } from '../../../../editor/contrib/gotoSymbol/browser/goToCommands.js';\nimport { ReferencesModel } from '../../../../editor/contrib/gotoSymbol/browser/referencesModel.js';\nimport { MessageController } from '../../../../editor/contrib/message/browser/messageController.js';\nimport { PeekContext } from '../../../../editor/contrib/peekView/browser/peekView.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, IAction2Options, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, ContextKeyExpression, ContextKeyGreaterExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IProgressService, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ViewAction } from '../../../browser/parts/views/viewPane.js';\nimport { FocusedViewContext } from '../../../common/contextkeys.js';\nimport { IExtensionsWorkbenchService } from '../../extensions/common/extensions.js';\nimport { TestExplorerTreeElement, TestItemTreeElement } from './explorerProjections/index.js';\nimport * as icons from './icons.js';\nimport { TestingExplorerView } from './testingExplorerView.js';\nimport { TestResultsView } from './testingOutputPeek.js';\nimport { TestCommandId, TestExplorerViewMode, TestExplorerViewSorting, Testing, testConfigurationGroupNames } from '../common/constants.js';\nimport { getTestingConfiguration, TestingConfigKeys, TestingResultsViewLayout } from '../common/configuration.js';\nimport { ITestCoverageService } from '../common/testCoverageService.js';\nimport { TestId } from '../common/testId.js';\nimport { ITestProfileService, canUseProfileWithTest } from '../common/testProfileService.js';\nimport { ITestResult } from '../common/testResult.js';\nimport { ITestResultService } from '../common/testResultService.js';\nimport { IMainThreadTestCollection, IMainThreadTestController, ITestService, expandAndGetTestById, testsInFile, testsUnderUri } from '../common/testService.js';\nimport { ExtTestRunProfileKind, ITestRunProfile, InternalTestItem, TestItemExpandState, TestRunProfileBitset } from '../common/testTypes.js';\nimport { TestingContextKeys } from '../common/testingContextKeys.js';\nimport { ITestingContinuousRunService } from '../common/testingContinuousRunService.js';\nimport { ITestingPeekOpener } from '../common/testingPeekOpener.js';\nimport { isFailedState } from '../common/testingStates.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\n\nconst category = Categories.Test;\n\nconst enum ActionOrder {\n\t// Navigation:\n\tRefresh = 10,\n\tRun,\n\tDebug,\n\tCoverage,\n\tRunContinuous,\n\tRunUsing,\n\n\t// Submenu:\n\tCollapse,\n\tClearResults,\n\tDisplayMode,\n\tSort,\n\tGoToTest,\n\tHideTest,\n\tContinuousRunTest = -1 >>> 1, // max int, always at the end to avoid shifting on hover\n}\n\nconst hasAnyTestProvider = ContextKeyGreaterExpr.create(TestingContextKeys.providerCount.key, 0);\n\nconst LABEL_RUN_TESTS = localize2('runSelectedTests', \"Run Tests\");\nconst LABEL_DEBUG_TESTS = localize2('debugSelectedTests', \"Debug Tests\");\nconst LABEL_COVERAGE_TESTS = localize2('coverageSelectedTests', \"Run Tests with Coverage\");\n\nexport class HideTestAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.HideTestAction,\n\t\t\ttitle: localize2('hideTest', 'Hide Test'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TestItem,\n\t\t\t\tgroup: 'builtin@2',\n\t\t\t\twhen: TestingContextKeys.testItemIsHidden.isEqualTo(false)\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor, ...elements: TestItemTreeElement[]) {\n\t\tconst service = accessor.get(ITestService);\n\t\tfor (const element of elements) {\n\t\t\tservice.excluded.toggle(element.test, true);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class UnhideTestAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.UnhideTestAction,\n\t\t\ttitle: localize2('unhideTest', 'Unhide Test'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TestItem,\n\t\t\t\torder: ActionOrder.HideTest,\n\t\t\t\twhen: TestingContextKeys.testItemIsHidden.isEqualTo(true)\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor, ...elements: InternalTestItem[]) {\n\t\tconst service = accessor.get(ITestService);\n\t\tfor (const element of elements) {\n\t\t\tif (element instanceof TestItemTreeElement) {\n\t\t\t\tservice.excluded.toggle(element.test, false);\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class UnhideAllTestsAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.UnhideAllTestsAction,\n\t\t\ttitle: localize2('unhideAllTests', 'Unhide All Tests'),\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor) {\n\t\tconst service = accessor.get(ITestService);\n\t\tservice.excluded.clear();\n\t\treturn Promise.resolve();\n\t}\n}\n\nconst testItemInlineAndInContext = (order: ActionOrder, when?: ContextKeyExpression) => [\n\t{\n\t\tid: MenuId.TestItem,\n\t\tgroup: 'inline',\n\t\torder,\n\t\twhen,\n\t}, {\n\t\tid: MenuId.TestItem,\n\t\tgroup: 'builtin@1',\n\t\torder,\n\t\twhen,\n\t}\n];\n\nabstract class RunVisibleAction extends ViewAction<TestingExplorerView> {\n\tconstructor(private readonly bitset: TestRunProfileBitset, desc: Readonly<IAction2Options>) {\n\t\tsuper({\n\t\t\t...desc,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(accessor: ServicesAccessor, view: TestingExplorerView, ...elements: TestItemTreeElement[]): Promise<unknown> {\n\t\tconst { include, exclude } = view.getTreeIncludeExclude(this.bitset, elements.map(e => e.test));\n\t\treturn accessor.get(ITestService).runTests({\n\t\t\ttests: include,\n\t\t\texclude,\n\t\t\tgroup: this.bitset,\n\t\t});\n\t}\n}\n\nexport class DebugAction extends RunVisibleAction {\n\tconstructor() {\n\t\tsuper(TestRunProfileBitset.Debug, {\n\t\t\tid: TestCommandId.DebugAction,\n\t\t\ttitle: localize2('debug test', 'Debug Test'),\n\t\t\ticon: icons.testingDebugIcon,\n\t\t\tmenu: testItemInlineAndInContext(ActionOrder.Debug, TestingContextKeys.hasDebuggableTests.isEqualTo(true)),\n\t\t});\n\t}\n}\n\nexport class CoverageAction extends RunVisibleAction {\n\tconstructor() {\n\t\tsuper(TestRunProfileBitset.Coverage, {\n\t\t\tid: TestCommandId.RunWithCoverageAction,\n\t\t\ttitle: localize2('run with cover test', 'Run Test with Coverage'),\n\t\t\ticon: icons.testingCoverageIcon,\n\t\t\tmenu: testItemInlineAndInContext(ActionOrder.Coverage, TestingContextKeys.hasCoverableTests.isEqualTo(true)),\n\t\t});\n\t}\n}\n\nexport class RunUsingProfileAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.RunUsingProfileAction,\n\t\t\ttitle: localize2('testing.runUsing', 'Execute Using Profile...'),\n\t\t\ticon: icons.testingDebugIcon,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TestItem,\n\t\t\t\torder: ActionOrder.RunUsing,\n\t\t\t\tgroup: 'builtin@2',\n\t\t\t\twhen: TestingContextKeys.hasNonDefaultProfile.isEqualTo(true),\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override async run(acessor: ServicesAccessor, ...elements: TestItemTreeElement[]): Promise<void> {\n\t\tconst commandService = acessor.get(ICommandService);\n\t\tconst testService = acessor.get(ITestService);\n\t\tconst profile: ITestRunProfile | undefined = await commandService.executeCommand('vscode.pickTestProfile', {\n\t\t\tonlyForTest: elements[0].test,\n\t\t});\n\t\tif (!profile) {\n\t\t\treturn;\n\t\t}\n\n\t\ttestService.runResolvedTests({\n\t\t\tgroup: profile.group,\n\t\t\ttargets: [{\n\t\t\t\tprofileId: profile.profileId,\n\t\t\t\tcontrollerId: profile.controllerId,\n\t\t\t\ttestIds: elements.filter(t => canUseProfileWithTest(profile, t.test)).map(t => t.test.item.extId)\n\t\t\t}]\n\t\t});\n\t}\n}\n\nexport class RunAction extends RunVisibleAction {\n\tconstructor() {\n\t\tsuper(TestRunProfileBitset.Run, {\n\t\t\tid: TestCommandId.RunAction,\n\t\t\ttitle: localize2('run test', 'Run Test'),\n\t\t\ticon: icons.testingRunIcon,\n\t\t\tmenu: testItemInlineAndInContext(ActionOrder.Run, TestingContextKeys.hasRunnableTests.isEqualTo(true)),\n\t\t});\n\t}\n}\n\nexport class SelectDefaultTestProfiles extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.SelectDefaultTestProfiles,\n\t\t\ttitle: localize2('testing.selectDefaultTestProfiles', 'Select Default Profile'),\n\t\t\ticon: icons.testingUpdateProfiles,\n\t\t\tcategory,\n\t\t});\n\t}\n\n\tpublic override async run(acessor: ServicesAccessor, onlyGroup: TestRunProfileBitset) {\n\t\tconst commands = acessor.get(ICommandService);\n\t\tconst testProfileService = acessor.get(ITestProfileService);\n\t\tconst profiles = await commands.executeCommand<ITestRunProfile[]>('vscode.pickMultipleTestProfiles', {\n\t\t\tshowConfigureButtons: false,\n\t\t\tselected: testProfileService.getGroupDefaultProfiles(onlyGroup),\n\t\t\tonlyGroup,\n\t\t});\n\n\t\tif (profiles?.length) {\n\t\t\ttestProfileService.setGroupDefaultProfiles(onlyGroup, profiles);\n\t\t}\n\t}\n}\n\nexport class ContinuousRunTestAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ToggleContinousRunForTest,\n\t\t\ttitle: localize2('testing.toggleContinuousRunOn', 'Turn on Continuous Run'),\n\t\t\ticon: icons.testingTurnContinuousRunOn,\n\t\t\tprecondition: ContextKeyExpr.or(\n\t\t\t\tTestingContextKeys.isContinuousModeOn.isEqualTo(true),\n\t\t\t\tTestingContextKeys.isParentRunningContinuously.isEqualTo(false)\n\t\t\t),\n\t\t\ttoggled: {\n\t\t\t\tcondition: TestingContextKeys.isContinuousModeOn.isEqualTo(true),\n\t\t\t\ticon: icons.testingContinuousIsOn,\n\t\t\t\ttitle: localize('testing.toggleContinuousRunOff', 'Turn off Continuous Run'),\n\t\t\t},\n\t\t\tmenu: testItemInlineAndInContext(ActionOrder.ContinuousRunTest, TestingContextKeys.supportsContinuousRun.isEqualTo(true)),\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor, ...elements: TestItemTreeElement[]): Promise<void> {\n\t\tconst crService = accessor.get(ITestingContinuousRunService);\n\t\tfor (const element of elements) {\n\t\t\tconst id = element.test.item.extId;\n\t\t\tif (crService.isSpecificallyEnabledFor(id)) {\n\t\t\t\tcrService.stop(id);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tcrService.start(TestRunProfileBitset.Run, id);\n\t\t}\n\t}\n}\n\nexport class ContinuousRunUsingProfileTestAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ContinousRunUsingForTest,\n\t\t\ttitle: localize2('testing.startContinuousRunUsing', 'Start Continous Run Using...'),\n\t\t\ticon: icons.testingDebugIcon,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.TestItem,\n\t\t\t\t\torder: ActionOrder.RunContinuous,\n\t\t\t\t\tgroup: 'builtin@2',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tTestingContextKeys.supportsContinuousRun.isEqualTo(true),\n\t\t\t\t\t\tTestingContextKeys.isContinuousModeOn.isEqualTo(false),\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t],\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor, ...elements: TestItemTreeElement[]): Promise<void> {\n\t\tconst crService = accessor.get(ITestingContinuousRunService);\n\t\tconst profileService = accessor.get(ITestProfileService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\n\t\tfor (const element of elements) {\n\t\t\tconst selected = await selectContinuousRunProfiles(crService, notificationService, quickInputService,\n\t\t\t\t[{ profiles: profileService.getControllerProfiles(element.test.controllerId) }]);\n\n\t\t\tif (selected.length) {\n\t\t\t\tcrService.start(selected, element.test.item.extId);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class ConfigureTestProfilesAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ConfigureTestProfilesAction,\n\t\t\ttitle: localize2('testing.configureProfile', \"Configure Test Profiles\"),\n\t\t\ticon: icons.testingUpdateProfiles,\n\t\t\tf1: true,\n\t\t\tcategory,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.hasConfigurableProfile.isEqualTo(true),\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override async run(acessor: ServicesAccessor, onlyGroup?: TestRunProfileBitset) {\n\t\tconst commands = acessor.get(ICommandService);\n\t\tconst testProfileService = acessor.get(ITestProfileService);\n\t\tconst profile = await commands.executeCommand<ITestRunProfile>('vscode.pickTestProfile', {\n\t\t\tplaceholder: localize('configureProfile', 'Select a profile to update'),\n\t\t\tshowConfigureButtons: false,\n\t\t\tonlyConfigurable: true,\n\t\t\tonlyGroup,\n\t\t});\n\n\t\tif (profile) {\n\t\t\ttestProfileService.configure(profile.controllerId, profile.profileId);\n\t\t}\n\t}\n}\n\nconst continuousMenus = (whenIsContinuousOn: boolean): IAction2Options['menu'] => [\n\t{\n\t\tid: MenuId.ViewTitle,\n\t\tgroup: 'navigation',\n\t\torder: ActionOrder.RunUsing,\n\t\twhen: ContextKeyExpr.and(\n\t\t\tContextKeyExpr.equals('view', Testing.ExplorerViewId),\n\t\t\tTestingContextKeys.supportsContinuousRun.isEqualTo(true),\n\t\t\tTestingContextKeys.isContinuousModeOn.isEqualTo(whenIsContinuousOn),\n\t\t),\n\t},\n\t{\n\t\tid: MenuId.CommandPalette,\n\t\twhen: TestingContextKeys.supportsContinuousRun.isEqualTo(true),\n\t},\n];\n\nclass StopContinuousRunAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.StopContinousRun,\n\t\t\ttitle: localize2('testing.stopContinuous', 'Stop Continuous Run'),\n\t\t\tcategory,\n\t\t\ticon: icons.testingTurnContinuousRunOff,\n\t\t\tmenu: continuousMenus(true),\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor): void {\n\t\taccessor.get(ITestingContinuousRunService).stop();\n\t}\n}\n\nfunction selectContinuousRunProfiles(\n\tcrs: ITestingContinuousRunService,\n\tnotificationService: INotificationService,\n\tquickInputService: IQuickInputService,\n\tprofilesToPickFrom: Iterable<Readonly<{\n\t\tcontroller?: IMainThreadTestController;\n\t\tprofiles: ITestRunProfile[];\n\t}>>,\n): Promise<ITestRunProfile[]> {\n\ttype ItemType = IQuickPickItem & { profile: ITestRunProfile };\n\n\tconst items: ItemType[] = [];\n\tfor (const { controller, profiles } of profilesToPickFrom) {\n\t\tfor (const profile of profiles) {\n\t\t\tif (profile.supportsContinuousRun) {\n\t\t\t\titems.push({\n\t\t\t\t\tlabel: profile.label || controller?.label.get() || '',\n\t\t\t\t\tdescription: controller?.label.get(),\n\t\t\t\t\tprofile,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tif (items.length === 0) {\n\t\tnotificationService.info(localize('testing.noProfiles', 'No test continuous run-enabled profiles were found'));\n\t\treturn Promise.resolve([]);\n\t}\n\n\t// special case: don't bother to quick a pickpick if there's only a single profile\n\tif (items.length === 1) {\n\t\treturn Promise.resolve([items[0].profile]);\n\t}\n\n\tconst qpItems: (ItemType | IQuickPickSeparator)[] = [];\n\tconst selectedItems: ItemType[] = [];\n\tconst lastRun = crs.lastRunProfileIds;\n\n\titems.sort((a, b) => a.profile.group - b.profile.group\n\t\t|| a.profile.controllerId.localeCompare(b.profile.controllerId)\n\t\t|| a.label.localeCompare(b.label));\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (i === 0 || items[i - 1].profile.group !== item.profile.group) {\n\t\t\tqpItems.push({ type: 'separator', label: testConfigurationGroupNames[item.profile.group] });\n\t\t}\n\n\t\tqpItems.push(item);\n\t\tif (lastRun.has(item.profile.profileId)) {\n\t\t\tselectedItems.push(item);\n\t\t}\n\t}\n\n\tconst disposables = new DisposableStore();\n\tconst quickpick = disposables.add(quickInputService.createQuickPick<IQuickPickItem & { profile: ITestRunProfile }>({ useSeparators: true }));\n\tquickpick.title = localize('testing.selectContinuousProfiles', 'Select profiles to run when files change:');\n\tquickpick.canSelectMany = true;\n\tquickpick.items = qpItems;\n\tquickpick.selectedItems = selectedItems;\n\tquickpick.show();\n\treturn new Promise(resolve => {\n\t\tdisposables.add(quickpick.onDidAccept(() => {\n\t\t\tresolve(quickpick.selectedItems.map(i => i.profile));\n\t\t\tdisposables.dispose();\n\t\t}));\n\n\t\tdisposables.add(quickpick.onDidHide(() => {\n\t\t\tresolve([]);\n\t\t\tdisposables.dispose();\n\t\t}));\n\t});\n}\n\nclass StartContinuousRunAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.StartContinousRun,\n\t\t\ttitle: localize2('testing.startContinuous', \"Start Continuous Run\"),\n\t\t\tcategory,\n\t\t\ticon: icons.testingTurnContinuousRunOn,\n\t\t\tmenu: continuousMenus(false),\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst crs = accessor.get(ITestingContinuousRunService);\n\t\tconst profileService = accessor.get(ITestProfileService);\n\n\t\tconst lastRunProfiles = [...profileService.all()].flatMap(p => p.profiles.filter(p => crs.lastRunProfileIds.has(p.profileId)));\n\t\tif (lastRunProfiles.length) {\n\t\t\treturn crs.start(lastRunProfiles);\n\t\t}\n\n\t\tconst selected = await selectContinuousRunProfiles(crs, accessor.get(INotificationService), accessor.get(IQuickInputService), accessor.get(ITestProfileService).all());\n\t\tif (selected.length) {\n\t\t\tcrs.start(selected);\n\t\t}\n\t}\n}\n\nabstract class ExecuteSelectedAction extends ViewAction<TestingExplorerView> {\n\tconstructor(options: IAction2Options, private readonly group: TestRunProfileBitset) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: group === TestRunProfileBitset.Run\n\t\t\t\t\t? ActionOrder.Run\n\t\t\t\t\t: group === TestRunProfileBitset.Debug\n\t\t\t\t\t\t? ActionOrder.Debug\n\t\t\t\t\t\t: ActionOrder.Coverage,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tContextKeyExpr.equals('view', Testing.ExplorerViewId),\n\t\t\t\t\tTestingContextKeys.isRunning.isEqualTo(false),\n\t\t\t\t\tTestingContextKeys.capabilityToContextKey[group].isEqualTo(true),\n\t\t\t\t)\n\t\t\t}],\n\t\t\tcategory,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(accessor: ServicesAccessor, view: TestingExplorerView): Promise<ITestResult | undefined> {\n\t\tconst { include, exclude } = view.getTreeIncludeExclude(this.group);\n\t\treturn accessor.get(ITestService).runTests({ tests: include, exclude, group: this.group });\n\t}\n}\n\nexport class GetSelectedProfiles extends Action2 {\n\tconstructor() {\n\t\tsuper({ id: TestCommandId.GetSelectedProfiles, title: localize2('getSelectedProfiles', 'Get Selected Profiles') });\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic override run(accessor: ServicesAccessor) {\n\t\tconst profiles = accessor.get(ITestProfileService);\n\t\treturn [\n\t\t\t...profiles.getGroupDefaultProfiles(TestRunProfileBitset.Run),\n\t\t\t...profiles.getGroupDefaultProfiles(TestRunProfileBitset.Debug),\n\t\t\t...profiles.getGroupDefaultProfiles(TestRunProfileBitset.Coverage),\n\t\t].map(p => ({\n\t\t\tcontrollerId: p.controllerId,\n\t\t\tlabel: p.label,\n\t\t\tkind: p.group & TestRunProfileBitset.Coverage\n\t\t\t\t? ExtTestRunProfileKind.Coverage\n\t\t\t\t: p.group & TestRunProfileBitset.Debug\n\t\t\t\t\t? ExtTestRunProfileKind.Debug\n\t\t\t\t\t: ExtTestRunProfileKind.Run,\n\t\t}));\n\t}\n}\n\nexport class GetExplorerSelection extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({ id: TestCommandId.GetExplorerSelection, title: localize2('getExplorerSelection', 'Get Explorer Selection'), viewId: Testing.ExplorerViewId });\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic override runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tconst { include, exclude } = view.getTreeIncludeExclude(TestRunProfileBitset.Run, undefined, 'selected');\n\t\tconst mapper = (i: InternalTestItem) => i.item.extId;\n\t\treturn { include: include.map(mapper), exclude: exclude.map(mapper) };\n\t}\n}\n\nexport class RunSelectedAction extends ExecuteSelectedAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.RunSelectedAction,\n\t\t\ttitle: LABEL_RUN_TESTS,\n\t\t\ticon: icons.testingRunAllIcon,\n\t\t}, TestRunProfileBitset.Run);\n\t}\n}\n\nexport class DebugSelectedAction extends ExecuteSelectedAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugSelectedAction,\n\t\t\ttitle: LABEL_DEBUG_TESTS,\n\t\t\ticon: icons.testingDebugAllIcon,\n\t\t}, TestRunProfileBitset.Debug);\n\t}\n}\n\nexport class CoverageSelectedAction extends ExecuteSelectedAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageSelectedAction,\n\t\t\ttitle: LABEL_COVERAGE_TESTS,\n\t\t\ticon: icons.testingCoverageAllIcon,\n\t\t}, TestRunProfileBitset.Coverage);\n\t}\n}\n\nconst showDiscoveringWhile = <R>(progress: IProgressService, task: Promise<R>): Promise<R> => {\n\treturn progress.withProgress(\n\t\t{\n\t\t\tlocation: ProgressLocation.Window,\n\t\t\ttitle: localize('discoveringTests', 'Discovering Tests'),\n\t\t},\n\t\t() => task,\n\t);\n};\n\nabstract class RunOrDebugAllTestsAction extends Action2 {\n\tconstructor(options: IAction2Options, private readonly group: TestRunProfileBitset, private noTestsFoundError: string) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tcategory,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.capabilityToContextKey[group].isEqualTo(true),\n\t\t\t}]\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor) {\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst notifications = accessor.get(INotificationService);\n\n\t\tconst roots = [...testService.collection.rootItems].filter(r => r.children.size\n\t\t\t|| r.expand === TestItemExpandState.Expandable || r.expand === TestItemExpandState.BusyExpanding);\n\t\tif (!roots.length) {\n\t\t\tnotifications.info(this.noTestsFoundError);\n\t\t\treturn;\n\t\t}\n\n\t\tawait testService.runTests({ tests: roots, group: this.group });\n\t}\n}\n\nexport class RunAllAction extends RunOrDebugAllTestsAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: TestCommandId.RunAllAction,\n\t\t\t\ttitle: localize2('runAllTests', 'Run All Tests'),\n\t\t\t\ticon: icons.testingRunAllIcon,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyCode.KeyA),\n\t\t\t\t},\n\t\t\t},\n\t\t\tTestRunProfileBitset.Run,\n\t\t\tlocalize('noTestProvider', 'No tests found in this workspace. You may need to install a test provider extension'),\n\t\t);\n\t}\n}\n\nexport class DebugAllAction extends RunOrDebugAllTestsAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: TestCommandId.DebugAllAction,\n\t\t\t\ttitle: localize2('debugAllTests', 'Debug All Tests'),\n\t\t\t\ticon: icons.testingDebugIcon,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyA),\n\t\t\t\t},\n\t\t\t},\n\t\t\tTestRunProfileBitset.Debug,\n\t\t\tlocalize('noDebugTestProvider', 'No debuggable tests found in this workspace. You may need to install a test provider extension'),\n\t\t);\n\t}\n}\n\nexport class CoverageAllAction extends RunOrDebugAllTestsAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: TestCommandId.RunAllWithCoverageAction,\n\t\t\t\ttitle: localize2('runAllWithCoverage', 'Run All Tests with Coverage'),\n\t\t\t\ticon: icons.testingCoverageIcon,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyA),\n\t\t\t\t},\n\t\t\t},\n\t\t\tTestRunProfileBitset.Coverage,\n\t\t\tlocalize('noCoverageTestProvider', 'No tests with coverage runners found in this workspace. You may need to install a test provider extension'),\n\t\t);\n\t}\n}\n\nexport class CancelTestRunAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CancelTestRunAction,\n\t\t\ttitle: localize2('testing.cancelRun', 'Cancel Test Run'),\n\t\t\ticon: icons.testingCancelIcon,\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyX),\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.Run,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tContextKeyExpr.equals('view', Testing.ExplorerViewId),\n\t\t\t\t\tContextKeyExpr.equals(TestingContextKeys.isRunning.serialize(), true),\n\t\t\t\t)\n\t\t\t}, {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.isRunning,\n\t\t\t}]\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic async run(accessor: ServicesAccessor, resultId?: string, taskId?: string) {\n\t\tconst resultService = accessor.get(ITestResultService);\n\t\tconst testService = accessor.get(ITestService);\n\t\tif (resultId) {\n\t\t\ttestService.cancelTestRun(resultId, taskId);\n\t\t} else {\n\t\t\tfor (const run of resultService.results) {\n\t\t\t\tif (!run.completedAt) {\n\t\t\t\t\ttestService.cancelTestRun(run.id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class TestingViewAsListAction extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.TestingViewAsListAction,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t\ttitle: localize2('testing.viewAsList', 'View as List'),\n\t\t\ttoggled: TestingContextKeys.viewMode.isEqualTo(TestExplorerViewMode.List),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.DisplayMode,\n\t\t\t\tgroup: 'viewAs',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tview.viewModel.viewMode = TestExplorerViewMode.List;\n\t}\n}\n\nexport class TestingViewAsTreeAction extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.TestingViewAsTreeAction,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t\ttitle: localize2('testing.viewAsTree', 'View as Tree'),\n\t\t\ttoggled: TestingContextKeys.viewMode.isEqualTo(TestExplorerViewMode.Tree),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.DisplayMode,\n\t\t\t\tgroup: 'viewAs',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tview.viewModel.viewMode = TestExplorerViewMode.Tree;\n\t}\n}\n\n\nexport class TestingSortByStatusAction extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.TestingSortByStatusAction,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t\ttitle: localize2('testing.sortByStatus', 'Sort by Status'),\n\t\t\ttoggled: TestingContextKeys.viewSorting.isEqualTo(TestExplorerViewSorting.ByStatus),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.Sort,\n\t\t\t\tgroup: 'sortBy',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tview.viewModel.viewSorting = TestExplorerViewSorting.ByStatus;\n\t}\n}\n\nexport class TestingSortByLocationAction extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.TestingSortByLocationAction,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t\ttitle: localize2('testing.sortByLocation', 'Sort by Location'),\n\t\t\ttoggled: TestingContextKeys.viewSorting.isEqualTo(TestExplorerViewSorting.ByLocation),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.Sort,\n\t\t\t\tgroup: 'sortBy',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tview.viewModel.viewSorting = TestExplorerViewSorting.ByLocation;\n\t}\n}\n\nexport class TestingSortByDurationAction extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.TestingSortByDurationAction,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t\ttitle: localize2('testing.sortByDuration', 'Sort by Duration'),\n\t\t\ttoggled: TestingContextKeys.viewSorting.isEqualTo(TestExplorerViewSorting.ByDuration),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.Sort,\n\t\t\t\tgroup: 'sortBy',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tview.viewModel.viewSorting = TestExplorerViewSorting.ByDuration;\n\t}\n}\n\nexport class ShowMostRecentOutputAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ShowMostRecentOutputAction,\n\t\t\ttitle: localize2('testing.showMostRecentOutput', 'Show Output'),\n\t\t\tcategory,\n\t\t\ticon: Codicon.terminal,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyO),\n\t\t\t},\n\t\t\tprecondition: TestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.Collapse,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId),\n\t\t\t}, {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.hasAnyResults.isEqualTo(true)\n\t\t\t}]\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor) {\n\t\tconst viewService = accessor.get(IViewsService);\n\t\tconst testView = await viewService.openView<TestResultsView>(Testing.ResultsViewId, true);\n\t\ttestView?.showLatestRun();\n\t}\n}\n\nexport class CollapseAllAction extends ViewAction<TestingExplorerView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CollapseAllAction,\n\t\t\tviewId: Testing.ExplorerViewId,\n\t\t\ttitle: localize2('testing.collapseAll', 'Collapse All Tests'),\n\t\t\ticon: Codicon.collapseAll,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.Collapse,\n\t\t\t\tgroup: 'displayAction',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic runInView(_accessor: ServicesAccessor, view: TestingExplorerView) {\n\t\tview.viewModel.collapseAll();\n\t}\n}\n\nexport class ClearTestResultsAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ClearTestResultsAction,\n\t\t\ttitle: localize2('testing.clearResults', 'Clear All Results'),\n\t\t\tcategory,\n\t\t\ticon: Codicon.clearAll,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.TestPeekTitle,\n\t\t\t}, {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\t}, {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.ClearResults,\n\t\t\t\tgroup: 'displayAction',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ExplorerViewId)\n\t\t\t}, {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.ClearResults,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ResultsViewId)\n\t\t\t}],\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic run(accessor: ServicesAccessor) {\n\t\taccessor.get(ITestResultService).clear();\n\t}\n}\n\nexport class GoToTest extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.GoToTest,\n\t\t\ttitle: localize2('testing.editFocusedTest', 'Go to Test'),\n\t\t\ticon: Codicon.goToFile,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TestItem,\n\t\t\t\tgroup: 'builtin@1',\n\t\t\t\torder: ActionOrder.GoToTest,\n\t\t\t\twhen: TestingContextKeys.testItemHasUri.isEqualTo(true),\n\t\t\t},\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorContrib - 10,\n\t\t\t\twhen: FocusedViewContext.isEqualTo(Testing.ExplorerViewId),\n\t\t\t\tprimary: KeyCode.Enter | KeyMod.Alt,\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor, element?: TestExplorerTreeElement, preserveFocus?: boolean) {\n\t\tif (!element) {\n\t\t\tconst view = accessor.get(IViewsService).getActiveViewWithId<TestingExplorerView>(Testing.ExplorerViewId);\n\t\t\telement = view?.focusedTreeElements[0];\n\t\t}\n\n\t\tif (element && element instanceof TestItemTreeElement) {\n\t\t\taccessor.get(ICommandService).executeCommand('vscode.revealTest', element.test.item.extId, preserveFocus);\n\t\t}\n\t}\n}\n\nasync function getTestsAtCursor(testService: ITestService, uriIdentityService: IUriIdentityService, uri: URI, position: Position, filter?: (test: InternalTestItem) => boolean) {\n\t// testsInFile will descend in the test tree. We assume that as we go\n\t// deeper, ranges get more specific. We'll want to run all tests whose\n\t// range is equal to the most specific range we find (see #133519)\n\t//\n\t// If we don't find any test whose range contains the position, we pick\n\t// the closest one before the position. Again, if we find several tests\n\t// whose range is equal to the closest one, we run them all.\n\n\tlet bestNodes: InternalTestItem[] = [];\n\tlet bestRange: Range | undefined;\n\n\tlet bestNodesBefore: InternalTestItem[] = [];\n\tlet bestRangeBefore: Range | undefined;\n\n\tfor await (const tests of testsInFile(testService, uriIdentityService, uri)) {\n\t\tfor (const test of tests) {\n\t\t\tif (!test.item.range || filter?.(test) === false) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst irange = Range.lift(test.item.range);\n\t\t\tif (irange.containsPosition(position)) {\n\t\t\t\tif (bestRange && Range.equalsRange(test.item.range, bestRange)) {\n\t\t\t\t\t// check that a parent isn't already included (#180760)\n\t\t\t\t\tif (!bestNodes.some(b => TestId.isChild(b.item.extId, test.item.extId))) {\n\t\t\t\t\t\tbestNodes.push(test);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbestRange = irange;\n\t\t\t\t\tbestNodes = [test];\n\t\t\t\t}\n\t\t\t} else if (Position.isBefore(irange.getStartPosition(), position)) {\n\t\t\t\tif (!bestRangeBefore || bestRangeBefore.getStartPosition().isBefore(irange.getStartPosition())) {\n\t\t\t\t\tbestRangeBefore = irange;\n\t\t\t\t\tbestNodesBefore = [test];\n\t\t\t\t} else if (irange.equalsRange(bestRangeBefore) && !bestNodesBefore.some(b => TestId.isChild(b.item.extId, test.item.extId))) {\n\t\t\t\t\tbestNodesBefore.push(test);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn bestNodes.length ? bestNodes : bestNodesBefore;\n}\n\nconst enum EditorContextOrder {\n\tRunAtCursor,\n\tDebugAtCursor,\n\tRunInFile,\n\tDebugInFile,\n\tGoToRelated,\n\tPeekRelated,\n}\n\nabstract class ExecuteTestAtCursor extends Action2 {\n\tconstructor(options: IAction2Options, protected readonly group: TestRunProfileBitset) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: hasAnyTestProvider,\n\t\t\t}, {\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: 'testing',\n\t\t\t\torder: group === TestRunProfileBitset.Run ? EditorContextOrder.RunAtCursor : EditorContextOrder.DebugAtCursor,\n\t\t\t\twhen: ContextKeyExpr.and(TestingContextKeys.activeEditorHasTests, TestingContextKeys.capabilityToContextKey[group]),\n\t\t\t}]\n\t\t});\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic async run(accessor: ServicesAccessor) {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst activeEditorPane = editorService.activeEditorPane;\n\t\tlet editor = codeEditorService.getActiveCodeEditor();\n\t\tif (!activeEditorPane || !editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\t\teditor = editor.getParentEditor();\n\t\t}\n\n\t\tconst position = editor?.getPosition();\n\t\tconst model = editor?.getModel();\n\t\tif (!position || !model || !('uri' in model)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst profileService = accessor.get(ITestProfileService);\n\t\tconst uriIdentityService = accessor.get(IUriIdentityService);\n\t\tconst progressService = accessor.get(IProgressService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\n\t\tconst saveBeforeTest = getTestingConfiguration(configurationService, TestingConfigKeys.SaveBeforeTest);\n\t\tif (saveBeforeTest) {\n\t\t\tawait editorService.save({ editor: activeEditorPane.input, groupId: activeEditorPane.group.id });\n\t\t\tawait testService.syncTests();\n\t\t}\n\n\n\t\t// testsInFile will descend in the test tree. We assume that as we go\n\t\t// deeper, ranges get more specific. We'll want to run all tests whose\n\t\t// range is equal to the most specific range we find (see #133519)\n\t\t//\n\t\t// If we don't find any test whose range contains the position, we pick\n\t\t// the closest one before the position. Again, if we find several tests\n\t\t// whose range is equal to the closest one, we run them all.\n\t\tconst testsToRun = await showDiscoveringWhile(progressService,\n\t\t\tgetTestsAtCursor(\n\t\t\t\ttestService,\n\t\t\t\turiIdentityService,\n\t\t\t\tmodel.uri,\n\t\t\t\tposition,\n\t\t\t\ttest => !!(profileService.capabilitiesForTest(test.item) & this.group)\n\t\t\t)\n\t\t);\n\n\t\tif (testsToRun.length) {\n\t\t\tawait testService.runTests({ group: this.group, tests: testsToRun });\n\t\t\treturn;\n\t\t}\n\n\t\tconst relatedTests = await testService.getTestsRelatedToCode(model.uri, position);\n\t\tif (relatedTests.length) {\n\t\t\tawait testService.runTests({ group: this.group, tests: relatedTests });\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor) {\n\t\t\tMessageController.get(editor)?.showMessage(localize('noTestsAtCursor', \"No tests found here\"), position);\n\t\t}\n\t}\n}\n\nexport class RunAtCursor extends ExecuteTestAtCursor {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.RunAtCursor,\n\t\t\ttitle: localize2('testing.runAtCursor', 'Run Test at Cursor'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyCode.KeyC),\n\t\t\t},\n\t\t}, TestRunProfileBitset.Run);\n\t}\n}\n\nexport class DebugAtCursor extends ExecuteTestAtCursor {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugAtCursor,\n\t\t\ttitle: localize2('testing.debugAtCursor', 'Debug Test at Cursor'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyC),\n\t\t\t},\n\t\t}, TestRunProfileBitset.Debug);\n\t}\n}\n\nexport class CoverageAtCursor extends ExecuteTestAtCursor {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageAtCursor,\n\t\t\ttitle: localize2('testing.coverageAtCursor', 'Run Test at Cursor with Coverage'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyC),\n\t\t\t},\n\t\t}, TestRunProfileBitset.Coverage);\n\t}\n}\n\nabstract class ExecuteTestsUnderUriAction extends Action2 {\n\tconstructor(options: IAction2Options, protected readonly group: TestRunProfileBitset) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ExplorerContext,\n\t\t\t\twhen: TestingContextKeys.capabilityToContextKey[group].isEqualTo(true),\n\t\t\t\tgroup: '6.5_testing',\n\t\t\t\torder: (group === TestRunProfileBitset.Run ? ActionOrder.Run : ActionOrder.Debug) + 0.1,\n\t\t\t}],\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor, uri: URI): Promise<unknown> {\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tconst tests = await Iterable.asyncToArray(testsUnderUri(\n\t\t\ttestService,\n\t\t\taccessor.get(IUriIdentityService),\n\t\t\turi\n\t\t));\n\n\t\tif (!tests.length) {\n\t\t\tnotificationService.notify({ message: localize('noTests', 'No tests found in the selected file or folder'), severity: Severity.Info });\n\t\t\treturn;\n\t\t}\n\n\t\treturn testService.runTests({ tests, group: this.group });\n\t}\n}\n\nclass RunTestsUnderUri extends ExecuteTestsUnderUriAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.RunByUri,\n\t\t\ttitle: LABEL_RUN_TESTS,\n\t\t\tcategory,\n\t\t}, TestRunProfileBitset.Run);\n\t}\n}\n\nclass DebugTestsUnderUri extends ExecuteTestsUnderUriAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugByUri,\n\t\t\ttitle: LABEL_DEBUG_TESTS,\n\t\t\tcategory,\n\t\t}, TestRunProfileBitset.Debug);\n\t}\n}\n\nclass CoverageTestsUnderUri extends ExecuteTestsUnderUriAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageByUri,\n\t\t\ttitle: LABEL_COVERAGE_TESTS,\n\t\t\tcategory,\n\t\t}, TestRunProfileBitset.Coverage);\n\t}\n}\n\nabstract class ExecuteTestsInCurrentFile extends Action2 {\n\tconstructor(options: IAction2Options, protected readonly group: TestRunProfileBitset) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.capabilityToContextKey[group].isEqualTo(true),\n\t\t\t}, {\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: 'testing',\n\t\t\t\torder: group === TestRunProfileBitset.Run ? EditorContextOrder.RunInFile : EditorContextOrder.DebugInFile,\n\t\t\t\twhen: ContextKeyExpr.and(TestingContextKeys.activeEditorHasTests, TestingContextKeys.capabilityToContextKey[group]),\n\t\t\t}],\n\t\t});\n\t}\n\n\tprivate async _runByUris(accessor: ServicesAccessor, files: URI[]): Promise<{ completedAt: number | undefined }> {\n\t\tconst uriIdentity = accessor.get(IUriIdentityService);\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst discovered: InternalTestItem[] = [];\n\t\tfor (const uri of files) {\n\t\t\tfor await (const files of testsInFile(testService, uriIdentity, uri, undefined, true)) {\n\t\t\t\tfor (const file of files) {\n\t\t\t\t\tdiscovered.push(file);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (discovered.length) {\n\t\t\tconst r = await testService.runTests({ tests: discovered, group: this.group });\n\t\t\treturn { completedAt: r.completedAt };\n\t\t}\n\n\t\treturn { completedAt: undefined };\n\t}\n\n\t/**\n\t * @override\n\t */\n\tpublic run(accessor: ServicesAccessor, files?: URI[]) {\n\t\tif (files?.length) {\n\t\t\treturn this._runByUris(accessor, files);\n\t\t}\n\n\t\tconst uriIdentity = accessor.get(IUriIdentityService);\n\t\tlet editor = accessor.get(ICodeEditorService).getActiveCodeEditor();\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\t\teditor = editor.getParentEditor();\n\t\t}\n\t\tconst position = editor?.getPosition();\n\t\tconst model = editor?.getModel();\n\t\tif (!position || !model || !('uri' in model)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst testService = accessor.get(ITestService);\n\n\t\t// Iterate through the entire collection and run any tests that are in the\n\t\t// uri. See #138007.\n\t\tconst queue = [testService.collection.rootIds];\n\t\tconst discovered: InternalTestItem[] = [];\n\t\twhile (queue.length) {\n\t\t\tfor (const id of queue.pop()!) {\n\t\t\t\tconst node = testService.collection.getNodeById(id)!;\n\t\t\t\tif (uriIdentity.extUri.isEqual(node.item.uri, model.uri)) {\n\t\t\t\t\tdiscovered.push(node);\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push(node.children);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (discovered.length) {\n\t\t\treturn testService.runTests({\n\t\t\t\ttests: discovered,\n\t\t\t\tgroup: this.group,\n\t\t\t});\n\t\t}\n\n\t\tif (editor) {\n\t\t\tMessageController.get(editor)?.showMessage(localize('noTestsInFile', \"No tests found in this file\"), position);\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n\nexport class RunCurrentFile extends ExecuteTestsInCurrentFile {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.RunCurrentFile,\n\t\t\ttitle: localize2('testing.runCurrentFile', 'Run Tests in Current File'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyCode.KeyF),\n\t\t\t},\n\t\t}, TestRunProfileBitset.Run);\n\t}\n}\n\nexport class DebugCurrentFile extends ExecuteTestsInCurrentFile {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugCurrentFile,\n\t\t\ttitle: localize2('testing.debugCurrentFile', 'Debug Tests in Current File'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyF),\n\t\t\t},\n\t\t}, TestRunProfileBitset.Debug);\n\t}\n}\n\nexport class CoverageCurrentFile extends ExecuteTestsInCurrentFile {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageCurrentFile,\n\t\t\ttitle: localize2('testing.coverageCurrentFile', 'Run Tests with Coverage in Current File'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: EditorContextKeys.editorTextFocus,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyF),\n\t\t\t},\n\t\t}, TestRunProfileBitset.Coverage);\n\t}\n}\n\nexport const discoverAndRunTests = async (\n\tcollection: IMainThreadTestCollection,\n\tprogress: IProgressService,\n\tids: ReadonlyArray<string>,\n\trunTests: (tests: ReadonlyArray<InternalTestItem>) => Promise<ITestResult>,\n): Promise<ITestResult | undefined> => {\n\tconst todo = Promise.all(ids.map(p => expandAndGetTestById(collection, p)));\n\tconst tests = (await showDiscoveringWhile(progress, todo)).filter(isDefined);\n\treturn tests.length ? await runTests(tests) : undefined;\n};\n\nabstract class RunOrDebugExtsByPath extends Action2 {\n\t/**\n\t * @override\n\t */\n\tpublic async run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst testService = accessor.get(ITestService);\n\t\tawait discoverAndRunTests(\n\t\t\taccessor.get(ITestService).collection,\n\t\t\taccessor.get(IProgressService),\n\t\t\t[...this.getTestExtIdsToRun(accessor, ...args)],\n\t\t\ttests => this.runTest(testService, tests),\n\t\t);\n\t}\n\n\tprotected abstract getTestExtIdsToRun(accessor: ServicesAccessor, ...args: unknown[]): Iterable<string>;\n\n\tprotected abstract runTest(service: ITestService, node: readonly InternalTestItem[]): Promise<ITestResult>;\n}\n\nabstract class RunOrDebugFailedTests extends RunOrDebugExtsByPath {\n\tconstructor(options: IAction2Options) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: hasAnyTestProvider,\n\t\t\t},\n\t\t});\n\t}\n\t/**\n\t * @inheritdoc\n\t */\n\tprotected getTestExtIdsToRun(accessor: ServicesAccessor) {\n\t\tconst { results } = accessor.get(ITestResultService);\n\t\tconst ids = new Set<string>();\n\t\tfor (let i = results.length - 1; i >= 0; i--) {\n\t\t\tconst resultSet = results[i];\n\t\t\tfor (const test of resultSet.tests) {\n\t\t\t\tif (isFailedState(test.ownComputedState)) {\n\t\t\t\t\tids.add(test.item.extId);\n\t\t\t\t} else {\n\t\t\t\t\tids.delete(test.item.extId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ids;\n\t}\n}\n\n\nabstract class RunOrDebugLastRun extends Action2 {\n\tconstructor(options: IAction2Options) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\thasAnyTestProvider,\n\t\t\t\t\tTestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\t\t),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected abstract getGroup(): TestRunProfileBitset;\n\n\tprotected getLastTestRunRequest(accessor: ServicesAccessor, runId?: string) {\n\t\tconst resultService = accessor.get(ITestResultService);\n\t\tconst lastResult = runId ? resultService.results.find(r => r.id === runId) : resultService.results[0];\n\t\treturn lastResult?.request;\n\t}\n\n\t/** @inheritdoc */\n\tpublic override async run(accessor: ServicesAccessor, runId?: string) {\n\t\tconst resultService = accessor.get(ITestResultService);\n\t\tconst lastResult = runId ? resultService.results.find(r => r.id === runId) : resultService.results[0];\n\t\tif (!lastResult) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst req = lastResult.request;\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst profileService = accessor.get(ITestProfileService);\n\t\tconst profileExists = (t: { controllerId: string; profileId: number }) =>\n\t\t\tprofileService.getControllerProfiles(t.controllerId).some(p => p.profileId === t.profileId);\n\n\t\tawait discoverAndRunTests(\n\t\t\ttestService.collection,\n\t\t\taccessor.get(IProgressService),\n\t\t\treq.targets.flatMap(t => t.testIds),\n\t\t\ttests => {\n\t\t\t\t// If we're requesting a re-run in the same group and have the same profiles\n\t\t\t\t// as were used before, then use those exactly. Otherwise guess naively.\n\t\t\t\tif (this.getGroup() & req.group && req.targets.every(profileExists)) {\n\t\t\t\t\treturn testService.runResolvedTests({\n\t\t\t\t\t\ttargets: req.targets,\n\t\t\t\t\t\tgroup: req.group,\n\t\t\t\t\t\texclude: req.exclude,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn testService.runTests({ tests, group: this.getGroup() });\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n}\n\nexport class ReRunFailedTests extends RunOrDebugFailedTests {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ReRunFailedTests,\n\t\t\ttitle: localize2('testing.reRunFailTests', 'Rerun Failed Tests'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyCode.KeyE),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected runTest(service: ITestService, internalTests: InternalTestItem[]): Promise<ITestResult> {\n\t\treturn service.runTests({\n\t\t\tgroup: TestRunProfileBitset.Run,\n\t\t\ttests: internalTests,\n\t\t});\n\t}\n}\n\nexport class DebugFailedTests extends RunOrDebugFailedTests {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugFailedTests,\n\t\t\ttitle: localize2('testing.debugFailTests', 'Debug Failed Tests'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyE),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected runTest(service: ITestService, internalTests: InternalTestItem[]): Promise<ITestResult> {\n\t\treturn service.runTests({\n\t\t\tgroup: TestRunProfileBitset.Debug,\n\t\t\ttests: internalTests,\n\t\t});\n\t}\n}\n\nexport class ReRunLastRun extends RunOrDebugLastRun {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ReRunLastRun,\n\t\t\ttitle: localize2('testing.reRunLastRun', 'Rerun Last Run'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyCode.KeyL),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected override getGroup(): TestRunProfileBitset {\n\t\treturn TestRunProfileBitset.Run;\n\t}\n}\n\nexport class DebugLastRun extends RunOrDebugLastRun {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugLastRun,\n\t\t\ttitle: localize2('testing.debugLastRun', 'Debug Last Run'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyL),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected override getGroup(): TestRunProfileBitset {\n\t\treturn TestRunProfileBitset.Debug;\n\t}\n}\n\nexport class CoverageLastRun extends RunOrDebugLastRun {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageLastRun,\n\t\t\ttitle: localize2('testing.coverageLastRun', 'Rerun Last Run with Coverage'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyL),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected override getGroup(): TestRunProfileBitset {\n\t\treturn TestRunProfileBitset.Coverage;\n\t}\n}\n\nabstract class RunOrDebugFailedFromLastRun extends Action2 {\n\tconstructor(options: IAction2Options) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\thasAnyTestProvider,\n\t\t\t\t\tTestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\t\t),\n\t\t\t},\n\t\t});\n\t}\n\n\tprotected abstract getGroup(): TestRunProfileBitset;\n\n\t/** @inheritdoc */\n\tpublic override async run(accessor: ServicesAccessor, runId?: string) {\n\t\tconst resultService = accessor.get(ITestResultService);\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst progressService = accessor.get(IProgressService);\n\n\t\tconst lastResult = runId ? resultService.results.find(r => r.id === runId) : resultService.results[0];\n\t\tif (!lastResult) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst failedTestIds = new Set<string>();\n\t\tfor (const test of lastResult.tests) {\n\t\t\tif (isFailedState(test.ownComputedState)) {\n\t\t\t\tfailedTestIds.add(test.item.extId);\n\t\t\t}\n\t\t}\n\n\t\tif (failedTestIds.size === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait discoverAndRunTests(\n\t\t\ttestService.collection,\n\t\t\tprogressService,\n\t\t\tArray.from(failedTestIds),\n\t\t\ttests => testService.runTests({ tests, group: this.getGroup() }),\n\t\t);\n\t}\n}\n\nexport class ReRunFailedFromLastRun extends RunOrDebugFailedFromLastRun {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ReRunFailedFromLastRun,\n\t\t\ttitle: localize2('testing.reRunFailedFromLastRun', 'Rerun Failed Tests from Last Run'),\n\t\t\tcategory,\n\t\t});\n\t}\n\n\tprotected override getGroup(): TestRunProfileBitset {\n\t\treturn TestRunProfileBitset.Run;\n\t}\n}\n\nexport class DebugFailedFromLastRun extends RunOrDebugFailedFromLastRun {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.DebugFailedFromLastRun,\n\t\t\ttitle: localize2('testing.debugFailedFromLastRun', 'Debug Failed Tests from Last Run'),\n\t\t\tcategory,\n\t\t});\n\t}\n\n\tprotected override getGroup(): TestRunProfileBitset {\n\t\treturn TestRunProfileBitset.Debug;\n\t}\n}\n\nexport class SearchForTestExtension extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.SearchForTestExtension,\n\t\t\ttitle: localize2('testing.searchForTestExtension', 'Search for Test Extension'),\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor) {\n\t\taccessor.get(IExtensionsWorkbenchService).openSearch('@category:\"testing\"');\n\t}\n}\n\nexport class OpenOutputPeek extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.OpenOutputPeek,\n\t\t\ttitle: localize2('testing.openOutputPeek', 'Peek Output'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyM),\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor) {\n\t\taccessor.get(ITestingPeekOpener).open();\n\t}\n}\n\nexport class ToggleInlineTestOutput extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ToggleInlineTestOutput,\n\t\t\ttitle: localize2('testing.toggleInlineTestOutput', 'Toggle Inline Test Output'),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyI),\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor) {\n\t\tconst testService = accessor.get(ITestService);\n\t\ttestService.showInlineOutput.value = !testService.showInlineOutput.value;\n\t}\n}\n\nconst refreshMenus = (whenIsRefreshing: boolean): IAction2Options['menu'] => [\n\t{\n\t\tid: MenuId.TestItem,\n\t\tgroup: 'inline',\n\t\torder: ActionOrder.Refresh,\n\t\twhen: ContextKeyExpr.and(\n\t\t\tTestingContextKeys.canRefreshTests.isEqualTo(true),\n\t\t\tTestingContextKeys.isRefreshingTests.isEqualTo(whenIsRefreshing),\n\t\t),\n\t},\n\t{\n\t\tid: MenuId.ViewTitle,\n\t\tgroup: 'navigation',\n\t\torder: ActionOrder.Refresh,\n\t\twhen: ContextKeyExpr.and(\n\t\t\tContextKeyExpr.equals('view', Testing.ExplorerViewId),\n\t\t\tTestingContextKeys.canRefreshTests.isEqualTo(true),\n\t\t\tTestingContextKeys.isRefreshingTests.isEqualTo(whenIsRefreshing),\n\t\t),\n\t},\n\t{\n\t\tid: MenuId.CommandPalette,\n\t\twhen: TestingContextKeys.canRefreshTests.isEqualTo(true),\n\t},\n];\n\nexport class RefreshTestsAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.RefreshTestsAction,\n\t\t\ttitle: localize2('testing.refreshTests', 'Refresh Tests'),\n\t\t\tcategory,\n\t\t\ticon: icons.testingRefreshTests,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyChord(KeyMod.CtrlCmd | KeyCode.Semicolon, KeyMod.CtrlCmd | KeyCode.KeyR),\n\t\t\t\twhen: TestingContextKeys.canRefreshTests.isEqualTo(true),\n\t\t\t},\n\t\t\tmenu: refreshMenus(false),\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor, ...elements: TestItemTreeElement[]) {\n\t\tconst testService = accessor.get(ITestService);\n\t\tconst progressService = accessor.get(IProgressService);\n\n\t\tconst controllerIds = distinct(elements.filter(isDefined).map(e => e.test.controllerId));\n\t\treturn progressService.withProgress({ location: Testing.ViewletId }, async () => {\n\t\t\tif (controllerIds.length) {\n\t\t\t\tawait Promise.all(controllerIds.map(id => testService.refreshTests(id)));\n\t\t\t} else {\n\t\t\t\tawait testService.refreshTests();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class CancelTestRefreshAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CancelTestRefreshAction,\n\t\t\ttitle: localize2('testing.cancelTestRefresh', 'Cancel Test Refresh'),\n\t\t\tcategory,\n\t\t\ticon: icons.testingCancelRefreshTests,\n\t\t\tmenu: refreshMenus(true),\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor) {\n\t\taccessor.get(ITestService).cancelRefreshTests();\n\t}\n}\n\nexport class CleareCoverage extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.CoverageClear,\n\t\t\ttitle: localize2('testing.clearCoverage', 'Clear Coverage'),\n\t\t\ticon: widgetClose,\n\t\t\tcategory,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: ActionOrder.Refresh,\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.CoverageViewId)\n\t\t\t}, {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.isTestCoverageOpen.isEqualTo(true),\n\t\t\t}]\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor) {\n\t\taccessor.get(ITestCoverageService).closeCoverage();\n\t}\n}\n\nexport class OpenCoverage extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.OpenCoverage,\n\t\t\ttitle: localize2('testing.openCoverage', 'Open Coverage'),\n\t\t\tcategory,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: TestingContextKeys.hasAnyResults.isEqualTo(true),\n\t\t\t}]\n\t\t});\n\t}\n\n\tpublic override run(accessor: ServicesAccessor) {\n\t\tconst results = accessor.get(ITestResultService).results;\n\t\tconst task = results.length && results[0].tasks.find(r => r.coverage);\n\t\tif (!task) {\n\t\t\tconst notificationService = accessor.get(INotificationService);\n\t\t\tnotificationService.info(localize('testing.noCoverage', 'No coverage information available on the last test run.'));\n\t\t\treturn;\n\t\t}\n\n\t\taccessor.get(ITestCoverageService).openCoverage(task, true);\n\t}\n}\n\nabstract class TestNavigationAction extends SymbolNavigationAction {\n\tprotected testService!: ITestService; // little hack...\n\tprotected uriIdentityService!: IUriIdentityService;\n\n\toverride runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ...args: unknown[]) {\n\t\tthis.testService = accessor.get(ITestService);\n\t\tthis.uriIdentityService = accessor.get(IUriIdentityService);\n\t\treturn super.runEditorCommand(accessor, editor, ...args);\n\t}\n\n\tprotected override _getAlternativeCommand(editor: IActiveCodeEditor): string {\n\t\treturn editor.getOption(EditorOption.gotoLocation).alternativeTestsCommand;\n\t}\n\tprotected override _getGoToPreference(editor: IActiveCodeEditor): GoToLocationValues {\n\t\treturn editor.getOption(EditorOption.gotoLocation).multipleTests || 'peek';\n\t}\n}\n\nabstract class GoToRelatedTestAction extends TestNavigationAction {\n\tprotected override async _getLocationModel(_languageFeaturesService: unknown, model: ITextModel, position: Position, token: CancellationToken): Promise<ReferencesModel | undefined> {\n\t\tconst tests = await this.testService.getTestsRelatedToCode(model.uri, position, token);\n\t\treturn new ReferencesModel(\n\t\t\ttests.map(t => t.item.uri && ({ uri: t.item.uri, range: t.item.range || new Range(1, 1, 1, 1) })).filter(isDefined),\n\t\t\tlocalize('relatedTests', 'Related Tests'),\n\t\t);\n\t}\n\n\tprotected override _getNoResultFoundMessage(): string {\n\t\treturn localize('noTestFound', 'No related tests found.');\n\t}\n}\n\nclass GoToRelatedTest extends GoToRelatedTestAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\topenToSide: false,\n\t\t\topenInPeek: false,\n\t\t\tmuteMessage: false\n\t\t}, {\n\t\t\tid: TestCommandId.GoToRelatedTest,\n\t\t\ttitle: localize2('testing.goToRelatedTest', 'Go to Related Test'),\n\t\t\tcategory,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\t// todo@connor4312: make this more explicit based on cursor position\n\t\t\t\tContextKeyExpr.not(TestingContextKeys.activeEditorHasTests.key), TestingContextKeys.canGoToRelatedTest,\n\t\t\t),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: 'testing',\n\t\t\t\torder: EditorContextOrder.GoToRelated,\n\t\t\t}]\n\t\t});\n\t}\n}\n\nclass PeekRelatedTest extends GoToRelatedTestAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\topenToSide: false,\n\t\t\topenInPeek: true,\n\t\t\tmuteMessage: false\n\t\t}, {\n\t\t\tid: TestCommandId.PeekRelatedTest,\n\t\t\ttitle: localize2('testing.peekToRelatedTest', 'Peek Related Test'),\n\t\t\tcategory,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tTestingContextKeys.canGoToRelatedTest,\n\t\t\t\t// todo@connor4312: make this more explicit based on cursor position\n\t\t\t\tContextKeyExpr.not(TestingContextKeys.activeEditorHasTests.key),\n\t\t\t\tPeekContext.notInPeekEditor,\n\t\t\t\tEditorContextKeys.isInEmbeddedEditor.toNegated()\n\t\t\t),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: 'testing',\n\t\t\t\torder: EditorContextOrder.PeekRelated,\n\t\t\t}]\n\t\t});\n\t}\n}\n\nabstract class GoToRelatedCodeAction extends TestNavigationAction {\n\tprotected override async _getLocationModel(_languageFeaturesService: unknown, model: ITextModel, position: Position, token: CancellationToken): Promise<ReferencesModel | undefined> {\n\t\tconst testsAtCursor = await getTestsAtCursor(this.testService, this.uriIdentityService, model.uri, position);\n\t\tconst code = await Promise.all(testsAtCursor.map(t => this.testService.getCodeRelatedToTest(t)));\n\t\treturn new ReferencesModel(code.flat(), localize('relatedCode', 'Related Code'));\n\t}\n\n\tprotected override _getNoResultFoundMessage(): string {\n\t\treturn localize('noRelatedCode', 'No related code found.');\n\t}\n}\n\nclass GoToRelatedCode extends GoToRelatedCodeAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\topenToSide: false,\n\t\t\topenInPeek: false,\n\t\t\tmuteMessage: false\n\t\t}, {\n\t\t\tid: TestCommandId.GoToRelatedCode,\n\t\t\ttitle: localize2('testing.goToRelatedCode', 'Go to Related Code'),\n\t\t\tcategory,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tTestingContextKeys.activeEditorHasTests,\n\t\t\t\tTestingContextKeys.canGoToRelatedCode,\n\t\t\t),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: 'testing',\n\t\t\t\torder: EditorContextOrder.GoToRelated,\n\t\t\t}]\n\t\t});\n\t}\n}\n\nclass PeekRelatedCode extends GoToRelatedCodeAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\topenToSide: false,\n\t\t\topenInPeek: true,\n\t\t\tmuteMessage: false\n\t\t}, {\n\t\t\tid: TestCommandId.PeekRelatedCode,\n\t\t\ttitle: localize2('testing.peekToRelatedCode', 'Peek Related Code'),\n\t\t\tcategory,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tTestingContextKeys.activeEditorHasTests,\n\t\t\t\tTestingContextKeys.canGoToRelatedCode,\n\t\t\t\tPeekContext.notInPeekEditor,\n\t\t\t\tEditorContextKeys.isInEmbeddedEditor.toNegated()\n\t\t\t),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: 'testing',\n\t\t\t\torder: EditorContextOrder.PeekRelated,\n\t\t\t}]\n\t\t});\n\t}\n}\n\nexport class ToggleResultsViewLayoutAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: TestCommandId.ToggleResultsViewLayoutAction,\n\t\t\ttitle: localize2('testing.toggleResultsViewLayout', 'Toggle Tree Position'),\n\t\t\tcategory,\n\t\t\ticon: Codicon.arrowSwap,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\torder: ActionOrder.DisplayMode,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: ContextKeyExpr.equals('view', Testing.ResultsViewId)\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor) {\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst currentLayout = getTestingConfiguration(configurationService, TestingConfigKeys.ResultsViewLayout);\n\t\tconst newLayout = currentLayout === TestingResultsViewLayout.TreeLeft ? TestingResultsViewLayout.TreeRight : TestingResultsViewLayout.TreeLeft;\n\n\t\tawait configurationService.updateValue(TestingConfigKeys.ResultsViewLayout, newLayout);\n\t}\n}\n\nexport const allTestActions = [\n\tCancelTestRefreshAction,\n\tCancelTestRunAction,\n\tCleareCoverage,\n\tClearTestResultsAction,\n\tCollapseAllAction,\n\tConfigureTestProfilesAction,\n\tContinuousRunTestAction,\n\tContinuousRunUsingProfileTestAction,\n\tCoverageAction,\n\tCoverageAllAction,\n\tCoverageAtCursor,\n\tCoverageCurrentFile,\n\tCoverageLastRun,\n\tCoverageSelectedAction,\n\tCoverageTestsUnderUri,\n\tDebugAction,\n\tDebugAllAction,\n\tDebugAtCursor,\n\tDebugCurrentFile,\n\tDebugFailedTests,\n\tDebugLastRun,\n\tDebugSelectedAction,\n\tDebugTestsUnderUri,\n\tGetExplorerSelection,\n\tGetSelectedProfiles,\n\tGoToRelatedCode,\n\tGoToRelatedTest,\n\tGoToTest,\n\tHideTestAction,\n\tOpenCoverage,\n\tOpenOutputPeek,\n\tPeekRelatedCode,\n\tPeekRelatedTest,\n\tRefreshTestsAction,\n\tReRunFailedTests,\n\tReRunLastRun,\n\tRunAction,\n\tRunAllAction,\n\tRunAtCursor,\n\tRunCurrentFile,\n\tRunSelectedAction,\n\tRunTestsUnderUri,\n\tRunUsingProfileAction,\n\tSearchForTestExtension,\n\tSelectDefaultTestProfiles,\n\tShowMostRecentOutputAction,\n\tStartContinuousRunAction,\n\tStopContinuousRunAction,\n\tTestingSortByDurationAction,\n\tTestingSortByLocationAction,\n\tTestingSortByStatusAction,\n\tTestingViewAsListAction,\n\tTestingViewAsTreeAction,\n\tToggleInlineTestOutput,\n\tToggleResultsViewLayoutAction,\n\tUnhideAllTestsAction,\n\tUnhideTestAction,\n\tReRunFailedFromLastRun,\n\tDebugFailedFromLastRun,\n];\n"]}