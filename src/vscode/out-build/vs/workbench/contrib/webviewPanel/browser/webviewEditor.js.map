{"version":3,"sources":["vs/workbench/contrib/webviewPanel/browser/webviewEditor.ts"],"names":[],"mappings":"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","file":"webviewEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore, IDisposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, IScopedContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IEditorOptions } from '../../../../platform/editor/common/editor.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { EditorPane } from '../../../browser/parts/editor/editorPane.js';\nimport { IEditorOpenContext } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IOverlayWebview } from '../../webview/browser/webview.js';\nimport { WebviewWindowDragMonitor } from '../../webview/browser/webviewWindowDragMonitor.js';\nimport { WebviewInput } from './webviewEditorInput.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IWorkbenchLayoutService, Parts } from '../../../services/layout/browser/layoutService.js';\n\n/**\n * Tracks the id of the actively focused webview.\n */\nexport const CONTEXT_ACTIVE_WEBVIEW_PANEL_ID = new RawContextKey<string>('activeWebviewPanelId', '', {\n\ttype: 'string',\n\tdescription: nls.localize('context.activeWebviewId', \"The viewType of the currently active webview panel.\"),\n});\n\nexport class WebviewEditor extends EditorPane {\n\n\tpublic static readonly ID = 'WebviewEditor';\n\n\tprivate _element?: HTMLElement;\n\tprivate _dimension?: DOM.Dimension;\n\tprivate _visible = false;\n\tprivate _isDisposed = false;\n\n\tprivate readonly _webviewVisibleDisposables = this._register(new DisposableStore());\n\tprivate readonly _onFocusWindowHandler = this._register(new MutableDisposable());\n\n\tprivate readonly _onDidFocusWebview = this._register(new Emitter<void>());\n\tpublic override get onDidFocus(): Event<any> { return this._onDidFocusWebview.event; }\n\n\tprivate readonly _scopedContextKeyService = this._register(new MutableDisposable<IScopedContextKeyService>());\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IEditorGroupsService private readonly _editorGroupsService: IEditorGroupsService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IWorkbenchLayoutService private readonly _workbenchLayoutService: IWorkbenchLayoutService,\n\t\t@IHostService private readonly _hostService: IHostService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper(WebviewEditor.ID, group, telemetryService, themeService, storageService);\n\n\t\tconst part = _editorGroupsService.getPart(group);\n\t\tthis._register(Event.any(part.onDidScroll, part.onDidAddGroup, part.onDidRemoveGroup, part.onDidMoveGroup)(() => {\n\t\t\tif (this.webview && this._visible) {\n\t\t\t\tthis.synchronizeWebviewContainerDimensions(this.webview);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate get webview(): IOverlayWebview | undefined {\n\t\treturn this.input instanceof WebviewInput ? this.input.webview : undefined;\n\t}\n\n\toverride get scopedContextKeyService(): IContextKeyService | undefined {\n\t\treturn this._scopedContextKeyService.value;\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tconst element = document.createElement('div');\n\t\tthis._element = element;\n\t\tthis._element.id = `webview-editor-element-${generateUuid()}`;\n\t\tparent.appendChild(element);\n\n\t\tthis._scopedContextKeyService.value = this._register(this._contextKeyService.createScoped(element));\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._isDisposed = true;\n\n\t\tthis._element?.remove();\n\t\tthis._element = undefined;\n\n\t\tsuper.dispose();\n\t}\n\n\tpublic override layout(dimension: DOM.Dimension): void {\n\t\tthis._dimension = dimension;\n\t\tif (this.webview && this._visible) {\n\t\t\tthis.synchronizeWebviewContainerDimensions(this.webview, dimension);\n\t\t}\n\t}\n\n\tpublic override focus(): void {\n\t\tsuper.focus();\n\t\tif (!this._onFocusWindowHandler.value && !isWeb) {\n\t\t\t// Make sure we restore focus when switching back to a VS Code window\n\t\t\tthis._onFocusWindowHandler.value = this._hostService.onDidChangeFocus(focused => {\n\t\t\t\tif (focused && this._editorService.activeEditorPane === this && this._workbenchLayoutService.hasFocus(Parts.EDITOR_PART)) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.webview?.focus();\n\t}\n\n\tprotected override setEditorVisible(visible: boolean): void {\n\t\tthis._visible = visible;\n\t\tif (this.input instanceof WebviewInput && this.webview) {\n\t\t\tif (visible) {\n\t\t\t\tthis.claimWebview(this.input);\n\t\t\t} else {\n\t\t\t\tthis.webview.release(this);\n\t\t\t}\n\t\t}\n\t\tsuper.setEditorVisible(visible);\n\t}\n\n\tpublic override clearInput() {\n\t\tif (this.webview) {\n\t\t\tthis.webview.release(this);\n\t\t\tthis._webviewVisibleDisposables.clear();\n\t\t}\n\n\t\tsuper.clearInput();\n\t}\n\n\tpublic override async setInput(input: EditorInput, options: IEditorOptions, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tif (this.input && input.matches(this.input)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst alreadyOwnsWebview = input instanceof WebviewInput && input.webview === this.webview;\n\t\tif (this.webview && !alreadyOwnsWebview) {\n\t\t\tthis.webview.release(this);\n\t\t}\n\n\t\tawait super.setInput(input, options, context, token);\n\t\tawait input.resolve();\n\n\t\tif (token.isCancellationRequested || this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (input instanceof WebviewInput) {\n\t\t\tinput.updateGroup(this.group.id);\n\n\t\t\tif (!alreadyOwnsWebview) {\n\t\t\t\tthis.claimWebview(input);\n\t\t\t}\n\t\t\tif (this._dimension) {\n\t\t\t\tthis.layout(this._dimension);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate claimWebview(input: WebviewInput): void {\n\t\tinput.claim(this, this.window, this.scopedContextKeyService);\n\n\t\tif (this._element) {\n\t\t\tthis._element.setAttribute('aria-flowto', input.webview.container.id);\n\t\t\tDOM.setParentFlowTo(input.webview.container, this._element);\n\t\t}\n\n\t\tthis._webviewVisibleDisposables.clear();\n\n\t\t// Webviews are not part of the normal editor dom, so we have to register our own drag and drop handler on them.\n\t\tthis._webviewVisibleDisposables.add(this._editorGroupsService.createEditorDropTarget(input.webview.container, {\n\t\t\tcontainsGroup: (group) => this.group.id === group.id\n\t\t}));\n\n\t\tthis._webviewVisibleDisposables.add(new WebviewWindowDragMonitor(this.window, () => this.webview));\n\n\t\tthis.synchronizeWebviewContainerDimensions(input.webview);\n\t\tthis._webviewVisibleDisposables.add(this.trackFocus(input.webview));\n\t}\n\n\tprivate synchronizeWebviewContainerDimensions(webview: IOverlayWebview, dimension?: DOM.Dimension) {\n\t\tif (!this._element?.isConnected) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootContainer = this._workbenchLayoutService.getContainer(this.window, Parts.EDITOR_PART);\n\t\twebview.layoutWebviewOverElement(this._element.parentElement!, dimension, rootContainer);\n\t}\n\n\tprivate trackFocus(webview: IOverlayWebview): IDisposable {\n\t\tconst store = new DisposableStore();\n\n\t\t// Track focus in webview content\n\t\tconst webviewContentFocusTracker = DOM.trackFocus(webview.container);\n\t\tstore.add(webviewContentFocusTracker);\n\t\tstore.add(webviewContentFocusTracker.onDidFocus(() => this._onDidFocusWebview.fire()));\n\n\t\t// Track focus in webview element\n\t\tstore.add(webview.onDidFocus(() => this._onDidFocusWebview.fire()));\n\n\t\treturn store;\n\t}\n}\n"]}