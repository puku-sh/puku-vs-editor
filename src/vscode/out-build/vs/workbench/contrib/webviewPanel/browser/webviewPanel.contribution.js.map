{"version":3,"sources":["vs/workbench/contrib/webviewPanel/browser/webviewPanel.contribution.ts"],"names":[],"mappings":"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","file":"webviewPanel.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { EditorPaneDescriptor, IEditorPaneRegistry } from '../../../browser/editor.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { EditorExtensions, IEditorFactoryRegistry } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { HideWebViewEditorFindCommand, ReloadWebviewAction, ShowWebViewEditorFindWidgetAction, WebViewEditorFindNextCommand, WebViewEditorFindPreviousCommand } from './webviewCommands.js';\nimport { WebviewEditor } from './webviewEditor.js';\nimport { WebviewInput } from './webviewEditorInput.js';\nimport { WebviewEditorInputSerializer } from './webviewEditorInputSerializer.js';\nimport { IWebviewWorkbenchService, WebviewEditorService } from './webviewWorkbenchService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\n\n(Registry.as<IEditorPaneRegistry>(EditorExtensions.EditorPane)).registerEditorPane(EditorPaneDescriptor.create(\n\tWebviewEditor,\n\tWebviewEditor.ID,\n\tlocalize('webview.editor.label', \"webview editor\")),\n\t[new SyncDescriptor(WebviewInput)]);\n\nclass WebviewPanelContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.webviewPanel';\n\n\tconstructor(\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(editorService.onWillOpenEditor(e => {\n\t\t\tconst group = editorGroupService.getGroup(e.groupId);\n\t\t\tif (group) {\n\t\t\t\tthis.onEditorOpening(e.editor, group);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate onEditorOpening(\n\t\teditor: EditorInput,\n\t\tgroup: IEditorGroup\n\t): void {\n\t\tif (!(editor instanceof WebviewInput) || editor.typeId !== WebviewInput.typeId) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (group.contains(editor)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet previousGroup: IEditorGroup | undefined;\n\t\tconst groups = this.editorGroupService.groups;\n\t\tfor (const group of groups) {\n\t\t\tif (group.contains(editor)) {\n\t\t\t\tpreviousGroup = group;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!previousGroup) {\n\t\t\treturn;\n\t\t}\n\n\t\tpreviousGroup.closeEditor(editor);\n\t}\n}\n\nregisterWorkbenchContribution2(WebviewPanelContribution.ID, WebviewPanelContribution, WorkbenchPhase.BlockStartup);\n\nRegistry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).registerEditorSerializer(\n\tWebviewEditorInputSerializer.ID,\n\tWebviewEditorInputSerializer);\n\nregisterSingleton(IWebviewWorkbenchService, WebviewEditorService, InstantiationType.Delayed);\n\nregisterAction2(ShowWebViewEditorFindWidgetAction);\nregisterAction2(HideWebViewEditorFindCommand);\nregisterAction2(WebViewEditorFindNextCommand);\nregisterAction2(WebViewEditorFindPreviousCommand);\nregisterAction2(ReloadWebviewAction);\n"]}