{"version":3,"sources":["vs/workbench/contrib/relauncher/browser/relauncher.contribution.ts"],"names":[],"mappings":"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","file":"relauncher.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable, dispose, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { isLinux, isMacintosh, isNative } from '../../../../base/common/platform.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { localize } from '../../../../nls.js';\nimport { ConfigurationTarget, IConfigurationChangeEvent, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IUserDataSyncEnablementService, IUserDataSyncService, SyncStatus } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { IWindowsConfiguration, IWindowSettings, MenuSettings, MenuStyleConfiguration, TitleBarSetting, TitlebarStyle } from '../../../../platform/window/common/window.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from '../../../common/contributions.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IUserDataSyncWorkbenchService } from '../../../services/userDataSync/common/userDataSync.js';\n\ninterface IConfiguration extends IWindowsConfiguration {\n\tupdate?: { mode?: string };\n\tdebug?: { console?: { wordWrap?: boolean } };\n\teditor?: { accessibilitySupport?: 'on' | 'off' | 'auto' };\n\tsecurity?: { workspace?: { trust?: { enabled?: boolean } }; restrictUNCAccess?: boolean };\n\twindow: IWindowSettings;\n\tworkbench?: { enableExperiments?: boolean };\n\ttelemetry?: { feedback?: { enabled?: boolean } };\n\tchat?: { extensionUnification?: { enabled?: boolean } };\n\t_extensionsGallery?: { enablePPE?: boolean };\n\taccessibility?: { verbosity?: { debug?: boolean } };\n}\n\nexport class SettingsChangeRelauncher extends Disposable implements IWorkbenchContribution {\n\n\tprivate static SETTINGS = [\n\t\tTitleBarSetting.TITLE_BAR_STYLE,\n\t\tMenuSettings.MenuStyle,\n\t\t'window.nativeTabs',\n\t\t'window.nativeFullScreen',\n\t\t'window.clickThroughInactive',\n\t\t'window.controlsStyle',\n\t\t'update.mode',\n\t\t'editor.accessibilitySupport',\n\t\t'security.workspace.trust.enabled',\n\t\t'workbench.enableExperiments',\n\t\t'_extensionsGallery.enablePPE',\n\t\t'security.restrictUNCAccess',\n\t\t'accessibility.verbosity.debug',\n\t\t'telemetry.feedback.enabled',\n\t\t'chat.extensionUnification.enabled'\n\t];\n\n\tprivate readonly titleBarStyle = new ChangeObserver<TitlebarStyle>('string');\n\tprivate readonly menuStyle = new ChangeObserver<MenuStyleConfiguration>('string');\n\tprivate readonly nativeTabs = new ChangeObserver('boolean');\n\tprivate readonly nativeFullScreen = new ChangeObserver('boolean');\n\tprivate readonly clickThroughInactive = new ChangeObserver('boolean');\n\tprivate readonly controlsStyle = new ChangeObserver('string');\n\tprivate readonly updateMode = new ChangeObserver('string');\n\tprivate accessibilitySupport: 'on' | 'off' | 'auto' | undefined;\n\tprivate readonly workspaceTrustEnabled = new ChangeObserver('boolean');\n\tprivate readonly experimentsEnabled = new ChangeObserver('boolean');\n\tprivate readonly enablePPEExtensionsGallery = new ChangeObserver('boolean');\n\tprivate readonly restrictUNCAccess = new ChangeObserver('boolean');\n\tprivate readonly accessibilityVerbosityDebug = new ChangeObserver('boolean');\n\tprivate readonly telemetryFeedbackEnabled = new ChangeObserver('boolean');\n\tprivate readonly extensionUnificationEnabled = new ChangeObserver('boolean');\n\n\tconstructor(\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IUserDataSyncService private readonly userDataSyncService: IUserDataSyncService,\n\t\t@IUserDataSyncEnablementService private readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IUserDataSyncWorkbenchService userDataSyncWorkbenchService: IUserDataSyncWorkbenchService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IDialogService private readonly dialogService: IDialogService\n\t) {\n\t\tsuper();\n\n\t\tthis.update(false);\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationChange(e)));\n\t\tthis._register(userDataSyncWorkbenchService.onDidTurnOnSync(e => this.update(true)));\n\t}\n\n\tprivate onConfigurationChange(e: IConfigurationChangeEvent): void {\n\t\tif (e && !SettingsChangeRelauncher.SETTINGS.some(key => e.affectsConfiguration(key))) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if turning on sync is in progress\n\t\tif (this.isTurningOnSyncInProgress()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.update(e.source !== ConfigurationTarget.DEFAULT /* do not ask to relaunch if defaults changed */);\n\t}\n\n\tprivate isTurningOnSyncInProgress(): boolean {\n\t\treturn !this.userDataSyncEnablementService.isEnabled() && this.userDataSyncService.status === SyncStatus.Syncing;\n\t}\n\n\tprivate update(askToRelaunch: boolean): void {\n\t\tlet changed = false;\n\n\t\tfunction processChanged(didChange: boolean) {\n\t\t\tchanged = changed || didChange;\n\t\t}\n\n\t\tconst config = this.configurationService.getValue<IConfiguration>();\n\t\tif (isNative) {\n\n\t\t\t// Titlebar style\n\t\t\tprocessChanged((config.window.titleBarStyle === TitlebarStyle.NATIVE || config.window.titleBarStyle === TitlebarStyle.CUSTOM) && this.titleBarStyle.handleChange(config.window?.titleBarStyle));\n\n\t\t\t// Windows/Linux: Menu style\n\t\t\tprocessChanged(!isMacintosh && this.menuStyle.handleChange(config.window?.menuStyle));\n\n\t\t\t// macOS: Native tabs\n\t\t\tprocessChanged(isMacintosh && this.nativeTabs.handleChange(config.window?.nativeTabs));\n\n\t\t\t// macOS: Native fullscreen\n\t\t\tprocessChanged(isMacintosh && this.nativeFullScreen.handleChange(config.window?.nativeFullScreen));\n\n\t\t\t// macOS: Click through (accept first mouse)\n\t\t\tprocessChanged(isMacintosh && this.clickThroughInactive.handleChange(config.window?.clickThroughInactive));\n\n\t\t\t// Windows/Linux: Window controls style\n\t\t\tprocessChanged(!isMacintosh && this.controlsStyle.handleChange(config.window?.controlsStyle));\n\n\t\t\t// Update mode\n\t\t\tprocessChanged(this.updateMode.handleChange(config.update?.mode));\n\n\t\t\t// On linux turning on accessibility support will also pass this flag to the chrome renderer, thus a restart is required\n\t\t\tif (isLinux && typeof config.editor?.accessibilitySupport === 'string' && config.editor.accessibilitySupport !== this.accessibilitySupport) {\n\t\t\t\tthis.accessibilitySupport = config.editor.accessibilitySupport;\n\t\t\t\tif (this.accessibilitySupport === 'on') {\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Workspace trust\n\t\t\tprocessChanged(this.workspaceTrustEnabled.handleChange(config?.security?.workspace?.trust?.enabled));\n\n\t\t\t// UNC host access restrictions\n\t\t\tprocessChanged(this.restrictUNCAccess.handleChange(config?.security?.restrictUNCAccess));\n\n\t\t\t// Debug accessibility verbosity\n\t\t\tprocessChanged(this.accessibilityVerbosityDebug.handleChange(config?.accessibility?.verbosity?.debug));\n\t\t}\n\n\t\t// Experiments\n\t\tprocessChanged(this.experimentsEnabled.handleChange(config.workbench?.enableExperiments));\n\n\t\t// Profiles\n\t\tprocessChanged(this.productService.quality !== 'stable' && this.enablePPEExtensionsGallery.handleChange(config._extensionsGallery?.enablePPE));\n\n\t\t// Enable Feedback\n\t\tprocessChanged(this.telemetryFeedbackEnabled.handleChange(config.telemetry?.feedback?.enabled));\n\n\t\t// Extension Unification (only when turning on)\n\t\tprocessChanged(this.extensionUnificationEnabled.handleChange(config.chat?.extensionUnification?.enabled) && config.chat?.extensionUnification?.enabled === true);\n\n\t\tif (askToRelaunch && changed && this.hostService.hasFocus) {\n\t\t\tthis.doConfirm(\n\t\t\t\tisNative ?\n\t\t\t\t\tlocalize('relaunchSettingMessage', \"A setting has changed that requires a restart to take effect.\") :\n\t\t\t\t\tlocalize('relaunchSettingMessageWeb', \"A setting has changed that requires a reload to take effect.\"),\n\t\t\t\tisNative ?\n\t\t\t\t\tlocalize('relaunchSettingDetail', \"Press the restart button to restart {0} and enable the setting.\", this.productService.nameLong) :\n\t\t\t\t\tlocalize('relaunchSettingDetailWeb', \"Press the reload button to reload {0} and enable the setting.\", this.productService.nameLong),\n\t\t\t\tisNative ?\n\t\t\t\t\tlocalize({ key: 'restart', comment: ['&& denotes a mnemonic'] }, \"&&Restart\") :\n\t\t\t\t\tlocalize({ key: 'restartWeb', comment: ['&& denotes a mnemonic'] }, \"&&Reload\"),\n\t\t\t\t() => this.hostService.restart()\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate async doConfirm(message: string, detail: string, primaryButton: string, confirmedFn: () => void): Promise<void> {\n\t\tconst { confirmed } = await this.dialogService.confirm({ message, detail, primaryButton });\n\t\tif (confirmed) {\n\t\t\tconfirmedFn();\n\t\t}\n\t}\n}\n\ninterface TypeNameToType {\n\treadonly boolean: boolean;\n\treadonly string: string;\n}\n\nclass ChangeObserver<T> {\n\n\tstatic create<TTypeName extends 'boolean' | 'string'>(typeName: TTypeName): ChangeObserver<TypeNameToType[TTypeName]> {\n\t\treturn new ChangeObserver(typeName);\n\t}\n\n\tconstructor(private readonly typeName: string) { }\n\n\tprivate lastValue: T | undefined = undefined;\n\n\t/**\n\t * Returns if there was a change compared to the last value\n\t */\n\thandleChange(value: T | undefined): boolean {\n\t\tif (typeof value === this.typeName && value !== this.lastValue) {\n\t\t\tthis.lastValue = value;\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nexport class WorkspaceChangeExtHostRelauncher extends Disposable implements IWorkbenchContribution {\n\n\tprivate firstFolderResource?: URI;\n\tprivate extensionHostRestarter: RunOnceScheduler;\n\n\tprivate onDidChangeWorkspaceFoldersUnbind: IDisposable | undefined;\n\n\tconstructor(\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService\n\t) {\n\t\tsuper();\n\n\t\tthis.extensionHostRestarter = this._register(new RunOnceScheduler(async () => {\n\t\t\tif (!!environmentService.extensionTestsLocationURI) {\n\t\t\t\treturn; // no restart when in tests: see https://github.com/microsoft/vscode/issues/66936\n\t\t\t}\n\n\t\t\tif (environmentService.remoteAuthority) {\n\t\t\t\thostService.reload(); // TODO@aeschli, workaround\n\t\t\t} else if (isNative) {\n\t\t\t\tconst stopped = await extensionService.stopExtensionHosts(localize('restartExtensionHost.reason', \"Changing workspace folders\"));\n\t\t\t\tif (stopped) {\n\t\t\t\t\textensionService.startExtensionHosts();\n\t\t\t\t}\n\t\t\t}\n\t\t}, 10));\n\n\t\tthis.contextService.getCompleteWorkspace()\n\t\t\t.then(workspace => {\n\t\t\t\tthis.firstFolderResource = workspace.folders.length > 0 ? workspace.folders[0].uri : undefined;\n\t\t\t\tthis.handleWorkbenchState();\n\t\t\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => setTimeout(() => this.handleWorkbenchState())));\n\t\t\t});\n\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.onDidChangeWorkspaceFoldersUnbind?.dispose();\n\t\t}));\n\t}\n\n\tprivate handleWorkbenchState(): void {\n\n\t\t// React to folder changes when we are in workspace state\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\n\t\t\t// Update our known first folder path if we entered workspace\n\t\t\tconst workspace = this.contextService.getWorkspace();\n\t\t\tthis.firstFolderResource = workspace.folders.length > 0 ? workspace.folders[0].uri : undefined;\n\n\t\t\t// Install workspace folder listener\n\t\t\tif (!this.onDidChangeWorkspaceFoldersUnbind) {\n\t\t\t\tthis.onDidChangeWorkspaceFoldersUnbind = this.contextService.onDidChangeWorkspaceFolders(() => this.onDidChangeWorkspaceFolders());\n\t\t\t}\n\t\t}\n\n\t\t// Ignore the workspace folder changes in EMPTY or FOLDER state\n\t\telse {\n\t\t\tdispose(this.onDidChangeWorkspaceFoldersUnbind);\n\t\t\tthis.onDidChangeWorkspaceFoldersUnbind = undefined;\n\t\t}\n\t}\n\n\tprivate onDidChangeWorkspaceFolders(): void {\n\t\tconst workspace = this.contextService.getWorkspace();\n\n\t\t// Restart extension host if first root folder changed (impact on deprecated workspace.rootPath API)\n\t\tconst newFirstFolderResource = workspace.folders.length > 0 ? workspace.folders[0].uri : undefined;\n\t\tif (!isEqual(this.firstFolderResource, newFirstFolderResource)) {\n\t\t\tthis.firstFolderResource = newFirstFolderResource;\n\n\t\t\tthis.extensionHostRestarter.schedule(); // buffer calls to extension host restart\n\t\t}\n\t}\n}\n\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(SettingsChangeRelauncher, LifecyclePhase.Restored);\nworkbenchRegistry.registerWorkbenchContribution(WorkspaceChangeExtHostRelauncher, LifecyclePhase.Restored);\n"]}