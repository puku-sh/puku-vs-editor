{"version":3,"sources":["vs/workbench/contrib/timeline/browser/timelinePane.ts"],"names":[],"mappings":"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","file":"timelinePane.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/timelinePane.css';\nimport { localize, localize2 } from '../../../../nls.js';\nimport * as DOM from '../../../../base/browser/dom.js';\nimport * as css from '../../../../base/browser/cssValue.js';\nimport { IAction, ActionRunner } from '../../../../base/common/actions.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { fromNow } from '../../../../base/common/date.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { FuzzyScore, createMatches } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { DisposableStore, IDisposable, Disposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { IListVirtualDelegate, IIdentityProvider, IKeyboardNavigationLabelProvider } from '../../../../base/browser/ui/list/list.js';\nimport { ITreeNode, ITreeRenderer, ITreeContextMenuEvent, ITreeElement } from '../../../../base/browser/ui/tree/tree.js';\nimport { ViewPane, IViewPaneOptions } from '../../../browser/parts/views/viewPane.js';\nimport { WorkbenchObjectTree } from '../../../../platform/list/browser/listService.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey, IContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService, IConfigurationChangeEvent } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITimelineService, TimelineChangeEvent, TimelineItem, TimelineOptions, TimelineProvidersChangeEvent, TimelineRequest, Timeline } from '../common/timeline.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { SideBySideEditor, EditorResourceAccessor } from '../../../common/editor.js';\nimport { ICommandService, CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../common/views.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ActionBar, IActionViewItemProvider } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { getContextMenuActions, createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId, registerAction2, Action2, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { isDark } from '../../../../platform/theme/common/theme.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { API_OPEN_DIFF_EDITOR_COMMAND_ID, API_OPEN_EDITOR_COMMAND_ID } from '../../../browser/parts/editor/editorCommands.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { isString } from '../../../../base/common/types.js';\nimport { renderAsPlaintext } from '../../../../base/browser/markdownRenderer.js';\nimport { IHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { AriaRole } from '../../../../base/browser/ui/aria/aria.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { IHoverService, WorkbenchHoverDelegate } from '../../../../platform/hover/browser/hover.js';\nimport { HoverPosition } from '../../../../base/browser/ui/hover/hoverWidget.js';\n\nconst ItemHeight = 22;\n\ntype TreeElement = TimelineItem | LoadMoreCommand;\n\nfunction isLoadMoreCommand(item: TreeElement | undefined): item is LoadMoreCommand {\n\treturn item instanceof LoadMoreCommand;\n}\n\nfunction isTimelineItem(item: TreeElement | undefined): item is TimelineItem {\n\treturn !!item && !item.handle.startsWith('vscode-command:');\n}\n\nfunction updateRelativeTime(item: TimelineItem, lastRelativeTime: string | undefined): string | undefined {\n\titem.relativeTime = isTimelineItem(item) ? fromNow(item.timestamp) : undefined;\n\titem.relativeTimeFullWord = isTimelineItem(item) ? fromNow(item.timestamp, false, true) : undefined;\n\tif (lastRelativeTime === undefined || item.relativeTime !== lastRelativeTime) {\n\t\tlastRelativeTime = item.relativeTime;\n\t\titem.hideRelativeTime = false;\n\t} else {\n\t\titem.hideRelativeTime = true;\n\t}\n\n\treturn lastRelativeTime;\n}\n\ninterface TimelineActionContext {\n\turi: URI | undefined;\n\titem: TreeElement;\n}\n\nclass TimelineAggregate {\n\treadonly items: TimelineItem[];\n\treadonly source: string;\n\n\tlastRenderedIndex: number;\n\n\tconstructor(timeline: Timeline) {\n\t\tthis.source = timeline.source;\n\t\tthis.items = timeline.items;\n\t\tthis._cursor = timeline.paging?.cursor;\n\t\tthis.lastRenderedIndex = -1;\n\t}\n\n\tprivate _cursor?: string;\n\tget cursor(): string | undefined {\n\t\treturn this._cursor;\n\t}\n\n\tget more(): boolean {\n\t\treturn this._cursor !== undefined;\n\t}\n\n\tget newest(): TimelineItem | undefined {\n\t\treturn this.items[0];\n\t}\n\n\tget oldest(): TimelineItem | undefined {\n\t\treturn this.items[this.items.length - 1];\n\t}\n\n\tadd(timeline: Timeline, options: TimelineOptions) {\n\t\tlet updated = false;\n\n\t\tif (timeline.items.length !== 0 && this.items.length !== 0) {\n\t\t\tupdated = true;\n\n\t\t\tconst ids = new Set();\n\t\t\tconst timestamps = new Set();\n\n\t\t\tfor (const item of timeline.items) {\n\t\t\t\tif (item.id === undefined) {\n\t\t\t\t\ttimestamps.add(item.timestamp);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tids.add(item.id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove any duplicate items\n\t\t\tlet i = this.items.length;\n\t\t\tlet item;\n\t\t\twhile (i--) {\n\t\t\t\titem = this.items[i];\n\t\t\t\tif ((item.id !== undefined && ids.has(item.id)) || timestamps.has(item.timestamp)) {\n\t\t\t\t\tthis.items.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((timeline.items[timeline.items.length - 1]?.timestamp ?? 0) >= (this.newest?.timestamp ?? 0)) {\n\t\t\t\tthis.items.splice(0, 0, ...timeline.items);\n\t\t\t} else {\n\t\t\t\tthis.items.push(...timeline.items);\n\t\t\t}\n\t\t} else if (timeline.items.length !== 0) {\n\t\t\tupdated = true;\n\n\t\t\tthis.items.push(...timeline.items);\n\t\t}\n\n\t\t// If we are not requesting more recent items than we have, then update the cursor\n\t\tif (options.cursor !== undefined || typeof options.limit !== 'object') {\n\t\t\tthis._cursor = timeline.paging?.cursor;\n\t\t}\n\n\t\tif (updated) {\n\t\t\tthis.items.sort(\n\t\t\t\t(a, b) =>\n\t\t\t\t\t(b.timestamp - a.timestamp) ||\n\t\t\t\t\t(a.source === undefined\n\t\t\t\t\t\t? b.source === undefined ? 0 : 1\n\t\t\t\t\t\t: b.source === undefined ? -1 : b.source.localeCompare(a.source, undefined, { numeric: true, sensitivity: 'base' }))\n\t\t\t);\n\t\t}\n\n\t\treturn updated;\n\t}\n\n\tprivate _stale = false;\n\tget stale() {\n\t\treturn this._stale;\n\t}\n\n\tprivate _requiresReset = false;\n\tget requiresReset(): boolean {\n\t\treturn this._requiresReset;\n\t}\n\n\tinvalidate(requiresReset: boolean) {\n\t\tthis._stale = true;\n\t\tthis._requiresReset = requiresReset;\n\t}\n}\n\nclass LoadMoreCommand {\n\treadonly handle = 'vscode-command:loadMore';\n\treadonly timestamp = 0;\n\treadonly description = undefined;\n\treadonly tooltip = undefined;\n\treadonly contextValue = undefined;\n\t// Make things easier for duck typing\n\treadonly id = undefined;\n\treadonly icon = undefined;\n\treadonly iconDark = undefined;\n\treadonly source = undefined;\n\treadonly relativeTime = undefined;\n\treadonly relativeTimeFullWord = undefined;\n\treadonly hideRelativeTime = undefined;\n\n\tconstructor(loading: boolean) {\n\t\tthis._loading = loading;\n\t}\n\tprivate _loading: boolean = false;\n\tget loading(): boolean {\n\t\treturn this._loading;\n\t}\n\tset loading(value: boolean) {\n\t\tthis._loading = value;\n\t}\n\n\tget ariaLabel() {\n\t\treturn this.label;\n\t}\n\n\tget label() {\n\t\treturn this.loading ? localize('timeline.loadingMore', \"Loading...\") : localize('timeline.loadMore', \"Load more\");\n\t}\n\n\tget themeIcon(): ThemeIcon | undefined {\n\t\treturn undefined;\n\t}\n}\n\nexport const TimelineFollowActiveEditorContext = new RawContextKey<boolean>('timelineFollowActiveEditor', true, true);\nexport const TimelineExcludeSources = new RawContextKey<string>('timelineExcludeSources', '[]', true);\nexport const TimelineViewFocusedContext = new RawContextKey<boolean>('timelineFocused', true);\n\ninterface IPendingRequest extends IDisposable {\n\treadonly request: TimelineRequest;\n}\n\nexport class TimelinePane extends ViewPane {\n\tstatic readonly TITLE: ILocalizedString = localize2('timeline', \"Timeline\");\n\n\tprivate $container!: HTMLElement;\n\tprivate $message!: HTMLDivElement;\n\tprivate $tree!: HTMLDivElement;\n\tprivate tree!: WorkbenchObjectTree<TreeElement, FuzzyScore>;\n\tprivate treeRenderer: TimelineTreeRenderer | undefined;\n\tprivate commands: TimelinePaneCommands;\n\tprivate visibilityDisposables: DisposableStore | undefined;\n\n\tprivate followActiveEditorContext: IContextKey<boolean>;\n\tprivate timelineExcludeSourcesContext: IContextKey<string>;\n\n\tprivate excludedSources: Set<string>;\n\tprivate pendingRequests = new Map<string, IPendingRequest>();\n\tprivate timelinesBySource = new Map<string, TimelineAggregate>();\n\n\tprivate uri: URI | undefined;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorService protected editorService: IEditorService,\n\t\t@ICommandService protected commandService: ICommandService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@ITimelineService protected timelineService: ITimelineService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t) {\n\t\tsuper({ ...options, titleMenuId: MenuId.TimelineTitle }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\n\t\tthis.commands = this._register(this.instantiationService.createInstance(TimelinePaneCommands, this));\n\n\t\tthis.followActiveEditorContext = TimelineFollowActiveEditorContext.bindTo(this.contextKeyService);\n\t\tthis.timelineExcludeSourcesContext = TimelineExcludeSources.bindTo(this.contextKeyService);\n\n\t\tconst excludedSourcesString = storageService.get('timeline.excludeSources', StorageScope.PROFILE, '[]');\n\t\tthis.timelineExcludeSourcesContext.set(excludedSourcesString);\n\t\tthis.excludedSources = new Set(JSON.parse(excludedSourcesString));\n\n\t\tthis._register(storageService.onDidChangeValue(StorageScope.PROFILE, 'timeline.excludeSources', this._store)(this.onStorageServiceChanged, this));\n\t\tthis._register(configurationService.onDidChangeConfiguration(this.onConfigurationChanged, this));\n\t\tthis._register(timelineService.onDidChangeProviders(this.onProvidersChanged, this));\n\t\tthis._register(timelineService.onDidChangeTimeline(this.onTimelineChanged, this));\n\t\tthis._register(timelineService.onDidChangeUri(uri => this.setUri(uri), this));\n\t}\n\n\tprivate _followActiveEditor: boolean = true;\n\tget followActiveEditor(): boolean {\n\t\treturn this._followActiveEditor;\n\t}\n\tset followActiveEditor(value: boolean) {\n\t\tif (this._followActiveEditor === value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._followActiveEditor = value;\n\t\tthis.followActiveEditorContext.set(value);\n\n\t\tthis.updateFilename(this._filename);\n\n\t\tif (value) {\n\t\t\tthis.onActiveEditorChanged();\n\t\t}\n\t}\n\n\tprivate _pageOnScroll: boolean | undefined;\n\tget pageOnScroll() {\n\t\tif (this._pageOnScroll === undefined) {\n\t\t\tthis._pageOnScroll = this.configurationService.getValue<boolean | null | undefined>('timeline.pageOnScroll') ?? false;\n\t\t}\n\n\t\treturn this._pageOnScroll;\n\t}\n\n\tget pageSize() {\n\t\tlet pageSize = this.configurationService.getValue<number | null | undefined>('timeline.pageSize');\n\t\tif (pageSize === undefined || pageSize === null) {\n\t\t\t// If we are paging when scrolling, then add an extra item to the end to make sure the \"Load more\" item is out of view\n\t\t\tpageSize = Math.max(20, Math.floor((this.tree?.renderHeight ?? 0 / ItemHeight) + (this.pageOnScroll ? 1 : -1)));\n\t\t}\n\t\treturn pageSize;\n\t}\n\n\treset() {\n\t\tthis.loadTimeline(true);\n\t}\n\n\tsetUri(uri: URI) {\n\t\tthis.setUriCore(uri, true);\n\t}\n\n\tprivate setUriCore(uri: URI | undefined, disableFollowing: boolean) {\n\t\tif (disableFollowing) {\n\t\t\tthis.followActiveEditor = false;\n\t\t}\n\n\t\tthis.uri = uri;\n\t\tthis.updateFilename(uri ? this.labelService.getUriBasenameLabel(uri) : undefined);\n\t\tthis.treeRenderer?.setUri(uri);\n\t\tthis.loadTimeline(true);\n\t}\n\n\tprivate onStorageServiceChanged() {\n\t\tconst excludedSourcesString = this.storageService.get('timeline.excludeSources', StorageScope.PROFILE, '[]');\n\t\tthis.timelineExcludeSourcesContext.set(excludedSourcesString);\n\t\tthis.excludedSources = new Set(JSON.parse(excludedSourcesString));\n\n\t\tconst missing = this.timelineService.getSources()\n\t\t\t.filter(({ id }) => !this.excludedSources.has(id) && !this.timelinesBySource.has(id));\n\t\tif (missing.length !== 0) {\n\t\t\tthis.loadTimeline(true, missing.map(({ id }) => id));\n\t\t} else {\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate onConfigurationChanged(e: IConfigurationChangeEvent) {\n\t\tif (e.affectsConfiguration('timeline.pageOnScroll')) {\n\t\t\tthis._pageOnScroll = undefined;\n\t\t}\n\t}\n\n\tprivate onActiveEditorChanged() {\n\t\tif (!this.followActiveEditor || !this.isExpanded()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\tif ((this.uriIdentityService.extUri.isEqual(uri, this.uri) && uri !== undefined) ||\n\t\t\t// Fallback to match on fsPath if we are dealing with files or git schemes\n\t\t\t(uri?.fsPath === this.uri?.fsPath && (uri?.scheme === Schemas.file || uri?.scheme === 'git') && (this.uri?.scheme === Schemas.file || this.uri?.scheme === 'git'))) {\n\n\t\t\t// If the uri hasn't changed, make sure we have valid caches\n\t\t\tfor (const source of this.timelineService.getSources()) {\n\t\t\t\tif (this.excludedSources.has(source.id)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst timeline = this.timelinesBySource.get(source.id);\n\t\t\t\tif (timeline !== undefined && !timeline.stale) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (timeline !== undefined) {\n\t\t\t\t\tthis.updateTimeline(timeline, timeline.requiresReset);\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadTimelineForSource(source.id, uri, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setUriCore(uri, false);\n\t}\n\n\tprivate onProvidersChanged(e: TimelineProvidersChangeEvent) {\n\t\tif (e.removed) {\n\t\t\tfor (const source of e.removed) {\n\t\t\t\tthis.timelinesBySource.delete(source);\n\t\t\t}\n\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tif (e.added) {\n\t\t\tthis.loadTimeline(true, e.added);\n\t\t}\n\t}\n\n\tprivate onTimelineChanged(e: TimelineChangeEvent) {\n\t\tif (e?.uri === undefined || this.uriIdentityService.extUri.isEqual(URI.revive(e.uri), this.uri)) {\n\t\t\tconst timeline = this.timelinesBySource.get(e.id);\n\t\t\tif (timeline === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isBodyVisible()) {\n\t\t\t\tthis.updateTimeline(timeline, e.reset);\n\t\t\t} else {\n\t\t\t\ttimeline.invalidate(e.reset);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _filename: string | undefined;\n\tupdateFilename(filename: string | undefined) {\n\t\tthis._filename = filename;\n\t\tif (this.followActiveEditor || !filename) {\n\t\t\tthis.updateTitleDescription(filename);\n\t\t} else {\n\t\t\tthis.updateTitleDescription(`${filename} (pinned)`);\n\t\t}\n\t}\n\n\tprivate _message: string | undefined;\n\tget message(): string | undefined {\n\t\treturn this._message;\n\t}\n\n\tset message(message: string | undefined) {\n\t\tthis._message = message;\n\t\tthis.updateMessage();\n\t}\n\n\tprivate updateMessage(): void {\n\t\tif (this._message !== undefined) {\n\t\t\tthis.showMessage(this._message);\n\t\t} else {\n\t\t\tthis.hideMessage();\n\t\t}\n\t}\n\n\tprivate showMessage(message: string): void {\n\t\tif (!this.$message) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$message.classList.remove('hide');\n\t\tthis.resetMessageElement();\n\n\t\tthis.$message.textContent = message;\n\t}\n\n\tprivate hideMessage(): void {\n\t\tthis.resetMessageElement();\n\t\tthis.$message.classList.add('hide');\n\t}\n\n\tprivate resetMessageElement(): void {\n\t\tDOM.clearNode(this.$message);\n\t}\n\n\tprivate _isEmpty = true;\n\tprivate _maxItemCount = 0;\n\n\tprivate _visibleItemCount = 0;\n\tprivate get hasVisibleItems() {\n\t\treturn this._visibleItemCount > 0;\n\t}\n\n\tprivate clear(cancelPending: boolean) {\n\t\tthis._visibleItemCount = 0;\n\t\tthis._maxItemCount = this.pageSize;\n\t\tthis.timelinesBySource.clear();\n\n\t\tif (cancelPending) {\n\t\t\tfor (const pendingRequest of this.pendingRequests.values()) {\n\t\t\t\tpendingRequest.request.tokenSource.cancel();\n\t\t\t\tpendingRequest.dispose();\n\t\t\t}\n\n\t\t\tthis.pendingRequests.clear();\n\n\t\t\tif (!this.isBodyVisible() && this.tree) {\n\t\t\t\tthis.tree.setChildren(null, undefined);\n\t\t\t\tthis._isEmpty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async loadTimeline(reset: boolean, sources?: string[]) {\n\t\t// If we have no source, we are resetting all sources, so cancel everything in flight and reset caches\n\t\tif (sources === undefined) {\n\t\t\tif (reset) {\n\t\t\t\tthis.clear(true);\n\t\t\t}\n\n\t\t\t// TODO@eamodio: Are these the right the list of schemes to exclude? Is there a better way?\n\t\t\tif (this.uri?.scheme === Schemas.vscodeSettings || this.uri?.scheme === Schemas.webviewPanel || this.uri?.scheme === Schemas.walkThrough) {\n\t\t\t\tthis.uri = undefined;\n\n\t\t\t\tthis.clear(false);\n\t\t\t\tthis.refresh();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._isEmpty && this.uri !== undefined) {\n\t\t\t\tthis.setLoadingUriMessage();\n\t\t\t}\n\t\t}\n\n\t\tif (this.uri === undefined) {\n\t\t\tthis.clear(false);\n\t\t\tthis.refresh();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet hasPendingRequests = false;\n\n\t\tfor (const source of sources ?? this.timelineService.getSources().map(s => s.id)) {\n\t\t\tconst requested = this.loadTimelineForSource(source, this.uri, reset);\n\t\t\tif (requested) {\n\t\t\t\thasPendingRequests = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hasPendingRequests) {\n\t\t\tthis.refresh();\n\t\t} else if (this._isEmpty) {\n\t\t\tthis.setLoadingUriMessage();\n\t\t}\n\t}\n\n\tprivate loadTimelineForSource(source: string, uri: URI, reset: boolean, options?: TimelineOptions) {\n\t\tif (this.excludedSources.has(source)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst timeline = this.timelinesBySource.get(source);\n\n\t\t// If we are paging, and there are no more items or we have enough cached items to cover the next page,\n\t\t// don't bother querying for more\n\t\tif (\n\t\t\t!reset &&\n\t\t\toptions?.cursor !== undefined &&\n\t\t\ttimeline !== undefined &&\n\t\t\t(!timeline?.more || timeline.items.length > timeline.lastRenderedIndex + this.pageSize)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (options === undefined) {\n\t\t\tif (\n\t\t\t\t!reset &&\n\t\t\t\ttimeline !== undefined &&\n\t\t\t\ttimeline.items.length > 0 &&\n\t\t\t\t!timeline.more\n\t\t\t) {\n\t\t\t\t// If we are not resetting, have item(s), and already know there are no more to fetch, we're done here\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\toptions = { cursor: reset ? undefined : timeline?.cursor, limit: this.pageSize };\n\t\t}\n\n\t\tconst pendingRequest = this.pendingRequests.get(source);\n\t\tif (pendingRequest !== undefined) {\n\t\t\toptions.cursor = pendingRequest.request.options.cursor;\n\n\t\t\t// TODO@eamodio deal with concurrent requests better\n\t\t\tif (typeof options.limit === 'number') {\n\t\t\t\tif (typeof pendingRequest.request.options.limit === 'number') {\n\t\t\t\t\toptions.limit += pendingRequest.request.options.limit;\n\t\t\t\t} else {\n\t\t\t\t\toptions.limit = pendingRequest.request.options.limit;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tpendingRequest?.request?.tokenSource.cancel();\n\t\tpendingRequest?.dispose();\n\n\t\toptions.cacheResults = true;\n\t\toptions.resetCache = reset;\n\t\tconst tokenSource = new CancellationTokenSource();\n\t\tconst newRequest = this.timelineService.getTimeline(source, uri, options, tokenSource);\n\n\t\tif (newRequest === undefined) {\n\t\t\ttokenSource.dispose();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\t\tthis.pendingRequests.set(source, { request: newRequest, dispose: () => disposables.dispose() });\n\t\tdisposables.add(tokenSource);\n\t\tdisposables.add(tokenSource.token.onCancellationRequested(() => this.pendingRequests.delete(source)));\n\n\t\tthis.handleRequest(newRequest);\n\n\t\treturn true;\n\t}\n\n\tprivate updateTimeline(timeline: TimelineAggregate, reset: boolean) {\n\t\tif (reset) {\n\t\t\tthis.timelinesBySource.delete(timeline.source);\n\t\t\t// Override the limit, to re-query for all our existing cached (possibly visible) items to keep visual continuity\n\t\t\tconst { oldest } = timeline;\n\t\t\tthis.loadTimelineForSource(timeline.source, this.uri!, true, oldest !== undefined ? { limit: { timestamp: oldest.timestamp, id: oldest.id } } : undefined);\n\t\t} else {\n\t\t\t// Override the limit, to query for any newer items\n\t\t\tconst { newest } = timeline;\n\t\t\tthis.loadTimelineForSource(timeline.source, this.uri!, false, newest !== undefined ? { limit: { timestamp: newest.timestamp, id: newest.id } } : { limit: this.pageSize });\n\t\t}\n\t}\n\n\tprivate _pendingRefresh = false;\n\n\tprivate async handleRequest(request: TimelineRequest) {\n\t\tlet response: Timeline | undefined;\n\t\ttry {\n\t\t\tresponse = await this.progressService.withProgress({ location: this.id }, () => request.result);\n\t\t} catch {\n\t\t\t// Ignore\n\t\t}\n\n\t\t// If the request was cancelled then it was already deleted from the pendingRequests map\n\t\tif (!request.tokenSource.token.isCancellationRequested) {\n\t\t\tthis.pendingRequests.get(request.source)?.dispose();\n\t\t\tthis.pendingRequests.delete(request.source);\n\t\t}\n\n\t\tif (response === undefined || request.uri !== this.uri) {\n\t\t\tif (this.pendingRequests.size === 0 && this._pendingRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst source = request.source;\n\n\t\tlet updated = false;\n\t\tconst timeline = this.timelinesBySource.get(source);\n\t\tif (timeline === undefined) {\n\t\t\tthis.timelinesBySource.set(source, new TimelineAggregate(response));\n\t\t\tupdated = true;\n\t\t}\n\t\telse {\n\t\t\tupdated = timeline.add(response, request.options);\n\t\t}\n\n\t\tif (updated) {\n\t\t\tthis._pendingRefresh = true;\n\n\t\t\t// If we have visible items already and there are other pending requests, debounce for a bit to wait for other requests\n\t\t\tif (this.hasVisibleItems && this.pendingRequests.size !== 0) {\n\t\t\t\tthis.refreshDebounced();\n\t\t\t} else {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t} else if (this.pendingRequests.size === 0) {\n\t\t\tif (this._pendingRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t} else {\n\t\t\t\tthis.tree.rerender();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate *getItems(): Generator<ITreeElement<TreeElement>, void, undefined> {\n\t\tlet more = false;\n\n\t\tif (this.uri === undefined || this.timelinesBySource.size === 0) {\n\t\t\tthis._visibleItemCount = 0;\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst maxCount = this._maxItemCount;\n\t\tlet count = 0;\n\n\t\tif (this.timelinesBySource.size === 1) {\n\t\t\tconst [source, timeline] = Iterable.first(this.timelinesBySource)!;\n\n\t\t\ttimeline.lastRenderedIndex = -1;\n\n\t\t\tif (this.excludedSources.has(source)) {\n\t\t\t\tthis._visibleItemCount = 0;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (timeline.items.length !== 0) {\n\t\t\t\t// If we have any items, just say we have one for now -- the real count will be updated below\n\t\t\t\tthis._visibleItemCount = 1;\n\t\t\t}\n\n\t\t\tmore = timeline.more;\n\n\t\t\tlet lastRelativeTime: string | undefined;\n\t\t\tfor (const item of timeline.items) {\n\t\t\t\titem.relativeTime = undefined;\n\t\t\t\titem.hideRelativeTime = undefined;\n\n\t\t\t\tcount++;\n\t\t\t\tif (count > maxCount) {\n\t\t\t\t\tmore = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlastRelativeTime = updateRelativeTime(item, lastRelativeTime);\n\t\t\t\tyield { element: item };\n\t\t\t}\n\n\t\t\ttimeline.lastRenderedIndex = count - 1;\n\t\t}\n\t\telse {\n\t\t\tconst sources: { timeline: TimelineAggregate; iterator: IterableIterator<TimelineItem>; nextItem: IteratorResult<TimelineItem, undefined> }[] = [];\n\n\t\t\tlet hasAnyItems = false;\n\t\t\tlet mostRecentEnd = 0;\n\n\t\t\tfor (const [source, timeline] of this.timelinesBySource) {\n\t\t\t\ttimeline.lastRenderedIndex = -1;\n\n\t\t\t\tif (this.excludedSources.has(source) || timeline.stale) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (timeline.items.length !== 0) {\n\t\t\t\t\thasAnyItems = true;\n\t\t\t\t}\n\n\t\t\t\tif (timeline.more) {\n\t\t\t\t\tmore = true;\n\n\t\t\t\t\tconst last = timeline.items[Math.min(maxCount, timeline.items.length - 1)];\n\t\t\t\t\tif (last.timestamp > mostRecentEnd) {\n\t\t\t\t\t\tmostRecentEnd = last.timestamp;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst iterator = timeline.items[Symbol.iterator]();\n\t\t\t\tsources.push({ timeline, iterator, nextItem: iterator.next() });\n\t\t\t}\n\n\t\t\tthis._visibleItemCount = hasAnyItems ? 1 : 0;\n\n\t\t\tfunction getNextMostRecentSource() {\n\t\t\t\treturn sources\n\t\t\t\t\t.filter(source => !source.nextItem.done)\n\t\t\t\t\t.reduce((previous, current) => (previous === undefined || current.nextItem.value!.timestamp >= previous.nextItem.value!.timestamp) ? current : previous, undefined!);\n\t\t\t}\n\n\t\t\tlet lastRelativeTime: string | undefined;\n\t\t\tlet nextSource;\n\t\t\twhile (nextSource = getNextMostRecentSource()) {\n\t\t\t\tnextSource.timeline.lastRenderedIndex++;\n\n\t\t\t\tconst item = nextSource.nextItem.value!;\n\t\t\t\titem.relativeTime = undefined;\n\t\t\t\titem.hideRelativeTime = undefined;\n\n\t\t\t\tif (item.timestamp >= mostRecentEnd) {\n\t\t\t\t\tcount++;\n\t\t\t\t\tif (count > maxCount) {\n\t\t\t\t\t\tmore = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tlastRelativeTime = updateRelativeTime(item, lastRelativeTime);\n\t\t\t\t\tyield { element: item };\n\t\t\t\t}\n\n\t\t\t\tnextSource.nextItem = nextSource.iterator.next();\n\t\t\t}\n\t\t}\n\n\t\tthis._visibleItemCount = count;\n\t\tif (count > 0) {\n\t\t\tif (more) {\n\t\t\t\tyield {\n\t\t\t\t\telement: new LoadMoreCommand(this.pendingRequests.size !== 0)\n\t\t\t\t};\n\t\t\t} else if (this.pendingRequests.size !== 0) {\n\t\t\t\tyield {\n\t\t\t\t\telement: new LoadMoreCommand(true)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate refresh() {\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.setChildren(null, this.getItems());\n\t\tthis._isEmpty = !this.hasVisibleItems;\n\n\t\tif (this.uri === undefined) {\n\t\t\tthis.updateFilename(undefined);\n\t\t\tthis.message = localize('timeline.editorCannotProvideTimeline', \"The active editor cannot provide timeline information.\");\n\t\t} else if (this._isEmpty) {\n\t\t\tif (this.pendingRequests.size !== 0) {\n\t\t\t\tthis.setLoadingUriMessage();\n\t\t\t} else {\n\t\t\t\tthis.updateFilename(this.labelService.getUriBasenameLabel(this.uri));\n\t\t\t\tconst scmProviderCount = this.contextKeyService.getContextKeyValue<number>('scm.providerCount');\n\t\t\t\tif (this.timelineService.getSources().filter(({ id }) => !this.excludedSources.has(id)).length === 0) {\n\t\t\t\t\tthis.message = localize('timeline.noTimelineSourcesEnabled', \"All timeline sources have been filtered out.\");\n\t\t\t\t} else {\n\t\t\t\t\tif (this.configurationService.getValue('workbench.localHistory.enabled') && !this.excludedSources.has('timeline.localHistory')) {\n\t\t\t\t\t\tthis.message = localize('timeline.noLocalHistoryYet', \"Local History will track recent changes as you save them unless the file has been excluded or is too large.\");\n\t\t\t\t\t} else if (this.excludedSources.size > 0) {\n\t\t\t\t\t\tthis.message = localize('timeline.noTimelineInfoFromEnabledSources', \"No filtered timeline information was provided.\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.message = localize('timeline.noTimelineInfo', \"No timeline information was provided.\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!scmProviderCount || scmProviderCount === 0) {\n\t\t\t\t\tthis.message += ' ' + localize('timeline.noSCM', \"Source Control has not been configured.\");\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateFilename(this.labelService.getUriBasenameLabel(this.uri));\n\t\t\tthis.message = undefined;\n\t\t}\n\n\t\tthis._pendingRefresh = false;\n\t}\n\n\t@debounce(500)\n\tprivate refreshDebounced() {\n\t\tthis.refresh();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.tree.domFocus();\n\t}\n\n\toverride setExpanded(expanded: boolean): boolean {\n\t\tconst changed = super.setExpanded(expanded);\n\n\t\tif (changed && this.isBodyVisible()) {\n\t\t\tif (!this.followActiveEditor) {\n\t\t\t\tthis.setUriCore(this.uri, true);\n\t\t\t} else {\n\t\t\t\tthis.onActiveEditorChanged();\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tif (visible) {\n\t\t\tthis.extensionService.activateByEvent('onView:timeline');\n\t\t\tthis.visibilityDisposables = new DisposableStore();\n\n\t\t\tthis.editorService.onDidActiveEditorChange(this.onActiveEditorChanged, this, this.visibilityDisposables);\n\t\t\t// Refresh the view on focus to update the relative timestamps\n\t\t\tthis.onDidFocus(() => this.refreshDebounced(), this, this.visibilityDisposables);\n\n\t\t\tsuper.setVisible(visible);\n\n\t\t\tthis.onActiveEditorChanged();\n\t\t} else {\n\t\t\tthis.visibilityDisposables?.dispose();\n\n\t\t\tsuper.setVisible(visible);\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.tree.layout(height, width);\n\t}\n\n\tprotected override renderHeaderTitle(container: HTMLElement): void {\n\t\tsuper.renderHeaderTitle(container, this.title);\n\n\t\tcontainer.classList.add('timeline-view');\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis.$container = container;\n\t\tcontainer.classList.add('tree-explorer-viewlet-tree-view', 'timeline-tree-view');\n\n\t\tthis.$message = DOM.append(this.$container, DOM.$('.message'));\n\t\tthis.$message.classList.add('timeline-subtle');\n\n\t\tthis.message = localize('timeline.editorCannotProvideTimeline', \"The active editor cannot provide timeline information.\");\n\n\t\tthis.$tree = document.createElement('div');\n\t\tthis.$tree.classList.add('customview-tree', 'file-icon-themable-tree', 'hide-arrows');\n\t\t// this.treeElement.classList.add('show-file-icons');\n\t\tcontainer.appendChild(this.$tree);\n\n\t\tthis.treeRenderer = this.instantiationService.createInstance(TimelineTreeRenderer, this.commands, this.viewDescriptorService.getViewLocationById(this.id));\n\t\tthis._register(this.treeRenderer.onDidScrollToEnd(item => {\n\t\t\tif (this.pageOnScroll) {\n\t\t\t\tthis.loadMore(item);\n\t\t\t}\n\t\t}));\n\n\t\tthis.tree = this.instantiationService.createInstance(WorkbenchObjectTree<TreeElement, FuzzyScore>, 'TimelinePane',\n\t\t\tthis.$tree, new TimelineListVirtualDelegate(), [this.treeRenderer], {\n\t\t\tidentityProvider: new TimelineIdentityProvider(),\n\t\t\taccessibilityProvider: {\n\t\t\t\tgetAriaLabel(element: TreeElement): string {\n\t\t\t\t\tif (isLoadMoreCommand(element)) {\n\t\t\t\t\t\treturn element.ariaLabel;\n\t\t\t\t\t}\n\t\t\t\t\treturn element.accessibilityInformation ? element.accessibilityInformation.label : localize('timeline.aria.item', \"{0}: {1}\", element.relativeTimeFullWord ?? '', element.label);\n\t\t\t\t},\n\t\t\t\tgetRole(element: TreeElement): AriaRole {\n\t\t\t\t\tif (isLoadMoreCommand(element)) {\n\t\t\t\t\t\treturn 'treeitem';\n\t\t\t\t\t}\n\t\t\t\t\treturn element.accessibilityInformation && element.accessibilityInformation.role ? element.accessibilityInformation.role : 'treeitem';\n\t\t\t\t},\n\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\treturn localize('timeline', \"Timeline\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tkeyboardNavigationLabelProvider: new TimelineKeyboardNavigationLabelProvider(),\n\t\t\tmultipleSelectionSupport: false,\n\t\t\toverrideStyles: this.getLocationBasedColors().listOverrideStyles,\n\t\t});\n\n\t\tTimelineViewFocusedContext.bindTo(this.tree.contextKeyService);\n\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(this.commands, e)));\n\t\tthis._register(this.tree.onDidChangeSelection(e => this.ensureValidItems()));\n\t\tthis._register(this.tree.onDidOpen(e => {\n\t\t\tif (!e.browserEvent || !this.ensureValidItems()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selection = this.tree.getSelection();\n\t\t\tlet item;\n\t\t\tif (selection.length === 1) {\n\t\t\t\titem = selection[0];\n\t\t\t}\n\n\t\t\tif (item === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (isTimelineItem(item)) {\n\t\t\t\tif (item.command) {\n\t\t\t\t\tlet args = item.command.arguments ?? [];\n\t\t\t\t\tif (item.command.id === API_OPEN_EDITOR_COMMAND_ID || item.command.id === API_OPEN_DIFF_EDITOR_COMMAND_ID) {\n\t\t\t\t\t\t// Some commands owned by us should receive the\n\t\t\t\t\t\t// `IOpenEvent` as context to open properly\n\t\t\t\t\t\targs = [...args, e];\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.commandService.executeCommand(item.command.id, ...args);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isLoadMoreCommand(item)) {\n\t\t\t\tthis.loadMore(item);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate loadMore(item: LoadMoreCommand) {\n\t\tif (item.loading) {\n\t\t\treturn;\n\t\t}\n\n\t\titem.loading = true;\n\t\tthis.tree.rerender(item);\n\n\t\tif (this.pendingRequests.size !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._maxItemCount = this._visibleItemCount + this.pageSize;\n\t\tthis.loadTimeline(false);\n\t}\n\n\tensureValidItems() {\n\t\t// If we don't have any non-excluded timelines, clear the tree and show the loading message\n\t\tif (!this.hasVisibleItems || !this.timelineService.getSources().some(({ id }) => !this.excludedSources.has(id) && this.timelinesBySource.has(id))) {\n\t\t\tthis.tree.setChildren(null, undefined);\n\t\t\tthis._isEmpty = true;\n\n\t\t\tthis.setLoadingUriMessage();\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetLoadingUriMessage() {\n\t\tconst file = this.uri && this.labelService.getUriBasenameLabel(this.uri);\n\t\tthis.updateFilename(file);\n\t\tthis.message = file ? localize('timeline.loading', \"Loading timeline for {0}...\", file) : '';\n\t}\n\n\tprivate onContextMenu(commands: TimelinePaneCommands, treeEvent: ITreeContextMenuEvent<TreeElement | null>): void {\n\t\tconst item = treeEvent.element;\n\t\tif (item === null) {\n\t\t\treturn;\n\t\t}\n\t\tconst event: UIEvent = treeEvent.browserEvent;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (!this.ensureValidItems()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.setFocus([item]);\n\t\tconst actions = commands.getItemContextActions(item);\n\t\tif (!actions.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => treeEvent.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetActionsContext: (): TimelineActionContext => ({ uri: this.uri, item }),\n\t\t\tactionRunner: new TimelineActionRunner()\n\t\t});\n\t}\n}\n\nclass TimelineElementTemplate implements IDisposable {\n\tstatic readonly id = 'TimelineElementTemplate';\n\n\treadonly actionBar: ActionBar;\n\treadonly icon: HTMLElement;\n\treadonly iconLabel: IconLabel;\n\treadonly timestamp: HTMLSpanElement;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tactionViewItemProvider: IActionViewItemProvider,\n\t\thoverDelegate: IHoverDelegate,\n\t) {\n\t\tcontainer.classList.add('custom-view-tree-node-item');\n\t\tthis.icon = DOM.append(container, DOM.$('.custom-view-tree-node-item-icon'));\n\n\t\tthis.iconLabel = new IconLabel(container, { supportHighlights: true, supportIcons: true, hoverDelegate });\n\n\t\tconst timestampContainer = DOM.append(this.iconLabel.element, DOM.$('.timeline-timestamp-container'));\n\t\tthis.timestamp = DOM.append(timestampContainer, DOM.$('span.timeline-timestamp'));\n\n\t\tconst actionsContainer = DOM.append(this.iconLabel.element, DOM.$('.actions'));\n\t\tthis.actionBar = new ActionBar(actionsContainer, { actionViewItemProvider });\n\t}\n\n\tdispose() {\n\t\tthis.iconLabel.dispose();\n\t\tthis.actionBar.dispose();\n\t}\n\n\treset() {\n\t\tthis.icon.className = '';\n\t\tthis.icon.style.backgroundImage = '';\n\t\tthis.actionBar.clear();\n\t}\n}\n\nexport class TimelineIdentityProvider implements IIdentityProvider<TreeElement> {\n\tgetId(item: TreeElement): { toString(): string } {\n\t\treturn item.handle;\n\t}\n}\n\nclass TimelineActionRunner extends ActionRunner {\n\n\tprotected override async runAction(action: IAction, { uri, item }: TimelineActionContext): Promise<void> {\n\t\tif (!isTimelineItem(item)) {\n\t\t\t// TODO@eamodio do we need to do anything else?\n\t\t\tawait action.run();\n\t\t\treturn;\n\t\t}\n\n\t\tawait action.run(\n\t\t\t{\n\t\t\t\t$mid: MarshalledId.TimelineActionContext,\n\t\t\t\thandle: item.handle,\n\t\t\t\tsource: item.source,\n\t\t\t\turi\n\t\t\t},\n\t\t\turi,\n\t\t\titem.source,\n\t\t);\n\t}\n}\n\nexport class TimelineKeyboardNavigationLabelProvider implements IKeyboardNavigationLabelProvider<TreeElement> {\n\tgetKeyboardNavigationLabel(element: TreeElement): { toString(): string } {\n\t\treturn element.label;\n\t}\n}\n\nexport class TimelineListVirtualDelegate implements IListVirtualDelegate<TreeElement> {\n\tgetHeight(_element: TreeElement): number {\n\t\treturn ItemHeight;\n\t}\n\n\tgetTemplateId(element: TreeElement): string {\n\t\treturn TimelineElementTemplate.id;\n\t}\n}\n\nclass TimelineTreeRenderer implements ITreeRenderer<TreeElement, FuzzyScore, TimelineElementTemplate> {\n\tprivate readonly _onDidScrollToEnd = new Emitter<LoadMoreCommand>();\n\treadonly onDidScrollToEnd: Event<LoadMoreCommand> = this._onDidScrollToEnd.event;\n\n\treadonly templateId: string = TimelineElementTemplate.id;\n\n\tprivate _hoverDelegate: IHoverDelegate;\n\n\tprivate actionViewItemProvider: IActionViewItemProvider;\n\n\tconstructor(\n\t\tprivate readonly commands: TimelinePaneCommands,\n\t\tprivate readonly viewContainerLocation: ViewContainerLocation | null,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private themeService: IThemeService\n\t) {\n\t\tthis.actionViewItemProvider = createActionViewItem.bind(undefined, this.instantiationService);\n\n\t\tthis._hoverDelegate = this.instantiationService.createInstance(\n\t\t\tWorkbenchHoverDelegate,\n\t\t\tthis.viewContainerLocation === ViewContainerLocation.Panel ? 'mouse' : 'element',\n\t\t\t{\n\t\t\t\tinstantHover: this.viewContainerLocation !== ViewContainerLocation.Panel\n\t\t\t}, {\n\t\t\tposition: {\n\t\t\t\thoverPosition: HoverPosition.RIGHT // Will flip when there's no space\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate uri: URI | undefined;\n\tsetUri(uri: URI | undefined) {\n\t\tthis.uri = uri;\n\t}\n\n\trenderTemplate(container: HTMLElement): TimelineElementTemplate {\n\t\treturn new TimelineElementTemplate(container, this.actionViewItemProvider, this._hoverDelegate);\n\t}\n\n\trenderElement(\n\t\tnode: ITreeNode<TreeElement, FuzzyScore>,\n\t\tindex: number,\n\t\ttemplate: TimelineElementTemplate\n\t): void {\n\t\ttemplate.reset();\n\n\t\tconst { element: item } = node;\n\n\t\tconst theme = this.themeService.getColorTheme();\n\t\tconst icon = isDark(theme.type) ? item.iconDark : item.icon;\n\t\tconst iconUrl = icon ? URI.revive(icon) : null;\n\n\t\tif (iconUrl) {\n\t\t\ttemplate.icon.className = 'custom-view-tree-node-item-icon';\n\t\t\ttemplate.icon.style.backgroundImage = css.asCSSUrl(iconUrl);\n\t\t\ttemplate.icon.style.color = '';\n\t\t} else if (item.themeIcon) {\n\t\t\ttemplate.icon.className = `custom-view-tree-node-item-icon ${ThemeIcon.asClassName(item.themeIcon)}`;\n\t\t\tif (item.themeIcon.color) {\n\t\t\t\ttemplate.icon.style.color = theme.getColor(item.themeIcon.color.id)?.toString() ?? '';\n\t\t\t} else {\n\t\t\t\ttemplate.icon.style.color = '';\n\t\t\t}\n\t\t\ttemplate.icon.style.backgroundImage = '';\n\t\t} else {\n\t\t\ttemplate.icon.className = 'custom-view-tree-node-item-icon';\n\t\t\ttemplate.icon.style.backgroundImage = '';\n\t\t\ttemplate.icon.style.color = '';\n\t\t}\n\t\tconst tooltip = item.tooltip\n\t\t\t? isString(item.tooltip)\n\t\t\t\t? item.tooltip\n\t\t\t\t: { markdown: item.tooltip, markdownNotSupportedFallback: renderAsPlaintext(item.tooltip) }\n\t\t\t: undefined;\n\n\t\ttemplate.iconLabel.setLabel(item.label, item.description, {\n\t\t\ttitle: tooltip,\n\t\t\tmatches: createMatches(node.filterData)\n\t\t});\n\n\t\ttemplate.timestamp.textContent = item.relativeTime ?? '';\n\t\ttemplate.timestamp.ariaLabel = item.relativeTimeFullWord ?? '';\n\t\ttemplate.timestamp.parentElement!.classList.toggle('timeline-timestamp--duplicate', isTimelineItem(item) && item.hideRelativeTime);\n\n\t\ttemplate.actionBar.context = { uri: this.uri, item } satisfies TimelineActionContext;\n\t\ttemplate.actionBar.actionRunner = new TimelineActionRunner();\n\t\ttemplate.actionBar.push(this.commands.getItemActions(item), { icon: true, label: false });\n\n\t\t// If we are rendering the load more item, we've scrolled to the end, so trigger an event\n\t\tif (isLoadMoreCommand(item)) {\n\t\t\tsetTimeout(() => this._onDidScrollToEnd.fire(item), 0);\n\t\t}\n\t}\n\n\tdisposeElement(element: ITreeNode<TreeElement, FuzzyScore>, index: number, templateData: TimelineElementTemplate): void {\n\t\ttemplateData.actionBar.actionRunner.dispose();\n\t}\n\n\tdisposeTemplate(template: TimelineElementTemplate): void {\n\t\ttemplate.dispose();\n\t}\n}\n\n\nconst timelineRefresh = registerIcon('timeline-refresh', Codicon.refresh, localize('timelineRefresh', 'Icon for the refresh timeline action.'));\nconst timelinePin = registerIcon('timeline-pin', Codicon.pin, localize('timelinePin', 'Icon for the pin timeline action.'));\nconst timelineUnpin = registerIcon('timeline-unpin', Codicon.pinned, localize('timelineUnpin', 'Icon for the unpin timeline action.'));\n\nclass TimelinePaneCommands extends Disposable {\n\tprivate readonly sourceDisposables: DisposableStore;\n\n\tconstructor(\n\t\tprivate readonly pane: TimelinePane,\n\t\t@ITimelineService private readonly timelineService: ITimelineService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this.sourceDisposables = new DisposableStore());\n\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'timeline.refresh',\n\t\t\t\t\ttitle: localize2('refresh', \"Refresh\"),\n\t\t\t\t\ticon: timelineRefresh,\n\t\t\t\t\tcategory: localize2('timeline', \"Timeline\"),\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.TimelineTitle,\n\t\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t\torder: 99,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\t\tpane.reset();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(CommandsRegistry.registerCommand('timeline.toggleFollowActiveEditor',\n\t\t\t(accessor: ServicesAccessor, ...args: unknown[]) => pane.followActiveEditor = !pane.followActiveEditor\n\t\t));\n\n\t\tthis._register(MenuRegistry.appendMenuItem(MenuId.TimelineTitle, ({\n\t\t\tcommand: {\n\t\t\t\tid: 'timeline.toggleFollowActiveEditor',\n\t\t\t\ttitle: localize2('timeline.toggleFollowActiveEditorCommand.follow', 'Pin the Current Timeline'),\n\t\t\t\ticon: timelinePin,\n\t\t\t\tcategory: localize2('timeline', \"Timeline\"),\n\t\t\t},\n\t\t\tgroup: 'navigation',\n\t\t\torder: 98,\n\t\t\twhen: TimelineFollowActiveEditorContext\n\t\t})));\n\n\t\tthis._register(MenuRegistry.appendMenuItem(MenuId.TimelineTitle, ({\n\t\t\tcommand: {\n\t\t\t\tid: 'timeline.toggleFollowActiveEditor',\n\t\t\t\ttitle: localize2('timeline.toggleFollowActiveEditorCommand.unfollow', 'Unpin the Current Timeline'),\n\t\t\t\ticon: timelineUnpin,\n\t\t\t\tcategory: localize2('timeline', \"Timeline\"),\n\t\t\t},\n\t\t\tgroup: 'navigation',\n\t\t\torder: 98,\n\t\t\twhen: TimelineFollowActiveEditorContext.toNegated()\n\t\t})));\n\n\t\tthis._register(timelineService.onDidChangeProviders(() => this.updateTimelineSourceFilters()));\n\t\tthis.updateTimelineSourceFilters();\n\t}\n\n\tgetItemActions(element: TreeElement): IAction[] {\n\t\treturn this.getActions(MenuId.TimelineItemContext, { key: 'timelineItem', value: element.contextValue }).primary;\n\t}\n\n\tgetItemContextActions(element: TreeElement): IAction[] {\n\t\treturn this.getActions(MenuId.TimelineItemContext, { key: 'timelineItem', value: element.contextValue }).secondary;\n\t}\n\n\tprivate getActions(menuId: MenuId, context: { key: string; value?: string }): { primary: IAction[]; secondary: IAction[] } {\n\t\tconst contextKeyService = this.contextKeyService.createOverlay([\n\t\t\t['view', this.pane.id],\n\t\t\t[context.key, context.value],\n\t\t]);\n\n\t\tconst menu = this.menuService.getMenuActions(menuId, contextKeyService, { shouldForwardArgs: true });\n\t\treturn getContextMenuActions(menu, 'inline');\n\t}\n\n\tprivate updateTimelineSourceFilters() {\n\t\tthis.sourceDisposables.clear();\n\n\t\tconst excluded = new Set(JSON.parse(this.storageService.get('timeline.excludeSources', StorageScope.PROFILE, '[]')));\n\t\tfor (const source of this.timelineService.getSources()) {\n\t\t\tthis.sourceDisposables.add(registerAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: `timeline.toggleExcludeSource:${source.id}`,\n\t\t\t\t\t\ttitle: source.label,\n\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\tid: MenuId.TimelineFilterSubMenu,\n\t\t\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoggled: ContextKeyExpr.regex(`timelineExcludeSources`, new RegExp(`\\\\b${escapeRegExpCharacters(source.id)}\\\\b`)).negate()\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\t\t\tif (excluded.has(source.id)) {\n\t\t\t\t\t\texcluded.delete(source.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\texcluded.add(source.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst storageService = accessor.get(IStorageService);\n\t\t\t\t\tstorageService.store('timeline.excludeSources', JSON.stringify([...excluded.keys()]), StorageScope.PROFILE, StorageTarget.USER);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n}\n"]}