{"version":3,"sources":["vs/workbench/contrib/externalTerminal/electron-browser/externalTerminal.contribution.ts"],"names":[],"mappings":"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","file":"externalTerminal.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as paths from '../../../../base/common/path.js';\nimport { DEFAULT_TERMINAL_OSX, IExternalTerminalSettings } from '../../../../platform/externalTerminal/common/externalTerminal.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { KeyMod, KeyCode } from '../../../../base/common/keyCodes.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { KeybindingsRegistry, KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { IConfigurationRegistry, Extensions, ConfigurationScope, type IConfigurationPropertySchema } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions } from '../../../common/contributions.js';\nimport { IExternalTerminalService } from '../../../../platform/externalTerminal/electron-browser/externalTerminalService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { TerminalContextKeys } from '../../terminal/common/terminalContextKey.js';\nimport { IRemoteAuthorityResolverService } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\n\nconst OPEN_NATIVE_CONSOLE_COMMAND_ID = 'workbench.action.terminal.openNativeConsole';\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: OPEN_NATIVE_CONSOLE_COMMAND_ID,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.KeyC,\n\twhen: TerminalContextKeys.notFocus,\n\tweight: KeybindingWeight.WorkbenchContrib,\n\thandler: async (accessor) => {\n\t\tconst historyService = accessor.get(IHistoryService);\n\t\t// Open external terminal in local workspaces\n\t\tconst terminalService = accessor.get(IExternalTerminalService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst remoteAuthorityResolverService = accessor.get(IRemoteAuthorityResolverService);\n\t\tconst root = historyService.getLastActiveWorkspaceRoot();\n\t\tconst config = configurationService.getValue<IExternalTerminalSettings>('terminal.external');\n\n\t\t// It's a local workspace, open the root\n\t\tif (root?.scheme === Schemas.file) {\n\t\t\tterminalService.openTerminal(config, root.fsPath);\n\t\t\treturn;\n\t\t}\n\n\t\t// If it's a remote workspace, open the canonical URI if it is a local folder\n\t\ttry {\n\t\t\tif (root?.scheme === Schemas.vscodeRemote) {\n\t\t\t\tconst canonicalUri = await remoteAuthorityResolverService.getCanonicalURI(root);\n\t\t\t\tif (canonicalUri.scheme === Schemas.file) {\n\t\t\t\t\tterminalService.openTerminal(config, canonicalUri.fsPath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch { }\n\n\t\t// Open the current file's folder if it's local or its canonical URI is local\n\t\t// Opens current file's folder, if no folder is open in editor\n\t\tconst activeFile = historyService.getLastActiveFile(Schemas.file);\n\t\tif (activeFile?.scheme === Schemas.file) {\n\t\t\tterminalService.openTerminal(config, paths.dirname(activeFile.fsPath));\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tif (activeFile?.scheme === Schemas.vscodeRemote) {\n\t\t\t\tconst canonicalUri = await remoteAuthorityResolverService.getCanonicalURI(activeFile);\n\t\t\t\tif (canonicalUri.scheme === Schemas.file) {\n\t\t\t\t\tterminalService.openTerminal(config, canonicalUri.fsPath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch { }\n\n\t\t// Fallback to opening without a cwd which will end up using the local home path\n\t\tterminalService.openTerminal(config, undefined);\n\t}\n});\n\nMenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\tcommand: {\n\t\tid: OPEN_NATIVE_CONSOLE_COMMAND_ID,\n\t\ttitle: nls.localize2('globalConsoleAction', \"Open New External Terminal\")\n\t}\n});\n\nexport class ExternalTerminalContribution implements IWorkbenchContribution {\n\n\tpublic _serviceBrand: undefined;\n\tconstructor(@IExternalTerminalService private readonly _externalTerminalService: IExternalTerminalService) {\n\t\tthis._updateConfiguration();\n\t}\n\n\tprivate async _updateConfiguration(): Promise<void> {\n\t\tconst terminals = await this._externalTerminalService.getDefaultTerminalForPlatforms();\n\t\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\n\t\tconst terminalKindProperties: Partial<IConfigurationPropertySchema> = {\n\t\t\ttype: 'string',\n\t\t\tenum: [\n\t\t\t\t'integrated',\n\t\t\t\t'external',\n\t\t\t\t'both'\n\t\t\t],\n\t\t\tenumDescriptions: [\n\t\t\t\tnls.localize('terminal.kind.integrated', \"Show the integrated terminal action.\"),\n\t\t\t\tnls.localize('terminal.kind.external', \"Show the external terminal action.\"),\n\t\t\t\tnls.localize('terminal.kind.both', \"Show both integrated and external terminal actions.\")\n\t\t\t],\n\t\t\tdefault: 'integrated'\n\t\t};\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\tid: 'externalTerminal',\n\t\t\torder: 100,\n\t\t\ttitle: nls.localize('terminalConfigurationTitle', \"External Terminal\"),\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\t'terminal.explorerKind': {\n\t\t\t\t\t...terminalKindProperties,\n\t\t\t\t\tdescription: nls.localize('explorer.openInTerminalKind', \"When opening a file from the Explorer in a terminal, determines what kind of terminal will be launched\"),\n\t\t\t\t},\n\t\t\t\t'terminal.sourceControlRepositoriesKind': {\n\t\t\t\t\t...terminalKindProperties,\n\t\t\t\t\tdescription: nls.localize('sourceControlRepositories.openInTerminalKind', \"When opening a repository from the Source Control Repositories view in a terminal, determines what kind of terminal will be launched\"),\n\t\t\t\t},\n\t\t\t\t'terminal.external.windowsExec': {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('terminal.external.windowsExec', \"Customizes which terminal to run on Windows.\"),\n\t\t\t\t\tdefault: terminals.windows,\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'terminal.external.osxExec': {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('terminal.external.osxExec', \"Customizes which terminal application to run on macOS.\"),\n\t\t\t\t\tdefault: DEFAULT_TERMINAL_OSX,\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'terminal.external.linuxExec': {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('terminal.external.linuxExec', \"Customizes which terminal to run on Linux.\"),\n\t\t\t\t\tdefault: terminals.linux,\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n// Register workbench contributions\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(ExternalTerminalContribution, LifecyclePhase.Restored);\n"]}