{"version":3,"sources":["vs/workbench/contrib/search/browser/searchActionsRemoveReplace.ts"],"names":[],"mappings":"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","file":"searchActionsRemoveReplace.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITreeNavigator } from '../../../../base/browser/ui/tree/tree.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { getSelectionKeyboardEvent, WorkbenchCompressibleAsyncDataTree } from '../../../../platform/list/browser/listService.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { searchRemoveIcon, searchReplaceIcon } from './searchIcons.js';\nimport { SearchView } from './searchView.js';\nimport * as Constants from '../common/constants.js';\nimport { IReplaceService } from './replace.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ISearchConfiguration, ISearchConfigurationProperties } from '../../../services/search/common/search.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { category, getElementsToOperateOn, getSearchView, shouldRefocus } from './searchActionsBase.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { arrayContainsElementOrParent, RenderableMatch, ISearchResult, isSearchTreeFileMatch, isSearchTreeFolderMatch, isSearchTreeMatch, isSearchResult, isTextSearchHeading } from './searchTreeModel/searchTreeCommon.js';\nimport { MatchInNotebook } from './notebookSearch/notebookSearchModel.js';\nimport { AITextSearchHeadingImpl } from './AISearch/aiSearchModel.js';\n\n\n//#region Interfaces\nexport interface ISearchActionContext {\n\treadonly viewer: WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch>;\n\treadonly element: RenderableMatch;\n}\n\n\nexport interface IFindInFilesArgs {\n\tquery?: string;\n\treplace?: string;\n\tpreserveCase?: boolean;\n\ttriggerSearch?: boolean;\n\tfilesToInclude?: string;\n\tfilesToExclude?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tmatchWholeWord?: boolean;\n\tuseExcludeSettingsAndIgnoreFiles?: boolean;\n\tonlyOpenEditors?: boolean;\n}\n\n//#endregion\n\n//#region Actions\nregisterAction2(class RemoveAction extends Action2 {\n\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: Constants.SearchCommandIds.RemoveActionId,\n\t\t\ttitle: nls.localize2('RemoveAction.label', \"Dismiss\"),\n\t\t\tcategory,\n\t\t\ticon: searchRemoveIcon,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.SearchViewVisibleKey, Constants.SearchContext.FileMatchOrMatchFocusKey),\n\t\t\t\tprimary: KeyCode.Delete,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t\t\t\t},\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\tgroup: 'search',\n\t\t\t\t\torder: 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\twhen: ContextKeyExpr.or(Constants.SearchContext.FileFocusKey, Constants.SearchContext.MatchFocusKey, Constants.SearchContext.FolderFocusKey),\n\t\t\t\t\torder: 2,\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, context: ISearchActionContext | undefined): Promise<void> {\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst searchView = getSearchView(viewsService);\n\n\t\tif (!searchView) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet element = context?.element;\n\t\tlet viewer = context?.viewer;\n\t\tif (!viewer) {\n\t\t\tviewer = searchView.getControl();\n\t\t}\n\t\tif (!element) {\n\t\t\telement = viewer.getFocus()[0] ?? undefined;\n\t\t}\n\n\t\tconst elementsToRemove = getElementsToOperateOn(viewer, element, configurationService.getValue<ISearchConfigurationProperties>('search'));\n\t\tlet focusElement = viewer.getFocus()[0] ?? undefined;\n\n\t\tif (elementsToRemove.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!focusElement || (isSearchResult(focusElement))) {\n\t\t\tfocusElement = element;\n\t\t}\n\n\t\tlet nextFocusElement;\n\t\tconst shouldRefocusMatch = shouldRefocus(elementsToRemove, focusElement);\n\t\tif (focusElement && shouldRefocusMatch) {\n\t\t\tnextFocusElement = await getElementToFocusAfterRemoved(viewer, focusElement, elementsToRemove);\n\t\t}\n\n\t\tconst searchResult = searchView.searchResult;\n\n\t\tif (searchResult) {\n\t\t\tsearchResult.batchRemove(elementsToRemove);\n\t\t}\n\n\t\tawait searchView.queueRefreshTree(); // wait for refreshTree to finish\n\n\t\tif (focusElement && shouldRefocusMatch) {\n\t\t\tif (!nextFocusElement) {\n\t\t\t\t// Ignore error if there are no elements left\n\t\t\t\tnextFocusElement = await getLastNodeFromSameType(viewer, focusElement).catch(() => { });\n\t\t\t}\n\n\t\t\tif (nextFocusElement && !arrayContainsElementOrParent(nextFocusElement, elementsToRemove)) {\n\t\t\t\tviewer.reveal(nextFocusElement);\n\t\t\t\tviewer.setFocus([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\t\tviewer.setSelection([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\t}\n\t\t} else if (!equals(viewer.getFocus(), viewer.getSelection())) {\n\t\t\tviewer.setSelection(viewer.getFocus());\n\t\t}\n\n\t\tviewer.domFocus();\n\t\treturn;\n\t}\n});\n\nregisterAction2(class ReplaceAction extends Action2 {\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: Constants.SearchCommandIds.ReplaceActionId,\n\t\t\ttitle: nls.localize2('match.replace.label', \"Replace\"),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.SearchViewVisibleKey, Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.MatchFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\tprimary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.Digit1,\n\t\t\t},\n\t\t\ticon: searchReplaceIcon,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.MatchFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\t\tgroup: 'search',\n\t\t\t\t\torder: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.MatchFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\torder: 1\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, context: ISearchActionContext | undefined): Promise<any> {\n\t\treturn performReplace(accessor, context);\n\t}\n});\n\nregisterAction2(class ReplaceAllAction extends Action2 {\n\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: Constants.SearchCommandIds.ReplaceAllInFileActionId,\n\t\t\ttitle: nls.localize2('file.replaceAll.label', \"Replace All\"),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.SearchViewVisibleKey, Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.FileFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\tprimary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.Digit1,\n\t\t\t\tsecondary: [KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter],\n\t\t\t},\n\t\t\ticon: searchReplaceIcon,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.FileFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\t\tgroup: 'search',\n\t\t\t\t\torder: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.FileFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\torder: 1\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, context: ISearchActionContext | undefined): Promise<any> {\n\t\treturn performReplace(accessor, context);\n\t}\n});\n\nregisterAction2(class ReplaceAllInFolderAction extends Action2 {\n\tconstructor(\n\t) {\n\t\tsuper({\n\t\t\tid: Constants.SearchCommandIds.ReplaceAllInFolderActionId,\n\t\t\ttitle: nls.localize2('file.replaceAll.label', \"Replace All\"),\n\t\t\tcategory,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.SearchViewVisibleKey, Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.FolderFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\tprimary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.Digit1,\n\t\t\t\tsecondary: [KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter],\n\t\t\t},\n\t\t\ticon: searchReplaceIcon,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.FolderFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\t\tgroup: 'search',\n\t\t\t\t\torder: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\twhen: ContextKeyExpr.and(Constants.SearchContext.ReplaceActiveKey, Constants.SearchContext.FolderFocusKey, Constants.SearchContext.IsEditableItemKey),\n\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\torder: 1\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, context: ISearchActionContext | undefined): Promise<any> {\n\t\treturn performReplace(accessor, context);\n\t}\n});\n\n//#endregion\n\n//#region Helpers\n\nasync function performReplace(accessor: ServicesAccessor,\n\tcontext: ISearchActionContext | undefined) {\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst viewsService = accessor.get(IViewsService);\n\n\tconst viewlet: SearchView | undefined = getSearchView(viewsService);\n\tconst viewer: WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch> | undefined = context?.viewer ?? viewlet?.getControl();\n\n\tif (!viewer) {\n\t\treturn;\n\t}\n\tconst element: RenderableMatch | null = context?.element ?? viewer.getFocus()[0];\n\n\t// since multiple elements can be selected, we need to check the type of the FolderMatch/FileMatch/Match before we perform the replace.\n\tconst elementsToReplace = getElementsToOperateOn(viewer, element ?? undefined, configurationService.getValue<ISearchConfigurationProperties>('search'));\n\tlet focusElement = viewer.getFocus()[0];\n\n\tif (!focusElement || (focusElement && !arrayContainsElementOrParent(focusElement, elementsToReplace)) || (isSearchResult(focusElement))) {\n\t\tfocusElement = element;\n\t}\n\n\tif (elementsToReplace.length === 0) {\n\t\treturn;\n\t}\n\tlet nextFocusElement;\n\tif (focusElement) {\n\t\tnextFocusElement = await getElementToFocusAfterRemoved(viewer, focusElement, elementsToReplace);\n\t}\n\n\tconst searchResult = viewlet?.searchResult;\n\n\tif (searchResult) {\n\t\tawait searchResult.batchReplace(elementsToReplace);\n\t}\n\n\tawait viewlet?.queueRefreshTree(); // wait for refreshTree to finish\n\n\tif (focusElement) {\n\t\tif (!nextFocusElement) {\n\t\t\tnextFocusElement = await getLastNodeFromSameType(viewer, focusElement);\n\t\t}\n\n\t\tif (nextFocusElement) {\n\t\t\tviewer.reveal(nextFocusElement);\n\t\t\tviewer.setFocus([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\tviewer.setSelection([nextFocusElement], getSelectionKeyboardEvent());\n\n\t\t\tif (isSearchTreeMatch(nextFocusElement)) {\n\t\t\t\tconst useReplacePreview = configurationService.getValue<ISearchConfiguration>().search.useReplacePreview;\n\t\t\t\tif (!useReplacePreview || hasToOpenFile(accessor, nextFocusElement) || nextFocusElement instanceof MatchInNotebook) {\n\t\t\t\t\tviewlet?.open(nextFocusElement, true);\n\t\t\t\t} else {\n\t\t\t\t\taccessor.get(IReplaceService).openReplacePreview(nextFocusElement, true);\n\t\t\t\t}\n\t\t\t} else if (isSearchTreeFileMatch(nextFocusElement)) {\n\t\t\t\tviewlet?.open(nextFocusElement, true);\n\t\t\t}\n\t\t}\n\n\t}\n\n\tviewer.domFocus();\n}\n\nfunction hasToOpenFile(accessor: ServicesAccessor, currBottomElem: RenderableMatch): boolean {\n\tif (!(isSearchTreeMatch(currBottomElem))) {\n\t\treturn false;\n\t}\n\tconst activeEditor = accessor.get(IEditorService).activeEditor;\n\tconst file = activeEditor?.resource;\n\tif (file) {\n\t\treturn accessor.get(IUriIdentityService).extUri.isEqual(file, currBottomElem.parent().resource);\n\t}\n\treturn false;\n}\n\nfunction compareLevels(elem1: RenderableMatch, elem2: RenderableMatch) {\n\tif (isSearchTreeMatch(elem1)) {\n\t\tif (isSearchTreeMatch(elem2)) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\n\t} else if (isSearchTreeFileMatch(elem1)) {\n\t\tif (isSearchTreeMatch(elem2)) {\n\t\t\treturn 1;\n\t\t} else if (isSearchTreeFileMatch(elem2)) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t} else if (isSearchTreeFolderMatch(elem1)) {\n\t\tif (isTextSearchHeading(elem2)) {\n\t\t\treturn -1;\n\t\t} else if (isSearchTreeFolderMatch(elem2)) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t} else {\n\t\tif (isTextSearchHeading(elem2)) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t}\n}\n\n/**\n * Returns element to focus after removing the given element\n */\nexport async function getElementToFocusAfterRemoved(viewer: WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch>, element: RenderableMatch, elementsToRemove: RenderableMatch[]): Promise<RenderableMatch | undefined> {\n\tconst navigator: ITreeNavigator<any> = viewer.navigate(element);\n\tif (isSearchTreeFolderMatch(element)) {\n\t\twhile (!!navigator.next() && (!isSearchTreeFolderMatch(navigator.current()) || arrayContainsElementOrParent(navigator.current(), elementsToRemove))) { }\n\t} else if (isSearchTreeFileMatch(element)) {\n\t\twhile (!!navigator.next() && (!isSearchTreeFileMatch(navigator.current()) || arrayContainsElementOrParent(navigator.current(), elementsToRemove))) {\n\t\t\t// Never expand AI search results by default\n\t\t\tif (navigator.current() instanceof AITextSearchHeadingImpl) {\n\t\t\t\treturn navigator.current();\n\t\t\t}\n\t\t\tawait viewer.expand(navigator.current());\n\t\t}\n\t} else {\n\t\twhile (navigator.next() && (!isSearchTreeMatch(navigator.current()) || arrayContainsElementOrParent(navigator.current(), elementsToRemove))) {\n\t\t\t// Never expand AI search results by default\n\t\t\tif (navigator.current() instanceof AITextSearchHeadingImpl) {\n\t\t\t\treturn navigator.current();\n\t\t\t}\n\t\t\tawait viewer.expand(navigator.current());\n\t\t}\n\t}\n\treturn navigator.current();\n}\n\n/***\n * Finds the last element in the tree with the same type as `element`\n */\nexport async function getLastNodeFromSameType(viewer: WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch>, element: RenderableMatch): Promise<RenderableMatch | undefined> {\n\tlet lastElem: RenderableMatch | null = viewer.lastVisibleElement ?? null;\n\n\twhile (lastElem) {\n\t\tconst compareVal = compareLevels(element, lastElem);\n\t\tif (compareVal === -1) {\n\t\t\tconst expanded = await viewer.expand(lastElem);\n\t\t\tif (!expanded) {\n\t\t\t\treturn lastElem;\n\t\t\t}\n\t\t\tlastElem = viewer.lastVisibleElement;\n\t\t} else if (compareVal === 1) {\n\t\t\tconst potentialLastElem = viewer.getParentElement(lastElem);\n\t\t\tif (isSearchResult(potentialLastElem)) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tlastElem = potentialLastElem;\n\t\t\t}\n\t\t} else {\n\t\t\treturn lastElem;\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n//#endregion\n\n"]}