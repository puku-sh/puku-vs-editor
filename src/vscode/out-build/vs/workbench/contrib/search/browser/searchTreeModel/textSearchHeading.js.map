{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/browser/searchTreeModel/textSearchHeading.ts","vs/workbench/contrib/search/browser/searchTreeModel/textSearchHeading.ts"],"names":[],"mappings":"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","file":"textSearchHeading.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../../base/common/ternarySearchTree.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IProgress, IProgressStep } from '../../../../../platform/progress/common/progress.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IReplaceService } from '../replace.js';\nimport { IFileMatch, ISearchComplete, ITextQuery, ITextSearchQuery } from '../../../../services/search/common/search.js';\nimport { RangeHighlightDecorations } from './rangeDecorations.js';\nimport { FolderMatchNoRootImpl, FolderMatchWorkspaceRootImpl } from './folderMatch.js';\nimport { IChangeEvent, ISearchTreeFileMatch, ISearchTreeFolderMatch, ISearchTreeFolderMatchWithResource, ISearchTreeFolderMatchWorkspaceRoot, IPlainTextSearchHeading, ISearchResult, isSearchTreeFileMatch, isSearchTreeFolderMatch, ITextSearchHeading, ISearchTreeMatch, TEXT_SEARCH_HEADING_PREFIX, PLAIN_TEXT_SEARCH__RESULT_ID, ISearchTreeFolderMatchNoRoot } from './searchTreeCommon.js';\nimport { isNotebookFileMatch } from '../notebookSearch/notebookSearchModelBase.js';\n\n\nexport abstract class TextSearchHeadingImpl<QueryType extends ITextSearchQuery> extends Disposable implements ITextSearchHeading {\n\tprotected _onChange = this._register(new Emitter<IChangeEvent>());\n\treadonly onChange: Event<IChangeEvent> = this._onChange.event;\n\tprivate _isDirty = false;\n\tprivate _showHighlights: boolean = false;\n\n\tprotected _query: QueryType | null = null;\n\tprivate _rangeHighlightDecorations: RangeHighlightDecorations;\n\tprivate disposePastResults: () => Promise<void> = () => Promise.resolve();\n\n\tprotected _folderMatches: ISearchTreeFolderMatchWorkspaceRoot[] = [];\n\tprotected _otherFilesMatch: ISearchTreeFolderMatch | null = null;\n\tprotected _folderMatchesMap: TernarySearchTree<URI, ISearchTreeFolderMatchWithResource> = TernarySearchTree.forUris<ISearchTreeFolderMatchWorkspaceRoot>(key => this.uriIdentityService.extUri.ignorePathCasing(key));\n\tpublic resource = null;\n\tpublic hidden = false;\n\n\tpublic cachedSearchComplete: ISearchComplete | undefined;\n\tconstructor(\n\t\tprivate _allowOtherResults: boolean,\n\t\tprivate _parent: ISearchResult,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService\n\t) {\n\t\tsuper();\n\t\tthis._rangeHighlightDecorations = this.instantiationService.createInstance(RangeHighlightDecorations);\n\n\t\tthis._register(this.onChange(e => {\n\t\t\tif (e.removed) {\n\t\t\t\tthis._isDirty = !this.isEmpty();\n\t\t\t}\n\t\t}));\n\t}\n\n\thide() {\n\t\tthis.hidden = true;\n\t\tthis.clear();\n\t}\n\n\tparent() {\n\t\treturn this._parent;\n\t}\n\n\tget hasChildren(): boolean {\n\t\treturn this._folderMatches.length > 0;\n\t}\n\n\tabstract get isAIContributed(): boolean;\n\tabstract id(): string;\n\tabstract name(): string;\n\n\tget isDirty(): boolean {\n\t\treturn this._isDirty;\n\t}\n\n\tpublic getFolderMatch(resource: URI): ISearchTreeFolderMatch | undefined {\n\t\tconst folderMatch = this._folderMatchesMap.findSubstr(resource);\n\n\t\tif (!folderMatch && this._allowOtherResults && this._otherFilesMatch) {\n\t\t\treturn this._otherFilesMatch;\n\t\t}\n\t\treturn folderMatch;\n\t}\n\n\tadd(allRaw: IFileMatch[], searchInstanceID: string, silent: boolean = false): void {\n\t\t// Split up raw into a list per folder so we can do a batch add per folder.\n\n\t\tconst { byFolder, other } = this.groupFilesByFolder(allRaw);\n\t\tbyFolder.forEach(raw => {\n\t\t\tif (!raw.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// ai results go into the respective folder\n\t\t\tconst folderMatch = this.getFolderMatch(raw[0].resource);\n\t\t\tfolderMatch?.addFileMatch(raw, silent, searchInstanceID);\n\t\t});\n\n\t\tif (!this.isAIContributed) {\n\t\t\tthis._otherFilesMatch?.addFileMatch(other, silent, searchInstanceID);\n\t\t}\n\t\tthis.disposePastResults();\n\t}\n\n\tremove(matches: ISearchTreeFileMatch | ISearchTreeFolderMatch | (ISearchTreeFileMatch | ISearchTreeFolderMatch)[], ai = false): void {\n\t\tif (!Array.isArray(matches)) {\n\t\t\tmatches = [matches];\n\t\t}\n\n\t\tmatches.forEach(m => {\n\t\t\tif (isSearchTreeFolderMatch(m)) {\n\t\t\t\tm.clear();\n\t\t\t}\n\t\t});\n\n\t\tconst fileMatches: ISearchTreeFileMatch[] = matches.filter(m => isSearchTreeFileMatch(m)) as ISearchTreeFileMatch[];\n\n\t\tconst { byFolder, other } = this.groupFilesByFolder(fileMatches);\n\t\tbyFolder.forEach(matches => {\n\t\t\tif (!matches.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getFolderMatch(matches[0].resource)?.remove(matches);\n\t\t});\n\n\t\tif (other.length) {\n\t\t\tthis.getFolderMatch(other[0].resource)?.remove(<ISearchTreeFileMatch[]>other);\n\t\t}\n\t}\n\n\tgroupFilesByFolder<FileMatch extends IFileMatch>(fileMatches: FileMatch[]): { byFolder: ResourceMap<FileMatch[]>; other: FileMatch[] } {\n\t\tconst rawPerFolder = new ResourceMap<FileMatch[]>();\n\t\tconst otherFileMatches: FileMatch[] = [];\n\t\tthis._folderMatches.forEach(fm => rawPerFolder.set(fm.resource, []));\n\n\t\tfileMatches.forEach(rawFileMatch => {\n\t\t\tconst folderMatch = this.getFolderMatch(rawFileMatch.resource);\n\t\t\tif (!folderMatch) {\n\t\t\t\t// foldermatch was previously removed by user or disposed for some reason\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst resource = folderMatch.resource;\n\t\t\tif (resource) {\n\t\t\t\trawPerFolder.get(resource)!.push(rawFileMatch);\n\t\t\t} else {\n\t\t\t\totherFileMatches.push(rawFileMatch);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tbyFolder: rawPerFolder,\n\t\t\tother: otherFileMatches\n\t\t};\n\t}\n\tisEmpty(): boolean {\n\t\treturn this.folderMatches().every((folderMatch) => folderMatch.isEmpty());\n\t}\n\n\tfindFolderSubstr(resource: URI) {\n\t\treturn this._folderMatchesMap.findSubstr(resource);\n\t}\n\n\tabstract query: QueryType | null;\n\n\tprotected clearQuery(): void {\n\t\t// When updating the query we could change the roots, so keep a reference to them to clean up when we trigger `disposePastResults`\n\t\tconst oldFolderMatches = this.folderMatches();\n\t\tthis.disposePastResults = async () => {\n\t\t\toldFolderMatches.forEach(match => match.clear());\n\t\t\toldFolderMatches.forEach(match => match.dispose());\n\t\t\tthis._isDirty = false;\n\t\t};\n\n\t\tthis.cachedSearchComplete = undefined;\n\n\t\tthis._rangeHighlightDecorations.removeHighlightRange();\n\t\tthis._folderMatchesMap = TernarySearchTree.forUris<ISearchTreeFolderMatchWithResource>(key => this.uriIdentityService.extUri.ignorePathCasing(key));\n\t}\n\n\tfolderMatches(): ISearchTreeFolderMatch[] {\n\t\treturn this._otherFilesMatch && this._allowOtherResults ?\n\t\t\t[\n\t\t\t\t...this._folderMatches,\n\t\t\t\tthis._otherFilesMatch,\n\t\t\t] :\n\t\t\tthis._folderMatches;\n\t}\n\n\tprivate disposeMatches(): void {\n\t\tthis.folderMatches().forEach(folderMatch => folderMatch.dispose());\n\n\t\tthis._folderMatches = [];\n\n\t\tthis._folderMatchesMap = TernarySearchTree.forUris<ISearchTreeFolderMatchWithResource>(key => this.uriIdentityService.extUri.ignorePathCasing(key));\n\n\t\tthis._rangeHighlightDecorations.removeHighlightRange();\n\t}\n\n\tmatches(): ISearchTreeFileMatch[] {\n\t\tconst matches: ISearchTreeFileMatch[][] = [];\n\t\tthis.folderMatches().forEach(folderMatch => {\n\t\t\tmatches.push(folderMatch.allDownstreamFileMatches());\n\t\t});\n\n\t\treturn (<ISearchTreeFileMatch[]>[]).concat(...matches);\n\t}\n\n\tget showHighlights(): boolean {\n\t\treturn this._showHighlights;\n\t}\n\n\ttoggleHighlights(value: boolean): void {\n\t\tif (this._showHighlights === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._showHighlights = value;\n\t\tlet selectedMatch: ISearchTreeMatch | null = null;\n\t\tthis.matches().forEach((fileMatch: ISearchTreeFileMatch) => {\n\t\t\tfileMatch.updateHighlights();\n\t\t\tif (isNotebookFileMatch(fileMatch)) {\n\t\t\t\tfileMatch.updateNotebookHighlights();\n\t\t\t}\n\t\t\tif (!selectedMatch) {\n\t\t\t\tselectedMatch = fileMatch.getSelectedMatch();\n\t\t\t}\n\t\t});\n\t\tif (this._showHighlights && selectedMatch) {\n\t\t\t// TS?\n\t\t\tthis._rangeHighlightDecorations.highlightRange(\n\t\t\t\t(<ISearchTreeMatch>selectedMatch).parent().resource,\n\t\t\t\t(<ISearchTreeMatch>selectedMatch).range()\n\t\t\t);\n\t\t} else {\n\t\t\tthis._rangeHighlightDecorations.removeHighlightRange();\n\t\t}\n\t}\n\n\tget rangeHighlightDecorations(): RangeHighlightDecorations {\n\t\treturn this._rangeHighlightDecorations;\n\t}\n\n\tfileCount(): number {\n\t\treturn this.folderMatches().reduce<number>((prev, match) => prev + match.recursiveFileCount(), 0);\n\t}\n\n\tcount(): number {\n\t\treturn this.matches().reduce<number>((prev, match) => prev + match.count(), 0);\n\t}\n\n\tclear(clearAll: boolean = true): void {\n\t\tthis.cachedSearchComplete = undefined;\n\t\tthis.folderMatches().forEach((folderMatch) => folderMatch.clear(clearAll));\n\t\tthis.disposeMatches();\n\t\tthis._folderMatches = [];\n\t\tthis._otherFilesMatch = null;\n\t}\n\n\toverride async dispose(): Promise<void> {\n\t\tthis._rangeHighlightDecorations.dispose();\n\t\tthis.disposeMatches();\n\t\tsuper.dispose();\n\t\tawait this.disposePastResults();\n\t}\n}\n\nexport class PlainTextSearchHeadingImpl extends TextSearchHeadingImpl<ITextQuery> implements IPlainTextSearchHeading {\n\tconstructor(\n\t\tparent: ISearchResult,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t) {\n\t\tsuper(true, parent, instantiationService, uriIdentityService);\n\t}\n\n\tid(): string {\n\t\treturn TEXT_SEARCH_HEADING_PREFIX + PLAIN_TEXT_SEARCH__RESULT_ID;\n\t}\n\n\tget isAIContributed(): boolean {\n\t\treturn false;\n\t}\n\n\treplace(match: ISearchTreeFileMatch): Promise<any> {\n\t\treturn this.getFolderMatch(match.resource)?.replace(match) ?? Promise.resolve();\n\t}\n\n\toverride name(): string {\n\t\treturn 'Text';\n\t}\n\n\treplaceAll(progress: IProgress<IProgressStep>): Promise<any> {\n\t\tthis.replacingAll = true;\n\n\t\tconst promise = this.replaceService.replace(this.matches(), progress);\n\n\t\treturn promise.then(() => {\n\t\t\tthis.replacingAll = false;\n\t\t\tthis.clear();\n\t\t}, () => {\n\t\t\tthis.replacingAll = false;\n\t\t});\n\t}\n\n\tprivate set replacingAll(running: boolean) {\n\t\tthis.folderMatches().forEach((folderMatch) => {\n\t\t\tfolderMatch.replacingAll = running;\n\t\t});\n\t}\n\n\toverride get query(): ITextQuery | null {\n\t\treturn this._query;\n\t}\n\n\toverride set query(query: ITextQuery | null) {\n\t\tthis.clearQuery();\n\n\t\tif (!query) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._folderMatches = (query && query.folderQueries || [])\n\t\t\t.map(fq => fq.folder)\n\t\t\t.map((resource, index) => <ISearchTreeFolderMatchWorkspaceRoot>this._createBaseFolderMatch(resource, resource.toString(), index, query));\n\n\t\tthis._folderMatches.forEach(fm => this._folderMatchesMap.set(fm.resource, fm));\n\n\t\tthis._otherFilesMatch = this._createBaseFolderMatch(null, 'otherFiles', this._folderMatches.length + 1, query);\n\n\t\tthis._query = query;\n\t}\n\n\tprivate _createBaseFolderMatch(resource: URI | null, id: string, index: number, query: ITextQuery): ISearchTreeFolderMatch {\n\t\tlet folderMatch: ISearchTreeFolderMatch;\n\t\tif (resource) {\n\t\t\tfolderMatch = this._register(this.createWorkspaceRootWithResourceImpl(resource, id, index, query));\n\t\t} else {\n\t\t\tfolderMatch = this._register(this.createNoRootWorkspaceImpl(id, index, query));\n\t\t}\n\t\tconst disposable = folderMatch.onChange((event) => this._onChange.fire(event));\n\t\tthis._register(folderMatch.onDispose(() => disposable.dispose()));\n\t\treturn folderMatch;\n\t}\n\n\tprivate createWorkspaceRootWithResourceImpl(resource: URI, id: string, index: number, query: ITextQuery,): ISearchTreeFolderMatchWorkspaceRoot {\n\t\treturn this.instantiationService.createInstance(FolderMatchWorkspaceRootImpl, resource, id, index, query, this);\n\t}\n\n\tprivate createNoRootWorkspaceImpl(id: string, index: number, query: ITextQuery): ISearchTreeFolderMatchNoRoot {\n\t\treturn this._register(this.instantiationService.createInstance(FolderMatchNoRootImpl, id, index, query, this));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../../base/common/ternarySearchTree.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IProgress, IProgressStep } from '../../../../../platform/progress/common/progress.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IReplaceService } from '../replace.js';\nimport { IFileMatch, ISearchComplete, ITextQuery, ITextSearchQuery } from '../../../../services/search/common/search.js';\nimport { RangeHighlightDecorations } from './rangeDecorations.js';\nimport { FolderMatchNoRootImpl, FolderMatchWorkspaceRootImpl } from './folderMatch.js';\nimport { IChangeEvent, ISearchTreeFileMatch, ISearchTreeFolderMatch, ISearchTreeFolderMatchWithResource, ISearchTreeFolderMatchWorkspaceRoot, IPlainTextSearchHeading, ISearchResult, isSearchTreeFileMatch, isSearchTreeFolderMatch, ITextSearchHeading, ISearchTreeMatch, TEXT_SEARCH_HEADING_PREFIX, PLAIN_TEXT_SEARCH__RESULT_ID, ISearchTreeFolderMatchNoRoot } from './searchTreeCommon.js';\nimport { isNotebookFileMatch } from '../notebookSearch/notebookSearchModelBase.js';\n\n\nexport abstract class TextSearchHeadingImpl<QueryType extends ITextSearchQuery> extends Disposable implements ITextSearchHeading {\n\tprotected _onChange = this._register(new Emitter<IChangeEvent>());\n\treadonly onChange: Event<IChangeEvent> = this._onChange.event;\n\tprivate _isDirty = false;\n\tprivate _showHighlights: boolean = false;\n\n\tprotected _query: QueryType | null = null;\n\tprivate _rangeHighlightDecorations: RangeHighlightDecorations;\n\tprivate disposePastResults: () => Promise<void> = () => Promise.resolve();\n\n\tprotected _folderMatches: ISearchTreeFolderMatchWorkspaceRoot[] = [];\n\tprotected _otherFilesMatch: ISearchTreeFolderMatch | null = null;\n\tprotected _folderMatchesMap: TernarySearchTree<URI, ISearchTreeFolderMatchWithResource> = TernarySearchTree.forUris<ISearchTreeFolderMatchWorkspaceRoot>(key => this.uriIdentityService.extUri.ignorePathCasing(key));\n\tpublic resource = null;\n\tpublic hidden = false;\n\n\tpublic cachedSearchComplete: ISearchComplete | undefined;\n\tconstructor(\n\t\tprivate _allowOtherResults: boolean,\n\t\tprivate _parent: ISearchResult,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService\n\t) {\n\t\tsuper();\n\t\tthis._rangeHighlightDecorations = this.instantiationService.createInstance(RangeHighlightDecorations);\n\n\t\tthis._register(this.onChange(e => {\n\t\t\tif (e.removed) {\n\t\t\t\tthis._isDirty = !this.isEmpty();\n\t\t\t}\n\t\t}));\n\t}\n\n\thide() {\n\t\tthis.hidden = true;\n\t\tthis.clear();\n\t}\n\n\tparent() {\n\t\treturn this._parent;\n\t}\n\n\tget hasChildren(): boolean {\n\t\treturn this._folderMatches.length > 0;\n\t}\n\n\tabstract get isAIContributed(): boolean;\n\tabstract id(): string;\n\tabstract name(): string;\n\n\tget isDirty(): boolean {\n\t\treturn this._isDirty;\n\t}\n\n\tpublic getFolderMatch(resource: URI): ISearchTreeFolderMatch | undefined {\n\t\tconst folderMatch = this._folderMatchesMap.findSubstr(resource);\n\n\t\tif (!folderMatch && this._allowOtherResults && this._otherFilesMatch) {\n\t\t\treturn this._otherFilesMatch;\n\t\t}\n\t\treturn folderMatch;\n\t}\n\n\tadd(allRaw: IFileMatch[], searchInstanceID: string, silent: boolean = false): void {\n\t\t// Split up raw into a list per folder so we can do a batch add per folder.\n\n\t\tconst { byFolder, other } = this.groupFilesByFolder(allRaw);\n\t\tbyFolder.forEach(raw => {\n\t\t\tif (!raw.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// ai results go into the respective folder\n\t\t\tconst folderMatch = this.getFolderMatch(raw[0].resource);\n\t\t\tfolderMatch?.addFileMatch(raw, silent, searchInstanceID);\n\t\t});\n\n\t\tif (!this.isAIContributed) {\n\t\t\tthis._otherFilesMatch?.addFileMatch(other, silent, searchInstanceID);\n\t\t}\n\t\tthis.disposePastResults();\n\t}\n\n\tremove(matches: ISearchTreeFileMatch | ISearchTreeFolderMatch | (ISearchTreeFileMatch | ISearchTreeFolderMatch)[], ai = false): void {\n\t\tif (!Array.isArray(matches)) {\n\t\t\tmatches = [matches];\n\t\t}\n\n\t\tmatches.forEach(m => {\n\t\t\tif (isSearchTreeFolderMatch(m)) {\n\t\t\t\tm.clear();\n\t\t\t}\n\t\t});\n\n\t\tconst fileMatches: ISearchTreeFileMatch[] = matches.filter(m => isSearchTreeFileMatch(m)) as ISearchTreeFileMatch[];\n\n\t\tconst { byFolder, other } = this.groupFilesByFolder(fileMatches);\n\t\tbyFolder.forEach(matches => {\n\t\t\tif (!matches.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getFolderMatch(matches[0].resource)?.remove(matches);\n\t\t});\n\n\t\tif (other.length) {\n\t\t\tthis.getFolderMatch(other[0].resource)?.remove(<ISearchTreeFileMatch[]>other);\n\t\t}\n\t}\n\n\tgroupFilesByFolder<FileMatch extends IFileMatch>(fileMatches: FileMatch[]): { byFolder: ResourceMap<FileMatch[]>; other: FileMatch[] } {\n\t\tconst rawPerFolder = new ResourceMap<FileMatch[]>();\n\t\tconst otherFileMatches: FileMatch[] = [];\n\t\tthis._folderMatches.forEach(fm => rawPerFolder.set(fm.resource, []));\n\n\t\tfileMatches.forEach(rawFileMatch => {\n\t\t\tconst folderMatch = this.getFolderMatch(rawFileMatch.resource);\n\t\t\tif (!folderMatch) {\n\t\t\t\t// foldermatch was previously removed by user or disposed for some reason\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst resource = folderMatch.resource;\n\t\t\tif (resource) {\n\t\t\t\trawPerFolder.get(resource)!.push(rawFileMatch);\n\t\t\t} else {\n\t\t\t\totherFileMatches.push(rawFileMatch);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tbyFolder: rawPerFolder,\n\t\t\tother: otherFileMatches\n\t\t};\n\t}\n\tisEmpty(): boolean {\n\t\treturn this.folderMatches().every((folderMatch) => folderMatch.isEmpty());\n\t}\n\n\tfindFolderSubstr(resource: URI) {\n\t\treturn this._folderMatchesMap.findSubstr(resource);\n\t}\n\n\tabstract query: QueryType | null;\n\n\tprotected clearQuery(): void {\n\t\t// When updating the query we could change the roots, so keep a reference to them to clean up when we trigger `disposePastResults`\n\t\tconst oldFolderMatches = this.folderMatches();\n\t\tthis.disposePastResults = async () => {\n\t\t\toldFolderMatches.forEach(match => match.clear());\n\t\t\toldFolderMatches.forEach(match => match.dispose());\n\t\t\tthis._isDirty = false;\n\t\t};\n\n\t\tthis.cachedSearchComplete = undefined;\n\n\t\tthis._rangeHighlightDecorations.removeHighlightRange();\n\t\tthis._folderMatchesMap = TernarySearchTree.forUris<ISearchTreeFolderMatchWithResource>(key => this.uriIdentityService.extUri.ignorePathCasing(key));\n\t}\n\n\tfolderMatches(): ISearchTreeFolderMatch[] {\n\t\treturn this._otherFilesMatch && this._allowOtherResults ?\n\t\t\t[\n\t\t\t\t...this._folderMatches,\n\t\t\t\tthis._otherFilesMatch,\n\t\t\t] :\n\t\t\tthis._folderMatches;\n\t}\n\n\tprivate disposeMatches(): void {\n\t\tthis.folderMatches().forEach(folderMatch => folderMatch.dispose());\n\n\t\tthis._folderMatches = [];\n\n\t\tthis._folderMatchesMap = TernarySearchTree.forUris<ISearchTreeFolderMatchWithResource>(key => this.uriIdentityService.extUri.ignorePathCasing(key));\n\n\t\tthis._rangeHighlightDecorations.removeHighlightRange();\n\t}\n\n\tmatches(): ISearchTreeFileMatch[] {\n\t\tconst matches: ISearchTreeFileMatch[][] = [];\n\t\tthis.folderMatches().forEach(folderMatch => {\n\t\t\tmatches.push(folderMatch.allDownstreamFileMatches());\n\t\t});\n\n\t\treturn (<ISearchTreeFileMatch[]>[]).concat(...matches);\n\t}\n\n\tget showHighlights(): boolean {\n\t\treturn this._showHighlights;\n\t}\n\n\ttoggleHighlights(value: boolean): void {\n\t\tif (this._showHighlights === value) {\n\t\t\treturn;\n\t\t}\n\t\tthis._showHighlights = value;\n\t\tlet selectedMatch: ISearchTreeMatch | null = null;\n\t\tthis.matches().forEach((fileMatch: ISearchTreeFileMatch) => {\n\t\t\tfileMatch.updateHighlights();\n\t\t\tif (isNotebookFileMatch(fileMatch)) {\n\t\t\t\tfileMatch.updateNotebookHighlights();\n\t\t\t}\n\t\t\tif (!selectedMatch) {\n\t\t\t\tselectedMatch = fileMatch.getSelectedMatch();\n\t\t\t}\n\t\t});\n\t\tif (this._showHighlights && selectedMatch) {\n\t\t\t// TS?\n\t\t\tthis._rangeHighlightDecorations.highlightRange(\n\t\t\t\t(<ISearchTreeMatch>selectedMatch).parent().resource,\n\t\t\t\t(<ISearchTreeMatch>selectedMatch).range()\n\t\t\t);\n\t\t} else {\n\t\t\tthis._rangeHighlightDecorations.removeHighlightRange();\n\t\t}\n\t}\n\n\tget rangeHighlightDecorations(): RangeHighlightDecorations {\n\t\treturn this._rangeHighlightDecorations;\n\t}\n\n\tfileCount(): number {\n\t\treturn this.folderMatches().reduce<number>((prev, match) => prev + match.recursiveFileCount(), 0);\n\t}\n\n\tcount(): number {\n\t\treturn this.matches().reduce<number>((prev, match) => prev + match.count(), 0);\n\t}\n\n\tclear(clearAll: boolean = true): void {\n\t\tthis.cachedSearchComplete = undefined;\n\t\tthis.folderMatches().forEach((folderMatch) => folderMatch.clear(clearAll));\n\t\tthis.disposeMatches();\n\t\tthis._folderMatches = [];\n\t\tthis._otherFilesMatch = null;\n\t}\n\n\toverride async dispose(): Promise<void> {\n\t\tthis._rangeHighlightDecorations.dispose();\n\t\tthis.disposeMatches();\n\t\tsuper.dispose();\n\t\tawait this.disposePastResults();\n\t}\n}\n\nexport class PlainTextSearchHeadingImpl extends TextSearchHeadingImpl<ITextQuery> implements IPlainTextSearchHeading {\n\tconstructor(\n\t\tparent: ISearchResult,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t) {\n\t\tsuper(true, parent, instantiationService, uriIdentityService);\n\t}\n\n\tid(): string {\n\t\treturn TEXT_SEARCH_HEADING_PREFIX + PLAIN_TEXT_SEARCH__RESULT_ID;\n\t}\n\n\tget isAIContributed(): boolean {\n\t\treturn false;\n\t}\n\n\treplace(match: ISearchTreeFileMatch): Promise<any> {\n\t\treturn this.getFolderMatch(match.resource)?.replace(match) ?? Promise.resolve();\n\t}\n\n\toverride name(): string {\n\t\treturn 'Text';\n\t}\n\n\treplaceAll(progress: IProgress<IProgressStep>): Promise<any> {\n\t\tthis.replacingAll = true;\n\n\t\tconst promise = this.replaceService.replace(this.matches(), progress);\n\n\t\treturn promise.then(() => {\n\t\t\tthis.replacingAll = false;\n\t\t\tthis.clear();\n\t\t}, () => {\n\t\t\tthis.replacingAll = false;\n\t\t});\n\t}\n\n\tprivate set replacingAll(running: boolean) {\n\t\tthis.folderMatches().forEach((folderMatch) => {\n\t\t\tfolderMatch.replacingAll = running;\n\t\t});\n\t}\n\n\toverride get query(): ITextQuery | null {\n\t\treturn this._query;\n\t}\n\n\toverride set query(query: ITextQuery | null) {\n\t\tthis.clearQuery();\n\n\t\tif (!query) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._folderMatches = (query && query.folderQueries || [])\n\t\t\t.map(fq => fq.folder)\n\t\t\t.map((resource, index) => <ISearchTreeFolderMatchWorkspaceRoot>this._createBaseFolderMatch(resource, resource.toString(), index, query));\n\n\t\tthis._folderMatches.forEach(fm => this._folderMatchesMap.set(fm.resource, fm));\n\n\t\tthis._otherFilesMatch = this._createBaseFolderMatch(null, 'otherFiles', this._folderMatches.length + 1, query);\n\n\t\tthis._query = query;\n\t}\n\n\tprivate _createBaseFolderMatch(resource: URI | null, id: string, index: number, query: ITextQuery): ISearchTreeFolderMatch {\n\t\tlet folderMatch: ISearchTreeFolderMatch;\n\t\tif (resource) {\n\t\t\tfolderMatch = this._register(this.createWorkspaceRootWithResourceImpl(resource, id, index, query));\n\t\t} else {\n\t\t\tfolderMatch = this._register(this.createNoRootWorkspaceImpl(id, index, query));\n\t\t}\n\t\tconst disposable = folderMatch.onChange((event) => this._onChange.fire(event));\n\t\tthis._register(folderMatch.onDispose(() => disposable.dispose()));\n\t\treturn folderMatch;\n\t}\n\n\tprivate createWorkspaceRootWithResourceImpl(resource: URI, id: string, index: number, query: ITextQuery,): ISearchTreeFolderMatchWorkspaceRoot {\n\t\treturn this.instantiationService.createInstance(FolderMatchWorkspaceRootImpl, resource, id, index, query, this);\n\t}\n\n\tprivate createNoRootWorkspaceImpl(id: string, index: number, query: ITextQuery): ISearchTreeFolderMatchNoRoot {\n\t\treturn this._register(this.instantiationService.createInstance(FolderMatchNoRootImpl, id, index, query, this));\n\t}\n}\n"]}