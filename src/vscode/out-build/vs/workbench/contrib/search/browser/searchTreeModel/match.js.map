{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/browser/searchTreeModel/match.ts","vs/workbench/contrib/search/browser/searchTreeModel/match.ts"],"names":[],"mappings":"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","file":"match.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { memoize } from '../../../../../base/common/decorators.js';\nimport { lcut } from '../../../../../base/common/strings.js';\nimport { ISearchRange, ITextSearchMatch, OneLineRange } from '../../../../services/search/common/search.js';\nimport { ISearchTreeMatch, ISearchTreeFileMatch, MATCH_PREFIX } from './searchTreeCommon.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\n\nexport function textSearchResultToMatches(rawMatch: ITextSearchMatch, fileMatch: ISearchTreeFileMatch, isAiContributed: boolean): ISearchTreeMatch[] {\n\tconst previewLines = rawMatch.previewText.split('\\n');\n\treturn rawMatch.rangeLocations.map((rangeLocation) => {\n\t\tconst previewRange: ISearchRange = rangeLocation.preview;\n\t\treturn new MatchImpl(fileMatch, previewLines, previewRange, rangeLocation.source, isAiContributed);\n\t});\n}\n\nexport class MatchImpl implements ISearchTreeMatch {\n\n\tprivate static readonly MAX_PREVIEW_CHARS = 250;\n\tprotected _id: string;\n\tprotected _range: Range;\n\tprivate _oneLinePreviewText: string;\n\tprivate _rangeInPreviewText: ISearchRange;\n\t// For replace\n\tprivate _fullPreviewRange: ISearchRange;\n\n\tconstructor(protected _parent: ISearchTreeFileMatch, private _fullPreviewLines: string[], _fullPreviewRange: ISearchRange, _documentRange: ISearchRange, private readonly _isReadonly: boolean = false) {\n\t\tthis._oneLinePreviewText = _fullPreviewLines[_fullPreviewRange.startLineNumber];\n\t\tconst adjustedEndCol = _fullPreviewRange.startLineNumber === _fullPreviewRange.endLineNumber ?\n\t\t\t_fullPreviewRange.endColumn :\n\t\t\tthis._oneLinePreviewText.length;\n\t\tthis._rangeInPreviewText = new OneLineRange(1, _fullPreviewRange.startColumn + 1, adjustedEndCol + 1);\n\n\t\tthis._range = new Range(\n\t\t\t_documentRange.startLineNumber + 1,\n\t\t\t_documentRange.startColumn + 1,\n\t\t\t_documentRange.endLineNumber + 1,\n\t\t\t_documentRange.endColumn + 1);\n\n\t\tthis._fullPreviewRange = _fullPreviewRange;\n\n\t\tthis._id = MATCH_PREFIX + this._parent.resource.toString() + '>' + this._range + this.getMatchString();\n\t}\n\n\tid(): string {\n\t\treturn this._id;\n\t}\n\n\tparent(): ISearchTreeFileMatch {\n\t\treturn this._parent;\n\t}\n\n\ttext(): string {\n\t\treturn this._oneLinePreviewText;\n\t}\n\n\trange(): Range {\n\t\treturn this._range;\n\t}\n\n\t@memoize\n\tpreview(): { before: string; fullBefore: string; inside: string; after: string } {\n\t\tconst fullBefore = this._oneLinePreviewText.substring(0, this._rangeInPreviewText.startColumn - 1), before = lcut(fullBefore, 26, '…');\n\n\t\tlet inside = this.getMatchString(), after = this._oneLinePreviewText.substring(this._rangeInPreviewText.endColumn - 1);\n\n\t\tlet charsRemaining = MatchImpl.MAX_PREVIEW_CHARS - before.length;\n\t\tinside = inside.substr(0, charsRemaining);\n\t\tcharsRemaining -= inside.length;\n\t\tafter = after.substr(0, charsRemaining);\n\n\t\treturn {\n\t\t\tbefore,\n\t\t\tfullBefore,\n\t\t\tinside,\n\t\t\tafter,\n\t\t};\n\t}\n\n\tget replaceString(): string {\n\t\tconst searchModel = this.parent().parent().searchModel;\n\t\tif (!searchModel.replacePattern) {\n\t\t\tthrow new Error('searchModel.replacePattern must be set before accessing replaceString');\n\t\t}\n\n\t\tconst fullMatchText = this.fullMatchText();\n\t\tlet replaceString = searchModel.replacePattern.getReplaceString(fullMatchText, searchModel.preserveCase);\n\t\tif (replaceString !== null) {\n\t\t\treturn replaceString;\n\t\t}\n\n\t\t// Search/find normalize line endings - check whether \\r prevents regex from matching\n\t\tconst fullMatchTextWithoutCR = fullMatchText.replace(/\\r\\n/g, '\\n');\n\t\tif (fullMatchTextWithoutCR !== fullMatchText) {\n\t\t\treplaceString = searchModel.replacePattern.getReplaceString(fullMatchTextWithoutCR, searchModel.preserveCase);\n\t\t\tif (replaceString !== null) {\n\t\t\t\treturn replaceString;\n\t\t\t}\n\t\t}\n\n\t\t// If match string is not matching then regex pattern has a lookahead expression\n\t\tconst contextMatchTextWithSurroundingContent = this.fullMatchText(true);\n\t\treplaceString = searchModel.replacePattern.getReplaceString(contextMatchTextWithSurroundingContent, searchModel.preserveCase);\n\t\tif (replaceString !== null) {\n\t\t\treturn replaceString;\n\t\t}\n\n\t\t// Search/find normalize line endings, this time in full context\n\t\tconst contextMatchTextWithoutCR = contextMatchTextWithSurroundingContent.replace(/\\r\\n/g, '\\n');\n\t\tif (contextMatchTextWithoutCR !== contextMatchTextWithSurroundingContent) {\n\t\t\treplaceString = searchModel.replacePattern.getReplaceString(contextMatchTextWithoutCR, searchModel.preserveCase);\n\t\t\tif (replaceString !== null) {\n\t\t\t\treturn replaceString;\n\t\t\t}\n\t\t}\n\n\t\t// Match string is still not matching. Could be unsupported matches (multi-line).\n\t\treturn searchModel.replacePattern.pattern;\n\t}\n\n\tfullMatchText(includeSurrounding = false): string {\n\t\tlet thisMatchPreviewLines: string[];\n\t\tif (includeSurrounding) {\n\t\t\tthisMatchPreviewLines = this._fullPreviewLines;\n\t\t} else {\n\t\t\tthisMatchPreviewLines = this._fullPreviewLines.slice(this._fullPreviewRange.startLineNumber, this._fullPreviewRange.endLineNumber + 1);\n\t\t\tthisMatchPreviewLines[thisMatchPreviewLines.length - 1] = thisMatchPreviewLines[thisMatchPreviewLines.length - 1].slice(0, this._fullPreviewRange.endColumn);\n\t\t\tthisMatchPreviewLines[0] = thisMatchPreviewLines[0].slice(this._fullPreviewRange.startColumn);\n\t\t}\n\n\t\treturn thisMatchPreviewLines.join('\\n');\n\t}\n\n\trangeInPreview() {\n\t\t// convert to editor's base 1 positions.\n\t\treturn {\n\t\t\t...this._fullPreviewRange,\n\t\t\tstartColumn: this._fullPreviewRange.startColumn + 1,\n\t\t\tendColumn: this._fullPreviewRange.endColumn + 1\n\t\t};\n\t}\n\n\tfullPreviewLines(): string[] {\n\t\treturn this._fullPreviewLines.slice(this._fullPreviewRange.startLineNumber, this._fullPreviewRange.endLineNumber + 1);\n\t}\n\n\tgetMatchString(): string {\n\t\treturn this._oneLinePreviewText.substring(this._rangeInPreviewText.startColumn - 1, this._rangeInPreviewText.endColumn - 1);\n\t}\n\n\tget isReadonly() {\n\t\treturn this._isReadonly;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { memoize } from '../../../../../base/common/decorators.js';\nimport { lcut } from '../../../../../base/common/strings.js';\nimport { ISearchRange, ITextSearchMatch, OneLineRange } from '../../../../services/search/common/search.js';\nimport { ISearchTreeMatch, ISearchTreeFileMatch, MATCH_PREFIX } from './searchTreeCommon.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\n\nexport function textSearchResultToMatches(rawMatch: ITextSearchMatch, fileMatch: ISearchTreeFileMatch, isAiContributed: boolean): ISearchTreeMatch[] {\n\tconst previewLines = rawMatch.previewText.split('\\n');\n\treturn rawMatch.rangeLocations.map((rangeLocation) => {\n\t\tconst previewRange: ISearchRange = rangeLocation.preview;\n\t\treturn new MatchImpl(fileMatch, previewLines, previewRange, rangeLocation.source, isAiContributed);\n\t});\n}\n\nexport class MatchImpl implements ISearchTreeMatch {\n\n\tprivate static readonly MAX_PREVIEW_CHARS = 250;\n\tprotected _id: string;\n\tprotected _range: Range;\n\tprivate _oneLinePreviewText: string;\n\tprivate _rangeInPreviewText: ISearchRange;\n\t// For replace\n\tprivate _fullPreviewRange: ISearchRange;\n\n\tconstructor(protected _parent: ISearchTreeFileMatch, private _fullPreviewLines: string[], _fullPreviewRange: ISearchRange, _documentRange: ISearchRange, private readonly _isReadonly: boolean = false) {\n\t\tthis._oneLinePreviewText = _fullPreviewLines[_fullPreviewRange.startLineNumber];\n\t\tconst adjustedEndCol = _fullPreviewRange.startLineNumber === _fullPreviewRange.endLineNumber ?\n\t\t\t_fullPreviewRange.endColumn :\n\t\t\tthis._oneLinePreviewText.length;\n\t\tthis._rangeInPreviewText = new OneLineRange(1, _fullPreviewRange.startColumn + 1, adjustedEndCol + 1);\n\n\t\tthis._range = new Range(\n\t\t\t_documentRange.startLineNumber + 1,\n\t\t\t_documentRange.startColumn + 1,\n\t\t\t_documentRange.endLineNumber + 1,\n\t\t\t_documentRange.endColumn + 1);\n\n\t\tthis._fullPreviewRange = _fullPreviewRange;\n\n\t\tthis._id = MATCH_PREFIX + this._parent.resource.toString() + '>' + this._range + this.getMatchString();\n\t}\n\n\tid(): string {\n\t\treturn this._id;\n\t}\n\n\tparent(): ISearchTreeFileMatch {\n\t\treturn this._parent;\n\t}\n\n\ttext(): string {\n\t\treturn this._oneLinePreviewText;\n\t}\n\n\trange(): Range {\n\t\treturn this._range;\n\t}\n\n\t@memoize\n\tpreview(): { before: string; fullBefore: string; inside: string; after: string } {\n\t\tconst fullBefore = this._oneLinePreviewText.substring(0, this._rangeInPreviewText.startColumn - 1), before = lcut(fullBefore, 26, '…');\n\n\t\tlet inside = this.getMatchString(), after = this._oneLinePreviewText.substring(this._rangeInPreviewText.endColumn - 1);\n\n\t\tlet charsRemaining = MatchImpl.MAX_PREVIEW_CHARS - before.length;\n\t\tinside = inside.substr(0, charsRemaining);\n\t\tcharsRemaining -= inside.length;\n\t\tafter = after.substr(0, charsRemaining);\n\n\t\treturn {\n\t\t\tbefore,\n\t\t\tfullBefore,\n\t\t\tinside,\n\t\t\tafter,\n\t\t};\n\t}\n\n\tget replaceString(): string {\n\t\tconst searchModel = this.parent().parent().searchModel;\n\t\tif (!searchModel.replacePattern) {\n\t\t\tthrow new Error('searchModel.replacePattern must be set before accessing replaceString');\n\t\t}\n\n\t\tconst fullMatchText = this.fullMatchText();\n\t\tlet replaceString = searchModel.replacePattern.getReplaceString(fullMatchText, searchModel.preserveCase);\n\t\tif (replaceString !== null) {\n\t\t\treturn replaceString;\n\t\t}\n\n\t\t// Search/find normalize line endings - check whether \\r prevents regex from matching\n\t\tconst fullMatchTextWithoutCR = fullMatchText.replace(/\\r\\n/g, '\\n');\n\t\tif (fullMatchTextWithoutCR !== fullMatchText) {\n\t\t\treplaceString = searchModel.replacePattern.getReplaceString(fullMatchTextWithoutCR, searchModel.preserveCase);\n\t\t\tif (replaceString !== null) {\n\t\t\t\treturn replaceString;\n\t\t\t}\n\t\t}\n\n\t\t// If match string is not matching then regex pattern has a lookahead expression\n\t\tconst contextMatchTextWithSurroundingContent = this.fullMatchText(true);\n\t\treplaceString = searchModel.replacePattern.getReplaceString(contextMatchTextWithSurroundingContent, searchModel.preserveCase);\n\t\tif (replaceString !== null) {\n\t\t\treturn replaceString;\n\t\t}\n\n\t\t// Search/find normalize line endings, this time in full context\n\t\tconst contextMatchTextWithoutCR = contextMatchTextWithSurroundingContent.replace(/\\r\\n/g, '\\n');\n\t\tif (contextMatchTextWithoutCR !== contextMatchTextWithSurroundingContent) {\n\t\t\treplaceString = searchModel.replacePattern.getReplaceString(contextMatchTextWithoutCR, searchModel.preserveCase);\n\t\t\tif (replaceString !== null) {\n\t\t\t\treturn replaceString;\n\t\t\t}\n\t\t}\n\n\t\t// Match string is still not matching. Could be unsupported matches (multi-line).\n\t\treturn searchModel.replacePattern.pattern;\n\t}\n\n\tfullMatchText(includeSurrounding = false): string {\n\t\tlet thisMatchPreviewLines: string[];\n\t\tif (includeSurrounding) {\n\t\t\tthisMatchPreviewLines = this._fullPreviewLines;\n\t\t} else {\n\t\t\tthisMatchPreviewLines = this._fullPreviewLines.slice(this._fullPreviewRange.startLineNumber, this._fullPreviewRange.endLineNumber + 1);\n\t\t\tthisMatchPreviewLines[thisMatchPreviewLines.length - 1] = thisMatchPreviewLines[thisMatchPreviewLines.length - 1].slice(0, this._fullPreviewRange.endColumn);\n\t\t\tthisMatchPreviewLines[0] = thisMatchPreviewLines[0].slice(this._fullPreviewRange.startColumn);\n\t\t}\n\n\t\treturn thisMatchPreviewLines.join('\\n');\n\t}\n\n\trangeInPreview() {\n\t\t// convert to editor's base 1 positions.\n\t\treturn {\n\t\t\t...this._fullPreviewRange,\n\t\t\tstartColumn: this._fullPreviewRange.startColumn + 1,\n\t\t\tendColumn: this._fullPreviewRange.endColumn + 1\n\t\t};\n\t}\n\n\tfullPreviewLines(): string[] {\n\t\treturn this._fullPreviewLines.slice(this._fullPreviewRange.startLineNumber, this._fullPreviewRange.endLineNumber + 1);\n\t}\n\n\tgetMatchString(): string {\n\t\treturn this._oneLinePreviewText.substring(this._rangeInPreviewText.startColumn - 1, this._rangeInPreviewText.endColumn - 1);\n\t}\n\n\tget isReadonly() {\n\t\treturn this._isReadonly;\n\t}\n}\n"]}