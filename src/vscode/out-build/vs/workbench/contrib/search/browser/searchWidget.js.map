{"version":3,"sources":["vs/workbench/contrib/search/browser/searchWidget.ts"],"names":[],"mappings":"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","file":"searchWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Button, IButtonOptions } from '../../../../base/browser/ui/button/button.js';\nimport { IFindInputOptions } from '../../../../base/browser/ui/findinput/findInput.js';\nimport { ReplaceInput } from '../../../../base/browser/ui/findinput/replaceInput.js';\nimport { IInputBoxStyles, IMessage, InputBox } from '../../../../base/browser/ui/inputbox/inputBox.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { CONTEXT_FIND_WIDGET_NOT_VISIBLE } from '../../../../editor/contrib/find/browser/findModel.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry, KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ISearchConfigurationProperties } from '../../../services/search/common/search.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { appendKeyBindingLabel, isSearchViewFocused, getSearchView } from './searchActionsBase.js';\nimport * as Constants from '../common/constants.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { IToggleStyles, Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { searchReplaceAllIcon, searchHideReplaceIcon, searchShowContextIcon, searchShowReplaceIcon } from './searchIcons.js';\nimport { ToggleSearchEditorContextLinesCommandId } from '../../searchEditor/browser/constants.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { NotebookFindFilters } from '../../notebook/browser/contrib/find/findFilters.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { NotebookEditorInput } from '../../notebook/common/notebookEditorInput.js';\nimport { GroupModelChangeKind } from '../../../common/editor.js';\nimport { SearchFindInput } from './searchFindInput.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IDisposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { NotebookFindScopeType } from '../../notebook/common/notebookCommon.js';\n\n/** Specified in searchview.css */\nconst SingleLineInputHeight = 26;\n\nexport interface ISearchWidgetOptions {\n\tvalue?: string;\n\treplaceValue?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tisWholeWords?: boolean;\n\tsearchHistory?: string[];\n\treplaceHistory?: string[];\n\tpreserveCase?: boolean;\n\t_hideReplaceToggle?: boolean; // TODO: Search Editor's replace experience\n\tshowContextToggle?: boolean;\n\tinputBoxStyles: IInputBoxStyles;\n\ttoggleStyles: IToggleStyles;\n\tnotebookOptions?: NotebookToggleState;\n}\n\ninterface NotebookToggleState {\n\tisInNotebookMarkdownInput: boolean;\n\tisInNotebookMarkdownPreview: boolean;\n\tisInNotebookCellInput: boolean;\n\tisInNotebookCellOutput: boolean;\n}\n\nclass ReplaceAllAction extends Action {\n\n\tstatic readonly ID: string = 'search.action.replaceAll';\n\n\tconstructor(private _searchWidget: SearchWidget) {\n\t\tsuper(ReplaceAllAction.ID, '', ThemeIcon.asClassName(searchReplaceAllIcon), false);\n\t}\n\n\tset searchWidget(searchWidget: SearchWidget) {\n\t\tthis._searchWidget = searchWidget;\n\t}\n\n\toverride run(): Promise<any> {\n\t\tif (this._searchWidget) {\n\t\t\treturn this._searchWidget.triggerReplaceAll();\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nconst hoverLifecycleOptions = { groupId: 'search-widget' };\nconst ctrlKeyMod = (isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd);\n\nfunction stopPropagationForMultiLineUpwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && (isMultiline || textarea.clientHeight > SingleLineInputHeight) && textarea.selectionStart > 0) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nfunction stopPropagationForMultiLineDownwards(event: IKeyboardEvent, value: string, textarea: HTMLTextAreaElement | null) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (textarea && (isMultiline || textarea.clientHeight > SingleLineInputHeight) && textarea.selectionEnd < textarea.value.length) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\n\nexport class SearchWidget extends Widget {\n\tprivate static readonly INPUT_MAX_HEIGHT = 134;\n\n\tprivate static readonly REPLACE_ALL_DISABLED_LABEL = nls.localize('search.action.replaceAll.disabled.label', \"Replace All (Submit Search to Enable)\");\n\tprivate static readonly REPLACE_ALL_ENABLED_LABEL = (keyBindingService2: IKeybindingService): string => {\n\t\tconst kb = keyBindingService2.lookupKeybinding(ReplaceAllAction.ID);\n\t\treturn appendKeyBindingLabel(nls.localize('search.action.replaceAll.enabled.label', \"Replace All\"), kb);\n\t};\n\n\tdomNode: HTMLElement | undefined;\n\n\tsearchInput: SearchFindInput | undefined;\n\tsearchInputFocusTracker: dom.IFocusTracker | undefined;\n\tprivate searchInputBoxFocused: IContextKey<boolean>;\n\n\tprivate replaceContainer: HTMLElement | undefined;\n\treplaceInput: ReplaceInput | undefined;\n\treplaceInputFocusTracker: dom.IFocusTracker | undefined;\n\tprivate replaceInputBoxFocused: IContextKey<boolean>;\n\tprivate toggleReplaceButton: Button | undefined;\n\tprivate replaceAllAction: ReplaceAllAction | undefined;\n\tprivate replaceActive: IContextKey<boolean>;\n\tprivate replaceActionBar: ActionBar | undefined;\n\tprivate _replaceHistoryDelayer: Delayer<void>;\n\tprivate ignoreGlobalFindBufferOnNextFocus = false;\n\tprivate previousGlobalFindBufferValue: string | null = null;\n\n\tprivate _onSearchSubmit = this._register(new Emitter<{ triggeredOnType: boolean; delay: number }>());\n\treadonly onSearchSubmit: Event<{ triggeredOnType: boolean; delay: number }> = this._onSearchSubmit.event;\n\n\tprivate _onSearchCancel = this._register(new Emitter<{ focus: boolean }>());\n\treadonly onSearchCancel: Event<{ focus: boolean }> = this._onSearchCancel.event;\n\n\tprivate _onReplaceToggled = this._register(new Emitter<void>());\n\treadonly onReplaceToggled: Event<void> = this._onReplaceToggled.event;\n\n\tprivate _onReplaceStateChange = this._register(new Emitter<boolean>());\n\treadonly onReplaceStateChange: Event<boolean> = this._onReplaceStateChange.event;\n\n\tprivate _onPreserveCaseChange = this._register(new Emitter<boolean>());\n\treadonly onPreserveCaseChange: Event<boolean> = this._onPreserveCaseChange.event;\n\n\tprivate _onReplaceValueChanged = this._register(new Emitter<void>());\n\treadonly onReplaceValueChanged: Event<void> = this._onReplaceValueChanged.event;\n\n\tprivate _onReplaceAll = this._register(new Emitter<void>());\n\treadonly onReplaceAll: Event<void> = this._onReplaceAll.event;\n\n\tprivate _onBlur = this._register(new Emitter<void>());\n\treadonly onBlur: Event<void> = this._onBlur.event;\n\n\tprivate _onDidHeightChange = this._register(new Emitter<void>());\n\treadonly onDidHeightChange: Event<void> = this._onDidHeightChange.event;\n\n\tprivate readonly _onDidToggleContext = new Emitter<void>();\n\treadonly onDidToggleContext: Event<void> = this._onDidToggleContext.event;\n\n\tprivate showContextToggle!: Toggle;\n\tpublic contextLinesInput!: InputBox;\n\n\tprivate _notebookFilters: NotebookFindFilters;\n\tprivate readonly _toggleReplaceButtonListener: MutableDisposable<IDisposable>;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IClipboardService private readonly clipboardServce: IClipboardService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.replaceActive = Constants.SearchContext.ReplaceActiveKey.bindTo(this.contextKeyService);\n\t\tthis.searchInputBoxFocused = Constants.SearchContext.SearchInputBoxFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.replaceInputBoxFocused = Constants.SearchContext.ReplaceInputBoxFocusedKey.bindTo(this.contextKeyService);\n\n\t\tconst notebookOptions = options.notebookOptions ??\n\t\t{\n\t\t\tisInNotebookMarkdownInput: true,\n\t\t\tisInNotebookMarkdownPreview: true,\n\t\t\tisInNotebookCellInput: true,\n\t\t\tisInNotebookCellOutput: true\n\t\t};\n\t\tthis._notebookFilters = this._register(\n\t\t\tnew NotebookFindFilters(\n\t\t\t\tnotebookOptions.isInNotebookMarkdownInput,\n\t\t\t\tnotebookOptions.isInNotebookMarkdownPreview,\n\t\t\t\tnotebookOptions.isInNotebookCellInput,\n\t\t\t\tnotebookOptions.isInNotebookCellOutput,\n\t\t\t\t{ findScopeType: NotebookFindScopeType.None }\n\t\t\t));\n\n\t\tthis._register(\n\t\t\tthis._notebookFilters.onDidChange(() => {\n\t\t\t\tif (this.searchInput) {\n\t\t\t\t\tthis.searchInput.updateFilterStyles();\n\t\t\t\t}\n\t\t\t}));\n\t\tthis._register(this.editorService.onDidEditorsChange((e) => {\n\t\t\tif (this.searchInput &&\n\t\t\t\te.event.editor instanceof NotebookEditorInput &&\n\t\t\t\t(e.event.kind === GroupModelChangeKind.EDITOR_OPEN || e.event.kind === GroupModelChangeKind.EDITOR_CLOSE)) {\n\t\t\t\tthis.searchInput.filterVisible = this._hasNotebookOpen();\n\t\t\t}\n\t\t}));\n\n\t\tthis._replaceHistoryDelayer = new Delayer<void>(500);\n\t\tthis._toggleReplaceButtonListener = this._register(new MutableDisposable<IDisposable>());\n\n\t\tthis.render(container, options);\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor.accessibilitySupport')) {\n\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.accessibilityService.onDidChangeScreenReaderOptimized(() => this.updateAccessibilitySupport()));\n\t\tthis.updateAccessibilitySupport();\n\t}\n\n\tprivate _hasNotebookOpen(): boolean {\n\t\tconst editors = this.editorService.editors;\n\t\treturn editors.some(editor => editor instanceof NotebookEditorInput);\n\t}\n\n\tgetNotebookFilters() {\n\t\treturn this._notebookFilters;\n\t}\n\n\tfocus(select: boolean = true, focusReplace: boolean = false, suppressGlobalSearchBuffer = false): void {\n\t\tthis.ignoreGlobalFindBufferOnNextFocus = suppressGlobalSearchBuffer;\n\n\t\tif (focusReplace && this.isReplaceShown()) {\n\t\t\tif (this.replaceInput) {\n\t\t\t\tthis.replaceInput.focus();\n\t\t\t\tif (select) {\n\t\t\t\t\tthis.replaceInput.select();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.searchInput) {\n\t\t\t\tthis.searchInput.focus();\n\t\t\t\tif (select) {\n\t\t\t\t\tthis.searchInput.select();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetWidth(width: number) {\n\t\tthis.searchInput?.inputBox.layout();\n\t\tif (this.replaceInput) {\n\t\t\tthis.replaceInput.width = width - 28;\n\t\t\tthis.replaceInput.inputBox.layout();\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.searchInput?.clear();\n\t\tthis.replaceInput?.setValue('');\n\t\tthis.setReplaceAllActionState(false);\n\t}\n\n\tisReplaceShown(): boolean {\n\t\treturn this.replaceContainer ? !this.replaceContainer.classList.contains('disabled') : false;\n\t}\n\n\tisReplaceActive(): boolean {\n\t\treturn !!this.replaceActive.get();\n\t}\n\n\tgetReplaceValue(): string {\n\t\treturn this.replaceInput?.getValue() ?? '';\n\t}\n\n\ttoggleReplace(show?: boolean): void {\n\t\tif (show === undefined || show !== this.isReplaceShown()) {\n\t\t\tthis.onToggleReplaceButton();\n\t\t}\n\t}\n\n\tgetSearchHistory(): string[] {\n\t\treturn this.searchInput?.inputBox.getHistory() ?? [];\n\t}\n\n\tgetReplaceHistory(): string[] {\n\t\treturn this.replaceInput?.inputBox.getHistory() ?? [];\n\t}\n\n\tprependSearchHistory(history: string[]): void {\n\t\tthis.searchInput?.inputBox.prependHistory(history);\n\t}\n\n\tprependReplaceHistory(history: string[]): void {\n\t\tthis.replaceInput?.inputBox.prependHistory(history);\n\t}\n\n\tclearHistory(): void {\n\t\tthis.searchInput?.inputBox.clearHistory();\n\t\tthis.replaceInput?.inputBox.clearHistory();\n\t}\n\n\tshowNextSearchTerm() {\n\t\tthis.searchInput?.inputBox.showNextValue();\n\t}\n\n\tshowPreviousSearchTerm() {\n\t\tthis.searchInput?.inputBox.showPreviousValue();\n\t}\n\n\tshowNextReplaceTerm() {\n\t\tthis.replaceInput?.inputBox.showNextValue();\n\t}\n\n\tshowPreviousReplaceTerm() {\n\t\tthis.replaceInput?.inputBox.showPreviousValue();\n\t}\n\n\tsearchInputHasFocus(): boolean {\n\t\treturn !!this.searchInputBoxFocused.get();\n\t}\n\n\treplaceInputHasFocus(): boolean {\n\t\treturn !!this.replaceInput?.inputBox.hasFocus();\n\t}\n\n\tfocusReplaceAllAction(): void {\n\t\tthis.replaceActionBar?.focus(true);\n\t}\n\n\tfocusRegexAction(): void {\n\t\tthis.searchInput?.focusOnRegex();\n\t}\n\n\tset replaceButtonVisibility(val: boolean) {\n\t\tif (this.toggleReplaceButton) {\n\t\t\tthis.toggleReplaceButton.element.style.display = val ? '' : 'none';\n\t\t}\n\t}\n\n\tprivate render(container: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tthis.domNode = dom.append(container, dom.$('.search-widget'));\n\t\tthis.domNode.style.position = 'relative';\n\n\t\tif (!options._hideReplaceToggle) {\n\t\t\tthis.renderToggleReplaceButton(this.domNode);\n\t\t}\n\n\t\tthis.renderSearchInput(this.domNode, options);\n\t\tthis.renderReplaceInput(this.domNode, options);\n\t}\n\n\tprivate updateAccessibilitySupport(): void {\n\t\tthis.searchInput?.setFocusInputOnOptionClick(!this.accessibilityService.isScreenReaderOptimized());\n\t}\n\n\tprivate renderToggleReplaceButton(parent: HTMLElement): void {\n\t\tconst opts: IButtonOptions = {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined,\n\t\t\tbuttonSecondaryBackground: undefined,\n\t\t\tbuttonSecondaryForeground: undefined,\n\t\t\tbuttonSecondaryHoverBackground: undefined,\n\t\t\tbuttonSeparator: undefined,\n\t\t\ttitle: nls.localize('search.replace.toggle.button.title', \"Toggle Replace\"),\n\t\t\thoverDelegate: getDefaultHoverDelegate('element'),\n\t\t};\n\t\tthis.toggleReplaceButton = this._register(new Button(parent, opts));\n\t\tthis.toggleReplaceButton.element.setAttribute('aria-expanded', 'false');\n\t\tthis.toggleReplaceButton.element.classList.add('toggle-replace-button');\n\t\tthis.toggleReplaceButton.icon = searchHideReplaceIcon;\n\t\tthis._toggleReplaceButtonListener.value = this.toggleReplaceButton.onDidClick(() => this.onToggleReplaceButton());\n\t}\n\n\tprivate renderSearchInput(parent: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tconst history = options.searchHistory || [];\n\t\tconst inputOptions: IFindInputOptions = {\n\t\t\tlabel: nls.localize('label.Search', 'Search: Type Search Term and press Enter to search'),\n\t\t\tvalidation: (value: string) => this.validateSearchInput(value),\n\t\t\tplaceholder: nls.localize('search.placeHolder', \"Search\"),\n\t\t\tappendCaseSensitiveLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.SearchCommandIds.ToggleCaseSensitiveCommandId)),\n\t\t\tappendWholeWordsLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.SearchCommandIds.ToggleWholeWordCommandId)),\n\t\t\tappendRegexLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.SearchCommandIds.ToggleRegexCommandId)),\n\t\t\thistory: new Set(history),\n\t\t\tshowHistoryHint: () => showHistoryKeybindingHint(this.keybindingService),\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT,\n\t\t\tshowCommonFindToggles: true,\n\t\t\tinputBoxStyles: options.inputBoxStyles,\n\t\t\ttoggleStyles: options.toggleStyles,\n\t\t\thoverLifecycleOptions,\n\t\t};\n\n\t\tconst searchInputContainer = dom.append(parent, dom.$('.search-container.input-box'));\n\n\t\tthis.searchInput = this._register(\n\t\t\tnew SearchFindInput(\n\t\t\t\tsearchInputContainer,\n\t\t\t\tthis.contextViewService,\n\t\t\t\tinputOptions,\n\t\t\t\tthis.contextKeyService,\n\t\t\t\tthis.contextMenuService,\n\t\t\t\tthis.instantiationService,\n\t\t\t\tthis._notebookFilters,\n\t\t\t\tthis._hasNotebookOpen()\n\t\t\t)\n\t\t);\n\n\t\tthis._register(this.searchInput.onKeyDown((keyboardEvent: IKeyboardEvent) => this.onSearchInputKeyDown(keyboardEvent)));\n\t\tthis.searchInput.setValue(options.value || '');\n\t\tthis.searchInput.setRegex(!!options.isRegex);\n\t\tthis.searchInput.setCaseSensitive(!!options.isCaseSensitive);\n\t\tthis.searchInput.setWholeWords(!!options.isWholeWords);\n\t\tthis._register(this.searchInput.onCaseSensitiveKeyDown((keyboardEvent: IKeyboardEvent) => this.onCaseSensitiveKeyDown(keyboardEvent)));\n\t\tthis._register(this.searchInput.onRegexKeyDown((keyboardEvent: IKeyboardEvent) => this.onRegexKeyDown(keyboardEvent)));\n\t\tthis._register(this.searchInput.inputBox.onDidChange(() => this.onSearchInputChanged()));\n\t\tthis._register(this.searchInput.inputBox.onDidHeightChange(() => this._onDidHeightChange.fire()));\n\n\t\tthis._register(this.onReplaceValueChanged(() => {\n\t\t\tthis._replaceHistoryDelayer.trigger(() => this.replaceInput?.inputBox.addToHistory());\n\t\t}));\n\n\t\tthis.searchInputFocusTracker = this._register(dom.trackFocus(this.searchInput.inputBox.inputElement));\n\t\tthis._register(this.searchInputFocusTracker.onDidFocus(async () => {\n\t\t\tthis.searchInputBoxFocused.set(true);\n\n\t\t\tconst useGlobalFindBuffer = this.searchConfiguration.globalFindClipboard;\n\t\t\tif (!this.ignoreGlobalFindBufferOnNextFocus && useGlobalFindBuffer) {\n\t\t\t\tconst globalBufferText = await this.clipboardServce.readFindText();\n\t\t\t\tif (globalBufferText && this.previousGlobalFindBufferValue !== globalBufferText) {\n\t\t\t\t\tthis.searchInput?.inputBox.addToHistory();\n\t\t\t\t\tthis.searchInput?.setValue(globalBufferText);\n\t\t\t\t\tthis.searchInput?.select();\n\t\t\t\t}\n\n\t\t\t\tthis.previousGlobalFindBufferValue = globalBufferText;\n\t\t\t}\n\n\t\t\tthis.ignoreGlobalFindBufferOnNextFocus = false;\n\t\t}));\n\t\tthis._register(this.searchInputFocusTracker.onDidBlur(() => this.searchInputBoxFocused.set(false)));\n\n\n\t\tthis.showContextToggle = new Toggle({\n\t\t\tisChecked: false,\n\t\t\ttitle: appendKeyBindingLabel(nls.localize('showContext', \"Toggle Context Lines\"), this.keybindingService.lookupKeybinding(ToggleSearchEditorContextLinesCommandId)),\n\t\t\ticon: searchShowContextIcon,\n\t\t\thoverLifecycleOptions,\n\t\t\t...defaultToggleStyles\n\t\t});\n\t\tthis._register(this.showContextToggle.onChange(() => this.onContextLinesChanged()));\n\n\t\tif (options.showContextToggle) {\n\t\t\tthis.contextLinesInput = new InputBox(searchInputContainer, this.contextViewService, { type: 'number', inputBoxStyles: defaultInputBoxStyles });\n\t\t\tthis.contextLinesInput.element.classList.add('context-lines-input');\n\t\t\tthis.contextLinesInput.value = '' + (this.configurationService.getValue<ISearchConfigurationProperties>('search').searchEditor.defaultNumberOfContextLines ?? 1);\n\t\t\tthis._register(this.contextLinesInput.onDidChange((value: string) => {\n\t\t\t\tif (value !== '0') {\n\t\t\t\t\tthis.showContextToggle.checked = true;\n\t\t\t\t}\n\t\t\t\tthis.onContextLinesChanged();\n\t\t\t}));\n\t\t\tdom.append(searchInputContainer, this.showContextToggle.domNode);\n\t\t}\n\t}\n\n\tprivate onContextLinesChanged() {\n\t\tthis._onDidToggleContext.fire();\n\n\t\tif (this.contextLinesInput.value.includes('-')) {\n\t\t\tthis.contextLinesInput.value = '0';\n\t\t}\n\n\t\tthis._onDidToggleContext.fire();\n\t}\n\n\tpublic setContextLines(lines: number) {\n\t\tif (!this.contextLinesInput) { return; }\n\t\tif (lines === 0) {\n\t\t\tthis.showContextToggle.checked = false;\n\t\t} else {\n\t\t\tthis.showContextToggle.checked = true;\n\t\t\tthis.contextLinesInput.value = '' + lines;\n\t\t}\n\t}\n\n\tprivate renderReplaceInput(parent: HTMLElement, options: ISearchWidgetOptions): void {\n\t\tthis.replaceContainer = dom.append(parent, dom.$('.replace-container.disabled'));\n\t\tconst replaceBox = dom.append(this.replaceContainer, dom.$('.replace-input'));\n\n\t\tthis.replaceInput = this._register(new ContextScopedReplaceInput(replaceBox, this.contextViewService, {\n\t\t\tlabel: nls.localize('label.Replace', 'Replace: Type replace term and press Enter to preview'),\n\t\t\tplaceholder: nls.localize('search.replace.placeHolder', \"Replace\"),\n\t\t\tappendPreserveCaseLabel: appendKeyBindingLabel('', this.keybindingService.lookupKeybinding(Constants.SearchCommandIds.TogglePreserveCaseId)),\n\t\t\thistory: new Set(options.replaceHistory),\n\t\t\tshowHistoryHint: () => showHistoryKeybindingHint(this.keybindingService),\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT,\n\t\t\tinputBoxStyles: options.inputBoxStyles,\n\t\t\ttoggleStyles: options.toggleStyles,\n\t\t\thoverLifecycleOptions\n\t\t}, this.contextKeyService, true));\n\n\t\tthis._register(this.replaceInput.onDidOptionChange(viaKeyboard => {\n\t\t\tif (!viaKeyboard) {\n\t\t\t\tif (this.replaceInput) {\n\t\t\t\t\tthis._onPreserveCaseChange.fire(this.replaceInput.getPreserveCase());\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.replaceInput.onKeyDown((keyboardEvent) => this.onReplaceInputKeyDown(keyboardEvent)));\n\t\tthis.replaceInput.setValue(options.replaceValue || '');\n\t\tthis._register(this.replaceInput.inputBox.onDidChange(() => this._onReplaceValueChanged.fire()));\n\t\tthis._register(this.replaceInput.inputBox.onDidHeightChange(() => this._onDidHeightChange.fire()));\n\n\t\tthis.replaceAllAction = new ReplaceAllAction(this);\n\t\tthis.replaceAllAction.label = SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\tthis.replaceActionBar = this._register(new ActionBar(this.replaceContainer));\n\t\tthis.replaceActionBar.push([this.replaceAllAction], { icon: true, label: false });\n\t\tthis.onkeydown(this.replaceActionBar.domNode, (keyboardEvent) => this.onReplaceActionbarKeyDown(keyboardEvent));\n\n\t\tthis.replaceInputFocusTracker = this._register(dom.trackFocus(this.replaceInput.inputBox.inputElement));\n\t\tthis._register(this.replaceInputFocusTracker.onDidFocus(() => this.replaceInputBoxFocused.set(true)));\n\t\tthis._register(this.replaceInputFocusTracker.onDidBlur(() => this.replaceInputBoxFocused.set(false)));\n\t\tthis._register(this.replaceInput.onPreserveCaseKeyDown((keyboardEvent: IKeyboardEvent) => this.onPreserveCaseKeyDown(keyboardEvent)));\n\t}\n\n\ttriggerReplaceAll(): Promise<any> {\n\t\tthis._onReplaceAll.fire();\n\t\treturn Promise.resolve(null);\n\t}\n\n\tprivate onToggleReplaceButton(): void {\n\t\tthis.replaceContainer?.classList.toggle('disabled');\n\t\tif (this.isReplaceShown()) {\n\t\t\tthis.toggleReplaceButton?.element.classList.remove(...ThemeIcon.asClassNameArray(searchHideReplaceIcon));\n\t\t\tthis.toggleReplaceButton?.element.classList.add(...ThemeIcon.asClassNameArray(searchShowReplaceIcon));\n\t\t} else {\n\t\t\tthis.toggleReplaceButton?.element.classList.remove(...ThemeIcon.asClassNameArray(searchShowReplaceIcon));\n\t\t\tthis.toggleReplaceButton?.element.classList.add(...ThemeIcon.asClassNameArray(searchHideReplaceIcon));\n\t\t}\n\t\tthis.toggleReplaceButton?.element.setAttribute('aria-expanded', this.isReplaceShown() ? 'true' : 'false');\n\t\tthis.updateReplaceActiveState();\n\t\tthis._onReplaceToggled.fire();\n\t}\n\n\tsetValue(value: string) {\n\t\tthis.searchInput?.setValue(value);\n\t}\n\n\tsetReplaceAllActionState(enabled: boolean): void {\n\t\tif (this.replaceAllAction && (this.replaceAllAction.enabled !== enabled)) {\n\t\t\tthis.replaceAllAction.enabled = enabled;\n\t\t\tthis.replaceAllAction.label = enabled ? SearchWidget.REPLACE_ALL_ENABLED_LABEL(this.keybindingService) : SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\t\tthis.updateReplaceActiveState();\n\t\t}\n\t}\n\n\tprivate updateReplaceActiveState(): void {\n\t\tconst currentState = this.isReplaceActive();\n\t\tconst newState = this.isReplaceShown() && !!this.replaceAllAction?.enabled;\n\t\tif (currentState !== newState) {\n\t\t\tthis.replaceActive.set(newState);\n\t\t\tthis._onReplaceStateChange.fire(newState);\n\t\t\tthis.replaceInput?.inputBox.layout();\n\t\t}\n\t}\n\n\tprivate validateSearchInput(value: string): IMessage | null {\n\t\tif (value.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\tif (!(this.searchInput?.getRegex())) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\tnew RegExp(value, 'u');\n\t\t} catch (e) {\n\t\t\treturn { content: e.message };\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate onSearchInputChanged(): void {\n\t\tthis.searchInput?.clearMessage();\n\t\tthis.setReplaceAllActionState(false);\n\n\t\tif (this.searchConfiguration.searchOnType) {\n\t\t\tif (this.searchInput?.getRegex()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst regex = new RegExp(this.searchInput.getValue(), 'ug');\n\t\t\t\t\tconst matchienessHeuristic = `\n\t\t\t\t\t\t\t\t~!@#$%^&*()_+\n\t\t\t\t\t\t\t\t\\`1234567890-=\n\t\t\t\t\t\t\t\tqwertyuiop[]\\\\\n\t\t\t\t\t\t\t\tQWERTYUIOP{}|\n\t\t\t\t\t\t\t\tasdfghjkl;'\n\t\t\t\t\t\t\t\tASDFGHJKL:\"\n\t\t\t\t\t\t\t\tzxcvbnm,./\n\t\t\t\t\t\t\t\tZXCVBNM<>? `.match(regex)?.length ?? 0;\n\n\t\t\t\t\tconst delayMultiplier =\n\t\t\t\t\t\tmatchienessHeuristic < 50 ? 1 :\n\t\t\t\t\t\t\tmatchienessHeuristic < 100 ? 5 : // expressions like `.` or `\\w`\n\t\t\t\t\t\t\t\t10; // only things matching empty string\n\n\n\t\t\t\t\tthis.submitSearch(true, this.searchConfiguration.searchOnTypeDebouncePeriod * delayMultiplier);\n\t\t\t\t} catch {\n\t\t\t\t\t// pass\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.submitSearch(true, this.searchConfiguration.searchOnTypeDebouncePeriod);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSearchInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.searchInput?.inputBox.insertAtCursor('\\n');\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.searchInput?.onSearchSubmit();\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Escape)) {\n\t\t\tthis._onSearchCancel.fire({ focus: true });\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchInput?.focusOnCaseSensitive();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tstopPropagationForMultiLineUpwards(keyboardEvent, this.searchInput?.getValue() ?? '', this.searchInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tstopPropagationForMultiLineDownwards(keyboardEvent, this.searchInput?.getValue() ?? '', this.searchInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.PageUp)) {\n\t\t\tconst inputElement = this.searchInput?.inputBox.inputElement;\n\t\t\tif (inputElement) {\n\t\t\t\tinputElement.setSelectionRange(0, 0);\n\t\t\t\tinputElement.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.PageDown)) {\n\t\t\tconst inputElement = this.searchInput?.inputBox.inputElement;\n\t\t\tif (inputElement) {\n\t\t\t\tconst endOfText = inputElement.value.length;\n\t\t\t\tinputElement.setSelectionRange(endOfText, endOfText);\n\t\t\t\tinputElement.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onCaseSensitiveKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onRegexKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focusOnPreserve();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onPreserveCaseKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceActive()) {\n\t\t\t\tthis.focusReplaceAllAction();\n\t\t\t} else {\n\t\t\t\tthis._onBlur.fire();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t\telse if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate onReplaceInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.replaceInput?.inputBox.insertAtCursor('\\n');\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tthis.searchInput?.focusOnCaseSensitive();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.searchInput?.focus();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tstopPropagationForMultiLineUpwards(keyboardEvent, this.replaceInput?.getValue() ?? '', this.replaceInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\n\t\telse if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tstopPropagationForMultiLineDownwards(keyboardEvent, this.replaceInput?.getValue() ?? '', this.replaceInput?.domNode.querySelector('textarea') ?? null);\n\t\t}\n\t}\n\n\tprivate onReplaceActionbarKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate async submitSearch(triggeredOnType = false, delay: number = 0): Promise<void> {\n\t\tthis.searchInput?.validate();\n\t\tif (!this.searchInput?.inputBox.isInputValid()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.searchInput.getValue();\n\t\tconst useGlobalFindBuffer = this.searchConfiguration.globalFindClipboard;\n\t\tif (value && useGlobalFindBuffer) {\n\t\t\tawait this.clipboardServce.writeFindText(value);\n\t\t}\n\t\tthis._onSearchSubmit.fire({ triggeredOnType, delay });\n\t}\n\n\tgetContextLines() {\n\t\treturn this.showContextToggle.checked ? +this.contextLinesInput.value : 0;\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tconst current = +this.contextLinesInput.value;\n\t\tconst modified = current + (increase ? 1 : -1);\n\t\tthis.showContextToggle.checked = modified !== 0;\n\t\tthis.contextLinesInput.value = '' + modified;\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.showContextToggle.checked = !this.showContextToggle.checked;\n\t\tthis.onContextLinesChanged();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setReplaceAllActionState(false);\n\t\tsuper.dispose();\n\t}\n\n\tprivate get searchConfiguration(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n}\n\nexport function registerContributions() {\n\tKeybindingsRegistry.registerCommandAndKeybindingRule({\n\t\tid: ReplaceAllAction.ID,\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\twhen: ContextKeyExpr.and(Constants.SearchContext.SearchViewVisibleKey, Constants.SearchContext.ReplaceActiveKey, CONTEXT_FIND_WIDGET_NOT_VISIBLE),\n\t\tprimary: KeyMod.Alt | KeyMod.CtrlCmd | KeyCode.Enter,\n\t\thandler: accessor => {\n\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\tif (isSearchViewFocused(viewsService)) {\n\t\t\t\tconst searchView = getSearchView(viewsService);\n\t\t\t\tif (searchView) {\n\t\t\t\t\tnew ReplaceAllAction(searchView.searchAndReplaceWidget).run();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n"]}