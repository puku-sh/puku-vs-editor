{"version":3,"sources":["vs/workbench/contrib/search/browser/searchView.ts"],"names":[],"mappings":"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","file":"searchView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { MessageType } from '../../../../base/browser/ui/inputbox/inputBox.js';\nimport { IIdentityProvider } from '../../../../base/browser/ui/list/list.js';\nimport { IAsyncDataSource, ITreeContextMenuEvent, ObjectTreeElementCollapseState } from '../../../../base/browser/ui/tree/tree.js';\nimport { Delayer, RunOnceScheduler, Throttler } from '../../../../base/common/async.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as network from '../../../../base/common/network.js';\nimport './media/searchview.css';\nimport { getCodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { Selection } from '../../../../editor/common/core/selection.js';\nimport { IEditor } from '../../../../editor/common/editorCommon.js';\nimport { CommonFindController } from '../../../../editor/contrib/find/browser/findController.js';\nimport { MultiCursorSelectionController } from '../../../../editor/contrib/multicursor/browser/multicursor.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationChangeEvent, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IConfirmation, IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { FileChangesEvent, FileChangeType, IFileService } from '../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { getSelectionKeyboardEvent, WorkbenchCompressibleAsyncDataTree } from '../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService, withSelection } from '../../../../platform/opener/common/opener.js';\nimport { IProgress, IProgressService, IProgressStep } from '../../../../platform/progress/common/progress.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { IFileIconTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { OpenFolderAction } from '../../../browser/actions/workspaceActions.js';\nimport { ResourceListDnDHandler } from '../../../browser/dnd.js';\nimport { ResourceLabels } from '../../../browser/labels.js';\nimport { IViewPaneOptions, ViewPane } from '../../../browser/parts/views/viewPane.js';\nimport { IEditorPane } from '../../../common/editor.js';\nimport { Memento } from '../../../common/memento.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { NotebookEditor } from '../../notebook/browser/notebookEditor.js';\nimport { ExcludePatternInputWidget, IncludePatternInputWidget } from './patternInputWidget.js';\nimport { appendKeyBindingLabel } from './searchActionsBase.js';\nimport { IFindInFilesArgs } from './searchActionsFind.js';\nimport { searchDetailsIcon } from './searchIcons.js';\nimport { renderSearchMessage } from './searchMessage.js';\nimport { FileMatchRenderer, FolderMatchRenderer, MatchRenderer, SearchAccessibilityProvider, SearchDelegate, TextSearchResultRenderer } from './searchResultsView.js';\nimport { SearchWidget } from './searchWidget.js';\nimport * as Constants from '../common/constants.js';\nimport { IReplaceService } from './replace.js';\nimport { getOutOfWorkspaceEditorResources, SearchStateKey, SearchUIState } from '../common/search.js';\nimport { ISearchHistoryService, ISearchHistoryValues, SearchHistoryService } from '../common/searchHistoryService.js';\nimport { createEditorFromSearchResult } from '../../searchEditor/browser/searchEditorActions.js';\nimport { ACTIVE_GROUP, IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IPreferencesService, ISettingsEditorOptions } from '../../../services/preferences/common/preferences.js';\nimport { ITextQueryBuilderOptions, QueryBuilder } from '../../../services/search/common/queryBuilder.js';\nimport { SemanticSearchBehavior, IPatternInfo, ISearchComplete, ISearchConfiguration, ISearchConfigurationProperties, ITextQuery, SearchCompletionExitCode, SearchSortOrder, TextSearchCompleteMessageType, ViewMode, isAIKeyword } from '../../../services/search/common/search.js';\nimport { AISearchKeyword, TextSearchCompleteMessage } from '../../../services/search/common/searchExtTypes.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { INotebookService } from '../../notebook/common/notebookService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { ISearchViewModelWorkbenchService } from './searchTreeModel/searchViewModelWorkbenchService.js';\nimport { ISearchTreeMatch, isSearchTreeMatch, RenderableMatch, SearchModelLocation, IChangeEvent, FileMatchOrMatch, ISearchTreeFileMatch, ISearchTreeFolderMatch, ISearchModel, ISearchResult, isSearchTreeFileMatch, isSearchTreeFolderMatch, isSearchTreeFolderMatchNoRoot, isSearchTreeFolderMatchWithResource, isSearchTreeFolderMatchWorkspaceRoot, isSearchResult, isTextSearchHeading, ITextSearchHeading, isSearchHeader } from './searchTreeModel/searchTreeCommon.js';\nimport { INotebookFileInstanceMatch, isIMatchInNotebook } from './notebookSearch/notebookSearchModelBase.js';\nimport { searchMatchComparer } from './searchCompare.js';\nimport { AIFolderMatchWorkspaceRootImpl } from './AISearch/aiSearchModel.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { forcedExpandRecursively } from './searchActionsTopBar.js';\n\nconst $ = dom.$;\n\nexport enum SearchViewPosition {\n\tSideBar,\n\tPanel\n}\n\ninterface ISearchViewStateQuery {\n\tcontentPattern?: string;\n\treplaceText?: string | false;\n\tregex?: boolean;\n\twholeWords?: boolean;\n\tcaseSensitive?: boolean;\n\tfilePatterns?: string;\n\tfolderExclusions?: string;\n\tfolderIncludes?: string;\n\tonlyOpenEditors?: boolean;\n\tqueryDetailsExpanded?: string | boolean;\n\tuseExcludesAndIgnoreFiles?: boolean;\n\tpreserveCase?: boolean;\n\tsearchHistory?: string[];\n\treplaceHistory?: string[];\n\tisInNotebookMarkdownInput?: boolean;\n\tisInNotebookMarkdownPreview?: boolean;\n\tisInNotebookCellInput?: boolean;\n\tisInNotebookCellOutput?: boolean;\n}\n\ninterface ISearchViewState {\n\tquery?: ISearchViewStateQuery;\n\tview?: {\n\t\tshowReplace?: boolean;\n\t\ttreeLayout?: boolean;\n\t};\n}\n\nconst SEARCH_CANCELLED_MESSAGE = nls.localize('searchCanceled', \"Search was canceled before any results could be found - \");\nconst DEBOUNCE_DELAY = 75;\nexport class SearchView extends ViewPane {\n\n\tprivate static readonly ACTIONS_RIGHT_CLASS_NAME = 'actions-right';\n\n\tprivate isDisposed = false;\n\n\tprivate container!: HTMLElement;\n\tprivate queryBuilder: QueryBuilder;\n\tprivate viewModel: ISearchModel;\n\tprivate memento: Memento<ISearchViewState>;\n\n\tprivate viewletVisible: IContextKey<boolean>;\n\tprivate inputBoxFocused: IContextKey<boolean>;\n\tprivate inputPatternIncludesFocused: IContextKey<boolean>;\n\tprivate inputPatternExclusionsFocused: IContextKey<boolean>;\n\tprivate firstMatchFocused: IContextKey<boolean>;\n\tprivate fileMatchOrMatchFocused: IContextKey<boolean>;\n\tprivate fileMatchOrFolderMatchFocus: IContextKey<boolean>;\n\tprivate fileMatchOrFolderMatchWithResourceFocus: IContextKey<boolean>;\n\tprivate fileMatchFocused: IContextKey<boolean>;\n\tprivate folderMatchFocused: IContextKey<boolean>;\n\tprivate folderMatchWithResourceFocused: IContextKey<boolean>;\n\tprivate matchFocused: IContextKey<boolean>;\n\tprivate searchResultHeaderFocused: IContextKey<boolean>;\n\tprivate isEditableItem: IContextKey<boolean>;\n\tprivate hasSearchResultsKey: IContextKey<boolean>;\n\tprivate lastFocusState: 'input' | 'tree' = 'input';\n\n\tprivate searchStateKey: IContextKey<SearchUIState>;\n\tprivate hasSearchPatternKey: IContextKey<boolean>;\n\tprivate hasReplacePatternKey: IContextKey<boolean>;\n\tprivate hasFilePatternKey: IContextKey<boolean>;\n\tprivate hasSomeCollapsibleResultKey: IContextKey<boolean>;\n\n\tprivate tree!: WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch>;\n\tprivate treeLabels!: ResourceLabels;\n\tprivate viewletState: ISearchViewState;\n\tprivate messagesElement!: HTMLElement;\n\tprivate readonly messageDisposables: DisposableStore = new DisposableStore();\n\tprivate searchWidgetsContainerElement!: HTMLElement;\n\tprivate searchWidget!: SearchWidget;\n\tprivate size!: dom.Dimension;\n\tprivate queryDetails!: HTMLElement;\n\tprivate toggleQueryDetailsButton!: HTMLElement;\n\tprivate inputPatternExcludes!: ExcludePatternInputWidget;\n\tprivate inputPatternIncludes!: IncludePatternInputWidget;\n\tprivate resultsElement!: HTMLElement;\n\n\tprivate currentSelectedFileMatch: ISearchTreeFileMatch | undefined;\n\n\tprivate delayedRefresh: Delayer<void>;\n\tprivate changedWhileHidden: boolean;\n\n\tprivate searchWithoutFolderMessageElement: HTMLElement | undefined;\n\n\tprivate currentSearchQ = Promise.resolve();\n\tprivate addToSearchHistoryDelayer: Delayer<void>;\n\n\tprivate toggleCollapseStateDelayer: Delayer<void>;\n\n\tprivate triggerQueryDelayer: Delayer<void>;\n\tprivate pauseSearching = false;\n\n\tprivate treeAccessibilityProvider: SearchAccessibilityProvider;\n\n\tprivate treeViewKey: IContextKey<boolean>;\n\n\tprivate _visibleMatches: number = 0;\n\n\tprivate _refreshResultsScheduler: RunOnceScheduler;\n\n\tprivate _onSearchResultChangedDisposable: IDisposable | undefined;\n\tprivate _onAIResultChangedDisposable: IDisposable | undefined;\n\n\tprivate searchDataSource: SearchViewDataSource | undefined;\n\n\tprivate refreshTreeController: RefreshTreeController;\n\n\tprivate _cachedResults: ISearchComplete | undefined;\n\tprivate _cachedKeywords: string[] = [];\n\tpublic _pendingSemanticSearchPromise: Promise<ISearchComplete> | undefined;\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@ISearchViewModelWorkbenchService private readonly searchViewModelWorkbenchService: ISearchViewModelWorkbenchService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ISearchHistoryService private readonly searchHistoryService: ISearchHistoryService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IAccessibilitySignalService private readonly accessibilitySignalService: IAccessibilitySignalService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t) {\n\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\n\t\tthis.container = dom.$('.search-view');\n\n\t\t// globals\n\t\tthis.viewletVisible = Constants.SearchContext.SearchViewVisibleKey.bindTo(this.contextKeyService);\n\t\tthis.firstMatchFocused = Constants.SearchContext.FirstMatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchOrMatchFocused = Constants.SearchContext.FileMatchOrMatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchOrFolderMatchFocus = Constants.SearchContext.FileMatchOrFolderMatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchOrFolderMatchWithResourceFocus = Constants.SearchContext.FileMatchOrFolderMatchWithResourceFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchFocused = Constants.SearchContext.FileFocusKey.bindTo(this.contextKeyService);\n\t\tthis.folderMatchFocused = Constants.SearchContext.FolderFocusKey.bindTo(this.contextKeyService);\n\t\tthis.folderMatchWithResourceFocused = Constants.SearchContext.ResourceFolderFocusKey.bindTo(this.contextKeyService);\n\t\tthis.searchResultHeaderFocused = Constants.SearchContext.SearchResultHeaderFocused.bindTo(this.contextKeyService);\n\t\tthis.hasSearchResultsKey = Constants.SearchContext.HasSearchResults.bindTo(this.contextKeyService);\n\t\tthis.matchFocused = Constants.SearchContext.MatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.searchStateKey = SearchStateKey.bindTo(this.contextKeyService);\n\t\tthis.hasSearchPatternKey = Constants.SearchContext.ViewHasSearchPatternKey.bindTo(this.contextKeyService);\n\t\tthis.hasReplacePatternKey = Constants.SearchContext.ViewHasReplacePatternKey.bindTo(this.contextKeyService);\n\t\tthis.hasFilePatternKey = Constants.SearchContext.ViewHasFilePatternKey.bindTo(this.contextKeyService);\n\t\tthis.hasSomeCollapsibleResultKey = Constants.SearchContext.ViewHasSomeCollapsibleKey.bindTo(this.contextKeyService);\n\t\tthis.treeViewKey = Constants.SearchContext.InTreeViewKey.bindTo(this.contextKeyService);\n\t\tthis.refreshTreeController = this._register(this.instantiationService.createInstance(RefreshTreeController, this, () => this.searchConfig));\n\n\t\tthis._register(this.contextKeyService.onDidChangeContext(e => {\n\t\t\tconst keys = Constants.SearchContext.hasAIResultProvider.keys();\n\t\t\tif (e.affectsSome(new Set(keys))) {\n\t\t\t\tthis.refreshHasAISetting();\n\t\t\t}\n\t\t}));\n\n\t\t// scoped\n\t\tthis.contextKeyService = this._register(this.contextKeyService.createScoped(this.container));\n\t\tConstants.SearchContext.SearchViewFocusedKey.bindTo(this.contextKeyService).set(true);\n\t\tthis.inputBoxFocused = Constants.SearchContext.InputBoxFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.inputPatternIncludesFocused = Constants.SearchContext.PatternIncludesFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.inputPatternExclusionsFocused = Constants.SearchContext.PatternExcludesFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.isEditableItem = Constants.SearchContext.IsEditableItemKey.bindTo(this.contextKeyService);\n\n\t\tthis.instantiationService = this._register(this.instantiationService.createChild(\n\t\t\tnew ServiceCollection([IContextKeyService, this.contextKeyService])));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(async e => {\n\t\t\tif (e.affectsConfiguration('search.sortOrder')) {\n\t\t\t\tif (this.searchConfig.sortOrder === SearchSortOrder.Modified) {\n\t\t\t\t\t// If changing away from modified, remove all fileStats\n\t\t\t\t\t// so that updated files are re-retrieved next time.\n\t\t\t\t\tthis.removeFileStats();\n\t\t\t\t}\n\t\t\t\tawait this.refreshTreeController.queue();\n\t\t\t}\n\t\t}));\n\n\t\tthis.viewModel = this.searchViewModelWorkbenchService.searchModel;\n\t\tthis.queryBuilder = this.instantiationService.createInstance(QueryBuilder);\n\t\tthis.memento = new Memento(this.id, storageService);\n\t\tthis.viewletState = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\n\t\tthis._register(this.fileService.onDidFilesChange(e => this.onFilesChanged(e)));\n\t\tthis._register(this.textFileService.untitled.onWillDispose(model => this.onUntitledDidDispose(model.resource)));\n\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => this.onDidChangeWorkbenchState()));\n\t\tthis._register(this.searchHistoryService.onDidClearHistory(() => this.clearHistory()));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n\n\t\tthis.delayedRefresh = this._register(new Delayer<void>(250));\n\n\t\tthis.addToSearchHistoryDelayer = this._register(new Delayer<void>(2000));\n\t\tthis.toggleCollapseStateDelayer = this._register(new Delayer<void>(100));\n\t\tthis.triggerQueryDelayer = this._register(new Delayer<void>(0));\n\n\t\tthis.treeAccessibilityProvider = this.instantiationService.createInstance(SearchAccessibilityProvider, this);\n\t\tthis.isTreeLayoutViewVisible = this.viewletState.view?.treeLayout ?? (this.searchConfig.defaultViewMode === ViewMode.Tree);\n\n\t\tthis._refreshResultsScheduler = this._register(new RunOnceScheduler(this._updateResults.bind(this), 80));\n\n\t\t// storage service listener for for roaming changes\n\t\tthis._register(this.storageService.onWillSaveState(() => {\n\t\t\tthis._saveSearchHistoryService();\n\t\t}));\n\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.WORKSPACE, SearchHistoryService.SEARCH_HISTORY_KEY, this._store)(() => {\n\t\t\tconst restoredHistory = this.searchHistoryService.load();\n\n\t\t\tif (restoredHistory.include) {\n\t\t\t\tthis.inputPatternIncludes.prependHistory(restoredHistory.include);\n\t\t\t}\n\t\t\tif (restoredHistory.exclude) {\n\t\t\t\tthis.inputPatternExcludes.prependHistory(restoredHistory.exclude);\n\t\t\t}\n\t\t\tif (restoredHistory.search) {\n\t\t\t\tthis.searchWidget.prependSearchHistory(restoredHistory.search);\n\t\t\t}\n\t\t\tif (restoredHistory.replace) {\n\t\t\t\tthis.searchWidget.prependReplaceHistory(restoredHistory.replace);\n\t\t\t}\n\t\t}));\n\n\t\tthis.changedWhileHidden = this.hasSearchResults();\n\t}\n\n\tpublic get cachedResults() {\n\t\treturn this._cachedResults;\n\t}\n\n\tasync queueRefreshTree(): Promise<void> {\n\t\treturn this.refreshTreeController.queue();\n\t}\n\tget isTreeLayoutViewVisible(): boolean {\n\t\treturn this.treeViewKey.get() ?? false;\n\t}\n\n\tprivate set isTreeLayoutViewVisible(visible: boolean) {\n\t\tthis.treeViewKey.set(visible);\n\t}\n\n\tasync setTreeView(visible: boolean): Promise<void> {\n\t\tif (visible === this.isTreeLayoutViewVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.isTreeLayoutViewVisible = visible;\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\treturn this.refreshTreeController.queue();\n\t}\n\n\tprivate get state(): SearchUIState {\n\t\treturn this.searchStateKey.get() ?? SearchUIState.Idle;\n\t}\n\n\tprivate set state(v: SearchUIState) {\n\t\tthis.searchStateKey.set(v);\n\t}\n\n\tgetContainer(): HTMLElement {\n\t\treturn this.container;\n\t}\n\n\tget searchResult(): ISearchResult {\n\t\treturn this.viewModel && this.viewModel.searchResult;\n\t}\n\n\tget model(): ISearchModel {\n\t\treturn this.viewModel;\n\t}\n\n\tprivate async refreshHasAISetting(): Promise<void> {\n\t\tconst shouldShowAI = this.shouldShowAIResults();\n\t\tif (!this.tree || !this.tree.hasNode(this.searchResult)) {\n\t\t\treturn;\n\t\t}\n\t\tif (shouldShowAI && !this.tree.hasNode(this.searchResult.aiTextSearchResult)) {\n\t\t\tif (this.model.searchResult.getCachedSearchComplete(false)) {\n\t\t\t\treturn this.refreshAndUpdateCount();\n\t\t\t}\n\t\t} else if (!shouldShowAI && this.tree.hasNode(this.searchResult.aiTextSearchResult)) {\n\t\t\treturn this.refreshAndUpdateCount();\n\t\t}\n\t}\n\n\tprivate onDidChangeWorkbenchState(): void {\n\t\tif (this.contextService.getWorkbenchState() !== WorkbenchState.EMPTY && this.searchWithoutFolderMessageElement) {\n\t\t\tdom.hide(this.searchWithoutFolderMessageElement);\n\t\t}\n\t}\n\n\tprivate refreshInputs() {\n\t\tthis.pauseSearching = true;\n\t\tthis.searchWidget.setValue(this.viewModel.searchResult.query?.contentPattern.pattern ?? '');\n\t\tthis.searchWidget.setReplaceAllActionState(false);\n\t\tthis.searchWidget.toggleReplace(true);\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(this.viewModel.searchResult.query?.onlyOpenEditors || false);\n\t\tthis.inputPatternExcludes.setUseExcludesAndIgnoreFiles(!this.viewModel.searchResult.query?.userDisabledExcludesAndIgnoreFiles || true);\n\t\tthis.searchIncludePattern.setValue('');\n\t\tthis.searchExcludePattern.setValue('');\n\t\tthis.pauseSearching = false;\n\t}\n\n\tpublic async replaceSearchModel(searchModel: ISearchModel, asyncResults: Promise<ISearchComplete>): Promise<void> {\n\t\tlet progressComplete: () => void;\n\t\tthis.progressService.withProgress({ location: this.getProgressLocation(), delay: 0 }, _progress => {\n\t\t\treturn new Promise<void>(resolve => progressComplete = resolve);\n\t\t});\n\n\t\tconst slowTimer = setTimeout(() => {\n\t\t\tthis.state = SearchUIState.SlowSearch;\n\t\t}, 2000);\n\n\t\tthis._refreshResultsScheduler.schedule();\n\n\t\t// remove old model and use the new searchModel\n\t\tsearchModel.location = SearchModelLocation.PANEL;\n\t\tsearchModel.replaceActive = this.viewModel.isReplaceActive();\n\t\tsearchModel.replaceString = this.searchWidget.getReplaceValue();\n\t\tthis._onSearchResultChangedDisposable?.dispose();\n\t\tthis._onSearchResultChangedDisposable = this._register(searchModel.onSearchResultChanged(async (event) => this.onSearchResultsChanged(event)));\n\n\t\t// this call will also dispose of the old model\n\t\tthis.searchViewModelWorkbenchService.searchModel = searchModel;\n\t\tthis.viewModel = searchModel;\n\t\tthis.tree.setInput(this.viewModel.searchResult);\n\n\t\tawait this.onSearchResultsChanged();\n\t\tthis.refreshInputs();\n\n\t\tasyncResults.then((complete) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\treturn this.onSearchComplete(progressComplete, undefined, undefined, complete);\n\t\t}, (e) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\treturn this.onSearchError(e, progressComplete, undefined, undefined);\n\t\t});\n\n\t\tawait this.expandIfSingularResult();\n\t}\n\n\tprotected override renderBody(parent: HTMLElement): void {\n\t\tsuper.renderBody(parent);\n\t\tthis.container = dom.append(parent, dom.$('.search-view'));\n\n\t\tthis.searchWidgetsContainerElement = dom.append(this.container, $('.search-widgets-container'));\n\t\tthis.createSearchWidget(this.searchWidgetsContainerElement);\n\n\t\tconst history = this.searchHistoryService.load();\n\t\tconst filePatterns = this.viewletState.query?.filePatterns || '';\n\t\tconst patternExclusions = this.viewletState.query?.folderExclusions || '';\n\t\tconst patternExclusionsHistory: string[] = history.exclude || [];\n\t\tconst patternIncludes = this.viewletState.query?.folderIncludes || '';\n\t\tconst patternIncludesHistory: string[] = history.include || [];\n\t\tconst onlyOpenEditors = this.viewletState.query?.onlyOpenEditors || false;\n\n\t\tconst queryDetailsExpanded = this.viewletState.query?.queryDetailsExpanded || '';\n\t\tconst useExcludesAndIgnoreFiles = typeof this.viewletState.query?.useExcludesAndIgnoreFiles === 'boolean' ?\n\t\t\tthis.viewletState.query.useExcludesAndIgnoreFiles : true;\n\n\t\tthis.queryDetails = dom.append(this.searchWidgetsContainerElement, $('.query-details'));\n\n\t\t// Toggle query details button\n\t\tconst toggleQueryDetailsLabel = nls.localize('moreSearch', \"Toggle Search Details\");\n\t\tthis.toggleQueryDetailsButton = dom.append(this.queryDetails,\n\t\t\t$('.more' + ThemeIcon.asCSSSelector(searchDetailsIcon), { tabindex: 0, role: 'button', 'aria-label': toggleQueryDetailsLabel }));\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('element'), this.toggleQueryDetailsButton, toggleQueryDetailsLabel));\n\n\t\tthis._register(dom.addDisposableListener(this.toggleQueryDetailsButton, dom.EventType.CLICK, e => {\n\t\t\tdom.EventHelper.stop(e);\n\t\t\tthis.toggleQueryDetails(!this.accessibilityService.isScreenReaderOptimized());\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this.toggleQueryDetailsButton, dom.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\tthis.toggleQueryDetails(false);\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this.toggleQueryDetailsButton, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\tif (event.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tif (this.searchWidget.isReplaceActive()) {\n\t\t\t\t\tthis.searchWidget.focusReplaceAllAction();\n\t\t\t\t} else {\n\t\t\t\t\tthis.searchWidget.isReplaceShown() ? this.searchWidget.replaceInput?.focusOnPreserve() : this.searchWidget.focusRegexAction();\n\t\t\t\t}\n\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t}\n\t\t}));\n\n\t\t// folder includes list\n\t\tconst folderIncludesList = dom.append(this.queryDetails, $('.file-types.includes'));\n\t\tconst filesToIncludeTitle = nls.localize('searchScope.includes', \"files to include\");\n\t\tdom.append(folderIncludesList, $('h4', undefined, filesToIncludeTitle));\n\n\t\tthis.inputPatternIncludes = this._register(this.instantiationService.createInstance(IncludePatternInputWidget, folderIncludesList, this.contextViewService, {\n\t\t\tariaLabel: filesToIncludeTitle,\n\t\t\tplaceholder: nls.localize('placeholder.includes', \"e.g. *.ts, src/**/include\"),\n\t\t\tshowPlaceholderOnFocus: true,\n\t\t\thistory: patternIncludesHistory,\n\t\t\tinputBoxStyles: defaultInputBoxStyles\n\t\t}));\n\n\t\tthis.inputPatternIncludes.setValue(patternIncludes);\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(onlyOpenEditors);\n\n\t\tthis._register(this.inputPatternIncludes.onCancel(() => this.cancelSearch(false)));\n\t\tthis._register(this.inputPatternIncludes.onChangeSearchInEditorsBox(() => this.triggerQueryChange()));\n\n\t\tthis.trackInputBox(this.inputPatternIncludes.inputFocusTracker, this.inputPatternIncludesFocused);\n\n\t\t// excludes list\n\t\tconst excludesList = dom.append(this.queryDetails, $('.file-types.excludes'));\n\t\tconst excludesTitle = nls.localize('searchScope.excludes', \"files to exclude\");\n\t\tdom.append(excludesList, $('h4', undefined, excludesTitle));\n\t\tthis.inputPatternExcludes = this._register(this.instantiationService.createInstance(ExcludePatternInputWidget, excludesList, this.contextViewService, {\n\t\t\tariaLabel: excludesTitle,\n\t\t\tplaceholder: nls.localize('placeholder.excludes', \"e.g. *.ts, src/**/exclude\"),\n\t\t\tshowPlaceholderOnFocus: true,\n\t\t\thistory: patternExclusionsHistory,\n\t\t\tinputBoxStyles: defaultInputBoxStyles\n\t\t}));\n\n\t\tthis.inputPatternExcludes.setValue(patternExclusions);\n\t\tthis.inputPatternExcludes.setUseExcludesAndIgnoreFiles(useExcludesAndIgnoreFiles);\n\n\t\tthis._register(this.inputPatternExcludes.onCancel(() => this.cancelSearch(false)));\n\t\tthis._register(this.inputPatternExcludes.onChangeIgnoreBox(() => this.triggerQueryChange()));\n\t\tthis.trackInputBox(this.inputPatternExcludes.inputFocusTracker, this.inputPatternExclusionsFocused);\n\n\t\tconst updateHasFilePatternKey = () => this.hasFilePatternKey.set(this.inputPatternIncludes.getValue().length > 0 || this.inputPatternExcludes.getValue().length > 0);\n\t\tupdateHasFilePatternKey();\n\t\tconst onFilePatternSubmit = (triggeredOnType: boolean) => {\n\t\t\tthis.triggerQueryChange({ triggeredOnType, delay: this.searchConfig.searchOnTypeDebouncePeriod });\n\t\t\tif (triggeredOnType) {\n\t\t\t\tupdateHasFilePatternKey();\n\t\t\t}\n\t\t};\n\t\tthis._register(this.inputPatternIncludes.onSubmit(onFilePatternSubmit));\n\t\tthis._register(this.inputPatternExcludes.onSubmit(onFilePatternSubmit));\n\n\t\tthis.messagesElement = dom.append(this.container, $('.messages.text-search-provider-messages'));\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\tthis.showSearchWithoutFolderMessage();\n\t\t}\n\n\t\tthis.createSearchResultsView(this.container);\n\n\t\tif (filePatterns !== '' || patternExclusions !== '' || patternIncludes !== '' || queryDetailsExpanded !== '' || !useExcludesAndIgnoreFiles) {\n\t\t\tthis.toggleQueryDetails(true, true, true);\n\t\t}\n\n\t\tthis._onSearchResultChangedDisposable = this._register(this.viewModel.onSearchResultChanged(async (event) => await this.onSearchResultsChanged(event)));\n\n\t\t// Subscribe to AI search result changes and update the tree when new AI results are reported\n\t\tthis._onAIResultChangedDisposable?.dispose();\n\t\tthis._onAIResultChangedDisposable = this._register(\n\t\t\tthis.viewModel.searchResult.aiTextSearchResult.onChange((e) => {\n\t\t\t\t// Only refresh the AI node, not the whole tree\n\t\t\t\tif (this.tree && this.tree.hasNode(this.searchResult.aiTextSearchResult) && !e.removed) {\n\t\t\t\t\tthis.tree.updateChildren(this.searchResult.aiTextSearchResult);\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => this.onVisibilityChanged(visible)));\n\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\tthis._register(this.themeService.onDidFileIconThemeChange(this.updateIndentStyles, this));\n\t}\n\n\tprivate updateIndentStyles(theme: IFileIconTheme): void {\n\t\tthis.resultsElement.classList.toggle('hide-arrows', this.isTreeLayoutViewVisible && theme.hidesExplorerArrows);\n\t}\n\n\tprivate async onVisibilityChanged(visible: boolean): Promise<void> {\n\t\tthis.viewletVisible.set(visible);\n\t\tif (visible) {\n\t\t\tif (this.changedWhileHidden) {\n\t\t\t\t// Render if results changed while viewlet was hidden - #37818\n\t\t\t\tawait this.refreshAndUpdateCount();\n\t\t\t\tthis.changedWhileHidden = false;\n\t\t\t}\n\t\t} else {\n\t\t\t// Reset last focus to input to preserve opening the viewlet always focusing the query editor.\n\t\t\tthis.lastFocusState = 'input';\n\t\t}\n\n\t\t// Enable highlights if there are searchresults\n\t\tthis.viewModel?.searchResult.toggleHighlights(visible);\n\t}\n\n\tget searchAndReplaceWidget(): SearchWidget {\n\t\treturn this.searchWidget;\n\t}\n\n\tget searchIncludePattern(): IncludePatternInputWidget {\n\t\treturn this.inputPatternIncludes;\n\t}\n\n\tget searchExcludePattern(): ExcludePatternInputWidget {\n\t\treturn this.inputPatternExcludes;\n\t}\n\n\tprivate createSearchWidget(container: HTMLElement): void {\n\t\tconst contentPattern = this.viewletState.query?.contentPattern || '';\n\t\tconst replaceText = this.viewletState.query?.replaceText || '';\n\t\tconst isRegex = this.viewletState.query?.regex === true;\n\t\tconst isWholeWords = this.viewletState.query?.wholeWords === true;\n\t\tconst isCaseSensitive = this.viewletState.query?.caseSensitive === true;\n\t\tconst history = this.searchHistoryService.load();\n\t\tconst searchHistory = history.search || this.viewletState.query?.searchHistory || [];\n\t\tconst replaceHistory = history.replace || this.viewletState.query?.replaceHistory || [];\n\t\tconst showReplace = typeof this.viewletState.view?.showReplace === 'boolean' ? this.viewletState.view.showReplace : true;\n\t\tconst preserveCase = this.viewletState.query?.preserveCase === true;\n\n\t\tconst isInNotebookMarkdownInput = this.viewletState.query?.isInNotebookMarkdownInput ?? true;\n\t\tconst isInNotebookMarkdownPreview = this.viewletState.query?.isInNotebookMarkdownPreview ?? true;\n\t\tconst isInNotebookCellInput = this.viewletState.query?.isInNotebookCellInput ?? true;\n\t\tconst isInNotebookCellOutput = this.viewletState.query?.isInNotebookCellOutput ?? true;\n\n\t\tthis.searchWidget = this._register(this.instantiationService.createInstance(SearchWidget, container, {\n\t\t\tvalue: contentPattern,\n\t\t\treplaceValue: replaceText,\n\t\t\tisRegex: isRegex,\n\t\t\tisCaseSensitive: isCaseSensitive,\n\t\t\tisWholeWords: isWholeWords,\n\t\t\tsearchHistory: searchHistory,\n\t\t\treplaceHistory: replaceHistory,\n\t\t\tpreserveCase: preserveCase,\n\t\t\tinputBoxStyles: defaultInputBoxStyles,\n\t\t\ttoggleStyles: defaultToggleStyles,\n\t\t\tnotebookOptions: {\n\t\t\t\tisInNotebookMarkdownInput,\n\t\t\t\tisInNotebookMarkdownPreview,\n\t\t\t\tisInNotebookCellInput,\n\t\t\t\tisInNotebookCellOutput,\n\t\t\t}\n\t\t}));\n\n\t\tif (!this.searchWidget.searchInput || !this.searchWidget.replaceInput) {\n\t\t\tthis.logService.warn(`Cannot fully create search widget. Search or replace input undefined. SearchInput: ${this.searchWidget.searchInput}, ReplaceInput: ${this.searchWidget.replaceInput}`);\n\t\t\treturn;\n\t\t}\n\n\t\tif (showReplace) {\n\t\t\tthis.searchWidget.toggleReplace(true);\n\t\t}\n\n\t\tthis._register(this.searchWidget.onSearchSubmit(options => {\n\t\t\tconst shouldRenderAIResults = this.configurationService.getValue<ISearchConfigurationProperties>('search').searchView.semanticSearchBehavior;\n\t\t\tif (shouldRenderAIResults === SemanticSearchBehavior.Auto) {\n\t\t\t\tthis.logService.info(`SearchView: Automatically rendering AI results`);\n\t\t\t}\n\t\t\tthis.triggerQueryChange({\n\t\t\t\t...options,\n\t\t\t\tshouldKeepAIResults: false,\n\t\t\t\tshouldUpdateAISearch: shouldRenderAIResults === SemanticSearchBehavior.Auto,\n\t\t\t});\n\t\t}));\n\t\tthis._register(this.searchWidget.onSearchCancel(({ focus }) => this.cancelSearch(focus)));\n\t\tthis._register(this.searchWidget.searchInput.onDidOptionChange(() => {\n\t\t\tthis.triggerQueryChange({ shouldKeepAIResults: true });\n\t\t}));\n\n\t\tthis._register(this.searchWidget.getNotebookFilters().onDidChange(() => this.triggerQueryChange({ shouldKeepAIResults: true })));\n\n\t\tconst updateHasPatternKey = () => this.hasSearchPatternKey.set(this.searchWidget.searchInput ? (this.searchWidget.searchInput.getValue().length > 0) : false);\n\t\tupdateHasPatternKey();\n\t\tthis._register(this.searchWidget.searchInput.onDidChange(() => updateHasPatternKey()));\n\n\t\tconst updateHasReplacePatternKey = () => this.hasReplacePatternKey.set(this.searchWidget.getReplaceValue().length > 0);\n\t\tupdateHasReplacePatternKey();\n\t\tthis._register(this.searchWidget.replaceInput.inputBox.onDidChange(() => updateHasReplacePatternKey()));\n\n\t\tthis._register(this.searchWidget.onDidHeightChange(() => this.reLayout()));\n\n\t\tthis._register(this.searchWidget.onReplaceToggled(() => this.reLayout()));\n\t\tthis._register(this.searchWidget.onReplaceStateChange(async (state) => {\n\t\t\tthis.viewModel.replaceActive = state;\n\t\t\tawait this.refreshTreeController.queue();\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onPreserveCaseChange(async (state) => {\n\t\t\tthis.viewModel.preserveCase = state;\n\t\t\tawait this.refreshTreeController.queue();\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onReplaceValueChanged(() => {\n\t\t\tthis.viewModel.replaceString = this.searchWidget.getReplaceValue();\n\t\t\tthis.delayedRefresh.trigger(async () => this.refreshTreeController.queue());\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onBlur(() => {\n\t\t\tthis.toggleQueryDetailsButton.focus();\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onReplaceAll(() => this.replaceAll()));\n\n\t\tthis.trackInputBox(this.searchWidget.searchInputFocusTracker);\n\t\tthis.trackInputBox(this.searchWidget.replaceInputFocusTracker);\n\t}\n\n\tpublic shouldShowAIResults(): boolean {\n\t\tconst hasProvider = Constants.SearchContext.hasAIResultProvider.getValue(this.contextKeyService);\n\t\treturn !!hasProvider;\n\t}\n\tprivate async onConfigurationUpdated(event?: IConfigurationChangeEvent): Promise<void> {\n\t\tif (event && (event.affectsConfiguration('search.decorations.colors') || event.affectsConfiguration('search.decorations.badges'))) {\n\t\t\treturn this.refreshTreeController.queue();\n\t\t}\n\t}\n\n\tprivate trackInputBox(inputFocusTracker: dom.IFocusTracker | undefined, contextKey?: IContextKey<boolean>): void {\n\t\tif (!inputFocusTracker) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._register(inputFocusTracker.onDidFocus(() => {\n\t\t\tthis.lastFocusState = 'input';\n\t\t\tthis.inputBoxFocused.set(true);\n\t\t\tcontextKey?.set(true);\n\t\t}));\n\t\tthis._register(inputFocusTracker.onDidBlur(() => {\n\t\t\tthis.inputBoxFocused.set(this.searchWidget.searchInputHasFocus()\n\t\t\t\t|| this.searchWidget.replaceInputHasFocus()\n\t\t\t\t|| this.inputPatternIncludes.inputHasFocus()\n\t\t\t\t|| this.inputPatternExcludes.inputHasFocus());\n\t\t\tcontextKey?.set(false);\n\t\t}));\n\t}\n\n\tprivate async onSearchResultsChanged(event?: IChangeEvent): Promise<void> {\n\t\tif (this.isVisible()) {\n\t\t\treturn this.refreshAndUpdateCount(event);\n\t\t} else {\n\t\t\tthis.changedWhileHidden = true;\n\t\t}\n\t}\n\n\tprivate async refreshAndUpdateCount(event?: IChangeEvent): Promise<void> {\n\t\tthis.searchWidget.setReplaceAllActionState(!this.viewModel.searchResult.isEmpty());\n\t\tthis.updateSearchResultCount(this.viewModel.searchResult.query!.userDisabledExcludesAndIgnoreFiles, this.viewModel.searchResult.query?.onlyOpenEditors, event?.clearingAll);\n\t\treturn this.refreshTreeController.queue(event);\n\t}\n\n\tprivate originalShouldCollapse(match: RenderableMatch) {\n\t\tconst collapseResults = this.searchConfig.collapseResults;\n\t\treturn (collapseResults === 'alwaysCollapse' ||\n\t\t\t(!(isSearchTreeMatch(match)) && match.count() > 10 && collapseResults !== 'alwaysExpand')) ?\n\t\t\tObjectTreeElementCollapseState.PreserveOrCollapsed : ObjectTreeElementCollapseState.PreserveOrExpanded;\n\t}\n\n\tprivate shouldCollapseAccordingToConfig(match: RenderableMatch): boolean {\n\t\tconst collapseResults = this.originalShouldCollapse(match);\n\t\tif (collapseResults === ObjectTreeElementCollapseState.PreserveOrCollapsed) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate replaceAll(): void {\n\t\tif (this.viewModel.searchResult.count() === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst occurrences = this.viewModel.searchResult.count();\n\t\tconst fileCount = this.viewModel.searchResult.fileCount();\n\t\tconst replaceValue = this.searchWidget.getReplaceValue() || '';\n\t\tconst afterReplaceAllMessage = this.buildAfterReplaceAllMessage(occurrences, fileCount, replaceValue);\n\n\t\tlet progressComplete: () => void;\n\t\tlet progressReporter: IProgress<IProgressStep>;\n\n\t\tthis.progressService.withProgress({ location: this.getProgressLocation(), delay: 100, total: occurrences }, p => {\n\t\t\tprogressReporter = p;\n\n\t\t\treturn new Promise<void>(resolve => progressComplete = resolve);\n\t\t});\n\n\t\tconst confirmation: IConfirmation = {\n\t\t\ttitle: nls.localize('replaceAll.confirmation.title', \"Replace All\"),\n\t\t\tmessage: this.buildReplaceAllConfirmationMessage(occurrences, fileCount, replaceValue),\n\t\t\tprimaryButton: nls.localize({ key: 'replaceAll.confirm.button', comment: ['&& denotes a mnemonic'] }, \"&&Replace\")\n\t\t};\n\n\t\tthis.dialogService.confirm(confirmation).then(res => {\n\t\t\tif (res.confirmed) {\n\t\t\t\tthis.searchWidget.setReplaceAllActionState(false);\n\t\t\t\tthis.viewModel.searchResult.replaceAll(progressReporter).then(() => {\n\t\t\t\t\tprogressComplete();\n\t\t\t\t\tconst messageEl = this.clearMessage();\n\t\t\t\t\tdom.append(messageEl, afterReplaceAllMessage);\n\t\t\t\t\tthis.reLayout();\n\t\t\t\t}, (error) => {\n\t\t\t\t\tprogressComplete();\n\t\t\t\t\terrors.isCancellationError(error);\n\t\t\t\t\tthis.notificationService.error(error);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tprogressComplete();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate buildAfterReplaceAllMessage(occurrences: number, fileCount: number, replaceValue?: string) {\n\t\tif (occurrences === 1) {\n\t\t\tif (fileCount === 1) {\n\t\t\t\tif (replaceValue) {\n\t\t\t\t\treturn nls.localize('replaceAll.occurrence.file.message', \"Replaced {0} occurrence across {1} file with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t\t\t}\n\n\t\t\t\treturn nls.localize('removeAll.occurrence.file.message', \"Replaced {0} occurrence across {1} file.\", occurrences, fileCount);\n\t\t\t}\n\n\t\t\tif (replaceValue) {\n\t\t\t\treturn nls.localize('replaceAll.occurrence.files.message', \"Replaced {0} occurrence across {1} files with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('removeAll.occurrence.files.message', \"Replaced {0} occurrence across {1} files.\", occurrences, fileCount);\n\t\t}\n\n\t\tif (fileCount === 1) {\n\t\t\tif (replaceValue) {\n\t\t\t\treturn nls.localize('replaceAll.occurrences.file.message', \"Replaced {0} occurrences across {1} file with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('removeAll.occurrences.file.message', \"Replaced {0} occurrences across {1} file.\", occurrences, fileCount);\n\t\t}\n\n\t\tif (replaceValue) {\n\t\t\treturn nls.localize('replaceAll.occurrences.files.message', \"Replaced {0} occurrences across {1} files with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t}\n\n\t\treturn nls.localize('removeAll.occurrences.files.message', \"Replaced {0} occurrences across {1} files.\", occurrences, fileCount);\n\t}\n\n\tprivate buildReplaceAllConfirmationMessage(occurrences: number, fileCount: number, replaceValue?: string) {\n\t\t// Helper to truncate long values to 10 lines max\n\t\tconst truncateValue = (value: string | undefined): string | undefined => {\n\t\t\tif (!value) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tconst lines = value.split('\\n');\n\t\t\tif (lines.length > 10) {\n\t\t\t\treturn lines.slice(0, 10).join('\\n') + '\\n...';\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\n\t\tconst displayReplaceValue = truncateValue(replaceValue);\n\n\t\tif (occurrences === 1) {\n\t\t\tif (fileCount === 1) {\n\t\t\t\tif (displayReplaceValue) {\n\t\t\t\t\treturn nls.localize('removeAll.occurrence.file.confirmation.message', \"Replace {0} occurrence across {1} file with '{2}'?\", occurrences, fileCount, displayReplaceValue);\n\t\t\t\t}\n\n\t\t\t\treturn nls.localize('replaceAll.occurrence.file.confirmation.message', \"Replace {0} occurrence across {1} file?\", occurrences, fileCount);\n\t\t\t}\n\n\t\t\tif (displayReplaceValue) {\n\t\t\t\treturn nls.localize('removeAll.occurrence.files.confirmation.message', \"Replace {0} occurrence across {1} files with '{2}'?\", occurrences, fileCount, displayReplaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('replaceAll.occurrence.files.confirmation.message', \"Replace {0} occurrence across {1} files?\", occurrences, fileCount);\n\t\t}\n\n\t\tif (fileCount === 1) {\n\t\t\tif (displayReplaceValue) {\n\t\t\t\treturn nls.localize('removeAll.occurrences.file.confirmation.message', \"Replace {0} occurrences across {1} file with '{2}'?\", occurrences, fileCount, displayReplaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('replaceAll.occurrences.file.confirmation.message', \"Replace {0} occurrences across {1} file?\", occurrences, fileCount);\n\t\t}\n\n\t\tif (displayReplaceValue) {\n\t\t\treturn nls.localize('removeAll.occurrences.files.confirmation.message', \"Replace {0} occurrences across {1} files with '{2}'?\", occurrences, fileCount, displayReplaceValue);\n\t\t}\n\n\t\treturn nls.localize('replaceAll.occurrences.files.confirmation.message', \"Replace {0} occurrences across {1} files?\", occurrences, fileCount);\n\t}\n\n\tprivate clearMessage(): HTMLElement {\n\t\tthis.searchWithoutFolderMessageElement = undefined;\n\n\t\tconst wasHidden = this.messagesElement.style.display === 'none';\n\t\tdom.clearNode(this.messagesElement);\n\t\tdom.show(this.messagesElement);\n\t\tthis.messageDisposables.clear();\n\n\t\tconst newMessage = dom.append(this.messagesElement, $('.message'));\n\t\tif (wasHidden) {\n\t\t\tthis.reLayout();\n\t\t}\n\n\t\treturn newMessage;\n\t}\n\n\tprivate createSearchResultsView(container: HTMLElement): void {\n\t\tthis.resultsElement = dom.append(container, $('.results.show-file-icons.file-icon-themable-tree'));\n\t\tconst delegate = this.instantiationService.createInstance(SearchDelegate);\n\n\t\tconst identityProvider: IIdentityProvider<RenderableMatch> = {\n\t\t\tgetId(element: RenderableMatch) {\n\t\t\t\treturn element.id();\n\t\t\t}\n\t\t};\n\n\t\tthis.searchDataSource = this.instantiationService.createInstance(SearchViewDataSource, this);\n\t\tthis.treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility }));\n\t\tthis.tree = this._register(this.instantiationService.createInstance(WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch>,\n\t\t\t'SearchView',\n\t\t\tthis.resultsElement,\n\t\t\tdelegate,\n\t\t\t{\n\t\t\t\tisIncompressible: (element: RenderableMatch) => {\n\n\t\t\t\t\tif (isSearchTreeFolderMatch(element) && !isTextSearchHeading(element.parent()) && !(isSearchTreeFolderMatchWorkspaceRoot(element.parent())) && !(isSearchTreeFolderMatchNoRoot(element.parent()))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\t\t\t[\n\t\t\t\tthis._register(this.instantiationService.createInstance(FolderMatchRenderer, this, this.treeLabels)),\n\t\t\t\tthis._register(this.instantiationService.createInstance(FileMatchRenderer, this, this.treeLabels)),\n\t\t\t\tthis._register(this.instantiationService.createInstance(TextSearchResultRenderer, this.treeLabels)),\n\t\t\t\tthis._register(this.instantiationService.createInstance(MatchRenderer, this)),\n\t\t\t],\n\t\t\tthis.searchDataSource,\n\t\t\t{\n\t\t\t\tidentityProvider,\n\t\t\t\taccessibilityProvider: this.treeAccessibilityProvider,\n\t\t\t\tdnd: this.instantiationService.createInstance(ResourceListDnDHandler, element => {\n\t\t\t\t\tif (isSearchTreeFileMatch(element)) {\n\t\t\t\t\t\treturn element.resource;\n\t\t\t\t\t}\n\t\t\t\t\tif (isSearchTreeMatch(element)) {\n\t\t\t\t\t\treturn withSelection(element.parent().resource, element.range());\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}),\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\toverrideStyles: this.getLocationBasedColors().listOverrideStyles,\n\t\t\t\tpaddingBottom: SearchDelegate.ITEM_HEIGHT,\n\t\t\t\tcollapseByDefault: (e: RenderableMatch) => {\n\t\t\t\t\tif (isTextSearchHeading(e)) {\n\t\t\t\t\t\t// always collapse the ai text search result, but always expand the text result\n\t\t\t\t\t\treturn e.isAIContributed;\n\t\t\t\t\t}\n\n\t\t\t\t\t// always expand compressed nodes\n\t\t\t\t\tif (isSearchTreeFolderMatch(e) && e.matches().length === 1 && isSearchTreeFolderMatch(e.matches()[0])) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.shouldCollapseAccordingToConfig(e);\n\t\t\t\t}\n\t\t\t}));\n\n\t\tConstants.SearchContext.SearchResultListFocusedKey.bindTo(this.tree.contextKeyService);\n\n\t\tthis.tree.setInput(this.viewModel.searchResult);\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(e)));\n\t\tconst updateHasSomeCollapsible = () => this.toggleCollapseStateDelayer.trigger(() => this.hasSomeCollapsibleResultKey.set(this.hasSomeCollapsible()));\n\t\tupdateHasSomeCollapsible();\n\t\tthis._register(this.tree.onDidChangeCollapseState(() => updateHasSomeCollapsible()));\n\t\tthis._register(this.tree.onDidChangeModel(() => updateHasSomeCollapsible()));\n\n\t\tthis._register(Event.debounce(this.tree.onDidOpen, (last, event) => event, DEBOUNCE_DELAY, true)(options => {\n\t\t\tif (isSearchTreeMatch(options.element)) {\n\t\t\t\tconst selectedMatch: ISearchTreeMatch = options.element;\n\t\t\t\tthis.currentSelectedFileMatch?.setSelectedMatch(null);\n\t\t\t\tthis.currentSelectedFileMatch = selectedMatch.parent();\n\t\t\t\tthis.currentSelectedFileMatch.setSelectedMatch(selectedMatch);\n\n\t\t\t\tthis.onFocus(selectedMatch, options.editorOptions.preserveFocus, options.sideBySide, options.editorOptions.pinned);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.debounce(this.tree.onDidChangeFocus, (last, event) => event, DEBOUNCE_DELAY, true)(() => {\n\t\t\tconst selection = this.tree.getSelection();\n\t\t\tconst focus = this.tree.getFocus()[0];\n\t\t\tif (selection.length > 1 && isSearchTreeMatch(focus)) {\n\t\t\t\tthis.onFocus(focus, true);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.any<any>(this.tree.onDidFocus, this.tree.onDidChangeFocus)(() => {\n\t\t\tconst focus = this.tree.getFocus()[0];\n\n\t\t\tif (this.tree.isDOMFocused()) {\n\t\t\t\tconst firstElem = this.tree.getFirstElementChild(this.tree.getInput());\n\t\t\t\tthis.firstMatchFocused.set(firstElem === focus);\n\t\t\t\tthis.fileMatchOrMatchFocused.set(!!focus);\n\t\t\t\tthis.fileMatchFocused.set(isSearchTreeFileMatch(focus));\n\t\t\t\tthis.folderMatchFocused.set(isSearchTreeFolderMatch(focus));\n\t\t\t\tthis.matchFocused.set(isSearchTreeMatch(focus));\n\t\t\t\tthis.fileMatchOrFolderMatchFocus.set(isSearchTreeFileMatch(focus) || isSearchTreeFolderMatch(focus));\n\t\t\t\tthis.fileMatchOrFolderMatchWithResourceFocus.set(isSearchTreeFileMatch(focus) || isSearchTreeFolderMatchWithResource(focus));\n\t\t\t\tthis.folderMatchWithResourceFocused.set(isSearchTreeFolderMatchWithResource(focus));\n\t\t\t\tthis.searchResultHeaderFocused.set(isSearchHeader(focus));\n\t\t\t\tthis.lastFocusState = 'tree';\n\t\t\t}\n\n\t\t\tlet editable = false;\n\t\t\tif (isSearchTreeMatch(focus)) {\n\t\t\t\teditable = !focus.isReadonly;\n\t\t\t} else if (isSearchTreeFileMatch(focus)) {\n\t\t\t\teditable = !focus.hasOnlyReadOnlyMatches();\n\t\t\t} else if (isSearchTreeFolderMatch(focus)) {\n\t\t\t\teditable = !focus.hasOnlyReadOnlyMatches();\n\t\t\t}\n\t\t\tthis.isEditableItem.set(editable);\n\t\t}));\n\n\t\tthis._register(this.tree.onDidBlur(() => {\n\t\t\tthis.firstMatchFocused.reset();\n\t\t\tthis.fileMatchOrMatchFocused.reset();\n\t\t\tthis.fileMatchFocused.reset();\n\t\t\tthis.folderMatchFocused.reset();\n\t\t\tthis.matchFocused.reset();\n\t\t\tthis.fileMatchOrFolderMatchFocus.reset();\n\t\t\tthis.fileMatchOrFolderMatchWithResourceFocus.reset();\n\t\t\tthis.folderMatchWithResourceFocused.reset();\n\t\t\tthis.searchResultHeaderFocused.reset();\n\t\t\tthis.isEditableItem.reset();\n\t\t}));\n\t}\n\n\tprivate onContextMenu(e: ITreeContextMenuEvent<RenderableMatch | null>): void {\n\n\t\te.browserEvent.preventDefault();\n\t\te.browserEvent.stopPropagation();\n\t\tconst selection = this.tree.getSelection();\n\t\tlet arg: any;\n\t\tlet context: any;\n\t\tif (selection && selection.length > 0) {\n\t\t\targ = e.element;\n\t\t\tcontext = selection;\n\t\t} else {\n\t\t\tcontext = e.element;\n\t\t}\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tmenuId: MenuId.SearchContext,\n\t\t\tmenuActionOptions: { shouldForwardArgs: true, arg },\n\t\t\tcontextKeyService: this.contextKeyService,\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActionsContext: () => context,\n\t\t});\n\t}\n\n\tprivate hasSomeCollapsible(): boolean {\n\t\tconst viewer = this.getControl();\n\t\tconst navigator = viewer.navigate();\n\t\tlet node = navigator.first();\n\t\tconst shouldShowAI = this.shouldShowAIResults();\n\t\tdo {\n\t\t\tif (node && !viewer.isCollapsed(node) && (!shouldShowAI || !(isTextSearchHeading(node)))) {\n\t\t\t\t// ignore the ai text search result id\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} while (node = navigator.next());\n\n\t\treturn false;\n\t}\n\n\tasync selectNextMatch(): Promise<void> {\n\t\tif (!this.hasSearchResults()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [selected] = this.tree.getSelection();\n\n\t\t// Expand the initial selected node, if needed\n\t\tif (selected && !(isSearchTreeMatch(selected))) {\n\t\t\tif (this.tree.isCollapsed(selected)) {\n\t\t\t\tawait this.tree.expand(selected);\n\t\t\t}\n\t\t}\n\n\t\tconst navigator = this.tree.navigate(selected);\n\n\t\tlet next = navigator.next();\n\t\tif (!next) {\n\t\t\tnext = navigator.first();\n\t\t}\n\n\t\t// Expand until first child is a Match\n\t\twhile (next && !(isSearchTreeMatch(next))) {\n\t\t\tif (this.tree.isCollapsed(next)) {\n\t\t\t\tawait this.tree.expand(next);\n\t\t\t}\n\n\t\t\t// Select the first child\n\t\t\tnext = navigator.next();\n\t\t}\n\n\t\t// Reveal the newly selected element\n\t\tif (next) {\n\t\t\tif (next === selected) {\n\t\t\t\tthis.tree.setFocus([]);\n\t\t\t}\n\t\t\tconst event = getSelectionKeyboardEvent(undefined, false, false);\n\t\t\tthis.tree.setFocus([next], event);\n\t\t\tthis.tree.setSelection([next], event);\n\t\t\tthis.tree.reveal(next);\n\t\t\tconst ariaLabel = this.treeAccessibilityProvider.getAriaLabel(next);\n\t\t\tif (ariaLabel) { aria.status(ariaLabel); }\n\t\t}\n\t}\n\n\tasync selectPreviousMatch(): Promise<void> {\n\t\tif (!this.hasSearchResults()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [selected] = this.tree.getSelection();\n\t\tlet navigator = this.tree.navigate(selected);\n\n\t\tlet prev = navigator.previous();\n\n\t\t// Select previous until find a Match or a collapsed item\n\t\twhile (!prev || (!(isSearchTreeMatch(prev)) && !this.tree.isCollapsed(prev))) {\n\t\t\tconst nextPrev = prev ? navigator.previous() : navigator.last();\n\n\t\t\tif (!prev && !nextPrev) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprev = nextPrev;\n\t\t}\n\n\t\t// Expand until last child is a Match\n\t\twhile (prev && !(isSearchTreeMatch(prev))) {\n\t\t\tconst nextItem = navigator.next();\n\t\t\tif (!nextItem) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tawait this.tree.expand(prev);\n\t\t\tnavigator = this.tree.navigate(nextItem); // recreate navigator because modifying the tree can invalidate it\n\t\t\tprev = nextItem ? navigator.previous() : navigator.last(); // select last child\n\t\t}\n\n\t\t// Reveal the newly selected element\n\t\tif (prev) {\n\t\t\tif (prev === selected) {\n\t\t\t\tthis.tree.setFocus([]);\n\t\t\t}\n\t\t\tconst event = getSelectionKeyboardEvent(undefined, false, false);\n\t\t\tthis.tree.setFocus([prev], event);\n\t\t\tthis.tree.setSelection([prev], event);\n\t\t\tthis.tree.reveal(prev);\n\t\t\tconst ariaLabel = this.treeAccessibilityProvider.getAriaLabel(prev);\n\t\t\tif (ariaLabel) { aria.status(ariaLabel); }\n\t\t}\n\t}\n\n\tmoveFocusToResults(): void {\n\t\tthis.tree.domFocus();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tif (this.lastFocusState === 'input' || !this.hasSearchResults()) {\n\t\t\tconst updatedText = this.searchConfig.seedOnFocus ? this.updateTextFromSelection({ allowSearchOnType: false }) : false;\n\t\t\tthis.searchWidget.focus(undefined, undefined, updatedText);\n\t\t} else {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\t}\n\n\tupdateTextFromFindWidgetOrSelection({ allowUnselectedWord = true, allowSearchOnType = true }): boolean {\n\t\tlet activeEditor = this.editorService.activeTextEditorControl;\n\t\tif (isCodeEditor(activeEditor) && !activeEditor?.hasTextFocus()) {\n\t\t\tconst controller = CommonFindController.get(activeEditor);\n\t\t\tif (controller && controller.isFindInputFocused()) {\n\t\t\t\treturn this.updateTextFromFindWidget(controller, { allowSearchOnType });\n\t\t\t}\n\n\t\t\tconst editors = this.codeEditorService.listCodeEditors();\n\t\t\tactiveEditor = editors.find(editor => editor instanceof EmbeddedCodeEditorWidget && editor.getParentEditor() === activeEditor && editor.hasTextFocus())\n\t\t\t\t?? activeEditor;\n\t\t}\n\n\t\treturn this.updateTextFromSelection({ allowUnselectedWord, allowSearchOnType }, activeEditor);\n\t}\n\n\tprivate updateTextFromFindWidget(controller: CommonFindController, { allowSearchOnType = true }): boolean {\n\t\tif (!this.searchConfig.seedWithNearestWord && (dom.getActiveWindow().getSelection()?.toString() ?? '') === '') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst searchString = controller.getState().searchString;\n\t\tif (searchString === '') {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.searchWidget.searchInput?.setCaseSensitive(controller.getState().matchCase);\n\t\tthis.searchWidget.searchInput?.setWholeWords(controller.getState().wholeWord);\n\t\tthis.searchWidget.searchInput?.setRegex(controller.getState().isRegex);\n\t\tthis.updateText(searchString, allowSearchOnType);\n\n\t\treturn true;\n\t}\n\n\tprivate updateTextFromSelection({ allowUnselectedWord = true, allowSearchOnType = true }, editor?: IEditor): boolean {\n\t\tconst seedSearchStringFromSelection = this.configurationService.getValue<IEditorOptions>('editor').find!.seedSearchStringFromSelection;\n\t\tif (!seedSearchStringFromSelection || seedSearchStringFromSelection === 'never') {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet selectedText = this.getSearchTextFromEditor(allowUnselectedWord, editor);\n\t\tif (selectedText === null) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.searchWidget.searchInput?.getRegex()) {\n\t\t\tselectedText = strings.escapeRegExpCharacters(selectedText);\n\t\t}\n\n\t\tthis.updateText(selectedText, allowSearchOnType);\n\t\treturn true;\n\t}\n\n\tprivate updateText(text: string, allowSearchOnType: boolean = true) {\n\t\tif (allowSearchOnType && !this.viewModel.searchResult.isDirty) {\n\t\t\tthis.searchWidget.setValue(text);\n\t\t} else {\n\t\t\tthis.pauseSearching = true;\n\t\t\tthis.searchWidget.setValue(text);\n\t\t\tthis.pauseSearching = false;\n\t\t}\n\t}\n\n\tfocusNextInputBox(): void {\n\t\tif (this.searchWidget.searchInputHasFocus()) {\n\t\t\tif (this.searchWidget.isReplaceShown()) {\n\t\t\t\tthis.searchWidget.focus(true, true);\n\t\t\t} else {\n\t\t\t\tthis.moveFocusFromSearchOrReplace();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.searchWidget.replaceInputHasFocus()) {\n\t\t\tthis.moveFocusFromSearchOrReplace();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.inputPatternExcludes.focus();\n\t\t\tthis.inputPatternExcludes.select();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.selectTreeIfNotSelected();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate moveFocusFromSearchOrReplace() {\n\t\tif (this.showsFileTypes()) {\n\t\t\tthis.toggleQueryDetails(true, this.showsFileTypes());\n\t\t} else {\n\t\t\tthis.selectTreeIfNotSelected();\n\t\t}\n\t}\n\n\tfocusPreviousInputBox(): void {\n\t\tif (this.searchWidget.searchInputHasFocus()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.searchWidget.replaceInputHasFocus()) {\n\t\t\tthis.searchWidget.focus(true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.searchWidget.focus(true, true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.inputPatternIncludes.focus();\n\t\t\tthis.inputPatternIncludes.select();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.tree.isDOMFocused()) {\n\t\t\tthis.moveFocusFromResults();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate moveFocusFromResults(): void {\n\t\tif (this.showsFileTypes()) {\n\t\t\tthis.toggleQueryDetails(true, true, false, true);\n\t\t} else {\n\t\t\tthis.searchWidget.focus(true, true);\n\t\t}\n\t}\n\n\tprivate reLayout(): void {\n\t\tif (this.isDisposed || !this.size) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionsPosition = this.searchConfig.actionsPosition;\n\t\tthis.getContainer().classList.toggle(SearchView.ACTIONS_RIGHT_CLASS_NAME, actionsPosition === 'right');\n\n\t\tthis.searchWidget.setWidth(this.size.width - 28 /* container margin */);\n\n\t\tthis.inputPatternExcludes.setWidth(this.size.width - 28 /* container margin */);\n\t\tthis.inputPatternIncludes.setWidth(this.size.width - 28 /* container margin */);\n\n\t\tconst widgetHeight = dom.getTotalHeight(this.searchWidgetsContainerElement);\n\t\tconst messagesHeight = dom.getTotalHeight(this.messagesElement);\n\t\tthis.tree.layout(this.size.height - widgetHeight - messagesHeight, this.size.width - 28);\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.size = new dom.Dimension(width, height);\n\t\tthis.reLayout();\n\t}\n\n\tgetControl() {\n\t\treturn this.tree;\n\t}\n\n\tallSearchFieldsClear(): boolean {\n\t\treturn this.searchWidget.getReplaceValue() === '' &&\n\t\t\t(!this.searchWidget.searchInput || this.searchWidget.searchInput.getValue() === '');\n\t}\n\n\tallFilePatternFieldsClear(): boolean {\n\t\treturn this.searchExcludePattern.getValue() === '' &&\n\t\t\tthis.searchIncludePattern.getValue() === '';\n\t}\n\n\thasSearchResults(): boolean {\n\t\treturn !this.viewModel.searchResult.isEmpty();\n\t}\n\n\tclearSearchResults(clearInput = true): void {\n\t\tthis.viewModel.searchResult.clear();\n\t\tthis.showEmptyStage(true);\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\tthis.showSearchWithoutFolderMessage();\n\t\t}\n\t\tif (clearInput) {\n\t\t\tif (this.allSearchFieldsClear()) {\n\t\t\t\tthis.clearFilePatternFields();\n\t\t\t}\n\t\t\tthis.searchWidget.clear();\n\t\t}\n\t\tthis.viewModel.cancelSearch();\n\t\tthis.viewModel.cancelAISearch();\n\t\tthis.tree.ariaLabel = nls.localize('emptySearch', \"Empty Search\");\n\n\t\tthis.accessibilitySignalService.playSignal(AccessibilitySignal.clear);\n\t\tthis.reLayout();\n\t}\n\n\tclearFilePatternFields(): void {\n\t\tthis.searchExcludePattern.clear();\n\t\tthis.searchIncludePattern.clear();\n\t}\n\n\tcancelSearch(focus: boolean = true): boolean {\n\t\tif (this.viewModel.cancelSearch() && this.viewModel.cancelAISearch()) {\n\t\t\tif (focus) { this.searchWidget.focus(); }\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate selectTreeIfNotSelected(): void {\n\t\tif (this.tree.getNode(undefined)) {\n\t\t\tthis.tree.domFocus();\n\t\t\tconst selection = this.tree.getSelection();\n\t\t\tif (selection.length === 0) {\n\t\t\t\tconst event = getSelectionKeyboardEvent();\n\t\t\t\tthis.tree.focusNext(undefined, undefined, event);\n\t\t\t\tthis.tree.setSelection(this.tree.getFocus(), event);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getSearchTextFromEditor(allowUnselectedWord: boolean, editor?: IEditor): string | null {\n\t\tif (dom.isAncestorOfActiveElement(this.getContainer())) {\n\t\t\treturn null;\n\t\t}\n\n\t\teditor = editor ?? this.editorService.activeTextEditorControl;\n\n\t\tif (!editor) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst allowUnselected = this.searchConfig.seedWithNearestWord && allowUnselectedWord;\n\t\treturn getSelectionTextFromEditor(allowUnselected, editor);\n\t}\n\n\tprivate showsFileTypes(): boolean {\n\t\treturn this.queryDetails.classList.contains('more');\n\t}\n\n\ttoggleCaseSensitive(): void {\n\t\tthis.searchWidget.searchInput?.setCaseSensitive(!this.searchWidget.searchInput.getCaseSensitive());\n\t\tthis.triggerQueryChange({ shouldKeepAIResults: true });\n\t}\n\n\ttoggleWholeWords(): void {\n\t\tthis.searchWidget.searchInput?.setWholeWords(!this.searchWidget.searchInput.getWholeWords());\n\t\tthis.triggerQueryChange({ shouldKeepAIResults: true });\n\t}\n\n\ttoggleRegex(): void {\n\t\tthis.searchWidget.searchInput?.setRegex(!this.searchWidget.searchInput.getRegex());\n\t\tthis.triggerQueryChange({ shouldKeepAIResults: true });\n\t}\n\n\ttogglePreserveCase(): void {\n\t\tthis.searchWidget.replaceInput?.setPreserveCase(!this.searchWidget.replaceInput.getPreserveCase());\n\t\tthis.triggerQueryChange({ shouldKeepAIResults: true });\n\t}\n\n\tsetSearchParameters(args: IFindInFilesArgs = {}): void {\n\t\tif (typeof args.isCaseSensitive === 'boolean') {\n\t\t\tthis.searchWidget.searchInput?.setCaseSensitive(args.isCaseSensitive);\n\t\t}\n\t\tif (typeof args.matchWholeWord === 'boolean') {\n\t\t\tthis.searchWidget.searchInput?.setWholeWords(args.matchWholeWord);\n\t\t}\n\t\tif (typeof args.isRegex === 'boolean') {\n\t\t\tthis.searchWidget.searchInput?.setRegex(args.isRegex);\n\t\t}\n\t\tif (typeof args.filesToInclude === 'string') {\n\t\t\tthis.searchIncludePattern.setValue(String(args.filesToInclude));\n\t\t}\n\t\tif (typeof args.filesToExclude === 'string') {\n\t\t\tthis.searchExcludePattern.setValue(String(args.filesToExclude));\n\t\t}\n\t\tif (typeof args.query === 'string') {\n\t\t\tthis.searchWidget.searchInput?.setValue(args.query);\n\t\t}\n\t\tif (typeof args.replace === 'string') {\n\t\t\tthis.searchWidget.replaceInput?.setValue(args.replace);\n\t\t} else {\n\t\t\tif (this.searchWidget.replaceInput && this.searchWidget.replaceInput.getValue() !== '') {\n\t\t\t\tthis.searchWidget.replaceInput.setValue('');\n\t\t\t}\n\t\t}\n\t\tif (typeof args.triggerSearch === 'boolean' && args.triggerSearch) {\n\t\t\tthis.triggerQueryChange();\n\t\t}\n\t\tif (typeof args.preserveCase === 'boolean') {\n\t\t\tthis.searchWidget.replaceInput?.setPreserveCase(args.preserveCase);\n\t\t}\n\t\tif (typeof args.useExcludeSettingsAndIgnoreFiles === 'boolean') {\n\t\t\tthis.inputPatternExcludes.setUseExcludesAndIgnoreFiles(args.useExcludeSettingsAndIgnoreFiles);\n\t\t}\n\t\tif (typeof args.onlyOpenEditors === 'boolean') {\n\t\t\tthis.searchIncludePattern.setOnlySearchInOpenEditors(args.onlyOpenEditors);\n\t\t}\n\t}\n\n\ttoggleQueryDetails(moveFocus = true, show?: boolean, skipLayout?: boolean, reverse?: boolean): void {\n\t\tshow = typeof show === 'undefined' ? !this.queryDetails.classList.contains('more') : Boolean(show);\n\t\tif (!this.viewletState.query) {\n\t\t\tthis.viewletState.query = {};\n\t\t}\n\t\tthis.viewletState.query.queryDetailsExpanded = show;\n\t\tskipLayout = Boolean(skipLayout);\n\t\tif (show) {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'true');\n\t\t\tthis.queryDetails.classList.add('more');\n\t\t\tif (moveFocus) {\n\t\t\t\tif (reverse) {\n\t\t\t\t\tthis.inputPatternExcludes.focus();\n\t\t\t\t\tthis.inputPatternExcludes.select();\n\t\t\t\t} else {\n\t\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t\t\tthis.inputPatternIncludes.select();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'false');\n\t\t\tthis.queryDetails.classList.remove('more');\n\t\t\tif (moveFocus) {\n\t\t\t\tthis.searchWidget.focus();\n\t\t\t}\n\t\t}\n\n\t\tif (!skipLayout && this.size) {\n\t\t\tthis.reLayout();\n\t\t}\n\t}\n\n\tsearchInFolders(folderPaths: string[] = []): void {\n\t\tthis._searchWithIncludeOrExclude(true, folderPaths);\n\t}\n\n\tsearchOutsideOfFolders(folderPaths: string[] = []): void {\n\t\tthis._searchWithIncludeOrExclude(false, folderPaths);\n\t}\n\n\tprivate _searchWithIncludeOrExclude(include: boolean, folderPaths: string[]) {\n\t\tif (!folderPaths.length || folderPaths.some(folderPath => folderPath === '.')) {\n\t\t\tthis.inputPatternIncludes.setValue('');\n\t\t\tthis.searchWidget.focus();\n\t\t\treturn;\n\t\t}\n\n\t\t// Show 'files to include' box\n\t\tif (!this.showsFileTypes()) {\n\t\t\tthis.toggleQueryDetails(true, true);\n\t\t}\n\n\t\t(include ? this.inputPatternIncludes : this.inputPatternExcludes).setValue(folderPaths.join(', '));\n\t\tthis.searchWidget.focus(false);\n\t}\n\n\ttriggerQueryChange(_options?: { preserveFocus?: boolean; triggeredOnType?: boolean; delay?: number; shouldKeepAIResults?: boolean; shouldUpdateAISearch?: boolean }): void {\n\t\tconst options = { preserveFocus: true, triggeredOnType: false, delay: 0, ..._options };\n\n\t\tif (options.triggeredOnType && !this.searchConfig.searchOnType) { return; }\n\n\t\tif (!this.pauseSearching) {\n\n\t\t\tconst delay = options.triggeredOnType ? options.delay : 0;\n\t\t\tthis.triggerQueryDelayer.trigger(() => {\n\t\t\t\tthis._onQueryChanged(options.preserveFocus, options.triggeredOnType, options.shouldKeepAIResults, options.shouldUpdateAISearch);\n\t\t\t}, delay);\n\t\t}\n\t}\n\n\tprivate _getExcludePattern(): string {\n\t\treturn this.inputPatternExcludes.getValue().trim();\n\t}\n\n\tprivate _getIncludePattern(): string {\n\t\treturn this.inputPatternIncludes.getValue().trim();\n\t}\n\n\tprivate _onQueryChanged(preserveFocus: boolean, triggeredOnType = false, shouldKeepAIResults = false, shouldUpdateAISearch = false): void {\n\t\tif (!(this.searchWidget.searchInput?.inputBox.isInputValid())) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isRegex = this.searchWidget.searchInput.getRegex();\n\t\tconst isInNotebookMarkdownInput = this.searchWidget.getNotebookFilters().markupInput;\n\t\tconst isInNotebookMarkdownPreview = this.searchWidget.getNotebookFilters().markupPreview;\n\t\tconst isInNotebookCellInput = this.searchWidget.getNotebookFilters().codeInput;\n\t\tconst isInNotebookCellOutput = this.searchWidget.getNotebookFilters().codeOutput;\n\n\t\tconst isWholeWords = this.searchWidget.searchInput.getWholeWords();\n\t\tconst isCaseSensitive = this.searchWidget.searchInput.getCaseSensitive();\n\t\tconst contentPattern = this.searchWidget.searchInput.getValue();\n\t\tconst excludePatternText = this._getExcludePattern();\n\t\tconst includePatternText = this._getIncludePattern();\n\t\tconst useExcludesAndIgnoreFiles = this.inputPatternExcludes.useExcludesAndIgnoreFiles();\n\t\tconst onlySearchInOpenEditors = this.inputPatternIncludes.onlySearchInOpenEditors();\n\n\t\tif (contentPattern.length === 0) {\n\t\t\tthis.clearSearchResults(false);\n\t\t\tthis.clearMessage();\n\t\t\tthis.clearAIResults();\n\t\t\treturn;\n\t\t}\n\n\t\tconst content: IPatternInfo = {\n\t\t\tpattern: contentPattern,\n\t\t\tisRegExp: isRegex,\n\t\t\tisCaseSensitive: isCaseSensitive,\n\t\t\tisWordMatch: isWholeWords,\n\t\t\tnotebookInfo: {\n\t\t\t\tisInNotebookMarkdownInput,\n\t\t\t\tisInNotebookMarkdownPreview,\n\t\t\t\tisInNotebookCellInput,\n\t\t\t\tisInNotebookCellOutput\n\t\t\t}\n\t\t};\n\n\t\tconst excludePattern = [{ pattern: this.inputPatternExcludes.getValue() }];\n\t\tconst includePattern = this.inputPatternIncludes.getValue();\n\n\t\t// Need the full match line to correctly calculate replace text, if this is a search/replace with regex group references ($1, $2, ...).\n\t\t// 10000 chars is enough to avoid sending huge amounts of text around, if you do a replace with a longer match, it may or may not resolve the group refs correctly.\n\t\t// https://github.com/microsoft/vscode/issues/58374\n\t\tconst charsPerLine = content.isRegExp ? 10000 : 1000;\n\n\t\tconst options: ITextQueryBuilderOptions = {\n\t\t\t_reason: 'searchView',\n\t\t\textraFileResources: this.instantiationService.invokeFunction(getOutOfWorkspaceEditorResources),\n\t\t\tmaxResults: this.searchConfig.maxResults ?? undefined,\n\t\t\tdisregardIgnoreFiles: !useExcludesAndIgnoreFiles || undefined,\n\t\t\tdisregardExcludeSettings: !useExcludesAndIgnoreFiles || undefined,\n\t\t\tonlyOpenEditors: onlySearchInOpenEditors,\n\t\t\texcludePattern,\n\t\t\tincludePattern,\n\t\t\tpreviewOptions: {\n\t\t\t\tmatchLines: 1,\n\t\t\t\tcharsPerLine\n\t\t\t},\n\t\t\tisSmartCase: this.searchConfig.smartCase,\n\t\t\texpandPatterns: true\n\t\t};\n\t\tconst folderResources = this.contextService.getWorkspace().folders;\n\n\t\tconst onQueryValidationError = (err: Error) => {\n\t\t\tthis.searchWidget.searchInput?.showMessage({ content: err.message, type: MessageType.ERROR });\n\t\t\tthis.viewModel.searchResult.clear();\n\t\t};\n\n\t\tlet query: ITextQuery;\n\t\ttry {\n\t\t\tquery = this.queryBuilder.text(content, folderResources.map(folder => folder.uri), options);\n\t\t} catch (err) {\n\t\t\tonQueryValidationError(err);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.validateQuery(query).then(() => {\n\t\t\tif (!shouldKeepAIResults && shouldUpdateAISearch && this.tree.hasNode(this.searchResult.aiTextSearchResult)) {\n\t\t\t\tthis.tree.collapse(this.searchResult.aiTextSearchResult);\n\t\t\t}\n\n\t\t\tthis.onQueryTriggered(query, options, excludePatternText, includePatternText, triggeredOnType, shouldKeepAIResults, shouldUpdateAISearch);\n\n\t\t\tif (!preserveFocus) {\n\t\t\t\tthis.searchWidget.focus(false, undefined, true); // focus back to input field\n\t\t\t}\n\t\t}, onQueryValidationError);\n\t}\n\n\tprivate validateQuery(query: ITextQuery): Promise<void> {\n\t\t// Validate folderQueries\n\t\tconst folderQueriesExistP =\n\t\t\tquery.folderQueries.map(fq => {\n\t\t\t\treturn this.fileService.exists(fq.folder).catch(() => false);\n\t\t\t});\n\n\t\treturn Promise.all(folderQueriesExistP).then(existResults => {\n\t\t\t// If no folders exist, show an error message about the first one\n\t\t\tconst existingFolderQueries = query.folderQueries.filter((folderQuery, i) => existResults[i]);\n\t\t\tif (!query.folderQueries.length || existingFolderQueries.length) {\n\t\t\t\tquery.folderQueries = existingFolderQueries;\n\t\t\t} else {\n\t\t\t\tconst nonExistantPath = query.folderQueries[0].folder.fsPath;\n\t\t\t\tconst searchPathNotFoundError = nls.localize('searchPathNotFoundError', \"Search path not found: {0}\", nonExistantPath);\n\t\t\t\treturn Promise.reject(new Error(searchPathNotFoundError));\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\tprivate onQueryTriggered(query: ITextQuery, options: ITextQueryBuilderOptions, excludePatternText: string, includePatternText: string, triggeredOnType: boolean, shouldKeepAIResults: boolean, shouldUpdateAISearch: boolean): void {\n\t\tthis.addToSearchHistoryDelayer.trigger(() => {\n\t\t\tthis.searchWidget.searchInput?.onSearchSubmit();\n\t\t\tthis.inputPatternExcludes.onSearchSubmit();\n\t\t\tthis.inputPatternIncludes.onSearchSubmit();\n\t\t});\n\n\t\tthis.viewModel.cancelSearch(true);\n\t\tif (!shouldKeepAIResults) {\n\t\t\tthis.clearAIResults();\n\t\t}\n\n\t\tthis.currentSearchQ = this.currentSearchQ\n\t\t\t.then(() => this.doSearch(query, excludePatternText, includePatternText, triggeredOnType, shouldKeepAIResults, shouldUpdateAISearch))\n\t\t\t.then(() => undefined, () => undefined);\n\t}\n\n\n\tprivate async _updateResults() {\n\t\tif (this.state === SearchUIState.Idle) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// Search result tree update\n\t\t\tconst fileCount = this.viewModel.searchResult.fileCount();\n\t\t\tif (this._visibleMatches !== fileCount) {\n\t\t\t\tthis._visibleMatches = fileCount;\n\t\t\t\tawait this.refreshAndUpdateCount();\n\t\t\t}\n\t\t} finally {\n\t\t\t// show frequent progress and results by scheduling updates 80 ms after the last one\n\t\t\tthis._refreshResultsScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate async expandIfSingularResult() {\n\t\t// expand if just 1 file with less than 50 matches\n\n\t\tconst collapseResults = this.searchConfig.collapseResults;\n\t\tif (collapseResults !== 'alwaysCollapse' && this.viewModel.searchResult.matches().length === 1) {\n\t\t\tconst onlyMatch = this.viewModel.searchResult.matches()[0];\n\t\t\tawait this.tree.expandTo(onlyMatch);\n\t\t\tif (onlyMatch.count() < 50) {\n\t\t\t\tawait this.tree.expand(onlyMatch);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate appendSearchWithAIButton(messageEl: HTMLElement) {\n\t\tconst searchWithAIButtonTooltip = appendKeyBindingLabel(\n\t\t\tnls.localize('triggerAISearch.tooltip', \"Search with AI.\"),\n\t\t\tthis.keybindingService.lookupKeybinding(Constants.SearchCommandIds.SearchWithAIActionId)\n\t\t);\n\t\tconst searchWithAIButtonText = nls.localize('searchWithAIButtonTooltip', \"Search with AI\");\n\t\tconst searchWithAIButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\tsearchWithAIButtonText,\n\t\t\t() => {\n\t\t\t\tthis.commandService.executeCommand(Constants.SearchCommandIds.SearchWithAIActionId);\n\t\t\t}, this.hoverService, searchWithAIButtonTooltip));\n\t\tdom.append(messageEl, searchWithAIButton.element);\n\t}\n\n\tprivate async onSearchComplete(\n\t\tprogressComplete: () => void,\n\t\texcludePatternText?: string,\n\t\tincludePatternText?: string,\n\t\tcompleted?: ISearchComplete,\n\t\tshouldDoFinalRefresh = true,\n\t\tkeywords?: AISearchKeyword[],\n\t) {\n\n\t\tthis.state = SearchUIState.Idle;\n\n\t\t// Complete up to 100% as needed\n\t\tprogressComplete();\n\n\t\tif (shouldDoFinalRefresh) {\n\t\t\t// anything that gets called from `getChildren` should not do this, since the tree will refresh anyways.\n\t\t\tawait this.refreshAndUpdateCount();\n\t\t}\n\n\t\tconst allResults = !this.viewModel.searchResult.isEmpty();\n\t\tconst aiResults = this.searchResult.getCachedSearchComplete(true);\n\t\tif (completed?.exit === SearchCompletionExitCode.NewSearchStarted) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Special case for when we have an AI provider registered\n\t\tConstants.SearchContext.AIResultsRequested.bindTo(this.contextKeyService).set(this.shouldShowAIResults() && !!aiResults);\n\n\t\t// Expand AI results if the node is collapsed\n\t\tif (completed && this.tree.hasNode(this.searchResult.aiTextSearchResult) && this.tree.isCollapsed(this.searchResult.aiTextSearchResult)) {\n\t\t\tthis.tree.expand(this.searchResult.aiTextSearchResult);\n\t\t\treturn;\n\t\t}\n\n\n\t\tif (!allResults) {\n\t\t\tconst hasExcludes = !!excludePatternText;\n\t\t\tconst hasIncludes = !!includePatternText;\n\t\t\tlet message: string;\n\n\t\t\tif (!completed) {\n\t\t\t\tmessage = SEARCH_CANCELLED_MESSAGE;\n\t\t\t} else if (this.inputPatternIncludes.onlySearchInOpenEditors()) {\n\t\t\t\tif (hasIncludes && hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsIncludesExcludes', \"No results found in open editors matching '{0}' excluding '{1}' - \", includePatternText, excludePatternText);\n\t\t\t\t} else if (hasIncludes) {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsIncludes', \"No results found in open editors matching '{0}' - \", includePatternText);\n\t\t\t\t} else if (hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsExcludes', \"No results found in open editors excluding '{0}' - \", excludePatternText);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsFound', \"No results found in open editors. Review your configured exclusions and check your gitignore files - \");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (hasIncludes && hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsIncludesExcludes', \"No results found in '{0}' excluding '{1}' - \", includePatternText, excludePatternText);\n\t\t\t\t} else if (hasIncludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsIncludes', \"No results found in '{0}' - \", includePatternText);\n\t\t\t\t} else if (hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsExcludes', \"No results found excluding '{0}' - \", excludePatternText);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('noResultsFound', \"No results found. Review your configured exclusions and check your gitignore files - \");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Indicate as status to ARIA\n\t\t\taria.status(message);\n\n\t\t\tconst messageEl = this.clearMessage();\n\t\t\tdom.append(messageEl, message);\n\n\t\t\tif (this.shouldShowAIResults()) {\n\t\t\t\tthis.appendSearchWithAIButton(messageEl);\n\t\t\t\tdom.append(messageEl, $('span', undefined, ' - '));\n\t\t\t}\n\n\t\t\tif (!completed) {\n\t\t\t\tconst searchAgainButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\t\t\tnls.localize('rerunSearch.message', \"Search again\"),\n\t\t\t\t\t() => this.triggerQueryChange({ preserveFocus: false }), this.hoverService));\n\t\t\t\tdom.append(messageEl, searchAgainButton.element);\n\t\t\t} else if (hasIncludes || hasExcludes) {\n\t\t\t\tconst searchAgainButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('rerunSearchInAll.message', \"Search again in all files\"), this.onSearchAgain.bind(this), this.hoverService));\n\t\t\t\tdom.append(messageEl, searchAgainButton.element);\n\t\t\t} else {\n\t\t\t\tconst openSettingsButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('openSettings.message', \"Open Settings\"), this.onOpenSettings.bind(this), this.hoverService));\n\t\t\t\tdom.append(messageEl, openSettingsButton.element);\n\t\t\t}\n\n\t\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\t\tthis.showSearchWithoutFolderMessage();\n\t\t\t}\n\t\t\tthis.reLayout();\n\t\t} else {\n\t\t\tthis.viewModel.searchResult.toggleHighlights(this.isVisible()); // show highlights\n\n\t\t\t// Indicate final search result count for ARIA\n\t\t\taria.status(nls.localize('ariaSearchResultsStatus', \"Search returned {0} results in {1} files\", this.viewModel.searchResult.count(), this.viewModel.searchResult.fileCount()));\n\t\t}\n\n\n\t\tif (completed && completed.limitHit) {\n\t\t\tcompleted.messages.push({ type: TextSearchCompleteMessageType.Warning, text: nls.localize('searchMaxResultsWarning', \"The result set only contains a subset of all matches. Be more specific in your search to narrow down the results.\") });\n\t\t}\n\n\t\tif (completed && completed.messages) {\n\t\t\tfor (const message of completed.messages) {\n\t\t\t\tthis.addMessage(message);\n\t\t\t}\n\t\t}\n\n\t\tthis.reLayout();\n\t}\n\n\tprivate async onSearchError(e: any, progressComplete: () => void, excludePatternText?: string, includePatternText?: string, completed?: ISearchComplete, shouldDoFinalRefresh = true) {\n\t\tthis.state = SearchUIState.Idle;\n\t\tif (errors.isCancellationError(e)) {\n\t\t\treturn this.onSearchComplete(progressComplete, excludePatternText, includePatternText, completed, shouldDoFinalRefresh);\n\t\t} else {\n\t\t\tprogressComplete();\n\t\t\tthis.searchWidget.searchInput?.showMessage({ content: e.message, type: MessageType.ERROR });\n\t\t\tthis.viewModel.searchResult.clear();\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\tpublic clearAIResults() {\n\t\tthis.model.searchResult.aiTextSearchResult.hidden = true;\n\t\tthis.refreshTreeController.clearAllPending();\n\t\tthis._pendingSemanticSearchPromise = undefined;\n\t\tthis._cachedResults = undefined;\n\t\tthis._cachedKeywords = [];\n\t\tthis.model.cancelAISearch(true);\n\t\tthis.model.clearAiSearchResults();\n\t}\n\n\tpublic async requestAIResults() {\n\t\tthis.logService.info(`SearchView: Requesting semantic results from keybinding. Cached: ${!!this.cachedResults}`);\n\t\tif ((!this.cachedResults || this.cachedResults.results.length === 0) && !this._pendingSemanticSearchPromise) {\n\t\t\tthis.clearAIResults();\n\t\t}\n\t\tthis.model.searchResult.aiTextSearchResult.hidden = false;\n\t\tawait this.queueRefreshTree();\n\t\tawait forcedExpandRecursively(this.getControl(), this.model.searchResult.aiTextSearchResult);\n\t}\n\n\tpublic async addAIResults() {\n\t\tconst excludePatternText = this._getExcludePattern();\n\t\tconst includePatternText = this._getIncludePattern();\n\n\t\tthis.searchWidget.searchInput?.clearMessage();\n\t\tthis.showEmptyStage();\n\t\tthis._visibleMatches = 0;\n\t\tthis.tree.setSelection([]);\n\t\tthis.tree.setFocus([]);\n\n\t\tthis.viewModel.replaceString = this.searchWidget.getReplaceValue();\n\t\t// Reuse pending aiSearch if available\n\t\tlet aiSearchPromise = this._pendingSemanticSearchPromise;\n\t\tif (!aiSearchPromise) {\n\t\t\tthis.viewModel.searchResult.setAIQueryUsingTextQuery();\n\t\t\taiSearchPromise = this._pendingSemanticSearchPromise = this.viewModel.aiSearch(() => {\n\t\t\t\t// Clear pending promise when first result comes in\n\t\t\t\tif (this._pendingSemanticSearchPromise === aiSearchPromise) {\n\t\t\t\t\tthis._pendingSemanticSearchPromise = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\taiSearchPromise.then((complete) => {\n\t\t\tthis.updateSearchResultCount(this.viewModel.searchResult.query?.userDisabledExcludesAndIgnoreFiles, this.viewModel.searchResult.query?.onlyOpenEditors, false);\n\t\t\treturn this.onSearchComplete(() => { }, excludePatternText, includePatternText, complete, false, complete.aiKeywords);\n\t\t}, (e) => {\n\t\t\treturn this.onSearchError(e, () => { }, excludePatternText, includePatternText, undefined, false);\n\t\t});\n\t}\n\n\tprivate doSearch(query: ITextQuery, excludePatternText: string, includePatternText: string, triggeredOnType: boolean, shouldKeepAIResults: boolean, shouldUpdateAISearch: boolean): Thenable<void> {\n\t\tlet progressComplete: () => void;\n\t\tthis.progressService.withProgress({ location: this.getProgressLocation(), delay: triggeredOnType ? 300 : 0 }, _progress => {\n\t\t\treturn new Promise<void>(resolve => progressComplete = resolve);\n\t\t});\n\n\t\tthis.searchWidget.searchInput?.clearMessage();\n\t\tthis.state = SearchUIState.Searching;\n\t\tthis.showEmptyStage();\n\t\tif (this.model.searchResult.aiTextSearchResult.hidden && shouldUpdateAISearch) {\n\t\t\tthis.logService.info(`SearchView: Semantic search visible. Keep semantic results: ${shouldKeepAIResults}. Update semantic search: ${shouldUpdateAISearch}`);\n\t\t\tthis.model.searchResult.aiTextSearchResult.hidden = false;\n\t\t}\n\n\t\tconst slowTimer = setTimeout(() => {\n\t\t\tthis.state = SearchUIState.SlowSearch;\n\t\t}, 2000);\n\n\t\tthis._visibleMatches = 0;\n\n\t\tthis._refreshResultsScheduler.schedule();\n\n\t\tthis.searchWidget.setReplaceAllActionState(false);\n\n\t\tthis.tree.setSelection([]);\n\t\tthis.tree.setFocus([]);\n\n\t\tthis.viewModel.replaceString = this.searchWidget.getReplaceValue();\n\t\tconst result = this.viewModel.search(query);\n\n\t\tif (!shouldKeepAIResults || shouldUpdateAISearch) {\n\t\t\tthis.viewModel.searchResult.setAIQueryUsingTextQuery(query);\n\t\t}\n\n\t\tif (this.configurationService.getValue<ISearchConfigurationProperties>('search').searchView.keywordSuggestions) {\n\t\t\tthis.getKeywordSuggestions();\n\t\t}\n\n\t\treturn result.asyncResults.then((complete) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\tconst config = this.configurationService.getValue<ISearchConfigurationProperties>('search').searchView.semanticSearchBehavior;\n\t\t\tif (complete.results.length === 0 && config === SemanticSearchBehavior.RunOnEmpty) {\n\t\t\t\tthis.logService.info(`SearchView: Requesting semantic results on empty search.`);\n\t\t\t\tthis.model.searchResult.aiTextSearchResult.hidden = false;\n\t\t\t}\n\t\t\treturn this.onSearchComplete(progressComplete, excludePatternText, includePatternText, complete);\n\t\t}, (e) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\treturn this.onSearchError(e, progressComplete, excludePatternText, includePatternText);\n\t\t});\n\t}\n\n\tprivate onOpenSettings(e: dom.EventLike): void {\n\t\tdom.EventHelper.stop(e, false);\n\t\tthis.openSettings('@id:files.exclude,search.exclude,search.useParentIgnoreFiles,search.useGlobalIgnoreFiles,search.useIgnoreFiles');\n\t}\n\n\tprivate openSettings(query: string): Promise<IEditorPane | undefined> {\n\t\tconst options: ISettingsEditorOptions = { query };\n\t\treturn this.contextService.getWorkbenchState() !== WorkbenchState.EMPTY ?\n\t\t\tthis.preferencesService.openWorkspaceSettings(options) :\n\t\t\tthis.preferencesService.openUserSettings(options);\n\t}\n\n\tprivate onSearchAgain(): void {\n\t\tthis.inputPatternExcludes.setValue('');\n\t\tthis.inputPatternIncludes.setValue('');\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(false);\n\n\t\tthis.triggerQueryChange({ preserveFocus: false });\n\t}\n\n\tprivate onEnableExcludes(): void {\n\t\tthis.toggleQueryDetails(false, true);\n\t\tthis.searchExcludePattern.setUseExcludesAndIgnoreFiles(true);\n\t}\n\n\tprivate onDisableSearchInOpenEditors(): void {\n\t\tthis.toggleQueryDetails(false, true);\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(false);\n\t}\n\n\tprivate updateSearchResultCount(disregardExcludesAndIgnores?: boolean, onlyOpenEditors?: boolean, clear: boolean = false): void {\n\t\tif (this._cachedKeywords.length > 0) {\n\t\t\treturn;\n\t\t}\n\t\tconst fileCount = this.viewModel.searchResult.fileCount(this.viewModel.searchResult.aiTextSearchResult.hidden);\n\t\tconst resultCount = this.viewModel.searchResult.count(this.viewModel.searchResult.aiTextSearchResult.hidden);\n\t\tthis.hasSearchResultsKey.set(fileCount > 0);\n\n\t\tconst msgWasHidden = this.messagesElement.style.display === 'none';\n\n\t\tconst messageEl = this.clearMessage();\n\t\tconst resultMsg = clear ? '' : this.buildResultCountMessage(resultCount, fileCount);\n\t\tthis.tree.ariaLabel = resultMsg + nls.localize('forTerm', \" - Search: {0}\", this.searchResult.query?.contentPattern.pattern ?? '');\n\t\tdom.append(messageEl, resultMsg);\n\n\t\tif (fileCount > 0) {\n\t\t\tif (disregardExcludesAndIgnores) {\n\t\t\t\tconst excludesDisabledMessage = ' - ' + nls.localize('useIgnoresAndExcludesDisabled', \"exclude settings and ignore files are disabled\") + ' ';\n\t\t\t\tconst enableExcludesButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('excludes.enable', \"enable\"), this.onEnableExcludes.bind(this), this.hoverService, nls.localize('useExcludesAndIgnoreFilesDescription', \"Use Exclude Settings and Ignore Files\")));\n\t\t\t\tdom.append(messageEl, $('span', undefined, excludesDisabledMessage, '(', enableExcludesButton.element, ')'));\n\t\t\t}\n\n\t\t\tif (onlyOpenEditors) {\n\t\t\t\tconst searchingInOpenMessage = ' - ' + nls.localize('onlyOpenEditors', \"searching only in open files\") + ' ';\n\t\t\t\tconst disableOpenEditorsButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('openEditors.disable', \"disable\"), this.onDisableSearchInOpenEditors.bind(this), this.hoverService, nls.localize('disableOpenEditors', \"Search in entire workspace\")));\n\t\t\t\tdom.append(messageEl, $('span', undefined, searchingInOpenMessage, '(', disableOpenEditorsButton.element, ')'));\n\t\t\t}\n\n\t\t\tdom.append(messageEl, ' - ');\n\n\t\t\tconst openInEditorTooltip = appendKeyBindingLabel(\n\t\t\t\tnls.localize('openInEditor.tooltip', \"Copy current search results to an editor\"),\n\t\t\t\tthis.keybindingService.lookupKeybinding(Constants.SearchCommandIds.OpenInEditorCommandId));\n\t\t\tconst openInEditorButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\t\tnls.localize('openInEditor.message', \"Open in editor\"),\n\t\t\t\t() => this.instantiationService.invokeFunction(createEditorFromSearchResult, this.searchResult, this.searchIncludePattern.getValue(), this.searchExcludePattern.getValue(), this.searchIncludePattern.onlySearchInOpenEditors()), this.hoverService,\n\t\t\t\topenInEditorTooltip));\n\t\t\tdom.append(messageEl, openInEditorButton.element);\n\n\t\t\tdom.append(messageEl, ' - ');\n\t\t\tthis.appendSearchWithAIButton(messageEl);\n\n\t\t\tthis.reLayout();\n\t\t} else if (!msgWasHidden) {\n\t\t\tdom.hide(this.messagesElement);\n\t\t}\n\t}\n\n\tprivate handleKeywordClick(keyword: string, index: number) {\n\t\tthis.searchWidget.searchInput?.setValue(keyword);\n\t\tthis.triggerQueryChange({ preserveFocus: false, triggeredOnType: false, shouldKeepAIResults: false });\n\t\ttype KeywordClickClassification = {\n\t\t\towner: 'osortega';\n\t\t\tcomment: 'Fired when the user clicks on a keyword suggestion';\n\t\t\tindex: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; isMeasurement: true; comment: 'The index of the keyword clicked' };\n\t\t\tmaxKeywords: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; isMeasurement: true; comment: 'The total number of suggested keywords' };\n\t\t};\n\t\ttype KeywordClickEvent = {\n\t\t\tindex: number;\n\t\t\tmaxKeywords: number;\n\t\t};\n\t\tthis.telemetryService.publicLog2<KeywordClickEvent, KeywordClickClassification>('searchKeywordClick', {\n\t\t\tindex,\n\t\t\tmaxKeywords: this._cachedKeywords.length\n\t\t});\n\t}\n\n\tprivate updateKeywordSuggestionUI(keyword: AISearchKeyword) {\n\t\tconst element = this.messagesElement.firstChild as HTMLDivElement;\n\t\tif (this._cachedKeywords.length > 0) {\n\t\t\tif (this._cachedKeywords.length >= 3) {\n\t\t\t\t// If we already have 3 keywords, just return\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdom.append(element, ', ');\n\t\t\tconst index = this._cachedKeywords.length;\n\t\t\tconst button = this.messageDisposables.add(new SearchLinkButton(\n\t\t\t\tkeyword.keyword,\n\t\t\t\t() => this.handleKeywordClick(keyword.keyword, index),\n\t\t\t\tthis.hoverService\n\t\t\t));\n\t\t\tdom.append(element, button.element);\n\t\t} else {\n\t\t\tconst messageEl = this.clearMessage();\n\t\t\tmessageEl.classList.add('ai-keywords');\n\n\t\t\t// Add unclickable message\n\t\t\tconst resultMsg = nls.localize('keywordSuggestion.message', \"Search instead for: \");\n\t\t\tdom.append(messageEl, resultMsg);\n\n\t\t\tconst button = this.messageDisposables.add(new SearchLinkButton(\n\t\t\t\tkeyword.keyword,\n\t\t\t\t() => this.handleKeywordClick(keyword.keyword, 0),\n\t\t\t\tthis.hoverService\n\t\t\t));\n\t\t\tdom.append(messageEl, button.element);\n\t\t}\n\t\tthis._cachedKeywords.push(keyword.keyword);\n\t}\n\n\tprivate async getKeywordSuggestions() {\n\t\t// Reuse pending aiSearch if available\n\t\tlet aiSearchPromise = this._pendingSemanticSearchPromise;\n\t\tif (!aiSearchPromise) {\n\t\t\tthis.viewModel.searchResult.setAIQueryUsingTextQuery();\n\t\t\taiSearchPromise = this._pendingSemanticSearchPromise = this.viewModel.aiSearch(result => {\n\t\t\t\tif (result && isAIKeyword(result)) {\n\t\t\t\t\tthis.updateKeywordSuggestionUI(result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Clear pending promise when first result comes in\n\t\t\t\tif (this._pendingSemanticSearchPromise === aiSearchPromise) {\n\t\t\t\t\tthis._pendingSemanticSearchPromise = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis._cachedResults = await aiSearchPromise;\n\t}\n\n\tprivate addMessage(message: TextSearchCompleteMessage) {\n\t\tconst messageBox = this.messagesElement.firstChild as HTMLDivElement;\n\t\tif (!messageBox) { return; }\n\t\tdom.append(messageBox, renderSearchMessage(message, this.instantiationService, this.notificationService, this.openerService, this.commandService, this.messageDisposables, () => this.triggerQueryChange()));\n\t}\n\n\tprivate buildResultCountMessage(resultCount: number, fileCount: number): string {\n\t\tif (resultCount === 1 && fileCount === 1) {\n\t\t\treturn nls.localize('search.file.result', \"{0} result in {1} file\", resultCount, fileCount);\n\t\t} else if (resultCount === 1) {\n\t\t\treturn nls.localize('search.files.result', \"{0} result in {1} files\", resultCount, fileCount);\n\t\t} else if (fileCount === 1) {\n\t\t\treturn nls.localize('search.file.results', \"{0} results in {1} file\", resultCount, fileCount);\n\t\t} else {\n\t\t\treturn nls.localize('search.files.results', \"{0} results in {1} files\", resultCount, fileCount);\n\t\t}\n\t}\n\n\tprivate showSearchWithoutFolderMessage(): void {\n\t\tthis.searchWithoutFolderMessageElement = this.clearMessage();\n\n\t\tconst textEl = dom.append(this.searchWithoutFolderMessageElement,\n\t\t\t$('p', undefined, nls.localize('searchWithoutFolder', \"You have not opened or specified a folder. Only open files are currently searched - \")));\n\n\t\tconst openFolderButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\tnls.localize('openFolder', \"Open Folder\"),\n\t\t\t() => {\n\t\t\t\tthis.commandService.executeCommand(OpenFolderAction.ID).catch(err => errors.onUnexpectedError(err));\n\t\t\t}, this.hoverService));\n\t\tdom.append(textEl, openFolderButton.element);\n\t}\n\n\tprivate showEmptyStage(forceHideMessages = false): void {\n\t\tconst showingCancelled = (this.messagesElement.firstChild?.textContent?.indexOf(SEARCH_CANCELLED_MESSAGE) ?? -1) > -1;\n\n\t\t// clean up ui\n\t\t// this.replaceService.disposeAllReplacePreviews();\n\t\tif (showingCancelled || forceHideMessages || !this.configurationService.getValue<ISearchConfiguration>().search.searchOnType) {\n\t\t\t// when in search to type, don't preemptively hide, as it causes flickering and shifting of the live results\n\t\t\tdom.hide(this.messagesElement);\n\t\t}\n\n\t\tdom.show(this.resultsElement);\n\t\tthis.currentSelectedFileMatch = undefined;\n\t}\n\n\tprivate shouldOpenInNotebookEditor(match: ISearchTreeMatch, uri: URI): boolean {\n\t\t// Untitled files will return a false positive for getContributedNotebookTypes.\n\t\t// Since untitled files are already open, then untitled notebooks should return NotebookMatch results.\n\t\treturn isIMatchInNotebook(match) || (uri.scheme !== network.Schemas.untitled && this.notebookService.getContributedNotebookTypes(uri).length > 0);\n\t}\n\n\tprivate onFocus(lineMatch: ISearchTreeMatch, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean): Promise<any> {\n\t\tconst useReplacePreview = this.configurationService.getValue<ISearchConfiguration>().search.useReplacePreview;\n\n\t\tconst resource = isSearchTreeMatch(lineMatch) ? lineMatch.parent().resource : (<ISearchTreeFileMatch>lineMatch).resource;\n\t\treturn (useReplacePreview && this.viewModel.isReplaceActive() && !!this.viewModel.replaceString && !(this.shouldOpenInNotebookEditor(lineMatch, resource))) ?\n\t\t\tthis.replaceService.openReplacePreview(lineMatch, preserveFocus, sideBySide, pinned) :\n\t\t\tthis.open(lineMatch, preserveFocus, sideBySide, pinned, resource);\n\t}\n\n\tasync open(element: FileMatchOrMatch, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean, resourceInput?: URI): Promise<void> {\n\t\tconst selection = getEditorSelectionFromMatch(element, this.viewModel);\n\t\tconst oldParentMatches = isSearchTreeMatch(element) ? element.parent().matches() : [];\n\t\tconst resource = resourceInput ?? (isSearchTreeMatch(element) ? element.parent().resource : (<ISearchTreeFileMatch>element).resource);\n\t\tlet editor: IEditorPane | undefined;\n\n\t\tconst options = {\n\t\t\tpreserveFocus,\n\t\t\tpinned,\n\t\t\tselection,\n\t\t\trevealIfVisible: true,\n\t\t};\n\n\t\ttry {\n\t\t\teditor = await this.editorService.openEditor({\n\t\t\t\tresource: resource,\n\t\t\t\toptions,\n\t\t\t}, sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\n\t\t\tconst editorControl = editor?.getControl();\n\t\t\tif (isSearchTreeMatch(element) && preserveFocus && isCodeEditor(editorControl)) {\n\t\t\t\tthis.viewModel.searchResult.getRangeHighlightDecorations().highlightRange(\n\t\t\t\t\teditorControl.getModel()!,\n\t\t\t\t\telement.range()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.viewModel.searchResult.getRangeHighlightDecorations().removeHighlightRange();\n\t\t\t}\n\t\t} catch (err) {\n\t\t\terrors.onUnexpectedError(err);\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof NotebookEditor) {\n\t\t\tconst elemParent = element.parent() as INotebookFileInstanceMatch;\n\t\t\tif (isSearchTreeMatch(element)) {\n\t\t\t\tif (isIMatchInNotebook(element)) {\n\t\t\t\t\telement.parent().showMatch(element);\n\t\t\t\t} else {\n\t\t\t\t\tconst editorWidget = editor.getControl();\n\t\t\t\t\tif (editorWidget) {\n\t\t\t\t\t\t// Ensure that the editor widget is binded. If if is, then this should return immediately.\n\t\t\t\t\t\t// Otherwise, it will bind the widget.\n\t\t\t\t\t\telemParent.bindNotebookEditorWidget(editorWidget);\n\t\t\t\t\t\tawait elemParent.updateMatchesForEditorWidget();\n\n\t\t\t\t\t\tconst matchIndex = oldParentMatches.findIndex(e => e.id() === element.id());\n\t\t\t\t\t\tconst matches = elemParent.matches();\n\t\t\t\t\t\tconst match = matchIndex >= matches.length ? matches[matches.length - 1] : matches[matchIndex];\n\n\t\t\t\t\t\tif (isIMatchInNotebook(match)) {\n\t\t\t\t\t\t\telemParent.showMatch(match);\n\t\t\t\t\t\t\tif (!this.tree.getFocus().includes(match) || !this.tree.getSelection().includes(match)) {\n\t\t\t\t\t\t\t\tthis.tree.setSelection([match], getSelectionKeyboardEvent());\n\t\t\t\t\t\t\t\tthis.tree.setFocus([match]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\topenEditorWithMultiCursor(element: FileMatchOrMatch): Promise<void> {\n\t\tconst resource = isSearchTreeMatch(element) ? element.parent().resource : (<ISearchTreeFileMatch>element).resource;\n\t\treturn this.editorService.openEditor({\n\t\t\tresource: resource,\n\t\t\toptions: {\n\t\t\t\tpreserveFocus: false,\n\t\t\t\tpinned: true,\n\t\t\t\trevealIfVisible: true\n\t\t\t}\n\t\t}).then(editor => {\n\t\t\tif (editor) {\n\t\t\t\tlet fileMatch = null;\n\t\t\t\tif (isSearchTreeFileMatch(element)) {\n\t\t\t\t\tfileMatch = element;\n\t\t\t\t}\n\t\t\t\telse if (isSearchTreeMatch(element)) {\n\t\t\t\t\tfileMatch = element.parent();\n\t\t\t\t}\n\n\t\t\t\tif (fileMatch) {\n\t\t\t\t\tconst selections = fileMatch.matches().map(m => new Selection(m.range().startLineNumber, m.range().startColumn, m.range().endLineNumber, m.range().endColumn));\n\t\t\t\t\tconst codeEditor = getCodeEditor(editor.getControl());\n\t\t\t\t\tif (codeEditor) {\n\t\t\t\t\t\tconst multiCursorController = MultiCursorSelectionController.get(codeEditor);\n\t\t\t\t\t\tmultiCursorController?.selectAllUsingSelections(selections);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.viewModel.searchResult.getRangeHighlightDecorations().removeHighlightRange();\n\t\t}, errors.onUnexpectedError);\n\t}\n\n\tprivate onUntitledDidDispose(resource: URI): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\t// remove search results from this resource as it got disposed\n\t\tlet matches = this.viewModel.searchResult.matches();\n\t\tfor (let i = 0, len = matches.length; i < len; i++) {\n\t\t\tif (resource.toString() === matches[i].resource.toString()) {\n\t\t\t\tthis.viewModel.searchResult.remove(matches[i]);\n\t\t\t}\n\t\t}\n\t\tmatches = this.viewModel.searchResult.matches(true);\n\t\tfor (let i = 0, len = matches.length; i < len; i++) {\n\t\t\tif (resource.toString() === matches[i].resource.toString()) {\n\t\t\t\tthis.viewModel.searchResult.remove(matches[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onFilesChanged(e: FileChangesEvent): void {\n\t\tif (!this.viewModel || (this.searchConfig.sortOrder !== SearchSortOrder.Modified && !e.gotDeleted())) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matches = this.viewModel.searchResult.matches();\n\t\tif (e.gotDeleted()) {\n\t\t\tconst deletedMatches = matches.filter(m => e.contains(m.resource, FileChangeType.DELETED));\n\n\t\t\tthis.viewModel.searchResult.remove(deletedMatches);\n\t\t} else {\n\t\t\t// Check if the changed file contained matches\n\t\t\tconst changedMatches = matches.filter(m => e.contains(m.resource));\n\t\t\tif (changedMatches.length && this.searchConfig.sortOrder === SearchSortOrder.Modified) {\n\t\t\t\t// No matches need to be removed, but modified files need to have their file stat updated.\n\t\t\t\tthis.updateFileStats(changedMatches).then(async () => this.refreshTreeController.queue());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate get searchConfig(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n\n\tprivate clearHistory(): void {\n\t\tthis.searchWidget.clearHistory();\n\t\tthis.inputPatternExcludes.clearHistory();\n\t\tthis.inputPatternIncludes.clearHistory();\n\t}\n\n\tpublic override saveState(): void {\n\t\t// This can be called before renderBody() method gets called for the first time\n\t\t// if we move the searchView inside another viewPaneContainer\n\t\tif (!this.searchWidget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst patternExcludes = this.inputPatternExcludes?.getValue().trim() ?? '';\n\t\tconst patternIncludes = this.inputPatternIncludes?.getValue().trim() ?? '';\n\t\tconst onlyOpenEditors = this.inputPatternIncludes?.onlySearchInOpenEditors() ?? false;\n\t\tconst useExcludesAndIgnoreFiles = this.inputPatternExcludes?.useExcludesAndIgnoreFiles() ?? true;\n\t\tconst preserveCase = this.viewModel.preserveCase;\n\n\t\tif (!this.viewletState.query) {\n\t\t\tthis.viewletState.query = {};\n\t\t}\n\n\t\tif (this.searchWidget.searchInput) {\n\t\t\tconst isRegex = this.searchWidget.searchInput.getRegex();\n\t\t\tconst isWholeWords = this.searchWidget.searchInput.getWholeWords();\n\t\t\tconst isCaseSensitive = this.searchWidget.searchInput.getCaseSensitive();\n\t\t\tconst contentPattern = this.searchWidget.searchInput.getValue();\n\n\t\t\tconst isInNotebookCellInput = this.searchWidget.getNotebookFilters().codeInput;\n\t\t\tconst isInNotebookCellOutput = this.searchWidget.getNotebookFilters().codeOutput;\n\t\t\tconst isInNotebookMarkdownInput = this.searchWidget.getNotebookFilters().markupInput;\n\t\t\tconst isInNotebookMarkdownPreview = this.searchWidget.getNotebookFilters().markupPreview;\n\n\t\t\tthis.viewletState.query.contentPattern = contentPattern;\n\t\t\tthis.viewletState.query.regex = isRegex;\n\t\t\tthis.viewletState.query.wholeWords = isWholeWords;\n\t\t\tthis.viewletState.query.caseSensitive = isCaseSensitive;\n\n\t\t\tthis.viewletState.query.isInNotebookMarkdownInput = isInNotebookMarkdownInput;\n\t\t\tthis.viewletState.query.isInNotebookMarkdownPreview = isInNotebookMarkdownPreview;\n\t\t\tthis.viewletState.query.isInNotebookCellInput = isInNotebookCellInput;\n\t\t\tthis.viewletState.query.isInNotebookCellOutput = isInNotebookCellOutput;\n\t\t}\n\n\t\tthis.viewletState.query.folderExclusions = patternExcludes;\n\t\tthis.viewletState.query.folderIncludes = patternIncludes;\n\t\tthis.viewletState.query.useExcludesAndIgnoreFiles = useExcludesAndIgnoreFiles;\n\t\tthis.viewletState.query.preserveCase = preserveCase;\n\t\tthis.viewletState.query.onlyOpenEditors = onlyOpenEditors;\n\n\t\tconst isReplaceShown = this.searchAndReplaceWidget.isReplaceShown();\n\n\t\tif (!this.viewletState.view) {\n\t\t\tthis.viewletState.view = {};\n\t\t}\n\n\t\tthis.viewletState.view.showReplace = isReplaceShown;\n\t\tthis.viewletState.view.treeLayout = this.isTreeLayoutViewVisible;\n\t\tthis.viewletState.query.replaceText = isReplaceShown && this.searchWidget.getReplaceValue();\n\n\t\tthis._saveSearchHistoryService();\n\n\t\tthis.memento.saveMemento();\n\n\t\tsuper.saveState();\n\t}\n\n\tprivate _saveSearchHistoryService() {\n\t\tif (this.searchWidget === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tconst history: ISearchHistoryValues = Object.create(null);\n\n\t\tconst searchHistory = this.searchWidget.getSearchHistory();\n\t\tif (searchHistory && searchHistory.length) {\n\t\t\thistory.search = searchHistory;\n\t\t}\n\n\t\tconst replaceHistory = this.searchWidget.getReplaceHistory();\n\t\tif (replaceHistory && replaceHistory.length) {\n\t\t\thistory.replace = replaceHistory;\n\t\t}\n\n\t\tconst patternExcludesHistory = this.inputPatternExcludes.getHistory();\n\t\tif (patternExcludesHistory && patternExcludesHistory.length) {\n\t\t\thistory.exclude = patternExcludesHistory;\n\t\t}\n\n\t\tconst patternIncludesHistory = this.inputPatternIncludes.getHistory();\n\t\tif (patternIncludesHistory && patternIncludesHistory.length) {\n\t\t\thistory.include = patternIncludesHistory;\n\t\t}\n\n\t\tthis.searchHistoryService.save(history);\n\t}\n\n\n\tprivate async updateFileStats(elements: ISearchTreeFileMatch[]): Promise<void> {\n\t\tconst files = elements.map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\tprivate removeFileStats(): void {\n\t\tfor (const fileMatch of this.searchResult.matches()) {\n\t\t\tfileMatch.fileStat = undefined;\n\t\t}\n\t\tfor (const fileMatch of this.searchResult.matches(true)) {\n\t\t\tfileMatch.fileStat = undefined;\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.isDisposed = true;\n\t\tthis.saveState();\n\t\tsuper.dispose();\n\t}\n}\n\n\nclass SearchLinkButton extends Disposable {\n\tpublic readonly element: HTMLElement;\n\n\tconstructor(label: string, handler: (e: dom.EventLike) => unknown, hoverService: IHoverService, tooltip?: string) {\n\t\tsuper();\n\t\tthis.element = $('a.pointer', { tabindex: 0 }, label);\n\t\tthis._register(hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), this.element, tooltip));\n\t\tthis.addEventHandlers(handler);\n\t}\n\n\tprivate addEventHandlers(handler: (e: dom.EventLike) => unknown): void {\n\t\tconst wrappedHandler = (e: dom.EventLike) => {\n\t\t\tdom.EventHelper.stop(e, false);\n\t\t\thandler(e);\n\t\t};\n\n\t\tthis._register(dom.addDisposableListener(this.element, dom.EventType.CLICK, wrappedHandler));\n\t\tthis._register(dom.addDisposableListener(this.element, dom.EventType.KEY_DOWN, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.Space) || event.equals(KeyCode.Enter)) {\n\t\t\t\twrappedHandler(e);\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport function getEditorSelectionFromMatch(element: FileMatchOrMatch, viewModel: ISearchModel) {\n\tlet match: ISearchTreeMatch | null = null;\n\tif (isSearchTreeMatch(element)) {\n\t\tmatch = element;\n\t}\n\tif (isSearchTreeFileMatch(element) && element.count() > 0) {\n\t\tmatch = element.matches()[element.matches().length - 1];\n\t}\n\tif (match) {\n\t\tconst range = match.range();\n\t\tif (viewModel.isReplaceActive() && !!viewModel.replaceString) {\n\t\t\tconst replaceString = match.replaceString;\n\t\t\treturn {\n\t\t\t\tstartLineNumber: range.startLineNumber,\n\t\t\t\tstartColumn: range.startColumn,\n\t\t\t\tendLineNumber: range.startLineNumber,\n\t\t\t\tendColumn: range.startColumn + replaceString.length\n\t\t\t};\n\t\t}\n\t\treturn range;\n\t}\n\treturn undefined;\n}\n\nexport function getSelectionTextFromEditor(allowUnselectedWord: boolean, activeEditor: IEditor): string | null {\n\n\tlet editor = activeEditor;\n\n\tif (isDiffEditor(editor)) {\n\t\tif (editor.getOriginalEditor().hasTextFocus()) {\n\t\t\teditor = editor.getOriginalEditor();\n\t\t} else {\n\t\t\teditor = editor.getModifiedEditor();\n\t\t}\n\t}\n\n\tif (!isCodeEditor(editor) || !editor.hasModel()) {\n\t\treturn null;\n\t}\n\n\tconst range = editor.getSelection();\n\tif (!range) {\n\t\treturn null;\n\t}\n\n\tif (range.isEmpty()) {\n\t\tif (allowUnselectedWord) {\n\t\t\tconst wordAtPosition = editor.getModel().getWordAtPosition(range.getStartPosition());\n\t\t\treturn wordAtPosition?.word ?? null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tlet searchText = '';\n\tfor (let i = range.startLineNumber; i <= range.endLineNumber; i++) {\n\t\tlet lineText = editor.getModel().getLineContent(i);\n\t\tif (i === range.endLineNumber) {\n\t\t\tlineText = lineText.substring(0, range.endColumn - 1);\n\t\t}\n\n\t\tif (i === range.startLineNumber) {\n\t\t\tlineText = lineText.substring(range.startColumn - 1);\n\t\t}\n\n\t\tif (i !== range.startLineNumber) {\n\t\t\tlineText = '\\n' + lineText;\n\t\t}\n\n\t\tsearchText += lineText;\n\t}\n\n\treturn searchText;\n}\n\nclass SearchViewDataSource implements IAsyncDataSource<ISearchResult, RenderableMatch> {\n\n\tconstructor(\n\t\tprivate searchView: SearchView,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t) { }\n\n\n\tprivate get searchConfig(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n\n\tprivate createSearchResultIterator(searchResult: ISearchResult): Iterable<RenderableMatch> {\n\n\t\tconst ret: ITextSearchHeading[] = [];\n\n\t\tif (this.searchView.shouldShowAIResults() && searchResult.searchModel.hasPlainResults && !searchResult.aiTextSearchResult.hidden) {\n\t\t\t// as long as there is a query present, we can load AI results\n\t\t\tret.push(searchResult.aiTextSearchResult);\n\t\t}\n\n\t\tif (!searchResult.plainTextSearchResult.isEmpty()) {\n\t\t\tif (!this.searchView.shouldShowAIResults() || searchResult.aiTextSearchResult.hidden) {\n\t\t\t\t// only one root, so just return the children\n\t\t\t\treturn this.createTextSearchResultIterator(searchResult.plainTextSearchResult);\n\t\t\t}\n\t\t\tret.push(searchResult.plainTextSearchResult);\n\n\t\t}\n\n\t\treturn ret;\n\n\t}\n\n\tprivate createTextSearchResultIterator(textSearchResult: ITextSearchHeading): Iterable<ISearchTreeFolderMatch | ISearchTreeFileMatch> {\n\t\tconst folderMatches = textSearchResult.folderMatches()\n\t\t\t.filter(fm => !fm.isEmpty())\n\t\t\t.sort(searchMatchComparer);\n\n\t\tif (folderMatches.length === 1) {\n\t\t\treturn this.createFolderIterator(folderMatches[0]);\n\t\t}\n\t\treturn folderMatches;\n\t}\n\n\tprivate createFolderIterator(folderMatch: ISearchTreeFolderMatch): Iterable<ISearchTreeFolderMatch | ISearchTreeFileMatch> {\n\t\tconst matchArray = this.searchView.isTreeLayoutViewVisible ? folderMatch.matches() : folderMatch.allDownstreamFileMatches();\n\t\tlet matches = matchArray;\n\t\tif (!(folderMatch instanceof AIFolderMatchWorkspaceRootImpl)) {\n\t\t\tmatches = matchArray.sort((a, b) => searchMatchComparer(a, b, this.searchConfig.sortOrder));\n\t\t}\n\n\t\treturn matches;\n\t}\n\n\tprivate createFileIterator(fileMatch: ISearchTreeFileMatch): Iterable<ISearchTreeMatch> {\n\t\tconst matches = fileMatch.matches().sort(searchMatchComparer);\n\t\treturn matches;\n\t}\n\n\thasChildren(element: RenderableMatch): boolean {\n\t\tif (isSearchTreeMatch(element)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isTextSearchHeading(element) && element.isAIContributed) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst hasChildren = element.hasChildren;\n\t\treturn hasChildren;\n\t}\n\n\tgetChildren(element: RenderableMatch | ISearchResult): Iterable<RenderableMatch> | Promise<Iterable<RenderableMatch>> {\n\t\tif (isSearchResult(element)) {\n\t\t\treturn this.createSearchResultIterator(element);\n\t\t} else if (isTextSearchHeading(element)) {\n\t\t\tif (element.isAIContributed && (!this.searchView.model.hasAIResults || !!this.searchView._pendingSemanticSearchPromise)) {\n\t\t\t\tif (this.searchView.cachedResults) {\n\t\t\t\t\treturn this.createTextSearchResultIterator(element);\n\t\t\t\t}\n\t\t\t\tthis.searchView.addAIResults();\n\t\t\t\treturn new Promise<Iterable<RenderableMatch>>(resolve => {\n\t\t\t\t\tconst disposable = element.onChange(() => {\n\t\t\t\t\t\tdisposable.dispose(); // Clean up listener after first result\n\t\t\t\t\t\tresolve(this.createTextSearchResultIterator(element));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.createTextSearchResultIterator(element);\n\t\t} else if (isSearchTreeFolderMatch(element)) {\n\t\t\treturn this.createFolderIterator(element);\n\t\t} else if (isSearchTreeFileMatch(element)) {\n\t\t\treturn this.createFileIterator(element);\n\t\t}\n\n\t\treturn [];\n\n\t}\n\tgetParent(element: RenderableMatch): RenderableMatch {\n\t\tconst parent = element.parent();\n\t\tif (isSearchResult(parent)) {\n\t\t\tthrow new Error('Invalid element passed to getParent');\n\t\t}\n\t\treturn parent;\n\t}\n}\n\nclass RefreshTreeController extends Disposable {\n\n\tprivate refreshTreeThrottler: Throttler;\n\n\tconstructor(\n\t\tprivate readonly searchView: SearchView,\n\t\tprivate readonly geSearchConfig: () => ISearchConfigurationProperties,\n\t\t@IFileService private readonly fileService: IFileService,\n\t) {\n\t\tsuper();\n\t\tthis.refreshTreeThrottler = this._register(new Throttler());\n\t}\n\n\tprivate queuedIChangeEvents: IChangeEvent[] = [];\n\n\tpublic clearAllPending(): void {\n\t\tthis.searchView.getControl().cancelAllRefreshPromises(true);\n\t}\n\n\tpublic async queue(e?: IChangeEvent): Promise<void> {\n\t\tif (e) {\n\t\t\tthis.queuedIChangeEvents.push(e);\n\t\t}\n\t\treturn this.refreshTreeThrottler.queue(this.refreshTreeUsingQueue.bind(this));\n\t}\n\n\tprivate async refreshTreeUsingQueue(): Promise<void> {\n\t\tconst aggregateChangeEvent: IChangeEvent | undefined = this.queuedIChangeEvents.length === 0 ? undefined : {\n\t\t\telements: this.queuedIChangeEvents.map(e => e.elements).flat(),\n\t\t\tadded: this.queuedIChangeEvents.some(e => e.added),\n\t\t\tremoved: this.queuedIChangeEvents.some(e => e.removed),\n\t\t\tclearingAll: this.queuedIChangeEvents.some(e => e.clearingAll),\n\t\t};\n\t\tthis.queuedIChangeEvents = [];\n\t\treturn this.refreshTree(aggregateChangeEvent);\n\t}\n\n\tprivate async retrieveFileStats(): Promise<void> {\n\t\tconst files = this.searchView.model.searchResult.matches().filter(f => !f.fileStat).map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\tprivate async refreshTree(event?: IChangeEvent): Promise<void> {\n\t\tconst searchConfig = this.geSearchConfig();\n\t\tif (!event || event.added || event.removed) {\n\t\t\t// Refresh whole tree\n\t\t\tif (searchConfig.sortOrder === SearchSortOrder.Modified) {\n\t\t\t\t// Ensure all matches have retrieved their file stat\n\t\t\t\tawait this.retrieveFileStats()\n\t\t\t\t\t.then(() => this.searchView.getControl().updateChildren(undefined));\n\t\t\t} else {\n\t\t\t\tawait this.searchView.getControl().updateChildren(undefined);\n\t\t\t}\n\t\t} else {\n\t\t\t// If updated counts affect our search order, re-sort the view.\n\t\t\tif (searchConfig.sortOrder === SearchSortOrder.CountAscending ||\n\t\t\t\tsearchConfig.sortOrder === SearchSortOrder.CountDescending) {\n\n\t\t\t\tawait this.searchView.getControl().updateChildren(undefined);\n\t\t\t} else {\n\t\t\t\tconst treeHasAllElements = event.elements.every(elem => this.searchView.getControl().hasNode(elem));\n\t\t\t\tif (treeHasAllElements) {\n\t\t\t\t\t// IFileMatchInstance modified, refresh those elements\n\t\t\t\t\tawait Promise.all(event.elements.map(async element => {\n\t\t\t\t\t\tawait this.searchView.getControl().updateChildren(element);\n\t\t\t\t\t\tthis.searchView.getControl().rerender(element);\n\t\t\t\t\t}));\n\t\t\t\t} else {\n\t\t\t\t\tthis.searchView.getControl().updateChildren(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n"]}