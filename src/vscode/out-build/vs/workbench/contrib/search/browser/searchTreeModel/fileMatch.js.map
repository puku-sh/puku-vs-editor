{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/browser/searchTreeModel/fileMatch.ts","vs/workbench/contrib/search/browser/searchTreeModel/fileMatch.ts"],"names":[],"mappings":"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","file":"fileMatch.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RunOnceScheduler } from '../../../../../base/common/async.js';\nimport { Lazy } from '../../../../../base/common/lazy.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { themeColorFromId } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { TrackedRangeStickiness, MinimapPosition, ITextModel, FindMatch, IModelDeltaDecoration } from '../../../../../editor/common/model.js';\nimport { ModelDecorationOptions } from '../../../../../editor/common/model/textModel.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { IFileStatWithPartialMetadata, IFileService } from '../../../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { overviewRulerFindMatchForeground, minimapFindMatch } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { IFileMatch, IPatternInfo, ITextSearchPreviewOptions, resultIsMatch, DEFAULT_MAX_SEARCH_RESULTS, ITextSearchResult, ITextSearchContext } from '../../../../services/search/common/search.js';\nimport { editorMatchesToTextSearchResults, getTextSearchMatchWithModelContext } from '../../../../services/search/common/searchHelpers.js';\nimport { FindMatchDecorationModel } from '../../../notebook/browser/contrib/find/findMatchDecorationModel.js';\nimport { IReplaceService } from '../replace.js';\nimport { FILE_MATCH_PREFIX, ISearchTreeFileMatch, ISearchTreeFolderMatch, ISearchTreeFolderMatchWorkspaceRoot, ISearchTreeMatch } from './searchTreeCommon.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { textSearchResultToMatches } from './match.js';\nimport { OverviewRulerLane } from '../../../../../editor/common/standalone/standaloneEnums.js';\n\nexport class FileMatchImpl extends Disposable implements ISearchTreeFileMatch {\n\n\tprivate static readonly _CURRENT_FIND_MATCH = ModelDecorationOptions.register({\n\t\tdescription: 'search-current-find-match',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tzIndex: 13,\n\t\tclassName: 'currentFindMatch',\n\t\tinlineClassName: 'currentFindMatchInline',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerFindMatchForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t},\n\t\tminimap: {\n\t\t\tcolor: themeColorFromId(minimapFindMatch),\n\t\t\tposition: MinimapPosition.Inline\n\t\t}\n\t});\n\n\tprivate static readonly _FIND_MATCH = ModelDecorationOptions.register({\n\t\tdescription: 'search-find-match',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'findMatch',\n\t\tinlineClassName: 'findMatchInline',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerFindMatchForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t},\n\t\tminimap: {\n\t\t\tcolor: themeColorFromId(minimapFindMatch),\n\t\t\tposition: MinimapPosition.Inline\n\t\t}\n\t});\n\n\tprivate static getDecorationOption(selected: boolean): ModelDecorationOptions {\n\t\treturn (selected ? FileMatchImpl._CURRENT_FIND_MATCH : FileMatchImpl._FIND_MATCH);\n\t}\n\n\tprotected _findMatchDecorationModel: FindMatchDecorationModel | undefined;\n\n\tprotected _onChange = this._register(new Emitter<{ didRemove?: boolean; forceUpdateModel?: boolean }>());\n\treadonly onChange: Event<{ didRemove?: boolean; forceUpdateModel?: boolean }> = this._onChange.event;\n\n\tprivate _onDispose = this._register(new Emitter<void>());\n\treadonly onDispose: Event<void> = this._onDispose.event;\n\n\tprotected _resource: URI;\n\tprivate _fileStat?: IFileStatWithPartialMetadata;\n\tprivate _model: ITextModel | null = null;\n\tprivate _modelListener: DisposableStore | null = null;\n\tprotected _textMatches: Map<string, ISearchTreeMatch>;\n\n\tprivate _removedTextMatches: Set<string>;\n\tprotected _selectedMatch: ISearchTreeMatch | null = null;\n\tprivate _name: Lazy<string>;\n\n\tprivate _updateScheduler: RunOnceScheduler;\n\tprivate _modelDecorations: string[] = [];\n\n\tprivate _context: Map<number, string> = new Map();\n\n\tpublic get context(): Map<number, string> {\n\t\treturn new Map(this._context);\n\t}\n\tconstructor(\n\t\tprotected _query: IPatternInfo,\n\t\tprivate _previewOptions: ITextSearchPreviewOptions | undefined,\n\t\tprivate _maxResults: number | undefined,\n\t\tprivate _parent: ISearchTreeFolderMatch,\n\t\tprotected rawMatch: IFileMatch,\n\t\tprivate _closestRoot: ISearchTreeFolderMatchWorkspaceRoot | null,\n\t\t@IModelService protected readonly modelService: IModelService,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t\t@ILabelService labelService: ILabelService,\n\t) {\n\t\tsuper();\n\t\tthis._resource = this.rawMatch.resource;\n\t\tthis._textMatches = new Map<string, ISearchTreeMatch>();\n\t\tthis._removedTextMatches = new Set<string>();\n\t\tthis._updateScheduler = new RunOnceScheduler(this.updateMatchesForModel.bind(this), 250);\n\t\tthis._name = new Lazy(() => labelService.getUriBasenameLabel(this.resource));\n\t}\n\n\n\tget closestRoot(): ISearchTreeFolderMatchWorkspaceRoot | null {\n\t\treturn this._closestRoot;\n\t}\n\n\thasReadonlyMatches(): boolean {\n\t\treturn this.matches().some(m => m.isReadonly);\n\t}\n\n\tcreateMatches(): void {\n\t\tconst model = this.modelService.getModel(this._resource);\n\t\tif (model) {\n\t\t\t// todo: handle better when ai contributed results has model, currently, createMatches does not work for this\n\t\t\tthis.bindModel(model);\n\t\t\tthis.updateMatchesForModel();\n\t\t} else {\n\n\t\t\tif (this.rawMatch.results) {\n\t\t\t\tthis.rawMatch.results\n\t\t\t\t\t.filter(resultIsMatch)\n\t\t\t\t\t.forEach(rawMatch => {\n\t\t\t\t\t\ttextSearchResultToMatches(rawMatch, this, false)\n\t\t\t\t\t\t\t.forEach(m => this.add(m));\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tbindModel(model: ITextModel): void {\n\t\tthis._model = model;\n\t\tthis._modelListener = new DisposableStore();\n\t\tthis._modelListener.add(this._model.onDidChangeContent(() => {\n\t\t\tthis._updateScheduler.schedule();\n\t\t}));\n\t\tthis._modelListener.add(this._model.onWillDispose(() => this.onModelWillDispose()));\n\t\tthis.updateHighlights();\n\t}\n\n\tprivate onModelWillDispose(): void {\n\t\t// Update matches because model might have some dirty changes\n\t\tthis.updateMatchesForModel();\n\t\tthis.unbindModel();\n\t}\n\n\tprivate unbindModel(): void {\n\t\tif (this._model) {\n\t\t\tthis._updateScheduler.cancel();\n\t\t\tthis._model.changeDecorations((accessor) => {\n\t\t\t\tthis._modelDecorations = accessor.deltaDecorations(this._modelDecorations, []);\n\t\t\t});\n\t\t\tthis._model = null;\n\t\t\tthis._modelListener!.dispose();\n\t\t}\n\t}\n\n\tprotected updateMatchesForModel(): void {\n\t\t// this is called from a timeout and might fire\n\t\t// after the model has been disposed\n\t\tif (!this._model) {\n\t\t\treturn;\n\t\t}\n\t\tthis._textMatches = new Map<string, ISearchTreeMatch>();\n\n\t\tconst wordSeparators = this._query.isWordMatch && this._query.wordSeparators ? this._query.wordSeparators : null;\n\t\tconst matches = this._model\n\t\t\t.findMatches(this._query.pattern, this._model.getFullModelRange(), !!this._query.isRegExp, !!this._query.isCaseSensitive, wordSeparators, false, this._maxResults ?? DEFAULT_MAX_SEARCH_RESULTS);\n\n\t\tthis.updateMatches(matches, true, this._model, false);\n\t}\n\n\n\n\tprotected async updatesMatchesForLineAfterReplace(lineNumber: number, modelChange: boolean): Promise<void> {\n\t\tif (!this._model) {\n\t\t\treturn;\n\t\t}\n\t\tconst range = {\n\t\t\tstartLineNumber: lineNumber,\n\t\t\tstartColumn: this._model.getLineMinColumn(lineNumber),\n\t\t\tendLineNumber: lineNumber,\n\t\t\tendColumn: this._model.getLineMaxColumn(lineNumber)\n\t\t};\n\t\tconst oldMatches = Array.from(this._textMatches.values()).filter(match => match.range().startLineNumber === lineNumber);\n\t\toldMatches.forEach(match => this._textMatches.delete(match.id()));\n\n\t\tconst wordSeparators = this._query.isWordMatch && this._query.wordSeparators ? this._query.wordSeparators : null;\n\t\tconst matches = this._model.findMatches(this._query.pattern, range, !!this._query.isRegExp, !!this._query.isCaseSensitive, wordSeparators, false, this._maxResults ?? DEFAULT_MAX_SEARCH_RESULTS);\n\t\tthis.updateMatches(matches, modelChange, this._model, false);\n\t}\n\n\n\n\tprivate updateMatches(matches: FindMatch[], modelChange: boolean, model: ITextModel, isAiContributed: boolean): void {\n\t\tconst textSearchResults = editorMatchesToTextSearchResults(matches, model, this._previewOptions);\n\t\ttextSearchResults.forEach(textSearchResult => {\n\t\t\ttextSearchResultToMatches(textSearchResult, this, isAiContributed).forEach(match => {\n\t\t\t\tif (!this._removedTextMatches.has(match.id())) {\n\t\t\t\t\tthis.add(match);\n\t\t\t\t\tif (this.isMatchSelected(match)) {\n\t\t\t\t\t\tthis._selectedMatch = match;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.addContext(getTextSearchMatchWithModelContext(textSearchResults, model, this.parent().parent().query!));\n\n\t\tthis._onChange.fire({ forceUpdateModel: modelChange });\n\t\tthis.updateHighlights();\n\t}\n\n\tupdateHighlights(): void {\n\t\tif (!this._model) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._model.changeDecorations((accessor) => {\n\t\t\tconst newDecorations = (\n\t\t\t\tthis.parent().showHighlights\n\t\t\t\t\t? this.matches().map((match): IModelDeltaDecoration => ({\n\t\t\t\t\t\trange: match.range(),\n\t\t\t\t\t\toptions: FileMatchImpl.getDecorationOption(this.isMatchSelected(match))\n\t\t\t\t\t}))\n\t\t\t\t\t: []\n\t\t\t);\n\t\t\tthis._modelDecorations = accessor.deltaDecorations(this._modelDecorations, newDecorations);\n\t\t});\n\t}\n\n\tid(): string {\n\t\treturn FILE_MATCH_PREFIX + this.resource.toString();\n\t}\n\n\tparent(): ISearchTreeFolderMatch {\n\t\treturn this._parent;\n\t}\n\n\tget hasChildren(): boolean {\n\t\treturn this._textMatches.size > 0;\n\t}\n\n\tmatches(): ISearchTreeMatch[] {\n\t\treturn [...this._textMatches.values()];\n\t}\n\n\ttextMatches(): ISearchTreeMatch[] {\n\t\treturn Array.from(this._textMatches.values());\n\t}\n\n\tremove(matches: ISearchTreeMatch | ISearchTreeMatch[]): void {\n\t\tif (!Array.isArray(matches)) {\n\t\t\tmatches = [matches];\n\t\t}\n\n\t\tfor (const match of matches) {\n\t\t\tthis.removeMatch(match);\n\t\t\tthis._removedTextMatches.add(match.id());\n\t\t}\n\n\t\tthis._onChange.fire({ didRemove: true });\n\t}\n\n\tprivate replaceQ = Promise.resolve();\n\tasync replace(toReplace: ISearchTreeMatch): Promise<void> {\n\t\treturn this.replaceQ = this.replaceQ.finally(async () => {\n\t\t\tawait this.replaceService.replace(toReplace);\n\t\t\tawait this.updatesMatchesForLineAfterReplace(toReplace.range().startLineNumber, false);\n\t\t});\n\t}\n\n\tsetSelectedMatch(match: ISearchTreeMatch | null): void {\n\t\tif (match) {\n\n\t\t\tif (!this._textMatches.has(match.id())) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.isMatchSelected(match)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._selectedMatch = match;\n\t\tthis.updateHighlights();\n\t}\n\n\tgetSelectedMatch(): ISearchTreeMatch | null {\n\t\treturn this._selectedMatch;\n\t}\n\n\tisMatchSelected(match: ISearchTreeMatch): boolean {\n\t\treturn !!this._selectedMatch && this._selectedMatch.id() === match.id();\n\t}\n\n\tcount(): number {\n\t\treturn this.matches().length;\n\t}\n\n\tget resource(): URI {\n\t\treturn this._resource;\n\t}\n\n\tname(): string {\n\t\treturn this._name.value;\n\t}\n\n\taddContext(results: ITextSearchResult[] | undefined) {\n\t\tif (!results) { return; }\n\n\t\tconst contexts = results\n\t\t\t.filter((result =>\n\t\t\t\t!resultIsMatch(result)) as ((a: any) => a is ITextSearchContext));\n\n\t\treturn contexts.forEach(context => this._context.set(context.lineNumber, context.text));\n\t}\n\n\tadd(match: ISearchTreeMatch, trigger?: boolean) {\n\t\tthis._textMatches.set(match.id(), match);\n\t\tif (trigger) {\n\t\t\tthis._onChange.fire({ forceUpdateModel: true });\n\t\t}\n\t}\n\n\tprotected removeMatch(match: ISearchTreeMatch) {\n\t\tthis._textMatches.delete(match.id());\n\t\tif (this.isMatchSelected(match)) {\n\t\t\tthis.setSelectedMatch(null);\n\t\t\tthis._findMatchDecorationModel?.clearCurrentFindMatchDecoration();\n\t\t} else {\n\t\t\tthis.updateHighlights();\n\t\t}\n\t}\n\n\tasync resolveFileStat(fileService: IFileService): Promise<void> {\n\t\tthis._fileStat = await fileService.stat(this.resource).catch(() => undefined);\n\t}\n\n\tpublic get fileStat(): IFileStatWithPartialMetadata | undefined {\n\t\treturn this._fileStat;\n\t}\n\n\tpublic set fileStat(stat: IFileStatWithPartialMetadata | undefined) {\n\t\tthis._fileStat = stat;\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setSelectedMatch(null);\n\t\tthis.unbindModel();\n\t\tthis._onDispose.fire();\n\t\tsuper.dispose();\n\t}\n\n\thasOnlyReadOnlyMatches(): boolean {\n\t\treturn this.matches().every(match => match.isReadonly);\n\t}\n\n\t// #region strictly notebook methods\n\n\t//#endregion\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { RunOnceScheduler } from '../../../../../base/common/async.js';\nimport { Lazy } from '../../../../../base/common/lazy.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { themeColorFromId } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { TrackedRangeStickiness, MinimapPosition, ITextModel, FindMatch, IModelDeltaDecoration } from '../../../../../editor/common/model.js';\nimport { ModelDecorationOptions } from '../../../../../editor/common/model/textModel.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { IFileStatWithPartialMetadata, IFileService } from '../../../../../platform/files/common/files.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { overviewRulerFindMatchForeground, minimapFindMatch } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { IFileMatch, IPatternInfo, ITextSearchPreviewOptions, resultIsMatch, DEFAULT_MAX_SEARCH_RESULTS, ITextSearchResult, ITextSearchContext } from '../../../../services/search/common/search.js';\nimport { editorMatchesToTextSearchResults, getTextSearchMatchWithModelContext } from '../../../../services/search/common/searchHelpers.js';\nimport { FindMatchDecorationModel } from '../../../notebook/browser/contrib/find/findMatchDecorationModel.js';\nimport { IReplaceService } from '../replace.js';\nimport { FILE_MATCH_PREFIX, ISearchTreeFileMatch, ISearchTreeFolderMatch, ISearchTreeFolderMatchWorkspaceRoot, ISearchTreeMatch } from './searchTreeCommon.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { textSearchResultToMatches } from './match.js';\nimport { OverviewRulerLane } from '../../../../../editor/common/standalone/standaloneEnums.js';\n\nexport class FileMatchImpl extends Disposable implements ISearchTreeFileMatch {\n\n\tprivate static readonly _CURRENT_FIND_MATCH = ModelDecorationOptions.register({\n\t\tdescription: 'search-current-find-match',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tzIndex: 13,\n\t\tclassName: 'currentFindMatch',\n\t\tinlineClassName: 'currentFindMatchInline',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerFindMatchForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t},\n\t\tminimap: {\n\t\t\tcolor: themeColorFromId(minimapFindMatch),\n\t\t\tposition: MinimapPosition.Inline\n\t\t}\n\t});\n\n\tprivate static readonly _FIND_MATCH = ModelDecorationOptions.register({\n\t\tdescription: 'search-find-match',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'findMatch',\n\t\tinlineClassName: 'findMatchInline',\n\t\toverviewRuler: {\n\t\t\tcolor: themeColorFromId(overviewRulerFindMatchForeground),\n\t\t\tposition: OverviewRulerLane.Center\n\t\t},\n\t\tminimap: {\n\t\t\tcolor: themeColorFromId(minimapFindMatch),\n\t\t\tposition: MinimapPosition.Inline\n\t\t}\n\t});\n\n\tprivate static getDecorationOption(selected: boolean): ModelDecorationOptions {\n\t\treturn (selected ? FileMatchImpl._CURRENT_FIND_MATCH : FileMatchImpl._FIND_MATCH);\n\t}\n\n\tprotected _findMatchDecorationModel: FindMatchDecorationModel | undefined;\n\n\tprotected _onChange = this._register(new Emitter<{ didRemove?: boolean; forceUpdateModel?: boolean }>());\n\treadonly onChange: Event<{ didRemove?: boolean; forceUpdateModel?: boolean }> = this._onChange.event;\n\n\tprivate _onDispose = this._register(new Emitter<void>());\n\treadonly onDispose: Event<void> = this._onDispose.event;\n\n\tprotected _resource: URI;\n\tprivate _fileStat?: IFileStatWithPartialMetadata;\n\tprivate _model: ITextModel | null = null;\n\tprivate _modelListener: DisposableStore | null = null;\n\tprotected _textMatches: Map<string, ISearchTreeMatch>;\n\n\tprivate _removedTextMatches: Set<string>;\n\tprotected _selectedMatch: ISearchTreeMatch | null = null;\n\tprivate _name: Lazy<string>;\n\n\tprivate _updateScheduler: RunOnceScheduler;\n\tprivate _modelDecorations: string[] = [];\n\n\tprivate _context: Map<number, string> = new Map();\n\n\tpublic get context(): Map<number, string> {\n\t\treturn new Map(this._context);\n\t}\n\tconstructor(\n\t\tprotected _query: IPatternInfo,\n\t\tprivate _previewOptions: ITextSearchPreviewOptions | undefined,\n\t\tprivate _maxResults: number | undefined,\n\t\tprivate _parent: ISearchTreeFolderMatch,\n\t\tprotected rawMatch: IFileMatch,\n\t\tprivate _closestRoot: ISearchTreeFolderMatchWorkspaceRoot | null,\n\t\t@IModelService protected readonly modelService: IModelService,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t\t@ILabelService labelService: ILabelService,\n\t) {\n\t\tsuper();\n\t\tthis._resource = this.rawMatch.resource;\n\t\tthis._textMatches = new Map<string, ISearchTreeMatch>();\n\t\tthis._removedTextMatches = new Set<string>();\n\t\tthis._updateScheduler = new RunOnceScheduler(this.updateMatchesForModel.bind(this), 250);\n\t\tthis._name = new Lazy(() => labelService.getUriBasenameLabel(this.resource));\n\t}\n\n\n\tget closestRoot(): ISearchTreeFolderMatchWorkspaceRoot | null {\n\t\treturn this._closestRoot;\n\t}\n\n\thasReadonlyMatches(): boolean {\n\t\treturn this.matches().some(m => m.isReadonly);\n\t}\n\n\tcreateMatches(): void {\n\t\tconst model = this.modelService.getModel(this._resource);\n\t\tif (model) {\n\t\t\t// todo: handle better when ai contributed results has model, currently, createMatches does not work for this\n\t\t\tthis.bindModel(model);\n\t\t\tthis.updateMatchesForModel();\n\t\t} else {\n\n\t\t\tif (this.rawMatch.results) {\n\t\t\t\tthis.rawMatch.results\n\t\t\t\t\t.filter(resultIsMatch)\n\t\t\t\t\t.forEach(rawMatch => {\n\t\t\t\t\t\ttextSearchResultToMatches(rawMatch, this, false)\n\t\t\t\t\t\t\t.forEach(m => this.add(m));\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tbindModel(model: ITextModel): void {\n\t\tthis._model = model;\n\t\tthis._modelListener = new DisposableStore();\n\t\tthis._modelListener.add(this._model.onDidChangeContent(() => {\n\t\t\tthis._updateScheduler.schedule();\n\t\t}));\n\t\tthis._modelListener.add(this._model.onWillDispose(() => this.onModelWillDispose()));\n\t\tthis.updateHighlights();\n\t}\n\n\tprivate onModelWillDispose(): void {\n\t\t// Update matches because model might have some dirty changes\n\t\tthis.updateMatchesForModel();\n\t\tthis.unbindModel();\n\t}\n\n\tprivate unbindModel(): void {\n\t\tif (this._model) {\n\t\t\tthis._updateScheduler.cancel();\n\t\t\tthis._model.changeDecorations((accessor) => {\n\t\t\t\tthis._modelDecorations = accessor.deltaDecorations(this._modelDecorations, []);\n\t\t\t});\n\t\t\tthis._model = null;\n\t\t\tthis._modelListener!.dispose();\n\t\t}\n\t}\n\n\tprotected updateMatchesForModel(): void {\n\t\t// this is called from a timeout and might fire\n\t\t// after the model has been disposed\n\t\tif (!this._model) {\n\t\t\treturn;\n\t\t}\n\t\tthis._textMatches = new Map<string, ISearchTreeMatch>();\n\n\t\tconst wordSeparators = this._query.isWordMatch && this._query.wordSeparators ? this._query.wordSeparators : null;\n\t\tconst matches = this._model\n\t\t\t.findMatches(this._query.pattern, this._model.getFullModelRange(), !!this._query.isRegExp, !!this._query.isCaseSensitive, wordSeparators, false, this._maxResults ?? DEFAULT_MAX_SEARCH_RESULTS);\n\n\t\tthis.updateMatches(matches, true, this._model, false);\n\t}\n\n\n\n\tprotected async updatesMatchesForLineAfterReplace(lineNumber: number, modelChange: boolean): Promise<void> {\n\t\tif (!this._model) {\n\t\t\treturn;\n\t\t}\n\t\tconst range = {\n\t\t\tstartLineNumber: lineNumber,\n\t\t\tstartColumn: this._model.getLineMinColumn(lineNumber),\n\t\t\tendLineNumber: lineNumber,\n\t\t\tendColumn: this._model.getLineMaxColumn(lineNumber)\n\t\t};\n\t\tconst oldMatches = Array.from(this._textMatches.values()).filter(match => match.range().startLineNumber === lineNumber);\n\t\toldMatches.forEach(match => this._textMatches.delete(match.id()));\n\n\t\tconst wordSeparators = this._query.isWordMatch && this._query.wordSeparators ? this._query.wordSeparators : null;\n\t\tconst matches = this._model.findMatches(this._query.pattern, range, !!this._query.isRegExp, !!this._query.isCaseSensitive, wordSeparators, false, this._maxResults ?? DEFAULT_MAX_SEARCH_RESULTS);\n\t\tthis.updateMatches(matches, modelChange, this._model, false);\n\t}\n\n\n\n\tprivate updateMatches(matches: FindMatch[], modelChange: boolean, model: ITextModel, isAiContributed: boolean): void {\n\t\tconst textSearchResults = editorMatchesToTextSearchResults(matches, model, this._previewOptions);\n\t\ttextSearchResults.forEach(textSearchResult => {\n\t\t\ttextSearchResultToMatches(textSearchResult, this, isAiContributed).forEach(match => {\n\t\t\t\tif (!this._removedTextMatches.has(match.id())) {\n\t\t\t\t\tthis.add(match);\n\t\t\t\t\tif (this.isMatchSelected(match)) {\n\t\t\t\t\t\tthis._selectedMatch = match;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.addContext(getTextSearchMatchWithModelContext(textSearchResults, model, this.parent().parent().query!));\n\n\t\tthis._onChange.fire({ forceUpdateModel: modelChange });\n\t\tthis.updateHighlights();\n\t}\n\n\tupdateHighlights(): void {\n\t\tif (!this._model) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._model.changeDecorations((accessor) => {\n\t\t\tconst newDecorations = (\n\t\t\t\tthis.parent().showHighlights\n\t\t\t\t\t? this.matches().map((match): IModelDeltaDecoration => ({\n\t\t\t\t\t\trange: match.range(),\n\t\t\t\t\t\toptions: FileMatchImpl.getDecorationOption(this.isMatchSelected(match))\n\t\t\t\t\t}))\n\t\t\t\t\t: []\n\t\t\t);\n\t\t\tthis._modelDecorations = accessor.deltaDecorations(this._modelDecorations, newDecorations);\n\t\t});\n\t}\n\n\tid(): string {\n\t\treturn FILE_MATCH_PREFIX + this.resource.toString();\n\t}\n\n\tparent(): ISearchTreeFolderMatch {\n\t\treturn this._parent;\n\t}\n\n\tget hasChildren(): boolean {\n\t\treturn this._textMatches.size > 0;\n\t}\n\n\tmatches(): ISearchTreeMatch[] {\n\t\treturn [...this._textMatches.values()];\n\t}\n\n\ttextMatches(): ISearchTreeMatch[] {\n\t\treturn Array.from(this._textMatches.values());\n\t}\n\n\tremove(matches: ISearchTreeMatch | ISearchTreeMatch[]): void {\n\t\tif (!Array.isArray(matches)) {\n\t\t\tmatches = [matches];\n\t\t}\n\n\t\tfor (const match of matches) {\n\t\t\tthis.removeMatch(match);\n\t\t\tthis._removedTextMatches.add(match.id());\n\t\t}\n\n\t\tthis._onChange.fire({ didRemove: true });\n\t}\n\n\tprivate replaceQ = Promise.resolve();\n\tasync replace(toReplace: ISearchTreeMatch): Promise<void> {\n\t\treturn this.replaceQ = this.replaceQ.finally(async () => {\n\t\t\tawait this.replaceService.replace(toReplace);\n\t\t\tawait this.updatesMatchesForLineAfterReplace(toReplace.range().startLineNumber, false);\n\t\t});\n\t}\n\n\tsetSelectedMatch(match: ISearchTreeMatch | null): void {\n\t\tif (match) {\n\n\t\t\tif (!this._textMatches.has(match.id())) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.isMatchSelected(match)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._selectedMatch = match;\n\t\tthis.updateHighlights();\n\t}\n\n\tgetSelectedMatch(): ISearchTreeMatch | null {\n\t\treturn this._selectedMatch;\n\t}\n\n\tisMatchSelected(match: ISearchTreeMatch): boolean {\n\t\treturn !!this._selectedMatch && this._selectedMatch.id() === match.id();\n\t}\n\n\tcount(): number {\n\t\treturn this.matches().length;\n\t}\n\n\tget resource(): URI {\n\t\treturn this._resource;\n\t}\n\n\tname(): string {\n\t\treturn this._name.value;\n\t}\n\n\taddContext(results: ITextSearchResult[] | undefined) {\n\t\tif (!results) { return; }\n\n\t\tconst contexts = results\n\t\t\t.filter((result =>\n\t\t\t\t!resultIsMatch(result)) as ((a: any) => a is ITextSearchContext));\n\n\t\treturn contexts.forEach(context => this._context.set(context.lineNumber, context.text));\n\t}\n\n\tadd(match: ISearchTreeMatch, trigger?: boolean) {\n\t\tthis._textMatches.set(match.id(), match);\n\t\tif (trigger) {\n\t\t\tthis._onChange.fire({ forceUpdateModel: true });\n\t\t}\n\t}\n\n\tprotected removeMatch(match: ISearchTreeMatch) {\n\t\tthis._textMatches.delete(match.id());\n\t\tif (this.isMatchSelected(match)) {\n\t\t\tthis.setSelectedMatch(null);\n\t\t\tthis._findMatchDecorationModel?.clearCurrentFindMatchDecoration();\n\t\t} else {\n\t\t\tthis.updateHighlights();\n\t\t}\n\t}\n\n\tasync resolveFileStat(fileService: IFileService): Promise<void> {\n\t\tthis._fileStat = await fileService.stat(this.resource).catch(() => undefined);\n\t}\n\n\tpublic get fileStat(): IFileStatWithPartialMetadata | undefined {\n\t\treturn this._fileStat;\n\t}\n\n\tpublic set fileStat(stat: IFileStatWithPartialMetadata | undefined) {\n\t\tthis._fileStat = stat;\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setSelectedMatch(null);\n\t\tthis.unbindModel();\n\t\tthis._onDispose.fire();\n\t\tsuper.dispose();\n\t}\n\n\thasOnlyReadOnlyMatches(): boolean {\n\t\treturn this.matches().every(match => match.isReadonly);\n\t}\n\n\t// #region strictly notebook methods\n\n\t//#endregion\n}\n"]}