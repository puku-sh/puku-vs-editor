{"version":3,"sources":["vs/workbench/contrib/search/browser/searchActionsBase.ts"],"names":[],"mappings":"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","file":"searchActionsBase.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { ResolvedKeybinding } from '../../../../base/common/keybindings.js';\nimport * as nls from '../../../../nls.js';\nimport { WorkbenchCompressibleAsyncDataTree } from '../../../../platform/list/browser/listService.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { SearchView } from './searchView.js';\nimport { ISearchConfigurationProperties, VIEW_ID } from '../../../services/search/common/search.js';\nimport { isSearchTreeMatch, RenderableMatch, ISearchResult, isSearchTreeFileMatch, isSearchTreeFolderMatch } from './searchTreeModel/searchTreeCommon.js';\nimport { searchComparer } from './searchCompare.js';\n\nexport const category = nls.localize2('search', \"Search\");\n\nexport function isSearchViewFocused(viewsService: IViewsService): boolean {\n\tconst searchView = getSearchView(viewsService);\n\treturn !!(searchView && DOM.isAncestorOfActiveElement(searchView.getContainer()));\n}\n\nexport function appendKeyBindingLabel(label: string, inputKeyBinding: ResolvedKeybinding | undefined): string {\n\treturn doAppendKeyBindingLabel(label, inputKeyBinding);\n}\n\nexport function getSearchView(viewsService: IViewsService): SearchView | undefined {\n\treturn viewsService.getActiveViewWithId(VIEW_ID) as SearchView;\n}\n\nexport function getElementsToOperateOn(viewer: WorkbenchCompressibleAsyncDataTree<ISearchResult, RenderableMatch, void>, currElement: RenderableMatch | undefined, sortConfig: ISearchConfigurationProperties): RenderableMatch[] {\n\tlet elements: RenderableMatch[] = viewer.getSelection().filter((x): x is RenderableMatch => x !== null).sort((a, b) => searchComparer(a, b, sortConfig.sortOrder));\n\n\t// if selection doesn't include multiple elements, just return current focus element.\n\tif (currElement && !(elements.length > 1 && elements.includes(currElement))) {\n\t\telements = [currElement];\n\t}\n\n\treturn elements;\n}\n\n/**\n * @param elements elements that are going to be removed\n * @param focusElement element that is focused\n * @returns whether we need to re-focus on a remove\n */\nexport function shouldRefocus(elements: RenderableMatch[], focusElement: RenderableMatch | undefined) {\n\tif (!focusElement) {\n\t\treturn false;\n\t}\n\treturn !focusElement || elements.includes(focusElement) || hasDownstreamMatch(elements, focusElement);\n}\n\nfunction hasDownstreamMatch(elements: RenderableMatch[], focusElement: RenderableMatch) {\n\tfor (const elem of elements) {\n\t\tif ((isSearchTreeFileMatch(elem) && isSearchTreeMatch(focusElement) && elem.matches().includes(focusElement)) ||\n\t\t\t(isSearchTreeFolderMatch(elem) && (\n\t\t\t\t(isSearchTreeFileMatch(focusElement) && elem.getDownstreamFileMatch(focusElement.resource)) ||\n\t\t\t\t(isSearchTreeMatch(focusElement) && elem.getDownstreamFileMatch(focusElement.parent().resource))\n\t\t\t))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n\n}\n\nexport function openSearchView(viewsService: IViewsService, focus?: boolean): Promise<SearchView | undefined> {\n\treturn viewsService.openView(VIEW_ID, focus).then(view => (view as SearchView ?? undefined));\n}\n\nfunction doAppendKeyBindingLabel(label: string, keyBinding: ResolvedKeybinding | undefined): string {\n\treturn keyBinding ? label + ' (' + keyBinding.getLabel() + ')' : label;\n}\n\n"]}