{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/test/browser/searchResult.test.ts","vs/workbench/contrib/search/test/browser/searchResult.test.ts"],"names":[],"mappings":"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","file":"searchResult.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { SearchModelImpl } from '../../browser/searchTreeModel/searchModel.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IFileMatch, TextSearchMatch, OneLineRange, ITextSearchMatch, QueryType } from '../../../../services/search/common/search.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ModelService } from '../../../../../editor/common/services/modelService.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { IReplaceService } from '../../browser/replace.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { TestThemeService } from '../../../../../platform/theme/test/common/testThemeService.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { MockLabelService } from '../../../../services/label/test/common/mockLabelService.js';\nimport { INotebookEditorService } from '../../../notebook/browser/services/notebookEditorService.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { TestEditorGroupsService, TestEditorService } from '../../../../test/browser/workbenchTestServices.js';\nimport { NotebookEditorWidgetService } from '../../../notebook/browser/services/notebookEditorServiceImpl.js';\nimport { ICellViewModel } from '../../../notebook/browser/notebookBrowser.js';\nimport { CellKind } from '../../../notebook/common/notebookCommon.js';\nimport { addToSearchResult, createFileUriFromPathFromRoot, getRootName } from './searchTestCommon.js';\nimport { INotebookCellMatchWithModel, INotebookFileMatchWithModel } from '../../browser/notebookSearch/searchNotebookHelpers.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { CellMatch, NotebookCompatibleFileMatch } from '../../browser/notebookSearch/notebookSearchModel.js';\nimport { INotebookFileInstanceMatch } from '../../browser/notebookSearch/notebookSearchModelBase.js';\nimport { ISearchResult, ISearchTreeFolderMatch, MATCH_PREFIX } from '../../browser/searchTreeModel/searchTreeCommon.js';\nimport { FolderMatchImpl } from '../../browser/searchTreeModel/folderMatch.js';\nimport { SearchResultImpl } from '../../browser/searchTreeModel/searchResult.js';\nimport { MatchImpl } from '../../browser/searchTreeModel/match.js';\n\nconst lineOneRange = new OneLineRange(1, 0, 1);\n\nsuite('SearchResult', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tinstantiationService = new TestInstantiationService();\n\t\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\t\tinstantiationService.stub(IModelService, stubModelService(instantiationService));\n\t\tinstantiationService.stub(INotebookEditorService, stubNotebookEditorService(instantiationService));\n\t\tconst fileService = new FileService(new NullLogService());\n\t\tstore.add(fileService);\n\t\tconst uriIdentityService = new UriIdentityService(fileService);\n\t\tstore.add(uriIdentityService);\n\t\tinstantiationService.stub(IUriIdentityService, uriIdentityService);\n\t\tinstantiationService.stubPromise(IReplaceService, {});\n\t\tinstantiationService.stub(IReplaceService, 'replace', () => Promise.resolve(null));\n\t\tinstantiationService.stub(ILabelService, new MockLabelService());\n\t\tinstantiationService.stub(ILogService, new NullLogService());\n\t});\n\n\tteardown(() => {\n\t\tinstantiationService.dispose();\n\t});\n\n\ttest('Line Match', function () {\n\t\tconst fileMatch = aFileMatch('folder/file.txt', null!);\n\t\tconst lineMatch = new MatchImpl(fileMatch, ['0 foo bar'], new OneLineRange(0, 2, 5), new OneLineRange(1, 0, 5), false);\n\t\tassert.strictEqual(lineMatch.text(), '0 foo bar');\n\t\tassert.strictEqual(lineMatch.range().startLineNumber, 2);\n\t\tassert.strictEqual(lineMatch.range().endLineNumber, 2);\n\t\tassert.strictEqual(lineMatch.range().startColumn, 1);\n\t\tassert.strictEqual(lineMatch.range().endColumn, 6);\n\t\tassert.strictEqual(lineMatch.id(), MATCH_PREFIX + 'file:///folder/file.txt>[2,1 -> 2,6]foo');\n\n\t\tassert.strictEqual(lineMatch.fullMatchText(), 'foo');\n\t\tassert.strictEqual(lineMatch.fullMatchText(true), '0 foo bar');\n\t});\n\n\ttest('Line Match - Remove', function () {\n\t\tconst fileMatch = aFileMatch('folder/file.txt', aSearchResult(), new TextSearchMatch('foo bar', new OneLineRange(1, 0, 3)));\n\t\tconst lineMatch = fileMatch.matches()[0];\n\t\tfileMatch.remove(lineMatch);\n\t\tassert.strictEqual(fileMatch.matches().length, 0);\n\t});\n\n\ttest('File Match', function () {\n\t\tlet fileMatch = aFileMatch('folder/file.txt', aSearchResult());\n\t\tassert.strictEqual(fileMatch.matches().length, 0);\n\t\tassert.strictEqual(fileMatch.resource.toString(), 'file:///folder/file.txt');\n\t\tassert.strictEqual(fileMatch.name(), 'file.txt');\n\n\t\tfileMatch = aFileMatch('file.txt', aSearchResult());\n\t\tassert.strictEqual(fileMatch.matches().length, 0);\n\t\tassert.strictEqual(fileMatch.resource.toString(), 'file:///file.txt');\n\t\tassert.strictEqual(fileMatch.name(), 'file.txt');\n\t});\n\n\ttest('File Match: Select an existing match', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\n\t\ttestObject.setSelectedMatch(testObject.matches()[0]);\n\n\t\tassert.strictEqual(testObject.matches()[0], testObject.getSelectedMatch());\n\t});\n\n\ttest('File Match: Select non existing match', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\tconst target = testObject.matches()[0];\n\t\ttestObject.remove(target);\n\n\t\ttestObject.setSelectedMatch(target);\n\n\t\tassert.strictEqual(testObject.getSelectedMatch(), null);\n\t});\n\n\ttest('File Match: isSelected return true for selected match', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\tconst target = testObject.matches()[0];\n\t\ttestObject.setSelectedMatch(target);\n\n\t\tassert.ok(testObject.isMatchSelected(target));\n\t});\n\n\ttest('File Match: isSelected return false for un-selected match', function () {\n\t\tconst testObject = aFileMatch('folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\ttestObject.setSelectedMatch(testObject.matches()[0]);\n\t\tassert.ok(!testObject.isMatchSelected(testObject.matches()[1]));\n\t});\n\n\ttest('File Match: unselect', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\ttestObject.setSelectedMatch(testObject.matches()[0]);\n\t\ttestObject.setSelectedMatch(null);\n\n\t\tassert.strictEqual(null, testObject.getSelectedMatch());\n\t});\n\n\ttest('File Match: unselect when not selected', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\ttestObject.setSelectedMatch(null);\n\n\t\tassert.strictEqual(null, testObject.getSelectedMatch());\n\t});\n\n\ttest('Match -> FileMatch -> SearchResult hierarchy exists', function () {\n\n\t\tconst searchModel = instantiationService.createInstance(SearchModelImpl);\n\t\tstore.add(searchModel);\n\t\tconst searchResult = instantiationService.createInstance(SearchResultImpl, searchModel);\n\t\tstore.add(searchResult);\n\t\tconst fileMatch = aFileMatch('far/boo', searchResult);\n\t\tconst lineMatch = new MatchImpl(fileMatch, ['foo bar'], new OneLineRange(0, 0, 3), new OneLineRange(1, 0, 3), false);\n\n\t\tassert(lineMatch.parent() === fileMatch);\n\t\tassert(fileMatch.parent() === searchResult.folderMatches()[0]);\n\t});\n\n\ttest('Adding a raw match will add a file match with line matches', function () {\n\t\tconst testObject = aSearchResult();\n\t\tconst target = [aRawMatch('/1',\n\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11)),\n\t\t\tnew TextSearchMatch('preview 2', lineOneRange))];\n\n\t\taddToSearchResult(testObject, target);\n\n\t\tassert.strictEqual(3, testObject.count());\n\n\t\tconst actual = testObject.matches();\n\t\tassert.strictEqual(1, actual.length);\n\t\tassert.strictEqual(URI.file(`${getRootName()}/1`).toString(), actual[0].resource.toString());\n\n\t\tconst actuaMatches = actual[0].matches();\n\t\tassert.strictEqual(3, actuaMatches.length);\n\n\t\tassert.strictEqual('preview 1', actuaMatches[0].text());\n\t\tassert.ok(new Range(2, 2, 2, 5).equalsRange(actuaMatches[0].range()));\n\n\t\tassert.strictEqual('preview 1', actuaMatches[1].text());\n\t\tassert.ok(new Range(2, 5, 2, 12).equalsRange(actuaMatches[1].range()));\n\n\t\tassert.strictEqual('preview 2', actuaMatches[2].text());\n\t\tassert.ok(new Range(2, 1, 2, 2).equalsRange(actuaMatches[2].range()));\n\t});\n\n\ttest('Adding multiple raw matches', function () {\n\t\tconst testObject = aSearchResult();\n\t\tconst target = [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11))),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))];\n\n\t\taddToSearchResult(testObject, target);\n\n\t\tassert.strictEqual(3, testObject.count());\n\n\t\tconst actual = testObject.matches();\n\t\tassert.strictEqual(2, actual.length);\n\t\tassert.strictEqual(URI.file(`${getRootName()}/1`).toString(), actual[0].resource.toString());\n\n\t\tlet actuaMatches = actual[0].matches();\n\t\tassert.strictEqual(2, actuaMatches.length);\n\t\tassert.strictEqual('preview 1', actuaMatches[0].text());\n\t\tassert.ok(new Range(2, 2, 2, 5).equalsRange(actuaMatches[0].range()));\n\t\tassert.strictEqual('preview 1', actuaMatches[1].text());\n\t\tassert.ok(new Range(2, 5, 2, 12).equalsRange(actuaMatches[1].range()));\n\n\t\tactuaMatches = actual[1].matches();\n\t\tassert.strictEqual(1, actuaMatches.length);\n\t\tassert.strictEqual('preview 2', actuaMatches[0].text());\n\t\tassert.ok(new Range(2, 1, 2, 2).equalsRange(actuaMatches[0].range()));\n\t});\n\n\ttest('Test that notebook matches get added correctly', function () {\n\t\tconst testObject = aSearchResult();\n\t\tconst cell1 = { cellKind: CellKind.Code } as ICellViewModel;\n\t\tconst cell2 = { cellKind: CellKind.Code } as ICellViewModel;\n\n\t\tsinon.stub(CellMatch.prototype, 'addContext');\n\n\t\tconst addFileMatch = sinon.spy(FolderMatchImpl.prototype, 'addFileMatch');\n\t\tconst fileMatch1 = aRawFileMatchWithCells('/1',\n\t\t\t{\n\t\t\t\tcell: cell1,\n\t\t\t\tindex: 0,\n\t\t\t\tcontentResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\t\t],\n\t\t\t\twebviewResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11)),\n\t\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange)\n\t\t\t\t]\n\t\t\t},);\n\t\tconst fileMatch2 = aRawFileMatchWithCells('/2',\n\t\t\t{\n\t\t\t\tcell: cell2,\n\t\t\t\tindex: 0,\n\t\t\t\tcontentResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\t\t],\n\t\t\t\twebviewResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11)),\n\t\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange)\n\t\t\t\t]\n\t\t\t});\n\t\tconst target = [fileMatch1, fileMatch2];\n\n\t\taddToSearchResult(testObject, target);\n\t\tassert.strictEqual(6, testObject.count());\n\t\tassert.deepStrictEqual(fileMatch1.cellResults[0].contentResults, (addFileMatch.getCall(0).args[0][0] as INotebookFileMatchWithModel).cellResults[0].contentResults);\n\t\tassert.deepStrictEqual(fileMatch1.cellResults[0].webviewResults, (addFileMatch.getCall(0).args[0][0] as INotebookFileMatchWithModel).cellResults[0].webviewResults);\n\t\tassert.deepStrictEqual(fileMatch2.cellResults[0].contentResults, (addFileMatch.getCall(0).args[0][1] as INotebookFileMatchWithModel).cellResults[0].contentResults);\n\t\tassert.deepStrictEqual(fileMatch2.cellResults[0].webviewResults, (addFileMatch.getCall(0).args[0][1] as INotebookFileMatchWithModel).cellResults[0].webviewResults);\n\t});\n\n\ttest('Dispose disposes matches', function () {\n\t\tconst target1 = sinon.spy();\n\t\tconst target2 = sinon.spy();\n\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange)),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))]);\n\n\t\tstore.add(testObject.matches()[0].onDispose(target1));\n\t\tstore.add(testObject.matches()[1].onDispose(target2));\n\n\t\ttestObject.dispose();\n\n\t\tassert.ok(testObject.isEmpty());\n\t\tassert.ok(target1.calledOnce);\n\t\tassert.ok(target2.calledOnce);\n\t});\n\n\ttest('remove triggers change event', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\t\tconst objectToRemove = testObject.matches()[0];\n\t\tstore.add(testObject.onChange(target));\n\n\t\ttestObject.remove(objectToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: [objectToRemove], removed: true }], target.args[0]);\n\t});\n\n\ttest('remove array triggers change event', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange)),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))]);\n\t\tconst arrayToRemove = testObject.matches();\n\t\tstore.add(testObject.onChange(target));\n\n\t\ttestObject.remove(arrayToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: arrayToRemove, removed: true }], target.args[0]);\n\t});\n\n\ttest('Removing all line matches and adding back will add file back to result', function () {\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\t\tconst target = testObject.matches()[0];\n\t\tconst matchToRemove = target.matches()[0];\n\t\ttarget.remove(matchToRemove);\n\n\t\tassert.ok(testObject.isEmpty());\n\t\ttarget.add(matchToRemove, true);\n\n\t\tassert.strictEqual(1, testObject.fileCount());\n\t\tassert.strictEqual(target, testObject.matches()[0]);\n\t});\n\n\ttest('replace should remove the file match', function () {\n\t\tconst voidPromise = Promise.resolve(null);\n\t\tinstantiationService.stub(IReplaceService, 'replace', voidPromise);\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\n\t\ttestObject.replace(testObject.matches()[0]);\n\n\t\treturn voidPromise.then(() => assert.ok(testObject.isEmpty()));\n\t});\n\n\ttest('replace should trigger the change event', function () {\n\t\tconst target = sinon.spy();\n\t\tconst voidPromise = Promise.resolve(null);\n\t\tinstantiationService.stub(IReplaceService, 'replace', voidPromise);\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\n\t\tstore.add(testObject.onChange(target));\n\t\tconst objectToRemove = testObject.matches()[0];\n\n\t\ttestObject.replace(objectToRemove);\n\n\t\treturn voidPromise.then(() => {\n\t\t\tassert.ok(target.calledOnce);\n\t\t\tassert.deepStrictEqual([{ elements: [objectToRemove], removed: true }], target.args[0]);\n\t\t});\n\t});\n\n\ttest('replaceAll should remove all file matches', function () {\n\t\tconst voidPromise = Promise.resolve(null);\n\t\tinstantiationService.stubPromise(IReplaceService, 'replace', voidPromise);\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange)),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))]);\n\n\t\ttestObject.replaceAll(null!);\n\n\t\treturn voidPromise.then(() => assert.ok(testObject.isEmpty()));\n\t});\n\n\ttest('batchRemove should trigger the onChange event correctly', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResult();\n\n\t\tconst folderMatch = testObject.folderMatches()[0];\n\t\tconst fileMatch = testObject.folderMatches()[1].allDownstreamFileMatches()[0];\n\t\tconst match = testObject.folderMatches()[1].allDownstreamFileMatches()[1].matches()[0];\n\n\t\tconst arrayToRemove = [folderMatch, fileMatch, match];\n\t\tconst expectedArrayResult = folderMatch.allDownstreamFileMatches().concat([fileMatch, match.parent()]);\n\n\t\tstore.add(testObject.onChange(target));\n\t\ttestObject.batchRemove(arrayToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: expectedArrayResult, removed: true, added: false }], target.args[0]);\n\t});\n\n\ttest('batchReplace should trigger the onChange event correctly', async function () {\n\t\tconst replaceSpy = sinon.spy();\n\t\tinstantiationService.stub(IReplaceService, 'replace', (arg: any) => {\n\t\t\tif (Array.isArray(arg)) {\n\t\t\t\treplaceSpy(arg[0]);\n\t\t\t} else {\n\t\t\t\treplaceSpy(arg);\n\t\t\t}\n\t\t\treturn Promise.resolve();\n\t\t});\n\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResult();\n\n\t\tconst folderMatch = testObject.folderMatches()[0];\n\t\tconst fileMatch = testObject.folderMatches()[1].allDownstreamFileMatches()[0];\n\t\tconst match = testObject.folderMatches()[1].allDownstreamFileMatches()[1].matches()[0];\n\n\t\tconst firstExpectedMatch = folderMatch.allDownstreamFileMatches()[0];\n\n\t\tconst arrayToRemove = [folderMatch, fileMatch, match];\n\n\t\tstore.add(testObject.onChange(target));\n\t\tawait testObject.batchReplace(arrayToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tsinon.assert.calledThrice(replaceSpy);\n\t\tsinon.assert.calledWith(replaceSpy.firstCall, firstExpectedMatch);\n\t\tsinon.assert.calledWith(replaceSpy.secondCall, fileMatch);\n\t\tsinon.assert.calledWith(replaceSpy.thirdCall, match);\n\t});\n\n\ttest('Creating a model with nested folders should create the correct structure', function () {\n\t\tconst testObject = getPopulatedSearchResultForTreeTesting();\n\n\t\tconst root0 = testObject.folderMatches()[0];\n\t\tconst root1 = testObject.folderMatches()[1];\n\t\tconst root2 = testObject.folderMatches()[2];\n\t\tconst root3 = testObject.folderMatches()[3];\n\n\t\tconst root0DownstreamFiles = root0.allDownstreamFileMatches();\n\t\tassert.deepStrictEqual(root0DownstreamFiles, [...root0.fileMatchesIterator(), ...getFolderMatchAtIndex(root0, 0).fileMatchesIterator()]);\n\t\tassert.deepStrictEqual(getFolderMatchAtIndex(root0, 0).allDownstreamFileMatches(), Array.from(getFolderMatchAtIndex(root0, 0).fileMatchesIterator()));\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(getFolderMatchAtIndex(root0, 0), 0).parent(), getFolderMatchAtIndex(root0, 0));\n\t\tassert.deepStrictEqual(getFolderMatchAtIndex(root0, 0).parent(), root0);\n\t\tassert.deepStrictEqual((getFolderMatchAtIndex(root0, 0) as FolderMatchImpl).closestRoot, root0);\n\t\troot0DownstreamFiles.forEach((e) => {\n\t\t\tassert.deepStrictEqual(e.closestRoot, root0);\n\t\t});\n\n\t\tconst root1DownstreamFiles = root1.allDownstreamFileMatches();\n\t\tassert.deepStrictEqual(root1.allDownstreamFileMatches(), [...root1.fileMatchesIterator(), ...getFolderMatchAtIndex(root1, 0).fileMatchesIterator()]); // excludes the matches from nested root\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(getFolderMatchAtIndex(root1, 0), 0).parent(), getFolderMatchAtIndex(root1, 0));\n\t\troot1DownstreamFiles.forEach((e) => {\n\t\t\tassert.deepStrictEqual(e.closestRoot, root1);\n\t\t});\n\n\t\tconst root2DownstreamFiles = root2.allDownstreamFileMatches();\n\t\tassert.deepStrictEqual(root2DownstreamFiles, Array.from(root2.fileMatchesIterator()));\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(root2, 0).parent(), root2);\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(root2, 0).closestRoot, root2);\n\n\n\t\tconst root3DownstreamFiles = root3.allDownstreamFileMatches();\n\t\tconst root3Level3Folder = getFolderMatchAtIndex(getFolderMatchAtIndex(root3, 0), 0);\n\t\tassert.deepStrictEqual(root3DownstreamFiles, [...root3.fileMatchesIterator(), ...getFolderMatchAtIndex(root3Level3Folder, 0).fileMatchesIterator(), ...getFolderMatchAtIndex(root3Level3Folder, 1).fileMatchesIterator()].flat());\n\t\tassert.deepStrictEqual(root3Level3Folder.allDownstreamFileMatches(), getFolderMatchAtIndex(root3, 0).allDownstreamFileMatches());\n\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(getFolderMatchAtIndex(root3Level3Folder, 1), 0).parent(), getFolderMatchAtIndex(root3Level3Folder, 1));\n\t\tassert.deepStrictEqual(getFolderMatchAtIndex(root3Level3Folder, 1).parent(), root3Level3Folder);\n\t\tassert.deepStrictEqual(root3Level3Folder.parent(), getFolderMatchAtIndex(root3, 0));\n\n\t\troot3DownstreamFiles.forEach((e) => {\n\t\t\tassert.deepStrictEqual(e.closestRoot, root3);\n\t\t});\n\t});\n\n\ttest('Removing an intermediate folder should call OnChange() on all downstream file matches', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResultForTreeTesting();\n\n\t\tconst folderMatch = getFolderMatchAtIndex(getFolderMatchAtIndex(getFolderMatchAtIndex(testObject.folderMatches()[3], 0), 0), 0);\n\n\t\tconst expectedArrayResult = folderMatch.allDownstreamFileMatches();\n\n\t\tstore.add(testObject.onChange(target));\n\t\ttestObject.remove(folderMatch);\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: expectedArrayResult, removed: true, added: false, clearingAll: false }], target.args[0]);\n\t});\n\n\ttest('Replacing an intermediate folder should remove all downstream folders and file matches', async function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResultForTreeTesting();\n\n\t\tconst folderMatch = getFolderMatchAtIndex(testObject.folderMatches()[3], 0);\n\n\t\tconst expectedArrayResult = folderMatch.allDownstreamFileMatches();\n\n\t\tstore.add(testObject.onChange(target));\n\t\tawait testObject.batchReplace([folderMatch]);\n\t\tassert.deepStrictEqual([{ elements: expectedArrayResult, removed: true, added: false }], target.args[0]);\n\n\t});\n\n\tfunction aFileMatch(path: string, searchResult: ISearchResult | undefined, ...lineMatches: ITextSearchMatch[]): INotebookFileInstanceMatch {\n\t\tif (!searchResult) {\n\t\t\tsearchResult = aSearchResult();\n\t\t}\n\t\tconst rawMatch: IFileMatch = {\n\t\t\tresource: URI.file('/' + path),\n\t\t\tresults: lineMatches\n\t\t};\n\t\tconst root = searchResult?.folderMatches()[0];\n\t\tconst fileMatch = instantiationService.createInstance(NotebookCompatibleFileMatch, {\n\t\t\tpattern: ''\n\t\t}, undefined, undefined, root, rawMatch, null, '');\n\t\tfileMatch.createMatches();\n\n\t\tstore.add(fileMatch);\n\t\treturn fileMatch;\n\t}\n\n\tfunction aSearchResult(): ISearchResult {\n\t\tconst searchModel = instantiationService.createInstance(SearchModelImpl);\n\t\tstore.add(searchModel);\n\t\tsearchModel.searchResult.query = {\n\t\t\ttype: QueryType.Text, folderQueries: [{ folder: createFileUriFromPathFromRoot() }], contentPattern: {\n\t\t\t\tpattern: ''\n\t\t\t}\n\t\t};\n\t\treturn searchModel.searchResult;\n\t}\n\n\tfunction aRawMatch(resource: string, ...results: ITextSearchMatch[]): IFileMatch {\n\t\treturn { resource: createFileUriFromPathFromRoot(resource), results };\n\t}\n\n\tfunction aRawFileMatchWithCells(resource: string, ...cellMatches: INotebookCellMatchWithModel[]): INotebookFileMatchWithModel {\n\t\treturn {\n\t\t\tresource: createFileUriFromPathFromRoot(resource),\n\t\t\tcellResults: cellMatches\n\t\t};\n\t}\n\n\tfunction stubModelService(instantiationService: TestInstantiationService): IModelService {\n\t\tinstantiationService.stub(IThemeService, new TestThemeService());\n\t\tconst config = new TestConfigurationService();\n\t\tconfig.setUserConfiguration('search', { searchOnType: true });\n\t\tinstantiationService.stub(IConfigurationService, config);\n\t\tconst modelService = instantiationService.createInstance(ModelService);\n\t\tstore.add(modelService);\n\t\treturn modelService;\n\t}\n\n\tfunction stubNotebookEditorService(instantiationService: TestInstantiationService): INotebookEditorService {\n\t\tinstantiationService.stub(IEditorGroupsService, new TestEditorGroupsService());\n\t\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\t\tinstantiationService.stub(IEditorService, store.add(new TestEditorService()));\n\t\tconst notebookEditorWidgetService = instantiationService.createInstance(NotebookEditorWidgetService);\n\t\tstore.add(notebookEditorWidgetService);\n\t\treturn notebookEditorWidgetService;\n\t}\n\n\tfunction getPopulatedSearchResult() {\n\t\tconst testObject = aSearchResult();\n\n\t\ttestObject.query = {\n\t\t\ttype: QueryType.Text,\n\t\t\tcontentPattern: { pattern: 'foo' },\n\t\t\tfolderQueries: [{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/voo')\n\t\t\t},\n\t\t\t{ folder: createFileUriFromPathFromRoot('/with') },\n\t\t\t]\n\t\t};\n\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/voo/foo.a',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange), new TextSearchMatch('preview 2', lineOneRange)),\n\t\t\taRawMatch('/with/path/bar.b',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/with/path.c',\n\t\t\t\tnew TextSearchMatch('preview 4', lineOneRange), new TextSearchMatch('preview 5', lineOneRange)),\n\t\t]);\n\t\treturn testObject;\n\t}\n\n\tfunction getPopulatedSearchResultForTreeTesting() {\n\t\tconst testObject = aSearchResult();\n\n\t\ttestObject.query = {\n\t\t\ttype: QueryType.Text,\n\t\t\tcontentPattern: { pattern: 'foo' },\n\t\t\tfolderQueries: [{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/voo')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/with')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/with/test')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/eep')\n\t\t\t},\n\t\t\t]\n\t\t};\n\t\t/***\n\t\t * file structure looks like:\n\t\t * *voo/\n\t\t * |- foo.a\n\t\t * |- beep\n\t\t *    |- foo.c\n\t\t * \t  |- boop.c\n\t\t * *with/\n\t\t * |- path\n\t\t *    |- bar.b\n\t\t * |- path.c\n\t\t * |- *test/\n\t\t *    |- woo.c\n\t\t * eep/\n\t\t *    |- bar\n\t\t *       |- goo\n\t\t *           |- foo\n\t\t *              |- here.txt\n\t\t * \t\t\t |- ooo\n\t\t *              |- there.txt\n\t\t *    |- eyy.y\n\t\t */\n\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/voo/foo.a',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange), new TextSearchMatch('preview 2', lineOneRange)),\n\t\t\taRawMatch('/voo/beep/foo.c',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange), new TextSearchMatch('preview 2', lineOneRange)),\n\t\t\taRawMatch('/voo/beep/boop.c',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/with/path.c',\n\t\t\t\tnew TextSearchMatch('preview 4', lineOneRange), new TextSearchMatch('preview 5', lineOneRange)),\n\t\t\taRawMatch('/with/path/bar.b',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/with/test/woo.c',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/eep/bar/goo/foo/here.txt',\n\t\t\t\tnew TextSearchMatch('preview 6', lineOneRange), new TextSearchMatch('preview 7', lineOneRange)),\n\t\t\taRawMatch('/eep/bar/goo/ooo/there.txt',\n\t\t\t\tnew TextSearchMatch('preview 6', lineOneRange), new TextSearchMatch('preview 7', lineOneRange)),\n\t\t\taRawMatch('/eep/eyy.y',\n\t\t\t\tnew TextSearchMatch('preview 6', lineOneRange), new TextSearchMatch('preview 7', lineOneRange))\n\t\t]);\n\t\treturn testObject;\n\t}\n\n\tfunction getFolderMatchAtIndex(parent: ISearchTreeFolderMatch, index: number) {\n\t\treturn Array.from(parent.folderMatchesIterator())[index];\n\t}\n\n\tfunction getFileMatchAtIndex(parent: ISearchTreeFolderMatch, index: number) {\n\t\treturn Array.from(parent.fileMatchesIterator())[index];\n\t}\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { SearchModelImpl } from '../../browser/searchTreeModel/searchModel.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IFileMatch, TextSearchMatch, OneLineRange, ITextSearchMatch, QueryType } from '../../../../services/search/common/search.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ModelService } from '../../../../../editor/common/services/modelService.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { IReplaceService } from '../../browser/replace.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { TestThemeService } from '../../../../../platform/theme/test/common/testThemeService.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { MockLabelService } from '../../../../services/label/test/common/mockLabelService.js';\nimport { INotebookEditorService } from '../../../notebook/browser/services/notebookEditorService.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { TestEditorGroupsService, TestEditorService } from '../../../../test/browser/workbenchTestServices.js';\nimport { NotebookEditorWidgetService } from '../../../notebook/browser/services/notebookEditorServiceImpl.js';\nimport { ICellViewModel } from '../../../notebook/browser/notebookBrowser.js';\nimport { CellKind } from '../../../notebook/common/notebookCommon.js';\nimport { addToSearchResult, createFileUriFromPathFromRoot, getRootName } from './searchTestCommon.js';\nimport { INotebookCellMatchWithModel, INotebookFileMatchWithModel } from '../../browser/notebookSearch/searchNotebookHelpers.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { MockContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { CellMatch, NotebookCompatibleFileMatch } from '../../browser/notebookSearch/notebookSearchModel.js';\nimport { INotebookFileInstanceMatch } from '../../browser/notebookSearch/notebookSearchModelBase.js';\nimport { ISearchResult, ISearchTreeFolderMatch, MATCH_PREFIX } from '../../browser/searchTreeModel/searchTreeCommon.js';\nimport { FolderMatchImpl } from '../../browser/searchTreeModel/folderMatch.js';\nimport { SearchResultImpl } from '../../browser/searchTreeModel/searchResult.js';\nimport { MatchImpl } from '../../browser/searchTreeModel/match.js';\n\nconst lineOneRange = new OneLineRange(1, 0, 1);\n\nsuite('SearchResult', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\tinstantiationService = new TestInstantiationService();\n\t\tinstantiationService.stub(ITelemetryService, NullTelemetryService);\n\t\tinstantiationService.stub(IModelService, stubModelService(instantiationService));\n\t\tinstantiationService.stub(INotebookEditorService, stubNotebookEditorService(instantiationService));\n\t\tconst fileService = new FileService(new NullLogService());\n\t\tstore.add(fileService);\n\t\tconst uriIdentityService = new UriIdentityService(fileService);\n\t\tstore.add(uriIdentityService);\n\t\tinstantiationService.stub(IUriIdentityService, uriIdentityService);\n\t\tinstantiationService.stubPromise(IReplaceService, {});\n\t\tinstantiationService.stub(IReplaceService, 'replace', () => Promise.resolve(null));\n\t\tinstantiationService.stub(ILabelService, new MockLabelService());\n\t\tinstantiationService.stub(ILogService, new NullLogService());\n\t});\n\n\tteardown(() => {\n\t\tinstantiationService.dispose();\n\t});\n\n\ttest('Line Match', function () {\n\t\tconst fileMatch = aFileMatch('folder/file.txt', null!);\n\t\tconst lineMatch = new MatchImpl(fileMatch, ['0 foo bar'], new OneLineRange(0, 2, 5), new OneLineRange(1, 0, 5), false);\n\t\tassert.strictEqual(lineMatch.text(), '0 foo bar');\n\t\tassert.strictEqual(lineMatch.range().startLineNumber, 2);\n\t\tassert.strictEqual(lineMatch.range().endLineNumber, 2);\n\t\tassert.strictEqual(lineMatch.range().startColumn, 1);\n\t\tassert.strictEqual(lineMatch.range().endColumn, 6);\n\t\tassert.strictEqual(lineMatch.id(), MATCH_PREFIX + 'file:///folder/file.txt>[2,1 -> 2,6]foo');\n\n\t\tassert.strictEqual(lineMatch.fullMatchText(), 'foo');\n\t\tassert.strictEqual(lineMatch.fullMatchText(true), '0 foo bar');\n\t});\n\n\ttest('Line Match - Remove', function () {\n\t\tconst fileMatch = aFileMatch('folder/file.txt', aSearchResult(), new TextSearchMatch('foo bar', new OneLineRange(1, 0, 3)));\n\t\tconst lineMatch = fileMatch.matches()[0];\n\t\tfileMatch.remove(lineMatch);\n\t\tassert.strictEqual(fileMatch.matches().length, 0);\n\t});\n\n\ttest('File Match', function () {\n\t\tlet fileMatch = aFileMatch('folder/file.txt', aSearchResult());\n\t\tassert.strictEqual(fileMatch.matches().length, 0);\n\t\tassert.strictEqual(fileMatch.resource.toString(), 'file:///folder/file.txt');\n\t\tassert.strictEqual(fileMatch.name(), 'file.txt');\n\n\t\tfileMatch = aFileMatch('file.txt', aSearchResult());\n\t\tassert.strictEqual(fileMatch.matches().length, 0);\n\t\tassert.strictEqual(fileMatch.resource.toString(), 'file:///file.txt');\n\t\tassert.strictEqual(fileMatch.name(), 'file.txt');\n\t});\n\n\ttest('File Match: Select an existing match', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\n\t\ttestObject.setSelectedMatch(testObject.matches()[0]);\n\n\t\tassert.strictEqual(testObject.matches()[0], testObject.getSelectedMatch());\n\t});\n\n\ttest('File Match: Select non existing match', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\tconst target = testObject.matches()[0];\n\t\ttestObject.remove(target);\n\n\t\ttestObject.setSelectedMatch(target);\n\n\t\tassert.strictEqual(testObject.getSelectedMatch(), null);\n\t});\n\n\ttest('File Match: isSelected return true for selected match', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\tconst target = testObject.matches()[0];\n\t\ttestObject.setSelectedMatch(target);\n\n\t\tassert.ok(testObject.isMatchSelected(target));\n\t});\n\n\ttest('File Match: isSelected return false for un-selected match', function () {\n\t\tconst testObject = aFileMatch('folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\ttestObject.setSelectedMatch(testObject.matches()[0]);\n\t\tassert.ok(!testObject.isMatchSelected(testObject.matches()[1]));\n\t});\n\n\ttest('File Match: unselect', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\ttestObject.setSelectedMatch(testObject.matches()[0]);\n\t\ttestObject.setSelectedMatch(null);\n\n\t\tassert.strictEqual(null, testObject.getSelectedMatch());\n\t});\n\n\ttest('File Match: unselect when not selected', function () {\n\t\tconst testObject = aFileMatch(\n\t\t\t'folder/file.txt',\n\t\t\taSearchResult(),\n\t\t\tnew TextSearchMatch('foo', new OneLineRange(1, 0, 3)),\n\t\t\tnew TextSearchMatch('bar', new OneLineRange(1, 5, 3)));\n\t\ttestObject.setSelectedMatch(null);\n\n\t\tassert.strictEqual(null, testObject.getSelectedMatch());\n\t});\n\n\ttest('Match -> FileMatch -> SearchResult hierarchy exists', function () {\n\n\t\tconst searchModel = instantiationService.createInstance(SearchModelImpl);\n\t\tstore.add(searchModel);\n\t\tconst searchResult = instantiationService.createInstance(SearchResultImpl, searchModel);\n\t\tstore.add(searchResult);\n\t\tconst fileMatch = aFileMatch('far/boo', searchResult);\n\t\tconst lineMatch = new MatchImpl(fileMatch, ['foo bar'], new OneLineRange(0, 0, 3), new OneLineRange(1, 0, 3), false);\n\n\t\tassert(lineMatch.parent() === fileMatch);\n\t\tassert(fileMatch.parent() === searchResult.folderMatches()[0]);\n\t});\n\n\ttest('Adding a raw match will add a file match with line matches', function () {\n\t\tconst testObject = aSearchResult();\n\t\tconst target = [aRawMatch('/1',\n\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11)),\n\t\t\tnew TextSearchMatch('preview 2', lineOneRange))];\n\n\t\taddToSearchResult(testObject, target);\n\n\t\tassert.strictEqual(3, testObject.count());\n\n\t\tconst actual = testObject.matches();\n\t\tassert.strictEqual(1, actual.length);\n\t\tassert.strictEqual(URI.file(`${getRootName()}/1`).toString(), actual[0].resource.toString());\n\n\t\tconst actuaMatches = actual[0].matches();\n\t\tassert.strictEqual(3, actuaMatches.length);\n\n\t\tassert.strictEqual('preview 1', actuaMatches[0].text());\n\t\tassert.ok(new Range(2, 2, 2, 5).equalsRange(actuaMatches[0].range()));\n\n\t\tassert.strictEqual('preview 1', actuaMatches[1].text());\n\t\tassert.ok(new Range(2, 5, 2, 12).equalsRange(actuaMatches[1].range()));\n\n\t\tassert.strictEqual('preview 2', actuaMatches[2].text());\n\t\tassert.ok(new Range(2, 1, 2, 2).equalsRange(actuaMatches[2].range()));\n\t});\n\n\ttest('Adding multiple raw matches', function () {\n\t\tconst testObject = aSearchResult();\n\t\tconst target = [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11))),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))];\n\n\t\taddToSearchResult(testObject, target);\n\n\t\tassert.strictEqual(3, testObject.count());\n\n\t\tconst actual = testObject.matches();\n\t\tassert.strictEqual(2, actual.length);\n\t\tassert.strictEqual(URI.file(`${getRootName()}/1`).toString(), actual[0].resource.toString());\n\n\t\tlet actuaMatches = actual[0].matches();\n\t\tassert.strictEqual(2, actuaMatches.length);\n\t\tassert.strictEqual('preview 1', actuaMatches[0].text());\n\t\tassert.ok(new Range(2, 2, 2, 5).equalsRange(actuaMatches[0].range()));\n\t\tassert.strictEqual('preview 1', actuaMatches[1].text());\n\t\tassert.ok(new Range(2, 5, 2, 12).equalsRange(actuaMatches[1].range()));\n\n\t\tactuaMatches = actual[1].matches();\n\t\tassert.strictEqual(1, actuaMatches.length);\n\t\tassert.strictEqual('preview 2', actuaMatches[0].text());\n\t\tassert.ok(new Range(2, 1, 2, 2).equalsRange(actuaMatches[0].range()));\n\t});\n\n\ttest('Test that notebook matches get added correctly', function () {\n\t\tconst testObject = aSearchResult();\n\t\tconst cell1 = { cellKind: CellKind.Code } as ICellViewModel;\n\t\tconst cell2 = { cellKind: CellKind.Code } as ICellViewModel;\n\n\t\tsinon.stub(CellMatch.prototype, 'addContext');\n\n\t\tconst addFileMatch = sinon.spy(FolderMatchImpl.prototype, 'addFileMatch');\n\t\tconst fileMatch1 = aRawFileMatchWithCells('/1',\n\t\t\t{\n\t\t\t\tcell: cell1,\n\t\t\t\tindex: 0,\n\t\t\t\tcontentResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\t\t],\n\t\t\t\twebviewResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11)),\n\t\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange)\n\t\t\t\t]\n\t\t\t},);\n\t\tconst fileMatch2 = aRawFileMatchWithCells('/2',\n\t\t\t{\n\t\t\t\tcell: cell2,\n\t\t\t\tindex: 0,\n\t\t\t\tcontentResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 1, 4)),\n\t\t\t\t],\n\t\t\t\twebviewResults: [\n\t\t\t\t\tnew TextSearchMatch('preview 1', new OneLineRange(1, 4, 11)),\n\t\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange)\n\t\t\t\t]\n\t\t\t});\n\t\tconst target = [fileMatch1, fileMatch2];\n\n\t\taddToSearchResult(testObject, target);\n\t\tassert.strictEqual(6, testObject.count());\n\t\tassert.deepStrictEqual(fileMatch1.cellResults[0].contentResults, (addFileMatch.getCall(0).args[0][0] as INotebookFileMatchWithModel).cellResults[0].contentResults);\n\t\tassert.deepStrictEqual(fileMatch1.cellResults[0].webviewResults, (addFileMatch.getCall(0).args[0][0] as INotebookFileMatchWithModel).cellResults[0].webviewResults);\n\t\tassert.deepStrictEqual(fileMatch2.cellResults[0].contentResults, (addFileMatch.getCall(0).args[0][1] as INotebookFileMatchWithModel).cellResults[0].contentResults);\n\t\tassert.deepStrictEqual(fileMatch2.cellResults[0].webviewResults, (addFileMatch.getCall(0).args[0][1] as INotebookFileMatchWithModel).cellResults[0].webviewResults);\n\t});\n\n\ttest('Dispose disposes matches', function () {\n\t\tconst target1 = sinon.spy();\n\t\tconst target2 = sinon.spy();\n\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange)),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))]);\n\n\t\tstore.add(testObject.matches()[0].onDispose(target1));\n\t\tstore.add(testObject.matches()[1].onDispose(target2));\n\n\t\ttestObject.dispose();\n\n\t\tassert.ok(testObject.isEmpty());\n\t\tassert.ok(target1.calledOnce);\n\t\tassert.ok(target2.calledOnce);\n\t});\n\n\ttest('remove triggers change event', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\t\tconst objectToRemove = testObject.matches()[0];\n\t\tstore.add(testObject.onChange(target));\n\n\t\ttestObject.remove(objectToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: [objectToRemove], removed: true }], target.args[0]);\n\t});\n\n\ttest('remove array triggers change event', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange)),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))]);\n\t\tconst arrayToRemove = testObject.matches();\n\t\tstore.add(testObject.onChange(target));\n\n\t\ttestObject.remove(arrayToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: arrayToRemove, removed: true }], target.args[0]);\n\t});\n\n\ttest('Removing all line matches and adding back will add file back to result', function () {\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\t\tconst target = testObject.matches()[0];\n\t\tconst matchToRemove = target.matches()[0];\n\t\ttarget.remove(matchToRemove);\n\n\t\tassert.ok(testObject.isEmpty());\n\t\ttarget.add(matchToRemove, true);\n\n\t\tassert.strictEqual(1, testObject.fileCount());\n\t\tassert.strictEqual(target, testObject.matches()[0]);\n\t});\n\n\ttest('replace should remove the file match', function () {\n\t\tconst voidPromise = Promise.resolve(null);\n\t\tinstantiationService.stub(IReplaceService, 'replace', voidPromise);\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\n\t\ttestObject.replace(testObject.matches()[0]);\n\n\t\treturn voidPromise.then(() => assert.ok(testObject.isEmpty()));\n\t});\n\n\ttest('replace should trigger the change event', function () {\n\t\tconst target = sinon.spy();\n\t\tconst voidPromise = Promise.resolve(null);\n\t\tinstantiationService.stub(IReplaceService, 'replace', voidPromise);\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange))]);\n\n\t\tstore.add(testObject.onChange(target));\n\t\tconst objectToRemove = testObject.matches()[0];\n\n\t\ttestObject.replace(objectToRemove);\n\n\t\treturn voidPromise.then(() => {\n\t\t\tassert.ok(target.calledOnce);\n\t\t\tassert.deepStrictEqual([{ elements: [objectToRemove], removed: true }], target.args[0]);\n\t\t});\n\t});\n\n\ttest('replaceAll should remove all file matches', function () {\n\t\tconst voidPromise = Promise.resolve(null);\n\t\tinstantiationService.stubPromise(IReplaceService, 'replace', voidPromise);\n\t\tconst testObject = aSearchResult();\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/1',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange)),\n\t\t\taRawMatch('/2',\n\t\t\t\tnew TextSearchMatch('preview 2', lineOneRange))]);\n\n\t\ttestObject.replaceAll(null!);\n\n\t\treturn voidPromise.then(() => assert.ok(testObject.isEmpty()));\n\t});\n\n\ttest('batchRemove should trigger the onChange event correctly', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResult();\n\n\t\tconst folderMatch = testObject.folderMatches()[0];\n\t\tconst fileMatch = testObject.folderMatches()[1].allDownstreamFileMatches()[0];\n\t\tconst match = testObject.folderMatches()[1].allDownstreamFileMatches()[1].matches()[0];\n\n\t\tconst arrayToRemove = [folderMatch, fileMatch, match];\n\t\tconst expectedArrayResult = folderMatch.allDownstreamFileMatches().concat([fileMatch, match.parent()]);\n\n\t\tstore.add(testObject.onChange(target));\n\t\ttestObject.batchRemove(arrayToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: expectedArrayResult, removed: true, added: false }], target.args[0]);\n\t});\n\n\ttest('batchReplace should trigger the onChange event correctly', async function () {\n\t\tconst replaceSpy = sinon.spy();\n\t\tinstantiationService.stub(IReplaceService, 'replace', (arg: any) => {\n\t\t\tif (Array.isArray(arg)) {\n\t\t\t\treplaceSpy(arg[0]);\n\t\t\t} else {\n\t\t\t\treplaceSpy(arg);\n\t\t\t}\n\t\t\treturn Promise.resolve();\n\t\t});\n\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResult();\n\n\t\tconst folderMatch = testObject.folderMatches()[0];\n\t\tconst fileMatch = testObject.folderMatches()[1].allDownstreamFileMatches()[0];\n\t\tconst match = testObject.folderMatches()[1].allDownstreamFileMatches()[1].matches()[0];\n\n\t\tconst firstExpectedMatch = folderMatch.allDownstreamFileMatches()[0];\n\n\t\tconst arrayToRemove = [folderMatch, fileMatch, match];\n\n\t\tstore.add(testObject.onChange(target));\n\t\tawait testObject.batchReplace(arrayToRemove);\n\n\t\tassert.ok(target.calledOnce);\n\t\tsinon.assert.calledThrice(replaceSpy);\n\t\tsinon.assert.calledWith(replaceSpy.firstCall, firstExpectedMatch);\n\t\tsinon.assert.calledWith(replaceSpy.secondCall, fileMatch);\n\t\tsinon.assert.calledWith(replaceSpy.thirdCall, match);\n\t});\n\n\ttest('Creating a model with nested folders should create the correct structure', function () {\n\t\tconst testObject = getPopulatedSearchResultForTreeTesting();\n\n\t\tconst root0 = testObject.folderMatches()[0];\n\t\tconst root1 = testObject.folderMatches()[1];\n\t\tconst root2 = testObject.folderMatches()[2];\n\t\tconst root3 = testObject.folderMatches()[3];\n\n\t\tconst root0DownstreamFiles = root0.allDownstreamFileMatches();\n\t\tassert.deepStrictEqual(root0DownstreamFiles, [...root0.fileMatchesIterator(), ...getFolderMatchAtIndex(root0, 0).fileMatchesIterator()]);\n\t\tassert.deepStrictEqual(getFolderMatchAtIndex(root0, 0).allDownstreamFileMatches(), Array.from(getFolderMatchAtIndex(root0, 0).fileMatchesIterator()));\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(getFolderMatchAtIndex(root0, 0), 0).parent(), getFolderMatchAtIndex(root0, 0));\n\t\tassert.deepStrictEqual(getFolderMatchAtIndex(root0, 0).parent(), root0);\n\t\tassert.deepStrictEqual((getFolderMatchAtIndex(root0, 0) as FolderMatchImpl).closestRoot, root0);\n\t\troot0DownstreamFiles.forEach((e) => {\n\t\t\tassert.deepStrictEqual(e.closestRoot, root0);\n\t\t});\n\n\t\tconst root1DownstreamFiles = root1.allDownstreamFileMatches();\n\t\tassert.deepStrictEqual(root1.allDownstreamFileMatches(), [...root1.fileMatchesIterator(), ...getFolderMatchAtIndex(root1, 0).fileMatchesIterator()]); // excludes the matches from nested root\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(getFolderMatchAtIndex(root1, 0), 0).parent(), getFolderMatchAtIndex(root1, 0));\n\t\troot1DownstreamFiles.forEach((e) => {\n\t\t\tassert.deepStrictEqual(e.closestRoot, root1);\n\t\t});\n\n\t\tconst root2DownstreamFiles = root2.allDownstreamFileMatches();\n\t\tassert.deepStrictEqual(root2DownstreamFiles, Array.from(root2.fileMatchesIterator()));\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(root2, 0).parent(), root2);\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(root2, 0).closestRoot, root2);\n\n\n\t\tconst root3DownstreamFiles = root3.allDownstreamFileMatches();\n\t\tconst root3Level3Folder = getFolderMatchAtIndex(getFolderMatchAtIndex(root3, 0), 0);\n\t\tassert.deepStrictEqual(root3DownstreamFiles, [...root3.fileMatchesIterator(), ...getFolderMatchAtIndex(root3Level3Folder, 0).fileMatchesIterator(), ...getFolderMatchAtIndex(root3Level3Folder, 1).fileMatchesIterator()].flat());\n\t\tassert.deepStrictEqual(root3Level3Folder.allDownstreamFileMatches(), getFolderMatchAtIndex(root3, 0).allDownstreamFileMatches());\n\n\t\tassert.deepStrictEqual(getFileMatchAtIndex(getFolderMatchAtIndex(root3Level3Folder, 1), 0).parent(), getFolderMatchAtIndex(root3Level3Folder, 1));\n\t\tassert.deepStrictEqual(getFolderMatchAtIndex(root3Level3Folder, 1).parent(), root3Level3Folder);\n\t\tassert.deepStrictEqual(root3Level3Folder.parent(), getFolderMatchAtIndex(root3, 0));\n\n\t\troot3DownstreamFiles.forEach((e) => {\n\t\t\tassert.deepStrictEqual(e.closestRoot, root3);\n\t\t});\n\t});\n\n\ttest('Removing an intermediate folder should call OnChange() on all downstream file matches', function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResultForTreeTesting();\n\n\t\tconst folderMatch = getFolderMatchAtIndex(getFolderMatchAtIndex(getFolderMatchAtIndex(testObject.folderMatches()[3], 0), 0), 0);\n\n\t\tconst expectedArrayResult = folderMatch.allDownstreamFileMatches();\n\n\t\tstore.add(testObject.onChange(target));\n\t\ttestObject.remove(folderMatch);\n\t\tassert.ok(target.calledOnce);\n\t\tassert.deepStrictEqual([{ elements: expectedArrayResult, removed: true, added: false, clearingAll: false }], target.args[0]);\n\t});\n\n\ttest('Replacing an intermediate folder should remove all downstream folders and file matches', async function () {\n\t\tconst target = sinon.spy();\n\t\tconst testObject = getPopulatedSearchResultForTreeTesting();\n\n\t\tconst folderMatch = getFolderMatchAtIndex(testObject.folderMatches()[3], 0);\n\n\t\tconst expectedArrayResult = folderMatch.allDownstreamFileMatches();\n\n\t\tstore.add(testObject.onChange(target));\n\t\tawait testObject.batchReplace([folderMatch]);\n\t\tassert.deepStrictEqual([{ elements: expectedArrayResult, removed: true, added: false }], target.args[0]);\n\n\t});\n\n\tfunction aFileMatch(path: string, searchResult: ISearchResult | undefined, ...lineMatches: ITextSearchMatch[]): INotebookFileInstanceMatch {\n\t\tif (!searchResult) {\n\t\t\tsearchResult = aSearchResult();\n\t\t}\n\t\tconst rawMatch: IFileMatch = {\n\t\t\tresource: URI.file('/' + path),\n\t\t\tresults: lineMatches\n\t\t};\n\t\tconst root = searchResult?.folderMatches()[0];\n\t\tconst fileMatch = instantiationService.createInstance(NotebookCompatibleFileMatch, {\n\t\t\tpattern: ''\n\t\t}, undefined, undefined, root, rawMatch, null, '');\n\t\tfileMatch.createMatches();\n\n\t\tstore.add(fileMatch);\n\t\treturn fileMatch;\n\t}\n\n\tfunction aSearchResult(): ISearchResult {\n\t\tconst searchModel = instantiationService.createInstance(SearchModelImpl);\n\t\tstore.add(searchModel);\n\t\tsearchModel.searchResult.query = {\n\t\t\ttype: QueryType.Text, folderQueries: [{ folder: createFileUriFromPathFromRoot() }], contentPattern: {\n\t\t\t\tpattern: ''\n\t\t\t}\n\t\t};\n\t\treturn searchModel.searchResult;\n\t}\n\n\tfunction aRawMatch(resource: string, ...results: ITextSearchMatch[]): IFileMatch {\n\t\treturn { resource: createFileUriFromPathFromRoot(resource), results };\n\t}\n\n\tfunction aRawFileMatchWithCells(resource: string, ...cellMatches: INotebookCellMatchWithModel[]): INotebookFileMatchWithModel {\n\t\treturn {\n\t\t\tresource: createFileUriFromPathFromRoot(resource),\n\t\t\tcellResults: cellMatches\n\t\t};\n\t}\n\n\tfunction stubModelService(instantiationService: TestInstantiationService): IModelService {\n\t\tinstantiationService.stub(IThemeService, new TestThemeService());\n\t\tconst config = new TestConfigurationService();\n\t\tconfig.setUserConfiguration('search', { searchOnType: true });\n\t\tinstantiationService.stub(IConfigurationService, config);\n\t\tconst modelService = instantiationService.createInstance(ModelService);\n\t\tstore.add(modelService);\n\t\treturn modelService;\n\t}\n\n\tfunction stubNotebookEditorService(instantiationService: TestInstantiationService): INotebookEditorService {\n\t\tinstantiationService.stub(IEditorGroupsService, new TestEditorGroupsService());\n\t\tinstantiationService.stub(IContextKeyService, new MockContextKeyService());\n\t\tinstantiationService.stub(IEditorService, store.add(new TestEditorService()));\n\t\tconst notebookEditorWidgetService = instantiationService.createInstance(NotebookEditorWidgetService);\n\t\tstore.add(notebookEditorWidgetService);\n\t\treturn notebookEditorWidgetService;\n\t}\n\n\tfunction getPopulatedSearchResult() {\n\t\tconst testObject = aSearchResult();\n\n\t\ttestObject.query = {\n\t\t\ttype: QueryType.Text,\n\t\t\tcontentPattern: { pattern: 'foo' },\n\t\t\tfolderQueries: [{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/voo')\n\t\t\t},\n\t\t\t{ folder: createFileUriFromPathFromRoot('/with') },\n\t\t\t]\n\t\t};\n\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/voo/foo.a',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange), new TextSearchMatch('preview 2', lineOneRange)),\n\t\t\taRawMatch('/with/path/bar.b',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/with/path.c',\n\t\t\t\tnew TextSearchMatch('preview 4', lineOneRange), new TextSearchMatch('preview 5', lineOneRange)),\n\t\t]);\n\t\treturn testObject;\n\t}\n\n\tfunction getPopulatedSearchResultForTreeTesting() {\n\t\tconst testObject = aSearchResult();\n\n\t\ttestObject.query = {\n\t\t\ttype: QueryType.Text,\n\t\t\tcontentPattern: { pattern: 'foo' },\n\t\t\tfolderQueries: [{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/voo')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/with')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/with/test')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfolder: createFileUriFromPathFromRoot('/eep')\n\t\t\t},\n\t\t\t]\n\t\t};\n\t\t/***\n\t\t * file structure looks like:\n\t\t * *voo/\n\t\t * |- foo.a\n\t\t * |- beep\n\t\t *    |- foo.c\n\t\t * \t  |- boop.c\n\t\t * *with/\n\t\t * |- path\n\t\t *    |- bar.b\n\t\t * |- path.c\n\t\t * |- *test/\n\t\t *    |- woo.c\n\t\t * eep/\n\t\t *    |- bar\n\t\t *       |- goo\n\t\t *           |- foo\n\t\t *              |- here.txt\n\t\t * \t\t\t |- ooo\n\t\t *              |- there.txt\n\t\t *    |- eyy.y\n\t\t */\n\n\t\taddToSearchResult(testObject, [\n\t\t\taRawMatch('/voo/foo.a',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange), new TextSearchMatch('preview 2', lineOneRange)),\n\t\t\taRawMatch('/voo/beep/foo.c',\n\t\t\t\tnew TextSearchMatch('preview 1', lineOneRange), new TextSearchMatch('preview 2', lineOneRange)),\n\t\t\taRawMatch('/voo/beep/boop.c',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/with/path.c',\n\t\t\t\tnew TextSearchMatch('preview 4', lineOneRange), new TextSearchMatch('preview 5', lineOneRange)),\n\t\t\taRawMatch('/with/path/bar.b',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/with/test/woo.c',\n\t\t\t\tnew TextSearchMatch('preview 3', lineOneRange)),\n\t\t\taRawMatch('/eep/bar/goo/foo/here.txt',\n\t\t\t\tnew TextSearchMatch('preview 6', lineOneRange), new TextSearchMatch('preview 7', lineOneRange)),\n\t\t\taRawMatch('/eep/bar/goo/ooo/there.txt',\n\t\t\t\tnew TextSearchMatch('preview 6', lineOneRange), new TextSearchMatch('preview 7', lineOneRange)),\n\t\t\taRawMatch('/eep/eyy.y',\n\t\t\t\tnew TextSearchMatch('preview 6', lineOneRange), new TextSearchMatch('preview 7', lineOneRange))\n\t\t]);\n\t\treturn testObject;\n\t}\n\n\tfunction getFolderMatchAtIndex(parent: ISearchTreeFolderMatch, index: number) {\n\t\treturn Array.from(parent.folderMatchesIterator())[index];\n\t}\n\n\tfunction getFileMatchAtIndex(parent: ISearchTreeFolderMatch, index: number) {\n\t\treturn Array.from(parent.fileMatchesIterator())[index];\n\t}\n});\n"]}