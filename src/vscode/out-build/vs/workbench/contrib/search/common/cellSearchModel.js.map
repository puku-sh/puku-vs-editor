{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/common/cellSearchModel.ts","vs/workbench/contrib/search/common/cellSearchModel.ts"],"names":[],"mappings":"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","file":"cellSearchModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { DefaultEndOfLine, FindMatch, IReadonlyTextBuffer } from '../../../../editor/common/model.js';\nimport { PieceTreeTextBufferBuilder } from '../../../../editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js';\nimport { SearchParams } from '../../../../editor/common/model/textModelSearch.js';\n\ninterface RawOutputFindMatch {\n\ttextBuffer: IReadonlyTextBuffer;\n\tmatches: FindMatch[];\n}\n\nexport class CellSearchModel extends Disposable {\n\tprivate _outputTextBuffers: IReadonlyTextBuffer[] | undefined = undefined;\n\tconstructor(readonly _source: string, private _inputTextBuffer: IReadonlyTextBuffer | undefined, private _outputs: string[]) {\n\t\tsuper();\n\t}\n\n\tprivate _getFullModelRange(buffer: IReadonlyTextBuffer): Range {\n\t\tconst lineCount = buffer.getLineCount();\n\t\treturn new Range(1, 1, lineCount, this._getLineMaxColumn(buffer, lineCount));\n\t}\n\n\tprivate _getLineMaxColumn(buffer: IReadonlyTextBuffer, lineNumber: number): number {\n\t\tif (lineNumber < 1 || lineNumber > buffer.getLineCount()) {\n\t\t\tthrow new Error('Illegal value for lineNumber');\n\t\t}\n\t\treturn buffer.getLineLength(lineNumber) + 1;\n\t}\n\n\tget inputTextBuffer(): IReadonlyTextBuffer {\n\t\tif (!this._inputTextBuffer) {\n\t\t\tconst builder = new PieceTreeTextBufferBuilder();\n\t\t\tbuilder.acceptChunk(this._source);\n\t\t\tconst bufferFactory = builder.finish(true);\n\t\t\tconst { textBuffer, disposable } = bufferFactory.create(DefaultEndOfLine.LF);\n\t\t\tthis._inputTextBuffer = textBuffer;\n\t\t\tthis._register(disposable);\n\t\t}\n\n\t\treturn this._inputTextBuffer;\n\t}\n\n\tget outputTextBuffers(): IReadonlyTextBuffer[] {\n\t\tif (!this._outputTextBuffers) {\n\t\t\tthis._outputTextBuffers = this._outputs.map((output) => {\n\t\t\t\tconst builder = new PieceTreeTextBufferBuilder();\n\t\t\t\tbuilder.acceptChunk(output);\n\t\t\t\tconst bufferFactory = builder.finish(true);\n\t\t\t\tconst { textBuffer, disposable } = bufferFactory.create(DefaultEndOfLine.LF);\n\t\t\t\tthis._register(disposable);\n\t\t\t\treturn textBuffer;\n\t\t\t});\n\t\t}\n\t\treturn this._outputTextBuffers;\n\t}\n\n\tfindInInputs(target: string): FindMatch[] {\n\t\tconst searchParams = new SearchParams(target, false, false, null);\n\t\tconst searchData = searchParams.parseSearchRequest();\n\t\tif (!searchData) {\n\t\t\treturn [];\n\t\t}\n\t\tconst fullInputRange = this._getFullModelRange(this.inputTextBuffer);\n\t\treturn this.inputTextBuffer.findMatchesLineByLine(fullInputRange, searchData, true, 5000);\n\t}\n\n\tfindInOutputs(target: string): RawOutputFindMatch[] {\n\t\tconst searchParams = new SearchParams(target, false, false, null);\n\t\tconst searchData = searchParams.parseSearchRequest();\n\t\tif (!searchData) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this.outputTextBuffers.map(buffer => {\n\t\t\tconst matches = buffer.findMatchesLineByLine(\n\t\t\t\tthis._getFullModelRange(buffer),\n\t\t\t\tsearchData,\n\t\t\t\ttrue,\n\t\t\t\t5000\n\t\t\t);\n\t\t\tif (matches.length === 0) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttextBuffer: buffer,\n\t\t\t\tmatches\n\t\t\t};\n\t\t}).filter((item): item is RawOutputFindMatch => !!item);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { DefaultEndOfLine, FindMatch, IReadonlyTextBuffer } from '../../../../editor/common/model.js';\nimport { PieceTreeTextBufferBuilder } from '../../../../editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js';\nimport { SearchParams } from '../../../../editor/common/model/textModelSearch.js';\n\ninterface RawOutputFindMatch {\n\ttextBuffer: IReadonlyTextBuffer;\n\tmatches: FindMatch[];\n}\n\nexport class CellSearchModel extends Disposable {\n\tprivate _outputTextBuffers: IReadonlyTextBuffer[] | undefined = undefined;\n\tconstructor(readonly _source: string, private _inputTextBuffer: IReadonlyTextBuffer | undefined, private _outputs: string[]) {\n\t\tsuper();\n\t}\n\n\tprivate _getFullModelRange(buffer: IReadonlyTextBuffer): Range {\n\t\tconst lineCount = buffer.getLineCount();\n\t\treturn new Range(1, 1, lineCount, this._getLineMaxColumn(buffer, lineCount));\n\t}\n\n\tprivate _getLineMaxColumn(buffer: IReadonlyTextBuffer, lineNumber: number): number {\n\t\tif (lineNumber < 1 || lineNumber > buffer.getLineCount()) {\n\t\t\tthrow new Error('Illegal value for lineNumber');\n\t\t}\n\t\treturn buffer.getLineLength(lineNumber) + 1;\n\t}\n\n\tget inputTextBuffer(): IReadonlyTextBuffer {\n\t\tif (!this._inputTextBuffer) {\n\t\t\tconst builder = new PieceTreeTextBufferBuilder();\n\t\t\tbuilder.acceptChunk(this._source);\n\t\t\tconst bufferFactory = builder.finish(true);\n\t\t\tconst { textBuffer, disposable } = bufferFactory.create(DefaultEndOfLine.LF);\n\t\t\tthis._inputTextBuffer = textBuffer;\n\t\t\tthis._register(disposable);\n\t\t}\n\n\t\treturn this._inputTextBuffer;\n\t}\n\n\tget outputTextBuffers(): IReadonlyTextBuffer[] {\n\t\tif (!this._outputTextBuffers) {\n\t\t\tthis._outputTextBuffers = this._outputs.map((output) => {\n\t\t\t\tconst builder = new PieceTreeTextBufferBuilder();\n\t\t\t\tbuilder.acceptChunk(output);\n\t\t\t\tconst bufferFactory = builder.finish(true);\n\t\t\t\tconst { textBuffer, disposable } = bufferFactory.create(DefaultEndOfLine.LF);\n\t\t\t\tthis._register(disposable);\n\t\t\t\treturn textBuffer;\n\t\t\t});\n\t\t}\n\t\treturn this._outputTextBuffers;\n\t}\n\n\tfindInInputs(target: string): FindMatch[] {\n\t\tconst searchParams = new SearchParams(target, false, false, null);\n\t\tconst searchData = searchParams.parseSearchRequest();\n\t\tif (!searchData) {\n\t\t\treturn [];\n\t\t}\n\t\tconst fullInputRange = this._getFullModelRange(this.inputTextBuffer);\n\t\treturn this.inputTextBuffer.findMatchesLineByLine(fullInputRange, searchData, true, 5000);\n\t}\n\n\tfindInOutputs(target: string): RawOutputFindMatch[] {\n\t\tconst searchParams = new SearchParams(target, false, false, null);\n\t\tconst searchData = searchParams.parseSearchRequest();\n\t\tif (!searchData) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this.outputTextBuffers.map(buffer => {\n\t\t\tconst matches = buffer.findMatchesLineByLine(\n\t\t\t\tthis._getFullModelRange(buffer),\n\t\t\t\tsearchData,\n\t\t\t\ttrue,\n\t\t\t\t5000\n\t\t\t);\n\t\t\tif (matches.length === 0) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttextBuffer: buffer,\n\t\t\t\tmatches\n\t\t\t};\n\t\t}).filter((item): item is RawOutputFindMatch => !!item);\n\t}\n}\n"]}