{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/common/searchHistoryService.ts","vs/workbench/contrib/search/common/searchHistoryService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAEhG,OAAO,EAAE,OAAO,EAAS,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAC9G,OAAO,EAAE,aAAa,EAAE,MAAM,kCAAkC,CAAC;AACjE,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAU7F,MAAM,CAAC,MAAM,qBAAqB,GAAG,eAAe,CAAwB,sBAAsB,CAAC,CAAC;AAS7F,IAAM,oBAAoB,GAA1B,MAAM,oBAAoB;;aAGT,uBAAkB,GAAG,0BAAH,AAA6B,CAAC;IAKvE,YACkB,cAAgD;QAA/B,mBAAc,GAAd,cAAc,CAAiB;QAJjD,uBAAkB,GAAG,IAAI,OAAO,EAAQ,CAAC;QACjD,sBAAiB,GAAgB,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;IAIpE,CAAC;IAEL,YAAY;QACX,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,sBAAoB,CAAC,kBAAkB,iCAAyB,CAAC;QAC5F,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC;IAChC,CAAC;IAED,IAAI;QACH,IAAI,MAAwC,CAAC;QAC7C,MAAM,GAAG,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,sBAAoB,CAAC,kBAAkB,iCAAyB,CAAC;QAErG,IAAI,GAAG,EAAE,CAAC;YACT,IAAI,CAAC;gBACJ,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC1B,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACZ,eAAe;YAChB,CAAC;QACF,CAAC;QAED,OAAO,MAAM,IAAI,EAAE,CAAC;IACrB,CAAC;IAED,IAAI,CAAC,OAA6B;QACjC,IAAI,aAAa,CAAC,OAAO,CAAC,EAAE,CAAC;YAC5B,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,sBAAoB,CAAC,kBAAkB,iCAAyB,CAAC;QAC7F,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,sBAAoB,CAAC,kBAAkB,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,6DAA6C,CAAC;QACzI,CAAC;IACF,CAAC;;AAtCW,oBAAoB;IAS9B,WAAA,eAAe,CAAA;GATL,oBAAoB,CAuChC","file":"searchHistoryService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { isEmptyObject } from '../../../../base/common/types.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport interface ISearchHistoryService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidClearHistory: Event<void>;\n\tclearHistory(): void;\n\tload(): ISearchHistoryValues;\n\tsave(history: ISearchHistoryValues): void;\n}\n\nexport const ISearchHistoryService = createDecorator<ISearchHistoryService>('searchHistoryService');\n\nexport interface ISearchHistoryValues {\n\tsearch?: string[];\n\treplace?: string[];\n\tinclude?: string[];\n\texclude?: string[];\n}\n\nexport class SearchHistoryService implements ISearchHistoryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tpublic static readonly SEARCH_HISTORY_KEY = 'workbench.search.history';\n\n\tprivate readonly _onDidClearHistory = new Emitter<void>();\n\treadonly onDidClearHistory: Event<void> = this._onDidClearHistory.event;\n\n\tconstructor(\n\t\t@IStorageService private readonly storageService: IStorageService\n\t) { }\n\n\tclearHistory(): void {\n\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\tthis._onDidClearHistory.fire();\n\t}\n\n\tload(): ISearchHistoryValues {\n\t\tlet result: ISearchHistoryValues | undefined;\n\t\tconst raw = this.storageService.get(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\n\t\tif (raw) {\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(raw);\n\t\t\t} catch (e) {\n\t\t\t\t// Invalid data\n\t\t\t}\n\t\t}\n\n\t\treturn result || {};\n\t}\n\n\tsave(history: ISearchHistoryValues): void {\n\t\tif (isEmptyObject(history)) {\n\t\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\t} else {\n\t\t\tthis.storageService.store(SearchHistoryService.SEARCH_HISTORY_KEY, JSON.stringify(history), StorageScope.WORKSPACE, StorageTarget.USER);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { isEmptyObject } from '../../../../base/common/types.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport interface ISearchHistoryService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidClearHistory: Event<void>;\n\tclearHistory(): void;\n\tload(): ISearchHistoryValues;\n\tsave(history: ISearchHistoryValues): void;\n}\n\nexport const ISearchHistoryService = createDecorator<ISearchHistoryService>('searchHistoryService');\n\nexport interface ISearchHistoryValues {\n\tsearch?: string[];\n\treplace?: string[];\n\tinclude?: string[];\n\texclude?: string[];\n}\n\nexport class SearchHistoryService implements ISearchHistoryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tpublic static readonly SEARCH_HISTORY_KEY = 'workbench.search.history';\n\n\tprivate readonly _onDidClearHistory = new Emitter<void>();\n\treadonly onDidClearHistory: Event<void> = this._onDidClearHistory.event;\n\n\tconstructor(\n\t\t@IStorageService private readonly storageService: IStorageService\n\t) { }\n\n\tclearHistory(): void {\n\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\tthis._onDidClearHistory.fire();\n\t}\n\n\tload(): ISearchHistoryValues {\n\t\tlet result: ISearchHistoryValues | undefined;\n\t\tconst raw = this.storageService.get(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\n\t\tif (raw) {\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(raw);\n\t\t\t} catch (e) {\n\t\t\t\t// Invalid data\n\t\t\t}\n\t\t}\n\n\t\treturn result || {};\n\t}\n\n\tsave(history: ISearchHistoryValues): void {\n\t\tif (isEmptyObject(history)) {\n\t\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\t} else {\n\t\t\tthis.storageService.store(SearchHistoryService.SEARCH_HISTORY_KEY, JSON.stringify(history), StorageScope.WORKSPACE, StorageTarget.USER);\n\t\t}\n\t}\n}\n"]}