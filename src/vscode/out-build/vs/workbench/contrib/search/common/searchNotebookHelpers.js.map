{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/search/common/searchNotebookHelpers.ts","vs/workbench/contrib/search/common/searchNotebookHelpers.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAIhG,OAAO,EAAE,eAAe,EAAgC,MAAM,2CAA2C,CAAC;AAC1G,OAAO,EAAE,KAAK,EAAE,MAAM,yCAAyC,CAAC;AAehE,MAAM,UAAU,2BAA2B,CAAC,MAAkB;IAC7D,OAAO,aAAa,IAAI,MAAM,CAAC;AAChC,CAAC;AAED,MAAM,CAAC,MAAM,aAAa,GAAG,UAAU,CAAC;AAExC,MAAM,UAAU,qCAAqC,CAAC,cAA2B,EAAE,MAA2B;IAC7G,IAAI,eAAe,GAAG,CAAC,CAAC,CAAC;IACzB,MAAM,gBAAgB,GAAkB,EAAE,CAAC;IAC3C,IAAI,sBAAsB,GAAgB,EAAE,CAAC;IAE7C,cAAc,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;QAChC,IAAI,KAAK,CAAC,KAAK,CAAC,eAAe,KAAK,eAAe,EAAE,CAAC;YACrD,IAAI,sBAAsB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACvC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,sBAAsB,CAAC,CAAC,CAAC;gBACnD,sBAAsB,GAAG,EAAE,CAAC;YAC7B,CAAC;QACF,CAAC;QAED,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,eAAe,GAAG,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC;IAC7C,CAAC,CAAC,CAAC;IAEH,IAAI,sBAAsB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACvC,gBAAgB,CAAC,IAAI,CAAC,CAAC,GAAG,sBAAsB,CAAC,CAAC,CAAC;IACpD,CAAC;IAED,MAAM,iBAAiB,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;QAC3D,MAAM,SAAS,GAAa,EAAE,CAAC;QAC/B,MAAM,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC;QACpD,MAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC;QACnE,KAAK,IAAI,CAAC,GAAG,SAAS,EAAE,CAAC,IAAI,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC;YAC5C,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1C,CAAC;QACD,OAAO,IAAI,eAAe,CACzB,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,EAC3B,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,eAAe,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,aAAa,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CACpI,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,iBAAiB,CAAC;AAC1B,CAAC","file":"searchNotebookHelpers.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport { FindMatch, IReadonlyTextBuffer } from '../../../../editor/common/model.js';\nimport { TextSearchMatch, IFileMatch, ITextSearchMatch } from '../../../services/search/common/search.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\n\nexport type IRawClosedNotebookFileMatch = INotebookFileMatchNoModel<UriComponents>;\n\nexport interface INotebookFileMatchNoModel<U extends UriComponents = URI> extends IFileMatch<U> {\n\tcellResults: INotebookCellMatchNoModel<U>[];\n}\n\nexport interface INotebookCellMatchNoModel<U extends UriComponents = URI> {\n\tindex: number;\n\tcontentResults: ITextSearchMatch<U>[];\n\twebviewResults: ITextSearchMatch<U>[];\n}\n\nexport function isINotebookFileMatchNoModel(object: IFileMatch): object is INotebookFileMatchNoModel {\n\treturn 'cellResults' in object;\n}\n\nexport const rawCellPrefix = 'rawCell#';\n\nexport function genericCellMatchesToTextSearchMatches(contentMatches: FindMatch[], buffer: IReadonlyTextBuffer) {\n\tlet previousEndLine = -1;\n\tconst contextGroupings: FindMatch[][] = [];\n\tlet currentContextGrouping: FindMatch[] = [];\n\n\tcontentMatches.forEach((match) => {\n\t\tif (match.range.startLineNumber !== previousEndLine) {\n\t\t\tif (currentContextGrouping.length > 0) {\n\t\t\t\tcontextGroupings.push([...currentContextGrouping]);\n\t\t\t\tcurrentContextGrouping = [];\n\t\t\t}\n\t\t}\n\n\t\tcurrentContextGrouping.push(match);\n\t\tpreviousEndLine = match.range.endLineNumber;\n\t});\n\n\tif (currentContextGrouping.length > 0) {\n\t\tcontextGroupings.push([...currentContextGrouping]);\n\t}\n\n\tconst textSearchResults = contextGroupings.map((grouping) => {\n\t\tconst lineTexts: string[] = [];\n\t\tconst firstLine = grouping[0].range.startLineNumber;\n\t\tconst lastLine = grouping[grouping.length - 1].range.endLineNumber;\n\t\tfor (let i = firstLine; i <= lastLine; i++) {\n\t\t\tlineTexts.push(buffer.getLineContent(i));\n\t\t}\n\t\treturn new TextSearchMatch(\n\t\t\tlineTexts.join('\\n') + '\\n',\n\t\t\tgrouping.map(m => new Range(m.range.startLineNumber - 1, m.range.startColumn - 1, m.range.endLineNumber - 1, m.range.endColumn - 1)),\n\t\t);\n\t});\n\n\treturn textSearchResults;\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n\nimport { FindMatch, IReadonlyTextBuffer } from '../../../../editor/common/model.js';\nimport { TextSearchMatch, IFileMatch, ITextSearchMatch } from '../../../services/search/common/search.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\n\nexport type IRawClosedNotebookFileMatch = INotebookFileMatchNoModel<UriComponents>;\n\nexport interface INotebookFileMatchNoModel<U extends UriComponents = URI> extends IFileMatch<U> {\n\tcellResults: INotebookCellMatchNoModel<U>[];\n}\n\nexport interface INotebookCellMatchNoModel<U extends UriComponents = URI> {\n\tindex: number;\n\tcontentResults: ITextSearchMatch<U>[];\n\twebviewResults: ITextSearchMatch<U>[];\n}\n\nexport function isINotebookFileMatchNoModel(object: IFileMatch): object is INotebookFileMatchNoModel {\n\treturn 'cellResults' in object;\n}\n\nexport const rawCellPrefix = 'rawCell#';\n\nexport function genericCellMatchesToTextSearchMatches(contentMatches: FindMatch[], buffer: IReadonlyTextBuffer) {\n\tlet previousEndLine = -1;\n\tconst contextGroupings: FindMatch[][] = [];\n\tlet currentContextGrouping: FindMatch[] = [];\n\n\tcontentMatches.forEach((match) => {\n\t\tif (match.range.startLineNumber !== previousEndLine) {\n\t\t\tif (currentContextGrouping.length > 0) {\n\t\t\t\tcontextGroupings.push([...currentContextGrouping]);\n\t\t\t\tcurrentContextGrouping = [];\n\t\t\t}\n\t\t}\n\n\t\tcurrentContextGrouping.push(match);\n\t\tpreviousEndLine = match.range.endLineNumber;\n\t});\n\n\tif (currentContextGrouping.length > 0) {\n\t\tcontextGroupings.push([...currentContextGrouping]);\n\t}\n\n\tconst textSearchResults = contextGroupings.map((grouping) => {\n\t\tconst lineTexts: string[] = [];\n\t\tconst firstLine = grouping[0].range.startLineNumber;\n\t\tconst lastLine = grouping[grouping.length - 1].range.endLineNumber;\n\t\tfor (let i = firstLine; i <= lastLine; i++) {\n\t\t\tlineTexts.push(buffer.getLineContent(i));\n\t\t}\n\t\treturn new TextSearchMatch(\n\t\t\tlineTexts.join('\\n') + '\\n',\n\t\t\tgrouping.map(m => new Range(m.range.startLineNumber - 1, m.range.startColumn - 1, m.range.endLineNumber - 1, m.range.endColumn - 1)),\n\t\t);\n\t});\n\n\treturn textSearchResults;\n}\n\n"]}