{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/snippets/test/browser/snippetsService.test.ts","vs/workbench/contrib/snippets/test/browser/snippetsService.test.ts"],"names":[],"mappings":"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","file":"snippetsService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { SnippetCompletion, SnippetCompletionProvider } from '../../browser/snippetCompletionProvider.js';\nimport { IPosition, Position } from '../../../../../editor/common/core/position.js';\nimport { createModelServices, instantiateTextModel } from '../../../../../editor/test/common/testTextModel.js';\nimport { ISnippetsService } from '../../browser/snippets.js';\nimport { Snippet, SnippetSource } from '../../browser/snippetsFile.js';\nimport { CompletionContext, CompletionItemLabel, CompletionItemRanges, CompletionTriggerKind } from '../../../../../editor/common/languages.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { TestLanguageConfigurationService } from '../../../../../editor/test/common/modes/testLanguageConfigurationService.js';\nimport { EditOperation } from '../../../../../editor/common/core/editOperation.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { CompletionModel } from '../../../../../editor/contrib/suggest/browser/completionModel.js';\nimport { CompletionItem } from '../../../../../editor/contrib/suggest/browser/suggest.js';\nimport { WordDistance } from '../../../../../editor/contrib/suggest/browser/wordDistance.js';\nimport { EditorOptions } from '../../../../../editor/common/config/editorOptions.js';\n\nclass SimpleSnippetService implements ISnippetsService {\n\tdeclare readonly _serviceBrand: undefined;\n\tconstructor(readonly snippets: Snippet[]) { }\n\tgetSnippets() {\n\t\treturn Promise.resolve(this.getSnippetsSync());\n\t}\n\tgetSnippetsSync(): Snippet[] {\n\t\treturn this.snippets;\n\t}\n\tgetSnippetFiles(): any {\n\t\tthrow new Error();\n\t}\n\tisEnabled(): boolean {\n\t\tthrow new Error();\n\t}\n\tupdateEnablement(): void {\n\t\tthrow new Error();\n\t}\n\tupdateUsageTimestamp(snippet: Snippet): void {\n\t\tthrow new Error();\n\t}\n}\n\nsuite('SnippetsService', function () {\n\tconst defaultCompletionContext: CompletionContext = { triggerKind: CompletionTriggerKind.Invoke };\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageService: ILanguageService;\n\tlet snippetService: ISnippetsService;\n\n\tsetup(function () {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createModelServices(disposables);\n\t\tlanguageService = instantiationService.get(ILanguageService);\n\t\tdisposables.add(languageService.registerLanguage({\n\t\t\tid: 'fooLang',\n\t\t\textensions: ['.fooLang',]\n\t\t}));\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'barTest',\n\t\t\t'bar',\n\t\t\t'',\n\t\t\t'barCodeSnippet',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bazzTest',\n\t\t\t'bazz',\n\t\t\t'',\n\t\t\t'bazzCodeSnippet',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tasync function asCompletionModel(model: ITextModel, position: IPosition, provider: SnippetCompletionProvider, context: CompletionContext = defaultCompletionContext) {\n\n\t\tconst list = await provider.provideCompletionItems(model, Position.lift(position), context);\n\n\t\tconst result = new CompletionModel(list.suggestions.map(s => {\n\t\t\treturn new CompletionItem(position, s, list, provider);\n\t\t}),\n\t\t\tposition.column,\n\t\t\t{ characterCountDelta: 0, leadingLineContent: model.getLineContent(position.lineNumber).substring(0, position.column - 1) },\n\t\t\tWordDistance.None, EditorOptions.suggest.defaultValue, EditorOptions.snippetSuggestions.defaultValue, undefined\n\t\t);\n\n\t\treturn result;\n\t}\n\n\ttest('snippet completions - simple', async function () {\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '', 'fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 2);\n\t});\n\n\ttest('snippet completions - simple 2', async function () {\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'hello ', 'fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 6) /* hello| */, defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 0);\n\t\t});\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 7) /* hello |*/, defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t});\n\n\t\tconst completions1 = await asCompletionModel(model, new Position(1, 6)/* hello| */, provider);\n\t\tassert.strictEqual(completions1.items.length, 0);\n\n\t\tconst completions2 = await asCompletionModel(model, new Position(1, 7)/* hello |*/, provider);\n\t\tassert.strictEqual(completions2.items.length, 2);\n\t});\n\n\ttest('snippet completions - with prefix', async function () {\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'bar', 'fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\tassert.strictEqual(result.suggestions[0].insertText, 'barCodeSnippet');\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 4), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.deepStrictEqual(completions.items[0].completion.label, {\n\t\t\tlabel: 'bar',\n\t\t\tdescription: 'barTest'\n\t\t});\n\t\tassert.strictEqual((completions.items[0].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\tassert.strictEqual(completions.items[0].completion.insertText, 'barCodeSnippet');\n\t});\n\n\ttest('snippet completions - with different prefixes', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'barTest',\n\t\t\t'bar',\n\t\t\t'',\n\t\t\t's1',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'name',\n\t\t\t'bar-bar',\n\t\t\t'',\n\t\t\t's2',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'bar-bar', 'fooLang'));\n\n\t\t{\n\t\t\tawait provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!.then(result => {\n\t\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\tdescription: 'barTest'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's1');\n\t\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[1].label, {\n\t\t\t\t\tlabel: 'bar-bar',\n\t\t\t\t\tdescription: 'name'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[1].insertText, 's2');\n\t\t\t\tassert.strictEqual((result.suggestions[1].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t});\n\n\t\t\tconst completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\t\tassert.strictEqual(completions.items.length, 2);\n\t\t\tassert.deepStrictEqual(completions.items[0].completion.label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[0].completion.insertText, 's1');\n\t\t\tassert.strictEqual((completions.items[0].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\tassert.deepStrictEqual(completions.items[1].completion.label, {\n\t\t\t\tlabel: 'bar-bar',\n\t\t\t\tdescription: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[1].completion.insertText, 's2');\n\t\t\tassert.strictEqual((completions.items[1].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t}\n\n\t\t{\n\t\t\tawait provider.provideCompletionItems(model, new Position(1, 5), defaultCompletionContext)!.then(result => {\n\t\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\n\t\t\t\tconst [first, second] = result.suggestions;\n\n\t\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\tdescription: 'barTest'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(first.insertText, 's1');\n\t\t\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 5);\n\n\t\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\t\tlabel: 'bar-bar',\n\t\t\t\t\tdescription: 'name'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(second.insertText, 's2');\n\t\t\t\tassert.strictEqual((second.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t});\n\n\t\t\tconst completions = await asCompletionModel(model, new Position(1, 5), provider);\n\t\t\tassert.strictEqual(completions.items.length, 2);\n\n\t\t\tconst [first, second] = completions.items.map(i => i.completion);\n\n\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\tlabel: 'bar-bar',\n\t\t\t\tdescription: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(first.insertText, 's2');\n\t\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 1);\n\n\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(second.insertText, 's1');\n\t\t\tassert.strictEqual((second.range as CompletionItemRanges).insert.startColumn, 5);\n\t\t}\n\n\t\t{\n\t\t\tawait provider.provideCompletionItems(model, new Position(1, 6), defaultCompletionContext)!.then(result => {\n\t\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\tdescription: 'barTest'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's1');\n\t\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 5);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[1].label, {\n\t\t\t\t\tlabel: 'bar-bar',\n\t\t\t\t\tdescription: 'name'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[1].insertText, 's2');\n\t\t\t\tassert.strictEqual((result.suggestions[1].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t});\n\n\t\t\tconst completions = await asCompletionModel(model, new Position(1, 6), provider);\n\t\t\tassert.strictEqual(completions.items.length, 2);\n\t\t\tassert.deepStrictEqual(completions.items[0].completion.label, {\n\t\t\t\tlabel: 'bar-bar',\n\t\t\t\tdescription: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[0].completion.insertText, 's2');\n\t\t\tassert.strictEqual((completions.items[0].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\tassert.deepStrictEqual(completions.items[1].completion.label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[1].completion.insertText, 's1');\n\t\t\tassert.strictEqual((completions.items[1].completion.range as CompletionItemRanges).insert.startColumn, 5);\n\t\t}\n\t});\n\n\ttest('Cannot use \"<?php\" as user snippet prefix anymore, #26275', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'',\n\t\t\t'<?php',\n\t\t\t'',\n\t\t\t'insert me',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tlet model = instantiateTextModel(instantiationService, '\\t<?php', 'fooLang');\n\t\tawait provider.provideCompletionItems(model, new Position(1, 7), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t\tconst completions1 = await asCompletionModel(model, new Position(1, 7), provider);\n\t\tassert.strictEqual(completions1.items.length, 1);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, '\\t<?', 'fooLang');\n\t\tawait provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 2);\n\t\t});\n\t\tconst completions2 = await asCompletionModel(model, new Position(1, 4), provider);\n\t\tassert.strictEqual(completions2.items.length, 1);\n\t\tassert.strictEqual((completions2.items[0].completion.range as CompletionItemRanges).insert.startColumn, 2);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, 'a<?', 'fooLang');\n\t\tawait provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 2);\n\t\t});\n\t\tconst completions3 = await asCompletionModel(model, new Position(1, 4), provider);\n\t\tassert.strictEqual(completions3.items.length, 1);\n\t\tassert.strictEqual((completions3.items[0].completion.range as CompletionItemRanges).insert.startColumn, 2);\n\t\tmodel.dispose();\n\t});\n\n\ttest('No user snippets in suggestions, when inside the code, #30508', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'',\n\t\t\t'foo',\n\t\t\t'',\n\t\t\t'<foo>$0</foo>',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '<head>\\n\\t\\n>/head>', 'fooLang'));\n\t\tawait provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t\tconst completions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\n\t\tawait provider.provideCompletionItems(model, new Position(2, 2), defaultCompletionContext).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t\tconst completions2 = await asCompletionModel(model, new Position(2, 2), provider);\n\t\tassert.strictEqual(completions2.items.length, 1);\n\n\t});\n\n\ttest('SnippetSuggest - ensure extension snippets come last ', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'second',\n\t\t\t'second',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.Extension,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'first',\n\t\t\t'first',\n\t\t\t'',\n\t\t\t'first',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '', 'fooLang'));\n\t\tawait provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\tconst [first, second] = result.suggestions;\n\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\tlabel: 'first',\n\t\t\t\tdescription: 'first'\n\t\t\t});\n\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\tlabel: 'second',\n\t\t\t\tdescription: 'second'\n\t\t\t});\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 2);\n\t\tconst [first, second] = completions.items;\n\t\tassert.deepStrictEqual(first.completion.label, {\n\t\t\tlabel: 'first',\n\t\t\tdescription: 'first'\n\t\t});\n\t\tassert.deepStrictEqual(second.completion.label, {\n\t\t\tlabel: 'second',\n\t\t\tdescription: 'second'\n\t\t});\n\t});\n\n\ttest('Dash in snippets prefix broken #53945', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'p-a',\n\t\t\t'p-a',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'p-', 'fooLang'));\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 2), defaultCompletionContext)!;\n\t\tlet completions = await asCompletionModel(model, new Position(1, 2), provider);\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tcompletions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tcompletions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('No snippets suggestion on long lines beyond character 100 #58807', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea b', 'fooLang'));\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 158), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 158), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('Type colon will trigger snippet #60746', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, ':', 'fooLang'));\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 2), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 2), provider);\n\t\tassert.strictEqual(completions.items.length, 0);\n\t});\n\n\ttest('substring of prefix can\\'t trigger snippet #60737', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'mytemplate',\n\t\t\t'mytemplate',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'template', 'fooLang'));\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 9), defaultCompletionContext);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\tlabel: 'mytemplate',\n\t\t\tdescription: 'mytemplate'\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 9), provider);\n\t\tassert.strictEqual(completions.items.length, 0);\n\t});\n\n\ttest('No snippets suggestion beyond character 100 if not at end of line #60247', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea b text_after_b', 'fooLang'));\n\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 158), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 158), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('issue #61296: VS code freezes when editing CSS fi`le with emoji', async function () {\n\t\tconst languageConfigurationService = disposables.add(new TestLanguageConfigurationService());\n\t\tdisposables.add(languageConfigurationService.register('fooLang', {\n\t\t\twordPattern: /(#?-?\\d*\\.\\d\\w*%?)|(::?[\\w-]*(?=[^,{;]*[,{]))|(([@#.!])?[\\w\\-?]+%?|[@#!.])/g\n\t\t}));\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'-a-bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, languageConfigurationService);\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '.-a-b', 'fooLang'));\n\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 8), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 8), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('No snippets shown when triggering completions at whitespace on line that already has text #62335', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'a ', 'fooLang'));\n\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('Snippet prefix with special chars and numbers does not work #62906', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'noblockwdelay',\n\t\t\t'<<',\n\t\t\t'',\n\t\t\t'<= #dly\"',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'noblockwdelay',\n\t\t\t'11',\n\t\t\t'',\n\t\t\t'eleven',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tlet model = instantiateTextModel(instantiationService, ' <', 'fooLang');\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 2);\n\n\t\tlet completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editStart.column, 2);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, '1', 'fooLang');\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 2), defaultCompletionContext)!;\n\t\tcompletions = await asCompletionModel(model, new Position(1, 2), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editStart.column, 1);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet replace range', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'notWordTest',\n\t\t\t'not word',\n\t\t\t'',\n\t\t\t'not word snippet',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tlet model = instantiateTextModel(instantiationService, 'not wordFoo bar', 'fooLang');\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 3);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 9);\n\n\t\tlet completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 3);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 9);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, 'not woFoo bar', 'fooLang');\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 3);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 3);\n\n\t\tcompletions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 3);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 3);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, 'not word', 'fooLang');\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 1);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 9);\n\n\t\tcompletions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 1);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 9);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet replace-range incorrect #108894', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'eng',\n\t\t\t'eng',\n\t\t\t'',\n\t\t\t'<span></span>',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, 'filler e KEEP ng filler', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 9), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 9), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 9);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 9);\n\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 9);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 9);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet will replace auto-closing pair if specified in prefix', async function () {\n\t\tconst languageConfigurationService = disposables.add(new TestLanguageConfigurationService());\n\t\tdisposables.add(languageConfigurationService.register('fooLang', {\n\t\t\tbrackets: [\n\t\t\t\t['{', '}'],\n\t\t\t\t['[', ']'],\n\t\t\t\t['(', ')'],\n\t\t\t]\n\t\t}));\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'PSCustomObject',\n\t\t\t'[PSCustomObject]',\n\t\t\t'',\n\t\t\t'[PSCustomObject] @{ Key = Value }',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, languageConfigurationService);\n\n\t\tconst model = instantiateTextModel(instantiationService, '[psc]', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 5), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 5), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 5);\n\t\t// This is 6 because it should eat the `]` at the end of the text even if cursor is before it\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 6);\n\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 5);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 6);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Leading whitespace in snippet prefix #123860', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'cite-name',\n\t\t\t' cite',\n\t\t\t'',\n\t\t\t'~\\\\cite{$CLIPBOARD}',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, ' ci', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 4), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst [first] = result.suggestions;\n\t\tassert.strictEqual((<CompletionItemLabel>first.label).label, ' cite');\n\t\tassert.strictEqual((<CompletionItemRanges>first.range).insert.startColumn, 1);\n\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, ' cite');\n\t\tassert.strictEqual(completions.items[0].editStart.column, 1);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('still show suggestions in string when disable string suggestion #136611', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'aaa', 'aaa', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'bbb', 'bbb', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\t// new Snippet(['fooLang'], '\\'ccc', '\\'ccc', '', 'value', '', SnippetSource.User, generateUuid())\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, '\\'\\'', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 2),\n\t\t\t{ triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '\\'' }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\t\tmodel.dispose();\n\n\t});\n\n\ttest('still show suggestions in string when disable string suggestion #136611 (part 2)', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'aaa', 'aaa', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'bbb', 'bbb', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '\\'ccc', '\\'ccc', '', 'value', '', SnippetSource.User, generateUuid())\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, '\\'\\'', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 2),\n\t\t\t{ triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '\\'' }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 2), provider, { triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '\\'' });\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet suggestions are too eager #138707 (word)', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'tys', 'tys', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'hell_or_tell', 'hell_or_tell', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '^y', '^y', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, '\\'hellot\\'', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 8),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual((<SnippetCompletion>result.suggestions[0]).label.label, 'hell_or_tell');\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 8), provider, { triggerKind: CompletionTriggerKind.Invoke });\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, 'hell_or_tell');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet suggestions are too eager #138707 (no word)', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'tys', 'tys', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 't', 't', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '^y', '^y', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, ')*&^', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 5),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual((<SnippetCompletion>result.suggestions[0]).label.label, '^y');\n\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 5), provider, { triggerKind: CompletionTriggerKind.Invoke });\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, '^y');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet suggestions are too eager #138707 (word/word)', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'async arrow function', 'async arrow function', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'foobarrrrrr', 'foobarrrrrr', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, 'foobar', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 7),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual((<SnippetCompletion>result.suggestions[0]).label.label, 'foobarrrrrr');\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 7), provider, { triggerKind: CompletionTriggerKind.Invoke });\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, 'foobarrrrrr');\n\t\tmodel.dispose();\n\t});\n\n\ttest('Strange and useless autosuggestion #region/#endregion PHP #140039', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'reg', '#region', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, 'function abc(w)', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 15),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\t\tmodel.dispose();\n\t});\n\n\ttest.skip('Snippets disappear with . key #145960', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'div', 'div', '', 'div', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'div.', 'div.', '', 'div.', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'div#', 'div#', '', 'div#', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, 'di', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 3),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 3);\n\n\n\t\tmodel.applyEdits([EditOperation.insert(new Position(1, 3), '.')]);\n\t\tassert.strictEqual(model.getValue(), 'di.');\n\t\tconst result2 = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 4),\n\t\t\t{ triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '.' }\n\t\t)!;\n\n\t\tassert.strictEqual(result2.suggestions.length, 1);\n\t\tassert.strictEqual(result2.suggestions[0].insertText, 'div.');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Hyphen in snippet prefix de-indents snippet #139016', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'foo', 'Foo- Bar', '', 'Foo', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '    bar', 'fooLang'));\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 8),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst first = result.suggestions[0];\n\t\tassert.strictEqual((<CompletionItemRanges>first.range).insert.startColumn, 5);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 8), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editStart.column, 5);\n\t});\n\n\ttest('Autocomplete suggests based on the last letter of a word and it depends on the typing speed #191070', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], '/whiletrue', '/whiletrue', '', 'one', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '/sc not expanding', '/sc not expanding', '', 'two', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '', 'fooLang'));\n\n\t\t{ // PREFIX: w\n\t\t\tmodel.setValue('w');\n\t\t\tconst result1 = await provider.provideCompletionItems(\n\t\t\t\tmodel,\n\t\t\t\tnew Position(1, 2),\n\t\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t\t);\n\t\t\tassert.strictEqual(result1.suggestions[0].insertText, 'one');\n\t\t\tassert.strictEqual(result1.suggestions.length, 1);\n\t\t}\n\n\t\t{ // PREFIX: where\n\t\t\tmodel.setValue('where');\n\t\t\tconst result2 = await provider.provideCompletionItems(\n\t\t\t\tmodel,\n\t\t\t\tnew Position(1, 6),\n\t\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t\t);\n\t\t\tassert.strictEqual(result2.suggestions[0].insertText, 'one'); // /whiletrue matches where (WHilEtRuE)\n\t\t\tassert.strictEqual(result2.suggestions.length, 1);\n\t\t}\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { SnippetCompletion, SnippetCompletionProvider } from '../../browser/snippetCompletionProvider.js';\nimport { IPosition, Position } from '../../../../../editor/common/core/position.js';\nimport { createModelServices, instantiateTextModel } from '../../../../../editor/test/common/testTextModel.js';\nimport { ISnippetsService } from '../../browser/snippets.js';\nimport { Snippet, SnippetSource } from '../../browser/snippetsFile.js';\nimport { CompletionContext, CompletionItemLabel, CompletionItemRanges, CompletionTriggerKind } from '../../../../../editor/common/languages.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { TestLanguageConfigurationService } from '../../../../../editor/test/common/modes/testLanguageConfigurationService.js';\nimport { EditOperation } from '../../../../../editor/common/core/editOperation.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { CompletionModel } from '../../../../../editor/contrib/suggest/browser/completionModel.js';\nimport { CompletionItem } from '../../../../../editor/contrib/suggest/browser/suggest.js';\nimport { WordDistance } from '../../../../../editor/contrib/suggest/browser/wordDistance.js';\nimport { EditorOptions } from '../../../../../editor/common/config/editorOptions.js';\n\nclass SimpleSnippetService implements ISnippetsService {\n\tdeclare readonly _serviceBrand: undefined;\n\tconstructor(readonly snippets: Snippet[]) { }\n\tgetSnippets() {\n\t\treturn Promise.resolve(this.getSnippetsSync());\n\t}\n\tgetSnippetsSync(): Snippet[] {\n\t\treturn this.snippets;\n\t}\n\tgetSnippetFiles(): any {\n\t\tthrow new Error();\n\t}\n\tisEnabled(): boolean {\n\t\tthrow new Error();\n\t}\n\tupdateEnablement(): void {\n\t\tthrow new Error();\n\t}\n\tupdateUsageTimestamp(snippet: Snippet): void {\n\t\tthrow new Error();\n\t}\n}\n\nsuite('SnippetsService', function () {\n\tconst defaultCompletionContext: CompletionContext = { triggerKind: CompletionTriggerKind.Invoke };\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageService: ILanguageService;\n\tlet snippetService: ISnippetsService;\n\n\tsetup(function () {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createModelServices(disposables);\n\t\tlanguageService = instantiationService.get(ILanguageService);\n\t\tdisposables.add(languageService.registerLanguage({\n\t\t\tid: 'fooLang',\n\t\t\textensions: ['.fooLang',]\n\t\t}));\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'barTest',\n\t\t\t'bar',\n\t\t\t'',\n\t\t\t'barCodeSnippet',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bazzTest',\n\t\t\t'bazz',\n\t\t\t'',\n\t\t\t'bazzCodeSnippet',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tasync function asCompletionModel(model: ITextModel, position: IPosition, provider: SnippetCompletionProvider, context: CompletionContext = defaultCompletionContext) {\n\n\t\tconst list = await provider.provideCompletionItems(model, Position.lift(position), context);\n\n\t\tconst result = new CompletionModel(list.suggestions.map(s => {\n\t\t\treturn new CompletionItem(position, s, list, provider);\n\t\t}),\n\t\t\tposition.column,\n\t\t\t{ characterCountDelta: 0, leadingLineContent: model.getLineContent(position.lineNumber).substring(0, position.column - 1) },\n\t\t\tWordDistance.None, EditorOptions.suggest.defaultValue, EditorOptions.snippetSuggestions.defaultValue, undefined\n\t\t);\n\n\t\treturn result;\n\t}\n\n\ttest('snippet completions - simple', async function () {\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '', 'fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 2);\n\t});\n\n\ttest('snippet completions - simple 2', async function () {\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'hello ', 'fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 6) /* hello| */, defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 0);\n\t\t});\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 7) /* hello |*/, defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t});\n\n\t\tconst completions1 = await asCompletionModel(model, new Position(1, 6)/* hello| */, provider);\n\t\tassert.strictEqual(completions1.items.length, 0);\n\n\t\tconst completions2 = await asCompletionModel(model, new Position(1, 7)/* hello |*/, provider);\n\t\tassert.strictEqual(completions2.items.length, 2);\n\t});\n\n\ttest('snippet completions - with prefix', async function () {\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'bar', 'fooLang'));\n\n\t\tawait provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\tassert.strictEqual(result.suggestions[0].insertText, 'barCodeSnippet');\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 4), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.deepStrictEqual(completions.items[0].completion.label, {\n\t\t\tlabel: 'bar',\n\t\t\tdescription: 'barTest'\n\t\t});\n\t\tassert.strictEqual((completions.items[0].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\tassert.strictEqual(completions.items[0].completion.insertText, 'barCodeSnippet');\n\t});\n\n\ttest('snippet completions - with different prefixes', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'barTest',\n\t\t\t'bar',\n\t\t\t'',\n\t\t\t's1',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'name',\n\t\t\t'bar-bar',\n\t\t\t'',\n\t\t\t's2',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'bar-bar', 'fooLang'));\n\n\t\t{\n\t\t\tawait provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!.then(result => {\n\t\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\tdescription: 'barTest'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's1');\n\t\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[1].label, {\n\t\t\t\t\tlabel: 'bar-bar',\n\t\t\t\t\tdescription: 'name'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[1].insertText, 's2');\n\t\t\t\tassert.strictEqual((result.suggestions[1].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t});\n\n\t\t\tconst completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\t\tassert.strictEqual(completions.items.length, 2);\n\t\t\tassert.deepStrictEqual(completions.items[0].completion.label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[0].completion.insertText, 's1');\n\t\t\tassert.strictEqual((completions.items[0].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\tassert.deepStrictEqual(completions.items[1].completion.label, {\n\t\t\t\tlabel: 'bar-bar',\n\t\t\t\tdescription: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[1].completion.insertText, 's2');\n\t\t\tassert.strictEqual((completions.items[1].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t}\n\n\t\t{\n\t\t\tawait provider.provideCompletionItems(model, new Position(1, 5), defaultCompletionContext)!.then(result => {\n\t\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\n\t\t\t\tconst [first, second] = result.suggestions;\n\n\t\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\tdescription: 'barTest'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(first.insertText, 's1');\n\t\t\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 5);\n\n\t\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\t\tlabel: 'bar-bar',\n\t\t\t\t\tdescription: 'name'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(second.insertText, 's2');\n\t\t\t\tassert.strictEqual((second.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t});\n\n\t\t\tconst completions = await asCompletionModel(model, new Position(1, 5), provider);\n\t\t\tassert.strictEqual(completions.items.length, 2);\n\n\t\t\tconst [first, second] = completions.items.map(i => i.completion);\n\n\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\tlabel: 'bar-bar',\n\t\t\t\tdescription: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(first.insertText, 's2');\n\t\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 1);\n\n\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(second.insertText, 's1');\n\t\t\tassert.strictEqual((second.range as CompletionItemRanges).insert.startColumn, 5);\n\t\t}\n\n\t\t{\n\t\t\tawait provider.provideCompletionItems(model, new Position(1, 6), defaultCompletionContext)!.then(result => {\n\t\t\t\tassert.strictEqual(result.incomplete, undefined);\n\t\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\t\t\tlabel: 'bar',\n\t\t\t\t\tdescription: 'barTest'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[0].insertText, 's1');\n\t\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 5);\n\t\t\t\tassert.deepStrictEqual(result.suggestions[1].label, {\n\t\t\t\t\tlabel: 'bar-bar',\n\t\t\t\t\tdescription: 'name'\n\t\t\t\t});\n\t\t\t\tassert.strictEqual(result.suggestions[1].insertText, 's2');\n\t\t\t\tassert.strictEqual((result.suggestions[1].range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\t});\n\n\t\t\tconst completions = await asCompletionModel(model, new Position(1, 6), provider);\n\t\t\tassert.strictEqual(completions.items.length, 2);\n\t\t\tassert.deepStrictEqual(completions.items[0].completion.label, {\n\t\t\t\tlabel: 'bar-bar',\n\t\t\t\tdescription: 'name'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[0].completion.insertText, 's2');\n\t\t\tassert.strictEqual((completions.items[0].completion.range as CompletionItemRanges).insert.startColumn, 1);\n\t\t\tassert.deepStrictEqual(completions.items[1].completion.label, {\n\t\t\t\tlabel: 'bar',\n\t\t\t\tdescription: 'barTest'\n\t\t\t});\n\t\t\tassert.strictEqual(completions.items[1].completion.insertText, 's1');\n\t\t\tassert.strictEqual((completions.items[1].completion.range as CompletionItemRanges).insert.startColumn, 5);\n\t\t}\n\t});\n\n\ttest('Cannot use \"<?php\" as user snippet prefix anymore, #26275', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'',\n\t\t\t'<?php',\n\t\t\t'',\n\t\t\t'insert me',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tlet model = instantiateTextModel(instantiationService, '\\t<?php', 'fooLang');\n\t\tawait provider.provideCompletionItems(model, new Position(1, 7), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t\tconst completions1 = await asCompletionModel(model, new Position(1, 7), provider);\n\t\tassert.strictEqual(completions1.items.length, 1);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, '\\t<?', 'fooLang');\n\t\tawait provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 2);\n\t\t});\n\t\tconst completions2 = await asCompletionModel(model, new Position(1, 4), provider);\n\t\tassert.strictEqual(completions2.items.length, 1);\n\t\tassert.strictEqual((completions2.items[0].completion.range as CompletionItemRanges).insert.startColumn, 2);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, 'a<?', 'fooLang');\n\t\tawait provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t\tassert.strictEqual((result.suggestions[0].range as CompletionItemRanges).insert.startColumn, 2);\n\t\t});\n\t\tconst completions3 = await asCompletionModel(model, new Position(1, 4), provider);\n\t\tassert.strictEqual(completions3.items.length, 1);\n\t\tassert.strictEqual((completions3.items[0].completion.range as CompletionItemRanges).insert.startColumn, 2);\n\t\tmodel.dispose();\n\t});\n\n\ttest('No user snippets in suggestions, when inside the code, #30508', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'',\n\t\t\t'foo',\n\t\t\t'',\n\t\t\t'<foo>$0</foo>',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '<head>\\n\\t\\n>/head>', 'fooLang'));\n\t\tawait provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t\tconst completions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\n\t\tawait provider.provideCompletionItems(model, new Position(2, 2), defaultCompletionContext).then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t});\n\t\tconst completions2 = await asCompletionModel(model, new Position(2, 2), provider);\n\t\tassert.strictEqual(completions2.items.length, 1);\n\n\t});\n\n\ttest('SnippetSuggest - ensure extension snippets come last ', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'second',\n\t\t\t'second',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.Extension,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'first',\n\t\t\t'first',\n\t\t\t'',\n\t\t\t'first',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '', 'fooLang'));\n\t\tawait provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!.then(result => {\n\t\t\tassert.strictEqual(result.suggestions.length, 2);\n\t\t\tconst [first, second] = result.suggestions;\n\t\t\tassert.deepStrictEqual(first.label, {\n\t\t\t\tlabel: 'first',\n\t\t\t\tdescription: 'first'\n\t\t\t});\n\t\t\tassert.deepStrictEqual(second.label, {\n\t\t\t\tlabel: 'second',\n\t\t\t\tdescription: 'second'\n\t\t\t});\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 2);\n\t\tconst [first, second] = completions.items;\n\t\tassert.deepStrictEqual(first.completion.label, {\n\t\t\tlabel: 'first',\n\t\t\tdescription: 'first'\n\t\t});\n\t\tassert.deepStrictEqual(second.completion.label, {\n\t\t\tlabel: 'second',\n\t\t\tdescription: 'second'\n\t\t});\n\t});\n\n\ttest('Dash in snippets prefix broken #53945', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'p-a',\n\t\t\t'p-a',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'p-', 'fooLang'));\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 2), defaultCompletionContext)!;\n\t\tlet completions = await asCompletionModel(model, new Position(1, 2), provider);\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tcompletions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tcompletions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('No snippets suggestion on long lines beyond character 100 #58807', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea b', 'fooLang'));\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 158), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 158), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('Type colon will trigger snippet #60746', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, ':', 'fooLang'));\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 2), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 2), provider);\n\t\tassert.strictEqual(completions.items.length, 0);\n\t});\n\n\ttest('substring of prefix can\\'t trigger snippet #60737', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'mytemplate',\n\t\t\t'mytemplate',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'template', 'fooLang'));\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 9), defaultCompletionContext);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.deepStrictEqual(result.suggestions[0].label, {\n\t\t\tlabel: 'mytemplate',\n\t\t\tdescription: 'mytemplate'\n\t\t});\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 9), provider);\n\t\tassert.strictEqual(completions.items.length, 0);\n\t});\n\n\ttest('No snippets suggestion beyond character 100 if not at end of line #60247', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea Thisisaverylonglinegoingwithmore100bcharactersandthismakesintellisensebecomea b text_after_b', 'fooLang'));\n\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 158), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 158), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('issue #61296: VS code freezes when editing CSS fi`le with emoji', async function () {\n\t\tconst languageConfigurationService = disposables.add(new TestLanguageConfigurationService());\n\t\tdisposables.add(languageConfigurationService.register('fooLang', {\n\t\t\twordPattern: /(#?-?\\d*\\.\\d\\w*%?)|(::?[\\w-]*(?=[^,{;]*[,{]))|(([@#.!])?[\\w\\-?]+%?|[@#!.])/g\n\t\t}));\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'-a-bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, languageConfigurationService);\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '.-a-b', 'fooLang'));\n\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 8), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 8), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('No snippets shown when triggering completions at whitespace on line that already has text #62335', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'bug',\n\t\t\t'bug',\n\t\t\t'',\n\t\t\t'second',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'a ', 'fooLang'));\n\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t});\n\n\ttest('Snippet prefix with special chars and numbers does not work #62906', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'noblockwdelay',\n\t\t\t'<<',\n\t\t\t'',\n\t\t\t'<= #dly\"',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t), new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'noblockwdelay',\n\t\t\t'11',\n\t\t\t'',\n\t\t\t'eleven',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tlet model = instantiateTextModel(instantiationService, ' <', 'fooLang');\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 2);\n\n\t\tlet completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editStart.column, 2);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, '1', 'fooLang');\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 2), defaultCompletionContext)!;\n\t\tcompletions = await asCompletionModel(model, new Position(1, 2), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.startColumn, 1);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editStart.column, 1);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet replace range', async function () {\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'notWordTest',\n\t\t\t'not word',\n\t\t\t'',\n\t\t\t'not word snippet',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tlet model = instantiateTextModel(instantiationService, 'not wordFoo bar', 'fooLang');\n\n\t\tlet result = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tlet [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 3);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 9);\n\n\t\tlet completions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 3);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 9);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, 'not woFoo bar', 'fooLang');\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 3), defaultCompletionContext)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 3);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 3);\n\n\t\tcompletions = await asCompletionModel(model, new Position(1, 3), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 3);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 3);\n\n\t\tmodel.dispose();\n\t\tmodel = instantiateTextModel(instantiationService, 'not word', 'fooLang');\n\t\tresult = await provider.provideCompletionItems(model, new Position(1, 1), defaultCompletionContext)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\t[first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 1);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 9);\n\n\t\tcompletions = await asCompletionModel(model, new Position(1, 1), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 1);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 9);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet replace-range incorrect #108894', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'eng',\n\t\t\t'eng',\n\t\t\t'',\n\t\t\t'<span></span>',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, 'filler e KEEP ng filler', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 9), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 9), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 9);\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 9);\n\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 9);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 9);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet will replace auto-closing pair if specified in prefix', async function () {\n\t\tconst languageConfigurationService = disposables.add(new TestLanguageConfigurationService());\n\t\tdisposables.add(languageConfigurationService.register('fooLang', {\n\t\t\tbrackets: [\n\t\t\t\t['{', '}'],\n\t\t\t\t['[', ']'],\n\t\t\t\t['(', ')'],\n\t\t\t]\n\t\t}));\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'PSCustomObject',\n\t\t\t'[PSCustomObject]',\n\t\t\t'',\n\t\t\t'[PSCustomObject] @{ Key = Value }',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, languageConfigurationService);\n\n\t\tconst model = instantiateTextModel(instantiationService, '[psc]', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 5), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 5), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst [first] = result.suggestions;\n\t\tassert.strictEqual((first.range as CompletionItemRanges).insert.endColumn, 5);\n\t\t// This is 6 because it should eat the `]` at the end of the text even if cursor is before it\n\t\tassert.strictEqual((first.range as CompletionItemRanges).replace.endColumn, 6);\n\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editInsertEnd.column, 5);\n\t\tassert.strictEqual(completions.items[0].editReplaceEnd.column, 6);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Leading whitespace in snippet prefix #123860', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([new Snippet(\n\t\t\tfalse,\n\t\t\t['fooLang'],\n\t\t\t'cite-name',\n\t\t\t' cite',\n\t\t\t'',\n\t\t\t'~\\\\cite{$CLIPBOARD}',\n\t\t\t'',\n\t\t\tSnippetSource.User,\n\t\t\tgenerateUuid()\n\t\t)]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, ' ci', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(model, new Position(1, 4), defaultCompletionContext)!;\n\t\tconst completions = await asCompletionModel(model, new Position(1, 4), provider);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst [first] = result.suggestions;\n\t\tassert.strictEqual((<CompletionItemLabel>first.label).label, ' cite');\n\t\tassert.strictEqual((<CompletionItemRanges>first.range).insert.startColumn, 1);\n\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, ' cite');\n\t\tassert.strictEqual(completions.items[0].editStart.column, 1);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('still show suggestions in string when disable string suggestion #136611', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'aaa', 'aaa', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'bbb', 'bbb', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\t// new Snippet(['fooLang'], '\\'ccc', '\\'ccc', '', 'value', '', SnippetSource.User, generateUuid())\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, '\\'\\'', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 2),\n\t\t\t{ triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '\\'' }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\t\tmodel.dispose();\n\n\t});\n\n\ttest('still show suggestions in string when disable string suggestion #136611 (part 2)', async function () {\n\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'aaa', 'aaa', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'bbb', 'bbb', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '\\'ccc', '\\'ccc', '', 'value', '', SnippetSource.User, generateUuid())\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\n\t\tconst model = instantiateTextModel(instantiationService, '\\'\\'', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 2),\n\t\t\t{ triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '\\'' }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 2), provider, { triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '\\'' });\n\t\tassert.strictEqual(completions.items.length, 1);\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet suggestions are too eager #138707 (word)', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'tys', 'tys', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'hell_or_tell', 'hell_or_tell', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '^y', '^y', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, '\\'hellot\\'', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 8),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual((<SnippetCompletion>result.suggestions[0]).label.label, 'hell_or_tell');\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 8), provider, { triggerKind: CompletionTriggerKind.Invoke });\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, 'hell_or_tell');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet suggestions are too eager #138707 (no word)', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'tys', 'tys', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 't', 't', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '^y', '^y', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, ')*&^', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 5),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual((<SnippetCompletion>result.suggestions[0]).label.label, '^y');\n\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 5), provider, { triggerKind: CompletionTriggerKind.Invoke });\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, '^y');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Snippet suggestions are too eager #138707 (word/word)', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'async arrow function', 'async arrow function', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'foobarrrrrr', 'foobarrrrrr', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, 'foobar', 'fooLang');\n\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 7),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tassert.strictEqual((<SnippetCompletion>result.suggestions[0]).label.label, 'foobarrrrrr');\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 7), provider, { triggerKind: CompletionTriggerKind.Invoke });\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].textLabel, 'foobarrrrrr');\n\t\tmodel.dispose();\n\t});\n\n\ttest('Strange and useless autosuggestion #region/#endregion PHP #140039', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'reg', '#region', '', 'value', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, 'function abc(w)', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 15),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 0);\n\t\tmodel.dispose();\n\t});\n\n\ttest.skip('Snippets disappear with . key #145960', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'div', 'div', '', 'div', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'div.', 'div.', '', 'div.', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], 'div#', 'div#', '', 'div#', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = instantiateTextModel(instantiationService, 'di', 'fooLang');\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 3),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t)!;\n\n\t\tassert.strictEqual(result.suggestions.length, 3);\n\n\n\t\tmodel.applyEdits([EditOperation.insert(new Position(1, 3), '.')]);\n\t\tassert.strictEqual(model.getValue(), 'di.');\n\t\tconst result2 = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 4),\n\t\t\t{ triggerKind: CompletionTriggerKind.TriggerCharacter, triggerCharacter: '.' }\n\t\t)!;\n\n\t\tassert.strictEqual(result2.suggestions.length, 1);\n\t\tassert.strictEqual(result2.suggestions[0].insertText, 'div.');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('Hyphen in snippet prefix de-indents snippet #139016', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], 'foo', 'Foo- Bar', '', 'Foo', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '    bar', 'fooLang'));\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst result = await provider.provideCompletionItems(\n\t\t\tmodel,\n\t\t\tnew Position(1, 8),\n\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t);\n\n\t\tassert.strictEqual(result.suggestions.length, 1);\n\t\tconst first = result.suggestions[0];\n\t\tassert.strictEqual((<CompletionItemRanges>first.range).insert.startColumn, 5);\n\n\t\tconst completions = await asCompletionModel(model, new Position(1, 8), provider);\n\t\tassert.strictEqual(completions.items.length, 1);\n\t\tassert.strictEqual(completions.items[0].editStart.column, 5);\n\t});\n\n\ttest('Autocomplete suggests based on the last letter of a word and it depends on the typing speed #191070', async function () {\n\t\tsnippetService = new SimpleSnippetService([\n\t\t\tnew Snippet(false, ['fooLang'], '/whiletrue', '/whiletrue', '', 'one', '', SnippetSource.User, generateUuid()),\n\t\t\tnew Snippet(false, ['fooLang'], '/sc not expanding', '/sc not expanding', '', 'two', '', SnippetSource.User, generateUuid()),\n\t\t]);\n\n\t\tconst provider = new SnippetCompletionProvider(languageService, snippetService, disposables.add(new TestLanguageConfigurationService()));\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, '', 'fooLang'));\n\n\t\t{ // PREFIX: w\n\t\t\tmodel.setValue('w');\n\t\t\tconst result1 = await provider.provideCompletionItems(\n\t\t\t\tmodel,\n\t\t\t\tnew Position(1, 2),\n\t\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t\t);\n\t\t\tassert.strictEqual(result1.suggestions[0].insertText, 'one');\n\t\t\tassert.strictEqual(result1.suggestions.length, 1);\n\t\t}\n\n\t\t{ // PREFIX: where\n\t\t\tmodel.setValue('where');\n\t\t\tconst result2 = await provider.provideCompletionItems(\n\t\t\t\tmodel,\n\t\t\t\tnew Position(1, 6),\n\t\t\t\t{ triggerKind: CompletionTriggerKind.Invoke }\n\t\t\t);\n\t\t\tassert.strictEqual(result2.suggestions[0].insertText, 'one'); // /whiletrue matches where (WHilEtRuE)\n\t\t\tassert.strictEqual(result2.suggestions.length, 1);\n\t\t}\n\t});\n});\n"]}