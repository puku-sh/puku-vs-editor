{"version":3,"sources":["vs/workbench/contrib/snippets/browser/snippetPicker.ts"],"names":[],"mappings":"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","file":"snippetPicker.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { ISnippetsService } from './snippets.js';\nimport { Snippet, SnippetSource } from './snippetsFile.js';\nimport { IQuickPickItem, IQuickInputService, QuickPickInput } from '../../../../platform/quickinput/common/quickInput.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\n\nexport async function pickSnippet(accessor: ServicesAccessor, languageIdOrSnippets: string | Snippet[]): Promise<Snippet | undefined> {\n\n\tconst snippetService = accessor.get(ISnippetsService);\n\tconst quickInputService = accessor.get(IQuickInputService);\n\n\tinterface ISnippetPick extends IQuickPickItem {\n\t\tsnippet: Snippet;\n\t}\n\n\tlet snippets: Snippet[];\n\tif (Array.isArray(languageIdOrSnippets)) {\n\t\tsnippets = languageIdOrSnippets;\n\t} else {\n\t\tsnippets = (await snippetService.getSnippets(languageIdOrSnippets, { includeDisabledSnippets: true, includeNoPrefixSnippets: true }));\n\t}\n\n\tsnippets.sort((a, b) => a.snippetSource - b.snippetSource);\n\n\tconst makeSnippetPicks = () => {\n\t\tconst result: QuickPickInput<ISnippetPick>[] = [];\n\t\tlet prevSnippet: Snippet | undefined;\n\t\tfor (const snippet of snippets) {\n\t\t\tconst pick: ISnippetPick = {\n\t\t\t\tlabel: snippet.prefix || snippet.name,\n\t\t\t\tdetail: snippet.description || snippet.body,\n\t\t\t\tsnippet\n\t\t\t};\n\t\t\tif (!prevSnippet || prevSnippet.snippetSource !== snippet.snippetSource || prevSnippet.source !== snippet.source) {\n\t\t\t\tlet label = '';\n\t\t\t\tswitch (snippet.snippetSource) {\n\t\t\t\t\tcase SnippetSource.User:\n\t\t\t\t\t\tlabel = nls.localize('sep.userSnippet', \"User Snippets\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SnippetSource.Extension:\n\t\t\t\t\t\tlabel = snippet.source;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SnippetSource.Workspace:\n\t\t\t\t\t\tlabel = nls.localize('sep.workspaceSnippet', \"Workspace Snippets\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.push({ type: 'separator', label });\n\t\t\t}\n\n\t\t\tif (snippet.snippetSource === SnippetSource.Extension) {\n\t\t\t\tconst isEnabled = snippetService.isEnabled(snippet);\n\t\t\t\tif (isEnabled) {\n\t\t\t\t\tpick.buttons = [{\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.eyeClosed),\n\t\t\t\t\t\ttooltip: nls.localize('disableSnippet', 'Hide from IntelliSense')\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tpick.description = nls.localize('isDisabled', \"(hidden from IntelliSense)\");\n\t\t\t\t\tpick.buttons = [{\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.eye),\n\t\t\t\t\t\ttooltip: nls.localize('enable.snippet', 'Show in IntelliSense')\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(pick);\n\t\t\tprevSnippet = snippet;\n\t\t}\n\t\treturn result;\n\t};\n\n\tconst disposables = new DisposableStore();\n\tconst picker = disposables.add(quickInputService.createQuickPick<ISnippetPick>({ useSeparators: true }));\n\tpicker.placeholder = nls.localize('pick.placeholder', \"Select a snippet\");\n\tpicker.matchOnDetail = true;\n\tpicker.ignoreFocusOut = false;\n\tpicker.keepScrollPosition = true;\n\tdisposables.add(picker.onDidTriggerItemButton(ctx => {\n\t\tconst isEnabled = snippetService.isEnabled(ctx.item.snippet);\n\t\tsnippetService.updateEnablement(ctx.item.snippet, !isEnabled);\n\t\tpicker.items = makeSnippetPicks();\n\t}));\n\tpicker.items = makeSnippetPicks();\n\tif (!picker.items.length) {\n\t\tpicker.validationMessage = nls.localize('pick.noSnippetAvailable', \"No snippet available\");\n\t}\n\tpicker.show();\n\n\t// wait for an item to be picked or the picker to become hidden\n\tawait Promise.race([Event.toPromise(picker.onDidAccept), Event.toPromise(picker.onDidHide)]);\n\tconst result = picker.selectedItems[0]?.snippet;\n\tdisposables.dispose();\n\treturn result;\n}\n"]}