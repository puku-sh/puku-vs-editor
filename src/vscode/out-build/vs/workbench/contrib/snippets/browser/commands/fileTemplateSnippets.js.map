{"version":3,"sources":["vs/workbench/contrib/snippets/browser/commands/fileTemplateSnippets.ts"],"names":[],"mappings":"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","file":"fileTemplateSnippets.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { groupBy, isFalsyOrEmpty } from '../../../../../base/common/arrays.js';\nimport { compare } from '../../../../../base/common/strings.js';\nimport { getCodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { SnippetController2 } from '../../../../../editor/contrib/snippet/browser/snippetController2.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { SnippetsAction } from './abstractSnippetsActions.js';\nimport { ISnippetsService } from '../snippets.js';\nimport { Snippet } from '../snippetsFile.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\n\nexport class ApplyFileSnippetAction extends SnippetsAction {\n\n\tstatic readonly Id = 'workbench.action.populateFileFromSnippet';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ApplyFileSnippetAction.Id,\n\t\t\ttitle: localize2('label', \"Fill File with Snippet\"),\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst snippetService = accessor.get(ISnippetsService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst langService = accessor.get(ILanguageService);\n\n\t\tconst editor = getCodeEditor(editorService.activeTextEditorControl);\n\t\tif (!editor || !editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst snippets = await snippetService.getSnippets(undefined, { fileTemplateSnippets: true, noRecencySort: true, includeNoPrefixSnippets: true });\n\t\tif (snippets.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selection = await this._pick(quickInputService, langService, snippets);\n\t\tif (!selection) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor.hasModel()) {\n\t\t\t// apply snippet edit -> replaces everything\n\t\t\tSnippetController2.get(editor)?.apply([{\n\t\t\t\trange: editor.getModel().getFullModelRange(),\n\t\t\t\ttemplate: selection.snippet.body\n\t\t\t}]);\n\n\t\t\t// set language if possible\n\t\t\teditor.getModel().setLanguage(langService.createById(selection.langId), ApplyFileSnippetAction.Id);\n\n\t\t\teditor.focus();\n\t\t}\n\t}\n\n\tprivate async _pick(quickInputService: IQuickInputService, langService: ILanguageService, snippets: Snippet[]) {\n\n\t\t// spread snippet onto each language it supports\n\t\ttype SnippetAndLanguage = { langId: string; snippet: Snippet };\n\t\tconst all: SnippetAndLanguage[] = [];\n\t\tfor (const snippet of snippets) {\n\t\t\tif (isFalsyOrEmpty(snippet.scopes)) {\n\t\t\t\tall.push({ langId: '', snippet });\n\t\t\t} else {\n\t\t\t\tfor (const langId of snippet.scopes) {\n\t\t\t\t\tall.push({ langId, snippet });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ttype SnippetAndLanguagePick = IQuickPickItem & { snippet: SnippetAndLanguage };\n\t\tconst picks: (SnippetAndLanguagePick | IQuickPickSeparator)[] = [];\n\n\t\tconst groups = groupBy(all, (a, b) => compare(a.langId, b.langId));\n\n\t\tfor (const group of groups) {\n\t\t\tlet first = true;\n\t\t\tfor (const item of group) {\n\n\t\t\t\tif (first) {\n\t\t\t\t\tpicks.push({\n\t\t\t\t\t\ttype: 'separator',\n\t\t\t\t\t\tlabel: langService.getLanguageName(item.langId) ?? item.langId\n\t\t\t\t\t});\n\t\t\t\t\tfirst = false;\n\t\t\t\t}\n\n\t\t\t\tpicks.push({\n\t\t\t\t\tsnippet: item,\n\t\t\t\t\tlabel: item.snippet.prefix || item.snippet.name,\n\t\t\t\t\tdetail: item.snippet.description\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst pick = await quickInputService.pick(picks, {\n\t\t\tplaceHolder: localize('placeholder', 'Select a snippet'),\n\t\t\tmatchOnDetail: true,\n\t\t});\n\n\t\treturn pick?.snippet;\n\t}\n}\n"]}