{"version":3,"sources":["vs/workbench/contrib/snippets/browser/commands/surroundWithSnippet.ts"],"names":[],"mappings":"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","file":"surroundWithSnippet.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ICodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { Position } from '../../../../../editor/common/core/position.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { SnippetController2 } from '../../../../../editor/contrib/snippet/browser/snippetController2.js';\nimport { IClipboardService } from '../../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { SnippetEditorAction } from './abstractSnippetsActions.js';\nimport { pickSnippet } from '../snippetPicker.js';\nimport { Snippet } from '../snippetsFile.js';\nimport { ISnippetsService } from '../snippets.js';\nimport { localize2 } from '../../../../../nls.js';\n\nexport async function getSurroundableSnippets(snippetsService: ISnippetsService, model: ITextModel, position: Position, includeDisabledSnippets: boolean): Promise<Snippet[]> {\n\n\tconst { lineNumber, column } = position;\n\tmodel.tokenization.tokenizeIfCheap(lineNumber);\n\tconst languageId = model.getLanguageIdAtPosition(lineNumber, column);\n\n\tconst allSnippets = await snippetsService.getSnippets(languageId, { includeNoPrefixSnippets: true, includeDisabledSnippets });\n\treturn allSnippets.filter(snippet => snippet.usesSelection);\n}\n\nexport class SurroundWithSnippetEditorAction extends SnippetEditorAction {\n\n\tstatic readonly options = {\n\t\tid: 'editor.action.surroundWithSnippet',\n\t\ttitle: localize2('label', \"Surround with Snippet...\")\n\t};\n\n\tconstructor() {\n\t\tsuper({\n\t\t\t...SurroundWithSnippetEditorAction.options,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tEditorContextKeys.writable,\n\t\t\t\tEditorContextKeys.hasNonEmptySelection\n\t\t\t),\n\t\t\tf1: true,\n\t\t});\n\t}\n\n\tasync runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor) {\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst snippetsService = accessor.get(ISnippetsService);\n\t\tconst clipboardService = accessor.get(IClipboardService);\n\n\t\tconst snippets = await getSurroundableSnippets(snippetsService, editor.getModel(), editor.getPosition(), true);\n\t\tif (!snippets.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst snippet = await instaService.invokeFunction(pickSnippet, snippets);\n\t\tif (!snippet) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet clipboardText: string | undefined;\n\t\tif (snippet.needsClipboard) {\n\t\t\tclipboardText = await clipboardService.readText();\n\t\t}\n\n\t\teditor.focus();\n\t\tSnippetController2.get(editor)?.insert(snippet.codeSnippet, { clipboardText });\n\t\tsnippetsService.updateUsageTimestamp(snippet);\n\t}\n}\n"]}