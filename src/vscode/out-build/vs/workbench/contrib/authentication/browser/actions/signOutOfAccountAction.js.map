{"version":3,"sources":["vs/workbench/contrib/authentication/browser/actions/signOutOfAccountAction.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,QAAQ,MAAM,wCAAwC,CAAC;AAC9D,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,OAAO,EAAE,MAAM,mDAAmD,CAAC;AAC5E,OAAO,EAAE,cAAc,EAAE,MAAM,mDAAmD,CAAC;AAEnF,OAAO,EAAE,4BAA4B,EAAE,MAAM,4EAA4E,CAAC;AAC1H,OAAO,EAAE,2BAA2B,EAAE,MAAM,2EAA2E,CAAC;AACxH,OAAO,EAAE,sBAAsB,EAAE,MAAM,8DAA8D,CAAC;AAEtG,MAAM,OAAO,sBAAuB,SAAQ,OAAO;IAClD;QACC,KAAK,CAAC;YACL,EAAE,EAAE,mBAAmB;YACvB,KAAK,EAAE,QAAQ,CAAC,IAAkB,EAAE,IAAqB,CAAC;YAC1D,EAAE,EAAE,KAAK;SACT,CAAC,CAAC;IACJ,CAAC;IAEQ,KAAK,CAAC,GAAG,CAAC,QAA0B,EAAE,EAAE,UAAU,EAAE,YAAY,EAAgD;QACxH,MAAM,qBAAqB,GAAG,QAAQ,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;QACnE,MAAM,0BAA0B,GAAG,QAAQ,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;QAC7E,MAAM,2BAA2B,GAAG,QAAQ,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;QAC/E,MAAM,aAAa,GAAG,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QAEnD,IAAI,CAAC,UAAU,IAAI,CAAC,YAAY,EAAE,CAAC;YAClC,MAAM,IAAI,KAAK,CAAC,2EAA2E,CAAC,CAAC;QAC9F,CAAC;QAED,MAAM,WAAW,GAAG,MAAM,qBAAqB,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;QACxE,MAAM,QAAQ,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,KAAK,YAAY,CAAC,CAAC;QAE3E,MAAM,aAAa,GAAG,0BAA0B,CAAC,iBAAiB,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;QAE7F,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,aAAa,CAAC,OAAO,CAAC;YACjD,IAAI,EAAE,QAAQ,CAAC,IAAI;YACnB,OAAO,EAAE,aAAa,CAAC,MAAM;gBAC5B,CAAC,CAAC,QAAQ,CAAC,IAAgB,EAAE,IAAiF,EAAE,YAAY,EAAE,aAAa,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACzL,CAAC,CAAC,QAAQ,CAAC,IAAsB,EAAE,IAAoB,EAAE,YAAY,CAAC;YACvE,aAAa,EAAE,QAAQ,CAAC,EAAE,EAAoD,CAAjD,CAAmD,CAAjD,GAA6D,CAAC,KAArD,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;SAC5E,CAAC,CAAC;QAEH,IAAI,SAAS,EAAE,CAAC;YACf,MAAM,qBAAqB,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,qBAAqB,CAAC,aAAa,CAAC,UAAU,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;YACnH,MAAM,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;YACzC,0BAA0B,CAAC,kBAAkB,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;YACxE,2BAA2B,CAAC,uBAAuB,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;QAC/E,CAAC;IACF,CAAC;CACD","file":"signOutOfAccountAction.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport Severity from '../../../../../base/common/severity.js';\nimport { localize } from '../../../../../nls.js';\nimport { Action2 } from '../../../../../platform/actions/common/actions.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IAuthenticationAccessService } from '../../../../services/authentication/browser/authenticationAccessService.js';\nimport { IAuthenticationUsageService } from '../../../../services/authentication/browser/authenticationUsageService.js';\nimport { IAuthenticationService } from '../../../../services/authentication/common/authentication.js';\n\nexport class SignOutOfAccountAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: '_signOutOfAccount',\n\t\t\ttitle: localize('signOutOfAccount', \"Sign out of account\"),\n\t\t\tf1: false\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, { providerId, accountLabel }: { providerId: string; accountLabel: string }): Promise<void> {\n\t\tconst authenticationService = accessor.get(IAuthenticationService);\n\t\tconst authenticationUsageService = accessor.get(IAuthenticationUsageService);\n\t\tconst authenticationAccessService = accessor.get(IAuthenticationAccessService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\n\t\tif (!providerId || !accountLabel) {\n\t\t\tthrow new Error('Invalid arguments. Expected: { providerId: string; accountLabel: string }');\n\t\t}\n\n\t\tconst allSessions = await authenticationService.getSessions(providerId);\n\t\tconst sessions = allSessions.filter(s => s.account.label === accountLabel);\n\n\t\tconst accountUsages = authenticationUsageService.readAccountUsages(providerId, accountLabel);\n\n\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\ttype: Severity.Info,\n\t\t\tmessage: accountUsages.length\n\t\t\t\t? localize('signOutMessage', \"The account '{0}' has been used by: \\n\\n{1}\\n\\n Sign out from these extensions?\", accountLabel, accountUsages.map(usage => usage.extensionName).join('\\n'))\n\t\t\t\t: localize('signOutMessageSimple', \"Sign out of '{0}'?\", accountLabel),\n\t\t\tprimaryButton: localize({ key: 'signOut', comment: ['&& denotes a mnemonic'] }, \"&&Sign Out\")\n\t\t});\n\n\t\tif (confirmed) {\n\t\t\tconst removeSessionPromises = sessions.map(session => authenticationService.removeSession(providerId, session.id));\n\t\t\tawait Promise.all(removeSessionPromises);\n\t\t\tauthenticationUsageService.removeAccountUsage(providerId, accountLabel);\n\t\t\tauthenticationAccessService.removeAllowedExtensions(providerId, accountLabel);\n\t\t}\n\t}\n}\n"]}