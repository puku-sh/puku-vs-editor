{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/searchEditor/browser/searchEditorActions.ts","vs/workbench/contrib/searchEditor/browser/searchEditorActions.ts"],"names":[],"mappings":"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","file":"searchEditorActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './media/searchEditor.css';\nimport { ICodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { EditorsOrder } from '../../../common/editor.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { getSearchView } from '../../search/browser/searchActionsBase.js';\nimport { SearchEditor } from './searchEditor.js';\nimport { OpenSearchEditorArgs } from './searchEditor.contribution.js';\nimport { getOrMakeSearchEditorInput, SearchEditorInput } from './searchEditorInput.js';\nimport { serializeSearchResultForEditor } from './searchEditorSerialization.js';\nimport { IConfigurationResolverService } from '../../../services/configurationResolver/common/configurationResolver.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ACTIVE_GROUP, IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { ISearchConfigurationProperties } from '../../../services/search/common/search.js';\nimport { ISearchResult } from '../../search/browser/searchTreeModel/searchTreeCommon.js';\n\nexport const toggleSearchEditorCaseSensitiveCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleCaseSensitive();\n\t}\n};\n\nexport const toggleSearchEditorWholeWordCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleWholeWords();\n\t}\n};\n\nexport const toggleSearchEditorRegexCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleRegex();\n\t}\n};\n\nexport const toggleSearchEditorContextLinesCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleContextLines();\n\t}\n};\n\nexport const modifySearchEditorContextLinesCommand = (accessor: ServicesAccessor, increase: boolean) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).modifyContextLines(increase);\n\t}\n};\n\nexport const selectAllSearchEditorMatchesCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).focusAllResults();\n\t}\n};\n\nexport async function openSearchEditor(accessor: ServicesAccessor): Promise<void> {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst instantiationService = accessor.get(IInstantiationService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tawait instantiationService.invokeFunction(openNewSearchEditor, {\n\t\t\tfilesToInclude: searchView.searchIncludePattern.getValue(),\n\t\t\tonlyOpenEditors: searchView.searchIncludePattern.onlySearchInOpenEditors(),\n\t\t\tfilesToExclude: searchView.searchExcludePattern.getValue(),\n\t\t\tisRegexp: searchView.searchAndReplaceWidget.searchInput?.getRegex(),\n\t\t\tisCaseSensitive: searchView.searchAndReplaceWidget.searchInput?.getCaseSensitive(),\n\t\t\tmatchWholeWord: searchView.searchAndReplaceWidget.searchInput?.getWholeWords(),\n\t\t\tuseExcludeSettingsAndIgnoreFiles: searchView.searchExcludePattern.useExcludesAndIgnoreFiles(),\n\t\t\tshowIncludesExcludes: !!(searchView.searchIncludePattern.getValue() || searchView.searchExcludePattern.getValue() || !searchView.searchExcludePattern.useExcludesAndIgnoreFiles())\n\t\t});\n\t} else {\n\t\tawait instantiationService.invokeFunction(openNewSearchEditor);\n\t}\n}\n\nexport const openNewSearchEditor =\n\tasync (accessor: ServicesAccessor, _args: OpenSearchEditorArgs = {}, toSide = false) => {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\n\t\tconst configurationResolverService = accessor.get(IConfigurationResolverService);\n\t\tconst workspaceContextService = accessor.get(IWorkspaceContextService);\n\t\tconst historyService = accessor.get(IHistoryService);\n\t\tconst activeWorkspaceRootUri = historyService.getLastActiveWorkspaceRoot(Schemas.file);\n\t\tconst lastActiveWorkspaceRoot = activeWorkspaceRootUri ? workspaceContextService.getWorkspaceFolder(activeWorkspaceRootUri) ?? undefined : undefined;\n\n\n\t\tconst activeEditorControl = editorService.activeTextEditorControl;\n\t\tlet activeModel: ICodeEditor | undefined;\n\t\tlet selected = '';\n\t\tif (activeEditorControl) {\n\t\t\tif (isDiffEditor(activeEditorControl)) {\n\t\t\t\tif (activeEditorControl.getOriginalEditor().hasTextFocus()) {\n\t\t\t\t\tactiveModel = activeEditorControl.getOriginalEditor();\n\t\t\t\t} else {\n\t\t\t\t\tactiveModel = activeEditorControl.getModifiedEditor();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tactiveModel = activeEditorControl as ICodeEditor;\n\t\t\t}\n\t\t\tconst selection = activeModel?.getSelection();\n\t\t\tselected = (selection && activeModel?.getModel()?.getValueInRange(selection)) ?? '';\n\n\t\t\tif (selection?.isEmpty() && configurationService.getValue<ISearchConfigurationProperties>('search').seedWithNearestWord) {\n\t\t\t\tconst wordAtPosition = activeModel.getModel()?.getWordAtPosition(selection.getStartPosition());\n\t\t\t\tif (wordAtPosition) {\n\t\t\t\t\tselected = wordAtPosition.word;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (editorService.activeEditor instanceof SearchEditorInput) {\n\t\t\t\tconst active = editorService.activeEditorPane as SearchEditor;\n\t\t\t\tselected = active.getSelected();\n\t\t\t}\n\t\t}\n\n\t\ttelemetryService.publicLog2<{},\n\t\t\t{\n\t\t\t\towner: 'roblourens';\n\t\t\t\tcomment: 'Fired when a search editor is opened';\n\t\t\t}>\n\t\t\t('searchEditor/openNewSearchEditor');\n\n\t\tconst seedSearchStringFromSelection = _args.location === 'new' || configurationService.getValue<IEditorOptions>('editor').find!.seedSearchStringFromSelection;\n\t\tconst args: OpenSearchEditorArgs = { query: seedSearchStringFromSelection ? selected : undefined };\n\t\tfor (const entry of Object.entries(_args)) {\n\t\t\tconst name = entry[0];\n\t\t\tconst value = entry[1];\n\t\t\tif (value !== undefined) {\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t(args as any)[name as any] = (typeof value === 'string') ? await configurationResolverService.resolveAsync(lastActiveWorkspaceRoot, value) : value;\n\t\t\t}\n\t\t}\n\t\tconst existing = editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE).find(id => id.editor.typeId === SearchEditorInput.ID);\n\t\tlet editor: SearchEditor;\n\t\tif (existing && args.location === 'reuse') {\n\t\t\tconst group = editorGroupsService.getGroup(existing.groupId);\n\t\t\tif (!group) {\n\t\t\t\tthrow new Error('Invalid group id for search editor');\n\t\t\t}\n\t\t\tconst input = existing.editor as SearchEditorInput;\n\t\t\teditor = (await group.openEditor(input)) as SearchEditor;\n\t\t\tif (selected) { editor.setQuery(selected); }\n\t\t\telse { editor.selectQuery(); }\n\t\t\teditor.setSearchConfig(args);\n\t\t} else {\n\t\t\tconst input = instantiationService.invokeFunction(getOrMakeSearchEditorInput, { config: args, resultsContents: '', from: 'rawData' });\n\t\t\t// TODO @roblourens make this use the editor resolver service if possible\n\t\t\teditor = await editorService.openEditor(input, { pinned: true }, toSide ? SIDE_GROUP : ACTIVE_GROUP) as SearchEditor;\n\t\t}\n\n\t\tconst searchOnType = configurationService.getValue<ISearchConfigurationProperties>('search').searchOnType;\n\t\tif (\n\t\t\targs.triggerSearch === true ||\n\t\t\targs.triggerSearch !== false && searchOnType && args.query\n\t\t) {\n\t\t\teditor.triggerSearch({ focusResults: args.focusResults });\n\t\t}\n\n\t\tif (!args.focusResults) { editor.focusSearchInput(); }\n\t};\n\nexport const createEditorFromSearchResult =\n\tasync (accessor: ServicesAccessor, searchResult: ISearchResult, rawIncludePattern: string, rawExcludePattern: string, onlySearchInOpenEditors: boolean) => {\n\t\tif (!searchResult.query) {\n\t\t\tconsole.error('Expected searchResult.query to be defined. Got', searchResult);\n\t\t\treturn;\n\t\t}\n\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst labelService = accessor.get(ILabelService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst sortOrder = configurationService.getValue<ISearchConfigurationProperties>('search').sortOrder;\n\n\t\ttelemetryService.publicLog2<\n\t\t\t{},\n\t\t\t{\n\t\t\t\towner: 'roblourens';\n\t\t\t\tcomment: 'Fired when a search editor is opened from the search view';\n\t\t\t}>\n\t\t\t('searchEditor/createEditorFromSearchResult');\n\n\t\tconst labelFormatter = (uri: URI): string => labelService.getUriLabel(uri, { relative: true });\n\n\t\tconst { text, matchRanges, config } = serializeSearchResultForEditor(searchResult, rawIncludePattern, rawExcludePattern, 0, labelFormatter, sortOrder);\n\t\tconfig.onlyOpenEditors = onlySearchInOpenEditors;\n\t\tconst contextLines = configurationService.getValue<ISearchConfigurationProperties>('search').searchEditor.defaultNumberOfContextLines;\n\n\t\tif (searchResult.isDirty || contextLines === 0 || contextLines === null) {\n\t\t\tconst input = instantiationService.invokeFunction(getOrMakeSearchEditorInput, { resultsContents: text, config, from: 'rawData' });\n\t\t\tawait editorService.openEditor(input, { pinned: true });\n\t\t\tinput.setMatchRanges(matchRanges);\n\t\t} else {\n\t\t\tconst input = instantiationService.invokeFunction(getOrMakeSearchEditorInput, { from: 'rawData', resultsContents: '', config: { ...config, contextLines } });\n\t\t\tconst editor = await editorService.openEditor(input, { pinned: true }) as SearchEditor;\n\t\t\teditor.triggerSearch();\n\t\t}\n\t};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './media/searchEditor.css';\nimport { ICodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { EditorsOrder } from '../../../common/editor.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { getSearchView } from '../../search/browser/searchActionsBase.js';\nimport { SearchEditor } from './searchEditor.js';\nimport { OpenSearchEditorArgs } from './searchEditor.contribution.js';\nimport { getOrMakeSearchEditorInput, SearchEditorInput } from './searchEditorInput.js';\nimport { serializeSearchResultForEditor } from './searchEditorSerialization.js';\nimport { IConfigurationResolverService } from '../../../services/configurationResolver/common/configurationResolver.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ACTIVE_GROUP, IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { ISearchConfigurationProperties } from '../../../services/search/common/search.js';\nimport { ISearchResult } from '../../search/browser/searchTreeModel/searchTreeCommon.js';\n\nexport const toggleSearchEditorCaseSensitiveCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleCaseSensitive();\n\t}\n};\n\nexport const toggleSearchEditorWholeWordCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleWholeWords();\n\t}\n};\n\nexport const toggleSearchEditorRegexCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleRegex();\n\t}\n};\n\nexport const toggleSearchEditorContextLinesCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).toggleContextLines();\n\t}\n};\n\nexport const modifySearchEditorContextLinesCommand = (accessor: ServicesAccessor, increase: boolean) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).modifyContextLines(increase);\n\t}\n};\n\nexport const selectAllSearchEditorMatchesCommand = (accessor: ServicesAccessor) => {\n\tconst editorService = accessor.get(IEditorService);\n\tconst input = editorService.activeEditor;\n\tif (input instanceof SearchEditorInput) {\n\t\t(editorService.activeEditorPane as SearchEditor).focusAllResults();\n\t}\n};\n\nexport async function openSearchEditor(accessor: ServicesAccessor): Promise<void> {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst instantiationService = accessor.get(IInstantiationService);\n\tconst searchView = getSearchView(viewsService);\n\tif (searchView) {\n\t\tawait instantiationService.invokeFunction(openNewSearchEditor, {\n\t\t\tfilesToInclude: searchView.searchIncludePattern.getValue(),\n\t\t\tonlyOpenEditors: searchView.searchIncludePattern.onlySearchInOpenEditors(),\n\t\t\tfilesToExclude: searchView.searchExcludePattern.getValue(),\n\t\t\tisRegexp: searchView.searchAndReplaceWidget.searchInput?.getRegex(),\n\t\t\tisCaseSensitive: searchView.searchAndReplaceWidget.searchInput?.getCaseSensitive(),\n\t\t\tmatchWholeWord: searchView.searchAndReplaceWidget.searchInput?.getWholeWords(),\n\t\t\tuseExcludeSettingsAndIgnoreFiles: searchView.searchExcludePattern.useExcludesAndIgnoreFiles(),\n\t\t\tshowIncludesExcludes: !!(searchView.searchIncludePattern.getValue() || searchView.searchExcludePattern.getValue() || !searchView.searchExcludePattern.useExcludesAndIgnoreFiles())\n\t\t});\n\t} else {\n\t\tawait instantiationService.invokeFunction(openNewSearchEditor);\n\t}\n}\n\nexport const openNewSearchEditor =\n\tasync (accessor: ServicesAccessor, _args: OpenSearchEditorArgs = {}, toSide = false) => {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\n\t\tconst configurationResolverService = accessor.get(IConfigurationResolverService);\n\t\tconst workspaceContextService = accessor.get(IWorkspaceContextService);\n\t\tconst historyService = accessor.get(IHistoryService);\n\t\tconst activeWorkspaceRootUri = historyService.getLastActiveWorkspaceRoot(Schemas.file);\n\t\tconst lastActiveWorkspaceRoot = activeWorkspaceRootUri ? workspaceContextService.getWorkspaceFolder(activeWorkspaceRootUri) ?? undefined : undefined;\n\n\n\t\tconst activeEditorControl = editorService.activeTextEditorControl;\n\t\tlet activeModel: ICodeEditor | undefined;\n\t\tlet selected = '';\n\t\tif (activeEditorControl) {\n\t\t\tif (isDiffEditor(activeEditorControl)) {\n\t\t\t\tif (activeEditorControl.getOriginalEditor().hasTextFocus()) {\n\t\t\t\t\tactiveModel = activeEditorControl.getOriginalEditor();\n\t\t\t\t} else {\n\t\t\t\t\tactiveModel = activeEditorControl.getModifiedEditor();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tactiveModel = activeEditorControl as ICodeEditor;\n\t\t\t}\n\t\t\tconst selection = activeModel?.getSelection();\n\t\t\tselected = (selection && activeModel?.getModel()?.getValueInRange(selection)) ?? '';\n\n\t\t\tif (selection?.isEmpty() && configurationService.getValue<ISearchConfigurationProperties>('search').seedWithNearestWord) {\n\t\t\t\tconst wordAtPosition = activeModel.getModel()?.getWordAtPosition(selection.getStartPosition());\n\t\t\t\tif (wordAtPosition) {\n\t\t\t\t\tselected = wordAtPosition.word;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (editorService.activeEditor instanceof SearchEditorInput) {\n\t\t\t\tconst active = editorService.activeEditorPane as SearchEditor;\n\t\t\t\tselected = active.getSelected();\n\t\t\t}\n\t\t}\n\n\t\ttelemetryService.publicLog2<{},\n\t\t\t{\n\t\t\t\towner: 'roblourens';\n\t\t\t\tcomment: 'Fired when a search editor is opened';\n\t\t\t}>\n\t\t\t('searchEditor/openNewSearchEditor');\n\n\t\tconst seedSearchStringFromSelection = _args.location === 'new' || configurationService.getValue<IEditorOptions>('editor').find!.seedSearchStringFromSelection;\n\t\tconst args: OpenSearchEditorArgs = { query: seedSearchStringFromSelection ? selected : undefined };\n\t\tfor (const entry of Object.entries(_args)) {\n\t\t\tconst name = entry[0];\n\t\t\tconst value = entry[1];\n\t\t\tif (value !== undefined) {\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t(args as any)[name as any] = (typeof value === 'string') ? await configurationResolverService.resolveAsync(lastActiveWorkspaceRoot, value) : value;\n\t\t\t}\n\t\t}\n\t\tconst existing = editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE).find(id => id.editor.typeId === SearchEditorInput.ID);\n\t\tlet editor: SearchEditor;\n\t\tif (existing && args.location === 'reuse') {\n\t\t\tconst group = editorGroupsService.getGroup(existing.groupId);\n\t\t\tif (!group) {\n\t\t\t\tthrow new Error('Invalid group id for search editor');\n\t\t\t}\n\t\t\tconst input = existing.editor as SearchEditorInput;\n\t\t\teditor = (await group.openEditor(input)) as SearchEditor;\n\t\t\tif (selected) { editor.setQuery(selected); }\n\t\t\telse { editor.selectQuery(); }\n\t\t\teditor.setSearchConfig(args);\n\t\t} else {\n\t\t\tconst input = instantiationService.invokeFunction(getOrMakeSearchEditorInput, { config: args, resultsContents: '', from: 'rawData' });\n\t\t\t// TODO @roblourens make this use the editor resolver service if possible\n\t\t\teditor = await editorService.openEditor(input, { pinned: true }, toSide ? SIDE_GROUP : ACTIVE_GROUP) as SearchEditor;\n\t\t}\n\n\t\tconst searchOnType = configurationService.getValue<ISearchConfigurationProperties>('search').searchOnType;\n\t\tif (\n\t\t\targs.triggerSearch === true ||\n\t\t\targs.triggerSearch !== false && searchOnType && args.query\n\t\t) {\n\t\t\teditor.triggerSearch({ focusResults: args.focusResults });\n\t\t}\n\n\t\tif (!args.focusResults) { editor.focusSearchInput(); }\n\t};\n\nexport const createEditorFromSearchResult =\n\tasync (accessor: ServicesAccessor, searchResult: ISearchResult, rawIncludePattern: string, rawExcludePattern: string, onlySearchInOpenEditors: boolean) => {\n\t\tif (!searchResult.query) {\n\t\t\tconsole.error('Expected searchResult.query to be defined. Got', searchResult);\n\t\t\treturn;\n\t\t}\n\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst labelService = accessor.get(ILabelService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst sortOrder = configurationService.getValue<ISearchConfigurationProperties>('search').sortOrder;\n\n\t\ttelemetryService.publicLog2<\n\t\t\t{},\n\t\t\t{\n\t\t\t\towner: 'roblourens';\n\t\t\t\tcomment: 'Fired when a search editor is opened from the search view';\n\t\t\t}>\n\t\t\t('searchEditor/createEditorFromSearchResult');\n\n\t\tconst labelFormatter = (uri: URI): string => labelService.getUriLabel(uri, { relative: true });\n\n\t\tconst { text, matchRanges, config } = serializeSearchResultForEditor(searchResult, rawIncludePattern, rawExcludePattern, 0, labelFormatter, sortOrder);\n\t\tconfig.onlyOpenEditors = onlySearchInOpenEditors;\n\t\tconst contextLines = configurationService.getValue<ISearchConfigurationProperties>('search').searchEditor.defaultNumberOfContextLines;\n\n\t\tif (searchResult.isDirty || contextLines === 0 || contextLines === null) {\n\t\t\tconst input = instantiationService.invokeFunction(getOrMakeSearchEditorInput, { resultsContents: text, config, from: 'rawData' });\n\t\t\tawait editorService.openEditor(input, { pinned: true });\n\t\t\tinput.setMatchRanges(matchRanges);\n\t\t} else {\n\t\t\tconst input = instantiationService.invokeFunction(getOrMakeSearchEditorInput, { from: 'rawData', resultsContents: '', config: { ...config, contextLines } });\n\t\t\tconst editor = await editorService.openEditor(input, { pinned: true }) as SearchEditor;\n\t\t\teditor.triggerSearch();\n\t\t}\n\t};\n"]}