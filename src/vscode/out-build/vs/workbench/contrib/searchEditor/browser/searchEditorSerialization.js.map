{"version":3,"sources":["vs/workbench/contrib/searchEditor/browser/searchEditorSerialization.ts"],"names":[],"mappings":"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","file":"searchEditorSerialization.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './media/searchEditor.css';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport type { ITextModel } from '../../../../editor/common/model.js';\nimport { localize } from '../../../../nls.js';\nimport type { SearchConfiguration } from './constants.js';\nimport { ITextQuery, SearchSortOrder } from '../../../services/search/common/search.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { ISearchTreeMatch, ISearchTreeFileMatch, ISearchResult, ISearchTreeFolderMatch } from '../../search/browser/searchTreeModel/searchTreeCommon.js';\nimport { searchMatchComparer } from '../../search/browser/searchCompare.js';\nimport { ICellMatch, isNotebookFileMatch } from '../../search/browser/notebookSearch/notebookSearchModelBase.js';\n\n// Using \\r\\n on Windows inserts an extra newline between results.\nconst lineDelimiter = '\\n';\n\nconst translateRangeLines =\n\t(n: number) =>\n\t\t(range: Range) =>\n\t\t\tnew Range(range.startLineNumber + n, range.startColumn, range.endLineNumber + n, range.endColumn);\n\nconst matchToSearchResultFormat = (match: ISearchTreeMatch, longestLineNumber: number): { line: string; ranges: Range[]; lineNumber: string }[] => {\n\tconst getLinePrefix = (i: number) => `${match.range().startLineNumber + i}`;\n\n\tconst fullMatchLines = match.fullPreviewLines();\n\n\n\tconst results: { line: string; ranges: Range[]; lineNumber: string }[] = [];\n\n\tfullMatchLines\n\t\t.forEach((sourceLine, i) => {\n\t\t\tconst lineNumber = getLinePrefix(i);\n\t\t\tconst paddingStr = ' '.repeat(longestLineNumber - lineNumber.length);\n\t\t\tconst prefix = `  ${paddingStr}${lineNumber}: `;\n\t\t\tconst prefixOffset = prefix.length;\n\n\t\t\t// split instead of replace to avoid creating a new string object\n\t\t\tconst line = prefix + (sourceLine.split(/\\r?\\n?$/, 1)[0] || '');\n\n\t\t\tconst rangeOnThisLine = ({ start, end }: { start?: number; end?: number }) => new Range(1, (start ?? 1) + prefixOffset, 1, (end ?? sourceLine.length + 1) + prefixOffset);\n\n\t\t\tconst matchRange = match.rangeInPreview();\n\t\t\tconst matchIsSingleLine = matchRange.startLineNumber === matchRange.endLineNumber;\n\n\t\t\tlet lineRange;\n\t\t\tif (matchIsSingleLine) { lineRange = (rangeOnThisLine({ start: matchRange.startColumn, end: matchRange.endColumn })); }\n\t\t\telse if (i === 0) { lineRange = (rangeOnThisLine({ start: matchRange.startColumn })); }\n\t\t\telse if (i === fullMatchLines.length - 1) { lineRange = (rangeOnThisLine({ end: matchRange.endColumn })); }\n\t\t\telse { lineRange = (rangeOnThisLine({})); }\n\n\t\t\tresults.push({ lineNumber: lineNumber, line, ranges: [lineRange] });\n\t\t});\n\n\treturn results;\n};\n\ntype SearchResultSerialization = { text: string[]; matchRanges: Range[] };\n\nfunction fileMatchToSearchResultFormat(fileMatch: ISearchTreeFileMatch, labelFormatter: (x: URI) => string): SearchResultSerialization[] {\n\n\tconst textSerializations = fileMatch.textMatches().length > 0 ? matchesToSearchResultFormat(fileMatch.resource, fileMatch.textMatches().sort(searchMatchComparer), fileMatch.context, labelFormatter) : undefined;\n\tconst cellSerializations = (isNotebookFileMatch(fileMatch)) ? fileMatch.cellMatches().sort((a, b) => a.cellIndex - b.cellIndex).sort().filter(cellMatch => cellMatch.contentMatches.length > 0).map((cellMatch, index) => cellMatchToSearchResultFormat(cellMatch, labelFormatter, index === 0)) : [];\n\n\treturn [textSerializations, ...cellSerializations].filter(x => !!x) as SearchResultSerialization[];\n}\nfunction matchesToSearchResultFormat(resource: URI, sortedMatches: ISearchTreeMatch[], matchContext: Map<number, string>, labelFormatter: (x: URI) => string, shouldUseHeader = true): SearchResultSerialization {\n\tconst longestLineNumber = sortedMatches[sortedMatches.length - 1].range().endLineNumber.toString().length;\n\n\tconst text: string[] = shouldUseHeader ? [`${labelFormatter(resource)}:`] : [];\n\tconst matchRanges: Range[] = [];\n\n\tconst targetLineNumberToOffset: Record<string, number> = {};\n\n\tconst context: { line: string; lineNumber: number }[] = [];\n\tmatchContext.forEach((line, lineNumber) => context.push({ line, lineNumber }));\n\tcontext.sort((a, b) => a.lineNumber - b.lineNumber);\n\n\tlet lastLine: number | undefined = undefined;\n\n\tconst seenLines = new Set<string>();\n\tsortedMatches.forEach(match => {\n\t\tmatchToSearchResultFormat(match, longestLineNumber).forEach(match => {\n\t\t\tif (!seenLines.has(match.lineNumber)) {\n\t\t\t\twhile (context.length && context[0].lineNumber < +match.lineNumber) {\n\t\t\t\t\tconst { line, lineNumber } = context.shift()!;\n\t\t\t\t\tif (lastLine !== undefined && lineNumber !== lastLine + 1) {\n\t\t\t\t\t\ttext.push('');\n\t\t\t\t\t}\n\t\t\t\t\ttext.push(`  ${' '.repeat(longestLineNumber - `${lineNumber}`.length)}${lineNumber}  ${line}`);\n\t\t\t\t\tlastLine = lineNumber;\n\t\t\t\t}\n\n\t\t\t\ttargetLineNumberToOffset[match.lineNumber] = text.length;\n\t\t\t\tseenLines.add(match.lineNumber);\n\t\t\t\ttext.push(match.line);\n\t\t\t\tlastLine = +match.lineNumber;\n\t\t\t}\n\n\t\t\tmatchRanges.push(...match.ranges.map(translateRangeLines(targetLineNumberToOffset[match.lineNumber])));\n\t\t});\n\t});\n\n\twhile (context.length) {\n\t\tconst { line, lineNumber } = context.shift()!;\n\t\ttext.push(`  ${lineNumber}  ${line}`);\n\t}\n\n\treturn { text, matchRanges };\n}\n\nfunction cellMatchToSearchResultFormat(cellMatch: ICellMatch, labelFormatter: (x: URI) => string, shouldUseHeader: boolean): SearchResultSerialization {\n\treturn matchesToSearchResultFormat(cellMatch.cell?.uri ?? cellMatch.parent.resource, cellMatch.contentMatches.sort(searchMatchComparer), cellMatch.context, labelFormatter, shouldUseHeader);\n}\n\nconst contentPatternToSearchConfiguration = (pattern: ITextQuery, includes: string, excludes: string, contextLines: number): SearchConfiguration => {\n\treturn {\n\t\tquery: pattern.contentPattern.pattern,\n\t\tisRegexp: !!pattern.contentPattern.isRegExp,\n\t\tisCaseSensitive: !!pattern.contentPattern.isCaseSensitive,\n\t\tmatchWholeWord: !!pattern.contentPattern.isWordMatch,\n\t\tfilesToExclude: excludes, filesToInclude: includes,\n\t\tshowIncludesExcludes: !!(includes || excludes || pattern?.userDisabledExcludesAndIgnoreFiles),\n\t\tuseExcludeSettingsAndIgnoreFiles: (pattern?.userDisabledExcludesAndIgnoreFiles === undefined ? true : !pattern.userDisabledExcludesAndIgnoreFiles),\n\t\tcontextLines,\n\t\tonlyOpenEditors: !!pattern.onlyOpenEditors,\n\t\tnotebookSearchConfig: {\n\t\t\tincludeMarkupInput: !!pattern.contentPattern.notebookInfo?.isInNotebookMarkdownInput,\n\t\t\tincludeMarkupPreview: !!pattern.contentPattern.notebookInfo?.isInNotebookMarkdownPreview,\n\t\t\tincludeCodeInput: !!pattern.contentPattern.notebookInfo?.isInNotebookCellInput,\n\t\t\tincludeOutput: !!pattern.contentPattern.notebookInfo?.isInNotebookCellOutput,\n\t\t}\n\t};\n};\n\nexport const serializeSearchConfiguration = (config: Partial<SearchConfiguration>): string => {\n\tconst removeNullFalseAndUndefined = <T>(a: (T | null | false | undefined)[]) => a.filter(a => a !== false && a !== null && a !== undefined) as T[];\n\n\tconst escapeNewlines = (str: string) => str.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n');\n\n\treturn removeNullFalseAndUndefined([\n\t\t`# Query: ${escapeNewlines(config.query ?? '')}`,\n\n\t\t(config.isCaseSensitive || config.matchWholeWord || config.isRegexp || config.useExcludeSettingsAndIgnoreFiles === false)\n\t\t&& `# Flags: ${coalesce([\n\t\t\tconfig.isCaseSensitive && 'CaseSensitive',\n\t\t\tconfig.matchWholeWord && 'WordMatch',\n\t\t\tconfig.isRegexp && 'RegExp',\n\t\t\tconfig.onlyOpenEditors && 'OpenEditors',\n\t\t\t(config.useExcludeSettingsAndIgnoreFiles === false) && 'IgnoreExcludeSettings'\n\t\t]).join(' ')}`,\n\t\tconfig.filesToInclude ? `# Including: ${config.filesToInclude}` : undefined,\n\t\tconfig.filesToExclude ? `# Excluding: ${config.filesToExclude}` : undefined,\n\t\tconfig.contextLines ? `# ContextLines: ${config.contextLines}` : undefined,\n\t\t''\n\t]).join(lineDelimiter);\n};\n\nexport const extractSearchQueryFromModel = (model: ITextModel): SearchConfiguration =>\n\textractSearchQueryFromLines(model.getValueInRange(new Range(1, 1, 6, 1)).split(lineDelimiter));\n\nexport const defaultSearchConfig = (): SearchConfiguration => ({\n\tquery: '',\n\tfilesToInclude: '',\n\tfilesToExclude: '',\n\tisRegexp: false,\n\tisCaseSensitive: false,\n\tuseExcludeSettingsAndIgnoreFiles: true,\n\tmatchWholeWord: false,\n\tcontextLines: 0,\n\tshowIncludesExcludes: false,\n\tonlyOpenEditors: false,\n\tnotebookSearchConfig: {\n\t\tincludeMarkupInput: true,\n\t\tincludeMarkupPreview: false,\n\t\tincludeCodeInput: true,\n\t\tincludeOutput: true,\n\t}\n});\n\nexport const extractSearchQueryFromLines = (lines: string[]): SearchConfiguration => {\n\n\tconst query = defaultSearchConfig();\n\n\tconst unescapeNewlines = (str: string) => {\n\t\tlet out = '';\n\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\tif (str[i] === '\\\\') {\n\t\t\t\ti++;\n\t\t\t\tconst escaped = str[i];\n\n\t\t\t\tif (escaped === 'n') {\n\t\t\t\t\tout += '\\n';\n\t\t\t\t}\n\t\t\t\telse if (escaped === '\\\\') {\n\t\t\t\t\tout += '\\\\';\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow Error(localize('invalidQueryStringError', \"All backslashes in Query string must be escaped (\\\\\\\\)\"));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tout += str[i];\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t};\n\n\tconst parseYML = /^# ([^:]*): (.*)$/;\n\tfor (const line of lines) {\n\t\tconst parsed = parseYML.exec(line);\n\t\tif (!parsed) { continue; }\n\t\tconst [, key, value] = parsed;\n\t\tswitch (key) {\n\t\t\tcase 'Query': query.query = unescapeNewlines(value); break;\n\t\t\tcase 'Including': query.filesToInclude = value; break;\n\t\t\tcase 'Excluding': query.filesToExclude = value; break;\n\t\t\tcase 'ContextLines': query.contextLines = +value; break;\n\t\t\tcase 'Flags': {\n\t\t\t\tquery.isRegexp = value.indexOf('RegExp') !== -1;\n\t\t\t\tquery.isCaseSensitive = value.indexOf('CaseSensitive') !== -1;\n\t\t\t\tquery.useExcludeSettingsAndIgnoreFiles = value.indexOf('IgnoreExcludeSettings') === -1;\n\t\t\t\tquery.matchWholeWord = value.indexOf('WordMatch') !== -1;\n\t\t\t\tquery.onlyOpenEditors = value.indexOf('OpenEditors') !== -1;\n\t\t\t}\n\t\t}\n\t}\n\n\tquery.showIncludesExcludes = !!(query.filesToInclude || query.filesToExclude || !query.useExcludeSettingsAndIgnoreFiles);\n\n\treturn query;\n};\n\nexport const serializeSearchResultForEditor =\n\t(searchResult: ISearchResult, rawIncludePattern: string, rawExcludePattern: string, contextLines: number, labelFormatter: (x: URI) => string, sortOrder: SearchSortOrder, limitHit?: boolean): { matchRanges: Range[]; text: string; config: Partial<SearchConfiguration> } => {\n\t\tif (!searchResult.query) { throw Error('Internal Error: Expected query, got null'); }\n\t\tconst config = contentPatternToSearchConfiguration(searchResult.query, rawIncludePattern, rawExcludePattern, contextLines);\n\n\t\tconst filecount = searchResult.fileCount() > 1 ? localize('numFiles', \"{0} files\", searchResult.fileCount()) : localize('oneFile', \"1 file\");\n\t\tconst resultcount = searchResult.count() > 1 ? localize('numResults', \"{0} results\", searchResult.count()) : localize('oneResult', \"1 result\");\n\n\t\tconst info = [\n\t\t\tsearchResult.count()\n\t\t\t\t? `${resultcount} - ${filecount}`\n\t\t\t\t: localize('noResults', \"No Results\"),\n\t\t];\n\t\tif (limitHit) {\n\t\t\tinfo.push(localize('searchMaxResultsWarning', \"The result set only contains a subset of all matches. Be more specific in your search to narrow down the results.\"));\n\t\t}\n\t\tinfo.push('');\n\n\t\tconst matchComparer = (a: ISearchTreeFileMatch | ISearchTreeFolderMatch, b: ISearchTreeFileMatch | ISearchTreeFolderMatch) => searchMatchComparer(a, b, sortOrder);\n\n\t\tconst allResults =\n\t\t\tflattenSearchResultSerializations(\n\t\t\t\tsearchResult.folderMatches().sort(matchComparer)\n\t\t\t\t\t.map(folderMatch => folderMatch.allDownstreamFileMatches().sort(matchComparer)\n\t\t\t\t\t\t.flatMap(fileMatch => fileMatchToSearchResultFormat(fileMatch, labelFormatter))).flat());\n\n\t\treturn {\n\t\t\tmatchRanges: allResults.matchRanges.map(translateRangeLines(info.length)),\n\t\t\ttext: info.concat(allResults.text).join(lineDelimiter),\n\t\t\tconfig\n\t\t};\n\t};\n\nconst flattenSearchResultSerializations = (serializations: SearchResultSerialization[]): SearchResultSerialization => {\n\tconst text: string[] = [];\n\tconst matchRanges: Range[] = [];\n\n\tserializations.forEach(serialized => {\n\t\tserialized.matchRanges.map(translateRangeLines(text.length)).forEach(range => matchRanges.push(range));\n\t\tserialized.text.forEach(line => text.push(line));\n\t\ttext.push(''); // new line\n\t});\n\n\treturn { text, matchRanges };\n};\n\nexport const parseSavedSearchEditor = async (accessor: ServicesAccessor, resource: URI) => {\n\tconst textFileService = accessor.get(ITextFileService);\n\n\tconst text = (await textFileService.read(resource)).value;\n\treturn parseSerializedSearchEditor(text);\n};\n\nexport const parseSerializedSearchEditor = (text: string) => {\n\tconst headerlines = [];\n\tconst bodylines = [];\n\n\tlet inHeader = true;\n\tfor (const line of text.split(/\\r?\\n/g)) {\n\t\tif (inHeader) {\n\t\t\theaderlines.push(line);\n\t\t\tif (line === '') {\n\t\t\t\tinHeader = false;\n\t\t\t}\n\t\t} else {\n\t\t\tbodylines.push(line);\n\t\t}\n\t}\n\n\treturn { config: extractSearchQueryFromLines(headerlines), text: bodylines.join('\\n') };\n};\n"]}