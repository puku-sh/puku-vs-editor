{"version":3,"sources":["vs/workbench/contrib/remote/browser/explorerViewItems.ts"],"names":[],"mappings":"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","file":"explorerViewItems.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { IRemoteExplorerService, REMOTE_EXPLORER_TYPE_KEY } from '../../../services/remote/common/remoteExplorerService.js';\nimport { ISelectOptionItem } from '../../../../base/browser/ui/selectBox/selectBox.js';\nimport { IViewDescriptor } from '../../../common/views.js';\nimport { isStringArray } from '../../../../base/common/types.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IStorageService, StorageScope } from '../../../../platform/storage/common/storage.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { VIEWLET_ID } from './remoteExplorer.js';\nimport { getVirtualWorkspaceLocation } from '../../../../platform/workspace/common/virtualWorkspace.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Disposable, DisposableMap } from '../../../../base/common/lifecycle.js';\n\ninterface IRemoteSelectItem extends ISelectOptionItem {\n\tauthority: string[];\n\tvirtualWorkspace?: string;\n\tdispose(): void;\n}\n\nexport const SELECTED_REMOTE_IN_EXPLORER = new RawContextKey<string>('selectedRemoteInExplorer', '');\n\nexport class SwitchRemoteViewItem extends Disposable {\n\tprivate switchRemoteMenu: MenuId;\n\tprivate completedRemotes: DisposableMap<string, IRemoteSelectItem> = this._register(new DisposableMap());\n\tprivate readonly selectedRemoteContext: IContextKey<string>;\n\n\tconstructor(\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IRemoteExplorerService private remoteExplorerService: IRemoteExplorerService,\n\t\t@IWorkbenchEnvironmentService private environmentService: IWorkbenchEnvironmentService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService\n\t) {\n\t\tsuper();\n\t\tthis.selectedRemoteContext = SELECTED_REMOTE_IN_EXPLORER.bindTo(contextKeyService);\n\n\t\tthis.switchRemoteMenu = MenuId.for('workbench.remote.menu.switchRemoteMenu');\n\t\tthis._register(MenuRegistry.appendMenuItem(MenuId.ViewContainerTitle, {\n\t\t\tsubmenu: this.switchRemoteMenu,\n\t\t\ttitle: nls.localize('switchRemote.label', \"Switch Remote\"),\n\t\t\tgroup: 'navigation',\n\t\t\twhen: ContextKeyExpr.equals('viewContainer', VIEWLET_ID),\n\t\t\torder: 1,\n\t\t\tisSelection: true\n\t\t}));\n\t\tthis._register(remoteExplorerService.onDidChangeTargetType(e => {\n\t\t\tthis.select(e);\n\t\t}));\n\t}\n\n\tpublic setSelectionForConnection(): boolean {\n\t\tlet isSetForConnection = false;\n\t\tif (this.completedRemotes.size > 0) {\n\t\t\tlet authority: string[] | undefined;\n\t\t\tconst remoteAuthority = this.environmentService.remoteAuthority;\n\t\t\tlet virtualWorkspace: string | undefined;\n\t\t\tif (!remoteAuthority) {\n\t\t\t\tvirtualWorkspace = getVirtualWorkspaceLocation(this.workspaceContextService.getWorkspace())?.scheme;\n\t\t\t}\n\t\t\tisSetForConnection = true;\n\t\t\tconst explorerType: string[] | undefined = remoteAuthority ? [remoteAuthority.split('+')[0]]\n\t\t\t\t: (virtualWorkspace ? [virtualWorkspace]\n\t\t\t\t\t: (this.storageService.get(REMOTE_EXPLORER_TYPE_KEY, StorageScope.WORKSPACE)?.split(',') ?? this.storageService.get(REMOTE_EXPLORER_TYPE_KEY, StorageScope.PROFILE)?.split(',')));\n\t\t\tif (explorerType !== undefined) {\n\t\t\t\tauthority = this.getAuthorityForExplorerType(explorerType);\n\t\t\t}\n\t\t\tif (authority) {\n\t\t\t\tthis.select(authority);\n\t\t\t}\n\t\t}\n\t\treturn isSetForConnection;\n\t}\n\n\tprivate select(authority: string[]) {\n\t\tthis.selectedRemoteContext.set(authority[0]);\n\t\tthis.remoteExplorerService.targetType = authority;\n\t}\n\n\tprivate getAuthorityForExplorerType(explorerType: string[]): string[] | undefined {\n\t\tlet authority: string[] | undefined;\n\t\tfor (const option of this.completedRemotes) {\n\t\t\tfor (const authorityOption of option[1].authority) {\n\t\t\t\tfor (const explorerOption of explorerType) {\n\t\t\t\t\tif (authorityOption === explorerOption) {\n\t\t\t\t\t\tauthority = option[1].authority;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (option[1].virtualWorkspace === explorerOption) {\n\t\t\t\t\t\tauthority = option[1].authority;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn authority;\n\t}\n\n\tpublic removeOptionItems(views: IViewDescriptor[]) {\n\t\tfor (const view of views) {\n\t\t\tif (view.group && view.group.startsWith('targets') && view.remoteAuthority && (!view.when || this.contextKeyService.contextMatchesRules(view.when))) {\n\t\t\t\tconst authority = isStringArray(view.remoteAuthority) ? view.remoteAuthority : [view.remoteAuthority];\n\t\t\t\tthis.completedRemotes.deleteAndDispose(authority[0]);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic createOptionItems(views: IViewDescriptor[]) {\n\t\tconst startingCount = this.completedRemotes.size;\n\t\tfor (const view of views) {\n\t\t\tif (view.group && view.group.startsWith('targets') && view.remoteAuthority && (!view.when || this.contextKeyService.contextMatchesRules(view.when))) {\n\t\t\t\tconst text = view.name;\n\t\t\t\tconst authority = isStringArray(view.remoteAuthority) ? view.remoteAuthority : [view.remoteAuthority];\n\t\t\t\tif (this.completedRemotes.has(authority[0])) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst thisCapture = this;\n\t\t\t\tconst action = registerAction2(class extends Action2 {\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\tid: `workbench.action.remoteExplorer.show.${authority[0]}`,\n\t\t\t\t\t\t\ttitle: text,\n\t\t\t\t\t\t\ttoggled: SELECTED_REMOTE_IN_EXPLORER.isEqualTo(authority[0]),\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\tid: thisCapture.switchRemoteMenu\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tasync run(): Promise<void> {\n\t\t\t\t\t\tthisCapture.select(authority);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.completedRemotes.set(authority[0], { text: text.value, authority, virtualWorkspace: view.virtualWorkspace, dispose: () => action.dispose() });\n\t\t\t}\n\t\t}\n\t\tif (this.completedRemotes.size > startingCount) {\n\t\t\tthis.setSelectionForConnection();\n\t\t}\n\t}\n}\n"]}