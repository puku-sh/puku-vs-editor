{"version":3,"sources":["vs/workbench/contrib/remote/browser/remoteStartEntry.ts"],"names":[],"mappings":"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","file":"remoteStartEntry.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IExtensionManagementService } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IWorkbenchExtensionEnablementService } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { WorkbenchActionExecutedClassification, WorkbenchActionExecutedEvent } from '../../../../base/common/actions.js';\n\nexport const showStartEntryInWeb = new RawContextKey<boolean>('showRemoteStartEntryInWeb', false);\nexport class RemoteStartEntry extends Disposable implements IWorkbenchContribution {\n\n\tprivate static readonly REMOTE_WEB_START_ENTRY_ACTIONS_COMMAND_ID = 'workbench.action.remote.showWebStartEntryActions';\n\n\tprivate readonly remoteExtensionId: string;\n\tprivate readonly startCommand: string;\n\n\tconstructor(\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IExtensionManagementService private readonly extensionManagementService: IExtensionManagementService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService) {\n\n\t\tsuper();\n\n\t\tconst remoteExtensionTips = this.productService.remoteExtensionTips?.['tunnel'];\n\t\tthis.startCommand = remoteExtensionTips?.startEntry?.startCommand ?? '';\n\t\tthis.remoteExtensionId = remoteExtensionTips?.extensionId ?? '';\n\n\t\tthis._init();\n\t\tthis.registerActions();\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerActions(): void {\n\t\tconst category = nls.localize2('remote.category', \"Remote\");\n\n\t\t// Show Remote Start Action\n\t\tconst startEntry = this;\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: RemoteStartEntry.REMOTE_WEB_START_ENTRY_ACTIONS_COMMAND_ID,\n\t\t\t\t\tcategory,\n\t\t\t\t\ttitle: nls.localize2('remote.showWebStartEntryActions', \"Show Remote Start Entry for web\"),\n\t\t\t\t\tf1: false\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(): Promise<void> {\n\t\t\t\tawait startEntry.showWebRemoteStartActions();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.extensionEnablementService.onEnablementChanged(async (result) => {\n\n\t\t\tfor (const ext of result) {\n\t\t\t\tif (ExtensionIdentifier.equals(this.remoteExtensionId, ext.identifier.id)) {\n\t\t\t\t\tif (this.extensionEnablementService.isEnabled(ext)) {\n\t\t\t\t\t\tshowStartEntryInWeb.bindTo(this.contextKeyService).set(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshowStartEntryInWeb.bindTo(this.contextKeyService).set(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async _init(): Promise<void> {\n\n\t\t// Check if installed and enabled\n\t\tconst installed = (await this.extensionManagementService.getInstalled()).find(value => ExtensionIdentifier.equals(value.identifier.id, this.remoteExtensionId));\n\t\tif (installed) {\n\t\t\tif (this.extensionEnablementService.isEnabled(installed)) {\n\t\t\t\tshowStartEntryInWeb.bindTo(this.contextKeyService).set(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async showWebRemoteStartActions() {\n\t\tthis.commandService.executeCommand(this.startCommand);\n\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', {\n\t\t\tid: this.startCommand,\n\t\t\tfrom: 'remote start entry'\n\t\t});\n\t}\n}\n"]}