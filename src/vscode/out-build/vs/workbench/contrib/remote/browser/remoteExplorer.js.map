{"version":3,"sources":["vs/workbench/contrib/remote/browser/remoteExplorer.ts"],"names":[],"mappings":"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","file":"remoteExplorer.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../../../nls.js';\nimport { Disposable, IDisposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { Extensions, IViewContainersRegistry, IViewsRegistry, ViewContainer, ViewContainerLocation } from '../../../common/views.js';\nimport { IRemoteExplorerService, PORT_AUTO_FALLBACK_SETTING, PORT_AUTO_FORWARD_SETTING, PORT_AUTO_SOURCE_SETTING, PORT_AUTO_SOURCE_SETTING_HYBRID, PORT_AUTO_SOURCE_SETTING_OUTPUT, PORT_AUTO_SOURCE_SETTING_PROCESS, PortsEnablement, TUNNEL_VIEW_CONTAINER_ID, TUNNEL_VIEW_ID } from '../../../services/remote/common/remoteExplorerService.js';\nimport { Attributes, AutoTunnelSource, forwardedPortsFeaturesEnabled, forwardedPortsViewEnabled, makeAddress, mapHasAddressLocalhostOrAllInterfaces, OnPortForward, Tunnel, TunnelCloseReason, TunnelSource } from '../../../services/remote/common/tunnelModel.js';\nimport { ForwardPortAction, OpenPortInBrowserAction, TunnelPanel, TunnelPanelDescriptor, TunnelViewModel, OpenPortInPreviewAction, openPreviewEnabledContext } from './tunnelView.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IStatusbarEntry, IStatusbarEntryAccessor, IStatusbarService, StatusbarAlignment } from '../../../services/statusbar/browser/statusbar.js';\nimport { UrlFinder } from './urlFinder.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { INotificationHandle, INotificationService, IPromptChoice } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ITerminalService } from '../../terminal/browser/terminal.js';\nimport { IDebugService } from '../../debug/common/debug.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { isWeb, OperatingSystem } from '../../../../base/common/platform.js';\nimport { ITunnelService, RemoteTunnel, TunnelPrivacyId } from '../../../../platform/tunnel/common/tunnel.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { ViewPaneContainer } from '../../../browser/parts/views/viewPaneContainer.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { portsViewIcon } from './remoteIcons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IExternalUriOpenerService } from '../../externalUriOpener/common/externalUriOpenerService.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IWorkbenchConfigurationService } from '../../../services/configuration/common/configuration.js';\nimport { IRemoteAgentEnvironment } from '../../../../platform/remote/common/remoteAgentEnvironment.js';\nimport { toAction } from '../../../../base/common/actions.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { IStorageService, StorageScope } from '../../../../platform/storage/common/storage.js';\n\nexport const VIEWLET_ID = 'workbench.view.remote';\n\nexport class ForwardedPortsView extends Disposable implements IWorkbenchContribution {\n\tprivate readonly contextKeyListener = this._register(new MutableDisposable<IDisposable>());\n\tprivate readonly activityBadge = this._register(new MutableDisposable<IDisposable>());\n\tprivate entryAccessor: IStatusbarEntryAccessor | undefined;\n\tprivate hasPortsInSession: boolean = false;\n\n\tconstructor(\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IRemoteExplorerService private readonly remoteExplorerService: IRemoteExplorerService,\n\t\t@ITunnelService private readonly tunnelService: ITunnelService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t) {\n\t\tsuper();\n\t\tthis._register(Registry.as<IViewsRegistry>(Extensions.ViewsRegistry).registerViewWelcomeContent(TUNNEL_VIEW_ID, {\n\t\t\tcontent: this.environmentService.remoteAuthority ? nls.localize('remoteNoPorts', \"No forwarded ports. Forward a port to access your running services locally.\\n[Forward a Port]({0})\", `command:${ForwardPortAction.INLINE_ID}`)\n\t\t\t\t: nls.localize('noRemoteNoPorts', \"No forwarded ports. Forward a port to access your locally running services over the internet.\\n[Forward a Port]({0})\", `command:${ForwardPortAction.INLINE_ID}`),\n\t\t}));\n\t\tthis.enableBadgeAndStatusBar();\n\t\tthis.enableForwardedPortsFeatures();\n\t\tif (!this.environmentService.remoteAuthority) {\n\t\t\tthis._register(Event.once(this.tunnelService.onTunnelOpened)(() => {\n\t\t\t\tthis.hasPortsInSession = true;\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate async getViewContainer(): Promise<ViewContainer | null> {\n\t\treturn Registry.as<IViewContainersRegistry>(Extensions.ViewContainersRegistry).registerViewContainer({\n\t\t\tid: TUNNEL_VIEW_CONTAINER_ID,\n\t\t\ttitle: nls.localize2('ports', \"Ports\"),\n\t\t\ticon: portsViewIcon,\n\t\t\tctorDescriptor: new SyncDescriptor(ViewPaneContainer, [TUNNEL_VIEW_CONTAINER_ID, { mergeViewWithContainerWhenSingleView: true }]),\n\t\t\tstorageId: TUNNEL_VIEW_CONTAINER_ID,\n\t\t\thideIfEmpty: true,\n\t\t\torder: 5\n\t\t}, ViewContainerLocation.Panel);\n\t}\n\n\tprivate async enableForwardedPortsFeatures() {\n\t\tthis.contextKeyListener.clear();\n\n\t\tconst featuresEnabled: boolean = !!forwardedPortsFeaturesEnabled.getValue(this.contextKeyService);\n\t\tconst viewEnabled: boolean = !!forwardedPortsViewEnabled.getValue(this.contextKeyService);\n\n\t\tif (featuresEnabled || viewEnabled) {\n\t\t\t// Also enable the view if it isn't already.\n\t\t\tif (!viewEnabled) {\n\t\t\t\tthis.contextKeyService.createKey(forwardedPortsViewEnabled.key, true);\n\t\t\t}\n\t\t\tconst viewContainer = await this.getViewContainer();\n\t\t\tconst tunnelPanelDescriptor = new TunnelPanelDescriptor(new TunnelViewModel(this.remoteExplorerService, this.tunnelService), this.environmentService);\n\t\t\tconst viewsRegistry = Registry.as<IViewsRegistry>(Extensions.ViewsRegistry);\n\t\t\tif (viewContainer) {\n\t\t\t\tthis.remoteExplorerService.enablePortsFeatures(!featuresEnabled);\n\t\t\t\tviewsRegistry.registerViews([tunnelPanelDescriptor], viewContainer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.contextKeyListener.value = this.contextKeyService.onDidChangeContext(e => {\n\t\t\t\tif (e.affectsSome(new Set([...forwardedPortsFeaturesEnabled.keys(), ...forwardedPortsViewEnabled.keys()]))) {\n\t\t\t\t\tthis.enableForwardedPortsFeatures();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate enableBadgeAndStatusBar() {\n\t\tconst disposable = Registry.as<IViewsRegistry>(Extensions.ViewsRegistry).onViewsRegistered(e => {\n\t\t\tif (e.find(view => view.views.find(viewDescriptor => viewDescriptor.id === TUNNEL_VIEW_ID))) {\n\t\t\t\tthis._register(Event.debounce(this.remoteExplorerService.tunnelModel.onForwardPort, (_last, e) => e, 50)(() => {\n\t\t\t\t\tthis.updateActivityBadge();\n\t\t\t\t\tthis.updateStatusBar();\n\t\t\t\t}));\n\t\t\t\tthis._register(Event.debounce(this.remoteExplorerService.tunnelModel.onClosePort, (_last, e) => e, 50)(() => {\n\t\t\t\t\tthis.updateActivityBadge();\n\t\t\t\t\tthis.updateStatusBar();\n\t\t\t\t}));\n\n\t\t\t\tthis.updateActivityBadge();\n\t\t\t\tthis.updateStatusBar();\n\t\t\t\tdisposable.dispose();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async updateActivityBadge() {\n\t\tif (this.remoteExplorerService.tunnelModel.forwarded.size > 0) {\n\t\t\tthis.activityBadge.value = this.activityService.showViewActivity(TUNNEL_VIEW_ID, {\n\t\t\t\tbadge: new NumberBadge(this.remoteExplorerService.tunnelModel.forwarded.size, n => n === 1 ? nls.localize('1forwardedPort', \"1 forwarded port\") : nls.localize('nForwardedPorts', \"{0} forwarded ports\", n))\n\t\t\t});\n\t\t} else {\n\t\t\tthis.activityBadge.clear();\n\t\t}\n\t}\n\n\tprivate updateStatusBar() {\n\t\tif (!this.environmentService.remoteAuthority && !this.hasPortsInSession) {\n\t\t\t// We only want to show the ports status bar entry when the user has taken an action that indicates that they might care about it.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.entryAccessor) {\n\t\t\tthis._register(this.entryAccessor = this.statusbarService.addEntry(this.entry, 'status.forwardedPorts', StatusbarAlignment.LEFT, 40));\n\t\t} else {\n\t\t\tthis.entryAccessor.update(this.entry);\n\t\t}\n\t}\n\n\tprivate get entry(): IStatusbarEntry {\n\t\tlet tooltip: string;\n\t\tconst count = this.remoteExplorerService.tunnelModel.forwarded.size + this.remoteExplorerService.tunnelModel.detected.size;\n\t\tconst text = `${count}`;\n\t\tif (count === 0) {\n\t\t\ttooltip = nls.localize('remote.forwardedPorts.statusbarTextNone', \"No Ports Forwarded\");\n\t\t} else {\n\t\t\tconst allTunnels = Array.from(this.remoteExplorerService.tunnelModel.forwarded.values());\n\t\t\tallTunnels.push(...Array.from(this.remoteExplorerService.tunnelModel.detected.values()));\n\t\t\ttooltip = nls.localize('remote.forwardedPorts.statusbarTooltip', \"Forwarded Ports: {0}\",\n\t\t\t\tallTunnels.map(forwarded => forwarded.remotePort).join(', '));\n\t\t}\n\t\treturn {\n\t\t\tname: nls.localize('status.forwardedPorts', \"Forwarded Ports\"),\n\t\t\ttext: `$(radio-tower) ${text}`,\n\t\t\tariaLabel: tooltip,\n\t\t\ttooltip,\n\t\t\tcommand: `${TUNNEL_VIEW_ID}.focus`\n\t\t};\n\t}\n}\n\nexport class PortRestore implements IWorkbenchContribution {\n\tconstructor(\n\t\t@IRemoteExplorerService private readonly remoteExplorerService: IRemoteExplorerService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tif (!this.remoteExplorerService.tunnelModel.environmentTunnelsSet) {\n\t\t\tEvent.once(this.remoteExplorerService.tunnelModel.onEnvironmentTunnelsSet)(async () => {\n\t\t\t\tawait this.restore();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.restore();\n\t\t}\n\t}\n\n\tprivate async restore() {\n\t\tthis.logService.trace('ForwardedPorts: Doing first restore.');\n\t\treturn this.remoteExplorerService.restore();\n\t}\n}\n\n\nexport class AutomaticPortForwarding extends Disposable implements IWorkbenchContribution {\n\tprivate procForwarder: ProcAutomaticPortForwarding | undefined;\n\tprivate outputForwarder: OutputAutomaticPortForwarding | undefined;\n\tprivate portListener: IDisposable | undefined;\n\n\tconstructor(\n\t\t@ITerminalService private readonly terminalService: ITerminalService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IExternalUriOpenerService private readonly externalOpenerService: IExternalUriOpenerService,\n\t\t@IRemoteExplorerService private readonly remoteExplorerService: IRemoteExplorerService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IWorkbenchConfigurationService private readonly configurationService: IWorkbenchConfigurationService,\n\t\t@IDebugService private readonly debugService: IDebugService,\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@ITunnelService private readonly tunnelService: ITunnelService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t) {\n\t\tsuper();\n\t\tif (!environmentService.remoteAuthority) {\n\t\t\treturn;\n\t\t}\n\n\t\tconfigurationService.whenRemoteConfigurationLoaded().then(() => remoteAgentService.getEnvironment()).then(environment => {\n\t\t\tthis.setup(environment);\n\t\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration(PORT_AUTO_SOURCE_SETTING)) {\n\t\t\t\t\tthis.setup(environment);\n\t\t\t\t} else if (e.affectsConfiguration(PORT_AUTO_FALLBACK_SETTING) && !this.portListener) {\n\t\t\t\t\tthis.listenForPorts();\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\n\t\tif (!this.storageService.getBoolean('processPortForwardingFallback', StorageScope.WORKSPACE, true)) {\n\t\t\tthis.configurationService.updateValue(PORT_AUTO_FALLBACK_SETTING, 0, ConfigurationTarget.WORKSPACE);\n\t\t}\n\t}\n\n\tprivate getPortAutoFallbackNumber(): number {\n\t\tconst fallbackAt = this.configurationService.inspect<number>(PORT_AUTO_FALLBACK_SETTING);\n\t\tif ((fallbackAt.value !== undefined) && (fallbackAt.value === 0 || (fallbackAt.value !== fallbackAt.defaultValue))) {\n\t\t\treturn fallbackAt.value;\n\t\t}\n\t\tconst inspectSource = this.configurationService.inspect(PORT_AUTO_SOURCE_SETTING);\n\t\tif (inspectSource.applicationValue === PORT_AUTO_SOURCE_SETTING_PROCESS ||\n\t\t\tinspectSource.userValue === PORT_AUTO_SOURCE_SETTING_PROCESS ||\n\t\t\tinspectSource.userLocalValue === PORT_AUTO_SOURCE_SETTING_PROCESS ||\n\t\t\tinspectSource.userRemoteValue === PORT_AUTO_SOURCE_SETTING_PROCESS ||\n\t\t\tinspectSource.workspaceFolderValue === PORT_AUTO_SOURCE_SETTING_PROCESS ||\n\t\t\tinspectSource.workspaceValue === PORT_AUTO_SOURCE_SETTING_PROCESS) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn fallbackAt.value ?? 20;\n\t}\n\n\tprivate listenForPorts() {\n\t\tlet fallbackAt = this.getPortAutoFallbackNumber();\n\t\tif (fallbackAt === 0) {\n\t\t\tthis.portListener?.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.procForwarder && !this.portListener && (this.configurationService.getValue(PORT_AUTO_SOURCE_SETTING) === PORT_AUTO_SOURCE_SETTING_PROCESS)) {\n\t\t\tthis.portListener = this._register(this.remoteExplorerService.tunnelModel.onForwardPort(async () => {\n\t\t\t\tfallbackAt = this.getPortAutoFallbackNumber();\n\t\t\t\tif (fallbackAt === 0) {\n\t\t\t\t\tthis.portListener?.dispose();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (Array.from(this.remoteExplorerService.tunnelModel.forwarded.values()).filter(tunnel => tunnel.source.source === TunnelSource.Auto).length > fallbackAt) {\n\t\t\t\t\tawait this.configurationService.updateValue(PORT_AUTO_SOURCE_SETTING, PORT_AUTO_SOURCE_SETTING_HYBRID);\n\t\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\t\tmessage: nls.localize('remote.autoForwardPortsSource.fallback', \"Over 20 ports have been automatically forwarded. The `process` based automatic port forwarding has been switched to `hybrid` in settings. Some ports may no longer be detected.\"),\n\t\t\t\t\t\tseverity: Severity.Warning,\n\t\t\t\t\t\tactions: {\n\t\t\t\t\t\t\tprimary: [\n\t\t\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\t\t\tid: 'switchBack',\n\t\t\t\t\t\t\t\t\tlabel: nls.localize('remote.autoForwardPortsSource.fallback.switchBack', \"Undo\"),\n\t\t\t\t\t\t\t\t\trun: async () => {\n\t\t\t\t\t\t\t\t\t\tawait this.configurationService.updateValue(PORT_AUTO_SOURCE_SETTING, PORT_AUTO_SOURCE_SETTING_PROCESS);\n\t\t\t\t\t\t\t\t\t\tawait this.configurationService.updateValue(PORT_AUTO_FALLBACK_SETTING, 0, ConfigurationTarget.WORKSPACE);\n\t\t\t\t\t\t\t\t\t\tthis.portListener?.dispose();\n\t\t\t\t\t\t\t\t\t\tthis.portListener = undefined;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\t\t\tid: 'showPortSourceSetting',\n\t\t\t\t\t\t\t\t\tlabel: nls.localize('remote.autoForwardPortsSource.fallback.showPortSourceSetting', \"Show Setting\"),\n\t\t\t\t\t\t\t\t\trun: async () => {\n\t\t\t\t\t\t\t\t\t\tawait this.preferencesService.openSettings({\n\t\t\t\t\t\t\t\t\t\t\tquery: 'remote.autoForwardPortsSource'\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}));\n\t\t} else {\n\t\t\tthis.portListener?.dispose();\n\t\t\tthis.portListener = undefined;\n\t\t}\n\t}\n\n\n\tprivate setup(environment: IRemoteAgentEnvironment | null) {\n\t\tconst alreadyForwarded = this.procForwarder?.forwarded;\n\t\tconst isSwitch = this.outputForwarder || this.procForwarder;\n\t\tthis.procForwarder?.dispose();\n\t\tthis.procForwarder = undefined;\n\t\tthis.outputForwarder?.dispose();\n\t\tthis.outputForwarder = undefined;\n\t\tif (environment?.os !== OperatingSystem.Linux) {\n\t\t\tif (this.configurationService.inspect<string>(PORT_AUTO_SOURCE_SETTING).default?.value !== PORT_AUTO_SOURCE_SETTING_OUTPUT) {\n\t\t\t\tRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration)\n\t\t\t\t\t.registerDefaultConfigurations([{ overrides: { 'remote.autoForwardPortsSource': PORT_AUTO_SOURCE_SETTING_OUTPUT } }]);\n\t\t\t}\n\t\t\tthis.outputForwarder = this._register(new OutputAutomaticPortForwarding(this.terminalService, this.notificationService, this.openerService, this.externalOpenerService,\n\t\t\t\tthis.remoteExplorerService, this.configurationService, this.debugService, this.tunnelService, this.hostService, this.logService, this.contextKeyService, () => false));\n\t\t} else {\n\t\t\tconst useProc = () => (this.configurationService.getValue(PORT_AUTO_SOURCE_SETTING) === PORT_AUTO_SOURCE_SETTING_PROCESS);\n\t\t\tif (useProc()) {\n\t\t\t\tthis.procForwarder = this._register(new ProcAutomaticPortForwarding(false, alreadyForwarded, !isSwitch, this.configurationService, this.remoteExplorerService, this.notificationService,\n\t\t\t\t\tthis.openerService, this.externalOpenerService, this.tunnelService, this.hostService, this.logService, this.contextKeyService));\n\t\t\t} else if (this.configurationService.getValue(PORT_AUTO_SOURCE_SETTING) === PORT_AUTO_SOURCE_SETTING_HYBRID) {\n\t\t\t\tthis.procForwarder = this._register(new ProcAutomaticPortForwarding(true, alreadyForwarded, !isSwitch, this.configurationService, this.remoteExplorerService, this.notificationService,\n\t\t\t\t\tthis.openerService, this.externalOpenerService, this.tunnelService, this.hostService, this.logService, this.contextKeyService));\n\t\t\t}\n\t\t\tthis.outputForwarder = this._register(new OutputAutomaticPortForwarding(this.terminalService, this.notificationService, this.openerService, this.externalOpenerService,\n\t\t\t\tthis.remoteExplorerService, this.configurationService, this.debugService, this.tunnelService, this.hostService, this.logService, this.contextKeyService, useProc));\n\t\t}\n\t\tthis.listenForPorts();\n\t}\n}\n\nclass OnAutoForwardedAction extends Disposable {\n\tprivate lastNotifyTime: Date;\n\tprivate static NOTIFY_COOL_DOWN = 5000; // milliseconds\n\tprivate lastNotification: INotificationHandle | undefined;\n\tprivate lastShownPort: number | undefined;\n\tprivate doActionTunnels: RemoteTunnel[] | undefined;\n\tprivate alreadyOpenedOnce: Set<string> = new Set();\n\n\tconstructor(private readonly notificationService: INotificationService,\n\t\tprivate readonly remoteExplorerService: IRemoteExplorerService,\n\t\tprivate readonly openerService: IOpenerService,\n\t\tprivate readonly externalOpenerService: IExternalUriOpenerService,\n\t\tprivate readonly tunnelService: ITunnelService,\n\t\tprivate readonly hostService: IHostService,\n\t\tprivate readonly logService: ILogService,\n\t\tprivate readonly contextKeyService: IContextKeyService) {\n\t\tsuper();\n\t\tthis.lastNotifyTime = new Date();\n\t\tthis.lastNotifyTime.setFullYear(this.lastNotifyTime.getFullYear() - 1);\n\t}\n\n\tpublic async doAction(tunnels: RemoteTunnel[]): Promise<void> {\n\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting action for ${tunnels[0]?.tunnelRemotePort}`);\n\t\tthis.doActionTunnels = tunnels;\n\t\tconst tunnel = await this.portNumberHeuristicDelay();\n\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose ${tunnel?.tunnelRemotePort}`);\n\t\tif (tunnel) {\n\t\t\tconst allAttributes = await this.remoteExplorerService.tunnelModel.getAttributes([{ port: tunnel.tunnelRemotePort, host: tunnel.tunnelRemoteHost }]);\n\t\t\tconst attributes = allAttributes?.get(tunnel.tunnelRemotePort)?.onAutoForward;\n\t\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) onAutoForward action is ${attributes}`);\n\t\t\tswitch (attributes) {\n\t\t\t\tcase OnPortForward.OpenBrowserOnce: {\n\t\t\t\t\tif (this.alreadyOpenedOnce.has(tunnel.localAddress)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.alreadyOpenedOnce.add(tunnel.localAddress);\n\t\t\t\t\t// Intentionally do not break so that the open browser path can be run.\n\t\t\t\t}\n\t\t\t\tcase OnPortForward.OpenBrowser: {\n\t\t\t\t\tconst address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\t\t\tawait OpenPortInBrowserAction.run(this.remoteExplorerService.tunnelModel, this.openerService, address);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase OnPortForward.OpenPreview: {\n\t\t\t\t\tconst address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\t\t\tawait OpenPortInPreviewAction.run(this.remoteExplorerService.tunnelModel, this.openerService, this.externalOpenerService, address);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase OnPortForward.Silent: break;\n\t\t\t\tdefault: {\n\t\t\t\t\tconst elapsed = new Date().getTime() - this.lastNotifyTime.getTime();\n\t\t\t\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) time elapsed since last notification ${elapsed} ms`);\n\t\t\t\t\tif (elapsed > OnAutoForwardedAction.NOTIFY_COOL_DOWN) {\n\t\t\t\t\t\tawait this.showNotification(tunnel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic hide(removedPorts: number[]) {\n\t\tif (this.doActionTunnels) {\n\t\t\tthis.doActionTunnels = this.doActionTunnels.filter(value => !removedPorts.includes(value.tunnelRemotePort));\n\t\t}\n\t\tif (this.lastShownPort && removedPorts.indexOf(this.lastShownPort) >= 0) {\n\t\t\tthis.lastNotification?.close();\n\t\t}\n\t}\n\n\tprivate newerTunnel: RemoteTunnel | undefined;\n\tprivate async portNumberHeuristicDelay(): Promise<RemoteTunnel | undefined> {\n\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Starting heuristic delay`);\n\t\tif (!this.doActionTunnels || this.doActionTunnels.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tthis.doActionTunnels = this.doActionTunnels.sort((a, b) => a.tunnelRemotePort - b.tunnelRemotePort);\n\t\tconst firstTunnel = this.doActionTunnels.shift()!;\n\t\t// Heuristic.\n\t\tif (firstTunnel.tunnelRemotePort % 1000 === 0) {\n\t\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because % 1000: ${firstTunnel.tunnelRemotePort}`);\n\t\t\tthis.newerTunnel = firstTunnel;\n\t\t\treturn firstTunnel;\n\t\t\t// 9229 is the node inspect port\n\t\t} else if (firstTunnel.tunnelRemotePort < 10000 && firstTunnel.tunnelRemotePort !== 9229) {\n\t\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Heuristic chose tunnel because < 10000: ${firstTunnel.tunnelRemotePort}`);\n\t\t\tthis.newerTunnel = firstTunnel;\n\t\t\treturn firstTunnel;\n\t\t}\n\n\t\tthis.logService.trace(`ForwardedPorts: (OnAutoForwardedAction) Waiting for \"better\" tunnel than ${firstTunnel.tunnelRemotePort}`);\n\t\tthis.newerTunnel = undefined;\n\t\treturn new Promise(resolve => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.newerTunnel) {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t} else if (this.doActionTunnels?.includes(firstTunnel)) {\n\t\t\t\t\tresolve(firstTunnel);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t});\n\t}\n\n\tprivate async basicMessage(tunnel: RemoteTunnel) {\n\t\tconst properties = await this.remoteExplorerService.tunnelModel.getAttributes([{ host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort }], false);\n\t\tconst label = properties?.get(tunnel.tunnelRemotePort)?.label;\n\t\treturn nls.localize('remote.tunnelsView.automaticForward', \"Your application{0} running on port {1} is available.  \",\n\t\t\tlabel ? ` (${label})` : '',\n\t\t\ttunnel.tunnelRemotePort);\n\t}\n\n\tprivate linkMessage() {\n\t\treturn nls.localize(\n\t\t\t{ key: 'remote.tunnelsView.notificationLink2', comment: ['[See all forwarded ports]({0}) is a link. Only translate `See all forwarded ports`. Do not change brackets and parentheses or {0}'] },\n\t\t\t\"[See all forwarded ports]({0})\", `command:${TunnelPanel.ID}.focus`);\n\t}\n\n\tprivate async showNotification(tunnel: RemoteTunnel) {\n\t\tif (!await this.hostService.hadLastFocus()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.lastNotification?.close();\n\t\tlet message = await this.basicMessage(tunnel);\n\t\tconst choices = [this.openBrowserChoice(tunnel)];\n\t\tif (!isWeb || openPreviewEnabledContext.getValue(this.contextKeyService)) {\n\t\t\tchoices.push(this.openPreviewChoice(tunnel));\n\t\t}\n\n\t\tif ((tunnel.tunnelLocalPort !== tunnel.tunnelRemotePort) && this.tunnelService.canElevate && this.tunnelService.isPortPrivileged(tunnel.tunnelRemotePort)) {\n\t\t\t// Privileged ports are not on Windows, so it's safe to use \"superuser\"\n\t\t\tmessage += nls.localize('remote.tunnelsView.elevationMessage', \"You'll need to run as superuser to use port {0} locally.  \", tunnel.tunnelRemotePort);\n\t\t\tchoices.unshift(this.elevateChoice(tunnel));\n\t\t}\n\n\t\tif (tunnel.privacy === TunnelPrivacyId.Private && isWeb && this.tunnelService.canChangePrivacy) {\n\t\t\tchoices.push(this.makePublicChoice(tunnel));\n\t\t}\n\n\t\tmessage += this.linkMessage();\n\n\t\tthis.lastNotification = this.notificationService.prompt(Severity.Info, message, choices, { neverShowAgain: { id: 'remote.tunnelsView.autoForwardNeverShow', isSecondary: true } });\n\t\tthis.lastShownPort = tunnel.tunnelRemotePort;\n\t\tthis.lastNotifyTime = new Date();\n\t\tthis.lastNotification.onDidClose(() => {\n\t\t\tthis.lastNotification = undefined;\n\t\t\tthis.lastShownPort = undefined;\n\t\t});\n\t}\n\n\tprivate makePublicChoice(tunnel: RemoteTunnel): IPromptChoice {\n\t\treturn {\n\t\t\tlabel: nls.localize('remote.tunnelsView.makePublic', \"Make Public\"),\n\t\t\trun: async () => {\n\t\t\t\tconst oldTunnelDetails = mapHasAddressLocalhostOrAllInterfaces(this.remoteExplorerService.tunnelModel.forwarded, tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\t\tawait this.remoteExplorerService.close({ host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort }, TunnelCloseReason.Other);\n\t\t\t\treturn this.remoteExplorerService.forward({\n\t\t\t\t\tremote: { host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort },\n\t\t\t\t\tlocal: tunnel.tunnelLocalPort,\n\t\t\t\t\tname: oldTunnelDetails?.name,\n\t\t\t\t\televateIfNeeded: true,\n\t\t\t\t\tprivacy: TunnelPrivacyId.Public,\n\t\t\t\t\tsource: oldTunnelDetails?.source\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate openBrowserChoice(tunnel: RemoteTunnel): IPromptChoice {\n\t\tconst address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\treturn {\n\t\t\tlabel: OpenPortInBrowserAction.LABEL,\n\t\t\trun: () => OpenPortInBrowserAction.run(this.remoteExplorerService.tunnelModel, this.openerService, address)\n\t\t};\n\t}\n\n\tprivate openPreviewChoice(tunnel: RemoteTunnel): IPromptChoice {\n\t\tconst address = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\treturn {\n\t\t\tlabel: OpenPortInPreviewAction.LABEL,\n\t\t\trun: () => OpenPortInPreviewAction.run(this.remoteExplorerService.tunnelModel, this.openerService, this.externalOpenerService, address)\n\t\t};\n\t}\n\n\tprivate elevateChoice(tunnel: RemoteTunnel): IPromptChoice {\n\t\treturn {\n\t\t\t// Privileged ports are not on Windows, so it's ok to stick to just \"sudo\".\n\t\t\tlabel: nls.localize('remote.tunnelsView.elevationButton', \"Use Port {0} as Sudo...\", tunnel.tunnelRemotePort),\n\t\t\trun: async () => {\n\t\t\t\tawait this.remoteExplorerService.close({ host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort }, TunnelCloseReason.Other);\n\t\t\t\tconst newTunnel = await this.remoteExplorerService.forward({\n\t\t\t\t\tremote: { host: tunnel.tunnelRemoteHost, port: tunnel.tunnelRemotePort },\n\t\t\t\t\tlocal: tunnel.tunnelRemotePort,\n\t\t\t\t\televateIfNeeded: true,\n\t\t\t\t\tsource: AutoTunnelSource\n\t\t\t\t});\n\t\t\t\tif (!newTunnel || (typeof newTunnel === 'string')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.lastNotification?.close();\n\t\t\t\tthis.lastShownPort = newTunnel.tunnelRemotePort;\n\t\t\t\tthis.lastNotification = this.notificationService.prompt(Severity.Info,\n\t\t\t\t\tawait this.basicMessage(newTunnel) + this.linkMessage(),\n\t\t\t\t\t[this.openBrowserChoice(newTunnel), this.openPreviewChoice(tunnel)],\n\t\t\t\t\t{ neverShowAgain: { id: 'remote.tunnelsView.autoForwardNeverShow', isSecondary: true } });\n\t\t\t\tthis.lastNotification.onDidClose(() => {\n\t\t\t\t\tthis.lastNotification = undefined;\n\t\t\t\t\tthis.lastShownPort = undefined;\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass OutputAutomaticPortForwarding extends Disposable {\n\tprivate portsFeatures?: IDisposable;\n\tprivate urlFinder?: UrlFinder;\n\tprivate notifier: OnAutoForwardedAction;\n\n\tconstructor(\n\t\tprivate readonly terminalService: ITerminalService,\n\t\treadonly notificationService: INotificationService,\n\t\treadonly openerService: IOpenerService,\n\t\treadonly externalOpenerService: IExternalUriOpenerService,\n\t\tprivate readonly remoteExplorerService: IRemoteExplorerService,\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\tprivate readonly debugService: IDebugService,\n\t\treadonly tunnelService: ITunnelService,\n\t\treadonly hostService: IHostService,\n\t\treadonly logService: ILogService,\n\t\treadonly contextKeyService: IContextKeyService,\n\t\treadonly privilegedOnly: () => boolean\n\t) {\n\t\tsuper();\n\t\tthis.notifier = new OnAutoForwardedAction(notificationService, remoteExplorerService, openerService, externalOpenerService, tunnelService, hostService, logService, contextKeyService);\n\t\tthis._register(configurationService.onDidChangeConfiguration((e) => {\n\t\t\tif (e.affectsConfiguration(PORT_AUTO_FORWARD_SETTING)) {\n\t\t\t\tthis.tryStartStopUrlFinder();\n\t\t\t}\n\t\t}));\n\n\t\tthis.portsFeatures = this._register(this.remoteExplorerService.onEnabledPortsFeatures(() => {\n\t\t\tthis.tryStartStopUrlFinder();\n\t\t}));\n\t\tthis.tryStartStopUrlFinder();\n\n\t\tif (configurationService.getValue(PORT_AUTO_SOURCE_SETTING) === PORT_AUTO_SOURCE_SETTING_HYBRID) {\n\t\t\tthis._register(this.tunnelService.onTunnelClosed(tunnel => this.notifier.hide([tunnel.port])));\n\t\t}\n\t}\n\n\tprivate tryStartStopUrlFinder() {\n\t\tif (this.configurationService.getValue(PORT_AUTO_FORWARD_SETTING)) {\n\t\t\tthis.startUrlFinder();\n\t\t} else {\n\t\t\tthis.stopUrlFinder();\n\t\t}\n\t}\n\n\tprivate startUrlFinder() {\n\t\tif (!this.urlFinder && (this.remoteExplorerService.portsFeaturesEnabled !== PortsEnablement.AdditionalFeatures)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.portsFeatures?.dispose();\n\t\tthis.urlFinder = this._register(new UrlFinder(this.terminalService, this.debugService));\n\t\tthis._register(this.urlFinder.onDidMatchLocalUrl(async (localUrl) => {\n\t\t\tif (mapHasAddressLocalhostOrAllInterfaces(this.remoteExplorerService.tunnelModel.detected, localUrl.host, localUrl.port)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst attributes = (await this.remoteExplorerService.tunnelModel.getAttributes([localUrl]))?.get(localUrl.port);\n\t\t\tif (attributes?.onAutoForward === OnPortForward.Ignore) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.privilegedOnly() && !this.tunnelService.isPortPrivileged(localUrl.port)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst forwarded = await this.remoteExplorerService.forward({ remote: localUrl, source: AutoTunnelSource }, attributes ?? null);\n\t\t\tif (forwarded && (typeof forwarded !== 'string')) {\n\t\t\t\tthis.notifier.doAction([forwarded]);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate stopUrlFinder() {\n\t\tif (this.urlFinder) {\n\t\t\tthis.urlFinder.dispose();\n\t\t\tthis.urlFinder = undefined;\n\t\t}\n\t}\n}\n\nclass ProcAutomaticPortForwarding extends Disposable {\n\tprivate candidateListener: IDisposable | undefined;\n\tprivate autoForwarded: Set<string> = new Set();\n\tprivate notifiedOnly: Set<string> = new Set();\n\tprivate notifier: OnAutoForwardedAction;\n\tprivate initialCandidates: Set<string> = new Set();\n\tprivate portsFeatures: IDisposable | undefined;\n\n\tconstructor(\n\t\tprivate readonly unforwardOnly: boolean,\n\t\treadonly alreadyAutoForwarded: Set<string> | undefined,\n\t\tprivate readonly needsInitialCandidates: boolean,\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\treadonly remoteExplorerService: IRemoteExplorerService,\n\t\treadonly notificationService: INotificationService,\n\t\treadonly openerService: IOpenerService,\n\t\treadonly externalOpenerService: IExternalUriOpenerService,\n\t\treadonly tunnelService: ITunnelService,\n\t\treadonly hostService: IHostService,\n\t\treadonly logService: ILogService,\n\t\treadonly contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis.notifier = new OnAutoForwardedAction(notificationService, remoteExplorerService, openerService, externalOpenerService, tunnelService, hostService, logService, contextKeyService);\n\t\talreadyAutoForwarded?.forEach(port => this.autoForwarded.add(port));\n\t\tthis.initialize();\n\t}\n\n\tget forwarded(): Set<string> {\n\t\treturn this.autoForwarded;\n\t}\n\n\tprivate async initialize() {\n\t\tif (!this.remoteExplorerService.tunnelModel.environmentTunnelsSet) {\n\t\t\tawait new Promise<void>(resolve => this.remoteExplorerService.tunnelModel.onEnvironmentTunnelsSet(() => resolve()));\n\t\t}\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(async (e) => {\n\t\t\tif (e.affectsConfiguration(PORT_AUTO_FORWARD_SETTING)) {\n\t\t\t\tawait this.startStopCandidateListener();\n\t\t\t}\n\t\t}));\n\n\t\tthis.portsFeatures = this._register(this.remoteExplorerService.onEnabledPortsFeatures(async () => {\n\t\t\tawait this.startStopCandidateListener();\n\t\t}));\n\n\t\tthis.startStopCandidateListener();\n\t}\n\n\tprivate async startStopCandidateListener() {\n\t\tif (this.configurationService.getValue(PORT_AUTO_FORWARD_SETTING)) {\n\t\t\tawait this.startCandidateListener();\n\t\t} else {\n\t\t\tthis.stopCandidateListener();\n\t\t}\n\t}\n\n\tprivate stopCandidateListener() {\n\t\tif (this.candidateListener) {\n\t\t\tthis.candidateListener.dispose();\n\t\t\tthis.candidateListener = undefined;\n\t\t}\n\t}\n\n\tprivate async startCandidateListener() {\n\t\tif (this.candidateListener || (this.remoteExplorerService.portsFeaturesEnabled !== PortsEnablement.AdditionalFeatures)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.portsFeatures?.dispose();\n\n\t\t// Capture list of starting candidates so we don't auto forward them later.\n\t\tawait this.setInitialCandidates();\n\n\t\t// Need to check the setting again, since it may have changed while we waited for the initial candidates to be set.\n\t\tif (this.configurationService.getValue(PORT_AUTO_FORWARD_SETTING)) {\n\t\t\tthis.candidateListener = this._register(this.remoteExplorerService.tunnelModel.onCandidatesChanged(this.handleCandidateUpdate, this));\n\t\t}\n\t}\n\n\tprivate async setInitialCandidates() {\n\t\tif (!this.needsInitialCandidates) {\n\t\t\tthis.logService.debug(`ForwardedPorts: (ProcForwarding) Not setting initial candidates`);\n\t\t\treturn;\n\t\t}\n\t\tlet startingCandidates = this.remoteExplorerService.tunnelModel.candidatesOrUndefined;\n\t\tif (!startingCandidates) {\n\t\t\tawait new Promise<void>(resolve => this.remoteExplorerService.tunnelModel.onCandidatesChanged(() => resolve()));\n\t\t\tstartingCandidates = this.remoteExplorerService.tunnelModel.candidates;\n\t\t}\n\n\t\tfor (const value of startingCandidates) {\n\t\t\tthis.initialCandidates.add(makeAddress(value.host, value.port));\n\t\t}\n\t\tthis.logService.debug(`ForwardedPorts: (ProcForwarding) Initial candidates set to ${startingCandidates.map(candidate => candidate.port).join(', ')}`);\n\t}\n\n\tprivate async forwardCandidates(): Promise<RemoteTunnel[] | undefined> {\n\t\tlet attributes: Map<number, Attributes> | undefined;\n\t\tconst allTunnels: RemoteTunnel[] = [];\n\t\tthis.logService.trace(`ForwardedPorts: (ProcForwarding) Attempting to forward ${this.remoteExplorerService.tunnelModel.candidates.length} candidates`);\n\t\tfor (const value of this.remoteExplorerService.tunnelModel.candidates) {\n\t\t\tif (!value.detail) {\n\t\t\t\tthis.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${value.port} missing detail`);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!attributes) {\n\t\t\t\tattributes = await this.remoteExplorerService.tunnelModel.getAttributes(this.remoteExplorerService.tunnelModel.candidates);\n\t\t\t}\n\n\t\t\tconst portAttributes = attributes?.get(value.port);\n\n\t\t\tconst address = makeAddress(value.host, value.port);\n\t\t\tif (this.initialCandidates.has(address) && (portAttributes?.onAutoForward === undefined)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (this.notifiedOnly.has(address) || this.autoForwarded.has(address)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst alreadyForwarded = mapHasAddressLocalhostOrAllInterfaces(this.remoteExplorerService.tunnelModel.forwarded, value.host, value.port);\n\t\t\tif (mapHasAddressLocalhostOrAllInterfaces(this.remoteExplorerService.tunnelModel.detected, value.host, value.port)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (portAttributes?.onAutoForward === OnPortForward.Ignore) {\n\t\t\t\tthis.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${value.port} is ignored`);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst forwarded = await this.remoteExplorerService.forward({ remote: value, source: AutoTunnelSource }, portAttributes ?? null);\n\t\t\tif (!alreadyForwarded && forwarded) {\n\t\t\t\tthis.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${value.port} has been forwarded`);\n\t\t\t\tthis.autoForwarded.add(address);\n\t\t\t} else if (forwarded) {\n\t\t\t\tthis.logService.trace(`ForwardedPorts: (ProcForwarding) Port ${value.port} has been notified`);\n\t\t\t\tthis.notifiedOnly.add(address);\n\t\t\t}\n\t\t\tif (forwarded && (typeof forwarded !== 'string')) {\n\t\t\t\tallTunnels.push(forwarded);\n\t\t\t}\n\t\t}\n\t\tthis.logService.trace(`ForwardedPorts: (ProcForwarding) Forwarded ${allTunnels.length} candidates`);\n\t\tif (allTunnels.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn allTunnels;\n\t}\n\n\tprivate async handleCandidateUpdate(removed: Map<string, { host: string; port: number }>) {\n\t\tconst removedPorts: number[] = [];\n\t\tlet autoForwarded: Map<string, string | Tunnel>;\n\t\tif (this.unforwardOnly) {\n\t\t\tautoForwarded = new Map();\n\t\t\tfor (const entry of this.remoteExplorerService.tunnelModel.forwarded.entries()) {\n\t\t\t\tif (entry[1].source.source === TunnelSource.Auto) {\n\t\t\t\t\tautoForwarded.set(entry[0], entry[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tautoForwarded = new Map(this.autoForwarded.entries());\n\t\t}\n\n\t\tfor (const removedPort of removed) {\n\t\t\tconst key = removedPort[0];\n\t\t\tlet value = removedPort[1];\n\t\t\tconst forwardedValue = mapHasAddressLocalhostOrAllInterfaces(autoForwarded, value.host, value.port);\n\t\t\tif (forwardedValue) {\n\t\t\t\tif (typeof forwardedValue === 'string') {\n\t\t\t\t\tthis.autoForwarded.delete(key);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = { host: forwardedValue.remoteHost, port: forwardedValue.remotePort };\n\t\t\t\t}\n\t\t\t\tawait this.remoteExplorerService.close(value, TunnelCloseReason.AutoForwardEnd);\n\t\t\t\tremovedPorts.push(value.port);\n\t\t\t} else if (this.notifiedOnly.has(key)) {\n\t\t\t\tthis.notifiedOnly.delete(key);\n\t\t\t\tremovedPorts.push(value.port);\n\t\t\t} else if (this.initialCandidates.has(key)) {\n\t\t\t\tthis.initialCandidates.delete(key);\n\t\t\t}\n\t\t}\n\n\t\tif (this.unforwardOnly) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (removedPorts.length > 0) {\n\t\t\tawait this.notifier.hide(removedPorts);\n\t\t}\n\n\t\tconst tunnels = await this.forwardCandidates();\n\t\tif (tunnels) {\n\t\t\tawait this.notifier.doAction(tunnels);\n\t\t}\n\t}\n}\n"]}