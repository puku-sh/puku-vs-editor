{"version":3,"sources":["vs/workbench/contrib/localHistory/browser/localHistoryCommands.ts"],"names":[],"mappings":"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","file":"localHistoryCommands.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize, localize2 } from '../../../../nls.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { toErrorMessage } from '../../../../base/common/errorMessage.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IWorkingCopyHistoryEntry, IWorkingCopyHistoryService } from '../../../services/workingCopy/common/workingCopyHistory.js';\nimport { API_OPEN_DIFF_EDITOR_COMMAND_ID } from '../../../browser/parts/editor/editorCommands.js';\nimport { LocalHistoryFileSystemProvider } from './localHistoryFileSystemProvider.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { registerAction2, Action2, MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { basename, basenameOrAuthority, dirname } from '../../../../base/common/resources.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { EditorResourceAccessor, SaveSourceRegistry, SideBySideEditor } from '../../../common/editor.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IWorkingCopyService } from '../../../services/workingCopy/common/workingCopyService.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ActiveEditorContext, ResourceContextKey } from '../../../common/contextkeys.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { getIconClasses } from '../../../../editor/common/services/getIconClasses.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { getLocalHistoryDateFormatter, LOCAL_HISTORY_ICON_RESTORE, LOCAL_HISTORY_MENU_CONTEXT_KEY } from './localHistory.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { ResourceSet } from '../../../../base/common/map.js';\nimport { IHistoryService } from '../../../services/history/common/history.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IEditorOptions } from '../../../../platform/editor/common/editor.js';\n\nconst LOCAL_HISTORY_CATEGORY = localize2('localHistory.category', 'Local History');\nconst CTX_LOCAL_HISTORY_ENABLED = ContextKeyExpr.has('config.workbench.localHistory.enabled');\n\nexport interface ITimelineCommandArgument {\n\turi: URI;\n\thandle: string;\n}\n\n//#region Compare with File\n\nexport const COMPARE_WITH_FILE_LABEL = localize2('localHistory.compareWithFile', 'Compare with File');\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.compareWithFile',\n\t\t\ttitle: COMPARE_WITH_FILE_LABEL,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '1_compare',\n\t\t\t\torder: 1,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\n\t\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\t\t\treturn commandService.executeCommand(API_OPEN_DIFF_EDITOR_COMMAND_ID, ...toDiffEditorArguments(entry, entry.workingCopy.resource));\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Compare with Previous\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.compareWithPrevious',\n\t\t\ttitle: localize2('localHistory.compareWithPrevious', 'Compare with Previous'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '1_compare',\n\t\t\t\torder: 2,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst { entry, previous } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\n\t\t\t// Without a previous entry, just show the entry directly\n\t\t\tif (!previous) {\n\t\t\t\treturn openEntry(entry, editorService);\n\t\t\t}\n\n\t\t\t// Open real diff editor\n\t\t\treturn commandService.executeCommand(API_OPEN_DIFF_EDITOR_COMMAND_ID, ...toDiffEditorArguments(previous, entry));\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Select for Compare / Compare with Selected\n\nlet itemSelectedForCompare: ITimelineCommandArgument | undefined = undefined;\n\nconst LocalHistoryItemSelectedForCompare = new RawContextKey<boolean>('localHistoryItemSelectedForCompare', false, true);\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.selectForCompare',\n\t\t\ttitle: localize2('localHistory.selectForCompare', 'Select for Compare'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '2_compare_with',\n\t\t\t\torder: 2,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\n\t\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\t\t\titemSelectedForCompare = item;\n\t\t\tLocalHistoryItemSelectedForCompare.bindTo(contextKeyService).set(true);\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.compareWithSelected',\n\t\t\ttitle: localize2('localHistory.compareWithSelected', 'Compare with Selected'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '2_compare_with',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(LOCAL_HISTORY_MENU_CONTEXT_KEY, LocalHistoryItemSelectedForCompare)\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst commandService = accessor.get(ICommandService);\n\n\t\tif (!itemSelectedForCompare) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedEntry = (await findLocalHistoryEntry(workingCopyHistoryService, itemSelectedForCompare)).entry;\n\t\tif (!selectedEntry) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\t\t\treturn commandService.executeCommand(API_OPEN_DIFF_EDITOR_COMMAND_ID, ...toDiffEditorArguments(selectedEntry, entry));\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Show Contents\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.open',\n\t\t\ttitle: localize2('localHistory.open', 'Show Contents'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '3_contents',\n\t\t\t\torder: 1,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\t\t\treturn openEntry(entry, editorService);\n\t\t}\n\t}\n});\n\n//#region Restore Contents\n\nconst RESTORE_CONTENTS_LABEL = localize2('localHistory.restore', 'Restore Contents');\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.restoreViaEditor',\n\t\t\ttitle: RESTORE_CONTENTS_LABEL,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: -10,\n\t\t\t\twhen: ResourceContextKey.Scheme.isEqualTo(LocalHistoryFileSystemProvider.SCHEMA)\n\t\t\t},\n\t\t\ticon: LOCAL_HISTORY_ICON_RESTORE\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, uri: URI): Promise<void> {\n\t\tconst { associatedResource, location } = LocalHistoryFileSystemProvider.fromLocalHistoryFileSystem(uri);\n\n\t\treturn restore(accessor, { uri: associatedResource, handle: basenameOrAuthority(location) });\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.restore',\n\t\t\ttitle: RESTORE_CONTENTS_LABEL,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '3_contents',\n\t\t\t\torder: 2,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\treturn restore(accessor, item);\n\t}\n});\n\nconst restoreSaveSource = SaveSourceRegistry.registerSource('localHistoryRestore.source', localize('localHistoryRestore.source', \"File Restored\"));\n\nasync function restore(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\tconst fileService = accessor.get(IFileService);\n\tconst dialogService = accessor.get(IDialogService);\n\tconst workingCopyService = accessor.get(IWorkingCopyService);\n\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\tconst editorService = accessor.get(IEditorService);\n\n\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\tif (entry) {\n\n\t\t// Ask for confirmation\n\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage: localize('confirmRestoreMessage', \"Do you want to restore the contents of '{0}'?\", basename(entry.workingCopy.resource)),\n\t\t\tdetail: localize('confirmRestoreDetail', \"Restoring will discard any unsaved changes.\"),\n\t\t\tprimaryButton: localize({ key: 'restoreButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Restore\")\n\t\t});\n\n\t\tif (!confirmed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Revert all dirty working copies for target\n\t\tconst workingCopies = workingCopyService.getAll(entry.workingCopy.resource);\n\t\tif (workingCopies) {\n\t\t\tfor (const workingCopy of workingCopies) {\n\t\t\t\tif (workingCopy.isDirty()) {\n\t\t\t\t\tawait workingCopy.revert({ soft: true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Replace target with contents of history entry\n\t\ttry {\n\t\t\tawait fileService.cloneFile(entry.location, entry.workingCopy.resource);\n\t\t} catch (error) {\n\n\t\t\t// It is possible that we fail to copy the history entry to the\n\t\t\t// destination, for example when the destination is write protected.\n\t\t\t// In that case tell the user and return, it is still possible for\n\t\t\t// the user to manually copy the changes over from the diff editor.\n\n\t\t\tawait dialogService.error(localize('unableToRestore', \"Unable to restore '{0}'.\", basename(entry.workingCopy.resource)), toErrorMessage(error));\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Restore all working copies for target\n\t\tif (workingCopies) {\n\t\t\tfor (const workingCopy of workingCopies) {\n\t\t\t\tawait workingCopy.revert({ force: true });\n\t\t\t}\n\t\t}\n\n\t\t// Open target\n\t\tawait editorService.openEditor({ resource: entry.workingCopy.resource });\n\n\t\t// Add new entry\n\t\tawait workingCopyHistoryService.addEntry({\n\t\t\tresource: entry.workingCopy.resource,\n\t\t\tsource: restoreSaveSource\n\t\t}, CancellationToken.None);\n\n\t\t// Close source\n\t\tawait closeEntry(entry, editorService);\n\t}\n}\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.restoreViaPicker',\n\t\t\ttitle: localize2('localHistory.restoreViaPicker', 'Find Entry to Restore'),\n\t\t\tf1: true,\n\t\t\tcategory: LOCAL_HISTORY_CATEGORY,\n\t\t\tprecondition: CTX_LOCAL_HISTORY_ENABLED\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst modelService = accessor.get(IModelService);\n\t\tconst languageService = accessor.get(ILanguageService);\n\t\tconst labelService = accessor.get(ILabelService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst historyService = accessor.get(IHistoryService);\n\n\t\t// Show all resources with associated history entries in picker\n\t\t// with progress because this operation will take longer the more\n\t\t// files have been saved overall.\n\t\t//\n\t\t// Sort the resources by history to put more relevant entries\n\t\t// to the top.\n\n\t\tconst resourcePickerDisposables = new DisposableStore();\n\t\tconst resourcePicker = resourcePickerDisposables.add(quickInputService.createQuickPick<IQuickPickItem & { resource: URI }>());\n\n\t\tlet cts = new CancellationTokenSource();\n\t\tresourcePickerDisposables.add(resourcePicker.onDidHide(() => cts.dispose(true)));\n\n\t\tresourcePicker.busy = true;\n\t\tresourcePicker.show();\n\n\t\tconst resources = new ResourceSet(await workingCopyHistoryService.getAll(cts.token));\n\t\tconst recentEditorResources = new ResourceSet(coalesce(historyService.getHistory().map(({ resource }) => resource)));\n\n\t\tconst resourcesSortedByRecency: URI[] = [];\n\t\tfor (const resource of recentEditorResources) {\n\t\t\tif (resources.has(resource)) {\n\t\t\t\tresourcesSortedByRecency.push(resource);\n\t\t\t\tresources.delete(resource);\n\t\t\t}\n\t\t}\n\t\tresourcesSortedByRecency.push(...[...resources].sort((r1, r2) => r1.fsPath < r2.fsPath ? -1 : 1));\n\n\t\tresourcePicker.busy = false;\n\t\tresourcePicker.placeholder = localize('restoreViaPicker.filePlaceholder', \"Select the file to show local history for\");\n\t\tresourcePicker.matchOnLabel = true;\n\t\tresourcePicker.matchOnDescription = true;\n\t\tresourcePicker.items = [...resourcesSortedByRecency].map(resource => ({\n\t\t\tresource,\n\t\t\tlabel: basenameOrAuthority(resource),\n\t\t\tdescription: labelService.getUriLabel(dirname(resource), { relative: true }),\n\t\t\ticonClasses: getIconClasses(modelService, languageService, resource)\n\t\t}));\n\n\t\tawait Event.toPromise(resourcePicker.onDidAccept);\n\t\tresourcePickerDisposables.dispose();\n\n\t\tconst resource = resourcePicker.selectedItems.at(0)?.resource;\n\t\tif (!resource) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Show all entries for the picked resource in another picker\n\t\t// and open the entry in the end that was selected by the user\n\n\t\tconst entryPickerDisposables = new DisposableStore();\n\t\tconst entryPicker = entryPickerDisposables.add(quickInputService.createQuickPick<IQuickPickItem & { entry: IWorkingCopyHistoryEntry }>());\n\n\t\tcts = new CancellationTokenSource();\n\t\tentryPickerDisposables.add(entryPicker.onDidHide(() => cts.dispose(true)));\n\n\t\tentryPicker.busy = true;\n\t\tentryPicker.show();\n\n\t\tconst entries = await workingCopyHistoryService.getEntries(resource, cts.token);\n\n\t\tentryPicker.busy = false;\n\t\tentryPicker.canAcceptInBackground = true;\n\t\tentryPicker.placeholder = localize('restoreViaPicker.entryPlaceholder', \"Select the local history entry to open\");\n\t\tentryPicker.matchOnLabel = true;\n\t\tentryPicker.matchOnDescription = true;\n\t\tentryPicker.items = Array.from(entries).reverse().map(entry => ({\n\t\t\tentry,\n\t\t\tlabel: `$(circle-outline) ${SaveSourceRegistry.getSourceLabel(entry.source)}`,\n\t\t\tdescription: toLocalHistoryEntryDateLabel(entry.timestamp)\n\t\t}));\n\n\t\tentryPickerDisposables.add(entryPicker.onDidAccept(async e => {\n\t\t\tif (!e.inBackground) {\n\t\t\t\tentryPickerDisposables.dispose();\n\t\t\t}\n\n\t\t\tconst selectedItem = entryPicker.selectedItems.at(0);\n\t\t\tif (!selectedItem) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst resourceExists = await fileService.exists(selectedItem.entry.workingCopy.resource);\n\t\t\tif (resourceExists) {\n\t\t\t\treturn commandService.executeCommand(API_OPEN_DIFF_EDITOR_COMMAND_ID, ...toDiffEditorArguments(selectedItem.entry, selectedItem.entry.workingCopy.resource, { preserveFocus: e.inBackground }));\n\t\t\t}\n\n\t\t\treturn openEntry(selectedItem.entry, editorService, { preserveFocus: e.inBackground });\n\t\t}));\n\t}\n});\n\nMenuRegistry.appendMenuItem(MenuId.TimelineTitle, { command: { id: 'workbench.action.localHistory.restoreViaPicker', title: localize2('localHistory.restoreViaPickerMenu', 'Local History: Find Entry to Restore...') }, group: 'submenu', order: 1, when: CTX_LOCAL_HISTORY_ENABLED });\n\n//#endregion\n\n//#region Rename\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.rename',\n\t\t\ttitle: localize2('localHistory.rename', 'Rename'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '5_edit',\n\t\t\t\torder: 1,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\n\t\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst inputBox = disposables.add(quickInputService.createInputBox());\n\t\t\tinputBox.title = localize('renameLocalHistoryEntryTitle', \"Rename Local History Entry\");\n\t\t\tinputBox.ignoreFocusOut = true;\n\t\t\tinputBox.placeholder = localize('renameLocalHistoryPlaceholder', \"Enter the new name of the local history entry\");\n\t\t\tinputBox.value = SaveSourceRegistry.getSourceLabel(entry.source);\n\t\t\tinputBox.show();\n\t\t\tdisposables.add(inputBox.onDidAccept(() => {\n\t\t\t\tif (inputBox.value) {\n\t\t\t\t\tworkingCopyHistoryService.updateEntry(entry, { source: inputBox.value }, CancellationToken.None);\n\t\t\t\t}\n\t\t\t\tdisposables.dispose();\n\t\t\t}));\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Delete\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.delete',\n\t\t\ttitle: localize2('localHistory.delete', 'Delete'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.TimelineItemContext,\n\t\t\t\tgroup: '5_edit',\n\t\t\t\torder: 2,\n\t\t\t\twhen: LOCAL_HISTORY_MENU_CONTEXT_KEY\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor, item: ITimelineCommandArgument): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\n\t\tconst { entry } = await findLocalHistoryEntry(workingCopyHistoryService, item);\n\t\tif (entry) {\n\n\t\t\t// Ask for confirmation\n\t\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\t\ttype: 'warning',\n\t\t\t\tmessage: localize('confirmDeleteMessage', \"Do you want to delete the local history entry of '{0}' from {1}?\", entry.workingCopy.name, toLocalHistoryEntryDateLabel(entry.timestamp)),\n\t\t\t\tdetail: localize('confirmDeleteDetail', \"This action is irreversible!\"),\n\t\t\t\tprimaryButton: localize({ key: 'deleteButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete\"),\n\t\t\t});\n\n\t\t\tif (!confirmed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove via service\n\t\t\tawait workingCopyHistoryService.removeEntry(entry, CancellationToken.None);\n\n\t\t\t// Close any opened editors\n\t\t\tawait closeEntry(entry, editorService);\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Delete All\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.deleteAll',\n\t\t\ttitle: localize2('localHistory.deleteAll', 'Delete All'),\n\t\t\tf1: true,\n\t\t\tcategory: LOCAL_HISTORY_CATEGORY,\n\t\t\tprecondition: CTX_LOCAL_HISTORY_ENABLED\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst dialogService = accessor.get(IDialogService);\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\n\t\t// Ask for confirmation\n\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\ttype: 'warning',\n\t\t\tmessage: localize('confirmDeleteAllMessage', \"Do you want to delete all entries of all files in local history?\"),\n\t\t\tdetail: localize('confirmDeleteAllDetail', \"This action is irreversible!\"),\n\t\t\tprimaryButton: localize({ key: 'deleteAllButtonLabel', comment: ['&& denotes a mnemonic'] }, \"&&Delete All\"),\n\t\t});\n\n\t\tif (!confirmed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove via service\n\t\tawait workingCopyHistoryService.removeAll(CancellationToken.None);\n\t}\n});\n\n//#endregion\n\n//#region Create\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.localHistory.create',\n\t\t\ttitle: localize2('localHistory.create', 'Create Entry'),\n\t\t\tf1: true,\n\t\t\tcategory: LOCAL_HISTORY_CATEGORY,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_LOCAL_HISTORY_ENABLED, ActiveEditorContext)\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst workingCopyHistoryService = accessor.get(IWorkingCopyHistoryService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst labelService = accessor.get(ILabelService);\n\t\tconst pathService = accessor.get(IPathService);\n\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tif (resource?.scheme !== pathService.defaultUriScheme && resource?.scheme !== Schemas.vscodeUserData) {\n\t\t\treturn; // only enable for selected schemes\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst inputBox = disposables.add(quickInputService.createInputBox());\n\t\tinputBox.title = localize('createLocalHistoryEntryTitle', \"Create Local History Entry\");\n\t\tinputBox.ignoreFocusOut = true;\n\t\tinputBox.placeholder = localize('createLocalHistoryPlaceholder', \"Enter the new name of the local history entry for '{0}'\", labelService.getUriBasenameLabel(resource));\n\t\tinputBox.show();\n\t\tdisposables.add(inputBox.onDidAccept(async () => {\n\t\t\tconst entrySource = inputBox.value;\n\t\t\tdisposables.dispose();\n\n\t\t\tif (entrySource) {\n\t\t\t\tawait workingCopyHistoryService.addEntry({ resource, source: inputBox.value }, CancellationToken.None);\n\t\t\t}\n\t\t}));\n\t}\n});\n\n//#endregion\n\n//#region Helpers\n\nasync function openEntry(entry: IWorkingCopyHistoryEntry, editorService: IEditorService, options?: IEditorOptions): Promise<void> {\n\tconst resource = LocalHistoryFileSystemProvider.toLocalHistoryFileSystem({ location: entry.location, associatedResource: entry.workingCopy.resource });\n\n\tawait editorService.openEditor({\n\t\tresource,\n\t\tlabel: localize('localHistoryEditorLabel', \"{0} ({1} • {2})\", entry.workingCopy.name, SaveSourceRegistry.getSourceLabel(entry.source), toLocalHistoryEntryDateLabel(entry.timestamp)),\n\t\toptions\n\t});\n}\n\nasync function closeEntry(entry: IWorkingCopyHistoryEntry, editorService: IEditorService): Promise<void> {\n\tconst resource = LocalHistoryFileSystemProvider.toLocalHistoryFileSystem({ location: entry.location, associatedResource: entry.workingCopy.resource });\n\n\tconst editors = editorService.findEditors(resource, { supportSideBySide: SideBySideEditor.ANY });\n\tawait editorService.closeEditors(editors, { preserveFocus: true });\n}\n\nexport function toDiffEditorArguments(entry: IWorkingCopyHistoryEntry, resource: URI, options?: IEditorOptions): unknown[];\nexport function toDiffEditorArguments(previousEntry: IWorkingCopyHistoryEntry, entry: IWorkingCopyHistoryEntry, options?: IEditorOptions): unknown[];\nexport function toDiffEditorArguments(arg1: IWorkingCopyHistoryEntry, arg2: IWorkingCopyHistoryEntry | URI, options?: IEditorOptions): unknown[] {\n\n\t// Left hand side is always a working copy history entry\n\tconst originalResource = LocalHistoryFileSystemProvider.toLocalHistoryFileSystem({ location: arg1.location, associatedResource: arg1.workingCopy.resource });\n\n\tlet label: string;\n\n\t// Right hand side depends on how the method was called\n\t// and is either another working copy history entry\n\t// or the file on disk.\n\n\tlet modifiedResource: URI;\n\n\t// Compare with file on disk\n\tif (URI.isUri(arg2)) {\n\t\tconst resource = arg2;\n\n\t\tmodifiedResource = resource;\n\t\tlabel = localize('localHistoryCompareToFileEditorLabel', \"{0} ({1} • {2}) ↔ {3}\", arg1.workingCopy.name, SaveSourceRegistry.getSourceLabel(arg1.source), toLocalHistoryEntryDateLabel(arg1.timestamp), arg1.workingCopy.name);\n\t}\n\n\t// Compare with another entry\n\telse {\n\t\tconst modified = arg2;\n\n\t\tmodifiedResource = LocalHistoryFileSystemProvider.toLocalHistoryFileSystem({ location: modified.location, associatedResource: modified.workingCopy.resource });\n\t\tlabel = localize('localHistoryCompareToPreviousEditorLabel', \"{0} ({1} • {2}) ↔ {3} ({4} • {5})\", arg1.workingCopy.name, SaveSourceRegistry.getSourceLabel(arg1.source), toLocalHistoryEntryDateLabel(arg1.timestamp), modified.workingCopy.name, SaveSourceRegistry.getSourceLabel(modified.source), toLocalHistoryEntryDateLabel(modified.timestamp));\n\t}\n\n\treturn [\n\t\toriginalResource,\n\t\tmodifiedResource,\n\t\tlabel,\n\t\toptions ? [undefined, options] : undefined\n\t];\n}\n\nexport async function findLocalHistoryEntry(workingCopyHistoryService: IWorkingCopyHistoryService, descriptor: ITimelineCommandArgument): Promise<{ entry: IWorkingCopyHistoryEntry | undefined; previous: IWorkingCopyHistoryEntry | undefined }> {\n\tconst entries = await workingCopyHistoryService.getEntries(descriptor.uri, CancellationToken.None);\n\n\tlet currentEntry: IWorkingCopyHistoryEntry | undefined = undefined;\n\tlet previousEntry: IWorkingCopyHistoryEntry | undefined = undefined;\n\tfor (let i = 0; i < entries.length; i++) {\n\t\tconst entry = entries[i];\n\n\t\tif (entry.id === descriptor.handle) {\n\t\t\tcurrentEntry = entry;\n\t\t\tpreviousEntry = entries[i - 1];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn {\n\t\tentry: currentEntry,\n\t\tprevious: previousEntry\n\t};\n}\n\nconst SEP = /\\//g;\nfunction toLocalHistoryEntryDateLabel(timestamp: number): string {\n\treturn `${getLocalHistoryDateFormatter().format(timestamp).replace(SEP, '-')}`; // preserving `/` will break editor labels, so replace it with a non-path symbol\n}\n\n//#endregion\n"]}