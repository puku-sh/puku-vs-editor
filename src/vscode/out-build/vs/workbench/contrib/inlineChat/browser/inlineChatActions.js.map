{"version":3,"sources":["vs/workbench/contrib/inlineChat/browser/inlineChatActions.ts"],"names":[],"mappings":"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","file":"inlineChatActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../../editor/browser/editorExtensions.js';\nimport { EmbeddedDiffEditorWidget } from '../../../../editor/browser/widget/diffEditor/embeddedDiffEditorWidget.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { EditorContextKeys } from '../../../../editor/common/editorContextKeys.js';\nimport { InlineChatController, InlineChatController1, InlineChatController2, InlineChatRunOptions } from './inlineChatController.js';\nimport { ACTION_ACCEPT_CHANGES, CTX_INLINE_CHAT_HAS_STASHED_SESSION, CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_FIRST, CTX_INLINE_CHAT_INNER_CURSOR_LAST, CTX_INLINE_CHAT_VISIBLE, CTX_INLINE_CHAT_OUTER_CURSOR_POSITION, MENU_INLINE_CHAT_WIDGET_STATUS, CTX_INLINE_CHAT_REQUEST_IN_PROGRESS, CTX_INLINE_CHAT_RESPONSE_TYPE, InlineChatResponseType, ACTION_REGENERATE_RESPONSE, ACTION_VIEW_IN_CHAT, ACTION_TOGGLE_DIFF, CTX_INLINE_CHAT_CHANGE_HAS_DIFF, CTX_INLINE_CHAT_CHANGE_SHOWS_DIFF, MENU_INLINE_CHAT_ZONE, ACTION_DISCARD_CHANGES, CTX_INLINE_CHAT_POSSIBLE, ACTION_START, MENU_INLINE_CHAT_SIDE, CTX_INLINE_CHAT_V2_ENABLED, CTX_INLINE_CHAT_V1_ENABLED } from '../common/inlineChat.js';\nimport { ctxHasEditorModification, ctxHasRequestInProgress } from '../../chat/browser/chatEditing/chatEditingEditorContextKeys.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Action2, IAction2Options, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IChatService } from '../../chat/common/chatService.js';\nimport { ChatContextKeys } from '../../chat/common/chatContextKeys.js';\nimport { HunkInformation } from './inlineChatSession.js';\nimport { IChatWidgetService } from '../../chat/browser/chat.js';\n\n\nCommandsRegistry.registerCommandAlias('interactiveEditor.start', 'inlineChat.start');\nCommandsRegistry.registerCommandAlias('interactive.acceptChanges', ACTION_ACCEPT_CHANGES);\n\n\nexport const START_INLINE_CHAT = registerIcon('start-inline-chat', Codicon.sparkle, localize('startInlineChat', 'Icon which spawns the inline chat from the editor toolbar.'));\n\n// some gymnastics to enable hold for speech without moving the StartSessionAction into the electron-layer\n\nexport interface IHoldForSpeech {\n\t(accessor: ServicesAccessor, controller: InlineChatController, source: Action2): void;\n}\nlet _holdForSpeech: IHoldForSpeech | undefined = undefined;\nexport function setHoldForSpeech(holdForSpeech: IHoldForSpeech) {\n\t_holdForSpeech = holdForSpeech;\n}\n\nconst inlineChatContextKey = ContextKeyExpr.and(\n\tContextKeyExpr.or(CTX_INLINE_CHAT_V1_ENABLED, CTX_INLINE_CHAT_V2_ENABLED),\n\tCTX_INLINE_CHAT_POSSIBLE,\n\tEditorContextKeys.writable,\n\tEditorContextKeys.editorSimpleInput.negate()\n);\n\nexport class StartSessionAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_START,\n\t\t\ttitle: localize2('run', 'Open Inline Chat'),\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tf1: true,\n\t\t\tprecondition: inlineChatContextKey,\n\t\t\tkeybinding: {\n\t\t\t\twhen: EditorContextKeys.focus,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyI\n\t\t\t},\n\t\t\ticon: START_INLINE_CHAT,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: '1_chat',\n\t\t\t\torder: 3,\n\t\t\t\twhen: inlineChatContextKey\n\t\t\t}, {\n\t\t\t\tid: MenuId.ChatTitleBarMenu,\n\t\t\t\tgroup: 'a_open',\n\t\t\t\torder: 3,\n\t\t\t}]\n\t\t});\n\t}\n\toverride run(accessor: ServicesAccessor, ...args: unknown[]): any {\n\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst editor = codeEditorService.getActiveCodeEditor();\n\t\tif (!editor || editor.isSimpleWidget) {\n\t\t\t// well, at least we tried...\n\t\t\treturn;\n\t\t}\n\n\n\t\t// precondition does hold\n\t\treturn editor.invokeWithinContext((editorAccessor) => {\n\t\t\tconst kbService = editorAccessor.get(IContextKeyService);\n\t\t\tconst logService = editorAccessor.get(ILogService);\n\t\t\tconst enabled = kbService.contextMatchesRules(this.desc.precondition ?? undefined);\n\t\t\tif (!enabled) {\n\t\t\t\tlogService.debug(`[EditorAction2] NOT running command because its precondition is FALSE`, this.desc.id, this.desc.precondition?.serialize());\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn this._runEditorCommand(editorAccessor, editor, ...args);\n\t\t});\n\t}\n\n\tprivate _runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\n\t\tconst ctrl = InlineChatController.get(editor);\n\t\tif (!ctrl) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_holdForSpeech) {\n\t\t\taccessor.get(IInstantiationService).invokeFunction(_holdForSpeech, ctrl, this);\n\t\t}\n\n\t\tlet options: InlineChatRunOptions | undefined;\n\t\tconst arg = _args[0];\n\t\tif (arg && InlineChatRunOptions.isInlineChatRunOptions(arg)) {\n\t\t\toptions = arg;\n\t\t}\n\t\tInlineChatController.get(editor)?.run({ ...options });\n\t}\n}\n\nexport class FocusInlineChat extends EditorAction2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.focus',\n\t\t\ttitle: localize2('focus', \"Focus Input\"),\n\t\t\tf1: true,\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, CTX_INLINE_CHAT_VISIBLE, CTX_INLINE_CHAT_FOCUSED.negate(), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\t\tkeybinding: [{\n\t\t\t\tweight: KeybindingWeight.EditorCore + 10, // win against core_command\n\t\t\t\twhen: ContextKeyExpr.and(CTX_INLINE_CHAT_OUTER_CURSOR_POSITION.isEqualTo('above'), EditorContextKeys.isEmbeddedDiffEditor.negate()),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow,\n\t\t\t}, {\n\t\t\t\tweight: KeybindingWeight.EditorCore + 10, // win against core_command\n\t\t\t\twhen: ContextKeyExpr.and(CTX_INLINE_CHAT_OUTER_CURSOR_POSITION.isEqualTo('below'), EditorContextKeys.isEmbeddedDiffEditor.negate()),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow,\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride runEditorCommand(_accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tInlineChatController.get(editor)?.focus();\n\t}\n}\n\n//#region --- VERSION 1\n\nexport class UnstashSessionAction extends EditorAction2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.unstash',\n\t\t\ttitle: localize2('unstash', \"Resume Last Dismissed Inline Chat\"),\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_HAS_STASHED_SESSION, EditorContextKeys.writable),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyZ,\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async runEditorCommand(_accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tconst ctrl = InlineChatController1.get(editor);\n\t\tif (ctrl) {\n\t\t\tconst session = ctrl.unstashLastSession();\n\t\t\tif (session) {\n\t\t\t\tctrl.run({\n\t\t\t\t\texistingSession: session,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport abstract class AbstractInline1ChatAction extends EditorAction2 {\n\n\tstatic readonly category = localize2('cat', \"Inline Chat\");\n\n\tconstructor(desc: IAction2Options) {\n\n\t\tconst massageMenu = (menu: IAction2Options['menu'] | undefined) => {\n\t\t\tif (Array.isArray(menu)) {\n\t\t\t\tfor (const entry of menu) {\n\t\t\t\t\tentry.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V1_ENABLED, entry.when);\n\t\t\t\t}\n\t\t\t} else if (menu) {\n\t\t\t\tmenu.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V1_ENABLED, menu.when);\n\t\t\t}\n\t\t};\n\t\tif (Array.isArray(desc.menu)) {\n\t\t\tmassageMenu(desc.menu);\n\t\t} else {\n\t\t\tmassageMenu(desc.menu);\n\t\t}\n\n\t\tsuper({\n\t\t\t...desc,\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_V1_ENABLED, desc.precondition)\n\t\t});\n\t}\n\n\toverride runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst logService = accessor.get(ILogService);\n\n\t\tlet ctrl = InlineChatController1.get(editor);\n\t\tif (!ctrl) {\n\t\t\tconst { activeTextEditorControl } = editorService;\n\t\t\tif (isCodeEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl;\n\t\t\t} else if (isDiffEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl.getModifiedEditor();\n\t\t\t}\n\t\t\tctrl = InlineChatController1.get(editor);\n\t\t}\n\n\t\tif (!ctrl) {\n\t\t\tlogService.warn('[IE] NO controller found for action', this.desc.id, editor.getModel()?.uri);\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\t\teditor = editor.getParentEditor();\n\t\t}\n\t\tif (!ctrl) {\n\t\t\tfor (const diffEditor of accessor.get(ICodeEditorService).listDiffEditors()) {\n\t\t\t\tif (diffEditor.getOriginalEditor() === editor || diffEditor.getModifiedEditor() === editor) {\n\t\t\t\t\tif (diffEditor instanceof EmbeddedDiffEditorWidget) {\n\t\t\t\t\t\tthis.runEditorCommand(accessor, diffEditor.getParentEditor(), ..._args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.runInlineChatCommand(accessor, ctrl, editor, ..._args);\n\t}\n\n\tabstract runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, editor: ICodeEditor, ...args: unknown[]): void;\n}\n\nexport class ArrowOutUpAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.arrowOutUp',\n\t\t\ttitle: localize('arrowUp', 'Cursor Up'),\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_FIRST, EditorContextKeys.isEmbeddedDiffEditor.negate(), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorCore,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow\n\t\t\t}\n\t\t});\n\t}\n\n\trunInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): void {\n\t\tctrl.arrowOut(true);\n\t}\n}\n\nexport class ArrowOutDownAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.arrowOutDown',\n\t\t\ttitle: localize('arrowDown', 'Cursor Down'),\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_LAST, EditorContextKeys.isEmbeddedDiffEditor.negate(), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorCore,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow\n\t\t\t}\n\t\t});\n\t}\n\n\trunInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): void {\n\t\tctrl.arrowOut(false);\n\t}\n}\n\nexport class AcceptChanges extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_ACCEPT_CHANGES,\n\t\t\ttitle: localize2('apply1', \"Accept Changes\"),\n\t\t\tshortTitle: localize('apply2', 'Accept'),\n\t\t\ticon: Codicon.check,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_VISIBLE),\n\t\t\tkeybinding: [{\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 10,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t}],\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_REQUEST_IN_PROGRESS.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.MessagesAndEdits)\n\t\t\t\t),\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_ZONE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1,\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, hunk?: HunkInformation | any): Promise<void> {\n\t\tctrl.acceptHunk(hunk);\n\t}\n}\n\nexport class DiscardHunkAction extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_DISCARD_CHANGES,\n\t\t\ttitle: localize('discard', 'Discard'),\n\t\t\ticon: Codicon.chromeClose,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_ZONE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 2\n\t\t\t}],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.MessagesAndEdits)\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, hunk?: HunkInformation | any): Promise<void> {\n\t\treturn ctrl.discardHunk(hunk);\n\t}\n}\n\nexport class RerunAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_REGENERATE_RESPONSE,\n\t\t\ttitle: localize2('chat.rerun.label', \"Rerun Request\"),\n\t\t\tshortTitle: localize('rerun', 'Rerun'),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.refresh,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tmenu: {\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 5,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_REQUEST_IN_PROGRESS.negate(),\n\t\t\t\t\tCTX_INLINE_CHAT_RESPONSE_TYPE.notEqualsTo(InlineChatResponseType.None)\n\t\t\t\t)\n\t\t\t},\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyR\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst model = ctrl.chatWidget.viewModel?.model;\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastRequest = model.getRequests().at(-1);\n\t\tif (lastRequest) {\n\t\t\tconst widget = chatWidgetService.getWidgetBySessionResource(model.sessionResource);\n\t\t\tawait chatService.resendRequest(lastRequest, {\n\t\t\t\tnoCommandDetection: false,\n\t\t\t\tattempt: lastRequest.attempt + 1,\n\t\t\t\tlocation: ctrl.chatWidget.location,\n\t\t\t\tuserSelectedModelId: widget?.input.currentLanguageModel\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class CloseAction extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.close',\n\t\t\ttitle: localize('close', 'Close'),\n\t\t\ticon: Codicon.close,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorContrib + 1,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 1,\n\t\t\t\twhen: CTX_INLINE_CHAT_REQUEST_IN_PROGRESS.negate()\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_SIDE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.None)\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\tctrl.cancelSession();\n\t}\n}\n\nexport class ConfigureInlineChatAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.configure',\n\t\t\ttitle: localize2('configure', 'Configure Inline Chat'),\n\t\t\ticon: Codicon.settingsGear,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tf1: true,\n\t\t\tmenu: {\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: 'zzz',\n\t\t\t\torder: 5\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\taccessor.get(IPreferencesService).openSettings({ query: 'inlineChat' });\n\t}\n}\n\nexport class MoveToNextHunk extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.moveToNextHunk',\n\t\t\ttitle: localize2('moveToNextHunk', 'Move to Next Change'),\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tf1: true,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyCode.F7\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tctrl.moveHunk(true);\n\t}\n}\n\nexport class MoveToPreviousHunk extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.moveToPreviousHunk',\n\t\t\ttitle: localize2('moveToPreviousHunk', 'Move to Previous Change'),\n\t\t\tf1: true,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F7\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tctrl.moveHunk(false);\n\t}\n}\n\nexport class ViewInChatAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_VIEW_IN_CHAT,\n\t\t\ttitle: localize('viewInChat', 'View in Chat'),\n\t\t\ticon: Codicon.chatSparkle,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: 'more',\n\t\t\t\torder: 1,\n\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.notEqualsTo(InlineChatResponseType.Messages)\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.Messages),\n\t\t\t\t\tCTX_INLINE_CHAT_REQUEST_IN_PROGRESS.negate()\n\t\t\t\t)\n\t\t\t}],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow,\n\t\t\t\twhen: ChatContextKeys.inChatInput\n\t\t\t}\n\t\t});\n\t}\n\toverride runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]) {\n\t\treturn ctrl.viewInChat();\n\t}\n}\n\nexport class ToggleDiffForChange extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_TOGGLE_DIFF,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_VISIBLE, CTX_INLINE_CHAT_CHANGE_HAS_DIFF),\n\t\t\ttitle: localize2('showChanges', 'Toggle Changes'),\n\t\t\ticon: Codicon.diffSingle,\n\t\t\ttoggled: {\n\t\t\t\tcondition: CTX_INLINE_CHAT_CHANGE_SHOWS_DIFF,\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: 'zzz',\n\t\t\t\torder: 1,\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_ZONE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: CTX_INLINE_CHAT_CHANGE_HAS_DIFF,\n\t\t\t\torder: 2\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, hunkInfo: HunkInformation | any): void {\n\t\tctrl.toggleDiff(hunkInfo);\n\t}\n}\n\n//#endregion\n\n\n//#region --- VERSION 2\nabstract class AbstractInline2ChatAction extends EditorAction2 {\n\n\tstatic readonly category = localize2('cat', \"Inline Chat\");\n\n\tconstructor(desc: IAction2Options) {\n\t\tconst massageMenu = (menu: IAction2Options['menu'] | undefined) => {\n\t\t\tif (Array.isArray(menu)) {\n\t\t\t\tfor (const entry of menu) {\n\t\t\t\t\tentry.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V2_ENABLED, entry.when);\n\t\t\t\t}\n\t\t\t} else if (menu) {\n\t\t\t\tmenu.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V2_ENABLED, menu.when);\n\t\t\t}\n\t\t};\n\t\tif (Array.isArray(desc.menu)) {\n\t\t\tmassageMenu(desc.menu);\n\t\t} else {\n\t\t\tmassageMenu(desc.menu);\n\t\t}\n\n\t\tsuper({\n\t\t\t...desc,\n\t\t\tcategory: AbstractInline2ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_V2_ENABLED, desc.precondition)\n\t\t});\n\t}\n\n\toverride runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst logService = accessor.get(ILogService);\n\n\t\tlet ctrl = InlineChatController2.get(editor);\n\t\tif (!ctrl) {\n\t\t\tconst { activeTextEditorControl } = editorService;\n\t\t\tif (isCodeEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl;\n\t\t\t} else if (isDiffEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl.getModifiedEditor();\n\t\t\t}\n\t\t\tctrl = InlineChatController2.get(editor);\n\t\t}\n\n\t\tif (!ctrl) {\n\t\t\tlogService.warn('[IE] NO controller found for action', this.desc.id, editor.getModel()?.uri);\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\t\teditor = editor.getParentEditor();\n\t\t}\n\t\tif (!ctrl) {\n\t\t\tfor (const diffEditor of accessor.get(ICodeEditorService).listDiffEditors()) {\n\t\t\t\tif (diffEditor.getOriginalEditor() === editor || diffEditor.getModifiedEditor() === editor) {\n\t\t\t\t\tif (diffEditor instanceof EmbeddedDiffEditorWidget) {\n\t\t\t\t\t\tthis.runEditorCommand(accessor, diffEditor.getParentEditor(), ..._args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.runInlineChatCommand(accessor, ctrl, editor, ..._args);\n\t}\n\n\tabstract runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController2, editor: ICodeEditor, ...args: unknown[]): void;\n}\n\nclass KeepOrUndoSessionAction extends AbstractInline2ChatAction {\n\n\tconstructor(private readonly _keep: boolean, desc: IAction2Options) {\n\t\tsuper(desc);\n\t}\n\n\toverride async runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController2, editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\tif (this._keep) {\n\t\t\tawait ctrl.acceptSession();\n\t\t} else {\n\t\t\tawait ctrl.rejectSession();\n\t\t}\n\t\tif (editor.hasModel()) {\n\t\t\teditor.setSelection(editor.getSelection().collapseToStart());\n\t\t}\n\t}\n}\n\nexport class KeepSessionAction2 extends KeepOrUndoSessionAction {\n\tconstructor() {\n\t\tsuper(true, {\n\t\t\tid: 'inlineChat2.keep',\n\t\t\ttitle: localize2('Keep', \"Keep\"),\n\t\t\tf1: true,\n\t\t\ticon: Codicon.check,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tCTX_INLINE_CHAT_VISIBLE,\n\t\t\t\tctxHasRequestInProgress.negate(),\n\t\t\t\tctxHasEditorModification,\n\t\t\t),\n\t\t\tkeybinding: [{\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inputHasFocus, ChatContextKeys.inputHasText.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyCode.Enter\n\t\t\t}, {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 10,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter\n\t\t\t}],\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 4,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tctxHasRequestInProgress.negate(),\n\t\t\t\t\tctxHasEditorModification,\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated()\n\t\t\t\t),\n\t\t\t}]\n\t\t});\n\t}\n}\n\n\nexport class UndoAndCloseSessionAction2 extends KeepOrUndoSessionAction {\n\n\tconstructor() {\n\t\tsuper(false, {\n\t\t\tid: 'inlineChat2.close',\n\t\t\ttitle: localize2('close2', \"Close\"),\n\t\t\tf1: true,\n\t\t\ticon: Codicon.close,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tkeybinding: [{\n\t\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\t\tContextKeyExpr.and(EditorContextKeys.focus, ctxHasEditorModification.negate()),\n\t\t\t\t\tChatContextKeys.inputHasFocus,\n\t\t\t\t),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t}],\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 100\n\t\t\t}]\n\t\t});\n\t}\n}\n"]}