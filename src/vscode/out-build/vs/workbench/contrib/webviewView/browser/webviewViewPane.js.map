{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/webviewView/browser/webviewViewPane.ts","vs/workbench/contrib/webviewView/browser/webviewViewPane.ts"],"names":[],"mappings":"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","file":"webviewViewPane.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener, Dimension, EventType, findParentWithClass, getWindow } from '../../../../base/browser/dom.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, IDisposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ViewPane, ViewPaneShowActions } from '../../../browser/parts/views/viewPane.js';\nimport { IViewletViewOptions } from '../../../browser/parts/views/viewsViewlet.js';\nimport { Memento } from '../../../common/memento.js';\nimport { IViewBadge, IViewDescriptorService } from '../../../common/views.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { ExtensionKeyedWebviewOriginStore, IOverlayWebview, IWebviewService, WebviewContentPurpose } from '../../webview/browser/webview.js';\nimport { WebviewWindowDragMonitor } from '../../webview/browser/webviewWindowDragMonitor.js';\nimport { IWebviewViewService, WebviewView } from './webviewViewService.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nconst storageKeys = {\n\twebviewState: 'webviewState',\n} as const;\n\ninterface WebviewViewState {\n\t[storageKeys.webviewState]?: string | undefined;\n}\n\nexport class WebviewViewPane extends ViewPane {\n\n\tprivate static _originStore?: ExtensionKeyedWebviewOriginStore;\n\n\tprivate static getOriginStore(storageService: IStorageService): ExtensionKeyedWebviewOriginStore {\n\t\tthis._originStore ??= new ExtensionKeyedWebviewOriginStore('webviewViews.origins', storageService);\n\t\treturn this._originStore;\n\t}\n\n\tprivate readonly _webview = this._register(new MutableDisposable<IOverlayWebview>());\n\tprivate readonly _webviewDisposables = this._register(new DisposableStore());\n\tprivate _activated = false;\n\n\tprivate _container?: HTMLElement;\n\tprivate _rootContainer?: HTMLElement;\n\tprivate _resizeObserver?: any;\n\n\tprivate readonly defaultTitle: string;\n\tprivate setTitle: string | undefined;\n\n\tprivate badge: IViewBadge | undefined;\n\tprivate readonly activity = this._register(new MutableDisposable<IDisposable>());\n\n\tprivate readonly memento: Memento<WebviewViewState>;\n\tprivate readonly viewState: WebviewViewState;\n\tprivate readonly extensionId?: ExtensionIdentifier;\n\n\tprivate _repositionTimeout?: Timeout;\n\n\tconstructor(\n\t\toptions: IViewletViewOptions,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IViewsService private readonly viewService: IViewsService,\n\t\t@IWebviewService private readonly webviewService: IWebviewService,\n\t\t@IWebviewViewService private readonly webviewViewService: IWebviewViewService,\n\t) {\n\t\tsuper({ ...options, titleMenuId: MenuId.ViewTitle, showActions: ViewPaneShowActions.WhenExpanded }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\t\tthis.extensionId = options.fromExtensionId;\n\t\tthis.defaultTitle = this.title;\n\n\t\tthis.memento = new Memento(`webviewView.${this.id}`, storageService);\n\t\tthis.viewState = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\n\t\tthis._register(this.onDidChangeBodyVisibility(() => this.updateTreeVisibility()));\n\n\t\tthis._register(this.webviewViewService.onNewResolverRegistered(e => {\n\t\t\tif (e.viewType === this.id) {\n\t\t\t\t// Potentially re-activate if we have a new resolver\n\t\t\t\tthis.updateTreeVisibility();\n\t\t\t}\n\t\t}));\n\n\t\tthis.updateTreeVisibility();\n\t}\n\n\tprivate readonly _onDidChangeVisibility = this._register(new Emitter<boolean>());\n\treadonly onDidChangeVisibility = this._onDidChangeVisibility.event;\n\n\tprivate readonly _onDispose = this._register(new Emitter<void>());\n\treadonly onDispose = this._onDispose.event;\n\n\toverride dispose() {\n\t\tthis._onDispose.fire();\n\n\t\tclearTimeout(this._repositionTimeout);\n\n\t\tsuper.dispose();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis._webview.value?.focus();\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._container = container;\n\t\tthis._rootContainer = undefined;\n\n\t\tif (!this._resizeObserver) {\n\t\t\tthis._resizeObserver = new ResizeObserver(() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.layoutWebview();\n\t\t\t\t}, 0);\n\t\t\t});\n\n\t\t\tthis._register(toDisposable(() => {\n\t\t\t\tthis._resizeObserver.disconnect();\n\t\t\t}));\n\t\t\tthis._resizeObserver.observe(container);\n\t\t}\n\t}\n\n\tpublic override saveState() {\n\t\tif (this._webview.value) {\n\t\t\tthis.viewState[storageKeys.webviewState] = this._webview.value.state;\n\t\t}\n\n\t\tthis.memento.saveMemento();\n\t\tsuper.saveState();\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\n\t\tthis.layoutWebview(new Dimension(width, height));\n\t}\n\n\tprivate updateTreeVisibility() {\n\t\tif (this.isBodyVisible()) {\n\t\t\tthis.activate();\n\t\t\tthis._webview.value?.claim(this, getWindow(this.element), undefined);\n\t\t} else {\n\t\t\tthis._webview.value?.release(this);\n\t\t}\n\t}\n\n\tprivate activate() {\n\t\tif (this._activated) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._activated = true;\n\n\t\tconst origin = this.extensionId ? WebviewViewPane.getOriginStore(this.storageService).getOrigin(this.id, this.extensionId) : undefined;\n\t\tconst webview = this.webviewService.createWebviewOverlay({\n\t\t\torigin,\n\t\t\tprovidedViewType: this.id,\n\t\t\ttitle: this.title,\n\t\t\toptions: { purpose: WebviewContentPurpose.WebviewView },\n\t\t\tcontentOptions: {},\n\t\t\textension: this.extensionId ? { id: this.extensionId } : undefined\n\t\t});\n\t\twebview.state = this.viewState[storageKeys.webviewState];\n\t\tthis._webview.value = webview;\n\n\t\tif (this._container) {\n\t\t\tthis.layoutWebview();\n\t\t}\n\n\t\tthis._webviewDisposables.add(toDisposable(() => {\n\t\t\tthis._webview.value?.release(this);\n\t\t}));\n\n\t\tthis._webviewDisposables.add(webview.onDidUpdateState(() => {\n\t\t\tthis.viewState[storageKeys.webviewState] = webview.state;\n\t\t}));\n\n\t\t// Re-dispatch all drag events back to the drop target to support view drag drop\n\t\tfor (const event of [EventType.DRAG, EventType.DRAG_END, EventType.DRAG_ENTER, EventType.DRAG_LEAVE, EventType.DRAG_START]) {\n\t\t\tthis._webviewDisposables.add(addDisposableListener(this._webview.value.container, event, e => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tthis.dropTargetElement.dispatchEvent(new DragEvent(e.type, e));\n\t\t\t}));\n\t\t}\n\n\t\tthis._webviewDisposables.add(new WebviewWindowDragMonitor(getWindow(this.element), () => this._webview.value));\n\n\t\tconst source = this._webviewDisposables.add(new CancellationTokenSource());\n\n\t\tthis.withProgress(async () => {\n\t\t\tawait this.extensionService.activateByEvent(`onView:${this.id}`);\n\n\t\t\tconst self = this;\n\t\t\tconst webviewView: WebviewView = {\n\t\t\t\twebview,\n\t\t\t\tonDidChangeVisibility: this.onDidChangeBodyVisibility,\n\t\t\t\tonDispose: this.onDispose,\n\n\t\t\t\tget title(): string | undefined { return self.setTitle; },\n\t\t\t\tset title(value: string | undefined) { self.updateTitle(value); },\n\n\t\t\t\tget description(): string | undefined { return self.titleDescription; },\n\t\t\t\tset description(value: string | undefined) { self.updateTitleDescription(value); },\n\n\t\t\t\tget badge(): IViewBadge | undefined { return self.badge; },\n\t\t\t\tset badge(badge: IViewBadge | undefined) { self.updateBadge(badge); },\n\n\t\t\t\tdispose: () => {\n\t\t\t\t\t// Only reset and clear the webview itself. Don't dispose of the view container\n\t\t\t\t\tthis._activated = false;\n\t\t\t\t\tthis._webview.clear();\n\t\t\t\t\tthis._webviewDisposables.clear();\n\t\t\t\t},\n\n\t\t\t\tshow: (preserveFocus) => {\n\t\t\t\t\tthis.viewService.openView(this.id, !preserveFocus);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tawait this.webviewViewService.resolve(this.id, webviewView, source.token);\n\t\t});\n\t}\n\n\tprotected override updateTitle(value: string | undefined) {\n\t\tthis.setTitle = value;\n\t\tsuper.updateTitle(typeof value === 'string' ? value : this.defaultTitle);\n\t}\n\n\tprotected updateBadge(badge: IViewBadge | undefined) {\n\n\t\tif (this.badge?.value === badge?.value &&\n\t\t\tthis.badge?.tooltip === badge?.tooltip) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.badge = badge;\n\t\tif (badge) {\n\t\t\tconst activity = {\n\t\t\t\tbadge: new NumberBadge(badge.value, () => badge.tooltip),\n\t\t\t\tpriority: 150\n\t\t\t};\n\t\t\tthis.activity.value = this.activityService.showViewActivity(this.id, activity);\n\t\t}\n\t}\n\n\tprivate async withProgress(task: () => Promise<void>): Promise<void> {\n\t\treturn this.progressService.withProgress({ location: this.id, delay: 500 }, task);\n\t}\n\n\toverride onDidScrollRoot() {\n\t\tthis.layoutWebview();\n\t}\n\n\tprivate doLayoutWebview(dimension?: Dimension) {\n\t\tconst webviewEntry = this._webview.value;\n\t\tif (!this._container || !webviewEntry) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._rootContainer || !this._rootContainer.isConnected) {\n\t\t\tthis._rootContainer = this.findRootContainer(this._container);\n\t\t}\n\n\t\twebviewEntry.layoutWebviewOverElement(this._container, dimension, this._rootContainer);\n\t}\n\n\tprivate layoutWebview(dimension?: Dimension) {\n\t\tthis.doLayoutWebview(dimension);\n\t\t// Temporary fix for https://github.com/microsoft/vscode/issues/110450\n\t\t// There is an animation that lasts about 200ms, update the webview positioning once this animation is complete.\n\t\tclearTimeout(this._repositionTimeout);\n\t\tthis._repositionTimeout = setTimeout(() => this.doLayoutWebview(dimension), 200);\n\t}\n\n\tprivate findRootContainer(container: HTMLElement): HTMLElement | undefined {\n\t\treturn findParentWithClass(container, 'monaco-scrollable-element') ?? undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener, Dimension, EventType, findParentWithClass, getWindow } from '../../../../base/browser/dom.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, IDisposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ViewPane, ViewPaneShowActions } from '../../../browser/parts/views/viewPane.js';\nimport { IViewletViewOptions } from '../../../browser/parts/views/viewsViewlet.js';\nimport { Memento } from '../../../common/memento.js';\nimport { IViewBadge, IViewDescriptorService } from '../../../common/views.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { ExtensionKeyedWebviewOriginStore, IOverlayWebview, IWebviewService, WebviewContentPurpose } from '../../webview/browser/webview.js';\nimport { WebviewWindowDragMonitor } from '../../webview/browser/webviewWindowDragMonitor.js';\nimport { IWebviewViewService, WebviewView } from './webviewViewService.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nconst storageKeys = {\n\twebviewState: 'webviewState',\n} as const;\n\ninterface WebviewViewState {\n\t[storageKeys.webviewState]?: string | undefined;\n}\n\nexport class WebviewViewPane extends ViewPane {\n\n\tprivate static _originStore?: ExtensionKeyedWebviewOriginStore;\n\n\tprivate static getOriginStore(storageService: IStorageService): ExtensionKeyedWebviewOriginStore {\n\t\tthis._originStore ??= new ExtensionKeyedWebviewOriginStore('webviewViews.origins', storageService);\n\t\treturn this._originStore;\n\t}\n\n\tprivate readonly _webview = this._register(new MutableDisposable<IOverlayWebview>());\n\tprivate readonly _webviewDisposables = this._register(new DisposableStore());\n\tprivate _activated = false;\n\n\tprivate _container?: HTMLElement;\n\tprivate _rootContainer?: HTMLElement;\n\tprivate _resizeObserver?: any;\n\n\tprivate readonly defaultTitle: string;\n\tprivate setTitle: string | undefined;\n\n\tprivate badge: IViewBadge | undefined;\n\tprivate readonly activity = this._register(new MutableDisposable<IDisposable>());\n\n\tprivate readonly memento: Memento<WebviewViewState>;\n\tprivate readonly viewState: WebviewViewState;\n\tprivate readonly extensionId?: ExtensionIdentifier;\n\n\tprivate _repositionTimeout?: Timeout;\n\n\tconstructor(\n\t\toptions: IViewletViewOptions,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IViewsService private readonly viewService: IViewsService,\n\t\t@IWebviewService private readonly webviewService: IWebviewService,\n\t\t@IWebviewViewService private readonly webviewViewService: IWebviewViewService,\n\t) {\n\t\tsuper({ ...options, titleMenuId: MenuId.ViewTitle, showActions: ViewPaneShowActions.WhenExpanded }, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\t\tthis.extensionId = options.fromExtensionId;\n\t\tthis.defaultTitle = this.title;\n\n\t\tthis.memento = new Memento(`webviewView.${this.id}`, storageService);\n\t\tthis.viewState = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\n\t\tthis._register(this.onDidChangeBodyVisibility(() => this.updateTreeVisibility()));\n\n\t\tthis._register(this.webviewViewService.onNewResolverRegistered(e => {\n\t\t\tif (e.viewType === this.id) {\n\t\t\t\t// Potentially re-activate if we have a new resolver\n\t\t\t\tthis.updateTreeVisibility();\n\t\t\t}\n\t\t}));\n\n\t\tthis.updateTreeVisibility();\n\t}\n\n\tprivate readonly _onDidChangeVisibility = this._register(new Emitter<boolean>());\n\treadonly onDidChangeVisibility = this._onDidChangeVisibility.event;\n\n\tprivate readonly _onDispose = this._register(new Emitter<void>());\n\treadonly onDispose = this._onDispose.event;\n\n\toverride dispose() {\n\t\tthis._onDispose.fire();\n\n\t\tclearTimeout(this._repositionTimeout);\n\n\t\tsuper.dispose();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis._webview.value?.focus();\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._container = container;\n\t\tthis._rootContainer = undefined;\n\n\t\tif (!this._resizeObserver) {\n\t\t\tthis._resizeObserver = new ResizeObserver(() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.layoutWebview();\n\t\t\t\t}, 0);\n\t\t\t});\n\n\t\t\tthis._register(toDisposable(() => {\n\t\t\t\tthis._resizeObserver.disconnect();\n\t\t\t}));\n\t\t\tthis._resizeObserver.observe(container);\n\t\t}\n\t}\n\n\tpublic override saveState() {\n\t\tif (this._webview.value) {\n\t\t\tthis.viewState[storageKeys.webviewState] = this._webview.value.state;\n\t\t}\n\n\t\tthis.memento.saveMemento();\n\t\tsuper.saveState();\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\n\t\tthis.layoutWebview(new Dimension(width, height));\n\t}\n\n\tprivate updateTreeVisibility() {\n\t\tif (this.isBodyVisible()) {\n\t\t\tthis.activate();\n\t\t\tthis._webview.value?.claim(this, getWindow(this.element), undefined);\n\t\t} else {\n\t\t\tthis._webview.value?.release(this);\n\t\t}\n\t}\n\n\tprivate activate() {\n\t\tif (this._activated) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._activated = true;\n\n\t\tconst origin = this.extensionId ? WebviewViewPane.getOriginStore(this.storageService).getOrigin(this.id, this.extensionId) : undefined;\n\t\tconst webview = this.webviewService.createWebviewOverlay({\n\t\t\torigin,\n\t\t\tprovidedViewType: this.id,\n\t\t\ttitle: this.title,\n\t\t\toptions: { purpose: WebviewContentPurpose.WebviewView },\n\t\t\tcontentOptions: {},\n\t\t\textension: this.extensionId ? { id: this.extensionId } : undefined\n\t\t});\n\t\twebview.state = this.viewState[storageKeys.webviewState];\n\t\tthis._webview.value = webview;\n\n\t\tif (this._container) {\n\t\t\tthis.layoutWebview();\n\t\t}\n\n\t\tthis._webviewDisposables.add(toDisposable(() => {\n\t\t\tthis._webview.value?.release(this);\n\t\t}));\n\n\t\tthis._webviewDisposables.add(webview.onDidUpdateState(() => {\n\t\t\tthis.viewState[storageKeys.webviewState] = webview.state;\n\t\t}));\n\n\t\t// Re-dispatch all drag events back to the drop target to support view drag drop\n\t\tfor (const event of [EventType.DRAG, EventType.DRAG_END, EventType.DRAG_ENTER, EventType.DRAG_LEAVE, EventType.DRAG_START]) {\n\t\t\tthis._webviewDisposables.add(addDisposableListener(this._webview.value.container, event, e => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tthis.dropTargetElement.dispatchEvent(new DragEvent(e.type, e));\n\t\t\t}));\n\t\t}\n\n\t\tthis._webviewDisposables.add(new WebviewWindowDragMonitor(getWindow(this.element), () => this._webview.value));\n\n\t\tconst source = this._webviewDisposables.add(new CancellationTokenSource());\n\n\t\tthis.withProgress(async () => {\n\t\t\tawait this.extensionService.activateByEvent(`onView:${this.id}`);\n\n\t\t\tconst self = this;\n\t\t\tconst webviewView: WebviewView = {\n\t\t\t\twebview,\n\t\t\t\tonDidChangeVisibility: this.onDidChangeBodyVisibility,\n\t\t\t\tonDispose: this.onDispose,\n\n\t\t\t\tget title(): string | undefined { return self.setTitle; },\n\t\t\t\tset title(value: string | undefined) { self.updateTitle(value); },\n\n\t\t\t\tget description(): string | undefined { return self.titleDescription; },\n\t\t\t\tset description(value: string | undefined) { self.updateTitleDescription(value); },\n\n\t\t\t\tget badge(): IViewBadge | undefined { return self.badge; },\n\t\t\t\tset badge(badge: IViewBadge | undefined) { self.updateBadge(badge); },\n\n\t\t\t\tdispose: () => {\n\t\t\t\t\t// Only reset and clear the webview itself. Don't dispose of the view container\n\t\t\t\t\tthis._activated = false;\n\t\t\t\t\tthis._webview.clear();\n\t\t\t\t\tthis._webviewDisposables.clear();\n\t\t\t\t},\n\n\t\t\t\tshow: (preserveFocus) => {\n\t\t\t\t\tthis.viewService.openView(this.id, !preserveFocus);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tawait this.webviewViewService.resolve(this.id, webviewView, source.token);\n\t\t});\n\t}\n\n\tprotected override updateTitle(value: string | undefined) {\n\t\tthis.setTitle = value;\n\t\tsuper.updateTitle(typeof value === 'string' ? value : this.defaultTitle);\n\t}\n\n\tprotected updateBadge(badge: IViewBadge | undefined) {\n\n\t\tif (this.badge?.value === badge?.value &&\n\t\t\tthis.badge?.tooltip === badge?.tooltip) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.badge = badge;\n\t\tif (badge) {\n\t\t\tconst activity = {\n\t\t\t\tbadge: new NumberBadge(badge.value, () => badge.tooltip),\n\t\t\t\tpriority: 150\n\t\t\t};\n\t\t\tthis.activity.value = this.activityService.showViewActivity(this.id, activity);\n\t\t}\n\t}\n\n\tprivate async withProgress(task: () => Promise<void>): Promise<void> {\n\t\treturn this.progressService.withProgress({ location: this.id, delay: 500 }, task);\n\t}\n\n\toverride onDidScrollRoot() {\n\t\tthis.layoutWebview();\n\t}\n\n\tprivate doLayoutWebview(dimension?: Dimension) {\n\t\tconst webviewEntry = this._webview.value;\n\t\tif (!this._container || !webviewEntry) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._rootContainer || !this._rootContainer.isConnected) {\n\t\t\tthis._rootContainer = this.findRootContainer(this._container);\n\t\t}\n\n\t\twebviewEntry.layoutWebviewOverElement(this._container, dimension, this._rootContainer);\n\t}\n\n\tprivate layoutWebview(dimension?: Dimension) {\n\t\tthis.doLayoutWebview(dimension);\n\t\t// Temporary fix for https://github.com/microsoft/vscode/issues/110450\n\t\t// There is an animation that lasts about 200ms, update the webview positioning once this animation is complete.\n\t\tclearTimeout(this._repositionTimeout);\n\t\tthis._repositionTimeout = setTimeout(() => this.doLayoutWebview(dimension), 200);\n\t}\n\n\tprivate findRootContainer(container: HTMLElement): HTMLElement | undefined {\n\t\treturn findParentWithClass(container, 'monaco-scrollable-element') ?? undefined;\n\t}\n}\n"]}