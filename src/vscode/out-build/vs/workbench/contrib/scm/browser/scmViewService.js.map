{"version":3,"sources":["vs/workbench/contrib/scm/browser/scmViewService.ts"],"names":[],"mappings":"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","file":"scmViewService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { ISCMViewService, ISCMRepository, ISCMService, ISCMViewVisibleRepositoryChangeEvent, ISCMMenus, ISCMProvider, ISCMRepositorySortKey, ISCMRepositorySelectionMode } from '../common/scm.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { SCMMenus } from './menus.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { compareFileNames, comparePaths } from '../../../../base/common/comparers.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { autorun, derived, derivedObservableWithCache, derivedOpts, IObservable, ISettableObservable, latestChangedValue, observableFromEventOpts, observableValue, runOnChange } from '../../../../base/common/observable.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { EditorResourceAccessor } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nimport { observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { getSCMRepositoryIcon } from './util.js';\n\nfunction getProviderStorageKey(provider: ISCMProvider): string {\n\treturn `${provider.providerId}:${provider.label}${provider.rootUri ? `:${provider.rootUri.toString()}` : ''}`;\n}\n\nfunction getRepositoryName(workspaceContextService: IWorkspaceContextService, repository: ISCMRepository): string {\n\tif (!repository.provider.rootUri) {\n\t\treturn repository.provider.label;\n\t}\n\n\tconst folder = workspaceContextService.getWorkspaceFolder(repository.provider.rootUri);\n\treturn folder?.uri.toString() === repository.provider.rootUri.toString() ? folder.name : basename(repository.provider.rootUri);\n}\n\nexport const RepositoryContextKeys = {\n\tRepositorySortKey: new RawContextKey<ISCMRepositorySortKey>('scmRepositorySortKey', ISCMRepositorySortKey.DiscoveryTime),\n\tRepositorySelectionMode: new RawContextKey<ISCMRepositorySelectionMode>('scmRepositorySelectionMode', ISCMRepositorySelectionMode.Single),\n};\n\nexport type RepositoryQuickPickItem = IQuickPickItem & { repository: 'auto' | ISCMRepository };\n\nexport class RepositoryPicker {\n\tprivate readonly _autoQuickPickItem: RepositoryQuickPickItem;\n\n\tconstructor(\n\t\tprivate readonly _placeHolder: string,\n\t\tprivate readonly _autoQuickItemDescription: string,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@ISCMViewService private readonly _scmViewService: ISCMViewService\n\t) {\n\t\tthis._autoQuickPickItem = {\n\t\t\tlabel: localize('auto', \"Auto\"),\n\t\t\tdescription: this._autoQuickItemDescription,\n\t\t\trepository: 'auto'\n\t\t} satisfies RepositoryQuickPickItem;\n\t}\n\n\tasync pickRepository(): Promise<RepositoryQuickPickItem | undefined> {\n\t\tconst picks: (RepositoryQuickPickItem | IQuickPickSeparator)[] = [\n\t\t\tthis._autoQuickPickItem,\n\t\t\t{ type: 'separator' }\n\t\t];\n\n\t\tconst activeRepository = this._scmViewService.activeRepository.get();\n\t\tconst repository = activeRepository?.repository;\n\t\tconst pinned = activeRepository?.pinned === true;\n\n\t\tpicks.push(...this._scmViewService.repositories.map(r => {\n\t\t\tconst icon = getSCMRepositoryIcon(activeRepository, r);\n\n\t\t\treturn {\n\t\t\t\tlabel: r.provider.name,\n\t\t\t\tdescription: r.provider.rootUri?.fsPath,\n\t\t\t\ticonClass: ThemeIcon.asClassName(icon),\n\t\t\t\trepository: r\n\t\t\t};\n\t\t}));\n\n\t\tconst activeItem = pinned\n\t\t\t? picks.find(p => p.type !== 'separator' && p.repository === repository) as RepositoryQuickPickItem | undefined\n\t\t\t: this._autoQuickPickItem;\n\n\t\treturn this._quickInputService.pick(picks, { placeHolder: this._placeHolder, activeItem });\n\t}\n}\n\ninterface ISCMRepositoryView {\n\treadonly repository: ISCMRepository;\n\treadonly discoveryTime: number;\n\tfocused: boolean;\n\tselectionIndex: number;\n}\n\nexport interface ISCMViewServiceState {\n\treadonly all: string[];\n\treadonly visible: number[];\n\treadonly sortKey: ISCMRepositorySortKey;\n}\n\nexport class SCMViewService implements ISCMViewService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\treadonly menus: ISCMMenus;\n\treadonly explorerEnabledConfig: IObservable<boolean>;\n\treadonly selectionModeConfig: IObservable<ISCMRepositorySelectionMode>;\n\treadonly graphShowIncomingChangesConfig: IObservable<boolean>;\n\treadonly graphShowOutgoingChangesConfig: IObservable<boolean>;\n\n\tprivate didFinishLoading: boolean = false;\n\tprivate didSelectRepository: boolean = false;\n\tprivate previousState: ISCMViewServiceState | undefined;\n\tprivate readonly disposables = new DisposableStore();\n\n\tprivate _repositories: ISCMRepositoryView[] = [];\n\n\tget repositories(): ISCMRepository[] {\n\t\treturn this._repositories.map(r => r.repository);\n\t}\n\n\tget visibleRepositories(): ISCMRepository[] {\n\t\t// In order to match the legacy behaviour, when the repositories are sorted by discovery time,\n\t\t// the visible repositories are sorted by the selection index instead of the discovery time.\n\t\tif (this._repositoriesSortKey === ISCMRepositorySortKey.DiscoveryTime) {\n\t\t\treturn this._repositories.filter(r => r.selectionIndex !== -1)\n\t\t\t\t.sort((r1, r2) => r1.selectionIndex - r2.selectionIndex)\n\t\t\t\t.map(r => r.repository);\n\t\t}\n\n\t\treturn this._repositories\n\t\t\t.filter(r => r.selectionIndex !== -1)\n\t\t\t.map(r => r.repository);\n\t}\n\n\tset visibleRepositories(visibleRepositories: ISCMRepository[]) {\n\t\tconst set = new Set(visibleRepositories);\n\t\tconst added = new Set<ISCMRepository>();\n\t\tconst removed = new Set<ISCMRepository>();\n\n\t\tfor (const repositoryView of this._repositories) {\n\t\t\t// Selected -> !Selected\n\t\t\tif (!set.has(repositoryView.repository) && repositoryView.selectionIndex !== -1) {\n\t\t\t\trepositoryView.selectionIndex = -1;\n\t\t\t\tremoved.add(repositoryView.repository);\n\t\t\t}\n\t\t\t// Selected | !Selected -> Selected\n\t\t\tif (set.has(repositoryView.repository)) {\n\t\t\t\tif (repositoryView.selectionIndex === -1) {\n\t\t\t\t\tadded.add(repositoryView.repository);\n\t\t\t\t}\n\t\t\t\trepositoryView.selectionIndex = visibleRepositories.indexOf(repositoryView.repository);\n\t\t\t}\n\t\t}\n\n\t\tif (added.size === 0 && removed.size === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onDidSetVisibleRepositories.fire({ added, removed });\n\n\t\t// Update focus if the focused repository is not visible anymore\n\t\tif (this._repositories.find(r => r.focused && r.selectionIndex === -1)) {\n\t\t\tthis.focus(this._repositories.find(r => r.selectionIndex !== -1)?.repository);\n\t\t}\n\t}\n\n\tprivate _onDidChangeRepositories = new Emitter<ISCMViewVisibleRepositoryChangeEvent>();\n\treadonly onDidChangeRepositories = this._onDidChangeRepositories.event;\n\n\tprivate _onDidSetVisibleRepositories = new Emitter<ISCMViewVisibleRepositoryChangeEvent>();\n\treadonly onDidChangeVisibleRepositories = Event.any(\n\t\tthis._onDidSetVisibleRepositories.event,\n\t\tEvent.debounce(\n\t\t\tthis._onDidChangeRepositories.event,\n\t\t\t(last, e) => {\n\t\t\t\tif (!last) {\n\t\t\t\t\treturn e;\n\t\t\t\t}\n\n\t\t\t\tconst added = new Set(last.added);\n\t\t\t\tconst removed = new Set(last.removed);\n\n\t\t\t\tfor (const repository of e.added) {\n\t\t\t\t\tif (removed.has(repository)) {\n\t\t\t\t\t\tremoved.delete(repository);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tadded.add(repository);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const repository of e.removed) {\n\t\t\t\t\tif (added.has(repository)) {\n\t\t\t\t\t\tadded.delete(repository);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremoved.add(repository);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn { added, removed };\n\t\t\t}, 0, undefined, undefined, undefined, this.disposables)\n\t);\n\n\tget focusedRepository(): ISCMRepository | undefined {\n\t\treturn this._repositories.find(r => r.focused)?.repository;\n\t}\n\n\tprivate _onDidFocusRepository = new Emitter<ISCMRepository | undefined>();\n\treadonly onDidFocusRepository = this._onDidFocusRepository.event;\n\n\treadonly activeRepository: IObservable<{ repository: ISCMRepository; pinned: boolean } | undefined>;\n\tprivate readonly _activeEditorObs: IObservable<EditorInput | undefined>;\n\tprivate readonly _activeEditorRepositoryObs: IObservable<ISCMRepository | undefined>;\n\n\t/**\n\t* The focused repository takes precedence over the active editor repository when the observable\n\t* values are updated in the same transaction (or during the initial read of the observable value).\n\t*/\n\tprivate readonly _activeRepositoryObs: IObservable<ISCMRepository | undefined>;\n\tprivate readonly _activeRepositoryPinnedObs: ISettableObservable<ISCMRepository | undefined>;\n\tprivate readonly _focusedRepositoryObs: IObservable<ISCMRepository | undefined>;\n\n\tprivate _repositoriesSortKey: ISCMRepositorySortKey;\n\tprivate _sortKeyContextKey: IContextKey<ISCMRepositorySortKey>;\n\n\tprivate _selectionModelContextKey: IContextKey<ISCMRepositorySelectionMode>;\n\n\tconstructor(\n\t\t@ISCMService private readonly scmService: ISCMService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService\n\t) {\n\t\tthis.menus = instantiationService.createInstance(SCMMenus);\n\n\t\tconst explorerEnabledConfig = observableConfigValue<boolean>('scm.repositories.explorer', false, this.configurationService);\n\t\tthis.graphShowIncomingChangesConfig = observableConfigValue<boolean>('scm.graph.showIncomingChanges', true, this.configurationService);\n\t\tthis.graphShowOutgoingChangesConfig = observableConfigValue<boolean>('scm.graph.showOutgoingChanges', true, this.configurationService);\n\t\tthis.selectionModeConfig = observableConfigValue<ISCMRepositorySelectionMode>('scm.repositories.selectionMode', ISCMRepositorySelectionMode.Multiple, this.configurationService);\n\t\tthis.explorerEnabledConfig = derived(reader => {\n\t\t\treturn explorerEnabledConfig.read(reader) === true && this.selectionModeConfig.read(reader) === ISCMRepositorySelectionMode.Single;\n\t\t});\n\n\t\ttry {\n\t\t\tthis.previousState = JSON.parse(storageService.get('scm:view:visibleRepositories', StorageScope.WORKSPACE, ''));\n\n\t\t\t// If previously there were multiple visible repositories but the\n\t\t\t// view mode is `single`, only restore the first visible repository.\n\t\t\tif (this.previousState && this.previousState.visible.length > 1 && this.selectionModeConfig.get() === ISCMRepositorySelectionMode.Single) {\n\t\t\t\tthis.previousState = {\n\t\t\t\t\t...this.previousState,\n\t\t\t\t\tvisible: [this.previousState.visible[0]]\n\t\t\t\t};\n\t\t\t}\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\n\t\tthis._focusedRepositoryObs = observableFromEventOpts<ISCMRepository | undefined>(\n\t\t\t{\n\t\t\t\towner: this,\n\t\t\t\tequalsFn: () => false\n\t\t\t}, this.onDidFocusRepository, () => this.focusedRepository);\n\n\t\tthis._activeEditorObs = observableFromEventOpts({\n\t\t\towner: this,\n\t\t\tequalsFn: () => false\n\t\t}, this.editorService.onDidActiveEditorChange, () => this.editorService.activeEditor);\n\n\t\tthis._activeEditorRepositoryObs = derivedObservableWithCache<ISCMRepository | undefined>(this,\n\t\t\t(reader, lastValue) => {\n\t\t\t\tconst activeEditor = this._activeEditorObs.read(reader);\n\t\t\t\tconst activeResource = EditorResourceAccessor.getOriginalUri(activeEditor);\n\t\t\t\tif (!activeResource) {\n\t\t\t\t\treturn lastValue;\n\t\t\t\t}\n\n\t\t\t\tconst repository = this.scmService.getRepository(activeResource);\n\t\t\t\tif (!repository) {\n\t\t\t\t\treturn lastValue;\n\t\t\t\t}\n\n\t\t\t\treturn Object.create(repository);\n\t\t\t});\n\n\t\tthis._activeRepositoryPinnedObs = observableValue<ISCMRepository | undefined>(this, undefined);\n\t\tthis._activeRepositoryObs = latestChangedValue(this, [this._activeEditorRepositoryObs, this._focusedRepositoryObs]);\n\n\t\tthis.activeRepository = derivedOpts<{ repository: ISCMRepository; pinned: boolean } | undefined>({\n\t\t\towner: this,\n\t\t\tequalsFn: (r1, r2) => r1?.repository.id === r2?.repository.id && r1?.pinned === r2?.pinned\n\t\t}, reader => {\n\t\t\tconst activeRepository = this._activeRepositoryObs.read(reader);\n\t\t\tconst activeRepositoryPinned = this._activeRepositoryPinnedObs.read(reader);\n\n\t\t\tconst repository = activeRepositoryPinned ?? activeRepository;\n\t\t\tconst pinned = !!activeRepositoryPinned;\n\n\t\t\treturn repository ? { repository, pinned } : undefined;\n\t\t});\n\n\t\tthis.disposables.add(runOnChange(this.selectionModeConfig, selectionMode => {\n\t\t\tif (selectionMode === ISCMRepositorySelectionMode.Single && this.visibleRepositories.length > 1) {\n\t\t\t\tconst repository = this.visibleRepositories[0];\n\t\t\t\tthis.visibleRepositories = [repository];\n\t\t\t} else if (selectionMode === ISCMRepositorySelectionMode.Multiple && this.repositories.length > 1) {\n\t\t\t\tthis.visibleRepositories = this.repositories;\n\t\t\t}\n\t\t}));\n\n\t\tthis._repositoriesSortKey = this.previousState?.sortKey ?? this.getViewSortOrder();\n\t\tthis._sortKeyContextKey = RepositoryContextKeys.RepositorySortKey.bindTo(contextKeyService);\n\t\tthis._sortKeyContextKey.set(this._repositoriesSortKey);\n\n\t\tthis._selectionModelContextKey = RepositoryContextKeys.RepositorySelectionMode.bindTo(contextKeyService);\n\t\tthis.disposables.add(autorun(reader => {\n\t\t\tconst selectionMode = this.selectionModeConfig.read(reader);\n\t\t\tthis._selectionModelContextKey.set(selectionMode);\n\t\t}));\n\n\t\tscmService.onDidAddRepository(this.onDidAddRepository, this, this.disposables);\n\t\tscmService.onDidRemoveRepository(this.onDidRemoveRepository, this, this.disposables);\n\n\t\tfor (const repository of scmService.repositories) {\n\t\t\tthis.onDidAddRepository(repository);\n\t\t}\n\n\t\tstorageService.onWillSaveState(this.onWillSaveState, this, this.disposables);\n\n\t\t// Maintain repository selection when the extension host restarts.\n\t\t// Extension host is restarted after installing an extension update\n\t\t// or during a profile switch.\n\t\textensionService.onWillStop(() => {\n\t\t\tthis.onWillSaveState();\n\t\t\tthis.didFinishLoading = false;\n\t\t}, this, this.disposables);\n\t}\n\n\tprivate onDidAddRepository(repository: ISCMRepository): void {\n\t\tif (!this.didFinishLoading) {\n\t\t\tthis.eventuallyFinishLoading();\n\t\t}\n\n\t\tconst repositoryView = {\n\t\t\trepository, discoveryTime: Date.now(), focused: false, selectionIndex: -1\n\t\t} satisfies ISCMRepositoryView;\n\n\t\tlet removed: Iterable<ISCMRepository> = Iterable.empty();\n\n\t\tif (this.previousState && !this.didFinishLoading) {\n\t\t\tconst index = this.previousState.all.indexOf(getProviderStorageKey(repository.provider));\n\n\t\t\tif (index === -1) {\n\t\t\t\t// This repository is not part of the previous state which means that it\n\t\t\t\t// was either manually closed in the previous session, or the repository\n\t\t\t\t// was added after the previous session. In this case, we should select\n\t\t\t\t// all of the repositories.\n\t\t\t\tconst added: ISCMRepository[] = [];\n\n\t\t\t\tthis.insertRepositoryView(this._repositories, repositoryView);\n\n\t\t\t\tif (this.selectionModeConfig.get() === ISCMRepositorySelectionMode.Multiple || !this._repositories.find(r => r.selectionIndex !== -1)) {\n\t\t\t\t\t// Multiple selection mode or single selection mode (select first repository)\n\t\t\t\t\tthis._repositories.forEach((repositoryView, index) => {\n\t\t\t\t\t\tif (repositoryView.selectionIndex === -1) {\n\t\t\t\t\t\t\tadded.push(repositoryView.repository);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trepositoryView.selectionIndex = index;\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._onDidChangeRepositories.fire({ added, removed: Iterable.empty() });\n\t\t\t\t}\n\n\t\t\t\tthis.didSelectRepository = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.previousState.visible.indexOf(index) === -1) {\n\t\t\t\t// Explicit selection started\n\t\t\t\tif (this.didSelectRepository) {\n\t\t\t\t\tthis.insertRepositoryView(this._repositories, repositoryView);\n\t\t\t\t\tthis._onDidChangeRepositories.fire({ added: Iterable.empty(), removed: Iterable.empty() });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// First visible repository\n\t\t\t\tif (!this.didSelectRepository) {\n\t\t\t\t\tremoved = [...this.visibleRepositories];\n\t\t\t\t\tthis._repositories.forEach(r => {\n\t\t\t\t\t\tr.focused = false;\n\t\t\t\t\t\tr.selectionIndex = -1;\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.didSelectRepository = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectionModeConfig.get() === ISCMRepositorySelectionMode.Multiple || !this._repositories.find(r => r.selectionIndex !== -1)) {\n\t\t\t// Multiple selection mode or single selection mode (select first repository)\n\t\t\tconst maxSelectionIndex = this.getMaxSelectionIndex();\n\t\t\tthis.insertRepositoryView(this._repositories, { ...repositoryView, selectionIndex: maxSelectionIndex + 1 });\n\t\t\tthis._onDidChangeRepositories.fire({ added: [repositoryView.repository], removed });\n\t\t} else {\n\t\t\t// Single selection mode (add subsequent repository)\n\t\t\tthis.insertRepositoryView(this._repositories, repositoryView);\n\t\t\tthis._onDidChangeRepositories.fire({ added: Iterable.empty(), removed });\n\t\t}\n\n\t\t// Focus repository if nothing is focused\n\t\tif (!this._repositories.find(r => r.focused)) {\n\t\t\tthis.focus(repository);\n\t\t}\n\t}\n\n\tprivate onDidRemoveRepository(repository: ISCMRepository): void {\n\t\tif (!this.didFinishLoading) {\n\t\t\tthis.eventuallyFinishLoading();\n\t\t}\n\n\t\tconst repositoriesIndex = this._repositories.findIndex(r => r.repository === repository);\n\n\t\tif (repositoriesIndex === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet added: Iterable<ISCMRepository> = Iterable.empty();\n\t\tconst removed = this._repositories.splice(repositoriesIndex, 1);\n\n\t\tif (this._repositories.length > 0 && this.visibleRepositories.length === 0) {\n\t\t\tthis._repositories[0].selectionIndex = 0;\n\t\t\tadded = [this._repositories[0].repository];\n\t\t}\n\n\t\tthis._onDidChangeRepositories.fire({ added, removed: removed.map(r => r.repository) });\n\n\t\t// Check if the focused repository was removed\n\t\tif (removed.length === 1 && removed[0].focused && this.visibleRepositories.length > 0) {\n\t\t\tthis.focus(this.visibleRepositories[0]);\n\t\t}\n\n\t\t// Check if the last repository was removed\n\t\tif (removed.length === 1 && this._repositories.length === 0) {\n\t\t\tthis._onDidFocusRepository.fire(undefined);\n\t\t}\n\n\t\t// Check if the pinned repository was removed\n\t\tif (removed.length === 1 && removed[0].repository === this._activeRepositoryPinnedObs.get()) {\n\t\t\tthis._activeRepositoryPinnedObs.set(undefined, undefined);\n\t\t}\n\t}\n\n\tisVisible(repository: ISCMRepository): boolean {\n\t\treturn this._repositories.find(r => r.repository === repository)?.selectionIndex !== -1;\n\t}\n\n\ttoggleVisibility(repository: ISCMRepository, visible?: boolean): void {\n\t\tif (typeof visible === 'undefined') {\n\t\t\tvisible = !this.isVisible(repository);\n\t\t} else if (this.isVisible(repository) === visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (visible) {\n\t\t\tif (this.selectionModeConfig.get() === ISCMRepositorySelectionMode.Single) {\n\t\t\t\tthis.visibleRepositories = [repository];\n\t\t\t} else if (this.selectionModeConfig.get() === ISCMRepositorySelectionMode.Multiple) {\n\t\t\t\tthis.visibleRepositories = [...this.visibleRepositories, repository];\n\t\t\t}\n\t\t} else {\n\t\t\tconst index = this.visibleRepositories.indexOf(repository);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.visibleRepositories = [\n\t\t\t\t\t...this.visibleRepositories.slice(0, index),\n\t\t\t\t\t...this.visibleRepositories.slice(index + 1)\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggleSortKey(sortKey: ISCMRepositorySortKey): void {\n\t\tthis._repositoriesSortKey = sortKey;\n\t\tthis._sortKeyContextKey.set(this._repositoriesSortKey);\n\t\tthis._repositories.sort(this.compareRepositories.bind(this));\n\n\t\tthis._onDidChangeRepositories.fire({ added: Iterable.empty(), removed: Iterable.empty() });\n\t}\n\n\ttoggleSelectionMode(selectionMode: 'multiple' | 'single'): void {\n\t\tthis.configurationService.updateValue('scm.repositories.selectionMode', selectionMode);\n\t}\n\n\tfocus(repository: ISCMRepository | undefined): void {\n\t\tif (repository && !this.isVisible(repository)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._repositories.forEach(r => r.focused = r.repository === repository);\n\n\t\tif (this._repositories.find(r => r.focused)) {\n\t\t\tthis._onDidFocusRepository.fire(repository);\n\t\t}\n\t}\n\n\tpinActiveRepository(repository: ISCMRepository | undefined): void {\n\t\tthis._activeRepositoryPinnedObs.set(repository, undefined);\n\t}\n\n\tprivate compareRepositories(op1: ISCMRepositoryView, op2: ISCMRepositoryView): number {\n\t\t// Sort by discovery time\n\t\tif (this._repositoriesSortKey === ISCMRepositorySortKey.DiscoveryTime) {\n\t\t\treturn op1.discoveryTime - op2.discoveryTime;\n\t\t}\n\n\t\t// Sort by path\n\t\tif (this._repositoriesSortKey === 'path' && op1.repository.provider.rootUri && op2.repository.provider.rootUri) {\n\t\t\treturn comparePaths(op1.repository.provider.rootUri.fsPath, op2.repository.provider.rootUri.fsPath);\n\t\t}\n\n\t\t// Sort by name, path\n\t\tconst name1 = getRepositoryName(this.workspaceContextService, op1.repository);\n\t\tconst name2 = getRepositoryName(this.workspaceContextService, op2.repository);\n\n\t\tconst nameComparison = compareFileNames(name1, name2);\n\t\tif (nameComparison === 0 && op1.repository.provider.rootUri && op2.repository.provider.rootUri) {\n\t\t\treturn comparePaths(op1.repository.provider.rootUri.fsPath, op2.repository.provider.rootUri.fsPath);\n\t\t}\n\n\t\treturn nameComparison;\n\t}\n\n\tprivate getMaxSelectionIndex(): number {\n\t\treturn this._repositories.length === 0 ? -1 :\n\t\t\tMath.max(...this._repositories.map(r => r.selectionIndex));\n\t}\n\n\tprivate getViewSortOrder(): ISCMRepositorySortKey {\n\t\tconst sortOder = this.configurationService.getValue<'discovery time' | 'name' | 'path'>('scm.repositories.sortOrder');\n\t\tswitch (sortOder) {\n\t\t\tcase 'discovery time':\n\t\t\t\treturn ISCMRepositorySortKey.DiscoveryTime;\n\t\t\tcase 'name':\n\t\t\t\treturn ISCMRepositorySortKey.Name;\n\t\t\tcase 'path':\n\t\t\t\treturn ISCMRepositorySortKey.Path;\n\t\t\tdefault:\n\t\t\t\treturn ISCMRepositorySortKey.DiscoveryTime;\n\t\t}\n\t}\n\n\tprivate insertRepositoryView(repositories: ISCMRepositoryView[], repositoryView: ISCMRepositoryView): void {\n\t\tconst index = binarySearch(repositories, repositoryView, this.compareRepositories.bind(this));\n\t\trepositories.splice(index < 0 ? ~index : index, 0, repositoryView);\n\t}\n\n\tprivate onWillSaveState(): void {\n\t\tif (!this.didFinishLoading) { // don't remember state, if the workbench didn't really finish loading\n\t\t\treturn;\n\t\t}\n\n\t\tconst all = this.repositories.map(r => getProviderStorageKey(r.provider));\n\t\tconst visible = this.visibleRepositories.map(r => all.indexOf(getProviderStorageKey(r.provider)));\n\t\tthis.previousState = { all, visible, sortKey: this._repositoriesSortKey } satisfies ISCMViewServiceState;\n\n\t\tthis.storageService.store('scm:view:visibleRepositories', JSON.stringify(this.previousState), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\t@debounce(5000)\n\tprivate eventuallyFinishLoading(): void {\n\t\tthis.finishLoading();\n\t}\n\n\tprivate finishLoading(): void {\n\t\tif (this.didFinishLoading) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.didFinishLoading = true;\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t\tthis._onDidChangeRepositories.dispose();\n\t\tthis._onDidSetVisibleRepositories.dispose();\n\t}\n}\n"]}