{"version":3,"sources":["vs/workbench/contrib/scm/browser/scmHistoryViewPane.ts"],"names":[],"mappings":"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","file":"scmHistoryViewPane.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/scm.css';\nimport { $, append, h, reset } from '../../../../base/browser/dom.js';\nimport { IHoverOptions, IManagedHoverTooltipMarkdownString } from '../../../../base/browser/ui/hover/hover.js';\nimport { IHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { IIdentityProvider, IListVirtualDelegate } from '../../../../base/browser/ui/list/list.js';\nimport { LabelFuzzyScore } from '../../../../base/browser/ui/tree/abstractTree.js';\nimport { IAsyncDataSource, ITreeContextMenuEvent, ITreeDragAndDrop, ITreeElementRenderDetails, ITreeNode } from '../../../../base/browser/ui/tree/tree.js';\nimport { createMatches, FuzzyScore, IMatch } from '../../../../base/common/filters.js';\nimport { combinedDisposable, Disposable, DisposableStore, IDisposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, IObservable, observableValue, waitForState, constObservable, latestChangedValue, observableFromEvent, runOnChange, observableSignal, ISettableObservable } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IHoverService, WorkbenchHoverDelegate } from '../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenEvent, WorkbenchCompressibleAsyncDataTree } from '../../../../platform/list/browser/listService.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { asCssVariable, ColorIdentifier, foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IFileIconTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IViewPaneOptions, ViewAction, ViewPane, ViewPaneShowActions } from '../../../browser/parts/views/viewPane.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../common/views.js';\nimport { renderSCMHistoryItemGraph, toISCMHistoryItemViewModelArray, SWIMLANE_WIDTH, renderSCMHistoryGraphPlaceholder, historyItemHoverLabelForeground, historyItemHoverDefaultLabelBackground, getHistoryItemIndex } from './scmHistory.js';\nimport { getHistoryItemEditorTitle, getProviderKey, isSCMHistoryItemChangeNode, isSCMHistoryItemChangeViewModelTreeElement, isSCMHistoryItemLoadMoreTreeElement, isSCMHistoryItemViewModelTreeElement, isSCMRepository } from './util.js';\nimport { ISCMHistoryItem, ISCMHistoryItemChange, ISCMHistoryItemGraphNode, ISCMHistoryItemRef, ISCMHistoryItemViewModel, ISCMHistoryProvider, SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemLoadMoreTreeElement, SCMHistoryItemViewModelTreeElement, SCMIncomingHistoryItemId, SCMOutgoingHistoryItemId } from '../common/history.js';\nimport { HISTORY_VIEW_PANE_ID, ISCMProvider, ISCMRepository, ISCMService, ISCMViewService, ViewMode } from '../common/scm.js';\nimport { IListAccessibilityProvider } from '../../../../base/browser/ui/list/listWidget.js';\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { IWorkbenchLayoutService, Position } from '../../../services/layout/browser/layoutService.js';\nimport { HoverPosition } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Action2, IMenuService, isIMenuItem, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { Sequencer, Throttler } from '../../../../base/common/async.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ActionRunner, IAction, IActionRunner } from '../../../../base/common/actions.js';\nimport { delta, groupBy } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { ContextKeys } from './scmViewPane.js';\nimport { IActionViewItem } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { IDropdownMenuActionViewItemOptions } from '../../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport { observableConfigValue } from '../../../../platform/observable/common/platformObservableUtils.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { groupBy as groupBy2 } from '../../../../base/common/collections.js';\nimport { getActionBarActions, getFlatContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IResourceLabel, ResourceLabels } from '../../../browser/labels.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { WorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename } from '../../../../base/common/path.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ScmHistoryItemResolver } from '../../multiDiffEditor/browser/scmMultiDiffSourceResolver.js';\nimport { IResourceNode, ResourceTree } from '../../../../base/common/resourceTree.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITreeCompressionDelegate } from '../../../../base/browser/ui/tree/asyncDataTree.js';\nimport { ICompressibleKeyboardNavigationLabelProvider, ICompressibleTreeRenderer } from '../../../../base/browser/ui/tree/objectTree.js';\nimport { ICompressedTreeNode } from '../../../../base/browser/ui/tree/compressedObjectTreeModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IDragAndDropData } from '../../../../base/browser/dnd.js';\nimport { ElementsDragAndDropData, ListViewTargetSector } from '../../../../base/browser/ui/list/listView.js';\nimport { CodeDataTransfers } from '../../../../platform/dnd/browser/dnd.js';\nimport { SCMHistoryItemTransferData } from './scmHistoryChatContext.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\n\nconst PICK_REPOSITORY_ACTION_ID = 'workbench.scm.action.graph.pickRepository';\nconst PICK_HISTORY_ITEM_REFS_ACTION_ID = 'workbench.scm.action.graph.pickHistoryItemRefs';\n\ntype TreeElement = SCMHistoryItemViewModelTreeElement | SCMHistoryItemLoadMoreTreeElement | SCMHistoryItemChangeViewModelTreeElement | IResourceNode<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>;\n\nclass SCMRepositoryActionViewItem extends ActionViewItem {\n\tconstructor(private readonly _repository: ISCMRepository, action: IAction, options?: IDropdownMenuActionViewItemOptions) {\n\t\tsuper(null, action, { ...options, icon: false, label: true });\n\t}\n\n\tprotected override updateLabel(): void {\n\t\tif (this.options.label && this.label) {\n\t\t\tthis.label.classList.add('scm-graph-repository-picker');\n\n\t\t\tconst icon = $('.icon');\n\t\t\tconst iconClassNameArray = ThemeIcon.isThemeIcon(this._repository.provider.iconPath)\n\t\t\t\t? ThemeIcon.asClassNameArray(this._repository.provider.iconPath)\n\t\t\t\t: ThemeIcon.asClassNameArray(Codicon.repo);\n\t\t\ticon.classList.add(...iconClassNameArray);\n\n\t\t\tconst name = $('.name');\n\t\t\tname.textContent = this._repository.provider.name;\n\n\n\t\t\treset(this.label, icon, name);\n\t\t}\n\t}\n\n\tprotected override getTooltip(): string | undefined {\n\t\treturn this._repository.provider.name;\n\t}\n}\n\nclass SCMHistoryItemRefsActionViewItem extends ActionViewItem {\n\tconstructor(\n\t\tprivate readonly _repository: ISCMRepository,\n\t\tprivate readonly _historyItemsFilter: 'all' | 'auto' | ISCMHistoryItemRef[],\n\t\taction: IAction,\n\t\toptions?: IDropdownMenuActionViewItemOptions\n\t) {\n\t\tsuper(null, action, { ...options, icon: false, label: true });\n\t}\n\n\tprotected override updateLabel(): void {\n\t\tif (this.options.label && this.label) {\n\t\t\tthis.label.classList.add('scm-graph-history-item-picker');\n\n\t\t\tconst icon = $('.icon');\n\t\t\ticon.classList.add(...ThemeIcon.asClassNameArray(Codicon.gitBranch));\n\n\t\t\tconst name = $('.name');\n\t\t\tif (this._historyItemsFilter === 'all') {\n\t\t\t\tname.textContent = localize('all', \"All\");\n\t\t\t} else if (this._historyItemsFilter === 'auto') {\n\t\t\t\tname.textContent = localize('auto', \"Auto\");\n\t\t\t} else if (this._historyItemsFilter.length === 1) {\n\t\t\t\tname.textContent = this._historyItemsFilter[0].name;\n\t\t\t} else {\n\t\t\t\tname.textContent = localize('items', \"{0} Items\", this._historyItemsFilter.length);\n\t\t\t}\n\n\t\t\treset(this.label, icon, name);\n\t\t}\n\t}\n\n\tprotected override getTooltip(): string | undefined {\n\t\tif (this._historyItemsFilter === 'all') {\n\t\t\treturn localize('allHistoryItemRefs', \"All history item references\");\n\t\t} else if (this._historyItemsFilter === 'auto') {\n\t\t\tconst historyProvider = this._repository.provider.historyProvider.get();\n\n\t\t\treturn [\n\t\t\t\thistoryProvider?.historyItemRef.get()?.name,\n\t\t\t\thistoryProvider?.historyItemRemoteRef.get()?.name,\n\t\t\t\thistoryProvider?.historyItemBaseRef.get()?.name\n\t\t\t].filter(ref => !!ref).join(', ');\n\t\t} else if (this._historyItemsFilter.length === 1) {\n\t\t\treturn this._historyItemsFilter[0].name;\n\t\t} else {\n\t\t\treturn this._historyItemsFilter.map(ref => ref.name).join(', ');\n\t\t}\n\t}\n}\n\nregisterAction2(class extends ViewAction<SCMHistoryViewPane> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: PICK_REPOSITORY_ACTION_ID,\n\t\t\ttitle: localize('repositoryPicker', \"Repository Picker\"),\n\t\t\tviewId: HISTORY_VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMHistoryTitle,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tContextKeyExpr.has('scm.providerCount'),\n\t\t\t\t\tContextKeyExpr.greater('scm.providerCount', 1),\n\t\t\t\t\tContextKeyExpr.equals('config.scm.repositories.selectionMode', 'multiple')),\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 0\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMHistoryViewPane): Promise<void> {\n\t\tview.pickRepository();\n\t}\n});\n\nregisterAction2(class extends ViewAction<SCMHistoryViewPane> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: PICK_HISTORY_ITEM_REFS_ACTION_ID,\n\t\t\ttitle: localize('referencePicker', \"History Item Reference Picker\"),\n\t\t\ticon: Codicon.gitBranch,\n\t\t\tviewId: HISTORY_VIEW_PANE_ID,\n\t\t\tprecondition: ContextKeys.SCMHistoryItemCount.notEqualsTo(0),\n\t\t\tf1: false,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMHistoryTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMHistoryViewPane): Promise<void> {\n\t\tview.pickHistoryItemRef();\n\t}\n});\n\nregisterAction2(class extends ViewAction<SCMHistoryViewPane> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.graph.revealCurrentHistoryItem',\n\t\t\ttitle: localize('goToCurrentHistoryItem', \"Go to Current History Item\"),\n\t\t\ticon: Codicon.target,\n\t\t\tviewId: HISTORY_VIEW_PANE_ID,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tContextKeys.SCMHistoryItemCount.notEqualsTo(0),\n\t\t\t\tContextKeys.SCMCurrentHistoryItemRefInFilter.isEqualTo(true)),\n\t\t\tf1: false,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMHistoryTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 2\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMHistoryViewPane): Promise<void> {\n\t\tview.revealCurrentHistoryItem();\n\t}\n});\n\nregisterAction2(class extends ViewAction<SCMHistoryViewPane> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.graph.refresh',\n\t\t\ttitle: localize('refreshGraph', \"Refresh\"),\n\t\t\tviewId: HISTORY_VIEW_PANE_ID,\n\t\t\tf1: false,\n\t\t\ticon: Codicon.refresh,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.SCMHistoryTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1000\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMHistoryViewPane): Promise<void> {\n\t\tview.refresh();\n\t}\n});\n\nregisterAction2(class extends ViewAction<SCMHistoryViewPane> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.graph.setListViewMode',\n\t\t\ttitle: localize('setListViewMode', \"View as List\"),\n\t\t\tviewId: HISTORY_VIEW_PANE_ID,\n\t\t\ttoggled: ContextKeys.SCMHistoryViewMode.isEqualTo(ViewMode.List),\n\t\t\tmenu: { id: MenuId.SCMHistoryTitle, group: '9_viewmode', order: 1 },\n\t\t\tf1: false\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMHistoryViewPane): Promise<void> {\n\t\tview.setViewMode(ViewMode.List);\n\t}\n});\n\nregisterAction2(class extends ViewAction<SCMHistoryViewPane> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.graph.setTreeViewMode',\n\t\t\ttitle: localize('setTreeViewMode', \"View as Tree\"),\n\t\t\tviewId: HISTORY_VIEW_PANE_ID,\n\t\t\ttoggled: ContextKeys.SCMHistoryViewMode.isEqualTo(ViewMode.Tree),\n\t\t\tmenu: { id: MenuId.SCMHistoryTitle, group: '9_viewmode', order: 2 },\n\t\t\tf1: false\n\t\t});\n\t}\n\n\tasync runInView(_: ServicesAccessor, view: SCMHistoryViewPane): Promise<void> {\n\t\tview.setViewMode(ViewMode.Tree);\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.graph.viewChanges',\n\t\t\ttitle: localize('openChanges', \"Open Changes\"),\n\t\t\ticon: Codicon.diffMultiple,\n\t\t\tf1: false,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SCMHistoryItemContext,\n\t\t\t\t\twhen: ContextKeyExpr.equals('config.multiDiffEditor.experimental.enabled', true),\n\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\torder: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SCMHistoryItemContext,\n\t\t\t\t\twhen: ContextKeyExpr.equals('config.multiDiffEditor.experimental.enabled', true),\n\t\t\t\t\tgroup: '0_view',\n\t\t\t\t\torder: 1\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, provider: ISCMProvider, ...historyItems: ISCMHistoryItem[]) {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst historyProvider = provider.historyProvider.get();\n\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\tconst historyItemRemoteRef = historyProvider?.historyItemRemoteRef.get();\n\n\t\tif (!provider || !historyProvider || !historyItemRef || historyItems.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst historyItem = historyItems[0];\n\t\tlet title: string | undefined, historyItemId: string | undefined, historyItemParentId: string | undefined;\n\n\t\tif (historyItemRemoteRef && (historyItem.id === SCMIncomingHistoryItemId || historyItem.id === SCMOutgoingHistoryItemId)) {\n\t\t\t// Incoming/Outgoing changes history item\n\t\t\tconst mergeBase = await historyProvider.resolveHistoryItemRefsCommonAncestor([\n\t\t\t\thistoryItemRef.name,\n\t\t\t\thistoryItemRemoteRef.name\n\t\t\t]);\n\n\t\t\tif (mergeBase && historyItem.id === SCMIncomingHistoryItemId) {\n\t\t\t\t// Incoming changes history item\n\t\t\t\ttitle = `${historyItem.subject} - ${historyItemRef.name} \\u2194 ${historyItemRemoteRef.name}`;\n\t\t\t\thistoryItemId = historyItemRemoteRef.id;\n\t\t\t\thistoryItemParentId = mergeBase;\n\t\t\t} else if (mergeBase && historyItem.id === SCMOutgoingHistoryItemId) {\n\t\t\t\t// Outgoing changes history item\n\t\t\t\ttitle = `${historyItem.subject} - ${historyItemRemoteRef.name} \\u2194 ${historyItemRef.name}`;\n\t\t\t\thistoryItemId = historyItemRef.id;\n\t\t\t\thistoryItemParentId = mergeBase;\n\t\t\t}\n\t\t} else {\n\t\t\ttitle = getHistoryItemEditorTitle(historyItem);\n\t\t\thistoryItemId = historyItem.id;\n\n\t\t\tif (historyItem.parentIds.length > 0) {\n\t\t\t\t// History item right above the incoming changes history item\n\t\t\t\tif (historyItem.parentIds[0] === SCMIncomingHistoryItemId && historyItemRemoteRef) {\n\t\t\t\t\thistoryItemParentId = await historyProvider.resolveHistoryItemRefsCommonAncestor([\n\t\t\t\t\t\thistoryItemRef.name,\n\t\t\t\t\t\thistoryItemRemoteRef.name\n\t\t\t\t\t]);\n\t\t\t\t} else {\n\t\t\t\t\thistoryItemParentId = historyItem.parentIds[0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!title || !historyItemId || !historyItemParentId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst multiDiffSourceUri = ScmHistoryItemResolver.getMultiDiffSourceUri(provider, historyItemId, historyItemParentId, '');\n\t\tcommandService.executeCommand('_workbench.openMultiDiffEditor', { title, multiDiffSourceUri });\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.scm.action.graph.openFile',\n\t\t\ttitle: localize('openFile', \"Open File\"),\n\t\t\ticon: Codicon.goToFile,\n\t\t\tf1: false,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SCMHistoryItemChangeContext,\n\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\torder: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.SCMHistoryItemChangeContext,\n\t\t\t\t\tgroup: '0_view',\n\t\t\t\t\torder: 1\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, historyItem: ISCMHistoryItem, historyItemChange: ISCMHistoryItemChange) {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tif (!historyItem || !historyItemChange.modifiedUri) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet version: string;\n\t\tif (historyItem.id === SCMIncomingHistoryItemId) {\n\t\t\tversion = localize('incomingChanges', \"Incoming Changes\");\n\t\t} else if (historyItem.id === SCMOutgoingHistoryItemId) {\n\t\t\tversion = localize('outgoingChanges', \"Outgoing Changes\");\n\t\t} else {\n\t\t\tversion = historyItem.displayId ?? historyItem.id;\n\t\t}\n\n\t\tconst name = basename(historyItemChange.modifiedUri.fsPath);\n\t\tawait editorService.openEditor({ resource: historyItemChange.modifiedUri, label: `${name} (${version})` });\n\t}\n});\n\nclass ListDelegate implements IListVirtualDelegate<TreeElement> {\n\n\tgetHeight(): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: TreeElement): string {\n\t\tif (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\treturn HistoryItemRenderer.TEMPLATE_ID;\n\t\t} else if (isSCMHistoryItemChangeViewModelTreeElement(element) || isSCMHistoryItemChangeNode(element)) {\n\t\t\treturn HistoryItemChangeRenderer.TEMPLATE_ID;\n\t\t} else if (isSCMHistoryItemLoadMoreTreeElement(element)) {\n\t\t\treturn HistoryItemLoadMoreRenderer.TEMPLATE_ID;\n\t\t} else {\n\t\t\tthrow new Error('Unknown element');\n\t\t}\n\t}\n}\n\ninterface HistoryItemTemplate {\n\treadonly element: HTMLElement;\n\treadonly label: IconLabel;\n\treadonly graphContainer: HTMLElement;\n\treadonly actionBar: WorkbenchToolBar;\n\treadonly labelContainer: HTMLElement;\n\treadonly elementDisposables: DisposableStore;\n\treadonly disposables: IDisposable;\n}\n\nclass HistoryItemRenderer implements ICompressibleTreeRenderer<SCMHistoryItemViewModelTreeElement, LabelFuzzyScore, HistoryItemTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'history-item';\n\tget templateId(): string { return HistoryItemRenderer.TEMPLATE_ID; }\n\n\tprivate readonly _badgesConfig: IObservable<'all' | 'filter'>;\n\n\tconstructor(\n\t\tprivate readonly hoverDelegate: IHoverDelegate,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService\n\t) {\n\t\tthis._badgesConfig = observableConfigValue<'all' | 'filter'>('scm.graph.badges', 'filter', this._configurationService);\n\t}\n\n\trenderTemplate(container: HTMLElement): HistoryItemTemplate {\n\t\tconst element = append(container, $('.history-item'));\n\t\tconst graphContainer = append(element, $('.graph-container'));\n\t\tconst iconLabel = new IconLabel(element, {\n\t\t\tsupportIcons: true, supportHighlights: true, supportDescriptionHighlights: true\n\t\t});\n\n\t\tconst labelContainer = append(element, $('.label-container'));\n\n\t\tconst actionsContainer = append(element, $('.actions'));\n\t\tconst actionBar = new WorkbenchToolBar(actionsContainer, undefined, this._menuService, this._contextKeyService, this._contextMenuService, this._keybindingService, this._commandService, this._telemetryService);\n\n\t\treturn { element, graphContainer, label: iconLabel, labelContainer, actionBar, elementDisposables: new DisposableStore(), disposables: combinedDisposable(iconLabel, actionBar) };\n\t}\n\n\trenderElement(node: ITreeNode<SCMHistoryItemViewModelTreeElement, LabelFuzzyScore>, index: number, templateData: HistoryItemTemplate): void {\n\t\tconst provider = node.element.repository.provider;\n\t\tconst historyItemViewModel = node.element.historyItemViewModel;\n\t\tconst historyItem = historyItemViewModel.historyItem;\n\n\t\tconst hoverContent = {\n\t\t\tmarkdown: historyItem.tooltip ?? historyItem.message,\n\t\t\tmarkdownNotSupportedFallback: historyItem.message\n\t\t} satisfies IManagedHoverTooltipMarkdownString;\n\t\tconst historyItemHover = this._hoverService.setupManagedHover(this.hoverDelegate, templateData.element, hoverContent);\n\t\ttemplateData.elementDisposables.add(historyItemHover);\n\n\t\ttemplateData.graphContainer.textContent = '';\n\t\ttemplateData.graphContainer.classList.toggle('current', historyItemViewModel.kind === 'HEAD');\n\t\ttemplateData.graphContainer.classList.toggle('incoming-changes', historyItemViewModel.kind === 'incoming-changes');\n\t\ttemplateData.graphContainer.classList.toggle('outgoing-changes', historyItemViewModel.kind === 'outgoing-changes');\n\t\ttemplateData.graphContainer.appendChild(renderSCMHistoryItemGraph(historyItemViewModel));\n\n\t\tconst historyItemRef = provider.historyProvider.get()?.historyItemRef?.get();\n\t\tconst extraClasses = historyItemRef?.revision === historyItem.id ? ['history-item-current'] : [];\n\t\tconst [matches, descriptionMatches] = this._processMatches(historyItemViewModel, node.filterData);\n\t\ttemplateData.label.setLabel(historyItem.subject, historyItem.author, { matches, descriptionMatches, extraClasses });\n\n\t\tthis._renderBadges(historyItem, templateData);\n\n\t\tconst actions = this._menuService.getMenuActions(\n\t\t\tMenuId.SCMHistoryItemContext,\n\t\t\tthis._contextKeyService,\n\t\t\t{ arg: provider, shouldForwardArgs: true });\n\t\ttemplateData.actionBar.context = historyItem;\n\t\ttemplateData.actionBar.setActions(getActionBarActions(actions, 'inline').primary);\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<SCMHistoryItemViewModelTreeElement>, LabelFuzzyScore>, index: number, templateData: HistoryItemTemplate): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tprivate _renderBadges(historyItem: ISCMHistoryItem, templateData: HistoryItemTemplate): void {\n\t\ttemplateData.elementDisposables.add(autorun(reader => {\n\t\t\tconst labelConfig = this._badgesConfig.read(reader);\n\n\t\t\ttemplateData.labelContainer.replaceChildren();\n\n\t\t\tconst references = historyItem.references ?\n\t\t\t\thistoryItem.references.slice(0) : [];\n\n\t\t\t// If the first reference is colored, we render it\n\t\t\t// separately since we have to show the description\n\t\t\t// for the first colored reference.\n\t\t\tif (references.length > 0 && references[0].color) {\n\t\t\t\tthis._renderBadge([references[0]], true, templateData);\n\n\t\t\t\t// Remove the rendered reference from the collection\n\t\t\t\treferences.splice(0, 1);\n\t\t\t}\n\n\t\t\t// Group history item references by color\n\t\t\tconst historyItemRefsByColor = groupBy2(references, ref => ref.color ? ref.color : '');\n\n\t\t\tfor (const [key, historyItemRefs] of Object.entries(historyItemRefsByColor)) {\n\t\t\t\t// If needed skip badges without a color\n\t\t\t\tif (key === '' && labelConfig !== 'all') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!historyItemRefs) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Group history item references by icon\n\t\t\t\tconst historyItemRefByIconId = groupBy2(historyItemRefs, ref => ThemeIcon.isThemeIcon(ref.icon) ? ref.icon.id : '');\n\t\t\t\tfor (const [key, historyItemRefs] of Object.entries(historyItemRefByIconId)) {\n\t\t\t\t\t// Skip badges without an icon\n\t\t\t\t\tif (key === '' || !historyItemRefs) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._renderBadge(historyItemRefs, false, templateData);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _renderBadge(historyItemRefs: ISCMHistoryItemRef[], showDescription: boolean, templateData: HistoryItemTemplate): void {\n\t\tif (historyItemRefs.length === 0 || !ThemeIcon.isThemeIcon(historyItemRefs[0].icon)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elements = h('div.label', {\n\t\t\tstyle: {\n\t\t\t\tcolor: historyItemRefs[0].color ? asCssVariable(historyItemHoverLabelForeground) : asCssVariable(foreground),\n\t\t\t\tbackgroundColor: historyItemRefs[0].color ? asCssVariable(historyItemRefs[0].color) : asCssVariable(historyItemHoverDefaultLabelBackground)\n\t\t\t}\n\t\t}, [\n\t\t\th('div.count@count', {\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: historyItemRefs.length > 1 ? '' : 'none'\n\t\t\t\t}\n\t\t\t}),\n\t\t\th('div.icon@icon'),\n\t\t\th('div.description@description', {\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: showDescription ? '' : 'none'\n\t\t\t\t}\n\t\t\t})\n\t\t]);\n\n\t\telements.count.textContent = historyItemRefs.length > 1 ? historyItemRefs.length.toString() : '';\n\t\telements.icon.classList.add(...ThemeIcon.asClassNameArray(historyItemRefs[0].icon));\n\t\telements.description.textContent = showDescription ? historyItemRefs[0].name : '';\n\n\t\tappend(templateData.labelContainer, elements.root);\n\t}\n\n\tprivate _processMatches(historyItemViewModel: ISCMHistoryItemViewModel, filterData: LabelFuzzyScore | undefined): [IMatch[] | undefined, IMatch[] | undefined] {\n\t\tif (!filterData) {\n\t\t\treturn [undefined, undefined];\n\t\t}\n\n\t\treturn [\n\t\t\thistoryItemViewModel.historyItem.message === filterData.label ? createMatches(filterData.score) : undefined,\n\t\t\thistoryItemViewModel.historyItem.author === filterData.label ? createMatches(filterData.score) : undefined\n\t\t];\n\t}\n\n\tdisposeElement(element: ITreeNode<SCMHistoryItemViewModelTreeElement, LabelFuzzyScore>, index: number, templateData: HistoryItemTemplate): void {\n\t\ttemplateData.elementDisposables.clear();\n\t}\n\n\tdisposeTemplate(templateData: HistoryItemTemplate): void {\n\t\ttemplateData.elementDisposables.dispose();\n\t\ttemplateData.disposables.dispose();\n\t}\n}\n\ninterface HistoryItemChangeTemplate {\n\treadonly rowElement: HTMLElement;\n\treadonly element: HTMLElement;\n\treadonly graphPlaceholder: HTMLElement;\n\treadonly resourceLabel: IResourceLabel;\n\treadonly actionBar: WorkbenchToolBar;\n\treadonly disposables: IDisposable;\n}\n\nclass HistoryItemChangeRenderer implements ICompressibleTreeRenderer<SCMHistoryItemChangeViewModelTreeElement | IResourceNode<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>, void, HistoryItemChangeTemplate> {\n\tstatic readonly TEMPLATE_ID = 'history-item-change';\n\tget templateId(): string { return HistoryItemChangeRenderer.TEMPLATE_ID; }\n\n\tconstructor(\n\t\tprivate readonly viewMode: () => ViewMode,\n\t\tprivate readonly resourceLabels: ResourceLabels,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IContextMenuService private readonly _contextMenuService: IContextMenuService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): HistoryItemChangeTemplate {\n\t\tconst rowElement = container.parentElement! as HTMLElement;\n\t\tconst element = append(container, $('.history-item-change'));\n\t\tconst graphPlaceholder = append(element, $('.graph-placeholder'));\n\n\t\tconst labelContainer = append(element, $('.label-container'));\n\t\tconst resourceLabel = this.resourceLabels.create(labelContainer, {\n\t\t\tsupportDescriptionHighlights: true, supportHighlights: true\n\t\t});\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst actionsContainer = append(resourceLabel.element, $('.actions'));\n\t\tconst actionBar = new WorkbenchToolBar(actionsContainer, undefined, this._menuService, this._contextKeyService, this._contextMenuService, this._keybindingService, this._commandService, this._telemetryService);\n\t\tdisposables.add(actionBar);\n\n\t\treturn { rowElement, element, graphPlaceholder, resourceLabel, actionBar, disposables };\n\t}\n\n\trenderElement(elementOrNode: ITreeNode<SCMHistoryItemChangeViewModelTreeElement | IResourceNode<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>, void>, index: number, templateData: HistoryItemChangeTemplate, details?: ITreeElementRenderDetails | undefined): void {\n\t\tconst historyItemViewModel = isSCMHistoryItemChangeViewModelTreeElement(elementOrNode.element) ? elementOrNode.element.historyItemViewModel : elementOrNode.element.context.historyItemViewModel;\n\t\tconst historyItemChange = isSCMHistoryItemChangeViewModelTreeElement(elementOrNode.element) ? elementOrNode.element.historyItemChange : elementOrNode.element;\n\t\tconst graphColumns = isSCMHistoryItemChangeViewModelTreeElement(elementOrNode.element) ? elementOrNode.element.graphColumns : elementOrNode.element.context.historyItemViewModel.outputSwimlanes;\n\n\t\tthis._renderGraphPlaceholder(templateData, historyItemViewModel, graphColumns);\n\n\t\tconst hidePath = this.viewMode() === ViewMode.Tree;\n\t\tconst fileKind = isSCMHistoryItemChangeViewModelTreeElement(elementOrNode.element) ? FileKind.FILE : FileKind.FOLDER;\n\t\ttemplateData.resourceLabel.setFile(historyItemChange.uri, { fileDecorations: { colors: false, badges: true }, fileKind, hidePath });\n\n\t\tif (fileKind === FileKind.FILE) {\n\t\t\tconst actions = this._menuService.getMenuActions(\n\t\t\t\tMenuId.SCMHistoryItemChangeContext,\n\t\t\t\tthis._contextKeyService,\n\t\t\t\t{ arg: historyItemViewModel.historyItem, shouldForwardArgs: true });\n\n\t\t\ttemplateData.actionBar.context = historyItemChange;\n\t\t\ttemplateData.actionBar.setActions(getActionBarActions(actions, 'inline').primary);\n\t\t} else {\n\t\t\ttemplateData.actionBar.context = undefined;\n\t\t\ttemplateData.actionBar.setActions([]);\n\t\t}\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<SCMHistoryItemChangeViewModelTreeElement | IResourceNode<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>>, void>, index: number, templateData: HistoryItemChangeTemplate, details?: ITreeElementRenderDetails | undefined): void {\n\t\tconst compressed = node.element as ICompressedTreeNode<IResourceNode<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>>;\n\t\tconst historyItemViewModel = compressed.elements[0].context.historyItemViewModel;\n\t\tconst graphColumns = compressed.elements[0].context.historyItemViewModel.outputSwimlanes;\n\n\t\tthis._renderGraphPlaceholder(templateData, historyItemViewModel, graphColumns);\n\n\t\tconst label = compressed.elements.map(e => e.name);\n\t\tconst folder = compressed.elements[compressed.elements.length - 1];\n\t\ttemplateData.resourceLabel.setResource({ resource: folder.uri, name: label }, {\n\t\t\tfileDecorations: { colors: false, badges: true },\n\t\t\tfileKind: FileKind.FOLDER,\n\t\t\tseparator: this._labelService.getSeparator(folder.uri.scheme)\n\t\t});\n\n\t\ttemplateData.actionBar.context = undefined;\n\t\ttemplateData.actionBar.setActions([]);\n\t}\n\n\tprivate _renderGraphPlaceholder(templateData: HistoryItemChangeTemplate, historyItemViewModel: ISCMHistoryItemViewModel, graphColumns: ISCMHistoryItemGraphNode[]): void {\n\t\tconst graphPlaceholderSvgWidth = SWIMLANE_WIDTH * (graphColumns.length + 1);\n\t\tconst marginLeft = graphPlaceholderSvgWidth - 16 /* .monaco-tl-indent left */;\n\t\ttemplateData.rowElement.style.marginLeft = `${marginLeft}px`;\n\n\t\ttemplateData.graphPlaceholder.textContent = '';\n\t\ttemplateData.graphPlaceholder.style.left = `${-1 * marginLeft}px`;\n\t\ttemplateData.graphPlaceholder.style.width = `${graphPlaceholderSvgWidth}px`;\n\t\ttemplateData.graphPlaceholder.appendChild(renderSCMHistoryGraphPlaceholder(graphColumns, getHistoryItemIndex(historyItemViewModel)));\n\t}\n\n\tdisposeTemplate(templateData: HistoryItemChangeTemplate): void {\n\t\ttemplateData.disposables.dispose();\n\t}\n}\n\ninterface LoadMoreTemplate {\n\treadonly element: HTMLElement;\n\treadonly graphPlaceholder: HTMLElement;\n\treadonly historyItemPlaceholderContainer: HTMLElement;\n\treadonly historyItemPlaceholderLabel: IconLabel;\n\treadonly elementDisposables: DisposableStore;\n\treadonly disposables: IDisposable;\n}\n\nclass HistoryItemLoadMoreRenderer implements ICompressibleTreeRenderer<SCMHistoryItemLoadMoreTreeElement, void, LoadMoreTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'historyItemLoadMore';\n\tget templateId(): string { return HistoryItemLoadMoreRenderer.TEMPLATE_ID; }\n\n\tconstructor(\n\t\tprivate readonly _isLoadingMore: IObservable<boolean>,\n\t\tprivate readonly _loadMoreCallback: () => void,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService\n\t) { }\n\n\trenderTemplate(container: HTMLElement): LoadMoreTemplate {\n\t\tconst element = append(container, $('.history-item-load-more'));\n\t\tconst graphPlaceholder = append(element, $('.graph-placeholder'));\n\t\tconst historyItemPlaceholderContainer = append(element, $('.history-item-placeholder'));\n\t\tconst historyItemPlaceholderLabel = new IconLabel(historyItemPlaceholderContainer, { supportIcons: true });\n\n\t\treturn { element, graphPlaceholder, historyItemPlaceholderContainer, historyItemPlaceholderLabel, elementDisposables: new DisposableStore(), disposables: historyItemPlaceholderLabel };\n\t}\n\n\trenderElement(element: ITreeNode<SCMHistoryItemLoadMoreTreeElement, void>, index: number, templateData: LoadMoreTemplate): void {\n\t\ttemplateData.graphPlaceholder.textContent = '';\n\t\ttemplateData.graphPlaceholder.style.width = `${SWIMLANE_WIDTH * (element.element.graphColumns.length + 1)}px`;\n\t\ttemplateData.graphPlaceholder.appendChild(renderSCMHistoryGraphPlaceholder(element.element.graphColumns));\n\n\t\tconst pageOnScroll = this._configurationService.getValue<boolean>('scm.graph.pageOnScroll') === true;\n\t\ttemplateData.historyItemPlaceholderContainer.classList.toggle('shimmer', pageOnScroll);\n\n\t\tif (pageOnScroll) {\n\t\t\ttemplateData.historyItemPlaceholderLabel.setLabel('');\n\t\t\tthis._loadMoreCallback();\n\t\t} else {\n\t\t\ttemplateData.elementDisposables.add(autorun(reader => {\n\t\t\t\tconst isLoadingMore = this._isLoadingMore.read(reader);\n\t\t\t\tconst icon = `$(${isLoadingMore ? 'loading~spin' : 'fold-down'})`;\n\n\t\t\t\ttemplateData.historyItemPlaceholderLabel.setLabel(localize('loadMore', \"{0} Load More...\", icon));\n\t\t\t}));\n\t\t}\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<SCMHistoryItemLoadMoreTreeElement>, void>, index: number, templateData: LoadMoreTemplate): void {\n\t\tthrow new Error('Should never happen since node is incompressible');\n\t}\n\n\tdisposeElement(element: ITreeNode<SCMHistoryItemLoadMoreTreeElement, void>, index: number, templateData: LoadMoreTemplate): void {\n\t\ttemplateData.elementDisposables.clear();\n\t}\n\n\tdisposeTemplate(templateData: LoadMoreTemplate): void {\n\t\ttemplateData.elementDisposables.dispose();\n\t\ttemplateData.disposables.dispose();\n\t}\n}\n\nclass HistoryItemHoverDelegate extends WorkbenchHoverDelegate {\n\tconstructor(\n\t\tprivate readonly _viewContainerLocation: ViewContainerLocation | null,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IHoverService hoverService: IHoverService,\n\n\t) {\n\t\tsuper(_viewContainerLocation === ViewContainerLocation.Panel ? 'mouse' : 'element', {\n\t\t\tinstantHover: _viewContainerLocation !== ViewContainerLocation.Panel\n\t\t}, () => this.getHoverOptions(), configurationService, hoverService);\n\t}\n\n\tprivate getHoverOptions(): Partial<IHoverOptions> {\n\t\tconst sideBarPosition = this.layoutService.getSideBarPosition();\n\n\t\tlet hoverPosition: HoverPosition;\n\t\tif (this._viewContainerLocation === ViewContainerLocation.Sidebar) {\n\t\t\thoverPosition = sideBarPosition === Position.LEFT ? HoverPosition.RIGHT : HoverPosition.LEFT;\n\t\t} else if (this._viewContainerLocation === ViewContainerLocation.AuxiliaryBar) {\n\t\t\thoverPosition = sideBarPosition === Position.LEFT ? HoverPosition.LEFT : HoverPosition.RIGHT;\n\t\t} else {\n\t\t\thoverPosition = HoverPosition.RIGHT;\n\t\t}\n\n\t\treturn { additionalClasses: ['history-item-hover'], position: { hoverPosition, forcePosition: true } };\n\t}\n}\n\nclass SCMHistoryViewPaneActionRunner extends ActionRunner {\n\tconstructor(@IProgressService private readonly _progressService: IProgressService) {\n\t\tsuper();\n\t}\n\n\tprotected override runAction(action: IAction, context?: unknown): Promise<void> {\n\t\treturn this._progressService.withProgress({ location: HISTORY_VIEW_PANE_ID },\n\t\t\tasync () => await super.runAction(action, context));\n\t}\n}\n\nclass SCMHistoryTreeAccessibilityProvider implements IListAccessibilityProvider<TreeElement> {\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('scm history', \"Source Control History\");\n\t}\n\n\tgetAriaLabel(element: TreeElement): string {\n\t\tif (isSCMRepository(element)) {\n\t\t\treturn `${element.provider.name} ${element.provider.label}`;\n\t\t} else if (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\t\t\treturn `${stripIcons(historyItem.message).trim()}${historyItem.author ? `, ${historyItem.author}` : ''}`;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n}\n\nclass SCMHistoryTreeIdentityProvider implements IIdentityProvider<TreeElement> {\n\n\tgetId(element: TreeElement): string {\n\t\tif (isSCMRepository(element)) {\n\t\t\tconst provider = element.provider;\n\t\t\treturn `repo:${provider.id}`;\n\t\t} else if (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\tconst provider = element.repository.provider;\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\t\t\treturn `historyItem:${provider.id}/${historyItem.id}/${historyItem.parentIds.join(',')}`;\n\t\t} else if (isSCMHistoryItemChangeViewModelTreeElement(element)) {\n\t\t\tconst provider = element.repository.provider;\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\t\t\treturn `historyItemChange:${provider.id}/${historyItem.id}/${historyItem.parentIds.join(',')}/${element.historyItemChange.uri.fsPath}`;\n\t\t} else if (isSCMHistoryItemChangeNode(element)) {\n\t\t\tconst provider = element.context.repository.provider;\n\t\t\tconst historyItem = element.context.historyItemViewModel.historyItem;\n\t\t\treturn `historyItemChangeFolder:${provider.id}/${historyItem.id}/${historyItem.parentIds.join(',')}/${element.uri.fsPath}`;\n\t\t} else if (isSCMHistoryItemLoadMoreTreeElement(element)) {\n\t\t\tconst provider = element.repository.provider;\n\t\t\treturn `historyItemLoadMore:${provider.id}`;\n\t\t} else {\n\t\t\tthrow new Error('Invalid tree element');\n\t\t}\n\t}\n}\n\nclass SCMHistoryTreeKeyboardNavigationLabelProvider implements ICompressibleKeyboardNavigationLabelProvider<TreeElement> {\n\tgetKeyboardNavigationLabel(element: TreeElement): { toString(): string } | { toString(): string }[] | undefined {\n\t\tif (isSCMRepository(element)) {\n\t\t\treturn undefined;\n\t\t} else if (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\t// For a history item we want to match both the message and\n\t\t\t// the author. A match in the message takes precedence over\n\t\t\t// a match in the author.\n\t\t\treturn [element.historyItemViewModel.historyItem.message, element.historyItemViewModel.historyItem.author];\n\t\t} else if (isSCMHistoryItemLoadMoreTreeElement(element)) {\n\t\t\t// We don't want to match the load more element\n\t\t\treturn '';\n\t\t} else {\n\t\t\tthrow new Error('Invalid tree element');\n\t\t}\n\t}\n\n\tgetCompressedNodeKeyboardNavigationLabel(elements: TreeElement[]): { toString(): string | undefined } | undefined {\n\t\tconst folders = elements as IResourceNode<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>[];\n\t\treturn folders.map(e => e.name).join('/');\n\t}\n}\n\nclass SCMHistoryTreeCompressionDelegate implements ITreeCompressionDelegate<TreeElement> {\n\n\tisIncompressible(element: TreeElement): boolean {\n\t\tif (ResourceTree.isResourceNode(element)) {\n\t\t\treturn element.childrenCount === 0 || !element.parent || !element.parent.parent;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nclass SCMHistoryTreeDataSource extends Disposable implements IAsyncDataSource<SCMHistoryViewModel, TreeElement> {\n\tconstructor(private readonly viewMode: () => ViewMode) {\n\t\tsuper();\n\t}\n\n\tasync getChildren(inputOrElement: SCMHistoryViewModel | TreeElement): Promise<Iterable<TreeElement>> {\n\t\tconst children: TreeElement[] = [];\n\n\t\tif (inputOrElement instanceof SCMHistoryViewModel) {\n\t\t\t// History items\n\t\t\tconst historyItems = await inputOrElement.getHistoryItems();\n\t\t\tchildren.push(...historyItems);\n\n\t\t\t// Load More element\n\t\t\tconst repository = inputOrElement.repository.get();\n\t\t\tconst lastHistoryItem = historyItems.at(-1);\n\t\t\tif (repository && lastHistoryItem && lastHistoryItem.historyItemViewModel.outputSwimlanes.length > 0) {\n\t\t\t\tchildren.push({\n\t\t\t\t\trepository,\n\t\t\t\t\tgraphColumns: lastHistoryItem.historyItemViewModel.outputSwimlanes,\n\t\t\t\t\ttype: 'historyItemLoadMore'\n\t\t\t\t} satisfies SCMHistoryItemLoadMoreTreeElement);\n\t\t\t}\n\t\t} else if (isSCMHistoryItemViewModelTreeElement(inputOrElement)) {\n\t\t\t// History item changes\n\t\t\tconst historyProvider = inputOrElement.repository.provider.historyProvider.get();\n\t\t\tconst historyItemViewModel = inputOrElement.historyItemViewModel;\n\t\t\tconst historyItem = historyItemViewModel.historyItem;\n\n\t\t\tlet historyItemId: string, historyItemParentId: string | undefined;\n\n\t\t\tif (\n\t\t\t\thistoryItemViewModel.kind === 'incoming-changes' ||\n\t\t\t\thistoryItemViewModel.kind === 'outgoing-changes'\n\t\t\t) {\n\t\t\t\t// Incoming/Outgoing changes history item\n\t\t\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\t\t\tconst historyItemRemoteRef = historyProvider?.historyItemRemoteRef.get();\n\n\t\t\t\tif (!historyProvider || !historyItemRef || !historyItemRemoteRef) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\thistoryItemId = historyItemViewModel.kind === 'incoming-changes'\n\t\t\t\t\t? historyItemRemoteRef.id\n\t\t\t\t\t: historyItemRef.id;\n\n\t\t\t\thistoryItemParentId = await historyProvider.resolveHistoryItemRefsCommonAncestor([\n\t\t\t\t\thistoryItemRef.name,\n\t\t\t\t\thistoryItemRemoteRef.name]);\n\t\t\t} else {\n\t\t\t\t// History item\n\t\t\t\thistoryItemId = historyItem.id;\n\n\t\t\t\tif (historyItem.parentIds.length > 0) {\n\t\t\t\t\t// History item right above the incoming changes history item\n\t\t\t\t\tif (historyItem.parentIds[0] === SCMIncomingHistoryItemId) {\n\t\t\t\t\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\t\t\t\t\tconst historyItemRemoteRef = historyProvider?.historyItemRemoteRef.get();\n\n\t\t\t\t\t\tif (!historyProvider || !historyItemRef || !historyItemRemoteRef) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thistoryItemParentId = await historyProvider.resolveHistoryItemRefsCommonAncestor([\n\t\t\t\t\t\t\thistoryItemRef.name,\n\t\t\t\t\t\t\thistoryItemRemoteRef.name]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\thistoryItemParentId = historyItem.parentIds[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst historyItemChanges = await historyProvider?.provideHistoryItemChanges(historyItemId, historyItemParentId) ?? [];\n\n\t\t\tif (this.viewMode() === ViewMode.List) {\n\t\t\t\t// List\n\t\t\t\tchildren.push(...historyItemChanges.map(change => ({\n\t\t\t\t\trepository: inputOrElement.repository,\n\t\t\t\t\thistoryItemViewModel: inputOrElement.historyItemViewModel,\n\t\t\t\t\thistoryItemChange: change,\n\t\t\t\t\tgraphColumns: inputOrElement.historyItemViewModel.outputSwimlanes,\n\t\t\t\t\ttype: 'historyItemChangeViewModel'\n\t\t\t\t} satisfies SCMHistoryItemChangeViewModelTreeElement)));\n\t\t\t} else if (this.viewMode() === ViewMode.Tree) {\n\t\t\t\t// Tree\n\t\t\t\tconst rootUri = inputOrElement.repository.provider.rootUri ?? URI.file('/');\n\t\t\t\tconst historyItemChangesTree = new ResourceTree<SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemViewModelTreeElement>(inputOrElement, rootUri);\n\t\t\t\tfor (const change of historyItemChanges) {\n\t\t\t\t\thistoryItemChangesTree.add(change.uri, {\n\t\t\t\t\t\trepository: inputOrElement.repository,\n\t\t\t\t\t\thistoryItemViewModel: inputOrElement.historyItemViewModel,\n\t\t\t\t\t\thistoryItemChange: change,\n\t\t\t\t\t\tgraphColumns: inputOrElement.historyItemViewModel.outputSwimlanes,\n\t\t\t\t\t\ttype: 'historyItemChangeViewModel'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tfor (const node of historyItemChangesTree.root.children) {\n\t\t\t\t\tchildren.push(node.element ?? node);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (ResourceTree.isResourceNode(inputOrElement) && isSCMHistoryItemChangeNode(inputOrElement)) {\n\t\t\t// Tree\n\t\t\tfor (const node of inputOrElement.children) {\n\t\t\t\tchildren.push(node.element && node.childrenCount === 0 ? node.element : node);\n\t\t\t}\n\t\t}\n\n\t\treturn children;\n\t}\n\n\thasChildren(inputOrElement: SCMHistoryViewModel | TreeElement): boolean {\n\t\treturn inputOrElement instanceof SCMHistoryViewModel ||\n\t\t\tisSCMHistoryItemViewModelTreeElement(inputOrElement) ||\n\t\t\t(isSCMHistoryItemChangeNode(inputOrElement) && inputOrElement.childrenCount > 0);\n\t}\n}\n\nclass SCMHistoryTreeDragAndDrop implements ITreeDragAndDrop<TreeElement> {\n\tgetDragURI(element: TreeElement): string | null {\n\t\tconst uri = this._getTreeElementUri(element);\n\t\treturn uri ? uri.toString() : null;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tif (!originalEvent.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst historyItems = this._getDragAndDropData(data as ElementsDragAndDropData<TreeElement, TreeElement[]>);\n\t\tif (historyItems.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\toriginalEvent.dataTransfer.setData(CodeDataTransfers.SCM_HISTORY_ITEM, JSON.stringify(historyItems));\n\t}\n\n\tgetDragLabel(elements: TreeElement[], originalEvent: DragEvent): string | undefined {\n\t\tif (elements.length === 1) {\n\t\t\tconst element = elements[0];\n\t\t\treturn this._getTreeElementLabel(element);\n\t\t}\n\n\t\treturn String(elements.length);\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetElement: TreeElement | undefined, targetIndex: number | undefined, targetSector: ListViewTargetSector | undefined, originalEvent: DragEvent): boolean {\n\t\treturn false;\n\t}\n\n\tdrop(data: IDragAndDropData, targetElement: TreeElement | undefined, targetIndex: number | undefined, targetSector: ListViewTargetSector | undefined, originalEvent: DragEvent): void { }\n\n\tprivate _getDragAndDropData(data: ElementsDragAndDropData<TreeElement, TreeElement[]>): SCMHistoryItemTransferData[] {\n\t\tconst historyItems: SCMHistoryItemTransferData[] = [];\n\t\tfor (const element of [...data.context ?? [], ...data.elements]) {\n\t\t\tif (!isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst provider = element.repository.provider;\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\t\t\tconst attachmentName = `$(${Codicon.repo.id})\\u00A0${provider.name}\\u00A0$(${Codicon.gitCommit.id})\\u00A0${historyItem.displayId ?? historyItem.id}`;\n\t\t\tconst historyItemParentId = historyItem.parentIds.length > 0 ? historyItem.parentIds[0] : undefined;\n\n\t\t\thistoryItems.push({\n\t\t\t\tname: attachmentName,\n\t\t\t\tresource: ScmHistoryItemResolver.getMultiDiffSourceUri(provider, historyItem.id, historyItemParentId, historyItem.displayId),\n\t\t\t\thistoryItem: historyItem\n\t\t\t});\n\t\t}\n\n\t\treturn historyItems;\n\t}\n\n\tprivate _getTreeElementLabel(element: TreeElement): string | undefined {\n\t\tif (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\t\t\treturn historyItem.displayId ?? historyItem.id;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate _getTreeElementUri(element: TreeElement): URI | undefined {\n\t\tif (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\tconst provider = element.repository.provider;\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\t\t\tconst historyItemParentId = historyItem.parentIds.length > 0 ? historyItem.parentIds[0] : undefined;\n\n\t\t\treturn ScmHistoryItemResolver.getMultiDiffSourceUri(provider, historyItem.id, historyItemParentId, historyItem.displayId);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tdispose(): void { }\n}\n\ntype HistoryItemRefsFilter = 'all' | 'auto' | string[];\n\ntype RepositoryState = {\n\tviewModels: SCMHistoryItemViewModelTreeElement[];\n\thistoryItemsFilter: ISCMHistoryItemRef[];\n\tmergeBase: string | undefined;\n\tloadMore: boolean | string;\n};\n\nclass SCMHistoryViewModel extends Disposable {\n\treadonly viewMode: ISettableObservable<ViewMode>;\n\n\t/**\n\t * The active | selected repository takes precedence over the first repository when the observable\n\t * values are updated in the same transaction (or during the initial read of the observable value).\n\t */\n\treadonly repository: IObservable<ISCMRepository | undefined>;\n\tprivate readonly _selectedRepository = observableValue<'auto' | ISCMRepository>(this, 'auto');\n\n\treadonly onDidChangeHistoryItemsFilter = observableSignal(this);\n\treadonly isViewModelEmpty = observableValue(this, false);\n\n\tprivate readonly _repositoryState = new Map<ISCMRepository, RepositoryState>();\n\tprivate readonly _repositoryFilterState = new Map<string, HistoryItemRefsFilter>();\n\n\tprivate readonly _scmHistoryItemCountCtx: IContextKey<number>;\n\tprivate readonly _scmHistoryViewModeCtx: IContextKey<ViewMode>;\n\n\tconstructor(\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\n\t\t@ISCMService private readonly _scmService: ISCMService,\n\t\t@ISCMViewService private readonly _scmViewService: ISCMViewService,\n\t\t@IStorageService private readonly _storageService: IStorageService\n\t) {\n\t\tsuper();\n\n\t\tthis._repositoryFilterState = this._loadHistoryItemsFilterState();\n\t\tthis.viewMode = observableValue<ViewMode>(this, this._getViewMode());\n\n\t\tthis._extensionService.onWillStop(this._saveHistoryItemsFilterState, this, this._store);\n\t\tthis._storageService.onWillSaveState(this._saveHistoryItemsFilterState, this, this._store);\n\n\t\tthis._scmHistoryItemCountCtx = ContextKeys.SCMHistoryItemCount.bindTo(this._contextKeyService);\n\t\tthis._scmHistoryViewModeCtx = ContextKeys.SCMHistoryViewMode.bindTo(this._contextKeyService);\n\t\tthis._scmHistoryViewModeCtx.set(this.viewMode.get());\n\n\t\tconst firstRepository = this._scmService.repositoryCount > 0\n\t\t\t? constObservable(Iterable.first(this._scmService.repositories))\n\t\t\t: observableFromEvent(this,\n\t\t\t\tEvent.once(this._scmService.onDidAddRepository),\n\t\t\t\trepository => repository);\n\n\t\tconst graphRepository = derived(reader => {\n\t\t\tconst selectedRepository = this._selectedRepository.read(reader);\n\t\t\tif (selectedRepository !== 'auto') {\n\t\t\t\treturn selectedRepository;\n\t\t\t}\n\n\t\t\treturn this._scmViewService.activeRepository.read(reader)?.repository;\n\t\t});\n\n\t\tthis.repository = latestChangedValue(this, [firstRepository, graphRepository]);\n\n\t\tconst closedRepository = observableFromEvent(this,\n\t\t\tthis._scmService.onDidRemoveRepository,\n\t\t\trepository => repository);\n\n\t\t// Closed repository cleanup\n\t\tthis._register(autorun(reader => {\n\t\t\tconst repository = closedRepository.read(reader);\n\t\t\tif (!repository) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.repository.read(undefined) === repository) {\n\t\t\t\tthis._selectedRepository.set(Iterable.first(this._scmService.repositories) ?? 'auto', undefined);\n\t\t\t}\n\n\t\t\tthis._repositoryState.delete(repository);\n\t\t}));\n\t}\n\n\tclearRepositoryState(): void {\n\t\tconst repository = this.repository.get();\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._repositoryState.delete(repository);\n\t}\n\n\tgetHistoryItemsFilter(): 'all' | 'auto' | ISCMHistoryItemRef[] | undefined {\n\t\tconst repository = this.repository.get();\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst filterState = this._repositoryFilterState.get(getProviderKey(repository.provider)) ?? 'auto';\n\t\tif (filterState === 'all' || filterState === 'auto') {\n\t\t\treturn filterState;\n\t\t}\n\n\t\tconst repositoryState = this._repositoryState.get(repository);\n\t\treturn repositoryState?.historyItemsFilter;\n\t}\n\n\tgetCurrentHistoryItemTreeElement(): SCMHistoryItemViewModelTreeElement | undefined {\n\t\tconst repository = this.repository.get();\n\t\tif (!repository) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst state = this._repositoryState.get(repository);\n\t\tif (!state) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst historyProvider = repository?.provider.historyProvider.get();\n\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\n\t\treturn state.viewModels\n\t\t\t.find(viewModel => viewModel.historyItemViewModel.historyItem.id === historyItemRef?.revision);\n\t}\n\n\tloadMore(cursor?: string): void {\n\t\tconst repository = this.repository.get();\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state = this._repositoryState.get(repository);\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._repositoryState.set(repository, { ...state, loadMore: cursor ?? true });\n\t}\n\n\tasync getHistoryItems(): Promise<SCMHistoryItemViewModelTreeElement[]> {\n\t\tconst repository = this.repository.get();\n\t\tconst historyProvider = repository?.provider.historyProvider.get();\n\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\tconst historyItemRemoteRef = historyProvider?.historyItemRemoteRef.get();\n\n\t\tif (!repository || !historyProvider) {\n\t\t\tthis._scmHistoryItemCountCtx.set(0);\n\t\t\tthis.isViewModelEmpty.set(true, undefined);\n\t\t\treturn [];\n\t\t}\n\n\t\tlet state = this._repositoryState.get(repository);\n\n\t\tif (!state || state.loadMore !== false) {\n\t\t\tconst historyItems = state?.viewModels\n\t\t\t\t.filter(vm =>\n\t\t\t\t\tvm.historyItemViewModel.kind !== 'incoming-changes' &&\n\t\t\t\t\tvm.historyItemViewModel.kind !== 'outgoing-changes')\n\t\t\t\t.map(vm => vm.historyItemViewModel.historyItem) ?? [];\n\n\t\t\tconst historyItemRefs = state?.historyItemsFilter ??\n\t\t\t\tawait this._resolveHistoryItemFilter(repository, historyProvider);\n\n\t\t\tconst limit = clamp(this._configurationService.getValue<number>('scm.graph.pageSize'), 1, 1000);\n\t\t\tconst historyItemRefIds = historyItemRefs.map(ref => ref.revision ?? ref.id);\n\n\t\t\tdo {\n\t\t\t\t// Fetch the next page of history items\n\t\t\t\thistoryItems.push(...(await historyProvider.provideHistoryItems({\n\t\t\t\t\thistoryItemRefs: historyItemRefIds, limit, skip: historyItems.length\n\t\t\t\t}) ?? []));\n\t\t\t} while (typeof state?.loadMore === 'string' && !historyItems.find(item => item.id === state?.loadMore));\n\n\t\t\t// Compute the merge base\n\t\t\tconst mergeBase = historyItemRef && historyItemRemoteRef && state?.mergeBase === undefined\n\t\t\t\t? await historyProvider.resolveHistoryItemRefsCommonAncestor([\n\t\t\t\t\thistoryItemRef.name,\n\t\t\t\t\thistoryItemRemoteRef.name])\n\t\t\t\t: state?.mergeBase;\n\n\t\t\t// Create the color map\n\t\t\tconst colorMap = this._getGraphColorMap(historyItemRefs);\n\n\t\t\t// Only show incoming changes node if the remote history item reference is part of the graph\n\t\t\tconst addIncomingChangesNode = this._scmViewService.graphShowIncomingChangesConfig.get()\n\t\t\t\t&& historyItemRefs.some(ref => ref.id === historyItemRemoteRef?.id);\n\n\t\t\t// Only show outgoing changes node if the history item reference is part of the graph\n\t\t\tconst addOutgoingChangesNode = this._scmViewService.graphShowOutgoingChangesConfig.get()\n\t\t\t\t&& historyItemRefs.some(ref => ref.id === historyItemRef?.id);\n\n\t\t\tconst viewModels = toISCMHistoryItemViewModelArray(\n\t\t\t\thistoryItems,\n\t\t\t\tcolorMap,\n\t\t\t\thistoryProvider.historyItemRef.get(),\n\t\t\t\thistoryProvider.historyItemRemoteRef.get(),\n\t\t\t\thistoryProvider.historyItemBaseRef.get(),\n\t\t\t\taddIncomingChangesNode,\n\t\t\t\taddOutgoingChangesNode,\n\t\t\t\tmergeBase)\n\t\t\t\t.map(historyItemViewModel => ({\n\t\t\t\t\trepository,\n\t\t\t\t\thistoryItemViewModel,\n\t\t\t\t\ttype: 'historyItemViewModel'\n\t\t\t\t}) satisfies SCMHistoryItemViewModelTreeElement);\n\n\t\t\tstate = { historyItemsFilter: historyItemRefs, viewModels, mergeBase, loadMore: false };\n\t\t\tthis._repositoryState.set(repository, state);\n\n\t\t\tthis._scmHistoryItemCountCtx.set(viewModels.length);\n\t\t\tthis.isViewModelEmpty.set(viewModels.length === 0, undefined);\n\t\t}\n\n\t\treturn state.viewModels;\n\t}\n\n\tsetRepository(repository: ISCMRepository | 'auto'): void {\n\t\tthis._selectedRepository.set(repository, undefined);\n\t}\n\n\tsetHistoryItemsFilter(filter: HistoryItemRefsFilter): void {\n\t\tconst repository = this.repository.get();\n\t\tif (!repository) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (filter !== 'auto') {\n\t\t\tthis._repositoryFilterState.set(getProviderKey(repository.provider), filter);\n\t\t} else {\n\t\t\tthis._repositoryFilterState.delete(getProviderKey(repository.provider));\n\t\t}\n\t\tthis._saveHistoryItemsFilterState();\n\n\t\tthis.onDidChangeHistoryItemsFilter.trigger(undefined);\n\t}\n\n\tsetViewMode(viewMode: ViewMode): void {\n\t\tif (viewMode === this.viewMode.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.viewMode.set(viewMode, undefined);\n\t\tthis._scmHistoryViewModeCtx.set(viewMode);\n\t\tthis._storageService.store('scm.graphView.viewMode', viewMode, StorageScope.WORKSPACE, StorageTarget.USER);\n\t}\n\n\tprivate _getViewMode(): ViewMode {\n\t\tlet mode = this._configurationService.getValue<'tree' | 'list'>('scm.defaultViewMode') === 'list' ? ViewMode.List : ViewMode.Tree;\n\t\tconst storageMode = this._storageService.get('scm.graphView.viewMode', StorageScope.WORKSPACE) as ViewMode;\n\t\tif (typeof storageMode === 'string') {\n\t\t\tmode = storageMode;\n\t\t}\n\n\t\treturn mode;\n\t}\n\n\tprivate _getGraphColorMap(historyItemRefs: ISCMHistoryItemRef[]): Map<string, ColorIdentifier | undefined> {\n\t\tconst repository = this.repository.get();\n\t\tconst historyProvider = repository?.provider.historyProvider.get();\n\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\tconst historyItemRemoteRef = historyProvider?.historyItemRemoteRef.get();\n\t\tconst historyItemBaseRef = historyProvider?.historyItemBaseRef.get();\n\n\t\tconst colorMap = new Map<string, ColorIdentifier | undefined>();\n\n\t\tif (historyItemRef) {\n\t\t\tcolorMap.set(historyItemRef.id, historyItemRef.color);\n\n\t\t\tif (historyItemRemoteRef) {\n\t\t\t\tcolorMap.set(historyItemRemoteRef.id, historyItemRemoteRef.color);\n\t\t\t}\n\t\t\tif (historyItemBaseRef) {\n\t\t\t\tcolorMap.set(historyItemBaseRef.id, historyItemBaseRef.color);\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining history item references to the color map\n\t\t// if not already present. These history item references will\n\t\t// be colored using the color of the history item to which they\n\t\t// point to.\n\t\tfor (const ref of historyItemRefs) {\n\t\t\tif (!colorMap.has(ref.id)) {\n\t\t\t\tcolorMap.set(ref.id, undefined);\n\t\t\t}\n\t\t}\n\n\t\treturn colorMap;\n\t}\n\n\tprivate async _resolveHistoryItemFilter(repository: ISCMRepository, historyProvider: ISCMHistoryProvider): Promise<ISCMHistoryItemRef[]> {\n\t\tconst historyItemRefs: ISCMHistoryItemRef[] = [];\n\t\tconst historyItemsFilter = this._repositoryFilterState.get(getProviderKey(repository.provider)) ?? 'auto';\n\n\t\tswitch (historyItemsFilter) {\n\t\t\tcase 'all':\n\t\t\t\thistoryItemRefs.push(...(await historyProvider.provideHistoryItemRefs() ?? []));\n\t\t\t\tbreak;\n\t\t\tcase 'auto':\n\t\t\t\thistoryItemRefs.push(...[\n\t\t\t\t\thistoryProvider.historyItemRef.get(),\n\t\t\t\t\thistoryProvider.historyItemRemoteRef.get(),\n\t\t\t\t\thistoryProvider.historyItemBaseRef.get(),\n\t\t\t\t].filter(ref => !!ref));\n\t\t\t\tbreak;\n\t\t\tdefault: {\n\t\t\t\t// Get the latest revisions for the history items references in the filer\n\t\t\t\tconst refs = (await historyProvider.provideHistoryItemRefs(historyItemsFilter) ?? [])\n\t\t\t\t\t.filter(ref => historyItemsFilter.some(filter => filter === ref.id));\n\n\t\t\t\tif (refs.length === 0) {\n\t\t\t\t\t// Reset the filter\n\t\t\t\t\thistoryItemRefs.push(...[\n\t\t\t\t\t\thistoryProvider.historyItemRef.get(),\n\t\t\t\t\t\thistoryProvider.historyItemRemoteRef.get(),\n\t\t\t\t\t\thistoryProvider.historyItemBaseRef.get(),\n\t\t\t\t\t].filter(ref => !!ref));\n\t\t\t\t\tthis._repositoryFilterState.delete(getProviderKey(repository.provider));\n\t\t\t\t} else {\n\t\t\t\t\t// Update filter\n\t\t\t\t\thistoryItemRefs.push(...refs);\n\t\t\t\t\tthis._repositoryFilterState.set(getProviderKey(repository.provider), refs.map(ref => ref.id));\n\t\t\t\t}\n\n\t\t\t\tthis._saveHistoryItemsFilterState();\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn historyItemRefs;\n\t}\n\n\tprivate _loadHistoryItemsFilterState() {\n\t\ttry {\n\t\t\tconst filterData = this._storageService.get('scm.graphView.referencesFilter', StorageScope.WORKSPACE);\n\t\t\tif (filterData) {\n\t\t\t\treturn new Map<string, HistoryItemRefsFilter>(JSON.parse(filterData));\n\t\t\t}\n\t\t} catch { }\n\n\t\treturn new Map<string, HistoryItemRefsFilter>();\n\t}\n\n\tprivate _saveHistoryItemsFilterState(): void {\n\t\tconst filter = Array.from(this._repositoryFilterState.entries());\n\t\tthis._storageService.store('scm.graphView.referencesFilter', JSON.stringify(filter), StorageScope.WORKSPACE, StorageTarget.USER);\n\t}\n\n\toverride dispose(): void {\n\t\tthis._repositoryState.clear();\n\t\tsuper.dispose();\n\t}\n}\n\ntype RepositoryQuickPickItem = IQuickPickItem & { repository: 'auto' | ISCMRepository };\n\nclass RepositoryPicker {\n\tprivate readonly _autoQuickPickItem: RepositoryQuickPickItem = {\n\t\tlabel: localize('auto', \"Auto\"),\n\t\tdescription: localize('activeRepository', \"Show the source control graph for the active repository\"),\n\t\trepository: 'auto'\n\t};\n\n\tconstructor(\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@ISCMViewService private readonly _scmViewService: ISCMViewService\n\t) { }\n\n\tasync pickRepository(): Promise<RepositoryQuickPickItem | undefined> {\n\t\tconst picks: (RepositoryQuickPickItem | IQuickPickSeparator)[] = [\n\t\t\tthis._autoQuickPickItem,\n\t\t\t{ type: 'separator' }];\n\n\t\tpicks.push(...this._scmViewService.repositories.map(r => ({\n\t\t\tlabel: r.provider.name,\n\t\t\tdescription: r.provider.rootUri?.fsPath,\n\t\t\ticonClass: ThemeIcon.isThemeIcon(r.provider.iconPath)\n\t\t\t\t? ThemeIcon.asClassName(r.provider.iconPath)\n\t\t\t\t: ThemeIcon.asClassName(Codicon.repo),\n\t\t\trepository: r\n\t\t})));\n\n\t\treturn this._quickInputService.pick(picks, {\n\t\t\tplaceHolder: localize('scmGraphRepository', \"Select the repository to view, type to filter all repositories\")\n\t\t});\n\t}\n}\n\ntype HistoryItemRefQuickPickItem = IQuickPickItem & { historyItemRef: 'all' | 'auto' | ISCMHistoryItemRef };\n\nclass HistoryItemRefPicker extends Disposable {\n\tprivate readonly _allQuickPickItem: HistoryItemRefQuickPickItem = {\n\t\tid: 'all',\n\t\tlabel: localize('all', \"All\"),\n\t\tdescription: localize('allHistoryItemRefs', \"All history item references\"),\n\t\thistoryItemRef: 'all'\n\t};\n\n\tprivate readonly _autoQuickPickItem: HistoryItemRefQuickPickItem = {\n\t\tid: 'auto',\n\t\tlabel: localize('auto', \"Auto\"),\n\t\tdescription: localize('currentHistoryItemRef', \"Current history item reference(s)\"),\n\t\thistoryItemRef: 'auto'\n\t};\n\n\tconstructor(\n\t\tprivate readonly _historyProvider: ISCMHistoryProvider,\n\t\tprivate readonly _historyItemsFilter: 'all' | 'auto' | ISCMHistoryItemRef[],\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync pickHistoryItemRef(): Promise<HistoryItemRefsFilter | undefined> {\n\t\tconst quickPick = this._quickInputService.createQuickPick<HistoryItemRefQuickPickItem>({ useSeparators: true });\n\t\tthis._store.add(quickPick);\n\n\t\tquickPick.placeholder = localize('scmGraphHistoryItemRef', \"Select one/more history item references to view, type to filter\");\n\t\tquickPick.canSelectMany = true;\n\t\tquickPick.hideCheckAll = true;\n\t\tquickPick.busy = true;\n\t\tquickPick.show();\n\n\t\tconst items = await this._createQuickPickItems();\n\n\t\t// Set initial selection\n\t\tlet selectedItems: HistoryItemRefQuickPickItem[] = [];\n\t\tif (this._historyItemsFilter === 'all') {\n\t\t\tselectedItems.push(this._allQuickPickItem);\n\t\t} else if (this._historyItemsFilter === 'auto') {\n\t\t\tselectedItems.push(this._autoQuickPickItem);\n\t\t} else {\n\t\t\tlet index = 0;\n\t\t\twhile (index < items.length) {\n\t\t\t\tif (items[index].type === 'separator') {\n\t\t\t\t\tindex++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (this._historyItemsFilter.some(ref => ref.id === items[index].id)) {\n\t\t\t\t\tconst item = items.splice(index, 1) as HistoryItemRefQuickPickItem[];\n\t\t\t\t\tselectedItems.push(...item);\n\t\t\t\t} else {\n\t\t\t\t\tindex++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Insert the selected items after `All` and `Auto`\n\t\t\titems.splice(2, 0, { type: 'separator' }, ...selectedItems);\n\t\t}\n\n\t\tquickPick.items = items;\n\t\tquickPick.selectedItems = selectedItems;\n\t\tquickPick.busy = false;\n\n\t\treturn new Promise<HistoryItemRefsFilter | undefined>(resolve => {\n\t\t\tthis._store.add(quickPick.onDidChangeSelection(items => {\n\t\t\t\tconst { added } = delta(selectedItems, items, (a, b) => compare(a.id ?? '', b.id ?? ''));\n\t\t\t\tif (added.length > 0) {\n\t\t\t\t\tif (added[0].historyItemRef === 'all' || added[0].historyItemRef === 'auto') {\n\t\t\t\t\t\tquickPick.selectedItems = [added[0]];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Remove 'all' and 'auto' items if present\n\t\t\t\t\t\tquickPick.selectedItems = [...quickPick.selectedItems\n\t\t\t\t\t\t\t.filter(i => i.historyItemRef !== 'all' && i.historyItemRef !== 'auto')];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tselectedItems = [...quickPick.selectedItems];\n\t\t\t}));\n\n\t\t\tthis._store.add(quickPick.onDidAccept(() => {\n\t\t\t\tif (selectedItems.length === 0) {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t} else if (selectedItems.length === 1 && selectedItems[0].historyItemRef === 'all') {\n\t\t\t\t\tresolve('all');\n\t\t\t\t} else if (selectedItems.length === 1 && selectedItems[0].historyItemRef === 'auto') {\n\t\t\t\t\tresolve('auto');\n\t\t\t\t} else {\n\t\t\t\t\tresolve(selectedItems.map(item => (item.historyItemRef as ISCMHistoryItemRef).id));\n\t\t\t\t}\n\n\t\t\t\tquickPick.hide();\n\t\t\t}));\n\n\t\t\tthis._store.add(quickPick.onDidHide(() => {\n\t\t\t\tresolve(undefined);\n\t\t\t\tthis.dispose();\n\t\t\t}));\n\t\t});\n\t}\n\n\tprivate async _createQuickPickItems(): Promise<(HistoryItemRefQuickPickItem | IQuickPickSeparator)[]> {\n\t\tconst picks: (HistoryItemRefQuickPickItem | IQuickPickSeparator)[] = [\n\t\t\tthis._allQuickPickItem, this._autoQuickPickItem\n\t\t];\n\n\t\tconst historyItemRefs = await this._historyProvider.provideHistoryItemRefs() ?? [];\n\t\tconst historyItemRefsByCategory = groupBy(historyItemRefs, (a, b) => compare(a.category ?? '', b.category ?? ''));\n\n\t\tfor (const refs of historyItemRefsByCategory) {\n\t\t\tif (refs.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tpicks.push({ type: 'separator', label: refs[0].category });\n\n\t\t\tpicks.push(...refs.map(ref => {\n\t\t\t\treturn {\n\t\t\t\t\tid: ref.id,\n\t\t\t\t\tlabel: ref.name,\n\t\t\t\t\tdescription: ref.description,\n\t\t\t\t\ticonClass: ThemeIcon.isThemeIcon(ref.icon) ?\n\t\t\t\t\t\tThemeIcon.asClassName(ref.icon) : undefined,\n\t\t\t\t\thistoryItemRef: ref\n\t\t\t\t};\n\t\t\t}));\n\t\t}\n\n\t\treturn picks;\n\t}\n}\n\nexport class SCMHistoryViewPane extends ViewPane {\n\n\tprivate _treeContainer!: HTMLElement;\n\tprivate _tree!: WorkbenchCompressibleAsyncDataTree<SCMHistoryViewModel, TreeElement, FuzzyScore>;\n\tprivate _treeViewModel!: SCMHistoryViewModel;\n\tprivate _treeDataSource!: SCMHistoryTreeDataSource;\n\tprivate _treeIdentityProvider!: SCMHistoryTreeIdentityProvider;\n\n\tprivate readonly _repositoryIsLoadingMore = observableValue(this, false);\n\tprivate readonly _repositoryOutdated = observableValue(this, false);\n\n\tprivate readonly _actionRunner: IActionRunner;\n\tprivate readonly _visibilityDisposables = new DisposableStore();\n\n\tprivate readonly _treeOperationSequencer = new Sequencer();\n\tprivate readonly _treeLoadMoreSequencer = new Sequencer();\n\tprivate readonly _refreshThrottler = new Throttler();\n\tprivate readonly _updateChildrenThrottler = new Throttler();\n\n\tprivate readonly _scmProviderCtx: IContextKey<string | undefined>;\n\tprivate readonly _scmCurrentHistoryItemRefHasRemote: IContextKey<boolean>;\n\tprivate readonly _scmCurrentHistoryItemRefHasBase: IContextKey<boolean>;\n\tprivate readonly _scmCurrentHistoryItemRefInFilter: IContextKey<boolean>;\n\n\tprivate readonly _contextMenuDisposables = new MutableDisposable<DisposableStore>();\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IMenuService private readonly _menuService: IMenuService,\n\t\t@IProgressService private readonly _progressService: IProgressService,\n\t\t@ISCMViewService private readonly _scmViewService: ISCMViewService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IHoverService hoverService: IHoverService\n\t) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\ttitleMenuId: MenuId.SCMHistoryTitle,\n\t\t\tshowActions: ViewPaneShowActions.WhenExpanded\n\t\t}, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\n\t\tthis._scmProviderCtx = ContextKeys.SCMProvider.bindTo(this.scopedContextKeyService);\n\t\tthis._scmCurrentHistoryItemRefHasRemote = ContextKeys.SCMCurrentHistoryItemRefHasRemote.bindTo(this.scopedContextKeyService);\n\t\tthis._scmCurrentHistoryItemRefHasBase = ContextKeys.SCMCurrentHistoryItemRefHasBase.bindTo(this.scopedContextKeyService);\n\t\tthis._scmCurrentHistoryItemRefInFilter = ContextKeys.SCMCurrentHistoryItemRefInFilter.bindTo(this.scopedContextKeyService);\n\n\t\tthis._actionRunner = this.instantiationService.createInstance(SCMHistoryViewPaneActionRunner);\n\t\tthis._register(this._actionRunner);\n\n\t\tthis._register(this._refreshThrottler);\n\t\tthis._register(this._updateChildrenThrottler);\n\t}\n\n\tprotected override renderHeaderTitle(container: HTMLElement): void {\n\t\tsuper.renderHeaderTitle(container, this.title);\n\n\t\tconst element = h('div.scm-graph-view-badge-container', [\n\t\t\th('div.scm-graph-view-badge.monaco-count-badge.long@badge')\n\t\t]);\n\n\t\telement.badge.textContent = 'Outdated';\n\t\tcontainer.appendChild(element.root);\n\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), element.root, {\n\t\t\tmarkdown: {\n\t\t\t\tvalue: localize('scmGraphViewOutdated', \"Please refresh the graph using the refresh action ($(refresh)).\"),\n\t\t\t\tsupportThemeIcons: true\n\t\t\t},\n\t\t\tmarkdownNotSupportedFallback: undefined\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst outdated = this._repositoryOutdated.read(reader);\n\t\t\telement.root.style.display = outdated ? '' : 'none';\n\t\t}));\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._treeContainer = append(container, $('.scm-view.scm-history-view.show-file-icons'));\n\t\tthis._treeContainer.classList.add('file-icon-themable-tree');\n\n\t\tthis._createTree(this._treeContainer);\n\n\t\tthis.onDidChangeBodyVisibility(async visible => {\n\t\t\tif (!visible) {\n\t\t\t\tthis._visibilityDisposables.clear();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Create view model\n\t\t\tthis._treeViewModel = this.instantiationService.createInstance(SCMHistoryViewModel);\n\t\t\tthis._visibilityDisposables.add(this._treeViewModel);\n\n\t\t\t// Wait for first repository to be initialized\n\t\t\tconst firstRepositoryInitialized = derived(this, reader => {\n\t\t\t\tconst repository = this._treeViewModel.repository.read(reader);\n\t\t\t\tconst historyProvider = repository?.provider.historyProvider.read(reader);\n\t\t\t\tconst historyItemRef = historyProvider?.historyItemRef.read(reader);\n\n\t\t\t\treturn historyItemRef !== undefined ? true : undefined;\n\t\t\t});\n\t\t\tawait waitForState(firstRepositoryInitialized);\n\n\t\t\t// Initial rendering\n\t\t\tawait this._progressService.withProgress({ location: this.id }, async () => {\n\t\t\t\tawait this._treeOperationSequencer.queue(async () => {\n\t\t\t\t\tawait this._tree.setInput(this._treeViewModel);\n\t\t\t\t\tthis._tree.scrollTop = 0;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis._visibilityDisposables.add(autorun(reader => {\n\t\t\t\tthis._treeViewModel.isViewModelEmpty.read(reader);\n\t\t\t\tthis._onDidChangeViewWelcomeState.fire();\n\t\t\t}));\n\n\t\t\t// Settings change\n\t\t\tthis._visibilityDisposables.add(runOnChange(this._scmViewService.graphShowIncomingChangesConfig, async () => {\n\t\t\t\tawait this.refresh();\n\t\t\t}));\n\t\t\tthis._visibilityDisposables.add(runOnChange(this._scmViewService.graphShowOutgoingChangesConfig, async () => {\n\t\t\t\tawait this.refresh();\n\t\t\t}));\n\n\t\t\t// Repository change\n\t\t\tlet isFirstRun = true;\n\t\t\tthis._visibilityDisposables.add(autorun(reader => {\n\t\t\t\tconst repository = this._treeViewModel.repository.read(reader);\n\t\t\t\tconst historyProvider = repository?.provider.historyProvider.read(reader);\n\t\t\t\tif (!repository || !historyProvider) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// HistoryItemId changed (checkout)\n\t\t\t\tconst historyItemRefId = derived(reader => {\n\t\t\t\t\treturn historyProvider.historyItemRef.read(reader)?.id;\n\t\t\t\t});\n\t\t\t\treader.store.add(runOnChange(historyItemRefId, async historyItemRefIdValue => {\n\t\t\t\t\tawait this.refresh();\n\n\t\t\t\t\t// Update context key (needs to be done after the refresh call)\n\t\t\t\t\tthis._scmCurrentHistoryItemRefInFilter.set(this._isCurrentHistoryItemInFilter(historyItemRefIdValue));\n\t\t\t\t}));\n\n\t\t\t\t// HistoryItemRefs changed\n\t\t\t\treader.store.add(runOnChange(historyProvider.historyItemRefChanges, changes => {\n\t\t\t\t\tif (changes.silent) {\n\t\t\t\t\t\t// The history item reference changes occurred in the background (ex: Auto Fetch)\n\t\t\t\t\t\t// If tree is scrolled to the top, we can safely refresh the tree, otherwise we\n\t\t\t\t\t\t// will show a visual cue that the view is outdated.\n\t\t\t\t\t\tif (this._tree.scrollTop === 0) {\n\t\t\t\t\t\t\tthis.refresh();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Show the \"Outdated\" badge on the view\n\t\t\t\t\t\tthis._repositoryOutdated.set(true, undefined);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}));\n\n\t\t\t\t// HistoryItemRefs filter changed\n\t\t\t\treader.store.add(runOnChange(this._treeViewModel.onDidChangeHistoryItemsFilter, async () => {\n\t\t\t\t\tawait this.refresh();\n\n\t\t\t\t\t// Update context key (needs to be done after the refresh call)\n\t\t\t\t\tthis._scmCurrentHistoryItemRefInFilter.set(this._isCurrentHistoryItemInFilter(historyItemRefId.read(undefined)));\n\t\t\t\t}));\n\n\t\t\t\t// HistoryItemRemoteRef changed\n\t\t\t\treader.store.add(autorun(reader => {\n\t\t\t\t\tthis._scmCurrentHistoryItemRefHasRemote.set(!!historyProvider.historyItemRemoteRef.read(reader));\n\t\t\t\t}));\n\n\t\t\t\t// HistoryItemBaseRef changed\n\t\t\t\treader.store.add(autorun(reader => {\n\t\t\t\t\tthis._scmCurrentHistoryItemRefHasBase.set(!!historyProvider.historyItemBaseRef.read(reader));\n\t\t\t\t}));\n\n\t\t\t\t// ViewMode changed\n\t\t\t\treader.store.add(runOnChange(this._treeViewModel.viewMode, async () => {\n\t\t\t\t\tawait this._updateChildren();\n\t\t\t\t}));\n\n\t\t\t\t// Update context\n\t\t\t\tthis._scmProviderCtx.set(repository.provider.providerId);\n\t\t\t\tthis._scmCurrentHistoryItemRefInFilter.set(this._isCurrentHistoryItemInFilter(historyItemRefId.read(undefined)));\n\n\t\t\t\t// We skip refreshing the graph on the first execution of the autorun\n\t\t\t\t// since the graph for the first repository is rendered when the tree\n\t\t\t\t// input is set.\n\t\t\t\tif (!isFirstRun) {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t\tisFirstRun = false;\n\t\t\t}));\n\n\t\t\t// FileIconTheme & viewMode change\n\t\t\tconst fileIconThemeObs = observableFromEvent(\n\t\t\t\tthis.themeService.onDidFileIconThemeChange,\n\t\t\t\t() => this.themeService.getFileIconTheme());\n\n\t\t\tthis._visibilityDisposables.add(autorun(reader => {\n\t\t\t\tconst fileIconTheme = fileIconThemeObs.read(reader);\n\t\t\t\tconst viewMode = this._treeViewModel.viewMode.read(reader);\n\n\t\t\t\tthis._updateIndentStyles(fileIconTheme, viewMode);\n\t\t\t}));\n\t\t}, this, this._store);\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis._tree.layout(height, width);\n\t}\n\n\toverride getActionRunner(): IActionRunner | undefined {\n\t\treturn this._actionRunner;\n\t}\n\n\toverride getActionsContext(): ISCMProvider | undefined {\n\t\treturn this._treeViewModel?.repository.get()?.provider;\n\t}\n\n\toverride createActionViewItem(action: IAction, options?: IDropdownMenuActionViewItemOptions): IActionViewItem | undefined {\n\t\tif (action.id === PICK_REPOSITORY_ACTION_ID) {\n\t\t\tconst repository = this._treeViewModel?.repository.get();\n\t\t\tif (repository) {\n\t\t\t\treturn new SCMRepositoryActionViewItem(repository, action, options);\n\t\t\t}\n\t\t} else if (action.id === PICK_HISTORY_ITEM_REFS_ACTION_ID) {\n\t\t\tconst repository = this._treeViewModel?.repository.get();\n\t\t\tconst historyItemsFilter = this._treeViewModel?.getHistoryItemsFilter();\n\t\t\tif (repository && historyItemsFilter) {\n\t\t\t\treturn new SCMHistoryItemRefsActionViewItem(repository, historyItemsFilter, action, options);\n\t\t\t}\n\t\t}\n\n\t\treturn super.createActionViewItem(action, options);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tconst fakeKeyboardEvent = new KeyboardEvent('keydown');\n\t\tthis._tree.focusFirst(fakeKeyboardEvent);\n\t\tthis._tree.domFocus();\n\t}\n\n\toverride shouldShowWelcome(): boolean {\n\t\treturn this._treeViewModel?.isViewModelEmpty.get() === true;\n\t}\n\n\tasync refresh(): Promise<void> {\n\t\treturn this._refreshThrottler.queue(token => this._refresh(token));\n\t}\n\n\tprivate async _refresh(token: CancellationToken): Promise<void> {\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._treeViewModel.clearRepositoryState();\n\t\tawait this._updateChildren();\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.updateActions();\n\t\tthis._repositoryOutdated.set(false, undefined);\n\t\tthis._tree.scrollTop = 0;\n\t}\n\n\tasync pickRepository(): Promise<void> {\n\t\tconst picker = this._instantiationService.createInstance(RepositoryPicker);\n\t\tconst result = await picker.pickRepository();\n\n\t\tif (result) {\n\t\t\tthis._treeViewModel.setRepository(result.repository);\n\t\t}\n\t}\n\n\tasync pickHistoryItemRef(): Promise<void> {\n\t\tconst repository = this._treeViewModel.repository.get();\n\t\tconst historyProvider = repository?.provider.historyProvider.get();\n\t\tconst historyItemsFilter = this._treeViewModel.getHistoryItemsFilter();\n\n\t\tif (!historyProvider || !historyItemsFilter) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst picker = this._instantiationService.createInstance(HistoryItemRefPicker, historyProvider, historyItemsFilter);\n\t\tconst result = await picker.pickHistoryItemRef();\n\n\t\tif (result) {\n\t\t\tthis._treeViewModel.setHistoryItemsFilter(result);\n\t\t}\n\t}\n\n\tasync revealCurrentHistoryItem(): Promise<void> {\n\t\tconst repository = this._treeViewModel.repository.get();\n\t\tconst historyProvider = repository?.provider.historyProvider.get();\n\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\tif (!repository || !historyItemRef?.id || !historyItemRef?.revision) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._isCurrentHistoryItemInFilter(historyItemRef.id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst revealTreeNode = (): boolean => {\n\t\t\tconst historyItemTreeElement = this._treeViewModel.getCurrentHistoryItemTreeElement();\n\n\t\t\tif (historyItemTreeElement && this._tree.hasNode(historyItemTreeElement)) {\n\t\t\t\tthis._tree.reveal(historyItemTreeElement, 0.5);\n\n\t\t\t\tthis._tree.setSelection([historyItemTreeElement]);\n\t\t\t\tthis._tree.setFocus([historyItemTreeElement]);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tif (revealTreeNode()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fetch current history item\n\t\tawait this._loadMore(historyItemRef.revision);\n\n\t\t// Reveal node\n\t\trevealTreeNode();\n\t}\n\n\tsetViewMode(viewMode: ViewMode): void {\n\t\tthis._treeViewModel.setViewMode(viewMode);\n\t}\n\n\tprivate _createTree(container: HTMLElement): void {\n\t\tthis._treeIdentityProvider = new SCMHistoryTreeIdentityProvider();\n\n\t\tconst historyItemHoverDelegate = this.instantiationService.createInstance(HistoryItemHoverDelegate, this.viewDescriptorService.getViewLocationById(this.id));\n\t\tthis._register(historyItemHoverDelegate);\n\n\t\tconst resourceLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility });\n\t\tthis._register(resourceLabels);\n\n\t\tthis._treeDataSource = this.instantiationService.createInstance(SCMHistoryTreeDataSource, () => this._treeViewModel.viewMode.get());\n\t\tthis._register(this._treeDataSource);\n\n\t\tconst compressionEnabled = observableConfigValue('scm.compactFolders', true, this.configurationService);\n\n\t\tthis._tree = this.instantiationService.createInstance(\n\t\t\tWorkbenchCompressibleAsyncDataTree,\n\t\t\t'SCM History Tree',\n\t\t\tcontainer,\n\t\t\tnew ListDelegate(),\n\t\t\tnew SCMHistoryTreeCompressionDelegate(),\n\t\t\t[\n\t\t\t\tthis.instantiationService.createInstance(HistoryItemRenderer, historyItemHoverDelegate),\n\t\t\t\tthis.instantiationService.createInstance(HistoryItemChangeRenderer, () => this._treeViewModel.viewMode.get(), resourceLabels),\n\t\t\t\tthis.instantiationService.createInstance(HistoryItemLoadMoreRenderer, this._repositoryIsLoadingMore, () => this._loadMore()),\n\t\t\t],\n\t\t\tthis._treeDataSource,\n\t\t\t{\n\t\t\t\taccessibilityProvider: new SCMHistoryTreeAccessibilityProvider(),\n\t\t\t\tidentityProvider: this._treeIdentityProvider,\n\t\t\t\tcollapseByDefault: (e: unknown) => !isSCMHistoryItemChangeNode(e),\n\t\t\t\tcompressionEnabled: compressionEnabled.get(),\n\t\t\t\tdnd: new SCMHistoryTreeDragAndDrop(),\n\t\t\t\tkeyboardNavigationLabelProvider: new SCMHistoryTreeKeyboardNavigationLabelProvider(),\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\ttwistieAdditionalCssClass: (e: unknown) => {\n\t\t\t\t\treturn isSCMHistoryItemViewModelTreeElement(e) || isSCMHistoryItemLoadMoreTreeElement(e)\n\t\t\t\t\t\t? 'force-no-twistie'\n\t\t\t\t\t\t: undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t) as WorkbenchCompressibleAsyncDataTree<SCMHistoryViewModel, TreeElement, FuzzyScore>;\n\t\tthis._register(this._tree);\n\n\t\tthis._tree.onDidOpen(this._onDidOpen, this, this._store);\n\t\tthis._tree.onContextMenu(this._onContextMenu, this, this._store);\n\t}\n\n\tprivate _isCurrentHistoryItemInFilter(historyItemRefId: string | undefined): boolean {\n\t\tif (!historyItemRefId) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst historyItemFilter = this._treeViewModel.getHistoryItemsFilter();\n\t\tif (historyItemFilter === 'all' || historyItemFilter === 'auto') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn Array.isArray(historyItemFilter) && !!historyItemFilter.find(ref => ref.id === historyItemRefId);\n\t}\n\n\tprivate async _onDidOpen(e: IOpenEvent<TreeElement | undefined>): Promise<void> {\n\t\tif (!e.element) {\n\t\t\treturn;\n\t\t} else if (isSCMHistoryItemChangeViewModelTreeElement(e.element)) {\n\t\t\tconst historyItemChange = e.element.historyItemChange;\n\t\t\tconst historyItem = e.element.historyItemViewModel.historyItem;\n\t\t\tconst historyItemDisplayId = historyItem.id === SCMIncomingHistoryItemId\n\t\t\t\t? localize('incomingChanges', \"Incoming Changes\")\n\t\t\t\t: historyItem.id === SCMOutgoingHistoryItemId\n\t\t\t\t\t? localize('outgoingChanges', \"Outgoing Changes\")\n\t\t\t\t\t: historyItem.displayId ?? historyItem.id;\n\n\t\t\tconst historyItemParentId = historyItem.parentIds.length > 0 ? historyItem.parentIds[0] : undefined;\n\t\t\tconst historyItemParentDisplayId = historyItemParentId && historyItem.displayId\n\t\t\t\t? historyItemParentId.substring(0, historyItem.displayId.length)\n\t\t\t\t: historyItemParentId;\n\n\t\t\tif (historyItemChange.originalUri && historyItemChange.modifiedUri) {\n\t\t\t\t// Diff Editor\n\t\t\t\tconst originalUriTitle = `${basename(historyItemChange.originalUri.fsPath)} (${historyItemParentDisplayId})`;\n\t\t\t\tconst modifiedUriTitle = `${basename(historyItemChange.modifiedUri.fsPath)} (${historyItemDisplayId})`;\n\n\t\t\t\tconst title = `${originalUriTitle} \\u2194 ${modifiedUriTitle}`;\n\t\t\t\tawait this._editorService.openEditor({\n\t\t\t\t\tlabel: title,\n\t\t\t\t\toriginal: { resource: historyItemChange.originalUri },\n\t\t\t\t\tmodified: { resource: historyItemChange.modifiedUri },\n\t\t\t\t\toptions: e.editorOptions\n\t\t\t\t});\n\t\t\t} else if (historyItemChange.modifiedUri) {\n\t\t\t\tawait this._editorService.openEditor({\n\t\t\t\t\tlabel: `${basename(historyItemChange.modifiedUri.fsPath)} (${historyItemDisplayId})`,\n\t\t\t\t\tresource: historyItemChange.modifiedUri,\n\t\t\t\t\toptions: e.editorOptions\n\t\t\t\t});\n\t\t\t} else if (historyItemChange.originalUri) {\n\t\t\t\t// Editor (Deleted)\n\t\t\t\tawait this._editorService.openEditor({\n\t\t\t\t\tlabel: `${basename(historyItemChange.originalUri.fsPath)} (${historyItemParentDisplayId})`,\n\t\t\t\t\tresource: historyItemChange.originalUri,\n\t\t\t\t\toptions: e.editorOptions\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (isSCMHistoryItemLoadMoreTreeElement(e.element)) {\n\t\t\tconst pageOnScroll = this.configurationService.getValue<boolean>('scm.graph.pageOnScroll') === true;\n\t\t\tif (!pageOnScroll) {\n\t\t\t\tthis._loadMore();\n\t\t\t\tthis._tree.setSelection([]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _onContextMenu(e: ITreeContextMenuEvent<TreeElement | null>): void {\n\t\tconst element = e.element;\n\n\t\tif (isSCMHistoryItemViewModelTreeElement(element)) {\n\t\t\t// HistoryItem\n\t\t\tif (element.historyItemViewModel.kind === 'incoming-changes' || element.historyItemViewModel.kind === 'outgoing-changes') {\n\t\t\t\t// Incoming/Outgoing changes node does not support any context menu actions\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._contextMenuDisposables.value = new DisposableStore();\n\n\t\t\tconst historyProvider = element.repository.provider.historyProvider.get();\n\t\t\tconst historyItemRef = historyProvider?.historyItemRef.get();\n\t\t\tconst historyItem = element.historyItemViewModel.historyItem;\n\n\t\t\tconst historyItemRefMenuItems = MenuRegistry.getMenuItems(MenuId.SCMHistoryItemRefContext).filter(item => isIMenuItem(item));\n\n\t\t\t// If there are any history item references we have to add a submenu item for each orignal action,\n\t\t\t// and a menu item for each history item ref that matches the `when` clause of the original action.\n\t\t\tif (historyItemRefMenuItems.length > 0 && element.historyItemViewModel.historyItem.references?.length) {\n\t\t\t\tconst historyItemRefActions = new Map<string, ISCMHistoryItemRef[]>();\n\n\t\t\t\tfor (const ref of element.historyItemViewModel.historyItem.references) {\n\t\t\t\t\tconst contextKeyService = this.scopedContextKeyService.createOverlay([\n\t\t\t\t\t\t['scmHistoryItemRef', ref.id]\n\t\t\t\t\t]);\n\n\t\t\t\t\tconst menuActions = this._menuService.getMenuActions(\n\t\t\t\t\t\tMenuId.SCMHistoryItemRefContext, contextKeyService);\n\n\t\t\t\t\tfor (const action of menuActions.flatMap(a => a[1])) {\n\t\t\t\t\t\tif (!historyItemRefActions.has(action.id)) {\n\t\t\t\t\t\t\thistoryItemRefActions.set(action.id, []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thistoryItemRefActions.get(action.id)!.push(ref);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Register submenu, menu items\n\t\t\t\tfor (const historyItemRefMenuItem of historyItemRefMenuItems) {\n\t\t\t\t\tconst actionId = historyItemRefMenuItem.command.id;\n\n\t\t\t\t\tif (!historyItemRefActions.has(actionId)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Register the submenu for the original action\n\t\t\t\t\tthis._contextMenuDisposables.value.add(MenuRegistry.appendMenuItem(MenuId.SCMHistoryItemContext, {\n\t\t\t\t\t\ttitle: historyItemRefMenuItem.command.title,\n\t\t\t\t\t\tsubmenu: MenuId.for(actionId),\n\t\t\t\t\t\tgroup: historyItemRefMenuItem?.group,\n\t\t\t\t\t\torder: historyItemRefMenuItem?.order\n\t\t\t\t\t}));\n\n\t\t\t\t\t// Register the action for the history item ref\n\t\t\t\t\tfor (const historyItemRef of historyItemRefActions.get(actionId) ?? []) {\n\t\t\t\t\t\tthis._contextMenuDisposables.value.add(registerAction2(class extends Action2 {\n\t\t\t\t\t\t\tconstructor() {\n\t\t\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\t\t\tid: `${actionId}.${historyItemRef.id}`,\n\t\t\t\t\t\t\t\t\ttitle: historyItemRef.name,\n\t\t\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\t\t\tid: MenuId.for(actionId),\n\t\t\t\t\t\t\t\t\t\tgroup: historyItemRef.category\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toverride run(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\t\t\t\t\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\t\t\t\t\t\tcommandService.executeCommand(actionId, ...args, historyItemRef.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst contextKeyService = this.scopedContextKeyService.createOverlay([\n\t\t\t\t['scmHistoryItemHasCurrentHistoryItemRef', historyItem.references?.find(ref => ref.id === historyItemRef?.id) !== undefined]\n\t\t\t]);\n\n\t\t\tconst menuActions = this._menuService.getMenuActions(\n\t\t\t\tMenuId.SCMHistoryItemContext,\n\t\t\t\tcontextKeyService, {\n\t\t\t\targ: element.repository.provider,\n\t\t\t\tshouldForwardArgs: true\n\t\t\t}).filter(group => group[0] !== 'inline');\n\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tcontextKeyService: this.scopedContextKeyService,\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => getFlatContextMenuActions(menuActions),\n\t\t\t\tgetActionsContext: () => element.historyItemViewModel.historyItem\n\t\t\t});\n\t\t} else if (isSCMHistoryItemChangeViewModelTreeElement(element)) {\n\t\t\t// HistoryItemChange\n\t\t\tconst menuActions = this._menuService.getMenuActions(\n\t\t\t\tMenuId.SCMHistoryItemChangeContext,\n\t\t\t\tthis.scopedContextKeyService, {\n\t\t\t\targ: element.historyItemViewModel.historyItem,\n\t\t\t\tshouldForwardArgs: true\n\t\t\t}).filter(group => group[0] !== 'inline');\n\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tcontextKeyService: this.scopedContextKeyService,\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => getFlatContextMenuActions(menuActions),\n\t\t\t\tgetActionsContext: () => element.historyItemChange\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async _loadMore(cursor?: string): Promise<void> {\n\t\treturn this._treeLoadMoreSequencer.queue(async () => {\n\t\t\tif (this._repositoryIsLoadingMore.get()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._repositoryIsLoadingMore.set(true, undefined);\n\t\t\tthis._treeViewModel.loadMore(cursor);\n\n\t\t\tawait this._updateChildren();\n\t\t\tthis._repositoryIsLoadingMore.set(false, undefined);\n\t\t});\n\t}\n\n\tprivate _updateChildren(): Promise<void> {\n\t\treturn this._updateChildrenThrottler.queue(\n\t\t\t() => this._treeOperationSequencer.queue(\n\t\t\t\tasync () => {\n\t\t\t\t\tawait this._progressService.withProgress({ location: this.id, delay: 100 },\n\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\tawait this._tree.updateChildren(undefined, undefined, undefined, {\n\t\t\t\t\t\t\t\t// diffIdentityProvider: this._treeIdentityProvider\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t}));\n\t}\n\n\tprivate _updateIndentStyles(theme: IFileIconTheme, viewMode: ViewMode): void {\n\t\tthis._treeContainer.classList.toggle('list-view-mode', viewMode === ViewMode.List);\n\t\tthis._treeContainer.classList.toggle('tree-view-mode', viewMode === ViewMode.Tree);\n\t\tthis._treeContainer.classList.toggle('align-icons-and-twisties', (viewMode === ViewMode.List && theme.hasFileIcons) || (theme.hasFileIcons && !theme.hasFolderIcons));\n\t\tthis._treeContainer.classList.toggle('hide-arrows', viewMode === ViewMode.Tree && theme.hidesExplorerArrows === true);\n\t}\n\n\toverride dispose(): void {\n\t\tthis._contextMenuDisposables.dispose();\n\t\tthis._visibilityDisposables.dispose();\n\t\tsuper.dispose();\n\t}\n}\n"]}