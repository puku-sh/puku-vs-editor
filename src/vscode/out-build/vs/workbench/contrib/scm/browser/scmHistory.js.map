{"version":3,"sources":["vs/workbench/contrib/scm/browser/scmHistory.ts"],"names":[],"mappings":"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","file":"scmHistory.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { badgeBackground, chartsBlue, chartsPurple, foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { asCssVariable, ColorIdentifier, registerColor } from '../../../../platform/theme/common/colorUtils.js';\nimport { ISCMHistoryItem, ISCMHistoryItemGraphNode, ISCMHistoryItemRef, ISCMHistoryItemViewModel, SCMIncomingHistoryItemId, SCMOutgoingHistoryItemId } from '../common/history.js';\nimport { rot } from '../../../../base/common/numbers.js';\nimport { svgElem } from '../../../../base/browser/dom.js';\nimport { PANEL_BACKGROUND } from '../../../common/theme.js';\n\nexport const SWIMLANE_HEIGHT = 22;\nexport const SWIMLANE_WIDTH = 11;\nconst SWIMLANE_CURVE_RADIUS = 5;\nconst CIRCLE_RADIUS = 4;\nconst CIRCLE_STROKE_WIDTH = 2;\n\n/**\n * History item reference colors (local, remote, base)\n */\nexport const historyItemRefColor = registerColor('scmGraph.historyItemRefColor', chartsBlue, localize('scmGraphHistoryItemRefColor', \"History item reference color.\"));\nexport const historyItemRemoteRefColor = registerColor('scmGraph.historyItemRemoteRefColor', chartsPurple, localize('scmGraphHistoryItemRemoteRefColor', \"History item remote reference color.\"));\nexport const historyItemBaseRefColor = registerColor('scmGraph.historyItemBaseRefColor', '#EA5C00', localize('scmGraphHistoryItemBaseRefColor', \"History item base reference color.\"));\n\n/**\n * History item hover color\n */\nexport const historyItemHoverDefaultLabelForeground = registerColor('scmGraph.historyItemHoverDefaultLabelForeground', foreground, localize('scmGraphHistoryItemHoverDefaultLabelForeground', \"History item hover default label foreground color.\"));\nexport const historyItemHoverDefaultLabelBackground = registerColor('scmGraph.historyItemHoverDefaultLabelBackground', badgeBackground, localize('scmGraphHistoryItemHoverDefaultLabelBackground', \"History item hover default label background color.\"));\nexport const historyItemHoverLabelForeground = registerColor('scmGraph.historyItemHoverLabelForeground', PANEL_BACKGROUND, localize('scmGraphHistoryItemHoverLabelForeground', \"History item hover label foreground color.\"));\nexport const historyItemHoverAdditionsForeground = registerColor('scmGraph.historyItemHoverAdditionsForeground', { light: '#587C0C', dark: '#81B88B', hcDark: '#A1E3AD', hcLight: '#374E06' }, localize('scmGraph.HistoryItemHoverAdditionsForeground', \"History item hover additions foreground color.\"));\nexport const historyItemHoverDeletionsForeground = registerColor('scmGraph.historyItemHoverDeletionsForeground', { light: '#AD0707', dark: '#C74E39', hcDark: '#C74E39', hcLight: '#AD0707' }, localize('scmGraph.HistoryItemHoverDeletionsForeground', \"History item hover deletions foreground color.\"));\n\n/**\n * History graph color registry\n */\nexport const colorRegistry: ColorIdentifier[] = [\n\tregisterColor('scmGraph.foreground1', '#FFB000', localize('scmGraphForeground1', \"Source control graph foreground color (1).\")),\n\tregisterColor('scmGraph.foreground2', '#DC267F', localize('scmGraphForeground2', \"Source control graph foreground color (2).\")),\n\tregisterColor('scmGraph.foreground3', '#994F00', localize('scmGraphForeground3', \"Source control graph foreground color (3).\")),\n\tregisterColor('scmGraph.foreground4', '#40B0A6', localize('scmGraphForeground4', \"Source control graph foreground color (4).\")),\n\tregisterColor('scmGraph.foreground5', '#B66DFF', localize('scmGraphForeground5', \"Source control graph foreground color (5).\")),\n];\n\nfunction getLabelColorIdentifier(historyItem: ISCMHistoryItem, colorMap: Map<string, ColorIdentifier | undefined>): ColorIdentifier | undefined {\n\tif (historyItem.id === SCMIncomingHistoryItemId) {\n\t\treturn historyItemRemoteRefColor;\n\t} else if (historyItem.id === SCMOutgoingHistoryItemId) {\n\t\treturn historyItemRefColor;\n\t} else {\n\t\tfor (const ref of historyItem.references ?? []) {\n\t\t\tconst colorIdentifier = colorMap.get(ref.id);\n\t\t\tif (colorIdentifier !== undefined) {\n\t\t\t\treturn colorIdentifier;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\nfunction createPath(colorIdentifier: string, strokeWidth = 1): SVGPathElement {\n\tconst path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\tpath.setAttribute('fill', 'none');\n\tpath.setAttribute('stroke-width', `${strokeWidth}px`);\n\tpath.setAttribute('stroke-linecap', 'round');\n\tpath.style.stroke = asCssVariable(colorIdentifier);\n\n\treturn path;\n}\n\nfunction drawCircle(index: number, radius: number, strokeWidth: number, colorIdentifier?: string): SVGCircleElement {\n\tconst circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\tcircle.setAttribute('cx', `${SWIMLANE_WIDTH * (index + 1)}`);\n\tcircle.setAttribute('cy', `${SWIMLANE_WIDTH}`);\n\tcircle.setAttribute('r', `${radius}`);\n\n\tcircle.style.strokeWidth = `${strokeWidth}px`;\n\tif (colorIdentifier) {\n\t\tcircle.style.fill = asCssVariable(colorIdentifier);\n\t}\n\n\treturn circle;\n}\n\nfunction drawDashedCircle(index: number, radius: number, strokeWidth: number, colorIdentifier: string): SVGCircleElement {\n\tconst circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n\tcircle.setAttribute('cx', `${SWIMLANE_WIDTH * (index + 1)}`);\n\tcircle.setAttribute('cy', `${SWIMLANE_WIDTH}`);\n\tcircle.setAttribute('r', `${CIRCLE_RADIUS + 1}`);\n\n\tcircle.style.stroke = asCssVariable(colorIdentifier);\n\tcircle.style.strokeWidth = `${strokeWidth}px`;\n\tcircle.style.strokeDasharray = '4,2';\n\n\treturn circle;\n}\n\nfunction drawVerticalLine(x1: number, y1: number, y2: number, color: string, strokeWidth = 1): SVGPathElement {\n\tconst path = createPath(color, strokeWidth);\n\tpath.setAttribute('d', `M ${x1} ${y1} V ${y2}`);\n\n\treturn path;\n}\n\nfunction findLastIndex(nodes: ISCMHistoryItemGraphNode[], id: string): number {\n\tfor (let i = nodes.length - 1; i >= 0; i--) {\n\t\tif (nodes[i].id === id) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nexport function renderSCMHistoryItemGraph(historyItemViewModel: ISCMHistoryItemViewModel): SVGElement {\n\tconst svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\tsvg.classList.add('graph');\n\n\tconst historyItem = historyItemViewModel.historyItem;\n\tconst inputSwimlanes = historyItemViewModel.inputSwimlanes;\n\tconst outputSwimlanes = historyItemViewModel.outputSwimlanes;\n\n\t// Find the history item in the input swimlanes\n\tconst inputIndex = inputSwimlanes.findIndex(node => node.id === historyItem.id);\n\n\t// Circle index - use the input swimlane index if present, otherwise add it to the end\n\tconst circleIndex = inputIndex !== -1 ? inputIndex : inputSwimlanes.length;\n\n\t// Circle color - use the output swimlane color if present, otherwise the input swimlane color\n\tconst circleColor = circleIndex < outputSwimlanes.length ? outputSwimlanes[circleIndex].color :\n\t\tcircleIndex < inputSwimlanes.length ? inputSwimlanes[circleIndex].color : historyItemRefColor;\n\n\tlet outputSwimlaneIndex = 0;\n\tfor (let index = 0; index < inputSwimlanes.length; index++) {\n\t\tconst color = inputSwimlanes[index].color;\n\n\t\t// Current commit\n\t\tif (inputSwimlanes[index].id === historyItem.id) {\n\t\t\t// Base commit\n\t\t\tif (index !== circleIndex) {\n\t\t\t\tconst d: string[] = [];\n\t\t\t\tconst path = createPath(color);\n\n\t\t\t\t// Draw /\n\t\t\t\td.push(`M ${SWIMLANE_WIDTH * (index + 1)} 0`);\n\t\t\t\td.push(`A ${SWIMLANE_WIDTH} ${SWIMLANE_WIDTH} 0 0 1 ${SWIMLANE_WIDTH * (index)} ${SWIMLANE_WIDTH}`);\n\n\t\t\t\t// Draw -\n\t\t\t\td.push(`H ${SWIMLANE_WIDTH * (circleIndex + 1)}`);\n\n\t\t\t\tpath.setAttribute('d', d.join(' '));\n\t\t\t\tsvg.append(path);\n\t\t\t} else {\n\t\t\t\toutputSwimlaneIndex++;\n\t\t\t}\n\t\t} else {\n\t\t\t// Not the current commit\n\t\t\tif (outputSwimlaneIndex < outputSwimlanes.length &&\n\t\t\t\tinputSwimlanes[index].id === outputSwimlanes[outputSwimlaneIndex].id) {\n\t\t\t\tif (index === outputSwimlaneIndex) {\n\t\t\t\t\t// Draw |\n\t\t\t\t\tconst path = drawVerticalLine(SWIMLANE_WIDTH * (index + 1), 0, SWIMLANE_HEIGHT, color);\n\t\t\t\t\tsvg.append(path);\n\t\t\t\t} else {\n\t\t\t\t\tconst d: string[] = [];\n\t\t\t\t\tconst path = createPath(color);\n\n\t\t\t\t\t// Draw |\n\t\t\t\t\td.push(`M ${SWIMLANE_WIDTH * (index + 1)} 0`);\n\t\t\t\t\td.push(`V 6`);\n\n\t\t\t\t\t// Draw /\n\t\t\t\t\td.push(`A ${SWIMLANE_CURVE_RADIUS} ${SWIMLANE_CURVE_RADIUS} 0 0 1 ${(SWIMLANE_WIDTH * (index + 1)) - SWIMLANE_CURVE_RADIUS} ${SWIMLANE_HEIGHT / 2}`);\n\n\t\t\t\t\t// Draw -\n\t\t\t\t\td.push(`H ${(SWIMLANE_WIDTH * (outputSwimlaneIndex + 1)) + SWIMLANE_CURVE_RADIUS}`);\n\n\t\t\t\t\t// Draw /\n\t\t\t\t\td.push(`A ${SWIMLANE_CURVE_RADIUS} ${SWIMLANE_CURVE_RADIUS} 0 0 0 ${SWIMLANE_WIDTH * (outputSwimlaneIndex + 1)} ${(SWIMLANE_HEIGHT / 2) + SWIMLANE_CURVE_RADIUS}`);\n\n\t\t\t\t\t// Draw |\n\t\t\t\t\td.push(`V ${SWIMLANE_HEIGHT}`);\n\n\t\t\t\t\tpath.setAttribute('d', d.join(' '));\n\t\t\t\t\tsvg.append(path);\n\t\t\t\t}\n\n\t\t\t\toutputSwimlaneIndex++;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Add remaining parent(s)\n\tfor (let i = 1; i < historyItem.parentIds.length; i++) {\n\t\tconst parentOutputIndex = findLastIndex(outputSwimlanes, historyItem.parentIds[i]);\n\t\tif (parentOutputIndex === -1) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Draw -\\\n\t\tconst d: string[] = [];\n\t\tconst path = createPath(outputSwimlanes[parentOutputIndex].color);\n\n\t\t// Draw \\\n\t\td.push(`M ${SWIMLANE_WIDTH * parentOutputIndex} ${SWIMLANE_HEIGHT / 2}`);\n\t\td.push(`A ${SWIMLANE_WIDTH} ${SWIMLANE_WIDTH} 0 0 1 ${SWIMLANE_WIDTH * (parentOutputIndex + 1)} ${SWIMLANE_HEIGHT}`);\n\n\t\t// Draw -\n\t\td.push(`M ${SWIMLANE_WIDTH * parentOutputIndex} ${SWIMLANE_HEIGHT / 2}`);\n\t\td.push(`H ${SWIMLANE_WIDTH * (circleIndex + 1)} `);\n\n\t\tpath.setAttribute('d', d.join(' '));\n\t\tsvg.append(path);\n\t}\n\n\t// Draw | to *\n\tif (inputIndex !== -1) {\n\t\tconst path = drawVerticalLine(SWIMLANE_WIDTH * (circleIndex + 1), 0, SWIMLANE_HEIGHT / 2, inputSwimlanes[inputIndex].color);\n\t\tsvg.append(path);\n\t}\n\n\t// Draw | from *\n\tif (historyItem.parentIds.length > 0) {\n\t\tconst path = drawVerticalLine(SWIMLANE_WIDTH * (circleIndex + 1), SWIMLANE_HEIGHT / 2, SWIMLANE_HEIGHT, circleColor);\n\t\tsvg.append(path);\n\t}\n\n\t// Draw *\n\tif (historyItemViewModel.kind === 'HEAD') {\n\t\t// HEAD\n\t\tconst outerCircle = drawCircle(circleIndex, CIRCLE_RADIUS + 3, CIRCLE_STROKE_WIDTH, circleColor);\n\t\tsvg.append(outerCircle);\n\n\t\tconst innerCircle = drawCircle(circleIndex, CIRCLE_STROKE_WIDTH, CIRCLE_RADIUS);\n\t\tsvg.append(innerCircle);\n\t} else if (historyItemViewModel.kind === 'incoming-changes' || historyItemViewModel.kind === 'outgoing-changes') {\n\t\t// Incoming/Outgoing changes\n\t\tconst outerCircle = drawCircle(circleIndex, CIRCLE_RADIUS + 3, CIRCLE_STROKE_WIDTH, circleColor);\n\t\tsvg.append(outerCircle);\n\n\t\tconst innerCircle = drawCircle(circleIndex, CIRCLE_RADIUS + 1, CIRCLE_STROKE_WIDTH + 1);\n\t\tsvg.append(innerCircle);\n\n\t\tconst dashedCircle = drawDashedCircle(circleIndex, CIRCLE_RADIUS + 1, CIRCLE_STROKE_WIDTH - 1, circleColor);\n\t\tsvg.append(dashedCircle);\n\t} else {\n\t\tif (historyItem.parentIds.length > 1) {\n\t\t\t// Multi-parent node\n\t\t\tconst circleOuter = drawCircle(circleIndex, CIRCLE_RADIUS + 2, CIRCLE_STROKE_WIDTH, circleColor);\n\t\t\tsvg.append(circleOuter);\n\n\t\t\tconst circleInner = drawCircle(circleIndex, CIRCLE_RADIUS - 1, CIRCLE_STROKE_WIDTH, circleColor);\n\t\t\tsvg.append(circleInner);\n\t\t} else {\n\t\t\t// Node\n\t\t\tconst circle = drawCircle(circleIndex, CIRCLE_RADIUS + 1, CIRCLE_STROKE_WIDTH, circleColor);\n\t\t\tsvg.append(circle);\n\t\t}\n\t}\n\n\t// Set dimensions\n\tsvg.style.height = `${SWIMLANE_HEIGHT}px`;\n\tsvg.style.width = `${SWIMLANE_WIDTH * (Math.max(inputSwimlanes.length, outputSwimlanes.length, 1) + 1)}px`;\n\n\treturn svg;\n}\n\nexport function renderSCMHistoryGraphPlaceholder(columns: ISCMHistoryItemGraphNode[], highlightIndex?: number): HTMLElement {\n\tconst elements = svgElem('svg', {\n\t\tstyle: { height: `${SWIMLANE_HEIGHT}px`, width: `${SWIMLANE_WIDTH * (columns.length + 1)}px`, }\n\t});\n\n\t// Draw |\n\tfor (let index = 0; index < columns.length; index++) {\n\t\tconst strokeWidth = index === highlightIndex ? 3 : 1;\n\t\tconst path = drawVerticalLine(SWIMLANE_WIDTH * (index + 1), 0, SWIMLANE_HEIGHT, columns[index].color, strokeWidth);\n\t\telements.root.append(path);\n\t}\n\n\treturn elements.root;\n}\n\nexport function toISCMHistoryItemViewModelArray(\n\thistoryItems: ISCMHistoryItem[],\n\tcolorMap = new Map<string, ColorIdentifier | undefined>(),\n\tcurrentHistoryItemRef?: ISCMHistoryItemRef,\n\tcurrentHistoryItemRemoteRef?: ISCMHistoryItemRef,\n\tcurrentHistoryItemBaseRef?: ISCMHistoryItemRef,\n\taddIncomingChanges?: boolean,\n\taddOutgoingChanges?: boolean,\n\tmergeBase?: string\n): ISCMHistoryItemViewModel[] {\n\tlet colorIndex = -1;\n\tconst viewModels: ISCMHistoryItemViewModel[] = [];\n\n\t// Add incoming/outgoing changes history items\n\taddIncomingOutgoingChangesHistoryItems(\n\t\thistoryItems,\n\t\tcurrentHistoryItemRef,\n\t\tcurrentHistoryItemRemoteRef,\n\t\taddIncomingChanges,\n\t\taddOutgoingChanges,\n\t\tmergeBase\n\t);\n\n\tfor (let index = 0; index < historyItems.length; index++) {\n\t\tconst historyItem = historyItems[index];\n\n\t\tconst kind = getHistoryItemViewModelKind(historyItem, currentHistoryItemRef);\n\t\tconst outputSwimlanesFromPreviousItem = viewModels.at(-1)?.outputSwimlanes ?? [];\n\t\tconst inputSwimlanes = outputSwimlanesFromPreviousItem.map(i => deepClone(i));\n\t\tconst outputSwimlanes: ISCMHistoryItemGraphNode[] = [];\n\n\t\tlet firstParentAdded = false;\n\n\t\t// Add first parent to the output\n\t\tif (historyItem.parentIds.length > 0) {\n\t\t\tfor (const node of inputSwimlanes) {\n\t\t\t\tif (node.id === historyItem.id) {\n\t\t\t\t\tif (!firstParentAdded) {\n\t\t\t\t\t\toutputSwimlanes.push({\n\t\t\t\t\t\t\tid: historyItem.parentIds[0],\n\t\t\t\t\t\t\tcolor: getLabelColorIdentifier(historyItem, colorMap) ?? node.color\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfirstParentAdded = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\toutputSwimlanes.push(deepClone(node));\n\t\t\t}\n\t\t}\n\n\t\t// Add unprocessed parent(s) to the output\n\t\tfor (let i = firstParentAdded ? 1 : 0; i < historyItem.parentIds.length; i++) {\n\t\t\t// Color index (label -> next color)\n\t\t\tlet colorIdentifier: string | undefined;\n\n\t\t\tif (i === 0) {\n\t\t\t\tcolorIdentifier = getLabelColorIdentifier(historyItem, colorMap);\n\t\t\t} else {\n\t\t\t\tconst historyItemParent = historyItems\n\t\t\t\t\t.find(h => h.id === historyItem.parentIds[i]);\n\t\t\t\tcolorIdentifier = historyItemParent ? getLabelColorIdentifier(historyItemParent, colorMap) : undefined;\n\t\t\t}\n\n\t\t\tif (!colorIdentifier) {\n\t\t\t\tcolorIndex = rot(colorIndex + 1, colorRegistry.length);\n\t\t\t\tcolorIdentifier = colorRegistry[colorIndex];\n\t\t\t}\n\n\t\t\toutputSwimlanes.push({\n\t\t\t\tid: historyItem.parentIds[i],\n\t\t\t\tcolor: colorIdentifier\n\t\t\t});\n\t\t}\n\n\t\t// Add colors to references\n\t\tconst references = (historyItem.references ?? [])\n\t\t\t.map(ref => {\n\t\t\t\tlet color = colorMap.get(ref.id);\n\t\t\t\tif (colorMap.has(ref.id) && color === undefined) {\n\t\t\t\t\t// Find the history item in the input swimlanes\n\t\t\t\t\tconst inputIndex = inputSwimlanes.findIndex(node => node.id === historyItem.id);\n\n\t\t\t\t\t// Circle index - use the input swimlane index if present, otherwise add it to the end\n\t\t\t\t\tconst circleIndex = inputIndex !== -1 ? inputIndex : inputSwimlanes.length;\n\n\t\t\t\t\t// Circle color - use the output swimlane color if present, otherwise the input swimlane color\n\t\t\t\t\tcolor = circleIndex < outputSwimlanes.length ? outputSwimlanes[circleIndex].color :\n\t\t\t\t\t\tcircleIndex < inputSwimlanes.length ? inputSwimlanes[circleIndex].color : historyItemRefColor;\n\t\t\t\t}\n\n\t\t\t\treturn { ...ref, color };\n\t\t\t});\n\n\t\t// Sort references\n\t\treferences.sort((ref1, ref2) =>\n\t\t\tcompareHistoryItemRefs(ref1, ref2, currentHistoryItemRef, currentHistoryItemRemoteRef, currentHistoryItemBaseRef));\n\n\t\tviewModels.push({\n\t\t\thistoryItem: {\n\t\t\t\t...historyItem,\n\t\t\t\treferences\n\t\t\t},\n\t\t\tkind,\n\t\t\tinputSwimlanes,\n\t\t\toutputSwimlanes\n\t\t} satisfies ISCMHistoryItemViewModel);\n\t}\n\n\treturn viewModels;\n}\n\nexport function getHistoryItemIndex(historyItemViewModel: ISCMHistoryItemViewModel): number {\n\tconst historyItem = historyItemViewModel.historyItem;\n\tconst inputSwimlanes = historyItemViewModel.inputSwimlanes;\n\n\t// Find the history item in the input swimlanes\n\tconst inputIndex = inputSwimlanes.findIndex(node => node.id === historyItem.id);\n\n\t// Circle index - use the input swimlane index if present, otherwise add it to the end\n\treturn inputIndex !== -1 ? inputIndex : inputSwimlanes.length;\n}\n\nfunction getHistoryItemViewModelKind(historyItem: ISCMHistoryItem, currentHistoryItemRef?: ISCMHistoryItemRef): 'HEAD' | 'node' | 'incoming-changes' | 'outgoing-changes' {\n\tswitch (historyItem.id) {\n\t\tcase currentHistoryItemRef?.revision:\n\t\t\treturn 'HEAD';\n\t\tcase SCMIncomingHistoryItemId:\n\t\t\treturn 'incoming-changes';\n\t\tcase SCMOutgoingHistoryItemId:\n\t\t\treturn 'outgoing-changes';\n\t\tdefault:\n\t\t\treturn 'node';\n\t}\n}\n\nfunction addIncomingOutgoingChangesHistoryItems(\n\thistoryItems: ISCMHistoryItem[],\n\tcurrentHistoryItemRef?: ISCMHistoryItemRef,\n\tcurrentHistoryItemRemoteRef?: ISCMHistoryItemRef,\n\taddIncomingChanges?: boolean,\n\taddOutgoingChanges?: boolean,\n\tmergeBase?: string\n): void {\n\tif (historyItems.length > 0 && mergeBase && currentHistoryItemRef?.revision !== currentHistoryItemRemoteRef?.revision) {\n\t\t// Incoming changes history item\n\t\tif (addIncomingChanges && currentHistoryItemRemoteRef && currentHistoryItemRemoteRef.revision !== mergeBase) {\n\t\t\t// Start from the current history item remote ref and walk towards the merge base\n\t\t\tconst currentHistoryItemRemoteIndex = historyItems\n\t\t\t\t.findIndex(h => h.id === currentHistoryItemRemoteRef.revision);\n\n\t\t\tlet beforeHistoryItemIndex = -1;\n\t\t\tif (currentHistoryItemRemoteIndex !== -1) {\n\t\t\t\tlet historyItemParentId = historyItems[currentHistoryItemRemoteIndex].parentIds[0];\n\t\t\t\tfor (let index = currentHistoryItemRemoteIndex; index < historyItems.length; index++) {\n\t\t\t\t\tif (historyItems[index].parentIds.includes(mergeBase)) {\n\t\t\t\t\t\tbeforeHistoryItemIndex = index;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (historyItems[index].parentIds.includes(historyItemParentId)) {\n\t\t\t\t\t\thistoryItemParentId = historyItems[index].parentIds[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst afterHistoryItemIndex = historyItems.findIndex(h => h.id === mergeBase);\n\n\t\t\tif (beforeHistoryItemIndex !== -1 && afterHistoryItemIndex !== -1) {\n\t\t\t\t// There is a known edge case in which the incoming changes have already\n\t\t\t\t// been merged. For this scenario, we will not be showing the incoming\n\t\t\t\t// changes history item. https://github.com/microsoft/vscode/issues/276064\n\t\t\t\tconst incomingChangeMerged = historyItems[beforeHistoryItemIndex].parentIds.length === 2 &&\n\t\t\t\t\thistoryItems[beforeHistoryItemIndex].parentIds.includes(mergeBase);\n\n\t\t\t\tif (!incomingChangeMerged) {\n\t\t\t\t\t// Insert incoming history item\n\t\t\t\t\thistoryItems.splice(afterHistoryItemIndex, 0, {\n\t\t\t\t\t\tid: SCMIncomingHistoryItemId,\n\t\t\t\t\t\tdisplayId: '0'.repeat(historyItems[0].displayId?.length ?? 0),\n\t\t\t\t\t\tparentIds: historyItems[beforeHistoryItemIndex].parentIds.slice(),\n\t\t\t\t\t\tauthor: currentHistoryItemRemoteRef?.name,\n\t\t\t\t\t\tsubject: localize('incomingChanges', 'Incoming Changes'),\n\t\t\t\t\t\tmessage: ''\n\t\t\t\t\t} satisfies ISCMHistoryItem);\n\n\t\t\t\t\t// Update the before history item to point to incoming changes history item\n\t\t\t\t\thistoryItems[beforeHistoryItemIndex] = {\n\t\t\t\t\t\t...historyItems[beforeHistoryItemIndex],\n\t\t\t\t\t\tparentIds: historyItems[beforeHistoryItemIndex].parentIds.map(id => {\n\t\t\t\t\t\t\treturn id === mergeBase ? SCMIncomingHistoryItemId : id;\n\t\t\t\t\t\t})\n\t\t\t\t\t} satisfies ISCMHistoryItem;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Outgoing changes history item\n\t\tif (addOutgoingChanges && currentHistoryItemRef?.revision && currentHistoryItemRef.revision !== mergeBase) {\n\t\t\tconst afterHistoryItemIndex = historyItems.findIndex(h => h.id === currentHistoryItemRef.revision);\n\n\t\t\tif (afterHistoryItemIndex !== -1) {\n\t\t\t\t// Insert outgoing history item\n\t\t\t\thistoryItems.splice(afterHistoryItemIndex, 0, {\n\t\t\t\t\tid: SCMOutgoingHistoryItemId,\n\t\t\t\t\tdisplayId: '0'.repeat(historyItems[0].displayId?.length ?? 0),\n\t\t\t\t\tparentIds: [currentHistoryItemRef.revision],\n\t\t\t\t\tauthor: currentHistoryItemRef?.name,\n\t\t\t\t\tsubject: localize('outgoingChanges', 'Outgoing Changes'),\n\t\t\t\t\tmessage: ''\n\t\t\t\t} satisfies ISCMHistoryItem);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function compareHistoryItemRefs(\n\tref1: ISCMHistoryItemRef,\n\tref2: ISCMHistoryItemRef,\n\tcurrentHistoryItemRef?: ISCMHistoryItemRef,\n\tcurrentHistoryItemRemoteRef?: ISCMHistoryItemRef,\n\tcurrentHistoryItemBaseRef?: ISCMHistoryItemRef\n): number {\n\tconst getHistoryItemRefOrder = (ref: ISCMHistoryItemRef) => {\n\t\tif (ref.id === currentHistoryItemRef?.id) {\n\t\t\treturn 1;\n\t\t} else if (ref.id === currentHistoryItemRemoteRef?.id) {\n\t\t\treturn 2;\n\t\t} else if (ref.id === currentHistoryItemBaseRef?.id) {\n\t\t\treturn 3;\n\t\t} else if (ref.color !== undefined) {\n\t\t\treturn 4;\n\t\t}\n\n\t\treturn 99;\n\t};\n\n\t// Assign order (current > remote > base > color)\n\tconst ref1Order = getHistoryItemRefOrder(ref1);\n\tconst ref2Order = getHistoryItemRefOrder(ref2);\n\n\treturn ref1Order - ref2Order;\n}\n"]}