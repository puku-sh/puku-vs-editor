{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/scm/browser/util.ts","vs/workbench/contrib/scm/browser/util.ts"],"names":[],"mappings":"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","file":"util.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ISCMHistoryItem, SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemLoadMoreTreeElement, SCMHistoryItemViewModelTreeElement } from '../common/history.js';\nimport { ISCMResource, ISCMRepository, ISCMResourceGroup, ISCMInput, ISCMActionButton, ISCMViewService, ISCMProvider } from '../common/scm.js';\nimport { IMenu, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IActionViewItemProvider } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport { createActionViewItem, getActionBarActions, getContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { ActionViewItem, IBaseActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { Command } from '../../../../editor/common/languages.js';\nimport { reset } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IResourceNode, ResourceTree } from '../../../../base/common/resourceTree.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { SCMArtifactGroupTreeElement, SCMArtifactTreeElement } from '../common/artifact.js';\n\nexport function isSCMViewService(element: unknown): element is ISCMViewService {\n\treturn Array.isArray((element as ISCMViewService).repositories) && Array.isArray((element as ISCMViewService).visibleRepositories);\n}\n\nexport function isSCMRepository(element: unknown): element is ISCMRepository {\n\treturn !!(element as ISCMRepository).provider && !!(element as ISCMRepository).input;\n}\n\nexport function isSCMInput(element: unknown): element is ISCMInput {\n\treturn !!(element as ISCMInput).validateInput && typeof (element as ISCMInput).value === 'string';\n}\n\nexport function isSCMActionButton(element: unknown): element is ISCMActionButton {\n\treturn (element as ISCMActionButton).type === 'actionButton';\n}\n\nexport function isSCMResourceGroup(element: unknown): element is ISCMResourceGroup {\n\treturn !!(element as ISCMResourceGroup).provider && !!(element as ISCMResourceGroup).resources;\n}\n\nexport function isSCMResource(element: unknown): element is ISCMResource {\n\treturn !!(element as ISCMResource).sourceUri && isSCMResourceGroup((element as ISCMResource).resourceGroup);\n}\n\nexport function isSCMResourceNode(element: unknown): element is IResourceNode<ISCMResource, ISCMResourceGroup> {\n\treturn ResourceTree.isResourceNode(element) && isSCMResourceGroup(element.context);\n}\n\nexport function isSCMHistoryItemViewModelTreeElement(element: unknown): element is SCMHistoryItemViewModelTreeElement {\n\treturn (element as SCMHistoryItemViewModelTreeElement).type === 'historyItemViewModel';\n}\n\nexport function isSCMHistoryItemLoadMoreTreeElement(element: unknown): element is SCMHistoryItemLoadMoreTreeElement {\n\treturn (element as SCMHistoryItemLoadMoreTreeElement).type === 'historyItemLoadMore';\n}\n\nexport function isSCMHistoryItemChangeViewModelTreeElement(element: unknown): element is SCMHistoryItemChangeViewModelTreeElement {\n\treturn (element as SCMHistoryItemChangeViewModelTreeElement).type === 'historyItemChangeViewModel';\n}\n\nexport function isSCMHistoryItemChangeNode(element: unknown): element is IResourceNode<ISCMHistoryItem, SCMHistoryItemChangeViewModelTreeElement> {\n\treturn ResourceTree.isResourceNode(element) && isSCMHistoryItemViewModelTreeElement(element.context);\n}\n\nexport function isSCMArtifactGroupTreeElement(element: unknown): element is SCMArtifactGroupTreeElement {\n\treturn (element as SCMArtifactGroupTreeElement).type === 'artifactGroup';\n}\n\nexport function isSCMArtifactNode(element: unknown): element is IResourceNode<SCMArtifactTreeElement, SCMArtifactGroupTreeElement> {\n\treturn ResourceTree.isResourceNode(element) && isSCMArtifactGroupTreeElement(element.context);\n}\n\nexport function isSCMArtifactTreeElement(element: unknown): element is SCMArtifactTreeElement {\n\treturn (element as SCMArtifactTreeElement).type === 'artifact';\n}\n\nconst compareActions = (a: IAction, b: IAction) => {\n\tif (a instanceof MenuItemAction && b instanceof MenuItemAction) {\n\t\treturn a.id === b.id && a.enabled === b.enabled && a.hideActions?.isHidden === b.hideActions?.isHidden;\n\t}\n\n\treturn a.id === b.id && a.enabled === b.enabled;\n};\n\nexport function connectPrimaryMenu(menu: IMenu, callback: (primary: IAction[], secondary: IAction[]) => void, primaryGroup?: string, arg?: unknown): IDisposable {\n\tlet cachedPrimary: IAction[] = [];\n\tlet cachedSecondary: IAction[] = [];\n\n\tconst updateActions = () => {\n\t\tconst { primary, secondary } = getActionBarActions(menu.getActions({ arg, shouldForwardArgs: true }), primaryGroup);\n\n\t\tif (equals(cachedPrimary, primary, compareActions) && equals(cachedSecondary, secondary, compareActions)) {\n\t\t\treturn;\n\t\t}\n\n\t\tcachedPrimary = primary;\n\t\tcachedSecondary = secondary;\n\n\t\tcallback(primary, secondary);\n\t};\n\n\tupdateActions();\n\n\treturn menu.onDidChange(updateActions);\n}\n\nexport function collectContextMenuActions(menu: IMenu, arg?: unknown): IAction[] {\n\treturn getContextMenuActions(menu.getActions({ arg, shouldForwardArgs: true }), 'inline').secondary;\n}\n\nexport class StatusBarAction extends Action {\n\treadonly commandTitle: string | undefined;\n\n\tconstructor(\n\t\tprivate command: Command,\n\t\tprivate commandService: ICommandService\n\t) {\n\t\tsuper(`statusbaraction{${command.id}}`, getStatusBarCommandGenericName(command), '', true);\n\n\t\tthis.commandTitle = command.title;\n\t\tthis.tooltip = command.tooltip || '';\n\t}\n\n\toverride run(): Promise<void> {\n\t\treturn this.commandService.executeCommand(this.command.id, ...(this.command.arguments || []));\n\t}\n}\n\nclass StatusBarActionViewItem extends ActionViewItem {\n\tprivate readonly _commandTitle: string | undefined;\n\n\tconstructor(action: StatusBarAction, options: IBaseActionViewItemOptions) {\n\t\tsuper(null, action, { ...options, icon: false, label: true });\n\t\tthis._commandTitle = action.commandTitle;\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tcontainer.classList.add('scm-status-bar-action');\n\t\tsuper.render(container);\n\t}\n\n\tprotected override updateLabel(): void {\n\t\tif (this.options.label && this.label) {\n\t\t\t// Convert text nodes to span elements to enable\n\t\t\t// text overflow on the left hand side of the label\n\t\t\tconst elements = renderLabelWithIcons(this._commandTitle ?? this.action.label)\n\t\t\t\t.map(element => {\n\t\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\t\tconst span = document.createElement('span');\n\t\t\t\t\t\tspan.textContent = element;\n\t\t\t\t\t\treturn span;\n\t\t\t\t\t}\n\t\t\t\t\treturn element;\n\t\t\t\t});\n\n\t\t\treset(this.label, ...elements);\n\t\t}\n\t}\n}\n\nexport function getActionViewItemProvider(instaService: IInstantiationService): IActionViewItemProvider {\n\treturn (action, options) => {\n\t\tif (action instanceof StatusBarAction) {\n\t\t\treturn new StatusBarActionViewItem(action, options);\n\t\t}\n\n\t\treturn createActionViewItem(instaService, action, options);\n\t};\n}\n\nexport function getProviderKey(provider: ISCMProvider): string {\n\treturn `${provider.providerId}:${provider.label}${provider.rootUri ? `:${provider.rootUri.toString()}` : ''}`;\n}\n\nexport function getRepositoryResourceCount(provider: ISCMProvider): number {\n\treturn provider.groups.reduce<number>((r, g) => r + g.resources.length, 0);\n}\n\nexport function getHistoryItemEditorTitle(historyItem: ISCMHistoryItem): string {\n\treturn `${historyItem.displayId ?? historyItem.id} - ${historyItem.subject}`;\n}\n\nexport function getSCMRepositoryIcon(\n\tactiveRepository: { repository: ISCMRepository; pinned: boolean } | undefined,\n\trepository: ISCMRepository\n): ThemeIcon {\n\tif (!ThemeIcon.isThemeIcon(repository.provider.iconPath)) {\n\t\treturn Codicon.repo;\n\t}\n\n\tif (\n\t\tactiveRepository?.pinned === true &&\n\t\tactiveRepository?.repository.id === repository.id &&\n\t\trepository.provider.iconPath.id === Codicon.repo.id\n\t) {\n\t\treturn Codicon.repoPinned;\n\t}\n\n\treturn repository.provider.iconPath;\n}\n\nexport function getStatusBarCommandGenericName(command: Command): string | undefined {\n\tlet genericName: string | undefined = undefined;\n\n\t// Get a generic name for the status bar action, derive this from the first\n\t// command argument which is in the form of \"<extension>.<command>/<number>\"\n\tif (typeof command.arguments?.[0] === 'string') {\n\t\tconst lastIndex = command.arguments[0].lastIndexOf('/');\n\n\t\tgenericName = lastIndex !== -1\n\t\t\t? command.arguments[0].substring(0, lastIndex)\n\t\t\t: command.arguments[0];\n\n\t\tgenericName = genericName\n\t\t\t.replace(/^(?:git\\.|remoteHub\\.)/, '')\n\t\t\t.trim();\n\n\t\tif (genericName.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Capitalize first letter\n\t\tgenericName = genericName[0].toLocaleUpperCase() + genericName.slice(1);\n\t}\n\n\treturn genericName;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ISCMHistoryItem, SCMHistoryItemChangeViewModelTreeElement, SCMHistoryItemLoadMoreTreeElement, SCMHistoryItemViewModelTreeElement } from '../common/history.js';\nimport { ISCMResource, ISCMRepository, ISCMResourceGroup, ISCMInput, ISCMActionButton, ISCMViewService, ISCMProvider } from '../common/scm.js';\nimport { IMenu, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IActionViewItemProvider } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport { createActionViewItem, getActionBarActions, getContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { ActionViewItem, IBaseActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { Command } from '../../../../editor/common/languages.js';\nimport { reset } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IResourceNode, ResourceTree } from '../../../../base/common/resourceTree.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { SCMArtifactGroupTreeElement, SCMArtifactTreeElement } from '../common/artifact.js';\n\nexport function isSCMViewService(element: unknown): element is ISCMViewService {\n\treturn Array.isArray((element as ISCMViewService).repositories) && Array.isArray((element as ISCMViewService).visibleRepositories);\n}\n\nexport function isSCMRepository(element: unknown): element is ISCMRepository {\n\treturn !!(element as ISCMRepository).provider && !!(element as ISCMRepository).input;\n}\n\nexport function isSCMInput(element: unknown): element is ISCMInput {\n\treturn !!(element as ISCMInput).validateInput && typeof (element as ISCMInput).value === 'string';\n}\n\nexport function isSCMActionButton(element: unknown): element is ISCMActionButton {\n\treturn (element as ISCMActionButton).type === 'actionButton';\n}\n\nexport function isSCMResourceGroup(element: unknown): element is ISCMResourceGroup {\n\treturn !!(element as ISCMResourceGroup).provider && !!(element as ISCMResourceGroup).resources;\n}\n\nexport function isSCMResource(element: unknown): element is ISCMResource {\n\treturn !!(element as ISCMResource).sourceUri && isSCMResourceGroup((element as ISCMResource).resourceGroup);\n}\n\nexport function isSCMResourceNode(element: unknown): element is IResourceNode<ISCMResource, ISCMResourceGroup> {\n\treturn ResourceTree.isResourceNode(element) && isSCMResourceGroup(element.context);\n}\n\nexport function isSCMHistoryItemViewModelTreeElement(element: unknown): element is SCMHistoryItemViewModelTreeElement {\n\treturn (element as SCMHistoryItemViewModelTreeElement).type === 'historyItemViewModel';\n}\n\nexport function isSCMHistoryItemLoadMoreTreeElement(element: unknown): element is SCMHistoryItemLoadMoreTreeElement {\n\treturn (element as SCMHistoryItemLoadMoreTreeElement).type === 'historyItemLoadMore';\n}\n\nexport function isSCMHistoryItemChangeViewModelTreeElement(element: unknown): element is SCMHistoryItemChangeViewModelTreeElement {\n\treturn (element as SCMHistoryItemChangeViewModelTreeElement).type === 'historyItemChangeViewModel';\n}\n\nexport function isSCMHistoryItemChangeNode(element: unknown): element is IResourceNode<ISCMHistoryItem, SCMHistoryItemChangeViewModelTreeElement> {\n\treturn ResourceTree.isResourceNode(element) && isSCMHistoryItemViewModelTreeElement(element.context);\n}\n\nexport function isSCMArtifactGroupTreeElement(element: unknown): element is SCMArtifactGroupTreeElement {\n\treturn (element as SCMArtifactGroupTreeElement).type === 'artifactGroup';\n}\n\nexport function isSCMArtifactNode(element: unknown): element is IResourceNode<SCMArtifactTreeElement, SCMArtifactGroupTreeElement> {\n\treturn ResourceTree.isResourceNode(element) && isSCMArtifactGroupTreeElement(element.context);\n}\n\nexport function isSCMArtifactTreeElement(element: unknown): element is SCMArtifactTreeElement {\n\treturn (element as SCMArtifactTreeElement).type === 'artifact';\n}\n\nconst compareActions = (a: IAction, b: IAction) => {\n\tif (a instanceof MenuItemAction && b instanceof MenuItemAction) {\n\t\treturn a.id === b.id && a.enabled === b.enabled && a.hideActions?.isHidden === b.hideActions?.isHidden;\n\t}\n\n\treturn a.id === b.id && a.enabled === b.enabled;\n};\n\nexport function connectPrimaryMenu(menu: IMenu, callback: (primary: IAction[], secondary: IAction[]) => void, primaryGroup?: string, arg?: unknown): IDisposable {\n\tlet cachedPrimary: IAction[] = [];\n\tlet cachedSecondary: IAction[] = [];\n\n\tconst updateActions = () => {\n\t\tconst { primary, secondary } = getActionBarActions(menu.getActions({ arg, shouldForwardArgs: true }), primaryGroup);\n\n\t\tif (equals(cachedPrimary, primary, compareActions) && equals(cachedSecondary, secondary, compareActions)) {\n\t\t\treturn;\n\t\t}\n\n\t\tcachedPrimary = primary;\n\t\tcachedSecondary = secondary;\n\n\t\tcallback(primary, secondary);\n\t};\n\n\tupdateActions();\n\n\treturn menu.onDidChange(updateActions);\n}\n\nexport function collectContextMenuActions(menu: IMenu, arg?: unknown): IAction[] {\n\treturn getContextMenuActions(menu.getActions({ arg, shouldForwardArgs: true }), 'inline').secondary;\n}\n\nexport class StatusBarAction extends Action {\n\treadonly commandTitle: string | undefined;\n\n\tconstructor(\n\t\tprivate command: Command,\n\t\tprivate commandService: ICommandService\n\t) {\n\t\tsuper(`statusbaraction{${command.id}}`, getStatusBarCommandGenericName(command), '', true);\n\n\t\tthis.commandTitle = command.title;\n\t\tthis.tooltip = command.tooltip || '';\n\t}\n\n\toverride run(): Promise<void> {\n\t\treturn this.commandService.executeCommand(this.command.id, ...(this.command.arguments || []));\n\t}\n}\n\nclass StatusBarActionViewItem extends ActionViewItem {\n\tprivate readonly _commandTitle: string | undefined;\n\n\tconstructor(action: StatusBarAction, options: IBaseActionViewItemOptions) {\n\t\tsuper(null, action, { ...options, icon: false, label: true });\n\t\tthis._commandTitle = action.commandTitle;\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tcontainer.classList.add('scm-status-bar-action');\n\t\tsuper.render(container);\n\t}\n\n\tprotected override updateLabel(): void {\n\t\tif (this.options.label && this.label) {\n\t\t\t// Convert text nodes to span elements to enable\n\t\t\t// text overflow on the left hand side of the label\n\t\t\tconst elements = renderLabelWithIcons(this._commandTitle ?? this.action.label)\n\t\t\t\t.map(element => {\n\t\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\t\tconst span = document.createElement('span');\n\t\t\t\t\t\tspan.textContent = element;\n\t\t\t\t\t\treturn span;\n\t\t\t\t\t}\n\t\t\t\t\treturn element;\n\t\t\t\t});\n\n\t\t\treset(this.label, ...elements);\n\t\t}\n\t}\n}\n\nexport function getActionViewItemProvider(instaService: IInstantiationService): IActionViewItemProvider {\n\treturn (action, options) => {\n\t\tif (action instanceof StatusBarAction) {\n\t\t\treturn new StatusBarActionViewItem(action, options);\n\t\t}\n\n\t\treturn createActionViewItem(instaService, action, options);\n\t};\n}\n\nexport function getProviderKey(provider: ISCMProvider): string {\n\treturn `${provider.providerId}:${provider.label}${provider.rootUri ? `:${provider.rootUri.toString()}` : ''}`;\n}\n\nexport function getRepositoryResourceCount(provider: ISCMProvider): number {\n\treturn provider.groups.reduce<number>((r, g) => r + g.resources.length, 0);\n}\n\nexport function getHistoryItemEditorTitle(historyItem: ISCMHistoryItem): string {\n\treturn `${historyItem.displayId ?? historyItem.id} - ${historyItem.subject}`;\n}\n\nexport function getSCMRepositoryIcon(\n\tactiveRepository: { repository: ISCMRepository; pinned: boolean } | undefined,\n\trepository: ISCMRepository\n): ThemeIcon {\n\tif (!ThemeIcon.isThemeIcon(repository.provider.iconPath)) {\n\t\treturn Codicon.repo;\n\t}\n\n\tif (\n\t\tactiveRepository?.pinned === true &&\n\t\tactiveRepository?.repository.id === repository.id &&\n\t\trepository.provider.iconPath.id === Codicon.repo.id\n\t) {\n\t\treturn Codicon.repoPinned;\n\t}\n\n\treturn repository.provider.iconPath;\n}\n\nexport function getStatusBarCommandGenericName(command: Command): string | undefined {\n\tlet genericName: string | undefined = undefined;\n\n\t// Get a generic name for the status bar action, derive this from the first\n\t// command argument which is in the form of \"<extension>.<command>/<number>\"\n\tif (typeof command.arguments?.[0] === 'string') {\n\t\tconst lastIndex = command.arguments[0].lastIndexOf('/');\n\n\t\tgenericName = lastIndex !== -1\n\t\t\t? command.arguments[0].substring(0, lastIndex)\n\t\t\t: command.arguments[0];\n\n\t\tgenericName = genericName\n\t\t\t.replace(/^(?:git\\.|remoteHub\\.)/, '')\n\t\t\t.trim();\n\n\t\tif (genericName.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Capitalize first letter\n\t\tgenericName = genericName[0].toLocaleUpperCase() + genericName.slice(1);\n\t}\n\n\treturn genericName;\n}\n"]}