{"version":3,"sources":["vs/workbench/contrib/scm/browser/quickDiffDecorator.ts"],"names":[],"mappings":"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","file":"quickDiffDecorator.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\n\nimport './media/dirtydiffDecorator.css';\nimport { Disposable, DisposableStore, DisposableMap, IReference } from '../../../../base/common/lifecycle.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ModelDecorationOptions } from '../../../../editor/common/model/textModel.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ICodeEditor, isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IEditorDecorationsCollection } from '../../../../editor/common/editorCommon.js';\nimport { OverviewRulerLane, IModelDecorationOptions, MinimapPosition, IModelDeltaDecoration } from '../../../../editor/common/model.js';\nimport * as domStylesheetsJs from '../../../../base/browser/domStylesheets.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ChangeType, getChangeType, IQuickDiffService, QuickDiffProvider, minimapGutterAddedBackground, minimapGutterDeletedBackground, minimapGutterModifiedBackground, overviewRulerAddedForeground, overviewRulerDeletedForeground, overviewRulerModifiedForeground } from '../common/quickDiff.js';\nimport { QuickDiffModel, IQuickDiffModelService } from './quickDiffModel.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ContextKeyTrueExpr, ContextKeyFalseExpr, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { autorun, IObservable, observableFromEvent } from '../../../../base/common/observable.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { registerAction2, Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport const quickDiffDecorationCount = new RawContextKey<number>('quickDiffDecorationCount', 0);\n\nclass QuickDiffDecorator extends Disposable {\n\n\tstatic createDecoration(className: string, tooltip: string | null, options: { gutter: boolean; overview: { active: boolean; color: string }; minimap: { active: boolean; color: string }; isWholeLine: boolean }): ModelDecorationOptions {\n\t\tconst decorationOptions: IModelDecorationOptions = {\n\t\t\tdescription: 'dirty-diff-decoration',\n\t\t\tisWholeLine: options.isWholeLine,\n\t\t};\n\n\t\tif (options.gutter) {\n\t\t\tdecorationOptions.linesDecorationsClassName = `dirty-diff-glyph ${className}`;\n\t\t\tdecorationOptions.linesDecorationsTooltip = tooltip;\n\t\t}\n\n\t\tif (options.overview.active) {\n\t\t\tdecorationOptions.overviewRuler = {\n\t\t\t\tcolor: themeColorFromId(options.overview.color),\n\t\t\t\tposition: OverviewRulerLane.Left\n\t\t\t};\n\t\t}\n\n\t\tif (options.minimap.active) {\n\t\t\tdecorationOptions.minimap = {\n\t\t\t\tcolor: themeColorFromId(options.minimap.color),\n\t\t\t\tposition: MinimapPosition.Gutter\n\t\t\t};\n\t\t}\n\n\t\treturn ModelDecorationOptions.createDynamic(decorationOptions);\n\t}\n\n\tprivate addedOptions: ModelDecorationOptions;\n\tprivate addedSecondaryOptions: ModelDecorationOptions;\n\tprivate addedPatternOptions: ModelDecorationOptions;\n\tprivate addedSecondaryPatternOptions: ModelDecorationOptions;\n\tprivate modifiedOptions: ModelDecorationOptions;\n\tprivate modifiedSecondaryOptions: ModelDecorationOptions;\n\tprivate modifiedPatternOptions: ModelDecorationOptions;\n\tprivate modifiedSecondaryPatternOptions: ModelDecorationOptions;\n\tprivate deletedOptions: ModelDecorationOptions;\n\tprivate deletedSecondaryOptions: ModelDecorationOptions;\n\tprivate decorationsCollection: IEditorDecorationsCollection | undefined;\n\n\tconstructor(\n\t\tprivate readonly codeEditor: ICodeEditor,\n\t\tprivate readonly quickDiffModelRef: IReference<QuickDiffModel>,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IQuickDiffService private readonly quickDiffService: IQuickDiffService\n\t) {\n\t\tsuper();\n\n\t\tconst decorations = configurationService.getValue<string>('scm.diffDecorations');\n\t\tconst gutter = decorations === 'all' || decorations === 'gutter';\n\t\tconst overview = decorations === 'all' || decorations === 'overview';\n\t\tconst minimap = decorations === 'all' || decorations === 'minimap';\n\n\t\tconst diffAdded = nls.localize('diffAdded', 'Added lines');\n\t\tconst diffAddedOptions = {\n\t\t\tgutter,\n\t\t\toverview: { active: overview, color: overviewRulerAddedForeground },\n\t\t\tminimap: { active: minimap, color: minimapGutterAddedBackground },\n\t\t\tisWholeLine: true\n\t\t};\n\t\tthis.addedOptions = QuickDiffDecorator.createDecoration('dirty-diff-added primary', diffAdded, diffAddedOptions);\n\t\tthis.addedPatternOptions = QuickDiffDecorator.createDecoration('dirty-diff-added primary pattern', diffAdded, diffAddedOptions);\n\t\tthis.addedSecondaryOptions = QuickDiffDecorator.createDecoration('dirty-diff-added secondary', diffAdded, diffAddedOptions);\n\t\tthis.addedSecondaryPatternOptions = QuickDiffDecorator.createDecoration('dirty-diff-added secondary pattern', diffAdded, diffAddedOptions);\n\n\t\tconst diffModified = nls.localize('diffModified', 'Changed lines');\n\t\tconst diffModifiedOptions = {\n\t\t\tgutter,\n\t\t\toverview: { active: overview, color: overviewRulerModifiedForeground },\n\t\t\tminimap: { active: minimap, color: minimapGutterModifiedBackground },\n\t\t\tisWholeLine: true\n\t\t};\n\t\tthis.modifiedOptions = QuickDiffDecorator.createDecoration('dirty-diff-modified primary', diffModified, diffModifiedOptions);\n\t\tthis.modifiedPatternOptions = QuickDiffDecorator.createDecoration('dirty-diff-modified primary pattern', diffModified, diffModifiedOptions);\n\t\tthis.modifiedSecondaryOptions = QuickDiffDecorator.createDecoration('dirty-diff-modified secondary', diffModified, diffModifiedOptions);\n\t\tthis.modifiedSecondaryPatternOptions = QuickDiffDecorator.createDecoration('dirty-diff-modified secondary pattern', diffModified, diffModifiedOptions);\n\n\t\tconst diffDeleted = nls.localize('diffDeleted', 'Removed lines');\n\t\tconst diffDeletedOptions = {\n\t\t\tgutter,\n\t\t\toverview: { active: overview, color: overviewRulerDeletedForeground },\n\t\t\tminimap: { active: minimap, color: minimapGutterDeletedBackground },\n\t\t\tisWholeLine: false\n\t\t};\n\t\tthis.deletedOptions = QuickDiffDecorator.createDecoration('dirty-diff-deleted primary', diffDeleted, diffDeletedOptions);\n\t\tthis.deletedSecondaryOptions = QuickDiffDecorator.createDecoration('dirty-diff-deleted secondary', diffDeleted, diffDeletedOptions);\n\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('scm.diffDecorationsGutterPattern')) {\n\t\t\t\tthis.onDidChange();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.runAndSubscribe(this.quickDiffModelRef.object.onDidChange, () => this.onDidChange()));\n\t}\n\n\tprivate onDidChange(): void {\n\t\tif (!this.codeEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst pattern = this.configurationService.getValue<{ added: boolean; modified: boolean }>('scm.diffDecorationsGutterPattern');\n\n\t\tconst primaryQuickDiff = this.quickDiffModelRef.object.quickDiffs.find(quickDiff => quickDiff.kind === 'primary');\n\t\tconst primaryQuickDiffChanges = this.quickDiffModelRef.object.changes.filter(change => change.providerId === primaryQuickDiff?.id);\n\n\t\tconst decorations: IModelDeltaDecoration[] = [];\n\t\tfor (const change of this.quickDiffModelRef.object.changes) {\n\t\t\tconst quickDiff = this.quickDiffModelRef.object.quickDiffs\n\t\t\t\t.find(quickDiff => quickDiff.id === change.providerId);\n\n\t\t\t// Skip quick diffs that are not visible\n\t\t\tif (!quickDiff || !this.quickDiffService.isQuickDiffProviderVisible(quickDiff.id)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (quickDiff.kind !== 'primary' && primaryQuickDiffChanges.some(c => c.change2.modified.intersectsOrTouches(change.change2.modified))) {\n\t\t\t\t// Overlap with primary quick diff changes\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst changeType = getChangeType(change.change);\n\t\t\tconst startLineNumber = change.change.modifiedStartLineNumber;\n\t\t\tconst endLineNumber = change.change.modifiedEndLineNumber || startLineNumber;\n\n\t\t\tswitch (changeType) {\n\t\t\t\tcase ChangeType.Add:\n\t\t\t\t\tdecorations.push({\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstartLineNumber: startLineNumber, startColumn: 1,\n\t\t\t\t\t\t\tendLineNumber: endLineNumber, endColumn: 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions: quickDiff.kind === 'primary' || quickDiff.kind === 'contributed'\n\t\t\t\t\t\t\t? pattern.added ? this.addedPatternOptions : this.addedOptions\n\t\t\t\t\t\t\t: pattern.added ? this.addedSecondaryPatternOptions : this.addedSecondaryOptions\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase ChangeType.Delete:\n\t\t\t\t\tdecorations.push({\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstartLineNumber: startLineNumber, startColumn: Number.MAX_VALUE,\n\t\t\t\t\t\t\tendLineNumber: startLineNumber, endColumn: Number.MAX_VALUE\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions: quickDiff.kind === 'primary' || quickDiff.kind === 'contributed'\n\t\t\t\t\t\t\t? this.deletedOptions\n\t\t\t\t\t\t\t: this.deletedSecondaryOptions\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase ChangeType.Modify:\n\t\t\t\t\tdecorations.push({\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tstartLineNumber: startLineNumber, startColumn: 1,\n\t\t\t\t\t\t\tendLineNumber: endLineNumber, endColumn: 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions: quickDiff.kind === 'primary' || quickDiff.kind === 'contributed'\n\t\t\t\t\t\t\t? pattern.modified ? this.modifiedPatternOptions : this.modifiedOptions\n\t\t\t\t\t\t\t: pattern.modified ? this.modifiedSecondaryPatternOptions : this.modifiedSecondaryOptions\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.decorationsCollection) {\n\t\t\tthis.decorationsCollection = this.codeEditor.createDecorationsCollection(decorations);\n\t\t} else {\n\t\t\tthis.decorationsCollection.set(decorations);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tif (this.decorationsCollection) {\n\t\t\tthis.decorationsCollection.clear();\n\t\t}\n\t\tthis.decorationsCollection = undefined;\n\t\tthis.quickDiffModelRef.dispose();\n\t\tsuper.dispose();\n\t}\n}\n\ninterface QuickDiffWorkbenchControllerViewState {\n\treadonly width: number;\n\treadonly visibility: 'always' | 'hover';\n}\n\nexport class QuickDiffWorkbenchController extends Disposable implements IWorkbenchContribution {\n\n\tprivate enabled = false;\n\tprivate readonly quickDiffDecorationCount: IContextKey<number>;\n\n\tprivate readonly activeEditor: IObservable<EditorInput | undefined>;\n\tprivate readonly quickDiffProviders: IObservable<readonly QuickDiffProvider[]>;\n\n\t// Resource URI -> Code Editor Id -> Decoration (Disposable)\n\tprivate readonly decorators = new ResourceMap<DisposableMap<string>>();\n\tprivate viewState: QuickDiffWorkbenchControllerViewState = { width: 3, visibility: 'always' };\n\tprivate readonly transientDisposables = this._register(new DisposableStore());\n\tprivate readonly stylesheet: HTMLStyleElement;\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IQuickDiffModelService private readonly quickDiffModelService: IQuickDiffModelService,\n\t\t@IQuickDiffService private readonly quickDiffService: IQuickDiffService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis.stylesheet = domStylesheetsJs.createStyleSheet(undefined, undefined, this._store);\n\n\t\tthis.quickDiffDecorationCount = quickDiffDecorationCount.bindTo(contextKeyService);\n\n\t\tthis.activeEditor = observableFromEvent(this,\n\t\t\tthis.editorService.onDidActiveEditorChange, () => this.editorService.activeEditor);\n\n\t\tthis.quickDiffProviders = observableFromEvent(this,\n\t\t\tthis.quickDiffService.onDidChangeQuickDiffProviders, () => this.quickDiffService.providers);\n\n\t\tconst onDidChangeConfiguration = Event.filter(configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.diffDecorations'));\n\t\tthis._register(onDidChangeConfiguration(this.onDidChangeConfiguration, this));\n\t\tthis.onDidChangeConfiguration();\n\n\t\tconst onDidChangeDiffWidthConfiguration = Event.filter(configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.diffDecorationsGutterWidth'));\n\t\tthis._register(onDidChangeDiffWidthConfiguration(this.onDidChangeDiffWidthConfiguration, this));\n\t\tthis.onDidChangeDiffWidthConfiguration();\n\n\t\tconst onDidChangeDiffVisibilityConfiguration = Event.filter(configurationService.onDidChangeConfiguration, e => e.affectsConfiguration('scm.diffDecorationsGutterVisibility'));\n\t\tthis._register(onDidChangeDiffVisibilityConfiguration(this.onDidChangeDiffVisibilityConfiguration, this));\n\t\tthis.onDidChangeDiffVisibilityConfiguration();\n\t}\n\n\tprivate onDidChangeConfiguration(): void {\n\t\tconst enabled = this.configurationService.getValue<string>('scm.diffDecorations') !== 'none';\n\n\t\tif (enabled) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\t}\n\n\tprivate onDidChangeDiffWidthConfiguration(): void {\n\t\tlet width = this.configurationService.getValue<number>('scm.diffDecorationsGutterWidth');\n\n\t\tif (isNaN(width) || width <= 0 || width > 5) {\n\t\t\twidth = 3;\n\t\t}\n\n\t\tthis.setViewState({ ...this.viewState, width });\n\t}\n\n\tprivate onDidChangeDiffVisibilityConfiguration(): void {\n\t\tconst visibility = this.configurationService.getValue<'always' | 'hover'>('scm.diffDecorationsGutterVisibility');\n\t\tthis.setViewState({ ...this.viewState, visibility });\n\t}\n\n\tprivate setViewState(state: QuickDiffWorkbenchControllerViewState): void {\n\t\tthis.viewState = state;\n\t\tthis.stylesheet.textContent = `\n\t\t\t.monaco-editor .dirty-diff-added,\n\t\t\t.monaco-editor .dirty-diff-modified {\n\t\t\t\tborder-left-width:${state.width}px;\n\t\t\t}\n\t\t\t.monaco-editor .dirty-diff-added.pattern,\n\t\t\t.monaco-editor .dirty-diff-added.pattern:before,\n\t\t\t.monaco-editor .dirty-diff-modified.pattern,\n\t\t\t.monaco-editor .dirty-diff-modified.pattern:before {\n\t\t\t\tbackground-size: ${state.width}px ${state.width}px;\n\t\t\t}\n\t\t\t.monaco-editor .dirty-diff-added,\n\t\t\t.monaco-editor .dirty-diff-modified,\n\t\t\t.monaco-editor .dirty-diff-deleted {\n\t\t\t\topacity: ${state.visibility === 'always' ? 1 : 0};\n\t\t\t}\n\t\t`;\n\t}\n\n\tprivate enable(): void {\n\t\tif (this.enabled) {\n\t\t\tthis.disable();\n\t\t}\n\n\t\tthis.transientDisposables.add(Event.any(this.editorService.onDidCloseEditor, this.editorService.onDidVisibleEditorsChange)(() => this.onEditorsChanged()));\n\t\tthis.onEditorsChanged();\n\n\t\tthis.onDidActiveEditorChange();\n\t\tthis.onDidChangeQuickDiffProviders();\n\n\t\tthis.enabled = true;\n\t}\n\n\tprivate disable(): void {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.transientDisposables.clear();\n\t\tthis.quickDiffDecorationCount.set(0);\n\n\t\tfor (const [uri, decoratorMap] of this.decorators.entries()) {\n\t\t\tdecoratorMap.dispose();\n\t\t\tthis.decorators.delete(uri);\n\t\t}\n\n\t\tthis.enabled = false;\n\t}\n\n\tprivate onDidActiveEditorChange(): void {\n\t\tthis.transientDisposables.add(autorun(reader => {\n\t\t\tconst activeEditor = this.activeEditor.read(reader);\n\t\t\tconst activeTextEditorControl = this.editorService.activeTextEditorControl;\n\n\t\t\tif (!isCodeEditor(activeTextEditorControl) || !activeEditor?.resource) {\n\t\t\t\tthis.quickDiffDecorationCount.set(0);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst quickDiffModelRef = this.quickDiffModelService.createQuickDiffModelReference(activeEditor.resource);\n\t\t\tif (!quickDiffModelRef) {\n\t\t\t\tthis.quickDiffDecorationCount.set(0);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treader.store.add(quickDiffModelRef);\n\n\t\t\tconst visibleDecorationCount = observableFromEvent(this,\n\t\t\t\tquickDiffModelRef.object.onDidChange, () => {\n\t\t\t\t\tconst visibleQuickDiffs = quickDiffModelRef.object.quickDiffs.filter(quickDiff => this.quickDiffService.isQuickDiffProviderVisible(quickDiff.id));\n\t\t\t\t\treturn quickDiffModelRef.object.changes.filter(change => visibleQuickDiffs.some(quickDiff => quickDiff.id === change.providerId)).length;\n\t\t\t\t});\n\n\t\t\treader.store.add(autorun(reader => {\n\t\t\t\tconst count = visibleDecorationCount.read(reader);\n\t\t\t\tthis.quickDiffDecorationCount.set(count);\n\t\t\t}));\n\t\t}));\n\t}\n\n\tprivate onDidChangeQuickDiffProviders(): void {\n\t\tthis.transientDisposables.add(autorun(reader => {\n\t\t\tconst providers = this.quickDiffProviders.read(reader);\n\n\t\t\tconst labels: string[] = [];\n\t\t\tfor (let index = 0; index < providers.length; index++) {\n\t\t\t\tconst provider = providers[index];\n\t\t\t\tif (labels.includes(provider.label)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst visible = this.quickDiffService.isQuickDiffProviderVisible(provider.id);\n\t\t\t\tconst group = provider.kind !== 'contributed' ? '0_scm' : '1_contributed';\n\t\t\t\tconst order = index + 1;\n\n\t\t\t\treader.store.add(registerAction2(class extends Action2 {\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\tid: `workbench.scm.action.toggleQuickDiffVisibility.${provider.id}`,\n\t\t\t\t\t\t\ttitle: provider.label,\n\t\t\t\t\t\t\ttoggled: visible ? ContextKeyTrueExpr.INSTANCE : ContextKeyFalseExpr.INSTANCE,\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\tid: MenuId.SCMQuickDiffDecorations, group, order\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tf1: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\toverride run(accessor: ServicesAccessor): void {\n\t\t\t\t\t\tconst quickDiffService = accessor.get(IQuickDiffService);\n\t\t\t\t\t\tquickDiffService.toggleQuickDiffProviderVisibility(provider.id);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tlabels.push(provider.label);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate onEditorsChanged(): void {\n\t\tfor (const editor of this.editorService.visibleTextEditorControls) {\n\t\t\tif (!isCodeEditor(editor)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst textModel = editor.getModel();\n\t\t\tif (!textModel) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst editorId = editor.getId();\n\t\t\tif (this.decorators.get(textModel.uri)?.has(editorId)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst quickDiffModelRef = this.quickDiffModelService.createQuickDiffModelReference(textModel.uri);\n\t\t\tif (!quickDiffModelRef) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!this.decorators.has(textModel.uri)) {\n\t\t\t\tthis.decorators.set(textModel.uri, new DisposableMap<string>());\n\t\t\t}\n\n\t\t\tthis.decorators.get(textModel.uri)!.set(editorId, new QuickDiffDecorator(editor, quickDiffModelRef, this.configurationService, this.quickDiffService));\n\t\t}\n\n\t\t// Dispose decorators for editors that are no longer visible.\n\t\tfor (const [uri, decoratorMap] of this.decorators.entries()) {\n\t\t\tfor (const editorId of decoratorMap.keys()) {\n\t\t\t\tconst codeEditor = this.editorService.visibleTextEditorControls\n\t\t\t\t\t.find(editor => isCodeEditor(editor) && editor.getId() === editorId &&\n\t\t\t\t\t\tthis.uriIdentityService.extUri.isEqual(editor.getModel()?.uri, uri));\n\n\t\t\t\tif (!codeEditor) {\n\t\t\t\t\tdecoratorMap.deleteAndDispose(editorId);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (decoratorMap.size === 0) {\n\t\t\t\tdecoratorMap.dispose();\n\t\t\t\tthis.decorators.delete(uri);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.disable();\n\t\tsuper.dispose();\n\t}\n}\n"]}