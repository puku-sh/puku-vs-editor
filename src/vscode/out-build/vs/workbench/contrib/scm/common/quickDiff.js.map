{"version":3,"sources":["vs/workbench/contrib/scm/common/quickDiff.ts"],"names":[],"mappings":"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","file":"quickDiff.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { LanguageSelector } from '../../../../editor/common/languageSelector.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { LineRangeMapping } from '../../../../editor/common/diff/rangeMapping.js';\nimport { IChange } from '../../../../editor/common/diff/legacyLinesDiffComputer.js';\nimport { IColorTheme } from '../../../../platform/theme/common/themeService.js';\nimport { Color } from '../../../../base/common/color.js';\nimport {\n\tdarken, editorBackground, editorForeground, listInactiveSelectionBackground, opaque,\n\teditorErrorForeground, registerColor, transparent,\n\tlighten\n} from '../../../../platform/theme/common/colorRegistry.js';\n\nexport const IQuickDiffService = createDecorator<IQuickDiffService>('quickDiff');\n\nconst editorGutterModifiedBackground = registerColor('editorGutter.modifiedBackground', {\n\tdark: '#1B81A8', light: '#2090D3', hcDark: '#1B81A8', hcLight: '#2090D3'\n}, nls.localize('editorGutterModifiedBackground', \"Editor gutter background color for lines that are modified.\"));\n\nregisterColor('editorGutter.modifiedSecondaryBackground',\n\t{ dark: darken(editorGutterModifiedBackground, 0.5), light: lighten(editorGutterModifiedBackground, 0.7), hcDark: '#1B81A8', hcLight: '#2090D3' },\n\tnls.localize('editorGutterModifiedSecondaryBackground', \"Editor gutter secondary background color for lines that are modified.\"));\n\nconst editorGutterAddedBackground = registerColor('editorGutter.addedBackground', {\n\tdark: '#487E02', light: '#48985D', hcDark: '#487E02', hcLight: '#48985D'\n}, nls.localize('editorGutterAddedBackground', \"Editor gutter background color for lines that are added.\"));\n\nregisterColor('editorGutter.addedSecondaryBackground',\n\t{ dark: darken(editorGutterAddedBackground, 0.5), light: lighten(editorGutterAddedBackground, 0.7), hcDark: '#487E02', hcLight: '#48985D' },\n\tnls.localize('editorGutterAddedSecondaryBackground', \"Editor gutter secondary background color for lines that are added.\"));\n\nconst editorGutterDeletedBackground = registerColor('editorGutter.deletedBackground',\n\teditorErrorForeground, nls.localize('editorGutterDeletedBackground', \"Editor gutter background color for lines that are deleted.\"));\n\nregisterColor('editorGutter.deletedSecondaryBackground',\n\t{ dark: darken(editorGutterDeletedBackground, 0.4), light: lighten(editorGutterDeletedBackground, 0.3), hcDark: '#F48771', hcLight: '#B5200D' },\n\tnls.localize('editorGutterDeletedSecondaryBackground', \"Editor gutter secondary background color for lines that are deleted.\"));\nexport const minimapGutterModifiedBackground = registerColor('minimapGutter.modifiedBackground',\n\teditorGutterModifiedBackground, nls.localize('minimapGutterModifiedBackground', \"Minimap gutter background color for lines that are modified.\"));\n\nexport const minimapGutterAddedBackground = registerColor('minimapGutter.addedBackground',\n\teditorGutterAddedBackground, nls.localize('minimapGutterAddedBackground', \"Minimap gutter background color for lines that are added.\"));\n\nexport const minimapGutterDeletedBackground = registerColor('minimapGutter.deletedBackground',\n\teditorGutterDeletedBackground, nls.localize('minimapGutterDeletedBackground', \"Minimap gutter background color for lines that are deleted.\"));\n\nexport const overviewRulerModifiedForeground = registerColor('editorOverviewRuler.modifiedForeground',\n\ttransparent(editorGutterModifiedBackground, 0.6), nls.localize('overviewRulerModifiedForeground', 'Overview ruler marker color for modified content.'));\nexport const overviewRulerAddedForeground = registerColor('editorOverviewRuler.addedForeground',\n\ttransparent(editorGutterAddedBackground, 0.6), nls.localize('overviewRulerAddedForeground', 'Overview ruler marker color for added content.'));\nexport const overviewRulerDeletedForeground = registerColor('editorOverviewRuler.deletedForeground',\n\ttransparent(editorGutterDeletedBackground, 0.6), nls.localize('overviewRulerDeletedForeground', 'Overview ruler marker color for deleted content.'));\n\nexport const editorGutterItemGlyphForeground = registerColor('editorGutter.itemGlyphForeground',\n\t{ dark: editorForeground, light: editorForeground, hcDark: Color.black, hcLight: Color.white },\n\tnls.localize('editorGutterItemGlyphForeground', 'Editor gutter decoration color for gutter item glyphs.')\n);\nexport const editorGutterItemBackground = registerColor('editorGutter.itemBackground', { dark: opaque(listInactiveSelectionBackground, editorBackground), light: darken(opaque(listInactiveSelectionBackground, editorBackground), .05), hcDark: Color.white, hcLight: Color.black }, nls.localize('editorGutterItemBackground', 'Editor gutter decoration color for gutter item background. This color should be opaque.'));\n\nexport interface QuickDiffProvider {\n\treadonly id: string;\n\treadonly label: string;\n\treadonly rootUri: URI | undefined;\n\treadonly selector?: LanguageSelector;\n\treadonly kind: 'primary' | 'secondary' | 'contributed';\n\tgetOriginalResource(uri: URI): Promise<URI | null>;\n}\n\nexport interface QuickDiff {\n\treadonly id: string;\n\treadonly label: string;\n\treadonly originalResource: URI;\n\treadonly kind: 'primary' | 'secondary' | 'contributed';\n}\n\nexport interface QuickDiffChange {\n\treadonly providerId: string;\n\treadonly original: URI;\n\treadonly modified: URI;\n\treadonly change: IChange;\n\treadonly change2: LineRangeMapping;\n}\n\nexport interface QuickDiffResult {\n\treadonly original: URI;\n\treadonly modified: URI;\n\treadonly changes: IChange[];\n\treadonly changes2: LineRangeMapping[];\n}\n\nexport interface IQuickDiffService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeQuickDiffProviders: Event<void>;\n\treadonly providers: readonly QuickDiffProvider[];\n\taddQuickDiffProvider(quickDiff: QuickDiffProvider): IDisposable;\n\tgetQuickDiffs(uri: URI, language?: string, isSynchronized?: boolean): Promise<QuickDiff[]>;\n\ttoggleQuickDiffProviderVisibility(id: string): void;\n\tisQuickDiffProviderVisible(id: string): boolean;\n}\n\nexport enum ChangeType {\n\tModify,\n\tAdd,\n\tDelete\n}\n\nexport function getChangeType(change: IChange): ChangeType {\n\tif (change.originalEndLineNumber === 0) {\n\t\treturn ChangeType.Add;\n\t} else if (change.modifiedEndLineNumber === 0) {\n\t\treturn ChangeType.Delete;\n\t} else {\n\t\treturn ChangeType.Modify;\n\t}\n}\n\nexport function getChangeTypeColor(theme: IColorTheme, changeType: ChangeType): Color | undefined {\n\tswitch (changeType) {\n\t\tcase ChangeType.Modify: return theme.getColor(editorGutterModifiedBackground);\n\t\tcase ChangeType.Add: return theme.getColor(editorGutterAddedBackground);\n\t\tcase ChangeType.Delete: return theme.getColor(editorGutterDeletedBackground);\n\t}\n}\n\nexport function compareChanges(a: IChange, b: IChange): number {\n\tlet result = a.modifiedStartLineNumber - b.modifiedStartLineNumber;\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tresult = a.modifiedEndLineNumber - b.modifiedEndLineNumber;\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\tresult = a.originalStartLineNumber - b.originalStartLineNumber;\n\n\tif (result !== 0) {\n\t\treturn result;\n\t}\n\n\treturn a.originalEndLineNumber - b.originalEndLineNumber;\n}\n\nexport function getChangeHeight(change: IChange): number {\n\tconst modified = change.modifiedEndLineNumber - change.modifiedStartLineNumber + 1;\n\tconst original = change.originalEndLineNumber - change.originalStartLineNumber + 1;\n\n\tif (change.originalEndLineNumber === 0) {\n\t\treturn modified;\n\t} else if (change.modifiedEndLineNumber === 0) {\n\t\treturn original;\n\t} else {\n\t\treturn modified + original;\n\t}\n}\n\nexport function getModifiedEndLineNumber(change: IChange): number {\n\tif (change.modifiedEndLineNumber === 0) {\n\t\treturn change.modifiedStartLineNumber === 0 ? 1 : change.modifiedStartLineNumber;\n\t} else {\n\t\treturn change.modifiedEndLineNumber;\n\t}\n}\n\nexport function lineIntersectsChange(lineNumber: number, change: IChange): boolean {\n\t// deletion at the beginning of the file\n\tif (lineNumber === 1 && change.modifiedStartLineNumber === 0 && change.modifiedEndLineNumber === 0) {\n\t\treturn true;\n\t}\n\n\treturn lineNumber >= change.modifiedStartLineNumber && lineNumber <= (change.modifiedEndLineNumber || change.modifiedStartLineNumber);\n}\n"]}