{"version":3,"sources":["vs/workbench/contrib/userDataSync/browser/userDataSync.contribution.ts"],"names":[],"mappings":"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","file":"userDataSync.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions, IWorkbenchContribution } from '../../../common/contributions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { UserDataSyncWorkbenchContribution } from './userDataSync.js';\nimport { IUserDataAutoSyncService, UserDataSyncError, UserDataSyncErrorCode } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { UserDataSyncTrigger } from './userDataSyncTrigger.js';\nimport { toAction } from '../../../../base/common/actions.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { SHOW_SYNC_LOG_COMMAND_ID } from '../../../services/userDataSync/common/userDataSync.js';\n\nclass UserDataSyncReportIssueContribution extends Disposable implements IWorkbenchContribution {\n\n\tconstructor(\n\t\t@IUserDataAutoSyncService userDataAutoSyncService: IUserDataAutoSyncService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t) {\n\t\tsuper();\n\t\tthis._register(userDataAutoSyncService.onError(error => this.onAutoSyncError(error)));\n\t}\n\n\tprivate onAutoSyncError(error: UserDataSyncError): void {\n\t\tswitch (error.code) {\n\t\t\tcase UserDataSyncErrorCode.LocalTooManyRequests: {\n\t\t\t\tconst message = isWeb ? localize({ key: 'local too many requests - reload', comment: ['Settings Sync is the name of the feature'] }, \"Settings sync is suspended temporarily because the current device is making too many requests. Please reload {0} to resume.\", this.productService.nameLong)\n\t\t\t\t\t: localize({ key: 'local too many requests - restart', comment: ['Settings Sync is the name of the feature'] }, \"Settings sync is suspended temporarily because the current device is making too many requests. Please restart {0} to resume.\", this.productService.nameLong);\n\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\tseverity: Severity.Error,\n\t\t\t\t\tmessage,\n\t\t\t\t\tactions: {\n\t\t\t\t\t\tprimary: [\n\t\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\t\tid: 'Show Sync Logs',\n\t\t\t\t\t\t\t\tlabel: localize('show sync logs', \"Show Log\"),\n\t\t\t\t\t\t\t\trun: () => this.commandService.executeCommand(SHOW_SYNC_LOG_COMMAND_ID)\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\t\tid: 'Restart',\n\t\t\t\t\t\t\t\tlabel: isWeb ? localize('reload', \"Reload\") : localize('restart', \"Restart\"),\n\t\t\t\t\t\t\t\trun: () => this.hostService.restart()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase UserDataSyncErrorCode.TooManyRequests: {\n\t\t\t\tconst operationId = error.operationId ? localize('operationId', \"Operation Id: {0}\", error.operationId) : undefined;\n\t\t\t\tconst message = localize({ key: 'server too many requests', comment: ['Settings Sync is the name of the feature'] }, \"Settings sync is disabled because the current device is making too many requests. Please wait for 10 minutes and turn on sync.\");\n\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\tseverity: Severity.Error,\n\t\t\t\t\tmessage: operationId ? `${message} ${operationId}` : message,\n\t\t\t\t\tsource: error.operationId ? localize('settings sync', \"Settings Sync. Operation Id: {0}\", error.operationId) : undefined,\n\t\t\t\t\tactions: {\n\t\t\t\t\t\tprimary: [\n\t\t\t\t\t\t\ttoAction({\n\t\t\t\t\t\t\t\tid: 'Show Sync Logs',\n\t\t\t\t\t\t\t\tlabel: localize('show sync logs', \"Show Log\"),\n\t\t\t\t\t\t\t\trun: () => this.commandService.executeCommand(SHOW_SYNC_LOG_COMMAND_ID)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(UserDataSyncWorkbenchContribution, LifecyclePhase.Restored);\nworkbenchRegistry.registerWorkbenchContribution(UserDataSyncTrigger, LifecyclePhase.Eventually);\nworkbenchRegistry.registerWorkbenchContribution(UserDataSyncReportIssueContribution, LifecyclePhase.Eventually);\n"]}