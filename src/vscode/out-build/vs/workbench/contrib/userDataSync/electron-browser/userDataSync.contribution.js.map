{"version":3,"sources":["vs/workbench/contrib/userDataSync/electron-browser/userDataSync.contribution.ts"],"names":[],"mappings":"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","file":"userDataSync.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { IUserDataSyncUtilService, SyncStatus } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { ISharedProcessService } from '../../../../platform/ipc/electron-browser/services.js';\nimport { registerAction2, Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { CONTEXT_SYNC_STATE, DOWNLOAD_ACTIVITY_ACTION_DESCRIPTOR, IUserDataSyncWorkbenchService, SYNC_TITLE } from '../../../services/userDataSync/common/userDataSync.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ProxyChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\n\nclass UserDataSyncServicesContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.userDataSyncServices';\n\n\tconstructor(\n\t\t@IUserDataSyncUtilService userDataSyncUtilService: IUserDataSyncUtilService,\n\t\t@ISharedProcessService sharedProcessService: ISharedProcessService,\n\t) {\n\t\tsuper();\n\t\tsharedProcessService.registerChannel('userDataSyncUtil', ProxyChannel.fromService(userDataSyncUtilService, this._store));\n\t}\n}\n\nregisterWorkbenchContribution2(UserDataSyncServicesContribution.ID, UserDataSyncServicesContribution, WorkbenchPhase.BlockStartup);\n\nregisterAction2(class OpenSyncBackupsFolder extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.userData.actions.openSyncBackupsFolder',\n\t\t\ttitle: localize2('Open Backup folder', \"Open Local Backups Folder\"),\n\t\t\tcategory: SYNC_TITLE,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: CONTEXT_SYNC_STATE.notEqualsTo(SyncStatus.Uninitialized),\n\t\t\t}\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst syncHome = accessor.get(IEnvironmentService).userDataSyncHome;\n\t\tconst nativeHostService = accessor.get(INativeHostService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tif (await fileService.exists(syncHome)) {\n\t\t\tconst folderStat = await fileService.resolve(syncHome);\n\t\t\tconst item = folderStat.children && folderStat.children[0] ? folderStat.children[0].resource : syncHome;\n\t\t\treturn nativeHostService.showItemInFolder(item.with({ scheme: Schemas.file }).fsPath);\n\t\t} else {\n\t\t\tnotificationService.info(localize('no backups', \"Local backups folder does not exist\"));\n\t\t}\n\t}\n});\n\nregisterAction2(class DownloadSyncActivityAction extends Action2 {\n\tconstructor() {\n\t\tsuper(DOWNLOAD_ACTIVITY_ACTION_DESCRIPTOR);\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst userDataSyncWorkbenchService = accessor.get(IUserDataSyncWorkbenchService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tconst hostService = accessor.get(INativeHostService);\n\t\tconst folder = await userDataSyncWorkbenchService.downloadSyncActivity();\n\t\tif (folder) {\n\t\t\tnotificationService.prompt(Severity.Info, localize('download sync activity complete', \"Successfully downloaded Settings Sync activity.\"),\n\t\t\t\t[{\n\t\t\t\t\tlabel: localize('open', \"Open Folder\"),\n\t\t\t\t\trun: () => hostService.showItemInFolder(folder.fsPath)\n\t\t\t\t}]);\n\t\t}\n\t}\n});\n"]}