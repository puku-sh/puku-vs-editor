{"version":3,"sources":["vs/workbench/contrib/callHierarchy/browser/callHierarchyTree.ts"],"names":[],"mappings":"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","file":"callHierarchyTree.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAsyncDataSource, ITreeRenderer, ITreeNode, ITreeSorter } from '../../../../base/browser/ui/tree/tree.js';\nimport { CallHierarchyItem, CallHierarchyDirection, CallHierarchyModel, } from '../common/callHierarchy.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IIdentityProvider, IListVirtualDelegate } from '../../../../base/browser/ui/list/list.js';\nimport { FuzzyScore, createMatches } from '../../../../base/common/filters.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { SymbolKinds, Location, SymbolTag } from '../../../../editor/common/languages.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { IListAccessibilityProvider } from '../../../../base/browser/ui/list/listWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\n\nexport class Call {\n\tconstructor(\n\t\treadonly item: CallHierarchyItem,\n\t\treadonly locations: Location[] | undefined,\n\t\treadonly model: CallHierarchyModel,\n\t\treadonly parent: Call | undefined\n\t) { }\n\n\tstatic compare(a: Call, b: Call): number {\n\t\tlet res = compare(a.item.uri.toString(), b.item.uri.toString());\n\t\tif (res === 0) {\n\t\t\tres = Range.compareRangesUsingStarts(a.item.range, b.item.range);\n\t\t}\n\t\treturn res;\n\t}\n}\n\nexport class DataSource implements IAsyncDataSource<CallHierarchyModel, Call> {\n\n\tconstructor(\n\t\tpublic getDirection: () => CallHierarchyDirection,\n\t) { }\n\n\thasChildren(): boolean {\n\t\treturn true;\n\t}\n\n\tasync getChildren(element: CallHierarchyModel | Call): Promise<Call[]> {\n\t\tif (element instanceof CallHierarchyModel) {\n\t\t\treturn element.roots.map(root => new Call(root, undefined, element, undefined));\n\t\t}\n\n\t\tconst { model, item } = element;\n\n\t\tif (this.getDirection() === CallHierarchyDirection.CallsFrom) {\n\t\t\treturn (await model.resolveOutgoingCalls(item, CancellationToken.None)).map(call => {\n\t\t\t\treturn new Call(\n\t\t\t\t\tcall.to,\n\t\t\t\t\tcall.fromRanges.map(range => ({ range, uri: item.uri })),\n\t\t\t\t\tmodel,\n\t\t\t\t\telement\n\t\t\t\t);\n\t\t\t});\n\n\t\t} else {\n\t\t\treturn (await model.resolveIncomingCalls(item, CancellationToken.None)).map(call => {\n\t\t\t\treturn new Call(\n\t\t\t\t\tcall.from,\n\t\t\t\t\tcall.fromRanges.map(range => ({ range, uri: call.from.uri })),\n\t\t\t\t\tmodel,\n\t\t\t\t\telement\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class Sorter implements ITreeSorter<Call> {\n\n\tcompare(element: Call, otherElement: Call): number {\n\t\treturn Call.compare(element, otherElement);\n\t}\n}\n\nexport class IdentityProvider implements IIdentityProvider<Call> {\n\n\tconstructor(\n\t\tpublic getDirection: () => CallHierarchyDirection\n\t) { }\n\n\tgetId(element: Call): { toString(): string } {\n\t\tlet res = this.getDirection() + JSON.stringify(element.item.uri) + JSON.stringify(element.item.range);\n\t\tif (element.parent) {\n\t\t\tres += this.getId(element.parent);\n\t\t}\n\t\treturn res;\n\t}\n}\n\nclass CallRenderingTemplate {\n\tconstructor(\n\t\treadonly icon: HTMLDivElement,\n\t\treadonly label: IconLabel\n\t) { }\n}\n\nexport class CallRenderer implements ITreeRenderer<Call, FuzzyScore, CallRenderingTemplate> {\n\n\tstatic readonly id = 'CallRenderer';\n\n\ttemplateId: string = CallRenderer.id;\n\n\trenderTemplate(container: HTMLElement): CallRenderingTemplate {\n\t\tcontainer.classList.add('callhierarchy-element');\n\t\tconst icon = document.createElement('div');\n\t\tcontainer.appendChild(icon);\n\t\tconst label = new IconLabel(container, { supportHighlights: true });\n\t\treturn new CallRenderingTemplate(icon, label);\n\t}\n\n\trenderElement(node: ITreeNode<Call, FuzzyScore>, _index: number, template: CallRenderingTemplate): void {\n\t\tconst { element, filterData } = node;\n\t\tconst deprecated = element.item.tags?.includes(SymbolTag.Deprecated);\n\t\ttemplate.icon.className = '';\n\t\ttemplate.icon.classList.add('inline', ...ThemeIcon.asClassNameArray(SymbolKinds.toIcon(element.item.kind)));\n\t\ttemplate.label.setLabel(\n\t\t\telement.item.name,\n\t\t\telement.item.detail,\n\t\t\t{ labelEscapeNewLines: true, matches: createMatches(filterData), strikethrough: deprecated }\n\t\t);\n\t}\n\tdisposeTemplate(template: CallRenderingTemplate): void {\n\t\ttemplate.label.dispose();\n\t}\n}\n\nexport class VirtualDelegate implements IListVirtualDelegate<Call> {\n\n\tgetHeight(_element: Call): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(_element: Call): string {\n\t\treturn CallRenderer.id;\n\t}\n}\n\nexport class AccessibilityProvider implements IListAccessibilityProvider<Call> {\n\n\tconstructor(\n\t\tpublic getDirection: () => CallHierarchyDirection\n\t) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('tree.aria', \"Call Hierarchy\");\n\t}\n\n\tgetAriaLabel(element: Call): string | null {\n\t\tif (this.getDirection() === CallHierarchyDirection.CallsFrom) {\n\t\t\treturn localize('from', \"calls from {0}\", element.item.name);\n\t\t} else {\n\t\t\treturn localize('to', \"callers of {0}\", element.item.name);\n\t\t}\n\t}\n}\n"]}