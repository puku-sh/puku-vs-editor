{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/common/tools/confirmationTool.ts","vs/workbench/contrib/chat/common/tools/confirmationTool.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,cAAc,EAAE,MAAM,2CAA2C,CAAC;AAE3E,OAAO,EAAuI,cAAc,EAAE,0BAA0B,EAAgB,MAAM,iCAAiC,CAAC;AAEhP,MAAM,CAAC,MAAM,kBAAkB,GAAG,yBAAyB,CAAC;AAE5D,MAAM,CAAC,MAAM,oBAAoB,GAAc;IAC9C,EAAE,EAAE,kBAAkB;IACtB,WAAW,EAAE,mBAAmB;IAChC,gBAAgB,EAAE,+HAA+H;IACjJ,MAAM,EAAE,cAAc,CAAC,QAAQ;IAC/B,WAAW,EAAE;QACZ,IAAI,EAAE,QAAQ;QACd,UAAU,EAAE;YACX,KAAK,EAAE;gBACN,IAAI,EAAE,QAAQ;gBACd,WAAW,EAAE,mCAAmC;aAChD;YACD,OAAO,EAAE;gBACR,IAAI,EAAE,QAAQ;gBACd,WAAW,EAAE,4CAA4C;aACzD;YACD,gBAAgB,EAAE;gBACjB,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;gBAC3B,WAAW,EAAE,0GAA0G;aACvH;YACD,eAAe,EAAE;gBAChB,IAAI,EAAE,QAAQ;gBACd,WAAW,EAAE,0EAA0E;aACvF;SACD;QACD,QAAQ,EAAE,CAAC,OAAO,EAAE,SAAS,EAAE,kBAAkB,CAAC;QAClD,oBAAoB,EAAE,KAAK;KAC3B;CACD,CAAC;AASF,MAAM,OAAO,gBAAgB;IAC5B,KAAK,CAAC,qBAAqB,CAAC,OAA0C,EAAE,KAAwB;QAC/F,MAAM,UAAU,GAAG,OAAO,CAAC,UAAqC,CAAC;QACjE,IAAI,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;YAC9C,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;QACrE,CAAC;QAED,MAAM,gBAAgB,GAAG,UAAU,CAAC,gBAAgB,IAAI,OAAO,CAAC;QAEhE,iEAAiE;QACjE,IAAI,gBAA6D,CAAC;QAElE,IAAI,gBAAgB,KAAK,UAAU,EAAE,CAAC;YACrC,mEAAmE;YACnE,gBAAgB,GAAG;gBAClB,IAAI,EAAE,UAAU;gBAChB,WAAW,EAAE;oBACZ,QAAQ,EAAE,UAAU,CAAC,eAAe,IAAI,EAAE;iBAC1C;gBACD,QAAQ,EAAE,MAAM;aAChB,CAAC;QACH,CAAC;aAAM,CAAC;YACP,kGAAkG;YAClG,gBAAgB,GAAG,SAAS,CAAC;QAC9B,CAAC;QAED,OAAO;YACN,oBAAoB,EAAE;gBACrB,KAAK,EAAE,UAAU,CAAC,KAAK;gBACvB,OAAO,EAAE,IAAI,cAAc,CAAC,UAAU,CAAC,OAAO,CAAC;gBAC/C,gBAAgB,EAAE,IAAI;aACtB;YACD,gBAAgB;YAChB,YAAY,EAAE,0BAA0B,CAAC,mBAAmB;SAC5D,CAAC;IACH,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,UAA2B,EAAE,WAAgC,EAAE,QAAsB,EAAE,KAAwB;QAC3H,6CAA6C;QAC7C,OAAO;YACN,OAAO,EAAE,CAAC;oBACT,IAAI,EAAE,MAAM;oBACZ,KAAK,EAAE,KAAK,CAAC,0FAA0F;iBACvG,CAAC;SACF,CAAC;IACH,CAAC;CACD","file":"confirmationTool.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { IChatTerminalToolInvocationData } from '../chatService.js';\nimport { CountTokensCallback, IPreparedToolInvocation, IToolData, IToolImpl, IToolInvocation, IToolInvocationPreparationContext, IToolResult, ToolDataSource, ToolInvocationPresentation, ToolProgress } from '../languageModelToolsService.js';\n\nexport const ConfirmationToolId = 'vscode_get_confirmation';\n\nexport const ConfirmationToolData: IToolData = {\n\tid: ConfirmationToolId,\n\tdisplayName: 'Confirmation Tool',\n\tmodelDescription: 'A tool that demonstrates different types of confirmations. Takes a title, message, and confirmation type (basic or terminal).',\n\tsource: ToolDataSource.Internal,\n\tinputSchema: {\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\ttitle: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdescription: 'Title for the confirmation dialog'\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdescription: 'Message to show in the confirmation dialog'\n\t\t\t},\n\t\t\tconfirmationType: {\n\t\t\t\ttype: 'string',\n\t\t\t\tenum: ['basic', 'terminal'],\n\t\t\t\tdescription: 'Type of confirmation to show - basic for simple confirmation, terminal for terminal command confirmation'\n\t\t\t},\n\t\t\tterminalCommand: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdescription: 'Terminal command to show (only used when confirmationType is \"terminal\")'\n\t\t\t}\n\t\t},\n\t\trequired: ['title', 'message', 'confirmationType'],\n\t\tadditionalProperties: false\n\t}\n};\n\nexport interface IConfirmationToolParams {\n\ttitle: string;\n\tmessage: string;\n\tconfirmationType?: 'basic' | 'terminal';\n\tterminalCommand?: string;\n}\n\nexport class ConfirmationTool implements IToolImpl {\n\tasync prepareToolInvocation(context: IToolInvocationPreparationContext, token: CancellationToken): Promise<IPreparedToolInvocation | undefined> {\n\t\tconst parameters = context.parameters as IConfirmationToolParams;\n\t\tif (!parameters.title || !parameters.message) {\n\t\t\tthrow new Error('Missing required parameters for ConfirmationTool');\n\t\t}\n\n\t\tconst confirmationType = parameters.confirmationType ?? 'basic';\n\n\t\t// Create different tool-specific data based on confirmation type\n\t\tlet toolSpecificData: IChatTerminalToolInvocationData | undefined;\n\n\t\tif (confirmationType === 'terminal') {\n\t\t\t// For terminal confirmations, use the terminal tool data structure\n\t\t\ttoolSpecificData = {\n\t\t\t\tkind: 'terminal',\n\t\t\t\tcommandLine: {\n\t\t\t\t\toriginal: parameters.terminalCommand ?? ''\n\t\t\t\t},\n\t\t\t\tlanguage: 'bash'\n\t\t\t};\n\t\t} else {\n\t\t\t// For basic confirmations, don't set toolSpecificData - this will use the default confirmation UI\n\t\t\ttoolSpecificData = undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tconfirmationMessages: {\n\t\t\t\ttitle: parameters.title,\n\t\t\t\tmessage: new MarkdownString(parameters.message),\n\t\t\t\tallowAutoConfirm: true\n\t\t\t},\n\t\t\ttoolSpecificData,\n\t\t\tpresentation: ToolInvocationPresentation.HiddenAfterComplete\n\t\t};\n\t}\n\n\tasync invoke(invocation: IToolInvocation, countTokens: CountTokensCallback, progress: ToolProgress, token: CancellationToken): Promise<IToolResult> {\n\t\t// This is a no-op tool - just return success\n\t\treturn {\n\t\t\tcontent: [{\n\t\t\t\tkind: 'text',\n\t\t\t\tvalue: 'yes' // Consumers should check for this label to know whether the tool was confirmed or skipped\n\t\t\t}]\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { IChatTerminalToolInvocationData } from '../chatService.js';\nimport { CountTokensCallback, IPreparedToolInvocation, IToolData, IToolImpl, IToolInvocation, IToolInvocationPreparationContext, IToolResult, ToolDataSource, ToolInvocationPresentation, ToolProgress } from '../languageModelToolsService.js';\n\nexport const ConfirmationToolId = 'vscode_get_confirmation';\n\nexport const ConfirmationToolData: IToolData = {\n\tid: ConfirmationToolId,\n\tdisplayName: 'Confirmation Tool',\n\tmodelDescription: 'A tool that demonstrates different types of confirmations. Takes a title, message, and confirmation type (basic or terminal).',\n\tsource: ToolDataSource.Internal,\n\tinputSchema: {\n\t\ttype: 'object',\n\t\tproperties: {\n\t\t\ttitle: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdescription: 'Title for the confirmation dialog'\n\t\t\t},\n\t\t\tmessage: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdescription: 'Message to show in the confirmation dialog'\n\t\t\t},\n\t\t\tconfirmationType: {\n\t\t\t\ttype: 'string',\n\t\t\t\tenum: ['basic', 'terminal'],\n\t\t\t\tdescription: 'Type of confirmation to show - basic for simple confirmation, terminal for terminal command confirmation'\n\t\t\t},\n\t\t\tterminalCommand: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdescription: 'Terminal command to show (only used when confirmationType is \"terminal\")'\n\t\t\t}\n\t\t},\n\t\trequired: ['title', 'message', 'confirmationType'],\n\t\tadditionalProperties: false\n\t}\n};\n\nexport interface IConfirmationToolParams {\n\ttitle: string;\n\tmessage: string;\n\tconfirmationType?: 'basic' | 'terminal';\n\tterminalCommand?: string;\n}\n\nexport class ConfirmationTool implements IToolImpl {\n\tasync prepareToolInvocation(context: IToolInvocationPreparationContext, token: CancellationToken): Promise<IPreparedToolInvocation | undefined> {\n\t\tconst parameters = context.parameters as IConfirmationToolParams;\n\t\tif (!parameters.title || !parameters.message) {\n\t\t\tthrow new Error('Missing required parameters for ConfirmationTool');\n\t\t}\n\n\t\tconst confirmationType = parameters.confirmationType ?? 'basic';\n\n\t\t// Create different tool-specific data based on confirmation type\n\t\tlet toolSpecificData: IChatTerminalToolInvocationData | undefined;\n\n\t\tif (confirmationType === 'terminal') {\n\t\t\t// For terminal confirmations, use the terminal tool data structure\n\t\t\ttoolSpecificData = {\n\t\t\t\tkind: 'terminal',\n\t\t\t\tcommandLine: {\n\t\t\t\t\toriginal: parameters.terminalCommand ?? ''\n\t\t\t\t},\n\t\t\t\tlanguage: 'bash'\n\t\t\t};\n\t\t} else {\n\t\t\t// For basic confirmations, don't set toolSpecificData - this will use the default confirmation UI\n\t\t\ttoolSpecificData = undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tconfirmationMessages: {\n\t\t\t\ttitle: parameters.title,\n\t\t\t\tmessage: new MarkdownString(parameters.message),\n\t\t\t\tallowAutoConfirm: true\n\t\t\t},\n\t\t\ttoolSpecificData,\n\t\t\tpresentation: ToolInvocationPresentation.HiddenAfterComplete\n\t\t};\n\t}\n\n\tasync invoke(invocation: IToolInvocation, countTokens: CountTokensCallback, progress: ToolProgress, token: CancellationToken): Promise<IToolResult> {\n\t\t// This is a no-op tool - just return success\n\t\treturn {\n\t\t\tcontent: [{\n\t\t\t\tkind: 'text',\n\t\t\t\tvalue: 'yes' // Consumers should check for this label to know whether the tool was confirmed or skipped\n\t\t\t}]\n\t\t};\n\t}\n}\n"]}