{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/common/chatTodoListService.ts","vs/workbench/contrib/chat/common/chatTodoListService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,OAAO,EAAS,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAElE,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAC7F,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAC9G,OAAO,EAAE,OAAO,EAAE,MAAM,4BAA4B,CAAC;AACrD,OAAO,EAAE,uBAAuB,EAAE,MAAM,cAAc,CAAC;AAcvD,MAAM,CAAC,MAAM,oBAAoB,GAAG,eAAe,CAAuB,qBAAqB,CAAC,CAAC;AAS1F,IAAM,mBAAmB,GAAzB,MAAM,mBAAmB;IAG/B,YAA6B,cAA+B;QAC3D,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,gBAAgB,EAAE,cAAc,CAAC,CAAC;IAC9D,CAAC;IAEO,cAAc,CAAC,eAAoB;QAC1C,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,+DAA+C,CAAC;QACvF,OAAO,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,IAAI,EAAE,CAAC;IACnD,CAAC;IAEO,cAAc,CAAC,eAAoB,EAAE,QAAqB;QACjE,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,+DAA+C,CAAC;QACvF,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC,GAAG,QAAQ,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;IAC5B,CAAC;IAED,WAAW,CAAC,eAAoB;QAC/B,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;IAC7C,CAAC;IAED,WAAW,CAAC,eAAoB,EAAE,QAAqB;QACtD,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;IAChD,CAAC;IAEO,KAAK,CAAC,eAAoB;QACjC,OAAO,uBAAuB,CAAC,eAAe,CAAC,CAAC;IACjD,CAAC;CACD,CAAA;AA7BY,mBAAmB;IAGlB,WAAA,eAAe,CAAA;GAHhB,mBAAmB,CA6B/B;;AAEM,IAAM,mBAAmB,GAAzB,MAAM,mBAAoB,SAAQ,UAAU;IAQlD,YAA6B,cAA+B;QAC3D,KAAK,EAAE,CAAC;QANQ,sBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAO,CAAC,CAAC;QAC/D,qBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;QAMxD,IAAI,CAAC,eAAe,GAAG,IAAI,mBAAmB,CAAC,cAAc,CAAC,CAAC;IAChE,CAAC;IAED,QAAQ,CAAC,eAAoB;QAC5B,OAAO,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;IAC1D,CAAC;IAED,QAAQ,CAAC,eAAoB,EAAE,KAAkB;QAChD,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QACzD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC9C,CAAC;CACD,CAAA;AArBY,mBAAmB;IAQlB,WAAA,eAAe,CAAA;GARhB,mBAAmB,CAqB/B","file":"chatTodoListService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { Memento } from '../../../common/memento.js';\nimport { chatSessionResourceToId } from './chatUri.js';\n\nexport interface IChatTodo {\n\tid: number;\n\ttitle: string;\n\tdescription?: string;\n\tstatus: 'not-started' | 'in-progress' | 'completed';\n}\n\nexport interface IChatTodoListStorage {\n\tgetTodoList(sessionResource: URI): IChatTodo[];\n\tsetTodoList(sessionResource: URI, todoList: IChatTodo[]): void;\n}\n\nexport const IChatTodoListService = createDecorator<IChatTodoListService>('chatTodoListService');\n\nexport interface IChatTodoListService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidUpdateTodos: Event<URI>;\n\tgetTodos(sessionResource: URI): IChatTodo[];\n\tsetTodos(sessionResource: URI, todos: IChatTodo[]): void;\n}\n\nexport class ChatTodoListStorage implements IChatTodoListStorage {\n\tprivate memento: Memento<Record<string, IChatTodo[]>>;\n\n\tconstructor(@IStorageService storageService: IStorageService) {\n\t\tthis.memento = new Memento('chat-todo-list', storageService);\n\t}\n\n\tprivate getSessionData(sessionResource: URI): IChatTodo[] {\n\t\tconst storage = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\treturn storage[this.toKey(sessionResource)] || [];\n\t}\n\n\tprivate setSessionData(sessionResource: URI, todoList: IChatTodo[]): void {\n\t\tconst storage = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\tstorage[this.toKey(sessionResource)] = todoList;\n\t\tthis.memento.saveMemento();\n\t}\n\n\tgetTodoList(sessionResource: URI): IChatTodo[] {\n\t\treturn this.getSessionData(sessionResource);\n\t}\n\n\tsetTodoList(sessionResource: URI, todoList: IChatTodo[]): void {\n\t\tthis.setSessionData(sessionResource, todoList);\n\t}\n\n\tprivate toKey(sessionResource: URI): string {\n\t\treturn chatSessionResourceToId(sessionResource);\n\t}\n}\n\nexport class ChatTodoListService extends Disposable implements IChatTodoListService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidUpdateTodos = this._register(new Emitter<URI>());\n\treadonly onDidUpdateTodos = this._onDidUpdateTodos.event;\n\n\tprivate todoListStorage: IChatTodoListStorage;\n\n\tconstructor(@IStorageService storageService: IStorageService) {\n\t\tsuper();\n\t\tthis.todoListStorage = new ChatTodoListStorage(storageService);\n\t}\n\n\tgetTodos(sessionResource: URI): IChatTodo[] {\n\t\treturn this.todoListStorage.getTodoList(sessionResource);\n\t}\n\n\tsetTodos(sessionResource: URI, todos: IChatTodo[]): void {\n\t\tthis.todoListStorage.setTodoList(sessionResource, todos);\n\t\tthis._onDidUpdateTodos.fire(sessionResource);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { Memento } from '../../../common/memento.js';\nimport { chatSessionResourceToId } from './chatUri.js';\n\nexport interface IChatTodo {\n\tid: number;\n\ttitle: string;\n\tdescription?: string;\n\tstatus: 'not-started' | 'in-progress' | 'completed';\n}\n\nexport interface IChatTodoListStorage {\n\tgetTodoList(sessionResource: URI): IChatTodo[];\n\tsetTodoList(sessionResource: URI, todoList: IChatTodo[]): void;\n}\n\nexport const IChatTodoListService = createDecorator<IChatTodoListService>('chatTodoListService');\n\nexport interface IChatTodoListService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidUpdateTodos: Event<URI>;\n\tgetTodos(sessionResource: URI): IChatTodo[];\n\tsetTodos(sessionResource: URI, todos: IChatTodo[]): void;\n}\n\nexport class ChatTodoListStorage implements IChatTodoListStorage {\n\tprivate memento: Memento<Record<string, IChatTodo[]>>;\n\n\tconstructor(@IStorageService storageService: IStorageService) {\n\t\tthis.memento = new Memento('chat-todo-list', storageService);\n\t}\n\n\tprivate getSessionData(sessionResource: URI): IChatTodo[] {\n\t\tconst storage = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\treturn storage[this.toKey(sessionResource)] || [];\n\t}\n\n\tprivate setSessionData(sessionResource: URI, todoList: IChatTodo[]): void {\n\t\tconst storage = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\tstorage[this.toKey(sessionResource)] = todoList;\n\t\tthis.memento.saveMemento();\n\t}\n\n\tgetTodoList(sessionResource: URI): IChatTodo[] {\n\t\treturn this.getSessionData(sessionResource);\n\t}\n\n\tsetTodoList(sessionResource: URI, todoList: IChatTodo[]): void {\n\t\tthis.setSessionData(sessionResource, todoList);\n\t}\n\n\tprivate toKey(sessionResource: URI): string {\n\t\treturn chatSessionResourceToId(sessionResource);\n\t}\n}\n\nexport class ChatTodoListService extends Disposable implements IChatTodoListService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidUpdateTodos = this._register(new Emitter<URI>());\n\treadonly onDidUpdateTodos = this._onDidUpdateTodos.event;\n\n\tprivate todoListStorage: IChatTodoListStorage;\n\n\tconstructor(@IStorageService storageService: IStorageService) {\n\t\tsuper();\n\t\tthis.todoListStorage = new ChatTodoListStorage(storageService);\n\t}\n\n\tgetTodos(sessionResource: URI): IChatTodo[] {\n\t\treturn this.todoListStorage.getTodoList(sessionResource);\n\t}\n\n\tsetTodos(sessionResource: URI, todos: IChatTodo[]): void {\n\t\tthis.todoListStorage.setTodoList(sessionResource, todos);\n\t\tthis._onDidUpdateTodos.fire(sessionResource);\n\t}\n}\n"]}