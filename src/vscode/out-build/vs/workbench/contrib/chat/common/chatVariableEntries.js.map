{"version":3,"sources":["vs/workbench/contrib/chat/common/chatVariableEntries.ts"],"names":[],"mappings":"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","file":"chatVariableEntries.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { IOffsetRange } from '../../../../editor/common/core/ranges/offsetRange.js';\nimport { isLocation, Location, SymbolKind } from '../../../../editor/common/languages.js';\nimport { localize } from '../../../../nls.js';\nimport { MarkerSeverity, IMarker } from '../../../../platform/markers/common/markers.js';\nimport { ISCMHistoryItem } from '../../scm/common/history.js';\nimport { IChatContentReference } from './chatService.js';\nimport { IChatRequestVariableValue } from './chatVariables.js';\nimport { IToolData, ToolSet } from './languageModelToolsService.js';\n\n\ninterface IBaseChatRequestVariableEntry {\n\treadonly id: string;\n\treadonly fullName?: string;\n\treadonly icon?: ThemeIcon;\n\treadonly name: string;\n\treadonly modelDescription?: string;\n\n\t/**\n\t * The offset-range in the prompt. This means this entry has been explicitly typed out\n\t * by the user.\n\t */\n\treadonly range?: IOffsetRange;\n\treadonly value: IChatRequestVariableValue;\n\treadonly references?: IChatContentReference[];\n\n\tomittedState?: OmittedState;\n}\n\nexport interface IGenericChatRequestVariableEntry extends IBaseChatRequestVariableEntry {\n\tkind: 'generic';\n}\n\nexport interface IChatRequestDirectoryEntry extends IBaseChatRequestVariableEntry {\n\tkind: 'directory';\n}\n\nexport interface IChatRequestFileEntry extends IBaseChatRequestVariableEntry {\n\tkind: 'file';\n}\n\nexport const enum OmittedState {\n\tNotOmitted,\n\tPartial,\n\tFull,\n}\n\nexport interface IChatRequestToolEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'tool';\n}\n\nexport interface IChatRequestToolSetEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'toolset';\n\treadonly value: IChatRequestToolEntry[];\n}\n\nexport type ChatRequestToolReferenceEntry = IChatRequestToolEntry | IChatRequestToolSetEntry;\n\nexport interface StringChatContextValue {\n\tvalue?: string;\n\tname: string;\n\tmodelDescription?: string;\n\ticon: ThemeIcon;\n\turi: URI;\n}\n\nexport interface IChatRequestImplicitVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'implicit';\n\treadonly isFile: true;\n\treadonly value: URI | Location | StringChatContextValue | undefined;\n\treadonly uri: URI | undefined;\n\treadonly isSelection: boolean;\n\tenabled: boolean;\n}\n\nexport interface IChatRequestStringVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'string';\n\treadonly value: string | undefined;\n\treadonly modelDescription?: string;\n\treadonly icon: ThemeIcon;\n\treadonly uri: URI;\n}\n\nexport interface IChatRequestWorkspaceVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'workspace';\n\treadonly value: string;\n\treadonly modelDescription?: string;\n}\n\n\nexport interface IChatRequestPasteVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'paste';\n\treadonly code: string;\n\treadonly language: string;\n\treadonly pastedLines: string;\n\n\t// This is only used for old serialized data and should be removed once we no longer support it\n\treadonly fileName: string;\n\n\t// This is only undefined on old serialized data\n\treadonly copiedFrom: {\n\t\treadonly uri: URI;\n\t\treadonly range: IRange;\n\t} | undefined;\n}\n\nexport interface ISymbolVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'symbol';\n\treadonly value: Location;\n\treadonly symbolKind: SymbolKind;\n}\n\nexport interface ICommandResultVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'command';\n}\n\nexport interface IImageVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'image';\n\treadonly isPasted?: boolean;\n\treadonly isURL?: boolean;\n\treadonly mimeType?: string;\n}\n\nexport interface INotebookOutputVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'notebookOutput';\n\treadonly outputIndex?: number;\n\treadonly mimeType?: string;\n}\n\nexport interface IDiagnosticVariableEntryFilterData {\n\treadonly owner?: string;\n\treadonly problemMessage?: string;\n\treadonly filterUri?: URI;\n\treadonly filterSeverity?: MarkerSeverity;\n\treadonly filterRange?: IRange;\n}\n\n\n\nexport namespace IDiagnosticVariableEntryFilterData {\n\texport const icon = Codicon.error;\n\n\texport function fromMarker(marker: IMarker): IDiagnosticVariableEntryFilterData {\n\t\treturn {\n\t\t\tfilterUri: marker.resource,\n\t\t\towner: marker.owner,\n\t\t\tproblemMessage: marker.message,\n\t\t\tfilterRange: { startLineNumber: marker.startLineNumber, endLineNumber: marker.endLineNumber, startColumn: marker.startColumn, endColumn: marker.endColumn }\n\t\t};\n\t}\n\n\texport function toEntry(data: IDiagnosticVariableEntryFilterData): IDiagnosticVariableEntry {\n\t\treturn {\n\t\t\tid: id(data),\n\t\t\tname: label(data),\n\t\t\ticon,\n\t\t\tvalue: data,\n\t\t\tkind: 'diagnostic',\n\t\t\t...data,\n\t\t};\n\t}\n\n\texport function id(data: IDiagnosticVariableEntryFilterData) {\n\t\treturn [data.filterUri, data.owner, data.filterSeverity, data.filterRange?.startLineNumber, data.filterRange?.startColumn].join(':');\n\t}\n\n\texport function label(data: IDiagnosticVariableEntryFilterData) {\n\t\tconst enum TrimThreshold {\n\t\t\tMaxChars = 30,\n\t\t\tMaxSpaceLookback = 10,\n\t\t}\n\t\tif (data.problemMessage) {\n\t\t\tif (data.problemMessage.length < TrimThreshold.MaxChars) {\n\t\t\t\treturn data.problemMessage;\n\t\t\t}\n\n\t\t\t// Trim the message, on a space if it would not lose too much\n\t\t\t// data (MaxSpaceLookback) or just blindly otherwise.\n\t\t\tconst lastSpace = data.problemMessage.lastIndexOf(' ', TrimThreshold.MaxChars);\n\t\t\tif (lastSpace === -1 || lastSpace + TrimThreshold.MaxSpaceLookback < TrimThreshold.MaxChars) {\n\t\t\t\treturn data.problemMessage.substring(0, TrimThreshold.MaxChars) + '…';\n\t\t\t}\n\t\t\treturn data.problemMessage.substring(0, lastSpace) + '…';\n\t\t}\n\t\tlet labelStr = localize('chat.attachment.problems.all', \"All Problems\");\n\t\tif (data.filterUri) {\n\t\t\tlabelStr = localize('chat.attachment.problems.inFile', \"Problems in {0}\", basename(data.filterUri));\n\t\t}\n\n\t\treturn labelStr;\n\t}\n}\n\nexport interface IDiagnosticVariableEntry extends IBaseChatRequestVariableEntry, IDiagnosticVariableEntryFilterData {\n\treadonly kind: 'diagnostic';\n}\n\nexport interface IElementVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'element';\n}\n\nexport interface IPromptFileVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'promptFile';\n\treadonly value: URI;\n\treadonly isRoot: boolean;\n\treadonly originLabel?: string;\n\treadonly modelDescription: string;\n\treadonly automaticallyAdded: boolean;\n\treadonly toolReferences?: readonly ChatRequestToolReferenceEntry[];\n}\n\nexport interface IPromptTextVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'promptText';\n\treadonly value: string;\n\treadonly settingId?: string;\n\treadonly modelDescription: string;\n\treadonly automaticallyAdded: boolean;\n\treadonly toolReferences?: readonly ChatRequestToolReferenceEntry[];\n}\n\nexport interface ISCMHistoryItemVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'scmHistoryItem';\n\treadonly value: URI;\n\treadonly historyItem: ISCMHistoryItem;\n}\n\nexport interface ISCMHistoryItemChangeVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'scmHistoryItemChange';\n\treadonly value: URI;\n\treadonly historyItem: ISCMHistoryItem;\n}\n\nexport interface ISCMHistoryItemChangeRangeVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'scmHistoryItemChangeRange';\n\treadonly value: URI;\n\treadonly historyItemChangeStart: {\n\t\treadonly uri: URI;\n\t\treadonly historyItem: ISCMHistoryItem;\n\t};\n\treadonly historyItemChangeEnd: {\n\t\treadonly uri: URI;\n\t\treadonly historyItem: ISCMHistoryItem;\n\t};\n}\n\nexport interface ITerminalVariableEntry extends IBaseChatRequestVariableEntry {\n\treadonly kind: 'terminalCommand';\n\treadonly value: string;\n\treadonly resource: URI;\n\treadonly command: string;\n\treadonly output?: string;\n\treadonly exitCode?: number;\n}\n\nexport type IChatRequestVariableEntry = IGenericChatRequestVariableEntry | IChatRequestImplicitVariableEntry | IChatRequestPasteVariableEntry\n\t| ISymbolVariableEntry | ICommandResultVariableEntry | IDiagnosticVariableEntry | IImageVariableEntry\n\t| IChatRequestToolEntry | IChatRequestToolSetEntry\n\t| IChatRequestDirectoryEntry | IChatRequestFileEntry | INotebookOutputVariableEntry | IElementVariableEntry\n\t| IPromptFileVariableEntry | IPromptTextVariableEntry\n\t| ISCMHistoryItemVariableEntry | ISCMHistoryItemChangeVariableEntry | ISCMHistoryItemChangeRangeVariableEntry | ITerminalVariableEntry\n\t| IChatRequestStringVariableEntry | IChatRequestWorkspaceVariableEntry;\n\nexport namespace IChatRequestVariableEntry {\n\n\t/**\n\t * Returns URI of the passed variant entry. Return undefined if not found.\n\t */\n\texport function toUri(entry: IChatRequestVariableEntry): URI | undefined {\n\t\treturn URI.isUri(entry.value)\n\t\t\t? entry.value\n\t\t\t: isLocation(entry.value)\n\t\t\t\t? entry.value.uri\n\t\t\t\t: undefined;\n\t}\n}\n\n\nexport function isImplicitVariableEntry(obj: IChatRequestVariableEntry): obj is IChatRequestImplicitVariableEntry {\n\treturn obj.kind === 'implicit';\n}\n\nexport function isStringVariableEntry(obj: IChatRequestVariableEntry): obj is IChatRequestStringVariableEntry {\n\treturn obj.kind === 'string';\n}\n\nexport function isTerminalVariableEntry(obj: IChatRequestVariableEntry): obj is ITerminalVariableEntry {\n\treturn obj.kind === 'terminalCommand';\n}\n\nexport function isPasteVariableEntry(obj: IChatRequestVariableEntry): obj is IChatRequestPasteVariableEntry {\n\treturn obj.kind === 'paste';\n}\n\nexport function isWorkspaceVariableEntry(obj: IChatRequestVariableEntry): obj is IChatRequestWorkspaceVariableEntry {\n\treturn obj.kind === 'workspace';\n}\n\nexport function isImageVariableEntry(obj: IChatRequestVariableEntry): obj is IImageVariableEntry {\n\treturn obj.kind === 'image';\n}\n\nexport function isNotebookOutputVariableEntry(obj: IChatRequestVariableEntry): obj is INotebookOutputVariableEntry {\n\treturn obj.kind === 'notebookOutput';\n}\n\nexport function isElementVariableEntry(obj: IChatRequestVariableEntry): obj is IElementVariableEntry {\n\treturn obj.kind === 'element';\n}\n\nexport function isDiagnosticsVariableEntry(obj: IChatRequestVariableEntry): obj is IDiagnosticVariableEntry {\n\treturn obj.kind === 'diagnostic';\n}\n\nexport function isChatRequestFileEntry(obj: IChatRequestVariableEntry): obj is IChatRequestFileEntry {\n\treturn obj.kind === 'file';\n}\n\nexport function isPromptFileVariableEntry(obj: IChatRequestVariableEntry): obj is IPromptFileVariableEntry {\n\treturn obj.kind === 'promptFile';\n}\n\nexport function isPromptTextVariableEntry(obj: IChatRequestVariableEntry): obj is IPromptTextVariableEntry {\n\treturn obj.kind === 'promptText';\n}\n\nexport function isChatRequestVariableEntry(obj: unknown): obj is IChatRequestVariableEntry {\n\tconst entry = obj as IChatRequestVariableEntry;\n\treturn typeof entry === 'object' &&\n\t\tentry !== null &&\n\t\ttypeof entry.id === 'string' &&\n\t\ttypeof entry.name === 'string';\n}\n\nexport function isSCMHistoryItemVariableEntry(obj: IChatRequestVariableEntry): obj is ISCMHistoryItemVariableEntry {\n\treturn obj.kind === 'scmHistoryItem';\n}\n\nexport function isSCMHistoryItemChangeVariableEntry(obj: IChatRequestVariableEntry): obj is ISCMHistoryItemChangeVariableEntry {\n\treturn obj.kind === 'scmHistoryItemChange';\n}\n\nexport function isSCMHistoryItemChangeRangeVariableEntry(obj: IChatRequestVariableEntry): obj is ISCMHistoryItemChangeRangeVariableEntry {\n\treturn obj.kind === 'scmHistoryItemChangeRange';\n}\n\nexport function isStringImplicitContextValue(value: unknown): value is StringChatContextValue {\n\tconst asStringImplicitContextValue = value as Partial<StringChatContextValue>;\n\treturn (\n\t\ttypeof asStringImplicitContextValue === 'object' &&\n\t\tasStringImplicitContextValue !== null &&\n\t\t(typeof asStringImplicitContextValue.value === 'string' || typeof asStringImplicitContextValue.value === 'undefined') &&\n\t\ttypeof asStringImplicitContextValue.name === 'string' &&\n\t\tThemeIcon.isThemeIcon(asStringImplicitContextValue.icon) &&\n\t\tURI.isUri(asStringImplicitContextValue.uri)\n\t);\n}\n\nexport enum PromptFileVariableKind {\n\tInstruction = 'vscode.prompt.instructions.root',\n\tInstructionReference = `vscode.prompt.instructions`,\n\tPromptFile = 'vscode.prompt.file'\n}\n\n/**\n * Utility to convert a {@link uri} to a chat variable entry.\n * The `id` of the chat variable can be one of the following:\n *\n * - `vscode.prompt.instructions__<URI>`: for all non-root prompt instructions references\n * - `vscode.prompt.instructions.root__<URI>`: for *root* prompt instructions references\n * - `vscode.prompt.file__<URI>`: for prompt file references\n *\n * @param uri A resource URI that points to a prompt instructions file.\n * @param kind The kind of the prompt file variable entry.\n */\nexport function toPromptFileVariableEntry(uri: URI, kind: PromptFileVariableKind, originLabel?: string, automaticallyAdded = false, toolReferences?: ChatRequestToolReferenceEntry[]): IPromptFileVariableEntry {\n\t//  `id` for all `prompt files` starts with the well-defined part that the copilot extension(or other chatbot) can rely on\n\treturn {\n\t\tid: `${kind}__${uri.toString()}`,\n\t\tname: `prompt:${basename(uri)}`,\n\t\tvalue: uri,\n\t\tkind: 'promptFile',\n\t\tmodelDescription: 'Prompt instructions file',\n\t\tisRoot: kind !== PromptFileVariableKind.InstructionReference,\n\t\toriginLabel,\n\t\ttoolReferences,\n\t\tautomaticallyAdded\n\t};\n}\n\nexport function toPromptTextVariableEntry(content: string, automaticallyAdded = false, toolReferences?: ChatRequestToolReferenceEntry[]): IPromptTextVariableEntry {\n\treturn {\n\t\tid: `vscode.prompt.instructions.text`,\n\t\tname: `prompt:instructionsList`,\n\t\tvalue: content,\n\t\tkind: 'promptText',\n\t\tmodelDescription: 'Prompt instructions list',\n\t\tautomaticallyAdded,\n\t\ttoolReferences\n\t};\n}\n\nexport function toFileVariableEntry(uri: URI, range?: IRange): IChatRequestFileEntry {\n\treturn {\n\t\tkind: 'file',\n\t\tvalue: range ? { uri, range } : uri,\n\t\tid: uri.toString() + (range?.toString() ?? ''),\n\t\tname: basename(uri),\n\t};\n}\n\nexport function toToolVariableEntry(entry: IToolData, range?: IOffsetRange): IChatRequestToolEntry {\n\treturn {\n\t\tkind: 'tool',\n\t\tid: entry.id,\n\t\ticon: ThemeIcon.isThemeIcon(entry.icon) ? entry.icon : undefined,\n\t\tname: entry.displayName,\n\t\tvalue: undefined,\n\t\trange\n\t};\n}\n\nexport function toToolSetVariableEntry(entry: ToolSet, range?: IOffsetRange): IChatRequestToolSetEntry {\n\treturn {\n\t\tkind: 'toolset',\n\t\tid: entry.id,\n\t\ticon: entry.icon,\n\t\tname: entry.referenceName,\n\t\tvalue: Array.from(entry.getTools()).map(t => toToolVariableEntry(t)),\n\t\trange\n\t};\n}\n\nexport class ChatRequestVariableSet {\n\tprivate _ids = new Set<string>();\n\tprivate _entries: IChatRequestVariableEntry[] = [];\n\n\tconstructor(entries?: IChatRequestVariableEntry[]) {\n\t\tif (entries) {\n\t\t\tthis.add(...entries);\n\t\t}\n\t}\n\n\tpublic add(...entry: IChatRequestVariableEntry[]): void {\n\t\tfor (const e of entry) {\n\t\t\tif (!this._ids.has(e.id)) {\n\t\t\t\tthis._ids.add(e.id);\n\t\t\t\tthis._entries.push(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic insertFirst(entry: IChatRequestVariableEntry): void {\n\t\tif (!this._ids.has(entry.id)) {\n\t\t\tthis._ids.add(entry.id);\n\t\t\tthis._entries.unshift(entry);\n\t\t}\n\t}\n\n\tpublic remove(entry: IChatRequestVariableEntry): void {\n\t\tthis._ids.delete(entry.id);\n\t\tthis._entries = this._entries.filter(e => e.id !== entry.id);\n\t}\n\n\tpublic has(entry: IChatRequestVariableEntry): boolean {\n\t\treturn this._ids.has(entry.id);\n\t}\n\n\tpublic asArray(): IChatRequestVariableEntry[] {\n\t\treturn this._entries.slice(0); // return a copy\n\t}\n\n\tpublic get length(): number {\n\t\treturn this._entries.length;\n\t}\n}\n"]}