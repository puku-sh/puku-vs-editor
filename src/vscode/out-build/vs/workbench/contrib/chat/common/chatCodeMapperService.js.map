{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/common/chatCodeMapperService.ts","vs/workbench/contrib/chat/common/chatCodeMapperService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAMhG,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AA+B7F,MAAM,CAAC,MAAM,kBAAkB,GAAG,eAAe,CAAqB,mBAAmB,CAAC,CAAC;AAS3F,MAAM,OAAO,iBAAiB;IAA9B;QAGiB,cAAS,GAA0B,EAAE,CAAC;IAwBvD,CAAC;IAtBA,0BAA0B,CAAC,MAAc,EAAE,QAA6B;QACvE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,OAAO;YACN,OAAO,EAAE,GAAG,EAAE;gBACb,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;gBAC/C,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC;oBAChB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACjC,CAAC;YACF,CAAC;SACD,CAAC;IACH,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,OAA2B,EAAE,QAA6B,EAAE,KAAwB;QACjG,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;YACvC,MAAM,MAAM,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;YAChE,IAAI,KAAK,CAAC,uBAAuB,EAAE,CAAC;gBACnC,OAAO,SAAS,CAAC;YAClB,CAAC;YACD,OAAO,MAAM,CAAC;QACf,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;CACD","file":"chatCodeMapperService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextEdit } from '../../../../editor/common/languages.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ICellEditOperation } from '../../notebook/common/notebookCommon.js';\n\nexport interface ICodeMapperResponse {\n\ttextEdit: (resource: URI, textEdit: TextEdit[]) => void;\n\tnotebookEdit: (resource: URI, edit: ICellEditOperation[]) => void;\n}\n\nexport interface ICodeMapperCodeBlock {\n\treadonly code: string;\n\treadonly resource: URI;\n\treadonly markdownBeforeBlock?: string;\n}\n\nexport interface ICodeMapperRequest {\n\treadonly codeBlocks: ICodeMapperCodeBlock[];\n\treadonly chatRequestId?: string;\n\treadonly chatRequestModel?: string;\n\treadonly chatSessionId?: string;\n\treadonly location?: string;\n}\n\nexport interface ICodeMapperResult {\n\treadonly errorMessage?: string;\n}\n\nexport interface ICodeMapperProvider {\n\treadonly displayName: string;\n\tmapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken): Promise<ICodeMapperResult | undefined>;\n}\n\nexport const ICodeMapperService = createDecorator<ICodeMapperService>('codeMapperService');\n\nexport interface ICodeMapperService {\n\treadonly _serviceBrand: undefined;\n\treadonly providers: ICodeMapperProvider[];\n\tregisterCodeMapperProvider(handle: number, provider: ICodeMapperProvider): IDisposable;\n\tmapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken): Promise<ICodeMapperResult | undefined>;\n}\n\nexport class CodeMapperService implements ICodeMapperService {\n\t_serviceBrand: undefined;\n\n\tpublic readonly providers: ICodeMapperProvider[] = [];\n\n\tregisterCodeMapperProvider(handle: number, provider: ICodeMapperProvider): IDisposable {\n\t\tthis.providers.push(provider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tconst index = this.providers.indexOf(provider);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tthis.providers.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tasync mapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken) {\n\t\tfor (const provider of this.providers) {\n\t\t\tconst result = await provider.mapCode(request, response, token);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextEdit } from '../../../../editor/common/languages.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ICellEditOperation } from '../../notebook/common/notebookCommon.js';\n\nexport interface ICodeMapperResponse {\n\ttextEdit: (resource: URI, textEdit: TextEdit[]) => void;\n\tnotebookEdit: (resource: URI, edit: ICellEditOperation[]) => void;\n}\n\nexport interface ICodeMapperCodeBlock {\n\treadonly code: string;\n\treadonly resource: URI;\n\treadonly markdownBeforeBlock?: string;\n}\n\nexport interface ICodeMapperRequest {\n\treadonly codeBlocks: ICodeMapperCodeBlock[];\n\treadonly chatRequestId?: string;\n\treadonly chatRequestModel?: string;\n\treadonly chatSessionId?: string;\n\treadonly location?: string;\n}\n\nexport interface ICodeMapperResult {\n\treadonly errorMessage?: string;\n}\n\nexport interface ICodeMapperProvider {\n\treadonly displayName: string;\n\tmapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken): Promise<ICodeMapperResult | undefined>;\n}\n\nexport const ICodeMapperService = createDecorator<ICodeMapperService>('codeMapperService');\n\nexport interface ICodeMapperService {\n\treadonly _serviceBrand: undefined;\n\treadonly providers: ICodeMapperProvider[];\n\tregisterCodeMapperProvider(handle: number, provider: ICodeMapperProvider): IDisposable;\n\tmapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken): Promise<ICodeMapperResult | undefined>;\n}\n\nexport class CodeMapperService implements ICodeMapperService {\n\t_serviceBrand: undefined;\n\n\tpublic readonly providers: ICodeMapperProvider[] = [];\n\n\tregisterCodeMapperProvider(handle: number, provider: ICodeMapperProvider): IDisposable {\n\t\tthis.providers.push(provider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tconst index = this.providers.indexOf(provider);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tthis.providers.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tasync mapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken) {\n\t\tfor (const provider of this.providers) {\n\t\t\tconst result = await provider.mapCode(request, response, token);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"]}