{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/common/languageModelToolsConfirmationService.ts","vs/workbench/contrib/chat/common/languageModelToolsConfirmationService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAyF7F,MAAM,CAAC,MAAM,sCAAsC,GAAG,eAAe,CAAyC,wCAAwC,CAAC,CAAC","file":"languageModelToolsConfirmationService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputButton, IQuickTreeItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ConfirmedReason } from './chatService.js';\nimport { IToolData, ToolDataSource } from './languageModelToolsService.js';\n\nexport interface ILanguageModelToolConfirmationActions {\n\t/** Label for the action */\n\tlabel: string;\n\t/** Action detail (e.g. tooltip) */\n\tdetail?: string;\n\t/** Show a separator before this action */\n\tdivider?: boolean;\n\t/** Selects this action. Resolves true if the action should be confirmed after selection */\n\tselect(): Promise<boolean>;\n}\n\nexport interface ILanguageModelToolConfirmationRef {\n\ttoolId: string;\n\tsource: ToolDataSource;\n\tparameters: unknown;\n}\n\nexport interface ILanguageModelToolConfirmationActionProducer {\n\tgetPreConfirmAction(ref: ILanguageModelToolConfirmationRef): ConfirmedReason | undefined;\n\tgetPostConfirmAction(ref: ILanguageModelToolConfirmationRef): ConfirmedReason | undefined;\n\n\t/** Gets the selectable actions to take to memorize confirmation changes */\n\tgetPreConfirmActions(ref: ILanguageModelToolConfirmationRef): ILanguageModelToolConfirmationActions[];\n\tgetPostConfirmActions(ref: ILanguageModelToolConfirmationRef): ILanguageModelToolConfirmationActions[];\n}\n\nexport interface ILanguageModelToolConfirmationContributionQuickTreeItem extends IQuickTreeItem {\n\tonDidTriggerItemButton?(button: IQuickInputButton): void;\n\tonDidChangeChecked?(checked: boolean): void;\n\tonDidOpen?(): void;\n}\n\n/**\n * Type that can be registered to provide more specific confirmation\n * actions for a specific tool.\n */\nexport type ILanguageModelToolConfirmationContribution = Partial<ILanguageModelToolConfirmationActionProducer> & {\n\t/**\n\t * Gets items to be shown in the `manageConfirmationPreferences` quick tree.\n\t * These are added under the tool's category.\n\t */\n\tgetManageActions?(): ILanguageModelToolConfirmationContributionQuickTreeItem[];\n\n\t/**\n\t * Defaults to true. If false, the \"Always Allow\" options will not be shown\n\t * and _only_ your custom manage actions will be shown.\n\t */\n\tcanUseDefaultApprovals?: boolean;\n\n\t/**\n\t * Reset all confirmation settings for this tool.\n\t */\n\treset?(): void;\n};\n\n/**\n * Handles language model tool confirmation.\n *\n * - By default, all tools can have their confirmation preferences saved within\n *   a session, workspace, or globally.\n * - Tools with ToolDataSource from an extension or MCP can have that entire\n *   source's preference saved within a session, workspace, or globally.\n * - Contributable confirmations may also be registered for specific behaviors.\n *\n * Note: this interface MUST NOT depend in the ILanguageModelToolsService.\n * The ILanguageModelToolsService depends on this service instead in order to\n * call getPreConfirmAction/getPostConfirmAction.\n */\nexport interface ILanguageModelToolsConfirmationService extends ILanguageModelToolConfirmationActionProducer {\n\treadonly _serviceBrand: undefined;\n\n\t/** Opens an IQuickTree to let the user manage their preferences.  */\n\tmanageConfirmationPreferences(tools: Readonly<IToolData>[], options?: { defaultScope?: 'workspace' | 'profile' | 'session' }): void;\n\n\t/**\n\t * Registers a contribution that provides more specific confirmation logic\n\t * for a tool, in addition to the default confirmation handling.\n\t */\n\tregisterConfirmationContribution(toolName: string, contribution: ILanguageModelToolConfirmationContribution): IDisposable;\n\n\t/** Resets all tool and server confirmation preferences */\n\tresetToolAutoConfirmation(): void;\n}\n\nexport const ILanguageModelToolsConfirmationService = createDecorator<ILanguageModelToolsConfirmationService>('ILanguageModelToolsConfirmationService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputButton, IQuickTreeItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ConfirmedReason } from './chatService.js';\nimport { IToolData, ToolDataSource } from './languageModelToolsService.js';\n\nexport interface ILanguageModelToolConfirmationActions {\n\t/** Label for the action */\n\tlabel: string;\n\t/** Action detail (e.g. tooltip) */\n\tdetail?: string;\n\t/** Show a separator before this action */\n\tdivider?: boolean;\n\t/** Selects this action. Resolves true if the action should be confirmed after selection */\n\tselect(): Promise<boolean>;\n}\n\nexport interface ILanguageModelToolConfirmationRef {\n\ttoolId: string;\n\tsource: ToolDataSource;\n\tparameters: unknown;\n}\n\nexport interface ILanguageModelToolConfirmationActionProducer {\n\tgetPreConfirmAction(ref: ILanguageModelToolConfirmationRef): ConfirmedReason | undefined;\n\tgetPostConfirmAction(ref: ILanguageModelToolConfirmationRef): ConfirmedReason | undefined;\n\n\t/** Gets the selectable actions to take to memorize confirmation changes */\n\tgetPreConfirmActions(ref: ILanguageModelToolConfirmationRef): ILanguageModelToolConfirmationActions[];\n\tgetPostConfirmActions(ref: ILanguageModelToolConfirmationRef): ILanguageModelToolConfirmationActions[];\n}\n\nexport interface ILanguageModelToolConfirmationContributionQuickTreeItem extends IQuickTreeItem {\n\tonDidTriggerItemButton?(button: IQuickInputButton): void;\n\tonDidChangeChecked?(checked: boolean): void;\n\tonDidOpen?(): void;\n}\n\n/**\n * Type that can be registered to provide more specific confirmation\n * actions for a specific tool.\n */\nexport type ILanguageModelToolConfirmationContribution = Partial<ILanguageModelToolConfirmationActionProducer> & {\n\t/**\n\t * Gets items to be shown in the `manageConfirmationPreferences` quick tree.\n\t * These are added under the tool's category.\n\t */\n\tgetManageActions?(): ILanguageModelToolConfirmationContributionQuickTreeItem[];\n\n\t/**\n\t * Defaults to true. If false, the \"Always Allow\" options will not be shown\n\t * and _only_ your custom manage actions will be shown.\n\t */\n\tcanUseDefaultApprovals?: boolean;\n\n\t/**\n\t * Reset all confirmation settings for this tool.\n\t */\n\treset?(): void;\n};\n\n/**\n * Handles language model tool confirmation.\n *\n * - By default, all tools can have their confirmation preferences saved within\n *   a session, workspace, or globally.\n * - Tools with ToolDataSource from an extension or MCP can have that entire\n *   source's preference saved within a session, workspace, or globally.\n * - Contributable confirmations may also be registered for specific behaviors.\n *\n * Note: this interface MUST NOT depend in the ILanguageModelToolsService.\n * The ILanguageModelToolsService depends on this service instead in order to\n * call getPreConfirmAction/getPostConfirmAction.\n */\nexport interface ILanguageModelToolsConfirmationService extends ILanguageModelToolConfirmationActionProducer {\n\treadonly _serviceBrand: undefined;\n\n\t/** Opens an IQuickTree to let the user manage their preferences.  */\n\tmanageConfirmationPreferences(tools: Readonly<IToolData>[], options?: { defaultScope?: 'workspace' | 'profile' | 'session' }): void;\n\n\t/**\n\t * Registers a contribution that provides more specific confirmation logic\n\t * for a tool, in addition to the default confirmation handling.\n\t */\n\tregisterConfirmationContribution(toolName: string, contribution: ILanguageModelToolConfirmationContribution): IDisposable;\n\n\t/** Resets all tool and server confirmation preferences */\n\tresetToolAutoConfirmation(): void;\n}\n\nexport const ILanguageModelToolsConfirmationService = createDecorator<ILanguageModelToolsConfirmationService>('ILanguageModelToolsConfirmationService');\n"]}