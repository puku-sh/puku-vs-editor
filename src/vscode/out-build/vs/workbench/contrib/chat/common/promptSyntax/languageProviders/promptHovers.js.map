{"version":3,"sources":["vs/workbench/contrib/chat/common/promptSyntax/languageProviders/promptHovers.ts"],"names":[],"mappings":"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","file":"promptHovers.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { MarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { Position } from '../../../../../../editor/common/core/position.js';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { Hover, HoverContext, HoverProvider } from '../../../../../../editor/common/languages.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { localize } from '../../../../../../nls.js';\nimport { ILanguageModelChatMetadata, ILanguageModelsService } from '../../languageModels.js';\nimport { ILanguageModelToolsService, ToolSet } from '../../languageModelToolsService.js';\nimport { IChatModeService, isBuiltinChatMode } from '../../chatModes.js';\nimport { getPromptsTypeForLanguageId, PromptsType } from '../promptTypes.js';\nimport { IPromptsService } from '../service/promptsService.js';\nimport { IHeaderAttribute, PromptBody, PromptHeader, PromptHeaderAttributes, Target } from '../promptFileParser.js';\nimport { isGithubTarget, knownGithubCopilotTools } from './promptValidator.js';\n\nexport class PromptHoverProvider implements HoverProvider {\n\t/**\n\t * Debug display name for this provider.\n\t */\n\tpublic readonly _debugDisplayName: string = 'PromptHoverProvider';\n\n\tconstructor(\n\t\t@IPromptsService private readonly promptsService: IPromptsService,\n\t\t@ILanguageModelToolsService private readonly languageModelToolsService: ILanguageModelToolsService,\n\t\t@ILanguageModelsService private readonly languageModelsService: ILanguageModelsService,\n\t\t@IChatModeService private readonly chatModeService: IChatModeService,\n\t) {\n\t}\n\n\tprivate createHover(contents: string, range: Range): Hover {\n\t\treturn {\n\t\t\tcontents: [new MarkdownString(contents)],\n\t\t\trange\n\t\t};\n\t}\n\n\tpublic async provideHover(model: ITextModel, position: Position, token: CancellationToken, _context?: HoverContext): Promise<Hover | undefined> {\n\n\t\tconst promptType = getPromptsTypeForLanguageId(model.getLanguageId());\n\t\tif (!promptType) {\n\t\t\t// if the model is not a prompt, we don't provide any hovers\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst promptAST = this.promptsService.getParsedPromptFile(model);\n\t\tif (promptAST.header?.range.containsPosition(position)) {\n\t\t\treturn this.provideHeaderHover(position, promptType, promptAST.header);\n\t\t}\n\t\tif (promptAST.body?.range.containsPosition(position)) {\n\t\t\treturn this.provideBodyHover(position, promptAST.body);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async provideBodyHover(position: Position, body: PromptBody): Promise<Hover | undefined> {\n\t\tfor (const ref of body.variableReferences) {\n\t\t\tif (ref.range.containsPosition(position)) {\n\t\t\t\tconst toolName = ref.name;\n\t\t\t\treturn this.getToolHoverByName(toolName, ref.range);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async provideHeaderHover(position: Position, promptType: PromptsType, header: PromptHeader): Promise<Hover | undefined> {\n\t\tif (promptType === PromptsType.instructions) {\n\t\t\tfor (const attribute of header.attributes) {\n\t\t\t\tif (attribute.range.containsPosition(position)) {\n\t\t\t\t\tswitch (attribute.key) {\n\t\t\t\t\t\tcase PromptHeaderAttributes.name:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.instructions.name', 'The name of the instruction file as shown in the UI. If not set, the name is derived from the file name.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.description:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.instructions.description', 'The description of the instruction file. It can be used to provide additional context or information about the instructions and is passed to the language model as part of the prompt.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.applyTo:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.instructions.applyToRange', 'One or more glob pattern (separated by comma) that describe for which files the instructions apply to. Based on these patterns, the file is automatically included in the prompt, when the context contains a file that matches one or more of these patterns. Use `**` when you want this file to always be added.\\nExample: `**/*.ts`, `**/*.js`, `client/**`'), attribute.range);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (promptType === PromptsType.agent) {\n\t\t\tconst isGitHubTarget = isGithubTarget(promptType, header.target);\n\t\t\tfor (const attribute of header.attributes) {\n\t\t\t\tif (attribute.range.containsPosition(position)) {\n\t\t\t\t\tswitch (attribute.key) {\n\t\t\t\t\t\tcase PromptHeaderAttributes.name:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.agent.name', 'The name of the agent as shown in the UI.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.description:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.agent.description', 'The description of the custom agent, what it does and when to use it.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.argumentHint:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.agent.argumentHint', 'The argument-hint describes what inputs the custom agent expects or supports.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.model:\n\t\t\t\t\t\t\treturn this.getModelHover(attribute, attribute.range, localize('promptHeader.agent.model', 'Specify the model that runs this custom agent.'), isGitHubTarget);\n\t\t\t\t\t\tcase PromptHeaderAttributes.tools:\n\t\t\t\t\t\t\treturn this.getToolHover(attribute, position, localize('promptHeader.agent.tools', 'The set of tools that the custom agent has access to.'), header.target);\n\t\t\t\t\t\tcase PromptHeaderAttributes.handOffs:\n\t\t\t\t\t\t\treturn this.getHandsOffHover(attribute, position, isGitHubTarget);\n\t\t\t\t\t\tcase PromptHeaderAttributes.target:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.agent.target', 'The target to which the header attributes like tools apply to. Possible values are `github-copilot` and `vscode`.'), attribute.range);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const attribute of header.attributes) {\n\t\t\t\tif (attribute.range.containsPosition(position)) {\n\t\t\t\t\tswitch (attribute.key) {\n\t\t\t\t\t\tcase PromptHeaderAttributes.name:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.prompt.name', 'The name of the prompt. This is also the name of the slash command that will run this prompt.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.description:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.prompt.description', 'The description of the reusable prompt, what it does and when to use it.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.argumentHint:\n\t\t\t\t\t\t\treturn this.createHover(localize('promptHeader.prompt.argumentHint', 'The argument-hint describes what inputs the prompt expects or supports.'), attribute.range);\n\t\t\t\t\t\tcase PromptHeaderAttributes.model:\n\t\t\t\t\t\t\treturn this.getModelHover(attribute, attribute.range, localize('promptHeader.prompt.model', 'The model to use in this prompt.'), false);\n\t\t\t\t\t\tcase PromptHeaderAttributes.tools:\n\t\t\t\t\t\t\treturn this.getToolHover(attribute, position, localize('promptHeader.prompt.tools', 'The tools to use in this prompt.'), Target.VSCode);\n\t\t\t\t\t\tcase PromptHeaderAttributes.agent:\n\t\t\t\t\t\tcase PromptHeaderAttributes.mode:\n\t\t\t\t\t\t\treturn this.getAgentHover(attribute, position);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getToolHover(node: IHeaderAttribute, position: Position, baseMessage: string, target: string | undefined): Hover | undefined {\n\t\tif (node.value.type === 'array') {\n\t\t\tfor (const toolName of node.value.items) {\n\t\t\t\tif (toolName.type === 'string' && toolName.range.containsPosition(position)) {\n\t\t\t\t\tlet toolNameValue = toolName.value;\n\t\t\t\t\tif (target === undefined) {\n\t\t\t\t\t\ttoolNameValue = this.languageModelToolsService.mapGithubToolName(toolNameValue);\n\t\t\t\t\t}\n\t\t\t\t\tif (target === Target.VSCode || target === undefined) {\n\t\t\t\t\t\tconst description = this.getToolHoverByName(toolNameValue, toolName.range);\n\t\t\t\t\t\tif (description) {\n\t\t\t\t\t\t\treturn description;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (target === Target.GitHubCopilot || target === undefined) {\n\t\t\t\t\t\tconst description = knownGithubCopilotTools[toolNameValue];\n\t\t\t\t\t\tif (description) {\n\t\t\t\t\t\t\treturn this.createHover(description, toolName.range);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.createHover(baseMessage, node.range);\n\t}\n\n\tprivate getToolHoverByName(toolName: string, range: Range): Hover | undefined {\n\t\tconst tool = this.languageModelToolsService.getToolByQualifiedName(toolName);\n\t\tif (tool !== undefined) {\n\t\t\tif (tool instanceof ToolSet) {\n\t\t\t\treturn this.getToolsetHover(tool, range);\n\t\t\t} else {\n\t\t\t\treturn this.createHover(tool.userDescription ?? tool.modelDescription, range);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getToolsetHover(toolSet: ToolSet, range: Range): Hover | undefined {\n\t\tconst lines: string[] = [];\n\t\tlines.push(localize('toolSetName', 'ToolSet: {0}\\n\\n', toolSet.referenceName));\n\t\tif (toolSet.description) {\n\t\t\tlines.push(toolSet.description);\n\t\t}\n\t\tfor (const tool of toolSet.getTools()) {\n\t\t\tlines.push(`- ${tool.toolReferenceName ?? tool.displayName}`);\n\t\t}\n\t\treturn this.createHover(lines.join('\\n'), range);\n\t}\n\n\tprivate getModelHover(node: IHeaderAttribute, range: Range, baseMessage: string, isGitHubTarget: boolean): Hover | undefined {\n\t\tif (isGitHubTarget) {\n\t\t\treturn this.createHover(baseMessage + '\\n\\n' + localize('promptHeader.agent.model.githubCopilot', 'Note: This attribute is not used when target is github-copilot.'), range);\n\t\t}\n\t\tif (node.value.type === 'string') {\n\t\t\tfor (const id of this.languageModelsService.getLanguageModelIds()) {\n\t\t\t\tconst meta = this.languageModelsService.lookupLanguageModel(id);\n\t\t\t\tif (meta && ILanguageModelChatMetadata.matchesQualifiedName(node.value.value, meta)) {\n\t\t\t\t\tconst lines: string[] = [];\n\t\t\t\t\tlines.push(baseMessage + '\\n');\n\t\t\t\t\tlines.push(localize('modelName', '- Name: {0}', meta.name));\n\t\t\t\t\tlines.push(localize('modelFamily', '- Family: {0}', meta.family));\n\t\t\t\t\tlines.push(localize('modelVendor', '- Vendor: {0}', meta.vendor));\n\t\t\t\t\tif (meta.tooltip) {\n\t\t\t\t\t\tlines.push('', '', meta.tooltip);\n\t\t\t\t\t}\n\t\t\t\t\treturn this.createHover(lines.join('\\n'), range);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.createHover(baseMessage, range);\n\t}\n\n\tprivate getAgentHover(agentAttribute: IHeaderAttribute, position: Position): Hover | undefined {\n\t\tconst lines: string[] = [];\n\t\tconst value = agentAttribute.value;\n\t\tif (value.type === 'string' && value.range.containsPosition(position)) {\n\t\t\tconst agent = this.chatModeService.findModeByName(value.value);\n\t\t\tif (agent) {\n\t\t\t\tconst description = agent.description.get() || (isBuiltinChatMode(agent) ? localize('promptHeader.prompt.agent.builtInDesc', 'Built-in agent') : localize('promptHeader.prompt.agent.customDesc', 'Custom agent'));\n\t\t\t\tlines.push(`\\`${agent.name.get()}\\`: ${description}`);\n\t\t\t}\n\t\t} else {\n\t\t\tconst agents = this.chatModeService.getModes();\n\t\t\tlines.push(localize('promptHeader.prompt.agent.description', 'The agent to use when running this prompt.'));\n\t\t\tlines.push('');\n\n\t\t\t// Built-in agents\n\t\t\tlines.push(localize('promptHeader.prompt.agent.builtin', '**Built-in agents:**'));\n\t\t\tfor (const agent of agents.builtin) {\n\t\t\t\tlines.push(`- \\`${agent.name.get()}\\`: ${agent.description.get() || agent.label.get()}`);\n\t\t\t}\n\n\t\t\t// Custom agents\n\t\t\tif (agents.custom.length > 0) {\n\t\t\t\tlines.push('');\n\t\t\t\tlines.push(localize('promptHeader.prompt.agent.custom', '**Custom agents:**'));\n\t\t\t\tfor (const agent of agents.custom) {\n\t\t\t\t\tconst description = agent.description.get();\n\t\t\t\t\tlines.push(`- \\`${agent.name.get()}\\`: ${description || localize('promptHeader.prompt.agent.customDesc', 'Custom agent')}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.createHover(lines.join('\\n'), agentAttribute.range);\n\t}\n\n\tprivate getHandsOffHover(attribute: IHeaderAttribute, position: Position, isGitHubTarget: boolean): Hover | undefined {\n\t\tconst handoffsBaseMessage = localize('promptHeader.agent.handoffs', 'Possible handoff actions when the agent has completed its task.');\n\t\tif (isGitHubTarget) {\n\t\t\treturn this.createHover(handoffsBaseMessage + '\\n\\n' + localize('promptHeader.agent.handoffs.githubCopilot', 'Note: This attribute is not used when target is github-copilot.'), attribute.range);\n\t\t}\n\t\treturn this.createHover(handoffsBaseMessage, attribute.range);\n\n\t}\n}\n"]}