{"version":3,"sources":["vs/workbench/contrib/chat/common/tools/manageTodoListTool.ts"],"names":[],"mappings":"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","file":"manageTodoListTool.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport {\n\tIToolData,\n\tIToolImpl,\n\tIToolInvocation,\n\tIToolResult,\n\tToolDataSource,\n\tIToolInvocationPreparationContext,\n\tIPreparedToolInvocation\n} from '../languageModelToolsService.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IChatTodo, IChatTodoListService } from '../chatTodoListService.js';\nimport { localize } from '../../../../../nls.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { chatSessionResourceToId, LocalChatSessionUri } from '../chatUri.js';\n\nexport const TodoListToolWriteOnlySettingId = 'chat.todoListTool.writeOnly';\nexport const TodoListToolDescriptionFieldSettingId = 'chat.todoListTool.descriptionField';\n\nexport const ManageTodoListToolToolId = 'manage_todo_list';\n\nexport function createManageTodoListToolData(writeOnly: boolean, includeDescription: boolean = true): IToolData {\n\tconst baseProperties: any = {\n\t\ttodoList: {\n\t\t\ttype: 'array',\n\t\t\tdescription: writeOnly\n\t\t\t\t? 'Complete array of all todo items. Must include ALL items - both existing and new.'\n\t\t\t\t: 'Complete array of all todo items (required for write operation, ignored for read). Must include ALL items - both existing and new.',\n\t\t\titems: {\n\t\t\t\ttype: 'object',\n\t\t\t\tproperties: {\n\t\t\t\t\tid: {\n\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\tdescription: 'Unique identifier for the todo. Use sequential numbers starting from 1.'\n\t\t\t\t\t},\n\t\t\t\t\ttitle: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tdescription: 'Concise action-oriented todo label (3-7 words). Displayed in UI.'\n\t\t\t\t\t},\n\t\t\t\t\t...(includeDescription && {\n\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\tdescription: 'Detailed context, requirements, or implementation notes. Include file paths, specific methods, or acceptance criteria.'\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tenum: ['not-started', 'in-progress', 'completed'],\n\t\t\t\t\t\tdescription: 'not-started: Not begun | in-progress: Currently working (max 1) | completed: Fully finished with no blockers'\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\trequired: includeDescription ? ['id', 'title', 'description', 'status'] : ['id', 'title', 'status']\n\t\t\t}\n\t\t}\n\t};\n\n\t// Only require the full todoList when operating in write-only mode.\n\t// In read/write mode, the write path validates todoList at runtime, so it's not schema-required.\n\tconst requiredFields = writeOnly ? ['todoList'] : [] as string[];\n\n\tif (!writeOnly) {\n\t\tbaseProperties.operation = {\n\t\t\ttype: 'string',\n\t\t\tenum: ['write', 'read'],\n\t\t\tdescription: 'write: Replace entire todo list with new content. read: Retrieve current todo list. ALWAYS provide complete list when writing - partial updates not supported.'\n\t\t};\n\t\trequiredFields.unshift('operation');\n\t}\n\n\treturn {\n\t\tid: ManageTodoListToolToolId,\n\t\ttoolReferenceName: 'todo',\n\t\tlegacyToolReferenceFullNames: ['todos'],\n\t\tcanBeReferencedInPrompt: true,\n\t\ticon: ThemeIcon.fromId(Codicon.checklist.id),\n\t\tdisplayName: localize('tool.manageTodoList.displayName', 'Manage and track todo items for task planning'),\n\t\tuserDescription: localize('tool.manageTodoList.userDescription', 'Manage and track todo items for task planning'),\n\t\tmodelDescription: 'Manage a structured todo list to track progress and plan tasks throughout your coding session. Use this tool VERY frequently to ensure task visibility and proper planning.\\n\\nWhen to use this tool:\\n- Complex multi-step work requiring planning and tracking\\n- When user provides multiple tasks or requests (numbered/comma-separated)\\n- After receiving new instructions that require multiple steps\\n- BEFORE starting work on any todo (mark as in-progress)\\n- IMMEDIATELY after completing each todo (mark completed individually)\\n- When breaking down larger tasks into smaller actionable steps\\n- To give users visibility into your progress and planning\\n\\nWhen NOT to use:\\n- Single, trivial tasks that can be completed in one step\\n- Purely conversational/informational requests\\n- When just reading files or performing simple searches\\n\\nCRITICAL workflow:\\n1. Plan tasks by writing todo list with specific, actionable items\\n2. Mark ONE todo as in-progress before starting work\\n3. Complete the work for that specific todo\\n4. Mark that todo as completed IMMEDIATELY\\n5. Move to next todo and repeat\\n\\nTodo states:\\n- not-started: Todo not yet begun\\n- in-progress: Currently working (limit ONE at a time)\\n- completed: Finished successfully\\n\\nIMPORTANT: Mark todos completed as soon as they are done. Do not batch completions.',\n\t\tsource: ToolDataSource.Internal,\n\t\tinputSchema: {\n\t\t\ttype: 'object',\n\t\t\tproperties: baseProperties,\n\t\t\trequired: requiredFields\n\t\t}\n\t};\n}\n\nexport const ManageTodoListToolData: IToolData = createManageTodoListToolData(false);\n\ninterface IManageTodoListToolInputParams {\n\toperation?: 'write' | 'read'; // Optional in write-only mode\n\ttodoList: Array<{\n\t\tid: number;\n\t\ttitle: string;\n\t\tdescription?: string;\n\t\tstatus: 'not-started' | 'in-progress' | 'completed';\n\t}>;\n\tchatSessionId?: string;\n}\n\nexport class ManageTodoListTool extends Disposable implements IToolImpl {\n\n\tconstructor(\n\t\tprivate readonly writeOnly: boolean,\n\t\tprivate readonly includeDescription: boolean,\n\t\t@IChatTodoListService private readonly chatTodoListService: IChatTodoListService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService\n\t) {\n\t\tsuper();\n\t}\n\n\tasync invoke(invocation: IToolInvocation, _countTokens: any, _progress: any, _token: CancellationToken): Promise<IToolResult> {\n\t\tconst args = invocation.parameters as IManageTodoListToolInputParams;\n\t\t// For: #263001 Use default sessionId\n\t\tconst DEFAULT_TODO_SESSION_ID = 'default';\n\t\tconst chatSessionId = invocation.context?.sessionId ?? args.chatSessionId ?? DEFAULT_TODO_SESSION_ID;\n\n\t\tthis.logService.debug(`ManageTodoListTool: Invoking with options ${JSON.stringify(args)}`);\n\n\t\ttry {\n\t\t\t// Determine operation: in writeOnly mode, always write; otherwise use args.operation\n\t\t\tconst operation = this.writeOnly ? 'write' : args.operation;\n\n\t\t\tif (!operation) {\n\t\t\t\treturn {\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\tkind: 'text',\n\t\t\t\t\t\tvalue: 'Error: operation parameter is required'\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (operation === 'read') {\n\t\t\t\treturn this.handleReadOperation(LocalChatSessionUri.forSession(chatSessionId));\n\t\t\t} else if (operation === 'write') {\n\t\t\t\treturn this.handleWriteOperation(args, LocalChatSessionUri.forSession(chatSessionId));\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\tkind: 'text',\n\t\t\t\t\t\tvalue: 'Error: Unknown operation'\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconst errorMessage = `Error: ${error instanceof Error ? error.message : 'Unknown error'}`;\n\t\t\treturn {\n\t\t\t\tcontent: [{\n\t\t\t\t\tkind: 'text',\n\t\t\t\t\tvalue: errorMessage\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\t}\n\n\tasync prepareToolInvocation(context: IToolInvocationPreparationContext, _token: CancellationToken): Promise<IPreparedToolInvocation | undefined> {\n\t\tconst args = context.parameters as IManageTodoListToolInputParams;\n\t\t// For: #263001 Use default sessionId\n\t\tconst DEFAULT_TODO_SESSION_ID = 'default';\n\t\tconst chatSessionId = context.chatSessionId ?? args.chatSessionId ?? DEFAULT_TODO_SESSION_ID;\n\n\t\tconst currentTodoItems = this.chatTodoListService.getTodos(LocalChatSessionUri.forSession(chatSessionId));\n\t\tlet message: string | undefined;\n\n\n\t\tconst operation = this.writeOnly ? 'write' : args.operation;\n\t\tswitch (operation) {\n\t\t\tcase 'write': {\n\t\t\t\tif (args.todoList) {\n\t\t\t\t\tmessage = this.generatePastTenseMessage(currentTodoItems, args.todoList);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'read': {\n\t\t\t\tmessage = localize('todo.readOperation', \"Read todo list\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst items = args.todoList ?? currentTodoItems;\n\t\tconst todoList = items.map(todo => ({\n\t\t\tid: todo.id.toString(),\n\t\t\ttitle: todo.title,\n\t\t\tdescription: todo.description || '',\n\t\t\tstatus: todo.status\n\t\t}));\n\n\t\treturn {\n\t\t\tpastTenseMessage: new MarkdownString(message ?? localize('todo.updatedList', \"Updated todo list\")),\n\t\t\ttoolSpecificData: {\n\t\t\t\tkind: 'todoList',\n\t\t\t\tsessionId: chatSessionId,\n\t\t\t\ttodoList: todoList\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate generatePastTenseMessage(currentTodos: IChatTodo[], newTodos: IManageTodoListToolInputParams['todoList']): string {\n\t\t// If no current todos, this is creating new ones\n\t\tif (currentTodos.length === 0) {\n\t\t\treturn newTodos.length === 1\n\t\t\t\t? localize('todo.created.single', \"Created 1 todo\")\n\t\t\t\t: localize('todo.created.multiple', \"Created {0} todos\", newTodos.length);\n\t\t}\n\n\t\t// Create map for easier comparison\n\t\tconst currentTodoMap = new Map(currentTodos.map(todo => [todo.id, todo]));\n\n\t\t// Check for newly started todos (marked as in-progress) - highest priority\n\t\tconst startedTodos = newTodos.filter(newTodo => {\n\t\t\tconst currentTodo = currentTodoMap.get(newTodo.id);\n\t\t\treturn currentTodo && currentTodo.status !== 'in-progress' && newTodo.status === 'in-progress';\n\t\t});\n\n\t\tif (startedTodos.length > 0) {\n\t\t\tconst startedTodo = startedTodos[0]; // Should only be one in-progress at a time\n\t\t\tconst totalTodos = newTodos.length;\n\t\t\tconst currentPosition = newTodos.findIndex(todo => todo.id === startedTodo.id) + 1;\n\t\t\treturn localize('todo.starting', \"Starting: *{0}* ({1}/{2})\", startedTodo.title, currentPosition, totalTodos);\n\t\t}\n\n\t\t// Check for newly completed todos\n\t\tconst completedTodos = newTodos.filter(newTodo => {\n\t\t\tconst currentTodo = currentTodoMap.get(newTodo.id);\n\t\t\treturn currentTodo && currentTodo.status !== 'completed' && newTodo.status === 'completed';\n\t\t});\n\n\t\tif (completedTodos.length > 0) {\n\t\t\tconst completedTodo = completedTodos[0]; // Get the first completed todo for the message\n\t\t\tconst totalTodos = newTodos.length;\n\t\t\tconst currentPosition = newTodos.findIndex(todo => todo.id === completedTodo.id) + 1;\n\t\t\treturn localize('todo.completed', \"Completed: *{0}* ({1}/{2})\", completedTodo.title, currentPosition, totalTodos);\n\t\t}\n\n\t\t// Check for new todos added\n\t\tconst addedTodos = newTodos.filter(newTodo => !currentTodoMap.has(newTodo.id));\n\t\tif (addedTodos.length > 0) {\n\t\t\treturn addedTodos.length === 1\n\t\t\t\t? localize('todo.added.single', \"Added 1 todo\")\n\t\t\t\t: localize('todo.added.multiple', \"Added {0} todos\", addedTodos.length);\n\t\t}\n\n\t\t// Default message for other updates\n\t\treturn localize('todo.updated', \"Updated todo list\");\n\t}\n\n\tprivate handleRead(todoItems: IChatTodo[], sessionResource: URI): string {\n\t\tif (todoItems.length === 0) {\n\t\t\treturn 'No todo list found.';\n\t\t}\n\n\t\tconst markdownTaskList = this.formatTodoListAsMarkdownTaskList(todoItems);\n\t\treturn `# Todo List\\n\\n${markdownTaskList}`;\n\t}\n\n\tprivate handleReadOperation(chatSessionResource: URI): IToolResult {\n\t\tconst todoItems = this.chatTodoListService.getTodos(chatSessionResource);\n\t\tconst readResult = this.handleRead(todoItems, chatSessionResource);\n\t\tconst statusCounts = this.calculateStatusCounts(todoItems);\n\n\t\tthis.telemetryService.publicLog2<TodoListToolInvokedEvent, TodoListToolInvokedClassification>(\n\t\t\t'todoListToolInvoked',\n\t\t\t{\n\t\t\t\toperation: 'read',\n\t\t\t\tnotStartedCount: statusCounts.notStartedCount,\n\t\t\t\tinProgressCount: statusCounts.inProgressCount,\n\t\t\t\tcompletedCount: statusCounts.completedCount,\n\t\t\t\tchatSessionId: chatSessionResourceToId(chatSessionResource)\n\t\t\t}\n\t\t);\n\n\t\treturn {\n\t\t\tcontent: [{\n\t\t\t\tkind: 'text',\n\t\t\t\tvalue: readResult\n\t\t\t}]\n\t\t};\n\t}\n\n\tprivate handleWriteOperation(args: IManageTodoListToolInputParams, chatSessionResource: URI): IToolResult {\n\t\tif (!args.todoList) {\n\t\t\treturn {\n\t\t\t\tcontent: [{\n\t\t\t\t\tkind: 'text',\n\t\t\t\t\tvalue: 'Error: todoList is required for write operation'\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\n\t\tconst todoList: IChatTodo[] = args.todoList.map((parsedTodo) => ({\n\t\t\tid: parsedTodo.id,\n\t\t\ttitle: parsedTodo.title,\n\t\t\tdescription: parsedTodo.description || '',\n\t\t\tstatus: parsedTodo.status\n\t\t}));\n\n\t\tconst existingTodos = this.chatTodoListService.getTodos(chatSessionResource);\n\t\tconst changes = this.calculateTodoChanges(existingTodos, todoList);\n\n\t\tthis.chatTodoListService.setTodos(chatSessionResource, todoList);\n\t\tconst statusCounts = this.calculateStatusCounts(todoList);\n\n\t\t// Build warnings\n\t\tconst warnings: string[] = [];\n\t\tif (todoList.length < 3) {\n\t\t\twarnings.push('Warning: Small todo list (<3 items). This task might not need a todo list.');\n\t\t}\n\t\telse if (todoList.length > 10) {\n\t\t\twarnings.push('Warning: Large todo list (>10 items). Consider keeping the list focused and actionable.');\n\t\t}\n\n\t\tif (changes > 3) {\n\t\t\twarnings.push('Warning: Did you mean to update so many todos at the same time? Consider working on them one by one.');\n\t\t}\n\n\t\tthis.telemetryService.publicLog2<TodoListToolInvokedEvent, TodoListToolInvokedClassification>(\n\t\t\t'todoListToolInvoked',\n\t\t\t{\n\t\t\t\toperation: 'write',\n\t\t\t\tnotStartedCount: statusCounts.notStartedCount,\n\t\t\t\tinProgressCount: statusCounts.inProgressCount,\n\t\t\t\tcompletedCount: statusCounts.completedCount,\n\t\t\t\tchatSessionId: chatSessionResourceToId(chatSessionResource)\n\t\t\t}\n\t\t);\n\n\t\treturn {\n\t\t\tcontent: [{\n\t\t\t\tkind: 'text',\n\t\t\t\tvalue: `Successfully wrote todo list${warnings.length ? '\\n\\n' + warnings.join('\\n') : ''}`\n\t\t\t}],\n\t\t\ttoolMetadata: {\n\t\t\t\twarnings: warnings\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate calculateStatusCounts(todos: IChatTodo[]): { notStartedCount: number; inProgressCount: number; completedCount: number } {\n\t\tconst notStartedCount = todos.filter(todo => todo.status === 'not-started').length;\n\t\tconst inProgressCount = todos.filter(todo => todo.status === 'in-progress').length;\n\t\tconst completedCount = todos.filter(todo => todo.status === 'completed').length;\n\t\treturn { notStartedCount, inProgressCount, completedCount };\n\t}\n\n\tprivate formatTodoListAsMarkdownTaskList(todoList: IChatTodo[]): string {\n\t\tif (todoList.length === 0) {\n\t\t\treturn '';\n\t\t}\n\n\t\treturn todoList.map(todo => {\n\t\t\tlet checkbox: string;\n\t\t\tswitch (todo.status) {\n\t\t\t\tcase 'completed':\n\t\t\t\t\tcheckbox = '[x]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'in-progress':\n\t\t\t\t\tcheckbox = '[-]';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'not-started':\n\t\t\t\tdefault:\n\t\t\t\t\tcheckbox = '[ ]';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst lines = [`- ${checkbox} ${todo.title}`];\n\t\t\tif (this.includeDescription && todo.description && todo.description.trim()) {\n\t\t\t\tlines.push(`  - ${todo.description.trim()}`);\n\t\t\t}\n\n\t\t\treturn lines.join('\\n');\n\t\t}).join('\\n');\n\t}\n\n\tprivate calculateTodoChanges(oldList: IChatTodo[], newList: IChatTodo[]): number {\n\t\t// Assume arrays are equivalent in order; compare index-by-index\n\t\tlet modified = 0;\n\t\tconst minLen = Math.min(oldList.length, newList.length);\n\t\tfor (let i = 0; i < minLen; i++) {\n\t\t\tconst o = oldList[i];\n\t\t\tconst n = newList[i];\n\t\t\tif (o.title !== n.title || (o.description ?? '') !== (n.description ?? '') || o.status !== n.status) {\n\t\t\t\tmodified++;\n\t\t\t}\n\t\t}\n\n\t\tconst added = Math.max(0, newList.length - oldList.length);\n\t\tconst removed = Math.max(0, oldList.length - newList.length);\n\t\tconst totalChanges = added + removed + modified;\n\t\treturn totalChanges;\n\t}\n}\n\ntype TodoListToolInvokedEvent = {\n\toperation: 'read' | 'write';\n\tnotStartedCount: number;\n\tinProgressCount: number;\n\tcompletedCount: number;\n\tchatSessionId: string | undefined;\n};\n\ntype TodoListToolInvokedClassification = {\n\toperation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The operation performed on the todo list (read or write).' };\n\tnotStartedCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'The number of tasks with not-started status.' };\n\tinProgressCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'The number of tasks with in-progress status.' };\n\tcompletedCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; isMeasurement: true; comment: 'The number of tasks with completed status.' };\n\tchatSessionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The ID of the chat session that the tool was used within, if applicable.' };\n\towner: 'bhavyaus';\n\tcomment: 'Provides insight into the usage of the todo list tool including detailed task status distribution.';\n};\n"]}