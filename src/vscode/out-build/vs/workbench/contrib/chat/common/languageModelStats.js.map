{"version":3,"sources":["vs/workbench/contrib/chat/common/languageModelStats.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAC7F,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAE9G,OAAO,EAAE,UAAU,EAAE,mCAAmC,EAA8B,MAAM,mEAAmE,CAAC;AAChK,OAAO,EAAE,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAC5E,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAC9C,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAE9D,MAAM,CAAC,MAAM,0BAA0B,GAAG,eAAe,CAA6B,4BAA4B,CAAC,CAAC;AAQ7G,IAAM,yBAAyB,GAA/B,MAAM,yBAA0B,SAAQ,UAAU;IAIxD,YACuD,kCAAuE,EAC5G,cAA+B;QAEhD,KAAK,EAAE,CAAC;QAH8C,uCAAkC,GAAlC,kCAAkC,CAAqC;QAI7H,mDAAmD;QACnD,KAAK,MAAM,GAAG,IAAI,cAAc,CAAC,IAAI,+DAA8C,EAAE,CAAC;YACrF,IAAI,GAAG,CAAC,UAAU,CAAC,qBAAqB,CAAC,IAAI,GAAG,CAAC,UAAU,CAAC,sBAAsB,CAAC,EAAE,CAAC;gBACrF,cAAc,CAAC,MAAM,CAAC,GAAG,oCAA2B,CAAC;YACtD,CAAC;QACF,CAAC;IACF,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,KAAa,EAAE,WAAgC,EAAE,KAAyB,EAAE,UAA8B;QACtH,MAAM,IAAI,CAAC,kCAAkC,CAAC,SAAS,CAAC,WAAW,EAAE,8BAA8B,CAAC,CAAC;IACtG,CAAC;CAED,CAAA;AArBY,yBAAyB;IAKnC,WAAA,mCAAmC,CAAA;IACnC,WAAA,eAAe,CAAA;GANL,yBAAyB,CAqBrC;;AAED,MAAM,CAAC,MAAM,8BAA8B,GAAG,SAAS,CAAC;AACxD,QAAQ,CAAC,EAAE,CAA6B,UAAU,CAAC,yBAAyB,CAAC,CAAC,wBAAwB,CAAC;IACtG,EAAE,EAAE,8BAA8B;IAClC,KAAK,EAAE,QAAQ,CAAC,IAAiB,EAAE,IAAS,CAAC;IAC7C,WAAW,EAAE,QAAQ,CAAC,IAAgB,EAAE,IAAqD,CAAC;IAC9F,IAAI,EAAE,OAAO,CAAC,OAAO;IACrB,MAAM,EAAE;QACP,SAAS,EAAE,KAAK;KAChB;IACD,eAAe,EAAE,QAAQ,CAAC,IAAM,EAAE,IAAM,CAAC;CACzC,CAAC,CAAC","file":"languageModelStats.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { Extensions, IExtensionFeaturesManagementService, IExtensionFeaturesRegistry } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { localize } from '../../../../nls.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\n\nexport const ILanguageModelStatsService = createDecorator<ILanguageModelStatsService>('ILanguageModelStatsService');\n\nexport interface ILanguageModelStatsService {\n\treadonly _serviceBrand: undefined;\n\n\tupdate(model: string, extensionId: ExtensionIdentifier, agent: string | undefined, tokenCount: number | undefined): Promise<void>;\n}\n\nexport class LanguageModelStatsService extends Disposable implements ILanguageModelStatsService {\n\n\tdeclare _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IExtensionFeaturesManagementService private readonly extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IStorageService storageService: IStorageService,\n\t) {\n\t\tsuper();\n\t\t// TODO: @sandy081 - remove this code after a while\n\t\tfor (const key in storageService.keys(StorageScope.APPLICATION, StorageTarget.USER)) {\n\t\t\tif (key.startsWith('languageModelStats.') || key.startsWith('languageModelAccess.')) {\n\t\t\t\tstorageService.remove(key, StorageScope.APPLICATION);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync update(model: string, extensionId: ExtensionIdentifier, agent: string | undefined, tokenCount: number | undefined): Promise<void> {\n\t\tawait this.extensionFeaturesManagementService.getAccess(extensionId, CopilotUsageExtensionFeatureId);\n\t}\n\n}\n\nexport const CopilotUsageExtensionFeatureId = 'copilot';\nRegistry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).registerExtensionFeature({\n\tid: CopilotUsageExtensionFeatureId,\n\tlabel: localize('Language Models', \"Copilot\"),\n\tdescription: localize('languageModels', \"Language models usage statistics of this extension.\"),\n\ticon: Codicon.copilot,\n\taccess: {\n\t\tcanToggle: false\n\t},\n\taccessDataLabel: localize('chat', \"chat\"),\n});\n"]}