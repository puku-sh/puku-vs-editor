{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/common/chatWordCounter.ts","vs/workbench/contrib/chat/common/chatWordCounter.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,KAAK,oBAAoB,MAAM,+CAA+C,CAAC;AAStF,MAAM,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC;AAErB;;;;GAIG;AACH,MAAM,WAAW,GAChB,CAAC,CAAA,SAAS,GAAG,6BAA6B;IAE1C,OAAO;IACP,CAAC,CAAA,OAAO,GAAG,wBAAwB;IACnC,IAAI,CAAA,CAAC,CAAA,KAAK;IACV,OAAO,CAAA,CAAC,CAAA,YAAY,GAAG,2BAA2B;IAClD,OAAO,CAAA,CAAC,CAAA,MAAM,GAAG,sBAAsB;IACvC,OAAO,CAAA,CAAC,CAAA,cAAc,GAAG,uBAAuB;IAChD,IAAI,CAAA,CAAC,CAAA,IAAI;IACT,CAAC,CAAA,KAAK,GAAG,yBAAyB;IAElC,cAAc;IACd,CAAC,CAAA,SAAS,GAAG,WAAW;IACxB,IAAI,CAAA,CAAC,CAAA,GAAG;IACR,OAAO,CAAA,CAAC,CAAA,2CAA2C,GAAG,iCAAiC;IACvF,OAAO,CAAA,CAAC,CAAA,qBAAqB,GAAG,oBAAoB;IACpD,IAAI,CAAA,CAAC,CAAA,GAAG;IAER,QAAQ;IACR,IAAI,CAAA,CAAC,CAAA,yCAAyC;IAC9C,CAAC,CAAA,IAAI,CAAC;AAEP,MAAM,UAAU,SAAS,CAAC,GAAW,EAAE,eAAuB;IAC7D,oFAAoF;IACpF,kBAAkB;IAClB,cAAc;IACd,wBAAwB;IACxB,6EAA6E;IAC7E,mEAAmE;IACnE,MAAM,QAAQ,GAAG,GAAG,CAAC;IAErB,MAAM,UAAU,GAAG,IAAI,MAAM,CAAC,KAAK,GAAG,WAAW,GAAG,OAAO,GAAG,oBAAoB,CAAC,gBAAgB,CAAC,MAAM,GAAG,CAAC,CAAA,mDAAmD,QAAQ,IAAI,EAAE,IAAI,CAAC,CAAC;IACrL,MAAM,cAAc,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;IAE5D,MAAM,WAAW,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC;IAE7D,MAAM,QAAQ,GAAG,eAAe,IAAI,cAAc,CAAC,MAAM;QACxD,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,wBAAwB;QACrC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,GAAG,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAEtF,MAAM,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;IACzC,OAAO;QACN,KAAK;QACL,iBAAiB,EAAE,WAAW,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,MAAM;QACzF,YAAY,EAAE,QAAQ,IAAI,GAAG,CAAC,MAAM;QACpC,cAAc,EAAE,cAAc,CAAC,MAAM;KACrC,CAAC;AACH,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,GAAW;IACrC,MAAM,MAAM,GAAG,SAAS,CAAC,GAAG,EAAE,MAAM,CAAC,gBAAgB,CAAC,CAAC;IACvD,OAAO,MAAM,CAAC,iBAAiB,CAAC;AACjC,CAAC","file":"chatWordCounter.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as markedKatexExtension from '../../markdown/common/markedKatexExtension.js';\n\nexport interface IWordCountResult {\n\tvalue: string;\n\treturnedWordCount: number;\n\ttotalWordCount: number;\n\tisFullString: boolean;\n}\n\nconst r = String.raw;\n\n/**\n * Matches `[text](link title?)` or `[text](<link> title?)`\n *\n * Taken from vscode-markdown-languageservice\n */\nconst linkPattern =\n\tr`(?<!\\\\)` + // Must not start with escape\n\n\t// text\n\tr`(!?\\[` + // open prefix match -->\n\t/**/r`(?:` +\n\t/*****/r`[^\\[\\]\\\\]|` + // Non-bracket chars, or...\n\t/*****/r`\\\\.|` + // Escaped char, or...\n\t/*****/r`\\[[^\\[\\]]*\\]` + // Matched bracket pair\n\t/**/r`)*` +\n\tr`\\])` + // <-- close prefix match\n\n\t// Destination\n\tr`(\\(\\s*)` + // Pre href\n\t/**/r`(` +\n\t/*****/r`[^\\s\\(\\)<](?:[^\\s\\(\\)]|\\([^\\s\\(\\)]*?\\))*|` + // Link without whitespace, or...\n\t/*****/r`<(?:\\\\[<>]|[^<>])+>` + // In angle brackets\n\t/**/r`)` +\n\n\t// Title\n\t/**/r`\\s*(?:\"[^\"]*\"|'[^']*'|\\([^\\(\\)]*\\))?\\s*` +\n\tr`\\)`;\n\nexport function getNWords(str: string, numWordsToCount: number): IWordCountResult {\n\t// This regex matches each word and skips over whitespace and separators. A word is:\n\t// A markdown link\n\t// Inline math\n\t// One chinese character\n\t// One or more + - =, handled so that code like \"a=1+2-3\" is broken up better\n\t// One or more characters that aren't whitepace or any of the above\n\tconst backtick = '`';\n\n\tconst wordRegExp = new RegExp('(?:' + linkPattern + ')|(?:' + markedKatexExtension.mathInlineRegExp.source + r`)|\\p{sc=Han}|=+|\\++|-+|[^\\s\\|\\p{sc=Han}|=|\\+|\\-|${backtick}]+`, 'gu');\n\tconst allWordMatches = Array.from(str.matchAll(wordRegExp));\n\n\tconst targetWords = allWordMatches.slice(0, numWordsToCount);\n\n\tconst endIndex = numWordsToCount >= allWordMatches.length\n\t\t? str.length // Reached end of string\n\t\t: targetWords.length ? targetWords.at(-1)!.index + targetWords.at(-1)![0].length : 0;\n\n\tconst value = str.substring(0, endIndex);\n\treturn {\n\t\tvalue,\n\t\treturnedWordCount: targetWords.length === 0 ? (value.length ? 1 : 0) : targetWords.length,\n\t\tisFullString: endIndex >= str.length,\n\t\ttotalWordCount: allWordMatches.length\n\t};\n}\n\nexport function countWords(str: string): number {\n\tconst result = getNWords(str, Number.MAX_SAFE_INTEGER);\n\treturn result.returnedWordCount;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as markedKatexExtension from '../../markdown/common/markedKatexExtension.js';\n\nexport interface IWordCountResult {\n\tvalue: string;\n\treturnedWordCount: number;\n\ttotalWordCount: number;\n\tisFullString: boolean;\n}\n\nconst r = String.raw;\n\n/**\n * Matches `[text](link title?)` or `[text](<link> title?)`\n *\n * Taken from vscode-markdown-languageservice\n */\nconst linkPattern =\n\tr`(?<!\\\\)` + // Must not start with escape\n\n\t// text\n\tr`(!?\\[` + // open prefix match -->\n\t/**/r`(?:` +\n\t/*****/r`[^\\[\\]\\\\]|` + // Non-bracket chars, or...\n\t/*****/r`\\\\.|` + // Escaped char, or...\n\t/*****/r`\\[[^\\[\\]]*\\]` + // Matched bracket pair\n\t/**/r`)*` +\n\tr`\\])` + // <-- close prefix match\n\n\t// Destination\n\tr`(\\(\\s*)` + // Pre href\n\t/**/r`(` +\n\t/*****/r`[^\\s\\(\\)<](?:[^\\s\\(\\)]|\\([^\\s\\(\\)]*?\\))*|` + // Link without whitespace, or...\n\t/*****/r`<(?:\\\\[<>]|[^<>])+>` + // In angle brackets\n\t/**/r`)` +\n\n\t// Title\n\t/**/r`\\s*(?:\"[^\"]*\"|'[^']*'|\\([^\\(\\)]*\\))?\\s*` +\n\tr`\\)`;\n\nexport function getNWords(str: string, numWordsToCount: number): IWordCountResult {\n\t// This regex matches each word and skips over whitespace and separators. A word is:\n\t// A markdown link\n\t// Inline math\n\t// One chinese character\n\t// One or more + - =, handled so that code like \"a=1+2-3\" is broken up better\n\t// One or more characters that aren't whitepace or any of the above\n\tconst backtick = '`';\n\n\tconst wordRegExp = new RegExp('(?:' + linkPattern + ')|(?:' + markedKatexExtension.mathInlineRegExp.source + r`)|\\p{sc=Han}|=+|\\++|-+|[^\\s\\|\\p{sc=Han}|=|\\+|\\-|${backtick}]+`, 'gu');\n\tconst allWordMatches = Array.from(str.matchAll(wordRegExp));\n\n\tconst targetWords = allWordMatches.slice(0, numWordsToCount);\n\n\tconst endIndex = numWordsToCount >= allWordMatches.length\n\t\t? str.length // Reached end of string\n\t\t: targetWords.length ? targetWords.at(-1)!.index + targetWords.at(-1)![0].length : 0;\n\n\tconst value = str.substring(0, endIndex);\n\treturn {\n\t\tvalue,\n\t\treturnedWordCount: targetWords.length === 0 ? (value.length ? 1 : 0) : targetWords.length,\n\t\tisFullString: endIndex >= str.length,\n\t\ttotalWordCount: allWordMatches.length\n\t};\n}\n\nexport function countWords(str: string): number {\n\tconst result = getNWords(str, Number.MAX_SAFE_INTEGER);\n\treturn result.returnedWordCount;\n}\n"]}