{"version":3,"sources":["vs/workbench/contrib/chat/common/tools/languageModelToolsContribution.ts"],"names":[],"mappings":"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","file":"languageModelToolsContribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isFalsyOrEmpty } from '../../../../../base/common/arrays.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { IJSONSchema } from '../../../../../base/common/jsonSchema.js';\nimport { Disposable, DisposableMap, DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { transaction } from '../../../../../base/common/observable.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { isFalsyOrWhitespace } from '../../../../../base/common/strings.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { localize } from '../../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ExtensionIdentifier, IExtensionManifest } from '../../../../../platform/extensions/common/extensions.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { Extensions, IExtensionFeaturesRegistry, IExtensionFeatureTableRenderer, IRenderedData, IRowData, ITableData } from '../../../../services/extensionManagement/common/extensionFeatures.js';\nimport { isProposedApiEnabled } from '../../../../services/extensions/common/extensions.js';\nimport * as extensionsRegistry from '../../../../services/extensions/common/extensionsRegistry.js';\nimport { ILanguageModelToolsService, IToolData, ToolDataSource, ToolSet } from '../languageModelToolsService.js';\nimport { toolsParametersSchemaSchemaId } from './languageModelToolsParametersSchema.js';\n\nexport interface IRawToolContribution {\n\tname: string;\n\tdisplayName: string;\n\tmodelDescription: string;\n\ttoolReferenceName?: string;\n\tlegacyToolReferenceFullNames?: string[];\n\ticon?: string | { light: string; dark: string };\n\twhen?: string;\n\ttags?: string[];\n\tuserDescription?: string;\n\tinputSchema?: IJSONSchema;\n\tcanBeReferencedInPrompt?: boolean;\n}\n\nconst languageModelToolsExtensionPoint = extensionsRegistry.ExtensionsRegistry.registerExtensionPoint<IRawToolContribution[]>({\n\textensionPoint: 'languageModelTools',\n\tactivationEventsGenerator: function* (contributions: readonly IRawToolContribution[]) {\n\t\tfor (const contrib of contributions) {\n\t\t\tyield `onLanguageModelTool:${contrib.name}`;\n\t\t}\n\t},\n\tjsonSchema: {\n\t\tdescription: localize('vscode.extension.contributes.tools', 'Contributes a tool that can be invoked by a language model in a chat session, or from a standalone command. Registered tools can be used by all extensions.'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\tadditionalProperties: false,\n\t\t\ttype: 'object',\n\t\t\tdefaultSnippets: [{\n\t\t\t\tbody: {\n\t\t\t\t\tname: '${1}',\n\t\t\t\t\tmodelDescription: '${2}',\n\t\t\t\t\tinputSchema: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t'${3:name}': {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\tdescription: '${4:description}'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}],\n\t\t\trequired: ['name', 'displayName', 'modelDescription'],\n\t\t\tproperties: {\n\t\t\t\tname: {\n\t\t\t\t\tdescription: localize('toolName', \"A unique name for this tool. This name must be a globally unique identifier, and is also used as a name when presenting this tool to a language model.\"),\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\t// [\\\\w-]+ is OpenAI's requirement for tool names\n\t\t\t\t\tpattern: '^(?!copilot_|vscode_)[\\\\w-]+$'\n\t\t\t\t},\n\t\t\t\ttoolReferenceName: {\n\t\t\t\t\tmarkdownDescription: localize('toolName2', \"If {0} is enabled for this tool, the user may use '#' with this name to invoke the tool in a query. Otherwise, the name is not required. Name must not contain whitespace.\", '`canBeReferencedInPrompt`'),\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^[\\\\w-]+$'\n\t\t\t\t},\n\t\t\t\tlegacyToolReferenceFullNames: {\n\t\t\t\t\tmarkdownDescription: localize('legacyToolReferenceFullNames', \"An array of deprecated names for backwards compatibility that can also be used to reference this tool in a query. Each name must not contain whitespace. Full names are generally in the format `toolsetName/toolReferenceName` (e.g., `search/readFile`) or just `toolReferenceName` when there is no toolset (e.g., `readFile`).\"),\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tpattern: '^[\\\\w-]+(/[\\\\w-]+)?$'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdisplayName: {\n\t\t\t\t\tdescription: localize('toolDisplayName', \"A human-readable name for this tool that may be used to describe it in the UI.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tuserDescription: {\n\t\t\t\t\tdescription: localize('toolUserDescription', \"A description of this tool that may be shown to the user.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\t// eslint-disable-next-line local/code-no-localized-model-description\n\t\t\t\tmodelDescription: {\n\t\t\t\t\tdescription: localize('toolModelDescription', \"A description of this tool that may be used by a language model to select it.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tinputSchema: {\n\t\t\t\t\tdescription: localize('parametersSchema', \"A JSON schema for the input this tool accepts. The input must be an object at the top level. A particular language model may not support all JSON schema features. See the documentation for the language model family you are using for more information.\"),\n\t\t\t\t\t$ref: toolsParametersSchemaSchemaId\n\t\t\t\t},\n\t\t\t\tcanBeReferencedInPrompt: {\n\t\t\t\t\tmarkdownDescription: localize('canBeReferencedInPrompt', \"If true, this tool shows up as an attachment that the user can add manually to their request. Chat participants will receive the tool in {0}.\", '`ChatRequest#toolReferences`'),\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\tmarkdownDescription: localize('icon', 'An icon that represents this tool. Either a file path, an object with file paths for dark and light themes, or a theme icon reference, like \"\\\\$(zap)\"'),\n\t\t\t\t\tanyOf: [{\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlight: {\n\t\t\t\t\t\t\t\tdescription: localize('icon.light', 'Icon path when a light theme is used'),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdark: {\n\t\t\t\t\t\t\t\tdescription: localize('icon.dark', 'Icon path when a dark theme is used'),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\twhen: {\n\t\t\t\t\tmarkdownDescription: localize('condition', \"Condition which must be true for this tool to be enabled. Note that a tool may still be invoked by another extension even when its `when` condition is false.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\ttags: {\n\t\t\t\t\tdescription: localize('toolTags', \"A set of tags that roughly describe the tool's capabilities. A tool user may use these to filter the set of tools to just ones that are relevant for the task at hand, or they may want to pick a tag that can be used to identify just the tools contributed by this extension.\"),\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tpattern: '^(?!copilot_|vscode_)'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nexport interface IRawToolSetContribution {\n\tname: string;\n\t/**\n\t * @deprecated\n\t */\n\treferenceName?: string;\n\tlegacyFullNames?: string[];\n\tdescription: string;\n\ticon?: string;\n\ttools: string[];\n}\n\nconst languageModelToolSetsExtensionPoint = extensionsRegistry.ExtensionsRegistry.registerExtensionPoint<IRawToolSetContribution[]>({\n\textensionPoint: 'languageModelToolSets',\n\tdeps: [languageModelToolsExtensionPoint],\n\tjsonSchema: {\n\t\tdescription: localize('vscode.extension.contributes.toolSets', 'Contributes a set of language model tools that can be used together.'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\tadditionalProperties: false,\n\t\t\ttype: 'object',\n\t\t\tdefaultSnippets: [{\n\t\t\t\tbody: {\n\t\t\t\t\tname: '${1}',\n\t\t\t\t\tdescription: '${2}',\n\t\t\t\t\ttools: ['${3}']\n\t\t\t\t}\n\t\t\t}],\n\t\t\trequired: ['name', 'description', 'tools'],\n\t\t\tproperties: {\n\t\t\t\tname: {\n\t\t\t\t\tdescription: localize('toolSetName', \"A name for this tool set. Used as reference and should not contain whitespace.\"),\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^[\\\\w-]+$'\n\t\t\t\t},\n\t\t\t\tlegacyFullNames: {\n\t\t\t\t\tmarkdownDescription: localize('toolSetLegacyFullNames', \"An array of deprecated names for backwards compatibility that can also be used to reference this tool set. Each name must not contain whitespace. Full names are generally in the format `parentToolSetName/toolSetName` (e.g., `github/repo`) or just `toolSetName` when there is no parent toolset (e.g., `repo`).\"),\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\tpattern: '^[\\\\w-]+$'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\tdescription: localize('toolSetDescription', \"A description of this tool set.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\ticon: {\n\t\t\t\t\tmarkdownDescription: localize('toolSetIcon', \"An icon that represents this tool set, like `$(zap)`\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\ttools: {\n\t\t\t\t\tmarkdownDescription: localize('toolSetTools', \"A list of tools or tool sets to include in this tool set. Cannot be empty and must reference tools by their `toolReferenceName`.\"),\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\tminItems: 1,\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nfunction toToolKey(extensionIdentifier: ExtensionIdentifier, toolName: string) {\n\treturn `${extensionIdentifier.value}/${toolName}`;\n}\n\nfunction toToolSetKey(extensionIdentifier: ExtensionIdentifier, toolName: string) {\n\treturn `toolset:${extensionIdentifier.value}/${toolName}`;\n}\n\nexport class LanguageModelToolsExtensionPointHandler implements IWorkbenchContribution {\n\tstatic readonly ID = 'workbench.contrib.toolsExtensionPointHandler';\n\n\tprivate _registrationDisposables = new DisposableMap<string>();\n\n\tconstructor(\n\t\t@IProductService productService: IProductService,\n\t\t@ILanguageModelToolsService languageModelToolsService: ILanguageModelToolsService,\n\t) {\n\n\t\tlanguageModelToolsExtensionPoint.setHandler((_extensions, delta) => {\n\t\t\tfor (const extension of delta.added) {\n\t\t\t\tfor (const rawTool of extension.value) {\n\t\t\t\t\tif (!rawTool.name || !rawTool.modelDescription || !rawTool.displayName) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register tool without name, modelDescription, and displayName: ${JSON.stringify(rawTool)}`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!rawTool.name.match(/^[\\w-]+$/)) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register tool with invalid id: ${rawTool.name}. The id must match /^[\\\\w-]+$/.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rawTool.canBeReferencedInPrompt && !rawTool.toolReferenceName) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register tool with 'canBeReferencedInPrompt' set without a 'toolReferenceName': ${JSON.stringify(rawTool)}`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((rawTool.name.startsWith('copilot_') || rawTool.name.startsWith('vscode_')) && !isProposedApiEnabled(extension.description, 'chatParticipantPrivate')) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register tool with name starting with \"vscode_\" or \"copilot_\"`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rawTool.tags?.some(tag => tag.startsWith('copilot_') || tag.startsWith('vscode_')) && !isProposedApiEnabled(extension.description, 'chatParticipantPrivate')) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register tool with tags starting with \"vscode_\" or \"copilot_\"`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (rawTool.legacyToolReferenceFullNames && !isProposedApiEnabled(extension.description, 'chatParticipantPrivate')) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT use 'legacyToolReferenceFullNames' without the 'chatParticipantPrivate' API proposal enabled`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst rawIcon = rawTool.icon;\n\t\t\t\t\tlet icon: IToolData['icon'] | undefined;\n\t\t\t\t\tif (typeof rawIcon === 'string') {\n\t\t\t\t\t\ticon = ThemeIcon.fromString(rawIcon) ?? {\n\t\t\t\t\t\t\tdark: joinPath(extension.description.extensionLocation, rawIcon),\n\t\t\t\t\t\t\tlight: joinPath(extension.description.extensionLocation, rawIcon)\n\t\t\t\t\t\t};\n\t\t\t\t\t} else if (rawIcon) {\n\t\t\t\t\t\ticon = {\n\t\t\t\t\t\t\tdark: joinPath(extension.description.extensionLocation, rawIcon.dark),\n\t\t\t\t\t\t\tlight: joinPath(extension.description.extensionLocation, rawIcon.light)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// If OSS and the product.json is not set up, fall back to checking api proposal\n\t\t\t\t\tconst isBuiltinTool = productService.defaultChatAgent?.chatExtensionId ?\n\t\t\t\t\t\tExtensionIdentifier.equals(extension.description.identifier, productService.defaultChatAgent.chatExtensionId) :\n\t\t\t\t\t\tisProposedApiEnabled(extension.description, 'chatParticipantPrivate');\n\n\t\t\t\t\tconst source: ToolDataSource = isBuiltinTool\n\t\t\t\t\t\t? ToolDataSource.Internal\n\t\t\t\t\t\t: { type: 'extension', label: extension.description.displayName ?? extension.description.name, extensionId: extension.description.identifier };\n\n\t\t\t\t\tconst tool: IToolData = {\n\t\t\t\t\t\t...rawTool,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tinputSchema: rawTool.inputSchema,\n\t\t\t\t\t\tid: rawTool.name,\n\t\t\t\t\t\ticon,\n\t\t\t\t\t\twhen: rawTool.when ? ContextKeyExpr.deserialize(rawTool.when) : undefined,\n\t\t\t\t\t\talwaysDisplayInputOutput: !isBuiltinTool,\n\t\t\t\t\t};\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst disposable = languageModelToolsService.registerToolData(tool);\n\t\t\t\t\t\tthis._registrationDisposables.set(toToolKey(extension.description.identifier, rawTool.name), disposable);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\textension.collector.error(`Failed to register tool '${rawTool.name}': ${e}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const extension of delta.removed) {\n\t\t\t\tfor (const tool of extension.value) {\n\t\t\t\t\tthis._registrationDisposables.deleteAndDispose(toToolKey(extension.description.identifier, tool.name));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tlanguageModelToolSetsExtensionPoint.setHandler((_extensions, delta) => {\n\n\t\t\tfor (const extension of delta.added) {\n\n\t\t\t\tif (!isProposedApiEnabled(extension.description, 'contribLanguageModelToolSets')) {\n\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register language model tools because the 'contribLanguageModelToolSets' API proposal is not enabled.`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst isBuiltinTool = productService.defaultChatAgent?.chatExtensionId ?\n\t\t\t\t\tExtensionIdentifier.equals(extension.description.identifier, productService.defaultChatAgent.chatExtensionId) :\n\t\t\t\t\tisProposedApiEnabled(extension.description, 'chatParticipantPrivate');\n\n\t\t\t\tconst source: ToolDataSource = isBuiltinTool\n\t\t\t\t\t? ToolDataSource.Internal\n\t\t\t\t\t: { type: 'extension', label: extension.description.displayName ?? extension.description.name, extensionId: extension.description.identifier };\n\n\n\t\t\t\tfor (const toolSet of extension.value) {\n\n\t\t\t\t\tif (isFalsyOrWhitespace(toolSet.name)) {\n\t\t\t\t\t\textension.collector.error(`Tool set '${toolSet.name}' CANNOT have an empty name`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (toolSet.legacyFullNames && !isProposedApiEnabled(extension.description, 'contribLanguageModelToolSets')) {\n\t\t\t\t\t\textension.collector.error(`Tool set '${toolSet.name}' CANNOT use 'legacyFullNames' without the 'contribLanguageModelToolSets' API proposal enabled`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isFalsyOrEmpty(toolSet.tools)) {\n\t\t\t\t\t\textension.collector.error(`Tool set '${toolSet.name}' CANNOT have an empty tools array`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tools: IToolData[] = [];\n\t\t\t\t\tconst toolSets: ToolSet[] = [];\n\n\t\t\t\t\tfor (const toolName of toolSet.tools) {\n\t\t\t\t\t\tconst toolObj = languageModelToolsService.getToolByName(toolName, true);\n\t\t\t\t\t\tif (toolObj) {\n\t\t\t\t\t\t\ttools.push(toolObj);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst toolSetObj = languageModelToolsService.getToolSetByName(toolName);\n\t\t\t\t\t\tif (toolSetObj) {\n\t\t\t\t\t\t\ttoolSets.push(toolSetObj);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\textension.collector.warn(`Tool set '${toolSet.name}' CANNOT find tool or tool set by name: ${toolName}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (toolSets.length === 0 && tools.length === 0) {\n\t\t\t\t\t\textension.collector.error(`Tool set '${toolSet.name}' CANNOT have an empty tools array (none of the tools were found)`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst store = new DisposableStore();\n\t\t\t\t\tconst referenceName = toolSet.referenceName ?? toolSet.name;\n\t\t\t\t\tconst existingToolSet = languageModelToolsService.getToolSetByName(referenceName);\n\t\t\t\t\tconst mergeExisting = isBuiltinTool && existingToolSet?.source === ToolDataSource.Internal;\n\n\t\t\t\t\tlet obj: ToolSet & IDisposable;\n\t\t\t\t\t// Allow built-in tool to update the tool set if it already exists\n\t\t\t\t\tif (mergeExisting) {\n\t\t\t\t\t\tobj = existingToolSet as ToolSet & IDisposable;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tobj = languageModelToolsService.createToolSet(\n\t\t\t\t\t\t\tsource,\n\t\t\t\t\t\t\ttoToolSetKey(extension.description.identifier, toolSet.name),\n\t\t\t\t\t\t\treferenceName,\n\t\t\t\t\t\t\t{ icon: toolSet.icon ? ThemeIcon.fromString(toolSet.icon) : undefined, description: toolSet.description, legacyFullNames: toolSet.legacyFullNames }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\ttransaction(tx => {\n\t\t\t\t\t\tif (!mergeExisting) {\n\t\t\t\t\t\t\tstore.add(obj);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttools.forEach(tool => store.add(obj.addTool(tool, tx)));\n\t\t\t\t\t\ttoolSets.forEach(toolSet => store.add(obj.addToolSet(toolSet, tx)));\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._registrationDisposables.set(toToolSetKey(extension.description.identifier, toolSet.name), store);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const extension of delta.removed) {\n\t\t\t\tfor (const toolSet of extension.value) {\n\t\t\t\t\tthis._registrationDisposables.deleteAndDispose(toToolSetKey(extension.description.identifier, toolSet.name));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n\n// --- render\n\nclass LanguageModelToolDataRenderer extends Disposable implements IExtensionFeatureTableRenderer {\n\treadonly type = 'table';\n\n\tshouldRender(manifest: IExtensionManifest): boolean {\n\t\treturn !!manifest.contributes?.languageModelTools;\n\t}\n\n\trender(manifest: IExtensionManifest): IRenderedData<ITableData> {\n\t\tconst contribs = manifest.contributes?.languageModelTools ?? [];\n\t\tif (!contribs.length) {\n\t\t\treturn { data: { headers: [], rows: [] }, dispose: () => { } };\n\t\t}\n\n\t\tconst headers = [\n\t\t\tlocalize('toolTableName', \"Name\"),\n\t\t\tlocalize('toolTableDisplayName', \"Display Name\"),\n\t\t\tlocalize('toolTableDescription', \"Description\"),\n\t\t];\n\n\t\tconst rows: IRowData[][] = contribs.map(t => {\n\t\t\treturn [\n\t\t\t\tnew MarkdownString(`\\`${t.name}\\``),\n\t\t\t\tt.displayName,\n\t\t\t\tt.userDescription ?? t.modelDescription,\n\t\t\t];\n\t\t});\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\theaders,\n\t\t\t\trows\n\t\t\t},\n\t\t\tdispose: () => { }\n\t\t};\n\t}\n}\n\nRegistry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).registerExtensionFeature({\n\tid: 'languageModelTools',\n\tlabel: localize('langModelTools', \"Language Model Tools\"),\n\taccess: {\n\t\tcanToggle: false\n\t},\n\trenderer: new SyncDescriptor(LanguageModelToolDataRenderer),\n});\n\n\nclass LanguageModelToolSetDataRenderer extends Disposable implements IExtensionFeatureTableRenderer {\n\n\treadonly type = 'table';\n\n\tshouldRender(manifest: IExtensionManifest): boolean {\n\t\treturn !!manifest.contributes?.languageModelToolSets;\n\t}\n\n\trender(manifest: IExtensionManifest): IRenderedData<ITableData> {\n\t\tconst contribs = manifest.contributes?.languageModelToolSets ?? [];\n\t\tif (!contribs.length) {\n\t\t\treturn { data: { headers: [], rows: [] }, dispose: () => { } };\n\t\t}\n\n\t\tconst headers = [\n\t\t\tlocalize('name', \"Name\"),\n\t\t\tlocalize('reference', \"Reference Name\"),\n\t\t\tlocalize('tools', \"Tools\"),\n\t\t\tlocalize('descriptions', \"Description\"),\n\t\t];\n\n\t\tconst rows: IRowData[][] = contribs.map(t => {\n\t\t\treturn [\n\t\t\t\tnew MarkdownString(`\\`${t.name}\\``),\n\t\t\t\tt.referenceName ? new MarkdownString(`\\`#${t.referenceName}\\``) : 'none',\n\t\t\t\tt.tools.join(', '),\n\t\t\t\tt.description,\n\t\t\t];\n\t\t});\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\theaders,\n\t\t\t\trows\n\t\t\t},\n\t\t\tdispose: () => { }\n\t\t};\n\t}\n}\n\nRegistry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).registerExtensionFeature({\n\tid: 'languageModelToolSets',\n\tlabel: localize('langModelToolSets', \"Language Model Tool Sets\"),\n\taccess: {\n\t\tcanToggle: false\n\t},\n\trenderer: new SyncDescriptor(LanguageModelToolSetDataRenderer),\n});\n"]}