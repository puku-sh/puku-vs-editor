{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/test/browser/chatEditingModifiedNotebookEntry.test.ts","vs/workbench/contrib/chat/test/browser/chatEditingModifiedNotebookEntry.test.ts"],"names":[],"mappings":"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","file":"chatEditingModifiedNotebookEntry.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { adjustCellDiffAndOriginalModelBasedOnCellAddDelete, adjustCellDiffAndOriginalModelBasedOnCellMovements, adjustCellDiffForKeepingADeletedCell, adjustCellDiffForKeepingAnInsertedCell, adjustCellDiffForRevertingADeletedCell, adjustCellDiffForRevertingAnInsertedCell } from '../../browser/chatEditing/notebook/helpers.js';\nimport { ICellDiffInfo } from '../../browser/chatEditing/notebook/notebookCellChanges.js';\nimport { nullDocumentDiff } from '../../../../../editor/common/diff/documentDiffProvider.js';\nimport { ObservablePromise, observableValue } from '../../../../../base/common/observable.js';\nimport { CellEditType, CellKind, ICell, ICellEditOperation, NotebookCellsChangeType } from '../../../notebook/common/notebookCommon.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { hash } from '../../../../../base/common/hash.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\n\nsuite('ChatEditingModifiedNotebookEntry', function () {\n\tsuite('Keep Inserted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction createModifiedCellDiffInfo(modifiedCellIndex: number, originalCellIndex: number): ICellDiffInfo {\n\t\t\treturn {\n\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:${originalCellIndex}`), originalCellIndex,\n\t\t\t\tmodifiedCellIndex, modifiedModel: createModifiedModel(`InsertedModified:${modifiedCellIndex}`),\n\t\t\t};\n\t\t}\n\t\ttest('Keep first inserted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingAnInsertedCell(0,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tcellsDiffInfo, {} as any,\n\t\t\t\tapplyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:0`), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel(`InsertedModified:0`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Keep first inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingAnInsertedCell(0,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tcellsDiffInfo, {} as any,\n\t\t\t\tapplyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Keep second inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingAnInsertedCell(2,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tcellsDiffInfo, {} as any,\n\t\t\t\tapplyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 2, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Revert Inserted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\ttest('Delete first inserted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete first inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete second inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(2,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 2, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete second inserted with multiple cells (subsequent inserts)', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(2,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 2, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Keep Deleted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\ttest('Keep first deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingADeletedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Keep second deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 1, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Keep first deleted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 1, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Revert Deleted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\t\tfunction createModifiedCellDiffInfo(modifiedCellIndex: number, originalCellIndex: number): ICellDiffInfo {\n\t\t\treturn {\n\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:${originalCellIndex}`), originalCellIndex,\n\t\t\t\tmodifiedCellIndex, modifiedModel: createModifiedModel(`InsertedModified:${modifiedCellIndex}`),\n\t\t\t};\n\t\t}\n\n\t\ttest('Revert first deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingADeletedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t{} as any,\n\t\t\t\tapplyEdits,\n\t\t\t\tcreateModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Revert second deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t{} as any,\n\t\t\t\tapplyEdits,\n\t\t\t\tcreateModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Revert first deleted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t{} as any,\n\t\t\t\tapplyEdits,\n\t\t\t\tcreateModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 3, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('InsertedModified:3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 5, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Cell Addition', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction createICell(cellKind: CellKind, source: string): ICell {\n\t\t\tconst handle = hash(generateUuid());\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn {\n\t\t\t\turi: URI.parse(`file:///path/${handle}`),\n\t\t\t\thandle,\n\t\t\t\tcellKind,\n\t\t\t\tlanguage: cellKind === CellKind.Markup ? 'markdown' : 'python',\n\t\t\t\toutputs: [],\n\t\t\t\tmetadata: {},\n\t\t\t\tgetHashValue: () => {\n\t\t\t\t\treturn hash(`${handle}=>${cellKind}=>${source}`);\n\t\t\t\t},\n\t\t\t\tgetValue: () => {\n\t\t\t\t\treturn source;\n\t\t\t\t},\n\t\t\t\tinternalMetadata: {},\n\t\t\t} as any;\n\t\t}\n\t\tfunction createModifiedCellDiffInfo(modifiedCellIndex: number, originalCellIndex: number): ICellDiffInfo {\n\t\t\treturn {\n\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:${originalCellIndex}`), originalCellIndex,\n\t\t\t\tmodifiedCellIndex, modifiedModel: createModifiedModel(`InsertedModified:${modifiedCellIndex}`),\n\t\t\t};\n\t\t}\n\t\ttest('Insert a new cell into an unchanged notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst cell = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([0, 0, [cell]],\n\t\t\t\tcellsDiffInfo, 3, 2, applyEdits, createModifiedCellDiffInfo);\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:0`), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel(`InsertedModified:0`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert a new cell into a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'modified', originalModel: createOriginalModel('6'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell]],\n\t\t\t\tcellsDiffInfo, 6, 7, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 4,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('4'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'modified', originalModel: createOriginalModel('6'), originalCellIndex: 7,\n\t\t\t\t\tmodifiedCellIndex: 5, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert 2 new cells into an notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst cell2 = createICell(CellKind.Code, 'print(\"Foo Bar\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell1, cell2]],\n\t\t\t\tcellsDiffInfo, 4, 6, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 4,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}, {\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell2.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:4`), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel(`InsertedModified:2`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:5`), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel(`InsertedModified:3`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 7,\n\t\t\t\t\tmodifiedCellIndex: 5, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete a cell from an unchanged notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([0, 1, []],\n\t\t\t\tcellsDiffInfo, 2, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete last cell from an unchanged notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 1, []],\n\t\t\t\tcellsDiffInfo, 2, 2, applyEdits, createModifiedCellDiffInfo);\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete the first cell, then insert a new cell at the top', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([0, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 2, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete a new cell from a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 1, [\n\t\t\t\t// createICell(CellKind.Code, 'print(\"Hello World\")')\n\t\t\t]],\n\t\t\t\tcellsDiffInfo, 4, 6, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete 2 cells from a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 2, [\n\t\t\t]],\n\t\t\t\tcellsDiffInfo, 4, 6, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 4,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete 3 cells from a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'modified', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('6'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 3, [\n\t\t\t]],\n\t\t\t\tcellsDiffInfo, 5, 7, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 5,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('6'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Insert 1 cell at the bottom via chat, then user creats a new cell just below that', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 3, 1, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert 1 cell at the bottom via chat, then user creats anew cells above the previous new cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 3, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert 1 cell at the bottom via chat, then user inserts a new cells below the  previous new cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([3, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 3, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('InsertedModified:3'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Cell Movements', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\ttest('Swap first two inserted cells in a previously empty notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 1\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Swap first two inserted cells in a notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 1\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t\ttest('Move first inserted cell to the very bottom of notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 3\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move last cell to top of notebook after 2 cells were inserted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 3, length: 1, newIdx: 0\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 0\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Move second inserted cell to the very bottom of notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 3\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move second inserted cell to the second last position of notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 2\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t\ttest('Move first cell to the last position of notebook that had 3 cells deleted from the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 2\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 5\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move second cell to the last position of notebook that had 3 cells deleted from the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 2\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 5\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Move second cell to the last position of notebook that had 3 cells deleted from middle and 1 inserted in the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 3\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 5\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move last cell to the second position of notebook that had 3 cells deleted from middle and 1 inserted in the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 3, length: 1, newIdx: 1\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 5,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 1\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { adjustCellDiffAndOriginalModelBasedOnCellAddDelete, adjustCellDiffAndOriginalModelBasedOnCellMovements, adjustCellDiffForKeepingADeletedCell, adjustCellDiffForKeepingAnInsertedCell, adjustCellDiffForRevertingADeletedCell, adjustCellDiffForRevertingAnInsertedCell } from '../../browser/chatEditing/notebook/helpers.js';\nimport { ICellDiffInfo } from '../../browser/chatEditing/notebook/notebookCellChanges.js';\nimport { nullDocumentDiff } from '../../../../../editor/common/diff/documentDiffProvider.js';\nimport { ObservablePromise, observableValue } from '../../../../../base/common/observable.js';\nimport { CellEditType, CellKind, ICell, ICellEditOperation, NotebookCellsChangeType } from '../../../notebook/common/notebookCommon.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { hash } from '../../../../../base/common/hash.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\n\nsuite('ChatEditingModifiedNotebookEntry', function () {\n\tsuite('Keep Inserted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction createModifiedCellDiffInfo(modifiedCellIndex: number, originalCellIndex: number): ICellDiffInfo {\n\t\t\treturn {\n\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:${originalCellIndex}`), originalCellIndex,\n\t\t\t\tmodifiedCellIndex, modifiedModel: createModifiedModel(`InsertedModified:${modifiedCellIndex}`),\n\t\t\t};\n\t\t}\n\t\ttest('Keep first inserted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingAnInsertedCell(0,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tcellsDiffInfo, {} as any,\n\t\t\t\tapplyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:0`), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel(`InsertedModified:0`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Keep first inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingAnInsertedCell(0,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tcellsDiffInfo, {} as any,\n\t\t\t\tapplyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Keep second inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingAnInsertedCell(2,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tcellsDiffInfo, {} as any,\n\t\t\t\tapplyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 2, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Revert Inserted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\ttest('Delete first inserted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete first inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete second inserted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(2,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 2, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete second inserted with multiple cells (subsequent inserts)', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingAnInsertedCell(2,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 2, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Keep Deleted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\ttest('Keep first deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingADeletedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Keep second deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 1, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Keep first deleted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForKeepingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\tapplyEdits);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 1, cells: [], count: 1 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Revert Deleted Cell', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\t\tfunction createModifiedCellDiffInfo(modifiedCellIndex: number, originalCellIndex: number): ICellDiffInfo {\n\t\t\treturn {\n\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:${originalCellIndex}`), originalCellIndex,\n\t\t\t\tmodifiedCellIndex, modifiedModel: createModifiedModel(`InsertedModified:${modifiedCellIndex}`),\n\t\t\t};\n\t\t}\n\n\t\ttest('Revert first deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingADeletedCell(0,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t{} as any,\n\t\t\t\tapplyEdits,\n\t\t\t\tcreateModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Revert second deleted cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t{} as any,\n\t\t\t\tapplyEdits,\n\t\t\t\tcreateModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 0, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Revert first deleted with multiple cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffForRevertingADeletedCell(1,\n\t\t\t\tcellsDiffInfo,\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t{} as any,\n\t\t\t\tapplyEdits,\n\t\t\t\tcreateModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{ editType: CellEditType.Replace, index: 3, cells: [{}], count: 0 },\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('New0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('InsertedModified:3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 5, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Cell Addition', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\t\tconst appliedEdits: ICellEditOperation[] = [];\n\t\tsetup(() => {\n\t\t\tappliedEdits.length = 0;\n\t\t});\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\tfunction applyEdits(edits: ICellEditOperation[]): boolean {\n\t\t\tappliedEdits.push(...edits);\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction createICell(cellKind: CellKind, source: string): ICell {\n\t\t\tconst handle = hash(generateUuid());\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn {\n\t\t\t\turi: URI.parse(`file:///path/${handle}`),\n\t\t\t\thandle,\n\t\t\t\tcellKind,\n\t\t\t\tlanguage: cellKind === CellKind.Markup ? 'markdown' : 'python',\n\t\t\t\toutputs: [],\n\t\t\t\tmetadata: {},\n\t\t\t\tgetHashValue: () => {\n\t\t\t\t\treturn hash(`${handle}=>${cellKind}=>${source}`);\n\t\t\t\t},\n\t\t\t\tgetValue: () => {\n\t\t\t\t\treturn source;\n\t\t\t\t},\n\t\t\t\tinternalMetadata: {},\n\t\t\t} as any;\n\t\t}\n\t\tfunction createModifiedCellDiffInfo(modifiedCellIndex: number, originalCellIndex: number): ICellDiffInfo {\n\t\t\treturn {\n\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:${originalCellIndex}`), originalCellIndex,\n\t\t\t\tmodifiedCellIndex, modifiedModel: createModifiedModel(`InsertedModified:${modifiedCellIndex}`),\n\t\t\t};\n\t\t}\n\t\ttest('Insert a new cell into an unchanged notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst cell = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([0, 0, [cell]],\n\t\t\t\tcellsDiffInfo, 3, 2, applyEdits, createModifiedCellDiffInfo);\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:0`), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel(`InsertedModified:0`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert a new cell into a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'modified', originalModel: createOriginalModel('6'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell]],\n\t\t\t\tcellsDiffInfo, 6, 7, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 4,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('4'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('4'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'modified', originalModel: createOriginalModel('6'), originalCellIndex: 7,\n\t\t\t\t\tmodifiedCellIndex: 5, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert 2 new cells into an notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst cell2 = createICell(CellKind.Code, 'print(\"Foo Bar\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell1, cell2]],\n\t\t\t\tcellsDiffInfo, 4, 6, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 4,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}, {\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell2.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:4`), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel(`InsertedModified:2`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel(`InsertedOriginal:5`), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel(`InsertedModified:3`),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 7,\n\t\t\t\t\tmodifiedCellIndex: 5, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete a cell from an unchanged notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([0, 1, []],\n\t\t\t\tcellsDiffInfo, 2, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete last cell from an unchanged notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 1, []],\n\t\t\t\tcellsDiffInfo, 2, 2, applyEdits, createModifiedCellDiffInfo);\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete the first cell, then insert a new cell at the top', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([0, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 2, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('InsertedModified:0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete a new cell from a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 1, [\n\t\t\t\t// createICell(CellKind.Code, 'print(\"Hello World\")')\n\t\t\t]],\n\t\t\t\tcellsDiffInfo, 4, 6, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete 2 cells from a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 2, [\n\t\t\t]],\n\t\t\t\tcellsDiffInfo, 4, 6, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 4,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Delete 3 cells from a notebook with 3 cells deleted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'modified', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('6'), originalCellIndex: 6,\n\t\t\t\t\tmodifiedCellIndex: 4, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([1, 3, [\n\t\t\t]],\n\t\t\t\tcellsDiffInfo, 5, 7, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 5,\n\t\t\t\t\tcells: [], count: 1\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('6'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('6'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Insert 1 cell at the bottom via chat, then user creats a new cell just below that', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 3, 1, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert 1 cell at the bottom via chat, then user creats anew cells above the previous new cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([2, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 3, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('InsertedModified:2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Insert 1 cell at the bottom via chat, then user inserts a new cells below the  previous new cell', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst cell1 = createICell(CellKind.Code, 'print(\"Hello World\")');\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellAddDelete([3, 0, [cell1]],\n\t\t\t\tcellsDiffInfo, 3, 2, applyEdits, createModifiedCellDiffInfo);\n\n\t\t\tassert.deepStrictEqual(appliedEdits, [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\tindex: 2,\n\t\t\t\t\tcells: [{\n\t\t\t\t\t\tcellKind: CellKind.Code,\n\t\t\t\t\t\tlanguage: 'python',\n\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\tmime: undefined,\n\t\t\t\t\t\tmetadata: {},\n\t\t\t\t\t\tinternalMetadata: {},\n\t\t\t\t\t\tsource: cell1.getValue(),\n\t\t\t\t\t}], count: 0\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('InsertedOriginal:2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('InsertedModified:3'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tsuite('Cell Movements', function () {\n\n\t\tconst keep = () => Promise.resolve(true);\n\t\tconst undo = () => Promise.resolve(true);\n\t\tconst diff = observableValue('cell1', nullDocumentDiff);\n\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\tfunction createModifiedModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Modified:${id}` as any;\n\n\t\t}\n\t\tfunction createOriginalModel(id: string): ObservablePromise<ITextModel> {\n\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\treturn `Original:${id}` as any;\n\n\t\t}\n\t\ttest('Swap first two inserted cells in a previously empty notebook', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 1\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Swap first two inserted cells in a notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 1\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t\ttest('Move first inserted cell to the very bottom of notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 3\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move last cell to top of notebook after 2 cells were inserted', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 3, length: 1, newIdx: 0\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 0\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Move second inserted cell to the very bottom of notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 3\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('3'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move second inserted cell to the second last position of notebook that had 2 cells', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 2\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.strictEqual(result[1].length, 0);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('3'),\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t\ttest('Move first cell to the last position of notebook that had 3 cells deleted from the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 0, length: 1, newIdx: 2\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 5\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move second cell to the last position of notebook that had 3 cells deleted from the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 2\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 5\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('2'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\ttest('Move second cell to the last position of notebook that had 3 cells deleted from middle and 1 inserted in the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 1, length: 1, newIdx: 3\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 1,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 5\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t\ttest('Move last cell to the second position of notebook that had 3 cells deleted from middle and 1 inserted in the middle', async function () {\n\t\t\tconst cellsDiffInfo: ICellDiffInfo[] = [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst result = adjustCellDiffAndOriginalModelBasedOnCellMovements({\n\t\t\t\tcells: [], kind: NotebookCellsChangeType.Move,\n\t\t\t\tindex: 3, length: 1, newIdx: 1\n\t\t\t}, cellsDiffInfo);\n\n\t\t\tassert.ok(result);\n\t\t\tassert.deepStrictEqual(result[1], [\n\t\t\t\t{\n\t\t\t\t\teditType: CellEditType.Move,\n\t\t\t\t\tindex: 5,\n\t\t\t\t\tlength: 1,\n\t\t\t\t\tnewIdx: 1\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.deepStrictEqual(result[0], [\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('0'), originalCellIndex: 0,\n\t\t\t\t\tmodifiedCellIndex: 0, modifiedModel: createModifiedModel('0'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('5'), originalCellIndex: 1,\n\t\t\t\t\tmodifiedCellIndex: 1, modifiedModel: createModifiedModel('5'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'unchanged', originalModel: createOriginalModel('1'), originalCellIndex: 2,\n\t\t\t\t\tmodifiedCellIndex: 2, modifiedModel: createModifiedModel('1'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('2'), originalCellIndex: 3,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('3'), originalCellIndex: 4,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'delete', originalModel: createOriginalModel('4'), originalCellIndex: 5,\n\t\t\t\t\tmodifiedCellIndex: undefined, modifiedModel: createModifiedModel('null'),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdiff, keep, undo, type: 'insert', originalModel: createOriginalModel('null'), originalCellIndex: undefined,\n\t\t\t\t\tmodifiedCellIndex: 3, modifiedModel: createModifiedModel('New1'),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n});\n"]}