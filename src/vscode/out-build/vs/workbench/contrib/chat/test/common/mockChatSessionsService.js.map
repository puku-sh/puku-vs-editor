{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/test/common/mockChatSessionsService.ts","vs/workbench/contrib/chat/test/common/mockChatSessionsService.ts"],"names":[],"mappings":"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","file":"mockChatSessionsService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../../base/common/map.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IEditableData } from '../../../../common/views.js';\nimport { IChatAgentAttachmentCapabilities, IChatAgentRequest } from '../../common/chatAgents.js';\nimport { IChatSession, IChatSessionContentProvider, IChatSessionItem, IChatSessionItemProvider, IChatSessionProviderOptionGroup, IChatSessionsExtensionPoint, IChatSessionsService, SessionOptionsChangedCallback } from '../../common/chatSessionsService.js';\n\nexport class MockChatSessionsService implements IChatSessionsService {\n\t_serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeItemsProviders = new Emitter<IChatSessionItemProvider>();\n\treadonly onDidChangeItemsProviders = this._onDidChangeItemsProviders.event;\n\n\tprivate readonly _onDidChangeSessionItems = new Emitter<string>();\n\treadonly onDidChangeSessionItems = this._onDidChangeSessionItems.event;\n\n\tprivate readonly _onDidChangeAvailability = new Emitter<void>();\n\treadonly onDidChangeAvailability = this._onDidChangeAvailability.event;\n\n\tprivate readonly _onDidChangeInProgress = new Emitter<void>();\n\treadonly onDidChangeInProgress = this._onDidChangeInProgress.event;\n\n\tprivate readonly _onDidChangeContentProviderSchemes = new Emitter<{ readonly added: string[]; readonly removed: string[] }>();\n\treadonly onDidChangeContentProviderSchemes = this._onDidChangeContentProviderSchemes.event;\n\n\tprivate sessionItemProviders = new Map<string, IChatSessionItemProvider>();\n\tprivate contentProviders = new Map<string, IChatSessionContentProvider>();\n\tprivate contributions: IChatSessionsExtensionPoint[] = [];\n\tprivate optionGroups = new Map<string, IChatSessionProviderOptionGroup[]>();\n\tprivate sessionOptions = new ResourceMap<Map<string, string>>();\n\tprivate editableData = new ResourceMap<IEditableData>();\n\tprivate inProgress = new Map<string, number>();\n\n\t// For testing: allow triggering events\n\tfireDidChangeItemsProviders(provider: IChatSessionItemProvider): void {\n\t\tthis._onDidChangeItemsProviders.fire(provider);\n\t}\n\n\tfireDidChangeSessionItems(chatSessionType: string): void {\n\t\tthis._onDidChangeSessionItems.fire(chatSessionType);\n\t}\n\n\tfireDidChangeAvailability(): void {\n\t\tthis._onDidChangeAvailability.fire();\n\t}\n\n\tfireDidChangeInProgress(): void {\n\t\tthis._onDidChangeInProgress.fire();\n\t}\n\n\tregisterChatSessionItemProvider(provider: IChatSessionItemProvider): IDisposable {\n\t\tthis.sessionItemProviders.set(provider.chatSessionType, provider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.sessionItemProviders.delete(provider.chatSessionType);\n\t\t\t}\n\t\t};\n\t}\n\n\tgetAllChatSessionContributions(): IChatSessionsExtensionPoint[] {\n\t\treturn this.contributions;\n\t}\n\n\tsetContributions(contributions: IChatSessionsExtensionPoint[]): void {\n\t\tthis.contributions = contributions;\n\t}\n\n\tasync activateChatSessionItemProvider(chatSessionType: string): Promise<IChatSessionItemProvider | undefined> {\n\t\treturn this.sessionItemProviders.get(chatSessionType);\n\t}\n\n\tgetAllChatSessionItemProviders(): IChatSessionItemProvider[] {\n\t\treturn Array.from(this.sessionItemProviders.values());\n\t}\n\n\tgetIconForSessionType(chatSessionType: string): ThemeIcon | URI | undefined {\n\t\tconst contribution = this.contributions.find(c => c.type === chatSessionType);\n\t\treturn contribution?.icon && typeof contribution.icon === 'string' ? ThemeIcon.fromId(contribution.icon) : undefined;\n\t}\n\n\tgetWelcomeTitleForSessionType(chatSessionType: string): string | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.welcomeTitle;\n\t}\n\n\tgetWelcomeMessageForSessionType(chatSessionType: string): string | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.welcomeMessage;\n\t}\n\n\tgetInputPlaceholderForSessionType(chatSessionType: string): string | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.inputPlaceholder;\n\t}\n\n\tasync getNewChatSessionItem(chatSessionType: string, options: { request: IChatAgentRequest; metadata?: unknown }, token: CancellationToken): Promise<IChatSessionItem> {\n\t\tconst provider = this.sessionItemProviders.get(chatSessionType);\n\t\tif (!provider?.provideNewChatSessionItem) {\n\t\t\tthrow new Error(`No provider for ${chatSessionType}`);\n\t\t}\n\t\treturn provider.provideNewChatSessionItem(options, token);\n\t}\n\n\tgetAllChatSessionItems(token: CancellationToken): Promise<Array<{ readonly chatSessionType: string; readonly items: IChatSessionItem[] }>> {\n\t\treturn Promise.all(Array.from(this.sessionItemProviders.values(), async provider => {\n\t\t\treturn {\n\t\t\t\tchatSessionType: provider.chatSessionType,\n\t\t\t\titems: await provider.provideChatSessionItems(token),\n\t\t\t};\n\t\t}));\n\t}\n\n\treportInProgress(chatSessionType: string, count: number): void {\n\t\tthis.inProgress.set(chatSessionType, count);\n\t\tthis._onDidChangeInProgress.fire();\n\t}\n\n\tgetInProgress(): { displayName: string; count: number }[] {\n\t\treturn Array.from(this.inProgress.entries()).map(([displayName, count]) => ({ displayName, count }));\n\t}\n\n\tregisterChatSessionContentProvider(chatSessionType: string, provider: IChatSessionContentProvider): IDisposable {\n\t\tthis.contentProviders.set(chatSessionType, provider);\n\t\tthis._onDidChangeContentProviderSchemes.fire({ added: [chatSessionType], removed: [] });\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.contentProviders.delete(chatSessionType);\n\t\t\t}\n\t\t};\n\t}\n\n\tasync canResolveContentProvider(chatSessionType: string): Promise<boolean> {\n\t\treturn this.contentProviders.has(chatSessionType);\n\t}\n\n\tasync getOrCreateChatSession(sessionResource: URI, token: CancellationToken): Promise<IChatSession> {\n\t\tconst provider = this.contentProviders.get(sessionResource.scheme);\n\t\tif (!provider) {\n\t\t\tthrow new Error(`No content provider for ${sessionResource.scheme}`);\n\t\t}\n\t\treturn provider.provideChatSessionContent(sessionResource, token);\n\t}\n\n\tasync canResolveChatSession(chatSessionResource: URI): Promise<boolean> {\n\t\treturn this.contentProviders.has(chatSessionResource.scheme);\n\t}\n\n\tgetOptionGroupsForSessionType(chatSessionType: string): IChatSessionProviderOptionGroup[] | undefined {\n\t\treturn this.optionGroups.get(chatSessionType);\n\t}\n\n\tsetOptionGroupsForSessionType(chatSessionType: string, handle: number, optionGroups?: IChatSessionProviderOptionGroup[]): void {\n\t\tif (optionGroups) {\n\t\t\tthis.optionGroups.set(chatSessionType, optionGroups);\n\t\t} else {\n\t\t\tthis.optionGroups.delete(chatSessionType);\n\t\t}\n\t}\n\n\tprivate optionsChangeCallback?: SessionOptionsChangedCallback;\n\n\tsetOptionsChangeCallback(callback: SessionOptionsChangedCallback): void {\n\t\tthis.optionsChangeCallback = callback;\n\t}\n\n\tasync notifySessionOptionsChange(sessionResource: URI, updates: ReadonlyArray<{ optionId: string; value: string }>): Promise<void> {\n\t\tawait this.optionsChangeCallback?.(sessionResource, updates);\n\t}\n\n\tasync setEditableSession(sessionResource: URI, data: IEditableData | null): Promise<void> {\n\t\tif (data) {\n\t\t\tthis.editableData.set(sessionResource, data);\n\t\t} else {\n\t\t\tthis.editableData.delete(sessionResource);\n\t\t}\n\t}\n\n\tgetEditableData(sessionResource: URI): IEditableData | undefined {\n\t\treturn this.editableData.get(sessionResource);\n\t}\n\n\tisEditable(sessionResource: URI): boolean {\n\t\treturn this.editableData.has(sessionResource);\n\t}\n\n\tnotifySessionItemsChanged(chatSessionType: string): void {\n\t\tthis._onDidChangeSessionItems.fire(chatSessionType);\n\t}\n\n\tgetSessionOption(sessionResource: URI, optionId: string): string | undefined {\n\t\treturn this.sessionOptions.get(sessionResource)?.get(optionId);\n\t}\n\n\tsetSessionOption(sessionResource: URI, optionId: string, value: string): boolean {\n\t\tif (!this.sessionOptions.has(sessionResource)) {\n\t\t\tthis.sessionOptions.set(sessionResource, new Map());\n\t\t}\n\t\tthis.sessionOptions.get(sessionResource)!.set(optionId, value);\n\t\treturn true;\n\t}\n\n\thasAnySessionOptions(resource: URI): boolean {\n\t\treturn this.sessionOptions.has(resource) && this.sessionOptions.get(resource)!.size > 0;\n\t}\n\n\tgetCapabilitiesForSessionType(chatSessionType: string): IChatAgentAttachmentCapabilities | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.capabilities;\n\t}\n\n\tgetContentProviderSchemes(): string[] {\n\t\treturn Array.from(this.contentProviders.keys());\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../../base/common/map.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IEditableData } from '../../../../common/views.js';\nimport { IChatAgentAttachmentCapabilities, IChatAgentRequest } from '../../common/chatAgents.js';\nimport { IChatSession, IChatSessionContentProvider, IChatSessionItem, IChatSessionItemProvider, IChatSessionProviderOptionGroup, IChatSessionsExtensionPoint, IChatSessionsService, SessionOptionsChangedCallback } from '../../common/chatSessionsService.js';\n\nexport class MockChatSessionsService implements IChatSessionsService {\n\t_serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeItemsProviders = new Emitter<IChatSessionItemProvider>();\n\treadonly onDidChangeItemsProviders = this._onDidChangeItemsProviders.event;\n\n\tprivate readonly _onDidChangeSessionItems = new Emitter<string>();\n\treadonly onDidChangeSessionItems = this._onDidChangeSessionItems.event;\n\n\tprivate readonly _onDidChangeAvailability = new Emitter<void>();\n\treadonly onDidChangeAvailability = this._onDidChangeAvailability.event;\n\n\tprivate readonly _onDidChangeInProgress = new Emitter<void>();\n\treadonly onDidChangeInProgress = this._onDidChangeInProgress.event;\n\n\tprivate readonly _onDidChangeContentProviderSchemes = new Emitter<{ readonly added: string[]; readonly removed: string[] }>();\n\treadonly onDidChangeContentProviderSchemes = this._onDidChangeContentProviderSchemes.event;\n\n\tprivate sessionItemProviders = new Map<string, IChatSessionItemProvider>();\n\tprivate contentProviders = new Map<string, IChatSessionContentProvider>();\n\tprivate contributions: IChatSessionsExtensionPoint[] = [];\n\tprivate optionGroups = new Map<string, IChatSessionProviderOptionGroup[]>();\n\tprivate sessionOptions = new ResourceMap<Map<string, string>>();\n\tprivate editableData = new ResourceMap<IEditableData>();\n\tprivate inProgress = new Map<string, number>();\n\n\t// For testing: allow triggering events\n\tfireDidChangeItemsProviders(provider: IChatSessionItemProvider): void {\n\t\tthis._onDidChangeItemsProviders.fire(provider);\n\t}\n\n\tfireDidChangeSessionItems(chatSessionType: string): void {\n\t\tthis._onDidChangeSessionItems.fire(chatSessionType);\n\t}\n\n\tfireDidChangeAvailability(): void {\n\t\tthis._onDidChangeAvailability.fire();\n\t}\n\n\tfireDidChangeInProgress(): void {\n\t\tthis._onDidChangeInProgress.fire();\n\t}\n\n\tregisterChatSessionItemProvider(provider: IChatSessionItemProvider): IDisposable {\n\t\tthis.sessionItemProviders.set(provider.chatSessionType, provider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.sessionItemProviders.delete(provider.chatSessionType);\n\t\t\t}\n\t\t};\n\t}\n\n\tgetAllChatSessionContributions(): IChatSessionsExtensionPoint[] {\n\t\treturn this.contributions;\n\t}\n\n\tsetContributions(contributions: IChatSessionsExtensionPoint[]): void {\n\t\tthis.contributions = contributions;\n\t}\n\n\tasync activateChatSessionItemProvider(chatSessionType: string): Promise<IChatSessionItemProvider | undefined> {\n\t\treturn this.sessionItemProviders.get(chatSessionType);\n\t}\n\n\tgetAllChatSessionItemProviders(): IChatSessionItemProvider[] {\n\t\treturn Array.from(this.sessionItemProviders.values());\n\t}\n\n\tgetIconForSessionType(chatSessionType: string): ThemeIcon | URI | undefined {\n\t\tconst contribution = this.contributions.find(c => c.type === chatSessionType);\n\t\treturn contribution?.icon && typeof contribution.icon === 'string' ? ThemeIcon.fromId(contribution.icon) : undefined;\n\t}\n\n\tgetWelcomeTitleForSessionType(chatSessionType: string): string | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.welcomeTitle;\n\t}\n\n\tgetWelcomeMessageForSessionType(chatSessionType: string): string | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.welcomeMessage;\n\t}\n\n\tgetInputPlaceholderForSessionType(chatSessionType: string): string | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.inputPlaceholder;\n\t}\n\n\tasync getNewChatSessionItem(chatSessionType: string, options: { request: IChatAgentRequest; metadata?: unknown }, token: CancellationToken): Promise<IChatSessionItem> {\n\t\tconst provider = this.sessionItemProviders.get(chatSessionType);\n\t\tif (!provider?.provideNewChatSessionItem) {\n\t\t\tthrow new Error(`No provider for ${chatSessionType}`);\n\t\t}\n\t\treturn provider.provideNewChatSessionItem(options, token);\n\t}\n\n\tgetAllChatSessionItems(token: CancellationToken): Promise<Array<{ readonly chatSessionType: string; readonly items: IChatSessionItem[] }>> {\n\t\treturn Promise.all(Array.from(this.sessionItemProviders.values(), async provider => {\n\t\t\treturn {\n\t\t\t\tchatSessionType: provider.chatSessionType,\n\t\t\t\titems: await provider.provideChatSessionItems(token),\n\t\t\t};\n\t\t}));\n\t}\n\n\treportInProgress(chatSessionType: string, count: number): void {\n\t\tthis.inProgress.set(chatSessionType, count);\n\t\tthis._onDidChangeInProgress.fire();\n\t}\n\n\tgetInProgress(): { displayName: string; count: number }[] {\n\t\treturn Array.from(this.inProgress.entries()).map(([displayName, count]) => ({ displayName, count }));\n\t}\n\n\tregisterChatSessionContentProvider(chatSessionType: string, provider: IChatSessionContentProvider): IDisposable {\n\t\tthis.contentProviders.set(chatSessionType, provider);\n\t\tthis._onDidChangeContentProviderSchemes.fire({ added: [chatSessionType], removed: [] });\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.contentProviders.delete(chatSessionType);\n\t\t\t}\n\t\t};\n\t}\n\n\tasync canResolveContentProvider(chatSessionType: string): Promise<boolean> {\n\t\treturn this.contentProviders.has(chatSessionType);\n\t}\n\n\tasync getOrCreateChatSession(sessionResource: URI, token: CancellationToken): Promise<IChatSession> {\n\t\tconst provider = this.contentProviders.get(sessionResource.scheme);\n\t\tif (!provider) {\n\t\t\tthrow new Error(`No content provider for ${sessionResource.scheme}`);\n\t\t}\n\t\treturn provider.provideChatSessionContent(sessionResource, token);\n\t}\n\n\tasync canResolveChatSession(chatSessionResource: URI): Promise<boolean> {\n\t\treturn this.contentProviders.has(chatSessionResource.scheme);\n\t}\n\n\tgetOptionGroupsForSessionType(chatSessionType: string): IChatSessionProviderOptionGroup[] | undefined {\n\t\treturn this.optionGroups.get(chatSessionType);\n\t}\n\n\tsetOptionGroupsForSessionType(chatSessionType: string, handle: number, optionGroups?: IChatSessionProviderOptionGroup[]): void {\n\t\tif (optionGroups) {\n\t\t\tthis.optionGroups.set(chatSessionType, optionGroups);\n\t\t} else {\n\t\t\tthis.optionGroups.delete(chatSessionType);\n\t\t}\n\t}\n\n\tprivate optionsChangeCallback?: SessionOptionsChangedCallback;\n\n\tsetOptionsChangeCallback(callback: SessionOptionsChangedCallback): void {\n\t\tthis.optionsChangeCallback = callback;\n\t}\n\n\tasync notifySessionOptionsChange(sessionResource: URI, updates: ReadonlyArray<{ optionId: string; value: string }>): Promise<void> {\n\t\tawait this.optionsChangeCallback?.(sessionResource, updates);\n\t}\n\n\tasync setEditableSession(sessionResource: URI, data: IEditableData | null): Promise<void> {\n\t\tif (data) {\n\t\t\tthis.editableData.set(sessionResource, data);\n\t\t} else {\n\t\t\tthis.editableData.delete(sessionResource);\n\t\t}\n\t}\n\n\tgetEditableData(sessionResource: URI): IEditableData | undefined {\n\t\treturn this.editableData.get(sessionResource);\n\t}\n\n\tisEditable(sessionResource: URI): boolean {\n\t\treturn this.editableData.has(sessionResource);\n\t}\n\n\tnotifySessionItemsChanged(chatSessionType: string): void {\n\t\tthis._onDidChangeSessionItems.fire(chatSessionType);\n\t}\n\n\tgetSessionOption(sessionResource: URI, optionId: string): string | undefined {\n\t\treturn this.sessionOptions.get(sessionResource)?.get(optionId);\n\t}\n\n\tsetSessionOption(sessionResource: URI, optionId: string, value: string): boolean {\n\t\tif (!this.sessionOptions.has(sessionResource)) {\n\t\t\tthis.sessionOptions.set(sessionResource, new Map());\n\t\t}\n\t\tthis.sessionOptions.get(sessionResource)!.set(optionId, value);\n\t\treturn true;\n\t}\n\n\thasAnySessionOptions(resource: URI): boolean {\n\t\treturn this.sessionOptions.has(resource) && this.sessionOptions.get(resource)!.size > 0;\n\t}\n\n\tgetCapabilitiesForSessionType(chatSessionType: string): IChatAgentAttachmentCapabilities | undefined {\n\t\treturn this.contributions.find(c => c.type === chatSessionType)?.capabilities;\n\t}\n\n\tgetContentProviderSchemes(): string[] {\n\t\treturn Array.from(this.contentProviders.keys());\n\t}\n}\n"]}