{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/test/browser/chatMarkdownRenderer.test.ts","vs/workbench/contrib/chat/test/browser/chatMarkdownRenderer.test.ts"],"names":[],"mappings":"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","file":"chatMarkdownRenderer.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { assertSnapshot } from '../../../../../base/test/common/snapshot.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ChatContentMarkdownRenderer } from '../../browser/chatContentMarkdownRenderer.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('ChatMarkdownRenderer', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet testRenderer: ChatContentMarkdownRenderer;\n\tsetup(() => {\n\t\tconst instantiationService = store.add(workbenchInstantiationService(undefined, store));\n\t\ttestRenderer = instantiationService.createInstance(ChatContentMarkdownRenderer);\n\t});\n\n\ttest('simple', async () => {\n\t\tconst md = new MarkdownString('a');\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.textContent);\n\t});\n\n\ttest('supportHtml with one-line markdown', async () => {\n\t\tconst md = new MarkdownString('**hello**');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\n\t\tconst md2 = new MarkdownString('1. [_hello_](https://example.com) test **text**');\n\t\tmd2.supportHtml = true;\n\t\tconst result2 = store.add(testRenderer.render(md2));\n\t\tawait assertSnapshot(result2.element.outerHTML);\n\t});\n\n\ttest('invalid HTML', async () => {\n\t\tconst md = new MarkdownString('1<canvas>2<details>3</details></canvas>4');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('invalid HTML with attributes', async () => {\n\t\tconst md = new MarkdownString('1<details id=\"id1\" style=\"display: none\">2<details id=\"my id 2\">3</details></details>4');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('valid HTML', async () => {\n\t\tconst md = new MarkdownString(`\n<h1>heading</h1>\n<ul>\n\t<li>1</li>\n\t<li><b>hi</b></li>\n</ul>\n<pre><code>code here</code></pre>`);\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('mixed valid and invalid HTML', async () => {\n\t\tconst md = new MarkdownString(`\n<h1>heading</h1>\n<details>\n<ul>\n\t<li><span><details><i>1</i></details></span></li>\n\t<li><b>hi</b></li>\n</ul>\n</details>\n<pre><canvas>canvas here</canvas></pre><details></details>`);\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('self-closing elements', async () => {\n\t\t{\n\t\t\tconst md = new MarkdownString('<area><hr><br><input type=\"text\" value=\"test\">');\n\t\t\tmd.supportHtml = true;\n\t\t\tconst result = store.add(testRenderer.render(md));\n\t\t\tawait assertSnapshot(result.element.outerHTML);\n\t\t}\n\t\t{\n\t\t\tconst md = new MarkdownString('<area><hr><br><input type=\"checkbox\">');\n\t\t\tmd.supportHtml = true;\n\t\t\tconst result = store.add(testRenderer.render(md));\n\t\t\tawait assertSnapshot(result.element.outerHTML);\n\t\t}\n\t});\n\n\ttest('html comments', async () => {\n\t\tconst md = new MarkdownString('<!-- comment1 <div></div> --><div>content</div><!-- comment2 -->');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('CDATA', async () => {\n\t\tconst md = new MarkdownString('<![CDATA[<div>content</div>]]>');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('remote images are disallowed', async () => {\n\t\tconst md = new MarkdownString('<img src=\"http://disallowed.com/image.jpg\">');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { assertSnapshot } from '../../../../../base/test/common/snapshot.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ChatContentMarkdownRenderer } from '../../browser/chatContentMarkdownRenderer.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('ChatMarkdownRenderer', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet testRenderer: ChatContentMarkdownRenderer;\n\tsetup(() => {\n\t\tconst instantiationService = store.add(workbenchInstantiationService(undefined, store));\n\t\ttestRenderer = instantiationService.createInstance(ChatContentMarkdownRenderer);\n\t});\n\n\ttest('simple', async () => {\n\t\tconst md = new MarkdownString('a');\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.textContent);\n\t});\n\n\ttest('supportHtml with one-line markdown', async () => {\n\t\tconst md = new MarkdownString('**hello**');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\n\t\tconst md2 = new MarkdownString('1. [_hello_](https://example.com) test **text**');\n\t\tmd2.supportHtml = true;\n\t\tconst result2 = store.add(testRenderer.render(md2));\n\t\tawait assertSnapshot(result2.element.outerHTML);\n\t});\n\n\ttest('invalid HTML', async () => {\n\t\tconst md = new MarkdownString('1<canvas>2<details>3</details></canvas>4');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('invalid HTML with attributes', async () => {\n\t\tconst md = new MarkdownString('1<details id=\"id1\" style=\"display: none\">2<details id=\"my id 2\">3</details></details>4');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('valid HTML', async () => {\n\t\tconst md = new MarkdownString(`\n<h1>heading</h1>\n<ul>\n\t<li>1</li>\n\t<li><b>hi</b></li>\n</ul>\n<pre><code>code here</code></pre>`);\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('mixed valid and invalid HTML', async () => {\n\t\tconst md = new MarkdownString(`\n<h1>heading</h1>\n<details>\n<ul>\n\t<li><span><details><i>1</i></details></span></li>\n\t<li><b>hi</b></li>\n</ul>\n</details>\n<pre><canvas>canvas here</canvas></pre><details></details>`);\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('self-closing elements', async () => {\n\t\t{\n\t\t\tconst md = new MarkdownString('<area><hr><br><input type=\"text\" value=\"test\">');\n\t\t\tmd.supportHtml = true;\n\t\t\tconst result = store.add(testRenderer.render(md));\n\t\t\tawait assertSnapshot(result.element.outerHTML);\n\t\t}\n\t\t{\n\t\t\tconst md = new MarkdownString('<area><hr><br><input type=\"checkbox\">');\n\t\t\tmd.supportHtml = true;\n\t\t\tconst result = store.add(testRenderer.render(md));\n\t\t\tawait assertSnapshot(result.element.outerHTML);\n\t\t}\n\t});\n\n\ttest('html comments', async () => {\n\t\tconst md = new MarkdownString('<!-- comment1 <div></div> --><div>content</div><!-- comment2 -->');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('CDATA', async () => {\n\t\tconst md = new MarkdownString('<![CDATA[<div>content</div>]]>');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n\n\ttest('remote images are disallowed', async () => {\n\t\tconst md = new MarkdownString('<img src=\"http://disallowed.com/image.jpg\">');\n\t\tmd.supportHtml = true;\n\t\tconst result = store.add(testRenderer.render(md));\n\t\tawait assertSnapshot(result.element.outerHTML);\n\t});\n});\n"]}