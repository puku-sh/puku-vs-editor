{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/test/browser/promptSytntax/promptHovers.test.ts","vs/workbench/contrib/chat/test/browser/promptSytntax/promptHovers.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAAE,iBAAiB,EAAE,MAAM,+CAA+C,CAAC;AAClF,OAAO,EAAE,uCAAuC,EAAE,MAAM,6CAA6C,CAAC;AACtG,OAAO,EAAE,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAC5E,OAAO,EAAE,iBAAiB,EAAE,MAAM,oEAAoE,CAAC;AACvG,OAAO,EAAE,wBAAwB,EAAE,MAAM,kFAAkF,CAAC;AAC5H,OAAO,EAAE,mBAAmB,EAAE,MAAM,4DAA4D,CAAC;AAEjG,OAAO,EAAE,6BAA6B,EAAE,MAAM,sDAAsD,CAAC;AACrG,OAAO,EAAE,yBAAyB,EAAE,MAAM,+CAA+C,CAAC;AAC1F,OAAO,EAAE,QAAQ,EAAE,cAAc,EAAE,gBAAgB,EAAE,MAAM,8BAA8B,CAAC;AAC1F,OAAO,EAAE,YAAY,EAAE,MAAM,gCAAgC,CAAC;AAC9D,OAAO,EAAE,iBAAiB,EAAE,MAAM,8BAA8B,CAAC;AACjE,OAAO,EAAE,0BAA0B,EAAa,cAAc,EAAE,MAAM,8CAA8C,CAAC;AACrH,OAAO,EAA8B,sBAAsB,EAAE,MAAM,mCAAmC,CAAC;AACvG,OAAO,EAAE,mBAAmB,EAAE,MAAM,gEAAgE,CAAC;AACrG,OAAO,EAAE,eAAe,EAAE,cAAc,EAAE,MAAM,wDAAwD,CAAC;AACzG,OAAO,EAAE,mBAAmB,EAAE,MAAM,qCAAqC,CAAC;AAC1E,OAAO,EAAE,eAAe,EAAE,MAAM,iCAAiC,CAAC;AAClE,OAAO,EAAE,eAAe,EAAE,MAAM,uDAAuD,CAAC;AACxF,OAAO,EAAE,GAAG,EAAE,MAAM,sCAAsC,CAAC;AAC3D,OAAO,EAAE,gBAAgB,EAAE,MAAM,kDAAkD,CAAC;AAEpF,OAAO,EAAE,cAAc,EAAE,MAAM,8CAA8C,CAAC;AAC9E,OAAO,EAAE,2BAA2B,EAAE,WAAW,EAAE,MAAM,6CAA6C,CAAC;AACvG,OAAO,EAAE,sBAAsB,EAAE,MAAM,4DAA4D,CAAC;AAEpG,KAAK,CAAC,qBAAqB,EAAE,GAAG,EAAE;IACjC,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,IAAI,YAAsC,CAAC;IAC3C,IAAI,aAAkC,CAAC;IAEvC,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,iBAAiB,GAAG,IAAI,wBAAwB,EAAE,CAAC;QACzD,iBAAiB,CAAC,oBAAoB,CAAC,iBAAiB,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;QACtF,YAAY,GAAG,6BAA6B,CAAC;YAC5C,iBAAiB,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,iBAAiB,CAAC,iBAAiB,CAAC,CAAC;YAClF,oBAAoB,EAAE,GAAG,EAAE,CAAC,iBAAiB;SAC7C,EAAE,WAAW,CAAC,CAAC;QAEhB,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,YAAY,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QAE7C,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC,cAAc,CAAC,yBAAyB,CAAC,CAAC,CAAC;QAE5F,MAAM,SAAS,GAAG,EAAE,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE,uBAAuB,EAAE,IAAI,EAAE,gBAAgB,EAAE,aAAa,EAAE,MAAM,EAAE,cAAc,CAAC,QAAQ,EAAE,WAAW,EAAE,EAAE,EAAsB,CAAC;QAClM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;QAEzD,MAAM,SAAS,GAAG,EAAE,EAAE,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE,uBAAuB,EAAE,IAAI,EAAE,iBAAiB,EAAE,OAAO,EAAE,gBAAgB,EAAE,aAAa,EAAE,MAAM,EAAE,cAAc,CAAC,QAAQ,EAAE,WAAW,EAAE,EAAE,EAAsB,CAAC;QAC9N,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;QAEzD,MAAM,SAAS,GAAG,EAAE,EAAE,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,uBAAuB,EAAE,IAAI,EAAE,iBAAiB,EAAE,OAAO,EAAE,gBAAgB,EAAE,+BAA+B,EAAE,MAAM,EAAE,cAAc,CAAC,QAAQ,EAAE,WAAW,EAAE,EAAE,EAAsB,CAAC;QAC5O,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC;QAEzD,YAAY,CAAC,GAAG,CAAC,0BAA0B,EAAE,WAAW,CAAC,CAAC;QAE1D,MAAM,UAAU,GAAiC;YAChD,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,mBAAmB,EAAE,SAAS,EAAE,SAAS,EAAE,IAAI,mBAAmB,CAAC,KAAK,CAAC,EAAE,gBAAgB,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,EAAuC;YACzT,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,mBAAmB,EAAE,SAAS,EAAE,SAAS,EAAE,IAAI,mBAAmB,CAAC,KAAK,CAAC,EAAE,gBAAgB,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAE,eAAe,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,EAAuC;SAC/T,CAAC;QAEF,YAAY,CAAC,IAAI,CAAC,sBAAsB,EAAE;YACzC,mBAAmB,KAAK,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAC3D,mBAAmB,CAAC,IAAY;gBAC/B,OAAO,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,CAAC;YAC5C,CAAC;SACD,CAAC,CAAC;QAEH,MAAM,cAAc,GAAG,IAAI,cAAc,CAAC;YACzC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,8BAA8B,CAAC;YAC9C,IAAI,EAAE,WAAW;YACjB,iBAAiB,EAAE,EAAE,OAAO,EAAE,yBAAyB,EAAE,cAAc,EAAE,EAAE,EAAE;YAC7E,MAAM,EAAE,EAAE,OAAO,EAAE,cAAc,CAAC,KAAK,EAAE;SACzC,CAAC,CAAC;QACH,YAAY,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,mBAAmB,CAAC,EAAE,OAAO,EAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,EAAE,QAAQ,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;QAEnJ,MAAM,MAAM,GAAG,IAAI,gBAAgB,EAAE,CAAC;QACtC,YAAY,CAAC,IAAI,CAAC,eAAe,EAAE;YAClC,mBAAmB,CAAC,KAAiB;gBACpC,OAAO,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;YAClD,CAAC;SACD,CAAC,CAAC;QAEH,aAAa,GAAG,YAAY,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC;IAEH,KAAK,UAAU,QAAQ,CAAC,OAAe,EAAE,IAAY,EAAE,MAAc,EAAE,UAAuB;QAC7F,MAAM,UAAU,GAAG,2BAA2B,CAAC,UAAU,CAAC,CAAC;QAC3D,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,eAAe,CAAC,OAAO,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,CAAC,KAAK,CAAC,aAAa,GAAG,sBAAsB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9I,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC5C,MAAM,KAAK,GAAG,MAAM,aAAa,CAAC,YAAY,CAAC,KAAK,EAAE,QAAQ,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAC;QACxF,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC3C,OAAO,SAAS,CAAC;QAClB,CAAC;QACD,mDAAmD;QACnD,MAAM,YAAY,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,YAAY,YAAY,cAAc,EAAE,CAAC;YAC5C,OAAO,YAAY,CAAC,KAAK,CAAC;QAC3B,CAAC;QACD,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,KAAK,CAAC,cAAc,EAAE,GAAG,EAAE;QAC1B,IAAI,CAAC,6CAA6C,EAAE,KAAK,IAAI,EAAE;YAC9D,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,gBAAgB;gBAChB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,mHAAmH,CAAC,CAAC;QAChJ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gEAAgE,EAAE,KAAK,IAAI,EAAE;YACjF,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,wBAAwB;gBACxB,cAAc;gBACd,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,QAAQ,GAAG;gBAChB,gDAAgD;gBAChD,EAAE;gBACF,iEAAiE;aACjE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,8DAA8D,EAAE,KAAK,IAAI,EAAE;YAC/E,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,gBAAgB;gBAChB,sBAAsB;gBACtB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,QAAQ,GAAG;gBAChB,gDAAgD;gBAChD,EAAE;gBACF,eAAe;gBACf,eAAe;gBACf,iBAAiB;aACjB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mEAAmE,EAAE,KAAK,IAAI,EAAE;YACpF,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,wBAAwB;gBACxB,WAAW;gBACX,iBAAiB;gBACjB,oBAAoB;gBACpB,kBAAkB;gBAClB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,QAAQ,GAAG;gBAChB,iEAAiE;gBACjE,EAAE;gBACF,iEAAiE;aACjE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kEAAkE,EAAE,KAAK,IAAI,EAAE;YACnF,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,gBAAgB;gBAChB,WAAW;gBACX,iBAAiB;gBACjB,oBAAoB;gBACpB,kBAAkB;gBAClB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,iEAAiE,CAAC,CAAC;QAC9F,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;YACxE,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,wBAAwB;gBACxB,oCAAoC;gBACpC,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,wBAAwB;YACxB,MAAM,UAAU,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YACrE,MAAM,CAAC,WAAW,CAAC,UAAU,EAAE,wBAAwB,CAAC,CAAC;YAEzD,uBAAuB;YACvB,MAAM,SAAS,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YACpE,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;YAE5C,yBAAyB;YACzB,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YACtE,MAAM,CAAC,WAAW,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;YACrE,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,cAAc;gBACd,qBAAqB;gBACrB,oCAAoC;gBACpC,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,wBAAwB;YACxB,MAAM,UAAU,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YACrE,MAAM,CAAC,WAAW,CAAC,UAAU,EAAE,+BAA+B,CAAC,CAAC;YAEhE,uBAAuB;YACvB,MAAM,SAAS,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YACpE,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;YAE5C,yBAAyB;YACzB,MAAM,WAAW,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YACtE,MAAM,CAAC,WAAW,CAAC,WAAW,EAAE,iBAAiB,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,KAAK,IAAI,EAAE;YAClE,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,gBAAgB;gBAChB,2BAA2B;gBAC3B,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,mBAAmB;YACnB,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAChE,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YACjD,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,2BAA2B;gBAC3B,gBAAgB;gBAChB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,uEAAuE,CAAC,CAAC;QACpG,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;YACnD,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,4BAA4B;gBAC5B,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,+EAA+E,CAAC,CAAC;QAC5G,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,kBAAkB;gBAClB,2BAA2B;gBAC3B,gBAAgB;gBAChB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,KAAK,CAAC,CAAC;YAC/D,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,2CAA2C,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,eAAe,EAAE,GAAG,EAAE;QAC3B,IAAI,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,sBAAsB;gBACtB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;YAChE,MAAM,QAAQ,GAAG;gBAChB,kCAAkC;gBAClC,EAAE;gBACF,eAAe;gBACf,eAAe;gBACf,iBAAiB;aACjB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,KAAK,IAAI,EAAE;YAClE,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,kBAAkB;gBAClB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;YACjE,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,kBAAkB;gBAClB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;YAChE,MAAM,QAAQ,GAAG;gBAChB,4CAA4C;gBAC5C,EAAE;gBACF,sBAAsB;gBACtB,wCAAwC;gBACxC,2CAA2C;gBAC3C,0CAA0C;gBAC1C,EAAE;gBACF,oBAAoB;gBACpB,6BAA6B;aAC7B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,mBAAmB;gBACnB,4BAA4B;gBAC5B,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,MAAM,CAAC,CAAC;YAChE,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,+FAA+F,CAAC,CAAC;QAC5H,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,qBAAqB,EAAE,GAAG,EAAE;QACjC,IAAI,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;YACjD,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,iCAAiC;gBACjC,oBAAoB;gBACpB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC;YACtE,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,wLAAwL,CAAC,CAAC;QACrN,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,4BAA4B,EAAE,KAAK,IAAI,EAAE;YAC7C,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,qBAAqB;gBACrB,oBAAoB;gBACpB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC;YACtE,MAAM,QAAQ,GAAG;gBAChB,qTAAqT;gBACrT,4CAA4C;aAC5C,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE;YAC1C,MAAM,OAAO,GAAG;gBACf,KAAK;gBACL,yBAAyB;gBACzB,iCAAiC;gBACjC,oBAAoB;gBACpB,KAAK;aACL,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACb,MAAM,KAAK,GAAG,MAAM,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC;YACtE,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,0GAA0G,CAAC,CAAC;QACvI,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"promptHovers.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { Position } from '../../../../../../editor/common/core/position.js';\nimport { ContextKeyService } from '../../../../../../platform/contextkey/browser/contextKeyService.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ExtensionIdentifier } from '../../../../../../platform/extensions/common/extensions.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { LanguageModelToolsService } from '../../../browser/languageModelToolsService.js';\nimport { ChatMode, CustomChatMode, IChatModeService } from '../../../common/chatModes.js';\nimport { IChatService } from '../../../common/chatService.js';\nimport { ChatConfiguration } from '../../../common/constants.js';\nimport { ILanguageModelToolsService, IToolData, ToolDataSource } from '../../../common/languageModelToolsService.js';\nimport { ILanguageModelChatMetadata, ILanguageModelsService } from '../../../common/languageModels.js';\nimport { PromptHoverProvider } from '../../../common/promptSyntax/languageProviders/promptHovers.js';\nimport { IPromptsService, PromptsStorage } from '../../../common/promptSyntax/service/promptsService.js';\nimport { MockChatModeService } from '../../common/mockChatModeService.js';\nimport { MockChatService } from '../../common/mockChatService.js';\nimport { createTextModel } from '../../../../../../editor/test/common/testTextModel.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { PromptFileParser } from '../../../common/promptSyntax/promptFileParser.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { MarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { getLanguageIdForPromptsType, PromptsType } from '../../../common/promptSyntax/promptTypes.js';\nimport { getPromptFileExtension } from '../../../common/promptSyntax/config/promptFileLocations.js';\n\nsuite('PromptHoverProvider', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instaService: TestInstantiationService;\n\tlet hoverProvider: PromptHoverProvider;\n\n\tsetup(async () => {\n\t\tconst testConfigService = new TestConfigurationService();\n\t\ttestConfigService.setUserConfiguration(ChatConfiguration.ExtensionToolsEnabled, true);\n\t\tinstaService = workbenchInstantiationService({\n\t\t\tcontextKeyService: () => disposables.add(new ContextKeyService(testConfigService)),\n\t\t\tconfigurationService: () => testConfigService\n\t\t}, disposables);\n\n\t\tconst chatService = new MockChatService();\n\t\tinstaService.stub(IChatService, chatService);\n\n\t\tconst toolService = disposables.add(instaService.createInstance(LanguageModelToolsService));\n\n\t\tconst testTool1 = { id: 'testTool1', displayName: 'tool1', canBeReferencedInPrompt: true, modelDescription: 'Test Tool 1', source: ToolDataSource.External, inputSchema: {} } satisfies IToolData;\n\t\tdisposables.add(toolService.registerToolData(testTool1));\n\n\t\tconst testTool2 = { id: 'testTool2', displayName: 'tool2', canBeReferencedInPrompt: true, toolReferenceName: 'tool2', modelDescription: 'Test Tool 2', source: ToolDataSource.External, inputSchema: {} } satisfies IToolData;\n\t\tdisposables.add(toolService.registerToolData(testTool2));\n\n\t\tconst shellTool = { id: 'shell', displayName: 'shell', canBeReferencedInPrompt: true, toolReferenceName: 'shell', modelDescription: 'Runs commands in the terminal', source: ToolDataSource.External, inputSchema: {} } satisfies IToolData;\n\t\tdisposables.add(toolService.registerToolData(shellTool));\n\n\t\tinstaService.set(ILanguageModelToolsService, toolService);\n\n\t\tconst testModels: ILanguageModelChatMetadata[] = [\n\t\t\t{ id: 'mae-4', name: 'MAE 4', vendor: 'olama', version: '1.0', family: 'mae', modelPickerCategory: undefined, extension: new ExtensionIdentifier('a.b'), isUserSelectable: true, maxInputTokens: 8192, maxOutputTokens: 1024, capabilities: { agentMode: true, toolCalling: true } } satisfies ILanguageModelChatMetadata,\n\t\t\t{ id: 'mae-4.1', name: 'MAE 4.1', vendor: 'copilot', version: '1.0', family: 'mae', modelPickerCategory: undefined, extension: new ExtensionIdentifier('a.b'), isUserSelectable: true, maxInputTokens: 8192, maxOutputTokens: 1024, capabilities: { agentMode: true, toolCalling: true } } satisfies ILanguageModelChatMetadata,\n\t\t];\n\n\t\tinstaService.stub(ILanguageModelsService, {\n\t\t\tgetLanguageModelIds() { return testModels.map(m => m.id); },\n\t\t\tlookupLanguageModel(name: string) {\n\t\t\t\treturn testModels.find(m => m.id === name);\n\t\t\t}\n\t\t});\n\n\t\tconst customChatMode = new CustomChatMode({\n\t\t\turi: URI.parse('myFs://test/test/chatmode.md'),\n\t\t\tname: 'BeastMode',\n\t\t\tagentInstructions: { content: 'Beast mode instructions', toolReferences: [] },\n\t\t\tsource: { storage: PromptsStorage.local }\n\t\t});\n\t\tinstaService.stub(IChatModeService, new MockChatModeService({ builtin: [ChatMode.Agent, ChatMode.Ask, ChatMode.Edit], custom: [customChatMode] }));\n\n\t\tconst parser = new PromptFileParser();\n\t\tinstaService.stub(IPromptsService, {\n\t\t\tgetParsedPromptFile(model: ITextModel) {\n\t\t\t\treturn parser.parse(model.uri, model.getValue());\n\t\t\t}\n\t\t});\n\n\t\thoverProvider = instaService.createInstance(PromptHoverProvider);\n\t});\n\n\tasync function getHover(content: string, line: number, column: number, promptType: PromptsType): Promise<string | undefined> {\n\t\tconst languageId = getLanguageIdForPromptsType(promptType);\n\t\tconst model = disposables.add(createTextModel(content, languageId, undefined, URI.parse('test://test' + getPromptFileExtension(promptType))));\n\t\tconst position = new Position(line, column);\n\t\tconst hover = await hoverProvider.provideHover(model, position, CancellationToken.None);\n\t\tif (!hover || hover.contents.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\t// Return the markdown value from the first content\n\t\tconst firstContent = hover.contents[0];\n\t\tif (firstContent instanceof MarkdownString) {\n\t\t\treturn firstContent.value;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsuite('agent hovers', () => {\n\t\ttest('hover on target attribute shows description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The target to which the header attributes like tools apply to. Possible values are `github-copilot` and `vscode`.');\n\t\t});\n\n\t\ttest('hover on model attribute with github-copilot target shows note', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: github-copilot',\n\t\t\t\t'model: MAE 4',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tconst expected = [\n\t\t\t\t'Specify the model that runs this custom agent.',\n\t\t\t\t'',\n\t\t\t\t'Note: This attribute is not used when target is github-copilot.'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on model attribute with vscode target shows model info', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'model: MAE 4 (olama)',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tconst expected = [\n\t\t\t\t'Specify the model that runs this custom agent.',\n\t\t\t\t'',\n\t\t\t\t'- Name: MAE 4',\n\t\t\t\t'- Family: mae',\n\t\t\t\t'- Vendor: olama'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on handoffs attribute with github-copilot target shows note', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: github-copilot',\n\t\t\t\t'handoffs:',\n\t\t\t\t'  - label: Test',\n\t\t\t\t'    agent: Default',\n\t\t\t\t'    prompt: Test',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tconst expected = [\n\t\t\t\t'Possible handoff actions when the agent has completed its task.',\n\t\t\t\t'',\n\t\t\t\t'Note: This attribute is not used when target is github-copilot.'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on handoffs attribute with vscode target shows description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'handoffs:',\n\t\t\t\t'  - label: Test',\n\t\t\t\t'    agent: Default',\n\t\t\t\t'    prompt: Test',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'Possible handoff actions when the agent has completed its task.');\n\t\t});\n\n\t\ttest('hover on github-copilot tool shows simple description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: github-copilot',\n\t\t\t\t`tools: ['shell', 'edit', 'search']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\t// Hover on 'shell' tool\n\t\t\tconst hoverShell = await getHover(content, 4, 10, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverShell, 'Execute shell commands');\n\n\t\t\t// Hover on 'edit' tool\n\t\t\tconst hoverEdit = await getHover(content, 4, 20, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverEdit, 'Edit files');\n\n\t\t\t// Hover on 'search' tool\n\t\t\tconst hoverSearch = await getHover(content, 4, 28, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverSearch, 'Search in files');\n\t\t});\n\n\t\ttest('hover on github-copilot tool with target undefined', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"Test\"',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t`tools: ['shell', 'edit', 'search']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\t// Hover on 'shell' tool\n\t\t\tconst hoverShell = await getHover(content, 4, 10, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverShell, 'Runs commands in the terminal');\n\n\t\t\t// Hover on 'edit' tool\n\t\t\tconst hoverEdit = await getHover(content, 4, 20, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverEdit, 'Edit files');\n\n\t\t\t// Hover on 'search' tool\n\t\t\tconst hoverSearch = await getHover(content, 4, 28, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverSearch, 'Search in files');\n\t\t});\n\n\t\ttest('hover on vscode tool shows detailed description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t`tools: ['tool1', 'tool2']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\t// Hover on 'tool1'\n\t\t\tconst hover = await getHover(content, 4, 10, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'Test Tool 1');\n\t\t});\n\n\t\ttest('hover on description attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test agent\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The description of the custom agent, what it does and when to use it.');\n\t\t});\n\n\t\ttest('hover on argument-hint attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'argument-hint: \"test hint\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The argument-hint describes what inputs the custom agent expects or supports.');\n\t\t});\n\n\t\ttest('hover on name attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"My Agent\"',\n\t\t\t\t'description: \"Test agent\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The name of the agent as shown in the UI.');\n\t\t});\n\t});\n\n\tsuite('prompt hovers', () => {\n\t\ttest('hover on model attribute shows model info', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'model: MAE 4 (olama)',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.prompt);\n\t\t\tconst expected = [\n\t\t\t\t'The model to use in this prompt.',\n\t\t\t\t'',\n\t\t\t\t'- Name: MAE 4',\n\t\t\t\t'- Family: mae',\n\t\t\t\t'- Vendor: olama'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on tools attribute shows tool description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t`tools: ['tool1']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 10, PromptsType.prompt);\n\t\t\tassert.strictEqual(hover, 'Test Tool 1');\n\t\t});\n\n\t\ttest('hover on agent attribute shows agent info', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'agent: BeastMode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.prompt);\n\t\t\tconst expected = [\n\t\t\t\t'The agent to use when running this prompt.',\n\t\t\t\t'',\n\t\t\t\t'**Built-in agents:**',\n\t\t\t\t'- `agent`: Describe what to build next',\n\t\t\t\t'- `ask`: Explore and understand your code',\n\t\t\t\t'- `edit`: Edit or refactor selected code',\n\t\t\t\t'',\n\t\t\t\t'**Custom agents:**',\n\t\t\t\t'- `BeastMode`: Custom agent'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on name attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"My Prompt\"',\n\t\t\t\t'description: \"Test prompt\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.prompt);\n\t\t\tassert.strictEqual(hover, 'The name of the prompt. This is also the name of the slash command that will run this prompt.');\n\t\t});\n\t});\n\n\tsuite('instructions hovers', () => {\n\t\ttest('hover on description attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test instruction\"',\n\t\t\t\t'applyTo: \"**/*.ts\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.instructions);\n\t\t\tassert.strictEqual(hover, 'The description of the instruction file. It can be used to provide additional context or information about the instructions and is passed to the language model as part of the prompt.');\n\t\t});\n\n\t\ttest('hover on applyTo attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'applyTo: \"**/*.ts\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.instructions);\n\t\t\tconst expected = [\n\t\t\t\t'One or more glob pattern (separated by comma) that describe for which files the instructions apply to. Based on these patterns, the file is automatically included in the prompt, when the context contains a file that matches one or more of these patterns. Use `**` when you want this file to always be added.',\n\t\t\t\t'Example: `**/*.ts`, `**/*.js`, `client/**`'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on name attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"My Instructions\"',\n\t\t\t\t'description: \"Test instruction\"',\n\t\t\t\t'applyTo: \"**/*.ts\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.instructions);\n\t\t\tassert.strictEqual(hover, 'The name of the instruction file as shown in the UI. If not set, the name is derived from the file name.');\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { Position } from '../../../../../../editor/common/core/position.js';\nimport { ContextKeyService } from '../../../../../../platform/contextkey/browser/contextKeyService.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { ExtensionIdentifier } from '../../../../../../platform/extensions/common/extensions.js';\nimport { TestInstantiationService } from '../../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { workbenchInstantiationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { LanguageModelToolsService } from '../../../browser/languageModelToolsService.js';\nimport { ChatMode, CustomChatMode, IChatModeService } from '../../../common/chatModes.js';\nimport { IChatService } from '../../../common/chatService.js';\nimport { ChatConfiguration } from '../../../common/constants.js';\nimport { ILanguageModelToolsService, IToolData, ToolDataSource } from '../../../common/languageModelToolsService.js';\nimport { ILanguageModelChatMetadata, ILanguageModelsService } from '../../../common/languageModels.js';\nimport { PromptHoverProvider } from '../../../common/promptSyntax/languageProviders/promptHovers.js';\nimport { IPromptsService, PromptsStorage } from '../../../common/promptSyntax/service/promptsService.js';\nimport { MockChatModeService } from '../../common/mockChatModeService.js';\nimport { MockChatService } from '../../common/mockChatService.js';\nimport { createTextModel } from '../../../../../../editor/test/common/testTextModel.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { PromptFileParser } from '../../../common/promptSyntax/promptFileParser.js';\nimport { ITextModel } from '../../../../../../editor/common/model.js';\nimport { MarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { getLanguageIdForPromptsType, PromptsType } from '../../../common/promptSyntax/promptTypes.js';\nimport { getPromptFileExtension } from '../../../common/promptSyntax/config/promptFileLocations.js';\n\nsuite('PromptHoverProvider', () => {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet instaService: TestInstantiationService;\n\tlet hoverProvider: PromptHoverProvider;\n\n\tsetup(async () => {\n\t\tconst testConfigService = new TestConfigurationService();\n\t\ttestConfigService.setUserConfiguration(ChatConfiguration.ExtensionToolsEnabled, true);\n\t\tinstaService = workbenchInstantiationService({\n\t\t\tcontextKeyService: () => disposables.add(new ContextKeyService(testConfigService)),\n\t\t\tconfigurationService: () => testConfigService\n\t\t}, disposables);\n\n\t\tconst chatService = new MockChatService();\n\t\tinstaService.stub(IChatService, chatService);\n\n\t\tconst toolService = disposables.add(instaService.createInstance(LanguageModelToolsService));\n\n\t\tconst testTool1 = { id: 'testTool1', displayName: 'tool1', canBeReferencedInPrompt: true, modelDescription: 'Test Tool 1', source: ToolDataSource.External, inputSchema: {} } satisfies IToolData;\n\t\tdisposables.add(toolService.registerToolData(testTool1));\n\n\t\tconst testTool2 = { id: 'testTool2', displayName: 'tool2', canBeReferencedInPrompt: true, toolReferenceName: 'tool2', modelDescription: 'Test Tool 2', source: ToolDataSource.External, inputSchema: {} } satisfies IToolData;\n\t\tdisposables.add(toolService.registerToolData(testTool2));\n\n\t\tconst shellTool = { id: 'shell', displayName: 'shell', canBeReferencedInPrompt: true, toolReferenceName: 'shell', modelDescription: 'Runs commands in the terminal', source: ToolDataSource.External, inputSchema: {} } satisfies IToolData;\n\t\tdisposables.add(toolService.registerToolData(shellTool));\n\n\t\tinstaService.set(ILanguageModelToolsService, toolService);\n\n\t\tconst testModels: ILanguageModelChatMetadata[] = [\n\t\t\t{ id: 'mae-4', name: 'MAE 4', vendor: 'olama', version: '1.0', family: 'mae', modelPickerCategory: undefined, extension: new ExtensionIdentifier('a.b'), isUserSelectable: true, maxInputTokens: 8192, maxOutputTokens: 1024, capabilities: { agentMode: true, toolCalling: true } } satisfies ILanguageModelChatMetadata,\n\t\t\t{ id: 'mae-4.1', name: 'MAE 4.1', vendor: 'copilot', version: '1.0', family: 'mae', modelPickerCategory: undefined, extension: new ExtensionIdentifier('a.b'), isUserSelectable: true, maxInputTokens: 8192, maxOutputTokens: 1024, capabilities: { agentMode: true, toolCalling: true } } satisfies ILanguageModelChatMetadata,\n\t\t];\n\n\t\tinstaService.stub(ILanguageModelsService, {\n\t\t\tgetLanguageModelIds() { return testModels.map(m => m.id); },\n\t\t\tlookupLanguageModel(name: string) {\n\t\t\t\treturn testModels.find(m => m.id === name);\n\t\t\t}\n\t\t});\n\n\t\tconst customChatMode = new CustomChatMode({\n\t\t\turi: URI.parse('myFs://test/test/chatmode.md'),\n\t\t\tname: 'BeastMode',\n\t\t\tagentInstructions: { content: 'Beast mode instructions', toolReferences: [] },\n\t\t\tsource: { storage: PromptsStorage.local }\n\t\t});\n\t\tinstaService.stub(IChatModeService, new MockChatModeService({ builtin: [ChatMode.Agent, ChatMode.Ask, ChatMode.Edit], custom: [customChatMode] }));\n\n\t\tconst parser = new PromptFileParser();\n\t\tinstaService.stub(IPromptsService, {\n\t\t\tgetParsedPromptFile(model: ITextModel) {\n\t\t\t\treturn parser.parse(model.uri, model.getValue());\n\t\t\t}\n\t\t});\n\n\t\thoverProvider = instaService.createInstance(PromptHoverProvider);\n\t});\n\n\tasync function getHover(content: string, line: number, column: number, promptType: PromptsType): Promise<string | undefined> {\n\t\tconst languageId = getLanguageIdForPromptsType(promptType);\n\t\tconst model = disposables.add(createTextModel(content, languageId, undefined, URI.parse('test://test' + getPromptFileExtension(promptType))));\n\t\tconst position = new Position(line, column);\n\t\tconst hover = await hoverProvider.provideHover(model, position, CancellationToken.None);\n\t\tif (!hover || hover.contents.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\t// Return the markdown value from the first content\n\t\tconst firstContent = hover.contents[0];\n\t\tif (firstContent instanceof MarkdownString) {\n\t\t\treturn firstContent.value;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tsuite('agent hovers', () => {\n\t\ttest('hover on target attribute shows description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The target to which the header attributes like tools apply to. Possible values are `github-copilot` and `vscode`.');\n\t\t});\n\n\t\ttest('hover on model attribute with github-copilot target shows note', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: github-copilot',\n\t\t\t\t'model: MAE 4',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tconst expected = [\n\t\t\t\t'Specify the model that runs this custom agent.',\n\t\t\t\t'',\n\t\t\t\t'Note: This attribute is not used when target is github-copilot.'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on model attribute with vscode target shows model info', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'model: MAE 4 (olama)',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tconst expected = [\n\t\t\t\t'Specify the model that runs this custom agent.',\n\t\t\t\t'',\n\t\t\t\t'- Name: MAE 4',\n\t\t\t\t'- Family: mae',\n\t\t\t\t'- Vendor: olama'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on handoffs attribute with github-copilot target shows note', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: github-copilot',\n\t\t\t\t'handoffs:',\n\t\t\t\t'  - label: Test',\n\t\t\t\t'    agent: Default',\n\t\t\t\t'    prompt: Test',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tconst expected = [\n\t\t\t\t'Possible handoff actions when the agent has completed its task.',\n\t\t\t\t'',\n\t\t\t\t'Note: This attribute is not used when target is github-copilot.'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on handoffs attribute with vscode target shows description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'handoffs:',\n\t\t\t\t'  - label: Test',\n\t\t\t\t'    agent: Default',\n\t\t\t\t'    prompt: Test',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 4, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'Possible handoff actions when the agent has completed its task.');\n\t\t});\n\n\t\ttest('hover on github-copilot tool shows simple description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: github-copilot',\n\t\t\t\t`tools: ['shell', 'edit', 'search']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\t// Hover on 'shell' tool\n\t\t\tconst hoverShell = await getHover(content, 4, 10, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverShell, 'Execute shell commands');\n\n\t\t\t// Hover on 'edit' tool\n\t\t\tconst hoverEdit = await getHover(content, 4, 20, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverEdit, 'Edit files');\n\n\t\t\t// Hover on 'search' tool\n\t\t\tconst hoverSearch = await getHover(content, 4, 28, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverSearch, 'Search in files');\n\t\t});\n\n\t\ttest('hover on github-copilot tool with target undefined', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"Test\"',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t`tools: ['shell', 'edit', 'search']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\t// Hover on 'shell' tool\n\t\t\tconst hoverShell = await getHover(content, 4, 10, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverShell, 'Runs commands in the terminal');\n\n\t\t\t// Hover on 'edit' tool\n\t\t\tconst hoverEdit = await getHover(content, 4, 20, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverEdit, 'Edit files');\n\n\t\t\t// Hover on 'search' tool\n\t\t\tconst hoverSearch = await getHover(content, 4, 28, PromptsType.agent);\n\t\t\tassert.strictEqual(hoverSearch, 'Search in files');\n\t\t});\n\n\t\ttest('hover on vscode tool shows detailed description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t`tools: ['tool1', 'tool2']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\t// Hover on 'tool1'\n\t\t\tconst hover = await getHover(content, 4, 10, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'Test Tool 1');\n\t\t});\n\n\t\ttest('hover on description attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test agent\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The description of the custom agent, what it does and when to use it.');\n\t\t});\n\n\t\ttest('hover on argument-hint attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'argument-hint: \"test hint\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The argument-hint describes what inputs the custom agent expects or supports.');\n\t\t});\n\n\t\ttest('hover on name attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"My Agent\"',\n\t\t\t\t'description: \"Test agent\"',\n\t\t\t\t'target: vscode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.agent);\n\t\t\tassert.strictEqual(hover, 'The name of the agent as shown in the UI.');\n\t\t});\n\t});\n\n\tsuite('prompt hovers', () => {\n\t\ttest('hover on model attribute shows model info', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'model: MAE 4 (olama)',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.prompt);\n\t\t\tconst expected = [\n\t\t\t\t'The model to use in this prompt.',\n\t\t\t\t'',\n\t\t\t\t'- Name: MAE 4',\n\t\t\t\t'- Family: mae',\n\t\t\t\t'- Vendor: olama'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on tools attribute shows tool description', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t`tools: ['tool1']`,\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 10, PromptsType.prompt);\n\t\t\tassert.strictEqual(hover, 'Test Tool 1');\n\t\t});\n\n\t\ttest('hover on agent attribute shows agent info', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'agent: BeastMode',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.prompt);\n\t\t\tconst expected = [\n\t\t\t\t'The agent to use when running this prompt.',\n\t\t\t\t'',\n\t\t\t\t'**Built-in agents:**',\n\t\t\t\t'- `agent`: Describe what to build next',\n\t\t\t\t'- `ask`: Explore and understand your code',\n\t\t\t\t'- `edit`: Edit or refactor selected code',\n\t\t\t\t'',\n\t\t\t\t'**Custom agents:**',\n\t\t\t\t'- `BeastMode`: Custom agent'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on name attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"My Prompt\"',\n\t\t\t\t'description: \"Test prompt\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.prompt);\n\t\t\tassert.strictEqual(hover, 'The name of the prompt. This is also the name of the slash command that will run this prompt.');\n\t\t});\n\t});\n\n\tsuite('instructions hovers', () => {\n\t\ttest('hover on description attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test instruction\"',\n\t\t\t\t'applyTo: \"**/*.ts\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.instructions);\n\t\t\tassert.strictEqual(hover, 'The description of the instruction file. It can be used to provide additional context or information about the instructions and is passed to the language model as part of the prompt.');\n\t\t});\n\n\t\ttest('hover on applyTo attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'description: \"Test\"',\n\t\t\t\t'applyTo: \"**/*.ts\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 3, 1, PromptsType.instructions);\n\t\t\tconst expected = [\n\t\t\t\t'One or more glob pattern (separated by comma) that describe for which files the instructions apply to. Based on these patterns, the file is automatically included in the prompt, when the context contains a file that matches one or more of these patterns. Use `**` when you want this file to always be added.',\n\t\t\t\t'Example: `**/*.ts`, `**/*.js`, `client/**`'\n\t\t\t].join('\\n');\n\t\t\tassert.strictEqual(hover, expected);\n\t\t});\n\n\t\ttest('hover on name attribute', async () => {\n\t\t\tconst content = [\n\t\t\t\t'---',\n\t\t\t\t'name: \"My Instructions\"',\n\t\t\t\t'description: \"Test instruction\"',\n\t\t\t\t'applyTo: \"**/*.ts\"',\n\t\t\t\t'---',\n\t\t\t].join('\\n');\n\t\t\tconst hover = await getHover(content, 2, 1, PromptsType.instructions);\n\t\t\tassert.strictEqual(hover, 'The name of the instruction file as shown in the UI. If not set, the name is derived from the file name.');\n\t\t});\n\t});\n});\n"]}