{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/chatReferencesContentPart.ts"],"names":[],"mappings":"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","file":"chatReferencesContentPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { IListRenderer, IListVirtualDelegate } from '../../../../../base/browser/ui/list/list.js';\nimport { IListOptions } from '../../../../../base/browser/ui/list/listWidget.js';\nimport { coalesce } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { matchesSomeScheme, Schemas } from '../../../../../base/common/network.js';\nimport { basename } from '../../../../../base/common/path.js';\nimport { basenameOrAuthority, isEqualAuthority } from '../../../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IRange } from '../../../../../editor/common/core/range.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { getFlatContextMenuActions } from '../../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../../platform/actions/browser/toolbar.js';\nimport { Action2, IMenuService, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../../platform/contextview/browser/contextView.js';\nimport { FileKind } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchList } from '../../../../../platform/list/browser/listService.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { isDark } from '../../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { fillEditorsDragData } from '../../../../browser/dnd.js';\nimport { IResourceLabel, IResourceLabelProps, ResourceLabels } from '../../../../browser/labels.js';\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\nimport { SETTINGS_AUTHORITY } from '../../../../services/preferences/common/preferences.js';\nimport { createFileIconThemableTreeContainerScope } from '../../../files/browser/views/explorerView.js';\nimport { ExplorerFolderContext } from '../../../files/common/files.js';\nimport { chatEditingWidgetFileStateContextKey, ModifiedFileEntryState } from '../../common/chatEditingService.js';\nimport { ChatResponseReferencePartStatusKind, IChatContentReference, IChatWarningMessage } from '../../common/chatService.js';\nimport { IChatRendererContent, IChatResponseViewModel } from '../../common/chatViewModel.js';\nimport { ChatTreeItem, IChatWidgetService } from '../chat.js';\nimport { ChatCollapsibleContentPart } from './chatCollapsibleContentPart.js';\nimport { IDisposableReference, ResourcePool } from './chatCollections.js';\nimport { IChatContentPartRenderContext } from './chatContentParts.js';\n\nconst $ = dom.$;\n\nexport interface IChatReferenceListItem extends IChatContentReference {\n\ttitle?: string;\n\tdescription?: string;\n\tstate?: ModifiedFileEntryState;\n\texcluded?: boolean;\n}\n\nexport type IChatCollapsibleListItem = IChatReferenceListItem | IChatWarningMessage;\n\nexport class ChatCollapsibleListContentPart extends ChatCollapsibleContentPart {\n\n\tconstructor(\n\t\tprivate readonly data: ReadonlyArray<IChatCollapsibleListItem>,\n\t\tlabelOverride: IMarkdownString | string | undefined,\n\t\tcontext: IChatContentPartRenderContext,\n\t\tprivate readonly contentReferencesListPool: CollapsibleListPool,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(labelOverride ?? (data.length > 1 ?\n\t\t\tlocalize('usedReferencesPlural', \"Used {0} references\", data.length) :\n\t\t\tlocalize('usedReferencesSingular', \"Used {0} reference\", 1)), context);\n\t}\n\n\tprotected override initContent(): HTMLElement {\n\t\tconst ref = this._register(this.contentReferencesListPool.get());\n\t\tconst list = ref.object;\n\n\t\tthis._register(list.onDidOpen((e) => {\n\t\t\tif (e.element && 'reference' in e.element && typeof e.element.reference === 'object') {\n\t\t\t\tconst uriOrLocation = 'variableName' in e.element.reference ? e.element.reference.value : e.element.reference;\n\t\t\t\tconst uri = URI.isUri(uriOrLocation) ? uriOrLocation :\n\t\t\t\t\turiOrLocation?.uri;\n\t\t\t\tif (uri) {\n\t\t\t\t\tthis.openerService.open(\n\t\t\t\t\t\turi,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfromUserGesture: true,\n\t\t\t\t\t\t\teditorOptions: {\n\t\t\t\t\t\t\t\t...e.editorOptions,\n\t\t\t\t\t\t\t\t...{\n\t\t\t\t\t\t\t\t\tselection: uriOrLocation && 'range' in uriOrLocation ? uriOrLocation.range : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(list.onContextMenu(e => {\n\t\t\tdom.EventHelper.stop(e.browserEvent, true);\n\n\t\t\tconst uri = e.element && getResourceForElement(e.element);\n\t\t\tif (!uri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => {\n\t\t\t\t\tconst menu = this.menuService.getMenuActions(MenuId.ChatAttachmentsContext, list.contextKeyService, { shouldForwardArgs: true, arg: uri });\n\t\t\t\t\treturn getFlatContextMenuActions(menu);\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tconst resourceContextKey = this._register(this.instantiationService.createInstance(ResourceContextKey));\n\t\tthis._register(list.onDidChangeFocus(e => {\n\t\t\tresourceContextKey.reset();\n\t\t\tconst element = e.elements.length ? e.elements[0] : undefined;\n\t\t\tconst uri = element && getResourceForElement(element);\n\t\t\tresourceContextKey.set(uri ?? null);\n\t\t}));\n\n\t\tconst maxItemsShown = 6;\n\t\tconst itemsShown = Math.min(this.data.length, maxItemsShown);\n\t\tconst height = itemsShown * 22;\n\t\tlist.layout(height);\n\t\tlist.getHTMLElement().style.height = `${height}px`;\n\t\tlist.splice(0, list.length, this.data);\n\n\t\treturn list.getHTMLElement().parentElement!;\n\t}\n\n\thasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\t\treturn other.kind === 'references' && other.references.length === this.data.length && (!!followingContent.length === this.hasFollowingContent);\n\t}\n}\n\nexport interface IChatUsedReferencesListOptions {\n\texpandedWhenEmptyResponse?: boolean;\n}\n\nexport class ChatUsedReferencesListContentPart extends ChatCollapsibleListContentPart {\n\tconstructor(\n\t\tdata: ReadonlyArray<IChatCollapsibleListItem>,\n\t\tlabelOverride: IMarkdownString | string | undefined,\n\t\tcontext: IChatContentPartRenderContext,\n\t\tcontentReferencesListPool: CollapsibleListPool,\n\t\tprivate readonly options: IChatUsedReferencesListOptions,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(data, labelOverride, context, contentReferencesListPool, openerService, menuService, instantiationService, contextMenuService);\n\t\tif (data.length === 0) {\n\t\t\tdom.hide(this.domNode);\n\t\t}\n\t}\n\n\tprotected override isExpanded(): boolean {\n\t\tconst element = this.context.element as IChatResponseViewModel;\n\t\treturn element.usedReferencesExpanded ?? !!(\n\t\t\tthis.options.expandedWhenEmptyResponse && element.response.value.length === 0\n\t\t);\n\t}\n\n\tprotected override setExpanded(value: boolean): void {\n\t\tconst element = this.context.element as IChatResponseViewModel;\n\t\telement.usedReferencesExpanded = !this.isExpanded();\n\t}\n}\n\nexport class CollapsibleListPool extends Disposable {\n\tprivate _pool: ResourcePool<WorkbenchList<IChatCollapsibleListItem>>;\n\n\tpublic get inUse(): ReadonlySet<WorkbenchList<IChatCollapsibleListItem>> {\n\t\treturn this._pool.inUse;\n\t}\n\n\tconstructor(\n\t\tprivate _onDidChangeVisibility: Event<boolean>,\n\t\tprivate readonly menuId: MenuId | undefined,\n\t\tprivate readonly listOptions: IListOptions<IChatCollapsibleListItem> | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t) {\n\t\tsuper();\n\t\tthis._pool = this._register(new ResourcePool(() => this.listFactory()));\n\t}\n\n\tprivate listFactory(): WorkbenchList<IChatCollapsibleListItem> {\n\t\tconst resourceLabels = this._register(this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this._onDidChangeVisibility }));\n\n\t\tconst container = $('.chat-used-context-list');\n\t\tthis._register(createFileIconThemableTreeContainerScope(container, this.themeService));\n\n\t\tconst list = this.instantiationService.createInstance(\n\t\t\tWorkbenchList<IChatCollapsibleListItem>,\n\t\t\t'ChatListRenderer',\n\t\t\tcontainer,\n\t\t\tnew CollapsibleListDelegate(),\n\t\t\t[this.instantiationService.createInstance(CollapsibleListRenderer, resourceLabels, this.menuId)],\n\t\t\t{\n\t\t\t\t...this.listOptions,\n\t\t\t\talwaysConsumeMouseWheel: false,\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel: (element: IChatCollapsibleListItem) => {\n\t\t\t\t\t\tif (element.kind === 'warning') {\n\t\t\t\t\t\t\treturn element.content.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst reference = element.reference;\n\t\t\t\t\t\tif (typeof reference === 'string') {\n\t\t\t\t\t\t\treturn reference;\n\t\t\t\t\t\t} else if ('variableName' in reference) {\n\t\t\t\t\t\t\treturn reference.variableName;\n\t\t\t\t\t\t} else if (URI.isUri(reference)) {\n\t\t\t\t\t\t\treturn basename(reference.path);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn basename(reference.uri.path);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tgetWidgetAriaLabel: () => localize('chatCollapsibleList', \"Collapsible Chat References List\")\n\t\t\t\t},\n\t\t\t\tdnd: {\n\t\t\t\t\tgetDragURI: (element: IChatCollapsibleListItem) => getResourceForElement(element)?.toString() ?? null,\n\t\t\t\t\tgetDragLabel: (elements, originalEvent) => {\n\t\t\t\t\t\tconst uris: URI[] = coalesce(elements.map(getResourceForElement));\n\t\t\t\t\t\tif (!uris.length) {\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t} else if (uris.length === 1) {\n\t\t\t\t\t\t\treturn this.labelService.getUriLabel(uris[0], { relative: true });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn `${uris.length}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdispose: () => { },\n\t\t\t\t\tonDragOver: () => false,\n\t\t\t\t\tdrop: () => { },\n\t\t\t\t\tonDragStart: (data, originalEvent) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst elements = data.getData() as IChatCollapsibleListItem[];\n\t\t\t\t\t\t\tconst uris: URI[] = coalesce(elements.map(getResourceForElement));\n\t\t\t\t\t\t\tthis.instantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, uris, originalEvent));\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// noop\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\treturn list;\n\t}\n\n\tget(): IDisposableReference<WorkbenchList<IChatCollapsibleListItem>> {\n\t\tconst object = this._pool.get();\n\t\tlet stale = false;\n\t\treturn {\n\t\t\tobject,\n\t\t\tisStale: () => stale,\n\t\t\tdispose: () => {\n\t\t\t\tstale = true;\n\t\t\t\tthis._pool.release(object);\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass CollapsibleListDelegate implements IListVirtualDelegate<IChatCollapsibleListItem> {\n\tgetHeight(element: IChatCollapsibleListItem): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: IChatCollapsibleListItem): string {\n\t\treturn CollapsibleListRenderer.TEMPLATE_ID;\n\t}\n}\n\ninterface ICollapsibleListTemplate {\n\treadonly contextKeyService?: IContextKeyService;\n\treadonly label: IResourceLabel;\n\treadonly templateDisposables: DisposableStore;\n\ttoolbar: MenuWorkbenchToolBar | undefined;\n\tactionBarContainer?: HTMLElement;\n\tfileDiffsContainer?: HTMLElement;\n\taddedSpan?: HTMLElement;\n\tremovedSpan?: HTMLElement;\n}\n\nclass CollapsibleListRenderer implements IListRenderer<IChatCollapsibleListItem, ICollapsibleListTemplate> {\n\tstatic TEMPLATE_ID = 'chatCollapsibleListRenderer';\n\treadonly templateId: string = CollapsibleListRenderer.TEMPLATE_ID;\n\n\tconstructor(\n\t\tprivate labels: ResourceLabels,\n\t\tprivate menuId: MenuId | undefined,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ICollapsibleListTemplate {\n\t\tconst templateDisposables = new DisposableStore();\n\t\tconst label = templateDisposables.add(this.labels.create(container, { supportHighlights: true, supportIcons: true }));\n\n\t\tconst fileDiffsContainer = $('.working-set-line-counts');\n\t\tconst addedSpan = dom.$('.working-set-lines-added');\n\t\tconst removedSpan = dom.$('.working-set-lines-removed');\n\t\tfileDiffsContainer.appendChild(addedSpan);\n\t\tfileDiffsContainer.appendChild(removedSpan);\n\t\tlabel.element.appendChild(fileDiffsContainer);\n\n\t\tlet toolbar;\n\t\tlet actionBarContainer;\n\t\tlet contextKeyService;\n\t\tif (this.menuId) {\n\t\t\tactionBarContainer = $('.chat-collapsible-list-action-bar');\n\t\t\tcontextKeyService = templateDisposables.add(this.contextKeyService.createScoped(actionBarContainer));\n\t\t\tconst scopedInstantiationService = templateDisposables.add(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, contextKeyService])));\n\t\t\ttoolbar = templateDisposables.add(scopedInstantiationService.createInstance(MenuWorkbenchToolBar, actionBarContainer, this.menuId, { menuOptions: { shouldForwardArgs: true, arg: undefined } }));\n\t\t\tlabel.element.appendChild(actionBarContainer);\n\t\t}\n\n\t\treturn { templateDisposables, label, toolbar, actionBarContainer, contextKeyService, fileDiffsContainer, addedSpan, removedSpan };\n\t}\n\n\n\tprivate getReferenceIcon(data: IChatContentReference): URI | ThemeIcon | undefined {\n\t\tif (ThemeIcon.isThemeIcon(data.iconPath)) {\n\t\t\treturn data.iconPath;\n\t\t} else {\n\t\t\treturn isDark(this.themeService.getColorTheme().type) && data.iconPath?.dark\n\t\t\t\t? data.iconPath?.dark\n\t\t\t\t: data.iconPath?.light;\n\t\t}\n\t}\n\n\trenderElement(data: IChatCollapsibleListItem, index: number, templateData: ICollapsibleListTemplate): void {\n\t\tif (data.kind === 'warning') {\n\t\t\ttemplateData.label.setResource({ name: data.content.value }, { icon: Codicon.warning });\n\t\t\treturn;\n\t\t}\n\n\t\tconst reference = data.reference;\n\t\tconst icon = this.getReferenceIcon(data);\n\t\ttemplateData.label.element.style.display = 'flex';\n\t\tlet arg: URI | undefined;\n\t\tif (typeof reference === 'object' && 'variableName' in reference) {\n\t\t\tif (reference.value) {\n\t\t\t\tconst uri = URI.isUri(reference.value) ? reference.value : reference.value.uri;\n\t\t\t\ttemplateData.label.setResource(\n\t\t\t\t\t{\n\t\t\t\t\t\tresource: uri,\n\t\t\t\t\t\tname: basenameOrAuthority(uri),\n\t\t\t\t\t\tdescription: `#${reference.variableName}`,\n\t\t\t\t\t\trange: 'range' in reference.value ? reference.value.range : undefined,\n\t\t\t\t\t}, { icon, title: data.options?.status?.description ?? data.title });\n\t\t\t} else if (reference.variableName.startsWith('kernelVariable')) {\n\t\t\t\tconst variable = reference.variableName.split(':')[1];\n\t\t\t\tconst asVariableName = `${variable}`;\n\t\t\t\tconst label = `Kernel variable`;\n\t\t\t\ttemplateData.label.setLabel(label, asVariableName, { title: data.options?.status?.description });\n\t\t\t} else {\n\t\t\t\t// Nothing else is expected to fall into here\n\t\t\t\ttemplateData.label.setLabel('Unknown variable type');\n\t\t\t}\n\t\t} else if (typeof reference === 'string') {\n\t\t\ttemplateData.label.setLabel(reference, undefined, { iconPath: URI.isUri(icon) ? icon : undefined, title: data.options?.status?.description ?? data.title });\n\n\t\t} else {\n\t\t\tconst uri = 'uri' in reference ? reference.uri : reference;\n\t\t\targ = uri;\n\t\t\tconst extraClasses = data.excluded ? ['excluded'] : [];\n\t\t\tif (uri.scheme === 'https' && isEqualAuthority(uri.authority, 'github.com') && uri.path.includes('/tree/')) {\n\t\t\t\t// Parse a nicer label for GitHub URIs that point at a particular commit + file\n\t\t\t\ttemplateData.label.setResource(getResourceLabelForGithubUri(uri), { icon: Codicon.github, title: data.title, strikethrough: data.excluded, extraClasses });\n\t\t\t} else if (uri.scheme === this.productService.urlProtocol && isEqualAuthority(uri.authority, SETTINGS_AUTHORITY)) {\n\t\t\t\t// a nicer label for settings URIs\n\t\t\t\tconst settingId = uri.path.substring(1);\n\t\t\t\ttemplateData.label.setResource({ resource: uri, name: settingId }, { icon: Codicon.settingsGear, title: localize('setting.hover', \"Open setting '{0}'\", settingId), strikethrough: data.excluded, extraClasses });\n\t\t\t} else if (matchesSomeScheme(uri, Schemas.mailto, Schemas.http, Schemas.https)) {\n\t\t\t\ttemplateData.label.setResource({ resource: uri, name: uri.toString() }, { icon: icon ?? Codicon.globe, title: data.options?.status?.description ?? data.title ?? uri.toString(), strikethrough: data.excluded, extraClasses });\n\t\t\t} else {\n\t\t\t\ttemplateData.label.setFile(uri, {\n\t\t\t\t\tfileKind: FileKind.FILE,\n\t\t\t\t\t// Should not have this live-updating data on a historical reference\n\t\t\t\t\tfileDecorations: undefined,\n\t\t\t\t\trange: 'range' in reference ? reference.range : undefined,\n\t\t\t\t\ttitle: data.options?.status?.description ?? data.title,\n\t\t\t\t\tstrikethrough: data.excluded,\n\t\t\t\t\textraClasses\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfor (const selector of ['.monaco-icon-suffix-container', '.monaco-icon-name-container']) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst element = templateData.label.element.querySelector(selector);\n\t\t\tif (element) {\n\t\t\t\tif (data.options?.status?.kind === ChatResponseReferencePartStatusKind.Omitted || data.options?.status?.kind === ChatResponseReferencePartStatusKind.Partial) {\n\t\t\t\t\telement.classList.add('warning');\n\t\t\t\t} else {\n\t\t\t\t\telement.classList.remove('warning');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data.state !== undefined) {\n\t\t\tif (templateData.actionBarContainer) {\n\t\t\t\tif (data.state === ModifiedFileEntryState.Modified && !templateData.actionBarContainer.classList.contains('modified')) {\n\t\t\t\t\tconst diffMeta = data?.options?.diffMeta;\n\t\t\t\t\tif (diffMeta) {\n\t\t\t\t\t\tif (!templateData.fileDiffsContainer || !templateData.addedSpan || !templateData.removedSpan) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemplateData.addedSpan.textContent = `+${diffMeta.added}`;\n\t\t\t\t\t\ttemplateData.removedSpan.textContent = `-${diffMeta.removed}`;\n\t\t\t\t\t\ttemplateData.fileDiffsContainer.setAttribute('aria-label', localize('chatEditingSession.fileCounts', '{0} lines added, {1} lines removed', diffMeta.added, diffMeta.removed));\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t\t\ttemplateData.label.element.querySelector('.monaco-icon-name-container')?.classList.add('modified');\n\t\t\t\t} else if (data.state !== ModifiedFileEntryState.Modified) {\n\t\t\t\t\ttemplateData.actionBarContainer.classList.remove('modified');\n\t\t\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t\t\ttemplateData.label.element.querySelector('.monaco-icon-name-container')?.classList.remove('modified');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (templateData.toolbar) {\n\t\t\t\ttemplateData.toolbar.context = arg;\n\t\t\t}\n\t\t\tif (templateData.contextKeyService) {\n\t\t\t\tif (data.state !== undefined) {\n\t\t\t\t\tchatEditingWidgetFileStateContextKey.bindTo(templateData.contextKeyService).set(data.state);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ICollapsibleListTemplate): void {\n\t\ttemplateData.templateDisposables.dispose();\n\t}\n}\n\nfunction getResourceLabelForGithubUri(uri: URI): IResourceLabelProps {\n\tconst repoPath = uri.path.split('/').slice(1, 3).join('/');\n\tconst filePath = uri.path.split('/').slice(5);\n\tconst fileName = filePath.at(-1);\n\tconst range = getLineRangeFromGithubUri(uri);\n\treturn {\n\t\tresource: uri,\n\t\tname: fileName ?? filePath.join('/'),\n\t\tdescription: [repoPath, ...filePath.slice(0, -1)].join('/'),\n\t\trange\n\t};\n}\n\nfunction getLineRangeFromGithubUri(uri: URI): IRange | undefined {\n\tif (!uri.fragment) {\n\t\treturn undefined;\n\t}\n\n\t// Extract the line range from the fragment\n\t// Github line ranges are 1-based\n\tconst match = uri.fragment.match(/\\bL(\\d+)(?:-L(\\d+))?/);\n\tif (!match) {\n\t\treturn undefined;\n\t}\n\n\tconst startLine = parseInt(match[1]);\n\tif (isNaN(startLine)) {\n\t\treturn undefined;\n\t}\n\n\tconst endLine = match[2] ? parseInt(match[2]) : startLine;\n\tif (isNaN(endLine)) {\n\t\treturn undefined;\n\t}\n\n\treturn {\n\t\tstartLineNumber: startLine,\n\t\tstartColumn: 1,\n\t\tendLineNumber: endLine,\n\t\tendColumn: 1\n\t};\n}\n\nfunction getResourceForElement(element: IChatCollapsibleListItem): URI | null {\n\tif (element.kind === 'warning') {\n\t\treturn null;\n\t}\n\tconst { reference } = element;\n\tif (typeof reference === 'string' || 'variableName' in reference) {\n\t\treturn null;\n\t} else if (URI.isUri(reference)) {\n\t\treturn reference;\n\t} else {\n\t\treturn reference.uri;\n\t}\n}\n\n//#region Resource context menu\n\nregisterAction2(class AddToChatAction extends Action2 {\n\n\tstatic readonly id = 'workbench.action.chat.addToChatAction';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AddToChatAction.id,\n\t\t\ttitle: {\n\t\t\t\t...localize2('addToChat', \"Add File to Chat\"),\n\t\t\t},\n\t\t\tf1: false,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatAttachmentsContext,\n\t\t\t\tgroup: 'chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(ResourceContextKey.IsFileSystemResource, ExplorerFolderContext.negate()),\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, resource: URI): Promise<void> {\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tif (!resource) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.attachmentModel.addFile(resource);\n\t\t}\n\t}\n});\n\nregisterAction2(class OpenChatReferenceLinkAction extends Action2 {\n\n\tstatic readonly id = 'workbench.action.chat.copyLink';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenChatReferenceLinkAction.id,\n\t\t\ttitle: {\n\t\t\t\t...localize2('copyLink', \"Copy Link\"),\n\t\t\t},\n\t\t\tf1: false,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatAttachmentsContext,\n\t\t\t\tgroup: 'chat',\n\t\t\t\torder: 0,\n\t\t\t\twhen: ContextKeyExpr.or(ResourceContextKey.Scheme.isEqualTo(Schemas.http), ResourceContextKey.Scheme.isEqualTo(Schemas.https)),\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, resource: URI): Promise<void> {\n\t\tawait accessor.get(IClipboardService).writeResources([resource]);\n\t}\n});\n\n//#endregion\n"]}