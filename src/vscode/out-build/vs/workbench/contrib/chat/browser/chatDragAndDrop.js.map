{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatDragAndDrop.ts"],"names":[],"mappings":"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","file":"chatDragAndDrop.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { $, DragAndDropObserver } from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { UriList } from '../../../../base/common/dataTransfer.js';\nimport { IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { localize } from '../../../../nls.js';\nimport { CodeDataTransfers, containsDragType, extractEditorsDropData, extractMarkerDropData, extractNotebookCellOutputDropData, extractSymbolDropData } from '../../../../platform/dnd/browser/dnd.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IThemeService, Themable } from '../../../../platform/theme/common/themeService.js';\nimport { ISharedWebContentExtractorService } from '../../../../platform/webContentExtractor/common/webContentExtractor.js';\nimport { IExtensionService, isProposedApiEnabled } from '../../../services/extensions/common/extensions.js';\nimport { IChatRequestVariableEntry } from '../common/chatVariableEntries.js';\nimport { IChatWidgetService } from './chat.js';\nimport { IChatAttachmentResolveService, ImageTransferData } from './chatAttachmentResolveService.js';\nimport { ChatAttachmentModel } from './chatAttachmentModel.js';\nimport { IChatInputStyles } from './chatInputPart.js';\nimport { convertStringToUInt8Array } from './imageUtils.js';\nimport { extractSCMHistoryItemDropData } from '../../scm/browser/scmHistoryChatContext.js';\n\nenum ChatDragAndDropType {\n\tFILE_INTERNAL,\n\tFILE_EXTERNAL,\n\tFOLDER,\n\tIMAGE,\n\tSYMBOL,\n\tHTML,\n\tMARKER,\n\tNOTEBOOK_CELL_OUTPUT,\n\tSCM_HISTORY_ITEM\n}\n\nconst IMAGE_DATA_REGEX = /^data:image\\/[a-z]+;base64,/;\nconst URL_REGEX = /^https?:\\/\\/.+/;\n\nexport class ChatDragAndDrop extends Themable {\n\n\tprivate readonly overlays: Map<HTMLElement, { overlay: HTMLElement; disposable: IDisposable }> = new Map();\n\tprivate overlayText?: HTMLElement;\n\tprivate overlayTextBackground: string = '';\n\tprivate disableOverlay: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly attachmentModel: ChatAttachmentModel,\n\t\tprivate readonly styles: IChatInputStyles,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@ISharedWebContentExtractorService private readonly webContentExtractorService: ISharedWebContentExtractorService,\n\t\t@IChatWidgetService private readonly chatWidgetService: IChatWidgetService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IChatAttachmentResolveService private readonly chatAttachmentResolveService: IChatAttachmentResolveService\n\t) {\n\t\tsuper(themeService);\n\n\t\tthis.updateStyles();\n\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.overlays.forEach(({ overlay, disposable }) => {\n\t\t\t\tdisposable.dispose();\n\t\t\t\toverlay.remove();\n\t\t\t});\n\n\t\t\tthis.overlays.clear();\n\t\t\tthis.currentActiveTarget = undefined;\n\t\t\tthis.overlayText?.remove();\n\t\t\tthis.overlayText = undefined;\n\t\t}));\n\t}\n\n\taddOverlay(target: HTMLElement, overlayContainer: HTMLElement): void {\n\t\tthis.removeOverlay(target);\n\n\t\tconst { overlay, disposable } = this.createOverlay(target, overlayContainer);\n\t\tthis.overlays.set(target, { overlay, disposable });\n\t}\n\n\tremoveOverlay(target: HTMLElement): void {\n\t\tif (this.currentActiveTarget === target) {\n\t\t\tthis.currentActiveTarget = undefined;\n\t\t}\n\n\t\tconst existingOverlay = this.overlays.get(target);\n\t\tif (existingOverlay) {\n\t\t\texistingOverlay.overlay.remove();\n\t\t\texistingOverlay.disposable.dispose();\n\t\t\tthis.overlays.delete(target);\n\t\t}\n\t}\n\n\tsetDisabledOverlay(disable: boolean) {\n\t\tthis.disableOverlay = disable;\n\t}\n\n\tprivate currentActiveTarget: HTMLElement | undefined = undefined;\n\tprivate createOverlay(target: HTMLElement, overlayContainer: HTMLElement): { overlay: HTMLElement; disposable: IDisposable } {\n\t\tconst overlay = document.createElement('div');\n\t\toverlay.classList.add('chat-dnd-overlay');\n\t\tthis.updateOverlayStyles(overlay);\n\t\toverlayContainer.appendChild(overlay);\n\n\t\tconst disposable = new DragAndDropObserver(target, {\n\t\t\tonDragOver: (e) => {\n\t\t\t\tif (this.disableOverlay) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (target === this.currentActiveTarget) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.currentActiveTarget) {\n\t\t\t\t\tthis.setOverlay(this.currentActiveTarget, undefined);\n\t\t\t\t}\n\n\t\t\t\tthis.currentActiveTarget = target;\n\n\t\t\t\tthis.onDragEnter(e, target);\n\n\t\t\t},\n\t\t\tonDragLeave: (e) => {\n\t\t\t\tif (this.disableOverlay) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (target === this.currentActiveTarget) {\n\t\t\t\t\tthis.currentActiveTarget = undefined;\n\t\t\t\t}\n\n\t\t\t\tthis.onDragLeave(e, target);\n\t\t\t},\n\t\t\tonDrop: (e) => {\n\t\t\t\tif (this.disableOverlay) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (target !== this.currentActiveTarget) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.currentActiveTarget = undefined;\n\t\t\t\tthis.onDrop(e, target);\n\t\t\t},\n\t\t});\n\n\t\treturn { overlay, disposable };\n\t}\n\n\tprivate onDragEnter(e: DragEvent, target: HTMLElement): void {\n\t\tconst estimatedDropType = this.guessDropType(e);\n\t\tthis.updateDropFeedback(e, target, estimatedDropType);\n\t}\n\n\tprivate onDragLeave(e: DragEvent, target: HTMLElement): void {\n\t\tthis.updateDropFeedback(e, target, undefined);\n\t}\n\n\tprivate onDrop(e: DragEvent, target: HTMLElement): void {\n\t\tthis.updateDropFeedback(e, target, undefined);\n\t\tthis.drop(e);\n\t}\n\n\tprivate async drop(e: DragEvent): Promise<void> {\n\t\tconst contexts = await this.resolveAttachmentsFromDragEvent(e);\n\t\tif (contexts.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.attachmentModel.addContext(...contexts);\n\t}\n\n\tprivate updateDropFeedback(e: DragEvent, target: HTMLElement, dropType: ChatDragAndDropType | undefined): void {\n\t\tconst showOverlay = dropType !== undefined;\n\t\tif (e.dataTransfer) {\n\t\t\te.dataTransfer.dropEffect = showOverlay ? 'copy' : 'none';\n\t\t}\n\n\t\tthis.setOverlay(target, dropType);\n\t}\n\n\tprivate guessDropType(e: DragEvent): ChatDragAndDropType | undefined {\n\t\t// This is an estimation based on the datatransfer types/items\n\t\tif (containsDragType(e, CodeDataTransfers.NOTEBOOK_CELL_OUTPUT)) {\n\t\t\treturn ChatDragAndDropType.NOTEBOOK_CELL_OUTPUT;\n\t\t} else if (containsDragType(e, CodeDataTransfers.SCM_HISTORY_ITEM)) {\n\t\t\treturn ChatDragAndDropType.SCM_HISTORY_ITEM;\n\t\t} else if (containsImageDragType(e)) {\n\t\t\treturn this.extensionService.extensions.some(ext => isProposedApiEnabled(ext, 'chatReferenceBinaryData')) ? ChatDragAndDropType.IMAGE : undefined;\n\t\t} else if (containsDragType(e, 'text/html')) {\n\t\t\treturn ChatDragAndDropType.HTML;\n\t\t} else if (containsDragType(e, CodeDataTransfers.SYMBOLS)) {\n\t\t\treturn ChatDragAndDropType.SYMBOL;\n\t\t} else if (containsDragType(e, CodeDataTransfers.MARKERS)) {\n\t\t\treturn ChatDragAndDropType.MARKER;\n\t\t} else if (containsDragType(e, DataTransfers.FILES)) {\n\t\t\treturn ChatDragAndDropType.FILE_EXTERNAL;\n\t\t} else if (containsDragType(e, CodeDataTransfers.EDITORS)) {\n\t\t\treturn ChatDragAndDropType.FILE_INTERNAL;\n\t\t} else if (containsDragType(e, Mimes.uriList, CodeDataTransfers.FILES, DataTransfers.RESOURCES, DataTransfers.INTERNAL_URI_LIST)) {\n\t\t\treturn ChatDragAndDropType.FOLDER;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate isDragEventSupported(e: DragEvent): boolean {\n\t\t// if guessed drop type is undefined, it means the drop is not supported\n\t\tconst dropType = this.guessDropType(e);\n\t\treturn dropType !== undefined;\n\t}\n\n\tprivate getDropTypeName(type: ChatDragAndDropType): string {\n\t\tswitch (type) {\n\t\t\tcase ChatDragAndDropType.FILE_INTERNAL: return localize('file', 'File');\n\t\t\tcase ChatDragAndDropType.FILE_EXTERNAL: return localize('file', 'File');\n\t\t\tcase ChatDragAndDropType.FOLDER: return localize('folder', 'Folder');\n\t\t\tcase ChatDragAndDropType.IMAGE: return localize('image', 'Image');\n\t\t\tcase ChatDragAndDropType.SYMBOL: return localize('symbol', 'Symbol');\n\t\t\tcase ChatDragAndDropType.MARKER: return localize('problem', 'Problem');\n\t\t\tcase ChatDragAndDropType.HTML: return localize('url', 'URL');\n\t\t\tcase ChatDragAndDropType.NOTEBOOK_CELL_OUTPUT: return localize('notebookOutput', 'Output');\n\t\t\tcase ChatDragAndDropType.SCM_HISTORY_ITEM: return localize('scmHistoryItem', 'Change');\n\t\t}\n\t}\n\n\tprivate async resolveAttachmentsFromDragEvent(e: DragEvent): Promise<IChatRequestVariableEntry[]> {\n\t\tif (!this.isDragEventSupported(e)) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (containsDragType(e, CodeDataTransfers.NOTEBOOK_CELL_OUTPUT)) {\n\t\t\tconst notebookOutputData = extractNotebookCellOutputDropData(e);\n\t\t\tif (notebookOutputData) {\n\t\t\t\treturn this.chatAttachmentResolveService.resolveNotebookOutputAttachContext(notebookOutputData);\n\t\t\t}\n\t\t}\n\n\t\tif (containsDragType(e, CodeDataTransfers.SCM_HISTORY_ITEM)) {\n\t\t\tconst scmHistoryItemData = extractSCMHistoryItemDropData(e);\n\t\t\tif (scmHistoryItemData) {\n\t\t\t\treturn this.chatAttachmentResolveService.resolveSourceControlHistoryItemAttachContext(scmHistoryItemData);\n\t\t\t}\n\t\t}\n\n\t\tconst markerData = extractMarkerDropData(e);\n\t\tif (markerData) {\n\t\t\treturn this.chatAttachmentResolveService.resolveMarkerAttachContext(markerData);\n\t\t}\n\n\t\tif (containsDragType(e, CodeDataTransfers.SYMBOLS)) {\n\t\t\tconst symbolsData = extractSymbolDropData(e);\n\t\t\treturn this.chatAttachmentResolveService.resolveSymbolsAttachContext(symbolsData);\n\t\t}\n\n\t\tconst editorDragData = extractEditorsDropData(e);\n\t\tif (editorDragData.length > 0) {\n\t\t\treturn coalesce(await Promise.all(editorDragData.map(editorInput => {\n\t\t\t\treturn this.chatAttachmentResolveService.resolveEditorAttachContext(editorInput);\n\t\t\t})));\n\t\t}\n\n\t\tconst internal = e.dataTransfer?.getData(DataTransfers.INTERNAL_URI_LIST);\n\t\tif (internal) {\n\t\t\tconst uriList = UriList.parse(internal);\n\t\t\tif (uriList.length) {\n\t\t\t\treturn coalesce(await Promise.all(\n\t\t\t\t\turiList.map(uri => this.chatAttachmentResolveService.resolveEditorAttachContext({ resource: URI.parse(uri) }))\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tif (!containsDragType(e, DataTransfers.INTERNAL_URI_LIST) && containsDragType(e, Mimes.uriList) && ((containsDragType(e, Mimes.html) || containsDragType(e, Mimes.text) /* Text mime needed for safari support */))) {\n\t\t\treturn this.resolveHTMLAttachContext(e);\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tprivate async downloadImageAsUint8Array(url: string): Promise<Uint8Array | undefined> {\n\t\ttry {\n\t\t\tconst extractedImages = await this.webContentExtractorService.readImage(URI.parse(url), CancellationToken.None);\n\t\t\tif (extractedImages) {\n\t\t\t\treturn extractedImages.buffer;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logService.warn('Fetch failed:', error);\n\t\t}\n\n\t\t// TODO: use dnd provider to insert text @justschen\n\t\tconst selection = this.chatWidgetService.lastFocusedWidget?.inputEditor.getSelection();\n\t\tif (selection && this.chatWidgetService.lastFocusedWidget) {\n\t\t\tthis.chatWidgetService.lastFocusedWidget.inputEditor.executeEdits('chatInsertUrl', [{ range: selection, text: url }]);\n\t\t}\n\n\t\tthis.logService.warn(`Image URLs must end in .jpg, .png, .gif, .webp, or .bmp. Failed to fetch image from this URL: ${url}`);\n\t\treturn undefined;\n\t}\n\n\tprivate async resolveHTMLAttachContext(e: DragEvent): Promise<IChatRequestVariableEntry[]> {\n\t\tconst existingAttachmentNames = new Set<string>(this.attachmentModel.attachments.map(attachment => attachment.name));\n\t\tconst createDisplayName = (): string => {\n\t\t\tconst baseName = localize('dragAndDroppedImageName', 'Image from URL');\n\t\t\tlet uniqueName = baseName;\n\t\t\tlet baseNameInstance = 1;\n\n\t\t\twhile (existingAttachmentNames.has(uniqueName)) {\n\t\t\t\tuniqueName = `${baseName} ${++baseNameInstance}`;\n\t\t\t}\n\n\t\t\texistingAttachmentNames.add(uniqueName);\n\t\t\treturn uniqueName;\n\t\t};\n\n\t\tconst getImageTransferDataFromUrl = async (url: string): Promise<ImageTransferData | undefined> => {\n\t\t\tconst resource = URI.parse(url);\n\n\t\t\tif (IMAGE_DATA_REGEX.test(url)) {\n\t\t\t\treturn { data: convertStringToUInt8Array(url), name: createDisplayName(), resource };\n\t\t\t}\n\n\t\t\tif (URL_REGEX.test(url)) {\n\t\t\t\tconst data = await this.downloadImageAsUint8Array(url);\n\t\t\t\tif (data) {\n\t\t\t\t\treturn { data, name: createDisplayName(), resource, id: url };\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst getImageTransferDataFromFile = async (file: File): Promise<ImageTransferData | undefined> => {\n\t\t\ttry {\n\t\t\t\tconst buffer = await file.arrayBuffer();\n\t\t\t\treturn { data: new Uint8Array(buffer), name: createDisplayName() };\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error('Error reading file:', error);\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t};\n\n\t\tconst imageTransferData: ImageTransferData[] = [];\n\n\t\t// Image Web File Drag and Drop\n\t\tconst imageFiles = extractImageFilesFromDragEvent(e);\n\t\tif (imageFiles.length) {\n\t\t\tconst imageTransferDataFromFiles = await Promise.all(imageFiles.map(file => getImageTransferDataFromFile(file)));\n\t\t\timageTransferData.push(...imageTransferDataFromFiles.filter(data => !!data));\n\t\t}\n\n\t\t// Image Web URL Drag and Drop\n\t\tconst imageUrls = extractUrlsFromDragEvent(e);\n\t\tif (imageUrls.length) {\n\t\t\tconst imageTransferDataFromUrl = await Promise.all(imageUrls.map(getImageTransferDataFromUrl));\n\t\t\timageTransferData.push(...imageTransferDataFromUrl.filter(data => !!data));\n\t\t}\n\n\t\treturn await this.chatAttachmentResolveService.resolveImageAttachContext(imageTransferData);\n\t}\n\n\tprivate setOverlay(target: HTMLElement, type: ChatDragAndDropType | undefined): void {\n\t\t// Remove any previous overlay text\n\t\tthis.overlayText?.remove();\n\t\tthis.overlayText = undefined;\n\n\t\tconst { overlay } = this.overlays.get(target)!;\n\t\tif (type !== undefined) {\n\t\t\t// Render the overlay text\n\n\t\t\tconst iconAndtextElements = renderLabelWithIcons(`$(${Codicon.attach.id}) ${this.getOverlayText(type)}`);\n\t\t\tconst htmlElements = iconAndtextElements.map(element => {\n\t\t\t\tif (typeof element === 'string') {\n\t\t\t\t\treturn $('span.overlay-text', undefined, element);\n\t\t\t\t}\n\t\t\t\treturn element;\n\t\t\t});\n\n\t\t\tthis.overlayText = $('span.attach-context-overlay-text', undefined, ...htmlElements);\n\t\t\tthis.overlayText.style.backgroundColor = this.overlayTextBackground;\n\t\t\toverlay.appendChild(this.overlayText);\n\t\t}\n\n\t\toverlay.classList.toggle('visible', type !== undefined);\n\t}\n\n\tprivate getOverlayText(type: ChatDragAndDropType): string {\n\t\tconst typeName = this.getDropTypeName(type);\n\t\treturn localize('attacAsContext', 'Attach {0} as Context', typeName);\n\t}\n\n\tprivate updateOverlayStyles(overlay: HTMLElement): void {\n\t\toverlay.style.backgroundColor = this.getColor(this.styles.overlayBackground) || '';\n\t\toverlay.style.color = this.getColor(this.styles.listForeground) || '';\n\t}\n\n\toverride updateStyles(): void {\n\t\tthis.overlays.forEach(overlay => this.updateOverlayStyles(overlay.overlay));\n\t\tthis.overlayTextBackground = this.getColor(this.styles.listBackground) || '';\n\t}\n}\n\nfunction containsImageDragType(e: DragEvent): boolean {\n\t// Image detection should not have false positives, only false negatives are allowed\n\tif (containsDragType(e, 'image')) {\n\t\treturn true;\n\t}\n\n\tif (containsDragType(e, DataTransfers.FILES)) {\n\t\tconst files = e.dataTransfer?.files;\n\t\tif (files && files.length > 0) {\n\t\t\treturn Array.from(files).some(file => file.type.startsWith('image/'));\n\t\t}\n\n\t\tconst items = e.dataTransfer?.items;\n\t\tif (items && items.length > 0) {\n\t\t\treturn Array.from(items).some(item => item.type.startsWith('image/'));\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction extractUrlsFromDragEvent(e: DragEvent, logService?: ILogService): string[] {\n\tconst textUrl = e.dataTransfer?.getData('text/uri-list');\n\tif (textUrl) {\n\t\ttry {\n\t\t\tconst urls = UriList.parse(textUrl);\n\t\t\tif (urls.length > 0) {\n\t\t\t\treturn urls;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogService?.error('Error parsing URI list:', error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\treturn [];\n}\n\nfunction extractImageFilesFromDragEvent(e: DragEvent): File[] {\n\tconst files = e.dataTransfer?.files;\n\tif (!files) {\n\t\treturn [];\n\t}\n\n\treturn Array.from(files).filter(file => file.type.startsWith('image/'));\n}\n"]}