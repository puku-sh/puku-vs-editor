{"version":3,"sources":["vs/workbench/contrib/chat/browser/agentSessions/agentSessionsViewFilter.ts"],"names":[],"mappings":"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","file":"agentSessionsViewFilter.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../../nls.js';\nimport { registerAction2, Action2, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { ChatSessionStatus, IChatSessionsService } from '../../common/chatSessionsService.js';\nimport { AgentSessionProviders, getAgentSessionProviderName } from './agentSessions.js';\nimport { IAgentSessionViewModel } from './agentSessionViewModel.js';\n\nexport interface IAgentSessionsViewFilterOptions {\n\treadonly filterMenuId: MenuId;\n}\n\ninterface IAgentSessionsViewExcludes {\n\treadonly providers: readonly string[];\n\treadonly states: readonly ChatSessionStatus[];\n\treadonly archived: boolean;\n}\n\nconst DEFAULT_EXCLUDES: IAgentSessionsViewExcludes = Object.freeze({\n\tproviders: [] as const,\n\tstates: [] as const,\n\tarchived: true as const,\n});\n\nconst FILTER_STORAGE_KEY = 'agentSessions.filterExcludes';\n\nexport function resetFilter(storageService: IStorageService): void {\n\tconst excludes = {\n\t\tproviders: [...DEFAULT_EXCLUDES.providers],\n\t\tstates: [...DEFAULT_EXCLUDES.states],\n\t\tarchived: DEFAULT_EXCLUDES.archived,\n\t};\n\n\tstorageService.store(FILTER_STORAGE_KEY, JSON.stringify(excludes), StorageScope.PROFILE, StorageTarget.USER);\n}\n\nexport class AgentSessionsViewFilter extends Disposable {\n\n\tprivate static readonly STORAGE_KEY = FILTER_STORAGE_KEY;\n\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate excludes = DEFAULT_EXCLUDES;\n\n\tprivate actionDisposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tprivate readonly options: IAgentSessionsViewFilterOptions,\n\t\t@IChatSessionsService private readonly chatSessionsService: IChatSessionsService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t) {\n\t\tsuper();\n\n\t\tthis.updateExcludes(false);\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.chatSessionsService.onDidChangeItemsProviders(() => this.updateFilterActions()));\n\t\tthis._register(this.chatSessionsService.onDidChangeAvailability(() => this.updateFilterActions()));\n\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.PROFILE, AgentSessionsViewFilter.STORAGE_KEY, this._store)(() => this.updateExcludes(true)));\n\t}\n\n\tprivate updateExcludes(fromEvent: boolean): void {\n\t\tconst excludedTypesRaw = this.storageService.get(AgentSessionsViewFilter.STORAGE_KEY, StorageScope.PROFILE);\n\t\tthis.excludes = excludedTypesRaw ? JSON.parse(excludedTypesRaw) as IAgentSessionsViewExcludes : {\n\t\t\tproviders: [...DEFAULT_EXCLUDES.providers],\n\t\t\tstates: [...DEFAULT_EXCLUDES.states],\n\t\t\tarchived: DEFAULT_EXCLUDES.archived,\n\t\t};\n\n\t\tthis.updateFilterActions();\n\n\t\tif (fromEvent) {\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\t}\n\n\tprivate storeExcludes(excludes: IAgentSessionsViewExcludes): void {\n\t\tthis.excludes = excludes;\n\n\t\tthis.storageService.store(AgentSessionsViewFilter.STORAGE_KEY, JSON.stringify(this.excludes), StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tprivate updateFilterActions(): void {\n\t\tthis.actionDisposables.clear();\n\n\t\tthis.registerProviderActions(this.actionDisposables);\n\t\tthis.registerStateActions(this.actionDisposables);\n\t\tthis.registerArchivedActions(this.actionDisposables);\n\t}\n\n\tprivate registerProviderActions(disposables: DisposableStore): void {\n\t\tconst providers: { id: string; label: string }[] = [\n\t\t\t{ id: AgentSessionProviders.Local, label: getAgentSessionProviderName(AgentSessionProviders.Local) },\n\t\t\t{ id: AgentSessionProviders.Background, label: getAgentSessionProviderName(AgentSessionProviders.Background) },\n\t\t\t{ id: AgentSessionProviders.Cloud, label: getAgentSessionProviderName(AgentSessionProviders.Cloud) },\n\t\t];\n\n\t\tfor (const provider of this.chatSessionsService.getAllChatSessionContributions()) {\n\t\t\tif (providers.find(p => p.id === provider.type)) {\n\t\t\t\tcontinue; // already added\n\t\t\t}\n\n\t\t\tproviders.push({ id: provider.type, label: provider.name });\n\t\t}\n\n\t\tconst that = this;\n\t\tlet counter = 0;\n\t\tfor (const provider of providers) {\n\t\t\tdisposables.add(registerAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: `agentSessions.filter.toggleExclude:${provider.id}`,\n\t\t\t\t\t\ttitle: provider.label,\n\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\tid: that.options.filterMenuId,\n\t\t\t\t\t\t\tgroup: '1_providers',\n\t\t\t\t\t\t\torder: counter++,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoggled: that.excludes.providers.includes(provider.id) ? ContextKeyExpr.false() : ContextKeyExpr.true(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun(): void {\n\t\t\t\t\tconst providerExcludes = new Set(that.excludes.providers);\n\t\t\t\t\tif (providerExcludes.has(provider.id)) {\n\t\t\t\t\t\tproviderExcludes.delete(provider.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tproviderExcludes.add(provider.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tthat.storeExcludes({ ...that.excludes, providers: Array.from(providerExcludes) });\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate registerStateActions(disposables: DisposableStore): void {\n\t\tconst states: { id: ChatSessionStatus; label: string }[] = [\n\t\t\t{ id: ChatSessionStatus.Completed, label: localize('chatSessionStatus.completed', \"Completed\") },\n\t\t\t{ id: ChatSessionStatus.InProgress, label: localize('chatSessionStatus.inProgress', \"In Progress\") },\n\t\t\t{ id: ChatSessionStatus.Failed, label: localize('chatSessionStatus.failed', \"Failed\") },\n\t\t];\n\n\t\tconst that = this;\n\t\tlet counter = 0;\n\t\tfor (const state of states) {\n\t\t\tdisposables.add(registerAction2(class extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper({\n\t\t\t\t\t\tid: `agentSessions.filter.toggleExcludeState:${state.id}`,\n\t\t\t\t\t\ttitle: state.label,\n\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\tid: that.options.filterMenuId,\n\t\t\t\t\t\t\tgroup: '2_states',\n\t\t\t\t\t\t\torder: counter++,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoggled: that.excludes.states.includes(state.id) ? ContextKeyExpr.false() : ContextKeyExpr.true(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\trun(): void {\n\t\t\t\t\tconst stateExcludes = new Set(that.excludes.states);\n\t\t\t\t\tif (stateExcludes.has(state.id)) {\n\t\t\t\t\t\tstateExcludes.delete(state.id);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstateExcludes.add(state.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tthat.storeExcludes({ ...that.excludes, states: Array.from(stateExcludes) });\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate registerArchivedActions(disposables: DisposableStore): void {\n\t\tconst that = this;\n\t\tdisposables.add(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'agentSessions.filter.toggleExcludeArchived',\n\t\t\t\t\ttitle: localize('agentSessions.filter.archived', 'Archived'),\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: that.options.filterMenuId,\n\t\t\t\t\t\tgroup: '2_states',\n\t\t\t\t\t\torder: 1000,\n\t\t\t\t\t},\n\t\t\t\t\ttoggled: that.excludes.archived ? ContextKeyExpr.false() : ContextKeyExpr.true(),\n\t\t\t\t});\n\t\t\t}\n\t\t\trun(): void {\n\t\t\t\tthat.storeExcludes({ ...that.excludes, archived: !that.excludes.archived });\n\t\t\t}\n\t\t}));\n\t}\n\n\texclude(session: IAgentSessionViewModel): boolean {\n\t\tif (this.excludes.archived && session.archived) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.excludes.providers.includes(session.providerType)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.excludes.states.includes(session.status)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n"]}