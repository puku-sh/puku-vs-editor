{"version":3,"sources":["vs/workbench/contrib/chat/browser/promptSyntax/newPromptFileActions.ts"],"names":[],"mappings":"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","file":"newPromptFileActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isEqual } from '../../../../../base/common/resources.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { getCodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { SnippetController2 } from '../../../../../editor/contrib/snippet/browser/snippetController2.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { INotificationService, NeverShowAgainScope, Severity } from '../../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { getLanguageIdForPromptsType, PromptsType } from '../../common/promptSyntax/promptTypes.js';\nimport { IUserDataSyncEnablementService, SyncResource } from '../../../../../platform/userDataSync/common/userDataSync.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { CONFIGURE_SYNC_COMMAND_ID } from '../../../../services/userDataSync/common/userDataSync.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { CHAT_CATEGORY } from '../actions/chatActions.js';\nimport { askForPromptFileName } from './pickers/askForPromptName.js';\nimport { askForPromptSourceFolder } from './pickers/askForPromptSourceFolder.js';\nimport { IChatModeService } from '../../common/chatModes.js';\n\n\nclass AbstractNewPromptFileAction extends Action2 {\n\n\tconstructor(id: string, title: string, private readonly type: PromptsType) {\n\t\tsuper({\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: ChatContextKeys.enabled\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor) {\n\t\tconst logService = accessor.get(ILogService);\n\t\tconst openerService = accessor.get(IOpenerService);\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\t\tconst userDataSyncEnablementService = accessor.get(IUserDataSyncEnablementService);\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst chatModeService = accessor.get(IChatModeService);\n\n\t\tconst selectedFolder = await instaService.invokeFunction(askForPromptSourceFolder, this.type);\n\t\tif (!selectedFolder) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileName = await instaService.invokeFunction(askForPromptFileName, this.type, selectedFolder.uri);\n\t\tif (!fileName) {\n\t\t\treturn;\n\t\t}\n\n\t\t// create the prompt file\n\n\t\tawait fileService.createFolder(selectedFolder.uri);\n\n\t\tconst promptUri = URI.joinPath(selectedFolder.uri, fileName);\n\t\tawait fileService.createFile(promptUri);\n\n\t\tawait openerService.open(promptUri);\n\n\t\tconst editor = getCodeEditor(editorService.activeTextEditorControl);\n\t\tif (editor && editor.hasModel() && isEqual(editor.getModel().uri, promptUri)) {\n\t\t\tSnippetController2.get(editor)?.apply([{\n\t\t\t\trange: editor.getModel().getFullModelRange(),\n\t\t\t\ttemplate: getDefaultContentSnippet(this.type, chatModeService),\n\t\t\t}]);\n\t\t}\n\n\t\tif (selectedFolder.storage !== 'user') {\n\t\t\treturn;\n\t\t}\n\n\t\t// due to PII concerns, synchronization of the 'user' reusable prompts\n\t\t// is disabled by default, but we want to make that fact clear to the user\n\t\t// hence after a 'user' prompt is create, we check if the synchronization\n\t\t// was explicitly configured before, and if it wasn't, we show a suggestion\n\t\t// to enable the synchronization logic in the Settings Sync configuration\n\n\t\tconst isConfigured = userDataSyncEnablementService\n\t\t\t.isResourceEnablementConfigured(SyncResource.Prompts);\n\t\tconst isSettingsSyncEnabled = userDataSyncEnablementService.isEnabled();\n\n\t\t// if prompts synchronization has already been configured before or\n\t\t// if settings sync service is currently disabled, nothing to do\n\t\tif ((isConfigured === true) || (isSettingsSyncEnabled === false)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// show suggestion to enable synchronization of the user prompts and instructions to the user\n\t\tnotificationService.prompt(\n\t\t\tSeverity.Info,\n\t\t\tlocalize(\n\t\t\t\t'workbench.command.prompts.create.user.enable-sync-notification',\n\t\t\t\t\"Do you want to backup and sync your user prompt, instruction and custom agent files with Setting Sync?'\",\n\t\t\t),\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('enable.capitalized', \"Enable\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tcommandService.executeCommand(CONFIGURE_SYNC_COMMAND_ID)\n\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\tlogService.error(`Failed to run '${CONFIGURE_SYNC_COMMAND_ID}' command: ${error}.`);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('learnMore.capitalized', \"Learn More\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\topenerService.open(URI.parse('https://aka.ms/vscode-settings-sync-help'));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\t{\n\t\t\t\tneverShowAgain: {\n\t\t\t\t\tid: 'workbench.command.prompts.create.user.enable-sync-notification',\n\t\t\t\t\tscope: NeverShowAgainScope.PROFILE,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n}\n\nfunction getDefaultContentSnippet(promptType: PromptsType, chatModeService: IChatModeService): string {\n\tconst agents = chatModeService.getModes();\n\tconst agentNames = agents.builtin.map(agent => agent.name.get()).join(',') + (agents.custom.length ? (',' + agents.custom.map(agent => agent.name.get()).join(',')) : '');\n\tswitch (promptType) {\n\t\tcase PromptsType.prompt:\n\t\t\treturn [\n\t\t\t\t`---`,\n\t\t\t\t`agent: \\${1|${agentNames}|}`,\n\t\t\t\t`---`,\n\t\t\t\t`\\${2:Define the task to achieve, including specific requirements, constraints, and success criteria.}`,\n\t\t\t].join('\\n');\n\t\tcase PromptsType.instructions:\n\t\t\treturn [\n\t\t\t\t`---`,\n\t\t\t\t`applyTo: '\\${1|**,**/*.ts|}'`,\n\t\t\t\t`---`,\n\t\t\t\t`\\${2:Provide project context and coding guidelines that AI should follow when generating code, answering questions, or reviewing changes.}`,\n\t\t\t].join('\\n');\n\t\tcase PromptsType.agent:\n\t\t\treturn [\n\t\t\t\t`---`,\n\t\t\t\t`description: '\\${1:Describe what this custom agent does and when to use it.}'`,\n\t\t\t\t`tools: []`,\n\t\t\t\t`---`,\n\t\t\t\t`\\${2:Define what this custom agent accomplishes for the user, when to use it, and the edges it won't cross. Specify its ideal inputs/outputs, the tools it may call, and how it reports progress or asks for help.}`,\n\t\t\t].join('\\n');\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown prompt type: ${promptType}`);\n\t}\n}\n\n\nexport const NEW_PROMPT_COMMAND_ID = 'workbench.command.new.prompt';\nexport const NEW_INSTRUCTIONS_COMMAND_ID = 'workbench.command.new.instructions';\nexport const NEW_AGENT_COMMAND_ID = 'workbench.command.new.agent';\n\nclass NewPromptFileAction extends AbstractNewPromptFileAction {\n\tconstructor() {\n\t\tsuper(NEW_PROMPT_COMMAND_ID, localize('commands.new.prompt.local.title', \"New Prompt File...\"), PromptsType.prompt);\n\t}\n}\n\nclass NewInstructionsFileAction extends AbstractNewPromptFileAction {\n\tconstructor() {\n\t\tsuper(NEW_INSTRUCTIONS_COMMAND_ID, localize('commands.new.instructions.local.title', \"New Instructions File...\"), PromptsType.instructions);\n\t}\n}\n\nclass NewAgentFileAction extends AbstractNewPromptFileAction {\n\tconstructor() {\n\t\tsuper(NEW_AGENT_COMMAND_ID, localize('commands.new.agent.local.title', \"New Custom Agent...\"), PromptsType.agent);\n\t}\n}\n\nclass NewUntitledPromptFileAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.command.new.untitled.prompt',\n\t\t\ttitle: localize2('commands.new.untitled.prompt.title', \"New Untitled Prompt File\"),\n\t\t\tf1: true,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override async run(accessor: ServicesAccessor) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst chatModeService = accessor.get(IChatModeService);\n\n\t\tconst languageId = getLanguageIdForPromptsType(PromptsType.prompt);\n\n\t\tconst input = await editorService.openEditor({\n\t\t\tresource: undefined,\n\t\t\tlanguageId,\n\t\t\toptions: {\n\t\t\t\tpinned: true\n\t\t\t}\n\t\t});\n\t\tconst type = PromptsType.prompt;\n\n\t\tconst editor = getCodeEditor(editorService.activeTextEditorControl);\n\t\tif (editor && editor.hasModel()) {\n\t\t\tSnippetController2.get(editor)?.apply([{\n\t\t\t\trange: editor.getModel().getFullModelRange(),\n\t\t\t\ttemplate: getDefaultContentSnippet(type, chatModeService),\n\t\t\t}]);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nexport function registerNewPromptFileActions(): void {\n\tregisterAction2(NewPromptFileAction);\n\tregisterAction2(NewInstructionsFileAction);\n\tregisterAction2(NewAgentFileAction);\n\tregisterAction2(NewUntitledPromptFileAction);\n}\n"]}