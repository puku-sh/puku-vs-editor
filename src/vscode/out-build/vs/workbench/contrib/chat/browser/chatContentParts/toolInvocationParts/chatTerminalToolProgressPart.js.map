{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/toolInvocationParts/chatTerminalToolProgressPart.ts"],"names":[],"mappings":"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","file":"chatTerminalToolProgressPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from '../../../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../../base/common/keyCodes.js';\nimport { isMarkdownString, MarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IPreferencesService, type IOpenSettingsOptions } from '../../../../../services/preferences/common/preferences.js';\nimport { migrateLegacyTerminalToolSpecificData } from '../../../common/chat.js';\nimport { IChatToolInvocation, IChatToolInvocationSerialized, type IChatMarkdownContent, type IChatTerminalToolInvocationData, type ILegacyChatTerminalToolInvocationData } from '../../../common/chatService.js';\nimport { CodeBlockModelCollection } from '../../../common/codeBlockModelCollection.js';\nimport { IChatCodeBlockInfo, IChatWidgetService } from '../../chat.js';\nimport { ChatQueryTitlePart } from '../chatConfirmationWidget.js';\nimport { IChatContentPartRenderContext } from '../chatContentParts.js';\nimport { ChatMarkdownContentPart, type IChatMarkdownContentPartOptions } from '../chatMarkdownContentPart.js';\nimport { ChatProgressSubPart } from '../chatProgressContentPart.js';\nimport { BaseChatToolInvocationSubPart } from './chatToolInvocationSubPart.js';\nimport '../media/chatTerminalToolProgressPart.css';\nimport { TerminalContribSettingId } from '../../../../terminal/terminalContribExports.js';\nimport { ConfigurationTarget } from '../../../../../../platform/configuration/common/configuration.js';\nimport type { ICodeBlockRenderOptions } from '../../codeBlockPart.js';\nimport { ChatConfiguration, CHAT_TERMINAL_OUTPUT_MAX_PREVIEW_LINES } from '../../../common/constants.js';\nimport { CommandsRegistry } from '../../../../../../platform/commands/common/commands.js';\nimport { MenuId, MenuRegistry } from '../../../../../../platform/actions/common/actions.js';\nimport { IChatTerminalToolProgressPart, ITerminalChatService, ITerminalEditorService, ITerminalGroupService, ITerminalInstance, ITerminalService } from '../../../../terminal/browser/terminal.js';\nimport { Action, IAction } from '../../../../../../base/common/actions.js';\nimport { Disposable, MutableDisposable, toDisposable, type IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { Emitter, Event } from '../../../../../../base/common/event.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { DecorationSelector, getTerminalCommandDecorationState, getTerminalCommandDecorationTooltip } from '../../../../terminal/browser/xterm/decorationStyles.js';\nimport * as dom from '../../../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { ScrollbarVisibility } from '../../../../../../base/common/scrollable.js';\nimport { localize } from '../../../../../../nls.js';\nimport { TerminalLocation } from '../../../../../../platform/terminal/common/terminal.js';\nimport { ITerminalCommand, TerminalCapability, type ICommandDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport { IMarkdownRenderer } from '../../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport * as domSanitize from '../../../../../../base/browser/domSanitize.js';\nimport { DomSanitizerConfig } from '../../../../../../base/browser/domSanitize.js';\nimport { allowedMarkdownHtmlAttributes } from '../../../../../../base/browser/markdownRenderer.js';\nimport { stripIcons } from '../../../../../../base/common/iconLabels.js';\nimport { IAccessibleViewService } from '../../../../../../platform/accessibility/browser/accessibleView.js';\nimport { IContextKey, IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { AccessibilityVerbositySettingId } from '../../../../accessibility/browser/accessibilityConfiguration.js';\nimport { ChatContextKeys } from '../../../common/chatContextKeys.js';\nimport { EditorPool } from '../chatContentCodePools.js';\nimport { KeybindingWeight, KeybindingsRegistry } from '../../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\n\nconst MAX_TERMINAL_OUTPUT_PREVIEW_HEIGHT = 200;\n\nconst sanitizerConfig = Object.freeze<DomSanitizerConfig>({\n\tallowedTags: {\n\t\taugment: ['b', 'i', 'u', 'code', 'span', 'div', 'body', 'pre'],\n\t},\n\tallowedAttributes: {\n\t\taugment: [...allowedMarkdownHtmlAttributes, 'style']\n\t}\n});\n\n/**\n * Remembers whether a tool invocation was last expanded so state survives virtualization re-renders.\n */\nconst expandedStateByInvocation = new WeakMap<IChatToolInvocation | IChatToolInvocationSerialized, boolean>();\n\n/**\n * Options for configuring a terminal command decoration.\n */\ninterface ITerminalCommandDecorationOptions {\n\t/**\n\t * The terminal data associated with the tool invocation.\n\t */\n\treadonly terminalData: IChatTerminalToolInvocationData;\n\n\t/**\n\t * Returns the HTML element representing the command block in the terminal output.\n\t * May return `undefined` if the command block is not currently rendered.\n\t * Called when attaching the decoration to the command block container.\n\t */\n\tgetCommandBlock(): HTMLElement | undefined;\n\n\t/**\n\t * Returns the HTML element representing the icon for the command, if any.\n\t * May return `undefined` if no icon is present.\n\t * Used to determine where to insert the decoration relative to the icon.\n\t */\n\tgetIconElement(): HTMLElement | undefined;\n\n\t/**\n\t * Returns the resolved terminal command associated with this decoration, if available.\n\t * May return `undefined` if the command has not been resolved yet.\n\t * Used to access command metadata for the decoration.\n\t */\n\tgetResolvedCommand(): ITerminalCommand | undefined;\n}\n\nclass TerminalCommandDecoration extends Disposable {\n\tprivate readonly _element: HTMLElement;\n\tprivate readonly _hoverListener: MutableDisposable<IDisposable>;\n\tprivate readonly _focusListener: MutableDisposable<IDisposable>;\n\tprivate _interactionElement: HTMLElement | undefined;\n\n\tconstructor(private readonly _options: ITerminalCommandDecorationOptions) {\n\t\tsuper();\n\t\tconst decorationElements = h('span.chat-terminal-command-decoration@decoration', { role: 'img', tabIndex: 0 });\n\t\tthis._element = decorationElements.decoration;\n\t\tthis._hoverListener = this._register(new MutableDisposable<IDisposable>());\n\t\tthis._focusListener = this._register(new MutableDisposable<IDisposable>());\n\t\tthis._attachElementToContainer();\n\t}\n\n\tprivate _attachElementToContainer(): void {\n\t\tconst container = this._options.getCommandBlock();\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst decoration = this._element;\n\t\tif (!decoration.isConnected || decoration.parentElement !== container) {\n\t\t\tconst icon = this._options.getIconElement();\n\t\t\tif (icon && icon.parentElement === container) {\n\t\t\t\ticon.insertAdjacentElement('afterend', decoration);\n\t\t\t} else {\n\t\t\t\tcontainer.insertBefore(decoration, container.firstElementChild ?? null);\n\t\t\t}\n\t\t}\n\n\t\tthis._attachInteractionHandlers(decoration);\n\t}\n\n\tpublic update(command?: ITerminalCommand): void {\n\t\tthis._attachElementToContainer();\n\t\tconst decoration = this._element;\n\t\tconst resolvedCommand = command ?? this._options.getResolvedCommand();\n\t\tthis._apply(decoration, resolvedCommand);\n\t}\n\n\tprivate _apply(decoration: HTMLElement, command: ITerminalCommand | undefined): void {\n\t\tconst terminalData = this._options.terminalData;\n\t\tlet storedState = terminalData.terminalCommandState;\n\n\t\tif (command) {\n\t\t\tconst existingState = terminalData.terminalCommandState ?? {};\n\t\t\tterminalData.terminalCommandState = {\n\t\t\t\t...existingState,\n\t\t\t\texitCode: command.exitCode,\n\t\t\t\ttimestamp: command.timestamp ?? existingState.timestamp,\n\t\t\t\tduration: command.duration ?? existingState.duration\n\t\t\t};\n\t\t\tstoredState = terminalData.terminalCommandState;\n\t\t} else if (!this._options.terminalData.terminalCommandOutput) {\n\t\t\tif (!storedState) {\n\t\t\t\tconst now = Date.now();\n\t\t\t\tterminalData.terminalCommandState = { exitCode: undefined, timestamp: now };\n\t\t\t\tstoredState = terminalData.terminalCommandState;\n\t\t\t}\n\t\t}\n\n\t\tconst decorationState = getTerminalCommandDecorationState(command, storedState);\n\t\tconst tooltip = getTerminalCommandDecorationTooltip(command, storedState);\n\n\t\tdecoration.className = `chat-terminal-command-decoration ${DecorationSelector.CommandDecoration}`;\n\t\tdecoration.classList.add(DecorationSelector.Codicon);\n\t\tfor (const className of decorationState.classNames) {\n\t\t\tdecoration.classList.add(className);\n\t\t}\n\t\tdecoration.classList.add(...ThemeIcon.asClassNameArray(decorationState.icon));\n\t\tconst isInteractive = !decoration.classList.contains(DecorationSelector.Default);\n\t\tdecoration.tabIndex = isInteractive ? 0 : -1;\n\t\tif (isInteractive) {\n\t\t\tdecoration.removeAttribute('aria-disabled');\n\t\t} else {\n\t\t\tdecoration.setAttribute('aria-disabled', 'true');\n\t\t}\n\t\tconst hoverText = tooltip || decorationState.hoverMessage;\n\t\tif (hoverText) {\n\t\t\tdecoration.setAttribute('title', hoverText);\n\t\t\tdecoration.setAttribute('aria-label', hoverText);\n\t\t} else {\n\t\t\tdecoration.removeAttribute('title');\n\t\t\tdecoration.removeAttribute('aria-label');\n\t\t}\n\t}\n\n\tprivate _attachInteractionHandlers(decoration: HTMLElement): void {\n\t\tif (this._interactionElement === decoration) {\n\t\t\treturn;\n\t\t}\n\t\tthis._interactionElement = decoration;\n\t\tthis._hoverListener.value = dom.addDisposableListener(decoration, dom.EventType.MOUSE_ENTER, () => {\n\t\t\tif (!decoration.isConnected) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._apply(decoration, this._options.getResolvedCommand());\n\t\t});\n\t\tthis._focusListener.value = dom.addDisposableListener(decoration, dom.EventType.FOCUS_IN, () => {\n\t\t\tif (!decoration.isConnected) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._apply(decoration, this._options.getResolvedCommand());\n\t\t});\n\t}\n}\n\nexport class ChatTerminalToolProgressPart extends BaseChatToolInvocationSubPart implements IChatTerminalToolProgressPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly _actionBar: ActionBar;\n\n\tprivate readonly _outputView: ChatTerminalToolOutputSection;\n\tprivate readonly _terminalOutputContextKey: IContextKey<boolean>;\n\tprivate _terminalSessionRegistration: IDisposable | undefined;\n\tprivate readonly _elementIndex: number;\n\tprivate readonly _contentIndex: number;\n\tprivate readonly _sessionResource: URI;\n\n\tprivate readonly _showOutputAction = this._register(new MutableDisposable<ToggleChatTerminalOutputAction>());\n\tprivate _showOutputActionAdded = false;\n\tprivate readonly _focusAction = this._register(new MutableDisposable<FocusChatInstanceAction>());\n\n\tprivate readonly _terminalData: IChatTerminalToolInvocationData;\n\tprivate _terminalCommandUri: URI | undefined;\n\tprivate _storedCommandId: string | undefined;\n\tprivate readonly _isSerializedInvocation: boolean;\n\tprivate _terminalInstance: ITerminalInstance | undefined;\n\tprivate readonly _decoration: TerminalCommandDecoration;\n\n\tprivate markdownPart: ChatMarkdownContentPart | undefined;\n\tpublic get codeblocks(): IChatCodeBlockInfo[] {\n\t\treturn this.markdownPart?.codeblocks ?? [];\n\t}\n\n\tpublic get elementIndex(): number {\n\t\treturn this._elementIndex;\n\t}\n\n\tpublic get contentIndex(): number {\n\t\treturn this._contentIndex;\n\t}\n\n\tconstructor(\n\t\ttoolInvocation: IChatToolInvocation | IChatToolInvocationSerialized,\n\t\tterminalData: IChatTerminalToolInvocationData | ILegacyChatTerminalToolInvocationData,\n\t\tcontext: IChatContentPartRenderContext,\n\t\trenderer: IMarkdownRenderer,\n\t\teditorPool: EditorPool,\n\t\tcurrentWidthDelegate: () => number,\n\t\tcodeBlockStartIndex: number,\n\t\tcodeBlockModelCollection: CodeBlockModelCollection,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ITerminalChatService private readonly _terminalChatService: ITerminalChatService,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IChatWidgetService private readonly _chatWidgetService: IChatWidgetService,\n\t\t@IAccessibleViewService private readonly _accessibleViewService: IAccessibleViewService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(toolInvocation);\n\n\t\tthis._elementIndex = context.elementIndex;\n\t\tthis._contentIndex = context.contentIndex;\n\t\tthis._sessionResource = context.element.sessionResource;\n\n\t\tterminalData = migrateLegacyTerminalToolSpecificData(terminalData);\n\t\tthis._terminalData = terminalData;\n\t\tthis._terminalCommandUri = terminalData.terminalCommandUri ? URI.revive(terminalData.terminalCommandUri) : undefined;\n\t\tthis._storedCommandId = this._terminalCommandUri ? new URLSearchParams(this._terminalCommandUri.query ?? '').get('command') ?? undefined : undefined;\n\t\tthis._isSerializedInvocation = (toolInvocation.kind === 'toolInvocationSerialized');\n\n\t\tconst elements = h('.chat-terminal-content-part@container', [\n\t\t\th('.chat-terminal-content-title@title', [\n\t\t\t\th('.chat-terminal-command-block@commandBlock')\n\t\t\t]),\n\t\t\th('.chat-terminal-content-message@message'),\n\t\t\th('.chat-terminal-output-container@output')\n\t\t]);\n\n\t\tthis._decoration = this._register(new TerminalCommandDecoration({\n\t\t\tterminalData: this._terminalData,\n\t\t\tgetCommandBlock: () => elements.commandBlock,\n\t\t\tgetIconElement: () => undefined,\n\t\t\tgetResolvedCommand: () => this._getResolvedCommand()\n\t\t}));\n\n\t\tconst command = terminalData.commandLine.userEdited ?? terminalData.commandLine.toolEdited ?? terminalData.commandLine.original;\n\t\tconst displayCommand = stripIcons(command);\n\t\tthis._terminalOutputContextKey = ChatContextKeys.inChatTerminalToolOutput.bindTo(this._contextKeyService);\n\n\t\tconst titlePart = this._register(_instantiationService.createInstance(\n\t\t\tChatQueryTitlePart,\n\t\t\telements.commandBlock,\n\t\t\tnew MarkdownString([\n\t\t\t\t`\\`\\`\\`${terminalData.language}`,\n\t\t\t\t`${command.replaceAll('```', '\\\\`\\\\`\\\\`')}`,\n\t\t\t\t`\\`\\`\\``\n\t\t\t].join('\\n'), { supportThemeIcons: true }),\n\t\t\tundefined,\n\t\t));\n\t\tthis._register(titlePart.onDidChangeHeight(() => {\n\t\t\tthis._decoration.update();\n\t\t\tthis._onDidChangeHeight.fire();\n\t\t}));\n\n\n\t\tconst outputViewOptions: ChatTerminalToolOutputSectionOptions = {\n\t\t\tcontainer: elements.output,\n\t\t\ttitle: elements.title,\n\t\t\tdisplayCommand,\n\t\t\tterminalData: this._terminalData,\n\t\t\taccessibleViewService: this._accessibleViewService,\n\t\t\tonDidChangeHeight: () => this._onDidChangeHeight.fire(),\n\t\t\tensureTerminalInstance: () => this._ensureTerminalInstance(),\n\t\t\tresolveCommand: () => this._getResolvedCommand(),\n\t\t\tgetTerminalTheme: () => this._terminalInstance?.xterm?.getXtermTheme() ?? this._terminalData.terminalTheme,\n\t\t\tgetStoredCommandId: () => this._storedCommandId\n\t\t};\n\t\tthis._outputView = this._register(new ChatTerminalToolOutputSection(outputViewOptions));\n\t\tthis._register(this._outputView.onDidFocus(() => this._handleOutputFocus()));\n\t\tthis._register(this._outputView.onDidBlur(e => this._handleOutputBlur(e)));\n\t\tthis._register(toDisposable(() => this._handleDispose()));\n\t\tthis._register(this._keybindingService.onDidUpdateKeybindings(() => {\n\t\t\tthis._focusAction.value?.refreshKeybindingTooltip();\n\t\t\tthis._showOutputAction.value?.refreshKeybindingTooltip();\n\t\t}));\n\n\n\t\tconst actionBarEl = h('.chat-terminal-action-bar@actionBar');\n\t\telements.title.append(actionBarEl.root);\n\t\tthis._actionBar = this._register(new ActionBar(actionBarEl.actionBar, {}));\n\t\tthis._initializeTerminalActions();\n\t\tthis._terminalService.whenConnected.then(() => this._initializeTerminalActions());\n\t\tlet pastTenseMessage: string | undefined;\n\t\tif (toolInvocation.pastTenseMessage) {\n\t\t\tpastTenseMessage = `${typeof toolInvocation.pastTenseMessage === 'string' ? toolInvocation.pastTenseMessage : toolInvocation.pastTenseMessage.value}`;\n\t\t}\n\t\tconst markdownContent = new MarkdownString(pastTenseMessage, {\n\t\t\tsupportThemeIcons: true,\n\t\t\tisTrusted: isMarkdownString(toolInvocation.pastTenseMessage) ? toolInvocation.pastTenseMessage.isTrusted : false,\n\t\t});\n\t\tconst chatMarkdownContent: IChatMarkdownContent = {\n\t\t\tkind: 'markdownContent',\n\t\t\tcontent: markdownContent,\n\t\t};\n\n\t\tconst codeBlockRenderOptions: ICodeBlockRenderOptions = {\n\t\t\thideToolbar: true,\n\t\t\treserveWidth: 19,\n\t\t\tverticalPadding: 5,\n\t\t\teditorOptions: {\n\t\t\t\twordWrap: 'on'\n\t\t\t}\n\t\t};\n\n\t\tconst markdownOptions: IChatMarkdownContentPartOptions = {\n\t\t\tcodeBlockRenderOptions,\n\t\t\taccessibilityOptions: pastTenseMessage ? {\n\t\t\t\tstatusMessage: localize('terminalToolCommand', '{0}', stripIcons(pastTenseMessage))\n\t\t\t} : undefined\n\t\t};\n\n\t\tthis.markdownPart = this._register(_instantiationService.createInstance(ChatMarkdownContentPart, chatMarkdownContent, context, editorPool, false, codeBlockStartIndex, renderer, {}, currentWidthDelegate(), codeBlockModelCollection, markdownOptions));\n\t\tthis._register(this.markdownPart.onDidChangeHeight(() => this._onDidChangeHeight.fire()));\n\n\t\telements.message.append(this.markdownPart.domNode);\n\t\tconst progressPart = this._register(_instantiationService.createInstance(ChatProgressSubPart, elements.container, this.getIcon(), terminalData.autoApproveInfo));\n\t\tthis.domNode = progressPart.domNode;\n\t\tthis._decoration.update();\n\n\t\tif (expandedStateByInvocation.get(toolInvocation)) {\n\t\t\tvoid this._toggleOutput(true);\n\t\t}\n\t\tthis._register(this._terminalChatService.registerProgressPart(this));\n\t}\n\n\tprivate async _initializeTerminalActions(): Promise<void> {\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tconst terminalToolSessionId = this._terminalData.terminalToolSessionId;\n\t\tif (!terminalToolSessionId) {\n\t\t\tthis._addActions();\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure stored output surfaces immediately even if no terminal instance is available yet.\n\t\tif (this._terminalData.terminalCommandOutput) {\n\t\t\tthis._addActions(undefined, terminalToolSessionId);\n\t\t}\n\n\t\tconst attachInstance = async (instance: ITerminalInstance | undefined) => {\n\t\t\tif (this._store.isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!instance) {\n\t\t\t\tif (this._isSerializedInvocation) {\n\t\t\t\t\tthis._clearCommandAssociation();\n\t\t\t\t}\n\t\t\t\tthis._addActions(undefined, terminalToolSessionId);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst isNewInstance = this._terminalInstance !== instance;\n\t\t\tif (isNewInstance) {\n\t\t\t\tthis._terminalInstance = instance;\n\t\t\t\tthis._registerInstanceListener(instance);\n\t\t\t}\n\t\t\t// Always call _addActions to ensure actions are added, even if instance was set earlier\n\t\t\t// (e.g., by the output view during expanded state restoration)\n\t\t\tthis._addActions(instance, terminalToolSessionId);\n\t\t};\n\n\t\tconst initialInstance = await this._terminalChatService.getTerminalInstanceByToolSessionId(terminalToolSessionId);\n\t\tawait attachInstance(initialInstance);\n\n\t\tif (!initialInstance) {\n\t\t\tthis._addActions(undefined, terminalToolSessionId);\n\t\t}\n\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._terminalSessionRegistration) {\n\t\t\tconst listener = this._terminalChatService.onDidRegisterTerminalInstanceWithToolSession(async instance => {\n\t\t\t\tconst registeredInstance = await this._terminalChatService.getTerminalInstanceByToolSessionId(terminalToolSessionId);\n\t\t\t\tif (instance !== registeredInstance) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._terminalSessionRegistration?.dispose();\n\t\t\t\tthis._terminalSessionRegistration = undefined;\n\t\t\t\tawait attachInstance(instance);\n\t\t\t});\n\t\t\tthis._terminalSessionRegistration = this._store.add(listener);\n\t\t}\n\t}\n\n\tprivate _addActions(terminalInstance?: ITerminalInstance, terminalToolSessionId?: string): void {\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tconst actionBar = this._actionBar;\n\t\tthis._removeFocusAction();\n\t\tconst resolvedCommand = this._getResolvedCommand(terminalInstance);\n\n\t\tif (terminalInstance) {\n\t\t\tconst isTerminalHidden = terminalInstance && terminalToolSessionId ? this._terminalChatService.isBackgroundTerminal(terminalToolSessionId) : false;\n\t\t\tconst focusAction = this._instantiationService.createInstance(FocusChatInstanceAction, terminalInstance, resolvedCommand, this._terminalCommandUri, this._storedCommandId, isTerminalHidden);\n\t\t\tthis._focusAction.value = focusAction;\n\t\t\tactionBar.push(focusAction, { icon: true, label: false, index: 0 });\n\t\t}\n\n\t\tthis._ensureShowOutputAction(resolvedCommand);\n\t\tthis._decoration.update(resolvedCommand);\n\t}\n\n\tprivate _getResolvedCommand(instance?: ITerminalInstance): ITerminalCommand | undefined {\n\t\tconst target = instance ?? this._terminalInstance;\n\t\tif (!target) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._resolveCommand(target);\n\t}\n\n\tprivate _ensureShowOutputAction(command?: ITerminalCommand): void {\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tlet resolvedCommand = command;\n\t\tif (!resolvedCommand) {\n\t\t\tresolvedCommand = this._getResolvedCommand();\n\t\t}\n\t\tconst hasStoredOutput = !!this._terminalData.terminalCommandOutput;\n\t\tif (!resolvedCommand && !hasStoredOutput) {\n\t\t\treturn;\n\t\t}\n\t\tlet showOutputAction = this._showOutputAction.value;\n\t\tif (!showOutputAction) {\n\t\t\tshowOutputAction = this._instantiationService.createInstance(ToggleChatTerminalOutputAction, () => this._toggleOutputFromAction());\n\t\t\tthis._showOutputAction.value = showOutputAction;\n\t\t\tif (resolvedCommand?.exitCode) {\n\t\t\t\tthis._toggleOutput(true);\n\t\t\t}\n\t\t}\n\t\tshowOutputAction.syncPresentation(this._outputView.isExpanded);\n\n\t\tconst actionBar = this._actionBar;\n\t\tif (this._showOutputActionAdded) {\n\t\t\tconst existingIndex = actionBar.viewItems.findIndex(item => item.action === showOutputAction);\n\t\t\tif (existingIndex >= 0 && existingIndex !== actionBar.length() - 1) {\n\t\t\t\tactionBar.pull(existingIndex);\n\t\t\t\tthis._showOutputActionAdded = false;\n\t\t\t} else if (existingIndex >= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._showOutputActionAdded) {\n\t\t\treturn;\n\t\t}\n\t\tactionBar.push([showOutputAction], { icon: true, label: false });\n\t\tthis._showOutputActionAdded = true;\n\t}\n\n\tprivate _clearCommandAssociation(): void {\n\t\tthis._terminalCommandUri = undefined;\n\t\tthis._storedCommandId = undefined;\n\t\tif (this._terminalData.terminalCommandUri) {\n\t\t\tdelete this._terminalData.terminalCommandUri;\n\t\t}\n\t\tif (this._terminalData.terminalToolSessionId) {\n\t\t\tdelete this._terminalData.terminalToolSessionId;\n\t\t}\n\t\tthis._decoration.update();\n\t}\n\n\tprivate _registerInstanceListener(terminalInstance: ITerminalInstance): void {\n\t\tconst commandDetectionListener = this._register(new MutableDisposable<IDisposable>());\n\t\tconst tryResolveCommand = async (): Promise<ITerminalCommand | undefined> => {\n\t\t\tconst resolvedCommand = this._resolveCommand(terminalInstance);\n\t\t\tthis._addActions(terminalInstance, this._terminalData.terminalToolSessionId);\n\t\t\treturn resolvedCommand;\n\t\t};\n\n\t\tconst attachCommandDetection = async (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tcommandDetectionListener.clear();\n\t\t\tif (!commandDetection) {\n\t\t\t\tawait tryResolveCommand();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcommandDetectionListener.value = commandDetection.onCommandFinished(() => {\n\t\t\t\tthis._addActions(terminalInstance, this._terminalData.terminalToolSessionId);\n\t\t\t\tcommandDetectionListener.clear();\n\t\t\t});\n\t\t\tconst resolvedImmediately = await tryResolveCommand();\n\t\t\tif (resolvedImmediately?.endMarker) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\n\t\tattachCommandDetection(terminalInstance.capabilities.get(TerminalCapability.CommandDetection));\n\t\tthis._register(terminalInstance.capabilities.onDidAddCommandDetectionCapability(cd => attachCommandDetection(cd)));\n\n\t\tconst instanceListener = this._register(terminalInstance.onDisposed(() => {\n\t\t\tif (this._terminalInstance === terminalInstance) {\n\t\t\t\tthis._terminalInstance = undefined;\n\t\t\t}\n\t\t\tthis._clearCommandAssociation();\n\t\t\tcommandDetectionListener.clear();\n\t\t\tif (!this._store.isDisposed) {\n\t\t\t\tthis._actionBar.clear();\n\t\t\t}\n\t\t\tthis._removeFocusAction();\n\t\t\tthis._showOutputActionAdded = false;\n\t\t\tthis._showOutputAction.clear();\n\t\t\tthis._addActions(undefined, this._terminalData.terminalToolSessionId);\n\t\t\tinstanceListener.dispose();\n\t\t}));\n\t}\n\n\tprivate _removeFocusAction(): void {\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tconst actionBar = this._actionBar;\n\t\tconst focusAction = this._focusAction.value;\n\t\tif (actionBar && focusAction) {\n\t\t\tconst existingIndex = actionBar.viewItems.findIndex(item => item.action === focusAction);\n\t\t\tif (existingIndex >= 0) {\n\t\t\t\tactionBar.pull(existingIndex);\n\t\t\t}\n\t\t}\n\t\tthis._focusAction.clear();\n\t}\n\n\tprivate async _toggleOutput(expanded: boolean): Promise<boolean> {\n\t\tconst didChange = await this._outputView.toggle(expanded);\n\t\tthis._showOutputAction.value?.syncPresentation(this._outputView.isExpanded);\n\t\tif (didChange) {\n\t\t\texpandedStateByInvocation.set(this.toolInvocation, this._outputView.isExpanded);\n\t\t}\n\t\treturn didChange;\n\t}\n\n\tprivate async _ensureTerminalInstance(): Promise<ITerminalInstance | undefined> {\n\t\tif (!this._terminalInstance && this._terminalData.terminalToolSessionId) {\n\t\t\tthis._terminalInstance = await this._terminalChatService.getTerminalInstanceByToolSessionId(this._terminalData.terminalToolSessionId);\n\t\t}\n\t\treturn this._terminalInstance;\n\t}\n\n\tprivate _handleOutputFocus(): void {\n\t\tthis._terminalOutputContextKey.set(true);\n\t\tthis._terminalChatService.setFocusedProgressPart(this);\n\t\tthis._outputView.updateAriaLabel();\n\t}\n\n\tprivate _handleOutputBlur(event: FocusEvent): void {\n\t\tconst nextTarget = event.relatedTarget as HTMLElement | null;\n\t\tif (this._outputView.containsElement(nextTarget)) {\n\t\t\treturn;\n\t\t}\n\t\tthis._terminalOutputContextKey.reset();\n\t\tthis._terminalChatService.clearFocusedProgressPart(this);\n\t}\n\n\tprivate _handleDispose(): void {\n\t\tthis._terminalOutputContextKey.reset();\n\t\tthis._terminalChatService.clearFocusedProgressPart(this);\n\t}\n\n\tpublic getCommandAndOutputAsText(): string | undefined {\n\t\treturn this._outputView.getCommandAndOutputAsText();\n\t}\n\n\tpublic focusOutput(): void {\n\t\tthis._outputView.focus();\n\t}\n\n\tprivate _focusChatInput(): void {\n\t\tconst widget = this._chatWidgetService.getWidgetBySessionResource(this._sessionResource);\n\t\twidget?.focusInput();\n\t}\n\n\tpublic async focusTerminal(): Promise<void> {\n\t\tif (this._focusAction.value) {\n\t\t\tawait this._focusAction.value.run();\n\t\t\treturn;\n\t\t}\n\t\tif (this._terminalCommandUri) {\n\t\t\tthis._terminalService.openResource(this._terminalCommandUri);\n\t\t}\n\t}\n\n\tpublic async toggleOutputFromKeyboard(): Promise<void> {\n\t\tif (!this._outputView.isExpanded) {\n\t\t\tawait this._toggleOutput(true);\n\t\t\tthis.focusOutput();\n\t\t\treturn;\n\t\t}\n\t\tawait this._collapseOutputAndFocusInput();\n\t}\n\n\tprivate async _toggleOutputFromAction(): Promise<void> {\n\t\tif (!this._outputView.isExpanded) {\n\t\t\tawait this._toggleOutput(true);\n\t\t\treturn;\n\t\t}\n\t\tawait this._toggleOutput(false);\n\t}\n\n\tprivate async _collapseOutputAndFocusInput(): Promise<void> {\n\t\tif (this._outputView.isExpanded) {\n\t\t\tawait this._toggleOutput(false);\n\t\t}\n\t\tthis._focusChatInput();\n\t}\n\n\tprivate _resolveCommand(instance: ITerminalInstance): ITerminalCommand | undefined {\n\t\tconst commandDetection = instance.capabilities.get(TerminalCapability.CommandDetection);\n\t\tconst commands = commandDetection?.commands;\n\t\tif (!commands || commands.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn commands.find(c => c.id === this._terminalData.terminalCommandId);\n\t}\n}\n\ninterface ChatTerminalToolOutputSectionOptions {\n\tcontainer: HTMLElement;\n\ttitle: HTMLElement;\n\tdisplayCommand: string;\n\tterminalData: IChatTerminalToolInvocationData;\n\taccessibleViewService: IAccessibleViewService;\n\tonDidChangeHeight: () => void;\n\tensureTerminalInstance: () => Promise<ITerminalInstance | undefined>;\n\tresolveCommand: () => ITerminalCommand | undefined;\n\tgetTerminalTheme: () => { background?: string; foreground?: string } | undefined;\n\tgetStoredCommandId: () => string | undefined;\n}\n\nclass ChatTerminalToolOutputSection extends Disposable {\n\tpublic readonly onDidFocus: Event<void>;\n\tpublic readonly onDidBlur: Event<FocusEvent>;\n\n\tpublic get isExpanded(): boolean {\n\t\treturn this._container.classList.contains('expanded');\n\t}\n\n\tprivate readonly _container: HTMLElement;\n\tprivate readonly _title: HTMLElement;\n\tprivate readonly _displayCommand: string;\n\tprivate readonly _terminalData: IChatTerminalToolInvocationData;\n\tprivate readonly _accessibleViewService: IAccessibleViewService;\n\tprivate readonly _onDidChangeHeight: () => void;\n\tprivate readonly _ensureTerminalInstance: () => Promise<ITerminalInstance | undefined>;\n\tprivate readonly _resolveCommand: () => ITerminalCommand | undefined;\n\tprivate readonly _getTerminalTheme: () => { background?: string; foreground?: string } | undefined;\n\tprivate readonly _getStoredCommandId: () => string | undefined;\n\n\tprivate readonly _outputBody: HTMLElement;\n\tprivate _outputScrollbar: DomScrollableElement | undefined;\n\tprivate _outputContent: HTMLElement | undefined;\n\tprivate _outputResizeObserver: ResizeObserver | undefined;\n\tprivate _renderedOutputHeight: number | undefined;\n\tprivate _lastOutputTruncated = false;\n\tprivate readonly _outputAriaLabelBase: string;\n\n\tprivate readonly _onDidFocusEmitter = new Emitter<void>();\n\tprivate readonly _onDidBlurEmitter = new Emitter<FocusEvent>();\n\n\tconstructor(options: ChatTerminalToolOutputSectionOptions) {\n\t\tsuper();\n\t\tthis._container = options.container;\n\t\tthis._title = options.title;\n\t\tthis._displayCommand = options.displayCommand;\n\t\tthis._terminalData = options.terminalData;\n\t\tthis._accessibleViewService = options.accessibleViewService;\n\t\tthis._onDidChangeHeight = options.onDidChangeHeight;\n\t\tthis._ensureTerminalInstance = options.ensureTerminalInstance;\n\t\tthis._resolveCommand = options.resolveCommand;\n\t\tthis._getTerminalTheme = options.getTerminalTheme;\n\t\tthis._getStoredCommandId = options.getStoredCommandId;\n\t\tthis._outputAriaLabelBase = localize('chatTerminalOutputAriaLabel', 'Terminal output for {0}', this._displayCommand);\n\n\t\tthis._container.classList.add('collapsed');\n\t\tthis._outputBody = dom.$('.chat-terminal-output-body');\n\n\t\tthis.onDidFocus = this._onDidFocusEmitter.event;\n\t\tthis.onDidBlur = this._onDidBlurEmitter.event;\n\t\tthis._register(this._onDidFocusEmitter);\n\t\tthis._register(this._onDidBlurEmitter);\n\n\t\tthis._register(dom.addDisposableListener(this._container, dom.EventType.FOCUS_IN, () => this._onDidFocusEmitter.fire()));\n\t\tthis._register(dom.addDisposableListener(this._container, dom.EventType.FOCUS_OUT, event => this._onDidBlurEmitter.fire(event as FocusEvent)));\n\t}\n\n\tpublic async toggle(expanded: boolean): Promise<boolean> {\n\t\tconst currentlyExpanded = this.isExpanded;\n\t\tif (expanded === currentlyExpanded) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._setExpanded(expanded);\n\n\t\tif (!expanded) {\n\t\t\tthis._renderedOutputHeight = undefined;\n\t\t\tthis._onDidChangeHeight();\n\t\t\treturn true;\n\t\t}\n\n\t\tconst didCreate = await this._renderOutputIfNeeded();\n\t\tthis._layoutOutput();\n\t\tthis._scrollOutputToBottom();\n\t\tif (didCreate) {\n\t\t\tthis._scheduleOutputRelayout();\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic async ensureRendered(): Promise<void> {\n\t\tawait this._renderOutputIfNeeded();\n\t\tif (this.isExpanded) {\n\t\t\tthis._layoutOutput();\n\t\t\tthis._scrollOutputToBottom();\n\t\t}\n\t}\n\n\tpublic focus(): void {\n\t\tthis._outputScrollbar?.getDomNode().focus();\n\t}\n\n\tpublic containsElement(element: HTMLElement | null): boolean {\n\t\treturn !!element && this._container.contains(element);\n\t}\n\n\tpublic updateAriaLabel(): void {\n\t\tif (!this._outputScrollbar) {\n\t\t\treturn;\n\t\t}\n\t\tconst scrollableDomNode = this._outputScrollbar.getDomNode();\n\t\tscrollableDomNode.setAttribute('role', 'region');\n\t\tconst accessibleViewHint = this._accessibleViewService.getOpenAriaHint(AccessibilityVerbositySettingId.TerminalChatOutput);\n\t\tconst label = accessibleViewHint\n\t\t\t? this._outputAriaLabelBase + ', ' + accessibleViewHint\n\t\t\t: this._outputAriaLabelBase;\n\t\tscrollableDomNode.setAttribute('aria-label', label);\n\t}\n\n\tpublic getCommandAndOutputAsText(): string | undefined {\n\t\tconst commandHeader = localize('chatTerminalOutputAccessibleViewHeader', 'Command: {0}', this._displayCommand);\n\t\tconst command = this._resolveCommand();\n\t\tconst output = command?.getOutput()?.trimEnd();\n\t\tif (!output) {\n\t\t\treturn `${commandHeader}\\n${localize('chat.terminalOutputEmpty', 'No output was produced by the command.')}`;\n\t\t}\n\t\tlet result = `${commandHeader}\\n${output}`;\n\t\tif (this._lastOutputTruncated) {\n\t\t\tresult += `\\n\\n${localize('chat.terminalOutputTruncated', 'Output truncated to first {0} lines.', CHAT_TERMINAL_OUTPUT_MAX_PREVIEW_LINES)}`;\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _setExpanded(expanded: boolean): void {\n\t\tthis._container.classList.toggle('expanded', expanded);\n\t\tthis._container.classList.toggle('collapsed', !expanded);\n\t\tthis._title.classList.toggle('expanded', expanded);\n\t}\n\n\tprivate async _renderOutputIfNeeded(): Promise<boolean> {\n\t\tif (this._outputContent) {\n\t\t\tthis._ensureOutputResizeObserver();\n\t\t\treturn false;\n\t\t}\n\n\t\tconst terminalInstance = await this._ensureTerminalInstance();\n\t\tconst output = await this._collectOutput(terminalInstance);\n\t\tconst serializedOutput = output ?? this._getStoredCommandOutput();\n\t\tif (!serializedOutput) {\n\t\t\treturn false;\n\t\t}\n\t\tconst content = this._renderOutput(serializedOutput).element;\n\t\tconst theme = this._getTerminalTheme();\n\t\tif (theme && !content.classList.contains('chat-terminal-output-content-empty')) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst inlineTerminal = content.querySelector('div');\n\t\t\tif (inlineTerminal) {\n\t\t\t\tinlineTerminal.style.setProperty('background-color', theme.background || 'transparent');\n\t\t\t\tinlineTerminal.style.setProperty('color', theme.foreground || 'inherit');\n\t\t\t}\n\t\t}\n\n\t\tthis._outputBody.replaceChildren(content);\n\t\tthis._outputContent = content;\n\t\tif (!this._outputScrollbar) {\n\t\t\tthis._outputScrollbar = this._register(new DomScrollableElement(this._outputBody, {\n\t\t\t\tvertical: ScrollbarVisibility.Auto,\n\t\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\t\thandleMouseWheel: true\n\t\t\t}));\n\t\t\tconst scrollableDomNode = this._outputScrollbar.getDomNode();\n\t\t\tscrollableDomNode.tabIndex = 0;\n\t\t\tscrollableDomNode.style.maxHeight = `${MAX_TERMINAL_OUTPUT_PREVIEW_HEIGHT}px`;\n\t\t\tthis._container.appendChild(scrollableDomNode);\n\t\t\tthis._ensureOutputResizeObserver();\n\t\t\tthis._outputContent = undefined;\n\t\t\tthis._renderedOutputHeight = undefined;\n\t\t} else {\n\t\t\tthis._ensureOutputResizeObserver();\n\t\t}\n\t\tthis.updateAriaLabel();\n\t\treturn true;\n\t}\n\n\tprivate async _collectOutput(terminalInstance: ITerminalInstance | undefined): Promise<{ text: string; truncated: boolean } | undefined> {\n\t\tconst commandDetection = terminalInstance?.capabilities.get(TerminalCapability.CommandDetection);\n\t\tconst commands = commandDetection?.commands;\n\t\tconst xterm = await terminalInstance?.xtermReadyPromise;\n\t\tif (!commands || commands.length === 0 || !terminalInstance || !xterm) {\n\t\t\treturn;\n\t\t}\n\t\tconst commandId = this._terminalData.terminalCommandId ?? this._getStoredCommandId();\n\t\tif (!commandId) {\n\t\t\treturn;\n\t\t}\n\t\tconst command = commands.find(c => c.id === commandId);\n\t\tif (!command?.endMarker) {\n\t\t\treturn;\n\t\t}\n\t\tconst result = await xterm.getCommandOutputAsHtml(command, CHAT_TERMINAL_OUTPUT_MAX_PREVIEW_LINES);\n\t\treturn { text: result.text, truncated: result.truncated ?? false };\n\t}\n\n\tprivate _getStoredCommandOutput(): { text: string; truncated: boolean } | undefined {\n\t\tconst stored = this._terminalData.terminalCommandOutput;\n\t\tif (!stored?.text) {\n\t\t\treturn;\n\t\t}\n\t\treturn {\n\t\t\ttext: stored.text,\n\t\t\ttruncated: stored.truncated ?? false\n\t\t};\n\t}\n\n\tprivate _renderOutput(result: { text: string; truncated: boolean }): { element: HTMLElement; inlineOutput?: HTMLElement; pre?: HTMLElement } {\n\t\tthis._lastOutputTruncated = result.truncated;\n\t\tconst { content } = h('div.chat-terminal-output-content@content');\n\t\tlet inlineOutput: HTMLElement | undefined;\n\t\tlet preElement: HTMLElement | undefined;\n\n\t\tif (result.text.trim() === '') {\n\t\t\tcontent.classList.add('chat-terminal-output-content-empty');\n\t\t\tconst { empty } = h('div.chat-terminal-output-empty@empty');\n\t\t\tempty.textContent = localize('chat.terminalOutputEmpty', 'No output was produced by the command.');\n\t\t\tcontent.appendChild(empty);\n\t\t} else {\n\t\t\tconst { pre } = h('pre.chat-terminal-output@pre');\n\t\t\tpreElement = pre;\n\t\t\tdomSanitize.safeSetInnerHtml(pre, result.text, sanitizerConfig);\n\t\t\tconst firstChild = pre.firstElementChild;\n\t\t\tif (dom.isHTMLElement(firstChild)) {\n\t\t\t\tinlineOutput = firstChild;\n\t\t\t}\n\t\t\tcontent.appendChild(pre);\n\t\t}\n\n\t\tif (result.truncated) {\n\t\t\tconst { info } = h('div.chat-terminal-output-info@info');\n\t\t\tinfo.textContent = localize('chat.terminalOutputTruncated', 'Output truncated to first {0} lines.', CHAT_TERMINAL_OUTPUT_MAX_PREVIEW_LINES);\n\t\t\tcontent.appendChild(info);\n\t\t}\n\n\t\treturn { element: content, inlineOutput, pre: preElement };\n\t}\n\n\tprivate _scheduleOutputRelayout(): void {\n\t\tdom.getActiveWindow().requestAnimationFrame(() => {\n\t\t\tthis._layoutOutput();\n\t\t\tthis._scrollOutputToBottom();\n\t\t});\n\t}\n\n\tprivate _layoutOutput(): void {\n\t\tif (!this._outputScrollbar || !this.isExpanded) {\n\t\t\treturn;\n\t\t}\n\t\tconst scrollableDomNode = this._outputScrollbar.getDomNode();\n\t\tconst viewportHeight = Math.min(this._getOutputContentHeight(), MAX_TERMINAL_OUTPUT_PREVIEW_HEIGHT);\n\t\tscrollableDomNode.style.height = `${viewportHeight}px`;\n\t\tthis._outputScrollbar.scanDomNode();\n\t\tif (this._renderedOutputHeight !== viewportHeight) {\n\t\t\tthis._renderedOutputHeight = viewportHeight;\n\t\t\tthis._onDidChangeHeight();\n\t\t}\n\t}\n\n\tprivate _scrollOutputToBottom(): void {\n\t\tif (!this._outputScrollbar) {\n\t\t\treturn;\n\t\t}\n\t\tconst dimensions = this._outputScrollbar.getScrollDimensions();\n\t\tthis._outputScrollbar.setScrollPosition({ scrollTop: dimensions.scrollHeight });\n\t}\n\n\tprivate _getOutputContentHeight(): number {\n\t\tconst firstChild = this._outputBody.firstElementChild as HTMLElement | null;\n\t\tif (!firstChild) {\n\t\t\treturn this._outputBody.scrollHeight;\n\t\t}\n\t\tconst style = dom.getComputedStyle(this._outputBody);\n\t\tconst paddingTop = Number.parseFloat(style.paddingTop || '0');\n\t\tconst paddingBottom = Number.parseFloat(style.paddingBottom || '0');\n\t\tconst padding = paddingTop + paddingBottom;\n\t\treturn firstChild.scrollHeight + padding;\n\t}\n\n\tprivate _ensureOutputResizeObserver(): void {\n\t\tif (this._outputResizeObserver || !this._outputScrollbar) {\n\t\t\treturn;\n\t\t}\n\t\tconst observer = new ResizeObserver(() => this._layoutOutput());\n\t\tobserver.observe(this._container);\n\t\tthis._outputResizeObserver = observer;\n\t\tthis._register(toDisposable(() => {\n\t\t\tobserver.disconnect();\n\t\t\tthis._outputResizeObserver = undefined;\n\t\t}));\n\t}\n}\n\nexport const focusMostRecentChatTerminalCommandId = 'workbench.action.chat.focusMostRecentChatTerminal';\nexport const focusMostRecentChatTerminalOutputCommandId = 'workbench.action.chat.focusMostRecentChatTerminalOutput';\n\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: focusMostRecentChatTerminalCommandId,\n\tweight: KeybindingWeight.WorkbenchContrib,\n\twhen: ChatContextKeys.inChatSession,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyMod.Alt | KeyCode.KeyT,\n\thandler: async (accessor: ServicesAccessor) => {\n\t\tconst terminalChatService = accessor.get(ITerminalChatService);\n\t\tconst part = terminalChatService.getMostRecentProgressPart();\n\t\tif (!part) {\n\t\t\treturn;\n\t\t}\n\t\tawait part.focusTerminal();\n\t}\n});\n\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n\tid: focusMostRecentChatTerminalOutputCommandId,\n\tweight: KeybindingWeight.WorkbenchContrib,\n\twhen: ChatContextKeys.inChatSession,\n\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyMod.Alt | KeyCode.KeyO,\n\thandler: async (accessor: ServicesAccessor) => {\n\t\tconst terminalChatService = accessor.get(ITerminalChatService);\n\t\tconst part = terminalChatService.getMostRecentProgressPart();\n\t\tif (!part) {\n\t\t\treturn;\n\t\t}\n\t\tawait part.toggleOutputFromKeyboard();\n\t}\n});\n\nMenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\tcommand: {\n\t\tid: focusMostRecentChatTerminalCommandId,\n\t\ttitle: localize('chat.focusMostRecentTerminal', 'Chat: Focus Most Recent Terminal'),\n\t},\n\twhen: ChatContextKeys.inChatSession\n});\n\nMenuRegistry.appendMenuItem(MenuId.CommandPalette, {\n\tcommand: {\n\t\tid: focusMostRecentChatTerminalOutputCommandId,\n\t\ttitle: localize('chat.focusMostRecentTerminalOutput', 'Chat: Focus Most Recent Terminal Output'),\n\t},\n\twhen: ChatContextKeys.inChatSession\n});\n\nexport const openTerminalSettingsLinkCommandId = '_chat.openTerminalSettingsLink';\nexport const disableSessionAutoApprovalCommandId = '_chat.disableSessionAutoApproval';\n\nCommandsRegistry.registerCommand(openTerminalSettingsLinkCommandId, async (accessor, scopeRaw: string) => {\n\tconst preferencesService = accessor.get(IPreferencesService);\n\n\tif (scopeRaw === 'global') {\n\t\tpreferencesService.openSettings({\n\t\t\tquery: `@id:${ChatConfiguration.GlobalAutoApprove}`\n\t\t});\n\t} else {\n\t\tconst scope = parseInt(scopeRaw);\n\t\tconst target = !isNaN(scope) ? scope as ConfigurationTarget : undefined;\n\t\tconst options: IOpenSettingsOptions = {\n\t\t\tjsonEditor: true,\n\t\t\trevealSetting: {\n\t\t\t\tkey: TerminalContribSettingId.AutoApprove\n\t\t\t}\n\t\t};\n\t\tswitch (target) {\n\t\t\tcase ConfigurationTarget.APPLICATION: preferencesService.openApplicationSettings(options); break;\n\t\t\tcase ConfigurationTarget.USER:\n\t\t\tcase ConfigurationTarget.USER_LOCAL: preferencesService.openUserSettings(options); break;\n\t\t\tcase ConfigurationTarget.USER_REMOTE: preferencesService.openRemoteSettings(options); break;\n\t\t\tcase ConfigurationTarget.WORKSPACE:\n\t\t\tcase ConfigurationTarget.WORKSPACE_FOLDER: preferencesService.openWorkspaceSettings(options); break;\n\t\t\tdefault: {\n\t\t\t\t// Fallback if something goes wrong\n\t\t\t\tpreferencesService.openSettings({\n\t\t\t\t\ttarget: ConfigurationTarget.USER,\n\t\t\t\t\tquery: `@id:${TerminalContribSettingId.AutoApprove}`,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n});\n\nCommandsRegistry.registerCommand(disableSessionAutoApprovalCommandId, async (accessor, chatSessionId: string) => {\n\tconst terminalChatService = accessor.get(ITerminalChatService);\n\tterminalChatService.setChatSessionAutoApproval(chatSessionId, false);\n});\n\n\nclass ToggleChatTerminalOutputAction extends Action implements IAction {\n\tprivate _expanded = false;\n\n\tconstructor(\n\t\tprivate readonly _toggle: () => Promise<void>,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(\n\t\t\t'chat.showTerminalOutput',\n\t\t\tlocalize('showTerminalOutput', 'Show Output'),\n\t\t\tThemeIcon.asClassName(Codicon.chevronRight),\n\t\t\ttrue,\n\t\t);\n\t\tthis._updateTooltip();\n\t}\n\n\tpublic override async run(): Promise<void> {\n\t\tawait this._toggle();\n\t}\n\n\tpublic syncPresentation(expanded: boolean): void {\n\t\tthis._expanded = expanded;\n\t\tthis._updatePresentation();\n\t\tthis._updateTooltip();\n\t}\n\n\tpublic refreshKeybindingTooltip(): void {\n\t\tthis._updateTooltip();\n\t}\n\n\tprivate _updatePresentation(): void {\n\t\tif (this._expanded) {\n\t\t\tthis.label = localize('hideTerminalOutput', 'Hide Output');\n\t\t\tthis.class = ThemeIcon.asClassName(Codicon.chevronDown);\n\t\t} else {\n\t\t\tthis.label = localize('showTerminalOutput', 'Show Output');\n\t\t\tthis.class = ThemeIcon.asClassName(Codicon.chevronRight);\n\t\t}\n\t}\n\n\tprivate _updateTooltip(): void {\n\t\tconst keybinding = this._keybindingService.lookupKeybinding(focusMostRecentChatTerminalOutputCommandId);\n\t\tconst label = keybinding?.getLabel();\n\t\tthis.tooltip = label ? `${this.label} (${label})` : this.label;\n\t}\n}\n\nexport class FocusChatInstanceAction extends Action implements IAction {\n\tconstructor(\n\t\tprivate _instance: ITerminalInstance | undefined,\n\t\tprivate _command: ITerminalCommand | undefined,\n\t\tprivate readonly _commandUri: URI | undefined,\n\t\tprivate readonly _commandId: string | undefined,\n\t\tisTerminalHidden: boolean,\n\t\t@ITerminalService private readonly _terminalService: ITerminalService,\n\t\t@ITerminalEditorService private readonly _terminalEditorService: ITerminalEditorService,\n\t\t@ITerminalGroupService private readonly _terminalGroupService: ITerminalGroupService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(\n\t\t\t'chat.focusTerminalInstance',\n\t\t\tisTerminalHidden ? localize('showTerminal', 'Show and Focus Terminal') : localize('focusTerminal', 'Focus Terminal'),\n\t\t\tThemeIcon.asClassName(Codicon.openInProduct),\n\t\t\ttrue,\n\t\t);\n\t\tthis._updateTooltip();\n\t}\n\n\tpublic override async run() {\n\t\tthis.label = localize('focusTerminal', 'Focus Terminal');\n\t\tthis._updateTooltip();\n\t\tif (this._instance) {\n\t\t\tthis._terminalService.setActiveInstance(this._instance);\n\t\t\tif (this._instance.target === TerminalLocation.Editor) {\n\t\t\t\tthis._terminalEditorService.openEditor(this._instance);\n\t\t\t} else {\n\t\t\t\tawait this._terminalGroupService.showPanel(true);\n\t\t\t}\n\t\t\tthis._terminalService.setActiveInstance(this._instance);\n\t\t\tawait this._instance.focusWhenReady(true);\n\t\t\tconst command = this._resolveCommand();\n\t\t\tif (command) {\n\t\t\t\tthis._instance.xterm?.markTracker.revealCommand(command);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._commandUri) {\n\t\t\tthis._terminalService.openResource(this._commandUri);\n\t\t}\n\t}\n\n\tpublic refreshKeybindingTooltip(): void {\n\t\tthis._updateTooltip();\n\t}\n\n\tprivate _resolveCommand(): ITerminalCommand | undefined {\n\t\tif (this._command && !this._command.endMarker?.isDisposed) {\n\t\t\treturn this._command;\n\t\t}\n\t\tif (!this._instance || !this._commandId) {\n\t\t\treturn this._command;\n\t\t}\n\t\tconst commandDetection = this._instance.capabilities.get(TerminalCapability.CommandDetection);\n\t\tconst resolved = commandDetection?.commands.find(c => c.id === this._commandId);\n\t\tif (resolved) {\n\t\t\tthis._command = resolved;\n\t\t}\n\t\treturn this._command;\n\t}\n\n\tprivate _updateTooltip(): void {\n\t\tconst keybinding = this._keybindingService.lookupKeybinding(focusMostRecentChatTerminalCommandId);\n\t\tconst label = keybinding?.getLabel();\n\t\tthis.tooltip = label ? `${this.label} (${label})` : this.label;\n\t}\n}\n"]}