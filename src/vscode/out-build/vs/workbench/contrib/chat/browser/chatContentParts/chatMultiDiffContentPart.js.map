{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/chatMultiDiffContentPart.ts"],"names":[],"mappings":"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","file":"chatMultiDiffContentPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { ActionBar, ActionsOrientation } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { ButtonWithIcon } from '../../../../../base/browser/ui/button/button.js';\nimport { IListRenderer, IListVirtualDelegate } from '../../../../../base/browser/ui/list/list.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../../base/common/marshallingIds.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { localize } from '../../../../../nls.js';\nimport { IMenuService, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { FileKind } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { WorkbenchList } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IResourceLabel, ResourceLabels } from '../../../../browser/labels.js';\nimport { ACTIVE_GROUP, IEditorService, SIDE_GROUP } from '../../../../services/editor/common/editorService.js';\nimport { createFileIconThemableTreeContainerScope } from '../../../files/browser/views/explorerView.js';\nimport { MultiDiffEditorInput } from '../../../multiDiffEditor/browser/multiDiffEditorInput.js';\nimport { MultiDiffEditorItem } from '../../../multiDiffEditor/browser/multiDiffSourceResolverService.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IEditSessionEntryDiff } from '../../common/chatEditingService.js';\nimport { IChatMultiDiffData } from '../../common/chatService.js';\nimport { IChatRendererContent } from '../../common/chatViewModel.js';\nimport { ChatTreeItem } from '../chat.js';\nimport { ChatEditorInput } from '../chatEditorInput.js';\nimport { IChatContentPart } from './chatContentParts.js';\n\nconst $ = dom.$;\n\ninterface IChatMultiDiffItem {\n\turi: URI;\n\tdiff?: IEditSessionEntryDiff;\n}\n\nconst ELEMENT_HEIGHT = 22;\nconst MAX_ITEMS_SHOWN = 6;\n\nexport class ChatMultiDiffContentPart extends Disposable implements IChatContentPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly _onDidChangeHeight = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tprivate list!: WorkbenchList<IChatMultiDiffItem>;\n\tprivate isCollapsed: boolean = false;\n\tprivate readonly readOnly: boolean;\n\n\tconstructor(\n\t\tprivate readonly content: IChatMultiDiffData,\n\t\t_element: ChatTreeItem,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\n\t\tthis.readOnly = content.readOnly ?? false;\n\n\t\tconst headerDomNode = $('.checkpoint-file-changes-summary-header');\n\t\tthis.domNode = $('.checkpoint-file-changes-summary', undefined, headerDomNode);\n\t\tthis.domNode.tabIndex = 0;\n\n\t\tthis._register(this.renderHeader(headerDomNode));\n\t\tthis._register(this.renderFilesList(this.domNode));\n\t}\n\n\tprivate renderHeader(container: HTMLElement): IDisposable {\n\t\tconst fileCount = this.content.multiDiffData.resources.length;\n\n\t\tconst viewListButtonContainer = container.appendChild($('.chat-file-changes-label'));\n\t\tconst viewListButton = new ButtonWithIcon(viewListButtonContainer, {});\n\t\tviewListButton.label = fileCount === 1\n\t\t\t? localize('chatMultiDiff.oneFile', 'Changed 1 file')\n\t\t\t: localize('chatMultiDiff.manyFiles', 'Changed {0} files', fileCount);\n\n\t\tconst setExpansionState = () => {\n\t\t\tviewListButton.icon = this.isCollapsed ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t\tthis.domNode.classList.toggle('chat-file-changes-collapsed', this.isCollapsed);\n\t\t\tthis._onDidChangeHeight.fire();\n\t\t};\n\t\tsetExpansionState();\n\n\t\tconst disposables = new DisposableStore();\n\t\tdisposables.add(viewListButton);\n\t\tdisposables.add(viewListButton.onDidClick(() => {\n\t\t\tthis.isCollapsed = !this.isCollapsed;\n\t\t\tsetExpansionState();\n\t\t}));\n\t\tif (!this.readOnly) {\n\t\t\tdisposables.add(this.renderViewAllFileChangesButton(viewListButton.element));\n\t\t}\n\t\tdisposables.add(this.renderContributedButtons(viewListButton.element));\n\t\treturn toDisposable(() => disposables.dispose());\n\t}\n\n\tprivate renderViewAllFileChangesButton(container: HTMLElement): IDisposable {\n\t\tconst button = container.appendChild($('.chat-view-changes-icon'));\n\t\tbutton.classList.add(...ThemeIcon.asClassNameArray(Codicon.diffMultiple));\n\t\tbutton.title = localize('chatMultiDiff.openAllChanges', 'Open Changes');\n\n\t\treturn dom.addDisposableListener(button, 'click', (e) => {\n\t\t\tconst source = URI.parse(`multi-diff-editor:${new Date().getMilliseconds().toString() + Math.random().toString()}`);\n\t\t\tconst input = this.instantiationService.createInstance(\n\t\t\t\tMultiDiffEditorInput,\n\t\t\t\tsource,\n\t\t\t\tthis.content.multiDiffData.title || 'Multi-Diff',\n\t\t\t\tthis.content.multiDiffData.resources.map(resource => new MultiDiffEditorItem(\n\t\t\t\t\tresource.originalUri,\n\t\t\t\t\tresource.modifiedUri,\n\t\t\t\t\tresource.goToFileUri\n\t\t\t\t)),\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tconst sideBySide = e.altKey;\n\t\t\tthis.editorService.openEditor(input, sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\t\t\tdom.EventHelper.stop(e, true);\n\t\t});\n\t}\n\n\tprivate renderContributedButtons(container: HTMLElement): IDisposable {\n\t\tconst buttonsContainer = container.appendChild($('.chat-multidiff-contributed-buttons'));\n\t\tconst disposables = new DisposableStore();\n\t\tconst actionBar = disposables.add(new ActionBar(buttonsContainer, {\n\t\t\torientation: ActionsOrientation.HORIZONTAL\n\t\t}));\n\t\tconst setupActionBar = () => {\n\t\t\tactionBar.clear();\n\n\t\t\tlet marshalledUri: any | undefined = undefined;\n\t\t\tlet contextKeyService: IContextKeyService = this.contextKeyService;\n\t\t\tif (this.editorService.activeEditor instanceof ChatEditorInput) {\n\t\t\t\tcontextKeyService = this.contextKeyService.createOverlay([\n\t\t\t\t\t[ChatContextKeys.sessionType.key, this.editorService.activeEditor.getSessionType()]\n\t\t\t\t]);\n\n\t\t\t\tmarshalledUri = {\n\t\t\t\t\t...this.editorService.activeEditor.resource,\n\t\t\t\t\t$mid: MarshalledId.Uri\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst actions = this.menuService.getMenuActions(\n\t\t\t\tMenuId.ChatMultiDiffContext,\n\t\t\t\tcontextKeyService,\n\t\t\t\t{ arg: marshalledUri, shouldForwardArgs: true }\n\t\t\t);\n\t\t\tconst allActions = actions.flatMap(([, actions]) => actions);\n\t\t\tif (allActions.length > 0) {\n\t\t\t\tactionBar.push(allActions, { icon: true, label: false });\n\t\t\t}\n\t\t};\n\t\tsetupActionBar();\n\t\treturn disposables;\n\t}\n\n\tprivate renderFilesList(container: HTMLElement): IDisposable {\n\t\tconst store = new DisposableStore();\n\n\t\tconst listContainer = container.appendChild($('.chat-summary-list'));\n\t\tstore.add(createFileIconThemableTreeContainerScope(listContainer, this.themeService));\n\t\tconst resourceLabels = store.add(this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: Event.None }));\n\n\t\tthis.list = store.add(this.instantiationService.createInstance(\n\t\t\tWorkbenchList<IChatMultiDiffItem>,\n\t\t\t'ChatMultiDiffList',\n\t\t\tlistContainer,\n\t\t\tnew ChatMultiDiffListDelegate(),\n\t\t\t[this.instantiationService.createInstance(ChatMultiDiffListRenderer, resourceLabels)],\n\t\t\t{\n\t\t\t\tidentityProvider: {\n\t\t\t\t\tgetId: (element: IChatMultiDiffItem) => element.uri.toString()\n\t\t\t\t},\n\t\t\t\tsetRowLineHeight: true,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tsupportDynamicHeights: false,\n\t\t\t\tmouseSupport: !this.readOnly,\n\t\t\t\talwaysConsumeMouseWheel: false,\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel: (element: IChatMultiDiffItem) => element.uri.path,\n\t\t\t\t\tgetWidgetAriaLabel: () => localize('chatMultiDiffList', \"File Changes\")\n\t\t\t\t}\n\t\t\t}\n\t\t));\n\n\t\tconst items: IChatMultiDiffItem[] = [];\n\t\tfor (const resource of this.content.multiDiffData.resources) {\n\t\t\tconst uri = resource.modifiedUri || resource.originalUri || resource.goToFileUri;\n\t\t\tif (!uri) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst item: IChatMultiDiffItem = { uri };\n\n\t\t\tif (resource.originalUri && resource.modifiedUri) {\n\t\t\t\titem.diff = {\n\t\t\t\t\toriginalURI: resource.originalUri,\n\t\t\t\t\tmodifiedURI: resource.modifiedUri,\n\t\t\t\t\tisFinal: true,\n\t\t\t\t\tquitEarly: false,\n\t\t\t\t\tidentical: false,\n\t\t\t\t\tadded: resource.added || 0,\n\t\t\t\t\tremoved: resource.removed || 0\n\t\t\t\t};\n\t\t\t}\n\t\t\titems.push(item);\n\t\t}\n\n\t\tthis.list.splice(0, this.list.length, items);\n\n\t\tconst height = Math.min(items.length, MAX_ITEMS_SHOWN) * ELEMENT_HEIGHT;\n\t\tthis.list.layout(height);\n\t\tlistContainer.style.height = `${height}px`;\n\n\t\tif (!this.readOnly) {\n\t\t\tstore.add(this.list.onDidOpen((e) => {\n\t\t\t\tif (!e.element) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.element.diff) {\n\t\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\t\toriginal: { resource: e.element.diff.originalURI },\n\t\t\t\t\t\tmodified: { resource: e.element.diff.modifiedURI },\n\t\t\t\t\t\toptions: { preserveFocus: true }\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\t\tresource: e.element.uri,\n\t\t\t\t\t\toptions: { preserveFocus: true }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\treturn store;\n\t}\n\n\thasSameContent(other: IChatRendererContent): boolean {\n\t\treturn other.kind === 'multiDiffData' &&\n\t\t\tother.multiDiffData?.resources?.length === this.content.multiDiffData.resources.length;\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n}\n\nclass ChatMultiDiffListDelegate implements IListVirtualDelegate<IChatMultiDiffItem> {\n\tgetHeight(): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(): string {\n\t\treturn 'chatMultiDiffItem';\n\t}\n}\n\ninterface IChatMultiDiffItemTemplate extends IDisposable {\n\treadonly label: IResourceLabel;\n}\n\nclass ChatMultiDiffListRenderer implements IListRenderer<IChatMultiDiffItem, IChatMultiDiffItemTemplate> {\n\tstatic readonly TEMPLATE_ID = 'chatMultiDiffItem';\n\tstatic readonly CHANGES_SUMMARY_CLASS_NAME = 'insertions-and-deletions';\n\n\treadonly templateId: string = ChatMultiDiffListRenderer.TEMPLATE_ID;\n\n\tconstructor(private labels: ResourceLabels) { }\n\n\trenderTemplate(container: HTMLElement): IChatMultiDiffItemTemplate {\n\t\tconst label = this.labels.create(container, { supportHighlights: true, supportIcons: true });\n\n\t\treturn {\n\t\t\tlabel,\n\t\t\tdispose: () => label.dispose()\n\t\t};\n\t}\n\n\trenderElement(element: IChatMultiDiffItem, _index: number, templateData: IChatMultiDiffItemTemplate): void {\n\t\ttemplateData.label.setFile(element.uri, {\n\t\t\tfileKind: FileKind.FILE,\n\t\t\ttitle: element.uri.path\n\t\t});\n\n\t\tconst labelElement = templateData.label.element;\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tlabelElement.querySelector(`.${ChatMultiDiffListRenderer.CHANGES_SUMMARY_CLASS_NAME}`)?.remove();\n\n\t\tif (element.diff?.added || element.diff?.removed) {\n\t\t\tconst changesSummary = labelElement.appendChild($(`.${ChatMultiDiffListRenderer.CHANGES_SUMMARY_CLASS_NAME}`));\n\n\t\t\tconst addedElement = changesSummary.appendChild($('.insertions'));\n\t\t\taddedElement.textContent = `+${element.diff.added}`;\n\n\t\t\tconst removedElement = changesSummary.appendChild($('.deletions'));\n\t\t\tremovedElement.textContent = `-${element.diff.removed}`;\n\n\t\t\tchangesSummary.setAttribute('aria-label', localize('chatEditingSession.fileCounts', '{0} lines added, {1} lines removed', element.diff.added, element.diff.removed));\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: IChatMultiDiffItemTemplate): void {\n\t\ttemplateData.dispose();\n\t}\n}\n"]}