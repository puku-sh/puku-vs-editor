{"version":3,"sources":["vs/workbench/contrib/chat/browser/contrib/chatInputEditorHover.ts"],"names":[],"mappings":"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","file":"chatInputEditorHover.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { IModelDecoration } from '../../../../../editor/common/model.js';\nimport { HoverAnchor, HoverAnchorType, HoverParticipantRegistry, IEditorHoverParticipant, IEditorHoverRenderContext, IHoverPart, IRenderedHoverPart, IRenderedHoverParts, RenderedHoverParts } from '../../../../../editor/contrib/hover/browser/hoverTypes.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IChatWidgetService } from '../chat.js';\nimport { ChatAgentHover, getChatAgentHoverOptions } from '../chatAgentHover.js';\nimport { ChatEditorHoverWrapper } from './editorHoverWrapper.js';\nimport { IChatAgentData } from '../../common/chatAgents.js';\nimport { extractAgentAndCommand } from '../../common/chatParserTypes.js';\nimport * as nls from '../../../../../nls.js';\n\nexport class ChatAgentHoverParticipant implements IEditorHoverParticipant<ChatAgentHoverPart> {\n\n\tpublic readonly hoverOrdinal: number = 1;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IChatWidgetService private readonly chatWidgetService: IChatWidgetService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t) { }\n\n\tpublic computeSync(anchor: HoverAnchor, _lineDecorations: IModelDecoration[]): ChatAgentHoverPart[] {\n\t\tif (!this.editor.hasModel()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst widget = this.chatWidgetService.getWidgetByInputUri(this.editor.getModel().uri);\n\t\tif (!widget) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst { agentPart } = extractAgentAndCommand(widget.parsedInput);\n\t\tif (!agentPart) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (Range.containsPosition(agentPart.editorRange, anchor.range.getStartPosition())) {\n\t\t\treturn [new ChatAgentHoverPart(this, Range.lift(agentPart.editorRange), agentPart.agent)];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\tpublic renderHoverParts(context: IEditorHoverRenderContext, hoverParts: ChatAgentHoverPart[]): IRenderedHoverParts<ChatAgentHoverPart> {\n\t\tif (!hoverParts.length) {\n\t\t\treturn new RenderedHoverParts([]);\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst hover = disposables.add(this.instantiationService.createInstance(ChatAgentHover));\n\t\tdisposables.add(hover.onDidChangeContents(() => context.onContentsChanged()));\n\t\tconst hoverPart = hoverParts[0];\n\t\tconst agent = hoverPart.agent;\n\t\thover.setAgent(agent.id);\n\n\t\tconst actions = getChatAgentHoverOptions(() => agent, this.commandService).actions;\n\t\tconst wrapper = this.instantiationService.createInstance(ChatEditorHoverWrapper, hover.domNode, actions);\n\t\tconst wrapperNode = wrapper.domNode;\n\t\tcontext.fragment.appendChild(wrapperNode);\n\t\tconst renderedHoverPart: IRenderedHoverPart<ChatAgentHoverPart> = {\n\t\t\thoverPart,\n\t\t\thoverElement: wrapperNode,\n\t\t\tdispose() { disposables.dispose(); }\n\t\t};\n\t\treturn new RenderedHoverParts([renderedHoverPart]);\n\t}\n\n\tpublic getAccessibleContent(hoverPart: ChatAgentHoverPart): string {\n\t\treturn nls.localize('hoverAccessibilityChatAgent', 'There is a chat agent hover part here.');\n\n\t}\n}\n\nexport class ChatAgentHoverPart implements IHoverPart {\n\n\tconstructor(\n\t\tpublic readonly owner: IEditorHoverParticipant<ChatAgentHoverPart>,\n\t\tpublic readonly range: Range,\n\t\tpublic readonly agent: IChatAgentData\n\t) { }\n\n\tpublic isValidForHoverAnchor(anchor: HoverAnchor): boolean {\n\t\treturn (\n\t\t\tanchor.type === HoverAnchorType.Range\n\t\t\t&& this.range.startColumn <= anchor.range.startColumn\n\t\t\t&& this.range.endColumn >= anchor.range.endColumn\n\t\t);\n\t}\n}\n\nHoverParticipantRegistry.register(ChatAgentHoverParticipant);\n"]}