{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/browser/chatEditing/chatEditingCheckpointTimeline.ts","vs/workbench/contrib/chat/browser/chatEditing/chatEditingCheckpointTimeline.ts"],"names":[],"mappings":"AAAA;;;gGAGgG","file":"chatEditingCheckpointTimeline.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, ITransaction } from '../../../../../base/common/observable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IEditSessionEntryDiff } from '../../common/chatEditingService.js';\nimport { IChatRequestDisablement } from '../../common/chatModel.js';\nimport { FileOperation, IChatEditingTimelineState, IFileBaseline } from './chatEditingOperations.js';\n\n/**\n * Interface for the new checkpoint-based timeline system\n */\nexport interface IChatEditingCheckpointTimeline {\n\treadonly requestDisablement: IObservable<IChatRequestDisablement[]>;\n\treadonly canUndo: IObservable<boolean>;\n\treadonly canRedo: IObservable<boolean>;\n\n\t// Checkpoint management\n\tcreateCheckpoint(requestId: string | undefined, undoStopId: string | undefined, label: string, description?: string): void;\n\tnavigateToCheckpoint(checkpointId: string): Promise<void>;\n\tundoToLastCheckpoint(): Promise<void>;\n\tredoToNextCheckpoint(): Promise<void>;\n\tgetCheckpointIdForRequest(requestId: string, undoStopId?: string): string | undefined;\n\n\t// Operation tracking\n\trecordFileOperation(operation: FileOperation): void;\n\tincrementEpoch(): number;\n\n\t// File baselines\n\trecordFileBaseline(baseline: IFileBaseline): void;\n\thasFileBaseline(uri: URI, requestId: string): boolean;\n\n\t// State reconstruction\n\tgetContentURIAtStop(requestId: string, fileURI: URI, stopId: string | undefined): URI;\n\tgetContentAtStop(requestId: string, contentURI: URI, stopId: string | undefined): Promise<string | VSBuffer | undefined>;\n\tonDidChangeContentsAtStop(requestId: string, contentURI: URI, stopId: string | undefined, callback: (data: string) => void): IDisposable;\n\n\t// Persistence\n\tgetStateForPersistence(): IChatEditingTimelineState;\n\trestoreFromState(state: IChatEditingTimelineState, tx: ITransaction): void;\n\n\t// Diffing\n\tgetEntryDiffBetweenStops(uri: URI, requestId: string | undefined, stopId: string | undefined): IObservable<IEditSessionEntryDiff | undefined> | undefined;\n\tgetEntryDiffBetweenRequests(uri: URI, startRequestId: string, stopRequestId: string): IObservable<IEditSessionEntryDiff | undefined>;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, ITransaction } from '../../../../../base/common/observable.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IEditSessionEntryDiff } from '../../common/chatEditingService.js';\nimport { IChatRequestDisablement } from '../../common/chatModel.js';\nimport { FileOperation, IChatEditingTimelineState, IFileBaseline } from './chatEditingOperations.js';\n\n/**\n * Interface for the new checkpoint-based timeline system\n */\nexport interface IChatEditingCheckpointTimeline {\n\treadonly requestDisablement: IObservable<IChatRequestDisablement[]>;\n\treadonly canUndo: IObservable<boolean>;\n\treadonly canRedo: IObservable<boolean>;\n\n\t// Checkpoint management\n\tcreateCheckpoint(requestId: string | undefined, undoStopId: string | undefined, label: string, description?: string): void;\n\tnavigateToCheckpoint(checkpointId: string): Promise<void>;\n\tundoToLastCheckpoint(): Promise<void>;\n\tredoToNextCheckpoint(): Promise<void>;\n\tgetCheckpointIdForRequest(requestId: string, undoStopId?: string): string | undefined;\n\n\t// Operation tracking\n\trecordFileOperation(operation: FileOperation): void;\n\tincrementEpoch(): number;\n\n\t// File baselines\n\trecordFileBaseline(baseline: IFileBaseline): void;\n\thasFileBaseline(uri: URI, requestId: string): boolean;\n\n\t// State reconstruction\n\tgetContentURIAtStop(requestId: string, fileURI: URI, stopId: string | undefined): URI;\n\tgetContentAtStop(requestId: string, contentURI: URI, stopId: string | undefined): Promise<string | VSBuffer | undefined>;\n\tonDidChangeContentsAtStop(requestId: string, contentURI: URI, stopId: string | undefined, callback: (data: string) => void): IDisposable;\n\n\t// Persistence\n\tgetStateForPersistence(): IChatEditingTimelineState;\n\trestoreFromState(state: IChatEditingTimelineState, tx: ITransaction): void;\n\n\t// Diffing\n\tgetEntryDiffBetweenStops(uri: URI, requestId: string | undefined, stopId: string | undefined): IObservable<IEditSessionEntryDiff | undefined> | undefined;\n\tgetEntryDiffBetweenRequests(uri: URI, startRequestId: string, stopRequestId: string): IObservable<IEditSessionEntryDiff | undefined>;\n}\n"]}