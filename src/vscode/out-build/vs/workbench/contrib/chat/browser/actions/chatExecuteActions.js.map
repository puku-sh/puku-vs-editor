{"version":3,"sources":["vs/workbench/contrib/chat/browser/actions/chatExecuteActions.ts"],"names":[],"mappings":"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","file":"chatExecuteActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { basename } from '../../../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { assertType } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IChatMode, IChatModeService } from '../../common/chatModes.js';\nimport { chatVariableLeader } from '../../common/chatParserTypes.js';\nimport { IChatService } from '../../common/chatService.js';\nimport { ChatAgentLocation, ChatConfiguration, ChatModeKind, } from '../../common/constants.js';\nimport { ILanguageModelChatMetadata } from '../../common/languageModels.js';\nimport { ILanguageModelToolsService } from '../../common/languageModelToolsService.js';\nimport { IChatWidget, IChatWidgetService } from '../chat.js';\nimport { getEditingSessionContext } from '../chatEditing/chatEditingActions.js';\nimport { ctxHasEditorModification } from '../chatEditing/chatEditingEditorContextKeys.js';\nimport { ACTION_ID_NEW_CHAT, CHAT_CATEGORY, handleCurrentEditingSession, handleModeSwitch } from './chatActions.js';\nimport { ContinueChatInSessionAction } from './chatContinueInAction.js';\n\nexport interface IVoiceChatExecuteActionContext {\n\treadonly disableTimeout?: boolean;\n}\n\nexport interface IChatExecuteActionContext {\n\twidget?: IChatWidget;\n\tinputValue?: string;\n\tvoice?: IVoiceChatExecuteActionContext;\n}\n\nabstract class SubmitAction extends Action2 {\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (widget?.viewModel?.editing) {\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst chatModel = chatService.getSession(widget.viewModel.sessionResource);\n\t\t\tif (!chatModel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst session = chatModel.editingSession;\n\t\t\tif (!session) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst requestId = widget.viewModel?.editing.id;\n\n\t\t\tif (requestId) {\n\t\t\t\tconst chatRequests = chatModel.getRequests();\n\t\t\t\tconst itemIndex = chatRequests.findIndex(request => request.id === requestId);\n\t\t\t\tconst editsToUndo = chatRequests.length - itemIndex;\n\n\t\t\t\tconst requestsToRemove = chatRequests.slice(itemIndex);\n\t\t\t\tconst requestIdsToRemove = new Set(requestsToRemove.map(request => request.id));\n\t\t\t\tconst entriesModifiedInRequestsToRemove = session.entries.get().filter((entry) => requestIdsToRemove.has(entry.lastModifyingRequestId)) ?? [];\n\t\t\t\tconst shouldPrompt = entriesModifiedInRequestsToRemove.length > 0 && configurationService.getValue('chat.editing.confirmEditRequestRemoval') === true;\n\n\t\t\t\tlet message: string;\n\t\t\t\tif (editsToUndo === 1) {\n\t\t\t\t\tif (entriesModifiedInRequestsToRemove.length === 1) {\n\t\t\t\t\t\tmessage = localize('chat.removeLast.confirmation.message2', \"This will remove your last request and undo the edits made to {0}. Do you want to proceed?\", basename(entriesModifiedInRequestsToRemove[0].modifiedURI));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage = localize('chat.removeLast.confirmation.multipleEdits.message', \"This will remove your last request and undo edits made to {0} files in your working set. Do you want to proceed?\", entriesModifiedInRequestsToRemove.length);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (entriesModifiedInRequestsToRemove.length === 1) {\n\t\t\t\t\t\tmessage = localize('chat.remove.confirmation.message2', \"This will remove all subsequent requests and undo edits made to {0}. Do you want to proceed?\", basename(entriesModifiedInRequestsToRemove[0].modifiedURI));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage = localize('chat.remove.confirmation.multipleEdits.message', \"This will remove all subsequent requests and undo edits made to {0} files in your working set. Do you want to proceed?\", entriesModifiedInRequestsToRemove.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst confirmation = shouldPrompt\n\t\t\t\t\t? await dialogService.confirm({\n\t\t\t\t\t\ttitle: editsToUndo === 1\n\t\t\t\t\t\t\t? localize('chat.removeLast.confirmation.title', \"Do you want to undo your last edit?\")\n\t\t\t\t\t\t\t: localize('chat.remove.confirmation.title', \"Do you want to undo {0} edits?\", editsToUndo),\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tprimaryButton: localize('chat.remove.confirmation.primaryButton', \"Yes\"),\n\t\t\t\t\t\tcheckbox: { label: localize('chat.remove.confirmation.checkbox', \"Don't ask again\"), checked: false },\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t})\n\t\t\t\t\t: { confirmed: true };\n\n\t\t\t\ttype EditUndoEvent = {\n\t\t\t\t\teditRequestType: string;\n\t\t\t\t\toutcome: 'cancelled' | 'applied';\n\t\t\t\t\teditsUndoCount: number;\n\t\t\t\t};\n\n\t\t\t\ttype EditUndoEventClassification = {\n\t\t\t\t\towner: 'justschen';\n\t\t\t\t\tcomment: 'Event used to gain insights into when there are pending changes to undo, and whether edited requests are applied or cancelled.';\n\t\t\t\t\teditRequestType: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Current entry point for editing a request.' };\n\t\t\t\t\toutcome: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the edit was cancelled or applied.' };\n\t\t\t\t\teditsUndoCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of edits that would be undone.'; 'isMeasurement': true };\n\t\t\t\t};\n\n\t\t\t\tif (!confirmation.confirmed) {\n\t\t\t\t\ttelemetryService.publicLog2<EditUndoEvent, EditUndoEventClassification>('chat.undoEditsConfirmation', {\n\t\t\t\t\t\teditRequestType: configurationService.getValue<string>('chat.editRequests'),\n\t\t\t\t\t\toutcome: 'cancelled',\n\t\t\t\t\t\teditsUndoCount: editsToUndo\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t} else if (editsToUndo > 0) {\n\t\t\t\t\ttelemetryService.publicLog2<EditUndoEvent, EditUndoEventClassification>('chat.undoEditsConfirmation', {\n\t\t\t\t\t\teditRequestType: configurationService.getValue<string>('chat.editRequests'),\n\t\t\t\t\t\toutcome: 'applied',\n\t\t\t\t\t\teditsUndoCount: editsToUndo\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (confirmation.checkboxChecked) {\n\t\t\t\t\tawait configurationService.updateValue('chat.editing.confirmEditRequestRemoval', false);\n\t\t\t\t}\n\n\t\t\t\t// Restore the snapshot to what it was before the request(s) that we deleted\n\t\t\t\tconst snapshotRequestId = chatRequests[itemIndex].id;\n\t\t\t\tawait session.restoreSnapshot(snapshotRequestId, undefined);\n\t\t\t}\n\t\t} else if (widget?.viewModel?.model.checkpoint) {\n\t\t\twidget.viewModel.model.setCheckpoint(undefined);\n\t\t}\n\t\twidget?.acceptInput(context?.inputValue);\n\t}\n}\n\nconst whenNotInProgress = ChatContextKeys.requestInProgress.negate();\n\nexport class ChatSubmitAction extends SubmitAction {\n\tstatic readonly ID = 'workbench.action.chat.submit';\n\n\tconstructor() {\n\t\tconst menuCondition = ChatContextKeys.chatModeKind.isEqualTo(ChatModeKind.Ask);\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress,\n\t\t);\n\n\t\tsuper({\n\t\t\tid: ChatSubmitAction.ID,\n\t\t\ttitle: localize2('interactive.submit.label', \"Send\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.send,\n\t\t\tprecondition,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ChatContextKeys.lockedToCodingAgent,\n\t\t\t\ticon: Codicon.send,\n\t\t\t\ttooltip: localize('sendToAgent', \"Send to Agent\"),\n\t\t\t},\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inChatInput,\n\t\t\t\t\tChatContextKeys.withinEditSessionDiff.negate(),\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\twhenNotInProgress,\n\t\t\t\t\t\tmenuCondition,\n\t\t\t\t\t\tChatContextKeys.withinEditSessionDiff.negate(),\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\talt: {\n\t\t\t\t\t\tid: 'workbench.action.chat.sendToNewChat',\n\t\t\t\t\t\ttitle: localize2('chat.newChat.label', \"Send to New Chat\"),\n\t\t\t\t\t\ticon: Codicon.plus\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tContextKeyExpr.or(ctxHasEditorModification.negate(), ChatContextKeys.inputHasText),\n\t\t\t\t\t\twhenNotInProgress,\n\t\t\t\t\t\tChatContextKeys.requestInProgress.negate(),\n\t\t\t\t\t\tmenuCondition\n\t\t\t\t\t),\n\t\t\t\t}]\n\t\t});\n\t}\n}\n\nexport class ChatDelegateToEditSessionAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.delegateToEditSession';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChatDelegateToEditSessionAction.ID,\n\t\t\ttitle: localize2('interactive.submit.panel.label', \"Send to Edit Session\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.commentDiscussion,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inChatInput,\n\t\t\t\t\tChatContextKeys.withinEditSessionDiff,\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\twhenNotInProgress,\n\t\t\t\t\t\tChatContextKeys.withinEditSessionDiff,\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst inlineWidget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tconst locationData = inlineWidget?.locationData;\n\n\t\tif (inlineWidget && locationData?.type === ChatAgentLocation.EditorInline && locationData.delegateSessionResource) {\n\t\t\tconst sessionWidget = widgetService.getWidgetBySessionResource(locationData.delegateSessionResource);\n\n\t\t\tif (sessionWidget) {\n\t\t\t\tawait widgetService.reveal(sessionWidget);\n\t\t\t\tsessionWidget.attachmentModel.addContext({\n\t\t\t\t\tid: 'vscode.delegate.inline',\n\t\t\t\t\tkind: 'file',\n\t\t\t\t\tmodelDescription: `User's chat context`,\n\t\t\t\t\tname: 'delegate-inline',\n\t\t\t\t\tvalue: { range: locationData.wholeRange, uri: locationData.document },\n\t\t\t\t});\n\t\t\t\tsessionWidget.acceptInput(inlineWidget.getInput(), {\n\t\t\t\t\tnoCommandDetection: true,\n\t\t\t\t\tenableImplicitContext: false,\n\t\t\t\t});\n\n\t\t\t\tinlineWidget.setInput('');\n\t\t\t\tlocationData.close();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport const ToggleAgentModeActionId = 'workbench.action.chat.toggleAgentMode';\n\nexport interface IToggleChatModeArgs {\n\tmodeId: ChatModeKind | string;\n\tsessionResource: URI | undefined;\n}\n\ntype ChatModeChangeClassification = {\n\towner: 'digitarald';\n\tcomment: 'Reporting when agent is switched between different modes';\n\tfromMode?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The previous agent name' };\n\tmode?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The new agent name' };\n\trequestCount?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of requests in the current chat session'; 'isMeasurement': true };\n\tstorage?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Source of the target mode (builtin, local, user, extension)' };\n\textensionId?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Extension ID if the target mode is from an extension' };\n\ttoolsCount?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of custom tools in the target mode'; 'isMeasurement': true };\n\thandoffsCount?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of handoffs in the target mode'; 'isMeasurement': true };\n};\n\ntype ChatModeChangeEvent = {\n\tfromMode: string;\n\tmode: string;\n\trequestCount: number;\n\tstorage?: string;\n\textensionId?: string;\n\ttoolsCount?: number;\n\thandoffsCount?: number;\n};\n\nclass ToggleChatModeAction extends Action2 {\n\n\tstatic readonly ID = ToggleAgentModeActionId;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ToggleChatModeAction.ID,\n\t\t\ttitle: localize2('interactive.toggleAgent.label', \"Switch to Next Agent\"),\n\t\t\tf1: true,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tChatContextKeys.enabled,\n\t\t\t\tChatContextKeys.requestInProgress.negate())\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst modeService = accessor.get(IChatModeService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\n\t\tconst arg = args.at(0) as IToggleChatModeArgs | undefined;\n\t\tlet widget: IChatWidget | undefined;\n\t\tif (arg?.sessionResource) {\n\t\t\twidget = chatWidgetService.getWidgetBySessionResource(arg.sessionResource);\n\t\t} else {\n\t\t\twidget = getEditingSessionContext(accessor, args)?.chatWidget;\n\t\t}\n\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatSession = widget.viewModel?.model;\n\t\tconst requestCount = chatSession?.getRequests().length ?? 0;\n\t\tconst switchToMode = (arg && modeService.findModeById(arg.modeId)) ?? this.getNextMode(widget, requestCount, configurationService, modeService);\n\n\t\tconst currentMode = widget.input.currentModeObs.get();\n\t\tif (switchToMode.id === currentMode.id) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatModeCheck = await instaService.invokeFunction(handleModeSwitch, widget.input.currentModeKind, switchToMode.kind, requestCount, widget.viewModel?.model.editingSession);\n\t\tif (!chatModeCheck) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Send telemetry for mode change\n\t\tconst storage = switchToMode.source?.storage ?? 'builtin';\n\t\tconst extensionId = switchToMode.source?.storage === 'extension' ? switchToMode.source.extensionId.value : undefined;\n\t\tconst toolsCount = switchToMode.customTools?.get()?.length ?? 0;\n\t\tconst handoffsCount = switchToMode.handOffs?.get()?.length ?? 0;\n\n\t\ttelemetryService.publicLog2<ChatModeChangeEvent, ChatModeChangeClassification>('chat.modeChange', {\n\t\t\tfromMode: currentMode.name.get(),\n\t\t\tmode: switchToMode.name.get(),\n\t\t\trequestCount: requestCount,\n\t\t\tstorage,\n\t\t\textensionId,\n\t\t\ttoolsCount,\n\t\t\thandoffsCount\n\t\t});\n\n\t\twidget.input.setChatMode(switchToMode.id);\n\n\t\tif (chatModeCheck.needToClearSession) {\n\t\t\tawait commandService.executeCommand(ACTION_ID_NEW_CHAT);\n\t\t}\n\t}\n\n\tprivate getNextMode(chatWidget: IChatWidget, requestCount: number, configurationService: IConfigurationService, modeService: IChatModeService): IChatMode {\n\t\tconst modes = modeService.getModes();\n\t\tconst flat = [\n\t\t\t...modes.builtin.filter(mode => {\n\t\t\t\treturn mode.kind !== ChatModeKind.Edit || configurationService.getValue(ChatConfiguration.Edits2Enabled) || requestCount === 0;\n\t\t\t}),\n\t\t\t...(modes.custom ?? []),\n\t\t];\n\n\t\tconst curModeIndex = flat.findIndex(mode => mode.id === chatWidget.input.currentModeObs.get().id);\n\t\tconst newMode = flat[(curModeIndex + 1) % flat.length];\n\t\treturn newMode;\n\t}\n}\n\nclass SwitchToNextModelAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.switchToNextModel';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SwitchToNextModelAction.ID,\n\t\t\ttitle: localize2('interactive.switchToNextModel.label', \"Switch to Next Model\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: true,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\twidget?.input.switchToNextModel();\n\t}\n}\n\nexport const ChatOpenModelPickerActionId = 'workbench.action.chat.openModelPicker';\nclass OpenModelPickerAction extends Action2 {\n\tstatic readonly ID = ChatOpenModelPickerActionId;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenModelPickerAction.ID,\n\t\t\ttitle: localize2('interactive.openModelPicker.label', \"Open Model Picker\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Period,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ChatContextKeys.inChatInput\n\t\t\t},\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ChatInput,\n\t\t\t\torder: 3,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen:\n\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate(),\n\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.Chat),\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.EditorInline),\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.Notebook),\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.Terminal))\n\t\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\tawait widgetService.reveal(widget);\n\t\t\twidget.input.openModelPicker();\n\t\t}\n\t}\n}\nexport class OpenModePickerAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.openModePicker';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenModePickerAction.ID,\n\t\t\ttitle: localize2('interactive.openModePicker.label', \"Open Agent Picker\"),\n\t\t\ttooltip: localize('setChatMode', \"Set Agent\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inChatInput,\n\t\t\t\t\tChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat)),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Period,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatInput,\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\t\tChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat),\n\t\t\t\t\t\tChatContextKeys.inQuickChat.negate(),\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate()),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.input.openModePicker();\n\t\t}\n\t}\n}\n\nexport class ChatSessionPrimaryPickerAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.chatSessionPrimaryPicker';\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChatSessionPrimaryPickerAction.ID,\n\t\t\ttitle: localize2('interactive.openChatSessionPrimaryPicker.label', \"Open Picker\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ChatInput,\n\t\t\t\torder: 4,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen:\n\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent,\n\t\t\t\t\t\tChatContextKeys.chatSessionHasModels\n\t\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.input.openChatSessionPicker();\n\t\t}\n\t}\n}\n\nexport const ChangeChatModelActionId = 'workbench.action.chat.changeModel';\nclass ChangeChatModelAction extends Action2 {\n\tstatic readonly ID = ChangeChatModelActionId;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChangeChatModelAction.ID,\n\t\t\ttitle: localize2('interactive.changeModel.label', \"Change Model\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst modelInfo = args[0] as Pick<ILanguageModelChatMetadata, 'vendor' | 'id' | 'family'>;\n\t\t// Type check the arg\n\t\tassertType(typeof modelInfo.vendor === 'string' && typeof modelInfo.id === 'string' && typeof modelInfo.family === 'string');\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widgets = widgetService.getAllWidgets();\n\t\tfor (const widget of widgets) {\n\t\t\twidget.input.switchModel(modelInfo);\n\t\t}\n\t}\n}\n\nexport class ChatEditingSessionSubmitAction extends SubmitAction {\n\tstatic readonly ID = 'workbench.action.edits.submit';\n\n\tconstructor() {\n\t\tconst menuCondition = ChatContextKeys.chatModeKind.notEqualsTo(ChatModeKind.Ask);\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress\n\t\t);\n\n\t\tsuper({\n\t\t\tid: ChatEditingSessionSubmitAction.ID,\n\t\t\ttitle: localize2('edits.submit.label', \"Send\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.send,\n\t\t\tprecondition,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.requestInProgress.negate(),\n\t\t\t\t\t\tmenuCondition),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\talt: {\n\t\t\t\t\t\tid: 'workbench.action.chat.sendToNewChat',\n\t\t\t\t\t\ttitle: localize2('chat.newChat.label', \"Send to New Chat\"),\n\t\t\t\t\t\ticon: Codicon.plus\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t});\n\t}\n}\n\nclass SubmitWithoutDispatchingAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.submitWithoutDispatching';\n\n\tconstructor() {\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress,\n\t\t\tChatContextKeys.chatModeKind.isEqualTo(ChatModeKind.Ask),\n\t\t);\n\n\t\tsuper({\n\t\t\tid: SubmitWithoutDispatchingAction.ID,\n\t\t\ttitle: localize2('interactive.submitWithoutDispatch.label', \"Send\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tprecondition,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ChatContextKeys.inChatInput,\n\t\t\t\tprimary: KeyMod.Alt | KeyMod.Shift | KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\twidget?.acceptInput(context?.inputValue, { noCommandDetection: true });\n\t}\n}\n\nexport class ChatSubmitWithCodebaseAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.submitWithCodebase';\n\n\tconstructor() {\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress,\n\t\t);\n\n\t\tsuper({\n\t\t\tid: ChatSubmitWithCodebaseAction.ID,\n\t\t\ttitle: localize2('actions.chat.submitWithCodebase', \"Send with {0}\", `${chatVariableLeader}codebase`),\n\t\t\tprecondition,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ChatContextKeys.inChatInput,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst languageModelToolsService = accessor.get(ILanguageModelToolsService);\n\t\tconst codebaseTool = languageModelToolsService.getToolByName('codebase');\n\t\tif (!codebaseTool) {\n\t\t\treturn;\n\t\t}\n\n\t\twidget.input.attachmentModel.addContext({\n\t\t\tid: codebaseTool.id,\n\t\t\tname: codebaseTool.displayName ?? '',\n\t\t\tfullName: codebaseTool.displayName ?? '',\n\t\t\tvalue: undefined,\n\t\t\ticon: ThemeIcon.isThemeIcon(codebaseTool.icon) ? codebaseTool.icon : undefined,\n\t\t\tkind: 'tool'\n\t\t});\n\t\twidget.acceptInput();\n\t}\n}\n\nclass SendToNewChatAction extends Action2 {\n\tconstructor() {\n\t\tconst precondition = ChatContextKeys.inputHasText;\n\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.sendToNewChat',\n\t\t\ttitle: localize2('chat.newChat.label', \"Send to New Chat\"),\n\t\t\tprecondition,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter,\n\t\t\t\twhen: ChatContextKeys.inChatInput,\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Cancel any in-progress request before clearing\n\t\tif (widget.viewModel) {\n\t\t\tchatService.cancelCurrentRequestForSession(widget.viewModel.sessionResource);\n\t\t}\n\n\t\tconst editingSession = widget.viewModel?.model.editingSession;\n\t\tif (editingSession) {\n\t\t\tif (!(await handleCurrentEditingSession(editingSession, undefined, dialogService))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tawait widget.clear();\n\t\twidget.acceptInput(context?.inputValue);\n\t}\n}\n\nexport const CancelChatActionId = 'workbench.action.chat.cancel';\nexport class CancelAction extends Action2 {\n\tstatic readonly ID = CancelChatActionId;\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CancelAction.ID,\n\t\t\ttitle: localize2('interactive.cancel.label', \"Cancel\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.stopCircle,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.requestInProgress,\n\t\t\t\t\tChatContextKeys.remoteJobCreating.negate()\n\t\t\t\t),\n\t\t\t\torder: 4,\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.requestInProgress,\n\t\t\t\t\tChatContextKeys.remoteJobCreating.negate()\n\t\t\t\t),\n\t\t\t\torder: 4,\n\t\t\t\tgroup: 'navigation',\n\t\t\t},\n\t\t\t],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Escape,\n\t\t\t\twin: { primary: KeyMod.Alt | KeyCode.Backspace },\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatService = accessor.get(IChatService);\n\t\tif (widget.viewModel) {\n\t\t\tchatService.cancelCurrentRequestForSession(widget.viewModel.sessionResource);\n\t\t}\n\t}\n}\n\nexport const CancelChatEditId = 'workbench.edit.chat.cancel';\nexport class CancelEdit extends Action2 {\n\tstatic readonly ID = CancelChatEditId;\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CancelEdit.ID,\n\t\t\ttitle: localize2('interactive.cancelEdit.label', \"Cancel Edit\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.x,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatMessageTitle,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.isRequest, ChatContextKeys.currentlyEditing, ContextKeyExpr.equals(`config.${ChatConfiguration.EditRequests}`, 'input'))\n\t\t\t\t}\n\t\t\t],\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inChatInput,\n\t\t\t\t\tEditorContextKeys.hoverVisible.toNegated(),\n\t\t\t\t\tEditorContextKeys.hasNonEmptySelection.toNegated(),\n\t\t\t\t\tEditorContextKeys.hasMultipleSelections.toNegated(),\n\t\t\t\t\tContextKeyExpr.or(ChatContextKeys.currentlyEditing, ChatContextKeys.currentlyEditingInput)),\n\t\t\t\tweight: KeybindingWeight.EditorContrib - 5\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.finishedEditing();\n\t}\n}\n\n\nexport function registerChatExecuteActions() {\n\tregisterAction2(ChatSubmitAction);\n\tregisterAction2(ChatDelegateToEditSessionAction);\n\tregisterAction2(ChatEditingSessionSubmitAction);\n\tregisterAction2(SubmitWithoutDispatchingAction);\n\tregisterAction2(CancelAction);\n\tregisterAction2(SendToNewChatAction);\n\tregisterAction2(ChatSubmitWithCodebaseAction);\n\tregisterAction2(ContinueChatInSessionAction);\n\tregisterAction2(ToggleChatModeAction);\n\tregisterAction2(SwitchToNextModelAction);\n\tregisterAction2(OpenModelPickerAction);\n\tregisterAction2(OpenModePickerAction);\n\tregisterAction2(ChatSessionPrimaryPickerAction);\n\tregisterAction2(ChangeChatModelAction);\n\tregisterAction2(CancelEdit);\n}\n"]}