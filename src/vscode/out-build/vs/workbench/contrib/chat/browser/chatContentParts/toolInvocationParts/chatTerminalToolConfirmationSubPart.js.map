{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/toolInvocationParts/chatTerminalToolConfirmationSubPart.ts"],"names":[],"mappings":"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","file":"chatTerminalToolConfirmationSubPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { append, h } from '../../../../../../base/browser/dom.js';\nimport { HoverStyle } from '../../../../../../base/browser/ui/hover/hover.js';\nimport { HoverPosition } from '../../../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Separator } from '../../../../../../base/common/actions.js';\nimport { asArray } from '../../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { ErrorNoTelemetry } from '../../../../../../base/common/errors.js';\nimport { createCommandUri, MarkdownString, type IMarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { thenIfNotDisposed, thenRegisterOrDispose, toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../../base/common/network.js';\nimport Severity from '../../../../../../base/common/severity.js';\nimport { isObject } from '../../../../../../base/common/types.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../../../base/common/uuid.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../../../../editor/common/services/model.js';\nimport { ITextModelService } from '../../../../../../editor/common/services/resolverService.js';\nimport { localize } from '../../../../../../nls.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../../platform/dialogs/common/dialogs.js';\nimport { IHoverService } from '../../../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\nimport { IMarkdownRenderer } from '../../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../../../platform/storage/common/storage.js';\nimport { IPreferencesService } from '../../../../../services/preferences/common/preferences.js';\nimport { ITerminalChatService } from '../../../../terminal/browser/terminal.js';\nimport { TerminalContribSettingId } from '../../../../terminal/terminalContribExports.js';\nimport { migrateLegacyTerminalToolSpecificData } from '../../../common/chat.js';\nimport { ChatContextKeys } from '../../../common/chatContextKeys.js';\nimport { IChatToolInvocation, ToolConfirmKind, type IChatTerminalToolInvocationData, type ILegacyChatTerminalToolInvocationData } from '../../../common/chatService.js';\nimport type { CodeBlockModelCollection } from '../../../common/codeBlockModelCollection.js';\nimport { AcceptToolConfirmationActionId, SkipToolConfirmationActionId } from '../../actions/chatToolActions.js';\nimport { IChatCodeBlockInfo, IChatWidgetService } from '../../chat.js';\nimport { ICodeBlockRenderOptions } from '../../codeBlockPart.js';\nimport { ChatCustomConfirmationWidget, IChatConfirmationButton } from '../chatConfirmationWidget.js';\nimport { EditorPool } from '../chatContentCodePools.js';\nimport { IChatContentPartRenderContext } from '../chatContentParts.js';\nimport { ChatMarkdownContentPart } from '../chatMarkdownContentPart.js';\nimport { disableSessionAutoApprovalCommandId, openTerminalSettingsLinkCommandId } from './chatTerminalToolProgressPart.js';\nimport { BaseChatToolInvocationSubPart } from './chatToolInvocationSubPart.js';\n\nexport const enum TerminalToolConfirmationStorageKeys {\n\tTerminalAutoApproveWarningAccepted = 'chat.tools.terminal.autoApprove.warningAccepted'\n}\n\nexport interface ITerminalNewAutoApproveRule {\n\tkey: string;\n\tvalue: boolean | {\n\t\tapprove: boolean;\n\t\tmatchCommandLine?: boolean;\n\t};\n}\n\nexport type TerminalNewAutoApproveButtonData = (\n\t{ type: 'enable' } |\n\t{ type: 'configure' } |\n\t{ type: 'skip' } |\n\t{ type: 'newRule'; rule: ITerminalNewAutoApproveRule | ITerminalNewAutoApproveRule[] } |\n\t{ type: 'sessionApproval' }\n);\n\nexport class ChatTerminalToolConfirmationSubPart extends BaseChatToolInvocationSubPart {\n\tpublic readonly domNode: HTMLElement;\n\tpublic readonly codeblocks: IChatCodeBlockInfo[] = [];\n\n\tconstructor(\n\t\ttoolInvocation: IChatToolInvocation,\n\t\tterminalData: IChatTerminalToolInvocationData | ILegacyChatTerminalToolInvocationData,\n\t\tprivate readonly context: IChatContentPartRenderContext,\n\t\tprivate readonly renderer: IMarkdownRenderer,\n\t\tprivate readonly editorPool: EditorPool,\n\t\tprivate readonly currentWidthDelegate: () => number,\n\t\tprivate readonly codeBlockModelCollection: CodeBlockModelCollection,\n\t\tprivate readonly codeBlockStartIndex: number,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IChatWidgetService private readonly chatWidgetService: IChatWidgetService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@ITerminalChatService private readonly terminalChatService: ITerminalChatService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IHoverService hoverService: IHoverService,\n\t) {\n\t\tsuper(toolInvocation);\n\n\t\t// Tag for sub-agent styling\n\t\tif (toolInvocation.fromSubAgent) {\n\t\t\tcontext.container.classList.add('from-sub-agent');\n\t\t}\n\n\t\tif (!toolInvocation.confirmationMessages?.title) {\n\t\t\tthrow new Error('Confirmation messages are missing');\n\t\t}\n\n\t\tterminalData = migrateLegacyTerminalToolSpecificData(terminalData);\n\n\t\tconst { title, message, disclaimer, terminalCustomActions } = toolInvocation.confirmationMessages;\n\n\t\tconst autoApproveEnabled = this.configurationService.getValue(TerminalContribSettingId.EnableAutoApprove) === true;\n\t\tconst autoApproveWarningAccepted = this.storageService.getBoolean(TerminalToolConfirmationStorageKeys.TerminalAutoApproveWarningAccepted, StorageScope.APPLICATION, false);\n\t\tlet moreActions: (IChatConfirmationButton<TerminalNewAutoApproveButtonData> | Separator)[] | undefined = undefined;\n\t\tif (autoApproveEnabled) {\n\t\t\tmoreActions = [];\n\t\t\tif (!autoApproveWarningAccepted) {\n\t\t\t\tmoreActions.push({\n\t\t\t\t\tlabel: localize('autoApprove.enable', 'Enable Auto Approve...'),\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: 'enable'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmoreActions.push(new Separator());\n\t\t\t\tif (terminalCustomActions) {\n\t\t\t\t\tfor (const action of terminalCustomActions) {\n\t\t\t\t\t\tif (!(action instanceof Separator)) {\n\t\t\t\t\t\t\taction.disabled = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (terminalCustomActions) {\n\t\t\t\tmoreActions.push(...terminalCustomActions);\n\t\t\t}\n\t\t\tif (moreActions.length === 0) {\n\t\t\t\tmoreActions = undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst codeBlockRenderOptions: ICodeBlockRenderOptions = {\n\t\t\thideToolbar: true,\n\t\t\treserveWidth: 19,\n\t\t\tverticalPadding: 5,\n\t\t\teditorOptions: {\n\t\t\t\twordWrap: 'on',\n\t\t\t\treadOnly: false,\n\t\t\t\ttabFocusMode: true,\n\t\t\t\tariaLabel: typeof title === 'string' ? title : title.value\n\t\t\t}\n\t\t};\n\t\tconst languageId = this.languageService.getLanguageIdByLanguageName(terminalData.language ?? 'sh') ?? 'shellscript';\n\t\tconst model = this._register(this.modelService.createModel(\n\t\t\tterminalData.commandLine.toolEdited ?? terminalData.commandLine.original,\n\t\t\tthis.languageService.createById(languageId),\n\t\t\tthis._getUniqueCodeBlockUri(),\n\t\t\ttrue\n\t\t));\n\t\tthenRegisterOrDispose(textModelService.createModelReference(model.uri), this._store);\n\t\tconst editor = this._register(this.editorPool.get());\n\t\tconst renderPromise = editor.object.render({\n\t\t\tcodeBlockIndex: this.codeBlockStartIndex,\n\t\t\tcodeBlockPartIndex: 0,\n\t\t\telement: this.context.element,\n\t\t\tlanguageId,\n\t\t\trenderOptions: codeBlockRenderOptions,\n\t\t\ttextModel: Promise.resolve(model),\n\t\t\tchatSessionResource: this.context.element.sessionResource\n\t\t}, this.currentWidthDelegate());\n\t\tthis._register(thenIfNotDisposed(renderPromise, () => this._onDidChangeHeight.fire()));\n\t\tthis.codeblocks.push({\n\t\t\tcodeBlockIndex: this.codeBlockStartIndex,\n\t\t\tcodemapperUri: undefined,\n\t\t\telementId: this.context.element.id,\n\t\t\tfocus: () => editor.object.focus(),\n\t\t\townerMarkdownPartId: this.codeblocksPartId,\n\t\t\turi: model.uri,\n\t\t\turiPromise: Promise.resolve(model.uri),\n\t\t\tchatSessionResource: this.context.element.sessionResource\n\t\t});\n\t\tthis._register(editor.object.onDidChangeContentHeight(() => {\n\t\t\teditor.object.layout(this.currentWidthDelegate());\n\t\t\tthis._onDidChangeHeight.fire();\n\t\t}));\n\t\tthis._register(model.onDidChangeContent(e => {\n\t\t\tterminalData.commandLine.userEdited = model.getValue();\n\t\t}));\n\t\tconst elements = h('.chat-confirmation-message-terminal', [\n\t\t\th('.chat-confirmation-message-terminal-editor@editor'),\n\t\t\th('.chat-confirmation-message-terminal-disclaimer@disclaimer'),\n\t\t]);\n\t\tappend(elements.editor, editor.object.element);\n\t\tthis._register(hoverService.setupDelayedHover(elements.editor, {\n\t\t\tcontent: message || '',\n\t\t\tstyle: HoverStyle.Pointer,\n\t\t\tposition: { hoverPosition: HoverPosition.LEFT },\n\t\t}));\n\t\tconst confirmWidget = this._register(this.instantiationService.createInstance(\n\t\t\tChatCustomConfirmationWidget<TerminalNewAutoApproveButtonData | boolean>,\n\t\t\tthis.context,\n\t\t\t{\n\t\t\t\ttitle,\n\t\t\t\ticon: Codicon.terminal,\n\t\t\t\tmessage: elements.root,\n\t\t\t\tbuttons: this._createButtons(moreActions)\n\t\t\t},\n\t\t));\n\n\t\tif (disclaimer) {\n\t\t\tthis._appendMarkdownPart(elements.disclaimer, disclaimer, codeBlockRenderOptions);\n\t\t}\n\n\t\tconst hasToolConfirmationKey = ChatContextKeys.Editing.hasToolConfirmation.bindTo(this.contextKeyService);\n\t\thasToolConfirmationKey.set(true);\n\t\tthis._register(toDisposable(() => hasToolConfirmationKey.reset()));\n\n\t\tthis._register(confirmWidget.onDidClick(async button => {\n\t\t\tlet doComplete = true;\n\t\t\tconst data = button.data;\n\t\t\tlet toolConfirmKind: ToolConfirmKind = ToolConfirmKind.Denied;\n\t\t\tif (typeof data === 'boolean') {\n\t\t\t\tif (data) {\n\t\t\t\t\ttoolConfirmKind = ToolConfirmKind.UserAction;\n\t\t\t\t\t// Clear out any auto approve info since this was an explicit user action. This\n\t\t\t\t\t// can happen when the auto approve feature is off.\n\t\t\t\t\tif (terminalData.autoApproveInfo) {\n\t\t\t\t\t\tterminalData.autoApproveInfo = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof data !== 'boolean') {\n\t\t\t\tswitch (data.type) {\n\t\t\t\t\tcase 'enable': {\n\t\t\t\t\t\tconst optedIn = await this._showAutoApproveWarning();\n\t\t\t\t\t\tif (optedIn) {\n\t\t\t\t\t\t\tthis.storageService.store(TerminalToolConfirmationStorageKeys.TerminalAutoApproveWarningAccepted, true, StorageScope.APPLICATION, StorageTarget.USER);\n\t\t\t\t\t\t\t// This is good to auto approve immediately\n\t\t\t\t\t\t\tif (!terminalCustomActions) {\n\t\t\t\t\t\t\t\ttoolConfirmKind = ToolConfirmKind.UserAction;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// If this would not have been auto approved, enable the options and\n\t\t\t\t\t\t\t// do not complete\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tfor (const action of terminalCustomActions) {\n\t\t\t\t\t\t\t\t\tif (!(action instanceof Separator)) {\n\t\t\t\t\t\t\t\t\t\taction.disabled = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconfirmWidget.updateButtons(this._createButtons(terminalCustomActions));\n\t\t\t\t\t\t\t\tdoComplete = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdoComplete = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'skip': {\n\t\t\t\t\t\ttoolConfirmKind = ToolConfirmKind.Skipped;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'newRule': {\n\t\t\t\t\t\tconst newRules = asArray(data.rule);\n\t\t\t\t\t\tconst inspect = this.configurationService.inspect(TerminalContribSettingId.AutoApprove);\n\t\t\t\t\t\tconst oldValue = (inspect.user?.value as Record<string, unknown> | undefined) ?? {};\n\t\t\t\t\t\tlet newValue: Record<string, unknown>;\n\t\t\t\t\t\tif (isObject(oldValue)) {\n\t\t\t\t\t\t\tnewValue = { ...oldValue };\n\t\t\t\t\t\t\tfor (const newRule of newRules) {\n\t\t\t\t\t\t\t\tnewValue[newRule.key] = newRule.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.preferencesService.openSettings({\n\t\t\t\t\t\t\t\tjsonEditor: true,\n\t\t\t\t\t\t\t\ttarget: ConfigurationTarget.USER,\n\t\t\t\t\t\t\t\trevealSetting: {\n\t\t\t\t\t\t\t\t\tkey: TerminalContribSettingId.AutoApprove\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthrow new ErrorNoTelemetry(`Cannot add new rule, existing setting is unexpected format`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tawait this.configurationService.updateValue(TerminalContribSettingId.AutoApprove, newValue, ConfigurationTarget.USER);\n\t\t\t\t\t\tfunction formatRuleLinks(newRules: ITerminalNewAutoApproveRule[]): string {\n\t\t\t\t\t\t\treturn newRules.map(e => {\n\t\t\t\t\t\t\t\tconst settingsUri = createCommandUri(openTerminalSettingsLinkCommandId, ConfigurationTarget.USER);\n\t\t\t\t\t\t\t\treturn `[\\`${e.key}\\`](${settingsUri.toString()} \"${localize('ruleTooltip', 'View rule in settings')}\")`;\n\t\t\t\t\t\t\t}).join(', ');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst mdTrustSettings = {\n\t\t\t\t\t\t\tisTrusted: {\n\t\t\t\t\t\t\t\tenabledCommands: [openTerminalSettingsLinkCommandId]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (newRules.length === 1) {\n\t\t\t\t\t\t\tterminalData.autoApproveInfo = new MarkdownString(localize('newRule', 'Auto approve rule {0} added', formatRuleLinks(newRules)), mdTrustSettings);\n\t\t\t\t\t\t} else if (newRules.length > 1) {\n\t\t\t\t\t\t\tterminalData.autoApproveInfo = new MarkdownString(localize('newRule.plural', 'Auto approve rules {0} added', formatRuleLinks(newRules)), mdTrustSettings);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoolConfirmKind = ToolConfirmKind.UserAction;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'configure': {\n\t\t\t\t\t\tthis.preferencesService.openSettings({\n\t\t\t\t\t\t\ttarget: ConfigurationTarget.USER,\n\t\t\t\t\t\t\tquery: `@id:${TerminalContribSettingId.AutoApprove}`,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdoComplete = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'sessionApproval': {\n\t\t\t\t\t\tconst sessionId = this.context.element.sessionId;\n\t\t\t\t\t\tthis.terminalChatService.setChatSessionAutoApproval(sessionId, true);\n\t\t\t\t\t\tconst disableUri = createCommandUri(disableSessionAutoApprovalCommandId, sessionId);\n\t\t\t\t\t\tconst mdTrustSettings = {\n\t\t\t\t\t\t\tisTrusted: {\n\t\t\t\t\t\t\t\tenabledCommands: [disableSessionAutoApprovalCommandId]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tterminalData.autoApproveInfo = new MarkdownString(`${localize('sessionApproval', 'All commands will be auto approved for this session')} ([${localize('sessionApproval.disable', 'Disable')}](${disableUri.toString()}))`, mdTrustSettings);\n\t\t\t\t\t\ttoolConfirmKind = ToolConfirmKind.UserAction;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (doComplete) {\n\t\t\t\tIChatToolInvocation.confirmWith(toolInvocation, { type: toolConfirmKind });\n\t\t\t\tthis.chatWidgetService.getWidgetBySessionResource(this.context.element.sessionResource)?.focusInput();\n\t\t\t}\n\t\t}));\n\t\tthis._register(confirmWidget.onDidChangeHeight(() => this._onDidChangeHeight.fire()));\n\n\t\tthis.domNode = confirmWidget.domNode;\n\t}\n\n\tprivate _createButtons(moreActions: (IChatConfirmationButton<TerminalNewAutoApproveButtonData> | Separator)[] | undefined): IChatConfirmationButton<boolean | TerminalNewAutoApproveButtonData>[] {\n\t\tconst getLabelAndTooltip = (label: string, actionId: string, tooltipDetail: string = label): { label: string; tooltip: string } => {\n\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(actionId)?.getLabel();\n\t\t\tconst tooltip = keybinding ? `${tooltipDetail} (${keybinding})` : (tooltipDetail);\n\t\t\treturn { label, tooltip };\n\t\t};\n\t\treturn [\n\t\t\t{\n\t\t\t\t...getLabelAndTooltip(localize('tool.allow', \"Allow\"), AcceptToolConfirmationActionId),\n\t\t\t\tdata: true,\n\t\t\t\tmoreActions,\n\t\t\t},\n\t\t\t{\n\t\t\t\t...getLabelAndTooltip(localize('tool.skip', \"Skip\"), SkipToolConfirmationActionId, localize('skip.detail', 'Proceed without executing this command')),\n\t\t\t\tdata: { type: 'skip' },\n\t\t\t\tisSecondary: true,\n\t\t\t},\n\t\t];\n\t}\n\n\tprivate async _showAutoApproveWarning(): Promise<boolean> {\n\t\tconst promptResult = await this.dialogService.prompt({\n\t\t\ttype: Severity.Info,\n\t\t\tmessage: localize('autoApprove.title', 'Enable terminal auto approve?'),\n\t\t\tbuttons: [{\n\t\t\t\tlabel: localize('autoApprove.button.enable', 'Enable'),\n\t\t\t\trun: () => true\n\t\t\t}],\n\t\t\tcancelButton: true,\n\t\t\tcustom: {\n\t\t\t\ticon: Codicon.shield,\n\t\t\t\tmarkdownDetails: [{\n\t\t\t\t\tmarkdown: new MarkdownString(localize('autoApprove.markdown', 'This will enable a configurable subset of commands to run in the terminal autonomously. It provides *best effort protections* and assumes the agent is not acting maliciously.')),\n\t\t\t\t}, {\n\t\t\t\t\tmarkdown: new MarkdownString(`[${localize('autoApprove.markdown2', 'Learn more about the potential risks and how to avoid them.')}](https://code.visualstudio.com/docs/copilot/security#_security-considerations)`)\n\t\t\t\t}],\n\t\t\t}\n\t\t});\n\t\treturn promptResult.result === true;\n\t}\n\n\tprivate _getUniqueCodeBlockUri() {\n\t\treturn URI.from({\n\t\t\tscheme: Schemas.vscodeChatCodeBlock,\n\t\t\tpath: generateUuid(),\n\t\t});\n\t}\n\n\tprivate _appendMarkdownPart(container: HTMLElement, message: string | IMarkdownString, codeBlockRenderOptions: ICodeBlockRenderOptions) {\n\t\tconst part = this._register(this.instantiationService.createInstance(ChatMarkdownContentPart,\n\t\t\t{\n\t\t\t\tkind: 'markdownContent',\n\t\t\t\tcontent: typeof message === 'string' ? new MarkdownString().appendMarkdown(message) : message\n\t\t\t},\n\t\t\tthis.context,\n\t\t\tthis.editorPool,\n\t\t\tfalse,\n\t\t\tthis.codeBlockStartIndex,\n\t\t\tthis.renderer,\n\t\t\tundefined,\n\t\t\tthis.currentWidthDelegate(),\n\t\t\tthis.codeBlockModelCollection,\n\t\t\t{ codeBlockRenderOptions },\n\t\t));\n\t\tappend(container, part.domNode);\n\t\tthis._register(part.onDidChangeHeight(() => this._onDidChangeHeight.fire()));\n\t}\n}\n"]}