{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatStatus.ts"],"names":[],"mappings":"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","file":"chatStatus.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/chatStatus.css';\nimport { safeIntl } from '../../../../base/common/date.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { language } from '../../../../base/common/platform.js';\nimport { localize } from '../../../../nls.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IStatusbarEntry, IStatusbarEntryAccessor, IStatusbarService, ShowTooltipCommand, StatusbarAlignment, StatusbarEntryKind } from '../../../services/statusbar/browser/statusbar.js';\nimport { $, addDisposableListener, append, clearNode, disposableWindowInterval, EventHelper, EventType, getWindow } from '../../../../base/browser/dom.js';\nimport { ChatEntitlement, ChatEntitlementService, IChatEntitlementService, IQuotaSnapshot, isProUser } from '../../../services/chat/common/chatEntitlementService.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { defaultButtonStyles, defaultCheckboxStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { Checkbox } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { contrastBorder, inputValidationErrorBorder, inputValidationInfoBorder, inputValidationWarningBorder, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IHoverService, nativeHoverDelegate } from '../../../../platform/hover/browser/hover.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Gesture, EventType as TouchEventType } from '../../../../base/browser/touch.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport product from '../../../../platform/product/common/product.js';\nimport { isObject } from '../../../../base/common/types.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification, IAction, toAction } from '../../../../base/common/actions.js';\nimport { parseLinkedText } from '../../../../base/common/linkedText.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IChatStatusItemService, ChatStatusEntry } from './chatStatusItemService.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { EditorResourceAccessor, SideBySideEditor } from '../../../common/editor.js';\nimport { getCodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInlineCompletionsService } from '../../../../editor/browser/services/inlineCompletionsService.js';\nimport { IChatSessionsService } from '../common/chatSessionsService.js';\nimport { IMarkdownRendererService } from '../../../../platform/markdown/browser/markdownRenderer.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { LEGACY_AGENT_SESSIONS_VIEW_ID } from '../common/constants.js';\nimport { AGENT_SESSIONS_VIEW_ID } from './agentSessions/agentSessions.js';\nimport { IPukuAuthService } from '../../../services/chat/common/pukuAuthService.js';\n\nconst gaugeForeground = registerColor('gauge.foreground', {\n\tdark: inputValidationInfoBorder,\n\tlight: inputValidationInfoBorder,\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, localize('gaugeForeground', \"Gauge foreground color.\"));\n\nregisterColor('gauge.background', {\n\tdark: transparent(gaugeForeground, 0.3),\n\tlight: transparent(gaugeForeground, 0.3),\n\thcDark: Color.white,\n\thcLight: Color.white\n}, localize('gaugeBackground', \"Gauge background color.\"));\n\nregisterColor('gauge.border', {\n\tdark: null,\n\tlight: null,\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, localize('gaugeBorder', \"Gauge border color.\"));\n\nconst gaugeWarningForeground = registerColor('gauge.warningForeground', {\n\tdark: inputValidationWarningBorder,\n\tlight: inputValidationWarningBorder,\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, localize('gaugeWarningForeground', \"Gauge warning foreground color.\"));\n\nregisterColor('gauge.warningBackground', {\n\tdark: transparent(gaugeWarningForeground, 0.3),\n\tlight: transparent(gaugeWarningForeground, 0.3),\n\thcDark: Color.white,\n\thcLight: Color.white\n}, localize('gaugeWarningBackground', \"Gauge warning background color.\"));\n\nconst gaugeErrorForeground = registerColor('gauge.errorForeground', {\n\tdark: inputValidationErrorBorder,\n\tlight: inputValidationErrorBorder,\n\thcDark: contrastBorder,\n\thcLight: contrastBorder\n}, localize('gaugeErrorForeground', \"Gauge error foreground color.\"));\n\nregisterColor('gauge.errorBackground', {\n\tdark: transparent(gaugeErrorForeground, 0.3),\n\tlight: transparent(gaugeErrorForeground, 0.3),\n\thcDark: Color.white,\n\thcLight: Color.white\n}, localize('gaugeErrorBackground', \"Gauge error background color.\"));\n\n//#endregion\n\nconst defaultChat = {\n\tcompletionsEnablementSetting: product.defaultChatAgent?.completionsEnablementSetting ?? '',\n\tnextEditSuggestionsSetting: product.defaultChatAgent?.nextEditSuggestionsSetting ?? '',\n\tmanageSettingsUrl: product.defaultChatAgent?.manageSettingsUrl ?? '',\n\tmanageOverageUrl: product.defaultChatAgent?.manageOverageUrl ?? '',\n\tprovider: product.defaultChatAgent?.provider ?? { default: { id: '', name: '' }, enterprise: { id: '', name: '' }, apple: { id: '', name: '' }, google: { id: '', name: '' } },\n\ttermsStatementUrl: product.defaultChatAgent?.termsStatementUrl ?? '',\n\tprivacyStatementUrl: product.defaultChatAgent?.privacyStatementUrl ?? ''\n};\n\nexport class ChatStatusBarEntry extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.chatStatusBarEntry';\n\n\tprivate entry: IStatusbarEntryAccessor | undefined = undefined;\n\n\tprivate dashboard = new Lazy<ChatStatusDashboard>(() => this.instantiationService.createInstance(ChatStatusDashboard));\n\n\tprivate readonly activeCodeEditorListener = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\t@IChatEntitlementService private readonly chatEntitlementService: ChatEntitlementService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IStatusbarService private readonly statusbarService: IStatusbarService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IInlineCompletionsService private readonly completionsService: IInlineCompletionsService,\n\t\t@IChatSessionsService private readonly chatSessionsService: IChatSessionsService,\n\t) {\n\t\tsuper();\n\n\t\tthis.update();\n\t\tthis.registerListeners();\n\t}\n\n\tprivate update(): void {\n\t\tconst sentiment = this.chatEntitlementService.sentiment;\n\t\tif (!sentiment.hidden) {\n\t\t\tconst props = this.getEntryProps();\n\t\t\tif (this.entry) {\n\t\t\t\tthis.entry.update(props);\n\t\t\t} else {\n\t\t\t\tthis.entry = this.statusbarService.addEntry(props, 'chat.statusBarEntry', StatusbarAlignment.RIGHT, { location: { id: 'status.editor.mode', priority: 100.1 }, alignment: StatusbarAlignment.RIGHT });\n\t\t\t}\n\t\t} else {\n\t\t\tthis.entry?.dispose();\n\t\t\tthis.entry = undefined;\n\t\t}\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.chatEntitlementService.onDidChangeQuotaExceeded(() => this.update()));\n\t\tthis._register(this.chatEntitlementService.onDidChangeSentiment(() => this.update()));\n\t\tthis._register(this.chatEntitlementService.onDidChangeEntitlement(() => this.update()));\n\t\tthis._register(this.completionsService.onDidChangeIsSnoozing(() => this.update()));\n\t\tthis._register(this.chatSessionsService.onDidChangeInProgress(() => this.update()));\n\n\t\tthis._register(this.editorService.onDidActiveEditorChange(() => this.onDidActiveEditorChange()));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(defaultChat.completionsEnablementSetting)) {\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate onDidActiveEditorChange(): void {\n\t\tthis.update();\n\n\t\tthis.activeCodeEditorListener.clear();\n\n\t\t// Listen to language changes in the active code editor\n\t\tconst activeCodeEditor = getCodeEditor(this.editorService.activeTextEditorControl);\n\t\tif (activeCodeEditor) {\n\t\t\tthis.activeCodeEditorListener.value = activeCodeEditor.onDidChangeModelLanguage(() => {\n\t\t\t\tthis.update();\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate getEntryProps(): IStatusbarEntry {\n\t\tlet text = '$(sparkle)';\n\t\tlet ariaLabel = localize('chatStatusAria', \"Puku status\");\n\t\tlet kind: StatusbarEntryKind | undefined;\n\n\t\tif (isNewUser(this.chatEntitlementService)) {\n\t\t\tconst entitlement = this.chatEntitlementService.entitlement;\n\n\t\t\t// Finish Setup\n\t\t\tif (\n\t\t\t\tthis.chatEntitlementService.sentiment.later ||\t// user skipped setup\n\t\t\t\tentitlement === ChatEntitlement.Available ||\t// user is entitled\n\t\t\t\tisProUser(entitlement) ||\t\t\t\t\t\t// user is already pro\n\t\t\t\tentitlement === ChatEntitlement.Free\t\t\t// user is already free\n\t\t\t) {\n\t\t\t\tconst finishSetup = localize('finishSetup', \"Finish Setup\");\n\n\t\t\t\ttext = `$(sparkle) ${finishSetup}`;\n\t\t\t\tariaLabel = finishSetup;\n\t\t\t\tkind = 'prominent';\n\t\t\t}\n\t\t} else {\n\t\t\tconst chatQuotaExceeded = this.chatEntitlementService.quotas.chat?.percentRemaining === 0;\n\t\t\tconst completionsQuotaExceeded = this.chatEntitlementService.quotas.completions?.percentRemaining === 0;\n\t\t\tconst chatSessionsInProgressCount = this.chatSessionsService.getInProgress().reduce((total, item) => total + item.count, 0);\n\n\t\t\t// Disabled\n\t\t\tif (this.chatEntitlementService.sentiment.disabled || this.chatEntitlementService.sentiment.untrusted) {\n\t\t\t\ttext = '$(copilot-unavailable)';\n\t\t\t\tariaLabel = localize('copilotDisabledStatus', \"Puku disabled\");\n\t\t\t}\n\n\t\t\t// Sessions in progress\n\t\t\telse if (chatSessionsInProgressCount > 0) {\n\t\t\t\ttext = '$(copilot-in-progress)';\n\t\t\t\tif (chatSessionsInProgressCount > 1) {\n\t\t\t\t\tariaLabel = localize('chatSessionsInProgressStatus', \"{0} agent sessions in progress\", chatSessionsInProgressCount);\n\t\t\t\t} else {\n\t\t\t\t\tariaLabel = localize('chatSessionInProgressStatus', \"1 agent session in progress\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Signed out - Show \"Sign in to Puku\" instead of \"Signed out\"\n\t\t\telse if (this.chatEntitlementService.entitlement === ChatEntitlement.Unknown) {\n\t\t\t\tconst signInMessage = localize('signInToPuku', \"Sign in to Puku\");\n\n\t\t\t\ttext = `$(account) ${signInMessage}`;\n\t\t\t\tariaLabel = signInMessage;\n\t\t\t\tkind = 'prominent';\n\t\t\t}\n\n\t\t\t// Free Quota Exceeded\n\t\t\telse if (this.chatEntitlementService.entitlement === ChatEntitlement.Free && (chatQuotaExceeded || completionsQuotaExceeded)) {\n\t\t\t\tlet quotaWarning: string;\n\t\t\t\tif (chatQuotaExceeded && !completionsQuotaExceeded) {\n\t\t\t\t\tquotaWarning = localize('chatQuotaExceededStatus', \"Chat quota reached\");\n\t\t\t\t} else if (completionsQuotaExceeded && !chatQuotaExceeded) {\n\t\t\t\t\tquotaWarning = localize('completionsQuotaExceededStatus', \"Inline suggestions quota reached\");\n\t\t\t\t} else {\n\t\t\t\t\tquotaWarning = localize('chatAndCompletionsQuotaExceededStatus', \"Quota reached\");\n\t\t\t\t}\n\n\t\t\t\ttext = `$(copilot-warning) ${quotaWarning}`;\n\t\t\t\tariaLabel = quotaWarning;\n\t\t\t\tkind = 'prominent';\n\t\t\t}\n\n\t\t\t// Completions Disabled\n\t\t\telse if (this.editorService.activeTextEditorLanguageId && !isCompletionsEnabled(this.configurationService, this.editorService.activeTextEditorLanguageId)) {\n\t\t\t\ttext = '$(copilot-unavailable)';\n\t\t\t\tariaLabel = localize('completionsDisabledStatus', \"Inline suggestions disabled\");\n\t\t\t}\n\n\t\t\t// Completions Snoozed\n\t\t\telse if (this.completionsService.isSnoozing()) {\n\t\t\t\ttext = '$(copilot-snooze)';\n\t\t\t\tariaLabel = localize('completionsSnoozedStatus', \"Inline suggestions snoozed\");\n\t\t\t}\n\t\t}\n\n\t\tconst baseResult = {\n\t\t\tname: localize('chatStatus', \"Puku Status\"),\n\t\t\ttext,\n\t\t\tariaLabel,\n\t\t\tcommand: ShowTooltipCommand,\n\t\t\tshowInAllWindows: true,\n\t\t\tkind,\n\t\t\ttooltip: { element: (token: CancellationToken) => this.dashboard.value.show(token) }\n\t\t};\n\n\t\treturn baseResult;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.entry?.dispose();\n\t\tthis.entry = undefined;\n\t}\n}\n\nfunction isNewUser(chatEntitlementService: IChatEntitlementService): boolean {\n\treturn !chatEntitlementService.sentiment.installed ||\t\t\t\t\t// chat not installed\n\t\tchatEntitlementService.entitlement === ChatEntitlement.Available;\t// not yet signed up to chat\n}\n\nfunction canUseChat(chatEntitlementService: IChatEntitlementService): boolean {\n\tif (!chatEntitlementService.sentiment.installed || chatEntitlementService.sentiment.disabled || chatEntitlementService.sentiment.untrusted) {\n\t\treturn false; // chat not installed or not enabled\n\t}\n\n\tif (chatEntitlementService.entitlement === ChatEntitlement.Unknown || chatEntitlementService.entitlement === ChatEntitlement.Available) {\n\t\treturn chatEntitlementService.anonymous; // signed out or not-yet-signed-up users can only use Chat if anonymous access is allowed\n\t}\n\n\tif (chatEntitlementService.entitlement === ChatEntitlement.Free && chatEntitlementService.quotas.chat?.percentRemaining === 0 && chatEntitlementService.quotas.completions?.percentRemaining === 0) {\n\t\treturn false; // free user with no quota left\n\t}\n\n\treturn true;\n}\n\nfunction isCompletionsEnabled(configurationService: IConfigurationService, modeId: string = '*'): boolean {\n\tconst result = configurationService.getValue<Record<string, boolean>>(defaultChat.completionsEnablementSetting);\n\tif (!isObject(result)) {\n\t\treturn false;\n\t}\n\n\tif (typeof result[modeId] !== 'undefined') {\n\t\treturn Boolean(result[modeId]); // go with setting if explicitly defined\n\t}\n\n\treturn Boolean(result['*']); // fallback to global setting otherwise\n}\n\ninterface ISettingsAccessor {\n\treadSetting: () => boolean;\n\twriteSetting: (value: boolean) => Promise<void>;\n}\n\ntype ChatSettingChangedClassification = {\n\towner: 'bpasero';\n\tcomment: 'Provides insight into chat settings changed from the chat status entry.';\n\tsettingIdentifier: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The identifier of the setting that changed.' };\n\tsettingMode?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The optional editor language for which the setting changed.' };\n\tsettingEnablement: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the setting got enabled or disabled.' };\n};\ntype ChatSettingChangedEvent = {\n\tsettingIdentifier: string;\n\tsettingMode?: string;\n\tsettingEnablement: 'enabled' | 'disabled';\n};\n\nclass ChatStatusDashboard extends Disposable {\n\n\tprivate readonly element = $('div.chat-status-bar-entry-tooltip');\n\n\tprivate readonly dateFormatter = safeIntl.DateTimeFormat(language, { year: 'numeric', month: 'long', day: 'numeric' });\n\tprivate readonly dateTimeFormatter = safeIntl.DateTimeFormat(language, { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric' });\n\tprivate readonly quotaPercentageFormatter = safeIntl.NumberFormat(undefined, { maximumFractionDigits: 1, minimumFractionDigits: 0 });\n\tprivate readonly quotaOverageFormatter = safeIntl.NumberFormat(undefined, { maximumFractionDigits: 2, minimumFractionDigits: 0 });\n\n\tprivate readonly entryDisposables = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\t@IChatEntitlementService private readonly chatEntitlementService: ChatEntitlementService,\n\t\t@IChatStatusItemService private readonly chatStatusItemService: IChatStatusItemService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ITextResourceConfigurationService private readonly textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IInlineCompletionsService private readonly inlineCompletionsService: IInlineCompletionsService,\n\t\t@IChatSessionsService private readonly chatSessionsService: IChatSessionsService,\n\t\t@IMarkdownRendererService private readonly markdownRendererService: IMarkdownRendererService,\n\t\t@IPukuAuthService private readonly pukuAuthService: IPukuAuthService,\n\t) {\n\t\tsuper();\n\t}\n\n\tshow(token: CancellationToken): HTMLElement {\n\t\tclearNode(this.element);\n\n\t\tconst disposables = this.entryDisposables.value = new DisposableStore();\n\t\tdisposables.add(token.onCancellationRequested(() => disposables.dispose()));\n\n\t\tlet needsSeparator = false;\n\t\tconst addSeparator = (label?: string, action?: IAction) => {\n\t\t\tif (needsSeparator) {\n\t\t\t\tthis.element.appendChild($('hr'));\n\t\t\t}\n\n\t\t\tif (label || action) {\n\t\t\t\tthis.renderHeader(this.element, disposables, label ?? '', action);\n\t\t\t}\n\n\t\t\tneedsSeparator = true;\n\t\t};\n\n\t\t// Quota Indicator\n\t\tconst { chat: chatQuota, completions: completionsQuota, premiumChat: premiumChatQuota, resetDate, resetDateHasTime } = this.chatEntitlementService.quotas;\n\t\tif (chatQuota || completionsQuota || premiumChatQuota) {\n\n\t\t\taddSeparator(localize('usageTitle', \"Usage\"), toAction({\n\t\t\t\tid: 'workbench.action.managePuku',\n\t\t\t\tlabel: localize('quotaLabel', \"Manage Chat\"),\n\t\t\t\ttooltip: localize('quotaTooltip', \"Manage Chat\"),\n\t\t\t\tclass: ThemeIcon.asClassName(Codicon.settings),\n\t\t\t\trun: () => this.runCommandAndClose(() => this.openerService.open(URI.parse(defaultChat.manageSettingsUrl))),\n\t\t\t}));\n\n\t\t\tconst completionsQuotaIndicator = completionsQuota && (completionsQuota.total > 0 || completionsQuota.unlimited) ? this.createQuotaIndicator(this.element, disposables, completionsQuota, localize('completionsLabel', \"Inline Suggestions\"), false) : undefined;\n\t\t\tconst chatQuotaIndicator = chatQuota && (chatQuota.total > 0 || chatQuota.unlimited) ? this.createQuotaIndicator(this.element, disposables, chatQuota, localize('chatsLabel', \"Chat messages\"), false) : undefined;\n\t\t\tconst premiumChatQuotaIndicator = premiumChatQuota && (premiumChatQuota.total > 0 || premiumChatQuota.unlimited) ? this.createQuotaIndicator(this.element, disposables, premiumChatQuota, localize('premiumChatsLabel', \"Premium requests\"), true) : undefined;\n\n\t\t\tif (resetDate) {\n\t\t\t\tthis.element.appendChild($('div.description', undefined, localize('limitQuota', \"Allowance resets {0}.\", resetDateHasTime ? this.dateTimeFormatter.value.format(new Date(resetDate)) : this.dateFormatter.value.format(new Date(resetDate)))));\n\t\t\t}\n\n\t\t\tif (this.chatEntitlementService.entitlement === ChatEntitlement.Free && (Number(chatQuota?.percentRemaining) <= 25 || Number(completionsQuota?.percentRemaining) <= 25)) {\n\t\t\t\tconst upgradeProButton = disposables.add(new Button(this.element, { ...defaultButtonStyles, hoverDelegate: nativeHoverDelegate, secondary: canUseChat(this.chatEntitlementService) /* use secondary color when chat can still be used */ }));\n\t\t\t\tupgradeProButton.label = localize('upgradeToCopilotPro', \"Upgrade to Puku AI Pro\");\n\t\t\t\tdisposables.add(upgradeProButton.onDidClick(() => this.runCommandAndClose('workbench.action.chat.upgradePlan')));\n\t\t\t}\n\n\t\t\t(async () => {\n\t\t\t\tawait this.chatEntitlementService.update(token);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { chat: chatQuota, completions: completionsQuota, premiumChat: premiumChatQuota } = this.chatEntitlementService.quotas;\n\t\t\t\tif (completionsQuota) {\n\t\t\t\t\tcompletionsQuotaIndicator?.(completionsQuota);\n\t\t\t\t}\n\t\t\t\tif (chatQuota) {\n\t\t\t\t\tchatQuotaIndicator?.(chatQuota);\n\t\t\t\t}\n\t\t\t\tif (premiumChatQuota) {\n\t\t\t\t\tpremiumChatQuotaIndicator?.(premiumChatQuota);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\n\t\t// Anonymous Indicator\n\t\telse if (this.chatEntitlementService.anonymous && this.chatEntitlementService.sentiment.installed) {\n\t\t\taddSeparator(localize('anonymousTitle', \"Usage\"));\n\n\t\t\tthis.createQuotaIndicator(this.element, disposables, localize('quotaLimited', \"Limited\"), localize('completionsLabel', \"Inline Suggestions\"), false);\n\t\t\tthis.createQuotaIndicator(this.element, disposables, localize('quotaLimited', \"Limited\"), localize('chatsLabel', \"Chat messages\"), false);\n\t\t}\n\n\t\t// Chat sessions\n\t\t{\n\t\t\tlet chatSessionsElement: HTMLElement | undefined;\n\n\t\t\tconst updateStatus = () => {\n\t\t\t\tconst inProgress = this.chatSessionsService.getInProgress();\n\t\t\t\tif (inProgress.some(item => item.count > 0)) {\n\n\t\t\t\t\taddSeparator(localize('chatAgentSessionsTitle', \"Agent Sessions\"), toAction({\n\t\t\t\t\t\tid: 'workbench.view.chat.status.sessions',\n\t\t\t\t\t\tlabel: localize('viewChatSessionsLabel', \"View Agent Sessions\"),\n\t\t\t\t\t\ttooltip: localize('viewChatSessionsTooltip', \"View Agent Sessions\"),\n\t\t\t\t\t\tclass: ThemeIcon.asClassName(Codicon.eye),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\t// TODO@bpasero remove this check once settled\n\t\t\t\t\t\t\tif (this.configurationService.getValue('chat.agentSessionsViewLocation') === 'single-view') {\n\t\t\t\t\t\t\t\tthis.runCommandAndClose(AGENT_SESSIONS_VIEW_ID);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.runCommandAndClose(LEGACY_AGENT_SESSIONS_VIEW_ID);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\n\t\t\t\t\tfor (const { displayName, count } of inProgress) {\n\t\t\t\t\t\tif (count > 0) {\n\t\t\t\t\t\t\tconst text = localize('inProgressChatSession', \"$(loading~spin) {0} in progress\", displayName);\n\t\t\t\t\t\t\tchatSessionsElement = this.element.appendChild($('div.description'));\n\t\t\t\t\t\t\tconst parts = renderLabelWithIcons(text);\n\t\t\t\t\t\t\tchatSessionsElement.append(...parts);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tchatSessionsElement?.remove();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tupdateStatus();\n\t\t\tdisposables.add(this.chatSessionsService.onDidChangeInProgress(updateStatus));\n\t\t}\n\n\t\t// Contributions\n\t\t{\n\t\t\tfor (const item of this.chatStatusItemService.getEntries()) {\n\t\t\t\taddSeparator();\n\n\t\t\t\tconst itemDisposables = disposables.add(new MutableDisposable());\n\n\t\t\t\tlet rendered = this.renderContributedChatStatusItem(item);\n\t\t\t\titemDisposables.value = rendered.disposables;\n\t\t\t\tthis.element.appendChild(rendered.element);\n\n\t\t\t\tdisposables.add(this.chatStatusItemService.onDidChange(e => {\n\t\t\t\t\tif (e.entry.id === item.id) {\n\t\t\t\t\t\tconst previousElement = rendered.element;\n\n\t\t\t\t\t\trendered = this.renderContributedChatStatusItem(e.entry);\n\t\t\t\t\t\titemDisposables.value = rendered.disposables;\n\n\t\t\t\t\t\tpreviousElement.replaceWith(rendered.element);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\t// Settings\n\t\t{\n\t\t\tconst chatSentiment = this.chatEntitlementService.sentiment;\n\t\t\taddSeparator(localize('inlineSuggestions', \"Inline Suggestions\"), chatSentiment.installed && !chatSentiment.disabled && !chatSentiment.untrusted ? toAction({\n\t\t\t\tid: 'workbench.action.openChatSettings',\n\t\t\t\tlabel: localize('settingsLabel', \"Settings\"),\n\t\t\t\ttooltip: localize('settingsTooltip', \"Open Settings\"),\n\t\t\t\tclass: ThemeIcon.asClassName(Codicon.settingsGear),\n\t\t\t\trun: () => this.runCommandAndClose(() => this.commandService.executeCommand('workbench.action.openSettings', { query: `@id:${defaultChat.completionsEnablementSetting} @id:${defaultChat.nextEditSuggestionsSetting}` })),\n\t\t\t}) : undefined);\n\n\t\t\tthis.createSettings(this.element, disposables);\n\t\t}\n\n\t\t// Completions Snooze\n\t\tif (canUseChat(this.chatEntitlementService)) {\n\t\t\tconst snooze = append(this.element, $('div.snooze-completions'));\n\t\t\tthis.createCompletionsSnooze(snooze, localize('settings.snooze', \"Snooze\"), disposables);\n\t\t}\n\n\t\t// New to Chat / Signed out\n\t\t{\n\t\t\tconst newUser = isNewUser(this.chatEntitlementService);\n\t\t\tconst anonymousUser = this.chatEntitlementService.anonymous;\n\t\t\tconst disabled = this.chatEntitlementService.sentiment.disabled || this.chatEntitlementService.sentiment.untrusted;\n\t\t\tconst signedOut = this.chatEntitlementService.entitlement === ChatEntitlement.Unknown;\n\t\t\tif (newUser || signedOut || disabled) {\n\t\t\t\taddSeparator();\n\n\t\t\t\tlet descriptionText: string | MarkdownString;\n\t\t\t\tlet descriptionClass = '.description';\n\t\t\t\tif (newUser && anonymousUser) {\n\t\t\t\t\tdescriptionText = new MarkdownString(localize({ key: 'activeDescriptionAnonymous', comment: ['{Locked=\"]({2})\"}', '{Locked=\"]({3})\"}'] }, \"By continuing with {0} Copilot, you agree to {1}'s [Terms]({2}) and [Privacy Statement]({3})\", defaultChat.provider.default.name, defaultChat.provider.default.name, defaultChat.termsStatementUrl, defaultChat.privacyStatementUrl), { isTrusted: true });\n\t\t\t\t\tdescriptionClass = `${descriptionClass}.terms`;\n\t\t\t\t} else if (newUser) {\n\t\t\t\t\tdescriptionText = localize('activateDescription', \"Set up Puku to use AI features.\");\n\t\t\t\t} else if (anonymousUser) {\n\t\t\t\t\tdescriptionText = localize('enableMoreDescription', \"Sign in to enable more Puku AI features.\");\n\t\t\t\t} else if (disabled) {\n\t\t\t\t\tdescriptionText = localize('enableDescription', \"Enable Puku to use AI features.\");\n\t\t\t\t} else {\n\t\t\t\t\tdescriptionText = localize('signInDescription', \"Sign in to use Puku AI features.\");\n\t\t\t\t}\n\n\t\t\t\tlet buttonLabel: string;\n\t\t\t\tif (newUser) {\n\t\t\t\t\tbuttonLabel = localize('enableAIFeatures', \"Use AI Features\");\n\t\t\t\t} else if (anonymousUser) {\n\t\t\t\t\tbuttonLabel = localize('enableMoreAIFeatures', \"Enable more AI Features\");\n\t\t\t\t} else if (disabled) {\n\t\t\t\t\tbuttonLabel = localize('enableCopilotButton', \"Enable AI Features\");\n\t\t\t\t} else {\n\t\t\t\t\tbuttonLabel = localize('signInToUseAIFeatures', \"Sign in to use AI Features\");\n\t\t\t\t}\n\n\t\t\t\t// Puku Editor: Use Puku sign-in command\n\t\t\t\tconst commandId = 'puku.auth.signIn';\n\n\t\t\t\tif (typeof descriptionText === 'string') {\n\t\t\t\t\tthis.element.appendChild($(`div${descriptionClass}`, undefined, descriptionText));\n\t\t\t\t} else {\n\t\t\t\t\tthis.element.appendChild($(`div${descriptionClass}`, undefined, disposables.add(this.markdownRendererService.render(descriptionText)).element));\n\t\t\t\t}\n\n\t\t\t\tconst button = disposables.add(new Button(this.element, { ...defaultButtonStyles, hoverDelegate: nativeHoverDelegate }));\n\t\t\t\tbutton.label = buttonLabel;\n\t\t\t\tdisposables.add(button.onDidClick(() => this.runCommandAndClose(commandId)));\n\t\t\t}\n\t\t}\n\n\t\t// Puku Editor: Show Puku account status or sign-in option\n\t\t{\n\t\t\tconst { chat: chatQuota, completions: completionsQuota, premiumChat: premiumChatQuota } = this.chatEntitlementService.quotas;\n\t\t\tconst hasQuotaInfo = chatQuota || completionsQuota || premiumChatQuota;\n\t\t\tconst newUser = isNewUser(this.chatEntitlementService);\n\t\t\tconst signedOut = this.chatEntitlementService.entitlement === ChatEntitlement.Unknown;\n\t\t\tconst disabled = this.chatEntitlementService.sentiment.disabled || this.chatEntitlementService.sentiment.untrusted;\n\t\t\tconst pukuAuthenticated = this.pukuAuthService.isAuthenticated();\n\n\t\t\t// Show Puku sign-in when we have quota info but user is NOT authenticated with Puku\n\t\t\tif (hasQuotaInfo && !newUser && !signedOut && !disabled && !pukuAuthenticated) {\n\t\t\t\taddSeparator(localize('pukuAccount', \"Puku Account\"));\n\n\t\t\t\tthis.element.appendChild($('div.description', undefined, localize('pukuSignInDescription', \"Sign in to enable semantic search and indexing.\")));\n\n\t\t\t\tconst pukuButton = disposables.add(new Button(this.element, { ...defaultButtonStyles, hoverDelegate: nativeHoverDelegate, secondary: true }));\n\t\t\t\tpukuButton.label = localize('signIn', \"Sign in\");\n\t\t\t\tdisposables.add(pukuButton.onDidClick(() => this.runCommandAndClose('puku.signIn')));\n\t\t\t}\n\t\t\t// Show authenticated status when user is signed in with Puku\n\t\t\telse if (pukuAuthenticated && hasQuotaInfo && !newUser && !signedOut && !disabled) {\n\t\t\t\taddSeparator(localize('pukuAccount', \"Puku Account\"));\n\n\t\t\t\tconst session = this.pukuAuthService.session;\n\t\t\t\tif (session) {\n\t\t\t\t\tthis.element.appendChild($('div.description', undefined, localize('pukuSignedIn', \"Signed in as {0}\", session.user.email)));\n\n\t\t\t\t\tconst signOutButton = disposables.add(new Button(this.element, { ...defaultButtonStyles, hoverDelegate: nativeHoverDelegate, secondary: true }));\n\t\t\t\t\tsignOutButton.label = localize('signOut', \"Sign out\");\n\t\t\t\t\tdisposables.add(signOutButton.onDidClick(async () => {\n\t\t\t\t\t\tawait this.pukuAuthService.signOut();\n\t\t\t\t\t\tthis.runCommandAndClose('workbench.action.reloadWindow');\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tprivate renderHeader(container: HTMLElement, disposables: DisposableStore, label: string, action?: IAction): void {\n\t\tconst header = container.appendChild($('div.header', undefined, label ?? ''));\n\n\t\tif (action) {\n\t\t\tconst toolbar = disposables.add(new ActionBar(header, { hoverDelegate: nativeHoverDelegate }));\n\t\t\ttoolbar.push([action], { icon: true, label: false });\n\t\t}\n\t}\n\n\tprivate renderContributedChatStatusItem(item: ChatStatusEntry): { element: HTMLElement; disposables: DisposableStore } {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst itemElement = $('div.contribution');\n\n\t\tconst headerLabel = typeof item.label === 'string' ? item.label : item.label.label;\n\t\tconst headerLink = typeof item.label === 'string' ? undefined : item.label.link;\n\t\tthis.renderHeader(itemElement, disposables, headerLabel, headerLink ? toAction({\n\t\t\tid: 'workbench.action.openChatStatusItemLink',\n\t\t\tlabel: localize('learnMore', \"Learn More\"),\n\t\t\ttooltip: localize('learnMore', \"Learn More\"),\n\t\t\tclass: ThemeIcon.asClassName(Codicon.linkExternal),\n\t\t\trun: () => this.runCommandAndClose(() => this.openerService.open(URI.parse(headerLink))),\n\t\t}) : undefined);\n\n\t\tconst itemBody = itemElement.appendChild($('div.body'));\n\n\t\tconst description = itemBody.appendChild($('span.description'));\n\t\tthis.renderTextPlus(description, item.description, disposables);\n\n\t\tif (item.detail) {\n\t\t\tconst detail = itemBody.appendChild($('div.detail-item'));\n\t\t\tthis.renderTextPlus(detail, item.detail, disposables);\n\t\t}\n\n\t\treturn { element: itemElement, disposables };\n\t}\n\n\tprivate renderTextPlus(target: HTMLElement, text: string, store: DisposableStore): void {\n\t\tfor (const node of parseLinkedText(text).nodes) {\n\t\t\tif (typeof node === 'string') {\n\t\t\t\tconst parts = renderLabelWithIcons(node);\n\t\t\t\ttarget.append(...parts);\n\t\t\t} else {\n\t\t\t\tstore.add(new Link(target, node, undefined, this.hoverService, this.openerService));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate runCommandAndClose(commandOrFn: string | Function, ...args: unknown[]): void {\n\t\tif (typeof commandOrFn === 'function') {\n\t\t\tcommandOrFn(...args);\n\t\t} else {\n\t\t\tthis.telemetryService.publicLog2<WorkbenchActionExecutedEvent, WorkbenchActionExecutedClassification>('workbenchActionExecuted', { id: commandOrFn, from: 'chat-status' });\n\t\t\tthis.commandService.executeCommand(commandOrFn, ...args);\n\t\t}\n\n\t\tthis.hoverService.hideHover(true);\n\t}\n\n\tprivate createQuotaIndicator(container: HTMLElement, disposables: DisposableStore, quota: IQuotaSnapshot | string, label: string, supportsOverage: boolean): (quota: IQuotaSnapshot | string) => void {\n\t\tconst quotaValue = $('span.quota-value');\n\t\tconst quotaBit = $('div.quota-bit');\n\t\tconst overageLabel = $('span.overage-label');\n\n\t\tconst quotaIndicator = container.appendChild($('div.quota-indicator', undefined,\n\t\t\t$('div.quota-label', undefined,\n\t\t\t\t$('span', undefined, label),\n\t\t\t\tquotaValue\n\t\t\t),\n\t\t\t$('div.quota-bar', undefined,\n\t\t\t\tquotaBit\n\t\t\t),\n\t\t\t$('div.description', undefined,\n\t\t\t\toverageLabel\n\t\t\t)\n\t\t));\n\n\t\tif (supportsOverage && (this.chatEntitlementService.entitlement === ChatEntitlement.Pro || this.chatEntitlementService.entitlement === ChatEntitlement.ProPlus)) {\n\t\t\tconst manageOverageButton = disposables.add(new Button(quotaIndicator, { ...defaultButtonStyles, secondary: true, hoverDelegate: nativeHoverDelegate }));\n\t\t\tmanageOverageButton.label = localize('enableAdditionalUsage', \"Manage paid premium requests\");\n\t\t\tdisposables.add(manageOverageButton.onDidClick(() => this.runCommandAndClose(() => this.openerService.open(URI.parse(defaultChat.manageOverageUrl)))));\n\t\t}\n\n\t\tconst update = (quota: IQuotaSnapshot | string) => {\n\t\t\tquotaIndicator.classList.remove('error');\n\t\t\tquotaIndicator.classList.remove('warning');\n\n\t\t\tlet usedPercentage: number;\n\t\t\tif (typeof quota === 'string' || quota.unlimited) {\n\t\t\t\tusedPercentage = 0;\n\t\t\t} else {\n\t\t\t\tusedPercentage = Math.max(0, 100 - quota.percentRemaining);\n\t\t\t}\n\n\t\t\tif (typeof quota === 'string') {\n\t\t\t\tquotaValue.textContent = quota;\n\t\t\t} else if (quota.unlimited) {\n\t\t\t\tquotaValue.textContent = localize('quotaUnlimited', \"Included\");\n\t\t\t} else if (quota.overageCount) {\n\t\t\t\tquotaValue.textContent = localize('quotaDisplayWithOverage', \"+{0} requests\", this.quotaOverageFormatter.value.format(quota.overageCount));\n\t\t\t} else {\n\t\t\t\tquotaValue.textContent = localize('quotaDisplay', \"{0}%\", this.quotaPercentageFormatter.value.format(usedPercentage));\n\t\t\t}\n\n\t\t\tquotaBit.style.width = `${usedPercentage}%`;\n\n\t\t\tif (usedPercentage >= 90) {\n\t\t\t\tquotaIndicator.classList.add('error');\n\t\t\t} else if (usedPercentage >= 75) {\n\t\t\t\tquotaIndicator.classList.add('warning');\n\t\t\t}\n\n\t\t\tif (supportsOverage) {\n\t\t\t\tif (typeof quota !== 'string' && quota?.overageEnabled) {\n\t\t\t\t\toverageLabel.textContent = localize('additionalUsageEnabled', \"Additional paid premium requests enabled.\");\n\t\t\t\t} else {\n\t\t\t\t\toverageLabel.textContent = localize('additionalUsageDisabled', \"Additional paid premium requests disabled.\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toverageLabel.textContent = '';\n\t\t\t}\n\t\t};\n\n\t\tupdate(quota);\n\n\t\treturn update;\n\t}\n\n\tprivate createSettings(container: HTMLElement, disposables: DisposableStore): HTMLElement {\n\t\tconst modeId = this.editorService.activeTextEditorLanguageId;\n\t\tconst settings = container.appendChild($('div.settings'));\n\n\t\t// --- Inline Suggestions\n\t\t{\n\t\t\tconst globalSetting = append(settings, $('div.setting'));\n\t\t\tthis.createInlineSuggestionsSetting(globalSetting, localize('settings.codeCompletions.allFiles', \"All files\"), '*', disposables);\n\n\t\t\tif (modeId) {\n\t\t\t\tconst languageSetting = append(settings, $('div.setting'));\n\t\t\t\tthis.createInlineSuggestionsSetting(languageSetting, localize('settings.codeCompletions.language', \"{0}\", this.languageService.getLanguageName(modeId) ?? modeId), modeId, disposables);\n\t\t\t}\n\t\t}\n\n\t\t// --- Next edit suggestions\n\t\t{\n\t\t\tconst setting = append(settings, $('div.setting'));\n\t\t\tthis.createNextEditSuggestionsSetting(setting, localize('settings.nextEditSuggestions', \"Next edit suggestions\"), this.getCompletionsSettingAccessor(modeId), disposables);\n\t\t}\n\n\t\treturn settings;\n\t}\n\n\tprivate createSetting(container: HTMLElement, settingIdsToReEvaluate: string[], label: string, accessor: ISettingsAccessor, disposables: DisposableStore): Checkbox {\n\t\tconst checkbox = disposables.add(new Checkbox(label, Boolean(accessor.readSetting()), { ...defaultCheckboxStyles }));\n\t\tcontainer.appendChild(checkbox.domNode);\n\n\t\tconst settingLabel = append(container, $('span.setting-label', undefined, label));\n\t\tdisposables.add(Gesture.addTarget(settingLabel));\n\t\t[EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n\t\t\tdisposables.add(addDisposableListener(settingLabel, eventType, e => {\n\t\t\t\tif (checkbox?.enabled) {\n\t\t\t\t\tEventHelper.stop(e, true);\n\n\t\t\t\t\tcheckbox.checked = !checkbox.checked;\n\t\t\t\t\taccessor.writeSetting(checkbox.checked);\n\t\t\t\t\tcheckbox.focus();\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\n\t\tdisposables.add(checkbox.onChange(() => {\n\t\t\taccessor.writeSetting(checkbox.checked);\n\t\t}));\n\n\t\tdisposables.add(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (settingIdsToReEvaluate.some(id => e.affectsConfiguration(id))) {\n\t\t\t\tcheckbox.checked = Boolean(accessor.readSetting());\n\t\t\t}\n\t\t}));\n\n\t\tif (!canUseChat(this.chatEntitlementService)) {\n\t\t\tcontainer.classList.add('disabled');\n\t\t\tcheckbox.disable();\n\t\t\tcheckbox.checked = false;\n\t\t}\n\n\t\treturn checkbox;\n\t}\n\n\tprivate createInlineSuggestionsSetting(container: HTMLElement, label: string, modeId: string | undefined, disposables: DisposableStore): void {\n\t\tthis.createSetting(container, [defaultChat.completionsEnablementSetting], label, this.getCompletionsSettingAccessor(modeId), disposables);\n\t}\n\n\tprivate getCompletionsSettingAccessor(modeId = '*'): ISettingsAccessor {\n\t\tconst settingId = defaultChat.completionsEnablementSetting;\n\n\t\treturn {\n\t\t\treadSetting: () => isCompletionsEnabled(this.configurationService, modeId),\n\t\t\twriteSetting: (value: boolean) => {\n\t\t\t\tthis.telemetryService.publicLog2<ChatSettingChangedEvent, ChatSettingChangedClassification>('chatStatus.settingChanged', {\n\t\t\t\t\tsettingIdentifier: settingId,\n\t\t\t\t\tsettingMode: modeId,\n\t\t\t\t\tsettingEnablement: value ? 'enabled' : 'disabled'\n\t\t\t\t});\n\n\t\t\t\tlet result = this.configurationService.getValue<Record<string, boolean>>(settingId);\n\t\t\t\tif (!isObject(result)) {\n\t\t\t\t\tresult = Object.create(null);\n\t\t\t\t}\n\n\t\t\t\treturn this.configurationService.updateValue(settingId, { ...result, [modeId]: value });\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate createNextEditSuggestionsSetting(container: HTMLElement, label: string, completionsSettingAccessor: ISettingsAccessor, disposables: DisposableStore): void {\n\t\tconst nesSettingId = defaultChat.nextEditSuggestionsSetting;\n\t\tconst completionsSettingId = defaultChat.completionsEnablementSetting;\n\t\tconst resource = EditorResourceAccessor.getOriginalUri(this.editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\n\t\tconst checkbox = this.createSetting(container, [nesSettingId, completionsSettingId], label, {\n\t\t\treadSetting: () => completionsSettingAccessor.readSetting() && this.textResourceConfigurationService.getValue<boolean>(resource, nesSettingId),\n\t\t\twriteSetting: (value: boolean) => {\n\t\t\t\tthis.telemetryService.publicLog2<ChatSettingChangedEvent, ChatSettingChangedClassification>('chatStatus.settingChanged', {\n\t\t\t\t\tsettingIdentifier: nesSettingId,\n\t\t\t\t\tsettingEnablement: value ? 'enabled' : 'disabled'\n\t\t\t\t});\n\n\t\t\t\treturn this.textResourceConfigurationService.updateValue(resource, nesSettingId, value);\n\t\t\t}\n\t\t}, disposables);\n\n\t\t// enablement of NES depends on completions setting\n\t\t// so we have to update our checkbox state accordingly\n\n\t\tif (!completionsSettingAccessor.readSetting()) {\n\t\t\tcontainer.classList.add('disabled');\n\t\t\tcheckbox.disable();\n\t\t}\n\n\t\tdisposables.add(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(completionsSettingId)) {\n\t\t\t\tif (completionsSettingAccessor.readSetting() && canUseChat(this.chatEntitlementService)) {\n\t\t\t\t\tcheckbox.enable();\n\t\t\t\t\tcontainer.classList.remove('disabled');\n\t\t\t\t} else {\n\t\t\t\t\tcheckbox.disable();\n\t\t\t\t\tcontainer.classList.add('disabled');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate createCompletionsSnooze(container: HTMLElement, label: string, disposables: DisposableStore): void {\n\t\tconst isEnabled = () => {\n\t\t\tconst completionsEnabled = isCompletionsEnabled(this.configurationService);\n\t\t\tconst completionsEnabledActiveLanguage = isCompletionsEnabled(this.configurationService, this.editorService.activeTextEditorLanguageId);\n\t\t\treturn completionsEnabled || completionsEnabledActiveLanguage;\n\t\t};\n\n\t\tconst button = disposables.add(new Button(container, { disabled: !isEnabled(), ...defaultButtonStyles, hoverDelegate: nativeHoverDelegate, secondary: true }));\n\n\t\tconst timerDisplay = container.appendChild($('span.snooze-label'));\n\n\t\tconst actionBar = container.appendChild($('div.snooze-action-bar'));\n\t\tconst toolbar = disposables.add(new ActionBar(actionBar, { hoverDelegate: nativeHoverDelegate }));\n\t\tconst cancelAction = toAction({\n\t\t\tid: 'workbench.action.cancelSnoozeStatusBarLink',\n\t\t\tlabel: localize('cancelSnooze', \"Cancel Snooze\"),\n\t\t\trun: () => this.inlineCompletionsService.cancelSnooze(),\n\t\t\tclass: ThemeIcon.asClassName(Codicon.stopCircle)\n\t\t});\n\n\t\tconst update = (isEnabled: boolean) => {\n\t\t\tcontainer.classList.toggle('disabled', !isEnabled);\n\t\t\ttoolbar.clear();\n\n\t\t\tconst timeLeftMs = this.inlineCompletionsService.snoozeTimeLeft;\n\t\t\tif (!isEnabled || timeLeftMs <= 0) {\n\t\t\t\ttimerDisplay.textContent = localize('completions.snooze5minutesTitle', \"Hide suggestions for 5 min\");\n\t\t\t\ttimerDisplay.title = '';\n\t\t\t\tbutton.label = label;\n\t\t\t\tbutton.setTitle(localize('completions.snooze5minutes', \"Hide inline suggestions for 5 min\"));\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst timeLeftSeconds = Math.ceil(timeLeftMs / 1000);\n\t\t\tconst minutes = Math.floor(timeLeftSeconds / 60);\n\t\t\tconst seconds = timeLeftSeconds % 60;\n\n\t\t\ttimerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds} ${localize('completions.remainingTime', \"remaining\")}`;\n\t\t\ttimerDisplay.title = localize('completions.snoozeTimeDescription', \"Inline suggestions are hidden for the remaining duration\");\n\t\t\tbutton.label = localize('completions.plus5min', \"+5 min\");\n\t\t\tbutton.setTitle(localize('completions.snoozeAdditional5minutes', \"Snooze additional 5 min\"));\n\t\t\ttoolbar.push([cancelAction], { icon: true, label: false });\n\n\t\t\treturn false;\n\t\t};\n\n\t\t// Update every second if there's time remaining\n\t\tconst timerDisposables = disposables.add(new DisposableStore());\n\t\tfunction updateIntervalTimer() {\n\t\t\ttimerDisposables.clear();\n\t\t\tconst enabled = isEnabled();\n\n\t\t\tif (update(enabled)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttimerDisposables.add(disposableWindowInterval(\n\t\t\t\tgetWindow(container),\n\t\t\t\t() => update(enabled),\n\t\t\t\t1_000,\n\t\t\t));\n\t\t}\n\t\tupdateIntervalTimer();\n\n\t\tdisposables.add(button.onDidClick(() => {\n\t\t\tthis.inlineCompletionsService.snooze();\n\t\t\tupdate(isEnabled());\n\t\t}));\n\n\t\tdisposables.add(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(defaultChat.completionsEnablementSetting)) {\n\t\t\t\tbutton.enabled = isEnabled();\n\t\t\t}\n\t\t\tupdateIntervalTimer();\n\t\t}));\n\n\t\tdisposables.add(this.inlineCompletionsService.onDidChangeIsSnoozing(e => {\n\t\t\tupdateIntervalTimer();\n\t\t}));\n\t}\n}\n"]}