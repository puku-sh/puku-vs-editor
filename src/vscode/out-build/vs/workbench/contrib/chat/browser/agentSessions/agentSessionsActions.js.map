{"version":3,"sources":["vs/workbench/contrib/chat/browser/agentSessions/agentSessionsActions.ts"],"names":[],"mappings":"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","file":"agentSessionsActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/agentsessionsactions.css';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { IAgentSessionViewModel } from './agentSessionViewModel.js';\nimport { Action, IAction } from '../../../../../base/common/actions.js';\nimport { ActionViewItem, IActionViewItemOptions } from '../../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { CommandsRegistry, ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { EventHelper, h, hide, show } from '../../../../../base/browser/dom.js';\nimport { assertReturnsDefined } from '../../../../../base/common/types.js';\nimport { Action2, ISubmenuItem, MenuId, MenuRegistry, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { ViewAction } from '../../../../browser/parts/views/viewPane.js';\nimport { AGENT_SESSIONS_VIEW_ID, AgentSessionProviders } from './agentSessions.js';\nimport { AgentSessionsView } from './agentSessionsView.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IChatService } from '../../common/chatService.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { resetFilter } from './agentSessionsViewFilter.js';\n\n//#region Diff Statistics Action\n\nexport class AgentSessionShowDiffAction extends Action {\n\n\tstatic ID = 'agentSession.showDiff';\n\n\tconstructor(\n\t\tprivate readonly session: IAgentSessionViewModel\n\t) {\n\t\tsuper(AgentSessionShowDiffAction.ID, localize('showDiff', \"Open Changes\"), undefined, true);\n\t}\n\n\toverride async run(): Promise<void> {\n\t\t// This will be handled by the action view item\n\t}\n\n\tgetSession(): IAgentSessionViewModel {\n\t\treturn this.session;\n\t}\n}\n\nexport class AgentSessionDiffActionViewItem extends ActionViewItem {\n\n\toverride get action(): AgentSessionShowDiffAction {\n\t\treturn super.action as AgentSessionShowDiffAction;\n\t}\n\n\tconstructor(\n\t\taction: IAction,\n\t\toptions: IActionViewItemOptions,\n\t\t@ICommandService private readonly commandService: ICommandService\n\t) {\n\t\tsuper(null, action, options);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\n\t\tconst label = assertReturnsDefined(this.label);\n\t\tlabel.textContent = '';\n\n\t\tconst session = this.action.getSession();\n\t\tconst diff = session.statistics;\n\t\tif (!diff) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elements = h(\n\t\t\t'div.agent-session-diff-container@diffContainer',\n\t\t\t[\n\t\t\t\th('span.agent-session-diff-files@filesSpan'),\n\t\t\t\th('span.agent-session-diff-added@addedSpan'),\n\t\t\t\th('span.agent-session-diff-removed@removedSpan')\n\t\t\t]\n\t\t);\n\n\t\tif (diff.files > 0) {\n\t\t\telements.filesSpan.textContent = diff.files === 1 ? localize('diffFile', \"1 file\") : localize('diffFiles', \"{0} files\", diff.files);\n\t\t\tshow(elements.filesSpan);\n\t\t} else {\n\t\t\thide(elements.filesSpan);\n\t\t}\n\n\t\tif (diff.insertions > 0) {\n\t\t\telements.addedSpan.textContent = `+${diff.insertions}`;\n\t\t\tshow(elements.addedSpan);\n\t\t} else {\n\t\t\thide(elements.addedSpan);\n\t\t}\n\n\t\tif (diff.deletions > 0) {\n\t\t\telements.removedSpan.textContent = `-${diff.deletions}`;\n\t\t\tshow(elements.removedSpan);\n\t\t} else {\n\t\t\thide(elements.removedSpan);\n\t\t}\n\n\t\tlabel.appendChild(elements.diffContainer);\n\t}\n\n\toverride onClick(event: MouseEvent): void {\n\t\tEventHelper.stop(event, true);\n\n\t\tconst session = this.action.getSession();\n\n\t\tthis.commandService.executeCommand(`agentSession.${session.providerType}.openChanges`, this.action.getSession().resource);\n\t}\n}\n\nCommandsRegistry.registerCommand(`agentSession.${AgentSessionProviders.Local}.openChanges`, async (accessor: ServicesAccessor, resource: URI) => {\n\tconst chatService = accessor.get(IChatService);\n\n\tconst session = chatService.getSession(resource);\n\tsession?.editingSession?.show();\n});\n\n//#endregion\n\n//#region View Actions\n\nregisterAction2(class extends ViewAction<AgentSessionsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'agentSessionsView.refresh',\n\t\t\ttitle: localize2('refresh', \"Refresh Agent Sessions\"),\n\t\t\ticon: Codicon.refresh,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.AgentSessionsTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1\n\t\t\t},\n\t\t\tviewId: AGENT_SESSIONS_VIEW_ID\n\t\t});\n\t}\n\trunInView(accessor: ServicesAccessor, view: AgentSessionsView): void {\n\t\tview.refresh();\n\t}\n});\n\nregisterAction2(class extends ViewAction<AgentSessionsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'agentSessionsView.find',\n\t\t\ttitle: localize2('find', \"Find Agent Session\"),\n\t\t\ticon: Codicon.search,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.AgentSessionsTitle,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 2\n\t\t\t},\n\t\t\tviewId: AGENT_SESSIONS_VIEW_ID\n\t\t});\n\t}\n\trunInView(accessor: ServicesAccessor, view: AgentSessionsView): void {\n\t\tview.openFind();\n\t}\n});\n\nMenuRegistry.appendMenuItem(MenuId.AgentSessionsTitle, {\n\tsubmenu: MenuId.AgentSessionsFilterSubMenu,\n\ttitle: localize('filterAgentSessions', \"Filter Agent Sessions\"),\n\tgroup: 'navigation',\n\torder: 100,\n\ticon: Codicon.filter\n} satisfies ISubmenuItem);\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'agentSessions.filter.resetExcludes',\n\t\t\ttitle: localize('agentSessions.filter.reset', 'Reset'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.AgentSessionsFilterSubMenu,\n\t\t\t\tgroup: '4_reset',\n\t\t\t\torder: 0,\n\t\t\t},\n\t\t});\n\t}\n\trun(accessor: ServicesAccessor): void {\n\t\tconst storageService = accessor.get(IStorageService);\n\n\t\tresetFilter(storageService);\n\t}\n});\n\n//#endregion\n"]}