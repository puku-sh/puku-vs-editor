{"version":3,"sources":["vs/workbench/contrib/chat/browser/promptSyntax/runPromptAction.ts"],"names":[],"mappings":"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","file":"runPromptAction.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ChatViewId, IChatWidget, IChatWidgetService } from '../chat.js';\nimport { ACTION_ID_NEW_CHAT, CHAT_CATEGORY, CHAT_CONFIG_MENU_ID } from '../actions/chatActions.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { OS } from '../../../../../base/common/platform.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { assertDefined } from '../../../../../base/common/types.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { PromptsType, PROMPT_LANGUAGE_ID } from '../../common/promptSyntax/promptTypes.js';\nimport { ILocalizedString, localize, localize2 } from '../../../../../nls.js';\nimport { UILabelProvider } from '../../../../../base/common/keybindingLabels.js';\nimport { ICommandAction } from '../../../../../platform/action/common/action.js';\nimport { PromptFilePickers } from './pickers/promptFilePickers.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IPromptsService } from '../../common/promptSyntax/service/promptsService.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\n\n/**\n * Condition for the `Run Current Prompt` action.\n */\nconst EDITOR_ACTIONS_CONDITION = ContextKeyExpr.and(\n\tChatContextKeys.enabled,\n\tResourceContextKey.HasResource,\n\tResourceContextKey.LangId.isEqualTo(PROMPT_LANGUAGE_ID),\n);\n\n/**\n * Keybinding of the action.\n */\nconst COMMAND_KEY_BINDING = KeyMod.WinCtrl | KeyCode.Slash | KeyMod.Alt;\n\n/**\n * Action ID for the `Run Current Prompt` action.\n */\nconst RUN_CURRENT_PROMPT_ACTION_ID = 'workbench.action.chat.run.prompt.current';\n\n/**\n * Action ID for the `Run Prompt...` action.\n */\nconst RUN_SELECTED_PROMPT_ACTION_ID = 'workbench.action.chat.run.prompt';\n\n/**\n * Action ID for the `Configure Prompt Files...` action.\n */\nconst CONFIGURE_PROMPTS_ACTION_ID = 'workbench.action.chat.configure.prompts';\n\n/**\n * Constructor options for the `Run Prompt` base action.\n */\ninterface IRunPromptBaseActionConstructorOptions {\n\t/**\n\t * ID of the action to be registered.\n\t */\n\tid: string;\n\n\t/**\n\t * Title of the action.\n\t */\n\ttitle: ILocalizedString;\n\n\t/**\n\t * Icon of the action.\n\t */\n\ticon: ThemeIcon;\n\n\t/**\n\t * Keybinding of the action.\n\t */\n\tkeybinding: number;\n\n\t/**\n\t * Alt action of the UI menu item.\n\t */\n\talt?: ICommandAction;\n}\n\n/**\n * Base class of the `Run Prompt` action.\n */\nabstract class RunPromptBaseAction extends Action2 {\n\tconstructor(\n\t\toptions: IRunPromptBaseActionConstructorOptions,\n\t) {\n\t\tsuper({\n\t\t\tid: options.id,\n\t\t\ttitle: options.title,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: options.icon,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tEditorContextKeys.editorTextFocus,\n\t\t\t\t\tEDITOR_ACTIONS_CONDITION,\n\t\t\t\t),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: options.keybinding,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.EditorTitleRun,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: options.alt ? 0 : 1,\n\t\t\t\t\talt: options.alt,\n\t\t\t\t\twhen: EDITOR_ACTIONS_CONDITION,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t/**\n\t * Executes the run prompt action with provided options.\n\t */\n\tpublic async execute(\n\t\tresource: URI | undefined,\n\t\tinNewChat: boolean,\n\t\taccessor: ServicesAccessor,\n\t): Promise<IChatWidget | undefined> {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst promptsService = accessor.get(IPromptsService);\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\n\t\tresource ||= getActivePromptFileUri(accessor);\n\t\tassertDefined(\n\t\t\tresource,\n\t\t\t'Cannot find URI resource for an active text editor.',\n\t\t);\n\n\t\tif (inNewChat === true) {\n\t\t\tawait commandService.executeCommand(ACTION_ID_NEW_CHAT);\n\t\t}\n\n\t\tconst widget = await widgetService.revealWidget();\n\t\tif (widget) {\n\t\t\twidget.setInput(`/${await promptsService.getPromptSlashCommandName(resource, CancellationToken.None)}`);\n\t\t\t// submit the prompt immediately\n\t\t\tawait widget.acceptInput();\n\t\t}\n\t\treturn widget;\n\t}\n}\n\nconst RUN_CURRENT_PROMPT_ACTION_TITLE = localize2(\n\t'run-prompt.capitalized',\n\t\"Run Prompt in Current Chat\"\n);\nconst RUN_CURRENT_PROMPT_ACTION_ICON = Codicon.playCircle;\n\n/**\n * The default `Run Current Prompt` action.\n */\nclass RunCurrentPromptAction extends RunPromptBaseAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: RUN_CURRENT_PROMPT_ACTION_ID,\n\t\t\ttitle: RUN_CURRENT_PROMPT_ACTION_TITLE,\n\t\t\ticon: RUN_CURRENT_PROMPT_ACTION_ICON,\n\t\t\tkeybinding: COMMAND_KEY_BINDING,\n\t\t});\n\t}\n\n\tpublic override async run(\n\t\taccessor: ServicesAccessor,\n\t\tresource: URI | undefined,\n\t): Promise<IChatWidget | undefined> {\n\t\treturn await super.execute(\n\t\t\tresource,\n\t\t\tfalse,\n\t\t\taccessor,\n\t\t);\n\t}\n}\n\nclass RunSelectedPromptAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: RUN_SELECTED_PROMPT_ACTION_ID,\n\t\t\ttitle: localize2('run-prompt.capitalized.ellipses', \"Run Prompt...\"),\n\t\t\ticon: Codicon.bookmark,\n\t\t\tf1: true,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ChatContextKeys.enabled,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: COMMAND_KEY_BINDING,\n\t\t\t},\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t});\n\t}\n\n\tpublic override async run(\n\t\taccessor: ServicesAccessor,\n\t): Promise<void> {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst promptsService = accessor.get(IPromptsService);\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\n\t\tconst pickers = instaService.createInstance(PromptFilePickers);\n\n\t\tconst placeholder = localize(\n\t\t\t'commands.prompt.select-dialog.placeholder',\n\t\t\t'Select the prompt file to run (hold {0}-key to use in new chat)',\n\t\t\tUILabelProvider.modifierLabels[OS].ctrlKey\n\t\t);\n\n\t\tconst result = await pickers.selectPromptFile({ placeholder, type: PromptsType.prompt });\n\n\t\tif (result === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { promptFile, keyMods } = result;\n\n\t\tif (keyMods.ctrlCmd === true) {\n\t\t\tawait commandService.executeCommand(ACTION_ID_NEW_CHAT);\n\t\t}\n\n\t\tconst widget = await widgetService.revealWidget();\n\t\tif (widget) {\n\t\t\twidget.setInput(`/${await promptsService.getPromptSlashCommandName(promptFile, CancellationToken.None)}`);\n\t\t\t// submit the prompt immediately\n\t\t\tawait widget.acceptInput();\n\t\t\twidget.focusInput();\n\t\t}\n\t}\n}\n\nclass ManagePromptFilesAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CONFIGURE_PROMPTS_ACTION_ID,\n\t\t\ttitle: localize2('configure-prompts', \"Configure Prompt Files...\"),\n\t\t\tshortTitle: localize2('configure-prompts.short', \"Prompt Files\"),\n\t\t\ticon: Codicon.bookmark,\n\t\t\tf1: true,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tmenu: {\n\t\t\t\tid: CHAT_CONFIG_MENU_ID,\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.enabled, ContextKeyExpr.equals('view', ChatViewId)),\n\t\t\t\torder: 11,\n\t\t\t\tgroup: '0_level'\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override async run(\n\t\taccessor: ServicesAccessor,\n\t): Promise<void> {\n\t\tconst openerService = accessor.get(IOpenerService);\n\t\tconst instaService = accessor.get(IInstantiationService);\n\n\t\tconst pickers = instaService.createInstance(PromptFilePickers);\n\n\t\tconst placeholder = localize(\n\t\t\t'commands.prompt.manage-dialog.placeholder',\n\t\t\t'Select the prompt file to open'\n\t\t);\n\n\t\tconst result = await pickers.selectPromptFile({ placeholder, type: PromptsType.prompt, optionEdit: false });\n\t\tif (result !== undefined) {\n\t\t\tawait openerService.open(result.promptFile);\n\t\t}\n\t}\n}\n\n\n/**\n * Gets `URI` of a prompt file open in an active editor instance, if any.\n */\nfunction getActivePromptFileUri(accessor: ServicesAccessor): URI | undefined {\n\tconst codeEditorService = accessor.get(ICodeEditorService);\n\tconst model = codeEditorService.getActiveCodeEditor()?.getModel();\n\tif (model?.getLanguageId() === PROMPT_LANGUAGE_ID) {\n\t\treturn model.uri;\n\t}\n\treturn undefined;\n}\n\n\n/**\n * Action ID for the `Run Current Prompt In New Chat` action.\n */\nconst RUN_CURRENT_PROMPT_IN_NEW_CHAT_ACTION_ID = 'workbench.action.chat.run-in-new-chat.prompt.current';\n\nconst RUN_IN_NEW_CHAT_ACTION_TITLE = localize2(\n\t'run-prompt-in-new-chat.capitalized',\n\t\"Run Prompt In New Chat\",\n);\n\n/**\n * Icon for the `Run Current Prompt In New Chat` action.\n */\nconst RUN_IN_NEW_CHAT_ACTION_ICON = Codicon.play;\n\n/**\n * `Run Current Prompt In New Chat` action.\n */\nclass RunCurrentPromptInNewChatAction extends RunPromptBaseAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: RUN_CURRENT_PROMPT_IN_NEW_CHAT_ACTION_ID,\n\t\t\ttitle: RUN_IN_NEW_CHAT_ACTION_TITLE,\n\t\t\ticon: RUN_IN_NEW_CHAT_ACTION_ICON,\n\t\t\tkeybinding: COMMAND_KEY_BINDING | KeyMod.CtrlCmd,\n\t\t\talt: {\n\t\t\t\tid: RUN_CURRENT_PROMPT_ACTION_ID,\n\t\t\t\ttitle: RUN_CURRENT_PROMPT_ACTION_TITLE,\n\t\t\t\ticon: RUN_CURRENT_PROMPT_ACTION_ICON,\n\t\t\t},\n\t\t});\n\t}\n\n\tpublic override async run(\n\t\taccessor: ServicesAccessor,\n\t\tresource: URI,\n\t): Promise<IChatWidget | undefined> {\n\t\treturn await super.execute(\n\t\t\tresource,\n\t\t\ttrue,\n\t\t\taccessor,\n\t\t);\n\t}\n}\n\n/**\n * Helper to register all the `Run Current Prompt` actions.\n */\nexport function registerRunPromptActions(): void {\n\tregisterAction2(RunCurrentPromptInNewChatAction);\n\tregisterAction2(RunCurrentPromptAction);\n\tregisterAction2(RunSelectedPromptAction);\n\tregisterAction2(ManagePromptFilesAction);\n}\n"]}