{"version":3,"sources":["vs/workbench/contrib/chat/browser/agentSessions/agentSessionsViewer.ts"],"names":[],"mappings":"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","file":"agentSessionsViewer.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/agentsessionsviewer.css';\nimport { h } from '../../../../../base/browser/dom.js';\nimport { localize } from '../../../../../nls.js';\nimport { IIdentityProvider, IListVirtualDelegate } from '../../../../../base/browser/ui/list/list.js';\nimport { IListAccessibilityProvider } from '../../../../../base/browser/ui/list/listWidget.js';\nimport { ITreeCompressionDelegate } from '../../../../../base/browser/ui/tree/asyncDataTree.js';\nimport { ICompressedTreeNode } from '../../../../../base/browser/ui/tree/compressedObjectTreeModel.js';\nimport { ICompressibleKeyboardNavigationLabelProvider, ICompressibleTreeRenderer } from '../../../../../base/browser/ui/tree/objectTree.js';\nimport { ITreeNode, ITreeElementRenderDetails, IAsyncDataSource, ITreeSorter, ITreeDragAndDrop, ITreeDragOverReaction } from '../../../../../base/browser/ui/tree/tree.js';\nimport { Disposable, DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IAgentSessionViewModel, IAgentSessionsViewModel, isAgentSession, isAgentSessionsViewModel } from './agentSessionViewModel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { fromNow, getDurationString } from '../../../../../base/common/date.js';\nimport { FuzzyScore, createMatches } from '../../../../../base/common/filters.js';\nimport { IMarkdownRendererService } from '../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { allowedChatMarkdownHtmlTags } from '../chatContentMarkdownRenderer.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { IDragAndDropData } from '../../../../../base/browser/dnd.js';\nimport { ListViewTargetSector } from '../../../../../base/browser/ui/list/listView.js';\nimport { coalesce } from '../../../../../base/common/arrays.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { fillEditorsDragData } from '../../../../browser/dnd.js';\nimport { ChatSessionStatus } from '../../common/chatSessionsService.js';\nimport { HoverStyle } from '../../../../../base/browser/ui/hover/hover.js';\nimport { HoverPosition } from '../../../../../base/browser/ui/hover/hoverWidget.js';\nimport { IWorkbenchLayoutService, Position } from '../../../../services/layout/browser/layoutService.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../../common/views.js';\nimport { IHoverService } from '../../../../../platform/hover/browser/hover.js';\nimport { AGENT_SESSIONS_VIEW_ID } from './agentSessions.js';\nimport { IntervalTimer } from '../../../../../base/common/async.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { AgentSessionDiffActionViewItem, AgentSessionShowDiffAction } from './agentSessionsActions.js';\n\ninterface IAgentSessionItemTemplate {\n\treadonly element: HTMLElement;\n\n\t// Column 1\n\treadonly icon: HTMLElement;\n\n\t// Column 2 Row 1\n\treadonly title: IconLabel;\n\n\t// Column 2 Row 2\n\treadonly toolbar: ActionBar;\n\treadonly description: HTMLElement;\n\treadonly status: HTMLElement;\n\n\treadonly elementDisposable: DisposableStore;\n\treadonly disposables: IDisposable;\n}\n\nexport class AgentSessionRenderer implements ICompressibleTreeRenderer<IAgentSessionViewModel, FuzzyScore, IAgentSessionItemTemplate> {\n\n\tstatic readonly TEMPLATE_ID = 'agent-session';\n\n\treadonly templateId = AgentSessionRenderer.TEMPLATE_ID;\n\n\tconstructor(\n\t\t@IMarkdownRendererService private readonly markdownRendererService: IMarkdownRendererService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): IAgentSessionItemTemplate {\n\t\tconst disposables = new DisposableStore();\n\t\tconst elementDisposable = disposables.add(new DisposableStore());\n\n\t\tconst elements = h(\n\t\t\t'div.agent-session-item@item',\n\t\t\t[\n\t\t\t\th('div.agent-session-icon-col', [\n\t\t\t\t\th('div.agent-session-icon@icon')\n\t\t\t\t]),\n\t\t\t\th('div.agent-session-main-col', [\n\t\t\t\t\th('div.agent-session-title-row', [\n\t\t\t\t\t\th('div.agent-session-title@title'),\n\t\t\t\t\t]),\n\t\t\t\t\th('div.agent-session-details-row', [\n\t\t\t\t\t\th('div.agent-session-toolbar@toolbar'),\n\t\t\t\t\t\th('div.agent-session-description@description'),\n\t\t\t\t\t\th('div.agent-session-status@status')\n\t\t\t\t\t])\n\t\t\t\t])\n\t\t\t]\n\t\t);\n\n\t\tcontainer.appendChild(elements.item);\n\n\t\tconst toolbar = disposables.add(new ActionBar(elements.toolbar, {\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\tif (action.id === AgentSessionShowDiffAction.ID) {\n\t\t\t\t\treturn this.instantiationService.createInstance(AgentSessionDiffActionViewItem, action, options);\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t}));\n\n\t\treturn {\n\t\t\telement: elements.item,\n\t\t\ticon: elements.icon,\n\t\t\ttitle: disposables.add(new IconLabel(elements.title, { supportHighlights: true, supportIcons: true })),\n\t\t\ttoolbar,\n\t\t\tdescription: elements.description,\n\t\t\tstatus: elements.status,\n\t\t\telementDisposable,\n\t\t\tdisposables\n\t\t};\n\t}\n\n\trenderElement(session: ITreeNode<IAgentSessionViewModel, FuzzyScore>, index: number, template: IAgentSessionItemTemplate, details?: ITreeElementRenderDetails): void {\n\n\t\t// Clear old state\n\t\ttemplate.elementDisposable.clear();\n\t\ttemplate.toolbar.clear();\n\t\ttemplate.description.textContent = '';\n\n\t\t// Icon\n\t\ttemplate.icon.className = `agent-session-icon ${ThemeIcon.asClassName(this.getIcon(session.element))}`;\n\n\t\t// Title\n\t\ttemplate.title.setLabel(session.element.label, undefined, { matches: createMatches(session.filterData) });\n\n\t\t// Diff if provided and finished\n\t\tconst { statistics: diff } = session.element;\n\t\tif (session.element.status !== ChatSessionStatus.InProgress && diff && (diff.files > 0 || diff.insertions > 0 || diff.deletions > 0)) {\n\t\t\tconst diffAction = template.elementDisposable.add(new AgentSessionShowDiffAction(session.element));\n\t\t\ttemplate.toolbar.push([diffAction], { icon: false, label: true });\n\t\t}\n\n\t\t// Description otherwise\n\t\telse {\n\t\t\tthis.renderDescription(session, template);\n\t\t}\n\n\t\t// Status\n\t\tthis.renderStatus(session, template);\n\n\t\t// Hover\n\t\tthis.renderHover(session, template);\n\t}\n\n\tprivate getIcon(session: IAgentSessionViewModel): ThemeIcon {\n\t\tif (session.status === ChatSessionStatus.InProgress) {\n\t\t\treturn ThemeIcon.modify(Codicon.loading, 'spin');\n\t\t}\n\n\t\tif (session.status === ChatSessionStatus.Failed) {\n\t\t\treturn Codicon.error;\n\t\t}\n\n\t\treturn session.icon;\n\t}\n\n\tprivate renderDescription(session: ITreeNode<IAgentSessionViewModel, FuzzyScore>, template: IAgentSessionItemTemplate): void {\n\n\t\t// In progress: show duration\n\t\tif (session.element.status === ChatSessionStatus.InProgress) {\n\t\t\ttemplate.description.textContent = this.getInProgressDescription(session.element);\n\t\t\tconst timer = template.elementDisposable.add(new IntervalTimer());\n\t\t\ttimer.cancelAndSet(() => template.description.textContent = this.getInProgressDescription(session.element), 1000 /* every second */);\n\t\t}\n\n\t\t// Otherwise support description as string\n\t\telse if (typeof session.element.description === 'string') {\n\t\t\ttemplate.description.textContent = session.element.description;\n\t\t}\n\n\t\t// or as markdown\n\t\telse if (session.element.description) {\n\t\t\ttemplate.elementDisposable.add(this.markdownRendererService.render(session.element.description, {\n\t\t\t\tsanitizerConfig: {\n\t\t\t\t\treplaceWithPlaintext: true,\n\t\t\t\t\tallowedTags: {\n\t\t\t\t\t\toverride: allowedChatMarkdownHtmlTags,\n\t\t\t\t\t},\n\t\t\t\t\tallowedLinkSchemes: { augment: [this.productService.urlProtocol] }\n\t\t\t\t},\n\t\t\t}, template.description));\n\t\t}\n\n\t\t// Fallback to state label\n\t\telse {\n\t\t\tif (\n\t\t\t\tsession.element.timing.finishedOrFailedTime &&\n\t\t\t\tsession.element.timing.inProgressTime &&\n\t\t\t\tsession.element.timing.finishedOrFailedTime > session.element.timing.inProgressTime\n\t\t\t) {\n\t\t\t\tconst duration = this.toDuration(session.element.timing.inProgressTime, session.element.timing.finishedOrFailedTime);\n\n\t\t\t\ttemplate.description.textContent = session.element.status === ChatSessionStatus.Failed ?\n\t\t\t\t\tlocalize('chat.session.status.failedAfter', \"Failed after {0}.\", duration ?? '1s') :\n\t\t\t\t\tlocalize('chat.session.status.completedAfter', \"Finished in {0}.\", duration ?? '1s');\n\t\t\t} else {\n\t\t\t\ttemplate.description.textContent = session.element.status === ChatSessionStatus.Failed ?\n\t\t\t\t\tlocalize('chat.session.status.failed', \"Failed\") :\n\t\t\t\t\tlocalize('chat.session.status.completed', \"Finished\");\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getInProgressDescription(session: IAgentSessionViewModel): string {\n\t\tif (session.timing.inProgressTime) {\n\t\t\tconst inProgressDuration = this.toDuration(session.timing.inProgressTime, Date.now());\n\t\t\tif (inProgressDuration) {\n\t\t\t\treturn localize('chat.session.status.inProgressWithDuration', \"Working... ({0})\", inProgressDuration);\n\t\t\t}\n\t\t}\n\n\t\treturn localize('chat.session.status.inProgress', \"Working...\");\n\t}\n\n\tprivate toDuration(startTime: number, endTime: number): string | undefined {\n\t\tconst elapsed = Math.round((endTime - startTime) / 1000) * 1000;\n\t\tif (elapsed < 1000) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn getDurationString(elapsed);\n\t}\n\n\tprivate renderStatus(session: ITreeNode<IAgentSessionViewModel, FuzzyScore>, template: IAgentSessionItemTemplate): void {\n\t\tconst getStatus = (session: IAgentSessionViewModel) => `${session.providerLabel} â€¢ ${fromNow(session.timing.endTime || session.timing.startTime)}`;\n\n\t\ttemplate.status.textContent = getStatus(session.element);\n\t\tconst timer = template.elementDisposable.add(new IntervalTimer());\n\t\ttimer.cancelAndSet(() => template.status.textContent = getStatus(session.element), 60 * 1000 /* every minute */);\n\t}\n\n\tprivate renderHover(session: ITreeNode<IAgentSessionViewModel, FuzzyScore>, template: IAgentSessionItemTemplate): void {\n\t\tconst tooltip = session.element.tooltip;\n\t\tif (tooltip) {\n\t\t\ttemplate.elementDisposable.add(\n\t\t\t\tthis.hoverService.setupDelayedHover(template.element, () => ({\n\t\t\t\t\tcontent: tooltip,\n\t\t\t\t\tstyle: HoverStyle.Pointer,\n\t\t\t\t\tposition: {\n\t\t\t\t\t\thoverPosition: (() => {\n\t\t\t\t\t\t\tconst sideBarPosition = this.layoutService.getSideBarPosition();\n\t\t\t\t\t\t\tconst viewLocation = this.viewDescriptorService.getViewLocationById(AGENT_SESSIONS_VIEW_ID);\n\t\t\t\t\t\t\tswitch (viewLocation) {\n\t\t\t\t\t\t\t\tcase ViewContainerLocation.Sidebar:\n\t\t\t\t\t\t\t\t\treturn sideBarPosition === Position.LEFT ? HoverPosition.RIGHT : HoverPosition.LEFT;\n\t\t\t\t\t\t\t\tcase ViewContainerLocation.AuxiliaryBar:\n\t\t\t\t\t\t\t\t\treturn sideBarPosition === Position.LEFT ? HoverPosition.LEFT : HoverPosition.RIGHT;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn HoverPosition.RIGHT;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})()\n\t\t\t\t\t}\n\t\t\t\t}), { groupId: 'agent.sessions' })\n\t\t\t);\n\t\t}\n\t}\n\n\trenderCompressedElements(node: ITreeNode<ICompressedTreeNode<IAgentSessionViewModel>, FuzzyScore>, index: number, templateData: IAgentSessionItemTemplate, details?: ITreeElementRenderDetails): void {\n\t\tthrow new Error('Should never happen since session is incompressible');\n\t}\n\n\tdisposeElement(element: ITreeNode<IAgentSessionViewModel, FuzzyScore>, index: number, template: IAgentSessionItemTemplate, details?: ITreeElementRenderDetails): void {\n\t\ttemplate.elementDisposable.clear();\n\t}\n\n\tdisposeTemplate(templateData: IAgentSessionItemTemplate): void {\n\t\ttemplateData.disposables.dispose();\n\t}\n}\n\nexport class AgentSessionsListDelegate implements IListVirtualDelegate<IAgentSessionViewModel> {\n\n\tstatic readonly ITEM_HEIGHT = 44;\n\n\tgetHeight(element: IAgentSessionViewModel): number {\n\t\treturn AgentSessionsListDelegate.ITEM_HEIGHT;\n\t}\n\n\tgetTemplateId(element: IAgentSessionViewModel): string {\n\t\treturn AgentSessionRenderer.TEMPLATE_ID;\n\t}\n}\n\nexport class AgentSessionsAccessibilityProvider implements IListAccessibilityProvider<IAgentSessionViewModel> {\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('agentSessions', \"Agent Sessions\");\n\t}\n\n\tgetAriaLabel(element: IAgentSessionViewModel): string | null {\n\t\treturn element.label;\n\t}\n}\n\nexport class AgentSessionsDataSource implements IAsyncDataSource<IAgentSessionsViewModel, IAgentSessionViewModel> {\n\n\thasChildren(element: IAgentSessionsViewModel | IAgentSessionViewModel): boolean {\n\t\treturn isAgentSessionsViewModel(element);\n\t}\n\n\tgetChildren(element: IAgentSessionsViewModel | IAgentSessionViewModel): Iterable<IAgentSessionViewModel> {\n\t\tif (!isAgentSessionsViewModel(element)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn element.sessions;\n\t}\n}\n\nexport class AgentSessionsIdentityProvider implements IIdentityProvider<IAgentSessionsViewModel | IAgentSessionViewModel> {\n\n\tgetId(element: IAgentSessionsViewModel | IAgentSessionViewModel): string {\n\t\tif (isAgentSession(element)) {\n\t\t\treturn element.resource.toString();\n\t\t}\n\n\t\treturn 'agent-sessions-id';\n\t}\n}\n\nexport class AgentSessionsCompressionDelegate implements ITreeCompressionDelegate<IAgentSessionViewModel> {\n\n\tisIncompressible(element: IAgentSessionViewModel): boolean {\n\t\treturn true;\n\t}\n}\n\nexport class AgentSessionsSorter implements ITreeSorter<IAgentSessionViewModel> {\n\n\tcompare(sessionA: IAgentSessionViewModel, sessionB: IAgentSessionViewModel): number {\n\t\tconst aInProgress = sessionA.status === ChatSessionStatus.InProgress;\n\t\tconst bInProgress = sessionB.status === ChatSessionStatus.InProgress;\n\n\t\tif (aInProgress && !bInProgress) {\n\t\t\treturn -1; // a (in-progress) comes before b (finished)\n\t\t}\n\t\tif (!aInProgress && bInProgress) {\n\t\t\treturn 1; // a (finished) comes after b (in-progress)\n\t\t}\n\n\t\t// Both in-progress or finished: sort by end or start time (most recent first)\n\t\treturn (sessionB.timing.endTime || sessionB.timing.startTime) - (sessionA.timing.endTime || sessionA.timing.startTime);\n\t}\n}\n\nexport class AgentSessionsKeyboardNavigationLabelProvider implements ICompressibleKeyboardNavigationLabelProvider<IAgentSessionViewModel> {\n\n\tgetKeyboardNavigationLabel(element: IAgentSessionViewModel): string {\n\t\treturn element.label;\n\t}\n\n\tgetCompressedNodeKeyboardNavigationLabel(elements: IAgentSessionViewModel[]): { toString(): string | undefined } | undefined {\n\t\treturn undefined; // not enabled\n\t}\n}\n\nexport class AgentSessionsDragAndDrop extends Disposable implements ITreeDragAndDrop<IAgentSessionViewModel> {\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tconst elements = data.getData() as IAgentSessionViewModel[];\n\t\tconst uris = coalesce(elements.map(e => e.resource));\n\t\tthis.instantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, uris, originalEvent));\n\t}\n\n\tgetDragURI(element: IAgentSessionViewModel): string | null {\n\t\treturn element.resource.toString();\n\t}\n\n\tgetDragLabel?(elements: IAgentSessionViewModel[], originalEvent: DragEvent): string | undefined {\n\t\tif (elements.length === 1) {\n\t\t\treturn elements[0].label;\n\t\t}\n\n\t\treturn localize('agentSessions.dragLabel', \"{0} agent sessions\", elements.length);\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetElement: IAgentSessionViewModel | undefined, targetIndex: number | undefined, targetSector: ListViewTargetSector | undefined, originalEvent: DragEvent): boolean | ITreeDragOverReaction {\n\t\treturn false;\n\t}\n\n\tdrop(data: IDragAndDropData, targetElement: IAgentSessionViewModel | undefined, targetIndex: number | undefined, targetSector: ListViewTargetSector | undefined, originalEvent: DragEvent): void { }\n}\n"]}