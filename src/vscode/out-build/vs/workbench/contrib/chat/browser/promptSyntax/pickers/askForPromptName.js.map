{"version":3,"sources":["vs/workbench/contrib/chat/browser/promptSyntax/pickers/askForPromptName.ts"],"names":[],"mappings":"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","file":"askForPromptName.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../../../nls.js';\nimport { getPromptFileExtension } from '../../../common/promptSyntax/config/promptFileLocations.js';\nimport { PromptsType } from '../../../common/promptSyntax/promptTypes.js';\nimport { IQuickInputService } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { IFileService } from '../../../../../../platform/files/common/files.js';\nimport Severity from '../../../../../../base/common/severity.js';\nimport { isValidBasename } from '../../../../../../base/common/extpath.js';\nimport { ServicesAccessor } from '../../../../../../editor/browser/editorExtensions.js';\n\n/**\n * Asks the user for a file name.\n */\nexport async function askForPromptFileName(\n\taccessor: ServicesAccessor,\n\ttype: PromptsType,\n\tselectedFolder: URI,\n\texistingFileName?: string\n): Promise<string | undefined> {\n\tconst quickInputService = accessor.get(IQuickInputService);\n\tconst fileService = accessor.get(IFileService);\n\n\tconst sanitizeInput = (input: string) => {\n\t\tconst trimmedName = input.trim();\n\t\tif (!trimmedName) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst fileExtension = getPromptFileExtension(type);\n\t\treturn (trimmedName.endsWith(fileExtension))\n\t\t\t? trimmedName\n\t\t\t: `${trimmedName}${fileExtension}`;\n\t};\n\n\tconst validateInput = async (value: string) => {\n\t\tconst fileName = sanitizeInput(value);\n\t\tif (!fileName) {\n\t\t\treturn {\n\t\t\t\tcontent: localize('askForPromptFileName.error.empty', \"Please enter a name.\"),\n\t\t\t\tseverity: Severity.Warning\n\t\t\t};\n\t\t}\n\n\t\tif (!isValidBasename(fileName)) {\n\t\t\treturn {\n\t\t\t\tcontent: localize('askForPromptFileName.error.invalid', \"The name contains invalid characters.\"),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\n\t\tconst fileUri = URI.joinPath(selectedFolder, fileName);\n\t\tif (await fileService.exists(fileUri)) {\n\t\t\treturn {\n\t\t\t\tcontent: localize('askForPromptFileName.error.exists', \"A file for the given name already exists.\"),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t};\n\tconst placeHolder = existingFileName ? getPlaceholderStringForRename(type) : getPlaceholderStringForNew(type);\n\tconst result = await quickInputService.input({ placeHolder, validateInput, value: existingFileName });\n\tif (!result) {\n\t\treturn undefined;\n\t}\n\n\treturn sanitizeInput(result);\n}\n\nfunction getPlaceholderStringForNew(type: PromptsType): string {\n\tswitch (type) {\n\t\tcase PromptsType.instructions:\n\t\t\treturn localize('askForInstructionsFileName.placeholder', \"Enter the name of the instructions file\");\n\t\tcase PromptsType.prompt:\n\t\t\treturn localize('askForPromptFileName.placeholder', \"Enter the name of the prompt file\");\n\t\tcase PromptsType.agent:\n\t\t\treturn localize('askForAgentFileName.placeholder', \"Enter the name of the agent file\");\n\t\tdefault:\n\t\t\tthrow new Error('Unknown prompt type');\n\t}\n}\n\nfunction getPlaceholderStringForRename(type: PromptsType): string {\n\tswitch (type) {\n\t\tcase PromptsType.instructions:\n\t\t\treturn localize('askForRenamedInstructionsFileName.placeholder', \"Enter a new name of the instructions file\");\n\t\tcase PromptsType.prompt:\n\t\t\treturn localize('askForRenamedPromptFileName.placeholder', \"Enter a new name of the prompt file\");\n\t\tcase PromptsType.agent:\n\t\t\treturn localize('askForRenamedAgentFileName.placeholder', \"Enter a new name of the agent file\");\n\t\tdefault:\n\t\t\tthrow new Error('Unknown prompt type');\n\t}\n}\n"]}