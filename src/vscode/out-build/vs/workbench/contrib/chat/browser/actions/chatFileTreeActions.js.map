{"version":3,"sources":["vs/workbench/contrib/chat/browser/actions/chatFileTreeActions.ts"],"names":[],"mappings":"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","file":"chatFileTreeActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { CHAT_CATEGORY } from './chatActions.js';\nimport { IChatWidgetService } from '../chat.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IChatResponseViewModel, isResponseVM } from '../../common/chatViewModel.js';\n\nexport function registerChatFileTreeActions() {\n\tregisterAction2(class NextFileTreeAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.nextFileTree',\n\t\t\t\ttitle: localize2('interactive.nextFileTree.label', \"Next File Tree\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.F9,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ChatContextKeys.inChatSession,\n\t\t\t\t},\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tnavigateTrees(accessor, false);\n\t\t}\n\t});\n\n\tregisterAction2(class PreviousFileTreeAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.previousFileTree',\n\t\t\t\ttitle: localize2('interactive.previousFileTree.label', \"Previous File Tree\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.F9,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ChatContextKeys.inChatSession,\n\t\t\t\t},\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tnavigateTrees(accessor, true);\n\t\t}\n\t});\n}\n\nfunction navigateTrees(accessor: ServicesAccessor, reverse: boolean) {\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst widget = chatWidgetService.lastFocusedWidget;\n\tif (!widget) {\n\t\treturn;\n\t}\n\n\tconst focused = !widget.inputEditor.hasWidgetFocus() && widget.getFocus();\n\tconst focusedResponse = isResponseVM(focused) ? focused : undefined;\n\n\tconst currentResponse = focusedResponse ?? widget.viewModel?.getItems().reverse().find((item): item is IChatResponseViewModel => isResponseVM(item));\n\tif (!currentResponse) {\n\t\treturn;\n\t}\n\n\twidget.reveal(currentResponse);\n\tconst responseFileTrees = widget.getFileTreeInfosForResponse(currentResponse);\n\tconst lastFocusedFileTree = widget.getLastFocusedFileTreeForResponse(currentResponse);\n\tconst focusIdx = lastFocusedFileTree ?\n\t\t(lastFocusedFileTree.treeIndex + (reverse ? -1 : 1) + responseFileTrees.length) % responseFileTrees.length :\n\t\treverse ? responseFileTrees.length - 1 : 0;\n\n\tresponseFileTrees[focusIdx]?.focus();\n}\n"]}