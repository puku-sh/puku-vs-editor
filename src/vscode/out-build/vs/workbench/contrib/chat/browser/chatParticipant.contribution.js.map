{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatParticipant.contribution.ts"],"names":[],"mappings":"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","file":"chatParticipant.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { coalesce, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { toErrorMessage } from '../../../../base/common/errorMessage.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { createCommandUri, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableMap, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ExtensionIdentifier, IExtensionManifest } from '../../../../platform/extensions/common/extensions.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { ViewPaneContainer } from '../../../browser/parts/views/viewPaneContainer.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IViewContainersRegistry, IViewDescriptor, IViewsRegistry, ViewContainer, ViewContainerLocation, Extensions as ViewExtensions } from '../../../common/views.js';\nimport { Extensions, IExtensionFeaturesRegistry, IExtensionFeatureTableRenderer, IRenderedData, IRowData, ITableData } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { isProposedApiEnabled } from '../../../services/extensions/common/extensions.js';\nimport * as extensionsRegistry from '../../../services/extensions/common/extensionsRegistry.js';\nimport { showExtensionsWithIdsCommandId } from '../../extensions/browser/extensionsActions.js';\nimport { IExtension, IExtensionsWorkbenchService } from '../../extensions/common/extensions.js';\nimport { IChatAgentData, IChatAgentService } from '../common/chatAgents.js';\nimport { ChatContextKeys } from '../common/chatContextKeys.js';\nimport { IRawChatParticipantContribution } from '../common/chatParticipantContribTypes.js';\nimport { ChatAgentLocation, ChatModeKind } from '../common/constants.js';\nimport { ChatViewId } from './chat.js';\nimport { CHAT_SIDEBAR_PANEL_ID, ChatViewPane } from './chatViewPane.js';\n\n// --- Chat Container &  View Registration\n\nconst chatViewContainer: ViewContainer = Registry.as<IViewContainersRegistry>(ViewExtensions.ViewContainersRegistry).registerViewContainer({\n\tid: CHAT_SIDEBAR_PANEL_ID,\n\ttitle: localize2('chat.viewContainer.label', \"Chat\"),\n\ticon: Codicon.chatSparkle,\n\tctorDescriptor: new SyncDescriptor(ViewPaneContainer, [CHAT_SIDEBAR_PANEL_ID, { mergeViewWithContainerWhenSingleView: true }]),\n\tstorageId: CHAT_SIDEBAR_PANEL_ID,\n\thideIfEmpty: true,\n\torder: 1,\n}, ViewContainerLocation.AuxiliaryBar, { isDefault: true, doNotRegisterOpenCommand: true });\n\nconst chatViewDescriptor: IViewDescriptor = {\n\tid: ChatViewId,\n\tcontainerIcon: chatViewContainer.icon,\n\tcontainerTitle: chatViewContainer.title.value,\n\tsingleViewPaneContainerTitle: chatViewContainer.title.value,\n\tname: localize2('chat.viewContainer.label', \"Chat\"),\n\tcanToggleVisibility: false,\n\tcanMoveView: true,\n\topenCommandActionDescriptor: {\n\t\tid: CHAT_SIDEBAR_PANEL_ID,\n\t\ttitle: chatViewContainer.title,\n\t\tmnemonicTitle: localize({ key: 'miToggleChat', comment: ['&& denotes a mnemonic'] }, \"&&Chat\"),\n\t\tkeybindings: {\n\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.KeyI,\n\t\t\tmac: {\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.WinCtrl | KeyCode.KeyI\n\t\t\t}\n\t\t},\n\t\torder: 1\n\t},\n\tctorDescriptor: new SyncDescriptor(ChatViewPane, [{ location: ChatAgentLocation.Chat }]),\n\twhen: ContextKeyExpr.or(\n\t\tContextKeyExpr.or(\n\t\t\tChatContextKeys.Setup.hidden,\n\t\t\tChatContextKeys.Setup.disabled\n\t\t)?.negate(),\n\t\tChatContextKeys.panelParticipantRegistered,\n\t\tChatContextKeys.extensionInvalid\n\t)\n};\nRegistry.as<IViewsRegistry>(ViewExtensions.ViewsRegistry).registerViews([chatViewDescriptor], chatViewContainer);\n\nconst chatParticipantExtensionPoint = extensionsRegistry.ExtensionsRegistry.registerExtensionPoint<IRawChatParticipantContribution[]>({\n\textensionPoint: 'chatParticipants',\n\tjsonSchema: {\n\t\tdescription: localize('vscode.extension.contributes.chatParticipant', 'Contributes a chat participant'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\tadditionalProperties: false,\n\t\t\ttype: 'object',\n\t\t\tdefaultSnippets: [{ body: { name: '', description: '' } }],\n\t\t\trequired: ['name', 'id'],\n\t\t\tproperties: {\n\t\t\t\tid: {\n\t\t\t\t\tdescription: localize('chatParticipantId', \"A unique id for this chat participant.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tname: {\n\t\t\t\t\tdescription: localize('chatParticipantName', \"User-facing name for this chat participant. The user will use '@' with this name to invoke the participant. Name must not contain whitespace.\"),\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tpattern: '^[\\\\w-]+$'\n\t\t\t\t},\n\t\t\t\tfullName: {\n\t\t\t\t\tmarkdownDescription: localize('chatParticipantFullName', \"The full name of this chat participant, which is shown as the label for responses coming from this participant. If not provided, {0} is used.\", '`name`'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\tdescription: localize('chatParticipantDescription', \"A description of this chat participant, shown in the UI.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tisSticky: {\n\t\t\t\t\tdescription: localize('chatCommandSticky', \"Whether invoking the command puts the chat into a persistent mode, where the command is automatically added to the chat input for the next message.\"),\n\t\t\t\t\ttype: 'boolean'\n\t\t\t\t},\n\t\t\t\tsampleRequest: {\n\t\t\t\t\tdescription: localize('chatSampleRequest', \"When the user clicks this participant in `/help`, this text will be submitted to the participant.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\twhen: {\n\t\t\t\t\tdescription: localize('chatParticipantWhen', \"A condition which must be true to enable this participant.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tdisambiguation: {\n\t\t\t\t\tdescription: localize('chatParticipantDisambiguation', \"Metadata to help with automatically routing user questions to this chat participant.\"),\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\tadditionalProperties: false,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tdefaultSnippets: [{ body: { category: '', description: '', examples: [] } }],\n\t\t\t\t\t\trequired: ['category', 'description', 'examples'],\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tcategory: {\n\t\t\t\t\t\t\t\tmarkdownDescription: localize('chatParticipantDisambiguationCategory', \"A detailed name for this category, e.g. `workspace_questions` or `web_questions`.\"),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\tdescription: localize('chatParticipantDisambiguationDescription', \"A detailed description of the kinds of questions that are suitable for this chat participant.\"),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\texamples: {\n\t\t\t\t\t\t\t\tdescription: localize('chatParticipantDisambiguationExamples', \"A list of representative example questions that are suitable for this chat participant.\"),\n\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcommands: {\n\t\t\t\t\tmarkdownDescription: localize('chatCommandsDescription', \"Commands available for this chat participant, which the user can invoke with a `/`.\"),\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\tadditionalProperties: false,\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tdefaultSnippets: [{ body: { name: '', description: '' } }],\n\t\t\t\t\t\trequired: ['name'],\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\tdescription: localize('chatCommand', \"A short name by which this command is referred to in the UI, e.g. `fix` or `explain` for commands that fix an issue or explain code. The name should be unique among the commands provided by this participant.\"),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\tdescription: localize('chatCommandDescription', \"A description of this command.\"),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\twhen: {\n\t\t\t\t\t\t\t\tdescription: localize('chatCommandWhen', \"A condition which must be true to enable this command.\"),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsampleRequest: {\n\t\t\t\t\t\t\t\tdescription: localize('chatCommandSampleRequest', \"When the user clicks this command in `/help`, this text will be submitted to the participant.\"),\n\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tisSticky: {\n\t\t\t\t\t\t\t\tdescription: localize('chatCommandSticky', \"Whether invoking the command puts the chat into a persistent mode, where the command is automatically added to the chat input for the next message.\"),\n\t\t\t\t\t\t\t\ttype: 'boolean'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdisambiguation: {\n\t\t\t\t\t\t\t\tdescription: localize('chatCommandDisambiguation', \"Metadata to help with automatically routing user questions to this chat command.\"),\n\t\t\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\t\t\tadditionalProperties: false,\n\t\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\t\tdefaultSnippets: [{ body: { category: '', description: '', examples: [] } }],\n\t\t\t\t\t\t\t\t\trequired: ['category', 'description', 'examples'],\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\tcategory: {\n\t\t\t\t\t\t\t\t\t\t\tmarkdownDescription: localize('chatCommandDisambiguationCategory', \"A detailed name for this category, e.g. `workspace_questions` or `web_questions`.\"),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tdescription: {\n\t\t\t\t\t\t\t\t\t\t\tdescription: localize('chatCommandDisambiguationDescription', \"A detailed description of the kinds of questions that are suitable for this chat command.\"),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\texamples: {\n\t\t\t\t\t\t\t\t\t\t\tdescription: localize('chatCommandDisambiguationExamples', \"A list of representative example questions that are suitable for this chat command.\"),\n\t\t\t\t\t\t\t\t\t\t\ttype: 'array'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\t},\n\tactivationEventsGenerator: function* (contributions: readonly IRawChatParticipantContribution[]) {\n\t\tfor (const contrib of contributions) {\n\t\t\tyield `onChatParticipant:${contrib.id}`;\n\t\t}\n\t},\n});\n\nexport class ChatExtensionPointHandler implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.chatExtensionPointHandler';\n\n\tprivate _participantRegistrationDisposables = new DisposableMap<string>();\n\n\tconstructor(\n\t\t@IChatAgentService private readonly _chatAgentService: IChatAgentService,\n\t) {\n\t\tthis.handleAndRegisterChatExtensions();\n\t}\n\n\tprivate handleAndRegisterChatExtensions(): void {\n\t\tchatParticipantExtensionPoint.setHandler((extensions, delta) => {\n\t\t\tfor (const extension of delta.added) {\n\t\t\t\tfor (const providerDescriptor of extension.value) {\n\t\t\t\t\tif (!providerDescriptor.name?.match(/^[\\w-]+$/)) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register participant with invalid name: ${providerDescriptor.name}. Name must match /^[\\\\w-]+$/.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (providerDescriptor.fullName && strings.AmbiguousCharacters.getInstance(new Set()).containsAmbiguousCharacter(providerDescriptor.fullName)) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register participant with fullName that contains ambiguous characters: ${providerDescriptor.fullName}.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Spaces are allowed but considered \"invisible\"\n\t\t\t\t\tif (providerDescriptor.fullName && strings.InvisibleCharacters.containsInvisibleCharacter(providerDescriptor.fullName.replace(/ /g, ''))) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register participant with fullName that contains invisible characters: ${providerDescriptor.fullName}.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((providerDescriptor.isDefault || providerDescriptor.modes) && !isProposedApiEnabled(extension.description, 'defaultChatParticipant')) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT use API proposal: defaultChatParticipant.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (providerDescriptor.locations && !isProposedApiEnabled(extension.description, 'chatParticipantAdditions')) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT use API proposal: chatParticipantAdditions.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!providerDescriptor.id || !providerDescriptor.name) {\n\t\t\t\t\t\textension.collector.error(`Extension '${extension.description.identifier.value}' CANNOT register participant without both id and name.`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst participantsDisambiguation: {\n\t\t\t\t\t\tcategory: string;\n\t\t\t\t\t\tdescription: string;\n\t\t\t\t\t\texamples: string[];\n\t\t\t\t\t}[] = [];\n\n\t\t\t\t\tif (providerDescriptor.disambiguation?.length) {\n\t\t\t\t\t\tparticipantsDisambiguation.push(...providerDescriptor.disambiguation.map((d) => ({\n\t\t\t\t\t\t\t...d, category: d.category ?? d.categoryName\n\t\t\t\t\t\t})));\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst store = new DisposableStore();\n\t\t\t\t\t\tstore.add(this._chatAgentService.registerAgent(\n\t\t\t\t\t\t\tproviderDescriptor.id,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\textensionId: extension.description.identifier,\n\t\t\t\t\t\t\t\textensionVersion: extension.description.version,\n\t\t\t\t\t\t\t\tpublisherDisplayName: extension.description.publisherDisplayName ?? extension.description.publisher, // May not be present in OSS\n\t\t\t\t\t\t\t\textensionPublisherId: extension.description.publisher,\n\t\t\t\t\t\t\t\textensionDisplayName: extension.description.displayName ?? extension.description.name,\n\t\t\t\t\t\t\t\tid: providerDescriptor.id,\n\t\t\t\t\t\t\t\tdescription: providerDescriptor.description,\n\t\t\t\t\t\t\t\twhen: providerDescriptor.when,\n\t\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\t\tisSticky: providerDescriptor.isSticky,\n\t\t\t\t\t\t\t\t\tsampleRequest: providerDescriptor.sampleRequest,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: providerDescriptor.name,\n\t\t\t\t\t\t\t\tfullName: providerDescriptor.fullName,\n\t\t\t\t\t\t\t\tisDefault: providerDescriptor.isDefault,\n\t\t\t\t\t\t\t\tlocations: isNonEmptyArray(providerDescriptor.locations) ?\n\t\t\t\t\t\t\t\t\tproviderDescriptor.locations.map(ChatAgentLocation.fromRaw) :\n\t\t\t\t\t\t\t\t\t[ChatAgentLocation.Chat],\n\t\t\t\t\t\t\t\tmodes: providerDescriptor.isDefault ? (providerDescriptor.modes ?? [ChatModeKind.Ask]) : [ChatModeKind.Agent, ChatModeKind.Ask, ChatModeKind.Edit],\n\t\t\t\t\t\t\t\tslashCommands: providerDescriptor.commands ?? [],\n\t\t\t\t\t\t\t\tdisambiguation: coalesce(participantsDisambiguation.flat()),\n\t\t\t\t\t\t\t} satisfies IChatAgentData));\n\n\t\t\t\t\t\tthis._participantRegistrationDisposables.set(\n\t\t\t\t\t\t\tgetParticipantKey(extension.description.identifier, providerDescriptor.id),\n\t\t\t\t\t\t\tstore\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\textension.collector.error(`Failed to register participant ${providerDescriptor.id}: ${toErrorMessage(e, true)}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const extension of delta.removed) {\n\t\t\t\tfor (const providerDescriptor of extension.value) {\n\t\t\t\t\tthis._participantRegistrationDisposables.deleteAndDispose(getParticipantKey(extension.description.identifier, providerDescriptor.id));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction getParticipantKey(extensionId: ExtensionIdentifier, participantName: string): string {\n\treturn `${extensionId.value}_${participantName}`;\n}\n\nexport class ChatCompatibilityNotifier extends Disposable implements IWorkbenchContribution {\n\tstatic readonly ID = 'workbench.contrib.chatCompatNotifier';\n\n\tprivate registeredWelcomeView = false;\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IProductService private readonly productService: IProductService,\n\t) {\n\t\tsuper();\n\n\t\t// It may be better to have some generic UI for this, for any extension that is incompatible,\n\t\t// but this is only enabled for Chat now and it needs to be obvious.\n\t\tconst isInvalid = ChatContextKeys.extensionInvalid.bindTo(contextKeyService);\n\t\tthis._register(Event.runAndSubscribe(\n\t\t\textensionsWorkbenchService.onDidChangeExtensionsNotification,\n\t\t\t() => {\n\t\t\t\tconst notification = extensionsWorkbenchService.getExtensionsNotification();\n\t\t\t\tconst chatExtension = notification?.extensions.find(ext => ExtensionIdentifier.equals(ext.identifier.id, this.productService.defaultChatAgent?.chatExtensionId));\n\t\t\t\tif (chatExtension) {\n\t\t\t\t\tisInvalid.set(true);\n\t\t\t\t\tthis.registerWelcomeView(chatExtension);\n\t\t\t\t} else {\n\t\t\t\t\tisInvalid.set(false);\n\t\t\t\t}\n\t\t\t}\n\t\t));\n\t}\n\n\tprivate registerWelcomeView(chatExtension: IExtension) {\n\t\tif (this.registeredWelcomeView) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.registeredWelcomeView = true;\n\t\tconst showExtensionLabel = localize('showExtension', \"Show Extension\");\n\t\tconst mainMessage = localize('chatFailErrorMessage', \"Chat failed to load because the installed version of the Copilot Chat extension is not compatible with this version of {0}. Please ensure that the Copilot Chat extension is up to date.\", this.productService.nameLong);\n\t\tconst commandButton = `[${showExtensionLabel}](${createCommandUri(showExtensionsWithIdsCommandId, [this.productService.defaultChatAgent?.chatExtensionId])})`;\n\t\tconst versionMessage = `Copilot Chat version: ${chatExtension.version}`;\n\t\tconst viewsRegistry = Registry.as<IViewsRegistry>(ViewExtensions.ViewsRegistry);\n\t\tthis._register(viewsRegistry.registerViewWelcomeContent(ChatViewId, {\n\t\t\tcontent: [mainMessage, commandButton, versionMessage].join('\\n\\n'),\n\t\t\twhen: ChatContextKeys.extensionInvalid,\n\t\t}));\n\t}\n}\n\nclass ChatParticipantDataRenderer extends Disposable implements IExtensionFeatureTableRenderer {\n\treadonly type = 'table';\n\n\tshouldRender(manifest: IExtensionManifest): boolean {\n\t\treturn !!manifest.contributes?.chatParticipants;\n\t}\n\n\trender(manifest: IExtensionManifest): IRenderedData<ITableData> {\n\t\tconst nonDefaultContributions = manifest.contributes?.chatParticipants?.filter(c => !c.isDefault) ?? [];\n\t\tif (!nonDefaultContributions.length) {\n\t\t\treturn { data: { headers: [], rows: [] }, dispose: () => { } };\n\t\t}\n\n\t\tconst headers = [\n\t\t\tlocalize('participantName', \"Name\"),\n\t\t\tlocalize('participantFullName', \"Full Name\"),\n\t\t\tlocalize('participantDescription', \"Description\"),\n\t\t\tlocalize('participantCommands', \"Commands\"),\n\t\t];\n\n\t\tconst rows: IRowData[][] = nonDefaultContributions.map(d => {\n\t\t\treturn [\n\t\t\t\t'@' + d.name,\n\t\t\t\td.fullName,\n\t\t\t\td.description ?? '-',\n\t\t\t\td.commands?.length ? new MarkdownString(d.commands.map(c => `- /` + c.name).join('\\n')) : '-'\n\t\t\t];\n\t\t});\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\theaders,\n\t\t\t\trows\n\t\t\t},\n\t\t\tdispose: () => { }\n\t\t};\n\t}\n}\n\nRegistry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).registerExtensionFeature({\n\tid: 'chatParticipants',\n\tlabel: localize('chatParticipants', \"Chat Participants\"),\n\taccess: {\n\t\tcanToggle: false\n\t},\n\trenderer: new SyncDescriptor(ChatParticipantDataRenderer),\n});\n"]}