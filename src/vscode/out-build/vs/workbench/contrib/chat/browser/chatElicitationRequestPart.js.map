{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/browser/chatElicitationRequestPart.ts","vs/workbench/contrib/chat/browser/chatElicitationRequestPart.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAIhG,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAAe,eAAe,EAAE,MAAM,uCAAuC,CAAC;AAIrF,MAAM,OAAO,0BAA2B,SAAQ,UAAU;IASzD,YACiB,KAA+B,EAC/B,OAAiC,EACjC,QAAkC,EAClC,iBAAyB,EACzB,iBAAqC;IACrD,mFAAmF;IAClE,OAA6D,EAC9E,MAAwC,EACxB,MAAuB,EACvB,WAAuB,EACvB,MAAmB;QAEnC,KAAK,EAAE,CAAC;QAZQ,UAAK,GAAL,KAAK,CAA0B;QAC/B,YAAO,GAAP,OAAO,CAA0B;QACjC,aAAQ,GAAR,QAAQ,CAA0B;QAClC,sBAAiB,GAAjB,iBAAiB,CAAQ;QACzB,sBAAiB,GAAjB,iBAAiB,CAAoB;QAEpC,YAAO,GAAP,OAAO,CAAsD;QAE9D,WAAM,GAAN,MAAM,CAAiB;QACvB,gBAAW,GAAX,WAAW,CAAY;QACvB,WAAM,GAAN,MAAM,CAAa;QAnBpB,SAAI,GAAG,cAAc,CAAC;QAC/B,UAAK,GAAG,eAAe,CAAC,OAAO,2CAA2B,CAAC;QAGjD,mBAAc,GAAG,eAAe,CAAU,UAAU,EAAE,KAAK,CAAC,CAAC;QAC9D,aAAQ,GAAyB,IAAI,CAAC,cAAc,CAAC;QAkBpE,IAAI,MAAM,EAAE,CAAC;YACZ,IAAI,CAAC,MAAM,GAAG,KAAK,IAAI,EAAE;gBACxB,MAAM,KAAK,GAAG,MAAM,MAAO,EAAE,CAAC;gBAC9B,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;YAClC,CAAC,CAAC;QACH,CAAC;IACF,CAAC;IAED,MAAM,CAAC,KAAqB;QAC3B,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;YACvC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACJ,CAAC;IAED,IAAI;QACH,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,EAAE,CAAC;YAC/B,OAAO;QACR,CAAC;QACD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC;QAChB,IAAI,CAAC,OAAO,EAAE,CAAC;IAChB,CAAC;IAEM,MAAM;QACZ,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;QAE/B,OAAO;YACN,IAAI,EAAE,uBAAuB;YAC7B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,KAAK,EAAE,KAAK,6CAA6B,CAAC,CAAC,4CAA2B,CAAC,CAAC,KAAK;YAC7E,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE;SACS,CAAC;IAC/C,CAAC;CACD","file":"chatElicitationRequestPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction } from '../../../../base/common/actions.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, observableValue } from '../../../../base/common/observable.js';\nimport { ElicitationState, IChatElicitationRequest, IChatElicitationRequestSerialized } from '../common/chatService.js';\nimport { ToolDataSource } from '../common/languageModelToolsService.js';\n\nexport class ChatElicitationRequestPart extends Disposable implements IChatElicitationRequest {\n\tpublic readonly kind = 'elicitation2';\n\tpublic state = observableValue('state', ElicitationState.Pending);\n\tpublic acceptedResult?: Record<string, unknown>;\n\n\tprivate readonly _isHiddenValue = observableValue<boolean>('isHidden', false);\n\tpublic readonly isHidden: IObservable<boolean> = this._isHiddenValue;\n\tpublic reject?: (() => Promise<void>) | undefined;\n\n\tconstructor(\n\t\tpublic readonly title: string | IMarkdownString,\n\t\tpublic readonly message: string | IMarkdownString,\n\t\tpublic readonly subtitle: string | IMarkdownString,\n\t\tpublic readonly acceptButtonLabel: string,\n\t\tpublic readonly rejectButtonLabel: string | undefined,\n\t\t// True when the primary action is accepted, otherwise the action that was selected\n\t\tprivate readonly _accept: (value: IAction | true) => Promise<ElicitationState>,\n\t\treject?: () => Promise<ElicitationState>,\n\t\tpublic readonly source?: ToolDataSource,\n\t\tpublic readonly moreActions?: IAction[],\n\t\tpublic readonly onHide?: () => void,\n\t) {\n\t\tsuper();\n\n\t\tif (reject) {\n\t\t\tthis.reject = async () => {\n\t\t\t\tconst state = await reject!();\n\t\t\t\tthis.state.set(state, undefined);\n\t\t\t};\n\t\t}\n\t}\n\n\taccept(value: IAction | true): Promise<void> {\n\t\treturn this._accept(value).then(state => {\n\t\t\tthis.state.set(state, undefined);\n\t\t});\n\t}\n\n\thide(): void {\n\t\tif (this._isHiddenValue.get()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isHiddenValue.set(true, undefined, undefined);\n\t\tthis.onHide?.();\n\t\tthis.dispose();\n\t}\n\n\tpublic toJSON() {\n\t\tconst state = this.state.get();\n\n\t\treturn {\n\t\t\tkind: 'elicitationSerialized',\n\t\t\ttitle: this.title,\n\t\t\tmessage: this.message,\n\t\t\tstate: state === ElicitationState.Pending ? ElicitationState.Rejected : state,\n\t\t\tacceptedResult: this.acceptedResult,\n\t\t\tsubtitle: this.subtitle,\n\t\t\tsource: this.source,\n\t\t\tisHidden: this._isHiddenValue.get(),\n\t\t} satisfies IChatElicitationRequestSerialized;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction } from '../../../../base/common/actions.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IObservable, observableValue } from '../../../../base/common/observable.js';\nimport { ElicitationState, IChatElicitationRequest, IChatElicitationRequestSerialized } from '../common/chatService.js';\nimport { ToolDataSource } from '../common/languageModelToolsService.js';\n\nexport class ChatElicitationRequestPart extends Disposable implements IChatElicitationRequest {\n\tpublic readonly kind = 'elicitation2';\n\tpublic state = observableValue('state', ElicitationState.Pending);\n\tpublic acceptedResult?: Record<string, unknown>;\n\n\tprivate readonly _isHiddenValue = observableValue<boolean>('isHidden', false);\n\tpublic readonly isHidden: IObservable<boolean> = this._isHiddenValue;\n\tpublic reject?: (() => Promise<void>) | undefined;\n\n\tconstructor(\n\t\tpublic readonly title: string | IMarkdownString,\n\t\tpublic readonly message: string | IMarkdownString,\n\t\tpublic readonly subtitle: string | IMarkdownString,\n\t\tpublic readonly acceptButtonLabel: string,\n\t\tpublic readonly rejectButtonLabel: string | undefined,\n\t\t// True when the primary action is accepted, otherwise the action that was selected\n\t\tprivate readonly _accept: (value: IAction | true) => Promise<ElicitationState>,\n\t\treject?: () => Promise<ElicitationState>,\n\t\tpublic readonly source?: ToolDataSource,\n\t\tpublic readonly moreActions?: IAction[],\n\t\tpublic readonly onHide?: () => void,\n\t) {\n\t\tsuper();\n\n\t\tif (reject) {\n\t\t\tthis.reject = async () => {\n\t\t\t\tconst state = await reject!();\n\t\t\t\tthis.state.set(state, undefined);\n\t\t\t};\n\t\t}\n\t}\n\n\taccept(value: IAction | true): Promise<void> {\n\t\treturn this._accept(value).then(state => {\n\t\t\tthis.state.set(state, undefined);\n\t\t});\n\t}\n\n\thide(): void {\n\t\tif (this._isHiddenValue.get()) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isHiddenValue.set(true, undefined, undefined);\n\t\tthis.onHide?.();\n\t\tthis.dispose();\n\t}\n\n\tpublic toJSON() {\n\t\tconst state = this.state.get();\n\n\t\treturn {\n\t\t\tkind: 'elicitationSerialized',\n\t\t\ttitle: this.title,\n\t\t\tmessage: this.message,\n\t\t\tstate: state === ElicitationState.Pending ? ElicitationState.Rejected : state,\n\t\t\tacceptedResult: this.acceptedResult,\n\t\t\tsubtitle: this.subtitle,\n\t\t\tsource: this.source,\n\t\t\tisHidden: this._isHiddenValue.get(),\n\t\t} satisfies IChatElicitationRequestSerialized;\n\t}\n}\n"]}