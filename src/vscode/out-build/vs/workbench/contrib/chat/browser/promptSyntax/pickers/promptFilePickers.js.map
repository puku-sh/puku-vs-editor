{"version":3,"sources":["vs/workbench/contrib/chat/browser/promptSyntax/pickers/promptFilePickers.ts"],"names":[],"mappings":"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","file":"promptFilePickers.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../../../nls.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { IPromptPath, IPromptsService, PromptsStorage } from '../../../common/promptSyntax/service/promptsService.js';\nimport { dirname, extUri, joinPath } from '../../../../../../base/common/resources.js';\nimport { DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { IFileService } from '../../../../../../platform/files/common/files.js';\nimport { IOpenerService } from '../../../../../../platform/opener/common/opener.js';\nimport { IDialogService } from '../../../../../../platform/dialogs/common/dialogs.js';\nimport { ICommandService } from '../../../../../../platform/commands/common/commands.js';\nimport { getCleanPromptName } from '../../../common/promptSyntax/config/promptFileLocations.js';\nimport { PromptsType, INSTRUCTIONS_DOCUMENTATION_URL, AGENT_DOCUMENTATION_URL, PROMPT_DOCUMENTATION_URL } from '../../../common/promptSyntax/promptTypes.js';\nimport { NEW_PROMPT_COMMAND_ID, NEW_INSTRUCTIONS_COMMAND_ID, NEW_AGENT_COMMAND_ID } from '../newPromptFileActions.js';\nimport { IKeyMods, IQuickInputButton, IQuickInputService, IQuickPick, IQuickPickItem, IQuickPickItemButtonEvent, IQuickPickSeparator } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { askForPromptFileName } from './askForPromptName.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../../../base/common/cancellation.js';\nimport { askForPromptSourceFolder } from './askForPromptSourceFolder.js';\nimport { ILabelService } from '../../../../../../platform/label/common/label.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { PromptsConfig } from '../../../common/promptSyntax/config/config.js';\nimport { ResourceSet } from '../../../../../../base/common/map.js';\nimport { PromptFileRewriter } from '../promptFileRewriter.js';\n\n/**\n * Options for the {@link askToSelectInstructions} function.\n */\nexport interface ISelectOptions {\n\n\t/**\n\t * The text shows as placeholder in the selection dialog.\n\t */\n\treadonly placeholder: string;\n\n\t/**\n\t * Prompt resource `URI` to attach to the chat input, if any.\n\t * If provided the resource will be pre-selected in the prompt picker dialog,\n\t * otherwise the dialog will show the prompts list without any pre-selection.\n\t */\n\treadonly resource?: URI;\n\n\treadonly type: PromptsType;\n\n\treadonly optionNew?: boolean;\n\treadonly optionEdit?: boolean;\n\treadonly optionDelete?: boolean;\n\treadonly optionRename?: boolean;\n\treadonly optionCopy?: boolean;\n\treadonly optionVisibility?: boolean;\n}\n\nexport interface ISelectPromptResult {\n\t/**\n\t * The selected prompt file.\n\t */\n\treadonly promptFile: URI;\n\n\t/**\n\t * The key modifiers that were pressed when the prompt was selected.\n\t */\n\treadonly keyMods: IKeyMods;\n}\n\n/**\n * Button that opens the documentation.\n */\nfunction newHelpButton(type: PromptsType): IQuickInputButton & { helpURI: URI } {\n\tconst iconClass = ThemeIcon.asClassName(Codicon.question);\n\tswitch (type) {\n\t\tcase PromptsType.prompt:\n\t\t\treturn {\n\t\t\t\ttooltip: localize('help.prompt', \"Show help on prompt files\"),\n\t\t\t\thelpURI: URI.parse(PROMPT_DOCUMENTATION_URL),\n\t\t\t\ticonClass\n\t\t\t};\n\t\tcase PromptsType.instructions:\n\t\t\treturn {\n\t\t\t\ttooltip: localize('help.instructions', \"Show help on instruction files\"),\n\t\t\t\thelpURI: URI.parse(INSTRUCTIONS_DOCUMENTATION_URL),\n\t\t\t\ticonClass\n\t\t\t};\n\t\tcase PromptsType.agent:\n\t\t\treturn {\n\t\t\t\ttooltip: localize('help.agent', \"Show help on custom agent files\"),\n\t\t\t\thelpURI: URI.parse(AGENT_DOCUMENTATION_URL),\n\t\t\t\ticonClass\n\t\t\t};\n\t}\n}\n\nfunction isHelpButton(button: IQuickInputButton): button is IQuickInputButton & { helpURI: URI } {\n\treturn (<{ helpURI: URI }>button).helpURI !== undefined;\n}\n\ninterface IPromptPickerQuickPickItem extends IQuickPickItem {\n\n\ttype: 'item';\n\n\t/**\n\t * The URI of the prompt file.\n\t */\n\tpromptFileUri?: URI;\n\n\t/**\n\t * The command ID to execute when this item is selected.\n\t */\n\tcommandId?: string;\n}\n\nfunction isPromptFileItem(item: IPromptPickerQuickPickItem | IQuickPickSeparator): item is IPromptPickerQuickPickItem & { promptFileUri: URI } {\n\treturn item.type === 'item' && !!item.promptFileUri;\n}\n\ntype IPromptQuickPick = IQuickPick<IPromptPickerQuickPickItem, { useSeparators: true }>;\n\n/**\n * A quick pick item that starts the 'New Prompt File' command.\n */\nconst NEW_PROMPT_FILE_OPTION: IPromptPickerQuickPickItem = {\n\ttype: 'item',\n\tlabel: `$(plus) ${localize(\n\t\t'commands.new-promptfile.select-dialog.label',\n\t\t'New prompt file...'\n\t)}`,\n\tpickable: false,\n\talwaysShow: true,\n\tbuttons: [newHelpButton(PromptsType.prompt)],\n\tcommandId: NEW_PROMPT_COMMAND_ID,\n};\n\n/**\n * A quick pick item that starts the 'New Instructions File' command.\n */\nconst NEW_INSTRUCTIONS_FILE_OPTION: IPromptPickerQuickPickItem = {\n\ttype: 'item',\n\tlabel: `$(plus) ${localize(\n\t\t'commands.new-instructionsfile.select-dialog.label',\n\t\t'New instruction file...',\n\t)}`,\n\tpickable: false,\n\talwaysShow: true,\n\tbuttons: [newHelpButton(PromptsType.instructions)],\n\tcommandId: NEW_INSTRUCTIONS_COMMAND_ID,\n};\n\n/**\n * A quick pick item that starts the 'Update Instructions' command.\n */\nconst UPDATE_INSTRUCTIONS_OPTION: IPromptPickerQuickPickItem = {\n\ttype: 'item',\n\tlabel: `$(refresh) ${localize(\n\t\t'commands.update-instructions.select-dialog.label',\n\t\t'Generate agent instructions...',\n\t)}`,\n\tpickable: false,\n\talwaysShow: true,\n\tbuttons: [newHelpButton(PromptsType.instructions)],\n\tcommandId: 'workbench.action.chat.generateInstructions',\n};\n\n/**\n * A quick pick item that starts the 'New Instructions File' command.\n */\nconst NEW_AGENT_FILE_OPTION: IPromptPickerQuickPickItem = {\n\ttype: 'item',\n\tlabel: `$(plus) ${localize(\n\t\t'commands.new-agentfile.select-dialog.label',\n\t\t'Create new custom agent...',\n\t)}`,\n\tpickable: false,\n\talwaysShow: true,\n\tbuttons: [newHelpButton(PromptsType.agent)],\n\tcommandId: NEW_AGENT_COMMAND_ID,\n};\n\n/**\n * Button that opens a prompt file in the editor.\n */\nconst EDIT_BUTTON: IQuickInputButton = {\n\ttooltip: localize('open', \"Open in Editor\"),\n\ticonClass: ThemeIcon.asClassName(Codicon.fileCode),\n};\n\n/**\n * Button that deletes a prompt file.\n */\nconst DELETE_BUTTON: IQuickInputButton = {\n\ttooltip: localize('delete', \"Delete\"),\n\ticonClass: ThemeIcon.asClassName(Codicon.trash),\n};\n\n/**\n * Button that renames a prompt file.\n */\nconst RENAME_BUTTON: IQuickInputButton = {\n\ttooltip: localize('rename', \"Move and/or Rename\"),\n\ticonClass: ThemeIcon.asClassName(Codicon.replace),\n};\n\n/**\n * Button that copies a prompt file.\n */\nconst COPY_BUTTON: IQuickInputButton = {\n\ttooltip: localize('copy', \"Copy\"),\n\ticonClass: ThemeIcon.asClassName(Codicon.copy),\n};\n\n/**\n * Button that sets a prompt file to be visible.\n */\nconst MAKE_VISIBLE_BUTTON: IQuickInputButton = {\n\ttooltip: localize('makeVisible', \"Hidden from chat view agent picker. Click to show.\"),\n\ticonClass: ThemeIcon.asClassName(Codicon.eyeClosed),\n\talwaysVisible: true,\n};\n\n/**\n * Button that sets a prompt file to be invisible.\n */\nconst MAKE_INVISIBLE_BUTTON: IQuickInputButton = {\n\ttooltip: localize('makeInvisible', \"Hide from agent picker\"),\n\ticonClass: ThemeIcon.asClassName(Codicon.eyeClosed),\n};\n\nexport class PromptFilePickers {\n\tconstructor(\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@ICommandService private readonly _commandService: ICommandService,\n\t\t@IInstantiationService private readonly _instaService: IInstantiationService,\n\t\t@IPromptsService private readonly _promptsService: IPromptsService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t}\n\n\t/**\n\t * Shows the prompt file selection dialog to the user that allows to run a prompt file(s).\n\t *\n\t * If {@link ISelectOptions.resource resource} is provided, the dialog will have\n\t * the resource pre-selected in the prompts list.\n\t */\n\tasync selectPromptFile(options: ISelectOptions): Promise<ISelectPromptResult | undefined> {\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst quickPick: IPromptQuickPick = this._quickInputService.createQuickPick<IPromptPickerQuickPickItem>({ useSeparators: true });\n\t\tquickPick.busy = true;\n\t\tquickPick.placeholder = localize('searching', 'Searching file system...');\n\n\t\ttry {\n\t\t\tconst fileOptions = await this._createPromptPickItems(options, cts.token);\n\t\t\tconst activeItem = options.resource && fileOptions.find(f => f.type === 'item' && extUri.isEqual(f.promptFileUri, options.resource)) as IPromptPickerQuickPickItem | undefined;\n\t\t\tif (activeItem) {\n\t\t\t\tquickPick.activeItems = [activeItem];\n\t\t\t}\n\t\t\tquickPick.placeholder = options.placeholder;\n\t\t\tquickPick.matchOnDescription = true;\n\t\t\tquickPick.items = fileOptions;\n\t\t} finally {\n\t\t\tquickPick.busy = false;\n\t\t}\n\n\t\treturn new Promise<ISelectPromptResult | undefined>(resolve => {\n\t\t\tconst disposables = new DisposableStore();\n\n\t\t\tlet isResolved = false;\n\t\t\tlet isClosed = false;\n\n\t\t\tdisposables.add(quickPick);\n\t\t\tdisposables.add(cts);\n\n\t\t\tconst refreshItems = async () => {\n\t\t\t\tconst active = quickPick.activeItems;\n\t\t\t\tconst newItems = await this._createPromptPickItems(options, CancellationToken.None);\n\t\t\t\tquickPick.items = newItems;\n\t\t\t\tquickPick.activeItems = active;\n\t\t\t};\n\n\t\t\t// handle the prompt `accept` event\n\t\t\tdisposables.add(quickPick.onDidAccept(async () => {\n\t\t\t\tconst { selectedItems } = quickPick;\n\t\t\t\tconst { keyMods } = quickPick;\n\n\t\t\t\tconst selectedItem = selectedItems[0];\n\t\t\t\tif (isPromptFileItem(selectedItem)) {\n\t\t\t\t\tresolve({ promptFile: selectedItem.promptFileUri, keyMods: { ...keyMods } });\n\t\t\t\t\tisResolved = true;\n\t\t\t\t} else {\n\t\t\t\t\tif (selectedItem.commandId) {\n\t\t\t\t\t\tawait this._commandService.executeCommand(selectedItem.commandId);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tquickPick.hide();\n\t\t\t}));\n\n\t\t\t// handle the `button click` event on a list item (edit, delete, etc.)\n\t\t\tdisposables.add(quickPick.onDidTriggerItemButton(async e => {\n\t\t\t\tconst shouldRefresh = await this._handleButtonClick(quickPick, e, options);\n\t\t\t\tif (!isClosed && shouldRefresh) {\n\t\t\t\t\tawait refreshItems();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tdisposables.add(quickPick.onDidHide(() => {\n\t\t\t\tif (!quickPick.ignoreFocusOut) {\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\tisClosed = true;\n\t\t\t\t\tif (!isResolved) {\n\t\t\t\t\t\tresolve(undefined);\n\t\t\t\t\t\tisResolved = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\t// finally, reveal the dialog\n\t\t\tquickPick.show();\n\t\t});\n\t}\n\n\n\tprivate async _createPromptPickItems(options: ISelectOptions, token: CancellationToken): Promise<(IPromptPickerQuickPickItem | IQuickPickSeparator)[]> {\n\t\tconst buttons: IQuickInputButton[] = [];\n\t\tif (options.optionEdit !== false) {\n\t\t\tbuttons.push(EDIT_BUTTON);\n\t\t}\n\t\tif (options.optionCopy !== false) {\n\t\t\tbuttons.push(COPY_BUTTON);\n\t\t}\n\t\tif (options.optionRename !== false) {\n\t\t\tbuttons.push(RENAME_BUTTON);\n\t\t}\n\t\tif (options.optionDelete !== false) {\n\t\t\tbuttons.push(DELETE_BUTTON);\n\t\t}\n\t\tconst result: (IPromptPickerQuickPickItem | IQuickPickSeparator)[] = [];\n\t\tif (options.optionNew !== false) {\n\t\t\tresult.push(...this._getNewItems(options.type));\n\t\t}\n\n\t\tlet getVisibility: (p: IPromptPath) => boolean | undefined = () => undefined;\n\t\tif (options.optionVisibility) {\n\t\t\tconst disabled = this._promptsService.getDisabledPromptFiles(options.type);\n\t\t\tgetVisibility = p => !disabled.has(p.uri);\n\t\t}\n\n\t\tconst locals = await this._promptsService.listPromptFilesForStorage(options.type, PromptsStorage.local, token);\n\t\tif (locals.length) {\n\t\t\tresult.push({ type: 'separator', label: localize('separator.workspace', \"Workspace\") });\n\t\t\tresult.push(...await Promise.all(locals.map(l => this._createPromptPickItem(l, buttons, getVisibility(l), token))));\n\t\t}\n\n\t\t// Agent instruction files (copilot-instructions.md and AGENTS.md) are added here and not included in the output of\n\t\t// listPromptFilesForStorage() because that function only handles *.instructions.md files (under `.github/instructions/`, etc.)\n\t\tlet agentInstructionFiles: IPromptPath[] = [];\n\t\tif (options.type === PromptsType.instructions) {\n\t\t\tconst useNestedAgentMD = this._configurationService.getValue(PromptsConfig.USE_NESTED_AGENT_MD);\n\t\t\tconst agentInstructionUris = [\n\t\t\t\t...await this._promptsService.listCopilotInstructionsMDs(token),\n\t\t\t\t...await this._promptsService.listAgentMDs(token, !!useNestedAgentMD)\n\t\t\t];\n\t\t\tagentInstructionFiles = agentInstructionUris.map(uri => {\n\t\t\t\tconst folderName = this._labelService.getUriLabel(dirname(uri), { relative: true });\n\t\t\t\t// Don't show the folder path for files under .github folder (namely, copilot-instructions.md) since that is only defined once per repo.\n\t\t\t\tconst shouldShowFolderPath = folderName?.toLowerCase() !== '.github';\n\t\t\t\treturn {\n\t\t\t\t\turi,\n\t\t\t\t\tdescription: shouldShowFolderPath ? folderName : undefined,\n\t\t\t\t\tstorage: PromptsStorage.local,\n\t\t\t\t\ttype: options.type\n\t\t\t\t} satisfies IPromptPath;\n\t\t\t});\n\t\t}\n\t\tif (agentInstructionFiles.length) {\n\t\t\tconst agentButtons = buttons.filter(b => b !== RENAME_BUTTON);\n\t\t\tresult.push({ type: 'separator', label: localize('separator.workspace-agent-instructions', \"Agent Instructions\") });\n\t\t\tresult.push(...await Promise.all(agentInstructionFiles.map(l => this._createPromptPickItem(l, agentButtons, getVisibility(l), token))));\n\t\t}\n\n\t\tconst exts = await this._promptsService.listPromptFilesForStorage(options.type, PromptsStorage.extension, token);\n\t\tif (exts.length) {\n\t\t\tresult.push({ type: 'separator', label: localize('separator.extensions', \"Extensions\") });\n\t\t\tconst extButtons: IQuickInputButton[] = [];\n\t\t\tif (options.optionEdit !== false) {\n\t\t\t\textButtons.push(EDIT_BUTTON);\n\t\t\t}\n\t\t\tif (options.optionCopy !== false) {\n\t\t\t\textButtons.push(COPY_BUTTON);\n\t\t\t}\n\t\t\tresult.push(...await Promise.all(exts.map(e => this._createPromptPickItem(e, extButtons, getVisibility(e), token))));\n\t\t}\n\t\tconst users = await this._promptsService.listPromptFilesForStorage(options.type, PromptsStorage.user, token);\n\t\tif (users.length) {\n\t\t\tresult.push({ type: 'separator', label: localize('separator.user', \"User Data\") });\n\t\t\tresult.push(...await Promise.all(users.map(u => this._createPromptPickItem(u, buttons, getVisibility(u), token))));\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate _getNewItems(type: PromptsType): IPromptPickerQuickPickItem[] {\n\t\tswitch (type) {\n\t\t\tcase PromptsType.prompt:\n\t\t\t\treturn [NEW_PROMPT_FILE_OPTION];\n\t\t\tcase PromptsType.instructions:\n\t\t\t\treturn [NEW_INSTRUCTIONS_FILE_OPTION, UPDATE_INSTRUCTIONS_OPTION];\n\t\t\tcase PromptsType.agent:\n\t\t\t\treturn [NEW_AGENT_FILE_OPTION];\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Unknown prompt type '${type}'.`);\n\t\t}\n\t}\n\n\tprivate async _createPromptPickItem(promptFile: IPromptPath, buttons: IQuickInputButton[] | undefined, visibility: boolean | undefined, token: CancellationToken): Promise<IPromptPickerQuickPickItem> {\n\t\tconst parsedPromptFile = await this._promptsService.parseNew(promptFile.uri, token).catch(() => undefined);\n\t\tlet promptName = parsedPromptFile?.header?.name ?? promptFile.name ?? getCleanPromptName(promptFile.uri);\n\t\tconst promptDescription = parsedPromptFile?.header?.description ?? promptFile.description;\n\n\t\tlet tooltip: string | undefined;\n\n\t\tswitch (promptFile.storage) {\n\t\t\tcase PromptsStorage.extension:\n\t\t\t\ttooltip = promptFile.extension.displayName ?? promptFile.extension.id;\n\t\t\t\tbreak;\n\t\t\tcase PromptsStorage.local:\n\t\t\t\ttooltip = this._labelService.getUriLabel(dirname(promptFile.uri), { relative: true });\n\t\t\t\tbreak;\n\t\t\tcase PromptsStorage.user:\n\t\t\t\ttooltip = undefined;\n\t\t\t\tbreak;\n\t\t}\n\t\tlet iconClass: string | undefined;\n\t\tif (visibility === false) {\n\t\t\tbuttons = (buttons ?? []).concat(MAKE_VISIBLE_BUTTON);\n\t\t\tpromptName = localize('hiddenLabelInfo', \"{0} (hidden)\", promptName);\n\t\t\ttooltip = localize('hiddenInAgentPicker', \"Hidden from chat view agent picker\");\n\t\t\t//iconClass = ThemeIcon.asClassName(Codicon.eyeClosed);\n\t\t} else if (visibility === true) {\n\t\t\tbuttons = (buttons ?? []).concat(MAKE_INVISIBLE_BUTTON);\n\t\t}\n\t\treturn {\n\t\t\tid: promptFile.uri.toString(),\n\t\t\ttype: 'item',\n\t\t\tlabel: promptName,\n\t\t\tdescription: promptDescription,\n\t\t\ticonClass,\n\t\t\ttooltip,\n\t\t\tpromptFileUri: promptFile.uri,\n\t\t\tbuttons,\n\t\t} satisfies IPromptPickerQuickPickItem;\n\t}\n\n\n\tprivate async keepQuickPickOpen<T>(quickPick: IPromptQuickPick, work: () => Promise<T>): Promise<T> {\n\t\tconst previousIgnoreFocusOut = quickPick.ignoreFocusOut;\n\t\tquickPick.ignoreFocusOut = true;\n\t\ttry {\n\t\t\treturn await work();\n\t\t} finally {\n\t\t\tquickPick.ignoreFocusOut = previousIgnoreFocusOut;\n\t\t\tquickPick.show();\n\t\t}\n\t}\n\n\tprivate async _handleButtonClick(quickPick: IPromptQuickPick, context: IQuickPickItemButtonEvent<IPromptPickerQuickPickItem>, options: ISelectOptions): Promise<boolean> {\n\t\tconst { item, button } = context;\n\t\tif (!isPromptFileItem(item)) {\n\t\t\tif (isHelpButton(button)) {\n\t\t\t\tawait this._openerService.open(button.helpURI);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthrow new Error(`Unknown button '${JSON.stringify(button)}'.`);\n\t\t}\n\t\tconst value = item.promptFileUri;\n\n\t\t// `edit` button was pressed, open the prompt file in editor\n\t\tif (button === EDIT_BUTTON) {\n\t\t\tawait this._openerService.open(value);\n\t\t\treturn false;\n\t\t}\n\n\t\t// `copy` button was pressed, make a copy of the prompt file, open the copy in editor\n\t\tif (button === RENAME_BUTTON || button === COPY_BUTTON) {\n\t\t\treturn await this.keepQuickPickOpen(quickPick, async () => {\n\t\t\t\tconst currentFolder = dirname(value);\n\t\t\t\tconst isMove = button === RENAME_BUTTON && quickPick.keyMods.ctrlCmd;\n\t\t\t\tconst newFolder = await this._instaService.invokeFunction(askForPromptSourceFolder, options.type, currentFolder, isMove);\n\t\t\t\tif (!newFolder) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst newName = await this._instaService.invokeFunction(askForPromptFileName, options.type, newFolder.uri, item.label);\n\t\t\t\tif (!newName) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst newFile = joinPath(newFolder.uri, newName);\n\t\t\t\tif (isMove) {\n\t\t\t\t\tawait this._fileService.move(value, newFile);\n\t\t\t\t} else {\n\t\t\t\t\tawait this._fileService.copy(value, newFile);\n\t\t\t\t}\n\n\t\t\t\tawait this._openerService.open(newFile);\n\t\t\t\tawait this._instaService.createInstance(PromptFileRewriter).openAndRewriteName(newFile, getCleanPromptName(newFile), CancellationToken.None);\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\n\t\t// `delete` button was pressed, delete the prompt file\n\t\tif (button === DELETE_BUTTON) {\n\t\t\t// don't close the main prompt selection dialog by the confirmation dialog\n\t\t\treturn await this.keepQuickPickOpen(quickPick, async () => {\n\n\t\t\t\tconst filename = getCleanPromptName(value);\n\t\t\t\tconst message = localize('commands.prompts.use.select-dialog.delete-prompt.confirm.message', \"Are you sure you want to delete '{0}'?\", filename);\n\t\t\t\tconst { confirmed } = await this._dialogService.confirm({ message });\n\t\t\t\t// if prompt deletion was not confirmed, nothing to do\n\t\t\t\tif (!confirmed) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// prompt deletion was confirmed so delete the prompt file\n\t\t\t\tawait this._fileService.del(value);\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t}\n\n\t\tif (button === MAKE_VISIBLE_BUTTON || button === MAKE_INVISIBLE_BUTTON) {\n\t\t\tconst disabled = this._promptsService.getDisabledPromptFiles(options.type);\n\t\t\tif (button === MAKE_VISIBLE_BUTTON) {\n\t\t\t\tdisabled.delete(value);\n\t\t\t} else {\n\t\t\t\tdisabled.add(value);\n\t\t\t}\n\t\t\tthis._promptsService.setDisabledPromptFiles(options.type, disabled);\n\t\t\treturn true;\n\t\t}\n\n\t\tthrow new Error(`Unknown button '${JSON.stringify(button)}'.`);\n\t}\n\n\t// --- Enablement Configuration -------------------------------------------------------\n\n\t/**\n\t * Shows a multi-select (checkbox) quick pick to configure which prompt files of the given\n\t * type are enabled. Currently only used for agent prompt files.\n\t */\n\tasync managePromptFiles(type: PromptsType, placeholder: string): Promise<boolean> {\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst quickPick: IPromptQuickPick = this._quickInputService.createQuickPick<IPromptPickerQuickPickItem>({ useSeparators: true });\n\t\tquickPick.placeholder = placeholder;\n\t\tquickPick.canSelectMany = true;\n\t\tquickPick.matchOnDescription = true;\n\t\tquickPick.sortByLabel = false;\n\t\tquickPick.busy = true;\n\n\t\tconst options: ISelectOptions = {\n\t\t\tplaceholder: '',\n\t\t\ttype,\n\t\t\toptionNew: true,\n\t\t\toptionEdit: true,\n\t\t\toptionDelete: true,\n\t\t\toptionRename: true,\n\t\t\toptionCopy: true,\n\t\t\toptionVisibility: false\n\t\t};\n\n\t\ttry {\n\t\t\tconst disabled = this._promptsService.getDisabledPromptFiles(type);\n\t\t\tconst items = await this._createPromptPickItems(options, cts.token);\n\t\t\tquickPick.items = items;\n\t\t\tquickPick.selectedItems = items.filter(i => isPromptFileItem(i)).filter(i => !disabled.has(i.promptFileUri));\n\t\t} finally {\n\t\t\tquickPick.busy = false;\n\t\t}\n\n\t\treturn new Promise<boolean>(resolve => {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tdisposables.add(quickPick);\n\t\t\tdisposables.add(cts);\n\n\t\t\tlet isClosed = false;\n\t\t\tlet isResolved = false;\n\n\t\t\tconst getDisabled = () => {\n\t\t\t\tconst selected = quickPick.selectedItems;\n\t\t\t\treturn new ResourceSet(quickPick.items.filter(i => isPromptFileItem(i)).filter(i => !selected.includes(i)).map(i => i.promptFileUri));\n\t\t\t};\n\n\t\t\tconst refreshItems = async () => {\n\t\t\t\tconst active = quickPick.activeItems;\n\t\t\t\tconst disabled = getDisabled();\n\t\t\t\tconst newItems = await this._createPromptPickItems(options, CancellationToken.None);\n\t\t\t\tquickPick.items = newItems;\n\t\t\t\tquickPick.selectedItems = newItems.filter(i => isPromptFileItem(i)).filter(i => !disabled.has(i.promptFileUri));\n\t\t\t\tquickPick.activeItems = active;\n\t\t\t};\n\n\t\t\tdisposables.add(quickPick.onDidAccept(async () => {\n\t\t\t\tconst clickedItem = quickPick.activeItems;\n\t\t\t\tif (clickedItem.length === 1 && clickedItem[0].commandId) {\n\t\t\t\t\tconst commandId = clickedItem[0].commandId;\n\t\t\t\t\tawait this.keepQuickPickOpen(quickPick, async () => {\n\t\t\t\t\t\tawait this._commandService.executeCommand(commandId);\n\t\t\t\t\t});\n\t\t\t\t\tif (!isClosed) {\n\t\t\t\t\t\tawait refreshItems();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._promptsService.setDisabledPromptFiles(type, getDisabled());\n\t\t\t\tisResolved = true;\n\t\t\t\tresolve(true);\n\t\t\t\tquickPick.hide();\n\t\t\t}));\n\n\t\t\tdisposables.add(quickPick.onDidTriggerItemButton(async e => {\n\t\t\t\tconst shouldRefresh = await this._handleButtonClick(quickPick, e, options);\n\t\t\t\tif (!isClosed && shouldRefresh) {\n\t\t\t\t\tawait refreshItems();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tdisposables.add(quickPick.onDidHide(() => {\n\t\t\t\tif (!quickPick.ignoreFocusOut) {\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\tisClosed = true;\n\t\t\t\t\tif (!isResolved) {\n\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t\tisResolved = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tquickPick.show();\n\t\t});\n\t}\n\n}\n"]}