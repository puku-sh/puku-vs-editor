{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/chatCollapsibleContentPart.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,CAAC,EAAE,MAAM,oCAAoC,CAAC;AACvD,OAAO,EAAE,cAAc,EAAE,MAAM,iDAAiD,CAAC;AACjF,OAAO,EAAE,OAAO,EAAE,MAAM,wCAAwC,CAAC;AACjE,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAE9D,OAAO,EAAE,UAAU,EAAe,MAAM,yCAAyC,CAAC;AAClF,OAAO,EAAE,OAAO,EAAe,eAAe,EAAE,MAAM,0CAA0C,CAAC;AACjG,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AAMjD,MAAM,OAAgB,0BAA2B,SAAQ,UAAU;IAWlE,YACS,KAA+B,EACpB,OAAsC;QAEzD,KAAK,EAAE,CAAC;QAHA,UAAK,GAAL,KAAK,CAA0B;QACpB,YAAO,GAAP,OAAO,CAA+B;QATvC,uBAAkB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QAC5D,sBAAiB,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;QAGxD,gBAAW,GAAG,eAAe,CAAU,IAAI,EAAE,KAAK,CAAC,CAAC;QAQ7D,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;IACxF,CAAC;IAED,IAAI,OAAO;QACV,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;QAC9B,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAES,IAAI;QACb,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC;QAGnC,MAAM,aAAa,GAAG,CAAC,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;QAE/D,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,cAAc,CAAC,aAAa,EAAE;YACvE,gBAAgB,EAAE,SAAS;YAC3B,YAAY,EAAE,SAAS;YACvB,gBAAgB,EAAE,SAAS;YAC3B,qBAAqB,EAAE,SAAS;YAChC,yBAAyB,EAAE,SAAS;YACpC,yBAAyB,EAAE,SAAS;YACpC,8BAA8B,EAAE,SAAS;YACzC,eAAe,EAAE,SAAS;SAC1B,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;QACtC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,oBAAoB,EAAE,SAAS,EAAE,aAAa,CAAC,CAAC;QAClE,cAAc,CAAC,KAAK,GAAG,eAAe,CAAC;QAEvC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,UAAU,CAAC,GAAG,EAAE;YAC7C,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;YACrC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACvC,cAAc,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC;YACzE,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,MAAM,CAAC,6BAA6B,EAAE,CAAC,KAAK,CAAC,CAAC;YACvE,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,eAAe,KAAK,QAAQ,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;YAE/I,IAAI,IAAI,CAAC,QAAQ,EAAE,WAAW,EAAE,CAAC;gBAChC,cAAc,CAAC,GAAG,EAAE;oBACnB,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC;gBAChC,CAAC,CAAC,CAAC;YACJ,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QACnC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAMO,eAAe,CAAC,OAAoB,EAAE,KAAa,EAAE,QAAkB;QAC9E,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAwB,EAAE,IAAe,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAyB,EAAE,IAAgB,EAAE,KAAK,CAAC,CAAC;IAC1J,CAAC;IAED,aAAa,CAAC,UAAuB;QACpC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAC5B,CAAC;IAED,IAAI,QAAQ;QACX,OAAO,IAAI,CAAC,WAAW,CAAC;IACzB,CAAC;IAES,UAAU;QACnB,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;IAC/B,CAAC;IAES,WAAW,CAAC,KAAc;QACnC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;IACxC,CAAC;IAES,QAAQ,CAAC,KAAa;QAC/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,IAAI,CAAC,eAAe,EAAE,CAAC;YAC1B,IAAI,CAAC,eAAe,CAAC,KAAK,GAAG,KAAK,CAAC;YACnC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;QAC9E,CAAC;IACF,CAAC;CACD","file":"chatCollapsibleContentPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $ } from '../../../../../base/browser/dom.js';\nimport { ButtonWithIcon } from '../../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, IObservable, observableValue } from '../../../../../base/common/observable.js';\nimport { localize } from '../../../../../nls.js';\nimport { IChatRendererContent } from '../../common/chatViewModel.js';\nimport { ChatTreeItem } from '../chat.js';\nimport { IChatContentPart, IChatContentPartRenderContext } from './chatContentParts.js';\n\n\nexport abstract class ChatCollapsibleContentPart extends Disposable implements IChatContentPart {\n\n\tprivate _domNode?: HTMLElement;\n\n\tprotected readonly _onDidChangeHeight = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tprotected readonly hasFollowingContent: boolean;\n\tprotected _isExpanded = observableValue<boolean>(this, false);\n\tprotected _collapseButton: ButtonWithIcon | undefined;\n\n\tconstructor(\n\t\tprivate title: IMarkdownString | string,\n\t\tprotected readonly context: IChatContentPartRenderContext,\n\t) {\n\t\tsuper();\n\t\tthis.hasFollowingContent = this.context.contentIndex + 1 < this.context.content.length;\n\t}\n\n\tget domNode(): HTMLElement {\n\t\tthis._domNode ??= this.init();\n\t\treturn this._domNode;\n\t}\n\n\tprotected init(): HTMLElement {\n\t\tconst referencesLabel = this.title;\n\n\n\t\tconst buttonElement = $('.chat-used-context-label', undefined);\n\n\t\tconst collapseButton = this._register(new ButtonWithIcon(buttonElement, {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined,\n\t\t\tbuttonSecondaryBackground: undefined,\n\t\t\tbuttonSecondaryForeground: undefined,\n\t\t\tbuttonSecondaryHoverBackground: undefined,\n\t\t\tbuttonSeparator: undefined\n\t\t}));\n\t\tthis._collapseButton = collapseButton;\n\t\tthis._domNode = $('.chat-used-context', undefined, buttonElement);\n\t\tcollapseButton.label = referencesLabel;\n\n\t\tthis._register(collapseButton.onDidClick(() => {\n\t\t\tconst value = this._isExpanded.get();\n\t\t\tthis._isExpanded.set(!value, undefined);\n\t\t}));\n\n\t\tthis._register(autorun(r => {\n\t\t\tconst value = this._isExpanded.read(r);\n\t\t\tcollapseButton.icon = value ? Codicon.chevronDown : Codicon.chevronRight;\n\t\t\tthis._domNode?.classList.toggle('chat-used-context-collapsed', !value);\n\t\t\tthis.updateAriaLabel(collapseButton.element, typeof referencesLabel === 'string' ? referencesLabel : referencesLabel.value, this.isExpanded());\n\n\t\t\tif (this._domNode?.isConnected) {\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tconst content = this.initContent();\n\t\tthis._domNode.appendChild(content);\n\t\treturn this._domNode;\n\t}\n\n\tprotected abstract initContent(): HTMLElement;\n\n\tabstract hasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean;\n\n\tprivate updateAriaLabel(element: HTMLElement, label: string, expanded?: boolean): void {\n\t\telement.ariaLabel = expanded ? localize('usedReferencesExpanded', \"{0}, expanded\", label) : localize('usedReferencesCollapsed', \"{0}, collapsed\", label);\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n\n\tget expanded(): IObservable<boolean> {\n\t\treturn this._isExpanded;\n\t}\n\n\tprotected isExpanded(): boolean {\n\t\treturn this._isExpanded.get();\n\t}\n\n\tprotected setExpanded(value: boolean): void {\n\t\tthis._isExpanded.set(value, undefined);\n\t}\n\n\tprotected setTitle(title: string): void {\n\t\tthis.title = title;\n\t\tif (this._collapseButton) {\n\t\t\tthis._collapseButton.label = title;\n\t\t\tthis.updateAriaLabel(this._collapseButton.element, title, this.isExpanded());\n\t\t}\n\t}\n}\n"]}