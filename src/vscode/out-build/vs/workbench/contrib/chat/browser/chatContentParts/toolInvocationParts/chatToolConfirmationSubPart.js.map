{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/toolInvocationParts/chatToolConfirmationSubPart.ts"],"names":[],"mappings":"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","file":"chatToolConfirmationSubPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../../base/browser/dom.js';\nimport { Separator } from '../../../../../../base/common/actions.js';\nimport { RunOnceScheduler } from '../../../../../../base/common/async.js';\nimport { IMarkdownString, MarkdownString } from '../../../../../../base/common/htmlContent.js';\nimport { toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { count } from '../../../../../../base/common/strings.js';\nimport { isEmptyObject } from '../../../../../../base/common/types.js';\nimport { generateUuid } from '../../../../../../base/common/uuid.js';\nimport { ElementSizeObserver } from '../../../../../../editor/browser/config/elementSizeObserver.js';\nimport { ILanguageService } from '../../../../../../editor/common/languages/language.js';\nimport { IModelService } from '../../../../../../editor/common/services/model.js';\nimport { localize } from '../../../../../../nls.js';\nimport { ICommandService } from '../../../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\nimport { IMarkdownRenderer } from '../../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IMarkerData, IMarkerService, MarkerSeverity } from '../../../../../../platform/markers/common/markers.js';\nimport { IChatToolInvocation, ToolConfirmKind } from '../../../common/chatService.js';\nimport { CodeBlockModelCollection } from '../../../common/codeBlockModelCollection.js';\nimport { createToolInputUri, createToolSchemaUri, ILanguageModelToolsService } from '../../../common/languageModelToolsService.js';\nimport { ILanguageModelToolsConfirmationService } from '../../../common/languageModelToolsConfirmationService.js';\nimport { AcceptToolConfirmationActionId, SkipToolConfirmationActionId } from '../../actions/chatToolActions.js';\nimport { IChatCodeBlockInfo, IChatWidgetService } from '../../chat.js';\nimport { renderFileWidgets } from '../../chatInlineAnchorWidget.js';\nimport { ICodeBlockRenderOptions } from '../../codeBlockPart.js';\nimport { IChatContentPartRenderContext } from '../chatContentParts.js';\nimport { IChatMarkdownAnchorService } from '../chatMarkdownAnchorService.js';\nimport { ChatMarkdownContentPart } from '../chatMarkdownContentPart.js';\nimport { AbstractToolConfirmationSubPart } from './abstractToolConfirmationSubPart.js';\nimport { EditorPool } from '../chatContentCodePools.js';\n\nconst SHOW_MORE_MESSAGE_HEIGHT_TRIGGER = 45;\n\nexport class ToolConfirmationSubPart extends AbstractToolConfirmationSubPart {\n\tprivate markdownParts: ChatMarkdownContentPart[] = [];\n\tpublic get codeblocks(): IChatCodeBlockInfo[] {\n\t\treturn this.markdownParts.flatMap(part => part.codeblocks);\n\t}\n\n\tconstructor(\n\t\ttoolInvocation: IChatToolInvocation,\n\t\tcontext: IChatContentPartRenderContext,\n\t\tprivate readonly renderer: IMarkdownRenderer,\n\t\tprivate readonly editorPool: EditorPool,\n\t\tprivate readonly currentWidthDelegate: () => number,\n\t\tprivate readonly codeBlockModelCollection: CodeBlockModelCollection,\n\t\tprivate readonly codeBlockStartIndex: number,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@ILanguageService private readonly languageService: ILanguageService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IChatWidgetService chatWidgetService: IChatWidgetService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IMarkerService private readonly markerService: IMarkerService,\n\t\t@ILanguageModelToolsService languageModelToolsService: ILanguageModelToolsService,\n\t\t@IChatMarkdownAnchorService private readonly chatMarkdownAnchorService: IChatMarkdownAnchorService,\n\t\t@ILanguageModelToolsConfirmationService private readonly confirmationService: ILanguageModelToolsConfirmationService,\n\t) {\n\t\tif (!toolInvocation.confirmationMessages?.title) {\n\t\t\tthrow new Error('Confirmation messages are missing');\n\t\t}\n\n\t\tsuper(toolInvocation, context, instantiationService, keybindingService, contextKeyService, chatWidgetService, languageModelToolsService);\n\n\t\tthis.render({\n\t\t\tallowActionId: AcceptToolConfirmationActionId,\n\t\t\tskipActionId: SkipToolConfirmationActionId,\n\t\t\tallowLabel: toolInvocation.confirmationMessages.confirmResults ? localize('allowReview', \"Allow and Review\") : localize('allow', \"Allow\"),\n\t\t\tskipLabel: localize('skip.detail', 'Proceed without running this tool'),\n\t\t\tpartType: 'chatToolConfirmation',\n\t\t\tsubtitle: typeof toolInvocation.originMessage === 'string' ? toolInvocation.originMessage : toolInvocation.originMessage?.value,\n\t\t});\n\n\t\t// Tag for sub-agent styling\n\t\tif (toolInvocation.fromSubAgent) {\n\t\t\tcontext.container.classList.add('from-sub-agent');\n\t\t}\n\t}\n\n\tprotected override additionalPrimaryActions() {\n\t\tconst actions = super.additionalPrimaryActions();\n\t\tif (this.toolInvocation.confirmationMessages?.allowAutoConfirm !== false) {\n\t\t\t// Get actions from confirmation service\n\t\t\tconst confirmActions = this.confirmationService.getPreConfirmActions({\n\t\t\t\ttoolId: this.toolInvocation.toolId,\n\t\t\t\tsource: this.toolInvocation.source,\n\t\t\t\tparameters: this.toolInvocation.parameters\n\t\t\t});\n\n\t\t\tfor (const action of confirmActions) {\n\t\t\t\tif (action.divider) {\n\t\t\t\t\tactions.push(new Separator());\n\t\t\t\t}\n\t\t\t\tactions.push({\n\t\t\t\t\tlabel: action.label,\n\t\t\t\t\ttooltip: action.detail,\n\t\t\t\t\tdata: async () => {\n\t\t\t\t\t\tconst shouldConfirm = await action.select();\n\t\t\t\t\t\tif (shouldConfirm) {\n\t\t\t\t\t\t\tthis.confirmWith(this.toolInvocation, { type: ToolConfirmKind.UserAction });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tif (this.toolInvocation.confirmationMessages?.confirmResults) {\n\t\t\tactions.unshift(\n\t\t\t\t{\n\t\t\t\t\tlabel: localize('allowSkip', 'Allow and Skip Reviewing Result'),\n\t\t\t\t\tdata: () => {\n\t\t\t\t\t\tthis.toolInvocation.confirmationMessages!.confirmResults = undefined;\n\t\t\t\t\t\tthis.confirmWith(this.toolInvocation, { type: ToolConfirmKind.UserAction });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnew Separator(),\n\t\t\t);\n\t\t}\n\n\t\treturn actions;\n\t}\n\n\tprotected createContentElement(): HTMLElement | string {\n\t\tconst { message, disclaimer } = this.toolInvocation.confirmationMessages!;\n\t\tconst toolInvocation = this.toolInvocation as IChatToolInvocation;\n\n\t\tif (typeof message === 'string' && !disclaimer) {\n\t\t\treturn message;\n\t\t} else {\n\t\t\tconst codeBlockRenderOptions: ICodeBlockRenderOptions = {\n\t\t\t\thideToolbar: true,\n\t\t\t\treserveWidth: 19,\n\t\t\t\tverticalPadding: 5,\n\t\t\t\teditorOptions: {\n\t\t\t\t\ttabFocusMode: true,\n\t\t\t\t\tariaLabel: this.getTitle(),\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst elements = dom.h('div', [\n\t\t\t\tdom.h('.message@messageContainer', [\n\t\t\t\t\tdom.h('.message-wrapper@message'),\n\t\t\t\t\tdom.h('.see-more@showMore', [\n\t\t\t\t\t\tdom.h('a', [localize('showMore', \"Show More\")])\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t\tdom.h('.editor@editor'),\n\t\t\t\tdom.h('.disclaimer@disclaimer'),\n\t\t\t]);\n\n\t\t\tif (toolInvocation.toolSpecificData?.kind === 'input' && toolInvocation.toolSpecificData.rawInput && !isEmptyObject(toolInvocation.toolSpecificData.rawInput)) {\n\n\t\t\t\tconst titleEl = document.createElement('h3');\n\t\t\t\ttitleEl.textContent = localize('chat.input', \"Input\");\n\t\t\t\telements.editor.appendChild(titleEl);\n\n\t\t\t\tconst inputData = toolInvocation.toolSpecificData;\n\n\t\t\t\tconst codeBlockRenderOptions: ICodeBlockRenderOptions = {\n\t\t\t\t\thideToolbar: true,\n\t\t\t\t\treserveWidth: 19,\n\t\t\t\t\tmaxHeightInLines: 13,\n\t\t\t\t\tverticalPadding: 5,\n\t\t\t\t\teditorOptions: {\n\t\t\t\t\t\twordWrap: 'off',\n\t\t\t\t\t\treadOnly: false,\n\t\t\t\t\t\tariaLabel: this.getTitle(),\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst langId = this.languageService.getLanguageIdByLanguageName('json');\n\t\t\t\tconst rawJsonInput = JSON.stringify(inputData.rawInput ?? {}, null, 1);\n\t\t\t\tconst canSeeMore = count(rawJsonInput, '\\n') > 2; // if more than one key:value\n\t\t\t\tconst model = this._register(this.modelService.createModel(\n\t\t\t\t\t// View a single JSON line by default until they 'see more'\n\t\t\t\t\trawJsonInput.replace(/\\n */g, ' '),\n\t\t\t\t\tthis.languageService.createById(langId),\n\t\t\t\t\tcreateToolInputUri(toolInvocation.toolCallId),\n\t\t\t\t\ttrue\n\t\t\t\t));\n\n\t\t\t\tconst markerOwner = generateUuid();\n\t\t\t\tconst schemaUri = createToolSchemaUri(toolInvocation.toolId);\n\t\t\t\tconst validator = new RunOnceScheduler(async () => {\n\n\t\t\t\t\tconst newMarker: IMarkerData[] = [];\n\n\t\t\t\t\ttype JsonDiagnostic = {\n\t\t\t\t\t\tmessage: string;\n\t\t\t\t\t\trange: { line: number; character: number }[];\n\t\t\t\t\t\tseverity: string;\n\t\t\t\t\t\tcode?: string | number;\n\t\t\t\t\t};\n\n\t\t\t\t\tconst result = await this.commandService.executeCommand<JsonDiagnostic[]>('json.validate', schemaUri, model.getValue());\n\t\t\t\t\tfor (const item of result ?? []) {\n\t\t\t\t\t\tif (item.range && item.message) {\n\t\t\t\t\t\t\tnewMarker.push({\n\t\t\t\t\t\t\t\tseverity: item.severity === 'Error' ? MarkerSeverity.Error : MarkerSeverity.Warning,\n\t\t\t\t\t\t\t\tmessage: item.message,\n\t\t\t\t\t\t\t\tstartLineNumber: item.range[0].line + 1,\n\t\t\t\t\t\t\t\tstartColumn: item.range[0].character + 1,\n\t\t\t\t\t\t\t\tendLineNumber: item.range[1].line + 1,\n\t\t\t\t\t\t\t\tendColumn: item.range[1].character + 1,\n\t\t\t\t\t\t\t\tcode: item.code ? String(item.code) : undefined\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.markerService.changeOne(markerOwner, model.uri, newMarker);\n\t\t\t\t}, 500);\n\n\t\t\t\tvalidator.schedule();\n\t\t\t\tthis._register(model.onDidChangeContent(() => validator.schedule()));\n\t\t\t\tthis._register(toDisposable(() => this.markerService.remove(markerOwner, [model.uri])));\n\t\t\t\tthis._register(validator);\n\n\t\t\t\tconst editor = this._register(this.editorPool.get());\n\t\t\t\teditor.object.render({\n\t\t\t\t\tcodeBlockIndex: this.codeBlockStartIndex,\n\t\t\t\t\tcodeBlockPartIndex: 0,\n\t\t\t\t\telement: this.context.element,\n\t\t\t\t\tlanguageId: langId ?? 'json',\n\t\t\t\t\trenderOptions: codeBlockRenderOptions,\n\t\t\t\t\ttextModel: Promise.resolve(model),\n\t\t\t\t\tchatSessionResource: this.context.element.sessionResource\n\t\t\t\t}, this.currentWidthDelegate());\n\t\t\t\tthis.codeblocks.push({\n\t\t\t\t\tcodeBlockIndex: this.codeBlockStartIndex,\n\t\t\t\t\tcodemapperUri: undefined,\n\t\t\t\t\telementId: this.context.element.id,\n\t\t\t\t\tfocus: () => editor.object.focus(),\n\t\t\t\t\townerMarkdownPartId: this.codeblocksPartId,\n\t\t\t\t\turi: model.uri,\n\t\t\t\t\turiPromise: Promise.resolve(model.uri),\n\t\t\t\t\tchatSessionResource: this.context.element.sessionResource\n\t\t\t\t});\n\t\t\t\tthis._register(editor.object.onDidChangeContentHeight(() => {\n\t\t\t\t\teditor.object.layout(this.currentWidthDelegate());\n\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t}));\n\t\t\t\tthis._register(model.onDidChangeContent(e => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tinputData.rawInput = JSON.parse(model.getValue());\n\t\t\t\t\t} catch {\n\t\t\t\t\t\t// ignore\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\telements.editor.append(editor.object.element);\n\n\t\t\t\tif (canSeeMore) {\n\t\t\t\t\tconst seeMore = dom.h('div.see-more', [dom.h('a@link')]);\n\t\t\t\t\tseeMore.link.textContent = localize('seeMore', \"See more\");\n\t\t\t\t\tthis._register(dom.addDisposableGenericMouseDownListener(seeMore.link, () => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst parsed = JSON.parse(model.getValue());\n\t\t\t\t\t\t\tmodel.setValue(JSON.stringify(parsed, null, 2));\n\t\t\t\t\t\t\teditor.object.editor.updateOptions({ tabFocusMode: false });\n\t\t\t\t\t\t\teditor.object.editor.updateOptions({ wordWrap: 'on' });\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t// ignored\n\t\t\t\t\t\t}\n\t\t\t\t\t\tseeMore.root.remove();\n\t\t\t\t\t}));\n\t\t\t\t\telements.editor.append(seeMore.root);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst mdPart = this._makeMarkdownPart(elements.message, message!, codeBlockRenderOptions);\n\n\t\t\tconst messageSeeMoreObserver = this._register(new ElementSizeObserver(mdPart.domNode, undefined));\n\t\t\tconst updateSeeMoreDisplayed = () => {\n\t\t\t\tconst show = messageSeeMoreObserver.getHeight() > SHOW_MORE_MESSAGE_HEIGHT_TRIGGER;\n\t\t\t\tif (elements.messageContainer.classList.contains('can-see-more') !== show) {\n\t\t\t\t\telements.messageContainer.classList.toggle('can-see-more', show);\n\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis._register(dom.addDisposableListener(elements.showMore, 'click', () => {\n\t\t\t\telements.messageContainer.classList.toggle('can-see-more', false);\n\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\tmessageSeeMoreObserver.dispose();\n\t\t\t}));\n\n\n\t\t\tthis._register(messageSeeMoreObserver.onDidChange(updateSeeMoreDisplayed));\n\t\t\tmessageSeeMoreObserver.startObserving();\n\n\t\t\tif (disclaimer) {\n\t\t\t\tthis._makeMarkdownPart(elements.disclaimer, disclaimer, codeBlockRenderOptions);\n\t\t\t} else {\n\t\t\t\telements.disclaimer.remove();\n\t\t\t}\n\n\t\t\treturn elements.root;\n\t\t}\n\t}\n\n\tprotected getTitle(): string {\n\t\tconst { title } = this.toolInvocation.confirmationMessages!;\n\t\treturn typeof title === 'string' ? title : title!.value;\n\t}\n\n\tprivate _makeMarkdownPart(container: HTMLElement, message: string | IMarkdownString, codeBlockRenderOptions: ICodeBlockRenderOptions) {\n\t\tconst part = this._register(this.instantiationService.createInstance(ChatMarkdownContentPart,\n\t\t\t{\n\t\t\t\tkind: 'markdownContent',\n\t\t\t\tcontent: typeof message === 'string' ? new MarkdownString().appendMarkdown(message) : message\n\t\t\t},\n\t\t\tthis.context,\n\t\t\tthis.editorPool,\n\t\t\tfalse,\n\t\t\tthis.codeBlockStartIndex,\n\t\t\tthis.renderer,\n\t\t\tundefined,\n\t\t\tthis.currentWidthDelegate(),\n\t\t\tthis.codeBlockModelCollection,\n\t\t\t{ codeBlockRenderOptions },\n\t\t));\n\t\trenderFileWidgets(part.domNode, this.instantiationService, this.chatMarkdownAnchorService, this._store);\n\t\tcontainer.append(part.domNode);\n\n\t\tthis._register(part.onDidChangeHeight(() => this._onDidChangeHeight.fire()));\n\n\t\treturn part;\n\t}\n}\n"]}