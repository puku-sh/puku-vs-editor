{"version":3,"sources":["vs/workbench/contrib/chat/browser/actions/chatNewActions.ts"],"names":[],"mappings":"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","file":"chatNewActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ActiveEditorContext } from '../../../../common/contextkeys.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IChatEditingSession } from '../../common/chatEditingService.js';\nimport { ChatAgentLocation, ChatModeKind } from '../../common/constants.js';\nimport { ChatViewId, IChatWidgetService } from '../chat.js';\nimport { EditingSessionAction, getEditingSessionContext } from '../chatEditing/chatEditingActions.js';\nimport { ChatEditorInput } from '../chatEditorInput.js';\nimport { ACTION_ID_NEW_CHAT, ACTION_ID_NEW_EDIT_SESSION, CHAT_CATEGORY, handleCurrentEditingSession } from './chatActions.js';\nimport { clearChatEditor } from './chatClear.js';\n\nexport interface INewEditSessionActionContext {\n\n\t/**\n\t * An initial prompt to write to the chat.\n\t */\n\tinputValue?: string;\n\n\t/**\n\t * Selects opening in agent mode or not. If not set, the current mode is used.\n\t * This is ignored when coming from a chat view title context.\n\t */\n\tagentMode?: boolean;\n\n\t/**\n\t * Whether the inputValue is partial and should wait for further user input.\n\t * If false or not set, the prompt is sent immediately.\n\t */\n\tisPartialQuery?: boolean;\n}\n\nexport function registerNewChatActions() {\n\n\t// Add \"New Chat\" submenu to Chat view menu\n\tMenuRegistry.appendMenuItem(MenuId.ViewTitle, {\n\t\tsubmenu: MenuId.ChatNewMenu,\n\t\ttitle: localize2('chat.newEdits.label', \"New Chat\"),\n\t\ticon: Codicon.plus,\n\t\twhen: ContextKeyExpr.equals('view', ChatViewId),\n\t\tgroup: 'navigation',\n\t\torder: -1,\n\t\tisSplitButton: true\n\t});\n\n\tregisterAction2(class NewChatEditorAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chatEditor.newChat',\n\t\t\t\ttitle: localize2('chat.newChat.label', \"New Chat\"),\n\t\t\t\ticon: Codicon.plus,\n\t\t\t\tf1: false,\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t});\n\t\t}\n\t\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tconst accessibilitySignalService = accessor.get(IAccessibilitySignalService);\n\n\t\t\taccessibilitySignalService.playSignal(AccessibilitySignal.clear);\n\n\t\t\tawait clearChatEditor(accessor);\n\t\t}\n\t});\n\n\tregisterAction2(class NewChatAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: ACTION_ID_NEW_CHAT,\n\t\t\t\ttitle: localize2('chat.newEdits.label', \"New Chat\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.plus,\n\t\t\t\tprecondition: ContextKeyExpr.and(ChatContextKeys.enabled, ChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat)),\n\t\t\t\tf1: true,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.ChatContext,\n\t\t\t\t\t\tgroup: 'z_clear'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.ChatNewMenu,\n\t\t\t\t\t\tgroup: '1_open',\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.CompactWindowEditorTitle,\n\t\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t\twhen: ContextKeyExpr.and(ActiveEditorContext.isEqualTo(ChatEditorInput.EditorID), ChatContextKeys.lockedToCodingAgent.negate()),\n\t\t\t\t\t\torder: 1\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyN,\n\t\t\t\t\tsecondary: [KeyMod.CtrlCmd | KeyCode.KeyL],\n\t\t\t\t\tmac: {\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyN,\n\t\t\t\t\t\tsecondary: [KeyMod.WinCtrl | KeyCode.KeyL]\n\t\t\t\t\t},\n\t\t\t\t\twhen: ChatContextKeys.inChatSession\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tconst executeCommandContext = args[0] as INewEditSessionActionContext | undefined;\n\n\t\t\t// Context from toolbar or lastFocusedWidget\n\t\t\tconst context = getEditingSessionContext(accessor, args);\n\t\t\tconst { editingSession, chatWidget: widget } = context ?? {};\n\t\t\tif (!widget) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst accessibilitySignalService = accessor.get(IAccessibilitySignalService);\n\t\t\tconst dialogService = accessor.get(IDialogService);\n\n\t\t\tif (editingSession && !(await handleCurrentEditingSession(editingSession, undefined, dialogService))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccessibilitySignalService.playSignal(AccessibilitySignal.clear);\n\n\t\t\tawait editingSession?.stop();\n\t\t\tawait widget.clear();\n\t\t\twidget.attachmentModel.clear(true);\n\t\t\twidget.input.relatedFiles?.clear();\n\t\t\twidget.focusInput();\n\n\t\t\tif (!executeCommandContext) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof executeCommandContext.agentMode === 'boolean') {\n\t\t\t\twidget.input.setChatMode(executeCommandContext.agentMode ? ChatModeKind.Agent : ChatModeKind.Edit);\n\t\t\t}\n\n\t\t\tif (executeCommandContext.inputValue) {\n\t\t\t\tif (executeCommandContext.isPartialQuery) {\n\t\t\t\t\twidget.setInput(executeCommandContext.inputValue);\n\t\t\t\t} else {\n\t\t\t\t\twidget.acceptInput(executeCommandContext.inputValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tCommandsRegistry.registerCommandAlias(ACTION_ID_NEW_EDIT_SESSION, ACTION_ID_NEW_CHAT);\n\n\tregisterAction2(class UndoChatEditInteractionAction extends EditingSessionAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.undoEdit',\n\t\t\t\ttitle: localize2('chat.undoEdit.label', \"Undo Last Request\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.discard,\n\t\t\t\tprecondition: ContextKeyExpr.and(ChatContextKeys.chatEditingCanUndo, ChatContextKeys.enabled),\n\t\t\t\tf1: true,\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\twhen: ContextKeyExpr.equals('view', ChatViewId),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: -3,\n\t\t\t\t\tisHiddenByDefault: true\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\tasync runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession) {\n\t\t\tawait editingSession.undoInteraction();\n\t\t}\n\t});\n\n\tregisterAction2(class RedoChatEditInteractionAction extends EditingSessionAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.redoEdit',\n\t\t\t\ttitle: localize2('chat.redoEdit.label', \"Redo Last Request\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.redo,\n\t\t\t\tprecondition: ContextKeyExpr.and(ChatContextKeys.chatEditingCanRedo, ChatContextKeys.enabled),\n\t\t\t\tf1: true,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\t\twhen: ContextKeyExpr.equals('view', ChatViewId),\n\t\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\t\torder: -2,\n\t\t\t\t\t\tisHiddenByDefault: true\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\n\t\tasync runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession) {\n\t\t\tconst widget = accessor.get(IChatWidgetService);\n\t\t\tawait editingSession.redoInteraction();\n\t\t\twidget.lastFocusedWidget?.viewModel?.model.setCheckpoint(undefined);\n\t\t}\n\t});\n\n\tregisterAction2(class RedoChatCheckpoints extends EditingSessionAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.redoEdit2',\n\t\t\t\ttitle: localize2('chat.redoEdit.label2', \"Redo\"),\n\t\t\t\ttooltip: localize2('chat.redoEdit.tooltip', \"Reapply discarded workspace changes and chat\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tprecondition: ContextKeyExpr.and(ChatContextKeys.chatEditingCanRedo, ChatContextKeys.enabled),\n\t\t\t\tf1: true,\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ChatMessageRestoreCheckpoint,\n\t\t\t\t\twhen: ChatContextKeys.lockedToCodingAgent.negate(),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: -1\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\tasync runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession) {\n\t\t\tconst widget = accessor.get(IChatWidgetService);\n\n\t\t\twhile (editingSession.canRedo.get()) {\n\t\t\t\tawait editingSession.redoInteraction();\n\t\t\t}\n\n\t\t\tconst currentWidget = widget.lastFocusedWidget;\n\t\t\tconst requestText = currentWidget?.viewModel?.model.checkpoint?.message.text;\n\n\t\t\t// if the input has the same text that we just restored, clear it.\n\t\t\tif (currentWidget?.inputEditor.getValue() === requestText) {\n\t\t\t\tcurrentWidget?.input.setValue('', false);\n\t\t\t}\n\n\t\t\tcurrentWidget?.viewModel?.model.setCheckpoint(undefined);\n\t\t\tcurrentWidget?.focusInput();\n\t\t}\n\t});\n}\n"]}