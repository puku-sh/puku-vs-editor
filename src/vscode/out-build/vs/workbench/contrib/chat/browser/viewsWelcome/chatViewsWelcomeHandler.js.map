{"version":3,"sources":["vs/workbench/contrib/chat/browser/viewsWelcome/chatViewsWelcomeHandler.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,cAAc,EAAE,MAAM,2CAA2C,CAAC;AAE3E,OAAO,EAAE,SAAS,EAAE,MAAM,yCAAyC,CAAC;AACpE,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,cAAc,EAAE,MAAM,yDAAyD,CAAC;AACzF,OAAO,EAAE,WAAW,EAAE,MAAM,2CAA2C,CAAC;AACxE,OAAO,EAAE,QAAQ,EAAE,MAAM,qDAAqD,CAAC;AAE/E,OAAO,EAAE,uBAAuB,EAAE,MAAM,sDAAsD,CAAC;AAC/F,OAAO,KAAK,kBAAkB,MAAM,8DAA8D,CAAC;AAInG,MAAM,0BAA0B,GAAG;IAClC,IAAI,EAAE,QAAQ;IACd,oBAAoB,EAAE,KAAK;IAC3B,QAAQ,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,MAAM,CAAC;IAC/C,UAAU,EAAE;QACX,IAAI,EAAE;YACL,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAuB,EAAE,IAAmC,CAAC;SACnF;QACD,KAAK,EAAE;YACN,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAwB,EAAE,IAAmC,CAAC;SACpF;QACD,OAAO,EAAE;YACR,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAA0B,EAAE,IAA0F,CAAC;SAC7I;QACD,IAAI,EAAE;YACL,IAAI,EAAE,QAAQ;YACd,WAAW,EAAE,QAAQ,CAAC,IAAuB,EAAE,IAA8C,CAAC;SAC9F;KACD;CAC8B,CAAC;AAIjC,MAAM,8BAA8B,GAAG,kBAAkB,CAAC,kBAAkB,CAAC,sBAAsB,CAAqC;IACvI,cAAc,EAAE,kBAAkB;IAClC,UAAU,EAAE;QACX,WAAW,EAAE,QAAQ,CAAC,IAA+C,EAAE,IAA8C,CAAC;QACtH,IAAI,EAAE,OAAO;QACb,KAAK,EAAE,0BAA0B;KACjC;CACD,CAAC,CAAC;AAEI,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;aAEnB,OAAE,GAAG,2CAAH,AAA8C,CAAC;IAEjE,YAC+B,UAAuB;QAAvB,eAAU,GAAV,UAAU,CAAa;QAErD,8BAA8B,CAAC,UAAU,CAAC,CAAC,UAAU,EAAE,KAAK,EAAE,EAAE;YAC/D,KAAK,MAAM,SAAS,IAAI,KAAK,CAAC,KAAK,EAAE,CAAC;gBACrC,KAAK,MAAM,kBAAkB,IAAI,SAAS,CAAC,KAAK,EAAE,CAAC;oBAClD,uBAAuB,CAAC,SAAS,CAAC,WAAW,EAAE,wBAAwB,CAAC,CAAC;oBAEzE,MAAM,IAAI,GAAG,cAAc,CAAC,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;oBACjE,IAAI,CAAC,IAAI,EAAE,CAAC;wBACX,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,0EAA0E,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAAC;wBAC3H,SAAS;oBACV,CAAC;oBAED,MAAM,UAAU,GAAgC;wBAC/C,GAAG,kBAAkB;wBACrB,IAAI;wBACJ,IAAI,EAAE,SAAS,CAAC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC;wBACnD,OAAO,EAAE,IAAI,cAAc,CAAC,kBAAkB,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,iCAAiC;qBAC/G,CAAC;oBACF,QAAQ,CAAC,EAAE,kGAA4F,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBAC9H,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;;AA5BW,uBAAuB;IAKjC,WAAA,WAAW,CAAA;GALD,uBAAuB,CA6BnC","file":"chatViewsWelcomeHandler.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { IJSONSchema, TypeFromJsonSchema } from '../../../../../base/common/jsonSchema.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { localize } from '../../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\nimport { checkProposedApiEnabled } from '../../../../services/extensions/common/extensions.js';\nimport * as extensionsRegistry from '../../../../services/extensions/common/extensionsRegistry.js';\nimport { ChatViewsWelcomeExtensions, IChatViewsWelcomeContributionRegistry, IChatViewsWelcomeDescriptor } from './chatViewsWelcome.js';\n\n\nconst chatViewsWelcomeJsonSchema = {\n\ttype: 'object',\n\tadditionalProperties: false,\n\trequired: ['icon', 'title', 'contents', 'when'],\n\tproperties: {\n\t\ticon: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('chatViewsWelcome.icon', 'The icon for the welcome message.'),\n\t\t},\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('chatViewsWelcome.title', 'The title of the welcome message.'),\n\t\t},\n\t\tcontent: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('chatViewsWelcome.content', 'The content of the welcome message. The first command link will be rendered as a button.'),\n\t\t},\n\t\twhen: {\n\t\t\ttype: 'string',\n\t\t\tdescription: localize('chatViewsWelcome.when', 'Condition when the welcome message is shown.'),\n\t\t}\n\t}\n} as const satisfies IJSONSchema;\n\ntype IRawChatViewsWelcomeContribution = TypeFromJsonSchema<typeof chatViewsWelcomeJsonSchema>;\n\nconst chatViewsWelcomeExtensionPoint = extensionsRegistry.ExtensionsRegistry.registerExtensionPoint<IRawChatViewsWelcomeContribution[]>({\n\textensionPoint: 'chatViewsWelcome',\n\tjsonSchema: {\n\t\tdescription: localize('vscode.extension.contributes.chatViewsWelcome', 'Contributes a welcome message to a chat view'),\n\t\ttype: 'array',\n\t\titems: chatViewsWelcomeJsonSchema,\n\t},\n});\n\nexport class ChatViewsWelcomeHandler implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.chatViewsWelcomeHandler';\n\n\tconstructor(\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tchatViewsWelcomeExtensionPoint.setHandler((extensions, delta) => {\n\t\t\tfor (const extension of delta.added) {\n\t\t\t\tfor (const providerDescriptor of extension.value) {\n\t\t\t\t\tcheckProposedApiEnabled(extension.description, 'chatParticipantPrivate');\n\n\t\t\t\t\tconst when = ContextKeyExpr.deserialize(providerDescriptor.when);\n\t\t\t\t\tif (!when) {\n\t\t\t\t\t\tthis.logService.error(`Could not deserialize 'when' clause for chatViewsWelcome contribution: ${providerDescriptor.when}`);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst descriptor: IChatViewsWelcomeDescriptor = {\n\t\t\t\t\t\t...providerDescriptor,\n\t\t\t\t\t\twhen,\n\t\t\t\t\t\ticon: ThemeIcon.fromString(providerDescriptor.icon),\n\t\t\t\t\t\tcontent: new MarkdownString(providerDescriptor.content, { isTrusted: true }), // private API with command links\n\t\t\t\t\t};\n\t\t\t\t\tRegistry.as<IChatViewsWelcomeContributionRegistry>(ChatViewsWelcomeExtensions.ChatViewsWelcomeRegistry).register(descriptor);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n"]}