{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatContentParts/chatProgressContentPart.ts"],"names":[],"mappings":"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","file":"chatProgressContentPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, append } from '../../../../../base/browser/dom.js';\nimport { alert } from '../../../../../base/browser/ui/aria/aria.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { createMarkdownCommandLink, MarkdownString, type IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, MutableDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { IMarkdownRenderer } from '../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IRenderedMarkdown } from '../../../../../base/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { localize } from '../../../../../nls.js';\nimport { IChatProgressMessage, IChatTask, IChatTaskSerialized, IChatToolInvocation, IChatToolInvocationSerialized, ToolConfirmKind } from '../../common/chatService.js';\nimport { IChatRendererContent, isResponseVM } from '../../common/chatViewModel.js';\nimport { ChatTreeItem } from '../chat.js';\nimport { renderFileWidgets } from '../chatInlineAnchorWidget.js';\nimport { IChatContentPart, IChatContentPartRenderContext } from './chatContentParts.js';\nimport { IChatMarkdownAnchorService } from './chatMarkdownAnchorService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { AccessibilityWorkbenchSettingId } from '../../../accessibility/browser/accessibilityConfiguration.js';\nimport { IHoverService } from '../../../../../platform/hover/browser/hover.js';\nimport { HoverStyle } from '../../../../../base/browser/ui/hover/hover.js';\nimport { ILanguageModelToolsService } from '../../common/languageModelToolsService.js';\n\nexport class ChatProgressContentPart extends Disposable implements IChatContentPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly showSpinner: boolean;\n\tprivate readonly isHidden: boolean;\n\tprivate readonly renderedMessage = this._register(new MutableDisposable<IRenderedMarkdown>());\n\n\tconstructor(\n\t\tprogress: IChatProgressMessage | IChatTask | IChatTaskSerialized,\n\t\tprivate readonly chatContentMarkdownRenderer: IMarkdownRenderer,\n\t\tcontext: IChatContentPartRenderContext,\n\t\tforceShowSpinner: boolean | undefined,\n\t\tforceShowMessage: boolean | undefined,\n\t\ticon: ThemeIcon | undefined,\n\t\tprivate readonly toolInvocation: IChatToolInvocation | IChatToolInvocationSerialized | undefined,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IChatMarkdownAnchorService private readonly chatMarkdownAnchorService: IChatMarkdownAnchorService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\n\t\tconst followingContent = context.content.slice(context.contentIndex + 1);\n\t\tthis.showSpinner = forceShowSpinner ?? shouldShowSpinner(followingContent, context.element);\n\t\tthis.isHidden = forceShowMessage !== true && followingContent.some(part => part.kind !== 'progressMessage');\n\t\tif (this.isHidden) {\n\t\t\t// Placeholder, don't show the progress message\n\t\t\tthis.domNode = $('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.showSpinner && !this.configurationService.getValue(AccessibilityWorkbenchSettingId.VerboseChatProgressUpdates)) {\n\t\t\t// TODO@roblourens is this the right place for this?\n\t\t\t// this step is in progress, communicate it to SR users\n\t\t\talert(progress.content.value);\n\t\t}\n\t\tconst codicon = icon ? icon : this.showSpinner ? ThemeIcon.modify(Codicon.loading, 'spin') : Codicon.check;\n\t\tconst result = this.chatContentMarkdownRenderer.render(progress.content);\n\t\tresult.element.classList.add('progress-step');\n\t\trenderFileWidgets(result.element, this.instantiationService, this.chatMarkdownAnchorService, this._store);\n\n\t\tconst tooltip: IMarkdownString | undefined = this.createApprovalMessage();\n\t\tconst progressPart = this._register(instantiationService.createInstance(ChatProgressSubPart, result.element, codicon, tooltip));\n\t\tthis.domNode = progressPart.domNode;\n\t\tthis.renderedMessage.value = result;\n\t}\n\n\tupdateMessage(content: MarkdownString): void {\n\t\tif (this.isHidden) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Render the new message\n\t\tconst result = this._register(this.chatContentMarkdownRenderer.render(content));\n\t\tresult.element.classList.add('progress-step');\n\t\trenderFileWidgets(result.element, this.instantiationService, this.chatMarkdownAnchorService, this._store);\n\n\t\t// Replace the old message container with the new one\n\t\tif (this.renderedMessage.value) {\n\t\t\tthis.renderedMessage.value.element.replaceWith(result.element);\n\t\t} else {\n\t\t\tthis.domNode.appendChild(result.element);\n\t\t}\n\n\t\tthis.renderedMessage.value = result;\n\t}\n\n\thasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\t\t// Progress parts render render until some other content shows up, then they hide.\n\t\t// When some other content shows up, need to signal to be rerendered as hidden.\n\t\tif (followingContent.some(part => part.kind !== 'progressMessage') && !this.isHidden) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Needs rerender when spinner state changes\n\t\tconst showSpinner = shouldShowSpinner(followingContent, element);\n\t\treturn other.kind === 'progressMessage' && this.showSpinner === showSpinner;\n\t}\n\n\tprivate createApprovalMessage(): IMarkdownString | undefined {\n\t\tif (!this.toolInvocation) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst reason = IChatToolInvocation.executionConfirmedOrDenied(this.toolInvocation);\n\t\tif (!reason || typeof reason === 'boolean') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tlet md: string;\n\t\tswitch (reason.type) {\n\t\t\tcase ToolConfirmKind.Setting:\n\t\t\t\tmd = localize('chat.autoapprove.setting', 'Auto approved by {0}', createMarkdownCommandLink({ title: '`' + reason.id + '`', id: 'workbench.action.openSettings', arguments: [reason.id] }, false));\n\t\t\t\tbreak;\n\t\t\tcase ToolConfirmKind.LmServicePerTool:\n\t\t\t\tmd = reason.scope === 'session'\n\t\t\t\t\t? localize('chat.autoapprove.lmServicePerTool.session', 'Auto approved for this session')\n\t\t\t\t\t: reason.scope === 'workspace'\n\t\t\t\t\t\t? localize('chat.autoapprove.lmServicePerTool.workspace', 'Auto approved for this workspace')\n\t\t\t\t\t\t: localize('chat.autoapprove.lmServicePerTool.profile', 'Auto approved for this profile');\n\t\t\t\tmd += ' (' + createMarkdownCommandLink({ title: localize('edit', 'Edit'), id: 'workbench.action.chat.editToolApproval', arguments: [reason.scope] }) + ')';\n\t\t\t\tbreak;\n\t\t\tcase ToolConfirmKind.UserAction:\n\t\t\tcase ToolConfirmKind.Denied:\n\t\t\tcase ToolConfirmKind.ConfirmationNotNeeded:\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tif (!md) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn new MarkdownString(md, { isTrusted: true });\n\t}\n}\n\nfunction shouldShowSpinner(followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\treturn isResponseVM(element) && !element.isComplete && followingContent.length === 0;\n}\n\n\nexport class ChatProgressSubPart extends Disposable {\n\tpublic readonly domNode: HTMLElement;\n\n\tconstructor(\n\t\tmessageElement: HTMLElement,\n\t\ticon: ThemeIcon,\n\t\ttooltip: IMarkdownString | string | undefined,\n\t\t@IHoverService hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\n\t\tthis.domNode = $('.progress-container');\n\t\tconst iconElement = $('div');\n\t\ticonElement.classList.add(...ThemeIcon.asClassNameArray(icon));\n\t\tif (tooltip) {\n\t\t\tthis._register(hoverService.setupDelayedHover(iconElement, {\n\t\t\t\tcontent: tooltip,\n\t\t\t\tstyle: HoverStyle.Pointer,\n\t\t\t}));\n\t\t}\n\t\tappend(this.domNode, iconElement);\n\n\t\tmessageElement.classList.add('progress-step');\n\t\tappend(this.domNode, messageElement);\n\t}\n}\n\nexport class ChatWorkingProgressContentPart extends ChatProgressContentPart implements IChatContentPart {\n\tconstructor(\n\t\t_workingProgress: { kind: 'working' },\n\t\tchatContentMarkdownRenderer: IMarkdownRenderer,\n\t\tcontext: IChatContentPartRenderContext,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IChatMarkdownAnchorService chatMarkdownAnchorService: IChatMarkdownAnchorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILanguageModelToolsService languageModelToolsService: ILanguageModelToolsService\n\t) {\n\t\tconst progressMessage: IChatProgressMessage = {\n\t\t\tkind: 'progressMessage',\n\t\t\tcontent: new MarkdownString().appendText(localize('workingMessage', \"Working...\"))\n\t\t};\n\t\tsuper(progressMessage, chatContentMarkdownRenderer, context, undefined, undefined, undefined, undefined, instantiationService, chatMarkdownAnchorService, configurationService);\n\t\tthis._register(languageModelToolsService.onDidPrepareToolCallBecomeUnresponsive(e => {\n\t\t\tif (context.element.sessionId === e.sessionId) {\n\t\t\t\tthis.updateMessage(new MarkdownString(localize('toolCallUnresponsive', \"Waiting for tool '{0}' to respond...\", e.toolData.displayName)));\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride hasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\t\treturn other.kind === 'working';\n\t}\n}\n"]}