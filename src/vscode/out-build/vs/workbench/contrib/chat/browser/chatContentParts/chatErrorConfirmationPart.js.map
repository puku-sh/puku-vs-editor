{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/chat/browser/chatContentParts/chatErrorConfirmationPart.ts","vs/workbench/contrib/chat/browser/chatContentParts/chatErrorConfirmationPart.ts"],"names":[],"mappings":"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","file":"chatErrorConfirmationPart.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Button, IButtonOptions } from '../../../../../base/browser/ui/button/button.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IMarkdownRenderer } from '../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { defaultButtonStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { ChatErrorLevel, IChatResponseErrorDetailsConfirmationButton, IChatSendRequestOptions, IChatService } from '../../common/chatService.js';\nimport { assertIsResponseVM, IChatErrorDetailsPart, IChatRendererContent } from '../../common/chatViewModel.js';\nimport { IChatWidgetService } from '../chat.js';\nimport { IChatContentPart, IChatContentPartRenderContext } from './chatContentParts.js';\nimport { ChatErrorWidget } from './chatErrorContentPart.js';\n\nconst $ = dom.$;\n\nexport class ChatErrorConfirmationContentPart extends Disposable implements IChatContentPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly _onDidChangeHeight = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tconstructor(\n\t\tkind: ChatErrorLevel,\n\t\tcontent: IMarkdownString,\n\t\tprivate readonly errorDetails: IChatErrorDetailsPart,\n\t\tconfirmationButtons: IChatResponseErrorDetailsConfirmationButton[],\n\t\trenderer: IMarkdownRenderer,\n\t\tcontext: IChatContentPartRenderContext,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IChatWidgetService chatWidgetService: IChatWidgetService,\n\t\t@IChatService chatService: IChatService,\n\t) {\n\t\tsuper();\n\n\t\tconst element = context.element;\n\t\tassertIsResponseVM(element);\n\n\t\tthis.domNode = $('.chat-error-confirmation');\n\t\tthis.domNode.append(this._register(new ChatErrorWidget(kind, content, renderer)).domNode);\n\n\t\tconst buttonOptions: IButtonOptions = { ...defaultButtonStyles };\n\n\t\tconst buttonContainer = dom.append(this.domNode, $('.chat-buttons-container'));\n\t\tconfirmationButtons.forEach(buttonData => {\n\t\t\tconst button = this._register(new Button(buttonContainer, buttonOptions));\n\t\t\tbutton.label = buttonData.label;\n\n\t\t\tthis._register(button.onDidClick(async () => {\n\t\t\t\tconst prompt = buttonData.label;\n\t\t\t\tconst options: IChatSendRequestOptions = buttonData.isSecondary ?\n\t\t\t\t\t{ rejectedConfirmationData: [buttonData.data] } :\n\t\t\t\t\t{ acceptedConfirmationData: [buttonData.data] };\n\t\t\t\toptions.agentId = element.agent?.id;\n\t\t\t\toptions.slashCommand = element.slashCommand?.name;\n\t\t\t\toptions.confirmation = buttonData.label;\n\t\t\t\tconst widget = chatWidgetService.getWidgetBySessionResource(element.sessionResource);\n\t\t\t\toptions.userSelectedModelId = widget?.input.currentLanguageModel;\n\t\t\t\tObject.assign(options, widget?.getModeRequestOptions());\n\t\t\t\tif (await chatService.sendRequest(element.sessionResource, prompt, options)) {\n\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t}\n\n\thasSameContent(other: IChatRendererContent): boolean {\n\t\treturn other.kind === this.errorDetails.kind && other.isLast === this.errorDetails.isLast;\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Button, IButtonOptions } from '../../../../../base/browser/ui/button/button.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IMarkdownRenderer } from '../../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { defaultButtonStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { ChatErrorLevel, IChatResponseErrorDetailsConfirmationButton, IChatSendRequestOptions, IChatService } from '../../common/chatService.js';\nimport { assertIsResponseVM, IChatErrorDetailsPart, IChatRendererContent } from '../../common/chatViewModel.js';\nimport { IChatWidgetService } from '../chat.js';\nimport { IChatContentPart, IChatContentPartRenderContext } from './chatContentParts.js';\nimport { ChatErrorWidget } from './chatErrorContentPart.js';\n\nconst $ = dom.$;\n\nexport class ChatErrorConfirmationContentPart extends Disposable implements IChatContentPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly _onDidChangeHeight = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tconstructor(\n\t\tkind: ChatErrorLevel,\n\t\tcontent: IMarkdownString,\n\t\tprivate readonly errorDetails: IChatErrorDetailsPart,\n\t\tconfirmationButtons: IChatResponseErrorDetailsConfirmationButton[],\n\t\trenderer: IMarkdownRenderer,\n\t\tcontext: IChatContentPartRenderContext,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IChatWidgetService chatWidgetService: IChatWidgetService,\n\t\t@IChatService chatService: IChatService,\n\t) {\n\t\tsuper();\n\n\t\tconst element = context.element;\n\t\tassertIsResponseVM(element);\n\n\t\tthis.domNode = $('.chat-error-confirmation');\n\t\tthis.domNode.append(this._register(new ChatErrorWidget(kind, content, renderer)).domNode);\n\n\t\tconst buttonOptions: IButtonOptions = { ...defaultButtonStyles };\n\n\t\tconst buttonContainer = dom.append(this.domNode, $('.chat-buttons-container'));\n\t\tconfirmationButtons.forEach(buttonData => {\n\t\t\tconst button = this._register(new Button(buttonContainer, buttonOptions));\n\t\t\tbutton.label = buttonData.label;\n\n\t\t\tthis._register(button.onDidClick(async () => {\n\t\t\t\tconst prompt = buttonData.label;\n\t\t\t\tconst options: IChatSendRequestOptions = buttonData.isSecondary ?\n\t\t\t\t\t{ rejectedConfirmationData: [buttonData.data] } :\n\t\t\t\t\t{ acceptedConfirmationData: [buttonData.data] };\n\t\t\t\toptions.agentId = element.agent?.id;\n\t\t\t\toptions.slashCommand = element.slashCommand?.name;\n\t\t\t\toptions.confirmation = buttonData.label;\n\t\t\t\tconst widget = chatWidgetService.getWidgetBySessionResource(element.sessionResource);\n\t\t\t\toptions.userSelectedModelId = widget?.input.currentLanguageModel;\n\t\t\t\tObject.assign(options, widget?.getModeRequestOptions());\n\t\t\t\tif (await chatService.sendRequest(element.sessionResource, prompt, options)) {\n\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t}\n\n\thasSameContent(other: IChatRendererContent): boolean {\n\t\treturn other.kind === this.errorDetails.kind && other.isLast === this.errorDetails.isLast;\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n}\n"]}