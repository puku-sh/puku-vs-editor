{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatInlineAnchorWidget.ts"],"names":[],"mappings":"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","file":"chatInlineAnchorWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { EditorContextKeys } from '../../../../editor/common/editorContextKeys.js';\nimport { Location, SymbolKinds } from '../../../../editor/common/languages.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { getIconClasses } from '../../../../editor/common/services/getIconClasses.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { DefinitionAction } from '../../../../editor/contrib/gotoSymbol/browser/goToCommands.js';\nimport * as nls from '../../../../nls.js';\nimport { getFlatContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { Action2, IMenuService, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IResourceStat } from '../../../../platform/dnd/browser/dnd.js';\nimport { ITextResourceEditorInput } from '../../../../platform/editor/common/editor.js';\nimport { FileKind, IFileService } from '../../../../platform/files/common/files.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { FolderThemeIcon, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { fillEditorsDragData } from '../../../browser/dnd.js';\nimport { ResourceContextKey } from '../../../common/contextkeys.js';\nimport { IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { INotebookDocumentService } from '../../../services/notebook/common/notebookDocumentService.js';\nimport { ExplorerFolderContext } from '../../files/common/files.js';\nimport { IWorkspaceSymbol } from '../../search/common/search.js';\nimport { IChatContentInlineReference } from '../common/chatService.js';\nimport { IChatWidgetService } from './chat.js';\nimport { chatAttachmentResourceContextKey, hookUpSymbolAttachmentDragAndContextMenu } from './chatAttachmentWidgets.js';\nimport { IChatMarkdownAnchorService } from './chatContentParts/chatMarkdownAnchorService.js';\n\ntype ContentRefData =\n\t| { readonly kind: 'symbol'; readonly symbol: IWorkspaceSymbol }\n\t| {\n\t\treadonly kind?: undefined;\n\t\treadonly uri: URI;\n\t\treadonly range?: IRange;\n\t};\n\nexport function renderFileWidgets(element: HTMLElement, instantiationService: IInstantiationService, chatMarkdownAnchorService: IChatMarkdownAnchorService, disposables: DisposableStore) {\n\t// eslint-disable-next-line no-restricted-syntax\n\tconst links = element.querySelectorAll('a');\n\tlinks.forEach(a => {\n\t\t// Empty link text -> render file widget\n\t\tif (!a.textContent?.trim()) {\n\t\t\tconst href = a.getAttribute('data-href');\n\t\t\tconst uri = href ? URI.parse(href) : undefined;\n\t\t\tif (uri?.scheme) {\n\t\t\t\tconst widget = instantiationService.createInstance(InlineAnchorWidget, a, { kind: 'inlineReference', inlineReference: uri });\n\t\t\t\tdisposables.add(chatMarkdownAnchorService.register(widget));\n\t\t\t\tdisposables.add(widget);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport class InlineAnchorWidget extends Disposable {\n\n\tpublic static readonly className = 'chat-inline-anchor-widget';\n\n\tprivate readonly _chatResourceContext: IContextKey<string>;\n\n\treadonly data: ContentRefData;\n\n\tconstructor(\n\t\tprivate readonly element: HTMLAnchorElement | HTMLElement,\n\t\tpublic readonly inlineReference: IChatContentInlineReference,\n\t\t@IContextKeyService originalContextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@INotebookDocumentService private readonly notebookDocumentService: INotebookDocumentService,\n\t) {\n\t\tsuper();\n\n\t\t// TODO: Make sure we handle updates from an inlineReference being `resolved` late\n\n\t\tthis.data = 'uri' in inlineReference.inlineReference\n\t\t\t? inlineReference.inlineReference\n\t\t\t: 'name' in inlineReference.inlineReference\n\t\t\t\t? { kind: 'symbol', symbol: inlineReference.inlineReference }\n\t\t\t\t: { uri: inlineReference.inlineReference };\n\n\t\tconst contextKeyService = this._register(originalContextKeyService.createScoped(element));\n\t\tthis._chatResourceContext = chatAttachmentResourceContextKey.bindTo(contextKeyService);\n\n\t\telement.classList.add(InlineAnchorWidget.className, 'show-file-icons');\n\n\t\tlet iconText: string;\n\t\tlet iconClasses: string[];\n\n\t\tlet location: { readonly uri: URI; readonly range?: IRange };\n\n\t\tlet updateContextKeys: (() => Promise<void>) | undefined;\n\t\tif (this.data.kind === 'symbol') {\n\t\t\tconst symbol = this.data.symbol;\n\n\t\t\tlocation = this.data.symbol.location;\n\t\t\ticonText = this.data.symbol.name;\n\t\t\ticonClasses = ['codicon', ...getIconClasses(modelService, languageService, undefined, undefined, SymbolKinds.toIcon(symbol.kind))];\n\n\t\t\tthis._store.add(instantiationService.invokeFunction(accessor => hookUpSymbolAttachmentDragAndContextMenu(accessor, element, contextKeyService, { value: symbol.location, name: symbol.name, kind: symbol.kind }, MenuId.ChatInlineSymbolAnchorContext)));\n\t\t} else {\n\t\t\tlocation = this.data;\n\n\t\t\tconst label = labelService.getUriBasenameLabel(location.uri);\n\t\t\ticonText = location.range && this.data.kind !== 'symbol' ?\n\t\t\t\t`${label}#${location.range.startLineNumber}-${location.range.endLineNumber}` :\n\t\t\t\tlocation.uri.scheme === 'vscode-notebook-cell' && this.data.kind !== 'symbol' ?\n\t\t\t\t\t`${label} â€¢ cell${this.getCellIndex(location.uri)}` :\n\t\t\t\t\tlabel;\n\n\t\t\tlet fileKind = location.uri.path.endsWith('/') ? FileKind.FOLDER : FileKind.FILE;\n\t\t\tconst recomputeIconClasses = () => getIconClasses(modelService, languageService, location.uri, fileKind, fileKind === FileKind.FOLDER && !themeService.getFileIconTheme().hasFolderIcons ? FolderThemeIcon : undefined);\n\n\t\t\ticonClasses = recomputeIconClasses();\n\n\t\t\tconst refreshIconClasses = () => {\n\t\t\t\ticonEl.classList.remove(...iconClasses);\n\t\t\t\ticonClasses = recomputeIconClasses();\n\t\t\t\ticonEl.classList.add(...iconClasses);\n\t\t\t};\n\n\t\t\tthis._register(themeService.onDidFileIconThemeChange(() => {\n\t\t\t\trefreshIconClasses();\n\t\t\t}));\n\n\t\t\tconst isFolderContext = ExplorerFolderContext.bindTo(contextKeyService);\n\t\t\tfileService.stat(location.uri)\n\t\t\t\t.then(stat => {\n\t\t\t\t\tisFolderContext.set(stat.isDirectory);\n\t\t\t\t\tif (stat.isDirectory) {\n\t\t\t\t\t\tfileKind = FileKind.FOLDER;\n\t\t\t\t\t\trefreshIconClasses();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(() => { });\n\n\t\t\t// Context menu\n\t\t\tthis._register(dom.addDisposableListener(element, dom.EventType.CONTEXT_MENU, async domEvent => {\n\t\t\t\tconst event = new StandardMouseEvent(dom.getWindow(domEvent), domEvent);\n\t\t\t\tdom.EventHelper.stop(domEvent, true);\n\n\t\t\t\ttry {\n\t\t\t\t\tawait updateContextKeys?.();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\n\t\t\t\tif (this._store.isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcontextMenuService.showContextMenu({\n\t\t\t\t\tcontextKeyService,\n\t\t\t\t\tgetAnchor: () => event,\n\t\t\t\t\tgetActions: () => {\n\t\t\t\t\t\tconst menu = menuService.getMenuActions(MenuId.ChatInlineResourceAnchorContext, contextKeyService, { arg: location.uri });\n\t\t\t\t\t\treturn getFlatContextMenuActions(menu);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\n\t\tconst resourceContextKey = this._register(new ResourceContextKey(contextKeyService, fileService, languageService, modelService));\n\t\tresourceContextKey.set(location.uri);\n\t\tthis._chatResourceContext.set(location.uri.toString());\n\n\t\tconst iconEl = dom.$('span.icon');\n\t\ticonEl.classList.add(...iconClasses);\n\t\telement.replaceChildren(iconEl, dom.$('span.icon-label', {}, iconText));\n\n\t\tconst fragment = location.range ? `${location.range.startLineNumber},${location.range.startColumn}` : '';\n\t\telement.setAttribute('data-href', (fragment ? location.uri.with({ fragment }) : location.uri).toString());\n\n\t\t// Hover\n\t\tconst relativeLabel = labelService.getUriLabel(location.uri, { relative: true });\n\t\tthis._register(hoverService.setupManagedHover(getDefaultHoverDelegate('element'), element, relativeLabel));\n\n\t\t// Drag and drop\n\t\tif (this.data.kind !== 'symbol') {\n\t\t\telement.draggable = true;\n\t\t\tthis._register(dom.addDisposableListener(element, 'dragstart', e => {\n\t\t\t\tconst stat: IResourceStat = {\n\t\t\t\t\tresource: location.uri,\n\t\t\t\t\tselection: location.range,\n\t\t\t\t};\n\t\t\t\tinstantiationService.invokeFunction(accessor => fillEditorsDragData(accessor, [stat], e));\n\n\n\t\t\t\te.dataTransfer?.setDragImage(element, 0, 0);\n\t\t\t}));\n\t\t}\n\t}\n\n\tgetHTMLElement(): HTMLElement {\n\t\treturn this.element;\n\t}\n\n\tprivate getCellIndex(location: URI) {\n\t\tconst notebook = this.notebookDocumentService.getNotebook(location);\n\t\tconst index = notebook?.getCellIndex(location) ?? -1;\n\t\treturn index >= 0 ? ` ${index + 1}` : '';\n\t}\n}\n\n//#region Resource context menu\n\nregisterAction2(class AddFileToChatAction extends Action2 {\n\n\tstatic readonly id = 'chat.inlineResourceAnchor.addFileToChat';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AddFileToChatAction.id,\n\t\t\ttitle: nls.localize2('actions.attach.label', \"Add File to Chat\"),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatInlineResourceAnchorContext,\n\t\t\t\tgroup: 'chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ExplorerFolderContext.negate(),\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, resource: URI): Promise<void> {\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.attachmentModel.addFile(resource);\n\n\t\t}\n\t}\n});\n\n//#endregion\n\n//#region Resource keybindings\n\nregisterAction2(class CopyResourceAction extends Action2 {\n\n\tstatic readonly id = 'chat.inlineResourceAnchor.copyResource';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CopyResourceAction.id,\n\t\t\ttitle: nls.localize2('actions.copy.label', \"Copy\"),\n\t\t\tf1: false,\n\t\t\tprecondition: chatAttachmentResourceContextKey,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyC,\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst chatWidgetService = accessor.get(IChatMarkdownAnchorService);\n\t\tconst clipboardService = accessor.get(IClipboardService);\n\n\t\tconst anchor = chatWidgetService.lastFocusedAnchor;\n\t\tif (!anchor) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: we should also write out the standard mime types so that external programs can use them\n\t\t// like how `fillEditorsDragData` works but without having an event to work with.\n\t\tconst resource = anchor.data.kind === 'symbol' ? anchor.data.symbol.location.uri : anchor.data.uri;\n\t\tclipboardService.writeResources([resource]);\n\t}\n});\n\nregisterAction2(class OpenToSideResourceAction extends Action2 {\n\n\tstatic readonly id = 'chat.inlineResourceAnchor.openToSide';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenToSideResourceAction.id,\n\t\t\ttitle: nls.localize2('actions.openToSide.label', \"Open to the Side\"),\n\t\t\tf1: false,\n\t\t\tprecondition: chatAttachmentResourceContextKey,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.ExternalExtension + 2,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.WinCtrl | KeyCode.Enter\n\t\t\t\t},\n\t\t\t},\n\t\t\tmenu: [MenuId.ChatInlineSymbolAnchorContext, MenuId.ChatInputSymbolAttachmentContext].map(id => ({\n\t\t\t\tid: id,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1\n\t\t\t}))\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, arg?: Location | URI): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst target = this.getTarget(accessor, arg);\n\t\tif (!target) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst input: ITextResourceEditorInput = URI.isUri(target)\n\t\t\t? { resource: target }\n\t\t\t: {\n\t\t\t\tresource: target.uri, options: {\n\t\t\t\t\tselection: {\n\t\t\t\t\t\tstartColumn: target.range.startColumn,\n\t\t\t\t\t\tstartLineNumber: target.range.startLineNumber,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\tawait editorService.openEditors([input], SIDE_GROUP);\n\t}\n\n\tprivate getTarget(accessor: ServicesAccessor, arg: URI | Location | undefined): Location | URI | undefined {\n\t\tconst chatWidgetService = accessor.get(IChatMarkdownAnchorService);\n\n\t\tif (arg) {\n\t\t\treturn arg;\n\t\t}\n\n\t\tconst anchor = chatWidgetService.lastFocusedAnchor;\n\t\tif (!anchor) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn anchor.data.kind === 'symbol' ? anchor.data.symbol.location : anchor.data.uri;\n\t}\n});\n\n//#endregion\n\n//#region Symbol context menu\n\nregisterAction2(class GoToDefinitionAction extends Action2 {\n\n\tstatic readonly id = 'chat.inlineSymbolAnchor.goToDefinition';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GoToDefinitionAction.id,\n\t\t\ttitle: {\n\t\t\t\t...nls.localize2('actions.goToDecl.label', \"Go to Definition\"),\n\t\t\t\tmnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\"),\n\t\t\t},\n\t\t\tmenu: [MenuId.ChatInlineSymbolAnchorContext, MenuId.ChatInputSymbolAttachmentContext].map(id => ({\n\t\t\t\tid,\n\t\t\t\tgroup: '4_symbol_nav',\n\t\t\t\torder: 1.1,\n\t\t\t\twhen: EditorContextKeys.hasDefinitionProvider,\n\t\t\t}))\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, location: Location): Promise<unknown> {\n\t\tconst editorService = accessor.get(ICodeEditorService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\n\t\tawait openEditorWithSelection(editorService, location);\n\n\t\tconst action = new DefinitionAction({ openToSide: false, openInPeek: false, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n\t\treturn instantiationService.invokeFunction(accessor => action.run(accessor));\n\t}\n});\n\nasync function openEditorWithSelection(editorService: ICodeEditorService, location: Location) {\n\tawait editorService.openCodeEditor({\n\t\tresource: location.uri, options: {\n\t\t\tselection: {\n\t\t\t\tstartColumn: location.range.startColumn,\n\t\t\t\tstartLineNumber: location.range.startLineNumber,\n\t\t\t}\n\t\t}\n\t}, null);\n}\n\nasync function runGoToCommand(accessor: ServicesAccessor, command: string, location: Location) {\n\tconst editorService = accessor.get(ICodeEditorService);\n\tconst commandService = accessor.get(ICommandService);\n\n\tawait openEditorWithSelection(editorService, location);\n\n\treturn commandService.executeCommand(command);\n}\n\nregisterAction2(class GoToTypeDefinitionsAction extends Action2 {\n\n\tstatic readonly id = 'chat.inlineSymbolAnchor.goToTypeDefinitions';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GoToTypeDefinitionsAction.id,\n\t\t\ttitle: {\n\t\t\t\t...nls.localize2('goToTypeDefinitions.label', \"Go to Type Definitions\"),\n\t\t\t\tmnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definitions\"),\n\t\t\t},\n\t\t\tmenu: [MenuId.ChatInlineSymbolAnchorContext, MenuId.ChatInputSymbolAttachmentContext].map(id => ({\n\t\t\t\tid,\n\t\t\t\tgroup: '4_symbol_nav',\n\t\t\t\torder: 1.1,\n\t\t\t\twhen: EditorContextKeys.hasTypeDefinitionProvider,\n\t\t\t})),\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, location: Location): Promise<void> {\n\t\tawait runGoToCommand(accessor, 'editor.action.goToTypeDefinition', location);\n\t}\n});\n\nregisterAction2(class GoToImplementations extends Action2 {\n\n\tstatic readonly id = 'chat.inlineSymbolAnchor.goToImplementations';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GoToImplementations.id,\n\t\t\ttitle: {\n\t\t\t\t...nls.localize2('goToImplementations.label', \"Go to Implementations\"),\n\t\t\t\tmnemonicTitle: nls.localize({ key: 'miGotoImplementations', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\"),\n\t\t\t},\n\t\t\tmenu: [MenuId.ChatInlineSymbolAnchorContext, MenuId.ChatInputSymbolAttachmentContext].map(id => ({\n\t\t\t\tid,\n\t\t\t\tgroup: '4_symbol_nav',\n\t\t\t\torder: 1.2,\n\t\t\t\twhen: EditorContextKeys.hasImplementationProvider,\n\t\t\t})),\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, location: Location): Promise<void> {\n\t\tawait runGoToCommand(accessor, 'editor.action.goToImplementation', location);\n\t}\n});\n\nregisterAction2(class GoToReferencesAction extends Action2 {\n\n\tstatic readonly id = 'chat.inlineSymbolAnchor.goToReferences';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: GoToReferencesAction.id,\n\t\t\ttitle: {\n\t\t\t\t...nls.localize2('goToReferences.label', \"Go to References\"),\n\t\t\t\tmnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\"),\n\t\t\t},\n\t\t\tmenu: [MenuId.ChatInlineSymbolAnchorContext, MenuId.ChatInputSymbolAttachmentContext].map(id => ({\n\t\t\t\tid,\n\t\t\t\tgroup: '4_symbol_nav',\n\t\t\t\torder: 1.3,\n\t\t\t\twhen: EditorContextKeys.hasReferenceProvider,\n\t\t\t})),\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, location: Location): Promise<void> {\n\t\tawait runGoToCommand(accessor, 'editor.action.goToReferences', location);\n\t}\n});\n\n//#endregion\n"]}