{"version":3,"sources":["vs/workbench/contrib/chat/browser/chatAgentHover.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,iCAAiC,CAAC;AAEvD,OAAO,EAAE,UAAU,EAAE,MAAM,qDAAqD,CAAC;AACjF,OAAO,EAAE,uBAAuB,EAAE,MAAM,yCAAyC,CAAC;AAClF,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAE,OAAO,EAAS,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAAE,UAAU,EAAE,MAAM,oCAAoC,CAAC;AAChE,OAAO,EAAE,SAAS,EAAE,MAAM,sCAAsC,CAAC;AACjE,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAE9C,OAAO,EAAE,mBAAmB,EAAkB,qBAAqB,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAC;AACxH,OAAO,EAAE,8BAA8B,EAAE,MAAM,+CAA+C,CAAC;AAC/F,OAAO,EAAE,2BAA2B,EAAE,MAAM,uCAAuC,CAAC;AACpF,OAAO,EAAE,qBAAqB,EAAE,MAAM,iEAAiE,CAAC;AAEjG,IAAM,cAAc,GAApB,MAAM,cAAe,SAAQ,UAAU;IAY7C,YACoB,gBAAoD,EAC1C,gBAA8D,EACpE,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QAJ4B,qBAAgB,GAAhB,gBAAgB,CAAmB;QACzB,qBAAgB,GAAhB,gBAAgB,CAA6B;QACnD,yBAAoB,GAApB,oBAAoB,CAAuB;QANnE,yBAAoB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QAC5D,wBAAmB,GAAgB,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC;QASlF,MAAM,YAAY,GAAG,GAAG,CAAC,CAAC,CACzB,wBAAwB,EACxB;YACC,GAAG,CAAC,CAAC,CAAC,0BAA0B,EAAE;gBACjC,GAAG,CAAC,CAAC,CAAC,6BAA6B,CAAC;gBACpC,GAAG,CAAC,CAAC,CAAC,2BAA2B,EAAE;oBAClC,GAAG,CAAC,CAAC,CAAC,6BAA6B,CAAC;oBACpC,GAAG,CAAC,CAAC,CAAC,6BAA6B,EAAE;wBACpC,GAAG,CAAC,CAAC,CAAC,gDAAgD,CAAC;wBACvD,GAAG,CAAC,CAAC,CAAC,uCAAuC,CAAC;wBAC9C,GAAG,CAAC,CAAC,CAAC,uCAAuC,CAAC;qBAC9C,CAAC;iBACF,CAAC;aACF,CAAC;YACF,GAAG,CAAC,CAAC,CAAC,mCAAmC,CAAC;YAC1C,GAAG,CAAC,CAAC,CAAC,+CAA+C,CAAC;SACtD,CAAC,CAAC;QACJ,IAAI,CAAC,OAAO,GAAG,YAAY,CAAC,IAAI,CAAC;QAEjC,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC;QAC9B,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC;QAC9B,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC,aAAa,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,WAAW,CAAC;QAE5C,YAAY,CAAC,SAAS,CAAC,WAAW,GAAG,GAAG,CAAC;QAEzC,MAAM,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC,mCAAmC,EAAE,SAAS,EAAE,UAAU,CAAC,qBAAqB,CAAC,CAAC,CAAC;QAE/G,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,CAAC,CAAC,sCAAsC,CAAC,CAAC;QACnE,GAAG,CAAC,MAAM,CACT,YAAY,CAAC,SAAS,EACtB,aAAa,EACb,IAAI,CAAC,aAAa,CAAC,CAAC;QAErB,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QAC9D,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE,SAAS,EAAE,QAAQ,CAAC,IAAc,EAAE,IAA+C,CAAC,CAAC,CAAC,CAAC;IACvI,CAAC;IAED,QAAQ,CAAC,EAAU;QAClB,MAAM,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,CAAE,CAAC;QAClD,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,YAAY,GAAG,EAAE,CAAC;YACxC,MAAM,UAAU,GAAG,GAAG,CAAC,CAAC,CAAmB,UAAU,CAAC,CAAC;YACvD,UAAU,CAAC,GAAG,GAAG,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAChF,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC;QACpE,CAAC;aAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;YACrC,MAAM,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;YAC5E,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC,CAAC,wBAAwB,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC;QACnF,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAEpE,MAAM,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;QAC3E,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAClF,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,KAAK,CAAC,oBAAoB,CAAC;QAC5D,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,KAAK,CAAC,oBAAoB,IAAI,KAAK,CAAC,oBAAoB,CAAC;QAE1F,IAAI,WAAW,GAAG,KAAK,CAAC,WAAW,IAAI,EAAE,CAAC;QAC1C,IAAI,WAAW,EAAE,CAAC;YACjB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,EAAE,CAAC;gBACvC,WAAW,IAAI,GAAG,CAAC;YACpB,CAAC;QACF,CAAC;QAED,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,WAAW,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;QAExD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;QAC1D,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;YACtB,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,uBAAuB,EAAE,CAAC,CAAC;YAC7D,IAAI,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE;gBACtG,MAAM,CAAC,OAAO,EAAE,CAAC;gBACjB,MAAM,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;gBAChC,IAAI,SAAS,EAAE,eAAe,EAAE,QAAQ,EAAE,CAAC;oBAC1C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;oBACzD,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,CAAC;gBAClC,CAAC;YACF,CAAC,CAAC,CAAC;QACJ,CAAC;IACF,CAAC;CACD,CAAA;AAlGY,cAAc;IAaxB,WAAA,iBAAiB,CAAA;IACjB,WAAA,2BAA2B,CAAA;IAC3B,WAAA,qBAAqB,CAAA;GAfX,cAAc,CAkG1B;;AAED,MAAM,UAAU,wBAAwB,CAAC,QAA0C,EAAE,cAA+B;IACnH,OAAO;QACN,OAAO,EAAE;YACR;gBACC,SAAS,EAAE,8BAA8B;gBACzC,KAAK,EAAE,QAAQ,CAAC,IAAoB,EAAE,IAAgB,CAAC;gBACvD,GAAG,EAAE,GAAG,EAAE;oBACT,MAAM,KAAK,GAAG,QAAQ,EAAE,CAAC;oBACzB,IAAI,KAAK,EAAE,CAAC;wBACX,cAAc,CAAC,cAAc,CAAC,8BAA8B,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;oBAC1F,CAAC;gBACF,CAAC;aACD;SACD;KACD,CAAC;AACH,CAAC","file":"chatAgentHover.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IManagedHoverOptions } from '../../../../base/browser/ui/hover/hover.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { FileAccess } from '../../../../base/common/network.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { getFullyQualifiedId, IChatAgentData, IChatAgentNameService, IChatAgentService } from '../common/chatAgents.js';\nimport { showExtensionsWithIdsCommandId } from '../../extensions/browser/extensionsActions.js';\nimport { IExtensionsWorkbenchService } from '../../extensions/common/extensions.js';\nimport { verifiedPublisherIcon } from '../../../services/extensionManagement/common/extensionsIcons.js';\n\nexport class ChatAgentHover extends Disposable {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly icon: HTMLElement;\n\tprivate readonly name: HTMLElement;\n\tprivate readonly extensionName: HTMLElement;\n\tprivate readonly publisherName: HTMLElement;\n\tprivate readonly description: HTMLElement;\n\n\tprivate readonly _onDidChangeContents = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeContents: Event<void> = this._onDidChangeContents.event;\n\n\tconstructor(\n\t\t@IChatAgentService private readonly chatAgentService: IChatAgentService,\n\t\t@IExtensionsWorkbenchService private readonly extensionService: IExtensionsWorkbenchService,\n\t\t@IChatAgentNameService private readonly chatAgentNameService: IChatAgentNameService,\n\t) {\n\t\tsuper();\n\n\t\tconst hoverElement = dom.h(\n\t\t\t'.chat-agent-hover@root',\n\t\t\t[\n\t\t\t\tdom.h('.chat-agent-hover-header', [\n\t\t\t\t\tdom.h('.chat-agent-hover-icon@icon'),\n\t\t\t\t\tdom.h('.chat-agent-hover-details', [\n\t\t\t\t\t\tdom.h('.chat-agent-hover-name@name'),\n\t\t\t\t\t\tdom.h('.chat-agent-hover-extension', [\n\t\t\t\t\t\t\tdom.h('.chat-agent-hover-extension-name@extensionName'),\n\t\t\t\t\t\t\tdom.h('.chat-agent-hover-separator@separator'),\n\t\t\t\t\t\t\tdom.h('.chat-agent-hover-publisher@publisher'),\n\t\t\t\t\t\t]),\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t\tdom.h('.chat-agent-hover-warning@warning'),\n\t\t\t\tdom.h('span.chat-agent-hover-description@description'),\n\t\t\t]);\n\t\tthis.domNode = hoverElement.root;\n\n\t\tthis.icon = hoverElement.icon;\n\t\tthis.name = hoverElement.name;\n\t\tthis.extensionName = hoverElement.extensionName;\n\t\tthis.description = hoverElement.description;\n\n\t\thoverElement.separator.textContent = '|';\n\n\t\tconst verifiedBadge = dom.$('span.extension-verified-publisher', undefined, renderIcon(verifiedPublisherIcon));\n\n\t\tthis.publisherName = dom.$('span.chat-agent-hover-publisher-name');\n\t\tdom.append(\n\t\t\thoverElement.publisher,\n\t\t\tverifiedBadge,\n\t\t\tthis.publisherName);\n\n\t\thoverElement.warning.appendChild(renderIcon(Codicon.warning));\n\t\thoverElement.warning.appendChild(dom.$('span', undefined, localize('reservedName', \"This chat extension is using a reserved name.\")));\n\t}\n\n\tsetAgent(id: string): void {\n\t\tconst agent = this.chatAgentService.getAgent(id)!;\n\t\tif (agent.metadata.icon instanceof URI) {\n\t\t\tconst avatarIcon = dom.$<HTMLImageElement>('img.icon');\n\t\t\tavatarIcon.src = FileAccess.uriToBrowserUri(agent.metadata.icon).toString(true);\n\t\t\tthis.icon.replaceChildren(dom.$('.avatar', undefined, avatarIcon));\n\t\t} else if (agent.metadata.themeIcon) {\n\t\t\tconst avatarIcon = dom.$(ThemeIcon.asCSSSelector(agent.metadata.themeIcon));\n\t\t\tthis.icon.replaceChildren(dom.$('.avatar.codicon-avatar', undefined, avatarIcon));\n\t\t}\n\n\t\tthis.domNode.classList.toggle('noExtensionName', !!agent.isDynamic);\n\n\t\tconst isAllowed = this.chatAgentNameService.getAgentNameRestriction(agent);\n\t\tthis.name.textContent = isAllowed ? `@${agent.name}` : getFullyQualifiedId(agent);\n\t\tthis.extensionName.textContent = agent.extensionDisplayName;\n\t\tthis.publisherName.textContent = agent.publisherDisplayName ?? agent.extensionPublisherId;\n\n\t\tlet description = agent.description ?? '';\n\t\tif (description) {\n\t\t\tif (!description.match(/[\\.\\?\\!] *$/)) {\n\t\t\t\tdescription += '.';\n\t\t\t}\n\t\t}\n\n\t\tthis.description.textContent = description;\n\t\tthis.domNode.classList.toggle('allowedName', isAllowed);\n\n\t\tthis.domNode.classList.toggle('verifiedPublisher', false);\n\t\tif (!agent.isDynamic) {\n\t\t\tconst cancel = this._register(new CancellationTokenSource());\n\t\t\tthis.extensionService.getExtensions([{ id: agent.extensionId.value }], cancel.token).then(extensions => {\n\t\t\t\tcancel.dispose();\n\t\t\t\tconst extension = extensions[0];\n\t\t\t\tif (extension?.publisherDomain?.verified) {\n\t\t\t\t\tthis.domNode.classList.toggle('verifiedPublisher', true);\n\t\t\t\t\tthis._onDidChangeContents.fire();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function getChatAgentHoverOptions(getAgent: () => IChatAgentData | undefined, commandService: ICommandService): IManagedHoverOptions {\n\treturn {\n\t\tactions: [\n\t\t\t{\n\t\t\t\tcommandId: showExtensionsWithIdsCommandId,\n\t\t\t\tlabel: localize('viewExtensionLabel', \"View Extension\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tconst agent = getAgent();\n\t\t\t\t\tif (agent) {\n\t\t\t\t\t\tcommandService.executeCommand(showExtensionsWithIdsCommandId, [agent.extensionId.value]);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t]\n\t};\n}\n"]}