{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/mergeEditor/browser/view/editors/codeEditorView.ts","vs/workbench/contrib/mergeEditor/browser/view/editors/codeEditorView.ts"],"names":[],"mappings":"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","file":"codeEditorView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from '../../../../../../base/browser/dom.js';\nimport { IView, IViewSize } from '../../../../../../base/browser/ui/grid/grid.js';\nimport { Emitter, Event } from '../../../../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, derived, observableFromEvent } from '../../../../../../base/common/observable.js';\nimport { EditorExtensionsRegistry, IEditorContributionDescription } from '../../../../../../editor/browser/editorExtensions.js';\nimport { CodeEditorWidget } from '../../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { IEditorOptions } from '../../../../../../editor/common/config/editorOptions.js';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { Selection } from '../../../../../../editor/common/core/selection.js';\nimport { CodeLensContribution } from '../../../../../../editor/contrib/codelens/browser/codelensController.js';\nimport { FoldingController } from '../../../../../../editor/contrib/folding/browser/folding.js';\nimport { MenuWorkbenchToolBar } from '../../../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { DEFAULT_EDITOR_MAX_DIMENSIONS, DEFAULT_EDITOR_MIN_DIMENSIONS } from '../../../../../browser/parts/editor/editor.js';\nimport { setStyle } from '../../utils.js';\nimport { observableConfigValue } from '../../../../../../platform/observable/common/platformObservableUtils.js';\nimport { MergeEditorViewModel } from '../viewModel.js';\n\nexport abstract class CodeEditorView extends Disposable {\n\treadonly model;\n\n\tprotected readonly htmlElements;\n\n\tprivate readonly _onDidViewChange;\n\n\tpublic readonly view: IView;\n\n\tprotected readonly checkboxesVisible;\n\tprotected readonly showDeletionMarkers;\n\tprotected readonly useSimplifiedDecorations;\n\n\tpublic readonly editor;\n\n\tpublic updateOptions(newOptions: Readonly<IEditorOptions>): void {\n\t\tthis.editor.updateOptions(newOptions);\n\t}\n\n\tpublic readonly isFocused;\n\n\tpublic readonly cursorPosition;\n\n\tpublic readonly selection;\n\n\tpublic readonly cursorLineNumber;\n\n\tconstructor(\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\tpublic readonly viewModel: IObservable<undefined | MergeEditorViewModel>,\n\t\tprivate readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t\tthis.model = this.viewModel.map(m => /** @description model */ m?.model);\n\t\tthis.htmlElements = h('div.code-view', [\n\t\t\th('div.header@header', [\n\t\t\t\th('span.title@title'),\n\t\t\t\th('span.description@description'),\n\t\t\t\th('span.detail@detail'),\n\t\t\t\th('span.toolbar@toolbar'),\n\t\t\t]),\n\t\t\th('div.container', [\n\t\t\t\th('div.gutter@gutterDiv'),\n\t\t\t\th('div@editor'),\n\t\t\t]),\n\t\t]);\n\t\tthis._onDidViewChange = new Emitter<IViewSize | undefined>();\n\t\tthis.view = {\n\t\t\telement: this.htmlElements.root,\n\t\t\tminimumWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\tmaximumWidth: DEFAULT_EDITOR_MAX_DIMENSIONS.width,\n\t\t\tminimumHeight: DEFAULT_EDITOR_MIN_DIMENSIONS.height,\n\t\t\tmaximumHeight: DEFAULT_EDITOR_MAX_DIMENSIONS.height,\n\t\t\tonDidChange: this._onDidViewChange.event,\n\t\t\tlayout: (width: number, height: number, top: number, left: number) => {\n\t\t\t\tsetStyle(this.htmlElements.root, { width, height, top, left });\n\t\t\t\tthis.editor.layout({\n\t\t\t\t\twidth: width - this.htmlElements.gutterDiv.clientWidth,\n\t\t\t\t\theight: height - this.htmlElements.header.clientHeight,\n\t\t\t\t});\n\t\t\t}\n\t\t\t// preferredWidth?: number | undefined;\n\t\t\t// preferredHeight?: number | undefined;\n\t\t\t// priority?: LayoutPriority | undefined;\n\t\t\t// snap?: boolean | undefined;\n\t\t};\n\t\tthis.checkboxesVisible = observableConfigValue<boolean>('mergeEditor.showCheckboxes', false, this.configurationService);\n\t\tthis.showDeletionMarkers = observableConfigValue<boolean>('mergeEditor.showDeletionMarkers', true, this.configurationService);\n\t\tthis.useSimplifiedDecorations = observableConfigValue<boolean>('mergeEditor.useSimplifiedDecorations', false, this.configurationService);\n\t\tthis.editor = this.instantiationService.createInstance(\n\t\t\tCodeEditorWidget,\n\t\t\tthis.htmlElements.editor,\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcontributions: this.getEditorContributions(),\n\t\t\t}\n\t\t);\n\t\tthis.isFocused = observableFromEvent(this,\n\t\t\tEvent.any(this.editor.onDidBlurEditorWidget, this.editor.onDidFocusEditorWidget),\n\t\t\t() => /** @description editor.hasWidgetFocus */ this.editor.hasWidgetFocus()\n\t\t);\n\t\tthis.cursorPosition = observableFromEvent(this,\n\t\t\tthis.editor.onDidChangeCursorPosition,\n\t\t\t() => /** @description editor.getPosition */ this.editor.getPosition()\n\t\t);\n\t\tthis.selection = observableFromEvent(this,\n\t\t\tthis.editor.onDidChangeCursorSelection,\n\t\t\t() => /** @description editor.getSelections */ this.editor.getSelections()\n\t\t);\n\t\tthis.cursorLineNumber = this.cursorPosition.map(p => /** @description cursorPosition.lineNumber */ p?.lineNumber);\n\n\t}\n\n\tprotected getEditorContributions(): IEditorContributionDescription[] {\n\t\treturn EditorExtensionsRegistry.getEditorContributions().filter(c => c.id !== FoldingController.ID && c.id !== CodeLensContribution.ID);\n\t}\n}\n\nexport function createSelectionsAutorun(\n\tcodeEditorView: CodeEditorView,\n\ttranslateRange: (baseRange: Range, viewModel: MergeEditorViewModel) => Range\n): IDisposable {\n\tconst selections = derived(reader => {\n\t\t/** @description selections */\n\t\tconst viewModel = codeEditorView.viewModel.read(reader);\n\t\tif (!viewModel) {\n\t\t\treturn [];\n\t\t}\n\t\tconst baseRange = viewModel.selectionInBase.read(reader);\n\t\tif (!baseRange || baseRange.sourceEditor === codeEditorView) {\n\t\t\treturn [];\n\t\t}\n\t\treturn baseRange.rangesInBase.map(r => translateRange(r, viewModel));\n\t});\n\n\treturn autorun(reader => {\n\t\t/** @description set selections */\n\t\tconst ranges = selections.read(reader);\n\t\tif (ranges.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tcodeEditorView.editor.setSelections(ranges.map(r => new Selection(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn)));\n\t});\n}\n\nexport class TitleMenu extends Disposable {\n\tconstructor(\n\t\tmenuId: MenuId,\n\t\ttargetHtmlElement: HTMLElement,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tconst toolbar = instantiationService.createInstance(MenuWorkbenchToolBar, targetHtmlElement, menuId, {\n\t\t\tmenuOptions: { renderShortTitle: true },\n\t\t\ttoolbarOptions: { primaryGroup: (g) => g === 'primary' }\n\t\t});\n\t\tthis._store.add(toolbar);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from '../../../../../../base/browser/dom.js';\nimport { IView, IViewSize } from '../../../../../../base/browser/ui/grid/grid.js';\nimport { Emitter, Event } from '../../../../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { IObservable, autorun, derived, observableFromEvent } from '../../../../../../base/common/observable.js';\nimport { EditorExtensionsRegistry, IEditorContributionDescription } from '../../../../../../editor/browser/editorExtensions.js';\nimport { CodeEditorWidget } from '../../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { IEditorOptions } from '../../../../../../editor/common/config/editorOptions.js';\nimport { Range } from '../../../../../../editor/common/core/range.js';\nimport { Selection } from '../../../../../../editor/common/core/selection.js';\nimport { CodeLensContribution } from '../../../../../../editor/contrib/codelens/browser/codelensController.js';\nimport { FoldingController } from '../../../../../../editor/contrib/folding/browser/folding.js';\nimport { MenuWorkbenchToolBar } from '../../../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { DEFAULT_EDITOR_MAX_DIMENSIONS, DEFAULT_EDITOR_MIN_DIMENSIONS } from '../../../../../browser/parts/editor/editor.js';\nimport { setStyle } from '../../utils.js';\nimport { observableConfigValue } from '../../../../../../platform/observable/common/platformObservableUtils.js';\nimport { MergeEditorViewModel } from '../viewModel.js';\n\nexport abstract class CodeEditorView extends Disposable {\n\treadonly model;\n\n\tprotected readonly htmlElements;\n\n\tprivate readonly _onDidViewChange;\n\n\tpublic readonly view: IView;\n\n\tprotected readonly checkboxesVisible;\n\tprotected readonly showDeletionMarkers;\n\tprotected readonly useSimplifiedDecorations;\n\n\tpublic readonly editor;\n\n\tpublic updateOptions(newOptions: Readonly<IEditorOptions>): void {\n\t\tthis.editor.updateOptions(newOptions);\n\t}\n\n\tpublic readonly isFocused;\n\n\tpublic readonly cursorPosition;\n\n\tpublic readonly selection;\n\n\tpublic readonly cursorLineNumber;\n\n\tconstructor(\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\tpublic readonly viewModel: IObservable<undefined | MergeEditorViewModel>,\n\t\tprivate readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t\tthis.model = this.viewModel.map(m => /** @description model */ m?.model);\n\t\tthis.htmlElements = h('div.code-view', [\n\t\t\th('div.header@header', [\n\t\t\t\th('span.title@title'),\n\t\t\t\th('span.description@description'),\n\t\t\t\th('span.detail@detail'),\n\t\t\t\th('span.toolbar@toolbar'),\n\t\t\t]),\n\t\t\th('div.container', [\n\t\t\t\th('div.gutter@gutterDiv'),\n\t\t\t\th('div@editor'),\n\t\t\t]),\n\t\t]);\n\t\tthis._onDidViewChange = new Emitter<IViewSize | undefined>();\n\t\tthis.view = {\n\t\t\telement: this.htmlElements.root,\n\t\t\tminimumWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\tmaximumWidth: DEFAULT_EDITOR_MAX_DIMENSIONS.width,\n\t\t\tminimumHeight: DEFAULT_EDITOR_MIN_DIMENSIONS.height,\n\t\t\tmaximumHeight: DEFAULT_EDITOR_MAX_DIMENSIONS.height,\n\t\t\tonDidChange: this._onDidViewChange.event,\n\t\t\tlayout: (width: number, height: number, top: number, left: number) => {\n\t\t\t\tsetStyle(this.htmlElements.root, { width, height, top, left });\n\t\t\t\tthis.editor.layout({\n\t\t\t\t\twidth: width - this.htmlElements.gutterDiv.clientWidth,\n\t\t\t\t\theight: height - this.htmlElements.header.clientHeight,\n\t\t\t\t});\n\t\t\t}\n\t\t\t// preferredWidth?: number | undefined;\n\t\t\t// preferredHeight?: number | undefined;\n\t\t\t// priority?: LayoutPriority | undefined;\n\t\t\t// snap?: boolean | undefined;\n\t\t};\n\t\tthis.checkboxesVisible = observableConfigValue<boolean>('mergeEditor.showCheckboxes', false, this.configurationService);\n\t\tthis.showDeletionMarkers = observableConfigValue<boolean>('mergeEditor.showDeletionMarkers', true, this.configurationService);\n\t\tthis.useSimplifiedDecorations = observableConfigValue<boolean>('mergeEditor.useSimplifiedDecorations', false, this.configurationService);\n\t\tthis.editor = this.instantiationService.createInstance(\n\t\t\tCodeEditorWidget,\n\t\t\tthis.htmlElements.editor,\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcontributions: this.getEditorContributions(),\n\t\t\t}\n\t\t);\n\t\tthis.isFocused = observableFromEvent(this,\n\t\t\tEvent.any(this.editor.onDidBlurEditorWidget, this.editor.onDidFocusEditorWidget),\n\t\t\t() => /** @description editor.hasWidgetFocus */ this.editor.hasWidgetFocus()\n\t\t);\n\t\tthis.cursorPosition = observableFromEvent(this,\n\t\t\tthis.editor.onDidChangeCursorPosition,\n\t\t\t() => /** @description editor.getPosition */ this.editor.getPosition()\n\t\t);\n\t\tthis.selection = observableFromEvent(this,\n\t\t\tthis.editor.onDidChangeCursorSelection,\n\t\t\t() => /** @description editor.getSelections */ this.editor.getSelections()\n\t\t);\n\t\tthis.cursorLineNumber = this.cursorPosition.map(p => /** @description cursorPosition.lineNumber */ p?.lineNumber);\n\n\t}\n\n\tprotected getEditorContributions(): IEditorContributionDescription[] {\n\t\treturn EditorExtensionsRegistry.getEditorContributions().filter(c => c.id !== FoldingController.ID && c.id !== CodeLensContribution.ID);\n\t}\n}\n\nexport function createSelectionsAutorun(\n\tcodeEditorView: CodeEditorView,\n\ttranslateRange: (baseRange: Range, viewModel: MergeEditorViewModel) => Range\n): IDisposable {\n\tconst selections = derived(reader => {\n\t\t/** @description selections */\n\t\tconst viewModel = codeEditorView.viewModel.read(reader);\n\t\tif (!viewModel) {\n\t\t\treturn [];\n\t\t}\n\t\tconst baseRange = viewModel.selectionInBase.read(reader);\n\t\tif (!baseRange || baseRange.sourceEditor === codeEditorView) {\n\t\t\treturn [];\n\t\t}\n\t\treturn baseRange.rangesInBase.map(r => translateRange(r, viewModel));\n\t});\n\n\treturn autorun(reader => {\n\t\t/** @description set selections */\n\t\tconst ranges = selections.read(reader);\n\t\tif (ranges.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tcodeEditorView.editor.setSelections(ranges.map(r => new Selection(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn)));\n\t});\n}\n\nexport class TitleMenu extends Disposable {\n\tconstructor(\n\t\tmenuId: MenuId,\n\t\ttargetHtmlElement: HTMLElement,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tconst toolbar = instantiationService.createInstance(MenuWorkbenchToolBar, targetHtmlElement, menuId, {\n\t\t\tmenuOptions: { renderShortTitle: true },\n\t\t\ttoolbarOptions: { primaryGroup: (g) => g === 'primary' }\n\t\t});\n\t\tthis._store.add(toolbar);\n\t}\n}\n"]}