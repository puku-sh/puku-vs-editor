{"version":3,"sources":["vs/workbench/contrib/mergeEditor/browser/view/mergeEditor.ts"],"names":[],"mappings":"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","file":"mergeEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Dimension, reset } from '../../../../../base/browser/dom.js';\nimport { Grid, GridNodeDescriptor, IView, SerializableGrid } from '../../../../../base/browser/ui/grid/grid.js';\nimport { Orientation } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { BugIndicatingError, onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable, MutableDisposable, thenIfNotDisposed, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, IObservable, IReader, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { basename, isEqual } from '../../../../../base/common/resources.js';\nimport { isDefined } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport './media/mergeEditor.css';\nimport { ICodeEditor, IViewZoneChangeAccessor } from '../../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { IEditorOptions as ICodeEditorOptions } from '../../../../../editor/common/config/editorOptions.js';\nimport { ICodeEditorViewState, ScrollType } from '../../../../../editor/common/editorCommon.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { ITextResourceConfigurationService } from '../../../../../editor/common/services/textResourceConfiguration.js';\nimport { localize } from '../../../../../nls.js';\nimport { IContextKey, IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IEditorOptions, ITextEditorOptions, ITextResourceEditorInput } from '../../../../../platform/editor/common/editor.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { AbstractTextEditor } from '../../../../browser/parts/editor/textEditor.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, EditorInputWithOptions, IEditorOpenContext, IResourceMergeEditorInput } from '../../../../common/editor.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { applyTextEditorOptions } from '../../../../common/editor/editorOptions.js';\nimport { readTransientState, writeTransientState } from '../../../codeEditor/browser/toggleWordWrap.js';\nimport { MergeEditorInput } from '../mergeEditorInput.js';\nimport { IMergeEditorInputModel } from '../mergeEditorInputModel.js';\nimport { MergeEditorModel } from '../model/mergeEditorModel.js';\nimport { deepMerge, PersistentStore } from '../utils.js';\nimport { BaseCodeEditorView } from './editors/baseCodeEditorView.js';\nimport { ScrollSynchronizer } from './scrollSynchronizer.js';\nimport { MergeEditorViewModel } from './viewModel.js';\nimport { ViewZoneComputer } from './viewZones.js';\nimport { ctxIsMergeEditor, ctxMergeBaseUri, ctxMergeEditorLayout, ctxMergeEditorShowBase, ctxMergeEditorShowBaseAtTop, ctxMergeEditorShowNonConflictingChanges, ctxMergeResultUri, MergeEditorLayoutKind } from '../../common/mergeEditor.js';\nimport { settingsSashBorder } from '../../../preferences/common/settingsEditorColorRegistry.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { IEditorResolverService, MergeEditorInputFactoryFunction, RegisteredEditorPriority } from '../../../../services/editor/common/editorResolverService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport './colors.js';\nimport { InputCodeEditorView } from './editors/inputCodeEditorView.js';\nimport { ResultCodeEditorView } from './editors/resultCodeEditorView.js';\n\nexport class MergeEditor extends AbstractTextEditor<IMergeEditorViewState> {\n\n\tstatic readonly ID = 'mergeEditor';\n\n\tprivate readonly _sessionDisposables;\n\tprivate readonly _viewModel;\n\n\tpublic get viewModel(): IObservable<MergeEditorViewModel | undefined> {\n\t\treturn this._viewModel;\n\t}\n\n\tprivate rootHtmlElement: HTMLElement | undefined;\n\tprivate readonly _grid;\n\tprivate readonly input1View;\n\tprivate readonly baseView;\n\tprivate readonly baseViewOptions;\n\tprivate readonly input2View;\n\n\tprivate readonly inputResultView;\n\tprivate readonly _layoutMode;\n\tprivate readonly _layoutModeObs;\n\tprivate readonly _ctxIsMergeEditor: IContextKey<boolean>;\n\tprivate readonly _ctxUsesColumnLayout: IContextKey<string>;\n\tprivate readonly _ctxShowBase: IContextKey<boolean>;\n\tprivate readonly _ctxShowBaseAtTop;\n\tprivate readonly _ctxResultUri: IContextKey<string>;\n\tprivate readonly _ctxBaseUri: IContextKey<string>;\n\tprivate readonly _ctxShowNonConflictingChanges: IContextKey<boolean>;\n\tprivate readonly _inputModel;\n\tpublic get inputModel(): IObservable<IMergeEditorInputModel | undefined> {\n\t\treturn this._inputModel;\n\t}\n\tpublic get model(): MergeEditorModel | undefined {\n\t\treturn this.inputModel.get()?.model;\n\t}\n\n\tprivate readonly viewZoneComputer;\n\n\tprivate readonly scrollSynchronizer;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService instantiation: IInstantiationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ICodeEditorService private readonly _codeEditorService: ICodeEditorService\n\t) {\n\t\tsuper(MergeEditor.ID, group, telemetryService, instantiation, storageService, textResourceConfigurationService, themeService, editorService, editorGroupService, fileService);\n\t\tthis._sessionDisposables = new DisposableStore();\n\t\tthis._viewModel = observableValue<MergeEditorViewModel | undefined>(this, undefined);\n\t\tthis._grid = this._register(new MutableDisposable<Grid<IView>>());\n\t\tthis.input1View = this._register(this.instantiationService.createInstance(InputCodeEditorView, 1, this._viewModel));\n\t\tthis.baseView = observableValue<BaseCodeEditorView | undefined>(this, undefined);\n\t\tthis.baseViewOptions = observableValue<Readonly<ICodeEditorOptions> | undefined>(this, undefined);\n\t\tthis.input2View = this._register(this.instantiationService.createInstance(InputCodeEditorView, 2, this._viewModel));\n\t\tthis.inputResultView = this._register(this.instantiationService.createInstance(ResultCodeEditorView, this._viewModel));\n\t\tthis._layoutMode = this.instantiationService.createInstance(MergeEditorLayoutStore);\n\t\tthis._layoutModeObs = observableValue(this, this._layoutMode.value);\n\t\tthis._ctxIsMergeEditor = ctxIsMergeEditor.bindTo(this.contextKeyService);\n\t\tthis._ctxUsesColumnLayout = ctxMergeEditorLayout.bindTo(this.contextKeyService);\n\t\tthis._ctxShowBase = ctxMergeEditorShowBase.bindTo(this.contextKeyService);\n\t\tthis._ctxShowBaseAtTop = ctxMergeEditorShowBaseAtTop.bindTo(this.contextKeyService);\n\t\tthis._ctxResultUri = ctxMergeResultUri.bindTo(this.contextKeyService);\n\t\tthis._ctxBaseUri = ctxMergeBaseUri.bindTo(this.contextKeyService);\n\t\tthis._ctxShowNonConflictingChanges = ctxMergeEditorShowNonConflictingChanges.bindTo(this.contextKeyService);\n\t\tthis._inputModel = observableValue<IMergeEditorInputModel | undefined>(this, undefined);\n\t\tthis.viewZoneComputer = new ViewZoneComputer(\n\t\t\tthis.input1View.editor,\n\t\t\tthis.input2View.editor,\n\t\t\tthis.inputResultView.editor,\n\t\t);\n\t\tthis.scrollSynchronizer = this._register(new ScrollSynchronizer(this._viewModel, this.input1View, this.input2View, this.baseView, this.inputResultView, this._layoutModeObs));\n\t\tthis._onDidChangeSizeConstraints = new Emitter<void>();\n\t\tthis.onDidChangeSizeConstraints = this._onDidChangeSizeConstraints.event;\n\t\tthis.baseViewDisposables = this._register(new DisposableStore());\n\t\tthis.showNonConflictingChangesStore = this.instantiationService.createInstance(PersistentStore<boolean>, 'mergeEditor/showNonConflictingChanges');\n\t\tthis.showNonConflictingChanges = observableValue(this, this.showNonConflictingChangesStore.get() ?? false);\n\t}\n\n\toverride dispose(): void {\n\t\tthis._sessionDisposables.dispose();\n\t\tthis._ctxIsMergeEditor.reset();\n\t\tthis._ctxUsesColumnLayout.reset();\n\t\tthis._ctxShowNonConflictingChanges.reset();\n\t\tsuper.dispose();\n\t}\n\n\t// #region layout constraints\n\n\tprivate readonly _onDidChangeSizeConstraints;\n\toverride readonly onDidChangeSizeConstraints: Event<void>;\n\n\toverride get minimumWidth() {\n\t\treturn this._layoutMode.value.kind === 'mixed'\n\t\t\t? this.input1View.view.minimumWidth + this.input2View.view.minimumWidth\n\t\t\t: this.input1View.view.minimumWidth + this.input2View.view.minimumWidth + this.inputResultView.view.minimumWidth;\n\t}\n\n\t// #endregion\n\n\toverride getTitle(): string {\n\t\tif (this.input) {\n\t\t\treturn this.input.getName();\n\t\t}\n\n\t\treturn localize('mergeEditor', \"Text Merge Editor\");\n\t}\n\n\tprotected createEditorControl(parent: HTMLElement, initialOptions: ICodeEditorOptions): void {\n\t\tthis.rootHtmlElement = parent;\n\t\tparent.classList.add('merge-editor');\n\t\tthis.applyLayout(this._layoutMode.value);\n\t\tthis.applyOptions(initialOptions);\n\t}\n\n\tprotected updateEditorControlOptions(options: ICodeEditorOptions): void {\n\t\tthis.applyOptions(options);\n\t}\n\n\tprivate applyOptions(options: ICodeEditorOptions): void {\n\t\tconst inputOptions: ICodeEditorOptions = deepMerge<ICodeEditorOptions>(options, {\n\t\t\tminimap: { enabled: false },\n\t\t\tglyphMargin: false,\n\t\t\tlineNumbersMinChars: 2\n\t\t});\n\n\t\tconst readOnlyInputOptions: ICodeEditorOptions = deepMerge<ICodeEditorOptions>(inputOptions, {\n\t\t\treadOnly: true,\n\t\t\treadOnlyMessage: undefined\n\t\t});\n\n\t\tthis.input1View.updateOptions(readOnlyInputOptions);\n\t\tthis.input2View.updateOptions(readOnlyInputOptions);\n\t\tthis.baseViewOptions.set({ ...this.input2View.editor.getRawOptions() }, undefined);\n\t\tthis.inputResultView.updateOptions(inputOptions);\n\t}\n\n\tprotected getMainControl(): ICodeEditor | undefined {\n\t\treturn this.inputResultView.editor;\n\t}\n\n\tlayout(dimension: Dimension): void {\n\t\tthis._grid.value?.layout(dimension.width, dimension.height);\n\t}\n\n\toverride async setInput(input: EditorInput, options: IEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tif (!(input instanceof MergeEditorInput)) {\n\t\t\tthrow new BugIndicatingError('ONLY MergeEditorInput is supported');\n\t\t}\n\t\tawait super.setInput(input, options, context, token);\n\n\t\tthis._sessionDisposables.clear();\n\t\ttransaction(tx => {\n\t\t\tthis._viewModel.set(undefined, tx);\n\t\t\tthis._inputModel.set(undefined, tx);\n\t\t});\n\n\t\tconst inputModel = await input.resolve();\n\t\tconst model = inputModel.model;\n\n\t\tconst viewModel = this.instantiationService.createInstance(\n\t\t\tMergeEditorViewModel,\n\t\t\tmodel,\n\t\t\tthis.input1View,\n\t\t\tthis.input2View,\n\t\t\tthis.inputResultView,\n\t\t\tthis.baseView,\n\t\t\tthis.showNonConflictingChanges,\n\t\t);\n\n\t\tmodel.telemetry.reportMergeEditorOpened({\n\t\t\tcombinableConflictCount: model.combinableConflictCount,\n\t\t\tconflictCount: model.conflictCount,\n\n\t\t\tbaseTop: this._layoutModeObs.get().showBaseAtTop,\n\t\t\tbaseVisible: this._layoutModeObs.get().showBase,\n\t\t\tisColumnView: this._layoutModeObs.get().kind === 'columns',\n\t\t});\n\n\t\ttransaction(tx => {\n\t\t\tthis._viewModel.set(viewModel, tx);\n\t\t\tthis._inputModel.set(inputModel, tx);\n\t\t});\n\t\tthis._sessionDisposables.add(viewModel);\n\n\t\t// Track focus changes to update the editor name\n\t\tthis._sessionDisposables.add(autorun(reader => {\n\t\t\t/** @description Update focused editor name based on focus */\n\t\t\tconst focusedType = viewModel.focusedEditorType.read(reader);\n\n\t\t\tif (!(input instanceof MergeEditorInput)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinput.updateFocusedEditor(focusedType || 'result');\n\t\t}));\n\n\t\t// Set/unset context keys based on input\n\t\tthis._ctxResultUri.set(inputModel.resultUri.toString());\n\t\tthis._ctxBaseUri.set(model.base.uri.toString());\n\t\tthis._sessionDisposables.add(toDisposable(() => {\n\t\t\tthis._ctxBaseUri.reset();\n\t\t\tthis._ctxResultUri.reset();\n\t\t}));\n\n\t\tconst viewZoneRegistrationStore = new DisposableStore();\n\t\tthis._sessionDisposables.add(viewZoneRegistrationStore);\n\t\t// Set the view zones before restoring view state!\n\t\t// Otherwise scrolling will be off\n\t\tthis._sessionDisposables.add(autorunWithStore((reader) => {\n\t\t\t/** @description update alignment view zones */\n\t\t\tconst baseView = this.baseView.read(reader);\n\n\t\t\tconst resultScrollTop = this.inputResultView.editor.getScrollTop();\n\t\t\tthis.scrollSynchronizer.stopSync();\n\n\t\t\tviewZoneRegistrationStore.clear();\n\n\t\t\tthis.inputResultView.editor.changeViewZones(resultViewZoneAccessor => {\n\t\t\t\tconst layout = this._layoutModeObs.read(reader);\n\t\t\t\tconst shouldAlignResult = layout.kind === 'columns';\n\t\t\t\tconst shouldAlignBase = layout.kind === 'mixed' && !layout.showBaseAtTop;\n\n\t\t\t\tthis.input1View.editor.changeViewZones(input1ViewZoneAccessor => {\n\t\t\t\t\tthis.input2View.editor.changeViewZones(input2ViewZoneAccessor => {\n\t\t\t\t\t\tif (baseView) {\n\t\t\t\t\t\t\tbaseView.editor.changeViewZones(baseViewZoneAccessor => {\n\t\t\t\t\t\t\t\tviewZoneRegistrationStore.add(this.setViewZones(reader,\n\t\t\t\t\t\t\t\t\tviewModel,\n\t\t\t\t\t\t\t\t\tthis.input1View.editor,\n\t\t\t\t\t\t\t\t\tinput1ViewZoneAccessor,\n\t\t\t\t\t\t\t\t\tthis.input2View.editor,\n\t\t\t\t\t\t\t\t\tinput2ViewZoneAccessor,\n\t\t\t\t\t\t\t\t\tbaseView.editor,\n\t\t\t\t\t\t\t\t\tbaseViewZoneAccessor,\n\t\t\t\t\t\t\t\t\tshouldAlignBase,\n\t\t\t\t\t\t\t\t\tthis.inputResultView.editor,\n\t\t\t\t\t\t\t\t\tresultViewZoneAccessor,\n\t\t\t\t\t\t\t\t\tshouldAlignResult\n\t\t\t\t\t\t\t\t));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tviewZoneRegistrationStore.add(this.setViewZones(reader,\n\t\t\t\t\t\t\t\tviewModel,\n\t\t\t\t\t\t\t\tthis.input1View.editor,\n\t\t\t\t\t\t\t\tinput1ViewZoneAccessor,\n\t\t\t\t\t\t\t\tthis.input2View.editor,\n\t\t\t\t\t\t\t\tinput2ViewZoneAccessor,\n\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\tthis.inputResultView.editor,\n\t\t\t\t\t\t\t\tresultViewZoneAccessor,\n\t\t\t\t\t\t\t\tshouldAlignResult\n\t\t\t\t\t\t\t));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.inputResultView.editor.setScrollTop(resultScrollTop, ScrollType.Smooth);\n\n\t\t\tthis.scrollSynchronizer.startSync();\n\t\t\tthis.scrollSynchronizer.updateScrolling();\n\t\t}));\n\n\t\tconst viewState = this.loadEditorViewState(input, context);\n\t\tif (viewState) {\n\t\t\tthis._applyViewState(viewState);\n\t\t} else {\n\t\t\tthis._sessionDisposables.add(thenIfNotDisposed(model.onInitialized, () => {\n\t\t\t\tconst firstConflict = model.modifiedBaseRanges.get().find(r => r.isConflicting);\n\t\t\t\tif (!firstConflict) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.input1View.editor.revealLineInCenter(firstConflict.input1Range.startLineNumber);\n\t\t\t\ttransaction(tx => {\n\t\t\t\t\t/** @description setActiveModifiedBaseRange */\n\t\t\t\t\tviewModel.setActiveModifiedBaseRange(firstConflict, tx);\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\n\t\t// word wrap special case - sync transient state from result model to input[1|2] models\n\t\tconst mirrorWordWrapTransientState = (candidate: ITextModel) => {\n\t\t\tconst candidateState = readTransientState(candidate, this._codeEditorService);\n\n\t\t\twriteTransientState(model.input2.textModel, candidateState, this._codeEditorService);\n\t\t\twriteTransientState(model.input1.textModel, candidateState, this._codeEditorService);\n\t\t\twriteTransientState(model.resultTextModel, candidateState, this._codeEditorService);\n\n\t\t\tconst baseTextModel = this.baseView.get()?.editor.getModel();\n\t\t\tif (baseTextModel) {\n\t\t\t\twriteTransientState(baseTextModel, candidateState, this._codeEditorService);\n\t\t\t}\n\t\t};\n\t\tthis._sessionDisposables.add(this._codeEditorService.onDidChangeTransientModelProperty(candidate => {\n\t\t\tmirrorWordWrapTransientState(candidate);\n\t\t}));\n\t\tmirrorWordWrapTransientState(this.inputResultView.editor.getModel()!);\n\n\t\t// detect when base, input1, and input2 become empty and replace THIS editor with its result editor\n\t\t// TODO@jrieken@hediet this needs a better/cleaner solution\n\t\t// https://github.com/microsoft/vscode/issues/155940\n\t\tconst that = this;\n\t\tthis._sessionDisposables.add(new class {\n\n\t\t\tprivate readonly _disposable = new DisposableStore();\n\n\t\t\tconstructor() {\n\t\t\t\tfor (const model of this.baseInput1Input2()) {\n\t\t\t\t\tthis._disposable.add(model.onDidChangeContent(() => this._checkBaseInput1Input2AllEmpty()));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispose() {\n\t\t\t\tthis._disposable.dispose();\n\t\t\t}\n\n\t\t\tprivate *baseInput1Input2() {\n\t\t\t\tyield model.base;\n\t\t\t\tyield model.input1.textModel;\n\t\t\t\tyield model.input2.textModel;\n\t\t\t}\n\n\t\t\tprivate _checkBaseInput1Input2AllEmpty() {\n\t\t\t\tfor (const model of this.baseInput1Input2()) {\n\t\t\t\t\tif (model.getValueLength() > 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// all empty -> replace this editor with a normal editor for result\n\t\t\t\tthat.editorService.replaceEditors(\n\t\t\t\t\t[{ editor: input, replacement: { resource: input.result, options: { preserveFocus: true } }, forceReplaceDirty: true }],\n\t\t\t\t\tthat.group\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setViewZones(\n\t\treader: IReader,\n\t\tviewModel: MergeEditorViewModel,\n\t\tinput1Editor: ICodeEditor,\n\t\tinput1ViewZoneAccessor: IViewZoneChangeAccessor,\n\t\tinput2Editor: ICodeEditor,\n\t\tinput2ViewZoneAccessor: IViewZoneChangeAccessor,\n\t\tbaseEditor: ICodeEditor | undefined,\n\t\tbaseViewZoneAccessor: IViewZoneChangeAccessor | undefined,\n\t\tshouldAlignBase: boolean,\n\t\tresultEditor: ICodeEditor,\n\t\tresultViewZoneAccessor: IViewZoneChangeAccessor,\n\t\tshouldAlignResult: boolean,\n\t): IDisposable {\n\t\tconst input1ViewZoneIds: string[] = [];\n\t\tconst input2ViewZoneIds: string[] = [];\n\t\tconst baseViewZoneIds: string[] = [];\n\t\tconst resultViewZoneIds: string[] = [];\n\n\t\tconst viewZones = this.viewZoneComputer.computeViewZones(reader, viewModel, {\n\t\t\tcodeLensesVisible: true,\n\t\t\tshowNonConflictingChanges: this.showNonConflictingChanges.read(reader),\n\t\t\tshouldAlignBase,\n\t\t\tshouldAlignResult,\n\t\t});\n\n\t\tconst disposableStore = new DisposableStore();\n\n\t\tif (baseViewZoneAccessor) {\n\t\t\tfor (const v of viewZones.baseViewZones) {\n\t\t\t\tv.create(baseViewZoneAccessor, baseViewZoneIds, disposableStore);\n\t\t\t}\n\t\t}\n\n\t\tfor (const v of viewZones.resultViewZones) {\n\t\t\tv.create(resultViewZoneAccessor, resultViewZoneIds, disposableStore);\n\t\t}\n\n\t\tfor (const v of viewZones.input1ViewZones) {\n\t\t\tv.create(input1ViewZoneAccessor, input1ViewZoneIds, disposableStore);\n\t\t}\n\n\t\tfor (const v of viewZones.input2ViewZones) {\n\t\t\tv.create(input2ViewZoneAccessor, input2ViewZoneIds, disposableStore);\n\t\t}\n\n\t\tdisposableStore.add({\n\t\t\tdispose: () => {\n\t\t\t\tinput1Editor.changeViewZones(a => {\n\t\t\t\t\tfor (const zone of input1ViewZoneIds) {\n\t\t\t\t\t\ta.removeZone(zone);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tinput2Editor.changeViewZones(a => {\n\t\t\t\t\tfor (const zone of input2ViewZoneIds) {\n\t\t\t\t\t\ta.removeZone(zone);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbaseEditor?.changeViewZones(a => {\n\t\t\t\t\tfor (const zone of baseViewZoneIds) {\n\t\t\t\t\t\ta.removeZone(zone);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresultEditor.changeViewZones(a => {\n\t\t\t\t\tfor (const zone of resultViewZoneIds) {\n\t\t\t\t\t\ta.removeZone(zone);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn disposableStore;\n\t}\n\n\toverride setOptions(options: ITextEditorOptions | undefined): void {\n\t\tsuper.setOptions(options);\n\n\t\tif (options) {\n\t\t\tapplyTextEditorOptions(options, this.inputResultView.editor, ScrollType.Smooth);\n\t\t}\n\t}\n\n\toverride clearInput(): void {\n\t\tsuper.clearInput();\n\n\t\tthis._sessionDisposables.clear();\n\n\t\tfor (const { editor } of [this.input1View, this.input2View, this.inputResultView]) {\n\t\t\teditor.setModel(null);\n\t\t}\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\t(this.getControl() ?? this.inputResultView.editor).focus();\n\t}\n\n\toverride hasFocus(): boolean {\n\t\tfor (const { editor } of [this.input1View, this.input2View, this.inputResultView]) {\n\t\t\tif (editor.hasTextFocus()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn super.hasFocus();\n\t}\n\n\tprotected override setEditorVisible(visible: boolean): void {\n\t\tsuper.setEditorVisible(visible);\n\n\t\tfor (const { editor } of [this.input1View, this.input2View, this.inputResultView]) {\n\t\t\tif (visible) {\n\t\t\t\teditor.onVisible();\n\t\t\t} else {\n\t\t\t\teditor.onHide();\n\t\t\t}\n\t\t}\n\n\t\tthis._ctxIsMergeEditor.set(visible);\n\t}\n\n\t// ---- interact with \"outside world\" via`getControl`, `scopedContextKeyService`: we only expose the result-editor keep the others internal\n\n\toverride getControl(): ICodeEditor | undefined {\n\t\treturn this.inputResultView.editor;\n\t}\n\n\toverride get scopedContextKeyService(): IContextKeyService | undefined {\n\t\tconst control = this.getControl();\n\t\treturn control?.invokeWithinContext(accessor => accessor.get(IContextKeyService));\n\t}\n\n\t// --- layout\n\n\tpublic toggleBase(): void {\n\t\tthis.setLayout({\n\t\t\t...this._layoutMode.value,\n\t\t\tshowBase: !this._layoutMode.value.showBase\n\t\t});\n\t}\n\n\tpublic toggleShowBaseTop(): void {\n\t\tconst showBaseTop = this._layoutMode.value.showBase && this._layoutMode.value.showBaseAtTop;\n\t\tthis.setLayout({\n\t\t\t...this._layoutMode.value,\n\t\t\tshowBaseAtTop: true,\n\t\t\tshowBase: !showBaseTop,\n\t\t});\n\t}\n\n\tpublic toggleShowBaseCenter(): void {\n\t\tconst showBaseCenter = this._layoutMode.value.showBase && !this._layoutMode.value.showBaseAtTop;\n\t\tthis.setLayout({\n\t\t\t...this._layoutMode.value,\n\t\t\tshowBaseAtTop: false,\n\t\t\tshowBase: !showBaseCenter,\n\t\t});\n\t}\n\n\tpublic setLayoutKind(kind: MergeEditorLayoutKind): void {\n\t\tthis.setLayout({\n\t\t\t...this._layoutMode.value,\n\t\t\tkind\n\t\t});\n\t}\n\n\tpublic setLayout(newLayout: IMergeEditorLayout): void {\n\t\tconst value = this._layoutMode.value;\n\t\tif (JSON.stringify(value) === JSON.stringify(newLayout)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.model?.telemetry.reportLayoutChange({\n\t\t\tbaseTop: newLayout.showBaseAtTop,\n\t\t\tbaseVisible: newLayout.showBase,\n\t\t\tisColumnView: newLayout.kind === 'columns',\n\t\t});\n\t\tthis.applyLayout(newLayout);\n\t}\n\n\tprivate readonly baseViewDisposables;\n\n\tprivate applyLayout(layout: IMergeEditorLayout): void {\n\t\ttransaction(tx => {\n\t\t\t/** @description applyLayout */\n\n\t\t\tif (layout.showBase && !this.baseView.get()) {\n\t\t\t\tthis.baseViewDisposables.clear();\n\t\t\t\tconst baseView = this.baseViewDisposables.add(\n\t\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\t\tBaseCodeEditorView,\n\t\t\t\t\t\tthis.viewModel\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tthis.baseViewDisposables.add(autorun(reader => {\n\t\t\t\t\t/** @description Update base view options */\n\t\t\t\t\tconst options = this.baseViewOptions.read(reader);\n\t\t\t\t\tif (options) {\n\t\t\t\t\t\tbaseView.updateOptions(options);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tthis.baseView.set(baseView, tx);\n\t\t\t} else if (!layout.showBase && this.baseView.get()) {\n\t\t\t\tthis.baseView.set(undefined, tx);\n\t\t\t\tthis.baseViewDisposables.clear();\n\t\t\t}\n\n\t\t\tif (layout.kind === 'mixed') {\n\t\t\t\tthis.setGrid([\n\t\t\t\t\tlayout.showBaseAtTop && layout.showBase ? {\n\t\t\t\t\t\tsize: 38,\n\t\t\t\t\t\tdata: this.baseView.get()!.view\n\t\t\t\t\t} : undefined,\n\t\t\t\t\t{\n\t\t\t\t\t\tsize: 38,\n\t\t\t\t\t\tgroups: [\n\t\t\t\t\t\t\t{ data: this.input1View.view },\n\t\t\t\t\t\t\t!layout.showBaseAtTop && layout.showBase ? { data: this.baseView.get()!.view } : undefined,\n\t\t\t\t\t\t\t{ data: this.input2View.view }\n\t\t\t\t\t\t].filter(isDefined)\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tsize: 62,\n\t\t\t\t\t\tdata: this.inputResultView.view\n\t\t\t\t\t},\n\t\t\t\t].filter(isDefined));\n\t\t\t} else if (layout.kind === 'columns') {\n\t\t\t\tthis.setGrid([\n\t\t\t\t\tlayout.showBase ? {\n\t\t\t\t\t\tsize: 40,\n\t\t\t\t\t\tdata: this.baseView.get()!.view\n\t\t\t\t\t} : undefined,\n\t\t\t\t\t{\n\t\t\t\t\t\tsize: 60,\n\t\t\t\t\t\tgroups: [{ data: this.input1View.view }, { data: this.inputResultView.view }, { data: this.input2View.view }]\n\t\t\t\t\t},\n\t\t\t\t].filter(isDefined));\n\t\t\t}\n\n\t\t\tthis._layoutMode.value = layout;\n\t\t\tthis._ctxUsesColumnLayout.set(layout.kind);\n\t\t\tthis._ctxShowBase.set(layout.showBase);\n\t\t\tthis._ctxShowBaseAtTop.set(layout.showBaseAtTop);\n\t\t\tthis._onDidChangeSizeConstraints.fire();\n\t\t\tthis._layoutModeObs.set(layout, tx);\n\t\t});\n\t}\n\n\tprivate setGrid(descriptor: GridNodeDescriptor<any>[]) {\n\t\tlet width = -1;\n\t\tlet height = -1;\n\t\tif (this._grid.value) {\n\t\t\twidth = this._grid.value.width;\n\t\t\theight = this._grid.value.height;\n\t\t}\n\t\tthis._grid.value = SerializableGrid.from<any>({\n\t\t\torientation: Orientation.VERTICAL,\n\t\t\tsize: 100,\n\t\t\tgroups: descriptor,\n\t\t}, {\n\t\t\tstyles: { separatorBorder: this.theme.getColor(settingsSashBorder) ?? Color.transparent },\n\t\t\tproportionalLayout: true\n\t\t});\n\n\t\treset(this.rootHtmlElement!, this._grid.value.element);\n\t\t// Only call layout after the elements have been added to the DOM,\n\t\t// so that they have a defined size.\n\t\tif (width !== -1) {\n\t\t\tthis._grid.value.layout(width, height);\n\t\t}\n\t}\n\n\tprivate _applyViewState(state: IMergeEditorViewState | undefined) {\n\t\tif (!state) {\n\t\t\treturn;\n\t\t}\n\t\tthis.inputResultView.editor.restoreViewState(state);\n\t\tif (state.input1State) {\n\t\t\tthis.input1View.editor.restoreViewState(state.input1State);\n\t\t}\n\t\tif (state.input2State) {\n\t\t\tthis.input2View.editor.restoreViewState(state.input2State);\n\t\t}\n\t\tif (state.focusIndex >= 0) {\n\t\t\t[this.input1View.editor, this.input2View.editor, this.inputResultView.editor][state.focusIndex].focus();\n\t\t}\n\t}\n\n\tprotected computeEditorViewState(resource: URI): IMergeEditorViewState | undefined {\n\t\tif (!isEqual(this.inputModel.get()?.resultUri, resource)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst result = this.inputResultView.editor.saveViewState();\n\t\tif (!result) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst input1State = this.input1View.editor.saveViewState() ?? undefined;\n\t\tconst input2State = this.input2View.editor.saveViewState() ?? undefined;\n\t\tconst focusIndex = [this.input1View.editor, this.input2View.editor, this.inputResultView.editor].findIndex(editor => editor.hasWidgetFocus());\n\t\treturn { ...result, input1State, input2State, focusIndex };\n\t}\n\n\n\tprotected tracksEditorViewState(input: EditorInput): boolean {\n\t\treturn input instanceof MergeEditorInput;\n\t}\n\n\tprivate readonly showNonConflictingChangesStore;\n\tprivate readonly showNonConflictingChanges;\n\n\tpublic toggleShowNonConflictingChanges(): void {\n\t\tthis.showNonConflictingChanges.set(!this.showNonConflictingChanges.get(), undefined);\n\t\tthis.showNonConflictingChangesStore.set(this.showNonConflictingChanges.get());\n\t\tthis._ctxShowNonConflictingChanges.set(this.showNonConflictingChanges.get());\n\t}\n}\n\nexport interface IMergeEditorLayout {\n\treadonly kind: MergeEditorLayoutKind;\n\treadonly showBase: boolean;\n\treadonly showBaseAtTop: boolean;\n}\n\n// TODO use PersistentStore\nclass MergeEditorLayoutStore {\n\tprivate static readonly _key = 'mergeEditor/layout';\n\tprivate _value: IMergeEditorLayout = { kind: 'mixed', showBase: false, showBaseAtTop: true };\n\n\tconstructor(@IStorageService private _storageService: IStorageService) {\n\t\tconst value = _storageService.get(MergeEditorLayoutStore._key, StorageScope.PROFILE, 'mixed');\n\n\t\tif (value === 'mixed' || value === 'columns') {\n\t\t\tthis._value = { kind: value, showBase: false, showBaseAtTop: true };\n\t\t} else if (value) {\n\t\t\ttry {\n\t\t\t\tthis._value = JSON.parse(value);\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tget value() {\n\t\treturn this._value;\n\t}\n\n\tset value(value: IMergeEditorLayout) {\n\t\tif (this._value !== value) {\n\t\t\tthis._value = value;\n\t\t\tthis._storageService.store(MergeEditorLayoutStore._key, JSON.stringify(this._value), StorageScope.PROFILE, StorageTarget.USER);\n\t\t}\n\t}\n}\n\nexport class MergeEditorOpenHandlerContribution extends Disposable {\n\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t) {\n\t\tsuper();\n\t\tthis._store.add(codeEditorService.registerCodeEditorOpenHandler(this.openCodeEditorFromMergeEditor.bind(this)));\n\t}\n\n\tprivate async openCodeEditorFromMergeEditor(input: ITextResourceEditorInput, _source: ICodeEditor | null, sideBySide?: boolean | undefined): Promise<ICodeEditor | null> {\n\t\tconst activePane = this._editorService.activeEditorPane;\n\t\tif (!sideBySide\n\t\t\t&& input.options\n\t\t\t&& activePane instanceof MergeEditor\n\t\t\t&& activePane.getControl()\n\t\t\t&& activePane.input instanceof MergeEditorInput\n\t\t\t&& isEqual(input.resource, activePane.input.result)\n\t\t) {\n\t\t\t// Special: stay inside the merge editor when it is active and when the input\n\t\t\t// targets the result editor of the merge editor.\n\t\t\tconst targetEditor = <ICodeEditor>activePane.getControl()!;\n\t\t\tapplyTextEditorOptions(input.options, targetEditor, ScrollType.Smooth);\n\t\t\treturn targetEditor;\n\t\t}\n\n\t\t// cannot handle this\n\t\treturn null;\n\t}\n}\n\nexport class MergeEditorResolverContribution extends Disposable {\n\n\tstatic readonly ID = 'workbench.contrib.mergeEditorResolver';\n\n\tconstructor(\n\t\t@IEditorResolverService editorResolverService: IEditorResolverService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tconst mergeEditorInputFactory: MergeEditorInputFactoryFunction = (mergeEditor: IResourceMergeEditorInput): EditorInputWithOptions => {\n\t\t\treturn {\n\t\t\t\teditor: instantiationService.createInstance(\n\t\t\t\t\tMergeEditorInput,\n\t\t\t\t\tmergeEditor.base.resource,\n\t\t\t\t\t{\n\t\t\t\t\t\turi: mergeEditor.input1.resource,\n\t\t\t\t\t\ttitle: mergeEditor.input1.label ?? basename(mergeEditor.input1.resource),\n\t\t\t\t\t\tdescription: mergeEditor.input1.description ?? '',\n\t\t\t\t\t\tdetail: mergeEditor.input1.detail\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turi: mergeEditor.input2.resource,\n\t\t\t\t\t\ttitle: mergeEditor.input2.label ?? basename(mergeEditor.input2.resource),\n\t\t\t\t\t\tdescription: mergeEditor.input2.description ?? '',\n\t\t\t\t\t\tdetail: mergeEditor.input2.detail\n\t\t\t\t\t},\n\t\t\t\t\tmergeEditor.result.resource\n\t\t\t\t)\n\t\t\t};\n\t\t};\n\n\t\tthis._register(editorResolverService.registerEditor(\n\t\t\t`*`,\n\t\t\t{\n\t\t\t\tid: DEFAULT_EDITOR_ASSOCIATION.id,\n\t\t\t\tlabel: DEFAULT_EDITOR_ASSOCIATION.displayName,\n\t\t\t\tdetail: DEFAULT_EDITOR_ASSOCIATION.providerDisplayName,\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateMergeEditorInput: mergeEditorInputFactory\n\t\t\t}\n\t\t));\n\t}\n}\n\ntype IMergeEditorViewState = ICodeEditorViewState & {\n\treadonly input1State?: ICodeEditorViewState;\n\treadonly input2State?: ICodeEditorViewState;\n\treadonly focusIndex: number;\n};\n"]}