{"version":3,"sources":["vs/workbench/contrib/mergeEditor/browser/view/editors/resultCodeEditorView.ts"],"names":[],"mappings":"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","file":"resultCodeEditorView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { reset } from '../../../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { renderLabelWithIcons } from '../../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { CompareResult } from '../../../../../../base/common/arrays.js';\nimport { BugIndicatingError } from '../../../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, IObservable } from '../../../../../../base/common/observable.js';\nimport { IModelDeltaDecoration, MinimapPosition, OverviewRulerLane } from '../../../../../../editor/common/model.js';\nimport { localize } from '../../../../../../nls.js';\nimport { MenuId } from '../../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../../../platform/label/common/label.js';\nimport { MergeEditorLineRange } from '../../model/lineRange.js';\nimport { applyObservableDecorations, join } from '../../utils.js';\nimport { handledConflictMinimapOverViewRulerColor, unhandledConflictMinimapOverViewRulerColor } from '../colors.js';\nimport { EditorGutter } from '../editorGutter.js';\nimport { MergeEditorViewModel } from '../viewModel.js';\nimport { ctxIsMergeResultEditor } from '../../../common/mergeEditor.js';\nimport { CodeEditorView, createSelectionsAutorun, TitleMenu } from './codeEditorView.js';\n\nexport class ResultCodeEditorView extends CodeEditorView {\n\tconstructor(\n\t\tviewModel: IObservable<MergeEditorViewModel | undefined>,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(instantiationService, viewModel, configurationService);\n\n\t\tthis.editor.invokeWithinContext(accessor => {\n\t\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\t\t\tconst isMergeResultEditor = ctxIsMergeResultEditor.bindTo(contextKeyService);\n\t\t\tisMergeResultEditor.set(true);\n\t\t\tthis._register(toDisposable(() => isMergeResultEditor.reset()));\n\t\t});\n\n\t\tthis.htmlElements.gutterDiv.style.width = '5px';\n\t\tthis.htmlElements.root.classList.add(`result`);\n\n\t\tthis._register(\n\t\t\tautorunWithStore((reader, store) => {\n\t\t\t\t/** @description update checkboxes */\n\t\t\t\tif (this.checkboxesVisible.read(reader)) {\n\t\t\t\t\tstore.add(new EditorGutter(this.editor, this.htmlElements.gutterDiv, {\n\t\t\t\t\t\tgetIntersectingGutterItems: (range, reader) => [],\n\t\t\t\t\t\tcreateView: (item, target) => { throw new BugIndicatingError(); },\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update labels & text model */\n\t\t\tconst vm = this.viewModel.read(reader);\n\t\t\tif (!vm) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.editor.setModel(vm.model.resultTextModel);\n\t\t\treset(this.htmlElements.title, ...renderLabelWithIcons(localize('result', 'Result')));\n\t\t\treset(this.htmlElements.description, ...renderLabelWithIcons(this._labelService.getUriLabel(vm.model.resultTextModel.uri, { relative: true })));\n\t\t}));\n\n\n\t\tconst remainingConflictsActionBar = this._register(new ActionBar(this.htmlElements.detail));\n\n\t\tthis._register(autorun(reader => {\n\t\t\t/** @description update remainingConflicts label */\n\t\t\tconst vm = this.viewModel.read(reader);\n\t\t\tif (!vm) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst model = vm.model;\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst count = model.unhandledConflictsCount.read(reader);\n\n\t\t\tconst text = count === 1\n\t\t\t\t? localize(\n\t\t\t\t\t'mergeEditor.remainingConflicts',\n\t\t\t\t\t'{0} Conflict Remaining',\n\t\t\t\t\tcount\n\t\t\t\t)\n\t\t\t\t: localize(\n\t\t\t\t\t'mergeEditor.remainingConflict',\n\t\t\t\t\t'{0} Conflicts Remaining ',\n\t\t\t\t\tcount\n\t\t\t\t);\n\n\t\t\tremainingConflictsActionBar.clear();\n\t\t\tremainingConflictsActionBar.push({\n\t\t\t\tclass: undefined,\n\t\t\t\tenabled: count > 0,\n\t\t\t\tid: 'nextConflict',\n\t\t\t\tlabel: text,\n\t\t\t\trun() {\n\t\t\t\t\tvm.model.telemetry.reportConflictCounterClicked();\n\t\t\t\t\tvm.goToNextModifiedBaseRange(m => !model.isHandled(m).read(undefined));\n\t\t\t\t},\n\t\t\t\ttooltip: count > 0\n\t\t\t\t\t? localize('goToNextConflict', 'Go to next conflict')\n\t\t\t\t\t: localize('allConflictHandled', 'All conflicts handled, the merge can be completed now.'),\n\t\t\t});\n\t\t}));\n\n\n\t\tthis._register(applyObservableDecorations(this.editor, this.decorations));\n\n\t\tthis._register(\n\t\t\tcreateSelectionsAutorun(this, (baseRange, viewModel) =>\n\t\t\t\tviewModel.model.translateBaseRangeToResult(baseRange)\n\t\t\t)\n\t\t);\n\n\t\tthis._register(\n\t\t\tinstantiationService.createInstance(\n\t\t\t\tTitleMenu,\n\t\t\t\tMenuId.MergeInputResultToolbar,\n\t\t\t\tthis.htmlElements.toolbar\n\t\t\t)\n\t\t);\n\t}\n\n\tprivate readonly decorations = derived(this, reader => {\n\t\tconst viewModel = this.viewModel.read(reader);\n\t\tif (!viewModel) {\n\t\t\treturn [];\n\t\t}\n\t\tconst model = viewModel.model;\n\t\tconst textModel = model.resultTextModel;\n\t\tconst result = new Array<IModelDeltaDecoration>();\n\n\t\tconst baseRangeWithStoreAndTouchingDiffs = join(\n\t\t\tmodel.modifiedBaseRanges.read(reader),\n\t\t\tmodel.baseResultDiffs.read(reader),\n\t\t\t(baseRange, diff) => baseRange.baseRange.intersectsOrTouches(diff.inputRange)\n\t\t\t\t? CompareResult.neitherLessOrGreaterThan\n\t\t\t\t: MergeEditorLineRange.compareByStart(\n\t\t\t\t\tbaseRange.baseRange,\n\t\t\t\t\tdiff.inputRange\n\t\t\t\t)\n\t\t);\n\n\t\tconst activeModifiedBaseRange = viewModel.activeModifiedBaseRange.read(reader);\n\n\t\tconst showNonConflictingChanges = viewModel.showNonConflictingChanges.read(reader);\n\n\t\tfor (const m of baseRangeWithStoreAndTouchingDiffs) {\n\t\t\tconst modifiedBaseRange = m.left;\n\n\t\t\tif (modifiedBaseRange) {\n\t\t\t\tconst blockClassNames = ['merge-editor-block'];\n\t\t\t\tlet blockPadding: [top: number, right: number, bottom: number, left: number] = [0, 0, 0, 0];\n\t\t\t\tconst isHandled = model.isHandled(modifiedBaseRange).read(reader);\n\t\t\t\tif (isHandled) {\n\t\t\t\t\tblockClassNames.push('handled');\n\t\t\t\t}\n\t\t\t\tif (modifiedBaseRange === activeModifiedBaseRange) {\n\t\t\t\t\tblockClassNames.push('focused');\n\t\t\t\t\tblockPadding = [0, 2, 0, 2];\n\t\t\t\t}\n\t\t\t\tif (modifiedBaseRange.isConflicting) {\n\t\t\t\t\tblockClassNames.push('conflicting');\n\t\t\t\t}\n\t\t\t\tblockClassNames.push('result');\n\n\t\t\t\tif (!modifiedBaseRange.isConflicting && !showNonConflictingChanges && isHandled) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst range = model.getLineRangeInResult(modifiedBaseRange.baseRange, reader);\n\t\t\t\tresult.push({\n\t\t\t\t\trange: range.toInclusiveRangeOrEmpty(),\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tshowIfCollapsed: true,\n\t\t\t\t\t\tblockClassName: blockClassNames.join(' '),\n\t\t\t\t\t\tblockPadding,\n\t\t\t\t\t\tblockIsAfterEnd: range.startLineNumber > textModel.getLineCount(),\n\t\t\t\t\t\tdescription: 'Result Diff',\n\t\t\t\t\t\tminimap: {\n\t\t\t\t\t\t\tposition: MinimapPosition.Gutter,\n\t\t\t\t\t\t\tcolor: { id: isHandled ? handledConflictMinimapOverViewRulerColor : unhandledConflictMinimapOverViewRulerColor },\n\t\t\t\t\t\t},\n\t\t\t\t\t\toverviewRuler: modifiedBaseRange.isConflicting ? {\n\t\t\t\t\t\t\tposition: OverviewRulerLane.Center,\n\t\t\t\t\t\t\tcolor: { id: isHandled ? handledConflictMinimapOverViewRulerColor : unhandledConflictMinimapOverViewRulerColor },\n\t\t\t\t\t\t} : undefined\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!modifiedBaseRange || modifiedBaseRange.isConflicting) {\n\t\t\t\tfor (const diff of m.rights) {\n\t\t\t\t\tconst range = diff.outputRange.toInclusiveRange();\n\t\t\t\t\tif (range) {\n\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\trange,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tclassName: `merge-editor-diff result`,\n\t\t\t\t\t\t\t\tdescription: 'Merge Editor',\n\t\t\t\t\t\t\t\tisWholeLine: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (diff.rangeMappings) {\n\t\t\t\t\t\tfor (const d of diff.rangeMappings) {\n\t\t\t\t\t\t\tresult.push({\n\t\t\t\t\t\t\t\trange: d.outputRange,\n\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\tclassName: `merge-editor-diff-word result`,\n\t\t\t\t\t\t\t\t\tdescription: 'Merge Editor'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t});\n}\n"]}