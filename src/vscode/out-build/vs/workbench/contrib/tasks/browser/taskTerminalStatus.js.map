{"version":3,"sources":["vs/workbench/contrib/tasks/browser/taskTerminalStatus.ts"],"names":[],"mappings":"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","file":"taskTerminalStatus.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, IDisposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { AbstractProblemCollector, StartStopProblemCollector } from '../common/problemCollectors.js';\nimport { ITaskGeneralEvent, ITaskProcessEndedEvent, ITaskProcessStartedEvent, TaskEventKind, TaskRunType } from '../common/tasks.js';\nimport { ITaskService, Task } from '../common/taskService.js';\nimport { ITerminalInstance } from '../../terminal/browser/terminal.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { spinningLoading } from '../../../../platform/theme/common/iconRegistry.js';\nimport type { IMarker } from '@xterm/xterm';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { ITerminalStatus } from '../../terminal/common/terminal.js';\n\ninterface ITerminalData {\n\tterminal: ITerminalInstance;\n\ttask: Task;\n\tstatus: ITerminalStatus;\n\tproblemMatcher: AbstractProblemCollector;\n\ttaskRunEnded: boolean;\n\tdisposeListener?: MutableDisposable<IDisposable>;\n}\n\nconst TASK_TERMINAL_STATUS_ID = 'task_terminal_status';\nexport const ACTIVE_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: spinningLoading, severity: Severity.Info, tooltip: nls.localize('taskTerminalStatus.active', \"Task is running\") };\nexport const SUCCEEDED_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.check, severity: Severity.Info, tooltip: nls.localize('taskTerminalStatus.succeeded', \"Task succeeded\") };\nconst SUCCEEDED_INACTIVE_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.check, severity: Severity.Info, tooltip: nls.localize('taskTerminalStatus.succeededInactive', \"Task succeeded and waiting...\") };\nexport const FAILED_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.error, severity: Severity.Error, tooltip: nls.localize('taskTerminalStatus.errors', \"Task has errors\") };\nconst FAILED_INACTIVE_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.error, severity: Severity.Error, tooltip: nls.localize('taskTerminalStatus.errorsInactive', \"Task has errors and is waiting...\") };\nconst WARNING_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.warning, severity: Severity.Warning, tooltip: nls.localize('taskTerminalStatus.warnings', \"Task has warnings\") };\nconst WARNING_INACTIVE_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.warning, severity: Severity.Warning, tooltip: nls.localize('taskTerminalStatus.warningsInactive', \"Task has warnings and is waiting...\") };\nconst INFO_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.info, severity: Severity.Info, tooltip: nls.localize('taskTerminalStatus.infos', \"Task has infos\") };\nconst INFO_INACTIVE_TASK_STATUS: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, icon: Codicon.info, severity: Severity.Info, tooltip: nls.localize('taskTerminalStatus.infosInactive', \"Task has infos and is waiting...\") };\n\nexport class TaskTerminalStatus extends Disposable {\n\tprivate terminalMap: Map<number, ITerminalData> = new Map();\n\tprivate _marker: IMarker | undefined;\n\tconstructor(@ITaskService taskService: ITaskService, @IAccessibilitySignalService private readonly _accessibilitySignalService: IAccessibilitySignalService) {\n\t\tsuper();\n\t\tthis._register(taskService.onDidStateChange((event) => {\n\t\t\tswitch (event.kind) {\n\t\t\t\tcase TaskEventKind.ProcessStarted:\n\t\t\t\tcase TaskEventKind.Active: this.eventActive(event); break;\n\t\t\t\tcase TaskEventKind.Inactive: this.eventInactive(event); break;\n\t\t\t\tcase TaskEventKind.ProcessEnded: this.eventEnd(event); break;\n\t\t\t}\n\t\t}));\n\t\tthis._register(toDisposable(() => {\n\t\t\tfor (const terminalData of this.terminalMap.values()) {\n\t\t\t\tterminalData.disposeListener?.dispose();\n\t\t\t}\n\t\t\tthis.terminalMap.clear();\n\t\t}));\n\t}\n\n\taddTerminal(task: Task, terminal: ITerminalInstance, problemMatcher: AbstractProblemCollector) {\n\t\tconst status: ITerminalStatus = { id: TASK_TERMINAL_STATUS_ID, severity: Severity.Info };\n\t\tterminal.statusList.add(status);\n\t\tthis._register(problemMatcher.onDidFindFirstMatch(() => {\n\t\t\tthis._marker = terminal.registerMarker();\n\t\t\tif (this._marker) {\n\t\t\t\tthis._register(this._marker);\n\t\t\t}\n\t\t}));\n\t\tthis._register(problemMatcher.onDidFindErrors(() => {\n\t\t\tif (this._marker) {\n\t\t\t\tterminal.addBufferMarker({ marker: this._marker, hoverMessage: nls.localize('task.watchFirstError', \"Beginning of detected errors for this run\"), disableCommandStorage: true });\n\t\t\t}\n\t\t}));\n\t\tthis._register(problemMatcher.onDidRequestInvalidateLastMarker(() => {\n\t\t\tthis._marker?.dispose();\n\t\t\tthis._marker = undefined;\n\t\t}));\n\n\t\tthis.terminalMap.set(terminal.instanceId, { terminal, task, status, problemMatcher, taskRunEnded: false });\n\t}\n\n\tprivate terminalFromEvent(event: { terminalId: number | undefined }): ITerminalData | undefined {\n\t\tif (!('terminalId' in event) || !event.terminalId) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.terminalMap.get(event.terminalId);\n\t}\n\n\tprivate eventEnd(event: ITaskProcessEndedEvent) {\n\t\tconst terminalData = this.terminalFromEvent(event);\n\t\tif (!terminalData) {\n\t\t\treturn;\n\t\t}\n\t\tterminalData.taskRunEnded = true;\n\t\tterminalData.terminal.statusList.remove(terminalData.status);\n\t\tif ((event.exitCode === 0) && (!terminalData.problemMatcher.maxMarkerSeverity || terminalData.problemMatcher.maxMarkerSeverity < MarkerSeverity.Warning)) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.taskCompleted);\n\t\t\tif (terminalData.task.configurationProperties.isBackground) {\n\t\t\t\tfor (const status of terminalData.terminal.statusList.statuses) {\n\t\t\t\t\tterminalData.terminal.statusList.remove(status);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tterminalData.terminal.statusList.add(SUCCEEDED_TASK_STATUS);\n\t\t\t}\n\t\t} else if (event.exitCode || (terminalData.problemMatcher.maxMarkerSeverity !== undefined && terminalData.problemMatcher.maxMarkerSeverity === MarkerSeverity.Error)) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.taskFailed);\n\t\t\tterminalData.terminal.statusList.add(FAILED_TASK_STATUS);\n\t\t} else if (terminalData.problemMatcher.maxMarkerSeverity === MarkerSeverity.Warning) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.taskFailed);\n\t\t\tterminalData.terminal.statusList.add(WARNING_TASK_STATUS);\n\t\t} else if (terminalData.problemMatcher.maxMarkerSeverity === MarkerSeverity.Info) {\n\t\t\tterminalData.terminal.statusList.add(INFO_TASK_STATUS);\n\t\t}\n\t}\n\n\tprivate eventInactive(event: ITaskGeneralEvent) {\n\t\tconst terminalData = this.terminalFromEvent(event);\n\t\tif (!terminalData || !terminalData.problemMatcher || terminalData.taskRunEnded) {\n\t\t\treturn;\n\t\t}\n\t\tterminalData.terminal.statusList.remove(terminalData.status);\n\t\tif (terminalData.problemMatcher.numberOfMatches === 0) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.taskCompleted);\n\t\t\tterminalData.terminal.statusList.add(SUCCEEDED_INACTIVE_TASK_STATUS);\n\t\t} else if (terminalData.problemMatcher.maxMarkerSeverity === MarkerSeverity.Error) {\n\t\t\tthis._accessibilitySignalService.playSignal(AccessibilitySignal.taskFailed);\n\t\t\tterminalData.terminal.statusList.add(FAILED_INACTIVE_TASK_STATUS);\n\t\t} else if (terminalData.problemMatcher.maxMarkerSeverity === MarkerSeverity.Warning) {\n\t\t\tterminalData.terminal.statusList.add(WARNING_INACTIVE_TASK_STATUS);\n\t\t} else if (terminalData.problemMatcher.maxMarkerSeverity === MarkerSeverity.Info) {\n\t\t\tterminalData.terminal.statusList.add(INFO_INACTIVE_TASK_STATUS);\n\t\t}\n\t}\n\n\tprivate eventActive(event: ITaskGeneralEvent | ITaskProcessStartedEvent) {\n\t\tconst terminalData = this.terminalFromEvent(event);\n\t\tif (!terminalData) {\n\t\t\treturn;\n\t\t}\n\t\tif (!terminalData.disposeListener) {\n\t\t\tterminalData.disposeListener = this._register(new MutableDisposable());\n\t\t\tterminalData.disposeListener.value = terminalData.terminal.onDisposed(() => {\n\t\t\t\tif (!event.terminalId) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.terminalMap.delete(event.terminalId);\n\t\t\t\tterminalData.disposeListener?.dispose();\n\t\t\t});\n\t\t}\n\t\tterminalData.taskRunEnded = false;\n\t\tterminalData.terminal.statusList.remove(terminalData.status);\n\t\t// We don't want to show an infinite status for a background task that doesn't have a problem matcher.\n\t\tif ((terminalData.problemMatcher instanceof StartStopProblemCollector) || (terminalData.problemMatcher?.problemMatchers.length > 0) || event.runType === TaskRunType.SingleRun) {\n\t\t\tterminalData.terminal.statusList.add(ACTIVE_TASK_STATUS);\n\t\t}\n\t}\n}\n"]}