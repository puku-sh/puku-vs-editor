{"version":3,"sources":["vs/workbench/contrib/tasks/browser/runAutomaticTasks.ts"],"names":[],"mappings":"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","file":"runAutomaticTasks.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { ITaskService, IWorkspaceFolderTaskResult } from '../common/taskService.js';\nimport { RunOnOptions, Task, TaskRunSource, TaskSource, TaskSourceKind, TASKS_CATEGORY, WorkspaceFileTaskSource, IWorkspaceTaskSource } from '../common/tasks.js';\nimport { IQuickPickItem, IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { Action2 } from '../../../../platform/actions/common/actions.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\n\nconst ALLOW_AUTOMATIC_TASKS = 'task.allowAutomaticTasks';\n\nexport class RunAutomaticTasks extends Disposable implements IWorkbenchContribution {\n\tprivate _hasRunTasks: boolean = false;\n\tconstructor(\n\t\t@ITaskService private readonly _taskService: ITaskService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IWorkspaceTrustManagementService private readonly _workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@ILogService private readonly _logService: ILogService) {\n\t\tsuper();\n\t\tif (this._taskService.isReconnected) {\n\t\t\tthis._tryRunTasks();\n\t\t} else {\n\t\t\tthis._register(Event.once(this._taskService.onDidReconnectToTasks)(async () => await this._tryRunTasks()));\n\t\t}\n\t\tthis._register(this._workspaceTrustManagementService.onDidChangeTrust(async () => await this._tryRunTasks()));\n\t}\n\n\tprivate async _tryRunTasks() {\n\t\tif (!this._workspaceTrustManagementService.isWorkspaceTrusted()) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._hasRunTasks || this._configurationService.getValue(ALLOW_AUTOMATIC_TASKS) === 'off') {\n\t\t\treturn;\n\t\t}\n\t\tthis._hasRunTasks = true;\n\t\tthis._logService.trace('RunAutomaticTasks: Trying to run tasks.');\n\t\t// Wait until we have task system info (the extension host and workspace folders are available).\n\t\tif (!this._taskService.hasTaskSystemInfo) {\n\t\t\tthis._logService.trace('RunAutomaticTasks: Awaiting task system info.');\n\t\t\tawait Event.toPromise(Event.once(this._taskService.onDidChangeTaskSystemInfo));\n\t\t}\n\t\tlet workspaceTasks = await this._taskService.getWorkspaceTasks(TaskRunSource.FolderOpen);\n\t\tthis._logService.trace(`RunAutomaticTasks: Found ${workspaceTasks.size} automatic tasks`);\n\n\t\tlet autoTasks = this._findAutoTasks(this._taskService, workspaceTasks);\n\t\tthis._logService.trace(`RunAutomaticTasks: taskNames=${JSON.stringify(autoTasks.taskNames)}`);\n\n\t\t// As seen in some cases with the Remote SSH extension, the tasks configuration is loaded after we have come\n\t\t// to this point. Let's give it some extra time.\n\t\tif (autoTasks.taskNames.length === 0) {\n\t\t\tconst updatedWithinTimeout = await Promise.race([\n\t\t\t\tnew Promise<boolean>((resolve) => {\n\t\t\t\t\tEvent.toPromise(Event.once(this._taskService.onDidChangeTaskConfig)).then(() => resolve(true));\n\t\t\t\t}),\n\t\t\t\tnew Promise<boolean>((resolve) => {\n\t\t\t\t\tconst timer = setTimeout(() => { clearTimeout(timer); resolve(false); }, 10000);\n\t\t\t\t})]);\n\n\t\t\tif (!updatedWithinTimeout) {\n\t\t\t\tthis._logService.trace(`RunAutomaticTasks: waited some extra time, but no update of tasks configuration`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tworkspaceTasks = await this._taskService.getWorkspaceTasks(TaskRunSource.FolderOpen);\n\t\t\tautoTasks = this._findAutoTasks(this._taskService, workspaceTasks);\n\t\t\tthis._logService.trace(`RunAutomaticTasks: updated taskNames=${JSON.stringify(autoTasks.taskNames)}`);\n\t\t}\n\n\t\tthis._runWithPermission(this._taskService, this._configurationService, autoTasks.tasks, autoTasks.taskNames);\n\t}\n\n\tprivate _runTasks(taskService: ITaskService, tasks: Array<Task | Promise<Task | undefined>>) {\n\t\ttasks.forEach(task => {\n\t\t\tif (task instanceof Promise) {\n\t\t\t\ttask.then(promiseResult => {\n\t\t\t\t\tif (promiseResult) {\n\t\t\t\t\t\ttaskService.run(promiseResult);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttaskService.run(task);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _getTaskSource(source: TaskSource): URI | undefined {\n\t\tconst taskKind = TaskSourceKind.toConfigurationTarget(source.kind);\n\t\tswitch (taskKind) {\n\t\t\tcase ConfigurationTarget.WORKSPACE_FOLDER: {\n\t\t\t\treturn resources.joinPath((<IWorkspaceTaskSource>source).config.workspaceFolder!.uri, (<IWorkspaceTaskSource>source).config.file);\n\t\t\t}\n\t\t\tcase ConfigurationTarget.WORKSPACE: {\n\t\t\t\treturn (<WorkspaceFileTaskSource>source).config.workspace?.configuration ?? undefined;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate _findAutoTasks(taskService: ITaskService, workspaceTaskResult: Map<string, IWorkspaceFolderTaskResult>): { tasks: Array<Task | Promise<Task | undefined>>; taskNames: Array<string>; locations: Map<string, URI> } {\n\t\tconst tasks = new Array<Task | Promise<Task | undefined>>();\n\t\tconst taskNames = new Array<string>();\n\t\tconst locations = new Map<string, URI>();\n\n\t\tif (workspaceTaskResult) {\n\t\t\tworkspaceTaskResult.forEach(resultElement => {\n\t\t\t\tif (resultElement.set) {\n\t\t\t\t\tresultElement.set.tasks.forEach(task => {\n\t\t\t\t\t\tif (task.runOptions.runOn === RunOnOptions.folderOpen) {\n\t\t\t\t\t\t\ttasks.push(task);\n\t\t\t\t\t\t\ttaskNames.push(task._label);\n\t\t\t\t\t\t\tconst location = this._getTaskSource(task._source);\n\t\t\t\t\t\t\tif (location) {\n\t\t\t\t\t\t\t\tlocations.set(location.fsPath, location);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (resultElement.configurations) {\n\t\t\t\t\tfor (const configuredTask of Object.values(resultElement.configurations.byIdentifier)) {\n\t\t\t\t\t\tif (configuredTask.runOptions.runOn === RunOnOptions.folderOpen) {\n\t\t\t\t\t\t\ttasks.push(new Promise<Task | undefined>(resolve => {\n\t\t\t\t\t\t\t\ttaskService.getTask(resultElement.workspaceFolder, configuredTask._id, true).then(task => resolve(task));\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\tif (configuredTask._label) {\n\t\t\t\t\t\t\t\ttaskNames.push(configuredTask._label);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttaskNames.push(configuredTask.configures.task);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst location = this._getTaskSource(configuredTask._source);\n\t\t\t\t\t\t\tif (location) {\n\t\t\t\t\t\t\t\tlocations.set(location.fsPath, location);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn { tasks, taskNames, locations };\n\t}\n\n\tprivate async _runWithPermission(taskService: ITaskService, configurationService: IConfigurationService, tasks: (Task | Promise<Task | undefined>)[], taskNames: string[]) {\n\t\tif (taskNames.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (configurationService.getValue(ALLOW_AUTOMATIC_TASKS) === 'off') {\n\t\t\treturn;\n\t\t}\n\t\tthis._runTasks(taskService, tasks);\n\t}\n}\n\nexport class ManageAutomaticTaskRunning extends Action2 {\n\n\tpublic static readonly ID = 'workbench.action.tasks.manageAutomaticRunning';\n\tpublic static readonly LABEL = nls.localize('workbench.action.tasks.manageAutomaticRunning', \"Manage Automatic Tasks\");\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ManageAutomaticTaskRunning.ID,\n\t\t\ttitle: ManageAutomaticTaskRunning.LABEL,\n\t\t\tcategory: TASKS_CATEGORY\n\t\t});\n\t}\n\n\tpublic async run(accessor: ServicesAccessor): Promise<any> {\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst allowItem: IQuickPickItem = { label: nls.localize('workbench.action.tasks.allowAutomaticTasks', \"Allow Automatic Tasks\") };\n\t\tconst disallowItem: IQuickPickItem = { label: nls.localize('workbench.action.tasks.disallowAutomaticTasks', \"Disallow Automatic Tasks\") };\n\t\tconst value = await quickInputService.pick([allowItem, disallowItem], { canPickMany: false });\n\t\tif (!value) {\n\t\t\treturn;\n\t\t}\n\t\tconfigurationService.updateValue(ALLOW_AUTOMATIC_TASKS, value === allowItem ? 'on' : 'off', ConfigurationTarget.USER);\n\t}\n}\n"]}