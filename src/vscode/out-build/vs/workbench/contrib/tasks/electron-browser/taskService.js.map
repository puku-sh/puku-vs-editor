{"version":3,"sources":["vs/workbench/contrib/tasks/electron-browser/taskService.ts"],"names":[],"mappings":"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","file":"taskService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as semver from '../../../../base/common/semver/semver.js';\nimport { IWorkspaceFolder, IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { ITaskSystem } from '../common/taskSystem.js';\nimport { ExecutionEngine } from '../common/tasks.js';\nimport * as TaskConfig from '../common/taskConfiguration.js';\nimport { AbstractTaskService } from '../browser/abstractTaskService.js';\nimport { ITaskFilter, ITaskService } from '../common/taskService.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { TerminalTaskSystem } from '../browser/terminalTaskSystem.js';\nimport { IConfirmationResult, IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { TerminateResponseCode } from '../../../../base/common/processes.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { IOutputService } from '../../../services/output/common/output.js';\nimport { ITerminalGroupService, ITerminalService } from '../../terminal/browser/terminal.js';\nimport { IConfigurationResolverService } from '../../../services/configurationResolver/common/configurationResolver.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { IWorkspaceTrustManagementService, IWorkspaceTrustRequestService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { ITerminalProfileResolverService } from '../../terminal/common/terminal.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IChatService } from '../../chat/common/chatService.js';\nimport { IChatAgentService } from '../../chat/common/chatAgents.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\n\ninterface IWorkspaceFolderConfigurationResult {\n\tworkspaceFolder: IWorkspaceFolder;\n\tconfig: TaskConfig.IExternalTaskRunnerConfiguration | undefined;\n\thasErrors: boolean;\n}\n\nexport class TaskService extends AbstractTaskService {\n\tconstructor(@IConfigurationService configurationService: IConfigurationService,\n\t\t@IMarkerService markerService: IMarkerService,\n\t\t@IOutputService outputService: IOutputService,\n\t\t@IPaneCompositePartService paneCompositeService: IPaneCompositePartService,\n\t\t@IViewsService viewsService: IViewsService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IModelService modelService: IModelService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@IConfigurationResolverService configurationResolverService: IConfigurationResolverService,\n\t\t@ITerminalService terminalService: ITerminalService,\n\t\t@ITerminalGroupService terminalGroupService: ITerminalGroupService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@ITerminalProfileResolverService terminalProfileResolverService: ITerminalProfileResolverService,\n\t\t@IPathService pathService: IPathService,\n\t\t@ITextModelService textModelResolverService: ITextModelService,\n\t\t@IPreferencesService preferencesService: IPreferencesService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IWorkspaceTrustRequestService workspaceTrustRequestService: IWorkspaceTrustRequestService,\n\t\t@IWorkspaceTrustManagementService workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@ILogService logService: ILogService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@IAccessibilitySignalService accessibilitySignalService: IAccessibilitySignalService,\n\t\t@IChatService _chatService: IChatService,\n\t\t@IChatAgentService _chatAgentService: IChatAgentService,\n\t\t@IHostService _hostService: IHostService\n\t) {\n\t\tsuper(configurationService,\n\t\t\tmarkerService,\n\t\t\toutputService,\n\t\t\tpaneCompositeService,\n\t\t\tviewsService,\n\t\t\tcommandService,\n\t\t\teditorService,\n\t\t\tfileService,\n\t\t\tcontextService,\n\t\t\ttelemetryService,\n\t\t\ttextFileService,\n\t\t\tmodelService,\n\t\t\textensionService,\n\t\t\tquickInputService,\n\t\t\tconfigurationResolverService,\n\t\t\tterminalService,\n\t\t\tterminalGroupService,\n\t\t\tstorageService,\n\t\t\tprogressService,\n\t\t\topenerService,\n\t\t\tdialogService,\n\t\t\tnotificationService,\n\t\t\tcontextKeyService,\n\t\t\tenvironmentService,\n\t\t\tterminalProfileResolverService,\n\t\t\tpathService,\n\t\t\ttextModelResolverService,\n\t\t\tpreferencesService,\n\t\t\tviewDescriptorService,\n\t\t\tworkspaceTrustRequestService,\n\t\t\tworkspaceTrustManagementService,\n\t\t\tlogService,\n\t\t\tthemeService,\n\t\t\tlifecycleService,\n\t\t\tremoteAgentService,\n\t\t\tinstantiationService,\n\t\t\t_chatService,\n\t\t\t_chatAgentService,\n\t\t\t_hostService\n\t\t);\n\t\tthis._register(lifecycleService.onBeforeShutdown(event => event.veto(this.beforeShutdown(), 'veto.tasks')));\n\t}\n\n\tprotected _getTaskSystem(): ITaskSystem {\n\t\tif (this._taskSystem) {\n\t\t\treturn this._taskSystem;\n\t\t}\n\t\tconst taskSystem = this._createTerminalTaskSystem();\n\t\tthis._taskSystem = taskSystem;\n\t\tthis._taskSystemListeners =\n\t\t\t[\n\t\t\t\tthis._taskSystem.onDidStateChange((event) => {\n\t\t\t\t\tthis._taskRunningState.set(this._taskSystem!.isActiveSync());\n\t\t\t\t\tthis._onDidStateChange.fire(event);\n\t\t\t\t})\n\t\t\t];\n\t\treturn this._taskSystem;\n\t}\n\n\tprotected _computeLegacyConfiguration(workspaceFolder: IWorkspaceFolder): Promise<IWorkspaceFolderConfigurationResult> {\n\t\tconst { config, hasParseErrors } = this._getConfiguration(workspaceFolder);\n\t\tif (hasParseErrors) {\n\t\t\treturn Promise.resolve({ workspaceFolder: workspaceFolder, hasErrors: true, config: undefined });\n\t\t}\n\t\tif (config) {\n\t\t\treturn Promise.resolve({ workspaceFolder, config, hasErrors: false });\n\t\t} else {\n\t\t\treturn Promise.resolve({ workspaceFolder: workspaceFolder, hasErrors: true, config: undefined });\n\t\t}\n\t}\n\n\tprotected _versionAndEngineCompatible(filter?: ITaskFilter): boolean {\n\t\tconst range = filter && filter.version ? filter.version : undefined;\n\t\tconst engine = this.executionEngine;\n\n\t\treturn (range === undefined) || ((semver.satisfies('0.1.0', range) && engine === ExecutionEngine.Process) || (semver.satisfies('2.0.0', range) && engine === ExecutionEngine.Terminal));\n\t}\n\n\tpublic beforeShutdown(): boolean | Promise<boolean> {\n\t\tif (!this._taskSystem) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!this._taskSystem.isActiveSync()) {\n\t\t\treturn false;\n\t\t}\n\t\t// The terminal service kills all terminal on shutdown. So there\n\t\t// is nothing we can do to prevent this here.\n\t\tif (this._taskSystem instanceof TerminalTaskSystem) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet terminatePromise: Promise<IConfirmationResult>;\n\t\tif (this._taskSystem.canAutoTerminate()) {\n\t\t\tterminatePromise = Promise.resolve({ confirmed: true });\n\t\t} else {\n\t\t\tterminatePromise = this._dialogService.confirm({\n\t\t\t\tmessage: nls.localize('TaskSystem.runningTask', 'There is a task running. Do you want to terminate it?'),\n\t\t\t\tprimaryButton: nls.localize({ key: 'TaskSystem.terminateTask', comment: ['&& denotes a mnemonic'] }, \"&&Terminate Task\")\n\t\t\t});\n\t\t}\n\n\t\treturn terminatePromise.then(res => {\n\t\t\tif (res.confirmed) {\n\t\t\t\treturn this._taskSystem!.terminateAll().then((responses) => {\n\t\t\t\t\tlet success = true;\n\t\t\t\t\tlet code: number | undefined = undefined;\n\t\t\t\t\tfor (const response of responses) {\n\t\t\t\t\t\tsuccess = success && response.success;\n\t\t\t\t\t\t// We only have a code in the old output runner which only has one task\n\t\t\t\t\t\t// So we can use the first code.\n\t\t\t\t\t\tif (code === undefined && response.code !== undefined) {\n\t\t\t\t\t\t\tcode = response.code;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tthis._taskSystem = undefined;\n\t\t\t\t\t\tthis._disposeTaskSystemListeners();\n\t\t\t\t\t\treturn false; // no veto\n\t\t\t\t\t} else if (code && code === TerminateResponseCode.ProcessNotFound) {\n\t\t\t\t\t\treturn this._dialogService.confirm({\n\t\t\t\t\t\t\tmessage: nls.localize('TaskSystem.noProcess', 'The launched task doesn\\'t exist anymore. If the task spawned background processes exiting VS Code might result in orphaned processes. To avoid this start the last background process with a wait flag.'),\n\t\t\t\t\t\t\tprimaryButton: nls.localize({ key: 'TaskSystem.exitAnyways', comment: ['&& denotes a mnemonic'] }, \"&&Exit Anyways\"),\n\t\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t\t}).then(res => !res.confirmed);\n\t\t\t\t\t}\n\t\t\t\t\treturn true; // veto\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn true; // veto\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn true; // veto\n\t\t});\n\t}\n}\n\nregisterSingleton(ITaskService, TaskService, InstantiationType.Delayed);\n"]}