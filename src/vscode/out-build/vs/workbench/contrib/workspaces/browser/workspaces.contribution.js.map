{"version":3,"sources":["vs/workbench/contrib/workspaces/browser/workspaces.contribution.ts"],"names":[],"mappings":"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","file":"workspaces.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions as WorkbenchExtensions, IWorkbenchContributionsRegistry, IWorkbenchContribution } from '../../../common/contributions.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { hasWorkspaceFileExtension, IWorkspaceContextService, WorkbenchState, WORKSPACE_SUFFIX } from '../../../../platform/workspace/common/workspace.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { INeverShowAgainOptions, INotificationService, NeverShowAgainScope, NotificationPriority, Severity } from '../../../../platform/notification/common/notification.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { isEqual, joinPath } from '../../../../base/common/resources.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, StorageScope } from '../../../../platform/storage/common/storage.js';\nimport { isVirtualWorkspace } from '../../../../platform/workspace/common/virtualWorkspace.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { ActiveEditorContext, ResourceContextKey, TemporaryWorkspaceContext } from '../../../common/contextkeys.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { TEXT_FILE_EDITOR_ID } from '../../files/common/files.js';\n\n/**\n * A workbench contribution that will look for `.code-workspace` files in the root of the\n * workspace folder and open a notification to suggest to open one of the workspaces.\n */\nexport class WorkspacesFinderContribution extends Disposable implements IWorkbenchContribution {\n\n\tconstructor(\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IStorageService private readonly storageService: IStorageService\n\t) {\n\t\tsuper();\n\n\t\tthis.findWorkspaces();\n\t}\n\n\tprivate async findWorkspaces(): Promise<void> {\n\t\tconst folder = this.contextService.getWorkspace().folders[0];\n\t\tif (!folder || this.contextService.getWorkbenchState() !== WorkbenchState.FOLDER || isVirtualWorkspace(this.contextService.getWorkspace())) {\n\t\t\treturn; // require a single (non virtual) root folder\n\t\t}\n\n\t\tconst rootFileNames = (await this.fileService.resolve(folder.uri)).children?.map(child => child.name);\n\t\tif (Array.isArray(rootFileNames)) {\n\t\t\tconst workspaceFiles = rootFileNames.filter(hasWorkspaceFileExtension);\n\t\t\tif (workspaceFiles.length > 0) {\n\t\t\t\tthis.doHandleWorkspaceFiles(folder.uri, workspaceFiles);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate doHandleWorkspaceFiles(folder: URI, workspaces: string[]): void {\n\t\tconst neverShowAgain: INeverShowAgainOptions = { id: 'workspaces.dontPromptToOpen', scope: NeverShowAgainScope.WORKSPACE, isSecondary: true };\n\n\t\t// Prompt to open one workspace\n\t\tif (workspaces.length === 1) {\n\t\t\tconst workspaceFile = workspaces[0];\n\n\t\t\tthis.notificationService.prompt(Severity.Info, localize(\n\t\t\t\t{\n\t\t\t\t\tkey: 'foundWorkspace',\n\t\t\t\t\tcomment: ['{Locked=\"]({1})\"}']\n\t\t\t\t},\n\t\t\t\t\"This folder contains a workspace file '{0}'. Do you want to open it? [Learn more]({1}) about workspace files.\",\n\t\t\t\tworkspaceFile,\n\t\t\t\t'https://go.microsoft.com/fwlink/?linkid=2025315'\n\t\t\t), [{\n\t\t\t\tlabel: localize('openWorkspace', \"Open Workspace\"),\n\t\t\t\trun: () => this.hostService.openWindow([{ workspaceUri: joinPath(folder, workspaceFile) }])\n\t\t\t}], {\n\t\t\t\tneverShowAgain,\n\t\t\t\tpriority: !this.storageService.isNew(StorageScope.WORKSPACE) ? NotificationPriority.SILENT : NotificationPriority.OPTIONAL // https://github.com/microsoft/vscode/issues/125315\n\t\t\t});\n\t\t}\n\n\t\t// Prompt to select a workspace from many\n\t\telse if (workspaces.length > 1) {\n\t\t\tthis.notificationService.prompt(Severity.Info, localize({\n\t\t\t\tkey: 'foundWorkspaces',\n\t\t\t\tcomment: ['{Locked=\"]({0})\"}']\n\t\t\t}, \"This folder contains multiple workspace files. Do you want to open one? [Learn more]({0}) about workspace files.\", 'https://go.microsoft.com/fwlink/?linkid=2025315'), [{\n\t\t\t\tlabel: localize('selectWorkspace', \"Select Workspace\"),\n\t\t\t\trun: () => {\n\t\t\t\t\tthis.quickInputService.pick(\n\t\t\t\t\t\tworkspaces.map(workspace => ({ label: workspace } satisfies IQuickPickItem)),\n\t\t\t\t\t\t{ placeHolder: localize('selectToOpen', \"Select a workspace to open\") }).then(pick => {\n\t\t\t\t\t\t\tif (pick) {\n\t\t\t\t\t\t\t\tthis.hostService.openWindow([{ workspaceUri: joinPath(folder, pick.label) }]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}], {\n\t\t\t\tneverShowAgain,\n\t\t\t\tpriority: !this.storageService.isNew(StorageScope.WORKSPACE) ? NotificationPriority.SILENT : NotificationPriority.OPTIONAL // https://github.com/microsoft/vscode/issues/125315\n\t\t\t});\n\t\t}\n\t}\n}\n\nRegistry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench).registerWorkbenchContribution(WorkspacesFinderContribution, LifecyclePhase.Eventually);\n\n// Render \"Open Workspace\" button in *.code-workspace files\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.openWorkspaceFromEditor',\n\t\t\ttitle: localize2('openWorkspace', \"Open Workspace\"),\n\t\t\tf1: false,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.EditorContent,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tResourceContextKey.Extension.isEqualTo(WORKSPACE_SUFFIX),\n\t\t\t\t\tActiveEditorContext.isEqualTo(TEXT_FILE_EDITOR_ID),\n\t\t\t\t\tTemporaryWorkspaceContext.toNegated()\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, uri: URI): Promise<void> {\n\t\tconst hostService = accessor.get(IHostService);\n\t\tconst contextService = accessor.get(IWorkspaceContextService);\n\t\tconst notificationService = accessor.get(INotificationService);\n\n\t\tif (contextService.getWorkbenchState() === WorkbenchState.WORKSPACE) {\n\t\t\tconst workspaceConfiguration = contextService.getWorkspace().configuration;\n\t\t\tif (workspaceConfiguration && isEqual(workspaceConfiguration, uri)) {\n\t\t\t\tnotificationService.info(localize('alreadyOpen', \"This workspace is already open.\"));\n\n\t\t\t\treturn; // workspace already opened\n\t\t\t}\n\t\t}\n\n\t\treturn hostService.openWindow([{ workspaceUri: uri }]);\n\t}\n});\n"]}