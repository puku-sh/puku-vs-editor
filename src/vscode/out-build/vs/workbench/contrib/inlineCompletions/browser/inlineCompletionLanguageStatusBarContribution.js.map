{"version":3,"sources":["vs/workbench/contrib/inlineCompletions/browser/inlineCompletionLanguageStatusBarContribution.ts"],"names":[],"mappings":"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","file":"inlineCompletionLanguageStatusBarContribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createHotClass } from '../../../../base/common/hotReloadHelpers.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorunWithStore, debouncedObservable, derived, observableFromEvent } from '../../../../base/common/observable.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { InlineCompletionsController } from '../../../../editor/contrib/inlineCompletions/browser/controller/inlineCompletionsController.js';\nimport { localize } from '../../../../nls.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ILanguageStatusService } from '../../../services/languageStatus/common/languageStatusService.js';\n\nexport class InlineCompletionLanguageStatusBarContribution extends Disposable implements IWorkbenchContribution {\n\tpublic static readonly hot = createHotClass(this);\n\n\tpublic static Id = 'vs.contrib.inlineCompletionLanguageStatusBarContribution';\n\tpublic static readonly languageStatusBarDisposables = new Set<DisposableStore>();\n\n\tprivate _activeEditor;\n\tprivate _state;\n\n\tconstructor(\n\t\t@ILanguageStatusService private readonly _languageStatusService: ILanguageStatusService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t) {\n\t\tsuper();\n\n\n\t\tthis._activeEditor = observableFromEvent(this, _editorService.onDidActiveEditorChange, () => this._editorService.activeTextEditorControl);\n\t\tthis._state = derived(this, reader => {\n\t\t\tconst editor = this._activeEditor.read(reader);\n\t\t\tif (!editor || !isCodeEditor(editor)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst c = InlineCompletionsController.get(editor);\n\t\t\tconst model = c?.model.read(reader);\n\t\t\tif (!model) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tmodel,\n\t\t\t\tstatus: debouncedObservable(model.status, 300),\n\t\t\t};\n\t\t});\n\n\t\tthis._register(autorunWithStore((reader, store) => {\n\t\t\tconst state = this._state.read(reader);\n\t\t\tif (!state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst status = state.status.read(reader);\n\n\t\t\tconst statusMap: Record<typeof status, { shortLabel: string; label: string; loading: boolean }> = {\n\t\t\t\tloading: { shortLabel: '', label: localize('inlineSuggestionLoading', \"Loading...\"), loading: true, },\n\t\t\t\tghostText: { shortLabel: '$(lightbulb)', label: '$(copilot) ' + localize('inlineCompletionAvailable', \"Inline completion available\"), loading: false, },\n\t\t\t\tinlineEdit: { shortLabel: '$(lightbulb-sparkle)', label: '$(copilot) ' + localize('inlineEditAvailable', \"Inline edit available\"), loading: false, },\n\t\t\t\tnoSuggestion: { shortLabel: '$(circle-slash)', label: '$(copilot) ' + localize('noInlineSuggestionAvailable', \"No inline suggestion available\"), loading: false, },\n\t\t\t};\n\n\t\t\tstore.add(this._languageStatusService.addStatus({\n\t\t\t\taccessibilityInfo: undefined,\n\t\t\t\tbusy: statusMap[status].loading,\n\t\t\t\tcommand: undefined,\n\t\t\t\tdetail: localize('inlineSuggestionsSmall', \"Inline suggestions\"),\n\t\t\t\tid: 'inlineSuggestions',\n\t\t\t\tlabel: { value: statusMap[status].label, shortValue: statusMap[status].shortLabel },\n\t\t\t\tname: localize('inlineSuggestions', \"Inline Suggestions\"),\n\t\t\t\tselector: { pattern: state.model.textModel.uri.fsPath },\n\t\t\t\tseverity: Severity.Info,\n\t\t\t\tsource: 'inlineSuggestions',\n\t\t\t}));\n\t\t}));\n\t}\n}\n"]}