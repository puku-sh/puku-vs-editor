{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/url/common/trustedDomains.ts","vs/workbench/contrib/url/common/trustedDomains.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAChG,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAAE,kBAAkB,EAAE,MAAM,cAAc,CAAC;AAGlD;;;;;;;GAOG;AAEH,MAAM,UAAU,kBAAkB,CAAC,GAAQ,EAAE,cAAwB;IACpE,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;IACnC,cAAc,GAAG,cAAc,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAElD,IAAI,oBAAoB,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;QACzC,OAAO,IAAI,CAAC;IACb,CAAC;IAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;QAChD,IAAI,cAAc,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;YAC/B,OAAO,IAAI,CAAC;QACb,CAAC;QAED,IAAI,kBAAkB,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YAChD,OAAO,IAAI,CAAC;QACb,CAAC;IACF,CAAC;IAED,OAAO,KAAK,CAAC;AACd,CAAC;AACD;;GAEG;AAEH,MAAM,UAAU,YAAY,CAAC,GAAiB;IAC7C,MAAM,0BAA0B,GAAG,CAAC,YAAY,CAAC,CAAC;IAClD,IAAI,CAAC;QACJ,MAAM,MAAM,GAAG,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACpE,IAAI,0BAA0B,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC;YAC3D,OAAO,MAAM,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACxE,CAAC;aAAM,CAAC;YACP,OAAO,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC;IACF,CAAC;IAAC,MAAM,CAAC;QAAC,OAAO,GAAG,CAAC,QAAQ,EAAE,CAAC;IAAC,CAAC;AACnC,CAAC;AACD,MAAM,UAAU,GAAG,4BAA4B,CAAC;AAChD,MAAM,IAAI,GAAG,oBAAoB,CAAC;AAElC,MAAM,UAAU,oBAAoB,CAAC,SAAiB;IACrD,OAAO,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC3D,CAAC","file":"trustedDomains.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { URI } from '../../../../base/common/uri.js';\nimport { testUrlMatchesGlob } from './urlGlob.js';\n\n\n/**\n * Check whether a domain like https://www.microsoft.com matches\n * the list of trusted domains.\n *\n * - Schemes must match\n * - There's no subdomain matching. For example https://microsoft.com doesn't match https://www.microsoft.com\n * - Star matches all subdomains. For example https://*.microsoft.com matches https://www.microsoft.com and https://foo.bar.microsoft.com\n */\n\nexport function isURLDomainTrusted(url: URI, trustedDomains: string[]): boolean {\n\turl = URI.parse(normalizeURL(url));\n\ttrustedDomains = trustedDomains.map(normalizeURL);\n\n\tif (isLocalhostAuthority(url.authority)) {\n\t\treturn true;\n\t}\n\n\tfor (let i = 0; i < trustedDomains.length; i++) {\n\t\tif (trustedDomains[i] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (testUrlMatchesGlob(url, trustedDomains[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n/**\n * Case-normalize some case-insensitive URLs, such as github.\n */\n\nexport function normalizeURL(url: string | URI): string {\n\tconst caseInsensitiveAuthorities = ['github.com'];\n\ttry {\n\t\tconst parsed = typeof url === 'string' ? URI.parse(url, true) : url;\n\t\tif (caseInsensitiveAuthorities.includes(parsed.authority)) {\n\t\t\treturn parsed.with({ path: parsed.path.toLowerCase() }).toString(true);\n\t\t} else {\n\t\t\treturn parsed.toString(true);\n\t\t}\n\t} catch { return url.toString(); }\n}\nconst rLocalhost = /^(.+\\.)?localhost(:\\d+)?$/i;\nconst r127 = /^127.0.0.1(:\\d+)?$/;\n\nexport function isLocalhostAuthority(authority: string) {\n\treturn rLocalhost.test(authority) || r127.test(authority);\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { URI } from '../../../../base/common/uri.js';\nimport { testUrlMatchesGlob } from './urlGlob.js';\n\n\n/**\n * Check whether a domain like https://www.microsoft.com matches\n * the list of trusted domains.\n *\n * - Schemes must match\n * - There's no subdomain matching. For example https://microsoft.com doesn't match https://www.microsoft.com\n * - Star matches all subdomains. For example https://*.microsoft.com matches https://www.microsoft.com and https://foo.bar.microsoft.com\n */\n\nexport function isURLDomainTrusted(url: URI, trustedDomains: string[]): boolean {\n\turl = URI.parse(normalizeURL(url));\n\ttrustedDomains = trustedDomains.map(normalizeURL);\n\n\tif (isLocalhostAuthority(url.authority)) {\n\t\treturn true;\n\t}\n\n\tfor (let i = 0; i < trustedDomains.length; i++) {\n\t\tif (trustedDomains[i] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (testUrlMatchesGlob(url, trustedDomains[i])) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n/**\n * Case-normalize some case-insensitive URLs, such as github.\n */\n\nexport function normalizeURL(url: string | URI): string {\n\tconst caseInsensitiveAuthorities = ['github.com'];\n\ttry {\n\t\tconst parsed = typeof url === 'string' ? URI.parse(url, true) : url;\n\t\tif (caseInsensitiveAuthorities.includes(parsed.authority)) {\n\t\t\treturn parsed.with({ path: parsed.path.toLowerCase() }).toString(true);\n\t\t} else {\n\t\t\treturn parsed.toString(true);\n\t\t}\n\t} catch { return url.toString(); }\n}\nconst rLocalhost = /^(.+\\.)?localhost(:\\d+)?$/i;\nconst r127 = /^127.0.0.1(:\\d+)?$/;\n\nexport function isLocalhostAuthority(authority: string) {\n\treturn rLocalhost.test(authority) || r127.test(authority);\n}\n\n"]}