{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/comments/browser/commentThreadAdditionalActions.ts","vs/workbench/contrib/comments/browser/commentThreadAdditionalActions.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,KAAK,GAAG,MAAM,iCAAiC,CAAC;AAIvD,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAKlE,OAAO,EAAE,kBAAkB,EAAE,MAAM,yBAAyB,CAAC;AAG7D,OAAO,EAAE,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AAC1F,OAAO,EAAE,mBAAmB,EAAE,MAAM,yDAAyD,CAAC;AAEvF,IAAM,8BAA8B,GAApC,MAAM,8BAA8D,SAAQ,UAAU;IAK5F,YACC,SAAsB,EACd,cAA0C,EAC1C,kBAAsC,EACtC,aAA2B,EAC3B,kBAAuC,EACnB,kBAAsC,EACrC,mBAAwC;QAErE,KAAK,EAAE,CAAC;QAPA,mBAAc,GAAd,cAAc,CAA4B;QAC1C,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,kBAAa,GAAb,aAAa,CAAc;QAC3B,uBAAkB,GAAlB,kBAAkB,CAAqB;QACnB,uBAAkB,GAAlB,kBAAkB,CAAoB;QACrC,wBAAmB,GAAnB,mBAAmB,CAAqB;QAIrE,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAAC;QAC9E,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;QAEzD,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;QACpE,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAChD,CAAC;IAEO,SAAS;QAChB,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;IAC7C,CAAC;IAEO,SAAS;QAChB,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC1C,CAAC;IAEO,kBAAkB,CAAC,IAAW;QACrC,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,EAAE,iBAAiB,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5D,mDAAmD;QACnD,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE,CAAC;YAC5B,MAAM,CAAC,EAAE,OAAO,CAAC,GAAG,KAAK,CAAC;YAC1B,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;gBAC9B,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;oBACpB,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjB,OAAO;gBACR,CAAC;gBAED,KAAK,MAAM,SAAS,IAAK,MAA4B,CAAC,OAAO,IAAI,EAAE,EAAE,CAAC;oBACrE,IAAI,SAAS,CAAC,OAAO,EAAE,CAAC;wBACvB,IAAI,CAAC,SAAS,EAAE,CAAC;wBACjB,OAAO;oBACR,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;QAED,IAAI,CAAC,SAAS,EAAE,CAAC;IAClB,CAAC;IAGO,wBAAwB,CAAC,SAAsB;QACtD,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,iCAAiC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC3F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE;YACpC,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,IAAI,EAAE,2BAA2B,CAAC,IAAI,CAAC,CAAC;YAC5E,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,mBAAmB,GAAG,IAAI,kBAAkB,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,mBAAmB,EAAE,SAAS,EAAE,KAAK,EAAE,MAAe,EAAE,EAAE;YAClK,IAAI,CAAC,kBAAkB,EAAE,EAAE,CAAC;YAE5B,MAAM,CAAC,GAAG,CAAC;gBACV,MAAM,EAAE,IAAI,CAAC,cAAc;gBAC3B,IAAI,4CAAoC;aACxC,CAAC,CAAC;QACJ,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEZ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACzC,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,IAAI,EAAE,2BAA2B,CAAC,IAAI,CAAC,CAAC;QAC5E,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;CACD,CAAA;AA7EY,8BAA8B;IAWxC,WAAA,kBAAkB,CAAA;IAClB,WAAA,mBAAmB,CAAA;GAZT,8BAA8B,CA6E1C","file":"commentThreadAdditionalActions.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\n\nimport { IAction } from '../../../../base/common/actions.js';\nimport { IMenu, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CommentFormActions } from './commentFormActions.js';\nimport { CommentMenus } from './commentMenus.js';\nimport { ICellRange } from '../../notebook/common/notebookRange.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n\nexport class CommentThreadAdditionalActions<T extends IRange | ICellRange> extends Disposable {\n\tprivate _container: HTMLElement | null;\n\tprivate _buttonBar: HTMLElement | null;\n\tprivate _commentFormActions!: CommentFormActions;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _contextKeyService: IContextKeyService,\n\t\tprivate _commentMenus: CommentMenus,\n\t\tprivate _actionRunDelegate: (() => void) | null,\n\t\t@IKeybindingService private _keybindingService: IKeybindingService,\n\t\t@IContextMenuService private _contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis._container = dom.append(container, dom.$('.comment-additional-actions'));\n\t\tdom.append(this._container, dom.$('.section-separator'));\n\n\t\tthis._buttonBar = dom.append(this._container, dom.$('.button-bar'));\n\t\tthis._createAdditionalActions(this._buttonBar);\n\t}\n\n\tprivate _showMenu() {\n\t\tthis._container?.classList.remove('hidden');\n\t}\n\n\tprivate _hideMenu() {\n\t\tthis._container?.classList.add('hidden');\n\t}\n\n\tprivate _enableDisableMenu(menu: IMenu) {\n\t\tconst groups = menu.getActions({ shouldForwardArgs: true });\n\n\t\t// Show the menu if at least one action is enabled.\n\t\tfor (const group of groups) {\n\t\t\tconst [, actions] = group;\n\t\t\tfor (const action of actions) {\n\t\t\t\tif (action.enabled) {\n\t\t\t\t\tthis._showMenu();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (const subAction of (action as SubmenuItemAction).actions ?? []) {\n\t\t\t\t\tif (subAction.enabled) {\n\t\t\t\t\t\tthis._showMenu();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._hideMenu();\n\t}\n\n\n\tprivate _createAdditionalActions(container: HTMLElement) {\n\t\tconst menu = this._commentMenus.getCommentThreadAdditionalActions(this._contextKeyService);\n\t\tthis._register(menu);\n\t\tthis._register(menu.onDidChange(() => {\n\t\t\tthis._commentFormActions.setActions(menu, /*hasOnlySecondaryActions*/ true);\n\t\t\tthis._enableDisableMenu(menu);\n\t\t}));\n\n\t\tthis._commentFormActions = new CommentFormActions(this._keybindingService, this._contextKeyService, this._contextMenuService, container, async (action: IAction) => {\n\t\t\tthis._actionRunDelegate?.();\n\n\t\t\taction.run({\n\t\t\t\tthread: this._commentThread,\n\t\t\t\t$mid: MarshalledId.CommentThreadInstance\n\t\t\t});\n\t\t}, 4, true);\n\n\t\tthis._register(this._commentFormActions);\n\t\tthis._commentFormActions.setActions(menu, /*hasOnlySecondaryActions*/ true);\n\t\tthis._enableDisableMenu(menu);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\n\nimport { IAction } from '../../../../base/common/actions.js';\nimport { IMenu, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CommentFormActions } from './commentFormActions.js';\nimport { CommentMenus } from './commentMenus.js';\nimport { ICellRange } from '../../notebook/common/notebookRange.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n\nexport class CommentThreadAdditionalActions<T extends IRange | ICellRange> extends Disposable {\n\tprivate _container: HTMLElement | null;\n\tprivate _buttonBar: HTMLElement | null;\n\tprivate _commentFormActions!: CommentFormActions;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _contextKeyService: IContextKeyService,\n\t\tprivate _commentMenus: CommentMenus,\n\t\tprivate _actionRunDelegate: (() => void) | null,\n\t\t@IKeybindingService private _keybindingService: IKeybindingService,\n\t\t@IContextMenuService private _contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis._container = dom.append(container, dom.$('.comment-additional-actions'));\n\t\tdom.append(this._container, dom.$('.section-separator'));\n\n\t\tthis._buttonBar = dom.append(this._container, dom.$('.button-bar'));\n\t\tthis._createAdditionalActions(this._buttonBar);\n\t}\n\n\tprivate _showMenu() {\n\t\tthis._container?.classList.remove('hidden');\n\t}\n\n\tprivate _hideMenu() {\n\t\tthis._container?.classList.add('hidden');\n\t}\n\n\tprivate _enableDisableMenu(menu: IMenu) {\n\t\tconst groups = menu.getActions({ shouldForwardArgs: true });\n\n\t\t// Show the menu if at least one action is enabled.\n\t\tfor (const group of groups) {\n\t\t\tconst [, actions] = group;\n\t\t\tfor (const action of actions) {\n\t\t\t\tif (action.enabled) {\n\t\t\t\t\tthis._showMenu();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (const subAction of (action as SubmenuItemAction).actions ?? []) {\n\t\t\t\t\tif (subAction.enabled) {\n\t\t\t\t\t\tthis._showMenu();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._hideMenu();\n\t}\n\n\n\tprivate _createAdditionalActions(container: HTMLElement) {\n\t\tconst menu = this._commentMenus.getCommentThreadAdditionalActions(this._contextKeyService);\n\t\tthis._register(menu);\n\t\tthis._register(menu.onDidChange(() => {\n\t\t\tthis._commentFormActions.setActions(menu, /*hasOnlySecondaryActions*/ true);\n\t\t\tthis._enableDisableMenu(menu);\n\t\t}));\n\n\t\tthis._commentFormActions = new CommentFormActions(this._keybindingService, this._contextKeyService, this._contextMenuService, container, async (action: IAction) => {\n\t\t\tthis._actionRunDelegate?.();\n\n\t\t\taction.run({\n\t\t\t\tthread: this._commentThread,\n\t\t\t\t$mid: MarshalledId.CommentThreadInstance\n\t\t\t});\n\t\t}, 4, true);\n\n\t\tthis._register(this._commentFormActions);\n\t\tthis._commentFormActions.setActions(menu, /*hasOnlySecondaryActions*/ true);\n\t\tthis._enableDisableMenu(menu);\n\t}\n}\n"]}