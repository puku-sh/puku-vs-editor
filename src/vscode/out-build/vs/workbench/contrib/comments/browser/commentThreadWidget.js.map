{"version":3,"sources":["vs/workbench/contrib/comments/browser/commentThreadWidget.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,oBAAoB,CAAC;AAC5B,OAAO,KAAK,GAAG,MAAM,iCAAiC,CAAC;AACvD,OAAO,EAAE,OAAO,EAAE,MAAM,kCAAkC,CAAC;AAC3D,OAAO,EAAE,UAAU,EAAE,OAAO,EAAe,YAAY,EAAE,MAAM,sCAAsC,CAAC;AAEtG,OAAO,KAAK,SAAS,MAAM,wCAAwC,CAAC;AAKpE,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AACjD,OAAO,EAAE,eAAe,EAAE,MAAM,qBAAqB,CAAC;AACtD,OAAO,EAAE,iBAAiB,EAAE,MAAM,wBAAwB,CAAC;AAC3D,OAAO,EAAE,mBAAmB,EAAE,MAAM,0BAA0B,CAAC;AAC/D,OAAO,EAAE,8BAA8B,EAAE,MAAM,qCAAqC,CAAC;AACrF,OAAO,EAAE,kBAAkB,EAAE,MAAM,iCAAiC,CAAC;AAErE,OAAO,EAAU,KAAK,EAAE,MAAM,yCAAyC,CAAC;AAGxE,OAAO,EAAE,0BAA0B,EAAE,MAAM,sDAAsD,CAAC;AAClG,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,gBAAgB,EAA0B,MAAM,oCAAoC,CAAC;AAC9F,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAE9C,OAAO,EAAE,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AAG1F,OAAO,EAAE,YAAY,EAAE,MAAM,6CAA6C,CAAC;AAE3E,MAAM,CAAC,MAAM,4BAA4B,GAAG,yBAAyB,CAAC;AAE/D,IAAM,mBAAmB,GAAzB,MAAM,mBAA4D,SAAQ,UAAU;IAe1F,IAAI,aAAa;QAChB,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IACD,YACU,SAAsB,EACtB,aAA+B,EAChC,MAAc,EACd,kBAAuB,EACvB,kBAAsC,EACtC,2BAAkD,EAClD,cAA0C,EAC1C,eAAqD,EACrD,aAAsE,EACtE,gBAA+C,EAC/C,eAAqD,EACrD,kBAGP,EACgB,cAAgD,EAC1C,oBAA4D,EAC/D,kBAAuD;QAE3E,KAAK,EAAE,CAAC;QAnBC,cAAS,GAAT,SAAS,CAAa;QACtB,kBAAa,GAAb,aAAa,CAAkB;QAChC,WAAM,GAAN,MAAM,CAAQ;QACd,uBAAkB,GAAlB,kBAAkB,CAAK;QACvB,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,gCAA2B,GAA3B,2BAA2B,CAAuB;QAClD,mBAAc,GAAd,cAAc,CAA4B;QAC1C,oBAAe,GAAf,eAAe,CAAsC;QACrD,kBAAa,GAAb,aAAa,CAAyD;QACtE,qBAAgB,GAAhB,gBAAgB,CAA+B;QAC/C,oBAAe,GAAf,eAAe,CAAsC;QACrD,uBAAkB,GAAlB,kBAAkB,CAGzB;QACiC,mBAAc,GAAd,cAAc,CAAiB;QACzB,yBAAoB,GAApB,oBAAoB,CAAuB;QAC9C,uBAAkB,GAAlB,kBAAkB,CAAoB;QA9BpE,8BAAyB,GAAkB,EAAE,CAAC;QAI9C,iBAAY,GAAG,IAAI,OAAO,EAAiB,CAAC;QACpD,gBAAW,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;QA6BrC,IAAI,CAAC,cAAc,GAAG,kBAAkB,CAAC,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC9F,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,QAAQ,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACrF,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAE5F,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEtE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,2BAA2B,CAAC,cAAc,CAC5E,mBAAmB,EACnB,SAAS,EACT;YACC,QAAQ,EAAE,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;SACrD,EACD,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,cAAc,CACnB,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAEtD,MAAM,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;QACnC,SAAS,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;QACnC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEzD,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,CAAC;QAC5D,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC;YACzC,IAAI,EAAE,qBAAqB;YAC3B,cAAc,EAAE,CAAC,OAAO,CAAC;YACzB,eAAe,EAAE,GAAG,EAAE;gBACrB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,sBAAsB,EAAE,EAAE,CAAC;oBACnD,IAAI,CAAC,aAAa,EAAE,oCAAoC,EAAE,CAAC;gBAC5D,CAAC;YACF,CAAC;YACD,mBAAmB,EAAE,GAAG,EAAE;gBACzB,IAAI,IAAI,CAAC,aAAa,EAAE,sBAAsB,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,EAAE,CAAC;oBAC1F,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;gBACpB,CAAC;YACF,CAAC;SACD,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACzE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;YACrE,IAAI,CAAC,CAAC,oBAAoB,mFAA0C,EAAE,CAAC;gBACtE,IAAI,CAAC,aAAa,EAAE,CAAC;YACtB,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,2BAA2B,CAAC,cAAc,CAC3D,iBAAiB,EACjB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,kBAAkB,EACvB,WAAW,EACX,IAAI,CAAC,gBAAgB,EACrB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,2BAA2B,EAChC,IAAI,CAC+B,CAAC;QACrC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC3B,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,IAAI,CAAC,0BAA0B,GAAG,kBAAkB,CAAC,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QAC1G,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QAEjE,MAAM,oBAAoB,GAAG,kBAAkB,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;QACzG,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEzE,IAAI,UAAU,EAAE,YAAY,EAAE,CAAC;YAC9B,oBAAoB,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QACnD,CAAC;QAED,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC/B,CAAC;IAED,IAAI,sBAAsB;QACzB,OAAO,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,aAAa,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE,CAAC;IAC7F,CAAC;IAEO,aAAa;QACpB,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAc,EAAE,IAAS,CAAC,CAAC;QACpD,IAAI,UAA8B,CAAC;QACnC,MAAM,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,mFAA0C,CAAC;QAC7F,IAAI,OAAO,EAAE,CAAC;YACb,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,uFAA+C,IAAI,CAAC,kBAAkB,CAAC,EAAE,QAAQ,EAAE,IAAI,SAAS,CAAC;QACvJ,CAAC;QACD,IAAI,UAAU,EAAE,CAAC;YAChB,SAAS,GAAG,QAAQ,CAAC,IAA4B,EAAE,IAAuC,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;QACpH,CAAC;aAAM,IAAI,OAAO,EAAE,CAAC;YACpB,SAAS,GAAG,QAAQ,CAAC,IAAwC,EAAE,IAAiG,EAAE,SAAS,CAAC,CAAC;QAC9K,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC;IAC5C,CAAC;IAEO,mBAAmB,CAAC,QAAiB,EAAE,QAAiB;QAC/D,IAAI,QAAQ,IAAI,QAAQ,EAAE,CAAC;YAC1B,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACjE,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC;QACxD,CAAC;IACF,CAAC;IAEO,sBAAsB;QAC7B,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EAAE;YACzF,IAAI,CAAC,CAAC,aAAa,KAAK,IAAI,CAAC,SAAS,EAAE,CAAC;gBACxC,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YAC9C,CAAC;QACF,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QACV,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,EAAE;YACzF,IAAI,CAAC,CAAC,aAAa,KAAK,IAAI,CAAC,SAAS,EAAE,CAAC;gBACxC,QAAQ,GAAG,KAAK,CAAC;gBACjB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YAC9C,CAAC;QACF,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QACV,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,CAAC,QAAQ,EAAE,GAAG,EAAE;YACrF,QAAQ,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC9C,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QACV,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,CAAC,IAAI,CAAC,SAAS,EAAE,GAAG,CAAC,SAAS,CAAC,SAAS,EAAE,GAAG,EAAE;YACtF,QAAQ,GAAG,KAAK,CAAC;YACjB,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAC9C,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IACX,CAAC;IAED,KAAK,CAAC,mBAAmB,CAAC,aAAyC;QAClE,MAAM,cAAc,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,KAAK,SAAS,CAAC,6BAA6B,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,KAAK,SAAS,CAAC,kBAAkB,CAAC,UAAU,CAAC;eACxL,CAAC,aAAa,CAAC,KAAK,KAAK,SAAS,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QACpE,IAAI,CAAC,mBAAmB,GAAG,aAAa,CAAC,KAAK,CAAC;QAC/C,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QACpC,OAAO,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QACxC,IAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;QACpC,IAAI,CAAC,2BAA2B,EAAE,CAAC;QAEnC,MAAM,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,EAAE,sBAAsB,EAAE,IAAI,KAAK,CAAC,CAAC;QAC3G,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAC5C,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC;QAChD,IAAI,CAAC,aAAa,EAAE,mBAAmB,CAAC,aAAa,CAAC,CAAC;QAEvD,IAAI,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;YACtC,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;QACvE,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,0BAA0B,CAAC,KAAK,EAAE,CAAC;QACzC,CAAC;QAED,IAAI,cAAc,IAAI,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAyB,gBAAgB,CAAC,CAAC,iBAAiB,EAAE,CAAC;YACtH,IAAI,CAAC,QAAQ,EAAE,CAAC;QACjB,CAAC;IACF,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,UAAkB,EAAE,KAAc;QAC/C,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,qFAAqF;QACnJ,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;QAEtC,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;QAE3B,oDAAoD;QACpD,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;YAClC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAEhC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE;YACjD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC1B,CAAC,CAAC,CAAC,CAAC;QAEJ,yHAAyH;QACzH,gIAAgI;QAChI,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxD,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,CAAC;QACpC,CAAC;QAED,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACpC,CAAC;IAEO,QAAQ,CAAC,SAAwB;QACxC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC;IAEQ,OAAO;QACf,KAAK,CAAC,OAAO,EAAE,CAAC;QAChB,OAAO,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;QACxC,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACxC,CAAC;IAEO,2BAA2B;QAClC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,GAAG,EAAE;YAChF,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;gBACxB,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE,CAAC;YACrC,CAAC;iBAAM,CAAC;gBACP,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;oBAClC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBAChC,CAAC;YACF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,KAAK,EAAC,CAAC,EAAC,EAAE;YACrF,MAAM,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE;YAC5E,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,kBAAkB,CAAC,KAAc;QACxC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,2BAA2B,CAAC,cAAc,CACnE,YAAY,EACZ,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,KAAK,CAAC,SAAS,EACpB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,2BAA2B,EAChC,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,eAAe,EACpB,IAAI,CAAC,eAAe,EACpB,IAAI,EACJ,KAAK,EACL,IAAI,CAAC,kBAAkB,CAAC,YAAY,CACpC,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IACpC,CAAC;IAEO,wBAAwB;QAC/B,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,2BAA2B,CAAC,cAAc,CACxE,8BAA8B,EAC9B,IAAI,CAAC,KAAK,CAAC,SAAS,EACpB,IAAI,CAAC,cAAc,EACnB,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,kBAAkB,CAAC,YAAY,CACpC,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IACzC,CAAC;IAED,gBAAgB,CAAC,eAAuB;QACvC,OAAO,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC;IACrD,CAAC;IAED,eAAe;QACd,OAAO,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,CAAC;IACrC,CAAC;IAED,iBAAiB;QAChB,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;YACxB,OAAO,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC;QAC/C,CAAC;QAED,OAAO,SAAS,CAAC;IAClB,CAAC;IAED,iBAAiB,CAAC,OAAiC;QAClD,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;QAC/B,IAAI,CAAC,aAAa,EAAE,iBAAiB,CAAC,OAAO,CAAC,CAAC;IAChD,CAAC;IAED,aAAa;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC;IACnC,CAAC;IAED,MAAM,CAAC,YAAqB;QAC3B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAEhC,IAAI,YAAY,KAAK,SAAS,EAAE,CAAC;YAChC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;QAC1C,CAAC;IACF,CAAC;IAED,gCAAgC;QAC/B,IAAI,CAAC,KAAK,CAAC,gCAAgC,EAAE,CAAC;IAC/C,CAAC;IAED,kBAAkB;QACjB,IAAI,CAAC,aAAa,EAAE,oCAAoC,EAAE,CAAC;IAC5D,CAAC;IAED,KAAK,CAAC,eAAmC;QACxC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;IACnC,CAAC;IAED,KAAK,CAAC,aAAa;QAClB,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;QAC/C,IAAI,aAAa,EAAE,CAAC;YACnB,OAAO,aAAa,CAAC,aAAa,EAAE,CAAC;QACtC,CAAC;aAAM,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,iBAAiB,EAAE,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;YAC5E,OAAO,IAAI,CAAC,aAAa,EAAE,aAAa,EAAE,CAAC;QAC5C,CAAC;IACF,CAAC;IAED,KAAK,CAAC,QAAQ;QACb,IAAI,CAAC,MAAM,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;YAChI,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC3D,CAAC;IAEF,CAAC;IAED,UAAU,CAAC,QAAkB;QAC5B,MAAM,aAAa,GAAG,qCAAqC,CAAC;QAC5D,MAAM,aAAa,GAAG,qCAAqC,CAAC;QAC5D,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,WAAW,CAAC,aAAa,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;QACtE,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,WAAW,CAAC,aAAa,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;QAEtE,IAAI,CAAC,aAAa,EAAE,2BAA2B,EAAE,CAAC;IACnD,CAAC;CACD,CAAA;AA3VY,mBAAmB;IAkC7B,YAAA,eAAe,CAAA;IACf,YAAA,qBAAqB,CAAA;IACrB,YAAA,kBAAkB,CAAA;GApCR,mBAAmB,CA2V/B","file":"commentThreadWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/review.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, dispose, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { IMarkdownRendererExtraOptions } from '../../../../platform/markdown/browser/markdownRenderer.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CommentMenus } from './commentMenus.js';\nimport { CommentReply } from './commentReply.js';\nimport { ICommentService } from './commentService.js';\nimport { CommentThreadBody } from './commentThreadBody.js';\nimport { CommentThreadHeader } from './commentThreadHeader.js';\nimport { CommentThreadAdditionalActions } from './commentThreadAdditionalActions.js';\nimport { CommentContextKeys } from '../common/commentContextKeys.js';\nimport { ICommentThreadWidget } from '../common/commentThreadWidget.js';\nimport { IRange, Range } from '../../../../editor/common/core/range.js';\nimport { ICellRange } from '../../notebook/common/notebookRange.js';\nimport { FontInfo } from '../../../../editor/common/config/fontInfo.js';\nimport { registerNavigableContainer } from '../../../browser/actions/widgetNavigationCommands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { COMMENTS_SECTION, ICommentsConfiguration } from '../common/commentsConfiguration.js';\nimport { localize } from '../../../../nls.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { AccessibilityCommandId } from '../../accessibility/common/accessibilityCommands.js';\nimport { LayoutableEditor } from './simpleCommentEditor.js';\nimport { isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\n\nexport const COMMENTEDITOR_DECORATION_KEY = 'commenteditordecoration';\n\nexport class CommentThreadWidget<T extends IRange | ICellRange = IRange> extends Disposable implements ICommentThreadWidget {\n\tprivate _header!: CommentThreadHeader<T>;\n\tprivate _body: CommentThreadBody<T>;\n\tprivate _commentReply?: CommentReply<T>;\n\tprivate _additionalActions?: CommentThreadAdditionalActions<T>;\n\tprivate _commentMenus: CommentMenus;\n\tprivate _commentThreadDisposables: IDisposable[] = [];\n\tprivate _threadIsEmpty: IContextKey<boolean>;\n\tprivate _commentThreadContextValue: IContextKey<string | undefined>;\n\tprivate _focusedContextKey: IContextKey<boolean>;\n\tprivate _onDidResize = new Emitter<dom.Dimension>();\n\tonDidResize = this._onDidResize.event;\n\n\tprivate _commentThreadState: languages.CommentThreadState | undefined;\n\n\tget commentThread() {\n\t\treturn this._commentThread;\n\t}\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\treadonly _parentEditor: LayoutableEditor,\n\t\tprivate _owner: string,\n\t\tprivate _parentResourceUri: URI,\n\t\tprivate _contextKeyService: IContextKeyService,\n\t\tprivate _scopedInstantiationService: IInstantiationService,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _pendingComment: languages.PendingComment | undefined,\n\t\tprivate _pendingEdits: { [key: number]: languages.PendingComment } | undefined,\n\t\tprivate _markdownOptions: IMarkdownRendererExtraOptions,\n\t\tprivate _commentOptions: languages.CommentOptions | undefined,\n\t\tprivate _containerDelegate: {\n\t\t\tactionRunner: (() => void) | null;\n\t\t\tcollapse: () => Promise<boolean>;\n\t\t},\n\t\t@ICommentService private readonly commentService: ICommentService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\n\t\tthis._threadIsEmpty = CommentContextKeys.commentThreadIsEmpty.bindTo(this._contextKeyService);\n\t\tthis._threadIsEmpty.set(!_commentThread.comments || !_commentThread.comments.length);\n\t\tthis._focusedContextKey = CommentContextKeys.commentFocused.bindTo(this._contextKeyService);\n\n\t\tthis._commentMenus = this.commentService.getCommentMenus(this._owner);\n\n\t\tthis._register(this._header = this._scopedInstantiationService.createInstance(\n\t\t\tCommentThreadHeader,\n\t\t\tcontainer,\n\t\t\t{\n\t\t\t\tcollapse: this._containerDelegate.collapse.bind(this)\n\t\t\t},\n\t\t\tthis._commentMenus,\n\t\t\tthis._commentThread\n\t\t));\n\n\t\tthis._header.updateCommentThread(this._commentThread);\n\n\t\tconst bodyElement = dom.$('.body');\n\t\tcontainer.appendChild(bodyElement);\n\t\tthis._register(toDisposable(() => bodyElement.remove()));\n\n\t\tconst tracker = this._register(dom.trackFocus(bodyElement));\n\t\tthis._register(registerNavigableContainer({\n\t\t\tname: 'commentThreadWidget',\n\t\t\tfocusNotifiers: [tracker],\n\t\t\tfocusNextWidget: () => {\n\t\t\t\tif (!this._commentReply?.isCommentEditorFocused()) {\n\t\t\t\t\tthis._commentReply?.expandReplyAreaAndFocusCommentEditor();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfocusPreviousWidget: () => {\n\t\t\t\tif (this._commentReply?.isCommentEditorFocused() && this._commentThread.comments?.length) {\n\t\t\t\t\tthis._body.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(tracker.onDidFocus(() => this._focusedContextKey.set(true)));\n\t\tthis._register(tracker.onDidBlur(() => this._focusedContextKey.reset()));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AccessibilityVerbositySettingId.Comments)) {\n\t\t\t\tthis._setAriaLabel();\n\t\t\t}\n\t\t}));\n\t\tthis._body = this._scopedInstantiationService.createInstance(\n\t\t\tCommentThreadBody,\n\t\t\tthis._parentEditor,\n\t\t\tthis._owner,\n\t\t\tthis._parentResourceUri,\n\t\t\tbodyElement,\n\t\t\tthis._markdownOptions,\n\t\t\tthis._commentThread,\n\t\t\tthis._pendingEdits,\n\t\t\tthis._scopedInstantiationService,\n\t\t\tthis\n\t\t) as unknown as CommentThreadBody<T>;\n\t\tthis._register(this._body);\n\t\tthis._setAriaLabel();\n\n\t\tthis._commentThreadContextValue = CommentContextKeys.commentThreadContext.bindTo(this._contextKeyService);\n\t\tthis._commentThreadContextValue.set(_commentThread.contextValue);\n\n\t\tconst commentControllerKey = CommentContextKeys.commentControllerContext.bindTo(this._contextKeyService);\n\t\tconst controller = this.commentService.getCommentController(this._owner);\n\n\t\tif (controller?.contextValue) {\n\t\t\tcommentControllerKey.set(controller.contextValue);\n\t\t}\n\n\t\tthis.currentThreadListeners();\n\t}\n\n\tget hasUnsubmittedComments(): boolean {\n\t\treturn !!this._commentReply?.commentEditor.getValue() || this._body.hasCommentsInEditMode();\n\t}\n\n\tprivate _setAriaLabel(): void {\n\t\tlet ariaLabel = localize('commentLabel', \"Comment\");\n\t\tlet keybinding: string | undefined;\n\t\tconst verbose = this.configurationService.getValue(AccessibilityVerbositySettingId.Comments);\n\t\tif (verbose) {\n\t\t\tkeybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibilityHelp, this._contextKeyService)?.getLabel() ?? undefined;\n\t\t}\n\t\tif (keybinding) {\n\t\t\tariaLabel = localize('commentLabelWithKeybinding', \"{0}, use ({1}) for accessibility help\", ariaLabel, keybinding);\n\t\t} else if (verbose) {\n\t\t\tariaLabel = localize('commentLabelWithKeybindingNoKeybinding', \"{0}, run the command Open Accessibility Help which is currently not triggerable via keybinding.\", ariaLabel);\n\t\t}\n\t\tthis._body.container.ariaLabel = ariaLabel;\n\t}\n\n\tprivate updateCurrentThread(hasMouse: boolean, hasFocus: boolean) {\n\t\tif (hasMouse || hasFocus) {\n\t\t\tthis.commentService.setCurrentCommentThread(this.commentThread);\n\t\t} else {\n\t\t\tthis.commentService.setCurrentCommentThread(undefined);\n\t\t}\n\t}\n\n\tprivate currentThreadListeners() {\n\t\tlet hasMouse = false;\n\t\tlet hasFocus = false;\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.MOUSE_ENTER, (e) => {\n\t\t\tif (e.relatedTarget === this.container) {\n\t\t\t\thasMouse = true;\n\t\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t\t}\n\t\t}, true));\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.MOUSE_LEAVE, (e) => {\n\t\t\tif (e.relatedTarget === this.container) {\n\t\t\t\thasMouse = false;\n\t\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t\t}\n\t\t}, true));\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.FOCUS_IN, () => {\n\t\t\thasFocus = true;\n\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t}, true));\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.FOCUS_OUT, () => {\n\t\t\thasFocus = false;\n\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t}, true));\n\t}\n\n\tasync updateCommentThread(commentThread: languages.CommentThread<T>) {\n\t\tconst shouldCollapse = (this._commentThread.collapsibleState === languages.CommentThreadCollapsibleState.Expanded) && (this._commentThreadState === languages.CommentThreadState.Unresolved)\n\t\t\t&& (commentThread.state === languages.CommentThreadState.Resolved);\n\t\tthis._commentThreadState = commentThread.state;\n\t\tthis._commentThread = commentThread;\n\t\tdispose(this._commentThreadDisposables);\n\t\tthis._commentThreadDisposables = [];\n\t\tthis._bindCommentThreadListeners();\n\n\t\tawait this._body.updateCommentThread(commentThread, this._commentReply?.isCommentEditorFocused() ?? false);\n\t\tthis._threadIsEmpty.set(!this._body.length);\n\t\tthis._header.updateCommentThread(commentThread);\n\t\tthis._commentReply?.updateCommentThread(commentThread);\n\n\t\tif (this._commentThread.contextValue) {\n\t\t\tthis._commentThreadContextValue.set(this._commentThread.contextValue);\n\t\t} else {\n\t\t\tthis._commentThreadContextValue.reset();\n\t\t}\n\n\t\tif (shouldCollapse && this.configurationService.getValue<ICommentsConfiguration>(COMMENTS_SECTION).collapseOnResolve) {\n\t\t\tthis.collapse();\n\t\t}\n\t}\n\n\tasync display(lineHeight: number, focus: boolean) {\n\t\tconst headHeight = Math.max(23, Math.ceil(lineHeight * 1.2)); // 23 is the value of `Math.ceil(lineHeight * 1.2)` with the default editor font size\n\t\tthis._header.updateHeight(headHeight);\n\n\t\tawait this._body.display();\n\n\t\t// create comment thread only when it supports reply\n\t\tif (this._commentThread.canReply) {\n\t\t\tthis._createCommentForm(focus);\n\t\t}\n\t\tthis._createAdditionalActions();\n\n\t\tthis._register(this._body.onDidResize(dimension => {\n\t\t\tthis._refresh(dimension);\n\t\t}));\n\n\t\t// If there are no existing comments, place focus on the text area. This must be done after show, which also moves focus.\n\t\t// if this._commentThread.comments is undefined, it doesn't finish initialization yet, so we don't focus the editor immediately.\n\t\tif (this._commentThread.canReply && this._commentReply) {\n\t\t\tthis._commentReply.focusIfNeeded();\n\t\t}\n\n\t\tthis._bindCommentThreadListeners();\n\t}\n\n\tprivate _refresh(dimension: dom.Dimension) {\n\t\tthis._body.layout();\n\t\tthis._onDidResize.fire(dimension);\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tdispose(this._commentThreadDisposables);\n\t\tthis.updateCurrentThread(false, false);\n\t}\n\n\tprivate _bindCommentThreadListeners() {\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeCanReply(() => {\n\t\t\tif (this._commentReply) {\n\t\t\t\tthis._commentReply.updateCanReply();\n\t\t\t} else {\n\t\t\t\tif (this._commentThread.canReply) {\n\t\t\t\t\tthis._createCommentForm(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeComments(async _ => {\n\t\t\tawait this.updateCommentThread(this._commentThread);\n\t\t}));\n\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeLabel(_ => {\n\t\t\tthis._header.createThreadLabel();\n\t\t}));\n\t}\n\n\tprivate _createCommentForm(focus: boolean) {\n\t\tthis._commentReply = this._scopedInstantiationService.createInstance(\n\t\t\tCommentReply,\n\t\t\tthis._owner,\n\t\t\tthis._body.container,\n\t\t\tthis._parentEditor,\n\t\t\tthis._commentThread,\n\t\t\tthis._scopedInstantiationService,\n\t\t\tthis._contextKeyService,\n\t\t\tthis._commentMenus,\n\t\t\tthis._commentOptions,\n\t\t\tthis._pendingComment,\n\t\t\tthis,\n\t\t\tfocus,\n\t\t\tthis._containerDelegate.actionRunner\n\t\t);\n\n\t\tthis._register(this._commentReply);\n\t}\n\n\tprivate _createAdditionalActions() {\n\t\tthis._additionalActions = this._scopedInstantiationService.createInstance(\n\t\t\tCommentThreadAdditionalActions,\n\t\t\tthis._body.container,\n\t\t\tthis._commentThread,\n\t\t\tthis._contextKeyService,\n\t\t\tthis._commentMenus,\n\t\t\tthis._containerDelegate.actionRunner,\n\t\t);\n\n\t\tthis._register(this._additionalActions);\n\t}\n\n\tgetCommentCoords(commentUniqueId: number) {\n\t\treturn this._body.getCommentCoords(commentUniqueId);\n\t}\n\n\tgetPendingEdits(): { [key: number]: languages.PendingComment } {\n\t\treturn this._body.getPendingEdits();\n\t}\n\n\tgetPendingComment(): languages.PendingComment | undefined {\n\t\tif (this._commentReply) {\n\t\t\treturn this._commentReply.getPendingComment();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tsetPendingComment(pending: languages.PendingComment) {\n\t\tthis._pendingComment = pending;\n\t\tthis._commentReply?.setPendingComment(pending);\n\t}\n\n\tgetDimensions() {\n\t\treturn this._body.getDimensions();\n\t}\n\n\tlayout(widthInPixel?: number) {\n\t\tthis._body.layout(widthInPixel);\n\n\t\tif (widthInPixel !== undefined) {\n\t\t\tthis._commentReply?.layout(widthInPixel);\n\t\t}\n\t}\n\n\tensureFocusIntoNewEditingComment() {\n\t\tthis._body.ensureFocusIntoNewEditingComment();\n\t}\n\n\tfocusCommentEditor() {\n\t\tthis._commentReply?.expandReplyAreaAndFocusCommentEditor();\n\t}\n\n\tfocus(commentUniqueId: number | undefined) {\n\t\tthis._body.focus(commentUniqueId);\n\t}\n\n\tasync submitComment() {\n\t\tconst activeComment = this._body.activeComment;\n\t\tif (activeComment) {\n\t\t\treturn activeComment.submitComment();\n\t\t} else if ((this._commentReply?.getPendingComment()?.body.length ?? 0) > 0) {\n\t\t\treturn this._commentReply?.submitComment();\n\t\t}\n\t}\n\n\tasync collapse() {\n\t\tif ((await this._containerDelegate.collapse()) && Range.isIRange(this.commentThread.range) && isCodeEditor(this._parentEditor)) {\n\t\t\tthis._parentEditor.setSelection(this.commentThread.range);\n\t\t}\n\n\t}\n\n\tapplyTheme(fontInfo: FontInfo) {\n\t\tconst fontFamilyVar = '--comment-thread-editor-font-family';\n\t\tconst fontWeightVar = '--comment-thread-editor-font-weight';\n\t\tthis.container?.style.setProperty(fontFamilyVar, fontInfo.fontFamily);\n\t\tthis.container?.style.setProperty(fontWeightVar, fontInfo.fontWeight);\n\n\t\tthis._commentReply?.setCommentEditorDecorations();\n\t}\n}\n"]}