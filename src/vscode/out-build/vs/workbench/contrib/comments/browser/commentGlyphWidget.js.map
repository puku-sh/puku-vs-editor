{"version":3,"sources":["vs/workbench/contrib/comments/browser/commentGlyphWidget.ts"],"names":[],"mappings":"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","file":"commentGlyphWidget.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidgetPosition } from '../../../../editor/browser/editorBrowser.js';\nimport { IModelDecorationOptions, OverviewRulerLane } from '../../../../editor/common/model.js';\nimport { ModelDecorationOptions } from '../../../../editor/common/model/textModel.js';\nimport { darken, editorBackground, editorForeground, listInactiveSelectionBackground, opaque, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { IEditorDecorationsCollection } from '../../../../editor/common/editorCommon.js';\nimport { CommentThreadState } from '../../../../editor/common/languages.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../../base/common/event.js';\n\nexport const overviewRulerCommentingRangeForeground = registerColor('editorGutter.commentRangeForeground', { dark: opaque(listInactiveSelectionBackground, editorBackground), light: darken(opaque(listInactiveSelectionBackground, editorBackground), .05), hcDark: Color.white, hcLight: Color.black }, nls.localize('editorGutterCommentRangeForeground', 'Editor gutter decoration color for commenting ranges. This color should be opaque.'));\nconst overviewRulerCommentForeground = registerColor('editorOverviewRuler.commentForeground', overviewRulerCommentingRangeForeground, nls.localize('editorOverviewRuler.commentForeground', 'Editor overview ruler decoration color for resolved comments. This color should be opaque.'));\nconst overviewRulerCommentUnresolvedForeground = registerColor('editorOverviewRuler.commentUnresolvedForeground', overviewRulerCommentForeground, nls.localize('editorOverviewRuler.commentUnresolvedForeground', 'Editor overview ruler decoration color for unresolved comments. This color should be opaque.'));\nconst overviewRulerCommentDraftForeground = registerColor('editorOverviewRuler.commentDraftForeground', overviewRulerCommentUnresolvedForeground, nls.localize('editorOverviewRuler.commentDraftForeground', 'Editor overview ruler decoration color for comment threads with draft comments. This color should be opaque.'));\n\nconst editorGutterCommentGlyphForeground = registerColor('editorGutter.commentGlyphForeground', { dark: editorForeground, light: editorForeground, hcDark: Color.black, hcLight: Color.white }, nls.localize('editorGutterCommentGlyphForeground', 'Editor gutter decoration color for commenting glyphs.'));\nregisterColor('editorGutter.commentUnresolvedGlyphForeground', editorGutterCommentGlyphForeground, nls.localize('editorGutterCommentUnresolvedGlyphForeground', 'Editor gutter decoration color for commenting glyphs for unresolved comment threads.'));\nregisterColor('editorGutter.commentDraftGlyphForeground', editorGutterCommentGlyphForeground, nls.localize('editorGutterCommentDraftGlyphForeground', 'Editor gutter decoration color for commenting glyphs for comment threads with draft comments.'));\n\nexport class CommentGlyphWidget extends Disposable {\n\tpublic static description = 'comment-glyph-widget';\n\tprivate _lineNumber!: number;\n\tprivate _editor: ICodeEditor;\n\tprivate _threadState: CommentThreadState | undefined;\n\tprivate _threadHasDraft: boolean = false;\n\tprivate readonly _commentsDecorations: IEditorDecorationsCollection;\n\tprivate _commentsOptions: ModelDecorationOptions;\n\n\tprivate readonly _onDidChangeLineNumber = this._register(new Emitter<number>());\n\tpublic readonly onDidChangeLineNumber = this._onDidChangeLineNumber.event;\n\n\tconstructor(editor: ICodeEditor, lineNumber: number) {\n\t\tsuper();\n\t\tthis._commentsOptions = this.createDecorationOptions();\n\t\tthis._editor = editor;\n\t\tthis._commentsDecorations = this._editor.createDecorationsCollection();\n\t\tthis._register(this._commentsDecorations.onDidChange(e => {\n\t\t\tconst range = (this._commentsDecorations.length > 0 ? this._commentsDecorations.getRange(0) : null);\n\t\t\tif (range && range.endLineNumber !== this._lineNumber) {\n\t\t\t\tthis._lineNumber = range.endLineNumber;\n\t\t\t\tthis._onDidChangeLineNumber.fire(this._lineNumber);\n\t\t\t}\n\t\t}));\n\t\tthis._register(toDisposable(() => this._commentsDecorations.clear()));\n\t\tthis.setLineNumber(lineNumber);\n\t}\n\n\tprivate createDecorationOptions(): ModelDecorationOptions {\n\t\t// Priority: draft > unresolved > resolved\n\t\tlet className: string;\n\t\tif (this._threadHasDraft) {\n\t\t\tclassName = 'comment-range-glyph comment-thread-draft';\n\t\t} else {\n\t\t\tconst unresolved = this._threadState === CommentThreadState.Unresolved;\n\t\t\tclassName = `comment-range-glyph comment-thread${unresolved ? '-unresolved' : ''}`;\n\t\t}\n\n\t\tconst decorationOptions: IModelDecorationOptions = {\n\t\t\tdescription: CommentGlyphWidget.description,\n\t\t\tisWholeLine: true,\n\t\t\toverviewRuler: {\n\t\t\t\tcolor: themeColorFromId(this._threadHasDraft ? overviewRulerCommentDraftForeground :\n\t\t\t\t\t(this._threadState === CommentThreadState.Unresolved ? overviewRulerCommentUnresolvedForeground : overviewRulerCommentForeground)),\n\t\t\t\tposition: OverviewRulerLane.Center\n\t\t\t},\n\t\t\tcollapseOnReplaceEdit: true,\n\t\t\tlinesDecorationsClassName: className\n\t\t};\n\n\t\treturn ModelDecorationOptions.createDynamic(decorationOptions);\n\t}\n\n\tsetThreadState(state: CommentThreadState | undefined, hasDraft: boolean = false): void {\n\t\tif (this._threadState !== state || this._threadHasDraft !== hasDraft) {\n\t\t\tthis._threadState = state;\n\t\t\tthis._threadHasDraft = hasDraft;\n\t\t\tthis._commentsOptions = this.createDecorationOptions();\n\t\t\tthis._updateDecorations();\n\t\t}\n\t}\n\n\tprivate _updateDecorations(): void {\n\t\tconst commentsDecorations = [{\n\t\t\trange: {\n\t\t\t\tstartLineNumber: this._lineNumber, startColumn: 1,\n\t\t\t\tendLineNumber: this._lineNumber, endColumn: 1\n\t\t\t},\n\t\t\toptions: this._commentsOptions\n\t\t}];\n\n\t\tthis._commentsDecorations.set(commentsDecorations);\n\t}\n\n\tsetLineNumber(lineNumber: number): void {\n\t\tthis._lineNumber = lineNumber;\n\t\tthis._updateDecorations();\n\t}\n\n\tgetPosition(): IContentWidgetPosition {\n\t\tconst range = (this._commentsDecorations.length > 0 ? this._commentsDecorations.getRange(0) : null);\n\n\t\treturn {\n\t\t\tposition: {\n\t\t\t\tlineNumber: range ? range.endLineNumber : this._lineNumber,\n\t\t\t\tcolumn: 1\n\t\t\t},\n\t\t\tpreference: [ContentWidgetPositionPreference.EXACT]\n\t\t};\n\t}\n}\n"]}