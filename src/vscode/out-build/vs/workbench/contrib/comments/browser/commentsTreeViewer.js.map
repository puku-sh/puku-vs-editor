{"version":3,"sources":["vs/workbench/contrib/comments/browser/commentsTreeViewer.ts"],"names":[],"mappings":"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","file":"commentsTreeViewer.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as nls from '../../../../nls.js';\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IResourceLabel, ResourceLabels } from '../../../browser/labels.js';\nimport { CommentNode, ResourceWithCommentThreads } from '../common/commentModel.js';\nimport { ITreeContextMenuEvent, ITreeFilter, ITreeNode, TreeFilterResult, TreeVisibility } from '../../../../base/browser/ui/tree/tree.js';\nimport { IListVirtualDelegate, IListRenderer } from '../../../../base/browser/ui/list/list.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IListService, IWorkbenchAsyncDataTreeOptions, WorkbenchObjectTree } from '../../../../platform/list/browser/listService.js';\nimport { IColorTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { TimestampWidget } from './timestamp.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { commentViewThreadStateColorVar, getCommentThreadStateIconColor } from './commentColors.js';\nimport { CommentThreadApplicability, CommentThreadState, CommentState } from '../../../../editor/common/languages.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { IMatch } from '../../../../base/common/filters.js';\nimport { FilterOptions } from './commentsFilterOptions.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { IStyleOverride } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { IListStyles } from '../../../../base/browser/ui/list/listWidget.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { CommentsModel } from './commentsModel.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { ActionBar, IActionViewItemProvider } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { createActionViewItem, getContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IAction } from '../../../../base/common/actions.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { MarshalledCommentThread, MarshalledCommentThreadInternal } from '../../../common/comments.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nexport const COMMENTS_VIEW_ID = 'workbench.panel.comments';\nexport const COMMENTS_VIEW_STORAGE_ID = 'Comments';\nexport const COMMENTS_VIEW_TITLE: ILocalizedString = nls.localize2('comments.view.title', \"Comments\");\n\ninterface IResourceTemplateData {\n\tresourceLabel: IResourceLabel;\n\tseparator: HTMLElement;\n\towner: HTMLElement;\n}\n\ninterface ICommentThreadTemplateData {\n\tthreadMetadata: {\n\t\trelevance: HTMLElement;\n\t\ticon: HTMLElement;\n\t\tuserNames: HTMLSpanElement;\n\t\ttimestamp: TimestampWidget;\n\t\tseparator: HTMLElement;\n\t\tcommentPreview: HTMLSpanElement;\n\t\trange: HTMLElement;\n\t};\n\trepliesMetadata: {\n\t\tcontainer: HTMLElement;\n\t\ticon: HTMLElement;\n\t\tcount: HTMLSpanElement;\n\t\tlastReplyDetail: HTMLSpanElement;\n\t\tseparator: HTMLElement;\n\t\ttimestamp: TimestampWidget;\n\t};\n\tactionBar: ActionBar;\n\tdisposables: IDisposable[];\n}\n\nclass CommentsModelVirtualDelegate implements IListVirtualDelegate<ResourceWithCommentThreads | CommentNode> {\n\tprivate static readonly RESOURCE_ID = 'resource-with-comments';\n\tprivate static readonly COMMENT_ID = 'comment-node';\n\n\n\tgetHeight(element: any): number {\n\t\tif ((element instanceof CommentNode) && element.hasReply()) {\n\t\t\treturn 44;\n\t\t}\n\t\treturn 22;\n\t}\n\n\tpublic getTemplateId(element: any): string {\n\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\treturn CommentsModelVirtualDelegate.RESOURCE_ID;\n\t\t}\n\t\tif (element instanceof CommentNode) {\n\t\t\treturn CommentsModelVirtualDelegate.COMMENT_ID;\n\t\t}\n\n\t\treturn '';\n\t}\n}\n\nexport class ResourceWithCommentsRenderer implements IListRenderer<ITreeNode<ResourceWithCommentThreads>, IResourceTemplateData> {\n\ttemplateId: string = 'resource-with-comments';\n\n\tconstructor(\n\t\tprivate labels: ResourceLabels\n\t) {\n\t}\n\n\trenderTemplate(container: HTMLElement) {\n\t\tconst labelContainer = dom.append(container, dom.$('.resource-container'));\n\t\tconst resourceLabel = this.labels.create(labelContainer);\n\t\tconst separator = dom.append(labelContainer, dom.$('.separator'));\n\t\tconst owner = labelContainer.appendChild(dom.$('.owner'));\n\n\t\treturn { resourceLabel, owner, separator };\n\t}\n\n\trenderElement(node: ITreeNode<ResourceWithCommentThreads>, index: number, templateData: IResourceTemplateData): void {\n\t\ttemplateData.resourceLabel.setFile(node.element.resource);\n\t\ttemplateData.separator.innerText = '\\u00b7';\n\n\t\tif (node.element.ownerLabel) {\n\t\t\ttemplateData.owner.innerText = node.element.ownerLabel;\n\t\t\ttemplateData.separator.style.display = 'inline';\n\t\t} else {\n\t\t\ttemplateData.owner.innerText = '';\n\t\t\ttemplateData.separator.style.display = 'none';\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: IResourceTemplateData): void {\n\t\ttemplateData.resourceLabel.dispose();\n\t}\n}\n\nexport class CommentsMenus implements IDisposable {\n\tprivate contextKeyService: IContextKeyService | undefined;\n\n\tconstructor(\n\t\t@IMenuService private readonly menuService: IMenuService\n\t) { }\n\n\tgetResourceActions(element: CommentNode): { actions: IAction[] } {\n\t\tconst actions = this.getActions(MenuId.CommentsViewThreadActions, element);\n\t\treturn { actions: actions.primary };\n\t}\n\n\tgetResourceContextActions(element: CommentNode): IAction[] {\n\t\treturn this.getActions(MenuId.CommentsViewThreadActions, element).secondary;\n\t}\n\n\tpublic setContextKeyService(service: IContextKeyService) {\n\t\tthis.contextKeyService = service;\n\t}\n\n\tprivate getActions(menuId: MenuId, element: CommentNode): { primary: IAction[]; secondary: IAction[] } {\n\t\tif (!this.contextKeyService) {\n\t\t\treturn { primary: [], secondary: [] };\n\t\t}\n\n\t\tconst overlay: [string, any][] = [\n\t\t\t['commentController', element.owner],\n\t\t\t['resourceScheme', element.resource.scheme],\n\t\t\t['commentThread', element.contextValue],\n\t\t\t['canReply', element.thread.canReply]\n\t\t];\n\t\tconst contextKeyService = this.contextKeyService.createOverlay(overlay);\n\n\t\tconst menu = this.menuService.getMenuActions(menuId, contextKeyService, { shouldForwardArgs: true });\n\t\treturn getContextMenuActions(menu, 'inline');\n\t}\n\n\tdispose() {\n\t\tthis.contextKeyService = undefined;\n\t}\n}\n\nexport class CommentNodeRenderer implements IListRenderer<ITreeNode<CommentNode>, ICommentThreadTemplateData> {\n\ttemplateId: string = 'comment-node';\n\n\tconstructor(\n\t\tprivate actionViewItemProvider: IActionViewItemProvider,\n\t\tprivate menus: CommentsMenus,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IThemeService private themeService: IThemeService\n\t) { }\n\n\trenderTemplate(container: HTMLElement) {\n\t\tconst threadContainer = dom.append(container, dom.$('.comment-thread-container'));\n\t\tconst metadataContainer = dom.append(threadContainer, dom.$('.comment-metadata-container'));\n\t\tconst metadata = dom.append(metadataContainer, dom.$('.comment-metadata'));\n\n\t\tconst icon = dom.append(metadata, dom.$('.icon'));\n\t\tconst userNames = dom.append(metadata, dom.$('.user'));\n\t\tconst timestamp = new TimestampWidget(this.configurationService, this.hoverService, dom.append(metadata, dom.$('.timestamp-container')));\n\t\tconst relevance = dom.append(metadata, dom.$('.relevance'));\n\t\tconst separator = dom.append(metadata, dom.$('.separator'));\n\t\tconst commentPreview = dom.append(metadata, dom.$('.text'));\n\t\tconst rangeContainer = dom.append(metadata, dom.$('.range'));\n\t\tconst range = dom.$('p');\n\t\trangeContainer.appendChild(range);\n\n\t\tconst threadMetadata = {\n\t\t\ticon,\n\t\t\tuserNames,\n\t\t\ttimestamp,\n\t\t\trelevance,\n\t\t\tseparator,\n\t\t\tcommentPreview,\n\t\t\trange\n\t\t};\n\t\tthreadMetadata.separator.innerText = '\\u00b7';\n\n\t\tconst actionsContainer = dom.append(metadataContainer, dom.$('.actions'));\n\t\tconst actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider: this.actionViewItemProvider\n\t\t});\n\n\t\tconst snippetContainer = dom.append(threadContainer, dom.$('.comment-snippet-container'));\n\t\tconst repliesMetadata = {\n\t\t\tcontainer: snippetContainer,\n\t\t\ticon: dom.append(snippetContainer, dom.$('.icon')),\n\t\t\tcount: dom.append(snippetContainer, dom.$('.count')),\n\t\t\tlastReplyDetail: dom.append(snippetContainer, dom.$('.reply-detail')),\n\t\t\tseparator: dom.append(snippetContainer, dom.$('.separator')),\n\t\t\ttimestamp: new TimestampWidget(this.configurationService, this.hoverService, dom.append(snippetContainer, dom.$('.timestamp-container'))),\n\t\t};\n\t\trepliesMetadata.separator.innerText = '\\u00b7';\n\t\trepliesMetadata.icon.classList.add(...ThemeIcon.asClassNameArray(Codicon.indent));\n\n\t\tconst disposables = [threadMetadata.timestamp, repliesMetadata.timestamp];\n\t\treturn { threadMetadata, repliesMetadata, actionBar, disposables };\n\t}\n\n\tprivate getCountString(commentCount: number): string {\n\t\tif (commentCount > 2) {\n\t\t\treturn nls.localize('commentsCountReplies', \"{0} replies\", commentCount - 1);\n\t\t} else if (commentCount === 2) {\n\t\t\treturn nls.localize('commentsCountReply', \"1 reply\");\n\t\t} else {\n\t\t\treturn nls.localize('commentCount', \"1 comment\");\n\t\t}\n\t}\n\n\tprivate getRenderedComment(commentBody: IMarkdownString) {\n\t\tconst renderedComment = renderMarkdown(commentBody, {}, document.createElement('span'));\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst images = renderedComment.element.getElementsByTagName('img');\n\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\tconst image = images[i];\n\t\t\tconst textDescription = dom.$('');\n\t\t\ttextDescription.textContent = image.alt ? nls.localize('imageWithLabel', \"Image: {0}\", image.alt) : nls.localize('image', \"Image\");\n\t\t\timage.replaceWith(textDescription);\n\t\t}\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst headings = [...renderedComment.element.getElementsByTagName('h1'), ...renderedComment.element.getElementsByTagName('h2'), ...renderedComment.element.getElementsByTagName('h3'), ...renderedComment.element.getElementsByTagName('h4'), ...renderedComment.element.getElementsByTagName('h5'), ...renderedComment.element.getElementsByTagName('h6')];\n\t\tfor (const heading of headings) {\n\t\t\tconst textNode = document.createTextNode(heading.textContent || '');\n\t\t\theading.replaceWith(textNode);\n\t\t}\n\t\twhile ((renderedComment.element.children.length > 1) && (renderedComment.element.firstElementChild?.tagName === 'HR')) {\n\t\t\trenderedComment.element.removeChild(renderedComment.element.firstElementChild);\n\t\t}\n\t\treturn renderedComment;\n\t}\n\n\tprivate getIcon(threadState?: CommentThreadState, hasDraft?: boolean): ThemeIcon {\n\t\t// Priority: draft > unresolved > resolved\n\t\tif (hasDraft) {\n\t\t\treturn Codicon.commentDraft;\n\t\t} else if (threadState === CommentThreadState.Unresolved) {\n\t\t\treturn Codicon.commentUnresolved;\n\t\t} else {\n\t\t\treturn Codicon.comment;\n\t\t}\n\t}\n\n\trenderElement(node: ITreeNode<CommentNode>, index: number, templateData: ICommentThreadTemplateData): void {\n\t\ttemplateData.actionBar.clear();\n\n\t\tconst commentCount = node.element.replies.length + 1;\n\t\tif (node.element.threadRelevance === CommentThreadApplicability.Outdated) {\n\t\t\ttemplateData.threadMetadata.relevance.style.display = '';\n\t\t\ttemplateData.threadMetadata.relevance.innerText = nls.localize('outdated', \"Outdated\");\n\t\t\ttemplateData.threadMetadata.separator.style.display = 'none';\n\t\t} else {\n\t\t\ttemplateData.threadMetadata.relevance.innerText = '';\n\t\t\ttemplateData.threadMetadata.relevance.style.display = 'none';\n\t\t\ttemplateData.threadMetadata.separator.style.display = '';\n\t\t}\n\n\t\ttemplateData.threadMetadata.icon.classList.remove(...Array.from(templateData.threadMetadata.icon.classList.values())\n\t\t\t.filter(value => value.startsWith('codicon')));\n\t\t// Check if any comment in the thread has draft state\n\t\tconst hasDraft = node.element.thread.comments?.some(comment => comment.state === CommentState.Draft);\n\t\ttemplateData.threadMetadata.icon.classList.add(...ThemeIcon.asClassNameArray(this.getIcon(node.element.threadState, hasDraft)));\n\t\tif (node.element.threadState !== undefined) {\n\t\t\tconst color = this.getCommentThreadWidgetStateColor(node.element.threadState, this.themeService.getColorTheme());\n\t\t\ttemplateData.threadMetadata.icon.style.setProperty(commentViewThreadStateColorVar, `${color}`);\n\t\t\ttemplateData.threadMetadata.icon.style.color = `var(${commentViewThreadStateColorVar})`;\n\t\t}\n\t\ttemplateData.threadMetadata.userNames.textContent = node.element.comment.userName;\n\t\ttemplateData.threadMetadata.timestamp.setTimestamp(node.element.comment.timestamp ? new Date(node.element.comment.timestamp) : undefined);\n\t\tconst originalComment = node.element;\n\n\t\ttemplateData.threadMetadata.commentPreview.innerText = '';\n\t\ttemplateData.threadMetadata.commentPreview.style.height = '22px';\n\t\tif (typeof originalComment.comment.body === 'string') {\n\t\t\ttemplateData.threadMetadata.commentPreview.innerText = originalComment.comment.body;\n\t\t} else {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\ttemplateData.disposables.push(disposables);\n\t\t\tconst renderedComment = this.getRenderedComment(originalComment.comment.body);\n\t\t\ttemplateData.disposables.push(renderedComment);\n\t\t\tfor (let i = renderedComment.element.children.length - 1; i >= 1; i--) {\n\t\t\t\trenderedComment.element.removeChild(renderedComment.element.children[i]);\n\t\t\t}\n\t\t\ttemplateData.threadMetadata.commentPreview.appendChild(renderedComment.element);\n\t\t\ttemplateData.disposables.push(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), templateData.threadMetadata.commentPreview, renderedComment.element.textContent ?? ''));\n\t\t}\n\n\t\tif (node.element.range) {\n\t\t\tif (node.element.range.startLineNumber === node.element.range.endLineNumber) {\n\t\t\t\ttemplateData.threadMetadata.range.textContent = nls.localize('commentLine', \"[Ln {0}]\", node.element.range.startLineNumber);\n\t\t\t} else {\n\t\t\t\ttemplateData.threadMetadata.range.textContent = nls.localize('commentRange', \"[Ln {0}-{1}]\", node.element.range.startLineNumber, node.element.range.endLineNumber);\n\t\t\t}\n\t\t}\n\n\t\tconst menuActions = this.menus.getResourceActions(node.element);\n\t\ttemplateData.actionBar.push(menuActions.actions, { icon: true, label: false });\n\t\ttemplateData.actionBar.context = {\n\t\t\tcommentControlHandle: node.element.controllerHandle,\n\t\t\tcommentThreadHandle: node.element.threadHandle,\n\t\t\t$mid: MarshalledId.CommentThread\n\t\t} satisfies MarshalledCommentThread;\n\n\t\tif (!node.element.hasReply()) {\n\t\t\ttemplateData.repliesMetadata.container.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\n\t\ttemplateData.repliesMetadata.container.style.display = '';\n\t\ttemplateData.repliesMetadata.count.textContent = this.getCountString(commentCount);\n\t\tconst lastComment = node.element.replies[node.element.replies.length - 1].comment;\n\t\ttemplateData.repliesMetadata.lastReplyDetail.textContent = nls.localize('lastReplyFrom', \"Last reply from {0}\", lastComment.userName);\n\t\ttemplateData.repliesMetadata.timestamp.setTimestamp(lastComment.timestamp ? new Date(lastComment.timestamp) : undefined);\n\t}\n\n\tprivate getCommentThreadWidgetStateColor(state: CommentThreadState | undefined, theme: IColorTheme): Color | undefined {\n\t\treturn (state !== undefined) ? getCommentThreadStateIconColor(state, theme) : undefined;\n\t}\n\n\tdisposeTemplate(templateData: ICommentThreadTemplateData): void {\n\t\ttemplateData.disposables.forEach(disposeable => disposeable.dispose());\n\t\ttemplateData.actionBar.dispose();\n\t}\n}\n\nexport interface ICommentsListOptions extends IWorkbenchAsyncDataTreeOptions<any, any> {\n\toverrideStyles?: IStyleOverride<IListStyles>;\n}\n\nconst enum FilterDataType {\n\tResource,\n\tComment\n}\n\ninterface ResourceFilterData {\n\ttype: FilterDataType.Resource;\n\turiMatches: IMatch[];\n}\n\ninterface CommentFilterData {\n\ttype: FilterDataType.Comment;\n\ttextMatches: IMatch[];\n}\n\ntype FilterData = ResourceFilterData | CommentFilterData;\n\nexport class Filter implements ITreeFilter<ResourceWithCommentThreads | CommentNode, FilterData> {\n\n\tconstructor(public options: FilterOptions) { }\n\n\tfilter(element: ResourceWithCommentThreads | CommentNode, parentVisibility: TreeVisibility): TreeFilterResult<FilterData> {\n\t\tif (this.options.filter === '' && this.options.showResolved && this.options.showUnresolved) {\n\t\t\treturn TreeVisibility.Visible;\n\t\t}\n\n\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\treturn this.filterResourceMarkers(element);\n\t\t} else {\n\t\t\treturn this.filterCommentNode(element, parentVisibility);\n\t\t}\n\t}\n\n\tprivate filterResourceMarkers(resourceMarkers: ResourceWithCommentThreads): TreeFilterResult<FilterData> {\n\t\t// Filter by text. Do not apply negated filters on resources instead use exclude patterns\n\t\tif (this.options.textFilter.text && !this.options.textFilter.negate) {\n\t\t\tconst uriMatches = FilterOptions._filter(this.options.textFilter.text, basename(resourceMarkers.resource));\n\t\t\tif (uriMatches) {\n\t\t\t\treturn { visibility: true, data: { type: FilterDataType.Resource, uriMatches: uriMatches || [] } };\n\t\t\t}\n\t\t}\n\n\t\treturn TreeVisibility.Recurse;\n\t}\n\n\tprivate filterCommentNode(comment: CommentNode, parentVisibility: TreeVisibility): TreeFilterResult<FilterData> {\n\t\tconst matchesResolvedState = (comment.threadState === undefined) || (this.options.showResolved && CommentThreadState.Resolved === comment.threadState) ||\n\t\t\t(this.options.showUnresolved && CommentThreadState.Unresolved === comment.threadState);\n\n\t\tif (!matchesResolvedState) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.options.textFilter.text) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst textMatches =\n\t\t\t// Check body of comment for value\n\t\t\tFilterOptions._messageFilter(this.options.textFilter.text, typeof comment.comment.body === 'string' ? comment.comment.body : comment.comment.body.value)\n\t\t\t// Check first user for value\n\t\t\t|| FilterOptions._messageFilter(this.options.textFilter.text, comment.comment.userName)\n\t\t\t// Check all replies for value\n\t\t\t|| (comment.replies.map(reply => {\n\t\t\t\t// Check user for value\n\t\t\t\treturn FilterOptions._messageFilter(this.options.textFilter.text, reply.comment.userName)\n\t\t\t\t\t// Check body of reply for value\n\t\t\t\t\t|| FilterOptions._messageFilter(this.options.textFilter.text, typeof reply.comment.body === 'string' ? reply.comment.body : reply.comment.body.value);\n\t\t\t}).filter(value => !!value) as IMatch[][]).flat();\n\n\t\t// Matched and not negated\n\t\tif (textMatches.length && !this.options.textFilter.negate) {\n\t\t\treturn { visibility: true, data: { type: FilterDataType.Comment, textMatches } };\n\t\t}\n\n\t\t// Matched and negated - exclude it only if parent visibility is not set\n\t\tif (textMatches.length && this.options.textFilter.negate && parentVisibility === TreeVisibility.Recurse) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Not matched and negated - include it only if parent visibility is not set\n\t\tif ((textMatches.length === 0) && this.options.textFilter.negate && parentVisibility === TreeVisibility.Recurse) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn parentVisibility;\n\t}\n}\n\nexport class CommentsList extends WorkbenchObjectTree<CommentsModel | ResourceWithCommentThreads | CommentNode, any> {\n\tprivate readonly menus: CommentsMenus;\n\n\tconstructor(\n\t\tlabels: ResourceLabels,\n\t\tcontainer: HTMLElement,\n\t\toptions: ICommentsListOptions,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService\n\t) {\n\t\tconst delegate = new CommentsModelVirtualDelegate();\n\t\tconst actionViewItemProvider = createActionViewItem.bind(undefined, instantiationService);\n\t\tconst menus = instantiationService.createInstance(CommentsMenus);\n\t\tmenus.setContextKeyService(contextKeyService);\n\t\tconst renderers = [\n\t\t\tinstantiationService.createInstance(ResourceWithCommentsRenderer, labels),\n\t\t\tinstantiationService.createInstance(CommentNodeRenderer, actionViewItemProvider, menus)\n\t\t];\n\n\t\tsuper(\n\t\t\t'CommentsTree',\n\t\t\tcontainer,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\taccessibilityProvider: options.accessibilityProvider,\n\t\t\t\tidentityProvider: {\n\t\t\t\t\tgetId: (element: any) => {\n\t\t\t\t\t\tif (element instanceof CommentsModel) {\n\t\t\t\t\t\t\treturn 'root';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\t\t\t\t\treturn `${element.uniqueOwner}-${element.id}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element instanceof CommentNode) {\n\t\t\t\t\t\t\treturn `${element.uniqueOwner}-${element.resource.toString()}-${element.threadId}-${element.comment.uniqueIdInThread}` + (element.isRoot ? '-root' : '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\t\tcollapseByDefault: false,\n\t\t\t\toverrideStyles: options.overrideStyles,\n\t\t\t\tfilter: options.filter,\n\t\t\t\tsorter: options.sorter,\n\t\t\t\tfindWidgetEnabled: false,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t},\n\t\t\tinstantiationService,\n\t\t\tcontextKeyService,\n\t\t\tlistService,\n\t\t\tconfigurationService,\n\t\t);\n\t\tthis.menus = menus;\n\t\tthis.disposables.add(this.onContextMenu(e => this.commentsOnContextMenu(e)));\n\t}\n\n\tprivate commentsOnContextMenu(treeEvent: ITreeContextMenuEvent<CommentsModel | ResourceWithCommentThreads | CommentNode | null>): void {\n\t\tconst node: CommentsModel | ResourceWithCommentThreads | CommentNode | null = treeEvent.element;\n\t\tif (!(node instanceof CommentNode)) {\n\t\t\treturn;\n\t\t}\n\t\tconst event: UIEvent = treeEvent.browserEvent;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.setFocus([node]);\n\t\tconst actions = this.menus.getResourceContextActions(node);\n\t\tif (!actions.length) {\n\t\t\treturn;\n\t\t}\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => treeEvent.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetActionsContext: (): MarshalledCommentThreadInternal => ({\n\t\t\t\tcommentControlHandle: node.controllerHandle,\n\t\t\t\tcommentThreadHandle: node.threadHandle,\n\t\t\t\t$mid: MarshalledId.CommentThread,\n\t\t\t\tthread: node.thread\n\t\t\t})\n\t\t});\n\t}\n\n\tfilterComments(): void {\n\t\tthis.refilter();\n\t}\n\n\tgetVisibleItemCount(): number {\n\t\tlet filtered = 0;\n\t\tconst root = this.getNode();\n\n\t\tfor (const resourceNode of root.children) {\n\t\t\tfor (const commentNode of resourceNode.children) {\n\t\t\t\tif (commentNode.visible && resourceNode.visible) {\n\t\t\t\t\tfiltered++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn filtered;\n\t}\n}\n"]}