{"version":3,"sources":["vs/workbench/contrib/comments/browser/commentReply.ts"],"names":[],"mappings":"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","file":"commentReply.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from '../../../../base/browser/ui/mouseCursor/mouseCursor.js';\nimport { IAction } from '../../../../base/common/actions.js';\nimport { Disposable, IDisposable, dispose } from '../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { FileAccess, Schemas } from '../../../../base/common/network.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { CommentFormActions } from './commentFormActions.js';\nimport { CommentMenus } from './commentMenus.js';\nimport { ICommentService } from './commentService.js';\nimport { CommentContextKeys } from '../common/commentContextKeys.js';\nimport { ICommentThreadWidget } from '../common/commentThreadWidget.js';\nimport { ICellRange } from '../../notebook/common/notebookRange.js';\nimport { LayoutableEditor, MIN_EDITOR_HEIGHT, SimpleCommentEditor, calculateEditorHeight } from './simpleCommentEditor.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { Position } from '../../../../editor/common/core/position.js';\n\nlet INMEM_MODEL_ID = 0;\nexport const COMMENTEDITOR_DECORATION_KEY = 'commenteditordecoration';\n\nexport class CommentReply<T extends IRange | ICellRange> extends Disposable {\n\tcommentEditor: ICodeEditor;\n\tprivate _container: HTMLElement;\n\tprivate _form: HTMLElement;\n\tcommentEditorIsEmpty: IContextKey<boolean>;\n\tprivate avatar!: HTMLElement;\n\tprivate _error!: HTMLElement;\n\tprivate _formActions!: HTMLElement;\n\tprivate _editorActions!: HTMLElement;\n\tprivate _commentThreadDisposables: IDisposable[] = [];\n\tprivate _commentFormActions!: CommentFormActions;\n\tprivate _commentEditorActions!: CommentFormActions;\n\tprivate _reviewThreadReplyButton!: HTMLElement;\n\tprivate _editorHeight = MIN_EDITOR_HEIGHT;\n\n\tconstructor(\n\t\treadonly owner: string,\n\t\tcontainer: HTMLElement,\n\t\tprivate readonly _parentEditor: LayoutableEditor,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _scopedInstatiationService: IInstantiationService,\n\t\tprivate _contextKeyService: IContextKeyService,\n\t\tprivate _commentMenus: CommentMenus,\n\t\tprivate _commentOptions: languages.CommentOptions | undefined,\n\t\tprivate _pendingComment: languages.PendingComment | undefined,\n\t\tprivate _parentThread: ICommentThreadWidget,\n\t\tfocus: boolean,\n\t\tprivate _actionRunDelegate: (() => void) | null,\n\t\t@ICommentService private commentService: ICommentService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IKeybindingService private keybindingService: IKeybindingService,\n\t\t@IContextMenuService private contextMenuService: IContextMenuService,\n\t\t@IHoverService private hoverService: IHoverService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService\n\t) {\n\t\tsuper();\n\t\tthis._container = dom.append(container, dom.$('.comment-form-container'));\n\t\tthis._form = dom.append(this._container, dom.$('.comment-form'));\n\t\tthis.commentEditor = this._register(this._scopedInstatiationService.createInstance(SimpleCommentEditor, this._form, SimpleCommentEditor.getEditorOptions(configurationService), _contextKeyService, this._parentThread));\n\t\tthis.commentEditorIsEmpty = CommentContextKeys.commentIsEmpty.bindTo(this._contextKeyService);\n\t\tthis.commentEditorIsEmpty.set(!this._pendingComment);\n\n\t\tthis.initialize(focus);\n\t}\n\n\tprivate async initialize(focus: boolean) {\n\t\tthis.avatar = dom.append(this._form, dom.$('.avatar-container'));\n\t\tthis.updateAuthorInfo();\n\t\tconst hasExistingComments = this._commentThread.comments && this._commentThread.comments.length > 0;\n\t\tconst modeId = generateUuid() + '-' + (hasExistingComments ? this._commentThread.threadId : ++INMEM_MODEL_ID);\n\t\tconst params = JSON.stringify({\n\t\t\textensionId: this._commentThread.extensionId,\n\t\t\tcommentThreadId: this._commentThread.threadId\n\t\t});\n\n\t\tlet resource = URI.from({\n\t\t\tscheme: Schemas.commentsInput,\n\t\t\tpath: `/${this._commentThread.extensionId}/commentinput-${modeId}.md?${params}` // TODO. Remove params once extensions adopt authority.\n\t\t});\n\t\tconst commentController = this.commentService.getCommentController(this.owner);\n\t\tif (commentController) {\n\t\t\tresource = resource.with({ authority: commentController.id });\n\t\t}\n\n\t\tconst model = await this.textModelService.createModelReference(resource);\n\t\tmodel.object.textEditorModel.setValue(this._pendingComment?.body || '');\n\n\t\tthis._register(model);\n\t\tthis.commentEditor.setModel(model.object.textEditorModel);\n\t\tif (this._pendingComment) {\n\t\t\tthis.commentEditor.setPosition(this._pendingComment.cursor);\n\t\t}\n\t\tthis.calculateEditorHeight();\n\n\t\tthis._register(model.object.textEditorModel.onDidChangeContent(() => {\n\t\t\tthis.setCommentEditorDecorations();\n\t\t\tthis.commentEditorIsEmpty?.set(!this.commentEditor.getValue());\n\t\t\tif (this.calculateEditorHeight()) {\n\t\t\t\tthis.commentEditor.layout({ height: this._editorHeight, width: this.commentEditor.getLayoutInfo().width });\n\t\t\t\tthis.commentEditor.render(true);\n\t\t\t}\n\t\t}));\n\n\t\tthis.createTextModelListener(this.commentEditor, this._form);\n\n\t\tthis.setCommentEditorDecorations();\n\n\t\t// Only add the additional step of clicking a reply button to expand the textarea when there are existing comments\n\t\tif (this._pendingComment) {\n\t\t\tthis.expandReplyArea();\n\t\t} else if (hasExistingComments) {\n\t\t\tthis.createReplyButton(this.commentEditor, this._form);\n\t\t} else if (this._commentThread.comments && this._commentThread.comments.length === 0) {\n\t\t\tthis.expandReplyArea(focus);\n\t\t}\n\t\tthis._error = dom.append(this._container, dom.$('.validation-error.hidden'));\n\t\tconst formActions = dom.append(this._container, dom.$('.form-actions'));\n\t\tthis._formActions = dom.append(formActions, dom.$('.other-actions'));\n\t\tthis.createCommentWidgetFormActions(this._formActions, model.object.textEditorModel);\n\t\tthis._editorActions = dom.append(formActions, dom.$('.editor-actions'));\n\t\tthis.createCommentWidgetEditorActions(this._editorActions, model.object.textEditorModel);\n\t}\n\n\tprivate calculateEditorHeight(): boolean {\n\t\tconst newEditorHeight = calculateEditorHeight(this._parentEditor, this.commentEditor, this._editorHeight);\n\t\tif (newEditorHeight !== this._editorHeight) {\n\t\t\tthis._editorHeight = newEditorHeight;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic updateCommentThread(commentThread: languages.CommentThread<IRange | ICellRange>) {\n\t\tconst isReplying = this.commentEditor.hasTextFocus();\n\t\tconst oldAndNewBothEmpty = !this._commentThread.comments?.length && !commentThread.comments?.length;\n\n\t\tif (!this._reviewThreadReplyButton) {\n\t\t\tthis.createReplyButton(this.commentEditor, this._form);\n\t\t}\n\n\t\tif (this._commentThread.comments && this._commentThread.comments.length === 0 && !oldAndNewBothEmpty) {\n\t\t\tthis.expandReplyArea();\n\t\t}\n\n\t\tif (isReplying) {\n\t\t\tthis.commentEditor.focus();\n\t\t}\n\t}\n\n\tpublic getPendingComment(): languages.PendingComment | undefined {\n\t\tconst model = this.commentEditor.getModel();\n\n\t\tif (model && model.getValueLength() > 0) { // checking length is cheap\n\t\t\treturn { body: model.getValue(), cursor: this.commentEditor.getPosition() ?? new Position(1, 1) };\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tpublic setPendingComment(pending: languages.PendingComment) {\n\t\tthis._pendingComment = pending;\n\t\tthis.expandReplyArea();\n\t\tthis.commentEditor.setValue(pending.body);\n\t\tthis.commentEditor.setPosition(pending.cursor);\n\t}\n\n\tpublic layout(widthInPixel: number) {\n\t\tthis.commentEditor.layout({ height: this._editorHeight, width: widthInPixel - 54 /* margin 20px * 10 + scrollbar 14px*/ });\n\t}\n\n\tpublic focusIfNeeded() {\n\t\tif (!this._commentThread.comments || !this._commentThread.comments.length) {\n\t\t\tthis.commentEditor.focus();\n\t\t} else if ((this.commentEditor.getModel()?.getValueLength() ?? 0) > 0) {\n\t\t\tthis.expandReplyArea();\n\t\t}\n\t}\n\n\tpublic focusCommentEditor() {\n\t\tthis.commentEditor.focus();\n\t}\n\n\tpublic expandReplyAreaAndFocusCommentEditor() {\n\t\tthis.expandReplyArea();\n\t\tthis.commentEditor.focus();\n\t}\n\n\tpublic isCommentEditorFocused(): boolean {\n\t\treturn this.commentEditor.hasWidgetFocus();\n\t}\n\n\tprivate updateAuthorInfo() {\n\t\tthis.avatar.textContent = '';\n\t\tif (typeof this._commentThread.canReply !== 'boolean' && this._commentThread.canReply.iconPath) {\n\t\t\tthis.avatar.style.display = 'block';\n\t\t\tconst img = dom.append(this.avatar, dom.$('img.avatar')) as HTMLImageElement;\n\t\t\timg.src = FileAccess.uriToBrowserUri(URI.revive(this._commentThread.canReply.iconPath)).toString(true);\n\t\t} else {\n\t\t\tthis.avatar.style.display = 'none';\n\t\t}\n\t}\n\n\tpublic updateCanReply() {\n\t\tthis.updateAuthorInfo();\n\t\tif (!this._commentThread.canReply) {\n\t\t\tthis._container.style.display = 'none';\n\t\t} else {\n\t\t\tthis._container.style.display = 'block';\n\t\t}\n\t}\n\n\tasync submitComment(): Promise<void> {\n\t\tawait this._commentFormActions?.triggerDefaultAction();\n\t\tthis._pendingComment = undefined;\n\t}\n\n\tsetCommentEditorDecorations() {\n\t\tconst hasExistingComments = this._commentThread.comments && this._commentThread.comments.length > 0;\n\t\tconst placeholder = hasExistingComments\n\t\t\t? (this._commentOptions?.placeHolder || nls.localize('reply', \"Reply...\"))\n\t\t\t: (this._commentOptions?.placeHolder || nls.localize('newComment', \"Type a new comment\"));\n\n\t\tthis.commentEditor.updateOptions({ placeholder });\n\t}\n\n\tprivate createTextModelListener(commentEditor: ICodeEditor, commentForm: HTMLElement) {\n\t\tthis._commentThreadDisposables.push(commentEditor.onDidFocusEditorWidget(() => {\n\t\t\tthis._commentThread.input = {\n\t\t\t\turi: commentEditor.getModel()!.uri,\n\t\t\t\tvalue: commentEditor.getValue()\n\t\t\t};\n\t\t\tthis.commentService.setActiveEditingCommentThread(this._commentThread);\n\t\t\tthis.commentService.setActiveCommentAndThread(this.owner, { thread: this._commentThread });\n\t\t}));\n\n\t\tthis._commentThreadDisposables.push(commentEditor.getModel()!.onDidChangeContent(() => {\n\t\t\tconst modelContent = commentEditor.getValue();\n\t\t\tif (this._commentThread.input && this._commentThread.input.uri === commentEditor.getModel()!.uri && this._commentThread.input.value !== modelContent) {\n\t\t\t\tconst newInput: languages.CommentInput = this._commentThread.input;\n\t\t\t\tnewInput.value = modelContent;\n\t\t\t\tthis._commentThread.input = newInput;\n\t\t\t}\n\t\t\tthis.commentService.setActiveEditingCommentThread(this._commentThread);\n\t\t}));\n\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeInput(input => {\n\t\t\tconst thread = this._commentThread;\n\t\t\tconst model = commentEditor.getModel();\n\t\t\tif (thread.input && model && (thread.input.uri !== model.uri)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (commentEditor.getValue() !== input.value) {\n\t\t\t\tcommentEditor.setValue(input.value);\n\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tthis._pendingComment = { body: '', cursor: new Position(1, 1) };\n\t\t\t\t\tcommentForm.classList.remove('expand');\n\t\t\t\t\tcommentEditor.getDomNode()!.style.outline = '';\n\t\t\t\t\tthis._error.textContent = '';\n\t\t\t\t\tthis._error.classList.add('hidden');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\t/**\n\t * Command based actions.\n\t */\n\tprivate createCommentWidgetFormActions(container: HTMLElement, model: ITextModel) {\n\t\tconst menu = this._commentMenus.getCommentThreadActions(this._contextKeyService);\n\n\t\tthis._register(menu);\n\t\tthis._register(menu.onDidChange(() => {\n\t\t\tthis._commentFormActions.setActions(menu);\n\t\t}));\n\n\t\tthis._commentFormActions = new CommentFormActions(this.keybindingService, this._contextKeyService, this.contextMenuService, container, async (action: IAction) => {\n\t\t\tawait this._actionRunDelegate?.();\n\n\t\t\tawait action.run({\n\t\t\t\tthread: this._commentThread,\n\t\t\t\ttext: this.commentEditor.getValue(),\n\t\t\t\t$mid: MarshalledId.CommentThreadReply\n\t\t\t});\n\n\t\t\tthis.hideReplyArea();\n\t\t});\n\n\t\tthis._register(this._commentFormActions);\n\t\tthis._commentFormActions.setActions(menu);\n\t}\n\n\tprivate createCommentWidgetEditorActions(container: HTMLElement, model: ITextModel) {\n\t\tconst editorMenu = this._commentMenus.getCommentEditorActions(this._contextKeyService);\n\t\tthis._register(editorMenu);\n\t\tthis._register(editorMenu.onDidChange(() => {\n\t\t\tthis._commentEditorActions.setActions(editorMenu, true);\n\t\t}));\n\n\t\tthis._commentEditorActions = new CommentFormActions(this.keybindingService, this._contextKeyService, this.contextMenuService, container, async (action: IAction) => {\n\t\t\tthis._actionRunDelegate?.();\n\n\t\t\taction.run({\n\t\t\t\tthread: this._commentThread,\n\t\t\t\ttext: this.commentEditor.getValue(),\n\t\t\t\t$mid: MarshalledId.CommentThreadReply\n\t\t\t});\n\n\t\t\tthis.focusCommentEditor();\n\t\t});\n\n\t\tthis._register(this._commentEditorActions);\n\t\tthis._commentEditorActions.setActions(editorMenu, true);\n\t}\n\n\tprivate get isReplyExpanded(): boolean {\n\t\treturn this._container.classList.contains('expand');\n\t}\n\n\tprivate expandReplyArea(focus: boolean = true) {\n\t\tif (!this.isReplyExpanded) {\n\t\t\tthis._container.classList.add('expand');\n\t\t\tif (focus) {\n\t\t\t\tthis.commentEditor.focus();\n\t\t\t}\n\t\t\tthis.commentEditor.layout();\n\t\t}\n\t}\n\n\tprivate clearAndExpandReplyArea() {\n\t\tif (!this.isReplyExpanded) {\n\t\t\tthis.commentEditor.setValue('');\n\t\t\tthis.expandReplyArea();\n\t\t}\n\t}\n\n\tprivate hideReplyArea() {\n\t\tconst domNode = this.commentEditor.getDomNode();\n\t\tif (domNode) {\n\t\t\tdomNode.style.outline = '';\n\t\t}\n\t\tthis.commentEditor.setValue('');\n\t\tthis._pendingComment = { body: '', cursor: new Position(1, 1) };\n\t\tthis._container.classList.remove('expand');\n\t\tthis._error.textContent = '';\n\t\tthis._error.classList.add('hidden');\n\t}\n\n\tprivate createReplyButton(commentEditor: ICodeEditor, commentForm: HTMLElement) {\n\t\tthis._reviewThreadReplyButton = <HTMLButtonElement>dom.append(commentForm, dom.$(`button.review-thread-reply-button.${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`));\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), this._reviewThreadReplyButton, this._commentOptions?.prompt || nls.localize('reply', \"Reply...\")));\n\n\t\tthis._reviewThreadReplyButton.textContent = this._commentOptions?.prompt || nls.localize('reply', \"Reply...\");\n\t\t// bind click/escape actions for reviewThreadReplyButton and textArea\n\t\tthis._register(dom.addDisposableListener(this._reviewThreadReplyButton, 'click', _ => this.clearAndExpandReplyArea()));\n\t\tthis._register(dom.addDisposableListener(this._reviewThreadReplyButton, 'focus', _ => this.clearAndExpandReplyArea()));\n\n\t\tthis._register(commentEditor.onDidBlurEditorWidget(() => {\n\t\t\tif (commentEditor.getModel()!.getValueLength() === 0 && commentForm.classList.contains('expand')) {\n\t\t\t\tcommentForm.classList.remove('expand');\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tdispose(this._commentThreadDisposables);\n\t}\n}\n"]}