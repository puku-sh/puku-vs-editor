{"version":3,"sources":["vs/workbench/contrib/comments/browser/commentsView.ts"],"names":[],"mappings":"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","file":"commentsView.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/panel.css';\nimport * as nls from '../../../../nls.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { CommentNode, ICommentThreadChangedEvent, ResourceWithCommentThreads } from '../common/commentModel.js';\nimport { ICommentService, IWorkspaceCommentThreadsEvent } from './commentService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ResourceLabels } from '../../../browser/labels.js';\nimport { CommentsList, COMMENTS_VIEW_TITLE, Filter } from './commentsTreeViewer.js';\nimport { IViewPaneOptions, FilterViewPane } from '../../../browser/parts/views/viewPane.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { CommentsViewFilterFocusContextKey, ICommentsView } from './comments.js';\nimport { CommentsFilters, CommentsFiltersChangeEvent, CommentsSortOrder } from './commentsViewActions.js';\nimport { Memento } from '../../../common/memento.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { FilterOptions } from './commentsFilterOptions.js';\nimport { CommentThreadApplicability, CommentThreadState } from '../../../../editor/common/languages.js';\nimport { revealCommentThread } from './commentsController.js';\nimport { registerNavigableContainer } from '../../../browser/actions/widgetNavigationCommands.js';\nimport { CommentsModel, threadHasMeaningfulComments, type ICommentsModel } from './commentsModel.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { AccessibleViewAction } from '../../accessibility/browser/accessibleViewActions.js';\nimport type { ITreeElement } from '../../../../base/browser/ui/tree/tree.js';\nimport { IPathService } from '../../../services/path/common/pathService.js';\nimport { isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\n\nexport const CONTEXT_KEY_HAS_COMMENTS = new RawContextKey<boolean>('commentsView.hasComments', false);\nexport const CONTEXT_KEY_SOME_COMMENTS_EXPANDED = new RawContextKey<boolean>('commentsView.someCommentsExpanded', false);\nexport const CONTEXT_KEY_COMMENT_FOCUSED = new RawContextKey<boolean>('commentsView.commentFocused', false);\nconst VIEW_STORAGE_ID = 'commentsViewState';\n\ninterface CommentsViewState {\n\tfilter?: string;\n\tfilterHistory?: string[];\n\tshowResolved?: boolean;\n\tshowUnresolved?: boolean;\n\tsortBy?: CommentsSortOrder;\n}\n\ntype CommentsTreeNode = CommentsModel | ResourceWithCommentThreads | CommentNode;\n\nfunction createResourceCommentsIterator(model: ICommentsModel): Iterable<ITreeElement<CommentsTreeNode>> {\n\tconst result: ITreeElement<CommentsTreeNode>[] = [];\n\n\tfor (const m of model.resourceCommentThreads) {\n\t\tconst children = [];\n\t\tfor (const r of m.commentThreads) {\n\t\t\tif (threadHasMeaningfulComments(r.thread)) {\n\t\t\t\tchildren.push({ element: r });\n\t\t\t}\n\t\t}\n\t\tif (children.length > 0) {\n\t\t\tresult.push({ element: m, children });\n\t\t}\n\t}\n\treturn result;\n}\n\nexport class CommentsPanel extends FilterViewPane implements ICommentsView {\n\tprivate treeLabels!: ResourceLabels;\n\tprivate tree: CommentsList | undefined;\n\tprivate treeContainer!: HTMLElement;\n\tprivate messageBoxContainer!: HTMLElement;\n\tprivate totalComments: number = 0;\n\tprivate readonly hasCommentsContextKey: IContextKey<boolean>;\n\tprivate readonly someCommentsExpandedContextKey: IContextKey<boolean>;\n\tprivate readonly commentsFocusedContextKey: IContextKey<boolean>;\n\tprivate readonly filter: Filter;\n\treadonly filters: CommentsFilters;\n\n\tprivate currentHeight = 0;\n\tprivate currentWidth = 0;\n\tprivate readonly viewState: CommentsViewState;\n\tprivate readonly stateMemento: Memento<CommentsViewState>;\n\tprivate cachedFilterStats: { total: number; filtered: number } | undefined = undefined;\n\n\treadonly onDidChangeVisibility = this.onDidChangeBodyVisibility;\n\n\tget focusedCommentNode(): CommentNode | undefined {\n\t\tconst focused = this.tree?.getFocus();\n\t\tif (focused?.length === 1 && focused[0] instanceof CommentNode) {\n\t\t\treturn focused[0];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tget focusedCommentInfo(): string | undefined {\n\t\tif (!this.focusedCommentNode) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.getScreenReaderInfoForNode(this.focusedCommentNode);\n\t}\n\n\tfocusNextNode(): void {\n\t\tif (!this.tree) {\n\t\t\treturn;\n\t\t}\n\t\tconst focused = this.tree.getFocus()?.[0];\n\t\tif (!focused) {\n\t\t\treturn;\n\t\t}\n\t\tlet next = this.tree.navigate(focused).next();\n\t\twhile (next && !(next instanceof CommentNode)) {\n\t\t\tnext = this.tree.navigate(next).next();\n\t\t}\n\t\tif (!next) {\n\t\t\treturn;\n\t\t}\n\t\tthis.tree.setFocus([next]);\n\t}\n\n\tfocusPreviousNode(): void {\n\t\tif (!this.tree) {\n\t\t\treturn;\n\t\t}\n\t\tconst focused = this.tree.getFocus()?.[0];\n\t\tif (!focused) {\n\t\t\treturn;\n\t\t}\n\t\tlet previous = this.tree.navigate(focused).previous();\n\t\twhile (previous && !(previous instanceof CommentNode)) {\n\t\t\tprevious = this.tree.navigate(previous).previous();\n\t\t}\n\t\tif (!previous) {\n\t\t\treturn;\n\t\t}\n\t\tthis.tree.setFocus([previous]);\n\t}\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ICommentService private readonly commentService: ICommentService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IPathService private readonly pathService: IPathService,\n\t) {\n\t\tconst stateMemento = new Memento<CommentsViewState>(VIEW_STORAGE_ID, storageService);\n\t\tconst viewState = stateMemento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\tsuper({\n\t\t\t...options,\n\t\t\tfilterOptions: {\n\t\t\t\tplaceholder: nls.localize('comments.filter.placeholder', \"Filter (e.g. text, author)\"),\n\t\t\t\tariaLabel: nls.localize('comments.filter.ariaLabel', \"Filter comments\"),\n\t\t\t\thistory: viewState.filterHistory || [],\n\t\t\t\ttext: viewState.filter || '',\n\t\t\t\tfocusContextKey: CommentsViewFilterFocusContextKey.key\n\t\t\t}\n\t\t}, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, hoverService);\n\t\tthis.hasCommentsContextKey = CONTEXT_KEY_HAS_COMMENTS.bindTo(contextKeyService);\n\t\tthis.someCommentsExpandedContextKey = CONTEXT_KEY_SOME_COMMENTS_EXPANDED.bindTo(contextKeyService);\n\t\tthis.commentsFocusedContextKey = CONTEXT_KEY_COMMENT_FOCUSED.bindTo(contextKeyService);\n\t\tthis.stateMemento = stateMemento;\n\t\tthis.viewState = viewState;\n\n\t\tthis.filters = this._register(new CommentsFilters({\n\t\t\tshowResolved: this.viewState.showResolved !== false,\n\t\t\tshowUnresolved: this.viewState.showUnresolved !== false,\n\t\t\tsortBy: this.viewState.sortBy ?? CommentsSortOrder.ResourceAscending,\n\t\t}, this.contextKeyService));\n\t\tthis.filter = new Filter(new FilterOptions(this.filterWidget.getFilterText(), this.filters.showResolved, this.filters.showUnresolved));\n\n\t\tthis._register(this.filters.onDidChange((event: CommentsFiltersChangeEvent) => {\n\t\t\tif (event.showResolved || event.showUnresolved) {\n\t\t\t\tthis.updateFilter();\n\t\t\t}\n\t\t\tif (event.sortBy) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.filterWidget.onDidChangeFilterText(() => this.updateFilter()));\n\t}\n\n\toverride saveState(): void {\n\t\tthis.viewState.filter = this.filterWidget.getFilterText();\n\t\tthis.viewState.filterHistory = this.filterWidget.getHistory();\n\t\tthis.viewState.showResolved = this.filters.showResolved;\n\t\tthis.viewState.showUnresolved = this.filters.showUnresolved;\n\t\tthis.viewState.sortBy = this.filters.sortBy;\n\t\tthis.stateMemento.saveMemento();\n\t\tsuper.saveState();\n\t}\n\n\toverride render(): void {\n\t\tsuper.render();\n\t\tthis._register(registerNavigableContainer({\n\t\t\tname: 'commentsView',\n\t\t\tfocusNotifiers: [this, this.filterWidget],\n\t\t\tfocusNextWidget: () => {\n\t\t\t\tif (this.filterWidget.hasFocus()) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfocusPreviousWidget: () => {\n\t\t\t\tif (!this.filterWidget.hasFocus()) {\n\t\t\t\t\tthis.focusFilter();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic focusFilter(): void {\n\t\tthis.filterWidget.focus();\n\t}\n\n\tpublic clearFilterText(): void {\n\t\tthis.filterWidget.setFilterText('');\n\t}\n\n\tpublic getFilterStats(): { total: number; filtered: number } {\n\t\tif (!this.cachedFilterStats) {\n\t\t\tthis.cachedFilterStats = {\n\t\t\t\ttotal: this.totalComments,\n\t\t\t\tfiltered: this.tree?.getVisibleItemCount() ?? 0\n\t\t\t};\n\t\t}\n\n\t\treturn this.cachedFilterStats;\n\t}\n\n\tprivate updateFilter() {\n\t\tthis.filter.options = new FilterOptions(this.filterWidget.getFilterText(), this.filters.showResolved, this.filters.showUnresolved);\n\t\tthis.tree?.filterComments();\n\n\t\tthis.cachedFilterStats = undefined;\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\tthis.filterWidget.updateBadge(total === filtered || total === 0 ? undefined : nls.localize('showing filtered results', \"Showing {0} of {1}\", filtered, total));\n\t\tthis.filterWidget.checkMoreFilters(!this.filters.showResolved || !this.filters.showUnresolved);\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tcontainer.classList.add('comments-panel');\n\n\t\tconst domContainer = dom.append(container, dom.$('.comments-panel-container'));\n\n\t\tthis.treeContainer = dom.append(domContainer, dom.$('.tree-container'));\n\t\tthis.treeContainer.classList.add('file-icon-themable-tree', 'show-file-icons');\n\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.createTree();\n\t\tthis.createMessageBox(domContainer);\n\n\t\tthis._register(this.commentService.onDidSetAllCommentThreads(this.onAllCommentsChanged, this));\n\t\tthis._register(this.commentService.onDidUpdateCommentThreads(this.onCommentsUpdated, this));\n\t\tthis._register(this.commentService.onDidDeleteDataProvider(this.onDataProviderDeleted, this));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => {\n\t\t\tif (visible) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}));\n\n\t\tthis.renderComments();\n\t}\n\n\tpublic override focus(): void {\n\t\tsuper.focus();\n\n\t\tconst element = this.tree?.getHTMLElement();\n\t\tif (element && dom.isActiveElement(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.commentService.commentsModel.hasCommentThreads() && this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.focus();\n\t\t} else if (this.tree) {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\t}\n\n\tprivate renderComments(): void {\n\t\tthis.treeContainer.classList.toggle('hidden', !this.commentService.commentsModel.hasCommentThreads());\n\t\tthis.renderMessage();\n\t\tthis.tree?.setChildren(null, createResourceCommentsIterator(this.commentService.commentsModel));\n\t}\n\n\tpublic collapseAll() {\n\t\tif (this.tree) {\n\t\t\tthis.tree.collapseAll();\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.setFocus([]);\n\t\t\tthis.tree.domFocus();\n\t\t\tthis.tree.focusFirst();\n\t\t}\n\t}\n\n\tpublic expandAll() {\n\t\tif (this.tree) {\n\t\t\tthis.tree.expandAll();\n\t\t\tthis.tree.setSelection([]);\n\t\t\tthis.tree.setFocus([]);\n\t\t\tthis.tree.domFocus();\n\t\t\tthis.tree.focusFirst();\n\t\t}\n\t}\n\n\tpublic get hasRendered(): boolean {\n\t\treturn !!this.tree;\n\t}\n\n\tprotected layoutBodyContent(height: number = this.currentHeight, width: number = this.currentWidth): void {\n\t\tif (this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.style.height = `${height}px`;\n\t\t}\n\t\tthis.tree?.layout(height, width);\n\t\tthis.currentHeight = height;\n\t\tthis.currentWidth = width;\n\t}\n\n\tprivate createMessageBox(parent: HTMLElement): void {\n\t\tthis.messageBoxContainer = dom.append(parent, dom.$('.message-box-container'));\n\t\tthis.messageBoxContainer.setAttribute('tabIndex', '0');\n\t}\n\n\tprivate renderMessage(): void {\n\t\tthis.messageBoxContainer.textContent = this.commentService.commentsModel.getMessage();\n\t\tthis.messageBoxContainer.classList.toggle('hidden', this.commentService.commentsModel.hasCommentThreads());\n\t}\n\n\tprivate makeCommentLocationLabel(file: URI, range?: IRange) {\n\t\tconst fileLabel = basename(file);\n\t\tif (!range) {\n\t\t\treturn nls.localize('fileCommentLabel', \"in {0}\", fileLabel);\n\t\t}\n\t\tif (range.startLineNumber === range.endLineNumber) {\n\t\t\treturn nls.localize('oneLineCommentLabel', \"at line {0} column {1} in {2}\", range.startLineNumber, range.startColumn, fileLabel);\n\t\t} else {\n\t\t\treturn nls.localize('multiLineCommentLabel', \"from line {0} to line {1} in {2}\", range.startLineNumber, range.endLineNumber, fileLabel);\n\t\t}\n\t}\n\n\tprivate makeScreenReaderLabelInfo(element: CommentNode, forAriaLabel?: boolean) {\n\t\tconst userName = element.comment.userName;\n\t\tconst locationLabel = this.makeCommentLocationLabel(element.resource, element.range);\n\t\tconst replyCountLabel = this.getReplyCountAsString(element, forAriaLabel);\n\t\tconst bodyLabel = (typeof element.comment.body === 'string') ? element.comment.body : element.comment.body.value;\n\n\t\treturn { userName, locationLabel, replyCountLabel, bodyLabel };\n\t}\n\n\tprivate getScreenReaderInfoForNode(element: CommentNode, forAriaLabel?: boolean): string {\n\t\tlet accessibleViewHint = '';\n\t\tif (forAriaLabel && this.configurationService.getValue(AccessibilityVerbositySettingId.Comments)) {\n\t\t\tconst kbLabel = this.keybindingService.lookupKeybinding(AccessibleViewAction.id)?.getAriaLabel();\n\t\t\taccessibleViewHint = kbLabel ? nls.localize('accessibleViewHint', \"\\nInspect this in the accessible view ({0}).\", kbLabel) : nls.localize('acessibleViewHintNoKbOpen', \"\\nInspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding.\");\n\t\t}\n\t\tconst replies = this.getRepliesAsString(element, forAriaLabel);\n\t\tconst editor = this.editorService.findEditors(element.resource);\n\t\tconst codeEditor = this.editorService.activeEditorPane?.getControl();\n\t\tlet relevantLines;\n\t\tif (element.range && editor?.length && isCodeEditor(codeEditor)) {\n\t\t\trelevantLines = codeEditor.getModel()?.getValueInRange(element.range);\n\t\t\tif (relevantLines) {\n\t\t\t\trelevantLines = '\\nCorresponding code: \\n' + relevantLines;\n\t\t\t}\n\t\t}\n\t\tif (!relevantLines) {\n\t\t\trelevantLines = '';\n\t\t}\n\n\t\tconst labelInfo = this.makeScreenReaderLabelInfo(element, forAriaLabel);\n\n\t\tif (element.threadRelevance === CommentThreadApplicability.Outdated) {\n\t\t\treturn nls.localize('resourceWithCommentLabelOutdated',\n\t\t\t\t\"Outdated from {0}: {1}\\n{2}\\n{3}\\n{4}\",\n\t\t\t\tlabelInfo.userName,\n\t\t\t\tlabelInfo.bodyLabel,\n\t\t\t\tlabelInfo.locationLabel,\n\t\t\t\tlabelInfo.replyCountLabel,\n\t\t\t\trelevantLines\n\t\t\t) + replies + accessibleViewHint;\n\t\t} else {\n\t\t\treturn nls.localize('resourceWithCommentLabel',\n\t\t\t\t\"{0}: {1}\\n{2}\\n{3}\\n{4}\",\n\t\t\t\tlabelInfo.userName,\n\t\t\t\tlabelInfo.bodyLabel,\n\t\t\t\tlabelInfo.locationLabel,\n\t\t\t\tlabelInfo.replyCountLabel,\n\t\t\t\trelevantLines\n\t\t\t) + replies + accessibleViewHint;\n\t\t}\n\t}\n\n\tprivate getRepliesAsString(node: CommentNode, forAriaLabel?: boolean): string {\n\t\tif (!node.replies.length || forAriaLabel) {\n\t\t\treturn '';\n\t\t}\n\t\treturn '\\n' + node.replies.map(reply => nls.localize('resourceWithRepliesLabel',\n\t\t\t\"{0} {1}\",\n\t\t\treply.comment.userName,\n\t\t\t(typeof reply.comment.body === 'string') ? reply.comment.body : reply.comment.body.value)\n\t\t).join('\\n');\n\t}\n\n\tprivate getReplyCountAsString(node: CommentNode, forAriaLabel?: boolean): string {\n\t\treturn node.replies.length && !forAriaLabel ? nls.localize('replyCount', \" {0} replies,\", node.replies.length) : '';\n\t}\n\n\tprivate createTree(): void {\n\t\tthis.treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, this));\n\t\tthis.tree = this._register(this.instantiationService.createInstance(CommentsList, this.treeLabels, this.treeContainer, {\n\t\t\toverrideStyles: this.getLocationBasedColors().listOverrideStyles,\n\t\t\tselectionNavigation: true,\n\t\t\tfilter: this.filter,\n\t\t\tsorter: {\n\t\t\t\tcompare: (a: CommentsTreeNode, b: CommentsTreeNode) => {\n\t\t\t\t\tif (a instanceof CommentsModel || b instanceof CommentsModel) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.filters.sortBy === CommentsSortOrder.UpdatedAtDescending) {\n\t\t\t\t\t\treturn a.lastUpdatedAt > b.lastUpdatedAt ? -1 : 1;\n\t\t\t\t\t} else if (this.filters.sortBy === CommentsSortOrder.ResourceAscending) {\n\t\t\t\t\t\tif (a instanceof ResourceWithCommentThreads && b instanceof ResourceWithCommentThreads) {\n\t\t\t\t\t\t\tconst workspaceScheme = this.pathService.defaultUriScheme;\n\t\t\t\t\t\t\tif ((a.resource.scheme !== b.resource.scheme) && (a.resource.scheme === workspaceScheme || b.resource.scheme === workspaceScheme)) {\n\t\t\t\t\t\t\t\t// Workspace scheme should always come first\n\t\t\t\t\t\t\t\treturn b.resource.scheme === workspaceScheme ? 1 : -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn a.resource.toString() > b.resource.toString() ? 1 : -1;\n\t\t\t\t\t\t} else if (a instanceof CommentNode && b instanceof CommentNode && a.thread.range && b.thread.range) {\n\t\t\t\t\t\t\treturn a.thread.range?.startLineNumber > b.thread.range?.startLineNumber ? 1 : -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t},\n\t\t\t},\n\t\t\tkeyboardNavigationLabelProvider: {\n\t\t\t\tgetKeyboardNavigationLabel: (item: CommentsTreeNode) => {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t},\n\t\t\taccessibilityProvider: {\n\t\t\t\tgetAriaLabel: (element: any): string => {\n\t\t\t\t\tif (element instanceof CommentsModel) {\n\t\t\t\t\t\treturn nls.localize('rootCommentsLabel', \"Comments for current workspace\");\n\t\t\t\t\t}\n\t\t\t\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\t\t\t\treturn nls.localize('resourceWithCommentThreadsLabel', \"Comments in {0}, full path {1}\", basename(element.resource), element.resource.fsPath);\n\t\t\t\t\t}\n\t\t\t\t\tif (element instanceof CommentNode) {\n\t\t\t\t\t\treturn this.getScreenReaderInfoForNode(element, true);\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\treturn COMMENTS_VIEW_TITLE.value;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.tree.onDidOpen(e => {\n\t\t\tthis.openFile(e.element, e.editorOptions.pinned, e.editorOptions.preserveFocus, e.sideBySide);\n\t\t}));\n\n\n\t\tthis._register(this.tree.onDidChangeModel(() => {\n\t\t\tthis.updateSomeCommentsExpanded();\n\t\t}));\n\t\tthis._register(this.tree.onDidChangeCollapseState(() => {\n\t\t\tthis.updateSomeCommentsExpanded();\n\t\t}));\n\t\tthis._register(this.tree.onDidFocus(() => this.commentsFocusedContextKey.set(true)));\n\t\tthis._register(this.tree.onDidBlur(() => this.commentsFocusedContextKey.set(false)));\n\t}\n\n\tprivate openFile(element: any, pinned?: boolean, preserveFocus?: boolean, sideBySide?: boolean): void {\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(element instanceof ResourceWithCommentThreads || element instanceof CommentNode)) {\n\t\t\treturn;\n\t\t}\n\t\tconst threadToReveal = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].thread : element.thread;\n\t\tconst commentToReveal = element instanceof ResourceWithCommentThreads ? element.commentThreads[0].comment : undefined;\n\t\treturn revealCommentThread(this.commentService, this.editorService, this.uriIdentityService, threadToReveal, commentToReveal, false, pinned, preserveFocus, sideBySide);\n\t}\n\n\tprivate async refresh(): Promise<void> {\n\t\tif (!this.tree) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isVisible()) {\n\t\t\tthis.hasCommentsContextKey.set(this.commentService.commentsModel.hasCommentThreads());\n\t\t\tthis.cachedFilterStats = undefined;\n\t\t\tthis.renderComments();\n\n\t\t\tif (this.tree.getSelection().length === 0 && this.commentService.commentsModel.hasCommentThreads()) {\n\t\t\t\tconst firstComment = this.commentService.commentsModel.resourceCommentThreads[0].commentThreads[0];\n\t\t\t\tif (firstComment) {\n\t\t\t\t\tthis.tree.setFocus([firstComment]);\n\t\t\t\t\tthis.tree.setSelection([firstComment]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onAllCommentsChanged(e: IWorkspaceCommentThreadsEvent): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.totalComments += e.commentThreads.length;\n\n\t\tlet unresolved = 0;\n\t\tfor (const thread of e.commentThreads) {\n\t\t\tif (thread.state === CommentThreadState.Unresolved) {\n\t\t\t\tunresolved++;\n\t\t\t}\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\tprivate onCommentsUpdated(e: ICommentThreadChangedEvent): void {\n\t\tthis.cachedFilterStats = undefined;\n\n\t\tthis.totalComments += e.added.length;\n\t\tthis.totalComments -= e.removed.length;\n\n\t\tlet unresolved = 0;\n\t\tfor (const resource of this.commentService.commentsModel.resourceCommentThreads) {\n\t\t\tfor (const thread of resource.commentThreads) {\n\t\t\t\tif (thread.threadState === CommentThreadState.Unresolved) {\n\t\t\t\t\tunresolved++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\tprivate onDataProviderDeleted(owner: string | undefined): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.totalComments = 0;\n\t\tthis.refresh();\n\t}\n\n\tprivate updateSomeCommentsExpanded() {\n\t\tthis.someCommentsExpandedContextKey.set(this.isSomeCommentsExpanded());\n\t}\n\n\tpublic areAllCommentsExpanded(): boolean {\n\t\tif (!this.tree) {\n\t\t\treturn false;\n\t\t}\n\t\tconst navigator = this.tree.navigate();\n\t\twhile (navigator.next()) {\n\t\t\tif (this.tree.isCollapsed(navigator.current())) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic isSomeCommentsExpanded(): boolean {\n\t\tif (!this.tree) {\n\t\t\treturn false;\n\t\t}\n\t\tconst navigator = this.tree.navigate();\n\t\twhile (navigator.next()) {\n\t\t\tif (!this.tree.isCollapsed(navigator.current())) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}\n"]}