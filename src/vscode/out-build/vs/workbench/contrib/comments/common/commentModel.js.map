{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/comments/common/commentModel.ts","vs/workbench/contrib/comments/common/commentModel.ts"],"names":[],"mappings":"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","file":"commentModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { Comment, CommentThread, CommentThreadChangedEvent, CommentThreadApplicability, CommentThreadState } from '../../../../editor/common/languages.js';\n\nexport interface ICommentThreadChangedEvent extends CommentThreadChangedEvent<IRange> {\n\tuniqueOwner: string;\n\towner: string;\n\townerLabel: string;\n}\n\nexport class CommentNode {\n\tisRoot: boolean = false;\n\treplies: CommentNode[] = [];\n\tpublic readonly threadId: string;\n\tpublic readonly range: IRange | undefined;\n\tpublic readonly threadState: CommentThreadState | undefined;\n\tpublic readonly threadRelevance: CommentThreadApplicability | undefined;\n\tpublic readonly contextValue: string | undefined;\n\tpublic readonly controllerHandle: number;\n\tpublic readonly threadHandle: number;\n\n\tconstructor(\n\t\tpublic readonly uniqueOwner: string,\n\t\tpublic readonly owner: string,\n\t\tpublic readonly resource: URI,\n\t\tpublic readonly comment: Comment,\n\t\tpublic readonly thread: CommentThread) {\n\t\tthis.threadId = thread.threadId;\n\t\tthis.range = thread.range;\n\t\tthis.threadState = thread.state;\n\t\tthis.threadRelevance = thread.applicability;\n\t\tthis.contextValue = thread.contextValue;\n\t\tthis.controllerHandle = thread.controllerHandle;\n\t\tthis.threadHandle = thread.commentThreadHandle;\n\t}\n\n\thasReply(): boolean {\n\t\treturn this.replies && this.replies.length !== 0;\n\t}\n\n\tprivate _lastUpdatedAt: string | undefined;\n\n\tget lastUpdatedAt(): string {\n\t\tif (this._lastUpdatedAt === undefined) {\n\t\t\tlet updatedAt = this.comment.timestamp || '';\n\t\t\tif (this.replies.length) {\n\t\t\t\tconst reply = this.replies[this.replies.length - 1];\n\t\t\t\tconst replyUpdatedAt = reply.lastUpdatedAt;\n\t\t\t\tif (replyUpdatedAt > updatedAt) {\n\t\t\t\t\tupdatedAt = replyUpdatedAt;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastUpdatedAt = updatedAt;\n\t\t}\n\t\treturn this._lastUpdatedAt;\n\t}\n}\n\nexport class ResourceWithCommentThreads {\n\tid: string;\n\tuniqueOwner: string;\n\towner: string;\n\townerLabel: string | undefined;\n\tcommentThreads: CommentNode[]; // The top level comments on the file. Replys are nested under each node.\n\tresource: URI;\n\n\tconstructor(uniqueOwner: string, owner: string, resource: URI, commentThreads: CommentThread[]) {\n\t\tthis.uniqueOwner = uniqueOwner;\n\t\tthis.owner = owner;\n\t\tthis.id = resource.toString();\n\t\tthis.resource = resource;\n\t\tthis.commentThreads = commentThreads.filter(thread => thread.comments && thread.comments.length).map(thread => ResourceWithCommentThreads.createCommentNode(uniqueOwner, owner, resource, thread));\n\t}\n\n\tpublic static createCommentNode(uniqueOwner: string, owner: string, resource: URI, commentThread: CommentThread): CommentNode {\n\t\tconst { comments } = commentThread;\n\t\tconst commentNodes: CommentNode[] = comments!.map(comment => new CommentNode(uniqueOwner, owner, resource, comment, commentThread));\n\t\tif (commentNodes.length > 1) {\n\t\t\tcommentNodes[0].replies = commentNodes.slice(1, commentNodes.length);\n\t\t}\n\n\t\tcommentNodes[0].isRoot = true;\n\n\t\treturn commentNodes[0];\n\t}\n\n\tprivate _lastUpdatedAt: string | undefined;\n\n\tget lastUpdatedAt() {\n\t\tif (this._lastUpdatedAt === undefined) {\n\t\t\tlet updatedAt = '';\n\t\t\t// Return result without cahcing as we expect data to arrive later\n\t\t\tif (!this.commentThreads.length) {\n\t\t\t\treturn updatedAt;\n\t\t\t}\n\t\t\tfor (const thread of this.commentThreads) {\n\t\t\t\tconst threadUpdatedAt = thread.lastUpdatedAt;\n\t\t\t\tif (threadUpdatedAt && threadUpdatedAt > updatedAt) {\n\t\t\t\t\tupdatedAt = threadUpdatedAt;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastUpdatedAt = updatedAt;\n\t\t}\n\t\treturn this._lastUpdatedAt;\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { Comment, CommentThread, CommentThreadChangedEvent, CommentThreadApplicability, CommentThreadState } from '../../../../editor/common/languages.js';\n\nexport interface ICommentThreadChangedEvent extends CommentThreadChangedEvent<IRange> {\n\tuniqueOwner: string;\n\towner: string;\n\townerLabel: string;\n}\n\nexport class CommentNode {\n\tisRoot: boolean = false;\n\treplies: CommentNode[] = [];\n\tpublic readonly threadId: string;\n\tpublic readonly range: IRange | undefined;\n\tpublic readonly threadState: CommentThreadState | undefined;\n\tpublic readonly threadRelevance: CommentThreadApplicability | undefined;\n\tpublic readonly contextValue: string | undefined;\n\tpublic readonly controllerHandle: number;\n\tpublic readonly threadHandle: number;\n\n\tconstructor(\n\t\tpublic readonly uniqueOwner: string,\n\t\tpublic readonly owner: string,\n\t\tpublic readonly resource: URI,\n\t\tpublic readonly comment: Comment,\n\t\tpublic readonly thread: CommentThread) {\n\t\tthis.threadId = thread.threadId;\n\t\tthis.range = thread.range;\n\t\tthis.threadState = thread.state;\n\t\tthis.threadRelevance = thread.applicability;\n\t\tthis.contextValue = thread.contextValue;\n\t\tthis.controllerHandle = thread.controllerHandle;\n\t\tthis.threadHandle = thread.commentThreadHandle;\n\t}\n\n\thasReply(): boolean {\n\t\treturn this.replies && this.replies.length !== 0;\n\t}\n\n\tprivate _lastUpdatedAt: string | undefined;\n\n\tget lastUpdatedAt(): string {\n\t\tif (this._lastUpdatedAt === undefined) {\n\t\t\tlet updatedAt = this.comment.timestamp || '';\n\t\t\tif (this.replies.length) {\n\t\t\t\tconst reply = this.replies[this.replies.length - 1];\n\t\t\t\tconst replyUpdatedAt = reply.lastUpdatedAt;\n\t\t\t\tif (replyUpdatedAt > updatedAt) {\n\t\t\t\t\tupdatedAt = replyUpdatedAt;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastUpdatedAt = updatedAt;\n\t\t}\n\t\treturn this._lastUpdatedAt;\n\t}\n}\n\nexport class ResourceWithCommentThreads {\n\tid: string;\n\tuniqueOwner: string;\n\towner: string;\n\townerLabel: string | undefined;\n\tcommentThreads: CommentNode[]; // The top level comments on the file. Replys are nested under each node.\n\tresource: URI;\n\n\tconstructor(uniqueOwner: string, owner: string, resource: URI, commentThreads: CommentThread[]) {\n\t\tthis.uniqueOwner = uniqueOwner;\n\t\tthis.owner = owner;\n\t\tthis.id = resource.toString();\n\t\tthis.resource = resource;\n\t\tthis.commentThreads = commentThreads.filter(thread => thread.comments && thread.comments.length).map(thread => ResourceWithCommentThreads.createCommentNode(uniqueOwner, owner, resource, thread));\n\t}\n\n\tpublic static createCommentNode(uniqueOwner: string, owner: string, resource: URI, commentThread: CommentThread): CommentNode {\n\t\tconst { comments } = commentThread;\n\t\tconst commentNodes: CommentNode[] = comments!.map(comment => new CommentNode(uniqueOwner, owner, resource, comment, commentThread));\n\t\tif (commentNodes.length > 1) {\n\t\t\tcommentNodes[0].replies = commentNodes.slice(1, commentNodes.length);\n\t\t}\n\n\t\tcommentNodes[0].isRoot = true;\n\n\t\treturn commentNodes[0];\n\t}\n\n\tprivate _lastUpdatedAt: string | undefined;\n\n\tget lastUpdatedAt() {\n\t\tif (this._lastUpdatedAt === undefined) {\n\t\t\tlet updatedAt = '';\n\t\t\t// Return result without cahcing as we expect data to arrive later\n\t\t\tif (!this.commentThreads.length) {\n\t\t\t\treturn updatedAt;\n\t\t\t}\n\t\t\tfor (const thread of this.commentThreads) {\n\t\t\t\tconst threadUpdatedAt = thread.lastUpdatedAt;\n\t\t\t\tif (threadUpdatedAt && threadUpdatedAt > updatedAt) {\n\t\t\t\t\tupdatedAt = threadUpdatedAt;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastUpdatedAt = updatedAt;\n\t\t}\n\t\treturn this._lastUpdatedAt;\n\t}\n}\n\n"]}