{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/contrib/multiDiffEditor/browser/multiDiffEditor.ts","vs/workbench/contrib/multiDiffEditor/browser/multiDiffEditor.ts"],"names":[],"mappings":"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","file":"multiDiffEditor.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { MultiDiffEditorWidget } from '../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.js';\nimport { IResourceLabel, IWorkbenchUIElementFactory } from '../../../../editor/browser/widget/multiDiffEditor/workbenchUIElementFactory.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InstantiationService } from '../../../../platform/instantiation/common/instantiationService.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResourceLabel } from '../../../browser/labels.js';\nimport { AbstractEditorWithViewState } from '../../../browser/parts/editor/editorWithViewState.js';\nimport { ICompositeControl } from '../../../common/composite.js';\nimport { IEditorOpenContext } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IDocumentDiffItemWithMultiDiffEditorItem, MultiDiffEditorInput } from './multiDiffEditorInput.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { MultiDiffEditorViewModel } from '../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorViewModel.js';\nimport { IMultiDiffEditorOptions, IMultiDiffEditorViewState } from '../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IDiffEditor } from '../../../../editor/common/editorCommon.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { MultiDiffEditorItem } from './multiDiffSourceResolverService.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\n\nexport class MultiDiffEditor extends AbstractEditorWithViewState<IMultiDiffEditorViewState> {\n\tstatic readonly ID = 'multiDiffEditor';\n\n\tprivate _multiDiffEditorWidget: MultiDiffEditorWidget | undefined = undefined;\n\tprivate _viewModel: MultiDiffEditorViewModel | undefined;\n\n\tpublic get viewModel(): MultiDiffEditorViewModel | undefined {\n\t\treturn this._viewModel;\n\t}\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService instantiationService: InstantiationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IEditorProgressService private editorProgressService: IEditorProgressService,\n\t) {\n\t\tsuper(\n\t\t\tMultiDiffEditor.ID,\n\t\t\tgroup,\n\t\t\t'multiDiffEditor',\n\t\t\ttelemetryService,\n\t\t\tinstantiationService,\n\t\t\tstorageService,\n\t\t\ttextResourceConfigurationService,\n\t\t\tthemeService,\n\t\t\teditorService,\n\t\t\teditorGroupService\n\t\t);\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._multiDiffEditorWidget = this._register(this.instantiationService.createInstance(\n\t\t\tMultiDiffEditorWidget,\n\t\t\tparent,\n\t\t\tthis.instantiationService.createInstance(WorkbenchUIElementFactory),\n\t\t));\n\n\t\tthis._register(this._multiDiffEditorWidget.onDidChangeActiveControl(() => {\n\t\t\tthis._onDidChangeControl.fire();\n\t\t}));\n\t}\n\n\toverride async setInput(input: MultiDiffEditorInput, options: IMultiDiffEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(input, options, context, token);\n\t\tthis._viewModel = await input.getViewModel();\n\t\tthis._multiDiffEditorWidget!.setViewModel(this._viewModel);\n\n\t\tconst viewState = this.loadEditorViewState(input, context);\n\t\tif (viewState) {\n\t\t\tthis._multiDiffEditorWidget!.setViewState(viewState);\n\t\t}\n\t\tthis._applyOptions(options);\n\t}\n\n\toverride setOptions(options: IMultiDiffEditorOptions | undefined): void {\n\t\tthis._applyOptions(options);\n\t}\n\n\tprivate _applyOptions(options: IMultiDiffEditorOptions | undefined): void {\n\t\tconst viewState = options?.viewState;\n\t\tif (!viewState || !viewState.revealData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._multiDiffEditorWidget?.reveal(viewState.revealData.resource, {\n\t\t\trange: viewState.revealData.range ? Range.lift(viewState.revealData.range) : undefined,\n\t\t\thighlight: true\n\t\t});\n\t}\n\n\toverride async clearInput(): Promise<void> {\n\t\tawait super.clearInput();\n\t\tthis._multiDiffEditorWidget!.setViewModel(undefined);\n\t}\n\n\tlayout(dimension: DOM.Dimension): void {\n\t\tthis._multiDiffEditorWidget!.layout(dimension);\n\t}\n\n\toverride getControl(): ICompositeControl | undefined {\n\t\treturn this._multiDiffEditorWidget!.getActiveControl();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tthis._multiDiffEditorWidget?.getActiveControl()?.focus();\n\t}\n\n\toverride hasFocus(): boolean {\n\t\treturn this._multiDiffEditorWidget?.getActiveControl()?.hasTextFocus() || super.hasFocus();\n\t}\n\n\tprotected override computeEditorViewState(resource: URI): IMultiDiffEditorViewState | undefined {\n\t\treturn this._multiDiffEditorWidget!.getViewState();\n\t}\n\n\tprotected override tracksEditorViewState(input: EditorInput): boolean {\n\t\treturn input instanceof MultiDiffEditorInput;\n\t}\n\n\tprotected override toEditorViewStateResource(input: EditorInput): URI | undefined {\n\t\treturn (input as MultiDiffEditorInput).resource;\n\t}\n\n\tpublic tryGetCodeEditor(resource: URI): { diffEditor: IDiffEditor; editor: ICodeEditor } | undefined {\n\t\treturn this._multiDiffEditorWidget!.tryGetCodeEditor(resource);\n\t}\n\n\tpublic findDocumentDiffItem(resource: URI): MultiDiffEditorItem | undefined {\n\t\tconst i = this._multiDiffEditorWidget!.findDocumentDiffItem(resource);\n\t\tif (!i) { return undefined; }\n\t\tconst i2 = i as IDocumentDiffItemWithMultiDiffEditorItem;\n\t\treturn i2.multiDiffEditorItem;\n\t}\n\n\tpublic goToNextChange(): void {\n\t\tthis._multiDiffEditorWidget?.goToNextChange();\n\t}\n\n\tpublic goToPreviousChange(): void {\n\t\tthis._multiDiffEditorWidget?.goToPreviousChange();\n\t}\n\n\tpublic async showWhile(promise: Promise<unknown>): Promise<void> {\n\t\treturn this.editorProgressService.showWhile(promise);\n\t}\n}\n\n\nclass WorkbenchUIElementFactory implements IWorkbenchUIElementFactory {\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) { }\n\n\tcreateResourceLabel(element: HTMLElement): IResourceLabel {\n\t\tconst label = this._instantiationService.createInstance(ResourceLabel, element, {});\n\t\treturn {\n\t\t\tsetUri(uri, options = {}) {\n\t\t\t\tif (!uri) {\n\t\t\t\t\tlabel.element.clear();\n\t\t\t\t} else {\n\t\t\t\t\tlabel.element.setFile(uri, { strikethrough: options.strikethrough });\n\t\t\t\t}\n\t\t\t},\n\t\t\tdispose() {\n\t\t\t\tlabel.dispose();\n\t\t\t}\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { MultiDiffEditorWidget } from '../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.js';\nimport { IResourceLabel, IWorkbenchUIElementFactory } from '../../../../editor/browser/widget/multiDiffEditor/workbenchUIElementFactory.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InstantiationService } from '../../../../platform/instantiation/common/instantiationService.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResourceLabel } from '../../../browser/labels.js';\nimport { AbstractEditorWithViewState } from '../../../browser/parts/editor/editorWithViewState.js';\nimport { ICompositeControl } from '../../../common/composite.js';\nimport { IEditorOpenContext } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IDocumentDiffItemWithMultiDiffEditorItem, MultiDiffEditorInput } from './multiDiffEditorInput.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { MultiDiffEditorViewModel } from '../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorViewModel.js';\nimport { IMultiDiffEditorOptions, IMultiDiffEditorViewState } from '../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { IDiffEditor } from '../../../../editor/common/editorCommon.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { MultiDiffEditorItem } from './multiDiffSourceResolverService.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\n\nexport class MultiDiffEditor extends AbstractEditorWithViewState<IMultiDiffEditorViewState> {\n\tstatic readonly ID = 'multiDiffEditor';\n\n\tprivate _multiDiffEditorWidget: MultiDiffEditorWidget | undefined = undefined;\n\tprivate _viewModel: MultiDiffEditorViewModel | undefined;\n\n\tpublic get viewModel(): MultiDiffEditorViewModel | undefined {\n\t\treturn this._viewModel;\n\t}\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService instantiationService: InstantiationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@IEditorProgressService private editorProgressService: IEditorProgressService,\n\t) {\n\t\tsuper(\n\t\t\tMultiDiffEditor.ID,\n\t\t\tgroup,\n\t\t\t'multiDiffEditor',\n\t\t\ttelemetryService,\n\t\t\tinstantiationService,\n\t\t\tstorageService,\n\t\t\ttextResourceConfigurationService,\n\t\t\tthemeService,\n\t\t\teditorService,\n\t\t\teditorGroupService\n\t\t);\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._multiDiffEditorWidget = this._register(this.instantiationService.createInstance(\n\t\t\tMultiDiffEditorWidget,\n\t\t\tparent,\n\t\t\tthis.instantiationService.createInstance(WorkbenchUIElementFactory),\n\t\t));\n\n\t\tthis._register(this._multiDiffEditorWidget.onDidChangeActiveControl(() => {\n\t\t\tthis._onDidChangeControl.fire();\n\t\t}));\n\t}\n\n\toverride async setInput(input: MultiDiffEditorInput, options: IMultiDiffEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(input, options, context, token);\n\t\tthis._viewModel = await input.getViewModel();\n\t\tthis._multiDiffEditorWidget!.setViewModel(this._viewModel);\n\n\t\tconst viewState = this.loadEditorViewState(input, context);\n\t\tif (viewState) {\n\t\t\tthis._multiDiffEditorWidget!.setViewState(viewState);\n\t\t}\n\t\tthis._applyOptions(options);\n\t}\n\n\toverride setOptions(options: IMultiDiffEditorOptions | undefined): void {\n\t\tthis._applyOptions(options);\n\t}\n\n\tprivate _applyOptions(options: IMultiDiffEditorOptions | undefined): void {\n\t\tconst viewState = options?.viewState;\n\t\tif (!viewState || !viewState.revealData) {\n\t\t\treturn;\n\t\t}\n\t\tthis._multiDiffEditorWidget?.reveal(viewState.revealData.resource, {\n\t\t\trange: viewState.revealData.range ? Range.lift(viewState.revealData.range) : undefined,\n\t\t\thighlight: true\n\t\t});\n\t}\n\n\toverride async clearInput(): Promise<void> {\n\t\tawait super.clearInput();\n\t\tthis._multiDiffEditorWidget!.setViewModel(undefined);\n\t}\n\n\tlayout(dimension: DOM.Dimension): void {\n\t\tthis._multiDiffEditorWidget!.layout(dimension);\n\t}\n\n\toverride getControl(): ICompositeControl | undefined {\n\t\treturn this._multiDiffEditorWidget!.getActiveControl();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tthis._multiDiffEditorWidget?.getActiveControl()?.focus();\n\t}\n\n\toverride hasFocus(): boolean {\n\t\treturn this._multiDiffEditorWidget?.getActiveControl()?.hasTextFocus() || super.hasFocus();\n\t}\n\n\tprotected override computeEditorViewState(resource: URI): IMultiDiffEditorViewState | undefined {\n\t\treturn this._multiDiffEditorWidget!.getViewState();\n\t}\n\n\tprotected override tracksEditorViewState(input: EditorInput): boolean {\n\t\treturn input instanceof MultiDiffEditorInput;\n\t}\n\n\tprotected override toEditorViewStateResource(input: EditorInput): URI | undefined {\n\t\treturn (input as MultiDiffEditorInput).resource;\n\t}\n\n\tpublic tryGetCodeEditor(resource: URI): { diffEditor: IDiffEditor; editor: ICodeEditor } | undefined {\n\t\treturn this._multiDiffEditorWidget!.tryGetCodeEditor(resource);\n\t}\n\n\tpublic findDocumentDiffItem(resource: URI): MultiDiffEditorItem | undefined {\n\t\tconst i = this._multiDiffEditorWidget!.findDocumentDiffItem(resource);\n\t\tif (!i) { return undefined; }\n\t\tconst i2 = i as IDocumentDiffItemWithMultiDiffEditorItem;\n\t\treturn i2.multiDiffEditorItem;\n\t}\n\n\tpublic goToNextChange(): void {\n\t\tthis._multiDiffEditorWidget?.goToNextChange();\n\t}\n\n\tpublic goToPreviousChange(): void {\n\t\tthis._multiDiffEditorWidget?.goToPreviousChange();\n\t}\n\n\tpublic async showWhile(promise: Promise<unknown>): Promise<void> {\n\t\treturn this.editorProgressService.showWhile(promise);\n\t}\n}\n\n\nclass WorkbenchUIElementFactory implements IWorkbenchUIElementFactory {\n\tconstructor(\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) { }\n\n\tcreateResourceLabel(element: HTMLElement): IResourceLabel {\n\t\tconst label = this._instantiationService.createInstance(ResourceLabel, element, {});\n\t\treturn {\n\t\t\tsetUri(uri, options = {}) {\n\t\t\t\tif (!uri) {\n\t\t\t\t\tlabel.element.clear();\n\t\t\t\t} else {\n\t\t\t\t\tlabel.element.setFile(uri, { strikethrough: options.strikethrough });\n\t\t\t\t}\n\t\t\t},\n\t\t\tdispose() {\n\t\t\t\tlabel.dispose();\n\t\t\t}\n\t\t};\n\t}\n}\n"]}