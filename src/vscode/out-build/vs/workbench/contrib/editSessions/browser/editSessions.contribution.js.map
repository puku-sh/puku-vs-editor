{"version":3,"sources":["vs/workbench/contrib/editSessions/browser/editSessions.contribution.ts"],"names":[],"mappings":"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","file":"editSessions.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions, IWorkbenchContribution } from '../../../common/contributions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { ILifecycleService, LifecyclePhase, ShutdownReason } from '../../../services/lifecycle/common/lifecycle.js';\nimport { Action2, IAction2Options, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IEditSessionsStorageService, Change, ChangeType, Folder, EditSession, FileType, EDIT_SESSION_SYNC_CATEGORY, EDIT_SESSIONS_CONTAINER_ID, EditSessionSchemaVersion, IEditSessionsLogService, EDIT_SESSIONS_VIEW_ICON, EDIT_SESSIONS_TITLE, EDIT_SESSIONS_SHOW_VIEW, EDIT_SESSIONS_DATA_VIEW_ID, decodeEditSessionFileContent, hashedEditSessionId, editSessionsLogId, EDIT_SESSIONS_PENDING } from '../common/editSessions.js';\nimport { ISCMRepository, ISCMService } from '../../scm/common/scm.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IWorkspaceContextService, IWorkspaceFolder, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { basename, joinPath, relativePath } from '../../../../base/common/resources.js';\nimport { encodeBase64 } from '../../../../base/common/buffer.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IProgress, IProgressService, IProgressStep, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { EditSessionsWorkbenchService } from './editSessionsStorageService.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { UserDataSyncErrorCode, UserDataSyncStoreError } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { getFileNamesMessage, IDialogService, IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { workbenchConfigurationNodeBase } from '../../../common/configuration.js';\nimport { Extensions as ConfigurationExtensions, IConfigurationRegistry } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { IQuickInputButton, IQuickInputService, IQuickPickItem, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ExtensionsRegistry } from '../../../services/extensions/common/extensionsRegistry.js';\nimport { ContextKeyExpr, ContextKeyExpression, IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { getVirtualWorkspaceLocation } from '../../../../platform/workspace/common/virtualWorkspace.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { IExtensionService, isProposedApiEnabled } from '../../../services/extensions/common/extensions.js';\nimport { EditSessionsLogService } from '../common/editSessionsLogService.js';\nimport { IViewContainersRegistry, Extensions as ViewExtensions, ViewContainerLocation } from '../../../common/views.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { ViewPaneContainer } from '../../../browser/parts/views/viewPaneContainer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { EditSessionsDataViews } from './editSessionsViews.js';\nimport { EditSessionsFileSystemProvider } from './editSessionsFileSystemProvider.js';\nimport { isNative, isWeb } from '../../../../base/common/platform.js';\nimport { VirtualWorkspaceContext, WorkspaceFolderCountContext } from '../../../common/contextkeys.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { EditSessionIdentityMatch, IEditSessionIdentityService } from '../../../../platform/workspace/common/editSessions.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IOutputService } from '../../../services/output/common/output.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { CancellationError } from '../../../../base/common/errors.js';\nimport { IRemoteAgentService } from '../../../services/remote/common/remoteAgentService.js';\nimport { IExtensionsWorkbenchService } from '../../extensions/common/extensions.js';\nimport { WorkspaceStateSynchroniser } from '../common/workspaceStateSync.js';\nimport { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IRequestService } from '../../../../platform/request/common/request.js';\nimport { EditSessionsStoreClient } from '../common/editSessionsStorageClient.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IWorkspaceIdentityService } from '../../../services/workspaces/common/workspaceIdentityService.js';\nimport { hashAsync } from '../../../../base/common/hash.js';\nimport { ResourceSet } from '../../../../base/common/map.js';\n\nregisterSingleton(IEditSessionsLogService, EditSessionsLogService, InstantiationType.Delayed);\nregisterSingleton(IEditSessionsStorageService, EditSessionsWorkbenchService, InstantiationType.Delayed);\n\n\nconst continueWorkingOnCommand: IAction2Options = {\n\tid: '_workbench.editSessions.actions.continueEditSession',\n\ttitle: localize2('continue working on', 'Continue Working On...'),\n\tprecondition: WorkspaceFolderCountContext.notEqualsTo('0'),\n\tf1: true\n};\nconst openLocalFolderCommand: IAction2Options = {\n\tid: '_workbench.editSessions.actions.continueEditSession.openLocalFolder',\n\ttitle: localize2('continue edit session in local folder', 'Open In Local Folder'),\n\tcategory: EDIT_SESSION_SYNC_CATEGORY,\n\tprecondition: ContextKeyExpr.and(IsWebContext.toNegated(), VirtualWorkspaceContext)\n};\nconst showOutputChannelCommand: IAction2Options = {\n\tid: 'workbench.editSessions.actions.showOutputChannel',\n\ttitle: localize2('show log', \"Show Log\"),\n\tcategory: EDIT_SESSION_SYNC_CATEGORY\n};\nconst installAdditionalContinueOnOptionsCommand = {\n\tid: 'workbench.action.continueOn.extensions',\n\ttitle: localize('continueOn.installAdditional', 'Install additional development environment options'),\n};\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({ ...installAdditionalContinueOnOptionsCommand, f1: false });\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\treturn accessor.get(IExtensionsWorkbenchService).openSearch('@tag:continueOn');\n\t}\n});\n\nconst resumeProgressOptionsTitle = `[${localize('resuming working changes window', 'Resuming working changes...')}](command:${showOutputChannelCommand.id})`;\nconst resumeProgressOptions = {\n\tlocation: ProgressLocation.Window,\n\ttype: 'syncing',\n};\nconst queryParamName = 'editSessionId';\n\nconst useEditSessionsWithContinueOn = 'workbench.editSessions.continueOn';\nexport class EditSessionsContribution extends Disposable implements IWorkbenchContribution {\n\n\tprivate continueEditSessionOptions: ContinueEditSessionItem[] = [];\n\n\tprivate readonly shouldShowViewsContext: IContextKey<boolean>;\n\tprivate readonly pendingEditSessionsContext: IContextKey<boolean>;\n\n\tprivate static APPLICATION_LAUNCHED_VIA_CONTINUE_ON_STORAGE_KEY = 'applicationLaunchedViaContinueOn';\n\tprivate readonly accountsMenuBadgeDisposable = this._register(new MutableDisposable());\n\n\tprivate registeredCommands = new Set<string>();\n\n\tprivate workspaceStateSynchronizer: WorkspaceStateSynchroniser | undefined;\n\tprivate editSessionsStorageClient: EditSessionsStoreClient | undefined;\n\n\tconstructor(\n\t\t@IEditSessionsStorageService private readonly editSessionsStorageService: IEditSessionsStorageService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ISCMService private readonly scmService: ISCMService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IEditSessionsLogService private readonly logService: IEditSessionsLogService,\n\t\t@IEnvironmentService private readonly environmentService: IEnvironmentService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IEditSessionIdentityService private readonly editSessionIdentityService: IEditSessionIdentityService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@ICommandService private commandService: ICommandService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IFileDialogService private readonly fileDialogService: IFileDialogService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IRemoteAgentService private readonly remoteAgentService: IRemoteAgentService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IRequestService private readonly requestService: IRequestService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IWorkspaceIdentityService private readonly workspaceIdentityService: IWorkspaceIdentityService,\n\t) {\n\t\tsuper();\n\n\t\tthis.shouldShowViewsContext = EDIT_SESSIONS_SHOW_VIEW.bindTo(this.contextKeyService);\n\t\tthis.pendingEditSessionsContext = EDIT_SESSIONS_PENDING.bindTo(this.contextKeyService);\n\t\tthis.pendingEditSessionsContext.set(false);\n\n\t\tif (!this.productService['editSessions.store']?.url) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editSessionsStorageClient = new EditSessionsStoreClient(URI.parse(this.productService['editSessions.store'].url), this.productService, this.requestService, this.logService, this.environmentService, this.fileService, this.storageService);\n\t\tthis.editSessionsStorageService.storeClient = this.editSessionsStorageClient;\n\t\tthis.workspaceStateSynchronizer = new WorkspaceStateSynchroniser(this.userDataProfilesService.defaultProfile, undefined, this.editSessionsStorageClient, this.logService, this.fileService, this.environmentService, this.telemetryService, this.configurationService, this.storageService, this.uriIdentityService, this.workspaceIdentityService, this.editSessionsStorageService);\n\n\t\tthis.autoResumeEditSession();\n\n\t\tthis.registerActions();\n\t\tthis.registerViews();\n\t\tthis.registerContributedEditSessionOptions();\n\n\t\tthis._register(this.fileService.registerProvider(EditSessionsFileSystemProvider.SCHEMA, new EditSessionsFileSystemProvider(this.editSessionsStorageService)));\n\t\tthis.lifecycleService.onWillShutdown((e) => {\n\t\t\tif (e.reason !== ShutdownReason.RELOAD && this.editSessionsStorageService.isSignedIn && this.configurationService.getValue('workbench.experimental.cloudChanges.autoStore') === 'onShutdown' && !isWeb) {\n\t\t\t\te.join(this.autoStoreEditSession(), { id: 'autoStoreWorkingChanges', label: localize('autoStoreWorkingChanges', 'Storing current working changes...') });\n\t\t\t}\n\t\t});\n\t\tthis._register(this.editSessionsStorageService.onDidSignIn(() => this.updateAccountsMenuBadge()));\n\t\tthis._register(this.editSessionsStorageService.onDidSignOut(() => this.updateAccountsMenuBadge()));\n\t}\n\n\tprivate async autoResumeEditSession() {\n\t\tconst shouldAutoResumeOnReload = this.configurationService.getValue('workbench.cloudChanges.autoResume') === 'onReload';\n\n\t\tif (this.environmentService.editSessionId !== undefined) {\n\t\t\tthis.logService.info(`Resuming cloud changes, reason: found editSessionId ${this.environmentService.editSessionId} in environment service...`);\n\t\t\tawait this.progressService.withProgress(resumeProgressOptions, async (progress) => await this.resumeEditSession(this.environmentService.editSessionId, undefined, undefined, undefined, progress).finally(() => this.environmentService.editSessionId = undefined));\n\t\t} else if (shouldAutoResumeOnReload && this.editSessionsStorageService.isSignedIn) {\n\t\t\tthis.logService.info('Resuming cloud changes, reason: cloud changes enabled...');\n\t\t\t// Attempt to resume edit session based on edit workspace identifier\n\t\t\t// Note: at this point if the user is not signed into edit sessions,\n\t\t\t// we don't want them to be prompted to sign in and should just return early\n\t\t\tawait this.progressService.withProgress(resumeProgressOptions, async (progress) => await this.resumeEditSession(undefined, true, undefined, undefined, progress));\n\t\t} else if (shouldAutoResumeOnReload) {\n\t\t\t// The application has previously launched via a protocol URL Continue On flow\n\t\t\tconst hasApplicationLaunchedFromContinueOnFlow = this.storageService.getBoolean(EditSessionsContribution.APPLICATION_LAUNCHED_VIA_CONTINUE_ON_STORAGE_KEY, StorageScope.APPLICATION, false);\n\t\t\tthis.logService.info(`Prompting to enable cloud changes, has application previously launched from Continue On flow: ${hasApplicationLaunchedFromContinueOnFlow}`);\n\n\t\t\tconst handlePendingEditSessions = () => {\n\t\t\t\t// display a badge in the accounts menu but do not prompt the user to sign in again\n\t\t\t\tthis.logService.info('Showing badge to enable cloud changes in accounts menu...');\n\t\t\t\tthis.updateAccountsMenuBadge();\n\t\t\t\tthis.pendingEditSessionsContext.set(true);\n\t\t\t\t// attempt a resume if we are in a pending state and the user just signed in\n\t\t\t\tconst disposable = this.editSessionsStorageService.onDidSignIn(async () => {\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\tthis.logService.info('Showing badge to enable cloud changes in accounts menu succeeded, resuming cloud changes...');\n\t\t\t\t\tawait this.progressService.withProgress(resumeProgressOptions, async (progress) => await this.resumeEditSession(undefined, true, undefined, undefined, progress));\n\t\t\t\t\tthis.storageService.remove(EditSessionsContribution.APPLICATION_LAUNCHED_VIA_CONTINUE_ON_STORAGE_KEY, StorageScope.APPLICATION);\n\t\t\t\t\tthis.environmentService.continueOn = undefined;\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif ((this.environmentService.continueOn !== undefined) &&\n\t\t\t\t!this.editSessionsStorageService.isSignedIn &&\n\t\t\t\t// and user has not yet been prompted to sign in on this machine\n\t\t\t\thasApplicationLaunchedFromContinueOnFlow === false\n\t\t\t) {\n\t\t\t\t// store the fact that we prompted the user\n\t\t\t\tthis.storageService.store(EditSessionsContribution.APPLICATION_LAUNCHED_VIA_CONTINUE_ON_STORAGE_KEY, true, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\t\tthis.logService.info('Prompting to enable cloud changes...');\n\t\t\t\tawait this.editSessionsStorageService.initialize('read');\n\t\t\t\tif (this.editSessionsStorageService.isSignedIn) {\n\t\t\t\t\tthis.logService.info('Prompting to enable cloud changes succeeded, resuming cloud changes...');\n\t\t\t\t\tawait this.progressService.withProgress(resumeProgressOptions, async (progress) => await this.resumeEditSession(undefined, true, undefined, undefined, progress));\n\t\t\t\t} else {\n\t\t\t\t\thandlePendingEditSessions();\n\t\t\t\t}\n\t\t\t} else if (!this.editSessionsStorageService.isSignedIn &&\n\t\t\t\t// and user has been prompted to sign in on this machine\n\t\t\t\thasApplicationLaunchedFromContinueOnFlow === true\n\t\t\t) {\n\t\t\t\thandlePendingEditSessions();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.logService.debug('Auto resuming cloud changes disabled.');\n\t\t}\n\t}\n\n\tprivate updateAccountsMenuBadge() {\n\t\tif (this.editSessionsStorageService.isSignedIn) {\n\t\t\treturn this.accountsMenuBadgeDisposable.clear();\n\t\t}\n\n\t\tconst badge = new NumberBadge(1, () => localize('check for pending cloud changes', 'Check for pending cloud changes'));\n\t\tthis.accountsMenuBadgeDisposable.value = this.activityService.showAccountsActivity({ badge });\n\t}\n\n\tprivate async autoStoreEditSession() {\n\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\t\tawait this.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Window,\n\t\t\ttype: 'syncing',\n\t\t\ttitle: localize('store working changes', 'Storing working changes...')\n\t\t}, async () => this.storeEditSession(false, cancellationTokenSource.token), () => {\n\t\t\tcancellationTokenSource.cancel();\n\t\t\tcancellationTokenSource.dispose();\n\t\t});\n\t}\n\n\tprivate registerViews() {\n\t\tconst container = Registry.as<IViewContainersRegistry>(ViewExtensions.ViewContainersRegistry).registerViewContainer(\n\t\t\t{\n\t\t\t\tid: EDIT_SESSIONS_CONTAINER_ID,\n\t\t\t\ttitle: EDIT_SESSIONS_TITLE,\n\t\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\t\tViewPaneContainer,\n\t\t\t\t\t[EDIT_SESSIONS_CONTAINER_ID, { mergeViewWithContainerWhenSingleView: true }]\n\t\t\t\t),\n\t\t\t\ticon: EDIT_SESSIONS_VIEW_ICON,\n\t\t\t\thideIfEmpty: true\n\t\t\t}, ViewContainerLocation.Sidebar, { doNotRegisterOpenCommand: true }\n\t\t);\n\t\tthis._register(this.instantiationService.createInstance(EditSessionsDataViews, container));\n\t}\n\n\tprivate registerActions() {\n\t\tthis.registerContinueEditSessionAction();\n\n\t\tthis.registerResumeLatestEditSessionAction();\n\t\tthis.registerStoreLatestEditSessionAction();\n\n\t\tthis.registerContinueInLocalFolderAction();\n\n\t\tthis.registerShowEditSessionViewAction();\n\t\tthis.registerShowEditSessionOutputChannelAction();\n\t}\n\n\tprivate registerShowEditSessionOutputChannelAction() {\n\t\tthis._register(registerAction2(class ShowEditSessionOutput extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper(showOutputChannelCommand);\n\t\t\t}\n\n\t\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\t\tconst outputChannel = accessor.get(IOutputService);\n\t\t\t\tvoid outputChannel.showChannel(editSessionsLogId);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate registerShowEditSessionViewAction() {\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class ShowEditSessionView extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'workbench.editSessions.actions.showEditSessions',\n\t\t\t\t\ttitle: localize2('show cloud changes', 'Show Cloud Changes'),\n\t\t\t\t\tcategory: EDIT_SESSION_SYNC_CATEGORY,\n\t\t\t\t\tf1: true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor) {\n\t\t\t\tthat.shouldShowViewsContext.set(true);\n\t\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\t\tawait viewsService.openView(EDIT_SESSIONS_DATA_VIEW_ID);\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate registerContinueEditSessionAction() {\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class ContinueEditSessionAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper(continueWorkingOnCommand);\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor, workspaceUri: URI | undefined, destination: string | undefined): Promise<void> {\n\t\t\t\ttype ContinueOnEventOutcome = { outcome: string; hashedId?: string };\n\t\t\t\ttype ContinueOnClassificationOutcome = {\n\t\t\t\t\towner: 'joyceerhl'; comment: 'Reporting the outcome of invoking the Continue On action.';\n\t\t\t\t\toutcome: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The outcome of invoking continue edit session.' };\n\t\t\t\t\thashedId?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The hash of the stored edit session id, for correlating success of stores and resumes.' };\n\t\t\t\t};\n\n\t\t\t\t// First ask the user to pick a destination, if necessary\n\t\t\t\tlet uri: URI | 'noDestinationUri' | undefined = workspaceUri;\n\t\t\t\tif (!destination && !uri) {\n\t\t\t\t\tdestination = await that.pickContinueEditSessionDestination();\n\t\t\t\t\tif (!destination) {\n\t\t\t\t\t\tthat.telemetryService.publicLog2<ContinueOnEventOutcome, ContinueOnClassificationOutcome>('continueOn.editSessions.pick.outcome', { outcome: 'noSelection' });\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Determine if we need to store an edit session, asking for edit session auth if necessary\n\t\t\t\tconst shouldStoreEditSession = await that.shouldContinueOnWithEditSession();\n\n\t\t\t\t// Run the store action to get back a ref\n\t\t\t\tlet ref: string | undefined;\n\t\t\t\tif (shouldStoreEditSession) {\n\t\t\t\t\ttype ContinueWithEditSessionEvent = {};\n\t\t\t\t\ttype ContinueWithEditSessionClassification = {\n\t\t\t\t\t\towner: 'joyceerhl'; comment: 'Reporting when storing an edit session as part of the Continue On flow.';\n\t\t\t\t\t};\n\t\t\t\t\tthat.telemetryService.publicLog2<ContinueWithEditSessionEvent, ContinueWithEditSessionClassification>('continueOn.editSessions.store');\n\n\t\t\t\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tref = await that.progressService.withProgress({\n\t\t\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\t\t\tcancellable: true,\n\t\t\t\t\t\t\ttype: 'syncing',\n\t\t\t\t\t\t\ttitle: localize('store your working changes', 'Storing your working changes...')\n\t\t\t\t\t\t}, async () => {\n\t\t\t\t\t\t\tconst ref = await that.storeEditSession(false, cancellationTokenSource.token);\n\t\t\t\t\t\t\tif (ref !== undefined) {\n\t\t\t\t\t\t\t\tthat.telemetryService.publicLog2<ContinueOnEventOutcome, ContinueOnClassificationOutcome>('continueOn.editSessions.store.outcome', { outcome: 'storeSucceeded', hashedId: hashedEditSessionId(ref) });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthat.telemetryService.publicLog2<ContinueOnEventOutcome, ContinueOnClassificationOutcome>('continueOn.editSessions.store.outcome', { outcome: 'storeSkipped' });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn ref;\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tcancellationTokenSource.cancel();\n\t\t\t\t\t\t\tcancellationTokenSource.dispose();\n\t\t\t\t\t\t\tthat.telemetryService.publicLog2<ContinueOnEventOutcome, ContinueOnClassificationOutcome>('continueOn.editSessions.store.outcome', { outcome: 'storeCancelledByUser' });\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthat.telemetryService.publicLog2<ContinueOnEventOutcome, ContinueOnClassificationOutcome>('continueOn.editSessions.store.outcome', { outcome: 'storeFailed' });\n\t\t\t\t\t\tthrow ex;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Append the ref to the URI\n\t\t\t\turi = destination ? await that.resolveDestination(destination) : uri;\n\t\t\t\tif (uri === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (ref !== undefined && uri !== 'noDestinationUri') {\n\t\t\t\t\tconst encodedRef = encodeURIComponent(ref);\n\t\t\t\t\turi = uri.with({\n\t\t\t\t\t\tquery: uri.query.length > 0 ? (uri.query + `&${queryParamName}=${encodedRef}&continueOn=1`) : `${queryParamName}=${encodedRef}&continueOn=1`\n\t\t\t\t\t});\n\n\t\t\t\t\t// Open the URI\n\t\t\t\t\tthat.logService.info(`Opening ${uri.toString()}`);\n\t\t\t\t\tawait that.openerService.open(uri, { openExternal: true });\n\t\t\t\t} else if ((!shouldStoreEditSession || ref === undefined) && uri !== 'noDestinationUri') {\n\t\t\t\t\t// Open the URI without an edit session ref\n\t\t\t\t\tthat.logService.info(`Opening ${uri.toString()}`);\n\t\t\t\t\tawait that.openerService.open(uri, { openExternal: true });\n\t\t\t\t} else if (ref === undefined && shouldStoreEditSession) {\n\t\t\t\t\tthat.logService.warn(`Failed to store working changes when invoking ${continueWorkingOnCommand.id}.`);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate registerResumeLatestEditSessionAction(): void {\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class ResumeLatestEditSessionAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'workbench.editSessions.actions.resumeLatest',\n\t\t\t\t\ttitle: localize2('resume latest cloud changes', 'Resume Latest Changes from Cloud'),\n\t\t\t\t\tcategory: EDIT_SESSION_SYNC_CATEGORY,\n\t\t\t\t\tf1: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor, editSessionId?: string, forceApplyUnrelatedChange?: boolean): Promise<void> {\n\t\t\t\tawait that.progressService.withProgress({ ...resumeProgressOptions, title: resumeProgressOptionsTitle }, async () => await that.resumeEditSession(editSessionId, undefined, forceApplyUnrelatedChange));\n\t\t\t}\n\t\t}));\n\t\tthis._register(registerAction2(class ResumeLatestEditSessionAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'workbench.editSessions.actions.resumeFromSerializedPayload',\n\t\t\t\t\ttitle: localize2('resume cloud changes', 'Resume Changes from Serialized Data'),\n\t\t\t\t\tcategory: 'Developer',\n\t\t\t\t\tf1: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor, editSessionId?: string): Promise<void> {\n\t\t\t\tconst data = await that.quickInputService.input({ prompt: 'Enter serialized data' });\n\t\t\t\tif (data) {\n\t\t\t\t\tthat.editSessionsStorageService.lastReadResources.set('editSessions', { content: data, ref: '' });\n\t\t\t\t}\n\t\t\t\tawait that.progressService.withProgress({ ...resumeProgressOptions, title: resumeProgressOptionsTitle }, async () => await that.resumeEditSession(editSessionId, undefined, undefined, undefined, undefined, data));\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate registerStoreLatestEditSessionAction(): void {\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class StoreLatestEditSessionAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: 'workbench.editSessions.actions.storeCurrent',\n\t\t\t\t\ttitle: localize2('store working changes in cloud', 'Store Working Changes in Cloud'),\n\t\t\t\t\tcategory: EDIT_SESSION_SYNC_CATEGORY,\n\t\t\t\t\tf1: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\t\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\t\t\t\tawait that.progressService.withProgress({\n\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\ttitle: localize('storing working changes', 'Storing working changes...')\n\t\t\t\t}, async () => {\n\t\t\t\t\ttype StoreEvent = {};\n\t\t\t\t\ttype StoreClassification = {\n\t\t\t\t\t\towner: 'joyceerhl'; comment: 'Reporting when the store edit session action is invoked.';\n\t\t\t\t\t};\n\t\t\t\t\tthat.telemetryService.publicLog2<StoreEvent, StoreClassification>('editSessions.store');\n\n\t\t\t\t\tawait that.storeEditSession(true, cancellationTokenSource.token);\n\t\t\t\t}, () => {\n\t\t\t\t\tcancellationTokenSource.cancel();\n\t\t\t\t\tcancellationTokenSource.dispose();\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t}\n\n\tasync resumeEditSession(ref?: string, silent?: boolean, forceApplyUnrelatedChange?: boolean, applyPartialMatch?: boolean, progress?: IProgress<IProgressStep>, serializedData?: string): Promise<void> {\n\t\t// Wait for the remote environment to become available, if any\n\t\tawait this.remoteAgentService.getEnvironment();\n\n\t\t// Edit sessions are not currently supported in empty workspaces\n\t\t// https://github.com/microsoft/vscode/issues/159220\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logService.info(ref !== undefined ? `Resuming changes from cloud with ref ${ref}...` : 'Checking for pending cloud changes...');\n\n\t\tif (silent && !(await this.editSessionsStorageService.initialize('read', true))) {\n\t\t\treturn;\n\t\t}\n\n\t\ttype ResumeEvent = { outcome: string; hashedId?: string };\n\t\ttype ResumeClassification = {\n\t\t\towner: 'joyceerhl'; comment: 'Reporting when an edit session is resumed from an edit session identifier.';\n\t\t\toutcome: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The outcome of resuming the edit session.' };\n\t\t\thashedId?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The hash of the stored edit session id, for correlating success of stores and resumes.' };\n\t\t};\n\t\tthis.telemetryService.publicLog2<ResumeEvent, ResumeClassification>('editSessions.resume');\n\n\t\tperformance.mark('code/willResumeEditSessionFromIdentifier');\n\n\t\tprogress?.report({ message: localize('checkingForWorkingChanges', 'Checking for pending cloud changes...') });\n\t\tconst data = serializedData ? { content: serializedData, ref: '' } : await this.editSessionsStorageService.read('editSessions', ref);\n\t\tif (!data) {\n\t\t\tif (ref === undefined && !silent) {\n\t\t\t\tthis.notificationService.info(localize('no cloud changes', 'There are no changes to resume from the cloud.'));\n\t\t\t} else if (ref !== undefined) {\n\t\t\t\tthis.notificationService.warn(localize('no cloud changes for ref', 'Could not resume changes from the cloud for ID {0}.', ref));\n\t\t\t}\n\t\t\tthis.logService.info(ref !== undefined ? `Aborting resuming changes from cloud as no edit session content is available to be applied from ref ${ref}.` : `Aborting resuming edit session as no edit session content is available to be applied`);\n\t\t\treturn;\n\t\t}\n\n\t\tprogress?.report({ message: resumeProgressOptionsTitle });\n\t\tconst editSession = JSON.parse(data.content);\n\t\tref = data.ref;\n\n\t\tif (editSession.version > EditSessionSchemaVersion) {\n\t\t\tthis.notificationService.error(localize('client too old', \"Please upgrade to a newer version of {0} to resume your working changes from the cloud.\", this.productService.nameLong));\n\t\t\tthis.telemetryService.publicLog2<ResumeEvent, ResumeClassification>('editSessions.resume.outcome', { hashedId: hashedEditSessionId(ref), outcome: 'clientUpdateNeeded' });\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst { changes, conflictingChanges } = await this.generateChanges(editSession, ref, forceApplyUnrelatedChange, applyPartialMatch);\n\t\t\tif (changes.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// TODO@joyceerhl Provide the option to diff files which would be overwritten by edit session contents\n\t\t\tif (conflictingChanges.length > 0) {\n\t\t\t\t// Allow to show edit sessions\n\n\t\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\t\ttype: Severity.Warning,\n\t\t\t\t\tmessage: conflictingChanges.length > 1 ?\n\t\t\t\t\t\tlocalize('resume edit session warning many', 'Resuming your working changes from the cloud will overwrite the following {0} files. Do you want to proceed?', conflictingChanges.length) :\n\t\t\t\t\t\tlocalize('resume edit session warning 1', 'Resuming your working changes from the cloud will overwrite {0}. Do you want to proceed?', basename(conflictingChanges[0].uri)),\n\t\t\t\t\tdetail: conflictingChanges.length > 1 ? getFileNamesMessage(conflictingChanges.map((c) => c.uri)) : undefined\n\t\t\t\t});\n\n\t\t\t\tif (!confirmed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const { uri, type, contents } of changes) {\n\t\t\t\tif (type === ChangeType.Addition) {\n\t\t\t\t\tawait this.fileService.writeFile(uri, decodeEditSessionFileContent(editSession.version, contents!));\n\t\t\t\t} else if (type === ChangeType.Deletion && await this.fileService.exists(uri)) {\n\t\t\t\t\tawait this.fileService.del(uri);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this.workspaceStateSynchronizer?.apply();\n\n\t\t\tthis.logService.info(`Deleting edit session with ref ${ref} after successfully applying it to current workspace...`);\n\t\t\tawait this.editSessionsStorageService.delete('editSessions', ref);\n\t\t\tthis.logService.info(`Deleted edit session with ref ${ref}.`);\n\n\t\t\tthis.telemetryService.publicLog2<ResumeEvent, ResumeClassification>('editSessions.resume.outcome', { hashedId: hashedEditSessionId(ref), outcome: 'resumeSucceeded' });\n\t\t} catch (ex) {\n\t\t\tthis.logService.error('Failed to resume edit session, reason: ', (ex as Error).toString());\n\t\t\tthis.notificationService.error(localize('resume failed', \"Failed to resume your working changes from the cloud.\"));\n\t\t}\n\n\t\tperformance.mark('code/didResumeEditSessionFromIdentifier');\n\t}\n\n\tprivate async generateChanges(editSession: EditSession, ref: string, forceApplyUnrelatedChange = false, applyPartialMatch = false) {\n\t\tconst changes: ({ uri: URI; type: ChangeType; contents: string | undefined })[] = [];\n\t\tconst conflictingChanges = [];\n\t\tconst workspaceFolders = this.contextService.getWorkspace().folders;\n\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\n\t\tfor (const folder of editSession.folders) {\n\t\t\tlet folderRoot: IWorkspaceFolder | undefined;\n\n\t\t\tif (folder.canonicalIdentity) {\n\t\t\t\t// Look for an edit session identifier that we can use\n\t\t\t\tfor (const f of workspaceFolders) {\n\t\t\t\t\tconst identity = await this.editSessionIdentityService.getEditSessionIdentifier(f, cancellationTokenSource.token);\n\t\t\t\t\tthis.logService.info(`Matching identity ${identity} against edit session folder identity ${folder.canonicalIdentity}...`);\n\n\t\t\t\t\tif (equals(identity, folder.canonicalIdentity) || forceApplyUnrelatedChange) {\n\t\t\t\t\t\tfolderRoot = f;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (identity !== undefined) {\n\t\t\t\t\t\tconst match = await this.editSessionIdentityService.provideEditSessionIdentityMatch(f, identity, folder.canonicalIdentity, cancellationTokenSource.token);\n\t\t\t\t\t\tif (match === EditSessionIdentityMatch.Complete) {\n\t\t\t\t\t\t\tfolderRoot = f;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (match === EditSessionIdentityMatch.Partial &&\n\t\t\t\t\t\t\tthis.configurationService.getValue('workbench.experimental.cloudChanges.partialMatches.enabled') === true\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (!applyPartialMatch) {\n\t\t\t\t\t\t\t\t// Surface partially matching edit session\n\t\t\t\t\t\t\t\tthis.notificationService.prompt(\n\t\t\t\t\t\t\t\t\tSeverity.Info,\n\t\t\t\t\t\t\t\t\tlocalize('editSessionPartialMatch', 'You have pending working changes in the cloud for this workspace. Would you like to resume them?'),\n\t\t\t\t\t\t\t\t\t[{ label: localize('resume', 'Resume'), run: () => this.resumeEditSession(ref, false, undefined, true) }]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfolderRoot = f;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfolderRoot = workspaceFolders.find((f) => f.name === folder.name);\n\t\t\t}\n\n\t\t\tif (!folderRoot) {\n\t\t\t\tthis.logService.info(`Skipping applying ${folder.workingChanges.length} changes from edit session with ref ${ref} as no matching workspace folder was found.`);\n\t\t\t\treturn { changes: [], conflictingChanges: [], contributedStateHandlers: [] };\n\t\t\t}\n\n\t\t\tconst localChanges = new Set<string>();\n\t\t\tfor (const repository of this.scmService.repositories) {\n\t\t\t\tif (repository.provider.rootUri !== undefined &&\n\t\t\t\t\tthis.contextService.getWorkspaceFolder(repository.provider.rootUri)?.name === folder.name\n\t\t\t\t) {\n\t\t\t\t\tconst repositoryChanges = this.getChangedResources(repository);\n\t\t\t\t\trepositoryChanges.forEach((change) => localChanges.add(change.toString()));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const change of folder.workingChanges) {\n\t\t\t\tconst uri = joinPath(folderRoot.uri, change.relativeFilePath);\n\n\t\t\t\tchanges.push({ uri, type: change.type, contents: change.contents });\n\t\t\t\tif (await this.willChangeLocalContents(localChanges, uri, change)) {\n\t\t\t\t\tconflictingChanges.push({ uri, type: change.type, contents: change.contents });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { changes, conflictingChanges };\n\t}\n\n\tprivate async willChangeLocalContents(localChanges: Set<string>, uriWithIncomingChanges: URI, incomingChange: Change) {\n\t\tif (!localChanges.has(uriWithIncomingChanges.toString())) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { contents, type } = incomingChange;\n\n\t\tswitch (type) {\n\t\t\tcase (ChangeType.Addition): {\n\t\t\t\tconst [originalContents, incomingContents] = await Promise.all([\n\t\t\t\t\thashAsync(contents),\n\t\t\t\t\thashAsync(encodeBase64((await this.fileService.readFile(uriWithIncomingChanges)).value))\n\t\t\t\t]);\n\t\t\t\treturn originalContents !== incomingContents;\n\t\t\t}\n\t\t\tcase (ChangeType.Deletion): {\n\t\t\t\treturn await this.fileService.exists(uriWithIncomingChanges);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Unhandled change type.');\n\t\t}\n\t}\n\n\tasync storeEditSession(fromStoreCommand: boolean, cancellationToken: CancellationToken): Promise<string | undefined> {\n\t\tconst folders: Folder[] = [];\n\t\tlet editSessionSize = 0;\n\t\tlet hasEdits = false;\n\n\t\t// Save all saveable editors before building edit session contents\n\t\tawait this.editorService.saveAll();\n\n\t\t// Do a first pass over all repositories to ensure that the edit session identity is created for each.\n\t\t// This may change the working changes that need to be stored later\n\t\tconst createdEditSessionIdentities = new ResourceSet();\n\t\tfor (const repository of this.scmService.repositories) {\n\t\t\tconst changedResources = this.getChangedResources(repository);\n\t\t\tif (!changedResources.size) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (const uri of changedResources) {\n\t\t\t\tconst workspaceFolder = this.contextService.getWorkspaceFolder(uri);\n\t\t\t\tif (!workspaceFolder || createdEditSessionIdentities.has(uri)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcreatedEditSessionIdentities.add(uri);\n\t\t\t\tawait this.editSessionIdentityService.onWillCreateEditSessionIdentity(workspaceFolder, cancellationToken);\n\t\t\t}\n\t\t}\n\n\t\tfor (const repository of this.scmService.repositories) {\n\t\t\t// Look through all resource groups and compute which files were added/modified/deleted\n\t\t\tconst trackedUris = this.getChangedResources(repository); // A URI might appear in more than one resource group\n\n\t\t\tconst workingChanges: Change[] = [];\n\n\t\t\tconst { rootUri } = repository.provider;\n\t\t\tconst workspaceFolder = rootUri ? this.contextService.getWorkspaceFolder(rootUri) : undefined;\n\t\t\tlet name = workspaceFolder?.name;\n\n\t\t\tfor (const uri of trackedUris) {\n\t\t\t\tconst workspaceFolder = this.contextService.getWorkspaceFolder(uri);\n\t\t\t\tif (!workspaceFolder) {\n\t\t\t\t\tthis.logService.info(`Skipping working change ${uri.toString()} as no associated workspace folder was found.`);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tname = name ?? workspaceFolder.name;\n\t\t\t\tconst relativeFilePath = relativePath(workspaceFolder.uri, uri) ?? uri.path;\n\n\t\t\t\t// Only deal with file contents for now\n\t\t\t\ttry {\n\t\t\t\t\tif (!(await this.fileService.stat(uri)).isFile) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} catch { }\n\n\t\t\t\thasEdits = true;\n\n\n\t\t\t\tif (await this.fileService.exists(uri)) {\n\t\t\t\t\tconst contents = encodeBase64((await this.fileService.readFile(uri)).value);\n\t\t\t\t\teditSessionSize += contents.length;\n\t\t\t\t\tif (editSessionSize > this.editSessionsStorageService.SIZE_LIMIT) {\n\t\t\t\t\t\tthis.notificationService.error(localize('payload too large', 'Your working changes exceed the size limit and cannot be stored.'));\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tworkingChanges.push({ type: ChangeType.Addition, fileType: FileType.File, contents: contents, relativeFilePath: relativeFilePath });\n\t\t\t\t} else {\n\t\t\t\t\t// Assume it's a deletion\n\t\t\t\t\tworkingChanges.push({ type: ChangeType.Deletion, fileType: FileType.File, contents: undefined, relativeFilePath: relativeFilePath });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet canonicalIdentity = undefined;\n\t\t\tif (workspaceFolder !== null && workspaceFolder !== undefined) {\n\t\t\t\tcanonicalIdentity = await this.editSessionIdentityService.getEditSessionIdentifier(workspaceFolder, cancellationToken);\n\t\t\t}\n\n\t\t\t// TODO@joyceerhl debt: don't store working changes as a child of the folder\n\t\t\tfolders.push({ workingChanges, name: name ?? '', canonicalIdentity: canonicalIdentity ?? undefined, absoluteUri: workspaceFolder?.uri.toString() });\n\t\t}\n\n\t\t// Store contributed workspace state\n\t\tawait this.workspaceStateSynchronizer?.sync();\n\n\t\tif (!hasEdits) {\n\t\t\tthis.logService.info('Skipped storing working changes in the cloud as there are no edits to store.');\n\t\t\tif (fromStoreCommand) {\n\t\t\t\tthis.notificationService.info(localize('no working changes to store', 'Skipped storing working changes in the cloud as there are no edits to store.'));\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst data: EditSession = { folders, version: 2, workspaceStateId: this.editSessionsStorageService.lastWrittenResources.get('workspaceState')?.ref };\n\n\t\ttry {\n\t\t\tthis.logService.info(`Storing edit session...`);\n\t\t\tconst ref = await this.editSessionsStorageService.write('editSessions', data);\n\t\t\tthis.logService.info(`Stored edit session with ref ${ref}.`);\n\t\t\treturn ref;\n\t\t} catch (ex) {\n\t\t\tthis.logService.error(`Failed to store edit session, reason: `, (ex as Error).toString());\n\n\t\t\ttype UploadFailedEvent = { reason: string };\n\t\t\ttype UploadFailedClassification = {\n\t\t\t\towner: 'joyceerhl'; comment: 'Reporting when Continue On server request fails.';\n\t\t\t\treason?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The reason that the server request failed.' };\n\t\t\t};\n\n\t\t\tif (ex instanceof UserDataSyncStoreError) {\n\t\t\t\tswitch (ex.code) {\n\t\t\t\t\tcase UserDataSyncErrorCode.TooLarge:\n\t\t\t\t\t\t// Uploading a payload can fail due to server size limits\n\t\t\t\t\t\tthis.telemetryService.publicLog2<UploadFailedEvent, UploadFailedClassification>('editSessions.upload.failed', { reason: 'TooLarge' });\n\t\t\t\t\t\tthis.notificationService.error(localize('payload too large', 'Your working changes exceed the size limit and cannot be stored.'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.telemetryService.publicLog2<UploadFailedEvent, UploadFailedClassification>('editSessions.upload.failed', { reason: 'unknown' });\n\t\t\t\t\t\tthis.notificationService.error(localize('payload failed', 'Your working changes cannot be stored.'));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getChangedResources(repository: ISCMRepository) {\n\t\treturn repository.provider.groups.reduce((resources, resourceGroups) => {\n\t\t\tresourceGroups.resources.forEach((resource) => resources.add(resource.sourceUri));\n\t\t\treturn resources;\n\t\t}, new Set<URI>()); // A URI might appear in more than one resource group\n\t}\n\n\tprivate hasEditSession() {\n\t\tfor (const repository of this.scmService.repositories) {\n\t\t\tif (this.getChangedResources(repository).size > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate async shouldContinueOnWithEditSession(): Promise<boolean> {\n\t\ttype EditSessionsAuthCheckEvent = { outcome: string };\n\t\ttype EditSessionsAuthCheckClassification = {\n\t\t\towner: 'joyceerhl'; comment: 'Reporting whether we can and should store edit session as part of Continue On.';\n\t\t\toutcome: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The outcome of checking whether we can store an edit session as part of the Continue On flow.' };\n\t\t};\n\n\t\t// If the user is already signed in, we should store edit session\n\t\tif (this.editSessionsStorageService.isSignedIn) {\n\t\t\treturn this.hasEditSession();\n\t\t}\n\n\t\t// If the user has been asked before and said no, don't use edit sessions\n\t\tif (this.configurationService.getValue(useEditSessionsWithContinueOn) === 'off') {\n\t\t\tthis.telemetryService.publicLog2<EditSessionsAuthCheckEvent, EditSessionsAuthCheckClassification>('continueOn.editSessions.canStore.outcome', { outcome: 'disabledEditSessionsViaSetting' });\n\t\t\treturn false;\n\t\t}\n\n\t\t// Prompt the user to use edit sessions if they currently could benefit from using it\n\t\tif (this.hasEditSession()) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst quickpick = disposables.add(this.quickInputService.createQuickPick<IQuickPickItem>());\n\t\t\tquickpick.placeholder = localize('continue with cloud changes', \"Select whether to bring your working changes with you\");\n\t\t\tquickpick.ok = false;\n\t\t\tquickpick.ignoreFocusOut = true;\n\t\t\tconst withCloudChanges = { label: localize('with cloud changes', \"Yes, continue with my working changes\") };\n\t\t\tconst withoutCloudChanges = { label: localize('without cloud changes', \"No, continue without my working changes\") };\n\t\t\tquickpick.items = [withCloudChanges, withoutCloudChanges];\n\n\t\t\tconst continueWithCloudChanges = await new Promise<boolean>((resolve, reject) => {\n\t\t\t\tdisposables.add(quickpick.onDidAccept(() => {\n\t\t\t\t\tresolve(quickpick.selectedItems[0] === withCloudChanges);\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t}));\n\t\t\t\tdisposables.add(quickpick.onDidHide(() => {\n\t\t\t\t\treject(new CancellationError());\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t}));\n\t\t\t\tquickpick.show();\n\t\t\t});\n\n\t\t\tif (!continueWithCloudChanges) {\n\t\t\t\tthis.telemetryService.publicLog2<EditSessionsAuthCheckEvent, EditSessionsAuthCheckClassification>('continueOn.editSessions.canStore.outcome', { outcome: 'didNotEnableEditSessionsWhenPrompted' });\n\t\t\t\treturn continueWithCloudChanges;\n\t\t\t}\n\n\t\t\tconst initialized = await this.editSessionsStorageService.initialize('write');\n\t\t\tif (!initialized) {\n\t\t\t\tthis.telemetryService.publicLog2<EditSessionsAuthCheckEvent, EditSessionsAuthCheckClassification>('continueOn.editSessions.canStore.outcome', { outcome: 'didNotEnableEditSessionsWhenPrompted' });\n\t\t\t}\n\t\t\treturn initialized;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t//#region Continue Edit Session extension contribution point\n\n\tprivate registerContributedEditSessionOptions() {\n\t\tcontinueEditSessionExtPoint.setHandler(extensions => {\n\t\t\tconst continueEditSessionOptions: ContinueEditSessionItem[] = [];\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tif (!isProposedApiEnabled(extension.description, 'contribEditSessions')) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (!Array.isArray(extension.value)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (const contribution of extension.value) {\n\t\t\t\t\tconst command = MenuRegistry.getCommand(contribution.command);\n\t\t\t\t\tif (!command) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst icon = command.icon;\n\t\t\t\t\tconst title = typeof command.title === 'string' ? command.title : command.title.value;\n\t\t\t\t\tconst when = ContextKeyExpr.deserialize(contribution.when);\n\n\t\t\t\t\tcontinueEditSessionOptions.push(new ContinueEditSessionItem(\n\t\t\t\t\t\tThemeIcon.isThemeIcon(icon) ? `$(${icon.id}) ${title}` : title,\n\t\t\t\t\t\tcommand.id,\n\t\t\t\t\t\tcommand.source?.title,\n\t\t\t\t\t\twhen,\n\t\t\t\t\t\tcontribution.documentation\n\t\t\t\t\t));\n\n\t\t\t\t\tif (contribution.qualifiedName) {\n\t\t\t\t\t\tthis.generateStandaloneOptionCommand(command.id, contribution.qualifiedName, contribution.category ?? command.category, when, contribution.remoteGroup);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.continueEditSessionOptions = continueEditSessionOptions;\n\t\t});\n\t}\n\n\tprivate generateStandaloneOptionCommand(commandId: string, qualifiedName: string, category: string | ILocalizedString | undefined, when: ContextKeyExpression | undefined, remoteGroup: string | undefined) {\n\t\tconst command: IAction2Options = {\n\t\t\tid: `${continueWorkingOnCommand.id}.${commandId}`,\n\t\t\ttitle: { original: qualifiedName, value: qualifiedName },\n\t\t\tcategory: typeof category === 'string' ? { original: category, value: category } : category,\n\t\t\tprecondition: when,\n\t\t\tf1: true\n\t\t};\n\n\t\tif (!this.registeredCommands.has(command.id)) {\n\t\t\tthis.registeredCommands.add(command.id);\n\n\t\t\tthis._register(registerAction2(class StandaloneContinueOnOption extends Action2 {\n\t\t\t\tconstructor() {\n\t\t\t\t\tsuper(command);\n\t\t\t\t}\n\n\t\t\t\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\t\t\t\treturn accessor.get(ICommandService).executeCommand(continueWorkingOnCommand.id, undefined, commandId);\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (remoteGroup !== undefined) {\n\t\t\t\tMenuRegistry.appendMenuItem(MenuId.StatusBarRemoteIndicatorMenu, {\n\t\t\t\t\tgroup: remoteGroup,\n\t\t\t\t\tcommand: command,\n\t\t\t\t\twhen: command.precondition\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate registerContinueInLocalFolderAction(): void {\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class ContinueInLocalFolderAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper(openLocalFolderCommand);\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor): Promise<URI | undefined> {\n\t\t\t\tconst selection = await that.fileDialogService.showOpenDialog({\n\t\t\t\t\ttitle: localize('continueEditSession.openLocalFolder.title.v2', 'Select a local folder to continue working in'),\n\t\t\t\t\tcanSelectFolders: true,\n\t\t\t\t\tcanSelectMany: false,\n\t\t\t\t\tcanSelectFiles: false,\n\t\t\t\t\tavailableFileSystems: [Schemas.file]\n\t\t\t\t});\n\n\t\t\t\treturn selection?.length !== 1 ? undefined : URI.from({\n\t\t\t\t\tscheme: that.productService.urlProtocol,\n\t\t\t\t\tauthority: Schemas.file,\n\t\t\t\t\tpath: selection[0].path\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tif (getVirtualWorkspaceLocation(this.contextService.getWorkspace()) !== undefined && isNative) {\n\t\t\tthis.generateStandaloneOptionCommand(openLocalFolderCommand.id, localize('continueWorkingOn.existingLocalFolder', 'Continue Working in Existing Local Folder'), undefined, openLocalFolderCommand.precondition, undefined);\n\t\t}\n\t}\n\n\tprivate async pickContinueEditSessionDestination(): Promise<string | undefined> {\n\t\tconst disposables = new DisposableStore();\n\t\tconst quickPick = disposables.add(this.quickInputService.createQuickPick<ContinueEditSessionItem>({ useSeparators: true }));\n\n\t\tconst workspaceContext = this.contextService.getWorkbenchState() === WorkbenchState.FOLDER\n\t\t\t? this.contextService.getWorkspace().folders[0].name\n\t\t\t: this.contextService.getWorkspace().folders.map((folder) => folder.name).join(', ');\n\t\tquickPick.placeholder = localize('continueEditSessionPick.title.v2', \"Select a development environment to continue working on {0} in\", `'${workspaceContext}'`);\n\t\tquickPick.items = this.createPickItems();\n\t\tthis.extensionService.onDidChangeExtensions(() => {\n\t\t\tquickPick.items = this.createPickItems();\n\t\t});\n\n\t\tconst command = await new Promise<string | undefined>((resolve, reject) => {\n\t\t\tdisposables.add(quickPick.onDidHide(() => {\n\t\t\t\tdisposables.dispose();\n\t\t\t\tresolve(undefined);\n\t\t\t}));\n\n\t\t\tdisposables.add(quickPick.onDidAccept((e) => {\n\t\t\t\tconst selection = quickPick.activeItems[0].command;\n\n\t\t\t\tif (selection === installAdditionalContinueOnOptionsCommand.id) {\n\t\t\t\t\tvoid this.commandService.executeCommand(installAdditionalContinueOnOptionsCommand.id);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(selection);\n\t\t\t\t\tquickPick.hide();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tquickPick.show();\n\n\t\t\tdisposables.add(quickPick.onDidTriggerItemButton(async (e) => {\n\t\t\t\tif (e.item.documentation !== undefined) {\n\t\t\t\t\tconst uri = URI.isUri(e.item.documentation) ? URI.parse(e.item.documentation) : await this.commandService.executeCommand<URI>(e.item.documentation);\n\t\t\t\t\tif (uri) {\n\t\t\t\t\t\tvoid this.openerService.open(uri, { openExternal: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\n\t\tquickPick.dispose();\n\n\t\treturn command;\n\t}\n\n\tprivate async resolveDestination(command: string): Promise<URI | 'noDestinationUri' | undefined> {\n\t\ttype EvaluateContinueOnDestinationEvent = { outcome: string; selection: string };\n\t\ttype EvaluateContinueOnDestinationClassification = {\n\t\t\towner: 'joyceerhl'; comment: 'Reporting the outcome of evaluating a selected Continue On destination option.';\n\t\t\tselection: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The selected Continue On destination option.' };\n\t\t\toutcome: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The outcome of evaluating the selected Continue On destination option.' };\n\t\t};\n\n\t\ttry {\n\t\t\tconst uri = await this.commandService.executeCommand(command);\n\n\t\t\t// Some continue on commands do not return a URI\n\t\t\t// to support extensions which want to be in control\n\t\t\t// of how the destination is opened\n\t\t\tif (uri === undefined) {\n\t\t\t\tthis.telemetryService.publicLog2<EvaluateContinueOnDestinationEvent, EvaluateContinueOnDestinationClassification>('continueOn.openDestination.outcome', { selection: command, outcome: 'noDestinationUri' });\n\t\t\t\treturn 'noDestinationUri';\n\t\t\t}\n\n\t\t\tif (URI.isUri(uri)) {\n\t\t\t\tthis.telemetryService.publicLog2<EvaluateContinueOnDestinationEvent, EvaluateContinueOnDestinationClassification>('continueOn.openDestination.outcome', { selection: command, outcome: 'resolvedUri' });\n\t\t\t\treturn uri;\n\t\t\t}\n\n\t\t\tthis.telemetryService.publicLog2<EvaluateContinueOnDestinationEvent, EvaluateContinueOnDestinationClassification>('continueOn.openDestination.outcome', { selection: command, outcome: 'invalidDestination' });\n\t\t\treturn undefined;\n\t\t} catch (ex) {\n\t\t\tif (ex instanceof CancellationError) {\n\t\t\t\tthis.telemetryService.publicLog2<EvaluateContinueOnDestinationEvent, EvaluateContinueOnDestinationClassification>('continueOn.openDestination.outcome', { selection: command, outcome: 'cancelled' });\n\t\t\t} else {\n\t\t\t\tthis.telemetryService.publicLog2<EvaluateContinueOnDestinationEvent, EvaluateContinueOnDestinationClassification>('continueOn.openDestination.outcome', { selection: command, outcome: 'unknownError' });\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate createPickItems(): (ContinueEditSessionItem | IQuickPickSeparator)[] {\n\t\tconst items = [...this.continueEditSessionOptions].filter((option) => option.when === undefined || this.contextKeyService.contextMatchesRules(option.when));\n\n\t\tif (getVirtualWorkspaceLocation(this.contextService.getWorkspace()) !== undefined && isNative) {\n\t\t\titems.push(new ContinueEditSessionItem(\n\t\t\t\t'$(folder) ' + localize('continueEditSessionItem.openInLocalFolder.v2', 'Open in Local Folder'),\n\t\t\t\topenLocalFolderCommand.id,\n\t\t\t\tlocalize('continueEditSessionItem.builtin', 'Built-in')\n\t\t\t));\n\t\t}\n\n\t\tconst sortedItems: (ContinueEditSessionItem | IQuickPickSeparator)[] = items.sort((item1, item2) => item1.label.localeCompare(item2.label));\n\t\treturn sortedItems.concat({ type: 'separator' }, new ContinueEditSessionItem(installAdditionalContinueOnOptionsCommand.title, installAdditionalContinueOnOptionsCommand.id));\n\t}\n}\n\nconst infoButtonClass = ThemeIcon.asClassName(Codicon.info);\nclass ContinueEditSessionItem implements IQuickPickItem {\n\tpublic readonly buttons: IQuickInputButton[] | undefined;\n\n\tconstructor(\n\t\tpublic readonly label: string,\n\t\tpublic readonly command: string,\n\t\tpublic readonly description?: string,\n\t\tpublic readonly when?: ContextKeyExpression,\n\t\tpublic readonly documentation?: string,\n\t) {\n\t\tif (documentation !== undefined) {\n\t\t\tthis.buttons = [{\n\t\t\t\ticonClass: infoButtonClass,\n\t\t\t\ttooltip: localize('learnMoreTooltip', 'Learn More'),\n\t\t\t}];\n\t\t}\n\t}\n}\n\ninterface ICommand {\n\tcommand: string;\n\tgroup: string;\n\twhen: string;\n\tdocumentation?: string;\n\tqualifiedName?: string;\n\tcategory?: string;\n\tremoteGroup?: string;\n}\n\nconst continueEditSessionExtPoint = ExtensionsRegistry.registerExtensionPoint<ICommand[]>({\n\textensionPoint: 'continueEditSession',\n\tjsonSchema: {\n\t\tdescription: localize('continueEditSessionExtPoint', 'Contributes options for continuing the current edit session in a different environment'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\tcommand: {\n\t\t\t\t\tdescription: localize('continueEditSessionExtPoint.command', 'Identifier of the command to execute. The command must be declared in the \\'commands\\'-section and return a URI representing a different environment where the current edit session can be continued.'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tgroup: {\n\t\t\t\t\tdescription: localize('continueEditSessionExtPoint.group', 'Group into which this item belongs.'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tqualifiedName: {\n\t\t\t\t\tdescription: localize('continueEditSessionExtPoint.qualifiedName', 'A fully qualified name for this item which is used for display in menus.'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\tdescription: localize('continueEditSessionExtPoint.description', \"The url, or a command that returns the url, to the option's documentation page.\"),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tremoteGroup: {\n\t\t\t\t\tdescription: localize('continueEditSessionExtPoint.remoteGroup', 'Group into which this item belongs in the remote indicator.'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\twhen: {\n\t\t\t\t\tdescription: localize('continueEditSessionExtPoint.when', 'Condition which must be true to show this item.'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t}\n\t\t\t},\n\t\t\trequired: ['command']\n\t\t}\n\t}\n});\n\n//#endregion\n\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(EditSessionsContribution, LifecyclePhase.Restored);\n\nRegistry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration).registerConfiguration({\n\t...workbenchConfigurationNodeBase,\n\t'properties': {\n\t\t'workbench.experimental.cloudChanges.autoStore': {\n\t\t\tenum: ['onShutdown', 'off'],\n\t\t\tenumDescriptions: [\n\t\t\t\tlocalize('autoStoreWorkingChanges.onShutdown', \"Automatically store current working changes in the cloud on window close.\"),\n\t\t\t\tlocalize('autoStoreWorkingChanges.off', \"Never attempt to automatically store working changes in the cloud.\")\n\t\t\t],\n\t\t\t'type': 'string',\n\t\t\t'tags': ['experimental', 'usesOnlineServices'],\n\t\t\t'default': 'off',\n\t\t\t'markdownDescription': localize('autoStoreWorkingChangesDescription', \"Controls whether to automatically store available working changes in the cloud for the current workspace. This setting has no effect in the web.\"),\n\t\t},\n\t\t'workbench.cloudChanges.autoResume': {\n\t\t\tenum: ['onReload', 'off'],\n\t\t\tenumDescriptions: [\n\t\t\t\tlocalize('autoResumeWorkingChanges.onReload', \"Automatically resume available working changes from the cloud on window reload.\"),\n\t\t\t\tlocalize('autoResumeWorkingChanges.off', \"Never attempt to resume working changes from the cloud.\")\n\t\t\t],\n\t\t\t'type': 'string',\n\t\t\t'tags': ['usesOnlineServices'],\n\t\t\t'default': 'onReload',\n\t\t\t'markdownDescription': localize('autoResumeWorkingChanges', \"Controls whether to automatically resume available working changes stored in the cloud for the current workspace.\"),\n\t\t},\n\t\t'workbench.cloudChanges.continueOn': {\n\t\t\tenum: ['prompt', 'off'],\n\t\t\tenumDescriptions: [\n\t\t\t\tlocalize('continueOnCloudChanges.promptForAuth', 'Prompt the user to sign in to store working changes in the cloud with Continue Working On.'),\n\t\t\t\tlocalize('continueOnCloudChanges.off', 'Do not store working changes in the cloud with Continue Working On unless the user has already turned on Cloud Changes.')\n\t\t\t],\n\t\t\ttype: 'string',\n\t\t\ttags: ['usesOnlineServices'],\n\t\t\tdefault: 'prompt',\n\t\t\tmarkdownDescription: localize('continueOnCloudChanges', 'Controls whether to prompt the user to store working changes in the cloud when using Continue Working On.')\n\t\t},\n\t\t'workbench.experimental.cloudChanges.partialMatches.enabled': {\n\t\t\t'type': 'boolean',\n\t\t\t'tags': ['experimental', 'usesOnlineServices'],\n\t\t\t'default': false,\n\t\t\t'markdownDescription': localize('cloudChangesPartialMatchesEnabled', \"Controls whether to surface cloud changes which partially match the current session.\")\n\t\t}\n\t}\n});\n"]}