{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/accessibility/electron-browser/accessibilityService.ts","vs/workbench/services/accessibility/electron-browser/accessibilityService.ts"],"names":[],"mappings":"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","file":"accessibilityService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAccessibilityService, AccessibilitySupport } from '../../../../platform/accessibility/common/accessibility.js';\nimport { isWindows, isLinux } from '../../../../base/common/platform.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { AccessibilityService } from '../../../../platform/accessibility/browser/accessibilityService.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IJSONEditingService } from '../../configuration/common/jsonEditing.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\n\ninterface AccessibilityMetrics {\n\tenabled: boolean;\n}\ntype AccessibilityMetricsClassification = {\n\towner: 'isidorn';\n\tcomment: 'Helps gain an understanding of when accessibility features are being used';\n\tenabled: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether or not accessibility features are enabled' };\n};\n\nexport class NativeAccessibilityService extends AccessibilityService implements IAccessibilityService {\n\n\tprivate didSendTelemetry = false;\n\tprivate shouldAlwaysUnderlineAccessKeys: boolean | undefined = undefined;\n\n\tconstructor(\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILayoutService _layoutService: ILayoutService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService\n\t) {\n\t\tsuper(contextKeyService, _layoutService, configurationService);\n\t\tthis.setAccessibilitySupport(environmentService.window.accessibilitySupport ? AccessibilitySupport.Enabled : AccessibilitySupport.Disabled);\n\t}\n\n\toverride async alwaysUnderlineAccessKeys(): Promise<boolean> {\n\t\tif (!isWindows) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof this.shouldAlwaysUnderlineAccessKeys !== 'boolean') {\n\t\t\tconst windowsKeyboardAccessibility = await this.nativeHostService.windowsGetStringRegKey('HKEY_CURRENT_USER', 'Control Panel\\\\Accessibility\\\\Keyboard Preference', 'On');\n\t\t\tthis.shouldAlwaysUnderlineAccessKeys = (windowsKeyboardAccessibility === '1');\n\t\t}\n\n\t\treturn this.shouldAlwaysUnderlineAccessKeys;\n\t}\n\n\toverride setAccessibilitySupport(accessibilitySupport: AccessibilitySupport): void {\n\t\tsuper.setAccessibilitySupport(accessibilitySupport);\n\n\t\tif (!this.didSendTelemetry && accessibilitySupport === AccessibilitySupport.Enabled) {\n\t\t\tthis._telemetryService.publicLog2<AccessibilityMetrics, AccessibilityMetricsClassification>('accessibility', { enabled: true });\n\t\t\tthis.didSendTelemetry = true;\n\t\t}\n\t}\n}\n\nregisterSingleton(IAccessibilityService, NativeAccessibilityService, InstantiationType.Delayed);\n\n// On linux we do not automatically detect that a screen reader is detected, thus we have to implicitly notify the renderer to enable accessibility when user configures it in settings\nclass LinuxAccessibilityContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.linuxAccessibility';\n\n\tconstructor(\n\t\t@IJSONEditingService jsonEditingService: IJSONEditingService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService\n\t) {\n\t\tconst forceRendererAccessibility = () => {\n\t\t\tif (accessibilityService.isScreenReaderOptimized()) {\n\t\t\t\tjsonEditingService.write(environmentService.argvResource, [{ path: ['force-renderer-accessibility'], value: true }], true);\n\t\t\t}\n\t\t};\n\t\tforceRendererAccessibility();\n\t\taccessibilityService.onDidChangeScreenReaderOptimized(forceRendererAccessibility);\n\t}\n}\n\nif (isLinux) {\n\tregisterWorkbenchContribution2(LinuxAccessibilityContribution.ID, LinuxAccessibilityContribution, WorkbenchPhase.BlockRestore);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAccessibilityService, AccessibilitySupport } from '../../../../platform/accessibility/common/accessibility.js';\nimport { isWindows, isLinux } from '../../../../base/common/platform.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { AccessibilityService } from '../../../../platform/accessibility/browser/accessibilityService.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IJSONEditingService } from '../../configuration/common/jsonEditing.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\n\ninterface AccessibilityMetrics {\n\tenabled: boolean;\n}\ntype AccessibilityMetricsClassification = {\n\towner: 'isidorn';\n\tcomment: 'Helps gain an understanding of when accessibility features are being used';\n\tenabled: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether or not accessibility features are enabled' };\n};\n\nexport class NativeAccessibilityService extends AccessibilityService implements IAccessibilityService {\n\n\tprivate didSendTelemetry = false;\n\tprivate shouldAlwaysUnderlineAccessKeys: boolean | undefined = undefined;\n\n\tconstructor(\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILayoutService _layoutService: ILayoutService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService\n\t) {\n\t\tsuper(contextKeyService, _layoutService, configurationService);\n\t\tthis.setAccessibilitySupport(environmentService.window.accessibilitySupport ? AccessibilitySupport.Enabled : AccessibilitySupport.Disabled);\n\t}\n\n\toverride async alwaysUnderlineAccessKeys(): Promise<boolean> {\n\t\tif (!isWindows) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof this.shouldAlwaysUnderlineAccessKeys !== 'boolean') {\n\t\t\tconst windowsKeyboardAccessibility = await this.nativeHostService.windowsGetStringRegKey('HKEY_CURRENT_USER', 'Control Panel\\\\Accessibility\\\\Keyboard Preference', 'On');\n\t\t\tthis.shouldAlwaysUnderlineAccessKeys = (windowsKeyboardAccessibility === '1');\n\t\t}\n\n\t\treturn this.shouldAlwaysUnderlineAccessKeys;\n\t}\n\n\toverride setAccessibilitySupport(accessibilitySupport: AccessibilitySupport): void {\n\t\tsuper.setAccessibilitySupport(accessibilitySupport);\n\n\t\tif (!this.didSendTelemetry && accessibilitySupport === AccessibilitySupport.Enabled) {\n\t\t\tthis._telemetryService.publicLog2<AccessibilityMetrics, AccessibilityMetricsClassification>('accessibility', { enabled: true });\n\t\t\tthis.didSendTelemetry = true;\n\t\t}\n\t}\n}\n\nregisterSingleton(IAccessibilityService, NativeAccessibilityService, InstantiationType.Delayed);\n\n// On linux we do not automatically detect that a screen reader is detected, thus we have to implicitly notify the renderer to enable accessibility when user configures it in settings\nclass LinuxAccessibilityContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.linuxAccessibility';\n\n\tconstructor(\n\t\t@IJSONEditingService jsonEditingService: IJSONEditingService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService\n\t) {\n\t\tconst forceRendererAccessibility = () => {\n\t\t\tif (accessibilityService.isScreenReaderOptimized()) {\n\t\t\t\tjsonEditingService.write(environmentService.argvResource, [{ path: ['force-renderer-accessibility'], value: true }], true);\n\t\t\t}\n\t\t};\n\t\tforceRendererAccessibility();\n\t\taccessibilityService.onDidChangeScreenReaderOptimized(forceRendererAccessibility);\n\t}\n}\n\nif (isLinux) {\n\tregisterWorkbenchContribution2(LinuxAccessibilityContribution.ID, LinuxAccessibilityContribution, WorkbenchPhase.BlockRestore);\n}\n"]}