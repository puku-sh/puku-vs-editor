{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/authentication/common/authenticationQuery.ts","vs/workbench/services/authentication/common/authenticationQuery.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAqc7F;;GAEG;AACH,MAAM,CAAC,MAAM,2BAA2B,GAAG,eAAe,CAA8B,6BAA6B,CAAC,CAAC","file":"authenticationQuery.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../base/common/event.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { AuthenticationSessionAccount } from './authentication.js';\n\n/**\n * Statistics about authentication usage\n */\nexport interface IAuthenticationUsageStats {\n\treadonly totalSessions: number;\n\treadonly totalAccounts: number;\n\treadonly recentActivity: {\n\t\treadonly accountName: string;\n\t\treadonly lastUsed: number;\n\t\treadonly usageCount: number;\n\t}[];\n}\n\n/**\n * Information about entities using authentication within a provider\n */\nexport interface IActiveEntities {\n\treadonly extensions: string[];\n\treadonly mcpServers: string[];\n}\n\n/**\n * Base query interface with common properties\n */\nexport interface IBaseQuery {\n\treadonly providerId: string;\n}\n\n/**\n * Query interface for operations on a specific account within a provider\n */\nexport interface IAccountQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Get operations for a specific extension on this account\n\t * @param extensionId The extension id\n\t * @returns An account-extension query interface\n\t */\n\textension(extensionId: string): IAccountExtensionQuery;\n\n\t/**\n\t * Get operations for a specific MCP server on this account\n\t * @param mcpServerId The MCP server id\n\t * @returns An account-MCP server query interface\n\t */\n\tmcpServer(mcpServerId: string): IAccountMcpServerQuery;\n\n\t/**\n\t * Get operations for all extensions on this account\n\t * @returns An account-extensions query interface\n\t */\n\textensions(): IAccountExtensionsQuery;\n\n\t/**\n\t * Get operations for all MCP servers on this account\n\t * @returns An account-MCP servers query interface\n\t */\n\tmcpServers(): IAccountMcpServersQuery;\n\n\t/**\n\t * Get operations for all entities (extensions and MCP servers) on this account\n\t * @returns An account-entities query interface for type-agnostic operations\n\t */\n\tentities(): IAccountEntitiesQuery;\n\n\t/**\n\t * Remove all authentication data for this account\n\t */\n\tremove(): void;\n}\n\n/**\n * Query interface for operations on a specific extension within a specific account\n */\nexport interface IAccountExtensionQuery extends IBaseQuery {\n\treadonly accountName: string;\n\treadonly extensionId: string;\n\n\t/**\n\t * Check if this extension is allowed to access this account\n\t * @returns True if allowed, false if denied, undefined if not yet decided\n\t */\n\tisAccessAllowed(): boolean | undefined;\n\n\t/**\n\t * Set access permission for this extension on this account\n\t * @param allowed True to allow, false to deny access\n\t * @param extensionName Optional extension name for display purposes\n\t */\n\tsetAccessAllowed(allowed: boolean, extensionName?: string): void;\n\n\t/**\n\t * Add usage record for this extension on this account\n\t * @param scopes The scopes that were used\n\t * @param extensionName The extension name for display purposes\n\t */\n\taddUsage(scopes: readonly string[], extensionName: string): void;\n\n\t/**\n\t * Get usage history for this extension on this account\n\t * @returns Array of usage records\n\t */\n\tgetUsage(): {\n\t\treadonly extensionId: string;\n\t\treadonly extensionName: string;\n\t\treadonly scopes: readonly string[];\n\t\treadonly lastUsed: number;\n\t}[];\n\n\t/**\n\t * Remove all usage data for this extension on this account\n\t */\n\tremoveUsage(): void;\n\n\t/**\n\t * Set this account as the preferred account for this extension\n\t */\n\tsetAsPreferred(): void;\n\n\t/**\n\t * Check if this account is the preferred account for this extension\n\t */\n\tisPreferred(): boolean;\n\n\t/**\n\t * Check if this extension is trusted (defined in product.json)\n\t * @returns True if the extension is trusted, false otherwise\n\t */\n\tisTrusted(): boolean;\n}\n\n/**\n * Query interface for operations on a specific MCP server within a specific account\n */\nexport interface IAccountMcpServerQuery extends IBaseQuery {\n\treadonly accountName: string;\n\treadonly mcpServerId: string;\n\n\t/**\n\t * Check if this MCP server is allowed to access this account\n\t * @returns True if allowed, false if denied, undefined if not yet decided\n\t */\n\tisAccessAllowed(): boolean | undefined;\n\n\t/**\n\t * Set access permission for this MCP server on this account\n\t * @param allowed True to allow, false to deny access\n\t * @param mcpServerName Optional MCP server name for display purposes\n\t */\n\tsetAccessAllowed(allowed: boolean, mcpServerName?: string): void;\n\n\t/**\n\t * Add usage record for this MCP server on this account\n\t * @param scopes The scopes that were used\n\t * @param mcpServerName The MCP server name for display purposes\n\t */\n\taddUsage(scopes: readonly string[], mcpServerName: string): void;\n\n\t/**\n\t * Get usage history for this MCP server on this account\n\t * @returns Array of usage records\n\t */\n\tgetUsage(): {\n\t\treadonly mcpServerId: string;\n\t\treadonly mcpServerName: string;\n\t\treadonly scopes: readonly string[];\n\t\treadonly lastUsed: number;\n\t}[];\n\n\t/**\n\t * Remove all usage data for this MCP server on this account\n\t */\n\tremoveUsage(): void;\n\n\t/**\n\t * Set this account as the preferred account for this MCP server\n\t */\n\tsetAsPreferred(): void;\n\n\t/**\n\t * Check if this account is the preferred account for this MCP server\n\t */\n\tisPreferred(): boolean;\n\n\t/**\n\t * Check if this MCP server is trusted (defined in product.json)\n\t * @returns True if the MCP server is trusted, false otherwise\n\t */\n\tisTrusted(): boolean;\n}\n\n/**\n * Query interface for operations on all extensions within a specific account\n */\nexport interface IAccountExtensionsQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Get all extensions that have access to this account with their trusted state\n\t * @returns Array of objects containing extension data including trusted state\n\t */\n\tgetAllowedExtensions(): { id: string; name: string; allowed?: boolean; lastUsed?: number; trusted?: boolean }[];\n\n\t/**\n\t * Grant access to this account for all specified extensions\n\t * @param extensionIds Array of extension IDs to grant access to\n\t */\n\tallowAccess(extensionIds: string[]): void;\n\n\t/**\n\t * Remove access to this account for all specified extensions\n\t * @param extensionIds Array of extension IDs to remove access from\n\t */\n\tremoveAccess(extensionIds: string[]): void;\n\n\t/**\n\t * Execute a callback for each extension that has used this account\n\t * @param callback Function to execute for each extension\n\t */\n\tforEach(callback: (extensionQuery: IAccountExtensionQuery) => void): void;\n}\n\n/**\n * Query interface for operations on all MCP servers within a specific account\n */\nexport interface IAccountMcpServersQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Get all MCP servers that have access to this account with their trusted state\n\t * @returns Array of objects containing MCP server data including trusted state\n\t */\n\tgetAllowedMcpServers(): { id: string; name: string; allowed?: boolean; lastUsed?: number; trusted?: boolean }[];\n\n\t/**\n\t * Grant access to this account for all specified MCP servers\n\t * @param mcpServerIds Array of MCP server IDs to grant access to\n\t */\n\tallowAccess(mcpServerIds: string[]): void;\n\n\t/**\n\t * Remove access to this account for all specified MCP servers\n\t * @param mcpServerIds Array of MCP server IDs to remove access from\n\t */\n\tremoveAccess(mcpServerIds: string[]): void;\n\n\t/**\n\t * Execute a callback for each MCP server that has used this account\n\t * @param callback Function to execute for each MCP server\n\t */\n\tforEach(callback: (mcpServerQuery: IAccountMcpServerQuery) => void): void;\n}\n\n/**\n * Query interface for type-agnostic operations on all entities (extensions and MCP servers) within a specific account\n */\nexport interface IAccountEntitiesQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Check if this account has been used by any entity (extension or MCP server)\n\t * @returns True if the account has been used, false otherwise\n\t */\n\thasAnyUsage(): boolean;\n\n\t/**\n\t * Get the total count of entities that have used this account\n\t * @returns Object with counts for extensions and MCP servers\n\t */\n\tgetEntityCount(): { extensions: number; mcpServers: number; total: number };\n\n\t/**\n\t * Remove access to this account for all entities (extensions and MCP servers)\n\t */\n\tremoveAllAccess(): void;\n\n\t/**\n\t * Execute a callback for each entity that has used this account\n\t * @param callback Function to execute for each entity\n\t */\n\tforEach(callback: (entityId: string, entityType: 'extension' | 'mcpServer') => void): void;\n}\n\n/**\n * Query interface for operations on a specific extension within a provider\n */\nexport interface IProviderExtensionQuery extends IBaseQuery {\n\treadonly extensionId: string;\n\n\t/**\n\t * Get the preferred account for this extension within this provider\n\t * @returns The account name, or undefined if no preference is set\n\t */\n\tgetPreferredAccount(): string | undefined;\n\n\t/**\n\t * Set the preferred account for this extension within this provider\n\t * @param account The account to set as preferred\n\t */\n\tsetPreferredAccount(account: AuthenticationSessionAccount): void;\n\n\t/**\n\t * Remove the account preference for this extension within this provider\n\t */\n\tremoveAccountPreference(): void;\n}\n\n/**\n * Query interface for operations on a specific MCP server within a provider\n */\nexport interface IProviderMcpServerQuery extends IBaseQuery {\n\treadonly mcpServerId: string;\n\n\t/**\n\t * Get the last used account for this MCP server within a provider\n\t * @returns The account name, or undefined if no preference is set\n\t */\n\tgetLastUsedAccount(): Promise<string | undefined>;\n\n\t/**\n\t * Get the preferred account for this MCP server within a provider\n\t * @returns The account name, or undefined if no preference is set\n\t */\n\tgetPreferredAccount(): string | undefined;\n\n\t/**\n\t * Set the preferred account for this MCP server within a provider\n\t * @param account The account to set as preferred\n\t */\n\tsetPreferredAccount(account: AuthenticationSessionAccount): void;\n\n\t/**\n\t * Remove the account preference for this MCP server within a provider\n\t */\n\tremoveAccountPreference(): void;\n\n\t/**\n\t * Get all accounts that this MCP server has used within this provider\n\t * @returns Array of account names\n\t */\n\tgetUsedAccounts(): Promise<string[]>;\n}\n\n/**\n * Query interface for provider-scoped operations\n */\nexport interface IProviderQuery extends IBaseQuery {\n\t/**\n\t * Get operations for a specific account within this provider\n\t * @param accountName The account name\n\t * @returns An account query interface\n\t */\n\taccount(accountName: string): IAccountQuery;\n\n\t/**\n\t * Get operations for a specific extension within this provider\n\t * @param extensionId The extension id\n\t * @returns A provider-extension query interface\n\t */\n\textension(extensionId: string): IProviderExtensionQuery;\n\n\t/**\n\t * Get operations for a specific MCP server within this provider\n\t * @param mcpServerId The MCP server id\n\t * @returns A provider-MCP server query interface\n\t */\n\tmcpServer(mcpServerId: string): IProviderMcpServerQuery;\n\n\t/**\n\t * Get information about active entities (extensions and MCP servers) within this provider\n\t * @returns Information about entities that have used authentication\n\t */\n\tgetActiveEntities(): Promise<IActiveEntities>;\n\n\t/**\n\t * Get all account names for this provider\n\t * @returns Array of account names\n\t */\n\tgetAccountNames(): Promise<string[]>;\n\n\t/**\n\t * Get usage statistics for this provider\n\t * @returns Usage statistics\n\t */\n\tgetUsageStats(): Promise<IAuthenticationUsageStats>;\n\n\t/**\n\t * Execute a callback for each account in this provider\n\t * @param callback Function to execute for each account\n\t */\n\tforEachAccount(callback: (accountQuery: IAccountQuery) => void): Promise<void>;\n}\n\n/**\n * Query interface for extension-scoped operations (cross-provider)\n */\nexport interface IExtensionQuery {\n\treadonly extensionId: string;\n\n\t/**\n\t * Get all providers where this extension has access\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Array of provider IDs\n\t */\n\tgetProvidersWithAccess(includeInternal?: boolean): Promise<string[]>;\n\n\t/**\n\t * Get account preferences for this extension across all providers\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Map of provider ID to account name\n\t */\n\tgetAllAccountPreferences(includeInternal?: boolean): Map<string, string>;\n\n\t/**\n\t * Get operations for this extension within a specific provider\n\t * @param providerId The provider ID\n\t * @returns A provider-extension query interface\n\t */\n\tprovider(providerId: string): IProviderExtensionQuery;\n}\n\n/**\n * Query interface for MCP server-scoped operations (cross-provider)\n */\nexport interface IMcpServerQuery {\n\treadonly mcpServerId: string;\n\n\t/**\n\t * Get all providers where this MCP server has access\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Array of provider IDs\n\t */\n\tgetProvidersWithAccess(includeInternal?: boolean): Promise<string[]>;\n\n\t/**\n\t * Get account preferences for this MCP server across all providers\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Map of provider ID to account name\n\t */\n\tgetAllAccountPreferences(includeInternal?: boolean): Map<string, string>;\n\n\t/**\n\t * Get operations for this MCP server within a specific provider\n\t * @param providerId The provider ID\n\t * @returns A provider-MCP server query interface\n\t */\n\tprovider(providerId: string): IProviderMcpServerQuery;\n}\n\n/**\n * Main authentication query service interface\n */\nexport const IAuthenticationQueryService = createDecorator<IAuthenticationQueryService>('IAuthenticationQueryService');\nexport interface IAuthenticationQueryService {\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Fires when authentication preferences change\n\t */\n\treadonly onDidChangePreferences: Event<{\n\t\treadonly providerId: string;\n\t\treadonly entityType: 'extension' | 'mcpServer';\n\t\treadonly entityIds: string[];\n\t}>;\n\n\t/**\n\t * Fires when authentication access permissions change\n\t */\n\treadonly onDidChangeAccess: Event<{\n\t\treadonly providerId: string;\n\t\treadonly accountName: string;\n\t}>;\n\n\t/**\n\t * Get operations for a specific authentication provider\n\t * @param providerId The authentication provider id\n\t * @returns A provider query interface\n\t */\n\tprovider(providerId: string): IProviderQuery;\n\n\t/**\n\t * Get operations for a specific extension across all providers\n\t * @param extensionId The extension id\n\t * @returns An extension query interface\n\t */\n\textension(extensionId: string): IExtensionQuery;\n\n\t/**\n\t * Get operations for a specific MCP server across all providers\n\t * @param mcpServerId The MCP server id\n\t * @returns An MCP server query interface\n\t */\n\tmcpServer(mcpServerId: string): IMcpServerQuery;\n\n\t/**\n\t * Get all available provider IDs\n\t * @returns Array of provider IDs\n\t */\n\tgetProviderIds(): string[];\n\n\t/**\n\t * Clear all authentication data (for testing/debugging purposes)\n\t * @param confirmation Must be 'CLEAR_ALL_AUTH_DATA' to confirm\n\t * @param includeInternal Whether to include internal providers (defaults to true for complete clearing)\n\t */\n\tclearAllData(confirmation: 'CLEAR_ALL_AUTH_DATA', includeInternal?: boolean): Promise<void>;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../../base/common/event.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { AuthenticationSessionAccount } from './authentication.js';\n\n/**\n * Statistics about authentication usage\n */\nexport interface IAuthenticationUsageStats {\n\treadonly totalSessions: number;\n\treadonly totalAccounts: number;\n\treadonly recentActivity: {\n\t\treadonly accountName: string;\n\t\treadonly lastUsed: number;\n\t\treadonly usageCount: number;\n\t}[];\n}\n\n/**\n * Information about entities using authentication within a provider\n */\nexport interface IActiveEntities {\n\treadonly extensions: string[];\n\treadonly mcpServers: string[];\n}\n\n/**\n * Base query interface with common properties\n */\nexport interface IBaseQuery {\n\treadonly providerId: string;\n}\n\n/**\n * Query interface for operations on a specific account within a provider\n */\nexport interface IAccountQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Get operations for a specific extension on this account\n\t * @param extensionId The extension id\n\t * @returns An account-extension query interface\n\t */\n\textension(extensionId: string): IAccountExtensionQuery;\n\n\t/**\n\t * Get operations for a specific MCP server on this account\n\t * @param mcpServerId The MCP server id\n\t * @returns An account-MCP server query interface\n\t */\n\tmcpServer(mcpServerId: string): IAccountMcpServerQuery;\n\n\t/**\n\t * Get operations for all extensions on this account\n\t * @returns An account-extensions query interface\n\t */\n\textensions(): IAccountExtensionsQuery;\n\n\t/**\n\t * Get operations for all MCP servers on this account\n\t * @returns An account-MCP servers query interface\n\t */\n\tmcpServers(): IAccountMcpServersQuery;\n\n\t/**\n\t * Get operations for all entities (extensions and MCP servers) on this account\n\t * @returns An account-entities query interface for type-agnostic operations\n\t */\n\tentities(): IAccountEntitiesQuery;\n\n\t/**\n\t * Remove all authentication data for this account\n\t */\n\tremove(): void;\n}\n\n/**\n * Query interface for operations on a specific extension within a specific account\n */\nexport interface IAccountExtensionQuery extends IBaseQuery {\n\treadonly accountName: string;\n\treadonly extensionId: string;\n\n\t/**\n\t * Check if this extension is allowed to access this account\n\t * @returns True if allowed, false if denied, undefined if not yet decided\n\t */\n\tisAccessAllowed(): boolean | undefined;\n\n\t/**\n\t * Set access permission for this extension on this account\n\t * @param allowed True to allow, false to deny access\n\t * @param extensionName Optional extension name for display purposes\n\t */\n\tsetAccessAllowed(allowed: boolean, extensionName?: string): void;\n\n\t/**\n\t * Add usage record for this extension on this account\n\t * @param scopes The scopes that were used\n\t * @param extensionName The extension name for display purposes\n\t */\n\taddUsage(scopes: readonly string[], extensionName: string): void;\n\n\t/**\n\t * Get usage history for this extension on this account\n\t * @returns Array of usage records\n\t */\n\tgetUsage(): {\n\t\treadonly extensionId: string;\n\t\treadonly extensionName: string;\n\t\treadonly scopes: readonly string[];\n\t\treadonly lastUsed: number;\n\t}[];\n\n\t/**\n\t * Remove all usage data for this extension on this account\n\t */\n\tremoveUsage(): void;\n\n\t/**\n\t * Set this account as the preferred account for this extension\n\t */\n\tsetAsPreferred(): void;\n\n\t/**\n\t * Check if this account is the preferred account for this extension\n\t */\n\tisPreferred(): boolean;\n\n\t/**\n\t * Check if this extension is trusted (defined in product.json)\n\t * @returns True if the extension is trusted, false otherwise\n\t */\n\tisTrusted(): boolean;\n}\n\n/**\n * Query interface for operations on a specific MCP server within a specific account\n */\nexport interface IAccountMcpServerQuery extends IBaseQuery {\n\treadonly accountName: string;\n\treadonly mcpServerId: string;\n\n\t/**\n\t * Check if this MCP server is allowed to access this account\n\t * @returns True if allowed, false if denied, undefined if not yet decided\n\t */\n\tisAccessAllowed(): boolean | undefined;\n\n\t/**\n\t * Set access permission for this MCP server on this account\n\t * @param allowed True to allow, false to deny access\n\t * @param mcpServerName Optional MCP server name for display purposes\n\t */\n\tsetAccessAllowed(allowed: boolean, mcpServerName?: string): void;\n\n\t/**\n\t * Add usage record for this MCP server on this account\n\t * @param scopes The scopes that were used\n\t * @param mcpServerName The MCP server name for display purposes\n\t */\n\taddUsage(scopes: readonly string[], mcpServerName: string): void;\n\n\t/**\n\t * Get usage history for this MCP server on this account\n\t * @returns Array of usage records\n\t */\n\tgetUsage(): {\n\t\treadonly mcpServerId: string;\n\t\treadonly mcpServerName: string;\n\t\treadonly scopes: readonly string[];\n\t\treadonly lastUsed: number;\n\t}[];\n\n\t/**\n\t * Remove all usage data for this MCP server on this account\n\t */\n\tremoveUsage(): void;\n\n\t/**\n\t * Set this account as the preferred account for this MCP server\n\t */\n\tsetAsPreferred(): void;\n\n\t/**\n\t * Check if this account is the preferred account for this MCP server\n\t */\n\tisPreferred(): boolean;\n\n\t/**\n\t * Check if this MCP server is trusted (defined in product.json)\n\t * @returns True if the MCP server is trusted, false otherwise\n\t */\n\tisTrusted(): boolean;\n}\n\n/**\n * Query interface for operations on all extensions within a specific account\n */\nexport interface IAccountExtensionsQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Get all extensions that have access to this account with their trusted state\n\t * @returns Array of objects containing extension data including trusted state\n\t */\n\tgetAllowedExtensions(): { id: string; name: string; allowed?: boolean; lastUsed?: number; trusted?: boolean }[];\n\n\t/**\n\t * Grant access to this account for all specified extensions\n\t * @param extensionIds Array of extension IDs to grant access to\n\t */\n\tallowAccess(extensionIds: string[]): void;\n\n\t/**\n\t * Remove access to this account for all specified extensions\n\t * @param extensionIds Array of extension IDs to remove access from\n\t */\n\tremoveAccess(extensionIds: string[]): void;\n\n\t/**\n\t * Execute a callback for each extension that has used this account\n\t * @param callback Function to execute for each extension\n\t */\n\tforEach(callback: (extensionQuery: IAccountExtensionQuery) => void): void;\n}\n\n/**\n * Query interface for operations on all MCP servers within a specific account\n */\nexport interface IAccountMcpServersQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Get all MCP servers that have access to this account with their trusted state\n\t * @returns Array of objects containing MCP server data including trusted state\n\t */\n\tgetAllowedMcpServers(): { id: string; name: string; allowed?: boolean; lastUsed?: number; trusted?: boolean }[];\n\n\t/**\n\t * Grant access to this account for all specified MCP servers\n\t * @param mcpServerIds Array of MCP server IDs to grant access to\n\t */\n\tallowAccess(mcpServerIds: string[]): void;\n\n\t/**\n\t * Remove access to this account for all specified MCP servers\n\t * @param mcpServerIds Array of MCP server IDs to remove access from\n\t */\n\tremoveAccess(mcpServerIds: string[]): void;\n\n\t/**\n\t * Execute a callback for each MCP server that has used this account\n\t * @param callback Function to execute for each MCP server\n\t */\n\tforEach(callback: (mcpServerQuery: IAccountMcpServerQuery) => void): void;\n}\n\n/**\n * Query interface for type-agnostic operations on all entities (extensions and MCP servers) within a specific account\n */\nexport interface IAccountEntitiesQuery extends IBaseQuery {\n\treadonly accountName: string;\n\n\t/**\n\t * Check if this account has been used by any entity (extension or MCP server)\n\t * @returns True if the account has been used, false otherwise\n\t */\n\thasAnyUsage(): boolean;\n\n\t/**\n\t * Get the total count of entities that have used this account\n\t * @returns Object with counts for extensions and MCP servers\n\t */\n\tgetEntityCount(): { extensions: number; mcpServers: number; total: number };\n\n\t/**\n\t * Remove access to this account for all entities (extensions and MCP servers)\n\t */\n\tremoveAllAccess(): void;\n\n\t/**\n\t * Execute a callback for each entity that has used this account\n\t * @param callback Function to execute for each entity\n\t */\n\tforEach(callback: (entityId: string, entityType: 'extension' | 'mcpServer') => void): void;\n}\n\n/**\n * Query interface for operations on a specific extension within a provider\n */\nexport interface IProviderExtensionQuery extends IBaseQuery {\n\treadonly extensionId: string;\n\n\t/**\n\t * Get the preferred account for this extension within this provider\n\t * @returns The account name, or undefined if no preference is set\n\t */\n\tgetPreferredAccount(): string | undefined;\n\n\t/**\n\t * Set the preferred account for this extension within this provider\n\t * @param account The account to set as preferred\n\t */\n\tsetPreferredAccount(account: AuthenticationSessionAccount): void;\n\n\t/**\n\t * Remove the account preference for this extension within this provider\n\t */\n\tremoveAccountPreference(): void;\n}\n\n/**\n * Query interface for operations on a specific MCP server within a provider\n */\nexport interface IProviderMcpServerQuery extends IBaseQuery {\n\treadonly mcpServerId: string;\n\n\t/**\n\t * Get the last used account for this MCP server within a provider\n\t * @returns The account name, or undefined if no preference is set\n\t */\n\tgetLastUsedAccount(): Promise<string | undefined>;\n\n\t/**\n\t * Get the preferred account for this MCP server within a provider\n\t * @returns The account name, or undefined if no preference is set\n\t */\n\tgetPreferredAccount(): string | undefined;\n\n\t/**\n\t * Set the preferred account for this MCP server within a provider\n\t * @param account The account to set as preferred\n\t */\n\tsetPreferredAccount(account: AuthenticationSessionAccount): void;\n\n\t/**\n\t * Remove the account preference for this MCP server within a provider\n\t */\n\tremoveAccountPreference(): void;\n\n\t/**\n\t * Get all accounts that this MCP server has used within this provider\n\t * @returns Array of account names\n\t */\n\tgetUsedAccounts(): Promise<string[]>;\n}\n\n/**\n * Query interface for provider-scoped operations\n */\nexport interface IProviderQuery extends IBaseQuery {\n\t/**\n\t * Get operations for a specific account within this provider\n\t * @param accountName The account name\n\t * @returns An account query interface\n\t */\n\taccount(accountName: string): IAccountQuery;\n\n\t/**\n\t * Get operations for a specific extension within this provider\n\t * @param extensionId The extension id\n\t * @returns A provider-extension query interface\n\t */\n\textension(extensionId: string): IProviderExtensionQuery;\n\n\t/**\n\t * Get operations for a specific MCP server within this provider\n\t * @param mcpServerId The MCP server id\n\t * @returns A provider-MCP server query interface\n\t */\n\tmcpServer(mcpServerId: string): IProviderMcpServerQuery;\n\n\t/**\n\t * Get information about active entities (extensions and MCP servers) within this provider\n\t * @returns Information about entities that have used authentication\n\t */\n\tgetActiveEntities(): Promise<IActiveEntities>;\n\n\t/**\n\t * Get all account names for this provider\n\t * @returns Array of account names\n\t */\n\tgetAccountNames(): Promise<string[]>;\n\n\t/**\n\t * Get usage statistics for this provider\n\t * @returns Usage statistics\n\t */\n\tgetUsageStats(): Promise<IAuthenticationUsageStats>;\n\n\t/**\n\t * Execute a callback for each account in this provider\n\t * @param callback Function to execute for each account\n\t */\n\tforEachAccount(callback: (accountQuery: IAccountQuery) => void): Promise<void>;\n}\n\n/**\n * Query interface for extension-scoped operations (cross-provider)\n */\nexport interface IExtensionQuery {\n\treadonly extensionId: string;\n\n\t/**\n\t * Get all providers where this extension has access\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Array of provider IDs\n\t */\n\tgetProvidersWithAccess(includeInternal?: boolean): Promise<string[]>;\n\n\t/**\n\t * Get account preferences for this extension across all providers\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Map of provider ID to account name\n\t */\n\tgetAllAccountPreferences(includeInternal?: boolean): Map<string, string>;\n\n\t/**\n\t * Get operations for this extension within a specific provider\n\t * @param providerId The provider ID\n\t * @returns A provider-extension query interface\n\t */\n\tprovider(providerId: string): IProviderExtensionQuery;\n}\n\n/**\n * Query interface for MCP server-scoped operations (cross-provider)\n */\nexport interface IMcpServerQuery {\n\treadonly mcpServerId: string;\n\n\t/**\n\t * Get all providers where this MCP server has access\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Array of provider IDs\n\t */\n\tgetProvidersWithAccess(includeInternal?: boolean): Promise<string[]>;\n\n\t/**\n\t * Get account preferences for this MCP server across all providers\n\t * @param includeInternal Whether to include internal providers (starting with INTERNAL_AUTH_PROVIDER_PREFIX)\n\t * @returns Map of provider ID to account name\n\t */\n\tgetAllAccountPreferences(includeInternal?: boolean): Map<string, string>;\n\n\t/**\n\t * Get operations for this MCP server within a specific provider\n\t * @param providerId The provider ID\n\t * @returns A provider-MCP server query interface\n\t */\n\tprovider(providerId: string): IProviderMcpServerQuery;\n}\n\n/**\n * Main authentication query service interface\n */\nexport const IAuthenticationQueryService = createDecorator<IAuthenticationQueryService>('IAuthenticationQueryService');\nexport interface IAuthenticationQueryService {\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Fires when authentication preferences change\n\t */\n\treadonly onDidChangePreferences: Event<{\n\t\treadonly providerId: string;\n\t\treadonly entityType: 'extension' | 'mcpServer';\n\t\treadonly entityIds: string[];\n\t}>;\n\n\t/**\n\t * Fires when authentication access permissions change\n\t */\n\treadonly onDidChangeAccess: Event<{\n\t\treadonly providerId: string;\n\t\treadonly accountName: string;\n\t}>;\n\n\t/**\n\t * Get operations for a specific authentication provider\n\t * @param providerId The authentication provider id\n\t * @returns A provider query interface\n\t */\n\tprovider(providerId: string): IProviderQuery;\n\n\t/**\n\t * Get operations for a specific extension across all providers\n\t * @param extensionId The extension id\n\t * @returns An extension query interface\n\t */\n\textension(extensionId: string): IExtensionQuery;\n\n\t/**\n\t * Get operations for a specific MCP server across all providers\n\t * @param mcpServerId The MCP server id\n\t * @returns An MCP server query interface\n\t */\n\tmcpServer(mcpServerId: string): IMcpServerQuery;\n\n\t/**\n\t * Get all available provider IDs\n\t * @returns Array of provider IDs\n\t */\n\tgetProviderIds(): string[];\n\n\t/**\n\t * Clear all authentication data (for testing/debugging purposes)\n\t * @param confirmation Must be 'CLEAR_ALL_AUTH_DATA' to confirm\n\t * @param includeInternal Whether to include internal providers (defaults to true for complete clearing)\n\t */\n\tclearAllData(confirmation: 'CLEAR_ALL_AUTH_DATA', includeInternal?: boolean): Promise<void>;\n}\n"]}